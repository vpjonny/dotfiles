import{$ as Xm,$b as _c,$c as Ni,$e as Kg,Ab as B,Ad as ln,Ae as Cc,Af as zf,B as dt,Bb as fg,Bd as cs,Bf as Rg,Cb as dg,Cf as qf,Da as Kt,Db as hg,Dc as Sg,Df as Ug,E as is,Eb as Z1,Ec as kc,Ef as Ng,Fb as Ui,Ff as Rc,G as Gm,Gb as pg,H as Q,Hb as mg,Hc as It,I as F,Id as Tg,Jb as J1,Jc as Pc,Jd as Ig,Ka as ag,Kd as _g,L as j,La as cn,Lb as kr,Lc as Eg,Ld as kg,Ma as un,Mb as gg,Mc as xo,Md as Pg,Nb as it,Ob as Mc,Pb as sr,Pc as Xe,Qb as Tc,R as Df,Rb as yg,Sb as Ic,Sd as Bg,T as Zm,Tb as Y1,Td as Kc,Ub as Q1,V as Jm,Vc as St,W as $1,Wb as X1,Xc as jt,Y as Ym,Z as G1,Zb as vg,Zc as as,Zd as Oc,_ as Qm,_b as Ct,_c as Bc,ba as fa,bc as bg,bd as Mg,ca as eg,cc as Ff,da as Vf,dc as pe,ea as tg,ed as ha,fa as xe,ga as ee,ge as ar,ha as rg,ia as ng,ie as Di,ja as ig,je as jf,ka as og,kc as wg,ke as eS,la as di,mb as cg,qa as os,qd as Rt,ra as _,sd as Qe,ta as da,tb as ug,ua as gr,ub as Lf,v as rs,vb as or,vd as Yt,wa as sg,wb as Ot,xb as Ec,xc as xg,y as $m,yb as wo,yc as ss,yf as Og,zb as lg,zc as Ag,zf as Cg}from"./chunk-DJGGVTSJ.js";import{a as jm,b as W1,d as la,f as H1,h as ts,o as zm,q as xc,r as Ac,s as Sc,w as qm,x as Wm}from"./chunk-FATTDLFQ.js";import{b as Gt}from"./chunk-2RWUL32J.js";import{U as In,Z as Vi,a as At,b as wc,j as d,m as Bt,n as ns,q as Hm,s as ir,za as tS}from"./chunk-LQZGQEJ6.js";import{a as i,d as he,e as z1,g as ue,i as h,j as M,k as q1,l as an,m as Buffer,n as p}from"./chunk-WKJYWAXG.js";var ys=he(jc=>{"use strict";h();p();Object.defineProperty(jc,"__esModule",{value:!0});jc.AppAuthError=void 0;var kS=function(){function e(t,r){this.message=t,this.extras=r}return i(e,"AppAuthError"),e}();jc.AppAuthError=kS});var zc=he(Pn=>{"use strict";h();p();Object.defineProperty(Pn,"__esModule",{value:!0});Pn.DefaultCrypto=Pn.textEncodeLite=Pn.urlSafe=Pn.bufferToString=void 0;var PS=q1(),ey=ys(),ty=typeof self<"u"&&!!self.crypto,BS=ty&&!!self.crypto.subtle,Xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function ry(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%Xf.length;t.push(Xf[n])}return t.join("")}i(ry,"bufferToString");Pn.bufferToString=ry;function ny(e){var t=PS.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}i(ny,"urlSafe");Pn.urlSafe=ny;function iy(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}i(iy,"textEncodeLite");Pn.textEncodeLite=iy;var KS=function(){function e(){}return i(e,"DefaultCrypto"),e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(ty)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*Xf.length|0;return ry(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new ey.AppAuthError("Invalid code length.")):BS?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",iy(t)).then(function(o){return r(ny(new Uint8Array(o)))},function(o){return n(o)})}):Promise.reject(new ey.AppAuthError("window.crypto.subtle is unavailable."))},e}();Pn.DefaultCrypto=KS});var ed=he(yr=>{"use strict";h();p();Object.defineProperty(yr,"__esModule",{value:!0});yr.IS_PROFILE=yr.IS_LOG=yr.setFlag=yr.Flags=void 0;yr.Flags={IS_LOG:!0,IS_PROFILE:!1};function OS(e,t){yr.Flags[e]=t}i(OS,"setFlag");yr.setFlag=OS;yr.IS_LOG=yr.Flags.IS_LOG,yr.IS_PROFILE=yr.Flags.IS_PROFILE});var Sa=he(zi=>{"use strict";h();p();var td=zi&&zi.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(zi,"__esModule",{value:!0});zi.profile=zi.log=void 0;var oy=ed();function rd(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(oy.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,td([e],t,!1)):console.log(e)}}i(rd,"log");zi.log=rd;var CS=typeof self<"u"&&!!self.performance&&!!console.profile;function RS(e,t,r){return oy.Flags.IS_PROFILE?US(e,t,r):r}i(RS,"profile");zi.profile=RS;function US(e,t,r){var n=r.value,o=n.name;return o||(o="anonymous function"),CS?r.value=function(a){console.profile(o);var l=self.performance.now(),f=n.call.apply(n,td([this||self],a,!1)),m=self.performance.now()-l;return console.log("".concat(o," took ").concat(m," ms")),console.profileEnd(),f}:r.value=function(a){rd("Profile start ".concat(o));var l=Date.now(),f=n.call.apply(n,td([this||self],a,!1)),m=Date.now()-l;return rd("Profile end ".concat(o," took ").concat(m," ms.")),f},r}i(US,"performProfile")});var nd=he(qc=>{"use strict";h();p();Object.defineProperty(qc,"__esModule",{value:!0});qc.AuthorizationRequest=void 0;var NS=zc(),DS=Sa(),VS=10,LS=i(function(e){return e.generateRandom(VS)},"newState"),FS=function(){function e(t,r,n){r===void 0&&(r=new NS.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||LS(r),this.extras=t.extras,this.internal=t.internal}return i(e,"AuthorizationRequest"),e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(o){(0,DS.log)("Unable to generate PKCE challenge. Not using PKCE",o)});return n.then(function(o){o&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=o,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();qc.AuthorizationRequest=FS});var sy=he(Wc=>{"use strict";h();p();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.requireValidUrl=void 0;var jS=ys();function zS(e){try{return new URL(e),e}catch{throw new jS.AppAuthError("Invalid input url ".concat(e))}}i(zS,"requireValidUrl");Wc.requireValidUrl=zS});var od=he(gi=>{"use strict";h();p();Object.defineProperty(gi,"__esModule",{value:!0});gi.AuthorizationRequestHandler=gi.BUILT_IN_PARAMETERS=gi.AuthorizationNotifier=void 0;var id=Sa(),qS=sy(),WS=function(){function e(){this.listener=null}return i(e,"AuthorizationNotifier"),e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();gi.AuthorizationNotifier=WS;gi.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var HS=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return i(e,"AuthorizationRequestHandler"),e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var o in r.extras)r.extras.hasOwnProperty(o)&&gi.BUILT_IN_PARAMETERS.indexOf(o)<0&&(n[o]=r.extras[o]);var a=this.utils.stringify(n),l=(0,qS.requireValidUrl)(t.authorizationEndpoint),f="".concat(l,"?").concat(a);return f},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,id.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,id.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,id.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();gi.AuthorizationRequestHandler=HS});var sd=he(vs=>{"use strict";h();p();Object.defineProperty(vs,"__esModule",{value:!0});vs.AuthorizationError=vs.AuthorizationResponse=void 0;var $S=function(){function e(t){this.code=t.code,this.state=t.state}return i(e,"AuthorizationResponse"),e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();vs.AuthorizationResponse=$S;var GS=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return i(e,"AuthorizationError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();vs.AuthorizationError=GS});var $c=he(Br=>{"use strict";h();p();var cd=Br&&Br.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Br,"__esModule",{value:!0});Br.TestRequestor=Br.FetchRequestor=Br.JQueryRequestor=Br.Requestor=void 0;var ad=ys(),Hc=function(){function e(){}return i(e,"Requestor"),e}();Br.Requestor=Hc;var ZS=function(e){cd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return i(t,"JQueryRequestor"),t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(o,a){n.then(function(l,f,m){o(l)},function(l,f,m){a(new ad.AppAuthError(m))})})},t}(Hc);Br.JQueryRequestor=ZS;var JS=function(e){cd(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return i(t,"FetchRequestor"),t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new ad.AppAuthError("A URL must be provided."));var n=new URL(r.url),o={};if(o.method=r.method,o.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")o.body=r.data;else{var a=new URLSearchParams(r.data);a.forEach(function(m,A){n.searchParams.append(A,m)})}if(o.headers={},r.headers)for(var l in r.headers)r.headers.hasOwnProperty(l)&&(o.headers[l]=r.headers[l]);var f=r.dataType&&r.dataType.toLowerCase()==="json";return f&&(o.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),o).then(function(m){if(m.status>=200&&m.status<300){var A=m.headers.get("content-type");return f||A&&A.indexOf("application/json")!==-1?m.json():m.text()}else return Promise.reject(new ad.AppAuthError(m.status.toString(),m.statusText))})},t}(Hc);Br.FetchRequestor=JS;var YS=function(e){cd(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return i(t,"TestRequestor"),t.prototype.xhr=function(r){return this.promise},t}(Hc);Br.TestRequestor=YS});var ay=he(Gc=>{"use strict";h();p();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.AuthorizationServiceConfiguration=void 0;var QS=$c(),XS=".well-known",e2="openid-configuration",t2=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return i(e,"AuthorizationServiceConfiguration"),e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(XS,"/").concat(e2),o=r||new QS.JQueryRequestor;return o.xhr({url:n,dataType:"json",method:"GET"}).then(function(a){return new e(a)})},e}();Gc.AuthorizationServiceConfiguration=t2});var Jc=he(Zc=>{"use strict";h();p();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.BasicQueryStringUtils=void 0;var r2=function(){function e(){}return i(e,"BasicQueryStringUtils"),e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),o=0;o<n.length;o+=1){var a=n[o],l=a.split("=");if(l.length>=2){var f=decodeURIComponent(l.shift()),m=l.length>0?l.join("="):null;m&&(r[f]=decodeURIComponent(m))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();Zc.BasicQueryStringUtils=r2});var ud=he(qi=>{"use strict";h();p();var n2=qi&&qi.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});qi.LocalStorageBackend=qi.StorageBackend=void 0;var cy=function(){function e(){}return i(e,"StorageBackend"),e}();qi.StorageBackend=cy;var i2=function(e){n2(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return i(t,"LocalStorageBackend"),t.prototype.getItem=function(r){var n=this;return new Promise(function(o,a){var l=n.storage.getItem(r);o(l||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(o,a){n.storage.removeItem(r),o()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,o){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var o=this;return new Promise(function(a,l){o.storage.setItem(r,n),a()})},t}(cy);qi.LocalStorageBackend=i2});var fy=he(bs=>{"use strict";h();p();var o2=bs&&bs.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(bs,"__esModule",{value:!0});bs.RedirectRequestHandler=void 0;var s2=nd(),a2=od(),uy=sd(),c2=zc(),Yc=Sa(),u2=Jc(),l2=ud(),ld=i(function(e){return"".concat(e,"_appauth_authorization_request")},"authorizationRequestKey"),ly=i(function(e){return"".concat(e,"_appauth_authorization_service_configuration")},"authorizationServiceConfigurationKey"),fd="appauth_current_authorization_request",f2=function(e){o2(t,e);function t(r,n,o,a){r===void 0&&(r=new l2.LocalStorageBackend),n===void 0&&(n=new u2.BasicQueryStringUtils),o===void 0&&(o=self.location),a===void 0&&(a=new c2.DefaultCrypto);var l=e.call(this,n,a)||this;return l.storageBackend=r,l.locationLike=o,l}return i(t,"RedirectRequestHandler"),t.prototype.performAuthorizationRequest=function(r,n){var o=this,a=this.crypto.generateRandom(10),l=Promise.all([this.storageBackend.setItem(fd,a),n.toJson().then(function(f){return o.storageBackend.setItem(ld(a),JSON.stringify(f))}),this.storageBackend.setItem(ly(a),JSON.stringify(r.toJson()))]);l.then(function(){var f=o.buildRequestUrl(r,n);(0,Yc.log)("Making a request to ",n,f),o.locationLike.assign(f)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(fd).then(function(n){return n?r.storageBackend.getItem(ld(n)).then(function(o){return JSON.parse(o)}).then(function(o){return new s2.AuthorizationRequest(o)}).then(function(o){var a="".concat(r.locationLike.origin).concat(r.locationLike.pathname),l=r.utils.parse(r.locationLike,!0),f=l.state,m=l.code,A=l.error;(0,Yc.log)("Potential authorization request ",a,l,f,m,A);var T=f===o.state,I=null,k=null;if(T){if(A){var O=l.error_uri,C=l.error_description;k=new uy.AuthorizationError({error:A,error_description:C,error_uri:O,state:f})}else I=new uy.AuthorizationResponse({code:m,state:f});return Promise.all([r.storageBackend.removeItem(fd),r.storageBackend.removeItem(ld(n)),r.storageBackend.removeItem(ly(n))]).then(function(){return(0,Yc.log)("Delivering authorization response"),{request:o,response:I,error:k}})}else return(0,Yc.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(a2.AuthorizationRequestHandler);bs.RedirectRequestHandler=f2});var dy=he(Qc=>{"use strict";h();p();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.RevokeTokenRequest=void 0;var d2=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return i(e,"RevokeTokenRequest"),e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();Qc.RevokeTokenRequest=d2});var hy=he(Wi=>{"use strict";h();p();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.TokenRequest=Wi.GRANT_TYPE_REFRESH_TOKEN=Wi.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Wi.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Wi.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var h2=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return i(e,"TokenRequest"),e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Wi.TokenRequest=h2});var dd=he(Bn=>{"use strict";h();p();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TokenError=Bn.TokenResponse=Bn.nowInSeconds=void 0;var p2=10*60*-1,m2=i(function(){return Math.round(new Date().getTime()/1e3)},"nowInSeconds");Bn.nowInSeconds=m2;var g2=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Bn.nowInSeconds)()}return i(e,"TokenResponse"),e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=p2),this.expiresIn){var r=(0,Bn.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Bn.TokenResponse=g2;var y2=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return i(e,"TokenError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Bn.TokenError=y2});var my=he(Xc=>{"use strict";h();p();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.BaseTokenRequestHandler=void 0;var v2=ys(),b2=Jc(),py=dd(),w2=$c(),x2=function(){function e(t,r){t===void 0&&(t=new w2.JQueryRequestor),r===void 0&&(r=new b2.BasicQueryStringUtils),this.requestor=t,this.utils=r}return i(e,"BaseTokenRequestHandler"),e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(o){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,o=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return o.then(function(a){return n.isTokenResponse(a)?new py.TokenResponse(a):Promise.reject(new v2.AppAuthError(a.error,new py.TokenError(a)))})},e}();Xc.BaseTokenRequestHandler=x2});var yy=he(gy=>{"use strict";h();p();Object.defineProperty(gy,"__esModule",{value:!0})});var hd=he(vt=>{"use strict";h();p();var A2=vt&&vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),zt=vt&&vt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&A2(t,e,r)};Object.defineProperty(vt,"__esModule",{value:!0});zt(nd(),vt);zt(od(),vt);zt(sd(),vt);zt(ay(),vt);zt(zc(),vt);zt(ys(),vt);zt(ed(),vt);zt(Sa(),vt);zt(Jc(),vt);zt(fy(),vt);zt(dy(),vt);zt(ud(),vt);zt(hy(),vt);zt(my(),vt);zt(dd(),vt);zt(yy(),vt);zt($c(),vt)});var Fv=he(Ps=>{"use strict";h();p();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.testnet=Ps.bitcoin=void 0;Ps.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Ps.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var jv=he(lt=>{"use strict";h();p();Object.defineProperty(lt,"__esModule",{value:!0});lt.maybe=lt.Boolean=lt.Array=lt.Buffer256bit=lt.Network=lt.typeforce=void 0;lt.typeforce=Q1();lt.Network=lt.typeforce.compile({messagePrefix:lt.typeforce.oneOf(lt.typeforce.Buffer,lt.typeforce.String),bip32:{public:lt.typeforce.UInt32,private:lt.typeforce.UInt32},pubKeyHash:lt.typeforce.UInt8,scriptHash:lt.typeforce.UInt8,wif:lt.typeforce.UInt8});lt.Buffer256bit=lt.typeforce.BufferN(32);lt.Array=lt.typeforce.Array;lt.Boolean=lt.typeforce.Boolean;lt.maybe=lt.typeforce.maybe});var zv=he(al=>{"use strict";h();p();Object.defineProperty(al,"__esModule",{value:!0});al.testEcc=void 0;var ve=i(e=>Buffer.from(e,"hex"),"h");function GM(e){ht(e.isPoint(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(!e.isPoint(ve("030000000000000000000000000000000000000000000000000000000000000005"))),ht(e.isPrivate(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),ht(!e.isPrivate(ve("0000000000000000000000000000000000000000000000000000000000000000"))),ht(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),ht(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),ht(Buffer.from(e.privateAdd(ve("0000000000000000000000000000000000000000000000000000000000000001"),ve("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000001"))),ht(e.privateAdd(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ve("0000000000000000000000000000000000000000000000000000000000000003"))===null),ht(Buffer.from(e.privateAdd(ve("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ve("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ve("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),ht(Buffer.from(e.privateNegate(ve("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),ht(Buffer.from(e.privateNegate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000003"))),ht(Buffer.from(e.privateNegate(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),ht(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),ht(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),ht(Buffer.from(e.pointFromScalar(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),ht(e.xOnlyPointAddTweak(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ve("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ve("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));ht(Buffer.from(t.xOnlyPubkey).equals(ve("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ve("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ve("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),ht(Buffer.from(t.xOnlyPubkey).equals(ve("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),ht(Buffer.from(e.sign(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),ht(e.verify(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&ht(Buffer.from(e.signSchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ve("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&ht(e.verifySchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}i(GM,"testEcc");al.testEcc=GM;function ht(e){if(!e)throw new Error("ecc library invalid")}i(ht,"assert")});var Wv=he(Bs=>{"use strict";h();p();Object.defineProperty(Bs,"__esModule",{value:!0});Bs.ECPairFactory=Bs.networks=void 0;var ep=Fv();Bs.networks=ep;var Xt=jv(),ZM=Zm(),qv=J1(),JM=zv(),Xh=Xt.typeforce.maybe(Xt.typeforce.compile({compressed:Xt.maybe(Xt.Boolean),network:Xt.maybe(Xt.Network)})),YM=i(e=>e.length===32?e:e.slice(1,33),"toXOnly");function QM(e){(0,JM.testEcc)(e);function t(f){return e.isPoint(f)}i(t,"isPoint");function r(f,m){if(Xt.typeforce(Xt.Buffer256bit,f),!e.isPrivate(f))throw new TypeError("Private key not in range [1, n)");return Xt.typeforce(Xh,m),new l(f,void 0,m)}i(r,"fromPrivateKey");function n(f,m){return Xt.typeforce(e.isPoint,f),Xt.typeforce(Xh,m),new l(void 0,f,m)}i(n,"fromPublicKey");function o(f,m){let A=qv.decode(f),T=A.version;if(Xt.Array(m)){if(m=m.filter(I=>T===I.wif).pop(),!m)throw new Error("Unknown network version")}else if(m=m||ep.bitcoin,T!==m.wif)throw new Error("Invalid network version");return r(A.privateKey,{compressed:A.compressed,network:m})}i(o,"fromWIF");function a(f){Xt.typeforce(Xh,f),f===void 0&&(f={});let m=f.rng||ZM,A;do A=m(32),Xt.typeforce(Xt.Buffer256bit,A);while(!e.isPrivate(A));return r(A,f)}i(a,"makeRandom");class l{static{i(this,"ECPair")}__D;__Q;compressed;network;lowR;constructor(m,A,T){this.__D=m,this.__Q=A,this.lowR=!1,T===void 0&&(T={}),this.compressed=T.compressed===void 0?!0:T.compressed,this.network=T.network||ep.bitcoin,A!==void 0&&(this.__Q=Buffer.from(e.pointCompress(A,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let m=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(m)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return qv.encode(this.network.wif,this.__D,this.compressed)}tweak(m){return this.privateKey?this.tweakFromPrivateKey(m):this.tweakFromPublicKey(m)}sign(m,A){if(!this.__D)throw new Error("Missing private key");if(A===void 0&&(A=this.lowR),A===!1)return Buffer.from(e.sign(m,this.__D));{let T=e.sign(m,this.__D),I=Buffer.alloc(32,0),k=0;for(;T[0]>127;)k++,I.writeUIntLE(k,0,6),T=e.sign(m,this.__D,I);return Buffer.from(T)}}signSchnorr(m){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(m,this.privateKey))}verify(m,A){return e.verify(m,this.publicKey,A)}verifySchnorr(m,A){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(m,this.publicKey.subarray(1,33),A)}tweakFromPublicKey(m){let A=YM(this.publicKey),T=e.xOnlyPointAddTweak(A,m);if(!T||T.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let I=Buffer.from([T.parity===0?2:3]);return n(Buffer.concat([I,T.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(m){let T=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,I=e.privateAdd(T,m);if(!I)throw new Error("Invalid tweaked private key!");return r(Buffer.from(I),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:o,makeRandom:a}}i(QM,"ECPairFactory");Bs.ECPairFactory=QM});var Hv=he(eo=>{"use strict";h();p();Object.defineProperty(eo,"__esModule",{value:!0});eo.networks=eo.ECPairFactory=eo.default=void 0;var tp=Wv();Object.defineProperty(eo,"default",{enumerable:!0,get:i(function(){return tp.ECPairFactory},"get")});Object.defineProperty(eo,"ECPairFactory",{enumerable:!0,get:i(function(){return tp.ECPairFactory},"get")});Object.defineProperty(eo,"networks",{enumerable:!0,get:i(function(){return tp.networks},"get")})});var Kb=he((E$,Bb)=>{h();p();var ct={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Dr(e,t){if(!e)throw new Error(t)}i(Dr,"assert");function ot(e,t,r){if(Dr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),o=`Expected ${e} to be an Uint8Array with length [${n}]`;Dr(r.includes(t.length),o)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;Dr(t.length===r,n)}}i(ot,"isUint8Array");function Uo(e){Dr(Ds(e)==="Boolean","Expected compressed to be a Boolean")}i(Uo,"isCompressed");function yn(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),ot("output",e,t),e}i(yn,"getAssertedOutput");function Ds(e){return Object.prototype.toString.call(e).slice(8,-1)}i(Ds,"toTypeString");Bb.exports=e=>({contextRandomize(t){switch(Dr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&ot("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(ct.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return ot("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(ot("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(ct.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(ot("private key",t,32),ot("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(ct.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(ot("private key",t,32),ot("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(ct.TWEAK_MUL)}},publicKeyVerify(t){return ot("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(ot("private key",t,32),Uo(r),n=yn(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(ct.SECKEY_INVALID);case 2:throw new Error(ct.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(ot("public key",t,[33,65]),Uo(r),n=yn(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(ot("public key",t,[33,65]),Uo(r),n=yn(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.IMPOSSIBLE_CASE);case 3:throw new Error(ct.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){Dr(Array.isArray(t),"Expected public keys to be an Array"),Dr(t.length>0,"Expected public keys array will have more than zero items");for(let o of t)ot("public key",o,[33,65]);switch(Uo(r),n=yn(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.PUBKEY_COMBINE);case 3:throw new Error(ct.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,o){switch(ot("public key",t,[33,65]),ot("tweak",r,32),Uo(n),o=yn(o,n?33:65),e.publicKeyTweakAdd(o,t,r)){case 0:return o;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,o){switch(ot("public key",t,[33,65]),ot("tweak",r,32),Uo(n),o=yn(o,n?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.TWEAK_MUL)}},signatureNormalize(t){switch(ot("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(ct.SIG_PARSE)}},signatureExport(t,r){ot("signature",t,64),r=yn(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(ct.SIG_PARSE);case 2:throw new Error(ct.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(ot("signature",t),r=yn(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(ct.SIG_PARSE);case 2:throw new Error(ct.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},o){ot("message",t,32),ot("private key",r,32),Dr(Ds(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ot("options.data",n.data),n.noncefn!==void 0&&Dr(Ds(n.noncefn)==="Function","Expected options.noncefn to be a Function"),o=yn(o,64);let a={signature:o,recid:null};switch(e.ecdsaSign(a,t,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(ct.SIGN);case 2:throw new Error(ct.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(ot("signature",t,64),ot("message",r,32),ot("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(ct.SIG_PARSE);case 2:throw new Error(ct.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,o=!0,a){switch(ot("signature",t,64),Dr(Ds(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),ot("message",n,32),Uo(o),a=yn(a,o?33:65),e.ecdsaRecover(a,t,r,n)){case 0:return a;case 1:throw new Error(ct.SIG_PARSE);case 2:throw new Error(ct.RECOVER);case 3:throw new Error(ct.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},o){switch(ot("public key",t,[33,65]),ot("private key",r,32),Dr(Ds(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ot("options.data",n.data),n.hashfn!==void 0?(Dr(Ds(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&ot("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&ot("options.ybuf",n.ybuf,32),ot("output",o)):o=yn(o,32),e.ecdh(o,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return o;case 1:throw new Error(ct.PUBKEY_PARSE);case 2:throw new Error(ct.ECDH)}}})});var Cb=he((_$,Ob)=>{h();p();var ST=Ym().ec,Un=new ST("secp256k1"),nt=Un.curve,ft=nt.n.constructor;function ET(e,t){let r=new ft(t);if(r.cmp(nt.p)>=0)return null;r=r.toRed(nt.red);let n=r.redSqr().redIMul(r).redIAdd(nt.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),Un.keyPair({pub:{x:r,y:n}})}i(ET,"loadCompressedPublicKey");function MT(e,t,r){let n=new ft(t),o=new ft(r);if(n.cmp(nt.p)>=0||o.cmp(nt.p)>=0||(n=n.toRed(nt.red),o=o.toRed(nt.red),(e===6||e===7)&&o.isOdd()!==(e===7)))return null;let a=n.redSqr().redIMul(n);return o.redSqr().redISub(a.redIAdd(nt.b)).isZero()?Un.keyPair({pub:{x:n,y:o}}):null}i(MT,"loadUncompressedPublicKey");function ro(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:ET(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:MT(t,e.subarray(1,33),e.subarray(33,65));default:return null}}i(ro,"loadPublicKey");function No(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}i(No,"savePublicKey");Ob.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new ft(e);return t.cmp(nt.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new ft(e),r=nt.n.sub(t).umod(nt.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||(r.iadd(new ft(e)),r.cmp(nt.n)>=0&&r.isub(nt.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||r.isZero())return 1;r.imul(new ft(e)),r.cmp(nt.n)>=0&&(r=r.umod(nt.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return ro(e)===null?1:0},publicKeyCreate(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||r.isZero())return 1;let n=Un.keyFromPrivate(t).getPublic();return No(e,n),0},publicKeyConvert(e,t){let r=ro(t);if(r===null)return 1;let n=r.getPublic();return No(e,n),0},publicKeyNegate(e,t){let r=ro(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),No(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let o=0;o<t.length;++o)if(r[o]=ro(t[o]),r[o]===null)return 1;let n=r[0].getPublic();for(let o=1;o<r.length;++o)n=n.add(r[o].pub);return n.isInfinity()?2:(No(e,n),0)},publicKeyTweakAdd(e,t,r){let n=ro(t);if(n===null)return 1;if(r=new ft(r),r.cmp(nt.n)>=0)return 2;let o=n.getPublic().add(nt.g.mul(r));return o.isInfinity()?2:(No(e,o),0)},publicKeyTweakMul(e,t,r){let n=ro(t);if(n===null)return 1;if(r=new ft(r),r.cmp(nt.n)>=0||r.isZero())return 2;let o=n.getPublic().mul(r);return No(e,o),0},signatureNormalize(e){let t=new ft(e.subarray(0,32)),r=new ft(e.subarray(32,64));return t.cmp(nt.n)>=0||r.cmp(nt.n)>=0?1:(r.cmp(Un.nh)===1&&e.set(nt.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new ft(r).cmp(nt.n)>=0||new ft(n).cmp(nt.n)>=0)return 1;let{output:o}=e,a=o.subarray(4,37);a[0]=0,a.set(r,1);let l=33,f=0;for(;l>1&&a[f]===0&&!(a[f+1]&128);--l,++f);if(a=a.subarray(f),a[0]&128||l>1&&a[0]===0&&!(a[1]&128))return 1;let m=o.subarray(39,72);m[0]=0,m.set(n,1);let A=33,T=0;for(;A>1&&m[T]===0&&!(m[T+1]&128);--A,++T);return m=m.subarray(T),m[0]&128||A>1&&m[0]===0&&!(m[1]&128)?1:(e.outputlen=6+l+A,o[0]=48,o[1]=e.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+l]=2,o[5+l]=m.length,o.set(m,6+l),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let o=t.subarray(4,4+r);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let a=t.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let l=new ft(o);l.cmp(nt.n)>=0&&(l=new ft(0));let f=new ft(t.subarray(6+r));return f.cmp(nt.n)>=0&&(f=new ft(0)),e.set(l.toArrayLike(Uint8Array,"be",32),0),e.set(f.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,o){if(o){let f=o;o=i(m=>{let A=f(t,r,null,n,m);if(!(A instanceof Uint8Array&&A.length===32))throw new Error("This is the way");return new ft(A)},"noncefn")}let a=new ft(r);if(a.cmp(nt.n)>=0||a.isZero())return 1;let l;try{l=Un.sign(t,r,{canonical:!0,k:o,pers:n})}catch{return 1}return e.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),e.recid=l.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},o=new ft(n.r),a=new ft(n.s);if(o.cmp(nt.n)>=0||a.cmp(nt.n)>=0)return 1;if(a.cmp(Un.nh)===1||o.isZero()||a.isZero())return 3;let l=ro(r);if(l===null)return 2;let f=l.getPublic();return Un.verify(t,n,f)?0:3},ecdsaRecover(e,t,r,n){let o={r:t.slice(0,32),s:t.slice(32,64)},a=new ft(o.r),l=new ft(o.s);if(a.cmp(nt.n)>=0||l.cmp(nt.n)>=0)return 1;if(a.isZero()||l.isZero())return 2;let f;try{f=Un.recoverPubKey(n,o,r)}catch{return 2}return No(e,f),0},ecdh(e,t,r,n,o,a,l){let f=ro(t);if(f===null)return 1;let m=new ft(r);if(m.cmp(nt.n)>=0||m.isZero())return 2;let A=f.getPublic().mul(m);if(o===void 0){let T=A.encode(null,!0),I=Un.hash().update(T).digest();for(let k=0;k<32;++k)e[k]=I[k]}else{a||(a=new Uint8Array(32));let T=A.getX().toArray("be",32);for(let C=0;C<32;++C)a[C]=T[C];l||(l=new Uint8Array(32));let I=A.getY().toArray("be",32);for(let C=0;C<32;++C)l[C]=I[C];let k=o(a,l,n);if(!(k instanceof Uint8Array&&k.length===e.length))return 2;e.set(k)}return 0}}});var Ap=he((K$,Rb)=>{h();p();Rb.exports=Kb()(Cb())});var Nb=he(vl=>{"use strict";h();p();Object.defineProperty(vl,"__esModule",{value:!0});var Ub=Zm();function TT(e){return new Promise(function(t,r){Ub(e,function(n,o){if(n){r(n);return}t(o)})})}i(TT,"getRandomBytes");vl.getRandomBytes=TT;function IT(e){return Ub(e)}i(IT,"getRandomBytesSync");vl.getRandomBytesSync=IT});var Fb=he(Nn=>{"use strict";h();p();var _T=Nn&&Nn.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(l){l(a)})}return i(o,"adopt"),new(r||(r=Promise))(function(a,l){function f(T){try{A(n.next(T))}catch(I){l(I)}}i(f,"fulfilled");function m(T){try{A(n.throw(T))}catch(I){l(I)}}i(m,"rejected");function A(T){T.done?a(T.value):o(T.value).then(f,m)}i(A,"step"),A((n=n.apply(e,t||[])).next())})},kT=Nn&&Nn.__generator||function(e,t){var r={label:0,sent:i(function(){if(a[0]&1)throw a[1];return a[1]},"sent"),trys:[],ops:[]},n,o,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(A){return function(T){return m([A,T])}}function m(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=A[0]&2?o.return:A[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,A[1])).done)return a;switch(o=0,a&&(A=[A[0]&2,a.value]),A[0]){case 0:case 1:a=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,o=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){r.label=A[1];break}if(A[0]===6&&r.label<a[1]){r.label=a[1],a=A;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(A);break}a[2]&&r.ops.pop(),r.trys.pop();continue}A=t.call(e,r)}catch(T){A=[6,T],o=0}finally{n=a=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}};function PT(e){for(var t in e)Nn.hasOwnProperty(t)||(Nn[t]=e[t])}i(PT,"__export");Object.defineProperty(Nn,"__esModule",{value:!0});var Db=Ap(),Vb=Nb(),Lb=32;function BT(){return _T(this,void 0,void 0,function(){var e;return kT(this,function(t){switch(t.label){case 0:return[4,Vb.getRandomBytes(Lb)];case 1:return e=t.sent(),Db.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}i(BT,"createPrivateKey");Nn.createPrivateKey=BT;function KT(){for(;;){var e=Vb.getRandomBytesSync(Lb);if(Db.privateKeyVerify(e))return e}}i(KT,"createPrivateKeySync");Nn.createPrivateKeySync=KT;PT(Ap())});var Do=he((jb,Sp)=>{h();p();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}i(r,"assert");function n(x,s){x.super_=s;var u=i(function(){},"TempCtor");u.prototype=s.prototype,x.prototype=new u,x.prototype.constructor=x}i(n,"inherits");function o(x,s,u){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(x||0,s||10,u||"be"))}i(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=jm().Buffer}catch{}o.isBN=i(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=i(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=i(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=i(function(s,u,g){if(typeof s=="number")return this._initNumber(s,u,g);if(typeof s=="object")return this._initArray(s,u,g);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,g):(this._parseBase(s,u,y),g==="le"&&this._initArray(this.toArray(),u,g)))},"init"),o.prototype._initNumber=i(function(s,u,g){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),u,g)},"_initNumber"),o.prototype._initArray=i(function(s,u,g){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(g==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(g==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(x,s){var u=x.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}i(l,"parseHex4Bits");function f(x,s,u){var g=l(x,u);return u-1>=s&&(g|=l(x,u-1)<<4),g}i(f,"parseHexByte"),o.prototype._parseHex=i(function(s,u,g){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(g==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var b=s.length-u;for(y=b%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function m(x,s,u,g){for(var y=0,v=Math.min(x.length,u),S=s;S<v;S++){var E=x.charCodeAt(S)-48;y*=g,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i(m,"parseBase"),o.prototype._parseBase=i(function(s,u,g){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-g,E=S%y,b=Math.min(S,S-E)+g,c=0,w=g;w<b;w+=y)c=m(s,w,w+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=m(s,w,s.length,u),w=0;w<E;w++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=i(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=i(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=i(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=i(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=i(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=i(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=i(function(s,u){s=s||10,u=u|0||1;var g;if(s===16||s==="hex"){g="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],b=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?g=A[6-b.length]+b+g:g=b+g,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(g=v.toString(16)+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],w=I[s];g="";var D=this.clone();for(D.negative=0;!D.isZero();){var L=D.modn(w).toString(s);D=D.idivn(w),D.isZero()?g=L+g:g=A[c-L.length]+L+g}for(this.isZero()&&(g="0"+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=i(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=i(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=i(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=i(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=i(function(s,u,g){var y=this.byteLength(),v=g||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),b,c,w=this.clone();if(S){for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[c]=b;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[v-c-1]=b}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=i(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=i(function(s){var u=s,g=0;return u>=4096&&(g+=13,u>>>=13),u>=64&&(g+=7,u>>>=7),u>=8&&(g+=4,u>>>=4),u>=2&&(g+=2,u>>>=2),g+u},"_countBits"),o.prototype._zeroBits=i(function(s){if(s===0)return 26;var u=s,g=0;return u&8191||(g+=13,u>>>=13),u&127||(g+=7,u>>>=7),u&15||(g+=4,u>>>=4),u&3||(g+=2,u>>>=2),u&1||g++,g},"_zeroBits"),o.prototype.bitLength=i(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(x){for(var s=new Array(x.bitLength()),u=0;u<s.length;u++){var g=u/26|0,y=u%26;s[u]=(x.words[g]&1<<y)>>>y}return s}i(k,"toBitArray"),o.prototype.zeroBits=i(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var g=this._zeroBits(this.words[u]);if(s+=g,g!==26)break}return s},"zeroBits"),o.prototype.byteLength=i(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=i(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=i(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=i(function(){return this.negative!==0},"isNeg"),o.prototype.neg=i(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=i(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=i(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=i(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=i(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=i(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=i(function(s){var u;this.length>s.length?u=s:u=this;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]&s.words[g];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=i(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=i(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=i(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=i(function(s){var u,g;this.length>s.length?(u=this,g=s):(u=s,g=this);for(var y=0;y<g.length;y++)this.words[y]=u.words[y]^g.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=i(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=i(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=i(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=i(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,g=s%26;this._expand(u),g>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this.strip()},"inotn"),o.prototype.notn=i(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=i(function(s,u){r(typeof s=="number"&&s>=0);var g=s/26|0,y=s%26;return this._expand(g+1),u?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=i(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var g,y;this.length>s.length?(g=this,y=s):(g=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(g.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<g.length;S++)u=(g.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=g.length,v!==0)this.words[this.length]=v,this.length++;else if(g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this},"iadd"),o.prototype.add=i(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=i(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var g=this.cmp(s);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;g>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=i(function(s){return this.clone().isub(s)},"sub");function O(x,s,u){u.negative=s.negative^x.negative;var g=x.length+s.length|0;u.length=g,g=g-1|0;var y=x.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,b=S/67108864|0;u.words[0]=E;for(var c=1;c<g;c++){for(var w=b>>>26,D=b&67108863,L=Math.min(c,s.length-1),W=Math.max(0,c-x.length+1);W<=L;W++){var Y=c-W|0;y=x.words[Y]|0,v=s.words[W]|0,S=y*v+D,w+=S/67108864|0,D=S&67108863}u.words[c]=D|0,b=w|0}return b!==0?u.words[c]=b|0:u.length--,u.strip()}i(O,"smallMulTo");var C=i(function(s,u,g){var y=s.words,v=u.words,S=g.words,E=0,b,c,w,D=y[0]|0,L=D&8191,W=D>>>13,Y=y[1]|0,ie=Y&8191,le=Y>>>13,ut=y[2]|0,de=ut&8191,K=ut>>>13,N=y[3]|0,U=N&8191,G=N>>>13,te=y[4]|0,q=te&8191,J=te>>>13,et=y[5]|0,ge=et&8191,we=et>>>13,_r=y[6]|0,Te=_r&8191,Se=_r>>>13,Tn=y[7]|0,Ee=Tn&8191,Ze=Tn>>>13,Ri=y[8]|0,Je=Ri&8191,Ye=Ri>>>13,ti=y[9]|0,Ie=ti&8191,_e=ti>>>13,ri=v[0]|0,ke=ri&8191,Pe=ri>>>13,ni=v[1]|0,Be=ni&8191,Ke=ni>>>13,ii=v[2]|0,Oe=ii&8191,Ce=ii>>>13,oi=v[3]|0,Re=oi&8191,Ue=oi>>>13,si=v[4]|0,Ne=si&8191,De=si>>>13,ai=v[5]|0,Ve=ai&8191,Le=ai>>>13,ci=v[6]|0,Fe=ci&8191,je=ci>>>13,ui=v[7]|0,ze=ui&8191,qe=ui>>>13,li=v[8]|0,We=li&8191,He=li>>>13,fi=v[9]|0,$e=fi&8191,Ge=fi>>>13;g.negative=s.negative^u.negative,g.length=19,b=Math.imul(L,ke),c=Math.imul(L,Pe),c=c+Math.imul(W,ke)|0,w=Math.imul(W,Pe);var zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,b=Math.imul(ie,ke),c=Math.imul(ie,Pe),c=c+Math.imul(le,ke)|0,w=Math.imul(le,Pe),b=b+Math.imul(L,Be)|0,c=c+Math.imul(L,Ke)|0,c=c+Math.imul(W,Be)|0,w=w+Math.imul(W,Ke)|0;var qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(de,ke),c=Math.imul(de,Pe),c=c+Math.imul(K,ke)|0,w=Math.imul(K,Pe),b=b+Math.imul(ie,Be)|0,c=c+Math.imul(ie,Ke)|0,c=c+Math.imul(le,Be)|0,w=w+Math.imul(le,Ke)|0,b=b+Math.imul(L,Oe)|0,c=c+Math.imul(L,Ce)|0,c=c+Math.imul(W,Oe)|0,w=w+Math.imul(W,Ce)|0;var Wr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(U,ke),c=Math.imul(U,Pe),c=c+Math.imul(G,ke)|0,w=Math.imul(G,Pe),b=b+Math.imul(de,Be)|0,c=c+Math.imul(de,Ke)|0,c=c+Math.imul(K,Be)|0,w=w+Math.imul(K,Ke)|0,b=b+Math.imul(ie,Oe)|0,c=c+Math.imul(ie,Ce)|0,c=c+Math.imul(le,Oe)|0,w=w+Math.imul(le,Ce)|0,b=b+Math.imul(L,Re)|0,c=c+Math.imul(L,Ue)|0,c=c+Math.imul(W,Re)|0,w=w+Math.imul(W,Ue)|0;var Hr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(q,ke),c=Math.imul(q,Pe),c=c+Math.imul(J,ke)|0,w=Math.imul(J,Pe),b=b+Math.imul(U,Be)|0,c=c+Math.imul(U,Ke)|0,c=c+Math.imul(G,Be)|0,w=w+Math.imul(G,Ke)|0,b=b+Math.imul(de,Oe)|0,c=c+Math.imul(de,Ce)|0,c=c+Math.imul(K,Oe)|0,w=w+Math.imul(K,Ce)|0,b=b+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ue)|0,c=c+Math.imul(le,Re)|0,w=w+Math.imul(le,Ue)|0,b=b+Math.imul(L,Ne)|0,c=c+Math.imul(L,De)|0,c=c+Math.imul(W,Ne)|0,w=w+Math.imul(W,De)|0;var $r=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(ge,ke),c=Math.imul(ge,Pe),c=c+Math.imul(we,ke)|0,w=Math.imul(we,Pe),b=b+Math.imul(q,Be)|0,c=c+Math.imul(q,Ke)|0,c=c+Math.imul(J,Be)|0,w=w+Math.imul(J,Ke)|0,b=b+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(G,Oe)|0,w=w+Math.imul(G,Ce)|0,b=b+Math.imul(de,Re)|0,c=c+Math.imul(de,Ue)|0,c=c+Math.imul(K,Re)|0,w=w+Math.imul(K,Ue)|0,b=b+Math.imul(ie,Ne)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(le,Ne)|0,w=w+Math.imul(le,De)|0,b=b+Math.imul(L,Ve)|0,c=c+Math.imul(L,Le)|0,c=c+Math.imul(W,Ve)|0,w=w+Math.imul(W,Le)|0;var Gr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,b=Math.imul(Te,ke),c=Math.imul(Te,Pe),c=c+Math.imul(Se,ke)|0,w=Math.imul(Se,Pe),b=b+Math.imul(ge,Be)|0,c=c+Math.imul(ge,Ke)|0,c=c+Math.imul(we,Be)|0,w=w+Math.imul(we,Ke)|0,b=b+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(J,Oe)|0,w=w+Math.imul(J,Ce)|0,b=b+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(G,Re)|0,w=w+Math.imul(G,Ue)|0,b=b+Math.imul(de,Ne)|0,c=c+Math.imul(de,De)|0,c=c+Math.imul(K,Ne)|0,w=w+Math.imul(K,De)|0,b=b+Math.imul(ie,Ve)|0,c=c+Math.imul(ie,Le)|0,c=c+Math.imul(le,Ve)|0,w=w+Math.imul(le,Le)|0,b=b+Math.imul(L,Fe)|0,c=c+Math.imul(L,je)|0,c=c+Math.imul(W,Fe)|0,w=w+Math.imul(W,je)|0;var Zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(Ee,ke),c=Math.imul(Ee,Pe),c=c+Math.imul(Ze,ke)|0,w=Math.imul(Ze,Pe),b=b+Math.imul(Te,Be)|0,c=c+Math.imul(Te,Ke)|0,c=c+Math.imul(Se,Be)|0,w=w+Math.imul(Se,Ke)|0,b=b+Math.imul(ge,Oe)|0,c=c+Math.imul(ge,Ce)|0,c=c+Math.imul(we,Oe)|0,w=w+Math.imul(we,Ce)|0,b=b+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(J,Re)|0,w=w+Math.imul(J,Ue)|0,b=b+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(G,Ne)|0,w=w+Math.imul(G,De)|0,b=b+Math.imul(de,Ve)|0,c=c+Math.imul(de,Le)|0,c=c+Math.imul(K,Ve)|0,w=w+Math.imul(K,Le)|0,b=b+Math.imul(ie,Fe)|0,c=c+Math.imul(ie,je)|0,c=c+Math.imul(le,Fe)|0,w=w+Math.imul(le,je)|0,b=b+Math.imul(L,ze)|0,c=c+Math.imul(L,qe)|0,c=c+Math.imul(W,ze)|0,w=w+Math.imul(W,qe)|0;var Jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,b=Math.imul(Je,ke),c=Math.imul(Je,Pe),c=c+Math.imul(Ye,ke)|0,w=Math.imul(Ye,Pe),b=b+Math.imul(Ee,Be)|0,c=c+Math.imul(Ee,Ke)|0,c=c+Math.imul(Ze,Be)|0,w=w+Math.imul(Ze,Ke)|0,b=b+Math.imul(Te,Oe)|0,c=c+Math.imul(Te,Ce)|0,c=c+Math.imul(Se,Oe)|0,w=w+Math.imul(Se,Ce)|0,b=b+Math.imul(ge,Re)|0,c=c+Math.imul(ge,Ue)|0,c=c+Math.imul(we,Re)|0,w=w+Math.imul(we,Ue)|0,b=b+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(J,Ne)|0,w=w+Math.imul(J,De)|0,b=b+Math.imul(U,Ve)|0,c=c+Math.imul(U,Le)|0,c=c+Math.imul(G,Ve)|0,w=w+Math.imul(G,Le)|0,b=b+Math.imul(de,Fe)|0,c=c+Math.imul(de,je)|0,c=c+Math.imul(K,Fe)|0,w=w+Math.imul(K,je)|0,b=b+Math.imul(ie,ze)|0,c=c+Math.imul(ie,qe)|0,c=c+Math.imul(le,ze)|0,w=w+Math.imul(le,qe)|0,b=b+Math.imul(L,We)|0,c=c+Math.imul(L,He)|0,c=c+Math.imul(W,We)|0,w=w+Math.imul(W,He)|0;var Yr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(Ie,ke),c=Math.imul(Ie,Pe),c=c+Math.imul(_e,ke)|0,w=Math.imul(_e,Pe),b=b+Math.imul(Je,Be)|0,c=c+Math.imul(Je,Ke)|0,c=c+Math.imul(Ye,Be)|0,w=w+Math.imul(Ye,Ke)|0,b=b+Math.imul(Ee,Oe)|0,c=c+Math.imul(Ee,Ce)|0,c=c+Math.imul(Ze,Oe)|0,w=w+Math.imul(Ze,Ce)|0,b=b+Math.imul(Te,Re)|0,c=c+Math.imul(Te,Ue)|0,c=c+Math.imul(Se,Re)|0,w=w+Math.imul(Se,Ue)|0,b=b+Math.imul(ge,Ne)|0,c=c+Math.imul(ge,De)|0,c=c+Math.imul(we,Ne)|0,w=w+Math.imul(we,De)|0,b=b+Math.imul(q,Ve)|0,c=c+Math.imul(q,Le)|0,c=c+Math.imul(J,Ve)|0,w=w+Math.imul(J,Le)|0,b=b+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(G,Fe)|0,w=w+Math.imul(G,je)|0,b=b+Math.imul(de,ze)|0,c=c+Math.imul(de,qe)|0,c=c+Math.imul(K,ze)|0,w=w+Math.imul(K,qe)|0,b=b+Math.imul(ie,We)|0,c=c+Math.imul(ie,He)|0,c=c+Math.imul(le,We)|0,w=w+Math.imul(le,He)|0,b=b+Math.imul(L,$e)|0,c=c+Math.imul(L,Ge)|0,c=c+Math.imul(W,$e)|0,w=w+Math.imul(W,Ge)|0;var Qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(_e,Be)|0,w=Math.imul(_e,Ke),b=b+Math.imul(Je,Oe)|0,c=c+Math.imul(Je,Ce)|0,c=c+Math.imul(Ye,Oe)|0,w=w+Math.imul(Ye,Ce)|0,b=b+Math.imul(Ee,Re)|0,c=c+Math.imul(Ee,Ue)|0,c=c+Math.imul(Ze,Re)|0,w=w+Math.imul(Ze,Ue)|0,b=b+Math.imul(Te,Ne)|0,c=c+Math.imul(Te,De)|0,c=c+Math.imul(Se,Ne)|0,w=w+Math.imul(Se,De)|0,b=b+Math.imul(ge,Ve)|0,c=c+Math.imul(ge,Le)|0,c=c+Math.imul(we,Ve)|0,w=w+Math.imul(we,Le)|0,b=b+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(J,Fe)|0,w=w+Math.imul(J,je)|0,b=b+Math.imul(U,ze)|0,c=c+Math.imul(U,qe)|0,c=c+Math.imul(G,ze)|0,w=w+Math.imul(G,qe)|0,b=b+Math.imul(de,We)|0,c=c+Math.imul(de,He)|0,c=c+Math.imul(K,We)|0,w=w+Math.imul(K,He)|0,b=b+Math.imul(ie,$e)|0,c=c+Math.imul(ie,Ge)|0,c=c+Math.imul(le,$e)|0,w=w+Math.imul(le,Ge)|0;var Xr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(Ie,Oe),c=Math.imul(Ie,Ce),c=c+Math.imul(_e,Oe)|0,w=Math.imul(_e,Ce),b=b+Math.imul(Je,Re)|0,c=c+Math.imul(Je,Ue)|0,c=c+Math.imul(Ye,Re)|0,w=w+Math.imul(Ye,Ue)|0,b=b+Math.imul(Ee,Ne)|0,c=c+Math.imul(Ee,De)|0,c=c+Math.imul(Ze,Ne)|0,w=w+Math.imul(Ze,De)|0,b=b+Math.imul(Te,Ve)|0,c=c+Math.imul(Te,Le)|0,c=c+Math.imul(Se,Ve)|0,w=w+Math.imul(Se,Le)|0,b=b+Math.imul(ge,Fe)|0,c=c+Math.imul(ge,je)|0,c=c+Math.imul(we,Fe)|0,w=w+Math.imul(we,je)|0,b=b+Math.imul(q,ze)|0,c=c+Math.imul(q,qe)|0,c=c+Math.imul(J,ze)|0,w=w+Math.imul(J,qe)|0,b=b+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(G,We)|0,w=w+Math.imul(G,He)|0,b=b+Math.imul(de,$e)|0,c=c+Math.imul(de,Ge)|0,c=c+Math.imul(K,$e)|0,w=w+Math.imul(K,Ge)|0;var en=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(en>>>26)|0,en&=67108863,b=Math.imul(Ie,Re),c=Math.imul(Ie,Ue),c=c+Math.imul(_e,Re)|0,w=Math.imul(_e,Ue),b=b+Math.imul(Je,Ne)|0,c=c+Math.imul(Je,De)|0,c=c+Math.imul(Ye,Ne)|0,w=w+Math.imul(Ye,De)|0,b=b+Math.imul(Ee,Ve)|0,c=c+Math.imul(Ee,Le)|0,c=c+Math.imul(Ze,Ve)|0,w=w+Math.imul(Ze,Le)|0,b=b+Math.imul(Te,Fe)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Se,Fe)|0,w=w+Math.imul(Se,je)|0,b=b+Math.imul(ge,ze)|0,c=c+Math.imul(ge,qe)|0,c=c+Math.imul(we,ze)|0,w=w+Math.imul(we,qe)|0,b=b+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(J,We)|0,w=w+Math.imul(J,He)|0,b=b+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(G,$e)|0,w=w+Math.imul(G,Ge)|0;var tn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,b=Math.imul(Ie,Ne),c=Math.imul(Ie,De),c=c+Math.imul(_e,Ne)|0,w=Math.imul(_e,De),b=b+Math.imul(Je,Ve)|0,c=c+Math.imul(Je,Le)|0,c=c+Math.imul(Ye,Ve)|0,w=w+Math.imul(Ye,Le)|0,b=b+Math.imul(Ee,Fe)|0,c=c+Math.imul(Ee,je)|0,c=c+Math.imul(Ze,Fe)|0,w=w+Math.imul(Ze,je)|0,b=b+Math.imul(Te,ze)|0,c=c+Math.imul(Te,qe)|0,c=c+Math.imul(Se,ze)|0,w=w+Math.imul(Se,qe)|0,b=b+Math.imul(ge,We)|0,c=c+Math.imul(ge,He)|0,c=c+Math.imul(we,We)|0,w=w+Math.imul(we,He)|0,b=b+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(J,$e)|0,w=w+Math.imul(J,Ge)|0;var rn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,b=Math.imul(Ie,Ve),c=Math.imul(Ie,Le),c=c+Math.imul(_e,Ve)|0,w=Math.imul(_e,Le),b=b+Math.imul(Je,Fe)|0,c=c+Math.imul(Je,je)|0,c=c+Math.imul(Ye,Fe)|0,w=w+Math.imul(Ye,je)|0,b=b+Math.imul(Ee,ze)|0,c=c+Math.imul(Ee,qe)|0,c=c+Math.imul(Ze,ze)|0,w=w+Math.imul(Ze,qe)|0,b=b+Math.imul(Te,We)|0,c=c+Math.imul(Te,He)|0,c=c+Math.imul(Se,We)|0,w=w+Math.imul(Se,He)|0,b=b+Math.imul(ge,$e)|0,c=c+Math.imul(ge,Ge)|0,c=c+Math.imul(we,$e)|0,w=w+Math.imul(we,Ge)|0;var nn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,b=Math.imul(Ie,Fe),c=Math.imul(Ie,je),c=c+Math.imul(_e,Fe)|0,w=Math.imul(_e,je),b=b+Math.imul(Je,ze)|0,c=c+Math.imul(Je,qe)|0,c=c+Math.imul(Ye,ze)|0,w=w+Math.imul(Ye,qe)|0,b=b+Math.imul(Ee,We)|0,c=c+Math.imul(Ee,He)|0,c=c+Math.imul(Ze,We)|0,w=w+Math.imul(Ze,He)|0,b=b+Math.imul(Te,$e)|0,c=c+Math.imul(Te,Ge)|0,c=c+Math.imul(Se,$e)|0,w=w+Math.imul(Se,Ge)|0;var on=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(on>>>26)|0,on&=67108863,b=Math.imul(Ie,ze),c=Math.imul(Ie,qe),c=c+Math.imul(_e,ze)|0,w=Math.imul(_e,qe),b=b+Math.imul(Je,We)|0,c=c+Math.imul(Je,He)|0,c=c+Math.imul(Ye,We)|0,w=w+Math.imul(Ye,He)|0,b=b+Math.imul(Ee,$e)|0,c=c+Math.imul(Ee,Ge)|0,c=c+Math.imul(Ze,$e)|0,w=w+Math.imul(Ze,Ge)|0;var sn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,b=Math.imul(Ie,We),c=Math.imul(Ie,He),c=c+Math.imul(_e,We)|0,w=Math.imul(_e,He),b=b+Math.imul(Je,$e)|0,c=c+Math.imul(Je,Ge)|0,c=c+Math.imul(Ye,$e)|0,w=w+Math.imul(Ye,Ge)|0;var vo=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(vo>>>26)|0,vo&=67108863,b=Math.imul(Ie,$e),c=Math.imul(Ie,Ge),c=c+Math.imul(_e,$e)|0,w=Math.imul(_e,Ge);var bo=(E+b|0)+((c&8191)<<13)|0;return E=(w+(c>>>13)|0)+(bo>>>26)|0,bo&=67108863,S[0]=zr,S[1]=qr,S[2]=Wr,S[3]=Hr,S[4]=$r,S[5]=Gr,S[6]=Zr,S[7]=Jr,S[8]=Yr,S[9]=Qr,S[10]=Xr,S[11]=en,S[12]=tn,S[13]=rn,S[14]=nn,S[15]=on,S[16]=sn,S[17]=vo,S[18]=bo,E!==0&&(S[19]=E,g.length++),g},"comb10MulTo");Math.imul||(C=O);function R(x,s,u){u.negative=s.negative^x.negative,u.length=x.length+s.length;for(var g=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=g&67108863,b=Math.min(v,s.length-1),c=Math.max(0,v-x.length+1);c<=b;c++){var w=v-c,D=x.words[w]|0,L=s.words[c]|0,W=D*L,Y=W&67108863;S=S+(W/67108864|0)|0,Y=Y+E|0,E=Y&67108863,S=S+(Y>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,g=S,S=y}return g!==0?u.words[v]=g:u.length--,u.strip()}i(R,"bigMulTo");function V(x,s,u){var g=new H;return g.mulp(x,s,u)}i(V,"jumboMulTo"),o.prototype.mulTo=i(function(s,u){var g,y=this.length+s.length;return this.length===10&&s.length===10?g=C(this,s,u):y<63?g=O(this,s,u):y<1024?g=R(this,s,u):g=V(this,s,u),g},"mulTo");function H(x,s){this.x=x,this.y=s}i(H,"FFTM"),H.prototype.makeRBT=i(function(s){for(var u=new Array(s),g=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,g,s);return u},"makeRBT"),H.prototype.revBin=i(function(s,u,g){if(s===0||s===g-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),H.prototype.permute=i(function(s,u,g,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=g[s[E]]},"permute"),H.prototype.transform=i(function(s,u,g,y,v,S){this.permute(S,s,u,g,y,v);for(var E=1;E<v;E<<=1)for(var b=E<<1,c=Math.cos(2*Math.PI/b),w=Math.sin(2*Math.PI/b),D=0;D<v;D+=b)for(var L=c,W=w,Y=0;Y<E;Y++){var ie=g[D+Y],le=y[D+Y],ut=g[D+Y+E],de=y[D+Y+E],K=L*ut-W*de;de=L*de+W*ut,ut=K,g[D+Y]=ie+ut,y[D+Y]=le+de,g[D+Y+E]=ie-ut,y[D+Y+E]=le-de,Y!==b&&(K=c*L-w*W,W=c*W+w*L,L=K)}},"transform"),H.prototype.guessLen13b=i(function(s,u){var g=Math.max(u,s)|1,y=g&1,v=0;for(g=g/2|0;g;g=g>>>1)v++;return 1<<v+1+y},"guessLen13b"),H.prototype.conjugate=i(function(s,u,g){if(!(g<=1))for(var y=0;y<g/2;y++){var v=s[y];s[y]=s[g-y-1],s[g-y-1]=v,v=u[y],u[y]=-u[g-y-1],u[g-y-1]=-v}},"conjugate"),H.prototype.normalize13b=i(function(s,u){for(var g=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+g;s[y]=v&67108863,v<67108864?g=0:g=v/67108864|0}return s},"normalize13b"),H.prototype.convert13b=i(function(s,u,g,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),g[2*S]=v&8191,v=v>>>13,g[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)g[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),H.prototype.stub=i(function(s){for(var u=new Array(s),g=0;g<s;g++)u[g]=0;return u},"stub"),H.prototype.mulp=i(function(s,u,g){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),b=new Array(y),c=new Array(y),w=new Array(y),D=new Array(y),L=new Array(y),W=g.words;W.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,w,y),this.transform(E,S,b,c,y,v),this.transform(w,S,D,L,y,v);for(var Y=0;Y<y;Y++){var ie=b[Y]*D[Y]-c[Y]*L[Y];c[Y]=b[Y]*L[Y]+c[Y]*D[Y],b[Y]=ie}return this.conjugate(b,c,y),this.transform(b,c,W,S,y,v),this.conjugate(W,S,y),this.normalize13b(W,y),g.negative=s.negative^u.negative,g.length=s.length+u.length,g.strip()},"mulp"),o.prototype.mul=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),V(this,s,u)},"mulf"),o.prototype.imul=i(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=i(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[g]=v&67108863}return u!==0&&(this.words[g]=u,this.length++),this},"imuln"),o.prototype.muln=i(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=i(function(){return this.mul(this)},"sqr"),o.prototype.isqr=i(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=i(function(s){var u=k(s);if(u.length===0)return new o(1);for(var g=this,y=0;y<u.length&&u[y]===0;y++,g=g.sqr());if(++y<u.length)for(var v=g.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(g=g.mul(v));return g},"pow"),o.prototype.iushln=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,b=(this.words[v]|0)-E<<u;this.words[v]=b|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(g!==0){for(v=this.length-1;v>=0;v--)this.words[v+g]=this.words[v];for(v=0;v<g;v++)this.words[v]=0;this.length+=g}return this.strip()},"iushln"),o.prototype.ishln=i(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=i(function(s,u,g){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,b=g;if(y-=S,y=Math.max(0,y),b){for(var c=0;c<S;c++)b.words[c]=this.words[c];b.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=w<<26-v|D>>>v,w=D&E}return b&&w!==0&&(b.words[b.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=i(function(s,u,g){return r(this.negative===0),this.iushrn(s,u,g)},"ishrn"),o.prototype.shln=i(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=i(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=i(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=i(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26,y=1<<u;if(this.length<=g)return!1;var v=this.words[g];return!!(v&y)},"testn"),o.prototype.imaskn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(u!==0&&g++,this.length=Math.min(g,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=i(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=i(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=i(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=i(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=i(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=i(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=i(function(){return this.negative=0,this},"iabs"),o.prototype.abs=i(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=i(function(s,u,g){var y=s.length+g,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+g]|0)+E;var b=(s.words[v]|0)*u;S-=b&67108863,E=(S>>26)-(b/67108864|0),this.words[v+g]=S&67108863}for(;v<this.length-g;v++)S=(this.words[v+g]|0)+E,E=S>>26,this.words[v+g]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=i(function(s,u){var g=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);g=26-E,g!==0&&(v=v.ushln(g),y.iushln(g),S=v.words[v.length-1]|0);var b=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=b+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var D=y.clone()._ishlnsubmul(v,1,b);D.negative===0&&(y=D,c&&(c.words[b]=1));for(var L=b-1;L>=0;L--){var W=(y.words[v.length+L]|0)*67108864+(y.words[v.length+L-1]|0);for(W=Math.min(W/S|0,67108863),y._ishlnsubmul(v,W,L);y.negative!==0;)W--,y.negative=0,y._ishlnsubmul(v,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=W)}return c&&c.strip(),y.strip(),u!=="div"&&g!==0&&y.iushrn(g),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=i(function(s,u,g){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),g&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),g&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=i(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=i(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=i(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=i(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var g=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=g.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=i(function(s){r(s<=67108863);for(var u=(1<<26)%s,g=0,y=this.length-1;y>=0;y--)g=(u*g+(this.words[y]|0))%s;return g},"modn"),o.prototype.idivn=i(function(s){r(s<=67108863);for(var u=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+u*67108864;this.words[g]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=i(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,g=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),b=0;u.isEven()&&g.isEven();)u.iushrn(1),g.iushrn(1),++b;for(var c=g.clone(),w=u.clone();!u.isZero();){for(var D=0,L=1;!(u.words[0]&L)&&D<26;++D,L<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var W=0,Y=1;!(g.words[0]&Y)&&W<26;++W,Y<<=1);if(W>0)for(g.iushrn(W);W-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(w)),S.iushrn(1),E.iushrn(1);u.cmp(g)>=0?(u.isub(g),y.isub(S),v.isub(E)):(g.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:g.iushln(b)}},"egcd"),o.prototype._invmp=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,g=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=g.clone();u.cmpn(1)>0&&g.cmpn(1)>0;){for(var E=0,b=1;!(u.words[0]&b)&&E<26;++E,b<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,w=1;!(g.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(g.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(g)>=0?(u.isub(g),y.isub(v)):(g.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=i(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),g=s.clone();u.negative=0,g.negative=0;for(var y=0;u.isEven()&&g.isEven();y++)u.iushrn(1),g.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;g.isEven();)g.iushrn(1);var v=u.cmp(g);if(v<0){var S=u;u=g,g=S}else if(v===0||g.cmpn(1)===0)break;u.isub(g)}while(!0);return g.iushln(y)},"gcd"),o.prototype.invm=i(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=i(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=i(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=i(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=i(function(s){r(typeof s=="number");var u=s%26,g=(s-u)/26,y=1<<u;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var v=y,S=g;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=i(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=i(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var g;if(this.length>1)g=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;g=y===s?0:y<s?-1:1}return this.negative!==0?-g|0:g},"cmpn"),o.prototype.cmp=i(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=i(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,v=s.words[g]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=i(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=i(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=i(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=i(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=i(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=i(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=i(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=i(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=i(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=i(function(s){return this.cmp(s)===0},"eq"),o.red=i(function(s){return new Z(s)},"red"),o.prototype.toRed=i(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=i(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=i(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=i(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=i(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=i(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=i(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=i(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=i(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=i(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=i(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=i(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=i(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=i(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=i(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var X={k256:null,p224:null,p192:null,p25519:null};function z(x,s){this.name=x,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i(z,"MPrime"),z.prototype._tmp=i(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),z.prototype.ireduce=i(function(s){var u=s,g;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),g=u.bitLength();while(g>this.n);var y=g<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),z.prototype.split=i(function(s,u){s.iushrn(this.n,0,u)},"split"),z.prototype.imulK=i(function(s){return s.imul(this.k)},"imulK");function ce(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(ce,"K256"),n(ce,z),ce.prototype.split=i(function(s,u){for(var g=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&g,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&g)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=i(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,g=0;g<s.length;g++){var y=s.words[g]|0;u+=y*977,s.words[g]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function se(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(se,"P224"),n(se,z);function ne(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ne,"P192"),n(ne,z);function ae(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ae,"P25519"),n(ae,z),ae.prototype.imulK=i(function(s){for(var u=0,g=0;g<s.length;g++){var y=(s.words[g]|0)*19+u,v=y&67108863;y>>>=26,s.words[g]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=i(function(s){if(X[s])return X[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new se;else if(s==="p192")u=new ne;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return X[s]=u,u},"prime");function Z(x){if(typeof x=="string"){var s=o._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}i(Z,"Red"),Z.prototype._verify1=i(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=i(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=i(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=i(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=i(function(s,u){this._verify2(s,u);var g=s.add(u);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},"add"),Z.prototype.iadd=i(function(s,u){this._verify2(s,u);var g=s.iadd(u);return g.cmp(this.m)>=0&&g.isub(this.m),g},"iadd"),Z.prototype.sub=i(function(s,u){this._verify2(s,u);var g=s.sub(u);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},"sub"),Z.prototype.isub=i(function(s,u){this._verify2(s,u);var g=s.isub(u);return g.cmpn(0)<0&&g.iadd(this.m),g},"isub"),Z.prototype.shl=i(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=i(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=i(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=i(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=i(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=i(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var g=this.m.add(new o(1)).iushrn(2);return this.pow(s,g)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,b).cmp(E)!==0;)c.redIAdd(E);for(var w=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),W=v;L.cmp(S)!==0;){for(var Y=L,ie=0;Y.cmp(S)!==0;ie++)Y=Y.redSqr();r(ie<W);var le=this.pow(w,new o(1).iushln(W-ie-1));D=D.redMul(le),w=le.redSqr(),L=L.redMul(w),W=ie}return D},"sqrt"),Z.prototype.invm=i(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=i(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var g=4,y=new Array(1<<g);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,b=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var w=u.words[v],D=c-1;D>=0;D--){var L=w>>D&1;if(S!==y[0]&&(S=this.sqr(S)),L===0&&E===0){b=0;continue}E<<=1,E|=L,b++,!(b!==g&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),b=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=i(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=i(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=i(function(s){return new me(s)},"mont");function me(x){Z.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(me,"Mont"),n(me,Z),me.prototype.convertTo=i(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),me.prototype.convertFrom=i(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),me.prototype.imul=i(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var g=s.imul(u),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),me.prototype.mul=i(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var g=s.mul(u),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),me.prototype.invm=i(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Sp>"u"||Sp,jb)});var qb=he(Ls=>{"use strict";h();p();Object.defineProperty(Ls,"__esModule",{value:!0});var Vo=Do(),OT=Ym().ec,Ep=new OT("secp256k1"),Vs=Ep.curve;Ls.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new Vo(e);if(r.ucmp(Vs.n)>=0)throw new Error("couldn't export to DER format");var n=Ep.g.mul(r);return zb(n.getX(),n.getY(),t)};Ls.privateKeyModInverse=function(e){var t=new Vo(e);if(t.ucmp(Vs.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(Vs.n).toArrayLike(Buffer,"be",32)};Ls.signatureImport=function(e){var t=new Vo(e.r);t.ucmp(Vs.n)>=0&&(t=new Vo(0));var r=new Vo(e.s);return r.ucmp(Vs.n)>=0&&(r=new Vo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Ls.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=Ep.keyFromPublic(e),o=new Vo(t);if(o.ucmp(Vs.n)>=0||o.isZero())throw new Error("scalar was invalid (zero or overflow)");var a=n.pub.mul(o);return zb(a.getX(),a.getY(),r)};var zb=i(function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n},"toPublicKey")});var Wb=he(Ha=>{"use strict";h();p();Object.defineProperty(Ha,"__esModule",{value:!0});var{Buffer:Wa}=an(),CT=Wa.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),RT=Wa.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Ha.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Wa.from(r?CT:RT);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};Ha.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var o=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+o||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Ha.signatureImportLax=function(e){var t=Wa.alloc(32,0),r=Wa.alloc(32,0),n=e.length,o=0;if(e[o++]!==48)return null;var a=e[o++];if(a&128&&(o+=a-128,o>n)||e[o++]!==2)return null;var l=e[o++];if(l&128){if(a=l-128,o+a>n)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(l=0;a>0;o+=1,a-=1)l=(l<<8)+e[o]}if(l>n-o)return null;var f=o;if(o+=l,e[o++]!==2)return null;var m=e[o++];if(m&128){if(a=m-128,o+a>n)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(m=0;a>0;o+=1,a-=1)m=(m<<8)+e[o]}if(m>n-o)return null;var A=o;for(o+=m;l>0&&e[f]===0;l-=1,f+=1);if(l>32)return null;var T=e.slice(f,f+l);for(T.copy(t,32-T.length);m>0&&e[A]===0;m-=1,A+=1);if(m>32)return null;var I=e.slice(A,A+m);return I.copy(r,32-I.length),{r:t,s:r}}});var wl=he(Me=>{"use strict";h();p();Object.defineProperty(Me,"__esModule",{value:!0});Me.ecdhUnsafe=Me.ecdh=Me.recover=Me.verify=Me.sign=Me.signatureImportLax=Me.signatureImport=Me.signatureExport=Me.signatureNormalize=Me.publicKeyCombine=Me.publicKeyTweakMul=Me.publicKeyTweakAdd=Me.publicKeyVerify=Me.publicKeyConvert=Me.publicKeyCreate=Me.privateKeyTweakMul=Me.privateKeyTweakAdd=Me.privateKeyModInverse=Me.privateKeyNegate=Me.privateKeyImport=Me.privateKeyExport=Me.privateKeyVerify=void 0;var Wt=Fb(),bl=qb(),Mp=Wb();Me.privateKeyVerify=function(e){return e.length!==32?!1:Wt.privateKeyVerify(Uint8Array.from(e))};Me.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=bl.privateKeyExport(e,t);return Mp.privateKeyExport(e,r,t)};Me.privateKeyImport=function(e){if(e=Mp.privateKeyImport(e),e!==null&&e.length===32&&Me.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Me.privateKeyNegate=function(e){return Buffer.from(Wt.privateKeyNegate(Uint8Array.from(e)))};Me.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(bl.privateKeyModInverse(Uint8Array.from(e)))};Me.privateKeyTweakAdd=function(e,t){return Buffer.from(Wt.privateKeyTweakAdd(Uint8Array.from(e),t))};Me.privateKeyTweakMul=function(e,t){return Buffer.from(Wt.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Me.publicKeyCreate=function(e,t){return Buffer.from(Wt.publicKeyCreate(Uint8Array.from(e),t))};Me.publicKeyConvert=function(e,t){return Buffer.from(Wt.publicKeyConvert(Uint8Array.from(e),t))};Me.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Wt.publicKeyVerify(Uint8Array.from(e))};Me.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Wt.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Me.publicKeyTweakMul=function(e,t,r){return Buffer.from(Wt.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Me.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(Wt.publicKeyCombine(r,t))};Me.signatureNormalize=function(e){return Buffer.from(Wt.signatureNormalize(Uint8Array.from(e)))};Me.signatureExport=function(e){return Buffer.from(Wt.signatureExport(Uint8Array.from(e)))};Me.signatureImport=function(e){return Buffer.from(Wt.signatureImport(Uint8Array.from(e)))};Me.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=Mp.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return bl.signatureImport(t)};Me.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(a,l,f,m,A){var T=f!=null?Buffer.from(f):null,I=m!=null?Buffer.from(m):null,k=Buffer.from("");return r.noncefn&&(k=r.noncefn(Buffer.from(a),Buffer.from(l),T,I,A)),new Uint8Array(k)})}var o=Wt.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(o.signature),recovery:o.recid}};Me.verify=function(e,t,r){return Wt.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Me.recover=function(e,t,r,n){return Buffer.from(Wt.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Me.ecdh=function(e,t){return Buffer.from(Wt.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Me.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(bl.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var Tp=he((rG,Hb)=>{h();p();Hb.exports=i(function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},"isHexPrefixed")});var Gb=he((sG,$b)=>{h();p();var UT=Tp();$b.exports=i(function(t){return typeof t!="string"?t:UT(t)?t.slice(2):t},"stripHexPrefix")});var Lo=he((lG,Yb)=>{"use strict";h();p();var NT=Tp(),Zb=Gb();function xl(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}i(xl,"padToEven");function Jb(e){var t=e.toString(16);return"0x"+t}i(Jb,"intToHex");function DT(e){var t=Jb(e);return new Buffer(xl(t.slice(2)),"hex")}i(DT,"intToBuffer");function VT(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}i(VT,"getBinarySize");function LT(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}i(LT,"arrayContainsArray");function FT(e){var t=new Buffer(xl(Zb(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}i(FT,"toUtf8");function jT(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var o=parseInt(e.substr(r,2),16);t+=String.fromCharCode(o)}return t}i(jT,"toAscii");function zT(e){var t=new Buffer(e,"utf8");return"0x"+xl(t.toString("hex")).replace(/^0+|0+$/g,"")}i(zT,"fromUtf8");function qT(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),o=n.toString(16);t+=o.length<2?"0"+o:o}return"0x"+t}i(qT,"fromAscii");function WT(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],o=0;o<e.length;o++){var a=e[o][t];if(r&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi");n.push(a)}return n}i(WT,"getKeys");function HT(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}i(HT,"isHexString");Yb.exports={arrayContainsArray:LT,intToBuffer:DT,getBinarySize:VT,isHexPrefixed:NT,stripHexPrefix:Zb,padToEven:xl,intToHex:Jb,fromAscii:qT,fromUtf8:zT,toAscii:jT,toUtf8:FT,getKeys:WT,isHexString:HT}});var Al=he(Dn=>{"use strict";h();p();var $T=Dn&&Dn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getLength=Dn.decode=Dn.encode=void 0;var GT=$T(W1());function Xb(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(Xb(e[r]));var n=Buffer.concat(t);return Buffer.concat([Qb(n.length,192),n])}else{var o=Pp(e);return o.length===1&&o[0]<128?o:Buffer.concat([Qb(o.length,128),o])}}i(Xb,"encode");Dn.encode=Xb;function Ip(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}i(Ip,"safeParseInt");function Qb(e,t){if(e<56)return Buffer.from([e+t]);var r=kp(e),n=r.length/2,o=kp(t+55+n);return Buffer.from(o+r,"hex")}i(Qb,"encodeLength");function ZT(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=Pp(e),n=_p(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}i(ZT,"decode");Dn.decode=ZT;function JT(e){if(!e||e.length===0)return Buffer.from([]);var t=Pp(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,o=Ip(t.slice(1,n).toString("hex"),16);return n+o}i(JT,"getLength");Dn.getLength=JT;function _p(e){var t,r,n,o,a,l=[],f=e[0];if(f<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(f<=183){if(t=f-127,f===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(f<=191){if(r=f-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Ip(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(f<=247){for(t=f-191,o=e.slice(1,t);o.length;)a=_p(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}else{r=f-246,t=Ip(e.slice(1,r).toString("hex"),16);var m=r+t;if(m>e.length)throw new Error("invalid rlp: total length is larger than the data");if(o=e.slice(r,m),o.length===0)throw new Error("invalid rlp, List has a invalid length");for(;o.length;)a=_p(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(m)}}}i(_p,"_decode");function ew(e){return e.slice(0,2)==="0x"}i(ew,"isHexPrefixed");function YT(e){return typeof e!="string"?e:ew(e)?e.slice(2):e}i(YT,"stripHexPrefix");function kp(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}i(kp,"intToHex");function QT(e){return e.length%2?"0"+e:e}i(QT,"padToEven");function XT(e){var t=kp(e);return Buffer.from(t,"hex")}i(XT,"intToBuffer");function Pp(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return ew(e)?Buffer.from(QT(YT(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?XT(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(GT.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}i(Pp,"toBuffer")});var rw=he(Et=>{"use strict";h();p();Object.defineProperty(Et,"__esModule",{value:!0});Et.KECCAK256_RLP=Et.KECCAK256_RLP_S=Et.KECCAK256_RLP_ARRAY=Et.KECCAK256_RLP_ARRAY_S=Et.KECCAK256_NULL=Et.KECCAK256_NULL_S=Et.TWO_POW256=Et.MAX_INTEGER=void 0;var tw=Do(),{Buffer:Bp}=an();Et.MAX_INTEGER=new tw("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Et.TWO_POW256=new tw("10000000000000000000000000000000000000000000000000000000000000000",16);Et.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Et.KECCAK256_NULL=Bp.from(Et.KECCAK256_NULL_S,"hex");Et.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Et.KECCAK256_RLP_ARRAY=Bp.from(Et.KECCAK256_RLP_ARRAY_S,"hex");Et.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Et.KECCAK256_RLP=Bp.from(Et.KECCAK256_RLP_S,"hex")});var js=he(rt=>{"use strict";h();p();Object.defineProperty(rt,"__esModule",{value:!0});rt.baToJSON=rt.addHexPrefix=rt.toUnsigned=rt.fromSigned=rt.bufferToHex=rt.bufferToInt=rt.toBuffer=rt.stripZeros=rt.unpad=rt.setLengthRight=rt.setLength=rt.setLengthLeft=rt.zeros=void 0;var Fs=Lo(),Kp=Do();rt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};rt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=rt.zeros(t);return e=rt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};rt.setLength=rt.setLengthLeft;rt.setLengthRight=function(e,t){return rt.setLength(e,t,!0)};rt.unpad=function(e){e=Fs.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};rt.stripZeros=rt.unpad;rt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Fs.isHexString(e))e=Buffer.from(Fs.padToEven(Fs.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Fs.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(Kp.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};rt.bufferToInt=function(e){return new Kp(rt.toBuffer(e)).toNumber()};rt.bufferToHex=function(e){return e=rt.toBuffer(e),"0x"+e.toString("hex")};rt.fromSigned=function(e){return new Kp(e).fromTwos(256)};rt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};rt.addHexPrefix=function(e){return typeof e!="string"||Fs.isHexPrefixed(e)?e:"0x"+e};rt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(rt.baToJSON(e[r]));return t}}});var nw=he(Op=>{"use strict";h();p();Object.defineProperty(Op,"__esModule",{value:!0});function eI(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}i(eI,"createHashFunction");Op.createHashFunction=eI});var sw=he((_G,ow)=>{h();p();var{Transform:tI}=Jm();ow.exports=e=>class iw extends tI{static{i(this,"Keccak")}constructor(r,n,o,a,l){super(l),this._rate=r,this._capacity=n,this._delimitedSuffix=o,this._hashBitLength=a,this._options=l,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,o){let a=null;try{this.update(r,n)}catch(l){a=l}o(a)}_flush(r){let n=null;try{this.push(this.digest())}catch(o){n=o}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new iw(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var uw=he((KG,cw)=>{h();p();var{Transform:rI}=Jm();cw.exports=e=>class aw extends rI{static{i(this,"Shake")}constructor(r,n,o,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=o,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,o){let a=null;try{this.update(r,n)}catch(l){a=l}o(a)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let o=this._state.squeeze(r);return n!==void 0&&(o=o.toString(n)),o}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new aw(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var fw=he((UG,lw)=>{h();p();var nI=sw(),iI=uw();lw.exports=function(e){let t=nI(e),r=iI(e);return function(n,o){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,o);case"keccak256":return new t(1088,512,null,256,o);case"keccak384":return new t(832,768,null,384,o);case"keccak512":return new t(576,1024,null,512,o);case"sha3-224":return new t(1152,448,6,224,o);case"sha3-256":return new t(1088,512,6,256,o);case"sha3-384":return new t(832,768,6,384,o);case"sha3-512":return new t(576,1024,6,512,o);case"shake128":return new r(1344,256,31,o);case"shake256":return new r(1088,512,31,o);default:throw new Error("Invald algorithm: "+n)}}}});var pw=he(hw=>{h();p();var dw=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];hw.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],f=e[5]^e[15]^e[25]^e[35]^e[45],m=e[6]^e[16]^e[26]^e[36]^e[46],A=e[7]^e[17]^e[27]^e[37]^e[47],T=e[8]^e[18]^e[28]^e[38]^e[48],I=e[9]^e[19]^e[29]^e[39]^e[49],k=T^(o<<1|a>>>31),O=I^(a<<1|o>>>31),C=e[0]^k,R=e[1]^O,V=e[10]^k,H=e[11]^O,X=e[20]^k,z=e[21]^O,ce=e[30]^k,se=e[31]^O,ne=e[40]^k,ae=e[41]^O;k=r^(l<<1|f>>>31),O=n^(f<<1|l>>>31);let Z=e[2]^k,me=e[3]^O,x=e[12]^k,s=e[13]^O,u=e[22]^k,g=e[23]^O,y=e[32]^k,v=e[33]^O,S=e[42]^k,E=e[43]^O;k=o^(m<<1|A>>>31),O=a^(A<<1|m>>>31);let b=e[4]^k,c=e[5]^O,w=e[14]^k,D=e[15]^O,L=e[24]^k,W=e[25]^O,Y=e[34]^k,ie=e[35]^O,le=e[44]^k,ut=e[45]^O;k=l^(T<<1|I>>>31),O=f^(I<<1|T>>>31);let de=e[6]^k,K=e[7]^O,N=e[16]^k,U=e[17]^O,G=e[26]^k,te=e[27]^O,q=e[36]^k,J=e[37]^O,et=e[46]^k,ge=e[47]^O;k=m^(r<<1|n>>>31),O=A^(n<<1|r>>>31);let we=e[8]^k,_r=e[9]^O,Te=e[18]^k,Se=e[19]^O,Tn=e[28]^k,Ee=e[29]^O,Ze=e[38]^k,Ri=e[39]^O,Je=e[48]^k,Ye=e[49]^O,ti=C,Ie=R,_e=H<<4|V>>>28,ri=V<<4|H>>>28,ke=X<<3|z>>>29,Pe=z<<3|X>>>29,ni=se<<9|ce>>>23,Be=ce<<9|se>>>23,Ke=ne<<18|ae>>>14,ii=ae<<18|ne>>>14,Oe=Z<<1|me>>>31,Ce=me<<1|Z>>>31,oi=s<<12|x>>>20,Re=x<<12|s>>>20,Ue=u<<10|g>>>22,si=g<<10|u>>>22,Ne=v<<13|y>>>19,De=y<<13|v>>>19,ai=S<<2|E>>>30,Ve=E<<2|S>>>30,Le=c<<30|b>>>2,ci=b<<30|c>>>2,Fe=w<<6|D>>>26,je=D<<6|w>>>26,ui=W<<11|L>>>21,ze=L<<11|W>>>21,qe=Y<<15|ie>>>17,li=ie<<15|Y>>>17,We=ut<<29|le>>>3,He=le<<29|ut>>>3,fi=de<<28|K>>>4,$e=K<<28|de>>>4,Ge=U<<23|N>>>9,zr=N<<23|U>>>9,qr=G<<25|te>>>7,Wr=te<<25|G>>>7,Hr=q<<21|J>>>11,$r=J<<21|q>>>11,Gr=ge<<24|et>>>8,Zr=et<<24|ge>>>8,Jr=we<<27|_r>>>5,Yr=_r<<27|we>>>5,Qr=Te<<20|Se>>>12,Xr=Se<<20|Te>>>12,en=Ee<<7|Tn>>>25,tn=Tn<<7|Ee>>>25,rn=Ze<<8|Ri>>>24,nn=Ri<<8|Ze>>>24,on=Je<<14|Ye>>>18,sn=Ye<<14|Je>>>18;e[0]=ti^~oi&ui,e[1]=Ie^~Re&ze,e[10]=fi^~Qr&ke,e[11]=$e^~Xr&Pe,e[20]=Oe^~Fe&qr,e[21]=Ce^~je&Wr,e[30]=Jr^~_e&Ue,e[31]=Yr^~ri&si,e[40]=Le^~Ge&en,e[41]=ci^~zr&tn,e[2]=oi^~ui&Hr,e[3]=Re^~ze&$r,e[12]=Qr^~ke&Ne,e[13]=Xr^~Pe&De,e[22]=Fe^~qr&rn,e[23]=je^~Wr&nn,e[32]=_e^~Ue&qe,e[33]=ri^~si&li,e[42]=Ge^~en&ni,e[43]=zr^~tn&Be,e[4]=ui^~Hr&on,e[5]=ze^~$r&sn,e[14]=ke^~Ne&We,e[15]=Pe^~De&He,e[24]=qr^~rn&Ke,e[25]=Wr^~nn&ii,e[34]=Ue^~qe&Gr,e[35]=si^~li&Zr,e[44]=en^~ni&ai,e[45]=tn^~Be&Ve,e[6]=Hr^~on&ti,e[7]=$r^~sn&Ie,e[16]=Ne^~We&fi,e[17]=De^~He&$e,e[26]=rn^~Ke&Oe,e[27]=nn^~ii&Ce,e[36]=qe^~Gr&Jr,e[37]=li^~Zr&Yr,e[46]=ni^~ai&Le,e[47]=Be^~Ve&ci,e[8]=on^~ti&oi,e[9]=sn^~Ie&Re,e[18]=We^~fi&Qr,e[19]=He^~$e&Xr,e[28]=Ke^~Oe&Fe,e[29]=ii^~Ce&je,e[38]=Gr^~Jr&_e,e[39]=Zr^~Yr&ri,e[48]=ai^~Le&Ge,e[49]=Ve^~ci&zr,e[0]^=dw[t*2],e[1]^=dw[t*2+1]}}});var gw=he((jG,mw)=>{h();p();var Sl=pw();function zs(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}i(zs,"Keccak");zs.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};zs.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Sl.p1600(this.state),this.count=0)};zs.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&Sl.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Sl.p1600(this.state),this.count=0,this.squeezing=!0};zs.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Sl.p1600(this.state),this.count=0);return t};zs.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};mw.exports=zs});var vw=he((HG,yw)=>{h();p();yw.exports=fw()(gw())});var bw=he(qs=>{"use strict";h();p();Object.defineProperty(qs,"__esModule",{value:!0});var El=nw(),Ml=vw();qs.keccak224=El.createHashFunction(function(){return Ml("keccak224")});qs.keccak256=El.createHashFunction(function(){return Ml("keccak256")});qs.keccak384=El.createHashFunction(function(){return Ml("keccak384")});qs.keccak512=El.createHashFunction(function(){return Ml("keccak512")})});var _l=he(ur=>{"use strict";h();p();Object.defineProperty(ur,"__esModule",{value:!0});ur.rlphash=ur.ripemd160=ur.sha256=ur.keccak256=ur.keccak=void 0;var Il=bw(),oI=Il.keccak224,sI=Il.keccak384,aI=Il.keccak256,cI=Il.keccak512,ww=$1(),uI=Lo(),lI=Al(),Tl=js();ur.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!uI.isHexString(e)?e=Buffer.from(e,"utf8"):e=Tl.toBuffer(e),t||(t=256),t){case 224:return oI(e);case 256:return aI(e);case 384:return sI(e);case 512:return cI(e);default:throw new Error("Invald algorithm: keccak"+t)}};ur.keccak256=function(e){return ur.keccak(e)};ur.sha256=function(e){return e=Tl.toBuffer(e),ww("sha256").update(e).digest()};ur.ripemd160=function(e,t){e=Tl.toBuffer(e);var r=ww("rmd160").update(e).digest();return t===!0?Tl.setLength(r,32):r};ur.rlphash=function(e){return ur.keccak(lI.encode(e))}});var xw=he(tt=>{"use strict";h();p();Object.defineProperty(tt,"__esModule",{value:!0});tt.importPublic=tt.privateToPublic=tt.privateToAddress=tt.publicToAddress=tt.pubToAddress=tt.isValidPublic=tt.isValidPrivate=tt.isPrecompiled=tt.generateAddress2=tt.generateAddress=tt.isValidChecksumAddress=tt.toChecksumAddress=tt.isZeroAddress=tt.isValidAddress=tt.zeroAddress=void 0;var Cp=Og(),fI=Lo(),Ws=wl(),dI=Do(),vn=js(),Hs=_l();tt.zeroAddress=function(){var e=20,t=vn.zeros(e);return vn.bufferToHex(t)};tt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};tt.isZeroAddress=function(e){var t=tt.zeroAddress();return t===vn.addHexPrefix(e)};tt.toChecksumAddress=function(e,t){e=fI.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=Hs.keccak(r+e).toString("hex"),o="0x",a=0;a<e.length;a++)parseInt(n[a],16)>=8?o+=e[a].toUpperCase():o+=e[a];return o};tt.isValidChecksumAddress=function(e,t){return tt.isValidAddress(e)&&tt.toChecksumAddress(e,t)===e};tt.generateAddress=function(e,t){e=vn.toBuffer(e);var r=new dI(t);return r.isZero()?Hs.rlphash([e,null]).slice(-20):Hs.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};tt.generateAddress2=function(e,t,r){var n=vn.toBuffer(e),o=vn.toBuffer(t),a=vn.toBuffer(r);Cp(n.length===20),Cp(o.length===32);var l=Hs.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,o,Hs.keccak256(a)]));return l.slice(-20)};tt.isPrecompiled=function(e){var t=vn.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};tt.isValidPrivate=function(e){return Ws.privateKeyVerify(e)};tt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Ws.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Ws.publicKeyVerify(e):!1};tt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=vn.toBuffer(e),t&&e.length!==64&&(e=Ws.publicKeyConvert(e,!1).slice(1)),Cp(e.length===64),Hs.keccak(e).slice(-20)};tt.publicToAddress=tt.pubToAddress;tt.privateToAddress=function(e){return tt.publicToAddress(tt.privateToPublic(e))};tt.privateToPublic=function(e){return e=vn.toBuffer(e),Ws.publicKeyCreate(e,!1).slice(1)};tt.importPublic=function(e){return e=vn.toBuffer(e),e.length!==64&&(e=Ws.publicKeyConvert(e,!1).slice(1)),e}});var Aw=he(lr=>{"use strict";h();p();Object.defineProperty(lr,"__esModule",{value:!0});lr.hashPersonalMessage=lr.isValidSignature=lr.fromRpcSig=lr.toRpcSig=lr.ecrecover=lr.ecsign=void 0;var Rp=wl(),kl=Do(),Fo=js(),hI=_l();lr.ecsign=function(e,t,r){var n=Rp.sign(e,t),o=n.recovery,a={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?o+(r*2+35):o+27};return a};lr.ecrecover=function(e,t,r,n,o){var a=Buffer.concat([Fo.setLength(r,32),Fo.setLength(n,32)],64),l=Up(t,o);if(!Np(l))throw new Error("Invalid signature v value");var f=Rp.recover(e,a,l);return Rp.publicKeyConvert(f,!1).slice(1)};lr.toRpcSig=function(e,t,r,n){var o=Up(e,n);if(!Np(o))throw new Error("Invalid signature v value");return Fo.bufferToHex(Buffer.concat([Fo.setLengthLeft(t,32),Fo.setLengthLeft(r,32),Fo.toBuffer(e)]))};lr.fromRpcSig=function(e){var t=Fo.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};lr.isValidSignature=function(e,t,r,n,o){n===void 0&&(n=!0);var a=new kl("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),l=new kl("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!Np(Up(e,o)))return!1;var f=new kl(t),m=new kl(r);return!(f.isZero()||f.gt(l)||m.isZero()||m.gt(l)||n&&m.cmp(a)===1)};lr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return hI.keccak(Buffer.concat([t,e]))};function Up(e,t){return t?e-(2*t+35):e-27}i(Up,"calculateSigRecovery");function Np(e){return e===0||e===1}i(Np,"isValidSigRecovery")});var Mw=he(Bl=>{"use strict";h();p();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.defineProperties=void 0;var Sw=Og(),pI=Lo(),Ew=Al(),Pl=js();Bl.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(o){if(o===void 0&&(o=!1),o){var a={};return e._fields.forEach(function(l){a[l]="0x"+e[l].toString("hex")}),a}return Pl.baToJSON(e.raw)},e.serialize=i(function(){return Ew.encode(e.raw)},"serialize"),t.forEach(function(o,a){e._fields.push(o.name);function l(){return e.raw[a]}i(l,"getter");function f(m){m=Pl.toBuffer(m),m.toString("hex")==="00"&&!o.allowZero&&(m=Buffer.allocUnsafe(0)),o.allowLess&&o.length?(m=Pl.stripZeros(m),Sw(o.length>=m.length,"The field "+o.name+" must not have more "+o.length+" bytes")):!(o.allowZero&&m.length===0)&&o.length&&Sw(o.length===m.length,"The field "+o.name+" must have byte length of "+o.length),e.raw[a]=m}i(f,"setter"),Object.defineProperty(e,o.name,{enumerable:!0,configurable:!0,get:l,set:f}),o.default&&(e[o.name]=o.default),o.alias&&Object.defineProperty(e,o.alias,{enumerable:!1,configurable:!0,set:f,get:l})}),r)if(typeof r=="string"&&(r=Buffer.from(pI.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=Ew.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(o,a){e[e._fields[a]]=Pl.toBuffer(o)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(o){n.indexOf(o.name)!==-1&&(e[o.name]=r[o.name]),n.indexOf(o.alias)!==-1&&(e[o.alias]=r[o.alias])})}else throw new Error("invalid data")}});var $a=he(kt=>{"use strict";h();p();var mI=kt&&kt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$s=kt&&kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&mI(t,e,r)};Object.defineProperty(kt,"__esModule",{value:!0});kt.secp256k1=kt.rlp=kt.BN=void 0;var gI=wl();kt.secp256k1=gI;var yI=Lo(),vI=Do();kt.BN=vI;var bI=Al();kt.rlp=bI;Object.assign(kt,yI);$s(rw(),kt);$s(xw(),kt);$s(_l(),kt);$s(Aw(),kt);$s(js(),kt);$s(Mw(),kt)});var Ga=he(fr=>{"use strict";h();p();Object.defineProperty(fr,"__esModule",{value:!0});fr.normalize=fr.recoverPublicKey=fr.concatSig=fr.legacyToBuffer=fr.isNullish=fr.padWithZeroes=void 0;var Vr=$a(),Dp=Lo();function Vp(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}i(Vp,"padWithZeroes");fr.padWithZeroes=Vp;function wI(e){return e==null}i(wI,"isNullish");fr.isNullish=wI;function xI(e){return typeof e=="string"&&!Dp.isHexString(e)?Buffer.from(e):Vr.toBuffer(e)}i(xI,"legacyToBuffer");fr.legacyToBuffer=xI;function AI(e,t,r){let n=Vr.fromSigned(t),o=Vr.fromSigned(r),a=Vr.bufferToInt(e),l=Vp(Vr.toUnsigned(n).toString("hex"),64),f=Vp(Vr.toUnsigned(o).toString("hex"),64),m=Dp.stripHexPrefix(Dp.intToHex(a));return Vr.addHexPrefix(l.concat(f,m))}i(AI,"concatSig");fr.concatSig=AI;function SI(e,t){let r=Vr.fromRpcSig(t);return Vr.ecrecover(e,r.v,r.r,r.s)}i(SI,"recoverPublicKey");fr.recoverPublicKey=SI;function EI(e){if(e){if(typeof e=="number"){let t=Vr.toBuffer(e);e=Vr.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Vr.addHexPrefix(e.toLowerCase())}}i(EI,"normalize");fr.normalize=EI});var Iw=he(no=>{"use strict";h();p();Object.defineProperty(no,"__esModule",{value:!0});no.extractPublicKey=no.recoverPersonalSignature=no.personalSign=void 0;var Gs=$a(),Vn=Ga();function MI({privateKey:e,data:t}){if(Vn.isNullish(t))throw new Error("Missing data parameter");if(Vn.isNullish(e))throw new Error("Missing privateKey parameter");let r=Vn.legacyToBuffer(t),n=Gs.hashPersonalMessage(r),o=Gs.ecsign(n,e);return Vn.concatSig(Gs.toBuffer(o.v),o.r,o.s)}i(MI,"personalSign");no.personalSign=MI;function TI({data:e,signature:t}){if(Vn.isNullish(e))throw new Error("Missing data parameter");if(Vn.isNullish(t))throw new Error("Missing signature parameter");let r=Tw(e,t),n=Gs.publicToAddress(r);return Gs.bufferToHex(n)}i(TI,"recoverPersonalSignature");no.recoverPersonalSignature=TI;function II({data:e,signature:t}){if(Vn.isNullish(e))throw new Error("Missing data parameter");if(Vn.isNullish(t))throw new Error("Missing signature parameter");return`0x${Tw(e,t).toString("hex")}`}i(II,"extractPublicKey");no.extractPublicKey=II;function Tw(e,t){let r=Gs.hashPersonalMessage(Vn.legacyToBuffer(e));return Vn.recoverPublicKey(r,t)}i(Tw,"getPublicKeyFor")});var kw=he((_w,Lp)=>{h();p();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}i(r,"assert");function n(x,s){x.super_=s;var u=i(function(){},"TempCtor");u.prototype=s.prototype,x.prototype=new u,x.prototype.constructor=x}i(n,"inherits");function o(x,s,u){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(x||0,s||10,u||"be"))}i(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=jm().Buffer}catch{}o.isBN=i(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=i(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=i(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=i(function(s,u,g){if(typeof s=="number")return this._initNumber(s,u,g);if(typeof s=="object")return this._initArray(s,u,g);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,g):(this._parseBase(s,u,y),g==="le"&&this._initArray(this.toArray(),u,g)))},"init"),o.prototype._initNumber=i(function(s,u,g){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),u,g)},"_initNumber"),o.prototype._initArray=i(function(s,u,g){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(g==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(g==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(x,s){var u=x.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}i(l,"parseHex4Bits");function f(x,s,u){var g=l(x,u);return u-1>=s&&(g|=l(x,u-1)<<4),g}i(f,"parseHexByte"),o.prototype._parseHex=i(function(s,u,g){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(g==="be")for(y=s.length-1;y>=u;y-=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var b=s.length-u;for(y=b%2===0?u+1:u;y<s.length;y+=2)E=f(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function m(x,s,u,g){for(var y=0,v=Math.min(x.length,u),S=s;S<v;S++){var E=x.charCodeAt(S)-48;y*=g,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i(m,"parseBase"),o.prototype._parseBase=i(function(s,u,g){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-g,E=S%y,b=Math.min(S,S-E)+g,c=0,w=g;w<b;w+=y)c=m(s,w,w+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=m(s,w,s.length,u),w=0;w<E;w++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=i(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=i(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=i(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=i(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=i(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=i(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=i(function(s,u){s=s||10,u=u|0||1;var g;if(s===16||s==="hex"){g="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],b=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?g=A[6-b.length]+b+g:g=b+g,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(g=v.toString(16)+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],w=I[s];g="";var D=this.clone();for(D.negative=0;!D.isZero();){var L=D.modn(w).toString(s);D=D.idivn(w),D.isZero()?g=L+g:g=A[c-L.length]+L+g}for(this.isZero()&&(g="0"+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=i(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=i(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=i(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=i(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=i(function(s,u,g){var y=this.byteLength(),v=g||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),b,c,w=this.clone();if(S){for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[c]=b;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[v-c-1]=b}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=i(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=i(function(s){var u=s,g=0;return u>=4096&&(g+=13,u>>>=13),u>=64&&(g+=7,u>>>=7),u>=8&&(g+=4,u>>>=4),u>=2&&(g+=2,u>>>=2),g+u},"_countBits"),o.prototype._zeroBits=i(function(s){if(s===0)return 26;var u=s,g=0;return u&8191||(g+=13,u>>>=13),u&127||(g+=7,u>>>=7),u&15||(g+=4,u>>>=4),u&3||(g+=2,u>>>=2),u&1||g++,g},"_zeroBits"),o.prototype.bitLength=i(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(x){for(var s=new Array(x.bitLength()),u=0;u<s.length;u++){var g=u/26|0,y=u%26;s[u]=(x.words[g]&1<<y)>>>y}return s}i(k,"toBitArray"),o.prototype.zeroBits=i(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var g=this._zeroBits(this.words[u]);if(s+=g,g!==26)break}return s},"zeroBits"),o.prototype.byteLength=i(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=i(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=i(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=i(function(){return this.negative!==0},"isNeg"),o.prototype.neg=i(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=i(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=i(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=i(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=i(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=i(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=i(function(s){var u;this.length>s.length?u=s:u=this;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]&s.words[g];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=i(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=i(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=i(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=i(function(s){var u,g;this.length>s.length?(u=this,g=s):(u=s,g=this);for(var y=0;y<g.length;y++)this.words[y]=u.words[y]^g.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=i(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=i(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=i(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=i(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,g=s%26;this._expand(u),g>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return g>0&&(this.words[y]=~this.words[y]&67108863>>26-g),this.strip()},"inotn"),o.prototype.notn=i(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=i(function(s,u){r(typeof s=="number"&&s>=0);var g=s/26|0,y=s%26;return this._expand(g+1),u?this.words[g]=this.words[g]|1<<y:this.words[g]=this.words[g]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=i(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var g,y;this.length>s.length?(g=this,y=s):(g=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(g.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<g.length;S++)u=(g.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=g.length,v!==0)this.words[this.length]=v,this.length++;else if(g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this},"iadd"),o.prototype.add=i(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=i(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var g=this.cmp(s);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;g>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=i(function(s){return this.clone().isub(s)},"sub");function O(x,s,u){u.negative=s.negative^x.negative;var g=x.length+s.length|0;u.length=g,g=g-1|0;var y=x.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,b=S/67108864|0;u.words[0]=E;for(var c=1;c<g;c++){for(var w=b>>>26,D=b&67108863,L=Math.min(c,s.length-1),W=Math.max(0,c-x.length+1);W<=L;W++){var Y=c-W|0;y=x.words[Y]|0,v=s.words[W]|0,S=y*v+D,w+=S/67108864|0,D=S&67108863}u.words[c]=D|0,b=w|0}return b!==0?u.words[c]=b|0:u.length--,u.strip()}i(O,"smallMulTo");var C=i(function(s,u,g){var y=s.words,v=u.words,S=g.words,E=0,b,c,w,D=y[0]|0,L=D&8191,W=D>>>13,Y=y[1]|0,ie=Y&8191,le=Y>>>13,ut=y[2]|0,de=ut&8191,K=ut>>>13,N=y[3]|0,U=N&8191,G=N>>>13,te=y[4]|0,q=te&8191,J=te>>>13,et=y[5]|0,ge=et&8191,we=et>>>13,_r=y[6]|0,Te=_r&8191,Se=_r>>>13,Tn=y[7]|0,Ee=Tn&8191,Ze=Tn>>>13,Ri=y[8]|0,Je=Ri&8191,Ye=Ri>>>13,ti=y[9]|0,Ie=ti&8191,_e=ti>>>13,ri=v[0]|0,ke=ri&8191,Pe=ri>>>13,ni=v[1]|0,Be=ni&8191,Ke=ni>>>13,ii=v[2]|0,Oe=ii&8191,Ce=ii>>>13,oi=v[3]|0,Re=oi&8191,Ue=oi>>>13,si=v[4]|0,Ne=si&8191,De=si>>>13,ai=v[5]|0,Ve=ai&8191,Le=ai>>>13,ci=v[6]|0,Fe=ci&8191,je=ci>>>13,ui=v[7]|0,ze=ui&8191,qe=ui>>>13,li=v[8]|0,We=li&8191,He=li>>>13,fi=v[9]|0,$e=fi&8191,Ge=fi>>>13;g.negative=s.negative^u.negative,g.length=19,b=Math.imul(L,ke),c=Math.imul(L,Pe),c=c+Math.imul(W,ke)|0,w=Math.imul(W,Pe);var zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,b=Math.imul(ie,ke),c=Math.imul(ie,Pe),c=c+Math.imul(le,ke)|0,w=Math.imul(le,Pe),b=b+Math.imul(L,Be)|0,c=c+Math.imul(L,Ke)|0,c=c+Math.imul(W,Be)|0,w=w+Math.imul(W,Ke)|0;var qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(de,ke),c=Math.imul(de,Pe),c=c+Math.imul(K,ke)|0,w=Math.imul(K,Pe),b=b+Math.imul(ie,Be)|0,c=c+Math.imul(ie,Ke)|0,c=c+Math.imul(le,Be)|0,w=w+Math.imul(le,Ke)|0,b=b+Math.imul(L,Oe)|0,c=c+Math.imul(L,Ce)|0,c=c+Math.imul(W,Oe)|0,w=w+Math.imul(W,Ce)|0;var Wr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(U,ke),c=Math.imul(U,Pe),c=c+Math.imul(G,ke)|0,w=Math.imul(G,Pe),b=b+Math.imul(de,Be)|0,c=c+Math.imul(de,Ke)|0,c=c+Math.imul(K,Be)|0,w=w+Math.imul(K,Ke)|0,b=b+Math.imul(ie,Oe)|0,c=c+Math.imul(ie,Ce)|0,c=c+Math.imul(le,Oe)|0,w=w+Math.imul(le,Ce)|0,b=b+Math.imul(L,Re)|0,c=c+Math.imul(L,Ue)|0,c=c+Math.imul(W,Re)|0,w=w+Math.imul(W,Ue)|0;var Hr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(q,ke),c=Math.imul(q,Pe),c=c+Math.imul(J,ke)|0,w=Math.imul(J,Pe),b=b+Math.imul(U,Be)|0,c=c+Math.imul(U,Ke)|0,c=c+Math.imul(G,Be)|0,w=w+Math.imul(G,Ke)|0,b=b+Math.imul(de,Oe)|0,c=c+Math.imul(de,Ce)|0,c=c+Math.imul(K,Oe)|0,w=w+Math.imul(K,Ce)|0,b=b+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ue)|0,c=c+Math.imul(le,Re)|0,w=w+Math.imul(le,Ue)|0,b=b+Math.imul(L,Ne)|0,c=c+Math.imul(L,De)|0,c=c+Math.imul(W,Ne)|0,w=w+Math.imul(W,De)|0;var $r=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(ge,ke),c=Math.imul(ge,Pe),c=c+Math.imul(we,ke)|0,w=Math.imul(we,Pe),b=b+Math.imul(q,Be)|0,c=c+Math.imul(q,Ke)|0,c=c+Math.imul(J,Be)|0,w=w+Math.imul(J,Ke)|0,b=b+Math.imul(U,Oe)|0,c=c+Math.imul(U,Ce)|0,c=c+Math.imul(G,Oe)|0,w=w+Math.imul(G,Ce)|0,b=b+Math.imul(de,Re)|0,c=c+Math.imul(de,Ue)|0,c=c+Math.imul(K,Re)|0,w=w+Math.imul(K,Ue)|0,b=b+Math.imul(ie,Ne)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(le,Ne)|0,w=w+Math.imul(le,De)|0,b=b+Math.imul(L,Ve)|0,c=c+Math.imul(L,Le)|0,c=c+Math.imul(W,Ve)|0,w=w+Math.imul(W,Le)|0;var Gr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,b=Math.imul(Te,ke),c=Math.imul(Te,Pe),c=c+Math.imul(Se,ke)|0,w=Math.imul(Se,Pe),b=b+Math.imul(ge,Be)|0,c=c+Math.imul(ge,Ke)|0,c=c+Math.imul(we,Be)|0,w=w+Math.imul(we,Ke)|0,b=b+Math.imul(q,Oe)|0,c=c+Math.imul(q,Ce)|0,c=c+Math.imul(J,Oe)|0,w=w+Math.imul(J,Ce)|0,b=b+Math.imul(U,Re)|0,c=c+Math.imul(U,Ue)|0,c=c+Math.imul(G,Re)|0,w=w+Math.imul(G,Ue)|0,b=b+Math.imul(de,Ne)|0,c=c+Math.imul(de,De)|0,c=c+Math.imul(K,Ne)|0,w=w+Math.imul(K,De)|0,b=b+Math.imul(ie,Ve)|0,c=c+Math.imul(ie,Le)|0,c=c+Math.imul(le,Ve)|0,w=w+Math.imul(le,Le)|0,b=b+Math.imul(L,Fe)|0,c=c+Math.imul(L,je)|0,c=c+Math.imul(W,Fe)|0,w=w+Math.imul(W,je)|0;var Zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(Ee,ke),c=Math.imul(Ee,Pe),c=c+Math.imul(Ze,ke)|0,w=Math.imul(Ze,Pe),b=b+Math.imul(Te,Be)|0,c=c+Math.imul(Te,Ke)|0,c=c+Math.imul(Se,Be)|0,w=w+Math.imul(Se,Ke)|0,b=b+Math.imul(ge,Oe)|0,c=c+Math.imul(ge,Ce)|0,c=c+Math.imul(we,Oe)|0,w=w+Math.imul(we,Ce)|0,b=b+Math.imul(q,Re)|0,c=c+Math.imul(q,Ue)|0,c=c+Math.imul(J,Re)|0,w=w+Math.imul(J,Ue)|0,b=b+Math.imul(U,Ne)|0,c=c+Math.imul(U,De)|0,c=c+Math.imul(G,Ne)|0,w=w+Math.imul(G,De)|0,b=b+Math.imul(de,Ve)|0,c=c+Math.imul(de,Le)|0,c=c+Math.imul(K,Ve)|0,w=w+Math.imul(K,Le)|0,b=b+Math.imul(ie,Fe)|0,c=c+Math.imul(ie,je)|0,c=c+Math.imul(le,Fe)|0,w=w+Math.imul(le,je)|0,b=b+Math.imul(L,ze)|0,c=c+Math.imul(L,qe)|0,c=c+Math.imul(W,ze)|0,w=w+Math.imul(W,qe)|0;var Jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,b=Math.imul(Je,ke),c=Math.imul(Je,Pe),c=c+Math.imul(Ye,ke)|0,w=Math.imul(Ye,Pe),b=b+Math.imul(Ee,Be)|0,c=c+Math.imul(Ee,Ke)|0,c=c+Math.imul(Ze,Be)|0,w=w+Math.imul(Ze,Ke)|0,b=b+Math.imul(Te,Oe)|0,c=c+Math.imul(Te,Ce)|0,c=c+Math.imul(Se,Oe)|0,w=w+Math.imul(Se,Ce)|0,b=b+Math.imul(ge,Re)|0,c=c+Math.imul(ge,Ue)|0,c=c+Math.imul(we,Re)|0,w=w+Math.imul(we,Ue)|0,b=b+Math.imul(q,Ne)|0,c=c+Math.imul(q,De)|0,c=c+Math.imul(J,Ne)|0,w=w+Math.imul(J,De)|0,b=b+Math.imul(U,Ve)|0,c=c+Math.imul(U,Le)|0,c=c+Math.imul(G,Ve)|0,w=w+Math.imul(G,Le)|0,b=b+Math.imul(de,Fe)|0,c=c+Math.imul(de,je)|0,c=c+Math.imul(K,Fe)|0,w=w+Math.imul(K,je)|0,b=b+Math.imul(ie,ze)|0,c=c+Math.imul(ie,qe)|0,c=c+Math.imul(le,ze)|0,w=w+Math.imul(le,qe)|0,b=b+Math.imul(L,We)|0,c=c+Math.imul(L,He)|0,c=c+Math.imul(W,We)|0,w=w+Math.imul(W,He)|0;var Yr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(Ie,ke),c=Math.imul(Ie,Pe),c=c+Math.imul(_e,ke)|0,w=Math.imul(_e,Pe),b=b+Math.imul(Je,Be)|0,c=c+Math.imul(Je,Ke)|0,c=c+Math.imul(Ye,Be)|0,w=w+Math.imul(Ye,Ke)|0,b=b+Math.imul(Ee,Oe)|0,c=c+Math.imul(Ee,Ce)|0,c=c+Math.imul(Ze,Oe)|0,w=w+Math.imul(Ze,Ce)|0,b=b+Math.imul(Te,Re)|0,c=c+Math.imul(Te,Ue)|0,c=c+Math.imul(Se,Re)|0,w=w+Math.imul(Se,Ue)|0,b=b+Math.imul(ge,Ne)|0,c=c+Math.imul(ge,De)|0,c=c+Math.imul(we,Ne)|0,w=w+Math.imul(we,De)|0,b=b+Math.imul(q,Ve)|0,c=c+Math.imul(q,Le)|0,c=c+Math.imul(J,Ve)|0,w=w+Math.imul(J,Le)|0,b=b+Math.imul(U,Fe)|0,c=c+Math.imul(U,je)|0,c=c+Math.imul(G,Fe)|0,w=w+Math.imul(G,je)|0,b=b+Math.imul(de,ze)|0,c=c+Math.imul(de,qe)|0,c=c+Math.imul(K,ze)|0,w=w+Math.imul(K,qe)|0,b=b+Math.imul(ie,We)|0,c=c+Math.imul(ie,He)|0,c=c+Math.imul(le,We)|0,w=w+Math.imul(le,He)|0,b=b+Math.imul(L,$e)|0,c=c+Math.imul(L,Ge)|0,c=c+Math.imul(W,$e)|0,w=w+Math.imul(W,Ge)|0;var Qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b=Math.imul(Ie,Be),c=Math.imul(Ie,Ke),c=c+Math.imul(_e,Be)|0,w=Math.imul(_e,Ke),b=b+Math.imul(Je,Oe)|0,c=c+Math.imul(Je,Ce)|0,c=c+Math.imul(Ye,Oe)|0,w=w+Math.imul(Ye,Ce)|0,b=b+Math.imul(Ee,Re)|0,c=c+Math.imul(Ee,Ue)|0,c=c+Math.imul(Ze,Re)|0,w=w+Math.imul(Ze,Ue)|0,b=b+Math.imul(Te,Ne)|0,c=c+Math.imul(Te,De)|0,c=c+Math.imul(Se,Ne)|0,w=w+Math.imul(Se,De)|0,b=b+Math.imul(ge,Ve)|0,c=c+Math.imul(ge,Le)|0,c=c+Math.imul(we,Ve)|0,w=w+Math.imul(we,Le)|0,b=b+Math.imul(q,Fe)|0,c=c+Math.imul(q,je)|0,c=c+Math.imul(J,Fe)|0,w=w+Math.imul(J,je)|0,b=b+Math.imul(U,ze)|0,c=c+Math.imul(U,qe)|0,c=c+Math.imul(G,ze)|0,w=w+Math.imul(G,qe)|0,b=b+Math.imul(de,We)|0,c=c+Math.imul(de,He)|0,c=c+Math.imul(K,We)|0,w=w+Math.imul(K,He)|0,b=b+Math.imul(ie,$e)|0,c=c+Math.imul(ie,Ge)|0,c=c+Math.imul(le,$e)|0,w=w+Math.imul(le,Ge)|0;var Xr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(Ie,Oe),c=Math.imul(Ie,Ce),c=c+Math.imul(_e,Oe)|0,w=Math.imul(_e,Ce),b=b+Math.imul(Je,Re)|0,c=c+Math.imul(Je,Ue)|0,c=c+Math.imul(Ye,Re)|0,w=w+Math.imul(Ye,Ue)|0,b=b+Math.imul(Ee,Ne)|0,c=c+Math.imul(Ee,De)|0,c=c+Math.imul(Ze,Ne)|0,w=w+Math.imul(Ze,De)|0,b=b+Math.imul(Te,Ve)|0,c=c+Math.imul(Te,Le)|0,c=c+Math.imul(Se,Ve)|0,w=w+Math.imul(Se,Le)|0,b=b+Math.imul(ge,Fe)|0,c=c+Math.imul(ge,je)|0,c=c+Math.imul(we,Fe)|0,w=w+Math.imul(we,je)|0,b=b+Math.imul(q,ze)|0,c=c+Math.imul(q,qe)|0,c=c+Math.imul(J,ze)|0,w=w+Math.imul(J,qe)|0,b=b+Math.imul(U,We)|0,c=c+Math.imul(U,He)|0,c=c+Math.imul(G,We)|0,w=w+Math.imul(G,He)|0,b=b+Math.imul(de,$e)|0,c=c+Math.imul(de,Ge)|0,c=c+Math.imul(K,$e)|0,w=w+Math.imul(K,Ge)|0;var en=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(en>>>26)|0,en&=67108863,b=Math.imul(Ie,Re),c=Math.imul(Ie,Ue),c=c+Math.imul(_e,Re)|0,w=Math.imul(_e,Ue),b=b+Math.imul(Je,Ne)|0,c=c+Math.imul(Je,De)|0,c=c+Math.imul(Ye,Ne)|0,w=w+Math.imul(Ye,De)|0,b=b+Math.imul(Ee,Ve)|0,c=c+Math.imul(Ee,Le)|0,c=c+Math.imul(Ze,Ve)|0,w=w+Math.imul(Ze,Le)|0,b=b+Math.imul(Te,Fe)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Se,Fe)|0,w=w+Math.imul(Se,je)|0,b=b+Math.imul(ge,ze)|0,c=c+Math.imul(ge,qe)|0,c=c+Math.imul(we,ze)|0,w=w+Math.imul(we,qe)|0,b=b+Math.imul(q,We)|0,c=c+Math.imul(q,He)|0,c=c+Math.imul(J,We)|0,w=w+Math.imul(J,He)|0,b=b+Math.imul(U,$e)|0,c=c+Math.imul(U,Ge)|0,c=c+Math.imul(G,$e)|0,w=w+Math.imul(G,Ge)|0;var tn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,b=Math.imul(Ie,Ne),c=Math.imul(Ie,De),c=c+Math.imul(_e,Ne)|0,w=Math.imul(_e,De),b=b+Math.imul(Je,Ve)|0,c=c+Math.imul(Je,Le)|0,c=c+Math.imul(Ye,Ve)|0,w=w+Math.imul(Ye,Le)|0,b=b+Math.imul(Ee,Fe)|0,c=c+Math.imul(Ee,je)|0,c=c+Math.imul(Ze,Fe)|0,w=w+Math.imul(Ze,je)|0,b=b+Math.imul(Te,ze)|0,c=c+Math.imul(Te,qe)|0,c=c+Math.imul(Se,ze)|0,w=w+Math.imul(Se,qe)|0,b=b+Math.imul(ge,We)|0,c=c+Math.imul(ge,He)|0,c=c+Math.imul(we,We)|0,w=w+Math.imul(we,He)|0,b=b+Math.imul(q,$e)|0,c=c+Math.imul(q,Ge)|0,c=c+Math.imul(J,$e)|0,w=w+Math.imul(J,Ge)|0;var rn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,b=Math.imul(Ie,Ve),c=Math.imul(Ie,Le),c=c+Math.imul(_e,Ve)|0,w=Math.imul(_e,Le),b=b+Math.imul(Je,Fe)|0,c=c+Math.imul(Je,je)|0,c=c+Math.imul(Ye,Fe)|0,w=w+Math.imul(Ye,je)|0,b=b+Math.imul(Ee,ze)|0,c=c+Math.imul(Ee,qe)|0,c=c+Math.imul(Ze,ze)|0,w=w+Math.imul(Ze,qe)|0,b=b+Math.imul(Te,We)|0,c=c+Math.imul(Te,He)|0,c=c+Math.imul(Se,We)|0,w=w+Math.imul(Se,He)|0,b=b+Math.imul(ge,$e)|0,c=c+Math.imul(ge,Ge)|0,c=c+Math.imul(we,$e)|0,w=w+Math.imul(we,Ge)|0;var nn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(nn>>>26)|0,nn&=67108863,b=Math.imul(Ie,Fe),c=Math.imul(Ie,je),c=c+Math.imul(_e,Fe)|0,w=Math.imul(_e,je),b=b+Math.imul(Je,ze)|0,c=c+Math.imul(Je,qe)|0,c=c+Math.imul(Ye,ze)|0,w=w+Math.imul(Ye,qe)|0,b=b+Math.imul(Ee,We)|0,c=c+Math.imul(Ee,He)|0,c=c+Math.imul(Ze,We)|0,w=w+Math.imul(Ze,He)|0,b=b+Math.imul(Te,$e)|0,c=c+Math.imul(Te,Ge)|0,c=c+Math.imul(Se,$e)|0,w=w+Math.imul(Se,Ge)|0;var on=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(on>>>26)|0,on&=67108863,b=Math.imul(Ie,ze),c=Math.imul(Ie,qe),c=c+Math.imul(_e,ze)|0,w=Math.imul(_e,qe),b=b+Math.imul(Je,We)|0,c=c+Math.imul(Je,He)|0,c=c+Math.imul(Ye,We)|0,w=w+Math.imul(Ye,He)|0,b=b+Math.imul(Ee,$e)|0,c=c+Math.imul(Ee,Ge)|0,c=c+Math.imul(Ze,$e)|0,w=w+Math.imul(Ze,Ge)|0;var sn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(sn>>>26)|0,sn&=67108863,b=Math.imul(Ie,We),c=Math.imul(Ie,He),c=c+Math.imul(_e,We)|0,w=Math.imul(_e,He),b=b+Math.imul(Je,$e)|0,c=c+Math.imul(Je,Ge)|0,c=c+Math.imul(Ye,$e)|0,w=w+Math.imul(Ye,Ge)|0;var vo=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(vo>>>26)|0,vo&=67108863,b=Math.imul(Ie,$e),c=Math.imul(Ie,Ge),c=c+Math.imul(_e,$e)|0,w=Math.imul(_e,Ge);var bo=(E+b|0)+((c&8191)<<13)|0;return E=(w+(c>>>13)|0)+(bo>>>26)|0,bo&=67108863,S[0]=zr,S[1]=qr,S[2]=Wr,S[3]=Hr,S[4]=$r,S[5]=Gr,S[6]=Zr,S[7]=Jr,S[8]=Yr,S[9]=Qr,S[10]=Xr,S[11]=en,S[12]=tn,S[13]=rn,S[14]=nn,S[15]=on,S[16]=sn,S[17]=vo,S[18]=bo,E!==0&&(S[19]=E,g.length++),g},"comb10MulTo");Math.imul||(C=O);function R(x,s,u){u.negative=s.negative^x.negative,u.length=x.length+s.length;for(var g=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=g&67108863,b=Math.min(v,s.length-1),c=Math.max(0,v-x.length+1);c<=b;c++){var w=v-c,D=x.words[w]|0,L=s.words[c]|0,W=D*L,Y=W&67108863;S=S+(W/67108864|0)|0,Y=Y+E|0,E=Y&67108863,S=S+(Y>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,g=S,S=y}return g!==0?u.words[v]=g:u.length--,u.strip()}i(R,"bigMulTo");function V(x,s,u){var g=new H;return g.mulp(x,s,u)}i(V,"jumboMulTo"),o.prototype.mulTo=i(function(s,u){var g,y=this.length+s.length;return this.length===10&&s.length===10?g=C(this,s,u):y<63?g=O(this,s,u):y<1024?g=R(this,s,u):g=V(this,s,u),g},"mulTo");function H(x,s){this.x=x,this.y=s}i(H,"FFTM"),H.prototype.makeRBT=i(function(s){for(var u=new Array(s),g=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,g,s);return u},"makeRBT"),H.prototype.revBin=i(function(s,u,g){if(s===0||s===g-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),H.prototype.permute=i(function(s,u,g,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=g[s[E]]},"permute"),H.prototype.transform=i(function(s,u,g,y,v,S){this.permute(S,s,u,g,y,v);for(var E=1;E<v;E<<=1)for(var b=E<<1,c=Math.cos(2*Math.PI/b),w=Math.sin(2*Math.PI/b),D=0;D<v;D+=b)for(var L=c,W=w,Y=0;Y<E;Y++){var ie=g[D+Y],le=y[D+Y],ut=g[D+Y+E],de=y[D+Y+E],K=L*ut-W*de;de=L*de+W*ut,ut=K,g[D+Y]=ie+ut,y[D+Y]=le+de,g[D+Y+E]=ie-ut,y[D+Y+E]=le-de,Y!==b&&(K=c*L-w*W,W=c*W+w*L,L=K)}},"transform"),H.prototype.guessLen13b=i(function(s,u){var g=Math.max(u,s)|1,y=g&1,v=0;for(g=g/2|0;g;g=g>>>1)v++;return 1<<v+1+y},"guessLen13b"),H.prototype.conjugate=i(function(s,u,g){if(!(g<=1))for(var y=0;y<g/2;y++){var v=s[y];s[y]=s[g-y-1],s[g-y-1]=v,v=u[y],u[y]=-u[g-y-1],u[g-y-1]=-v}},"conjugate"),H.prototype.normalize13b=i(function(s,u){for(var g=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+g;s[y]=v&67108863,v<67108864?g=0:g=v/67108864|0}return s},"normalize13b"),H.prototype.convert13b=i(function(s,u,g,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),g[2*S]=v&8191,v=v>>>13,g[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)g[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),H.prototype.stub=i(function(s){for(var u=new Array(s),g=0;g<s;g++)u[g]=0;return u},"stub"),H.prototype.mulp=i(function(s,u,g){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),b=new Array(y),c=new Array(y),w=new Array(y),D=new Array(y),L=new Array(y),W=g.words;W.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,w,y),this.transform(E,S,b,c,y,v),this.transform(w,S,D,L,y,v);for(var Y=0;Y<y;Y++){var ie=b[Y]*D[Y]-c[Y]*L[Y];c[Y]=b[Y]*L[Y]+c[Y]*D[Y],b[Y]=ie}return this.conjugate(b,c,y),this.transform(b,c,W,S,y,v),this.conjugate(W,S,y),this.normalize13b(W,y),g.negative=s.negative^u.negative,g.length=s.length+u.length,g.strip()},"mulp"),o.prototype.mul=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),V(this,s,u)},"mulf"),o.prototype.imul=i(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=i(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,g=0;g<this.length;g++){var y=(this.words[g]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[g]=v&67108863}return u!==0&&(this.words[g]=u,this.length++),this},"imuln"),o.prototype.muln=i(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=i(function(){return this.mul(this)},"sqr"),o.prototype.isqr=i(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=i(function(s){var u=k(s);if(u.length===0)return new o(1);for(var g=this,y=0;y<u.length&&u[y]===0;y++,g=g.sqr());if(++y<u.length)for(var v=g.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(g=g.mul(v));return g},"pow"),o.prototype.iushln=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,b=(this.words[v]|0)-E<<u;this.words[v]=b|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(g!==0){for(v=this.length-1;v>=0;v--)this.words[v+g]=this.words[v];for(v=0;v<g;v++)this.words[v]=0;this.length+=g}return this.strip()},"iushln"),o.prototype.ishln=i(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=i(function(s,u,g){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,b=g;if(y-=S,y=Math.max(0,y),b){for(var c=0;c<S;c++)b.words[c]=this.words[c];b.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=w<<26-v|D>>>v,w=D&E}return b&&w!==0&&(b.words[b.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=i(function(s,u,g){return r(this.negative===0),this.iushrn(s,u,g)},"ishrn"),o.prototype.shln=i(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=i(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=i(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=i(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26,y=1<<u;if(this.length<=g)return!1;var v=this.words[g];return!!(v&y)},"testn"),o.prototype.imaskn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,g=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(u!==0&&g++,this.length=Math.min(g,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=i(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=i(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=i(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=i(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=i(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=i(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=i(function(){return this.negative=0,this},"iabs"),o.prototype.abs=i(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=i(function(s,u,g){var y=s.length+g,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+g]|0)+E;var b=(s.words[v]|0)*u;S-=b&67108863,E=(S>>26)-(b/67108864|0),this.words[v+g]=S&67108863}for(;v<this.length-g;v++)S=(this.words[v+g]|0)+E,E=S>>26,this.words[v+g]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=i(function(s,u){var g=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);g=26-E,g!==0&&(v=v.ushln(g),y.iushln(g),S=v.words[v.length-1]|0);var b=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=b+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var D=y.clone()._ishlnsubmul(v,1,b);D.negative===0&&(y=D,c&&(c.words[b]=1));for(var L=b-1;L>=0;L--){var W=(y.words[v.length+L]|0)*67108864+(y.words[v.length+L-1]|0);for(W=Math.min(W/S|0,67108863),y._ishlnsubmul(v,W,L);y.negative!==0;)W--,y.negative=0,y._ishlnsubmul(v,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=W)}return c&&c.strip(),y.strip(),u!=="div"&&g!==0&&y.iushrn(g),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=i(function(s,u,g){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),g&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),g&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=i(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=i(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=i(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=i(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var g=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=g.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=i(function(s){r(s<=67108863);for(var u=(1<<26)%s,g=0,y=this.length-1;y>=0;y--)g=(u*g+(this.words[y]|0))%s;return g},"modn"),o.prototype.idivn=i(function(s){r(s<=67108863);for(var u=0,g=this.length-1;g>=0;g--){var y=(this.words[g]|0)+u*67108864;this.words[g]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=i(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,g=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),b=0;u.isEven()&&g.isEven();)u.iushrn(1),g.iushrn(1),++b;for(var c=g.clone(),w=u.clone();!u.isZero();){for(var D=0,L=1;!(u.words[0]&L)&&D<26;++D,L<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var W=0,Y=1;!(g.words[0]&Y)&&W<26;++W,Y<<=1);if(W>0)for(g.iushrn(W);W-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(w)),S.iushrn(1),E.iushrn(1);u.cmp(g)>=0?(u.isub(g),y.isub(S),v.isub(E)):(g.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:g.iushln(b)}},"egcd"),o.prototype._invmp=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,g=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=g.clone();u.cmpn(1)>0&&g.cmpn(1)>0;){for(var E=0,b=1;!(u.words[0]&b)&&E<26;++E,b<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,w=1;!(g.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(g.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(g)>=0?(u.isub(g),y.isub(v)):(g.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=i(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),g=s.clone();u.negative=0,g.negative=0;for(var y=0;u.isEven()&&g.isEven();y++)u.iushrn(1),g.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;g.isEven();)g.iushrn(1);var v=u.cmp(g);if(v<0){var S=u;u=g,g=S}else if(v===0||g.cmpn(1)===0)break;u.isub(g)}while(!0);return g.iushln(y)},"gcd"),o.prototype.invm=i(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=i(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=i(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=i(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=i(function(s){r(typeof s=="number");var u=s%26,g=(s-u)/26,y=1<<u;if(this.length<=g)return this._expand(g+1),this.words[g]|=y,this;for(var v=y,S=g;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=i(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=i(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var g;if(this.length>1)g=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;g=y===s?0:y<s?-1:1}return this.negative!==0?-g|0:g},"cmpn"),o.prototype.cmp=i(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=i(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,g=this.length-1;g>=0;g--){var y=this.words[g]|0,v=s.words[g]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=i(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=i(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=i(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=i(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=i(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=i(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=i(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=i(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=i(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=i(function(s){return this.cmp(s)===0},"eq"),o.red=i(function(s){return new Z(s)},"red"),o.prototype.toRed=i(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=i(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=i(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=i(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=i(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=i(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=i(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=i(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=i(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=i(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=i(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=i(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=i(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=i(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=i(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var X={k256:null,p224:null,p192:null,p25519:null};function z(x,s){this.name=x,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i(z,"MPrime"),z.prototype._tmp=i(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),z.prototype.ireduce=i(function(s){var u=s,g;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),g=u.bitLength();while(g>this.n);var y=g<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),z.prototype.split=i(function(s,u){s.iushrn(this.n,0,u)},"split"),z.prototype.imulK=i(function(s){return s.imul(this.k)},"imulK");function ce(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(ce,"K256"),n(ce,z),ce.prototype.split=i(function(s,u){for(var g=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&g,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&g)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=i(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,g=0;g<s.length;g++){var y=s.words[g]|0;u+=y*977,s.words[g]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function se(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(se,"P224"),n(se,z);function ne(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ne,"P192"),n(ne,z);function ae(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ae,"P25519"),n(ae,z),ae.prototype.imulK=i(function(s){for(var u=0,g=0;g<s.length;g++){var y=(s.words[g]|0)*19+u,v=y&67108863;y>>>=26,s.words[g]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=i(function(s){if(X[s])return X[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new se;else if(s==="p192")u=new ne;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return X[s]=u,u},"prime");function Z(x){if(typeof x=="string"){var s=o._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}i(Z,"Red"),Z.prototype._verify1=i(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),Z.prototype._verify2=i(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),Z.prototype.imod=i(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),Z.prototype.neg=i(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),Z.prototype.add=i(function(s,u){this._verify2(s,u);var g=s.add(u);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},"add"),Z.prototype.iadd=i(function(s,u){this._verify2(s,u);var g=s.iadd(u);return g.cmp(this.m)>=0&&g.isub(this.m),g},"iadd"),Z.prototype.sub=i(function(s,u){this._verify2(s,u);var g=s.sub(u);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},"sub"),Z.prototype.isub=i(function(s,u){this._verify2(s,u);var g=s.isub(u);return g.cmpn(0)<0&&g.iadd(this.m),g},"isub"),Z.prototype.shl=i(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),Z.prototype.imul=i(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),Z.prototype.mul=i(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),Z.prototype.isqr=i(function(s){return this.imul(s,s.clone())},"isqr"),Z.prototype.sqr=i(function(s){return this.mul(s,s)},"sqr"),Z.prototype.sqrt=i(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var g=this.m.add(new o(1)).iushrn(2);return this.pow(s,g)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,b).cmp(E)!==0;)c.redIAdd(E);for(var w=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),W=v;L.cmp(S)!==0;){for(var Y=L,ie=0;Y.cmp(S)!==0;ie++)Y=Y.redSqr();r(ie<W);var le=this.pow(w,new o(1).iushln(W-ie-1));D=D.redMul(le),w=le.redSqr(),L=L.redMul(w),W=ie}return D},"sqrt"),Z.prototype.invm=i(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),Z.prototype.pow=i(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var g=4,y=new Array(1<<g);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,b=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var w=u.words[v],D=c-1;D>=0;D--){var L=w>>D&1;if(S!==y[0]&&(S=this.sqr(S)),L===0&&E===0){b=0;continue}E<<=1,E|=L,b++,!(b!==g&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),b=0,E=0)}c=26}return S},"pow"),Z.prototype.convertTo=i(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),Z.prototype.convertFrom=i(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=i(function(s){return new me(s)},"mont");function me(x){Z.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(me,"Mont"),n(me,Z),me.prototype.convertTo=i(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),me.prototype.convertFrom=i(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),me.prototype.imul=i(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var g=s.imul(u),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),me.prototype.mul=i(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var g=s.mul(u),y=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),me.prototype.invm=i(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Lp>"u"||Lp,_w)});var Ow=he((IZ,Kw)=>{h();p();var Fn=$a(),dr=kw(),gt=i(function(){},"ABI");function Kl(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}i(Kl,"elementaryName");gt.eventID=function(e,t){var r=e+"("+t.map(Kl).join(",")+")";return Fn.keccak256(Buffer.from(r))};gt.methodID=function(e,t){return gt.eventID(e,t).slice(0,4)};function io(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}i(io,"parseTypeN");function Fp(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}i(Fp,"parseTypeNxM");function Ja(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}i(Ja,"parseTypeArray");function jo(e){var t=typeof e;if(t==="string")return Fn.isHexPrefixed(e)?new dr(Fn.stripHexPrefix(e),16):new dr(e,10);if(t==="number")return new dr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}i(jo,"parseNumber");function Bw(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}i(Bw,"parseSignature");function Ln(e,t){var r,n,o,a;if(e==="address")return Ln("uint160",jo(t));if(e==="bool")return Ln("uint8",t?1:0);if(e==="string")return Ln("bytes",Buffer.from(t,"utf8"));if(Za(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Ja(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);o=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)o.push(Ln(e,t[a]));if(r==="dynamic"){var l=Ln("uint256",t.length);o.unshift(l)}return Buffer.concat(o)}else{if(e==="bytes")return t=Buffer.from(t),o=Buffer.concat([Ln("uint256",t.length),t]),t.length%32!==0&&(o=Buffer.concat([o,Fn.zeros(32-t.length%32)])),o;if(e.startsWith("bytes")){if(r=io(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Fn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=io(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=jo(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=io(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=jo(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=Fp(e),n=jo(t),n<0)throw new Error("Supplied ufixed is negative");return Ln("uint256",n.mul(new dr(2).pow(new dr(r[1]))))}else if(e.startsWith("fixed"))return r=Fp(e),Ln("int256",jo(t).mul(new dr(2).pow(new dr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}i(Ln,"encodeSingle");function bn(e,t,r){typeof e=="string"&&(e=jp(e));var n,o,a,l;if(e.name==="address")return bn(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return bn(e.rawType,t,r).toString()===new dr(1).toString();if(e.name==="string"){var f=bn(e.rawType,t,r);return Buffer.from(f,"utf8").toString()}else if(e.isArray){for(a=[],n=e.size,e.size==="dynamic"&&(r=bn("uint256",t,r).toNumber(),n=bn("uint256",t,r).toNumber(),r=r+32),l=0;l<n;l++){var m=bn(e.subArray,t,r);a.push(m),r+=e.subArray.memoryUsage}return a}else{if(e.name==="bytes")return r=bn("uint256",t,r).toNumber(),n=bn("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(o=new dr(t.slice(r,r+32),16,"be"),o.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("int")){if(o=new dr(t.slice(r,r+32),16,"be").fromTwos(256),o.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("ufixed")){if(n=new dr(2).pow(new dr(e.size[1])),o=bn("uint256",t,r),!o.mod(n).isZero())throw new Error("Decimals not supported yet");return o.div(n)}else if(e.name.startsWith("fixed")){if(n=new dr(2).pow(new dr(e.size[1])),o=bn("int256",t,r),!o.mod(n).isZero())throw new Error("Decimals not supported yet");return o.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}i(bn,"decodeSingle");function jp(e){var t,r;if(Za(e)){t=Ja(e);var n=e.slice(0,e.lastIndexOf("["));return n=jp(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var o;switch(e){case"address":o="uint160";break;case"bool":o="uint8";break;case"string":o="bytes";break}if(r={rawType:o,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=io(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=Fp(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}i(jp,"parseType");function _I(e){return e==="string"||e==="bytes"||Ja(e)==="dynamic"}i(_I,"isDynamic");function Za(e){return e.lastIndexOf("]")===e.length-1}i(Za,"isArray");gt.rawEncode=function(e,t){var r=[],n=[],o=0;e.forEach(function(A){if(Za(A)){var T=Ja(A);T!=="dynamic"?o+=32*T:o+=32}else o+=32});for(var a=0;a<e.length;a++){var l=Kl(e[a]),f=t[a],m=Ln(l,f);_I(l)?(r.push(Ln("uint256",o)),n.push(m),o+=m.length):r.push(m)}return Buffer.concat(r.concat(n))};gt.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,o=0;o<e.length;o++){var a=Kl(e[o]),l=jp(a,t,n),f=bn(l,t,n);n+=l.memoryUsage,r.push(f)}return r};gt.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=Bw(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([gt.methodID(r.method,r.args),gt.rawEncode(r.args,t)])};gt.simpleDecode=function(e,t){var r=Bw(e);if(!r.retargs)throw new Error("No return values in method");return gt.rawDecode(r.retargs,t)};function Pw(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}i(Pw,"stringify");gt.stringify=function(e,t){var r=[];for(var n in e){var o=e[n],a=t[n];/^[^\[]+\[.*\]$/.test(o)?a=a.map(function(l){return Pw(o,l)}).join(", "):a=Pw(o,a),r.push(a)}return r};gt.solidityHexValue=function(e,t,r){var n,o;if(Za(e)){var a=e.replace(/\[.*?\]/,"");if(!Za(a)){var l=Ja(e);if(l!=="dynamic"&&l!==0&&t.length>l)throw new Error("Elements exceed array size: "+l)}var f=t.map(function(T){return gt.solidityHexValue(a,T,256)});return Buffer.concat(f)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var m=Array(r/4).join("0");return Buffer.from(t?m+"1":m+"0","hex")}else if(e==="address"){var A=20;return r&&(A=r/8),Fn.setLengthLeft(t,A)}else if(e.startsWith("bytes")){if(n=io(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Fn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=io(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(o=jo(t),o.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+o.bitLength());return r=r||n,o.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=io(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(o=jo(t),o.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+o.bitLength());return r=r||n,o.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};gt.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var o=Kl(e[n]),a=t[n];r.push(gt.solidityHexValue(o,a,null))}return Buffer.concat(r)};gt.soliditySHA3=function(e,t){return Fn.keccak256(gt.solidityPack(e,t))};gt.soliditySHA256=function(e,t){return Fn.sha256(gt.solidityPack(e,t))};gt.solidityRIPEMD160=function(e,t){return Fn.ripemd160(gt.solidityPack(e,t),!0)};function kI(e){return e>="0"&&e<="9"}i(kI,"isNumeric");gt.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var o="bytes",a=r+1;a<e.length&&kI(e[a]);)o+=e[a]-"0",a++;r=a-1,t.push(o)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};gt.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+io(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};Kw.exports=gt});var Rw=he((BZ,Cw)=>{h();p();Cw.exports=Ow()});var Lw=he(Vt=>{"use strict";h();p();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.recoverTypedSignature=Vt.signTypedData=Vt.typedSignatureHash=Vt.TypedDataUtils=Vt.TYPED_MESSAGE_SCHEMA=Vt.SignTypedDataVersion=void 0;var Lr=$a(),Ya=Rw(),zo=Ga(),er;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(er=Vt.SignTypedDataVersion||(Vt.SignTypedDataVersion={}));Vt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Zs(e,t){if(Object.keys(er).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}i(Zs,"validateVersion");function Uw(e,t,r,n,o){if(Zs(o,[er.V3,er.V4]),e[r]!==void 0)return["bytes32",o===er.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Lr.keccak(qp(r,n,e,o))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Lr.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",Lr.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(o===er.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),l=n.map(f=>Uw(e,t,a,f,o));return["bytes32",Lr.keccak(Ya.rawEncode(l.map(([f])=>f),l.map(([,f])=>f)))]}return[r,n]}i(Uw,"encodeField");function qp(e,t,r,n){Zs(n,[er.V3,er.V4]);let o=["bytes32"],a=[Dw(e,r)];for(let l of r[e]){if(n===er.V3&&t[l.name]===void 0)continue;let[f,m]=Uw(r,l.name,l.type,t[l.name],n);o.push(f),a.push(m)}return Ya.rawEncode(o,a)}i(qp,"encodeData");function Nw(e,t){let r="",n=Wp(e,t);n.delete(e);let o=[e,...Array.from(n).sort()];for(let a of o){if(!t[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${t[a].map(({name:f,type:m})=>`${m} ${f}`).join(",")})`}return r}i(Nw,"encodeType");function Wp(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])Wp(n.type,t,r);return r}i(Wp,"findTypeDependencies");function zp(e,t,r,n){return Zs(n,[er.V3,er.V4]),Lr.keccak(qp(e,t,r,n))}i(zp,"hashStruct");function Dw(e,t){return Lr.keccak(Nw(e,t))}i(Dw,"hashType");function Vw(e){let t={};for(let r in Vt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}i(Vw,"sanitizeData");function PI(e,t){Zs(t,[er.V3,er.V4]);let r=Vw(e),n=[Buffer.from("1901","hex")];return n.push(zp("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(zp(r.primaryType,r.message,r.types,t)),Lr.keccak(Buffer.concat(n))}i(PI,"eip712Hash");Vt.TypedDataUtils={encodeData:qp,encodeType:Nw,findTypeDependencies:Wp,hashStruct:zp,hashType:Dw,sanitizeData:Vw,eip712Hash:PI};function BI(e){let t=Hp(e);return Lr.bufferToHex(t)}i(BI,"typedSignatureHash");Vt.typedSignatureHash=BI;function Hp(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(a){return a.type!=="bytes"?a.value:zo.legacyToBuffer(a.value)}),n=e.map(function(a){return a.type}),o=e.map(function(a){if(!a.name)throw t;return`${a.type} ${a.name}`});return Ya.soliditySHA3(["bytes32","bytes32"],[Ya.soliditySHA3(new Array(e.length).fill("string"),o),Ya.soliditySHA3(n,r)])}i(Hp,"_typedSignatureHash");function KI({privateKey:e,data:t,version:r}){if(Zs(r),zo.isNullish(t))throw new Error("Missing data parameter");if(zo.isNullish(e))throw new Error("Missing private key parameter");let n=r===er.V1?Hp(t):Vt.TypedDataUtils.eip712Hash(t,r),o=Lr.ecsign(n,e);return zo.concatSig(Lr.toBuffer(o.v),o.r,o.s)}i(KI,"signTypedData");Vt.signTypedData=KI;function OI({data:e,signature:t,version:r}){if(Zs(r),zo.isNullish(e))throw new Error("Missing data parameter");if(zo.isNullish(t))throw new Error("Missing signature parameter");let n=r===er.V1?Hp(e):Vt.TypedDataUtils.eip712Hash(e,r),o=zo.recoverPublicKey(n,t),a=Lr.publicToAddress(o);return Lr.bufferToHex(a)}i(OI,"recoverTypedSignature");Vt.recoverTypedSignature=OI});var jw=he((Fw,Ol)=>{h();p();(function(e,t){"use strict";typeof Ol<"u"&&Ol.exports?Ol.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(Fw,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return i(t,"validateBase64"),e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,o=unescape(encodeURIComponent(r)),a=new Uint8Array(o.length);for(n=0;n<o.length;n++)a[n]=o.charCodeAt(n);return a},e.encodeUTF8=function(r){var n,o=[];for(n=0;n<r.length;n++)o.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,o=[],a=r.length;for(n=0;n<a;n++)o.push(String.fromCharCode(r[n]));return btoa(o.join(""))},e.decodeBase64=function(r){t(r);var n,o=atob(r),a=new Uint8Array(o.length);for(n=0;n<o.length;n++)a[n]=o.charCodeAt(n);return a}),e})});var $w=he(Lt=>{"use strict";h();p();var CI=Lt&&Lt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),RI=Lt&&Lt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zw=Lt&&Lt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&CI(t,e,r);return RI(t,e),t};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.getEncryptionPublicKey=Lt.decryptSafely=Lt.decrypt=Lt.encryptSafely=Lt.encrypt=void 0;var qo=zw(Ui()),wn=zw(jw()),jn=Ga();function qw({publicKey:e,data:t,version:r}){if(jn.isNullish(e))throw new Error("Missing publicKey parameter");if(jn.isNullish(t))throw new Error("Missing data parameter");if(jn.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=qo.box.keyPair(),o;try{o=wn.decodeBase64(e)}catch{throw new Error("Bad public key")}let a=wn.decodeUTF8(t),l=qo.randomBytes(qo.box.nonceLength),f=qo.box(a,l,o,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:wn.encodeBase64(l),ephemPublicKey:wn.encodeBase64(n.publicKey),ciphertext:wn.encodeBase64(f)}}default:throw new Error("Encryption type/version not supported")}}i(qw,"encrypt");Lt.encrypt=qw;function UI({publicKey:e,data:t,version:r}){if(jn.isNullish(e))throw new Error("Missing publicKey parameter");if(jn.isNullish(t))throw new Error("Missing data parameter");if(jn.isNullish(r))throw new Error("Missing version parameter");let n=2**11,o=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:t,padding:""},f=Buffer.byteLength(JSON.stringify(a),"utf-8")%n,m=0;f>0&&(m=n-f-o),a.padding="0".repeat(m);let A=JSON.stringify(a);return qw({publicKey:e,data:A,version:r})}i(UI,"encryptSafely");Lt.encryptSafely=UI;function Ww({encryptedData:e,privateKey:t}){if(jn.isNullish(e))throw new Error("Missing encryptedData parameter");if(jn.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=Hw(t),n=qo.box.keyPair.fromSecretKey(r).secretKey,o=wn.decodeBase64(e.nonce),a=wn.decodeBase64(e.ciphertext),l=wn.decodeBase64(e.ephemPublicKey),f=qo.box.open(a,o,l,n),m;try{m=wn.encodeUTF8(f)}catch{throw new Error("Decryption failed.")}if(m)return m;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}i(Ww,"decrypt");Lt.decrypt=Ww;function NI({encryptedData:e,privateKey:t}){if(jn.isNullish(e))throw new Error("Missing encryptedData parameter");if(jn.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(Ww({encryptedData:e,privateKey:t})).data}i(NI,"decryptSafely");Lt.decryptSafely=NI;function DI(e){let t=Hw(e),r=qo.box.keyPair.fromSecretKey(t).publicKey;return wn.encodeBase64(r)}i(DI,"getEncryptionPublicKey");Lt.getEncryptionPublicKey=DI;function Hw(e){let t=Buffer.from(e,"hex").toString("base64");return wn.decodeBase64(t)}i(Hw,"nacl_decodeHex")});var Gp=he(wr=>{"use strict";h();p();var VI=wr&&wr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$p=wr&&wr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&VI(t,e,r)};Object.defineProperty(wr,"__esModule",{value:!0});wr.normalize=wr.concatSig=void 0;$p(Iw(),wr);$p(Lw(),wr);$p($w(),wr);var Gw=Ga();Object.defineProperty(wr,"concatSig",{enumerable:!0,get:i(function(){return Gw.concatSig},"get")});Object.defineProperty(wr,"normalize",{enumerable:!0,get:i(function(){return Gw.normalize},"get")})});h();p();h();p();var us;(function(e){e.Image="image",e.Emoji="emoji",e.ReadOnlyDefault="read-only-default",e.Default="default"})(us||(us={}));var Dg=d.object({type:d.nativeEnum(us),imageUrl:d.string().optional(),unicode:d.string().optional()}),ls;(function(e){e.Ledger="ledger"})(ls||(ls={}));var fs;(function(e){e.BLE="ble"})(fs||(fs={}));var rS=d.object({version:d.literal(1),connectionType:d.nativeEnum(fs),deviceType:d.nativeEnum(ls),id:d.string().min(1),name:d.string().optional(),model:d.string().optional()}),nS=d.object({value:d.number(),timestamp:d.number()}),iS=d.object({name:d.string(),icon:Dg.optional(),connectedDevices:rS.array().optional()}),oS=d.object({balance:nS.optional()});var sS=100,aS={unicode:void 0,imageUrl:void 0,type:us.Default},cS={version:1,isDeveloperMode:!1};var ds=cn.Solana.Devnet,hs=cn.Ethereum.Sepolia,Wf=cn.Sui.Testnet;function pa(){return{version:1,setting:{[_.Solana]:ds,[_.EVM]:hs,[_.Sui]:Wf}}}i(pa,"getDefaultNetworkSetting");function Qt(e){return e.map(t=>un[t].defaultDerivationPathType)}i(Qt,"getDefaultDerivationPathTypesForAddressTypes");var uS={[ee.Bip44RootSolana]:ee.Bip44RootEthereum,[ee.Bip44ChangeSolana]:ee.Bip44Ethereum,[ee.Bip44Solana]:ee.Bip44EthereumSecondary,[ee.DeprecatedSolana]:ee.Bip44EthereumTertiary,[ee.Bip44RootEthereum]:null,[ee.Bip44Ethereum]:null,[ee.Bip44EthereumSecondary]:null,[ee.Bip44EthereumTertiary]:null,[ee.BitcoinTaproot]:null,[ee.BitcoinNativeSegwit]:null,[ee.BitcoinNestedSegwit]:null,[ee.BitcoinLegacy]:null,[ee.Bip44Sui]:null},hi={[ee.Bip44RootSolana]:-1,[ee.Bip44RootEthereum]:-1,[ee.BitcoinTaproot]:0,[ee.BitcoinNativeSegwit]:0,[ee.BitcoinNestedSegwit]:0,[ee.BitcoinLegacy]:0,[ee.Bip44ChangeSolana]:0,[ee.Bip44Ethereum]:0,[ee.Bip44Solana]:1,[ee.Bip44EthereumSecondary]:1,[ee.DeprecatedSolana]:2,[ee.Bip44EthereumTertiary]:2,[ee.Bip44Sui]:0},lS="https://help.phantom.com/hc/en-us/articles/4406563212819";var fS="https://help.phantom.com/hc/en-us/articles/21872962238355";h();p();var zg=ue(wc());h();p();h();p();var Vg=ue(wc()),Uc=ue(At());var Lg=(0,Uc.createContext)(null);function dS({children:e,vault:t}){return(0,Vg.jsx)(Lg.Provider,{value:t,children:e})}i(dS,"VaultProxyProvider");function yt(){let e=(0,Uc.useContext)(Lg);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}i(yt,"useVaultProxy");h();p();h();p();h();p();var Nc=i((e,t)=>{try{let r=ss(e,t);switch(r){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return un.getDisplayName(r);default:return}}catch(r){j.addBreadcrumb(F.Account,"Failed to get address badge",Q.Error,{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}},"getAddressBadge");var Fg={badge:i((e,t,r)=>t.filter(_c).length<=1?"":Nc(e,r)??"","badge"),showAddressTypeExplainer:i(e=>e.filter(_c).length>1,"showAddressTypeExplainer"),addressTooltipNetworkName:i((e,t,r)=>r.filter(_c).length>=2?Nc(e,t)??pe.getChainName(e):pe.getChainName(e),"addressTooltipNetworkName")};h();p();var jg={badge:i(()=>"Lite","badge")};var hS=new kc({[gr.Solana]:{},[gr.Ethereum]:{},[gr.Polygon]:{},[gr.Base]:{},[gr.Arbitrum]:{},[gr.Monad]:{},[gr.Bitcoin]:Fg,[gr.Sui]:{},[gr.Hypercore]:{},[gr.Hyperevm]:jg}),Li=Sg(hS);function pS({children:e}){let t=yt(),r=Li.supportedChains.map(o=>[o,Li.get(o)]),n=new kc(Object.fromEntries(r));return(0,zg.jsx)(Bg,{effects:{deriveAddresses:i(async()=>{await t.deriveAddresses()},"deriveAddresses")},registry:n,children:e})}i(pS,"AccountsChainDependencyProvider");h();p();var P;(function(e){e.Seed="seed",e.PrivateKey="privateKey",e.Ledger="ledger",e.SeedVault="seedVault",e.ReadOnly="readOnly",e.Seedless="seedless",e.KMSVault="kmsVault"})(P||(P={}));var mS=d.object({derivationIndex:d.number(),addresses:d.array(d.object({pathType:d.union([ng,ig]),value:d.string()})),publicKeys:d.array(d.object({pathType:rg,value:d.string()}))}),_n=class extends Error{static{i(this,"VaultFetchAccountInvalidIdentifier")}message="No account exists in storage for identifier"},Fi=class extends Error{static{i(this,"VaultFetchAccountUndefinedBitcoinAddressError")}message="No account exists in storage for identifier"},ji=class extends Error{static{i(this,"VaultExportSecretsInvalidAddressType")}message="Address type not found or incompatible with account"},ma=class extends Error{static{i(this,"VaultExportSecretsHardwareWallet")}message="Hardware wallet account does not have known secr*ts"},ga=class extends Error{static{i(this,"VaultExportSecretsReadOnlyAccount")}message="Read only account does not have known secr*ts"},ya=class extends Error{static{i(this,"VaultImportReadOnlyAccount")}message="Invalid configuration for read only account"},Ao=class extends Error{static{i(this,"VaultImportSeedDuplicate")}message="Seed already exists in storage"},fn=class extends Error{static{i(this,"VaultFetchSeedInvalidIdentifier")}message="No seed exists in storage for identifier"},va=class extends Error{static{i(this,"VaultImportSeedInvalidDerivationIndex")}message="The derivation index is missing or invalid"},ba=class extends Error{static{i(this,"VaultImportPrivateKeyDuplicate")}message="Private key already exists in storage"},pi=class extends Error{static{i(this,"VaultFetchPrivateKeyInvalidIdentifier")}message="No private key exists in storage for identifier"};var kn=class extends Error{static{i(this,"VaultImportAccountDuplicate")}message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},Dc=class extends Error{static{i(this,"VaultSeedlessAccountAlreadyExists")}message="Vault already stores a seedless account"},gS=d.union([d.literal("unonboarded"),d.literal("unable-to-load-accounts"),d.literal("storage-temporarily-inaccessible")]),yS=d.union([d.literal("invalid-identifier"),d.literal("fetch-integrity-storage-error"),d.literal("fetch-entropy-storage-error"),d.literal("fetch-pk-storage-error"),d.literal("invalid-entropy"),d.literal("invalid-entropy-bip-39"),d.literal("invalid-checksum-bits"),d.literal("invalid-entropy-bits"),d.literal("invalid-checksum"),d.literal("invalid-entropy-length-less-than-twelve"),d.literal("invalid-entropy-length-more-than-twenty-four"),d.literal("invalid-entropy-length-wrong-word"),d.literal("invalid-pk-address-type"),d.literal("invalid-pk-identifier"),d.literal("invalid-pk"),d.literal("internal-error")]),vS=d.literal("safely-onboarded"),bS=d.union([d.object({status:gS,isOnboarded:d.literal(!1),reonboardingNeeded:d.literal(!1)}),d.object({status:yS,isOnboarded:d.literal(!0),reonboardingNeeded:d.literal(!0)}),d.object({status:vS,isOnboarded:d.literal(!0),reonboardingNeeded:d.literal(!1)})]);h();p();var wa=i((e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`},"formatHashMedium");h();p();h();p();var wS=i(e=>e.includes(".")||e.includes("@")?!1:qm.safeParse(e).success||zm.safeParse(e).success||bg.safeParse(e).success||Wm.safeParse(e).success,"isAddress"),qg=i((e,t=5)=>wS(e)?wa(e,t):e,"formatIfNotHandle");var xS=i((e,t,r,n=4)=>{let o=t?t.name:r,a=qg(e,n);return o?`${o} (${a})`:a},"formatAddress");h();p();var AS=i(e=>`${e.substring(0,5)}...`,"formatAddressShort");h();p();var Wg=ue(wc()),Vc=ue(At());var Hg=(0,Vc.createContext)(null);function SS({children:e,authRepository:t}){return(0,Wg.jsx)(Hg.Provider,{value:t,children:e})}i(SS,"AuthProvider");function Pr(){let e=(0,Vc.useContext)(Hg);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}i(Pr,"useAuthRepository");function So(){return Pr().useUser()}i(So,"useUser");h();p();h();p();var Zf=ue(an());h();p();h();p();var ES="https://time.phantom.app/utc",MS=d.number().int().positive();async function Eo(){let e=await ps();return Math.floor(e/1e3)}i(Eo,"time");async function ps(){let e;try{let t=await dt.noBearer().get(ES);if(t.status!==200)throw new Error("Failed to fetch time from server");e=MS.parse(t.data)}catch{e=Date.now()}return e}i(ps,"timeMs");h();p();var xa="https://phantom.app",Aa="https://api.phantom.app/oauth2/auth",Lc={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},$g="/login/start",Gg="/oauth2/token";var Hf;(function(e){e.Apple="apple",e.Google="google"})(Hf||(Hf={}));var $f=Ni({minutes:60}),Gf=$f-Ni({minutes:15}),Mo="/v1/authentication-keys";var TS=60,IS=i(()=>Math.floor(Date.now()/1e3),"clientTime");async function ms(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await Eo():IS(),n={iss:xa,aud:Aa,nbf:r,exp:r+TS,iat:r};return{header:t,payload:n}}i(ms,"generateUnsignedClientJWT");function gs(e){let t=it(Zf.Buffer.from(JSON.stringify(e.header))),r=it(Zf.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}i(gs,"encodeSignedJwt");h();p();var Zg=d.object({alg:d.string(),type:d.string(),kid:d.string()}),Jg=d.object({sub:d.string(),iss:d.string(),aud:d.string(),nbf:d.number(),exp:d.number(),iat:d.number()}),Jf=d.object({header:Zg,payload:Jg,signature:d.string()}),Yg=d.object({alg:d.string(),type:d.string()}),Qg=d.object({iss:d.string(),aud:d.string(),nbf:d.number(),exp:d.number(),iat:d.number()}),Yf=d.object({header:Yg,payload:Qg}),Qf=d.object({id_token:d.string(),access_token:d.string(),refresh_token:d.string(),scope:d.string(),token_type:d.string(),expires_in:d.number().gte(0)}),_S=d.object({redirectTo:d.string()}),Xg=d.object({at_hash:d.string(),aud:d.array(d.string()),auth_time:d.number(),exp:d.number(),iat:d.number(),iss:d.string(),jti:d.string(),rat:d.number(),sid:d.string(),sub:d.string(),email:d.string().optional()}),Fc=d.object({authenticationKeys:d.array(d.object({createdAt:d.string().datetime().nullish().default(null),updatedAt:d.string().datetime().nullish().default(null),id:d.string().uuid(),publicKey:d.string(),userId:d.string().uuid()})).optional()}),mi;(function(e){e.User="user",e.UserID="userID",e.AccessToken="accessToken",e.Email="email",e.LoggedOut="loggedOut"})(mi||(mi={}));h();p();var To=ue(hd());h();p();var ws=ue(hd()),vy=ue(Ui());var by={generateRandom:i(e=>{let t=(0,vy.randomBytes)(e);return(0,ws.bufferToString)(t)},"generateRandom"),async deriveChallenge(e){let t=ln((0,ws.textEncodeLite)(e));return(0,ws.urlSafe)(t)}};h();p();var Kr=i(()=>{let e=ir();return e===Bt.Staging?ns.staging:e===Bt.Production?ns.prod:M.BASE_AUTH_ENDPOINT||ns.staging},"getAuthBaseEndpoint"),pd=i(()=>`${Kr()}${$g}`,"getAuthLoginEndpoint"),eu=i(()=>`${Kr()}${Gg}`,"getAuthTokenEndpoint");var wy=new To.BasicQueryStringUtils;async function tu(e,t){let{url:r,codeVerifier:n}=await S2(e.getClientID(),e.redirectURL,t),o=t.type==="email",a=await e.fetchAuthorizationCode(e.redirectURL,r,o);return xy({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:eu(),code:a,codeVerifier:n})}i(tu,"authenticate");async function S2(e,t,r){let n=pd(),o,a=["openid","offline_access","user","incognito","seedless"],l;switch(r.type){case"key":{o={type:"key",jwt:gs(r.clientJWT)};break}case"email":{o={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},l=r.prompt,a.push("email");break}case"session":{o={type:"session",existingAccessToken:r.existingAccessToken};break}}let m=await new To.AuthorizationRequest({client_id:e,redirect_uri:t,scope:a.join(" "),response_type:"code"},by).toJson(),A;switch(o.type){case"key":A=`jwt:${it(Buffer.from(o.jwt,"utf8"))}`;break;case"email":A=`sso:${o.provider}`,o.existingAccessToken&&(A=`${A}:${o.existingAccessToken}`);break;case"session":A=`session:${o.existingAccessToken}`;break}let T={redirect_uri:m.redirect_uri,client_id:m.client_id,response_type:m.response_type,state:m.state??"",scope:m.scope,login_hint:A};l&&(T.prompt=l);let I=m.extras?.code_challenge,k=m.extras?.code_challenge_method,O=m.internal?.code_verifier;if(I&&k&&(T.code_challenge=I,T.code_challenge_method=k),!I||!k||!O)throw new Error("Missing code challenge or code verifier for PKCE.");let C=wy.stringify(T);return{url:`${n}?${C}`,codeVerifier:O}}i(S2,"createAuthorizationCodeRequest");async function xy(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:o}=e,a;t==="authorization_code"?a=new To.TokenRequest({client_id:n,redirect_uri:o,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):a=new To.TokenRequest({client_id:n,redirect_uri:o,grant_type:t,refresh_token:e.refreshToken});let l=await dt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(Hm()).noBearer().post(r,wy.stringify(a.toStringMap()));E2(l,t);let f=Qf.safeParse(l.data);if(!f.success)throw new Error("Invalid OAuth2Token response.");let{data:m}=f,A=await Eo();return{idToken:m.id_token,accessToken:m.access_token,refreshToken:m.refresh_token,scope:m.scope,tokenType:m.token_type,expiresAt:(A+m.expires_in)*1e3}}i(xy,"performTokenRequest");async function ru(e,t){return xy({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:eu(),refreshToken:t})}i(ru,"refresh");function E2(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}i(E2,"handleBadRequest");h();p();h();p();h();p();var Ea=class{static{i(this,"BaseEventEmitter")}subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(o=>{o(...r)})}};var nu=class extends Ea{static{i(this,"AuthEventEmitter")}emit(t){t&&(this.emitEvent(mi.User,t),this.emitEvent(mi.UserID,t.userID),this.emitEvent(mi.AccessToken,t.accessToken),t.email&&this.emitEvent(mi.Email,t.email))}emitLoggedOut(){this.emitEvent(mi.LoggedOut)}};h();p();h();p();function yi(e,t="expected value not found"){if(e==null)throw new Error(t);return e}i(yi,"expect");function Ay(e,t="expected value not found"){if(!e)throw new Error(t)}i(Ay,"assert");var iu=i(async(e,t)=>{let r=Kr(),n=yi(e.signer,"Signer is required for key-based auth."),o=await n.getAuthenticationPublicKey(t),a=await ms(e.isServerTimeEnabled()),l=await n.sign(a,t),f=await dt.noBearer().get(`${r}${Mo}`,{params:{token:gs(l)}});if(!is(f))throw new Error(`Failed to get authentication keys: response is not okay (status ${f.status})`);let{data:m}=f;return(Fc.parse(m).authenticationKeys??[]).some(T=>T.publicKey===o)},"isExistingAuthFactor");h();p();h();p();var Sy=i(async e=>{try{let t=await dt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${Kr()}/userinfo`);return is(t)}catch{return!1}},"isValidToken");h();p();h();p();var Ma=".phantom.auth",ou=`${Ma}.tokens`,su=`${Ma}.tokens.staging`,Ta=`${Ma}.custom-environments`,Ey=`${Ma}.authentication-factors`,M2=`${Ma}.email-provider`;async function au(e){let t=ir();return t===Bt.Production?e.get(ou):t===Bt.Staging?e.get(su):(await e.get(Ta))?.[t]??null}i(au,"getAuthTokens");async function xs(e,t){let r=ir();r===Bt.Production?await e.set(ou,t):r===Bt.Staging?await e.set(su,t):await e.update(Ta,n=>({...n,[r]:t}))}i(xs,"setAuthTokens");async function My(e){let t=ir();if(t===Bt.Production)await e.remove(ou);else if(t===Bt.Staging)await e.remove(su);else{let r=!1;await e.update(Ta,n=>{if(!n||!(t in n))return n??null;let o={...n};return delete o[t],Object.keys(o).length===0&&(r=!0),o}),r&&await e.remove(Ta)}}i(My,"clearAuthTokens");h();p();var Io=i(e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=sr(t[1]).toString("utf-8"),o=JSON.parse(n);r=Xg.parse(o)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},"authTokensToUser");h();p();var Ty="@phantom/auth",qt={user:["auth",`${Ty}:user`],authFactors:["auth",`${Ty}:user-auth-factors`]};h();p();var cu=i(async(e,t,r)=>{let{storage:n,authConfig:o}=e,a,{type:l}=r;switch(l){case"key":{let m=yi(e.signer,"Signer is required for key-based auth."),A=await ms(e.isServerTimeEnabled()),T=await m.sign(A,r.secretIdentifier);a=await tu(o,{type:l,clientJWT:T});break}case"email":{a=await tu(o,{type:l,prompt:r.prompt,provider:r.provider});break}case"session":{a=await tu(o,{type:l,existingAccessToken:r.accessToken});break}}j.addBreadcrumb(F.Auth,"\u2705 Login succeeded!",Q.Debug),await xs(n,a);let f=Io(a);return await Promise.all([e.queryClient.setQueryData([...qt.user,{skipAutoLogin:!0}],f),e.queryClient.setQueryData([...qt.user,{skipAutoLogin:!1}],f)]),t.emit(f),f},"logIn");var Iy={queryKey:qt.user,gcTime:Gf,staleTime:Ni({minutes:5})},As=i(async(e,t,r)=>{let n=r?.skipAutoLogin??!1;return e.queryClient.fetchQuery({...Iy,queryKey:[...qt.user,{skipAutoLogin:n}],queryFn:i(async()=>ky(e,t,n),"queryFn")})},"getUser"),_y=i((e,t)=>Yt({...Iy,queryKey:[...qt.user,{skipAutoLogin:!1}],queryFn:i(async()=>{let r=await ky(e,t,!1);if(!r)throw new Error("Unable to log in.");return r},"queryFn"),retryOnMount:!1}),"useUser"),ky=i(async(e,t,r)=>e.runExclusive(async()=>{let n=await T2(e);if(n)return t.emit(n),n;if(r||!e.signer)return null;let o=await I2(e,t);return t.emit(o),o}),"queryFn");async function T2({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r,isServerTimeEnabled:n}){let o=await au(e);if(!o)return null;let a=n()?await Eo():Math.floor(Date.now()/1e3),l=Math.floor(o.expiresAt/1e3),f=($f-Gf)/1e3,m=l-f,A=a<m;if(A&&!r()&&(A=await Sy(o.accessToken)),A)return j.addBreadcrumb(F.Auth,`\u267B\uFE0F Access token still valid => Expires at ${o.expiresAt}`,Q.Debug),Io(o);if(o.refreshToken)try{let T=await ru(t,o.refreshToken);return j.addBreadcrumb(F.Auth,`\u2705 Refreshed auth token => Expires at ${T.expiresAt}`,Q.Debug),await xs(e,T),Io(T)}catch(T){return j.addBreadcrumb("Error refreshing auth token.",F.Auth,Q.Error),j.captureError(T,F.Auth),null}return null}i(T2,"getOrRefreshUser");async function I2(e,t){let n=await yi(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(n.length===0)return j.addBreadcrumb(F.Auth,"Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.",Q.Info),null;let o;try{for(let a of n)if(await iu(e,a)){o=a;break}}catch(a){throw j.addBreadcrumb(F.Auth,"Unable to log in with key-based auth. Error checking auth factors.",Q.Error),a}o||(o=n[0],j.addBreadcrumb(F.Auth,"No auth factor found, creating new user with first secret identifier.",Q.Debug));try{return await cu(e,t,{type:"key",secretIdentifier:o})}catch(a){throw j.addBreadcrumb(F.Auth,"Unable to log in with key-based auth. Error performing auth.",Q.Error),a}}i(I2,"autoLoginWithKeyBasedAuth");h();p();var md=i(e=>{e.removeQueries({queryKey:qt.user})},"removeUser"),gd=i(async e=>{await e.resetQueries({queryKey:qt.user})},"resetUser"),_o=i(async e=>{await e.invalidateQueries({queryKey:qt.user})},"invalidateUser"),vi=i(async e=>{await e.invalidateQueries({queryKey:qt.authFactors})},"invalidateUserAuthFactors");var _2=i(e=>{let t=new nu,r={getUser:i(async n=>As(e,t,n),"getUser"),useUser:i(()=>_y(e,t),"useUser"),refreshTokens:i(async()=>k2(e),"refreshTokens"),logIn:i(async n=>cu(e,t,n),"logIn"),isExistingAuthFactor:i(async n=>iu(e,n),"isExistingAuthFactor"),getAuthenticationKeys:i(async()=>P2(e,t),"getAuthenticationKeys"),getLocalAuthenticationPublicKeys:i(async()=>K2(e),"getLocalAuthenticationPublicKeys"),addAuthFactor:i(async n=>O2(e,t,n),"addAuthFactor"),deleteAuthFactor:i(async n=>C2(e,t,n),"deleteAuthFactor"),deleteAllAuthFactors:i(async()=>R2(e,t),"deleteAllAuthFactors"),subscribe:i((n,o)=>t.subscribe(n,o),"subscribe"),logOut:i(async()=>U2(e,t),"logOut")};return $m(async(n={})=>{let{refresh:o=!1,skipAutoLogin:a=!1}=n;return o&&await _o(e.queryClient),(await r.getUser({skipAutoLogin:a}))?.accessToken??null}),r},"createAuthRepository"),k2=i(async e=>{let t=await au(e.storage);if(!t)return!1;let r=await ru(e.authConfig,t.refreshToken);await xs(e.storage,r);let n=Io(r);return await Promise.all([e.queryClient.setQueryData([...qt.user,{skipAutoLogin:!0}],n),e.queryClient.setQueryData([...qt.user,{skipAutoLogin:!1}],n)]),!0},"refreshTokens"),P2=i(async(e,t)=>({authenticationPublicKeys:(await B2(e,t)).map(n=>n.publicKey)}),"getAuthenticationKeys"),B2=i(async(e,t)=>{let r=Kr(),n=await As(e,t);if(!n)throw new Error("User not authenticated.");let{data:o}=await dt.bearer(n.accessToken).get(`${r}${Mo}`),a=Fc.safeParse(o);if(!a.success)throw new Error("Unable to parse auth factors response.");return a.data.authenticationKeys??[]},"getAuthenticationKeysInternal"),K2=i(async e=>{try{let t=yi(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let o of r)n[o]=await t.getAuthenticationPublicKey(o);return n}catch{return{}}},"getLocalAuthenticationPublicKeys"),O2=i(async(e,t,{secretIdentifier:r})=>{let n=Kr(),o=yi(e.signer,"Signer is required for key-based auth."),a=await As(e,t);if(!a)throw new Error("User not authenticated.");j.addBreadcrumb(F.Auth,`Adding auth factor: ${r}`,Q.Info);let l=await ms(e.isServerTimeEnabled()),f=await o.sign(l,r);await dt.bearer(a.accessToken).post(`${n}${Mo}`,{jwt:gs(f)})},"addAuthFactor"),C2=i(async(e,t,{authenticationPublicKey:r})=>{let n=Kr(),o=await As(e,t);if(!o)throw new Error("User not authenticated.");j.addBreadcrumb(F.Auth,`Deleting auth factor: ${r}`,Q.Info),await dt.bearer(o.accessToken).delete(`${n}${Mo}/${encodeURIComponent(r)}`)},"deleteAuthFactor"),R2=i(async(e,t)=>{let r=Kr(),{storage:n}=e,o=await As(e,t);if(!o)throw new Error("User not authenticated.");j.addBreadcrumb(F.Auth,"Deleting all auth factors",Q.Info),await dt.bearer(o.accessToken).delete(`${r}${Mo}`),await n.remove(Ey)},"deleteAllAuthFactors"),U2=i(async({storage:e},t)=>{await My(e),t.emitLoggedOut()},"logOut");h();p();var N2=i((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n},"parseAuthCode");h();p();var D2=i((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),o=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${o}`,{cause:n});return!1},"redirectHasErrorParam");h();p();var V2=i(()=>ir()===Bt.Production?Lc.prod:Lc.staging,"getAuthClientID");h();p();var L2=i(()=>{let e=Pr(),{data:t}=So(),r=qt.authFactors;return Yt({queryKey:r,queryFn:i(async()=>{let o=await e.getLocalAuthenticationPublicKeys();if(Object.keys(o).length===0)return{};let a=[];try{if(t){let{authenticationPublicKeys:f=[]}=await e.getAuthenticationKeys();a=f}}catch(f){t&&f instanceof Error&&j.addBreadcrumb(F.Auth,`Unable to fetch existing AuthFactors for user (${t?.userID}): ${f.message}`,Q.Error)}let l={};for(let[f,m]of Object.entries(o)){let A=a.includes(m);!A&&await e.isExistingAuthFactor(f)||(l[f]={authenticationPublicKey:m,isExistingAuthFactor:A})}return t&&Object.keys(l).length===0&&j.addBreadcrumb(F.Auth,`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(o).length}
- auth factors registered with user: ${a.length}`,Q.Error),l},"queryFn"),retryOnMount:!1})},"useEligibleAuthFactors");h();p();h();p();var Ia=i(()=>{let{data:e}=So();return!!e},"useIsLoggedIn");function F2(e,t){let r=Ia(),n;return e.enabled===void 0?n=r:typeof e.enabled=="function"?n=i(o=>(Ay(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(o)),"enabled"):typeof e.enabled=="boolean"?n=r&&e.enabled:xe(e.enabled),Yt({...e,enabled:n},t)}i(F2,"useAuthQuery");h();p();var j2=i(()=>{let e=Rt(),t=Pr(),r=i(async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await vi(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{await r(n);return}catch(o){j.addBreadcrumb(F.Auth,`Could not add auth factor: ${n.secretIdentifier}`,Q.Error);let a;throw o instanceof Error?a=o:a=new Error(`Could not add auth factor: ${n.secretIdentifier}`),j.captureError(a,F.Auth),a}},"mutationFn")})},"useAddAuthFactor");h();p();var z2=i(()=>{let e=Rt(),t=Pr(),r=i(async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await vi(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{await r(n);return}catch(o){j.addBreadcrumb(F.Auth,"Could not remove auth factor!",Q.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not remove auth factor!"),j.captureError(a,F.Auth),a}},"mutationFn")})},"useRemoveAuthFactor");h();p();var q2=i(()=>{let{data:e}=So();return e?.accessToken},"useAccessToken");h();p();var W2=ue(At());h();p();var yd=class{static{i(this,"AccountAnalytics")}#e;#t;#r;constructor(t,r,n){this.#e=t,this.#t=r,this.#r=n}identifyAccount=i(async(t,r,n)=>{let o=!!r.addresses.find(C=>pe.isSolanaNetworkID(C.networkID)),a=!!r.addresses.find(C=>pe.isEthereumNetworkID(C.networkID)),l=!!r.addresses.find(C=>pe.isBitcoinNetworkID(C.networkID)),f=!!r.addresses.find(C=>pe.isSuiNetworkID(C.networkID)),m={hasSolanaAddress:o,hasEthereumAddress:a,hasBitcoinAddress:l,hasSuiAddress:f},A=n.enabledChainIDs.map(C=>pe[C].name).join(", "),T=new Set;for(let C of t)switch(C.type){case P.Seed:case P.Seedless:T.add(C.seedIdentifier);break;case P.ReadOnly:case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:break;default:xe(C);break}let{id:I,type:k}=await this.getIdentifyID(r),O=await this.getUsername();switch(r.type){case P.Seed:case P.Seedless:this.#e.identify(I,{...m,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:A,idType:k,username:O});break;case P.ReadOnly:this.#e.identify(I,{...m,accountType:r.type,isReadOnly:!0,enabledChains:A,idType:k,username:O});break;case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:this.#e.identify(I,{...m,accountType:r.type,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:A,idType:k,username:O});break;default:xe(r)}},"identifyAccount");getIdentifyID=i(async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}},"getIdentifyID");getUsername=i(async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username},"getUsername");onAppSessionStart=i(t=>{let r=new Map;for(let n of t){if(n.type===P.ReadOnly)continue;let{addresses:o,identifier:a}=n;for(let l of o){let f=pe.getChainName(l.networkID),m={type:n.type,accountId:a,id:l.address};if(!r.get(f))r.set(f,[m]);else{let A=r.get(f)??[];r.set(f,[...A,m])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})},"onAppSessionStart")};var vd=Eg(null);h();p();h();p();var YC=d.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."}),bd;(function(e){e.UnableToCreateBip39Dependency="Unable to create bip39 dependency",e.FailedToFetchBip39Mnemonic="Failed to fetch bip39 mn*monic from storage",e.FailedToParseBip39Mnemonic="Failed to parse bip39 mn*monic as JSON object",e.FailedToDecryptBip39Mnemonic="Failed to decrypt bip39 mn*monic",e.FailedToConstructBip39Entropy="Failed to construct bip39 mn*monic from entropy",e.FailedToFetchDeprecatedMnemonic="Failed to fetch deprecated mn*monic from storage",e.FailedToParseDeprecatedMnemonic="Failed to parse deprecated mn*monic as JSON object",e.FailedToDecryptDeprecatedMnemonic="Failed to decrypt deprecated mn*monic",e.FailedToParseRawDeprecatedMnemonic="Failed to parse deprecated mn*monic from raw JSON",e.FailedToCreateDeprecatedMnemonicString="Failed to create deprecated m*monic from a string",e.FailedToCreateDeprecatedMnemonicStringArray="Failed to create deprecated mn*monic from a string array",e.FailedToCreateDeprecatedMnemonicObjectUint8Array="Failed to create deprecated mn*monic from an object or uint8array",e.FailedToFetchAccountMetas="Failed to fetch account metas from storage",e.NoSeed="No legacy se*d available"})(bd||(bd={}));var wd;(function(e){e.InvalidChecksum="Se*d has invalid checksum",e.InvalidEntropy="Se*d has invalid entropy",e.LessThan12Words="Se*d has less than twelve words",e.InvalidWordCount="Se*d has invalid world count",e.InvalidWords="Se*d has invalid words",e.InternalError="Unknown error fetching se*d"})(wd||(wd={}));var xd;(function(e){e.PrivateKey="privateKey",e.Mnemonic="mnemonic",e.Seedless="seedless"})(xd||(xd={}));h();p();var H2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let m=e.chains[f];if(m)switch(m.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:m.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.address});break}default:xe(m)}}}return o},"getSeedAccountAddresses"),$2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let m=e.chains[f];if(m)switch(m.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:m.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.address});break}default:xe(m)}}}return o},"getLedgerAccountAddresses"),G2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let f of pe[l].addressTypes)r.includes(f)&&e.chainType===f&&o.push({networkID:a,addressType:f,address:e.address})}return o},"getSolanaSeedVaultAccountAddresses"),Z2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let f of pe[l].addressTypes){if(!r.includes(f))continue;let m=e.chains[f];if(m)switch(m.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:m.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:m.publicKey,address:m.address});break}default:xe(m)}}}return o},"getKMSVaultAccountAddresses"),J2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f)&&e.chainType===f)switch(e.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:f,address:e.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:f,publicKey:e.publicKey,address:e.address});break}default:xe(e)}}}return o},"getPrivateKeyAccountAddresses"),Y2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l)){for(let f of pe[l].addressTypes)if(r.includes(f))for(let[m,A]of Object.entries(e.addresses))m===f&&o.push({networkID:a,addressType:f,address:A})}}return o},"getReadOnlyAccountAddresses"),uu=i((e,t,r,n,o,a)=>{let l;switch(a?l=Object.values(o.setting):l=t,l=l.sort((f,m)=>pe.compareNetworkID(f,m)),e.type){case P.Seedless:case P.Seed:return H2(e,l,r,n);case P.Ledger:return $2(e,l,r,n);case P.SeedVault:return G2(e,l,r,n);case P.KMSVault:return Z2(e,l,r,n);case P.PrivateKey:return J2(e,l,r,n);case P.ReadOnly:return Y2(e,l,r,n)}},"convertVaultAccountToChainAddresses");h();p();var Py=ue(an());var Ad=i(()=>({addresses:new Set,publicKeys:new Set}),"createEmptyIdentifiers"),Ss=i((e,t)=>{t&&(t instanceof Uint8Array?e.publicKeys.add(Py.Buffer.from(t).toString("base64")):typeof t=="string"&&e.publicKeys.add(t))},"addPublicKey"),Q2=i((e,t)=>{if(!e||typeof e!="object")return;let r=e,{chainType:n}=r;if(n)switch(n){case _.Solana:case _.EVM:{let o=r,a;typeof o.address=="string"?a=o.address:typeof o.publicKey=="string"&&(a=o.publicKey),a&&t.addresses.add(a);break}case _.Sui:{let o=r.address;typeof o=="string"&&t.addresses.add(o),Ss(t,r.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let o=r.addresses??{};Object.values(o).forEach(a=>{a&&t.addresses.add(a)}),Ss(t,r.publicKey);break}default:break}},"addChainAddressToSnapshot"),By=i((e,t)=>{t.addresses.forEach(r=>e.addresses.add(r)),t.publicKeys.forEach(r=>e.publicKeys.add(r))},"mergeSnapshots"),lu=i(e=>{let t=Ad();return e&&Object.values(e).forEach(r=>{Q2(r,t)}),t},"collectIdentifiersFromChains"),Ky=i(e=>{let t=Ad();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{By(t,lu(e.chains));break}case P.PrivateKey:{"addresses"in e?(Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),Ss(t,e.publicKey)):"address"in e&&"publicKey"in e&&e.chainType===_.Sui?(t.addresses.add(e.address),Ss(t,e.publicKey)):"address"in e&&t.addresses.add(e.address);break}case P.SeedVault:{t.addresses.add(e.address);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultAccount"),Sd=i(e=>{let t=Ad();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{By(t,lu(e.chains));break}case P.PrivateKey:{switch(e.chainType){case _.Solana:case _.EVM:{t.addresses.add(e.publicKey);break}case _.Sui:{t.addresses.add(e.address),Ss(t,e.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),Ss(t,e.publicKey);break}}break}case P.SeedVault:{t.addresses.add(e.publicKey);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultStorageAccount");h();p();var X2=i(({index:e,offsetIndex:t})=>({name:In.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})}),"createAccountMetadata");h();p();var Ed=i(e=>{switch(e){case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:return!0;case ee.Bip44Solana:case ee.DeprecatedSolana:case ee.Bip44RootSolana:case ee.Bip44RootEthereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:case ee.Bip44Sui:return!1}},"isRecommendedDerivationPathType");h();p();var eE=i(({pathType:e,index:t})=>{switch(e){case ee.Bip44RootEthereum:case ee.Bip44RootSolana:return"root-derivation-path-group";case ee.Bip44ChangeSolana:case ee.Bip44Ethereum:case ee.Bip44Sui:case ee.BitcoinTaproot:case ee.BitcoinNativeSegwit:case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:return`recommended-group:index-${t}`;case ee.Bip44EthereumSecondary:case ee.Bip44Solana:return`secondary-group:index-${t}`;case ee.Bip44EthereumTertiary:case ee.DeprecatedSolana:return`tertiary-group:index-${t}`}},"getDerivationPathGroupKey");h();p();var tE=i(e=>e==null?!1:[P.Ledger,P.SeedVault].includes(e),"isHardwareWalletAccountType");h();p();h();p();var Oy="Trying to find a selected account, but there no accounts in the vault.",rE="Missing ChainAvailability.",Cy=i((e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,"NoAccountFoundFromIdentifierErrorMsg"),Md=new Error("The current account group has no valid bitcoin address"),Td=new Error("The current account group has no valid EIP-155 address"),Id=new Error("The current account group has no valid solana address"),_d=new Error("The current account group has no valid sui address"),Ry=new Error("The current account group has no valid address or the the chain type was unsupported"),U5=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),N5=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");function Uy(e,t){let n=(e?.addresses??[]).find(({addressType:o})=>o===t);if(!e?.addresses||!n)switch(t){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw Md;case _.EVM:throw Td;case _.Solana:throw Id;case _.Sui:throw _d;default:throw Ry}return n}i(Uy,"getChainAddressByAccount");function nE(e,t){return Uy(e,t)?.address}i(nE,"getAddressByAccount");function iE(e){switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:return e.chains?Object.entries(e.chains).map(([t,r])=>({addressType:t,address:"address"in r?r.address:Object.values(r.addresses)[0]})):[];case P.PrivateKey:return e.chainType===_.BitcoinTaproot||e.chainType===_.BitcoinNativeSegwit||e.chainType===_.BitcoinNestedSegwit||e.chainType===_.BitcoinLegacy?Object.entries(e.addresses).map(([t,r])=>({addressType:e.chainType,address:r})):[{addressType:e.chainType,address:"address"in e?e.address:""}];case P.ReadOnly:return Object.entries(e.addresses).map(([t,r])=>({addressType:t,address:r||""}));case P.SeedVault:return[{addressType:"solana",address:e.address}];default:return[]}}i(iE,"getAddressesFromAccount");function dn(e){return e?iE(e).filter(r=>r.address):[]}i(dn,"getWalletAddressesFromAccount");h();p();var oE=i(e=>{let t=e.toString();return wa(t)},"formatAddressValue");h();p();function sE(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}i(sE,"parseBonfidaHandle");h();p();function aE(e){return[e.endsWith(".eth")]}i(aE,"parseENSHandle");h();p();var cE=i(async(e,t,r)=>{let o=(await e.fetchAllAccounts()).find(l=>{switch(l.type){case P.Seed:case P.Seedless:return l.seedIdentifier===r;case P.PrivateKey:return l.privateKeyIdentifier===r;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(l)}});if(!o)throw new Error("Unable to find account to sign client JWT with.");let a=await e.sign(o.identifier,{isJWT:!0,data:t});if(a.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in a)||!a.signedJWT)throw new Error("No JWT from vault signing.");return a.signedJWT},"signClientJWT");h();p();h();p();h();p();h();p();var Ut="vault";function Or(e,t=Ut){return`kms:${e}:${t}`}i(Or,"getKMSVaultIdentifier");h();p();h();p();h();p();h();p();h();p();h();p();var Ny="2025-11-24";h();p();h();p();var Pd=d.enum(["Ed25519","Secp256k1"]),Bd=d.enum(["Ethereum","Solana","BitcoinSegwit","Sui","BitcoinTaproot"]),bt=d.object({curve:Pd,derivationPath:d.string(),addressFormat:Bd}),Hi=bt.extend({address:d.string(),publicKey:d.string().regex(Mc)}),Dy=d.object({walletId:d.string(),walletName:d.string(),tags:d.array(d.string())});var uE=d.object({code:d.number(),message:d.string()}),Vy=d.object({error:uE,requestId:d.string().optional()}),lE=d.object({kind:d.literal("RLP_ENCODED"),bytes:d.string()}),fE=d.object({kind:d.literal("PSBT"),bytes:d.string()}),dE=d.object({kind:d.literal("SUI_BCS_ENCODED_TRANSACTION_DATA"),bytes:d.string()}),Kd=d.union([d.array(d.number().int().min(0)),d.string(),lE,fE,dE]),du=d.object({envelope:d.string(),publicKey:d.string(),proof:d.string().optional()}),Kn=d.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),SR=d.object({publicKey:d.array(d.number().int().min(0)),algorithm:Kn}),ER=d.discriminatedUnion("authenticatorKind",[d.object({authenticatorKind:d.literal("keypair"),publicKey:d.array(d.number().int().min(0)),algorithm:Kn}),d.object({authenticatorKind:d.literal("passkey")}),d.object({authenticatorKind:d.literal("oidc")})]),Od=d.discriminatedUnion("authenticatorKind",[d.object({authenticatorKind:d.literal("keypair"),publicKey:d.string(),algorithm:Kn,authenticatorName:d.string()}),d.object({authenticatorKind:d.literal("passkey"),authenticatorName:d.string()}),d.object({authenticatorKind:d.literal("oidc"),authenticatorName:d.string(),jwksUrl:d.string().url(),idTokenClaims:d.object({sub:d.string(),iss:d.string(),aud:d.string().nullish().default(null)})})]),hE=d.discriminatedUnion("authenticatorKind",[d.object({authenticatorKind:d.literal("keypair"),publicKey:d.string(),algorithm:Kn,authenticatorName:d.string(),id:d.string(),createdAtMs:d.number()}),d.object({authenticatorKind:d.literal("passkey"),authenticatorName:d.string(),id:d.string(),createdAtMs:d.number()}),d.object({authenticatorKind:d.literal("oidc"),authenticatorName:d.string(),jwksUrl:d.string().url(),idTokenClaims:d.object({sub:d.string(),iss:d.string(),aud:d.string().nullish().default(null)}),id:d.string(),createdAtMs:d.number()})]),pE=d.object({type:d.literal("CEL"),preset:d.literal("LEGACY_USER_ROLE")}),mE=d.enum(["ALLOW","DENY"]),gE=d.object({expression:d.string().min(1).max(4096),outcome:mE,comment:d.string().min(0).max(200)}),kd=d.lazy(()=>d.union([d.null(),d.boolean(),d.string(),d.number().finite(),d.array(kd),d.record(kd)])),yE=d.object({name:d.string().min(1).max(50),value:kd,comment:d.string().min(0).max(200)}),vE=d.object({type:d.literal("CEL"),rules:d.array(gE),constants:d.array(yE)}),bE=d.object({usdCentsLimitPerDay:d.number(),memoryAccount:d.string(),memoryId:d.number(),memoryBump:d.number()}),wE=d.object({ethereumMessage:d.boolean(),ethereumTx:d.boolean(),ethereumTypedData:d.boolean(),rawPayload:d.boolean(),solanaTx:d.boolean(),utf8Message:d.boolean()}),xE=d.object({type:d.literal("CEL"),preset:d.literal("DAPP_CONNECTION_USER"),walletId:d.string(),usdLimit:bE.nullish().default(null),allowedMethods:wE.nullish().default(null),solanaProgramAllowlist:d.array(d.string()).nullish().default(null)}),AE=d.union([vE,pE,xE]),SE=d.object({type:d.literal("ROOT")}),_a=d.union([SE,AE]),Ly=d.enum(["ADMIN","USER"]),hu=d.object({username:d.string(),role:Ly.or(_a).optional(),traits:d.object({appId:d.string().optional()}).optional(),authenticators:d.array(Od),policy:_a.optional(),expiresInMs:d.number().optional()}),Fy=d.object({username:d.string(),role:Ly.optional(),authenticators:d.array(hE),traits:d.record(d.string()).optional().default({}),expiresAtMs:d.number().nullish().default(null),createdAtMs:d.number().nullish().default(null)}),EE=Fy.extend({policy:_a.optional()}),ME=d.union([EE,Fy]),Zt=d.object({organizationId:d.string(),organizationName:d.string(),parentOrganizationId:d.string().nullish().default(null),tags:d.array(d.string()),users:d.array(ME)}),TE=d.discriminatedUnion("rule",[d.object({rule:d.literal("SystemInstructionLamportsThreshold"),min:d.number().int().min(0).nullish().default(null),max:d.number().int().min(0).nullish().default(null)}),d.object({rule:d.literal("SystemInstructionRecipientAllowlist"),allowlist:d.array(d.string())})]),IE=d.union([d.object({In:d.array(d.number().int().min(0))}),d.object({Exact:d.number().int().min(0)}),d.literal("Any")]),fu=d.object({programId:d.string(),discriminator:IE,validate:d.array(TE).optional()}),MR=d.object({max:d.number().int().min(0)}),TR=d.object({maxComputeUnitPrice:d.number().int().min(0).nullish().default(null),maxComputeUnits:d.number().int().min(0).nullish().default(null)}),IR=d.object({allowlist:d.array(fu)}),_R=d.object({allowlist:d.array(fu).optional()}),kR=d.null().default(null),_E=d.discriminatedUnion("rule",[d.object({rule:d.literal("NoSignerAccountUsage"),allowlist:d.array(fu).optional()}),d.object({rule:d.literal("BundleSizeLimit"),max:d.number().int().min(0)}),d.object({rule:d.literal("ComputeBudgetLimit"),maxComputeUnitPrice:d.number().int().min(0).nullish().default(null),maxComputeUnits:d.number().int().min(0).nullish().default(null)}),d.object({rule:d.literal("NoAddressLookupTables")}),d.object({rule:d.literal("InstructionAllowlist"),allowlist:d.array(fu)}),d.object({rule:d.literal("AllowAll")})]),kE=d.object({rules:d.array(_E)}),PE=d.object({version:d.literal("v0"),solana:kE.nullish().default(null)}),ka=PE,BE=d.enum(["owner","signaturePayload","signatureTransaction"]),KE=d.object({version:d.literal("v0"),scopes:d.array(BE),derivationAllowlist:d.array(bt).nullish().default(null)}),Pa=KE;var pu=class e extends Error{static{i(this,"KMSRpcError")}response;method;errorCode;requestId;constructor(t,r){let{message:n,requestId:o,code:a}=OE(r.data),l=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${n}${o?` (requestId: ${o})`:""}`;super(l),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=o,this.errorCode=a,Object.setPrototypeOf(this,e.prototype)}};function OE(e){let t=Vy.safeParse(e);if(!t.success)return{message:"Unknown error"};let{error:r,requestId:n}=t.data;return{message:r.message,requestId:n,code:r.code}}i(OE,"extractErrorInfo");var CE="00000000-0000-0000-0000-000000000000",RE="/v1/wallets/kms/rpc";async function Ae(e,t,r,n){let o={method:t,params:r,timestampMs:await ps()},a=await Cd(e,t,o);return n.parse(a)}i(Ae,"rpcCall");async function Cd(e,t,r){let n=JSON.stringify(r),o;try{let T=await e.getPublicKey(),I=await e.signRpcPayload(r);o=it(Buffer.from(JSON.stringify({publicKey:T,signature:I,kind:"PKI"}),"utf-8"))}catch(T){throw new Error(`[KMS] Failed to authenticate rpc call: ${T instanceof Error?T.message:"Unknown error"}`)}let a=M.WALLET_SERVICE_API_URL,f=await(a?dt.api("custom",a):dt.api()).bearer(!0).post(RE,n,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":o,"X-App-Id":CE,"x-api-version":Ny},validateStatus:!1}),m=!is(f),A=f.data&&typeof f.data=="object"&&"error"in f.data;if(m||A)throw new pu(t,f);return f.data}i(Cd,"baseRpcCall");h();p();h();p();h();p();function $i(e,t){return e.users.find(r=>r.authenticators.some(n=>n.authenticatorKind!=="keypair"?!1:Tc(n.publicKey)===t))}i($i,"getByPublicKey");var Rd=d.object({organizationId:d.string(),user:hu,replaceExpirable:d.boolean().optional()}),mu=d.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>$i(e.result,t),"getByPublicKey")}));function Ud(e,t){return Ae(e.authenticator,"addUserToOrganization",t,mu)}i(Ud,"addUserToOrganization");h();p();var Nd=d.object({organizationId:d.string(),importEnvelope:du,encryptedSecret:d.string().regex(Mc),walletName:d.string(),accounts:d.array(bt),mnemonicLength:d.number().int().min(0).default(24).optional(),tags:d.array(d.string()).optional()}),gu=d.object({result:d.object({walletId:d.string(),walletName:d.string(),accounts:d.array(Hi)})});function Dd(e,t){return Ae(e.authenticator,"completeImportWallet",t,gu)}i(Dd,"completeImportWallet");h();p();var Vd=d.object({organizationId:d.string(),username:d.string(),authenticator:Od}),yu=d.object({result:d.discriminatedUnion("authenticatorKind",[d.object({authenticatorKind:d.literal("keypair"),publicKey:d.string(),algorithm:Kn,authenticatorName:d.string(),id:d.string(),createdAtMs:d.number()}),d.object({authenticatorKind:d.literal("passkey"),authenticatorName:d.string(),id:d.string(),createdAtMs:d.number()}),d.object({authenticatorKind:d.literal("oidc"),authenticatorName:d.string(),jwksUrl:d.string().url(),idTokenClaims:d.object({sub:d.string(),iss:d.string(),aud:d.string().nullish().default(null)}),id:d.string(),createdAtMs:d.number()})])});function Ld(e,t){return Ae(e.authenticator,"createAuthenticator",t,yu)}i(Ld,"createAuthenticator");h();p();var Fd=d.object({organizationName:d.string(),tags:d.array(d.string()).optional(),users:d.array(hu)}),vu=d.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>$i(e.result,t),"getByPublicKey")}));function jd(e,t){return Ae(e.authenticator,"createOrganization",t,vu)}i(jd,"createOrganization");h();p();var zd=d.object({walletName:d.string(),organizationId:d.string(),mnemonicLength:d.number().int().min(0).default(24).optional(),accounts:d.array(bt).optional()}),bu=d.object({result:d.object({walletId:d.string(),walletName:d.string(),accounts:d.array(d.object({curve:Pd,derivationPath:d.string(),addressFormat:Bd,publicKey:d.string()}))})});function qd(e,t){return Ae(e.authenticator,"createWallet",t,bu)}i(qd,"createWallet");h();p();var Wd=d.object({organizationId:d.string(),username:d.string(),authenticatorId:d.string()}),wu=d.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>$i(e.result,t),"getByPublicKey")}));function Hd(e,t){return Ae(e.authenticator,"deleteAuthenticator",t,wu)}i(Hd,"deleteAuthenticator");h();p();var $d=d.object({organizationId:d.string(),username:d.string()}),xu=d.object({result:Zt});function Gd(e,t){return Ae(e.authenticator,"deleteUserFromOrganization",t,xu)}i(Gd,"deleteUserFromOrganization");h();p();var Zd=d.object({message:d.string(),organizationId:d.string(),walletId:d.string(),derivationInfo:bt.nullish().default(null),policyName:d.string().optional()}),Au=d.object({result:d.object({signature:d.string(),address:d.string(),publicKey:d.string()})});function Jd(e,t){return Ae(e.authenticator,"ethereumSignMessage",t,Au)}i(Jd,"ethereumSignMessage");h();p();var jy=d.union([xc,Ac,Sc]),Yd=d.object({typedData:jy,organizationId:d.string(),walletId:d.string(),derivationInfo:bt.nullish().default(null),policyName:d.string().optional()}),Su=d.object({result:d.object({signature:d.string(),address:d.string(),publicKey:d.string()})});function Qd(e,t){return Ae(e.authenticator,"ethereumSignTypedData",t,Su)}i(Qd,"ethereumSignTypedData");h();p();var Xd=d.object({organizationId:d.string(),walletId:d.string(),publicKey:d.string()}),Eu=d.object({result:d.object({encrypted_bundle:d.string()})});function eh(e,t){return Ae(e.authenticator,"exportWallet",t,Eu)}i(eh,"exportWallet");h();p();var th=d.object({organizationId:d.string(),walletId:d.string(),accounts:d.array(bt)}),Mu=d.object({result:d.array(Hi)});function rh(e,t){return Ae(e.authenticator,"getAccounts",t,Mu)}i(rh,"getAccounts");h();p();var nh=d.object({publicKey:d.string()}),Tu=d.object({result:Zt});function ih(e,t){return Ae(e.authenticator,"getOrCreatePhantomOrganization",t,Tu)}i(ih,"getOrCreatePhantomOrganization");h();p();var oh=d.object({walletName:d.string(),organizationId:d.string(),tag:d.string(),mnemonicLength:d.number().int().min(0).default(24).optional(),accounts:d.array(bt).optional()}),Iu=d.object({result:d.object({walletId:d.string(),walletName:d.string(),accounts:d.array(Hi)})});function sh(e,t){return Ae(e.authenticator,"getOrCreateWalletWithTag",t,Iu)}i(sh,"getOrCreateWalletWithTag");h();p();var ah=d.object({organizationId:d.string()}),_u=d.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>$i(e.result,t),"getByPublicKey")}));function ch(e,t){return Ae(e.authenticator,"getOrganization",t,_u)}i(ch,"getOrganization");h();p();var uh=d.object({organizationId:d.string(),limit:d.number().int().min(0).optional(),offset:d.number().int().min(0).optional()}),ku=d.object({result:d.object({wallets:d.array(Dy),totalCount:d.number().int().min(0),limit:d.number().int().min(0),offset:d.number().int().min(0)})});function lh(e,t){return Ae(e.authenticator,"getOrganizationWallets",t,ku)}i(lh,"getOrganizationWallets");h();p();var fh=d.object({}),Pu=d.object({result:Zt.nullish()});function dh(e,t){return Ae(e.authenticator,"getPhantomOrganization",t,Pu)}i(dh,"getPhantomOrganization");h();p();var hh=d.object({organizationId:d.string(),tag:d.string(),accounts:d.array(bt).optional()}),Bu=d.object({result:d.object({walletId:d.string(),walletName:d.string(),accounts:d.array(Hi)}).nullish()});function ph(e,t){return Ae(e.authenticator,"getWalletWithTag",t,Bu)}i(ph,"getWalletWithTag");h();p();var mh=d.object({ownerOrganizationId:d.string(),targetOrganizationId:d.string(),walletId:d.string(),policy:Pa,transactionPolicy:ka.nullish().default(null)}),Ku=d.object({result:d.object({organizationId:d.string(),walletId:d.string(),organizationPolicy:Pa,transactionPolicy:ka.nullish().default(null)})});function gh(e,t){return Ae(e.authenticator,"grantOrganizationAccess",t,Ku)}i(gh,"grantOrganizationAccess");h();p();var yh=d.object({organizationId:d.string()}),Ou=d.object({result:du,signature:d.string().optional()});function vh(e,t){return Ae(e.authenticator,"initWalletImport",t,Ou)}i(vh,"initWalletImport");h();p();var bh=d.object({ownerOrganizationId:d.string(),targetOrganizationId:d.string(),walletId:d.string()}),Cu=d.object({result:d.object({organizationId:d.string(),walletId:d.string(),organizationPolicy:Pa,transactionPolicy:ka.nullish().default(null)})});function wh(e,t){return Ae(e.authenticator,"revokeOrganizationAccess",t,Cu)}i(wh,"revokeOrganizationAccess");h();p();var xh=d.object({payload:d.union([d.array(d.number().int().min(0)),d.string()]),organizationId:d.string(),walletId:d.string(),derivationInfo:bt,algorithm:Kn}),Ru=d.object({result:d.object({signature:d.string(),address:d.string(),publicKey:d.string()})});function Ah(e,t){let r=Array.isArray(t.payload)?it(Buffer.from(t.payload)):t.payload;return Ae(e.authenticator,"signRawPayload",{...t,payload:r},Ru)}i(Ah,"signRawPayload");h();p();var Sh=d.object({transaction:Kd,organizationId:d.string(),walletId:d.string(),derivationInfo:bt.nullish().default(null),policyName:d.string().nullish().default(null)}),Uu=d.object({result:d.object({transaction:Kd,address:d.string(),publicKey:d.string(),signature:d.string().optional()})});function Eh(e,t){return Ae(e.authenticator,"signTransaction",t,Uu)}i(Eh,"signTransaction");h();p();var Mh=d.object({message:d.string(),organizationId:d.string(),walletId:d.string(),derivationInfo:bt,algorithm:Kn,policyName:d.string().optional()}),Nu=d.object({result:d.object({signature:d.string(),address:d.string(),publicKey:d.string()})});function Th(e,t){return Ae(e.authenticator,"signUtf8Message",t,Nu)}i(Th,"signUtf8Message");h();p();var Ih=d.object({organizationId:d.string(),username:d.string(),newPolicy:_a.optional(),addTraits:d.record(d.string()).optional(),removeTraits:d.record(d.string()).optional()}),Du=d.object({result:Zt});function _h(e,t){return Ae(e.authenticator,"updateUserInOrganization",t,Du)}i(_h,"updateUserInOrganization");var UE=20,NE={createOrganization:{request:Fd,response:vu},getOrganization:{request:ah,response:_u},getOrCreatePhantomOrganization:{request:nh,response:Tu},getPhantomOrganization:{request:fh,response:Pu},addUserToOrganization:{request:Rd,response:mu},deleteUserFromOrganization:{request:$d,response:xu},updateUserInOrganization:{request:Ih,response:Du},createAuthenticator:{request:Vd,response:yu},deleteAuthenticator:{request:Wd,response:wu},createWallet:{request:zd,response:bu},getOrganizationWallets:{request:uh,response:ku},getOrCreateWalletWithTag:{request:oh,response:Iu},getWalletWithTag:{request:hh,response:Bu},exportWallet:{request:Xd,response:Eu},grantOrganizationAccess:{request:mh,response:Ku},revokeOrganizationAccess:{request:bh,response:Cu},initWalletImport:{request:yh,response:Ou},completeImportWallet:{request:Nd,response:gu},signRawPayload:{request:xh,response:Ru},signTransaction:{request:Sh,response:Uu},signUtf8Message:{request:Mh,response:Nu},ethereumSignMessage:{request:Zd,response:Au},ethereumSignTypedData:{request:Yd,response:Su},getAccounts:{request:th,response:Mu}};async function kh(e,t){if(t.length===0)return[];let r=[],n=await ps();for(let o of DE(t,UE)){let a=o.map(m=>({method:m.method,params:m.params,timestampMs:n})),l=await Cd(e,"batch",a);if(!Array.isArray(l))throw new Error("[KMS] Batch RPC call returned non-array response");if(l.length!==o.length)throw new Error(`[KMS] Batch RPC call response length mismatch: expected ${o.length}, got ${l.length}`);let f=o.map((m,A)=>NE[m.method].response.parse(l[A]));r.push(...f)}return r}i(kh,"batchRpcCall");function zy(e,t){return{method:e,params:t}}i(zy,"createBatchRequest");function DE(e,t){if(e.length<=t)return[e];let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}i(DE,"chunk");var bi;(function(e){e.RLP_ENCODED="RLP_ENCODED",e.PSBT="PSBT",e.EIP_1559="EIP_1559",e.SUI_BCS_ENCODED_TRANSACTION_DATA="SUI_BCS_ENCODED_TRANSACTION_DATA"})(bi||(bi={}));function Es(e){return{createOrganization:i(t=>jd(e,t),"createOrganization"),getOrganization:i(t=>ch(e,t),"getOrganization"),createAuthenticator:i(t=>Ld(e,t),"createAuthenticator"),deleteAuthenticator:i(t=>Hd(e,t),"deleteAuthenticator"),deleteUserFromOrganization:i(t=>Gd(e,t),"deleteUserFromOrganization"),createWallet:i(t=>qd(e,t),"createWallet"),getOrganizationWallets:i(t=>lh(e,t),"getOrganizationWallets"),getOrCreateWalletWithTag:i(t=>sh(e,t),"getOrCreateWalletWithTag"),getWalletWithTag:i(t=>ph(e,t),"getWalletWithTag"),exportWallet:i(t=>eh(e,t),"exportWallet"),grantOrganizationAccess:i(t=>gh(e,t),"grantOrganizationAccess"),revokeOrganizationAccess:i(t=>wh(e,t),"revokeOrganizationAccess"),initWalletImport:i(t=>vh(e,t),"initWalletImport"),completeImportWallet:i(t=>Dd(e,t),"completeImportWallet"),getOrCreatePhantomOrganization:i(async()=>{let t=await e.authenticator.getPublicKey();return ih(e,{publicKey:t})},"getOrCreatePhantomOrganization"),getPhantomOrganization:i(t=>dh(e,t),"getPhantomOrganization"),getAuthenticatorPublicKey:i(()=>e.authenticator.getPublicKey(),"getAuthenticatorPublicKey"),signRawPayload:i(t=>Ah(e,t),"signRawPayload"),signTransaction:i(t=>Eh(e,t),"signTransaction"),signUtf8Message:i(t=>Th(e,t),"signUtf8Message"),ethereumSignMessage:i(t=>Jd(e,t),"ethereumSignMessage"),ethereumSignTypedData:i(t=>Qd(e,t),"ethereumSignTypedData"),getAccounts:i(t=>rh(e,t),"getAccounts"),addUserToOrganization:i(t=>Ud(e,t),"addUserToOrganization"),updateUserInOrganization:i(t=>_h(e,t),"updateUserInOrganization"),batchRpcCall:i(t=>kh(e.authenticator,t),"batchRpcCall")}}i(Es,"createKMS");h();p();var LE=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","updateUserInOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","signUtf8Message","ethereumSignMessage","ethereumSignTypedData","getAccounts"],Wy=d.enum(LE),qy=d.object({method:Wy,params:d.record(d.unknown()),timestampMs:d.number().int().positive()}),Vu=d.union([qy,d.array(qy)]);function Ph(e){return Vu.parse(e)}i(Ph,"validateKMSRpcPayload");h();p();function FE(e){switch(e){case"Solana":case"Sui":return"Ed25519";case"Ethereum":case"BitcoinSegwit":case"BitcoinTaproot":return"Secp256k1";default:return xe(e)}}i(FE,"getExpectedCurve");function jE(e,t){for(let{curve:r,addressFormat:n}of e){let o=FE(n);if(r!==o)throw new Error(`KMS ${t} request expected curve ${o} for address format ${n}, received ${r}.`)}}i(jE,"validateRequestedAccounts");async function Bh(e,t,r){jE(r,"getWalletWithTag");let{result:n}=await e.getPhantomOrganization({});if(!n)return null;let{result:o}=await e.getWalletWithTag({organizationId:n.organizationId,tag:t,accounts:r});return o?{organizationId:n.organizationId,walletId:o.walletId,walletName:o.walletName,accounts:o.accounts}:null}i(Bh,"getKMSWalletByTagIfExists");h();p();h();p();function Hy(e){switch(e){case _.Solana:return{curve:"Ed25519",addressFormat:"Solana"};case _.EVM:return{curve:"Secp256k1",addressFormat:"Ethereum"};case _.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case _.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin address format ${e}.`);case _.Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported chain type: ${e}`)}}i(Hy,"getKMSCurveAndFormatForChainType");function $y(e){switch(e){case ee.Bip44RootSolana:case ee.Bip44Solana:case ee.Bip44ChangeSolana:case ee.DeprecatedSolana:return{curve:"Ed25519",addressFormat:"Solana"};case ee.Bip44RootEthereum:case ee.Bip44Ethereum:case ee.Bip44EthereumSecondary:case ee.Bip44EthereumTertiary:return{curve:"Secp256k1",addressFormat:"Ethereum"};case ee.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case ee.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case ee.BitcoinNestedSegwit:case ee.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin derivation path ${e}.`);case ee.Bip44Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported derivation path type: ${e}`)}}i($y,"getKMSCurveAndFormatForPathType");function Lu(e,t=0){let r=[];for(let n of e)try{let o=$y(n),a=di({pathType:n,index:t});r.push({curve:o.curve,derivationPath:a,addressFormat:o.addressFormat})}catch{continue}return r}i(Lu,"convertDerivationPathTypesToKMSInfo");async function Kh(e=0){let t=ar().enabledAddressTypes,r=Qt(t);return Lu(r,e)}i(Kh,"getKMSDerivationPathsForIndex");h();p();h();p();var Uh={};z1(Uh,{bitGet:()=>ZE,bitLen:()=>GE,bitMask:()=>Ba,bitSet:()=>JE,bytesToHex:()=>ko,bytesToNumberBE:()=>xi,bytesToNumberLE:()=>ju,concatBytes:()=>Ms,createHmacDrbg:()=>Rh,ensureBytes:()=>vr,equalBytes:()=>HE,hexToBytes:()=>Po,hexToNumber:()=>Ch,isBytes:()=>hn,numberToBytesBE:()=>Gi,numberToBytesLE:()=>zu,numberToHexUnpadded:()=>Yy,numberToVarBytesBE:()=>WE,utf8ToBytes:()=>$E,validateObject:()=>Zi});h();p();var Jy=BigInt(0),Fu=BigInt(1),zE=BigInt(2);function hn(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(hn,"isBytes");var qE=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ko(e){if(!hn(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=qE[e[r]];return t}i(ko,"bytesToHex");function Yy(e){let t=e.toString(16);return t.length&1?`0${t}`:t}i(Yy,"numberToHexUnpadded");function Ch(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}i(Ch,"hexToNumber");var wi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Gy(e){if(e>=wi._0&&e<=wi._9)return e-wi._0;if(e>=wi._A&&e<=wi._F)return e-(wi._A-10);if(e>=wi._a&&e<=wi._f)return e-(wi._a-10)}i(Gy,"asciiToBase16");function Po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=Gy(e.charCodeAt(a)),f=Gy(e.charCodeAt(a+1));if(l===void 0||f===void 0){let m=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+a)}n[o]=l*16+f}return n}i(Po,"hexToBytes");function xi(e){return Ch(ko(e))}i(xi,"bytesToNumberBE");function ju(e){if(!hn(e))throw new Error("Uint8Array expected");return Ch(ko(Uint8Array.from(e).reverse()))}i(ju,"bytesToNumberLE");function Gi(e,t){return Po(e.toString(16).padStart(t*2,"0"))}i(Gi,"numberToBytesBE");function zu(e,t){return Gi(e,t).reverse()}i(zu,"numberToBytesLE");function WE(e){return Po(Yy(e))}i(WE,"numberToVarBytesBE");function vr(e,t,r){let n;if(typeof t=="string")try{n=Po(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(hn(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}i(vr,"ensureBytes");function Ms(...e){let t=0;for(let o=0;o<e.length;o++){let a=e[o];if(!hn(a))throw new Error("Uint8Array expected");t+=a.length}let r=new Uint8Array(t),n=0;for(let o=0;o<e.length;o++){let a=e[o];r.set(a,n),n+=a.length}return r}i(Ms,"concatBytes");function HE(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}i(HE,"equalBytes");function $E(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}i($E,"utf8ToBytes");function GE(e){let t;for(t=0;e>Jy;e>>=Fu,t+=1);return t}i(GE,"bitLen");function ZE(e,t){return e>>BigInt(t)&Fu}i(ZE,"bitGet");var JE=i((e,t,r)=>e|(r?Fu:Jy)<<BigInt(t),"bitSet"),Ba=i(e=>(zE<<BigInt(e-1))-Fu,"bitMask"),Oh=i(e=>new Uint8Array(e),"u8n"),Zy=i(e=>Uint8Array.from(e),"u8fr");function Rh(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Oh(e),o=Oh(e),a=0,l=i(()=>{n.fill(1),o.fill(0),a=0},"reset"),f=i((...I)=>r(o,n,...I),"h"),m=i((I=Oh())=>{o=f(Zy([0]),I),n=f(),I.length!==0&&(o=f(Zy([1]),I),n=f())},"reseed"),A=i(()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let I=0,k=[];for(;I<t;){n=f();let O=n.slice();k.push(O),I+=n.length}return Ms(...k)},"gen");return i((I,k)=>{l(),m(I);let O;for(;!(O=k(A()));)m();return l(),O},"genUntil")}i(Rh,"createHmacDrbg");var YE={bigint:i(e=>typeof e=="bigint","bigint"),function:i(e=>typeof e=="function","function"),boolean:i(e=>typeof e=="boolean","boolean"),string:i(e=>typeof e=="string","string"),stringOrUint8Array:i(e=>typeof e=="string"||hn(e),"stringOrUint8Array"),isSafeInteger:i(e=>Number.isSafeInteger(e),"isSafeInteger"),array:i(e=>Array.isArray(e),"array"),field:i((e,t)=>t.Fp.isValid(e),"field"),hash:i(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function Zi(e,t,r={}){let n=i((o,a,l)=>{let f=YE[a];if(typeof f!="function")throw new Error(`Invalid validator "${a}", expected function`);let m=e[o];if(!(l&&m===void 0)&&!f(m,e))throw new Error(`Invalid param ${String(o)}=${m} (${typeof m}), expected ${a}`)},"checkField");for(let[o,a]of Object.entries(t))n(o,a,!1);for(let[o,a]of Object.entries(r))n(o,a,!0);return e}i(Zi,"validateObject");var _t=BigInt(0),wt=BigInt(1),Bo=BigInt(2),QE=BigInt(3),Nh=BigInt(4),Qy=BigInt(5),Xy=BigInt(8),XE=BigInt(9),eM=BigInt(16);function Jt(e,t){let r=e%t;return r>=_t?r:t+r}i(Jt,"mod");function tM(e,t,r){if(r<=_t||t<_t)throw new Error("Expected power/modulo > 0");if(r===wt)return _t;let n=wt;for(;t>_t;)t&wt&&(n=n*e%r),e=e*e%r,t>>=wt;return n}i(tM,"pow");function br(e,t,r){let n=e;for(;t-- >_t;)n*=n,n%=r;return n}i(br,"pow2");function qu(e,t){if(e===_t||t<=_t)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Jt(e,t),n=t,o=_t,a=wt,l=wt,f=_t;for(;r!==_t;){let A=n/r,T=n%r,I=o-l*A,k=a-f*A;n=r,r=T,o=l,a=f,l=I,f=k}if(n!==wt)throw new Error("invert: does not exist");return Jt(o,t)}i(qu,"invert");function rM(e){let t=(e-wt)/Bo,r,n,o;for(r=e-wt,n=0;r%Bo===_t;r/=Bo,n++);for(o=Bo;o<e&&tM(o,t,e)!==e-wt;o++);if(n===1){let l=(e+wt)/Nh;return i(function(m,A){let T=m.pow(A,l);if(!m.eql(m.sqr(T),A))throw new Error("Cannot find square root");return T},"tonelliFast")}let a=(r+wt)/Bo;return i(function(f,m){if(f.pow(m,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let A=n,T=f.pow(f.mul(f.ONE,o),r),I=f.pow(m,a),k=f.pow(m,r);for(;!f.eql(k,f.ONE);){if(f.eql(k,f.ZERO))return f.ZERO;let O=1;for(let R=f.sqr(k);O<A&&!f.eql(R,f.ONE);O++)R=f.sqr(R);let C=f.pow(T,wt<<BigInt(A-O-1));T=f.sqr(C),I=f.mul(I,C),k=f.mul(k,T),A=O}return I},"tonelliSlow")}i(rM,"tonelliShanks");function nM(e){if(e%Nh===QE){let t=(e+wt)/Nh;return i(function(n,o){let a=n.pow(o,t);if(!n.eql(n.sqr(a),o))throw new Error("Cannot find square root");return a},"sqrt3mod4")}if(e%Xy===Qy){let t=(e-Qy)/Xy;return i(function(n,o){let a=n.mul(o,Bo),l=n.pow(a,t),f=n.mul(o,l),m=n.mul(n.mul(f,Bo),l),A=n.mul(f,n.sub(m,n.ONE));if(!n.eql(n.sqr(A),o))throw new Error("Cannot find square root");return A},"sqrt5mod8")}return e%eM,rM(e)}i(nM,"FpSqrt");var iM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dh(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=iM.reduce((n,o)=>(n[o]="function",n),t);return Zi(e,r)}i(Dh,"validateField");function oM(e,t,r){if(r<_t)throw new Error("Expected power > 0");if(r===_t)return e.ONE;if(r===wt)return t;let n=e.ONE,o=t;for(;r>_t;)r&wt&&(n=e.mul(n,o)),o=e.sqr(o),r>>=wt;return n}i(oM,"FpPow");function sM(e,t){let r=new Array(t.length),n=t.reduce((a,l,f)=>e.is0(l)?a:(r[f]=a,e.mul(a,l)),e.ONE),o=e.inv(n);return t.reduceRight((a,l,f)=>e.is0(l)?a:(r[f]=e.mul(a,r[f]),e.mul(a,l)),o),r}i(sM,"FpInvertBatch");function Vh(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}i(Vh,"nLength");function Wu(e,t,r=!1,n={}){if(e<=_t)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:a}=Vh(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");let l=nM(e),f=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Ba(o),ZERO:_t,ONE:wt,create:i(m=>Jt(m,e),"create"),isValid:i(m=>{if(typeof m!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof m}`);return _t<=m&&m<e},"isValid"),is0:i(m=>m===_t,"is0"),isOdd:i(m=>(m&wt)===wt,"isOdd"),neg:i(m=>Jt(-m,e),"neg"),eql:i((m,A)=>m===A,"eql"),sqr:i(m=>Jt(m*m,e),"sqr"),add:i((m,A)=>Jt(m+A,e),"add"),sub:i((m,A)=>Jt(m-A,e),"sub"),mul:i((m,A)=>Jt(m*A,e),"mul"),pow:i((m,A)=>oM(f,m,A),"pow"),div:i((m,A)=>Jt(m*qu(A,e),e),"div"),sqrN:i(m=>m*m,"sqrN"),addN:i((m,A)=>m+A,"addN"),subN:i((m,A)=>m-A,"subN"),mulN:i((m,A)=>m*A,"mulN"),inv:i(m=>qu(m,e),"inv"),sqrt:n.sqrt||(m=>l(f,m)),invertBatch:i(m=>sM(f,m),"invertBatch"),cmov:i((m,A,T)=>T?A:m,"cmov"),toBytes:i(m=>r?zu(m,a):Gi(m,a),"toBytes"),fromBytes:i(m=>{if(m.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${m.length}`);return r?ju(m):xi(m)},"fromBytes")});return Object.freeze(f)}i(Wu,"Field");function ev(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}i(ev,"getFieldBytesLength");function Lh(e){let t=ev(e);return t+Math.ceil(t/2)}i(Lh,"getMinHashLength");function Hu(e,t,r=!1){let n=e.length,o=ev(t),a=Lh(t);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);let l=r?xi(e):ju(e),f=Jt(l,t-wt)+wt;return r?zu(f,o):Gi(f,o)}i(Hu,"mapHashToField");h();p();h();p();h();p();h();p();function rv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}i(rv,"number");function aM(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(aM,"isBytes");function Fh(e,...t){if(!aM(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}i(Fh,"bytes");function nv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");rv(e.outputLen),rv(e.blockLen)}i(nv,"hash");function Ts(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}i(Ts,"exists");function iv(e,t){Fh(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}i(iv,"output");h();p();h();p();var $u=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ov(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(ov,"isBytes");var Gu=i(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),pn=i((e,t)=>e<<32-t|e>>>t,"rotr"),cM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!cM)throw new Error("Non little-endian hardware is not supported");function uM(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}i(uM,"utf8ToBytes");function Ka(e){if(typeof e=="string"&&(e=uM(e)),!ov(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}i(Ka,"toBytes");function sv(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];if(!ov(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let a=e[n];r.set(a,o),o+=a.length}return r}i(sv,"concatBytes");var Is=class{static{i(this,"Hash")}clone(){return this._cloneInto()}},l7={}.toString;function av(e){let t=i(n=>e().update(Ka(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}i(av,"wrapConstructor");function cv(e=32){if($u&&typeof $u.getRandomValues=="function")return $u.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}i(cv,"randomBytes");var Zu=class extends Is{static{i(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,nv(t);let n=Ka(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(n.length>o?t.create().update(n).digest():n);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return Ts(this),this.iHash.update(t),this}digestInto(t){Ts(this),Fh(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},jh=i((e,t,r)=>new Zu(e,t).update(r).digest(),"hmac");jh.create=(e,t)=>new Zu(e,t);h();p();h();p();var lM=BigInt(0),zh=BigInt(1);function uv(e,t){let r=i((o,a)=>{let l=a.negate();return o?l:a},"constTimeNegate"),n=i(o=>{let a=Math.ceil(t/o)+1,l=2**(o-1);return{windows:a,windowSize:l}},"opts");return{constTimeNegate:r,unsafeLadder(o,a){let l=e.ZERO,f=o;for(;a>lM;)a&zh&&(l=l.add(f)),f=f.double(),a>>=zh;return l},precomputeWindow(o,a){let{windows:l,windowSize:f}=n(a),m=[],A=o,T=A;for(let I=0;I<l;I++){T=A,m.push(T);for(let k=1;k<f;k++)T=T.add(A),m.push(T);A=T.double()}return m},wNAF(o,a,l){let{windows:f,windowSize:m}=n(o),A=e.ZERO,T=e.BASE,I=BigInt(2**o-1),k=2**o,O=BigInt(o);for(let C=0;C<f;C++){let R=C*m,V=Number(l&I);l>>=O,V>m&&(V-=k,l+=zh);let H=R,X=R+Math.abs(V)-1,z=C%2!==0,ce=V<0;V===0?T=T.add(r(z,a[H])):A=A.add(r(ce,a[X]))}return{p:A,f:T}},wNAFCached(o,a,l,f){let m=o._WINDOW_SIZE||1,A=a.get(o);return A||(A=this.precomputeWindow(o,m),m!==1&&a.set(o,f(A))),this.wNAF(m,A,l)}}}i(uv,"wNAF");function qh(e){return Dh(e.Fp),Zi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vh(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}i(qh,"validateBasic");function fM(e){let t=qh(e);Zi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}i(fM,"validatePointOpts");var{bytesToNumberBE:dM,hexToBytes:hM}=Uh,Ko={Err:class extends Error{static{i(this,"DERErr")}constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Ko;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:dM(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Ko,r=typeof e=="string"?hM(e):e;if(!hn(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:a}=Ko._parseInt(r.subarray(2)),{d:l,l:f}=Ko._parseInt(a);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:l}},hexFromSig(e){let t=i(A=>Number.parseInt(A[0],16)&8?"00"+A:A,"slice"),r=i(A=>{let T=A.toString(16);return T.length&1?`0${T}`:T},"h"),n=t(r(e.s)),o=t(r(e.r)),a=n.length/2,l=o.length/2,f=r(a),m=r(l);return`30${r(l+a+4)}02${m}${o}02${f}${n}`}},Ai=BigInt(0),Cr=BigInt(1),P7=BigInt(2),lv=BigInt(3),B7=BigInt(4);function pM(e){let t=fM(e),{Fp:r}=t,n=t.toBytes||((C,R,V)=>{let H=R.toAffine();return Ms(Uint8Array.from([4]),r.toBytes(H.x),r.toBytes(H.y))}),o=t.fromBytes||(C=>{let R=C.subarray(1),V=r.fromBytes(R.subarray(0,r.BYTES)),H=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:V,y:H}});function a(C){let{a:R,b:V}=t,H=r.sqr(C),X=r.mul(H,C);return r.add(r.add(X,r.mul(C,R)),V)}if(i(a,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(C){return typeof C=="bigint"&&Ai<C&&C<t.n}i(l,"isWithinCurveOrder");function f(C){if(!l(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}i(f,"assertGE");function m(C){let{allowedPrivateKeyLengths:R,nByteLength:V,wrapPrivateKey:H,n:X}=t;if(R&&typeof C!="bigint"){if(hn(C)&&(C=ko(C)),typeof C!="string"||!R.includes(C.length))throw new Error("Invalid key");C=C.padStart(V*2,"0")}let z;try{z=typeof C=="bigint"?C:xi(vr("private key",C,V))}catch{throw new Error(`private key must be ${V} bytes, hex or bigint, not ${typeof C}`)}return H&&(z=Jt(z,X)),f(z),z}i(m,"normPrivateKeyToScalar");let A=new Map;function T(C){if(!(C instanceof I))throw new Error("ProjectivePoint expected")}i(T,"assertPrjPoint");class I{static{i(this,"Point")}constructor(R,V,H){if(this.px=R,this.py=V,this.pz=H,R==null||!r.isValid(R))throw new Error("x required");if(V==null||!r.isValid(V))throw new Error("y required");if(H==null||!r.isValid(H))throw new Error("z required")}static fromAffine(R){let{x:V,y:H}=R||{};if(!R||!r.isValid(V)||!r.isValid(H))throw new Error("invalid affine point");if(R instanceof I)throw new Error("projective point not allowed");let X=i(z=>r.eql(z,r.ZERO),"is0");return X(V)&&X(H)?I.ZERO:new I(V,H,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){let V=r.invertBatch(R.map(H=>H.pz));return R.map((H,X)=>H.toAffine(V[X])).map(I.fromAffine)}static fromHex(R){let V=I.fromAffine(o(vr("pointHex",R)));return V.assertValidity(),V}static fromPrivateKey(R){return I.BASE.multiply(m(R))}_setWindowSize(R){this._WINDOW_SIZE=R,A.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:R,y:V}=this.toAffine();if(!r.isValid(R)||!r.isValid(V))throw new Error("bad point: x or y not FE");let H=r.sqr(V),X=a(R);if(!r.eql(H,X))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:R}=this.toAffine();if(r.isOdd)return!r.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){T(R);let{px:V,py:H,pz:X}=this,{px:z,py:ce,pz:se}=R,ne=r.eql(r.mul(V,se),r.mul(z,X)),ae=r.eql(r.mul(H,se),r.mul(ce,X));return ne&&ae}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){let{a:R,b:V}=t,H=r.mul(V,lv),{px:X,py:z,pz:ce}=this,se=r.ZERO,ne=r.ZERO,ae=r.ZERO,Z=r.mul(X,X),me=r.mul(z,z),x=r.mul(ce,ce),s=r.mul(X,z);return s=r.add(s,s),ae=r.mul(X,ce),ae=r.add(ae,ae),se=r.mul(R,ae),ne=r.mul(H,x),ne=r.add(se,ne),se=r.sub(me,ne),ne=r.add(me,ne),ne=r.mul(se,ne),se=r.mul(s,se),ae=r.mul(H,ae),x=r.mul(R,x),s=r.sub(Z,x),s=r.mul(R,s),s=r.add(s,ae),ae=r.add(Z,Z),Z=r.add(ae,Z),Z=r.add(Z,x),Z=r.mul(Z,s),ne=r.add(ne,Z),x=r.mul(z,ce),x=r.add(x,x),Z=r.mul(x,s),se=r.sub(se,Z),ae=r.mul(x,me),ae=r.add(ae,ae),ae=r.add(ae,ae),new I(se,ne,ae)}add(R){T(R);let{px:V,py:H,pz:X}=this,{px:z,py:ce,pz:se}=R,ne=r.ZERO,ae=r.ZERO,Z=r.ZERO,me=t.a,x=r.mul(t.b,lv),s=r.mul(V,z),u=r.mul(H,ce),g=r.mul(X,se),y=r.add(V,H),v=r.add(z,ce);y=r.mul(y,v),v=r.add(s,u),y=r.sub(y,v),v=r.add(V,X);let S=r.add(z,se);return v=r.mul(v,S),S=r.add(s,g),v=r.sub(v,S),S=r.add(H,X),ne=r.add(ce,se),S=r.mul(S,ne),ne=r.add(u,g),S=r.sub(S,ne),Z=r.mul(me,v),ne=r.mul(x,g),Z=r.add(ne,Z),ne=r.sub(u,Z),Z=r.add(u,Z),ae=r.mul(ne,Z),u=r.add(s,s),u=r.add(u,s),g=r.mul(me,g),v=r.mul(x,v),u=r.add(u,g),g=r.sub(s,g),g=r.mul(me,g),v=r.add(v,g),s=r.mul(u,v),ae=r.add(ae,s),s=r.mul(S,v),ne=r.mul(y,ne),ne=r.sub(ne,s),s=r.mul(y,u),Z=r.mul(S,Z),Z=r.add(Z,s),new I(ne,ae,Z)}subtract(R){return this.add(R.negate())}is0(){return this.equals(I.ZERO)}wNAF(R){return O.wNAFCached(this,A,R,V=>{let H=r.invertBatch(V.map(X=>X.pz));return V.map((X,z)=>X.toAffine(H[z])).map(I.fromAffine)})}multiplyUnsafe(R){let V=I.ZERO;if(R===Ai)return V;if(f(R),R===Cr)return this;let{endo:H}=t;if(!H)return O.unsafeLadder(this,R);let{k1neg:X,k1:z,k2neg:ce,k2:se}=H.splitScalar(R),ne=V,ae=V,Z=this;for(;z>Ai||se>Ai;)z&Cr&&(ne=ne.add(Z)),se&Cr&&(ae=ae.add(Z)),Z=Z.double(),z>>=Cr,se>>=Cr;return X&&(ne=ne.negate()),ce&&(ae=ae.negate()),ae=new I(r.mul(ae.px,H.beta),ae.py,ae.pz),ne.add(ae)}multiply(R){f(R);let V=R,H,X,{endo:z}=t;if(z){let{k1neg:ce,k1:se,k2neg:ne,k2:ae}=z.splitScalar(V),{p:Z,f:me}=this.wNAF(se),{p:x,f:s}=this.wNAF(ae);Z=O.constTimeNegate(ce,Z),x=O.constTimeNegate(ne,x),x=new I(r.mul(x.px,z.beta),x.py,x.pz),H=Z.add(x),X=me.add(s)}else{let{p:ce,f:se}=this.wNAF(V);H=ce,X=se}return I.normalizeZ([H,X])[0]}multiplyAndAddUnsafe(R,V,H){let X=I.BASE,z=i((se,ne)=>ne===Ai||ne===Cr||!se.equals(X)?se.multiplyUnsafe(ne):se.multiply(ne),"mul"),ce=z(this,V).add(z(R,H));return ce.is0()?void 0:ce}toAffine(R){let{px:V,py:H,pz:X}=this,z=this.is0();R==null&&(R=z?r.ONE:r.inv(X));let ce=r.mul(V,R),se=r.mul(H,R),ne=r.mul(X,R);if(z)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ne,r.ONE))throw new Error("invZ was invalid");return{x:ce,y:se}}isTorsionFree(){let{h:R,isTorsionFree:V}=t;if(R===Cr)return!0;if(V)return V(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:R,clearCofactor:V}=t;return R===Cr?this:V?V(I,this):this.multiplyUnsafe(t.h)}toRawBytes(R=!0){return this.assertValidity(),n(I,this,R)}toHex(R=!0){return ko(this.toRawBytes(R))}}I.BASE=new I(t.Gx,t.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO);let k=t.nBitLength,O=uv(I,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:m,weierstrassEquation:a,isWithinCurveOrder:l}}i(pM,"weierstrassPoints");function mM(e){let t=qh(e);return Zi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}i(mM,"validateOpts");function fv(e){let t=mM(e),{Fp:r,n}=t,o=r.BYTES+1,a=2*r.BYTES+1;function l(v){return Ai<v&&v<r.ORDER}i(l,"isValidFieldElement");function f(v){return Jt(v,n)}i(f,"modN");function m(v){return qu(v,n)}i(m,"invN");let{ProjectivePoint:A,normPrivateKeyToScalar:T,weierstrassEquation:I,isWithinCurveOrder:k}=pM({...t,toBytes(v,S,E){let b=S.toAffine(),c=r.toBytes(b.x),w=Ms;return E?w(Uint8Array.from([S.hasEvenY()?2:3]),c):w(Uint8Array.from([4]),c,r.toBytes(b.y))},fromBytes(v){let S=v.length,E=v[0],b=v.subarray(1);if(S===o&&(E===2||E===3)){let c=xi(b);if(!l(c))throw new Error("Point is not on curve");let w=I(c),D=r.sqrt(w),L=(D&Cr)===Cr;return(E&1)===1!==L&&(D=r.neg(D)),{x:c,y:D}}else if(S===a&&E===4){let c=r.fromBytes(b.subarray(0,r.BYTES)),w=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:c,y:w}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),O=i(v=>ko(Gi(v,t.nByteLength)),"numToNByteStr");function C(v){let S=n>>Cr;return v>S}i(C,"isBiggerThanHalfOrder");function R(v){return C(v)?f(-v):v}i(R,"normalizeS");let V=i((v,S,E)=>xi(v.slice(S,E)),"slcNum");class H{static{i(this,"Signature")}constructor(S,E,b){this.r=S,this.s=E,this.recovery=b,this.assertValidity()}static fromCompact(S){let E=t.nByteLength;return S=vr("compactSignature",S,E*2),new H(V(S,0,E),V(S,E,2*E))}static fromDER(S){let{r:E,s:b}=Ko.toSig(vr("DER",S));return new H(E,b)}assertValidity(){if(!k(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!k(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new H(this.r,this.s,S)}recoverPublicKey(S){let{r:E,s:b,recovery:c}=this,w=ae(vr("msgHash",S));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let D=c===2||c===3?E+t.n:E;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let L=c&1?"03":"02",W=A.fromHex(L+O(D)),Y=m(D),ie=f(-w*Y),le=f(b*Y),ut=A.BASE.multiplyAndAddUnsafe(W,ie,le);if(!ut)throw new Error("point at infinify");return ut.assertValidity(),ut}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new H(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return Po(this.toDERHex())}toDERHex(){return Ko.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Po(this.toCompactHex())}toCompactHex(){return O(this.r)+O(this.s)}}let X={isValidPrivateKey(v){try{return T(v),!0}catch{return!1}},normPrivateKeyToScalar:T,randomPrivateKey:i(()=>{let v=Lh(t.n);return Hu(t.randomBytes(v),t.n)},"randomPrivateKey"),precompute(v=8,S=A.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}};function z(v,S=!0){return A.fromPrivateKey(v).toRawBytes(S)}i(z,"getPublicKey");function ce(v){let S=hn(v),E=typeof v=="string",b=(S||E)&&v.length;return S?b===o||b===a:E?b===2*o||b===2*a:v instanceof A}i(ce,"isProbPub");function se(v,S,E=!0){if(ce(v))throw new Error("first arg must be private key");if(!ce(S))throw new Error("second arg must be public key");return A.fromHex(S).multiply(T(v)).toRawBytes(E)}i(se,"getSharedSecret");let ne=t.bits2int||function(v){let S=xi(v),E=v.length*8-t.nBitLength;return E>0?S>>BigInt(E):S},ae=t.bits2int_modN||function(v){return f(ne(v))},Z=Ba(t.nBitLength);function me(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(Ai<=v&&v<Z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Gi(v,t.nByteLength)}i(me,"int2octets");function x(v,S,E=s){if(["recovered","canonical"].some(K=>K in E))throw new Error("sign() legacy options not supported");let{hash:b,randomBytes:c}=t,{lowS:w,prehash:D,extraEntropy:L}=E;w==null&&(w=!0),v=vr("msgHash",v),D&&(v=vr("prehashed msgHash",b(v)));let W=ae(v),Y=T(S),ie=[me(Y),me(W)];if(L!=null){let K=L===!0?c(r.BYTES):L;ie.push(vr("extraEntropy",K))}let le=Ms(...ie),ut=W;function de(K){let N=ne(K);if(!k(N))return;let U=m(N),G=A.BASE.multiply(N).toAffine(),te=f(G.x);if(te===Ai)return;let q=f(U*f(ut+te*Y));if(q===Ai)return;let J=(G.x===te?0:2)|Number(G.y&Cr),et=q;return w&&C(q)&&(et=R(q),J^=1),new H(te,et,J)}return i(de,"k2sig"),{seed:le,k2sig:de}}i(x,"prepSig");let s={lowS:t.lowS,prehash:!1},u={lowS:t.lowS,prehash:!1};function g(v,S,E=s){let{seed:b,k2sig:c}=x(v,S,E),w=t;return Rh(w.hash.outputLen,w.nByteLength,w.hmac)(b,c)}i(g,"sign"),A.BASE._setWindowSize(8);function y(v,S,E,b=u){let c=v;if(S=vr("msgHash",S),E=vr("publicKey",E),"strict"in b)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:D}=b,L,W;try{if(typeof c=="string"||hn(c))try{L=H.fromDER(c)}catch(G){if(!(G instanceof Ko.Err))throw G;L=H.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:G,s:te}=c;L=new H(G,te)}else throw new Error("PARSE");W=A.fromHex(E)}catch(G){if(G.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&L.hasHighS())return!1;D&&(S=t.hash(S));let{r:Y,s:ie}=L,le=ae(S),ut=m(ie),de=f(le*ut),K=f(Y*ut),N=A.BASE.multiplyAndAddUnsafe(W,de,K)?.toAffine();return N?f(N.x)===Y:!1}return i(y,"verify"),{CURVE:t,getPublicKey:z,getSharedSecret:se,sign:g,verify:y,ProjectivePoint:A,Signature:H,utils:X}}i(fv,"weierstrass");function gM(e){return{hash:e,hmac:i((t,...r)=>jh(e,t,sv(...r)),"hmac"),randomBytes:cv}}i(gM,"getHash");function Ju(e,t){let r=i(n=>fv({...e,...gM(n)}),"create");return Object.freeze({...r(t),create:r})}i(Ju,"createCurve");h();p();h();p();function yM(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),m=n?4:0,A=n?0:4;e.setUint32(t+m,l,n),e.setUint32(t+A,f,n)}i(yM,"setBigUint64");var Yu=class extends Is{static{i(this,"SHA2")}constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Gu(this.buffer)}update(t){Ts(this);let{view:r,buffer:n,blockLen:o}=this;t=Ka(t);let a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let m=Gu(t);for(;o<=a-l;l+=o)this.process(m,l);continue}n.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ts(this),iv(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(n,0),l=0);for(let I=l;I<o;I++)r[I]=0;yM(n,o-8,BigInt(this.length*8),a),this.process(n,0);let f=Gu(t),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=m/4,T=this.get();if(A>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<A;I++)f.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:a,destroyed:l,pos:f}=this;return t.length=o,t.pos=f,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(n),t}};var vM=i((e,t,r)=>e&t^~e&r,"Chi"),bM=i((e,t,r)=>e&t^e&r^t&r,"Maj"),wM=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ji=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yi=new Uint32Array(64),Wh=class extends Yu{static{i(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=Ji[0]|0,this.B=Ji[1]|0,this.C=Ji[2]|0,this.D=Ji[3]|0,this.E=Ji[4]|0,this.F=Ji[5]|0,this.G=Ji[6]|0,this.H=Ji[7]|0}get(){let{A:t,B:r,C:n,D:o,E:a,F:l,G:f,H:m}=this;return[t,r,n,o,a,l,f,m]}set(t,r,n,o,a,l,f,m){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=a|0,this.F=l|0,this.G=f|0,this.H=m|0}process(t,r){for(let I=0;I<16;I++,r+=4)Yi[I]=t.getUint32(r,!1);for(let I=16;I<64;I++){let k=Yi[I-15],O=Yi[I-2],C=pn(k,7)^pn(k,18)^k>>>3,R=pn(O,17)^pn(O,19)^O>>>10;Yi[I]=R+Yi[I-7]+C+Yi[I-16]|0}let{A:n,B:o,C:a,D:l,E:f,F:m,G:A,H:T}=this;for(let I=0;I<64;I++){let k=pn(f,6)^pn(f,11)^pn(f,25),O=T+k+vM(f,m,A)+wM[I]+Yi[I]|0,R=(pn(n,2)^pn(n,13)^pn(n,22))+bM(n,o,a)|0;T=A,A=m,m=f,f=l+O|0,l=a,a=o,o=n,n=O+R|0}n=n+this.A|0,o=o+this.B|0,a=a+this.C|0,l=l+this.D|0,f=f+this.E|0,m=m+this.F|0,A=A+this.G|0,T=T+this.H|0,this.set(n,o,a,l,f,m,A,T)}roundClean(){Yi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Qu=av(()=>new Wh);var dv=Wu(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),xM=dv.create(BigInt("-3")),AM=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Oo=Ju({a:xM,b:AM,Fp:dv,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Qu);h();p();h();p();h();p();async function hv(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}i(hv,"mnemonicToSeed");h();p();var pv=ue(an());var SM=ue(Ui());h();p();var Hh=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],f9=new Set(Hh);var EM=i((e,t,r,n,o)=>{let a;switch(o){case"rmd160":case"md5":case"sha":throw new Error(`${o} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${o} is supported by noble, but we don't need it for bip39`);case"sha256":a=ln;break;case"sha512":a=eg;break}return cs(a,e,t,{c:r,dkLen:n})},"pbkdf2Noble"),MM=i((e,t,r)=>{for(;e.length<r;)e=t+e;return e},"lpad"),mv=i(e=>e.map(t=>MM(t.toString(2),"0",8)).join(""),"bytesToBinary"),TM=i(e=>parseInt(e,2),"binaryToByte"),IM=i(e=>{let r=e.length*8/32,n=ln(e);return mv(Array.from(n)).slice(0,r)},"deriveChecksumBits"),Si;(function(e){e.InvalidChecksum="InvalidChecksum",e.InvalidChecksumBits="InvalidChecksumBits",e.InvalidEntropy="InvalidEntropy",e.InvalidEntropyBits="InvalidEntropyBits",e.LessThanTwelve="LessThanTwelve",e.ExactlyTwelveOrTwentyFour="ExactlyTwelveOrTwentyFour",e.MoreThanTwentyFour="MoreThanTwentyFour",e.WrongWord="WrongWord"})(Si||(Si={}));var Oa=i(async e=>{let t=Hh;if(e.length<16)throw new Error(Si.LessThanTwelve);if(e.length>32)throw new Error(Si.MoreThanTwentyFour);if(e.length%4!==0)throw new Error(Si.WrongWord);let r,n;try{r=mv(Array.from(e))}catch{throw new Error(Si.InvalidEntropyBits)}try{n=IM(e)}catch{throw new Error(Si.InvalidChecksumBits)}let a=(r+n).match(/(.{1,11})/g);if(!a)throw new Error(Si.InvalidChecksum);let l=a.map(A=>{let T=TM(A);return t[T]}),f=pv.Buffer.from(l.join(" "));return{seed:await hv({mnemonic:f,pbkdf2:EM}),mnemonic:f}},"entropyToSeedAndMnemonic");h();p();h();p();h();p();var Ca=ue(eS());function _M(e){return e=(0,Ca.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{Co(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{Co(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:xe(n)}}break;case P.SeedVault:break;default:xe(t)}}),e}i(_M,"deserializeVaultAccount");function kM(e){return e=(0,Ca.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:xe(n)}}break;case P.SeedVault:break;default:xe(t)}}),e}i(kM,"serializeVaultAccount");function gv(e){return e=(0,Ca.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&Co(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))if(t.version===1&&Co(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case P.SeedVault:break;default:xe(t)}}),e}i(gv,"deserializeVaultStorageAccount");function yv(e){return e=(0,Ca.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case P.SeedVault:break;default:xe(t)}}),e}i(yv,"serializeVaultStorageAccount");function Co(e){return!!e&&typeof e=="object"&&jf("type",e)&&typeof e.type=="string"&&jf("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}i(Co,"isSerializedBuffer");h();p();var cr=".phantom-labs.vault";var _s=`${cr}.accounts`,Ei=`${cr}.secrets`,el=i(e=>`${cr}.privateKey.${e}`,"privateKeyStorageKey"),tl=i(e=>`${cr}.seed.${e}`,"seedStorageKey"),rl=i(e=>`${cr}.seedless.${e}`,"seedlessStorageKey"),Xu=`${cr}.integrityCheck`,mn=`${cr}.kmsAuthenticatorMapping`,st=Xe(function*(){return(yield Tv())?.accounts??[]}),nl=Xe(function*(){let e=yield gn(),t=new Set(e.seedIdentifiers),r=yield st();for(let o of r)o.type===P.Seed&&t.add(o.seedIdentifier);let n=[];for(let o of t)n.push({identifier:o});return n}),il=Xe(function*(){let e=yield gn(),t=new Set(e.seedlessIdentifiers),r=yield st();for(let o of r)o.type===P.Seedless&&t.add(o.seedIdentifier);let n=[];for(let o of t)n.push({identifier:o});return n}),gn=Xe(function*(){let e=Cn(Ei);return{privateKeyIdentifiers:e?.privateKeyIdentifiers??[],seedIdentifiers:e?.seedIdentifiers??[],seedlessIdentifiers:e?.seedlessIdentifiers??[]}});async function wv(e,t){let r=tl(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let o=rl(t);n=await e.secretsStorage.getSecureValue(o)}if(n==null)throw new fn;return Co(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}i(wv,"fetchEntropy");async function On(e,t){let r=el(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new pi;return Co(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}i(On,"fetchPrivateKey");async function Nt(e,t,r=!0){let n=await Tv();if(!n)n={version:1,accounts:[t]};else{let o=n.accounts,a=BM(o,t);if(a.length>0){if(!r)throw new kn(a[0].type,t.type);let l=bv(t.type);for(let m of a)if(bv(m.type)>=l)throw new kn(m.type,t.type);let f=a.map(m=>m.identifier);return o=o.filter(m=>!f.includes(m.identifier)),o.push(t),await Rr(o),await $h(e)}else o.push(t);n.accounts=o}return Rr(n.accounts)}i(Nt,"storeAccount");async function Rr(e){let t={version:1,accounts:e};return Mi(_s)(yv(t))}i(Rr,"storeAccounts");async function xv(e,t){let r=el(t.identifier);await e.secretsStorage.setSecureValue(r,t),await CM(t.identifier)}i(xv,"storePrivateKey");async function Av(e,t){let r=tl(t.identifier);await e.secretsStorage.setSecureValue(r,t),await KM(t.identifier)}i(Av,"storeSeed");async function Sv(e,t){let r=rl(t.identifier);await e.secretsStorage.setSecureValue(r,t),await OM(t.identifier)}i(Sv,"storeSeedlessSeed");async function $h(e){let t=await st(),r=new Set,n=new Set;for(let m of t)switch(m.type){case P.Seed:case P.Seedless:r.add(m.seedIdentifier);break;case P.PrivateKey:n.add(m.privateKeyIdentifier);break;case P.Ledger:case P.ReadOnly:case P.SeedVault:case P.KMSVault:break;default:xe(m)}let o=await gn(),a={seedIdentifiers:o.seedIdentifiers.filter(m=>r.has(m)),seedlessIdentifiers:o.seedlessIdentifiers.filter(m=>r.has(m)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(m=>n.has(m))},l={seedIdentifiers:o.seedIdentifiers.filter(m=>!r.has(m)),seedlessIdentifiers:o.seedlessIdentifiers.filter(m=>!r.has(m)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(m=>!n.has(m))};await e.generalStorage.set(Ei,{version:1,...a}),Mi(Ei)({version:1,...a}),await e.secretsStorage.removeSecureValue([...l.seedIdentifiers.map(m=>tl(m)),...l.seedlessIdentifiers.map(m=>rl(m)),...l.privateKeyIdentifiers.map(m=>el(m))])}i($h,"removeDanglingSecrets");async function Gh(e,t){t?await e.secretsStorage.setSecureValue(Xu,t):await e.secretsStorage.removeSecureValue(Xu)}i(Gh,"storeIntegrityCheck");async function Ev(e){return e.secretsStorage.getSecureValue(Xu)}i(Ev,"fetchIntegrityCheck");async function Mv(e){await e.secureCache.clear(),await e.generalStorage.remove(_s),await e.generalStorage.remove(mn);let t=await gn(),r=t.privateKeyIdentifiers.map(f=>el(f)),n=t.seedIdentifiers.map(f=>tl(f)),o=t.seedlessIdentifiers.map(f=>rl(f));await e.secretsStorage.removeSecureValue([...r,...o,...n]),await e.generalStorage.remove(Ei),await e.secretsStorage.removeSecureValue(Xu);let a=Mi(_s),l=Mi(Ei);a(null),l(null)}i(Mv,"clearVault");var Tv=Xe(function*(){let e=Cn(_s);return e?(e=gv(e),e=yield PM(e),e):null});async function PM(e){let t=!1;return e.accounts.forEach(r=>{switch(r.type){case P.PrivateKey:{t=vv(r)||t;break}case P.ReadOnly:break;case P.Ledger:case P.Seed:case P.Seedless:Object.values(r.chains).forEach(n=>{t=vv(n)||t});break;case P.SeedVault:case P.KMSVault:break;default:xe(r)}}),e}i(PM,"computeBitcoinAddressesIfNeeded");function vv(e){let t=!1;switch(e.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(Kt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=Ct({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}i(vv,"computeBitcoinAddressesForChain");function BM(e,t){let r=Sd(t),n=[];for(let o of e){let a=Sd(o),l=Array.from(r.addresses).some(m=>a.addresses.has(m)),f=Array.from(r.publicKeys).some(m=>a.publicKeys.has(m));(l||f)&&n.push(o)}return n}i(BM,"existingAccountsMatchingAccount");async function KM(e){let t=await gn();return t.seedIdentifiers=[...new Set([...t.seedIdentifiers,e])],Mi(Ei)({version:1,...t})}i(KM,"storeSecretIdentifierForSeed");async function OM(e){let t=await gn();return t.seedlessIdentifiers=[...new Set([...t.seedlessIdentifiers,e])],Mi(Ei)({version:1,...t})}i(OM,"storeSecretIdentifierForSeedless");async function CM(e){let t=await gn();return t.privateKeyIdentifiers=[...new Set([...t.privateKeyIdentifiers,e])],Mi(Ei)({version:1,...t})}i(CM,"storeSecretIdentifierForPrivateKey");function bv(e){switch(e){case P.ReadOnly:return 1;case P.PrivateKey:return 2;case P.Seedless:case P.Seed:return 3;case P.Ledger:return 4;case P.SeedVault:return 5;case P.KMSVault:return 6;default:return 0}}i(bv,"accountTypeOverridePriority");var RM=d.object({version:d.literal(1),accounts:d.array(d.any())}),UM=d.object({version:d.literal(1),seedIdentifiers:d.array(d.string()),seedlessIdentifiers:d.array(d.string()),privateKeyIdentifiers:d.array(d.string())}),NM=d.object({version:d.literal(1),mapping:d.record(d.string(),d.string())}),[Cn,Mi,iF]=Bc("vault",[{key:_s,type:"object",validator:RM,nullable:!0},{key:Ei,type:"object",validator:UM,nullable:!0},{key:mn,type:"object",validator:NM,nullable:!0}]);async function Ur(e,t){let r=await wv(e,t);if(!r)throw new fn;let n=kr.from(r.entropy);return r.entropy.fill(0),n}i(Ur,"exportEntropy");async function Dt(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await Ur(e,t),{seed:l}=await a.foldAsync(Oa);r=l,await e.secureCache.setSeed(t,r)}let o=kr.from(r);return r.fill(0),o}i(Dt,"exportSeed");var Zh="m/23001'/0'";async function Qi(e,t){let r;switch(t.type){case P.Seedless:case P.Seed:r=t.seedIdentifier;break;case P.PrivateKey:r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,Zh);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let o;switch(t.type){case P.Seedless:case P.Seed:{o=(await Dt(e,t.seedIdentifier)).fold(l=>new os(l));break}case P.PrivateKey:{let a=await On(e,t.privateKeyIdentifier);o=new os(a.privateKey);break}}try{let a=o.derivePath({ellipticCurve:"ed25519",derivationPath:Zh,bytesInPrivateKey:64}),l=Hu(a.secretKey,Oo.CURVE.n),f=Oo.getPublicKey(l);return await e.secureCache.setClientJWTSigner(r,Zh,{p256pubkey:f,p256privkey:l}),{publicKey:f,privateKey:l}}finally{o.cleanup()}}i(Qi,"deriveClientJWTKeypair");h();p();function DM(e){return e.type===P.Seed||e.type===P.Seedless||e.type===P.PrivateKey}i(DM,"isKMSAuthenticatorSourceAccount");async function ol(){let e=await st(),t=[];for(let r of e)DM(r)&&t.push(r);return t.sort((r,n)=>{let o=i(a=>a==="seedless"?0:a==="seed"?1:a==="privateKey"?2:3,"priority");return o(r.type)-o(n.type)}),t}i(ol,"getAllSignerAccounts");function Iv(e,t){let r;async function n(){if(r)return r;let a=await ol();if(a.length===0)throw new Error("Vault requires a seed, seedless, or private key account to derive the KMS authenticator. Add a local secret before calling getKMSInstance().");if(!Oc("enable-kms-authenticator-mapping")||!t)return r=a[0],r;let m=Cn(mn)?.mapping;if(!m)throw new Error("KMS authenticator mapping not found. Mapping must be built before creating KMS instances. Rebuild mapping required.");let A=m[t];if(!A)throw new Error(`KMS authenticator mapping missing for ${t}.`);let T=a.find(I=>(I.type===P.PrivateKey?I.privateKeyIdentifier:I.seedIdentifier)===A);if(!T)throw j.addBreadcrumb(F.Account,`KMS authenticator mapping references missing signer account ${A}.`,Q.Error),new Error(`KMS authenticator mapping references missing signer account ${A}.`);return r=T,j.addBreadcrumb(F.Account,`Using cached KMS authenticator account ${T.identifier} for ${t}`,Q.Debug),r}i(n,"getSigningAccount");async function o(){let a=await n();return Qi(e,a)}return i(o,"getKeyPair"),{getPublicKey:i(async()=>it((await o()).publicKey),"getPublicKey"),signRpcPayload:i(async a=>{let l=await o(),f=await e.vaultSigner.signWithKeypair(l,{isKMSPKIAuthenticator:!0,payload:a});if("status"in f&&f.status==="error")throw new Error(f.message);return f.signature},"signRpcPayload")}}i(Iv,"createVaultKMSPKIAuthenticator");function _v(e){return Es({authenticator:Iv(e)})}i(_v,"createVaultKMS");function Ra(e,t){let r=Iv(e,t);return Es({authenticator:r})}i(Ra,"createVaultKMSForAccount");function VM(e,t){async function r(){return Qi(e,t)}return i(r,"getKeyPair"),{getPublicKey:i(async()=>it((await r()).publicKey),"getPublicKey"),signRpcPayload:i(async n=>{let o=await r(),a=await e.vaultSigner.signWithKeypair(o,{isKMSPKIAuthenticator:!0,payload:n});if("status"in a&&a.status==="error")throw new Error(a.message);return a.signature},"signRpcPayload")}}i(VM,"createAuthenticatorForAccount");async function kv(e,t,r){try{let n=VM(e,t),o=Es({authenticator:n}),{result:a}=await o.getPhantomOrganization({})??{result:null};if(!a)return null;if(r===void 0)return a;let l=await o.getWalletWithTag({organizationId:a.organizationId,tag:r.tag,accounts:r.accounts});return l?.result&&r.accountSelector(l.result)?a:null}catch{return null}}i(kv,"tryGetPhantomOrgForAccount");async function Jh(e,t){let r=Mi(mn),n=Cn(mn)?.mapping||{},o=t(n);r({version:1,mapping:o})}i(Jh,"updateKMSMappingAtomically");async function Pv(e){j.addBreadcrumb(F.Account,"Rebuilding KMS authenticator mapping",Q.Info);let r=(await st()).filter(n=>n.type===P.KMSVault);for(let n of r)await Ua(e,n.kms.walletId,n.kms.tag,!1)}i(Pv,"rebuildKMSAuthenticatorMappingInternal");async function Ua(e,t,r,n=!0){let o=Or(t,r);if((Cn(mn)?.mapping||{})[o]&&n)return;let l=await ol();for(let f of l){let m=f.type===P.PrivateKey?f.privateKeyIdentifier:f.seedIdentifier;if(await kv(e,f,{tag:r,accountSelector:i(T=>T?.walletId===t,"accountSelector")})){await Jh(e,T=>({...T,[o]:m})),j.addBreadcrumb(F.Account,`Updated KMS account mapping ${o} to signer ${m}`,Q.Debug);return}}j.addBreadcrumb(F.Account,`No signer account found for KMS account ${o}`,Q.Error)}i(Ua,"updateKMSVaultAccountMapping");async function Bv(e,t){if(!t){j.addBreadcrumb(F.Account,"updateCashAccountMapping called without cashAddress, skipping",Q.Debug);return}let r=`cash:${t}`;if((Cn(mn)?.mapping||{})[r])return;let o=await ol(),a=await Kh(0);for(let l of o){let f=l.type===P.PrivateKey?l.privateKeyIdentifier:l.seedIdentifier;try{if(await kv(e,l,{tag:"cash",accounts:a,accountSelector:i(A=>A?A.accounts.some(T=>T.address.toLowerCase()===t.toLowerCase()):!1,"accountSelector")})){await Jh(e,A=>({...A,[r]:f})),j.addBreadcrumb(F.Account,`Updated cash account mapping ${r} to signer ${f}`,Q.Debug);return}}catch(m){j.addBreadcrumb(F.Account,`Failed to check cash account for signer ${f}: ${m}`,Q.Debug)}}j.addBreadcrumb(F.Account,`No signer account found for cash account ${t}`,Q.Error)}i(Bv,"updateCashAccountMapping");async function Kv(e,t,r){let n=Or(t,r);await Jh(e,o=>{if(!o[n])return j.addBreadcrumb(F.Account,`KMS account mapping ${n} not found, nothing to remove`,Q.Debug),o;let a={...o};return delete a[n],j.addBreadcrumb(F.Account,`Removed KMS account mapping ${n}`,Q.Debug),a})}i(Kv,"removeKMSVaultAccountMapping");h();p();function LM(e){switch(e.chainType){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return;default:xe(e)}}i(LM,"assertSupportedKMSChain");function Yh(e){switch(LM(e),e.chainType){case _.Solana:case _.EVM:return{chainType:e.chainType,publicKey:e.address,pathType:e.pathType};case _.Sui:return{chainType:e.chainType,publicKey:e.publicKey,address:e.address,pathType:e.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,...r}=e;return{...r,addresses:{...t}}}default:return xe(e)}}i(Yh,"buildVaultStorageKMSChainAddress");function Ov(e){let t={};for(let[,r]of Object.entries(e)){let n=Yh(r);t[r.chainType]=n}return t}i(Ov,"buildVaultStorageKMSChainAddresses");async function Cv(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l}){if(j.addBreadcrumb(F.Account,`[addKMSVaultAccount] ENTRY: walletId=${r}`,Q.Info),n!==Ut)throw new Error(`KMS vault accounts must use tag "${Ut}", received "${n}".`);let f=Ov(a),m=Or(r,n),A={version:1,type:P.KMSVault,identifier:m,derivationIndex:o,kms:{organizationId:t,walletId:r,tag:n},chains:f,...l&&{apiEnvironment:l}};return await Nt(e,A),Ua(e,r,n).catch(T=>{j.captureError(T,F.Account)}),A}i(Cv,"addKMSVaultAccount");h();p();h();p();var sl=Object.values(Kt);function Rv(e){switch(e.chainType){case _.Solana:case _.EVM:{let t=FM(e.chainType,e.address,e.publicKey);return{chainType:e.chainType,pathType:e.pathType,address:t}}case _.Sui:{let t=e.address??Ct({publicKey:e.publicKey,addressType:e.chainType});return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,addresses:jM(e.chainType,e.publicKey,e.addresses)};default:return xe(e)}}i(Rv,"normalizeChainAddress");function FM(e,t,r){if(t)return t;if(r)return Ct({publicKey:r,addressType:e});throw new Error(`Expected address or publicKey for chain type ${e}`)}i(FM,"getAddressForEvmOrSolana");function jM(e,t,r){return r?zM(e,t,r):qM(e,t)}i(jM,"getBitcoinAddresses");function zM(e,t,r){let n={...r};for(let o of sl)n[o]||(n[o]=Ct({publicKey:t,addressType:e,networkID:o}));return n}i(zM,"fillMissingBitcoinAddresses");function qM(e,t){return sl.reduce((r,n)=>(r[n]=Ct({publicKey:t,addressType:e,networkID:n}),r),{})}i(qM,"deriveAllBitcoinAddresses");function Uv(e){let t=Rv(e);switch(t.chainType){case _.Solana:case _.EVM:return t;case _.Sui:return t;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return t;default:return xe(t)}}i(Uv,"buildVaultChainAddress");function Nv(e){let t=Rv(e);switch(t.chainType){case _.Solana:case _.EVM:return{chainType:t.chainType,publicKey:t.address,pathType:t.pathType};case _.Sui:return{chainType:t.chainType,publicKey:t.publicKey,address:t.address,pathType:t.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:t.chainType,publicKey:t.publicKey,addresses:t.addresses,pathType:t.pathType};default:return xe(t)}}i(Nv,"buildVaultStorageChainAddress");function WM(e,t){let r=!1,n={...e};for(let[o,a]of Object.entries(t)){let l=o,f=Yh(a),m=e[l];if(!m){n[l]=f,r=!0;continue}switch(f.chainType){case _.Solana:case _.EVM:case _.Sui:continue;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let A=m,T=f,I=A.addresses?{...A.addresses}:{};for(let k of sl){let O=T.addresses?.[k];O&&I[k]!==O&&(I[k]=O,r=!0)}n[l]={...A,addresses:I};break}default:xe(f)}}return{merged:n,changed:r}}i(WM,"deepMergeChains");async function Dv(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a}){if(n!==Ut)throw new Error(`KMS vault accounts must use tag "${Ut}", received "${n}".`);let l=Or(r,n),f=await st(),m=f.findIndex(C=>C.type===P.KMSVault&&C.identifier===l);if(m===-1)throw new Error(`KMSVault account not found for identifier ${l}`);let A=f[m];if(A.kms.organizationId!==t||A.kms.walletId!==r||A.kms.tag!==n||A.derivationIndex!==o)throw new Error(`KMS vault metadata mismatch for identifier ${l} (existing data retained, incoming rejected).`);let{merged:T,changed:I}=WM(A.chains,a);if(!I)return A;let k={...A,chains:T},O=[...f];return O[m]=k,await Rr(O),k}i(Dv,"upsertKMSVaultChains");h();p();h();p();var Qh=ue(ts());function ks(e){return e.fold(Qh.keccak256)}i(ks,"identifierForSeed");function Xi(e,t,r){let n=hi[r];return Qh.keccak256(`${e}:${t}:${n}`)}i(Xi,"identifierForSeedAccount");function Rn(e,t,r,n){let o={};for(let a of n){let{publicKey:l}=e.keypairGenerator.generateKeypairFromSeed(t,r,a),f=un.getAddressType(a),m=HM({addressType:f,derivationPathType:a,publicKey:l});o[f]=Nv(m)}return o}i(Rn,"storageChainAddresses");function HM({addressType:e,derivationPathType:t,publicKey:r}){switch(e){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e,pathType:t,publicKey:r};default:return xe(e)}}i(HM,"toChainAddressInput");async function Vv(e,t){let r=new Set,n=await st();for(let a of n)a.type===P.Seed&&a.seedIdentifier===t&&hi[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Lv(e,t,o)}i(Vv,"addAccountForExistingSeed");async function Lv(e,t,r){try{return await $M(e,t,r)}catch(n){if(n instanceof kn)return await Lv(e,t,r+1);throw n}}i(Lv,"addAccountForSeedWithDerivationIndex");async function $M(e,t,r){let n=await Dt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Qt(o),l=await Xi(t,r,a[0]),f={version:1,type:P.Seed,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Rn(e,n,r,a)};return await Nt(e,f,!1),f}i($M,"_addAccountForExistingSeed");h();p();var $v=ue(Y1());var Gv=ue(vg()),Zv=ue(Hv()),Jv=ue(ts());function XM(e,t,r){let n=hi[r];return Jv.keccak256(`${e}:${t}:${n}`)}i(XM,"_identifierForLedgerAccount");async function Yv(e,t,r){let n=[];for(let o of r){if(o.addresses.length===0&&o.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let a=o.addresses[0]?.pathType||o.publicKeys[0]?.pathType,l=XM(t,o.derivationIndex,a);Gv.initEccLib($v);let f=(0,Zv.ECPairFactory)($v),m={...o.addresses.reduce((T,I)=>{let k=un.getAddressType(I.pathType);switch(k){case _.EVM:case _.Solana:{T[k]={chainType:k,pathType:I.pathType,publicKey:I.value};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error("Bitcoin accounts should be using public key not computed addresses");case _.Sui:throw new Ff("add ledger account");default:xe(k)}return T},{}),...o.publicKeys.reduce((T,I)=>{let k=un.getAddressType(I.pathType);switch(k){case _.EVM:case _.Solana:throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let O=f.fromPublicKey(Buffer.from(I.value,"hex")),C=new Uint8Array(O.publicKey);T[k]={chainType:k,pathType:I.pathType,publicKey:C,addresses:Object.values(Kt).reduce((R,V)=>({...R,[V]:Ct({publicKey:C,addressType:k,networkID:V})}),{})};break}case _.Sui:throw new Ff("add ledger account");default:xe(k)}return T},{})},A={version:1,type:P.Ledger,identifier:l,ledgerGroupIdentifier:t,derivationIndex:o.derivationIndex,chains:m};n.push(A),await Nt(e,A)}return n}i(Yv,"addLedgerAccounts");h();p();var Qv=ue(ts());function eT(e){return Qv.keccak256(e)}i(eT,"_identifierForPrivateKey");async function Xv(e,t,r,n){let o=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),a=await gn(),l=eT(o.publicKey);if((a?.privateKeyIdentifiers??[]).includes(l))throw new ba;let A={version:1,identifier:l,name:n,chainType:t,privateKey:Buffer.from(o.privateKey)},T=l,I;switch(t){case _.EVM:case _.Solana:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:Ct({publicKey:o.publicKey,addressType:t}),chainType:t};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,addresses:Object.values(Kt).reduce((k,O)=>({...k,[O]:Ct({publicKey:o.publicKey,addressType:t,networkID:O})}),{}),chainType:t};break}case _.Sui:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,address:Ct({publicKey:o.publicKey,addressType:t}),chainType:t};break}default:xe(t)}if(!I)throw new Error("unable to create a private key account based on the address type");return await Nt(e,I),await xv(e,A),I}i(Xv,"addPrivateKeyAccount");h();p();var eb=ue(ts());function tT(e){return eb.keccak256(e)}i(tT,"_identifierForReadOnlyAccount");async function tb(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new ya;let n=tT(r),o={version:1,type:P.ReadOnly,identifier:n,addresses:t};return await Nt(e,o),o}i(tb,"addReadonlyAccount");h();p();async function rb(e,t){let r=new Set,n=await st();for(let a of n)a.type===P.Seedless&&a.seedIdentifier===t&&hi[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return nb(e,t,o)}i(rb,"addAccountForExistingSeedless");async function nb(e,t,r){try{return await rT(e,t,r)}catch(n){if(n instanceof kn)return await nb(e,t,r+1);throw n}}i(nb,"addAccountForSeedWithDerivationIndex");async function rT(e,t,r){let n=await Dt(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Qt(o),l=await Xi(t,r,a[0]),f={version:1,type:P.Seedless,identifier:l,seedIdentifier:t,derivationIndex:r,chains:Rn(e,n,r,a)};return await Nt(e,f,!1),f}i(rT,"_addAccountForExistingSeed");h();p();h();p();h();p();async function Ks(e,t){let r=await gn(),n=ks(t),o=r?.seedIdentifiers??[],a=r?.seedlessIdentifiers??[];return o.concat(a).includes(n)}i(Ks,"isExistingSeed");async function cl(e,t,r,n){if((await il()).length>0)throw new Dc;if(n.length===0)throw new va;if(await Ks(e,t))throw new Ao;let l=ks(t),f=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Sv(e,f);let m=[],A=await Dt(e,l);for(let T of n){let I=Xi(l,T.derivationIndex,T.derivationPathTypes[0]),k=Rn(e,A,T.derivationIndex,T.derivationPathTypes),O={version:1,type:P.Seedless,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:k};await Nt(e,O),m.push(O)}return m}i(cl,"addSeedlessWithMultipleAccounts");async function ib(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Qt(n);return(await cl(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}i(ib,"addSeedlessWithDefaultAccount");h();p();h();p();async function ul(e,t,r,n,o=!1){let a=await Ks(e,t);if(!o&&a)throw new Ao;let l=ks(t),f=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Av(e,f);let m=[],A=await Dt(e,l);for(let T of n){let I=await Xi(l,T.derivationIndex,T.derivationPathTypes[0]),k=Rn(e,A,T.derivationIndex,T.derivationPathTypes),O={version:1,type:P.Seed,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:k};await Nt(e,O),m.push(O)}return m}i(ul,"addSeedWithMultipleAccounts");async function ob(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Qt(n);return(await ul(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}i(ob,"addSeedWithDefaultAccount");h();p();var sb=ue(ts());function nT(e){return sb.keccak256(e)}i(nT,"_identifierForSolanaSeedVaultAccount");async function ab(e,t){let r=[];for(let{publicKey:n,derivationPath:o,authToken:a}of t){let l=nT(n),f={version:1,type:P.SeedVault,identifier:l,derivationPath:o,authToken:a,publicKey:n,chainType:_.Solana};r.push(f),await Nt(e,f)}return r}i(ab,"addSolanaSeedVaultAccounts");h();p();h();p();async function ll(e,t,r){let o=(await st()).find(a=>a.identifier===t);if(!o)throw new _n;switch(o.type){case P.Seed:case P.Seedless:{let a=o.chains[r]?.pathType;if(!a)throw new ji;let l=await Dt(e,o.seedIdentifier),f=e.keypairGenerator.generateKeypairFromSeed(l,o.derivationIndex,a);return kr.from(f.privateKey)}case P.PrivateKey:{let a=await On(e,o.privateKeyIdentifier);if(a.chainType!==r)throw new ji;let l=e.keypairGenerator.generateKeypairFromPrivateKey(kr.from(a.privateKey),r);return kr.from(l.privateKey)}case P.Ledger:case P.SeedVault:case P.KMSVault:throw new ma;case P.ReadOnly:throw new ga;default:(a=>{throw new Error("invalid account type")})(o)}}i(ll,"exportPrivateKey");h();p();h();p();h();p();var Da=new Error("Unknown error"),fl=new Error("Invalid entropy length"),Na=new Error("Invalid mn*monic sentence length"),ip=new Error("Invalid checksum"),cb=new RangeError("Invalid mn*monic word"),np=new RangeError("Invalid wordlist"),op=new RangeError("Invalid wordlist index"),Nr=i((e,t)=>{if(!e)throw t},"assert");function to(e){Nr(e>=128,fl),Nr(e<=256,fl),Nr(e%32===0,fl)}i(to,"assertEntropyLengthIsValid");function Va(e){Nr(e>=12,Na),Nr(e<=24,Na),Nr(e%3===0,Na)}i(Va,"assertMnemonicSentenceLengthIsValid");function Os(e){Nr(e.length===2048,np),Nr(e.every(t=>typeof t=="string"),np)}i(Os,"assertWordlistIsValid");function sp(e,t){return Va(e),t(e*4/3)}i(sp,"generateEntropy");async function dl(e,t){let r=e.length*8;to(r);let n=r/32,o=await t(e),[a]=o,l=8-n,f=a>>>l<<l>>>0,m=new Uint8Array(e.length+1);return m.set(e,0),m[m.length-1]=f,m}i(dl,"deriveBits");function hl(e){let t=(e.length-1)*8;to(t);let r=t/32,n=(t+r)/11,o=new ArrayBuffer(n*4),a=new DataView(o),l=0,f=0,m=0;for(let A of e)if(m+=8,f|=A<<32-m,f>>>=0,m>=11){let T=f>>>21;Nr(T>=0&&T<=2047,op),a.setUint32(l*4,T,!0),l++,f<<=11,f>>>=0,m-=11}return Nr(l===n,Na),new Uint32Array(o)}i(hl,"mapBitsToIndexes");function ub(e){let t=e.length;Va(t);let r=11,n=e.length*r,o=new ArrayBuffer(Math.ceil(n/8)),a=new DataView(o),l=new DataView(e.buffer),f=e.length,m=0,A=0,T=0,I=8;for(let k=0;k<f;k++){let O=l.getUint32(k*4,!0);Nr(O<2048,op);let C=r;for(;C>0;){let R=32-C,V=C>=I?I:C;m|=O>>32-R-V&(1<<V)-1,A+=V,m<<=I-V,m>>>=0,C-=V,I-=V,I<=0&&(I=8),A%8===0&&(a.setUint8(T,m),T++,m=0)}}return f%8!==0&&a.setUint8(T,m),new Uint8Array(o)}i(ub,"mapIndexesToBits");function ap(e){Va(e.length);let t=ub(e),r=t.slice(0,t.length-1);return t.fill(0),r}i(ap,"indexesToEntropy");async function Cs(e,t){let r=e.length*8;to(r);let n=await dl(e,t),o=hl(n);return n.fill(0),o}i(Cs,"entropyToIndexes");function cp(e,t){Os(t);let r=new Set(t),n=new Uint32Array(24),o=0,a="";for(let f=0;f<e.length;f++){let m=e[f],A=m===32,T=f===e.length-1;if(T&&(a+=String.fromCharCode(m)),A||T){Nr(r.has(a),cb);let I=0;for(let k of t){if(a===k)break;I++}n[o++]=I,a=""}else a+=String.fromCharCode(m)}Va(o);let l=n.slice(0,o);return n.fill(0),l}i(cp,"mnemonicToIndexes");async function Rs(e,t,r){let n=await Cs(e,r),o=new Uint8Array(n.reduce((l,f)=>l+t[f].length+1,-1)),a=0;for(let l of n){a>0&&(o[a++]=32);let f=t[l];for(let m of f)o[a++]=m.charCodeAt(0)}return n.fill(0),o}i(Rs,"entropyToMnemonic");var rp=Uint8Array.of(109,110,101,109,111,110,105,99);async function Ti(e,t,r,n,o){let a=await Rs(e,r,n),l=new Uint8Array(rp.length+t.length);l.set(rp,0),l.set(t,rp.length);let f=await o(a,l,2048,64,"sha512");return l.fill(0),a.fill(0),f}i(Ti,"entropyToSeed");h();p();var Us=ue(G1(),1);h();p();var Ro=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function up(e){switch(e){case"english":return Ro}}i(up,"getWordlist");function lp(e){return t=>new e(t)}i(lp,"createFromEntropy");function fp(e,t){return async r=>{let n=null,o=null,a=null,l=null,f=null;try{o=ap(r),a=await dl(o,t),l=hl(a);let m=r[r.length-1],A=l[l.length-1];if(m!==A)throw ip;f=e.fromEntropy(o)}catch(m){m instanceof Error?n=m:(console.error(m),n=Da)}finally{if(o?.fill(0),a?.fill(0),l?.fill(0),n)throw n;return f}}}i(fp,"createFromIndexes");function dp(e,t){return async r=>{let n=null,o=null,a=null;try{o=cp(r,t),a=await e.fromIndexes(o)}catch(l){l instanceof Error?n=l:(console.error(l),n=Da)}finally{if(o?.fill(0),n)throw n;return a}}}i(dp,"createFromMnemonic");function hp(e,t){return r=>{let n=null,o=null,a=null;try{o=sp(r,t),a=e.fromEntropy(o)}catch(l){l instanceof Error?n=l:(console.error(l),n=Da)}finally{if(o?.fill(0),n)throw n;return a}}}i(hp,"createFromSentenceLength");var pp=class{static{i(this,"Bip39Factory")}static async webCrypto(t){let r=typeof t=="string"?await up(t):t;Os(r);let n=i(l=>self.crypto.getRandomValues(new Uint8Array(l)),"random"),o=i(async l=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",l)),"sha256"),a=i(async(l,f,m,A,T)=>{let I="SHA-"+T.substring(3),k=await self.crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),O=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:f,iterations:m,hash:I},k,A*8);return new Uint8Array(O)},"pbkdf2");return class La{static{i(this,"WebCryptoBip39")}static fromEntropy=lp(La);static fromIndexes=fp(La,o);static fromMnemonic=dp(La,r);static fromSentenceLength=hp(La,n);static wordlist=r;#e;constructor(f){to(f.length*8),this.#e=f.slice()}deriveSeed=i(async(f=new Uint8Array)=>Ti(this.#e,f,r,o,a),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(async()=>Cs(this.#e,o),"getIndexes");getMnemonic=i(async()=>Rs(this.#e,r,o),"getMnemonic");getSentenceLength=i(()=>{let f=this.#e.length*8,m=f/32;return(f+m)/11},"getSentenceLength")}}static async nodeCrypto(t){let r=typeof t=="string"?await up(t):t;Os(r);let n=i(l=>new Uint8Array((0,Us.randomBytes)(l).buffer),"random"),o=i(l=>new Uint8Array((0,Us.createHash)("sha256").update(l).digest().buffer),"sha256"),a=i(async(...l)=>new Promise((f,m)=>{(0,Us.pbkdf2)(...l,(A,T)=>{if(A){m(A);return}f(new Uint8Array(T.buffer))})}),"pbkdf2");return class Fa{static{i(this,"NodeCryptoBip39")}static fromEntropy=lp(Fa);static fromIndexes=fp(Fa,o);static fromMnemonic=dp(Fa,r);static fromSentenceLength=hp(Fa,n);static wordlist=r;#e;constructor(f){to(f.length*8),this.#e=f.slice()}deriveSeed=i(async(f=new Uint8Array)=>Ti(this.#e,f,r,o,a),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(async()=>Cs(this.#e,o),"getIndexes");getMnemonic=i(async()=>Rs(this.#e,r,o),"getMnemonic");getSentenceLength=i(()=>{let f=this.#e.length*8,m=f/32;return(f+m)/11},"getSentenceLength")}}static async customCrypto(t,r){let n=typeof t=="string"?await up(t):t;Os(n);let{random:o,sha256:a,pbkdf2:l}=r;return class ja{static{i(this,"CustomCryptoBip39")}static fromEntropy=lp(ja);static fromIndexes=fp(ja,a);static fromMnemonic=dp(ja,n);static fromSentenceLength=hp(ja,o);static wordlist=n;#e;constructor(m){to(m.length*8),this.#e=m.slice()}deriveSeed=i(async(m=new Uint8Array)=>Ti(this.#e,m,n,a,l),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(async()=>Cs(this.#e,a),"getIndexes");getMnemonic=i(async()=>Rs(this.#e,n,a),"getMnemonic");getSentenceLength=i(()=>{let m=this.#e.length*8,A=m/32;return(m+A)/11},"getSentenceLength")}}};async function lb(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await Ur(e,t);try{r=await a.foldAsync(async f=>Ti(f,new Uint8Array,Ro,ln,(m,A,T,I)=>cs(ln,m,A,{c:T,dkLen:I})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let o=kr.from(r);return r.fill(0),o}i(lb,"exportSeedV2");var iT=new fn,oT=new ji,sT=new pi,at={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},storageTemporarilyInaccessible:{status:"storage-temporarily-inaccessible",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}},Ns=i(e=>e instanceof Error?e.message.includes("User interaction is not allowed"):!1,"isStorageTemporarilyInaccessibleError"),hb=i(async e=>Kg(()=>Ev(e),Ns,3,200),"fetchIntegrityCheckWithRetry");async function pb(e){let t;try{if(t=await st(),t.length===0)return at.unonboarded}catch{return at.unableToLoadAccounts}return aT(e,t)}i(pb,"checkVaultIntegrity");var aT=i(async(e,t)=>{let r=await cT(e,t);if(r.status!=="safely-onboarded")return r;try{let l=await hb(e);if(l?.version===3&&l?.isSafelyOnboarded)return at.safelyOnboarded}catch(l){return Ns(l)?at.storageTemporarilyInaccessible:at.fetchIntegrityStorageError}let n=await db(e,t,P.Seed),o=await db(e,t,P.Seedless),a=await lT(e,t);if(n.status!=="safely-onboarded")return n;if(o.status!=="safely-onboarded")return o;if(a.status!=="safely-onboarded")return a;try{await Gh(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()})}catch(l){j.addBreadcrumb(F.Account,`storeIntegrityCheck (v3) failed: ${l instanceof Error?l.message:"unknown"}`,Q.Info)}return at.safelyOnboarded},"checkAndValidateAllSecrets"),cT=i(async(e,t)=>{try{if((await hb(e))?.isSafelyOnboarded)return at.safelyOnboarded}catch(o){return Ns(o)?at.storageTemporarilyInaccessible:at.fetchIntegrityStorageError}let r=await fb(e,t,P.Seed),n=await fb(e,t,P.Seedless);if(r.status!=="safely-onboarded")return r;if(n.status!=="safely-onboarded")return n;try{await Gh(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()})}catch(o){j.addBreadcrumb(F.Account,`storeIntegrityCheck (v1) failed: ${o instanceof Error?o.message:"unknown"}`,Q.Info)}return at.safelyOnboarded},"checkForExistingEntropy"),fb=i(async(e,t,r)=>{let n=new Set;for(let o of t)o.type===r&&n.add(o.seedIdentifier);for(let o of n)try{await Ur(e,o)}catch(a){if(Ns(a))return at.storageTemporarilyInaccessible;if(a instanceof Error){if(a.message===iT.message)return at.invalidIdentifier;if(a.message.match(/ExpoSecureStorage/))return at.fetchEntropyStorageError}return at.internalError}return at.safelyOnboarded},"checkExistingEntropy"),uT=i(e=>{if(Ns(e))return at.storageTemporarilyInaccessible;if(!(e instanceof Error))return at.invalidEntropy;let t=[[/ExpoSecureStorage/,at.fetchEntropyStorageError],[/InvalidEntropyBip39/,at.invalidEntropyBip39],[/LessThanTwelve/,at.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,at.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,at.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,at.invalidChecksumBits],[/InvalidEntropyBits/,at.invalidEntropyBits],[/InvalidChecksum/,at.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return at.invalidEntropy},"getCheckValidEntropyErrorResult"),db=i(async(e,t,r)=>{let n=new Set;for(let o of t)o.type===r&&n.add(o.seedIdentifier);for(let o of n)try{await lb(e,o)}catch(a){return uT(a)}return at.safelyOnboarded},"checkValidEntropy"),lT=i(async(e,t)=>{for(let r of t)if(r.type===P.PrivateKey)try{await ll(e,r.identifier,r.chainType)}catch(n){if(Ns(n))return at.storageTemporarilyInaccessible;if(n instanceof Error){if(n.message===oT.message)return at.invalidPkAddressType;if(n.message===sT.message)return at.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return at.fetchPkStorageError}return at.invalidPk}return at.safelyOnboarded},"checkValidPrivateKeys");h();p();async function mb(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await st();if(n.length===0)return r;let o=new Map;for(let a of n){if(a.type!==P.Seed&&a.type!==P.Seedless)continue;let l=o.get(a.seedIdentifier);l?l.push(a):o.set(a.seedIdentifier,[a])}for(let[a,l]of o){let f;for(let m of l)if(!(m.chains&&!Ed(Object.values(m.chains)[0].pathType)))for(let A of t){if(m.chains[A])continue;f||(f=await Dt(e,a));let I=Qt([A]),k=Rn(e,f,m.derivationIndex,I);m.chains={...m.chains,...k},r=!0}}return r&&await Rr(n),r}i(mb,"deriveAddresses");h();p();var mp=class extends Error{static{i(this,"SeedCacheCorruptionError")}sha256Count;mismatchCount;totalSeeds;constructor(t,r,n){super(`IDPLAT-295: Seed cache corruption detected - SHA256: ${t}, Mismatch: ${r}`),this.sha256Count=t,this.mismatchCount=r,this.totalSeeds=n}};async function yb(e){let t=await nl(),r=[];for(let{identifier:a}of t){let l=null,f=null,m=null;try{m=await e.secureCache.getSeed(a);let A=await Ur(e,a);if(l=await A.foldAsync(async T=>{let{seed:I}=await Oa(T);return I}),!m){r.push({seedIdentifier:a,digest:"uncached"});continue}if(gb(m,l)){r.push({seedIdentifier:a,digest:"sha512"});continue}if(f=await A.foldAsync(async T=>Ti(T,new Uint8Array,Ro,ln,(I,k,O,C)=>cs(ln,I,k,{c:O,dkLen:C}))),gb(m,f)){r.push({seedIdentifier:a,digest:"sha256"});continue}r.push({seedIdentifier:a,digest:"mismatch"})}catch(A){r.push({seedIdentifier:a,digest:"error",error:A instanceof Error?A.message:String(A)})}finally{l&&l.fill(0),f&&f.fill(0),m&&m.fill(0)}}let n=r.filter(a=>a.digest==="sha256").length,o=r.filter(a=>a.digest==="mismatch").length;if(n>0||o>0){let a=new mp(n,o,r.length);j.captureError(a,F.Account)}return r}i(yb,"DO_NOT_USE_diagnoseSeedCacheDigests");var gb=i((e,t)=>{if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0},"buffersEqual");h();p();h();p();h();p();h();p();var wb=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fT=BigInt(1),gp=BigInt(2),bb=i((e,t)=>(e+t/gp)/t,"divNearest");function dT(e){let t=wb,r=BigInt(3),n=BigInt(6),o=BigInt(11),a=BigInt(22),l=BigInt(23),f=BigInt(44),m=BigInt(88),A=e*e*e%t,T=A*A*e%t,I=br(T,r,t)*T%t,k=br(I,r,t)*T%t,O=br(k,gp,t)*A%t,C=br(O,o,t)*O%t,R=br(C,a,t)*C%t,V=br(R,f,t)*R%t,H=br(V,m,t)*V%t,X=br(H,f,t)*R%t,z=br(X,r,t)*T%t,ce=br(z,l,t)*C%t,se=br(ce,n,t)*A%t,ne=br(se,gp,t);if(!yp.eql(yp.sqr(ne),e))throw new Error("Cannot find square root");return ne}i(dT,"sqrtMod");var yp=Wu(wb,void 0,void 0,{sqrt:dT}),pl=Ju({a:BigInt(0),b:BigInt(7),Fp:yp,n:vb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i(e=>{let t=vb,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-fT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,l=BigInt("0x100000000000000000000000000000000"),f=bb(a*e,t),m=bb(-n*e,t),A=Jt(e-f*r-m*o,t),T=Jt(-f*n-m*a,t),I=A>l,k=T>l;if(I&&(A=t-A),k&&(T=t-T),A>l||T>l)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:I,k1:A,k2neg:k,k2:T}},"splitScalar")}},Qu),nH=BigInt(0);var iH=pl.ProjectivePoint;async function xb(){let e=pl.utils.randomPrivateKey();return{publicKey:pl.getPublicKey(e),privateKey:e}}i(xb,"deriveAgentKeypair");var Ab=i(e=>`${cr}.perps.agent.keypair.${e}`,"agentWalletStorageKey"),ml=i(async(e,t,r=!1)=>{let n=await hT(e,t);if(n&&!r)return n;let o=await xb();return await pT(e,o,t),o},"exportAgentWalletKeypair"),hT=i(async(e,t)=>{let r=Ab(t),n=null;try{n=await e.secretsStorage.getSecureValue(r)}catch{}if(!n)return null;let o=n.keyPair,a=new Uint8Array(Buffer.from(o.publicKey.bytes,o.publicKey.encoding)),l=new Uint8Array(Buffer.from(o.privateKey.bytes,o.privateKey.encoding));return{publicKey:a,privateKey:l}},"getAgentWalletFromStorage"),pT=i(async(e,t,r)=>{let n=Ab(r),o={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},a={version:1,identifier:r,keyPair:o};await e.secretsStorage.setSecureValue(n,a)},"setAgentWalletInStorage");var Sb=i(async(e,t,r=!1)=>{let{publicKey:n}=await ml(e,t,r);return Ct({publicKey:n,addressType:_.EVM})},"getAgentAddress");h();p();var mT=i(e=>e.type===P.Seed||e.type===P.Seedless||e.type===P.PrivateKey,"isAccountWithKey"),Eb=i(async(e,t)=>{let r=await st();if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let o=r.filter(mT).find(l=>l.type===P.PrivateKey?l.privateKeyIdentifier===t:l.seedIdentifier===t);if(!o)throw new Error("Unable to derive authentication public key for given secret identifier.");let a=await Qi(e,o);return it(a.publicKey)},"getAuthenticationPublicKey");h();p();h();p();function gl(e){switch(e.type){case P.Seed:return za(e);case P.Seedless:return qa(e);case P.PrivateKey:return bp(e);case P.Ledger:return vp(e);case P.SeedVault:return wp(e);case P.ReadOnly:return e;case P.KMSVault:return yl(e)}}i(gl,"toExternalVaultAccount");function yl(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:m,...A}=l;f={...A,address:m};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:m,...A}=l,T=Object.values(Kt).reduce((I,k)=>{let O=m?m[k]:void 0;if(!O)throw new Fi;return{...I,[k]:O}},{});f={...A,addresses:T};break}case _.Sui:{f=l;break}}o[a]=f}return{...n,chains:o}}i(yl,"toExternalKMSVaultAccount");function vp(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:m,...A}=l;f={...A,address:m};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:m,...A}=l,T=Object.values(Kt).reduce((I,k)=>{let O=m?m[k]:void 0;if(!O)throw new Fi;return{...I,[k]:O}},{});f={...A,addresses:T};break}case _.Sui:{f=l;break}}o[a]=f}return{...n,chains:o}}i(vp,"toExternalVaultLedgerAccount");function bp(e){switch(e.chainType){case _.Solana:case _.EVM:{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,version:r,...n}=e,o=Object.values(Kt).reduce((a,l)=>{let f=t?t[l]:void 0;if(!f)throw new Fi;return{...a,[l]:f}},{});return{...n,addresses:o}}case _.Sui:return e}}i(bp,"toExternalVaultPrivateKeyAccount");function wp(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}i(wp,"toExternalSolanaSeedVaultAccount");function za(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:m,...A}=l;f={...A,address:m};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:m,...A}=l,T=Object.values(Kt).reduce((I,k)=>{let O=m?m[k]:void 0;if(!O)throw new Fi;return{...I,[k]:O}},{});f={...A,addresses:T};break}case _.Sui:{f=l;break}}o[a]=f}return{...n,chains:o}}i(za,"toExternalVaultSeedAccount");function qa(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let f;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:m,...A}=l;f={...A,address:m};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:m,...A}=l,T=Object.values(Kt).reduce((I,k)=>{let O=m?m[k]:void 0;if(!O)throw new Fi;return{...I,[k]:O}},{});f={...A,addresses:T};break}case _.Sui:f=l}o[a]=f}return{...n,chains:o}}i(qa,"toExternalVaultSeedlessAccount");function gT(e){return e===P.Seed||e===P.Seedless||e===P.PrivateKey}i(gT,"needsLocalSecret");async function Mb(e,t){try{return await e(),!0}catch(r){if(r instanceof t)return!1;throw r}}i(Mb,"checkSecretExists");function yT(e){let t=gl(e),r=dn(t),n={};for(let{addressType:o,address:a}of r){if(!a)continue;let l=o;n[l]||(n[l]=a)}return n}i(yT,"extractAddressesFromAccount");async function vT(e,t){let r=[],n=0,o=new Map;for(let a of t)if(gT(a.type))if(n++,a.type===P.Seed||a.type===P.Seedless){let l=a.seedIdentifier;if(!o.has(l)){let m=await Mb(()=>Ur(e,l),fn);o.set(l,m)}(o.get(l)??!1)||r.push(a)}else a.type===P.PrivateKey&&(await Mb(()=>On(e,a.privateKeyIdentifier),pi)||r.push(a));return{accountsToHeal:r,totalAccountsChecked:n}}i(vT,"identifyAccountsWithMissingSecrets");async function Tb(e){let t={healedAccounts:[],failedAccounts:[],totalAccountsChecked:0},r=await st(),{accountsToHeal:n,totalAccountsChecked:o}=await vT(e,r);if(t.totalAccountsChecked=o,n.length===0)return t;j.addBreadcrumb(F.Account,`healAccountsWithMissingSecrets: Found ${n.length} accounts with missing secrets`,Q.Error);let a=[];for(let l of n)try{let f=yT(l);if(Object.keys(f).length===0){t.failedAccounts.push({identifier:l.identifier,type:l.type,error:"No valid addresses could be extracted"});continue}let m={version:1,type:P.ReadOnly,identifier:l.identifier,addresses:f};a.push(m),t.healedAccounts.push({identifier:l.identifier,originalType:l.type,addresses:f})}catch(f){t.failedAccounts.push({identifier:l.identifier,type:l.type,error:f instanceof Error?f.message:"Unknown error"})}if(a.length>0){let l=new Map(a.map(m=>[m.identifier,m])),f=r.map(m=>l.get(m.identifier)??m);await Rr(f)}if(t.healedAccounts.length>0){let l=t.failedAccounts.length>0?"partial":"success";j.captureMessage(`heal_accounts_with_missing_secrets:${l} healed=${t.healedAccounts.length}, failed=${t.failedAccounts.length}`,F.Account,Q.Error)}return t.failedAccounts.length>0&&t.healedAccounts.length===0&&j.captureMessage(`heal_accounts_with_missing_secrets: all_failed=${t.failedAccounts.length}`,F.Account,Q.Error),t}i(Tb,"healAccountsWithMissingSecrets");h();p();async function Ib(e,t){let r=await st();if(r.length===0)throw new _n;let n=r.find(l=>l.identifier===t),o=n?.type===P.KMSVault,a=r.filter(l=>l.identifier!==t);if(await Rr(a),await $h(e),o){let l=n;await Kv(e,l.kms.walletId,l.kms.tag)}}i(Ib,"removeAccount");h();p();async function _b(e,t,r){let n=await st();if(r<0||r>=n.length)throw new _n;let o=n.map(l=>l.identifier).indexOf(t);if(o<0)throw new _n;if(o===r)return;let a=n[o];n.splice(o,1),n.splice(r,0,a),await Rr(n)}i(_b,"reorderAccount");h();p();h();p();var bT="cash",wT="cash",xT={pathType:ee.Bip44ChangeSolana,index:0};async function kb(e){j.addBreadcrumb(F.Cash,"Getting user's Cash account from KMS",Q.Info);let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();j.addBreadcrumb(F.Cash,`Successfully got user's Phantom Org (orgId: ${xp(r.organizationId)})`,Q.Info),t=r.organizationId}catch(r){j.addBreadcrumb(F.Cash,"[KMS] Error getting user's Phantom Org",Q.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw j.captureError(n,F.Cash),n}try{let{result:{walletId:r,walletName:n,accounts:o}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:bT,tag:wT,mnemonicLength:24,accounts:[{derivationPath:di(xT),curve:"Ed25519",addressFormat:"Solana"}]});if(o.length===0)throw new Error("No Cash account found");return j.addBreadcrumb(F.Cash,`Successfully got user's Cash wallet (walletId: ${xp(r)}, walletName: ${n}, orgId: ${xp(t)})`,Q.Info),{organizationId:t,walletId:r,walletName:n,account:o[0]}}catch(r){j.addBreadcrumb(F.Cash,"[KMS] Error getting user's Cash wallet",Q.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw j.captureError(n,F.Cash),n}}i(kb,"getCashKMSAccount");var xp=i(e=>e?.slice(0,5)??"","sanitizeString");h();p();var AT="m/24001'/0'",Pb=i(async e=>{let t=await st();if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],n;switch(r.type){case P.Seed:case P.Seedless:{n=(await Dt(e,r.seedIdentifier)).fold(a=>new os(a));break}case P.PrivateKey:{let o=await On(e,r.privateKeyIdentifier);n=new os(o.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let o=n.derivePath({ellipticCurve:"ed25519",derivationPath:AT,bytesInPrivateKey:64});return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{n.cleanup()}},"deriveCashKeypair");h();p();h();p();var Qa=ue(an()),qn=ue(Gp());h();p();h();p();var LI=d.array(d.object({address:d.string(),signingIndexes:d.array(d.number()),sigHash:d.number().optional(),isScriptSpend:d.boolean().optional()})),Zw=d.object({chainType:da,signingType:d.literal("transaction"),message:d.string().min(1),inputsToSign:LI.optional(),finalize:d.boolean()}),FI=d.object({chainType:da,signingType:d.literal("message"),message:d.instanceof(Uint8Array)}),jI=Zw.or(FI),Jw=d.object({chainType:d.literal(_.Sui),signingType:d.literal("transaction"),transaction:d.instanceof(Uint8Array)}),Yw=d.object({chainType:d.literal(_.Sui),signingType:d.literal("personalMessage"),message:d.instanceof(Uint8Array)}),zI=Jw.or(Yw),Qw=d.object({chainType:d.literal(_.Solana),signingType:d.literal("transaction"),message:d.union([d.string().min(1),d.instanceof(Uint8Array)])}),Xw=d.object({chainType:d.literal(_.Solana),signingType:d.literal("message"),message:d.string().min(1)}),ex=Qw.or(Xw),tx=d.object({chainType:d.literal(_.EVM),signingType:d.literal("transaction"),message:d.string().min(1)}),Zp=d.object({chainType:d.literal(_.EVM),signingType:d.literal("message"),message:d.string().min(1)}),Jp=d.object({chainType:d.literal(_.EVM),signingType:d.literal("typedData"),version:d.literal(1),data:xc}),Yp=d.object({chainType:d.literal(_.EVM),signingType:d.literal("typedData"),version:d.literal(3),data:Ac}),Qp=d.object({chainType:d.literal(_.EVM),signingType:d.literal("typedData"),version:d.literal(4),data:Sc}),qI=tx.or(Zp).or(Jp).or(Yp).or(Qp),WI=d.object({isJWT:d.literal(!0),data:Yf}),zn=d.object({policyName:d.string().optional()}),HI=Qw.merge(zn),$I=Xw.merge(zn),eJ=HI.or($I),GI=tx.merge(zn),ZI=Zp.merge(zn),JI=Jp.merge(zn),YI=Yp.merge(zn),QI=Qp.merge(zn),tJ=GI.or(ZI).or(JI).or(YI).or(QI),rJ=Zw.merge(zn),nJ=d.union([Jw.merge(zn),Yw.merge(zn)]),XI=d.object({isKMSPKIAuthenticator:d.literal(!0),payload:Vu}),iJ=d.object({organizationId:d.string(),walletId:d.string(),derivationPath:d.string()}),rx=d.object({isCash:d.literal(!0),data:ex}),e_=rx.extend({isCashKMS:d.literal(!0),cashAccountAddress:d.string()}),t_=Zp.extend({isAgentWallet:d.literal(!0)}),r_=Jp.extend({isAgentWallet:d.literal(!0)}),n_=Yp.extend({isAgentWallet:d.literal(!0)}),i_=Qp.extend({isAgentWallet:d.literal(!0)}),o_=d.union([t_,r_,n_,i_]),s_=d.object({status:d.literal("success"),signature:d.string()}),nx=d.object({status:d.literal("success"),signature:d.string()}),a_=d.object({status:d.literal("success"),signature:d.string(),message:d.instanceof(Uint8Array).optional()}),c_=d.object({status:d.literal("success"),signature:d.string()}),u_=d.object({status:d.literal("success"),signature:d.string(),signedJWT:Jf.optional()}),l_=d.object({status:d.literal("success"),signature:d.string()}),f_=nx;var Xp=ex.or(qI).or(jI).or(zI).or(WI).or(XI).or(o_).or(rx).or(e_),oe;(function(e){e.InvalidInput="invalidInput",e.InvalidAccountId="invalidAccountId",e.InvalidAddressType="invalidAddressType",e.InvalidMessageEncoding="invalidMessageEncoding",e.InvalidDerivationPath="invalidDerivationPath",e.InvalidRpcPayload="invalidRpcPayload",e.LedgerAppNotOpen="ledgerAppNotOpen",e.LedgerNotConnected="ledgerNotConnected",e.LedgerNeedPermission="ledgerNeedPermission",e.LedgerRejectAction="ledgerRejectAction",e.LedgerUnknownSignError="ledgerUnknownSignError",e.UnsupportedOperation="unsupportedOperation",e.InternalError="internalError",e.ExpiredTokenError="expiredToken",e.BeforeIATError="beforeTimeOfIssuance",e.InvalidClaimError="invalidClaim"})(oe||(oe={}));var d_=d.object({status:d.literal("error"),type:d.nativeEnum(oe),message:d.string()}),h_=d.union([u_,l_,f_,a_,s_,nx,c_,d_]),xt;(function(e){e.KeyPair="keyPair",e.Ledger="ledger",e.SeedVault="seedVault",e.KMS="kms"})(xt||(xt={}));var p_={[oe.InvalidInput]:{message:"Invalid input"},[oe.InvalidAccountId]:{message:"Invalid account identifier."},[oe.InvalidAddressType]:{message:"Invalid chain type."},[oe.InvalidMessageEncoding]:{message:"Invalid message encoding."},[oe.InvalidDerivationPath]:{message:"Invalid derivation path."},[oe.InvalidRpcPayload]:{message:"Invalid KMS RPC payload."},[oe.LedgerAppNotOpen]:{message:"Ledger App not open."},[oe.LedgerNotConnected]:{message:"Ledger not connected."},[oe.LedgerNeedPermission]:{message:"Need permission to connect to Ledger."},[oe.LedgerRejectAction]:{message:"Ledger user rejected action."},[oe.LedgerUnknownSignError]:{message:"Ledger unknown sign error."},[oe.UnsupportedOperation]:{message:"Unsupported operation."},[oe.InternalError]:{message:"Internal error."},[oe.ExpiredTokenError]:{message:"Token is expired"},[oe.BeforeIATError]:{message:"Received token before issuance time"},[oe.InvalidClaimError]:{message:"Claim is invalid"}},ye=i((e,t)=>({status:"error",type:e,message:t??p_[e].message}),"createVaultSignerError");var ix=i(()=>({type:xt.KeyPair,sign:i((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Qa.Buffer.from(e.privateKey.slice()),n=qn.SignTypedDataVersion.V1,{data:o}=t,a=(0,qn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Qa.Buffer.from(e.privateKey.slice()),n=qn.SignTypedDataVersion.V3,o=t.data,a=(0,qn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Qa.Buffer.from(e.privateKey.slice()),n=qn.SignTypedDataVersion.V4,o=t.data,a=(0,qn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=Qa.Buffer.from(e.privateKey);try{let o=(0,qn.personalSign)({privateKey:n,data:r});return Promise.resolve({status:"success",signature:o})}finally{n.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(ye(oe.InvalidMessageEncoding))}},"sign")}),"createAgentWalletKeypairSigner");h();p();var hr=ue(an());var ox=ue(vg()),e0=ue(X1());var t0=i(e=>e.length===32?e:e.slice(1,33),"toXOnly");function m_(e){return hr.Buffer.concat([(0,e0.encode)(e.byteLength),e])}i(m_,"encodeVarString");function g_(e){let{sha256:t}=ox.crypto,n=t(hr.Buffer.from("BIP0322-signed-message"));return t(hr.Buffer.concat([n,n,hr.Buffer.from(e)])).toString("hex")}i(g_,"bip0322Hash");var y_=i((e,t)=>{switch(e){case _.BitcoinTaproot:return tg.getPublicKey(t);case _.BitcoinNestedSegwit:return Vf(t,!0);case _.BitcoinNativeSegwit:return Vf(t,!0);default:throw new Error("Unsupported Address Type")}},"getSigningPk"),v_=i((e,t)=>{let r=Cg;switch(e){case _.BitcoinTaproot:return Ug(t,void 0,r);case _.BitcoinNativeSegwit:return qf(t,r);case _.BitcoinNestedSegwit:{let n=qf(t,r);return Rg(n,r)}default:throw new Error("Unsupported Address Type")}},"getSignerScript");function b_(e,t,r,n){let o=Rc.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(a=>{let l=ss(Kt.Mainnet,a.address),f=e[l];if(!f)throw new Error("missing private key for ("+l+")");let{publicKey:m,privateKey:A}=f;a.signingIndexes.forEach(T=>{let I=o.getInput(T),k=I.witnessUtxo?.script&&Ng.decode(I.witnessUtxo.script);if(!a.isScriptSpend&&!I.tapInternalKey&&k?.type==="tr"&&o.updateInput(T,{tapInternalKey:t0(hr.Buffer.from(m))}),a.sigHash)try{o.signIdx(A,T,[a.sigHash],fa(32))}catch{o.signIdx(A,T,void 0,fa(32))}else o.signIdx(A,T,void 0,fa(32));if(n)try{o.finalizeIdx(T)}catch{}})})}catch(a){throw console.error(a),new Error(`Error signing PSBT ${a.toString()}`)}return Promise.resolve(o.toPSBT(0))}i(b_,"signPsbt");var sx=i(()=>({type:xt.KeyPair,sign:i(async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=hr.Buffer.from(t.message).toString("utf8"),o=e[t.chainType]?.privateKey;if(!o)throw new Error("missing private key for ("+t.chainType+")");let a=hr.Buffer.from(o).toString("hex"),l=y_(r,a),f=v_(r,l),m=hr.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),A=0,T=4294967295,I=0,k=zf.encode(["OP_0",hr.Buffer.from(g_(n),"hex")]),O=new Rc({allowUnknownOutputs:!0,version:A});O.addOutput({amount:BigInt(0),script:f.script}),O.addInput({txid:m,index:T,sequence:I,finalScriptSig:k});let C=new Rc({allowUnknownOutputs:!0,version:A});C.addInput({txid:O.id,index:0,sequence:I,tapInternalKey:r===_.BitcoinTaproot?l:void 0,witnessUtxo:{script:f.script,amount:BigInt(0)},redeemScript:f.redeemScript}),C.addOutput({script:zf.encode(["RETURN"]),amount:BigInt(0)}),C.sign(hr.Buffer.from(a,"hex"),void 0,fa(32)),C.finalize();let R,V=C.getInput(0);if(V.finalScriptWitness?.length){let H=(0,e0.encode)(V.finalScriptWitness?.length);R=hr.Buffer.concat([H,...V.finalScriptWitness.map(X=>m_(X))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:R.toString("hex"),message:C.toBytes()}}case"transaction":{let r=await b_(e,t.inputsToSign??[],hr.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:hr.Buffer.from(r).toString("hex")}}}}catch{return ye(oe.InternalError)}},"sign")}),"createBitcoinKeyPairSigner");h();p();var cx=ue(la()),ux=ue(Ui());h();p();var ax=ue(la());function Cl(e,t,r){if(r!==_.Solana)return ye(oe.InvalidAddressType);if(e instanceof Uint8Array)return e;try{return t==="transaction"?ax.default.decode(e):Buffer.from(e,"utf8")}catch(n){return ye(oe.InvalidMessageEncoding,`Failed to decode message: ${n instanceof Error?n.message:"Unknown error"}`)}}i(Cl,"decodeSolanaMessage");var lx=i(()=>({type:xt.KeyPair,sign:i((e,t)=>{let r=t.data,n=Cl(r.message,r.signingType,r.chainType);if("status"in n)return Promise.resolve(n);let o=cx.default.encode(ux.default.sign.detached(n,e.privateKey));return Promise.resolve({status:"success",signature:o})},"sign")}),"createCashVaultSigner");h();p();var Js=ue(an()),fx=ue(H1());var Wn=ue(Gp()),dx=ue(ts());var hx=i(()=>({type:xt.KeyPair,sign:i((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Js.Buffer.from(e.privateKey.slice()),n=Wn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Wn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Js.Buffer.from(e.privateKey.slice()),n=Wn.SignTypedDataVersion.V3,o=t.data,a=(0,Wn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Js.Buffer.from(e.privateKey.slice()),n=Wn.SignTypedDataVersion.V4,o=t.data,a=(0,Wn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=(0,Wn.personalSign)({privateKey:Js.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=Js.Buffer.from(t.message.replace("0x",""),"hex"),n=new cg(e.privateKey),o=`0x${(0,dx.keccak256)(r)}`,a=(0,fx.joinSignature)(n.signDigest(o));return Promise.resolve({status:"success",signature:a})}}}catch(r){return console.error(r),Promise.resolve(ye(oe.InvalidMessageEncoding))}},"sign")}),"createEthereumKeyPairSigner");h();p();var Wo=ue(an());var px=i(()=>({type:xt.KeyPair,sign:i((e,t)=>{if(!t.isJWT)return Promise.resolve(ye(oe.InvalidAddressType));if(t.data.payload.iss!==xa)return Promise.resolve(ye(oe.InvalidClaimError));if(t.data.payload.aud!==Aa)return Promise.resolve(ye(oe.InvalidClaimError));let r={...t.data.header,kid:it(Wo.Buffer.from(e.publicKey))},n={...t.data.payload,sub:it(Wo.Buffer.from(e.publicKey))},o=it(Wo.Buffer.from(JSON.stringify(r)))+"."+it(Wo.Buffer.from(JSON.stringify(n))),l=Oo.sign(Wo.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),f=it(Wo.Buffer.from(l)),m={header:r,payload:n,signature:f};return Promise.resolve({status:"success",signature:f,signedJWT:m})},"sign")}),"createJWTKeypairSigner");h();p();h();p();h();p();var mx=ue(la());async function r0(e,t,r){let n=Cl(r.message,r.signingType,r.chainType);if("status"in n)return n;try{let o={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"};if(r.signingType==="transaction"){let a=rs.VersionedMessage.deserialize(n),f=new rs.VersionedTransaction(a).serialize(),m=it(f),{result:{transaction:A}}=await e.signTransaction({transaction:m,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:r.policyName??null}),T;if(typeof A=="string")T=new Uint8Array(sr(A));else if(Array.isArray(A))T=new Uint8Array(A);else throw new Error("Unexpected transaction format from KMS");let I=rs.VersionedTransaction.deserialize(T);if(!I.signatures||I.signatures.length===0)throw new Error("Signed transaction has no signatures");return{status:"success",signature:mx.default.encode(I.signatures[0])}}else{let a=new TextDecoder().decode(n),{result:{signature:l}}=await e.signUtf8Message({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,algorithm:"Ed25519",policyName:r.policyName});return{status:"success",signature:Tc(l)}}}catch(o){return ye(oe.InternalError,`KMS Solana signing failed: ${o instanceof Error?o.message:"Unknown error"}`)}}i(r0,"signSolana");h();p();var Rl=ue(an());async function n0(e,t,r){try{let n={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:"Ethereum"};switch(r.signingType){case"transaction":{let{result:{signature:o}}=await e.signTransaction({transaction:{kind:bi.RLP_ENCODED,bytes:r.message},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return typeof o!="string"||!yx(o)?ye(oe.InternalError,"KMS returned invalid Ethereum signature"):{status:"success",signature:o}}case"message":{let o=w_(r.message),a=it(o),{result:{signature:l}}=await e.ethereumSignMessage({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:gx(l)}}case"typedData":{let{result:{signature:o}}=await e.ethereumSignTypedData({typedData:r.data,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:gx(o)}}}}catch(n){return ye(oe.InternalError,`KMS EVM signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(n0,"signEVM");function gx(e){let t=sr(e);return`0x${Rl.Buffer.from(t).toString("hex")}`}i(gx,"base64UrlSignatureToHex");function w_(e){if(yx(e)){let t=e.slice(2),r=t.length%2===0?t:`0${t}`;return Rl.Buffer.from(r,"hex")}return Rl.Buffer.from(e,"utf8")}i(w_,"normalizePersonalSignPayload");function yx(e){return e.length<3||!(e.startsWith("0x")||e.startsWith("0X"))||e.length%2!==0?!1:/^[0-9a-fA-F]+$/.test(e.slice(2))}i(yx,"looksLikeHex");h();p();function vx(e,t){let r=sr(e),n=sr(t);return Buffer.concat([Buffer.from([0]),r,n]).toString("base64")}i(vx,"serializeSuiSignature");async function i0(e,t,r){try{let n={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Sui"};switch(r.signingType){case"transaction":{let o=it(r.transaction),{result:{signature:a,publicKey:l}}=await e.signTransaction({transaction:{kind:bi.SUI_BCS_ENCODED_TRANSACTION_DATA,bytes:o},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName??null});return!a||!l?ye(oe.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:vx(a,l)}}case"personalMessage":{let o=new TextDecoder().decode(r.message),{result:{signature:a,publicKey:l}}=await e.signUtf8Message({message:o,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,algorithm:"Ed25519",policyName:r.policyName});return!a||!l?ye(oe.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:vx(a,l)}}}return ye(oe.UnsupportedOperation,`Unsupported Sui signingType: ${r.signingType}`)}catch(n){return ye(oe.InternalError,`KMS Sui signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(i0,"signSui");h();p();async function o0(e,t,r){try{if(r.signingType!=="transaction")return ye(oe.UnsupportedOperation,"KMS does not support Bitcoin message signing");let n=null;switch(r.chainType){case _.BitcoinTaproot:n="BitcoinTaproot";break;case _.BitcoinNativeSegwit:n="BitcoinSegwit";break}if(!n)return ye(oe.UnsupportedOperation,`KMS does not yet support Bitcoin address type: ${r.chainType}`);let o={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:n},a=r.message,l=yg(a),f=l.length%2===0?l:`0${l}`,m=Xm(f),A=it(m),{result:{transaction:T}}=await e.signTransaction({transaction:{kind:bi.PSBT,bytes:A},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:void 0}),I;if(typeof T=="string")I=sr(T);else if(Array.isArray(T))I=new Uint8Array(T);else return ye(oe.InternalError,"Unexpected Bitcoin transaction response format from KMS");return{status:"success",signature:Qm(I)}}catch(n){return ye(oe.InternalError,`KMS Bitcoin signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(o0,"signBitcoin");var bx=i(()=>({type:xt.KMS,sign:i(async(e,t,r)=>{switch(r.chainType){case _.Solana:return r0(e,t,r);case _.EVM:return n0(e,t,r);case _.Sui:return i0(e,t,r);case _.BitcoinTaproot:case _.BitcoinNativeSegwit:return o0(e,t,r);default:return ye(oe.UnsupportedOperation,`KMS signer does not support chain type: ${r.chainType}`)}},"sign")}),"createKMSSigner");h();p();var wx=i(()=>({type:xt.KeyPair,sign:i(async(e,t)=>{if(!t.isKMSPKIAuthenticator)return ye(oe.InvalidAddressType);try{let r=Ph(t.payload),n=JSON.stringify(r),o=Buffer.from(n).toString("hex"),l=Oo.sign(o,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:it(l)}}catch(r){if(r instanceof d.ZodError)return ye(oe.InvalidRpcPayload,`Invalid KMS RPC payload: ${r.message}`);let n=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return ye(oe.InternalError,n)}},"sign")}),"createKMSPKIAuthenticatorSigner");h();p();var xx=ue(an());var s0=ue(la()),Ax=ue(Ui());var Sx=i(()=>({type:xt.KeyPair,sign:i((e,t)=>{if(t.chainType!==_.Solana)return Promise.resolve(ye(oe.InvalidAddressType));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=s0.default.decode(t.message):r=xx.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ye(oe.InvalidMessageEncoding))}let n=s0.default.encode(Ax.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})},"sign")}),"createSolanaKeyPairSigner");h();p();h();p();h();p();var Jo=ue(Ui(),1);h();p();h();p();h();p();h();p();h();p();function x_(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}i(x_,"isBytes");function Ys(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}i(Ys,"anumber");function _i(e,...t){if(!x_(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}i(_i,"abytes");function Mx(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ys(e.outputLen),Ys(e.blockLen)}i(Mx,"ahash");function ki(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}i(ki,"aexists");function Ul(e,t){_i(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}i(Ul,"aoutput");function Xa(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}i(Xa,"u32");function xn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}i(xn,"clean");function Nl(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}i(Nl,"createView");var Tx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ix(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}i(Ix,"byteSwap");var Hn=Tx?e=>e:e=>Ix(e);function A_(e){for(let t=0;t<e.length;t++)e[t]=Ix(e[t]);return e}i(A_,"byteSwap32");var Ho=Tx?e=>e:A_,_x=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",S_=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Dl(e){if(_i(e),_x)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=S_[e[r]];return t}i(Dl,"bytesToHex");var Ii={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ex(e){if(e>=Ii._0&&e<=Ii._9)return e-Ii._0;if(e>=Ii.A&&e<=Ii.F)return e-(Ii.A-10);if(e>=Ii.a&&e<=Ii.f)return e-(Ii.a-10)}i(Ex,"asciiToBase16");function kx(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(_x)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=Ex(e.charCodeAt(a)),f=Ex(e.charCodeAt(a+1));if(l===void 0||f===void 0){let m=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+a)}n[o]=l*16+f}return n}i(kx,"hexToBytes");function E_(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}i(E_,"utf8ToBytes");function An(e){return typeof e=="string"&&(e=E_(e)),_i(e),e}i(An,"toBytes");var oo=class{static{i(this,"Hash")}};function Px(e){let t=i(n=>e().update(An(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}i(Px,"createHasher");function Bx(e){let t=i((n,o)=>e(o).update(An(n)).digest(),"hashC"),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}i(Bx,"createOptHasher");var Kx=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);h();p();function M_(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),f=Number(r&a),m=n?4:0,A=n?0:4;e.setUint32(t+m,l,n),e.setUint32(t+A,f,n)}i(M_,"setBigUint64");var Vl=class extends oo{static{i(this,"HashMD")}constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=Nl(this.buffer)}update(t){ki(this),t=An(t),_i(t);let{view:r,buffer:n,blockLen:o}=this,a=t.length;for(let l=0;l<a;){let f=Math.min(o-this.pos,a-l);if(f===o){let m=Nl(t);for(;o<=a-l;l+=o)this.process(m,l);continue}n.set(t.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ki(this),Ul(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,xn(this.buffer.subarray(l)),this.padOffset>o-l&&(this.process(n,0),l=0);for(let I=l;I<o;I++)r[I]=0;M_(n,o-8,BigInt(this.length*8),a),this.process(n,0);let f=Nl(t),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=m/4,T=this.get();if(A>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<A;I++)f.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:a,destroyed:l,pos:f}=this;return t.destroyed=l,t.finished=a,t.length=o,t.pos=f,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}};var Ht=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);h();p();var Ll=BigInt(4294967295),Ox=BigInt(32);function a0(e,t=!1){return t?{h:Number(e&Ll),l:Number(e>>Ox&Ll)}:{h:Number(e>>Ox&Ll)|0,l:Number(e&Ll)|0}}i(a0,"fromBig");function Cx(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let a=0;a<r;a++){let{h:l,l:f}=a0(e[a],t);[n[a],o[a]]=[l,f]}return[n,o]}i(Cx,"split");var c0=i((e,t,r)=>e>>>r,"shrSH"),u0=i((e,t,r)=>e<<32-r|t>>>r,"shrSL"),$n=i((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),Gn=i((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),$o=i((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),Go=i((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),Rx=i((e,t)=>t,"rotr32H"),Ux=i((e,t)=>e,"rotr32L");function xr(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}i(xr,"add");var ec=i((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),tc=i((e,t,r,n)=>t+r+n+(e/2**32|0)|0,"add3H"),Nx=i((e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),"add4L"),Dx=i((e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,"add4H"),Vx=i((e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),"add5L"),Lx=i((e,t,r,n,o,a)=>t+r+n+o+a+(e/2**32|0)|0,"add5H");var Pt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),re=new Uint32Array(32);function so(e,t,r,n,o,a){let l=o[a],f=o[a+1],m=re[2*e],A=re[2*e+1],T=re[2*t],I=re[2*t+1],k=re[2*r],O=re[2*r+1],C=re[2*n],R=re[2*n+1],V=ec(m,T,l);A=tc(V,A,I,f),m=V|0,{Dh:R,Dl:C}={Dh:R^A,Dl:C^m},{Dh:R,Dl:C}={Dh:Rx(R,C),Dl:Ux(R,C)},{h:O,l:k}=xr(O,k,R,C),{Bh:I,Bl:T}={Bh:I^O,Bl:T^k},{Bh:I,Bl:T}={Bh:$n(I,T,24),Bl:Gn(I,T,24)},re[2*e]=m,re[2*e+1]=A,re[2*t]=T,re[2*t+1]=I,re[2*r]=k,re[2*r+1]=O,re[2*n]=C,re[2*n+1]=R}i(so,"G1b");function ao(e,t,r,n,o,a){let l=o[a],f=o[a+1],m=re[2*e],A=re[2*e+1],T=re[2*t],I=re[2*t+1],k=re[2*r],O=re[2*r+1],C=re[2*n],R=re[2*n+1],V=ec(m,T,l);A=tc(V,A,I,f),m=V|0,{Dh:R,Dl:C}={Dh:R^A,Dl:C^m},{Dh:R,Dl:C}={Dh:$n(R,C,16),Dl:Gn(R,C,16)},{h:O,l:k}=xr(O,k,R,C),{Bh:I,Bl:T}={Bh:I^O,Bl:T^k},{Bh:I,Bl:T}={Bh:$o(I,T,63),Bl:Go(I,T,63)},re[2*e]=m,re[2*e+1]=A,re[2*t]=T,re[2*t+1]=I,re[2*r]=k,re[2*r+1]=O,re[2*n]=C,re[2*n+1]=R}i(ao,"G2b");function T_(e,t={},r,n,o){if(Ys(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");let{key:a,salt:l,personalization:f}=t;if(a!==void 0&&(a.length<1||a.length>r))throw new Error("key length must be undefined or 1.."+r);if(l!==void 0&&l.length!==n)throw new Error("salt must be undefined or "+n);if(f!==void 0&&f.length!==o)throw new Error("personalization must be undefined or "+o)}i(T_,"checkBlake2Opts");var l0=class extends oo{static{i(this,"BLAKE2")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ys(t),Ys(r),this.blockLen=t,this.outputLen=r,this.buffer=new Uint8Array(t),this.buffer32=Xa(this.buffer)}update(t){ki(this),t=An(t),_i(t);let{blockLen:r,buffer:n,buffer32:o}=this,a=t.length,l=t.byteOffset,f=t.buffer;for(let m=0;m<a;){this.pos===r&&(Ho(o),this.compress(o,0,!1),Ho(o),this.pos=0);let A=Math.min(r-this.pos,a-m),T=l+m;if(A===r&&!(T%4)&&m+A<a){let I=new Uint32Array(f,T,Math.floor((a-m)/4));Ho(I);for(let k=0;m+r<a;k+=o.length,m+=r)this.length+=r,this.compress(I,k,!1);Ho(I);continue}n.set(t.subarray(m,m+A),this.pos),this.pos+=A,this.length+=A,m+=A}return this}digestInto(t){ki(this),Ul(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,xn(this.buffer.subarray(r)),Ho(n),this.compress(n,0,!0),Ho(n);let o=Xa(t);this.get().forEach((a,l)=>o[l]=Hn(a))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:o,destroyed:a,outputLen:l,pos:f}=this;return t||(t=new this.constructor({dkLen:l})),t.set(...this.get()),t.buffer.set(r),t.destroyed=a,t.finished=o,t.length=n,t.pos=f,t.outputLen=l,t}clone(){return this._cloneInto()}},Fl=class extends l0{static{i(this,"BLAKE2b")}constructor(t={}){let r=t.dkLen===void 0?64:t.dkLen;super(128,r),this.v0l=Pt[0]|0,this.v0h=Pt[1]|0,this.v1l=Pt[2]|0,this.v1h=Pt[3]|0,this.v2l=Pt[4]|0,this.v2h=Pt[5]|0,this.v3l=Pt[6]|0,this.v3h=Pt[7]|0,this.v4l=Pt[8]|0,this.v4h=Pt[9]|0,this.v5l=Pt[10]|0,this.v5h=Pt[11]|0,this.v6l=Pt[12]|0,this.v6h=Pt[13]|0,this.v7l=Pt[14]|0,this.v7h=Pt[15]|0,T_(r,t,64,16,16);let{key:n,personalization:o,salt:a}=t,l=0;if(n!==void 0&&(n=An(n),l=n.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,a!==void 0){a=An(a);let f=Xa(a);this.v4l^=Hn(f[0]),this.v4h^=Hn(f[1]),this.v5l^=Hn(f[2]),this.v5h^=Hn(f[3])}if(o!==void 0){o=An(o);let f=Xa(o);this.v6l^=Hn(f[0]),this.v6h^=Hn(f[1]),this.v7l^=Hn(f[2]),this.v7h^=Hn(f[3])}if(n!==void 0){let f=new Uint8Array(this.blockLen);f.set(n),this.update(f)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:o,v2l:a,v2h:l,v3l:f,v3h:m,v4l:A,v4h:T,v5l:I,v5h:k,v6l:O,v6h:C,v7l:R,v7h:V}=this;return[t,r,n,o,a,l,f,m,A,T,I,k,O,C,R,V]}set(t,r,n,o,a,l,f,m,A,T,I,k,O,C,R,V){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=o|0,this.v2l=a|0,this.v2h=l|0,this.v3l=f|0,this.v3h=m|0,this.v4l=A|0,this.v4h=T|0,this.v5l=I|0,this.v5h=k|0,this.v6l=O|0,this.v6h=C|0,this.v7l=R|0,this.v7h=V|0}compress(t,r,n){this.get().forEach((m,A)=>re[A]=m),re.set(Pt,16);let{h:o,l:a}=a0(BigInt(this.length));re[24]=Pt[8]^a,re[25]=Pt[9]^o,n&&(re[28]=~re[28],re[29]=~re[29]);let l=0,f=Kx;for(let m=0;m<12;m++)so(0,4,8,12,t,r+2*f[l++]),ao(0,4,8,12,t,r+2*f[l++]),so(1,5,9,13,t,r+2*f[l++]),ao(1,5,9,13,t,r+2*f[l++]),so(2,6,10,14,t,r+2*f[l++]),ao(2,6,10,14,t,r+2*f[l++]),so(3,7,11,15,t,r+2*f[l++]),ao(3,7,11,15,t,r+2*f[l++]),so(0,5,10,15,t,r+2*f[l++]),ao(0,5,10,15,t,r+2*f[l++]),so(1,6,11,12,t,r+2*f[l++]),ao(1,6,11,12,t,r+2*f[l++]),so(2,7,8,13,t,r+2*f[l++]),ao(2,7,8,13,t,r+2*f[l++]),so(3,4,9,14,t,r+2*f[l++]),ao(3,4,9,14,t,r+2*f[l++]);this.v0l^=re[0]^re[16],this.v0h^=re[1]^re[17],this.v1l^=re[2]^re[18],this.v1h^=re[3]^re[19],this.v2l^=re[4]^re[20],this.v2h^=re[5]^re[21],this.v3l^=re[6]^re[22],this.v3h^=re[7]^re[23],this.v4l^=re[8]^re[24],this.v4h^=re[9]^re[25],this.v5l^=re[10]^re[26],this.v5h^=re[11]^re[27],this.v6l^=re[12]^re[28],this.v6h^=re[13]^re[29],this.v7l^=re[14]^re[30],this.v7h^=re[15]^re[31],xn(re)}destroy(){this.destroyed=!0,xn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},jx=Bx(e=>new Fl(e));var Zo=jx;var oc=ue(Z1(),1);h();p();h();p();h();p();h();p();var co=32;function zx(e){return I_(e)&&__(e)===co}i(zx,"isValidSuiAddress");function Zn(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(co*2,"0")}`}i(Zn,"normalizeSuiAddress");function I_(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}i(I_,"isHex");function __(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}i(__,"getHexByteLength");h();p();var k_=/^vector<(.+)>$/,P_=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,rc=class e{static{i(this,"TypeTagSerializer")}static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(k_);if(n)return{vector:e.parseFromStr(n[1],r)};let o=t.match(P_);if(o)return{struct:{address:r?Zn(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:e.parseStructTypeArgs(o[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return lg(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function B_(e){return B.u64({name:"unsafe_u64",...e}).transform({input:i(t=>t,"input"),output:i(t=>Number(t),"output")})}i(B_,"unsafe_u64");function K_(e){return B.enum("Option",{None:null,Some:e})}i(K_,"optionEnum");var pt=B.bytes(co).transform({validate:i(e=>{let t=typeof e=="string"?e:wo(e);if(!t||!zx(Zn(t)))throw new Error(`Invalid Sui address ${t}`)},"validate"),input:i(e=>typeof e=="string"?Ec(Zn(e)):e,"input"),output:i(e=>Zn(wo(e)),"output")}),Ar=B.vector(B.u8()).transform({name:"ObjectDigest",input:i(e=>Lf(e),"input"),output:i(e=>ug(new Uint8Array(e)),"output"),validate:i(e=>{if(Lf(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),pr=B.struct("SuiObjectRef",{objectId:pt,version:B.u64(),digest:Ar}),f0=B.struct("SharedObjectRef",{objectId:pt,initialSharedVersion:B.u64(),mutable:B.bool()}),d0=B.enum("ObjectArg",{ImmOrOwnedObject:pr,SharedObject:f0,Receiving:pr}),h0=B.enum("CallArg",{Pure:B.struct("Pure",{bytes:B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?or(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})}),Object:d0}),p0=B.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:B.lazy(()=>p0),struct:B.lazy(()=>w0),u16:null,u32:null,u256:null}),jl=p0.transform({input:i(e=>typeof e=="string"?rc.parseFromStr(e,!0):e,"input"),output:i(e=>rc.tagToString(e),"output")}),Sn=B.enum("Argument",{GasCoin:null,Input:B.u16(),Result:B.u16(),NestedResult:B.tuple([B.u16(),B.u16()])}),m0=B.struct("ProgrammableMoveCall",{package:pt,module:B.string(),function:B.string(),typeArguments:B.vector(jl),arguments:B.vector(Sn)}),g0=B.enum("Command",{MoveCall:m0,TransferObjects:B.struct("TransferObjects",{objects:B.vector(Sn),address:Sn}),SplitCoins:B.struct("SplitCoins",{coin:Sn,amounts:B.vector(Sn)}),MergeCoins:B.struct("MergeCoins",{destination:Sn,sources:B.vector(Sn)}),Publish:B.struct("Publish",{modules:B.vector(B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?or(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})),dependencies:B.vector(pt)}),MakeMoveVec:B.struct("MakeMoveVec",{type:K_(jl).transform({input:i(e=>e===null?{None:!0}:{Some:e},"input"),output:i(e=>e.Some??null,"output")}),elements:B.vector(Sn)}),Upgrade:B.struct("Upgrade",{modules:B.vector(B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?or(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})),dependencies:B.vector(pt),package:pt,ticket:Sn})}),y0=B.struct("ProgrammableTransaction",{inputs:B.vector(h0),commands:B.vector(g0)}),v0=B.enum("TransactionKind",{ProgrammableTransaction:y0,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),b0=B.enum("TransactionExpiration",{None:null,Epoch:B_()}),w0=B.struct("StructTag",{address:pt,module:B.string(),name:B.string(),typeParams:B.vector(p0)}),x0=B.struct("GasData",{payment:B.vector(pr),owner:pt,price:B.u64(),budget:B.u64()}),A0=B.struct("TransactionDataV1",{kind:v0,sender:pt,gasData:x0,expiration:b0}),S0=B.enum("TransactionData",{V1:A0}),E0=B.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),M0=B.enum("IntentVersion",{V0:null}),T0=B.enum("AppId",{Sui:null}),I0=B.struct("Intent",{scope:E0,version:M0,appId:T0});function _0(e){return B.struct(`IntentMessage<${e.name}>`,{intent:I0,value:e})}i(_0,"IntentMessage");var k0=B.enum("CompressedSignature",{ED25519:B.fixedArray(64,B.u8()),Secp256k1:B.fixedArray(64,B.u8()),Secp256r1:B.fixedArray(64,B.u8()),ZkLogin:B.vector(B.u8())}),P0=B.enum("PublicKey",{ED25519:B.fixedArray(32,B.u8()),Secp256k1:B.fixedArray(33,B.u8()),Secp256r1:B.fixedArray(33,B.u8()),ZkLogin:B.vector(B.u8())}),B0=B.struct("MultiSigPkMap",{pubKey:P0,weight:B.u8()}),K0=B.struct("MultiSigPublicKey",{pk_map:B.vector(B0),threshold:B.u16()}),qx=B.struct("MultiSig",{sigs:B.vector(k0),bitmap:B.u16(),multisig_pk:K0}),O_=B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?or(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")}),O0=B.struct("SenderSignedTransaction",{intentMessage:_0(S0),txSignatures:B.vector(O_)}),Wx=B.vector(O0,{name:"SenderSignedData"});h();p();var C_=B.enum("PackageUpgradeError",{UnableToFetchPackage:B.struct("UnableToFetchPackage",{packageId:pt}),NotAPackage:B.struct("NotAPackage",{objectId:pt}),IncompatibleUpgrade:null,DigestDoesNotMatch:B.struct("DigestDoesNotMatch",{digest:B.vector(B.u8())}),UnknownUpgradePolicy:B.struct("UnknownUpgradePolicy",{policy:B.u8()}),PackageIDDoesNotMatch:B.struct("PackageIDDoesNotMatch",{packageId:pt,ticketId:pt})}),R_=B.struct("ModuleId",{address:pt,name:B.string()}),Hx=B.struct("MoveLocation",{module:R_,function:B.u16(),instruction:B.u16(),functionName:B.option(B.string())}),U_=B.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:B.struct("IndexOutOfBounds",{idx:B.u16()}),SecondaryIndexOutOfBounds:B.struct("SecondaryIndexOutOfBounds",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidResultArity:B.struct("InvalidResultArity",{resultIdx:B.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),N_=B.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),D_=B.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:B.struct("MoveObjectTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),MovePackageTooBig:B.struct("MovePackageTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),CircularObjectOwnership:B.struct("CircularObjectOwnership",{object:pt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:B.option(Hx),MoveAbort:B.tuple([Hx,B.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:B.struct("CommandArgumentError",{argIdx:B.u16(),kind:U_}),TypeArgumentError:B.struct("TypeArgumentError",{argumentIdx:B.u16(),kind:N_}),UnusedValueWithoutDrop:B.struct("UnusedValueWithoutDrop",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidPublicFunctionReturnType:B.struct("InvalidPublicFunctionReturnType",{idx:B.u16()}),InvalidTransferObject:null,EffectsTooLarge:B.struct("EffectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:B.struct("PackageUpgradeError",{upgradeError:C_}),WrittenObjectsTooLarge:B.struct("WrittenObjectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:B.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:B.vector(pt)}),AddressDeniedForCoin:B.struct("AddressDeniedForCoin",{address:pt,coinType:B.string()}),CoinTypeGlobalPause:B.struct("CoinTypeGlobalPause",{coinType:B.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),$x=B.enum("ExecutionStatus",{Success:null,Failed:B.struct("ExecutionFailed",{error:D_,command:B.option(B.u64())})}),Gx=B.struct("GasCostSummary",{computationCost:B.u64(),storageCost:B.u64(),storageRebate:B.u64(),nonRefundableStorageFee:B.u64()}),Qs=B.enum("Owner",{AddressOwner:pt,ObjectOwner:pt,Shared:B.struct("Shared",{initialSharedVersion:B.u64()}),Immutable:null}),V_=B.struct("TransactionEffectsV1",{status:$x,executedEpoch:B.u64(),gasUsed:Gx,modifiedAtVersions:B.vector(B.tuple([pt,B.u64()])),sharedObjects:B.vector(pr),transactionDigest:Ar,created:B.vector(B.tuple([pr,Qs])),mutated:B.vector(B.tuple([pr,Qs])),unwrapped:B.vector(B.tuple([pr,Qs])),deleted:B.vector(pr),unwrappedThenDeleted:B.vector(pr),wrapped:B.vector(pr),gasObject:B.tuple([pr,Qs]),eventsDigest:B.option(Ar),dependencies:B.vector(Ar)}),C0=B.tuple([B.u64(),Ar]),L_=B.enum("ObjectIn",{NotExist:null,Exist:B.tuple([C0,Qs])}),F_=B.enum("ObjectOut",{NotExist:null,ObjectWrite:B.tuple([Ar,Qs]),PackageWrite:C0}),j_=B.enum("IDOperation",{None:null,Created:null,Deleted:null}),z_=B.struct("EffectsObjectChange",{inputState:L_,outputState:F_,idOperation:j_}),q_=B.enum("UnchangedSharedKind",{ReadOnlyRoot:C0,MutateDeleted:B.u64(),ReadDeleted:B.u64(),Cancelled:B.u64(),PerEpochConfig:null}),W_=B.struct("TransactionEffectsV2",{status:$x,executedEpoch:B.u64(),gasUsed:Gx,transactionDigest:Ar,gasObjectIndex:B.option(B.u32()),eventsDigest:B.option(Ar),dependencies:B.vector(Ar),lamportVersion:B.u64(),changedObjects:B.vector(B.tuple([pt,z_])),unchangedSharedObjects:B.vector(B.tuple([pt,q_])),auxDataDigest:B.option(Ar)}),Zx=B.enum("TransactionEffects",{V1:V_,V2:W_});var Pi={...B,U8:B.u8(),U16:B.u16(),U32:B.u32(),U64:B.u64(),U128:B.u128(),U256:B.u256(),ULEB128:B.uleb128(),Bool:B.bool(),String:B.string(),Address:pt,AppId:T0,Argument:Sn,CallArg:h0,CompressedSignature:k0,GasData:x0,Intent:I0,IntentMessage:_0,IntentScope:E0,IntentVersion:M0,MultiSig:qx,MultiSigPkMap:B0,MultiSigPublicKey:K0,ObjectArg:d0,ObjectDigest:Ar,ProgrammableMoveCall:m0,ProgrammableTransaction:y0,PublicKey:P0,SenderSignedData:Wx,SenderSignedTransaction:O0,SharedObjectRef:f0,StructTag:w0,SuiObjectRef:pr,Command:g0,TransactionData:S0,TransactionDataV1:A0,TransactionExpiration:b0,TransactionKind:v0,TypeTag:jl,TransactionEffects:Zx};function zl(e,t){return Pi.IntentMessage(Pi.fixedArray(t.length,Pi.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}i(zl,"messageWithIntent");h();p();var Bi={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Jx={ED25519:32,Secp256k1:33,Secp256r1:33},ql={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};h();p();h();p();h();p();function R0(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}i(R0,"bytesEqual");var Xs=class{static{i(this,"PublicKey")}equals(t){return R0(this.toRawBytes(),t.toRawBytes())}toBase64(){return Ot(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return Ot(t)}verifyWithIntent(t,r,n){let o=zl(n,t),a=Zo(o,{dkLen:32});return this.verify(a,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Pi.vector(Pi.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Zn(Dl(Zo(this.toSuiBytes(),{dkLen:32})).slice(0,co*2))}};h();p();var Yx=i(e=>{throw TypeError(e)},"__typeError"),Qx=i((e,t,r)=>t.has(e)||Yx("Cannot "+r),"__accessCheck"),Wl=i((e,t,r)=>(Qx(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Hl=i((e,t,r)=>t.has(e)?Yx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),$l=i((e,t,r,n)=>(Qx(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),Gl,Zl,Jl,Yl,U0=class extends Error{static{i(this,"SuiGraphQLRequestError")}},Ql=class{static{i(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:n={},queries:o={}}){Hl(this,Gl),Hl(this,Zl),Hl(this,Jl),Hl(this,Yl),$l(this,Gl,t),$l(this,Zl,o),$l(this,Jl,n),$l(this,Yl,(...a)=>r(...a))}async query(t){let r=await Wl(this,Yl).call(this,Wl(this,Gl),{method:"POST",headers:{"Content-Type":"application/json",...Wl(this,Jl)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):fg(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new U0(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Wl(this,Zl)[t]})}};Gl=new WeakMap;Zl=new WeakMap;Jl=new WeakMap;Yl=new WeakMap;h();p();var Xx=dg();h();p();function H_(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}i(H_,"base64UrlCharTo6Bits");function $_(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),o=H_(n);t=t.concat(o)}return t}i($_,"base64UrlStringToBitVector");function G_(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=$_(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let o=(t+e.length-1)%4;if(o!==3)if(o===2)r=r.slice(0,r.length-2);else if(o===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let a=new Uint8Array(Math.floor(r.length/8)),l=0;for(let f=0;f<r.length;f+=8){let m=r.slice(f,f+8),A=parseInt(m.join(""),2);a[l++]=A}return new TextDecoder().decode(a)}i(G_,"decodeBase64URL");function Z_(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}i(Z_,"verifyExtendedClaim");function eA(e,t){let r=G_(e.value,e.indexMod4),[n,o]=Z_(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return o}i(eA,"extractClaimValue");h();p();h();p();var tA=B.struct("ZkLoginSignature",{inputs:B.struct("ZkLoginSignatureInputs",{proofPoints:B.struct("ZkLoginSignatureInputsProofPoints",{a:B.vector(B.string()),b:B.vector(B.vector(B.string())),c:B.vector(B.string())}),issBase64Details:B.struct("ZkLoginSignatureInputsClaim",{value:B.string(),indexMod4:B.u8()}),headerBase64:B.string(),addressSeed:B.string()}),maxEpoch:B.u64(),userSignature:B.vector(B.u8())});function rA(e){return tA.parse(typeof e=="string"?or(e):e)}i(rA,"parseZkLoginSignature");h();p();function J_(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}i(J_,"findFirstNonZeroIndex");function Xl(e,t){let r=e.toString(16);return kx(r.padStart(t*2,"0").slice(-t*2))}i(Xl,"toPaddedBigEndianBytes");function N0(e,t){let r=Xl(e,t),n=J_(r);return n===-1?new Uint8Array([0]):r.slice(n)}i(N0,"toBigEndianBytes");var oA=i(e=>{throw TypeError(e)},"__typeError"),sA=i((e,t,r)=>t.has(e)||oA("Cannot "+r),"__accessCheck"),Ki=i((e,t,r)=>(sA(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),D0=i((e,t,r)=>t.has(e)?oA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),ea=i((e,t,r,n)=>(sA(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),En,nc,ic,Y_=class V0 extends Xs{static{i(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),D0(this,En),D0(this,nc),D0(this,ic),ea(this,nc,r),typeof t=="string"?ea(this,En,or(t)):t instanceof Uint8Array?ea(this,En,t):ea(this,En,Uint8Array.from(t)),ea(this,ic,Ki(this,En).length!==Ki(this,En)[0]+1+32),Ki(this,ic)&&ea(this,En,nA(Ki(this,En)))}equals(t){return super.equals(t)}toSuiAddress(){if(Ki(this,ic)){let t=nA(Ki(this,En),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Zn(Dl(Zo(r,{dkLen:32})).slice(0,co*2))}return super.toSuiAddress()}toRawBytes(){return Ki(this,En)}flag(){return Bi.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=ef(r),o=new V0(n.publicKey).toSuiAddress();return iA({address:o,bytes:Ot(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Ki(this,nc)})}verifyTransaction(t,r){let n=ef(r),o=new V0(n.publicKey).toSuiAddress();return iA({address:o,bytes:Ot(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Ki(this,nc)})}};En=new WeakMap;nc=new WeakMap;ic=new WeakMap;var Q_=Y_;function X_(e,t,r){let n=r?.legacyAddress?N0(e,32):Xl(e,32),o=new TextEncoder().encode(t),a=new Uint8Array(1+o.length+n.length);return a.set([o.length],0),a.set(o,1),a.set(n,1+o.length),new Q_(a,r)}i(X_,"toZkLoginPublicIdentifier");var ek=Xx(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function nA(e,t=!1){let r=e[0]+1,n=BigInt(`0x${wo(e.slice(r))}`),o=t?N0(n,32):Xl(n,32),a=new Uint8Array(r+o.length);return a.set(e.slice(0,r),0),a.set(o,r),a}i(nA,"normalizeZkLoginPublicKeyBytes");async function iA({address:e,bytes:t,signature:r,intentScope:n,client:o=new Ql({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let a=await o.query({query:ek,variables:{bytes:t,signature:r,intentScope:n,author:e}});return a.data?.verifyZkloginSignature.success===!0&&a.data?.verifyZkloginSignature.errors.length===0}i(iA,"graphqlVerifyZkLoginSignature");function ef(e){let t=typeof e=="string"?or(e):e;if(t[0]!==Bi.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:o,userSignature:a}=rA(r),{issBase64Details:l,addressSeed:f}=n,m=eA(l,"iss"),A=X_(BigInt(f),m);return{serializedSignature:Ot(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:o,userSignature:a,iss:m,addressSeed:BigInt(f)},signature:t,publicKey:A.toRawBytes()}}i(ef,"parseSerializedZkLoginSignature");function aA({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),o=new Uint8Array(1+e.length+n.length);return o.set([Bi[t]]),o.set(e,1),o.set(n,1+e.length),Ot(o)}i(aA,"toSerializedSignature");function cA(e){let t=or(e),r=ql[t[0]];switch(r){case"MultiSig":let n=Pi.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return ef(e);case"ED25519":case"Secp256k1":case"Secp256r1":let o=Jx[r],a=t.slice(1,t.length-o),l=t.slice(1+a.length);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:l,bytes:t};default:throw new Error("Unsupported signature scheme")}}i(cA,"parseSerializedSignature");var sc=32;var uA="suiprivkey",L0=class{static{i(this,"Signer")}async signWithIntent(t,r){let n=zl(r,t),o=Zo(n,{dkLen:32});return{signature:aA({signature:await this.sign(o),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Ot(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(B.vector(B.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:Ot(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},tf=class extends L0{static{i(this,"Keypair")}};function lA(e){let{prefix:t,words:r}=oc.bech32.decode(e);if(t!==uA)throw new Error("invalid private key prefix");let n=new Uint8Array(oc.bech32.fromWords(r)),o=n.slice(1);return{schema:ql[n[0]],secretKey:o}}i(lA,"decodeSuiPrivateKey");function fA(e,t){if(e.length!==sc)throw new Error("Invalid bytes length");let r=Bi[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),oc.bech32.encode(uA,oc.bech32.toWords(n))}i(fA,"encodeSuiPrivateKey");h();p();function F0(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}i(F0,"isValidHardenedPath");function tk(e){return hg(e,"")}i(tk,"mnemonicToSeed");function dA(e){return wo(tk(e))}i(dA,"mnemonicToSeedHex");h();p();h();p();var rf=class extends oo{static{i(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Mx(t);let n=An(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(n.length>o?t.create().update(n).digest():n);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),xn(a)}update(t){return ki(this),this.iHash.update(t),this}digestInto(t){ki(this),_i(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:a,blockLen:l,outputLen:f}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=f,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},nf=i((e,t,r)=>new rf(e,t).update(r).digest(),"hmac");nf.create=(e,t)=>new rf(e,t);h();p();h();p();var hA=Cx(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),rk=hA[0],nk=hA[1],uo=new Uint32Array(80),lo=new Uint32Array(80),of=class extends Vl{static{i(this,"SHA512")}constructor(t=64){super(128,t,16,!1),this.Ah=Ht[0]|0,this.Al=Ht[1]|0,this.Bh=Ht[2]|0,this.Bl=Ht[3]|0,this.Ch=Ht[4]|0,this.Cl=Ht[5]|0,this.Dh=Ht[6]|0,this.Dl=Ht[7]|0,this.Eh=Ht[8]|0,this.El=Ht[9]|0,this.Fh=Ht[10]|0,this.Fl=Ht[11]|0,this.Gh=Ht[12]|0,this.Gl=Ht[13]|0,this.Hh=Ht[14]|0,this.Hl=Ht[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:a,Cl:l,Dh:f,Dl:m,Eh:A,El:T,Fh:I,Fl:k,Gh:O,Gl:C,Hh:R,Hl:V}=this;return[t,r,n,o,a,l,f,m,A,T,I,k,O,C,R,V]}set(t,r,n,o,a,l,f,m,A,T,I,k,O,C,R,V){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=a|0,this.Cl=l|0,this.Dh=f|0,this.Dl=m|0,this.Eh=A|0,this.El=T|0,this.Fh=I|0,this.Fl=k|0,this.Gh=O|0,this.Gl=C|0,this.Hh=R|0,this.Hl=V|0}process(t,r){for(let z=0;z<16;z++,r+=4)uo[z]=t.getUint32(r),lo[z]=t.getUint32(r+=4);for(let z=16;z<80;z++){let ce=uo[z-15]|0,se=lo[z-15]|0,ne=$n(ce,se,1)^$n(ce,se,8)^c0(ce,se,7),ae=Gn(ce,se,1)^Gn(ce,se,8)^u0(ce,se,7),Z=uo[z-2]|0,me=lo[z-2]|0,x=$n(Z,me,19)^$o(Z,me,61)^c0(Z,me,6),s=Gn(Z,me,19)^Go(Z,me,61)^u0(Z,me,6),u=Nx(ae,s,lo[z-7],lo[z-16]),g=Dx(u,ne,x,uo[z-7],uo[z-16]);uo[z]=g|0,lo[z]=u|0}let{Ah:n,Al:o,Bh:a,Bl:l,Ch:f,Cl:m,Dh:A,Dl:T,Eh:I,El:k,Fh:O,Fl:C,Gh:R,Gl:V,Hh:H,Hl:X}=this;for(let z=0;z<80;z++){let ce=$n(I,k,14)^$n(I,k,18)^$o(I,k,41),se=Gn(I,k,14)^Gn(I,k,18)^Go(I,k,41),ne=I&O^~I&R,ae=k&C^~k&V,Z=Vx(X,se,ae,nk[z],lo[z]),me=Lx(Z,H,ce,ne,rk[z],uo[z]),x=Z|0,s=$n(n,o,28)^$o(n,o,34)^$o(n,o,39),u=Gn(n,o,28)^Go(n,o,34)^Go(n,o,39),g=n&a^n&f^a&f,y=o&l^o&m^l&m;H=R|0,X=V|0,R=O|0,V=C|0,O=I|0,C=k|0,{h:I,l:k}=xr(A|0,T|0,me|0,x|0),A=f|0,T=m|0,f=a|0,m=l|0,a=n|0,l=o|0;let v=ec(x,u,y);n=tc(v,me,s,g),o=v|0}({h:n,l:o}=xr(this.Ah|0,this.Al|0,n|0,o|0)),{h:a,l}=xr(this.Bh|0,this.Bl|0,a|0,l|0),{h:f,l:m}=xr(this.Ch|0,this.Cl|0,f|0,m|0),{h:A,l:T}=xr(this.Dh|0,this.Dl|0,A|0,T|0),{h:I,l:k}=xr(this.Eh|0,this.El|0,I|0,k|0),{h:O,l:C}=xr(this.Fh|0,this.Fl|0,O|0,C|0),{h:R,l:V}=xr(this.Gh|0,this.Gl|0,R|0,V|0),{h:H,l:X}=xr(this.Hh|0,this.Hl|0,H|0,X|0),this.set(n,o,a,l,f,m,A,T,I,k,O,C,R,V,H,X)}roundClean(){xn(uo,lo)}destroy(){xn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var pA=Px(()=>new of);var j0=pA;var ik=ue(Ui(),1);var ok="ed25519 seed",sk=2147483648,ak=new RegExp("^m(\\/[0-9]+')+$"),mA=i(e=>e.replace("'",""),"replaceDerive"),ck=i(e=>{let r=nf.create(j0,ok).update(Ec(e)).digest(),n=r.slice(0,32),o=r.slice(32);return{key:n,chainCode:o}},"getMasterKeyFromSeed"),uk=i(({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let a=new Uint8Array(1+e.length+n.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(e,1),a.set(new Uint8Array(n,0,n.byteLength),e.length+1);let l=nf.create(j0,t).update(a).digest(),f=l.slice(0,32),m=l.slice(32);return{key:f,chainCode:m}},"CKDPriv");var lk=i(e=>ak.test(e)?!e.split("/").slice(1).map(mA).some(isNaN):!1,"isValidPath"),z0=i((e,t,r=sk)=>{if(!lk(e))throw new Error("Invalid derivation path");let{key:n,chainCode:o}=ck(t);return e.split("/").slice(1).map(mA).map(l=>parseInt(l,10)).reduce((l,f)=>uk(l,f+r),{key:n,chainCode:o})},"derivePath");h();p();var gA=ue(Ui(),1);var q0=32,ac=class extends Xs{static{i(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=or(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==q0)throw new Error(`Invalid public key input. Expected ${q0} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Bi.ED25519}async verify(t,r){let n;if(typeof r=="string"){let o=cA(r);if(o.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!R0(this.toRawBytes(),o.publicKey))throw new Error("Signature does not match public key");n=o.signature}else n=r;return gA.default.sign.detached.verify(t,n,this.toRawBytes())}};ac.SIZE=q0;var W0="m/44'/784'/0'/0'/0'",cc=class e extends tf{static{i(this,"Ed25519Keypair")}constructor(t){super(),t?this.keypair=t:this.keypair=Jo.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(Jo.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let a=lA(t);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,r)}let n=t.length;if(n!==sc)throw new Error(`Wrong secretKey size. Expected ${sc} bytes, got ${n}.`);let o=Jo.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let l=new TextEncoder().encode("sui validation"),f=Jo.default.sign.detached(l,o.secretKey);if(!Jo.default.sign.detached.verify(l,f,o.publicKey))throw new Error("provided secretKey is invalid")}return new e(o)}getPublicKey(){return new ac(this.keypair.publicKey)}getSecretKey(){return fA(this.keypair.secretKey.slice(0,sc),this.getKeyScheme())}async sign(t){return Jo.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=W0),!F0(r))throw new Error("Invalid derivation path");let{key:n}=z0(r,dA(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=W0),!F0(r))throw new Error("Invalid derivation path");let{key:n}=z0(r,t);return e.fromSecretKey(n)}};var yA=i(()=>({type:xt.KeyPair,sign:i(async(e,t)=>{let r=cc.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(ye(oe.InvalidMessageEncoding))}},"sign")}),"createSuiKeyPairSigner");h();p();var sf=class{static{i(this,"MultiChainVaultSigner")}#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let n=r.chainType;switch(n){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return this.#e.keyPair[n].sign(t,r);case _.EVM:return this.#e.keyPair[n].sign(t,r);case _.Solana:return this.#e.keyPair[n].sign(t,r);case _.Sui:return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}async signWithKMS(t,r,n){return this.#e.kms.sign(t,r,n)}};h();p();var vA=i(e=>Xp.safeParse(e).success,"isVaultSignerParams");async function af(e,t,r){let n=t.chains[r]?.pathType;if(!n)return ye(oe.InvalidAddressType,`Seed Account does not contain a chain address for the chain type ${r}.`);let o=await Dt(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(o,t.derivationIndex,n)}i(af,"deriveKeyPairFromAddressType");async function bA(e,t,r){let n=await st(),o=n.find(a=>a.identifier===t);if(!o)return ye(oe.InvalidAccountId,`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(o.type){case P.KMSVault:case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await ml(e,o.identifier);return e.vaultSigner.signWithKeypair(a,r)}default:return ye(oe.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await Qi(e,o);return e.vaultSigner.signWithKeypair(a,r)}default:return ye(oe.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return ye(oe.UnsupportedOperation,"Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r){let l=Ra(e,`cash:${r.cashAccountAddress}`),f=await kb(l);return e.vaultSigner.signWithKMS(l,{organizationId:f.organizationId,walletId:f.walletId,derivationPath:f.account.derivationPath},r.data)}let a=await Pb(e);return e.vaultSigner.signWithKeypair(a,r)}switch(o.type){case P.KMSVault:{await Ua(e,o.kms.walletId,o.kms.tag);let a=o.chains[r.chainType],l=Ra(e,Or(o.kms.walletId,o.kms.tag)),{organizationId:f,walletId:m}=o.kms;if(!a)return ye(oe.InvalidAddressType,`KMSVault account does not have a derivation path for chain type ${r.chainType}`);let A=di({pathType:a.pathType,index:o.derivationIndex});return e.vaultSigner.signWithKMS(l,{organizationId:f,walletId:m,derivationPath:A},r)}case P.Seedless:case P.Seed:{switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{enabledAddressTypes:a}=await e.fetchChainAvailability(),l={},f=Object.keys(o.chains).filter(m=>da.safeParse(m).success).filter(m=>a.includes(m));for(let m of f){let A=await af(e,o,m);if("status"in A&&A.status==="error")return A;l[m]=A}return e.vaultSigner.signWithKeypair(l,r)}case _.EVM:{let a=await af(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Solana:{let a=await af(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Sui:{let a=await af(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}}break}case P.PrivateKey:{let a=await On(e,o.privateKeyIdentifier);if(a.chainType!==r.chainType)return ye(oe.InvalidAddressType,`Private Key account from accountID is a different chain type from params. Expected ${a.chainType}, got ${r.chainType}`);let l=e.keypairGenerator.generateKeypairFromPrivateKey(kr.from(a.privateKey),r.chainType);switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return e.vaultSigner.signWithKeypair({[r.chainType]:l},r);case _.EVM:return e.vaultSigner.signWithKeypair(l,r);case _.Solana:return e.vaultSigner.signWithKeypair(l,r);case _.Sui:return e.vaultSigner.signWithKeypair(l,r)}break}case P.Ledger:{let a=o.chains[r.chainType];if(!a)return ye(oe.InvalidAddressType,`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let l=og.safeParse({pathType:a.pathType,index:o.derivationIndex});if(!l.success)return ye(oe.InvalidDerivationPath,"Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let f=di(l.data);return e.vaultSigner.signWithHardware(t,f,r)}case P.SeedVault:{let{authToken:a,derivationPath:l,chainType:f}=o;return f!==r.chainType?ye(oe.InvalidAddressType,`Solana Seed Vault account from accountID is a different chain type from params. Expected ${f}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(a,l,r)}case P.ReadOnly:return ye(oe.UnsupportedOperation,"Read Only Accounts cannot sign transactions.");default:(a=>{throw new Error("invalid account type")})(o)}}i(bA,"sign");h();p();function wA(e){return e.find(t=>t.type===P.Seedless)??e.find(t=>t.type===P.Seed)??e.find(t=>t.type===P.PrivateKey)}i(wA,"selectKMSAuthenticatorSourceAccount");var Jn=Xe(function*(){return(yield st()).map(gl)}),cf=il,uf=nl;function fk(e){return{addSeedWithDefaultAccount:i((t,r)=>ob(e,t,r).then(za),"addSeedWithDefaultAccount"),addAccountForExistingSeed:i(t=>Vv(e,t).then(za),"addAccountForExistingSeed"),addSeedWithMultipleAccounts:i((t,r,n,o)=>ul(e,t,r,n,o).then(a=>a.map(za)),"addSeedWithMultipleAccounts"),addPrivateKeyAccount:i((t,r,n)=>Xv(e,t,r,n).then(bp),"addPrivateKeyAccount"),addLedgerAccounts:i((t,r)=>Yv(e,t,r).then(n=>n.map(vp)),"addLedgerAccounts"),addSolanaSeedVaultAccounts:i(t=>ab(e,t).then(r=>r.map(wp)),"addSolanaSeedVaultAccounts"),addReadonlyAccount:i(t=>tb(e,t),"addReadonlyAccount"),addKMSVaultAccount:i(async({organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l})=>Cv(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l}).then(yl),"addKMSVaultAccount"),upsertKMSVaultChains:i(async({organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a})=>Dv(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a}).then(yl),"upsertKMSVaultChains"),deriveAddresses:i(()=>mb(e),"deriveAddresses"),removeAccount:i(t=>Ib(e,t),"removeAccount"),reorderAccount:i((t,r)=>_b(e,t,r),"reorderAccount"),exportEntropy:i(t=>Ur(e,t),"exportEntropy"),exportPrivateKey:i((t,r)=>ll(e,t,r),"exportPrivateKey"),fetchAllAccounts:Jn,fetchAllSeedMetas:uf,fetchAllSeedlessMetas:cf,sign:i((t,r)=>bA(e,t,r),"sign"),isExistingSeed:i(t=>Ks(e,t),"isExistingSeed"),checkVaultIntegrity:i(()=>pb(e),"checkVaultIntegrity"),healAccountsWithMissingSecrets:i(()=>Tb(e),"healAccountsWithMissingSecrets"),clearVault:i(()=>Mv(e),"clearVault"),addSeedlessWithMultipleAccounts:i((t,r,n)=>cl(e,t,r,n).then(o=>o.map(qa)),"addSeedlessWithMultipleAccounts"),addSeedlessWithDefaultAccount:i((t,r)=>ib(e,t,r).then(qa),"addSeedlessWithDefaultAccount"),addAccountForExistingSeedless:i(t=>rb(e,t).then(qa),"addAccountForExistingSeedless"),getAuthenticationPublicKey:i(t=>Eb(e,t),"getAuthenticationPublicKey"),getAgentAddress:i((t,r)=>Sb(e,t,r),"getAgentAddress"),getKMSInstance:i(t=>t===void 0?_v(e):Ra(e,t),"getKMSInstance"),canDeriveKMSAuthenticator:i(async()=>{let t=await Jn();return!!wA(t)},"canDeriveKMSAuthenticator"),DO_NOT_USE_diagnoseSeedCacheDigests:i(()=>yb(e),"DO_NOT_USE_diagnoseSeedCacheDigests"),rebuildKMSAuthenticatorMapping:i(async()=>{await Pv(e)},"rebuildKMSAuthenticatorMapping"),updateCashAccountMapping:i(async t=>{await Bv(e,t)},"updateCashAccountMapping")}}i(fk,"createVault");var dk=Xe(function*(){return[...(yield Jn()).reduce(It((r,n)=>{switch(n.type){case P.Seed:case P.Seedless:{r.add(n.seedIdentifier);break}case P.PrivateKey:{r.add(n.privateKeyIdentifier);break}case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:break;default:xe(n);break}return r},0),new Set)]});h();p();var hk=i((e,t)=>e.filter(r=>{switch(r.type){case P.Seed:case P.Seedless:return r.seedIdentifier===t;case P.PrivateKey:return r.privateKeyIdentifier===t;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(r);return}}),"getAccountsForSecretId");h();p();function pk(e){return Li.get(e).networkNameOverride?.(e)??pe.getNetworkName(e,!0)}i(pk,"getBadgedNetworkName");h();p();function mk(){return{version:1,setting:{[_.Solana]:ds,[_.EVM]:hs,[_.Sui]:Wf}}}i(mk,"getDefaultNetworkSetting");h();p();var gk=new Set([_.Solana,_.EVM,_.Sui,_.BitcoinNativeSegwit,_.BitcoinTaproot]);async function yk(e=0){let r=(await ar()).enabledAddressTypes.filter(o=>gk.has(o));return Qt(r).map(o=>({chainType:un.getAddressType(o),derivationIndex:e,pathType:o}))}i(yk,"getDefaultKMSVaultChainConfigs");async function lf(e=0){let t=await yk(e),r=t.map(a=>a.pathType),n=Lu(r,e),o=t.map(({chainType:a,pathType:l})=>{let{addressFormat:f}=Hy(a);return{chainType:a,pathType:l,derivationPath:di({pathType:l,index:e}),addressFormat:f}});return{derivations:n,conversionMetadata:o}}i(lf,"getDefaultKMSVaultDerivationsAndMetadata");h();p();function xA(e,t){return`${e}:${t}`}i(xA,"descriptorKey");function ff(e,t){let r={},n=new Map;for(let o of t){let a=xA(o.addressFormat,o.derivationPath);if(n.has(a))throw new Error(`Duplicate KMS account request for ${a}`);n.set(a,{descriptor:o,used:!1})}for(let o of e){let{addressFormat:a,derivationPath:l,address:f,publicKey:m}=o,A=xA(a,l),T=n.get(A);if(!T)continue;if(T.used)throw new Error(`KMS returned duplicate account data for format=${a}, derivationPath=${l}.`);T.used=!0;let{chainType:I,pathType:k}=T.descriptor;r[I]=Uv(vk({chainType:I,pathType:k,address:f,publicKey:m}))}for(let{descriptor:o,used:a}of n.values())if(!a)throw new Error(`KMS did not return data for requested chain ${o.chainType} with path ${o.derivationPath}`);return{chains:r}}i(ff,"convertKMSWalletToVaultAccountParams");function vk({chainType:e,pathType:t,address:r,publicKey:n}){switch(e){case _.Solana:return{chainType:e,pathType:t,address:r};case _.EVM:return{chainType:e,pathType:t,address:r};case _.Sui:{if(!n)throw new Error("KMS response missing required public key for Sui account conversion.");let o=sr(n);return{chainType:e,pathType:t,address:r,publicKey:o}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{if(!n)throw new Error("KMS response missing required public key for Bitcoin account conversion.");let o=sr(n),a=r?{[Kt.Mainnet]:r}:void 0;return{chainType:e,pathType:t,publicKey:o,addresses:a}}default:throw new Error(`Unsupported chain type ${e} returned from KMS conversion.`)}}i(vk,"createChainAddressInput");h();p();async function bk(e){try{return Oc("enable-kms-authenticator-mapping")?(j.addBreadcrumb(F.Account,"Starting KMS authenticator mapping sync",Q.Info),await e.rebuildKMSAuthenticatorMapping(),j.addBreadcrumb(F.Account,"Successfully rebuilt KMS authenticator mapping",Q.Info),{success:!0,action:"built",message:"Mapping rebuilt successfully"}):(j.addBreadcrumb(F.Account,"KMS authenticator mapping sync skipped: feature flag disabled",Q.Info),{success:!0,action:"skipped",message:"Mapping sync skipped (feature flag disabled)"})}catch(t){return j.captureError(t,F.Account),{success:!1,action:"error",message:t.message}}}i(bk,"syncKMSAuthenticatorMapping");h();p();h();p();h();p();h();p();function $t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(M.NODE_ENV!=="production"){var o=Ik[e],a=o?typeof o=="function"?o.apply(null,r):o:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}i($t,"n");function ta(e){return!!e&&!!e[Sr]}i(ta,"r");function Qo(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===_k}(e)||Array.isArray(e)||!!e[kA]||!!e.constructor[kA]||tm(e)||rm(e))}i(Qo,"t");function lc(e,t,r){r===void 0&&(r=!1),na(e)===0?(r?Object.keys:am)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,o){return t(o,n,e)})}i(lc,"i");function na(e){var t=e[Sr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:tm(e)?2:rm(e)?3:0}i(na,"o");function J0(e,t){return na(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}i(J0,"u");function wk(e,t){return na(e)===2?e.get(t):e[t]}i(wk,"a");function PA(e,t,r){var n=na(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}i(PA,"f");function xk(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}i(xk,"c");function tm(e){return Mk&&e instanceof Map}i(tm,"s");function rm(e){return Tk&&e instanceof Set}i(rm,"v");function Yo(e){return e.o||e.t}i(Yo,"p");function nm(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=kk(e);delete t[Sr];for(var r=am(t),n=0;n<r.length;n++){var o=r[n],a=t[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}i(nm,"l");function im(e,t){return t===void 0&&(t=!1),om(e)||ta(e)||!Qo(e)||(na(e)>1&&(e.set=e.add=e.clear=e.delete=Ak),Object.freeze(e),t&&lc(e,function(r,n){return im(n,!0)},!0)),e}i(im,"d");function Ak(){$t(2)}i(Ak,"h");function om(e){return e==null||typeof e!="object"||Object.isFrozen(e)}i(om,"y");function Yn(e){var t=Pk[e];return t||$t(18,e),t}i(Yn,"b");function AA(){return M.NODE_ENV==="production"||ra||$t(0),ra}i(AA,"_");function H0(e,t){t&&(Yn("Patches"),e.u=[],e.s=[],e.v=t)}i(H0,"j");function df(e){Y0(e),e.p.forEach(Sk),e.p=null}i(df,"O");function Y0(e){e===ra&&(ra=e.l)}i(Y0,"g");function SA(e){return ra={p:[],l:ra,h:e,m:!0,_:0}}i(SA,"w");function Sk(e){var t=e[Sr];t.i===0||t.i===1?t.j():t.O=!0}i(Sk,"S");function $0(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Yn("ES5").S(t,e,n),n?(r[Sr].P&&(df(t),$t(4)),Qo(e)&&(e=hf(t,e),t.l||pf(t,e)),t.u&&Yn("Patches").M(r[Sr].t,e,t.u,t.s)):e=hf(t,r,[]),df(t),t.u&&t.v(t.u,t.s),e!==BA?e:void 0}i($0,"P");function hf(e,t,r){if(om(t))return t;var n=t[Sr];if(!n)return lc(t,function(a,l){return EA(e,n,t,a,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return pf(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=n.i===4||n.i===5?n.o=nm(n.k):n.o;lc(n.i===3?new Set(o):o,function(a,l){return EA(e,n,o,a,l,r)}),pf(e,o,!1),r&&e.u&&Yn("Patches").R(n,r,e.u,e.s)}return n.o}i(hf,"M");function EA(e,t,r,n,o,a){if(M.NODE_ENV!=="production"&&o===r&&$t(5),ta(o)){var l=hf(e,o,a&&t&&t.i!==3&&!J0(t.D,n)?a.concat(n):void 0);if(PA(r,n,l),!ta(l))return;e.m=!1}if(Qo(o)&&!om(o)){if(!e.h.F&&e._<1)return;hf(e,o),t&&t.A.l||pf(e,o)}}i(EA,"A");function pf(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&im(t,r)}i(pf,"x");function G0(e,t){var r=e[Sr];return(r?Yo(r):e)[t]}i(G0,"z");function MA(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}i(MA,"I");function Q0(e){e.P||(e.P=!0,e.l&&Q0(e.l))}i(Q0,"k");function Z0(e){e.o||(e.o=nm(e.t))}i(Z0,"E");function X0(e,t,r){var n=tm(t)?Yn("MapSet").N(t,r):rm(t)?Yn("MapSet").T(t,r):e.g?function(o,a){var l=Array.isArray(o),f={i:l?1:0,A:a?a.A:AA(),P:!1,I:!1,D:{},l:a,t:o,k:null,o:null,j:null,C:!1},m=f,A=em;l&&(m=[f],A=uc);var T=Proxy.revocable(m,A),I=T.revoke,k=T.proxy;return f.k=k,f.j=I,k}(t,r):Yn("ES5").J(t,r);return(r?r.A:AA()).p.push(n),n}i(X0,"R");function Ek(e){return ta(e)||$t(22,e),i(function t(r){if(!Qo(r))return r;var n,o=r[Sr],a=na(r);if(o){if(!o.P&&(o.i<4||!Yn("ES5").K(o)))return o.t;o.I=!0,n=TA(r,a),o.I=!1}else n=TA(r,a);return lc(n,function(l,f){o&&wk(o.t,l)===f||PA(n,l,t(f))}),a===3?new Set(n):n},"n")(e)}i(Ek,"D");function TA(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return nm(e)}i(TA,"F");var IA,ra,sm=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Mk=typeof Map<"u",Tk=typeof Set<"u",_A=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",BA=sm?Symbol.for("immer-nothing"):((IA={})["immer-nothing"]=!0,IA),kA=sm?Symbol.for("immer-draftable"):"__$immer_draftable",Sr=sm?Symbol.for("immer-state"):"__$immer_state";var Ik={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},_k=""+Object.prototype.constructor,am=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,kk=Object.getOwnPropertyDescriptors||function(e){var t={};return am(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Pk={},em={get:i(function(e,t){if(t===Sr)return e;var r=Yo(e);if(!J0(r,t))return function(o,a,l){var f,m=MA(a,l);return m?"value"in m?m.value:(f=m.get)===null||f===void 0?void 0:f.call(o.k):void 0}(e,r,t);var n=r[t];return e.I||!Qo(n)?n:n===G0(e.t,t)?(Z0(e),e.o[t]=X0(e.A.h,n,e)):n},"get"),has:i(function(e,t){return t in Yo(e)},"has"),ownKeys:i(function(e){return Reflect.ownKeys(Yo(e))},"ownKeys"),set:i(function(e,t,r){var n=MA(Yo(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var o=G0(Yo(e),t),a=o?.[Sr];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(xk(r,o)&&(r!==void 0||J0(e.t,t)))return!0;Z0(e),Q0(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},"set"),deleteProperty:i(function(e,t){return G0(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Z0(e),Q0(e)):delete e.D[t],e.o&&delete e.o[t],!0},"deleteProperty"),getOwnPropertyDescriptor:i(function(e,t){var r=Yo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},"getOwnPropertyDescriptor"),defineProperty:i(function(){$t(11)},"defineProperty"),getPrototypeOf:i(function(e){return Object.getPrototypeOf(e.t)},"getPrototypeOf"),setPrototypeOf:i(function(){$t(12)},"setPrototypeOf")},uc={};lc(em,function(e,t){uc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),uc.deleteProperty=function(e,t){return M.NODE_ENV!=="production"&&isNaN(parseInt(t))&&$t(13),uc.set.call(this,e,t,void 0)},uc.set=function(e,t,r){return M.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&$t(14),em.set.call(this,e[0],t,r,e[0])};var Bk=function(){function e(r){var n=this;this.g=_A,this.F=!0,this.produce=function(o,a,l){if(typeof o=="function"&&typeof a!="function"){var f=a;a=o;var m=n;return function(R){var V=this;R===void 0&&(R=f);for(var H=arguments.length,X=Array(H>1?H-1:0),z=1;z<H;z++)X[z-1]=arguments[z];return m.produce(R,function(ce){var se;return(se=a).call.apply(se,[V,ce].concat(X))})}}var A;if(typeof a!="function"&&$t(6),l!==void 0&&typeof l!="function"&&$t(7),Qo(o)){var T=SA(n),I=X0(n,o,void 0),k=!0;try{A=a(I),k=!1}finally{k?df(T):Y0(T)}return typeof Promise<"u"&&A instanceof Promise?A.then(function(R){return H0(T,l),$0(R,T)},function(R){throw df(T),R}):(H0(T,l),$0(A,T))}if(!o||typeof o!="object"){if((A=a(o))===void 0&&(A=o),A===BA&&(A=void 0),n.F&&im(A,!0),l){var O=[],C=[];Yn("Patches").M(o,A,O,C),l(O,C)}return A}$t(21,o)},this.produceWithPatches=function(o,a){if(typeof o=="function")return function(A){for(var T=arguments.length,I=Array(T>1?T-1:0),k=1;k<T;k++)I[k-1]=arguments[k];return n.produceWithPatches(A,function(O){return o.apply(void 0,[O].concat(I))})};var l,f,m=n.produce(o,a,function(A,T){l=A,f=T});return typeof Promise<"u"&&m instanceof Promise?m.then(function(A){return[A,l,f]}):[m,l,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}i(e,"e");var t=e.prototype;return t.createDraft=function(r){Qo(r)||$t(8),ta(r)&&(r=Ek(r));var n=SA(this),o=X0(this,r,void 0);return o[Sr].C=!0,Y0(n),o},t.finishDraft=function(r,n){var o=r&&r[Sr];M.NODE_ENV!=="production"&&(o&&o.C||$t(9),o.I&&$t(10));var a=o.A;return H0(a,n),$0(void 0,a)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!_A&&$t(20),this.g=r},t.applyPatches=function(r,n){var o;for(o=n.length-1;o>=0;o--){var a=n[o];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}o>-1&&(n=n.slice(o+1));var l=Yn("Patches").$;return ta(r)?l(r,n):this.produce(r,function(f){return l(f,n)})},e}(),Er=new Bk,Xo=Er.produce,Bie=Er.produceWithPatches.bind(Er),Kie=Er.setAutoFreeze.bind(Er),Oie=Er.setUseProxies.bind(Er),Cie=Er.applyPatches.bind(Er),Rie=Er.createDraft.bind(Er),Uie=Er.finishDraft.bind(Er),Nie=Xo;h();p();var be;(function(e){e.TermsHaveBeenAcknowledgedLastSeenVersion="termsHaveBeenAcknowledgedLastSeenVersion",e.NotificationsHaveBeenAcknowledgedLastSeenVersion="notificationsHaveBeenAcknowledgedLastSeenVersion",e.NetworkSetting="networkSetting",e.DeveloperMode="developerMode",e.SelectedAccount=".phantom-labs.account.selectedAccount",e.AccountsMetadata=".phantom-labs.account.accountMetadata",e.AccountsBalanceMetadata=".phantom-labs.account.accountMetadata.balance",e.MigratedWithInvalidChecksum=".phantom-labs.account.migratedWithInvalidChecksum",e.AccountMetas="accountMetas"})(be||(be={}));var Kk=[be.AccountsMetadata,be.DeveloperMode,be.NetworkSetting,be.SelectedAccount,be.TermsHaveBeenAcknowledgedLastSeenVersion,be.NotificationsHaveBeenAcknowledgedLastSeenVersion];var $ie=new Error("Failed to clear selected account index"),cm=Xe(function*(){try{let e=jr(be.SelectedAccount);return e?.version===2?e.identifier:null}catch{throw Ok}}),Ok=new Error("Failed to get selected account identifier");async function Fr(e){try{let t={version:2,identifier:e};return Qn(be.SelectedAccount)(t)}catch{throw new Error("Failed to set selected account identifier")}}i(Fr,"setSelectedAccountIdentifier");var Ck=d.object({version:d.literal(1),isDeveloperMode:d.boolean()}),Rk=d.object({version:d.literal(1),setting:d.record(d.string())}),Uk=d.union([d.object({version:d.literal(1),index:d.number()}),d.object({version:d.literal(2),identifier:d.string()})]),Nk=d.object({version:d.literal(1),accounts:d.record(d.any())}),Dk=d.object({version:d.literal(1),accounts:d.record(d.any())}),Gie=d.object({version:d.literal(1),accounts:d.array(d.any())}),Zie=d.object({version:d.literal(1),seedIdentifiers:d.array(d.string()),seedlessIdentifiers:d.array(d.string()),privateKeyIdentifiers:d.array(d.string())}),Vk=i((e,t)=>{let r=e,n=t;return!r&&!n?null:{version:1,accounts:{...r?.accounts??{},...n?.accounts??{}}}},"accountsMetadataResolver"),[fo,ia,Jie]=Mg("accounts",[{key:be.AccountsMetadata,type:"object",validator:Nk,nullable:!0,resolver:Vk,updateOn:"change"}]);var[jr,Qn,KA]=Bc("accounts",[{key:be.DeveloperMode,type:"object",validator:Ck,nullable:!0},{key:be.NetworkSetting,type:"object",validator:Rk,nullable:!0},{key:be.SelectedAccount,type:"object",validator:Uk,nullable:!0},{key:be.AccountsBalanceMetadata,type:"object",validator:Dk,nullable:!0},{key:be.MigratedWithInvalidChecksum,type:"boolean",nullable:!0}]);var OA=new Error("Failed to add user account metadata to storage"),um=new Error("Could not find account metadata in storage");async function CA(e,t){let r=fo(be.AccountsMetadata);if(!r)throw um;let n=r.accounts[e];n?n=Xo(n,a=>{a.name=t}):n={name:t},r.accounts[e]=n,ia(be.AccountsMetadata)(r)}i(CA,"setMultiChainAccountName");async function RA(e,t){let r=fo(be.AccountsMetadata);if(!r)throw um;let n=r.accounts[e];n?n=Xo(n,a=>{a.icon=t}):n={icon:t,name:In.t("onboardingImportAccountsAccountName",{walletIndex:""})},r.accounts[e]=n,ia(be.AccountsMetadata)(r)}i(RA,"setMultiChainAccountIcon");async function UA(e,t){let r=jr(be.AccountsBalanceMetadata);r||(r={version:1,accounts:{}});let n=r.accounts[e];n?n.balance=t:(n={balance:t},r.accounts[e]=n),Qn(be.AccountsBalanceMetadata)(r)}i(UA,"setAccountBalance");async function ho(e,t){try{let r=fo(be.AccountsMetadata);r?r.accounts[e]=t:r={version:1,accounts:{[e]:t}},ia(be.AccountsMetadata)(r)}catch{throw OA}}i(ho,"addMultiChainAccountMetadata");async function NA(e){try{let t=fo(be.AccountsMetadata);t?t.accounts=Xo(t.accounts,n=>{for(let[o,a]of Object.entries(e))n[o]||(n[o]={name:""}),n[o].name=a.name,n[o].icon=a.icon??n[o].icon,n[o].connectedDevices=a.connectedDevices??n[o].connectedDevices}):t={version:1,accounts:{...e}},ia(be.AccountsMetadata)(t)}catch{throw OA}}i(NA,"addAccountMetadataBatch");var DA=Xe(function*(e){let t=jr(be.AccountsBalanceMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e];return r||(r={}),r}),VA=Xe(function*(e){let t=fo(be.AccountsMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e],n=In.t("onboardingImportAccountsAccountName",{walletIndex:""}),l=(yield xo(ha)?.get(be.AccountsMetadata))?.accounts?.[e]?.name;return r&&r.name===n&&l&&(r=Xo(r,It(f=>{f.name=l},0,[l]))),r||(r={name:l||n}),{...r}}),LA=Xe(function*(){let e=jr(be.AccountsBalanceMetadata);return e?e.accounts:{}}),FA=Xe(function*(){let e=fo(be.AccountsMetadata),t={},r=new Set([...Object.keys(e?.accounts||{})]),o=yield xo(ha)?.get(be.AccountsMetadata),a=In.t("onboardingImportAccountsAccountName",{walletIndex:""});for(let l of r){let f=e?.accounts[l],m=o?.accounts?.[l]?.name;f&&f.name===a&&m&&(f=Xo(f,It(A=>{A.name=m},0,[m]))),f||(f={name:m||a}),t[l]={...f}}return t});async function Lk(e){let t=jr(be.AccountsBalanceMetadata);t&&(delete t.accounts[e],Qn(be.AccountsBalanceMetadata)(t))}i(Lk,"removeMultiChainAccountBalanceMetadata");async function mf(e){let t=fo(be.AccountsMetadata);if(!t)throw um;delete t.accounts[e],ia(be.AccountsMetadata)(t),await Lk(e)}i(mf,"removeMultiChainAccountMetadata");function gf(e,t,r,n){let o=Or(t,r);return e.find(a=>a.type===P.KMSVault&&a.identifier===o&&(!a.apiEnvironment||a.apiEnvironment===n))}i(gf,"findExistingKMSVaultAccount");function yf(e,t,r){let o=lu(t).addresses;return e.some(a=>{if(a.type===P.KMSVault||"apiEnvironment"in a&&a.apiEnvironment&&a.apiEnvironment!==r)return!1;let l=Ky(a);for(let f of l.addresses)if(o.has(f))return!0;return!1})}i(yf,"hasMatchingNonKMSAccount");function jA(e){let t=e+1;return In.t("onboardingImportAccountsAccountName",{walletIndex:t})}i(jA,"generateKMSAccountName");async function vf(e,t,r,n,o,a,l){j.addBreadcrumb(F.Account,"Adding KMS vault account to local storage",Q.Info);let f=await e.addKMSVaultAccount({organizationId:t,walletId:r,tag:n,derivationIndex:0,chains:o,apiEnvironment:l});j.addBreadcrumb(F.Account,"Added KMS vault account to vault storage",Q.Info);let m=jA(a.length);return await ho(f.identifier,{name:m,icon:void 0}),j.addBreadcrumb(F.Account,`Set account metadata with name: ${m}`,Q.Info),f}i(vf,"addKMSVaultAccountWithMetadata");async function Fk(e){try{j.addBreadcrumb(F.Account,"Starting KMS vault account sync (read-only)",Q.Info);let t=await e.fetchAllAccounts();if(t.some(T=>T.type===P.Seedless))return j.addBreadcrumb(F.Account,"KMS vault sync skipped: user has seedless accounts (will migrate separately)",Q.Info),{success:!1,action:"skipped_seedless",message:"Sync skipped for seedless accounts"};let n=e.getKMSInstance(),{derivations:o,conversionMetadata:a}=await lf(0);j.addBreadcrumb(F.Account,`Checking for KMS vault with tag "${Ut}"`,Q.Info);let l=await Bh(n,Ut,o);if(!l)return j.addBreadcrumb(F.Account,"KMS vault account not found remotely",Q.Info),{success:!1,action:"not_found",message:"Vault account not found in KMS"};j.addBreadcrumb(F.Account,`Found KMS vault: ${l.walletId}`,Q.Info);let{chains:f}=ff(l.accounts,a),m=ir()===Bt.Production?"production":"staging";return gf(t,l.walletId,Ut,m)?(j.addBreadcrumb(F.Account,"Upserting missing chains for existing KMS vault account",Q.Info),await e.upsertKMSVaultChains({organizationId:l.organizationId,walletId:l.walletId,tag:Ut,derivationIndex:0,chains:f}),{success:!0,action:"already_synced",message:"Account already synced (updated chains)",walletId:l.walletId}):yf(t,f,m)?(j.addBreadcrumb(F.Account,"KMS vault sync skipped: matching non-KMS local account found by address",Q.Info),{success:!0,action:"already_synced",message:"Matching non-KMS local account detected by address; skipping duplicate",walletId:l.walletId}):(await vf(e,l.organizationId,l.walletId,Ut,f,t,m),j.addBreadcrumb(F.Account,"Successfully synced KMS vault account to local storage",Q.Info),{success:!0,action:"synced",message:"Account synced successfully",walletId:l.walletId})}catch(t){return j.captureError(t,F.Account),{success:!1,action:"error",message:t.message}}}i(Fk,"syncKMSVaultAccount");h();p();async function jk(e,t,r){try{j.addBreadcrumb(F.Account,"Storing KMS vault account from existing data",Q.Info);let n=await t.fetchAllAccounts(),{conversionMetadata:o}=await lf(0),{chains:a}=ff(e.accounts,o),l=ir()===Bt.Production?"production":"staging",f=gf(n,e.walletId,Ut,l);if(f)return j.addBreadcrumb(F.Account,"KMS vault account already exists locally",Q.Info),await t.upsertKMSVaultChains({organizationId:e.organizationId,walletId:e.walletId,tag:Ut,derivationIndex:0,chains:a}),{isNewAccount:!1,account:f,message:"Account already exists (chains updated if needed)"};if(yf(n,a,l))return j.addBreadcrumb(F.Account,"KMS vault account matches existing non-KMS account by address - skipping",Q.Info),{isNewAccount:!1,account:null,message:"Matching non-KMS account detected by address"};j.addBreadcrumb(F.Account,"Adding new KMS vault account to local storage",Q.Info);let m=await vf(t,e.organizationId,e.walletId,Ut,a,n,l);return j.addBreadcrumb(F.Account,"Successfully stored new KMS vault account",Q.Info),{isNewAccount:!0,account:m,message:"Account created successfully"}}catch(n){return j.captureError(n,F.Account),{isNewAccount:!1,account:null,message:n.message}}}i(jk,"storeKMSVaultAccountFromData");h();p();var zk=i(e=>({getSeed:i(t=>qk(e,t),"getSeed"),setSeed:i((t,r)=>Wk(e,t,r),"setSeed"),getClientJWTSigner:i((t,r)=>Hk(e,t,r),"getClientJWTSigner"),setClientJWTSigner:i((t,r,n)=>$k(e,t,r,n),"setClientJWTSigner"),removeSeeds:i(t=>zA(e,t),"removeSeeds"),removeClientJWTKeypairs:i(t=>qA(e,t),"removeClientJWTKeypairs"),clear:i(async()=>{await zA(e,"all"),await qA(e,"all")},"clear")}),"createVaultCache"),po=`${cr}.cache.secrets`,lm=i(e=>`${cr}.cache.seed.${e}`,"seedCacheKey"),fm=i(e=>`${cr}.cache.client-jwt.${e}`,"clientJWTKeypairKey"),qk=i(async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=lm(r),o=null;try{o=await t.getSecureValue(n)}catch{}if(!o)return null;let{bytes:a,encoding:l}=o.seed;return new Uint8Array(Buffer.from(a,l))},"getSeed"),Wk=i(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,o)=>{if(!e())return;let a=lm(n);await r.setSecureValue(a,{version:1,identifier:n,seed:{bytes:Buffer.from(o).toString("base64"),encoding:"base64"}});let l=await t.get(po);if(!l)l={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let f=new Set(l.seedIdentifiers);f.add(n),l.seedIdentifiers=Array.from(f)}await t.set(po,l)},"setSeed"),zA=i(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(po);if(!n)return;let o=r==="all"?n.seedIdentifiers:r,a=new Set(o),l=n.seedIdentifiers.filter(f=>a.has(f));await t.removeSecureValue(l.map(lm)),await e.set(po,{version:1,seedIdentifiers:n.seedIdentifiers.filter(f=>!a.has(f)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},"removeSeeds"),Hk=i(async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let o=fm(r),a=null;try{a=await t.getSecureValue(o)}catch{}if(!a||!a.keyPairs[n])return null;let l=a.keyPairs[n],f=new Uint8Array(Buffer.from(l.p256pubkey.bytes,l.p256pubkey.encoding)),m=new Uint8Array(Buffer.from(l.p256privkey.bytes,l.p256privkey.encoding));return{p256pubkey:f,p256privkey:m}},"getClientJWTSigner"),$k=i(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,o,a)=>{if(!e())return;let l=fm(n),f=await r.getSecureValue(l)??{version:1,identifier:n,keyPairs:{}};f.keyPairs[o]={p256pubkey:{bytes:it(Buffer.from(a.p256pubkey)),encoding:"base64"},p256privkey:{bytes:it(Buffer.from(a.p256privkey)),encoding:"base64"}},await r.setSecureValue(l,f);let m=await t.get(po);if(!m)m={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let A=new Set(m.clientJWTKeypairIdentifiers??[]);A.add(n),m.clientJWTKeypairIdentifiers=Array.from(A)}await t.set(po,m)},"setClientJWTSigner"),qA=i(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(po);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let o=r==="all"?n.clientJWTKeypairIdentifiers:r,a=new Set(o);await t.removeSecureValue(o.map(fm)),await e.set(po,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(l=>!a.has(l))})},"removeClientJWTKeypairs");h();p();var bf=ue(At());h();p();var fc=i(()=>({isReady:!0,value:St(ar)}),"useChainAvailability");h();p();var dm=i(()=>{let e=Rt();return Qe({mutationFn:i(async({addressTypes:r})=>{for(let n of r)await Pg(n);Di(e)},"mutationFn")})},"useDisableAddressTypes");h();p();var Gk=i(()=>{let e=Rt();return Qe({mutationFn:i(async({chainIDs:r})=>{await Ig(r),Di(e)},"mutationFn")})},"useDisableChains");h();p();var hm=i(()=>{let e=Rt(),{deriveAddresses:t}=Kc();return Qe({mutationFn:i(async({addressTypes:n})=>{for(let o of n)await kg(o);await t(),await Di(e)},"mutationFn")})},"useEnableAddressTypes");h();p();var Zk=i(()=>{let e=Rt(),{deriveAddresses:t}=Kc();return Qe({mutationFn:i(async({chainIDs:n})=>{await Tg(n),await t(),await Di(e)},"mutationFn")})},"useEnableChains");h();p();var Jk=i(()=>{let{mutateAsync:e}=dm(),{mutateAsync:t}=hm();return Qe({mutationFn:i(async({addressTypes:n})=>{if(await _g())await t({addressTypes:n});else{let a=new Set(pe.bitcoin.addressTypes);for(let l of n)a.delete(l);if(a.size===pe.bitcoin.addressTypes.length&&a.delete(_.BitcoinNativeSegwit),a.size>0){let l=Array.from(a);await e({addressTypes:l})}}},"mutationFn")})},"useUpdateVisibleBitcoinAddressTypes");var pm=pe.getAllChainIDs().filter(e=>pe.isChainDefaultEnabled(e)),WA=pm.map(e=>pe.getMainnetNetworkID(e)),Yk=WA.flatMap(e=>pe.getAddressTypes(e)),HA=i(()=>fc().value?.enabledAddressTypes??Yk,"useEnabledAddressTypes"),oa=i(()=>fc().value?.enabledChainIDs??pm,"useEnabledChains"),Wae=i(()=>fc().value?.supportedChainIDs??pm,"useAllChains"),Hae=i(e=>{let t=fc().value;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:WA},"useEnabledNetworkIDs"),$ae=i(()=>oa().length===1,"useIsSingleChainEnabled"),Gae=i(()=>{let e=oa();return(0,bf.useMemo)(()=>pe.getChainIDs(_.EVM).some(t=>e.includes(t)),[e])},"useIsEvmChainEnabled"),Zae=i(()=>{let e=oa();return(0,bf.useMemo)(()=>e.length===1&&e.includes(gr.Solana),[e])},"useIsSolanaOnlyEnabled"),Jae=i(e=>{let t=oa();return(0,bf.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])},"useIsEnabledChains");h();p();var t3=ue(At());h();p();h();p();var sa=Xe(function*(){let e=jr(be.NetworkSetting);if(!e)return pa();let t=Qk(e);return Xk(t)});function Qk(e){let t={...e,setting:{...e.setting}};return t.setting[_.Sui]||(t.setting[_.Sui]=pa().setting[_.Sui]),t}i(Qk,"ensureChainSetting");var Xk=i(async e=>{let t=!1;e3(e)&&(t=!0);let r=e.setting[_.Solana];r&&pe.isMainnetNetworkID(r)&&(e.setting[_.Solana]=ds,t=!0);let n=e.setting[_.EVM];return n&&pe.isMainnetNetworkID(n)&&(e.setting[_.EVM]=hs,t=!0),t&&await Qn(be.NetworkSetting)(e),e},"overrideMainnetNetworksIfNeeded"),e3=i(e=>{let t=!1,r=e.setting[_.EVM];return r&&(r.toString()==="eip155:5"&&(e.setting[_.EVM]=cn.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting[_.EVM]=cn.Polygon.Amoy,t=!0)),t},"migrateDeprecatedTestnets");var mo=Xe(function*(){let e=ar(),t=yield Jn();if(t.length===0)return[];let r=ir()===Bt.Production?"production":"staging",n=t.filter(It(O=>O.type===P.KMSVault?!O.apiEnvironment||O.apiEnvironment===r:!0,0,[r])),o=jr(be.DeveloperMode),a=sa(),l=FA(),[f,m,A]=yield Pc.all([o,a,l]),I=yield xo(ha)?.get(be.AccountsMetadata),k=In.t("onboardingImportAccountsAccountName",{walletIndex:""});return n.map(It(O=>{let C=A[O.identifier],R=I?.accounts?.[O.identifier]?.name;C&&C.name===k&&R&&(C.name=R),C||(C={name:R||k});let V={name:C.name,icon:C.icon,identifier:O.identifier,addresses:uu(O,e.enabledMainnetOnlyNetworkIDs,e.enabledAddressTypes,e.enabledChainIDs,m,f?.isDeveloperMode??!1)};return O.type===P.Seed?{...V,type:P.Seed,seedIdentifier:O.seedIdentifier,isReadOnly:!1}:O.type===P.Seedless?{...V,type:P.Seedless,seedIdentifier:O.seedIdentifier,isReadOnly:!1}:O.type===P.ReadOnly?{...V,type:P.ReadOnly,isReadOnly:!0}:O.type===P.PrivateKey?{...V,privateKeyIdentifier:O.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...V,type:O.type,isReadOnly:!1}},1,[A,I,k,e,m,f]))});var mm=Xe(function*(){let e=yield mo();return j.addBreadcrumb(F.Account,`Finished fetching all accounts. Num accounts: ${e.length}`,Q.Info),e});function gm(e){let t=St(mo);return jt(t,e)}i(gm,"useAllMultiChainAccountsQuery");h();p();h();p();function ym(){return Qe({mutationFn:i(async({metadataBatch:r})=>{j.addBreadcrumb(F.Account,`Adding Account Metadata Batch: ${Object.entries(r).length} entries`,Q.Info),await NA(r)},"mutationFn"),onError:i(r=>{j.captureError(r,F.Account)},"onError")})}i(ym,"useAddAccountMetadataBatch");function r3(){let{mutateAsync:e}=ym(),t=yt(),{t:r}=Vi();return Qe({mutationFn:i(async({accounts:a,pairedBLEDevice:l})=>{let f=Gm(),m=await t.connectLedgerAccounts(f,a),A=m.reduce((I,k,O)=>{let{name:C,accountIndex:R}=a[O],V;!C||C.length===0?V=r("onboardingImportAccountsLedgerAccountName",{walletIndex:1+R}):V=C;let H;l&&(H=[{...l,version:1,connectionType:fs.BLE,deviceType:ls.Ledger}]);let X={name:V,icon:void 0,connectedDevices:H};return I[k.identifier]=X,I},{});await e({metadataBatch:A});let T=m[0]?.identifier;return T||(T=(await t.fetchAllAccounts())[0].identifier),await Fr(T),m},"mutationFn"),onError:i(a=>j.captureError(a,F.Account),"onError")})}i(r3,"useConnectLedgerAccounts");h();p();h();p();var go=Xe(function*(e){if(e.length===0)throw new Error(Oy);let t=yield cm(),r=e.find(It(n=>n.identifier===t,0,[t]));return r||e[0]});var $A=Xe(function*(){let e=yield mo(),t=yield go(e),r=xo(vd);if(r){let n=ar();r.identifyAccount(e,t,n)}return j.addBreadcrumb(F.Account,`Finished fetching selected account: ${t.identifier}`,Q.Info),t}),n3=Xe(e=>{let t=$A();return{isPending:t.isPending,isLoading:t.isPending,isSuccess:t.isResolved,isFetching:t.isPending,isError:t.isRejected,isFetched:t.isSettled,status:t.isPending?"pending":t.isResolved?"success":"error",data:t.value?e?e(t.value):t.value:void 0,error:t.error}});function Mr({select:e}={}){return St(n3,e)}i(Mr,"useSelectedMultiChainAccount");h();p();var GA=ue(wc()),wf=ue(At());var ZA=(0,wf.createContext)(null);function i3({children:e,userRepository:t}){return(0,GA.jsx)(ZA.Provider,{value:{userRepository:t},children:e})}i(i3,"UserProvider");function o3(){let e=(0,wf.useContext)(ZA);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}i(o3,"useUserContext");function Tr(){return o3().userRepository}i(Tr,"useUserRepository");h();p();h();p();h();p();var dc=i(e=>`/user/v1/users/${e}/profile`,"userProfileByUserIdEndpoint"),xf=i(e=>`/user/v1/profiles/${e}`,"userProfileByUsernameOrUserProfileIdEndpoint"),JA=i(()=>"/user/v1/profiles/creation-check","userEligibleToClaimEndpoint");h();p();h();p();var yo;(function(e){e.PUBLIC="public",e.PRIVATE="private",e.INVISIBLE="invisible",e.HIDDEN="hidden"})(yo||(yo={}));var s3=Object.values(yo),XA=d.string().brand("ProfileId"),hc=d.object({id:XA,username:d.string(),icon:d.string().nullish(),addresses:d.record(d.string(),d.string()),privacyState:d.nativeEnum(yo).optional().default(yo.PUBLIC),biography:d.string().nullish(),phantomJoinDate:d.string().nullish()}),vm=d.string().url().brand("ActorId"),a3=d.object({id:d.string().optional(),orderedItems:vm.array(),next:d.string().optional()}),YA=d.object({id:d.string().url(),current:a3.optional(),totalItems:d.number().optional()}),QA=d.object({type:d.string(),value:d.string().optional(),name:d.string().optional()}),c3=d.object({id:d.string().url().optional(),name:d.string().optional(),type:d.string()}),u3=d.object({id:vm,name:d.string(),preferredUsername:d.string(),manuallyApprovesFollowers:d.boolean(),followers:d.union([YA,d.string().url()]),following:d.union([YA,d.string().url()]),icon:c3.nullish(),attachment:d.union([QA,d.array(QA)]).optional(),summary:d.string().nullish(),published:d.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},o=!1,a=!1,l=!1,f=!1,m=!1,A=!0,T=null;if(t){let I=Array.isArray(t)?t:[t];for(let k of I)if(!(!k.name||!k.value)){if(k.name.endsWith(":address")){let O=ag.safeParse(k.name.replace(":address",""));if(O.success){let C=O.data;n[C]=k.value}}k.name==="requesting"&&(o=k.value==="true"),k.name==="requestedBy"&&(a=k.value==="true"),k.name==="blocking"&&(l=k.value==="true"),k.name==="following"&&(f=k.value==="true"),k.name==="followedBy"&&(m=k.value==="true"),k.name==="notificationsEnabled"&&(A=k.value==="true"),k.name==="tradeCount"&&(T=k.value??null)}}return{...r,addresses:n,isSentFollowRequestPending:o,hasPendingFollowRequest:a,isBlocking:l,isFollowing:f,isFollowedBy:m,areNotificationsEnabled:A,tradeCount:T}}),l3={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},f3=d.object({type:d.nativeEnum(l3),imageUrl:d.string().optional(),unicode:d.string().optional()}),bm=d.object({error:d.object({message:d.string()})});var wm=i(async e=>{let r=await dt.api().get(xf(e)),n=hc.safeParse(r.data);return n.success?n.data:null},"getUserProfileByUsernameOrUserProfileId");var d3=i(e=>({getUsernameAvailability:i(async t=>h3(t),"getUsernameAvailability"),getUserProfile:i(async()=>p3(e),"getUserProfile"),getUserProfileByUsername:i(async t=>wm(t),"getUserProfileByUsername"),getUserProfileByUsernameOrUserProfileId:i(async t=>wm(t),"getUserProfileByUsernameOrUserProfileId"),setUserProfile:i(async({username:t,addresses:r,icon:n,privacyState:o})=>m3(e,{username:t,addresses:r,icon:n,privacyState:o}),"setUserProfile"),patchUserProfile:i(async t=>g3(e,t),"patchUserProfile"),deleteUserProfile:i(async()=>y3(e),"deleteUserProfile"),isEligibleToClaim:i(async t=>v3(t),"isEligibleToClaim")}),"createUserRepository"),h3=i(async e=>{switch((await dt.api().get(xf(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},"getUsernameAvailability"),p3=i(async({authRepository:e})=>{let t=await e.getUser({skipAutoLogin:!0});if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,o=await dt.api().bearer(n).get(dc(r)),a=hc.safeParse(o.data);return a.success?a.data:null},"getUserProfile"),m3=i(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:o})=>{let a=await e.getUser();if(!a)throw new Error("User is not logged in, unable to claim username.");let{userID:l,accessToken:f}=a,m=await dt.api().bearer(f).post(dc(l),{username:t,icon:n,addresses:r,privacyState:o});if(m.status===201){let I=hc.safeParse(m.data);if(I.success)return I.data;throw new Error("Failed to parse created profile")}let A=bm.safeParse(m.data);throw A.success?new Error(A.data.error.message):new Error("Unknown error")},"setUserProfile"),g3=i(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:o,biography:a})=>{let l=await e.getUser();if(!l)throw new Error("User is not logged in, unable to claim username.");let{userID:f,accessToken:m}=l,A=await dt.api().bearer(m).patch(dc(f),{username:t,addresses:r,icon:n,privacyState:o,biography:a});if(A.status===200)return;j.captureMessage(`Failed to patch user profile: ${A.status} ${JSON.stringify(A.data)}`,F.Auth);let T=bm.safeParse(A.data);throw T.success?new Error(T.data.error.message):new Error("Unknown error")},"patchUserProfile"),y3=i(async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,o=await dt.api().bearer(n).delete(dc(r));return 200<=o.status&&o.status<300},"deleteUserProfile"),v3=i(async e=>{try{return(await dt.api().post(JA(),{addresses:e})).status===200}catch{return!1}},"isEligibleToClaim");h();p();var xm="@phantom/users",tr={checkUsernameAvailability(e){return["user",`${xm}:check-username-availability`,{username:e}]},userProfile(){return["user",`${xm}:user-profile`]},userProfileAttributeEffect(e){return["user",`${xm}:user-profile-attribute-effect`,{username:e}]}};h();p();var b3=new Set([tr.userProfile()[1]]),w3=i(e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:b3.has(t)},"userShouldDehydrateQueryPredicate");h();p();h();p();var Af=Cc(Gt,e=>new Am(e)),Am=class{static{i(this,"ClaimUsernameAnalytics")}#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};h();p();var Sm=i(e=>{e.removeQueries({queryKey:tr.userProfile()})},"removeUserProfile"),Em=i(async e=>{await e.resetQueries({queryKey:tr.userProfile()})},"resetUserProfile"),es=i(async e=>{await e.invalidateQueries({queryKey:tr.userProfile()})},"invalidateUserProfile");function x3(){let e=Af(),t=Pr(),r=Tr(),n=Rt(),o=i(async({username:a,addresses:l,icon:f})=>{j.addBreadcrumb(F.Auth,`Claiming Username: ${a}.`,Q.Debug);let m=await t.getUser();if(!m)throw new Error("Unable to claim username. User not authenticated.");j.addBreadcrumb(F.Auth,"Creating user profile to claim username",Q.Debug);let A=await r.setUserProfile({username:a,addresses:l,icon:f,privacyState:yo.PUBLIC});return j.addBreadcrumb(F.Auth,"\u2705 Username Claimed!",Q.Debug),await gd(n),await Em(n),await _o(n),await es(n),await vi(n),e.onClaimFlowComplete(a,m.userID),A},"mutationFn");return Qe({mutationFn:i(async a=>{try{return await o(a)}catch(l){j.addBreadcrumb(F.Auth,"Could not claim username",Q.Error);let f;throw l instanceof Error?f=l:f=new Error("Unable to claim username"),j.captureError(f,F.Auth),f}},"mutationFn")})}i(x3,"useClaimUsername");h();p();function A3(e,t){let r=Af(),n=Tr(),o=tr.checkUsernameAvailability(e),a=i(async()=>{if(!e)return!1;let f=await n.getUsernameAvailability(e);return r.onCheckAvailability(e,f),f},"queryFn"),l=t?.enabled??!!e.trim();return Yt({enabled:l,queryKey:o,queryFn:a})}i(A3,"useCheckUsernameAvailability");h();p();h();p();var pc=class extends Error{static{i(this,"NoUserProfileError")}constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},Mm=class extends Error{static{i(this,"MissingRequiredUsernameClaimParamsError")}constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var S3=Ni({days:1}),E3=Ni({minutes:1});function Tm(e){let t=Tr(),r=Ia(),n=e?.enabled!==void 0?e.enabled:r,o=tr.userProfile();return Yt({enabled:n,queryKey:o,queryFn:i(async()=>{let l=await t.getUserProfile();if(!l)throw new pc;return l},"queryFn"),gcTime:S3,staleTime:E3})}i(Tm,"useUserProfile");h();p();var M3=i(()=>{let e=Rt(),t=Pr(),r=Tr();return Qe({mutationFn:i(async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),Sm(e),md(e),await es(e),await _o(e),await vi(e)},"mutationFn")})},"useDeleteUserProfile");h();p();var Im=i(()=>{let e=Rt(),t=Tr(),r=i(async n=>{await t.patchUserProfile(n),await es(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{await r(n);return}catch(o){j.addBreadcrumb(F.Auth,`Could not update user profile: ${JSON.stringify(n)}`,Q.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not update user profile!"),j.captureError(a,F.Auth),a}},"mutationFn"),onMutate:i(async n=>{let o=tr.userProfile();await e.cancelQueries({queryKey:o});let a=e.getQueryData(o);return e.setQueryData(o,{...a,...n}),{previousData:a}},"onMutate"),onSuccess:i((n,o)=>{let a=tr.userProfile(),l=e.getQueryData(a);if(l){let f={...l,...o};e.setQueryData(a,f)}},"onSuccess"),onError:i((n,o,a)=>{a&&e.setQueryData(tr.userProfile(),a.previousData)},"onError")})},"usePatchUserProfile");h();p();var T3=Cc(Gt,e=>new Sf(e)),Sf=class{static{i(this,"ManageUserProfileAnalytics")}#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};h();p();var Ef=ue(At());var I3=i(e=>{let t=(0,Ef.useMemo)(()=>{if(e){if(_3(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(pe.isNetworkID(e))return n=>n.networkID===e;if(mg(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]),r=(0,Ef.useCallback)(n=>{let o=n.addresses.filter(t);if(o.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return o[0]},[e,t]);return Mr({select:r})},"useSelectedChainAddress");function _3(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}i(_3,"isAddressNetworkIDFilter");h();p();h();p();h();p();var e1=Xe(function*(e){return(yield DA(e))?.balance}),t1=Xe(function*(){return yield LA()});var k3=i((e="",t=!0)=>{let r=St(e1,e);return jt(r)},"useAccountBalance"),P3=i((e=!0)=>{let t=St(t1);return jt(t)},"useAllAccountBalances");h();p();var B3=Xe(function*(e){let t=yield mm(),r=t.find(It(n=>n.identifier===e,0,[e]));if(!r)throw new Error(Cy(t.length,e));return r});function K3(e){let t=St(B3,e);return jt(t)}i(K3,"useAccountWithIdentifier");h();p();function O3(){let e=yt();return Qe({mutationFn:i(async({name:o,addresses:a,icon:l})=>{let f=await e.addReadonlyAccount(a),m={name:o,icon:l};return await ho(f.identifier,m),await Fr(f.identifier),f},"mutationFn"),onSettled:i(async()=>{},"onSettled"),onError:i(o=>j.captureError(o,F.Account),"onError")})}i(O3,"useAddReadOnlyAccount");h();p();function C3(){let{t:e}=Vi(),t=Gt(),{fetchAllAccounts:r,addAccountForSeed:n,addAccountForSeedless:o,fetchAllSeedlessMetas:a}=yt();return Qe({mutationFn:i(async({name:A,icon:T,seedIdentifier:I})=>{j.addBreadcrumb(F.Account,`Adding new account for s**d: ${I}`,Q.Info);let O=(await a()).find(V=>V.identifier===I),C=O?await o(I):await n(I);await ho(C.identifier,{name:A||e("onboardingImportAccountsAccountName",{walletIndex:(await r()).length}),icon:T}),await Fr(C.identifier);let R=dn(C);return t.capture("addSeedAccount",{data:{seedIdentifier:I,accountType:O?"seedless":"seed",walletAddresses:R}}),C},"mutationFn"),onSettled:i(async()=>{},"onSettled"),onError:i(A=>j.captureError(A,F.Account),"onError")})}i(C3,"useAddSeedAccount");h();p();var R3=Xe(function*(e){try{let t;switch(e){case"all":{let r=yield uf();t=[...yield cf(),...r];break}case"local-only":{t=[...yield uf()];break}case"recoverable-only":{t=[...yield cf()];break}}return t}catch(t){throw t instanceof Error&&j.captureError(t,F.Account),t}});function Mf(e){let t=St(R3,e);return jt(t)}i(Mf,"useAllSeeds");h();p();function _m(){let e=St(KA,be.DeveloperMode);return jt(e)}i(_m,"useDeveloperMode");h();p();function U3(){let e=yt();return Qe({mutationFn:i(async({chainType:r,privateKey:n,name:o,icon:a})=>{j.addBreadcrumb(F.Account,"Importing Private Key Account... \u23F3",Q.Info);let l=await e.importPrivateKeyAccount(r,n),f={name:o,icon:a};return await ho(l.identifier,f),await Fr(l.identifier),j.addBreadcrumb(F.Account,`Imported Private Key Account \u2705: ${l.identifier}`,Q.Info),l},"mutationFn")})}i(U3,"useImportPrivateKeyAccount");h();p();function N3(){let e=St(sa);return jt(e)}i(N3,"useMultiChainNetworkSetting");h();p();function D3(){let e=Gt(),t=yt();return Qe({mutationFn:i(async({identifier:n})=>{j.addBreadcrumb(F.Account,`Removing Account... \u23F3: ${n}`,Q.Info);let a=(await t.fetchAllAccounts()).find(m=>m.identifier===n),l=dn(a);await Promise.all([t.removeAccount(n),mf(n)]);let f=await go(await t.fetchAllAccounts());await Fr(f.identifier),await as.invalidate(),e.capture("removeAccount",{data:{walletAddresses:l}}),j.addBreadcrumb(F.Account,`Removed Account \u2705: ${n}`,Q.Info)},"mutationFn")})}i(D3,"useRemoveAccount");h();p();function V3(){let e=Gt(),t=yt();return Qe({mutationFn:i(async({seedIdentifier:o})=>{let a=await t.fetchAllAccounts(),l=[];for(let m of a)switch(m.type){case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:continue;case P.Seed:case P.Seedless:m.seedIdentifier===o&&l.push(m);break;default:xe(m)}let f=l.flatMap(m=>dn(m));for(let m of l)await Promise.all([t.removeAccount(m.identifier),mf(m.identifier)]);await as.invalidate(),e.capture("removeSeed",{data:{numOfAccounts:l.length,walletAddresses:f}})},"mutationFn"),onError:i(o=>{j.captureError(o,F.Account)},"onError")})}i(V3,"useRemoveMultiChainSeed");h();p();function L3(){return Qe({mutationFn:i(async({identifier:r,name:n})=>{j.addBreadcrumb(F.Account,"Renaming Multichain Account",Q.Info),await CA(r,n)},"mutationFn"),onError:i(r=>j.captureError(r,F.Account),"onError")})}i(L3,"useRenameMultiChainAccount");h();p();function F3(){let e=yt();return Qe({mutationFn:i(async({identifier:r,toIndex:n})=>{await e.reorderAccount(r,n),await as.invalidate()},"mutationFn")})}i(F3,"useReorderMultiChainAccount");h();p();var j3=Xe(function*(){try{let e=yield Jn(),r=(yield go(e)).identifier;if(!r)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return r}catch(e){throw e instanceof Error&&j.captureError(e,F.Account),e}});function z3(){let e=St(j3);return jt(e)}i(z3,"useSelectedAccountIdentifier");h();p();function q3(){return Qe({mutationFn:i(async({identifier:t,balance:r})=>(await UA(t,r),{identifier:t,balance:r}),"mutationFn")})}i(q3,"useSetAccountBalance");h();p();var r1=ue(At());function W3(){return{mutate:(0,r1.useCallback)(async({developerMode:t})=>{await Qn(be.DeveloperMode)(t)},[])}}i(W3,"useSetDeveloperMode");h();p();function H3(){return Qe({mutationFn:i(async({identifier:t,icon:r})=>{j.addBreadcrumb(F.Account,"Setting Multichain Account Icon",Q.Info),await RA(t,r)},"mutationFn")})}i(H3,"useSetMultiChainAccountIcon");h();p();var n1=ue(At());function $3(){return{mutate:(0,n1.useCallback)(async({networkSetting:t})=>{await Qn(be.NetworkSetting)(t)},[])}}i($3,"useSetMultiChainNetworkSetting");h();p();function G3(){let e=Gt(),t=yt();return Qe({mutationFn:i(async({identifier:o})=>{await Fr(o);let l=(await t.fetchAllAccounts()).find(m=>m.identifier===o),f=l?dn(l):[];return e.capture("changeAccount",{data:{identifier:o,walletAddresses:f}}),o},"mutationFn"),onError:i(o=>j.captureError(o,F.Account),"onError")})}i(G3,"useSetSelectedMultiChainAccountIdentifier");h();p();var Tf=ue(At());h();p();var i1=ue(At());var mc=i(()=>{let{data:e}=Mr();return(0,i1.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])},"useSelectedNetworks");var Z3=i(()=>{let{data:e,isFetching:t}=gm(),{data:r,isFetching:n}=Mr(),o=yt(),a=mc(),{data:l=[],isFetching:f,error:m}=J3(o),{data:A,isFetching:T}=Y3();return(0,Tf.useEffect)(()=>{m&&(o1(m)||j.captureError(m,F.Account))},[m]),(0,Tf.useMemo)(()=>({data:{"All Accounts":Df(e),"Selected Account":Df(r),"Selected Networks":a.map(I=>pe.getNetworkName(I)),"Seed Cache Digests (IDPLAT-295)":l,"KMS Authenticator Mapping":A},isFetching:t||n||f||T}),[e,t,n,f,l,r,a,T,A])},"useAccountsExport"),o1=i(e=>!(e instanceof Error)||!e.message?!1:/not supported|not implemented|vault locked/i.test(e.message),"isExpectedSeedCacheDigestError"),J3=i(e=>Yt({queryKey:["seed-cache-digests","IDPLAT-295"],queryFn:i(async()=>{try{let t=await e.DO_NOT_USE_diagnoseSeedCacheDigests();return!t||t.length===0?[]:t}catch(t){if(o1(t))return[];throw t}},"queryFn"),retry:!1,staleTime:5*60*1e3}),"useSeedCacheDigestReports"),Y3=i(()=>Yt({queryKey:["kms-authenticator-mapping"],queryFn:i(async()=>Cn(mn)?.mapping||{},"queryFn"),retry:!1,staleTime:5*60*1e3}),"useKMSAuthenticatorMapping");h();p();var s1=ue(At());var Q3=i((e=[])=>{let t=oa();return(0,s1.useMemo)(()=>e.filter(r=>{let n=pe.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])},"useAdditionalNetworks");h();p();var B1=ue(tS()),Rf=ue(At());h();p();var mt=ue(At(),1);var bc=i(e=>e.type==="checkbox","isCheckBoxInput"),ca=i(e=>e instanceof Date,"isDateObject"),mr=i(e=>e==null,"isNullOrUndefined"),y1=i(e=>typeof e=="object","isObjectType"),Ft=i(e=>!mr(e)&&!Array.isArray(e)&&y1(e)&&!ca(e),"isObject"),v1=i(e=>Ft(e)&&e.target?bc(e.target)?e.target.checked:e.target.value:e,"getEventValue"),X3=i(e=>e.substring(0,e.search(/.\d/))||e,"getNodeParentName"),b1=i((e,t)=>[...e].some(r=>X3(t)===r),"isNameInFieldArray"),Kf=i(e=>e.filter(Boolean),"compact"),Mt=i(e=>e===void 0,"isUndefined"),fe=i((e,t,r)=>{if(!t||!Ft(e))return r;let n=Kf(t.split(/[,[\].]+?/)).reduce((o,a)=>mr(o)?o:o[a],e);return Mt(n)||n===e?Mt(e[t])?r:e[t]:n},"get"),Km={BLUR:"blur",CHANGE:"change"},Mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Oi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Rm=i((e,t)=>{let r=Object.assign({},e);return delete r[t],r},"omit"),e6=mt.default.createContext(null),Um=i(()=>mt.default.useContext(e6),"useFormContext");var w1=i((e,t,r,n=!0)=>{function o(l){return()=>{if(l in e)return t[l]!==Mn.all&&(t[l]=!n||Mn.all),r&&(r[l]=!0),e[l]}}i(o,"createGetter");let a={};for(let l in e)Object.defineProperty(a,l,{get:o(l)});return a},"getProxyFormState"),Ir=i(e=>Ft(e)&&!Object.keys(e).length,"isEmptyObject"),x1=i((e,t,r)=>{let n=Rm(e,"name");return Ir(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(o=>t[o]===(!r||Mn.all))},"shouldRenderFormState"),If=i(e=>Array.isArray(e)?e:[e],"convertToArrayPayload"),A1=i((e,t,r)=>r&&t?e===t:!e||!t||e===t||If(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n))),"shouldSubscribeByName");function Nm(e){let t=mt.default.useRef(e);t.current=e,mt.default.useEffect(()=>{let r=i(o=>{o&&o.unsubscribe()},"tearDown"),n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}i(Nm,"useSubscribe");function t6(e){let t=Um(),{control:r=t.control,disabled:n,name:o,exact:a}=e||{},[l,f]=mt.default.useState(r._formState),m=mt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),A=mt.default.useRef(o),T=mt.default.useRef(!0);A.current=o;let I=mt.default.useCallback(k=>T.current&&A1(A.current,k.name,a)&&x1(k,m.current)&&f(Object.assign(Object.assign({},r._formState),k)),[r,a]);return Nm({disabled:n,callback:I,subject:r._subjects.state}),mt.default.useEffect(()=>()=>{T.current=!1},[]),w1(l,r._proxyFormState,m.current,!1)}i(t6,"useFormState");var Xn=i(e=>typeof e=="string","isString"),S1=i((e,t,r,n)=>{let o=Array.isArray(e);return Xn(e)?(n&&t.watch.add(e),fe(r,e)):o?e.map(a=>(n&&t.watch.add(a),fe(r,a))):(n&&(t.watchAll=!0),r)},"generateWatchOutput"),Of=i(e=>typeof e=="function","isFunction"),Dm=i(e=>{for(let t in e)if(Of(e[t]))return!0;return!1},"objectHasFunction");function r6(e){let t=Um(),{control:r=t.control,name:n,defaultValue:o,disabled:a,exact:l}=e||{},f=mt.default.useRef(n);f.current=n;let m=mt.default.useCallback(I=>{if(A1(f.current,I.name,l)){let k=S1(f.current,r._names,I.values||r._formValues);T(Mt(f.current)||Ft(k)&&!Dm(k)?Object.assign({},k):Array.isArray(k)?[...k]:Mt(k)?o:k)}},[r,l,o]);Nm({disabled:a,subject:r._subjects.watch,callback:m});let[A,T]=mt.default.useState(Mt(o)?r._getWatch(n):o);return mt.default.useEffect(()=>{r._removeUnmounted()}),A}i(r6,"useWatch");function n6(e){let t=Um(),{name:r,control:n=t.control,shouldUnregister:o}=e,a=b1(n._names.array,r),l=r6({control:n,name:r,defaultValue:fe(n._formValues,r,fe(n._defaultValues,r,e.defaultValue)),exact:!a}),f=t6({control:n,name:r}),m=mt.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:l})));return mt.default.useEffect(()=>{let A=i((T,I)=>{let k=fe(n._fields,T);k&&(k._f.mount=I)},"updateMounted");return A(r,!0),()=>{let T=n._options.shouldUnregister||o;a?T&&n._stateFlags.action:T?n.unregister(r):A(r,!1)}},[r,n,a,o]),{field:{name:r,value:l,onChange:mt.default.useCallback(A=>{m.current.onChange({target:{value:v1(A),name:r},type:Km.CHANGE})},[r]),onBlur:mt.default.useCallback(()=>{m.current.onBlur({target:{value:fe(n._formValues,r),name:r},type:Km.BLUR})},[r,n]),ref:mt.default.useCallback(A=>{let T=fe(n._fields,r);A&&T&&A.focus&&(T._f.ref={focus:i(()=>A.focus(),"focus"),setCustomValidity:i(I=>A.setCustomValidity(I),"setCustomValidity"),reportValidity:i(()=>A.reportValidity(),"reportValidity")})},[r,n])},formState:f,fieldState:{invalid:!!fe(f.errors,r),isDirty:!!fe(f.dirtyFields,r),isTouched:!!fe(f.touchedFields,r),error:fe(f.errors,r)}}}i(n6,"useController");var E1=i(e=>e.render(n6(e)),"Controller"),i6=i((e,t,r,n,o)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{},"appendErrors"),Vm=i(e=>/^\w*$/.test(e),"isKey"),M1=i(e=>Kf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),"stringToPath");function Tt(e,t,r){let n=-1,o=Vm(t)?[t]:M1(t),a=o.length,l=a-1;for(;++n<a;){let f=o[n],m=r;if(n!==l){let A=e[f];m=Ft(A)||Array.isArray(A)?A:isNaN(+o[n+1])?{}:[]}e[f]=m,e=e[f]}return e}i(Tt,"set");var Om=i((e,t,r)=>{for(let n of r||Object.keys(e)){let o=fe(e,n);if(o){let a=o._f,l=Rm(o,"_f");if(a&&t(a.name)){if(a.ref.focus&&Mt(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else Ft(l)&&Om(l,t)}}},"focusFieldBy");var a1=i((e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),"isWatched");function yc(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||Ft(e)){t=r?[]:{};for(let n in e){if(Of(e[n])){t=e;break}t[n]=yc(e[n])}}else return e;return t}i(yc,"cloneObject");function km(){let e=[];return{get observers(){return e},next:i(o=>{for(let a of e)a.next(o)},"next"),subscribe:i(o=>(e.push(o),{unsubscribe:i(()=>{e=e.filter(a=>a!==o)},"unsubscribe")}),"subscribe"),unsubscribe:i(()=>{e=[]},"unsubscribe")}}i(km,"createSubject");var kf=i(e=>mr(e)||!y1(e),"isPrimitive");function ua(e,t){if(kf(e)||kf(t))return e===t;if(ca(e)&&ca(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let a=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let l=t[o];if(ca(a)&&ca(l)||Ft(a)&&Ft(l)||Array.isArray(a)&&Array.isArray(l)?!ua(a,l):a!==l)return!1}}return!0}i(ua,"deepEqual");var c1=i(e=>({isOnSubmit:!e||e===Mn.onSubmit,isOnBlur:e===Mn.onBlur,isOnChange:e===Mn.onChange,isOnAll:e===Mn.all,isOnTouch:e===Mn.onTouched}),"getValidationModes"),vc=i(e=>typeof e=="boolean","isBoolean"),Lm=i(e=>e.type==="file","isFileInput"),Cm=i(e=>e instanceof HTMLElement,"isHTMLElement"),T1=i(e=>e.type==="select-multiple","isMultipleSelect"),Fm=i(e=>e.type==="radio","isRadioInput"),o6=i(e=>Fm(e)||bc(e),"isRadioOrCheckbox"),u1=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",Pm=i(e=>Cm(e)&&e.isConnected,"live");function s6(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Mt(e)?n++:e[t[n++]];return e}i(s6,"baseGet");function rr(e,t){let r=Vm(t)?[t]:M1(t),n=r.length==1?e:s6(e,r),o=r[r.length-1],a;n&&delete n[o];for(let l=0;l<r.slice(0,-1).length;l++){let f=-1,m,A=r.slice(0,-(l+1)),T=A.length-1;for(l>0&&(a=e);++f<A.length;){let I=A[f];m=m?m[I]:e[I],T===f&&(Ft(m)&&Ir(m)||Array.isArray(m)&&!m.filter(k=>Ft(k)&&!Ir(k)||vc(k)).length)&&(a?delete a[I]:delete e[I]),a=m}}return e}i(rr,"unset");function Pf(e,t={}){let r=Array.isArray(e);if(Ft(e)||r)for(let n in e)Array.isArray(e[n])||Ft(e[n])&&!Dm(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Pf(e[n],t[n])):mr(e[n])||(t[n]=!0);return t}i(Pf,"markFieldsDirty");function I1(e,t,r){let n=Array.isArray(e);if(Ft(e)||n)for(let o in e)Array.isArray(e[o])||Ft(e[o])&&!Dm(e[o])?Mt(t)||kf(r[o])?r[o]=Array.isArray(e[o])?Pf(e[o],[]):Object.assign({},Pf(e[o])):I1(e[o],mr(t)?{}:t[o],r[o]):r[o]=!ua(e[o],t[o]);return r}i(I1,"getDirtyFieldsFromDefaultValues");var l1=i((e,t)=>I1(e,t,Pf(t)),"getDirtyFields"),f1={value:!1,isValid:!1},d1={value:!0,isValid:!0},_1=i(e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Mt(e[0].attributes.value)?Mt(e[0].value)||e[0].value===""?d1:{value:e[0].value,isValid:!0}:d1:f1}return f1},"getCheckboxValue"),k1=i((e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Mt(e)?e:t?e===""?NaN:+e:r&&Xn(e)?new Date(e):n?n(e):e,"getFieldValueAs"),h1={isValid:!1,value:null},P1=i(e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,h1):h1,"getRadioValue");function Bm(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Lm(t)?t.files:Fm(t)?P1(e.refs).value:T1(t)?[...t.selectedOptions].map(({value:r})=>r):bc(t)?_1(e.refs).value:k1(Mt(t.value)?e.ref.value:t.value,e)}i(Bm,"getFieldValue");var a6=i((e,t,r,n)=>{let o={};for(let a of e){let l=fe(t,a);l&&Tt(o,a,l._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},"getResolverOptions"),Bf=i(e=>e instanceof RegExp,"isRegex"),gc=i(e=>Mt(e)?void 0:Bf(e)?e.source:Ft(e)?Bf(e.value)?e.value.source:e.value:e,"getRuleValue"),c6=i(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),"hasValidation");function p1(e,t,r){let n=fe(e,r);if(n||Vm(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let a=o.join("."),l=fe(t,a),f=fe(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(f&&f.type)return{name:a,error:f};o.pop()}return{name:r}}i(p1,"schemaErrorLookup");var u6=i((e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,"skipValidation"),l6=i((e,t)=>!Kf(fe(e,t)).length&&rr(e,t),"unsetEmptyArray"),_f=i(e=>Xn(e)||mt.default.isValidElement(e),"isMessage");function m1(e,t,r="validate"){if(_f(e)||Array.isArray(e)&&e.every(_f)||vc(e)&&!e)return{type:r,message:_f(e)?e:"",ref:t}}i(m1,"getValidateError");var aa=i(e=>Ft(e)&&!Bf(e)?e:{value:e,message:""},"getValueAndMessage"),g1=i(async(e,t,r,n)=>{let{ref:o,refs:a,required:l,maxLength:f,minLength:m,min:A,max:T,pattern:I,validate:k,name:O,valueAsNumber:C,mount:R,disabled:V}=e._f;if(!R||V)return{};let H=a?a[0]:o,X=i(x=>{n&&H.reportValidity&&(H.setCustomValidity(vc(x)?"":x||" "),H.reportValidity())},"setCustomValidity"),z={},ce=Fm(o),se=bc(o),ne=ce||se,ae=(C||Lm(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,Z=i6.bind(null,O,r,z),me=i((x,s,u,g=Oi.maxLength,y=Oi.minLength)=>{let v=x?s:u;z[O]=Object.assign({type:x?g:y,message:v,ref:o},Z(x?g:y,v))},"getMinMaxMessage");if(l&&(!ne&&(ae||mr(t))||vc(t)&&!t||se&&!_1(a).isValid||ce&&!P1(a).isValid)){let{value:x,message:s}=_f(l)?{value:!!l,message:l}:aa(l);if(x&&(z[O]=Object.assign({type:Oi.required,message:s,ref:H},Z(Oi.required,s)),!r))return X(s),z}if(!ae&&(!mr(A)||!mr(T))){let x,s,u=aa(T),g=aa(A);if(isNaN(t)){let y=o.valueAsDate||new Date(t);Xn(u.value)&&(x=y>new Date(u.value)),Xn(g.value)&&(s=y<new Date(g.value))}else{let y=o.valueAsNumber||parseFloat(t);mr(u.value)||(x=y>u.value),mr(g.value)||(s=y<g.value)}if((x||s)&&(me(!!x,u.message,g.message,Oi.max,Oi.min),!r))return X(z[O].message),z}if((f||m)&&!ae&&Xn(t)){let x=aa(f),s=aa(m),u=!mr(x.value)&&t.length>x.value,g=!mr(s.value)&&t.length<s.value;if((u||g)&&(me(u,x.message,s.message),!r))return X(z[O].message),z}if(I&&!ae&&Xn(t)){let{value:x,message:s}=aa(I);if(Bf(x)&&!t.match(x)&&(z[O]=Object.assign({type:Oi.pattern,message:s,ref:o},Z(Oi.pattern,s)),!r))return X(s),z}if(k){if(Of(k)){let x=await k(t),s=m1(x,H);if(s&&(z[O]=Object.assign(Object.assign({},s),Z(Oi.validate,s.message)),!r))return X(s.message),z}else if(Ft(k)){let x={};for(let s in k){if(!Ir(x)&&!r)break;let u=m1(await k[s](t),H,s);u&&(x=Object.assign(Object.assign({},u),Z(s,u.message)),X(u.message),r&&(z[O]=x))}if(!Ir(x)&&(z[O]=Object.assign({ref:H},x),!r))return z}}return X(!0),z},"validateField"),f6={mode:Mn.onSubmit,reValidateMode:Mn.onChange,shouldFocusError:!0};function d6(e={}){let t=Object.assign(Object.assign({},f6),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},o=t.defaultValues||{},a=t.shouldUnregister?{}:yc(o),l={action:!1,mount:!1,watch:!1},f={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,A=0,T={},I={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={watch:km(),array:km(),state:km()},O=c1(t.mode),C=c1(t.reValidateMode),R=t.criteriaMode===Mn.all,V=i((K,N)=>(...U)=>{clearTimeout(A),A=self.setTimeout(()=>K(...U),N)},"debounce"),H=i(async K=>{let N=!1;return I.isValid&&(N=t.resolver?Ir((await ae()).errors):await me(n,!0),!K&&N!==r.isValid&&(r.isValid=N,k.state.next({isValid:N}))),N},"_updateValid"),X=i((K,N,U,G=[],te=!0,q=!0)=>{if(l.action=!0,q&&Array.isArray(fe(n,K))){let J=N(fe(n,K),U.argA,U.argB);te&&Tt(n,K,J)}if(I.errors&&q&&Array.isArray(fe(r.errors,K))){let J=N(fe(r.errors,K),U.argA,U.argB);te&&Tt(r.errors,K,J),l6(r.errors,K)}if(I.touchedFields&&Array.isArray(fe(r.touchedFields,K))){let J=N(fe(r.touchedFields,K),U.argA,U.argB);te&&Tt(r.touchedFields,K,J)}I.dirtyFields&&(r.dirtyFields=l1(o,a)),k.state.next({isDirty:s(K,G),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},"_updateFieldArray"),z=i((K,N)=>(Tt(r.errors,K,N),k.state.next({errors:r.errors})),"updateErrors"),ce=i((K,N,U,G)=>{let te=fe(n,K);if(te){let q=fe(a,K,Mt(U)?fe(o,K):U);Mt(q)||G&&G.defaultChecked||N?Tt(a,K,N?q:Bm(te._f)):y(K,q),l.mount&&H()}},"updateValidAndValue"),se=i((K,N,U,G,te)=>{let q=!1,J={name:K},et=fe(r.touchedFields,K);if(I.isDirty){let ge=r.isDirty;r.isDirty=J.isDirty=s(),q=ge!==J.isDirty}if(I.dirtyFields&&(!U||G)){let ge=fe(r.dirtyFields,K);ua(fe(o,K),N)?rr(r.dirtyFields,K):Tt(r.dirtyFields,K,!0),J.dirtyFields=r.dirtyFields,q=q||ge!==fe(r.dirtyFields,K)}return U&&!et&&(Tt(r.touchedFields,K,U),J.touchedFields=r.touchedFields,q=q||I.touchedFields&&et!==U),q&&te&&k.state.next(J),q?J:{}},"updateTouchAndDirty"),ne=i(async(K,N,U,G,te)=>{let q=fe(r.errors,N),J=I.isValid&&r.isValid!==U;if(e.delayError&&G?(m=m||V(z,e.delayError),m(N,G)):(clearTimeout(A),G?Tt(r.errors,N,G):rr(r.errors,N)),((G?!ua(q,G):q)||!Ir(te)||J)&&!K){let et=Object.assign(Object.assign(Object.assign({},te),J?{isValid:U}:{}),{errors:r.errors,name:N});r=Object.assign(Object.assign({},r),et),k.state.next(et)}T[N]--,I.isValidating&&!T[N]&&(k.state.next({isValidating:!1}),T={})},"shouldRenderByError"),ae=i(async K=>t.resolver?await t.resolver(Object.assign({},a),t.context,a6(K||f.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},"_executeSchema"),Z=i(async K=>{let{errors:N}=await ae();if(K)for(let U of K){let G=fe(N,U);G?Tt(r.errors,U,G):rr(r.errors,U)}else r.errors=N;return N},"executeSchemaAndUpdateState"),me=i(async(K,N,U={valid:!0})=>{for(let G in K){let te=K[G];if(te){let q=te._f,J=Rm(te,"_f");if(q){let et=await g1(te,fe(a,q.name),R,t.shouldUseNativeValidation);if(et[q.name]&&(U.valid=!1,N))break;N||(et[q.name]?Tt(r.errors,q.name,et[q.name]):rr(r.errors,q.name))}J&&await me(J,N,U)}}return U.valid},"executeBuildInValidation"),x=i(()=>{for(let K of f.unMount){let N=fe(n,K);N&&(N._f.refs?N._f.refs.every(U=>!Pm(U)):!Pm(N._f.ref))&&W(K)}f.unMount=new Set},"_removeUnmounted"),s=i((K,N)=>(K&&N&&Tt(a,K,N),!ua(c(),o)),"_getDirty"),u=i((K,N,U)=>{let G=Object.assign({},l.mount?a:Mt(N)?o:Xn(K)?{[K]:N}:N);return S1(K,f,G,U)},"_getWatch"),g=i(K=>Kf(fe(l.mount?a:o,K,e.shouldUnregister?fe(o,K,[]):[])),"_getFieldArray"),y=i((K,N,U={})=>{let G=fe(n,K),te=N;if(G){let q=G._f;q&&(!q.disabled&&Tt(a,K,k1(N,q)),te=u1&&Cm(q.ref)&&mr(N)?"":N,T1(q.ref)?[...q.ref.options].forEach(J=>J.selected=te.includes(J.value)):q.refs?bc(q.ref)?q.refs.length>1?q.refs.forEach(J=>J.checked=Array.isArray(te)?!!te.find(et=>et===J.value):te===J.value):q.refs[0]&&(q.refs[0].checked=!!te):q.refs.forEach(J=>J.checked=J.value===te):Lm(q.ref)||(q.ref.value=te,q.ref.type||k.watch.next({name:K})))}(U.shouldDirty||U.shouldTouch)&&se(K,te,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&b(K)},"setFieldValue"),v=i((K,N,U)=>{for(let G in N){let te=N[G],q=`${K}.${G}`,J=fe(n,q);(f.array.has(K)||!kf(te)||J&&!J._f)&&!ca(te)?v(q,te,U):y(q,te,U)}},"setValues"),S=i((K,N,U={})=>{let G=fe(n,K),te=f.array.has(K);Tt(a,K,N),te?(k.array.next({name:K,values:a}),(I.isDirty||I.dirtyFields)&&U.shouldDirty&&(r.dirtyFields=l1(o,a),k.state.next({name:K,dirtyFields:r.dirtyFields,isDirty:s(K,N)}))):G&&!G._f&&!mr(N)?v(K,N,U):y(K,N,U),a1(K,f)&&k.state.next({}),k.watch.next({name:K})},"setValue"),E=i(async K=>{let N=K.target,U=N.name,G=fe(n,U);if(G){let te,q,J=N.type?Bm(G._f):v1(K),et=K.type===Km.BLUR,ge=!c6(G._f)&&!t.resolver&&!fe(r.errors,U)&&!G._f.deps||u6(et,fe(r.touchedFields,U),r.isSubmitted,C,O),we=a1(U,f,et);Tt(a,U,J),et?G._f.onBlur&&G._f.onBlur(K):G._f.onChange&&G._f.onChange(K);let _r=se(U,J,et,!1),Te=!Ir(_r)||we;if(!et&&k.watch.next({name:U,type:K.type}),ge)return Te&&k.state.next(Object.assign({name:U},we?{}:_r));if(!et&&we&&k.state.next({}),T[U]=(T[U],1),I.isValidating&&k.state.next({isValidating:!0}),t.resolver){let{errors:Se}=await ae([U]),Tn=p1(r.errors,n,U),Ee=p1(Se,n,Tn.name||U);te=Ee.error,U=Ee.name,q=Ir(Se)}else te=(await g1(G,fe(a,U),R,t.shouldUseNativeValidation))[U],q=await H(!0);G._f.deps&&b(G._f.deps),ne(!1,U,q,te,_r)}},"onChange"),b=i(async(K,N={})=>{let U,G,te=If(K);if(k.state.next({isValidating:!0}),t.resolver){let q=await Z(Mt(K)?K:te);U=Ir(q),G=K?!te.some(J=>fe(q,J)):U}else K?(G=(await Promise.all(te.map(async q=>{let J=fe(n,q);return await me(J&&J._f?{[q]:J}:J)}))).every(Boolean),!(!G&&!r.isValid)&&H()):G=U=await me(n);return k.state.next(Object.assign(Object.assign(Object.assign({},!Xn(K)||I.isValid&&U!==r.isValid?{}:{name:K}),t.resolver?{isValid:U}:{}),{errors:r.errors,isValidating:!1})),N.shouldFocus&&!G&&Om(n,q=>fe(r.errors,q),K?te:f.mount),G},"trigger"),c=i(K=>{let N=Object.assign(Object.assign({},o),l.mount?a:{});return Mt(K)?N:Xn(K)?fe(N,K):K.map(U=>fe(N,U))},"getValues"),w=i(K=>{K?If(K).forEach(N=>rr(r.errors,N)):r.errors={},k.state.next({errors:r.errors})},"clearErrors"),D=i((K,N,U)=>{let G=(fe(n,K,{_f:{}})._f||{}).ref;Tt(r.errors,K,Object.assign(Object.assign({},N),{ref:G})),k.state.next({name:K,errors:r.errors,isValid:!1}),U&&U.shouldFocus&&G&&G.focus&&G.focus()},"setError"),L=i((K,N)=>Of(K)?k.watch.subscribe({next:i(U=>K(u(void 0,N),U),"next")}):u(K,N,!0),"watch"),W=i((K,N={})=>{for(let U of K?If(K):f.mount)f.mount.delete(U),f.array.delete(U),fe(n,U)&&(N.keepValue||(rr(n,U),rr(a,U)),!N.keepError&&rr(r.errors,U),!N.keepDirty&&rr(r.dirtyFields,U),!N.keepTouched&&rr(r.touchedFields,U),!t.shouldUnregister&&!N.keepDefaultValue&&rr(o,U));k.watch.next({}),k.state.next(Object.assign(Object.assign({},r),N.keepDirty?{isDirty:s()}:{})),!N.keepIsValid&&H()},"unregister"),Y=i((K,N={})=>{let U=fe(n,K),G=vc(N.disabled);return Tt(n,K,{_f:Object.assign(Object.assign(Object.assign({},U&&U._f?U._f:{ref:{name:K}}),{name:K,mount:!0}),N)}),f.mount.add(K),U?G&&Tt(a,K,N.disabled?void 0:fe(a,K,Bm(U._f))):ce(K,!0,N.value),Object.assign(Object.assign(Object.assign({},G?{disabled:N.disabled}:{}),t.shouldUseNativeValidation?{required:!!N.required,min:gc(N.min),max:gc(N.max),minLength:gc(N.minLength),maxLength:gc(N.maxLength),pattern:gc(N.pattern)}:{}),{name:K,onChange:E,onBlur:E,ref:i(te=>{if(te){Y(K,N),U=fe(n,K);let q=Mt(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,J=o6(q),et=U._f.refs||[];if(J?et.find(ge=>ge===q):q===U._f.ref)return;Tt(n,K,{_f:Object.assign(Object.assign({},U._f),J?{refs:et.concat(q).filter(Pm),ref:{type:q.type,name:K}}:{ref:q})}),ce(K,!1,void 0,q)}else U=fe(n,K,{}),U._f&&(U._f.mount=!1),(t.shouldUnregister||N.shouldUnregister)&&!(b1(f.array,K)&&l.action)&&f.unMount.add(K)},"ref")})},"register");return{control:{register:Y,unregister:W,_executeSchema:ae,_getWatch:u,_getDirty:s,_updateValid:H,_removeUnmounted:x,_updateFieldArray:X,_getFieldArray:g,_subjects:k,_proxyFormState:I,get _fields(){return n},set _fields(K){n=K},get _formValues(){return a},set _formValues(K){a=K},get _stateFlags(){return l},set _stateFlags(K){l=K},get _defaultValues(){return o},set _defaultValues(K){o=K},get _names(){return f},set _names(K){f=K},get _formState(){return r},set _formState(K){r=K},get _options(){return t},set _options(K){t=Object.assign(Object.assign({},t),K)}},trigger:b,register:Y,handleSubmit:i((K,N)=>async U=>{U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let G=!0,te=t.shouldUnregister?yc(a):Object.assign({},a);k.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:q,values:J}=await ae();r.errors=q,te=J}else await me(n);Ir(r.errors)&&Object.keys(r.errors).every(q=>fe(te,q))?(k.state.next({errors:{},isSubmitting:!0}),await K(te,U)):(N&&await N(r.errors,U),t.shouldFocusError&&Om(n,q=>fe(r.errors,q),f.mount))}catch(q){throw G=!1,q}finally{r.isSubmitted=!0,k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ir(r.errors)&&G,submitCount:r.submitCount+1,errors:r.errors})}},"handleSubmit"),watch:L,setValue:S,getValues:c,reset:i((K,N={})=>{let U=K||o,G=yc(U),te=K&&!Ir(K)?G:o;if(N.keepDefaultValues||(o=U),!N.keepValues){if(u1&&Mt(K))for(let q of f.mount){let J=fe(n,q);if(J&&J._f){let et=Array.isArray(J._f.refs)?J._f.refs[0]:J._f.ref;try{Cm(et)&&et.closest("form").reset();break}catch{}}}a=e.shouldUnregister?N.keepDefaultValues?yc(o):{}:G,n={},k.array.next({values:te}),k.watch.next({values:te})}f={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!I.isValid||!!N.keepIsValid,l.watch=!!e.shouldUnregister,k.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:N.keepDirty?r.isDirty:N.keepDefaultValues?!ua(K,o):!1,isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:N.keepDirty?r.dirtyFields:N.keepDefaultValues&&K?Object.entries(K).reduce((q,[J,et])=>Object.assign(Object.assign({},q),{[J]:et!==fe(o,J)}),{}):{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},"reset"),resetField:i((K,N={})=>{fe(n,K)&&(Mt(N.defaultValue)?S(K,fe(o,K)):(S(K,N.defaultValue),Tt(o,K,N.defaultValue)),N.keepTouched||rr(r.touchedFields,K),N.keepDirty||(rr(r.dirtyFields,K),r.isDirty=N.defaultValue?s(K,fe(o,K)):s()),N.keepError||(rr(r.errors,K),I.isValid&&H()),k.state.next(Object.assign({},r)))},"resetField"),clearErrors:w,unregister:W,setError:D,setFocus:i(K=>{let N=fe(n,K)._f;(N.ref.focus?N.ref:N.refs[0]).focus()},"setFocus")}}i(d6,"createFormControl");function Cf(e={}){let t=mt.default.useRef(),[r,n]=mt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},d6(e)),{formState:r});let o=t.current.control,a=mt.default.useCallback(l=>{x1(l,o._proxyFormState,!0)&&(o._formState=Object.assign(Object.assign({},o._formState),l),n(Object.assign({},o._formState)))},[o]);return Nm({subject:o._subjects.state,callback:a}),mt.default.useEffect(()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()}),t.current.formState=w1(r,o._proxyFormState),t.current}i(Cf,"useForm");var h6=i(({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:o,fetchDomainOwner:a})=>{let l=Tr(),{t:f}=Vi(),m=Gt(),A=n?.networkID||cn.Solana.Mainnet,{formState:{errors:T},control:I,clearErrors:k,getValues:O,setValue:C,register:R,handleSubmit:V,watch:H,trigger:X}=Cf({mode:"all"}),{networkID:z,name:ce,address:se,resolvedAddress:ne}=H(),ae={required:!0},Z=(0,Rf.useMemo)(()=>({required:{value:!0,message:f("addAccountImportAccountPublicKeyRequired")},validate:(0,B1.default)(async s=>{if(s==="")return!0;if(!xg(s,z||A))try{let v=(await a(s,z,l,m))?.owner;return v?(C("resolvedAddress",v),e.find(E=>E.addresses.map(b=>b.address).includes(v))?f("addAccountImportAccountDuplicateAddress"):!0):f("addAccountImportAccountIncorrectFormat")}catch{return f("sendFormErrorInvalidDomain")}return C("resolvedAddress",s),e.find(y=>y.addresses.map(v=>v.address).includes(s))?f("addAccountImportAccountDuplicateAddress"):!0},500)}),[f,z,A,C,e,a,l,m]),me=ce&&ne&&!T.name&&!T.address,x=(0,Rf.useCallback)(async({networkID:s,name:u,resolvedAddress:g},y)=>{let v=ss(s,g);t.includes(v)||await r({addressTypes:[v]});let S={};S[v]=g,o({name:u,addresses:S,icon:n?.icon}),y(),m.capture("addReadOnlyAccount",{data:{networkID:s,chainType:v,walletAddress:g}})},[o,n?.icon,r,t,m]);return{Controller:E1,canSubmit:me,control:I,errors:T,nameValidations:ae,address:se,addressValidations:Z,clearErrors:k,getValues:O,handleSubmit:V,onSubmit:x,register:R,setValue:C,trigger:X}},"useAddReadOnlyAccountForm");h();p();function p6(e){let t=HA();return e.map(r=>Li.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??pe.getNetworkName(r.networkID))}i(p6,"useAddressTooltipNetworkName");h();p();var K1=ue(At());var m6=i(()=>{let{data:e}=Mr(),t=(0,K1.useMemo)(()=>{if(!e||!e.addresses.length)return pe.getChainID(sg.Mainnet);let r=e.addresses[0];return pe.getChainID(r.networkID)},[e]);return{caip19:wg(Ag(t)),tokenName:pe.getChainName(t),tokenSymbol:pe.getTokenSymbol(t)}},"useDefaultNativeTokenForSelectedAccount");h();p();var g6=i(()=>pa(),"useDefaultNetworkSettings");h();p();var y6=i(()=>{let{data:e}=Mr();return e?e.type===P.Ledger:void 0},"useIsSelectedLedgerAccount");h();p();var v6=i(()=>{let{data:e}=_m();return!!e?.isDeveloperMode},"useIsTestnetMode"),b6=i(()=>mc().some(t=>pe.isLocalNetworkID(t)),"useIsLocalnetMode");h();p();var C1=ue(At());h();p();var w6=Xe(function*({user:e}){let t=ar(),r=yield mo();if(!t||!r||!e)return null;let{enabledNetworkIDs:n}=t,o=n?.reduce(It((T,I)=>{let k=r.find(It(O=>O.addresses.some(It(C=>C.networkID===I,0,[I])),0,[I]))?.addresses.find(It(O=>O.networkID===I,1,[I]))?.address;return k&&(T[I]=k),T},0,[r]),{})??{},a=e?.addresses,l=a?Object.keys(a).filter(pe.isNetworkID):[],f=(n??[]).filter(It(T=>!l.includes(T),1,[l])).reduce(It((T,I)=>{let k=o[I];return k&&(T[I]=k),T},2,[o]),{});return Object.keys(f).length>0?{addresses:{...f,...a},addedAddresses:f}:null}),O1=i(()=>{let{data:e}=Tm(),t=St(w6,{user:e});return jt(t)},"usePatchProfileAddresses");var x6=i(()=>{let{data:e}=O1(),{mutate:t}=Im(),r=Gt();(0,C1.useEffect)(()=>{if(e){let{addresses:n,addedAddresses:o}=e,a=Object.keys(o);r.capture("autoSyncUsernameAddresses",{data:{addedChains:a}}),t({addresses:n})}},[e,t,r])},"usePatchAddressesIfNeeded");h();p();var R1=ue(At());var A6=i(e=>{let t=(0,R1.useCallback)(r=>r.addresses.find(n=>e===pe.getChainID(n.networkID))?.networkID,[e]);return Mr({select:t})},"useSelectedNetwork");h();p();var U1=ue(At());var S6=i(({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:o})=>{(0,U1.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let a=Date.now();o({identifier:t,balance:{timestamp:a,value:n}})}},[e,t,r,n,o])},"useSetAccountBalanceEffect");h();p();var N1=ue(At());var E6=i(()=>{let{data:e=[]}=Mf("local-only"),{data:t=[]}=Mf("recoverable-only");return(0,N1.useMemo)(()=>e.length+t.length>1,[e.length,t.length])},"useShowRemoveSecretPhrase");h();p();h();p();h();p();var nr=ue(At());function M6(e){let t,r=new Set,n=i((A,T)=>{let I=typeof A=="function"?A(t):A;if(I!==t){let k=t;t=T?I:Object.assign({},t,I),r.forEach(O=>O(t,k))}},"setState"),o=i(()=>t,"getState"),a=i((A,T=o,I=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let k=T(t);function O(){let C=T(t);if(!I(k,C)){let R=k;A(k=C,R)}}return i(O,"listenerToAdd"),r.add(O),()=>r.delete(O)},"subscribeWithSelector"),m={setState:n,getState:o,subscribe:i((A,T,I)=>T||I?a(A,T,I):(r.add(A),()=>r.delete(A)),"subscribe"),destroy:i(()=>r.clear(),"destroy")};return t=e(n,o,m),m}i(M6,"createStore");var T6=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),D1=T6?nr.useEffect:nr.useLayoutEffect;function Uf(e){let t=typeof e=="function"?M6(e):e,r=i((n=t.getState,o=Object.is)=>{let[,a]=(0,nr.useReducer)(V=>V+1,0),l=t.getState(),f=(0,nr.useRef)(l),m=(0,nr.useRef)(n),A=(0,nr.useRef)(o),T=(0,nr.useRef)(!1),I=(0,nr.useRef)();I.current===void 0&&(I.current=n(l));let k,O=!1;(f.current!==l||m.current!==n||A.current!==o||T.current)&&(k=n(l),O=!o(I.current,k)),D1(()=>{O&&(I.current=k),f.current=l,m.current=n,A.current=o,T.current=!1});let C=(0,nr.useRef)(l);D1(()=>{let V=i(()=>{try{let X=t.getState(),z=m.current(X);A.current(I.current,z)||(f.current=X,I.current=z,a())}catch{T.current=!0,a()}},"listener"),H=t.subscribe(V);return t.getState()!==C.current&&V(),H},[]);let R=O?k:I.current;return(0,nr.useDebugValue)(R),R},"useStore");return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let o=n.length<=0;return{value:n.shift(),done:o}}}},r}i(Uf,"create");var I6={editableAccountMetadata:void 0,setEditableAccountMetadata:i(()=>{},"setEditableAccountMetadata")},Nf=Uf(e=>({...I6,setEditableAccountMetadata:i(t=>{e({editableAccountMetadata:t})},"setEditableAccountMetadata")}));h();p();var V1={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},L1=Uf((e,t)=>({...V1,setUsername:i(r=>e({username:r}),"setUsername"),setUsernameAvailabilityError:i(r=>e({usernameAvailabilityError:r}),"setUsernameAvailabilityError"),setAvailable:i(r=>e({available:r}),"setAvailable"),setIcon:i(r=>e({icon:r}),"setIcon"),addSecretIdentifier:i(r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},"addSecretIdentifier"),removeSecretIdentifier:i(r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},"removeSecretIdentifier"),addAccountIdentifierToSync:i(r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},"addAccountIdentifierToSync"),removeAccountIdentifierToSync:i(r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},"removeAccountIdentifierToSync"),clearAccountIdentifiersToSync:i(()=>e({accountIdentifiersToSync:[]}),"clearAccountIdentifiersToSync"),setAccountIdentifiersToSync:i(r=>e({accountIdentifiersToSync:r}),"setAccountIdentifiersToSync"),addAddress:i((r,n)=>{let o={...t().addresses};o[r]=n,e({addresses:o})},"addAddress"),removeAddress:i((r,n)=>{let o={...t().addresses};o[r]===n&&delete o[r],e({addresses:o})},"removeAddress"),clearAddresses:i(()=>{e({addresses:{}})},"clearAddresses"),reset:i(()=>{e(V1)},"reset")}));h();p();var F1=ue(la()),ei=ue(At());var _6=i(({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:o}=Vi(),{formState:{errors:a},control:l,clearErrors:f,getValues:m,setValue:A,register:T,handleSubmit:I,watch:k,trigger:O}=Cf({mode:"all",defaultValues:{addressType:r?.addressType||_.Solana,networkID:r?.networkID||cn.Solana.Mainnet}}),[C,R]=(0,ei.useState)(null),V=Nf(u=>u.setEditableAccountMetadata),{name:H}=k(),X=r?.secrets,z=m("networkID"),ce=m("addressType"),se=m("privateKey"),ne=(0,ei.useMemo)(()=>new pg,[]),ae={required:!0},Z=(0,ei.useMemo)(()=>({required:{value:!0,message:o("addAccountImportAccountPrivateKeyRequired")},onChange:i(u=>{u.target.value||R(null)},"onChange"),validate:i(u=>{try{let g=m("networkID"),y=m("addressType");if(/\s/.test(u)||!y)return o("addAccountImportAccountIncorrectFormat");let v=pe.getNetworkDefinition(g).value,S=Ic({privateKey:u,addressType:y,networkIDValue:v});V({...r,secrets:S});let E=ne.generateKeypairFromPrivateKey(S,y);return t.find(c=>!c.isReadOnly&&(c.addresses.map(w=>w.address).includes(Ct({publicKey:E.publicKey,addressType:y,networkID:g}))||c.addresses.filter(w=>"publicKey"in w).map(w=>w.publicKey).find(w=>w?Buffer.from(w).equals(Buffer.from(E.publicKey)):!1)))?o("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return o("addAccountImportAccountIncorrectFormat")}},"validate")}),[o,ne,t,r,V,m]);(0,ei.useEffect)(()=>{if(a.privateKey){R(null);return}if(se||X)try{let u=pe.getNetworkDefinition(z).value,g=X||Ic({privateKey:se,addressType:ce,networkIDValue:u}),y=ne.generateKeypairFromPrivateKey(g,ce);if(!se){let v="";switch(ce){case _.Solana:{v=F1.default.encode(y.privateKey);break}case _.EVM:{v="0x"+Buffer.from(y.privateKey).toString("hex");break}case _.Sui:{v=gg(y.privateKey);break}}A("privateKey",v)}R(Ct({publicKey:y.publicKey,addressType:ce,networkID:z}))}catch{R(null)}},[a.privateKey,ce,ne,se,X,A,z]);let me=(0,ei.useMemo)(()=>!!(H&&se&&!a.name&&!a.privateKey),[a.name,a.privateKey,H,se]),x=(0,ei.useCallback)(async({networkID:u,name:g,privateKey:y,addressType:v})=>{let S=pe.getNetworkDefinition(u).value,E=Ic({privateKey:y,addressType:v,networkIDValue:S});await e({chainType:v,name:g,icon:r?.icon,privateKey:E}),n.capture("addPrivateKeyAccount",{data:{networkID:u,chainType:v,walletAddress:C}})},[e,r?.icon,n,C]);return{formOnSubmitHandler:I(u=>x(u)),canSubmit:me,control:l,getValues:m,register:T,setValue:A,trigger:O,errors:a,clearErrors:f,nameValidations:ae,privateKey:se,privateKeyValidations:Z,addressPreview:C}},"useImportPrivateKeyForm");h();p();h();p();var Ci="@phantom/accounts",ige=`${Ci}:account-identifier`,oge=`${Ci}:selected-account`,sge=`${Ci}:all-accounts`,age=`${Ci}:all-seeds`,cge=`${Ci}:all-secrets`,uge=`${Ci}:account-balance`,j1={trustedApps(){return[`${Ci}:trusted-apps`]},patchProfileAddresses(e){return[`${Ci}:patch-profile-addresses`,e]},canUseCash(){return[`${Ci}:can-use-cash`]}};var k6=i(e=>{let t=yt(),r=j1.canUseCash(),n=i(async()=>{if(!t?.canDeriveKMSAuthenticator)return!1;try{return await t.canDeriveKMSAuthenticator()}catch{return!1}},"queryFn"),{data:o,isPending:a}=Yt({queryKey:r,queryFn:n,...e});return{canUseCash:o??!1,isLoading:a}},"useCanAccountUseCash");h();p();var P6=Xe(function*(){let e=ar(),{enabledAddressTypes:t,enabledChainIDs:r,enabledMainnetOnlyNetworkIDs:n}=e,[o,a]=yield Pc.all([jr(be.DeveloperMode),sa()]),l=yield Jn(),f=yield go(l),m=yield VA(f.identifier),A={name:m.name,icon:m.icon,identifier:f.identifier,addresses:uu(f,n,t,r,a,o?.isDeveloperMode??!1)};return f.type===P.Seed?{...A,type:P.Seed,seedIdentifier:f.seedIdentifier,isReadOnly:!1}:f.type===P.Seedless?{...A,type:P.Seedless,seedIdentifier:f.seedIdentifier,isReadOnly:!1}:f.type===P.ReadOnly?{...A,type:P.ReadOnly,isReadOnly:!0}:f.type===P.PrivateKey?{...A,privateKeyIdentifier:f.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...A,type:f.type,isReadOnly:!1}});export{us as a,Dg as b,sS as c,aS as d,cS as e,Qt as f,lS as g,fS as h,dS as i,yt as j,Nc as k,Li as l,pS as m,xd as n,P as o,mS as p,X2 as q,Ed as r,eE as s,tE as t,rE as u,Md as v,_d as w,Uy as x,nE as y,dn as z,wa as A,oE as B,xS as C,AS as D,sE as E,aE as F,cE as G,Or as H,xE as I,zy as J,Kh as K,Oa as L,_M as M,kM as N,cr as O,_s as P,Cn as Q,Hv as R,pp as S,Gp as T,Hf as U,mi as V,Kr as W,Ea as X,M2 as Y,gd as Z,_o as _,vi as $,_2 as aa,N2 as ba,D2 as ca,SS as da,Pr as ea,So as fa,V2 as ga,L2 as ha,Ia as ia,F2 as ja,j2 as ka,z2 as la,q2 as ma,Xp as na,oe as oa,xt as pa,ye as qa,ix as ra,t0 as sa,sx as ta,lx as ua,hx as va,px as wa,bx as xa,wx as ya,Sx as za,yA as Aa,sf as Ba,vA as Ca,fk as Da,dk as Ea,hk as Fa,pk as Ga,mk as Ha,bk as Ia,Nie as Ja,be as Ka,Kk as La,fo as Ma,jr as Na,KA as Oa,jA as Pa,Fk as Qa,jk as Ra,zk as Sa,yd as Ta,vd as Ua,fc as Va,dm as Wa,Gk as Xa,hm as Ya,Zk as Za,Jk as _a,HA as $a,oa as ab,Wae as bb,Hae as cb,$ae as db,Gae as eb,Zae as fb,Jae as gb,k3 as hb,P3 as ib,mo as jb,mm as kb,gm as lb,K3 as mb,ym as nb,O3 as ob,C3 as pb,Mf as qb,r3 as rb,_m as sb,U3 as tb,$A as ub,Mr as vb,N3 as wb,D3 as xb,V3 as yb,L3 as zb,F3 as Ab,z3 as Bb,q3 as Cb,W3 as Db,H3 as Eb,$3 as Fb,G3 as Gb,mc as Hb,Z3 as Ib,Q3 as Jb,yo as Kb,XA as Lb,u3 as Mb,l3 as Nb,d3 as Ob,tr as Pb,w3 as Qb,i3 as Rb,Tr as Sb,Em as Tb,es as Ub,x3 as Vb,A3 as Wb,pc as Xb,Mm as Yb,Tm as Zb,M3 as _b,Im as $b,T3 as ac,n6 as bc,E1 as cc,Cf as dc,h6 as ec,p6 as fc,m6 as gc,g6 as hc,y6 as ic,v6 as jc,b6 as kc,x6 as lc,I3 as mc,A6 as nc,S6 as oc,E6 as pc,Uf as qc,Nf as rc,L1 as sc,_6 as tc,k6 as uc,P6 as vc};
/*! Bundled license information:

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-W7IWPUIQ.js.map
