import{a as J}from"./chunk-7EKZ4PSV.js";import{a as D}from"./chunk-5ENLJTSW.js";import"./chunk-ZMW27YAP.js";import{e as Y,f as q,g as G}from"./chunk-QW5UCU4W.js";import"./chunk-X6Z5FRDC.js";import"./chunk-VQU4JTIB.js";import"./chunk-ZMU6KWZP.js";import"./chunk-UE7TCZBL.js";import"./chunk-L4NFABLQ.js";import"./chunk-P3JRRYSB.js";import"./chunk-N3C6FBKY.js";import{b as y}from"./chunk-2P4HZW3J.js";import"./chunk-HLSJ3VIL.js";import{db as g}from"./chunk-57EVB5FV.js";import{P as M,aa as V,t as _,va as Q}from"./chunk-HLWWEHZK.js";import"./chunk-5JGASDWN.js";import"./chunk-DYQ7BPYX.js";import"./chunk-N6SSDFMX.js";import"./chunk-YJCG6GWC.js";import{o as O,vb as H}from"./chunk-W7IWPUIQ.js";import{Va as F,Wa as B,p as U,q as K}from"./chunk-4SCKDS7G.js";import{dc as C,ra as N,ua as R,v as l}from"./chunk-DJGGVTSJ.js";import"./chunk-FATTDLFQ.js";import"./chunk-2RWUL32J.js";import"./chunk-RWWUDPHX.js";import{Ca as A,Z as z,a as oe,b as I}from"./chunk-LQZGQEJ6.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import{a as b,g as v,i as x,n as L}from"./chunk-WKJYWAXG.js";x();L();var i=v(oe(),1);var e=v(I(),1),ae=b(a=>{let r={stakePubkey:a.stakeAccountPubkey,stakeAuthorityPubkey:a.stakeAuthorityPubkey,onClose:a.onClose},{t}=z(),{deactivateStake:u,needsLedgerApproval:k,txHash:s,confirmationStatus:c,isError:d,error:S,onDeny:n}=ne(r);if(k)return(0,e.jsx)(q,{ledgerAction:u,cancel:n});if(d){let o=S,m=o?.message,f=Y(o),h=o?.message.includes(K),T=o?.message.includes(U);return f?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:u,onCancelClick:n}):h||T?(0,e.jsx)(J,{onCancelClick:n}):(0,e.jsxs)(y,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:n,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:m??t("stakeAccountDeactivateStakeUnstakingFailedDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})}return c==="confirmed"||c==="finalized"?(0,e.jsxs)(y,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated",children:["You will be able to withdraw your stake",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes inactive."]})}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]}):(0,e.jsxs)(y,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(g,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDeactivateStakeUnstakingSolDescription")}),(0,e.jsx)(D,{txHash:s,children:t("stakeAccountDeactivateStakeViewTransaction")})]})},"StakeAccountDeactivateStakeStatusPage"),ve=ae,ne=b(({onClose:a,...r})=>{let{data:t,isSuccess:u}=H(),{accountIdentifier:k,isLedgerAccount:s,solanaChainAddress:c,solanaPublicKey:d,connection:S,networkID:n}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>C.isSolanaNetworkID(te.networkID)),$=new l.PublicKey(w?.address??""),j=t?.type===O.Ledger,E=w?.networkID,ee=F(B(E));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:E}},[t]),o=Q(S),m=(0,i.useCallback)(()=>{o.mutate({...r,accountIdentifier:k,senderAddress:c,stakePubkey:new l.PublicKey(r.stakePubkey),stakeAuthorityPubkey:new l.PublicKey(r.stakeAuthorityPubkey),authorizedPubkey:d})},[k,r,o,c,d]),f=M(),h=(0,i.useCallback)(()=>{f.denied({chainType:N.Solana,chainName:R.Solana,networkId:C.getSolanaNetworkIDValue(n),type:"undelegate"}),a()},[n,a,f]);(0,i.useEffect)(()=>{if(u){if(!t||!c)throw new Error("Selected account undefined when trying to perform stake transaction.");s||m()}},[u]);let P=o.data?.id,p=V(S,2e3,P),W=s&&(o.isIdle||o.isPending),X=p.data?.value?.confirmationStatus;return{deactivateStake:m,onDeny:h,needsLedgerApproval:W,txHash:P,confirmationStatus:X,isError:o.isError??p.isError,error:o.error??p.error}},"useDeactivateStakeOnMount");export{ae as StakeAccountDeactivateStakeStatusPage,ve as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-3SOEEUDY.js.map
