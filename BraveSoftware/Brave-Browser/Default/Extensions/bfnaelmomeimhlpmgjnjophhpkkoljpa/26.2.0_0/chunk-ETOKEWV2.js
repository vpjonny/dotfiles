import{a as q}from"./chunk-SOI52WR5.js";import{d as ye,e as fe,na as Ce,qa as be,u as z,xa as Ie,za as Re}from"./chunk-VRODSUQC.js";import{s as N}from"./chunk-IUNAS73H.js";import{b as xe}from"./chunk-VQU4JTIB.js";import{a as Se}from"./chunk-ZMU6KWZP.js";import{m as U}from"./chunk-57EVB5FV.js";import{ob as ue,pb as ge}from"./chunk-44HH5QGP.js";import{vb as de}from"./chunk-W7IWPUIQ.js";import{Kd as G}from"./chunk-4SCKDS7G.js";import{Te as se,fd as ne,ff as ce,kc as j,wf as le}from"./chunk-DJGGVTSJ.js";import{a as ie}from"./chunk-RWWUDPHX.js";import{Aa as p,Ca as I,Ga as me,Na as pe,Ra as J,Ua as h,Z as re,a as ae,b as F,bb as H,cb as he,ob as O}from"./chunk-LQZGQEJ6.js";import{a as l,g as L,i as A,n as M}from"./chunk-WKJYWAXG.js";A();M();var x=L(ae(),1);A();M();var i=L(ae());A();M();var T=L(F(),1),ve=l(e=>{if(typeof e=="number")return e;switch(e??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},"sizeToPx"),We=l(e=>{switch(e){case"square":return 6;case"circle":default:return 0}},"shapeToBorderRadius"),Xe=U.div`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${e=>ie(e.color,e.alpha??.1)};
`,W=l(({src:e,fallback:o,alt:n,size:a="normal",shape:r="circle",style:d,onDragStart:u})=>{let g=o??(0,T.jsx)(je,{children:"?"}),m=ve(a),S=ve(a),R=We(r);return r==="circle"?(0,T.jsx)(Se,{color:I.colors.legacy.areaBase,diameter:m,style:d,children:(0,T.jsx)(J,{src:e,fallback:g,alt:n||void 0,width:m,height:S,borderRadius:R,onDragStart:u,loader:(0,T.jsx)(N,{borderRadius:`${R}px`,width:`${m}px`,height:`${S}px`})})}):(0,T.jsx)(Xe,{color:I.colors.legacy.areaBase,width:m,height:S,style:d,children:(0,T.jsx)(J,{src:e,fallback:g,alt:n||"",width:m,height:S,borderRadius:R,onDragStart:u,loader:(0,T.jsx)(N,{borderRadius:`${R}px`,width:`${m}px`,height:`${S}px`})})})},"ShapedImage"),je=U.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var Je=l(({item:e,index:o,onClick:n})=>{let a=e.type==="token"?e.data.data.symbol:e.type==="perp"?e.data.data.name:e.data.name,r=(0,i.useCallback)(g=>{g.preventDefault()},[]),d=e.type==="token"?i.default.createElement(z,{image:{type:"fungible",src:e.data.data.logoUri,fallback:e.data.data.symbol??""},tokenType:e.data.type,chainMeta:e.data.data.chain,size:36}):e.type==="dapp"?i.default.createElement(W,{src:e.data.imageUrl,size:36,shape:"square",onDragStart:r}):e.type==="category"?i.default.createElement(O,{src:e.data.imageUri,size:36,backgroundColor:"elementAccent",shape:"square",onDragStart:r}):null,u=(0,i.useCallback)(()=>{n(o,e)},[o,n,e]);return i.default.createElement("div",{className:X.buttonContainer},i.default.createElement("div",{className:X.button,onClick:u},d,i.default.createElement(h,{className:X.text,color:"white",children:a??""})))},"PillButton"),we=l(({items:e,onClick:o})=>{let n=he(0),a=(0,i.useRef)(null),[r,d]=(0,i.useState)(0),u=(0,i.useMemo)(()=>{let g=self.innerWidth-r;return Math.min(0,g)},[r]);return(0,i.useEffect)(()=>{a.current&&d(a.current.scrollWidth)},[e]),i.default.createElement(pe,{overflow:"hidden"},i.default.createElement(H.div,{ref:a},i.default.createElement(H.div,{className:X.scrollView,style:{x:n},drag:"x",dragConstraints:{left:u,right:0}},e.map((g,m)=>i.default.createElement(Je,{key:m,item:g,index:m,onClick:o})))))},"RecentlyViewedSearchItemRow"),X={scrollView:p({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:p({paddingRight:10}),button:p({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"elementBase",hover:"elementAccent"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:p({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var t=L(F(),1),Ge=U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${e=>e.isLast?I.colors.legacy.areaBase:I.colors.legacy.borderDiminished};
`,v={searchResultsContainer:p({marginTop:16,width:"100%"}),searchResultsHeaderContainer:p({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:p({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:p({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:p({cursor:"pointer"}),picturePlaceholder:p({borderRadius:6,height:32,width:32}),noResultsContainer:p({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:p({display:"flex",gap:4,alignItems:"center"}),dotContainer:p({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:p({backgroundColor:"textDiminished",width:4,height:4,borderRadius:"circle"}),secondaryAction:p({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},Te=l((e,o,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:r,entryPoint:d,navigateToSwapper:u,handleHideModalVisibility:g,addRecentlySearchedItem:m,dappsItems:S,pushDetailView:R})=>{let s=j(G(e)),k=n[s],P=k?.price,B=P!==void 0,y=k?.usd_24h_change,C=y!==void 0,D=B||C;return{type:"generic",key:s,"data-testid":`search-result-token-${e.data.symbol}`,image:(0,t.jsx)(z,{image:{type:"fungible",src:e.data.logoUri,fallback:e.data.symbol??""},tokenType:e.type,chainMeta:e.data.chain,size:32}),textMain:(0,t.jsx)(ye,{children:ce(e.data.name||"",25),spamStatus:e.data.spamStatus||null,font:"body"}),textDiminished:(0,t.jsxs)("div",{className:v.tokenSecondaryContainer,children:[(0,t.jsx)(h,{children:e.data.symbol||"",font:"caption",color:"textDiminished"}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N,{width:"36px",height:"14px",borderRadius:"8px"}),(0,t.jsx)(N,{width:"48px",height:"14px",borderRadius:"8px"})]}):(0,t.jsxs)(t.Fragment,{children:[D?(0,t.jsx)("div",{className:v.dotContainer,children:(0,t.jsx)("div",{className:v.dot})}):null,B?(0,t.jsx)(fe,{value:P,font:"caption",color:"textDiminished"}):null,C?(0,t.jsx)(h,{children:`${se(y,{includePlusPrefix:!0})}%`,font:"caption",color:y>=0?"spotPositive":"spotNegative",truncate:"ellipsis"}):null]})]}),secondaryAction:r?void 0:{icon:(0,t.jsx)(me.Swap,{}),onClick:l(w=>{w.stopPropagation(),u({buyFungibleCaip19:s}),d==="home"&&setTimeout(()=>{g("searchPage")},50)},"onClick")},onClick:l(async()=>{Ae({addRecentlySearchedItem:m,token:e,position:S.length+o+1,entryPoint:d,handleHideModalVisibility:g,pushDetailView:R})},"onClick")}},"mapTokenToSearchListItem"),Vt=l(({searchedDapps:e,tokens:o,trendingTokens:n,priceMap:a,isPriceMapLoading:r,showMoreDapps:d,setShowMoreDapps:u,renderShowMoreDappsButton:g,showMoreTokens:m,setShowMoreTokens:S,renderShowMoreTokensButton:R,entryPoint:s,recentlyViewedSearchItems:k=[],searchQuery:P,categories:B})=>{let{t:y}=re(),{pushDetailView:C}=xe(),D=be(),{handleHideModalVisibility:w}=Re(),Y=s==="home",_=ne(),{mutate:b}=ue(_),{mutate:Q}=ge(_),{data:Me}=de(),$=!!Me?.isReadOnly,E=(0,x.useMemo)(()=>e.map((c,f)=>({type:"generic",key:c.id,"data-testid":`search-result-dapp-${c.name}`,image:(0,t.jsx)(W,{src:c.imageUrl,size:"small",shape:"square"}),textMain:(0,t.jsx)(h,{children:c.name,font:"body"}),textDiminished:(0,t.jsx)(h,{children:c.category||"",font:"caption",color:"textDiminished"}),onClick:l(async()=>{Ee({addRecentlySearchedItem:b,dapp:c,position:f+1,entryPoint:s})},"onClick")})),[e,b,s]),K=(0,x.useMemo)(()=>o.map((c,f)=>Te(c,f,{priceMap:a,isPriceMapLoading:r,isReadOnlyAccount:$,entryPoint:s,navigateToSwapper:D,handleHideModalVisibility:w,addRecentlySearchedItem:b,dappsItems:E,pushDetailView:C})),[o,a,r,$,s,D,w,b,E,C]),Z=(0,x.useMemo)(()=>n.map((c,f)=>Te(c,f,{priceMap:a,isPriceMapLoading:r,isReadOnlyAccount:$,entryPoint:s,navigateToSwapper:D,handleHideModalVisibility:w,addRecentlySearchedItem:b,dappsItems:E,pushDetailView:C})),[n,a,r,$,s,D,w,b,E,C]),ee=(0,x.useMemo)(()=>(B||[]).map((c,f)=>({type:"generic",key:c.id,"data-testid":`search-result-category-${c.name}`,image:(0,t.jsx)(O,{src:c.imageUri,size:32,backgroundColor:"elementAccent",shape:"square"}),textMain:(0,t.jsx)(h,{children:c.name,font:"body"}),textDiminished:(0,t.jsx)(h,{children:y("fungibleCategoriesNumTokens",{numTokens:c.numTokens}),font:"caption",color:"textDiminished"}),onClick:l(()=>{Le({addRecentlySearchedItem:b,category:c,index:f,entryPoint:s,pushDetailView:C})},"onClick")})),[B,y,C,b,s]),Ne=(0,x.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:k,onClick:l(async(c,f)=>{if(f.type==="token")Ae({addRecentlySearchedItem:b,token:f.data,position:c,entryPoint:s,handleHideModalVisibility:w,pushDetailView:C});else if(f.type==="dapp")Ee({addRecentlySearchedItem:b,dapp:f.data,position:c,entryPoint:s});else if(f.type==="category")Le({addRecentlySearchedItem:b,category:f.data,index:c,entryPoint:s,pushDetailView:C});else throw new Error("Unknown item type")},"onClick")}),[b,w,s,C,k]),Pe=k.length?y("commandClear"):void 0,Be=(0,x.useCallback)(()=>{Q()},[Q]),He=R?y(m?"exploreShowLess":"exploreShowMore"):void 0,Ue=(0,x.useCallback)(()=>{S(!m)},[S,m]),Ve=g?y(d?"exploreShowLess":"exploreShowMore"):void 0,$e=(0,x.useCallback)(()=>{u(!d)},[u,d]);if(!e.length&&!o.length)return(0,t.jsx)("div",{className:v.noResultsContainer,"data-testid":"explore-search-results-nodata",children:(0,t.jsx)(h,{children:y("searchNoResultsFound"),font:"bodyMedium",color:"textDiminished"})});let te=P==null||P.length===0,Fe=k.length&&te?(0,t.jsx)(V,{testId:"explore-search-results",title:(0,t.jsx)(h,{children:y("dAppBrowserRecents"),font:"title1Semibold"}),items:[Ne],accessoryText:Pe,accessoryOnPress:Be}):null,Oe=ee.length?(0,t.jsx)(V,{testId:"explore-search-results-categories",title:(0,t.jsx)(h,{children:y("exploreCategories"),font:"title1Semibold"}),items:ee}):null,oe=E.length?(0,t.jsx)(V,{testId:"explore-search-results",title:(0,t.jsx)(h,{children:y("exploreSites"),font:"title1Semibold"}),items:E,accessoryText:Ve,accessoryOnPress:$e}):null,ze=K.length?(0,t.jsx)(V,{testId:"explore-search-results",title:(0,t.jsx)(h,{children:y("exploreTokens"),font:"title1Semibold"}),items:K,accessoryText:He,accessoryOnPress:Ue}):null,qe=te&&Z.length?(0,t.jsx)(V,{testId:"explore-search-results",title:(0,t.jsx)(h,{children:y("exploreTrendingTokens"),font:"title1Semibold"}),items:Z}):null;return(0,t.jsxs)(t.Fragment,{children:[Fe,Y?void 0:oe,qe,ze,Oe,Y?oe:void 0]})},"ExploreSearchResults"),De=l(({hoverColor:e,baseColor:o,...n})=>(0,t.jsx)(H.div,{...n,whileHover:{background:e},style:{background:o},transition:{ease:[.5,1,.89,1],duration:.1}}),"AnimatedBackgroundChangeDiv"),V=l(({items:e,title:o,testId:n,accessoryText:a,accessoryOnPress:r})=>(0,t.jsxs)("div",{className:v.searchResultsContainer,"data-testid":n,children:[(0,t.jsxs)("div",{className:v.searchResultsHeaderContainer,children:[o,a?(0,t.jsx)(h,{className:v.hover,children:a,font:"caption",color:"textDiminished",onPress:r}):null]}),e.map((d,u)=>(0,t.jsx)(Ye,{...d,isLast:u===e.length-1}))]}),"SearchResultsContent"),Ye=l(e=>{let[o,n]=(0,x.useState)(!1),[a,r]=(0,x.useState)(!1);if(e.type==="recentSearchItems")return(0,t.jsx)(we,{items:e.items,onClick:e.onClick});let{onClick:u,image:g,isLast:m,textMain:S,textDiminished:R,secondaryAction:s,"data-testid":k}=e;return(0,t.jsxs)(De,{className:v.searchResult,onClick:u,"data-testid":k,baseColor:I.colors.legacy.areaBase,hoverColor:a?I.colors.legacy.areaBase:I.colors.legacy.elementAccent,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,t.jsx)("div",{children:g}),(0,t.jsxs)(Ge,{isLast:m,children:[(0,t.jsxs)("div",{className:v.searchResultTextContainer,children:[S,R]}),s?(0,t.jsx)(De,{className:v.secondaryAction,onClick:s.onClick,baseColor:o?I.colors.legacy.borderBase:I.colors.legacy.elementAccent,hoverColor:I.colors.legacy.borderBase,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:s.icon}):null]})]})},"SearchResultItem");function Ee({addRecentlySearchedItem:e,dapp:o,position:n,entryPoint:a}){e({type:"dapp",data:o}),self.open(le(o.domain).origin),q.searchItemClickedByUser({itemDetails:{position:n,title:o.name,id:o.id,type:"site",uiContext:a}})}l(Ee,"dappSelected");function Ae({addRecentlySearchedItem:e,token:o,position:n,entryPoint:a,pushDetailView:r}){let d=j(G(o));q.searchItemClickedByUser({itemDetails:{position:n,title:o.data.name||o.data.symbol||d,id:d,type:"token",uiContext:a}}),r((0,t.jsx)(Ie,{caip19:d,title:o.data.name??void 0,entryPoint:"exploreSearch"})),e({type:"token",data:o})}l(Ae,"tokenSelected");function Le({addRecentlySearchedItem:e,category:o,pushDetailView:n,index:a,entryPoint:r}){n((0,t.jsx)(Ce,{category:o})),q.onExploreListItemClickedByUser({datasourceId:"",listName:"token-categories",context:r,itemDetails:{position:a,title:o.name,id:o.id}}),e({type:"category",data:o})}l(Le,"categorySelected");export{Vt as a};
//# sourceMappingURL=chunk-ETOKEWV2.js.map
