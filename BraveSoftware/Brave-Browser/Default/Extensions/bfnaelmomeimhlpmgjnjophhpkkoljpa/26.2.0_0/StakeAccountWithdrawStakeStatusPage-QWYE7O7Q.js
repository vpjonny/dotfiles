import{a as G}from"./chunk-7EKZ4PSV.js";import{a as g}from"./chunk-5ENLJTSW.js";import{d as V}from"./chunk-ZMW27YAP.js";import{e as Q,f as U,g as q}from"./chunk-QW5UCU4W.js";import"./chunk-X6Z5FRDC.js";import"./chunk-VQU4JTIB.js";import"./chunk-ZMU6KWZP.js";import"./chunk-UE7TCZBL.js";import"./chunk-L4NFABLQ.js";import"./chunk-P3JRRYSB.js";import"./chunk-N3C6FBKY.js";import{b as A}from"./chunk-2P4HZW3J.js";import"./chunk-HLSJ3VIL.js";import{db as f}from"./chunk-57EVB5FV.js";import{P as K,aa as M}from"./chunk-HLWWEHZK.js";import"./chunk-5JGASDWN.js";import"./chunk-DYQ7BPYX.js";import"./chunk-N6SSDFMX.js";import"./chunk-YJCG6GWC.js";import{o as O,vb as _}from"./chunk-W7IWPUIQ.js";import{Va as B,Wa as F,p as z,q as v}from"./chunk-4SCKDS7G.js";import{dc as T,ra as N,ua as R,v as m}from"./chunk-DJGGVTSJ.js";import"./chunk-FATTDLFQ.js";import"./chunk-2RWUL32J.js";import"./chunk-RWWUDPHX.js";import{Ca as h,Z as H,a as et,b as P}from"./chunk-LQZGQEJ6.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import{a as W,g as D,i as x,n as I}from"./chunk-WKJYWAXG.js";x();I();var i=D(et(),1);var e=D(P(),1),ot=W(r=>{let c={stakePubkey:r.stakeAccountPubkey,amount:r.amount,usdPerSol:r.usdPerSol,onClose:r.onClose},{t}=H(),{withdrawStake:d,needsLedgerApproval:l,txHash:n,confirmationStatus:s,isError:u,error:k,onDeny:a}=rt(c);if(l)return(0,e.jsx)(U,{ledgerAction:d,cancel:a});if(u){let o=k,S=o?.message,w=Q(o),p=o?.message.includes(v),E=o?.message.includes(z);return w?(0,e.jsx)(q,{ledgerActionError:o,onRetryClick:d,onCancelClick:a}):p||E?(0,e.jsx)(G,{onCancelClick:a}):(0,e.jsxs)(A,{icon:"error",title:t("stakeAccountWithdrawStakeWithdrawalFailed"),onClose:a,showButton:!!n,children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:S??t("stakeAccountWithdrawStakeWithdrawalFailedDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})}return s==="confirmed"||s==="finalized"?(0,e.jsxs)(A,{icon:"success",title:t("stakeAccountWithdrawStakeSolWithdrawn"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsxs)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:[t("stakeAccountWithdrawStakeSolWithdrawnDescription.part1"),(0,e.jsx)("br",{})," ",t("stakeAccountWithdrawStakeSolWithdrawnDescription.part2")]}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]}):(0,e.jsxs)(A,{icon:"loading",title:t("stakeAccountWithdrawStakeWithdrawingSol"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountWithdrawStakeWithdrawingSolDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})},"StakeAccountWithdrawStakeStatusPage"),Ct=ot,rt=W(({onClose:r,...c})=>{let{data:t,isSuccess:d}=_(),{accountIdentifier:l,isLedgerAccount:n,solanaChainAddress:s,solanaPublicKey:u,connection:k,networkID:a}=(0,i.useMemo)(()=>{let Y=t?.identifier??"",C=(t?.addresses??[]).find(tt=>T.isSolanaNetworkID(tt.networkID)),Z=new m.PublicKey(C?.address??""),$=t?.type===O.Ledger,L=C?.networkID,j=B(F(L));return{accountIdentifier:Y,isLedgerAccount:$,solanaChainAddress:C,solanaPublicKey:Z,connection:j,networkID:L}},[t]),o=V(k),S=(0,i.useCallback)(()=>{o.mutate({...c,accountIdentifier:l,senderAddress:s,stakePubkey:new m.PublicKey(c.stakePubkey),authorizedPubkey:u})},[l,c,s,u,o]),w=K(),p=(0,i.useCallback)(()=>{w.denied({chainType:N.Solana,chainName:R.Solana,networkId:T.getSolanaNetworkIDValue(a),type:"withdraw"}),r()},[a,r,w]);(0,i.useEffect)(()=>{if(d){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");n||S()}},[d]);let b=o.data?.id,y=M(k,2e3,b),J=n&&(o.isIdle||o.isPending),X=y.data?.value?.confirmationStatus;return{withdrawStake:S,onDeny:p,needsLedgerApproval:J,txHash:b,confirmationStatus:X,isError:o.isError||y.isError,error:o.error||y.error}},"useWithdrawStakeOnMount");export{ot as StakeAccountWithdrawStakeStatusPage,Ct as default};
//# sourceMappingURL=StakeAccountWithdrawStakeStatusPage-QWYE7O7Q.js.map
