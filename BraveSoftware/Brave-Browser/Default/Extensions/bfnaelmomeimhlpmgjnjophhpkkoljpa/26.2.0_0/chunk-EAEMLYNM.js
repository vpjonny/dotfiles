import{c as $s}from"./chunk-2LSP5LV2.js";import{D as Ps,E as js,H as Rs,S as _s,T as Ns,U as Ls,X as Vs,qa as Fs,z as Us}from"./chunk-5JGASDWN.js";import{f as ns,h as os,o as is}from"./chunk-N6SSDFMX.js";import{Bb as ts,j as qt,mc as tn,o as Xr,qc as rs,vb as en}from"./chunk-W7IWPUIQ.js";import{$ as on,Aa as Qt,Ad as Ms,Ba as Xt,Ca as A,D as ss,Da as _,Dc as uo,Ea as dt,Ec as Is,F as as,Fa as W,Fc as xr,G as cs,Ga as x,Ha as ce,I as nn,Ia as Yt,Ic as mo,Ja as M,Jc as mn,Ka as an,Kb as hs,Kc as Os,La as se,M as ls,Ma as Ye,Na as z,Nd as Bs,Oa as F,P as us,Ra as cn,Rb as au,Rd as Ds,Sb as gs,Ta as wr,Tb as bs,Ua as Et,Va as ms,Vc as As,Wa as ps,_ as ds,d as rn,fc as dn,g as Kt,gc as ys,hb as fs,hc as Ss,ic as Cs,kc as ws,nc as xs,nd as vt,od as Tr,pb as lo,tc as Ts,ua as Wt,uc as Es,va as Q,vb as ln,vc as ee,wa as sn,wb as un,xa as Cr,xc as vs,ya as I,z as Sr,za as co,zc as $,zd as ks}from"./chunk-4SCKDS7G.js";import{$c as ne,B as ke,Dc as Gi,E as ji,Ec as Hi,F as ut,H as Ri,I as ve,Ja as qr,L as Ce,La as Gt,Ne as so,Oe as Yr,Pe as Jr,Re as ao,Ue as Ji,Vc as qi,Xb as Li,Zb as Kr,_e as Zi,bd as Ki,bf as es,dc as V,dd as Wi,ec as Vi,fa as _i,fd as Ht,gf as yr,i as io,nc as Fi,oe as Qi,qd as me,qf as we,ra as Hr,s as Pi,sd as Qr,se as Xi,tc as $i,ua as Pe,v as U,vd as Me,xa as Ni,yc as Wr,zc as zi,ze as Yi}from"./chunk-DJGGVTSJ.js";import{t as $t,u as zt}from"./chunk-FATTDLFQ.js";import{b as he}from"./chunk-2RWUL32J.js";import{U as Ie,Z,a as k,j as h,k as br,l as de,o as Gr,xa as Zr}from"./chunk-LQZGQEJ6.js";import{a as o,g as v,i as c,l as su,m as Buffer,n as l}from"./chunk-WKJYWAXG.js";c();l();var cu=o(t=>t??[],"toEmptyArray"),Ge=class extends Error{static{o(this,"CollectiblesError")}constructor(e){super(e),this.name="CollectiblesError"}},N=h.string().nullish().transform(we),It=h.number().nullish().transform(we),po=h.union([N,It]).transform(t=>typeof t=="number"?t.toString():t),lu=h.object({name:N,symbol:N,decimals:It,address:N}),Jt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.ReservationListV1=3]="ReservationListV1",t[t.MetadataV1=4]="MetadataV1",t[t.ReservationListV2=5]="ReservationListV2",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker",t[t.UseAuthorityRecord=8]="UseAuthorityRecord",t[t.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",t[t.TokenOwnedEscrow=10]="TokenOwnedEscrow",t[t.TokenRecord=11]="TokenRecord",t[t.MetadataDelegate=12]="MetadataDelegate"})(Jt||(Jt={}));var pn=h.nativeEnum(Jt),Hs=h.object({price:h.number(),token:lu.nullish().transform(we)}),uu=Hs.nullish().transform(we),du=h.object({name:N,url:N,isVerified:h.coerce.boolean()}),qs=h.object({id:h.string(),isValidCollectionId:h.coerce.boolean(),name:N,description:N,externalUrl:N,imageUrl:N,isSpam:h.coerce.boolean(),spamStatus:h.nativeEnum(ee).optional().default(ee.NotVerified),floorPrice:Hs.nullish().transform(we),ownerCount:It,totalCount:It,tokenCount:It,marketplaces:h.array(du)}),mu=h.object({small:N,medium:N,large:N,blurhash:N}),pu=mu.nullish().transform(we),fu=h.enum(["image","video","audio","model","other"]),hu=h.object({url:N}),Er=hu.nullish().transform(we),gu=h.object({type:fu,image:Er,video:Er,audio:Er,model:Er,other:Er,previews:pu}),bu=gu.nullish().transform(we),yu=h.object({trait_type:N,value:N.or(It),display_type:N}),Su=h.object({id:h.string(),contract:h.string(),standard:h.nativeEnum(Tr)}),Ks=h.object({compressed:h.boolean(),merkleTree:h.string(),leafIndex:h.number()}),Cu=h.object({mint:h.string(),tokenAccount:h.string(),standard:h.nativeEnum(vt),compression:Ks.nullish().transform(we),programId:h.string(),mintExtensions:Xi(As).optional()}),wu=h.object({id:h.string(),url:h.string(),displayName:h.string(),description:h.string(),count:h.number()}),xu=h.object({hash:h.string(),index:h.number(),distinctRareSats:h.number(),satributes:h.array(wu),blockNumber:h.number(),value:h.number(),backgroundImageUrl:h.string()}),Tu=h.object({firstCreatedTransactionHash:h.string(),firstCreatedInscriptionId:h.string(),inscriptionId:N,inscriptionNumber:po,outputValue:po,satNumber:po,satName:N,satRarity:N,protocolName:N,utxoHash:N,utxoIndex:It,createdAt:h.string().nullish().transform(we),utxoDetails:xu.nullish().transform(we)}),Eu=h.object({objectId:h.string().optional(),kioskId:h.string().optional()}),vu=h.object({listingPrice:h.string(),listingPriceUiAmount:h.string(),isNative:h.boolean(),url:h.string()}),Iu=h.union([Cu,Su,Tu,Eu]),fo=h.object({id:Vi,chain:$i,name:N,symbol:N,description:N,externalUrl:N,collection:qs,media:bu,uri:N,attributes:h.array(yu).nullish().transform(cu),lastSalePrice:uu,balance:N,decimals:N,owner:N,chainData:Iu.optional(),listings:h.record(vu).nullish().transform(we)}),Ou=qs.extend({items:h.array(fo)}),Vf=h.object({items:h.array(Ou),isTrimmed:h.boolean()}),zs;(function(t){t.HiddenTitle="hidden-title",t.HiddenButton="hidden-button",t.Collection="collection",t.Empty="empty",t.CollectiblesTrimmed="collectibles-trimmed",t.AddCollection="add-collection"})(zs||(zs={}));var Gs;(function(t){t.userHid="userHid",t.userUnhid="userUnhid",t.userBurned="userBurned",t.markAsSpam="markAsSpam",t.markAsNotSpam="markAsNotSpam"})(Gs||(Gs={}));var Ff=h.object({compression:Ks.nullish().transform(we).refine(t=>t?.compressed),mint:h.string()}),$f=h.object({root:h.string(),proof:h.array(h.string()),merkleTree:h.string(),dataHash:h.string(),creatorHash:h.string(),leafIndex:h.number(),owner:h.string(),delegate:h.string().optional()}),xe;(function(t){t.CONFIRMATION="CONFIRMATION",t.SUBMISSION="SUBMISSION"})(xe||(xe={}));c();l();c();l();var ho=v(su(),1);function fn(t){let e=[Jt.MasterEditionV1,Jt.MasterEditionV2],r=pn.safeParse(t);return r.success&&e.includes(r.data)}o(fn,"isMasterEdition");var go=ho.Buffer.from("metadata"),Au=ho.Buffer.from("edition"),bo=Sr.toBuffer();function Yf(t){let[e]=U.PublicKey.findProgramAddressSync([go,bo,t],Sr);return e}o(Yf,"getMetadataPDA");function Ws(t){let[e]=U.PublicKey.findProgramAddressSync([go,bo,t,Au],Sr);return e}o(Ws,"getMasterEditionPDA");function Jf(t){let[e]=U.PublicKey.findProgramAddressSync([go,bo,t],Sr);return e}o(Jf,"getCollectionMetadataPDA");var ku="CollectibleEdition";function Mu(t,e){return Me({queryKey:[ku,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new U.PublicKey(t).toBytes()),n=Ws(r),{Edition:i}=await as();try{let s=await i.fromAccountAddress(e,n),a=pn.safeParse(s.key);if(!a.success)throw new Error(`Invalid MetaplexTokenEdition: ${s.key}`);return{key:a.data,isMasterEdition:fn(s.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}o(Mu,"useCollectibleEdition");c();l();function le(t){return t?.tokenAccount!==void 0}o(le,"isSolanaCollectibleChainData");function He(t){return t?.contract!==void 0}o(He,"isEvmCollectibleChainData");function qe(t){return t!==void 0&&"firstCreatedTransactionHash"in t}o(qe,"isBitcoinCollectibleChainData");function Qs(t){return t!==void 0&&"objectId"in t}o(Qs,"isSuiCollectibleChainData");function Xs(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}o(Xs,"isBitcoinOrdinalCollectibleChainData");function Zt(t){return t!==void 0&&"utxoDetails"in t}o(Zt,"isBitcoinRareSatsCollectibleChainData");c();l();var je=v(k(),1);c();l();c();l();var Be="collectibles",yo=[Be,"collectibleBids"],H={collections:o(t=>[Be,"collections",{addresses:t.map(lo)}],"collections"),hiddenCollections:o(t=>[Be,"hiddenCollections",t],"hiddenCollections"),unhiddenCollections:o(t=>[Be,"unhiddenCollections",t],"unhiddenCollections"),visibilityOverrides:o(t=>[Be,"visibilityOverrides",t],"visibilityOverrides"),pinnedCollections:o(t=>[Be,"pinnedCollections",t],"pinnedCollections"),topCollections:o(t=>[Be,"topCollections",{addresses:t.map(lo)}],"topCollections"),optimisticUpdates:o(()=>[Be,"optimisticUpdates"],"optimisticUpdates"),collectibleBids:o(t=>[...yo,t],"collectibleBids"),collectibleMintGasEstimation:o(t=>[Be,"mintNFTGasEstimation",t],"collectibleMintGasEstimation"),collectibleSellSteps:o(t=>[Be,"collectibleSellSteps",t],"collectibleSellSteps"),createMintTransaction:o(t=>[Be,"createMintTransaction",t],"createMintTransaction"),transferTransaction:o(t=>[Be,"transferTransaction",t],"transferTransaction")};var hn=o((t,e)=>{t.invalidateQueries({queryKey:yo}),t.invalidateQueries({predicate:o(({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId,"predicate")})},"invalidateBidsAndSellSteps");c();l();var Bu=20;function er(t,e){let r=H.optimisticUpdates(),n=t.getQueryData(r)??[];t.setQueryData(r,[...n,e])}o(er,"pushOptimisticUpdate");async function Ys(t,e){let r=H.optimisticUpdates(),n=await t.getQueryState(r);if(n){let i=e??Date.now(),s=n.dataUpdatedAt,a=ne({seconds:Bu});return i-s>a?(t.removeQueries({queryKey:r}),[]):n?.data??[]}else return[]}o(Ys,"getOptimisticUpdates");function Js(t,e){let r=e.reduce((n,i)=>{let{id:s,amount:a}=i,u=new de(a);return n[s]=(n[s]??new de(0)).plus(u),n},{});for(let n of t)n.items=n.items.reduce((i,s)=>{let a=s.id,u=r[a];if(u){let m=new de(s.balance??0);return m.minus(u).isGreaterThan(0)?i.concat({...s,balance:m.minus(u).toString()}):i}else return i.concat(s)},[]);return t=t.filter(n=>n.items.length>0),t}o(Js,"applyOptimisticUpdates");var Du=o(()=>{let{data:t}=en();return(0,je.useMemo)(()=>{let e=t?.identifier??"",r=t?.type===Xr.Ledger,n=t?.addresses??[],i=n.find(Fi),s=i?.networkID,a=i?.address??"",u=ps(s),m=ms(u);return{accountIdentifier:e,chainAddresses:n,chainId:s,solanaPublicKey:a,isLedger:r,cluster:u,connection:m}},[t])},"useAccountMetadata"),Uu=o((t,e)=>{let[r,n]=(0,je.useState)(void 0);return(0,je.useEffect)(()=>{o(async()=>{if(!t)return;let a=t.find(f=>f.type==="transaction")?.data?.transaction;if(!a)return;let u=io(a,"base64"),m=await Cs(e,[u.message]),p=Pi(m.value);n(p)},"processEncodedTx")()},[t,e]),r},"useSolanaGasEstimation"),Pu=o(async(t,e,r,n,i,s)=>{if(!s)throw new Error("Bid summary is required");let{collectionName:a,marketplace:u,receiveAmount:m,currencySymbol:p}=s,f={topRight:{text:`+${m} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${a}`},bottomLeft:{text:Zr(u)}},{data:g,chainId:y,type:C}=e,{transaction:S}=g,w=io(S,"base64"),E={ownerAddress:r.solanaPublicKey,networkID:y,data:{signature:""},type:rn.Sell,display:{summary:f}},{accountIdentifier:B,solanaPublicKey:L,connection:O}=r,K=new U.PublicKey(L),J=await xs({accountIdentifier:B,feePayer:K,transaction:w,pendingTransactionInput:E,connection:O,accountSigner:n,storage:i,opts:{skipPreflight:!0}});return{type:C,data:J}},"executeTransactionStep"),ju="Steps are required",Ru="These steps are not from the same bid",gn=class extends Error{static{o(this,"StepsRequiredError")}message=ju},bn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Ru},_u=o((t,e,r,n)=>{let i=Ht(),s=he(),a=me(),u=qt(),[m,p]=(0,je.useState)("idle"),[f,g]=(0,je.useState)(null),[y,C]=(0,je.useState)(null),{t:S}=Z(),w=Du(),{chainId:E,connection:B,chainAddresses:L,isLedger:O}=w,K=E&&V.isSolanaNetworkID(E)?E:Gt.Solana.Mainnet,J=Uu(e,K);(0,je.useEffect)(o(function(){m==="loading"&&hn(a,r)},"invalidateQueriesOnLoading"),[m,a,r]),(0,je.useEffect)(o(function(){m==="success"&&r&&er(a,{id:r.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[m,a,L,r]);let st=o(()=>{p("idle"),g(null),C(null)},"reset"),re=n&&r?.receiveAmount?r.receiveAmount*n:void 0;return{executeSellSolanaSteps:o(async()=>{try{if(t&&t!==r?.orderId)throw new bn;if(!Array.isArray(e)||e.length===0)throw new gn;p("loading");for await(let oe of e){let at=await Pu(S,oe,w,u,i,r);C(at.data),await ws({connection:B,signature:at.data})}p("success"),s.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:re}})}catch(oe){let at=oe?.message??"";(!(oe instanceof gn)||!(oe instanceof bn))&&(Ce.captureError(oe,ve.Collectibles),s.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:re,errorMessage:at}})),p("error"),g(oe)}},"executeSellSolanaSteps"),reset:st,gas:J,error:f,result:y,status:m,isLedger:O}},"useInstantSellExecuteSolanaSteps");c();l();var Yh=o(t=>`${t/100}%`,"bpsToPercent"),Zs=o((t,e)=>t*e/100/100,"bpsToValue");c();l();var ia=v(so(),1),nr=v(k(),1);c();l();c();l();var mt=o((t,e,r,n)=>{(!e||e>=400&&e<500)&&(Ce.addBreadcrumb(r,t.message,Ri.Info,n),Ce.captureError(t,ve.Collectibles))},"captureClientError");c();l();var yn;(function(t){t[t.Always=1/0]="Always",t[t.Short=ne({days:1})]="Short",t[t.Medium=ne({days:3})]="Medium",t[t.Long=ne({days:7})]="Long"})(yn||(yn={}));var pt;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=ne({minutes:1})]="Short",t[t.Medium=ne({minutes:2.5})]="Medium",t[t.Long=ne({minutes:5})]="Long",t[t.Never=1/0]="Never"})(pt||(pt={}));var tr;(function(t){t[t.Shortest=ne({seconds:10})]="Shortest",t[t.Shorter=ne({seconds:30})]="Shorter",t[t.Short=ne({minutes:1})]="Short",t[t.Medium=ne({minutes:2.5})]="Medium",t[t.Long=ne({minutes:5})]="Long",t[t.Longer=ne({minutes:7.5})]="Longer",t[t.Longest=ne({minutes:10})]="Longest"})(tr||(tr={}));var Nu=h.object({caip19:h.string(),name:h.string(),symbol:h.string()}),Lu=h.object({bps:h.number(),kind:h.union([h.literal("marketplace"),h.literal("royalty")]),recipient:h.string().optional()}),Vu=h.object({amount:h.number(),feeBreakdown:h.array(Lu),netAmount:h.number(),token:Nu,totalFeeBps:h.number()}),Fu=h.object({name:h.string(),logo:h.string(),url:h.string().optional()}),$u=h.object({id:h.string(),expiration:h.string().optional(),price:Vu,source:Fu}),zu=h.object({bids:h.array($u)}),ea=new Ge("Failed to fetch collectible bids."),Gu="collectible-instant-sell-bids",Hu=o(async t=>{if(!t.address)throw ea;try{let e=await ke.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=zu.parse(e.data);return r}catch(e){if(ut(e)){let r=e.response?.status;mt(e,r,Gu)}throw ea}},"getCollectibleBids"),ta=o(({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return Me({enabled:r,staleTime:pt.Short,refetchInterval:tr.Shortest,queryKey:H.collectibleBids(t),async queryFn(){return Hu(t)}})},"useCollectibleBids"),ra=o(t=>{let e=t?.chainData,r=t?.chain.id??null,n=He(e),i=le(e),s=n?{tokenId:e.id}:{},a=i?{contractType:e.standard}:{},u=n?e.contract.toLowerCase():i?e.mint:null;return{chainId:r,address:u,resourceType:"address",...s,...a}},"createBidAsset");c();l();var qu=v(k(),1);var ie=h.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),Ku=h.enum(["/execute/auth-signature/v1","/order/v3"]),Ke=h.enum(["transaction","signature","post","refetch"]),Wu=h.enum(["eip712","eip191"]),Qu=h.object({domain:h.any(),types:h.any(),value:h.any()}),Xu=h.object({message:h.string()}),Yu=h.object({from:h.string(),to:h.string(),data:h.string()}),Ju=h.object({endpoint:Ku,body:h.object({id:h.string(),kind:h.string()})}),Zu=h.object({action:ie,chainId:qr,type:h.literal(Ke.enum.signature),data:h.object({signatureKind:Wu,signatureData:h.union([Xu,Qu]),postData:Ju})}),ed=h.object({chainId:qr,action:ie,data:Yu,type:h.literal(Ke.enum.transaction)}),td=h.object({chainId:qr,action:ie,type:h.literal(Ke.enum.refetch),data:h.object({resource:h.string()})}),rd=h.union([Zu,ed,td]),nd=h.object({action:ie,chainId:Ni,type:h.literal(Ke.enum.transaction),data:h.object({transaction:h.string()})}),od=h.union([rd,nd]),id=h.object({steps:h.array(od),orderId:h.string().optional()}),sd=new Ge("Failed to fetch collectible sell steps."),ad="collectible-instant-sell-steps",cd=o(async t=>{try{let e=await ke.api().validateStatus(!0).post("/collectibles/v1/sell",t);return id.parse(e.data)}catch(e){if(ut(e)){let r=e.response?.status;if(mt(e,r,ad),e.response?.data?.code){let{code:n}=e.response.data;throw{code:n}}if(r)throw e}throw sd}},"getCollectibleSellSteps"),na=o(({sellAsset:t})=>{let e=t.details.orderId!==void 0;return Me({enabled:e,queryKey:H.collectibleSellSteps(t),staleTime:pt.Never,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:o((r,n)=>n.code?!1:r<3,"retry"),async queryFn(){return cd(t)}})},"useCollectibleSellSteps");var oa=o((t,e,r)=>{let n=r?.chainData,i=He(n),s=le(n),a=r?.owner,u=i?a?.toLowerCase():a,m=e?.id,p=e?.source?.name,f=s?{minPrice:e?.price?.netAmount,tokenAccount:n.tokenAccount}:{};return{details:{asset:t,owner:u,orderId:m,marketplace:p,...f}}},"createSellAsset");c();l();br.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var rr=o((t,e)=>new br(t).div(Jr(e)).toNumber(),"amountToBalance");var ld={steps:[],orderId:""},ud=o(({collectible:t})=>{let{t:e}=Z(),r=(0,nr.useMemo)(()=>ra(t),[t]),{data:n=[],isPending:i,isError:s}=ta({bidAsset:r,isEnabled:!0}),a=(0,nr.useMemo)(()=>n.length>0?n[0]:void 0,[n]),u=(0,nr.useMemo)(()=>oa(r,a,t),[r,a,t]),{data:m=ld,isPending:p,isError:f,refetch:g,error:y}=na({sellAsset:u}),C=(0,nr.useMemo)(()=>a&&t?sa({t:e,bid:a,collectible:t}):void 0,[e,a,t]),S=(0,nr.useMemo)(()=>f?Number.isInteger(y.code):!1,[f,y]);return{bid:a,bidSummary:C,isLoadingBids:i,isErrorBids:s,sellSteps:m,isLoadingSellSteps:p,isErrorSellSteps:f,refetchSellSteps:g,sellStepsError:y,isSellErrorCode:S}},"useInstantSell"),dd=o(({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,"calculatePNL"),md=o(({offerAmount:t,collectionFloor:e})=>t-e,"calculateFloorDifference"),pd=o(t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,ia.default)(t).format(e);return`${t>0?"+":""}${r}`},"getFloorDifferencePercentage"),fd=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return rr(e,n)}},"parseCollectionFloor"),hd=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return rr(e,n)}},"parseLastSale"),gd=o(t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large},"getCollectibleImagePreview"),or;(function(t){t.BLUR="Blur"})(or||(or={}));var sa=o(({bid:t,collectible:e,t:r})=>{let{lastSalePrice:n,media:i,name:s,collection:a}=e,{name:u,logo:m}=t.source,{amount:p,netAmount:f,feeBreakdown:g,token:y,totalFeeBps:C}=t.price,{symbol:S,caip19:w}=y,E=0,B=f,L=a.id,O=e.id,K=hd(n),J=S.slice(0,6),st=e.chain.symbol,re=fd(a.floorPrice),Se=re?md({offerAmount:p,collectionFloor:re}):void 0,oe=Se?pd(Se):void 0;return{bidTokenSymbol:J,caip19:w,collectionId:L,collectibleId:O,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:st,collectionFloor:re,collectibleImage:gd(i),collectibleName:s??r("collectiblesUnknownCollectible"),collectionName:a.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name===or.BLUR?st:J,fees:g,floorDifference:Se,floorDifferencePercent:oe,lastSale:K,marketplace:u,marketplaceLogoURL:m,offerAmount:p,offerAmountFormatted:Yr(p),phantomFeePercentage:E,pnl:dd({lastSale:K,receiveAmount:B}),receiveAmount:B,receiveAmountFormatted:Yr(B),totalFeeBps:C}},"parseBidSummary"),bd=o(({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let n=Zs(e,r)+t.toNumber();return{raw:n,formatted:Yr(n)}},"formatEstimatedFees");c();l();var aa=new Map([[ie.enum["nft-approval"],8e4],[ie.enum["blur-swap"],42e3],[ie.enum.sale,39e4],["default",42e4]]),yd=o((t,e,r,n)=>{let i=t===or.BLUR,s=r.filter(w=>w.type==="transaction").map(({action:w})=>({action:w}));if(s.some(({action:w})=>w===ie.enum["nft-approval"])||(s=[...s,{action:ie.enum["nft-approval"]}]),i){let w=s.some(({action:B})=>B===ie.enum.sale),E=s.some(({action:B})=>B===ie.enum["blur-swap"]);w||(s=[...s,{action:ie.enum.sale}]),E||(s=[...s,{action:ie.enum["blur-swap"]}])}let u=s?.reduce((w,{action:E})=>{let B=aa.get(E)??aa.get("default");return w+(B??0)},0),m=new de(u),{status:p,data:f}=js({gasLimit:m,networkID:e,transactionSpeed:Kt.standard}),{data:g}=Rs(e,f),y=ds(f),C=Number(y?.replace(/[^\d.]/g,"")??0),S=n?n.isGreaterThan(C):!1;return{gasEvm:C,gasEstimation:f,gasEstimationStatus:p,ethFeeUI:y,gasEstimationPrice:g,hasEnoughGas:S}},"useInstantSellEvmGasEstimation");c();l();var Je=v(k(),1);var Sd=o(()=>{let{data:t}=en();return(0,Je.useMemo)(()=>{let e=t?.type,r=t?.name??"",n=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type===Xr.Ledger,accountName:r,accountType:e,chainAddresses:n,accountIdentifier:i}},[t])},"useAccountMetadata"),Cd=o(({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:n,accountSigner:i,storage:s,includeCallPayload:a})=>({accountSigner:i,accountIdentifier:n,networkID:t,unsignedTransaction:e,...a&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:rn.Sell,display:{summary:r}},storage:s}),"buildArgs"),wd=o(async(t,e,r,n,i,s,a)=>{try{if(!r)throw new Error("Gas estimation is required");if(!a)throw new Error("Bid summary is required");let{data:u,chainId:m,action:p}=e,{collectionName:f,marketplace:g,receiveAmount:y,currencySymbol:C,collectibleChainSymbol:S,bidTokenSymbol:w}=a,E=Zr(g),B={};p==="nft-approval"&&(B={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:f})},bottomLeft:{text:E}}),p==="sale"&&(B={topRight:{text:`+${y} ${C}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${f}`},bottomLeft:{text:E}}),p==="blur-swap"&&(B={topRight:{text:`+${y} ${S}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${y} ${w}`},bottomLeft:{text:E}});let L=zt.parse({type:$t.eip1559,to:u.to,from:u.from,data:u.data,chainId:V.getEVMNetworkIDValue(m),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),O=Cd({storage:n,accountSigner:i,pendingActivityRows:B,includeCallPayload:!1,networkID:m,unsignedTransaction:L,accountIdentifier:s.accountIdentifier}),K=await hs(O);return{type:e.type,data:K}}catch(u){return{type:e.type,error:u}}},"executeTransactionStep"),xd=o(async(t,e,r)=>{try{let{chainId:n,data:i}=t,{signatureData:s,signatureKind:a,postData:u}=i;if(a==="eip191"&&"message"in s){let m=await e.sign(r.accountIdentifier,{signingType:"message",chainType:Hr.EVM,message:s.message});if(m.status==="success")return await ke.api().post("/collectibles/v1/submit-signature",{chainId:n,signature:m.signature,postData:u}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(n){return{type:t.type,error:n}}},"executeSignatureStep"),Td=o(async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:n}=await e();return{type:t.type,data:n?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},"executeRefetchSteps"),Ed=[ie.enum.auth,ie.enum["nft-approval"],ie.enum.sale],vd="Steps are required",Id="These steps are not from the same bid",Sn=class extends Error{static{o(this,"StepsRequiredError")}message=vd},Cn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Id},Od=o((t,e,r,n,i,s,a)=>{let u=Ht(),m=he(),p=me(),f=qt(),[g,y]=(0,Je.useState)("idle"),[C,S]=(0,Je.useState)(null),[w,E]=(0,Je.useState)(null),{t:B}=Z(),L=Sd(),{chainAddresses:O,isLedger:K}=L;(0,Je.useEffect)(o(function(){g==="loading"&&hn(p,i)},"invalidateQueriesOnLoading"),[g,p,i]),(0,Je.useEffect)(o(function(){g==="success"&&i&&er(p,{id:i.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[g,p,O,i]);let J=o(()=>{y("idle"),S(null),E(null)},"reset"),st=a&&i?.receiveAmount?i.receiveAmount*a:void 0,re=o(async(Se,oe=new Map)=>{let at=Se??e;try{if(t&&t!==""&&t!==i?.orderId)throw new Cn;if(!Array.isArray(at)||at.length===0)throw new Sn;y("loading");for await(let ct of at){let{action:lt}=ct,ru=oe.get(lt)==="success",nu=lt===ie.enum.sale,Bi=lt===ie.enum.refetch,ou=Ed.some(Ft=>Ft===lt);if(ru)continue;Bi||oe.set(lt,"loading");let iu=o(async Ft=>{switch(Ft.type){case Ke.enum.transaction:return await wd(B,Ft,r,u,f,L,i);case Ke.enum.signature:return await xd(Ft,f,L);case Ke.enum.refetch:return await Td(Ft,n)}},"handleStep"),{type:Di,data:oo,error:Ui}=await iu(ct);if(ou&&Ui)throw Ui;if(oo&&(Bi||oe.set(lt,"success"),Di===Ke.enum.transaction&&nu&&E(oo),Di===Ke.enum.refetch))return await Zi(500),await re(oo,oe)}y("success"),m.capture("collectibleSellSuccess",{data:{bidSummary:i,usdSaleValue:st}})}catch(ct){let lt=ct?.message??"";(!(ct instanceof Sn)||!(ct instanceof Cn))&&(Ce.captureError(ct,ve.Collectibles),m.capture("collectibleSellFailure",{data:{bidSummary:i,usdSaleValue:st,errorMessage:lt}})),y("error"),S(ct)}},"executeSellEvmSteps");return{executeSellEvmSteps:re,reset:J,error:C,result:w,status:g,isLedger:K}},"useInstantSellExecuteEvmSteps");c();l();var Ad=.01,kd=o(t=>{let{fungible:e}=Fs({key:Ds(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(Ad):!1}},"useInstantSellSolanaGasEstimation");c();l();var ht=v(k(),1);c();l();var So=v(k(),1);c();l();c();l();var ca=o(t=>{let e=!1;return{collectibles:t.reduce((n,i)=>{let s=fo.safeParse(i);return s.success?n.push(s.data):e=!0,n},[]),containsParseFailure:e}},"parseCollectiblesResponse");var Md="collectibles",Bd=new Error("Failed to fetch collectibles for addresses");async function la(t){let e="/collectibles/v1";try{let n=(await ke.api().post(e,{addresses:t})).data,i=!!n.isTrimmed;if(!n.collectibles)throw Bd;let{collectibles:s,containsParseFailure:a}=ca(n.collectibles);return a&&Ce.captureError(new Error("collectibles failed to parse some items"),ve.Collectibles),{allCollectibles:s,isTrimmed:i}}catch(r){if(ut(r)){let n=r.response?.status;mt(r,n,Md)}throw r}}o(la,"getCollectibles");c();l();c();l();var da=o(t=>{let e=[];for(let[r,n]of t){n.sort((s,a)=>{let u=yr((s.name??"").toLowerCase()),m=yr((a.name??"").toLowerCase());if(u<m)return-1;if(u>m)return 1;let p=ua(s),f=ua(a);return p<f?-1:p>f?1:0});let[i]=n;i&&e.push({..."externalUrl"in i?{externalUrl:i.externalUrl}:void 0,...i.collection,items:n})}return e.sort((r,n)=>{if(r.items.length>n.items.length)return-1;if(n.items.length>r.items.length)return 1;let i=yr((r.name??r.id??"").toLowerCase()),s=yr((n.name??n.id??"").toLowerCase());return i<s?-1:i>s?1:0})},"sortCollections");function ua(t){let e=t.chainData;return le(e)?e.tokenAccount:He(e)?e.id:(qe(e),t.id)}o(ua,"extractChainDataSortKey");function ma(t){let e=new Map;for(let r of t){let n=r.collection.id,i=e.get(n)??[];i.push(r),e.set(n,i)}return da(e)}o(ma,"mapCollectiblesToCollections");var pa=o(({addresses:t,queryOptions:e={staleTime:pt.Short,refetchInterval:tr.Long,enabled:!0},select:r})=>{let n=me(),i=H.collections(t),s=t.length!==0&&t.every(a=>!V.isLocalNetworkID(a.networkID));return Me({enabled:s&&e.enabled,queryKey:i,gcTime:yn.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:a}]}){let[u]=await Promise.allSettled([la(a)]);if(u.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:m,isTrimmed:p}=u.status==="fulfilled"?u.value:{allCollectibles:[],isTrimmed:!1},f=ma(m),g=await Ys(n),y=Js(f,g);return{items:y,nrOfItems:y.reduce((C,S)=>C+S.items.length,0),isTrimmed:p}},select:r})},"useCollectionsQuery"),Ot=o(t=>pa({...t,select:(0,So.useCallback)(e=>e.items,[])}),"useCollections"),Dd=o(t=>pa({...t,select:(0,So.useCallback)(r=>r.isTrimmed,[])}).data??!1,"useCollectionsAreTrimmed");c();l();var fe=v(k(),1);c();l();var kt=v(k(),1);c();l();var ba=v(k(),1);c();l();var ga=v(k(),1);c();l();var Y;(function(t){t.AccountIdToVisibilitySettings="accountIdToCollectibleVisibilitySettings",t.HiddenCollections="hiddenCollections",t.PinnedCollections="pinnedCollections",t.UnhiddenCollections="unhiddenCollections"})(Y||(Y={}));var fa=2,Ud=h.object({version:h.literal(fa),value:h.record(h.array(h.object({id:h.string(),status:h.nativeEnum($)})))}),Pd=o((t,e)=>{let r=e,n=t;return r||n||null},"visibilityOverridesResolver"),jd=h.record(h.array(h.string())),ha=o((t,e)=>{let r=e,n=t;return r||n||null},"pinnedCollectionsResolver"),Rd=o(t=>{let e=t[Y.HiddenCollections],r=t[Y.UnhiddenCollections];if(!e&&!r)return null;let n={};return e&&Object.entries(e).forEach(([i,s])=>{n[i]||(n[i]=[]),s.forEach(a=>{n[i].push({id:a,status:$.Hidden})})}),r&&Object.entries(r).forEach(([i,s])=>{n[i]||(n[i]=[]);let a=new Set(n[i].map(u=>u.id));s.forEach(u=>{a.has(u)||n[i].push({id:u,status:$.Visible})})}),{version:fa,value:n}},"migrateVisibilityOverrides"),_d=o(t=>t[Y.PinnedCollections]??null,"migratePinnedCollections"),[Nd,wn,xn]=Ki("collectibles",[{key:Y.AccountIdToVisibilitySettings,type:"object",validator:Ud,nullable:!0,resolver:Pd,updateOn:"idle"},{key:Y.PinnedCollections,type:"object",validator:jd,nullable:!0,resolver:ha,updateOn:"idle"}]),wy=[{legacyKeys:[Y.HiddenCollections,Y.UnhiddenCollections],targetSchema:"collectibles",targetKey:Y.AccountIdToVisibilitySettings,migrate:Rd},{legacyKeys:[Y.PinnedCollections],targetSchema:"collectibles",targetKey:Y.PinnedCollections,migrate:_d}],Tn=o((...t)=>qi(Nd,...t),"useCollectiblesStorage");var xy={...Wi(Y.PinnedCollections,["collectibles","pinnedCollections"],ha)};var Ld=2e3,ir=class extends Ge{static{o(this,"UseSetCollectionVisibilityError")}constructor(e){super(e),this.name="UseSetCollectionVisibilityError"}};function Vd(t,e,r){let n=Object.values(t.value).reduce((s,a)=>s+a.length,0),i=r.filter(({id:s,visibility:a})=>a!==null&&!t.value[e]?.some(u=>u.id===s));if(i.length>0&&n+i.length>Ld){let s=i.some(a=>a.visibility===$.Hidden||a.visibility===$.HiddenSpam);throw new ir(s?"Too many ids hidden":"Too many ids unhidden")}}o(Vd,"checkVisibilityOverrideLimit");function Fd(t,e){let r=new Map(t.map(n=>[n.id,n]));for(let{id:n,visibility:i}of e)i===null?r.delete(n):r.set(n,{id:n,status:i});return Array.from(r.values())}o(Fd,"applyMutationsToMap");function $d(t,e){for(let{id:r,visibility:n}of t)n!==null&&e.capture(n.includes("hidden")?"collectionHidden":"collectionUnhidden",{data:{id:r}})}o($d,"captureVisibilityAnalytics");function En(t){let e=he(),r=me();return(0,ga.useCallback)(async(n,i)=>{let s=i?.checkLimit??!1;if(!t)return;let a=await xn(Y.AccountIdToVisibilitySettings)??{version:2,value:{}};s&&Vd(a,t,n);let u=a.value[t]??[],m=Fd(u,n),p={...a.value,[t]:m};await wn(Y.AccountIdToVisibilitySettings)({version:2,value:p}),$d(n,e),await Promise.allSettled([r.invalidateQueries({queryKey:H.visibilityOverrides(t)}),r.invalidateQueries({queryKey:H.hiddenCollections(t)}),r.invalidateQueries({queryKey:H.unhiddenCollections(t)})])},[t,e,r])}o(En,"useSetCollectionVisibility");function At(t){let e=En(t);return(0,ba.useCallback)(async r=>{let n=r.map(({id:i,visibility:s})=>({id:i,visibility:s}));await e(n,{checkLimit:!1})},[e])}o(At,"useSetVisibilityOverrides");c();l();var ya=v(k(),1);function pe(t){let e=Tn(Y.AccountIdToVisibilitySettings);return{data:(0,ya.useMemo)(()=>{if(!t)return new Map;let i=e?.value?.[t]??[];return new Map(i.map(s=>[s.id,s]))},[t,e]),isPending:!!t&&e===void 0}}o(pe,"useVisibilityOverrides");async function vn({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:a}){if(!n)return;let u=t.collection.id||t.id,m=e.get(u)?.status;try{let p=Ca(i,t.collection);await r([{id:u,visibility:p}]),await s({collectible:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){await a(p,{collectible:t,desiredVisibility:i})}}o(vn,"handleChangeVisibilityForCollectible");async function Sa({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:a}){if(!n)return;let u=t.id,m=e.get(u)?.status;try{let p=Ca(i,t);await r([{id:u,visibility:p}]),s&&await s({collection:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){a&&await a(p,{collection:t,desiredVisibility:i})}}o(Sa,"handleChangeVisibilityForCollection");function Ca(t,e){let{spamStatus:r}=e,n=vs({minimum:ee.NotVerified,spamStatus:r});switch(t){case $.HiddenSpam:if(n)return $.HiddenSpam;if(r===ee.PossibleSpam||r===ee.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case $.VisibleNotSpam:if(n)return null;if(r===ee.PossibleSpam||r===ee.Spam)return $.VisibleNotSpam;throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case $.Hidden:if(n)return $.Hidden;if(r===ee.PossibleSpam||r===ee.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case $.Visible:if(n)return null;if(r===ee.PossibleSpam||r===ee.Spam)return $.Visible;throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}o(Ca,"calculateNewVisibility");function ft(t){return{networkId:t.chain.id,chainId:V.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}o(ft,"computeCollectibleAnalyticsPayload");function wa({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await vn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.HiddenSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(wa,"useMarkAsSpam");function xa({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await vn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.VisibleNotSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(xa,"useMarkAsNotSpam");function Ta({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await vn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ta,"useMarkAsHidden");function Ea({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await vn({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ea,"useMarkAsVisible");function va({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await Sa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(va,"useMarkCollectionAsHidden");function Ia({accountId:t,onError:e,onSuccess:r}){let{data:n}=pe(t),i=At(t);return(0,kt.useCallback)(async s=>{await Sa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ia,"useMarkCollectionAsVisible");c();l();var Co=v(k(),1);var Oa=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=he(),i=(0,Co.useCallback)(({collectible:a,updatedVisibility:u})=>{u!==null&&n.capture("collectionHidden",{data:ft(a)}),t&&t.success(r("collectionHideSuccess"))},[r,t,n]),s=(0,Co.useCallback)((a,u)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return Ta({accountId:e,onSuccess:i,onError:s})},"useHideCollectible");c();l();var wo=v(k(),1);var Aa=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=he(),i=(0,wo.useCallback)(({collectible:a,updatedVisibility:u})=>{u!==null&&n.capture("collectionUnhidden",{data:ft(a)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,n]),s=(0,wo.useCallback)((a,u)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Ea({accountId:e,onSuccess:i,onError:s})},"useUnhideCollectible");function zd({accountId:t,collectible:e,toast:r}){let n=Oa({accountId:t,toast:r}),i=(0,fe.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Aa({accountId:t,toast:r}),a=(0,fe.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=pe(t),m=(0,fe.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,fe.useMemo)(()=>e?mn(m,{spamStatus:e.collection.spamStatus}):!1,[e,m]),f=(0,fe.useCallback)(()=>p?a():i(),[p,i,a]);return(0,fe.useMemo)(()=>({isHidden:p,onHideCollectible:i,onUnhideCollectible:a,onToggleHide:f}),[i,f,a,p])}o(zd,"useCollectiblesHideUnhide");function Gd(t){let{data:e,isPending:r}=pe(t),n=(0,fe.useCallback)(a=>{if(!a)return!1;let u=a.collection.id||a.id;return mo(e,{spamStatus:a.collection.spamStatus,key:u})},[e]),i=(0,fe.useCallback)(a=>{if(!a)return ee.NotVerified;let u=a.collection.id||a.id;return uo(e,{spamStatus:a.collection.spamStatus,key:u})},[e]),s=(0,fe.useCallback)(a=>xr(i(a)),[i]);return(0,fe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(Gd,"useGetCollectibleVisibilityStatus");function ka(t){let{data:e,isPending:r}=pe(t),n=(0,fe.useCallback)(a=>{if(!a)return!1;let u=a.id;return mo(e,{spamStatus:a.spamStatus,key:u})},[e]),i=(0,fe.useCallback)(a=>{if(!a)return ee.NotVerified;let u=a.id;return uo(e,{spamStatus:a.spamStatus,key:u})},[e]),s=(0,fe.useCallback)(a=>xr(i(a)),[i]);return(0,fe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(ka,"useGetCollectionVisibilityStatus");function Ma(t){let e=ka(t),r=va({accountId:t}),n=Ia({accountId:t});return(0,fe.useMemo)(()=>({...e,hideCollection:r,unhideCollection:n}),[e,r,n])}o(Ma,"useCollectionVisibilityOverrides");c();l();var Ba=v(k(),1);var Hd=o(t=>t.reduce((e,r)=>({...e,[r]:1}),{}),"convertIdArrayToObj");function xo({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n}){let i=[],s=[],a=[],u=[],m=Hd(e),p={};for(let g of t)n(g)&&r(g)?u.push(g):r(g)?s.push(g):m[g.id]?p[g.id]=g:n(g)?a.push(g):i.push(g);let f=[];for(let g of e)p[g]&&f.push(p[g]);return{collections:[...f,...i,...a],hiddenCollections:s,spamCollections:u}}o(xo,"orderedCollections");var qd=o(({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n})=>(0,Ba.useMemo)(()=>xo({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:n}),[t,r,n,e]),"useOrderedCollections");c();l();var In=v(k(),1);var To={location:0,distance:50,threshold:.3},kS={...To,keys:["name"]},MS={...To,keys:["name"]},BS={...To,keys:["name"]},vr=o((t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(n=>n.startsWith(r)||r.startsWith(n)&&e.toLowerCase().includes(r)).includes(!0)},"filterByWordPrefix");var Da=o((t,e)=>(0,In.useMemo)(()=>({collections:t.filter(n=>vr(e,n.name||n.items[0].name))}),[e,t]),"useSearchCollections"),Kd=o((t,e,r,n)=>{let i=(0,In.useMemo)(()=>t.flatMap(s=>s.items),[t]);return(0,In.useMemo)(()=>{let s=t.filter(p=>vr(n,p.name)),a=i.filter(p=>vr(n,p.name)),u=e.filter(p=>vr(n,p.name)),m=r.filter(p=>vr(n,p.name));return{collections:s,collectibles:a,hiddenCollections:u,spamCollections:m}},[n,i,t,e,r])},"useSearchCollectiblesStrict");var Wd=ne({seconds:10}),Qd=ne({seconds:5});function Xd({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:n=[],isLoading:i}=Ot({addresses:r,queryOptions:{staleTime:Qd,refetchInterval:Wd}}),[s,a]=(0,ht.useState)(""),u=Yi(s)??"",m=(0,ht.useCallback)(O=>a(typeof O=="string"?O:O.currentTarget.value),[a]),{getIsHidden:p,getIsSpam:f,getSpamStatus:g,hideCollection:y,unhideCollection:C,isLoading:S}=Ma(e),w=(0,ht.useMemo)(()=>{let{collections:O,hiddenCollections:K,spamCollections:J}=xo({allCollections:n,getIsHidden:p,getIsSpam:f});return[...O,...K,...J]},[n]),E=Da(w,u),B=(0,ht.useCallback)(({item:O,status:K})=>K==="show"?C(O):y(O),[C,y]);return{viewState:(0,ht.useMemo)(()=>({accountId:e,listItems:u?E.collections:w,searchQuery:s,debouncedSearchQuery:u,handleSearch:m,getIsHidden:p,getIsSpam:f,getSpamStatus:g,onToggleHidden:B}),[e,E.collections,s,m,w,B,p,f,g,u]),viewStateLoading:S||i}}o(Xd,"useManageCollectionsVisibilityViewState");c();l();var ue=v(au(),1);var Yd="token-account-min-balances",Ua=ue.struct([ue.blob(32,"mint"),ue.blob(32,"owner"),ue.nu64("amount"),ue.blob(93)]),QS=ue.struct([ue.blob(44),ue.u8("decimals"),ue.blob(37)]),Jd=ue.struct([ue.blob(679)]),Zd=ue.struct([ue.u8("edition"),ue.blob(281)]),em=o(async t=>t.getMinimumBalanceForRentExemption(Ua.span).then(de),"getTokenAccountCostAsync"),tm=o(async t=>de(await t.getMinimumBalanceForRentExemption(Jd.span)+await t.getMinimumBalanceForRentExemption(Zd.span)+await t.getMinimumBalanceForRentExemption(Ua.span)),"getMplTokenAccountCostAsync");function rm({tokenEdition:t,connection:e}){return Me({queryKey:[Yd,{tokenEdition:t}],queryFn:o(async()=>e?t===null||!fn(t)?em(e):tm(e):de(0),"queryFn")})}o(rm,"useTokenAccountMinBalance");c();l();var Pa=v(k(),1);var nm=o((t,e,r=!1,n)=>(0,Pa.useMemo)(()=>{if(t)return On({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:n??"medium",mediaTypeOverride:e})},[t,e,r,n]),"useCollectibleMediaURI"),On=o(({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:n})=>{let i=n??t.type;if((i==="image"||i==="other")&&t.previews?.[r]){let a=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${a}`}return t[i]?.url},"parseCollectibleMediaURI");c();l();c();l();var ja={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},Ra=o(t=>({...ja,resetBurnCollectible:o(()=>t({...ja}),"resetBurnCollectible"),setBurnCollectibleTx:o(e=>t({burnCollectibleTx:e}),"setBurnCollectibleTx"),setBurnCollectibleTxFee:o(e=>t({burnCollectibleTxFee:e}),"setBurnCollectibleTxFee")}),"createBurnCollectibleSlice");c();l();var _a={multichainSellCollectible:void 0},Na=o(t=>({..._a,resetMultichainSellCollectible:o(()=>t({..._a}),"resetMultichainSellCollectible"),setMultichainSellCollectible:o(e=>t({multichainSellCollectible:e}),"setMultichainSellCollectible")}),"createMultichainSellCollectibleSlice");c();l();var La={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},Va=o(t=>({...La,reset:o(()=>t({...La}),"reset"),setListCollectible:o(e=>t({listCollectible:e}),"setListCollectible"),setListPrice:o(e=>t({listCollectiblePrice:e}),"setListPrice"),setEditListPrice:o(e=>t({editListCollectiblePrice:e}),"setEditListPrice"),setUnlistCollectible:o(e=>t({unlistCollectible:e}),"setUnlistCollectible"),setTransactionURL:o(e=>t({transactionURL:e}),"setTransactionURL")}),"createListCollectibleSlice");c();l();var Fa={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},$a=o(t=>({...Fa,reset:o(()=>t({...Fa}),"reset"),setMultichainListCollectible:o(e=>t({multichainListCollectible:e}),"setMultichainListCollectible"),setMultichainListPrice:o(e=>t({multichainListCollectiblePrice:e}),"setMultichainListPrice"),setEditMultichainListPrice:o(e=>t({editMultichainListCollectiblePrice:e}),"setEditMultichainListPrice"),setUnlistMultichainCollectible:o(e=>t({unlistMultichainCollectible:e}),"setUnlistMultichainCollectible"),setMultichainTransactionURL:o(e=>t({multichainTransactionURL:e}),"setMultichainTransactionURL")}),"createMultichainListCollectibleSlice");var om=rs((t,e)=>({...Va(t,e),...Ra(t,e),...$a(t,e),...Na(t,e)}));c();l();c();l();var im=500,za=H.collections([])[1],sm=[za,H.hiddenCollections("")[1],H.unhiddenCollections("")[1],H.pinnedCollections("")[1]],am=o(t=>{let e=String(t.queryKey[1]);return e===za?t.state.data?.nrOfItems<=im:sm.includes(e)},"collectiblesShouldDehydrateQueryPredicate");c();l();var Ya=v(k(),1);c();l();c();l();c();l();var cm=5e4,lm="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",Ga={sendSuccessCondition:xe.SUBMISSION,collectibleDetailPrecision:7,collectibleDetailCtaBanner:o((t,e)=>{let r=t.chainData;if(Zt(r)&&e){let n=new de(r.utxoDetails.value??0);if(n.lte(cm))return;let i=Object.values(r.utxoDetails.satributes).reduce((m,{count:p})=>m+p,0),s=ao(i,V.bitcoin.tokenDecimals),a=ao(n,V.bitcoin.tokenDecimals),u=Ji(a.minus(s).times(e));return{title:Ie.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Ie.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:u}),iconColor:"spotPositive",modal:{title:Ie.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Ie.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:u}),buttonText:Ie.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:lm,iconColor:"spotPositive"}}}},"collectibleDetailCtaBanner")};c();l();var gt={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};c();l();var Ha={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};c();l();var qa={sendSuccessCondition:xe.CONFIRMATION,collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var um=new Hi({[Pe.Solana]:Ha,[Pe.Ethereum]:gt,[Pe.Polygon]:gt,[Pe.Base]:gt,[Pe.Monad]:gt,[Pe.Arbitrum]:gt,[Pe.Bitcoin]:Ga,[Pe.Sui]:qa,[Pe.Hypercore]:gt,[Pe.Hyperevm]:gt}),Mt=Gi(um);c();l();var Qa=v(k(),1);c();l();var Ka=v(so(),1);var Wa=o(({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Ka.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}},"formatTrait");var Xa=o(t=>(0,Qa.useMemo)(()=>{if(!t)return[];let e=t.chainData;return qe(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:n,description:i,url:s})=>({type:n.toUpperCase(),value:Ie.t(dm(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:n,description:i,iconUrl:s}})):t.attributes.map(({trait_type:r,value:n,display_type:i})=>({type:r,value:Wa({value:n,type:i})}))},[t]),"useCollectibleTraits"),dm=o((t,e,r)=>t===1?e:r,"getI18nKey");function mm(t){let{chain:e,owner:r}=t||{},n=e?.id,{data:i}=tn({address:r,networkID:n});Ls(i);let s=Xa(t),a=n?V.getChainID(n):void 0,u=a?zi(a):void 0,{data:m}=Us({query:u?{data:u}:void 0});return{ctaBanner:(0,Ya.useMemo)(()=>{if(!(!t||!m||!a))return Mt.get(a).collectibleDetailCtaBanner?.(t,m.price)},[a,t,m]),traits:s}}o(mm,"useCollectibleDetailViewState");c();l();c();l();c();l();c();l();var Ja=v(Kr(),1),Za=v(Kr(),1),ec=v(Li(),1);var tc=o(({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:n},feerate:i,utxoHash:s,utxoIndex:a})=>{let u={transactionHash:s,index:a,value:t,isSafeToSend:!1,owner:e},m=[u],p=[{address:r,value:parseFloat(u.value),script:(0,ec.toOutputScript)(r)}],f=ln(Wr(Gt.Bitcoin.Mainnet,e),n,p,i,m),g=new Za.Psbt({network:Ja.networks.bitcoin});if(f.type==="success"){let{inputs:y,outputs:C}=f;g.addInputs(y.map(S=>un(S,e,!0))),g.addOutputs(C)}return[g,g.data.inputs.map((y,C)=>({address:e,signingIndexes:[C]})),f.vb]},"createOrdinalsTransaction");c();l();var rc=v(Kr(),1),nc=v(Kr(),1),oc=v(Li(),1);var ic=o(({hash:t,index:e,value:r,senderAddress:n,recipient:i,utxoState:{safeToSendUtxos:s},feerate:a})=>{let u={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:n},m=[u],p=[{address:i,value:parseFloat(u.value),script:(0,oc.toOutputScript)(i)}],f=ln(Wr(Gt.Bitcoin.Mainnet,n),s,p,a,m),g=new nc.Psbt({network:rc.networks.bitcoin});if(f.type==="success"){let{inputs:C,outputs:S}=f;g.addInputs(C.map(w=>un(w,n,!0))),g.addOutputs(S)}let y=g.data.inputs.map((C,S)=>({address:n,signingIndexes:[S]}));return[g,y,f.vb]},"createRareSatsTransaction");function sc({chain:t,owner:e,chainData:r},{recipient:n,transactionSpeed:i=Kt.standard},{utxoState:s,transactionSpeedsToUnitCost:a}){let u,m,p;if(!e)throw new Error("Owner is required");let f=t.id,g=a[i],y=r,C=g,S=Math.round(C?us(C.btcPerKilobyte).toNumber():ls);if(Xs(y)){let{outputValue:w,utxoHash:E,utxoIndex:B}=y;[u,m,p]=tc({value:w,senderAddress:e,recipient:n,utxoState:s,feerate:S,utxoHash:E,utxoIndex:B})}else if(Zt(y)){let{utxoDetails:w}=y;[u,m,p]=ic({feerate:S,senderAddress:e,recipient:n,utxoState:s,hash:w.hash,index:w.index,value:w.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:f,psbt:u,vb:p,psbtChain:void 0,inputsToSign:m}}o(sc,"createBitcoinTransferTransaction");c();l();c();l();var pm=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],ac=new Error("Error populating ERC721 transaction data."),cc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s}=t,a=on(r,i,pm,e),u;try{let p=await a.populateTransaction.safeTransferFrom(e,n,new de(s).toString(10));if(p.data)u=p.data;else throw ac}catch{throw ac}return zt.parse({type:$t.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:u})},"createErc721TransferTransaction");c();l();var fm=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],lc=new Error("Error populating ERC1155 transaction data."),uc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s,value:a}=t,u=on(r,i,fm,e),m;try{let f=await u.populateTransaction.safeTransferFrom(e,n,new de(s).toString(10),a.toString(10),[]);if(f.data)m=f.data;else throw lc}catch{throw lc}return zt.parse({type:$t.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:m})},"createErc1155TransferTransaction");async function dc({chain:t,chainData:e,owner:r},{recipient:n,amountAsset:i}){let s=e,a=t.id,u;if(hm(s)){let{contract:m,id:p}=s;u=await cc({networkID:a,sender:r??"",destination:n,contractAddress:m,tokenID:p})}else if(gm(s)){let{contract:m,id:p}=s;u=await uc({networkID:a,sender:r??"",destination:n,contractAddress:m,tokenID:p,value:i??"1"})}else throw new Error(`Unsupported EVM collectible type: ${s.standard}`);return{networkID:a,unsignedTransaction:u}}o(dc,"createEvmTransferTransaction");function hm(t){return t.standard===Tr.ERC721}o(hm,"isErc721Collectible");function gm(t){return t.standard===Tr.ERC1155}o(gm,"isErc1155Collectible");c();l();c();l();c();l();var An=class extends Error{static{o(this,"CompressionProofError")}constructor(e){super(e),this.name="ProofError"}};async function mc({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",n;try{n=await ke.api().post(r,{chainId:t,address:e})}catch{let i=new An(`Failed to fetch proof for ${e} on network ${t}.`);throw Ce.captureError(i,ve.Collectibles),i}if(n.status!==200){let i=new An(`Failed to fetch proof for ${e} on network ${t}.`);throw Ce.captureError(i,ve.Collectibles),i}return await n.data}o(mc,"getCompressionProof");async function pc({networkID:t,mint:e,recipient:r}){let n=new U.Transaction,i=await mc({networkID:t,mintAddress:e});return n.add(await ss({...i,destination:r})),n}o(pc,"createCompressedTokenTransferTransaction");c();l();async function fc({networkID:t,destination:e,mint:r,senderAddress:n}){let{createComputeBudgetIx:i,createOCTferIX:s,getOCPMintState:a}=await nn(),u=Et(t),m=new U.PublicKey(r),p=await a(m,u);if(!p)throw new Error("Mint state not found for OCP transfer");Gr()&&console.log("This is a Magic Eden Open Creator Protocol Token");let f=new U.Transaction;f.add(i());let{destinationAddress:g}=await dn({solanaConnection:u,destination:new U.PublicKey(e),mint:m,programId:wr}),y=new U.PublicKey(n.address),{initAccountIX:C,transferIX:S}=await s({senderAddress:y,destinationAddress:g,mintAddress:m,mintState:p,connection:u});return C&&f.add(C),f.add(S),f}o(fc,"createOcpTokenTransferTransaction");c();l();async function hc({networkID:t,senderAddress:e,senderAccount:r,destination:n,mint:i}){let s=Et(t),a=new U.PublicKey(i),{destinationAddress:u,destinationAccount:m}=await dn({solanaConnection:s,destination:new U.PublicKey(n),mint:a,programId:wr}),{createPNFTTransferIX:p}=await nn(),f=new U.Transaction,g=new U.PublicKey(e.address),y=new U.PublicKey(r),C=m;if(!C){let[S,w]=await bs(g,u,a,wr);f.add(gs({account:u,owner:U.SystemProgram.programId})),f.add(S),C=w}return f.add(await p({senderAddress:g,tokenAccount:y,destinationAddress:u,destinationAccount:C,mintAddress:a,connection:s})),f}o(hc,"createProgrammableNftTransferTransaction");async function gc(t,e){let{chain:r,owner:n,decimals:i="0"}=t,s=parseFloat(i),{solana:a}=e,{memo:u,references:m}=a,p=r.id,f=Et(p),g={networkID:t.chain.id,addressType:Hr.Solana,address:t.owner??""};if(!le(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let y;if(bm(t))y=await pc({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(ym(t))y=await hc({networkID:p,senderAddress:g,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await Sm(t))y=await fc({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:g});else if(Cm(t)){let C=Ms(t),S=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();y=await Ss({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:g,senderAccount:t.chainData.tokenAccount,decimals:s,programId:t.chainData.programId,amount:S,references:m?.map(w=>w.toString())??[],memo:u??"",transferHookProgramId:C,connection:f})}else throw new Error("Unsupported transferSPLSolana args");return u&&y.add(ys({memoText:u})),y.feePayer=new U.PublicKey(n??""),y=await fs(y,{connection:f}),y.recentBlockhash=(await f.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[y]}}o(gc,"createSolanaTransferTransaction");function bm(t){return le(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}o(bm,"isCompressedTokenCollectible");function ym(t){return le(t.chainData)?"standard"in t.chainData&&(t.chainData.standard===vt.ProgrammableNonFungible||t.chainData.standard===vt.ProgrammableNonFungibleEdition):!1}o(ym,"isProgrammableNftCollectible");async function Sm(t){let{chainData:e}=t;if(!le(e))return!1;let{mint:r}=e,n=Et(t.chain.id);return await cs(new U.PublicKey(r),n)!==null}o(Sm,"isOcpTokenCollectible");function Cm(t){return le(t.chainData)}o(Cm,"isDefaultSplTokenCollectible");c();l();c();l();c();l();c();l();var bc="1.21.2",yc="1.43.0";c();l();var wm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},kn=class extends Error{static{o(this,"SuiHTTPTransportError")}},sr=class extends kn{static{o(this,"JsonRpcError")}constructor(e,r){super(e),this.code=r,this.type=wm[r]??"ServerError"}},Mn=class extends kn{static{o(this,"SuiHTTPStatusError")}constructor(e,r,n){super(e),this.status=r,this.statusText=n}};c();l();var Sc=o(t=>{throw TypeError(t)},"__typeError"),vo=o((t,e,r)=>e.has(t)||Sc("Cannot "+r),"__accessCheck"),te=o((t,e,r)=>(vo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Bt=o((t,e,r)=>e.has(t)?Sc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),ar=o((t,e,r,n)=>(vo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Cc=o((t,e,r)=>(vo(t,e,"access private method"),r),"__privateMethod"),xm=o((t,e,r,n)=>({set _(i){ar(t,e,i,r)},get _(){return te(t,e,n)}}),"__privateWrapper"),Dt,Ir,Ze,Ut,Or,cr,Bn,wc,xc;function Tm(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}o(Tm,"getWebsocketUrl");var Em={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Dn=class{static{o(this,"WebsocketClient")}constructor(e,r={}){if(Bt(this,Bn),Bt(this,Dt,0),Bt(this,Ir,0),Bt(this,Ze,null),Bt(this,Ut,null),Bt(this,Or,new Set),Bt(this,cr,new Map),this.endpoint=e,this.options={...Em,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Tm(this.endpoint))}async makeRequest(e,r){let n=await Cc(this,Bn,wc).call(this);return new Promise((i,s)=>{ar(this,Dt,te(this,Dt)+1),te(this,cr).set(te(this,Dt),{resolve:i,reject:s,timeout:setTimeout(()=>{te(this,cr).delete(te(this,Dt)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:te(this,Dt),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new sr(i.message,i.code);return s})}async subscribe(e){let r=new Eo(e);return te(this,Or).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};Dt=new WeakMap;Ir=new WeakMap;Ze=new WeakMap;Ut=new WeakMap;Or=new WeakMap;cr=new WeakMap;Bn=new WeakSet;wc=o(function(){return te(this,Ut)?te(this,Ut):(ar(this,Ut,new Promise(t=>{te(this,Ze)?.close(),ar(this,Ze,new this.options.WebSocketConstructor(this.endpoint)),te(this,Ze).addEventListener("open",()=>{ar(this,Ir,0),t(te(this,Ze))}),te(this,Ze).addEventListener("close",()=>{xm(this,Ir)._++,te(this,Ir)<=this.options.maxReconnects&&setTimeout(()=>{Cc(this,Bn,xc).call(this)},this.options.reconnectTimeout)}),te(this,Ze).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(n){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:n}));return}if("id"in r&&r.id!=null&&te(this,cr).has(r.id)){let{resolve:n,timeout:i}=te(this,cr).get(r.id);clearTimeout(i),n(r)}else if("params"in r){let{params:n}=r;te(this,Or).forEach(i=>{i.subscriptionId===n.subscription&&n.subscription===i.subscriptionId&&i.onMessage(n.result)})}})})),te(this,Ut))},"setupWebSocket_fn");xc=o(async function(){return te(this,Ze)?.close(),ar(this,Ut,null),Promise.allSettled([...te(this,Or)].map(t=>t.subscribe(this)))},"reconnect_fn");var Eo=class{static{o(this,"RpcSubscription")}constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var Tc=o(t=>{throw TypeError(t)},"__typeError"),Ao=o((t,e,r)=>e.has(t)||Tc("Cannot "+r),"__accessCheck"),De=o((t,e,r)=>(Ao(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Un=o((t,e,r)=>e.has(t)?Tc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Io=o((t,e,r,n)=>(Ao(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),vm=o((t,e,r)=>(Ao(t,e,"access private method"),r),"__privateMethod"),Ar,Re,kr,Oo,Ec,Pn=class{static{o(this,"SuiHTTPTransport")}constructor(e){Un(this,Oo),Un(this,Ar,0),Un(this,Re),Un(this,kr),Io(this,Re,e)}fetch(e,r){let n=De(this,Re).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){Io(this,Ar,De(this,Ar)+1);let r=await this.fetch(De(this,Re).rpc?.url??De(this,Re).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":bc,"Client-Target-Api-Version":yc,"Client-Request-Method":e.method,...De(this,Re).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:De(this,Ar),method:e.method,params:e.params})});if(!r.ok)throw new Mn(`Unexpected status code: ${r.status}`,r.status,r.statusText);let n=await r.json();if("error"in n&&n.error!=null)throw new sr(n.error.message,n.error.code);return n.result}async subscribe(e){let r=await vm(this,Oo,Ec).call(this).subscribe(e);return async()=>!!await r()}};Ar=new WeakMap;Re=new WeakMap;kr=new WeakMap;Oo=new WeakSet;Ec=o(function(){if(!De(this,kr)){let t=De(this,Re).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Io(this,kr,new Dn(De(this,Re).websocket?.url??De(this,Re).url,{WebSocketConstructor:t,...De(this,Re).websocket}))}return De(this,kr)},"getWebsocketClient_fn");c();l();c();l();c();l();c();l();c();l();function Im(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let f=t.charAt(p),g=f.charCodeAt(0);if(e[g]!==255)throw new TypeError(f+" is ambiguous");e[g]=p}let r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function a(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let f=0,g=0,y=0,C=p.length;for(;y!==C&&p[y]===0;)y++,f++;let S=(C-y)*s+1>>>0,w=new Uint8Array(S);for(;y!==C;){let L=p[y],O=0;for(let K=S-1;(L!==0||O<g)&&K!==-1;K--,O++)L+=256*w[K]>>>0,w[K]=L%r>>>0,L=L/r>>>0;if(L!==0)throw new Error("Non-zero carry");g=O,y++}let E=S-g;for(;E!==S&&w[E]===0;)E++;let B=n.repeat(f);for(;E<S;++E)B+=t.charAt(w[E]);return B}o(a,"encode");function u(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let f=0,g=0,y=0;for(;p[f]===n;)g++,f++;let C=(p.length-f)*i+1>>>0,S=new Uint8Array(C);for(;p[f];){let L=e[p.charCodeAt(f)];if(L===255)return;let O=0;for(let K=C-1;(L!==0||O<y)&&K!==-1;K--,O++)L+=r*S[K]>>>0,S[K]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");y=O,f++}let w=C-y;for(;w!==C&&S[w]===0;)w++;let E=new Uint8Array(g+(C-w)),B=g;for(;w!==C;)E[B++]=S[w++];return E}o(u,"decodeUnsafe");function m(p){let f=u(p);if(f)return f;throw new Error("Non-base"+r+" character")}return o(m,"decode"),{encode:a,decodeUnsafe:u,decode:m}}o(Im,"base");var vc=Im;var Om="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ko=vc(Om);var et=o(t=>ko.encode(t),"toBase58"),_e=o(t=>ko.decode(t),"fromBase58");c();l();function ge(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}o(ge,"fromBase64");var Mo=8192;function X(t){if(t.length<Mo)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Mo){let n=t.slice(r,r+Mo);e+=String.fromCharCode(...n)}return btoa(e)}o(X,"toBase64");c();l();c();l();function lr(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(i=>parseInt(i,16))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}o(lr,"fromHex");function We(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}o(We,"toHex");c();l();c();l();function Pt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}o(Pt,"ulebEncode");function Ic(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}o(Ic,"ulebDecode");var jn=class{static{o(this,"BcsReader")}constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Ic(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}};c();l();c();l();function Bo(t,e){switch(e){case"base58":return et(t);case"base64":return X(t);case"hex":return We(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}o(Bo,"encodeStr");function Rn(t,e=["<",">"]){let[r,n]=e,i=[],s="",a=0;for(let u=0;u<t.length;u++){let m=t[u];if(m===r&&a++,m===n&&a--,a===0&&m===","){i.push(s.trim()),s="";continue}s+=m}return i.push(s.trim()),i}o(Rn,"splitGenericParameters");var _n=class{static{o(this,"BcsWriter")}constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Do(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return Do(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return Do(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Pt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Bo(this.toBytes(),e)}};function Do(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}o(Do,"toLittleEndian");var Oc=o(t=>{throw TypeError(t)},"__typeError"),Ac=o((t,e,r)=>e.has(t)||Oc("Cannot "+r),"__accessCheck"),Ne=o((t,e,r)=>(Ac(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Ln=o((t,e,r)=>e.has(t)?Oc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Vn=o((t,e,r,n)=>(Ac(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),ur,Mr,Nn,bt,Am=class kc{static{o(this,"_BcsType")}constructor(e){Ln(this,ur),Ln(this,Mr),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Vn(this,ur,e.write),Vn(this,Mr,e.serialize??((r,n)=>{let i=new _n({initialSize:this.serializedSize(r)??void 0,...n});return Ne(this,ur).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Ne(this,ur).call(this,e,r)}serialize(e,r){return this.validate(e),new Fn(this,Ne(this,Mr).call(this,e,r))}parse(e){let r=new jn(e);return this.read(r)}fromHex(e){return this.parse(lr(e))}fromBase58(e){return this.parse(_e(e))}fromBase64(e){return this.parse(ge(e))}transform({name:e,input:r,output:n,validate:i}){return new kc({name:e??this.name,read:o(s=>n?n(this.read(s)):this.read(s),"read"),write:o((s,a)=>Ne(this,ur).call(this,r?r(s):s,a),"write"),serializedSize:o(s=>this.serializedSize(r?r(s):s),"serializedSize"),serialize:o((s,a)=>Ne(this,Mr).call(this,r?r(s):s,a),"serialize"),validate:o(s=>{i?.(s),this.validate(r?r(s):s)},"validate")})}};ur=new WeakMap;Mr=new WeakMap;var Ue=Am,Mc=Symbol.for("@mysten/serialized-bcs");function dr(t){return!!t&&typeof t=="object"&&t[Mc]===!0}o(dr,"isSerializedBcs");var Fn=class{static{o(this,"SerializedBcs")}constructor(e,r){Ln(this,Nn),Ln(this,bt),Vn(this,Nn,e),Vn(this,bt,r)}get[Mc](){return!0}toBytes(){return Ne(this,bt)}toHex(){return We(Ne(this,bt))}toBase64(){return X(Ne(this,bt))}toBase58(){return et(Ne(this,bt))}parse(){return Ne(this,Nn).parse(Ne(this,bt))}};Nn=new WeakMap;bt=new WeakMap;function Br({size:t,...e}){return new Ue({...e,serializedSize:o(()=>t,"serializedSize")})}o(Br,"fixedSizeBcsType");function $n({readMethod:t,writeMethod:e,...r}){return Br({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](n),"write"),validate:o(n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)},"validate")})}o($n,"uIntBcsType");function zn({readMethod:t,writeMethod:e,...r}){return Br({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](BigInt(n)),"write"),validate:o(n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)},"validate")})}o(zn,"bigUIntBcsType");function Bc({serialize:t,...e}){let r=new Ue({...e,serialize:t,write:o((n,i)=>{for(let s of r.serialize(n).toBytes())i.write8(s)},"write")});return r}o(Bc,"dynamicSizeBcsType");function Dc({toBytes:t,fromBytes:e,...r}){return new Ue({...r,read:o(n=>{let i=n.readULEB(),s=n.readBytes(i);return e(s)},"read"),write:o((n,i)=>{let s=t(n);i.writeULEB(s.length);for(let a=0;a<s.length;a++)i.write8(s[a])},"write"),serialize:o(n=>{let i=t(n),s=Pt(i.length),a=new Uint8Array(s.length+i.length);return a.set(s,0),a.set(i,s.length),a},"serialize"),validate:o(n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)},"validate")})}o(Dc,"stringLikeBcsType");function Uc(t){let e=null;function r(){return e||(e=t()),e}return o(r,"getType"),new Ue({name:"lazy",read:o(n=>r().read(n),"read"),serializedSize:o(n=>r().serializedSize(n),"serializedSize"),write:o((n,i)=>r().write(n,i),"write"),serialize:o((n,i)=>r().serialize(n,i).toBytes(),"serialize")})}o(Uc,"lazyBcsType");c();l();var d={u8(t){return $n({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return $n({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return $n({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return zn({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return zn({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return zn({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Br({name:"bool",size:1,read:o(e=>e.read8()===1,"read"),write:o((e,r)=>r.write8(e?1:0),"write"),...t,validate:o(e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)},"validate")})},uleb128(t){return Bc({name:"uleb128",read:o(e=>e.readULEB(),"read"),serialize:o(e=>Uint8Array.from(Pt(e)),"serialize"),...t})},bytes(t,e){return Br({name:`bytes[${t}]`,size:t,read:o(r=>r.readBytes(t),"read"),write:o((r,n)=>{let i=new Uint8Array(r);for(let s=0;s<t;s++)n.write8(i[s]??0)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)},"validate")})},byteVector(t){return new Ue({name:"bytesVector",read:o(e=>{let r=e.readULEB();return e.readBytes(r)},"read"),write:o((e,r)=>{let n=new Uint8Array(e);r.writeULEB(n.length);for(let i=0;i<n.length;i++)r.write8(n[i]??0)},"write"),...t,serializedSize:o(e=>{let r="length"in e?e.length:null;return r==null?null:Pt(r).length+r},"serializedSize"),validate:o(e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)},"validate")})},string(t){return Dc({name:"string",toBytes:o(e=>new TextEncoder().encode(e),"toBytes"),fromBytes:o(e=>new TextDecoder().decode(e),"fromBytes"),...t})},fixedArray(t,e,r){return new Ue({name:`${e.name}[${t}]`,read:o(n=>{let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},"read"),write:o((n,i)=>{for(let s of n)e.write(s,i)},"write"),...r,validate:o(n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)},"validate")})},option(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:o(e=>e==null?{None:!0}:{Some:e},"input"),output:o(e=>e.$kind==="Some"?e.Some:null,"output")})},vector(t,e){return new Ue({name:`vector<${t.name}>`,read:o(r=>{let n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},"read"),write:o((r,n)=>{n.writeULEB(r.length);for(let i of r)t.write(i,n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)},"validate")})},tuple(t,e){return new Ue({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:o(r=>{let n=0;for(let i=0;i<t.length;i++){let s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},"serializedSize"),read:o(r=>{let n=[];for(let i of t)n.push(i.read(r));return n},"read"),write:o((r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)},"validate")})},struct(t,e,r){let n=Object.entries(e);return new Ue({name:t,serializedSize:o(i=>{let s=0;for(let[a,u]of n){let m=u.serializedSize(i[a]);if(m==null)return null;s+=m}return s},"serializedSize"),read:o(i=>{let s={};for(let[a,u]of n)s[a]=u.read(i);return s},"read"),write:o((i,s)=>{for(let[a,u]of n)u.write(i[a],s)},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)},"validate")})},enum(t,e,r){let n=Object.entries(e);return new Ue({name:t,read:o(i=>{let s=i.readULEB(),a=n[s];if(!a)throw new TypeError(`Unknown value ${s} for enum ${t}`);let[u,m]=a;return{[u]:m?.read(i)??!0,$kind:u}},"read"),write:o((i,s)=>{let[a,u]=Object.entries(i).filter(([m])=>Object.hasOwn(e,m))[0];for(let m=0;m<n.length;m++){let[p,f]=n[m];if(p===a){s.writeULEB(m),f?.write(u,s);return}}},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let s=Object.keys(i).filter(u=>i[u]!==void 0&&Object.hasOwn(e,u));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);let[a]=s;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)},"validate")})},map(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o(r=>[...r.entries()],"input"),output:o(r=>{let n=new Map;for(let[i,s]of r)n.set(i,s);return n},"output")})},lazy(t){return Uc(t)}};c();l();c();l();c();l();c();l();c();l();var km=32;function Gn(t){try{return _e(t).length===km}catch{return!1}}o(Gn,"isValidTransactionDigest");var Dr=32;function Oe(t){return Mm(t)&&Bm(t)===Dr}o(Oe,"isValidSuiAddress");function mr(t){return Oe(t)}o(mr,"isValidSuiObjectId");function D(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Dr*2,"0")}`}o(D,"normalizeSuiAddress");function Te(t,e=!1){return D(t,e)}o(Te,"normalizeSuiObjectId");function Mm(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}o(Mm,"isHex");function Bm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}o(Bm,"getHexByteLength");c();l();var Dm=/^vector<(.+)>$/,Um=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,tt=class t{static{o(this,"TypeTagSerializer")}static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match(Dm);if(n)return{vector:t.parseFromStr(n[1],r)};let i=e.match(Um);if(i)return{struct:{address:r?D(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Rn(e).map(n=>t.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,n=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function Pm(t){return d.u64({name:"unsafe_u64",...t}).transform({input:o(e=>e,"input"),output:o(e=>Number(e),"output")})}o(Pm,"unsafe_u64");function jm(t){return d.enum("Option",{None:null,Some:t})}o(jm,"optionEnum");var G=d.bytes(Dr).transform({validate:o(t=>{let e=typeof t=="string"?t:We(t);if(!e||!Oe(D(e)))throw new Error(`Invalid Sui address ${e}`)},"validate"),input:o(t=>typeof t=="string"?lr(D(t)):t,"input"),output:o(t=>D(We(t)),"output")}),Ae=d.vector(d.u8()).transform({name:"ObjectDigest",input:o(t=>_e(t),"input"),output:o(t=>et(new Uint8Array(t)),"output"),validate:o(t=>{if(_e(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),Ee=d.struct("SuiObjectRef",{objectId:G,version:d.u64(),digest:Ae}),Uo=d.struct("SharedObjectRef",{objectId:G,initialSharedVersion:d.u64(),mutable:d.bool()}),Po=d.enum("ObjectArg",{ImmOrOwnedObject:Ee,SharedObject:Uo,Receiving:Ee}),jo=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?ge(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})}),Object:Po}),Ro=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>Ro),struct:d.lazy(()=>$o),u16:null,u32:null,u256:null}),Hn=Ro.transform({input:o(t=>typeof t=="string"?tt.parseFromStr(t,!0):t,"input"),output:o(t=>tt.tagToString(t),"output")}),Le=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),_o=d.struct("ProgrammableMoveCall",{package:G,module:d.string(),function:d.string(),typeArguments:d.vector(Hn),arguments:d.vector(Le)}),No=d.enum("Command",{MoveCall:_o,TransferObjects:d.struct("TransferObjects",{objects:d.vector(Le),address:Le}),SplitCoins:d.struct("SplitCoins",{coin:Le,amounts:d.vector(Le)}),MergeCoins:d.struct("MergeCoins",{destination:Le,sources:d.vector(Le)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?ge(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})),dependencies:d.vector(G)}),MakeMoveVec:d.struct("MakeMoveVec",{type:jm(Hn).transform({input:o(t=>t===null?{None:!0}:{Some:t},"input"),output:o(t=>t.Some??null,"output")}),elements:d.vector(Le)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?ge(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})),dependencies:d.vector(G),package:G,ticket:Le})}),Lo=d.struct("ProgrammableTransaction",{inputs:d.vector(jo),commands:d.vector(No)}),Vo=d.enum("TransactionKind",{ProgrammableTransaction:Lo,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Fo=d.enum("TransactionExpiration",{None:null,Epoch:Pm()}),$o=d.struct("StructTag",{address:G,module:d.string(),name:d.string(),typeParams:d.vector(Ro)}),zo=d.struct("GasData",{payment:d.vector(Ee),owner:G,price:d.u64(),budget:d.u64()}),Go=d.struct("TransactionDataV1",{kind:Vo,sender:G,gasData:zo,expiration:Fo}),Ho=d.enum("TransactionData",{V1:Go}),qo=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ko=d.enum("IntentVersion",{V0:null}),Wo=d.enum("AppId",{Sui:null}),Qo=d.struct("Intent",{scope:qo,version:Ko,appId:Wo});function Xo(t){return d.struct(`IntentMessage<${t.name}>`,{intent:Qo,value:t})}o(Xo,"IntentMessage");var Yo=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8())}),Jo=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8())}),Zo=d.struct("MultiSigPkMap",{pubKey:Jo,weight:d.u8()}),ei=d.struct("MultiSigPublicKey",{pk_map:d.vector(Zo),threshold:d.u16()}),Pc=d.struct("MultiSig",{sigs:d.vector(Yo),bitmap:d.u16(),multisig_pk:ei}),Rm=d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?ge(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")}),ti=d.struct("SenderSignedTransaction",{intentMessage:Xo(Ho),txSignatures:d.vector(Rm)}),jc=d.vector(ti,{name:"SenderSignedData"}),Rc=d.struct("PasskeyAuthenticator",{authenticatorData:d.vector(d.u8()),clientDataJson:d.string(),userSignature:d.vector(d.u8())});c();l();var _m=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:G}),NotAPackage:d.struct("NotAPackage",{objectId:G}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:G,ticketId:G})}),Nm=d.struct("ModuleId",{address:G,name:d.string()}),_c=d.struct("MoveLocation",{module:Nm,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),Lm=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Vm=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Fm=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:G}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option(_c),MoveAbort:d.tuple([_c,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:Lm}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:Vm}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:_m}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(G)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:G,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Nc=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:Fm,command:d.option(d.u64())})}),Lc=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),pr=d.enum("Owner",{AddressOwner:G,ObjectOwner:G,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null}),$m=d.struct("TransactionEffectsV1",{status:Nc,executedEpoch:d.u64(),gasUsed:Lc,modifiedAtVersions:d.vector(d.tuple([G,d.u64()])),sharedObjects:d.vector(Ee),transactionDigest:Ae,created:d.vector(d.tuple([Ee,pr])),mutated:d.vector(d.tuple([Ee,pr])),unwrapped:d.vector(d.tuple([Ee,pr])),deleted:d.vector(Ee),unwrappedThenDeleted:d.vector(Ee),wrapped:d.vector(Ee),gasObject:d.tuple([Ee,pr]),eventsDigest:d.option(Ae),dependencies:d.vector(Ae)}),ri=d.tuple([d.u64(),Ae]),zm=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([ri,pr])}),Gm=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([Ae,pr]),PackageWrite:ri}),Hm=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),qm=d.struct("EffectsObjectChange",{inputState:zm,outputState:Gm,idOperation:Hm}),Km=d.enum("UnchangedSharedKind",{ReadOnlyRoot:ri,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),Wm=d.struct("TransactionEffectsV2",{status:Nc,executedEpoch:d.u64(),gasUsed:Lc,transactionDigest:Ae,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option(Ae),dependencies:d.vector(Ae),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([G,qm])),unchangedSharedObjects:d.vector(d.tuple([G,Km])),auxDataDigest:d.option(Ae)}),Vc=d.enum("TransactionEffects",{V1:$m,V2:Wm});c();l();function fr(t){switch(t){case"u8":return d.u8();case"u16":return d.u16();case"u32":return d.u32();case"u64":return d.u64();case"u128":return d.u128();case"u256":return d.u256();case"bool":return d.bool();case"string":return d.string();case"id":case"address":return G}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,n]=e.slice(1);return r==="vector"?d.vector(fr(n)):d.option(fr(n))}throw new Error(`Invalid Pure type name: ${t}`)}o(fr,"pureBcsSchemaFromTypeName");var P={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:G,AppId:Wo,Argument:Le,CallArg:jo,CompressedSignature:Yo,GasData:zo,Intent:Qo,IntentMessage:Xo,IntentScope:qo,IntentVersion:Ko,MultiSig:Pc,MultiSigPkMap:Zo,MultiSigPublicKey:ei,ObjectArg:Po,ObjectDigest:Ae,ProgrammableMoveCall:_o,ProgrammableTransaction:Lo,PublicKey:Jo,SenderSignedData:jc,SenderSignedTransaction:ti,SharedObjectRef:Uo,StructTag:$o,SuiObjectRef:Ee,Command:No,TransactionData:Ho,TransactionDataV1:Go,TransactionExpiration:Fo,TransactionKind:Vo,TypeTag:Hn,TransactionEffects:Vc,PasskeyAuthenticator:Rc};c();l();c();l();var Qm=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Xm=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Fc(t,e="at"){let r=t.toLowerCase(),n;if(r.includes("@")){if(!Qm.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[i,s]=r.split("@");n=[...i?i.split("."):[],s]}else{if(!Xm.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}o(Fc,"normalizeSuiNSName");c();l();var Ym=BigInt(1e9),ni="0x1",qn="0x2";var Jm=Te("0x6");var oi=`${qn}::sui::SUI`,Zm=Te("0x5");c();l();c();l();c();l();c();l();function ep(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}o(ep,"isBytes");function Wn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}o(Wn,"anumber");function Qn(t,...e){if(!ep(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}o(Qn,"abytes");function ii(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}o(ii,"aexists");function $c(t,e){Qn(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}o($c,"aoutput");function Ur(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}o(Ur,"u32");function Xn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}o(Xn,"clean");var zc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Gc(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}o(Gc,"byteSwap");var Qe=zc?t=>t:t=>Gc(t);function tp(t){for(let e=0;e<t.length;e++)t[e]=Gc(t[e]);return t}o(tp,"byteSwap32");var jt=zc?t=>t:tp;function rp(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}o(rp,"utf8ToBytes");function hr(t){return typeof t=="string"&&(t=rp(t)),Qn(t),t}o(hr,"toBytes");var Kn=class{static{o(this,"Hash")}};function Hc(t){let e=o((n,i)=>t(i).update(hr(n)).digest(),"hashC"),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}o(Hc,"createOptHasher");var qc=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);c();l();var Yn=BigInt(4294967295),Kc=BigInt(32);function Wc(t,e=!1){return e?{h:Number(t&Yn),l:Number(t>>Kc&Yn)}:{h:Number(t>>Kc&Yn)|0,l:Number(t&Yn)|0}}o(Wc,"fromBig");var si=o((t,e,r)=>t>>>r|e<<32-r,"rotrSH"),ai=o((t,e,r)=>t<<32-r|e>>>r,"rotrSL"),Qc=o((t,e,r)=>t<<64-r|e>>>r-32,"rotrBH"),Xc=o((t,e,r)=>t>>>r-32|e<<64-r,"rotrBL"),Yc=o((t,e)=>e,"rotr32H"),Jc=o((t,e)=>t,"rotr32L");function ci(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}o(ci,"add");var li=o((t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),"add3L"),ui=o((t,e,r,n)=>e+r+n+(t/2**32|0)|0,"add3H");var ae=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function yt(t,e,r,n,i,s){let a=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],g=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],E=li(m,f,a);p=ui(E,p,g,u),m=E|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:Yc(w,S),Dl:Jc(w,S)},{h:C,l:y}=ci(C,y,w,S),{Bh:g,Bl:f}={Bh:g^C,Bl:f^y},{Bh:g,Bl:f}={Bh:si(g,f,24),Bl:ai(g,f,24)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=g,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(yt,"G1b");function St(t,e,r,n,i,s){let a=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],g=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],E=li(m,f,a);p=ui(E,p,g,u),m=E|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:si(w,S,16),Dl:ai(w,S,16)},{h:C,l:y}=ci(C,y,w,S),{Bh:g,Bl:f}={Bh:g^C,Bl:f^y},{Bh:g,Bl:f}={Bh:Qc(g,f,63),Bl:Xc(g,f,63)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=g,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(St,"G2b");function op(t,e={},r,n,i){if(Wn(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");let{key:s,salt:a,personalization:u}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(a!==void 0&&a.length!==n)throw new Error("salt must be undefined or "+n);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}o(op,"checkBlake2Opts");var di=class extends Kn{static{o(this,"BLAKE2")}constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Wn(e),Wn(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Ur(this.buffer)}update(e){ii(this),e=hr(e),Qn(e);let{blockLen:r,buffer:n,buffer32:i}=this,s=e.length,a=e.byteOffset,u=e.buffer;for(let m=0;m<s;){this.pos===r&&(jt(i),this.compress(i,0,!1),jt(i),this.pos=0);let p=Math.min(r-this.pos,s-m),f=a+m;if(p===r&&!(f%4)&&m+p<s){let g=new Uint32Array(u,f,Math.floor((s-m)/4));jt(g);for(let y=0;m+r<s;y+=i.length,m+=r)this.length+=r,this.compress(g,y,!1);jt(g);continue}n.set(e.subarray(m,m+p),this.pos),this.pos+=p,this.length+=p,m+=p}return this}digestInto(e){ii(this),$c(e,this);let{pos:r,buffer32:n}=this;this.finished=!0,Xn(this.buffer.subarray(r)),jt(n),this.compress(n,0,!0),jt(n);let i=Ur(e);this.get().forEach((s,a)=>i[a]=Qe(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:a,pos:u}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=n,e.pos=u,e.outputLen=a,e}clone(){return this._cloneInto()}},Jn=class extends di{static{o(this,"BLAKE2b")}constructor(e={}){let r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=ae[0]|0,this.v0h=ae[1]|0,this.v1l=ae[2]|0,this.v1h=ae[3]|0,this.v2l=ae[4]|0,this.v2h=ae[5]|0,this.v3l=ae[6]|0,this.v3h=ae[7]|0,this.v4l=ae[8]|0,this.v4h=ae[9]|0,this.v5l=ae[10]|0,this.v5h=ae[11]|0,this.v6l=ae[12]|0,this.v6h=ae[13]|0,this.v7l=ae[14]|0,this.v7h=ae[15]|0,op(r,e,64,16,16);let{key:n,personalization:i,salt:s}=e,a=0;if(n!==void 0&&(n=hr(n),a=n.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,s!==void 0){s=hr(s);let u=Ur(s);this.v4l^=Qe(u[0]),this.v4h^=Qe(u[1]),this.v5l^=Qe(u[2]),this.v5h^=Qe(u[3])}if(i!==void 0){i=hr(i);let u=Ur(i);this.v6l^=Qe(u[0]),this.v6h^=Qe(u[1]),this.v7l^=Qe(u[2]),this.v7h^=Qe(u[3])}if(n!==void 0){let u=new Uint8Array(this.blockLen);u.set(n),this.update(u)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:a,v3l:u,v3h:m,v4l:p,v4h:f,v5l:g,v5h:y,v6l:C,v6h:S,v7l:w,v7h:E}=this;return[e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,E]}set(e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,E){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=a|0,this.v3l=u|0,this.v3h=m|0,this.v4l=p|0,this.v4h=f|0,this.v5l=g|0,this.v5h=y|0,this.v6l=C|0,this.v6h=S|0,this.v7l=w|0,this.v7h=E|0}compress(e,r,n){this.get().forEach((m,p)=>T[p]=m),T.set(ae,16);let{h:i,l:s}=Wc(BigInt(this.length));T[24]=ae[8]^s,T[25]=ae[9]^i,n&&(T[28]=~T[28],T[29]=~T[29]);let a=0,u=qc;for(let m=0;m<12;m++)yt(0,4,8,12,e,r+2*u[a++]),St(0,4,8,12,e,r+2*u[a++]),yt(1,5,9,13,e,r+2*u[a++]),St(1,5,9,13,e,r+2*u[a++]),yt(2,6,10,14,e,r+2*u[a++]),St(2,6,10,14,e,r+2*u[a++]),yt(3,7,11,15,e,r+2*u[a++]),St(3,7,11,15,e,r+2*u[a++]),yt(0,5,10,15,e,r+2*u[a++]),St(0,5,10,15,e,r+2*u[a++]),yt(1,6,11,12,e,r+2*u[a++]),St(1,6,11,12,e,r+2*u[a++]),yt(2,7,8,13,e,r+2*u[a++]),St(2,7,8,13,e,r+2*u[a++]),yt(3,4,9,14,e,r+2*u[a++]),St(3,4,9,14,e,r+2*u[a++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],Xn(T)}destroy(){this.destroyed=!0,Xn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Zc=Hc(t=>new Jn(t));var el=Zc;var ip="object",sp="ID",ap="ascii",cp="String",lp="string",up="String",dp="option",mp="Option";function tl(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&D(e.package)===D("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}o(tl,"isTxContext");function Zn(t){if(typeof t=="string")switch(t){case"address":return P.Address;case"bool":return P.Bool;case"u8":return P.U8;case"u16":return P.U16;case"u32":return P.U32;case"u64":return P.U64;case"u128":return P.U128;case"u256":return P.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return P.vector(P.U8).transform({input:o(r=>typeof r=="string"?new TextEncoder().encode(r):r,"input"),output:o(r=>r,"output")});let e=Zn(t.vector);return e?P.vector(e):null}if("datatype"in t){let e=D(t.datatype.package);if(e===D(ni)){if(t.datatype.module===ap&&t.datatype.type===cp)return P.String;if(t.datatype.module===lp&&t.datatype.type===up)return P.String;if(t.datatype.module===dp&&t.datatype.type===mp){let r=Zn(t.datatype.typeParameters[0]);return r?P.vector(r):null}}if(e===D(qn)&&t.datatype.module===ip&&t.datatype.type===sp)return P.Address}return null}o(Zn,"getPureBcsSchema");function rl(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Pr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Pr(t.MutableReference)}:{ref:null,body:Pr(t)}}o(rl,"normalizedTypeToMoveTypeSignature");function Pr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Pr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Pr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}o(Pr,"normalizedTypeToMoveTypeSignatureBody");c();l();function pp(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?X(t):t.toBase64()}}}o(pp,"Pure");var Ve={Pure:pp,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:D(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:D(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:D(t)}}}}};c();l();c();l();function wt(t){let e=Object.entries(t).map(([r,n])=>x({[r]:n}));return F(se(e),sn(r=>({...r,$kind:Object.keys(r)[0]})))}o(wt,"safeEnum");var Rt=F(M(),sn(t=>D(t)),Wt(Oe)),ye=Rt,Ct=M(),be=F(se([M(),F(W(),Q())]),Wt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Fe=x({objectId:Rt,version:be,digest:M()}),q=F(se([x({GasCoin:A(!0)}),x({Input:F(W(),Q()),type:ce(A("pure"))}),x({Input:F(W(),Q()),type:ce(A("object"))}),x({Result:F(W(),Q())}),x({NestedResult:an([F(W(),Q()),F(W(),Q())])})]),sn(t=>({...t,$kind:Object.keys(t)[0]}))),fp=x({budget:_(be),price:_(be),owner:_(Rt),payment:_(I(Fe))}),UI=x({address:M(),module:M(),name:M(),typeParams:I(M())}),mi=se([A("address"),A("bool"),A("u8"),A("u16"),A("u32"),A("u64"),A("u128"),A("u256"),x({vector:Xt(()=>mi)}),x({datatype:x({package:M(),module:M(),type:M(),typeParameters:I(Xt(()=>mi))})}),x({typeParameter:F(W(),Q())})]),hp=x({ref:_(se([A("&"),A("&mut")])),body:mi}),gp=x({package:ye,module:M(),function:M(),typeArguments:I(M()),arguments:I(q),_argumentTypes:ce(_(I(hp)))}),bp=x({name:M(),inputs:Yt(M(),se([q,I(q)])),data:Yt(M(),Ye())}),yp=wt({MoveCall:gp,TransferObjects:x({objects:I(q),address:q}),SplitCoins:x({coin:q,amounts:I(q)}),MergeCoins:x({destination:q,sources:I(q)}),Publish:x({modules:I(Ct),dependencies:I(ye)}),MakeMoveVec:x({type:_(M()),elements:I(q)}),Upgrade:x({modules:I(Ct),dependencies:I(ye),package:ye,ticket:q}),$Intent:bp}),nl=wt({ImmOrOwnedObject:Fe,SharedObject:x({objectId:ye,initialSharedVersion:be,mutable:Qt()}),Receiving:Fe}),Sp=wt({Object:nl,Pure:x({bytes:Ct}),UnresolvedPure:x({value:Ye()}),UnresolvedObject:x({objectId:ye,version:ce(_(be)),digest:ce(_(M())),initialSharedVersion:ce(_(be))})}),pi=wt({Object:nl,Pure:x({bytes:Ct})}),fi=wt({None:A(!0),Epoch:be}),gr=x({version:A(2),sender:dt(Rt),expiration:dt(fi),gasData:fp,inputs:I(Sp),commands:I(yp)});var xt={MoveCall(t){let[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>z(q,r)),address:z(q,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(q,t),amounts:e.map(r=>z(q,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(q,t),sources:e.map(r=>z(q,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:X(new Uint8Array(r))),dependencies:e.map(r=>Te(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:X(new Uint8Array(i))),dependencies:e.map(i=>Te(i)),package:r,ticket:z(q,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>z(q,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Array.isArray(i)?i.map(s=>z(q,s)):z(q,i)])),data:r}}}};c();l();c();l();var hi=x({digest:M(),objectId:M(),version:se([F(W(),Q()),M(),co()])}),Cp=wt({ImmOrOwned:hi,Shared:x({objectId:ye,initialSharedVersion:be,mutable:Qt()}),Receiving:hi}),ol=wt({Object:Cp,Pure:I(F(W(),Q()))}),sl=se([x({kind:A("Input"),index:F(W(),Q()),value:Ye(),type:ce(A("object"))}),x({kind:A("Input"),index:F(W(),Q()),value:Ye(),type:A("pure")})]),wp=se([x({Epoch:F(W(),Q())}),x({None:_(A(!0))})]),il=F(se([W(),M(),co()]),Wt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),gi=se([x({bool:_(A(!0))}),x({u8:_(A(!0))}),x({u64:_(A(!0))}),x({u128:_(A(!0))}),x({address:_(A(!0))}),x({signer:_(A(!0))}),x({vector:Xt(()=>gi)}),x({struct:Xt(()=>xp)}),x({u16:_(A(!0))}),x({u32:_(A(!0))}),x({u256:_(A(!0))})]),xp=x({address:M(),module:M(),name:M(),typeParams:I(gi)}),Tp=x({budget:ce(il),price:ce(il),payment:ce(I(hi)),owner:ce(M())}),Ep=[sl,x({kind:A("GasCoin")}),x({kind:A("Result"),index:F(W(),Q())}),x({kind:A("NestedResult"),index:F(W(),Q()),resultIndex:F(W(),Q())})],ot=se([...Ep]),vp=x({kind:A("MoveCall"),target:F(M(),Wt(t=>t.split("::").length===3)),typeArguments:I(M()),arguments:I(ot)}),Ip=x({kind:A("TransferObjects"),objects:I(ot),address:ot}),Op=x({kind:A("SplitCoins"),coin:ot,amounts:I(ot)}),Ap=x({kind:A("MergeCoins"),destination:ot,sources:I(ot)}),kp=x({kind:A("MakeMoveVec"),type:se([x({Some:gi}),x({None:_(A(!0))})]),objects:I(ot)}),Mp=x({kind:A("Publish"),modules:I(I(F(W(),Q()))),dependencies:I(M())}),Bp=x({kind:A("Upgrade"),modules:I(I(F(W(),Q()))),dependencies:I(M()),packageId:M(),ticket:ot}),Dp=[vp,Ip,Op,Ap,Mp,Bp,kp],Up=se([...Dp]),QI=x({version:A(1),sender:ce(M()),expiration:dt(wp),gasConfig:Tp,inputs:I(sl),transactions:I(Up)});function bi(t){let e=t.inputs.map((r,n)=>{if(r.Object)return{kind:"Input",index:n,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(ge(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:tt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(n=>rt(n,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:rt(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(n=>rt(n,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(n=>rt(n,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(n=>Array.from(ge(n))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:rt(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(n=>rt(n,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(n=>rt(n,e)),address:rt(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(n=>Array.from(ge(n))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:rt(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}o(bi,"serializeV1TransactionData");function rt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}o(rt,"convertTransactionArgument");function al(t){return z(gr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(Cr(ol,e.value)){let r=z(ol,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:X(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?tt.tagToString(e.type.Some):null,elements:e.objects.map(r=>nt(r))}};case"MergeCoins":return{MergeCoins:{destination:nt(e.destination),sources:e.sources.map(r=>nt(r))}};case"MoveCall":{let[r,n,i]=e.target.split("::");return{MoveCall:{package:r,module:n,function:i,typeArguments:e.typeArguments,arguments:e.arguments.map(s=>nt(s))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>X(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:nt(e.coin),amounts:e.amounts.map(r=>nt(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>nt(r)),address:nt(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>X(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:nt(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}o(al,"transactionDataFromV1");function nt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}o(nt,"parseV1TransactionArgument");c();l();function jr(t){return se(Object.entries(t).map(([e,r])=>x({[e]:r})))}o(jr,"enumUnion");var $e=jr({GasCoin:A(!0),Input:F(W(),Q()),Result:F(W(),Q()),NestedResult:an([F(W(),Q()),F(W(),Q())])}),Pp=x({budget:_(be),price:_(be),owner:_(Rt),payment:_(I(Fe))}),jp=x({package:ye,module:M(),function:M(),typeArguments:I(M()),arguments:I($e)}),Rp=x({name:M(),inputs:Yt(M(),se([$e,I($e)])),data:Yt(M(),Ye())}),_p=jr({MoveCall:jp,TransferObjects:x({objects:I($e),address:$e}),SplitCoins:x({coin:$e,amounts:I($e)}),MergeCoins:x({destination:$e,sources:I($e)}),Publish:x({modules:I(Ct),dependencies:I(ye)}),MakeMoveVec:x({type:_(M()),elements:I($e)}),Upgrade:x({modules:I(Ct),dependencies:I(ye),package:ye,ticket:$e}),$Intent:Rp}),Np=jr({ImmOrOwnedObject:Fe,SharedObject:x({objectId:ye,initialSharedVersion:be,mutable:Qt()}),Receiving:Fe}),Lp=jr({Object:Np,Pure:x({bytes:Ct}),UnresolvedPure:x({value:Ye()}),UnresolvedObject:x({objectId:ye,version:ce(_(be)),digest:ce(_(M())),initialSharedVersion:ce(_(be))})}),Vp=jr({None:A(!0),Epoch:be}),cl=x({version:A(2),sender:dt(Rt),expiration:dt(Vp),gasData:Pp,inputs:I(Lp),commands:I(_p)});c();l();var Fp=50,$p=1000n,zp=5e10;async function ul(t,e,r){return await Wp(t,e),await Kp(t,e),e.onlyTransactionKind||(await Gp(t,e),await Hp(t,e),await qp(t,e)),await Qp(t),await r()}o(ul,"resolveTransactionData");async function Gp(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Rr(e).getReferenceGasPrice()))}o(Gp,"setGasPrice");async function Hp(t,e){if(t.gasConfig.budget)return;let r=await Rr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(zp),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=$p*BigInt(t.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}o(Hp,"setGasBudget");async function qp(t,e){if(!t.gasConfig.payment){let n=(await Rr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:oi})).data.filter(i=>!t.inputs.find(a=>a.Object?.ImmOrOwnedObject?i.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1)).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(i=>z(Fe,i))}}o(qp,"setGasPayment");async function Kp(t,e){let r=t.inputs.filter(f=>f.UnresolvedObject&&!(f.UnresolvedObject.version||f.UnresolvedObject?.initialSharedVersion)),n=[...new Set(r.map(f=>Te(f.UnresolvedObject.objectId)))],i=n.length?Zp(n,Fp):[],s=(await Promise.all(i.map(f=>Rr(e).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat(),a=new Map(n.map((f,g)=>[f,s[g]])),u=Array.from(a).filter(([f,g])=>g.error).map(([f,g])=>JSON.stringify(g.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);let m=s.map(f=>{if(f.error||!f.data)throw new Error(`Failed to fetch object: ${f.error}`);let g=f.data.owner,y=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:null;return{objectId:f.data.objectId,digest:f.data.digest,version:f.data.version,initialSharedVersion:y}}),p=new Map(n.map((f,g)=>[f,m[g]]));for(let[f,g]of t.inputs.entries()){if(!g.UnresolvedObject)continue;let y,C=D(g.UnresolvedObject.objectId),S=p.get(C);g.UnresolvedObject.initialSharedVersion??S?.initialSharedVersion?y=Ve.SharedObjectRef({objectId:C,initialSharedVersion:g.UnresolvedObject.initialSharedVersion||S?.initialSharedVersion,mutable:Xp(t,f)}):Yp(t,f)&&(y=Ve.ReceivingRef({objectId:C,digest:g.UnresolvedObject.digest??S?.digest,version:g.UnresolvedObject.version??S?.version})),t.inputs[t.inputs.indexOf(g)]=y??Ve.ObjectRef({objectId:C,digest:g.UnresolvedObject.digest??S?.digest,version:g.UnresolvedObject.version??S?.version})}}o(Kp,"resolveObjectReferences");async function Wp(t,e){let{inputs:r,commands:n}=t,i=[],s=new Set;n.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(f=>f.$kind==="Input"?t.inputs[f.Input]:null).some(f=>f?.UnresolvedPure||f?.UnresolvedObject)){let f=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;s.add(f),i.push(u.MoveCall)}}switch(u.$kind){case"SplitCoins":u.SplitCoins.amounts.forEach(m=>{ll(m,P.U64,t)});break;case"TransferObjects":ll(u.TransferObjects.address,P.Address,t);break}});let a=new Map;if(s.size>0){let u=Rr(e);await Promise.all([...s].map(async m=>{let[p,f,g]=m.split("::"),y=await u.getNormalizedMoveFunction({package:p,module:f,function:g});a.set(m,y.parameters.map(C=>rl(C)))}))}i.length&&await Promise.all(i.map(async u=>{let m=a.get(`${u.package}::${u.module}::${u.function}`);if(!m)return;let f=m.length>0&&tl(m.at(-1))?m.slice(0,m.length-1):m;u._argumentTypes=f})),n.forEach(u=>{if(!u.MoveCall)return;let m=u.MoveCall,p=`${m.package}::${m.module}::${m.function}`,f=m._argumentTypes;if(f){if(f.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);f.forEach((g,y)=>{let C=m.arguments[y];if(C.$kind!=="Input")return;let S=r[C.Input];if(!S.UnresolvedPure&&!S.UnresolvedObject)return;let w=S.UnresolvedPure?.value??S.UnresolvedObject?.objectId,E=Zn(g.body);if(E){C.type="pure",r[r.indexOf(S)]=Ve.Pure(E.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);C.type="object";let B=S.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:S;r[C.Input]=B})}})}o(Wp,"normalizeInputs");function Qp(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}o(Qp,"validate");function ll(t,e,r){if(t.$kind!=="Input")return;let n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=Ve.Pure(e.serialize(n.UnresolvedPure.value)))}o(ll,"normalizeRawArgument");function Xp(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=i.MoveCall._argumentTypes[s].ref!=="&"||r}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(r=!0)}),r}o(Xp,"isUsedAsMutable");function Yp(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=Jp(i.MoveCall._argumentTypes[s])||r}}),r}o(Yp,"isUsedAsReceiving");function Jp(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}o(Jp,"isReceivingType");function Rr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}o(Rr,"getClient");function Zp(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}o(Zp,"chunk");c();l();function dl(t){function e(r){return t(r)}return o(e,"object"),e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>i=>i.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[i.object(n)]}),e}o(dl,"createObjectMethods");c();l();function ml(t){function e(r,n){if(typeof r=="string")return t(fr(r).serialize(n));if(r instanceof Uint8Array||dr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return o(e,"pure"),e.u8=r=>t(P.U8.serialize(r)),e.u16=r=>t(P.U16.serialize(r)),e.u32=r=>t(P.U32.serialize(r)),e.u64=r=>t(P.U64.serialize(r)),e.u128=r=>t(P.U128.serialize(r)),e.u256=r=>t(P.U256.serialize(r)),e.bool=r=>t(P.Bool.serialize(r)),e.string=r=>t(P.String.serialize(r)),e.address=r=>t(P.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(P.vector(fr(r)).serialize(n)),e.option=(r,n)=>t(P.option(fr(r)).serialize(n)),e}o(ml,"createPure");c();l();c();l();function pl(t,e){let r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),el(n,{dkLen:32})}o(pl,"hashTypedData");function fl(t){return D(t).replace("0x","")}o(fl,"prepareSuiAddress");var Tt=class t{static{o(this,"TransactionDataBuilder")}constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let n=P.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){let n=P.TransactionData.parse(e)?.V1,i=n.kind.ProgrammableTransaction;if(!n||!i)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new t(z(gr,e)):new t(z(gr,al(e)))}static getDigestFromBytes(e){let r=pl("TransactionData",e);return et(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){let i=this.inputs,s=this.commands,a={ProgrammableTransaction:{inputs:i,commands:s}};if(n)return P.TransactionKind.serialize(a,{maxSize:e}).toBytes();let u=r?.expiration??this.expiration,m=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!m)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let f={sender:fl(m),expiration:u||{None:!0},gasData:{payment:p.payment,owner:fl(this.gasData.owner??m),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return P.TransactionData.serialize({V1:f},{maxSize:e}).toBytes()}addInput(e,r){let n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,i)=>(n.$kind==="Input"&&n.Input===e&&r(n,i),n))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>e(i,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>e(i,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>e(i,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>e(i,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>e(i,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let n=r.$Intent.inputs;r.$Intent.inputs={};for(let[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map(a=>e(a,r)):e(s,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=n);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=n);break}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(gr,this)}};c();l();function yi(t){if(typeof t=="string")return D(t);if(t.Object)return t.Object.ImmOrOwnedObject?D(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?D(t.Object.Receiving.objectId):D(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return D(t.UnresolvedObject.objectId)}o(yi,"getIdFromCallArg");var bl=o(t=>{throw TypeError(t)},"__typeError"),xi=o((t,e,r)=>e.has(t)||bl("Cannot "+r),"__accessCheck"),j=o((t,e,r)=>(xi(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),_r=o((t,e,r)=>e.has(t)?bl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),_t=o((t,e,r,n)=>(xi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),it=o((t,e,r)=>(xi(t,e,"access private method"),r),"__privateMethod"),Lr,Vr,Nt,R,ze,eo,Ti,Ci,Ei;function hl(t,e=1/0){let r={$kind:"Result",Result:t},n=[],i=o(s=>n[s]??(n[s]={$kind:"NestedResult",NestedResult:[t,s]}),"nestedResultFor");return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,a){if(a in s)return Reflect.get(s,a);if(a===Symbol.iterator)return function*(){let m=0;for(;m<e;)yield i(m),m++};if(typeof a=="symbol")return;let u=parseInt(a,10);if(!(Number.isNaN(u)||u<0))return i(u)}})}o(hl,"createTransactionResult");var yl=Symbol.for("@mysten/transaction");function to(t){return!!t&&typeof t=="object"&&t[yl]===!0}o(to,"isTransaction");var gl={buildPlugins:new Map,serializationPlugins:new Map},Si=Symbol.for("@mysten/transaction/registry");function Nr(){try{let t=globalThis;return t[Si]||(t[Si]=gl),t[Si]}catch{return gl}}o(Nr,"getGlobalPluginRegistry");var ef=class wi{static{o(this,"_Transaction")}constructor(){_r(this,ze),_r(this,Lr),_r(this,Vr),_r(this,Nt,new Map),_r(this,R),this.object=dl(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Cr(q,r))return r;let n=yi(r),i=j(this,R).inputs.find(s=>n===yi(s));return i?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||r.Object.SharedObject.mutable),i?{$kind:"Input",Input:j(this,R).inputs.indexOf(i),type:"object"}:j(this,R).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:D(r)}}:r)});let e=Nr();_t(this,R,new Tt),_t(this,Vr,[...e.buildPlugins.values()]),_t(this,Lr,[...e.serializationPlugins.values()])}static fromKind(e){let r=new wi;return _t(r,R,Tt.fromKindBytes(typeof e=="string"?ge(e):e)),r}static from(e){let r=new wi;return to(e)?_t(r,R,new Tt(e.getData())):typeof e!="string"||!e.startsWith("{")?_t(r,R,Tt.fromBytes(typeof e=="string"?ge(e):e)):_t(r,R,Tt.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){Nr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){Nr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){Nr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){Nr().buildPlugins.delete(e)}addSerializationPlugin(e){j(this,Lr).push(e)}addBuildPlugin(e){j(this,Vr).push(e)}addIntentResolver(e,r){if(j(this,Nt).has(e)&&j(this,Nt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);j(this,Nt).set(e,r)}setSender(e){j(this,R).sender=e}setSenderIfNotSet(e){j(this,R).sender||(j(this,R).sender=e)}setExpiration(e){j(this,R).expiration=e?z(fi,e):null}setGasPrice(e){j(this,R).gasConfig.price=String(e)}setGasBudget(e){j(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){j(this,R).gasData.budget==null&&(j(this,R).gasConfig.budget=String(e))}setGasOwner(e){j(this,R).gasConfig.owner=e}setGasPayment(e){j(this,R).gasConfig.payment=e.map(r=>z(Fe,r))}get blockData(){return bi(j(this,R).snapshot())}getData(){return j(this,R).snapshot()}get[yl](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ml(e=>dr(e)?j(this,R).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):j(this,R).addInput("pure",Cr(pi,e)?z(pi,e):e instanceof Uint8Array?Ve.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Ve.ObjectRef(...e))}receivingRef(...e){return this.object(Ve.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Ve.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=j(this,R).commands.push(e);return hl(r-1)}splitCoins(e,r){let n=xt.SplitCoins(typeof e=="string"?this.object(e):it(this,ze,Ti).call(this,e),r.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):it(this,ze,eo).call(this,s))),i=j(this,R).commands.push(n);return hl(i-1,r.length)}mergeCoins(e,r){return this.add(xt.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(xt.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:i}){return this.add(xt.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...r}){return this.add(xt.MoveCall({...r,arguments:e?.map(n=>it(this,ze,eo).call(this,n))}))}transferObjects(e,r){return this.add(xt.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):it(this,ze,eo).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(xt.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(bi(j(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(cl,j(this,R).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){let{signer:r,...n}=e,i=await this.build(n);return r.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await it(this,ze,Ci).call(this,e),j(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await it(this,ze,Ci).call(this,e),j(this,R).getDigest()}async prepareForSerialization(e){let r=new Set;for(let i of j(this,R).commands)i.$Intent&&r.add(i.$Intent.name);let n=[...j(this,Lr)];for(let i of r)if(!e.supportedIntents?.includes(i)){if(!j(this,Nt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(j(this,Nt).get(i))}await it(this,ze,Ei).call(this,n,e)}};Lr=new WeakMap;Vr=new WeakMap;Nt=new WeakMap;R=new WeakMap;ze=new WeakSet;eo=o(function(t){return dr(t)?this.pure(t):it(this,ze,Ti).call(this,t)},"normalizeTransactionArgument_fn");Ti=o(function(t){return typeof t=="function"?z(q,t(this)):z(q,t)},"resolveArgument_fn");Ci=o(async function(t){if(!t.onlyTransactionKind&&!j(this,R).sender)throw new Error("Missing transaction sender");await it(this,ze,Ei).call(this,[...j(this,Vr),ul],t)},"prepareBuild_fn");Ei=o(async function(t,e){let r=o(n=>{if(n>=t.length)return()=>{};let i=t[n];return async()=>{let s=r(n+1),a=!1,u=!1;if(await i(j(this,R),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await s(),u=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}},"createNext");await r(0)()},"runPlugins_fn");var vi=ef;var tf=Symbol.for("@mysten/SuiClient");var Fr=class{static{o(this,"SuiClient")}get[tf](){return!0}constructor(e){this.transport=e.transport??new Pn({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!mr(Te(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!mr(Te(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Gn(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Gn(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:i}){let s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:X(e),Array.isArray(r)?r:[r],n]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));let{signature:s,bytes:a}=await r.signTransaction(i);return this.executeTransactionBlock({transactionBlock:a,signature:s,...n})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Oe(D(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!mr(Te(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(to(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=X(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=X(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:X(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!mr(Te(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=_e(e.digest);return We(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:n,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:i,nextCursor:n,data:s.map(a=>Fc(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){let s=AbortSignal.timeout(r),a=new Promise((u,m)=>{s.addEventListener("abort",()=>m(s.reason))});for(a.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(m=>setTimeout(m,n)),a])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var Sl=o(async({chain:t,owner:e,chainData:r},{recipient:n})=>{let i=t.id,{objectId:s}=r,a=V.getRpcProxyUrl(i);if(!s)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!a)throw new Error("Failed to get Sui RPC url");let u=new Fr({url:a}),m=new vi;m.setSender(e),m.transferObjects([s],n);let p=await m.build({client:u});return{networkID:i,transaction:p}},"createSuiTransferTransaction");async function Cl(t,e,r){let{chain:n}=t,i=n.id;return V.isSolanaNetworkID(i)?gc(t,e):V.isEVMNetworkID(i)?dc(t,e):V.isSuiNetworkID(i)?Sl(t,e):V.isBitcoinNetworkID(i)?sc(t,e,r):_i(i)}o(Cl,"createTransferTransaction");var rf="collectible-transfer-tx",nf=ne({seconds:30});function of(t){return t&&!t.isNaN()}o(of,"isValidAmountFn");function sf(t){let{collectible:e,sendFormValues:r}=t??{},{chain:n,owner:i}=e??{},{id:s}=n??{},{recipient:a,amountAsset:u}=r??{},m=Vs(a,s)??"",p=u?.isNaN()?void 0:u,f=of(p),{data:g}=tn({address:i,networkID:s}),{data:y}=Ns(g),{data:C}=Ps({networkID:s,enableFallback:!0}),S=af(s,C,y,g),w=S?.sendContextRequired?S.sendContext:void 0;return Me({staleTime:nf,enabled:f&&!!e&&!!t&&!!S,queryKey:H.transferTransaction({collectible:e,sendFormValues:r,sendContext:w}),async queryFn(){try{if(!e||!r||!S)throw new Error("Missing required data to construct fungible transfer transaction");return await Cl(e,{...r,recipient:m},w)}catch(E){if(ut(E)){let B=E.response?.status;mt(E,B,rf)}throw E}}})}o(sf,"useCollectibleTransferTransaction");function af(t,e,r,n){if(t)return V.isBitcoinNetworkID(t)?!e||!r||!n?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:n}}:{sendContextRequired:!1}}o(af,"createSendContext");c();l();var wl=v(k(),1);function Ii(t){let e=Tn(Y.PinnedCollections);return{data:(0,wl.useMemo)(()=>t?e?.[t]??[]:[],[t,e]),isPending:!!t&&e===void 0}}o(Ii,"usePinnedCollections");c();l();var xl=v(k(),1);function Tl(t){let{data:e,isPending:r}=pe(t);return{data:(0,xl.useMemo)(()=>t?Array.from(e.values()).filter(i=>mn(i,{spamStatus:ee.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(Tl,"useHiddenCollections");c();l();var El=v(k(),1);var cf=o(t=>{let e=me();return(0,El.useCallback)(()=>e.invalidateQueries({queryKey:H.collections(t)}),[e,t])},"useInvalidateCollectibles");c();l();var vl=v(k(),1);var lf=2e3,ro=class extends Ge{static{o(this,"UsePinCollectionError")}constructor(e){super(e),this.name="UsePinCollectionError"}};function Il(t){let e=me();return(0,vl.useCallback)(async({collectionId:r,pinned:n})=>{if(!t)return;let i=await xn(Y.PinnedCollections)??{},s=i[t]??[];if(n){if(Object.values(i).reduce((m,p)=>m+p.length,0)+1>lf)throw new ro("Pinned limit reached");i[t]=Array.from(new Set([...s,r]))}else{let u=s.indexOf(r);if(u===-1)throw new ro("Collection not previously pinned");let m=[...s];m.splice(u,1),i[t]=m}await wn(Y.PinnedCollections)(i),await e.invalidateQueries({queryKey:H.pinnedCollections(t)})},[t,e])}o(Il,"usePinCollection");c();l();var Ol=v(k(),1);var uf=o(t=>{let e=me();return(0,Ol.useCallback)(()=>e.refetchQueries({queryKey:H.collections(t)}),[e,t])},"useRefetchCollectibles");c();l();c();l();var df=new Error("Failed to report event for collectible");async function Al(t){try{let e=await ke.api().post("/collectibles/v1/events",{events:t});if(!ji(e))throw new Error}catch{throw df}}o(Al,"reportCollectibleEvent");function mf(){return Qr({async mutationFn({event:t}){try{await Al([t])}catch{}}})}o(mf,"useReportCollectibleEvent");c();l();function pf(){let{data:t}=ts(),e=Ht(),r=me(),n=_s(),i=qt();return Qr({mutationFn:o(async({multichainTransaction:a,pendingTransactionInput:u,senderAddress:m,optimisticUpdate:p,gasEstimation:f})=>{if(!t)throw new Error("No account identifier found");let{networkID:g}=a,y=await cn.get(g).onBeforeSend({multichainTransaction:a,gasEstimation:f}),C=await Es({accountIdentifier:t,accountSigner:i,multichainTransaction:y,networkID:g,pendingTransactionInput:u,senderAddress:m,storage:e,utxoManager:n});return p&&er(r,p),Ts(g,C)},"mutationFn"),onError(a){a instanceof Error&&Ce.captureError(a,ve.Collectibles)}})}o(pf,"useTransferCollectible");c();l();var kl=v(k(),1);function Ml(t){let{data:e,isPending:r}=pe(t);return{data:(0,kl.useMemo)(()=>t?Array.from(e.values()).filter(i=>Os(i,{spamStatus:ee.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(Ml,"useUnhiddenCollections");c();l();var Bl=v(k(),1);var Oi=class extends ir{static{o(this,"UseUnhideCollectionError")}constructor(e){super(e),this.name="UseUnhideCollectionError"}};function Dl(t){let e=En(t);return(0,Bl.useCallback)(async({collectionId:r})=>{try{await e([{id:r,visibility:$.Visible}],{checkLimit:!0})}catch(n){throw n instanceof ir?new Oi(n.message):n}},[e])}o(Dl,"useUnhideCollection");c();l();var Ul=v(k(),1);var ff=o(({id:t,addresses:e})=>{let{data:r,isSuccess:n}=Ot({addresses:e});return(0,Ul.useMemo)(()=>{let i={isSuccess:n,data:void 0};for(let s of r??[])for(let a of s.items)if(a.id===t)return{...i,data:a};return i},[t,r,n])},"useCollectible");c();l();var Lt=v(k(),1);c();l();var Ai=v(k(),1);var Pl=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=he(),i=(0,Ai.useCallback)(({collectible:a,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsNotSpam",{data:ft(a)}),t.success(u===$.Visible?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,n]),s=(0,Ai.useCallback)((a,u)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return xa({accountId:e,onSuccess:i,onError:s})},"useReportNotSpam");c();l();var ki=v(k(),1);var jl=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=he(),i=(0,ki.useCallback)(({collectible:a,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsSpam",{data:ft(a)}),t.success(u===$.Hidden?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,n]),s=(0,ki.useCallback)((a,u)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return wa({accountId:e,onSuccess:i,onError:s})},"useReportSpam");function hf({accountId:t,collectible:e,toast:r}){let n=jl({collectible:e,accountId:t,toast:r}),i=(0,Lt.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Pl({collectible:e,accountId:t,toast:r}),a=(0,Lt.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=pe(t),m=(0,Lt.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,Lt.useMemo)(()=>e?Is(m,{spamStatus:e.collection.spamStatus}):ee.NotVerified,[e,m]),f=xr(p);return(0,Lt.useMemo)(()=>({isSpam:f,spamStatus:p,onReportSpam:f?void 0:i,onReportNotSpam:f?a:void 0}),[p,f,i,a])}o(hf,"useCollectiblesReportSpam");c();l();var Rl=v(so(),1),_l=v(k(),1);c();l();var no=o((t,e)=>{let r=new br(t);if(r.isZero())return"0";let n=Jr(-e);return r.abs().lt(n)?r.isPositive()?`<${n.toFixed()}`:`-<${n.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})},"formatValue");var gf=o(t=>{let{t:e}=Z();return(0,_l.useMemo)(()=>{let r=[];if(!t)return r;let n=t?.chain.id,i=Mt.get(n).collectibleDetailPrecision;t.collection.name&&r.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let s,a;if(t.collection.floorPrice){let{price:p,token:f}=t.collection.floorPrice;if(f&&f.decimals&&f.symbol){let{decimals:g,symbol:y}=f,C=rr(p,g);r.push({topLeft:e("collectiblesFloorPrice"),topRight:`${no(C,i)} ${y}`}),s=C,a=y}}let u,m;if(t.lastSalePrice){let{price:p,token:f}=t.lastSalePrice;if(f&&f.decimals&&(f.symbol||f.name)){let{decimals:g,symbol:y,name:C}=f,S=rr(p,g);r.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${no(S,i)} ${y??C}`}),u=S,m=y}}if(s&&u&&a===m){let p=s-u;r.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${no(p,i)} ${m}`,color:p>0?"spotPositive":p===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&r.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,Rl.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&r.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:V.getNetworkName(t.chain.id)}),Gr()&&r.push({topLeft:"Standard",topRight:bf(t)}),ks(t)&&r.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),r},[t,e])},"useCollectibleTableRows");function bf(t){let e=t.chainData;if(le(e))return e.standard;if(He(e))return e.standard;if(qe(e))return"Ordinals"}o(bf,"getStandard");c();l();var Nl=v(k(),1);var yf=o(({id:t,addresses:e})=>{let{data:r}=Ot({addresses:e});return(0,Nl.useMemo)(()=>(r??[]).find(n=>n.id===t),[t,r])},"useCollection");c();l();var Ll=v(k(),1);var Vl=o((t,e,r,n)=>(0,Ll.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!n,[t,e,r,n]),"useIsCollectionHidden");c();l();var Fl=v(k(),1);var Mi=o((t,e)=>(0,Fl.useMemo)(()=>e?t.includes(e):!1,[e,t]),"useIsCollectionPinned");c();l();var $r=v(k(),1);c();l();var $l=v(k(),1);var zl=o(({accountId:t,collectionId:e,isPinned:r,pinMessages:n,pinCollection:i,toast:s,sendAnalyticEvent:a,unhideCollection:u,isHidden:m})=>(0,$l.useCallback)(()=>{(async()=>{if(!e||!t){s.error(r?n.unpinFail:n.pinFail);return}try{await i({collectionId:e,pinned:!r}),m&&!r&&await u({collectionId:e}),s.success(r?n.unpinSuccess:n.pinSuccess),a&&a(r?"collectionUnpinned":"collectionPinned")}catch{s.error(r?n.unpinFail:n.pinFail)}})()},[e,t,r,n,i,s,a,u,m]),"usePinCollectionToggle");var Sf=o(({collectionId:t,isSpam:e,accountId:r,networkId:n,toast:i})=>{let{t:s}=Z(),a=he(),u=Dl(r),{data:m=[]}=Tl(r),{data:p=[]}=Ml(r),f=Vl(m,p,t??"",!!e),g=Il(r),{data:y}=Ii(r),C=Mi(y,t??""),S=(0,$r.useMemo)(()=>({pinSuccess:s("collectionPinSuccess"),pinFail:s("collectionPinFail"),unpinSuccess:s("collectionUnpinSuccess"),unpinFail:s("collectionUnpinFail")}),[s]),w=(0,$r.useCallback)(B=>{n&&a.capture(B,{data:{networkId:n,chainId:V.getChainID(n)}})},[a,n]),E=zl({accountId:r,collectionId:t,isPinned:C,pinMessages:S,pinCollection:g,toast:i,sendAnalyticEvent:w,unhideCollection:u,isHidden:f});return(0,$r.useMemo)(()=>({isPinned:C,onTogglePin:E}),[C,E])},"usePinCollectionProps");c();l();var zr=v(k(),1);var Xe;(function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.LOADING="LOADING"})(Xe||(Xe={}));var Cf=o(({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:n})=>{let i=Mt.get(t).sendSuccessCondition,s=(0,zr.useMemo)(()=>e?Xe.ERROR:i===xe.SUBMISSION&&n||i===xe.CONFIRMATION&&r?Xe.SUCCESS:Xe.LOADING,[r,e,n,i]),a=i===xe.CONFIRMATION?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",u=(0,zr.useMemo)(()=>{switch(s){case Xe.LOADING:return Ie.t("sendStatusLoadingTitle");case Xe.ERROR:return Ie.t("sendStatusErrorTitle");case Xe.SUCCESS:return Ie.t(a)}},[s,a]),{isError:m,isSuccess:p}=(0,zr.useMemo)(()=>({isError:s===Xe.ERROR,isSuccess:s===Xe.SUCCESS}),[s]),{transactionSpeed:f=Kt.standard}=$s(y=>y.sendFormValues),g=(0,zr.useMemo)(()=>{let y=cn.get(t).transactionSpeedDescription(f);return y?Ie.t(y):""},[t,f]);return{title:u,isError:m,isSuccess:p,sendSuccessCondition:i,estimatedTime:g}},"useSendCollectibleStatusViewState");c();l();var Gl=v(k(),1);var wf=!1,xf="small",Tf="image",Ef=o(t=>(0,Gl.useMemo)(()=>Hl(t),[t]),"useCollectionMediaUri"),Hl=o((t,e=xf)=>{if(!t)return;let{media:r,collection:n}=t,i=wf,s=Tf;return r?On({collectibleMedia:r,isImageAnimationEnabled:i,previewSize:e,mediaTypeOverride:s}):n.imageUrl},"parseCollectionMediaUri");c();l();var ql=v(k(),1);var Kl=o(t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},"findFirstImageCollectible"),vf=o(t=>(0,ql.useMemo)(()=>{if(t)return Kl(t)??t.items[0]},[t]),"useCollectionCollectible");c();l();var Wl=v(k(),1);var If=o(t=>(0,Wl.useMemo)(()=>{if(!(!t||t.items.length===0))return Ql(t)},[t]),"useCollectionItemsCount"),Ql=o(t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:n="",chainData:i}]=e;if(le(i)&&i.standard===vt.SemiFungible){let s=parseInt(n,10);return isNaN(s)?1:s}}return r},"parseCollectionItemsCount");c();l();var Xl=v(k(),1);var Of=o(t=>(0,Xl.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]),"useOnlyImageCollectibles");c();l();var Yl=v(k(),1);var Af=o((t,e)=>(0,Yl.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,n=e.explorers[r]??ns.get(r).defaultExplorer,i,s;if(le(t.chainData))s="address",i=t.chainData.mint;else if(He(t.chainData))if(t.chainData.contract)t.chainData.id?(s="nft",i=[t.chainData.contract,t.chainData.id]):(s="token",i=t.chainData.contract);else return;else if(qe(t.chainData))if(Zt(t.chainData)){let{hash:u,index:m}=t.chainData.utxoDetails;s="transaction",i=`${u}#flow=&vout=${m}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(Qs(t.chainData))s="nft",i=t.chainData.objectId??"";else return;if(!i)return;let a=is({networkID:r,endpoint:s,explorerType:n,param:i});if(a)return{name:os[n],url:a}},[t,e]),"useCollectibleExplorer");c();l();var Jl=v(k(),1);var kf=o(t=>(0,Jl.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:n}=r.media.image;return e.has(n)?!1:(e.add(n),!0)})},[t]),"useDedupeCollectibles");c();l();var Zl=v(k(),1);var Mf=o(t=>{let{t:e}=Z();return(0,Zl.useMemo)(()=>{let n=[];if(!t)return;let i=t.chainData;if(qe(i)){let{outputValue:s,satNumber:a,satName:u,inscriptionId:m,inscriptionNumber:p,protocolName:f,createdAt:g,utxoDetails:y}=i,C=e(m?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),S;return s?S=parseFloat(s).toLocaleString("en-US"):y&&(S=y.value.toLocaleString("en-US")),S&&n.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}),a&&n.push({topLeft:e("collectibleDetailSatNumber"),topRight:a}),u&&n.push({topLeft:e("collectibleDetailSatName"),topRight:u}),m&&n.push({topLeft:e("collectibleDetailInscriptionId"),topRight:es(m,5,3)}),p&&n.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:p}),f&&n.push({topLeft:e("collectibleDetailStandard"),topRight:f?.toUpperCase()}),g&&n.push({topLeft:e("collectibleDetailCreated"),topRight:Bf(new Date(g))}),{label:C,items:n.filter(Qi)}}},[t,e])},"useCollectibleChainSpecificInfoSection");function Bf(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}o(Bf,"formatDate");c();l();var tu=v(k(),1);var Vt=o(()=>{},"noop"),eu=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function Df(t){let{amountToBurn:e=0,explorerName:r,isBurnable:n,isHidden:i,isPinned:s,isSpam:a,onBurnToken:u,onReportNotSpam:m,onReportSpam:p,onSaveToLibrary:f,onSend:g,onSetAsAvatar:y,onToggleHide:C,onTogglePin:S,onViewOnExplorer:w,shortcuts:E,shouldDisplaySend:B,shouldDisplayShortcuts:L}=t,{t:O}=Z();return(0,tu.useMemo)(()=>{let J=[];if(B&&J.push({text:O("commandSend"),type:"send",onClick:g??Vt}),f&&J.push({text:O("assetDetailSavePhoto"),singleWordAltText:O("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:f??Vt}),y&&!a&&J.push({text:O("collectibleDetailSetAsAvatar"),singleWordAltText:O("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:y??Vt}),S){let re=O(s?"assetDetailUnpinCollection":"assetDetailPinCollection"),Se=O(s?"commandUnpin":"commandPin"),oe=s?"unpin":"pin";J.push({text:re,singleWordAltText:Se,type:oe,menuOnly:!0,onClick:S??Vt})}if(C){let re=O(i?"assetDetailUnhideCollection":"assetDetailHideCollection"),Se=O(i?"commandUnhide":"commandHide"),oe=i?"unhide":"hide";J.push({text:re,singleWordAltText:Se,type:oe,menuOnly:!0,onClick:C??Vt})}if(m){let re=O("collectiblesReportAsNotSpam");J.push({text:re,type:"reportAsNotSpam",singleWordAltText:O("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:m})}if(p){let re=O("collectiblesReportAsSpam");J.push({text:re,type:"reportAsSpam",singleWordAltText:O("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(n){let re=O(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");J.push({text:re,singleWordAltText:O("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:u??Vt})}return!!w&&!!r&&J.push({text:O("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:O("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:w??Vt}),J.sort((re,Se)=>(eu.get(re.type)??100)-(eu.get(Se.type)??100)),{actions:Bs(J,4),shortcuts:L?E:[]}},[e,r,n,i,s,a,u,m,p,f,g,y,C,S,w,E,B,L,O])}o(Df,"useCollectibleCTABar");export{fu as a,Gs as b,xe as c,wy as d,xy as e,fn as f,Yf as g,Ws as h,Jf as i,Mu as j,am as k,le as l,He as m,qe as n,Qs as o,Zt as p,mm as q,mc as r,sf as s,Ot as t,Dd as u,Ru as v,_u as w,Yh as x,Zs as y,zd as z,Gd as A,ka as B,qd as C,Ii as D,cf as E,uf as F,mf as G,pf as H,ff as I,hf as J,gf as K,yf as L,Mi as M,ud as N,bd as O,yd as P,Od as Q,kd as R,Kd as S,Xd as T,Sf as U,Cf as V,rm as W,nm as X,Ef as Y,vf as Z,If as _,Of as $,Af as aa,kf as ba,Mf as ca,Df as da,om as ea};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-EAEMLYNM.js.map
