import{c as et,d as rt}from"./chunk-L4PR2H35.js";import{b as X,c as q}from"./chunk-PELFKYLV.js";import{j as tt,k as ot}from"./chunk-PFY5DZIQ.js";import{f as I}from"./chunk-GUZFMB3D.js";import{b as T}from"./chunk-N3C6FBKY.js";import{h as J,k as l}from"./chunk-3H3VDE2B.js";import{a as V}from"./chunk-6L5OAXTQ.js";import{e as U}from"./chunk-EAEMLYNM.js";import{e as P,f as C}from"./chunk-HLWWEHZK.js";import{Fa as B,Ga as j,Ha as H,Ja as p,La as W,Ua as Q,e as v,g as c,l as $}from"./chunk-5JGASDWN.js";import{a as z,g as Z}from"./chunk-DYQ7BPYX.js";import{a as x,b as K}from"./chunk-NMTPXQAP.js";import{X as G,d as Y,la as F}from"./chunk-N6SSDFMX.js";import{Ib as N,La as D,P as w,V as E}from"./chunk-W7IWPUIQ.js";import{Ac as M}from"./chunk-4SCKDS7G.js";import{J as L,Nd as R,cd as O,zd as k}from"./chunk-DJGGVTSJ.js";import{U as h,a as dt,x as b}from"./chunk-LQZGQEJ6.js";import{a as s,g as ut,i as a,n}from"./chunk-WKJYWAXG.js";a();n();var ft={...R,...U,...C,...v,...M},St=s(async()=>({status:await ot()?"done":"not-done"}),"isOnboardingDone"),at=O.getInstance({storage:V,keyRegistry:ft,authRepository:l,queryClient:J,isOnboardingDone:St});l.subscribe(E.User,async()=>{at.hydrateIfNeeded()});l.subscribe(E.LoggedOut,async()=>{at.clear()});a();n();a();n();a();n();var Et=c(e=>{let t=Object.fromEntries(Object.entries(e(p).data?.updates??{}).map(([o,r])=>[o,{name:r.name,quantity:r.totalQuantity/10**r.decimals,timestamp:r.timestamp}]));return{errors:e(et),walletCaip19:e(B),totalValue:e(q),portfolioValueStatus:e(X).status,balanceUpdatesStatus:e(p).status,balancesStatus:e(j).status,balancesFromUnixTimestamp:Math.floor(e(H)/1e3),updatesFromUnixTimestamp:(e(p).data?.lastTimestamp??0)/1e6,updates:t,hasNextPage:e(W),fungibleTokens:e(Q).map(o=>o.encodedCaip19)}}),nt=Et;var st=c(e=>({...e(nt),visibleTokens:e(rt).map(t=>t.encodedCaip19)}));var i=ut(dt(),1);a();n();var u=class{static{s(this,"DeprecatedLocalStorage")}async get(t){let o=null;try{if(o=self.localStorage.getItem(t),typeof o!="string")return null;try{return JSON.parse(o)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${t}"`),o}}catch(r){let m=`[DeprecatedLocalStorage.get] Error getting key (${t}): ${r}`;throw new Error(m)}}async getAll(t){try{let o={};t=t||Object.keys(self.localStorage);for(let r of t)o[r]=await this.get(r);return o}catch(o){let r=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${t}): ${o}`;throw new Error(r)}}async remove(t){let o=`[DeprecatedLocalStorage.remove] Error removing key(s) (${t}): Method not implemented`;throw new Error(o)}async set(t,o){let r=`[DeprecatedLocalStorage.set] Error setting key (${t}): Method not implemented`;throw new Error(r)}async setAll(t){let r=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(t)}): Method not implemented`;throw new Error(r)}subscribe(t){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(t){let o=`[DeprecatedLocalStorage.update] Error updating key(s) (${t}): Method not implemented`;throw new Error(o)}};var Tt=new x,At=new u,_t=[...D,...I,P,w,"i18nextLng"],Oo=s(()=>{let{data:e,isFetching:t}=N(),{data:o,isFetching:r}=F(),{data:m,isFetching:it}=k([{key:"Local Storage",storage:Tt},{key:"Deprecated Local Storage",storage:At}],_t),{data:A}=G(),_=tt(),[y]=$(st),d=(0,i.useCallback)(async()=>{let{version:f}=chrome.runtime.getManifest(),S=await K.getDeviceId(),gt=await _();return{"App Version":f,"Platform Information":z,"Display Language":Y(h.language),"Phantom Auth":gt,"Device Id":S,Portfolio:y,"Auto Lock Timer(ms)":A,...e,...o,...m}},[y,e,o,m,_,A]),mt=t||r||it,ct=(0,i.useCallback)(async f=>{f?.preventDefault();let S=await d();await L.downloadLog(S)},[d]),pt=(0,i.useCallback)(()=>{T({url:Z})},[]),lt=(0,i.useCallback)(()=>{T({url:b})},[]);return{appState:d,isFetching:mt,goCreateTicket:pt,goSupportDesk:lt,downloadLogs:ct}},"useDownloadLogs");export{Oo as a,at as b};
//# sourceMappingURL=chunk-XIVHOO7I.js.map
