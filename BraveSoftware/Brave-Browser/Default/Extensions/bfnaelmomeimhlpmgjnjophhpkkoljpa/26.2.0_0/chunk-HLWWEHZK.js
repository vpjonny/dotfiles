import{G as Yn,M as dt,N as $n,Oa as Jn,Xa as zn,ba as wo,eb as Xn,gb as Zn,hb as ta,qa as Et,r as Qn}from"./chunk-5JGASDWN.js";import{e as fo,pa as ve}from"./chunk-N6SSDFMX.js";import{A as vn,Za as Ln,fa as Cn,gb as _n,j as Tn,mc as bt,o as de,qc as Mn,vb as ee}from"./chunk-W7IWPUIQ.js";import{Fd as Hn,Kd as Vt,Qc as Kn,Rb as kr,Rc as F,Rd as Gn,Sc as qn,Tc as Wn,Ua as go,Ud as jn,Vb as Ie,Wd as pe,Zb as Nn,Zc as De,_b as Fn,ac as yr,bc as Un,d as xe,dc as ho,eb as ko,ec as Bn,fb as yo,hb as Ht,kc as Ao,nc as Rn,sc as Dn,vc as Vn}from"./chunk-4SCKDS7G.js";import{$c as R,$d as yn,Ae as xn,B as ut,E as Rt,I as G,Ka as fr,L as j,La as At,Re as Tt,Se as In,Vc as Be,Ve as me,We as Pn,Yd as Sr,Ye as En,_c as Sn,ae as hn,b as nn,bd as gn,c as ds,dc as O,dd as kn,de as An,fd as Re,he as wn,jc as pn,kc as te,m as cn,qd as wt,ra as q,rc as fn,s as un,sd as be,t as ln,u as ht,ua as lt,v as g,vd as L,wa as le}from"./chunk-DJGGVTSJ.js";import{b as uo,d as ls}from"./chunk-FATTDLFQ.js";import{b as Dt}from"./chunk-2RWUL32J.js";import{D as Te,F as mo,G as dn,Ga as So,H as po,I as mn,Na as it,Ra as On,U as v,Ua as Q,Y as bn,Yb as gr,Z as Y,a as C,b as Bt,e as pr,f as Ue,g as Zt,h as an,i as sn,j as A,k as rt,l as K,nb as oe,r as lo}from"./chunk-LQZGQEJ6.js";import{a as n,d as cs,g as x,i,l as us,m as Buffer,n as s}from"./chunk-WKJYWAXG.js";var vi=cs(P=>{"use strict";i();s();var Qc=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P,"__esModule",{value:!0});P.map=P.array=P.rustEnum=P.str=P.vecU8=P.tagged=P.vec=P.bool=P.option=P.publicKey=P.i256=P.u256=P.i128=P.u128=P.i64=P.u64=P.struct=P.f64=P.f32=P.i32=P.u32=P.i16=P.u16=P.i8=P.u8=void 0;var W=kr(),Yc=nn(),$c=Qc(uo()),Qt=kr();Object.defineProperty(P,"u8",{enumerable:!0,get:n(function(){return Qt.u8},"get")});Object.defineProperty(P,"i8",{enumerable:!0,get:n(function(){return Qt.s8},"get")});Object.defineProperty(P,"u16",{enumerable:!0,get:n(function(){return Qt.u16},"get")});Object.defineProperty(P,"i16",{enumerable:!0,get:n(function(){return Qt.s16},"get")});Object.defineProperty(P,"u32",{enumerable:!0,get:n(function(){return Qt.u32},"get")});Object.defineProperty(P,"i32",{enumerable:!0,get:n(function(){return Qt.s32},"get")});Object.defineProperty(P,"f32",{enumerable:!0,get:n(function(){return Qt.f32},"get")});Object.defineProperty(P,"f64",{enumerable:!0,get:n(function(){return Qt.f64},"get")});Object.defineProperty(P,"struct",{enumerable:!0,get:n(function(){return Qt.struct},"get")});var ae=class extends W.Layout{static{n(this,"BNLayout")}constructor(e,o,r){super(e,r),this.blob=(0,W.blob)(e),this.signed=o}decode(e,o=0){let r=new $c.default(this.blob.decode(e,o),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(e,o,r=0){return this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),o,r)}};function Ti(t){return new ae(8,!1,t)}n(Ti,"u64");P.u64=Ti;function Jc(t){return new ae(8,!0,t)}n(Jc,"i64");P.i64=Jc;function zc(t){return new ae(16,!1,t)}n(zc,"u128");P.u128=zc;function Xc(t){return new ae(16,!0,t)}n(Xc,"i128");P.i128=Xc;function Zc(t){return new ae(32,!1,t)}n(Zc,"u256");P.u256=Zc;function tu(t){return new ae(32,!0,t)}n(tu,"i256");P.i256=tu;var Wt=class extends W.Layout{static{n(this,"WrappedLayout")}constructor(e,o,r,a){super(e.span,a),this.layout=e,this.decoder=o,this.encoder=r}decode(e,o){return this.decoder(this.layout.decode(e,o))}encode(e,o,r){return this.layout.encode(this.encoder(e),o,r)}getSpan(e,o){return this.layout.getSpan(e,o)}};function eu(t){return new Wt((0,W.blob)(32),e=>new Yc.PublicKey(e),e=>e.toBuffer(),t)}n(eu,"publicKey");P.publicKey=eu;var jr=class extends W.Layout{static{n(this,"OptionLayout")}constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,W.u8)()}encode(e,o,r=0){return e==null?this.discriminator.encode(0,o,r):(this.discriminator.encode(1,o,r),this.layout.encode(e,o,r+1)+1)}decode(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return null;if(r===1)return this.layout.decode(e,o+1);throw new Error("Invalid option "+this.property)}getSpan(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return 1;if(r===1)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid option "+this.property)}};function ou(t,e){return new jr(t,e)}n(ou,"option");P.option=ou;function ru(t){return new Wt((0,W.u8)(),nu,au,t)}n(ru,"bool");P.bool=ru;function nu(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}n(nu,"decodeBool");function au(t){return t?1:0}n(au,"encodeBool");function iu(t,e){let o=(0,W.u32)("length"),r=(0,W.struct)([o,(0,W.seq)(t,(0,W.offset)(o,-o.span),"values")]);return new Wt(r,({values:a})=>a,a=>({values:a}),e)}n(iu,"vec");P.vec=iu;function su(t,e,o){let r=(0,W.struct)([Ti("tag"),e.replicate("data")]);function a({tag:c,data:u}){if(!c.eq(t))throw new Error("Invalid tag, expected: "+t.toString("hex")+", got: "+c.toString("hex"));return u}return n(a,"decodeTag"),new Wt(r,a,c=>({tag:t,data:c}),o)}n(su,"tagged");P.tagged=su;function bi(t){let e=(0,W.u32)("length"),o=(0,W.struct)([e,(0,W.blob)((0,W.offset)(e,-e.span),"data")]);return new Wt(o,({data:r})=>r,r=>({data:r}),t)}n(bi,"vecU8");P.vecU8=bi;function cu(t){return new Wt(bi(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}n(cu,"str");P.str=cu;function uu(t,e,o){let r=(0,W.union)(o??(0,W.u8)(),e);return t.forEach((a,c)=>r.addVariant(c,a,a.property)),r}n(uu,"rustEnum");P.rustEnum=uu;function lu(t,e,o){let r=(0,W.struct)([(0,W.seq)(t,e,"values")]);return new Wt(r,({values:a})=>a,a=>({values:a}),o)}n(lu,"array");P.array=lu;var Qr=class extends W.Layout{static{n(this,"MapEntryLayout")}constructor(e,o,r){super(e.span+o.span,r),this.keyLayout=e,this.valueLayout=o}decode(e,o){o=o||0;let r=this.keyLayout.decode(e,o),a=this.valueLayout.decode(e,o+this.keyLayout.getSpan(e,o));return[r,a]}encode(e,o,r){r=r||0;let a=this.keyLayout.encode(e[0],o,r),c=this.valueLayout.encode(e[1],o,r+a);return a+c}getSpan(e,o){return this.keyLayout.getSpan(e,o)+this.valueLayout.getSpan(e,o)}};function du(t,e,o){let r=(0,W.u32)("length"),a=(0,W.struct)([r,(0,W.seq)(new Qr(t,e),(0,W.offset)(r,-r.span),"values")]);return new Wt(a,({values:c})=>new Map(c),c=>({values:Array.from(c.entries())}),o)}n(du,"map");P.map=du});i();s();var vt;(function(t){t.DirectLink="Deep Link",t.Modal="Modal",t.BottomSheet="Bottom Sheet"})(vt||(vt={}));var Ve;(function(t){t.Buy="Buy",t.Collectibles="Collectibles",t.ConnectHardwareWallet="Connect Hardware Wallet",t.ConvertStakeAccount="Convert Stake Account",t.ConvertToJito="Convert to Jito",t.MintPSOL="Mint PSOL",t.Explore="Explore",t.Perps="Perps",t.MintCollectible="Mint Collectible",t.SocialLogin="Social Login",t.SettingsClaimUsername="Settings: Claim Username",t.SettingsCurrency="Settings: Currency",t.SettingsImportSeedPhrase="Settings: Import Seed Phrase",t.SettingsNotificationPreferences="Settings: Notification Preferences",t.SettingsSecurityAndPrivacy="Settings: Security & Privacy",t.TokenCategory="Token Category",t.Swapper="Swapper",t.ExternalLink="External Link",t.Token="Token",t.TokenChat="Token Chat",t.Terminal="Terminal"})(Ve||(Ve={}));var ms=A.enum(["dark","light"]).default("dark").catch("dark"),ps=A.enum(["normal","full"]).default("normal").catch("normal"),rl=A.object({theme:ms,imageBleed:ps}),E;(function(t){t.Multichain="Multichain",t.MultichainSwapper="MultichainSwapper",t.InvalidChecksum="InvalidChecksum",t.AdditionalPermissions="AdditionalPermissions",t.SuiWelcome="SuiWelcome",t.SuiWelcomeDefaultOn="SuiWelcomeDefaultOn",t.MonadMainnetWelcome="MonadMainnetWelcome",t.ArbitrumWelcome="ArbitrumWelcome",t.StakingWelcome="StakingWelcomeNew",t.ClaimUsernameNudge="ClaimUsernameNudge",t.QuickClaimUsername="QuickClaimUsername",t.SeedlessPinVerification="SeedlessPinVerification",t.TermsOfServiceUpdate="TermsOfServiceUpdate",t.NotificationsUpdate="NotificationsUpdate",t.PerpsJoinFeedbackGroup="PerpsJoinFeedbackGroup",t.PerpsIntro="PerpsIntro",t.CashWaitlistActivated="CashWaitlistActivated",t.CashGeneralAccessActivation="CashGeneralAccessActivation",t.PredictionInsiderTradingAttestation="PredictionInsiderTradingAttestation"})(E||(E={}));i();s();i();s();var To=n(t=>{let e=[];for(let o in t.errors)Array.isArray(t.errors[o])&&e.push(t.errors[o].join(", "));return e.join(", ")},"formatErrorMessages");var bo;(function(t){t.Upgrade="upgrade",t.Noop="noop"})(bo||(bo={}));var oa=n(async({locale:t})=>{let e;try{let o=JSON.stringify({platform:mo,appVersion:Te,locale:t}),r=await ut.api().headers({"Content-Type":"application/json"}).post(({apiEnv:c})=>`/banners/force_upgrade/${c}/v1`,o);if(r.status===400){let c=await r.data,u=To(c);throw new Error(u)}else if(r.status<200||r.status>299)throw new Error(`status code: ${r.status}, body: ${r.statusText}`);let a=r.data;return a?{...a}:ea}catch(o){return e===400&&o instanceof Error&&j.captureError(o,G.ActionBanner),ea}},"fetchForceUpgradeStatus"),ea={forceUpgradeStatus:bo.Noop};i();s();i();s();var ra=n(async({locale:t})=>({...await oa({locale:t})}),"fetchForceUpgrade");i();s();var Kt="@phantom/interstitials",Pe=`${Kt}:action-banners`,na=`${Kt}:force-upgrade`,hr={actionBanners:n((t,e)=>[Pe,{accountIdentifier:t,accessToken:e}],"actionBanners"),hasSeenInterstitial:n(t=>[`${Kt}:has-seen-interstitial`,{feature:t}],"hasSeenInterstitial"),interstitialViewHistory:n(t=>[`${Kt}:interstitial-view-history`,{feature:t}],"interstitialViewHistory"),appLaunchTimes:n(()=>[`${Kt}:app-launch-times`],"appLaunchTimes"),lastOnboardedAt:n(()=>[`${Kt}:last-onboarded-at`],"lastOnboardedAt"),contentCards:[`${Kt}:content-cards`]};var fs=n(()=>L({queryKey:[na],queryFn:n(async()=>{let e=fo(v.language)??"en";return ra({locale:e})},"queryFn"),enabled:!!Te,staleTime:R({minutes:5})}),"useForceUpgrade");i();s();i();s();i();s();i();s();var Ss={[E.Multichain]:2,[E.MultichainSwapper]:1,[E.InvalidChecksum]:1,[E.SuiWelcome]:1,[E.SuiWelcomeDefaultOn]:1,[E.MonadMainnetWelcome]:1,[E.ArbitrumWelcome]:1,[E.ClaimUsernameNudge]:1,[E.QuickClaimUsername]:1,[E.SeedlessPinVerification]:1,[E.AdditionalPermissions]:1,[E.TermsOfServiceUpdate]:1,[E.StakingWelcome]:1,[E.PerpsJoinFeedbackGroup]:1,[E.PerpsIntro]:1,[E.NotificationsUpdate]:1,[E.CashWaitlistActivated]:1,[E.CashGeneralAccessActivation]:1,[E.PredictionInsiderTradingAttestation]:1},gs={[E.Multichain]:3,[E.MultichainSwapper]:1,[E.InvalidChecksum]:1,[E.SuiWelcome]:1,[E.SuiWelcomeDefaultOn]:1,[E.MonadMainnetWelcome]:1,[E.ArbitrumWelcome]:1,[E.StakingWelcome]:1,[E.ClaimUsernameNudge]:1,[E.QuickClaimUsername]:1,[E.AdditionalPermissions]:1,[E.SeedlessPinVerification]:1,[E.TermsOfServiceUpdate]:1,[E.PerpsJoinFeedbackGroup]:1,[E.PerpsIntro]:1,[E.NotificationsUpdate]:1,[E.CashWaitlistActivated]:1,[E.CashGeneralAccessActivation]:1,[E.PredictionInsiderTradingAttestation]:1},vo=n(t=>po?Ss[t]:dn?gs[t]:-1,"getMostRecentVersion");var ks=1,xo=".phantom-labs.settings.interstitials";var ys={...kn(xo,[`${Kt}:has-seen-interstitial`,`${Kt}:interstitial-view-history`],(t,e)=>({version:ks,interstitialsSeen:{...t?.interstitialsSeen,...e?.interstitialsSeen},interstitialsViewHistory:{...t?.interstitialsViewHistory,...e?.interstitialsViewHistory}}))};var mt;(function(t){t.LastOnboardedAt="lastOnboardedAt",t.AppLaunchTimes="appLaunchTimes",t.DismissedActionBanners="dismissedActionBanners",t.DismissedContentCards="dismissedContentCards"})(mt||(mt={}));var hs=A.object({version:A.literal(1),dismissedContentCards:A.record(A.string().describe("cardId"),A.object({dismissedTimestamp:A.number().describe("unix timestamp in milliseconds of dismissal")}))}),[Io,aa]=Sn("interstitials",[{key:mt.LastOnboardedAt,defaultValue:-1,type:"number"},{key:mt.AppLaunchTimes,defaultValue:[],type:"array",validator:A.array(A.number())},{key:mt.DismissedActionBanners,defaultValue:[],type:"array",validator:A.array(A.string())},{key:mt.DismissedContentCards,type:"object",validator:hs,nullable:!0}]),fe=n((...t)=>Be(Io,...t),"useInterstitialsStorage"),Po=n((...t)=>Be(aa,...t),"useSetInterstitialsStorage"),As=1,ws=A.object({version:A.literal(1),interstitialsSeen:A.record(A.number()).optional(),interstitialsViewHistory:A.record(A.array(A.number())).optional()}),Ts=n((t,e)=>{let o=t,r=e;return!o&&!r?null:{version:As,interstitialsSeen:{...o?.interstitialsSeen??{},...r?.interstitialsSeen??{}},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},...r?.interstitialsViewHistory??{}}}},"interstitialsResolver"),[Ar,ia,bs]=gn("interstitials",[{key:xo,type:"object",validator:ws,nullable:!0,resolver:Ts,updateOn:"idle"}]);var wr=n((...t)=>Be(ia,...t),"useSetSyncedInterstitialsStorage"),sa=n((...t)=>Be(bs,...t),"useAsyncSyncedInterstitialsStorage");var Ke=n(t=>{let{value:e,isReady:o}=sa(".phantom-labs.settings.interstitials"),r=vo(t);return{isReady:o,data:(e?.interstitialsSeen?.[t]??0)>=r}},"useHasSeenInterstitial");i();s();var ca=x(C());var vs=1,kt=n(t=>{let e=wr(".phantom-labs.settings.interstitials");return(0,ca.useCallback)(async()=>{let o=Ar(".phantom-labs.settings.interstitials"),r=vo(t);await e({version:vs,interstitialsSeen:{...o?.interstitialsSeen??{},[t]:r},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},[t]:[...o?.interstitialsViewHistory?.[t]??[],Date.now()]}})},[t,e])},"useSetHasSeenInterstitial");i();s();var Tr=x(Bt(),1);i();s();var ua=x(C());var Eo=class extends ua.default.Component{static{n(this,"ErrorBoundary")}constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return e instanceof Error?{error:e}:typeof e=="string"?{error:new Error(e)}:{error:new Error}}componentDidCatch(e,o){e instanceof Error&&j.captureError(e,G.Generic)}render(){return this.state.error?typeof this.props.fallback=="function"?this.props.fallback(this.state.error):this.props.fallback:this.props.children}};var Co=x(C(),1);var Se=Co.default.memo(({children:t,i18nKey:e,...o})=>{let{t:r}=Y(),a=(0,Co.useMemo)(()=>(e?`${r(e,{...o,...o.values})}`:"").replace(/<\/?[^>]+(>|$)/g,""),[e,o,r]);return(0,Tr.jsx)(Eo,{fallback:a,children:(0,Tr.jsx)(bn,{i18nKey:e,...o,children:t})})});i();s();i();s();i();s();i();s();i();s();var da=n(async({accountID:t,deviceId:e,locale:o,rootId:r,selectedAccountAddresses:a,accessToken:c})=>{let u;try{let l={accountID:t,deviceId:e,locale:o,platform:mo,rootId:r,selectedAccountAddresses:a,version:Te},d=await ut.api().headers({"Content-Type":"application/json"}).bearer(c).post(({apiEnv:S})=>`/banners/get_banners/${S}/v2`,l);if(d.status===400){let S=await d.data,m=To(S);throw new Error(m)}else if(d.status<200||d.status>299)throw new Error(`status code: ${d.status}, body: ${await d.statusText}`);let p=d.data;return p?{...p,banners:p.banners??[]}:la}catch(l){return u===400&&l instanceof Error&&j.captureError(l,G.ActionBanner),la}},"fetchSanityActionBanners"),la={id:void 0,banners:[]};i();s();i();s();var br=n(t=>t?Object.values(Ve).includes(t):!1,"isActionBannerDestinationSupported");i();s();var ma=n(t=>{switch(t){case vt.BottomSheet:return po;case vt.Modal:return!0;default:return!1}},"isActionBannerInterstitialSupported");var pa=n(t=>{let{bannerType:e,destinationType:o}=t;switch(e){case vt.DirectLink:return br(o);case vt.BottomSheet:case vt.Modal:return ma(e)&&br(o);default:return!1}},"isActionBannerSupported");var fa=n(async({accountID:t,deviceId:e,dismissedBanners:o,locale:r,rootId:a,selectedAccountAddresses:c,accessToken:u})=>{let l=await da({accountID:t,deviceId:e,locale:r,rootId:a,selectedAccountAddresses:c,accessToken:u});return{...l,banners:l.banners.filter(d=>pa(d)&&!o.includes(d.id))}},"fetchActionBanners");var xs=R({minutes:1}),Is=n(()=>{let t=Dt(),{data:e,isLoading:o}=Cn(),{data:r}=ee(),a=n(async()=>{let c=r?.type!==de.ReadOnly?r?.addresses.map(fn)??[]:[],u=r?.type===de.Seed?r.seedIdentifier:null,l=Io(mt.DismissedActionBanners),d=fo(v.language)??"en",p=await t.getDeviceId();return fa({accountID:r?.identifier??"",deviceId:p,dismissedBanners:l,locale:d,rootId:u,selectedAccountAddresses:c,accessToken:e?.accessToken})},"queryFn");return L({queryKey:hr.actionBanners(r?.identifier,e?.accessToken),queryFn:a,enabled:!o&&!!r?.identifier,staleTime:xs})},"useActionBanners");i();s();i();s();var Lo=x(C());i();s();var Sa=n(()=>{let t=fe(mt.LastOnboardedAt),e=fe(mt.AppLaunchTimes);if(e.length<2)return!0;if(t!==void 0){let[o,r]=e;if(t<o&&t<r)return!1}return!0},"useHasJustOnboarded");function qe(t,e,o){let{data:r,isReady:a}=Ke(t),{data:c}=An(e?[e]:[]),u=c?.length===1?c[0]:!0,l=Sa(),d=(0,Lo.useCallback)(()=>o(),[o]);return(0,Lo.useMemo)(()=>u&&a&&!r&&!l&&d(),[u,r,l,d,a])}n(qe,"useNewFeatureVisibility");i();s();var _o=x(Bt());var Ee=x(C());var vr={data:{feature:"arbitrum"}},Ps=n(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:r=n(()=>!0,"condition")})=>{let{t:a}=Y(),{mutateAsync:c}=Ln(),[u]=_n([lt.Arbitrum]),l=kt(E.ArbitrumWelcome),d=qe(E.ArbitrumWelcome,"enable-arbitrum",()=>r()&&!u&&!lo()),p=(0,Ee.useCallback)(async()=>{await c({chainIDs:[lt.Arbitrum]}),t(),l()},[c,t,l]),S=(0,Ee.useCallback)(()=>{e(),l()},[e,l]),m=(0,Ee.useMemo)(()=>({title:a("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:a("interstitialArbitrumWelcomeItemTitle_1"),icon:(0,_o.jsx)(oe,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:a("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:a("interstitialArbitrumWelcomeItemTitle_2"),icon:(0,_o.jsx)(oe,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:a("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:a("interstitialArbitrumWelcomeItemTitle_3"),icon:(0,_o.jsx)(oe,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:a("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:a("interstitialArbitrumWelcomePrimaryButtonText"),onAction:p,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:vr}},secondaryButton:{children:a("commandNotNow"),onAction:S,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:vr}},onDismiss:l,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:vr}}),[a,p,S,o,l]);return(0,Ee.useMemo)(()=>({interstitial:m,shouldShow:d}),[m,d])},"useArbitrumWelcomeModal");i();s();var Mo=x(Bt());var Ce=x(C());var xr={data:{feature:"staking"}},Es=n(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:r=n(()=>!0,"condition")})=>{let{t:a}=Y(),c=kt(E.StakingWelcome),u=qe(E.StakingWelcome,"enable-psol-welcome-modal",()=>r()&&!lo()),l=(0,Ce.useCallback)(()=>{t(),c()},[t,c]),d=(0,Ce.useCallback)(()=>{e(),c()},[e,c]),p=(0,Ce.useMemo)(()=>({title:void 0,mobileTitleSheetInset:mn,items:[{key:"stakingValueProp1",title:a("stakingInterstitialWelcomeItemTitle_1"),icon:(0,Mo.jsx)(oe,{icon:"InfoCircle",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:a("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:a("stakingInterstitialWelcomeItemTitle_2"),icon:(0,Mo.jsx)(oe,{icon:"TrendingUp",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:a("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:a("stakingInterstitialWelcomeItemTitle_3"),icon:(0,Mo.jsx)(oe,{icon:"Shield",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:a("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:a("stakingInterstitialWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:xr},background:"spot",theme:"positive"},secondaryButton:{children:a("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:xr}},onDismiss:c,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:xr},disclaimers:[a("mintStakeInfoPageDisclaimer1"),a("mintStakeInfoPageDisclaimer2_US")]}),[a,l,d,o,c]);return(0,Ce.useMemo)(()=>({interstitial:p,shouldShow:u}),[p,u])},"useStakingWelcomeModal");i();s();var Gt=x(Bt());var Le=x(C());var Cs="https://phantom.com/terms",Ls="https://phantom.com/privacy",_s="https://phantom.com/terms-and-privacy-update",Ms=n(({onConfirm:t,openUrl:e})=>{let{t:o}=Y(),r=Dt(),a=kt(E.TermsOfServiceUpdate),c=(0,Le.useCallback)(async()=>{a(),t()},[a,t]),u=(0,Le.useCallback)(d=>async()=>{await r.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await e(d)},[r,e]),l=(0,Le.useMemo)(()=>({title:o("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:o("commandContinue"),onAction:c,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:(0,Gt.jsx)(Os,{openUrl:u}),dismissGestureDisabled:!0}),[o,c,u]);return(0,Le.useMemo)(()=>({interstitial:l}),[l])},"useTermsOfServiceUpdated"),Os=n(({openUrl:t})=>(0,Gt.jsx)(it,{marginTop:24,children:(0,Gt.jsx)(Q,{font:"body",align:"center",children:(0,Gt.jsxs)(Se,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle",children:["Please review our updated",(0,Gt.jsx)(Q,{onPress:t(Cs),color:"spotBase",children:"Terms of Use"}),"and",(0,Gt.jsx)(Q,{onPress:t(Ls),color:"spotBase",children:"Privacy Policy"}),". By continuing, you agree to the updated terms and policies.",(0,Gt.jsx)(Q,{onPress:t(_s),color:"spotBase",children:"Learn More"}),"."]})})}),"TermsOfServiceUpdateDescription");i();s();var ga=x(Bt());var ka=x(C());i();s();var Ns=x(Bt());var ya=x(C());i();s();var Fs=x(Bt());var ha=x(C());i();s();var Us=x(C());i();s();var Aa=x(C());var Bs=n(()=>{let t=fe(mt.DismissedActionBanners),e=Po(mt.DismissedActionBanners),o=wt();return(0,Aa.useCallback)(r=>{e([...t,r]),o.setQueriesData({queryKey:[Pe]},a=>{if(!a)return;let c=a.banners.filter(u=>u.id!==r);return{...a,banners:c}})},[t,e,o])},"useDismissActionBanner");i();s();i();s();var Rs=x(C());i();s();var tf=R({seconds:20}),ef=R({seconds:5});var mf=R({minutes:5});i();s();var wa=n(async t=>{await t.invalidateQueries({queryKey:[Pe]})},"invalidateActionBanners");wn(wa);var Ta=n(t=>t,"coerceStorageKey"),Mf=n(t=>fe(Ta(t)),"useInterstitialStorage"),Of=n(t=>Po(Ta(t)),"useSetInterstitialStorage");i();s();i();s();var Ir=class{static{n(this,"ActionBannerAnalytics")}#t;constructor(e){this.#t=e}onBannerSeen=n(e=>{this.#t.capture("actionBannerSeenByUser",{data:{banner:e}})},"onBannerSeen");onBannerClick=n(e=>{this.#t.capture("actionBannerClickedByUser",{data:{banner:e}})},"onBannerClick");onBannerDismiss=n(e=>{this.#t.capture("actionBannerDismissedByUser",{data:{banner:e}})},"onBannerDismiss");onInterstitialSeen=n(e=>{this.#t.capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})},"onInterstitialSeen");onInterstitialPrimaryClick=n(e=>{this.#t.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialPrimaryClick");onInterstitialSecondaryClick=n(e=>{this.#t.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialSecondaryClick");onInterstitialDismiss=n(e=>{this.#t.capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})},"onInterstitialDismiss")};i();s();var Ds=n(({id:t,humanReadableId:e,description:o,bannerType:r})=>({id:t,humanReadableId:e,description:o,type:r}),"generateActionBannerBaseAnalyticsPayload"),Vs=n(({id:t,humanReadableId:e,description:o,bannerType:r,interstitial:a})=>{let{title:c,primaryButtonText:u,secondaryButtonText:l}=a,d;if(r===vt.Modal)for(let[p,S]of Object.values(a.lineItems).entries())d={...d??{},[`lineItem${p+1}`]:{title:S.title,description:S.description}};return{id:t,humanReadableId:e,description:o,type:r,interstitial:{title:c,body:d,primaryButtonText:u??v.t("commandContinue"),secondaryButtonText:l??v.t("commandDismiss")}}},"generateActionBannerInterstitialAnalyticsPayload");i();s();i();s();var Oo=x(ds(),1);var va=x(nn(),1);var ba=(0,Oo.struct)([(0,Oo.u8)("instruction"),Nn("amount")]);function Pr(t,e,o,r,a=[],c=Ie){let u=Un([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],o,a),l=Buffer.alloc(ba.span);return ba.encode({instruction:Fn.Approve,amount:BigInt(r)},l),new va.TransactionInstruction({keys:u,programId:c,data:l})}n(Pr,"createApproveInstruction");var xa=new g.PublicKey("Config1111111111111111111111111111111111111"),Ks="https://docs.solana.com/staking",qs="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating";var pt={type:De.SolanaNative,data:{amount:"0",balance:new rt(0),chain:{id:O.solana.mainnetID,imageUrl:O.solana.iconUrl,name:O.solana.name,symbol:O.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:Vn.NotVerified}},Ia=new Map([[At.Solana.Mainnet,pt]]);var Er="https://www.jito.network/staking/?mode=unstake",Cr="https://help.phantom.com/hc/en-us/articles/29846774040467",Ws="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Lr="https://help.phantom.com/hc/en-us/articles/41210373532307";var _r="https://kamino.com/borrow/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",re="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",No=4e6,We=2282880;i();s();var _e;(function(t){t.Initialized="initialized",t.Delegated="delegated"})(_e||(_e={}));var He=A.object({apy:A.number()}),Hs=A.object({validators:A.array(A.string())}),Pa=A.object({epoch:A.number(),effectiveSlot:A.number(),amount:A.number(),postBalance:A.number(),percentChange:A.number(),apr:A.number(),timestamp:A.number()}),Gs=A.object({items:A.array(Pa)}),js=A.object({address:A.string(),chainId:fr,decimals:A.number(),logoURI:A.string(),name:A.string(),symbol:A.string()}),Qs=A.object({caip19:A.string(),metadata:js}),Ys=A.object({vote_account:A.string()}),$s=A.object({apy:A.string(),totalRewardsFeePercentage:A.string().optional(),chainId:fr,convertRatio:A.string(),name:A.string(),stakePoolAddress:A.string(),stakePoolTokenMetadata:Qs,validators:A.array(Ys)}),Ea=A.record(A.string(),A.array($s)),DS=A.object({totalStaked:A.string(),rewards:A.string()}),Ge=n(t=>t==="inactive","canWithdrawStakeAccount"),je=n(t=>t==="active"||t==="activating","canUnstakeStakeAccount");i();s();function Fo(t,e){let o=new K(t/100),r=new K(e/100);return o.minus(o.times(r)).times(100).decimalPlaces(2).toNumber()}n(Fo,"calculateTotalValidatorAPY");function Ca(t){return new K(t/100).times(100).decimalPlaces(2).toNumber()}n(Ca,"formatTotalValidatorAPY");i();s();i();s();i();s();var $="staking",Ct;(function(t){t.convertStakeList="convertStakeAccountList",t.supportedTokens="liquidStakingSupportedTokens",t.convertStakeTransaction="convertStakeTransaction",t.mintTokenTransaction="mintTokenTransaction",t.withdrawLiquidStakeTransaction="withdrawLiquidStakeTransaction",t.featureUsed="featureUsed"})(Ct||(Ct={}));var Mr=[$,"stakeAccounts"],Or=[$,"stakeActivationData"],Nr=[$,Ct.convertStakeList],Fr=[$,Ct.convertStakeTransaction],Ur=[$,Ct.mintTokenTransaction],Js=[$,Ct.withdrawLiquidStakeTransaction],zs=[$,"deactivateStakeTransaction"],Br="averageValidatorApy",Xs="recommendedValidators",Zs="signatureStatus",tc="stakeAccountMinBalance",ec="stakeRewardsHistory",oc="stakeApy",rc="validatorInfo",nc="voteAccounts",ac="validatorsV2",ic="keybaseUserAvatar",sc="epochTimeRemaining",M={keybaseUserAvatar(t){return[$,ic,t]},signatureStatus(t){return[$,Zs,t]},stakeAccounts(t,e){return[...Mr,t,e]},stakeAccountMinBalance(){return[$,tc]},stakeActivationData(t){return[...Or,t]},stakeRewardsHistory(t){return[$,ec,t]},stakeApy(){return[$,oc]},averageValidatorApy(){return[$,Br]},recommendedValidators(){return[$,Xs]},validatorInfo(){return[$,rc]},voteAccounts(t){return[$,nc,t]},validatorsV2(){return[$,ac]},convertStakeAccountList(t,e){return[...Nr,t,e]},liquidStakingSupportedTokens(){return[$,Ct.supportedTokens]},getConvertStakeTransaction(t){return[...Fr,t]},getMintTokenTransaction(t){return[...Ur,t]},getWithdrawLiquidStakeTransaction(t){return[...Js,t]},featureUsed(){return[$,Ct.featureUsed]},epochTimeRemaining(t){return[$,sc,t]},getDeactivateStakeTransaction(t){return[...zs,t]}};var Qe=n(t=>()=>{t.invalidateQueries({predicate:n(e=>{let o=n(r=>r.every((a,c)=>e.queryKey[c]===a),"matchesEveryKeyScope");return o(Mr)||o(Or)||o(Nr)||o(Fr)||o(Ur)},"predicate")})},"invalidateAllStakeAccountData");i();s();function Uo(t,e=9){return t.match(new RegExp(`^\\d*(\\.\\d{0,${e}})?$`))}n(Uo,"validateDecimals");i();s();var La={type:"fungible",isNativeOfType:"sol",chain:lt.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},cc="stake",_a=n(t=>new Rr(t,cc),"createStakeAnalytics"),Rr=class extends ve{static{n(this,"StakeAnalytics")}createStakeAccountAndDelegateStake=n(e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...e,...La}})},"createStakeAccountAndDelegateStake");deactivateStake=n(()=>{this.analytics.capture("deactivateStake",{data:{...La}})},"deactivateStake")};var Dr=xn(Dt,t=>_a(t));i();s();var Wa=x(C());i();s();var Ma=new Error("Failed to fetch validators from API"),uc=new Error("Missing validators in response"),lc=A.object({validators:A.array(A.object({identityPubkey:A.string(),voteAccountPubkey:A.string(),commission:A.number(),lastVote:A.number(),epochCredits:A.array(A.tuple([A.number(),A.number(),A.number()])).nullish().transform(t=>t??[]),activatedStake:A.number(),info:A.object({details:A.string().optional(),keybaseUsername:A.string().optional(),name:A.string(),website:A.string().optional(),iconUrl:A.string().nullish().transform(t=>t??"")}).optional(),totalApy:A.number()}))});async function Oa(){try{let t=await ut.api().get("/staking/v1/validators");if(!Rt(t))throw Ma;let e=lc.safeParse(t.data);if(!e.success)throw console.error("Failed to parse validators from API",e.error),uc;return e.data.validators}catch(t){throw console.error("Failed to fetch validators from API",t),Ma}}n(Oa,"getValidatorsFromAPI");i();s();var ne;(function(t){t[t.Always=1/0]="Always",t[t.Short=R({days:1})]="Short",t[t.Medium=R({days:3})]="Medium",t[t.Long=R({days:7})]="Long"})(ne||(ne={}));var V;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=R({minutes:1})]="Short",t[t.Medium=R({minutes:2.5})]="Medium",t[t.Long=R({minutes:5})]="Long",t[t.Never=1/0]="Never"})(V||(V={}));i();s();var Bo=x(C());i();s();var Fa=n((t,e)=>t+e[1],"calcReturns");function Ua(t){let e=dc(t),o={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},r=pc(e.maxEpochCredits,e.maxActivatedStake,o);return t.sort(r)}n(Ua,"sortVoteAccounts");function dc(t){let e={maxEpochCredits:0,maxActivatedStake:0};for(let o of t){let r=o.epochCredits.reduce(Fa,0);e.maxEpochCredits<r&&(e.maxEpochCredits=r),e.maxActivatedStake<o.activatedStake&&(e.maxActivatedStake=o.activatedStake)}return e}n(dc,"findMaxValues");function mc(t,e,o,r,a){let c=(100-t)/100,u=e/o,l=Math.log10(r+1)/Math.log10(a+1);return{normalizedCommission:c,normalizedEpochCredits:u,normalizedActivatedStake:l}}n(mc,"calculateNormalizedValues");function Na(t,e,o,r){let{commission:a,epochCredits:c,activatedStake:u}=t,{commissionWeight:l,epochCreditsWeight:d,activatedStakeWeight:p}=r,{normalizedCommission:S,normalizedEpochCredits:m,normalizedActivatedStake:y}=mc(a,c.reduce(Fa,0),e,u,o);return(a>10?.5:1)*(l*S+d*m+p*y)}n(Na,"calculateScore");function pc(t,e,o){return(r,a)=>{let c=Na(r,t,e,o);return Na(a,t,e,o)-c}}n(pc,"createVoteAccountSorter");i();s();i();s();var Ba=new Error("Failed to fetch staking APY");async function Ra(){try{let t=await ut.api().get("/staking/v1/apy");if(!Rt(t))throw Ba;let e=t.data;return He.parse(e).apy}catch{throw Ba}}n(Ra,"getStakingApy");var Da=n(()=>{let t=M.stakeApy();return L({enabled:!0,queryKey:t,gcTime:ne.Short,staleTime:V.Never,async queryFn(){return Ra()}})},"useStakeApy");i();s();var fc=n(t=>async()=>(await t.getParsedProgramAccounts(xa)).reduce((o,r)=>{if(r.account.data.parsed?.type!=="validatorInfo")return o;let a=r.pubkey.toString(),c=r.account.data.parsed.info.keys,[,u]=c;if(!u.signer)return o;let l=u.pubkey,d=r.account.data.parsed.info.configData;return o.push({identityPubkey:l,infoPubkey:a,info:d}),o},[]),"fetchValidatorInfo");function Va(t,e){let o=M.validatorInfo(),r=fc(t);return L({queryKey:o,queryFn:r,placeholderData:[],staleTime:V.Never,enabled:e})}n(Va,"useValidatorInfo");i();s();var Sc=n(async t=>{let e=await t.getVoteAccounts();return[...e.current,...e.delinquent].map(o=>({identityPubkey:o.nodePubkey,voteAccountPubkey:o.votePubkey,commission:o.commission,lastVote:o.lastVote,epochCredits:o.epochCredits,activatedStake:o.activatedStake})).filter(o=>o.commission<99)},"fetchVoteAccounts");function Ka(t,e){let o=M.voteAccounts(t.rpcEndpoint);return L({queryKey:o,queryFn:n(async()=>Sc(t),"queryFn"),placeholderData:[],staleTime:V.Never,enabled:e})}n(Ka,"useVoteAccounts");function qa(t,e){let{isFetched:o,isFetching:r,isSuccess:a,isError:c,isPending:u,dataUpdatedAt:l,errorUpdatedAt:d,error:p,refetch:S,data:m}=Ka(t,e),y=Math.max(l,d),{data:k=null}=Da(),{isFetched:h,isFetching:w,isSuccess:T,isPending:b,isError:N,dataUpdatedAt:B,errorUpdatedAt:H,error:J,refetch:Z,data:z}=Va(t,e),_=Math.max(B,H),et=u||b,at=Math.max(y,_),tt=o&&h,ot=r||w,It=a||T,Ut=c||N,Yt=p||J,$t=(0,Bo.useCallback)(async()=>{Promise.all([S(),Z()])},[Z,S]);return{results:(0,Bo.useMemo)(()=>{if(!m)return[];if(!z)return[];let zt=Ua(m),Xt=new Map(zt.map(D=>[D.identityPubkey,D])),X=new Map(z.map(D=>[D.identityPubkey,D])),gt=[];for(let[D,Pt]of Xt){let we=X.get(D);gt.push({...Pt,...we,totalApy:k?Fo(k,Pt.commission):0})}return gt},[z,m,k]),dataUpdatedAt:at,error:Yt,isSuccess:It,isError:Ut,isFetched:tt,isFetching:ot,isPending:et,refetch:$t}}n(qa,"useValidators");function gc(t){let e=M.validatorsV2(),o=L({enabled:t,queryKey:e,gcTime:ne.Short,staleTime:V.Long,async queryFn(){return Oa()}});return{results:(0,Wa.useMemo)(()=>{let a=o.data??[];return a.sort((c,u)=>u.totalApy-c.totalApy),a},[o.data]),dataUpdatedAt:o.dataUpdatedAt,error:o.error,isSuccess:o.isSuccess,isError:o.isError,isFetched:o.isFetched,isFetching:o.isFetching,isPending:o.isPending,refetch:n(async()=>{await o.refetch()},"refetch")}}n(gc,"useValidatorsV2Inner");function Ye(){let{connection:t}=dt(),e=hn("kill-validators-v2"),o=qa(t,e),r=gc(!e);return e?o:r}n(Ye,"useValidatorsV2");i();s();function Vr(t){let e=!!t?.info.meta.lockup,o=new Date((t?.info.meta.lockup?.unixTimestamp??0)*1e3);return e&&o.getTime()>Date.now()}n(Vr,"isLockedStakeAccount");i();s();var Ko=x(C());i();s();var Ya=x(C());i();s();var kc="https://keybase.io/_/api/1.0/user/pic_url.json",Ro=n(async t=>{let e=await ut.get(`${kc}?username=${encodeURIComponent(t)}`);if(!Rt(e)||e.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return e.data.pic_url},"getKeybaseUserAvatar");i();s();i();s();i();s();function Do(t,e){for(let o of e)if(o.epoch===t)return o;return null}n(Do,"getStakeHistoryEntry");var Ha=.09;function yc(t,e,o){if(t.activationEpoch===t.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(e===t.activationEpoch)return{effective:BigInt(0),activating:t.stake};if(e<t.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let r=t.activationEpoch,a=Do(r,o);if(a!==null){let c=BigInt(0);for(;a!==null;){r++;let u=t.stake-c,l=Number(u)/Number(a.activating),d=Number(a.effective)*Ha,p=BigInt(Math.max(1,Math.round(l*d)));if(c+=p,c>=t.stake){c=t.stake;break}if(r>=e||r>=t.deactivationEpoch)break;a=Do(r,o)}return{effective:c,activating:t.stake-c}}else return{effective:t.stake,activating:BigInt(0)}}n(yc,"getStakeAndActivating");function Ga(t,e,o){let{effective:r,activating:a}=yc(t,e,o);if(e<t.deactivationEpoch)return{effective:r,activating:a,deactivating:BigInt(0)};if(e==t.deactivationEpoch)return{effective:r,activating:BigInt(0),deactivating:r};let c=t.deactivationEpoch,u=Do(c,o);if(u!==null){let l=r;for(;u!==null&&(c++,u.deactivating!==BigInt(0));){let d=Number(l)/Number(u.deactivating),p=Number(u.effective)*Ha,S=BigInt(Math.max(1,Math.round(d*p)));if(l-=S,l<=0){l=BigInt(0);break}if(c>=e)break;u=Do(c,o)}return{effective:l,deactivating:l,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}n(Ga,"getStakeActivatingAndDeactivating");i();s();var ja=n(function(t){if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");let e=[];return t.value.data.parsed.info.forEach(o=>{e.push({epoch:BigInt(o.epoch),effective:BigInt(o.stakeHistory.effective),activating:BigInt(o.stakeHistory.activating),deactivating:BigInt(o.stakeHistory.deactivating)})}),e},"getStakeHistory"),Qa=n(function(t){let e=BigInt(0);if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");return t.value.data.parsed.type==="delegated"&&(e=BigInt(1)),{discriminant:e,meta:{rentExemptReserve:BigInt(t.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:t.value.data.parsed.info.meta.authorized.staker,withdrawer:t.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(t.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(t.value.data.parsed.info.meta.lockup.epoch),custodian:t.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:t.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(t.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(t.value.data.parsed.info.stake.creditsObserved)}}},"getStakeAccount");async function $e(t,e){let o=new g.PublicKey("SysvarStakeHistory1111111111111111111111111"),r=await t.getParsedAccountInfo(e);if(r===null||r.value===null)throw new Error("Account not found");let a=await t.getParsedAccountInfo(o);if(a===null)throw new Error("StakeHistory not found");let c=ja(a),u=await t.getEpochInfo(),l=Qa(r),{effective:d,activating:p,deactivating:S}=Ga(l.stake.delegation,BigInt(u.epoch),c),m;S>0?m="deactivating":p>0?m="activating":d>0?m="active":m="inactive";let y=BigInt(r.value.lamports)-d-l.meta.rentExemptReserve;return{state:m,active:Number(d),inactive:Number(y)}}n($e,"getStakeActivation");var hc=n(t=>{let e=[];return t.ownerPublicKey&&e.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&e.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}}),e},"getStakeAccountFilters"),$a=n(async(t,e,o)=>{let r=hc(e),a=await t.getParsedProgramAccounts(g.StakeProgram.programId,{filters:r}),u=(await Promise.allSettled(a.map(p=>$e(t,p.pubkey)))).map(p=>{if(p.status==="fulfilled")return p.value.state}),d=(await Promise.allSettled(a.map(p=>{let S=p.account.data?.parsed?.info?.stake?.delegation?.voter,m=o.get(S),y=m?.info?.keybaseUsername,k=m?.info?.iconUrl;return k?new Promise(h=>h(k)):y?Ro(y):new Promise(h=>h(null))}))).map(p=>{if(p.status==="fulfilled"&&p.value!==null)return p.value});return a.map((p,S)=>({pubkey:p.pubkey.toString(),lamports:p.account.lamports,activationState:u[S],imageUri:d[S],...p.account.data.parsed}))},"fetchStakeAccounts"),Ja=n((t,e)=>M.convertStakeAccountList(t,e),"getQueryKey"),Ac=n((t,e,o)=>()=>$a(t,{ownerPublicKey:e},o),"getQueryFn");function za(t,e,o,r=!0){let a=Ja(e,t.rpcEndpoint),c=Ac(t,e,o);return L({queryKey:a,queryFn:c,enabled:!!e&&r,staleTime:V.Never})}n(za,"useConvertStakeAccountList");var Xa=n((t,e,o,r)=>{let a=wt();return(0,Ya.useCallback)(async()=>{r&&await a.prefetchQuery({queryKey:Ja(e,t.rpcEndpoint),queryFn:n(()=>$a(t,{ownerPublicKey:e},o),"queryFn")})},[a,e,t,o,r])},"usePrefetchConvertStakeAccountList");i();s();var xt=x(C());var Vo=null,wc=n(t=>{if(!Vo&&t){let e="liquidStake";Vo=new ve(t,e)}if(!Vo)throw new Error("liquidStakeAnalytics was not properly configured");return Vo},"getLiquidStakeSequenceAnalytics"),Lt=n(()=>{let t=Dt(),e=wc(t),o=(0,xt.useCallback)((k,h)=>{t.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:k,stakeAccountBalance:h}}})},[t]),r=(0,xt.useCallback)(k=>{t.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:k}}})},[t]),a=(0,xt.useCallback)(()=>{t.capture("liquidStakingConvertBannerClicked")},[t]),c=(0,xt.useCallback)(()=>{t.capture("liquidStakingConvertBannerSeen")},[t]),u=(0,xt.useCallback)(()=>{t.capture("liquidStakingConvertModalContinue")},[t]),l=(0,xt.useCallback)(()=>{t.capture("liquidStakingConvertModalNotNow")},[t]),d=(0,xt.useCallback)(({provider:k,convertDetails:h,amount:w,fromAmount:T,toAmount:b,fromAmountUSD:N,toAmountUSD:B})=>{t.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:k?.stakePoolAddress,token:k?.stakePoolTokenMetadata.metadata.name,fromAmount:T,toAmount:b,fromAmountUSD:N,toAmountUSD:B,apy:k?.apy,convertRatio:k?.convertRatio,caip19:k?.stakePoolTokenMetadata.caip19,validatorName:h?.validatorName,stakeAccountBalance:w}}})},[t]),p=(0,xt.useCallback)((k,h)=>{e.submittedTransaction(k,{chainType:q.Solana,chainName:lt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:h})},[e]),S=(0,xt.useCallback)(({amount:k,convertDetails:h,provider:w})=>{t.capture("liquidStakingConvertSuccess",{data:{stake:{apy:w?.apy,convertRatio:w?.convertRatio,caip19:w?.stakePoolTokenMetadata.caip19,stakePoolAddress:w?.stakePoolAddress,token:w?.stakePoolTokenMetadata.metadata.name,totalAmount:k,validatorName:h?.validatorName}}})},[t]),m=(0,xt.useCallback)(({amount:k,convertDetails:h})=>{t.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:h?.validatorName,stakeAccountBalance:k}}})},[t]),y=(0,xt.useCallback)(()=>{t.capture("liquidStakingConvertMoreClicked")},[t]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:r,trackConvertBannerClicked:a,trackConvertBannerSeen:c,trackConvertModalContinue:u,trackConvertModalNotNow:l,trackConvertApprovedByUser:d,trackConvertFailed:m,trackConvertSubmitted:p,trackConvertSuccess:S,trackConvertMoreClicked:y}},"useConvertStakeAnalytics");var Tc=n(()=>{let{connection:t}=dt(),{data:e}=bt(q.Solana),{trackConvertModalContinue:o,trackConvertModalNotNow:r}=Lt(),{results:a,isFetched:c}=Ye(),u=(0,Ko.useMemo)(()=>new Map(a.map(d=>[d.voteAccountPubkey,d])),[a]),l=Xa(t,e?.address??"",u,c);return(0,Ko.useEffect)(()=>{l()},[l]),{trackConvertModalContinue:o,trackConvertModalNotNow:r}},"useConvertStakeAccountInfoPageProps");i();s();i();s();var Za=n(({numSignatures:t,lamportsPerSignature:e,lamportBalance:o,rentExemptionMinimum:r})=>{let a=rt(e).multipliedBy(t),c=o.minus(a);return rt.max(c.minus(r),0)},"getMaxTransferrableSol");var bc=n(({balance:t,rentExemptionMinimum:e})=>{let o=Za({numSignatures:11,lamportsPerSignature:Dn,lamportBalance:rt(t),rentExemptionMinimum:ln(e)});return parseFloat(un(o).toFixed(9))},"useGetMaxTransferrableSol");i();s();var vc=n(t=>{let e=M.keybaseUserAvatar(t);return L({enabled:!!t,queryKey:e,async queryFn(){if(!t)throw new Error("Keybase username is required");return Ro(t)},placeholderData:"",staleTime:V.Never})},"useKeybaseUserAvatar");i();s();i();s();var ti=new Error("Missing sender address for staking fungibles."),ei=new Error("Missing signature from waiting for staking transaction confirmation."),oi=new Error("PublicKey is required"),Me;(function(t){t.MissingTransactionData="MissingTransactionData",t.UnknownError="UnknownError",t.FailedToConfirmTransaction="FailedToConfirmTransaction"})(Me||(Me={}));var ge=class extends Error{static{n(this,"StakingError")}constructor(e){super(e)}};var xc=n(async(t,e)=>await t.getSignatureStatuses([e],{searchTransactionHistory:!0}),"fetchSignatureStatus");function Ic(t,e,o){let r=wt(),a=M.signatureStatus(o),c=n(async()=>{if(!o)throw ei;let p=await xc(t,o);return{...p,value:p.value[0]}},"queryFn"),l=r.getQueryData(a)?.value?.confirmationStatus;return L({queryKey:a,queryFn:c,enabled:!!o&&l!=="finalized",refetchInterval:e,staleTime:V.Never})}n(Ic,"useSignatureStatus");i();s();var Pc=n(t=>async()=>await t.getMinimumBalanceForRentExemption(g.StakeProgram.space),"getStakeAccountMinBalance");function Ec(t){let e=M.stakeAccountMinBalance(),o=Pc(t);return L({queryKey:e,queryFn:o,placeholderData:0,staleTime:V.Never})}n(Ec,"useStakeAccountMinBalance");i();s();var Cc=n(async(t,e,o,r="confirmed")=>await t.getInflationReward(e,o,r),"getInflationReward"),Lc=n(async(t,e)=>{let o=[];e.ownerPublicKey&&o.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&o.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}});let r=await t.getParsedProgramAccounts(g.StakeProgram.programId,{filters:o}),a=[];if(e.fetchInflationRewards)try{a=await Cc(t,r.map(({pubkey:c})=>c))}catch(c){let u=c;!u.message.includes("RPC request timed out")&&j.captureError(u,G.Staking)}return r.map((c,u)=>({pubkey:c.pubkey.toString(),lamports:c.account.lamports,inflationReward:a[u]?.amount,...c.account.data.parsed}))},"fetchStakeAccounts"),_c=n((t,e)=>M.stakeAccounts(t,e),"getQueryKey"),Mc=n((t,e)=>()=>Lc(t,{ownerPublicKey:e,fetchInflationRewards:!0}),"getQueryFn");function Oc(t,e){let o=_c(e,t.rpcEndpoint),r=Mc(t,e);return L({queryKey:o,queryFn:r,placeholderData:[],staleTime:R({minutes:5})})}n(Oc,"useStakeAccounts");i();s();function Nc(t,e){let o=M.stakeActivationData(e);return L({queryKey:o,queryFn:n(async()=>{if(!e)throw oi;return await $e(t,new g.PublicKey(e))},"queryFn"),enabled:!!e,staleTime:V.Never})}n(Nc,"useStakeActivationData");i();s();var ai=x(C());i();s();i();s();var ri=new Error("Failed to fetch liquid staking supported tokens"),Fc=new Error("Missing supported tokens in response");async function ni(){try{let t=await ut.api().get("/liquid-staking/v1/supported-tokens");if(!Rt(t))throw ri;let e=Ea.safeParse(t.data.supportedTokens);if(!e.success)throw Fc;return e.data}catch{throw ri}}n(ni,"getLiquidStakingSupportedTokens");var qo=n(()=>{let t=M.liquidStakingSupportedTokens();return L({queryKey:t,staleTime:R({minutes:15}),async queryFn(){return await ni()}})},"useLiquidStakingSupportedTokens");function Uc(t){return typeof t=="string"?t:t?te(Vt(t)):""}n(Uc,"getCaip19String");var qt=n(t=>{let e=Uc(t),{data:o={}}=qo();return(0,ai.useMemo)(()=>!!Object.values(o).flat().find(a=>a.stakePoolTokenMetadata.caip19===e),[e,o])},"useIsSupportedLST");i();s();i();s();var Je=x(C());i();s();i();s();var ii=new Error("Failed to fetch Average Validator APY");async function si(){let t=await ut.api().get("/staking/v1/avg-validator-apy");if(!Rt(t))throw ii;let e=He.safeParse(t.data);if(e.success)return e.data.apy;throw ii}n(si,"getAverageValidatorApy");var ci=n(()=>{let t=M.averageValidatorApy();return L({enabled:!0,queryKey:t,gcTime:R({hours:1}),staleTime:1/0,async queryFn(){return si()}})},"useAverageValidatorApy");var ui=n(t=>{let e=(0,Je.useMemo)(()=>t?te(Vt(t)):"",[t]),{data:o,isPending:r}=ci(),a=o?o/100:null,{data:c={},isPending:u}=qo(),l=(0,Je.useMemo)(()=>c[e]??[],[e,c]),d=l?l[0]:void 0,p=(0,Je.useCallback)((S,m=!1)=>S?l.find(y=>y.stakePoolTokenMetadata.caip19===S):m?void 0:d,[d,l]);return{isLoading:u||r,isSupported:l.length>0,providers:l,pickedLSTProvider:p,defaultProvider:d,avgValidatorApy:a}},"useLiquidStaking");var _t=n(t=>{let e=Ia.get(t);return ui(e)},"useNativeLiquidStaking");i();s();var li=x(C());var Bc=n(({onLiquidStake:t,onNativeStake:e})=>{let{t:o}=Y(),r=Cr,{avgValidatorApy:a,pickedLSTProvider:c}=_t(At.Solana.Mainnet),u=qt(F),l=c(u?F:Wn);return{options:(0,li.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:o("stakeMethodSelectionLiquidStakingTitle"),description:o("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:l?.stakePoolTokenMetadata?.metadata?.symbol}),apy:l?o("stakeMethodEstApy",{apy:me(parseFloat(l.apy))}):null,disabled:!l,onClick:t??(()=>{})},{type:"native",isRecommended:!1,title:o("stakeMethodSelectionNativeStakingTitle"),description:o("stakeMethodSelectionNativeStakingDescription"),apy:a?o("stakeMethodEstApy",{apy:me(a)}):null,onClick:e,disabled:!1}],[a,l,t,e,o]),learnMoreLink:r}},"useStakingMethodSelectionProps");i();s();function Rc({hideOnLowBalance:t}){let{pickedLSTProvider:e}=_t(At.Solana.Mainnet),o=qt(F),r=e(F),{data:a}=Jn();if(!a||!r)return{shouldHide:!0,apy:0,formattedApy:"0%"};let c=Tt(a.totalQuantityString,a.decimals),u=!1;t&&(u=!c.isGreaterThan(0)),o||(u=!0);let l=parseFloat(r.apy),d=`${(l*100).toFixed(2)}%`;return{shouldHide:u,apy:l,formattedApy:d}}n(Rc,"useStakingWelcomeProps");i();s();var jt=n(()=>{let{data:t}=ta(),e=t==="GB",o=Sr("enable-uk-staking-disclaimers"),r=Sr("enable-uk-staking-override"),a=qt(F);return r?!0:o&&e&&a},"useShowUKDisclaimer");i();s();var mi=x(C());i();s();var Dc=n(async t=>{let e=await t.getEpochInfo(),o=e.slotsInEpoch-e.slotIndex;return{hours:o*.4/3600,totalSlots:e.slotsInEpoch,remainingSlots:o,epoch:e.epoch}},"fetchEpochTimeRemaining"),di=n(t=>{let e=M.epochTimeRemaining(t.rpcEndpoint);return L({queryKey:e,queryFn:n(async()=>Dc(t),"queryFn"),placeholderData:{hours:0,totalSlots:0,remainingSlots:0,epoch:0},staleTime:V.Long})},"useEpochTimeRemaining");var ke=n(()=>{let{t}=Y(),{connection:e}=dt(),{data:o}=di(e);return(0,mi.useMemo)(()=>{if(!o)return"";if(o.hours<24){let r=Math.max(o.hours,1),a=t(r===1?"timeUnitHour":"timeUnitHours");return`${r.toFixed(0)} ${a}`}else{let r=o.hours,a=Math.floor(r/24),c=r%24,u=Math.floor(c),l=t(u===1?"timeUnitHour":"timeUnitHours"),d=t(a===1?"timeUnitDay":"timeUnitDays");return u===0?`${a} ${d}`:`${a} ${d} ${u} ${l}`}},[o,t])},"useDurationUntilEpochEnds");i();s();i();s();var ze=x(C());i();s();var pi=n(t=>Vr(t)?!1:Ge(t.activationState),"isEligibleToConvert");var Wo=n(t=>{let{connection:e}=dt(),{data:o}=bt(q.Solana),{results:r,isFetched:a,isError:c}=Ye(),u=(0,ze.useMemo)(()=>new Map(r.map(T=>[T.voteAccountPubkey,T])),[r]),{data:l,isLoading:d,isFetching:p,error:S,refetch:m}=za(e,o?.address??"",u,a||c),y=d||p,k=(0,ze.useMemo)(()=>y||!l?[]:l.map(T=>Vc(T,u)).sort((T,b)=>T.lamports>b.lamports?-1:1),[y,l,u]),h=(0,ze.useMemo)(()=>k.filter(T=>T.eligible),[k]),w=(0,ze.useMemo)(()=>k.filter(T=>!T.eligible),[k]);return t?.stakePoolTokenMetadata.caip19===F?{hasConvertibleStakeAccounts:h.length>0||w.length>0,eligibleStakeAccounts:h,inelegibleStakeAccounts:w,isLoadingList:y,error:S,refetch:m}:{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:y,error:S,refetch:m}},"useConvertibleStakeAccounts"),Vc=n((t,e)=>{let o=pi(t),r=Kc(t,e),a=t.lamports;return{...t,amount:a,eligible:o,title:r,imageUri:t.imageUri}},"mapStakeAccountToViewState"),Kc=n((t,e)=>{let o="";if(t.type===_e.Delegated){let{voter:r}=t.info.stake.delegation,a=e.get(r),c=a?.info?.keybaseUsername;o=a?.info?.name??c??vn(r)}else t.type===_e.Initialized&&(o=t.pubkey);return o},"getTitleForConvertStakeAccount");i();s();var qc=n(()=>{let t=Xe();if(!t)throw new Error("PSOL provider not found");return t},"usePSolProviderUnsafe"),Xe=n(()=>{let{pickedLSTProvider:t}=_t(O.solana.mainnetID);return t(F,!0)},"usePSolProvider");i();s();var gi=x(C());i();s();var Ho=x(C());i();s();var Ze;(function(t){t.FeatureUsed="featureUsed"})(Ze||(Ze={}));function fi({key:t,queryKey:e,defaultValue:o=null}){let r=Re();return L({enabled:!0,queryKey:e,gcTime:ne.Long,staleTime:V.Never,async queryFn(){try{return await r.get(t)}catch(a){return a instanceof Error&&j.captureError(a,G.Staking),o}}})}n(fi,"useStakeStorageValue");function Si({key:t,queryKey:e}){let o=Re(),r=wt();return be({async mutationFn(a){try{return await o.set(t,a)}catch(c){c instanceof Error&&j.captureError(c,G.Staking);return}},async onMutate(a){await r.cancelQueries({queryKey:e});let c=r.getQueryData(e);return r.setQueryData(e,a),{previousValue:c}},onError(a,c,u){r.setQueryData(e,u?.previousValue)}})}n(Si,"useSetStakeStorageValue");var Wc=A.object({convert:A.boolean(),mint:A.boolean()}),Kr={convert:!1,mint:!1},Hc=JSON.stringify(Kr),Oe=n(()=>{let{data:t}=fi({key:Ze.FeatureUsed,queryKey:M.featureUsed(),defaultValue:Hc}),e=(0,Ho.useMemo)(()=>{if(!t)return Kr;let a=Wc.safeParse(JSON.parse(t));return a.success?a.data:Kr},[t]),{mutateAsync:o}=Si({key:Ze.FeatureUsed,queryKey:M.featureUsed()}),r=(0,Ho.useCallback)(async a=>{let c={...e,...a};await o(JSON.stringify(c))},[o,e]);return{usageState:e,setUsageState:r}},"useFeatureUsage");var qr=n(({method:t,goToInfoPage:e,goToInitFlowPage:o})=>{let{usageState:r}=Oe();return(0,gi.useCallback)(()=>{r[t]?o():e()},[e,o,t,r])},"useOnShowLiquidStakingMethod");i();s();var Gc=n(t=>{let e=jt();return t&&t!==F?{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:t}}:e?{screen:"MintPSOLUKInfoPage",params:{presentNext:!0}}:{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:F}}},"useLiquidStakingScreen");i();s();var ki=x(C());i();s();i();s();var to={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0,activationState:void 0,stakeAuthorityPubkey:""},amount:"",navigateTo:null},U=Mn(t=>({...to,resetStaking:n(()=>t(e=>({...e,amount:to.amount,transactionData:to.transactionData,convert:to.convert,navigateTo:to.navigateTo})),"resetStaking"),setTransactionData:n(e=>t({transactionData:e}),"setTransactionData"),setProvider:n(e=>t({provider:e}),"setProvider"),setConvertStakeAccount:n(e=>t({convert:e}),"setConvertStakeAccount"),setAmount:n(e=>t({amount:e}),"setAmount"),setNavigateTo:n(e=>t({navigateTo:e}),"setNavigateTo")}));var yi=n(t=>{let e=U(l=>l.setConvertStakeAccount),o=U(l=>l.setAmount),{trackConvertStakeAccountClicked:r}=Lt(),a=Xe(),{eligibleStakeAccounts:c,inelegibleStakeAccounts:u}=Wo(a);return(0,ki.useCallback)(({stakeAccount:l,validatorName:d,activationState:p})=>{let S=l?.info?.stake?.delegation?.voter??"",m=`${l?.lamports??"0"}`;e({validatorVote:S,stakeAccount:l.pubkey,stakeAuthorityPubkey:l?.info?.meta?.authorized?.staker??"",validatorName:d??"",activationState:p,eligibleAccountsCount:c.length+u.length}),o(m),r(d??"",m),t()},[r,t,e,o,c.length,u.length])},"useConvertStakeNavigateToReview");i();s();var eo=x(C());var jc=n((t,e)=>{let o=pt,{pickedLSTProvider:r}=_t(O.solana.mainnetID),a=r(F,!0),{trackConvertStakeAccountListSeen:c}=Lt(),{error:u,refetch:l,isLoadingList:d,eligibleStakeAccounts:p,inelegibleStakeAccounts:S}=Wo(a);(0,eo.useEffect)(()=>{d||c([...p,...S].map(w=>({title:w.title,amount:w.amount,eligible:w.eligible})))},[c,p,S,d]);let m=yi(t),y=(0,eo.useCallback)(w=>{m({stakeAccount:w,validatorName:w.title,activationState:w.activationState})},[m]),k=ke(),h=(0,eo.useCallback)(()=>{l()},[l]);return{isLoading:d,error:u,eligibleStakeAccounts:p,inelegibleStakeAccounts:S,onPressBack:e,onReload:h,onSelectStakeAccount:y,tokenSymbol:o?.data.symbol??"",tokenDecimals:o?.data.decimals??0,durationUntilEpochEnds:k}},"useConvertStakeAccountListPageProps");i();s();i();s();var hi=x(C());var Go=n(()=>{let t=wt();return(0,hi.useCallback)(()=>Qe(t)(),[t])},"useInvalidateQueries"),Ai=n((t,e,o)=>Ao({connection:t,signature:e,commitment:"finalized"}).then(()=>{Qe(o)()}),"invalidateStakeDataOnTransactionFinalized");i();s();var Fe=x(uo());i();s();var Wr=x(us());var Ab=new g.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var yt=new g.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var wb=Wr.Buffer.from("ephemeral"),wi=Wr.Buffer.from("transient"),oo=g.LAMPORTS_PER_SOL;i();s();var Hr=Object.freeze({DepositStake:{index:9,layout:ht.struct([ht.u8("instruction")])},DepositSol:{index:14,layout:ht.struct([ht.u8("instruction"),ht.ns64("lamports")])},WithdrawStake:{index:10,layout:ht.struct([ht.u8("instruction"),ht.ns64("poolTokens")])},WithdrawSol:{index:16,layout:ht.struct([ht.u8("instruction"),ht.ns64("poolTokens")])}});function Gr(t,e){let o=t.layout.span,r=Buffer.alloc(o),a=Object.assign({instruction:t.index},e);return t.layout.encode(a,r),r}n(Gr,"encodeData");var Ne=class{static{n(this,"StakePoolInstruction")}static depositSol(e){let{stakePool:o,withdrawAuthority:r,depositAuthority:a,reserveStake:c,fundingAccount:u,destinationPoolAccount:l,managerFeeAccount:d,referralPoolAccount:p,poolMint:S,lamports:m,referralAccount:y}=e,k=Hr.DepositSol,h=Gr(k,{lamports:m}),w=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ie,isSigner:!1,isWritable:!1}];return a&&w.push({pubkey:a,isSigner:!0,isWritable:!1}),y&&w.push({pubkey:y,isSigner:!1,isWritable:!1}),new g.TransactionInstruction({programId:yt,keys:w,data:h})}static withdrawStake(e){let{stakePool:o,validatorList:r,withdrawAuthority:a,validatorStake:c,destinationStake:u,destinationStakeAuthority:l,sourceTransferAuthority:d,sourcePoolAccount:p,managerFeeAccount:S,poolMint:m,poolTokens:y}=e,k=Hr.WithdrawStake,h=Gr(k,{poolTokens:y}),w=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Ie,isSigner:!1,isWritable:!1},{pubkey:g.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new g.TransactionInstruction({programId:yt,keys:w,data:h})}static withdrawSol(e){let{stakePool:o,withdrawAuthority:r,sourceTransferAuthority:a,sourcePoolAccount:c,reserveStake:u,destinationSystemAccount:l,managerFeeAccount:d,solWithdrawAuthority:p,poolMint:S,poolTokens:m}=e,y=Hr.WithdrawSol,k=Gr(y,{poolTokens:m}),h=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:g.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Ie,isSigner:!1,isWritable:!1}];return p&&h.push({pubkey:p,isSigner:!0,isWritable:!1}),new g.TransactionInstruction({programId:yt,keys:h,data:k})}};i();s();var I=x(vi());var Ii=x(uo()),Pi=x(kr());var ie=[(0,I.u64)("denominator"),(0,I.u64)("numerator")],xi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.StakePool=1]="StakePool",t[t.ValidatorList=2]="ValidatorList"})(xi||(xi={}));var jo=pr().transform(t=>new Ii.default(t,10)),Qo=pr().transform(t=>new g.PublicKey(t)),mu=an(["uninitialized","initialized","delegated","rewardsPool"]),pu=Zt({rentExemptReserve:jo,authorized:Zt({staker:Qo,withdrawer:Qo}),lockup:Zt({unixTimestamp:Ue(),epoch:Ue(),custodian:Qo})}),fu=Zt({meta:pu,stake:Zt({delegation:Zt({voter:Qo,stake:jo,activationEpoch:jo,deactivationEpoch:jo,warmupCooldownRate:Ue()}),creditsObserved:Ue()}).nullish().default(null)}),Ei=Zt({type:mu,info:sn(fu)}),$r=class extends Pi.Layout{static{n(this,"FutureEpochLayout")}layout;discriminator;constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,I.u8)()}encode(e,o,r=0){return e==null?this.discriminator.encode(0,o,r):(this.discriminator.encode(2,o,r),this.layout.encode(e,o,r+1)+1)}decode(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return null;if(r===1||r===2)return this.layout.decode(e,o+1);throw new Error("Invalid future epoch "+this.property)}getSpan(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return 1;if(r===1||r===2)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid future epoch "+this.property)}};function Yr(t,e){return new $r(t,e)}n(Yr,"futureEpoch");var Ci=(0,I.struct)([(0,I.u8)("accountType"),(0,I.publicKey)("manager"),(0,I.publicKey)("staker"),(0,I.publicKey)("stakeDepositAuthority"),(0,I.u8)("stakeWithdrawBumpSeed"),(0,I.publicKey)("validatorList"),(0,I.publicKey)("reserveStake"),(0,I.publicKey)("poolMint"),(0,I.publicKey)("managerFeeAccount"),(0,I.publicKey)("tokenProgramId"),(0,I.u64)("totalLamports"),(0,I.u64)("poolTokenSupply"),(0,I.u64)("lastUpdateEpoch"),(0,I.struct)([(0,I.u64)("unixTimestamp"),(0,I.u64)("epoch"),(0,I.publicKey)("custodian")],"lockup"),(0,I.struct)(ie,"epochFee"),Yr((0,I.struct)(ie),"nextEpochFee"),(0,I.option)((0,I.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,I.option)((0,I.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,I.struct)(ie,"stakeDepositFee"),(0,I.struct)(ie,"stakeWithdrawalFee"),Yr((0,I.struct)(ie),"nextStakeWithdrawalFee"),(0,I.u8)("stakeReferralFee"),(0,I.option)((0,I.publicKey)(),"solDepositAuthority"),(0,I.struct)(ie,"solDepositFee"),(0,I.u8)("solReferralFee"),(0,I.option)((0,I.publicKey)(),"solWithdrawAuthority"),(0,I.struct)(ie,"solWithdrawalFee"),Yr((0,I.struct)(ie),"nextSolWithdrawalFee"),(0,I.u64)("lastEpochPoolTokenSupply"),(0,I.u64)("lastEpochTotalLamports")]),Yo;(function(t){t[t.Active=0]="Active",t[t.DeactivatingTransient=1]="DeactivatingTransient",t[t.ReadyForRemoval=2]="ReadyForRemoval"})(Yo||(Yo={}));var Su=(0,I.struct)([(0,I.u64)("activeStakeLamports"),(0,I.u64)("transientStakeLamports"),(0,I.u64)("lastUpdateEpoch"),(0,I.u64)("transientSeedSuffixStart"),(0,I.u64)("transientSeedSuffixEnd"),(0,I.u8)("status"),(0,I.publicKey)("voteAccountAddress")]),$o=(0,I.struct)([(0,I.u8)("accountType"),(0,I.u32)("maxValidators"),(0,I.vec)(Su,"validators")]);i();s();var Mt=x(uo());function Jr(t){return isNaN(t)?0:Number(t*g.LAMPORTS_PER_SOL)}n(Jr,"solToLamports");function Jo(t,e){let o=e.mul(t.totalLamports),r=t.poolTokenSupply;return o.lt(r)?new Mt.default(0):o.div(r)}n(Jo,"calcLamportsWithdrawAmount");async function zo(t,e){let[o]=await g.PublicKey.findProgramAddress([e.toBuffer(),Buffer.from("withdraw")],t);return o}n(zo,"findWithdrawAuthorityProgramAddress");async function Xo(t,e,o,r){let[a]=await g.PublicKey.findProgramAddress([e.toBuffer(),o.toBuffer(),r?new Mt.default(r).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],t);return a}n(Xo,"findStakeProgramAddress");function ye(t){if(typeof t=="number")return Math.abs(t)/g.LAMPORTS_PER_SOL;if(typeof t=="bigint")return Math.abs(Number(t))/g.LAMPORTS_PER_SOL;let e=1;t.isNeg()&&(e=-1);let r=t.abs().toString(10).padStart(10,"0"),a=r.length-9,c=r.slice(0,a)+"."+r.slice(a);return e*parseFloat(c)}n(ye,"lamportsToSol");async function gu(t,e,o,r){let[a]=await g.PublicKey.findProgramAddress([wi,e.toBuffer(),o.toBuffer(),r.toArrayLike(Buffer,"le",8)],t);return a}n(gu,"findTransientStakeProgramAddress");function ku(t,e){return t.poolTokenSupply.isZero()||t.totalLamports.isZero()?e:e.mul(t.poolTokenSupply).div(t.totalLamports)}n(ku,"calcPoolTokensForDeposit");async function Li(t,e,o,r,a,c){let u=await t.getAccountInfo(e.validatorList),l=$o.decode(u?.data);if(!l?.validators||l?.validators.length==0)throw new Error("No accounts found");let d=await t.getMinimumBalanceForRentExemption(g.StakeProgram.space),p=new Mt.default(d+oo),S=[];for(let b of l.validators){if(b.status!==Yo.Active)continue;let N=await Xo(yt,b.voteAccountAddress,o);if(!b.activeStakeLamports.isZero()){let H=e?.preferredWithdrawValidatorVoteAddress?.equals(b.voteAccountAddress);S.push({type:H?"preferred":"active",voteAddress:b.voteAccountAddress,stakeAddress:N,lamports:b.activeStakeLamports})}let B=b.transientStakeLamports.sub(p);if(B.gt(new Mt.default(0))){let H=await gu(yt,b.voteAccountAddress,o,b.transientSeedSuffixStart);S.push({type:"transient",voteAddress:b.voteAccountAddress,stakeAddress:H,lamports:B})}}S=S.sort(a||((b,N)=>N.lamports.sub(b.lamports).toNumber()));let m=await t.getAccountInfo(e.reserveStake),y=new Mt.default((m?.lamports??0)-d);y.gt(new Mt.default(0))&&S.push({type:"reserve",stakeAddress:e.reserveStake,lamports:y});let k=[],h=new Mt.default(r),w=e.stakeWithdrawalFee,T={numerator:w.denominator.sub(w.numerator),denominator:w.denominator};for(let b of["preferred","active","transient","reserve"]){let N=S.filter(B=>B.type==b);for(let{stakeAddress:B,voteAddress:H,lamports:J}of N){if(J.lte(p)&&b=="transient")continue;let Z=ku(e,J);!c&&!T.numerator.isZero()&&(Z=Z.mul(T.denominator).div(T.numerator));let z=Mt.default.min(Z,h);if(!z.lte(new Mt.default(0))&&(k.push({stakeAddress:B,voteAddress:H,poolAmount:z}),h=h.sub(z),h.isZero()))break}if(h.isZero())break}if(h.gt(new Mt.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${ye(r)} pool tokens.`);return k}n(Li,"prepareWithdrawAccounts");function _i(t,e,o){let r=g.Keypair.generate();return e.push(g.SystemProgram.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:o,space:g.StakeProgram.space,programId:g.StakeProgram.programId})),r}n(_i,"newStakeAccount");function ro(t){let e,o;return t.solWithdrawalFee&&(e=t.solWithdrawalFee.numerator.toNumber()*100/t.solWithdrawalFee.denominator.toNumber()),t.stakeWithdrawalFee&&(o=t.stakeWithdrawalFee.numerator.toNumber()*100/t.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:e,stakeWithdrawalFee:o}}n(ro,"getStakePoolFee");async function Zo(t,e){let o=await t.getAccountInfo(e);if(!o)throw new Error("Invalid stake pool account");return{pubkey:e,account:{data:Ci.decode(o.data),executable:o.executable,lamports:o.lamports,owner:o.owner}}}n(Zo,"getStakePoolAccount");async function yu(t,e){let o=(await t.getParsedAccountInfo(e)).value;if(!o||!("parsed"in o.data))throw new Error("Invalid stake account");if(o.data.program!="stake")throw new Error("Not a stake account");return Ei.parse(o.data.parsed)}n(yu,"getStakeAccount");async function tr(t,e,o,r,a,c,u,l,d=!0){if(d){let b=await t.getBalance(o,"confirmed");if(b<r)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${ye(b)} SOL.`)}let S=(await Zo(t,e)).account.data,m=new g.Keypair,y=[m],k=[];if(k.push(g.SystemProgram.transfer({fromPubkey:o,toPubkey:m.publicKey,lamports:r})),!a){let b=ho(S.poolMint,o);k.push(Bn(o,b,o,S.poolMint)),a=b}let h=await zo(yt,e);k.push(Ne.depositSol({stakePool:e,reserveStake:S.reserveStake,fundingAccount:m.publicKey,destinationPoolAccount:a,managerFeeAccount:S.managerFeeAccount,referralPoolAccount:u??a,poolMint:S.poolMint,lamports:r,withdrawAuthority:h,depositAuthority:l,referralAccount:c}));let{solWithdrawalFee:w,stakeWithdrawalFee:T}=ro(S);return{instructions:k,signers:y,solWithdrawalFee:w,stakeWithdrawalFee:T}}n(tr,"depositSol");async function Mi(t,e){let o=await Zo(t,e);return ro(o.account.data)}n(Mi,"fetchStakePoolFees");async function Oi(t,e,o,r,a=!1,c,u,l,d){let p=await Zo(t,e),S=new Fe.default(Jr(r));l||(l=ho(p.account.data.poolMint,o));let m=await yr(t,l);if(m.amount<S.toNumber())throw new Error(`Not enough token balance to withdraw ${ye(S)} pool tokens.
          Maximum withdraw amount is ${ye(m.amount)} pool tokens.`);let y=await t.getMinimumBalanceForRentExemption(g.StakeProgram.space),k=await zo(yt,e),h=null;u&&(h=await yu(t,u));let w=[];if(a)w.push({stakeAddress:p.account.data.reserveStake,voteAddress:void 0,poolAmount:S});else if(h&&h?.type=="delegated"){let _=h.info?.stake?.delegation.voter;if(!_)throw new Error(`Invalid stake reciever ${u} delegation`);let et=await t.getAccountInfo(p.account.data.validatorList),tt=$o.decode(et?.data).validators.find(ot=>ot.voteAccountAddress.equals(_));if(c&&c!==_)throw new Error(`Provided withdrawal vote account ${c} does not match delegation on stake receiver account ${_},
        remove this flag or provide a different stake account delegated to ${c}`);if(tt){let ot=await Xo(yt,_,e),It=await t.getAccountInfo(ot);if(!It)throw new Error("Preferred withdraw valdator's stake account is invalid");let Ut=Jo(p.account.data,new Fe.default(It.lamports-oo-y));if(Ut.lt(S))throw new Error(`Not enough lamports available for withdrawal from ${ot},
              ${S} asked, ${Ut} available.`);w.push({stakeAddress:ot,voteAddress:_,poolAmount:S})}else throw new Error(`Provided stake account is delegated to a vote account ${_} which does not exist in the stake pool`)}else if(c){let _=await Xo(yt,c,e),et=await t.getAccountInfo(_);if(!et)throw new Error("Invalid Stake Account");let at=new Fe.default(et.lamports-oo-y);if(at.lt(new Fe.default(0)))throw new Error("Invalid Stake Account");let tt=Jo(p.account.data,at);if(tt.lt(S))throw new Error(`Not enough lamports available for withdrawal from ${_},
            ${S} asked, ${tt} available.`);w.push({stakeAddress:_,voteAddress:c,poolAmount:S})}else{let _=await Li(t,p.account.data,e,S,d,l.equals(p.account.data.managerFeeAccount));w.push(..._)}let T=[],b=g.Keypair.generate(),N=[b];T.push(Pr(l,b.publicKey,o,S.toNumber()));let B=0,H=5,J=0;for(let _ of w){if(J>H)break;let at=`Withdrawing \u25CE${Jo(p.account.data,_.poolAmount)},
        from stake account ${_.stakeAddress?.toBase58()}`;_.voteAddress&&(at=`${at}, delegated to ${_.voteAddress?.toBase58()}`);let tt;if(!u||h&&h.type==="delegated"){let ot=_i(o,T,y);N.push(ot),B+=y,tt=ot.publicKey}else tt=u;T.push(Ne.withdrawStake({stakePool:e,validatorList:p.account.data.validatorList,validatorStake:_.stakeAddress,destinationStake:tt,destinationStakeAuthority:o,sourceTransferAuthority:b.publicKey,sourcePoolAccount:l,managerFeeAccount:p.account.data.managerFeeAccount,poolMint:p.account.data.poolMint,poolTokens:_.poolAmount.toNumber(),withdrawAuthority:k})),T.push(...g.StakeProgram.deactivate({stakePubkey:tt,authorizedPubkey:o}).instructions),J++}u&&h&&h.type==="delegated"&&N.forEach(_=>{T.concat(g.StakeProgram.merge({stakePubkey:u,sourceStakePubKey:_.publicKey,authorizedPubkey:o}).instructions)});let{solWithdrawalFee:Z,stakeWithdrawalFee:z}=ro(p.account.data);return{instructions:T,signers:N,stakeReceiver:u,totalRentFreeBalances:B,solWithdrawalFee:Z,stakeWithdrawalFee:z}}n(Oi,"withdrawStake");async function Ni(t,e,o,r,a,c){let u=await Zo(t,e),l=new Fe.default(Jr(a)),d=ho(u.account.data.poolMint,o),p=await yr(t,d);if(p.amount<l.toNumber())throw new Error(`Not enough token balance to withdraw ${ye(l)} pool tokens.
            Maximum withdraw amount is ${ye(p.amount)} pool tokens.`);let S=[],m=g.Keypair.generate(),y=[m];S.push(Pr(d,m.publicKey,o,l.toNumber()));let k=await zo(yt,e);if(c){let b=u.account.data.solWithdrawAuthority;if(!b)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(c.toBase58()!=b.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${b.toBase58()}, received ${c.toBase58()}`)}let h=Ne.withdrawSol({stakePool:e,withdrawAuthority:k,reserveStake:u.account.data.reserveStake,sourcePoolAccount:d,sourceTransferAuthority:m.publicKey,destinationSystemAccount:r,managerFeeAccount:u.account.data.managerFeeAccount,poolMint:u.account.data.poolMint,poolTokens:l.toNumber(),solWithdrawAuthority:c});S.push(h);let{solWithdrawalFee:w,stakeWithdrawalFee:T}=ro(u.account.data);return{instructions:S,signers:y,solWithdrawalFee:w,stakeWithdrawalFee:T}}n(Ni,"withdrawSol");function Fi({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,transaction:r=new g.Transaction}){return e.equals(o)||r.add(g.StakeProgram.authorize({authorizedPubkey:o,newAuthorizedPubkey:o,stakeAuthorizationType:g.StakeAuthorizationLayout.Staker,stakePubkey:t})),r.add(g.StakeProgram.deactivate({stakePubkey:t,authorizedPubkey:o})),r}n(Fi,"deactivateStake");var hv=n(t=>{let{t:e}=Y(),o=wt(),r=Dr(),{mutateAsync:a}=$n(t);return be({mutationFn:n(async({accountIdentifier:l,senderAddress:d,stakePubkey:p,stakeAuthorityPubkey:S,authorizedPubkey:m})=>{if(!d)throw ti;let{networkID:y,address:k}=d,h=Fi({stakePubkey:p,stakeAuthorityPubkey:S,authorizedPubkey:m}),w=await Ht(h,{connection:t}),T={ownerAddress:k??"",networkID:y,data:{signature:""},type:xe.DeactivateStake,display:{summary:{topLeft:{text:e("transactionsPendingDeactivatingStake")}}}};r.approved({chainType:q.Solana,chainName:lt.Solana,networkId:O.getSolanaNetworkIDValue(y),type:"undelegate"});let b=await a({accountIdentifier:l,feePayer:new g.PublicKey(k),transaction:w,pendingTransactionInput:T});return r.submittedTransaction(b,{chainType:q.Solana,chainName:lt.Solana,networkId:O.getSolanaNetworkIDValue(y),method:"signAndSendTransaction",walletAddress:k}),r.deactivateStake(),{networkID:y,id:b??""}},"mutationFn"),onSuccess:n(l=>{Ao({connection:t,signature:l.id}).then(()=>{r.transactionStatus(l.id,{chainType:q.Solana,chainName:lt.Solana,networkId:O.getSolanaNetworkIDValue(l.networkID),status:{type:"confirmed"}})}).catch(d=>{r.transactionStatus(l.id,{chainType:q.Solana,chainName:lt.Solana,networkId:O.getSolanaNetworkIDValue(l.networkID),status:{type:"error"}}),j.captureError(d,G.Staking)}),Ai(t,l.id,o)},"onSuccess")})},"useDeactivateStake");async function hu({connection:t,stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:r}){let a=Fi({stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:r}),c=(await t.getLatestBlockhash("confirmed")).blockhash,u=new g.TransactionMessage({instructions:a.instructions,payerKey:o,recentBlockhash:c}).compileToV0Message(),l=new g.VersionedTransaction(u);return await Ht(l,{connection:t})}n(hu,"getDeactivateStakeTransaction");var Ui=n(({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,connection:r,stakePoolAddress:a,disabled:c})=>{let u=M.getDeactivateStakeTransaction({stakePubkey:t.toString(),stakeAuthorityPubkey:e.toString(),authorizedPubkey:o.toString()});return L({enabled:!c&&!!t&&!!e&&!!o,queryKey:u,staleTime:R({seconds:30}),async queryFn(){try{let[d,{solWithdrawalFee:p,stakeWithdrawalFee:S}]=await Promise.all([hu({connection:r,stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o}),Mi(r,a)]);return{transaction:d,networkID:At.Solana.Mainnet,solWithdrawalFee:p,stakeWithdrawalFee:S}}catch(d){throw j.captureError(d,G.Staking),d}}})},"useGetDeactivateStakeTransaction");i();s();var nt=x(C());i();s();var Bi=x(C());var er=n(({txReceipt:t,isTxError:e,poolTokenFungible:o,invalidateQueries:r,dismissLiquidStaking:a})=>{let c=U(l=>l.resetStaking),u=U(l=>l.setNavigateTo);return(0,Bi.useCallback)(()=>{if(c(),!t||e)return a();r(),u(o?{screen:"FungibleDetail",caip19:te(Vt(o))}:{screen:"Activity"}),a()},[t,e,o,r,a,u,c])},"useDismissLiquidStaking");i();s();var or=x(C());i();s();var Ri=n(({connection:t})=>{let e=Re(),o=Tn();return be({mutationFn:n(async({accountIdentifier:a,ownerAddress:c,pendingActivityRow:u,activityType:l,transactionData:{networkID:d,transaction:p,signers:S}})=>{if(O.isSolanaNetworkID(d)){await cn(p,t);let m={ownerAddress:c,networkID:d,data:{signature:""},type:l,display:{summary:u}};return{id:await Rn({accountIdentifier:a,feePayer:new g.PublicKey(c),connection:t,accountSigner:o,transaction:p,pendingTransactionInput:m,storage:e,opts:{additionalSignerAccounts:S}}),networkID:d}}throw new Error(`Unsupported network for liquid staking: ${d}`)},"mutationFn")})},"useProcessTransactionData");function rr({isLoadingPoolToken:t,pendingActivityRow:e,onTransactionSubmitted:o,onTransactionFailed:r,activityType:a}){let{connection:c}=dt(),u=U(T=>T.transactionData),l=pt,{data:d,isLoading:p}=ee(),{mutateAsync:S}=Ri({connection:c}),y=(0,or.useMemo)(()=>(d?.addresses??[]).find(T=>T.networkID===l?.data.chain.id),[l?.data.chain.id,d?.addresses])?.address??"",k=d?.identifier??"";return{executeLiquidStake:(0,or.useCallback)(async()=>{try{if(!u)throw new ge(Me.MissingTransactionData);let T=await S({accountIdentifier:k,ownerAddress:y,pendingActivityRow:e,activityType:a,transactionData:u});o(T)}catch(T){r(T)}},[k,y,e,u,S,o,r,a]),isReadyToExecute:!p&&!t}}n(rr,"useExecuteLiquidStakeTransaction");i();s();function nr(t){return t instanceof ge?t:new ge(Me.UnknownError)}n(nr,"parseStakingError");function Au({stakedTokenSymbol:t,poolTokenSymbol:e,txHash:o,txError:r,confirmationStatus:a,eligibleAccountsCount:c,isConvertDelayed:u,durationUntilEpochEnds:l,onDismiss:d,onConvertMore:p}){let S={title:v.t("commandClose"),onPress:d},m={title:v.t("convertStakeStatusConvertMore"),onPress:p},y={txHash:o,txHashTitle:v.t("commandViewTransaction")};return r?{type:"error",title:v.t("convertStakeStatusErrorTitle"),message:v.t("convertStakeStatusErrorMessage",{poolTokenSymbol:e}),...y,primaryButton:S,showUKDisclaimer:!1,openExternalLink:void 0}:a==="confirmed"?{type:"success",title:v.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...y,...c>1?{primaryButton:m,secondaryButton:S}:{primaryButton:S},showUKDisclaimer:!1,openExternalLink:void 0,...u?{title:v.t("convertStakeStatusSuccessTitleDelayed"),message:v.t("convertStakeStatusSuccessMessageDelayed",{durationUntilEpochEnds:l})}:{}}:{type:"loading",title:v.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:v.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:t,poolTokenSymbol:e}),...y,primaryButton:S,showUKDisclaimer:!1,openExternalLink:void 0}}n(Au,"getStatusPageProps");var wu=n(({dismissConvertFlow:t,goToConvertAccountList:e})=>{let o=Go(),[r,a]=(0,nt.useState)("loading"),[c,u]=(0,nt.useState)(),[l,d]=(0,nt.useState)(),{trackConvertSubmitted:p,trackConvertSuccess:S,trackConvertFailed:m,trackConvertMoreClicked:y}=Lt(),{usageState:k,setUsageState:h}=Oe(),w=Xe(),T=U(ct=>ct.convert),b=U(ct=>ct.amount),[N]=(0,nt.useState)(T?.eligibleAccountsCount??0),B=U(ct=>ct.convert),H=U(ct=>ct.setTransactionData),J=pt,Z=J?.data.symbol??"",z=w?.stakePoolTokenMetadata.metadata.symbol??"",_=w?.stakePoolTokenMetadata.metadata.address??"",{data:et}=ee(),at=et?.type===de.Ledger,ot=(0,nt.useMemo)(()=>(et?.addresses??[]).find(ct=>ct.networkID===J?.data.chain.id),[J?.data.chain.id,et?.addresses])?.addressType??q.Solana,{fungible:It,isLoadingTokens:Ut}=Et({key:_}),Yt=ke(),$t=(0,nt.useCallback)(ct=>{p(ct.id),u(ct),k.convert||h({convert:!0})},[h,p,k.convert]),Jt=(0,nt.useCallback)(ct=>{m({amount:b,convertDetails:T});let ss=nr(ct);d(ss)},[m,b,T]),zt=(0,nt.useMemo)(()=>({topLeft:{text:v.t("convertStakePendingTitle",{symbol:z})}}),[z]),{executeLiquidStake:Xt,isReadyToExecute:X}=rr({isLoadingPoolToken:Ut,pendingActivityRow:zt,onTransactionSubmitted:$t,onTransactionFailed:Jt,activityType:xe.ConvertStake}),gt=(0,nt.useCallback)(()=>{S({amount:b,convertDetails:T,provider:w}),H(void 0),o()},[b,S,H,o,w,T]),{isSuccess:D,isError:Pt,error:we}=wo(gt,c);(0,nt.useEffect)(()=>{D?a("confirmed"):Pt&&(a("error"),d(we),m({amount:b,convertDetails:T}))},[b,T,D,Pt,m,we,c]);let so=er({txReceipt:c,isTxError:Pt,poolTokenFungible:It,invalidateQueries:o,dismissLiquidStaking:t}),co=(0,nt.useCallback)(()=>{y(),e()},[y,e]),is=(0,nt.useMemo)(()=>Au({stakedTokenSymbol:Z,poolTokenSymbol:z,txHash:c?.id,txError:l,confirmationStatus:r,eligibleAccountsCount:N,isConvertDelayed:je(B?.activationState),durationUntilEpochEnds:Yt,onDismiss:so,onConvertMore:co}),[Z,z,c?.id,l,r,N,B?.activationState,Yt,so,co]);return{addressType:ot,isLedger:at,isReadyToExecute:X,statusPageProps:is,txError:l,executeLiquidStake:Xt,learnMoreLink:Lr,isJitoSOL:!1,isPSOL:!0}},"useConvertStakeAccountStatusPageProps");i();s();i();s();var ts=x(C());i();s();var Qi=x(C());i();s();var Di=n((t,e)=>{let o=[],r=t?Vt(t):void 0,a=pn(e?.stakePoolTokenMetadata.caip19??"");return r&&a&&(o.push(r),o.push(a)),{query:{data:o}}},"getPriceArgs");i();s();var he=x(C());i();s();function ar(t){return t?t.stakePoolTokenMetadata.caip19===re:!1}n(ar,"isJitoLST");i();s();i();s();var Bx={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:le.Mainnet},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:le.Mainnet,validators:[{vote_account:"validator"}]},Vi={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:Kn,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:le.Mainnet},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:le.Mainnet,validators:[{vote_account:"validator"}]};function ir(t){return t?t.stakePoolTokenMetadata.caip19===Vi.stakePoolTokenMetadata.caip19:!1}n(ir,"isPhantomLST");var Tu=n((t,e)=>{if(e===void 0)return;let o=Vt(t),r=te(o);return e[r]},"extractPrice"),bu=n((t,e,o)=>{if(!e)return K(0);let r=new K(e.convertRatio),a=Tt(t,e.stakePoolTokenMetadata.metadata.decimals);return o?a.multipliedBy(r):a.div(r)},"getReceiveAmount");function Ki(t,e,o){return e?{network:{id:e.stakePoolTokenMetadata.metadata.chainId??le.Mainnet,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:o?o[e.stakePoolTokenMetadata.caip19]:void 0,decimals:e.stakePoolTokenMetadata.metadata.decimals,logoUri:e.stakePoolTokenMetadata.metadata.logoURI??null,symbol:e.stakePoolTokenMetadata.metadata.symbol,tokenAddress:e.stakePoolTokenMetadata.metadata.address,tokenType:De.SPL}:{network:{id:t.data.chain.id,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:Tu(t,o),decimals:t.data.decimals,logoUri:t.data.logoUri??null,symbol:t.data.symbol,tokenAddress:t.data.tokenAddress,tokenType:t.type??De.SolanaNative}}n(Ki,"extractAssetMetadata");var qi=n((t,e,o,r,a=!1)=>{if(!t)return null;let{priceData:c,decimals:u,...l}=Ki(t,a?e:void 0,r),d=Tt(o,u),p=c?.usd?d.multipliedBy(c.usd):null;return{amount:pe(d),amountUsd:p?p.toNumber():null,border:!1,title:v.t("liquidStakeReviewYouPay"),...l}},"getAssetPropsForPayAsset"),Wi=n((t,e,o,r,a=!1)=>{if(!e||!t)return null;let{priceData:c,...u}=Ki(t,a?void 0:e,r),l=bu(o,e,a),d=c?.usd?l.multipliedBy(c.usd):null;return{amount:pe(l),amountUsd:d?d.toNumber():null,border:!1,title:a?v.t("liquidStakeUnstakeReviewYouReceive"):v.t("liquidStakeReviewYouReceive"),...u}},"getAssetPropsForReceiveAsset"),Hi=n(({process:t,fungibleToStake:e,amount:o,provider:r,selectedChainAddress:a,transactionFees:c,isLoading:u,canSubmit:l,transactionData:d,priceMap:p,networkFeeErrorMsg:S,showUKDisclaimer:m})=>{let y=(0,he.useMemo)(()=>qi(e,r,o,p),[e,r,o,p]),k=(0,he.useMemo)(()=>Wi(e,r,o,p),[e,r,o,p]),h=r?.name??"",w=a?.address??"",T=r?.apy!==void 0?me(Number.parseFloat(r.apy)):"",b=`${pe(Tt(c,e?.data.decimals??0))} ${e?.data.symbol}`,N=ar(r),B=ir(r),H=r?.totalRewardsFeePercentage??"8",J=d?.solWithdrawalFee??d?.stakeWithdrawalFee,Z=(0,he.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),providerLabelText:v.t("liquidStakeReviewProvider"),apyLabelText:v.t("stakeReviewAPY"),apyLabelTextTooltip:v.t("stakeReviewAPYTooltip"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t(t==="convert"||t==="convertDelayed"?"commandConvert":"commandStake"),feeFootnoteText:v.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:H}),feeFootnoteDescriptionText:v.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:J}),feeFootnoteTooltipText:v.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:H}),title:v.t("liquidStakeReviewPageTitle")}),[t,H,J]);return{process:t,payAsset:y,receiveAsset:k,account:w,providerName:h,apy:T,networkFee:b,strings:Z,isLoading:u,canSubmit:l,networkFeeErrorMsg:S,isJitoSOL:N,isPSOL:B,showUKDisclaimer:m,totalRewardsFeePercentage:H}},"useStakeMapToViewState"),eI=n(({stakedFungible:t,amount:e,provider:o,selectedChainAddress:r,transactionFees:a,isLoading:c,canSubmit:u,priceMap:l,networkFeeErrorMsg:d,transactionData:p,durationUntilEpochEnds:S})=>{let m=(0,he.useMemo)(()=>qi(t,o,e,l,!0),[t,o,e,l]),y=(0,he.useMemo)(()=>Wi(t,o,e,l,!0),[t,o,e,l]),k=r?.address??"",h=`${pe(Tt(a,t?.data.decimals??0))} ${t?.data.symbol}`,w=p?.isWithdrawSol??!0,T=w?p?.solWithdrawalFee??.1:p?.stakeWithdrawalFee??.1,b=(0,he.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t("commandUnstake"),feeLabelText:v.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:v.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:v.t("unstakeLiquidStakeDelayDisclaimer",{durationUntilEpochEnds:S}),feePercentageText:`${T}%`,title:v.t("liquidStakeReviewPageTitle")}),[T,S]),N=jt();return{payAsset:m,receiveAsset:y,account:k,networkFee:h,strings:b,isLoading:c,canSubmit:u,networkFeeErrorMsg:d,isWithdrawSol:w,showUKDisclaimer:N}},"useUnstakeMapToViewState");i();s();var Gi=x(C());var vu=R({seconds:10}),ji=n(({hasPoolTokenAccount:t,chainAddress:e,transactionData:o})=>{let{data:r,isPending:a,isFetched:c,isSuccess:u}=Yn({networkID:o?.networkID??O.solana.mainnetID,multichainTransaction:Iu(o),queryOptions:{refetchInterval:vu}}),{data:l=0}=Hn(e),d=rt(No).plus(We),p=t?rt(d):rt(l).plus(d),{hasSufficientFunds:S,isLoading:m,nativeTokenSymbol:y}=zn({networkID:o?.networkID??O.solana.mainnetID,addressType:e?.addressType,gasEstimation:r,transactionValue:p}),k=Pu({hasSufficientFunds:S,hasGasEstimationFailed:c&&!u,nativeTokenSymbol:y}),h=xu(r),w=p.plus(h),T=a||m;return(0,Gi.useMemo)(()=>({isLoading:T,hasSufficientFunds:S,transactionFees:w,networkFeeErrorMsg:k,nativeTokenSymbol:y}),[T,S,w,k,y])},"useLiquidStakingTransactionFees"),xu=n(t=>t?O.isSolanaNetworkID(t.networkID)?new rt(t.value):new rt(0):new rt(0),"getGasEstimationValue"),Iu=n(t=>{if(t&&O.isSolanaNetworkID(t.networkID)){let{networkID:e,transaction:o}=t;return{networkID:e,transaction:[o]}}},"getMultichainTransaction"),Pu=n(({hasSufficientFunds:t,hasGasEstimationFailed:e,nativeTokenSymbol:o})=>e?v.t("transactionGasEstimationError"):t==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0,"getNetworkFeeErrorMessage");var sr=n(({process:t,provider:e,transactionData:o,isLoadingTransactionData:r})=>{let a=pt,c=U(B=>B.amount),{data:u}=bt(q.Solana),{fungible:l,isLoadingTokens:d}=Et({key:e?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:p,hasSufficientFunds:S,transactionFees:m,networkFeeErrorMsg:y}=ji({hasPoolTokenAccount:!!l,chainAddress:u,transactionData:o}),k=(0,Qi.useMemo)(()=>Di(a,e),[a,e]),{data:h}=Qn(k),w=r||p||d,T=!w&&!!o&&S!=="insufficient"&&!y,b=jt();return Hi({process:t,fungibleToStake:a,amount:c,provider:e,selectedChainAddress:u,transactionFees:m,transactionData:o,isLoading:w,canSubmit:T,priceMap:h,networkFeeErrorMsg:y,showUKDisclaimer:t==="mint"&&b})},"useLiquidStakeReviewPageProps");i();s();i();s();i();s();i();s();i();s();i();s();i();s();function Eu(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}n(Eu,"bytes");function zr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}n(zr,"exists");function Yi(t,e){Eu(t);let o=e.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}n(Yi,"output");i();s();var Cu=n(t=>t instanceof Uint8Array,"u8a");var ur=n(t=>new DataView(t.buffer,t.byteOffset,t.byteLength),"createView"),Ot=n((t,e)=>t<<32-e|t>>>e,"rotr"),Lu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lu)throw new Error("Non little-endian hardware is not supported");function _u(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}n(_u,"utf8ToBytes");function Xr(t){if(typeof t=="string"&&(t=_u(t)),!Cu(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}n(Xr,"toBytes");var cr=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},UI={}.toString;function $i(t){let e=n(r=>t().update(Xr(r)).digest(),"hashC"),o=t();return e.outputLen=o.outputLen,e.blockLen=o.blockLen,e.create=()=>t(),e}n($i,"wrapConstructor");function Mu(t,e,o,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,o,r);let a=BigInt(32),c=BigInt(4294967295),u=Number(o>>a&c),l=Number(o&c),d=r?4:0,p=r?0:4;t.setUint32(e+d,u,r),t.setUint32(e+p,l,r)}n(Mu,"setBigUint64");var lr=class extends cr{static{n(this,"SHA2")}constructor(e,o,r,a){super(),this.blockLen=e,this.outputLen=o,this.padOffset=r,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ur(this.buffer)}update(e){zr(this);let{view:o,buffer:r,blockLen:a}=this;e=Xr(e);let c=e.length;for(let u=0;u<c;){let l=Math.min(a-this.pos,c-u);if(l===a){let d=ur(e);for(;a<=c-u;u+=a)this.process(d,u);continue}r.set(e.subarray(u,u+l),this.pos),this.pos+=l,u+=l,this.pos===a&&(this.process(o,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){zr(this),Yi(e,this),this.finished=!0;let{buffer:o,view:r,blockLen:a,isLE:c}=this,{pos:u}=this;o[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>a-u&&(this.process(r,0),u=0);for(let m=u;m<a;m++)o[m]=0;Mu(r,a-8,BigInt(this.length*8),c),this.process(r,0);let l=ur(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=d/4,S=this.get();if(p>S.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<p;m++)l.setUint32(4*m,S[m],c)}digest(){let{buffer:e,outputLen:o}=this;this.digestInto(e);let r=e.slice(0,o);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:o,buffer:r,length:a,finished:c,destroyed:u,pos:l}=this;return e.length=a,e.pos=l,e.finished=c,e.destroyed=u,a%o&&e.buffer.set(r),e}};var Ou=n((t,e,o)=>t&e^~t&o,"Chi"),Nu=n((t,e,o)=>t&e^t&o^e&o,"Maj"),Fu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),se=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ce=new Uint32Array(64),Zr=class extends lr{static{n(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=se[0]|0,this.B=se[1]|0,this.C=se[2]|0,this.D=se[3]|0,this.E=se[4]|0,this.F=se[5]|0,this.G=se[6]|0,this.H=se[7]|0}get(){let{A:e,B:o,C:r,D:a,E:c,F:u,G:l,H:d}=this;return[e,o,r,a,c,u,l,d]}set(e,o,r,a,c,u,l,d){this.A=e|0,this.B=o|0,this.C=r|0,this.D=a|0,this.E=c|0,this.F=u|0,this.G=l|0,this.H=d|0}process(e,o){for(let m=0;m<16;m++,o+=4)ce[m]=e.getUint32(o,!1);for(let m=16;m<64;m++){let y=ce[m-15],k=ce[m-2],h=Ot(y,7)^Ot(y,18)^y>>>3,w=Ot(k,17)^Ot(k,19)^k>>>10;ce[m]=w+ce[m-7]+h+ce[m-16]|0}let{A:r,B:a,C:c,D:u,E:l,F:d,G:p,H:S}=this;for(let m=0;m<64;m++){let y=Ot(l,6)^Ot(l,11)^Ot(l,25),k=S+y+Ou(l,d,p)+Fu[m]+ce[m]|0,w=(Ot(r,2)^Ot(r,13)^Ot(r,22))+Nu(r,a,c)|0;S=p,p=d,d=l,l=u+k|0,u=c,c=a,a=r,r=k+w|0}r=r+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,p=p+this.G|0,S=S+this.H|0,this.set(r,a,c,u,l,d,p,S)}roundClean(){ce.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ji=$i(()=>new Zr);var zi=x(ls());var Uu=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],dr=n(t=>{let e=`${String.fromCharCode(...Uu)}||${t}`,o=Ji(Buffer.from(e));return zi.default.encode(o)},"getReferralAccount");var tn=n(async({connection:t,stakePoolAddress:e,ownerAddress:o,amount:r,poolTokenAccountAddress:a})=>{let c=new g.PublicKey(e),u=new g.PublicKey(o),l=a?new g.PublicKey(a):void 0,d=new g.PublicKey(dr(o)),{instructions:p,signers:S,solWithdrawalFee:m,stakeWithdrawalFee:y}=await tr(t,c,u,r,l,d),k=(await t.getLatestBlockhash("confirmed")).blockhash,h=new g.VersionedTransaction(new g.TransactionMessage({instructions:p,payerKey:u,recentBlockhash:k}).compileToV0Message());return{transaction:await Ht(h,{connection:go(At.Solana.Mainnet),calculators:{cost:yo,budget:new ko(2e5,2e5)}}),signers:S,solWithdrawalFee:m,stakeWithdrawalFee:y}},"getMintPoolTokenTransaction");i();s();async function Xi({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:a}){let c=new g.PublicKey(r),u,l,d,p;if(a){let k=await Ni(t,new g.PublicKey(e),c,c,o).catch(h=>{throw j.captureError(h,G.Staking),h});u=k.instructions,l=k.signers,d=k.solWithdrawalFee,p=k.stakeWithdrawalFee}else{let k=await Oi(t,new g.PublicKey(e),c,o).catch(h=>{throw j.captureError(h,G.Staking),h});u=k.instructions,l=k.signers,d=k.solWithdrawalFee,p=k.stakeWithdrawalFee}let S=(await t.getLatestBlockhash("confirmed")).blockhash,m=new g.VersionedTransaction(new g.TransactionMessage({instructions:u,payerKey:c,recentBlockhash:S}).compileToV0Message());return{transaction:await Ht(m,{connection:t}),signers:l,solWithdrawalFee:d,stakeWithdrawalFee:p}}n(Xi,"getWithdrawLiquidStakeTransactionWithOptions");async function Bu({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:a}){try{let c=await Xi({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:a}),u=await t.simulateTransaction(c.transaction,{sigVerify:!1});if(u.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(u.value.err)}`);return{...c,isWithdrawSol:a}}catch(c){j.captureError(c instanceof Error?c:new Error(String(c)),G.Staking);try{return{...await Xi({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(u){throw j.captureError(u instanceof Error?u:new Error(String(u)),G.Staking),u}}}n(Bu,"getWithdrawLiquidStakeTransaction");i();s();var en=n(async({connection:t,stakePoolAddress:e,stakePubkey:o,ownerAddress:r,amount:a})=>{let c=new g.PublicKey(e),u=new g.PublicKey(r),l=new g.PublicKey(o),d=new g.PublicKey(dr(r)),p=g.StakeProgram.withdraw({stakePubkey:l,authorizedPubkey:u,toPubkey:u,lamports:a}),[S]=p.instructions,{instructions:m,signers:y,solWithdrawalFee:k,stakeWithdrawalFee:h}=await tr(t,c,u,a,void 0,d,void 0,void 0,!1),w=[S,...m],T=(await t.getLatestBlockhash("confirmed")).blockhash,b=new g.TransactionMessage({instructions:w,payerKey:u,recentBlockhash:T}).compileToV0Message(),N=new g.VersionedTransaction(b);return{transaction:await Ht(N,{connection:go(At.Solana.Mainnet),calculators:{cost:yo,budget:new ko(2e5,2e5)}}),signers:y,solWithdrawalFee:k,stakeWithdrawalFee:h}},"getConvertToPSOLTransaction");var Zi=n(t=>{let e=M.getConvertStakeTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,validatorVoteAddress:"",stakeAccountAddress:t.stakePubkey}),o=!t.disabled&&!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.stakePubkey&&!!t.amount;return L({enabled:o,queryKey:e,staleTime:R({seconds:30}),async queryFn(){if(O.isSolanaNetworkID(t.networkId))try{let{transaction:r,signers:a,solWithdrawalFee:c,stakeWithdrawalFee:u}=await en({connection:t.connection,stakePoolAddress:t.stakePoolAddress,stakePubkey:t.stakePubkey,ownerAddress:t.ownerAddress,amount:t.amount});return{networkID:t.networkId,transaction:r,signers:a,solWithdrawalFee:c,stakeWithdrawalFee:u}}catch(r){throw j.captureError(r,G.Staking),r}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetConvertToPSOLTransaction");var Ru=n((t,e,o)=>{let{data:r}=bt(q.Solana),{trackConvertApprovedByUser:a}=Lt(),c=U(B=>B.amount),u=U(B=>B.setTransactionData),l=ke(),{connection:d}=dt(),{data:p,isLoading:S}=Ui({connection:d,stakePubkey:new g.PublicKey(e.stakeAccount??""),stakeAuthorityPubkey:new g.PublicKey(e.stakeAuthorityPubkey??""),authorizedPubkey:new g.PublicKey(r?.address??""),stakePoolAddress:new g.PublicKey(t?.stakePoolAddress??""),disabled:e.activationState!=="active"&&e.activationState!=="activating"}),{data:m,isLoading:y}=Zi({connection:d,networkId:t?.chainId??O.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:r?.address??"",stakePubkey:e?.stakeAccount??"",amount:parseInt(c),disabled:e?.activationState!=="inactive"}),k=Ge(e?.activationState),h=je(e?.activationState),w=k?m:h?p:void 0,T=k?y:h?S:!1,b=sr({process:e?.activationState==="active"?"convertDelayed":"convert",provider:t,transactionData:w,isLoadingTransactionData:T}),N=(0,ts.useCallback)(()=>{a({provider:t,convertDetails:e,amount:c,fromAmount:b.payAsset?.amount,toAmount:b.receiveAsset?.amount,fromAmountUSD:b.payAsset?.amountUsd,toAmountUSD:b.receiveAsset?.amountUsd}),u(w),o()},[o,u,w,a,e,t,b,c]);return{...b,durationUntilEpochEnds:l,onPrimaryButtonPress:N}},"useConvertStakeAccountReviewPageProps");i();s();var Nt=x(C());i();s();var Du=2,es=n(({networkID:t,poolTokenMintAddress:e})=>{let o=O.getAddressType(t),{fungible:r}=Et({key:e}),a=Gn(t,o),{fungible:c}=Et({key:a}),u=K(c?.data.amount??""),l=K(No),d=K(We),p=K(We),S=K(Du).plus(l),m=r?K(S).plus(d):K(p).plus(S).plus(d),y=K(u).minus(m),k=K.max(y,0);return{minAmount:m,maxAmount:k,balance:u}},"useMintMaxMinAmounts");var Vu=n(t=>{if(t.isLessThan(.01))return t.toString();let e=t.dp();return t.isLessThan(1)&&e&&e>1?t.toFixed(2,K.ROUND_FLOOR):parseFloat(t.toFixed(1,K.ROUND_FLOOR)).toString()},"formatInitialStakeUiAmount"),Ku=n(({goBack:t,goToReviewPage:e,showInfoPage:o,lstCaip19:r})=>{let a=pt,c=U(X=>X.amount),u=U(X=>X.setAmount),l=U(X=>X.setProvider),d=a?.data.symbol??"",p=a?.data.chain.id??O.solana.mainnetID,S=a?.data.decimals??pt.data.decimals,{data:m}=bt(q.Solana),{pickedLSTProvider:y}=_t(O.solana.mainnetID),k=y(r),h=k?.stakePoolTokenMetadata.metadata.address??"";Zn(m,Xn.STAKE_FUNGIBLE);let{minAmount:w,maxAmount:T,balance:b}=es({networkID:p,poolTokenMintAddress:h}),N=(0,Nt.useMemo)(()=>{if(c)return In(c,S);let X=b.multipliedBy(.95),gt=K.max(K.min(X,T),w);return Vu(Tt(gt,S))},[c,b,S,T,w]),[B,H]=(0,Nt.useState)(N),J=Tt(T,S),Z=Tt(w,S),z=Tt(b,S),_=En(B,S).toString(),et=K(_),at=b.isLessThan(w),tt=et.isGreaterThan(T),ot=et.isFinite(),It=(0,Nt.useMemo)(()=>{if(!k)return v.t("mintLiquidStakeAmountNoProviders");if(_&&at)return v.t("mintLiquidStakeAmountMinRequired",{symbol:d,amount:Z});if(_&&tt)return v.t("mintLiquidStakeAmountInsufficientBalance")},[k,_,at,tt,Z,d]),Ut=ot&&!It,Yt=(0,Nt.useMemo)(()=>{if(!k)return;let X=me(Number.parseFloat(k.apy)),{address:gt,name:D,symbol:Pt,logoURI:we}=k.stakePoolTokenMetadata.metadata,so=K(1).dividedBy(K(k.convertRatio)),co=`1 ${d} \u2248 ${pe(so)} ${Pt}`;return{identifier:gt,apy:X,name:D,symbol:Pt,rate:co,logoURI:we}},[k,d]),$t=(0,Nt.useCallback)(()=>{H(String(J))},[J]),Jt=(0,Nt.useCallback)(X=>{let gt=Pn(X);Uo(gt,S??9)&&H(gt)},[S]),zt=(0,Nt.useCallback)(()=>{l(k),u(_),e()},[k,_,e,u,l]),Xt=(0,Nt.useCallback)(()=>{u(""),t()},[u,t]);return{amount:B,amountError:It,balance:z,symbol:d,title:v.t("liquidStakeMintStakeSOL"),poolToken:Yt,canSubmit:Ut,onBack:Xt,onContinue:zt,onChangeAmount:Jt,onSetMax:$t,onInfoPress:r===F?o:void 0}},"useMintLiquidStakeAmountProps");i();s();var ue=x(C());var mr=null,qu=n(t=>{if(!mr&&t){let e="liquidStake";mr=new ve(t,e)}if(!mr)throw new Error("liquidStakeAnalytics was not properly configured");return mr},"getLiquidStakeSequenceAnalytics"),Ft=n(()=>{let t=Dt(),e=qu(t),o=n(m=>{switch(m){case F:return"Phantom Staked SOL";case re:return"Jito Staked SOL";default:return}},"getTokenNameFromCaip19"),r=n(m=>{switch(m){case F:return"PSOL";case re:return"JITOSOL";default:return}},"getTokenSymbolFromCaip19"),a=(0,ue.useCallback)(({provider:m,entryPoint:y,testVariant:k})=>{t.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:m,lstSymbol:r(m),entryPoint:y,testVariant:k??""}})},[t]),c=(0,ue.useCallback)(({lstCaip19:m,testVariant:y,entryPoint:k})=>{t.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:m,lstSymbol:r(m),testVariant:y,entryPoint:k}}})},[t]),u=(0,ue.useCallback)(m=>{let y=m?o(m):void 0,k=m?r(m):void 0;t.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:m,token:y,tokenSymbol:k}}})},[t]),l=(0,ue.useCallback)(({provider:m,payAmount:y,receiveAmount:k,payAmountUSD:h,receiveAmountUSD:w,payAssetTitle:T,providerName:b,receiveAssetTitle:N})=>{t.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,payAmount:y,receiveAmount:k,payAmountUSD:h,receiveAmountUSD:w,payAssetTitle:T,receiveAssetTitle:N,providerName:b}}})},[t]),d=(0,ue.useCallback)((m,y)=>{e.submittedTransaction(m,{chainType:q.Solana,chainName:lt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:y})},[e]),p=(0,ue.useCallback)(({provider:m,amount:y})=>{t.capture("liquidStakingMintSuccess",{data:{stake:{apy:m?.apy,convertRatio:m?.convertRatio,caip19:m?.stakePoolTokenMetadata.caip19,stakePoolAddress:m?.stakePoolAddress,token:m?.stakePoolTokenMetadata.metadata.name,totalAmount:y}}})},[t]),S=(0,ue.useCallback)(m=>{t.capture("liquidStakingMintFailed",{data:{stake:{amount:m}}})},[t]);return{trackMintModalContinue:u,trackMarketingModalSeen:a,trackMarketingModalContinue:c,trackMintSubmitted:d,trackMintSuccess:p,trackMintFailed:S,trackMintApprovedByUser:l}},"useMintStakeAnalytics");i();s();var ft=x(C());var Wu="https://www.jito.network/defi/";function Hu({poolTokenSymbol:t,txHash:e,txError:o,confirmationStatus:r,showUKDisclaimer:a,onDismiss:c,openExternalLink:u}){let l={title:v.t("commandClose"),onPress:c},d={txHash:e,txHashTitle:v.t("commandViewTransaction")};return o?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:t}),...d,primaryButton:l,showUKDisclaimer:a,openExternalLink:u}:r==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle"),message:"",...d,primaryButton:l,showUKDisclaimer:a,openExternalLink:u}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle"),message:v.t("mintStakeStatusLoadingMessage"),...d,primaryButton:l,showUKDisclaimer:a,openExternalLink:u}}n(Hu,"getStatusPageProps");var Gu=n((t,e)=>{let o=Go(),[r,a]=(0,ft.useState)("loading"),[c,u]=(0,ft.useState)(),[l,d]=(0,ft.useState)(),{trackMintSubmitted:p,trackMintSuccess:S,trackMintFailed:m}=Ft(),{usageState:y,setUsageState:k}=Oe(),h=U(D=>D.provider),w=U(D=>D.setTransactionData),T=U(D=>D.amount),b=pt,N=h?.stakePoolTokenMetadata.metadata.symbol??"",B=h?.stakePoolTokenMetadata.metadata.address??"",{data:H}=ee(),J=H?.type===de.Ledger,z=(0,ft.useMemo)(()=>(H?.addresses??[]).find(D=>D.networkID===b?.data.chain.id),[b?.data.chain.id,H?.addresses])?.addressType??q.Solana,{fungible:_,isLoadingTokens:et}=Et({key:B}),at=(0,ft.useCallback)(D=>{p(D.id),u(D),y.mint||k({mint:!0})},[k,p,y.mint]),tt=(0,ft.useCallback)(D=>{m(T);let Pt=nr(D);d(Pt)},[m,T]),ot=(0,ft.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle")}}),[]),{executeLiquidStake:It,isReadyToExecute:Ut}=rr({isLoadingPoolToken:et,pendingActivityRow:ot,onTransactionSubmitted:at,onTransactionFailed:tt,activityType:xe.DelegateStake}),Yt=(0,ft.useCallback)(()=>{S({amount:T,provider:h}),w(void 0),o()},[S,T,h,w,o]),{isSuccess:$t,isError:Jt,error:zt}=wo(Yt,c);(0,ft.useEffect)(()=>{$t?a("confirmed"):Jt&&(a("error"),d(zt),m(T))},[$t,m,T,Jt,zt,c]);let Xt=er({txReceipt:c,isTxError:Jt,poolTokenFungible:_,invalidateQueries:o,dismissLiquidStaking:t}),X=jt(),gt=(0,ft.useMemo)(()=>Hu({poolTokenSymbol:N,txHash:c?.id,txError:l,confirmationStatus:r,showUKDisclaimer:X,onDismiss:Xt,openExternalLink:e}),[N,c?.id,l,r,Xt,e,X]);return{addressType:z,isLedger:J,isReadyToExecute:Ut,statusPageProps:gt,learnMoreLink:Wu,txError:l,executeLiquidStake:It,isJitoSOL:ar(h),isPSOL:ir(h)}},"useMintLiquidStakeStatusPageProps");i();s();var ao=x(C());function ju({navigateToMintLiquidStakeAmountPage:t,navigateBack:e,entryPoint:o}){let{trackMarketingModalContinue:r}=Ft(),a=kt(E.StakingWelcome),c=yn("psol-popup-copy-test"),u=(0,ao.useCallback)(()=>{r({lstCaip19:F,testVariant:c,entryPoint:o}),t(F),a()},[t,r,a,c,o]),l=(0,ao.useCallback)(()=>{e(),a()},[e,a]),{t:d}=Y(),p={title:d("liquidStakingInfoPageStillEarningZero"),description:d("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:d("liquidStakingInfoPageConvertYourSOLButton")},S={title:d("liquidStakingInfoPageEarnUpTo9APY"),description:d("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:d("liquidStakingInfoPageStartEarning")},m=c==="test1"?p:c==="test2"?S:p;return(0,ao.useLayoutEffect)(()=>()=>void a(),[a]),{onPrimaryButtonPress:u,onClose:l,viewState:m}}n(ju,"useMintLiquidStakeMarketingProps");i();s();i();s();var rs=x(C());i();s();var os=n(t=>{let e=M.getMintTokenTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,amount:t.amount,poolTokenAccountAddress:t.poolTokenAccountAddress}),o=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.amount;return L({enabled:o,queryKey:e,staleTime:V.Never,async queryFn(){if(O.isSolanaNetworkID(t.networkId))try{let{transaction:r,signers:a,solWithdrawalFee:c,stakeWithdrawalFee:u}=await tn(t);return{networkID:t.networkId,transaction:r,signers:a,solWithdrawalFee:c,stakeWithdrawalFee:u}}catch(r){throw j.captureError(r,G.Staking),r}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetMintPoolTokenTransaction");var Qu=n((t,e)=>{let o=U(k=>k.amount),r=U(k=>k.setTransactionData),{data:a}=bt(q.Solana),{connection:c}=dt(),{fungible:u}=Et({key:t?.stakePoolTokenMetadata.metadata.address||""}),l=u?jn(u):void 0,{trackMintApprovedByUser:d}=Ft(),{data:p,isPending:S}=os({amount:rt(o).toNumber(),connection:c,networkId:t?.chainId??O.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:a?.address??"",poolTokenAccountAddress:l}),m=sr({provider:t,process:"mint",transactionData:p,isLoadingTransactionData:S}),y=(0,rs.useCallback)(()=>{d({provider:t,payAmount:m.payAsset?.amount,receiveAmount:m.receiveAsset?.amount,payAmountUSD:m.payAsset?.amountUsd,receiveAmountUSD:m.receiveAsset?.amountUsd,payAssetTitle:m.payAsset?.title,receiveAssetTitle:m.receiveAsset?.title,providerName:m.providerName}),r(p),e()},[d,t,m.payAsset?.amount,m.payAsset?.amountUsd,m.payAsset?.title,m.receiveAsset?.amount,m.receiveAsset?.amountUsd,m.receiveAsset?.title,m.providerName,r,p,e]);return{...m,onPrimaryButtonPress:y}},"useMintLiquidStakeReviewPageProps");i();s();var io=x(C());var Yu=n((t,e)=>{let{navigateToStake:o,navigateToUnstake:r,navigateToExternalLink:a}=t,{trackMintModalContinue:c}=Ft(),u=qt(F),p=!e||e===qn?u?F:re:e,S=(0,io.useCallback)(()=>{o(p)},[o,p]),m=(0,io.useCallback)(()=>{c(p),o(p)},[o,c,p]),y=(0,io.useCallback)(()=>{p===F?r():a(Er)},[r,a,p]),k=(0,io.useCallback)(()=>{a(_r)},[a]),h=qr({method:"mint",goToInfoPage:S,goToInitFlowPage:m});return qt(p)?{isSupported:!0,onStake:h,onUnstake:y,onDepositWithKamino:k}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}},"useLSTMintActions");i();s();var Ae=x(Bt());var $u="https://phantom.com/en-GB/uk-risk-summary";function on({navigateToExternalLink:t,paddingTop:e,marginX:o,paddingX:r}){let{t:a}=Y();return(0,Ae.jsx)(it,{backgroundColor:"brandMidnight",paddingX:r??"screen",marginX:o,paddingBottom:12,style:{paddingTop:(e??0)+4},gap:8,children:(0,Ae.jsx)(Q,{children:(0,Ae.jsxs)(Se,{children:[(0,Ae.jsx)(Q,{font:"captionSemibold",color:"textBase",children:a("stakingUKDisclaimerPart1")})," ",(0,Ae.jsx)(Q,{font:"captionSemibold",color:"textBase",onPress:n(()=>t($u),"onPress"),style:{textDecorationLine:"underline"},children:a("stakingUKDisclaimerTake2Mins")})]})})})}n(on,"UKDisclaimerCard");i();s();var rn=x(C());function Ju({navigateToMintLiquidStakeAmountPage:t,navigateBack:e}){let{trackMintModalContinue:o}=Ft(),r=(0,rn.useCallback)(()=>{o(F),t(F)},[t,o]),a=(0,rn.useCallback)(()=>{e()},[e]),c={imageUrl:"https://assets.phantom.app/assets/metadata/PSOL.png",title:v.t("mintPSOLInfoPageTitle"),features:[{icon:"InfoCircle",title:v.t("mintPSOLFeature1Title"),description:v.t("mintPSOLFeature1Description")},{icon:"TrendingUp",title:v.t("mintPSOLFeature2Title"),description:v.t("mintPSOLFeature2Description")},{icon:"ShieldVerified",title:v.t("mintPSOLFeature3Title"),description:v.t("mintPSOLFeature3Description")}],primaryButtonText:v.t("gotIt")};return{onPrimaryButtonPress:r,onClose:a,viewState:c}}n(Ju,"useMintLiquidStakeUKInfoProps");i();s();var St=x(Bt());var as=x(C());i();s();var st=x(Bt());function ns({marginTop:t}){let{t:e}=Y();return(0,st.jsxs)(it,{marginTop:t,children:[(0,st.jsx)(gr,{content:(0,st.jsx)(it,{padding:16,children:(0,st.jsx)(Q,{children:e("stakingUKDisclaimerPastPerformanceBody")})}),children:(0,st.jsx)(Q,{font:"caption",color:"brandYellowMoon",children:e("stakingUKDisclaimerPastPerformance")})}),(0,st.jsx)(Q,{children:(0,st.jsxs)(Se,{children:[(0,st.jsx)(Q,{font:"caption",color:"textDiminished",children:e("stakingUKDisclaimerExchangeRates")})," "]})}),(0,st.jsx)(gr,{content:(0,st.jsx)(it,{padding:16,children:(0,st.jsx)(Q,{children:e("stakingUKDisclosuresMarketDataBody")})}),children:(0,st.jsx)(Q,{font:"caption",color:"brandPrimary",children:e("stakingUKDisclaimerDisclosures")})}),(0,st.jsx)(Q,{font:"caption",color:"textDiminished",marginTop:24,children:e("stakingUKDisclaimerApproval")})]})}n(ns,"UKFooterDisclaimer");var zu={InfoCircle:So.InfoCircle,TrendingUp:So.TrendingUp,ShieldVerified:So.ShieldVerified};function Xu(t){return as.default.createElement(zu[t],{size:24})}n(Xu,"getIcon");function Zu({viewState:t,openLink:e,onPastPerformancePress:o,onDisclosuresPress:r}){let{features:a,title:c,imageUrl:u}=t;return(0,St.jsxs)(it,{flex:1,backgroundColor:"areaBase",borderRadius:"base",width:"100%",maxWidth:400,children:[(0,St.jsx)(on,{marginX:"-16",paddingX:12,paddingTop:8,navigateToExternalLink:e}),(0,St.jsx)(it,{alignItems:"center",padding:24,marginY:16,children:(0,St.jsx)(On,{src:u,size:100})}),(0,St.jsx)(Q,{color:"white",font:"title1Bold",marginBottom:16,align:"center",children:c}),(0,St.jsx)(it,{gap:"list",marginBottom:"screen",children:a.map(l=>(0,St.jsxs)(it,{direction:"row",alignItems:"flex-start",marginBottom:16,children:[(0,St.jsx)(it,{width:24,height:24,marginRight:"screen",alignItems:"center",justifyContent:"center",children:Xu(l.icon)}),(0,St.jsxs)(it,{flex:1,children:[(0,St.jsx)(Q,{color:"white",font:"bodySemibold",marginBottom:2,children:l.title}),(0,St.jsx)(Q,{color:"textDiminished",font:"caption",children:l.description})]})]},l.title))}),(0,St.jsx)(ns,{marginTop:0,showPastPerformanceInline:!0,onPastPerformancePress:o,onDisclosuresPress:r})]})}n(Zu,"StakeUKInfoView");i();s();i();s();var tl=[Ct.supportedTokens,Ct.featureUsed,Br],el=n(t=>{let e=String(t.queryKey[1]);return tl.includes(e)},"stakingShouldDehydrateQueryPredicate");export{Pe as a,vt as b,Ve as c,E as d,xo as e,ys as f,Ir as g,Ds as h,Vs as i,mt as j,Is as k,bo as l,fs as m,Ke as n,qe as o,kt as p,Ps as q,Es as r,Eo as s,Se as t,Ms as u,Bs as v,wa as w,Mf as x,Of as y,Ks as z,qs as A,pt as B,Ws as C,Lr as D,re as E,No as F,We as G,_e as H,Hs as I,DS as J,Ge as K,je as L,Ca as M,M as N,Uo as O,Dr as P,U as Q,el as R,ne as S,V as T,Da as U,Ye as V,Vr as W,Lt as X,Tc as Y,bc as Z,vc as _,ti as $,Ic as aa,Ec as ba,Oc as ca,Nc as da,Wo as ea,qt as fa,_t as ga,qc as ha,qr as ia,Bc as ja,Rc as ka,jt as la,Gc as ma,ke as na,yi as oa,jc as pa,Di as qa,Vi as ra,eI as sa,ji as ta,Ai as ua,hv as va,Bu as wa,Ru as xa,rr as ya,wu as za,Ku as Aa,Ft as Ba,Qu as Ca,Gu as Da,ju as Ea,Yu as Fa,on as Ga,Ju as Ha,ns as Ia,Zu as Ja};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-HLWWEHZK.js.map
