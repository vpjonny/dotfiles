import{h as qo}from"./chunk-5U2TK6YQ.js";import{c as Xo,e as be,la as Ko,u as Go,ua as Zo,va as Qo}from"./chunk-VRODSUQC.js";import{a as w,b as _,c as At,d as ct}from"./chunk-L4PR2H35.js";import{a as ce,b as No,d as Oo}from"./chunk-PELFKYLV.js";import{d as Ro,e as ot}from"./chunk-PFY5DZIQ.js";import{B as Vo,C as _o,D as Uo,t as Mo,u as jo}from"./chunk-EAEMLYNM.js";import{G as Ho,H as rt,I as nt,J as it,eb as at,fb as zo,gb as Wo,hb as st,ib as $o}from"./chunk-44HH5QGP.js";import{Aa as ge,Ba as se,Ea as z,Ga as Ce,Ia as Eo,Ja as Do,Ka as ko,M as Bo,Ma as vo,Pa as Fo,Qa as tt,Ua as Io,g as x,j as P,k as Q,l as Je,n as So,o as Pt,xa as wo,ya as Lo,z as et}from"./chunk-5JGASDWN.js";import{V as yo,W as To}from"./chunk-N6SSDFMX.js";import{$a as no,A as Jt,Cb as ao,hb as io,k as Qt,l as Yt,mc as so,oc as co}from"./chunk-W7IWPUIQ.js";import{Pc as Ye,Zd as xt}from"./chunk-4SCKDS7G.js";import{$c as K,Ue as we,Ve as ro,Yd as $e,dc as X,ee as Zt,fc as $t,jc as qt,kc as Xt,le as eo,me as to,ra as Wt,v as fe,vd as Kt,yc as Gt,ze as oo}from"./chunk-DJGGVTSJ.js";import{b as ae}from"./chunk-2RWUL32J.js";import{a as te}from"./chunk-RWWUDPHX.js";import{Aa as qe,Bb as bo,Ca as k,Da as lo,Fa as mo,G as Ht,Ga as Z,H as zt,Hb as xo,Ib as Po,Jb as Ao,Lb as Ze,Na as d,Oa as Xe,Pa as Ge,Ra as po,Ua as b,Ub as Qe,Wa as Ve,Wb as _e,Z as A,a as B,b as y,bb as uo,cb as fo,ec as he,j as O,jb as Ke,k as L,nb as ho,sb as go,ub as Co}from"./chunk-LQZGQEJ6.js";import{a as c,g as f,i as a,n as s}from"./chunk-WKJYWAXG.js";a();s();var W=f(y());a();s();var Yo=x(e=>{let{refetch:t}=e(No),{refetch:o}=e(Ce),i=e(ce);return()=>{Lo(),o(),i&&t()}}),Jr=ge(e=>{let t=e(Yo),o=e(Do);o.status==="error"&&o.error.cause==="TooManyFungibleUpdates"&&t()}),en=x(e=>{e(Jr);let t=e(Yo),{isPending:o,isRefetching:i,isLoading:r}=e(Ce);return{isPending:o,isLoading:r,isRefetching:i,refetch:t}}),Le=en;var Be=f(B());a();s();var Jo=f(B());var tn=5e3,on=1e4,G={HiddenTitle:"hidden-title",HiddenButton:"hidden-button",Collection:"collection",Empty:"empty",CollectiblesTrimmed:"collectibles-trimmed",AddCollection:"add-collection"};function xe(){let e=P(z),t=P(_),o=e?.addresses??[],i=e?.identifier??"",{data:r=[],isLoading:n,isRefetching:m,isError:l,isRefetchError:p,refetch:h}=Mo({addresses:o,queryOptions:{staleTime:tn,refetchInterval:on,enabled:t==="collectibles"}}),g=jo({addresses:o}),{getIsHidden:S,getIsSpam:C,isLoading:R}=Vo(e?.identifier??""),{data:$=[],isPending:M}=Uo(i),{collections:T,hiddenCollections:v,spamCollections:q}=_o({allCollections:r,pinnedCollectionIds:$,getIsHidden:S,getIsSpam:C});return{gridItems:(0,Jo.useMemo)(()=>{let pe=T.map(ie=>({type:G.Collection,data:{...ie,determinedHidden:S(ie),determinedSpam:C(ie)}}));return g&&pe.push({type:G.CollectiblesTrimmed,data:null}),pe},[T,g,S,C]),isLoadingCollections:n,isRefetchingCollections:m,isErrorCollections:l,isRefetchErrorCollections:p,refetchCollections:h,isLoadingCollectionVisibility:R,isLoadingPinnedCollections:M,collections:T,pinnedCollectionIds:$,hiddenCollections:v,spamCollections:q}}c(xe,"useCollectibles");a();s();var yt=f(y());var Pe=f(B());a();s();var rn=c(e=>self.open(e,"_blank"),"openUrl"),er=rn;var nn="https://help.phantom.com/hc/en-us/articles/39776532231571-Why-does-my-Phantom-wallet-show-a-malicious-account-warning";function an(e){if(e.data.length===0)return!1;try{return!!fe.NonceAccount.fromAccountData(e.data)}catch{return!1}}c(an,"isNonceAccount");function sn(){let{t:e}=A(),t=ae(),o=P(z),{connection:i}=Bo(),{data:r}=so(Wt.Solana),n=o&&o.isReadOnly,{data:m,status:l}=Kt({staleTime:K({minutes:10}),enabled:!!r?.address,queryKey:["accountOwner",r?.address],queryFn:c(()=>{if(!r?.address)throw new Error("No selected solana address");return i.getAccountInfo(new fe.PublicKey(r.address))},"queryFn")}),p=(0,Pe.useMemo)(()=>m?!n&&l==="success"&&an(m):!1,[n,l,m]),h=(0,Pe.useMemo)(()=>!n&&l==="success"&&m?.owner&&m.owner.toBase58()!==fe.SystemProgram.programId.toBase58(),[n,l,m]);return(0,Pe.useEffect)(()=>{(h||p)&&t.capture("portfolioHomeMaliciousAccountWarning",{data:{reason:h?"owner":"nonceAccount",networkId:r?.networkID}})},[h,p,t,r?.networkID]),h||p?(0,yt.jsx)(d,{marginX:"screen",marginTop:16,children:(0,yt.jsx)(Ze,{level:"2-alert",actions:[{children:e("commandLearnMore2"),onPress:c(()=>{er(nn)},"onPress")}],children:e("portfolioHomeAccountOwnerWarning")})}):null}c(sn,"AccountOwnerWarning");var tr=(0,Pe.memo)(sn);a();s();var Ee=f(y());var oe=f(B());a();s();var or=f(B()),Y=f(y());var Ae=f(B());function cn({tabs:e}){return(0,Y.jsx)(un,{values:e.map(t=>({key:t.key,onClick:t.onPress,node:(0,Y.jsx)(b,{font:"title1Semibold",color:t.isActive?"textBase":"textDiminished",whiteSpace:"nowrap",children:t.title})}))})}c(cn,"TabItems");var rr=cn,ln=qe({display:"flex",flex:1,overflowX:"hidden",position:"relative",left:"-16",paddingLeft:16,marginRight:"-16"}),mn=qe({display:"flex",flexDirection:"row",gap:12,paddingRight:12}),pn={background:`linear-gradient(to left, ${k.colors.legacy.areaBase}, ${te(k.colors.legacy.areaBase,.85)}, ${te(k.colors.legacy.areaBase,0)})`};function dn(e){if(!e)return 0;let{width:t}=e.getBoundingClientRect(),o=e.scrollWidth;return t-o}c(dn,"getEndFromNode");function un({values:e}){let t=(0,Ae.useRef)(null),[o,i]=(0,Ae.useState)(null),[r,n]=(0,Ae.useState)(0),m=fo(0);return(0,Ae.useLayoutEffect)(()=>{let l=c(()=>{n(dn(t.current))},"updateXEnd");l();let p=new ResizeObserver(l);return t.current&&p.observe(t.current),()=>p.disconnect()},[]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{ref:t,className:ln,children:(0,Y.jsx)(uo.div,{className:mn,drag:"x",style:{x:m},dragConstraints:{left:r,right:0},onDragStart:c(()=>{i(m.get())},"onDragStart"),onDragEnd:c(()=>{i(null)},"onDragEnd"),onWheel:c(l=>{if(l.deltaX===0)return;let p=m.get()-l.deltaX;return p>0?m.set(0):p<r?m.set(r):m.set(p)},"onWheel"),children:e.map(({key:l,onClick:p,node:h})=>(0,or.createElement)("div",{...p&&{role:"button",className:qe({cursor:"pointer"})},key:l,onClick:c(g=>{if(o!==null){g.stopPropagation(),g.preventDefault();return}p?.()},"onClick")},h))})}),(0,Y.jsx)(d,{position:"absolute",right:24,top:0,width:24,height:"100%",style:pn})]})}c(un,"DraggableContainer");var fn=c(({selectedDataTab:e,onTappingManageTokens:t,onTappingManageCollections:o,onTappingSettings:i,isBalanceHidden:r,toggleBalanceVisibility:n,onRefresh:m})=>{let{t:l}=A(),p=ae(),h=Q(_),g=oe.default.useRef(null),S=Zt.isFeatureEnabled("kill-collectibles"),C=(0,oe.useCallback)(()=>{p.capture("portfolioHomeContextMenuOpened"),g.current?.open()},[p]),R=(0,oe.useMemo)(()=>{let T=[];return e===w.Tokens&&T.push({text:l("portfolioHomeManageTokens"),onPress:t,icon:"ToggleLeft"}),e===w.Collectibles&&T.push({text:l("portfolioHomeManageCollectibles"),onPress:o,icon:"ToggleLeft"}),T.push({text:l(r?"portfolioHomeShowBalances":"portfolioHomeHideBalances"),onPress:n,icon:r?"EyeFill":"EyeFillOff"}),T.push({text:l("portfolioHomeWalletSettings"),onPress:i,icon:"Settings"}),Ht&&T.push({text:l("portfolioHomeRefresh"),onPress:m,icon:"RefreshCw"}),T},[r,o,t,i,e,n,m,l]),$=(0,oe.useCallback)(T=>{h(T),p.capture("portfolioHomeTabSelected",{data:{tab:T}})},[h,p]),M=(0,oe.useMemo)(()=>[{key:w.Tokens,title:l("portfolioHomeTokens"),isActive:e===w.Tokens,onPress:e!==w.Tokens?()=>$(w.Tokens):void 0},!S&&{key:w.Collectibles,title:l("portfolioHomeCollectibles"),isActive:e===w.Collectibles,onPress:e!==w.Collectibles?()=>$(w.Collectibles):void 0}].filter(to),[e,$,l,S]);return(0,Ee.jsxs)(d,{direction:"row",justifyContent:"space-between",alignItems:"center",marginX:"screen",gap:8,position:"relative",children:[(0,Ee.jsx)(rr,{tabs:M}),(0,Ee.jsx)(go,{ref:g,items:R,children:(0,Ee.jsx)(Co,{color:["textDiminished","textBase"],icon:"MoreHorizontal",label:"More",size:24,bounded:!1,onPress:C})})]})},"ListDataTabBar"),nr=oe.default.memo(fn);a();s();var xr=f(y());var Pr=f(B());a();s();a();s();a();s();var De=f(y());var Tt="\u2022\u2022\u2022\u2022\u2022\u2022",lt=c(({children:e,isBalanceHidden:t,showHiddenText:o,font:i="caption",textColor:r="textDiminished",paddingTop:n=0})=>{let{t:m}=A();return t?o?(0,De.jsxs)(d,{gap:4,alignItems:"center",direction:"row",paddingTop:n,children:[(0,De.jsx)(Z.Eye,{size:16,color:"textDiminished"}),(0,De.jsx)(b,{font:i,color:r,children:m("commandShowBalance")})]}):(0,De.jsx)(b,{font:i,color:r,children:Tt}):e},"PrivacyWrapper");a();s();function ir(e){return we(e,{includePlusPrefix:!0,minimumAmount:.01})}c(ir,"formatPnlAmount");a();s();function St(e){let t=e.split("-")[0],o=t.indexOf(":");return o!==-1?t.substring(o+1):t}c(St,"formatMarketName");a();s();a();s();var ye=f(B());a();s();function ke(e){let t=new L(e.accountValue);if(e.dexs)for(let o of Object.values(e.dexs))t=t.plus(new L(o.accountValue));return t.toString()}c(ke,"getTotalAccountValue");function ve(e){let t=new L(e.availableToTrade);if(e.dexs)for(let o of Object.values(e.dexs))t=t.plus(new L(o.availableToTrade));return t.toString()}c(ve,"getTotalAvailableToTrade");a();s();a();s();function ar(e){let t=typeof e=="string"?qt(e):e;return t.address.split(":").pop()||t.address}c(ar,"getTokenMarketName");function Fe(e,t){let o=new L(e.unrealizedPnl.amount),r=o.isGreaterThan(0)?"spotPositive":"spotNegative",n=ir(o),m=ro(Number(e.unrealizedPnl.percentage),{includePlusPrefix:!0}),l=we(new L(e.margin));return{marketId:Xt(e.market.token),position:e,image:e.market.logoUri,title:ar(e.market.token),subtitle:`${e.direction==="long"?t("perpsPositionLong"):t("perpsPositionShort")} ${e.leverage}x`,price:l,priceChange:{text:`${n} (${m})`,color:r}}}c(Fe,"toPositionRowSpec");a();s();var hn=O.object({accountBalance:rt,lastUpdated:O.number()}),Bt=x(null),gn=x(e=>{let t=e(Bt);return!t||t.type!=="accountBalance"&&t.type!=="refreshing"?{status:"pending",data:void 0}:{status:"success",data:{accountBalance:t.accountBalance,lastUpdated:Date.now()}}}),sr=se({atomToStoreOffline:gn,offlineKey:x(e=>`${e(z)?.identifier??""}:perps-balance`),namespaceKey:"perps",ttlMs:K({hours:24}),initialValue:{accountBalance:{accountValue:"0",availableBalance:"0",availableToTrade:"0"},lastUpdated:0},schema:hn});a();s();var Cn=O.object({positions:O.array(nt),openOrders:O.array(it),lastUpdated:O.number()}),wt=x(null),bn=x(e=>{let t=e(wt);return!t||t.type!=="positions"?{status:"pending",data:void 0}:{status:"success",data:{positions:t.positions,openOrders:t.openOrders,lastUpdated:Date.now()}}}),cr=se({atomToStoreOffline:bn,offlineKey:x(e=>`${e(z)?.identifier??""}:perps-positions`),namespaceKey:"perps",ttlMs:K({hours:24}),initialValue:{positions:[],openOrders:[],lastUpdated:0},schema:Cn});var mt=c(()=>{let{t:e}=A(),{accountBalanceState:t,positionsState:o}=at(),i=Q(wt),r=P(cr),n=Q(Bt),m=P(sr);(0,ye.useEffect)(()=>{i(o)},[o,i]),(0,ye.useEffect)(()=>{n(t)},[t,n]);let l=(0,ye.useMemo)(()=>{if(t.type==="accountBalance"||t.type==="refreshing"){let C=ke(t.accountBalance),R=ve(t.accountBalance);return{status:t.type,symbol:"USDC",availableToTrade:new L(R),accountValue:new L(C),isCached:!1}}if(m.lastUpdated>0){let C=ke(m.accountBalance),R=ve(m.accountBalance);return{status:t.type==="loading"?"loading":"accountBalance",symbol:"USDC",availableToTrade:new L(R),accountValue:new L(C),isCached:!0,lastUpdated:m.lastUpdated}}return{status:t.type,symbol:"USDC",availableToTrade:new L(0),accountValue:new L(0),isCached:!1}},[t,m]),p=(0,ye.useMemo)(()=>o.type==="positions"||o.type==="refreshing"?{status:o.type,positions:o.positions.map(C=>Fe(C,e)),isCached:!1}:r.positions.length>0?{status:o.type==="loading"?"loading":"positions",positions:r.positions.map(C=>Fe(C,e)),isCached:!0,lastUpdated:r.lastUpdated}:{status:o.type,positions:[],isCached:!1},[o,r,e]),h=(0,ye.useMemo)(()=>o.type==="positions"||o.type==="refreshing"?{status:o.type,orders:o.openOrders,isCached:!1}:r.openOrders.length>0?{status:o.type==="loading"?"loading":"positions",orders:r.openOrders,isCached:!0,lastUpdated:r.lastUpdated}:{status:o.type,orders:[],isCached:!1},[o,r]);return{balance:l,positions:p,openOrders:h}},"useCachedPerpsPortfolioList");var Lt=c(()=>{let{balance:e}=mt();return e.accountValue.toNumber()},"usePerpsAccountBalance");var pt=f(B());var lr=c(()=>{let{status:e,data:t}=P(Oo),{currentValue:o,priceDifference:i,totalPercentChange24h:r}=t,n=Ho(),m=Lt(),l=(0,pt.useMemo)(()=>{if(o!==void 0)return o+(n?m:0)},[o,m,n]),p=(0,pt.useMemo)(()=>{if(i===void 0||l===void 0)return i;let g=l-i;return g?i/g*100:0},[i,l]);return{isLoading:(0,pt.useMemo)(()=>e==="pending"&&o===void 0,[e,o]),combinedPortfolioValue:l,combinedTotalPercentChange24h:p,fungiblesPortfolioValue:o,priceDifference:i,totalPercentChange24h:r}},"usePortfolioValue");a();s();var mr=c(e=>{let t=P(ce),o=P(Eo),i=oo(e,1e3),{data:r}=io(o),{mutate:n}=ao();return co({accountBalance:r?.value,accountId:o??"",enabled:t,value:i,setAccountBalance:n}),i},"useSyncGlobalAccountBalance");a();s();var N=f(y());a();s();var pr=f(B());var dr=c(e=>(0,pr.useMemo)(()=>e?e>0?"spotPositive":"spotNegative":"textDiminished",[e]),"useBalancePercentageColor");a();s();function Et(e){return e===void 0?"-":`${e>=0?"+":"-"}${Math.abs(e).toFixed(2)}%`}c(Et,"formatPercentChange");a();s();var Dt=f(y());var Ie=f(B());function kt({children:e,maxFontSize:t}){let o=(0,Ie.useRef)(null),[i,r]=(0,Ie.useState)(t);return(0,Ie.useEffect)(()=>{let n=o.current;if(!n)return;let m=new ResizeObserver(()=>{let l=i;n.querySelectorAll("*").forEach(h=>{for(;h.scrollWidth>n.clientWidth&&l>10;)l-=1,h.style.fontSize=`${l}px`}),r(l)});return m.observe(n),()=>{m.disconnect()}},[i]),(0,Dt.jsx)(d,{ref:o,overflow:"hidden",width:"100%",display:"flex",direction:"column",alignItems:"center",children:(0,Dt.jsx)("div",{style:{fontSize:`${i}px`,whiteSpace:"nowrap"},children:e})})}c(kt,"AutoResizeText");a();s();var Re=f(y());var Pn="\u2022\u2022\u2022\u2022\u2022\u2022",vt=c(({children:e,isBalanceHidden:t,showHiddenText:o,font:i="caption",textColor:r="textDiminished",paddingTop:n=0})=>{let{t:m}=A();return t?o?(0,Re.jsxs)(d,{gap:4,alignItems:"center",direction:"row",paddingTop:n,children:[(0,Re.jsx)(Z.Eye,{size:16,color:"textDiminished"}),(0,Re.jsx)(b,{font:i,color:r,children:m("commandShowBalance")})]}):(0,Re.jsx)(b,{font:i,color:r,paddingTop:n,children:Pn}):e},"PrivacyWrapper");a();s();var It=f(y());var J=f(B());a();s();a();s();a();s();a();s();function Ft(e){return t=>{let o=!1,i={...t};for(let r of e.queried){let n=e.prices[r],m=n?.price;if(!n)continue;let l=t[r]?.lastUpdatedAt,p=!l||n.lastUpdatedAt&&new Date(n.lastUpdatedAt)>l;m&&t[r]?.price!==m&&p&&(o=!0,i[r]={price:m,priceChange24h:n.priceChange24h??n.usd_24h_change,lastUpdatedAt:n.lastUpdatedAt?new Date(n.lastUpdatedAt):new Date})}return o?i:t}}c(Ft,"processBulkPriceData");a();s();var An=x(!1),ur=An;var fr=So(e=>{let t=e(ct),o=e(ur),i=e(ce);return{enabled:t.length>0&&!o&&i,refetchInterval:5e3,queryKey:["visible-prices",{tokens:t.map(r=>r.encodedCaip19).sort(),type:"visible-chunk",isMainnet:i}],queryFn:c(async()=>{let r=await Fo({tokens:t.map(n=>n.decodedCaip19)});return{prices:Object.fromEntries(Object.entries(r).map(([n,m])=>[n,{...m,lastUpdatedAt:m.lastUpdatedAt??new Date().toISOString()}])),queried:t.map(n=>n.encodedCaip19)}},"queryFn")}}),yn=ge((e,t)=>{let{data:o}=e(fr);o&&t(ko,Ft(o))}),Tn=x(e=>{e(yn);let t=e(fr);return{status:t.status,isFetching:t.isFetching}}),hr=Tn;var dt=x(0),Sn=3,Bn=5,wn=Pt(At,({priceErrorCount:e})=>e),Ln=ge((e,t)=>{e(wn)>0?t(dt,i=>i+1):t(dt,0)});function En(e,t){let o=Pt(e,({status:i,isFetching:r})=>({status:i,isFetching:r}),(i,r)=>JSON.stringify(i)===JSON.stringify(r));return ge((i,r)=>{let n=i(o);n.isFetching||(n.status==="error"&&r(t,m=>m+1),n.status==="success"&&r(t,0))})}c(En,"createStatusChangeEffectAtom");var Dn=En(hr,dt),kn=x(e=>{e(Dn),e(Ln);let{balanceErrorCount:t,partialErrors:o}=e(At);return{isBalanceError:t>=Sn,isPriceError:e(dt)>=Bn,partialErrors:o||[]}}),gr=kn;a();s();var vn=x(e=>{let t=e(vo),o=e(_),{isBalanceError:i,isPriceError:r,partialErrors:n}=e(gr),{isPerpsBalanceError:m,isPerpsPositionsError:l}=e(st),p=e(ce),h=t.length>0,g=n&&n.length>0;return o==="fungibles"&&i&&r&&h&&p?{reason:"both"}:o==="fungibles"&&i&&h?{reason:"balances"}:o==="fungibles"&&r&&p?{reason:"prices"}:m&&l?{reason:"perpsBoth"}:m?{reason:"perpsBalance"}:l?{reason:"perpsPositions"}:o==="fungibles"&&g&&!i&&!r?{reason:"networkSpecific",partialErrors:n}:null}),Cr=vn;function Fn(e){let t=e.map(l=>l.details.chainId),o=e.map(l=>l.code),i=[...new Set(t)],r=[...new Set(o)],n=i.reduce((l,p)=>(l[p]=t.filter(h=>h===p).length,l),{}),m=r.reduce((l,p)=>(l[p]=o.filter(h=>h===p).length,l),{});return{uniqueChains:i,uniqueErrorCodes:r,errorsPerChain:n,errorTypeCount:m,mostAffectedChain:Object.entries(n).reduce((l,p)=>n[l[0]]>n[p[0]]?l:p)[0],mostCommonError:Object.entries(m).reduce((l,p)=>m[l[0]]>m[p[0]]?l:p)[0]}}c(Fn,"analyzeErrorPatterns");function In({style:e}){let t=(0,J.useRef)(void 0),o=(0,J.useRef)(!1),i=ae(),{t:r}=A(),[n]=Je(Cr);(0,J.useEffect)(()=>{if(n?.reason!==t.current){t.current=n?.reason;let l={reason:t.current??"none"};if(n?.reason==="networkSpecific"&&n.partialErrors){let p=Fn(n.partialErrors),h=p.uniqueChains.map(g=>X.getChainName(g));i.capture("portfolioHomeErrorBanner",{data:{...l,networkCount:p.uniqueChains.length,chainIds:p.uniqueChains,chainNames:h,errorCodes:p.uniqueErrorCodes,totalErrors:n.partialErrors.length,mostAffectedChain:p.mostAffectedChain,mostCommonError:p.mostCommonError}}),i.capture("portfolioHomeNetworkSpecificError",{data:{networkCount:p.uniqueChains.length,chainIds:p.uniqueChains,chainNames:h,errorCodes:p.uniqueErrorCodes,totalErrors:n.partialErrors.length,isSingleNetwork:p.uniqueChains.length===1,errorsPerChain:p.errorsPerChain,errorTypeCount:p.errorTypeCount,mostAffectedChain:p.mostAffectedChain,mostCommonError:p.mostCommonError}})}else i.capture("portfolioHomeErrorBanner",{data:l})}},[n?.reason,n?.partialErrors,i]);let m=(0,J.useMemo)(()=>{if(n==null)return null;if(n.reason==="balances")return r("partialErrorTokenDetail");if(n.reason==="prices")return r("partialErrorTokenPrices");if(n.reason==="perpsBalance")return r("partialErrorPerpsBalance");if(n.reason==="perpsPositions")return r("partialErrorPerpsPositions");if(n.reason==="perpsBoth")return r("partialErrorPerpsBoth");if(n.reason==="networkSpecific"&&n.partialErrors){let l=[...new Set(n.partialErrors.map(g=>g.details.chainId))];if(l.length===1){let g=X.getChainName(l[0]);return r("partialErrorBalanceChainName",{chainName:g})}let p=l.map(g=>X.getChainName(g)),h;if(p.length===2)h=`${p[0]} and ${p[1]}`;else{let g=p.pop();h=`${p.join(", ")}, and ${g}`}return r("partialErrorBalanceMultipleChains",{chainNames:h})}return r("partialErrorGeneric")},[n,r]);return(0,J.useEffect)(()=>{let l=m!==null;l&&!o.current?(o.current=!0,i.capture("portfolioHomeErrorBannerDisplayed",{data:{reason:n?.reason??"unknown",timestamp:Date.now()}})):!l&&o.current&&(o.current=!1,i.capture("portfolioHomeErrorBannerHidden",{data:{reason:t.current??"unknown",timestamp:Date.now()}}))},[m,n?.reason,i]),m?(0,It.jsx)(d,{paddingX:"screen",width:"100%",paddingBottom:"screen",style:e,children:(0,It.jsx)(Ze,{level:"5-information",children:m})}):null}c(In,"PortfolioHomeErrorBanner");var br=(0,J.memo)(In);var Rn={minimumFractionDigits:2,maximumFractionDigits:2};function Rt({isLoading:e,totalValueUsdCurrent:t,totalValueUsd24h:o,totalPercentChange24h:i,isBalanceHidden:r,toggleBalanceVisibility:n}){let m=dr(i);return(0,N.jsxs)(d,{gap:8,alignItems:"center",justifyContent:"center",marginTop:32,children:[(0,N.jsx)(br,{}),e?(0,N.jsxs)(d,{alignItems:"center",children:[(0,N.jsx)(Ge,{width:192,font:"heading1Semibold"}),(0,N.jsxs)(d,{direction:"row",gap:8,children:[(0,N.jsx)(Ge,{width:50,font:"title2Semibold"}),(0,N.jsx)(Ge,{width:50,font:"title3Semibold"})]})]}):(0,N.jsxs)(d,{gap:r?8:0,onPress:r?n:void 0,children:[(0,N.jsx)(vt,{isBalanceHidden:r,font:"heading1Semibold",textColor:"textBase",children:(0,N.jsx)(kt,{maxFontSize:38,children:(0,N.jsx)(be,{font:"heading1Semibold",value:t,intlNumberFormatOptions:Rn})})}),(0,N.jsx)(vt,{showHiddenText:!0,isBalanceHidden:r,children:(0,N.jsxs)(d,{direction:"row",alignItems:"center",gap:6,justifyContent:"center",children:[(0,N.jsx)(be,{signConfig:"always",marginRight:6,font:"title1",color:"sentiment",value:o}),(0,N.jsx)(b,{color:m,borderRadius:6,paddingX:4,paddingY:2,style:{backgroundColor:te(k.colors.legacy[m],.1)},children:Et(i)})]})})]})]})}c(Rt,"PortfolioBalanceDisplay");function Nn({isBalanceHidden:e,toggleBalanceVisibility:t,zeroBalanceNux:o}){let{combinedPortfolioValue:i,combinedTotalPercentChange24h:r,isLoading:n,priceDifference:m}=lr();return mr(i),qo(i,0)?o:(0,xr.jsx)(Rt,{isLoading:n,toggleBalanceVisibility:t,isBalanceHidden:e,totalPercentChange24h:r,totalValueUsd24h:m,totalValueUsdCurrent:i})}c(Nn,"PortfolioBalance");var Ar=(0,Pr.memo)(Nn);a();s();var D=f(y());a();s();var yr=f(B()),Ne=f(y()),Tr=yr.default.memo(({onPress:e})=>{let{t}=A();return(0,Ne.jsx)(d,{gap:8,marginX:"screen",children:(0,Ne.jsxs)(d,{direction:"row",alignItems:"center",gap:4,onPress:e,children:[(0,Ne.jsx)(mo,{size:14,color:"textIncidental"}),(0,Ne.jsx)(b,{font:"micro1",color:"textIncidental",children:t("exploreDisclosuresLink")})]})})});a();s();var Te=f(B());a();s();var On=O.object({accountBalance:rt,lastUpdated:O.number()}),Nt=x(null),Mn=x(e=>{let t=e(Nt);return!t||t.type!=="accountBalance"&&t.type!=="refreshing"?{status:"pending",data:void 0}:{status:"success",data:{accountBalance:t.accountBalance,lastUpdated:Date.now()}}}),Sr=se({atomToStoreOffline:Mn,offlineKey:x(e=>`${e(z)?.identifier??""}:perps-balance`),namespaceKey:"perps",ttlMs:K({hours:24}),initialValue:{accountBalance:{accountValue:"0",availableBalance:"0",availableToTrade:"0"},lastUpdated:0},schema:On});a();s();var jn=O.object({positions:O.array(nt),openOrders:O.array(it),lastUpdated:O.number()}),Ot=x(null),Vn=x(e=>{let t=e(Ot);return!t||t.type!=="positions"?{status:"pending",data:void 0}:{status:"success",data:{positions:t.positions,openOrders:t.openOrders,lastUpdated:Date.now()}}}),Br=se({atomToStoreOffline:Vn,offlineKey:x(e=>`${e(z)?.identifier??""}:perps-positions`),namespaceKey:"perps",ttlMs:K({hours:24}),initialValue:{positions:[],openOrders:[],lastUpdated:0},schema:jn});var wr=c(()=>{let{t:e}=A(),{accountBalanceState:t,positionsState:o}=at(),i=Q(Ot),r=P(Br),n=Q(Nt),m=P(Sr);(0,Te.useEffect)(()=>{i(o)},[o,i]),(0,Te.useEffect)(()=>{n(t)},[t,n]);let l=(0,Te.useMemo)(()=>{if(t.type==="accountBalance"||t.type==="refreshing"){let C=ke(t.accountBalance),R=ve(t.accountBalance);return{status:t.type,symbol:"USDC",availableToTrade:new L(R),accountValue:new L(C),isCached:!1}}if(m.lastUpdated>0){let C=ke(m.accountBalance),R=ve(m.accountBalance);return{status:t.type==="loading"?"loading":"accountBalance",symbol:"USDC",availableToTrade:new L(R),accountValue:new L(C),isCached:!0,lastUpdated:m.lastUpdated}}return{status:t.type,symbol:"USDC",availableToTrade:new L(0),accountValue:new L(0),isCached:!1}},[t,m]),p=(0,Te.useMemo)(()=>o.type==="positions"||o.type==="refreshing"?{status:o.type,positions:o.positions.map(C=>Fe(C,e)),isCached:!1}:r.positions.length>0?{status:o.type==="loading"?"loading":"positions",positions:r.positions.map(C=>Fe(C,e)),isCached:!0,lastUpdated:r.lastUpdated}:{status:o.type,positions:[],isCached:!1},[o,r,e]),h=(0,Te.useMemo)(()=>o.type==="positions"||o.type==="refreshing"?{status:o.type,orders:o.openOrders,isCached:!1}:r.openOrders.length>0?{status:o.type==="loading"?"loading":"positions",orders:r.openOrders,isCached:!0,lastUpdated:r.lastUpdated}:{status:o.type,orders:[],isCached:!1},[o,r]);return{balance:l,positions:p,openOrders:h}},"useCachedPerpsPortfolioList");a();s();var re=f(B());a();s();var Oe=f(y());var Mt=c(({size:e=40})=>(0,Oe.jsxs)("svg",{width:e,height:e,viewBox:"0 0 48 48",fill:"none",children:[(0,Oe.jsx)("path",{d:"M15.4284 24C10.6912 24 6.85693 27.84 6.85693 32.5714C6.85693 37.3029 10.6969 41.1429 15.4284 41.1429C20.1598 41.1429 23.9998 37.3029 23.9998 32.5714V24H15.4284Z",stroke:"#AB9FF2",strokeWidth:3,strokeMiterlimit:10,strokeLinejoin:"round"}),(0,Oe.jsx)("path",{d:"M42.2376 19.8043C41.761 18.7319 40.239 18.7319 39.7624 19.8043L39.0638 21.3762C38.9276 21.6826 38.6826 21.9276 38.3762 22.0638L36.8043 22.7624C35.7319 23.239 35.7319 24.761 36.8043 25.2376L38.3762 25.9362C38.6826 26.0724 38.9276 26.3174 39.0638 26.6238L39.7624 28.1957C40.239 29.2681 41.761 29.2681 42.2376 28.1957L42.9362 26.6238C43.0724 26.3174 43.3174 26.0724 43.6238 25.9362L45.1957 25.2376C46.2681 24.761 46.2681 23.239 45.1957 22.7624L43.6238 22.0638C43.3174 21.9276 43.0724 21.6826 42.9362 21.3762L42.2376 19.8043Z",fill:"#FFFFC4"}),(0,Oe.jsx)("path",{d:"M30.8571 23.9941H24V15.4255C24 10.6957 27.8343 6.85693 32.5714 6.85693C36.7197 6.85693 40.1756 9.80499 40.9707 13.7141",stroke:"#E2DFFE",strokeWidth:3,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})]}),"PerpsIllustration");a();s();var le=f(y());var Lr={xsmall:24,small:32,searchResult:40,medium:48},_n={xsmall:24,small:32,searchResult:40,medium:48},Un={xsmall:12,small:16,searchResult:18,medium:20},Er=c(({imageSrc:e,fallbackText:t,allowNetworkBadge:o=!0,size:i="medium"})=>(0,le.jsxs)(d,{size:_n[i],position:"relative",children:[(0,le.jsx)(po,{width:Lr[i],height:Lr[i],src:e,borderRadius:"circle",fallback:(0,le.jsx)(d,{size:"100%",backgroundColor:"areaBase",paddingX:6,justifyContent:"center",alignItems:"center",children:(0,le.jsx)(b,{width:"100%",align:"center",font:"micro1Semibold",justifyContent:"center",alignItems:"center",direction:"row",children:t.substring(0,4)})})}),o&&(0,le.jsx)(d,{right:"-2",bottom:"-2",position:"absolute",children:(0,le.jsx)(ho,{icon:"NetworkPerps",shape:"square",size:Un[i],backgroundColor:"white",borderColor:"elementBase"})})]}),"PositionImage");a();s();var Hn=.01,Dr=c(e=>e.availableToTrade.gt(Hn)?we(e.availableToTrade):null,"useAvailableBalance");var I=f(y()),zn=.01,jt=re.default.memo(({isBalanceHidden:e})=>{let{t}=A(),{positions:o,balance:i}=mt(),r=Dr(i),{refetch:n,isIndeterminate:m}=zo();(0,re.useEffect)(()=>{m&&n()},[n,m]),$o({enabled:o.positions.length>0||i.accountValue.toNumber()>zn});let l=(0,re.useCallback)(()=>{self.open(xt("BTC","extension_perps_portfolio"),"_blank")},[]),p=(0,re.useCallback)(S=>{let C=St(S).toUpperCase();self.open(xt(C,"extension_perps_portfolio"),"_blank")},[]),h=o.positions.length>0,g=(0,re.useMemo)(()=>o.positions.sort((S,C)=>Number(C.position.margin)-Number(S.position.margin)).map(S=>Wn(S,e,p)),[o,e,p]);return(0,I.jsxs)(d,{gap:8,marginX:"screen",marginBottom:16,children:[(0,I.jsxs)(d,{direction:"row",alignItems:"center",gap:4,onPress:l,children:[(0,I.jsx)(b,{font:"title1Semibold",children:t("portfolioHomePerps")}),(0,I.jsx)(lo,{size:18,color:"textDiminished"})]}),h?(0,I.jsx)(Ao,{rows:g}):r?(0,I.jsx)(Ve,{start:(0,I.jsx)(Mt,{size:48}),onPress:l,topLeft:t("nounBalance"),topRight:e?Tt:r}):(0,I.jsx)(Ve,{start:(0,I.jsx)(Mt,{size:48}),onPress:l,topLeft:t("cashZeroBalanceNuxPerpsTitle"),bottomLeft:t("cashZeroBalanceNuxPerpsDescription")})]})});function Wn(e,t,o){return{onPress:c(()=>o(e.title),"onPress"),start:(0,I.jsx)(Er,{imageSrc:e.image,fallbackText:e.title}),topLeft:St(e.title),bottomLeft:(0,I.jsx)(lt,{isBalanceHidden:t,children:(0,I.jsx)(b,{font:"inherit",color:"textDiminished",children:e.subtitle})}),topRight:(0,I.jsx)(lt,{isBalanceHidden:t,font:"inherit",children:(0,I.jsx)(b,{font:"inherit",children:e.price})}),bottomRight:(0,I.jsx)(lt,{isBalanceHidden:t,font:"inherit",children:(0,I.jsx)(b,{font:"inherit",color:e.priceChange.color,children:e.priceChange.text})})}}c(Wn,"specToRow");var V=f(B());a();s();var $n={status:"idle",hasNextPage:!1,data:[]},ut={status:"idle",data:[]},kr=x(e=>{if(e(_)==="collectibles")return{fungibles:$n,collectibles:ut};let o=e(tt),{hasNextPage:i,status:r}=e(Ce),n=e(Io);return o?{collectibles:ut,fungibles:{status:"loading",hasNextPage:!1,data:[]}}:n.length===0&&r==="error"?{collectibles:ut,fungibles:{status:"error",hasNextPage:!1,data:[]}}:{collectibles:ut,fungibles:{status:"success",hasNextPage:i,data:n}}});a();s();var qn={type:G.Collection,data:{type:G.Empty,data:null}};function vr(e,t){return e.length===t?e:[...e,...Array(t-e.length).fill(qn)]}c(vr,"fillItems");function Xn(e,t=2){let o=[],i=e.filter(n=>n.type!==G.CollectiblesTrimmed),r=eo(i,t);for(let n of r){let m=n.map(l=>({type:G.Collection,data:l}));o.push({type:G.Collection,data:{pair:vr(m,t)}})}if(i.length!==e.length){let n=[{type:G.Collection,data:{type:G.CollectiblesTrimmed,data:null}}];o.push({type:G.Collection,data:{pair:vr(n,t)}})}return o}c(Xn,"groupCollectiblesInRows");var Fr=Xn;a();s();var U=f(y());a();s();var me=f(y());var ft=f(B());function Gn(){let{t:e}=A(),t=P(_),{refetch:o}=P(Le),{refetchCollections:i}=xe(),r=(0,ft.useCallback)(()=>{t==="fungibles"?o():t==="collectibles"&&i()},[t,o,i]);return(0,me.jsxs)(d,{marginY:4,alignItems:"center",paddingX:"screen",children:[(0,me.jsx)(d,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:{backgroundColor:te(k.colors.legacy.spotWarning,.2)},children:(0,me.jsx)(Z.AlertCircle,{size:24,color:"spotWarning"})}),(0,me.jsx)(b,{font:"bodySemibold",marginBottom:14,children:e("homeErrorTitle")}),(0,me.jsx)(b,{align:"center",marginBottom:32,children:e("homeErrorDescription")}),(0,me.jsx)(Ke,{onPress:r,children:e("homeErrorButtonText")})]})}c(Gn,"ErrorRow");var ht=(0,ft.memo)(Gn);a();s();var E=f(y());function Vt(){return(0,E.jsxs)("svg",{width:"91",height:"91",viewBox:"0 0 91 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsxs)("g",{children:[(0,E.jsx)("rect",{width:"90",height:"90",transform:"translate(0.5 0.5)",fill:k.colors.legacy.areaBase}),(0,E.jsx)("rect",{x:"5.36923",y:"48.816",width:"33.707",height:"39.1595",rx:"2.86",transform:"rotate(-19.3489 5.36923 48.816)",fill:k.colors.legacy.spotBase}),(0,E.jsx)("rect",{x:"8.87532",y:"50.4995",width:"28.2068",height:"28.2096",rx:"1.5",transform:"rotate(-19.3489 8.87532 50.4995)",fill:k.colors.legacy.areaBase}),(0,E.jsx)("g",{children:(0,E.jsx)("path",{d:"M67.8312 10.2413C67.9853 10.6569 67.9487 11.1193 67.7312 11.5056L57.3701 29.9014C56.7813 30.9468 55.8012 31.7156 54.6456 32.0385C53.49 32.3614 52.2534 32.2119 51.2079 31.6231L48.58 30.143C47.5345 29.5541 46.7658 28.5741 46.4429 27.4184C46.12 26.2628 46.2694 25.0262 46.8582 23.9808C47.4471 22.9353 48.4271 22.1666 49.5827 21.8437C50.7384 21.5208 51.9749 21.6702 53.0204 22.259L56.9624 24.4793L64.2296 11.5765L49.8563 6.36576L40.1221 23.6484C39.5333 24.6939 38.5533 25.4626 37.3976 25.7855C36.242 26.1084 35.0054 25.959 33.96 25.3702L31.332 23.89C30.2865 23.3012 29.5178 22.3211 29.1949 21.1655C28.872 20.0099 29.0214 18.7733 29.6103 17.7278C30.1991 16.6824 31.1791 15.9136 32.3348 15.5907C33.4904 15.2679 34.727 15.4173 35.7724 16.0061L39.7144 18.2263L47.8552 3.77249C48.217 3.13017 48.9901 2.84354 49.6832 3.09479L66.9312 9.34773C67.3479 9.49882 67.6771 9.82562 67.8312 10.2413ZM38.2343 20.8543L34.2923 18.6341C33.9438 18.4378 33.5316 18.388 33.1464 18.4956C32.7612 18.6032 32.4345 18.8595 32.2382 19.208C32.042 19.5565 31.9921 19.9687 32.0998 20.3539C32.2074 20.7391 32.4637 21.0658 32.8121 21.262L35.4401 22.7422C35.7886 22.9385 36.2008 22.9883 36.586 22.8807C36.9712 22.773 37.2979 22.5168 37.4942 22.1683L38.2343 20.8543ZM55.4822 27.1072L51.5403 24.887C51.1918 24.6907 50.7796 24.6409 50.3944 24.7486C50.0092 24.8562 49.6825 25.1124 49.4862 25.4609C49.2899 25.8094 49.2401 26.2216 49.3478 26.6068C49.4554 26.992 49.7116 27.3187 50.0601 27.515L52.6881 28.9951C53.0366 29.1914 53.4488 29.2412 53.834 29.1336C54.2192 29.026 54.5459 28.7697 54.7422 28.4212L55.4822 27.1072Z",fill:"#FFFFC4",stroke:"#FFFFC4"})}),(0,E.jsx)("rect",{x:"32.9779",y:"17.8943",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 32.9779 17.8943)",fill:"#FFFFC4"}),(0,E.jsx)("rect",{x:"50.2259",y:"24.1468",width:"6.03228",height:"3.01614",transform:"rotate(29.3895 50.2259 24.1468)",fill:"#FFFFC4"}),(0,E.jsx)("path",{d:"M87.0587 48.1502C88.4311 48.2419 89.1322 49.8405 88.27 50.9123L74.0483 68.5907C73.2484 69.5851 71.6791 69.3765 71.1665 68.2079L62.7499 49.0157C62.2374 47.847 63.1471 46.5513 64.4204 46.6365L87.0587 48.1502Z",fill:"#FF7243"}),(0,E.jsx)("path",{d:"M13.4383 28.3196L15.0033 29.5762C15.821 30.233 16.9286 30.4029 17.9055 30.0214L19.7752 29.2917C20.1233 29.1543 20.4298 29.572 20.1944 29.8629L18.9379 31.4279C18.281 32.2455 18.1111 33.3531 18.4927 34.3301L19.2223 36.1998C19.3597 36.5479 18.9421 36.8544 18.6511 36.619L17.0862 35.3624C16.2685 34.7056 15.1609 34.5357 14.184 34.9172L12.3143 35.6469C11.9662 35.7843 11.6596 35.3666 11.895 35.0757L13.1516 33.5107C13.8085 32.6931 13.9784 31.5855 13.5968 30.6086L12.8671 28.7389C12.7298 28.3908 13.1474 28.0842 13.4383 28.3196Z",fill:k.colors.legacy.elementAccent}),(0,E.jsx)("path",{d:"M60.2233 55.5181L59.226 57.1925C58.7046 58.0674 58.6906 59.1554 59.1893 60.0434L60.1431 61.743C60.3222 62.0592 59.9619 62.4104 59.6504 62.2232L57.9759 61.2259C57.1011 60.7045 56.013 60.6905 55.125 61.1892L53.4254 62.143C53.1092 62.3221 52.758 61.9618 52.9452 61.6503L53.9425 59.9758C54.4639 59.101 54.4779 58.0129 53.9792 57.1249L53.0254 55.4253C52.8464 55.1091 53.2066 54.758 53.5182 54.9451L55.1926 55.9424C56.0675 56.4638 57.1555 56.4778 58.0435 55.9792L59.7431 55.0253C60.0593 54.8463 60.4105 55.2065 60.2233 55.5181Z",fill:k.colors.legacy.elementAccent}),(0,E.jsx)("path",{d:"M78.1739 3.16606L77.825 5.25271C77.6423 6.34306 78.0569 7.44911 78.9112 8.15079L80.5458 9.49398C80.8515 9.74327 80.6254 10.2404 80.2366 10.1739L78.15 9.82495C77.0596 9.64234 75.9536 10.0569 75.2519 10.9112L73.9087 12.5458C73.6594 12.8515 73.1623 12.6254 73.2288 12.2366L73.5777 10.1499C73.7603 9.0596 73.3457 7.95354 72.4914 7.25187L70.8569 5.90868C70.5512 5.65938 70.7773 5.16225 71.1661 5.22878L73.2527 5.5777C74.3431 5.76032 75.4491 5.34574 76.1508 4.49142L77.494 2.85689C77.7433 2.55119 78.2404 2.77725 78.1739 3.16606Z",fill:k.colors.legacy.elementAccent}),(0,E.jsx)("circle",{cx:"51.0134",cy:"39.0883",r:"1.48466",transform:"rotate(26.2783 51.0134 39.0883)",fill:k.colors.legacy.elementAccent}),(0,E.jsx)("path",{d:"M79.2259 31.2607C80.251 32.4976 80.0792 34.3314 78.8423 35.3565C72.3787 40.7131 64.7682 41.4047 58.5851 40.516C57.4577 40.3539 56.3327 40.1324 55.248 39.8792C53.8509 39.5529 54.2211 37.9337 55.6541 38.0001C56.0293 38.0175 56.3861 38.0285 56.7169 38.0316C59.4348 38.0573 61.9912 37.6669 62.8283 37.4807C67.254 36.4959 71.3085 34.0442 75.1301 30.8771C76.367 29.852 78.2008 30.0238 79.2259 31.2607Z",fill:k.colors.legacy.elementAccent})]}),(0,E.jsxs)("defs",{children:[(0,E.jsx)("clipPath",{id:"clip0_9952_91189",children:(0,E.jsx)("rect",{width:"90",height:"90",fill:"white",transform:"translate(0.5 0.5)"})}),(0,E.jsx)("clipPath",{id:"clip1_9952_91189",children:(0,E.jsx)("rect",{width:"36.1936",height:"36.1936",fill:"white",transform:"translate(41.0437 -8.71805) rotate(29.3895)"})})]})]})}c(Vt,"NoCollectibles");var Ir=he.recycle(()=>{let{t:e}=A();return(0,U.jsx)(d,{paddingY:24,alignItems:"center",justifyContent:"center",children:(0,U.jsxs)(d,{gap:8,maxWidth:240,textAlign:"center",alignItems:"center",justifyContent:"center",children:[(0,U.jsx)(Vt,{}),(0,U.jsx)(b,{color:"textBase",font:"bodySemibold",children:e("collectiblesNoCollectiblesFound")}),(0,U.jsx)(b,{color:"textDiminished",font:"caption",align:"center",children:e("collectiblesNoCollectiblesFoundSecondary")})]})})}),Rr=he.recycle(()=>Array.from({length:2}).map((e,t)=>(0,U.jsxs)(d,{marginY:8,paddingX:"screen",direction:"row",gap:16,children:[(0,U.jsx)(d,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1",children:(0,U.jsx)(Xe,{height:"100%",borderRadius:8})}),(0,U.jsxs)(d,{flex:1,borderRadius:8,width:"100%",aspectRatio:"1/1",children:[(0,U.jsx)(Xe,{height:"100%",borderRadius:8}),(0,U.jsx)(Xe,{})]})]},`loading-collectible-${t}`))),Nr=he.recycle(()=>(0,U.jsx)(ht,{}));a();s();var j=f(y());a();s();var Kn=x(e=>{let{fetchNextPage:t,hasNextPage:o,isFetching:i,refetch:r,data:n}=e(Ce),m=e(tt);return async()=>{if(!i&&o&&!m){let l=n?.pages[0];l&&new Date().getTime()-l.updatedAt>wo&&await r(),t()}}}),gt=Kn;var Se=f(B());a();s();var ee=f(y());var Hr=f(B());a();s();var Or=f(y());var Mr=f(B());var jr=(0,Mr.memo)(({imageSrc:e,fallbackText:t,chainId:o,type:i})=>{let r=X.getChainID(o),n=Qo(i,o);return(0,Or.jsx)(Go,{image:{type:"fungible",src:e,fallback:t.substring(0,4)},tokenType:n,chainMeta:Zo(r)})});a();s();var _t=f(y());var Ct=f(B()),Vr=Ct.default.memo(({token:e,price:t,font:o})=>{let i=$e("enable-home-tab-price-streaming"),{data:r}=et({query:{data:e.encodedCaip19},enabled:i}),n=(0,Ct.useMemo)(()=>t?ot(e,r?.price??t):"-",[e,r?.price,t]);return n==="-"?(0,_t.jsx)(b,{children:"-"}):(0,_t.jsx)(be,{value:n,font:o,minimumResolutionValue:.01,intlNumberFormatOptions:Ye})});a();s();var _r=f(y());var Ue=f(B()),Ur=Ue.default.memo(({token:e,price:t,priceChange:o,font:i})=>{let r=$e("enable-home-tab-price-streaming"),{data:n}=et({query:{data:e.encodedCaip19},enabled:r}),m=(0,Ue.useMemo)(()=>ot(e,n?.price??t),[e,n?.price,t]),l=(0,Ue.useMemo)(()=>Ro(m,n?.priceChange24h??o),[n?.priceChange24h,o,m]);return(0,_r.jsx)(be,{signConfig:"exceptZero",font:i,value:l,color:"sentiment",minimumResolutionValue:.01,intlNumberFormatOptions:Ye})});var Zn=c(({networkID:e,walletAddress:t})=>{let o=no();return t?Yt.get(e).badge?.(e,o,t)??null:null},"useNetworkBadge");function Qn({token:e,price:t,priceChange:o,renderImageSource:i,renderImageFallbackText:r,renderImageChainId:n,renderImageType:m,isBalanceHidden:l,onPress:p,testID:h}){let{t:g}=A(),S=e.totalQuantity/10**e.decimals,C=Zn({networkID:e.decodedCaip19.chainId,walletAddress:e.walletAddress})||"";return(0,ee.jsx)(d,{marginX:"screen",children:(0,ee.jsx)(Ve,{testID:h,truncate:"left",onPress:p,topLeft:{text:e.name||g("tokenRowUnknownToken"),after:(0,ee.jsx)(Xo,{spamStatus:e.spamStatus,badgeText:C})},verticalAlign:"baseline",bottomLeft:(0,ee.jsx)(Qe,{isBalanceHidden:l,children:`${Ko(S)} ${e.symbol||"null"}`}),topRight:(0,ee.jsx)(Qe,{isBalanceHidden:l,font:"inherit",children:t?(0,ee.jsx)(Vr,{token:e,price:t,font:"inherit"}):"-"}),bottomRight:(0,ee.jsx)(Qe,{isBalanceHidden:l,children:o&&t?(0,ee.jsx)(Ur,{token:e,price:t,priceChange:o,font:"caption"}):"-"}),start:(0,ee.jsx)(jr,{imageSrc:i,fallbackText:r,chainId:n,type:m})})})}c(Qn,"FungibleRow");var zr=(0,Hr.memo)(Qn);var Wr=(0,Se.memo)(({onFungibleDetailNav:e,isBalanceHidden:t,...o})=>{let i=o.legacyKey,r=`${o.symbol??(i&&Jt(i))}`,n=`fungible-token-row-${X.getChainName(o.decodedCaip19.chainId).toLowerCase()}-${r}`;o.walletAddress&&Qt(o.decodedCaip19.chainId,o.walletAddress)&&(n+=`-${Gt(o.decodedCaip19.chainId,o.walletAddress)}`);let m=o.symbol||(o.legacyKey??"").substring(0,4),l=(0,Se.useCallback)(()=>{e(o)},[e,o]);return(0,j.jsx)(zr,{onPress:l,isBalanceHidden:t,price:o.livePrice?.price,priceChange:o.livePrice?.priceChange24h,renderImageChainId:o.decodedCaip19.chainId,renderImageFallbackText:m,renderImageSource:o.logoUri||"",renderImageType:o.type,testID:n,token:o})});function Ut(){let e=P(gt);return(0,Se.useEffect)(()=>{e()},[e]),(0,j.jsx)(d,{marginY:4,paddingX:"screen",children:(0,j.jsx)(_e,{})})}c(Ut,"LoadingFungibleNextPage");var Yn=he.recycle(()=>(0,j.jsx)(d,{marginY:zt?4:0,paddingX:"screen",children:(0,j.jsx)(_e,{})})),$r=he.recycle(()=>Array.from({length:4}).map((e,t)=>(0,j.jsx)(Yn,{},`loading-fungible-${t}`))),Jn={backgroundColor:te(k.colors.legacy.spotWarning,.2)},qr=(0,Se.memo)(()=>{let{t:e}=A(),{refetch:t}=P(Le);return(0,j.jsxs)(d,{marginY:4,alignItems:"center",paddingX:"screen",children:[(0,j.jsx)(d,{width:48,height:48,alignItems:"center",justifyContent:"center",borderRadius:"full",marginBottom:16,style:Jn,children:(0,j.jsx)(Z.AlertCircle,{size:24,color:"spotWarning"})}),(0,j.jsx)(b,{font:"bodySemibold",marginBottom:14,children:e("portfolioHomeNoFungibleTokens")}),(0,j.jsx)(b,{align:"center",marginBottom:32,children:e("portfolioHomeNoFungibleTokensDescription")}),(0,j.jsx)(Ke,{onPress:t,children:e("homeErrorButtonText")})]})}),Xr=c(()=>(0,j.jsx)(ht,{}),"ErrorFungibles");var ei={collectibles:177,fungibles:84};function ti({data:e,status:t,collectibleRowRenderer:o}){if(!(t!=="success"||e.length===0))return{rowRenderer:o,rowCount:e.length}}c(ti,"getCollectiblesVirtualizedListProps");function oi({data:e,status:t,hasNextPage:o,tokenRowRenderer:i,onRowsRendered:r}){if(!(t!=="success"||e.length===0))return{onRowsRendered:r,rowRenderer:i,rowCount:o?e.length+1:e.length}}c(oi,"getTokensVirtualizedListProps");function ri({onFungibleDetailNav:e,listHeaderChildren:t,isBalanceHidden:o,renderCollectiblesComponent:i,collectiblesPerRow:r,tabBar:n,onLayout:m,onShowPerpsDisclosure:l}){let p=(0,V.useRef)(null),h=Q(ct),g=Wo(),{positions:S}=wr(),C=S.positions.length>0,R=g,$=(0,V.useCallback)(({stopIndex:F,startIndex:H})=>{h({start:H,end:F})},[h]),M=P(kr).fungibles,T=P(_),v=xe(),q=(0,V.useMemo)(()=>Fr(v.gridItems,r),[v.gridItems,r]),ne=(0,V.useMemo)(()=>v.isLoadingCollectionVisibility||v.isLoadingCollections?"loading":v.isErrorCollections&&q.length===0?"error":"success",[v.isLoadingCollectionVisibility,v.isLoadingCollections,v.isErrorCollections,q.length]),pe=(0,V.useMemo)(()=>({item:F})=>{if(!i)throw new Error("renderCollectiblesComponent is not defined");return i({item:F,extraData:{collections:v.collections,pinnedCollectionIds:v.pinnedCollectionIds}})},[v.collections,v.pinnedCollectionIds,i]),ie=(0,V.useCallback)(F=>{if(F.index===M.data.length)return(0,D.jsx)(d,{style:F.style,children:(0,D.jsx)(Ut,{})},"fungible-loading-row");let H=M.data[F.index];return(0,D.jsx)(d,{style:F.style,children:(0,D.jsx)(Wr,{onFungibleDetailNav:e,isBalanceHidden:o,...H})},F.key)},[M.data,o,e]),de=(0,V.useCallback)(F=>{let H=q[F.index];return(0,D.jsx)(d,{style:F.style,children:(0,D.jsx)(pe,{item:H})},F.key)},[q,pe]),ue=(0,V.useMemo)(()=>ti({data:q,status:ne,collectibleRowRenderer:de}),[q,ne,de]),Me=(0,V.useMemo)(()=>oi({...M,tokenRowRenderer:ie,onRowsRendered:$}),[M,ie,$]),je=(0,V.useMemo)(()=>{switch(T){case w.Tokens:return Me;case w.Collectibles:return ue;default:throw new Error("Invalid data tab")}},[T,Me,ue]);return(0,D.jsxs)(d,{gap:8,paddingBottom:8,overflowY:"auto",ref:p,overflowX:"hidden",children:[t,R&&C&&(0,D.jsx)(jt,{isBalanceHidden:o}),n,T===w.Collectibles&&ne==="loading"&&(0,D.jsx)(Rr,{}),T===w.Collectibles&&ne==="error"&&(0,D.jsx)(Nr,{}),T===w.Collectibles&&ne==="success"&&q.length===0&&(0,D.jsx)(Ir,{}),T===w.Tokens&&M.status==="loading"&&(0,D.jsx)($r,{}),T===w.Tokens&&M.status==="error"&&(0,D.jsx)(Xr,{}),T===w.Tokens&&M.status==="success"&&M.data.length===0&&(0,D.jsx)(qr,{}),je&&(0,D.jsx)(Po,{scrollElement:p.current??void 0,children:c(({height:F=0,isScrolling:H,registerChild:ze,scrollTop:We})=>(0,D.jsx)("div",{style:{width:"100%"},ref:ze,children:(0,D.jsx)(bo,{disableHeight:!0,children:c(({width:bt})=>(0,D.jsx)(xo,{rowHeight:ei[T],autoHeight:!0,width:bt,height:F,scrollTop:We,isScrolling:H,...je}),"children")})}),"children")}),R&&!C&&(0,D.jsx)(jt,{isBalanceHidden:o}),R&&(0,D.jsx)(Tr,{onPress:l})]})}c(ri,"PortfolioHomeFullscreen");var Gr=(0,V.memo)(ri);function ni(e,t,o){t({caip19:e.encodedCaip19,key:e.legacyKey??"",tokenAccount:void 0,...e.name&&{name:e.name},isSplCompressed:e.extraMetadata?.compression?.compressed??!1});let i=X.getChainName(e.decodedCaip19.chainId),r=X.getChainID(e.decodedCaip19.chainId);o.capture("assetDetailClick",{data:{address:e.decodedCaip19.resourceType===$t.address?e.decodedCaip19.address:void 0,chain:i,chainId:r,isNativeOfType:r,networkId:e.decodedCaip19.chainId,type:"fungible",spamStatus:e.spamStatus,name:e.name??void 0}})}c(ni,"trackAndNavigateToFungibleDetail");function ii({onFungibleDetailNav:e,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:i,onTappingActivity:r,onTappingSettings:n=c(()=>{},"onTappingSettings"),onTappingManageTokens:m=c(()=>{},"onTappingManageTokens"),onTappingManageCollections:l=c(()=>{},"onTappingManageCollections"),listFooterChildren:p,pageFooterComponent:h,listHeaderChildren:g,pageHeaderComponent:S,fixedHeaderChildren:C,zeroBalanceNux:R,renderCollectiblesComponent:$,accountAvatar:M,collectiblesPerRow:T=2,defaultTab:v,showPerpsPage:q,showPerpsPositionDetails:ne,onLayout:pe,onShowPerpsDisclosure:ie}){let de=ae(),[ue,Me]=Je(_),{refetch:je}=P(Le),{refetchCollections:F}=xe(),H=yo(),ze=To(),We=(0,Be.useCallback)(()=>{ze(!H)},[H,ze]),bt=(0,Be.useCallback)(()=>{ue===w.Tokens&&je(),ue===w.Collectibles&&F()},[ue,je,F]),Qr=(0,Be.useCallback)(Yr=>ni(Yr,e,de),[e,de]);return(0,Be.useEffect)(()=>{de.capture("portfolioHomeViewed")},[de]),(0,Be.useEffect)(()=>{typeof v<"u"&&Me(v)},[v,Me]),(0,W.jsxs)(W.Fragment,{children:[S,(0,W.jsx)(Gr,{isBalanceHidden:H,collectiblesPerRow:T,renderCollectiblesComponent:$,fixedHeaderChildren:C,listFooterChildren:p,listHeaderChildren:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(d,{marginBottom:24,children:[(0,W.jsx)(Ar,{toggleBalanceVisibility:We,isBalanceHidden:H,zeroBalanceNux:R}),(0,W.jsx)(tr,{})]}),g]}),tabBar:(0,W.jsx)(nr,{isBalanceHidden:H,toggleBalanceVisibility:We,onRefresh:bt,selectedDataTab:ue,onTappingManageTokens:m,onTappingManageCollections:l,onTappingSettings:n}),accountAvatar:M,onFungibleDetailNav:Qr,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:i,onTappingActivity:r,showPerpsPage:q,showPerpsPositionDetails:ne,onLayout:pe,onShowPerpsDisclosure:ie}),h]})}c(ii,"PortfolioHome");a();s();var He=f(y());function ai({marginBottom:e}){let{t}=A();return(0,He.jsxs)(d,{direction:"row",gap:6,paddingY:16,paddingX:18,borderRadius:"base",justifyContent:"center",backgroundColor:"areaAccent",marginBottom:e,children:[(0,He.jsx)(Z.Eye,{size:20,color:"textDiminished"}),(0,He.jsx)(b,{font:"captionSemibold",color:"textDiminished",children:t("readOnlyAccountBannerWarning")})]})}c(ai,"ReadOnlyAccountBanner");var si=ai;a();s();a();s();var Kr=f(y());var Zr=f(B());function ci(){let e=P(gt);return(0,Zr.useEffect)(()=>{e()},[e]),(0,Kr.jsx)(_e,{})}c(ci,"LoadingRow");var li=ci;export{ii as a,li as b,si as c};
//# sourceMappingURL=chunk-LHE3YUGS.js.map
