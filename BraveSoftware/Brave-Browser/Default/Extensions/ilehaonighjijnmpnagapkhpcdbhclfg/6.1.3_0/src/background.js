(function(){"use strict";const Yt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Qt(e){return typeof e=="string"&&Yt.test(e)}const M=[];for(let e=0;e<256;++e)M.push((e+256).toString(16).slice(1));function Zt(e,t=0){return(M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]).toLowerCase()}let je;const er=new Uint8Array(16);function tr(){if(!je){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");je=crypto.getRandomValues.bind(crypto)}return je(er)}const ot={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function it(e,t,r){if(ot.randomUUID&&!e)return ot.randomUUID();e=e||{};const n=e.random??e.rng?.()??tr();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Zt(n)}function rr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ne={exports:{}},nr=Ne.exports,at;function sr(){return at||(at=1,(function(e,t){(function(r,n){e.exports=n()})(nr,(function(){var r=1e3,n=6e4,s=36e5,i="millisecond",o="second",a="minute",u="hour",l="day",f="week",h="month",N="quarter",A="year",E="date",T="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(g){var m=["th","st","nd","rd"],d=g%100;return"["+g+(m[(d-20)%10]||m[d]||m[0])+"]"}},U=function(g,m,d){var S=String(g);return!S||S.length>=m?g:""+Array(m+1-S.length).join(d)+g},Y={s:U,z:function(g){var m=-g.utcOffset(),d=Math.abs(m),S=Math.floor(d/60),p=d%60;return(m<=0?"+":"-")+U(S,2,"0")+":"+U(p,2,"0")},m:function g(m,d){if(m.date()<d.date())return-g(d,m);var S=12*(d.year()-m.year())+(d.month()-m.month()),p=m.clone().add(S,h),O=d-p<0,R=m.clone().add(S+(O?-1:1),h);return+(-(S+(d-p)/(O?p-R:R-p))||0)},a:function(g){return g<0?Math.ceil(g)||0:Math.floor(g)},p:function(g){return{M:h,y:A,w:f,d:l,D:E,h:u,m:a,s:o,ms:i,Q:N}[g]||String(g||"").toLowerCase().replace(/s$/,"")},u:function(g){return g===void 0}},L="en",H={};H[L]=x;var Z="$isDayjsObject",te=function(g){return g instanceof Fe||!(!g||!g[Z])},ce=function g(m,d,S){var p;if(!m)return L;if(typeof m=="string"){var O=m.toLowerCase();H[O]&&(p=O),d&&(H[O]=d,p=O);var R=m.split("-");if(!p&&R.length>1)return g(R[0])}else{var D=m.name;H[D]=m,p=D}return!S&&p&&(L=p),p||!S&&L},v=function(g,m){if(te(g))return g.clone();var d=typeof m=="object"?m:{};return d.date=g,d.args=arguments,new Fe(d)},_=Y;_.l=ce,_.i=te,_.w=function(g,m){return v(g,{locale:m.$L,utc:m.$u,x:m.$x,$offset:m.$offset})};var Fe=(function(){function g(d){this.$L=ce(d.locale,null,!0),this.parse(d),this.$x=this.$x||d.x||{},this[Z]=!0}var m=g.prototype;return m.parse=function(d){this.$d=(function(S){var p=S.date,O=S.utc;if(p===null)return new Date(NaN);if(_.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var R=p.match(y);if(R){var D=R[2]-1||0,P=(R[7]||"0").substring(0,3);return O?new Date(Date.UTC(R[1],D,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)):new Date(R[1],D,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)}}return new Date(p)})(d),this.init()},m.init=function(){var d=this.$d;this.$y=d.getFullYear(),this.$M=d.getMonth(),this.$D=d.getDate(),this.$W=d.getDay(),this.$H=d.getHours(),this.$m=d.getMinutes(),this.$s=d.getSeconds(),this.$ms=d.getMilliseconds()},m.$utils=function(){return _},m.isValid=function(){return this.$d.toString()!==T},m.isSame=function(d,S){var p=v(d);return this.startOf(S)<=p&&p<=this.endOf(S)},m.isAfter=function(d,S){return v(d)<this.startOf(S)},m.isBefore=function(d,S){return this.endOf(S)<v(d)},m.$g=function(d,S,p){return _.u(d)?this[S]:this.set(p,d)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(d,S){var p=this,O=!!_.u(S)||S,R=_.p(d),D=function(le,V){var re=_.w(p.$u?Date.UTC(p.$y,V,le):new Date(p.$y,V,le),p);return O?re:re.endOf(l)},P=function(le,V){return _.w(p.toDate()[le].apply(p.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(V)),p)},B=this.$W,j=this.$M,G=this.$D,pe="set"+(this.$u?"UTC":"");switch(R){case A:return O?D(1,0):D(31,11);case h:return O?D(1,j):D(0,j+1);case f:var ue=this.$locale().weekStart||0,Re=(B<ue?B+7:B)-ue;return D(O?G-Re:G+(6-Re),j);case l:case E:return P(pe+"Hours",0);case u:return P(pe+"Minutes",1);case a:return P(pe+"Seconds",2);case o:return P(pe+"Milliseconds",3);default:return this.clone()}},m.endOf=function(d){return this.startOf(d,!1)},m.$set=function(d,S){var p,O=_.p(d),R="set"+(this.$u?"UTC":""),D=(p={},p[l]=R+"Date",p[E]=R+"Date",p[h]=R+"Month",p[A]=R+"FullYear",p[u]=R+"Hours",p[a]=R+"Minutes",p[o]=R+"Seconds",p[i]=R+"Milliseconds",p)[O],P=O===l?this.$D+(S-this.$W):S;if(O===h||O===A){var B=this.clone().set(E,1);B.$d[D](P),B.init(),this.$d=B.set(E,Math.min(this.$D,B.daysInMonth())).$d}else D&&this.$d[D](P);return this.init(),this},m.set=function(d,S){return this.clone().$set(d,S)},m.get=function(d){return this[_.p(d)]()},m.add=function(d,S){var p,O=this;d=Number(d);var R=_.p(S),D=function(j){var G=v(O);return _.w(G.date(G.date()+Math.round(j*d)),O)};if(R===h)return this.set(h,this.$M+d);if(R===A)return this.set(A,this.$y+d);if(R===l)return D(1);if(R===f)return D(7);var P=(p={},p[a]=n,p[u]=s,p[o]=r,p)[R]||1,B=this.$d.getTime()+d*P;return _.w(B,this)},m.subtract=function(d,S){return this.add(-1*d,S)},m.format=function(d){var S=this,p=this.$locale();if(!this.isValid())return p.invalidDate||T;var O=d||"YYYY-MM-DDTHH:mm:ssZ",R=_.z(this),D=this.$H,P=this.$m,B=this.$M,j=p.weekdays,G=p.months,pe=p.meridiem,ue=function(V,re,Ce,He){return V&&(V[re]||V(S,O))||Ce[re].slice(0,He)},Re=function(V){return _.s(D%12||12,V,"0")},le=pe||function(V,re,Ce){var He=V<12?"AM":"PM";return Ce?He.toLowerCase():He};return O.replace($,(function(V,re){return re||(function(Ce){switch(Ce){case"YY":return String(S.$y).slice(-2);case"YYYY":return _.s(S.$y,4,"0");case"M":return B+1;case"MM":return _.s(B+1,2,"0");case"MMM":return ue(p.monthsShort,B,G,3);case"MMMM":return ue(G,B);case"D":return S.$D;case"DD":return _.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return ue(p.weekdaysMin,S.$W,j,2);case"ddd":return ue(p.weekdaysShort,S.$W,j,3);case"dddd":return j[S.$W];case"H":return String(D);case"HH":return _.s(D,2,"0");case"h":return Re(1);case"hh":return Re(2);case"a":return le(D,P,!0);case"A":return le(D,P,!1);case"m":return String(P);case"mm":return _.s(P,2,"0");case"s":return String(S.$s);case"ss":return _.s(S.$s,2,"0");case"SSS":return _.s(S.$ms,3,"0");case"Z":return R}return null})(V)||R.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(d,S,p){var O,R=this,D=_.p(S),P=v(d),B=(P.utcOffset()-this.utcOffset())*n,j=this-P,G=function(){return _.m(R,P)};switch(D){case A:O=G()/12;break;case h:O=G();break;case N:O=G()/3;break;case f:O=(j-B)/6048e5;break;case l:O=(j-B)/864e5;break;case u:O=j/s;break;case a:O=j/n;break;case o:O=j/r;break;default:O=j}return p?O:_.a(O)},m.daysInMonth=function(){return this.endOf(h).$D},m.$locale=function(){return H[this.$L]},m.locale=function(d,S){if(!d)return this.$L;var p=this.clone(),O=ce(d,S,!0);return O&&(p.$L=O),p},m.clone=function(){return _.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g})(),Gt=Fe.prototype;return v.prototype=Gt,[["$ms",i],["$s",o],["$m",a],["$H",u],["$W",l],["$M",h],["$y",A],["$D",E]].forEach((function(g){Gt[g[1]]=function(m){return this.$g(m,g[0],g[1])}})),v.extend=function(g,m){return g.$i||(g(m,Fe,v),g.$i=!0),v},v.locale=ce,v.isDayjs=te,v.unix=function(g){return v(1e3*g)},v.en=H[L],v.Ls=H,v.p={},v}))})(Ne)),Ne.exports}var or=sr();const ir=rr(or),ar=e=>Math.floor(Math.random()*e),fe=(e="seconds")=>e==="seconds"?Math.floor(Date.now()/1e3):Date.now(),me=e=>new Promise(t=>setTimeout(t,e));var ee=(e=>(e.CONNECTED="CONNECTED",e.DISCONNECTED="DISCONNECTED",e.DEAD="DEAD",e.CONNECTING="CONNECTING",e))(ee||{}),q=(e=>(e.AuthenticateUser="authenticateUser",e.UnAuthenticateUser="unAuthenticateUser",e.RetrieveUser="retrieveUser",e.Ping="ping",e.Connect="connect",e.Reconnect="reconnect",e.Disconnect="disconnect",e.GetWebsocketReadyState="getWebsocketReadyState",e.GetCurrentVersion="getCurrentVersion",e.SetAccessToken="setAccessToken",e.SetRefreshToken="setRefreshToken",e.GetBrowserId="getBrowserId",e.GetUserId="getUserId",e.SetUserId="setUserId",e.SetIsAuthenticated="setIsAuthenticated",e.UpdateUsername="updateUsername",e.ClearStorage="clearStorage",e))(q||{});const w={POPUP_STATE:"wynd:popup",IS_AUTHENTICATED:"wynd:authenticated",STATUS:"wynd:status",PERMISSIONS:"wynd:permissions",BROWSER_ID:"wynd:browser_id",USER_ID:"wynd:user_id",JWT:"wynd:jwt",IS_CONNECT_BUTTON_ACTIVE:"isConnectButtonActive",ACCESS_TOKEN:"accessToken",REFRESH_TOKEN:"refreshToken",TOKEN_EXPIRY:"tokenExpiry",HAS_INTERNET_CONNECTION:"hasInternetConnection"},ct=()=>typeof chrome<"u"&&chrome.runtime&&chrome.runtime.id?"extension":"desktop";var qe=(e=>(e.EXTENSION="extension",e.DESKTOP="desktop",e))(qe||{});const cr=e=>{try{return JSON.parse(e)}catch{return e}},W=async e=>{let t;const r=ct();try{r===qe.EXTENSION?t=(await chrome.storage.local.get([e]))[e]:t=window.localStorage.getItem(e)}catch(n){console.error("[getStorageValue]",n)}return cr(t)},C=async(e,t)=>{const r=ct();try{r===qe.EXTENSION?await chrome.storage.local.set({[e]:JSON.stringify(t)}):(window.localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new StorageEvent("local-storage",{key:e,newValue:JSON.stringify(t)})))}catch(n){console.error("[setStorageValue]",n)}},ne=1e3,We=60*ne,ur=2*We,Ee=.5*ne,lr=10*We,fr=1*We,dr=10*ne,hr=5*ne,pr=5*ne,mr=["origin","referer","access-control-request-headers","access-control-request-method","access-control-allow-origin","cookie","date","dnt","trailer","upgrade"],Er=3*ne,yr=e=>{let t="";const r=new Uint8Array(e),n=r.byteLength;for(let s=0;s<n;s+=1)t+=String.fromCharCode(r[s]);return btoa(t)};function ut(e,t){return function(){return e.apply(t,arguments)}}const{toString:Sr}=Object.prototype,{getPrototypeOf:Je}=Object,{iterator:Ae,toStringTag:lt}=Symbol,_e=(e=>t=>{const r=Sr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),X=e=>(e=e.toLowerCase(),t=>_e(t)===e),De=e=>t=>typeof t===e,{isArray:de}=Array,ye=De("undefined");function wr(e){return e!==null&&!ye(e)&&e.constructor!==null&&!ye(e.constructor)&&J(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ft=X("ArrayBuffer");function gr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ft(e.buffer),t}const Tr=De("string"),J=De("function"),dt=De("number"),Ie=e=>e!==null&&typeof e=="object",br=e=>e===!0||e===!1,$e=e=>{if(_e(e)!=="object")return!1;const t=Je(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lt in e)&&!(Ae in e)},Or=X("Date"),Rr=X("File"),Cr=X("Blob"),Nr=X("FileList"),Ar=e=>Ie(e)&&J(e.pipe),_r=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||J(e.append)&&((t=_e(e))==="formdata"||t==="object"&&J(e.toString)&&e.toString()==="[object FormData]"))},Dr=X("URLSearchParams"),[Ir,$r,Ur,kr]=["ReadableStream","Request","Response","Headers"].map(X),xr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Se(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),de(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function ht(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const se=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pt=e=>!ye(e)&&e!==se;function Ke(){const{caseless:e}=pt(this)&&this||{},t={},r=(n,s)=>{const i=e&&ht(t,s)||s;$e(t[i])&&$e(n)?t[i]=Ke(t[i],n):$e(n)?t[i]=Ke({},n):de(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Se(arguments[n],r);return t}const Pr=(e,t,r,{allOwnKeys:n}={})=>(Se(t,(s,i)=>{r&&J(s)?e[i]=ut(s,r):e[i]=s},{allOwnKeys:n}),e),Lr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),vr=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Br=(e,t,r,n)=>{let s,i,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&Je(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Mr=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Fr=e=>{if(!e)return null;if(de(e))return e;let t=e.length;if(!dt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Hr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Je(Uint8Array)),jr=(e,t)=>{const n=(e&&e[Ae]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},qr=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Wr=X("HTMLFormElement"),Jr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),mt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Kr=X("RegExp"),Et=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Se(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},Vr=e=>{Et(e,(t,r)=>{if(J(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(J(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},zr=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return de(e)?n(e):n(String(e).split(t)),r},Gr=()=>{},Xr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Yr(e){return!!(e&&J(e.append)&&e[lt]==="FormData"&&e[Ae])}const Qr=e=>{const t=new Array(10),r=(n,s)=>{if(Ie(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=de(n)?[]:{};return Se(n,(o,a)=>{const u=r(o,s+1);!ye(u)&&(i[a]=u)}),t[s]=void 0,i}}return n};return r(e,0)},Zr=X("AsyncFunction"),en=e=>e&&(Ie(e)||J(e))&&J(e.then)&&J(e.catch),yt=((e,t)=>e?setImmediate:t?((r,n)=>(se.addEventListener("message",({source:s,data:i})=>{s===se&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),se.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",J(se.postMessage)),tn=typeof queueMicrotask<"u"?queueMicrotask.bind(se):typeof process<"u"&&process.nextTick||yt,c={isArray:de,isArrayBuffer:ft,isBuffer:wr,isFormData:_r,isArrayBufferView:gr,isString:Tr,isNumber:dt,isBoolean:br,isObject:Ie,isPlainObject:$e,isReadableStream:Ir,isRequest:$r,isResponse:Ur,isHeaders:kr,isUndefined:ye,isDate:Or,isFile:Rr,isBlob:Cr,isRegExp:Kr,isFunction:J,isStream:Ar,isURLSearchParams:Dr,isTypedArray:Hr,isFileList:Nr,forEach:Se,merge:Ke,extend:Pr,trim:xr,stripBOM:Lr,inherits:vr,toFlatObject:Br,kindOf:_e,kindOfTest:X,endsWith:Mr,toArray:Fr,forEachEntry:jr,matchAll:qr,isHTMLForm:Wr,hasOwnProperty:mt,hasOwnProp:mt,reduceDescriptors:Et,freezeMethods:Vr,toObjectSet:zr,toCamelCase:Jr,noop:Gr,toFiniteNumber:Xr,findKey:ht,global:se,isContextDefined:pt,isSpecCompliantForm:Yr,toJSONObject:Qr,isAsyncFn:Zr,isThenable:en,setImmediate:yt,asap:tn,isIterable:e=>e!=null&&J(e[Ae])};function b(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}c.inherits(b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}});const St=b.prototype,wt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wt[e]={value:e}}),Object.defineProperties(b,wt),Object.defineProperty(St,"isAxiosError",{value:!0}),b.from=(e,t,r,n,s,i)=>{const o=Object.create(St);return c.toFlatObject(e,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),b.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const rn=null;function Ve(e){return c.isPlainObject(e)||c.isArray(e)}function gt(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function Tt(e,t,r){return e?e.concat(t).map(function(s,i){return s=gt(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function nn(e){return c.isArray(e)&&!e.some(Ve)}const sn=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function Ue(e,t,r){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=c.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,y){return!c.isUndefined(y[T])});const n=r.metaTokens,s=r.visitor||f,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(s))throw new TypeError("visitor must be a function");function l(E){if(E===null)return"";if(c.isDate(E))return E.toISOString();if(c.isBoolean(E))return E.toString();if(!u&&c.isBlob(E))throw new b("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(E)||c.isTypedArray(E)?u&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function f(E,T,y){let $=E;if(E&&!y&&typeof E=="object"){if(c.endsWith(T,"{}"))T=n?T:T.slice(0,-2),E=JSON.stringify(E);else if(c.isArray(E)&&nn(E)||(c.isFileList(E)||c.endsWith(T,"[]"))&&($=c.toArray(E)))return T=gt(T),$.forEach(function(U,Y){!(c.isUndefined(U)||U===null)&&t.append(o===!0?Tt([T],Y,i):o===null?T:T+"[]",l(U))}),!1}return Ve(E)?!0:(t.append(Tt(y,T,i),l(E)),!1)}const h=[],N=Object.assign(sn,{defaultVisitor:f,convertValue:l,isVisitable:Ve});function A(E,T){if(!c.isUndefined(E)){if(h.indexOf(E)!==-1)throw Error("Circular reference detected in "+T.join("."));h.push(E),c.forEach(E,function($,x){(!(c.isUndefined($)||$===null)&&s.call(t,$,c.isString(x)?x.trim():x,T,N))===!0&&A($,T?T.concat(x):[x])}),h.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return A(e),t}function bt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ze(e,t){this._pairs=[],e&&Ue(e,this,t)}const Ot=ze.prototype;Ot.append=function(t,r){this._pairs.push([t,r])},Ot.toString=function(t){const r=t?function(n){return t.call(this,n,bt)}:bt;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function on(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rt(e,t,r){if(!t)return e;const n=r&&r.encode||on;c.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=c.isURLSearchParams(t)?t.toString():new ze(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ct{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Nt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},an={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:ze,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Ge=typeof window<"u"&&typeof document<"u",Xe=typeof navigator=="object"&&navigator||void 0,cn=Ge&&(!Xe||["ReactNative","NativeScript","NS"].indexOf(Xe.product)<0),un=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ln=Ge&&window.location.href||"http://localhost",F={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ge,hasStandardBrowserEnv:cn,hasStandardBrowserWebWorkerEnv:un,navigator:Xe,origin:ln},Symbol.toStringTag,{value:"Module"})),...an};function fn(e,t){return Ue(e,new F.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return F.isNode&&c.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function dn(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hn(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function At(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=i>=r.length;return o=!o&&c.isArray(s)?s.length:o,u?(c.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!c.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&c.isArray(s[o])&&(s[o]=hn(s[o])),!a)}if(c.isFormData(e)&&c.isFunction(e.entries)){const r={};return c.forEachEntry(e,(n,s)=>{t(dn(n),s,r,0)}),r}return null}function pn(e,t,r){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const we={transitional:Nt,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=c.isObject(t);if(i&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return s?JSON.stringify(At(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)||c.isReadableStream(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return fn(t,this.formSerializer).toString();if((a=c.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Ue(a?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),pn(t)):t}],transformResponse:[function(t){const r=this.transitional||we.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(c.isResponse(t)||c.isReadableStream(t))return t;if(t&&c.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?b.from(a,b.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{we.headers[e]={}});const mn=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),En=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&mn[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},_t=Symbol("internals");function ge(e){return e&&String(e).trim().toLowerCase()}function ke(e){return e===!1||e==null?e:c.isArray(e)?e.map(ke):String(e)}function yn(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Sn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ye(e,t,r,n,s){if(c.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!c.isString(t)){if(c.isString(n))return t.indexOf(n)!==-1;if(c.isRegExp(n))return n.test(t)}}function wn(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function gn(e,t){const r=c.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let K=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(a,u,l){const f=ge(u);if(!f)throw new Error("header name must be a non-empty string");const h=c.findKey(s,f);(!h||s[h]===void 0||l===!0||l===void 0&&s[h]!==!1)&&(s[h||u]=ke(a))}const o=(a,u)=>c.forEach(a,(l,f)=>i(l,f,u));if(c.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(c.isString(t)&&(t=t.trim())&&!Sn(t))o(En(t),r);else if(c.isObject(t)&&c.isIterable(t)){let a={},u,l;for(const f of t){if(!c.isArray(f))throw TypeError("Object iterator must return a key-value pair");a[l=f[0]]=(u=a[l])?c.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(a,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=ge(t),t){const n=c.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return yn(s);if(c.isFunction(r))return r.call(this,s,n);if(c.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ge(t),t){const n=c.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ye(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=ge(o),o){const a=c.findKey(n,o);a&&(!r||Ye(n,n[a],a,r))&&(delete n[a],s=!0)}}return c.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||Ye(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return c.forEach(this,(s,i)=>{const o=c.findKey(n,i);if(o){r[o]=ke(s),delete r[i];return}const a=t?wn(i):String(i).trim();a!==i&&delete r[i],r[a]=ke(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return c.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&c.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[_t]=this[_t]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ge(o);n[a]||(gn(s,o),n[a]=!0)}return c.isArray(t)?t.forEach(i):i(t),this}};K.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),c.reduceDescriptors(K.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}}),c.freezeMethods(K);function Qe(e,t){const r=this||we,n=t||r,s=K.from(n.headers);let i=n.data;return c.forEach(e,function(a){i=a.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Dt(e){return!!(e&&e.__CANCEL__)}function he(e,t,r){b.call(this,e??"canceled",b.ERR_CANCELED,t,r),this.name="CanceledError"}c.inherits(he,b,{__CANCEL__:!0});function It(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new b("Request failed with status code "+r.status,[b.ERR_BAD_REQUEST,b.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Tn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function bn(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),f=n[i];o||(o=l),r[s]=u,n[s]=l;let h=i,N=0;for(;h!==s;)N+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-o<t)return;const A=f&&l-f;return A?Math.round(N*1e3/A):void 0}}function On(e,t){let r=0,n=1e3/t,s,i;const o=(l,f=Date.now())=>{r=f,s=null,i&&(clearTimeout(i),i=null),e.apply(null,l)};return[(...l)=>{const f=Date.now(),h=f-r;h>=n?o(l,f):(s=l,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const xe=(e,t,r=3)=>{let n=0;const s=bn(50,250);return On(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,u=o-n,l=s(u),f=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:l||void 0,estimated:l&&a&&f?(a-o)/l:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},r)},$t=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ut=e=>(...t)=>c.asap(()=>e(...t)),Rn=F.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,F.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,Cn=F.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];c.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),c.isString(n)&&o.push("path="+n),c.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nn(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function An(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function kt(e,t,r){let n=!Nn(t);return e&&(n||r==!1)?An(e,t):t}const xt=e=>e instanceof K?{...e}:e;function oe(e,t){t=t||{};const r={};function n(l,f,h,N){return c.isPlainObject(l)&&c.isPlainObject(f)?c.merge.call({caseless:N},l,f):c.isPlainObject(f)?c.merge({},f):c.isArray(f)?f.slice():f}function s(l,f,h,N){if(c.isUndefined(f)){if(!c.isUndefined(l))return n(void 0,l,h,N)}else return n(l,f,h,N)}function i(l,f){if(!c.isUndefined(f))return n(void 0,f)}function o(l,f){if(c.isUndefined(f)){if(!c.isUndefined(l))return n(void 0,l)}else return n(void 0,f)}function a(l,f,h){if(h in t)return n(l,f);if(h in e)return n(void 0,l)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,f,h)=>s(xt(l),xt(f),h,!0)};return c.forEach(Object.keys(Object.assign({},e,t)),function(f){const h=u[f]||s,N=h(e[f],t[f],f);c.isUndefined(N)&&h!==a||(r[f]=N)}),r}const Pt=e=>{const t=oe({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;t.headers=o=K.from(o),t.url=Rt(kt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(c.isFormData(r)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[l,...f]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...f].join("; "))}}if(F.hasStandardBrowserEnv&&(n&&c.isFunction(n)&&(n=n(t)),n||n!==!1&&Rn(t.url))){const l=s&&i&&Cn.read(i);l&&o.set(s,l)}return t},_n=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(r,n){const s=Pt(e);let i=s.data;const o=K.from(s.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:l}=s,f,h,N,A,E;function T(){A&&A(),E&&E(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function $(){if(!y)return;const U=K.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),L={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:U,config:e,request:y};It(function(Z){r(Z),T()},function(Z){n(Z),T()},L),y=null}"onloadend"in y?y.onloadend=$:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout($)},y.onabort=function(){y&&(n(new b("Request aborted",b.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new b("Network Error",b.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let Y=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const L=s.transitional||Nt;s.timeoutErrorMessage&&(Y=s.timeoutErrorMessage),n(new b(Y,L.clarifyTimeoutError?b.ETIMEDOUT:b.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&c.forEach(o.toJSON(),function(Y,L){y.setRequestHeader(L,Y)}),c.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),a&&a!=="json"&&(y.responseType=s.responseType),l&&([N,E]=xe(l,!0),y.addEventListener("progress",N)),u&&y.upload&&([h,A]=xe(u),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",A)),(s.cancelToken||s.signal)&&(f=U=>{y&&(n(!U||U.type?new he(null,e,y):U),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const x=Tn(s.url);if(x&&F.protocols.indexOf(x)===-1){n(new b("Unsupported protocol "+x+":",b.ERR_BAD_REQUEST,e));return}y.send(i||null)})},Dn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(l){if(!s){s=!0,a();const f=l instanceof Error?l:this.reason;n.abort(f instanceof b?f:new he(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,i(new b(`timeout ${t} of ms exceeded`,b.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(i):l.removeEventListener("abort",i)}),e=null)};e.forEach(l=>l.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>c.asap(a),u}},In=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},$n=async function*(e,t){for await(const r of Un(e))yield*In(r,t)},Un=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Lt=(e,t,r,n)=>{const s=$n(e,t);let i=0,o,a=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:l,value:f}=await s.next();if(l){a(),u.close();return}let h=f.byteLength;if(r){let N=i+=h;r(N)}u.enqueue(new Uint8Array(f))}catch(l){throw a(l),l}},cancel(u){return a(u),s.return()}},{highWaterMark:2})},Pe=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vt=Pe&&typeof ReadableStream=="function",kn=Pe&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Bt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xn=vt&&Bt(()=>{let e=!1;const t=new Request(F.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Mt=64*1024,Ze=vt&&Bt(()=>c.isReadableStream(new Response("").body)),Le={stream:Ze&&(e=>e.body)};Pe&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Le[t]&&(Le[t]=c.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new b(`Response type '${t}' is not supported`,b.ERR_NOT_SUPPORT,n)})})})(new Response);const Pn=async e=>{if(e==null)return 0;if(c.isBlob(e))return e.size;if(c.isSpecCompliantForm(e))return(await new Request(F.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(c.isArrayBufferView(e)||c.isArrayBuffer(e))return e.byteLength;if(c.isURLSearchParams(e)&&(e=e+""),c.isString(e))return(await kn(e)).byteLength},Ln=async(e,t)=>{const r=c.toFiniteNumber(e.getContentLength());return r??Pn(t)},et={http:rn,xhr:_n,fetch:Pe&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:l,headers:f,withCredentials:h="same-origin",fetchOptions:N}=Pt(e);l=l?(l+"").toLowerCase():"text";let A=Dn([s,i&&i.toAbortSignal()],o),E;const T=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let y;try{if(u&&xn&&r!=="get"&&r!=="head"&&(y=await Ln(f,n))!==0){let L=new Request(t,{method:"POST",body:n,duplex:"half"}),H;if(c.isFormData(n)&&(H=L.headers.get("content-type"))&&f.setContentType(H),L.body){const[Z,te]=$t(y,xe(Ut(u)));n=Lt(L.body,Mt,Z,te)}}c.isString(h)||(h=h?"include":"omit");const $="credentials"in Request.prototype;E=new Request(t,{...N,signal:A,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:n,duplex:"half",credentials:$?h:void 0});let x=await fetch(E,N);const U=Ze&&(l==="stream"||l==="response");if(Ze&&(a||U&&T)){const L={};["status","statusText","headers"].forEach(ce=>{L[ce]=x[ce]});const H=c.toFiniteNumber(x.headers.get("content-length")),[Z,te]=a&&$t(H,xe(Ut(a),!0))||[];x=new Response(Lt(x.body,Mt,Z,()=>{te&&te(),T&&T()}),L)}l=l||"text";let Y=await Le[c.findKey(Le,l)||"text"](x,e);return!U&&T&&T(),await new Promise((L,H)=>{It(L,H,{data:Y,headers:K.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:E})})}catch($){throw T&&T(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new b("Network Error",b.ERR_NETWORK,e,E),{cause:$.cause||$}):b.from($,$&&$.code,e,E)}})};c.forEach(et,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ft=e=>`- ${e}`,vn=e=>c.isFunction(e)||e===null||e===!1,Ht={getAdapter:e=>{e=c.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!vn(r)&&(n=et[(o=String(r)).toLowerCase()],n===void 0))throw new b(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Ft).join(`
`):" "+Ft(i[0]):"as no adapter specified";throw new b("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:et};function tt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new he(null,e)}function jt(e){return tt(e),e.headers=K.from(e.headers),e.data=Qe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ht.getAdapter(e.adapter||we.adapter)(e).then(function(n){return tt(e),n.data=Qe.call(e,e.transformResponse,n),n.headers=K.from(n.headers),n},function(n){return Dt(n)||(tt(e),n&&n.response&&(n.response.data=Qe.call(e,e.transformResponse,n.response),n.response.headers=K.from(n.response.headers))),Promise.reject(n)})}const qt="1.10.0",ve={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ve[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Wt={};ve.transitional=function(t,r,n){function s(i,o){return"[Axios v"+qt+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(t===!1)throw new b(s(o," has been removed"+(r?" in "+r:"")),b.ERR_DEPRECATED);return r&&!Wt[o]&&(Wt[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,a):!0}},ve.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Bn(e,t,r){if(typeof e!="object")throw new b("options must be an object",b.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const a=e[i],u=a===void 0||o(a,i,e);if(u!==!0)throw new b("option "+i+" must be "+u,b.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new b("Unknown option "+i,b.ERR_BAD_OPTION)}}const Be={assertOptions:Bn,validators:ve},Q=Be.validators;let ie=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ct,response:new Ct}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=oe(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Be.assertOptions(n,{silentJSONParsing:Q.transitional(Q.boolean),forcedJSONParsing:Q.transitional(Q.boolean),clarifyTimeoutError:Q.transitional(Q.boolean)},!1),s!=null&&(c.isFunction(s)?r.paramsSerializer={serialize:s}:Be.assertOptions(s,{encode:Q.function,serialize:Q.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Be.assertOptions(r,{baseUrl:Q.spelling("baseURL"),withXsrfToken:Q.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&c.merge(i.common,i[r.method]);i&&c.forEach(["delete","get","head","post","put","patch","common"],E=>{delete i[E]}),r.headers=K.concat(o,i);const a=[];let u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(r)===!1||(u=u&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});const l=[];this.interceptors.response.forEach(function(T){l.push(T.fulfilled,T.rejected)});let f,h=0,N;if(!u){const E=[jt.bind(this),void 0];for(E.unshift.apply(E,a),E.push.apply(E,l),N=E.length,f=Promise.resolve(r);h<N;)f=f.then(E[h++],E[h++]);return f}N=a.length;let A=r;for(h=0;h<N;){const E=a[h++],T=a[h++];try{A=E(A)}catch(y){T.call(this,y);break}}try{f=jt.call(this,A)}catch(E){return Promise.reject(E)}for(h=0,N=l.length;h<N;)f=f.then(l[h++],l[h++]);return f}getUri(t){t=oe(this.defaults,t);const r=kt(t.baseURL,t.url,t.allowAbsoluteUrls);return Rt(r,t.params,t.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(t){ie.prototype[t]=function(r,n){return this.request(oe(n||{},{method:t,url:r,data:(n||{}).data}))}}),c.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,a){return this.request(oe(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ie.prototype[t]=r(),ie.prototype[t+"Form"]=r(!0)});let Mn=class Xt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,a){n.reason||(n.reason=new he(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Xt(function(s){t=s}),cancel:t}}};function Fn(e){return function(r){return e.apply(null,r)}}function Hn(e){return c.isObject(e)&&e.isAxiosError===!0}const rt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rt).forEach(([e,t])=>{rt[t]=e});function Jt(e){const t=new ie(e),r=ut(ie.prototype.request,t);return c.extend(r,ie.prototype,t,{allOwnKeys:!0}),c.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Jt(oe(e,s))},r}const k=Jt(we);k.Axios=ie,k.CanceledError=he,k.CancelToken=Mn,k.isCancel=Dt,k.VERSION=qt,k.toFormData=Ue,k.AxiosError=b,k.Cancel=k.CanceledError,k.all=function(t){return Promise.all(t)},k.spread=Fn,k.isAxiosError=Hn,k.mergeConfig=oe,k.AxiosHeaders=K,k.formToJSON=e=>At(c.isHTMLForm(e)?new FormData(e):e),k.getAdapter=Ht.getAdapter,k.HttpStatusCode=rt,k.default=k;const{Axios:os,AxiosError:is,CanceledError:as,isCancel:cs,CancelToken:us,VERSION:ls,all:fs,Cancel:ds,isAxiosError:hs,spread:ps,toFormData:ms,AxiosHeaders:Es,HttpStatusCode:ys,formToJSON:Ss,getAdapter:ws,mergeConfig:gs}=k,jn=k.create({baseURL:"https://api.grass.io",headers:{"Content-Type":"application/json"}}),qn={REGISTER_GUEST:"/registerGuestProcedure"},Wn=async e=>await jn.post(qn.REGISTER_GUEST,e);let I=!1,nt=fe(),Kt=0;const Vt={HTTP_REQUEST:Gn,AUTH:zn,PONG:()=>{}};class Me{#t;#e;constructor(){this.#t=[],this.#e=!1}async runExclusive(t){const r=await this.#r();try{return await t()}finally{r()}}#r(){return new Promise(t=>{this.#t.push({resolve:t}),this.#n()})}#n(){if(this.#e)return;const t=this.#t.shift();t&&(this.#e=!0,t.resolve(this.#s()))}#s(){return()=>{this.#e=!1,this.#n()}}}class z{static sendLogs(t){I.send(JSON.stringify({action:"LOGS",data:t}))}}class Te{#t;#e;constructor(t=lr){this.#t=t,this.#e={},setInterval(()=>{this.#r()},fr)}get(t){return this.#n(t),this.#e[t]?.value??null}set(t,r,n=null){const s=n??this.#t,i={value:r,metainfo:{expire_at:Date.now()+s}};this.#e[t]=i}del(t){delete this.#e[t]}exists(t){return this.#n(t),this.#e[t]!==null&&this.#e[t]!==void 0}#r(){Object.keys(this.#e).forEach(t=>{this.#n(t)})}#n(t){const r=this.#e[t];(r==null||Date.now()>r.metainfo.expire_at)&&delete this.#e[t]}}class Jn{#t;#e;#r;#n;#s;#o;constructor(){this.#t=new Me,this.#e=new Me,this.#r=new Te,this.#n=new Te,this.#s=new Te,this.#o=new Te}async getResponseCookies(t,r){return new Promise(async(n,s)=>{const i=setTimeout(async()=>{await this.#t.runExclusive(()=>{this.#r.del(t),z.sendLogs(`Timeout Error: Could not get Cookies from response to request ${t}`),s(`Timeout Error: Could not get Cookies from response to request ${t}`)})},r);await this.#t.runExclusive(()=>{const o=this.#s.get(t);o!==null?(clearTimeout(i),n(o)):this.#r.set(t,a=>{clearTimeout(i),n(a)})})})}async setResponseCookies(t,r){return this.#t.runExclusive(()=>{const n=this.#r.get(t);n?(n(r),this.#r.del(t)):this.#s.set(t,r)})}async setRedirectData(t,r){return this.#e.runExclusive(()=>{const n=this.#n.get(t);n?(n(r),this.#n.del(t)):this.#o.set(t,r)})}async getRedirectData(t,r){return new Promise(async(n,s)=>{const i=setTimeout(async()=>{await this.#e.runExclusive(()=>{this.#n.del(t),z.sendLogs(`Timeout Error: Could not get Redirect data from response to request ${t}`),s(`Timeout Error: Could not get Redirect data from response to request ${t}`)})},r);await this.#e.runExclusive(()=>{const o=this.#o.get(t);o!==null?(clearTimeout(i),n(o)):this.#n.set(t,a=>{clearTimeout(i),n(a)})})})}async registerOnErrorOccuredEvent(t){return this.setResponseCookies(t,"")}}class Kn{#t;#e;#r;#n;constructor(){this.#t=new Te,this.#e=null,this.#r=new Me,this.#n=new Me}async fetch(t,r){return this.#n.runExclusive(()=>new Promise(async(n,s)=>{let i=null;const o=setTimeout(async()=>{await this.#r.runExclusive(()=>{this.#e=null,z.sendLogs(`Resolved WITHOUT REQUEST ID: ${t}, ${JSON.stringify(r)}`),n({requestId:null,responsePromise:i})})},dr);await this.#r.runExclusive(()=>{this.#e&&(this.#e=null,clearTimeout(o),z.sendLogs(`Inconsistency detected. Waiting for more than 1 requestId: ${t}, ${JSON.stringify(r)}`),s("Inconsistency detected. Waiting for more than 1 requestId.")),i=fetch(t,r).catch(a=>{throw z.sendLogs(`Fetch error for ${t} ${JSON.stringify(r)} : ${a}, ${a.stack}`),a}),this.#e=a=>(clearTimeout(o),n({requestId:a,responsePromise:i}))})}))}async registerOnBeforeRequestEvent(t){return this.#r.runExclusive(()=>{this.#t.exists(t)||this.#s(t)})}async registerOnBeforeRedirectEvent(t){return this.#r.runExclusive(()=>{this.#t.exists(t)||this.#s(t)})}async registerOnCompletedEvent(t){return this.#r.runExclusive(async()=>{this.#t.exists(t)||this.#s(t)})}async registerOnErrorOccuredEvent(t){return this.#r.runExclusive(async()=>{this.#t.exists(t)?await be.registerOnErrorOccuredEvent(t):this.#s(t)})}#s(t){this.#t.set(t,1);const r=this.#e;this.#e=null,r(t)}}const Vn=e=>{I.send(JSON.stringify({jwt:e,action:"VALIDATE_JWT"}))};async function zn(){let e=await W(w.BROWSER_ID);const t=await W(w.USER_ID),r=chrome.runtime.getManifest().version,n=chrome?.runtime?.id;if(!Qt(e))return;const s={browser_id:e,user_id:null,user_agent:navigator.userAgent,timestamp:fe(),device_type:"extension",version:r,extension_id:n};return t&&(s.user_id=t),s}setInterval(async()=>{console.log("[WEBSOCKET] Checking websocket status...");const e=[WebSocket.CONNECTING,WebSocket.CLOSING];I&&(I.readyState===WebSocket.OPEN?await C(w.STATUS,ee.CONNECTED):I.readyState===WebSocket.CLOSED&&await C(w.STATUS,ee.DISCONNECTED));let t=await W(w.IS_CONNECT_BUTTON_ACTIVE);if(typeof t>"u"&&(await C(w.IS_CONNECT_BUTTON_ACTIVE,!0),t=!0),e.includes(I.readyState)||!t){console.log("[WEBSOCKET] WebSocket not in appropriate state for liveness check...");return}if(fe()-nt>129||I.readyState===WebSocket.CLOSED||!t||!I){console.error("[WEBSOCKET] WebSocket does not appear to be live! Restarting the WebSocket connection...");try{I.close()}catch(s){console.error("[CHECK_INTERVAL] ",s)}ae();return}I.send(JSON.stringify({id:it(),version:"1.0.0",action:"PING",data:{}}))},ur);const be=new Jn,Oe=new Kn;async function Gn(e){const t=Object.keys(e.headers).filter(u=>mr.includes(u.toLowerCase())).map(u=>({header:u,operation:"set",value:e.headers[u]})),r=[];if(t.length>0){const u=ar(1e8);r.push(u);const l={id:u,priority:1,action:{type:"modifyHeaders",requestHeaders:t},condition:{urlFilter:`${e.url.replace(/\/$/,"")}`,tabIds:[chrome.tabs.TAB_ID_NONE]}};chrome.declarativeNetRequest.updateSessionRules({addRules:[l]})}const n={method:e.method,mode:"cors",cache:"no-cache",credentials:"omit",headers:e.headers,redirect:"manual"};if(e.body){const u=`data:application/octet-stream;base64,${e.body}`,l=await fetch(u);n.body=await l.blob()}const{requestId:s,responsePromise:i}=await Oe.fetch(e.url,n).catch(u=>(console.error(`Error occurred while extracting requestId: ${u}`),z.sendLogs(`Error occurred while extracting requestId ${e.url}, ${JSON.stringify(n)}: ${u}, ${u.stack}`),{requestId:void 0,responsePromise:void 0}));if(i===void 0)return null;const o=await i.catch(u=>{console.error(`Error occurred while performing fetch: ${u}`),z.sendLogs(`Error occurred while performing fetch <${s}> ${e.url}, ${JSON.stringify(n)}: ${u}, ${u.stack}`)});if(r&&chrome.declarativeNetRequest.updateSessionRules({removeRuleIds:r}),!o)return{url:e.url,status:400,status_text:"Bad Request",headers:{},body:""};if(o.type==="opaqueredirect")return s?await be.getRedirectData(s,hr).then(l=>{const f=JSON.parse(l);return Object.hasOwn(f.headers,"Set-Cookie")&&(f.headers["Set-Cookie"]=JSON.parse(f.headers["Set-Cookie"])),{url:o.url,status:f.statusCode,status_text:"Redirect",headers:f.headers,body:""}}).catch(l=>(console.error(`Error occured while processing redirect metadata : ${l}`),z.sendLogs(`Error occured while processing redirect metadata <${s}> ${e.url}, ${JSON.stringify(n)}: ${l}, ${l.stack}`),null)):(console.error("No requestId for redirect."),z.sendLogs(`Error occurred in redirect ${e.url}, ${JSON.stringify(n)}: No requestId for redirect`),null);const a={};return o.headers.forEach((u,l)=>{l.toLowerCase()!=="content-encoding"&&(a[l]=u)}),s&&await be.getResponseCookies(s,pr).then(u=>{if(u!==""){const l=JSON.parse(u);l.length!==0&&(a["Set-Cookie"]=l)}}).catch(u=>{console.error(`Error occured while processing response cookies: ${u}`),z.sendLogs(`Error occured while processing response cookies <${s}> ${e.url}, ${JSON.stringify(n)}: ${u}, ${u.stack}`)}),{url:o.url,status:o.status,status_text:o.statusText,headers:a,body:yr(await o.arrayBuffer())}}chrome.webRequest.onBeforeRequest.addListener(async e=>{e.initiator===location.origin.toString()&&await Oe.registerOnBeforeRequestEvent(e.requestId)},{urls:["<all_urls>"]},[]);function zt(e){const t=[];return e.forEach(r=>{r.name.toLowerCase()==="set-cookie"&&(Object.hasOwn(r,"value")?t.push(r.value):Object.hasOwn(r,"binaryValue")&&t.push(r.binaryValue))}),t}chrome.webRequest.onBeforeRedirect.addListener(async e=>{if(e.initiator!==location.origin.toString())return;const t={};e.responseHeaders.forEach(n=>{n.name.toLowerCase()!=="set-cookie"&&(Object.hasOwn(n,"value")?t[n.name]=n.value:Object.hasOwn(n,"binaryValue")&&(t[n.name]=n.binaryValue))});const r=zt(e.responseHeaders);r.length!==0&&(t["Set-Cookie"]=JSON.stringify(r)),await Oe.registerOnBeforeRedirectEvent(e.requestId),await be.setRedirectData(e.requestId,JSON.stringify({statusCode:e.statusCode,headers:t}))},{urls:["<all_urls>"]},["responseHeaders","extraHeaders"]),chrome.webRequest.onCompleted.addListener(async e=>{if(e.initiator!==location.origin.toString())return;const t=zt(e.responseHeaders);await Oe.registerOnCompletedEvent(e.requestId),await be.setResponseCookies(e.requestId,JSON.stringify(t))},{urls:["<all_urls>"]},["responseHeaders","extraHeaders"]),chrome.webRequest.onErrorOccurred.addListener(async e=>{e.initiator===location.origin.toString()&&(z.sendLogs(`onErrorOccured, ${e.requestId}, ${e.url}, ${e.error}`),await Oe.registerOnErrorOccuredEvent(e.requestId))},{urls:["<all_urls>"]},[]);const Xn=async()=>{const e=await W(w.BROWSER_ID),t=await W(w.PERMISSIONS),r=await W(w.USER_ID),n=chrome.runtime.getManifest().version,s=chrome.runtime.id,i=navigator.userAgent;if(!e||!t||!r){e||await C(w.BROWSER_ID,it()).catch(u=>{console.error("[CHECKIN]",u)}),r||await Wn({referralCode:""}).then(u=>{const{userId:l,accessToken:f,refreshToken:h}=u.data.result.data;Promise.allSettled([C(w.USER_ID,l),C(w.ACCESS_TOKEN,f),C(w.REFRESH_TOKEN,h),C(w.IS_AUTHENTICATED,!0),C(w.TOKEN_EXPIRY,ir().add(1,"year").unix())])}).catch(u=>{console.error("[CHECKIN][registerGuest]",u)}),console.warn("[CHECKIN] Cannot start connection without BROWSER ID, PERMISSIONS, or USER ID"),await C(w.STATUS,ee.DISCONNECTED);return}const o=fe();if(o-Kt<=60){console.warn("[CHECKIN] Skipping checkin because it was too recent");return}const a=await fetch("https://director.getgrass.io/checkin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({browserId:e,userId:r,version:n,extensionId:s,userAgent:i,deviceType:"extension"})});if(Kt=o,a.ok)return await a.json()},ae=async()=>{const e=await Xn();if(typeof e>"u")return;await C(w.STATUS,ee.CONNECTING);const{destinations:t,token:r}=e;t.forEach((o,a)=>{t[a]=`ws://${o}`});const n=t.length-1;let s=0;const i=async()=>{I=new WebSocket(`${t[s]}?token=${r}`),I.onopen=async()=>{console.log("[WEBSOCKET] OPEN:"),nt=fe(),await C(w.STATUS,ee.CONNECTED)},I.onmessage=async o=>{nt=fe();let a;try{a=JSON.parse(o.data)}catch(u){console.error("[WEBSOCKET] Could not parse message!",o.data),console.error(u);return}if(a.action in Vt)try{const u=await Vt[a.action](a.data);I.send(JSON.stringify({id:a.id,origin_action:a.action,result:u}))}catch(u){z.sendLogs(`[WEBSOCKET] RPC encountered error for message ${JSON.stringify(a)}: ${u}, ${u.stack}`),console.error(`[WEBSOCKET] RPC action ${a.action} encountered error: `,u)}else console.error(`No RPC action ${a.action}!`)},I.onclose=async o=>{o.wasClean?console.log(`[WEBSOCKET] CLOSE: Connection closed cleanly, code=${o.code} reason=${o.reason}`):(console.log("[WEBSOCKET] CLOSE: Connection died"),await me(Ee),s++,s>n&&await C(w.STATUS,ee.DEAD))},I.onerror=async o=>{if(console.log("[WEBSOCKET] ERROR: ",o),s++,s>n){await C(w.STATUS,ee.DEAD),console.error("[WEBSOCKET] All destinations have failed!");return}await me(Ee),await i()}};await i()};ae(),chrome.runtime.onMessage.addListener(async(e,t,r)=>{if(e){const{type:n}=e;switch(n){case q.Ping:r("pong");break;case q.Connect:ae();break;case q.Reconnect:try{I.close()}catch(s){console.error("[chrome.runtime.onMessage] ",s)}await C(w.IS_CONNECT_BUTTON_ACTIVE,!0),await me(Ee),await ae(),console.log("[chrome.runtime.onMessage] Reconnecting..."),r("Reconnecting...");break;case q.Disconnect:try{I.close()}catch(s){console.error("[chrome.runtime.onMessage] ",s)}await C(w.IS_CONNECT_BUTTON_ACTIVE,!1),await C(w.STATUS,ee.DISCONNECTED),r("Disconnected...");break;case q.GetWebsocketReadyState:try{r({readyState:I.readyState})}catch{r({readyState:-1})}break;case q.GetCurrentVersion:r({version:chrome.runtime.getManifest().version});break;default:hasToken=!0,await C(w.JWT,e),Vn(e),r({success:!0});break}return}r({success:!1})}),chrome.runtime.onMessageExternal.addListener(async(e,t,r)=>{const{type:n,payload:s}=e;switch(n){case q.Ping:r("pong");break;case q.GetCurrentVersion:r({success:!0,data:{version:chrome.runtime.getManifest().version}});break;case q.AuthenticateUser:await Promise.allSettled([C(w.USER_ID,s.userId),C(w.ACCESS_TOKEN,s.accessToken),C(w.REFRESH_TOKEN,s.refreshToken),C(w.TOKEN_EXPIRY,s.tokenExpiry),C(w.IS_AUTHENTICATED,!0)]),r({success:!0,data:null});break;case q.RetrieveUser:const i=await W(w.USER_ID),o=await W(w.ACCESS_TOKEN),a=await W(w.REFRESH_TOKEN),u=await W(w.TOKEN_EXPIRY),l=await W(w.IS_AUTHENTICATED);r({success:!0,data:{userId:i,accessToken:o,refreshToken:a,tokenExpiry:u,isAuthenticated:l}});break;case q.UnAuthenticateUser:case q.ClearStorage:await Promise.allSettled([C(w.IS_AUTHENTICATED,!1),C(w.ACCESS_TOKEN,""),C(w.REFRESH_TOKEN,""),C(w.USER_ID,""),C(w.TOKEN_EXPIRY,0),C(w.IS_AUTHENTICATED,!1)]),r({success:!0,data:null});break;case q.Reconnect:if(!await W(w.POPUP_STATE)){try{I.close(1e3,"Dashboard Request")}catch(h){console.error("[chrome.runtime.onMessageExternal] ",h)}await ae()}r({success:!0,data:null});break;default:r({success:!1,data:null});break}r({success:!1,data:null})}),chrome.runtime.onConnect.addListener(async e=>{e.name==="popup"&&(await C(w.POPUP_STATE,!0),e.onDisconnect.addListener(async()=>{await C(w.POPUP_STATE,!1)}))}),chrome.storage.onChanged.addListener(async e=>{if(e[w.USER_ID])if(await W(w.USER_ID)){try{I.close(1e3,"User ID changed")}catch(r){console.error("[chrome.storage.onChanged] ",r)}await me(Ee),ae()}else try{I.close(1e3,"Blank User ID")}catch(r){console.error("[chrome.storage.onChanged] ",r)}else if(e[w.PERMISSIONS]&&await W(w.PERMISSIONS)){try{I.close(1e3,"Permissions changed")}catch(r){console.error("[chrome.storage.onChanged] ",r)}await me(Ee),ae()}}),chrome.runtime.onUpdateAvailable.addListener(function(e){console.log("[chrome.runtime.onUpdateAvailable] version:",e.version),chrome.runtime.reload()});const st=async()=>{chrome.permissions.getAll(async e=>{if(e.origins.includes("<all_urls>"))await C(w.PERMISSIONS,!0);else{await C(w.PERMISSIONS,!1);try{I.close(1e3,"Modified permissions")}catch(t){console.error("[checkPermissions] ",t)}}})};chrome.permissions.onAdded.addListener(st),chrome.permissions.onRemoved.addListener(st),st(),setInterval(async()=>{if(!await W(w.POPUP_STATE)){const t=navigator.onLine;C(w.HAS_INTERNET_CONNECTION,t)}},5*ne),setInterval(()=>{chrome.runtime.sendMessage({type:q.Ping})},Er)})();
