LavaPack.loadBundle([[7033,{"../../store/actions":8127,"@metamask/claims-controller":1439,"@metamask/utils":3116,react:5256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaims=n.ClaimsProvider=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),s=e("@metamask/utils"),a=e("@metamask/claims-controller"),i=e("../../store/actions");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const c=(0,r.createContext)(undefined),u=[a.ClaimStatusEnum.CREATED,a.ClaimStatusEnum.SUBMITTED,a.ClaimStatusEnum.IN_PROGRESS,a.ClaimStatusEnum.WAITING_FOR_CUSTOMER];n.ClaimsProvider=({children:e})=>{const[t,n]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[d,p]=(0,r.useState)(null),m=(0,r.useCallback)(async()=>{try{l(!0),p(null);const e=(await(0,i.getShieldClaims)()).sort((e,t)=>{const n=new Date(e.createdAt).getTime();return new Date(t.createdAt).getTime()-n}).map(e=>{const t=Number(e.chainId),n=isNaN(t)?"":(0,s.numberToHex)(t);return{...e,chainId:n}});n(e)}catch(e){p(e)}finally{l(!1)}},[]);(0,r.useEffect)(()=>{m()},[m]);const h=(0,r.useMemo)(()=>t.filter(e=>u.includes(e.status)),[t]),f=(0,r.useMemo)(()=>t.filter(e=>e.status===a.ClaimStatusEnum.APPROVED),[t]),g=(0,r.useMemo)(()=>t.filter(e=>e.status===a.ClaimStatusEnum.REJECTED),[t]),b=(0,r.useMemo)(()=>({claims:t,pendingClaims:h,completedClaims:f,rejectedClaims:g,isLoading:o,error:d,refetchClaims:m}),[t,h,f,g,o,d,m]);return r.default.createElement(c.Provider,{value:b},e)};n.useClaims=()=>{const e=(0,r.useContext)(c);if(e===undefined)throw new Error("useClaims must be used within a ClaimsProvider");return e}}}},{package:"$root$",file:"ui/contexts/claims/claims.tsx"}],[7034,{"../pages/confirmations/hooks/useGasFeeInputs":7748,"prop-types":5094,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeContextProvider=n.GasFeeContext=void 0,n.useGasFeeContext=function(){return(0,a.useContext)(u)};var r,s=e("react-compiler-runtime"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),i=(r=e("prop-types"))&&r.__esModule?r:{default:r},o=e("../pages/confirmations/hooks/useGasFeeInputs");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const u=n.GasFeeContext=(0,a.createContext)({}),l=e=>{const t=(0,s.c)(3),{children:n,defaultEstimateToUse:r,transaction:i,minimumGasLimit:c,editGasMode:l}=e,d=(0,o.useGasFeeInputs)(r,i,c,l);let p;return t[0]!==n||t[1]!==d?(p=a.default.createElement(u.Provider,{value:d},n),t[0]=n,t[1]=d,t[2]=p):p=t[2],p};n.GasFeeContextProvider=l,l.propTypes={children:i.default.node.isRequired,defaultEstimateToUse:i.default.string,transaction:i.default.object,minimumGasLimit:i.default.string,editGasMode:i.default.string}}}},{package:"$root$",file:"ui/contexts/gasFee.js"}],[7036,{"../../hooks/identity/useAccountSyncing":7168,"../../hooks/identity/useAuthentication":7170,"../../hooks/identity/useContactSyncing":7177,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetamaskIdentityProvider=void 0;var r=e("react-compiler-runtime"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),a=e("../../hooks/identity/useAccountSyncing"),i=e("../../hooks/identity/useContactSyncing"),o=e("../../hooks/identity/useAuthentication");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n.MetamaskIdentityProvider=e=>{const t=(0,r.c)(18),{children:n}=e,{dispatchAccountSyncing:c,shouldDispatchAccountSyncing:u}=(0,a.useAccountSyncing)(),{dispatchContactSyncing:l,shouldDispatchContactSyncing:d}=(0,i.useContactSyncing)(),{autoSignIn:p,shouldAutoSignIn:m}=(0,o.useAutoSignIn)(),{autoSignOut:h,shouldAutoSignOut:f}=(0,o.useAutoSignOut)();let g,b,S,y,v,T,k,w,_;return t[0]!==c||t[1]!==u?(g=()=>{u&&c()},b=[u,c],t[0]=c,t[1]=u,t[2]=g,t[3]=b):(g=t[2],b=t[3]),(0,s.useEffect)(g,b),t[4]!==l||t[5]!==d?(S=()=>{d&&l()},y=[d,l],t[4]=l,t[5]=d,t[6]=S,t[7]=y):(S=t[6],y=t[7]),(0,s.useEffect)(S,y),t[8]!==p||t[9]!==m?(v=()=>{m&&p()},T=[m,p],t[8]=p,t[9]=m,t[10]=v,t[11]=T):(v=t[10],T=t[11]),(0,s.useEffect)(v,T),t[12]!==h||t[13]!==f?(k=()=>{f&&h()},w=[f,h],t[12]=h,t[13]=f,t[14]=k,t[15]=w):(k=t[14],w=t[15]),(0,s.useEffect)(k,w),t[16]!==n?(_=s.default.createElement(s.default.Fragment,null,n),t[16]=n,t[17]=_):_=t[17],_}}}},{package:"$root$",file:"ui/contexts/identity/index.tsx"}],[7037,{"./metamask-notifications":7038},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MetamaskNotificationsProvider",{enumerable:!0,get:function(){return r.MetamaskNotificationsProvider}});var r=e("./metamask-notifications")}}},{package:"$root$",file:"ui/contexts/metamask-notifications/index.tsx"}],[7038,{"../../ducks/metamask/metamask":7067,"../../hooks/metamask-notifications/useNotifications":7180,"../../selectors":8094,"../../selectors/identity/authentication":8092,"../../selectors/metamask-notifications/metamask-notifications":8095,"./notification-storage-keys":7039,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetamaskNotificationsProvider=void 0,n.useBasicFunctionalityDisableEffect=g,n.useEnableNotificationsByDefaultEffect=S,n.useFetchInitialNotificationsEffect=b,n.useMetamaskNotificationsContext=void 0;var r=e("react-compiler-runtime"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),a=e("react-redux"),i=e("../../hooks/metamask-notifications/useNotifications"),o=e("../../selectors/metamask-notifications/metamask-notifications"),c=e("../../selectors"),u=e("../../ducks/metamask/metamask"),l=e("../../selectors/identity/authentication"),d=e("./notification-storage-keys");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const m=(0,s.createContext)(undefined);n.useMetamaskNotificationsContext=()=>{const e=(0,s.useContext)(m);if(!e)throw new Error("useNotificationsContext must be used within a MetamaskNotificationsProvider");return e};const h=()=>{const e=(0,r.c)(3),{disableNotifications:t}=(0,i.useDisableNotifications)(),{listNotifications:n}=(0,i.useListNotifications)();let s;return e[0]!==t||e[1]!==n?(s=async()=>{await t(),await n()},e[0]=t,e[1]=n,e[2]=s):s=e[2],s},f=()=>{const e=(0,r.c)(3),{enableNotifications:t}=(0,i.useEnableNotifications)(),{listNotifications:n}=(0,i.useListNotifications)();let s;return e[0]!==t||e[1]!==n?(s=async e=>{(e===undefined||e)&&await t(),await n()},e[0]=t,e[1]=n,e[2]=s):s=e[2],s};function g(){const e=(0,a.useSelector)(c.getUseExternalServices),t=(0,a.useSelector)(o.selectIsMetamaskNotificationsEnabled),n=h();(0,s.useEffect)(()=>{(async()=>{try{!e&&t&&await n()}catch{}})()},[n,e,t])}function b(){const e=(0,a.useSelector)(o.selectIsMetamaskNotificationsEnabled),t=(0,a.useSelector)(c.getUseExternalServices),n=(0,a.useSelector)(u.getIsUnlocked),r=(0,a.useSelector)(l.selectIsSignedIn),i=Boolean(e)&&Boolean(r),p=f();(0,s.useEffect)(()=>{(async()=>{try{t&&i&&n&&await p(await(0,d.hasNotificationSubscriptionExpired)())}catch{}})()},[i,t,n,p])}function S(){const e=(0,a.useSelector)(o.selectIsMetamaskNotificationsEnabled),t=(0,a.useSelector)(c.getUseExternalServices),n=(0,a.useSelector)(u.getIsUnlocked),r=(0,a.useSelector)(o.getIsNotificationEnabledByDefaultFeatureFlag),i=f();(0,s.useEffect)(()=>{(async()=>{try{!e&&t&&n&&r&&(await(0,d.hasUserTurnedOffNotificationsOnce)()||await i())}catch{}})()},[i,t,e,r,n])}n.MetamaskNotificationsProvider=e=>{const t=(0,r.c)(8),{children:n}=e,{listNotifications:a,notificationsData:o,isLoading:c,error:u}=(0,i.useListNotifications)();let l,d;return g(),b(),S(),t[0]!==u||t[1]!==c||t[2]!==a||t[3]!==o?(l={listNotifications:a,notificationsData:o,isLoading:c,error:u},t[0]=u,t[1]=c,t[2]=a,t[3]=o,t[4]=l):l=t[4],t[5]!==n||t[6]!==l?(d=s.default.createElement(m.Provider,{value:l},n),t[5]=n,t[6]=l,t[7]=d):d=t[7],d}}}},{package:"$root$",file:"ui/contexts/metamask-notifications/metamask-notifications.tsx"}],[7039,{"../../../shared/lib/storage-helpers":5893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updateNotificationSubscriptionExpiration=n.setUserHasTurnedOffNotificationsOnce=n.hasUserTurnedOffNotificationsOnce=n.hasNotificationSubscriptionExpired=n.RESUBSCRIBE_NOTIFICATIONS_KEY=n.RESUBSCRIBE_NOTIFICATIONS_EXPIRY_DURATION_MS=n.HAS_USER_TURNED_OFF_ONCE_NOTIFICATIONS_KEY=void 0;var r=e("../../../shared/lib/storage-helpers");const s=n.RESUBSCRIBE_NOTIFICATIONS_KEY="RESUBSCRIBE_NOTIFICATIONS_EXPIRY",a=n.RESUBSCRIBE_NOTIFICATIONS_EXPIRY_DURATION_MS=864e5;n.hasNotificationSubscriptionExpired=async()=>{const e=await(0,r.getStorageItem)(s);if(!e)return!0;return Date.now()>parseInt(e,10)};n.updateNotificationSubscriptionExpiration=async()=>{const e=Date.now()+a;await(0,r.setStorageItem)(s,e.toString())};const i=n.HAS_USER_TURNED_OFF_ONCE_NOTIFICATIONS_KEY="NOTIFICATIONS_TURNED_OFF_ONCE";n.hasUserTurnedOffNotificationsOnce=async()=>{const e=await(0,r.getStorageItem)(i);return Boolean(e)};n.setUserHasTurnedOffNotificationsOnce=async()=>{await(0,r.setStorageItem)(i,!0)}}}},{package:"$root$",file:"ui/contexts/metamask-notifications/notification-storage-keys.ts"}],[7040,{"../../app/scripts/lib/util":372,"../../shared/constants/metametrics":5791,"../../shared/lib/sentry":5890,"../helpers/constants/routes":7088,"../hooks/useSegmentContext":7258,"../selectors":8094,"../store/actions":8127,"../store/background-connection":8128,lodash:4838,"prop-types":5094,react:5256,"react-compiler-runtime":5170,"react-redux":5221,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsContext=n.LegacyMetaMetricsProvider=void 0,n.MetaMetricsProvider=k,n.withMetaMetrics=function(e){const t=t=>{const n=(0,s.c)(6),r=(0,a.useContext)(T),i=null==r?void 0:r.bufferedTrace,o=null==r?void 0:r.bufferedEndTrace,c=null==r?void 0:r.onboardingParentContext;let u;return n[0]!==r||n[1]!==t||n[2]!==i||n[3]!==o||n[4]!==c?(u=a.default.createElement(e,y({},t,{trackEvent:r,bufferedTrace:i,bufferedEndTrace:o,onboardingParentContext:c})),n[0]=r,n[1]=t,n[2]=i,n[3]=o,n[4]=c,n[5]=u):u=n[5],u};return t.displayName=`withMetaMetrics(${e.displayName||e.name||"Component"})`,t};var r,s=e("react-compiler-runtime"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),i=(r=e("prop-types"))&&r.__esModule?r:{default:r},o=e("react-router-dom"),c=e("react-redux"),u=e("lodash"),l=e("../../shared/lib/sentry"),d=e("../../app/scripts/lib/util"),p=e("../helpers/constants/routes"),m=e("../../shared/constants/metametrics"),h=e("../hooks/useSegmentContext"),f=e("../selectors"),g=e("../store/background-connection"),b=e("../store/actions");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=n.MetaMetricsContext=(0,a.createContext)(()=>{(0,l.captureException)(Error("MetaMetrics context function was called from a react node that is not a descendant of a MetaMetrics context provider"))});function k({children:e}){var t;const n=(0,o.useLocation)(),r=(0,h.useSegmentContext)(),s=(0,c.useSelector)(f.getParticipateInMetaMetrics),i=(0,a.useRef)(null),S=(0,a.useCallback)((e,t)=>{const n=null==t?void 0:t.contextPropsIntoEventProperties;var s;n&&0!==n.length&&(e.properties||(e.properties={}),n.includes(m.MetaMetricsContextProp.PageTitle)&&(e.properties[m.MetaMetricsContextProp.PageTitle]=null===(s=r.page)||void 0===s?void 0:s.title))},[null===(t=r.page)||void 0===t?void 0:t.title]),y=(0,a.useCallback)(async(e,t)=>{S(e,t);const n={...e,environmentType:(0,d.getEnvironmentType)(),...r};s?(0,b.trackMetaMetricsEvent)(n,t):await(0,g.submitRequestToBackground)("addEventBeforeMetricsOptIn",[{...n,actionId:(0,g.generateActionId)()}])},[S,r,s]),v=(0,a.useCallback)((e,t)=>{(0,g.submitRequestToBackground)("bufferedTrace",[e,t])},[]),k=(0,a.useCallback)(e=>{(0,g.submitRequestToBackground)("bufferedEndTrace",[e])},[]),w=(0,a.useRef)();(0,a.useEffect)(()=>{var e;const t=(0,d.getEnvironmentType)(),s=(0,p.getPaths)();let a=null;for(const e of s){const t=""===e?p.DEFAULT_ROUTE:e;if(a=(0,o.matchPath)({path:t,end:!0,caseSensitive:!1},n.pathname),a)break}if(a){if(w.current!==a.pattern.path&&("notification"!==t||"/"!==a.pattern.path||w.current!==undefined)){const{pattern:e,params:s}=a,{path:i}=e,o=p.PATH_NAME_MAP.get(i);(0,b.trackMetaMetricsPage)({name:o,params:(0,u.omit)(s,["account","address"]),environmentType:t,page:r.page,referrer:r.referrer},{isOptInPath:n.pathname.startsWith("/initialize")})}}else(0,l.captureMessage)("Segment page tracking found unmatched route",{extra:{previousMatch:w,currentPath:n.pathname}});w.current=null===(e=a)||void 0===e||null===(e=e.pattern)||void 0===e?void 0:e.path},[n.pathname,n.search,n.hash,r.page,r.referrer]);const _=y;return _.bufferedTrace=v,_.bufferedEndTrace=k,_.onboardingParentContext=i,a.default.createElement(T.Provider,{value:_},e)}k.propTypes={children:i.default.node};class w extends a.Component{getChildContext(){const e=this.context;return{trackEvent:e,bufferedTrace:null==e?void 0:e.bufferedTrace,bufferedEndTrace:null==e?void 0:e.bufferedEndTrace}}render(){return this.props.children}}n.LegacyMetaMetricsProvider=w,v(w,"propTypes",{children:i.default.node}),v(w,"defaultProps",{children:undefined}),v(w,"contextType",T),v(w,"childContextTypes",{trackEvent:i.default.func,bufferedTrace:i.default.func,bufferedEndTrace:i.default.func})}}},{package:"$root$",file:"ui/contexts/metametrics.js"}],[7041,{"../../hooks/useAsync":7215,"@rive-app/react-canvas":3194,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){const t=(0,r.c)(13),{children:n}=e;let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={},t[0]=s):s=t[0];const[i,o]=(0,a.useState)(s);let l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l={},t[1]=l):l=t[1];const[d,p]=(0,a.useState)(l);let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=(e,t)=>{o(n=>({...n,[e]:t}))},t[2]=m):m=t[2];const h=m;let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=(e,t)=>{p(n=>({...n,[e]:t}))},t[3]=f):f=t[3];const g=f,{isWasmReady:b,loading:S,error:y}=c();let v,T;t[4]!==d||t[5]!==y||t[6]!==b||t[7]!==S||t[8]!==i?(v={isWasmReady:b,loading:S,error:y,urlBufferMap:i,setUrlBufferCache:h,animationCompleted:d,setIsAnimationCompleted:g},t[4]=d,t[5]=y,t[6]=b,t[7]=S,t[8]=i,t[9]=v):v=t[9];t[10]!==n||t[11]!==v?(T=a.default.createElement(u.Provider,{value:v},n),t[10]=n,t[11]=v,t[12]=T):T=t[12];return T},n.useRiveWasmReady=n.useRiveWasmFile=n.useRiveWasmContext=void 0;var r=e("react-compiler-runtime"),s=e("@rive-app/react-canvas"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),i=e("../../hooks/useAsync");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const c=()=>{const e=(0,r.c)(7),[t,n]=(0,a.useState)(!1);let o,c;e[0]!==t?(o=async()=>{if(t)return!0;if(void 0===s.RuntimeLoader)return n(!0),!0;const e=await fetch("./images/riv_animations/rive.wasm");if(!e.ok)throw new Error(`HTTP error! status while fetching rive.wasm: ${e.status}`);const r=await e.arrayBuffer();return s.RuntimeLoader.wasmBinary=r,s.RuntimeLoader.setWasmUrl("should not fetch wasm"),await s.RuntimeLoader.awaitInstance(),n(!0),!0},c=[t,n],e[0]=t,e[1]=o,e[2]=c):(o=e[1],c=e[2]);const u=(0,i.useAsyncResult)(o,c);let l;return e[3]!==t||e[4]!==u.error||e[5]!==u.pending?(l={isWasmReady:t,loading:u.pending,error:u.error},e[3]=t,e[4]=u.error,e[5]=u.pending,e[6]=l):l=e[6],l};n.useRiveWasmReady=c;const u=(0,a.createContext)({isWasmReady:!1,loading:!1,error:undefined,urlBufferMap:{},setUrlBufferCache:()=>{},animationCompleted:{},setIsAnimationCompleted:()=>{}});const l=()=>{const e=(0,a.useContext)(u);if(!e)throw new Error("useRiveWasm must be used within RiveWasmProvider");return e};n.useRiveWasmContext=l;n.useRiveWasmFile=e=>{const t=(0,r.c)(10),{isWasmReady:n,urlBufferMap:s,setUrlBufferCache:a}=l(),o=s[e];let c,u;t[0]!==o||t[1]!==n||t[2]!==a||t[3]!==e?(c=async()=>{if(!n)return;if(o)return o;const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}, url: ${e}`);const r=await t.arrayBuffer();return a(e,r),r},u=[n,e,a,o],t[0]=o,t[1]=n,t[2]=a,t[3]=e,t[4]=c,t[5]=u):(c=t[4],u=t[5]);const d=(0,i.useAsyncResult)(c,u);let p;return t[6]!==d.error||t[7]!==d.pending||t[8]!==d.value?(p={buffer:d.value,loading:d.pending,error:d.error},t[6]=d.error,t[7]=d.pending,t[8]=d.value,t[9]=p):p=t[9],p}}}},{package:"$root$",file:"ui/contexts/rive-wasm/index.tsx"}],[7042,{react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useScrollContainer=n.ScrollContainer=void 0;var r=e("react-compiler-runtime"),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(e("react"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const o=(0,s.createContext)(null);n.ScrollContainer=e=>{const t=(0,r.c)(6);let n,a;t[0]!==e?(({children:n,...a}=e),t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]);const c=(0,s.useRef)(null);let u;return t[3]!==n||t[4]!==a?(u=s.default.createElement(o.Provider,{value:c},s.default.createElement("div",i({ref:c},a),n)),t[3]=n,t[4]=a,t[5]=u):u=t[5],u};n.useScrollContainer=()=>(0,s.useContext)(o)}}},{package:"$root$",file:"ui/contexts/scroll-container.tsx"}],[7043,{"../../../shared/constants/metametrics":5791,"../../../shared/modules/environment":5917,"../../ducks/metamask/metamask":7067,"../../hooks/shield/metrics/useSubscriptionMetrics":7194,"../../hooks/subscription/useSubscription":7208,"../../selectors":8094,"../../selectors/identity/authentication":8092,"../../selectors/subscription":8123,"../../store/actions":8127,"@metamask/subscription-controller":2932,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldSubscriptionContext=n.ShieldSubscriptionProvider=n.ShieldSubscriptionContext=void 0;var r,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),a=e("react-redux"),i=e("@metamask/subscription-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},c=e("../../hooks/subscription/useSubscription"),u=e("../../store/actions"),l=e("../../selectors"),d=e("../../selectors/identity/authentication"),p=e("../../../shared/modules/environment"),m=e("../../selectors/subscription"),h=e("../../ducks/metamask/metamask"),f=e("../../hooks/shield/metrics/useSubscriptionMetrics"),g=e("../../../shared/constants/metametrics");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const S=n.ShieldSubscriptionContext=s.default.createContext({evaluateCohortEligibility:async()=>{}});n.useShieldSubscriptionContext=()=>{const e=(0,s.useContext)(S);if(!e)throw new Error("useShieldSubscriptionContext must be used within a ShieldSubscriptionProvider");return e};n.ShieldSubscriptionProvider=({children:e})=>{const t=(0,a.useDispatch)(),n=Boolean((0,a.useSelector)(l.getUseExternalServices)),r=(0,p.getIsMetaMaskShieldFeatureEnabled)(),b=(0,a.useSelector)(h.getIsUnlocked),y=(0,a.useSelector)(d.selectIsSignedIn),v=(0,a.useSelector)(m.getIsActiveShieldSubscription),T=(0,a.useSelector)(m.getHasShieldEntryModalShownOnce),{getSubscriptionEligibility:k}=(0,c.useSubscriptionEligibility)(i.PRODUCT_TYPES.SHIELD),{captureShieldEligibilityCohortEvent:w}=(0,f.useSubscriptionMetrics)(),_=(0,s.useCallback)(async(e,n)=>{if(0===e.length)return null;const r=[...e].sort((e,t)=>e.priority-t.priority);let s=null;if(1===r.length)s=r[0];else if(r.length>=2){const e=Math.random();let t=0;for(const n of r)if(t+=n.eligibilityRate,e<=t){s=n;break}s||(s=r[r.length-1])}if(s)try{return await t((0,u.assignUserToCohort)({cohort:s.cohort})),await w({cohort:s.cohort,modalType:n,numberOfEligibleCohorts:e.length},g.MetaMetricsEventName.ShieldEligibilityCohortAssigned),s}catch(e){return o.default.error("[ShieldSubscription] Failed to assign cohort",e),null}return null},[t,w]),I=(0,s.useCallback)(async e=>{try{if(!r||!n)return;if(v)return void t((0,u.setShowShieldEntryModalOnce)({show:!1}));if(!y||!b||T)return;const s=await k();if(null==s||!s.canSubscribe||!s.canViewEntryModal)return;const a=s.cohorts.filter(e=>e.eligible),o=s.assignedCohort,c=Boolean(o),l=s.hasAssignedCohortExpired,{modalType:d}=s;if(c){if(e!==i.COHORT_NAMES.POST_TX&&!l)return;await w({cohort:o,numberOfEligibleCohorts:a.length},g.MetaMetricsEventName.ShieldEligibilityCohortTimeout);if(!a.find(t=>t.cohort===e))return;return void t((0,u.setShowShieldEntryModalOnce)({show:!0,shouldSubmitEvents:!0,triggeringCohort:e,modalType:d,shouldUpdateBackgroundState:!1}))}if(e===i.COHORT_NAMES.WALLET_HOME&&a.length>0&&d){const e=await _(a,d);(null==e?void 0:e.cohort)===i.COHORT_NAMES.WALLET_HOME&&t((0,u.setShowShieldEntryModalOnce)({show:!0,shouldSubmitEvents:!0,triggeringCohort:e.cohort,modalType:d,shouldUpdateBackgroundState:!1}))}}catch(e){o.default.warn("[evaluateCohortEligibility] error",e)}},[t,r,n,v,y,b,T,k,_,w]);return(0,s.useEffect)(()=>{r&&n&&y&&b&&t((0,u.subscriptionsStartPolling)())},[r,y,t,b,n]),s.default.createElement(S.Provider,{value:{evaluateCohortEligibility:I}},e)}}}},{package:"$root$",file:"ui/contexts/shield/shield-subscription.tsx"}],[7044,{"./snap-interface":7045},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./snap-interface");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})}}},{package:"$root$",file:"ui/contexts/snaps/index.ts"}],[7045,{"../../store/actions":8127,"./utils":7046,"@metamask/snaps-sdk":2786,"@metamask/snaps-utils":2903,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInterfaceContextProvider=n.SnapInterfaceContext=void 0,n.useSnapInterfaceContext=function(){return(0,a.useContext)(l)};var r=e("@metamask/snaps-sdk"),s=e("@metamask/snaps-utils"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),i=e("react-redux"),o=e("../../store/actions"),c=e("./utils");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const l=n.SnapInterfaceContext=(0,a.createContext)(null);n.SnapInterfaceContextProvider=({children:e,interfaceId:t,snapId:n,initialState:u})=>{const d=(0,i.useDispatch)(),p=(0,a.useRef)(u??{}),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{p.current=u},[u]);const h=e=>d((0,o.updateInterfaceState)(t,e)),f=({event:e,name:r,value:s=(r?p.current[r]:null)})=>{return a=e,i=r,c=s,void(0,o.handleSnapRequest)({snapId:n,origin:"metamask",handler:"onUserInput",request:{jsonrpc:"2.0",method:" ",params:{event:{type:a,...i===undefined?{}:{name:i},...c===undefined?{}:{value:c}},id:t}}}).then(()=>(0,o.forceUpdateMetamaskState)(d)).catch(e=>{console.error(`Failed to handle Snap request to "${n}" for event "${a}" with name "${i}":`,e)});var a,i,c},g=(e,s)=>{(0,o.handleSnapRequest)({snapId:n,origin:"metamask",handler:"onUserInput",request:{jsonrpc:"2.0",method:" ",params:{event:{type:r.UserInputEventType.FileUploadEvent,...e===undefined?{}:{name:e},...s===undefined?{}:{file:s}},id:t}}}).then(()=>(0,o.forceUpdateMetamaskState)(d))};return a.default.createElement(l.Provider,{value:{handleEvent:f,getValue:(e,t)=>{var n;const r=t?null===(n=u[t])||void 0===n?void 0:n[e]:null==u?void 0:u[e];return r!==undefined&&null!==r?r:undefined},handleInputChange:(e,t,n)=>{const s=(0,c.mergeValue)(p.current,e,t,n);var a,i;p.current=s,h(s),a=e,i=t,f({event:r.UserInputEventType.InputChangeEvent,name:a,value:i})},handleFileChange:(e,t,n)=>{if(t)return void t.arrayBuffer().then(e=>new Uint8Array(e)).then(e=>(0,s.encodeBase64)(e)).then(r=>{const s={name:t.name,size:t.size,contentType:t.type,contents:r},a=(0,c.mergeValue)(p.current,e,s,n);p.current=a,h(a),g(e,s)});const r=(0,c.mergeValue)(p.current,e,null,n);p.current=r,h(r),g(e,null)},setCurrentFocusedInput:e=>m.current=e,focusedInput:m.current,snapId:n}},e)}}}},{package:"$root$",file:"ui/contexts/snaps/snap-interface.tsx"}],[7046,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeValue=void 0;n.mergeValue=(e,t,n,r)=>r?{...e,[r]:{...e[r],[t]:n}}:{...e,[t]:n}}}},{package:"$root$",file:"ui/contexts/snaps/utils.ts"}],[7047,{"prop-types":5094,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionModalContextProvider=n.TransactionModalContext=void 0,n.useTransactionModalContext=function(){return(0,a.useContext)(c)};var r,s=e("react-compiler-runtime"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}(e("react")),i=(r=e("prop-types"))&&r.__esModule?r:{default:r};function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const c=n.TransactionModalContext=(0,a.createContext)({}),u=e=>{const t=(0,s.c)(14),{children:n}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[0]=r):r=t[0];const[i,o]=(0,a.useState)(r);let u;t[1]!==i?(u=e=>{if(i<0)return;const t=[...i];e.forEach(e=>{const n=i.indexOf(e);t.splice(n,1)}),o(t)},t[1]=i,t[2]=u):u=t[2];const l=u;let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{o([])},t[3]=d):d=t[3];const p=d;let m;t[4]!==i?(m=e=>{if(i.includes(e))return;const t=[...i];t.push(e),o(t)},t[4]=i,t[5]=m):m=t[5];const h=m,f=i[i.length-1];let g,b;return t[6]!==l||t[7]!==h||t[8]!==i.length||t[9]!==f?(g={closeModal:l,closeAllModals:p,currentModal:f,openModal:h,openModalCount:i.length},t[6]=l,t[7]=h,t[8]=i.length,t[9]=f,t[10]=g):g=t[10],t[11]!==n||t[12]!==g?(b=a.default.createElement(c.Provider,{value:g},n),t[11]=n,t[12]=g,t[13]=b):b=t[13],b};n.TransactionModalContextProvider=u,u.propTypes={children:i.default.node.isRequired}}}},{package:"$root$",file:"ui/contexts/transaction-modal.js"}],[7049,{"./enums":7048,"./invalid-custom-network":7050,"./unconnected-account":7051},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ALERT_STATE",{enumerable:!0,get:function(){return a.ALERT_STATE}}),Object.defineProperty(n,"invalidCustomNetwork",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"unconnectedAccount",{enumerable:!0,get:function(){return r.default}});var r=i(e("./unconnected-account")),s=i(e("./invalid-custom-network")),a=e("./enums");function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/ducks/alerts/index.js"}],[7050,{"../../../shared/constants/alerts":5773,"./enums":7048,"@reduxjs/toolkit":3188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.openAlert=n.getNetworkName=n.getAlertState=n.dismissAlert=n.default=n.alertIsOpen=void 0;var r=e("@reduxjs/toolkit"),s=e("../../../shared/constants/alerts"),a=e("./enums");const i=s.AlertTypes.invalidCustomNetwork,o={state:a.ALERT_STATE.CLOSED,networkName:""},c=(0,r.createSlice)({name:i,initialState:o,reducers:{openAlert:(e,t)=>{e.state=a.ALERT_STATE.OPEN,e.networkName=t.payload},dismissAlert:e=>{e.state=a.ALERT_STATE.CLOSED,e.networkName=""}}}),{actions:u,reducer:l}=c;n.default=l;n.getAlertState=e=>e[i].state;n.getNetworkName=e=>e[i].networkName;n.alertIsOpen=e=>e[i].state!==a.ALERT_STATE.CLOSED;const{openAlert:d,dismissAlert:p}=u;n.dismissAlert=p,n.openAlert=d}}},{package:"$root$",file:"ui/ducks/alerts/invalid-custom-network.js"}],[7053,{"../../store/actions":8127,"../../store/background-connection":8128,"@metamask/bridge-status-controller":1407},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.submitBridgeTx=void 0;var r=e("@metamask/bridge-status-controller"),s=e("../../store/actions"),a=e("../../store/background-connection");n.submitBridgeTx=(e,t,n,i)=>async o=>{return o((c=r.BridgeStatusAction.SUBMIT_TX,u=[e,t,n,i],async e=>{const t=await(0,a.submitRequestToBackground)(c,u);return await(0,s.forceUpdateMetamaskState)(e),t}));var c,u}}}},{package:"$root$",file:"ui/ducks/bridge-status/actions.ts"}],[7054,{"../../../shared/lib/transactions-controller-utils":5899,"../../../shared/modules/Numeric":5906,"../../../shared/modules/selectors/networks":5934,"../../selectors/multichain-accounts/account-tree":8098,reselect:5308},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectReceivedSwapsTokenAmountFromTxMeta=n.selectIncomingBridgeHistory=n.selectBridgeHistoryItemForTxMetaId=n.selectBridgeHistoryForApprovalTxId=n.selectBridgeHistoryForAccountGroup=void 0;var r=e("reselect"),s=e("../../../shared/modules/Numeric"),a=e("../../../shared/modules/selectors/networks"),i=e("../../../shared/lib/transactions-controller-utils"),o=e("../../selectors/multichain-accounts/account-tree");const c=e=>e.metamask.txHistory,u=(0,r.createSelector)([(e,t)=>t,c],(e,t)=>e&&0!==e.length?Object.keys(t).reduce((n,r)=>{const s=t[r];return e.includes(s.account)&&(n[r]=s),n},{}):t),l=n.selectBridgeHistoryForAccountGroup=(0,r.createSelector)([c,o.getSelectedAccountGroup,e=>e],(e,t,n)=>{if(!t)return e;const r=(0,o.getInternalAccountsFromGroupById)(n,t).map(e=>e.address);return u(n,r)}),d=n.selectBridgeHistoryItemForTxMetaId=(0,r.createSelector)([c,(e,t)=>t],(e,t)=>t?e[t]:undefined);n.selectBridgeHistoryForApprovalTxId=(0,r.createSelector)([c,(e,t)=>t],(e,t)=>Object.values(e).find(e=>e.approvalTxId===t)),n.selectReceivedSwapsTokenAmountFromTxMeta=(0,r.createSelector)([d,(e,t,n)=>n,(e,t,n,r)=>r],(e,t,n)=>{if(!e)return null;const{quote:{destAsset:r},account:s}=e;return(0,i.getSwapsTokensReceivedFromTxMeta)(r.symbol,t,r.address,s,r.decimals,n,r.chainId)}),n.selectIncomingBridgeHistory=(0,r.createSelector)(l,a.getCurrentChainId,(e,t)=>Object.values(e).filter(e=>new s.Numeric(e.quote.destChainId,10).toPrefixedHexString()===t).sort((e,t)=>e.startTime&&t.startTime?t.startTime-e.startTime:0))}}},{package:"$root$",file:"ui/ducks/bridge-status/selectors.ts"}],[7055,{"../../../shared/lib/trace":5897,"../../../shared/modules/selectors/networks":5934,"../../store/actions":8127,"../../store/background-connection":8128,"./bridge":7056,"./utils":7058,"@metamask/bridge-controller":1369},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.restoreQuoteRequestFromState=n.resetInputFields=n.resetBridgeState=void 0,Object.defineProperty(n,"setEVMSrcNativeBalance",{enumerable:!0,get:function(){return c.setEVMSrcNativeBalance}}),n.setSortOrder=n.setSlippage=n.setSelectedQuote=n.setFromTokenInputValue=n.setFromToken=n.setFromChain=n.setEVMSrcTokenBalance=void 0,Object.defineProperty(n,"setSrcTokenExchangeRates",{enumerable:!0,get:function(){return c.setSrcTokenExchangeRates}}),n.setToToken=n.setToChainId=void 0,Object.defineProperty(n,"setTxAlerts",{enumerable:!0,get:function(){return c.setTxAlerts}}),n.updateQuoteRequestParams=n.trackUnifiedSwapBridgeEvent=n.setWasTxDeclined=void 0;var r=e("@metamask/bridge-controller"),s=e("../../../shared/lib/trace"),a=e("../../../shared/modules/selectors/networks"),i=e("../../store/actions"),o=e("../../store/background-connection"),c=e("./bridge"),u=e("./utils");const{setToChainId:l,setFromToken:d,setToToken:p,setFromTokenInputValue:m,resetInputFields:h,setSortOrder:f,setSelectedQuote:g,setWasTxDeclined:b,setSlippage:S,restoreQuoteRequestFromState:y}=c.bridgeSlice.actions;n.restoreQuoteRequestFromState=y,n.setSlippage=S,n.setWasTxDeclined=b,n.setSelectedQuote=g,n.setSortOrder=f,n.resetInputFields=h,n.setFromTokenInputValue=m,n.setToToken=p,n.setFromToken=d,n.setToChainId=l;const v=(e,...t)=>async n=>{await(0,o.submitRequestToBackground)(e,t),await(0,i.forceUpdateMetamaskState)(n)};n.resetBridgeState=()=>async e=>{e(h()),e(v(r.BridgeBackgroundAction.RESET_STATE))};n.trackUnifiedSwapBridgeEvent=(e,t)=>async n=>{await n(v(r.BridgeBackgroundAction.TRACK_METAMETRICS_EVENT,e,t))};n.updateQuoteRequestParams=(...[e,t])=>async n=>{await n(v(r.BridgeUserAction.UPDATE_QUOTE_PARAMS,e,t))};n.setEVMSrcTokenBalance=(e,t)=>async n=>{e&&((0,s.trace)({name:s.TraceName.BridgeBalancesUpdated,data:{srcChainId:(0,r.formatChainIdToCaip)(e.chainId),isNative:(0,r.isNativeAddress)(e.address)},startTime:Date.now()}),await n((0,c.setEVMSrcTokenBalance)({selectedAddress:t,tokenAddress:e.address,chainId:e.chainId})))};n.setFromChain=({chainId:e,token:t=null})=>async(n,s)=>{const o=(0,u.isNonEvmChain)(e);if(o)n((0,i.setActiveNetworkWithError)(e));else{const t=(0,r.formatChainIdToHex)(e),o=(0,a.selectDefaultNetworkClientIdsByChainId)(s())[t];o&&n((0,i.setActiveNetworkWithError)(o))}if(t)n(d(t));else if(o){const t=(0,r.getNativeAssetForChainId)(e);t&&n(d({...t,chainId:e}))}}}}},{package:"$root$",file:"ui/ducks/bridge/actions.ts"}],[7056,{"../../../shared/lib/trace":5897,"../../../shared/modules/bridge-utils/security-alerts-api.util":5909,"../../pages/bridge/utils/slippage-service":7348,"./utils":7058,"@metamask/bridge-controller":1369,"@reduxjs/toolkit":3188,"ethereumjs-util":4342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setTxAlerts=n.setSrcTokenExchangeRates=n.setEVMSrcTokenBalance=n.setEVMSrcNativeBalance=n.default=n.bridgeSlice=void 0;var r=e("@reduxjs/toolkit"),s=e("@metamask/bridge-controller"),a=e("ethereumjs-util"),i=e("../../../shared/modules/bridge-utils/security-alerts-api.util"),o=e("../../../shared/lib/trace"),c=e("../../pages/bridge/utils/slippage-service"),u=e("./utils");const l={toChainId:null,fromToken:null,toToken:null,fromTokenInputValue:null,fromTokenExchangeRate:null,fromTokenBalance:null,fromNativeBalance:null,sortOrder:s.SortOrder.COST_ASC,selectedQuote:null,wasTxDeclined:!1,slippage:c.SlippageValue.BridgeDefault,txAlert:null,txAlertStatus:s.RequestStatus.FETCHED},d=n.setSrcTokenExchangeRates=(0,r.createAsyncThunk)("bridge/setSrcTokenExchangeRates",u.getTokenExchangeRate),p=n.setTxAlerts=(0,r.createAsyncThunk)("bridge/setTxAlerts",i.fetchTxAlerts),m=async({selectedAddress:e,tokenAddress:t,chainId:n})=>{var r;return(0,s.isNonEvmChainId)(n)||!e?null:null===(r=await(0,s.calcLatestSrcBalance)(global.ethereumProvider,e,t,(0,s.formatChainIdToHex)(n)))||void 0===r?void 0:r.toString()},h=n.setEVMSrcNativeBalance=(0,r.createAsyncThunk)("bridge/setEVMSrcNativeBalance",async({selectedAddress:e,chainId:t})=>await m({selectedAddress:e,tokenAddress:(0,a.zeroAddress)(),chainId:t})),f=n.setEVMSrcTokenBalance=(0,r.createAsyncThunk)("bridge/setEVMSrcTokenBalance",m),g=n.bridgeSlice=(0,r.createSlice)({name:"bridge",initialState:{...l},reducers:{setToChainId:(e,{payload:t})=>{e.toChainId=t?(0,s.formatChainIdToCaip)(t):null,e.toToken=null},setFromToken:(e,{payload:t})=>{var n,r,a,i,o;e.fromToken=(0,u.toBridgeToken)(t),e.fromTokenBalance=null,e.fromTokenInputValue=l.fromTokenInputValue,e.fromTokenExchangeRate=l.fromTokenExchangeRate,e.txAlertStatus=l.txAlertStatus,e.txAlert=l.txAlert,null!==(n=e.fromToken)&&void 0!==n&&n.assetId&&null!==(r=e.toToken)&&void 0!==r&&r.assetId&&(null===(a=e.fromToken.assetId)||void 0===a?void 0:a.toLowerCase())===(null===(i=e.toToken.assetId)||void 0===i?void 0:i.toLowerCase())&&(e.toToken=null),null!==(o=e.fromToken)&&void 0!==o&&o.chainId&&(0,s.isBitcoinChainId)(e.fromToken.chainId)&&e.toChainId&&(0,s.isBitcoinChainId)(e.toChainId)&&(e.toChainId=null,e.toToken=null)},setToToken:(e,{payload:t})=>{var n;const r=(0,u.toBridgeToken)(t);e.toToken=r?{...r,address:r.address||(null===(n=(0,s.getNativeAssetForChainId)(r.chainId))||void 0===n?void 0:n.address)}:r,null==r||!r.chainId||e.toChainId&&(0,s.formatChainIdToCaip)(r.chainId)===(0,s.formatChainIdToCaip)(e.toChainId)||(e.toChainId=(0,s.formatChainIdToCaip)(r.chainId))},setFromTokenInputValue:(e,{payload:t})=>{e.fromTokenInputValue=t},resetInputFields:()=>({...l}),restoreQuoteRequestFromState:(e,{payload:t})=>{e.fromToken=(0,u.toBridgeToken)(t.srcAsset),e.toToken=(0,u.toBridgeToken)(t.destAsset),e.toChainId=(0,s.formatChainIdToCaip)(t.destChainId)},setSortOrder:(e,t)=>{e.sortOrder=t.payload},setSelectedQuote:(e,t)=>{e.selectedQuote=t.payload},setWasTxDeclined:(e,t)=>{e.wasTxDeclined=t.payload},setSlippage:(e,t)=>{e.slippage=t.payload}},extraReducers:e=>{e.addCase(d.pending,e=>{e.fromTokenExchangeRate=null}),e.addCase(d.fulfilled,(e,t)=>{e.fromTokenExchangeRate=t.payload??null}),e.addCase(p.pending,e=>{e.txAlertStatus=s.RequestStatus.LOADING}),e.addCase(p.fulfilled,(e,t)=>{e.txAlert=t.payload,e.txAlertStatus=s.RequestStatus.FETCHED}),e.addCase(p.rejected,(e,t)=>{"AbortError"!==t.error.name&&(e.txAlert=l.txAlert,e.txAlertStatus=s.RequestStatus.ERROR)}),e.addCase(f.fulfilled,(e,t)=>{var n,r;var a;!(0,s.isCrossChain)(t.meta.arg.chainId,null===(n=e.fromToken)||void 0===n?void 0:n.chainId)&&null!==(r=e.fromToken)&&void 0!==r&&r.address&&t.meta.arg.tokenAddress!==e.fromToken.address||(e.fromTokenBalance=(null===(a=t.payload)||void 0===a?void 0:a.toString())??null);(0,o.endTrace)({name:o.TraceName.BridgeBalancesUpdated})}),e.addCase(f.rejected,e=>{e.fromTokenBalance=null,(0,o.endTrace)({name:o.TraceName.BridgeBalancesUpdated})}),e.addCase(h.fulfilled,(e,t)=>{var n;e.fromNativeBalance=(null===(n=t.payload)||void 0===n?void 0:n.toString())??null,(0,o.endTrace)({name:o.TraceName.BridgeBalancesUpdated})}),e.addCase(h.rejected,e=>{e.fromNativeBalance=null,(0,o.endTrace)({name:o.TraceName.BridgeBalancesUpdated})})}});n.default=g.reducer}}},{package:"$root$",file:"ui/ducks/bridge/bridge.ts"}],[7057,{"../../../shared/constants/bridge":5777,"../../../shared/constants/hardware-wallets":5785,"../../../shared/constants/multichain/assets":5793,"../../../shared/constants/network":5795,"../../../shared/lib/asset-utils":5824,"../../../shared/lib/swaps-utils":5894,"../../../shared/modules/Numeric":5906,"../../../shared/modules/selectors":5932,"../../../shared/modules/selectors/util":5938,"../../pages/bridge/utils/quote":7347,"../../selectors/accounts":8083,"../../selectors/assets":8086,"../../selectors/multichain":8103,"../../selectors/multichain-accounts/account-tree":8098,"../../selectors/multichain/networks":8105,"../../selectors/remote-feature-flags":8111,"../../selectors/selectors":8114,"./utils":7058,"@metamask/bridge-controller":1369,"@metamask/keyring-api":2193,"@metamask/notification-services-controller/push-services":2383,"@metamask/utils":3116,"bignumber.js":3972,lodash:4838,reselect:5308},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectNoFeeAssets=n.needsTronAccountForDestination=n.needsSolanaAccountForDestination=n.needsBitcoinAccountForDestination=n.getWasTxDeclined=n.getWarningLabels=n.getValidationErrors=n.getValidatedFromValue=n.getTxAlerts=n.getTopAssetsFromFeatureFlags=n.getToToken=n.getToChains=n.getToChain=n.getToAccounts=n.getSlippage=n.getQuoteRequest=n.getQuoteRefreshRate=n.getPriceImpactThresholds=n.getLastSelectedChainId=n.getIsToOrFromNonEvm=n.getIsSwap=n.getIsStxEnabled=n.getIsSolanaSwap=n.getIsQuoteExpired=n.getIsGasIncluded=n.getHardwareWalletName=n.getFromTokenConversionRate=n.getFromTokenBalance=n.getFromToken=n.getFromChains=n.getFromChain=n.getFromAmountInCurrency=n.getFromAmount=n.getFromAccount=n.getBridgeSortOrder=n.getBridgeQuotes=n.getAccountGroupNameByInternalAccount=void 0;var r=e("@metamask/bridge-controller"),s=e("@metamask/keyring-api"),a=e("lodash"),i=e("reselect"),o=e("bignumber.js"),c=e("@metamask/notification-services-controller/push-services"),u=e("@metamask/utils"),l=e("../../selectors/selectors"),d=e("../../../shared/constants/bridge"),p=e("../../../shared/modules/selectors/util"),m=e("../../../shared/constants/network"),h=e("../../selectors/multichain"),f=e("../../selectors/assets"),g=e("../../../shared/constants/hardware-wallets"),b=e("../../../shared/lib/asset-utils"),S=e("../../../shared/constants/multichain/assets"),y=e("../../../shared/modules/Numeric"),v=e("../../../shared/modules/selectors"),T=e("../../../shared/lib/swaps-utils"),k=e("../../pages/bridge/utils/quote"),w=e("../../selectors/accounts"),_=e("../../selectors/remote-feature-flags"),I=e("../../selectors/multichain-accounts/account-tree"),C=e("../../selectors/multichain/networks"),E=e("./utils");const A=(e,t,n)=>(0,r.isSolanaChainId)(e)?(0,r.isNativeAddress)(t)?S.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19.SOL:n??t:(0,r.isBitcoinChainId)(e)?S.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19.BTC:(0,E.isTronChainId)(e)&&(0,r.isNativeAddress)(t)?S.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19.TRX:n??t,M=e=>{var t;const n=(null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.accounts)||{};return Object.values(n).some(e=>{const{DataAccount:t}=s.SolAccountType;return Boolean(e&&e.type===t)})},N=e=>{var t;const n=(null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.accounts)||{};return Object.values(n).some(e=>{const{P2wpkh:t}=s.BtcAccountType;return Boolean(e&&e.type===t)})},P=e=>{var t;const n=(null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.accounts)||{};return Object.values(n).some(e=>{const{Eoa:t}=s.TrxAccountType;return Boolean(e&&e.type===t)})},O=(0,p.createDeepEqualSelector)([h.getMultichainNetworkConfigurationsByChainId],e=>d.ALLOWED_BRIDGE_CHAIN_IDS.reduce((t,n)=>(e[n]&&(t[(0,r.formatChainIdToCaip)(n)]=e[n]),t),{})),R=(0,p.createDeepEqualSelector)([e=>(0,_.getRemoteFeatureFlags)(e).bridgeConfig],e=>(0,r.selectBridgeFeatureFlags)({remoteFeatureFlags:{bridgeConfig:e}})),x=(n.getPriceImpactThresholds=(0,p.createDeepEqualSelector)([e=>R(e).priceImpactThreshold],e=>e),n.getFromChains=(0,p.createDeepEqualSelector)([O,e=>R(e).chains,e=>M(e),e=>N(e),e=>P(e)],(e,t,n,s,a)=>{const i=[];return Object.entries(t).forEach(([t,{isActiveSrc:o}])=>{if(!o)return;const c=!(0,r.isSolanaChainId)(t)||n,u=!(0,r.isBitcoinChainId)(t)||s,l=!(0,E.isTronChainId)(t)||a,d=e[(0,r.formatChainIdToCaip)(t)];[c,u,l,d].every(Boolean)&&i.push(d)}),i})),D=(n.getLastSelectedChainId=(0,i.createSelector)([C.getAllEnabledNetworksForAllNamespaces,x],(e,t)=>{var n;return e.length>1?m.CHAIN_IDS.MAINNET:null===(n=t.find(({chainId:t})=>t===e[0]))||void 0===n?void 0:n.chainId}),n.getFromChain=(0,p.createDeepEqualSelector)([x,h.getMultichainProviderConfig],(e,t)=>e.find(({chainId:e})=>e===(null==t?void 0:t.chainId)))),B=n.getToChains=(0,p.createDeepEqualSelector)([O,R],(e,t)=>(0,a.uniqBy)([...Object.values(e),...m.FEATURED_RPCS],"chainId").filter(({chainId:e})=>{var n;return null==t||null===(n=t.chains)||void 0===n||null===(n=n[(0,r.formatChainIdToCaip)(e)])||void 0===n?void 0:n.isActiveDest}));n.getTopAssetsFromFeatureFlags=(e,t)=>{var n;if(!t)return undefined;const s=R(e);return null==s||null===(n=s.chains[(0,r.formatChainIdToCaip)(t)])||void 0===n?void 0:n.topAssets};const U=(0,p.createDeepEqualSelector)([e=>{var t;return null===(t=D(e))||void 0===t?void 0:t.chainId},e=>R(e).bip44DefaultPairs],(e,t)=>{var n;if(!e)return null;const{namespace:s}=(0,u.parseCaipChainId)((0,r.formatChainIdToCaip)(e)),a=null==t||null===(n=t[s])||void 0===n?void 0:n.standard;return a?Object.entries(a).flat():null}),L=(0,i.createSelector)([e=>{var t;return null===(t=U(e))||void 0===t?void 0:t[1]}],e=>{var t;return e?null===(t=(0,u.parseCaipAssetType)(e))||void 0===t?void 0:t.chainId:null}),F=n.getToChain=(0,i.createSelector)([D,B,e=>{var t;return null===(t=e.bridge)||void 0===t?void 0:t.toChainId},L],(e,t,n,s)=>n?t.find(({chainId:e})=>e===n||(0,r.formatChainIdToCaip)(e)===n):e&&(0,r.isBitcoinChainId)(e.chainId)?t.find(({chainId:e})=>(0,r.formatChainIdToCaip)(e)===s):e),$=n.getFromToken=(0,i.createSelector)([e=>e.bridge.fromToken,e=>{var t;return null===(t=D(e))||void 0===t?void 0:t.chainId}],(e,t)=>{if(!t)return null;if(null!=e&&e.address)return e;const{iconUrl:n,...s}=(0,r.getNativeAssetForChainId)(t),a=(0,E.toBridgeToken)(s);return a?{...a,chainId:(0,r.formatChainIdToCaip)(t)}:a}),j=(n.getToToken=(0,i.createSelector)([$,F,e=>e.bridge.toToken],(e,t,n)=>{if(!t||!e)return null;if(n)return n;const s=(0,E.getDefaultToToken)((0,r.formatChainIdToCaip)(t.chainId),e);return s?(0,E.toBridgeToken)(s):null}),e=>e.bridge.fromTokenInputValue);n.getFromAmount=j;const W=n.getAccountGroupNameByInternalAccount=(0,i.createSelector)([I.getAllAccountGroups,(e,t)=>t],(e,t)=>{var n,r;return null!=t&&t.id?(null===(n=e.find(({accounts:e})=>e.includes(t.id)))||void 0===n?void 0:n.metadata.name)??(null==t||null===(r=t.metadata)||void 0===r?void 0:r.name):null}),H=n.getFromAccount=(0,i.createSelector)([e=>{var t;return null===(t=D(e))||void 0===t?void 0:t.chainId},e=>e,w.getSelectedInternalAccount],(e,t,n)=>e?(0,I.getInternalAccountBySelectedAccountGroupAndCaip)(t,(0,r.formatChainIdToCaip)(e))??n:null),G=(n.getToAccounts=(0,i.createSelector)([F,I.getWalletsWithAccounts,e=>e],(e,t,n)=>{if(!e)return[];return(0,w.getInternalAccountsByScope)(n,(0,r.formatChainIdToCaip)(e.chainId)).map(e=>{var r,s,a;return{...e,isExternal:!1,walletName:"mnemonic"===(null===(r=e.options.entropy)||void 0===r?void 0:r.type)?null===(s=t[`entropy:${e.options.entropy.id}`])||void 0===s?void 0:s.metadata.name:null===(a=t[`keyring:${e.metadata.keyring.type}`])||void 0===a?void 0:a.metadata.name,displayName:W(n,e)??e.metadata.name??e.address}})}),(0,i.createSelector)([D,e=>e.bridge.fromNativeBalance,h.getMultichainBalances,e=>{var t;return null===(t=H(e))||void 0===t?void 0:t.id}],(e,t,n,s)=>{if(!e||!s)return null;const{chainId:a}=e,{decimals:i,address:o,assetId:c}=(0,r.getNativeAssetForChainId)(a);if((0,E.isNonEvmChain)(a)){var u;const e=A(a,o,c);return(null==n||null===(u=n[s])||void 0===u||null===(u=u[e])||void 0===u?void 0:u.amount)??null}return t?y.Numeric.from(t,10).shiftedBy(i).toString():null})),Y=n.getFromTokenBalance=(0,i.createSelector)([$,D,e=>e.bridge.fromTokenBalance,h.getMultichainBalances,H],(e,t,n,r,s)=>{if(!e||!t||!s)return null;const{id:a}=s,{chainId:i,decimals:o,address:c,assetId:u}=e;if((0,E.isNonEvmChain)(i)){var l;const t=A(i,c,u);return(null==r||null===(l=r[a])||void 0===l||null===(l=l[t])||void 0===l?void 0:l.amount)??e.balance??null}return n?y.Numeric.from(n,10).shiftedBy(o).toString():null});n.getSlippage=e=>e.bridge.slippage;const K=e=>{const{quoteRequest:t}=e.metamask;return t};n.getQuoteRequest=K;n.getQuoteRefreshRate=(0,i.createSelector)([R,D],(e,t)=>{var n;return(t&&(null===(n=e.chains[(0,r.formatChainIdToCaip)(t.chainId)])||void 0===n?void 0:n.refreshRate))??e.refreshRate});n.getBridgeSortOrder=e=>e.bridge.sortOrder;const V=n.getFromTokenConversionRate=(0,i.createSelector)([D,e=>e.metamask.marketData,f.getAssetsRates,$,h.getMultichainCoinRates,e=>e.metamask.currencyRates,e=>e.bridge.fromTokenExchangeRate],(e,t,n,s,a,i,o)=>{if(null!=e&&e.chainId&&s){var c,u,l,d,p,m,h,f,g;const v=null===(c=(0,r.getNativeAssetForChainId)(e.chainId))||void 0===c?void 0:c.assetId,T=(0,b.toAssetId)(s.address,e.chainId),k=(0,E.isNonEvmChain)(e.chainId)?Number((null==a||null===(u=a[null===(l=e.nativeCurrency)||void 0===l?void 0:l.toLowerCase()])||void 0===u?void 0:u.conversionRate)??(null==n||null===(d=n[v])||void 0===d?void 0:d.rate)??null):(null===(p=i[e.nativeCurrency])||void 0===p?void 0:p.conversionRate)??null,w=(0,E.isNonEvmChain)(e.chainId)?Number((null==a||null===(m=a[null===(h=e.nativeCurrency)||void 0===h?void 0:h.toLowerCase()])||void 0===m?void 0:m.usdConversionRate)??(null==n||null===(f=n[v])||void 0===f?void 0:f.rate)??null):(null===(g=i[e.nativeCurrency])||void 0===g?void 0:g.usdConversionRate)??null;if((0,r.isNativeAddress)(s.address))return{valueInCurrency:k,usd:w};if((0,E.isNonEvmChain)(e.chainId)&&v&&T){var S,y;const e=Number((null==n||null===(S=n[v])||void 0===S?void 0:S.rate)??null),t=(0,E.tokenPriceInNativeAsset)(Number((null==n||null===(y=n[T])||void 0===y?void 0:y.rate)??o??null),e);return(0,E.exchangeRatesFromNativeAndCurrencyRates)(t,Number(k),Number(w))}const _=(0,E.exchangeRateFromMarketData)(e.chainId,s.address,t)??(0,E.tokenPriceInNativeAsset)(o,k);return(0,E.exchangeRatesFromNativeAndCurrencyRates)(_,k,w)}return(0,E.exchangeRatesFromNativeAndCurrencyRates)()});n.getIsQuoteExpired=({metamask:e},t)=>(0,r.selectIsQuoteExpired)(e,{},t);const q=n.getBridgeQuotes=(0,i.createSelector)([({metamask:e})=>e,({bridge:{sortOrder:e}})=>e,({bridge:{selectedQuote:e}})=>e],(e,t,n)=>(0,r.selectBridgeQuotes)(e,{sortOrder:t,selectedQuote:n})),Q=(n.getIsSwap=(0,p.createDeepEqualSelector)(K,({srcChainId:e,destChainId:t})=>Boolean(e&&t&&(0,r.formatChainIdToCaip)(e)===(0,r.formatChainIdToCaip)(t))),n.getValidatedFromValue=(0,i.createSelector)([$,j],(e,t)=>t&&null!=e&&e.decimals?(0,T.calcTokenValue)((0,k.safeAmountForCalc)(t),e.decimals).toFixed().split(".")[0]:undefined)),z=(0,i.createSelector)([$,Q],(e,t)=>t&&null!=e&&e.decimals?(0,c.calcTokenAmount)(t,Number(e.decimals)).toString():undefined),X=(n.getFromAmountInCurrency=(0,i.createSelector)([$,D,z,V],(e,t,n,{valueInCurrency:r,usd:s})=>null!=e&&e.symbol&&null!=t&&t.chainId&&n&&r?{valueInCurrency:new o.BigNumber(n).mul(new o.BigNumber(r.toString()??1)),usd:new o.BigNumber(n).mul(new o.BigNumber((null==s?void 0:s.toString())??1))}:{valueInCurrency:new o.BigNumber(0),usd:new o.BigNumber(0)}),e=>e.bridge.txAlert);n.getTxAlerts=X;const J=n.getValidationErrors=(0,p.createDeepEqualSelector)([q,z,$,j,({metamask:e})=>(0,r.selectMinimumBalanceForRentExemptionInSOL)(e),K,X,G,Y,({bridge:{txAlertStatus:e}})=>e],({activeQuote:e,quotesLastFetchedMs:t,isLoading:n,quotesRefreshCount:s},a,i,c,u,l,d,p,m,h)=>{var f,g,b;const{gasIncluded:S,gasIncluded7702:y,gasSponsored:v}=(null==e?void 0:e.quote)??{},T=y||S||v,k=l.srcChainId??(null==e||null===(f=e.quote)||void 0===f?void 0:f.srcChainId),w=k&&(0,r.isSolanaChainId)(k)?u:"0";return{isTxAlertPresent:Boolean(d),isTxAlertLoading:h===r.RequestStatus.LOADING,isNoQuotesAvailable:Boolean(!e&&(0,r.isValidQuoteRequest)(l)&&t&&!n&&s>0),isInsufficientGasBalance:Boolean(p&&!e&&a&&i&&!T&&((0,r.isNativeAddress)(i.address)?new o.BigNumber(p).sub(w).lte(a):new o.BigNumber(p).lte(0))),isInsufficientGasForQuote:Boolean(p&&e&&i&&c&&!T&&((0,r.isNativeAddress)(i.address)?new o.BigNumber(p).sub(e.totalNetworkFee.amount).sub(e.sentAmount.amount).sub(w).lte(0):new o.BigNumber(p).lte(e.totalNetworkFee.amount))),isInsufficientBalance:!(!a||!m||isNaN(Number(m)))&&new o.BigNumber(m).lt(a),isEstimatedReturnLow:!!(null!=e&&null!==(g=e.sentAmount)&&void 0!==g&&g.valueInCurrency&&null!=e&&null!==(b=e.adjustedReturn)&&void 0!==b&&b.valueInCurrency&&c)&&new o.BigNumber(e.adjustedReturn.valueInCurrency).lt(new o.BigNumber(1-r.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE).times(e.sentAmount.valueInCurrency))}});n.getWarningLabels=(0,i.createSelector)([J],({isEstimatedReturnLow:e,isNoQuotesAvailable:t,isInsufficientGasBalance:n,isInsufficientGasForQuote:r,isInsufficientBalance:s})=>{const a=[];return e&&a.push("low_return"),t&&a.push("no_quotes"),n&&a.push("insufficient_gas_balance"),r&&a.push("insufficient_gas_for_selected_quote"),s&&a.push("insufficient_balance"),a});n.getWasTxDeclined=e=>e.bridge.wasTxDeclined;n.needsSolanaAccountForDestination=(0,p.createDeepEqualSelector)([F,e=>M(e)],(e,t)=>{if(!e)return!1;return(0,r.isSolanaChainId)(e.chainId)&&!t}),n.needsBitcoinAccountForDestination=(0,p.createDeepEqualSelector)([F,e=>N(e)],(e,t)=>{if(!e)return!1;return(0,r.isBitcoinChainId)(e.chainId)&&!t}),n.needsTronAccountForDestination=(0,p.createDeepEqualSelector)([F,e=>P(e)],(e,t)=>{if(!e)return!1;return(0,E.isTronChainId)(e.chainId)&&!t}),n.getIsToOrFromNonEvm=(0,i.createSelector)([D,F],(e,t)=>{if(null==e||!e.chainId||null==t||!t.chainId)return!1;const n=(0,r.formatChainIdToCaip)(e.chainId),s=(0,r.formatChainIdToCaip)(t.chainId),{namespace:a}=(0,u.parseCaipChainId)(n),{namespace:i}=(0,u.parseCaipChainId)(s);return a!==i}),n.getIsSolanaSwap=(0,i.createSelector)([D,F],(e,t)=>{if(null==e||!e.chainId||null==t||!t.chainId)return!1;const n=(0,r.isSolanaChainId)(e.chainId),s=(0,r.isSolanaChainId)(t.chainId);return n&&s});n.getHardwareWalletName=e=>{switch((0,l.getHardwareWalletType)(e)){case g.HardwareKeyringType.ledger:return g.HardwareKeyringNames.ledger;case g.HardwareKeyringType.trezor:return g.HardwareKeyringNames.trezor;case g.HardwareKeyringType.lattice:return g.HardwareKeyringNames.lattice;case g.HardwareKeyringType.oneKey:return g.HardwareKeyringNames.oneKey;default:return undefined}};n.selectNoFeeAssets=(0,i.createSelector)([R,(e,t)=>t],(e,t)=>{var n;if(!t)return[];const s=(0,r.formatChainIdToCaip)(t);return(null==e||null===(n=e.chains)||void 0===n||null===(n=n[s])||void 0===n?void 0:n.noFeeAssets)??[]});const Z=(0,i.createSelector)([e=>{var t;return null===(t=D(e))||void 0===t?void 0:t.chainId},(e,t)=>t],(e,t)=>!!e&&t),ee=n.getIsStxEnabled=(0,i.createSelector)([e=>{var t;return null===(t=D(e))||void 0===t?void 0:t.chainId},e=>e],(e,t)=>(0,v.getIsSmartTransaction)(t,e));n.getIsGasIncluded=(0,i.createSelector)([ee,Z],(e,t)=>e&&t)}}},{package:"$root$",file:"ui/ducks/bridge/selectors.ts"}],[7058,{"../../../shared/constants/bridge":5777,"../../../shared/constants/multichain/assets":5793,"../../../shared/lib/asset-utils":5824,"../../../shared/modules/Numeric":5906,"../../../shared/modules/conversion.utils":5913,"../../pages/confirmations/utils/network":7791,"../../pages/swaps/swaps.util":8071,"@metamask/bridge-controller":1369,"@metamask/controller-utils":1449,"@metamask/utils":3116,"bignumber.js":3972},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNetworkAdded=n.getTxGasEstimates=n.getTokenExchangeRate=n.getNativeTokenName=n.getHexMaxGasLimit=n.getDefaultToToken=n.exchangeRatesFromNativeAndCurrencyRates=n.exchangeRateFromMarketData=n.bpsToPercentage=void 0,Object.defineProperty(n,"isNonEvmChain",{enumerable:!0,get:function(){return a.isNonEvmChainId}}),Object.defineProperty(n,"isTronChainId",{enumerable:!0,get:function(){return m.isTronChainId}}),n.tokenPriceInNativeAsset=n.tokenAmountToCurrency=n.toBridgeToken=n.isTronEnergyOrBandwidthResource=void 0;var r=e("@metamask/utils"),s=e("bignumber.js"),a=e("@metamask/bridge-controller"),i=e("@metamask/controller-utils"),o=e("../../../shared/modules/conversion.utils"),c=e("../../../shared/modules/Numeric"),u=e("../../pages/swaps/swaps.util"),l=e("../../../shared/lib/asset-utils"),d=e("../../../shared/constants/bridge"),p=e("../../../shared/constants/multichain/assets"),m=e("../../pages/confirmations/utils/network");n.isTronEnergyOrBandwidthResource=(e,t)=>{var n;return Boolean(null==e||null===(n=e.toString())||void 0===n?void 0:n.includes("tron:"))&&p.TRON_RESOURCE_SYMBOLS_SET.has(null==t?void 0:t.toLowerCase())};n.getNativeTokenName=e=>{try{var t;return null===(t=(0,a.getNativeAssetForChainId)(e))||void 0===t?void 0:t.name}catch{return undefined}};n.getHexMaxGasLimit=e=>new c.Numeric(new s.BigNumber(e).toString(),10).toPrefixedHexString();n.bpsToPercentage=e=>{if(e===undefined||null===e)return undefined;const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?undefined:(t/100).toString()};n.getTxGasEstimates=async({networkAndAccountSupports1559:e,networkGasFeeEstimates:t,txParams:n,hexChainId:r})=>{if(e){var s;const{estimatedBaseFee:e="0"}=t,a=(0,o.decGWEIToHexWEI)(e);return await(0,u.getTransaction1559GasFeeEstimates)({...n,chainId:r,gasLimit:null===(s=n.gasLimit)||void 0===s?void 0:s.toString()},a,r)}return{baseAndPriorityFeePerGas:undefined,maxFeePerGas:undefined,maxPriorityFeePerGas:undefined}};n.getTokenExchangeRate=async e=>{const{chainId:t,tokenAddress:n,currency:r,signal:s}=e,o=await(async(e,t,n,...r)=>{const s=r.map(t=>(0,l.toAssetId)(t,(0,a.formatChainIdToCaip)(e))).filter(Boolean);if(0===s.length)return{};const o=`https://price.api.cx.metamask.io/v3/spot-prices?${new URLSearchParams({assetIds:s.join(","),includeMarketData:"true",vsCurrency:t})}`,c=await(0,i.handleFetch)(o,{method:"GET",headers:{"X-Client-Id":a.BridgeClientId.EXTENSION},signal:n});return Object.entries(c).reduce((e,[t,n])=>(e[t]=n.price,e),{})})(t,r,s,n),c=(0,l.toAssetId)(n,(0,a.formatChainIdToCaip)(t));return c?null==o?void 0:o[c]:undefined};n.exchangeRateFromMarketData=(e,t,n)=>{var s;return(0,r.isStrictHexString)(t)&&(0,r.isStrictHexString)(e)?null==n||null===(s=n[e])||void 0===s||null===(s=s[t])||void 0===s?void 0:s.price:undefined};n.tokenAmountToCurrency=(e,t)=>new c.Numeric(e,10).applyConversionRate(new s.BigNumber(t.toString(),10)).toNumber();n.tokenPriceInNativeAsset=(e,t)=>e&&t?e/t:null;n.exchangeRatesFromNativeAndCurrencyRates=(e,t,n)=>({valueInCurrency:e&&t?e*t:null,usd:e&&n?e*n:null});n.isNetworkAdded=(e,t)=>e.some(e=>e.chainId===t);const h=e=>{if(!e)return null;const t=(0,a.formatChainIdToCaip)(e.chainId),n=e.assetId??(0,l.toAssetId)(e.address,t),r=e.image??e.iconUrl??e.icon;return{...e,balance:e.balance??"0",chainId:e.chainId,image:(n?(0,l.getAssetImageUrl)(n,t):r??"")??"",assetId:n}};n.toBridgeToken=h;const f=(e,t)=>{const{assetId:n,...r}=e;return h({...r,chainId:t})};n.getDefaultToToken=(e,t)=>{const n=d.BRIDGE_CHAINID_COMMON_TOKEN_PAIR[e];if(n){var r;if(t.chainId&&(0,a.isBitcoinChainId)(t.chainId)){const t=(0,a.getNativeAssetForChainId)(e);if(t)return f(t,e)}if((0,a.isNativeAddress)(t.address))return f(n,e);if((null===(r=t.address)||void 0===r?void 0:r.toLowerCase())===n.address.toLowerCase()){const t=(0,a.getNativeAssetForChainId)(e);if(t)return f(t,e)}return f(n,e)}const s=(0,a.getNativeAssetForChainId)(e);return s?f(s,e):null}}}},{package:"$root$",file:"ui/ducks/bridge/utils.ts"}],[7059,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.clearAlerts=function(e){return{type:"CLEAR_ALERTS",ownerId:e}},n.default=function(e=r,t){if(t.ownerId===undefined)return e;switch(t.type){case"UPDATE_ALERTS":return{...e,alerts:{...e.alerts,[t.ownerId]:t.alerts}};case"SET_ALERT_CONFIRMED":return{...e,confirmed:{...e.confirmed,[t.ownerId]:{...e.confirmed[t.ownerId],[t.alertKey]:t.isConfirmed}}};case"CLEAR_ALERTS":return{...e,alerts:{...e.alerts,[t.ownerId]:[]},confirmed:{...e.confirmed,[t.ownerId]:{}}};default:return e}},n.setAlertConfirmed=function(e,t,n){return{type:"SET_ALERT_CONFIRMED",ownerId:e,alertKey:t,isConfirmed:n}},n.updateAlerts=function(e,t){return{type:"UPDATE_ALERTS",alerts:t,ownerId:e}};const r={alerts:{},confirmed:{}}}}},{package:"$root$",file:"ui/ducks/confirm-alerts/confirm-alerts.ts"}],[7064,{"../../helpers/constants/routes":7088,"@reduxjs/toolkit":3188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setRedirectAfterDefaultPage=n.pageChanged=n.getRedirectAfterDefaultPage=n.getMostRecentOverviewPage=n.default=n.clearRedirectAfterDefaultPage=void 0;var r=e("@reduxjs/toolkit"),s=e("../../helpers/constants/routes");const a={mostRecentOverviewPage:s.DEFAULT_ROUTE,redirectAfterDefaultPage:null},i="history",o=(0,r.createSlice)({name:i,initialState:a,reducers:{pageChanged:(e,t)=>{const n=t.payload;var r;(n===s.DEFAULT_ROUTE||n.startsWith(s.ASSET_ROUTE))&&(e.mostRecentOverviewPage=n,n===s.DEFAULT_ROUTE&&null!==(r=e.redirectAfterDefaultPage)&&void 0!==r&&r.shouldRedirect&&(e.redirectAfterDefaultPage.shouldRedirect=!1))},setRedirectAfterDefaultPage:(e,t)=>{const{path:n,address:r}=t.payload;e.redirectAfterDefaultPage={path:n,shouldRedirect:!0,address:r}},clearRedirectAfterDefaultPage:e=>{e.redirectAfterDefaultPage=null}}}),{actions:c,reducer:u}=o;n.default=u;n.getMostRecentOverviewPage=e=>e[i].mostRecentOverviewPage;n.getRedirectAfterDefaultPage=e=>e[i].redirectAfterDefaultPage;const{pageChanged:l,setRedirectAfterDefaultPage:d,clearRedirectAfterDefaultPage:p}=c;n.clearRedirectAfterDefaultPage=p,n.setRedirectAfterDefaultPage=d,n.pageChanged=l}}},{package:"$root$",file:"ui/ducks/history/history.js"}],[7065,{"../../shared/constants/alerts":5773,"./alerts":7049,"./app/app":7052,"./bridge/bridge":7056,"./confirm-alerts/confirm-alerts":7059,"./confirm-transaction/confirm-transaction.duck":7060,"./domains":7061,"./gas/gas.duck":7063,"./history/history":7064,"./locale/locale":7066,"./metamask/metamask":7067,"./ramps/ramps":7070,"./rewards":7071,"./send/send":7076,"./smart-accounts/smart-accounts":7078,"./swaps/swaps":7079,redux:5300},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("redux"),s=e("../../shared/constants/alerts"),a=v(e("./metamask/metamask")),i=v(e("./locale/locale")),o=v(e("./send/send")),c=v(e("./domains")),u=v(e("./app/app")),l=v(e("./confirm-transaction/confirm-transaction.duck")),d=v(e("./gas/gas.duck")),p=e("./alerts"),m=v(e("./swaps/swaps")),h=v(e("./bridge/bridge")),f=v(e("./history/history")),g=v(e("./ramps/ramps")),b=v(e("./confirm-alerts/confirm-alerts")),S=v(e("./smart-accounts/smart-accounts")),y=v(e("./rewards"));function v(e){return e&&e.__esModule?e:{default:e}}n.default=(0,r.combineReducers)({[s.AlertTypes.invalidCustomNetwork]:p.invalidCustomNetwork,[s.AlertTypes.unconnectedAccount]:p.unconnectedAccount,activeTab:e=>e===undefined?null:e,metamask:a.default,appState:u.default,DNS:c.default,history:f.default,send:o.default,confirmAlerts:b.default,confirmTransaction:l.default,swaps:m.default,ramps:g.default,bridge:h.default,gas:d.default,localeMessages:i.default,smartAccounts:S.default,rewards:y.default})}}},{package:"$root$",file:"ui/ducks/index.js"}],[7068,{"../../../shared/constants/bridge":5777,"../../../shared/constants/multichain/networks":5794,"../../../shared/constants/network":5795},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.defaultBuyableChains=void 0;var r=e("../../../shared/constants/bridge"),s=e("../../../shared/constants/multichain/networks"),a=e("../../../shared/constants/network");n.defaultBuyableChains=[{active:!0,chainId:s.MultichainNetworks.BITCOIN,chainName:s.MULTICHAIN_NETWORK_TO_NICKNAME[s.MultichainNetworks.BITCOIN],shortName:r.NETWORK_TO_SHORT_NETWORK_NAME_MAP[s.MultichainNetworks.BITCOIN],nativeTokenSupported:!0},{active:!0,chainId:s.MultichainNetworks.SOLANA,chainName:s.MULTICHAIN_NETWORK_TO_NICKNAME[s.MultichainNetworks.SOLANA],shortName:r.NETWORK_TO_SHORT_NETWORK_NAME_MAP[s.MultichainNetworks.SOLANA],nativeTokenSupported:!0},{active:!0,chainId:1,chainName:a.MAINNET_DISPLAY_NAME,shortName:"Ethereum",nativeTokenSupported:!0},{active:!0,chainId:10,chainName:a.OPTIMISM_DISPLAY_NAME,shortName:"Optimism",nativeTokenSupported:!0},{active:!0,chainId:25,chainName:"Cronos Mainnet",shortName:"Cronos",nativeTokenSupported:!0},{active:!0,chainId:56,chainName:a.BNB_DISPLAY_NAME,shortName:"BNB Chain",nativeTokenSupported:!0},{active:!0,chainId:100,chainName:"Gnosis Mainnet",shortName:"Gnosis",nativeTokenSupported:!0},{active:!0,chainId:137,chainName:a.POLYGON_DISPLAY_NAME,shortName:"Polygon",nativeTokenSupported:!0},{active:!0,chainId:250,chainName:"Fantom Mainnet",shortName:"Fantom",nativeTokenSupported:!0},{active:!0,chainId:324,chainName:a.ZK_SYNC_ERA_DISPLAY_NAME,shortName:"zkSync Era",nativeTokenSupported:!0},{active:!0,chainId:1101,chainName:"Polygon zkEVM",shortName:"Polygon zkEVM",nativeTokenSupported:!0},{active:!0,chainId:1284,chainName:"Moonbeam Mainnet",shortName:"Moonbeam",nativeTokenSupported:!0},{active:!0,chainId:1285,chainName:"Moonriver Mainnet",shortName:"Moonriver",nativeTokenSupported:!0},{active:!0,chainId:8453,chainName:a.BASE_DISPLAY_NAME,shortName:"Base",nativeTokenSupported:!0},{active:!0,chainId:42161,chainName:a.ARBITRUM_DISPLAY_NAME,shortName:"Arbitrum",nativeTokenSupported:!0},{active:!0,chainId:42220,chainName:a.CELO_DISPLAY_NAME,shortName:"Celo",nativeTokenSupported:!1},{active:!0,chainId:43114,chainName:a.AVALANCHE_DISPLAY_NAME,shortName:"Avalanche C-Chain",nativeTokenSupported:!0},{active:!0,chainId:59144,chainName:a.LINEA_MAINNET_DISPLAY_NAME,shortName:"Linea",nativeTokenSupported:!0},{active:!0,chainId:1313161554,chainName:"Aurora Mainnet",shortName:"Aurora",nativeTokenSupported:!1},{active:!0,chainId:16666e5,chainName:"Harmony Mainnet (Shard 0)",shortName:"Harmony (Shard 0)",nativeTokenSupported:!0},{active:!0,chainId:11297108109,chainName:"Palm Mainnet",shortName:"Palm",nativeTokenSupported:!1}]}}},{package:"$root$",file:"ui/ducks/ramps/constants.ts"}],[7069,{"./ramps":7070},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./ramps");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})}}},{package:"$root$",file:"ui/ducks/ramps/index.ts"}],[7070,{"../../../shared/constants/multichain/networks":5794,"../../../shared/modules/conversion.utils":5913,"../../../shared/modules/selectors/networks":5934,"../../helpers/ramps/rampApi/rampAPI":7105,"../../selectors":8094,"../../selectors/multichain":8103,"./constants":7068,"@reduxjs/toolkit":3188,reselect:5308},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsSolanaBuyable=n.getIsNativeTokenBuyable=n.getIsBitcoinBuyable=n.getBuyableChains=n.fetchBuyableChains=n.default=void 0;var r,s=e("reselect"),a=e("@reduxjs/toolkit"),i=e("../../../shared/modules/selectors/networks"),o=e("../../selectors"),c=(r=e("../../helpers/ramps/rampApi/rampAPI"))&&r.__esModule?r:{default:r},u=e("../../../shared/modules/conversion.utils"),l=e("../../selectors/multichain"),d=e("../../../shared/constants/multichain/networks"),p=e("./constants");const m=n.fetchBuyableChains=(0,a.createAsyncThunk)("ramps/fetchBuyableChains",async(e,{getState:t})=>{const n=t(),{isFetched:r}=n.ramps;return(0,o.getUseExternalServices)(n)?r?n.ramps.buyableChains:await c.default.getNetworks():p.defaultBuyableChains}),h=(0,a.createSlice)({name:"ramps",initialState:{buyableChains:p.defaultBuyableChains,isFetched:!1},reducers:{setBuyableChains:(e,t)=>{Array.isArray(t.payload)&&t.payload.length>0&&t.payload.every(e=>null==e?void 0:e.chainId)?(e.buyableChains=t.payload,e.isFetched=!0):e.buyableChains=p.defaultBuyableChains}},extraReducers:e=>{e.addCase(m.fulfilled,(e,t)=>{const n=t.payload;n&&n.length>0?e.buyableChains=n:e.buyableChains=p.defaultBuyableChains,e.isFetched=!0}).addCase(m.rejected,e=>{e.buyableChains=p.defaultBuyableChains,e.isFetched=!0})}}),{reducer:f}=h,g=e=>{var t;return(null===(t=e.ramps)||void 0===t?void 0:t.buyableChains)??p.defaultBuyableChains};n.getBuyableChains=g;const b=n.getIsBitcoinBuyable=(0,s.createSelector)([g],e=>e.filter(Boolean).some(e=>e.chainId===d.MultichainNetworks.BITCOIN&&e.active)),S=n.getIsSolanaBuyable=(0,s.createSelector)([g],e=>e.filter(Boolean).some(e=>e.chainId===d.MultichainNetworks.SOLANA&&e.active));n.getIsNativeTokenBuyable=(0,s.createSelector)([i.getCurrentChainId,g,b,l.getMultichainIsBitcoin,S,l.getMultichainIsSolana],(e,t,n,r,s,a)=>{try{return r?n:a?s:t.filter(Boolean).some(t=>String(t.chainId)===(0,u.hexToDecimal)(e))}catch(e){return!1}});n.default=f}}},{package:"$root$",file:"ui/ducks/ramps/ramps.ts"}],[7071,{"./types":7073,"@reduxjs/toolkit":3188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setSeasonStatusLoading=n.setSeasonStatusError=n.setSeasonStatus=n.setRewardsGeoMetadataLoading=n.setRewardsGeoMetadataError=n.setRewardsGeoMetadata=n.setRewardsBadgeHidden=n.setRewardsAccountLinkedTimestamp=n.setOnboardingReferralCode=n.setOnboardingModalRendered=n.setOnboardingModalOpen=n.setOnboardingActiveStep=n.setErrorToast=n.setCandidateSubscriptionId=n.resetRewardsState=n.initialState=n.default=void 0;var r=e("@reduxjs/toolkit"),s=e("./types");const a=n.initialState={onboardingModalOpen:!1,onboardingActiveStep:s.OnboardingStep.INTRO,onboardingModalRendered:!0,onboardingReferralCode:"",geoLocation:null,optinAllowedForGeo:null,optinAllowedForGeoLoading:!1,optinAllowedForGeoError:!1,candidateSubscriptionId:"pending",seasonStatus:null,seasonStatusError:null,seasonStatusLoading:!1,rewardsEnabled:!1,errorToast:{isOpen:!1,title:"",description:"",actionText:"",onActionClick:undefined},rewardsBadgeHidden:!0,accountLinkedTimestamp:null},i=(0,r.createSlice)({name:"rewards",initialState:a,reducers:{resetRewardsState:()=>({...a,errorToast:{...a.errorToast}}),setOnboardingModalOpen:(e,t)=>{e.onboardingModalOpen=t.payload},setOnboardingActiveStep:(e,t)=>{e.onboardingActiveStep=t.payload},setOnboardingModalRendered:(e,t)=>{e.onboardingModalRendered=t.payload},setOnboardingReferralCode:(e,t)=>{e.onboardingReferralCode=t.payload},setRewardsGeoMetadata:(e,t)=>{t.payload?(e.geoLocation=t.payload.geoLocation,e.optinAllowedForGeo=t.payload.optinAllowedForGeo,e.optinAllowedForGeoLoading=!1):(e.geoLocation=null,e.optinAllowedForGeo=null,e.optinAllowedForGeoLoading=!1)},setRewardsGeoMetadataLoading:(e,t)=>{e.optinAllowedForGeoLoading=t.payload},setRewardsGeoMetadataError:(e,t)=>{e.optinAllowedForGeoError=t.payload},setCandidateSubscriptionId:(e,t)=>{const n=e.candidateSubscriptionId,r=t.payload;n&&"pending"!==n&&"error"!==n&&"retry"!==n&&n!==r&&(e.seasonStatus=a.seasonStatus,e.seasonStatusError=a.seasonStatusError,e.seasonStatusLoading=a.seasonStatusLoading),e.candidateSubscriptionId=t.payload},setSeasonStatusLoading:(e,t)=>{e.seasonStatusLoading=t.payload},setSeasonStatus:(e,t)=>{e.seasonStatus=t.payload},setSeasonStatusError:(e,t)=>{e.seasonStatusError=t.payload},setErrorToast:(e,t)=>{e.errorToast=t.payload},setRewardsBadgeHidden:(e,t)=>{e.rewardsBadgeHidden=t.payload},setRewardsAccountLinkedTimestamp:(e,t)=>{e.accountLinkedTimestamp=t.payload}}}),{resetRewardsState:o,setOnboardingModalOpen:c,setOnboardingActiveStep:u,setOnboardingModalRendered:l,setOnboardingReferralCode:d,setCandidateSubscriptionId:p,setSeasonStatusLoading:m,setSeasonStatus:h,setSeasonStatusError:f,setRewardsGeoMetadata:g,setRewardsGeoMetadataLoading:b,setRewardsGeoMetadataError:S,setErrorToast:y,setRewardsBadgeHidden:v,setRewardsAccountLinkedTimestamp:T}=i.actions;n.setRewardsAccountLinkedTimestamp=T,n.setRewardsBadgeHidden=v,n.setErrorToast=y,n.setRewardsGeoMetadataError=S,n.setRewardsGeoMetadataLoading=b,n.setRewardsGeoMetadata=g,n.setSeasonStatusError=f,n.setSeasonStatus=h,n.setSeasonStatusLoading=m,n.setCandidateSubscriptionId=p,n.setOnboardingReferralCode=d,n.setOnboardingModalRendered=l,n.setOnboardingActiveStep=u,n.setOnboardingModalOpen=c,n.resetRewardsState=o;n.default=i.reducer}}},{package:"$root$",file:"ui/ducks/rewards/index.ts"}],[7072,{"../../../shared/lib/feature-flags/version-gating":5869,"../../selectors/remote-feature-flags":8111,"../../selectors/selectors":8114,reselect:5308},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectSeasonStatusLoading=n.selectSeasonStatusError=n.selectSeasonStatus=n.selectRewardsOnboardingEnabled=n.selectRewardsEnabled=n.selectRewardsBadgeHidden=n.selectRewardsAccountLinkedTimestamp=n.selectOptinAllowedForGeoLoading=n.selectOptinAllowedForGeoError=n.selectOptinAllowedForGeo=n.selectOnboardingReferralCode=n.selectOnboardingModalRendered=n.selectOnboardingModalOpen=n.selectOnboardingActiveStep=n.selectErrorToast=n.selectCandidateSubscriptionId=void 0;var r=e("reselect"),s=e("../../selectors/remote-feature-flags"),a=e("../../selectors/selectors"),i=e("../../../shared/lib/feature-flags/version-gating");n.selectOnboardingModalOpen=e=>e.rewards.onboardingModalOpen;n.selectOnboardingActiveStep=e=>e.rewards.onboardingActiveStep;n.selectOnboardingModalRendered=e=>e.rewards.onboardingModalRendered;n.selectOnboardingReferralCode=e=>e.rewards.onboardingReferralCode;n.selectOptinAllowedForGeo=e=>e.rewards.optinAllowedForGeo;n.selectOptinAllowedForGeoLoading=e=>e.rewards.optinAllowedForGeoLoading;n.selectOptinAllowedForGeoError=e=>e.rewards.optinAllowedForGeoError;n.selectCandidateSubscriptionId=e=>e.rewards.candidateSubscriptionId;n.selectSeasonStatusLoading=e=>e.rewards.seasonStatusLoading;n.selectSeasonStatus=e=>e.rewards.seasonStatus;n.selectSeasonStatusError=e=>e.rewards.seasonStatusError;n.selectRewardsEnabled=(0,r.createSelector)(s.getRemoteFeatureFlags,a.getUseExternalServices,(e,t)=>{const n=null==e?void 0:e.rewardsEnabled;var r;return("boolean"==typeof(r=n)?r:Boolean((0,i.validatedVersionGatedFeatureFlag)(r)))&&Boolean(t)}),n.selectRewardsOnboardingEnabled=(0,r.createSelector)(s.getRemoteFeatureFlags,a.getUseExternalServices,(e,t)=>{const n=null==e?void 0:e.rewardsOnboardingEnabled;var r;return("boolean"==typeof(r=n)?r:Boolean((0,i.validatedVersionGatedFeatureFlag)(r)))&&Boolean(t)});n.selectErrorToast=e=>e.rewards.errorToast;n.selectRewardsBadgeHidden=e=>e.rewards.rewardsBadgeHidden;n.selectRewardsAccountLinkedTimestamp=e=>{var t;return(null===(t=e.rewards)||void 0===t?void 0:t.accountLinkedTimestamp)??null}}}},{package:"$root$",file:"ui/ducks/rewards/selectors.ts"}],[7073,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnboardingStep=void 0;n.OnboardingStep=function(e){return e.INTRO="INTRO",e.STEP1="STEP_1",e.STEP2="STEP_2",e.STEP3="STEP_3",e.STEP4="STEP_4",e}({})}}},{package:"$root$",file:"ui/ducks/rewards/types.ts"}],[7078,{"@reduxjs/toolkit":3188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setToggleState=n.selectToggleState=n.default=void 0;const r=(0,e("@reduxjs/toolkit").createSlice)({name:"smartAccounts",initialState:{toggleStates:{}},reducers:{setToggleState:(e,t)=>{const{address:n,chainId:r,value:s}=t.payload;e.toggleStates[n]||(e.toggleStates[n]={}),null===s?(delete e.toggleStates[n][r],0===Object.keys(e.toggleStates[n]).length&&delete e.toggleStates[n]):e.toggleStates[n][r]=s}}}),{setToggleState:s}=r.actions;n.setToggleState=s;n.selectToggleState=(e,t,n)=>{var r;return(null===(r=e.smartAccounts.toggleStates[t])||void 0===r?void 0:r[n])??null};n.default=r.reducer}}},{package:"$root$",file:"ui/ducks/smart-accounts/smart-accounts.ts"}],[7080,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=[{code:"aud",name:"Australian Dollar"},{code:"hkd",name:"Hong Kong Dollar"},{code:"sgd",name:"Singapore Dollar"},{code:"idr",name:"Indonesian Rupiah"},{code:"inr",name:"Indian Rupee"},{code:"nzd",name:"New Zealand Dollar"},{code:"php",name:"Philippine Peso"},{code:"btc",name:"Bitcoin"},{code:"cad",name:"Canadian Dollar"},{code:"eur",name:"Euro"},{code:"gbp",name:"Pound Sterling"},{code:"jpy",name:"Japanese Yen"},{code:"ltc",name:"Litecoin"},{code:"rub",name:"Russian Ruble"},{code:"uah",name:"Ukrainian Hryvnia"},{code:"usd",name:"United States Dollar"},{code:"xlm",name:"Stellar Lumen"},{code:"xrp",name:"Ripple"},{code:"sek",name:"Swedish Krona"},{code:"aed",name:"United Arab Emirates Dirham"},{code:"ars",name:"Argentine Peso"},{code:"bch",name:"Bitcoin Cash"},{code:"bnb",name:"Binance Coin"},{code:"brl",name:"Brazilian Real"},{code:"clp",name:"Chilean Peso"},{code:"cny",name:"Chinese Yuan"},{code:"czk",name:"Czech Koruna"},{code:"dkk",name:"Danish Krone"},{code:"chf",name:"Swiss Franc"},{code:"dot",name:"Polkadot"},{code:"eos",name:"EOS"},{code:"eth",name:"Ethereum"},{code:"gel",name:"Georgian Lari"},{code:"huf",name:"Hungarian Forint"},{code:"ils",name:"Israeli Shekel"},{code:"krw",name:"South Korean Won"},{code:"mxn",name:"Mexican Peso"},{code:"myr",name:"Malaysian Ringgit"},{code:"ngn",name:"Nigerian Naira"},{code:"nok",name:"Norwegian Krone"},{code:"pln",name:"Polish Zloty"},{code:"thb",name:"Thai Baht"},{code:"try",name:"Turkish Lira"},{code:"zar",name:"South African Rand"}]}}},{package:"$root$",file:"ui/helpers/constants/available-conversions.json"}],[7082,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STATUS_NOT_CONNECTED=n.STATUS_CONNECTED_TO_SNAP=n.STATUS_CONNECTED_TO_ANOTHER_ACCOUNT=n.STATUS_CONNECTED=void 0;n.STATUS_CONNECTED="STATUS_CONNECTED",n.STATUS_CONNECTED_TO_ANOTHER_ACCOUNT="STATUS_CONNECTED_TO_ANOTHER_ACCOUNT",n.STATUS_NOT_CONNECTED="STATUS_NOT_CONNECTED",n.STATUS_CONNECTED_TO_SNAP="STATUS_CONNECTED_TO_SNAP"}}},{package:"$root$",file:"ui/helpers/constants/connected-sites.js"}],[7085,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PRIORITY_LEVEL_ICON_MAP=n.GAS_FORM_ERRORS=void 0,n.getGasFormErrorText=function(e,t,{minimumGasLimit:n}={}){switch(e){case r.GAS_LIMIT_OUT_OF_BOUNDS:return t("editGasLimitOutOfBounds",[n]);case r.MAX_PRIORITY_FEE_TOO_LOW:return t("editGasMaxPriorityFeeLow");case r.MAX_FEE_TOO_LOW:return t("editGasMaxFeeLow");case r.MAX_PRIORITY_FEE_BELOW_MINIMUM:return t("editGasMaxPriorityFeeBelowMinimum");case r.MAX_PRIORITY_FEE_HIGH_WARNING:return t("editGasMaxPriorityFeeHigh");case r.MAX_FEE_HIGH_WARNING:return t("editGasMaxFeeHigh");case r.MAX_FEE_IMBALANCE:return t("editGasMaxFeePriorityImbalance");case r.GAS_PRICE_TOO_LOW:return t("editGasPriceTooLow");default:return""}};const r=n.GAS_FORM_ERRORS={GAS_LIMIT_OUT_OF_BOUNDS:"editGasLimitOutOfBounds",MAX_PRIORITY_FEE_TOO_LOW:"editGasMaxPriorityFeeLow",MAX_FEE_TOO_LOW:"editGasMaxFeeLow",MAX_PRIORITY_FEE_BELOW_MINIMUM:"editGasMaxPriorityFeeBelowMinimum",MAX_PRIORITY_FEE_HIGH_WARNING:"editGasMaxPriorityFeeHigh",MAX_FEE_HIGH_WARNING:"editGasMaxFeeHigh",MAX_FEE_IMBALANCE:"editGasMaxFeeImbalance",GAS_PRICE_TOO_LOW:"editGasPriceTooLow"};n.PRIORITY_LEVEL_ICON_MAP={low:"",medium:"",high:"",dappSuggested:"",dappSuggestedHigh:"",swapSuggested:"",tenPercentIncreased:"",custom:""}}}},{package:"$root$",file:"ui/helpers/constants/gas.js"}],[7087,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PRIVACY_POLICY_DATE=void 0;n.PRIVACY_POLICY_DATE="2024-06-18T12:00:00Z"}}},{package:"$root$",file:"ui/helpers/constants/privacy-policy.ts"}],[7089,{"../../../shared/constants/app":5775,"../../../shared/modules/browser-runtime.utils":5910,"../../components/component-library":6529,"./routes":7088},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../shared/constants/app"),s=e("../../../shared/modules/browser-runtime.utils"),a=e("../../components/component-library"),i=e("./routes");const o=[{tabMessage:e=>e("general"),sectionMessage:e=>e("currencyConversion"),descriptionMessage:e=>e("currencyConversion"),route:`${i.GENERAL_ROUTE}#currency-conversion`,iconName:a.IconName.Setting},{tabMessage:e=>e("general"),sectionMessage:e=>e("showNativeTokenAsMainBalance"),descriptionMessage:e=>e("showNativeTokenAsMainBalance"),route:`${i.GENERAL_ROUTE}#show-native-token-as-main-balance`,iconName:a.IconName.Setting},{tabMessage:e=>e("general"),sectionMessage:e=>e("currentLanguage"),descriptionMessage:e=>e("currentLanguage"),route:`${i.GENERAL_ROUTE}#current-language`,iconName:a.IconName.Setting},{tabMessage:e=>e("general"),sectionMessage:e=>e("theme"),descriptionMessage:e=>e("themeDescription"),route:`${i.GENERAL_ROUTE}#theme`,icon:"fa fa-flask"},{tabMessage:e=>e("general"),sectionMessage:e=>e("accountIdenticon"),descriptionMessage:e=>e("accountIdenticon"),route:`${i.GENERAL_ROUTE}#account-identicon`,iconName:a.IconName.Setting},{tabMessage:e=>e("general"),sectionMessage:e=>e("hideZeroBalanceTokens"),descriptionMessage:e=>e("hideZeroBalanceTokens"),route:`${i.GENERAL_ROUTE}#zero-balancetokens`,iconName:a.IconName.Setting},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("stateLogs"),descriptionMessage:e=>e("stateLogsDescription"),route:`${i.ADVANCED_ROUTE}#state-logs`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("clearActivity"),descriptionMessage:e=>e("clearActivityDescription"),route:`${i.ADVANCED_ROUTE}#clear-activity`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("smartTransactions"),descriptionMessage:e=>e("stxOptInSupportedNetworksDescription"),route:`${i.ADVANCED_ROUTE}#smart-transactions`,icon:"fas fa-upload"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("showHexData"),descriptionMessage:e=>e("showHexDataDescription"),route:`${i.ADVANCED_ROUTE}#show-hexdata`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("showFiatConversionInTestnets"),descriptionMessage:e=>e("showFiatConversionInTestnetsDescription"),route:`${i.ADVANCED_ROUTE}#conversion-testnetworks`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("showTestnetNetworks"),descriptionMessage:e=>e("showTestnetNetworksDescription"),route:`${i.ADVANCED_ROUTE}#show-testnets`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("autoLockTimeLimit"),descriptionMessage:e=>e("autoLockTimeLimitDescription"),route:`${i.ADVANCED_ROUTE}#autolock-timer`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("showExtensionInFullSizeView"),descriptionMessage:e=>e("showExtensionInFullSizeViewDescription"),route:`${i.ADVANCED_ROUTE}#extension-full-size-view`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("dismissReminderField"),descriptionMessage:e=>e("dismissReminderDescriptionField"),route:`${i.ADVANCED_ROUTE}#dismiss-secretrecovery`,icon:"fas fa-sliders-h"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("exportYourData"),descriptionMessage:e=>e("exportYourDataDescription"),route:`${i.ADVANCED_ROUTE}#export-data`,icon:"fas fa-download"},{tabMessage:e=>e("advanced"),sectionMessage:e=>e("overrideContentSecurityPolicyHeader"),descriptionMessage:e=>e("overrideContentSecurityPolicyHeaderDescription"),route:`${i.ADVANCED_ROUTE}#override-content-security-policy-header`,icon:"fas fa-sliders-h",hidden:(0,s.getBrowserName)()!==r.PLATFORM_FIREFOX},{tabMessage:e=>e("backupAndSync"),sectionMessage:e=>e("backupAndSyncEnable"),descriptionMessage:e=>e("backupAndSyncEnable"),route:`${i.BACKUPANDSYNC_ROUTE}#backup-and-sync-toggle`,iconName:a.IconName.SecurityTime},{tabMessage:e=>e("backupAndSync"),sectionMessage:e=>e("backupAndSyncFeatureAccounts"),descriptionMessage:e=>e("backupAndSyncFeatureAccounts"),route:`${i.BACKUPANDSYNC_ROUTE}#backup-and-sync-features-toggles-account-syncing`,iconName:a.IconName.SecurityTime},{tabMessage:e=>e("backupAndSync"),sectionMessage:e=>e("backupAndSyncFeatureContacts"),descriptionMessage:e=>e("backupAndSyncFeatureContacts"),route:`${i.BACKUPANDSYNC_ROUTE}#backup-and-sync-features-toggles-contact-syncing`,iconName:a.IconName.SecurityTime},{tabMessage:e=>e("contacts"),sectionMessage:e=>e("contacts"),descriptionMessage:e=>e("contacts"),route:i.CONTACT_LIST_ROUTE,iconName:a.IconName.Book},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("basicConfigurationLabel"),descriptionMessage:e=>e("basicConfigurationDescription"),route:`${i.SECURITY_ROUTE}#basic-functionality-toggle`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("revealSeedWords"),descriptionMessage:e=>e("revealSeedWords"),route:`${i.SECURITY_ROUTE}#reveal-secretrecovery`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("securityChangePassword"),descriptionMessage:e=>e("securityChangePassword"),route:i.SECURITY_PASSWORD_CHANGE_ROUTE,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("usePhishingDetection"),descriptionMessage:e=>e("usePhishingDetectionDescription"),route:`${i.SECURITY_ROUTE}#phishing-detection`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("skipDeepLinkInterstitial"),descriptionMessage:e=>e("skipDeepLinkInterstitialDescription"),route:`${i.SECURITY_ROUTE}#skip-deep-link-interstitial`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("use4ByteResolution"),descriptionMessage:e=>e("toggleDecodeDescription"),route:`${i.SECURITY_ROUTE}#decode-smart-contracts`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("participateInMetaMetrics"),descriptionMessage:e=>e("participateInMetaMetricsDescription"),route:`${i.SECURITY_ROUTE}#metametrics`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("networkProvider"),descriptionMessage:e=>`${e("chooseYourNetwork")} ${e("chooseYourNetworkDescription")}`,route:`${i.SECURITY_ROUTE}#network-provider`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("ipfsGateway"),descriptionMessage:e=>e("ipfsGatewayDescription"),route:`${i.SECURITY_ROUTE}#add-custom-ipfs-gateway`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("autoDetectTokens"),descriptionMessage:e=>e("autoDetectTokensDescription"),route:`${i.SECURITY_ROUTE}#auto-detect-tokens`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("useMultiAccountBalanceChecker"),descriptionMessage:e=>e("useMultiAccountBalanceCheckerSettingDescription"),route:`${i.SECURITY_ROUTE}#batch-account-balance-requests`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("currencyRateCheckToggle"),descriptionMessage:e=>e("currencyRateCheckToggleDescription"),route:`${i.SECURITY_ROUTE}#price-checker`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("ensDomainsSettingTitle"),descriptionMessage:e=>e("ensDomainsSettingDescriptionIntroduction"),route:`${i.SECURITY_ROUTE}#ens-domains`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("displayNftMedia"),descriptionMessage:e=>e("displayNftMediaDescription"),route:`${i.SECURITY_ROUTE}#display-nft-media`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("useNftDetection"),descriptionMessage:e=>e("useNftDetectionDescriptionText"),route:`${i.SECURITY_ROUTE}#autodetect-nfts`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("useSafeChainsListValidation"),descriptionMessage:e=>e("useSafeChainsListValidationDescription"),route:`${i.SECURITY_ROUTE}#network-details-check`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("externalNameSourcesSetting"),descriptionMessage:e=>e("externalNameSourcesSettingDescription"),route:`${i.SECURITY_ROUTE}#proposed-nicknames`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("securityAlerts"),descriptionMessage:e=>e("securityAlertsDescription"),route:`${i.SECURITY_ROUTE}#security-alerts`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("blockaid"),descriptionMessage:e=>e("blockaidMessage"),route:`${i.SECURITY_ROUTE}#security-alerts-blockaid`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("simulationsSettingSubHeader"),descriptionMessage:e=>e("simulationsSettingDescription"),route:`${i.SECURITY_ROUTE}#transaction-simulations`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("dataCollectionForMarketing"),descriptionMessage:e=>e("dataCollectionForMarketingDescription"),route:`${i.SECURITY_ROUTE}#dataCollectionForMarketing`,icon:"fa fa-lock"},{tabMessage:e=>e("securityAndPrivacy"),sectionMessage:e=>e("deleteMetaMetricsData"),descriptionMessage:e=>e("deleteMetaMetricsDataDescription"),route:`${i.SECURITY_ROUTE}#delete-metametrics-data`,icon:"fa fa-lock"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("mainnet"),descriptionMessage:e=>e("mainnet"),route:`${i.NETWORKS_ROUTE}#networks-mainnet`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("lineaMainnet"),descriptionMessage:e=>e("lineaMainnet"),route:`${i.NETWORKS_ROUTE}#networks-linea-mainnet`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("goerli"),descriptionMessage:e=>e("goerli"),route:`${i.NETWORKS_ROUTE}#networks-goerli`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("sepolia"),descriptionMessage:e=>e("sepolia"),route:`${i.NETWORKS_ROUTE}#networks-sepolia`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("lineaGoerli"),descriptionMessage:e=>e("lineaGoerli"),route:`${i.NETWORKS_ROUTE}#networks-linea-goerli`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("lineaSepolia"),descriptionMessage:e=>e("lineaSepolia"),route:`${i.NETWORKS_ROUTE}#networks-linea-sepolia`,icon:"fa fa-plug"},{tabMessage:e=>e("networks"),sectionMessage:e=>e("localhost"),descriptionMessage:e=>e("localhost"),route:`${i.NETWORKS_ROUTE}#networks-localhost`,icon:"fa fa-plug"},{tabMessage:e=>e("about"),sectionMessage:e=>e("metamaskVersion"),descriptionMessage:e=>e("builtAroundTheWorld"),route:`${i.ABOUT_US_ROUTE}#version`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("links"),descriptionMessage:e=>e("links"),route:`${i.ABOUT_US_ROUTE}#links`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("privacyMsg"),descriptionMessage:e=>e("privacyMsg"),route:`${i.ABOUT_US_ROUTE}#privacy-policy`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("terms"),descriptionMessage:e=>e("terms"),route:`${i.ABOUT_US_ROUTE}#terms`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("attributions"),descriptionMessage:e=>e("attributions"),route:`${i.ABOUT_US_ROUTE}#attributions`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("supportCenter"),descriptionMessage:e=>e("supportCenter"),route:`${i.ABOUT_US_ROUTE}#supportcenter`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("visitWebSite"),descriptionMessage:e=>e("visitWebSite"),route:`${i.ABOUT_US_ROUTE}#visitwebsite`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("contactUs"),descriptionMessage:e=>e("contactUs"),route:`${i.ABOUT_US_ROUTE}#contactus`,iconName:a.IconName.Info},{tabMessage:e=>e("about"),sectionMessage:e=>e("betaTerms"),descriptionMessage:e=>e("betaTerms"),route:`${i.ABOUT_US_ROUTE}#beta-terms`,iconName:a.IconName.Info},{featureFlag:"METAMASK_SHIELD_ENABLED",tabMessage:e=>e("shieldTx"),sectionMessage:e=>e("shieldTx"),descriptionMessage:e=>e("shieldTx"),route:`${i.TRANSACTION_SHIELD_ROUTE}`,iconName:a.IconName.ShieldLock},{featureFlag:"METAMASK_SHIELD_ENABLED",tabMessage:e=>e("shieldClaim"),sectionMessage:e=>e("shieldClaim"),descriptionMessage:e=>e("shieldClaim"),route:`${i.TRANSACTION_SHIELD_CLAIM_ROUTES.NEW.FULL}`,iconName:a.IconName.ShieldLock},{tabMessage:e=>e("experimental"),sectionMessage:e=>e("notificationsFeatureToggle"),descriptionMessage:e=>e("notificationsFeatureToggleDescription"),route:`${i.EXPERIMENTAL_ROUTE}#notifications`,icon:"fas fa-flask"},{tabMessage:e=>e("experimental"),sectionMessage:e=>e("snaps"),descriptionMessage:e=>e("addSnapAccountToggle"),route:`${i.EXPERIMENTAL_ROUTE}#snaps`,icon:"fas fa-flask"},{featureFlag:"ENABLE_SETTINGS_PAGE_DEV_OPTIONS",tabMessage:e=>e("developerOptions"),sectionMessage:()=>"Reset States",descriptionMessage:()=>"Reset States",route:`${i.DEVELOPER_OPTIONS_ROUTE}#reset-states`,iconName:a.IconName.CodeCircle},{featureFlag:"ENABLE_SETTINGS_PAGE_DEV_OPTIONS",tabMessage:e=>e("developerOptions"),sectionMessage:()=>"Announcements",descriptionMessage:()=>"Resets isShown boolean to false for all announcements. Announcements are the notifications shown in the What's New popup modal.",route:`${i.DEVELOPER_OPTIONS_ROUTE}#reset-states-announcements`,iconName:a.IconName.CodeCircle},{featureFlag:"ENABLE_SETTINGS_PAGE_DEV_OPTIONS",tabMessage:e=>e("developerOptions"),sectionMessage:()=>"Service Worker Keep Alive",descriptionMessage:()=>'Resets various states related to onboarding and redirects to the "Secure Your Wallet" onboarding page.',route:`${i.DEVELOPER_OPTIONS_ROUTE}#reset-states-onboarding`,iconName:a.IconName.CodeCircle},{featureFlag:"ENABLE_SETTINGS_PAGE_DEV_OPTIONS",tabMessage:e=>e("developerOptions"),sectionMessage:()=>"Service Worker Keep Alive",descriptionMessage:()=>"Results in a timestamp being continuously saved to session.storage",route:`${i.DEVELOPER_OPTIONS_ROUTE}#service-worker-keep-alive`,iconName:a.IconName.CodeCircle}];n.default=o}}},{package:"$root$",file:"ui/helpers/constants/settings.js"}],[7090,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDelineatorTitle=n.DelineatorType=void 0;let r=n.DelineatorType=function(e){return e.Content="content",e.Error="error",e.Insights="insights",e.Description="description",e.Warning="warning",e}({});n.getDelineatorTitle=e=>{switch(e){case r.Error:return"errorWithSnap";case r.Insights:return"insightsFromSnap";case r.Description:return"descriptionFromSnap";case r.Warning:return"warningFromSnap";default:return"contentFromSnap"}}}}},{package:"$root$",file:"ui/helpers/constants/snaps/delineator.ts"}],[7091,{"./delineator":7090,"./insights":7092},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./delineator");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))});var s=e("./insights");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))})}}},{package:"$root$",file:"ui/helpers/constants/snaps/index.js"}],[7092,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InsightWarningLanguage=void 0;n.InsightWarningLanguage={confirming:{noun:"transaction",imperative:"confirm"},signing:{noun:"signature",imperative:"sign"}}}}},{package:"$root$",file:"ui/helpers/constants/snaps/insights.ts"}],[7093,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SURVEY_START_TIME=n.SURVEY_START_HOUR=n.SURVEY_GMT=n.SURVEY_END_TIME=n.SURVEY_END_HOUR=n.SURVEY_DATE=void 0;n.SURVEY_DATE="February 28 2024";const r=n.SURVEY_GMT="GMT-0600",s=n.SURVEY_START_HOUR="12:00:00",a=n.SURVEY_END_HOUR="13:00:00";n.SURVEY_START_TIME=`${s} ${r}`,n.SURVEY_END_TIME=`${a} ${r}`}}},{package:"$root$",file:"ui/helpers/constants/survey.ts"}],[7096,{"../../constants/routes":7088,"prop-types":5094,react:5256,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=o(e("react")),s=o(e("prop-types")),a=e("react-router-dom"),i=e("../../constants/routes");function o(e){return e&&e.__esModule?e:{default:e}}function c({isUnlocked:e,completedOnboarding:t,children:n}){const s=(0,a.useLocation)();return t?e?n:r.default.createElement(a.Navigate,{to:i.UNLOCK_ROUTE,replace:!0,state:{from:s}}):r.default.createElement(a.Navigate,{to:i.ONBOARDING_ROUTE,replace:!0})}c.propTypes={isUnlocked:s.default.bool,completedOnboarding:s.default.bool,children:s.default.node}}}},{package:"$root$",file:"ui/helpers/higher-order-components/authenticated/authenticated.component.js"}],[7097,{"./authenticated.component":7096,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=e("react-redux"),a=(r=e("./authenticated.component"))&&r.__esModule?r:{default:r};n.default=(0,s.connect)(e=>{const{metamask:{isUnlocked:t,completedOnboarding:n}}=e;return{isUnlocked:t,completedOnboarding:n}})(a.default)}}},{package:"$root$",file:"ui/helpers/higher-order-components/authenticated/authenticated.container.js"}],[7098,{"prop-types":5094,react:5256,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r=i(e("react")),s=i(e("prop-types")),a=e("react-router-dom");function i(e){return e&&e.__esModule?e:{default:e}}function o({flag:e,redirectRoute:t,element:n}){return e?n:r.default.createElement(a.Navigate,{to:t,replace:!0})}o.propTypes={flag:s.default.bool.isRequired,redirectRoute:s.default.string.isRequired,element:s.default.node.isRequired}}}},{package:"$root$",file:"ui/helpers/higher-order-components/feature-toggled-route.js"}],[7099,{"./initialized.container":7101},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return s.default}});var r,s=(r=e("./initialized.container"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"ui/helpers/higher-order-components/initialized/index.js"}],[7100,{"../../constants/routes":7088,"prop-types":5094,react:5256,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=o(e("react")),s=o(e("prop-types")),a=e("react-router-dom"),i=e("../../constants/routes");function o(e){return e&&e.__esModule?e:{default:e}}function c({completedOnboarding:e,children:t}){return e?t:r.default.createElement(a.Navigate,{to:i.ONBOARDING_ROUTE,replace:!0})}c.propTypes={completedOnboarding:s.default.bool,children:s.default.node}}}},{package:"$root$",file:"ui/helpers/higher-order-components/initialized/initialized.component.js"}],[7101,{"./initialized.component":7100,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=e("react-redux"),a=(r=e("./initialized.component"))&&r.__esModule?r:{default:r};n.default=(0,s.connect)(e=>{const{metamask:{completedOnboarding:t}}=e;return{completedOnboarding:t}})(a.default)}}},{package:"$root$",file:"ui/helpers/higher-order-components/initialized/initialized.container.js"}],[7102,{"./with-modal-props":7103},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return s.default}});var r,s=(r=e("./with-modal-props"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"ui/helpers/higher-order-components/with-modal-props/index.js"}],[7103,{"../../../store/actions":8127,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,r.connect)(a,i)(e)};var r=e("react-redux"),s=e("../../../store/actions");const a=e=>{const{appState:t}=e,{props:n}=t.modal.modalState;return{...n}},i=e=>({hideModal:()=>e((0,s.hideModal)())})}}},{package:"$root$",file:"ui/helpers/higher-order-components/with-modal-props/with-modal-props.js"}],[7104,{react:5256,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("react"))&&r.__esModule?r:{default:r},a=e("react-router-dom");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}n.default=function(e){const t=t=>{const n=(0,a.useNavigate)(),r=(0,a.useLocation)(),o=(0,a.useParams)(),c=t.navigate??n,u=t.location??r,l=t.params??o;return s.default.createElement(e,i({},t,{navigate:c,location:u,params:l}))};return t.displayName=`withRouterHooks(${e.displayName||e.name||"Component"})`,t}}}},{package:"$root$",file:"ui/helpers/higher-order-components/with-router-hooks/with-router-hooks.tsx"}],[7105,{"../../../../shared/modules/fetch-with-timeout":5920},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const s=(0,((r=e("../../../../shared/modules/fetch-with-timeout"))&&r.__esModule?r:{default:r}).default)(),a={async getNetworks(){const e=new URL("/regions/networks","https://on-ramp-content.api.cx.metamask.io"),t=await s(e.toString()),{networks:n}=await t.json();return n}};n.default=a}}},{package:"$root$",file:"ui/helpers/ramps/rampApi/rampAPI.ts"}],[7106,{"../../../shared/constants/hardware-wallets":5785,"../../../shared/constants/keyring":5787,"../../../shared/constants/multichain/accounts":5792,"../../../shared/constants/network":5795,"../../../shared/lib/snaps/snaps":5892,"../../../shared/lib/translate":5902,"../../components/component-library":6529,"../constants/design-system":7083,"@metamask/snaps-sdk/jsx":2873,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountLabels=function(e,t,n,a){if(!t)return[];const i=[],o=n.filter(e=>e.type===c.KeyringType.hdKeyTree);switch(e){case c.KeyringType.hdKeyTree:if(o.length>1){const e=o.findIndex(e=>e.accounts.includes(t.address));i.push({label:m(e),icon:null})}break;case c.KeyringType.imported:i.push({label:(0,l.t)("imported"),icon:null});break;case c.KeyringType.qr:i.push({label:u.HardwareKeyringNames.qr,icon:null});break;case c.KeyringType.trezor:i.push({label:u.HardwareKeyringNames.trezor,icon:null});break;case c.KeyringType.ledger:i.push({label:u.HardwareKeyringNames.ledger,icon:null});break;case c.KeyringType.oneKey:i.push({label:u.HardwareKeyringNames.oneKey,icon:null});break;case c.KeyringType.lattice:i.push({label:u.HardwareKeyringNames.lattice,icon:null});break;case c.KeyringType.snap:{const{entropySource:e}=t.options;if(e&&o.length>1){const t=o.findIndex(t=>t.metadata.id===e);i.push({label:m(t),icon:null})}if((0,d.isSnapPreinstalled)(t.metadata.snap.id))break;if(a){i.push({label:`${a} (${(0,l.t)("beta")})`,icon:r.IconName.Snaps});break}i.push({label:`${(0,l.t)("snaps")} (${(0,l.t)("beta")})`,icon:r.IconName.Snaps});break}}const{namespace:h}=(0,s.parseCaipChainId)(t.type);h===s.KnownCaipNamespace.Bip122&&i.push({label:`${p.MULTICHAIN_ACCOUNT_TYPE_TO_NAME[t.type]}`,icon:null});return i},n.getAccountNameErrorMessage=function(e,t,n,r){const s=e.some(e=>{var t;return(null===(t=e.metadata)||void 0===t||null===(t=t.name)||void 0===t?void 0:t.toLowerCase())===(null==n?void 0:n.toLowerCase())}),i=!n||""===n,o=t.t("newAccountNumberName").replace(" $1",""),c=new RegExp(`^\\s*${o} \\d+\\s*$`,"iu").test(n||""),u=(null==n?void 0:n.toLowerCase())===(null==r?void 0:r.toLowerCase())||!s&&!c&&!i;let l;u?l=a.InvisibleCharacter:s?l=t.t("accountNameDuplicate"):c?l=t.t("accountNameReserved"):i&&(l=t.t("required"));return{isValidAccountName:u,errorMessage:l}},n.getAvatarNetworkColor=function(e){switch(e){case i.GOERLI_DISPLAY_NAME:return o.BackgroundColor.goerli;case i.LINEA_GOERLI_DISPLAY_NAME:return o.BackgroundColor.lineaGoerli;case i.LINEA_SEPOLIA_DISPLAY_NAME:return o.BackgroundColor.lineaSepolia;case i.SEPOLIA_DISPLAY_NAME:return o.BackgroundColor.sepolia;default:return undefined}};var r=e("@metamask/snaps-sdk/jsx"),s=e("@metamask/utils"),a=e("../../components/component-library"),i=e("../../../shared/constants/network"),o=e("../constants/design-system"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/hardware-wallets"),l=e("../../../shared/lib/translate"),d=e("../../../shared/lib/snaps/snaps"),p=e("../../../shared/constants/multichain/accounts");const m=e=>`SRP #${e+1}`}}},{package:"$root$",file:"ui/helpers/utils/accounts.js"}],[7108,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.camelCaseToCapitalize=function(e=""){return e.replace(/([A-Z])/gu," $1").replace(/^./u,e=>e.toUpperCase())},n.getCurrencySymbol=function(e){const t={EUR:"",HKD:"$",JPY:"",PHP:"",RUB:"",SGD:"$",USD:"$"};if(t[e.toUpperCase()])return t[e.toUpperCase()];return e.toUpperCase()}}}},{package:"$root$",file:"ui/helpers/utils/common.util.js"}],[7110,{"../../../shared/constants/background-liveness-check":5776,"../../../shared/constants/start-up-errors":5807,"../../../shared/constants/state-corruption":5808,"./display-critical-error":7111,"./state-corruption-html":7133,"@metamask/utils":3116,loglevel:4846},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CriticalStartupErrorHandler=void 0;var r,s=e("@metamask/utils"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/state-corruption"),o=e("../../../shared/constants/background-liveness-check"),c=e("../../../shared/constants/start-up-errors"),u=e("./state-corruption-html"),l=e("./display-critical-error");function d(e,t,n){p(e,t),t.set(e,n)}function p(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(e,t){return e.get(f(e,t))}function h(e,t,n){return e.set(f(e,t),n),n}function f(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var g=new WeakMap,b=new WeakMap,S=new WeakMap,y=new WeakMap,v=new WeakSet,T=new WeakMap;async function k(){const{promise:e,resolve:t}=(0,s.createDeferredPromise)();h(y,this,t);const n=new Promise((e,t)=>{h(S,this,setTimeout(()=>t(new Error("Background connection unresponsive")),15e3))});try{await Promise.race([e,n])}catch(e){await(0,l.displayCriticalError)(m(b,this),l.CriticalErrorTranslationKey.TroubleStarting,e)}finally{clearTimeout(m(S,this))}}n.CriticalStartupErrorHandler=class{constructor(e,t){!function(e,t){p(e,t),t.add(e)}(this,v),d(this,g,void 0),d(this,b,void 0),d(this,S,void 0),d(this,y,void 0),d(this,T,async e=>{if(!(0,s.isObject)(e)||!(0,s.hasProperty)(e,"data"))return;const{data:t}=e;if(!(0,s.isObject)(t)||!(0,s.hasProperty)(t,"method"))return;const{method:n}=t;if(n===o.BACKGROUND_LIVENESS_METHOD)m(y,this)?m(y,this).call(this):await(0,l.displayCriticalError)(m(b,this),l.CriticalErrorTranslationKey.TroubleStarting,new Error("Unreachable error, liveness check not initialized"));else if(n===c.RELOAD_WINDOW)window.location.reload();else if(n===i.METHOD_DISPLAY_STATE_CORRUPTION_ERROR){if(!(0,s.hasProperty)(t,"params")||!(0,s.isObject)(t.params))return void a.default.error("Received state corruption error message without valid params:",e);const{error:n,hasBackup:r,currentLocale:i}=t.params;(0,u.displayStateCorruptionError)(m(b,this),m(g,this),n,r,i)}else if(n===c.DISPLAY_GENERAL_STARTUP_ERROR){if(!(0,s.hasProperty)(t,"params")||!(0,s.isObject)(t.params))return void a.default.error("Received general start up error message without valid params:",e);const{error:n,currentLocale:r}=t.params;await(0,l.displayCriticalError)(m(b,this),l.CriticalErrorTranslationKey.TroubleStarting,n,r)}}),h(g,this,e),h(b,this,t)}install(){m(g,this).onMessage.addListener(m(T,this)),f(v,this,k).call(this)}uninstall(){m(g,this).onMessage.removeListener(m(T,this)),clearTimeout(m(S,this)),m(y,this)&&(m(y,this).call(this),h(y,this,undefined))}}}}},{package:"$root$",file:"ui/helpers/utils/critical-startup-error-handler.ts"}],[7111,{"../../../shared/lib/error-utils":5868,"../../../shared/lib/ui-utils":5904,loglevel:4846,uuid:5734,"webextension-polyfill":5763},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CriticalErrorTranslationKey=void 0,n.displayCriticalError=async function(e,t,n,c){const l=await(0,i.maybeGetLocaleContext)(c);e.innerHTML=(0,i.getErrorHtml)(t,n,l,o.SUPPORT_LINK);const d=e.querySelector("#critical-error-button"),p=e.querySelector("#critical-error-checkbox");throw null==d||d.addEventListener("click",async()=>{const e=(null==p?void 0:p.checked)??!1;await async function(e,t){t&&await async function(e){const t=function(){0;return"https://3567c198f8a8412082d32655da2961d0@sentry.io/273505"}();if(!t)return;try{var n,s;const i=(0,a.v4)().replace(/-/gu,""),o={event_id:i,timestamp:Math.floor(Date.now()/1e3),platform:"javascript",level:"error",message:(null==e?void 0:e.message)||"MetaMask extension crash critical error",release:(null===(n=r.default.runtime.getManifest())||void 0===n?void 0:n.version)||"unknown",extra:{error_details:e&&"object"==typeof e?e:{message:String(e)},user_agent:(null===(s=globalThis.navigator)||void 0===s?void 0:s.userAgent)||"unknown"}},c={event_id:i,dsn:t,sent_at:(new Date).toISOString()},l=JSON.stringify(o),d={type:"event",length:l.length},p=`${JSON.stringify(c)}\n${JSON.stringify(d)}\n${l}`,m=u(t);await fetch(m,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:p})}catch(e){console.error("Error sending report to Sentry:",e)}}(e);r.default.runtime.reload()}(n,e)}),s.default.error(n.stack),n},n.extractEnvelopeUrlFromDsn=u;var r=c(e("webextension-polyfill")),s=c(e("loglevel")),a=e("uuid"),i=e("../../../shared/lib/error-utils"),o=e("../../../shared/lib/ui-utils");function c(e){return e&&e.__esModule?e:{default:e}}function u(e){try{const t=new URL(e),n=t.pathname.slice(1),r=t.hostname.split("."),s=r[0];return`https://${s}.${r.slice(1).join(".")}/api/${n}/envelope/`}catch(e){throw new Error("Invalid Sentry DSN format")}}n.CriticalErrorTranslationKey=function(e){return e.TroubleStarting="troubleStarting",e.SomethingIsWrong="somethingIsWrong",e}({})}}},{package:"$root$",file:"ui/helpers/utils/display-critical-error.ts"}],[7112,{buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.ExportableContentType=void 0,n.exportAsFile=async function(t,n,s){if(!r[s])throw new Error(`Unsupported file type: ${s}`);"undefined"!=typeof window&&void 0!==window.showSaveFilePicker&&void 0!==window.Blob?await async function(e,t,n){const s=new window.Blob([t],{contentType:n}),a=r[n],i=await window.showSaveFilePicker({suggestedName:e,types:[{description:e,accept:{[n]:[a]}}]}),o=await i.createWritable();await o.write(s),await o.close()}(t,n,s):function(t,n,r){const s=e.from(n,"utf8").toString("base64"),a=document.createElement("a");a.href=`data:${r};Base64,${s}`,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}(t,n,s)};const t=n.ExportableContentType={JSON:"application/json",TXT:"text/plain"},r={[t.JSON]:".json",[t.TXT]:".txt"}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/export-utils.js"}],[7114,{"../../../shared/constants/gas":5784,"../../../shared/modules/Numeric":5906,"../../../shared/modules/conversion.utils":5913,"./util":7141,"bignumber.js":3972,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addTenPercentAndRound=d,n.editGasModeIsSpeedUpOrCancel=function(e){return e===i.EditGasModes.cancel||e===i.EditGasModes.speedUp},n.formatGasFeeOrFeeRange=function(e,{precision:t=2}={}){if((0,u.isNullish)(e)||Array.isArray(e)&&0===e.length)return null;const n=Array.isArray(e)?e.slice(0,2):[e],r=Array.isArray(t)?t.slice(0,2):(0,s.times)(n.length,(0,s.constant)(t));return`${(0,s.uniq)((0,s.zip)(n,r).map(([e,t])=>t===undefined?e:(0,u.roundToDecimalPlacesRemovingExtraZeroes)(e,t))).join(" - ")} GWEI`},n.gasEstimateGreaterThanGasUsedPlusTenPercent=void 0,n.isMetamaskSuggestedGasEstimate=function(e){return[i.GasRecommendations.high,i.GasRecommendations.medium,i.GasRecommendations.low].includes(e)};var r,s=e("lodash"),a=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/gas"),o=e("../../../shared/modules/conversion.utils"),c=e("../../../shared/modules/Numeric"),u=e("./util");const l=new c.Numeric(1.1,10);function d(e){return e===undefined?undefined:new c.Numeric(e,16).times(l).round(0).toPrefixedHexString()}n.gasEstimateGreaterThanGasUsedPlusTenPercent=(e,t,n)=>{var r;let{maxFeePerGas:s}=e;s=new a.default((0,o.hexWEIToDecGWEI)(d(s)));const i=null==t||null===(r=t[n])||void 0===r?void 0:r.suggestedMaxFeePerGas;return(0,u.bnGreaterThan)(i,s)}}}},{package:"$root$",file:"ui/helpers/utils/gas.js"}],[7115,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHardwareKeyring=function(e=""){return e.includes("Hardware")}}}},{package:"$root$",file:"ui/helpers/utils/hardware.js"}],[7117,{"../../../shared/modules/hexstring-utils":5922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IconFactory=void 0,n.default=function(e){i||(i=new a(e));return i};var r=e("../../../shared/modules/hexstring-utils");function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e,t=o){s(this,"jazzicon",void 0),s(this,"generateSeed",void 0),s(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=this.generateSeed(e);return this.jazzicon(t,n)}}let i;function o(e){const t=e.slice(2,10);return parseInt(t,16)}n.IconFactory=a}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[7118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=()=>window.matchMedia("screen and (max-width: 575px)").matches}}},{package:"$root$",file:"ui/helpers/utils/is-mobile-view.js"}],[7119,{"../../../shared/constants/network":5795,"../../../shared/constants/time":5812,"../../../shared/lib/fetch-with-cache":5870},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isOriginalNativeTokenSymbol=n.getOriginalNativeTokenSymbol=void 0;var r,s=e("../../../shared/constants/network"),a=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/time");const o=async({chainId:e,useAPICall:t=!1})=>{try{var n;const r=s.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e];if(r)return r;const o=s.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_NETWORK_COLLISION[e];if(null!=o&&o[0].currencySymbol)return o[0].currencySymbol;if(!t)return null;const c=(await(0,a.default)({url:s.CHAIN_SPEC_URL,allowStale:!0,cacheOptions:{cacheRefreshTime:i.DAY},functionName:"getSafeChainsList"})).find(t=>t.chainId===parseInt(e,16));return(null==c||null===(n=c.nativeCurrency)||void 0===n?void 0:n.symbol)??null}catch(e){return null}};n.getOriginalNativeTokenSymbol=o;n.isOriginalNativeTokenSymbol=async({ticker:e,chainId:t,useAPICall:n=!1})=>{const r=await o({chainId:t,useAPICall:n});return null===r||r===e}}}},{package:"$root$",file:"ui/helpers/utils/isOriginalNativeTokenSymbol.ts"}],[7121,{"../../../shared/lib/manifestFlags":5878,"../../../shared/lib/trace":5897,react:5256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mmLazy=function(e){return a.default.lazy(async()=>{const t=Date.now(),n=await e(),{componentName:r,component:s}=function(e){let t;if(!e.default){const n=Object.keys(e);if(1===n.length)return t=n[0],{componentName:t,component:{default:e[t]}};throw new Error("mmLazy: You cannot lazy-load a component when there are multiple exported components in one file")}t=e.default.WrappedComponent?e.default.WrappedComponent.name:e.default.name||e.default.displayName;return{componentName:t,component:e}}(n);return c&&Math.random()<c&&((0,o.trace)({name:o.TraceName.LazyLoadComponent,data:{componentName:r},startTime:t}),(0,o.endTrace)({name:o.TraceName.LazyLoadComponent})),s})};var r,s,a=(r=e("react"))&&r.__esModule?r:{default:r},i=e("../../../shared/lib/manifestFlags"),o=e("../../../shared/lib/trace");const c=null===(s=(0,i.getManifestFlags)().sentry)||void 0===s?void 0:s.lazyLoadSubSampleRate}}},{package:"$root$",file:"ui/helpers/utils/mm-lazy.ts"}],[7122,{"../../../../app/scripts/lib/multichain/address":297,"../../../../shared/lib/multichain/networks":5884,"@metamask/etherscan-link":2063,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainBlockExplorerUrl=n.getMultichainAccountUrl=n.getAssetDetailsAccountUrl=void 0;var r=e("@metamask/utils"),s=e("@metamask/etherscan-link"),a=e("../../../../app/scripts/lib/multichain/address"),i=e("../../../../shared/lib/multichain/networks");n.getMultichainBlockExplorerUrl=e=>{var t;return(null===(t=e.network)||void 0===t||null===(t=t.rpcPrefs)||void 0===t?void 0:t.blockExplorerUrl)??""};n.getMultichainAccountUrl=(e,t)=>{const{namespace:n}=(0,r.parseCaipChainId)(t.chainId);if(n===r.KnownCaipNamespace.Eip155){return`https://etherscan.io/address/${(0,a.normalizeSafeAddress)(e)}#asset-multichain`}const{blockExplorerFormatUrls:s}=t.network;return s?(0,i.formatBlockExplorerAddressUrl)(s,e):""};n.getAssetDetailsAccountUrl=(e,t)=>{const{namespace:n}=(0,r.parseCaipChainId)(t.chainId);var o;if(n===r.KnownCaipNamespace.Eip155)return(0,s.getAccountLink)((0,a.normalizeSafeAddress)(e),t.network.chainId,null===(o=t.network)||void 0===o?void 0:o.rpcPrefs);const{blockExplorerFormatUrls:c}=t.network;return c?(0,i.formatBlockExplorerAddressUrl)(c,e):""}}}},{package:"$root$",file:"ui/helpers/utils/multichain/blockExplorer.ts"}],[7123,{"../../../../shared/constants/common":5778,"../../../../shared/constants/multichain/networks":5794,"../../../../shared/lib/multichain/networks":5884,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBlockExplorerInfo=void 0;var r=e("@metamask/utils"),s=e("../../../../shared/constants/common"),a=e("../../../../shared/constants/multichain/networks"),i=e("../../../../shared/lib/multichain/networks");n.getBlockExplorerInfo=(e,t,n)=>{const{chainId:o,blockExplorerUrl:c}=n;if(o){const n=a.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[o];if(n){const{name:r}=n;return{addressUrl:(0,i.formatBlockExplorerAddressUrl)(n,t),name:r,buttonText:e("viewAddressOnExplorer",[r])}}}if(null!=o&&o.startsWith(r.KnownCaipNamespace.Eip155)){const n=`0x${parseInt(o.split(":")[1],10).toString(16)}`;if(c){const r=s.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[n]||"Block Explorer";return{addressUrl:`${c}/address/${t}`,name:r,buttonText:e("viewAddressOnExplorer",[r])}}const r=s.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[n];if(r){var u;const a=null===(u=s.CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[n])||void 0===u?void 0:u.replace(/\/$/u,"");if(a)return{addressUrl:`${a}/address/${t}`,name:r,buttonText:e("viewAddressOnExplorer",[r])}}}return null}}}},{package:"$root$",file:"ui/helpers/utils/multichain/getBlockExplorerInfo.ts"}],[7124,{"../../../shared/constants/network":5795,"../../../shared/modules/network.utils":5926,"@metamask/multichain-network-controller":2299,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isTestNetwork=n.getMatchedSymbols=n.getMatchedNames=n.getMatchedChain=void 0;var r=e("@metamask/multichain-network-controller"),s=e("@metamask/utils"),a=e("../../../shared/constants/network"),i=e("../../../shared/modules/network.utils");n.getMatchedChain=(e,t)=>t.find(t=>t.chainId.toString()===e);n.getMatchedSymbols=(e,t)=>t.reduce((t,n)=>{var r;n.chainId.toString()===e&&t.push(null===(r=n.nativeCurrency)||void 0===r?void 0:r.symbol);return t},[]);n.getMatchedNames=(e,t)=>t.reduce((t,n)=>(n.chainId.toString()===e&&t.push(null==n?void 0:n.name),t),[]);n.isTestNetwork=e=>(0,s.isCaipChainId)(e)?e.startsWith("eip155:")?a.TEST_CHAINS.includes((0,i.convertCaipToHexChainId)(e)):r.NON_EVM_TESTNET_IDS.includes(e):a.TEST_CHAINS.includes(e)}}},{package:"$root$",file:"ui/helpers/utils/network-helper.ts"}],[7125,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.nftTruncateAltText=n.getNftImageAlt=n.getNftImage=void 0;const r=(e,t)=>{if(e.length<=t)return e;const n=e.substring(0,t),r=n.lastIndexOf(" ");return r>0?`${n.substring(0,r)}...`:`${n}...`};n.nftTruncateAltText=r;n.getNftImageAlt=({name:e,tokenId:t,description:n})=>{if(!e&&!t&&!n)return"";const s=n??`${e??""} ${t??""}`.trim();return r(s,100)};n.getNftImage=e=>"string"==typeof e?e:Array.isArray(e)?e[0]:undefined}}},{package:"$root$",file:"ui/helpers/utils/nfts.ts"}],[7126,{"../../../shared/constants/network":5795,"../../../shared/lib/transactions-controller-utils":5899,"../../../shared/modules/conversion.utils":5913,"@ethersproject/providers":784,"@metamask/notification-services-controller/notification-services/ui":2378,"bignumber.js":3972},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAmount=n.createTextItems=void 0,n.formatIsoDateString=function(e){const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(t)},n.formatMenuItemDate=function(e){const t=new Date;if(u(t,e))return new Intl.DateTimeFormat("en",{hour:"numeric",minute:"numeric",hour12:!1}).format(e);if(l(t,e))return new Intl.RelativeTimeFormat("en",{numeric:"auto"}).format(-1,"day");if(d(t,e))return new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}).format(e);return new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"numeric"}).format(e)},n.getLeadingZeroCount=n.getAmount=void 0,n.getNetworkDetailsByChainId=function(e){const t=e.toString(),n=`0x${(0,c.decimalToHex)(e)}`;if(Object.values(a.NOTIFICATION_CHAINS_ID).includes(t)){const e=t;return{nativeCurrencyName:a.NOTIFICATION_NETWORK_CURRENCY_NAME[e]??"",nativeCurrencySymbol:a.NOTIFICATION_NETWORK_CURRENCY_SYMBOL[e]??"",nativeCurrencyLogo:i.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n],blockExplorerConfig:a.SUPPORTED_NOTIFICATION_BLOCK_EXPLORERS[e]}}return{nativeCurrencyName:i.NETWORK_TO_NAME_MAP[n]??"",nativeCurrencySymbol:i.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[n]??"",nativeCurrencyLogo:i.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n],blockExplorerConfig:a.SUPPORTED_NOTIFICATION_BLOCK_EXPLORERS[t]}},n.getRandomKey=n.getNetworkNameByChainId=n.getNetworkFees=void 0,n.getRpcUrlByChainId=f,n.getUsdAmount=void 0,n.hasNetworkFeeFields=g,n.isIpfsURL=void 0;var r=e("bignumber.js"),s=e("@ethersproject/providers"),a=e("@metamask/notification-services-controller/notification-services/ui"),i=e("../../../shared/constants/network"),o=e("../../../shared/lib/transactions-controller-utils"),c=e("../../../shared/modules/conversion.utils");const u=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),l=(e,t)=>{const n=new Date(e);return n.setDate(e.getDate()-1),u(n,t)},d=(e,t)=>e.getFullYear()===t.getFullYear();const p={decimalPlaces:4},m=e=>{var t;return(null===(t=(new r.BigNumber(e,10).toString(10).split(".")[1]??"").match(/^0*/u))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.length)||0};n.getLeadingZeroCount=m;const h=(e,t)=>{const n={...p,...t},r=m(e),s=e.toString().includes(".")||r>0||e.toString().includes("e-");if(e>999)return Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:2}).format(e);if(s){const t=(a=n.decimalPlaces,Boolean(null==n?void 0:n.shouldEllipse)&&r>=a),s=Intl.NumberFormat("en-US",{minimumFractionDigits:t?n.decimalPlaces:undefined,maximumFractionDigits:n.decimalPlaces}).format(e);return t?`${s}...`:s}var a;return e.toString()};n.formatAmount=h;n.getRandomKey=(e,t)=>`${e.replace(/\s+/gu,"_").replace(/[^\w-]/gu,"")}-${t}-${Math.random().toString(36).substring(2,15)}`;n.createTextItems=(e,t)=>({items:e.map((e,t)=>({text:e,highlighted:t%2==1})),variant:t});n.getAmount=(e,t,n)=>{if(!e||!t)return"";const r=(0,o.calcTokenAmount)(e,parseFloat(t)).toNumber();return h(r,n)};n.getUsdAmount=(e,t,n)=>{if(!e||!t||!n)return"";const r=(0,o.calcTokenAmount)(e,parseFloat(t)).toNumber(),s=parseFloat(`${r}`)*parseFloat(n);return h(s)};function f(e){const t=i.FEATURED_RPCS.find(t=>t.chainId===e);if(t)return t.rpcEndpoints[0].url;switch(e){case i.CHAIN_IDS.MAINNET:return i.MAINNET_RPC_URL;case i.CHAIN_IDS.GOERLI:return i.GOERLI_RPC_URL;case i.CHAIN_IDS.SEPOLIA:return i.SEPOLIA_RPC_URL;case i.CHAIN_IDS.LINEA_GOERLI:return i.LINEA_GOERLI_RPC_URL;case i.CHAIN_IDS.LINEA_SEPOLIA:return i.LINEA_SEPOLIA_RPC_URL;case i.CHAIN_IDS.LINEA_MAINNET:return i.LINEA_MAINNET_RPC_URL;case i.CHAIN_IDS.LOCALHOST:return i.LOCALHOST_RPC_URL;default:return i.MAINNET_RPC_URL}}function g(e){return"network_fee"in e.payload.data}n.getNetworkNameByChainId=e=>i.NETWORK_TO_NAME_MAP[e];n.getNetworkFees=async e=>{if(!g(e))throw new Error("Invalid notification type");const t=(0,c.decimalToHex)(e.payload.chain_id),n={url:f(`0x${t}`),headers:{"Infura-Source":"metamask/metamask"}},r=new s.JsonRpcProvider(n);if(!r)throw new Error(`No provider found for chainId ${t}`);try{const[t,n,s]=await Promise.all([r.getTransactionReceipt(e.payload.tx_hash),r.getTransaction(e.payload.tx_hash),r.getBlock(e.payload.block_number)]),a=(t,n)=>h(parseFloat(t)*parseFloat(e.payload.data.network_fee.native_token_price_in_usd),{decimalPlaces:n??4}),i=(0,c.hexWEIToDecETH)(t.gasUsed.mul(t.effectiveGasPrice)._hex),o=a(i),u=n.gasLimit.toNumber(),l=t.gasUsed.toNumber(),d=s.baseFeePerGas?(0,c.hexWEIToDecGWEI)(s.baseFeePerGas._hex):null,p=s.baseFeePerGas?(0,c.hexWEIToDecGWEI)(t.effectiveGasPrice.sub(s.baseFeePerGas)._hex):null;return{transactionFeeInEth:i,transactionFeeInUsd:o,gasLimit:u,gasUsed:l,baseFee:d,priorityFee:p,maxFeePerGas:n.maxFeePerGas?(0,c.hexWEIToDecGWEI)(n.maxFeePerGas._hex):null}}catch(e){throw new Error(`Error fetching network fees for chainId ${t}: ${e}`)}};n.isIpfsURL=e=>e.startsWith("ipfs://")}}},{package:"$root$",file:"ui/helpers/utils/notification.util.ts"}],[7127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isZeroAmount=function(e){if(null===e||e===undefined)return!0;if("number"==typeof e)return 0===e;const t=e.replace(/\D+/gu,"").trim();return/^0*$/u.test(t)}}}},{package:"$root$",file:"ui/helpers/utils/number-utils.ts"}],[7128,{"../../../app/scripts/controllers/permissions":239,"../../../shared/constants/permissions":5799,"../../components/component-library":6529,"../constants/design-system":7083,"./util":7141,"@metamask/chain-agnostic-permission":1420,"@metamask/controller-utils":1449,"@metamask/snaps-rpc-methods":2730,"@metamask/snaps-utils":2903,"deep-freeze-strict":4236,react:5256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionDescription=void 0,n.getWeightedPermissions=function({t:e,isRequestApprovalPermittedChains:t,permissions:n,getSubjectName:r,subjectName:s}){return Object.entries(n).reduce((n,[a,i])=>n.concat(y({t:e,isRequestApprovalPermittedChains:t,permissionName:a,permissionValue:i,subjectName:s,getSubjectName:r})),[]).sort((e,t)=>e.weight-t.weight)};var r=h(e("deep-freeze-strict")),s=h(e("react")),a=e("@metamask/snaps-rpc-methods"),i=e("@metamask/snaps-utils"),o=e("@metamask/controller-utils"),c=e("@metamask/chain-agnostic-permission"),u=e("../../../shared/constants/permissions"),l=e("../../components/component-library"),d=e("../constants/design-system"),p=e("../../../app/scripts/controllers/permissions"),m=e("./util");function h(e){return e&&e.__esModule?e:{default:e}}const f=Symbol("unknown"),g=s.default.createElement(l.Icon,{name:l.IconName.Info,size:l.IconSize.Sm,color:d.IconColor.iconMuted});function b(e){return s.default.createElement(l.Text,{fontWeight:d.FontWeight.Medium,variant:d.TextVariant.inherit,color:d.TextColor.inherit},e)}const S=(0,r.default)({[c.Caip25EndowmentPermissionName]:({t:e,isRequestApprovalPermittedChains:t})=>t?{label:e("permission_walletSwitchEthereumChain"),leftIcon:l.IconName.Wifi,weight:u.PermissionWeight.permittedChains}:{label:e("permission_ethereumAccounts"),leftIcon:l.IconName.Eye,weight:u.PermissionWeight.eth_accounts},[u.RestrictedMethods.eth_accounts]:({t:e})=>({label:e("permission_ethereumAccounts"),leftIcon:l.IconName.Eye,weight:u.PermissionWeight.eth_accounts}),[p.PermissionNames.permittedChains]:({t:e})=>({label:e("permission_walletSwitchEthereumChain"),leftIcon:l.IconName.Wifi,weight:u.PermissionWeight.permittedChains}),[u.RestrictedMethods.snap_dialog]:({t:e,subjectName:t})=>({label:e("permission_dialog"),description:e("permission_dialogDescription",[b(t)]),leftIcon:l.IconName.Messages,weight:u.PermissionWeight.snap_dialog}),[u.RestrictedMethods.snap_notify]:({t:e,subjectName:t})=>({label:e("permission_notifications"),description:e("permission_notificationsDescription",[b(t)]),leftIcon:l.IconName.Notification,weight:u.PermissionWeight.snap_notify}),[u.RestrictedMethods.snap_getBip32PublicKey]:({t:e,permissionValue:t,subjectName:n})=>t.caveats[0].value.map(({path:t,curve:r},a)=>{var o;const c={leftIcon:l.IconName.SecuritySearch,weight:u.PermissionWeight.snap_getBip32PublicKey,id:`public-key-access-bip32-${null===(o=t.join("-"))||void 0===o?void 0:o.replace(/'/gu,"h")}-${r}-${a}`,warningMessageSubject:(0,i.getSnapDerivationPathName)(t,r)??`${e("unknownNetworkForKeyEntropy")}  ${t.join("/")} (${r})`},p=(0,i.getSnapDerivationPathName)(t,r);return p?{...c,label:e("permission_viewNamedBip32PublicKeys",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:t.join("/")},p)]),description:e("permission_viewBip32PublicKeysDescription",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:`description-${t.join("/")}`},p),b(n)])}:{...c,label:e("permission_viewBip32PublicKeys",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:t.join("/")},`${e("unknownNetworkForKeyEntropy")} `," ",t.join("/")),r]),description:e("permission_viewBip32PublicKeysDescription",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:`description-${t.join("/")}`},t.join("/")),b(n)])}}),[u.RestrictedMethods.snap_getBip32Entropy]:({t:e,permissionValue:t,subjectName:n})=>t.caveats[0].value.map(({path:t,curve:r},a)=>{var o;const c={leftIcon:l.IconName.Key,weight:u.PermissionWeight.snap_getBip32Entropy,id:`key-access-bip32-${null===(o=t.join("-"))||void 0===o?void 0:o.replace(/'/gu,"h")}-${r}-${a}`,warningMessageSubject:(0,i.getSnapDerivationPathName)(t,r)??`${e("unknownNetworkForKeyEntropy")} ${t.join("/")} (${r})`},p=(0,i.getSnapDerivationPathName)(t,r);return p?{...c,label:e("permission_manageBip32Keys",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:t.join("/")},p)]),description:e("permission_manageBip44AndBip32KeysDescription",[b(n)])}:{...c,label:e("permission_manageBip32Keys",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:t.join("/")},`${e("unknownNetworkForKeyEntropy")} ${t.join("/")} (${r})`)]),description:e("permission_manageBip44AndBip32KeysDescription",[b(n)])}}),[u.RestrictedMethods.snap_getBip44Entropy]:({t:e,permissionValue:t,subjectName:n})=>t.caveats[0].value.map(({coinType:t},r)=>({label:e("permission_manageBip44Keys",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:`coin-type-${t}`},(0,i.getSlip44ProtocolName)(t)??`${e("unknownNetworkForKeyEntropy")} m/44'/${t}'`)]),description:e("permission_manageBip44AndBip32KeysDescription",[b(n)]),leftIcon:l.IconName.Key,weight:u.PermissionWeight.snap_getBip44Entropy,id:`key-access-bip44-${t}-${r}`,warningMessageSubject:(0,i.getSlip44ProtocolName)(t)??`${e("unknownNetworkForKeyEntropy")} m/44'/${t}'`})),[u.RestrictedMethods.snap_getEntropy]:({t:e,subjectName:t})=>({label:e("permission_getEntropy",[b(t)]),description:e("permission_getEntropyDescription",[b(t)]),leftIcon:l.IconName.SecurityKey,weight:u.PermissionWeight.snap_getEntropy}),[u.RestrictedMethods.snap_manageState]:({t:e,subjectName:t})=>({label:e("permission_manageState"),description:e("permission_manageStateDescription",[b(t)]),leftIcon:l.IconName.AddSquare,weight:u.PermissionWeight.snap_manageState}),[u.RestrictedMethods.snap_getLocale]:({t:e,subjectName:t})=>({label:e("permission_getLocale"),description:e("permission_getLocaleDescription",[b(t)]),leftIcon:l.IconName.Global,weight:u.PermissionWeight.snap_getLocale}),[u.RestrictedMethods.snap_getPreferences]:({t:e,subjectName:t})=>({label:e("permission_getPreferences"),description:e("permission_getPreferencesDescription",[b(t)]),leftIcon:l.IconName.Customize,weight:4}),[u.RestrictedMethods.wallet_snap]:({t:e,permissionValue:t,getSubjectName:n})=>{const r=t.caveats[0].value,a={leftIcon:l.IconName.Flash,rightIcon:g,weight:u.PermissionWeight.wallet_snap};return Object.keys(r).map(t=>{const r=n(t);return r?{...a,label:e("permission_accessNamedSnap",[s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:t},r)]),description:e("permission_accessSnapDescription",[r])}:{...a,label:e("permission_accessSnap",[t]),description:e("permission_accessSnapDescription",[t])}})},[u.EndowmentPermissions["endowment:network-access"]]:({t:e,subjectName:t})=>({label:e("permission_accessNetwork"),description:e("permission_accessNetworkDescription",[b(t)]),leftIcon:l.IconName.Wifi,weight:u.PermissionWeight.endowment_networkAccess}),[u.EndowmentPermissions["endowment:webassembly"]]:({t:e,subjectName:t})=>({label:e("permission_webAssembly"),description:e("permission_webAssemblyDescription",[b(t)]),leftIcon:l.IconName.DocumentCode,rightIcon:null,weight:u.PermissionWeight.endowment_webassembly}),[u.EndowmentPermissions["endowment:transaction-insight"]]:({t:e,permissionValue:t,subjectName:n})=>{const r={leftIcon:l.IconName.Speedometer,weight:u.PermissionWeight.endowment_transactionInsight},s=[{...r,label:e("permission_transactionInsight"),description:e("permission_transactionInsightDescription",[b(n)])}];return(0,o.isNonEmptyArray)(t.caveats)&&t.caveats[0].type===i.SnapCaveatType.TransactionOrigin&&t.caveats[0].value&&s.push({...r,label:e("permission_transactionInsightOrigin"),description:e("permission_transactionInsightOriginDescription",[b(n)]),leftIcon:l.IconName.Explore}),s},[u.EndowmentPermissions["endowment:cronjob"]]:({t:e,subjectName:t})=>({label:e("permission_cronjob"),description:e("permission_cronjobDescription",[b(t)]),leftIcon:l.IconName.Clock,weight:u.PermissionWeight.endowment_cronjob}),[u.EndowmentPermissions["endowment:ethereum-provider"]]:({t:e,subjectName:t})=>({label:e("permission_ethereumProvider"),description:e("permission_ethereumProviderDescription",[b(t)]),leftIcon:l.IconName.Ethereum,weight:u.PermissionWeight.endowment_ethereumProvider,id:"ethereum-provider-access",message:e("ethereumProviderAccess",[b(t)])}),[u.EndowmentPermissions["endowment:rpc"]]:({t:e,permissionValue:t,subjectName:n})=>{const r={leftIcon:l.IconName.Hierarchy,weight:u.PermissionWeight.endowment_rpc},{snaps:i,dapps:o,allowedOrigins:c}=(0,a.getRpcCaveatOrigins)(t),p=[];if(i&&p.push({...r,label:e("permission_rpc",[e("otherSnaps"),b(n)]),description:e("permission_rpcDescription",[e("otherSnaps"),b(n)])}),o&&p.push({...r,label:e("permission_rpc",[e("websites"),b(n)]),description:e("permission_rpcDescription",[e("websites"),b(n)])}),(null==c?void 0:c.length)>0){let t;if(1===c.length)t=s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,style:{lineBreak:"anywhere"}},c[0]);else{const n=c.slice(-1);t=e("permission_rpcDescriptionOriginList",[c.slice(0,-1).map(e=>s.default.createElement(s.default.Fragment,null,s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,style:{lineBreak:"anywhere"}},e),", ")),s.default.createElement(l.Text,{color:d.TextColor.inherit,variant:d.TextVariant.inherit,fontWeight:d.FontWeight.Medium,key:"2",style:{lineBreak:"anywhere"}},n)])}p.push({...r,label:e("permission_rpc",[t,b(n)]),description:e("permission_rpcDescription",[t,b(n)])})}return p},[u.EndowmentPermissions["endowment:lifecycle-hooks"]]:({t:e,subjectName:t})=>({label:e("permission_lifecycleHooks"),description:e("permission_lifecycleHooksDescription",[b(t)]),leftIcon:l.IconName.Hierarchy,weight:u.PermissionWeight.endowment_lifecycleHooks}),[u.EndowmentPermissions["endowment:page-home"]]:({t:e,subjectName:t})=>({label:e("permission_homePage"),description:e("permission_homePageDescription",[b(t)]),leftIcon:l.IconName.Home,weight:u.PermissionWeight.endowment_pageHome}),[u.RestrictedMethods.snap_manageAccounts]:({t:e,subjectName:t})=>({label:e("permission_manageAccounts"),description:e("permission_manageAccountsDescription",[b(t)]),leftIcon:l.IconName.UserCircleAdd,rightIcon:null,weight:u.PermissionWeight.snap_manageAccounts}),[u.EndowmentPermissions["endowment:keyring"]]:({t:e,subjectName:t})=>({label:e("permission_keyring"),description:e("permission_keyringDescription",[b(t)]),leftIcon:l.IconName.UserCircleAdd,rightIcon:null,weight:u.PermissionWeight.endowment_keyring}),[u.EndowmentPermissions["endowment:name-lookup"]]:({t:e})=>({label:e("permission_nameLookup"),description:e("permission_nameLookupDescription"),leftIcon:l.IconName.Search,weight:u.PermissionWeight.endowment_nameLookup}),[u.EndowmentPermissions["endowment:assets"]]:({t:e,subjectName:t})=>({label:e("permission_assets"),description:e("permission_assetsDescription",[b(t)]),leftIcon:l.IconName.Coin,weight:u.PermissionWeight.endowment_assets}),[u.EndowmentPermissions["endowment:protocol"]]:({t:e,subjectName:t})=>({label:e("permission_protocol"),description:e("permission_protocolDescription",[b(t)]),leftIcon:l.IconName.GlobalSearch,weight:u.PermissionWeight.endowment_protocol}),[u.EndowmentPermissions["endowment:signature-insight"]]:({t:e,permissionValue:t,subjectName:n})=>{const r={leftIcon:l.IconName.Warning,weight:u.PermissionWeight.endowment_signatureInsight},s=[{...r,label:e("permission_signatureInsight"),description:e("permission_signatureInsightDescription",[b(n)])}];return(0,o.isNonEmptyArray)(t.caveats)&&t.caveats.find(e=>e.type===i.SnapCaveatType.SignatureOrigin&&e.value)&&s.push({...r,label:e("permission_signatureInsightOrigin"),description:e("permission_signatureInsightOriginDescription",[b(n)]),leftIcon:l.IconName.Explore}),s},[u.ConnectionPermission.connection_permission]:({t:e,permissionValue:t,subjectName:n})=>Object.keys(t).map(t=>{let r=(0,m.getURLHost)(t);return r||(r=t.replace("npm:","")),{label:e("snapConnectTo",[s.default.createElement(l.Text,{key:"connectToMain",fontWeight:d.FontWeight.Medium,variant:d.TextVariant.inherit,color:d.TextColor.inherit,style:{lineBreak:"anywhere"}},r)]),description:e("snapConnectionPermissionDescription",[b(n),s.default.createElement(l.Text,{key:"connectToDescription",fontWeight:d.FontWeight.Medium,variant:d.TextVariant.inherit,color:d.TextColor.inherit},r)]),leftIcon:undefined,connection:t,connectionName:r,subjectName:n,weight:u.PermissionWeight.connection_permission}}),[f]:({t:e,permissionName:t})=>({label:e("permission_unknown",[t??"undefined"]),leftIcon:l.IconName.Question,rightIcon:null,weight:u.PermissionWeight.unknown_permission})}),y=({t:e,isRequestApprovalPermittedChains:t,permissionName:n,permissionValue:r,subjectName:s,getSubjectName:a})=>{let i=S[f];Object.hasOwnProperty.call(S,n)&&(i=S[n]);const o=i({t:e,isRequestApprovalPermittedChains:t,permissionName:n,permissionValue:r,subjectName:s,getSubjectName:a});return Array.isArray(o)?o.map(e=>({...e,permissionName:n,permissionValue:r})):[{...o,permissionName:n,permissionValue:r}]};n.getPermissionDescription=y}}},{package:"$root$",file:"ui/helpers/utils/permission.js"}],[7129,{"../../../shared/constants/permissions":5799,"@metamask/keyring-api":2193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsEthPermissionsAndNonEvmAccount=void 0;var r=e("@metamask/keyring-api"),s=e("../../../shared/constants/permissions");n.containsEthPermissionsAndNonEvmAccount=(e,t)=>{const n=Object.keys(s.RestrictedEthMethods),a=Object.keys(t).some(e=>n.includes(e)),i=e.some(e=>!(0,r.isEvmAccountType)(e.type));return a&&i}}}},{package:"$root$",file:"ui/helpers/utils/permissions.ts"}],[7130,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPortfolioUrl=function(e="",t="",n="",r=!1,s=!1,a,i){const o=new URL(e,"https://app.metamask.io");o.searchParams.append("metamaskEntry",t),o.searchParams.append("metametricsId",n),o.searchParams.append("metricsEnabled",String(r)),o.searchParams.append("marketingEnabled",String(s)),a&&o.searchParams.append("accountAddress",a);i&&o.searchParams.append("tab",i);return o.href}}}},{package:"$root$",file:"ui/helpers/utils/portfolio.js"}],[7131,{"../../../shared/modules/environment":5917,"../constants/settings":7089},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.colorText=l,n.escapeRegExp=void 0,n.getNumberOfSettingRoutesInTab=function(e,t){return u(e,t).length},n.getSettingsRoutes=c,n.getSpecificSettingsRoute=function(e,t,n){return c().find(r=>r.tabMessage(e)===t&&r.sectionMessage(e)===n)},n.handleSettingsRefs=function(e,t,n){const r=u(e,t),s=r.findIndex(e=>e.route.substring(1)===window.location.hash.substring(1));if(-1===s)return;const a=1===r.length?n:n[s];if(null!=a&&a.current){a.current.scrollIntoView({behavior:"smooth"}),a.current.focus();const e=window.location.hash.split("#")[1];window.location.hash=e}},n.highlightSearchedText=function(){const e=document.getElementById("search-settings"),t=new RegExp(d(e.value),"gi");[...document.querySelectorAll(".settings-page__header__search__list__item")].forEach(e=>{const n=e.querySelector(".settings-page__header__search__list__item__tab"),r=e.querySelector(".settings-page__header__search__list__item__section");l(n,t),l(r,t)})};var r,s=(r=e("../constants/settings"))&&r.__esModule?r:{default:r},a=e("../../../shared/modules/environment");let i;const o={METAMASK_SHIELD_ENABLED:a.getIsMetaMaskShieldFeatureEnabled,ENABLE_SETTINGS_PAGE_DEV_OPTIONS:a.getIsSettingsPageDevOptionsEnabled};function c(){return i||(i=s.default.filter(e=>(!e.featureFlag||function(e){const t=o[e];return t?t():(console.warn(`Unknown feature flag: ${e}`),!1)}(e.featureFlag))&&!e.hidden),i)}function u(e,t){return c().filter(n=>n.tabMessage(e)===t)}function l(e,t){if(null!==e){let n=e.innerHTML;n=n.replace("&amp;","&"),n=n.replace(/(<span class="settings-page__header__search__list__item__highlight">|<\/span>)/gim,""),e.innerHTML=n.replace(t,'<span class="settings-page__header__search__list__item__highlight">$&</span>')}}const d=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n.escapeRegExp=d}}},{package:"$root$",file:"ui/helpers/utils/settings-search.js"}],[7133,{"../../../shared/constants/state-corruption":5808,"../../../shared/lib/error-utils":5868,"../../../shared/lib/get-first-preferred-lang-code":5876,"../../../shared/lib/switch-direction":5895,"../../../shared/lib/translate":5902,"../../../shared/lib/ui-utils":5904,lodash:4838,loglevel:4846},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.displayStateCorruptionError=async function(e,t,n,s,i){r.default.error(n);const o=await p(a.VAULT_RECOVERY_LINK,s,i,a.SUPPORT_LINK);e.innerHTML=o;const c=e.querySelector("#critical-error-button");c&&(c.addEventListener("click",function e(){confirm((0,l.t)("stateCorruptionAreYouSure")??"")&&(this.removeEventListener("click",e),this.disabled=!0,this.innerText=s?(0,l.t)("stateCorruptionRestoringDatabase")??"":(0,l.t)("stateCorruptionResettingDatabase")??"",t.postMessage({data:{method:u.METHOD_REPAIR_DATABASE}}))}),setTimeout(()=>{c.disabled=!1},5e3))},n.getStateCorruptionErrorHtml=p;var r=d(e("loglevel")),s=e("lodash"),a=e("../../../shared/lib/ui-utils"),i=e("../../../shared/lib/error-utils"),o=e("../../../shared/lib/switch-direction"),c=d(e("../../../shared/lib/get-first-preferred-lang-code")),u=e("../../../shared/constants/state-corruption"),l=e("../../../shared/lib/translate");function d(e){return e&&e.__esModule?e:{default:e}}async function p(e,t,n,r){let a;n?(a=n,await(0,l.updateCurrentLocale)(n)):(a=await(0,c.default)(),await(0,l.updateCurrentLocale)(a)),(0,o.switchDirectionForPreferredLocale)(a);const u=`<a href="${(0,s.escape)(e)}" title="${(0,s.escape)((0,l.t)("stateCorruptionTheseInstructionsLinkTitle")??"")}" class="critical-error__link" target="_blank" rel="noopener noreferrer">${(0,s.escape)((0,l.t)("stateCorruptionTheseInstructions")??"")}</a>`;let d,p,m;t?(d=(0,l.t)("stateCorruptionDetectedWithBackup")??"",p=(0,l.t)("stateCorruptionCopyAndRestoreBeforeRecovery",u)??"",m=(0,l.t)("stateCorruptionRestoreAccountsFromBackup")??""):(d=(0,l.t)("stateCorruptionDetectedNoBackup")??"",p=(0,l.t)("stateCorruptionCopyAndRestoreBeforeReset",u)??"",m=(0,l.t)("stateCorruptionResetMetaMaskState")??"");const h=`\n    <h1>${(0,l.t)("stateCorruptionMetamaskDatabaseCannotBeAccessed")}</h1>\n  `,f=`\n    <p>${(0,s.escape)(d)}</p>\n    <p>${p}</p>\n    <button disabled id="critical-error-button" class="critical-error__button-restore button btn-primary">\n      ${m}\n    </button>\n  `,g=r?`<p class="critical-error__footer small">${(0,s.escape)((0,l.t)("unexpectedBehavior")??"")} <a\n        href="${(0,s.escape)(r)}"\n        class="critical-error__link"\n        target="_blank"\n        rel="noopener noreferrer">\n          ${(0,s.escape)((0,l.t)("sendBugReport")??"")}\n      </a>\n    </p>`:"";return(0,i.getErrorHtmlBase)(`\n    ${h}\n    ${f}\n    ${g}\n  `)}}}},{package:"$root$",file:"ui/helpers/utils/state-corruption-html.ts"}],[7134,{"../../../app/scripts/lib/util":372,"../../ducks/metamask/metamask":7067,"../../selectors":8094,"../../selectors/metamask-notifications/metamask-notifications":8095,"../../selectors/nft":8107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getStartupTraceTags=function(e){var t;const n=(0,r.getEnvironmentType)(),c=(0,s.getIsUnlocked)(e),u=(0,a.getInternalAccounts)(e).length,l=(0,o.selectAllNftsFlat)(e).length,d=(0,i.getMetamaskNotifications)(e).length,p=(0,a.selectAllTokensFlat)(e).length,m=(0,a.getTransactions)(e).length,h=(0,a.getPendingApprovals)(e),f=null==h||null===(t=h[0])||void 0===t?void 0:t.type;return{"wallet.account_count":u,"wallet.nft_count":l,"wallet.notification_count":d,"wallet.pending_approval":f,"wallet.token_count":p,"wallet.transaction_count":m,"wallet.unlocked":c,"wallet.ui_type":n}};var r=e("../../../app/scripts/lib/util"),s=e("../../ducks/metamask/metamask"),a=e("../../selectors"),i=e("../../selectors/metamask-notifications/metamask-notifications"),o=e("../../selectors/nft")}}},{package:"$root$",file:"ui/helpers/utils/tags.ts"}],[7136,{"../../../shared/modules/hexstring-utils":5922,"@metamask/bridge-controller":1369,"@metamask/design-system-react":1807,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shouldShowContractAddress=n.isNativeAddress=n.getPriceChangeColor=n.formatPercentage=n.formatContractAddress=n.formatCompactCurrency=void 0;var r=e("@metamask/utils"),s=e("@metamask/bridge-controller"),a=e("@metamask/design-system-react"),i=e("../../../shared/modules/hexstring-utils");const o=e=>{if(!e)return!1;if((0,s.isNativeAddress)(e))return!0;const t=e.toLowerCase();return["0","0x0","0x","0x0000000000000000000000000000000000000000"].includes(t)};n.isNativeAddress=o;n.formatPercentage=e=>{if(e===undefined||null===e)return"";return`${e>0?"+":""}${e.toFixed(2)}%`};n.formatCompactCurrency=(e,t,n="en-US")=>{if(!e)return"";return new Intl.NumberFormat(n,{style:"currency",currency:t,notation:"compact",maximumFractionDigits:2}).format(e)};n.formatContractAddress=e=>{if(!e)return"";if((0,r.isCaipAssetType)(e)){const{assetReference:t}=(0,r.parseCaipAssetType)(e);return(0,r.isStrictHexString)(t)?(0,i.toChecksumHexAddress)(t):t}return(0,r.isStrictHexString)(e)?(0,i.toChecksumHexAddress)(e):e};n.getPriceChangeColor=e=>e>0?a.TextColor.SuccessDefault:e<0?a.TextColor.ErrorDefault:a.TextColor.TextDefault;n.shouldShowContractAddress=e=>{if(!e)return!1;if(o(e))return!1;const t=e.toLowerCase();return!["0","0x0","0x"].includes(t)}}}},{package:"$root$",file:"ui/helpers/utils/token-insights.ts"}],[7139,{"../../components/component-library":6529,"../../hooks/useTrustSignals":7279,"../constants/design-system":7083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTrustSignalIcon=function(e){if(!e)return null;switch(e){case a.TrustSignalDisplayState.Malicious:return{name:r.IconName.Danger,color:s.IconColor.errorDefault};case a.TrustSignalDisplayState.Verified:return{name:r.IconName.VerifiedFilled,color:s.IconColor.infoDefault};case a.TrustSignalDisplayState.Warning:return null;case a.TrustSignalDisplayState.Unknown:return{name:r.IconName.Question,color:undefined};case a.TrustSignalDisplayState.Petname:case a.TrustSignalDisplayState.Recognized:return null;default:return{name:r.IconName.Question,color:undefined}}};var r=e("../../components/component-library"),s=e("../constants/design-system"),a=e("../../hooks/useTrustSignals")}}},{package:"$root$",file:"ui/helpers/utils/trust-signals.ts"}],[7142,{"../../../app/scripts/lib/util":372,"../../../shared/constants/app":5775,"../../../shared/modules/browser-runtime.utils":5910},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../shared/constants/app"),s=e("../../../app/scripts/lib/util"),a=e("../../../shared/modules/browser-runtime.utils");n.default=class{static async checkStatus(){const e=(0,s.getEnvironmentType)()===r.ENVIRONMENT_TYPE_POPUP,t=(0,a.getBrowserName)()===(r.PLATFORM_FIREFOX||r.PLATFORM_BRAVE),n=(await window.navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),i=n.length>0,o=n.some(e=>e.label&&e.label.length>0);if(i){let n=!0;return(t&&e||e&&!o)&&(n=!1),{permissions:o,environmentReady:n}}const c=new Error("No webcam found");throw c.type="NO_WEBCAM_FOUND",c}}}}},{package:"$root$",file:"ui/helpers/utils/webcam-utils.js"}],[7143,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.openWindow=void 0;n.openWindow=(e,t)=>{window.open(e,t||"_blank","noopener")}}}},{package:"$root$",file:"ui/helpers/utils/window.ts"}],[7144,{"../../../shared/constants/multichain/networks":5794,"../../selectors":8094,"./useMultichainWalletSnapClient":7146,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountCreationOnNetworkChange=void 0;var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("../../../shared/constants/multichain/networks"),i=e("../../selectors"),o=e("./useMultichainWalletSnapClient");n.useAccountCreationOnNetworkChange=()=>{const e=(0,r.c)(8),t=(0,o.useMultichainWalletSnapClient)(o.WalletClientType.Bitcoin),n=(0,o.useMultichainWalletSnapClient)(o.WalletClientType.Solana),c=(0,s.useSelector)(i.getMetaMaskAccountsOrdered);let u;e[0]!==t||e[1]!==n?(u=async e=>{e:switch(e){case a.MultichainNetworks.BITCOIN:await t.createAccount({scope:a.MultichainNetworks.BITCOIN});break e;case a.MultichainNetworks.SOLANA:await n.createAccount({scope:a.MultichainNetworks.SOLANA});break e;default:throw new Error(`Unsupported chainId: ${e}`)}},e[0]=t,e[1]=n,e[2]=u):u=e[2];const l=u;let d;e[3]!==c?(d=e=>c.some(t=>{const{scopes:n}=t;return n.includes(e)}),e[3]=c,e[4]=d):d=e[4];const p=d;let m;return e[5]!==l||e[6]!==p?(m={createAccount:l,hasAnyAccountsInNetwork:p},e[5]=l,e[6]=p,e[7]=m):m=e[7],m}}}},{package:"$root$",file:"ui/hooks/accounts/useAccountCreationOnNetworkChange.ts"}],[7145,{"../../store/actions":8127,"../useI18nContext":7235,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountsOperationsLoadingStates=void 0;var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("react"),i=e("../useI18nContext"),o=e("../../store/actions");function c(e){return e.metamask.isAccountTreeSyncingInProgress}n.useAccountsOperationsLoadingStates=()=>{const e=(0,r.c)(10),t=(0,i.useI18nContext)(),n=(0,s.useDispatch)(),u=(0,s.useSelector)(c);let l,d;e[0]!==n?(l=()=>{(0,o.forceUpdateMetamaskState)(n)},e[0]=n,e[1]=l):l=e[1],e[2]!==u?(d=[u],e[2]=u,e[3]=d):d=e[3],(0,a.useEffect)(l,d);const p=u;let m;e:{if(!0===u){let n;e[4]!==t?(n=t("syncing"),e[4]=t,e[5]=n):n=e[5],m=n;break e}m=undefined}const h=m;let f;return e[6]!==p||e[7]!==u||e[8]!==h?(f={areAnyOperationsLoading:p,isAccountTreeSyncingInProgress:u,loadingMessage:h},e[6]=p,e[7]=u,e[8]=h,e[9]=f):f=e[9],f}}}},{package:"$root$",file:"ui/hooks/accounts/useAccountsOperationsLoadingStates.ts"}],[7146,{"../../../shared/lib/accounts":5819,"../../../shared/lib/accounts/bitcoin-wallet-snap":5818,"../../../shared/lib/accounts/solana-wallet-snap":5822,"../../../shared/lib/accounts/tron-wallet-snap":5823,"../../store/actions":8127,"@metamask/keyring-controller":2203,"@metamask/snaps-utils":2903,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WalletClientType=n.MultichainWalletSnapSender=n.MultichainWalletSnapClient=n.EVM_WALLET_TYPE=void 0,n.useMultichainWalletSnapClient=function(e){const t=(0,r.c)(2);let n;t[0]!==e?(n=new T(e),t[0]=e,t[1]=n):n=t[1];return n},n.useMultichainWalletSnapSender=function(e){const t=(0,r.c)(2);let n;t[0]!==e?(n=new S(e),t[0]=e,t[1]=n):n=t[1];return n};var r=e("react-compiler-runtime"),s=e("@metamask/keyring-controller"),a=e("@metamask/snaps-utils"),i=(e("react"),e("../../../shared/lib/accounts")),o=e("../../../shared/lib/accounts/bitcoin-wallet-snap"),c=e("../../../shared/lib/accounts/solana-wallet-snap"),u=e("../../../shared/lib/accounts/tron-wallet-snap"),l=e("../../store/actions");function d(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function p(e,t){return e.get(h(e,t))}function m(e,t,n){return e.set(h(e,t),n),n}function h(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=n.WalletClientType=function(e){return e.Bitcoin="bitcoin-wallet-snap",e.Solana="solana-wallet-snap",e.Tron="tron-wallet-snap",e}({});n.EVM_WALLET_TYPE="evm";const b={[g.Bitcoin]:{id:o.BITCOIN_WALLET_SNAP_ID,name:o.BITCOIN_WALLET_NAME},[g.Solana]:{id:c.SOLANA_WALLET_SNAP_ID,name:c.SOLANA_WALLET_NAME},[g.Tron]:{id:u.TRON_WALLET_SNAP_ID,name:u.TRON_WALLET_NAME}};class S{constructor(e){f(this,"snapId",void 0),f(this,"send",async e=>await(0,l.handleSnapRequest)({origin:"metamask",snapId:this.snapId,handler:a.HandlerType.OnKeyringRequest,request:e})),this.snapId=e}}n.MultichainWalletSnapSender=S;var y=new WeakMap,v=new WeakMap;class T{constructor(e){d(this,y,void 0),d(this,v,void 0);const{id:t,name:n}=b[e];if(m(y,this,t),m(v,this,n),!p(y,this))throw new Error(`Unsupported client type: ${e}`)}getSnapId(){return p(y,this)}getSnapName(){return p(v,this)}async createAccount(e,t){return await(0,l.createSnapAccount)(p(y,this),e,t)}async getNextAvailableAccountName(e){return(0,i.getNextAvailableSnapAccountName)(async()=>(0,l.getNextAvailableAccountName)(s.KeyringTypes.snap),p(y,this),e)}}n.MultichainWalletSnapClient=T}}},{package:"$root$",file:"ui/hooks/accounts/useMultichainWalletSnapClient.ts"}],[7147,{"../../../shared/constants/bridge":5777,"../../../shared/constants/common":5778,"../../../shared/constants/multichain/networks":5794,"@metamask/bridge-controller":1369,"@metamask/transaction-controller":2994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcTxMeta:t,nonEvmTransaction:n}){var u,l,d,p,m,h;if(!((null==t?void 0:t.type)&&[r.TransactionType.bridge,r.TransactionType.swap].includes(t.type)||n))return{srcNetwork:undefined,destNetwork:undefined};const{srcChainId:f,destChainId:g}=e?c(e):{srcChainId:(null==t?void 0:t.chainId)??(null==n?void 0:n.chain),destChainId:(null==t?void 0:t.chainId)??(null==n?void 0:n.chain)};if(!f||!g)return{srcNetwork:undefined,destNetwork:undefined};let b,S,y,v;try{b=(0,s.formatChainIdToCaip)(f),y=(0,s.getNativeAssetForChainId)(f),S=(0,s.formatChainIdToCaip)(g),v=(0,s.getNativeAssetForChainId)(g)}catch(e){return console.warn("Error getting XChain swaps network info",e),{srcNetwork:undefined,destNetwork:undefined}}const T=(0,s.isNonEvmChainId)(f)?b:(0,s.formatChainIdToHex)(f),k={chainId:b,name:i.NETWORK_TO_SHORT_NETWORK_NAME_MAP[T],...(0,s.isNonEvmChainId)(b)?{isEvm:!1,nativeCurrency:null===(u=y)||void 0===u?void 0:u.assetId,blockExplorerUrl:null===(l=o.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[b])||void 0===l?void 0:l.url}:{defaultBlockExplorerUrlIndex:0,blockExplorerUrls:[a.CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[T]],defaultRpcEndpointIndex:0,rpcEndpoints:[],nativeCurrency:null===(d=y)||void 0===d?void 0:d.symbol,isEvm:!0}},w=(0,s.isNonEvmChainId)(g)?S:(0,s.formatChainIdToHex)(g),_={chainId:S,name:i.NETWORK_TO_SHORT_NETWORK_NAME_MAP[w],...(0,s.isNonEvmChainId)(S)?{isEvm:!1,nativeCurrency:null===(p=v)||void 0===p?void 0:p.assetId,blockExplorerUrl:null===(m=o.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[S])||void 0===m?void 0:m.url}:{defaultBlockExplorerUrlIndex:0,blockExplorerUrls:[a.CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[w]],defaultRpcEndpointIndex:0,rpcEndpoints:[],nativeCurrency:null===(h=v)||void 0===h?void 0:h.symbol,isEvm:!0}};return{srcNetwork:k,destNetwork:_}};var r=e("@metamask/transaction-controller"),s=e("@metamask/bridge-controller"),a=e("../../../shared/constants/common"),i=e("../../../shared/constants/bridge"),o=e("../../../shared/constants/multichain/networks");const c=({quote:e})=>{const{srcChainId:t,destChainId:n}=e;return{srcChainId:t,destChainId:n}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeChainInfo.ts"}],[7148,{"../../ducks/bridge/bridge":7056,"../../ducks/bridge/selectors":7057,"../../ducks/bridge/utils":7058,"../../ducks/metamask/metamask":7067,"../../selectors":8094,"../../selectors/multichain":8103,"../useMultichainSelector":7245,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeExchangeRates=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("../../ducks/bridge/selectors"),o=e("../../selectors"),c=e("../../ducks/metamask/metamask"),u=e("../../ducks/bridge/bridge"),l=e("../../ducks/bridge/utils"),d=e("../useMultichainSelector"),p=e("../../selectors/multichain");n.useBridgeExchangeRates=()=>{const e=(0,r.c)(17),t=(0,d.useMultichainSelector)(p.getMultichainCurrentChainId),n=(0,a.useDispatch)(),m=(0,a.useSelector)(c.getCurrentCurrency),h=(0,a.useSelector)(i.getFromToken),f=(0,a.useSelector)(o.getMarketData);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=new AbortController,e[0]=g):g=e[0];const b=(0,s.useRef)(g);let S;e[1]!==h||e[2]!==f?(S=h?(0,l.exchangeRateFromMarketData)(h.chainId,h.address,f):undefined,e[1]=h,e[2]=f,e[3]=S):S=e[3];const y=S;let v,T,k,w;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>()=>{var e;null===(e=b.current)||void 0===e||e.abort(),b.current=null},T=[],e[4]=v,e[5]=T):(v=e[4],T=e[5]),(0,s.useEffect)(v,T),e[6]!==y||e[7]!==m||e[8]!==n||e[9]!==h?(k=()=>{var e;null===(e=b.current)||void 0===e||e.abort(),b.current=new AbortController,h&&!y&&n((0,u.setSrcTokenExchangeRates)({chainId:h.chainId,tokenAddress:h.address,currency:m,signal:b.current.signal}))},e[6]=y,e[7]=m,e[8]=n,e[9]=h,e[10]=k):k=e[10],e[11]!==y||e[12]!==m||e[13]!==n||e[14]!==t||e[15]!==h?(w=[m,n,h,t,y],e[11]=y,e[12]=m,e[13]=n,e[14]=t,e[15]=h,e[16]=w):w=e[16],(0,s.useEffect)(k,w)}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeExchangeRates.ts"}],[7149,{"../../../shared/lib/asset-utils":5824,"../../../shared/lib/deep-links/routes/swap":5844,"../../../shared/lib/transactions-controller-utils":5899,"../../ducks/bridge/actions":7055,"../../ducks/bridge/selectors":7057,"@metamask/bridge-controller":1369,"@metamask/utils":3116,react:5256,"react-redux":5221,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeQueryParams=void 0;var r=e("react"),s=e("react-redux"),a=e("react-router-dom"),i=e("@metamask/utils"),o=e("@metamask/bridge-controller"),c=e("../../../shared/lib/asset-utils"),u=e("../../../shared/lib/deep-links/routes/swap"),l=e("../../../shared/lib/transactions-controller-utils"),d=e("../../ducks/bridge/actions"),p=e("../../ducks/bridge/selectors");const m=e=>{if(!e)return null;try{const t=i.CaipAssetTypeStruct.create(e),{chainId:n,assetReference:r}=(0,i.parseCaipAssetType)(t);return{chainId:n,assetReference:r,assetId:t}}catch{return null}};n.useBridgeQueryParams=()=>{const e=(0,s.useDispatch)(),t=(0,s.useSelector)(p.getFromChains),n=(0,s.useSelector)(p.getFromChain),h=(0,s.useSelector)(p.getFromToken),f=(0,s.useSelector)(p.getFromAccount),g=(0,r.useRef)(new AbortController),{search:b,pathname:S}=(0,a.useLocation)(),y=(0,a.useNavigate)(),v=(0,r.useMemo)(()=>new URLSearchParams(b),[b]),T=(0,r.useCallback)(e=>{const t=new URLSearchParams(b);e.forEach(e=>{t.get(e)&&t.delete(e)}),y({pathname:S,search:t.toString()},{replace:!0})},[b,S,y]),[k,w]=(0,r.useState)(null),[_,I]=(0,r.useState)(null),[C,E]=(0,r.useState)(null);(0,r.useEffect)(()=>()=>{g.current.abort()},[]);const[A,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=m(v.get(u.BridgeQueryParams.FROM)),t=m(v.get(u.BridgeQueryParams.TO)),n=v.get(u.BridgeQueryParams.AMOUNT);(e||t||n)&&(I(t),w(e),n&&E(n),T([u.BridgeQueryParams.FROM,u.BridgeQueryParams.TO,u.BridgeQueryParams.AMOUNT]),(null!=t&&t.assetId||null!=e&&e.assetId)&&(g.current.abort(),g.current=new AbortController,(async(e,t,n)=>{const r=[];if(t&&r.push(t),n&&r.push(n),0===r.length)return null;try{return await(0,c.fetchAssetMetadataForAssetIds)(r,e)}catch{return null}})(g.current.signal,null==e?void 0:e.assetId,null==t?void 0:t.assetId).then(e=>{M(e)})))},[v]);const N=(0,r.useCallback)((t,n,r,s)=>{const{chainId:a}=n;if(t){const{chainId:n,assetReference:c}=(0,i.parseCaipAssetType)(t.assetId),u=(0,o.getNativeAssetForChainId)(n),l=null==u?void 0:u.assetId.includes(c),p={...t,chainId:n,address:l||(0,o.isNativeAddress)(c)?(null==u?void 0:u.address)??"":c};if(s&&a===(0,o.formatChainIdToCaip)(s.chainId))e((0,d.setFromToken)(p));else{const t=r.find(e=>(0,o.formatChainIdToCaip)(e.chainId)===a);t&&e((0,d.setFromChain)({chainId:t.chainId,token:p}))}}},[]),P=(0,r.useCallback)(async t=>{const{chainId:n,assetReference:r}=(0,i.parseCaipAssetType)(t.assetId);e((0,d.setToToken)({...t,chainId:n,address:r})),I(null)},[]);(0,r.useEffect)(()=>{if(!k||!A||!t.length)return;const e=(null==A?void 0:A[k.assetId])??(null==A?void 0:A[k.assetId.toLowerCase()]);N(e,k,t,n)},[A,k,t,n]),(0,r.useEffect)(()=>{if(!_)return;const e=(null==A?void 0:A[_.assetId])??(null==A?void 0:A[_.assetId.toLowerCase()]);e&&P(e)},[_,A]),(0,r.useEffect)(()=>{var t;k&&h&&(null===(t=h.assetId)||void 0===t?void 0:t.toLowerCase())===k.assetId.toLowerCase()&&(w(null),C&&(e((0,d.setFromTokenInputValue)((0,l.calcTokenAmount)(C,h.decimals).toFixed(h.decimals))),E(null)))},[C,k,h]),(0,r.useEffect)(()=>{k||v.get(u.BridgeQueryParams.FROM)||!h||(0,o.isCrossChain)(h.chainId,null==n?void 0:n.chainId)||!f||(e((0,d.setEVMSrcTokenBalance)(h,f.address)),e((0,d.setEVMSrcNativeBalance)({selectedAddress:f.address,chainId:h.chainId})))},[k,f,h,n,v])}}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeQueryParams.ts"}],[7150,{"../../../shared/lib/bridge-status/utils":5825,"../../ducks/bridge-status/selectors":7054,"../../helpers/constants/routes":7088,"@metamask/bridge-controller":1369,"@metamask/transaction-controller":2994,"react-compiler-runtime":5170,"react-redux":5221,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FINAL_NON_CONFIRMED_STATUSES=void 0,n.useBridgeTxHistoryData=function(e){const t=(0,r.c)(15),{transactionGroup:n,isEarliestNonce:a}=e,p=(0,i.useNavigate)(),m=n.initialTransaction,h=m.id;let f;t[0]!==h?(f=e=>(0,l.selectBridgeHistoryItemForTxMetaId)(e,h),t[0]=h,t[1]=f):f=t[1];const g=(0,s.useSelector)(f),b=g?(null==g?void 0:g.status.status)===o.StatusTypes.FAILED:null;let S;t[2]!==a||t[3]!==p||t[4]!==h||t[5]!==n||t[6]!==m.status?(S=d.includes(m.status)?undefined:()=>{p(`${u.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE}/${h}`,{state:{transactionGroup:n,isEarliestNonce:a}})},t[2]=a,t[3]=p,t[4]=h,t[5]=n,t[6]=m.status,t[7]=S):S=t[7];const y=S;let v,T;t[8]!==g?(v=g?(0,c.isBridgeComplete)(g):null,t[8]=g,t[9]=v):v=t[9];t[10]!==g||t[11]!==b||t[12]!==y||t[13]!==v?(T={bridgeTxHistoryItem:g,isBridgeComplete:v,isBridgeFailed:b,showBridgeTxDetails:y},t[10]=g,t[11]=b,t[12]=y,t[13]=v,t[14]=T):T=t[14];return T};var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("@metamask/transaction-controller"),i=e("react-router-dom"),o=e("@metamask/bridge-controller"),c=e("../../../shared/lib/bridge-status/utils"),u=e("../../helpers/constants/routes"),l=e("../../ducks/bridge-status/selectors");const d=n.FINAL_NON_CONFIRMED_STATUSES=[a.TransactionStatus.failed,a.TransactionStatus.dropped,a.TransactionStatus.rejected]}}},{package:"$root$",file:"ui/hooks/bridge/useBridgeTxHistoryData.ts"}],[7151,{"../../../shared/constants/bridge":5777,"../../../shared/constants/metametrics":5791,"../../../shared/constants/network":5795,"../../../shared/lib/asset-utils":5824,"../../../shared/lib/deep-links/routes/swap":5844,"../../../shared/lib/trace":5897,"../../contexts/metametrics":7040,"../../ducks/bridge/actions":7055,"../../ducks/bridge/selectors":7057,"../../helpers/constants/routes":7088,"../../selectors":8094,"@metamask/bridge-controller":1369,react:5256,"react-redux":5221,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("react"),s=e("react-redux"),a=e("react-router-dom"),i=e("@metamask/bridge-controller"),o=e("../../ducks/bridge/actions"),c=e("../../selectors"),u=e("../../contexts/metametrics"),l=e("../../../shared/constants/metametrics"),d=e("../../helpers/constants/routes"),p=e("../../../shared/lib/deep-links/routes/swap"),m=e("../../../shared/lib/trace"),h=e("../../../shared/lib/asset-utils"),f=e("../../../shared/constants/bridge"),g=e("../../ducks/bridge/selectors"),b=e("../../../shared/constants/network");n.default=()=>{const e=(0,a.useNavigate)(),t=(0,s.useDispatch)(),n=(0,r.useContext)(u.MetaMetricsContext),S=(0,s.useSelector)(c.getMetaMetricsId),y=(0,s.useSelector)(c.getParticipateInMetaMetrics),v=(0,s.useSelector)(c.getDataCollectionForMarketing),T=(0,s.useSelector)(g.getLastSelectedChainId),k=(0,s.useSelector)(g.getFromChain),w=(0,s.useSelector)(g.getFromChains),_=(0,r.useCallback)(e=>f.ALL_ALLOWED_BRIDGE_CHAIN_IDS.includes(e)&&w.some(t=>(0,i.formatChainIdToCaip)(t.chainId)===(0,i.formatChainIdToCaip)(e)),[w]);return{openBridgeExperience:(0,r.useCallback)((r,s)=>{let a=null!=s&&s.chainId&&_(s.chainId)?(0,h.toAssetId)(s.address,(0,i.formatChainIdToCaip)(s.chainId)):undefined;const c=T&&_(T)?T:b.CHAIN_IDS.MAINNET;var u;a||c===(null==k?void 0:k.chainId)||(a=null===(u=(0,i.getNativeAssetForChainId)(c))||void 0===u?void 0:u.assetId);(0,m.trace)({name:m.TraceName.SwapViewLoaded,startTime:Date.now()}),n({event:l.MetaMetricsEventName.SwapLinkClicked,category:l.MetaMetricsEventCategory.Navigation,properties:{token_symbol:(null==s?void 0:s.symbol)??"",location:r,text:"Swap",chain_id:(null==s?void 0:s.chainId)??T}}),t((0,o.trackUnifiedSwapBridgeEvent)(i.UnifiedSwapBridgeEventName.ButtonClicked,{location:r,token_symbol_source:(null==s?void 0:s.symbol)??"ETH",token_symbol_destination:""})),t((0,o.resetInputFields)());let f=`${d.CROSS_CHAIN_SWAP_ROUTE}${d.PREPARE_SWAP_ROUTE}`;f+="?",a&&(f+=`${p.BridgeQueryParams.FROM}=${a}`),r===l.MetaMetricsSwapsEventSource.TransactionShield&&(f+=(a?"&":"")+"isFromTransactionShield=true"),e(f)},[e,S,n,y,v,T,null==k?void 0:k.chainId,_])}}}}},{package:"$root$",file:"ui/hooks/bridge/useBridging.ts"}],[7152,{"../../ducks/bridge/selectors":7057,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCountdownTimer=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("../../ducks/bridge/selectors");const o=1e3;n.useCountdownTimer=()=>{const e=(0,r.c)(9),{quotesLastFetchedMs:t}=(0,a.useSelector)(i.getBridgeQuotes),n=(0,a.useSelector)(i.getQuoteRefreshRate),[c,u]=(0,s.useState)(n+o),l=(0,s.useRef)(n);let d,p,m,h,f,g;return e[0]!==c?(d=()=>{l.current=c},p=[c],e[0]=c,e[1]=d,e[2]=p):(d=e[1],p=e[2]),(0,s.useEffect)(d,p),e[3]!==t||e[4]!==n?(m=()=>{t&&u(n-(Date.now()-t)+o)},h=[t,n],e[3]=t,e[4]=n,e[5]=m,e[6]=h):(m=e[5],h=e[6]),(0,s.useEffect)(m,h),e[7]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const e=setInterval(()=>{u(Math.max(0,l.current-o))},o);return()=>clearInterval(e)},g=[],e[7]=f,e[8]=g):(f=e[7],g=e[8]),(0,s.useEffect)(f,g),Math.floor(c/1e3)}}}},{package:"$root$",file:"ui/hooks/bridge/useCountdownTimer.ts"}],[7153,{"../../ducks/bridge/selectors":7057,"../../selectors/multichain":8103,"../useMultichainSelector":7245,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsTxSubmittable=void 0;var r=e("react-redux"),s=e("../../ducks/bridge/selectors"),a=e("../../selectors/multichain"),i=e("../useMultichainSelector");n.useIsTxSubmittable=()=>{const e=(0,r.useSelector)(s.getFromToken),t=(0,r.useSelector)(s.getToToken),n=(0,i.useMultichainSelector)(a.getMultichainCurrentChainId),o=(0,r.useSelector)(s.getFromAmount),{activeQuote:c}=(0,r.useSelector)(s.getBridgeQuotes),{isInsufficientBalance:u,isInsufficientGasBalance:l,isInsufficientGasForQuote:d,isTxAlertPresent:p,isTxAlertLoading:m}=(0,r.useSelector)(s.getValidationErrors);return Boolean(e&&t&&n&&o&&c&&!u&&!l&&!d&&!(m||p))}}}},{package:"$root$",file:"ui/hooks/bridge/useIsTxSubmittable.ts"}],[7154,{"../../ducks/bridge/actions":7055,"../../ducks/bridge/selectors":7057,"./useIsTxSubmittable":7153,"@metamask/bridge-controller":1369,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useQuoteFetchEvents=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("@metamask/bridge-controller"),o=e("../../ducks/bridge/selectors"),c=e("../../ducks/bridge/actions"),u=e("./useIsTxSubmittable");n.useQuoteFetchEvents=()=>{const e=(0,r.c)(11),t=(0,a.useDispatch)(),{isLoading:n,quotesRefreshCount:l,quoteFetchError:d,activeQuote:p,recommendedQuote:m}=(0,a.useSelector)(o.getBridgeQuotes),h=(0,u.useIsTxSubmittable)(),f=(0,a.useSelector)(o.getWarningLabels);let g,b;e[0]!==p||e[1]!==t||e[2]!==n||e[3]!==h||e[4]!==d||e[5]!==l||e[6]!==m||e[7]!==f?(g=()=>{!n&&l>0&&!d&&t((0,c.trackUnifiedSwapBridgeEvent)(i.UnifiedSwapBridgeEventName.QuotesReceived,(0,i.getQuotesReceivedProperties)(p,f,h,m)))},e[0]=p,e[1]=t,e[2]=n,e[3]=h,e[4]=d,e[5]=l,e[6]=m,e[7]=f,e[8]=g):g=e[8],e[9]!==l?(b=[l],e[9]=l,e[10]=b):b=e[10],(0,s.useEffect)(g,b)}}}},{package:"$root$",file:"ui/hooks/bridge/useQuoteFetchEvents.ts"}],[7155,{"../../../shared/modules/hexstring-utils":5922,"../../ducks/bridge/selectors":7057,"../../ducks/rewards/selectors":7072,"../../selectors/multichain":8103,"../../selectors/multichain-accounts/account-tree":8098,"../../store/actions":8127,"../useMultichainSelector":7245,"../usePrevious":7256,"@metamask/bridge-controller":1369,"@metamask/utils":3116,"bignumber.js":3972,lodash:4838,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRewardsWithQuote=n.useRewards=n.getUsdPricePerToken=void 0;var r,s=e("react"),a=e("react-redux"),i=e("bignumber.js"),o=e("@metamask/bridge-controller"),c=e("@metamask/utils"),u=(r=e("loglevel"))&&r.__esModule?r:{default:r},l=e("lodash"),d=e("../../ducks/bridge/selectors"),p=e("../../selectors/multichain"),m=e("../usePrevious"),h=e("../useMultichainSelector"),f=e("../../store/actions"),g=e("../../../shared/modules/hexstring-utils"),b=e("../../selectors/multichain-accounts/account-tree"),S=e("../../ducks/rewards/selectors");const y=(e,t,n)=>{try{const r=new i.BigNumber(e),s=new i.BigNumber(t).div(new i.BigNumber(10).pow(n));return r.isZero()||s.isZero()?undefined:r.dividedBy(s).toString()}catch(e){return console.error(e,"useRewards: Error calculating USD price per token"),undefined}};n.getUsdPricePerToken=y;const v=({quote:e,fromAddress:t,fromAddressAccount:n,chainId:r})=>{const i=(0,a.useDispatch)(),[d,p]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null),[v,T]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),_=(0,m.usePrevious)(null==e?void 0:e.requestId),[I,C]=(0,s.useState)(null),E=(0,a.useSelector)(S.selectRewardsEnabled),A=(0,a.useSelector)(S.selectRewardsAccountLinkedTimestamp),M=(0,s.useRef)(new Map),[N,P]=(0,s.useState)(null),O=(0,s.useCallback)((0,l.debounce)(async(e,t)=>{if(!e||!t)return b(null),T(!1),p(!1),void w(!1);try{var n;const r=e.srcTokenAmount,s=e.destTokenAmount,a={id:e.srcAsset.assetId,amount:r},o={id:e.destAsset.assetId,amount:s},c={id:e.feeData.metabridge.asset.assetId,amount:e.feeData.metabridge.amount||"0"},u=y((null===(n=e.priceData)||void 0===n?void 0:n.totalFeeAmountUsd)||"0",c.amount,e.feeData.metabridge.asset.decimals),l={activityType:"SWAP",account:t,activityContext:{swapContext:{srcAsset:a,destAsset:o,feeAsset:{...c,...u?{usdPrice:u}:{}}}}},d=await i((0,f.estimateRewardsPoints)(l));b(d.pointsEstimate)}catch(e){u.default.error("[useRewardsWithQuote] Error estimating points:",e),b(null),w(!0)}finally{p(!1)}},750),[i]),R=(0,s.useCallback)(async e=>{if(!(e&&t&&r&&E))return b(null),T(!1),C(null),p(!1),void w(!1);p(!0),w(!1);let s=null;try{if(!await i((0,f.getRewardsCandidateSubscriptionId)()))return b(null),T(!1),C(null),w(!1),void p(!1);if(s=((e,t)=>{try{const n=(0,o.formatChainIdToCaip)(t),{namespace:r,reference:s}=(0,c.parseCaipChainId)(n),a=(0,c.isValidHexAddress)(e)?(0,g.toChecksumHexAddress)(e):e;return(0,c.toCaipAccountId)(r,s,a)}catch(e){return u.default.error("[useRewards] Error formatting account to CAIP-10:",e),null}})(t,r),!s)return b(null),w(!1),T(!1),C(null),void p(!1);const a=await i((0,f.getRewardsHasAccountOptedIn)(s));C(a);let l=a;if(!a&&n){l=await i((0,f.rewardsIsOptInSupported)({account:n}))}if(T(l),b(null),w(!1),!l||!a)return void p(!1);await O(e,s)}catch{p(!1),T(!1),b(null),C(null),w(!1)}},[t,r,E,i,n,O]);return(0,s.useEffect)(()=>{_!==(null==e?void 0:e.requestId)&&R(e)},[R,null==e?void 0:e.requestId,e,_]),(0,s.useEffect)(()=>{if(t&&null!==A)M.current.set(t,A),P(A);else if(t){const e=M.current.get(t);P(e??null)}else P(null)},[A,t]),(0,s.useEffect)(()=>{null!==N&&!1===I&&R(e)},[N,I,R,e]),{shouldShowRewardsRow:v,isLoading:d,estimatedPoints:h,hasError:k,accountOptedIn:I,rewardsAccountScope:e&&v?n:null}};n.useRewardsWithQuote=v;n.useRewards=({activeQuote:e})=>{const t=(0,a.useSelector)(d.getFromToken),n=(0,a.useSelector)(d.getToToken),r=(0,a.useSelector)(d.getQuoteRequest),s=(0,h.useMultichainSelector)(p.getMultichainCurrentChainId),i=s?(0,o.formatChainIdToCaip)(s.toString()):null,c=(0,a.useSelector)(e=>i?(0,b.getInternalAccountBySelectedAccountGroupAndCaip)(e,i):null),u=t&&n&&(null==r?void 0:r.srcTokenAmount)&&(null==c?void 0:c.address);return v({quote:u?e:null,fromAddress:null==c?void 0:c.address,fromAddressAccount:c,chainId:null==s?void 0:s.toString()})}}}},{package:"$root$",file:"ui/hooks/bridge/useRewards.ts"}],[7156,{"../../ducks/bridge/actions":7055,"../../pages/bridge/utils/slippage-service":7348,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSmartSlippage=function(e){const t=(0,r.c)(17),{fromChain:n,toChain:c,fromToken:u,toToken:l,isSwap:d}=e,p=(0,a.useDispatch)();let m;t[0]!==n||t[1]!==u||t[2]!==d||t[3]!==c||t[4]!==l?(m=()=>{const e={fromChain:n,toChain:c,fromToken:u,toToken:l,isSwap:d},t=(0,i.calculateSlippage)(e);return t},t[0]=n,t[1]=u,t[2]=d,t[3]=c,t[4]=l,t[5]=m):m=t[5];const h=m;let f,g;t[6]!==h||t[7]!==p?(f=()=>{const e=h();p((0,o.setSlippage)(e))},t[6]=h,t[7]=p,t[8]=f):f=t[8];t[9]!==h||t[10]!==p||t[11]!==n||t[12]!==u||t[13]!==d||t[14]!==c||t[15]!==l?(g=[n,c,u,l,d,h,p],t[9]=h,t[10]=p,t[11]=n,t[12]=u,t[13]=d,t[14]=c,t[15]=l,t[16]=g):g=t[16];(0,s.useEffect)(f,g)};var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("../../pages/bridge/utils/slippage-service"),o=e("../../ducks/bridge/actions")}}},{package:"$root$",file:"ui/hooks/bridge/useSmartSlippage.ts"}],[7157,{"../../../shared/modules/bridge-utils/security-alerts-api.util":5909,"../../ducks/bridge/selectors":7057,"../useAsync":7215,"@metamask/bridge-controller":1369,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenAlerts=n.default=void 0;var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("@metamask/bridge-controller"),i=e("../../ducks/bridge/selectors"),o=e("../../../shared/modules/bridge-utils/security-alerts-api.util"),c=e("../useAsync");const u=()=>{const e=(0,r.c)(10),t=(0,s.useSelector)(i.getFromToken),n=(0,s.useSelector)(i.getFromChain),u=(0,s.useSelector)(i.getToToken),l=(0,s.useSelector)(i.getToChain);let d;e[0]!==n||e[1]!==t||e[2]!==l||e[3]!==u?(d=async()=>{if(t&&n&&u&&l&&!(0,a.isNativeAddress)(u.address)){const e=(0,o.convertChainIdToBlockAidChainName)(null==l?void 0:l.chainId);if(e)return await(0,o.fetchTokenAlert)(e,(0,a.formatAddressToCaipReference)(u.address))}return null},e[0]=n,e[1]=t,e[2]=l,e[3]=u,e[4]=d):d=e[4];const p=null==u?void 0:u.address,m=null==l?void 0:l.chainId;let h;e[5]!==p||e[6]!==m?(h=[p,m],e[5]=p,e[6]=m,e[7]=h):h=e[7];const{value:f}=(0,c.useAsyncResult)(d,h);let g;return e[8]!==f?(g={tokenAlert:f},e[8]=f,e[9]=g):g=e[9],g};n.useTokenAlerts=u;n.default=u}}},{package:"$root$",file:"ui/hooks/bridge/useTokenAlerts.ts"}],[7158,{"../../../shared/constants/bridge":5777,"../../../shared/constants/multichain/networks":5794,"../../../shared/constants/network":5795,"../../../shared/constants/time":5812,"../../../shared/constants/transaction":5814,"../../../shared/lib/asset-utils":5824,"../../../shared/lib/fetch-with-cache":5870,"../../ducks/bridge/selectors":7057,"../../ducks/bridge/utils":7058,"../../pages/swaps/swaps.util":8071,"../useAsync":7215,"../useMultichainBalances":7244,"@metamask/bridge-controller":1369,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokensWithFiltering=void 0;var r,s=e("react"),a=e("react-redux"),i=e("@metamask/bridge-controller"),o=e("../../../shared/constants/transaction"),c=e("../../../shared/constants/network"),u=e("../useMultichainBalances"),l=e("../useAsync"),d=e("../../pages/swaps/swaps.util"),p=e("../../../shared/constants/time"),m=e("../../ducks/bridge/selectors"),h=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},f=e("../../../shared/constants/bridge"),g=e("../../../shared/lib/asset-utils"),b=e("../../../shared/constants/multichain/networks"),S=e("../../ducks/bridge/utils");const y=(e,t)=>{if(!e||!t)return undefined;const n={...t,chainId:(0,i.isNonEvmChainId)(e)?(0,i.formatChainIdToCaip)(e):(0,i.formatChainIdToHex)(e),assetId:"assetId"in t?t.assetId:(0,g.toAssetId)(t.address,e)};if((0,i.isNativeAddress)(t.address)){const r=(0,i.isNonEvmChainId)(e)?b.MULTICHAIN_TOKEN_IMAGE_MAP[n.chainId]:c.CHAIN_ID_TOKEN_IMAGE_MAP[n.chainId];return{...n,type:o.AssetType.native,address:"",image:r??(t.iconUrl||("icon"in t?t.icon:"")||""),balance:"0",string:"0"}}return{...n,type:o.AssetType.token,image:t.iconUrl??("icon"in t?t.icon:"")??"",balance:"",string:undefined}};n.useTokensWithFiltering=(e,t,n)=>{const r=(0,a.useSelector)(t=>(0,m.getTopAssetsFromFeatureFlags)(t,e)),{assetsWithBalance:v}=(0,u.useMultichainBalances)(n),T=(0,a.useSelector)(e=>e.metamask.tokensChainsCache),k=(0,s.useMemo)(()=>{var t;if(!e)return undefined;if((0,i.isBitcoinChainId)(e)){const t=(0,i.getNativeAssetForChainId)(e);if(t){const e=t.address??"";return{[e]:t}}return undefined}if((0,i.isSolanaChainId)(e))return undefined;const n=(0,i.formatChainIdToHex)(e);return n?null===(t=T[n])||void 0===t?void 0:t.data:undefined},[e,T]),w=Boolean(k),{value:_,pending:I}=(0,l.useAsyncResult)(async()=>w||!e?{}:await(0,i.fetchBridgeTokens)(e,i.BridgeClientId.EXTENSION,async(e,t)=>{const{headers:n,...r}=t??{};return await(0,h.default)({url:e,...r,fetchOptions:{method:"GET",headers:n},cacheOptions:{cacheRefreshTime:10*p.MINUTE},functionName:"fetchBridgeTokens"})},f.BRIDGE_API_BASE_URL,"13.15.0"),[e,w]),C=(0,s.useMemo)(()=>k??_,[k,_]),{value:E,pending:A}=(0,l.useAsyncResult)(async()=>e?r?r.map(e=>({address:e})):await(0,d.fetchTopAssetsList)(e):[],[e,r]);return{filteredTokenListGenerator:(0,s.useCallback)(n=>function*(){const r=(e,r,s)=>{var a;const o=e=>e&&(0,i.isNativeAddress)(e)?"":e;return n(e,r,s)&&(!t||!s||!(t.symbol===e&&((0,i.isSolanaChainId)(s)?o(t.address)===o(r):(null===(a=t.address)||void 0===a?void 0:a.toLowerCase())===(null==r?void 0:r.toLowerCase()))&&t.chainId===(0,i.formatChainIdToCaip)(s)))};if(e&&E&&C&&0!==Object.keys(C).length){for(const e of v){var s,a,u;if(!(0,S.isTronEnergyOrBandwidthResource)(e.chainId,e.symbol))if(r(e.symbol,e.address,e.chainId))if((0,i.isNativeAddress)(e.address)||e.isNative)yield{symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:"",type:o.AssetType.native,balance:e.balance??"0",string:e.string??undefined,image:c.CHAIN_ID_TOKEN_IMAGE_MAP[e.chainId]??b.MULTICHAIN_TOKEN_IMAGE_MAP[e.chainId]??((null===(s=(0,i.getNativeAssetForChainId)(e.chainId))||void 0===s?void 0:s.icon)||(null===(a=(0,i.getNativeAssetForChainId)(e.chainId))||void 0===a?void 0:a.iconUrl)||(0,g.getAssetImageUrl)(e.address,(0,i.formatChainIdToCaip)(e.chainId))),accountType:e.accountType};else yield{...e,symbol:e.symbol,chainId:e.chainId,tokenFiatAmount:e.tokenFiatAmount,decimals:e.decimals,address:e.address,type:o.AssetType.token,balance:e.balance??"0",string:e.string??undefined,image:(e.image||e.address&&(null==C||null===(u=C[e.address.toLowerCase()])||void 0===u?void 0:u.iconUrl))??(0,g.getAssetImageUrl)(e.address,(0,i.formatChainIdToCaip)(e.chainId))??""}}for(const t of E){const n=(null==C?void 0:C[t.address])??(null==C?void 0:C[t.address.toLowerCase()]),s=y(e,n);s&&!(0,S.isTronEnergyOrBandwidthResource)(e,s.symbol)&&r(s.symbol,s.address??undefined,e)&&(yield s)}for(const t of Object.values(C)){const n=y(e,t);n&&-1===n.symbol.indexOf("$")&&!(0,S.isTronEnergyOrBandwidthResource)(e,n.symbol)&&r(n.symbol,n.address??undefined,e)&&(yield n)}}}(),[v,E,e,C,t]),isLoading:I||A}}}}},{package:"$root$",file:"ui/hooks/bridge/useTokensWithFiltering.ts"}],[7159,{"../../../shared/constants/multichain/networks":5794,"../../ducks/bridge/actions":7055,"../../ducks/bridge/selectors":7057,"@metamask/bridge-controller":1369,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTxAlerts=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("@metamask/bridge-controller"),o=e("../../../shared/constants/multichain/networks"),c=e("../../ducks/bridge/selectors"),u=e("../../ducks/bridge/actions");n.useTxAlerts=()=>{const e=(0,r.c)(14),t=(0,a.useDispatch)(),n=(0,a.useSelector)(c.getFromChain),{activeQuote:l}=(0,a.useSelector)(c.getBridgeQuotes);let d;e[0]!==l?(d=l??{},e[0]=l,e[1]=d):d=e[1];const{trade:p}=d,m=(0,a.useSelector)(c.getFromAccount);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=new AbortController,e[2]=h):h=e[2];const f=(0,s.useRef)(h);let g,b,S;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{var e;null===(e=f.current)||void 0===e||e.abort(),f.current=null},b=[],e[3]=g,e[4]=b):(g=e[3],b=e[4]),(0,s.useEffect)(g,b),e[5]!==m||e[6]!==t||e[7]!==n||e[8]!==p?(S=()=>{var e;null===(e=f.current)||void 0===e||e.abort(),p&&"string"==typeof p&&null!=n&&n.chainId&&(0,i.isSolanaChainId)(n.chainId)&&null!=m&&m.address?(f.current=new AbortController,t((0,u.setTxAlerts)({signal:f.current.signal,chainId:o.MultichainNetworks.SOLANA,trade:p,accountAddress:m.address}))):t((0,u.setTxAlerts)(null))},e[5]=m,e[6]=t,e[7]=n,e[8]=p,e[9]=S):S=e[9];const y=null==n?void 0:n.chainId,v=null==m?void 0:m.address;let T;e[10]!==y||e[11]!==v||e[12]!==p?(T=[p,y,v],e[10]=y,e[11]=v,e[12]=p,e[13]=T):T=e[13],(0,s.useEffect)(S,T)}}}},{package:"$root$",file:"ui/hooks/bridge/useTxAlerts.ts"}],[7160,{"../../store/actions":8127,"../../store/background-connection":8128},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.deFiStartPolling=async function(){const e=await(0,s.submitRequestToBackground)("deFiStartPolling",[null]);return await(0,r.addPollingTokenToAppState)(e),e},n.deFiStopPolling=async function(e){await(0,s.submitRequestToBackground)("deFiStopPolling",[e]),await(0,r.removePollingTokenFromAppState)(e)};var r=e("../../store/actions"),s=e("../../store/background-connection")}}},{package:"$root$",file:"ui/hooks/defi/defiPollingActions.ts"}],[7161,{"../../ducks/metamask/metamask":7067,"../useMultiPolling":7241,"./defiPollingActions":7160,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=e("react-compiler-runtime"),a=e("react-redux"),i=e("../../ducks/metamask/metamask"),o=(r=e("../useMultiPolling"))&&r.__esModule?r:{default:r},c=e("./defiPollingActions");n.default=()=>{const e=(0,s.c)(3),t=(0,a.useSelector)(i.getCompletedOnboarding),n=(0,a.useSelector)(i.getIsUnlocked),r=t&&n;let u,l;return e[0]!==r?(u={startPolling:c.deFiStartPolling,stopPollingByPollingToken:c.deFiStopPolling,input:r?[null]:[]},e[0]=r,e[1]=u):u=e[1],(0,o.default)(u),e[2]===Symbol.for("react.memo_cache_sentinel")?(l={},e[2]=l):l=e[2],l}}}},{package:"$root$",file:"ui/hooks/defi/useDeFiPolling.ts"}],[7162,{"../../pages/confirmations/hooks/useConfirmationNavigation":7737,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionRedirect=function(e){const t=(0,r.c)(16);let n;t[0]!==e?(n=e===undefined?{}:e,t[0]=e,t[1]=n):n=t[1];const{onRedirect:i}=n,[o,c]=(0,s.useState)(),{confirmations:u,navigateToId:l}=(0,a.useConfirmationNavigation)();let d;if(t[2]!==u||t[3]!==o){let e;t[5]!==o?(e=e=>e.id===o,t[5]=o,t[6]=e):e=t[6],d=u.some(e),t[2]=u,t[3]=o,t[4]=d}else d=t[4];const p=d;let m,h,f;t[7]!==p||t[8]!==l||t[9]!==i||t[10]!==o?(m=()=>{p&&(l(o),null==i||i())},h=[p,l,o,i],t[7]=p,t[8]=l,t[9]=i,t[10]=o,t[11]=m,t[12]=h):(m=t[11],h=t[12]);(0,s.useEffect)(m,h),t[13]!==p||t[14]!==o?(f={transactionId:o,setTransactionId:c,isRedirectPending:p},t[13]=p,t[14]=o,t[15]=f):f=t[15];return f};var r=e("react-compiler-runtime"),s=e("react"),a=e("../../pages/confirmations/hooks/useConfirmationNavigation")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionRedirect.ts"}],[7163,{"../../../shared/lib/gator-permissions/gator-permissions-utils":5872,"../../../shared/modules/selectors/networks":5934,"../../selectors/selectors":8114,"../../store/actions":8127,"../useAsync":7215,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissionTokenInfo=function(e,t,n){const l=(0,r.c)(30),d=(0,s.useSelector)(a.selectERC20TokensByChain),p=(0,s.useSelector)(a.getAllTokens),m=(0,s.useSelector)(a.getUseExternalServices),h=(0,s.useSelector)(i.getAllNetworkConfigurationsByCaipChainId);let f;l[0]!==n?(f=(null==n?void 0:n.includes("native-token"))??!1,l[0]=n,l[1]=f):f=l[1];const g=f;let b;e:{if(!g||!t){b=null;break e}let e;l[2]!==t||l[3]!==h?(e=(0,c.resolveNativeTokenInfo)(t,h),l[2]=t,l[3]=h,l[4]=e):e=l[4],b=e}const S=b;let y;e:{if(g||!e||!t){y=null;break e}let n;l[5]!==p||l[6]!==t||l[7]!==d||l[8]!==e?(n=(0,c.lookupCachedOrImportedTokenInfo)(e,t,d,p),l[5]=p,l[6]=t,l[7]=d,l[8]=e,l[9]=n):n=l[9],y=n}const v=y,T=Boolean(!g&&!v&&e&&t);let k,w;l[10]!==m||l[11]!==t||l[12]!==T||l[13]!==e?(k=async()=>T&&e&&t?await(0,c.getGatorErc20TokenInfo)(e,t,Boolean(m),o.getTokenStandardAndDetailsByChain):null,w=[T,e,t,m],l[10]=m,l[11]=t,l[12]=T,l[13]=e,l[14]=k,l[15]=w):(k=l[14],w=l[15]);const _=(0,u.useAsyncResult)(k,w),I="success"===_.status?_.value:null,C="error"===_.status?_.error:null,E=T&&_.pending;let A;e:{if(S){let e;l[16]!==S?(e={tokenInfo:S,loading:!1},l[16]=S,l[17]=e):e=l[17],A=e;break e}if(v){let e;l[18]!==v?(e={tokenInfo:v,loading:!1},l[18]=v,l[19]=e):e=l[19],A=e;break e}if(I){let e;l[20]!==I?(e={tokenInfo:I,loading:!1},l[20]=I,l[21]=e):e=l[21],A=e;break e}const e=t||"0x0";let n,r;l[22]!==e?(n={symbol:"Unknown Token",decimals:18,chainId:e},l[22]=e,l[23]=n):n=l[23],l[24]!==E||l[25]!==n?(r={tokenInfo:n,loading:E},l[24]=E,l[25]=n,l[26]=r):r=l[26],A=r}const M=A;let N;l[27]!==C||l[28]!==M?(N={...M,error:C},l[27]=C,l[28]=M,l[29]=N):N=l[29];return N};var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../../selectors/selectors"),i=e("../../../shared/modules/selectors/networks"),o=e("../../store/actions"),c=e("../../../shared/lib/gator-permissions/gator-permissions-utils"),u=e("../useAsync")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissionTokenInfo.ts"}],[7164,{"../../selectors/gator-permissions/gator-permissions":8091,"../../store/controller-actions/gator-permissions-controller":8129,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGatorPermissions=function(e={}){const{refreshInBackground:t=!0}=e,n=(0,s.useDispatch)(),o=(0,s.useSelector)(e=>{try{return(0,i.getGatorPermissionsMap)(e)}catch(e){return undefined}}),[c,u]=(0,r.useState)(!o),[l,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(undefined),h=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let e=!1;return o&&!t?u(!1):h.current||(async()=>{try{m(undefined),o?d(!0):u(!0),await(0,a.fetchAndUpdateGatorPermissions)({isRevoked:!1})}catch(t){e||m(t)}finally{e||(u(!1),d(!1))}})().then(()=>{h.current=!0}).catch(()=>{}),()=>{e=!0}},[n,t]),{data:o,error:p,loading:c,isRefreshing:l}};var r=e("react"),s=e("react-redux"),a=e("../../store/controller-actions/gator-permissions-controller"),i=e("../../selectors/gator-permissions/gator-permissions")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useGatorPermissions.ts"}],[7165,{"../../../shared/lib/delegation/delegation":5861,"../../selectors":8094,"../../store/actions":8127,"../../store/controller-actions/gator-permissions-controller":8129,"./useGatorPermissionRedirect":7162,"./utils":7167,"@metamask/transaction-controller":2994,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissions=function({chainId:e,onRedirect:t}){const{setTransactionId:n}=(0,l.useGatorPermissionRedirect)({onRedirect:t}),p=(0,s.useStore)(),m=(0,r.useCallback)(e=>{if(Array.isArray(e)){if(0===e.length)throw new Error("No gator permissions provided");for(const t of e)m(t)}else if(!e)throw new Error("No gator permission provided")},[]),h=(0,r.useCallback)(t=>{if(t.permissionResponse.chainId!==e)throw new Error("Chain ID does not match")},[e]),f=(0,r.useCallback)(e=>{const{permissionResponse:t}=e,n=(0,i.getInternalAccountByAddress)(p.getState(),t.address);if(!n)throw new Error("Internal account not found for delegator of permission");return{permissionContext:t.context,delegationManagerAddress:t.signerMeta.delegationManager,accountAddress:n.address}},[p]),g=(0,r.useCallback)(async e=>{const t=e.permissionResponse.chainId;let n;try{n=await(0,o.findNetworkClientIdByChainId)(t)}catch(e){throw new Error(`Failed to find network client for chain ${t}`,{cause:e})}const{permissionContext:r,delegationManagerAddress:s,accountAddress:i}=f(e),l=(0,d.extractDelegationFromGatorPermissionContext)(r),p=(0,c.getDelegationHashOffchain)(l);if(await(0,u.checkDelegationDisabled)(s,p,n))return await(0,u.submitDirectRevocation)({permissionContext:r}),null;const m=(0,c.encodeDisableDelegation)({delegation:l}),h=await(0,o.addTransaction)({from:i,to:s,data:m,value:"0x0"},{networkClientId:n,type:a.TransactionType.contractInteraction});if(!h)throw new Error("No transaction meta found");if(!h.id)throw new Error("No transaction id found");return await(0,u.addPendingRevocation)({txId:h.id,permissionContext:r}),h},[f]),b=(0,r.useCallback)(async e=>{m(e),h(e);const t=await g(e);return n(null==t?void 0:t.id),t},[g,h,m,n]),S=(0,r.useCallback)(async e=>{var t;m(e);for(const t of e)h(t);const r=[];for(const t of e){const e=await g(t);r.push(e)}const s=r.filter(e=>null!==e);return n(null===(t=s[0])||void 0===t?void 0:t.id),s},[g,h,m,n]);return{revokeGatorPermission:b,revokeGatorPermissionBatch:S}};var r=e("react"),s=e("react-redux"),a=e("@metamask/transaction-controller"),i=e("../../selectors"),o=e("../../store/actions"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./useGatorPermissionRedirect"),d=e("./utils")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissions.ts"}],[7166,{"../../../shared/lib/delegation/delegation":5861,"../../selectors":8094,"../../store/actions":8127,"../../store/controller-actions/gator-permissions-controller":8129,"./useGatorPermissionRedirect":7162,"./utils":7167,"@metamask/transaction-controller":2994,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRevokeGatorPermissionsMultiChain=function({onRedirect:e}={}){const{setTransactionId:t}=(0,d.useGatorPermissionRedirect)({onRedirect:e}),n=(0,s.useStore)();return{revokeGatorPermissionsBatchMultiChain:(0,r.useCallback)(async e=>{const r={},s=[];for(const[t,d]of Object.entries(e)){if(r[t]={revoked:[],skipped:[],errors:[]},0===d.length)continue;let e;try{e=await(0,i.findNetworkClientIdByChainId)(t)}catch(e){const n=e instanceof Error?e.message:String(e);r[t].errors.push(new Error(`No network client ID found for chain ${t}: ${n}`));continue}for(const p of d)try{const{permissionResponse:d}=p,m=(0,o.getInternalAccountByAddress)(n.getState(),d.address);if(!m){r[t].skipped.push(p);continue}const h=(0,l.extractDelegationFromGatorPermissionContext)(d.context),f=(0,c.getDelegationHashOffchain)(h);if(await(0,u.checkDelegationDisabled)(d.signerMeta.delegationManager,f,e)){await(0,u.submitDirectRevocation)({permissionContext:d.context}),r[t].skipped.push(p);continue}const g=(0,c.encodeDisableDelegation)({delegation:h}),b=await(0,i.addTransaction)({from:m.address,to:d.signerMeta.delegationManager,data:g,value:"0x0"},{networkClientId:e,type:a.TransactionType.contractInteraction});if(!b)throw new Error("No transaction meta found");if(!b.id)throw new Error("No transaction id found");r[t].revoked.push(b),s.push(b.id),await(0,u.addPendingRevocation)({txId:b.id,permissionContext:d.context})}catch(e){r[t].errors.push(e)}}return s.length>0&&t(s[0]),r},[n,t])}};var r=e("react"),s=e("react-redux"),a=e("@metamask/transaction-controller"),i=e("../../store/actions"),o=e("../../selectors"),c=e("../../../shared/lib/delegation/delegation"),u=e("../../store/controller-actions/gator-permissions-controller"),l=e("./utils"),d=e("./useGatorPermissionRedirect")}}},{package:"$root$",file:"ui/hooks/gator-permissions/useRevokeGatorPermissionsMultiChain.ts"}],[7167,{"@metamask/delegation-core":1462},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractDelegationFromGatorPermissionContext=function(e){const t=(0,r.decodeDelegations)(e),n=t[0];if(!n)throw new Error("No delegation found");if(1!==t.length)throw new Error("Multiple delegations found");return{...n,salt:`0x${n.salt.toString(16)}`}};var r=e("@metamask/delegation-core")}}},{package:"$root$",file:"ui/hooks/gator-permissions/utils.ts"}],[7168,{"./useAccountSyncing":7169},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAccountSyncing",{enumerable:!0,get:function(){return r.useAccountSyncing}}),Object.defineProperty(n,"useDeleteAccountSyncingDataFromUserStorage",{enumerable:!0,get:function(){return r.useDeleteAccountSyncingDataFromUserStorage}}),Object.defineProperty(n,"useShouldDispatchAccountSyncing",{enumerable:!0,get:function(){return r.useShouldDispatchAccountSyncing}});var r=e("./useAccountSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/index.ts"}],[7169,{"../../../ducks/metamask/metamask":7067,"../../../selectors":8094,"../../../selectors/identity/authentication":8092,"../../../selectors/identity/backup-and-sync":8093,"../../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchAccountSyncing=n.useDeleteAccountSyncingDataFromUserStorage=n.useAccountSyncing=void 0;var r,s=e("react-compiler-runtime"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=(e("react"),e("react-redux")),o=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const p=()=>{const e=(0,i.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,i.useSelector)(c.selectIsAccountSyncingEnabled),n=(0,i.useSelector)(u.getUseExternalServices),r=(0,i.useSelector)(l.getIsUnlocked),s=(0,i.useSelector)(d.selectIsSignedIn),a=(0,i.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&r&&s&&a)};n.useShouldDispatchAccountSyncing=p;n.useAccountSyncing=()=>{const e=(0,s.c)(6),t=(0,i.useDispatch)(),n=p();let r;e[0]!==t||e[1]!==n?(r=()=>{try{if(!n)return;t((0,o.syncAccountTreeWithUserStorage)())}catch(e){const t=e;a.default.error(t)}},e[0]=t,e[1]=n,e[2]=r):r=e[2];const c=r;let u;return e[3]!==c||e[4]!==n?(u={dispatchAccountSyncing:c,shouldDispatchAccountSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u};n.useDeleteAccountSyncingDataFromUserStorage=()=>{const e=(0,s.c)(4),t=(0,i.useDispatch)();let n;e[0]!==t?(n=async()=>{try{await t((0,o.deleteAccountSyncingDataFromUserStorage)())}catch{}},e[0]=t,e[1]=n):n=e[1];const r=n;let a;return e[2]!==r?(a={dispatchDeleteAccountSyncingData:r},e[2]=r,e[3]=a):a=e[3],a}}}},{package:"$root$",file:"ui/hooks/identity/useAccountSyncing/useAccountSyncing.ts"}],[7170,{"./useAutoSignIn":7171,"./useAutoSignOut":7172,"./useSignIn":7173,"./useSignOut":7174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useAutoSignIn",{enumerable:!0,get:function(){return a.useAutoSignIn}}),Object.defineProperty(n,"useAutoSignOut",{enumerable:!0,get:function(){return i.useAutoSignOut}}),Object.defineProperty(n,"useSignIn",{enumerable:!0,get:function(){return r.useSignIn}}),Object.defineProperty(n,"useSignOut",{enumerable:!0,get:function(){return s.useSignOut}});var r=e("./useSignIn"),s=e("./useSignOut"),a=e("./useAutoSignIn"),i=e("./useAutoSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/index.ts"}],[7171,{"../../../ducks/metamask/metamask":7067,"../../../selectors":8094,"../../../selectors/identity/authentication":8092,"./useSignIn":7173,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignIn=function(){const e=(0,r.c)(10),[t,n]=(0,s.useState)(!1),{signIn:l}=(0,u.useSignIn)(),d=Boolean((0,a.useSelector)(i.getIsUnlocked)),p=Boolean((0,a.useSelector)(o.getUseExternalServices)),m=Boolean((0,a.useSelector)(i.getCompletedOnboarding)),h=(0,a.useSelector)(c.selectIsSignedIn),f=(0,a.useSelector)(o.getMetaMaskKeyrings),g=(0,s.useRef)(f.length);let b,S;e[0]!==f.length?(b=()=>{f.length!==g.current&&(g.current=f.length,n(!0))},S=[f.length],e[0]=f.length,e[1]=b,e[2]=S):(b=e[1],S=e[2]);(0,s.useEffect)(b,S);const y=(!h||t)&&d&&p&&m;let v;e[3]!==t||e[4]!==y||e[5]!==l?(v=async()=>{y&&(t&&(await l(!0),n(!1)),await l())},e[3]=t,e[4]=y,e[5]=l,e[6]=v):v=e[6];const T=v;let k;e[7]!==T||e[8]!==y?(k={autoSignIn:T,shouldAutoSignIn:y},e[7]=T,e[8]=y,e[9]=k):k=e[9];return k};var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("../../../ducks/metamask/metamask"),o=e("../../../selectors"),c=e("../../../selectors/identity/authentication"),u=e("./useSignIn")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignIn.ts"}],[7172,{"../../../ducks/metamask/metamask":7067,"../../../selectors":8094,"../../../selectors/identity/authentication":8092,"./useSignOut":7174,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutoSignOut=function(){const e=(0,r.c)(6),{signOut:t}=(0,c.useSignOut)(),n=Boolean((0,s.useSelector)(a.getIsUnlocked)),u=Boolean((0,s.useSelector)(i.getUseExternalServices)),l=(0,s.useSelector)(o.selectIsSignedIn),d=l&&n&&!u;let p;e[0]!==d||e[1]!==t?(p=async()=>{d&&await t()},e[0]=d,e[1]=t,e[2]=p):p=e[2];const m=p;let h;e[3]!==m||e[4]!==d?(h={autoSignOut:m,shouldAutoSignOut:d},e[3]=m,e[4]=d,e[5]=h):h=e[5];return h};var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../../../ducks/metamask/metamask"),i=e("../../../selectors"),o=e("../../../selectors/identity/authentication"),c=e("./useSignOut")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useAutoSignOut.ts"}],[7173,{"../../../selectors/identity/authentication":8092,"../../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignIn=function(){const e=(0,s.c)(5),t=(0,a.useDispatch)(),n=!(0,a.useSelector)(o.selectIsSignedIn);let r;e[0]!==n||e[1]!==t?(r=async e=>{if(e??n)try{await t((0,c.performSignIn)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");i.default.error(n)}},e[0]=n,e[1]=t,e[2]=r):r=e[2];const u=r;let l;e[3]!==u?(l={signIn:u},e[3]=u,e[4]=l):l=e[4];return l};var r,s=e("react-compiler-runtime"),a=(e("react"),e("react-redux")),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignIn.ts"}],[7174,{"../../../selectors/identity/authentication":8092,"../../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignOut=function(){const e=(0,s.c)(5),t=(0,a.useDispatch)(),n=(0,a.useSelector)(o.selectIsSignedIn),r=Boolean(n);let u;e[0]!==t||e[1]!==r?(u=async()=>{if(r)try{await t((0,c.performSignOut)())}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");i.default.error(n)}},e[0]=t,e[1]=r,e[2]=u):u=e[2];const l=u;let d;e[3]!==l?(d={signOut:l},e[3]=l,e[4]=d):d=e[4];return d};var r,s=e("react-compiler-runtime"),a=(e("react"),e("react-redux")),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../../selectors/identity/authentication"),c=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useAuthentication/useSignOut.ts"}],[7175,{"./useBackupAndSync":7176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useBackupAndSync",{enumerable:!0,get:function(){return r.useBackupAndSync}});var r=e("./useBackupAndSync")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/index.ts"}],[7176,{"../../../store/actions":8127,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBackupAndSync=function(){const e=(0,a.useDispatch)(),[t,n]=(0,s.useState)(null),r=(0,s.useCallback)(async(t,r)=>{n(null);try{await e((0,o.setIsBackupAndSyncFeatureEnabled)(t,r))}catch(e){const t=e instanceof Error?e.message:JSON.stringify(e??"");i.default.error(t),n(t)}finally{e((0,o.hideLoadingIndication)())}},[e]);return{error:t,setIsBackupAndSyncFeatureEnabled:r}};var r,s=e("react"),a=e("react-redux"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../../store/actions")}}},{package:"$root$",file:"ui/hooks/identity/useBackupAndSync/useBackupAndSync.ts"}],[7177,{"./useContactSyncing":7178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useContactSyncing",{enumerable:!0,get:function(){return r.useContactSyncing}}),Object.defineProperty(n,"useShouldDispatchContactSyncing",{enumerable:!0,get:function(){return r.useShouldDispatchContactSyncing}});var r=e("./useContactSyncing")}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/index.ts"}],[7178,{"../../../ducks/metamask/metamask":7067,"../../../selectors":8094,"../../../selectors/identity/authentication":8092,"../../../selectors/identity/backup-and-sync":8093,"../../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldDispatchContactSyncing=n.useContactSyncing=void 0;var r,s=e("react-compiler-runtime"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=(e("react"),e("react-redux")),o=e("../../../store/actions"),c=e("../../../selectors/identity/backup-and-sync"),u=e("../../../selectors"),l=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/identity/authentication");const p=()=>{const e=(0,i.useSelector)(c.selectIsBackupAndSyncEnabled),t=(0,i.useSelector)(c.selectIsContactSyncingEnabled),n=(0,i.useSelector)(u.getUseExternalServices),r=(0,i.useSelector)(l.getIsUnlocked),s=(0,i.useSelector)(d.selectIsSignedIn),a=(0,i.useSelector)(l.getCompletedOnboarding);return Boolean(n&&e&&t&&r&&s&&a)};n.useShouldDispatchContactSyncing=p;n.useContactSyncing=()=>{const e=(0,s.c)(6),t=(0,i.useDispatch)(),n=p();let r;e[0]!==t||e[1]!==n?(r=()=>{try{if(!n)return;t((0,o.syncContactsWithUserStorage)())}catch(e){const t=e;a.default.error(t)}},e[0]=t,e[1]=n,e[2]=r):r=e[2];const c=r;let u;return e[3]!==c||e[4]!==n?(u={dispatchContactSyncing:c,shouldDispatchContactSyncing:n},e[3]=c,e[4]=n,e[5]=u):u=e[5],u}}}},{package:"$root$",file:"ui/hooks/identity/useContactSyncing/useContactSyncing.ts"}],[7179,{"../../selectors/metamask-notifications/metamask-notifications":8095,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useReadNotificationsCounter=function(){const e=(0,r.c)(2),{readSnapNotificationsCount:t}=i(),{featureAnnouncementsReadCount:n}=o(),{onChainMetamaskNotificationsReadCount:s}=c(),a=t+n+s;let u;e[0]!==a?(u={notificationsReadCount:a},e[0]=a,e[1]=u):u=e[1];return u},n.useUnreadNotificationsCounter=function(){const e=(0,r.c)(2),{unreadSnapNotificationsCount:t}=i(),{featureAnnouncementsUnreadCount:n}=o(),{onChainMetamaskNotificationsUnreadCount:s}=c(),a=t+n+s;let u;e[0]!==a?(u={notificationsUnreadCount:a},e[0]=a,e[1]=u):u=e[1];return u};var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("../../selectors/metamask-notifications/metamask-notifications");const i=()=>{const e=(0,r.c)(3),t=(0,s.useSelector)(a.getSnapNotificationsUnreadCount),n=(0,s.useSelector)(a.getSnapNotificationsReadCount);let i;return e[0]!==n||e[1]!==t?(i={unreadSnapNotificationsCount:t,readSnapNotificationsCount:n},e[0]=n,e[1]=t,e[2]=i):i=e[2],i},o=()=>{const e=(0,r.c)(4),t=(0,s.useSelector)(a.selectIsFeatureAnnouncementsEnabled),n=(0,s.useSelector)(a.getFeatureAnnouncementsUnreadCount),i=(0,s.useSelector)(a.getFeatureAnnouncementsReadCount);let o;return e[0]!==i||e[1]!==n||e[2]!==t?(o=t?{featureAnnouncementsUnreadCount:n,featureAnnouncementsReadCount:i}:{featureAnnouncementsUnreadCount:0,featureAnnouncementsReadCount:0},e[0]=i,e[1]=n,e[2]=t,e[3]=o):o=e[3],o},c=()=>{const e=(0,r.c)(4),t=(0,s.useSelector)(a.selectIsMetamaskNotificationsEnabled),n=(0,s.useSelector)(a.getOnChainMetamaskNotificationsUnreadCount),i=(0,s.useSelector)(a.getOnChainMetamaskNotificationsReadCount);let o;return e[0]!==t||e[1]!==i||e[2]!==n?(o=t?{onChainMetamaskNotificationsUnreadCount:n,onChainMetamaskNotificationsReadCount:i}:{onChainMetamaskNotificationsUnreadCount:0,onChainMetamaskNotificationsReadCount:0},e[0]=t,e[1]=i,e[2]=n,e[3]=o):o=e[3],o}}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useCounter.tsx"}],[7180,{"../../contexts/metamask-notifications/notification-storage-keys":7039,"../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCreateNotifications=function(){const e=(0,s.c)(5),t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(null);let l;e[0]!==t?(l=async()=>{r(null);try{await t((0,c.createOnChainTriggers)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw r(t instanceof Error?t.message:"An unexpected error occurred"),o.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let p;e[2]!==d||e[3]!==n?(p={createNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=p):p=e[4];return p},n.useDisableNotifications=function(){const e=(0,s.c)(5),t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(null);let l;e[0]!==t?(l=async()=>{r(null);try{await t((0,c.disableMetamaskNotifications)()),await(0,u.setUserHasTurnedOffNotificationsOnce)()}catch(e){const t=e;throw r(t instanceof Error?t.message:"An unexpected error occurred"),o.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let p;e[2]!==d||e[3]!==n?(p={disableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=p):p=e[4];return p},n.useEnableNotifications=function(){const e=(0,s.c)(5),t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(null);let l;e[0]!==t?(l=async()=>{r(null);try{await t((0,c.enableMetamaskNotifications)()),await(0,u.updateNotificationSubscriptionExpiration)()}catch(e){const t=e;throw r(t instanceof Error?t.message:"An unexpected error occurred"),o.default.error(t),t}},e[0]=t,e[1]=l):l=e[1];const d=l;let p;e[2]!==d||e[3]!==n?(p={enableNotifications:d,error:n},e[2]=d,e[3]=n,e[4]=p):p=e[4];return p},n.useListNotifications=function(){const e=(0,i.useDispatch)(),[t,n]=(0,a.useState)(!1),[r,s]=(0,a.useState)(null),[u,l]=(0,a.useState)(undefined);return{listNotifications:(0,a.useCallback)(async()=>{n(!0),s(null);const t=new URLSearchParams(window.location.search).get("previewToken");try{const n=await e((0,c.fetchAndUpdateMetamaskNotifications)(t??undefined));return l(n),n}catch(e){throw o.default.error(e),s(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1)}},[e]),notificationsData:u,isLoading:t,error:r}},n.useMarkNotificationAsRead=function(){const e=(0,s.c)(4),t=(0,i.useDispatch)();let n;e[0]!==t?(n=async e=>{try{t((0,c.markMetamaskNotificationsAsRead)(e))}catch(e){const t=e;throw o.default.error(t),t}},e[0]=t,e[1]=n):n=e[1];const r=n;let a;e[2]!==r?(a={markNotificationAsRead:r},e[2]=r,e[3]=a):a=e[3];return a};var r,s=e("react-compiler-runtime"),a=e("react"),i=e("react-redux"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},c=e("../../store/actions"),u=e("../../contexts/metamask-notifications/notification-storage-keys")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useNotifications.ts"}],[7181,{"../../selectors/metamask-notifications/metamask-notifications":8095,"../../store/actions":8127,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountSettingsProps=function(e){const t=(0,i.useSelector)(u.getIsUpdatingMetamaskNotificationsAccount),n=(0,i.useSelector)(u.selectIsMetamaskNotificationsEnabled),r=function(){const e=(0,i.useDispatch)(),t=(0,a.useCallback)(async t=>{try{return await e((0,c.checkAccountsPresence)(t))}catch{return{}}},[]);return t}(),[s,o]=(0,a.useState)({}),[l,d]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),h=(0,a.useMemo)(()=>JSON.stringify(e),[e]),f=(0,a.useCallback)(async e=>{try{d(!0),m(null);const t=await r(e);o(t)}catch{m("Failed to get account settings")}finally{d(!1)}},[]);return(0,a.useEffect)(()=>{if(!n)return;const e=JSON.parse(h);f(e)},[h,r,n]),{data:s,initialLoading:l,error:p,accountsBeingUpdated:t,update:f}},n.useSwitchAccountNotificationsChange=function(){const e=(0,s.c)(5),t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(null);let u;e[0]!==t?(u=async(e,n)=>{r(null);try{n?await t((0,c.enableAccounts)(e)):await t((0,c.disableAccounts)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");o.default.error(n),r(n)}t((0,c.hideLoadingIndication)())},e[0]=t,e[1]=u):u=e[1];const l=u;let d;e[2]!==n||e[3]!==l?(d={onChange:l,error:n},e[2]=n,e[3]=l,e[4]=d):d=e[4];return d},n.useSwitchFeatureAnnouncementsChange=function(){const e=(0,s.c)(5),t=(0,i.useDispatch)(),[n,r]=(0,a.useState)(null);let o;e[0]!==t?(o=async e=>{r(null);try{await t((0,c.setFeatureAnnouncementsEnabled)(e))}catch(e){const t=e,n=t instanceof Error?t.message:JSON.stringify(t??"");r(n)}},e[0]=t,e[1]=o):o=e[1];const u=o;let l;e[2]!==n||e[3]!==u?(l={onChange:u,error:n},e[2]=n,e[3]=u,e[4]=l):l=e[4];return l};var r,s=e("react-compiler-runtime"),a=e("react"),i=e("react-redux"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},c=e("../../store/actions"),u=e("../../selectors/metamask-notifications/metamask-notifications")}}},{package:"$root$",file:"ui/hooks/metamask-notifications/useSwitchNotifications.ts"}],[7182,{"../../../shared/lib/snaps/snaps":5892,"../../selectors":8094,"../../selectors/accounts":8083,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHdKeyringsWithSnapAccounts=void 0;var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../../selectors/accounts"),i=e("../../selectors"),o=e("../../../shared/lib/snaps/snaps");function c(e){return e.address}n.useHdKeyringsWithSnapAccounts=()=>{const e=(0,r.c)(5),t=(0,s.useSelector)(i.getMetaMaskHdKeyrings),n=(0,s.useSelector)(a.getInternalAccounts);let u;if(e[0]!==t||e[1]!==n){let r;e[3]!==n?(r=e=>{const t=n.filter(t=>{var n;return t.metadata.snap&&(0,o.isSnapPreinstalled)(t.metadata.snap.id)&&(null===(n=t.options)||void 0===n?void 0:n.entropySource)===e.metadata.id}).map(c);return{...e,accounts:[...e.accounts,...t]}},e[3]=n,e[4]=r):r=e[4],u=t.map(r),e[0]=t,e[1]=n,e[2]=u}else u=e[2];return u}}}},{package:"$root$",file:"ui/hooks/multi-srp/useHdKeyringsWithSnapAccounts.ts"}],[7183,{"../../components/app/assets/util/formatWithThreshold":6035,"../../ducks/locale/locale":7066,"../../ducks/metamask/metamask":7067,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayBalanceCalc=function(){const e=(0,r.c)(3),t=(0,s.useSelector)(i.getCurrentCurrency),n=(0,s.useSelector)(o.getIntlLocale);let c;e[0]!==t||e[1]!==n?(c=(e,r)=>{const s=e===undefined?0:e,i=r===undefined?t:r;return(0,a.formatWithThreshold)(s,.01,n,{style:"currency",currency:i})},e[0]=t,e[1]=n,e[2]=c):c=e[2];return c};var r=e("react-compiler-runtime"),s=e("react-redux"),a=(e("react"),e("../../components/app/assets/util/formatWithThreshold")),i=e("../../ducks/metamask/metamask"),o=e("../../ducks/locale/locale")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useAccountBalance.ts"}],[7184,{"../../selectors/assets":8086,"./useAccountBalance":7183,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSingleWalletAccountsBalanceCallback=function(e){const t=(0,r.c)(5);let n;t[0]!==e?(n=(0,a.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const o=n,c=(0,s.useSelector)(o),u=(0,i.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.groups?(l=e=>{var t;const n=null===(t=c.groups)||void 0===t?void 0:t[e];if(!n)return;return u(null==n?void 0:n.totalBalanceInUserCurrency,null==n?void 0:n.userCurrency)},t[2]=u,t[3]=c.groups,t[4]=l):l=t[4];return l},n.useSingleWalletDisplayBalance=function(e){const t=(0,r.c)(6);let n;t[0]!==e?(n=(0,a.selectBalanceByWallet)(e),t[0]=e,t[1]=n):n=t[1];const o=n,c=(0,s.useSelector)(o),u=(0,i.useDisplayBalanceCalc)();let l;t[2]!==u||t[3]!==c.totalBalanceInUserCurrency||t[4]!==c.userCurrency?(l=u(c.totalBalanceInUserCurrency,c.userCurrency),t[2]=u,t[3]=c.totalBalanceInUserCurrency,t[4]=c.userCurrency,t[5]=l):l=t[5];return l};var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../../selectors/assets"),i=e("./useAccountBalance")}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletBalance.ts"}],[7185,{"../../ducks/metamask/metamask":7067,"../../selectors/multichain-accounts/account-tree":8098,"../multi-srp/useHdKeyringsWithSnapAccounts":7182,"./utils":7186,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWalletInfo=void 0;var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../multi-srp/useHdKeyringsWithSnapAccounts"),i=e("../../selectors/multichain-accounts/account-tree"),o=e("../../ducks/metamask/metamask"),c=e("./utils");n.useWalletInfo=e=>{const t=(0,r.c)(12),n=(0,a.useHdKeyringsWithSnapAccounts)(),u=(0,s.useSelector)(o.getIsPrimarySeedPhraseBackedUp);let l;t[0]!==e?(l=t=>(0,i.getMultichainAccountsByWalletId)(t,e),t[0]=e,t[1]=l):l=t[1];const d=(0,s.useSelector)(l);let p;t[2]!==d?(p=Object.values(d??{}),t[2]=d,t[3]=p):p=t[3];const m=p;let h;e:{if(0===Object.entries(m||{}).length){let e;t[4]!==m?(e={multichainAccounts:m,keyringId:undefined},t[4]=m,t[5]=e):e=t[5],h=e;break e}const r=n.findIndex(t=>t.metadata.id===(0,c.stripWalletTypePrefixFromWalletId)(e));if(-1===r){let e;t[6]!==m?(e={multichainAccounts:m,keyringId:undefined},t[6]=m,t[7]=e):e=t[7],h=e;break e}const s=n[r],a=(null==s?void 0:s.metadata.id)??undefined,i=1===r+1?u:undefined;let o;t[8]!==i||t[9]!==a||t[10]!==m?(o={multichainAccounts:m,keyringId:a,isSRPBackedUp:i},t[8]=i,t[9]=a,t[10]=m,t[11]=o):o=t[11],h=o}return h}}}},{package:"$root$",file:"ui/hooks/multichain-accounts/useWalletInfo.ts"}],[7187,{"../../../../shared/lib/asset-utils":5824,"../../../../shared/modules/selectors/networks":5934,"../../../selectors":8094,"@metamask/utils":3116,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.RampsMetaMaskEntry=void 0;var r=e("react"),s=e("react-redux"),a=e("@metamask/utils"),i=e("../../../../shared/modules/selectors/networks"),o=e("../../../selectors"),c=e("../../../../shared/lib/asset-utils");const u="https://app.metamask.io";let l=n.RampsMetaMaskEntry=function(e){return e.BuySellButton="ext_buy_sell_button",e.NftBanner="ext_buy_banner_nfts",e.TokensBanner="ext_buy_banner_tokens",e.ActivityBanner="ext_buy_banner_activity",e.BtcBanner="ext_buy_banner_btc",e}({});n.default=(e=l.BuySellButton)=>{const t=(0,s.useSelector)(i.getCurrentChainId),n=(0,s.useSelector)(o.getMetaMetricsId),d=(0,s.useSelector)(o.getParticipateInMetaMetrics),p=(0,s.useSelector)(o.getDataCollectionForMarketing),m=(0,r.useCallback)(t=>{try{const r=new URLSearchParams;r.set("metamaskEntry",e);let s="";s=(0,c.isEvmChainId)(t)?(0,a.hexToNumber)(t).toString():t,r.set("chainId",s),n&&r.set("metametricsId",n),r.set("metricsEnabled",String(d)),p&&r.set("marketingEnabled",String(p));const i=new URL("https://app.metamask.io");return i.pathname="buy",i.search=r.toString(),i.toString()}catch{return`${u}/buy`}},[p,d,n,e]);return{openBuyCryptoInPdapp:(0,r.useCallback)(e=>{const n=m(e||t);global.platform.openTab({url:n})},[t,m]),getBuyURI:m}}}}},{package:"$root$",file:"ui/hooks/ramps/useRamps/useRamps.ts"}],[7188,{"../../ducks/metamask/metamask":7067,"../../ducks/rewards":7071,"../../ducks/rewards/selectors":7072,"../../store/actions":8127,"../../store/store":8132,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCandidateSubscriptionId=void 0;var r,s=e("react"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("react-redux"),o=e("../../store/actions"),c=e("../../ducks/metamask/metamask"),u=e("../../ducks/rewards/selectors"),l=e("../../ducks/rewards"),d=e("../../store/store");n.useCandidateSubscriptionId=()=>{const e=(0,i.useDispatch)(),t=(0,i.useSelector)(c.getIsUnlocked),n=(0,i.useSelector)(u.selectRewardsEnabled),r=(0,i.useSelector)(u.selectCandidateSubscriptionId),p=(0,d.useAppSelector)(e=>{var t;return null===(t=e.metamask.rewardsActiveAccount)||void 0===t?void 0:t.subscriptionId}),m=(0,s.useRef)(!1),h=(0,s.useCallback)(async()=>{try{if(!n)return void e((0,l.setCandidateSubscriptionId)(null));if(p)return m.current=!1,void e((0,l.setCandidateSubscriptionId)(p));if(m.current)return;m.current=!0;const t=await e((0,o.getRewardsCandidateSubscriptionId)());e((0,l.setCandidateSubscriptionId)(t))}catch(t){a.default.error("[useCandidateSubscriptionId] Error fetching candidate subscription ID:",t),e((0,l.setCandidateSubscriptionId)("error"))}finally{m.current=!1}},[n,e,p]);return(0,s.useEffect)(()=>{"retry"===r&&h()},[r,h]),(0,s.useEffect)(()=>{t&&h()},[h,t]),{fetchCandidateSubscriptionId:h}}}}},{package:"$root$",file:"ui/hooks/rewards/useCandidateSubscriptionId.ts"}],[7189,{"../../ducks/rewards":7071,"../../store/actions":8127,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGeoRewardsMetadata=void 0;var r=e("react"),s=e("react-redux"),a=e("../../ducks/rewards"),i=e("../../store/actions");n.useGeoRewardsMetadata=({enabled:e=!0})=>{const t=(0,s.useDispatch)(),n=(0,r.useRef)(!1),o=(0,r.useCallback)(async()=>{if(!n.current&&e){n.current=!0,t((0,a.setRewardsGeoMetadataLoading)(!0)),t((0,a.setRewardsGeoMetadataError)(!1));try{const e=await t((0,i.getRewardsGeoMetadata)());t((0,a.setRewardsGeoMetadata)(e))}catch(e){t((0,a.setRewardsGeoMetadataError)(!0))}finally{n.current=!1,t((0,a.setRewardsGeoMetadataLoading)(!1))}}else e||(t((0,a.setRewardsGeoMetadataError)(!1)),t((0,a.setRewardsGeoMetadataLoading)(!1)),t((0,a.setRewardsGeoMetadata)(null)))},[t,e]);return(0,r.useEffect)(()=>{o()},[o]),{fetchGeoRewardsMetadata:o}}}}},{package:"$root$",file:"ui/hooks/rewards/useGeoRewardsMetadata.ts"}],[7190,{"../../../shared/constants/metametrics":5791,"../../contexts/metametrics":7040,"../../ducks/rewards":7071,"../../pages/multichain-accounts/account-details/account-type-utils":7830,"../../store/actions":8127,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useLinkAccountAddress=void 0;var r=e("react"),s=e("react-redux"),a=e("../../store/actions"),i=e("../../contexts/metametrics"),o=e("../../../shared/constants/metametrics"),c=e("../../pages/multichain-accounts/account-details/account-type-utils"),u=e("../../ducks/rewards");n.useLinkAccountAddress=()=>{const e=(0,s.useDispatch)(),[t,n]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),p=(0,r.useContext)(i.MetaMetricsContext),m=(0,r.useRef)(!0);(0,r.useEffect)(()=>(m.current=!0,()=>{m.current=!1}),[]);const h=(0,r.useCallback)((e,t)=>{const n={account_type:(0,c.getAccountTypeCategory)(t)};p({category:o.MetaMetricsEventCategory.Rewards,event:e,properties:n})},[p]);return{linkAccountAddress:(0,r.useCallback)(async t=>{if(!m.current)return!1;n(!0),d(!1);try{const n=await e((0,a.rewardsIsOptInSupported)({account:t}));if(!m.current)return!1;if(!n)return d(!0),!1;const r=await e((0,a.rewardsGetOptInStatus)({addresses:[t.address]}));if(!m.current)return!1;if(r.ois[0])return!0;h(o.MetaMetricsEventName.RewardsAccountLinkingStarted,t);try{const n=await e((0,a.rewardsLinkAccountsToSubscriptionCandidate)([t]));if(!m.current)return!1;const r=n[0];return null!=r&&r.success?(h(o.MetaMetricsEventName.RewardsAccountLinkingCompleted,t),e((0,u.setRewardsAccountLinkedTimestamp)(Date.now())),!0):(h(o.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}catch(e){return!!m.current&&(h(o.MetaMetricsEventName.RewardsAccountLinkingFailed,t),d(!0),!1)}}catch(e){return!!m.current&&(d(!0),!1)}finally{m.current&&n(!1)}},[h,e]),isLoading:t,isError:l}}}}},{package:"$root$",file:"ui/hooks/rewards/useLinkAccountAddress.ts"}],[7191,{"../../../shared/constants/metametrics":5791,"../../components/app/rewards/utils/handleRewardsErrorMessage":6266,"../../contexts/metametrics":7040,"../../ducks/rewards":7071,"../../selectors":8094,"../../selectors/multichain-accounts/account-tree":8098,"../../store/actions":8127,"../useI18nContext":7235,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOptIn=void 0;var r,s=e("react"),a=e("react-redux"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../selectors/multichain-accounts/account-tree"),c=e("../../ducks/rewards"),u=e("../../selectors"),l=e("../../contexts/metametrics"),d=e("../../../shared/constants/metametrics"),p=e("../../store/actions"),m=e("../../components/app/rewards/utils/handleRewardsErrorMessage"),h=e("../useI18nContext");n.useOptIn=e=>{const[t,n]=(0,s.useState)(null),r=(0,a.useDispatch)(),[f,g]=(0,s.useState)(!1),b=(0,s.useContext)(l.MetaMetricsContext),S=(0,h.useI18nContext)(),y=(0,a.useSelector)(o.getSelectedAccountGroup),v=(0,a.useSelector)(u.getSelectedAccount),{id:T}=(0,a.useSelector)(e=>(0,o.getWalletIdAndNameByAccountAddress)(e,v.address))||{walletId:undefined},k=(0,a.useSelector)(e=>T?(0,o.getMultichainAccountsByWalletId)(e,T):{}),w=(0,s.useMemo)(()=>k?Object.keys(k)[0]:undefined,[k]),_=(0,a.useSelector)(e=>w?(0,o.getInternalAccountsFromGroupById)(e,w):[]),I=(0,a.useSelector)(e=>y?(0,o.getInternalAccountsFromGroupById)(e,y):[]);return{optin:(0,s.useCallback)(async t=>{const s={referred:Boolean(t),referral_code_used:t};b({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInStarted,properties:s});let a=null;try{g(!0),n(null);const o=w&&_.length>0?_:I,c=w&&_.length>0?I:_;if(a=await r((0,p.rewardsOptIn)({accounts:o,referralCode:t})),a){if(c.length>0)try{await r((0,p.rewardsLinkAccountsToSubscriptionCandidate)(c))}catch{}b({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInCompleted,properties:s});try{await r((0,p.updateMetaMetricsTraits)({[d.MetaMetricsUserTrait.HasRewardsOptedIn]:"on",...t&&{[d.MetaMetricsUserTrait.RewardsReferred]:!0,[d.MetaMetricsUserTrait.RewardsReferralCodeUsed]:t}}))}catch{}if(null!=e&&e.rewardPoints&&null!=e&&e.shieldSubscriptionId)try{await r((0,p.linkRewardToShieldSubscription)(e.shieldSubscriptionId,e.rewardPoints))}catch(e){i.default.warn("Failed to link reward to shield subscription",e)}}}catch(e){b({category:d.MetaMetricsEventCategory.Rewards,event:d.MetaMetricsEventName.RewardsOptInFailed,properties:s});const t=(0,m.handleRewardsErrorMessage)(e,S);n(t)}a&&r((0,c.setCandidateSubscriptionId)(a)),g(!1)},[b,w,_,I,r,S,null==e?void 0:e.rewardPoints,null==e?void 0:e.shieldSubscriptionId]),optinLoading:f,optinError:t,clearOptinError:(0,s.useCallback)(()=>n(null),[])}}}}},{package:"$root$",file:"ui/hooks/rewards/useOptIn.ts"}],[7192,{"../../../shared/constants/rewards":5802,"../../ducks/metamask/metamask":7067,"../../ducks/rewards":7071,"../../ducks/rewards/selectors":7072,"../../store/actions":8127,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSeasonStatus=void 0;var r=e("react"),s=e("react-redux"),a=e("../../store/actions"),i=e("../../ducks/metamask/metamask"),o=e("../../ducks/rewards/selectors"),c=e("../../ducks/rewards"),u=e("../../../shared/constants/rewards");n.useSeasonStatus=({subscriptionId:e,onAuthorizationError:t})=>{const n=(0,s.useDispatch)(),l=(0,s.useSelector)(i.getIsUnlocked),d=(0,s.useSelector)(o.selectRewardsEnabled),p=(0,r.useRef)(null),m=(0,r.useCallback)(async()=>{if(!e||"pending"===e||"retry"===e||"error"===e||!d)return n((0,c.setSeasonStatus)(null)),n((0,c.setSeasonStatusError)(null)),void n((0,c.setSeasonStatusLoading)(!1));if(!Boolean(p.current)||p.current!==e){p.current=e,n((0,c.setSeasonStatusLoading)(!0));try{const t=await n((0,a.getRewardsSeasonMetadata)("current"));if(!t)throw new Error("No season metadata found");const r=await n((0,a.getRewardsSeasonStatus)(e,t.id));n((0,c.setSeasonStatus)(r)),n((0,c.setSeasonStatusError)(null))}catch(e){const r=e instanceof Error?e.message:"Unknown error";n((0,c.setSeasonStatusError)(r)),(r.includes(u.REWARDS_ERROR_MESSAGES.AUTHORIZATION_FAILED)||r.includes(u.REWARDS_ERROR_MESSAGES.SEASON_NOT_FOUND))&&t&&(await t(),n((0,c.setSeasonStatus)(null)))}finally{p.current=null,n((0,c.setSeasonStatusLoading)(!1))}}},[e,t,d,n]);return(0,r.useEffect)(()=>{l&&e&&m()},[l,m,e]),{fetchSeasonStatus:m}}}}},{package:"$root$",file:"ui/hooks/rewards/useSeasonStatus.ts"}],[7193,{"../../store/actions":8127,lodash:4838,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useValidateReferralCode=void 0;var r=e("react"),s=e("lodash"),a=e("react-redux"),i=e("../../store/actions");n.useValidateReferralCode=(e="",t=1e3)=>{const[n,o]=(0,r.useState)(e),[c,u]=(0,r.useState)(""),[l,d]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),h=(0,r.useRef)(!1),f=(0,a.useDispatch)(),g=(0,r.useCallback)(async e=>{try{return await f((0,i.validateRewardsReferralCode)(e))?"":"Invalid code"}catch(e){return m(!0),"Unknown error"}},[f]),b=(0,r.useCallback)((0,s.debounce)(async e=>{m(!1);const t=await g(e);u(t),d(!1)},t),[t,g]),S=(0,r.useCallback)(e=>{const t=e.trim().toUpperCase();if(o(t),t.length<6)return b.cancel(),d(!1),void u("minLength 6 characters");t&&d(!0),b(t)},[b]);(0,r.useEffect)(()=>{h.current?e!==n&&S(e):(S(e),h.current=!0)},[e]),(0,r.useEffect)(()=>()=>b.cancel(),[b]);const y=Boolean(n)&&!c&&!l;return{referralCode:n,setReferralCode:S,validateCode:g,isValidating:l,isValid:y,isUnknownError:p}}}}},{package:"$root$",file:"ui/hooks/rewards/useValidateReferralCode.ts"}],[7194,{"../../../../shared/constants/metametrics":5791,"../../../../shared/constants/subscriptions":5809,"../../../../shared/modules/shield":5941,"../../../contexts/metametrics":7040,"../../../selectors":8094,"../../../selectors/multichain-accounts/account-tree":8098,"../../../store/actions":8127,"../../useAccountTotalFiatBalance":7212,"./utils":7195,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionMetrics=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-redux"),i=e("../../../contexts/metametrics"),o=e("../../../../shared/constants/metametrics"),c=e("../../../selectors"),u=e("../../useAccountTotalFiatBalance"),l=e("../../../../shared/modules/shield"),d=e("../../../store/actions"),p=e("../../../../shared/constants/subscriptions"),m=e("../../../selectors/multichain-accounts/account-tree"),h=e("./utils");function f(e){return(0,m.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}n.useSubscriptionMetrics=()=>{const e=(0,r.c)(72),t=(0,a.useDispatch)(),n=(0,s.useContext)(i.MetaMetricsContext),m=(0,a.useSelector)(f),g=(0,a.useSelector)(c.getMetaMaskHdKeyrings),{totalFiatBalance:b}=(0,u.useAccountTotalFiatBalance)(m,!0,!0),S=(0,a.useSelector)(c.getPendingShieldCohortTxType);let y;e[0]!==t||e[1]!==b?(y=async e=>{await t((0,d.setShieldSubscriptionMetricsProps)({marketingUtmParams:e.marketingUtmParams,source:e.source,userBalanceInUSD:Number(b),rewardPoints:e.rewardPoints}))},e[0]=t,e[1]=b,e[2]=y):y=e[2];const v=y;let T;e[3]!==g||e[4]!==m||e[5]!==b||e[6]!==n?(T=async(e,t)=>{const r=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),s=(0,h.formatCaptureShieldEligibilityCohortEventsProps)(e,Number(b));n({event:t,category:o.MetaMetricsEventCategory.Shield,properties:{...r,...s}})},e[3]=g,e[4]=m,e[5]=b,e[6]=n,e[7]=T):T=e[7];const k=T;let w;e[8]!==g||e[9]!==S||e[10]!==m||e[11]!==b||e[12]!==n?(w=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=e.source===p.ShieldMetricsSourceEnum.PostTransaction?S:undefined;n({event:o.MetaMetricsEventName.ShieldEntryModal,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...(0,l.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,modal_type:e.type,modal_cta_action_clicked:e.modalCtaActionClicked,post_transaction_type:r}})},e[8]=g,e[9]=S,e[10]=m,e[11]=b,e[12]=n,e[13]=w):w=e[13];const _=w;let I;e[14]!==g||e[15]!==m||e[16]!==b||e[17]!==n?(I=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,h.formatDefaultShieldSubscriptionRequestEventProps)(e);n({event:o.MetaMetricsEventName.ShieldSubscriptionRequest,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r}})},e[14]=g,e[15]=m,e[16]=b,e[17]=n,e[18]=I):I=e[18];const C=I;let E;e[19]!==g||e[20]!==m||e[21]!==b||e[22]!==n?(E=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,l.formatExistingSubscriptionEventProps)(e);n({event:o.MetaMetricsEventName.ShieldMembershipRestartRequest,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r,status:e.requestStatus,error:e.errorMessage}})},e[19]=g,e[20]=m,e[21]=b,e[22]=n,e[23]=E):E=e[23];const A=E;let M;e[24]!==g||e[25]!==m||e[26]!==b||e[27]!==n?(M=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,l.formatExistingSubscriptionEventProps)(e);n({event:o.MetaMetricsEventName.ShieldMembershipCancelled,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r,status:e.cancellationStatus,error:e.errorMessage,latest_subscription_duration:e.latestSubscriptionDuration}})},e[24]=g,e[25]=m,e[26]=b,e[27]=n,e[28]=M):M=e[28];const N=M;let P;e[29]!==g||e[30]!==m||e[31]!==b||e[32]!==n?(P=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,h.formatCaptureShieldPaymentMethodChangeEventProps)(e);n({event:o.MetaMetricsEventName.ShieldPaymentMethodChange,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r,status:e.changeStatus,error:e.errorMessage}})},e[29]=g,e[30]=m,e[31]=b,e[32]=n,e[33]=P):P=e[33];const O=P;let R;e[34]!==g||e[35]!==m||e[36]!==b||e[37]!==n?(R=(e,t)=>{const r=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),s=(0,l.formatExistingSubscriptionEventProps)(e);n({event:t,category:o.MetaMetricsEventCategory.Shield,properties:{...r,...s}})},e[34]=g,e[35]=m,e[36]=b,e[37]=n,e[38]=R):R=e[38];const x=R;let D;e[39]!==g||e[40]!==m||e[41]!==b||e[42]!==n?(D=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,h.formatCaptureShieldCtaClickedEventProps)(e);n({event:o.MetaMetricsEventName.ShieldCtaClicked,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r}})},e[39]=g,e[40]=m,e[41]=b,e[42]=n,e[43]=D):D=e[43];const B=D;let U;e[44]!==g||e[45]!==m||e[46]!==b||e[47]!==n?(U=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b));n({event:o.MetaMetricsEventName.ShieldClaimSubmission,category:o.MetaMetricsEventCategory.Shield,properties:{...t,subscription_status:e.subscriptionStatus,attachments_count:e.attachmentsCount,submission_status:e.submissionStatus,error:e.errorMessage}})},e[44]=g,e[45]=m,e[46]=b,e[47]=n,e[48]=U):U=e[48];const L=U;let F;e[49]!==g||e[50]!==m||e[51]!==b||e[52]!==n?(F=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b)),r=(0,l.formatExistingSubscriptionEventProps)(e);n({event:o.MetaMetricsEventName.ShieldMembershipErrorStateClicked,category:o.MetaMetricsEventCategory.Shield,properties:{...t,...r,type:e.errorCause,action:e.actionClicked,location:e.location,view:e.view}})},e[49]=g,e[50]=m,e[51]=b,e[52]=n,e[53]=F):F=e[53];const $=F;let j;e[54]!==g||e[55]!==m||e[56]!==b||e[57]!==n?(j=e=>{const t=(0,l.getShieldCommonTrackingProps)(m,g,Number(b));n({event:o.MetaMetricsEventName.ShieldSubscriptionUnexpectedErrorEvent,category:o.MetaMetricsEventCategory.Shield,properties:{...t,error_message:e.errorMessage,location:e.location}})},e[54]=g,e[55]=m,e[56]=b,e[57]=n,e[58]=j):j=e[58];const W=j;let H;return e[59]!==x||e[60]!==L||e[61]!==B||e[62]!==k||e[63]!==_||e[64]!==$||e[65]!==N||e[66]!==O||e[67]!==C||e[68]!==A||e[69]!==W||e[70]!==v?(H={setShieldSubscriptionMetricsPropsToBackground:v,captureShieldEntryModalEvent:_,captureShieldSubscriptionRequestEvent:C,captureShieldMembershipCancelledEvent:N,captureShieldPaymentMethodChangeEvent:O,captureShieldCtaClickedEvent:B,captureShieldClaimSubmissionEvent:L,captureShieldEligibilityCohortEvent:k,captureCommonExistingShieldSubscriptionEvents:x,captureShieldErrorStateClickedEvent:$,captureShieldSubscriptionRestartRequestEvent:A,captureShieldUnexpectedErrorEvent:W},e[59]=x,e[60]=L,e[61]=B,e[62]=k,e[63]=_,e[64]=$,e[65]=N,e[66]=O,e[67]=C,e[68]=A,e[69]=W,e[70]=v,e[71]=H):H=e[71],H}}}},{package:"$root$",file:"ui/hooks/shield/metrics/useSubscriptionMetrics.ts"}],[7195,{"../../../../shared/modules/shield":5941},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatCaptureShieldCtaClickedEventProps=function(e){return{...(0,r.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,page:e.redirectToPage,url:e.redirectToUrl,cta_action_clicked:e.ctaActionClicked}},n.formatCaptureShieldEligibilityCohortEventsProps=function(e,t){const n={multi_chain_balance_category:(0,r.getUserBalanceCategory)(Number(t)),number_of_eligible_cohorts:e.numberOfEligibleCohorts,assigned_cohort:e.cohort};"modalType"in e&&(n.modal_type=e.modalType);return n},n.formatCaptureShieldPaymentMethodChangeEventProps=function(e){const t=(0,r.formatExistingSubscriptionEventProps)(e),n=(0,r.getBillingIntervalForMetrics)(e.newBillingInterval);return{...t,new_payment_type:e.newPaymentType,new_billing_interval:n,new_crypto_payment_chain:e.newCryptoPaymentChain,new_payment_currency:e.newPaymentCurrency}},n.formatDefaultShieldSubscriptionRequestEventProps=function(e){const t=(0,r.getBillingIntervalForMetrics)(e.defaultBillingInterval),n=(0,r.getBillingIntervalForMetrics)(e.billingInterval),s=(0,r.getBillingCyclesForMetrics)(e.billingInterval);return{...(0,r.getShieldMarketingTrackingProps)(e.marketingUtmParams),source:e.source,post_transaction_type:e.postTransactionType,subscription_state:e.subscriptionState,default_payment_type:e.defaultPaymentType,default_payment_currency:e.defaultPaymentCurrency,default_billing_interval:t,default_payment_chain:e.defaultPaymentChain,payment_type:e.paymentType,payment_currency:e.paymentCurrency,is_trial:e.isTrialSubscription,billing_interval:n,billing_cycles:s,payment_chain:e.paymentChain,has_sufficient_crypto_balance:e.hasSufficientCryptoBalance,gas_sponsored:e.gasSponsored,error:e.errorMessage,status:e.requestStatus}};var r=e("../../../../shared/modules/shield")}}},{package:"$root$",file:"ui/hooks/shield/metrics/utils.ts"}],[7196,{"../../pages/settings/transaction-shield-tab/claims-form/constants":7999,"../../selectors/shield/claims":8116,"../../store/actions":8127,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimDraft=void 0;var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("../../store/actions"),i=e("../../selectors/shield/claims"),o=e("../../pages/settings/transaction-shield-tab/claims-form/constants");async function c(e){return await(0,a.saveClaimDraft)(e)}async function u(e){await(0,a.deleteClaimDraft)(e)}n.useClaimDraft=()=>{const e=(0,r.c)(6),t=(0,s.useSelector)(i.getClaimDrafts),n=c;let a;e[0]!==t?(a=e=>t.find(t=>t.draftId===e),e[0]=t,e[1]=a):a=e[1];const l=a,d=u,p=t.length>=o.MAX_DRAFT_CLAIMS;let m;return e[2]!==t||e[3]!==l||e[4]!==p?(m={drafts:t,hasMaxDrafts:p,saveDraft:n,getDraft:l,deleteDraft:d},e[2]=t,e[3]=l,e[4]=p,e[5]=m):m=e[5],m}}}},{package:"$root$",file:"ui/hooks/shield/useClaimDraft.ts"}],[7197,{"../../contexts/claims/claims":7033,"../../pages/settings/transaction-shield-tab/types":8020,"../../store/actions":8127,"./useClaimDraft":7196,react:5256,"react-compiler-runtime":5170,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useClaimState=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("react-router-dom"),i=e("../../contexts/claims/claims"),o=e("../../store/actions"),c=e("../../pages/settings/transaction-shield-tab/types"),u=e("./useClaimDraft");n.useClaimState=e=>{const t=(0,r.c)(30),n=e===undefined?c.CLAIMS_FORM_MODES.NEW:e,{pathname:l}=(0,a.useLocation)(),{claims:d}=(0,i.useClaims)(),{getDraft:p}=(0,u.useClaimDraft)(),[m,h]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[b,S]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[T,k]=(0,s.useState)(""),[w,_]=(0,s.useState)(""),[I,C]=(0,s.useState)();let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E=[],t[0]=E):E=t[0];const[A,M]=(0,s.useState)(E),[N,P]=(0,s.useState)(""),[O,R]=(0,s.useState)(),x=n===c.CLAIMS_FORM_MODES.VIEW,D=n===c.CLAIMS_FORM_MODES.EDIT_DRAFT;let B;t[1]!==l?(B=l.split("/").pop(),t[1]=l,t[2]=B):B=t[2];const U=B,L=(0,s.useRef)(null);let F,$,j,W,H,G,Y,K;return t[3]!==m||t[4]!==b||t[5]!==x?(F=()=>{!x&&m&&b&&(async()=>{const e=await(0,o.generateClaimSignature)(m,b);P(e)})()},$=[x,m,b],t[3]=m,t[4]=b,t[5]=x,t[6]=F,t[7]=$):(F=t[6],$=t[7]),(0,s.useEffect)(F,$),t[8]!==U||t[9]!==d||t[10]!==x?(j=()=>{if(x&&U){const e=d.find(e=>e.id===U);e&&(g(e.email),h(e.chainId),S(e.impactedWalletAddress),v(e.impactedTxHash),k(e.reimbursementWalletAddress),_(e.description),M(e.attachments||[]))}},W=[x,U,d],t[8]=U,t[9]=d,t[10]=x,t[11]=j,t[12]=W):(j=t[11],W=t[12]),(0,s.useEffect)(j,W),t[13]!==U||t[14]!==p||t[15]!==D?(H=()=>{if(L.current!==U&&D&&U){const e=p(U);e&&(L.current=U,R(e.draftId),g(e.email||""),h(e.chainId||""),S(e.impactedWalletAddress||""),v(e.impactedTxHash||""),k(e.reimbursementWalletAddress||""),_(e.description||""))}},G=[D,U,p],t[13]=U,t[14]=p,t[15]=D,t[16]=H,t[17]=G):(H=t[16],G=t[17]),(0,s.useEffect)(H,G),t[18]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{h(""),g(""),S(""),v(""),k(""),_(""),C(undefined),R(undefined)},t[18]=Y):Y=t[18],t[19]!==w||t[20]!==m||t[21]!==N||t[22]!==O||t[23]!==f||t[24]!==I||t[25]!==y||t[26]!==b||t[27]!==T||t[28]!==A?(K={chainId:m,setChainId:h,email:f,setEmail:g,impactedWalletAddress:b,setImpactedWalletAddress:S,impactedTransactionHash:y,setImpactedTransactionHash:v,reimbursementWalletAddress:T,setReimbursementWalletAddress:k,caseDescription:w,setCaseDescription:_,files:I,setFiles:C,uploadedFiles:A,claimSignature:N,currentDraftId:O,clear:Y},t[19]=w,t[20]=m,t[21]=N,t[22]=O,t[23]=f,t[24]=I,t[25]=y,t[26]=b,t[27]=T,t[28]=A,t[29]=K):K=t[29],K}}}},{package:"$root$",file:"ui/hooks/shield/useClaimState.ts"}],[7198,{"../../../shared/modules/conversion.utils":5913,"../../../shared/modules/hexstring-utils":5922,"../../selectors":8094,"../../selectors/multichain-accounts/account-tree":8098,"../../selectors/snaps":8122,"@metamask/utils":3116,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisplayName=void 0;var r=e("react-compiler-runtime"),s=e("@metamask/utils"),a=e("react-redux"),i=e("../../selectors/snaps"),o=e("../../../shared/modules/hexstring-utils"),c=e("../../../shared/modules/conversion.utils"),u=e("../../selectors/multichain-accounts/account-tree"),l=e("../../selectors");n.useDisplayName=e=>{var t;const n=(0,r.c)(11),{address:d,chain:p}=e,{namespace:m,reference:h}=p,f=m===s.KnownCaipNamespace.Eip155;let g;n[0]!==d||n[1]!==f?(g=f?(0,o.toChecksumHexAddress)(d):d,n[0]=d,n[1]=f,n[2]=g):g=n[2];const b=g,S=(0,a.useSelector)(l.getIsMultichainAccountsState2Enabled);let y;n[3]!==b?(y=e=>(0,u.getAccountGroupsByAddress)(e,[b]),n[3]=b,n[4]=y):y=n[4];const v=null===(t=(0,a.useSelector)(y)[0])||void 0===t?void 0:t.metadata.name;let T;n[5]!==b?(T=e=>(0,i.getAccountNameFromState)(e,b),n[5]=b,n[6]=T):T=n[6];const k=(0,a.useSelector)(T);let w;n[7]!==f||n[8]!==b||n[9]!==h?(w=e=>(0,i.getAddressBookEntryByNetwork)(e,b,`0x${(0,c.decimalToHex)(f?h:"0")}`),n[7]=f,n[8]=b,n[9]=h,n[10]=w):w=n[10];const _=(0,a.useSelector)(w);return S&&v||k||f&&(null==_?void 0:_.name)||undefined}}}},{package:"$root$",file:"ui/hooks/snaps/useDisplayName.ts"}],[7199,{"../../selectors":8094,"@metamask/snaps-sdk":2786,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useInsightSnaps=function(e){const t=(0,r.c)(9);let n;t[0]!==e?(n=t=>(0,i.getSnapInsights)(t,e),t[0]=e,t[1]=n):n=t[1];const a=(0,s.useSelector)(n);let c;t[2]!==a?(c=a?Object.values(a):[],t[2]=a,t[3]=c):c=t[3];const u=c;let l;t[4]!==u?(l=u.filter(o),t[4]=u,t[5]=l):l=t[5];const d=l;let p;t[6]!==u||t[7]!==d?(p={data:u,warnings:d},t[6]=u,t[7]=d,t[8]=p):p=t[8];return p};var r=e("react-compiler-runtime"),s=e("react-redux"),a=e("@metamask/snaps-sdk"),i=e("../../selectors");function o(e){return e.severity===a.SeverityLevel.Critical}}}},{package:"$root$",file:"ui/hooks/snaps/useInsightSnaps.js"}],[7200,{react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("react-compiler-runtime"),s=e("react");n.default=()=>{const e=(0,r.c)(4),t=(0,s.useRef)(null),[n,a]=(0,s.useState)(!1);let i,o,c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a(t.current&&t.current.offsetHeight<t.current.scrollHeight)},o=[t],e[0]=i,e[1]=o):(i=e[0],o=e[1]),(0,s.useEffect)(i,o),e[2]!==n?(c={contentRef:t,isOverflowing:n},e[2]=n,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useIsOverflowing.js"}],[7201,{"../../store/actions":8127,react:5256,"react-compiler-runtime":5170},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSafeWebsite=void 0;var r=e("react-compiler-runtime"),s=e("react"),a=e("../../store/actions");n.useSafeWebsite=e=>{const t=(0,r.c)(3),[n,i]=(0,s.useState)();let o,c;return t[0]!==e?(o=()=>{e&&(async()=>{(await(0,a.getPhishingResult)(e)).result||i(new URL(e))})()},c=[e],t[0]=e,t[1]=o,t[2]=c):(o=t[1],c=t[2]),(0,s.useEffect)(o,c),n}}}},{package:"$root$",file:"ui/hooks/snaps/useSafeWebsite.ts"}],[7202,{"../../selectors":8094,"../../store/actions":8127,"@metamask/snaps-rpc-methods":2730,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNameResolution=function(){const e=(0,r.c)(6),t=(0,s.useSelector)(i.getNameLookupSnaps);let n;e[0]!==t?(n=(e,n)=>t.filter(t=>{const{permission:r}=t,s=(0,a.getChainIdsCaveat)(r);if(s&&!s.includes(e))return!1;const i=(0,a.getLookupMatchersCaveat)(r);if(i){const{tlds:e,schemes:t}=i;return(null==e?void 0:e.some(e=>n.endsWith(`.${e}`)))||(null==t?void 0:t.some(e=>n.startsWith(`${e}:`)))}return!0}).map(l),e[0]=t,e[1]=n):n=e[1];const d=n;let p;e[2]!==d?(p=async(e,t)=>{const n=d(e,t);if(0===n.length)return[];return(await Promise.allSettled(n.map(n=>(0,o.handleSnapRequest)({snapId:n,origin:"metamask",handler:"onNameLookup",request:{jsonrpc:"2.0",method:" ",params:{chainId:e,domain:t}}})))).filter(u).flatMap(c)},e[2]=d,e[3]=p):p=e[3];const m=p;let h;e[4]!==m?(h={fetchResolutions:m},e[4]=m,e[5]=h):h=e[5];return h};var r=e("react-compiler-runtime"),s=(e("react"),e("react-redux")),a=e("@metamask/snaps-rpc-methods"),i=e("../../selectors"),o=e("../../store/actions");function c(e){return e.value.resolvedAddresses}function u(e){return"fulfilled"===e.status&&e.value}function l(e){const{id:t}=e;return t}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNameResolution.ts"}],[7203,{"../../helpers/utils/util":7141,"@metamask/snaps-utils":2903,react:5256,"react-compiler-runtime":5170,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("react-compiler-runtime"),s=(e("react"),e("react-router-dom")),a=e("@metamask/snaps-utils"),i=e("../../helpers/utils/util");n.default=()=>{const e=(0,r.c)(4),t=(0,s.useNavigate)();let n;e[0]!==t?(n=e=>{let n;const r=(0,a.parseMetaMaskUrl)(e);n=r.snapId?(0,i.getSnapRoute)(r.snapId):r.path,t(n)},e[0]=t,e[1]=n):n=e[1];const o=n;let c;return e[2]!==o?(c={handleSnapNavigate:o},e[2]=o,e[3]=c):c=e[3],c}}}},{package:"$root$",file:"ui/hooks/snaps/useSnapNavigation.ts"}],[7204,{"../../store/actions":8127,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapSettings=function({snapId:e}){const t=(0,s.useDispatch)(),[n,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)(undefined),[u,l]=(0,r.useState)(undefined);return(0,r.useEffect)(()=>{let n=!1;return e&&async function(e){try{l(undefined),i(!0);const r=await(0,a.handleSnapRequest)({snapId:e,origin:"metamask",handler:"onSettingsPage",request:{jsonrpc:"2.0",method:" "}});n||(c(r),(0,a.forceUpdateMetamaskState)(t))}catch(e){n||l(e)}finally{n||i(!1)}}(e),()=>{n=!0}},[e]),{data:o,error:u,loading:n}};var r=e("react"),s=e("react-redux"),a=e("../../store/actions")}}},{package:"$root$",file:"ui/hooks/snaps/useSnapSettings.ts"}],[7205,{"../../selectors":8094,"../../store/actions":8127,loglevel:4846,react:5256,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSyncSRPs=void 0;var r,s=e("react"),a=e("react-redux"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("../../store/actions"),c=e("../../selectors");n.useSyncSRPs=()=>{const e=(0,a.useDispatch)(),t=(0,a.useSelector)(c.getIsSocialLoginFlow),[n,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async()=>{if(t)try{r(!0),await e((0,o.syncSeedPhrases)())}catch(e){i.default.error("[useSyncSRPs] error",e)}finally{r(!1)}})()},[e,t]),{loading:n}}}}},{package:"$root$",file:"ui/hooks/social-sync/useSyncSRPs.ts"}],[7206,{"../../../shared/constants/time":5812,"../../../shared/lib/shield":5891,"../../store/actions":8127,"../useAsync":7215,"../useThrottle":7265,"./useSubscription":7208,"./useSubscriptionPricing":7209,"@metamask/subscription-controller":2932,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldSubscriptionCryptoSufficientBalanceCheck=n.useShieldAddFundTrigger=n.useHandleShieldAddFundTrigger=void 0;var r,s=e("react-compiler-runtime"),a=e("react"),i=e("react-redux"),o=e("@metamask/subscription-controller"),c=(r=e("loglevel"))&&r.__esModule?r:{default:r},u=e("../../store/actions"),l=e("../../../shared/lib/shield"),d=e("../useAsync"),p=e("../../../shared/constants/time"),m=e("../useThrottle"),h=e("./useSubscriptionPricing"),f=e("./useSubscription");const g=()=>{const e=(0,s.c)(19),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(o.PRODUCT_TYPES.SHIELD,t),{subscriptionPricing:r}=(0,h.useSubscriptionPricing)(),a=(0,h.useSubscriptionPaymentMethods)(o.PAYMENT_TYPES.byCrypto,r),i=null==n?void 0:n.paymentMethod;let c;var u;e[0]!==i||e[1]!==(null==a?void 0:a.chains)?(c=i?null==a||null===(u=a.chains)||void 0===u||null===(u=u.find(e=>{var t;return e.chainId.toLowerCase()===(null==i||null===(t=i.crypto)||void 0===t||null===(t=t.chainId)||void 0===t?void 0:t.toLowerCase())}))||void 0===u?void 0:u.tokens.find(e=>{var t;return e.symbol.toLowerCase()===(null==i||null===(t=i.crypto)||void 0===t||null===(t=t.tokenSymbol)||void 0===t?void 0:t.toLowerCase())}):undefined,e[0]=i,e[1]=null==a?void 0:a.chains,e[2]=c):c=e[2];const l=c,d=(0,h.useSubscriptionProductPlans)(o.PRODUCT_TYPES.SHIELD,r);let p;e[3]!==d||e[4]!==(null==n?void 0:n.interval)?(p=null==d?void 0:d.find(e=>e.interval===(null==n?void 0:n.interval)),e[3]=d,e[4]=null==n?void 0:n.interval,e[5]=p):p=e[5];const m=p,g=null==a?void 0:a.chains;let b;e[6]!==m||e[7]!==g?(b={paymentChains:g,price:m,productType:o.PRODUCT_TYPES.SHIELD},e[6]=m,e[7]=g,e[8]=b):b=e[8];const{availableTokenBalances:S}=(0,h.useAvailableTokenBalances)(b);let y;e:{if(!i||!l){y=undefined;break e}let t;if(e[9]!==S||e[10]!==i||e[11]!==l){let n;e[13]!==i||e[14]!==l?(n=e=>{var t,n;return(null===(t=i.crypto)||void 0===t?void 0:t.chainId)===e.chainId&&l.address.toLowerCase()===(null===(n=e.address)||void 0===n?void 0:n.toLowerCase())},e[13]=i,e[14]=l,e[15]=n):n=e[15],t=S.find(n),e[9]=S,e[10]=i,e[11]=l,e[12]=t}else t=e[12];const n=t;n&&n.balance?y=n:y=undefined}const v=y,T=Boolean(v);let k;return e[16]!==T||e[17]!==v?(k={hasAvailableSelectedToken:T,validTokenBalance:v},e[16]=T,e[17]=v,e[18]=k):k=e[18],k};n.useShieldSubscriptionCryptoSufficientBalanceCheck=g;const b=()=>{const e=(0,i.useDispatch)(),{subscriptions:t}=(0,f.useUserSubscriptions)(),n=(0,f.useUserSubscriptionByProduct)(o.PRODUCT_TYPES.SHIELD,t),r=n&&(0,l.getIsShieldSubscriptionPaused)(n),{subscriptionPricing:s}=(0,h.useSubscriptionPricing)(),p=(0,h.useSubscriptionProductPlans)(o.PRODUCT_TYPES.SHIELD,s),m=(0,a.useMemo)(()=>null==p?void 0:p.find(e=>e.interval===(null==n?void 0:n.interval)),[p,n]),g=null==n?void 0:n.paymentMethod,[b,S]=(0,d.useAsyncCallback)(async()=>{if(!(n&&m&&g&&r))throw new Error("Invalid parameters to handle shield add fund trigger");try{await e((0,u.updateSubscriptionCryptoPaymentMethod)({subscriptionId:n.id,paymentType:o.PAYMENT_TYPES.byCrypto,recurringInterval:n.interval,chainId:g.crypto.chainId,payerAddress:g.crypto.payerAddress,tokenSymbol:g.crypto.tokenSymbol,billingCycles:n.billingCycles??(null==m?void 0:m.minBillingCycles),rawTransaction:undefined})),await e((0,u.getSubscriptions)())}catch(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}},[e,n,m,g,r]);return{handleTriggerSubscriptionCheck:b,result:S}};n.useHandleShieldAddFundTrigger=b;const S=5*p.MINUTE;function y(e){c.default.error("[useShieldAddFundTrigger] error triggering subscription check",e)}n.useShieldAddFundTrigger=()=>{var e;const t=(0,s.c)(8),{subscriptions:n}=(0,f.useUserSubscriptions)(),r=(0,f.useUserSubscriptionByProduct)(o.PRODUCT_TYPES.SHIELD,n);let i;t[0]!==r?(i=r&&(0,l.getIsShieldSubscriptionPaused)(r),t[0]=r,t[1]=i):i=t[1];const c=i,u=null==r?void 0:r.paymentMethod,d=(null==u||null===(e=u.crypto)||void 0===e?void 0:e.error)===o.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,{hasAvailableSelectedToken:p}=g(),h=(0,m.useThrottle)(p,S),{handleTriggerSubscriptionCheck:v}=b();let T,k;t[2]!==v||t[3]!==d||t[4]!==c||t[5]!==h?(T=()=>{c&&d&&h&&v().catch(y)},k=[c,d,h,v],t[2]=v,t[3]=d,t[4]=c,t[5]=h,t[6]=T,t[7]=k):(T=t[6],k=t[7]),(0,a.useEffect)(T,k)}}}},{package:"$root$",file:"ui/hooks/subscription/useAddFundTrigger.ts"}],[7207,{"../../../shared/constants/subscriptions":5809,"../../../shared/lib/shield":5891,"../../helpers/constants/routes":7088,"../../pages/settings/transaction-shield-tab/types":8020,"../../store/actions":8127,"../shield/metrics/useSubscriptionMetrics":7194,"../useAsync":7215,"./useAddFundTrigger":7206,"./useSubscription":7208,"./useSubscriptionPricing":7209,"@metamask/subscription-controller":2932,react:5256,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHandlePayment=void 0;var r=e("react"),s=e("react-router-dom"),a=e("@metamask/subscription-controller"),i=e("../../../shared/lib/shield"),o=e("../shield/metrics/useSubscriptionMetrics"),c=e("../../../shared/constants/subscriptions"),u=e("../../helpers/constants/routes"),l=e("../../pages/settings/transaction-shield-tab/types"),d=e("../useAsync"),p=e("../../store/actions"),m=e("./useSubscriptionPricing"),h=e("./useAddFundTrigger"),f=e("./useSubscription");n.useHandlePayment=({currentShieldSubscription:e,displayedShieldSubscription:t,isCancelled:n,onOpenAddFundsModal:g,subscriptions:b,subscriptionPricing:S})=>{const y=(0,s.useNavigate)(),{captureShieldErrorStateClickedEvent:v}=(0,o.useSubscriptionMetrics)(),T=(0,m.useSubscriptionPaymentMethods)(a.PAYMENT_TYPES.byCrypto,S),k=(0,r.useMemo)(()=>{var e;if(!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;const n=null==T||null===(e=T.chains)||void 0===e?void 0:e.find(e=>e.chainId===t.paymentMethod.crypto.chainId);return null==n?void 0:n.tokens.find(e=>e.symbol===t.paymentMethod.crypto.tokenSymbol)},[T,t]),{hasAvailableSelectedToken:w}=(0,h.useShieldSubscriptionCryptoSufficientBalanceCheck)(),{handleTriggerSubscriptionCheck:_,result:I}=(0,h.useHandleShieldAddFundTrigger)(),[C,E]=(0,f.useUpdateSubscriptionCardPaymentMethod)({subscription:e,newRecurringInterval:null==e?void 0:e.interval}),{handleClickContactSupport:A}=(0,f.useHandleSubscriptionSupportAction)(),M=(0,r.useMemo)(()=>null==t?void 0:t.products.find(e=>e.name===a.PRODUCT_TYPES.SHIELD),[t]),{value:N}=(0,d.useAsyncResult)(async()=>{if(!k||!t||!(0,l.isCryptoPaymentMethod)(t.paymentMethod))return undefined;return await(0,p.getSubscriptionCryptoApprovalAmount)({chainId:t.paymentMethod.crypto.chainId,paymentTokenAddress:k.address,productType:a.PRODUCT_TYPES.SHIELD,interval:t.interval})},[k,t]),P=(0,r.useMemo)(()=>t&&k&&(0,l.isCryptoPaymentMethod)(t.paymentMethod)&&t.endDate&&M&&N?{chainId:t.paymentMethod.crypto.chainId,address:k.address,symbol:k.symbol,approvalAmount:{approveAmount:N.approveAmount,chainId:t.paymentMethod.crypto.chainId,paymentAddress:t.paymentMethod.crypto.payerAddress,paymentTokenAddress:k.address}}:undefined,[M,k,t,N]),{execute:O}=(0,f.useSubscriptionCryptoApprovalTransaction)(P),{execute:R,result:x}=(0,f.useUpdateSubscriptionCryptoPaymentMethod)({subscription:e}),D=(0,r.useMemo)(()=>(0,i.getIsShieldSubscriptionPaused)(b??[]),[b]),B=(0,r.useMemo)(()=>!!e&&(D&&(0,l.isCryptoPaymentMethod)(e.paymentMethod)&&!e.paymentMethod.crypto.error),[e,D]),U=(0,r.useMemo)(()=>!(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))&&e.paymentMethod.crypto.error===a.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_BALANCE,[e]),L=(0,r.useMemo)(()=>{if(!e||!(0,l.isCryptoPaymentMethod)(e.paymentMethod))return!1;const{error:t}=e.paymentMethod.crypto;return t===a.CRYPTO_PAYMENT_METHOD_ERRORS.INSUFFICIENT_ALLOWANCE||t===a.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_TOO_OLD||t===a.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_REVERTED||t===a.CRYPTO_PAYMENT_METHOD_ERRORS.APPROVAL_TRANSACTION_MAX_VERIFICATION_ATTEMPTS_REACHED},[e]);return{handlePaymentError:(0,r.useCallback)(async()=>{if(e&&v({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,errorCause:"payment_error",actionClicked:c.ShieldErrorStateActionClickedEnum.Cta,location:c.ShieldErrorStateLocationEnum.Settings,view:c.ShieldErrorStateViewEnum.Banner}),n)y({pathname:u.SHIELD_PLAN_ROUTE,search:`?source=${c.ShieldMetricsSourceEnum.ShieldSettings}`});else if(B)A();else if(e&&(0,l.isCryptoPaymentMethod)(e.paymentMethod))if(U)g();else{if(!L)throw new Error("Unknown crypto error action");await O()}else await C()},[e,n,B,U,L,g,O,C,A,y,v]),handlePaymentErrorInsufficientFunds:(0,r.useCallback)(async()=>{U&&w&&await _()},[U,w,_]),handlePaymentMethodChange:(0,r.useCallback)(async(e,t)=>{try{if(e===a.PAYMENT_TYPES.byCard)await C();else if(e===a.PAYMENT_TYPES.byCrypto){if(!t)throw new Error("No token selected");R(t)}}catch(e){console.error("Error changing payment method",e)}},[C,R]),isUnexpectedErrorCryptoPayment:B,isInsufficientFundsCrypto:U,isAllowanceNeededCrypto:L,hasAvailableSelectedTokenToTriggerCheckInsufficientFunds:w,resultTriggerSubscriptionCheckInsufficientFunds:I,updateSubscriptionCardPaymentMethodResult:E,updateSubscriptionCryptoPaymentMethodResult:x,currentToken:k}}}}},{package:"$root$",file:"ui/hooks/subscription/useHandlePayment.ts"}],[7208,{"../../../shared/constants/metametrics":5791,"../../../shared/constants/subscriptions":5809,"../../../shared/lib/shield":5891,"../../../shared/lib/ui-utils":5904,"../../../shared/modules/conversion.utils":5913,"../../../shared/modules/selectors/networks":5934,"../../../shared/modules/shield":5941,"../../../shared/modules/string-utils":5945,"../../ducks/metamask/metamask":7067,"../../helpers/constants/routes":7088,"../../helpers/utils/window":7143,"../../pages/confirmations/send-legacy/send.utils":7781,"../../pages/settings/transaction-shield-tab/types":8020,"../../selectors":8094,"../../selectors/identity/authentication":8092,"../../selectors/multichain-accounts/account-tree":8098,"../../selectors/subscription":8123,"../../store/actions":8127,"../shield/metrics/useSubscriptionMetrics":7194,"../useAccountTotalFiatBalance":7212,"../useAsync":7215,"./useSubscriptionPricing":7209,"@metamask/subscription-controller":2932,"@metamask/transaction-controller":2994,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221,"react-router-dom":5231},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserSubscriptions=n.useUserSubscriptionByProduct=n.useUserLastSubscriptionByProduct=n.useUpdateSubscriptionCryptoPaymentMethod=n.useUpdateSubscriptionCardPaymentMethod=n.useUnCancelSubscription=n.useSubscriptionEligibility=n.useSubscriptionCryptoApprovalTransaction=n.useShieldRewards=n.useOpenGetSubscriptionBillingPortal=n.useHandleSubscriptionSupportAction=n.useHandleSubscription=n.useCancelSubscription=void 0;var r,s=e("react-compiler-runtime"),a=e("react-redux"),i=e("react"),o=e("@metamask/subscription-controller"),c=(r=e("loglevel"))&&r.__esModule?r:{default:r},u=e("react-router-dom"),l=e("@metamask/transaction-controller"),d=e("../../selectors/subscription"),p=e("../../store/actions"),m=e("../useAsync"),h=e("../../selectors/identity/authentication"),f=e("../../ducks/metamask/metamask"),g=e("../../../shared/lib/shield"),b=e("../../pages/confirmations/send-legacy/send.utils"),S=e("../../../shared/modules/conversion.utils"),y=e("../../helpers/constants/routes"),v=e("../../selectors/multichain-accounts/account-tree"),T=e("../../selectors"),k=e("../shield/metrics/useSubscriptionMetrics"),w=e("../../../shared/constants/subscriptions"),_=e("../../../shared/modules/shield"),I=e("../../helpers/utils/window"),C=e("../../../shared/lib/ui-utils"),E=e("../../../shared/constants/metametrics"),A=e("../useAccountTotalFiatBalance"),M=e("../../../shared/modules/selectors/networks"),N=e("../../pages/settings/transaction-shield-tab/types"),P=e("../../../shared/modules/string-utils"),O=e("./useSubscriptionPricing");const R=e=>{const t=(0,s.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:r}=n,i=(0,a.useDispatch)(),o=(0,a.useSelector)(d.getUserSubscriptions);let c,u;t[2]!==i||t[3]!==r?(c=async()=>{if(r)return await i((0,p.getSubscriptions)())},u=[r,i],t[2]=i,t[3]=r,t[4]=c,t[5]=u):(c=t[4],u=t[5]);const l=(0,m.useAsyncResult)(c,u);let h;return t[6]!==l.error||t[7]!==l.pending||t[8]!==o?(h={...o,loading:l.pending,error:l.error},t[6]=l.error,t[7]=l.pending,t[8]=o,t[9]=h):h=t[9],h};n.useUserSubscriptions=R;n.useUserSubscriptionByProduct=(e,t)=>{const n=(0,s.c)(3);let r;return n[0]!==e||n[1]!==t?(r=null==t?void 0:t.find(t=>t.products.some(t=>t.name===e)),n[0]=e,n[1]=t,n[2]=r):r=n[2],r};n.useUserLastSubscriptionByProduct=(e,t)=>null!=t&&t.products.some(t=>t.name===e)?t:undefined;n.useCancelSubscription=e=>{const t=(0,s.c)(14),n=(0,a.useDispatch)(),{captureShieldMembershipCancelledEvent:r}=(0,k.useSubscriptionMetrics)();let i;t[0]!==e?(i=e?(0,g.getSubscriptionDurationInDays)(e):0,t[0]=e,t[1]=i):i=t[1];const o=i;let c;t[2]!==r||t[3]!==o||t[4]!==e?(c=(t,n)=>{if(!e)return;const{cryptoPaymentChain:s,cryptoPaymentCurrency:a}=(0,g.getSubscriptionPaymentData)(e);r({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:s,cryptoPaymentCurrency:a,cancellationStatus:t,errorMessage:n,latestSubscriptionDuration:o})},t[2]=r,t[3]=o,t[4]=e,t[5]=c):c=t[5];const u=c;let l,d;return t[6]!==n||t[7]!==e||t[8]!==u?(l=async()=>{try{if(!e)return;const t=e.id;await n((0,p.cancelSubscription)({subscriptionId:t})),u("succeeded")}catch(e){const t=e,n=t instanceof Error?t.message:"Unknown error";throw u("failed",n),t}},t[6]=n,t[7]=e,t[8]=u,t[9]=l):l=t[9],t[10]!==r||t[11]!==n||t[12]!==e?(d=[n,e,r],t[10]=r,t[11]=n,t[12]=e,t[13]=d):d=t[13],(0,m.useAsyncCallback)(l,d)};n.useUnCancelSubscription=e=>{const t=(0,a.useDispatch)(),{captureShieldSubscriptionRestartRequestEvent:n}=(0,k.useSubscriptionMetrics)(),r=(0,i.useCallback)((t,r)=>{if(!e)return;const{cryptoPaymentChain:s,cryptoPaymentCurrency:a}=(0,g.getSubscriptionPaymentData)(e);n({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:s,cryptoPaymentCurrency:a,requestStatus:t,errorMessage:r})},[n,e]);return(0,m.useAsyncCallback)(async()=>{try{const n=null==e?void 0:e.id;if(!n)return;await t((0,p.unCancelSubscription)({subscriptionId:n})),r("completed")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw r("failed",t),e}},[t,e,r])};n.useOpenGetSubscriptionBillingPortal=e=>{const t=(0,s.c)(7),n=(0,a.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:r}=(0,k.useSubscriptionMetrics)();let i;t[0]!==r||t[1]!==e?(i=()=>{if(!e)return;const{cryptoPaymentChain:t,cryptoPaymentCurrency:n}=(0,g.getSubscriptionPaymentData)(e);r({subscriptionStatus:e.status,paymentType:e.paymentMethod.type,billingInterval:e.interval,cryptoPaymentChain:t,cryptoPaymentCurrency:n},E.MetaMetricsEventName.ShieldBillingHistoryOpened)},t[0]=r,t[1]=e,t[2]=i):i=t[2];const o=i;let c,u;return t[3]!==n||t[4]!==o?(c=async()=>{const{url:e}=await n((0,p.getSubscriptionBillingPortalUrl)());return o(),await platform.openTab({url:e})},u=[n,o],t[3]=n,t[4]=o,t[5]=c,t[6]=u):(c=t[5],u=t[6]),(0,m.useAsyncCallback)(c,u)};n.useUpdateSubscriptionCardPaymentMethod=e=>{const t=(0,s.c)(6),{subscription:n,newRecurringInterval:r}=e,i=(0,a.useDispatch)(),{captureCommonExistingShieldSubscriptionEvents:c}=(0,k.useSubscriptionMetrics)();let u,l;return t[0]!==c||t[1]!==i||t[2]!==r||t[3]!==n?(u=async()=>{if(!n||!r)throw new Error("Subscription ID and recurring interval are required");const e=n.id;await i((0,p.updateSubscriptionCardPaymentMethod)({subscriptionId:e,paymentType:o.PAYMENT_TYPES.byCard,recurringInterval:r})),c({subscriptionStatus:n.status,paymentType:n.paymentMethod.type,billingInterval:r},E.MetaMetricsEventName.ShieldPaymentMethodUpdated)},l=[i,n,r,c],t[0]=c,t[1]=i,t[2]=r,t[3]=n,t[4]=u,t[5]=l):(u=t[4],l=t[5]),(0,m.useAsyncCallback)(u,l)};const x=e=>{const t=(0,s.c)(12),n=(0,u.useNavigate)(),{subscriptionPricing:r}=(0,O.useSubscriptionPricing)(),o=(0,a.useSelector)(D),c=(0,a.useSelector)(M.getNetworkConfigurationsByChainId),d=(0,a.useSelector)(T.getUnapprovedConfirmations).length>0,[m,h]=(0,i.useState)(!1);let f,g,v;t[0]!==d||t[1]!==n||t[2]!==m?(f=()=>{d&&m&&n(y.CONFIRM_TRANSACTION_ROUTE)},g=[d,m,n],t[0]=d,t[1]=n,t[2]=m,t[3]=f,t[4]=g):(f=t[3],g=t[4]),(0,i.useEffect)(f,g),t[5]!==(null==o?void 0:o.address)||t[6]!==c||t[7]!==e||t[8]!==r?(v=async()=>{var t,n;if(!r)throw new Error("Subscription pricing not found");if(!e)throw new Error("No token selected");const s=c[e.chainId],a=null==s||null===(t=s.rpcEndpoints[s.defaultRpcEndpointIndex??0])||void 0===t?void 0:t.networkClientId,i=null==r||null===(n=r.paymentMethods)||void 0===n||null===(n=n.find(B))||void 0===n||null===(n=n.chains)||void 0===n||null===(n=n.find(t=>t.chainId===(null==e?void 0:e.chainId)))||void 0===n?void 0:n.paymentAddress,u=(0,b.generateERC20ApprovalData)({spenderAddress:i,amount:(0,S.decimalToHex)(e.approvalAmount.approveAmount)}),d={from:null==o?void 0:o.address,to:e.address,value:"0x0",data:u};d.gas=await(0,p.estimateGas)(d);const m={type:l.TransactionType.shieldSubscriptionApprove,networkClientId:a};await(0,p.addTransaction)(d,m),h(!0)},t[5]=null==o?void 0:o.address,t[6]=c,t[7]=e,t[8]=r,t[9]=v):v=t[9];const k=v;let w;return t[10]!==k?(w={execute:k},t[10]=k,t[11]=w):w=t[11],w};n.useSubscriptionCryptoApprovalTransaction=x;n.useSubscriptionEligibility=e=>{const t=(0,a.useDispatch)(),n=(0,a.useSelector)(h.selectIsSignedIn),r=(0,a.useSelector)(f.getIsUnlocked),s=(0,a.useSelector)(e=>(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")),{totalFiatBalance:o}=(0,A.useAccountTotalFiatBalance)(s,!1,!0);return{getSubscriptionEligibility:(0,i.useCallback)(async()=>{try{if(!n||!r)return undefined;const s=(0,_.getUserBalanceCategory)(Number(o)),a=await t((0,p.getSubscriptions)());if(!(0,g.getIsShieldSubscriptionActive)(a)){return(await t((0,p.getSubscriptionsEligibilities)({balanceCategory:s}))).find(t=>t.product===e)}return undefined}catch(e){return c.default.warn("[useSubscriptionEligibility] error",e),undefined}},[n,r,t,e,o])}};n.useHandleSubscription=e=>{const t=(0,s.c)(39),{selectedPaymentMethod:n,selectedToken:r,selectedPlan:i,defaultOptions:c,isTrialed:l,useTestClock:d,rewardPoints:h}=e,f=d!==undefined&&d,g=(0,a.useDispatch)(),{search:b}=(0,u.useLocation)(),{execute:S}=x(r),{lastSubscription:y}=R(),{captureShieldSubscriptionRequestEvent:v,setShieldSubscriptionMetricsPropsToBackground:I}=(0,k.useSubscriptionMetrics)(),C=(0,a.useSelector)(T.getModalTypeForShieldEntryModal),E=y?w.ShieldSubscriptionRequestSubscriptionStateEnum.Renew:w.ShieldSubscriptionRequestSubscriptionStateEnum.New;let A;t[0]!==b?(A=()=>{const e=(0,_.getShieldMarketingUtmParamsForMetrics)(b),t=(0,_.determineSubscriptionMetricsSourceFromMarketingUtmParams)(e);if(t)return t;switch(new URLSearchParams(b).get("source")){case"homepage":return w.ShieldMetricsSourceEnum.Homepage;case"post_transaction":return w.ShieldMetricsSourceEnum.PostTransaction;case"notification":return w.ShieldMetricsSourceEnum.Notification;case"carousel":return w.ShieldMetricsSourceEnum.Carousel;case"marketing":return w.ShieldMetricsSourceEnum.Marketing;default:return w.ShieldMetricsSourceEnum.Settings}},t[0]=b,t[1]=A):A=t[1];const M=A;let N;t[2]!==v||t[3]!==c||t[4]!==M||t[5]!==g||t[6]!==S||t[7]!==l||t[8]!==E||t[9]!==C||t[10]!==h||t[11]!==b||t[12]!==n||t[13]!==i||t[14]!==(null==r?void 0:r.address)||t[15]!==(null==r?void 0:r.symbol)||t[16]!==I||t[17]!==f?(N=async()=>{await g((0,p.setLastUsedSubscriptionPaymentDetails)(o.PRODUCT_TYPES.SHIELD,{type:n,paymentTokenAddress:null==r?void 0:r.address,paymentTokenSymbol:null==r?void 0:r.symbol,plan:i,useTestClock:f}));const e=(0,_.getShieldMarketingUtmParamsForMetrics)(b);await g((0,p.setDefaultSubscriptionPaymentOptions)(c)),await I({source:M(),marketingUtmParams:e,rewardPoints:h});const t=M(),s={subscriptionState:E,defaultPaymentType:c.defaultPaymentType,defaultPaymentCurrency:c.defaultPaymentCurrency,defaultBillingInterval:c.defaultBillingInterval,defaultPaymentChain:c.defaultPaymentChain,paymentType:n,paymentCurrency:"USD",isTrialSubscription:!l,billingInterval:i,source:t,type:C,marketingUtmParams:e};if(n===o.PAYMENT_TYPES.byCard){v({...s,paymentCurrency:"USD",requestStatus:"started"});try{await g((0,p.startSubscriptionWithCard)({products:[o.PRODUCT_TYPES.SHIELD],isTrialRequested:!l,recurringInterval:i,useTestClock:f}))}catch(e){const t=e;if(!(t instanceof Error&&t.message.toLowerCase().includes(_.SHIELD_ERROR.tabActionFailed.toLowerCase())))throw t;console.error("[useHandleSubscription error]:",t)}}else n===o.PAYMENT_TYPES.byCrypto&&await S()},t[2]=v,t[3]=c,t[4]=M,t[5]=g,t[6]=S,t[7]=l,t[8]=E,t[9]=C,t[10]=h,t[11]=b,t[12]=n,t[13]=i,t[14]=null==r?void 0:r.address,t[15]=null==r?void 0:r.symbol,t[16]=I,t[17]=f,t[18]=N):N=t[18];const P=null==r?void 0:r.address,O=null==r?void 0:r.symbol;let D;t[19]!==v||t[20]!==c||t[21]!==M||t[22]!==g||t[23]!==S||t[24]!==l||t[25]!==E||t[26]!==C||t[27]!==h||t[28]!==b||t[29]!==n||t[30]!==i||t[31]!==I||t[32]!==P||t[33]!==O||t[34]!==f?(D=[g,n,P,O,i,f,b,c,I,M,h,E,l,C,v,S],t[19]=v,t[20]=c,t[21]=M,t[22]=g,t[23]=S,t[24]=l,t[25]=E,t[26]=C,t[27]=h,t[28]=b,t[29]=n,t[30]=i,t[31]=I,t[32]=P,t[33]=O,t[34]=f,t[35]=D):D=t[35];const[B,U]=(0,m.useAsyncCallback)(N,D);let L;return t[36]!==B||t[37]!==U?(L={handleSubscription:B,subscriptionResult:U},t[36]=B,t[37]=U,t[38]=L):L=t[38],L};n.useHandleSubscriptionSupportAction=()=>{var e;const t=(0,s.c)(6),n=(0,a.useSelector)(h.selectSessionData),r=null==n||null===(e=n.profile)||void 0===e?void 0:e.profileId,i=(0,a.useSelector)(T.getMetaMetricsId),{customerId:o}=R();let c;t[0]!==i||t[1]!==r||t[2]!==o?(c=()=>{let e=C.SUPPORT_LINK;const t=new URLSearchParams;t.append("metamask_version","13.15.0"),r&&t.append("metamask_profile_id",r),i&&t.append("metamask_metametrics_id",i),o&&t.append("shield_id",o);const n=t.toString();n&&(e+=`?${n}`),(0,I.openWindow)(e)},t[0]=i,t[1]=r,t[2]=o,t[3]=c):c=t[3];const u=c;let l;return t[4]!==u?(l={handleClickContactSupport:u},t[4]=u,t[5]=l):l=t[5],l};n.useUpdateSubscriptionCryptoPaymentMethod=e=>{const t=(0,s.c)(13),{subscription:n}=e,r=(0,a.useDispatch)(),[c,u]=(0,i.useState)(),{execute:l}=x(c);let d,h;t[0]!==r||t[1]!==l||t[2]!==c||t[3]!==n?(d=async()=>{if(!n)throw new Error("No subscription exist");if(!(0,N.isCryptoPaymentMethod)(n.paymentMethod))throw new Error("Subscription is not a crypto payment method");if(!c)throw new Error("No token selected");await r((0,p.setLastUsedSubscriptionPaymentDetails)(o.PRODUCT_TYPES.SHIELD,{type:o.PAYMENT_TYPES.byCrypto,paymentTokenAddress:c.address,paymentTokenSymbol:c.symbol,plan:n.interval})),await l()},h=[n,l,r,c],t[0]=r,t[1]=l,t[2]=c,t[3]=n,t[4]=d,t[5]=h):(d=t[4],h=t[5]);const[f,g]=(0,m.useAsyncCallback)(d,h),b=null==c?void 0:c.address;let S,y,v;t[6]!==f||t[7]!==b?(S=()=>{b&&f().then(()=>{u(undefined)})},y=[b,f],t[6]=f,t[7]=b,t[8]=S,t[9]=y):(S=t[8],y=t[9]),(0,i.useEffect)(S,y),t[10]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{if(!e)throw new Error("No token selected");u(e)},t[10]=v):v=t[10];const T=v;let k;return t[11]!==g?(k={execute:T,result:g},t[11]=g,t[12]=k):k=t[12],k};function D(e){return(0,v.getInternalAccountBySelectedAccountGroupAndCaip)(e,"eip155:1")}function B(e){return e.type===o.PAYMENT_TYPES.byCrypto}n.useShieldRewards=()=>{const e=(0,s.c)(24),t=(0,a.useDispatch)(),[n]=(0,a.useSelector)(T.getMetaMaskHdKeyrings),r=(0,a.useSelector)(T.getUpdatedAndSortedAccountsWithCaipAccountId);let i;e:{if(!n){i=null;break e}let t;if(e[0]!==r||e[1]!==n){let s;e[3]!==n?(s=e=>{var t;const r=null===(t=e.options)||void 0===t?void 0:t.entropySource;return"string"==typeof r&&(0,P.isEqualCaseInsensitive)(r,n.metadata.id)},e[3]=n,e[4]=s):s=e[4],t=r.find(s),e[0]=r,e[1]=n,e[2]=t}else t=e[2];t?i=t.caipAccountId:i=null}const o=i;let c,u;e[5]!==o||e[6]!==t?(c=async()=>{if(!o)return!1;return await t((0,p.getRewardsHasAccountOptedIn)(o))},e[5]=o,e[6]=t,e[7]=c):c=e[7],e[8]!==o?(u=[o],e[8]=o,e[9]=u):u=e[9];const{value:l,pending:d,error:h}=(0,m.useAsyncResult)(c,u);let f,g;e[10]!==o||e[11]!==t?(f=async()=>{if(!o)return{monthly:null,yearly:null};const[e,n]=await Promise.all([t((0,p.estimateRewardsPoints)({activityType:"SHIELD",account:o,activityContext:{shieldContext:{recurringInterval:"month"}}})),t((0,p.estimateRewardsPoints)({activityType:"SHIELD",account:o,activityContext:{shieldContext:{recurringInterval:"year"}}}))]);return{monthly:(null==e?void 0:e.pointsEstimate)??null,yearly:(null==n?void 0:n.pointsEstimate)??null}},g=[t,o],e[10]=o,e[11]=t,e[12]=f,e[13]=g):(f=e[12],g=e[13]);const{value:b,pending:S,error:y}=(0,m.useAsyncResult)(f,g);let v,k;e[14]!==t?(v=async()=>{const e=await t((0,p.getRewardsSeasonMetadata)("current"));if(!e)return!1;const n=Date.now();return n>=e.startDate&&n<=e.endDate},k=[t],e[14]=t,e[15]=v,e[16]=k):(v=e[15],k=e[16]);const{value:w,pending:_,error:I}=(0,m.useAsyncResult)(v,k);if(y||I||h){let t;return y&&console.error("[useShieldRewards error]:",y),I&&console.error("[useShieldRewards error]:",I),h&&console.error("[useShieldRewards error]:",h),e[17]===Symbol.for("react.memo_cache_sentinel")?(t={pending:!1,pointsMonthly:null,pointsYearly:null,isRewardsSeason:!1,hasAccountOptedIn:!1},e[17]=t):t=e[17],t}const C=S||_||d,E=(null==b?void 0:b.monthly)??null,A=(null==b?void 0:b.yearly)??null,M=w??!1,N=l??!1;let O;return e[18]!==M||e[19]!==N||e[20]!==C||e[21]!==E||e[22]!==A?(O={pending:C,pointsMonthly:E,pointsYearly:A,isRewardsSeason:M,hasAccountOptedIn:N},e[18]=M,e[19]=N,e[20]=C,e[21]=E,e[22]=A,e[23]=O):O=e[23],O}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscription.ts"}],[7209,{"../../../shared/constants/transaction":5814,"../../selectors/assets":8086,"../../selectors/multichain-accounts/account-tree":8098,"../../selectors/subscription":8123,"../../store/actions":8127,"../useAsync":7215,"../useTokenBalances":7267,"bignumber.js":3972,loglevel:4846,react:5256,"react-compiler-runtime":5170,"react-redux":5221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSubscriptionProductPlans=n.useSubscriptionPricing=n.useSubscriptionPaymentMethods=n.useAvailableTokenBalances=void 0;var r,s=e("react-compiler-runtime"),a=(e("react"),e("react-redux")),i=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("bignumber.js"),c=e("../../selectors/subscription"),u=e("../../store/actions"),l=e("../../selectors/assets"),d=e("../useTokenBalances"),p=e("../../../shared/constants/transaction"),m=e("../useAsync"),h=e("../../selectors/multichain-accounts/account-tree");n.useAvailableTokenBalances=e=>{const t=(0,s.c)(27),{paymentChains:n,price:r,productType:c}=e;let S;t[0]!==n?(S=null==n?void 0:n.map(f),t[0]=n,t[1]=S):S=t[1];const y=S;let v;t[2]!==n?(v=null==n?void 0:n.reduce(g,{}),t[2]=n,t[3]=v):v=t[3];const T=v,k=(0,a.useSelector)(h.getSelectedAccountGroup),[w]=(0,a.useSelector)(b),_=(null==w?void 0:w.id)??k;let I;t[4]!==_?(I=e=>(0,h.getInternalAccountByGroupAndCaip)(e,_,"eip155:1"),t[4]=_,t[5]=I):I=t[5];const C=(0,a.useSelector)(I);let E;t[6]!==(null==C?void 0:C.address)?(E=e=>(0,l.getTokenBalancesEvm)(e,null==C?void 0:C.address),t[6]=null==C?void 0:C.address,t[7]=E):E=t[7];const A=(0,a.useSelector)(E);let M,N;if(t[8]!==y?(M={chainIds:y},t[8]=y,t[9]=M):M=t[9],(0,d.useTokenBalances)(M),t[10]!==A||t[11]!==T){let e;t[13]!==T?(e=e=>{const t=null==T?void 0:T[e.chainId];if(!Boolean(t))return!1;if(!(null==t?void 0:t.some(t=>t.address.toLowerCase()===e.address.toLowerCase())))return!1;return!!(e.balance&&parseFloat(e.balance)>0)},t[13]=T,t[14]=e):e=t[14],N=A.filter(e),t[10]=A,t[11]=T,t[12]=N}else N=t[12];const P=N;let O,R;t[15]!==T||t[16]!==r||t[17]!==c||t[18]!==P?(O=async()=>{if(!r||!T)return[];const e=[];return(await Promise.all(P.map(e=>{var t;return(null==T||null===(t=T[e.chainId])||void 0===t?void 0:t.find(t=>t.address.toLowerCase()===e.address.toLowerCase()))?(0,u.getSubscriptionCryptoApprovalAmount)({chainId:e.chainId,paymentTokenAddress:e.address,productType:c,interval:r.interval}):(i.default.error("[useAvailableTokenBalances] tokenPaymentInfo not found",e),null)}))).forEach((t,n)=>{const s=P[n];if(!s.balance)return;const a=new o.BigNumber(s.balance),i=r.minBillingCyclesForBalance??1,c=new o.BigNumber(r.unitAmount).div(new o.BigNumber(10).pow(r.unitDecimals)).mul(i);t&&a.gte(c)&&e.push({...s,approvalAmount:{approveAmount:t.approveAmount,chainId:s.chainId,paymentAddress:t.paymentAddress,paymentTokenAddress:t.paymentTokenAddress},type:s.isNative?p.AssetType.native:p.AssetType.token})}),e},R=[r,c,T,P],t[15]=T,t[16]=r,t[17]=c,t[18]=P,t[19]=O,t[20]=R):(O=t[19],R=t[20]);const{value:x,pending:D,error:B}=(0,m.useAsyncResult)(O,R);let U,L;return t[21]!==x?(U=x??[],t[21]=x,t[22]=U):U=t[22],t[23]!==B||t[24]!==D||t[25]!==U?(L={availableTokenBalances:U,pending:D,error:B},t[23]=B,t[24]=D,t[25]=U,t[26]=L):L=t[26],L};n.useSubscriptionPricing=e=>{const t=(0,s.c)(10);let n;t[0]!==e?(n=e===undefined?{refetch:!1}:e,t[0]=e,t[1]=n):n=t[1];const{refetch:r}=n,i=(0,a.useDispatch)(),o=(0,a.useSelector)(c.getSubscriptionPricing);let l,d;t[2]!==i||t[3]!==r?(l=async()=>{if(r)return await i((0,u.getSubscriptionPricing)())},d=[i,r],t[2]=i,t[3]=r,t[4]=l,t[5]=d):(l=t[4],d=t[5]);const{pending:p,error:h}=(0,m.useAsyncResult)(l,d);let f;return t[6]!==h||t[7]!==p||t[8]!==o?(f={subscriptionPricing:o,loading:p,error:h},t[6]=h,t[7]=p,t[8]=o,t[9]=f):f=t[9],f};n.useSubscriptionProductPlans=(e,t)=>{const n=(0,s.c)(3);let r;var a;n[0]!==(null==t?void 0:t.products)||n[1]!==e?(r=null==t||null===(a=t.products.find(t=>t.name===e))||void 0===a?void 0:a.prices,n[0]=null==t?void 0:t.products,n[1]=e,n[2]=r):r=n[2];return r};function f(e){return e.chainId}function g(e,t){return e[t.chainId]=t.tokens,e}function b(e){return(0,h.getAccountGroupsByAddress)(e,[""])}n.useSubscriptionPaymentMethods=(e,t)=>{const n=(0,s.c)(3);let r;return n[0]!==e||n[1]!==(null==t?void 0:t.paymentMethods)?(r=null==t?void 0:t.paymentMethods.find(t=>t.type===e),n[0]=e,n[1]=null==t?void 0:t.paymentMethods,n[2]=r):r=n[2],r}}}},{package:"$root$",file:"ui/hooks/subscription/useSubscriptionPricing.ts"}]],[],{});