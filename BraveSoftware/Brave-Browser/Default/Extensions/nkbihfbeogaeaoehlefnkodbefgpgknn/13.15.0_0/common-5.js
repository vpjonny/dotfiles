LavaPack.loadBundle([[2959,{"./authenticateRequest.cjs":2947,"./commitRequest.cjs":2948,"./constants.cjs":2949,"./errors.cjs":2950,"./getPubKeyRequest.cjs":2951,"./keyDerivation.cjs":2953,"./metadata.cjs":2954,"./oprf.cjs":2955,"./resetRateLimits.cjs":2956,"./storeSharesRequest.cjs":2957,"./toprfEvalRequest.cjs":2958,"./utils.cjs":2960,"@metamask/auth-network-utils":2965,"@noble/ciphers/utils":3146,"@noble/curves/abstract/utils":3154,"@noble/curves/secp256k1":3157,"@noble/hashes/utils":3172,"@toruslabs/fetch-node-details":3219,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,i,a,o,c,u,l,d,f,h,p,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ToprfSecureBackup=void 0;const b=e("@metamask/auth-network-utils"),y=e("@noble/ciphers/utils"),w=e("@noble/curves/abstract/utils"),E=e("@noble/curves/secp256k1"),v=e("@noble/hashes/utils"),T=e("@toruslabs/fetch-node-details"),x=e("./authenticateRequest.cjs"),S=e("./commitRequest.cjs"),P=e("./constants.cjs"),k=e("./errors.cjs"),I=e("./getPubKeyRequest.cjs"),A=e("./keyDerivation.cjs"),_=e("./metadata.cjs"),C=e("./oprf.cjs"),j=e("./resetRateLimits.cjs"),B=e("./storeSharesRequest.cjs"),F=e("./toprfEvalRequest.cjs"),O=e("./utils.cjs");class R{constructor(e){r.add(this),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),m(this,i,new T.NodeDetailManager({network:e.network}),"f"),m(this,a,e.nodeDetailsOverride,"f"),m(this,o,e.keyDeriver,"f"),m(this,c,e.fetchMetadataAccessCreds,"f")}async authenticate(e){const{nodeEndpoints:n,nodeEndpointsMap:s}=await g(this,r,"m",l).call(this);let i=E.secp256k1.utils.randomPrivateKey();try{const r=E.secp256k1.ProjectivePoint.fromPrivateKey(i),a=r.x.toString(16),o=r.y.toString(16);let c;e.groupedAuthConnectionId&&(c=(0,b.remove0x)((0,b.keccak256AndHexify)(t.from(e.idTokens[0],"utf8"))));const u=await(0,S.commitIdToken)({idToken:c??e.idTokens[0],authConnectionId:e.groupedAuthConnectionId??e.authConnectionId,sessionPubKeyX:a,sessionPubKeyY:o,endpoints:n}),l=u.reduce((e,t)=>(e[t.nodeIndex]=s[t.nodeIndex],e),{}),{authTokensData:d,isNewUser:f}=await(0,x.authenticateUser)({idToken:e.idTokens[0],authConnectionId:e.authConnectionId,userId:e.userId,sessionPrivateKey:i,nodeEndpointsMap:l,commitmentSignatures:u,groupedAuthConnectionId:e.groupedAuthConnectionId,hashedIdToken:c});return{nodeAuthTokens:d.map(e=>({authToken:e.authToken,nodeIndex:e.nodeIndex,nodePubKey:e.nodePubKey})),isNewUser:f}}finally{i.fill(0),i=null}}async createLocalKey(e){const{password:t,oprfKey:n=(0,C.generateRandomScalar)()}=e;let r=null;try{r=(0,w.utf8ToBytes)(t);const e=await C.OPRF.localEval(n,r,g(this,o,"f")),s=(0,A.deriveAuthenticationKeyPair)(e),i=(0,A.deriveEncryptionKey)(e);return{oprfKey:n,seed:e,authKeyPair:s,encKey:i,pwEncKey:(0,A.derivePwEncKey)(e)}}finally{r&&(r.fill(0),r=null)}}async persistLocalKey(e){const{nodeAuthTokens:t,oprfKey:n,authPubKey:s,authConnectionId:i,groupedAuthConnectionId:a,userId:o,keyShareIndex:c=P.FIRST_KEY_INDEX,oldAuthKeyPair:u}=e,{nodeEndpointsMap:d}=await g(this,r,"m",l).call(this),f=t.reduce((e,t)=>(e[t.nodeIndex]=d[t.nodeIndex],e),{});u?await(0,B.changeKeyShares)({nodeEndpointsMap:f,authConnectionId:i,groupedAuthConnectionId:a,userId:o,authTokens:t,keyShareIndex:c,newOprfKey:n,newAuthPubKey:s,oldAuthPrivKey:u.sk}):await(0,B.storeKeyShares)({nodeEndpointsMap:f,authConnectionId:i,groupedAuthConnectionId:a,userId:o,authTokens:t,keyShareIndex:c,oprfKey:n,authPubKey:s})}async createAndPersistEncKey(e){const{nodeAuthTokens:t,password:n,authConnectionId:r,userId:s}=e,{oprfKey:i,authKeyPair:a,encKey:o,pwEncKey:c}=await this.createLocalKey({password:n});return await this.persistLocalKey({nodeAuthTokens:t,oprfKey:i,authPubKey:a.pk,authConnectionId:r,userId:s}),{authKeyPair:{sk:a.sk,pk:a.pk},encKey:o,pwEncKey:c}}async recoverEncKey(e){const{nodeAuthTokens:t,password:n,authConnectionId:s,groupedAuthConnectionId:i,userId:a}=e;let c=null,u=null;try{const{nodeEndpointsMap:e}=await g(this,r,"m",l).call(this);c=(0,w.utf8ToBytes)(n);const{seed:d,keyShareIndex:f}=await(0,F.recoverTOPRFSeed)({authTokens:t,nodeEndpointsMap:e,authConnectionId:s,groupedAuthConnectionId:i,userId:a,userInput:c,keyDeriver:g(this,o,"f")});u=d;const h=(0,A.deriveAuthenticationKeyPair)(u),p=(0,A.deriveEncryptionKey)(u),m=(0,A.derivePwEncKey)(u),b=new Promise((n,r)=>{(0,j.resetRateLimits)({authTokens:t,nodeEndpointsMap:e,authConnectionId:s,groupedAuthConnectionId:i,userId:a,authPrivKey:h.sk}).then(()=>n()).catch(e=>{r(e)})});return{authKeyPair:h,encKey:p,pwEncKey:m,keyShareIndex:f,rateLimitResetResult:b}}finally{c&&(c.fill(0),c=null),u&&(u.fill(0),u=null)}}async changeEncKey(e){const{nodeAuthTokens:t,authConnectionId:n,groupedAuthConnectionId:s,userId:i,oldEncKey:a,oldPwEncKey:o,oldAuthKeyPair:c,newPassword:u,newKeyShareIndex:l,pregeneratedOprfKey:f}=e;if(!f&&!u)throw new Error("Either newPassword or pregeneratedOprfKey is required");if(f&&u)throw new Error("Only one of newPassword or pregeneratedOprfKey is allowed");const{oprfKey:h,authKeyPair:p,encKey:m,pwEncKey:b}=u?await this.createLocalKey({password:u}):f;let y,w,E;try{y=await g(this,r,"m",d).call(this),[w,E]=await Promise.all([y.acquireMetadataLock(c),y.acquireMetadataLock(p)]);const e=(await y.fetchAllSecretDataItems(a,c)).map(e=>({data:e.data}));if(!e||0===e.length)throw new Error("No existing data found to change key");const u=[{data:L("",o,c),itemId:P.PW_BACKUP_ITEM_ID},...e],f=[b,...e.map(()=>m)];return await y.batchAddSecretData({secretData:u,encKey:f,authKeyPair:p}),await this.persistLocalKey({nodeAuthTokens:t,oprfKey:h,authPubKey:p.pk,authConnectionId:n,groupedAuthConnectionId:s,userId:i,keyShareIndex:l,oldAuthKeyPair:c}),{authKeyPair:p,encKey:m,pwEncKey:b}}finally{if(y&&w&&E)try{await Promise.all([y.releaseMetadataLock(c,w),y.releaseMetadataLock(p,E)])}catch(e){console.error("Failed to release metadata lock:",e)}}}async addSecretDataItem(e){const t=await g(this,r,"m",d).call(this);await t.addSecretDataItem({...e,secretData:{data:e.secretData}})}async batchAddSecretDataItems(e){const t=await g(this,r,"m",d).call(this);let n;try{n=await t.acquireMetadataLock(e.authKeyPair),await t.batchAddSecretData({...e,secretData:e.secretData.map(e=>({data:e}))})}finally{if(n)try{await t.releaseMetadataLock(e.authKeyPair,n)}catch(e){console.error("Failed to release metadata lock:",e)}}}async fetchAllSecretDataItems(e){const t=await g(this,r,"m",d).call(this);return(await t.fetchAllSecretDataItems(e.decKey,e.authKeyPair)).map(e=>e.data)}async fetchAuthPubKey(e){const{nodeAuthTokens:t,authConnectionId:n,userId:s,groupedAuthConnectionId:i}=e,{nodeEndpointsMap:a}=await g(this,r,"m",l).call(this);return(0,I.getPubKey)({authTokens:t,nodeEndpointsMap:a,authConnectionId:n,userId:s,groupedAuthConnectionId:i})}async recoverPwEncKey(e){const{targetAuthPubKey:t,curPwEncKey:n,curAuthKeyPair:s,maxPwChainLength:i=P.MAX_PASSWORD_CHAIN_LENGTH}=e;let a={password:"",encKey:n,authKeyPair:s};for(let e=0;e<i;e++)try{if(a=await g(this,r,"m",h).call(this,{encKey:a.encKey,authKeyPair:a.authKeyPair}),(0,y.equalBytes)(a.authKeyPair.pk,t))return{pwEncKey:a.encKey}}catch(e){throw k.TOPRFError.couldNotFetchPassword(e.message)}throw k.TOPRFError.maxKeyChainLengthExceeded()}async getNodeDetails(){return g(this,r,"m",l).call(this)}}function L(e,t,n){return(0,w.utf8ToBytes)(JSON.stringify({pw:e,encKey:(0,v.bytesToHex)(t),authKeyPair:{sk:n.sk.toString(),pk:(0,v.bytesToHex)(n.pk)}}))}n.ToprfSecureBackup=R,s=R,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,r=new WeakSet,l=async function(){let e=g(this,a,"f")?.indexes,t=g(this,a,"f")?.pubKeys,n=g(this,a,"f")?.endpoints;if(e&&t&&Array.isArray(n))return g(s,s,"m",p).call(s,e,t,n),{nodeEndpoints:n,nodeEndpointsMap:(0,O.createNodeEndpointsMap)(n,e),nodeIndexes:e,nodePubkeys:t};const{torusNodeSSSEndpoints:r,torusIndexes:o,torusNodePub:c}=await g(this,i,"f").getNodeDetails({verifier:"auth-connection-id",verifierId:"user-id"});if(e??(e=o),t??(t=c),!Array.isArray(n)){if(!r){throw new Error("Failed to get node details")}n=n?r.map(e=>{const t=new URL(e);return t.pathname=n,t.href}):r}return g(s,s,"m",p).call(s,e,t,n),{nodeEndpoints:n,nodeEndpointsMap:(0,O.createNodeEndpointsMap)(n,e),nodeIndexes:e,nodePubkeys:t}},d=async function(){if(g(this,u,"f"))return g(this,u,"f");const{nodeEndpointsMap:e}=await g(this,r,"m",l).call(this),t=(await g(this,r,"m",f).call(this,e))[1],n=new _.MetadataStore({metadataEndpoint:t,fetchMetadataAccessCreds:g(this,c,"f")});return m(this,u,n,"f"),n},f=async function(e){const t={};return Object.entries(e).forEach(([e,n])=>{const r=new URL(n);t[e]=`${r.origin}/metadata`}),t},h=async function(e){const t=await g(this,r,"m",d).call(this),n=await t.fetchAllSecretDataItems(e.encKey,e.authKeyPair,P.PW_BACKUP_ITEM_ID);if(0===n.length)throw new Error("Failed to get previous password and keys");const s=function(e){const t=JSON.parse((0,y.bytesToUtf8)(e));return{pw:t.pw,encKey:(0,v.hexToBytes)(t.encKey),authKeyPair:{sk:BigInt(t.authKeyPair.sk),pk:(0,v.hexToBytes)(t.authKeyPair.pk)}}}(n[0].data);return{password:s.pw,encKey:s.encKey,authKeyPair:s.authKeyPair}},p=function(e,t,n){if(e.length!==t.length||e.length!==n.length){throw new Error("Node details arrays (indexes, pubKeys, endpoints) must have equal lengths")}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/toprfSecureBackup.cjs"}],[2960,{"./constants.cjs":2949,"./errors.cjs":2950,"@metamask/auth-network-utils":2965,"@noble/curves/secp256k1":3157,"@noble/hashes/sha3":3170,"@toruslabs/eccrypto":3218,"@toruslabs/http-helpers":2970,"bn.js":4023,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.preserveKeyOrder=n.getTOPRFError=n.parseJsonRpcError=n.mergeEndpointsWithAuthTokens=n.checkAuthTokenErrors=n.checkRateLimitErrors=n.extractRateLimitErrorFromResults=n.getMaxRateLimitError=n.createNodeEndpointsMap=n.generateShareImportItems=n.createKeyChangeShareImportItems=n.createNewUserShareImportItems=n.createKeyChangeProof=n.createEthereumSignature=n.prepareNodeShares=n.decryptAuthToken=n.postJRPCRequest=n.bigIntToBN=void 0;const s=e("@metamask/auth-network-utils"),i=e("@noble/curves/secp256k1"),a=e("@noble/hashes/sha3"),o=e("@toruslabs/eccrypto"),c=e("@toruslabs/http-helpers"),u=r(e("bn.js")),l=e("./constants.cjs"),d=e("./errors.cjs");n.bigIntToBN=e=>new u.default(e.toString());n.postJRPCRequest=async(e,t)=>{const n={...t};return n.params=(0,s.toSnakeCaseKeys)(t.params),(0,c.post)(e,n,{},{logTracingHeader:!1}).then(e=>(e.result&&(e.result=(0,s.toCamelCaseKeys)(e.result)),e)).catch(e=>({id:t.id,jsonrpc:"2.0",error:{code:-32e3,message:"Internal error",data:e}}))};n.decryptAuthToken=async(e,n)=>{const r=JSON.parse(e),i=(0,s.encParamsHexToBuf)(r.metadata),a=await(0,o.decrypt)(t.from(n),{...i,ciphertext:t.from(r.data,"hex")});return t.from(a).toString("base64")};const f=async(e,n)=>{const r=await(0,o.encrypt)(n,e,{padding:!0}),i=(0,s.encryptedParamsBufToHex)(r);return{data:t.from(r.ciphertext).toString("hex"),metadata:{...i}}};n.prepareNodeShares=(e,t)=>{const r=(0,n.bigIntToBN)(t),i=(0,s.getSecp256K1Curve)(),a=Object.keys(e).map(e=>parseInt(e,10)),o=((e,t,n,r)=>{const i=t.map(e=>new u.default(e)),a=r-1;return(0,s.generateRandomPolynomial)(e,a,n).generateShares(i)})(i,a,r,l.GENERATE_SHARE_THRESHOLD);return{shares:o,nodeIndexes:a}};n.createEthereumSignature=(e,t)=>{const n=t.toString(16).padStart(64,"0"),r=i.secp256k1.sign(e,n);return r.toCompactHex()+(r.recovery+27).toString(16).padStart(2,"0")};n.createKeyChangeProof=(e,r,i,o)=>{const c=Math.floor(Date.now()/1e3),u=(e=>e.toArrayLike(t,"be",32).toString("base64"))(e),l=(0,s.toSnakeCaseKeys)({shareData:u,keyShareIndex:r,nodeIndex:i,timestamp:c}),d=JSON.stringify(l),f=(0,a.keccak_256)(d);return{oldKeySignature:(0,n.createEthereumSignature)(f,o),signatureTimestamp:c}};n.createNewUserShareImportItems=async(e,n,r,s)=>Promise.all(r.map(async r=>{const{nodePubKey:i,nodeIndex:a,authToken:o}=r,c=new u.default(a).toString("hex",64),l=e[c].toJSON(),d=await f(t.from(l.share,"hex"),t.from(i,"hex")),h=await f(t.from(o,"base64"),t.from(i,"hex"));return{encryptedShare:JSON.stringify(d),encryptedAuthToken:JSON.stringify(h),keyShareIndex:s,nodeIndex:a,sssEndpoint:n[a]}}));n.createKeyChangeShareImportItems=async(e,r,s,i,a)=>Promise.all(s.map(async s=>{const{nodePubKey:o,nodeIndex:c,authToken:l}=s,d=new u.default(c).toString("hex",64),h=e[d].toJSON(),p=new u.default(h.share,16),m=(0,n.createKeyChangeProof)(p,i,c,a),g=await f(t.from(h.share,"hex"),t.from(o,"hex")),b=await f(t.from(l,"base64"),t.from(o,"hex"));return{encryptedShare:JSON.stringify(g),encryptedAuthToken:JSON.stringify(b),keyShareIndex:i,nodeIndex:c,sssEndpoint:r[c],...m}}));n.generateShareImportItems=async(e,t,r,s,...i)=>{const{shares:a}=(0,n.prepareNodeShares)(e,r),o=i[0];return o!==undefined?(0,n.createKeyChangeShareImportItems)(a,e,t,s,o):(0,n.createNewUserShareImportItems)(a,e,t,s)};function h(e,t){return e.remainingTime>t.remainingTime?e:t}function p(e){if(!(0,s.isJSONRPCError)(e)||-32602!==e.code||"Rate limit exceeded"!==e.message||!e.data)return undefined;const t=(0,s.toCamelCaseKeys)(e.data);return"string"!=typeof t?.message||"number"!=typeof t?.remainingTime||"number"!=typeof t?.lockTime||"number"!=typeof t?.guessCount?undefined:{message:t.message,remainingTime:t.remainingTime,lockTime:t.lockTime,guessCount:t.guessCount}}function m(e){if(e.code===l.JsonRpcErrorCodes.ErrorCodeInvalidParams){if(e.message.toLowerCase().includes("auth token expired"))return d.TOPRFError.authTokenExpired();if(e.message.toLowerCase().includes("invalid auth token"))return d.TOPRFError.invalidAuthToken();let t=e.message;if("string"==typeof e.data)t=e.data;else if(e.data){const n=(0,s.toCamelCaseKeys)(e.data);t=JSON.stringify(n)}return d.TOPRFError.jsonRpcError(t)}if(e.code===l.JsonRpcErrorCodes.ErrorCodeInternal){const t=e.data??e.message;return d.TOPRFError.jsonRpcError(t)}return d.TOPRFError.default(e.message)}n.createNodeEndpointsMap=(e,t)=>t.reduce((t,n)=>(t[n]=e[n-1],t),{}),n.getMaxRateLimitError=h,n.extractRateLimitErrorFromResults=function(e){let t;for(const n of e)if(n.result?.lockTimeSeconds&&n.result.lockTimeSeconds>0&&n.result.guessCount){const e={remainingTime:n.result.lockTimeSeconds,message:"Rate limit exceeded",lockTime:n.result.lockTimeSeconds,guessCount:n.result.guessCount};t=t?h(t,e):e}return t},n.checkRateLimitErrors=function(e){const t=(0,s.filterErrorResponses)(e);let n;for(const e of t){const t=p(e.error);t&&(n=n?h(n,t):t)}return n},n.checkAuthTokenErrors=function(e){const t=(0,s.filterErrorResponses)(e);for(const e of t)if((0,s.isJSONRPCError)(e.error)){const t=m(e.error);if(t.code===d.TOPRFErrorCode.AuthTokenExpired||t.code===d.TOPRFErrorCode.InvalidAuthToken)return t}return undefined},n.mergeEndpointsWithAuthTokens=function(e,t){return e.map(e=>{const n=t[e.nodeIndex];if(!n)throw d.TOPRFError.endpointNotFound(`Endpoint not found for node index ${e.nodeIndex}`);return{endpoint:n,authToken:e}})},n.parseJsonRpcError=m,n.getTOPRFError=function(e){return e instanceof s.SomeError&&e.predicate&&e.predicate instanceof d.TOPRFError?e.predicate:e},n.preserveKeyOrder=function(e,t){return 0}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup",file:"node_modules/@metamask/toprf-secure-backup/dist/utils.cjs"}],[2961,{"./errors.cjs":2963,"@noble/hashes/sha3":3170,"bn.js":4023,buffer:4084,"json-stable-stringify-without-jsonify":4655},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.toSnakeCaseKeys=n.toCamelCaseKeys=n.convertKeys=n.toSnake=n.toCamel=n.isJSONRPCError=n.filterErrorResponses=n.filterCompletedRequests=n.Some=n.getProxyCoordinatorNodeIndex=n.kCombinations=n.thresholdSame=n.safeStringify=n.add0x=n.remove0x=n.keccak256AndHexify=void 0;const s=e("@noble/hashes/sha3"),i=r(e("bn.js")),a=r(e("json-stable-stringify-without-jsonify")),o=e("./errors.cjs");function c(e){return`0x${t.from((0,s.keccak_256)(e)).toString("hex")}`}n.keccak256AndHexify=c,n.remove0x=function(e){return e.startsWith("0x")?e.slice(2):e},n.add0x=function(e){return e.startsWith("0x")?e:`0x${e}`},n.safeStringify=function(e,t){const n=(0,a.default)(e,t);if(!n)throw new Error("Failed to stringify");return n},n.thresholdSame=function(e,t){const n={};for(const r of e){const e=(0,a.default)(r);if(e&&(n[e]=n[e]?n[e]+1:1,n[e]===t))return r}return undefined},n.kCombinations=function*e(t,n){let r=t;if("number"==typeof r&&(r=Array.from({length:r},(e,t)=>t)),n>r.length||n<=0)return;if(n===r.length)return void(yield r);if(1===n){for(const e of r)yield[e];return}const s=Array.from({length:r.length-n+2},(e,t)=>t);for(const t of s)for(const s of e(r.slice(t+1),n-1))yield[r[t],...s]};function u(e){return e.replace(/_([a-z])/gu,(e,t)=>t.toUpperCase())}function l(e){return e.replace(/([A-Z])/gu,"_$1").toLowerCase()}function d(e,t){if(Array.isArray(e))return e.map(e=>d(e,t));if(null!==e&&"object"==typeof e){const n={};for(const[r,s]of Object.entries(e))n[t(r)]=d(s,t);return n}return e}n.getProxyCoordinatorNodeIndex=(e,n,r)=>{const s=`${n}${r}`,a=c(t.from(s,"utf8")).slice(2);return e[new i.default(a,"hex").mod(new i.default(e.length)).toNumber()]},n.Some=async function(e,t){let n;const r=new Array(e.length).fill(undefined),s=new Array(e.length).fill(undefined);for(const[i,a]of e.entries()){let e;try{const t=new Promise((t,n)=>{e=setTimeout(()=>n(new Error("Promise timed out")),1e4)});r[i]=await Promise.race([a,t])}catch(e){s[i]=e}finally{e&&clearTimeout(e)}try{const e=r.every(e=>e!==undefined),n=await t(r,{allSettled:e});if(n)return n}catch(e){n=e}}!function(e,t,n){let r=e.some(e=>e!==undefined);if(r)throw new o.SomeError({errors:e,responses:t,predicate:n});if(r=t.some(e=>Boolean(e?.error)),r){const e=t.map(e=>{const{error:t}=e;return t?.data&&t.data.length>0?new Error(t.data):undefined});throw new o.SomeError({errors:e,responses:t,predicate:n})}throw new o.SomeError({errors:e,responses:t,predicate:n})}(s,r,n)},n.filterCompletedRequests=function(e){return e.filter(e=>{const t=e&&"object"==typeof e,n=e,r=!n?.error,s=Boolean(n?.result);return t&&r&&s})},n.filterErrorResponses=function(e){return e.filter(e=>{const t=e&&"object"==typeof e,n=e,r=Boolean(n?.error);return t&&r})},n.isJSONRPCError=function(e){const t=e;return Boolean(e&&"object"==typeof e)&&"number"==typeof t?.code&&"string"==typeof t?.message},n.toCamel=u,n.toSnake=l,n.convertKeys=d;n.toCamelCaseKeys=e=>d(e,u);n.toSnakeCaseKeys=e=>d(e,l)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/common.cjs"}],[2962,{"./common.cjs":2961,buffer:4084,elliptic:4257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.uint8ArrayToHex=n.derivePubKey=n.toChecksumAddress=n.encParamsHexToBuf=n.encryptedParamsBufToHex=n.generatePrivateKey=n.getSecp256K1Curve=void 0;const r=e("elliptic"),s=e("./common.cjs");let i=null;n.getSecp256K1Curve=function(){return i=i??new r.ec("secp256k1"),i},n.generatePrivateKey=function(e){return e.genKeyPair().getPrivate()},n.encryptedParamsBufToHex=function(e){return{iv:t.from(e.iv).toString("hex"),ephemPublicKey:t.from(e.ephemPublicKey).toString("hex"),mac:t.from(e.mac).toString("hex"),mode:"AES256"}},n.encParamsHexToBuf=function(e){return{iv:t.from(e.iv,"hex"),ephemPublicKey:t.from(e.ephemPublicKey,"hex"),mac:t.from(e.mac,"hex")}},n.toChecksumAddress=function(e){const n=(r=e,r.startsWith("0x")||r.startsWith("0X")?r.slice(2):r).toLowerCase();var r;const i=t.from(n,"utf8"),a=(0,s.keccak256AndHexify)(i).slice(2);let o="0x";for(let e=0;e<n.length;e++)parseInt(a[e],16)>=8?o+=n[e].toUpperCase():o+=n[e];return o},n.derivePubKey=function(e,t){const n=t.toString(16,64);return e.keyFromPrivate(n,"hex").getPublic()},n.uint8ArrayToHex=function(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/cryptoUtils.cjs"}],[2963,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SomeError=void 0;class r extends Error{constructor({errors:e,responses:t,predicate:n}){const s=n?.message??"unknown error";super(`Unable to resolve enough promises. \n      errors: ${e.map(e=>e?.message??e).join(", ")}, \n      predicate error: ${s},\n      ${t.length} responses,\n      responses: ${JSON.stringify(t)}`),this.errors=e,this.responses=t,this.predicate=n,Object.setPrototypeOf(this,r.prototype)}toString(){return this.message}}n.SomeError=r}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/errors.cjs"}],[2964,{"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.waitFor=n.capitalizeFirstLetter=n.generateEmptyBNArray=void 0;const s=r(e("bn.js"));n.generateEmptyBNArray=function(e){return Array.from({length:e},()=>new s.default(0))},n.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},n.waitFor=async function(e=2e3){return new Promise(t=>{setTimeout(t,e)})}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/helpers.cjs"}],[2965,{"./common.cjs":2961,"./cryptoUtils.cjs":2962,"./errors.cjs":2963,"./helpers.cjs":2964,"./lagrangeInterpolation.cjs":2966,"./point.cjs":2967,"./polynomial.cjs":2968,"./share.cjs":2969},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Share=n.Polynomial=n.Point=void 0;var a=e("./point.cjs");Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return i(a).default}});var o=e("./polynomial.cjs");Object.defineProperty(n,"Polynomial",{enumerable:!0,get:function(){return i(o).default}});var c=e("./share.cjs");Object.defineProperty(n,"Share",{enumerable:!0,get:function(){return i(c).default}}),s(e("./errors.cjs"),n),s(e("./common.cjs"),n),s(e("./lagrangeInterpolation.cjs"),n),s(e("./cryptoUtils.cjs"),n),s(e("./helpers.cjs"),n)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/index.cjs"}],[2966,{"./cryptoUtils.cjs":2962,"./helpers.cjs":2964,"./point.cjs":2967,"./polynomial.cjs":2968,"@noble/curves/abstract/modular":3152,"@noble/curves/abstract/utils":3154,"@noble/curves/secp256k1":3157,"@noble/hashes/utils":3172,"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.lagrangeInterpolation=n.lagrangeInterpolationForScalars=n.lagrangeInterpolationForPoints=n.lagrangeInterpolationNoble=n.generateRandomScalar=n.generateRandomPolynomialNoble=n.generateRandomPolynomial=n.lagrangeInterpolatePolynomial=void 0;const o=e("@noble/curves/abstract/modular"),c=e("@noble/curves/abstract/utils"),u=e("@noble/curves/secp256k1"),l=e("@noble/hashes/utils"),d=a(e("bn.js")),f=e("./cryptoUtils.cjs"),h=e("./helpers.cjs"),p=a(e("./point.cjs")),m=i(e("./polynomial.cjs"));function g(e,t){const n=(0,f.generatePrivateKey)(t);return e.find(e=>e.eq(n))?g(e,t):n}function b(e,t,n){const r=(0,h.generateEmptyBNArray)(e.length+t.length-1);for(let s=0;s<e.length;s++)for(let i=0;i<t.length;i++)r[s+i]=r[s+i].add(e[s].mul(t[i])).umod(n);return r}function y(e,t){const n=t.length,r=(0,h.generateEmptyBNArray)(n);if(!e.n)throw new Error("Curve is not set");for(let s=0;s<n;s++){let i=[new d.default(1)];for(let r=0;r<n;r++){if(r===s)continue;const n=t[s].xCoordinate.sub(t[r].xCoordinate).umod(e.n).invm(e.n);i=b(i,[t[r].xCoordinate.neg().umod(e.n).mul(n).umod(e.n),n],e.n)}for(let n=0;n<i.length;n++)r[n]=r[n].add(i[n].mul(t[s].yCoordinate)).umod(e.n)}return new m.default(r,e)}function w(e=u.secp256k1.CURVE.n){const t=(0,o.getMinHashLength)(e),n=(0,l.randomBytes)(t);return(0,c.bytesToNumberBE)(n)%e}function E(e,t,n){if(t.length!==n.length)throw new Error("Values and nodeIndex arrays must have the same length");if(0===t.length)throw new Error("Cannot interpolate with empty arrays");const r=(0,o.Field)(e),s="bigint"==typeof t[0];let i=s?0n:u.secp256k1.ProjectivePoint.ZERO;for(let e=0;e<t.length;e++){let a=1n,o=1n;for(let t=0;t<n.length;t++){if(e===t)continue;const s=n[e],i=n[t],c=r.neg(i),u=r.sub(s,i);a=r.mul(a,c),o=r.mul(o,u)}const c=r.mul(a,r.inv(o));if(s){const n=t[e],s=r.mul(n,c);i=r.add(i,s)}else{const n=t[e].multiply(c);i=i.add(n)}}return i}n.lagrangeInterpolatePolynomial=y,n.generateRandomPolynomial=function(e,t,n,r){let s;if(s=n||g([new d.default(0)],e),!r){const n=[s];for(let r=0;r<t;r+=1){const t=g(n,e);n.push(t)}return new m.default(n,e)}if(!Array.isArray(r))throw new Error("deterministic shares in generateRandomPolynomial should be an array");if(r.length>t)throw new Error("deterministicShares in generateRandomPolynomial should be less or equal than degree to ensure an element of randomness");const i={};r.forEach(t=>{i[t.shareIndex.toString("hex",64)]=new p.default(t.shareIndex,t.share,e)});for(let n=0;n<t-r.length;n+=1){const t=[new d.default(0)];Object.keys(i).forEach(e=>{t.push(new d.default(e,"hex"))});const n=g(t,e);i[n.toString("hex",64)]=new p.default(n,(0,f.generatePrivateKey)(e),e)}return i[0]=new p.default(new d.default(0),s,e),y(e,Object.values(i))},n.generateRandomPolynomialNoble=function(e,t,n){const r=[n??w(e)];for(let n=1;n<=t;n++)r[n]=w(e);return new m.PolynomialNoble(r,e)},n.generateRandomScalar=w,n.lagrangeInterpolationNoble=E,n.lagrangeInterpolationForPoints=function(e,t,n){return E(e,t,n)},n.lagrangeInterpolationForScalars=function(e,t,n){return E(e,t,n)},n.lagrangeInterpolation=function(e,t,n){if(t.length!==n.length)throw new Error("shares not equal to nodeIndex length in lagrangeInterpolation");const r=t.map((t,r)=>new p.default(n[r],t,e));return y(e,r).polynomial[0]}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/lagrangeInterpolation.cjs"}],[2967,{"bn.js":4023,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("bn.js"));n.default=class{constructor(e,t,n){this.xCoordinate=new s.default(e,"hex"),this.yCoordinate=new s.default(t,"hex"),this.ecCurve=n}encode(e){switch(e){case"arr":return t.concat([t.from("04","hex"),t.from(this.xCoordinate.toString("hex",64),"hex"),t.from(this.yCoordinate.toString("hex",64),"hex")]);case"elliptic-compressed":{const e=this.ecCurve.keyFromPublic({x:this.xCoordinate.toString("hex",64),y:this.yCoordinate.toString("hex",64)},"hex");return t.from(e.getPublic(!0,"hex"),"hex")}default:throw new Error("encoding doesn't exist in Point")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/point.cjs"}],[2968,{"./share.cjs":2969,"@noble/curves/abstract/modular":3152,"bn.js":4023,elliptic:4257},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PolynomialNoble=void 0;const c=e("@noble/curves/abstract/modular"),u=o(e("bn.js")),l=e("elliptic"),d=o(e("./share.cjs"));class f{constructor(e,t,n){r.set(this,void 0),s.set(this,void 0),n?(i(this,r,e,"f"),i(this,s,(0,c.Field)(n.curveN),"f"),this.polynomial=a(this,r,"f").map(e=>new u.default(e.toString()))):this.polynomial=e,this.ecCurve=t}getThreshold(){return this.polynomial.length}polyEval(e){const t=new u.default(e,"hex");let n=new u.default(t),r=new u.default(0);r=r.add(this.polynomial[0]);const{n:s}=this.ecCurve;if(!s)throw new Error("Curve is not set");for(const e of this.polynomial.slice(1)){const i=n.mul(e);r=r.add(i),r=r.umod(s),n=n.mul(new u.default(t)),n=n.umod(s)}return r}polyEvalNoble(e){if(!a(this,r,"f")||!a(this,s,"f"))throw new Error("Noble implementation not initialized");if(0===a(this,r,"f").length)return 0n;let t=a(this,r,"f")[0],n=e;for(let i=1;i<a(this,r,"f").length;i++)t=a(this,s,"f").add(t,a(this,s,"f").mul(a(this,r,"f")[i],n)),n=a(this,s,"f").mul(n,e);return t}generateShares(e){const t=e.map(e=>{if("bigint"==typeof e)return new u.default(e.toString());if("number"==typeof e)return new u.default(e);if(e instanceof u.default)return e;if("string"==typeof e)return new u.default(e,"hex");throw new Error("Invalid share index")}),n={};for(const e of t)n[e.toString("hex",64)]=new d.default(e,this.polyEval(e));return n}}r=new WeakMap,s=new WeakMap,n.default=f;n.PolynomialNoble=class extends f{constructor(e,t){super(e,new l.ec("secp256k1"),{curveN:t})}}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/polynomial.cjs"}],[2969,{"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("bn.js"));class i{constructor(e,t){this.share=new s.default(t,"hex"),this.shareIndex=new s.default(e,"hex")}static fromJSON(e){const{share:t,shareIndex:n}=e;return new i(n,t)}toJSON(){return{share:this.share.toString("hex",64),shareIndex:this.shareIndex.toString("hex",64)}}}n.default=i}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@metamask/auth-network-utils",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@metamask/auth-network-utils/dist/share.cjs"}],[297,{"../../../../shared/modules/hexstring-utils":5922,"@metamask/eth-sig-util":1993,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEthAddress=a,n.normalizeAddress=function(e){return a(e)?(0,s.normalize)(e):e},n.normalizeSafeAddress=function(e){return a(e)?(0,i.toChecksumHexAddress)(e):e};var r=e("@metamask/utils"),s=e("@metamask/eth-sig-util"),i=e("../../../../shared/modules/hexstring-utils");function a(e){return(0,r.isValidHexAddress)(e)}}}},{package:"$root$",file:"app/scripts/lib/multichain/address.ts"}],[2970,{"@babel/runtime/helpers/objectSpread2":630,deepmerge:4237,loglevel:4846},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("@babel/runtime/helpers/objectSpread2"),s=e("deepmerge"),i=e("loglevel");const a=i.getLogger("http-helpers");a.setLevel(i.levels.INFO);let o="torus-default",c="";const u="x-api-key",l="x-embed-host";let d=null;const f=[],h=[];async function p(e,t){let n=null;try{n=new URL(e)}catch{}if(d&&n&&(f.includes(n.origin)||h.includes(n.pathname))){return await d.startSpan({name:e,op:"http.client"},async()=>await fetch(e,t))}return fetch(e,t)}function m(){const e={};return o&&(e[u]=o),c&&(e[l]=c),e}function g(e){a.info(`Response: ${e.status} ${e.statusText}`),a.info(`Url: ${e.url}`)}const b=async(e,t)=>{let n=null;try{const r=new Promise((t,r)=>{n=setTimeout(()=>{r(new Error(`Timed out in ${e}ms`))},e)}),s=await Promise.race([t,r]);return null!=n&&clearTimeout(n),s}catch(e){throw null!=n&&clearTimeout(n),e}},y=async(e,t={},n={})=>{const i={mode:"cors",headers:{}};n.useAPIKey&&(i.headers=r(r({},i.headers),m())),t.method="GET";const a=s(i,t),o=await p(e,a);if(o.ok){const e=o.headers.get("content-type");return null!=e&&e.includes("application/json")?o.json():o.text()}throw g(o),o};n.clearAPIKey=function(){o="torus-default"},n.clearEmbedHost=function(){c=""},n.enableSentryTracing=function(e,t,n){d=e,f.push(...t),h.push(...n)},n.gatewayAuthHeader=u,n.gatewayEmbedHostHeader=l,n.generateJsonRPCObject=(e,t)=>({jsonrpc:"2.0",method:e,id:10,params:t}),n.get=y,n.getAPIKey=function(){return o},n.getEmbedHost=function(){return c},n.patch=async(e,t={},n={},i={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(a.headers=r(r({},a.headers),m())),n.method="PATCH";const o=s(a,n);i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.post=(e,t={},n={},i={})=>{const o={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(o.headers=r(r({},o.headers),m())),n.method="POST";const c=s(o,n);return i.isUrlEncodedData?(c.body=t,"application/json; charset=utf-8"===c.headers["Content-Type"]&&delete c.headers["Content-Type"]):c.body=JSON.stringify(t),b(i.timeout||6e4,p(e,c).then(e=>{if(i.logTracingHeader&&function(e){const t=e.headers.get("x-web3-correlation-id");t&&a.info(`Request tracing with traceID = ${t}`)}(e),e.ok){const t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw g(e),e}))},n.promiseRace=(e,t,n=6e4)=>Promise.race([y(e,t),new Promise((e,t)=>{setTimeout(()=>{t(new Error("timed out"))},n)})]),n.promiseTimeout=b,n.put=async(e,t={},n={},i={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(a.headers=r(r({},a.headers),m())),n.method="PUT";const o=s(a,n);i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.remove=async(e,t={},n={},i={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};i.useAPIKey&&(a.headers=r(r({},a.headers),m())),n.method="DELETE";const o=s(a,n);i.isUrlEncodedData?(o.body=t,"application/json; charset=utf-8"===o.headers["Content-Type"]&&delete o.headers["Content-Type"]):o.body=JSON.stringify(t);const c=await p(e,o);if(c.ok){const e=c.headers.get("content-type");return null!=e&&e.includes("application/json")?c.json():c.text()}throw g(c),c},n.setAPIKey=function(e){o=e},n.setEmbedHost=function(e){c=e},n.setLogLevel=function(e){a.setLevel(e)}}}},{package:"@metamask/seedless-onboarding-controller>@metamask/toprf-secure-backup>@toruslabs/http-helpers",file:"node_modules/@metamask/toprf-secure-backup/node_modules/@toruslabs/http-helpers/dist/lib.cjs/index.js"}],[2971,{"./gas-flows/DefaultGasFeeFlow.cjs":2976,"./gas-flows/LineaGasFeeFlow.cjs":2977,"./gas-flows/OptimismLayer1GasFeeFlow.cjs":2978,"./gas-flows/RandomisedEstimationsGasFeeFlow.cjs":2980,"./gas-flows/ScrollLayer1GasFeeFlow.cjs":2981,"./gas-flows/TestGasFeeFlow.cjs":2982,"./helpers/AccountsApiRemoteTransactionSource.cjs":2983,"./helpers/GasFeePoller.cjs":2984,"./helpers/IncomingTransactionHelper.cjs":2985,"./helpers/MethodDataHelper.cjs":2986,"./helpers/MultichainTrackingHelper.cjs":2987,"./helpers/PendingTransactionTracker.cjs":2988,"./helpers/ResimulateHelper.cjs":2989,"./hooks/ExtraTransactionsPublishHook.cjs":2992,"./logger.cjs":2995,"./types.cjs":2996,"./utils/balance-changes.cjs":2997,"./utils/batch.cjs":2999,"./utils/eip7702.cjs":3e3,"./utils/external-transactions.cjs":3001,"./utils/first-time-interaction.cjs":3003,"./utils/gas-fee-tokens.cjs":3004,"./utils/gas-fees.cjs":3005,"./utils/gas-flow.cjs":3006,"./utils/gas.cjs":3007,"./utils/layer1-gas-fee-flow.cjs":3008,"./utils/nonce.cjs":3009,"./utils/prepare.cjs":3010,"./utils/retry.cjs":3011,"./utils/swaps.cjs":3013,"./utils/transaction-type.cjs":3014,"./utils/utils.cjs":3015,"./utils/validation.cjs":3016,"@metamask/base-controller":1362,"@metamask/controller-utils":1449,"@metamask/eth-query":1991,"@metamask/network-controller":2319,"@metamask/nonce-tracker":2352,"@metamask/rpc-errors":2600,"@metamask/utils":3116,events:4384,lodash:4838,uuid:5734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,b,y,w,E,v,T,x,S,P,k,I,A,_,C,j,B,F,O,R,L,M,N,G,D,H,U,q,V,$,z,K,W,X,J,Z,Y,Q,ee,te,ne,re,se,ie,ae,oe,ce,ue,le,de,fe,he,pe,me,ge,be,ye,we,Ee,ve,Te,xe,Se,Pe,ke,Ie,Ae,_e,Ce,je,Be,Fe,Oe,Re,Le,Me,Ne,Ge,De,He,Ue,qe,Ve,$e,ze,Ke,We,Xe,Je,Ze,Ye,Qe,et,tt,nt=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},rt=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},st=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.ApprovalState=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;const it=e("@metamask/base-controller"),at=e("@metamask/controller-utils"),ot=st(e("@metamask/eth-query")),ct=e("@metamask/network-controller"),ut=e("@metamask/nonce-tracker"),lt=e("@metamask/rpc-errors"),dt=e("@metamask/utils"),ft=e("events"),ht=e("lodash"),pt=e("uuid"),mt=e("./gas-flows/DefaultGasFeeFlow.cjs"),gt=e("./gas-flows/LineaGasFeeFlow.cjs"),bt=e("./gas-flows/OptimismLayer1GasFeeFlow.cjs"),yt=e("./gas-flows/RandomisedEstimationsGasFeeFlow.cjs"),wt=e("./gas-flows/ScrollLayer1GasFeeFlow.cjs"),Et=e("./gas-flows/TestGasFeeFlow.cjs"),vt=e("./helpers/AccountsApiRemoteTransactionSource.cjs"),Tt=e("./helpers/GasFeePoller.cjs"),xt=e("./helpers/IncomingTransactionHelper.cjs"),St=e("./helpers/MethodDataHelper.cjs"),Pt=e("./helpers/MultichainTrackingHelper.cjs"),kt=e("./helpers/PendingTransactionTracker.cjs"),It=e("./helpers/ResimulateHelper.cjs"),At=e("./hooks/ExtraTransactionsPublishHook.cjs"),_t=e("./logger.cjs"),Ct=e("./types.cjs"),jt=e("./utils/balance-changes.cjs"),Bt=e("./utils/batch.cjs"),Ft=e("./utils/eip7702.cjs"),Ot=e("./utils/external-transactions.cjs"),Rt=e("./utils/first-time-interaction.cjs"),Lt=e("./utils/gas.cjs"),Mt=e("./utils/gas-fee-tokens.cjs"),Nt=e("./utils/gas-fees.cjs"),Gt=e("./utils/gas-flow.cjs"),Dt=e("./utils/layer1-gas-fee-flow.cjs"),Ht=e("./utils/nonce.cjs"),Ut=e("./utils/prepare.cjs"),qt=e("./utils/retry.cjs"),Vt=e("./utils/swaps.cjs"),$t=e("./utils/transaction-type.cjs"),zt=e("./utils/utils.cjs"),Kt=e("./utils/validation.cjs"),Wt={transactions:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},transactionBatches:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},methodData:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},lastFetchedBlockNumbers:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},submitHistory:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}};n.CANCEL_RATE=1.1,n.SPEED_UP_RATE=1.1;const Xt="TransactionController";var Jt;!function(e){e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook"}(Jt||(n.ApprovalState=Jt={}));class Zt extends it.BaseController{constructor(e){const{disableSwaps:t,getCurrentAccountEIP1559Compatibility:n,getCurrentNetworkEIP1559Compatibility:V,getExternalPendingTransactions:$,getGasFeeEstimates:z,getNetworkClientRegistry:K,getNetworkState:X,getPermittedAccounts:J,getSavedGasFees:Z,getSimulationConfig:Y,hooks:Q,incomingTransactions:te={},isAutomaticGasFeeUpdateEnabled:ne,isEIP7702GasFeeTokensEnabled:re,isFirstTimeInteractionEnabled:se,isSimulationEnabled:ie,messenger:ae,pendingTransactions:oe={},publicKeyEIP7702:ce,securityProviderRequest:ue,sign:le,state:fe,testGasFeeFlows:he,trace:pe,transactionHistoryLimit:me=40}=e;super({name:Xt,metadata:Wt,messenger:ae,state:{methodData:{},transactions:[],transactionBatches:[],lastFetchedBlockNumbers:{},submitHistory:[],...fe}}),r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,new Set),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),y.set(this,void 0),w.set(this,void 0),E.set(this,void 0),v.set(this,void 0),T.set(this,void 0),x.set(this,new ft.EventEmitter),S.set(this,void 0),P.set(this,void 0),k.set(this,void 0),I.set(this,void 0),A.set(this,void 0),_.set(this,void 0),C.set(this,void 0),j.set(this,void 0),B.set(this,void 0),F.set(this,void 0),O.set(this,void 0),R.set(this,void 0),L.set(this,void 0),M.set(this,void 0),N.set(this,void 0),G.set(this,new Map),D.set(this,new Set),H.set(this,void 0),U.set(this,void 0),q.set(this,void 0),Ae.set(this,()=>{rt(this,B,"f").checkForPendingTransactionAndStartPolling()}),this.messenger=ae,nt(this,s,Q?.afterAdd??(()=>Promise.resolve({})),"f"),nt(this,i,Q?.afterSign??(()=>!0),"f"),nt(this,a,Q?.afterSimulate??(()=>Promise.resolve({})),"f"),nt(this,c,Q?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),"f"),nt(this,u,Q?.beforePublish??(()=>Promise.resolve(!0)),"f"),nt(this,l,Q?.beforeSign??(()=>Promise.resolve({})),"f"),nt(this,f,Q?.getAdditionalSignArguments??(()=>[]),"f"),nt(this,h,n??(()=>Promise.resolve(!0)),"f"),nt(this,p,V,"f"),nt(this,m,$??(()=>[]),"f"),nt(this,g,z??(()=>Promise.resolve({})),"f"),nt(this,b,X,"f"),nt(this,y,J,"f"),nt(this,w,Z??(e=>undefined),"f"),nt(this,E,Y??(()=>Promise.resolve({})),"f"),nt(this,T,te,"f"),nt(this,S,ne??(e=>!1),"f"),nt(this,P,re??(()=>Promise.resolve(!1)),"f"),nt(this,k,se??(()=>!0),"f"),nt(this,I,ie??(()=>!0),"f"),nt(this,A,t??!1,"f"),nt(this,_,Q?.isTimeoutEnabled??(()=>!0),"f"),nt(this,F,oe,"f"),nt(this,O,ce,"f"),nt(this,R,Q?.publish??(()=>Promise.resolve({transactionHash:undefined})),"f"),nt(this,L,Q?.publishBatch,"f"),nt(this,M,ue,"f"),nt(this,N,le,"f"),nt(this,H,!0===he,"f"),nt(this,U,pe??((e,t)=>t?.()),"f"),nt(this,q,me,"f");const ge=e=>this.messenger.call("NetworkController:findNetworkClientIdByChainId",e);nt(this,B,new Pt.MultichainTrackingHelper({findNetworkClientIdByChainId:ge,getNetworkClientById:e=>this.messenger.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:K,removePendingTransactionTrackerListeners:rt(this,r,"m",je).bind(this),createNonceTracker:rt(this,r,"m",ke).bind(this),createPendingTransactionTracker:rt(this,r,"m",Ie).bind(this),onNetworkStateChange:e=>{this.messenger.subscribe("NetworkController:stateChange",e)}}),"f"),rt(this,B,"f").initialize(),nt(this,d,rt(this,r,"m",Le).call(this),"f"),nt(this,C,rt(this,r,"m",Me).call(this),"f");const be=new Tt.GasFeePoller({findNetworkClientIdByChainId:ge,gasFeeFlows:rt(this,d,"f"),getGasFeeControllerEstimates:rt(this,g,"f"),getProvider:e=>rt(this,r,"m",de).call(this,{networkClientId:e}),getTransactions:()=>this.state.transactions,getTransactionBatches:()=>this.state.transactionBatches,layer1GasFeeFlows:rt(this,C,"f"),messenger:this.messenger,onStateChange:e=>{this.messenger.subscribe("TransactionController:stateChange",e)}});be.hub.on("transaction-updated",rt(this,r,"m",De).bind(this)),be.hub.on("transaction-batch-updated",rt(this,r,"m",He).bind(this)),nt(this,j,new St.MethodDataHelper({getProvider:e=>rt(this,r,"m",de).call(this,{networkClientId:e}),getState:()=>this.state.methodData}),"f"),rt(this,j,"f").hub.on("update",({fourBytePrefix:e,methodData:t})=>{this.update(n=>{n.methodData[e]=t})}),nt(this,v,new xt.IncomingTransactionHelper({client:rt(this,T,"f").client,getCurrentAccount:()=>rt(this,r,"m",qe).call(this),getLocalTransactions:()=>this.state.transactions,includeTokenTransfers:rt(this,T,"f").includeTokenTransfers,isEnabled:rt(this,T,"f").isEnabled,messenger:this.messenger,remoteTransactionSource:new vt.AccountsApiRemoteTransactionSource,trimTransactions:rt(this,r,"m",ee).bind(this),updateTransactions:rt(this,T,"f").updateTransactions}),"f"),rt(this,r,"m",Ce).call(this,rt(this,v,"f")),this.messenger.subscribe("TransactionController:stateChange",rt(this,Ae,"f")),new It.ResimulateHelper({simulateTransaction:rt(this,r,"m",Ge).bind(this),onTransactionsUpdate:e=>{this.messenger.subscribe("TransactionController:stateChange",e,e=>e.transactions)},getTransactions:()=>this.state.transactions}),rt(this,r,"m",W).call(this),rt(this,Ae,"f").call(this),rt(this,r,"m",Ke).call(this)}destroy(){rt(this,r,"m",_e).call(this)}async handleMethodData(e,t){return rt(this,j,"f").lookup(e,t)}async addTransactionBatch(e){const{blockTracker:t}=this.messenger.call("NetworkController:getNetworkClientById",e.networkClientId);return await(0,Bt.addTransactionBatch)({addTransaction:this.addTransaction.bind(this),estimateGas:this.estimateGas.bind(this),getChainId:rt(this,r,"m",ce).bind(this),getEthQuery:e=>rt(this,r,"m",le).call(this,{networkClientId:e}),getGasFeeEstimates:rt(this,g,"f"),getInternalAccounts:rt(this,r,"m",Ve).bind(this),getSimulationConfig:rt(this,E,"f").bind(this),getPendingTransactionTracker:e=>rt(this,r,"m",Ie).call(this,{provider:rt(this,r,"m",de).call(this,{networkClientId:e}),blockTracker:t,chainId:rt(this,r,"m",ce).call(this,e),networkClientId:e}),getTransaction:e=>rt(this,r,"m",ie).call(this,e),isSimulationEnabled:rt(this,I,"f"),messenger:this.messenger,publishBatchHook:rt(this,L,"f"),publicKeyEIP7702:rt(this,O,"f"),publishTransaction:(e,t)=>rt(this,r,"m",Y).call(this,e,t),request:e,signTransaction:rt(this,r,"m",ve).bind(this),update:this.update.bind(this),updateTransaction:rt(this,r,"m",Ne).bind(this)})}async isAtomicBatchSupported(e){return(0,Bt.isAtomicBatchSupported)({...e,getEthQuery:e=>rt(this,r,"m",le).call(this,{chainId:e}),messenger:this.messenger,publicKeyEIP7702:rt(this,O,"f")})}async addTransaction(e,t){(0,_t.projectLogger)("Adding transaction",e,t);const{actionId:n,assetsFiatValues:i,batchId:a,deviceConfirmedOn:o,disableGasBuffer:c,gasFeeToken:u,isGasFeeIncluded:l,isGasFeeSponsored:d,isStateOnly:f,method:h,nestedTransactions:p,networkClientId:m,origin:g,publishHook:b,requestId:w,requireApproval:E,securityAlertResponse:v,skipInitialGasEstimate:T,swaps:x={},traceContext:S,type:P}=t;if(e=(0,zt.normalizeTransactionParams)(e),!rt(this,B,"f").has(m))throw new Error(`Network client not found - ${m}`);const I=rt(this,r,"m",ce).call(this,m),_=rt(this,r,"m",le).call(this,{networkClientId:m}),C=g===undefined?undefined:await(rt(this,y,"f")?.call(this,g)),j=rt(this,r,"m",Ve).call(this);await(0,Kt.validateTransactionOrigin)({data:e.data,from:e.from,internalAccounts:j,origin:g,permittedAddresses:C,txParams:e,type:P});const F=(0,Ft.getDelegationAddress)(e.from,_).catch(()=>undefined),O=await rt(this,r,"m",Ee).call(this,m);(0,Kt.validateTxParams)(e,O,I),e.type||(0,zt.setEnvelopeType)(e,O);if(a?.length&&this.state.transactions.some(e=>e.batchId?.toLowerCase()===a?.toLowerCase())&&g&&g!==at.ORIGIN_METAMASK)throw new lt.JsonRpcError(Kt.ErrorCode.DuplicateBundleId,"Batch ID already exists");const R=rt(this,r,"m",he).call(this,e,g),L=P??(await(0,$t.determineTransactionType)(e,_)).type,N=rt(this,r,"m",be).call(this,n);let G=N?(0,ht.cloneDeep)(N):{actionId:n,assetsFiatValues:i,batchId:a,chainId:I,dappSuggestedGasFees:R,deviceConfirmedOn:o,disableGasBuffer:c,id:(0,pt.v1)(),isGasFeeTokenIgnoredIfBalance:Boolean(u),isGasFeeIncluded:l,isGasFeeSponsored:d,isFirstTimeInteraction:undefined,isStateOnly:f,nestedTransactions:p,networkClientId:m,origin:g,requestId:w,securityAlertResponse:v,selectedGasFeeToken:u,status:Ct.TransactionStatus.unapproved,time:Date.now(),txParams:e,type:L,userEditedGasLimit:!1,verifiedOnBlockchain:!1};const{updateTransaction:D}=await rt(this,s,"f").call(this,{transactionMeta:G});if(D&&((0,_t.projectLogger)("Updating transaction using afterAdd hook"),G.txParamsOriginal=(0,ht.cloneDeep)(G.txParams),D(G)),T){const e=(0,ht.cloneDeep)(G);rt(this,r,"m",K).call(this,e).then(()=>(rt(this,r,"m",Ne).call(this,{transactionId:e.id,skipResimulateCheck:!0,skipValidation:!0},t=>{t.txParams.gas=e.txParams.gas,t.txParams.gasPrice=e.txParams.gasPrice,t.txParams.maxFeePerGas=e.txParams.maxFeePerGas,t.txParams.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas}),undefined)).catch(ht.noop)}else await rt(this,U,"f").call(this,{name:"Estimate Gas Properties",parentContext:S},e=>rt(this,r,"m",K).call(this,G,{traceContext:e}));if(!N){if(h&&rt(this,M,"f")){const e=await rt(this,M,"f").call(this,G,h);G.securityProviderResponse=e}G=(0,Vt.updateSwapsTransaction)(G,L,x,{isSwapsDisabled:rt(this,A,"f"),cancelTransaction:rt(this,r,"m",Q).bind(this),messenger:this.messenger}),rt(this,r,"m",z).call(this,G),F.then(e=>(rt(this,r,"m",Ne).call(this,{transactionId:G.id,skipResimulateCheck:!0,skipValidation:!0},t=>{t.delegationAddress=e}),undefined)).catch(ht.noop),!1===E||f?(0,_t.projectLogger)("Skipping simulation & first interaction update as approval not required"):(rt(this,r,"m",Ge).call(this,G,{traceContext:S}).catch(e=>{throw(0,_t.projectLogger)("Error while updating simulation data",e),e}),(0,Rt.updateFirstTimeInteraction)({existingTransactions:this.state.transactions,getTransaction:e=>rt(this,r,"m",se).call(this,e),isFirstTimeInteractionEnabled:rt(this,k,"f"),trace:rt(this,U,"f"),traceContext:S,transactionMeta:G,updateTransaction:rt(this,r,"m",Ne).bind(this)}).catch(e=>{(0,_t.projectLogger)("Error while updating first interaction properties",e)})),this.messenger.publish(`${Xt}:unapprovedTransactionAdded`,G)}return{result:rt(this,r,"m",J).call(this,G,{actionId:n,isExisting:Boolean(N),publishHook:b,requireApproval:E,traceContext:S}),transactionMeta:G}}startIncomingTransactionPolling(){rt(this,v,"f").start()}stopIncomingTransactionPolling(){rt(this,v,"f").stop()}async updateIncomingTransactions({tags:e}={}){await rt(this,v,"f").update({tags:e})}async stopTransaction(e,t,{estimatedBaseFee:s,actionId:i}={}){await rt(this,r,"m",V).call(this,{actionId:i,estimatedBaseFee:s,gasValues:t,label:"cancel",rate:n.CANCEL_RATE,transactionId:e,transactionType:Ct.TransactionType.cancel,prepareTransactionParams:e=>{delete e.data,e.to=e.from,e.value="0x0"},afterSubmit:e=>{this.messenger.publish(`${Xt}:transactionFinished`,e),rt(this,x,"f").emit(`${e.id}:finished`,e)}})}async speedUpTransaction(e,t,{actionId:s,estimatedBaseFee:i}={}){await rt(this,r,"m",V).call(this,{actionId:s,estimatedBaseFee:i,gasValues:t,label:"speed up",rate:n.SPEED_UP_RATE,transactionId:e,transactionType:Ct.TransactionType.retry,afterSubmit:e=>{this.messenger.publish(`${Xt}:speedupTransactionAdded`,e)}})}async estimateGas(e,t,{ignoreDelegationSignatures:n}={}){const s=rt(this,r,"m",le).call(this,{networkClientId:t}),{estimatedGas:i,simulationFails:a}=await(0,Lt.estimateGas)({chainId:rt(this,r,"m",ce).call(this,t),ethQuery:s,ignoreDelegationSignatures:n,isSimulationEnabled:rt(this,I,"f").call(this),getSimulationConfig:rt(this,E,"f"),messenger:this.messenger,txParams:e});return{gas:i,simulationFails:a}}async estimateGasBatch({chainId:e,from:t,transactions:n}){const s=rt(this,r,"m",le).call(this,{chainId:e});return(0,Lt.estimateGasBatch)({chainId:e,ethQuery:s,from:t,getSimulationConfig:rt(this,E,"f"),isAtomicBatchSupported:this.isAtomicBatchSupported.bind(this),messenger:this.messenger,transactions:n})}async estimateGasBuffered(e,t,n){const s=rt(this,r,"m",le).call(this,{networkClientId:n}),{blockGasLimit:i,estimatedGas:a,simulationFails:o}=await(0,Lt.estimateGas)({chainId:rt(this,r,"m",ce).call(this,n),ethQuery:s,isSimulationEnabled:rt(this,I,"f").call(this),getSimulationConfig:rt(this,E,"f"),messenger:this.messenger,txParams:e});return{gas:(0,Lt.addGasBuffer)(a,i,t),simulationFails:o}}updateTransaction(e,t){const{id:n}=e;rt(this,r,"m",Ne).call(this,{transactionId:n},()=>({...e})),(0,_t.projectLogger)("Transaction updated",{transactionId:n,note:t})}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const n=rt(this,r,"m",se).call(this,e);if(!n)throw new Error("Cannot update security alert response as no transaction metadata found");const s={...n,securityAlertResponse:t};this.updateTransaction(s,`${Xt}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions({address:e,chainId:t}={}){if(!t&&!e)return void this.update(e=>{e.transactions=[]});const n=this.state.transactions.filter(({chainId:n,txParams:r,type:s})=>{if(!(!t||t===n))return!0;return!(!e||r.from?.toLowerCase()===e.toLowerCase()||s===Ct.TransactionType.incoming&&r.to?.toLowerCase()===e.toLowerCase())});this.update(e=>{e.transactions=rt(this,r,"m",ee).call(this,n)})}updateTransactionSendFlowHistory(e,t,n){return rt(this,r,"m",ie).call(this,e)}async confirmExternalTransaction(e,t,n){const s=rt(this,r,"m",pe).call(this,e);try{const e=s.id,i={...s,status:Ct.TransactionStatus.confirmed,txReceipt:t};n&&(i.baseFeePerGas=n),rt(this,r,"m",me).call(this,e),this.updateTransaction(i,`${Xt}:confirmExternalTransaction - Add external transaction`),rt(this,r,"m",Te).call(this,i),rt(this,r,"m",Pe).call(this,i).catch(e=>{throw(0,_t.projectLogger)("Error while updating post balance",e),e}),this.messenger.publish(`${Xt}:transactionConfirmed`,i)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:n,estimateSuggested:s,gas:i,gasLimit:a,gasPrice:o,maxPriorityFeePerGas:c,maxFeePerGas:u,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:f}){const h=rt(this,r,"m",se).call(this,e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");(0,zt.validateIfTransactionUnapproved)(h,"updateTransactionGasFees");const p=(0,ht.cloneDeep)(h),m=h.gasFeeEstimates,g=rt(this,S,"f").call(this,h),b=f,y=Object.values(Ct.GasFeeEstimateLevel).includes(b),w=m&&g&&y;w&&(0,Tt.updateTransactionGasEstimates)({txMeta:p,userFeeLevel:b});const E={gas:i,gasLimit:a};w?Object.assign(E,{gasPrice:p.txParams.gasPrice,maxPriorityFeePerGas:p.txParams.maxPriorityFeePerGas,maxFeePerGas:p.txParams.maxFeePerGas}):Object.assign(E,{gasPrice:o,maxPriorityFeePerGas:c,maxFeePerGas:u});const v={txParams:(0,ht.pickBy)(E),defaultGasEstimates:t,estimateUsed:n,estimateSuggested:s,originalGasEstimate:l,userEditedGasLimit:d,userFeeLevel:b},T=(0,ht.pickBy)(v);return rt(this,r,"m",Ne).call(this,{transactionId:e,skipResimulateCheck:!0},e=>{const{txParams:t,...n}=T;Object.assign(e,n),t&&Object.assign(e.txParams,t)}),rt(this,r,"m",se).call(this,e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:s}){const i=rt(this,r,"m",se).call(this,e);if(!i)throw new Error("Cannot update transaction as no transaction metadata found");(0,zt.validateIfTransactionUnapproved)(i,"updatePreviousGasParams");const a={previousGas:{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:s}};a.previousGas=(0,ht.pickBy)(a.previousGas);const o=(0,ht.merge)({},i,a);return this.updateTransaction(o,`${Xt}:updatePreviousGasParams - Previous gas values updated`),rt(this,r,"m",se).call(this,e)}async getNonceLock(e,t){return rt(this,B,"f").getNonceLock(e,t)}async updateEditableParams(e,{containerTypes:t,data:n,from:s,gas:i,gasPrice:a,maxFeePerGas:o,maxPriorityFeePerGas:c,to:u,updateType:l,value:d}){const f=rt(this,r,"m",se).call(this,e);if(!f)throw new Error("Cannot update editable params as no transaction metadata found");(0,zt.validateIfTransactionUnapproved)(f,"updateEditableParams");const h={txParams:{data:n,from:s,to:u,value:d,gas:i,gasPrice:a,maxFeePerGas:o,maxPriorityFeePerGas:c}};h.txParams=(0,ht.pickBy)(h.txParams);const p=(0,ht.merge)({},f,h),{networkClientId:m}=f,g=rt(this,r,"m",de).call(this,{networkClientId:m}),b=new ot.default(g);if(!1!==l){const{type:e}=await(0,$t.determineTransactionType)(p.txParams,b);p.type=e}return t&&(p.containerTypes=t),await(0,Dt.updateTransactionLayer1GasFee)({layer1GasFeeFlows:rt(this,C,"f"),messenger:this.messenger,provider:g,transactionMeta:p}),this.updateTransaction(p,`Update Editable Params for ${e}`),rt(this,r,"m",se).call(this,e)}setTransactionActive(e,t){if(!rt(this,r,"m",se).call(this,e))throw new Error(`Transaction with id ${e} not found`);rt(this,r,"m",Ne).call(this,{transactionId:e,skipValidation:!0,skipResimulateCheck:!0},e=>{e.isActive=t})}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if((0,_t.projectLogger)("Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const n=e[0],{chainId:s}=n,i=rt(this,r,"m",ue).call(this,{chainId:s}),a=(0,Ut.prepareTransaction)(s,n),c=(0,Ut.serializeTransaction)(a);if(rt(this,o,"f").has(c))return"";let u,l;rt(this,o,"f").add(c);try{const s=n.from;l=!0!==t?await this.getNonceLock(s,i):undefined;const a=l?(0,dt.add0x)(l.nextNonce.toString(16)):n.nonce;l&&(0,_t.projectLogger)("Using nonce from nonce tracker",a,l.nonceDetails),u=await Promise.all(e.map(e=>(e.nonce=a,rt(this,r,"m",$).call(this,e.chainId,e))))}catch(e){throw(0,_t.projectLogger)("Error while signing transactions with same nonce",e),e}finally{l?.releaseLock(),rt(this,o,"f").delete(c)}return u}updateCustodialTransaction(e){const{transactionId:t,errorMessage:n,hash:s,status:i,gasLimit:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d}=e,f=rt(this,r,"m",se).call(this,t);if(!f)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(i&&![Ct.TransactionStatus.submitted,Ct.TransactionStatus.signed,Ct.TransactionStatus.failed].includes(i))throw new Error(`Cannot update custodial transaction with status: ${i}`);const h=(0,ht.merge)({},f,(0,ht.pickBy)({hash:s,status:i}));return h.status===Ct.TransactionStatus.submitted&&(h.submittedTime=(new Date).getTime()),h.status===Ct.TransactionStatus.failed&&(h.error=(0,zt.normalizeTxError)(new Error(n))),h.txParams=(0,ht.merge)({},h.txParams,(0,ht.pickBy)({gasLimit:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d})),d===Ct.TransactionEnvelopeType.legacy&&(delete h.txParams.maxFeePerGas,delete h.txParams.maxPriorityFeePerGas),this.updateTransaction(h,`${Xt}:updateCustodialTransaction - Custodial transaction updated`),i&&[Ct.TransactionStatus.submitted,Ct.TransactionStatus.failed].includes(i)&&(this.messenger.publish(`${Xt}:transactionFinished`,h),rt(this,x,"f").emit(`${h.id}:finished`,h)),h}getTransactions({initialList:e,limit:t,searchCriteria:n={}}={}){const r=(0,ht.mapValues)(n,e=>"function"==typeof e?e:t=>t===e),s=e??this.state.transactions,i=(0,ht.sortBy)((0,ht.pickBy)(s,e=>{for(const[t,n]of Object.entries(r))if(t in e.txParams){if(!1===n(e.txParams[t]))return!1}else if(!1===n(e[t]))return!1;return!0}),"time");if(t!==undefined){const e=new Set,n=[];for(let r=i.length-1;r>-1;r--){const s=i[r],{nonce:a}=s.txParams;if(!e.has(a)){if(!(e.size<t))continue;e.add(a)}n.unshift(s)}return n}return i}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:n}){const{id:r,provider:s}=rt(this,B,"f").getNetworkClient({chainId:t,networkClientId:n}),i={txParams:e,chainId:t,networkClientId:r},a=(0,Gt.getGasFeeFlow)(i,rt(this,d,"f"),this.messenger),o=new ot.default(s),c=await rt(this,g,"f").call(this,{networkClientId:r});return a.getGasFees({ethQuery:o,gasFeeControllerData:c,messenger:this.messenger,transactionMeta:i})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:n}){const s=rt(this,r,"m",de).call(this,{chainId:t,networkClientId:n});return await(0,Dt.getTransactionLayer1GasFee)({layer1GasFeeFlows:rt(this,C,"f"),messenger:this.messenger,provider:s,transactionMeta:{txParams:e,chainId:t}})}clearUnapprovedTransactions(){const e=this.state.transactions.filter(({status:e})=>e!==Ct.TransactionStatus.unapproved);this.update(t=>{t.transactions=rt(this,r,"m",ee).call(this,e)})}abortTransactionSigning(e){if(!rt(this,r,"m",se).call(this,e))throw new Error("Cannot abort signing as no transaction metadata found");const t=rt(this,G,"f").get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),rt(this,G,"f").delete(e)}async updateAtomicBatchData({transactionId:e,transactionIndex:t,transactionData:n}){(0,_t.projectLogger)("Updating atomic batch data",{transactionId:e,transactionIndex:t,transactionData:n});const s=rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{const{nestedTransactions:r,txParams:s}=e,i=s.from,a=r?.[t];if(!a)throw new Error(`Nested transaction not found with index - ${t}`);a.data=n;const o=(0,Ft.generateEIP7702BatchTransaction)(i,r);e.txParams.data=o.data}),i=(0,ht.cloneDeep)({...s,txParams:{...s.txParams,gas:undefined}});return await rt(this,r,"m",ze).call(this,i),rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{e.txParams.gas=i.txParams.gas,e.simulationFails=i.simulationFails,e.gasLimitNoBuffer=i.gasLimitNoBuffer}),s.txParams.data}updateBatchTransactions({transactionId:e,batchTransactions:t}){(0,_t.projectLogger)("Updating batch transactions",{transactionId:e,batchTransactions:t}),rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{e.batchTransactions=t})}updateSelectedGasFeeToken(e,t){rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{const n=e.gasFeeTokens?.some(e=>e.tokenAddress.toLowerCase()===t?.toLowerCase());if(t&&!n)throw new Error(`No matching gas fee token found with address - ${t}`);e.selectedGasFeeToken=t})}updateRequiredTransactionIds({transactionId:e,requiredTransactionIds:t,append:n}){rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{const{requiredTransactionIds:r}=e;e.requiredTransactionIds=[...r&&!1!==n?r:[],...t]})}emulateNewTransaction(e){const t=this.state.transactions.find(t=>t.id===e);t&&(t.type===Ct.TransactionType.swap?this.messenger.publish("TransactionController:transactionNewSwap",{transactionMeta:t}):t.type===Ct.TransactionType.swapApproval&&this.messenger.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:t}))}emulateTransactionUpdate(e){const t={...e,txParams:{...e.txParams,from:this.messenger.call("AccountsController:getSelectedAccount").address}};this.state.transactions.some(e=>e.id===t.id)||this.update(e=>{e.transactions.push(t)}),this.updateTransaction(t,"Generated from user operation"),this.messenger.publish("TransactionController:transactionStatusUpdated",{transactionMeta:t})}}n.TransactionController=Zt,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,E=new WeakMap,v=new WeakMap,T=new WeakMap,x=new WeakMap,S=new WeakMap,P=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,_=new WeakMap,C=new WeakMap,j=new WeakMap,B=new WeakMap,F=new WeakMap,O=new WeakMap,R=new WeakMap,L=new WeakMap,M=new WeakMap,N=new WeakMap,G=new WeakMap,D=new WeakMap,H=new WeakMap,U=new WeakMap,q=new WeakMap,Ae=new WeakMap,r=new WeakSet,V=async function({actionId:e,afterSubmit:t,estimatedBaseFee:n,gasValues:s,label:i,prepareTransactionParams:a,rate:o,transactionId:c,transactionType:u}){if(rt(this,r,"m",be).call(this,e))return;s&&(s=(0,zt.normalizeGasFeeValues)(s),(0,zt.validateGasValues)(s)),(0,_t.projectLogger)(`Creating ${i} transaction`,c,s);const l=rt(this,r,"m",se).call(this,c);if(!l)return;if(!rt(this,N,"f"))throw new Error("No sign method defined.");const d=(0,qt.getTransactionParamsWithIncreasedGasFee)(l.txParams,o,s);a?.(d);const f=(0,Ut.prepareTransaction)(l.chainId,d),h=await rt(this,N,"f").call(this,f,l.txParams.from),p=rt(this,r,"m",we).call(this,l,h),m=(0,Ut.serializeTransaction)(h),g=d.maxFeePerGas??d.gasPrice,b=d.maxFeePerGas?p.txParams.maxFeePerGas:p.txParams.gasPrice;(0,_t.projectLogger)(`Submitting ${i} transaction`,{oldFee:b,newFee:g,txParams:d});const{networkClientId:y}=l,w=rt(this,r,"m",le).call(this,{networkClientId:y}),E={...p,actionId:e,estimatedBaseFee:n,id:(0,pt.v1)(),originalGasEstimate:l.txParams.gas,originalType:l.type,rawTx:m,time:Date.now(),txParams:d,type:u},v=await rt(this,r,"m",Oe).call(this,w,{...E,origin:i});E.hash=v,rt(this,r,"m",z).call(this,E),this.messenger.publish(`${Xt}:transactionApproved`,{transactionMeta:E,actionId:e}),this.messenger.publish(`${Xt}:transactionSubmitted`,{transactionMeta:E,actionId:e}),t?.(E)},$=async function(e,t){if(!rt(this,N,"f"))throw new Error("No sign method defined.");const n=(0,zt.normalizeTransactionParams)(t),r=(0,zt.isEIP1559Transaction)(n)?Ct.TransactionEnvelopeType.feeMarket:Ct.TransactionEnvelopeType.legacy,s={...n,type:r,gasLimit:n.gas,chainId:e},{from:i}=s,a=(0,Ut.prepareTransaction)(e,s),o=await rt(this,N,"f").call(this,a,i);return(0,Ut.serializeTransaction)(o)},z=function(e){(0,Kt.validateTxParams)(e.txParams),this.update(t=>{t.transactions=rt(this,r,"m",ee).call(this,[...t.transactions,e])})},K=async function(e,{traceContext:t}={}){const n=e.txParams.type!==Ct.TransactionEnvelopeType.legacy&&await rt(this,r,"m",Ee).call(this,e.networkClientId),{networkClientId:s}=e,i=rt(this,r,"m",le).call(this,{networkClientId:s}),a=rt(this,r,"m",de).call(this,{networkClientId:s});await rt(this,U,"f").call(this,{name:"Update Gas",parentContext:t},async()=>{await rt(this,r,"m",ze).call(this,e)}),await rt(this,U,"f").call(this,{name:"Update Gas Fees",parentContext:t},async()=>await(0,Nt.updateGasFees)({eip1559:n,ethQuery:i,gasFeeFlows:rt(this,d,"f"),getGasFeeEstimates:rt(this,g,"f"),getSavedGasFees:rt(this,w,"f").bind(this),messenger:this.messenger,txMeta:e})),await rt(this,U,"f").call(this,{name:"Update Layer 1 Gas Fees",parentContext:t},async()=>await(0,Dt.updateTransactionLayer1GasFee)({layer1GasFeeFlows:rt(this,C,"f"),messenger:this.messenger,provider:a,transactionMeta:e}))},W=function(){this.clearUnapprovedTransactions(),rt(this,r,"m",X).call(this)},X=function(){const e=this.state.transactions.filter(e=>[Ct.TransactionStatus.approved,Ct.TransactionStatus.signed].includes(e.status));for(const t of e){rt(this,r,"m",Ze).call(this,t,new Error("Transaction incomplete at startup"));const e=t.requiredTransactionIds??[];for(const t of e){const e=rt(this,r,"m",se).call(this,t);e&&!rt(this,r,"m",te).call(this,e.status)&&rt(this,r,"m",Ze).call(this,e,new Error("Parent transaction incomplete at startup"))}}},J=async function(e,{actionId:t,isExisting:n=!1,publishHook:s,requireApproval:i,shouldShowRequest:a=!0,traceContext:o}){const{id:c,isStateOnly:u}=e;if(u)return rt(this,r,"m",Ne).call(this,{transactionId:c,skipValidation:!0},e=>{e.status=Ct.TransactionStatus.submitted,e.submittedTime=(new Date).getTime()}),"";let l;const{meta:d,isCompleted:f}=rt(this,r,"m",oe).call(this,c),h=f?Promise.resolve(d):rt(this,r,"m",ye).call(this,c);if(d&&!n&&!f)try{if(!1!==i){const t=await rt(this,U,"f").call(this,{name:"Await Approval",parentContext:o},t=>rt(this,r,"m",re).call(this,e,{shouldShowRequest:a,traceContext:t}));l=t.resultCallbacks;const n=t.value,s=n?.txMeta;s&&((0,_t.projectLogger)("Updating transaction with approval data",{customNonce:s.customNonceValue,params:s.txParams}),this.updateTransaction(s,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:n}=rt(this,r,"m",oe).call(this,c);if(!n){const e=await rt(this,r,"m",Z).call(this,c,o,s);e===Jt.SkippedViaBeforePublishHook&&l&&l.success();const n=rt(this,r,"m",se).call(this,c);e===Jt.Approved&&this.messenger.publish(`${Xt}:transactionApproved`,{transactionMeta:n,actionId:t})}}catch(e){const n=e,{isCompleted:s}=rt(this,r,"m",oe).call(this,c);s||(rt(this,r,"m",Xe).call(this,n)?rt(this,r,"m",Je).call(this,c,t,n):rt(this,r,"m",Ze).call(this,d,n,t))}finally{rt(this,D,"f").delete(c)}const p=await h;switch(p?.status){case Ct.TransactionStatus.failed:{const e=p.error;throw l?.error(e),lt.rpcErrors.internal(e.message)}case Ct.TransactionStatus.submitted:return l?.success(),p.hash;default:{const e=lt.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(p??c)}`);throw l?.error(e),e}}},Z=async function(e,t,n){let s,i,a=rt(this,r,"m",ie).call(this,e);(0,_t.projectLogger)("Approving transaction",a);try{if(!rt(this,N,"f"))return rt(this,r,"m",Ze).call(this,a,new Error("No sign method defined.")),Jt.NotApproved;if(!a.chainId)return rt(this,r,"m",Ze).call(this,a,new Error("No chainId defined.")),Jt.NotApproved;if(rt(this,o,"f").has(e))return(0,_t.projectLogger)("Skipping approval as signing in progress",e),Jt.NotApproved;rt(this,o,"f").add(e),s=()=>rt(this,o,"f").delete(e);const{networkClientId:c}=a,l=rt(this,r,"m",le).call(this,{networkClientId:c}),[d,f]=await(0,Ht.getNextNonce)(a,e=>rt(this,B,"f").getNonceLock(e,a.networkClientId));i=f,a=rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{const{chainId:t,txParams:n}=e,{gas:r,type:s}=n;e.status=Ct.TransactionStatus.approved,e.txParams.chainId=t,e.txParams.gasLimit=r,e.txParams.nonce=d,!s&&(0,zt.isEIP1559Transaction)(n)&&(e.txParams.type=Ct.TransactionEnvelopeType.feeMarket)}),rt(this,r,"m",Te).call(this,a);const h=await rt(this,U,"f").call(this,{name:"Sign",parentContext:t},()=>rt(this,r,"m",ve).call(this,a));if(a=rt(this,r,"m",ie).call(this,e),!await rt(this,u,"f").call(this,a))return(0,_t.projectLogger)("Skipping publishing transaction based on hook"),this.messenger.publish(`${Xt}:transactionPublishingSkipped`,a),Jt.SkippedViaBeforePublishHook;if(!h&&!a.isExternalSign)return Jt.NotApproved;let p;const m=a.type===Ct.TransactionType.swap;m&&((0,_t.projectLogger)("Determining pre-transaction balance"),p=await(0,at.query)(l,"getBalance",[a.txParams.from])),(0,_t.projectLogger)("Publishing transaction",a.txParams),i?.(),i=undefined;let g=rt(this,r,"m",Qe).bind(this,{ethQuery:l,publishHookOverride:n,traceContext:t});if(a.batchTransactions?.length){(0,_t.projectLogger)("Found batch transactions",a.batchTransactions);g=new At.ExtraTransactionsPublishHook({addTransactionBatch:this.addTransactionBatch.bind(this),getTransaction:rt(this,r,"m",ie).bind(this),originalPublishHook:g}).getHook()}const{transactionHash:b}=await g(a,h??"0x");return a=rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{e.hash=b,e.status=Ct.TransactionStatus.submitted,e.submittedTime=(new Date).getTime(),m&&(e.preTxBalance=p,(0,_t.projectLogger)("Updated pre-transaction balance",p))}),this.messenger.publish(`${Xt}:transactionSubmitted`,{transactionMeta:a}),this.messenger.publish(`${Xt}:transactionFinished`,a),rt(this,x,"f").emit(`${e}:finished`,a),rt(this,r,"m",Te).call(this,a),Jt.Approved}catch(e){return rt(this,r,"m",Ze).call(this,a,e),Jt.NotApproved}finally{s?.(),i?.()}},Y=async function(e,t,{skipSubmitHistory:n}={}){try{const s=await(0,at.query)(e,"sendRawTransaction",[t.rawTx]);return!0!==n&&rt(this,r,"m",$e).call(this,t,s),s}catch(e){const t=e,n=t?.data?.message??t?.message??String(e);throw new Error(n)}},Q=function(e,t,n){const s=rt(this,r,"m",se).call(this,e);if(!s)return;rt(this,r,"m",We).call(this,e);const i={...s,status:Ct.TransactionStatus.rejected,error:(0,zt.normalizeTxError)(n??lt.providerErrors.userRejectedRequest())};this.messenger.publish(`${Xt}:transactionFinished`,i),rt(this,x,"f").emit(`${s.id}:finished`,i),this.messenger.publish(`${Xt}:transactionRejected`,{transactionMeta:i,actionId:t}),rt(this,r,"m",Te).call(this,i)},ee=function(e){const t=new Set,n=[...e].sort((e,t)=>e.time>t.time?-1:1).filter(e=>{const{chainId:n,status:s,txParams:i,time:a}=e;if(i){const e=`${String(i.nonce)}-${(0,at.convertHexToDecimal)(n)}-${new Date(a).toDateString()}`;if(t.has(e))return!0;if(t.size<rt(this,q,"f")||!rt(this,r,"m",te).call(this,s))return t.add(e),!0}return!1});return n.reverse(),n},te=function(e){return e===Ct.TransactionStatus.rejected||e===Ct.TransactionStatus.confirmed||e===Ct.TransactionStatus.failed||e===Ct.TransactionStatus.dropped},ne=function(e){return[Ct.TransactionStatus.confirmed,Ct.TransactionStatus.failed,Ct.TransactionStatus.rejected,Ct.TransactionStatus.submitted].includes(e)},re=async function(e,{shouldShowRequest:t,traceContext:n}){const s=rt(this,r,"m",ae).call(this,e),{origin:i}=e,a=at.ApprovalType.Transaction,o={txId:e.id};return await rt(this,U,"f").call(this,{name:"Notification Display",id:s,parentContext:n}),await this.messenger.call("ApprovalController:addRequest",{id:s,origin:i??at.ORIGIN_METAMASK,type:a,requestData:o,expectsResult:!0},t)},se=function(e){const{transactions:t}=this.state;return t.find(({id:t})=>t===e)},ie=function(e,t="TransactionController"){const n=rt(this,r,"m",se).call(this,e);if(!n)throw new Error(`${t}: No transaction found with id ${e}`);return n},ae=function(e){return String(e.id)},oe=function(e){const t=rt(this,r,"m",se).call(this,e);if(!t)return{meta:undefined,isCompleted:!1};return{meta:t,isCompleted:rt(this,r,"m",ne).call(this,t.status)}},ce=function(e){return rt(this,B,"f").getNetworkClient({networkClientId:e}).configuration.chainId},ue=function({chainId:e,networkClientId:t}){return t||rt(this,B,"f").getNetworkClient({chainId:e}).id},le=function({chainId:e,networkClientId:t}){return new ot.default(rt(this,r,"m",de).call(this,{chainId:e,networkClientId:t}))},de=function({chainId:e,networkClientId:t}){return rt(this,B,"f").getNetworkClient({chainId:e,networkClientId:t}).provider},fe=function(e){if(!e.length)return;const t=[];for(const n of e){const{chainId:e}=n;try{const s=rt(this,r,"m",ue).call(this,{chainId:e});t.push({...n,networkClientId:s})}catch(t){(0,_t.projectLogger)("Failed to get network client ID for incoming transaction",{chainId:e,error:t})}}this.update(e=>{const{transactions:n}=e;e.transactions=rt(this,r,"m",ee).call(this,[...t,...n]),(0,_t.projectLogger)("Added incoming transactions to state",t.length,t)}),this.messenger.publish(`${Xt}:incomingTransactionsReceived`,t)},he=function(e,t){if(!t||t===at.ORIGIN_METAMASK)return undefined;const{gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,gas:i}=e;if(n===undefined&&r===undefined&&s===undefined&&i===undefined)return undefined;const a={};return n!==undefined?a.gasPrice=n:r===undefined&&s===undefined||(a.maxFeePerGas=r,a.maxPriorityFeePerGas=s),i!==undefined&&(a.gas=i),a},pe=function(e){const{chainId:t}=e,{transactions:n}=this.state,s=e?.txParams?.from,i=n.filter(e=>e.txParams.from===s&&e.chainId===t),a=i.filter(e=>e.status===Ct.TransactionStatus.confirmed),o=i.filter(e=>e.status===Ct.TransactionStatus.submitted);return(0,Ot.validateConfirmedExternalTransaction)(e,a,o),this.update(t=>{t.transactions=rt(this,r,"m",ee).call(this,[...t.transactions,e])}),e},me=function(e){const t=rt(this,r,"m",se).call(this,e);if(!t)return;const n=t.txParams?.nonce,s=t.txParams?.from,{chainId:i}=t,a=this.state.transactions.filter(t=>t.id!==e&&t.txParams.from===s&&n&&t.txParams.nonce===n&&t.chainId===i&&t.type!==Ct.TransactionType.incoming&&t.isTransfer===undefined),o=a.map(e=>e.id);if(0!==a.length){this.update(e=>{for(const n of e.transactions)o.includes(n.id)&&(n.replacedBy=t?.hash,n.replacedById=t?.id)});for(const e of this.state.transactions)o.includes(e.id)&&e.status!==Ct.TransactionStatus.failed&&rt(this,r,"m",ge).call(this,e)}},ge=function(e){const t={...e,status:Ct.TransactionStatus.dropped};this.messenger.publish(`${Xt}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),rt(this,r,"m",Te).call(this,t)},be=function(e){return this.state.transactions.find(t=>e&&t.actionId===e)},ye=async function(e){return new Promise(t=>{rt(this,x,"f").once(`${e}:finished`,e=>{t(e)})})},we=function(e,t){const n=(0,ht.cloneDeep)(e);for(const e of["r","s","v"]){const r=t[e];r!==undefined&&null!==r&&(n[e]=(0,dt.add0x)(r.toString(16)))}return n},Ee=async function(e){const t=await rt(this,p,"f").call(this,e),n=await rt(this,h,"f").call(this);return t&&n},ve=async function(e){let t=e;const{id:n}=t;(0,_t.projectLogger)("Calling before sign hook",t);const{updateTransaction:s}=await rt(this,l,"f").call(this,{transactionMeta:t})??{};s&&(rt(this,r,"m",Ne).call(this,{transactionId:n,skipResimulateCheck:!0},s),(0,_t.projectLogger)("Updated transaction after before sign hook")),t=rt(this,r,"m",ie).call(this,n);const{networkClientId:a}=t,c=rt(this,r,"m",le).call(this,{networkClientId:a});await(0,Mt.checkGasFeeTokenBeforePublish)({ethQuery:c,fetchGasFeeTokens:async e=>(await rt(this,r,"m",et).call(this,e)).gasFeeTokens,transaction:t,updateTransaction:(e,t)=>rt(this,r,"m",Ne).call(this,{transactionId:e},t)}),t=rt(this,r,"m",ie).call(this,n);const{chainId:u,isExternalSign:d,txParams:h}=t;if(d)return(0,_t.projectLogger)("Skipping sign as signed externally"),undefined;const{authorizationList:p,from:m}=h,g=await(0,Ft.signAuthorizationList)({authorizationList:p,messenger:this.messenger,transactionMeta:t});g&&rt(this,r,"m",Ne).call(this,{transactionId:n},e=>{e.txParams.authorizationList=g}),t=rt(this,r,"m",ie).call(this,n);const b=rt(this,r,"m",ie).call(this,n),{txParams:y}=b,w=(0,Ut.prepareTransaction)(u,y);rt(this,o,"f").add(n),(0,_t.projectLogger)("Signing transaction",y);const E=await new Promise((e,t)=>{rt(this,N,"f")?.call(this,w,m,...rt(this,f,"f").call(this,b)).then(e,t),rt(this,G,"f").set(n,()=>t(new Error("Signing aborted by user")))});if(rt(this,G,"f").delete(n),!E)return(0,_t.projectLogger)("Skipping signed status as no signed transaction"),undefined;const v=(0,ht.cloneDeep)(b);if(!rt(this,i,"f").call(this,v,E))return this.updateTransaction(v,"TransactionController#signTransaction - Update after sign"),(0,_t.projectLogger)("Skipping signed status based on hook"),undefined;const T={...rt(this,r,"m",we).call(this,v,E),status:Ct.TransactionStatus.signed,txParams:y};this.updateTransaction(T,"TransactionController#approveTransaction - Transaction signed"),rt(this,r,"m",Te).call(this,T);const x=(0,Ut.serializeTransaction)(E),S=(0,ht.merge)({},T,{rawTx:x});return this.updateTransaction(S,"TransactionController#approveTransaction - RawTransaction added"),x},Te=function(e){this.messenger.publish(`${Xt}:transactionStatusUpdated`,{transactionMeta:e})},xe=function(e,t,n){return(0,Ht.getAndFormatTransactionsForNonceTracker)(n,t,e,this.state.transactions)},Se=function(e){(0,_t.projectLogger)("Processing confirmed transaction",e.id),rt(this,r,"m",me).call(this,e.id),this.messenger.publish(`${Xt}:transactionConfirmed`,e),rt(this,r,"m",Te).call(this,e),rt(this,r,"m",Pe).call(this,e).catch(e=>{throw(0,_t.projectLogger)("Error while updating post balance",e),e})},Pe=async function(e){try{const{networkClientId:t,type:n}=e;if(n!==Ct.TransactionType.swap)return;const s=rt(this,r,"m",le).call(this,{networkClientId:t}),{updatedTransactionMeta:i,approvalTransactionMeta:a}=await(0,Vt.updatePostTransactionBalance)(e,{ethQuery:s,getTransaction:rt(this,r,"m",se).bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messenger.publish(`${Xt}:postTransactionBalanceUpdated`,{transactionMeta:i,approvalTransactionMeta:a})}catch(e){(0,_t.projectLogger)("Error while updating post transaction balance",e)}},ke=function({provider:e,blockTracker:t,chainId:n}){return new ut.NonceTracker({provider:e,blockTracker:t,getPendingTransactions:rt(this,r,"m",Fe).bind(this,n),getConfirmedTransactions:rt(this,r,"m",xe).bind(this,[Ct.TransactionStatus.confirmed],n)})},Ie=function({provider:e,blockTracker:t,chainId:n,networkClientId:s}){const i=new ot.default(e),a=new kt.PendingTransactionTracker({blockTracker:t,getChainId:()=>n,getEthQuery:()=>i,getGlobalLock:()=>rt(this,B,"f").acquireNonceLockForChainIdKey({chainId:n}),getNetworkClientId:()=>s,getTransactions:()=>this.state.transactions,hooks:{beforeCheckPendingTransaction:rt(this,c,"f").bind(this)},isResubmitEnabled:rt(this,F,"f").isResubmitEnabled,isTimeoutEnabled:rt(this,_,"f"),messenger:this.messenger,publishTransaction:(e,t)=>rt(this,r,"m",Y).call(this,e,t,{skipSubmitHistory:!0})});return rt(this,r,"m",Be).call(this,a),a},_e=function(){rt(this,B,"f").stopAllTracking()},Ce=function(e){e.hub.on("transactions",rt(this,r,"m",fe).bind(this))},je=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},Be=function(e){e.hub.on("transaction-confirmed",rt(this,r,"m",Se).bind(this)),e.hub.on("transaction-dropped",rt(this,r,"m",ge).bind(this)),e.hub.on("transaction-failed",rt(this,r,"m",Ze).bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},Fe=function(e,t){return[...rt(this,r,"m",xe).call(this,[Ct.TransactionStatus.approved,Ct.TransactionStatus.signed,Ct.TransactionStatus.submitted],t,e),...rt(this,m,"f").call(this,t,e)]},Oe=async function(e,t){try{return await rt(this,r,"m",Y).call(this,e,t)}catch(e){if(rt(this,r,"m",Re).call(this,e))throw new Error("Previous transaction is already confirmed");throw e}},Re=function(e){return Boolean(e?.message?.includes("nonce too low"))||Boolean(e?.data?.message?.includes("nonce too low"))},Le=function(){return rt(this,H,"f")?[new Et.TestGasFeeFlow]:[new yt.RandomisedEstimationsGasFeeFlow,new gt.LineaGasFeeFlow,new mt.DefaultGasFeeFlow]},Me=function(){return[new bt.OptimismLayer1GasFeeFlow,new wt.ScrollLayer1GasFeeFlow]},Ne=function({transactionId:e,skipValidation:t,skipResimulateCheck:n},s){let i;this.update(r=>{const a=r.transactions.findIndex(({id:t})=>t===e);if(-1===a)throw new Error(`Cannot update transaction as ID not found - ${e}`);let o=r.transactions[a];const c=(0,ht.cloneDeep)(o);o=s(o)??o,!0!==t&&(o.txParams=(0,zt.normalizeTransactionParams)(o.txParams),(0,Kt.validateTxParams)(o.txParams)),!n&&rt(this,I,"f").call(this)&&(i=(0,It.shouldResimulate)(c,o)),r.transactions[a]=o});const a=rt(this,r,"m",se).call(this,e);return i?.resimulate&&rt(this,r,"m",Ge).call(this,a,{blockTime:i.blockTime}).catch(e=>{throw(0,_t.projectLogger)("Error during re-simulation",e),e}),a},Ge=async function(e,{blockTime:t,traceContext:n}={}){const{chainId:s,id:i,nestedTransactions:a,networkClientId:o,simulationData:c,txParams:u}=e;let l,d={error:{code:Ct.SimulationErrorCode.Disabled,message:"Simulation disabled"},tokenBalanceChanges:[]},f=[],h=!1;const p=rt(this,D,"f").has(i);if(rt(this,I,"f").call(this)&&!p){const i=await rt(this,U,"f").call(this,{name:"Simulate",parentContext:n},()=>(0,jt.getBalanceChanges)({blockTime:t,chainId:s,ethQuery:rt(this,r,"m",le).call(this,{networkClientId:o}),getSimulationConfig:(t,n)=>rt(this,E,"f").call(this,t,{txMeta:e,...n}),nestedTransactions:a,txParams:u}));d=i.simulationData,l=i.gasUsed,t&&c&&(0,It.hasSimulationDataChanged)(c,d)&&(d={...d,isUpdatedAfterSecurityCheck:!0});const p=await rt(this,r,"m",et).call(this,e);f=p?.gasFeeTokens??[],h=p?.isGasFeeSponsored??!1}if(!rt(this,r,"m",se).call(this,i))return void(0,_t.projectLogger)("Cannot update simulation data as transaction not found",i,d);const m=rt(this,r,"m",Ne).call(this,{transactionId:i,skipResimulateCheck:Boolean(t)},e=>{e.gasFeeTokens=f,e.isGasFeeSponsored=h,e.gasUsed=l,p||(e.simulationData=d)});(0,_t.projectLogger)("Updated simulation data",i,m),await rt(this,r,"m",Ye).call(this,m)},De=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,layer1GasFee:s}){rt(this,r,"m",Ne).call(this,{transactionId:e},e=>{(0,Tt.updateTransactionGasProperties)({txMeta:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,isTxParamsGasFeeUpdatesEnabled:rt(this,S,"f"),layer1GasFee:s})})},He=function({transactionBatchId:e,gasFeeEstimates:t}){rt(this,r,"m",Ue).call(this,e,e=>({...e,gasFeeEstimates:t}))},Ue=function(e,t){this.update(n=>{const r=n.transactionBatches.findIndex(t=>t.id===e);if(-1===r)throw new Error(`Cannot update batch, ID not found - ${e}`);const s=n.transactionBatches[r],i=t(s);n.transactionBatches[r]=i??s})},qe=function(){return this.messenger.call("AccountsController:getSelectedAccount")},Ve=function(){const e=this.messenger.call("AccountsController:getState");return Object.values(e.internalAccounts?.accounts??{}).filter(e=>"eip155:eoa"===e.type).map(e=>e.address)},$e=function(e,t){const{chainId:n,networkClientId:r,origin:s,rawTx:i,txParams:a}=e,{networkConfigurationsByChainId:o}=rt(this,b,"f").call(this),c=o[n],u=c?.rpcEndpoints.find(e=>e.networkClientId===r),l=u?.url,d={chainId:n,hash:t,networkType:u?.name??r,networkUrl:l,origin:s,rawTransaction:i,time:Date.now(),transaction:a};(0,_t.projectLogger)("Updating submit history",d),this.update(e=>{const{submitHistory:t}=e;100===t.length&&t.pop(),t.unshift(d)})},ze=async function(e){const{chainId:t,networkClientId:n}=e,s=rt(this,B,"f").getNetworkClient({networkClientId:n}).configuration.type===ct.NetworkClientType.Custom,i=rt(this,r,"m",le).call(this,{networkClientId:n});await(0,Lt.updateGas)({chainId:t,ethQuery:i,isCustomNetwork:s,isSimulationEnabled:rt(this,I,"f").call(this),getSimulationConfig:rt(this,E,"f"),messenger:this.messenger,txMeta:e})},Ke=function(){this.messenger.registerActionHandler(`${Xt}:addTransaction`,this.addTransaction.bind(this)),this.messenger.registerActionHandler(`${Xt}:addTransactionBatch`,this.addTransactionBatch.bind(this)),this.messenger.registerActionHandler(`${Xt}:confirmExternalTransaction`,this.confirmExternalTransaction.bind(this)),this.messenger.registerActionHandler(`${Xt}:emulateNewTransaction`,this.emulateNewTransaction.bind(this)),this.messenger.registerActionHandler(`${Xt}:emulateTransactionUpdate`,this.emulateTransactionUpdate.bind(this)),this.messenger.registerActionHandler(`${Xt}:estimateGas`,this.estimateGas.bind(this)),this.messenger.registerActionHandler(`${Xt}:estimateGasBatch`,this.estimateGasBatch.bind(this)),this.messenger.registerActionHandler(`${Xt}:getGasFeeTokens`,rt(this,r,"m",tt).bind(this)),this.messenger.registerActionHandler(`${Xt}:getNonceLock`,this.getNonceLock.bind(this)),this.messenger.registerActionHandler(`${Xt}:getTransactions`,this.getTransactions.bind(this)),this.messenger.registerActionHandler(`${Xt}:updateCustodialTransaction`,this.updateCustodialTransaction.bind(this)),this.messenger.registerActionHandler(`${Xt}:updateTransaction`,this.updateTransaction.bind(this))},We=function(e){this.update(t=>{const n=t.transactions.filter(({id:t})=>t!==e);t.transactions=rt(this,r,"m",ee).call(this,n)})},Xe=function(e){return[lt.errorCodes.provider.userRejectedRequest,Kt.ErrorCode.RejectedUpgrade].includes(e.code)},Je=function(e,t,n){if(rt(this,r,"m",Q).call(this,e,t,n),n.code===lt.errorCodes.provider.userRejectedRequest)throw lt.providerErrors.userRejectedRequest({message:"MetaMask Tx Signature: User denied transaction signature.",data:n?.data});throw n},Ze=function(e,t,n){let s;try{s=rt(this,r,"m",Ne).call(this,{transactionId:e.id,skipValidation:!0},e=>{e.status=Ct.TransactionStatus.failed,e.error=(0,zt.normalizeTxError)(t)})}catch(n){(0,_t.projectLogger)("Failed to mark transaction as failed",n),s={...e,status:Ct.TransactionStatus.failed,error:(0,zt.normalizeTxError)(t)}}this.messenger.publish(`${Xt}:transactionFailed`,{actionId:n,error:t.message,transactionMeta:s}),rt(this,r,"m",Te).call(this,s),this.messenger.publish(`${Xt}:transactionFinished`,s),rt(this,x,"f").emit(`${e.id}:finished`,s)},Ye=async function(e){(0,_t.projectLogger)("Calling afterSimulate hook",e);const{id:t}=e,n=await rt(this,a,"f").call(this,{transactionMeta:e}),{skipSimulation:s,updateTransaction:i}=n??{};if(s?rt(this,D,"f").add(t):!1===s&&rt(this,D,"f").delete(t),!i)return;const o=rt(this,r,"m",Ne).call(this,{transactionId:t,skipResimulateCheck:!0},e=>{e.txParamsOriginal=(0,ht.cloneDeep)(e.txParams),i(e)});(0,_t.projectLogger)("Updated transaction with afterSimulate data",o)},Qe=async function({ethQuery:e,publishHookOverride:t,traceContext:n},s,i){let a;return await rt(this,U,"f").call(this,{name:"Publish",parentContext:n},async()=>{const n=t??rt(this,R,"f");({transactionHash:a}=await n(s,i)),a??(a=await rt(this,r,"m",Y).call(this,e,{...s,rawTx:i}))}),(0,_t.projectLogger)("Publish successful",a),{transactionHash:a}},et=async function(e){const{chainId:t}=e;return await(0,Mt.getGasFeeTokens)({chainId:t,getSimulationConfig:rt(this,E,"f"),isEIP7702GasFeeTokensEnabled:rt(this,P,"f"),messenger:this.messenger,publicKeyEIP7702:rt(this,O,"f"),transactionMeta:e})},tt=async function(e){const{chainId:t,data:n,from:s,to:i,value:a}=e,o=rt(this,r,"m",le).call(this,{chainId:t}),c={chainId:t,delegationAddress:await(0,Ft.getDelegationAddress)(s,o),isExternalSign:!0,txParams:{data:n,from:s,to:i,value:a}};return(await rt(this,r,"m",et).call(this,c)).gasFeeTokens}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/TransactionController.cjs"}],[2972,{"../errors.cjs":2975,"../logger.cjs":2995,"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountTransactions=n.getAccountAddressRelationship=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("../errors.cjs"),a=e("../logger.cjs"),o="https://accounts.api.cx.metamask.io",c=`${o}/v1/accounts/`,u="x-metamask-clientproduct",l="metamask-transaction-controller",d=[1,10,56,137,8453,42161,59144,534352,1329,143],f=(0,s.createModuleLogger)(a.projectLogger,"accounts-api");n.getAccountAddressRelationship=async function(e){const{chainId:t,from:n,to:s}=e;if(!d.includes(t))throw f("Unsupported chain ID for account relationship API",t),new i.FirstTimeInteractionError("Unsupported chain ID");const a=`${o}/v1/networks/${t}/accounts/${n}/relationships/${s}`;f("Getting account address relationship",{request:e,url:a});const c={[u]:l},h=await(0,r.successfulFetch)(a,{headers:c});if(204===h.status)return{count:0};const p=await h.json();if(f("Retrieved account address relationship",p),p.error){const{code:e,message:t}=p.error;throw new i.FirstTimeInteractionError(t,e)}return p},n.getAccountTransactions=async function(e){const{address:t,chainIds:n,cursor:s,endTimestamp:i,sortDirection:a,startTimestamp:o,tags:d}=e;let h=`${c}${t}/transactions`;const p=[];if(n){const e=n.join(",");p.push(`networks=${e}`)}o&&p.push(`startTimestamp=${o}`),i&&p.push(`endTimestamp=${i}`),s&&p.push(`cursor=${s}`),a&&p.push(`sortDirection=${a}`),p.length&&(h+=`?${p.join("&")}`),f("Getting account transactions",{request:e,url:h});const m=[l,...d??[]].join("__"),g={[u]:m},b=await(0,r.successfulFetch)(h,{headers:g}),y=await b.json();return f("Retrieved account transactions",y),y}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/api/accounts-api.cjs"}],[2973,{"../constants.cjs":2974,"../errors.cjs":2975,"../logger.cjs":2995,"@metamask/controller-utils":1449,"@metamask/utils":3116,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.simulateTransactions=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("lodash"),a=e("../constants.cjs"),o=e("../errors.cjs"),c=e("../logger.cjs"),u=(0,s.createModuleLogger)(c.projectLogger,"simulation-api"),l="networks";let d=0;function f(e){return"https://tx-sentinel-{0}.api.cx.metamask.io/".replace("{0}",e)}n.simulateTransactions=async function(e,t){let n=await async function(e){const t=await async function(){const e=`${f("ethereum-mainnet")}${l}`,t=await fetch(e);return t.json()}(),n=(0,r.convertHexToDecimal)(e),s=t[n];if(!s?.confirmations)throw u("Chain is not supported",e),new o.SimulationChainNotSupportedError(e);return f(s.network)}(e);const{newUrl:s,authorization:c}=await t.getSimulationConfig(n)||{};s&&(n=s);const h=d;d+=1;const p=function(e){const t=(0,i.cloneDeep)(e);for(const e of t.transactions){const n=e.to?.toLowerCase();a.DELEGATION_MANAGER_ADDRESSES.includes(n)&&(t.overrides=t.overrides??{},t.overrides[n]={code:a.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS})}return t}(t);u("Sending request",n,t);const m={"Content-Type":"application/json"};c&&(m.Authorization=c);const g=await fetch(n,{method:"POST",headers:m,body:JSON.stringify({id:String(h),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[p]})}),b=await g.json();if(u("Received response",b),b.error){const{code:e,message:t}=b.error;throw new o.SimulationError(t,e)}return b?.result}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/api/simulation-api.cjs"}],[2974,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS=n.DELEGATION_MANAGER_ADDRESSES=n.ABI_IERC7821=n.ABI_SIMULATION_ERC721_LEGACY=n.ABI_SIMULATION_ERC20_WRAPPED=n.CHAIN_IDS=void 0,n.CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",MONAD:"0x8f",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f",MEGAETH_TESTNET:"0x18c6",SEI:"0x531"},n.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],n.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}],n.ABI_IERC7821=[{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],n.DELEGATION_MANAGER_ADDRESSES=["0xdb9b1e94b5b69df7e401ddbede43491141047db3"],n.CODE_DELEGATION_MANAGER_NO_SIGNATURE_ERRORS="0x608060405234801561001057600080fd5b506004361061012c5760003560e01c806383ebb771116100ad578063acb8cc4911610071578063acb8cc491461027f578063cef6d2091461029f578063e30c3978146102b2578063f2fde38b146102c3578063ffa1ad74146102d657600080fd5b806383ebb771146102065780638456cb591461020e57806384b0196e146102165780638da5cb5b14610231578063a3f4df7e1461024257600080fd5b806358909ebc116100f457806358909ebc146101b05780635c975abb146101d157806366134607146101e3578063715018a6146101f657806379ba5097146101fe57600080fd5b80631b13cac2146101315780632d40d0521461014d5780633ed01015146101805780633f4ba83a14610195578063499340471461019d575b600080fd5b61013a60001981565b6040519081526020015b60405180910390f35b61017061015b36600461207e565b60046020526000908152604090205460ff1681565b6040519015158152602001610144565b61019361018e366004612097565b6102fa565b005b6101936103f4565b6101936101ab366004612097565b610406565b6101b9610a1181565b6040516001600160a01b039091168152602001610144565b600154600160a01b900460ff16610170565b61013a6101f1366004612097565b6104f6565b61019361050f565b610193610521565b61013a61056a565b610193610579565b61021e610589565b6040516101449796959493929190612128565b6000546001600160a01b03166101b9565b610272604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b81525081565b60405161014491906121c1565b610272604051806040016040528060018152602001603160f81b81525081565b6101936102ad36600461221f565b6105cf565b6001546001600160a01b03166101b9565b6101936102d13660046122d4565b611829565b610272604051806040016040528060058152602001640312e332e360dc1b81525081565b61030a60408201602083016122d4565b6001600160a01b03811633146103335760405163b9f0f17160e01b815260040160405180910390fd5b600061033e836104f6565b60008181526004602052604090205490915060ff1661037057604051637952fbad60e11b815260040160405180910390fd5b6000818152600460209081526040909120805460ff19169055610395908401846122d4565b6001600160a01b03166103ae60408501602086016122d4565b6001600160a01b0316827f3feadce88fc1b49db633a56fd5307ed6ee18734df83bcc4011daa720c9cd95f1866040516103e7919061241c565b60405180910390a4505050565b6103fc61189a565b6104046118c7565b565b61041660408201602083016122d4565b6001600160a01b038116331461043f5760405163b9f0f17160e01b815260040160405180910390fd5b600061044a836104f6565b60008181526004602052604090205490915060ff161561047c57604051625ecddb60e01b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191660011790556104a4908401846122d4565b6001600160a01b03166104bd60408501602086016122d4565b6001600160a01b0316827fea589ba9473ee1fe77d352c7ed919747715a5d22931b972de9b02a907c66d5dd866040516103e7919061241c565b6000610509610504836127bb565b61191c565b92915050565b61051761189a565b61040460006119b7565b60015433906001600160a01b0316811461055e5760405163118cdaa760e01b81526001600160a01b03821660048201526024015b60405180910390fd5b610567816119b7565b50565b60006105746119d0565b905090565b61058161189a565b610404611afb565b60006060806000806000606061059d611b3e565b6105a5611b6b565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b6105d7611b98565b8481811415806105e75750808414155b1561060557604051631bcaf69f60e01b815260040160405180910390fd5b6000816001600160401b0381111561061f5761061f6124ed565b60405190808252806020026020018201604052801561065257816020015b606081526020019060019003908161063d5790505b5090506000826001600160401b0381111561066f5761066f6124ed565b6040519080825280602002602001820160405280156106a257816020015b606081526020019060019003908161068d5790505b50905060005b83811015610c195760008a8a838181106106c4576106c46127c7565b90506020028101906106d691906127dd565b8101906106e39190612823565b905080516000036107d1576040805160008082526020820190925290610765565b6107526040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816107045790505b50848381518110610778576107786127c7565b602090810291909101015260006040519080825280602002602001820160405280156107ae578160200160208202803683370190505b508383815181106107c1576107c16127c7565b6020026020010181905250610c10565b808483815181106107e4576107e46127c7565b6020026020010181905250600081516001600160401b0381111561080a5761080a6124ed565b604051908082528060200260200182016040528015610833578160200160208202803683370190505b50905080848481518110610849576108496127c7565b6020026020010181905250336001600160a01b031682600081518110610871576108716127c7565b6020026020010151600001516001600160a01b0316141580156108c65750610a116001600160a01b0316826000815181106108ae576108ae6127c7565b6020026020010151600001516001600160a01b031614155b156108e457604051632d618d8160e21b815260040160405180910390fd5b60005b8251811015610a4d576000838281518110610904576109046127c7565b602002602001015190506109178161191c565b838381518110610929576109296127c7565b60200260200101818152505080602001516001600160a01b03163b6000036109a657600061099e61099461095b61056a565b86868151811061096d5761096d6127c7565b602002602001015160405161190160f01b8152600281019290925260228201526042902090565b8360a00151611bc3565b905050610a44565b60006109c56109b361056a565b85858151811061096d5761096d6127c7565b9050600082602001516001600160a01b0316631626ba7e838560a001516040518363ffffffff1660e01b81526004016109ff9291906128d3565b602060405180830381865afa158015610a1c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a4091906128f4565b5050505b506001016108e7565b5060005b8251811015610c0d5760046000838381518110610a7057610a706127c7565b60209081029190910181015182528101919091526040016000205460ff1615610aac576040516302dd502960e11b815260040160405180910390fd5b60018351610aba9190612934565b8114610bc35781610acc826001612947565b81518110610adc57610adc6127c7565b6020026020010151838281518110610af657610af66127c7565b60200260200101516040015114610b2057604051636f6a1b8760e11b815260040160405180910390fd5b600083610b2e836001612947565b81518110610b3e57610b3e6127c7565b6020026020010151600001519050610a116001600160a01b0316816001600160a01b031614158015610b9f5750806001600160a01b0316848381518110610b8757610b876127c7565b6020026020010151602001516001600160a01b031614155b15610bbd57604051632d618d8160e21b815260040160405180910390fd5b50610c05565b60001960001b838281518110610bdb57610bdb6127c7565b60200260200101516040015114610c0557604051636f6a1b8760e11b815260040160405180910390fd5b600101610a51565b50505b506001016106a8565b5060005b83811015610e3e576000838281518110610c3957610c396127c7565b6020026020010151511115610e365760005b838281518110610c5d57610c5d6127c7565b602002602001015151811015610e34576000848381518110610c8157610c816127c7565b60200260200101518281518110610c9a57610c9a6127c7565b602002602001015160600151905060005b8151811015610e2a576000828281518110610cc857610cc86127c7565b6020026020010151600001519050806001600160a01b031663414c3e33848481518110610cf757610cf76127c7565b602002602001015160200151858581518110610d1557610d156127c7565b6020026020010151604001518f8f8a818110610d3357610d336127c7565b905060200201358e8e8b818110610d4c57610d4c6127c7565b9050602002810190610d5e91906127dd565b8c8c81518110610d7057610d706127c7565b60200260200101518b81518110610d8957610d896127c7565b60200260200101518e8d81518110610da357610da36127c7565b60200260200101518c81518110610dbc57610dbc6127c7565b602002602001015160200151336040518963ffffffff1660e01b8152600401610dec98979695949392919061295a565b600060405180830381600087803b158015610e0657600080fd5b505af1158015610e1a573d6000803e3d6000fd5b5050505050806001019050610cab565b5050600101610c4b565b505b600101610c1d565b5060005b8381101561146257828181518110610e5c57610e5c6127c7565b602002602001015151600003610f1a573363d691c964898984818110610e8457610e846127c7565b90506020020135888885818110610e9d57610e9d6127c7565b9050602002810190610eaf91906127dd565b6040518463ffffffff1660e01b8152600401610ecd939291906129c5565b6000604051808303816000875af1158015610eec573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f1491908101906129e8565b5061145a565b60005b838281518110610f2f57610f2f6127c7565b602002602001015151811015611106576000848381518110610f5357610f536127c7565b60200260200101518281518110610f6c57610f6c6127c7565b602002602001015160600151905060005b81518110156110fc576000828281518110610f9a57610f9a6127c7565b6020026020010151600001519050806001600160a01b031663a145832a848481518110610fc957610fc96127c7565b602002602001015160200151858581518110610fe757610fe76127c7565b6020026020010151604001518f8f8a818110611005576110056127c7565b905060200201358e8e8b81811061101e5761101e6127c7565b905060200281019061103091906127dd565b8c8c81518110611042576110426127c7565b60200260200101518b8151811061105b5761105b6127c7565b60200260200101518e8d81518110611075576110756127c7565b60200260200101518c8151811061108e5761108e6127c7565b602002602001015160200151336040518963ffffffff1660e01b81526004016110be98979695949392919061295a565b600060405180830381600087803b1580156110d857600080fd5b505af11580156110ec573d6000803e3d6000fd5b5050505050806001019050610f7d565b5050600101610f1d565b50828181518110611119576111196127c7565b60200260200101516001848381518110611135576111356127c7565b6020026020010151516111489190612934565b81518110611158576111586127c7565b6020026020010151602001516001600160a01b031663d691c964898984818110611184576111846127c7565b9050602002013588888581811061119d5761119d6127c7565b90506020028101906111af91906127dd565b6040518463ffffffff1660e01b81526004016111cd939291906129c5565b6000604051808303816000875af11580156111ec573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261121491908101906129e8565b506000838281518110611229576112296127c7565b60200260200101515190505b801561145857600084838151811061124f5761124f6127c7565b60200260200101516001836112649190612934565b81518110611274576112746127c7565b60200260200101516060015190506000815190505b80156114455760008261129d600184612934565b815181106112ad576112ad6127c7565b6020026020010151600001519050806001600160a01b031663d3eddcc5846001856112d89190612934565b815181106112e8576112e86127c7565b602002602001015160200151856001866113029190612934565b81518110611312576113126127c7565b6020026020010151604001518f8f8a818110611330576113306127c7565b905060200201358e8e8b818110611349576113496127c7565b905060200281019061135b91906127dd565b8c8c8151811061136d5761136d6127c7565b602002602001015160018c6113829190612934565b81518110611392576113926127c7565b60200260200101518e8d815181106113ac576113ac6127c7565b602002602001015160018d6113c19190612934565b815181106113d1576113d16127c7565b602002602001015160200151336040518963ffffffff1660e01b815260040161140198979695949392919061295a565b600060405180830381600087803b15801561141b57600080fd5b505af115801561142f573d6000803e3d6000fd5b50505050508061143e90612ac7565b9050611289565b50508061145190612ac7565b9050611235565b505b600101610e42565b5060005b838110156116de576000838281518110611482576114826127c7565b60200260200101515111156116d65760008382815181106114a5576114a56127c7565b60200260200101515190505b80156116d45760008483815181106114cb576114cb6127c7565b60200260200101516001836114e09190612934565b815181106114f0576114f06127c7565b60200260200101516060015190506000815190505b80156116c157600082611519600184612934565b81518110611529576115296127c7565b6020026020010151600001519050806001600160a01b031663ed463367846001856115549190612934565b81518110611564576115646127c7565b6020026020010151602001518560018661157e9190612934565b8151811061158e5761158e6127c7565b6020026020010151604001518f8f8a8181106115ac576115ac6127c7565b905060200201358e8e8b8181106115c5576115c56127c7565b90506020028101906115d791906127dd565b8c8c815181106115e9576115e96127c7565b602002602001015160018c6115fe9190612934565b8151811061160e5761160e6127c7565b60200260200101518e8d81518110611628576116286127c7565b602002602001015160018d61163d9190612934565b8151811061164d5761164d6127c7565b602002602001015160200151336040518963ffffffff1660e01b815260040161167d98979695949392919061295a565b600060405180830381600087803b15801561169757600080fd5b505af11580156116ab573d6000803e3d6000fd5b5050505050806116ba90612ac7565b9050611505565b5050806116cd90612ac7565b90506114b1565b505b600101611466565b5060005b8381101561181d5760008382815181106116fe576116fe6127c7565b60200260200101515111156118155760005b838281518110611722576117226127c7565b60200260200101515181101561181357336001600160a01b031684838151811061174e5761174e6127c7565b6020026020010151600186858151811061176a5761176a6127c7565b60200260200101515161177d9190612934565b8151811061178d5761178d6127c7565b6020026020010151602001516001600160a01b03167f40dadaa36c6c2e3d7317e24757451ffb2d603d875f0ad5e92c5dd156573b18738685815181106117d5576117d56127c7565b602002602001015184815181106117ee576117ee6127c7565b60200260200101516040516118039190612ade565b60405180910390a3600101611710565b505b6001016116e2565b50505050505050505050565b61183161189a565b600180546001600160a01b0383166001600160a01b031990911681179091556118626000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b6000546001600160a01b031633146104045760405163118cdaa760e01b8152336004820152602401610555565b6118cf611bed565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b6000807f88c1d2ecf185adf710588203a5f263f0ff61be0d33da39792cde19ba9aa4331e83600001518460200151856040015161195c8760600151611c17565b6080808901516040805160208101989098526001600160a01b03968716908801529490931660608601529184015260a083015260c082015260e0015b60408051601f1981840301815291905280516020909101209392505050565b600180546001600160a01b031916905561056781611ce2565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611a2957507f000000000000000000000000000000000000000000000000000000000000000046145b15611a5357507f000000000000000000000000000000000000000000000000000000000000000090565b610574604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b611b03611b98565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586118ff3390565b60606105747f00000000000000000000000000000000000000000000000000000000000000006002611d32565b60606105747f00000000000000000000000000000000000000000000000000000000000000006003611d32565b600154600160a01b900460ff16156104045760405163d93c066560e01b815260040160405180910390fd5b600080600080611bd38686611ddd565b925092509250611be38282611e2a565b5090949350505050565b600154600160a01b900460ff1661040457604051638dfc202b60e01b815260040160405180910390fd5b60008082516001600160401b03811115611c3357611c336124ed565b604051908082528060200260200182016040528015611c5c578160200160208202803683370190505b50905060005b8351811015611cb257611c8d848281518110611c8057611c806127c7565b6020026020010151611ee7565b828281518110611c9f57611c9f6127c7565b6020908102919091010152600101611c62565b5080604051602001611cc49190612bcb565b60405160208183030381529060405280519060200120915050919050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b606060ff8314611d4c57611d4583611f48565b9050610509565b818054611d5890612c01565b80601f0160208091040260200160405190810160405280929190818152602001828054611d8490612c01565b8015611dd15780601f10611da657610100808354040283529160200191611dd1565b820191906000526020600020905b815481529060010190602001808311611db457829003601f168201915b50505050509050610509565b60008060008351604103611e175760208401516040850151606086015160001a611e0988828585611f87565b955095509550505050611e23565b50508151600091506002905b9250925092565b6000826003811115611e3e57611e3e612c3b565b03611e47575050565b6001826003811115611e5b57611e5b612c3b565b03611e795760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611e8d57611e8d612c3b565b03611eae5760405163fce698f760e01b815260048101829052602401610555565b6003826003811115611ec257611ec2612c3b565b03611ee3576040516335e2f38360e21b815260048101829052602401610555565b5050565b6000807f80ad7e1b04ee6d994a125f4714ca0720908bd80ed16063ec8aee4b88e9253e2d8360000151846020015180519060200120604051602001611998939291909283526001600160a01b03919091166020830152604082015260600190565b60606000611f5583612056565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611fc2575060009150600390508261204c565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015612016573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381166120425750600092506001915082905061204c565b9250600091508190505b9450945094915050565b600060ff8216601f81111561050957604051632cd44ac360e21b815260040160405180910390fd5b60006020828403121561209057600080fd5b5035919050565b6000602082840312156120a957600080fd5b81356001600160401b038111156120bf57600080fd5b820160c081850312156120d157600080fd5b9392505050565b60005b838110156120f35781810151838201526020016120db565b50506000910152565b600081518084526121148160208601602086016120d8565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e0602084015261214960e084018a6120fc565b838103604085015261215b818a6120fc565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156121af57835183529284019291840191600101612193565b50909c9b505050505050505050505050565b6020815260006120d160208301846120fc565b60008083601f8401126121e657600080fd5b5081356001600160401b038111156121fd57600080fd5b6020830191508360208260051b850101111561221857600080fd5b9250929050565b6000806000806000806060878903121561223857600080fd5b86356001600160401b038082111561224f57600080fd5b61225b8a838b016121d4565b9098509650602089013591508082111561227457600080fd5b6122808a838b016121d4565b9096509450604089013591508082111561229957600080fd5b506122a689828a016121d4565b979a9699509497509295939492505050565b80356001600160a01b03811681146122cf57600080fd5b919050565b6000602082840312156122e657600080fd5b6120d1826122b8565b6000808335601e1984360301811261230657600080fd5b83016020810192503590506001600160401b0381111561232557600080fd5b80360382131561221857600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561240e57858403601f19018a52823536899003605e1901811261239c578283fd5b880160606001600160a01b036123b1836122b8565b1686526123c0878301836122ef565b82898901526123d28389018284612334565b9250505060406123e4818401846122ef565b9350878303828901526123f8838583612334565b9d89019d97505050938601935050600101612377565b509198975050505050505050565b6020815260006001600160a01b0380612434856122b8565b16602084015280612447602086016122b8565b16604084015250604083013560608301526060830135601e1984360301811261246f57600080fd5b83016020810190356001600160401b0381111561248b57600080fd5b8060051b360382131561249d57600080fd5b60c060808501526124b260e08501828461235d565b915050608084013560a08401526124cc60a08501856122ef565b848303601f190160c08601526124e3838284612334565b9695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b0381118282101715612525576125256124ed565b60405290565b60405160c081016001600160401b0381118282101715612525576125256124ed565b604051601f8201601f191681016001600160401b0381118282101715612575576125756124ed565b604052919050565b60006001600160401b03821115612596576125966124ed565b5060051b60200190565b60006001600160401b038211156125b9576125b96124ed565b50601f01601f191660200190565b600082601f8301126125d857600080fd5b81356125eb6125e6826125a0565b61254d565b81815284602083860101111561260057600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261262e57600080fd5b8135602061263e6125e68361257d565b82815260059290921b8401810191818101908684111561265d57600080fd5b8286015b8481101561270c5780356001600160401b03808211156126815760008081fd5b908801906060828b03601f190181131561269b5760008081fd5b6126a3612503565b6126ae8885016122b8565b8152604080850135848111156126c45760008081fd5b6126d28e8b838901016125c7565b838b0152509184013591838311156126ea5760008081fd5b6126f88d8a858801016125c7565b908201528652505050918301918301612661565b509695505050505050565b600060c0828403121561272957600080fd5b61273161252b565b905061273c826122b8565b815261274a602083016122b8565b60208201526040820135604082015260608201356001600160401b038082111561277357600080fd5b61277f8583860161261d565b60608401526080840135608084015260a08401359150808211156127a257600080fd5b506127af848285016125c7565b60a08301525092915050565b60006105093683612717565b634e487b7160e01b600052603260045260246000fd5b6000808335601e198436030181126127f457600080fd5b8301803591506001600160401b0382111561280e57600080fd5b60200191503681900382131561221857600080fd5b6000602080838503121561283657600080fd5b82356001600160401b038082111561284d57600080fd5b818501915085601f83011261286157600080fd5b813561286f6125e68261257d565b81815260059190911b8301840190848101908883111561288e57600080fd5b8585015b838110156128c6578035858111156128aa5760008081fd5b6128b88b89838a0101612717565b845250918601918601612892565b5098975050505050505050565b8281526040602082015260006128ec60408301846120fc565b949350505050565b60006020828403121561290657600080fd5b81516001600160e01b0319811681146120d157600080fd5b634e487b7160e01b600052601160045260246000fd5b818103818111156105095761050961291e565b808201808211156105095761050961291e565b60e08152600061296d60e083018b6120fc565b828103602084015261297f818b6120fc565b9050886040840152828103606084015261299a81888a612334565b608084019690965250506001600160a01b0392831660a0820152911660c09091015295945050505050565b8381526040602082015260006129df604083018486612334565b95945050505050565b600060208083850312156129fb57600080fd5b82516001600160401b0380821115612a1257600080fd5b818501915085601f830112612a2657600080fd5b8151612a346125e68261257d565b81815260059190911b83018401908481019088831115612a5357600080fd5b8585015b838110156128c657805185811115612a6f5760008081fd5b8601603f81018b13612a815760008081fd5b878101516040612a936125e6836125a0565b8281528d82848601011115612aa85760008081fd5b612ab7838c83018487016120d8565b8652505050918601918601612a57565b600081612ad657612ad661291e565b506000190190565b602080825282516001600160a01b0390811683830152838201518116604080850191909152808501516060808601919091528086015160c06080870152805160e0870181905260009594610100600583901b8901810195919493870193919290890190885b81811015612b9d5760ff198b8903018352855187815116895289810151858b8b0152612b71868b01826120fc565b918701518a83038b890152919050612b8981836120fc565b995050509488019491880191600101612b43565b50505050505050608085015160a085015260a08501519150601f198482030160c08501526129df81836120fc565b815160009082906020808601845b83811015612bf557815185529382019390820190600101612bd9565b50929695505050505050565b600181811c90821680612c1557607f821691505b602082108103612c3557634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052602160045260246000fdfea264697066735822122073f8fd2b36b643aff6f988638bc7c8ab2f41546c01a777524170b479e36618c564736f6c63430008170033"}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/constants.cjs"}],[2975,{"./types.cjs":2996},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationRevertedError=n.SimulationInvalidResponseError=n.SimulationChainNotSupportedError=n.FirstTimeInteractionError=n.SimulationError=void 0;const r=e("./types.cjs");class s extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}}n.SimulationError=s;class i extends Error{constructor(e,t){super(e??"Error checking first time interaction"),this.code=t}}n.FirstTimeInteractionError=i;n.SimulationChainNotSupportedError=class extends s{constructor(e){super(`Chain is not supported: ${e}`,r.SimulationErrorCode.ChainNotSupported)}};n.SimulationInvalidResponseError=class extends s{constructor(){super("Invalid response from simulation API",r.SimulationErrorCode.InvalidResponse)}};n.SimulationRevertedError=class extends s{constructor(){super("Transaction was reverted",r.SimulationErrorCode.Reverted)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/errors.cjs"}],[2976,{"../logger.cjs":2995,"../types.cjs":2996,"../utils/gas-fees.cjs":3005,"@metamask/gas-fee-controller":3020,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultGasFeeFlow=void 0;const l=e("@metamask/gas-fee-controller"),d=e("@metamask/utils"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/gas-fees.cjs"),m=(0,d.createModuleLogger)(f.projectLogger,"default-gas-fee-flow");n.DefaultGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction(){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:n,gasFeeEstimates:o}=t;let c;switch(n){case l.GAS_ESTIMATE_TYPES.FEE_MARKET:m("Using fee market estimates",o),c=u(this,r,"m",s).call(this,o);break;case l.GAS_ESTIMATE_TYPES.LEGACY:m("Using legacy estimates",o),c=u(this,r,"m",i).call(this,o);break;case l.GAS_ESTIMATE_TYPES.ETH_GASPRICE:m("Using eth_gasPrice estimates",o),c=u(this,r,"m",a).call(this,o);break;default:throw new Error(`Unsupported gas estimate type: ${n}`)}return{estimates:c}}},r=new WeakSet,s=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce((t,n)=>({...t,[n]:u(this,r,"m",o).call(this,e,n)}),{});return{type:h.GasFeeEstimateType.FeeMarket,...t}},i=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce((t,n)=>({...t,[n]:u(this,r,"m",c).call(this,e,n)}),{});return{type:h.GasFeeEstimateType.Legacy,...t}},a=function(e){return{type:h.GasFeeEstimateType.GasPrice,gasPrice:(0,p.gweiDecimalToWeiHex)(e.gasPrice)}},o=function(e,t){return{maxFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxPriorityFeePerGas)}},c=function(e,t){return(0,p.gweiDecimalToWeiHex)(e[t])}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/DefaultGasFeeFlow.cjs"}],[2977,{"../logger.cjs":2995,"../types.cjs":2996,"./DefaultGasFeeFlow.cjs":2976,"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LineaGasFeeFlow=void 0;const l=e("@metamask/controller-utils"),d=e("@metamask/utils"),f=e("./DefaultGasFeeFlow.cjs"),h=e("../logger.cjs"),p=e("../types.cjs"),m=(0,d.createModuleLogger)(h.projectLogger,"linea-gas-fee-flow"),g=[l.ChainId["linea-mainnet"],l.ChainId["linea-goerli"],l.ChainId["linea-sepolia"]],b={low:1,medium:1.35,high:1.7},y={low:1,medium:1.05,high:1.1};n.LineaGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e}){return g.includes(e.chainId)}async getGasFees(e){try{return await u(this,r,"m",s).call(this,e)}catch(t){return m("Using default flow as fallback due to error",t),(new f.DefaultGasFeeFlow).getGasFees(e)}}},r=new WeakSet,s=async function(e){const{ethQuery:t,transactionMeta:n}=e,s=await u(this,r,"m",i).call(this,n,t);m("Received Linea response",s);const d=u(this,r,"m",a).call(this,s.baseFeePerGas,b);m("Generated base fees",u(this,r,"m",c).call(this,d));const f=u(this,r,"m",a).call(this,s.priorityFeePerGas,y);m("Generated priority fees",u(this,r,"m",c).call(this,f));const h=u(this,r,"m",o).call(this,d,f);m("Generated max fees",u(this,r,"m",c).call(this,h));return{estimates:Object.values(p.GasFeeEstimateLevel).reduce((e,t)=>({...e,[t]:{maxFeePerGas:(0,l.toHex)(h[t]),maxPriorityFeePerGas:(0,l.toHex)(f[t])}}),{type:p.GasFeeEstimateType.FeeMarket})}},i=function(e,t){return(0,l.query)(t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data}])},a=function(e,t){const n=(0,l.hexToBN)(e);return{low:n.muln(t.low),medium:n.muln(t.medium),high:n.muln(t.high)}},o=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},c=function(e){return Object.values(p.GasFeeEstimateLevel).map(t=>e[t].toString(10))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/LineaGasFeeFlow.cjs"}],[2978,{"../constants.cjs":2974,"./OracleLayer1GasFeeFlow.cjs":2979,"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.OptimismLayer1GasFeeFlow=void 0;const a=e("@metamask/controller-utils"),o=e("@metamask/utils"),c=e("./OracleLayer1GasFeeFlow.cjs"),u=e("../constants.cjs"),l=[u.CHAIN_IDS.OPTIMISM,u.CHAIN_IDS.OPTIMISM_TESTNET,u.CHAIN_IDS.BASE,u.CHAIN_IDS.BASE_TESTNET,u.CHAIN_IDS.OPBNB,u.CHAIN_IDS.OPBNB_TESTNET,u.CHAIN_IDS.ZORA];class d extends c.OracleLayer1GasFeeFlow{constructor(){super(...arguments),r.add(this)}async matchesTransaction({transactionMeta:e}){const t=(0,o.hexToNumber)(e.chainId),n=await i(this,r,"m",s).call(this);return!!n?.has(t)||l.includes(e.chainId)}}n.OptimismLayer1GasFeeFlow=d,r=new WeakSet,s=async function(){try{const e=await(0,a.handleFetch)("https://gas.api.cx.metamask.io/v1/supportedNetworks");return new Set(e?.partialSupport?.optimism??[])}catch{return null}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OptimismLayer1GasFeeFlow.cjs"}],[2979,{"../logger.cjs":2995,"../utils/prepare.cjs":3010,"../utils/utils.cjs":3015,"@ethersproject/contracts":746,"@ethersproject/providers":784,"@metamask/utils":3116,"bn.js":4023,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.OracleLayer1GasFeeFlow=void 0;const d=e("@ethersproject/contracts"),f=e("@ethersproject/providers"),h=e("@metamask/utils"),p=l(e("bn.js")),m=e("../logger.cjs"),g=e("../utils/prepare.cjs"),b=e("../utils/utils.cjs"),y=(0,h.createModuleLogger)(m.projectLogger,"oracle-layer1-gas-fee-flow"),w=new p.default(0),E=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_gasUsed",type:"uint256"}],name:"getOperatorFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];n.OracleLayer1GasFeeFlow=class{constructor(){r.add(this)}getOracleAddressForChain(e){return"0x420000000000000000000000000000000000000F"}shouldSignTransaction(){return!1}async getLayer1Fee(e){try{const{provider:t,transactionMeta:n}=e,a=u(this,r,"m",c).call(this,t,n.chainId),o=await u(this,r,"m",s).call(this,a,n),l=await u(this,r,"m",i).call(this,a,n);return{layer1Fee:(0,h.add0x)((0,b.padHexToEvenLength)(o.add(l).toString(16)))}}catch(e){throw y("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}},r=new WeakSet,s=async function(e,t){const n=u(this,r,"m",a).call(this,t,this.shouldSignTransaction()).serialize(),s=await e.getL1Fee(n);if(s===undefined)throw new Error("No value returned from oracle contract");return(0,b.toBN)(s)},i=async function(e,t){const{gasUsed:n}=t;if(!n)return w;try{const t=await e.getOperatorFee(n);return t===undefined?w:(0,b.toBN)(t)}catch(e){return y("Failed to get operator layer 1 gas fee",e),w}},a=function(e,n){const s=u(this,r,"m",o).call(this,e),{chainId:i}=e;let a=(0,g.prepareTransaction)(i,s);if(n){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex"),n=Uint8Array.from(e);a=a.sign(n)}return a},o=function(e){return{...e.txParams,gasLimit:e.txParams.gas}},c=function(e,t){return new d.Contract(this.getOracleAddressForChain(t),E,new f.Web3Provider(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OracleLayer1GasFeeFlow.cjs"}],[2980,{"../logger.cjs":2995,"../types.cjs":2996,"../utils/feature-flags.cjs":3002,"../utils/gas-fees.cjs":3005,"./DefaultGasFeeFlow.cjs":2976,"@metamask/gas-fee-controller":3020,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.randomiseDecimalGWEIAndConvertToHex=n.RandomisedEstimationsGasFeeFlow=void 0;const u=e("@metamask/gas-fee-controller"),l=e("@metamask/utils"),d=e("./DefaultGasFeeFlow.cjs"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/feature-flags.cjs"),m=e("../utils/gas-fees.cjs"),g=(0,l.createModuleLogger)(f.projectLogger,"randomised-estimation-gas-fee-flow");function b(e,t,n){const r=(0,m.gweiDecimalToWeiDecimal)(e),s=r.length,i=Math.min(t,s-n);if(0===Number(r)||i<=0)return`0x${Number(r).toString(16)}`;const a=s-i,o=r.slice(0,a),c=r.slice(-i),u=function(e,t){const n=10**e;return t+Math.floor(Math.random()*(n-t))}(i,Number(c)),d=`0x${(BigInt(o+"0".repeat(i))+BigInt(u)).toString(16)}`;return(0,l.add0x)(d)}n.RandomisedEstimationsGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e,messenger:t}){const{chainId:n}=e;return(0,p.getGasFeeRandomisation)(t).randomisedGasFeeDigits[n]!==undefined}async getGasFees(e){try{return await c(this,r,"m",i).call(this,e)}catch(t){return g("Using default flow as fallback due to error",t),await c(this,r,"m",s).call(this,e)}}},r=new WeakSet,s=async function(e){return(new d.DefaultGasFeeFlow).getGasFees(e)},i=async function(e){const{messenger:t,gasFeeControllerData:n,transactionMeta:i}=e,{gasEstimateType:o,gasFeeEstimates:l}=n,d=(0,p.getGasFeeRandomisation)(t),f=d.randomisedGasFeeDigits[i.chainId],h=d.preservedNumberOfDigits??2;if(o===u.GAS_ESTIMATE_TYPES.FEE_MARKET){g("Randomising fee market estimates",l);const e=c(this,r,"m",a).call(this,l,f,h);return g("Added randomised fee market estimates",e),{estimates:e}}return await c(this,r,"m",s).call(this,e)},a=function(e,t,n){const s=Object.values(h.GasFeeEstimateLevel).reduce((s,i)=>({...s,[i]:c(this,r,"m",o).call(this,e,i,t,n)}),{});return{type:h.GasFeeEstimateType.FeeMarket,...s}},o=function(e,t,n,r){return{maxFeePerGas:(0,m.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:b(e[t].suggestedMaxPriorityFeePerGas,n,r)}},n.randomiseDecimalGWEIAndConvertToHex=b}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/RandomisedEstimationsGasFeeFlow.cjs"}],[2981,{"../constants.cjs":2974,"./OracleLayer1GasFeeFlow.cjs":2979},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollLayer1GasFeeFlow=void 0;const r=e("./OracleLayer1GasFeeFlow.cjs"),s=e("../constants.cjs"),i=[s.CHAIN_IDS.SCROLL,s.CHAIN_IDS.SCROLL_SEPOLIA];class a extends r.OracleLayer1GasFeeFlow{getOracleAddressForChain(e){return"0x5300000000000000000000000000000000000002"}shouldSignTransaction(){return!0}async matchesTransaction({transactionMeta:e}){return i.includes(e.chainId)}}n.ScrollLayer1GasFeeFlow=a}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/ScrollLayer1GasFeeFlow.cjs"}],[2982,{"../types.cjs":2996,"@metamask/controller-utils":1449},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.TestGasFeeFlow=void 0;const c=e("@metamask/controller-utils"),u=e("../types.cjs"),l=1e15;n.TestGasFeeFlow=class{constructor(){r.add(this),s.set(this,1)}matchesTransaction(){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:n}=t,{gas:c}=n;if(!c)throw new Error("Cannot estimate fee without gas value");const d=parseInt(c,16),f=.5*l,h=(a(this,s,"f")+1)*l,p=a(this,s,"f")*l,m=h-f,g=p-f,b=h+f,y=p+f;return o(this,s,a(this,s,"f")+1,"f"),{estimates:{type:u.GasFeeEstimateType.FeeMarket,low:{maxFeePerGas:a(this,r,"m",i).call(this,m,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,g,d)},medium:{maxFeePerGas:a(this,r,"m",i).call(this,h,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,p,d)},high:{maxFeePerGas:a(this,r,"m",i).call(this,b,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,y,d)}}}}},s=new WeakMap,r=new WeakSet,i=function(e,t){const n=Math.ceil(e/t);return(0,c.toHex)(n)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/TestGasFeeFlow.cjs"}],[2983,{"../api/accounts-api.cjs":2972,"../constants.cjs":2974,"../index.cjs":2994,"../logger.cjs":2995,"../types.cjs":2996,"@metamask/controller-utils":1449,"bn.js":4023,uuid:5734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsApiRemoteTransactionSource=n.SUPPORTED_CHAIN_IDS=void 0;const u=e("@metamask/controller-utils"),l=c(e("bn.js")),d=e("uuid"),f=e("../index.cjs"),h=e("../api/accounts-api.cjs"),p=e("../constants.cjs"),m=e("../logger.cjs"),g=e("../types.cjs");n.SUPPORTED_CHAIN_IDS=[p.CHAIN_IDS.MAINNET,p.CHAIN_IDS.POLYGON,p.CHAIN_IDS.BSC,p.CHAIN_IDS.LINEA_MAINNET,p.CHAIN_IDS.BASE,p.CHAIN_IDS.OPTIMISM,p.CHAIN_IDS.ARBITRUM,p.CHAIN_IDS.SCROLL,p.CHAIN_IDS.SEI,p.CHAIN_IDS.MONAD];const b=(0,m.createModuleLogger)(m.incomingTransactionsLogger,"accounts-api-source");n.AccountsApiRemoteTransactionSource=class{constructor(){r.add(this)}getSupportedChains(){return n.SUPPORTED_CHAIN_IDS}async fetchTransactions(e){const{address:t}=e,c=await o(this,r,"m",s).call(this,e,n.SUPPORTED_CHAIN_IDS);b("Fetched transactions",c.length,c);const u=await Promise.all(c.map(e=>o(this,r,"m",a).call(this,t,e)));b("Normalized transactions",u);const l=o(this,r,"m",i).call(this,e,u);return b("Filtered transactions",l.length,l),l}},r=new WeakSet,s=async function(e,t){const{address:n,tags:r}=e,s=[];try{const e=await(0,h.getAccountTransactions)({address:n,chainIds:t,sortDirection:"DESC",tags:r});e?.data&&s.push(...e.data)}catch(e){b("Error while fetching transactions",e)}return s},i=function(e,t){const{address:n,includeTokenTransfers:r,updateTransactions:s}=e;let i=t;return s||(i=i.filter(e=>e.txParams.to===n)),r||(i=i.filter(e=>!e.isTransfer)),i},a=async function(e,t){const n=String(t.blockNumber),r=`0x${t.chainId.toString(16)}`,{hash:s}=t,i=new Date(t.timestamp).getTime(),a=(0,d.v1)({msecs:i}),{from:o}=t,c=(0,u.BNToHex)(new l.default(t.gas)),h=(0,u.BNToHex)(new l.default(t.gasPrice)),p=(0,u.BNToHex)(new l.default(t.gasUsed)),m=(0,u.BNToHex)(new l.default(t.nonce)),b=t.methodId,y=g.TransactionType.incoming,w=t.isError?g.TransactionStatus.failed:g.TransactionStatus.confirmed,E=t.valueTransfers.find(t=>(t.to.toLowerCase()===e.toLowerCase()||t.from.toLowerCase()===e.toLowerCase())&&t.contractAddress),v=E?.to.toLowerCase()===e.toLowerCase()&&o.toLowerCase()!==e.toLowerCase(),T=o.toLowerCase()===e.toLowerCase(),x=E?.amount,S=E?.contractAddress,P=E?.decimal,k=E?.symbol,I=(0,u.BNToHex)(new l.default(v?E?.amount??t.value:t.value)),A=v?e:t.to,_={blockNumber:n,chainId:r,error:w===g.TransactionStatus.failed?new Error("Transaction failed"):undefined,hash:s,id:a,isTransfer:v,networkClientId:"",status:w,time:i,toSmartContract:!1,transferInformation:E?{amount:x,contractAddress:S,decimals:P,symbol:k}:undefined,txParams:{chainId:r,data:b,from:o,gas:c,gasPrice:h,gasUsed:p,nonce:m,to:A,value:I},type:y,verifiedOnBlockchain:!1};return T&&(_.type=(await(0,f.determineTransactionType)(_.txParams)).type),_}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/AccountsApiRemoteTransactionSource.cjs"}],[2984,{"../gas-flows/DefaultGasFeeFlow.cjs":2976,"../logger.cjs":2995,"../types.cjs":2996,"../utils/gas-flow.cjs":3006,"../utils/layer1-gas-fee-flow.cjs":3008,"@metamask/eth-query":1991,"@metamask/utils":3116,events:4384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,b,y,w,E,v,T,x,S,P,k=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},I=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateTransactionGasEstimates=n.updateTransactionGasProperties=n.GasFeePoller=void 0;const _=A(e("@metamask/eth-query")),C=e("@metamask/utils"),j=A(e("events")),B=e("../gas-flows/DefaultGasFeeFlow.cjs"),F=e("../logger.cjs"),O=e("../types.cjs"),R=e("../utils/gas-flow.cjs"),L=e("../utils/layer1-gas-fee-flow.cjs"),M=(0,C.createModuleLogger)(F.projectLogger,"gas-fee-poller");function N(e,t,n,r){const{type:s}=t;if(r){if(s===O.GasFeeEstimateType.FeeMarket){const r=t;e.maxFeePerGas=r[n]?.maxFeePerGas,e.maxPriorityFeePerGas=r[n]?.maxPriorityFeePerGas}if(s===O.GasFeeEstimateType.GasPrice){const n=t;e.maxFeePerGas=n.gasPrice,e.maxPriorityFeePerGas=n.gasPrice}if(s===O.GasFeeEstimateType.Legacy){const r=t[n];e.maxFeePerGas=r,e.maxPriorityFeePerGas=r}delete e.gasPrice}else{if(s===O.GasFeeEstimateType.FeeMarket){const r=t;e.gasPrice=r[n]?.maxFeePerGas}if(s===O.GasFeeEstimateType.GasPrice){const n=t;e.gasPrice=n.gasPrice}if(s===O.GasFeeEstimateType.Legacy){const r=t;e.gasPrice=r[n]}delete e.maxFeePerGas,delete e.maxPriorityFeePerGas}}n.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:n,getProvider:g,getTransactions:b,getTransactionBatches:y,layer1GasFeeFlows:w,messenger:E,onStateChange:v}){r.add(this),this.hub=new j.default,s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,!1),k(this,s,e,"f"),k(this,i,t,"f"),k(this,l,w,"f"),k(this,a,n,"f"),k(this,o,g,"f"),k(this,c,b,"f"),k(this,u,y,"f"),k(this,d,E,"f"),v(()=>{const e=I(this,r,"m",x).call(this),t=I(this,r,"m",S).call(this);e.length||t.length?I(this,r,"m",p).call(this):I(this,r,"m",m).call(this)})}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,r=new WeakSet,p=function(){I(this,h,"f")||(I(this,r,"m",g).call(this),k(this,h,!0,"f"),M("Started polling"))},m=function(){I(this,h,"f")&&(clearTimeout(I(this,f,"f")),k(this,f,undefined,"f"),k(this,h,!1,"f"),M("Stopped polling"))},g=async function e(){await I(this,r,"m",b).call(this),await I(this,r,"m",y).call(this),k(this,f,setTimeout(()=>I(this,r,"m",e).call(this),1e4),"f")},b=async function(){const e=I(this,r,"m",x).call(this);if(!e.length)return;M("Found unapproved transactions",e.length);const t=await I(this,r,"m",P).call(this,e);M("Retrieved gas fee controller data",t),await Promise.all(e.flatMap(e=>{const{chainId:n}=e,s=t.get(n);return I(this,r,"m",w).call(this,e,s)}))},y=async function(){const e=I(this,r,"m",S).call(this);if(!e.length)return;M("Found unapproved transaction batches",e.length);const t=await I(this,r,"m",P).call(this,e);M("Retrieved gas fee controller data",t),await Promise.all(e.flatMap(e=>{const{chainId:n}=e,s=t.get(n);return I(this,r,"m",E).call(this,e,s)}))},w=async function(e,t){const{id:n}=e,[s,i]=await Promise.all([I(this,r,"m",v).call(this,e,t),I(this,r,"m",T).call(this,e)]);(s||i)&&this.hub.emit("transaction-updated",{transactionId:n,gasFeeEstimates:s?.gasFeeEstimates,gasFeeEstimatesLoaded:s?.gasFeeEstimatesLoaded,layer1GasFee:i})},E=async function(e,t){const{id:n}=e,r=new _.default(I(this,o,"f").call(this,e.networkClientId)),s=new B.DefaultGasFeeFlow,i={ethQuery:r,gasFeeControllerData:t,messenger:I(this,d,"f"),transactionMeta:{...e,txParams:{...e.transactions?.[0],from:e.from,gas:e.gas},time:Date.now()}};let a;try{a=(await s.getGasFees(i)).estimates}catch(t){M("Failed to get gas fees for batch",e.id,t)}a&&this.hub.emit("transaction-batch-updated",{transactionBatchId:n,gasFeeEstimates:a,gasFeeEstimatesLoaded:!0})},v=async function(e,t){const{networkClientId:n}=e,r=new _.default(I(this,o,"f").call(this,n)),s=(0,R.getGasFeeFlow)(e,I(this,i,"f"),I(this,d,"f"));s&&M("Found gas fee flow",s.constructor.name,e.id);const a={ethQuery:r,gasFeeControllerData:t,messenger:I(this,d,"f"),transactionMeta:e};let c;if(s)try{c=(await s.getGasFees(a)).estimates}catch(t){M("Failed to get suggested gas fees",e.id,t)}return!c&&e.gasFeeEstimatesLoaded?undefined:(M("Updated gas fee estimates",{gasFeeEstimates:c,transaction:e.id}),{gasFeeEstimates:c,gasFeeEstimatesLoaded:!0})},T=async function(e){const{networkClientId:t}=e,n=I(this,o,"f").call(this,t),r=await(0,L.getTransactionLayer1GasFee)({layer1GasFeeFlows:I(this,l,"f"),messenger:I(this,d,"f"),provider:n,transactionMeta:e});return r&&M("Updated layer 1 gas fee",r,e.id),r},x=function(){return I(this,c,"f").call(this).filter(e=>e.status===O.TransactionStatus.unapproved)},S=function(){return I(this,u,"f").call(this).filter(e=>e.status===O.TransactionStatus.unapproved)},P=async function(e){const t=new Map;for(const n of e){const{chainId:e,networkClientId:r}=n;if(t.has(e))continue;const i=r??I(this,s,"f").call(this,e);t.set(e,i)}M("Extracted network client IDs by chain ID",t);const n=Array.from(t.entries()).map(async([e,t])=>[e,await I(this,a,"f").call(this,{networkClientId:t})]);return new Map(await Promise.all(n))},n.updateTransactionGasProperties=function({gasFeeEstimates:e,gasFeeEstimatesLoaded:t,isTxParamsGasFeeUpdatesEnabled:n,layer1GasFee:r,txMeta:s}){const i=s.userFeeLevel,a=Object.values(O.GasFeeEstimateLevel).includes(i);if(n(s)&&a&&e){const t=s.txParams.type!==O.TransactionEnvelopeType.legacy;N(s.txParams,e,i,t)}e&&(s.gasFeeEstimates=e),t!==undefined&&(s.gasFeeEstimatesLoaded=t),r&&(s.layer1GasFee=r)},n.updateTransactionGasEstimates=function({txMeta:e,userFeeLevel:t}){const{txParams:n,gasFeeEstimates:r}=e;if(!r)return;N(n,r,t,e.txParams.type!==O.TransactionEnvelopeType.legacy)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/GasFeePoller.cjs"}],[2985,{"../logger.cjs":2995,"../utils/feature-flags.cjs":3002,events:4384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,b,y,w,E,v=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},T=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},x=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.IncomingTransactionHelper=void 0;const S=x(e("events")),P=e("../logger.cjs"),k=e("../utils/feature-flags.cjs");n.IncomingTransactionHelper=class{constructor({client:e,getCurrentAccount:t,getLocalTransactions:n,includeTokenTransfers:g,isEnabled:b,messenger:y,remoteTransactionSource:w,trimTransactions:E,updateTransactions:T}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),this.hub=new S.default,v(this,s,e,"f"),v(this,i,t,"f"),v(this,a,n,"f"),v(this,o,g,"f"),v(this,c,b??(()=>!0),"f"),v(this,u,!1,"f"),v(this,l,!1,"f"),v(this,d,y,"f"),v(this,f,w,"f"),v(this,p,E,"f"),v(this,m,T,"f")}start(){if(T(this,u,"f"))return;if(!T(this,r,"m",y).call(this))return;const e=T(this,r,"m",w).call(this);(0,P.incomingTransactionsLogger)("Started polling",{interval:e}),v(this,u,!0,"f"),T(this,l,"f")||T(this,r,"m",g).call(this).catch(e=>{(0,P.incomingTransactionsLogger)("Initial polling failed",e)})}stop(){T(this,h,"f")&&clearTimeout(T(this,h,"f")),T(this,u,"f")&&(v(this,u,!1,"f"),(0,P.incomingTransactionsLogger)("Stopped polling"))}async update({isInterval:e,tags:t}={}){const n=T(this,r,"m",E).call(this,t,e);if((0,P.incomingTransactionsLogger)("Checking for incoming transactions",{isInterval:Boolean(e),tags:n}),!T(this,r,"m",y).call(this))return;const s=T(this,i,"f").call(this),c=T(this,o,"f")??!0,u=T(this,m,"f")??!1;let l=[];try{l=await T(this,f,"f").fetchTransactions({address:s.address,includeTokenTransfers:c,tags:n,updateTransactions:u})}catch(e){return void(0,P.incomingTransactionsLogger)("Error while fetching remote transactions",e)}if(!l.length)return;T(this,r,"m",b).call(this,l),(0,P.incomingTransactionsLogger)("Found potential transactions",l.length,l);const d=T(this,a,"f").call(this),h=l.filter(e=>!d.some(t=>t.hash?.toLowerCase()===e.hash?.toLowerCase()&&t.txParams.from?.toLowerCase()===e.txParams.from?.toLowerCase()&&t.type===e.type));if(!h.length)return void(0,P.incomingTransactionsLogger)("All transactions are already known");(0,P.incomingTransactionsLogger)("Found unique transactions",h.length,h);const g=T(this,p,"f").call(this,[...h,...d]),w=h.map(e=>e.id),v=g.filter(e=>w.includes(e.id));v.length?((0,P.incomingTransactionsLogger)("Adding new transactions",v.length,v),this.hub.emit("transactions",v)):(0,P.incomingTransactionsLogger)("All unique transactions truncated due to limit")}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,r=new WeakSet,g=async function e(){v(this,l,!0,"f");try{await this.update({isInterval:!0})}catch(e){console.error("Error while checking incoming transactions",e)}v(this,l,!1,"f"),T(this,u,"f")&&(T(this,h,"f")&&clearTimeout(T(this,h,"f")),v(this,h,setTimeout(()=>T(this,r,"m",e).call(this),T(this,r,"m",w).call(this)),"f"))},b=function(e){e.sort((e,t)=>e.time<t.time?-1:1)},y=function(){return T(this,c,"f").call(this)},w=function(){return(0,k.getIncomingTransactionsPollingInterval)(T(this,d,"f"))},E=function(e,t){const n=[];return T(this,s,"f")&&n.push(T(this,s,"f")),e?.length?n.push(...e):t&&n.push("automatic-polling"),n?.length?n:undefined}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/IncomingTransactionHelper.cjs"}],[2986,{"../logger.cjs":2995,"@metamask/utils":3116,"async-mutex":3906,"eth-method-registry":4308,events:4384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MethodDataHelper=void 0;const f=e("@metamask/utils"),h=e("async-mutex"),p=e("eth-method-registry"),m=d(e("events")),g=e("../logger.cjs"),b=(0,f.createModuleLogger)(g.projectLogger,"method-data");n.MethodDataHelper=class{constructor({getProvider:e,getState:t}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,new h.Mutex),this.hub=new m.default,u(this,s,e,"f"),u(this,i,t,"f"),u(this,a,new Map,"f")}async lookup(e,t){b("lookup",e,t);const n=await l(this,o,"f").acquire();try{const n=l(this,i,"f").call(this)[e];if(n)return b("Cached",n),n;let o=l(this,a,"f").get(t);if(!o){const e=l(this,s,"f").call(this,t);o=new p.MethodRegistry({provider:e}),l(this,a,"f").set(t,o),b("Created registry",t)}const u=await l(this,r,"m",c).call(this,e,o);return b("Result",u),this.hub.emit("update",{fourBytePrefix:e,methodData:u}),u}finally{n()}}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakSet,c=async function(e,t){const n=await t.lookup(e);if(!n)return b("No method found",e),{registryMethod:"",parsedRegistryMethod:{name:undefined,args:undefined}};b("Parsing",n);return{registryMethod:n,parsedRegistryMethod:t.parse(n)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MethodDataHelper.cjs"}],[2987,{"../logger.cjs":2995,"async-mutex":3906},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTrackingHelper=void 0;const b=e("async-mutex"),y=e("../logger.cjs"),w=(0,y.createModuleLogger)(y.projectLogger,"multichain-tracking");n.MultichainTrackingHelper=class{constructor({findNetworkClientIdByChainId:e,getNetworkClientById:t,getNetworkClientRegistry:n,removePendingTransactionTrackerListeners:b,createNonceTracker:y,createPendingTransactionTracker:E,onNetworkStateChange:v}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,new Map),d.set(this,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of g(this,d,"f"))e.pendingTransactionTracker.startIfPendingTransactions()},f.set(this,e=>{const t=Object.keys(e),n=Array.from(g(this,d,"f").keys()),s=n.filter(e=>!t.includes(e));s.forEach(e=>{g(this,r,"m",h).call(this,e)});const i=t.filter(e=>!n.includes(e));i.forEach(e=>{g(this,r,"m",p).call(this,e)}),i.length&&w("Added trackers",i),s.length&&w("Removed trackers",s)}),m(this,s,e,"f"),m(this,i,t,"f"),m(this,a,n,"f"),m(this,o,b,"f"),m(this,c,y,"f"),m(this,u,E,"f"),v((e,t)=>{const n=g(this,a,"f").call(this);t.forEach(({op:e,path:t})=>{if("remove"===e&&"networkConfigurations"===t[0]){const e=t[1];delete n[e]}}),g(this,f,"f").call(this,n)})}initialize(){const e=g(this,a,"f").call(this);g(this,f,"f").call(this,e),w("Initialized")}has(e){return g(this,d,"f").has(e)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let n=g(this,l,"f").get(e);n||(n=new Map,g(this,l,"f").set(e,n));let r=n.get(t);return r||(r=new b.Mutex,n.set(t,r)),await r.acquire()}async getNonceLock(e,t){const n=g(this,i,"f").call(this,t),r=await this.acquireNonceLockForChainIdKey({chainId:n.configuration.chainId,key:e}),s=g(this,d,"f").get(t)?.nonceTracker;if(!s)throw new Error(`Missing nonce tracker for network client ID - ${t}`);try{const t=await s.getNonceLock(e),n=()=>{t.releaseLock(),r?.()};return{...t,releaseLock:n}}catch(e){throw r?.(),e}}stopAllTracking(){for(const[e]of g(this,d,"f"))g(this,r,"m",h).call(this,e)}getNetworkClient({chainId:e,networkClientId:t}){if(!t&&!e)throw new Error("Cannot locate network client without networkClientId or chainId");let n,r=t;try{t&&(n=g(this,i,"f").call(this,t))}catch(n){if(w("No network client found with ID",t),!e)throw n}return!n&&e&&(r=g(this,s,"f").call(this,e),n=g(this,i,"f").call(this,r)),{...n,id:r}}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function(e){const t=g(this,d,"f").get(e);t&&(t.pendingTransactionTracker.stop(),g(this,o,"f").call(this,t.pendingTransactionTracker),g(this,d,"f").delete(e))},p=function(e){if(g(this,d,"f").get(e))return;const{provider:t,blockTracker:n,configuration:{chainId:r}}=g(this,i,"f").call(this,e),s=g(this,c,"f").call(this,{provider:t,blockTracker:n,chainId:r}),a=g(this,u,"f").call(this,{provider:t,blockTracker:n,chainId:r,networkClientId:e});g(this,d,"f").set(e,{nonceTracker:s,pendingTransactionTracker:a})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MultichainTrackingHelper.cjs"}],[2988,{"../logger.cjs":2995,"../types.cjs":2996,"../utils/feature-flags.cjs":3002,"./TransactionPoller.cjs":2990,"@metamask/controller-utils":1449,events:4384,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,b,y,w,E,v,T,x,S,P,k,I,A,_,C,j,B,F,O,R,L,M,N,G,D,H,U,q,V,$=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},z=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},K=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PendingTransactionTracker=void 0;const W=e("@metamask/controller-utils"),X=K(e("events")),J=e("lodash"),Z=e("./TransactionPoller.cjs"),Y=e("../logger.cjs"),Q=e("../types.cjs"),ee=e("../utils/feature-flags.cjs"),te=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],ne=(0,Y.createModuleLogger)(Y.projectLogger,"pending-transactions");n.PendingTransactionTracker=class{constructor({blockTracker:e,getChainId:t,getEthQuery:n,getGlobalLock:x,getNetworkClientId:S,getTransactions:P,isTimeoutEnabled:k,hooks:I,isResubmitEnabled:A,messenger:_,publishTransaction:C}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),y.set(this,void 0),w.set(this,void 0),E.set(this,void 0),this.startIfPendingTransactions=()=>{const e=z(this,r,"m",O).call(this);e.length?z(this,r,"m",v).call(this,e):this.stop()},this.hub=new X.default,$(this,i,new Map,"f"),$(this,o,t,"f"),$(this,c,n,"f"),$(this,u,x,"f"),$(this,l,S,"f"),$(this,d,P,"f"),$(this,f,A??(()=>!0),"f"),$(this,h,new Map,"f"),$(this,p,z(this,r,"m",T).bind(this),"f"),$(this,g,_,"f"),$(this,b,C,"f"),$(this,y,!1,"f"),$(this,E,undefined,"f"),$(this,w,new Z.TransactionPoller({blockTracker:e,chainId:t(),messenger:_}),"f"),$(this,s,I?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),"f"),$(this,a,k,"f"),$(this,m,(0,Y.createModuleLogger)(ne,`${t()}:${S()}`),"f")}addTransactionToPoll(e){z(this,r,"m",v).call(this,[e]),$(this,E,e,"f")}async forceCheckTransaction(e){const t=await z(this,u,"f").call(this);try{await z(this,r,"m",_).call(this,e)}catch(e){z(this,m,"f").call(this,"Failed to check transaction",e)}finally{t()}}stop(){z(this,y,"f")&&(z(this,w,"f").stop(),$(this,y,!1,"f"),z(this,m,"f").call(this,"Stopped polling"))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,E=new WeakMap,r=new WeakSet,v=function(e){z(this,w,"f").setPendingTransactions(e),z(this,y,"f")||(z(this,w,"f").start(z(this,p,"f")),$(this,y,!0,"f"),z(this,m,"f").call(this,"Started polling"))},T=async function(e){const t=await z(this,u,"f").call(this);try{await z(this,r,"m",x).call(this)}catch(e){z(this,m,"f").call(this,"Failed to check transactions",e)}finally{t()}try{await z(this,r,"m",S).call(this,e)}catch(e){z(this,m,"f").call(this,"Failed to resubmit transactions",e)}},x=async function(){z(this,m,"f").call(this,"Checking transactions");const e=[...z(this,r,"m",O).call(this),...z(this,E,"f")?[z(this,E,"f")]:[]];e.length?(z(this,m,"f").call(this,"Found pending transactions to check",{count:e.length,ids:e.map(e=>e.id)}),await Promise.all(e.map(e=>z(this,r,"m",_).call(this,e)))):z(this,m,"f").call(this,"No pending transactions to check")},S=async function(e){if(!z(this,f,"f").call(this)||!z(this,y,"f"))return;z(this,m,"f").call(this,"Resubmitting transactions");const t=z(this,r,"m",O).call(this);if(t.length){z(this,m,"f").call(this,"Found pending transactions to resubmit",{count:t.length,ids:t.map(e=>e.id)});for(const n of t)try{await z(this,r,"m",k).call(this,n,e)}catch(e){const t=e.value?.message?.toLowerCase()??e.message?.toLowerCase()??String(e);if(z(this,r,"m",P).call(this,t)){z(this,m,"f").call(this,"Ignoring known transaction error",t);continue}z(this,r,"m",R).call(this,n,e.message,"There was an error when resubmitting this transaction.")}}else z(this,m,"f").call(this,"No pending transactions to resubmit")},P=function(e){return te.some(t=>e.includes(t))},k=async function(e,t){if(!z(this,r,"m",I).call(this,e,t))return;if(!await z(this,s,"f").call(this,e))return;const n=z(this,c,"f").call(this,e.networkClientId);await z(this,b,"f").call(this,n,e);const i=(e.retryCount??0)+1;z(this,r,"m",N).call(this,(0,J.merge)({},e,{retryCount:i}),"PendingTransactionTracker:transaction-retry - Retry count increased")},I=function(e,t){const n=(0,J.cloneDeep)(e);n.firstRetryBlockNumber||(n.firstRetryBlockNumber=t,z(this,r,"m",N).call(this,n,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:s}=n,i=Number.parseInt(t,16)-Number.parseInt(s,16),a=e.retryCount??0;return i>=Math.min(50,Math.pow(2,a))},A=function(e){const{hash:t,id:n}=e;z(this,E,"f")?.id===n&&$(this,E,undefined,"f"),t&&z(this,h,"f").delete(t)},_=async function(e){const{hash:t,id:n,isIntentComplete:i,txParams:{from:a}}=e;if(i)await z(this,r,"m",C).call(this,e);else{if(!t&&await z(this,s,"f").call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void z(this,r,"m",L).call(this,e,t)}if(z(this,r,"m",F).call(this,e))return z(this,m,"f").call(this,"Nonce already taken",n),void z(this,r,"m",M).call(this,e);try{const n=await z(this,r,"m",G).call(this,t),s="0x1"===n?.status;if("0x0"===n?.status)return z(this,m,"f").call(this,"Transaction receipt has failed status"),void z(this,r,"m",L).call(this,e,new Error("Transaction failed on-chain"));const{blockNumber:i,blockHash:o}=n??{};if(s&&i&&o)return void await z(this,r,"m",C).call(this,e,{...n,blockNumber:i,blockHash:o});z(this,m,"f").call(this,"No receipt status",{hash:t,receipt:n});const c=await z(this,r,"m",U).call(this,a),u=parseInt(c,16);if(!n&&await z(this,r,"m",j).call(this,e,u))return;await z(this,r,"m",B).call(this,e,u)&&z(this,r,"m",M).call(this,e)}catch(t){z(this,m,"f").call(this,"Failed to check transaction",n,t),z(this,r,"m",R).call(this,e,t.message,"There was a problem loading this transaction.")}}},C=async function(e,t){const{id:n}=e,{blockHash:s}=t??{};z(this,m,"f").call(this,"Transaction confirmed",n);const i=z(this,E,"f")?.id===n;if(z(this,r,"m",A).call(this,e),i)return void this.hub.emit("transaction-confirmed",e);const a=(0,J.cloneDeep)(e);if(t&&s){const{baseFeePerGas:e,timestamp:n}=await z(this,r,"m",H).call(this,s,!1);a.baseFeePerGas=e,a.blockTimestamp=n,a.txParams={...a.txParams,gasUsed:t.gasUsed},a.txReceipt=t,a.verifiedOnBlockchain=!0}a.status=Q.TransactionStatus.confirmed,z(this,r,"m",N).call(this,a,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",a)},j=async function(e,t){const{chainId:n,hash:s,id:i,submittedTime:o,txParams:{nonce:c}}=e;if(!s||!c)return!1;if(!z(this,a,"f").call(this,e))return z(this,m,"f").call(this,"Timeout disabled for transaction",e),!1;const u=(0,ee.getTimeoutAttempts)(n,z(this,g,"f"));if(u===undefined||0===u)return z(this,m,"f").call(this,"Timeout disabled due to threshold",{chainId:n,threshold:u}),!1;const l=parseInt(c,16);if(l>t)return z(this,m,"f").call(this,"Skipping timeout as queued transaction",{transactionNonce:l,nextNonce:t}),!1;try{if(null!==await z(this,r,"m",D).call(this,s)){const e=Date.now();return z(this,m,"f").call(this,"Transaction found on network, recording timestamp",i),z(this,h,"f").set(s,e),!1}const t=z(this,h,"f").get(s)??o;if(t===undefined)return z(this,m,"f").call(this,"Transaction not yet seen on network and has no submitted time, skipping timeout check",i),!1;const{blockTime:a}=(0,ee.getAcceleratedPollingParams)(n,z(this,g,"f")),c=Date.now()-t,l=a*u;return z(this,m,"f").call(this,"Checking timeout duration",{transactionId:i,durationSinceLastSeen:c,timeoutDuration:l,threshold:u,blockTime:a}),c<l?!1:(z(this,m,"f").call(this,"Hit timeout duration threshold",i),z(this,h,"f").delete(s),z(this,r,"m",L).call(this,e,new Error("Transaction not found on network after timeout")),!0)}catch(e){return z(this,m,"f").call(this,"Failed to check transaction by hash",i,e),!1}},B=async function(e,t){const{hash:n,id:r,txParams:{nonce:s}}=e;if(!s||!n)return!1;if(parseInt(s,16)>=t)return!1;let a=z(this,i,"f").get(n);return a===undefined&&(a=0,z(this,i,"f").set(n,a)),a<3?(z(this,m,"f").call(this,"Incrementing dropped block count",{id:r,droppedBlockCount:a}),z(this,i,"f").set(n,a+1),!1):(z(this,m,"f").call(this,"Hit dropped block count",r),z(this,i,"f").delete(n),!0)},F=function(e){const{id:t,txParams:n}=e;return z(this,r,"m",q).call(this).some(e=>e.id!==t&&e.txParams.from===n.from&&e.status===Q.TransactionStatus.confirmed&&e.txParams.nonce&&e.txParams.nonce===n.nonce&&e.type!==Q.TransactionType.incoming&&e.isTransfer===undefined)},O=function(){return z(this,r,"m",V).call(this).filter(e=>e.status===Q.TransactionStatus.submitted&&!e.verifiedOnBlockchain&&!e.isUserOperation&&!e.isStateOnly)},R=function(e,t,n){z(this,r,"m",N).call(this,{...e,warning:{error:t,message:n}},"PendingTransactionTracker:#warnTransaction - Warning added")},L=function(e,t){z(this,m,"f").call(this,"Transaction failed",e.id,t),z(this,r,"m",A).call(this,e),this.hub.emit("transaction-failed",e,t)},M=function(e){z(this,m,"f").call(this,"Transaction dropped",e.id),z(this,r,"m",A).call(this,e),this.hub.emit("transaction-dropped",e)},N=function(e,t){this.hub.emit("transaction-updated",e,t)},G=async function(e){return await(0,W.query)(z(this,c,"f").call(this),"getTransactionReceipt",[e])},D=async function(e){return await(0,W.query)(z(this,c,"f").call(this),"getTransactionByHash",[e])},H=async function(e,t){return await(0,W.query)(z(this,c,"f").call(this),"getBlockByHash",[e,t])},U=async function(e){return await(0,W.query)(z(this,c,"f").call(this),"getTransactionCount",[e])},q=function(){const e=z(this,o,"f").call(this);return z(this,d,"f").call(this).filter(t=>t.chainId===e)},V=function(){const e=z(this,l,"f").call(this);return z(this,d,"f").call(this).filter(t=>t.networkClientId===e)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/PendingTransactionTracker.cjs"}],[2989,{"../logger.cjs":2995,"../types.cjs":2996,"../utils/utils.cjs":3015,"@metamask/utils":3116,"bn.js":4023,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},h=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.hasSimulationDataChanged=n.shouldResimulate=n.ResimulateHelper=n.RESIMULATE_INTERVAL_MS=n.BLOCK_TIME_ADDITIONAL_SECONDS=n.VALUE_COMPARISON_PERCENT_THRESHOLD=n.BLOCKAID_RESULT_TYPE_MALICIOUS=n.RESIMULATE_PARAMS=void 0;const p=e("@metamask/utils"),m=e("bn.js"),g=e("lodash"),b=e("../logger.cjs"),y=e("../types.cjs"),w=e("../utils/utils.cjs"),E=(0,b.createModuleLogger)(b.projectLogger,"resimulate-helper");n.RESIMULATE_PARAMS=["to","value","data"],n.BLOCKAID_RESULT_TYPE_MALICIOUS="Malicious",n.VALUE_COMPARISON_PERCENT_THRESHOLD=5,n.BLOCK_TIME_ADDITIONAL_SECONDS=60,n.RESIMULATE_INTERVAL_MS=3e3;function v(e,t){return!T(e?.difference??"0x0",t?.difference??"0x0",!1===e?.isDecrease,!1===t?.isDecrease)}function T(e,t,r,s){let i=new m.BN((0,p.remove0x)(e),"hex"),a=new m.BN((0,p.remove0x)(t),"hex");return r&&(i=i.neg()),s&&(a=a.neg()),(0,w.getPercentageChange)(i,a)<=n.VALUE_COMPARISON_PERCENT_THRESHOLD}n.ResimulateHelper=class{constructor({getTransactions:e,simulateTransaction:t,onTransactionsUpdate:n}){r.add(this),s.set(this,new Map),i.set(this,void 0),a.set(this,void 0),f(this,i,e,"f"),f(this,a,t,"f"),n(h(this,r,"m",o).bind(this))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(){const e=h(this,i,"f").call(this).filter(e=>e.status===y.TransactionStatus.unapproved),t=new Set(e.map(e=>e.id));new Set([...t,...h(this,s,"f").keys()]).forEach(t=>{const n=e.find(e=>e.id===t);n?.isActive?h(this,r,"m",c).call(this,n):h(this,r,"m",l).call(this,t)})},c=function(e){const{id:t}=e;if(h(this,s,"f").has(t))return;const i=()=>{h(this,a,"f").call(this,e).catch(e=>{E("Error during transaction resimulation",e)}).finally(()=>{h(this,s,"f").has(t)&&h(this,r,"m",u).call(this,t,i)})};h(this,r,"m",u).call(this,t,i),E(`Started resimulating transaction ${t} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`)},u=function(e,t){const r=setTimeout(t,n.RESIMULATE_INTERVAL_MS);h(this,s,"f").set(e,r)},l=function(e){h(this,s,"f").has(e)&&(h(this,r,"m",d).call(this,e),E(`Stopped resimulating transaction ${e} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`))},d=function(e){const t=h(this,s,"f").get(e);t&&(clearTimeout(t),h(this,s,"f").delete(e))},n.shouldResimulate=function(e,t){const{id:r}=t,s=function(e,t){const{id:r,txParams:s}=t,{txParams:i}=e;if(!i||(0,g.isEqual)(i,s))return!1;const a=Object.keys(s).filter(e=>s[e]!==i[e]);return E("Transaction parameters updated",{transactionId:r,updatedProperties:a,originalParams:i,newParams:s}),n.RESIMULATE_PARAMS.some(e=>a.includes(e))}(e,t),i=function(e,t){const{securityAlertResponse:r}=e,{id:s,securityAlertResponse:i}=t;if((0,g.isEqual)(r,i))return!1;return E("Security alert updated",{transactionId:s,originalSecurityAlertResponse:r,newSecurityAlertResponse:i}),i?.result_type===n.BLOCKAID_RESULT_TYPE_MALICIOUS}(e,t),a=function(e,t){const{simulationData:n}=e,{simulationData:r,txParams:s}=t;if(!r||(0,g.isEqual)(n,r))return!1;return!T(s?.value??"0x0",r?.nativeBalanceChange?.difference??"0x0",!1,!1===r?.nativeBalanceChange?.isDecrease)}(e,t),o=s||i||a;let c;if(i||a){c=Math.floor(Date.now()/1e3)+n.BLOCK_TIME_ADDITIONAL_SECONDS}return o&&E("Transaction should be resimulated",{transactionId:r,blockTime:c,parametersUpdated:s,securityAlert:i,valueAndNativeBalanceMismatch:a}),{blockTime:c,resimulate:o}},n.hasSimulationDataChanged=function(e,t){if((0,g.isEqual)(e,t))return!1;if(v(e?.nativeBalanceChange,t?.nativeBalanceChange))return E("Simulation data native balance changed"),!0;if(e.tokenBalanceChanges.length!==t.tokenBalanceChanges.length)return!0;for(const n of e.tokenBalanceChanges){const e=t.tokenBalanceChanges.find(({address:e,id:t})=>e===n.address&&t===n.id);if(!e)return E("Missing new token balance",{address:n.address,id:n.id}),!0;if(v(n,e))return E("Simulation data token balance changed",{originalTokenBalanceChange:n,newTokenBalanceChange:e}),!0}return!1}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/ResimulateHelper.cjs"}],[2990,{"../logger.cjs":2995,"../utils/feature-flags.cjs":3002,"@metamask/utils":3116,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,b=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionPoller=void 0;const w=e("@metamask/utils"),E=e("lodash"),v=e("../logger.cjs"),T=e("../utils/feature-flags.cjs"),x=(0,w.createModuleLogger)(v.projectLogger,"transaction-poller");n.TransactionPoller=class{constructor({blockTracker:e,chainId:t,messenger:n}){r.add(this),s.set(this,0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,!1),f.set(this,void 0),b(this,i,e,"f"),b(this,a,t,"f"),b(this,o,n,"f")}start(e){y(this,d,"f")||(b(this,u,e,"f"),b(this,d,!0,"f"),y(this,r,"m",h).call(this),x("Started"))}stop(){y(this,d,"f")&&(b(this,d,!1,"f"),b(this,u,undefined,"f"),b(this,s,0,"f"),b(this,l,undefined,"f"),y(this,r,"m",m).call(this),y(this,r,"m",g).call(this),x("Stopped"))}setPendingTransactions(e){const t=(y(this,l,"f")??[]).map(e=>e.id);b(this,l,e,"f");const n=e.map(e=>e.id),i=!(0,E.isEqual)(t,n);y(this,d,"f")&&i&&(x("Detected new pending transactions",n),b(this,s,0,"f"),y(this,c,"f")&&(y(this,r,"m",g).call(this),y(this,r,"m",h).call(this)))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function e(){if(!y(this,d,"f"))return;const{countMax:t,intervalMs:n}=(0,T.getAcceleratedPollingParams)(y(this,a,"f"),y(this,o,"f"));if(y(this,s,"f")>=t)return b(this,c,e=>y(this,r,"m",p).call(this,!1,e),"f"),y(this,i,"f").on("latest",y(this,c,"f")),void x("Added block tracker listener");y(this,r,"m",m).call(this),b(this,f,setTimeout(async()=>{await y(this,r,"m",p).call(this,!0),y(this,r,"m",e).call(this)},n),"f")},p=async function(e,t){e?x("Accelerated interval",y(this,s,"f")+1):x("Block tracker interval",t);const n=t??await y(this,i,"f").getLatestBlock();await(y(this,u,"f")?.call(this,n)),e&&y(this,d,"f")&&b(this,s,y(this,s,"f")+1,"f")},m=function(){y(this,f,"f")&&(clearTimeout(y(this,f,"f")),b(this,f,undefined,"f"))},g=function(){y(this,c,"f")&&(y(this,i,"f").removeListener("latest",y(this,c,"f")),b(this,c,undefined,"f"))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/TransactionPoller.cjs"}],[2991,{"../logger.cjs":2995,"@metamask/utils":3116,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectPublishHook=void 0;const l=e("@metamask/utils"),d=e("lodash"),f=e("../logger.cjs"),h=(0,l.createModuleLogger)(f.projectLogger,"collect-publish-hook");n.CollectPublishHook=class{constructor(e){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,a,(0,l.createDeferredPromise)(),"f"),c(this,s,[],"f"),c(this,i,e,"f")}getHook(){return u(this,r,"m",o).bind(this)}ready(){return u(this,a,"f").promise}success(e){if(h("Success",{transactionHashes:e}),e.length!==u(this,i,"f"))throw new Error("Transaction hash count mismatch");for(let t=0;t<u(this,s,"f").length;t++){const n=u(this,s,"f")[t],r=e[t];n.promise.resolve({transactionHash:r})}}error(e){h("Error",{error:e});for(const t of u(this,s,"f"))t.promise.reject(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(e,t){const n=e.txParams.nonce??"0x0",r=parseInt(n,16);h("Processing transaction",{nonce:r,signedTx:t,transactionMeta:e});const o=(0,l.createDeferredPromise)();if(u(this,s,"f").push({nonce:r,promise:o,signedTransaction:t}),c(this,s,(0,d.sortBy)(u(this,s,"f"),e=>e.nonce),"f"),u(this,s,"f").length===u(this,i,"f")){h("All transactions signed");const e=u(this,s,"f").map(e=>e.signedTransaction);u(this,a,"f").resolve({signedTransactions:e})}return o.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/CollectPublishHook.cjs"}],[2992,{"../logger.cjs":2995,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ExtraTransactionsPublishHook=void 0;const l=e("@metamask/utils"),d=e("../logger.cjs"),f=(0,l.createModuleLogger)(d.projectLogger,"extra-transactions-publish-hook");n.ExtraTransactionsPublishHook=class{constructor({addTransactionBatch:e,getTransaction:t,originalPublishHook:n}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c(this,s,e,"f"),c(this,i,t,"f"),c(this,a,n,"f")}getHook(){return u(this,r,"m",o).bind(this)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,o=async function(e,t){f("Publishing transaction as batch",{transactionMeta:e,signedTx:t});const{batchTransactions:n,batchTransactionsOptions:r,id:o,networkClientId:c,txParams:d}=e,h=d.from,p=d.to,m=d.data,g=d.value,b=d.gas,y=d.maxFeePerGas,w=d.maxPriorityFeePerGas,E=t,v=(0,l.createDeferredPromise)(),T={existingTransaction:{id:o,onPublish:({newSignature:e,transactionHash:t})=>{if(e){const t=u(this,i,"f").call(this,o);return f("Calling original publish hook with new signature",{latestTransactionMeta:t,newSignature:e}),void u(this,a,"f").call(this,t,e).then(v.resolve).catch(v.reject)}v.resolve({transactionHash:t})},signedTransaction:E},params:{data:m,gas:b,maxFeePerGas:y,maxPriorityFeePerGas:w,to:p,value:g}},x=(n??[]).map(e=>{const{isAfter:t,type:n,...r}=e;return{isAfter:t,params:r,type:n}}),S=[...x.filter(e=>!1===e.isAfter).map(({isAfter:e,...t})=>({...t})),T,...x.filter(e=>e.isAfter===undefined||e.isAfter).map(({isAfter:e,...t})=>({...t}))];f("Adding transaction batch",{from:h,networkClientId:c,transactions:S});const P=r??{disable7702:!0,disableHook:!1,disableSequential:!0};return await u(this,s,"f").call(this,{from:h,networkClientId:c,requireApproval:!1,transactions:S,...P}),v.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/ExtraTransactionsPublishHook.cjs"}],[2993,{"../logger.cjs":2995,"@metamask/rpc-errors":2600,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},m=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SequentialPublishBatchHook=void 0;const g=e("@metamask/rpc-errors"),b=e("@metamask/utils"),y=e("../logger.cjs"),w=(0,b.createModuleLogger)(y.projectLogger,"sequential-publish-batch-hook");n.SequentialPublishBatchHook=class{constructor({publishTransaction:e,getTransaction:t,getPendingTransactionTracker:n,getEthQuery:u}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,{}),p(this,s,e,"f"),p(this,i,t,"f"),p(this,a,u,"f"),p(this,o,n,"f")}getHook(){return m(this,r,"m",u).bind(this)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,r=new WeakSet,u=async function({from:e,networkClientId:t,transactions:n}){w("Starting sequential publish batch hook",{from:e,networkClientId:t});const c=m(this,o,"f").call(this,t),u=[];for(const e of n)try{const n=m(this,i,"f").call(this,String(e.id)),o=await m(this,s,"f").call(this,m(this,a,"f").call(this,t),n);w("Transaction published",{transactionHash:o});const d={...n,hash:o},f=m(this,r,"m",l).call(this,c,d.id,d.hash);c.addTransactionToPoll(d),await f,u.push({transactionHash:o})}catch(t){throw w("Batch transaction failed",{transaction:e,error:t}),c.stop(),g.rpcErrors.internal("Failed to publish batch transaction")}return w("Sequential publish batch hook completed",{results:u}),c.stop(),{results:u}},l=async function(e,t,n){return new Promise((s,i)=>{const a=m(this,r,"m",d).bind(this,t,n,s,e),o=m(this,r,"m",f).bind(this,t,n,i,e);m(this,c,"f")[t]={onConfirmed:a,onFailedOrDropped:o},e.hub.on("transaction-confirmed",a),e.hub.on("transaction-failed",o),e.hub.on("transaction-dropped",o)})},d=function(e,t,n,s,i){i.id===e&&(w("Transaction confirmed",{transactionHash:t}),m(this,r,"m",h).call(this,s,e),n(i))},f=function(e,t,n,s,i,a){i.id===e&&(w("Transaction failed or dropped",{transactionHash:t,error:a}),m(this,r,"m",h).call(this,s,e),n(new Error(`Transaction ${t} failed or dropped.`)))},h=function(e,t){const n=m(this,c,"f")[t];e.hub.off("transaction-confirmed",n.onConfirmed),e.hub.off("transaction-failed",n.onFailedOrDropped),e.hub.off("transaction-dropped",n.onFailedOrDropped),delete m(this,c,"f")[t]}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/SequentialPublishBatchHook.cjs"}],[2994,{"./TransactionController.cjs":2971,"./constants.cjs":2974,"./helpers/AccountsApiRemoteTransactionSource.cjs":2983,"./types.cjs":2996,"./utils/gas-flow.cjs":3006,"./utils/prepare.cjs":3010,"./utils/transaction-type.cjs":3014,"./utils/utils.cjs":3015},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HARDFORK=n.INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS=n.CHAIN_IDS=n.normalizeTransactionParams=n.isEIP1559Transaction=n.mergeGasFeeEstimates=n.determineTransactionType=n.WalletDevice=n.UserFeeLevel=n.TransactionType=n.TransactionStatus=n.TransactionEnvelopeType=n.TransactionContainerType=n.SimulationTokenStandard=n.SimulationErrorCode=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;var r=e("./TransactionController.cjs");Object.defineProperty(n,"CANCEL_RATE",{enumerable:!0,get:function(){return r.CANCEL_RATE}}),Object.defineProperty(n,"SPEED_UP_RATE",{enumerable:!0,get:function(){return r.SPEED_UP_RATE}}),Object.defineProperty(n,"TransactionController",{enumerable:!0,get:function(){return r.TransactionController}});var s=e("./types.cjs");Object.defineProperty(n,"GasFeeEstimateLevel",{enumerable:!0,get:function(){return s.GasFeeEstimateLevel}}),Object.defineProperty(n,"GasFeeEstimateType",{enumerable:!0,get:function(){return s.GasFeeEstimateType}}),Object.defineProperty(n,"SimulationErrorCode",{enumerable:!0,get:function(){return s.SimulationErrorCode}}),Object.defineProperty(n,"SimulationTokenStandard",{enumerable:!0,get:function(){return s.SimulationTokenStandard}}),Object.defineProperty(n,"TransactionContainerType",{enumerable:!0,get:function(){return s.TransactionContainerType}}),Object.defineProperty(n,"TransactionEnvelopeType",{enumerable:!0,get:function(){return s.TransactionEnvelopeType}}),Object.defineProperty(n,"TransactionStatus",{enumerable:!0,get:function(){return s.TransactionStatus}}),Object.defineProperty(n,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(n,"UserFeeLevel",{enumerable:!0,get:function(){return s.UserFeeLevel}}),Object.defineProperty(n,"WalletDevice",{enumerable:!0,get:function(){return s.WalletDevice}});var i=e("./utils/transaction-type.cjs");Object.defineProperty(n,"determineTransactionType",{enumerable:!0,get:function(){return i.determineTransactionType}});var a=e("./utils/gas-flow.cjs");Object.defineProperty(n,"mergeGasFeeEstimates",{enumerable:!0,get:function(){return a.mergeGasFeeEstimates}});var o=e("./utils/utils.cjs");Object.defineProperty(n,"isEIP1559Transaction",{enumerable:!0,get:function(){return o.isEIP1559Transaction}}),Object.defineProperty(n,"normalizeTransactionParams",{enumerable:!0,get:function(){return o.normalizeTransactionParams}});var c=e("./constants.cjs");Object.defineProperty(n,"CHAIN_IDS",{enumerable:!0,get:function(){return c.CHAIN_IDS}});var u=e("./helpers/AccountsApiRemoteTransactionSource.cjs");Object.defineProperty(n,"INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return u.SUPPORTED_CHAIN_IDS}});var l=e("./utils/prepare.cjs");Object.defineProperty(n,"HARDFORK",{enumerable:!0,get:function(){return l.HARDFORK}})}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/index.cjs"}],[2995,{"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.incomingTransactionsLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("transaction-controller"),n.incomingTransactionsLogger=(0,r.createModuleLogger)(n.projectLogger,"incoming-transactions")}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/logger.cjs"}],[2996,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f;Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationErrorCode=n.SimulationTokenStandard=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.UserFeeLevel=n.TransactionEnvelopeType=n.TransactionContainerType=n.TransactionType=n.WalletDevice=n.TransactionStatus=void 0,function(e){e.unapproved="unapproved",e.approved="approved",e.signed="signed",e.submitted="submitted",e.confirmed="confirmed",e.failed="failed",e.dropped="dropped",e.rejected="rejected",e.cancelled="cancelled"}(r||(n.TransactionStatus=r={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(s||(n.WalletDevice=s={})),function(e){e.batch="batch",e.bridge="bridge",e.bridgeApproval="bridgeApproval",e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.gasPayment="gas_payment",e.incoming="incoming",e.lendingDeposit="lendingDeposit",e.lendingWithdraw="lendingWithdraw",e.musdConversion="musdConversion",e.perpsDeposit="perpsDeposit",e.personalSign="personal_sign",e.predictBuy="predictBuy",e.predictClaim="predictClaim",e.predictDeposit="predictDeposit",e.predictSell="predictSell",e.predictWithdraw="predictWithdraw",e.relayDeposit="relayDeposit",e.retry="retry",e.revokeDelegation="revokeDelegation",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.stakingClaim="stakingClaim",e.stakingDeposit="stakingDeposit",e.stakingUnstake="stakingUnstake",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance",e.shieldSubscriptionApprove="shieldSubscriptionApprove"}(i||(n.TransactionType=i={})),function(e){e.EnforcedSimulations="enforcedSimulations"}(a||(n.TransactionContainerType=a={})),function(e){e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e.setCode="0x4"}(o||(n.TransactionEnvelopeType=o={})),function(e){e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium"}(c||(n.UserFeeLevel=c={})),function(e){e.Low="low",e.Medium="medium",e.High="high"}(u||(n.GasFeeEstimateLevel=u={})),function(e){e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice"}(l||(n.GasFeeEstimateType=l={})),function(e){e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155"}(d||(n.SimulationTokenStandard=d={})),function(e){e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted"}(f||(n.SimulationErrorCode=f={}))}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/types.cjs"}],[2997,{"../api/simulation-api.cjs":2973,"../constants.cjs":2974,"../errors.cjs":2975,"../logger.cjs":2995,"../types.cjs":2996,"./balance.cjs":2998,"@ethersproject/abi":723,"@metamask/controller-utils":1449,"@metamask/metamask-eth-abis":2263,"@metamask/utils":3116,"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getBalanceChanges=n.SupportedToken=void 0;const s=e("@ethersproject/abi"),i=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),o=e("@metamask/utils"),c=r(e("bn.js")),u=e("./balance.cjs"),l=e("../api/simulation-api.cjs"),d=e("../constants.cjs"),f=e("../errors.cjs"),h=e("../logger.cjs"),p=e("../types.cjs");var m;!function(e){e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy"}(m||(n.SupportedToken=m={}));const g=(0,o.createModuleLogger)(h.projectLogger,"balance-changes"),b=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],y={[m.ERC20]:{abi:a.abiERC20,standard:p.SimulationTokenStandard.erc20},[m.ERC721]:{abi:a.abiERC721,standard:p.SimulationTokenStandard.erc721},[m.ERC1155]:{abi:a.abiERC1155,standard:p.SimulationTokenStandard.erc1155},[m.ERC20_WRAPPED]:{abi:d.ABI_SIMULATION_ERC20_WRAPPED,standard:p.SimulationTokenStandard.erc20},[m.ERC721_LEGACY]:{abi:d.ABI_SIMULATION_ERC721_LEGACY,standard:p.SimulationTokenStandard.erc721}},w=["execution reverted","insufficient funds for gas"];function E(e){if(Array.isArray(e))return e.map(E);let t=e;return t=t.toHexString?.()??t,t=t.toLowerCase?.()??t,t}function v(e){return"Transfer"===e.name&&e.tokenStandard===p.SimulationTokenStandard.erc721&&0===parseInt(e.args.from,16)}function T(e){return e.tokenStandard===p.SimulationTokenStandard.erc721?[e.args.tokenId]:e.tokenStandard===p.SimulationTokenStandard.erc1155&&"TransferSingle"===e.name?[e.args.id]:e.tokenStandard===p.SimulationTokenStandard.erc1155&&"TransferBatch"===e.name?e.args.ids:[undefined]}function x(e){switch(e){case p.SimulationTokenStandard.erc721:return new s.Interface(a.abiERC721);case p.SimulationTokenStandard.erc1155:return new s.Interface(a.abiERC1155);default:return new s.Interface(a.abiERC20)}}function S(e,t,n){const r=x(t.standard);try{if(t.standard===p.SimulationTokenStandard.erc721){const t=r.decodeFunctionResult("ownerOf",n.return);return t[0].toLowerCase()===e.toLowerCase()?"0x1":"0x0"}const s=r.decodeFunctionResult("balanceOf",n.return);return(0,i.toHex)(s[0])}catch(e){throw g("Failed to decode balance transaction",e,{token:t,response:n}),new f.SimulationError(`Failed to decode balance transaction for token ${t.address}: ${String(e)}`)}}function P(e,t,n){const r=x(e);switch(e){case p.SimulationTokenStandard.erc721:return r.encodeFunctionData("ownerOf",[n]);case p.SimulationTokenStandard.erc1155:return r.encodeFunctionData("balanceOf",[t,n]);default:return r.encodeFunctionData("balanceOf",[t])}}function k(e){return[...e.logs??[],...(e.calls??[]).map(e=>k(e)).flat()]}function I(e,t,n=0){const r=(0,i.hexToBN)(t).add(new c.default(n)),s=(0,i.hexToBN)(e),a=r.sub(s),o=a.isNeg(),u=(0,i.toHex)(a.abs());return a.isZero()?(g("Balance change is zero"),undefined):{previousBalance:e,newBalance:(0,i.toHex)(r),difference:u,isDecrease:o}}async function A({request:e,params:t,before:n=[],after:r=[]}){const{blockTime:s,chainId:a,ethQuery:o,getSimulationConfig:d,txParams:f}=e,{authorizationList:h}=f,p=f.from,m=h?.map(e=>({address:e.address,from:p})),b=[...n,{authorizationList:m,data:f.data,from:f.from,gas:f.gas,maxFeePerGas:f.maxFeePerGas??f.gasPrice,maxPriorityFeePerGas:f.maxPriorityFeePerGas??f.gasPrice,to:f.to,value:f.value},...r],y=function(e){const{txParams:t}=e,n=(0,i.hexToBN)(t.gas??"0x0"),r=(0,i.hexToBN)(t.maxFeePerGas??t.gasPrice??"0x0"),s=(0,i.hexToBN)(t.value??"0x0"),a=(e.nestedTransactions??[]).map(e=>(0,i.hexToBN)(e.value??"0x0")).reduce((e,t)=>e.add(t),new c.default(0));return n.mul(r).add(s).add(a)}(e),w=(0,i.toHex)(y);g("Required balance",w);const{balanceRaw:E}=await(0,u.getNativeBalance)(p,o),v=(0,i.toHex)(E),T=(0,i.hexToBN)(v);g("Current balance",v);const x=T.lt(y);return await(0,l.simulateTransactions)(a,{...t,getSimulationConfig:d,transactions:b,withGas:!0,withDefaultBlockOverrides:!0,...s&&{blockOverrides:{...t?.blockOverrides,time:(0,i.toHex)(s)}},...x&&{overrides:{...t?.overrides,[p]:{...t?.overrides?.[p],balance:w}}}})}n.getBalanceChanges=async function(e){g("Request",e);try{const t=await A({request:e,params:{withCallTrace:!0,withLogs:!0}}),n=t.transactions?.[0]?.error;if(n)throw new f.SimulationError(n);const r=function(e,t){const n=t.transactions[0];if(!n)return undefined;const{txParams:r}=e,s=r.from,{stateDiff:i}=n,a=i?.pre?.[s]?.balance,o=i?.post?.[s]?.balance;if(!a||!o)return undefined;return I(a,o,n.gasCost)}(e,t),i=function(e){const t=k(e.transactions[0]?.callTrace??{});g("Extracted logs",t);const n=function(){const e=Object.values(m);return new Map(e.map(e=>{const{abi:t}=y[e];return[e,new s.Interface(t)]}))}();return t.map(e=>{const t=function(e,t){const n=Object.values(m);for(const r of n)try{const n=t.get(r),{abi:s,standard:i}=y[r];return{...n.parseLog(e),abi:s,standard:i}}catch{continue}return undefined}(e,n);if(!t)return g("Failed to parse log",e),undefined;const r=t.abi.find(e=>e.name===t.name)?.inputs;if(!r)return g("Failed to find inputs for event",t),undefined;if(!b.includes(t.name))return g("Ignoring unsupported event",t.name,t),undefined;g("Normalizing event args",t.name,t);const s=function(e,t){return e.reduce((e,n,r)=>{const s=t[r].name.replace("_",""),i=E(n);return e[s]=i,e},{})}(t.args,r);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:s,abi:t.abi}}).filter(e=>e!==undefined)}(t);g("Parsed events",i);const a=await async function(e,t){const{txParams:n}=e,r=n.from,s=function(e,t){const n=new Set,r=new Map,s=new Map,i=e.txParams.from,a=t.filter(e=>[e.args.from,e.args.to].includes(i));g("Filtered user events",a);for(const e of a){const t=T(e);g("Extracted token IDs",t);for(const a of t){const t={address:e.contractAddress,standard:e.tokenStandard,id:a},o=JSON.stringify(t);if(n.has(o)){g("Ignoring additional event with same contract and token ID",t);continue}n.add(o);const c=P(e.tokenStandard,i,a),u={from:i,to:e.contractAddress,data:c};v(e)||r.set(t,u),s.set(t,u)}}return{before:r,after:s}}(e,t);g("Generated balance transactions",[...s.after.values()]);const i=s.before.size+s.after.size+1;if(1===i)return[];const a=await A({request:e,before:[...s.before.values()],after:[...s.after.values()]});if(g("Balance simulation response",a),a.transactions.length!==i)throw new f.SimulationInvalidResponseError;let o=0;return[...s.after.keys()].map((e,t)=>{const n=I(!s.before.get(e)?"0x0":S(r,e,a.transactions[o++]),S(r,e,a.transactions[t+s.before.size+1]));return n?{...e,...n}:undefined}).filter(e=>e!==undefined)}(e,i),o=t.transactions?.[0]?.gasUsed;return{simulationData:{nativeBalanceChange:r,tokenBalanceChanges:a},gasUsed:o}}catch(t){g("Failed to get balance changes",t,e);let n=t;w.some(e=>n.message?.includes(e))&&(n=new f.SimulationRevertedError);const{code:r,message:s}=n;return{simulationData:{tokenBalanceChanges:[],error:{code:r,message:s}},gasUsed:undefined}}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/balance-changes.cjs"}],[2998,{"@metamask/controller-utils":1449,"bignumber.js":3021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeBalanceSufficientForGas=n.getNativeBalance=void 0;const r=e("@metamask/controller-utils"),s=e("bignumber.js");async function i(e,t){const n=await(0,r.query)(t,"getBalance",[e,"latest"]),i=new s.BigNumber(n).toString(10);return{balanceHuman:new s.BigNumber(i).shiftedBy(-18).toString(10),balanceRaw:i}}n.getNativeBalance=i,n.isNativeBalanceSufficientForGas=async function(e,t){const n=e.txParams.from,r=new s.BigNumber(e.txParams.gas??"0x0").multipliedBy(e.txParams.maxFeePerGas??e.txParams.gasPrice??"0x0"),{balanceRaw:a}=await i(n,t);return r.isLessThanOrEqualTo(a)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/balance.cjs"}],[2999,{"../gas-flows/DefaultGasFeeFlow.cjs":2976,"../helpers/GasFeePoller.cjs":2984,"../hooks/CollectPublishHook.cjs":2991,"../hooks/SequentialPublishBatchHook.cjs":2993,"../index.cjs":2994,"../logger.cjs":2995,"../types.cjs":2996,"./eip7702.cjs":3e3,"./feature-flags.cjs":3002,"./gas.cjs":3007,"./validation.cjs":3016,"@metamask/controller-utils":1449,"@metamask/rpc-errors":2600,"@metamask/utils":3116,uuid:5734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isAtomicBatchSupported=n.addTransactionBatch=n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/rpc-errors"),i=e("@metamask/utils"),a=e("uuid"),o=e("./eip7702.cjs"),c=e("./feature-flags.cjs"),u=e("./gas.cjs"),l=e("./validation.cjs"),d=e("../index.cjs"),f=e("../gas-flows/DefaultGasFeeFlow.cjs"),h=e("../helpers/GasFeePoller.cjs"),p=e("../hooks/CollectPublishHook.cjs"),m=e("../hooks/SequentialPublishBatchHook.cjs"),g=e("../logger.cjs"),b=e("../types.cjs"),y=(0,i.createModuleLogger)(g.projectLogger,"batch");function w(){const e=(0,a.v4)(),t=new Uint8Array((0,a.parse)(e));return(0,i.bytesToHex)(t)}async function E(e,t,n,s,i,a){const{assetsFiatValues:o,existingTransaction:c,params:u,type:l}=t,{addTransaction:f,getTransaction:p,request:m,updateTransaction:g}=s,{from:b,networkClientId:w,origin:E}=m;if(c){const{id:t,onPublish:i}=c;let o=p(t);const l=o.txParams.nonce;let{signedTransaction:d}=c;const f=l?parseInt(l,16):undefined,h=a>0&&f!==undefined?f+a:undefined;if(g({transactionId:t},t=>{t.batchId=e,h&&(t.txParams.nonce=(0,r.toHex)(h))}),h){const e=await v({transactionId:t,request:s});d=e.newSignature,o=e.transactionMeta}return n(o,d).then(i).catch(()=>{}),y("Processed existing transaction with hook",{id:t,params:u}),{id:t,params:u}}const T={...i,txParams:{...u,from:b,gas:i?.gas??u.gas}};i&&(0,h.updateTransactionGasEstimates)({txMeta:T,userFeeLevel:d.GasFeeEstimateLevel.Medium});const{transactionMeta:x}=await f(T.txParams,{assetsFiatValues:o,batchId:e,disableGasBuffer:!0,networkClientId:w,origin:E,publishHook:n,requireApproval:!1,type:l}),{id:S,txParams:P}=x,k={data:P.data,gas:P.gas,maxFeePerGas:P.maxFeePerGas,maxPriorityFeePerGas:P.maxPriorityFeePerGas,to:P.to,value:P.value};return y("Processed new transaction with hook",{id:S,params:k,type:l}),{id:S,params:k,type:l}}async function v({request:e,transactionId:t}){const{getTransaction:n,signTransaction:r}=e,s=n(t);y("Re-signing existing transaction",{transactionId:t,txParams:s.txParams});const i=await r(s);if(!i)throw new Error("Failed to re-sign transaction");const a=n(t);return y("New signature",i),{newSignature:i,transactionMeta:a}}n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT="Upgrade contract address not found",n.addTransactionBatch=async function(e){const{getInternalAccounts:t,messenger:i,request:a}=e,h=(0,c.getBatchSizeLimit)(i);if((0,l.validateBatchRequest)({internalAccounts:t(),request:a,sizeLimit:h}),y("Adding",a),!a.disable7702)try{return await async function(e){const{addTransaction:t,getChainId:r,messenger:i,publicKeyEIP7702:a,request:u}=e,{batchId:l,disableUpgrade:f,from:h,gasFeeToken:p,gasLimit7702:m,networkClientId:g,origin:E,overwriteUpgrade:T,requestId:x,requireApproval:S,securityAlertId:P,skipInitialGasEstimate:k,transactions:I,validateSecurity:A}=u,_=r(g),C=e.getEthQuery(g),j=(0,o.doesChainSupportEIP7702)(_,i);if(!j)throw y("Chain does not support EIP-7702",_),s.rpcErrors.internal("Chain does not support EIP-7702");if(!a)throw s.rpcErrors.internal(o.ERROR_MESSGE_PUBLIC_KEY);let B=!1;if(!f){const{delegationAddress:e,isSupported:t}=await(0,o.isAccountUpgradedToEIP7702)(h,_,a,i,C);if(y("Account",{delegationAddress:e,isSupported:t}),!t&&e&&!T)throw y("Account upgraded to unsupported contract",h,e),s.rpcErrors.internal("Account upgraded to unsupported contract");B=!t,B&&e&&y("Overwriting authorization as already upgraded",{current:e})}const F=await Promise.all(I.map(e=>async function(e,t,n){const{from:r}=e,{params:s,type:i}=t;if(i)return{...s,type:i};const{type:a}=await(0,d.determineTransactionType)({from:r,...s},n);return{...s,type:a}}(u,e,C))),O={...(0,o.generateEIP7702BatchTransaction)(h,F),from:h,gas:m,maxFeePerGas:F[0]?.maxFeePerGas,maxPriorityFeePerGas:F[0]?.maxPriorityFeePerGas};if(B){const e=(0,c.getEIP7702UpgradeContractAddress)(_,i,a);if(!e)throw s.rpcErrors.internal(n.ERROR_MESSAGE_NO_UPGRADE_CONTRACT);O.type=b.TransactionEnvelopeType.setCode,O.authorizationList=[{address:e}]}if(A){const e={method:"eth_sendTransaction",params:[{...O,authorizationList:undefined,type:b.TransactionEnvelopeType.feeMarket}],delegationMock:O.authorizationList?.[0]?.address,origin:E};y("Security request",e),A(e,_).catch(e=>{y("Security validation failed",e)})}y("Adding batch transaction",O,g);const R=l??w(),L=P?{securityAlertId:P}:undefined,M=I.find(e=>e.existingTransaction)?.existingTransaction;if(M)return await async function({batchId:e,existingTransaction:t,nestedTransactions:n,request:r,txParams:s}){const{getTransaction:i,estimateGas:a,updateTransaction:o}=r,c=i(t.id);if(!c)throw new Error("Existing transaction not found");y("Converting existing transaction to 7702",{batchId:e,txParams:s});const{networkClientId:u}=c,l=await a(s,u);y("Estimated gas for converted EIP-7702 transaction",l),o({transactionId:c.id},t=>{var r;t.batchId=e,t.nestedTransactions=n,t.txParams=s,t.txParams.gas=l.gas,t.txParams.gasLimit=l.gas,t.txParams.maxFeePerGas=c.txParams.maxFeePerGas,t.txParams.maxPriorityFeePerGas=c.txParams.maxPriorityFeePerGas,t.txParams.nonce=c.txParams.nonce,(r=t.txParams).type??(r.type=b.TransactionEnvelopeType.feeMarket)});const{newSignature:d}=await v({request:r,transactionId:c.id});t.onPublish?.({transactionHash:undefined,newSignature:d}),y("Transaction updated to EIP-7702",{batchId:e,txParams:s,newSignature:d})}({batchId:R,existingTransaction:M,nestedTransactions:F,request:e,txParams:O}),{batchId:R};const{result:N}=await t(O,{batchId:R,gasFeeToken:p,isGasFeeIncluded:u.isGasFeeIncluded,isGasFeeSponsored:u.isGasFeeSponsored,nestedTransactions:F,networkClientId:g,origin:E,requestId:x,requireApproval:S,securityAlertResponse:L,skipInitialGasEstimate:k,type:b.TransactionType.batch}),G=await N;return y("Batch transaction added",{batchId:R,transactionHash:G}),{batchId:R}}(e)}catch(e){if(!(e instanceof s.JsonRpcError&&"Chain does not support EIP-7702"===e.message))throw e}return await async function(e){const{messenger:t,publishBatchHook:n,request:i,update:a}=e,{from:o,networkClientId:c,origin:l,requireApproval:h,transactions:g}=i;let b,v=!1;y("Adding transaction batch using hook",i);const T=new m.SequentialPublishBatchHook({publishTransaction:e.publishTransaction,getTransaction:e.getTransaction,getEthQuery:e.getEthQuery,getPendingTransactionTracker:e.getPendingTransactionTracker});let{disable7702:x,disableSequential:S}=i;const{disableHook:P,useHook:k}=i;k&&(x=!0,S=!0);let I,A=null;!P&&n?A=n:S||(A=T.getHook(),v=!0);if(!A)throw y("No supported batch methods found",{disable7702:x,disableHook:P,disableSequential:S}),s.rpcErrors.internal("Can't process batch");const _=w(),C=g.map(e=>({...e,origin:l})),j=C.length,B=new p.CollectPublishHook(j);try{h&&(I=await async function({batchId:e,request:t}){const{messenger:n,request:r,isSimulationEnabled:s,getChainId:i,getEthQuery:a,getGasFeeEstimates:o,getSimulationConfig:c,update:l}=t,{from:h,origin:p,networkClientId:m,transactions:g}=r,b=a(m);if(!s())throw new Error("Cannot create transaction batch as simulation not supported");y("Preparing approval data for batch");const w=i(m),{totalGasLimit:E}=await(0,u.simulateGasBatch)({chainId:w,from:h,getSimulationConfig:c,transactions:g}),v=(P={chainId:w,from:h,gas:E,id:e,networkClientId:m,origin:p,transactions:g},{...P,status:d.TransactionStatus.unapproved}),T=new f.DefaultGasFeeFlow,x=await o({networkClientId:m}),S=await T.getGasFees({ethQuery:b,gasFeeControllerData:x,messenger:n,transactionMeta:{...v,txParams:{from:h,gas:E},time:Date.now()}});var P;return v.gasFeeEstimates=S.estimates,y("Saving transaction batch metadata",v),function(e,t){t(t=>{t.transactionBatches=[...t.transactionBatches,e]})}(v,l),v}({batchId:_,request:e}),b=(await async function(e,t){const n=String(e.id),{origin:s}=e,i=r.ApprovalType.TransactionBatch,a={txBatchId:n};return y("Requesting approval for transaction batch",n),await t.call("ApprovalController:addRequest",{id:n,origin:s??r.ORIGIN_METAMASK,requestData:a,expectsResult:!0,type:i},!0)}(I,t)).resultCallbacks);const n=B.getHook(),s=[];let i=0;for(const t of C){const r=await E(_,t,n,e,I,i);s.push(r),i+=1}const{signedTransactions:a}=await B.ready(),l={from:o,networkClientId:c,transactions:s.map((e,t)=>({...e,signedTx:a[t]}))};y("Calling publish batch hook",l);let p=await A(l);if(y("Publish batch hook result",p),!p&&!v&&!S){y("Fallback to sequential publish batch hook due to empty results");const e=T.getHook();p=await e(l)}if(!p?.results?.length)throw new Error("Publish batch hook did not return a result");const m=p.results.map(({transactionHash:e})=>e);return B.success(m),b?.success(),y("Completed batch transaction with hook",m),{batchId:_}}catch(e){throw y("Publish batch hook failed",e),B.error(e),b?.error(e),e}finally{y("Cleaning up publish batch hook",_),function(e,t){e(e=>{e.transactionBatches=e.transactionBatches.filter(e=>e.id!==t)})}(a,_)}}(e)},n.isAtomicBatchSupported=async function(e){const{address:t,chainIds:n,getEthQuery:r,messenger:i,publicKeyEIP7702:a}=e;if(!a)throw s.rpcErrors.internal(o.ERROR_MESSGE_PUBLIC_KEY);const u=(0,c.getEIP7702SupportedChains)(i).filter(e=>!n||n.includes(e)),l=(await Promise.all(u.map(async e=>{try{const n=r(e),{isSupported:s,delegationAddress:u}=await(0,o.isAccountUpgradedToEIP7702)(t,e,a,i,n);return{chainId:e,delegationAddress:u,isSupported:s,upgradeContractAddress:(0,c.getEIP7702UpgradeContractAddress)(e,i,a)}}catch(t){return y("Error checking atomic batch support",e,t),undefined}}))).filter(e=>Boolean(e));return y("Atomic batch supported results",l),l}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/batch.cjs"}],[3,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={chunks:[{color:[102,24,0],faces:[[2,3,1],[1,3,4],[5,1,4],[6,7,61],[6,61,8],[15,20,12],[15,9,19],[19,20,15],[1,5,0],[1,0,2],[31,30,32],[30,33,32],[34,33,30],[35,37,60],[35,60,36],[44,41,49],[44,48,38],[48,44,49],[30,29,34],[30,31,29],[12,20,49],[12,49,41],[20,19,48],[20,48,49],[19,9,38],[19,38,48]],materialName:"model:model1:brown"},{color:[227,72,7],faces:[[9,6,63],[17,28,13],[13,16,17],[8,65,10],[27,7,59],[63,8,10],[18,2,21],[2,0,21],[21,22,23],[24,22,21],[21,5,24],[14,16,13],[25,16,14],[16,24,17],[25,22,24],[16,25,24],[17,24,5],[0,5,21],[61,27,8],[62,37,35],[42,46,45],[46,42,57],[37,64,56],[56,36,60],[37,62,39],[47,50,31],[31,50,29],[50,52,51],[53,50,51],[50,53,34],[43,42,45],[45,54,43],[53,45,46],[54,53,51],[54,45,53],[53,46,34],[29,50,34],[36,56,58],[23,22,51],[23,51,52],[22,25,54],[22,54,51],[25,14,43],[25,43,54],[56,60,37],[7,27,61],[38,62,35],[8,63,6],[37,39,64],[8,27,65]],materialName:"model:model1:orange_dark"},{color:[255,92,22],faces:[[27,59,4],[65,3,10],[3,2,18],[23,18,21],[27,4,3],[28,15,13],[56,32,33],[56,64,32],[32,47,31],[52,50,47],[56,33,58],[57,42,44],[18,23,52],[18,52,47],[32,64,39],[27,3,65]],materialName:"model:model1:orange_mid"},{color:[192,196,205],faces:[[26,13,11],[14,13,26],[43,55,42],[55,40,42],[14,26,55],[14,55,43],[26,11,40],[26,40,55],[11,12,41],[11,41,40]],materialName:"model:model1:white_underside"},{color:[255,141,93],faces:[[17,59,7],[17,7,28],[28,9,15],[9,28,6],[28,7,6],[58,34,46],[58,46,57],[58,57,36],[57,44,38],[38,35,57],[36,57,35],[62,63,10],[62,10,39],[10,3,32],[10,32,39],[3,18,47],[3,47,32],[59,5,4],[34,58,33],[5,59,17],[38,9,63],[38,63,62]],materialName:"model:model1:pasted__orange_bright_alt"},{color:[231,235,246],faces:[[15,12,11],[15,11,13],[44,42,40],[44,40,41]],materialName:"model:model1:white_side"}],positions:[[11.086484,5.960324999999999,2.77823],[6.465275,4.255375000000001,1.88451],[9.594237,11.702960999999998,4.818539],[2.466232,4.250507000000001,6.037715],[6.464263,1.4749859999999995,3.628665],[9.605342,1.4489300000000007,.910938],[2.231848,-2.4387,8.109403],[4.922223,-1.7745820000000005,6.462612],[2.730904,-.9981170000000006,8.231533],[.93571,-5.683305,13.898631],[1.826048,.1982759999999999,8.967493],[1.258694,-9.521664999999999,11.713494],[1.255813,-7.606733,14.061978],[4.829895,-7.400282,5.474004],[4.015327,-7.042688,.703314],[1.612633,-6.389058,13.879456],[9.587111,-8.813012,-.560606],[11.053112,-3.933592,1.23187],[2.146133,7.2576350000000005,2.344184],[.566381,-6.040558,14.725849],[1.08419,-6.719231000000001,14.706674],[5.171019,4.21175,-3.034384],[2.0921,2.645106,-5.246524],[1.66333,6.2937319999999985,-1.261715],[7.22446,.4266179999999995,-1.816326],[2.34563,-2.4331899999999997,-5.660416],[1.060229,-9.526682000000001,3.893901],[4.81298,.19828200000000074,7.707912],[4.82989,-4.000793,8.547805],[-11.086484,5.960324999999999,2.77823],[-6.465275,4.255375000000001,1.88451],[-9.594237,11.702960999999998,4.818539],[-2.466232,4.250507000000001,6.037715],[-6.464263,1.4749859999999995,3.628665],[-9.605342,1.4489300000000007,.910938],[-2.231848,-2.4387,8.109403],[-4.922223,-1.7745820000000005,6.462612],[-2.730904,-.9981170000000006,8.231533],[-.93571,-5.683305,13.898631],[-1.826048,.1982759999999999,8.967493],[-1.258695,-9.521664999999999,11.713494],[-1.255813,-7.606733,14.061978],[-4.829895,-7.400282,5.474004],[-4.015327,-7.042687,.703314],[-1.612633,-6.389058,13.879456],[-9.587111,-8.813012,-.560606],[-11.053112,-3.933592,1.23187],[-2.146133,7.2576350000000005,2.344184],[-.566381,-6.040558,14.725849],[-1.08419,-6.719231000000001,14.706674],[-5.171019,4.21175,-3.034384],[-2.0921,2.645106,-5.246524],[-1.66333,6.2937319999999985,-1.261715],[-7.22446,.4266179999999995,-1.816326],[-2.34563,-2.4331899999999997,-5.660416],[-1.060229,-9.526682000000001,3.893901],[-4.81298,.19828200000000074,7.707912],[-4.82989,-4.000793,8.547805],[-6.599504,-1.3817730000000008,5.348948],[6.599504,-1.3817730000000008,5.348948],[-4.135162,-.9990760000000005,7.580709],[4.135162,-.9990760000000005,7.580709],[-1.551688,-1.8464950000000009,9.58765],[1.551688,-1.8464950000000009,9.58765],[-3.089554,.19827800000000018,8.422374],[3.089554,.19827800000000018,8.422374]]}}}},{package:"$root$",file:"app/build-types/main/fox.json"}],[3e3,{"../constants.cjs":2974,"../logger.cjs":2995,"./feature-flags.cjs":3002,"@ethersproject/abi":723,"@ethersproject/contracts":746,"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.signAuthorizationList=n.generateEIP7702BatchTransaction=n.isAccountUpgradedToEIP7702=n.getDelegationAddress=n.doesChainSupportEIP7702=n.ERROR_MESSGE_PUBLIC_KEY=n.CALLS_SIGNATURE=n.BATCH_FUNCTION_NAME=n.DELEGATION_PREFIX=void 0;const r=e("@ethersproject/abi"),s=e("@ethersproject/contracts"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),o=e("./feature-flags.cjs"),c=e("../constants.cjs"),u=e("../logger.cjs");n.DELEGATION_PREFIX="0xef0100",n.BATCH_FUNCTION_NAME="execute",n.CALLS_SIGNATURE="(address,uint256,bytes)[]",n.ERROR_MESSGE_PUBLIC_KEY="EIP-7702 public key not specified";const l=(0,a.createModuleLogger)(u.projectLogger,"eip-7702");async function d(e,t){const r=await(0,i.query)(t,"eth_getCode",[e]),s=(0,a.add0x)(r?.toLowerCase?.()??"");return 48===r?.length&&s.startsWith(n.DELEGATION_PREFIX)?(0,a.add0x)(s.slice(n.DELEGATION_PREFIX.length)):undefined}async function f(e,t,n,r){const s=function(e,t,n){const{chainId:r,nonce:s}=e,{txParams:a,chainId:o}=t,{nonce:c}=a,u=r??o;let d=s;d??(d=(0,i.toHex)(parseInt(c,16)+1+n));const f={...e,chainId:u,nonce:d};return l("Prepared authorization",f),f}(e,t,r),{txParams:o}=t,{from:c}=o,{address:u,chainId:d,nonce:f}=s,h=parseInt(d,16),p=parseInt(f,16),m=await n.call("KeyringController:signEip7702Authorization",{chainId:h,contractAddress:u,from:c,nonce:p}),g=m.slice(0,66),b=(0,a.add0x)(m.slice(66,130)),y=parseInt(m.slice(130,132),16),w={address:u,chainId:d,nonce:f,r:g,s:b,yParity:(0,i.toHex)(y-27==0?0:1)};return l("Signed authorization",w),w}n.doesChainSupportEIP7702=function(e,t){return(0,o.getEIP7702SupportedChains)(t).some(t=>t.toLowerCase()===e.toLowerCase())},n.getDelegationAddress=d,n.isAccountUpgradedToEIP7702=async function(e,t,n,r,s){const i=(0,o.getEIP7702ContractAddresses)(t,r,n),a=await d(e,s),c=Boolean(a&&i.some(e=>e.toLowerCase()===a.toLowerCase()));return{delegationAddress:a,isSupported:c}},n.generateEIP7702BatchTransaction=function(e,t){const i=s.Contract.getInterface(c.ABI_IERC7821),a=t.map(e=>{const{data:t,to:n,value:r}=e;return[n??"0x0000000000000000000000000000000000000000",r??"0x0",t??"0x"]}),o="0x01".padEnd(66,"0"),u=r.defaultAbiCoder.encode([n.CALLS_SIGNATURE],[a]),d=i.encodeFunctionData(n.BATCH_FUNCTION_NAME,[o,u]);return l("Transaction data",d),{data:d,to:e}},n.signAuthorizationList=async function({authorizationList:e,messenger:t,transactionMeta:n}){if(!e)return undefined;const r=[];let s=0;for(const i of e){const e=await f(i,n,t,s);r.push(e),s+=1}return r}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/eip7702.cjs"}],[3001,{"../types.cjs":2996,"@metamask/rpc-errors":2600},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateConfirmedExternalTransaction=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs");n.validateConfirmedExternalTransaction=function(e,t,n){if(!e?.txParams)throw r.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if(e.status!==s.TransactionStatus.confirmed)throw r.rpcErrors.invalidParams('External transaction status should be "confirmed"');const i=e.txParams.nonce;if(n&&n.length>0){if(n.find(e=>e.txParams?.nonce===i))throw r.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find(e=>e.txParams?.nonce===i))throw r.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/external-transactions.cjs"}],[3002,{"../logger.cjs":2995,"./signature.cjs":3012,"./utils.cjs":3015,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTimeoutAttempts=n.getIncomingTransactionsPollingInterval=n.getGasEstimateBuffer=n.getGasEstimateFallback=n.getGasFeeRandomisation=n.getAcceleratedPollingParams=n.getBatchSizeLimit=n.getEIP7702UpgradeContractAddress=n.getEIP7702ContractAddresses=n.getEIP7702SupportedChains=n.FeatureFlag=void 0;const r=e("@metamask/utils"),s=e("./signature.cjs"),i=e("./utils.cjs"),a=e("../logger.cjs");var o;!function(e){e.EIP7702="confirmations_eip_7702",e.GasBuffer="confirmations_gas_buffer",e.IncomingTransactions="confirmations_incoming_transactions",e.Transactions="confirmations_transactions"}(o||(n.FeatureFlag=o={}));const c=(0,r.createModuleLogger)(a.projectLogger,"feature-flags");function u(e,t,n){const r=l(t);return(r?.[o.EIP7702]?.contracts?.[e.toLowerCase()]??[]).filter(t=>(0,s.isValidSignature)([t.address,(0,i.padHexToEvenLength)(e)],t.signature,n)).map(e=>e.address)}function l(e){const t=e.call("RemoteFeatureFlagController:getState").remoteFeatureFlags;return c("Retrieved feature flags",t),t}n.getEIP7702SupportedChains=function(e){const t=l(e);return t?.[o.EIP7702]?.supportedChains??[]},n.getEIP7702ContractAddresses=u,n.getEIP7702UpgradeContractAddress=function(e,t,n){return u(e,t,n)?.[0]},n.getBatchSizeLimit=function(e){const t=l(e);return t?.[o.Transactions]?.batchSizeLimit??10},n.getAcceleratedPollingParams=function(e,t){const n=l(t),r=n?.[o.Transactions]?.acceleratedPolling,s=r?.perChainConfig?.[e]?.countMax??r?.defaultCountMax??10,i=r?.perChainConfig?.[e]?.intervalMs??r?.defaultIntervalMs??3e3;return{blockTime:r?.perChainConfig?.[e]?.blockTime??12e3,countMax:s,intervalMs:i}},n.getGasFeeRandomisation=function(e){const t=l(e),n=t?.[o.Transactions]?.gasFeeRandomisation??{};return{randomisedGasFeeDigits:n.randomisedGasFeeDigits??{},preservedNumberOfDigits:n.preservedNumberOfDigits}},n.getGasEstimateFallback=function(e,t){const n=l(t),r=n?.[o.Transactions]?.gasEstimateFallback,s=r?.perChainConfig?.[e],i=s?.percentage??r?.default?.percentage??35;return{fixed:s?.fixed??r?.default?.fixed,percentage:i}},n.getGasEstimateBuffer=function({chainId:e,isCustomRPC:t,isUpgradeWithDataToSelf:n,messenger:r}){const s=l(r),i=s?.[o.GasBuffer],a=i?.perChainConfig?.[e],c=t?undefined:a?.included,u=t?undefined:i?.included;return(n?a?.eip7702:undefined)??c??a?.base??u??i?.default??1},n.getIncomingTransactionsPollingInterval=function(e){const t=l(e);return t?.[o.IncomingTransactions]?.pollingIntervalMs??24e4},n.getTimeoutAttempts=function(e,t){const n=l(t),r=n?.[o.Transactions]?.timeoutAttempts;return r?.perChainConfig?.[e]??r?.default}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/feature-flags.cjs"}],[3003,{"../api/accounts-api.cjs":2972,"../logger.cjs":2995,"../types.cjs":2996,"./transaction-type.cjs":3014,"./validation.cjs":3016,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updateFirstTimeInteraction=void 0;const r=e("@metamask/utils"),s=e("./transaction-type.cjs"),i=e("./validation.cjs"),a=e("../api/accounts-api.cjs"),o=e("../logger.cjs"),c=e("../types.cjs");n.updateFirstTimeInteraction=async function({existingTransactions:e,getTransaction:t,isFirstTimeInteractionEnabled:n,trace:u,traceContext:l,transactionMeta:d,updateTransaction:f}){if(!n())return;const{chainId:h,id:p,txParams:{data:m,from:g,to:b},type:y}=d;let w;if(m&&[c.TransactionType.tokenMethodTransfer,c.TransactionType.tokenMethodTransferFrom].includes(y)){const e=(0,s.decodeTransactionData)(m);w=e?.args?._to??e?.args?.to}w??(w=b);const E={chainId:(0,r.hexToNumber)(h),to:w,from:g};if((0,i.validateParamTo)(w),!e.find(e=>e.chainId===h&&e.txParams.from.toLowerCase()===g.toLowerCase()&&e.txParams.to?.toLowerCase()===b?.toLowerCase()&&e.id!==p))try{const{count:e}=await u({name:"Account Address Relationship",parentContext:l},()=>(0,a.getAccountAddressRelationship)(E)),n=e===undefined?undefined:0===e;if(!t(p))return void(0,o.projectLogger)("Cannot update first time interaction as transaction not found",p);f({transactionId:p,note:"TransactionController#updateFirstInteraction - Update first time interaction"},e=>{e.isFirstTimeInteraction=n}),(0,o.projectLogger)("Updated first time interaction",p,{isFirstTimeInteraction:n})}catch(e){(0,o.projectLogger)("Error fetching account address relationship, skipping first time interaction update",e)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/first-time-interaction.cjs"}],[3004,{"../api/simulation-api.cjs":2973,"../logger.cjs":2995,"./balance.cjs":2998,"./batch.cjs":2999,"./eip7702.cjs":3e3,"./feature-flags.cjs":3002,"@metamask/rpc-errors":2600,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkGasFeeTokenBeforePublish=n.getGasFeeTokens=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),i=e("./balance.cjs"),a=e("./batch.cjs"),o=e("./eip7702.cjs"),c=e("./feature-flags.cjs"),u=e("../api/simulation-api.cjs"),l=e("../logger.cjs"),d=(0,s.createModuleLogger)(l.projectLogger,"gas-fee-tokens");n.getGasFeeTokens=async function({chainId:e,isEIP7702GasFeeTokensEnabled:t,messenger:n,publicKeyEIP7702:s,transactionMeta:i,getSimulationConfig:l}){const{delegationAddress:f,txParams:h}=i,{authorizationList:p}=h,m=h.data,g=h.from,b=h.to,y=h.value;d("Request",{chainId:e,txParams:h});const w=await t(i)&&(0,o.doesChainSupportEIP7702)(e,n);let E=p?.map(e=>({address:e.address,from:g}));!w||f||E||(E=function({chainId:e,from:t,messenger:n,publicKeyEIP7702:s}){if(!s)throw r.rpcErrors.internal(o.ERROR_MESSGE_PUBLIC_KEY);const i=(0,c.getEIP7702UpgradeContractAddress)(e,n,s);if(!i)throw r.rpcErrors.internal(a.ERROR_MESSAGE_NO_UPGRADE_CONTRACT);return[{address:i,from:t}]}({chainId:e,from:g,messenger:n,publicKeyEIP7702:s}));try{const t=await(0,u.simulateTransactions)(e,{getSimulationConfig:l,transactions:[{authorizationList:E,data:m,from:g,to:b,value:y}],suggestFees:{withTransfer:!0,withFeeTransfer:!0,with7702:w}});d("Response",t);const n=function(e){const t=e.transactions?.[0]?.fees?.[0],n=e.sponsorship?.isSponsored??!1;return{gasFeeTokens:(t?.tokenFees??[]).map(e=>({amount:e.balanceNeededToken,balance:e.currentBalanceToken,decimals:e.token.decimals,fee:e.serviceFee,gas:t.gas,gasTransfer:e.transferEstimate,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas,rateWei:e.rateWei,recipient:e.feeRecipient,symbol:e.token.symbol,tokenAddress:e.token.address})),isGasFeeSponsored:n}}(t);return d("Gas fee tokens",n),n}catch(e){return d("Failed to gas fee tokens",e),{gasFeeTokens:[],isGasFeeSponsored:!1}}},n.checkGasFeeTokenBeforePublish=async function({ethQuery:e,fetchGasFeeTokens:t,transaction:n,updateTransaction:r}){const{isGasFeeTokenIgnoredIfBalance:s,selectedGasFeeToken:a}=n;if(!a||!s)return;if(d("Checking gas fee token before publish",{selectedGasFeeToken:a}),await(0,i.isNativeBalanceSufficientForGas)(n,e))return d("Ignoring gas fee token before publish due to sufficient native balance"),void r(n.id,e=>{e.isExternalSign=!1,e.selectedGasFeeToken=undefined});const o=await t({...n,isExternalSign:!0});if(r(n.id,e=>{e.gasFeeTokens=o,e.isExternalSign=!0,e.txParams.nonce=undefined}),d("Updated gas fee tokens before publish",o),!o?.some(e=>e.tokenAddress.toLowerCase()===a.toLowerCase()))throw new Error("Gas fee token not found and insufficient native balance");d("Publishing with selected gas fee token",{selectedGasFeeToken:a})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-fee-tokens.cjs"}],[3005,{"../logger.cjs":2995,"../types.cjs":2996,"./gas-flow.cjs":3006,"./swaps.cjs":3013,"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gweiDecimalToWeiDecimal=n.gweiDecimalToWeiHex=n.updateGasFees=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("./gas-flow.cjs"),a=e("./swaps.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,s.createModuleLogger)(o.projectLogger,"gas-fees");function l(e){return(0,r.toHex)((0,r.gweiDecToWEIBN)(e))}n.updateGasFees=async function(e){const{txMeta:t}=e,n={...t.txParams},o=a.SWAP_TRANSACTION_TYPES.includes(t.type)?undefined:e.getSavedGasFees(t.chainId),d=await async function(e){const{eip1559:t,ethQuery:n,gasFeeFlows:a,getGasFeeEstimates:o,messenger:l,txMeta:d}=e,{networkClientId:f}=d;if(!t&&d.txParams.gasPrice||t&&d.txParams.maxFeePerGas&&d.txParams.maxPriorityFeePerGas)return{};const h=(0,i.getGasFeeFlow)(d,a,l);try{const e=await o({networkClientId:f}),t=await h.getGasFees({ethQuery:n,gasFeeControllerData:e,messenger:l,transactionMeta:d}),r=t.estimates?.type;switch(r){case c.GasFeeEstimateType.FeeMarket:return t.estimates.medium;case c.GasFeeEstimateType.Legacy:return{gasPrice:t.estimates.medium};case c.GasFeeEstimateType.GasPrice:return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${r}`)}}catch(e){u("Failed to get suggested gas fees",e)}const p=await(0,r.query)(n,"gasPrice");return{gasPrice:p?(0,s.add0x)(p.toString(16)):undefined}}(e);u("Suggested gas fees",d);const f={...e,initialParams:n,savedGasFees:o,suggestedGasFees:d};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:n,initialParams:r,suggestedGasFees:s}=e;if(!n)return undefined;if(t){const e=l(t.maxBaseFee);return u("Using maxFeePerGas from savedGasFees",e),e}if(r.maxFeePerGas)return u("Using maxFeePerGas from request",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice&&!r.maxPriorityFeePerGas)return u("Setting maxFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(s.maxFeePerGas)return u("Using suggested maxFeePerGas",s.maxFeePerGas),s.maxFeePerGas;if(s.gasPrice)return u("Setting maxFeePerGas to suggested gasPrice",s.gasPrice),s.gasPrice;return u("maxFeePerGas not set"),undefined}(f),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:n,savedGasFees:r,suggestedGasFees:s,txMeta:i}=e;if(!t)return undefined;if(r){const e=l(r.priorityFee);return u("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(n.maxPriorityFeePerGas)return u("Using maxPriorityFeePerGas from request",n.maxPriorityFeePerGas),n.maxPriorityFeePerGas;if(n.gasPrice&&!n.maxFeePerGas)return u("Setting maxPriorityFeePerGas to gasPrice from request",n.gasPrice),n.gasPrice;if(s.maxPriorityFeePerGas)return u("Using suggested maxPriorityFeePerGas",s.maxPriorityFeePerGas),s.maxPriorityFeePerGas;if(i.txParams.maxFeePerGas)return u("Setting maxPriorityFeePerGas to maxFeePerGas",i.txParams.maxFeePerGas),i.txParams.maxFeePerGas;return u("maxPriorityFeePerGas not set"),undefined}(f),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:n,suggestedGasFees:r}=e;if(t)return undefined;if(n.gasPrice)return u("Using gasPrice from request",n.gasPrice),n.gasPrice;if(r.maxFeePerGas)return u("Using suggested maxFeePerGas",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice)return u("Using suggested gasPrice",r.gasPrice),r.gasPrice;return u("gasPrice not set"),undefined}(f),t.userFeeLevel=function(e){const{initialParams:t,savedGasFees:n,suggestedGasFees:s,txMeta:i}=e;if(n)return c.UserFeeLevel.CUSTOM;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&t.gasPrice)return i.origin===r.ORIGIN_METAMASK?c.UserFeeLevel.CUSTOM:c.UserFeeLevel.DAPP_SUGGESTED;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&s.maxFeePerGas&&s.maxPriorityFeePerGas)return c.UserFeeLevel.MEDIUM;if(!t.maxFeePerGas&&!t.maxPriorityFeePerGas&&s.gasPrice)return c.UserFeeLevel.MEDIUM;if(i.origin===r.ORIGIN_METAMASK)return c.UserFeeLevel.MEDIUM;return c.UserFeeLevel.DAPP_SUGGESTED}(f),u("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates??(e.defaultGasEstimates={}),e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},n.gweiDecimalToWeiHex=l,n.gweiDecimalToWeiDecimal=function(e){return(1e9*Number(e)).toString().split(".")[0]}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-fees.cjs"}],[3006,{"../types.cjs":2996,"@metamask/controller-utils":1449},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeGasFeeEstimates=n.getGasFeeFlow=void 0;const r=e("@metamask/controller-utils"),s=e("../types.cjs");function i(e,t){return(0,r.weiHexToGweiDec)(e[t])}n.getGasFeeFlow=function(e,t,n){return t.find(t=>t.matchesTransaction({transactionMeta:e,messenger:n}))},n.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const n=t.type;return n===s.GasFeeEstimateType.FeeMarket?Object.values(s.GasFeeEstimateLevel).reduce((n,s)=>{return{...n,[s]:(i=e?.[s],a=t[s],{...i,suggestedMaxFeePerGas:(0,r.weiHexToGweiDec)(a.maxFeePerGas),suggestedMaxPriorityFeePerGas:(0,r.weiHexToGweiDec)(a.maxPriorityFeePerGas)})};var i,a},{...e}):n===s.GasFeeEstimateType.Legacy?Object.values(s.GasFeeEstimateLevel).reduce((e,n)=>({...e,[n]:i(t,n)}),{}):n===s.GasFeeEstimateType.GasPrice?{gasPrice:(a=t,(0,r.weiHexToGweiDec)(a.gasPrice))}:e;var a}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-flow.cjs"}],[3007,{"../api/simulation-api.cjs":2973,"../logger.cjs":2995,"../types.cjs":2996,"./eip7702.cjs":3e3,"./feature-flags.cjs":3002,"@metamask/controller-utils":1449,"@metamask/utils":3116,"bignumber.js":3021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.simulateGasBatch=n.addGasBuffer=n.estimateGasBatch=n.estimateGas=n.updateGas=n.DUMMY_AUTHORIZATION_SIGNATURE=n.INTRINSIC_GAS=n.MAX_GAS_BLOCK_PERCENT=n.DEFAULT_GAS_MULTIPLIER=n.FIXED_GAS=n.log=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("bignumber.js"),a=e("./eip7702.cjs"),o=e("./feature-flags.cjs"),c=e("../api/simulation-api.cjs"),u=e("../logger.cjs"),l=e("../types.cjs");async function d({chainId:e,ethQuery:t,ignoreDelegationSignatures:i,isSimulationEnabled:a,getSimulationConfig:c,messenger:u,txParams:d}){const f={...d},{authorizationList:h,data:g,from:b,value:y,to:w}=f;if(i&&!a)throw new Error("Gas estimation with ignored delegation signatures is not supported as simulation disabled");const{gasLimit:E,number:v}=await async function(e){return await(0,r.query)(e,"getBlockByNumber",["latest",!1])}(t),T=(0,r.hexToBN)(E),{percentage:x,fixed:S}=(0,o.getGasEstimateFallback)(e,u),P=S?(0,r.toHex)(S):(0,r.BNToHex)((0,r.fractionBN)(T,x,100));(0,n.log)("Estimation fallback values",P),f.data=g?(0,s.add0x)(g):g,f.value=y??"0x0",f.authorizationList=function(e,t){return e?.map(e=>({...e,chainId:e.chainId??t,nonce:e.nonce??"0x1",r:e.r??n.DUMMY_AUTHORIZATION_SIGNATURE,s:e.s??n.DUMMY_AUTHORIZATION_SIGNATURE,yParity:e.yParity??"0x1"}))}(f.authorizationList,e),delete f.gasPrice,delete f.maxFeePerGas,delete f.maxPriorityFeePerGas;let k,I=P;const A=d.type===l.TransactionEnvelopeType.setCode&&Boolean(h?.length)&&Boolean(g)&&"0x"!==g&&b?.toLowerCase()===w?.toLowerCase();try{I=a&&A?await async function(e,t,s,i){const a=await(0,r.query)(t,"estimateGas",[{...e,data:"0x"}]);(0,n.log)("Upgrade only gas",a);const o=e.authorizationList?.[0].address;let c;try{c=await p({chainId:s,delegationAddress:o,getSimulationConfig:i,transaction:e})}catch(e){(0,n.log)("Error while simulating data portion of upgrade",e)}if(c===undefined){try{c=await m(t,{...e,authorizationList:undefined,type:undefined},o)}catch(e){throw(0,n.log)("Error while estimating data portion of upgrade",e),e}(0,n.log)("Success estimating data portion of upgrade",c)}(0,n.log)("Execute gas",c);const u=(0,r.BNToHex)((0,r.hexToBN)(a).add((0,r.hexToBN)(c)).subn(n.INTRINSIC_GAS));return(0,n.log)("Total type 4 gas",u),u}(f,t,e,c):i&&a?await p({chainId:e,getSimulationConfig:c,transaction:f}):await m(t,f)}catch(e){k={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:v,blockGasLimit:E}},(0,n.log)("Estimation failed",{...k,fallback:P})}return{blockGasLimit:E,estimatedGas:I,isUpgradeWithDataToSelf:A,simulationFails:k}}function f(e,t,i){const a=(0,r.hexToBN)(e),o=(0,r.fractionBN)((0,r.hexToBN)(t),n.MAX_GAS_BLOCK_PERCENT,100),c=(0,r.fractionBN)(a,100*i,100);if(a.gt(o)){const t=(0,s.add0x)(e);return(0,n.log)("Using estimated value",t),t}if(c.lt(o)){const e=(0,s.add0x)((0,r.BNToHex)(c));return(0,n.log)("Using padded estimate",e,i),e}const u=(0,s.add0x)((0,r.BNToHex)(o));return(0,n.log)("Using 90% of block gas limit",u),u}async function h({chainId:e,from:t,getSimulationConfig:s,transactions:i}){try{const n=await(0,c.simulateTransactions)(e,{getSimulationConfig:s,transactions:i.map(e=>({...e.params,from:t}))});if(!n?.transactions||n.transactions.length!==i.length)throw new Error("Simulation response does not match transaction count");return n.transactions.reduce((e,t)=>{const n=t?.gasLimit;if(!n)throw new Error("No simulated gas returned for one of the transactions");return e.gasLimits.push(n),e.totalGasLimit=(0,r.BNToHex)((0,r.hexToBN)(e.totalGasLimit).add((0,r.hexToBN)(n))),e},{totalGasLimit:"0x0",gasLimits:[]})}catch(e){throw(0,n.log)("Error while simulating gas batch",e),new Error("Cannot estimate transaction batch total gas as simulation failed")}}async function p({chainId:e,delegationAddress:t,getSimulationConfig:n,transaction:r}){const i=await(0,c.simulateTransactions)(e,{getSimulationConfig:n,transactions:[{to:r.to,from:r.from,data:r.data,value:r.value}],overrides:{[r.from]:{code:t&&a.DELEGATION_PREFIX+(0,s.remove0x)(t)}}}),o=i?.transactions?.[0].gasLimit;if(!o)throw new Error("No simulated gas returned");return o}function m(e,t,n){const{from:i}=t,o=[t];return n&&(o.push("latest"),o.push({[i]:{code:a.DELEGATION_PREFIX+(0,s.remove0x)(n)}})),(0,r.query)(e,"estimateGas",o)}n.log=(0,s.createModuleLogger)(u.projectLogger,"gas"),n.FIXED_GAS="0x5208",n.DEFAULT_GAS_MULTIPLIER=1.5,n.MAX_GAS_BLOCK_PERCENT=90,n.INTRINSIC_GAS=21e3,n.DUMMY_AUTHORIZATION_SIGNATURE="0x1111111111111111111111111111111111111111111111111111111111111111",n.updateGas=async function(e){const{txMeta:t}=e,s={...t.txParams},[i,a,c]=await async function(e){const{chainId:t,isCustomNetwork:s,isSimulationEnabled:i,getSimulationConfig:a,messenger:c,txMeta:u}=e,{disableGasBuffer:h}=u;if(u.txParams.gas)return(0,n.log)("Using value from request",u.txParams.gas),[u.txParams.gas,undefined,u.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:n}){const{txParams:{to:s,data:i,type:a}}=t;if(n||!s||i||a===l.TransactionEnvelopeType.setCode)return!1;const o=await async function(e,t){return await(0,r.query)(e,"getCode",[t])}(e,s);return!o||"0x"===o}(e))return(0,n.log)("Using fixed value",n.FIXED_GAS),[n.FIXED_GAS,undefined,n.FIXED_GAS];const{blockGasLimit:p,estimatedGas:m,isUpgradeWithDataToSelf:g,simulationFails:b}=await d({chainId:t,ethQuery:e.ethQuery,isSimulationEnabled:i,getSimulationConfig:a,messenger:c,txParams:u.txParams});(0,n.log)("Original estimated gas",m),b&&(0,n.log)("Using original fallback estimate as simulation failed");h&&(0,n.log)("Gas buffer disabled");if(b||h)return[m,b,m];const y=(0,o.getGasEstimateBuffer)({chainId:t,isCustomRPC:s,isUpgradeWithDataToSelf:g,messenger:c});(0,n.log)("Buffer",y);const w=f(m,p,y);return(0,n.log)("Buffered gas",w),[w,b,m]}(e);t.txParams.gas=i,t.simulationFails=a,t.gasLimitNoBuffer=c,s.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates??(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},n.estimateGas=d,n.estimateGasBatch=async function({chainId:e,ethQuery:t,from:r,getSimulationConfig:s,isAtomicBatchSupported:o,messenger:c,transactions:u}){const f=(await o({address:r,chainIds:[e]})).find(t=>t.chainId===e),p=Boolean(f&&!f.isSupported);if(p&&!f?.upgradeContractAddress)throw new Error("Upgrade contract address not found");if(f){const o=p?[{address:f.upgradeContractAddress}]:undefined,h=p?l.TransactionEnvelopeType.setCode:undefined,m={...(0,a.generateEIP7702BatchTransaction)(r,u),authorizationList:o,from:r,type:h},{estimatedGas:g}=await d({chainId:e,ethQuery:t,isSimulationEnabled:!0,getSimulationConfig:s,messenger:c,txParams:m}),b=new i.BigNumber(g).toNumber();return(0,n.log)("Estimated EIP-7702 gas limit",b),{totalGasLimit:b,gasLimits:[b]}}if(u.every(e=>e.gas!==undefined)){const e=u.map(e=>new i.BigNumber(e.gas).toNumber()),t=e.reduce((e,t)=>e+t,0);return(0,n.log)("Using batch parameter gas limits",{gasLimits:e,total:t}),{totalGasLimit:t,gasLimits:e}}const{gasLimits:m}=await h({chainId:e,from:r,getSimulationConfig:s,transactions:u.map(e=>({params:e}))}),g=u.map((e,t)=>e.gas?new i.BigNumber(e.gas).toNumber():new i.BigNumber(m[t]).toNumber()),b=g.reduce((e,t)=>e+t,0);return(0,n.log)("Simulated batch gas limits",{totalGasLimit:b,gasLimits:g}),{totalGasLimit:b,gasLimits:g}},n.addGasBuffer=f,n.simulateGasBatch=h}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas.cjs"}],[3008,{"../logger.cjs":2995,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionLayer1GasFee=n.updateTransactionLayer1GasFee=void 0;const r=e("@metamask/utils"),s=e("../logger.cjs"),i=(0,r.createModuleLogger)(s.projectLogger,"layer-1-gas-fee-flow");async function a({layer1GasFeeFlows:e,messenger:t,provider:n,transactionMeta:r}){const s=await async function(e,t,n){for(const r of t)if(await r.matchesTransaction({transactionMeta:e,messenger:n}))return r;return undefined}(r,e,t);if(!s)return undefined;i("Found layer 1 gas fee flow",s.constructor.name,r.id);try{const{layer1Fee:e}=await s.getLayer1Fee({provider:n,transactionMeta:r});return e}catch(e){return i("Failed to get layer 1 gas fee",r.id,e),undefined}}n.updateTransactionLayer1GasFee=async function(e){const t=await a(e);if(!t)return;const{transactionMeta:n}=e;n.layer1GasFee=t,i("Updated layer 1 gas fee",t,n.id)},n.getTransactionLayer1GasFee=a}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/layer1-gas-fee-flow.cjs"}],[3009,{"../logger.cjs":2995,"@metamask/controller-utils":1449},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAndFormatTransactionsForNonceTracker=n.getNextNonce=void 0;const r=e("@metamask/controller-utils"),s=e("../logger.cjs"),i=(0,s.createModuleLogger)(s.projectLogger,"nonce");n.getNextNonce=async function(e,t){const{customNonceValue:n,isExternalSign:s,txParams:{from:a,nonce:o}}=e;if(s)return i("Skipping nonce as signed externally"),[undefined,undefined];const c=n?(0,r.toHex)(n):undefined;if(c)return i("Using custom nonce",c),[c,undefined];if(o)return i("Using existing nonce",o),[o,undefined];const u=await t(a),l=(0,r.toHex)(u.nextNonce),d=u.releaseLock.bind(u);return i("Using nonce from nonce tracker",l,u.nonceDetails),[l,d]},n.getAndFormatTransactionsForNonceTracker=function(e,t,n,r){return r.filter(({chainId:r,isTransfer:s,isUserOperation:i,status:a,txParams:{from:o,nonce:c}})=>!s&&!i&&r===e&&n.includes(a)&&o.toLowerCase()===t.toLowerCase()&&c).flatMap(({status:e,txParams:{authorizationList:t,from:n,gas:r,value:s,nonce:i}})=>[i,...(t??[]).map(e=>e.nonce).filter(e=>e!==undefined)].map(t=>({status:e,history:[{}],txParams:{from:n??"",gas:r??"",value:s??"",nonce:t??""}})))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/nonce.cjs"}],[3010,{"@ethereumjs/common":666,"@ethereumjs/tx":683,"@metamask/utils":3116,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.serializeTransaction=n.prepareTransaction=n.HARDFORK=void 0;const r=e("@ethereumjs/common"),s=e("@ethereumjs/tx"),i=e("@metamask/utils"),a=e("lodash");function o(e){const t={chainId:parseInt(e,16),defaultHardfork:n.HARDFORK};return r.Common.custom(t,{eips:[7702]})}function c(e){return e?"0x0"===e?"0x":e.replace?.(/^0x(00)+/u,"0x")??e:e}n.HARDFORK=r.Hardfork.Prague,n.prepareTransaction=function(e,t){const n=function(e){const t=(0,a.cloneDeep)(e);return function(e){if(!e)return;for(const t of e)t.nonce=c(t.nonce),t.r=c(t.r),t.s=c(t.s),t.yParity=c(t.yParity)}(t.authorizationList),t}(t);return s.TransactionFactory.fromTxData(n,{freeze:!1,common:o(e)})},n.serializeTransaction=function(e){return(0,i.bytesToHex)(e.serialize())}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/prepare.cjs"}],[3011,{"@metamask/controller-utils":1449,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionParamsWithIncreasedGasFee=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils");function i(e,t){const n=(0,r.convertHexToDecimal)(e),i=parseInt(""+n*t,10);return(0,s.add0x)(i.toString(16))}n.getTransactionParamsWithIncreasedGasFee=function(e,t,n){const r=function(e,t,n){if(n&&"gasPrice"in n)return n.gasPrice;const r=e.gasPrice;if(!r||"0x0"===r)return undefined;return i(r,t)}(e,t,n),s=function(e,t,n){if(n&&"maxFeePerGas"in n&&"maxPriorityFeePerGas"in n)return n;const r=e.maxFeePerGas,s=e.maxPriorityFeePerGas;if(!r||!s||"0x0"===r||"0x0"===s)return undefined;const a=i(r,t),o=i(s,t);return{maxFeePerGas:a,maxPriorityFeePerGas:o}}(e,t,n);if(s){const t={...e,...s};return delete t.gasPrice,t}if(r){const t={...e,gasPrice:r};return delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,t}throw new Error("Cannot increase gas fee as no current values and no new values were provided")}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/retry.cjs"}],[3012,{"@ethersproject/wallet":820,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidSignature=void 0;const r=e("@ethersproject/wallet"),s=e("@metamask/utils");n.isValidSignature=function(e,t,n){try{const i=(0,s.add0x)(e.map(s.remove0x).join("")),a=(0,s.hexToBytes)(i);return(0,r.verifyMessage)(a,t).toLowerCase()===n.toLowerCase()}catch{return!1}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/signature.cjs"}],[3013,{"../constants.cjs":2974,"../logger.cjs":2995,"../types.cjs":2996,"./utils.cjs":3015,"@metamask/controller-utils":1449,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updatePostTransactionBalance=n.updateSwapsTransaction=n.SWAP_TRANSACTION_TYPES=n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=n.DEFAULT_TOKEN_ADDRESS=n.UPDATE_POST_TX_BALANCE_ATTEMPTS=n.UPDATE_POST_TX_BALANCE_TIMEOUT=void 0;const r=e("@metamask/controller-utils"),s=e("lodash"),i=e("./utils.cjs"),a=e("../constants.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,o.createModuleLogger)(o.projectLogger,"swaps");n.UPDATE_POST_TX_BALANCE_TIMEOUT=5e3,n.UPDATE_POST_TX_BALANCE_ATTEMPTS=6;const l="0x539";n.DEFAULT_TOKEN_ADDRESS="0x0000000000000000000000000000000000000000";const d={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},f={name:"Binance Coin",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},h={name:"Matic",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},p={name:"Avalanche",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},m={name:"Test Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},g={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},b={...d},y={...d},w={...d},E={name:"Sei",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},v={name:"Mon",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18};function T(e,t){return!(!e||!t)&&e===n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[t]?.address}function x(e){return new Promise(t=>setTimeout(t,e))}n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP={[a.CHAIN_IDS.MAINNET]:d,[l]:m,[a.CHAIN_IDS.BSC]:f,[a.CHAIN_IDS.POLYGON]:h,[a.CHAIN_IDS.GOERLI]:g,[a.CHAIN_IDS.AVALANCHE]:p,[a.CHAIN_IDS.OPTIMISM]:y,[a.CHAIN_IDS.ARBITRUM]:b,[a.CHAIN_IDS.ZKSYNC_ERA]:w,[a.CHAIN_IDS.SEI]:E,[a.CHAIN_IDS.MONAD]:v},n.SWAP_TRANSACTION_TYPES=[c.TransactionType.swap,c.TransactionType.swapAndSend,c.TransactionType.swapApproval],n.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:a,cancelTransaction:o,messenger:u}){if(a||!n.SWAP_TRANSACTION_TYPES.includes(t))return e;if(t===c.TransactionType.swap&&!1===r?.hasApproveTx&&e.simulationFails)throw o(e.id),new Error("Simulation failed");const l=r?.meta;if(!l)return e;let d=e;return t===c.TransactionType.swapApproval&&(d=function(e,{type:t,sourceTokenSymbol:n}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapApprovalTransaction");let r={type:t,sourceTokenSymbol:n};return r=(0,s.pickBy)({type:t,sourceTokenSymbol:n}),(0,s.merge)({},e,r)}(e,l),u.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:d})),t===c.TransactionType.swapAndSend&&(d=function(e,{approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:a,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let b={approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:a,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g};return b=(0,s.pickBy)(b),(0,s.merge)({},e,b)}(e,l),u.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:d})),t===c.TransactionType.swap&&(d=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:a,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let f={sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:a,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d};return f=(0,s.pickBy)(f),(0,s.merge)({},e,f)}(e,l),u.publish("TransactionController:transactionNewSwap",{transactionMeta:d})),d},n.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:s,updateTransaction:i}){u("Updating post transaction balance",e.id);const a=e.id;let o,c;for(let i=0;i<n.UPDATE_POST_TX_BALANCE_ATTEMPTS;i++){u("Querying balance",{attempt:i});const l=await(0,r.query)(t,"getBalance",[e.txParams.from]);o={...s(a)??{}},c=o.approvalTxId?s(o.approvalTxId):undefined,o.postTxBalance=l.toString(16);const d=T(e.destinationTokenAddress,e.chainId);if(!d||e.preTxBalance!==o.postTxBalance){u("Finishing post balance update",{isDefaultTokenAddress:d,preTxBalance:e.preTxBalance,postTxBalance:o.postTxBalance});break}u("Waiting for balance to update",{delay:n.UPDATE_POST_TX_BALANCE_TIMEOUT}),await x(n.UPDATE_POST_TX_BALANCE_TIMEOUT)}return i(o,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),u("Completed post balance update",o?.postTxBalance),{updatedTransactionMeta:o,approvalTransactionMeta:c}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/swaps.cjs"}],[3014,{"../types.cjs":2996,"./eip7702.cjs":3e3,"@ethersproject/abi":723,"@metamask/controller-utils":1449,"@metamask/metamask-eth-abis":2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeTransactionData=n.determineTransactionType=n.ESTIMATE_GAS_ERROR=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=e("./eip7702.cjs"),o=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const c=new r.Interface(i.abiERC20),u=new r.Interface(i.abiERC721),l=new r.Interface(i.abiERC1155),d=new r.Interface(i.abiFiatTokenV2);function f(e,t){if(!e||e.length<10)return undefined;const n=e.substring(0,10).toLowerCase();for(const r of[c,u,l,d])try{return t?.getMethodName?r.getFunction(n)?.name:r.parseTransaction({data:e})}catch{}return undefined}n.determineTransactionType=async function(e,t){const{data:n,to:r}=e;if(n&&!r)return{type:o.TransactionType.deployContract,getCodeResponse:undefined};let i,c=Boolean(n?.length);if(t){const e=await async function(e,t){let n;try{n=await(0,s.query)(e,"getCode",[t])}catch(e){n=null}const r=!!n&&("0x"!==n&&"0x0"!==n&&!n.startsWith(a.DELEGATION_PREFIX));return{contractCode:n,isContractAddress:r}}(t,r);i=e.contractCode,c=e.isContractAddress}if(!c)return{type:o.TransactionType.simpleSend,getCodeResponse:i};const u=0!==Number(e.value??"0"),l={type:o.TransactionType.contractInteraction,getCodeResponse:i};if(!n||u)return l;const d=function(e){return f(e,{getMethodName:!0})}(n);if(!d)return l;const h=[o.TransactionType.tokenMethodApprove,o.TransactionType.tokenMethodSetApprovalForAll,o.TransactionType.tokenMethodTransfer,o.TransactionType.tokenMethodTransferFrom,o.TransactionType.tokenMethodSafeTransferFrom,o.TransactionType.tokenMethodIncreaseAllowance].find(e=>e.toLowerCase()===d.toLowerCase());return h?{type:h,getCodeResponse:i}:l},n.decodeTransactionData=f}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/transaction-type.cjs"}],[3015,{"../types.cjs":2996,"@metamask/utils":3116,"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.setEnvelopeType=n.getPercentageChange=n.toBN=n.bnFromHex=n.padHexToEvenLength=n.normalizeGasFeeValues=n.normalizeTxError=n.validateIfTransactionUnapproved=n.validateGasValues=n.isEIP1559Transaction=n.normalizeTransactionParams=n.ESTIMATE_GAS_ERROR=void 0;const s=e("@metamask/utils"),i=r(e("bn.js")),a=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const o={accessList:e=>e,authorizationList:e=>e,data:e=>(0,s.add0x)(u(e)),from:e=>(0,s.add0x)(e).toLowerCase(),gas:e=>(0,s.add0x)(e),gasLimit:e=>(0,s.add0x)(e),gasPrice:e=>(0,s.add0x)(e),nonce:e=>(0,s.add0x)(e),to:e=>(0,s.add0x)(e).toLowerCase(),value:e=>(0,s.add0x)(e),maxFeePerGas:e=>(0,s.add0x)(e),maxPriorityFeePerGas:e=>(0,s.add0x)(e),estimatedBaseFee:e=>(0,s.add0x)(e),type:e=>(0,s.add0x)(e)};n.normalizeTransactionParams=function(e){const t={from:""};for(const n of(0,s.getKnownPropertyNames)(o))e[n]&&(t[n]=o[n](e[n]));return t.value??(t.value="0x0"),t.gasLimit&&!t.gas&&(t.gas=t.gasLimit),t},n.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};function c(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function u(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",n=t?e.slice(2):e;return t+(n.length%2==0?n:`0${n}`)}function l(e){const t=e,n=t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t;return 0===n.length?new i.default(0):new i.default(n,16)}n.validateGasValues=e=>{Object.keys(e).forEach(t=>{const n=e[t];if("string"!=typeof n||!(0,s.isStrictHexString)(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)})},n.validateIfTransactionUnapproved=function(e,t){if(e?.status!==a.TransactionStatus.unapproved)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},n.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:c(e.value)?e.value:undefined}},n.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?(0,s.add0x)(e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},n.padHexToEvenLength=u,n.bnFromHex=l,n.toBN=function(e){if(e instanceof i.default)return e;if("function"==typeof i.default.isBN&&i.default.isBN(e))return e;if(null!==e&&"object"==typeof e&&"function"==typeof e.toHexString)return l(e.toHexString());if(null!==e&&"object"==typeof e&&"string"==typeof e._hex)return l(e._hex);if("string"==typeof e)return l(e);if("bigint"==typeof e)return new i.default(e.toString());if("number"==typeof e)return new i.default(e);throw new Error("Unexpected value returned from oracle contract")},n.getPercentageChange=function(e,t){const n=new i.default(10).pow(new i.default(18)),r=e.mul(n),s=t.mul(n),a=s.sub(r);return a.isZero()?0:r.isZero()&&!s.isZero()?100:a.muln(100).div(r).abs().toNumber()},n.setEnvelopeType=function(e,t){e.accessList?e.type=a.TransactionEnvelopeType.accessList:e.authorizationList?e.type=a.TransactionEnvelopeType.setCode:e.type=t?a.TransactionEnvelopeType.feeMarket:a.TransactionEnvelopeType.legacy}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/utils.cjs"}],[3016,{"../types.cjs":2996,"./utils.cjs":3015,"@ethersproject/abi":723,"@metamask/controller-utils":1449,"@metamask/metamask-eth-abis":2263,"@metamask/rpc-errors":2600,"@metamask/utils":3116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateBatchRequest=n.validateParamTo=n.validateTxParams=n.validateTransactionOrigin=n.ErrorCode=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=e("@metamask/rpc-errors"),o=e("@metamask/utils"),c=e("./utils.cjs"),u=e("../types.cjs");var l;!function(e){e[e.DuplicateBundleId=5720]="DuplicateBundleId",e[e.BundleTooLarge=5740]="BundleTooLarge",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(l||(n.ErrorCode=l={}));const d=[u.TransactionEnvelopeType.feeMarket,u.TransactionEnvelopeType.setCode];function f(e,t){const n=e.type;switch(t){case"authorizationList":if(n&&n!==u.TransactionEnvelopeType.setCode)throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including authorizationList requires type: "${u.TransactionEnvelopeType.setCode}"`);break;case"maxFeePerGas":case"maxPriorityFeePerGas":if(n&&!d.includes(n))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "${d.join(", ")}"`);break;default:if(n&&d.includes(n))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function h(e,t,n){if(void 0!==e[n])throw a.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${n}, these cannot be mixed`)}function p(e,t){const n=e[t];if("string"!=typeof n||!(0,o.isStrictHexString)(n))throw a.rpcErrors.invalidParams(`Invalid transaction params: ${String(t)} is not a valid hexadecimal string. got: (${String(n)})`)}function m(e){p(e,"address"),function(e,t,n){const r=(0,o.remove0x)(e).length/2;if(r!==t)throw a.rpcErrors.invalidParams(`Invalid transaction params: ${n} must be ${t} bytes. got: ${r} bytes`)}(e.address,20,"address");for(const t of["chainId","nonce","r","s"])e[t]&&p(e,t);const{yParity:t}=e;if(t&&!["0x0","0x1"].includes(t))throw a.rpcErrors.invalidParams(`Invalid transaction params: yParity must be '0x0' or '0x1'. got: ${t}`)}n.validateTransactionOrigin=async function({data:e,from:t,internalAccounts:n,origin:r,permittedAddresses:i,txParams:o,type:c}){if(!r||r===s.ORIGIN_METAMASK)return;const{authorizationList:l,to:d,type:f}=o;if(i&&!i.includes(t))throw a.providerErrors.unauthorized({data:{origin:r}});if(c===u.TransactionType.batch)return;if(l||f===u.TransactionEnvelopeType.setCode)throw a.rpcErrors.invalidParams("External EIP-7702 transactions are not supported");if(Boolean(e&&"0x"!==e)&&n?.some(e=>e.toLowerCase()===d?.toLowerCase()))throw a.rpcErrors.invalidParams("External transactions to internal accounts cannot include data")},n.validateTxParams=function(e,t=!0,n){!function(e){if(e&&!Object.values(u.TransactionEnvelopeType).includes(e))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: "${e}". Must be one of: ${Object.values(u.TransactionEnvelopeType).join(", ")}`)}(e.type),function(e,t){if((0,c.isEIP1559Transaction)(e)&&!t)throw a.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw a.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!(0,s.isValidHexAddress)(e))throw a.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||e.to===undefined){if(!e.data)throw a.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(e.to!==undefined&&!(0,s.isValidHexAddress)(e.to))throw a.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(e!==undefined){if(e.includes("-"))throw a.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw a.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw a.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new r.Interface(i.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw a.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e,t){if(e&&t&&e.toLowerCase?.()!==t.toLowerCase())throw a.rpcErrors.invalidParams(`Invalid transaction params: chainId must match the network client, got: ${e}, expected: ${t}`)}(e.chainId,n),function(e){e.gasPrice&&(f(e,"gasPrice"),h(e,"gasPrice","maxFeePerGas"),h(e,"gasPrice","maxPriorityFeePerGas"),p(e,"gasPrice"));e.maxFeePerGas&&(f(e,"maxFeePerGas"),h(e,"maxFeePerGas","gasPrice"),p(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(f(e,"maxPriorityFeePerGas"),h(e,"maxPriorityFeePerGas","gasPrice"),p(e,"maxPriorityFeePerGas"));e.gasLimit&&p(e,"gasLimit");e.gas&&p(e,"gas")}(e),function(e){const{authorizationList:t}=e;if(!t)return;if(f(e,"authorizationList"),!Array.isArray(t))throw a.rpcErrors.invalidParams("Invalid transaction params: authorizationList must be an array");for(const e of t)m(e)}(e)},n.validateParamTo=function(e){if(!e||"string"!=typeof e)throw a.rpcErrors.invalidParams('Invalid "to" address')},n.validateBatchRequest=function({internalAccounts:e,request:t,sizeLimit:n}){const{origin:r}=t,i=r&&r!==s.ORIGIN_METAMASK,o=e.map(e=>e.toLowerCase());if(i&&t.transactions.some(e=>{const t=e.params.to?.toLowerCase(),n=e.params.data,r=o.includes(t),s=Boolean(n&&"0x"!==n);return r&&s}))throw a.rpcErrors.invalidParams("External calls to internal accounts cannot include data");if(i&&t.transactions.length>n)throw new a.JsonRpcError(l.BundleTooLarge,`Batch size cannot exceed ${n}. got: ${t.transactions.length}`)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/validation.cjs"}],[3017,{"./determineGasFeeCalculations.cjs":3018,"./gas-util.cjs":3019,"@metamask/controller-utils":1449,"@metamask/eth-query":1991,"@metamask/polling-controller":2463,uuid:5734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeController=n.GAS_ESTIMATE_TYPES=n.LEGACY_GAS_PRICES_API_URL=void 0;const u=e("@metamask/controller-utils"),l=c(e("@metamask/eth-query")),d=e("@metamask/polling-controller"),f=e("uuid"),h=c(e("./determineGasFeeCalculations.cjs")),p=e("./gas-util.cjs");n.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const m={gasFeeEstimatesByChainId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasFeeEstimates:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},estimatedGasFeeTimeBounds:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},gasEstimateType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},nonRPCGasFeeApisDisabled:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},g={gasFeeEstimatesByChainId:{},gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.NONE,nonRPCGasFeeApisDisabled:!1};class b extends((0,d.StaticIntervalPollingController)()){constructor({interval:e=15e3,messenger:t,state:c,getCurrentNetworkEIP1559Compatibility:u,getCurrentAccountEIP1559Compatibility:d,getChainId:f,getCurrentNetworkLegacyGasAPICompatibility:h,getProvider:p,onNetworkDidChange:b,legacyAPIEndpoint:y=n.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:w,clientId:E}){if(super({name:"GasFeeController",metadata:m,messenger:t,state:{...g,...c}}),r.add(this),s.set(this,void 0),this.intervalDelay=e,this.setIntervalLength(e),this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=u,this.getCurrentNetworkLegacyGasAPICompatibility=h,this.getCurrentAccountEIP1559Compatibility=d,a(this,s,p,"f"),this.EIP1559APIEndpoint=w,this.legacyAPIEndpoint=y,this.clientId=E,this.ethQuery=new l.default(o(this,s,"f").call(this)),b&&f)this.currentChainId=f(),b(async e=>{await o(this,r,"m",i).call(this,e)});else{const{selectedNetworkClientId:e}=this.messenger.call("NetworkController:getState");this.currentChainId=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId,this.messenger.subscribe("NetworkController:networkDidChange",async e=>{await o(this,r,"m",i).call(this,e)})}}async resetPolling(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),await this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach(e=>{this.pollTokens.add(e)})}}async fetchGasFeeEstimates(e){return await this._fetchGasFeeEstimateData(e)}async getGasFeeEstimatesAndStartPolling(e){const t=e||(0,f.v1)();return this.pollTokens.add(t),1===this.pollTokens.size&&(await this._fetchGasFeeEstimateData(),this._poll()),t}async _fetchGasFeeEstimateData(e={}){const{shouldUpdateState:t=!0,networkClientId:n}=e;let r,s,i,a;if(n!==undefined){const e=this.messenger.call("NetworkController:getNetworkClientById",n);i="0x38"===e.configuration.chainId,a=(0,u.convertHexToDecimal)(e.configuration.chainId);try{s=await this.messenger.call("NetworkController:getEIP1559Compatibility",n)||!1}catch{s=!1}r=new l.default(e.provider)}r??(r=this.ethQuery),i??(i=this.getCurrentNetworkLegacyGasAPICompatibility()),a??(a=(0,u.convertHexToDecimal)(this.currentChainId));try{s??(s=await this.getEIP1559Compatibility())}catch(e){console.error(e),s??(s=!1)}const o=await(0,h.default)({isEIP1559Compatible:s,isLegacyGasAPICompatible:i,fetchGasEstimates:p.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${a}`),fetchLegacyGasPriceEstimates:p.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${a}`),fetchEthGasPriceEstimate:p.fetchEthGasPriceEstimate,calculateTimeEstimate:p.calculateTimeEstimate,clientId:this.clientId,ethQuery:r,nonRPCGasFeeApisDisabled:this.state.nonRPCGasFeeApisDisabled});if(t){const e=(0,u.toHex)(a);this.update(t=>{this.currentChainId===e&&(t.gasFeeEstimates=o.gasFeeEstimates,t.estimatedGasFeeTimeBounds=o.estimatedGasFeeTimeBounds,t.gasEstimateType=o.gasEstimateType),t.gasFeeEstimatesByChainId??(t.gasFeeEstimatesByChainId={}),t.gasFeeEstimatesByChainId[e]={gasFeeEstimates:o.gasFeeEstimates,estimatedGasFeeTimeBounds:o.estimatedGasFeeTimeBounds,gasEstimateType:o.gasEstimateType}})}return o}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(async()=>{await(0,u.safelyExecute)(()=>this._fetchGasFeeEstimateData())},this.intervalDelay)}async _executePoll({networkClientId:e}){await this._fetchGasFeeEstimateData({networkClientId:e})}resetState(){this.update(()=>g)}async getEIP1559Compatibility(){const e=await this.getCurrentNetworkEIP1559Compatibility(),t=this.getCurrentAccountEIP1559Compatibility?.()??!0;return e&&t}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===n.GAS_ESTIMATE_TYPES.FEE_MARKET?(0,p.calculateTimeEstimate)(e,t,this.state.gasFeeEstimates):{}}enableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!1})}disableNonRPCGasFeeApis(){this.update(e=>{e.nonRPCGasFeeApisDisabled=!0})}}n.GasFeeController=b,s=new WeakMap,r=new WeakSet,i=async function({selectedNetworkClientId:e}){const t=this.messenger.call("NetworkController:getNetworkClientById",e).configuration.chainId;t!==this.currentChainId&&(this.ethQuery=new l.default(o(this,s,"f").call(this)),await this.resetPolling(),this.currentChainId=t)},n.default=b}}},{package:"@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/transaction-controller/node_modules/@metamask/gas-fee-controller/dist/GasFeeController.cjs"}],[3018,{"./GasFeeController.cjs":3017},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./GasFeeController.cjs");n.default=async function(e){try{return await async function(e){const{isEIP1559Compatible:t,isLegacyGasAPICompatible:n,nonRPCGasFeeApisDisabled:s}=e;try{if(t&&!s)return await async function(e){const{fetchGasEstimates:t,fetchGasEstimatesUrl:n,clientId:s,calculateTimeEstimate:i}=e,a=await t(n,s),{suggestedMaxPriorityFeePerGas:o,suggestedMaxFeePerGas:c}=a.medium,u=i(o,c,a);return{gasFeeEstimates:a,estimatedGasFeeTimeBounds:u,gasEstimateType:r.GAS_ESTIMATE_TYPES.FEE_MARKET}}(e);if(n&&!s)return await async function(e){const{fetchLegacyGasPriceEstimates:t,fetchLegacyGasPriceEstimatesUrl:n,clientId:s}=e;return{gasFeeEstimates:await t(n,s),estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.LEGACY}}(e);throw new Error("Main gas fee/price estimation failed. Use fallback")}catch{return await async function(e){const{ethQuery:t,fetchEthGasPriceEstimate:n}=e;return{gasFeeEstimates:await n(t),estimatedGasFeeTimeBounds:{},gasEstimateType:r.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}(e)}}(e)}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}}}},{package:"@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/transaction-controller/node_modules/@metamask/gas-fee-controller/dist/determineGasFeeCalculations.cjs"}],[3019,{"@metamask/controller-utils":1449,"bn.js":4023},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.calculateTimeEstimate=n.fetchEthGasPriceEstimate=n.fetchLegacyGasPriceEstimates=n.fetchGasEstimates=n.normalizeGWEIDecimalNumbers=void 0;const s=e("@metamask/controller-utils"),i=r(e("bn.js")),a=e=>({"X-Client-Id":e});function o(e){const t=(0,s.gweiDecToWEIBN)(e).toString(16);return(0,s.weiHexToGweiDec)(t)}n.normalizeGWEIDecimalNumbers=o,n.fetchGasEstimates=async function(e,t){const n=await(0,s.handleFetch)(e,t?{headers:a(t)}:undefined);return{low:{...n.low,suggestedMaxPriorityFeePerGas:o(n.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.low.suggestedMaxFeePerGas)},medium:{...n.medium,suggestedMaxPriorityFeePerGas:o(n.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.medium.suggestedMaxFeePerGas)},high:{...n.high,suggestedMaxPriorityFeePerGas:o(n.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:o(n.high.suggestedMaxFeePerGas)},estimatedBaseFee:o(n.estimatedBaseFee),historicalBaseFeeRange:n.historicalBaseFeeRange,baseFeeTrend:n.baseFeeTrend,latestPriorityFeeRange:n.latestPriorityFeeRange,historicalPriorityFeeRange:n.historicalPriorityFeeRange,priorityFeeTrend:n.priorityFeeTrend,networkCongestion:n.networkCongestion}},n.fetchLegacyGasPriceEstimates=async function(e,t){const n=await(0,s.handleFetch)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:{"Content-Type":"application/json",...t&&a(t)}});return{low:n.SafeGasPrice,medium:n.ProposeGasPrice,high:n.FastGasPrice}},n.fetchEthGasPriceEstimate=async function(e){const t=await(0,s.query)(e,"gasPrice");return{gasPrice:(0,s.weiHexToGweiDec)(t).toString()}},n.calculateTimeEstimate=function(e,t,n){const{low:r,medium:a,high:o,estimatedBaseFee:c}=n,u=(0,s.gweiDecToWEIBN)(e),l=(0,s.gweiDecToWEIBN)(t),d=(0,s.gweiDecToWEIBN)(c),f=i.default.min(u,l.sub(d)),h=(0,s.gweiDecToWEIBN)(r.suggestedMaxPriorityFeePerGas),p=(0,s.gweiDecToWEIBN)(a.suggestedMaxPriorityFeePerGas),m=(0,s.gweiDecToWEIBN)(o.suggestedMaxPriorityFeePerGas);let g,b;return f.lt(h)?(g=null,b="unknown"):f.gte(h)&&f.lt(p)?(g=r.minWaitTimeEstimate,b=r.maxWaitTimeEstimate):f.gte(p)&&f.lt(m)?(g=a.minWaitTimeEstimate,b=a.maxWaitTimeEstimate):f.eq(m)?(g=o.minWaitTimeEstimate,b=o.maxWaitTimeEstimate):(g=0,b=o.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:b}}}}},{package:"@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/transaction-controller/node_modules/@metamask/gas-fee-controller/dist/gas-util.cjs"}],[3020,{"./GasFeeController.cjs":3017},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./GasFeeController.cjs"),n)}}},{package:"@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/transaction-controller/node_modules/@metamask/gas-fee-controller/dist/index.cjs"}],[3021,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,r=1,s=e.length,i=e[0]+"";r<s;){for(t=e[r++]+"",n=u-t.length;n--;t="0"+t);i+=t}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function g(e,t){var n,r,s=e.c,i=t.c,a=e.s,o=t.s,c=e.e,u=t.e;if(!a||!o)return null;if(n=s&&!s[0],r=i&&!i[0],n||r)return n?r?0:-o:a;if(a!=o)return a;if(n=a<0,r=c==u,!s||!i)return r?0:!s^n?1:-1;if(!r)return c>u^n?1:-1;for(o=(c=s.length)<(u=i.length)?c:u,a=0;a<o;a++)if(s[a]!=i[a])return s[a]>i[a]^n?1:-1;return c==u?0:c>u^n?1:-1}function b(e,t,n,r){if(e<t||e>n||e!==i(e))throw Error(a+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,n){var r,s;if(t<0){for(s=n+".";++t;s+=n);e=s+e}else if(++t>(r=e.length)){for(s=n,t-=r;--t;s+=n);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,v,T,x,S,P,k,I,A,_,C=V.prototype={constructor:V,toString:null,valueOf:null},j=new V(1),B=20,F=4,O=-7,R=21,L=-1e7,M=1e7,N=!1,G=1,D=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function V(e,t){var n,s,a,c,d,f,h,p,m=this;if(!(m instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>M?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!r.test(p=String(e)))return T(m,p,f);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(b(t,2,U.length,"Base"),10==t&&q)return W(m=new V(e),B+m.e+1,F);if(p=String(e),f="number"==typeof e){if(0*e!=0)return T(m,p,f,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=U.slice(0,t),c=d=0,h=p.length;d<h;d++)if(n.indexOf(s=p.charAt(d))<0){if("."==s){if(d>c){c=h;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,d=-1,c=0;continue}return T(m,String(e),f,t)}f=!1,(c=(p=v(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(d,++h)){if(h-=d,f&&V.DEBUG&&h>15&&(e>l||e!==i(e)))throw Error(o+m.s*e);if((c=c-d-1)>M)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],d=(c+1)%u,c<0&&(d+=u),d<h){for(d&&m.c.push(+p.slice(0,d)),h-=u;d<h;)m.c.push(+p.slice(d,d+=u));d=u-(p=p.slice(d)).length}else d-=h;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function $(e,t,n,r){var s,i,a,o,c;if(null==n?n=F:b(n,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==t)c=m(e.c),c=1==r||2==r&&(a<=O||a>=R)?w(c,a):E(c,a,"0");else if(i=(e=W(new V(e),t,n)).e,o=(c=m(e.c)).length,1==r||2==r&&(t<=i||i<=O)){for(;o<t;c+="0",o++);c=w(c,i)}else if(t-=a,c=E(c,i,"0"),i+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-o)>0)for(i+1==o&&(c+=".");t--;c+="0");return e.s<0&&s?"-"+c:c}function z(e,t){for(var n,r,s=1,i=new V(e[0]);s<e.length;s++)(!(r=new V(e[s])).s||(n=g(i,r))===t||0===n&&i.s===t)&&(i=r);return i}function K(e,t,n){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(n=r+n*u-1)>M?e.c=e.e=null:n<L?e.c=[e.e=0]:(e.e=n,e.c=t),e}function W(e,t,n,r){var a,o,l,f,h,p,m,g=e.c,b=d;if(g){e:{for(a=1,f=g[0];f>=10;f/=10,a++);if((o=t-a)<0)o+=u,l=t,h=g[p=0],m=i(h/b[a-l-1]%10);else if((p=s((o+1)/u))>=g.length){if(!r)break e;for(;g.length<=p;g.push(0));h=m=0,a=1,l=(o%=u)-u+1}else{for(h=f=g[p],a=1;f>=10;f/=10,a++);m=(l=(o%=u)-u+a)<0?0:i(h/b[a-l-1]%10)}if(r=r||t<0||null!=g[p+1]||(l<0?h:h%b[a-l-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(o>0?l>0?h/b[a-l]:0:g[p-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=b[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,f=1,p--):(g.length=p+1,f=b[u-o],g[p]=l>0?i(h/b[a-l]%b[l])*f:0),r)for(;;){if(0==p){for(o=1,l=g[0];l>=10;l/=10,o++);for(l=g[0]+=f,f=1;l>=10;l/=10,f++);o!=f&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=f,g[p]!=c)break;g[p--]=0,f=1}for(o=g.length;0===g[--o];g.pop());}e.e>M?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function X(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=O||n>=R?w(t,n):E(t,n,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(n=e[t],0,h,t),B=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(n=e[t],0,8,t),F=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(b(n[0],-h,0,t),b(n[1],0,h,t),O=n[0],R=n[1]):(b(n,-h,h,t),O=-(R=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)b(n[0],-h,-1,t),b(n[1],1,h,t),L=n[0],M=n[1];else{if(b(n,-h,h,t),!n)throw Error(a+t+" cannot be zero: "+n);L=-(M=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(a+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!n,Error(a+"crypto unavailable");N=n}else N=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(n=e[t],0,9,t),G=n),e.hasOwnProperty(t="POW_PRECISION")&&(b(n=e[t],0,h,t),D=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(a+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+t+" invalid: "+n);q="0123456789"==n.slice(0,10),U=n}}return{DECIMAL_PLACES:B,ROUNDING_MODE:F,EXPONENTIAL_AT:[O,R],RANGE:[L,M],CRYPTO:N,MODULO_MODE:G,POW_PRECISION:D,FORMAT:H,ALPHABET:U}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,n,r=e.c,s=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&s>=-h&&s<=h&&s===i(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%u)<1&&(t+=u),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==i(n))break e;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return z(arguments,-1)},V.minimum=V.min=function(){return z(arguments,1)},V.random=(x=9007199254740992,S=Math.random()*x&2097151?function(){return i(Math.random()*x)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,c,l=0,f=[],p=new V(j);if(null==e?e=B:b(e,0,h),o=s(e/u),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(f.push(c%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw N=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(c%1e14),l+=7);l=o/7}if(!N)for(;l<o;)(c=S())<9e15&&(f[l++]=c%1e14);for(o=f[--l],e%=u,o&&e&&(c=d[u-e],f[l]=i(o/c)*c);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=u);for(l=1,c=f[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return p.e=r,p.c=f,p}),V.sum=function(){for(var e=1,t=arguments,n=new V(t[0]);e<t.length;)n=n.plus(t[e++]);return n},v=function(){var e="0123456789";function t(e,t,n,r){for(var s,i,a=[0],o=0,c=e.length;o<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),s=0;s<a.length;s++)a[s]>n-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/n|0,a[s]%=n)}return a.reverse()}return function(r,s,i,a,o){var c,u,l,d,f,h,p,g,b=r.indexOf("."),y=B,w=F;for(b>=0&&(d=D,D=0,r=r.replace(".",""),h=(g=new V(s)).pow(r.length-b),D=d,g.c=t(E(m(h.c),h.e,"0"),10,i,e),g.e=g.c.length),l=d=(p=t(r,s,i,o?(c=U,e):(c=e,U))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(b<0?--l:(h.c=p,h.e=l,h.s=a,p=(h=n(h,g,y,w,i)).c,f=h.r,l=h.e),b=p[u=l+y+1],d=i/2,f=f||u<0||null!=p[u+1],f=w<4?(null!=b||f)&&(0==w||w==(h.s<0?3:2)):b>d||b==d&&(4==w||f||6==w&&1&p[u-1]||w==(h.s<0?8:7)),u<1||!p[0])r=f?E(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(b=0,r="";b<=d;r+=c.charAt(p[b++]));r=E(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,s,i,a,o=0,c=e.length,u=t%f,l=t/f|0;for(e=e.slice();c--;)o=((s=u*(i=e[c]%f)+(r=l*i+(a=e[c]/f|0)*u)%f*f+o)/n|0)+(r/f|0)+l*a,e[c]=s%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var s,i;if(n!=r)i=n>r?1:-1;else for(s=i=0;s<n;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,a,o,l){var d,f,h,m,g,b,y,w,E,v,T,x,S,P,k,I,A,_=r.s==s.s?1:-1,C=r.c,j=s.c;if(!(C&&C[0]&&j&&j[0]))return new V(r.s&&s.s&&(C?!j||C[0]!=j[0]:j)?C&&0==C[0]||!j?0*_:_/0:NaN);for(E=(w=new V(_)).c=[],_=a+(f=r.e-s.e)+1,l||(l=c,f=p(r.e/u)-p(s.e/u),_=_/u|0),h=0;j[h]==(C[h]||0);h++);if(j[h]>(C[h]||0)&&f--,_<0)E.push(1),m=!0;else{for(P=C.length,I=j.length,h=0,_+=2,(g=i(l/(j[0]+1)))>1&&(j=e(j,g,l),C=e(C,g,l),I=j.length,P=C.length),S=I,T=(v=C.slice(0,I)).length;T<I;v[T++]=0);A=j.slice(),A=[0].concat(A),k=j[0],j[1]>=l/2&&k++;do{if(g=0,(d=t(j,v,I,T))<0){if(x=v[0],I!=T&&(x=x*l+(v[1]||0)),(g=i(x/k))>1)for(g>=l&&(g=l-1),y=(b=e(j,g,l)).length,T=v.length;1==t(b,v,y,T);)g--,n(b,I<y?A:j,y,l),y=b.length,d=1;else 0==g&&(d=g=1),y=(b=j.slice()).length;if(y<T&&(b=[0].concat(b)),n(v,b,T,l),T=v.length,-1==d)for(;t(j,v,I,T)<1;)g++,n(v,I<T?A:j,T,l),T=v.length}else 0===d&&(g++,v=[0]);E[h++]=g,v[0]?v[T++]=C[S]||0:(v=[C[S]],T=1)}while((S++<P||null!=v[0])&&_--);m=null!=v[0],E[0]||E.splice(0,1)}if(l==c){for(h=1,_=E[0];_>=10;_/=10,h++);W(w,a+(w.e=h+f*u-1)+1,o,m)}else w.e=f,w.r=+m;return w}}(),P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,I=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var s,i=n?t:t.replace(_,"");if(A.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(P,function(e,t,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?e:t}),r&&(s=r,i=i.replace(k,"$1").replace(I,"0.$1")),t!=i))return new V(i,s);if(V.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new V(e,t))},C.decimalPlaces=C.dp=function(e,t){var n,r,s,i=this;if(null!=e)return b(e,0,h),null==t?t=F:b(t,0,8),W(new V(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=((s=n.length-1)-p(this.e/u))*u,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},C.dividedBy=C.div=function(e,t){return n(this,new V(e,t),B,F)},C.dividedToIntegerBy=C.idiv=function(e,t){return n(this,new V(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var n,r,o,c,l,d,f,h,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+X(e));if(null!=t&&(t=new V(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new V(Math.pow(+X(p),l?e.s*(2-y(e)):+X(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(r=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&y(e)?-0:0,p.e>-1&&(c=1/c),new V(d?1/c:c);D&&(c=s(D/u+2))}for(l?(n=new V(.5),d&&(e.s=1),f=y(e)):f=(o=Math.abs(+X(e)))%2,h=new V(j);;){if(f){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}if(o){if(0===(o=i(o/2)))break;f=o%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)f=y(e);else{if(0===(o=+X(e)))break;f=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?h:(d&&(h=j.div(h)),t?h.mod(t):c?W(h,D,F,undefined):h)},C.integerValue=function(e){var t=new V(this);return null==e?e=F:b(e,0,8),W(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new V(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new V(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new V(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new V(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new V(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var n,r,s,i,a=this,o=a.s;if(t=(e=new V(e,t)).s,!o||!t)return new V(NaN);if(o!=t)return e.s=-t,a.plus(e);var l=a.e/u,d=e.e/u,f=a.c,h=e.c;if(!l||!d){if(!f||!h)return f?(e.s=-t,e):new V(h?a:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new V(f[0]?a:3==F?-0:0)}if(l=p(l),d=p(d),f=f.slice(),o=l-d){for((i=o<0)?(o=-o,s=f):(d=l,s=h),s.reverse(),t=o;t--;s.push(0));s.reverse()}else for(r=(i=(o=f.length)<(t=h.length))?o:t,o=t=0;t<r;t++)if(f[t]!=h[t]){i=f[t]<h[t];break}if(i&&(s=f,f=h,h=s,e.s=-e.s),(t=(r=h.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=c-1;r>o;){if(f[--r]<h[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=c}f[r]-=h[r]}for(;0==f[0];f.splice(0,1),--d);return f[0]?K(e,f,d):(e.s=3==F?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var r,s,i=this;return e=new V(e,t),!i.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||i.c&&!i.c[0]?new V(i):(9==G?(s=e.s,e.s=1,r=n(i,e,0,3),e.s=s,r.s*=s):r=n(i,e,0,G),(e=i.minus(r.times(e))).c[0]||1!=G||(e.s=i.s),e)},C.multipliedBy=C.times=function(e,t){var n,r,s,i,a,o,l,d,h,m,g,b,y,w,E,v=this,T=v.c,x=(e=new V(e,t)).c;if(!(T&&x&&T[0]&&x[0]))return!v.s||!e.s||T&&!T[0]&&!x||x&&!x[0]&&!T?e.c=e.e=e.s=null:(e.s*=v.s,T&&x?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(v.e/u)+p(e.e/u),e.s*=v.s,(l=T.length)<(m=x.length)&&(y=T,T=x,x=y,s=l,l=m,m=s),s=l+m,y=[];s--;y.push(0));for(w=c,E=f,s=m;--s>=0;){for(n=0,g=x[s]%E,b=x[s]/E|0,i=s+(a=l);i>s;)n=((d=g*(d=T[--a]%E)+(o=b*d+(h=T[a]/E|0)*g)%E*E+y[i]+n)/w|0)+(o/E|0)+b*h,y[i--]=d%w;y[i]=n}return n?++r:y.splice(0,1),K(e,y,r)},C.negated=function(){var e=new V(this);return e.s=-e.s||null,e},C.plus=function(e,t){var n,r=this,s=r.s;if(t=(e=new V(e,t)).s,!s||!t)return new V(NaN);if(s!=t)return e.s=-t,r.minus(e);var i=r.e/u,a=e.e/u,o=r.c,l=e.c;if(!i||!a){if(!o||!l)return new V(s/0);if(!o[0]||!l[0])return l[0]?e:new V(o[0]?r:0*s)}if(i=p(i),a=p(a),o=o.slice(),s=i-a){for(s>0?(a=i,n=l):(s=-s,n=o),n.reverse();s--;n.push(0));n.reverse()}for((s=o.length)-(t=l.length)<0&&(n=l,l=o,o=n,t=s),s=0;t;)s=(o[--t]=o[t]+l[t]+s)/c|0,o[t]=c===o[t]?0:o[t]%c;return s&&(o=[s].concat(o),++a),K(e,o,a)},C.precision=C.sd=function(e,t){var n,r,s,i=this;if(null!=e&&e!==!!e)return b(e,1,h),null==t?t=F:b(t,0,8),W(new V(i),e,t);if(!(n=i.c))return null;if(r=(s=n.length-1)*u+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},C.shiftedBy=function(e){return b(e,-9007199254740991,l),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,r,s,i,a=this,o=a.c,c=a.s,u=a.e,l=B+4,d=new V("0.5");if(1!==c||!o||!o[0])return new V(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(c=Math.sqrt(+X(a)))||c==1/0?(((t=m(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),r=new V(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new V(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(a,i,l,1))),m(i.c).slice(0,c)===(t=m(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+B+2,1),e=!r.times(r).eq(a));break}if(!s&&(W(i,i.e+B+2,0),i.times(i).eq(a))){r=i;break}l+=4,c+=4,s=1}return W(r,r.e+B+1,F,e)},C.toExponential=function(e,t){return null!=e&&(b(e,0,h),e++),$(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(b(e,0,h),e=e+this.e+1),$(this,e,t)},C.toFormat=function(e,t,n){var r,s=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=H;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=s.toFixed(e,t),s.c){var i,o=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",d=o[0],f=o[1],h=s.s<0,p=h?d.slice(1):d,m=p.length;if(u&&(i=c,c=u,u=i,m-=i),c>0&&m>0){for(i=m%c||c,d=p.substr(0,i);i<m;i+=c)d+=l+p.substr(i,c);u>0&&(d+=l+p.slice(i)),h&&(d="-"+d)}r=f?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+r+(n.suffix||"")},C.toFraction=function(e){var t,r,s,i,o,c,l,f,h,p,g,b,y=this,w=y.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(j)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+X(l));if(!w)return new V(y);for(t=new V(j),h=r=new V(j),s=f=new V(j),b=m(w),o=t.e=b.length-y.e-1,t.c[0]=d[(c=o%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?o>0?t:h:l,c=M,M=1/0,l=new V(b),f.c[0]=0;p=n(l,t,0,1),1!=(i=r.plus(p.times(s))).comparedTo(e);)r=s,s=i,h=f.plus(p.times(i=h)),f=i,t=l.minus(p.times(i=t)),l=i;return i=n(e.minus(r),s,0,1),f=f.plus(i.times(h)),r=r.plus(i.times(s)),f.s=h.s=y.s,g=n(h,s,o*=2,F).minus(y).abs().comparedTo(n(f,r,o,F).minus(y).abs())<1?[h,s]:[f,r],M=c,g},C.toNumber=function(){return+X(this)},C.toPrecision=function(e,t){return null!=e&&b(e,1,h),$(this,e,t,2)},C.toString=function(e){var t,n=this,r=n.s,s=n.e;return null===s?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=s<=O||s>=R?w(m(n.c),s):E(m(n.c),s,"0"):10===e&&q?t=E(m((n=W(new V(n),B+s+1,F)).c),n.e,"0"):(b(e,2,U.length,"Base"),t=v(E(m(n.c),s,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return X(this)},C._isBigNumber=!0,null!=t&&V.set(t),V}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define(function(){return n}):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@metamask/transaction-controller>bignumber.js",file:"node_modules/@metamask/transaction-controller/node_modules/bignumber.js/bignumber.js"}],[310,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSecurityAlertsAPIEnabled=function(){const e="true";return"true"===e.toString()},n.validateWithSecurityAlertsAPI=async function(e,t,n){let s=function(e){const t="https://security-alerts.api.cx.metamask.io";if(!t)throw new Error("Security alerts API URL is not set");return`${t}/${e}`}(`${r}/${e}`);const{newUrl:i,authorization:a}=await(null==n?void 0:n(s))||{};i&&(s=i);const o={"Content-Type":"application/json"};a&&(o.Authorization=a);return async function(e,t){const n=await fetch(e,t);if(!n.ok)throw new Error(`Security alerts API request failed with status: ${n.status}`);return await n.json()}(s,{method:"POST",body:JSON.stringify(t),headers:o})};const r="validate"}}},{package:"$root$",file:"app/scripts/lib/ppom/security-alerts-api.ts"}],[3105,{"./errors.cjs":3113,"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.assertStruct=n.assert=n.AssertionError=void 0;const r=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}n.AssertionError=a,n.assert=function(e,t="Assertion failed.",n=a){if(!e){if(t instanceof Error)throw t;throw i(n,t)}},n.assertStruct=function(e,t,n="Assertion failed",o=a){try{(0,r.assert)(e,t)}catch(e){throw i(o,`${n}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/assert.cjs"}],[3106,{"./assert.cjs":3105,"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs");n.base64=(e,t={})=>{const n=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/base64.cjs"}],[3107,{"./assert.cjs":3105,"./hex.cjs":3115,"@scure/base":3195,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.areUint8ArraysEqual=n.createDataView=n.concatBytes=n.valueToBytes=n.base64ToBytes=n.stringToBytes=n.numberToBytes=n.signedBigIntToBytes=n.bigIntToBytes=n.hexToBytes=n.bytesToBase64=n.bytesToString=n.bytesToNumber=n.bytesToSignedBigInt=n.bytesToBigInt=n.bytesToHex=n.assertIsBytes=n.isBytes=void 0;const r=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs");const a=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function o(e){return e instanceof Uint8Array}function c(e){(0,s.assert)(o(e),"Value must be a Uint8Array.")}function u(e){if(c(e),0===e.length)return"0x";const t=a(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,i.add0x)(n.join(""))}function l(e){c(e);const t=u(e);return BigInt(t)}function d(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let e=0;e<r.length;e++){const t=n.charCodeAt(2*e),s=n.charCodeAt(2*e+1),i=t-(t<58?48:87),a=s-(s<58?48:87);r[e]=16*i+a}return r}function f(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return d(e.toString(16))}function h(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return d(e.toString(16))}function p(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function m(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return h(e);if("string"==typeof e)return e.startsWith("0x")?d(e):p(e);if(o(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}n.isBytes=o,n.assertIsBytes=c,n.bytesToHex=u,n.bytesToBigInt=l,n.bytesToSignedBigInt=function(e){c(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},n.bytesToNumber=function(e){c(e);const t=l(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},n.bytesToString=function(e){return c(e),(new TextDecoder).decode(e)},n.bytesToBase64=function(e){return c(e),r.base64.encode(e)},n.hexToBytes=d,n.bigIntToBytes=f,n.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()},n.numberToBytes=h,n.stringToBytes=p,n.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},n.valueToBytes=m,n.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let r=0;r<e.length;r++){const s=m(e[r]);t[r]=s,n+=s.length}const r=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length;return r},n.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)},n.areUint8ArraysEqual=function(e,t){let n=e.byteLength^t.byteLength;const r=Math.max(e.byteLength,t.byteLength);for(let s=0;s<r;s++){n|=(e[s]??0)^(t[s]??0)}return 0===n}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/bytes.cjs"}],[3108,{"./superstruct.cjs":3124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCaipAssetId=n.toCaipAssetType=n.toCaipAccountId=n.toCaipChainId=n.parseCaipAssetId=n.parseCaipAssetType=n.parseCaipAccountId=n.parseCaipChainId=n.isCaipAssetId=n.isCaipAssetType=n.isCaipTokenId=n.isCaipAssetReference=n.isCaipAssetNamespace=n.isCaipAccountAddress=n.isCaipAccountId=n.isCaipReference=n.isCaipNamespace=n.isCaipChainId=n.KnownCaipNamespace=n.CaipAssetTypeOrIdStruct=n.CaipAssetIdStruct=n.CaipAssetTypeStruct=n.CaipTokenIdStruct=n.CaipAssetReferenceStruct=n.CaipAssetNamespaceStruct=n.CaipAccountAddressStruct=n.CaipAccountIdStruct=n.CaipReferenceStruct=n.CaipNamespaceStruct=n.CaipChainIdStruct=n.CAIP_ASSET_ID_REGEX=n.CAIP_ASSET_TYPE_REGEX=n.CAIP_TOKEN_ID_REGEX=n.CAIP_ASSET_REFERENCE_REGEX=n.CAIP_ASSET_NAMESPACE_REGEX=n.CAIP_ACCOUNT_ADDRESS_REGEX=n.CAIP_ACCOUNT_ID_REGEX=n.CAIP_REFERENCE_REGEX=n.CAIP_NAMESPACE_REGEX=n.CAIP_CHAIN_ID_REGEX=void 0;const r=e("./superstruct.cjs");n.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,n.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,n.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_ASSET_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_ASSET_REFERENCE_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_TOKEN_ID_REGEX=/^[-.%a-zA-Z0-9]{1,78}$/u,n.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u;function s(e){return"string"==typeof e&&n.CAIP_NAMESPACE_REGEX.test(e)}function i(e){return"string"==typeof e&&n.CAIP_REFERENCE_REGEX.test(e)}function a(e){return"string"==typeof e&&n.CAIP_ACCOUNT_ADDRESS_REGEX.test(e)}function o(e){return"string"==typeof e&&n.CAIP_ASSET_NAMESPACE_REGEX.test(e)}function c(e){return"string"==typeof e&&n.CAIP_ASSET_REFERENCE_REGEX.test(e)}function u(e){return"string"==typeof e&&n.CAIP_TOKEN_ID_REGEX.test(e)}n.CaipChainIdStruct=(0,r.definePattern)("CaipChainId",n.CAIP_CHAIN_ID_REGEX),n.CaipNamespaceStruct=(0,r.definePattern)("CaipNamespace",n.CAIP_NAMESPACE_REGEX),n.CaipReferenceStruct=(0,r.definePattern)("CaipReference",n.CAIP_REFERENCE_REGEX),n.CaipAccountIdStruct=(0,r.definePattern)("CaipAccountId",n.CAIP_ACCOUNT_ID_REGEX),n.CaipAccountAddressStruct=(0,r.definePattern)("CaipAccountAddress",n.CAIP_ACCOUNT_ADDRESS_REGEX),n.CaipAssetNamespaceStruct=(0,r.definePattern)("CaipAssetNamespace",n.CAIP_ASSET_NAMESPACE_REGEX),n.CaipAssetReferenceStruct=(0,r.definePattern)("CaipAssetReference",n.CAIP_ASSET_REFERENCE_REGEX),n.CaipTokenIdStruct=(0,r.definePattern)("CaipTokenId",n.CAIP_TOKEN_ID_REGEX),n.CaipAssetTypeStruct=(0,r.definePattern)("CaipAssetType",n.CAIP_ASSET_TYPE_REGEX),n.CaipAssetIdStruct=(0,r.definePattern)("CaipAssetId",n.CAIP_ASSET_ID_REGEX),n.CaipAssetTypeOrIdStruct=(0,r.definePattern)("CaipAssetTypeOrId",/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})(\/(?<tokenId>[-.%a-zA-Z0-9]{1,78}))?$/u),function(e){e.Bip122="bip122",e.Solana="solana",e.Tron="tron",e.Eip155="eip155",e.Wallet="wallet"}(n.KnownCaipNamespace||(n.KnownCaipNamespace={})),n.isCaipChainId=function(e){return"string"==typeof e&&n.CAIP_CHAIN_ID_REGEX.test(e)},n.isCaipNamespace=s,n.isCaipReference=i,n.isCaipAccountId=function(e){return"string"==typeof e&&n.CAIP_ACCOUNT_ID_REGEX.test(e)},n.isCaipAccountAddress=a,n.isCaipAssetNamespace=o,n.isCaipAssetReference=c,n.isCaipTokenId=u,n.isCaipAssetType=function(e){return"string"==typeof e&&n.CAIP_ASSET_TYPE_REGEX.test(e)},n.isCaipAssetId=function(e){return"string"==typeof e&&n.CAIP_ASSET_ID_REGEX.test(e)},n.parseCaipChainId=function(e){const t=n.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},n.parseCaipAccountId=function(e){const t=n.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetType=function(e){const t=n.CAIP_ASSET_TYPE_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset type.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetId=function(e){const t=n.CAIP_ASSET_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset ID.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,tokenId:t.groups.tokenId,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.toCaipChainId=function(e,t){if(!s(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`},n.toCaipAccountId=function(e,t,r){if(!s(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!a(r))throw new Error(`Invalid "accountAddress", must match: ${n.CAIP_ACCOUNT_ADDRESS_REGEX.toString()}`);return`${e}:${t}:${r}`},n.toCaipAssetType=function(e,t,r,a){if(!s(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!o(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!c(a))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);return`${e}:${t}/${r}:${a}`},n.toCaipAssetId=function(e,t,r,a,l){if(!s(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!o(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!c(a))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);if(!u(l))throw new Error(`Invalid "tokenId", must match: ${n.CAIP_TOKEN_ID_REGEX.toString()}`);return`${e}:${t}/${r}:${a}/${l}`}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/caip-types.cjs"}],[3109,{"./base64.cjs":3106,"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),s=e("./base64.cjs");n.ChecksumStruct=(0,r.size)((0,s.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/checksum.cjs"}],[3110,{"./assert.cjs":3105,"./bytes.cjs":3107,"./hex.cjs":3115,"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createHex=n.createBytes=n.createBigInt=n.createNumber=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),a.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),u=(0,r.coerce)((0,r.bigint)(),o,BigInt),l=((0,r.union)([a.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,r.coerce)(a.StrictHexStruct,(0,r.instance)(Uint8Array),i.bytesToHex);n.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},n.createBigInt=function(e){try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},n.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},n.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/coercers.cjs"}],[3111,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.FrozenSet=n.FrozenMap=void 0;class o{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach((n,r,s)=>e.call(t,n,r,this))}get(e){return i(this,r,"f").get(e)}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ")} `:""}}`}}n.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach((n,r,s)=>e.call(t,n,r,this))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}n.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/collections.cjs"}],[3112,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/encryption-types.cjs"}],[3113,{"./misc.cjs":3120,"pony-cause":5083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapError=n.getErrorMessage=n.isErrorWithStack=n.isErrorWithMessage=n.isErrorWithCode=void 0;const r=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}n.isErrorWithCode=i,n.isErrorWithMessage=a,n.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},n.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},n.wrapError=function(e,t){if((n=e)instanceof Error||(0,s.isObject)(n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),i(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/errors.cjs"}],[3114,{"@noble/hashes/sha256":3169},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha256=void 0;const r=e("@noble/hashes/sha256");n.sha256=async function(e){return"crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest?new Uint8Array(await globalThis.crypto.subtle.digest("SHA-256",e)):(0,r.sha256)(e)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/hashing.cjs"}],[3115,{"./assert.cjs":3105,"@metamask/superstruct":2936,"@noble/hashes/sha3":3170,lodash:4838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.isValidHexAddress=n.isValidHexAddressUnmemoized=n.isValidChecksumAddress=n.isValidChecksumAddressUnmemoized=n.getChecksumAddress=n.getChecksumAddressUnmemoized=n.assertIsStrictHexString=n.assertIsHexString=n.isHexChecksumAddress=n.isHexAddress=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0;const r=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("lodash"),a=e("./assert.cjs"),o=/^(?:0x)?[0-9a-f]+$/iu,c=/^0x[0-9a-f]+$/iu,u=/^0x[0-9a-f]{40}$/u,l=/^0x[0-9a-fA-F]{40}$/u;n.HexStruct=(0,r.pattern)((0,r.string)(),o),n.StrictHexStruct=(0,r.pattern)((0,r.string)(),c),n.HexAddressStruct=(0,r.pattern)((0,r.string)(),u),n.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),l);const d=e=>"string"==typeof e;function f(e){return d(e)&&o.test(e)}function h(e){return d(e)&&c.test(e)}function p(e){return d(e)&&u.test(e)}function m(e){return d(e)&&l.test(e)}function g(e){(0,a.assert)(m(e),"Invalid hex address.");const t=w(e).toLowerCase(),n=(0,s.keccak_256)(t),{length:r}=t,i=new Array(r);for(let e=0;e<r;e++){const r=1&e,s=n[e>>1],a=0===r?s>>4:15&s;i[e]=a>=8?t[e].toUpperCase():t[e]}return`0x${i.join("")}`}function b(e){return!!m(e)&&(0,n.getChecksumAddress)(e)===e}function y(e){return p(e)||(0,n.isValidChecksumAddress)(e)}function w(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}n.isHexString=f,n.isStrictHexString=h,n.isHexAddress=p,n.isHexChecksumAddress=m,n.assertIsHexString=function(e){(0,a.assert)(f(e),"Value must be a hexadecimal string.")},n.assertIsStrictHexString=function(e){(0,a.assert)(h(e),'Value must be a hexadecimal string, starting with "0x".')},n.getChecksumAddressUnmemoized=g,n.getChecksumAddress=(0,i.memoize)(g),n.isValidChecksumAddressUnmemoized=b,n.isValidChecksumAddress=(0,i.memoize)(b),n.isValidHexAddressUnmemoized=y,n.isValidHexAddress=(0,i.memoize)(y),n.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},n.remove0x=w}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/hex.cjs"}],[3116,{"./assert.cjs":3105,"./base64.cjs":3106,"./bytes.cjs":3107,"./caip-types.cjs":3108,"./checksum.cjs":3109,"./coercers.cjs":3110,"./collections.cjs":3111,"./encryption-types.cjs":3112,"./errors.cjs":3113,"./hashing.cjs":3114,"./hex.cjs":3115,"./json.cjs":3117,"./keyring.cjs":3118,"./logging.cjs":3119,"./misc.cjs":3120,"./number.cjs":3121,"./opaque.cjs":3122,"./promise.cjs":3123,"./superstruct.cjs":3124,"./time.cjs":3125,"./transaction-types.cjs":3126,"./unitsConversion.cjs":3127,"./versions.cjs":3128},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.unitMap=n.getValueOfUnit=n.numberToString=n.fromWei=n.toWei=n.remove0x=n.add0x=n.isValidChecksumAddress=n.getChecksumAddress=n.isValidHexAddress=n.assertIsStrictHexString=n.assertIsHexString=n.isHexChecksumAddress=n.isHexAddress=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0,s(e("./assert.cjs"),n),s(e("./base64.cjs"),n),s(e("./bytes.cjs"),n),s(e("./caip-types.cjs"),n),s(e("./checksum.cjs"),n),s(e("./coercers.cjs"),n),s(e("./collections.cjs"),n),s(e("./encryption-types.cjs"),n),s(e("./errors.cjs"),n),s(e("./hashing.cjs"),n);var i=e("./hex.cjs");Object.defineProperty(n,"HexStruct",{enumerable:!0,get:function(){return i.HexStruct}}),Object.defineProperty(n,"StrictHexStruct",{enumerable:!0,get:function(){return i.StrictHexStruct}}),Object.defineProperty(n,"HexAddressStruct",{enumerable:!0,get:function(){return i.HexAddressStruct}}),Object.defineProperty(n,"HexChecksumAddressStruct",{enumerable:!0,get:function(){return i.HexChecksumAddressStruct}}),Object.defineProperty(n,"isHexString",{enumerable:!0,get:function(){return i.isHexString}}),Object.defineProperty(n,"isStrictHexString",{enumerable:!0,get:function(){return i.isStrictHexString}}),Object.defineProperty(n,"isHexAddress",{enumerable:!0,get:function(){return i.isHexAddress}}),Object.defineProperty(n,"isHexChecksumAddress",{enumerable:!0,get:function(){return i.isHexChecksumAddress}}),Object.defineProperty(n,"assertIsHexString",{enumerable:!0,get:function(){return i.assertIsHexString}}),Object.defineProperty(n,"assertIsStrictHexString",{enumerable:!0,get:function(){return i.assertIsStrictHexString}}),Object.defineProperty(n,"isValidHexAddress",{enumerable:!0,get:function(){return i.isValidHexAddress}}),Object.defineProperty(n,"getChecksumAddress",{enumerable:!0,get:function(){return i.getChecksumAddress}}),Object.defineProperty(n,"isValidChecksumAddress",{enumerable:!0,get:function(){return i.isValidChecksumAddress}}),Object.defineProperty(n,"add0x",{enumerable:!0,get:function(){return i.add0x}}),Object.defineProperty(n,"remove0x",{enumerable:!0,get:function(){return i.remove0x}}),s(e("./json.cjs"),n),s(e("./keyring.cjs"),n),s(e("./logging.cjs"),n),s(e("./misc.cjs"),n),s(e("./number.cjs"),n),s(e("./opaque.cjs"),n),s(e("./promise.cjs"),n),s(e("./superstruct.cjs"),n),s(e("./time.cjs"),n),s(e("./transaction-types.cjs"),n),s(e("./versions.cjs"),n);var a=e("./unitsConversion.cjs");Object.defineProperty(n,"toWei",{enumerable:!0,get:function(){return a.toWei}}),Object.defineProperty(n,"fromWei",{enumerable:!0,get:function(){return a.fromWei}}),Object.defineProperty(n,"numberToString",{enumerable:!0,get:function(){return a.numberToString}}),Object.defineProperty(n,"getValueOfUnit",{enumerable:!0,get:function(){return a.getValueOfUnit}}),Object.defineProperty(n,"unitMap",{enumerable:!0,get:function(){return a.unitMap}})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/index.cjs"}],[3117,{"./assert.cjs":3105,"./misc.cjs":3120,"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const n=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],n)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!a(n)||e.validator(t,n),refiner:(t,n)=>!a(n)||e.refiner(t,n)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(!c(e[n])){t=!1;break}return t}const n=Object.entries(e);for(let e=0;e<n.length;e++)if("string"!=typeof n[e][0]||!c(n[e][1])){t=!1;break}return t}return!1}function u(e){return(0,r.create)(e,n.JsonStruct)}n.object=e=>(0,r.object)(e),n.exactOptional=o,n.UnsafeJsonStruct=(0,r.define)("JSON",e=>c(e)),n.JsonStruct=(0,r.coerce)(n.UnsafeJsonStruct,(0,r.refine)((0,r.any)(),"JSON",e=>(0,r.is)(e,n.UnsafeJsonStruct)),e=>JSON.parse(JSON.stringify(e,(e,t)=>"__proto__"===e||"constructor"===e?undefined:t))),n.isValidJson=function(e){try{return u(e),!0}catch{return!1}},n.getSafeJson=u,n.getJsonSize=function(e){(0,s.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,r.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(n.JsonStruct),stack:o((0,r.string)())}),n.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),n.JsonStruct),(0,r.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,r.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,r.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,r.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,r.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,r.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,r.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,r.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,r.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/json.cjs"}],[3118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/keyring.cjs"}],[3119,{debug:4233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const s=(0,r(e("debug")).default)("metamask");n.createProjectLogger=function(e){return s.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/logging.cjs"}],[3120,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=r,n.calculateStringSize=function(e){return e.split("").reduce((e,t)=>r(t)?e+1:e+2,0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/misc.cjs"}],[3121,{"./assert.cjs":3105,"./hex.cjs":3115},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const r=e("./assert.cjs"),s=e("./hex.cjs");n.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/number.cjs"}],[3122,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/opaque.cjs"}],[3123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const r=new Promise((e,r)=>{t=e,n=r});return e&&r.catch(e=>{}),{promise:r,resolve:t,reject:n}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/promise.cjs"}],[3124,{"@metamask/superstruct":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.definePattern=void 0;const r=e("@metamask/superstruct");n.definePattern=function(e,t){return(0,r.define)(e,e=>"string"==typeof e&&t.test(e))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/superstruct.cjs"}],[3125,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return r(e,"count"),e*t},n.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/time.cjs"}],[3126,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/transaction-types.cjs"}],[3127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toWei=n.fromWei=n.numberToString=n.getValueOfUnit=n.unitMap=n.numericToBigInt=void 0;const r=BigInt(0),s=BigInt(-1);function i(e){if("string"==typeof e)return BigInt(e);if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;throw new Error(`Cannot convert ${typeof e} to BigInt`)}n.numericToBigInt=i,n.unitMap={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};const a=Object.fromEntries(Object.entries(n.unitMap).map(([e,t])=>[e,BigInt(t)])),o=Object.fromEntries(Object.entries(n.unitMap).map(([e,t])=>[e,t.length-1||1])),c=/^-?[0-9.]+$/u,u=/^([0-9]*[1-9]|0)(0*)/u,l=/\B(?=(\d{3})+(?!\d))/gu;function d(e){if("string"==typeof e){if(!c.test(e))throw new Error(`while converting number to string, invalid number value '${e}', should be a number matching (^-?[0-9.]+).`);return e}if("number"==typeof e)return String(e);if("bigint"==typeof e)return e.toString();throw new Error(`while converting number to string, invalid number value '${String(e)}' type ${typeof e}.`)}n.getValueOfUnit=function(e="ether"){const t=e.toLowerCase(),r=a[t];if(r===undefined)throw new Error(`The unit provided ${e} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);return r},n.numberToString=d,n.fromWei=function(e,t,c){let d=i(e);const f=d<r,h=t.toLowerCase(),p=a[h],m=o[h],g=c??{};if(p===undefined)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);if(p===r)return f?"-0":"0";f&&(d*=s);let b=(d%p).toString();if(b=b.padStart(m,"0"),!g.pad){const e=b.match(u);b=e?.[1]??"0"}let y=(d/p).toString();g.commify&&(y=y.replace(l,","));let w=`${y}${"0"===b?"":`.${b}`}`;return f&&(w=`-${w}`),w},n.toWei=function(e,t){const i=t.toLowerCase(),c=a[i],u=o[i];if(c===undefined)throw new Error(`The unit provided ${t} doesn't exist, please use the one of the following units ${JSON.stringify(n.unitMap,null,2)}`);if(c===r)return r;if("bigint"==typeof e&&"wei"===i)return e;if("bigint"==typeof e)return e*c;let l=d(e);const f=l.startsWith("-");if(f&&(l=l.substring(1)),"."===l)throw new Error(`While converting number ${e} to wei, invalid value`);const h=l.split(".");if(h.length>2)throw new Error(`While converting number ${e} to wei,  too many decimal points`);let p=h[0],m=h[1];if(p||(p="0"),m||(m="0"),m.length>u)throw new Error(`While converting number ${e} to wei, too many decimal places`);m=m.padEnd(u,"0");let g=BigInt(p)*c+BigInt(m);return f&&(g*=s),g}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/unitsConversion.cjs"}],[3128,{"./assert.cjs":3105,"@metamask/superstruct":2936,semver:5586},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const r=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");n.VersionStruct=(0,r.refine)((0,r.string)(),"Version",e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`),n.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`),n.isValidSemVerVersion=function(e){return(0,r.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,r.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,s.gt)(e,t)},n.gtRange=function(e,t){return(0,s.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/versions.cjs"}],[3130,{"./utils":3140,assert:4080,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("assert")),i=e("./utils");let a=[];var o;!function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"}(o||(o={}));const c=e=>"ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom".slice(4*e,4*e+4),u=e=>`${e}${i.getCRCHex(t.from(e,"hex"))}`,l=(e,n)=>{const r=u(e);return t.from(r,"hex").reduce((e,t)=>[...e,c(t)],[]).join(n)},d=e=>{const n=u(e);return t.from(n,"hex").reduce((e,t)=>e+(e=>{const t=c(e);return`${t[0]}${t[3]}`})(t),"")},f=(e,n,r)=>{const o=(4==r?e.split(n):i.partition(e,2)).map(e=>((e,n)=>{s.default(e.length===n,"Invalid Bytewords: word.length does not match wordLength provided");const r=26;if(0===a.length){a=[...new Array(676)].map(()=>-1);for(let e=0;e<256;e++){const t=c(e);let n=t[0].charCodeAt(0)-"a".charCodeAt(0),s=t[3].charCodeAt(0)-"a".charCodeAt(0);a[s*r+n]=e}}let i=e[0].toLowerCase().charCodeAt(0)-"a".charCodeAt(0),o=e[4==n?3:1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0);s.default(0<=i&&i<r&&0<=o&&o<r,"Invalid Bytewords: invalid word");let u=a[o*r+i];if(s.default(-1!==u,"Invalid Bytewords: value not in lookup table"),4==n){const t=c(u);let n=e[1].toLowerCase(),r=e[2].toLowerCase();s.default(n===t[1]&&r===t[2],"Invalid Bytewords: invalid middle letters of word")}return t.from([u]).toString("hex")})(e,r)).join("");s.default(o.length>=5,"Invalid Bytewords: invalid decoded string length");const[u,l]=i.split(t.from(o,"hex"),4),d=i.getCRCHex(u);return s.default(d===l.toString("hex"),"Invalid Checksum"),u.toString("hex")};n.default={decode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return f(e," ",4);case o.URI:return f(e,"-",4);case o.MINIMAL:return f(e,"",2);default:throw new Error(`Invalid style ${t}`)}},encode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return l(e," ");case o.URI:return l(e,"-");case o.MINIMAL:return d(e);default:throw new Error(`Invalid style ${t}`)}},STYLES:o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/bytewords.js"}],[3131,{buffer:4084,"cbor-sync":4104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.cborDecode=n.cborEncode=void 0;const r=e("cbor-sync");n.cborEncode=e=>r.encode(e);n.cborDecode=e=>r.decode(t.isBuffer(e)?e:t.from(e,"hex"))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/cbor.js"}],[3132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidChecksumError=n.InvalidSequenceComponentError=n.InvalidTypeError=n.InvalidPathLengthError=n.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}n.InvalidSchemeError=r;class s extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}n.InvalidPathLengthError=s;class i extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}n.InvalidTypeError=i;class a extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}n.InvalidSequenceComponentError=a;class o extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}n.InvalidChecksumError=o}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/errors.js"}],[3133,{"./errors":3132,"./fountainUtils":3135,"./utils":3140,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.FountainDecoderPart=void 0;const r=e("./utils"),s=e("./fountainUtils"),i=e("./errors");class a{constructor(e,t){this._indexes=e,this._fragment=t}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(e){const t=s.chooseFragments(e.seqNum,e.seqLength,e.checksum),n=e.fragment;return new a(t,n)}isSimple(){return 1===this.indexes.length}}n.FountainDecoderPart=a;class o{constructor(){this.result=undefined,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(e){if(0===this.expectedPartIndexes.length)[...new Array(e.seqLength)].forEach((e,t)=>this.expectedPartIndexes.push(t)),this.expectedMessageLength=e.messageLength,this.expectedChecksum=e.checksum,this.expectedFragmentLength=e.fragment.length;else{if(this.expectedPartIndexes.length!==e.seqLength)return!1;if(this.expectedMessageLength!==e.messageLength)return!1;if(this.expectedChecksum!==e.checksum)return!1;if(this.expectedFragmentLength!==e.fragment.length)return!1}return!0}reducePartByPart(e,t){if(r.arrayContains(e.indexes,t.indexes)){const n=r.setDifference(e.indexes,t.indexes),s=r.bufferXOR(e.fragment,t.fragment);return new a(n,s)}return e}reduceMixedBy(e){const t=[];this.mixedParts.map(({value:t})=>this.reducePartByPart(t,e)).forEach(e=>{e.isSimple()?this.queuedParts.push(e):t.push({key:e.indexes,value:e})}),this.mixedParts=t}processSimplePart(e){const t=e.indexes[0];if(!this.receivedPartIndexes.includes(t))if(this.simpleParts.push({key:e.indexes,value:e}),this.receivedPartIndexes.push(t),r.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const e=this.simpleParts.map(({value:e})=>e).sort((e,t)=>e.indexes[0]-t.indexes[0]),t=o.joinFragments(e.map(e=>e.fragment),this.expectedMessageLength);r.getCRC(t)===this.expectedChecksum?this.result=t:this.error=new i.InvalidChecksumError}else this.reduceMixedBy(e)}processMixedPart(e){if(this.mixedParts.some(({key:t})=>r.arraysEqual(t,e.indexes)))return;let t=this.simpleParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),e);t=this.mixedParts.reduce((e,{value:t})=>this.reducePartByPart(e,t),t),t.isSimple()?this.queuedParts.push(t):(this.reduceMixedBy(t),this.mixedParts.push({key:t.indexes,value:t}))}processQueuedItem(){if(0===this.queuedParts.length)return;const e=this.queuedParts.shift();e.isSimple()?this.processSimplePart(e):this.processMixedPart(e)}receivePart(e){if(this.isComplete())return!1;if(!this.validatePart(e))return!1;const t=a.fromEncoderPart(e);for(this.lastPartIndexes=t.indexes,this.queuedParts.push(t);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return Boolean(this.result!==undefined&&this.result.length>0)}isSuccess(){return Boolean(this.error===undefined&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:t.from([])}isFailure(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:Math.min(.99,this.processedPartsCount/(1.75*e))}getProgress(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:this.receivedPartIndexes.length/e}}n.default=o,o.joinFragments=(e,n)=>t.concat(e).slice(0,n)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainDecoder.js"}],[3134,{"./cbor":3131,"./fountainUtils":3135,"./utils":3140,assert:4080,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.FountainEncoderPart=void 0;const s=r(e("assert")),i=e("./utils"),a=e("./fountainUtils"),o=e("./cbor");class c{constructor(e,t,n,r,s){this._seqNum=e,this._seqLength=t,this._messageLength=n,this._checksum=r,this._fragment=s}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const e=o.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return t.from(e)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(e){const[n,r,i,a,u]=o.cborDecode(e);return s.default("number"==typeof n),s.default("number"==typeof r),s.default("number"==typeof i),s.default("number"==typeof a),s.default(t.isBuffer(u)&&u.length>0),new c(n,r,i,a,t.from(u))}}n.FountainEncoderPart=c;class u{constructor(e,t=100,n=0,r=10){const s=u.findNominalFragmentLength(e.length,r,t);this._messageLength=e.length,this._fragments=u.partitionMessage(e,s),this.fragmentLength=s,this.seqNum=i.toUint32(n),this.checksum=i.getCRC(e)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return 1===this._fragments.length}seqLength(){return this._fragments.length}mix(e){return e.reduce((e,t)=>i.bufferXOR(this._fragments[t],e),t.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=i.toUint32(this.seqNum+1);const e=a.chooseFragments(this.seqNum,this._fragments.length,this.checksum),t=this.mix(e);return new c(this.seqNum,this._fragments.length,this._messageLength,this.checksum,t)}static findNominalFragmentLength(e,t,n){s.default(e>0),s.default(t>0),s.default(n>=t);const r=Math.ceil(e/t);let i=0;for(let t=1;t<=r&&(i=Math.ceil(e/t),!(i<=n));t++);return i}static partitionMessage(e,n){let r,s=t.from(e),a=[];for(;s.length>0;)[r,s]=i.split(s,-n),r=t.alloc(n,0).fill(r,0,r.length),a.push(r);return a}}n.default=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainEncoder.js"}],[3135,{"./utils":3140,"./xoshiro":3141,"@keystonehq/alias-sampling":853,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.chooseFragments=n.shuffle=n.chooseDegree=void 0;const s=e("./utils"),i=r(e("./xoshiro")),a=r(e("@keystonehq/alias-sampling"));n.chooseDegree=(e,t)=>{const n=[...new Array(e)].map((e,t)=>1/(t+1));return a.default(n,undefined,t.nextDouble).next()+1};n.shuffle=(e,t)=>{let n=[...e],r=[];for(;n.length>0;){let e=t.nextInt(0,n.length-1),s=n[e];n.splice(e,1),r.push(s)}return r};n.chooseFragments=(e,r,a)=>{if(e<=r)return[e-1];{const o=t.concat([s.intToBytes(e),s.intToBytes(a)]),c=new i.default(o),u=n.chooseDegree(r,c),l=[...new Array(r)].map((e,t)=>t);return n.shuffle(l,c).slice(0,u)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainUtils.js"}],[3136,{"./ur":3137,"./urDecoder":3138,"./urEncoder":3139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.URDecoder=n.UREncoder=n.UR=void 0;const s=r(e("./ur"));n.UR=s.default;const i=r(e("./urEncoder"));n.UREncoder=i.default;const a=r(e("./urDecoder"));n.URDecoder=a.default}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/index.js"}],[3137,{"./cbor":3131,"./errors":3132,"./utils":3140,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./errors"),s=e("./utils"),i=e("./cbor");class a{constructor(e,t="bytes"){if(this._cborPayload=e,this._type=t,!s.isURType(this._type))throw new r.InvalidTypeError}static fromBuffer(e){return new a(i.cborEncode(e))}static from(e,n){return a.fromBuffer(t.from(e,n))}decodeCBOR(){return i.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(e){return this.type===e.type&&this.cbor.equals(e.cbor)}}n.default=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/ur.js"}],[3138,{"./bytewords":3130,"./errors":3132,"./fountainDecoder":3133,"./fountainEncoder":3134,"./ur":3137,"./utils":3140,assert:4080,buffer:4084},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainDecoder")),i=r(e("./bytewords")),a=r(e("assert")),o=e("./utils"),c=e("./errors"),u=r(e("./ur")),l=e("./fountainEncoder");class d{constructor(e=new s.default,t="bytes"){this.fountainDecoder=e,this.type=t,a.default(o.isURType(t),"Invalid UR type"),this.expected_type=""}static decodeBody(e,n){const r=i.default.decode(n,i.default.STYLES.MINIMAL);return new u.default(t.from(r,"hex"),e)}validatePart(e){return this.expected_type?this.expected_type===e:!!o.isURType(e)&&(this.expected_type=e,!0)}static decode(e){const[t,n]=this.parse(e);if(0===n.length)throw new c.InvalidPathLengthError;const r=n[0];return d.decodeBody(t,r)}static parse(e){const t=e.toLowerCase();if("ur:"!==t.slice(0,3))throw new c.InvalidSchemeError;const n=t.slice(3).split("/"),r=n[0];if(n.length<2)throw new c.InvalidPathLengthError;if(!o.isURType(r))throw new c.InvalidTypeError;return[r,n.slice(1)]}static parseSequenceComponent(e){const t=e.split("-");if(2!==t.length)throw new c.InvalidSequenceComponentError;const n=o.toUint32(Number(t[0])),r=Number(t[1]);if(n<1||r<1)throw new c.InvalidSequenceComponentError;return[n,r]}receivePart(e){if(this.result!==undefined)return!1;const[t,n]=d.parse(e);if(!this.validatePart(t))return!1;if(1===n.length)return this.result=d.decodeBody(t,n[0]),!0;if(2!==n.length)throw new c.InvalidPathLengthError;const[r,s]=n,[a,o]=d.parseSequenceComponent(r),f=i.default.decode(s,i.default.STYLES.MINIMAL),h=l.FountainEncoderPart.fromCBOR(f);return a===h.seqNum&&o===h.seqLength&&(!!this.fountainDecoder.receivePart(h)&&(this.fountainDecoder.isSuccess()?this.result=new u.default(this.fountainDecoder.resultMessage(),t):this.fountainDecoder.isFailure()&&(this.error=new c.InvalidSchemeError),!0))}resultUR(){return this.result?this.result:new u.default(t.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}n.default=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urDecoder.js"}],[3139,{"./bytewords":3130,"./fountainEncoder":3134},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainEncoder")),i=r(e("./bytewords"));class a{constructor(e,t,n,r){this.ur=e,this.fountainEncoder=new s.default(e.cbor,t,n,r)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map(()=>this.nextPart())}nextPart(){const e=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?a.encodeSinglePart(this.ur):a.encodePart(this.ur.type,e)}static encodeUri(e,t){return[e,t.join("/")].join(":")}static encodeUR(e){return a.encodeUri("ur",e)}static encodePart(e,t){const n=`${t.seqNum}-${t.seqLength}`,r=i.default.encode(t.cbor().toString("hex"),i.default.STYLES.MINIMAL);return a.encodeUR([e,n,r])}static encodeSinglePart(e){const t=i.default.encode(e.cbor.toString("hex"),i.default.STYLES.MINIMAL);return a.encodeUR([e.type,t])}}n.default=a}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urEncoder.js"}],[3140,{buffer:4084,crc:4179,"sha.js":5608},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.bufferXOR=n.setDifference=n.arrayContains=n.arraysEqual=n.hasPrefix=n.isURType=n.intToBytes=n.toUint32=n.getCRCHex=n.getCRC=n.split=n.partition=n.sha256Hash=void 0;const s=r(e("sha.js")),i=e("crc");n.sha256Hash=e=>s.default("sha256").update(e).digest();n.partition=(e,t)=>e.match(new RegExp(".{1,"+t+"}","g"))||[e];n.split=(e,t)=>[e.slice(0,-t),e.slice(-t)];n.getCRC=e=>i.crc32(e);n.getCRCHex=e=>i.crc32(e).toString(16).padStart(8,"0");n.toUint32=e=>e>>>0;n.intToBytes=e=>{const n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e,!1),t.from(n)};n.isURType=e=>e.split("").every((t,n)=>{let r=e.charCodeAt(n);return"a".charCodeAt(0)<=r&&r<="z".charCodeAt(0)||("0".charCodeAt(0)<=r&&r<="9".charCodeAt(0)||r==="-".charCodeAt(0))});n.hasPrefix=(e,t)=>0===e.indexOf(t);n.arraysEqual=(e,t)=>e.length===t.length&&e.every(e=>t.includes(e));n.arrayContains=(e,t)=>t.every(t=>e.includes(t));n.setDifference=(e,t)=>e.filter(e=>t.indexOf(e)<0);n.bufferXOR=(e,n)=>{const r=Math.max(e.length,n.length),s=t.allocUnsafe(r);for(let t=0;t<r;++t)s[t]=e[t]^n[t];return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/utils.js"}],[3141,{"./utils":3140,"bignumber.js":3142,jsbi:4653},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./utils"),i=r(e("bignumber.js")),a=r(e("jsbi")),o=(e,t)=>a.default.bitwiseXor(a.default.asUintN(64,a.default.leftShift(e,a.default.BigInt(t))),a.default.BigInt(a.default.asUintN(64,a.default.signedRightShift(e,a.default.subtract(a.default.BigInt(64),a.default.BigInt(t))))));n.default=class{constructor(e){this.next=()=>new i.default(this.roll().toString()),this.nextDouble=()=>new i.default(this.roll().toString()).div(0x10000000000000000),this.nextInt=(e,t)=>Math.floor(this.nextDouble().toNumber()*(t-e+1)+e),this.nextByte=()=>this.nextInt(0,255),this.nextData=e=>[...new Array(e)].map(()=>this.nextByte());const t=s.sha256Hash(e);this.s=[a.default.BigInt(0),a.default.BigInt(0),a.default.BigInt(0),a.default.BigInt(0)],this.setS(t)}setS(e){for(let t=0;t<4;t++){let n=8*t,r=a.default.BigInt(0);for(let t=0;t<8;t++)r=a.default.asUintN(64,a.default.leftShift(r,a.default.BigInt(8))),r=a.default.asUintN(64,a.default.bitwiseOr(r,a.default.BigInt(e[n+t])));this.s[t]=a.default.asUintN(64,r)}}roll(){const e=a.default.asUintN(64,a.default.multiply(o(a.default.asUintN(64,a.default.multiply(this.s[1],a.default.BigInt(5))),7),a.default.BigInt(9))),t=a.default.asUintN(64,a.default.leftShift(this.s[1],a.default.BigInt(17)));return this.s[2]=a.default.asUintN(64,a.default.bitwiseXor(this.s[2],a.default.BigInt(this.s[0]))),this.s[3]=a.default.asUintN(64,a.default.bitwiseXor(this.s[3],a.default.BigInt(this.s[1]))),this.s[1]=a.default.asUintN(64,a.default.bitwiseXor(this.s[1],a.default.BigInt(this.s[2]))),this.s[0]=a.default.asUintN(64,a.default.bitwiseXor(this.s[0],a.default.BigInt(this.s[3]))),this.s[2]=a.default.asUintN(64,a.default.bitwiseXor(this.s[2],a.default.BigInt(t))),this.s[3]=a.default.asUintN(64,o(this.s[3],45)),e}}}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/xoshiro.js"}],[3142,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,r=1,s=e.length,i=e[0]+"";r<s;){for(t=e[r++]+"",n=u-t.length;n--;t="0"+t);i+=t}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function g(e,t){var n,r,s=e.c,i=t.c,a=e.s,o=t.s,c=e.e,u=t.e;if(!a||!o)return null;if(n=s&&!s[0],r=i&&!i[0],n||r)return n?r?0:-o:a;if(a!=o)return a;if(n=a<0,r=c==u,!s||!i)return r?0:!s^n?1:-1;if(!r)return c>u^n?1:-1;for(o=(c=s.length)<(u=i.length)?c:u,a=0;a<o;a++)if(s[a]!=i[a])return s[a]>i[a]^n?1:-1;return c==u?0:c>u^n?1:-1}function b(e,t,n,r){if(e<t||e>n||e!==i(e))throw Error(a+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,n){var r,s;if(t<0){for(s=n+".";++t;s+=n);e=s+e}else if(++t>(r=e.length)){for(s=n,t-=r;--t;s+=n);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,v,T,x,S,P,k,I,A,_,C=V.prototype={constructor:V,toString:null,valueOf:null},j=new V(1),B=20,F=4,O=-7,R=21,L=-1e7,M=1e7,N=!1,G=1,D=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function V(e,t){var n,s,a,c,d,f,h,p,m=this;if(!(m instanceof V))return new V(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<L?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>M?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!r.test(p=String(e)))return T(m,p,f);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(b(t,2,U.length,"Base"),10==t&&q)return W(m=new V(e),B+m.e+1,F);if(p=String(e),f="number"==typeof e){if(0*e!=0)return T(m,p,f,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,V.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=U.slice(0,t),c=d=0,h=p.length;d<h;d++)if(n.indexOf(s=p.charAt(d))<0){if("."==s){if(d>c){c=h;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,d=-1,c=0;continue}return T(m,String(e),f,t)}f=!1,(c=(p=v(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(d,++h)){if(h-=d,f&&V.DEBUG&&h>15&&(e>l||e!==i(e)))throw Error(o+m.s*e);if((c=c-d-1)>M)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],d=(c+1)%u,c<0&&(d+=u),d<h){for(d&&m.c.push(+p.slice(0,d)),h-=u;d<h;)m.c.push(+p.slice(d,d+=u));d=u-(p=p.slice(d)).length}else d-=h;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function $(e,t,n,r){var s,i,a,o,c;if(null==n?n=F:b(n,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==t)c=m(e.c),c=1==r||2==r&&(a<=O||a>=R)?w(c,a):E(c,a,"0");else if(i=(e=W(new V(e),t,n)).e,o=(c=m(e.c)).length,1==r||2==r&&(t<=i||i<=O)){for(;o<t;c+="0",o++);c=w(c,i)}else if(t-=a,c=E(c,i,"0"),i+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-o)>0)for(i+1==o&&(c+=".");t--;c+="0");return e.s<0&&s?"-"+c:c}function z(e,t){for(var n,r,s=1,i=new V(e[0]);s<e.length;s++)(!(r=new V(e[s])).s||(n=g(i,r))===t||0===n&&i.s===t)&&(i=r);return i}function K(e,t,n){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(n=r+n*u-1)>M?e.c=e.e=null:n<L?e.c=[e.e=0]:(e.e=n,e.c=t),e}function W(e,t,n,r){var a,o,l,f,h,p,m,g=e.c,b=d;if(g){e:{for(a=1,f=g[0];f>=10;f/=10,a++);if((o=t-a)<0)o+=u,l=t,h=g[p=0],m=i(h/b[a-l-1]%10);else if((p=s((o+1)/u))>=g.length){if(!r)break e;for(;g.length<=p;g.push(0));h=m=0,a=1,l=(o%=u)-u+1}else{for(h=f=g[p],a=1;f>=10;f/=10,a++);m=(l=(o%=u)-u+a)<0?0:i(h/b[a-l-1]%10)}if(r=r||t<0||null!=g[p+1]||(l<0?h:h%b[a-l-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(o>0?l>0?h/b[a-l]:0:g[p-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=b[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,f=1,p--):(g.length=p+1,f=b[u-o],g[p]=l>0?i(h/b[a-l]%b[l])*f:0),r)for(;;){if(0==p){for(o=1,l=g[0];l>=10;l/=10,o++);for(l=g[0]+=f,f=1;l>=10;l/=10,f++);o!=f&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=f,g[p]!=c)break;g[p--]=0,f=1}for(o=g.length;0===g[--o];g.pop());}e.e>M?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function X(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=O||n>=R?w(t,n):E(t,n,"0"),e.s<0?"-"+t:t)}return V.clone=e,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(n=e[t],0,h,t),B=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(n=e[t],0,8,t),F=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(b(n[0],-h,0,t),b(n[1],0,h,t),O=n[0],R=n[1]):(b(n,-h,h,t),O=-(R=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)b(n[0],-h,-1,t),b(n[1],1,h,t),L=n[0],M=n[1];else{if(b(n,-h,h,t),!n)throw Error(a+t+" cannot be zero: "+n);L=-(M=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(a+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw N=!n,Error(a+"crypto unavailable");N=n}else N=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(n=e[t],0,9,t),G=n),e.hasOwnProperty(t="POW_PRECISION")&&(b(n=e[t],0,h,t),D=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(a+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+t+" invalid: "+n);q="0123456789"==n.slice(0,10),U=n}}return{DECIMAL_PLACES:B,ROUNDING_MODE:F,EXPONENTIAL_AT:[O,R],RANGE:[L,M],CRYPTO:N,MODULO_MODE:G,POW_PRECISION:D,FORMAT:H,ALPHABET:U}},V.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!V.DEBUG)return!0;var t,n,r=e.c,s=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&s>=-h&&s<=h&&s===i(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%u)<1&&(t+=u),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==i(n))break e;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},V.maximum=V.max=function(){return z(arguments,-1)},V.minimum=V.min=function(){return z(arguments,1)},V.random=(x=9007199254740992,S=Math.random()*x&2097151?function(){return i(Math.random()*x)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,c,l=0,f=[],p=new V(j);if(null==e?e=B:b(e,0,h),o=s(e/u),N)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(f.push(c%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw N=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(c%1e14),l+=7);l=o/7}if(!N)for(;l<o;)(c=S())<9e15&&(f[l++]=c%1e14);for(o=f[--l],e%=u,o&&e&&(c=d[u-e],f[l]=i(o/c)*c);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=u);for(l=1,c=f[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return p.e=r,p.c=f,p}),V.sum=function(){for(var e=1,t=arguments,n=new V(t[0]);e<t.length;)n=n.plus(t[e++]);return n},v=function(){var e="0123456789";function t(e,t,n,r){for(var s,i,a=[0],o=0,c=e.length;o<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),s=0;s<a.length;s++)a[s]>n-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/n|0,a[s]%=n)}return a.reverse()}return function(r,s,i,a,o){var c,u,l,d,f,h,p,g,b=r.indexOf("."),y=B,w=F;for(b>=0&&(d=D,D=0,r=r.replace(".",""),h=(g=new V(s)).pow(r.length-b),D=d,g.c=t(E(m(h.c),h.e,"0"),10,i,e),g.e=g.c.length),l=d=(p=t(r,s,i,o?(c=U,e):(c=e,U))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(b<0?--l:(h.c=p,h.e=l,h.s=a,p=(h=n(h,g,y,w,i)).c,f=h.r,l=h.e),b=p[u=l+y+1],d=i/2,f=f||u<0||null!=p[u+1],f=w<4?(null!=b||f)&&(0==w||w==(h.s<0?3:2)):b>d||b==d&&(4==w||f||6==w&&1&p[u-1]||w==(h.s<0?8:7)),u<1||!p[0])r=f?E(c.charAt(1),-y,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(b=0,r="";b<=d;r+=c.charAt(p[b++]));r=E(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,s,i,a,o=0,c=e.length,u=t%f,l=t/f|0;for(e=e.slice();c--;)o=((s=u*(i=e[c]%f)+(r=l*i+(a=e[c]/f|0)*u)%f*f+o)/n|0)+(r/f|0)+l*a,e[c]=s%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var s,i;if(n!=r)i=n>r?1:-1;else for(s=i=0;s<n;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,a,o,l){var d,f,h,m,g,b,y,w,E,v,T,x,S,P,k,I,A,_=r.s==s.s?1:-1,C=r.c,j=s.c;if(!(C&&C[0]&&j&&j[0]))return new V(r.s&&s.s&&(C?!j||C[0]!=j[0]:j)?C&&0==C[0]||!j?0*_:_/0:NaN);for(E=(w=new V(_)).c=[],_=a+(f=r.e-s.e)+1,l||(l=c,f=p(r.e/u)-p(s.e/u),_=_/u|0),h=0;j[h]==(C[h]||0);h++);if(j[h]>(C[h]||0)&&f--,_<0)E.push(1),m=!0;else{for(P=C.length,I=j.length,h=0,_+=2,(g=i(l/(j[0]+1)))>1&&(j=e(j,g,l),C=e(C,g,l),I=j.length,P=C.length),S=I,T=(v=C.slice(0,I)).length;T<I;v[T++]=0);A=j.slice(),A=[0].concat(A),k=j[0],j[1]>=l/2&&k++;do{if(g=0,(d=t(j,v,I,T))<0){if(x=v[0],I!=T&&(x=x*l+(v[1]||0)),(g=i(x/k))>1)for(g>=l&&(g=l-1),y=(b=e(j,g,l)).length,T=v.length;1==t(b,v,y,T);)g--,n(b,I<y?A:j,y,l),y=b.length,d=1;else 0==g&&(d=g=1),y=(b=j.slice()).length;if(y<T&&(b=[0].concat(b)),n(v,b,T,l),T=v.length,-1==d)for(;t(j,v,I,T)<1;)g++,n(v,I<T?A:j,T,l),T=v.length}else 0===d&&(g++,v=[0]);E[h++]=g,v[0]?v[T++]=C[S]||0:(v=[C[S]],T=1)}while((S++<P||null!=v[0])&&_--);m=null!=v[0],E[0]||E.splice(0,1)}if(l==c){for(h=1,_=E[0];_>=10;_/=10,h++);W(w,a+(w.e=h+f*u-1)+1,o,m)}else w.e=f,w.r=+m;return w}}(),P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,I=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var s,i=n?t:t.replace(_,"");if(A.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(P,function(e,t,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?e:t}),r&&(s=r,i=i.replace(k,"$1").replace(I,"0.$1")),t!=i))return new V(i,s);if(V.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new V(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new V(e,t))},C.decimalPlaces=C.dp=function(e,t){var n,r,s,i=this;if(null!=e)return b(e,0,h),null==t?t=F:b(t,0,8),W(new V(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=((s=n.length-1)-p(this.e/u))*u,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},C.dividedBy=C.div=function(e,t){return n(this,new V(e,t),B,F)},C.dividedToIntegerBy=C.idiv=function(e,t){return n(this,new V(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var n,r,o,c,l,d,f,h,p=this;if((e=new V(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+X(e));if(null!=t&&(t=new V(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new V(Math.pow(+X(p),l?e.s*(2-y(e)):+X(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new V(NaN);(r=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&y(e)?-0:0,p.e>-1&&(c=1/c),new V(d?1/c:c);D&&(c=s(D/u+2))}for(l?(n=new V(.5),d&&(e.s=1),f=y(e)):f=(o=Math.abs(+X(e)))%2,h=new V(j);;){if(f){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}if(o){if(0===(o=i(o/2)))break;f=o%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)f=y(e);else{if(0===(o=+X(e)))break;f=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?h:(d&&(h=j.div(h)),t?h.mod(t):c?W(h,D,F,undefined):h)},C.integerValue=function(e){var t=new V(this);return null==e?e=F:b(e,0,8),W(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new V(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new V(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new V(e,t)))||0===t},C.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new V(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new V(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var n,r,s,i,a=this,o=a.s;if(t=(e=new V(e,t)).s,!o||!t)return new V(NaN);if(o!=t)return e.s=-t,a.plus(e);var l=a.e/u,d=e.e/u,f=a.c,h=e.c;if(!l||!d){if(!f||!h)return f?(e.s=-t,e):new V(h?a:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new V(f[0]?a:3==F?-0:0)}if(l=p(l),d=p(d),f=f.slice(),o=l-d){for((i=o<0)?(o=-o,s=f):(d=l,s=h),s.reverse(),t=o;t--;s.push(0));s.reverse()}else for(r=(i=(o=f.length)<(t=h.length))?o:t,o=t=0;t<r;t++)if(f[t]!=h[t]){i=f[t]<h[t];break}if(i&&(s=f,f=h,h=s,e.s=-e.s),(t=(r=h.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=c-1;r>o;){if(f[--r]<h[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=c}f[r]-=h[r]}for(;0==f[0];f.splice(0,1),--d);return f[0]?K(e,f,d):(e.s=3==F?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var r,s,i=this;return e=new V(e,t),!i.c||!e.s||e.c&&!e.c[0]?new V(NaN):!e.c||i.c&&!i.c[0]?new V(i):(9==G?(s=e.s,e.s=1,r=n(i,e,0,3),e.s=s,r.s*=s):r=n(i,e,0,G),(e=i.minus(r.times(e))).c[0]||1!=G||(e.s=i.s),e)},C.multipliedBy=C.times=function(e,t){var n,r,s,i,a,o,l,d,h,m,g,b,y,w,E,v=this,T=v.c,x=(e=new V(e,t)).c;if(!(T&&x&&T[0]&&x[0]))return!v.s||!e.s||T&&!T[0]&&!x||x&&!x[0]&&!T?e.c=e.e=e.s=null:(e.s*=v.s,T&&x?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(v.e/u)+p(e.e/u),e.s*=v.s,(l=T.length)<(m=x.length)&&(y=T,T=x,x=y,s=l,l=m,m=s),s=l+m,y=[];s--;y.push(0));for(w=c,E=f,s=m;--s>=0;){for(n=0,g=x[s]%E,b=x[s]/E|0,i=s+(a=l);i>s;)n=((d=g*(d=T[--a]%E)+(o=b*d+(h=T[a]/E|0)*g)%E*E+y[i]+n)/w|0)+(o/E|0)+b*h,y[i--]=d%w;y[i]=n}return n?++r:y.splice(0,1),K(e,y,r)},C.negated=function(){var e=new V(this);return e.s=-e.s||null,e},C.plus=function(e,t){var n,r=this,s=r.s;if(t=(e=new V(e,t)).s,!s||!t)return new V(NaN);if(s!=t)return e.s=-t,r.minus(e);var i=r.e/u,a=e.e/u,o=r.c,l=e.c;if(!i||!a){if(!o||!l)return new V(s/0);if(!o[0]||!l[0])return l[0]?e:new V(o[0]?r:0*s)}if(i=p(i),a=p(a),o=o.slice(),s=i-a){for(s>0?(a=i,n=l):(s=-s,n=o),n.reverse();s--;n.push(0));n.reverse()}for((s=o.length)-(t=l.length)<0&&(n=l,l=o,o=n,t=s),s=0;t;)s=(o[--t]=o[t]+l[t]+s)/c|0,o[t]=c===o[t]?0:o[t]%c;return s&&(o=[s].concat(o),++a),K(e,o,a)},C.precision=C.sd=function(e,t){var n,r,s,i=this;if(null!=e&&e!==!!e)return b(e,1,h),null==t?t=F:b(t,0,8),W(new V(i),e,t);if(!(n=i.c))return null;if(r=(s=n.length-1)*u+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},C.shiftedBy=function(e){return b(e,-9007199254740991,l),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,r,s,i,a=this,o=a.c,c=a.s,u=a.e,l=B+4,d=new V("0.5");if(1!==c||!o||!o[0])return new V(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(c=Math.sqrt(+X(a)))||c==1/0?(((t=m(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),r=new V(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new V(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(a,i,l,1))),m(i.c).slice(0,c)===(t=m(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(r,r.e+B+2,1),e=!r.times(r).eq(a));break}if(!s&&(W(i,i.e+B+2,0),i.times(i).eq(a))){r=i;break}l+=4,c+=4,s=1}return W(r,r.e+B+1,F,e)},C.toExponential=function(e,t){return null!=e&&(b(e,0,h),e++),$(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(b(e,0,h),e=e+this.e+1),$(this,e,t)},C.toFormat=function(e,t,n){var r,s=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=H;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=s.toFixed(e,t),s.c){var i,o=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",d=o[0],f=o[1],h=s.s<0,p=h?d.slice(1):d,m=p.length;if(u&&(i=c,c=u,u=i,m-=i),c>0&&m>0){for(i=m%c||c,d=p.substr(0,i);i<m;i+=c)d+=l+p.substr(i,c);u>0&&(d+=l+p.slice(i)),h&&(d="-"+d)}r=f?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+r+(n.suffix||"")},C.toFraction=function(e){var t,r,s,i,o,c,l,f,h,p,g,b,y=this,w=y.c;if(null!=e&&(!(l=new V(e)).isInteger()&&(l.c||1!==l.s)||l.lt(j)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+X(l));if(!w)return new V(y);for(t=new V(j),h=r=new V(j),s=f=new V(j),b=m(w),o=t.e=b.length-y.e-1,t.c[0]=d[(c=o%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?o>0?t:h:l,c=M,M=1/0,l=new V(b),f.c[0]=0;p=n(l,t,0,1),1!=(i=r.plus(p.times(s))).comparedTo(e);)r=s,s=i,h=f.plus(p.times(i=h)),f=i,t=l.minus(p.times(i=t)),l=i;return i=n(e.minus(r),s,0,1),f=f.plus(i.times(h)),r=r.plus(i.times(s)),f.s=h.s=y.s,g=n(h,s,o*=2,F).minus(y).abs().comparedTo(n(f,r,o,F).minus(y).abs())<1?[h,s]:[f,r],M=c,g},C.toNumber=function(){return+X(this)},C.toPrecision=function(e,t){return null!=e&&b(e,1,h),$(this,e,t,2)},C.toString=function(e){var t,n=this,r=n.s,s=n.e;return null===s?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=s<=O||s>=R?w(m(n.c),s):E(m(n.c),s,"0"):10===e&&q?t=E(m((n=W(new V(n),B+s+1,F)).c),n.e,"0"):(b(e,2,U.length,"Base"),t=v(E(m(n.c),s,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return X(this)},C._isBigNumber=!0,null!=t&&V.set(t),V}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define(function(){return n}):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@ngraveio/bc-ur>bignumber.js",file:"node_modules/@ngraveio/bc-ur/node_modules/bignumber.js/bignumber.js"}],[3143,{"./utils.js":3146},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.polyval=n.ghash=void 0,n._toGHASHKey=u;const r=e("./utils.js"),s=16,i=new Uint8Array(16),a=(0,r.u32)(i),o=(e,t,n,r)=>({s3:n<<31|r>>>1,s2:t<<31|n>>>1,s1:e<<31|t>>>1,s0:e>>>1^225<<24&-(1&(1&r))}),c=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function u(e){e.reverse();const t=1&e[15];let n=0;for(let t=0;t<e.length;t++){const r=e[t];e[t]=r>>>1|n,n=(1&r)<<7}return e[0]^=225&-t,e}class l{constructor(e,t){this.blockLen=s,this.outputLen=s,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,r.toBytes)(e),(0,r.abytes)(e,16);const n=(0,r.createView)(e);let i=n.getUint32(0,!1),a=n.getUint32(4,!1),u=n.getUint32(8,!1),l=n.getUint32(12,!1);const d=[];for(let e=0;e<128;e++)d.push({s0:c(i),s1:c(a),s2:c(u),s3:c(l)}),({s0:i,s1:a,s2:u,s3:l}=o(i,a,u,l));const f=(h=t||1024)>65536?8:h>1024?4:2;var h;if(![1,2,4,8].includes(f))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=f;const p=128/f,m=this.windowSize=2**f,g=[];for(let e=0;e<p;e++)for(let t=0;t<m;t++){let n=0,r=0,s=0,i=0;for(let a=0;a<f;a++){if(!(t>>>f-a-1&1))continue;const{s0:o,s1:c,s2:u,s3:l}=d[f*e+a];n^=o,r^=c,s^=u,i^=l}g.push({s0:n,s1:r,s2:s,s3:i})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:s,t:i,windowSize:a}=this;let o=0,c=0,u=0,l=0;const d=(1<<s)-1;let f=0;for(const h of[e,t,n,r])for(let e=0;e<4;e++){const t=h>>>8*e&255;for(let e=8/s-1;e>=0;e--){const n=t>>>s*e&d,{s0:r,s1:h,s2:p,s3:m}=i[f*a+n];o^=r,c^=h,u^=p,l^=m,f+=1}}this.s0=o,this.s1=c,this.s2=u,this.s3=l}update(e){(0,r.aexists)(this),e=(0,r.toBytes)(e),(0,r.abytes)(e);const t=(0,r.u32)(e),n=Math.floor(e.length/s),o=e.length%s;for(let e=0;e<n;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return o&&(i.set(e.subarray(n*s)),this._updateBlock(a[0],a[1],a[2],a[3]),(0,r.clean)(a)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:i}=this,a=(0,r.u32)(e);return a[0]=t,a[1]=n,a[2]=s,a[3]=i,e}digest(){const e=new Uint8Array(s);return this.digestInto(e),this.destroy(),e}}class d extends l{constructor(e,t){e=(0,r.toBytes)(e),(0,r.abytes)(e);const n=u((0,r.copyBytes)(e));super(n,t),(0,r.clean)(n)}update(e){e=(0,r.toBytes)(e),(0,r.aexists)(this);const t=(0,r.u32)(e),n=e.length%s,o=Math.floor(e.length/s);for(let e=0;e<o;e++)this._updateBlock(c(t[4*e+3]),c(t[4*e+2]),c(t[4*e+1]),c(t[4*e+0]));return n&&(i.set(e.subarray(o*s)),this._updateBlock(c(a[3]),c(a[2]),c(a[1]),c(a[0])),(0,r.clean)(a)),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{s0:t,s1:n,s2:s,s3:i}=this,a=(0,r.u32)(e);return a[0]=t,a[1]=n,a[2]=s,a[3]=i,e.reverse()}}function f(e){const t=(t,n)=>e(n,t.length).update((0,r.toBytes)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}n.ghash=f((e,t)=>new l(e,t)),n.polyval=f((e,t)=>new d(e,t))}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/_polyval.js"}],[3144,{"./_polyval.js":3143,"./utils.js":3146},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unsafe=n.aeskwp=n.aeskw=n.siv=n.gcmsiv=n.gcm=n.cfb=n.cbc=n.ecb=n.ctr=void 0;const r=e("./_polyval.js"),s=e("./utils.js"),i=16,a=new Uint8Array(i);function o(e){return e<<1^283&-(e>>7)}function c(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=o(e);return n}const u=(()=>{const e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=o(n))e[t]=n;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,s.clean)(e),t})(),l=u.map((e,t)=>u.indexOf(t)),d=e=>e<<24|e>>>8,f=e=>e<<8|e>>>24,h=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function p(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((n,r)=>t(e[r])),r=n.map(f),s=r.map(f),i=s.map(f),a=new Uint32Array(65536),o=new Uint32Array(65536),c=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){const l=256*t+u;a[l]=n[t]^r[u],o[l]=s[t]^i[u],c[l]=e[t]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:s,T3:i,T01:a,T23:o}}const m=p(u,e=>c(e,3)<<24|e<<16|e<<8|c(e,2)),g=p(l,e=>c(e,11)<<24|c(e,13)<<16|c(e,9)<<8|c(e,14)),b=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=o(n))e[t]=n;return e})();function y(e){(0,s.abytes)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error("aes: invalid key size, should be 16, 24 or 32, got "+t);const{sbox2:n}=m,r=[];(0,s.isAligned32)(e)||r.push(e=(0,s.copyBytes)(e));const i=(0,s.u32)(e),a=i.length,o=e=>v(n,e,e,e,e),c=new Uint32Array(t+28);c.set(i);for(let e=a;e<c.length;e++){let t=c[e-1];e%a===0?t=o(d(t))^b[e/a-1]:a>6&&e%a===4&&(t=o(t)),c[e]=c[e-a]^t}return(0,s.clean)(...r),c}function w(e){const t=y(e),n=t.slice(),r=t.length,{sbox2:i}=m,{T0:a,T1:o,T2:c,T3:u}=g;for(let e=0;e<r;e+=4)for(let s=0;s<4;s++)n[e+s]=t[r-e-4+s];(0,s.clean)(t);for(let e=4;e<r-4;e++){const t=n[e],r=v(i,t,t,t,t);n[e]=a[255&r]^o[r>>>8&255]^c[r>>>16&255]^u[r>>>24]}return n}function E(e,t,n,r,s,i){return e[n<<8&65280|r>>>8&255]^t[s>>>8&65280|i>>>24&255]}function v(e,t,n,r,s){return e[255&t|65280&n]|e[r>>>16&255|s>>>16&65280]<<16}function T(e,t,n,r,s){const{sbox2:i,T01:a,T23:o}=m;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let i=0;i<u;i++){const i=e[c++]^E(a,o,t,n,r,s),u=e[c++]^E(a,o,n,r,s,t),l=e[c++]^E(a,o,r,s,t,n),d=e[c++]^E(a,o,s,t,n,r);t=i,n=u,r=l,s=d}return{s0:e[c++]^v(i,t,n,r,s),s1:e[c++]^v(i,n,r,s,t),s2:e[c++]^v(i,r,s,t,n),s3:e[c++]^v(i,s,t,n,r)}}function x(e,t,n,r,s){const{sbox2:i,T01:a,T23:o}=g;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let i=0;i<u;i++){const i=e[c++]^E(a,o,t,s,r,n),u=e[c++]^E(a,o,n,t,s,r),l=e[c++]^E(a,o,r,n,t,s),d=e[c++]^E(a,o,s,r,n,t);t=i,n=u,r=l,s=d}return{s0:e[c++]^v(i,t,s,r,n),s1:e[c++]^v(i,n,t,s,r),s2:e[c++]^v(i,r,n,t,s),s3:e[c++]^v(i,s,r,n,t)}}function S(e,t,n,r){(0,s.abytes)(t,i),(0,s.abytes)(n);const a=n.length;r=(0,s.getOutput)(a,r),(0,s.complexOverlapBytes)(n,r);const o=t,c=(0,s.u32)(o);let{s0:u,s1:l,s2:d,s3:f}=T(e,c[0],c[1],c[2],c[3]);const h=(0,s.u32)(n),p=(0,s.u32)(r);for(let t=0;t+4<=h.length;t+=4){p[t+0]=h[t+0]^u,p[t+1]=h[t+1]^l,p[t+2]=h[t+2]^d,p[t+3]=h[t+3]^f;let n=1;for(let e=o.length-1;e>=0;e--)n=n+(255&o[e])|0,o[e]=255&n,n>>>=8;({s0:u,s1:l,s2:d,s3:f}=T(e,c[0],c[1],c[2],c[3]))}const m=i*Math.floor(h.length/4);if(m<a){const e=new Uint32Array([u,l,d,f]),t=(0,s.u8)(e);for(let e=m,s=0;e<a;e++,s++)r[e]=n[e]^t[s];(0,s.clean)(e)}return r}function P(e,t,n,r,a){(0,s.abytes)(n,i),(0,s.abytes)(r),a=(0,s.getOutput)(r.length,a);const o=n,c=(0,s.u32)(o),u=(0,s.createView)(o),l=(0,s.u32)(r),d=(0,s.u32)(a),f=t?0:12,h=r.length;let p=u.getUint32(f,t),{s0:m,s1:g,s2:b,s3:y}=T(e,c[0],c[1],c[2],c[3]);for(let n=0;n+4<=l.length;n+=4)d[n+0]=l[n+0]^m,d[n+1]=l[n+1]^g,d[n+2]=l[n+2]^b,d[n+3]=l[n+3]^y,p=p+1>>>0,u.setUint32(f,p,t),({s0:m,s1:g,s2:b,s3:y}=T(e,c[0],c[1],c[2],c[3]));const w=i*Math.floor(l.length/4);if(w<h){const e=new Uint32Array([m,g,b,y]),t=(0,s.u8)(e);for(let e=w,n=0;e<h;e++,n++)a[e]=r[e]^t[n];(0,s.clean)(e)}return a}function k(e){if((0,s.abytes)(e),e.length%i!==0)throw new Error("aes-(cbc/ecb).decrypt ciphertext should consist of blocks with size 16")}function I(e,t,n){(0,s.abytes)(e);let r=e.length;const a=r%i;if(!t&&0!==a)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,s.isAligned32)(e)||(e=(0,s.copyBytes)(e));const o=(0,s.u32)(e);if(t){let e=i-a;e||(e=i),r+=e}n=(0,s.getOutput)(r,n),(0,s.complexOverlapBytes)(e,n);return{b:o,o:(0,s.u32)(n),out:n}}function A(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const s=e.subarray(0,-r);for(let t=0;t<r;t++)if(e[n-t-1]!==r)throw new Error("aes/pcks5: wrong padding");return s}function _(e){const t=new Uint8Array(16),n=(0,s.u32)(t);t.set(e);const r=i-e.length;for(let e=i-r;e<i;e++)t[e]=r;return n}function C(e,t,n,r,i){const a=i?i.length:0,o=e.create(n,r.length+a);i&&o.update(i);const c=(0,s.u64Lengths)(8*r.length,8*a,t);o.update(r),o.update(c);const u=o.digest();return(0,s.clean)(c),u}n.ctr=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r){if((0,s.abytes)(n),r!==undefined&&((0,s.abytes)(r),!(0,s.isAligned32)(r)))throw new Error("unaligned destination");const i=y(e),a=(0,s.copyBytes)(t),o=[i,a];(0,s.isAligned32)(n)||o.push(n=(0,s.copyBytes)(n));const c=S(i,a,n,r);return(0,s.clean)(...o),c}return{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}),n.ecb=(0,s.wrapCipher)({blockSize:16},function(e,t={}){const n=!t.disablePadding;return{encrypt(t,r){const{b:i,o:a,out:o}=I(t,n,r),c=y(e);let u=0;for(;u+4<=i.length;){const{s0:e,s1:t,s2:n,s3:r}=T(c,i[u+0],i[u+1],i[u+2],i[u+3]);a[u++]=e,a[u++]=t,a[u++]=n,a[u++]=r}if(n){const e=_(t.subarray(4*u)),{s0:n,s1:r,s2:s,s3:i}=T(c,e[0],e[1],e[2],e[3]);a[u++]=n,a[u++]=r,a[u++]=s,a[u++]=i}return(0,s.clean)(c),o},decrypt(t,r){k(t);const i=w(e);r=(0,s.getOutput)(t.length,r);const a=[i];(0,s.isAligned32)(t)||a.push(t=(0,s.copyBytes)(t)),(0,s.complexOverlapBytes)(t,r);const o=(0,s.u32)(t),c=(0,s.u32)(r);for(let e=0;e+4<=o.length;){const{s0:t,s1:n,s2:r,s3:s}=x(i,o[e+0],o[e+1],o[e+2],o[e+3]);c[e++]=t,c[e++]=n,c[e++]=r,c[e++]=s}return(0,s.clean)(...a),A(r,n)}}}),n.cbc=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t,n={}){const r=!n.disablePadding;return{encrypt(n,i){const a=y(e),{b:o,o:c,out:u}=I(n,r,i);let l=t;const d=[a];(0,s.isAligned32)(l)||d.push(l=(0,s.copyBytes)(l));const f=(0,s.u32)(l);let h=f[0],p=f[1],m=f[2],g=f[3],b=0;for(;b+4<=o.length;)h^=o[b+0],p^=o[b+1],m^=o[b+2],g^=o[b+3],({s0:h,s1:p,s2:m,s3:g}=T(a,h,p,m,g)),c[b++]=h,c[b++]=p,c[b++]=m,c[b++]=g;if(r){const e=_(n.subarray(4*b));h^=e[0],p^=e[1],m^=e[2],g^=e[3],({s0:h,s1:p,s2:m,s3:g}=T(a,h,p,m,g)),c[b++]=h,c[b++]=p,c[b++]=m,c[b++]=g}return(0,s.clean)(...d),u},decrypt(n,i){k(n);const a=w(e);let o=t;const c=[a];(0,s.isAligned32)(o)||c.push(o=(0,s.copyBytes)(o));const u=(0,s.u32)(o);i=(0,s.getOutput)(n.length,i),(0,s.isAligned32)(n)||c.push(n=(0,s.copyBytes)(n)),(0,s.complexOverlapBytes)(n,i);const l=(0,s.u32)(n),d=(0,s.u32)(i);let f=u[0],h=u[1],p=u[2],m=u[3];for(let e=0;e+4<=l.length;){const t=f,n=h,r=p,s=m;f=l[e+0],h=l[e+1],p=l[e+2],m=l[e+3];const{s0:i,s1:o,s2:c,s3:u}=x(a,f,h,p,m);d[e++]=i^t,d[e++]=o^n,d[e++]=c^r,d[e++]=u^s}return(0,s.clean)(...c),A(i,r)}}}),n.cfb=(0,s.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r,a){(0,s.abytes)(n);const o=n.length;if(a=(0,s.getOutput)(o,a),(0,s.overlapBytes)(n,a))throw new Error("overlapping src and dst not supported.");const c=y(e);let u=t;const l=[c];(0,s.isAligned32)(u)||l.push(u=(0,s.copyBytes)(u)),(0,s.isAligned32)(n)||l.push(n=(0,s.copyBytes)(n));const d=(0,s.u32)(n),f=(0,s.u32)(a),h=r?f:d,p=(0,s.u32)(u);let m=p[0],g=p[1],b=p[2],w=p[3];for(let e=0;e+4<=d.length;){const{s0:t,s1:n,s2:r,s3:s}=T(c,m,g,b,w);f[e+0]=d[e+0]^t,f[e+1]=d[e+1]^n,f[e+2]=d[e+2]^r,f[e+3]=d[e+3]^s,m=h[e++],g=h[e++],b=h[e++],w=h[e++]}const E=i*Math.floor(d.length/4);if(E<o){({s0:m,s1:g,s2:b,s3:w}=T(c,m,g,b,w));const e=(0,s.u8)(new Uint32Array([m,g,b,w]));for(let t=E,r=0;t<o;t++,r++)a[t]=n[t]^e[r];(0,s.clean)(e)}return(0,s.clean)(...l),a}return{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}),n.gcm=(0,s.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(e,t,n){if(t.length<8)throw new Error("aes/gcm: invalid nonce length");function i(e,t,s){const i=C(r.ghash,!1,e,s,n);for(let e=0;e<t.length;e++)i[e]^=t[e];return i}function o(){const n=y(e),i=a.slice(),o=a.slice();if(P(n,!1,o,o,i),12===t.length)o.set(t);else{const e=a.slice(),n=(0,s.createView)(e);(0,s.setBigUint64)(n,8,BigInt(8*t.length),!1);const c=r.ghash.create(i).update(t).update(e);c.digestInto(o),c.destroy()}return{xk:n,authKey:i,counter:o,tagMask:P(n,!1,o,a)}}return{encrypt(e){const{xk:t,authKey:n,counter:r,tagMask:a}=o(),c=new Uint8Array(e.length+16),u=[t,n,r,a];(0,s.isAligned32)(e)||u.push(e=(0,s.copyBytes)(e)),P(t,!1,r,e,c.subarray(0,e.length));const l=i(n,a,c.subarray(0,c.length-16));return u.push(l),c.set(l,e.length),(0,s.clean)(...u),c},decrypt(e){const{xk:t,authKey:n,counter:r,tagMask:a}=o(),c=[t,n,a,r];(0,s.isAligned32)(e)||c.push(e=(0,s.copyBytes)(e));const u=e.subarray(0,-16),l=e.subarray(-16),d=i(n,a,u);if(c.push(d),!(0,s.equalBytes)(d,l))throw new Error("aes/gcm: invalid ghash tag");const f=P(t,!1,r,u);return(0,s.clean)(...c),f}}});const j=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n){throw new Error(e+": expected value in range "+("["+t+".."+n+"]")+", got "+r)}};function B(e){return e instanceof Uint32Array||ArrayBuffer.isView(e)&&"Uint32Array"===e.constructor.name}function F(e,t){if((0,s.abytes)(t,16),!B(e))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,s.u32)(t);let{s0:r,s1:i,s2:a,s3:o}=T(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=a,n[3]=o,t}function O(e,t){if((0,s.abytes)(t,16),!B(e))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,s.u32)(t);let{s0:r,s1:i,s2:a,s3:o}=x(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=a,n[3]=o,t}n.gcmsiv=(0,s.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(e,t,n){const i=j("AAD",0,2**36),a=j("plaintext",0,2**36),o=j("nonce",12,12),c=j("ciphertext",16,2**36+16);function u(){const n=y(e),r=new Uint8Array(e.length),i=new Uint8Array(16),a=[n,r];let o=t;(0,s.isAligned32)(o)||a.push(o=(0,s.copyBytes)(o));const c=(0,s.u32)(o);let u=0,l=c[0],d=c[1],f=c[2],h=0;for(const e of[i,r].map(s.u32)){const t=(0,s.u32)(e);for(let e=0;e<t.length;e+=2){const{s0:r,s1:s}=T(n,u,l,d,f);t[e+0]=r,t[e+1]=s,u=++h}}const p={authKey:i,encKey:y(r)};return(0,s.clean)(...a),p}function l(e,i,a){const o=C(r.polyval,!0,i,a,n);for(let e=0;e<12;e++)o[e]^=t[e];o[15]&=127;const c=(0,s.u32)(o);let u=c[0],l=c[1],d=c[2],f=c[3];return({s0:u,s1:l,s2:d,s3:f}=T(e,u,l,d,f)),c[0]=u,c[1]=l,c[2]=d,c[3]=f,o}function d(e,t,n){let r=(0,s.copyBytes)(t);r[15]|=128;const i=P(e,!0,r,n);return(0,s.clean)(r),i}return(0,s.abytes)(e,16,24,32),o(t.length),n!==undefined&&i(n.length),{encrypt(e){a(e.length);const{encKey:t,authKey:n}=u(),r=l(t,n,e),i=[t,n,r];(0,s.isAligned32)(e)||i.push(e=(0,s.copyBytes)(e));const o=new Uint8Array(e.length+16);return o.set(r,e.length),o.set(d(t,r,e)),(0,s.clean)(...i),o},decrypt(e){c(e.length);const t=e.subarray(-16),{encKey:n,authKey:r}=u(),i=[n,r];(0,s.isAligned32)(e)||i.push(e=(0,s.copyBytes)(e));const a=d(n,t,e.subarray(0,-16)),o=l(n,r,a);if(i.push(o),!(0,s.equalBytes)(t,o))throw(0,s.clean)(...i),new Error("invalid polyval tag");return(0,s.clean)(...i),a}}}),n.siv=n.gcmsiv;const R={encrypt(e,t){if(t.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=y(e);if(16===t.length)F(n,t);else{const e=(0,s.u32)(t);let r=e[0],i=e[1];for(let t=0,s=1;t<6;t++)for(let t=2;t<e.length;t+=2,s++){const{s0:a,s1:o,s2:c,s3:u}=T(n,r,i,e[t],e[t+1]);r=a,i=o^h(s),e[t]=c,e[t+1]=u}e[0]=r,e[1]=i}n.fill(0)},decrypt(e,t){if(t.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=w(e),r=t.length/8-1;if(1===r)O(n,t);else{const e=(0,s.u32)(t);let i=e[0],a=e[1];for(let t=0,s=6*r;t<6;t++)for(let t=2*r;t>=1;t-=2,s--){a^=h(s);const{s0:r,s1:o,s2:c,s3:u}=x(n,i,a,e[t],e[t+1]);i=r,a=o,e[t]=c,e[t+1]=u}e[0]=i,e[1]=a}n.fill(0)}},L=new Uint8Array(8).fill(166);n.aeskw=(0,s.wrapCipher)({blockSize:8},e=>({encrypt(t){if(!t.length||t.length%8!=0)throw new Error("invalid plaintext length");if(8===t.length)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,s.concatBytes)(L,t);return R.encrypt(e,n),n},decrypt(t){if(t.length%8!=0||t.length<24)throw new Error("invalid ciphertext length");const n=(0,s.copyBytes)(t);if(R.decrypt(e,n),!(0,s.equalBytes)(n.subarray(0,8),L))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const M=2790873510;n.aeskwp=(0,s.wrapCipher)({blockSize:8},e=>({encrypt(t){if(!t.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(t.length/8),r=new Uint8Array(8+n);r.set(t,8);const i=(0,s.u32)(r);return i[0]=M,i[1]=h(t.length),R.encrypt(e,r),r},decrypt(t){if(t.length<16)throw new Error("invalid ciphertext length");const n=(0,s.copyBytes)(t),r=(0,s.u32)(n);R.decrypt(e,n);const i=h(r[1])>>>0,a=8*Math.ceil(i/8);if(r[0]!==M||n.length-8!==a)throw new Error("integrity check failed");for(let e=i;e<a;e++)if(0!==n[8+e])throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),n.unsafe={expandKeyLE:y,expandKeyDecLE:w,encrypt:T,decrypt:x,encryptBlock:F,decryptBlock:O,ctrCounter:S,ctr32:P}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/aes.js"}],[3145,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/crypto.js"}],[3146,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function a(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.wrapCipher=n.Hash=n.nextTick=n.isLE=void 0,n.isBytes=r,n.abool=s,n.anumber=i,n.abytes=a,n.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");i(e.outputLen),i(e.blockLen)},n.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},n.aoutput=function(e,t){a(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},n.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},n.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},n.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},n.createView=o,n.bytesToHex=l,n.hexToBytes=h,n.hexToNumber=p,n.bytesToNumberBE=function(e){return p(l(e))},n.numberToBytesBE=function(e,t){return h(e.toString(16).padStart(2*t,"0"))},n.utf8ToBytes=m,n.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},n.toBytes=function(e){if("string"==typeof e)e=m(e);else{if(!r(e))throw new Error("Uint8Array expected, got "+typeof e);e=w(e)}return e},n.overlapBytes=g,n.complexOverlapBytes=function(e,t){if(g(e,t)&&e.byteOffset<t.byteOffset)throw new Error("complex overlap of input and output is not supported")},n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];a(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.getOutput=function(e,t,n=!0){if(t===undefined)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!y(t))throw new Error("invalid output, must be aligned");return t},n.setBigUint64=b,n.u64Lengths=function(e,t,n){s(n);const r=new Uint8Array(16),i=o(r);return b(i,0,BigInt(t),n),b(i,8,BigInt(e),n),r},n.isAligned32=y,n.copyBytes=w,n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];const c=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){if(a(e),c)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=u[e[n]];return t}const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function h(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(c)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=f(e.charCodeAt(s)),i=f(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r}function p(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x"+e)}function m(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function g(e,t){return e.buffer===t.buffer&&e.byteOffset<t.byteOffset+t.byteLength&&t.byteOffset<e.byteOffset+e.byteLength}n.nextTick=async()=>{};n.Hash=class{};function b(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}function y(e){return e.byteOffset%4==0}function w(e){return Uint8Array.from(e)}n.wrapCipher=(e,t)=>{function r(r,...s){if(a(r),!n.isLE)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==undefined){const t=s[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?a(t):a(t,e.nonceLength)}const i=e.tagLength;i&&s[1]!==undefined&&a(s[1]);const o=t(r,...s),c=(e,t)=>{if(t!==undefined){if(2!==e)throw new Error("cipher output not supported");a(t)}};let u=!1;return{encrypt(e,t){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,a(e),c(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(a(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return c(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r}}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/utils.js"}],[3147,{"./utils.js":3146,"@noble/ciphers/crypto":3145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gcm=n.ctr=n.cbc=n.utils=void 0,n.randomBytes=i,n.getWebcryptoSubtle=a,n.managedNonce=function(e){const{nonceLength:t}=e;return(0,s.anumber)(t),(n,...r)=>({encrypt(a,...o){const c=i(t),u=e(n,c,...r).encrypt(a,...o),l=(0,s.concatBytes)(c,u);return u.fill(0),l},decrypt(s,...i){const a=s.subarray(0,t),o=s.subarray(t);return e(n,a,...r).decrypt(o,...i)}})};const r=e("@noble/ciphers/crypto"),s=e("./utils.js");function i(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function a(){if(r.crypto&&"object"==typeof r.crypto.subtle&&null!=r.crypto.subtle)return r.crypto.subtle;throw new Error("crypto.subtle must be defined")}n.utils={async encrypt(e,t,n,r){const s=a(),i=await s.importKey("raw",e,t,!0,["encrypt"]),o=await s.encrypt(n,i,r);return new Uint8Array(o)},async decrypt(e,t,n,r){const s=a(),i=await s.importKey("raw",e,t,!0,["decrypt"]),o=await s.decrypt(n,i,r);return new Uint8Array(o)}};const o="AES-CBC",c="AES-CTR",u="AES-GCM";function l(e){return(t,r,i)=>{(0,s.abytes)(t),(0,s.abytes)(r);const a={name:e,length:8*t.length},l=function(e,t,n){if(e===o)return{name:o,iv:t};if(e===c)return{name:c,counter:t,length:64};if(e===u)return n?{name:u,iv:t,additionalData:n}:{name:u,iv:t};throw new Error("unknown aes block mode")}(e,r,i);let d=!1;return{encrypt(e){if((0,s.abytes)(e),d)throw new Error("Cannot encrypt() twice with same key / nonce");return d=!0,n.utils.encrypt(t,a,l,e)},decrypt:e=>((0,s.abytes)(e),n.utils.decrypt(t,a,l,e))}}}n.cbc=l(o),n.ctr=l(c),n.gcm=(()=>l(u))()}}},{package:"@noble/ciphers",file:"node_modules/@noble/ciphers/webcrypto.js"}],[3148,{"./abstract/weierstrass.js":3155},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getHash=function(e){return{hash:e}},n.createCurve=function(e,t){const n=t=>(0,r.weierstrass)({...e,hash:t});return{...n(t),create:n}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./abstract/weierstrass.js")}}},{package:"@noble/curves",file:"node_modules/@noble/curves/_shortw_utils.js"}],[3149,{"../utils.js":3158,"./modular.js":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wNAF=void 0,n.negateCt=o,n.normalizeZ=function(e,t){const n=(0,s.FpInvertBatch)(e.Fp,t.map(e=>e.Z));return t.map((t,r)=>e.fromAffine(t.toAffine(n[r])))},n.mulEndoUnsafe=function(e,t,n,r){let s=t,o=e.ZERO,c=e.ZERO;for(;n>i||r>i;)n&a&&(o=o.add(s)),r&a&&(c=c.add(s)),s=s.double(),n>>=a,r>>=a;return{p1:o,p2:c}},n.pippenger=function(e,t,n,s){d(n,e),f(s,t);const i=n.length,a=s.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,c=(0,r.bitLen)(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const l=(0,r.bitMask)(u),h=new Array(Number(l)+1).fill(o),p=Math.floor((t.BITS-1)/u)*u;let m=o;for(let e=p;e>=0;e-=u){h.fill(o);for(let t=0;t<a;t++){const r=s[t],i=Number(r>>BigInt(e)&l);h[i]=h[i].add(n[t])}let t=o;for(let e=h.length-1,n=o;e>0;e--)n=n.add(h[e]),t=t.add(n);if(m=m.add(t),0!==e)for(let e=0;e<u;e++)m=m.double()}return m},n.precomputeMSMUnsafe=function(e,t,n,s){c(s,t.BITS),d(n,e);const i=e.ZERO,a=2**s-1,o=Math.ceil(t.BITS/s),u=(0,r.bitMask)(s),l=n.map(e=>{const t=[];for(let n=0,r=e;n<a;n++)t.push(r),r=r.add(e);return t});return e=>{if(f(e,t),e.length>n.length)throw new Error("array of scalars must be smaller than array of points");let r=i;for(let t=0;t<o;t++){if(r!==i)for(let e=0;e<s;e++)r=r.double();const n=BigInt(o*s-(t+1)*s);for(let t=0;t<e.length;t++){const s=e[t],i=Number(s>>n&u);i&&(r=r.add(l[t][i-1]))}}return r}},n.validateBasic=function(e){return(0,s.validateField)(e.Fp),(0,r.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,s.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})},n._createCurveFields=function(e,t,n={},r){r===undefined&&(r="edwards"===e);if(!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const e of["p","n","h"]){const n=t[e];if(!("bigint"==typeof n&&n>i))throw new Error(`CURVE.${e} must be positive bigint`)}const s=b(t.p,n.Fp,r),a=b(t.n,n.Fn,r),o=["Gx","Gy","a","weierstrass"===e?"b":"d"];for(const e of o)if(!s.isValid(t[e]))throw new Error(`CURVE.${e} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:s,Fn:a}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./modular.js"),i=BigInt(0),a=BigInt(1);function o(e,t){const n=t.negate();return e?n:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){c(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:(0,r.bitMask)(e),maxNumber:n,shiftBy:BigInt(e)}}function l(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let c=Number(e&s),u=e>>o;c>r&&(c-=i,u+=a);const l=t*r;return{nextN:u,offset:l+Math.abs(c)-1,isZero:0===c,isNeg:c<0,isNegF:t%2!=0,offsetF:l}}function d(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function f(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const h=new WeakMap,p=new WeakMap;function m(e){return p.get(e)||1}function g(e){if(e!==i)throw new Error("invalid wNAF")}function b(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,s.validateField)(t),t}return(0,s.Field)(e,{isLE:n})}n.wNAF=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let r=e;for(;t>i;)t&a&&(n=n.add(r)),r=r.double(),t>>=a;return n}precomputeWindow(e,t){const{windows:n,windowSize:r}=u(t,this.bits),s=[];let i=e,a=i;for(let e=0;e<n;e++){a=i,s.push(a);for(let e=1;e<r;e++)a=a.add(i),s.push(a);i=a.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const i=u(e,this.bits);for(let e=0;e<i.windows;e++){const{nextN:a,offset:c,isZero:u,isNeg:d,isNegF:f,offsetF:h}=l(n,e,i);n=a,u?s=s.add(o(f,t[h])):r=r.add(o(d,t[c]))}return g(n),{p:r,f:s}}wNAFUnsafe(e,t,n,r=this.ZERO){const s=u(e,this.bits);for(let e=0;e<s.windows&&n!==i;e++){const{nextN:i,offset:a,isZero:o,isNeg:c}=l(n,e,s);if(n=i,!o){const e=t[a];r=r.add(c?e.negate():e)}}return g(n),r}getPrecomputes(e,t,n){let r=h.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),h.set(t,r))),r}cached(e,t,n){const r=m(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}unsafe(e,t,n,r){const s=m(e);return 1===s?this._unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)}createCache(e,t){c(t,this.bits),p.set(e,t),h.delete(e)}hasCache(e){return 1!==m(e)}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/curve.js"}],[3150,{"../utils.js":3158,"./curve.js":3149,"./modular.js":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrimeEdwardsPoint=void 0,n.edwards=l,n.eddsa=d,n.twistedEdwards=function(e){const{CURVE:t,curveOpts:n,hash:r,eddsaOpts:s}=function(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=(0,i.Field)(t.n,e.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:e.uvRatio},a={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:s,hash:e.hash,eddsaOpts:a}}(e),a=d(l(t,n),r,s);return function(e,t){const n=t.Point,r=Object.assign({},t,{ExtendedPoint:n,CURVE:e,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES});return r}(e,a)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./curve.js"),i=e("./modular.js"),a=BigInt(0),o=BigInt(1),c=BigInt(2),u=BigInt(8);function l(e,t={}){const n=(0,s._createCurveFields)("edwards",e,t,t.FpFnLE),{Fp:i,Fn:l}=n;let d=n.CURVE;const{h:f}=d;(0,r._validateObject)(t,{},{uvRatio:"function"});const h=c<<BigInt(8*l.BYTES)-o,p=e=>i.create(e),m=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(i.div(e,t))}}catch(e){return{isValid:!1,value:a}}});if(!function(e,t,n,r){const s=e.sqr(n),i=e.sqr(r),a=e.add(e.mul(t.a,s),i),o=e.add(e.ONE,e.mul(t.d,e.mul(s,i)));return e.eql(a,o)}(i,d,d.Gx,d.Gy))throw new Error("bad curve params: generator point");function g(e,t,n=!1){const s=n?o:a;return(0,r.aInRange)("coordinate "+e,t,s,h),t}function b(e){if(!(e instanceof E))throw new Error("ExtendedPoint expected")}const y=(0,r.memoized)((e,t)=>{const{X:n,Y:r,Z:s}=e,c=e.is0();null==t&&(t=c?u:i.inv(s));const l=p(n*t),d=p(r*t),f=i.mul(s,t);if(c)return{x:a,y:o};if(f!==o)throw new Error("invZ was invalid");return{x:l,y:d}}),w=(0,r.memoized)(e=>{const{a:t,d:n}=d;if(e.is0())throw new Error("bad point: ZERO");const{X:r,Y:s,Z:i,T:a}=e,o=p(r*r),c=p(s*s),u=p(i*i),l=p(u*u),f=p(o*t);if(p(u*p(f+c))!==p(l+p(n*p(o*c))))throw new Error("bad point: equation left != right (1)");if(p(r*s)!==p(i*a))throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(e,t,n,r){this.X=g("x",e),this.Y=g("y",t),this.Z=g("z",n,!0),this.T=g("t",r),Object.freeze(this)}static CURVE(){return d}static fromAffine(e){if(e instanceof E)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return g("x",t),g("y",n),new E(t,n,o,p(t*n))}static fromBytes(e,t=!1){const n=i.BYTES,{a:s,d:c}=d;e=(0,r.copyBytes)((0,r._abytes2)(e,n,"point")),(0,r._abool2)(t,"zip215");const u=(0,r.copyBytes)(e),l=e[n-1];u[n-1]=-129&l;const f=(0,r.bytesToNumberLE)(u),g=t?h:i.ORDER;(0,r.aInRange)("point.y",f,a,g);const b=p(f*f),y=p(b-o),w=p(c*b-s);let{isValid:v,value:T}=m(y,w);if(!v)throw new Error("bad point: invalid y coordinate");const x=(T&o)===o,S=!!(128&l);if(!t&&T===a&&S)throw new Error("bad point: x=0 and x_0=1");return S!==x&&(T=p(-T)),E.fromAffine({x:T,y:f})}static fromHex(e,t=!1){return E.fromBytes((0,r.ensureBytes)("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return v.createCache(this,e),t||this.multiply(c),this}assertValidity(){w(this)}equals(e){b(e);const{X:t,Y:n,Z:r}=this,{X:s,Y:i,Z:a}=e,o=p(t*a),c=p(s*r),u=p(n*a),l=p(i*r);return o===c&&u===l}is0(){return this.equals(E.ZERO)}negate(){return new E(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:e}=d,{X:t,Y:n,Z:r}=this,s=p(t*t),i=p(n*n),a=p(c*p(r*r)),o=p(e*s),u=t+n,l=p(p(u*u)-s-i),f=o+i,h=f-a,m=o-i,g=p(l*h),b=p(f*m),y=p(l*m),w=p(h*f);return new E(g,b,w,y)}add(e){b(e);const{a:t,d:n}=d,{X:r,Y:s,Z:i,T:a}=this,{X:o,Y:c,Z:u,T:l}=e,f=p(r*o),h=p(s*c),m=p(a*n*l),g=p(i*u),y=p((r+s)*(o+c)-f-h),w=g-m,v=g+m,T=p(h-t*f),x=p(y*w),S=p(v*T),P=p(y*T),k=p(w*v);return new E(x,S,k,P)}subtract(e){return this.add(e.negate())}multiply(e){if(!l.isValidNot0(e))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:t,f:n}=v.cached(this,e,e=>(0,s.normalizeZ)(E,e));return(0,s.normalizeZ)(E,[t,n])[0]}multiplyUnsafe(e,t=E.ZERO){if(!l.isValid(e))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return e===a?E.ZERO:this.is0()||e===o?this:v.unsafe(this,e,e=>(0,s.normalizeZ)(E,e),t)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return v.unsafe(this,d.n).is0()}toAffine(e){return y(this,e)}clearCofactor(){return f===o?this:this.multiplyUnsafe(f)}toBytes(){const{x:e,y:t}=this.toAffine(),n=i.toBytes(t);return n[n.length-1]|=e&o?128:0,n}toHex(){return(0,r.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return(0,s.normalizeZ)(E,e)}static msm(e,t){return(0,s.pippenger)(E,l,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}E.BASE=new E(d.Gx,d.Gy,o,p(d.Gx*d.Gy)),E.ZERO=new E(a,o,o,a),E.Fp=i,E.Fn=l;const v=new s.wNAF(E,l.BITS);return E.BASE.precompute(8),E}function d(e,t,n={}){if("function"!=typeof t)throw new Error('"hash" function param is required');(0,r._validateObject)(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:s}=n,{BASE:i,Fp:a,Fn:c}=e,u=n.randomBytes||r.randomBytes,l=n.adjustScalarBytes||(e=>e),d=n.domain||((e,t,n)=>{if((0,r._abool2)(n,"phflag"),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function f(e){return c.create((0,r.bytesToNumberLE)(e))}function h(e){const{head:n,prefix:s,scalar:a}=function(e){const n=y.secretKey;e=(0,r.ensureBytes)("private key",e,n);const s=(0,r.ensureBytes)("hashed private key",t(e),2*n),i=l(s.slice(0,n));return{head:i,prefix:s.slice(n,2*n),scalar:f(i)}}(e),o=i.multiply(a),c=o.toBytes();return{head:n,prefix:s,scalar:a,point:o,pointBytes:c}}function p(e){return h(e).pointBytes}function m(e=Uint8Array.of(),...n){const i=(0,r.concatBytes)(...n);return f(t(d(i,(0,r.ensureBytes)("context",e),!!s)))}const g={zip215:!0};const b=a.BYTES,y={secretKey:b,publicKey:b,signature:2*b,seed:b};function w(e=u(y.seed)){return(0,r._abytes2)(e,y.seed,"seed")}const E={getExtendedPublicKey:h,randomSecretKey:w,isValidSecretKey:function(e){return(0,r.isBytes)(e)&&e.length===c.BYTES},isValidPublicKey:function(t,n){try{return!!e.fromBytes(t,n)}catch(e){return!1}},toMontgomery(t){const{y:n}=e.fromBytes(t),r=y.publicKey,s=32===r;if(!s&&57!==r)throw new Error("only defined for 25519 and 448");const i=s?a.div(o+n,o-n):a.div(n-o,n+o);return a.toBytes(i)},toMontgomerySecret(e){const n=y.secretKey;(0,r._abytes2)(e,n);const s=t(e.subarray(0,n));return l(s).subarray(0,n)},randomPrivateKey:w,precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};return Object.freeze({keygen:function(e){const t=E.randomSecretKey(e);return{secretKey:t,publicKey:p(t)}},getPublicKey:p,sign:function(e,t,n={}){e=(0,r.ensureBytes)("message",e),s&&(e=s(e));const{prefix:a,scalar:o,pointBytes:u}=h(t),l=m(n.context,a,e),d=i.multiply(l).toBytes(),f=m(n.context,d,u,e),p=c.create(l+f*o);if(!c.isValid(p))throw new Error("sign failed: invalid s");const g=(0,r.concatBytes)(d,c.toBytes(p));return(0,r._abytes2)(g,y.signature,"result")},verify:function(t,n,a,o=g){const{context:c,zip215:u}=o,l=y.signature;t=(0,r.ensureBytes)("signature",t,l),n=(0,r.ensureBytes)("message",n),a=(0,r.ensureBytes)("publicKey",a,y.publicKey),u!==undefined&&(0,r._abool2)(u,"zip215"),s&&(n=s(n));const d=l/2,f=t.subarray(0,d),h=(0,r.bytesToNumberLE)(t.subarray(d,l));let p,b,w;try{p=e.fromBytes(a,u),b=e.fromBytes(f,u),w=i.multiplyUnsafe(h)}catch(e){return!1}if(!u&&p.isSmallOrder())return!1;const E=m(c,b.toBytes(),p.toBytes(),n);return b.add(p.multiplyUnsafe(E)).subtract(w).clearCofactor().is0()},utils:E,Point:e,lengths:y})}n.PrimeEdwardsPoint=class{constructor(e){this.ep=e}static fromBytes(e){(0,r.notImplemented)()}static fromHex(e){(0,r.notImplemented)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return(0,r.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/edwards.js"}],[3151,{"../utils.js":3158,"./modular.js":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n._DST_scalar=void 0,n.expand_message_xmd=l,n.expand_message_xof=d,n.hash_to_field=f,n.isogenyMap=function(e,t){const n=t.map(e=>Array.from(e).reverse());return(t,r)=>{const[i,a,o,c]=n.map(n=>n.reduce((n,r)=>e.add(e.mul(n,t),r))),[u,l]=(0,s.FpInvertBatch)(e,[a,c],!0);return t=e.mul(i,u),r=e.mul(r,e.mul(o,l)),{x:t,y:r}}},n.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");function s(n){return e.fromAffine(t(n))}function i(t){const n=t.clearCofactor();return n.equals(e.ZERO)?e.ZERO:(n.assertValidity(),n)}return{defaults:r,hashToCurve(e,t){const n=f(e,2,Object.assign({},r,t)),a=s(n[0]),o=s(n[1]);return i(a.add(o))},encodeToCurve(e,t){const n=r.encodeDST?{DST:r.encodeDST}:{};return i(s(f(e,1,Object.assign({},r,n,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw new Error("expected array of bigints");for(const t of e)if("bigint"!=typeof t)throw new Error("expected array of bigints");return i(s(e))},hashToScalar(t,s){const i=e.Fn.ORDER;return f(t,1,Object.assign({},r,{p:i,m:1,DST:n._DST_scalar},s))[0][0]}}};const r=e("../utils.js"),s=e("./modular.js"),i=r.bytesToNumberBE;function a(e,t){if(c(e),c(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e){if(!(0,r.isBytes)(e)&&"string"!=typeof e)throw new Error("DST must be Uint8Array or string");return"string"==typeof e?(0,r.utf8ToBytes)(e):e}function l(e,t,n,s){(0,r.abytes)(e),c(n),(t=u(t)).length>255&&(t=s((0,r.concatBytes)((0,r.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:l}=s,d=Math.ceil(n/i);if(n>65535||d>255)throw new Error("expand_message_xmd: invalid lenInBytes");const f=(0,r.concatBytes)(t,a(t.length,1)),h=a(0,l),p=a(n,2),m=new Array(d),g=s((0,r.concatBytes)(h,e,p,a(0,1),f));m[0]=s((0,r.concatBytes)(g,a(1,1),f));for(let e=1;e<=d;e++){const t=[o(g,m[e-1]),a(e+1,1),f];m[e]=s((0,r.concatBytes)(...t))}return(0,r.concatBytes)(...m).slice(0,n)}function d(e,t,n,s,i){if((0,r.abytes)(e),c(n),(t=u(t)).length>255){const e=Math.ceil(2*s/8);t=i.create({dkLen:e}).update((0,r.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(a(n,2)).update(t).update(a(t.length,1)).digest()}function f(e,t,n){(0,r._validateObject)(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:a,k:o,m:u,hash:f,expand:h,DST:p}=n;if(!(0,r.isHash)(n.hash))throw new Error("expected valid hash");(0,r.abytes)(e),c(t);const m=a.toString(2).length,g=Math.ceil((m+o)/8),b=t*u*g;let y;if("xmd"===h)y=l(e,p,b,f);else if("xof"===h)y=d(e,p,b,o,f);else{if("_internal_pass"!==h)throw new Error('expand must be "xmd" or "xof"');y=e}const w=new Array(t);for(let e=0;e<t;e++){const t=new Array(u);for(let n=0;n<u;n++){const r=g*(n+e*u),o=y.subarray(r,r+g);t[n]=(0,s.mod)(i(o),a)}w[e]=t}return w}n._DST_scalar=(0,r.utf8ToBytes)("HashToScalar-")}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/hash-to-curve.js"}],[3152,{"../utils.js":3158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNegativeLE=void 0,n.mod=p,n.pow=function(e,t,n){return T(k(n),e,t)},n.pow2=function(e,t,n){let r=e;for(;t-- >s;)r*=r,r%=n;return r},n.invert=m,n.tonelliShanks=w,n.FpSqrt=E,n.validateField=function(e){const t=v.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,r._validateObject)(e,t),e},n.FpPow=T,n.FpInvertBatch=x,n.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?m(n,e.ORDER):e.inv(n))},n.FpLegendre=S,n.FpIsSquare=function(e,t){return 1===S(e,t)},n.nLength=P,n.Field=k,n.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},n.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},n.hashToPrivateScalar=function(e,t,n=!1){const s=(e=(0,r.ensureBytes)("privateHash",e)).length,a=P(t).nByteLength+8;if(a<24||s<a||s>1024)throw new Error("hashToPrivateScalar: expected "+a+"-1024 bytes of input, got "+s);return p(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i},n.getFieldBytesLength=I,n.getMinHashLength=A,n.mapHashToField=function(e,t,n=!1){const s=e.length,a=I(t),o=A(t);if(s<16||s<o||s>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+s);const c=p(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i;return n?(0,r.numberToBytesLE)(c,a):(0,r.numberToBytesBE)(c,a)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=BigInt(0),i=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(7),d=BigInt(8),f=BigInt(9),h=BigInt(16);function p(e,t){const n=e%t;return n>=s?n:t+n}function m(e,t){if(e===s)throw new Error("invert: expected non-zero number");if(t<=s)throw new Error("invert: expected positive modulus, got "+t);let n=p(e,t),r=t,a=s,o=i,c=i,u=s;for(;n!==s;){const e=r/n,t=r%n,s=a-c*e,i=o-u*e;r=n,n=t,a=c,o=u,c=s,u=i}if(r!==i)throw new Error("invert: does not exist");return p(a,t)}function g(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function b(e,t){const n=(e.ORDER+i)/c,r=e.pow(t,n);return g(e,r,t),r}function y(e,t){const n=(e.ORDER-u)/d,r=e.mul(t,a),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,a),s),c=e.mul(i,e.sub(o,e.ONE));return g(e,c,t),c}function w(e){if(e<o)throw new Error("sqrt is not defined for small field");let t=e-i,n=0;for(;t%a===s;)t/=a,n++;let r=a;const c=k(e);for(;1===S(c,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return b;let u=c.pow(r,t);const l=(t+i)/a;return function(e,r){if(e.is0(r))return r;if(1!==S(e,r))throw new Error("Cannot find square root");let s=n,a=e.mul(e.ONE,u),o=e.pow(r,t),c=e.pow(r,l);for(;!e.eql(o,e.ONE);){if(e.is0(o))return e.ZERO;let t=1,n=e.sqr(o);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===s)throw new Error("Cannot find square root");const r=i<<BigInt(s-t-1),u=e.pow(a,r);s=t,a=e.sqr(u),o=e.mul(o,a),c=e.mul(c,u)}return c}}function E(e){return e%c===o?b:e%d===u?y:e%h===f?function(e){const t=k(e),n=w(e),r=n(t,t.neg(t.ONE)),s=n(t,r),i=n(t,t.neg(r)),a=(e+l)/h;return(e,t)=>{let n=e.pow(t,a),o=e.mul(n,r);const c=e.mul(n,s),u=e.mul(n,i),l=e.eql(e.sqr(o),t),d=e.eql(e.sqr(c),t);n=e.cmov(n,o,l),o=e.cmov(u,c,d);const f=e.eql(e.sqr(o),t),h=e.cmov(n,o,f);return g(e,h,t),h}}(e):w(e)}n.isNegativeLE=(e,t)=>(p(e,t)&i)===i;const v=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function T(e,t,n){if(n<s)throw new Error("invalid exponent, negatives unsupported");if(n===s)return e.ONE;if(n===i)return t;let r=e.ONE,a=t;for(;n>s;)n&i&&(r=e.mul(r,a)),a=e.sqr(a),n>>=i;return r}function x(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:undefined),s=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),i=e.inv(s);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),i),r}function S(e,t){const n=(e.ORDER-i)/a,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),c=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!c)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function P(e,t){t!==undefined&&(0,r.anumber)(t);const n=t!==undefined?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function k(e,t,n=!1,a={}){if(e<=s)throw new Error("invalid field: expected ORDER > 0, got "+e);let o=undefined,c=undefined,u=!1,l=undefined;if("object"==typeof t&&null!=t){if(a.sqrt||n)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(o=e.BITS),e.sqrt&&(c=e.sqrt),"boolean"==typeof e.isLE&&(n=e.isLE),"boolean"==typeof e.modFromBytes&&(u=e.modFromBytes),l=e.allowedLengths}else"number"==typeof t&&(o=t),a.sqrt&&(c=a.sqrt);const{nBitLength:d,nByteLength:f}=P(e,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const g=Object.freeze({ORDER:e,isLE:n,BITS:d,BYTES:f,MASK:(0,r.bitMask)(d),ZERO:s,ONE:i,allowedLengths:l,create:t=>p(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isValidNot0:e=>!g.is0(e)&&g.isValid(e),isOdd:e=>(e&i)===i,neg:t=>p(-t,e),eql:(e,t)=>e===t,sqr:t=>p(t*t,e),add:(t,n)=>p(t+n,e),sub:(t,n)=>p(t-n,e),mul:(t,n)=>p(t*n,e),pow:(e,t)=>T(g,e,t),div:(t,n)=>p(t*m(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>m(t,e),sqrt:c||(t=>(h||(h=E(e)),h(g,t))),toBytes:e=>n?(0,r.numberToBytesLE)(e,f):(0,r.numberToBytesBE)(e,f),fromBytes:(t,s=!0)=>{if(l){if(!l.includes(t.length)||t.length>f)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);const e=new Uint8Array(f);e.set(t,n?0:e.length-t.length),t=e}if(t.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+t.length);let i=n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t);if(u&&(i=p(i,e)),!s&&!g.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:e=>x(g,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(g)}function I(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function A(e){const t=I(e);return t+Math.ceil(t/2)}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/modular.js"}],[3153,{"../utils.js":3158,"./modular.js":3152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.montgomery=function(e){const t=(h=e,(0,r._validateObject)(h,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...h})),{P:n,type:c,adjustScalarBytes:u,powPminus2:l,randomBytes:d}=t,f="x25519"===c;var h;if(!f&&"x448"!==c)throw new Error("invalid type");const p=d||r.randomBytes,m=f?255:448,g=f?32:56,b=f?BigInt(9):BigInt(5),y=f?BigInt(121665):BigInt(39081),w=f?o**BigInt(254):o**BigInt(447),E=f?BigInt(8)*o**BigInt(251)-a:BigInt(4)*o**BigInt(445)-a,v=w+E+a,T=e=>(0,s.mod)(e,n),x=S(b);function S(e){return(0,r.numberToBytesLE)(T(e),g)}function P(e,t){const s=function(e,t){(0,r.aInRange)("u",e,i,n),(0,r.aInRange)("scalar",t,w,v);const s=t,o=e;let c=a,u=i,d=e,f=a,h=i;for(let e=BigInt(m-1);e>=i;e--){const t=s>>e&a;h^=t,({x_2:c,x_3:d}=I(h,c,d)),({x_2:u,x_3:f}=I(h,u,f)),h=t;const n=c+u,r=T(n*n),i=c-u,l=T(i*i),p=r-l,m=d+f,g=T((d-f)*n),b=T(m*i),w=g+b,E=g-b;d=T(w*w),f=T(o*T(E*E)),c=T(r*l),u=T(p*(r+T(y*p)))}({x_2:c,x_3:d}=I(h,c,d)),({x_2:u,x_3:f}=I(h,u,f));const p=l(u);return T(c*p)}(function(e){const t=(0,r.ensureBytes)("u coordinate",e,g);return f&&(t[31]&=127),T((0,r.bytesToNumberLE)(t))}(t),function(e){return(0,r.bytesToNumberLE)(u((0,r.ensureBytes)("scalar",e,g)))}(e));if(s===i)throw new Error("invalid private or public key received");return S(s)}function k(e){return P(e,x)}function I(e,t,n){const r=T(e*(t-n));return{x_2:t=T(t-r),x_3:n=T(n+r)}}const A={secretKey:g,publicKey:g,seed:g},_=(e=p(g))=>((0,r.abytes)(e,A.seed),e);return{keygen:function(e){const t=_(e);return{secretKey:t,publicKey:k(t)}},getSharedSecret:(e,t)=>P(e,t),getPublicKey:e=>k(e),scalarMult:P,scalarMultBase:k,utils:{randomSecretKey:_,randomPrivateKey:_},GuBytes:x.slice(),lengths:A}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("../utils.js"),s=e("./modular.js"),i=BigInt(0),a=BigInt(1),o=BigInt(2)}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/montgomery.js"}],[3154,{"../utils.js":3158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHash=n.validateObject=n.memoized=n.notImplemented=n.createHmacDrbg=n.bitMask=n.bitSet=n.bitGet=n.bitLen=n.aInRange=n.inRange=n.asciiToBytes=n.copyBytes=n.equalBytes=n.ensureBytes=n.numberToVarBytesBE=n.numberToBytesLE=n.numberToBytesBE=n.bytesToNumberLE=n.bytesToNumberBE=n.hexToNumber=n.numberToHexUnpadded=n.abool=n.utf8ToBytes=n.randomBytes=n.isBytes=n.hexToBytes=n.concatBytes=n.bytesToUtf8=n.bytesToHex=n.anumber=n.abytes=void 0;const r=e("../utils.js");n.abytes=r.abytes,n.anumber=r.anumber,n.bytesToHex=r.bytesToHex,n.bytesToUtf8=r.bytesToUtf8,n.concatBytes=r.concatBytes,n.hexToBytes=r.hexToBytes,n.isBytes=r.isBytes,n.randomBytes=r.randomBytes,n.utf8ToBytes=r.utf8ToBytes,n.abool=r.abool,n.numberToHexUnpadded=r.numberToHexUnpadded,n.hexToNumber=r.hexToNumber,n.bytesToNumberBE=r.bytesToNumberBE,n.bytesToNumberLE=r.bytesToNumberLE,n.numberToBytesBE=r.numberToBytesBE,n.numberToBytesLE=r.numberToBytesLE,n.numberToVarBytesBE=r.numberToVarBytesBE,n.ensureBytes=r.ensureBytes,n.equalBytes=r.equalBytes,n.copyBytes=r.copyBytes,n.asciiToBytes=r.asciiToBytes,n.inRange=r.inRange,n.aInRange=r.aInRange,n.bitLen=r.bitLen,n.bitGet=r.bitGet,n.bitSet=r.bitSet,n.bitMask=r.bitMask,n.createHmacDrbg=r.createHmacDrbg,n.notImplemented=r.notImplemented,n.memoized=r.memoized,n.validateObject=r.validateObject,n.isHash=r.isHash}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/utils.js"}],[3155,{"../utils.js":3158,"./curve.js":3149,"./modular.js":3152,"@noble/hashes/hmac.js":3163,"@noble/hashes/utils":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DER=n.DERErr=void 0,n._splitEndoScalar=u,n._normFnElement=y,n.weierstrassN=w,n.SWUFpSqrtRatio=v,n.mapToCurveSimpleSWU=function(e,t){(0,o.validateField)(e);const{A:n,B:r,Z:s}=t;if(!e.isValid(n)||!e.isValid(r)||!e.isValid(s))throw new Error("mapToCurveSimpleSWU: invalid opts");const i=v(e,s);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return t=>{let a,c,u,l,d,f,h,p;a=e.sqr(t),a=e.mul(a,s),c=e.sqr(a),c=e.add(c,a),u=e.add(c,e.ONE),u=e.mul(u,r),l=e.cmov(s,e.neg(c),!e.eql(c,e.ZERO)),l=e.mul(l,n),c=e.sqr(u),f=e.sqr(l),d=e.mul(f,n),c=e.add(c,d),c=e.mul(c,u),f=e.mul(f,l),d=e.mul(f,r),c=e.add(c,d),h=e.mul(a,u);const{isValid:m,value:g}=i(c,f);p=e.mul(a,t),p=e.mul(p,g),h=e.cmov(h,u,m),p=e.cmov(p,g,m);const b=e.isOdd(t)===e.isOdd(p);p=e.cmov(e.neg(p),p,b);const y=(0,o.FpInvertBatch)(e,[l],!0)[0];return h=e.mul(h,y),{x:h,y:p}}},n.ecdh=x,n.ecdsa=S,n.weierstrassPoints=function(e){const{CURVE:t,curveOpts:n}=P(e),r=w(t,n);return function(e,t){const{Fp:n,Fn:r}=t;function s(e){return(0,i.inRange)(e,p,r.ORDER)}const a=k(n,e.a,e.b);return Object.assign({},{CURVE:e,Point:t,ProjectivePoint:t,normPrivateKeyToScalar:e=>y(r,e),weierstrassEquation:a,isWithinCurveOrder:s})}(e,r)},n._legacyHelperEquat=k,n.weierstrass=function(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:s}=function(e){const{CURVE:t,curveOpts:n}=P(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}(e),i=S(w(t,n),r,s);return function(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,(0,o.nLength)(n.Fn.ORDER,n.Fn.BITS))})}(e,i)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/hmac.js"),s=e("@noble/hashes/utils"),i=e("../utils.js"),a=e("./curve.js"),o=e("./modular.js"),c=(e,t)=>(e+(e>=0?t:-t)/m)/t;function u(e,t,n){const[[r,s],[a,o]]=t,u=c(o*e,n),l=c(-s*e,n);let d=e-u*r-l*a,f=-u*s-l*o;const m=d<h,g=f<h;m&&(d=-d),g&&(f=-f);const b=(0,i.bitMask)(Math.ceil((0,i.bitLen)(n)/2))+p;if(d<h||d>=b||f<h||f>=b)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:m,k1:d,k2neg:g,k2:f}}function l(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function d(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===undefined?t[r]:e[r];return(0,i._abool2)(n.lowS,"lowS"),(0,i._abool2)(n.prehash,"prehash"),n.format!==undefined&&l(n.format),n}class f extends Error{constructor(e=""){super(e)}}n.DERErr=f,n.DER={Err:f,_tlv:{encode:(e,t)=>{const{Err:r}=n.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const s=t.length/2,a=(0,i.numberToHexUnpadded)(s);if(a.length/2&128)throw new r("tlv.encode: long form length too big");const o=s>127?(0,i.numberToHexUnpadded)(a.length/2|128):"";return(0,i.numberToHexUnpadded)(e)+o+a+t},decode(e,t){const{Err:r}=n.DER;let s=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[s++];let a=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const n=t.subarray(s,s+e);if(n.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===n[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of n)a=a<<8|e;if(s+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;const o=t.subarray(s,s+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(s+a)}}},_int:{encode(e){const{Err:t}=n.DER;if(e<h)throw new t("integer: negative integers are not allowed");let r=(0,i.numberToHexUnpadded)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=n.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,i.bytesToNumberBE)(e)}},toSig(e){const{Err:t,_int:r,_tlv:s}=n.DER,a=(0,i.ensureBytes)("signature",e),{v:o,l:c}=s.decode(48,a);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:l}=s.decode(2,o),{v:d,l:f}=s.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(d)}},hexFromSig(e){const{_tlv:t,_int:r}=n.DER,s=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,s)}};const h=BigInt(0),p=BigInt(1),m=BigInt(2),g=BigInt(3),b=BigInt(4);function y(e,t){const{BYTES:n}=e;let r;if("bigint"==typeof t)r=t;else{let s=(0,i.ensureBytes)("private key",t);try{r=e.fromBytes(s)}catch(e){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function w(e,t={}){const n=(0,a._createCurveFields)("weierstrass",e,t),{Fp:r,Fn:s}=n;let o=n.CURVE;const{h:c,n:l}=o;(0,i._validateObject)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=t;if(d&&(!r.is0(o.a)||"bigint"!=typeof d.beta||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=T(r,s);function m(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const w=t.toBytes||function(e,t,n){const{x:s,y:a}=t.toAffine(),o=r.toBytes(s);if((0,i._abool2)(n,"isCompressed"),n){m();const e=!r.isOdd(a);return(0,i.concatBytes)(E(e),o)}return(0,i.concatBytes)(Uint8Array.of(4),o,r.toBytes(a))},v=t.fromBytes||function(e){(0,i._abytes2)(e,undefined,"Point");const{publicKey:t,publicKeyUncompressed:n}=f,s=e.length,a=e[0],o=e.subarray(1);if(s!==t||2!==a&&3!==a){if(s===n&&4===a){const e=r.BYTES,t=r.fromBytes(o.subarray(0,e)),n=r.fromBytes(o.subarray(e,2*e));if(!S(t,n))throw new Error("bad point: is not on curve");return{x:t,y:n}}throw new Error(`bad point: got length ${s}, expected compressed=${t} or uncompressed=${n}`)}{const e=r.fromBytes(o);if(!r.isValid(e))throw new Error("bad point: is not on curve, wrong x");const t=x(e);let n;try{n=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("bad point: is not on curve, sqrt error"+t)}m();return!(1&~a)!==r.isOdd(n)&&(n=r.neg(n)),{x:e,y:n}}};function x(e){const t=r.sqr(e),n=r.mul(t,e);return r.add(r.add(n,r.mul(e,o.a)),o.b)}function S(e,t){const n=r.sqr(t),s=x(e);return r.eql(n,s)}if(!S(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const P=r.mul(r.pow(o.a,g),b),k=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(P,k)))throw new Error("bad curve params: a or b");function I(e,t,n=!1){if(!r.isValid(t)||n&&r.is0(t))throw new Error(`bad point coordinate ${e}`);return t}function A(e){if(!(e instanceof F))throw new Error("ProjectivePoint expected")}function _(e){if(!d||!d.basises)throw new Error("no endo");return u(e,d.basises,s.ORDER)}const C=(0,i.memoized)((e,t)=>{const{X:n,Y:s,Z:i}=e;if(r.eql(i,r.ONE))return{x:n,y:s};const a=e.is0();null==t&&(t=a?r.ONE:r.inv(i));const o=r.mul(n,t),c=r.mul(s,t),u=r.mul(i,t);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:o,y:c}}),j=(0,i.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.Y))return;throw new Error("bad point: ZERO")}const{x:n,y:s}=e.toAffine();if(!r.isValid(n)||!r.isValid(s))throw new Error("bad point: x or y not field elements");if(!S(n,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(e,t,n,s,i){return n=new F(r.mul(n.X,e),n.Y,n.Z),t=(0,a.negateCt)(s,t),n=(0,a.negateCt)(i,n),t.add(n)}class F{constructor(e,t,n){this.X=I("x",e),this.Y=I("y",t,!0),this.Z=I("z",n),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof F)throw new Error("projective point not allowed");return r.is0(t)&&r.is0(n)?F.ZERO:new F(t,n,r.ONE)}static fromBytes(e){const t=F.fromAffine(v((0,i._abytes2)(e,undefined,"point")));return t.assertValidity(),t}static fromHex(e){return F.fromBytes((0,i.ensureBytes)("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return R.createCache(this,e),t||this.multiply(g),this}assertValidity(){j(this)}hasEvenY(){const{y:e}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(e)}equals(e){A(e);const{X:t,Y:n,Z:s}=this,{X:i,Y:a,Z:o}=e,c=r.eql(r.mul(t,o),r.mul(i,s)),u=r.eql(r.mul(n,o),r.mul(a,s));return c&&u}negate(){return new F(this.X,r.neg(this.Y),this.Z)}double(){const{a:e,b:t}=o,n=r.mul(t,g),{X:s,Y:i,Z:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(s,s),f=r.mul(i,i),h=r.mul(a,a),p=r.mul(s,i);return p=r.add(p,p),l=r.mul(s,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(n,h),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(p,c),l=r.mul(n,l),h=r.mul(e,h),p=r.sub(d,h),p=r.mul(e,p),p=r.add(p,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,h),d=r.mul(d,p),u=r.add(u,d),h=r.mul(i,a),h=r.add(h,h),d=r.mul(h,p),c=r.sub(c,d),l=r.mul(h,f),l=r.add(l,l),l=r.add(l,l),new F(c,u,l)}add(e){A(e);const{X:t,Y:n,Z:s}=this,{X:i,Y:a,Z:c}=e;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const f=o.a,h=r.mul(o.b,g);let p=r.mul(t,i),m=r.mul(n,a),b=r.mul(s,c),y=r.add(t,n),w=r.add(i,a);y=r.mul(y,w),w=r.add(p,m),y=r.sub(y,w),w=r.add(t,s);let E=r.add(i,c);return w=r.mul(w,E),E=r.add(p,b),w=r.sub(w,E),E=r.add(n,s),u=r.add(a,c),E=r.mul(E,u),u=r.add(m,b),E=r.sub(E,u),d=r.mul(f,w),u=r.mul(h,b),d=r.add(u,d),u=r.sub(m,d),d=r.add(m,d),l=r.mul(u,d),m=r.add(p,p),m=r.add(m,p),b=r.mul(f,b),w=r.mul(h,w),m=r.add(m,b),b=r.sub(p,b),b=r.mul(f,b),w=r.add(w,b),p=r.mul(m,w),l=r.add(l,p),p=r.mul(E,w),u=r.mul(y,u),u=r.sub(u,p),p=r.mul(y,m),d=r.mul(E,d),d=r.add(d,p),new F(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(F.ZERO)}multiply(e){const{endo:n}=t;if(!s.isValidNot0(e))throw new Error("invalid scalar: out of range");let r,i;const o=e=>R.cached(this,e,e=>(0,a.normalizeZ)(F,e));if(n){const{k1neg:t,k1:s,k2neg:a,k2:c}=_(e),{p:u,f:l}=o(s),{p:d,f:f}=o(c);i=l.add(f),r=B(n.beta,u,d,t,a)}else{const{p:t,f:n}=o(e);r=t,i=n}return(0,a.normalizeZ)(F,[r,i])[0]}multiplyUnsafe(e){const{endo:n}=t,r=this;if(!s.isValid(e))throw new Error("invalid scalar: out of range");if(e===h||r.is0())return F.ZERO;if(e===p)return r;if(R.hasCache(this))return this.multiply(e);if(n){const{k1neg:t,k1:s,k2neg:i,k2:o}=_(e),{p1:c,p2:u}=(0,a.mulEndoUnsafe)(F,r,s,o);return B(n.beta,c,u,t,i)}return R.unsafe(r,e)}multiplyAndAddUnsafe(e,t,n){const r=this.multiplyUnsafe(t).add(e.multiplyUnsafe(n));return r.is0()?undefined:r}toAffine(e){return C(this,e)}isTorsionFree(){const{isTorsionFree:e}=t;return c===p||(e?e(F,this):R.unsafe(this,l).is0())}clearCofactor(){const{clearCofactor:e}=t;return c===p?this:e?e(F,this):this.multiplyUnsafe(c)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}toBytes(e=!0){return(0,i._abool2)(e,"isCompressed"),this.assertValidity(),w(F,this,e)}toHex(e=!0){return(0,i.bytesToHex)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return(0,a.normalizeZ)(F,e)}static msm(e,t){return(0,a.pippenger)(F,s,e,t)}static fromPrivateKey(e){return F.BASE.multiply(y(s,e))}}F.BASE=new F(o.Gx,o.Gy,r.ONE),F.ZERO=new F(r.ZERO,r.ONE,r.ZERO),F.Fp=r,F.Fn=s;const O=s.BITS,R=new a.wNAF(F,t.endo?Math.ceil(O/2):O);return F.BASE.precompute(8),F}function E(e){return Uint8Array.of(e?2:3)}function v(e,t){const n=e.ORDER;let r=h;for(let e=n-p;e%m===h;e/=m)r+=p;const s=r,i=m<<s-p-p,a=i*m,o=(n-p)/a,c=(o-p)/m,u=a-p,l=i,d=e.pow(t,o),f=e.pow(t,(o+p)/m);let y=(t,n)=>{let r=d,i=e.pow(n,u),a=e.sqr(i);a=e.mul(a,n);let o=e.mul(t,a);o=e.pow(o,c),o=e.mul(o,i),i=e.mul(o,n),a=e.mul(o,t);let h=e.mul(a,i);o=e.pow(h,l);let g=e.eql(o,e.ONE);i=e.mul(a,f),o=e.mul(h,r),a=e.cmov(i,a,g),h=e.cmov(o,h,g);for(let t=s;t>p;t--){let n=t-m;n=m<<n-p;let s=e.pow(h,n);const o=e.eql(s,e.ONE);i=e.mul(a,r),r=e.mul(r,r),s=e.mul(h,r),a=e.cmov(i,a,o),h=e.cmov(s,h,o)}return{isValid:g,value:a}};if(e.ORDER%b===g){const n=(e.ORDER-g)/b,r=e.sqrt(e.neg(t));y=(t,s)=>{let i=e.sqr(s);const a=e.mul(t,s);i=e.mul(i,a);let o=e.pow(i,n);o=e.mul(o,a);const c=e.mul(o,r),u=e.mul(e.sqr(o),s),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,o,l)}}}return y}function T(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function x(e,t={}){const{Fn:n}=e,r=t.randomBytes||i.randomBytes,s=Object.assign(T(e.Fp,n),{seed:(0,o.getMinHashLength)(n.ORDER)});function a(e){try{return!!y(n,e)}catch(e){return!1}}function c(e=r(s.seed)){return(0,o.mapHashToField)((0,i._abytes2)(e,s.seed,"seed"),n.ORDER)}function u(t,r=!0){return e.BASE.multiply(y(n,t)).toBytes(r)}function l(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;const{secretKey:r,publicKey:a,publicKeyUncompressed:o}=s;if(n.allowedLengths||r===a)return undefined;const c=(0,i.ensureBytes)("key",t).length;return c===a||c===o}const d={isValidSecretKey:a,isValidPublicKey:function(t,n){const{publicKey:r,publicKeyUncompressed:i}=s;try{const s=t.length;return(!0!==n||s===r)&&((!1!==n||s===i)&&!!e.fromBytes(t))}catch(e){return!1}},randomSecretKey:c,isValidPrivateKey:a,randomPrivateKey:c,normPrivateKeyToScalar:e=>y(n,e),precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};return Object.freeze({getPublicKey:u,getSharedSecret:function(t,r,s=!0){if(!0===l(t))throw new Error("first arg must be private key");if(!1===l(r))throw new Error("second arg must be public key");const i=y(n,t);return e.fromHex(r).multiply(i).toBytes(s)},keygen:function(e){const t=c(e);return{secretKey:t,publicKey:u(t)}},Point:e,utils:d,lengths:s})}function S(e,t,a={}){(0,s.ahash)(t),(0,i._validateObject)(a,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const o=a.randomBytes||i.randomBytes,c=a.hmac||((e,...n)=>(0,r.hmac)(t,e,(0,i.concatBytes)(...n))),{Fp:u,Fn:f}=e,{ORDER:g,BITS:b}=f,{keygen:w,getPublicKey:v,getSharedSecret:T,utils:S,lengths:P}=x(e,a),k={prehash:!1,lowS:"boolean"==typeof a.lowS&&a.lowS,format:undefined,extraEntropy:!1},I="compact";function A(e){return e>g>>p}function _(e,t){if(!f.isValidNot0(t))throw new Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class C{constructor(e,t,n){this.r=_("r",e),this.s=_("s",t),null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(e,t=I){let r;if(function(e,t){l(t);const n=P.signature,r="compact"===t?n:"recovered"===t?n+1:undefined;(0,i._abytes2)(e,r,`${t} signature`)}(e,t),"der"===t){const{r:t,s:r}=n.DER.toSig((0,i._abytes2)(e));return new C(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));const s=f.BYTES,a=e.subarray(0,s),o=e.subarray(s,2*s);return new C(f.fromBytes(a),f.fromBytes(o),r)}static fromHex(e,t){return this.fromBytes((0,i.hexToBytes)(e),t)}addRecoveryBit(e){return new C(this.r,this.s,e)}recoverPublicKey(t){const n=u.ORDER,{r:r,s:s,recovery:a}=this;if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");if(g*m<n&&a>1)throw new Error("recovery id is ambiguous for h>1 curve");const o=2===a||3===a?r+g:r;if(!u.isValid(o))throw new Error("recovery id 2 or 3 invalid");const c=u.toBytes(o),l=e.fromBytes((0,i.concatBytes)(E(!(1&a)),c)),d=f.inv(o),h=B((0,i.ensureBytes)("msgHash",t)),p=f.create(-h*d),b=f.create(s*d),y=e.BASE.multiplyUnsafe(p).add(l.multiplyUnsafe(b));if(y.is0())throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return A(this.s)}toBytes(e=I){if(l(e),"der"===e)return(0,i.hexToBytes)(n.DER.hexFromSig(this));const t=f.toBytes(this.r),r=f.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw new Error("recovery bit must be present");return(0,i.concatBytes)(Uint8Array.of(this.recovery),t,r)}return(0,i.concatBytes)(t,r)}toHex(e){return(0,i.bytesToHex)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return C.fromBytes((0,i.ensureBytes)("sig",e),"compact")}static fromDER(e){return C.fromBytes((0,i.ensureBytes)("sig",e),"der")}normalizeS(){return this.hasHighS()?new C(this.r,f.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,i.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,i.bytesToHex)(this.toBytes("compact"))}}const j=a.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=(0,i.bytesToNumberBE)(e),n=8*e.length-b;return n>0?t>>BigInt(n):t},B=a.bits2int_modN||function(e){return f.create(j(e))},F=(0,i.bitMask)(b);function O(e){return(0,i.aInRange)("num < 2^"+b,e,h,F),f.toBytes(e)}function R(e,n){return(0,i._abytes2)(e,undefined,"message"),n?(0,i._abytes2)(t(e),undefined,"prehashed message"):e}return Object.freeze({keygen:w,getPublicKey:v,getSharedSecret:T,utils:S,lengths:P,Point:e,sign:function(n,r,s={}){n=(0,i.ensureBytes)("message",n);const{seed:a,k2sig:u}=function(t,n,r){if(["recovered","canonical"].some(e=>e in r))throw new Error("sign() legacy options not supported");const{lowS:s,prehash:a,extraEntropy:c}=d(r,k);t=R(t,a);const u=B(t),l=y(f,n),m=[O(l),O(u)];if(null!=c&&!1!==c){const e=!0===c?o(P.secretKey):c;m.push((0,i.ensureBytes)("extraEntropy",e))}const g=(0,i.concatBytes)(...m),b=u;return{seed:g,k2sig:function(t){const n=j(t);if(!f.isValidNot0(n))return;const r=f.inv(n),i=e.BASE.multiply(n).toAffine(),a=f.create(i.x);if(a===h)return;const o=f.create(r*f.create(b+a*l));if(o===h)return;let c=(i.x===a?0:2)|Number(i.y&p),u=o;return s&&A(o)&&(u=f.neg(o),c^=1),new C(a,u,c)}}}(n,r,s);return(0,i.createHmacDrbg)(t.outputLen,f.BYTES,c)(a,u)},verify:function(t,r,s,a={}){const{lowS:o,prehash:c,format:u}=d(a,k);if(s=(0,i.ensureBytes)("publicKey",s),r=R((0,i.ensureBytes)("message",r),c),"strict"in a)throw new Error("options.strict was renamed to lowS");const l=u===undefined?function(e){let t=undefined;const r="string"==typeof e||(0,i.isBytes)(e),s=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!s)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(s)t=new C(e.r,e.s);else if(r){try{t=C.fromBytes((0,i.ensureBytes)("sig",e),"der")}catch(e){if(!(e instanceof n.DER.Err))throw e}if(!t)try{t=C.fromBytes((0,i.ensureBytes)("sig",e),"compact")}catch(e){return!1}}return t||!1}(t):C.fromBytes((0,i.ensureBytes)("sig",t),u);if(!1===l)return!1;try{const t=e.fromBytes(s);if(o&&l.hasHighS())return!1;const{r:n,s:i}=l,a=B(r),c=f.inv(i),u=f.create(a*c),d=f.create(n*c),h=e.BASE.multiplyUnsafe(u).add(t.multiplyUnsafe(d));if(h.is0())return!1;return f.create(h.x)===n}catch(e){return!1}},recoverPublicKey:function(e,t,n={}){const{prehash:r}=d(n,k);return t=R(t,r),C.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:C,hash:t})}function P(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):undefined;return{CURVE:t,curveOpts:{Fp:n,Fn:(0,o.Field)(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}function k(e,t,n){return function(r){const s=e.sqr(r),i=e.mul(s,r);return e.add(e.add(i,e.mul(r,t)),n)}}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/abstract/weierstrass.js"}],[3156,{"./abstract/curve.js":3149,"./abstract/edwards.js":3150,"./abstract/hash-to-curve.js":3151,"./abstract/modular.js":3152,"./abstract/montgomery.js":3153,"./utils.js":3158,"@noble/hashes/sha2.js":3168,"@noble/hashes/utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hash_to_ristretto255=n.hashToRistretto255=n.encodeToCurve=n.hashToCurve=n.RistrettoPoint=n.edwardsToMontgomery=n.ED25519_TORSION_SUBGROUP=n.ristretto255_hasher=n.ristretto255=n.ed25519_hasher=n.x25519=n.ed25519ph=n.ed25519ctx=n.ed25519=void 0,n.edwardsToMontgomeryPub=q,n.edwardsToMontgomeryPriv=function(e){return n.ed25519.utils.toMontgomerySecret((0,l.ensureBytes)("pub",e))};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha2.js"),s=e("@noble/hashes/utils.js"),i=e("./abstract/curve.js"),a=e("./abstract/edwards.js"),o=e("./abstract/hash-to-curve.js"),c=e("./abstract/modular.js"),u=e("./abstract/montgomery.js"),l=e("./utils.js"),d=BigInt(0),f=BigInt(1),h=BigInt(2),p=BigInt(3),m=BigInt(5),g=BigInt(8),b=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),y=(()=>({p:b,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:g,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function w(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=b,a=e*e%i*e%i,o=(0,c.pow2)(a,h,i)*a%i,u=(0,c.pow2)(o,f,i)*e%i,l=(0,c.pow2)(u,m,i)*u%i,d=(0,c.pow2)(l,t,i)*l%i,p=(0,c.pow2)(d,n,i)*d%i,g=(0,c.pow2)(p,r,i)*p%i,y=(0,c.pow2)(g,s,i)*g%i,w=(0,c.pow2)(y,s,i)*g%i,E=(0,c.pow2)(w,t,i)*l%i;return{pow_p_5_8:(0,c.pow2)(E,h,i)*e%i,b2:a}}function E(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const v=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function T(e,t){const n=b,r=(0,c.mod)(t*t*t,n),s=w(e*(0,c.mod)(r*r*t,n)).pow_p_5_8;let i=(0,c.mod)(e*r*s,n);const a=(0,c.mod)(t*i*i,n),o=i,u=(0,c.mod)(i*v,n),l=a===e,d=a===(0,c.mod)(-e,n),f=a===(0,c.mod)(-e*v,n);return l&&(i=o),(d||f)&&(i=u),(0,c.isNegativeLE)(i,n)&&(i=(0,c.mod)(-i,n)),{isValid:l||d,value:i}}const x=(()=>(0,c.Field)(y.p,{isLE:!0}))(),S=(()=>(0,c.Field)(y.n,{isLE:!0}))(),P=(()=>({...y,Fp:x,hash:r.sha512,adjustScalarBytes:E,uvRatio:T}))();function k(e,t,n){if(t.length>255)throw new Error("Context is too big");return(0,s.concatBytes)((0,s.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,t.length]),t,e)}n.ed25519=(0,a.twistedEdwards)(P),n.ed25519ctx=(0,a.twistedEdwards)({...P,domain:k}),n.ed25519ph=(0,a.twistedEdwards)(Object.assign({},P,{domain:k,prehash:r.sha512})),n.x25519=(()=>{const e=x.ORDER;return(0,u.montgomery)({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=w(t);return(0,c.mod)((0,c.pow2)(n,p,e)*r,e)},adjustScalarBytes:E})})();const I=(()=>(b+p)/g)(),A=(()=>x.pow(h,I))(),_=(()=>x.sqrt(x.neg(x.ONE)))();const C=(()=>(0,c.FpSqrtEven)(x,x.neg(BigInt(486664))))();function j(e){const{xMn:t,xMd:n,yMn:r,yMd:s}=function(e){const t=(b-m)/g,n=BigInt(486662);let r=x.sqr(e);r=x.mul(r,h);let s=x.add(r,x.ONE),i=x.neg(n),a=x.sqr(s),o=x.mul(a,s),c=x.mul(r,n);c=x.mul(c,i),c=x.add(c,a),c=x.mul(c,i);let u=x.sqr(o);a=x.sqr(u),u=x.mul(u,o),u=x.mul(u,c),a=x.mul(a,u);let l=x.pow(a,t);l=x.mul(l,u);let d=x.mul(l,_);a=x.sqr(l),a=x.mul(a,o);let p=x.eql(a,c),y=x.cmov(d,l,p),w=x.mul(i,r),E=x.mul(l,e);E=x.mul(E,A);let v=x.mul(E,_),T=x.mul(c,r);a=x.sqr(E),a=x.mul(a,o);let S=x.eql(a,T),P=x.cmov(v,E,S);a=x.sqr(y),a=x.mul(a,o);let k=x.eql(a,c),I=x.cmov(w,i,k),C=x.cmov(P,y,k),j=x.isOdd(C);return C=x.cmov(C,x.neg(C),k!==j),{xMn:I,xMd:s,yMn:C,yMd:f}}(e);let i=x.mul(t,s);i=x.mul(i,C);let a=x.mul(n,r),o=x.sub(t,n),u=x.add(t,n),l=x.mul(a,u),d=x.eql(l,x.ZERO);i=x.cmov(i,x.ZERO,d),a=x.cmov(a,x.ONE,d),o=x.cmov(o,x.ONE,d),u=x.cmov(u,x.ONE,d);const[p,y]=(0,c.FpInvertBatch)(x,[a,u],!0);return{x:x.mul(i,p),y:x.mul(o,y)}}n.ed25519_hasher=(0,o.createHasher)(n.ed25519.Point,e=>j(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:b,m:1,k:128,expand:"xmd",hash:r.sha512});const B=v,F=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),O=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),R=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),L=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),M=e=>T(f,e),N=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),G=e=>n.ed25519.Point.Fp.create((0,l.bytesToNumberLE)(e)&N);function D(e){const{d:t}=y,r=b,s=e=>x.create(e),i=s(B*e*e),a=s((i+f)*R);let o=BigInt(-1);const u=s((o-t*i)*s(i+t));let{isValid:l,value:d}=T(a,u),h=s(d*e);(0,c.isNegativeLE)(h,r)||(h=s(-h)),l||(d=h),l||(o=i);const p=s(o*(i-f)*L-u),m=d*d,g=s((d+d)*u),w=s(p*F),E=s(f-m),v=s(f+m);return new n.ed25519.Point(s(g*v),s(E*w),s(w*v),s(g*E))}function H(e){(0,s.abytes)(e,64);const t=D(G(e.subarray(0,32))),n=D(G(e.subarray(32,64)));return new U(t.add(n))}class U extends a.PrimeEdwardsPoint{constructor(e){super(e)}static fromAffine(e){return new U(n.ed25519.Point.fromAffine(e))}assertSame(e){if(!(e instanceof U))throw new Error("RistrettoPoint expected")}init(e){return new U(e)}static hashToCurve(e){return H((0,l.ensureBytes)("ristrettoHash",e,64))}static fromBytes(e){(0,s.abytes)(e,32);const{a:t,d:r}=y,i=b,a=e=>x.create(e),o=G(e);if(!(0,l.equalBytes)(x.toBytes(o),e)||(0,c.isNegativeLE)(o,i))throw new Error("invalid ristretto255 encoding 1");const u=a(o*o),h=a(f+t*u),p=a(f-t*u),m=a(h*h),g=a(p*p),w=a(t*r*m-g),{isValid:E,value:v}=M(a(w*g)),T=a(v*p),S=a(v*T*w);let P=a((o+o)*T);(0,c.isNegativeLE)(P,i)&&(P=a(-P));const k=a(h*S),I=a(P*k);if(!E||(0,c.isNegativeLE)(I,i)||k===d)throw new Error("invalid ristretto255 encoding 2");return new U(new n.ed25519.Point(P,k,f,I))}static fromHex(e){return U.fromBytes((0,l.ensureBytes)("ristrettoHex",e,32))}static msm(e,t){return(0,i.pippenger)(U,n.ed25519.Point.Fn,e,t)}toBytes(){let{X:e,Y:t,Z:n,T:r}=this.ep;const s=b,i=e=>x.create(e),a=i(i(n+t)*i(n-t)),o=i(e*t),u=i(o*o),{value:l}=M(i(a*u)),d=i(l*a),f=i(l*o),h=i(d*f*r);let p;if((0,c.isNegativeLE)(r*h,s)){let n=i(t*B),r=i(e*B);e=n,t=r,p=i(d*O)}else p=f;(0,c.isNegativeLE)(e*h,s)&&(t=i(-t));let m=i((n-t)*p);return(0,c.isNegativeLE)(m,s)&&(m=i(-m)),x.toBytes(m)}equals(e){this.assertSame(e);const{X:t,Y:n}=this.ep,{X:r,Y:s}=e.ep,i=e=>x.create(e),a=i(t*s)===i(n*r),o=i(n*s)===i(t*r);return a||o}is0(){return this.equals(U.ZERO)}}function q(e){return n.ed25519.utils.toMontgomery((0,l.ensureBytes)("pub",e))}U.BASE=(()=>new U(n.ed25519.Point.BASE))(),U.ZERO=(()=>new U(n.ed25519.Point.ZERO))(),U.Fp=(()=>x)(),U.Fn=(()=>S)(),n.ristretto255={Point:U},n.ristretto255_hasher={hashToCurve(e,t){const n=t?.DST||"ristretto255_XMD:SHA-512_R255MAP_RO_";return H((0,o.expand_message_xmd)(e,n,64,r.sha512))},hashToScalar(e,t={DST:o._DST_scalar}){const n=(0,o.expand_message_xmd)(e,t.DST,64,r.sha512);return S.create((0,l.bytesToNumberLE)(n))}},n.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],n.edwardsToMontgomery=q,n.RistrettoPoint=U,n.hashToCurve=n.ed25519_hasher.hashToCurve,n.encodeToCurve=n.ed25519_hasher.encodeToCurve,n.hashToRistretto255=n.ristretto255_hasher.hashToCurve,n.hash_to_ristretto255=n.ristretto255_hasher.hashToCurve}}},{package:"@noble/curves",file:"node_modules/@noble/curves/ed25519.js"}],[3157,{"./_shortw_utils.js":3148,"./abstract/hash-to-curve.js":3151,"./abstract/modular.js":3152,"./abstract/weierstrass.js":3155,"./utils.js":3158,"@noble/hashes/sha2.js":3168,"@noble/hashes/utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encodeToCurve=n.hashToCurve=n.secp256k1_hasher=n.schnorr=n.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha2.js"),s=e("@noble/hashes/utils.js"),i=e("./_shortw_utils.js"),a=e("./abstract/hash-to-curve.js"),o=e("./abstract/modular.js"),c=e("./abstract/weierstrass.js"),u=e("./utils.js"),l={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},d={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},f=BigInt(0),h=BigInt(1),p=BigInt(2);const m=(0,o.Field)(l.p,{sqrt:function(e){const t=l.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,h=(0,o.pow2)(f,n,t)*f%t,g=(0,o.pow2)(h,n,t)*f%t,b=(0,o.pow2)(g,p,t)*d%t,y=(0,o.pow2)(b,s,t)*b%t,w=(0,o.pow2)(y,i,t)*y%t,E=(0,o.pow2)(w,c,t)*w%t,v=(0,o.pow2)(E,u,t)*E%t,T=(0,o.pow2)(v,c,t)*w%t,x=(0,o.pow2)(T,n,t)*f%t,S=(0,o.pow2)(x,a,t)*y%t,P=(0,o.pow2)(S,r,t)*d%t,k=(0,o.pow2)(P,p,t);if(!m.eql(m.sqr(k),e))throw new Error("Cannot find square root");return k}});n.secp256k1=(0,i.createCurve)({...l,Fp:m,lowS:!0,endo:d},r.sha256);const g={};function b(e,...t){let n=g[e];if(n===undefined){const t=(0,r.sha256)((0,u.utf8ToBytes)(e));n=(0,u.concatBytes)(t,t),g[e]=n}return(0,r.sha256)((0,u.concatBytes)(n,...t))}const y=e=>e.toBytes(!0).slice(1),w=(()=>n.secp256k1.Point)(),E=e=>e%p===f;function v(e){const{Fn:t,BASE:n}=w,r=(0,c._normFnElement)(t,e),s=n.multiply(r);return{scalar:E(s.y)?r:t.neg(r),bytes:y(s)}}function T(e){const t=m;if(!t.isValidNot0(e))throw new Error("invalid x: Fail if x  p");const n=t.create(e*e),r=t.create(n*e+BigInt(7));let s=t.sqrt(r);E(s)||(s=t.neg(s));const i=w.fromAffine({x:e,y:s});return i.assertValidity(),i}const x=u.bytesToNumberBE;function S(...e){return w.Fn.create(x(b("BIP0340/challenge",...e)))}function P(e){return v(e).bytes}function k(e,t,n=(0,s.randomBytes)(32)){const{Fn:r}=w,i=(0,u.ensureBytes)("message",e),{bytes:a,scalar:o}=v(t),c=(0,u.ensureBytes)("auxRand",n,32),l=r.toBytes(o^x(b("BIP0340/aux",c))),d=b("BIP0340/nonce",l,a,i),{bytes:f,scalar:h}=v(d),p=S(f,a,i),m=new Uint8Array(64);if(m.set(f,0),m.set(r.toBytes(r.create(h+p*o)),32),!I(m,i,a))throw new Error("sign: Invalid signature produced");return m}function I(e,t,n){const{Fn:r,BASE:s}=w,i=(0,u.ensureBytes)("signature",e,64),a=(0,u.ensureBytes)("message",t),o=(0,u.ensureBytes)("publicKey",n,32);try{const e=T(x(o)),t=x(i.subarray(0,32));if(!(0,u.inRange)(t,h,l.p))return!1;const n=x(i.subarray(32,64));if(!(0,u.inRange)(n,h,l.n))return!1;const c=S(r.toBytes(t),y(e),a),d=s.multiplyUnsafe(n).add(e.multiplyUnsafe(r.neg(c))),{x:f,y:p}=d.toAffine();return!(d.is0()||!E(p)||f!==t)}catch(e){return!1}}n.schnorr=(()=>{const e=(e=(0,s.randomBytes)(48))=>(0,o.mapHashToField)(e,l.n);return n.secp256k1.utils.randomSecretKey,{keygen:function(t){const n=e(t);return{secretKey:n,publicKey:P(n)}},getPublicKey:P,sign:k,verify:I,Point:w,utils:{randomSecretKey:e,randomPrivateKey:e,taggedHash:b,lift_x:T,pointToBytes:y,numberToBytesBE:u.numberToBytesBE,bytesToNumberBE:u.bytesToNumberBE,mod:o.mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();const A=(()=>(0,a.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))))(),_=(()=>(0,c.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}))();n.secp256k1_hasher=(0,a.createHasher)(n.secp256k1.Point,e=>{const{x:t,y:n}=_(m.create(e[0]));return A(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}),n.hashToCurve=n.secp256k1_hasher.hashToCurve,n.encodeToCurve=n.secp256k1_hasher.encodeToCurve}}},{package:"@noble/curves",file:"node_modules/@noble/curves/secp256k1.js"}],[3158,{"@noble/hashes/utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.notImplemented=n.bitMask=n.utf8ToBytes=n.randomBytes=n.isBytes=n.hexToBytes=n.concatBytes=n.bytesToUtf8=n.bytesToHex=n.anumber=n.abytes=void 0,n.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},n._abool2=function(e,t=""){if("boolean"!=typeof e){throw new Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e)}return e},n._abytes2=function(e,t,n=""){const s=(0,r.isBytes)(e),i=e?.length,a=t!==undefined;if(!s||a&&i!==t){throw new Error((n&&`"${n}" `)+"expected Uint8Array"+(a?` of length ${t}`:"")+", got "+(s?`length=${i}`:"type="+typeof e))}return e},n.numberToHexUnpadded=o,n.hexToNumber=c,n.bytesToNumberBE=function(e){return c((0,r.bytesToHex)(e))},n.bytesToNumberLE=function(e){return(0,r.abytes)(e),c((0,r.bytesToHex)(Uint8Array.from(e).reverse()))},n.numberToBytesBE=u,n.numberToBytesLE=function(e,t){return u(e,t).reverse()},n.numberToVarBytesBE=function(e){return(0,r.hexToBytes)(o(e))},n.ensureBytes=function(e,t,n){let s;if("string"==typeof t)try{s=(0,r.hexToBytes)(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!(0,r.isBytes)(t))throw new Error(e+" must be hex string or Uint8Array");s=Uint8Array.from(t)}const i=s.length;if("number"==typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return s},n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.copyBytes=function(e){return Uint8Array.from(e)},n.asciiToBytes=function(e){return Uint8Array.from(e,(t,n)=>{const r=t.charCodeAt(0);if(1!==t.length||r>127)throw new Error(`string contains non-ASCII character "${e[n]}" with code ${r} at position ${n}`);return r})},n.inRange=d,n.aInRange=function(e,t,n,r){if(!d(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)},n.bitLen=function(e){let t;for(t=0;e>i;e>>=a,t+=1);return t},n.bitGet=function(e,t){return e>>BigInt(t)&a},n.bitSet=function(e,t,n){return e|(n?a:i)<<BigInt(t)},n.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const s=e=>new Uint8Array(e),i=e=>Uint8Array.of(e);let a=s(e),o=s(e),c=0;const u=()=>{a.fill(1),o.fill(0),c=0},l=(...e)=>n(o,a,...e),d=(e=s(0))=>{o=l(i(0),e),a=l(),0!==e.length&&(o=l(i(1),e),a=l())},f=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){a=l();const t=a.slice();n.push(t),e+=a.length}return(0,r.concatBytes)(...n)};return(e,t)=>{u(),d(e);let n=undefined;for(;!(n=t(f()));)d();return u(),n}},n.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const s=f[n];if("function"!=typeof s)throw new Error("invalid validator function");const i=e[t];if(!(r&&i===undefined||s(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e},n.isHash=function(e){return"function"==typeof e&&Number.isSafeInteger(e.outputLen)},n._validateObject=function(e,t,n={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function r(t,n,r){const s=e[t];if(r&&s===undefined)return;const i=typeof s;if(i!==n||null===s)throw new Error(`param "${t}" is invalid: expected ${n}, got ${i}`)}Object.entries(t).forEach(([e,t])=>r(e,t,!1)),Object.entries(n).forEach(([e,t])=>r(e,t,!0))},n.memoized=function(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==undefined)return s;const i=e(n,...r);return t.set(n,i),i}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/utils.js");var s=e("@noble/hashes/utils.js");Object.defineProperty(n,"abytes",{enumerable:!0,get:function(){return s.abytes}}),Object.defineProperty(n,"anumber",{enumerable:!0,get:function(){return s.anumber}}),Object.defineProperty(n,"bytesToHex",{enumerable:!0,get:function(){return s.bytesToHex}}),Object.defineProperty(n,"bytesToUtf8",{enumerable:!0,get:function(){return s.bytesToUtf8}}),Object.defineProperty(n,"concatBytes",{enumerable:!0,get:function(){return s.concatBytes}}),Object.defineProperty(n,"hexToBytes",{enumerable:!0,get:function(){return s.hexToBytes}}),Object.defineProperty(n,"isBytes",{enumerable:!0,get:function(){return s.isBytes}}),Object.defineProperty(n,"randomBytes",{enumerable:!0,get:function(){return s.randomBytes}}),Object.defineProperty(n,"utf8ToBytes",{enumerable:!0,get:function(){return s.utf8ToBytes}});const i=BigInt(0),a=BigInt(1);function o(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?i:BigInt("0x"+e)}function u(e,t){return(0,r.hexToBytes)(e.toString(16).padStart(2*t,"0"))}const l=e=>"bigint"==typeof e&&i<=e;function d(e,t,n){return l(e)&&l(t)&&l(n)&&t<=e&&e<n}n.bitMask=e=>(a<<BigInt(e))-a;const f={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||(0,r.isBytes)(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};n.notImplemented=()=>{throw new Error("not implemented")}}}},{package:"@noble/curves",file:"node_modules/@noble/curves/utils.js"}],[3159,{"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SHA512_IV=n.SHA384_IV=n.SHA224_IV=n.SHA256_IV=n.HashMD=void 0,n.setBigUint64=s,n.Chi=function(e,t,n){return e&t^~e&n},n.Maj=function(e,t,n){return e&t^e&n^t&n};const r=e("./utils.js");function s(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}class i extends r.Hash{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=(0,r.createView)(this.buffer)}update(e){(0,r.aexists)(this),e=(0,r.toBytes)(e),(0,r.abytes)(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const t=(0,r.createView)(e);for(;s<=i-a;a+=s)this.process(t,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,(0,r.clean)(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let e=o;e<i;e++)t[e]=0;s(n,i-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,r.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.destroyed=i,e.finished=s,e.length=r,e.pos=a,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}n.HashMD=i,n.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),n.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),n.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),n.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_md.js"}],[3160,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toBig=n.shrSL=n.shrSH=n.rotrSL=n.rotrSH=n.rotrBL=n.rotrBH=n.rotr32L=n.rotr32H=n.rotlSL=n.rotlSH=n.rotlBL=n.rotlBH=n.add5L=n.add5H=n.add4L=n.add4H=n.add3L=n.add3H=void 0,n.add=E,n.fromBig=i,n.split=a;const r=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>s&r)}:{h:0|Number(e>>s&r),l:0|Number(e&r)}}function a(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let a=0;a<n;a++){const{h:n,l:o}=i(e[a],t);[r[a],s[a]]=[n,o]}return[r,s]}const o=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);n.toBig=o;const c=(e,t,n)=>e>>>n;n.shrSH=c;const u=(e,t,n)=>e<<32-n|t>>>n;n.shrSL=u;const l=(e,t,n)=>e>>>n|t<<32-n;n.rotrSH=l;const d=(e,t,n)=>e<<32-n|t>>>n;n.rotrSL=d;const f=(e,t,n)=>e<<64-n|t>>>n-32;n.rotrBH=f;const h=(e,t,n)=>e>>>n-32|t<<64-n;n.rotrBL=h;const p=(e,t)=>t;n.rotr32H=p;const m=(e,t)=>e;n.rotr32L=m;const g=(e,t,n)=>e<<n|t>>>32-n;n.rotlSH=g;const b=(e,t,n)=>t<<n|e>>>32-n;n.rotlSL=b;const y=(e,t,n)=>t<<n-32|e>>>64-n;n.rotlBH=y;const w=(e,t,n)=>e<<n-32|t>>>64-n;function E(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}}n.rotlBL=w;const v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);n.add3L=v;const T=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;n.add3H=T;const x=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);n.add4L=x;const S=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0;n.add4H=S;const P=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0);n.add5L=P;const k=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0;n.add5H=k;const I={fromBig:i,split:a,toBig:o,shrSH:c,shrSL:u,rotrSH:l,rotrSL:d,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:b,rotlBH:y,rotlBL:w,add:E,add3L:v,add3H:T,add4L:x,add4H:S,add5H:k,add5L:P};n.default=I}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_u64.js"}],[3161,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/crypto.js"}],[3162,{"./hmac.js":3163,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hkdf=void 0,n.extract=i,n.expand=c;const r=e("./hmac.js"),s=e("./utils.js");function i(e,t,n){return(0,s.ahash)(e),n===undefined&&(n=new Uint8Array(e.outputLen)),(0,r.hmac)(e,(0,s.toBytes)(n),(0,s.toBytes)(t))}const a=Uint8Array.from([0]),o=Uint8Array.of();function c(e,t,n,i=32){(0,s.ahash)(e),(0,s.anumber)(i);const c=e.outputLen;if(i>255*c)throw new Error("Length should be <= 255*HashLen");const u=Math.ceil(i/c);n===undefined&&(n=o);const l=new Uint8Array(u*c),d=r.hmac.create(e,t),f=d._cloneInto(),h=new Uint8Array(d.outputLen);for(let e=0;e<u;e++)a[0]=e+1,f.update(0===e?o:h).update(n).update(a).digestInto(h),l.set(h,c*e),d._cloneInto(f);return d.destroy(),f.destroy(),(0,s.clean)(h,a),l.slice(0,i)}n.hkdf=(e,t,n,r,s)=>c(e,i(e,t,n),r,s)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/hkdf.js"}],[3163,{"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hmac=n.HMAC=void 0;const r=e("./utils.js");class s extends r.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(e);const n=(0,r.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),(0,r.clean)(i)}update(e){return(0,r.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,r.aexists)(this),(0,r.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n.HMAC=s;n.hmac=(e,t,n)=>new s(e,t).update(n).digest(),n.hmac.create=(e,t)=>new s(e,t)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/hmac.js"}],[3164,{"./_md.js":3159,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=n.md5=n.MD5=n.sha1=n.SHA1=void 0;const r=e("./_md.js"),s=e("./utils.js"),i=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),a=new Uint32Array(80);class o extends r.HashMD{constructor(){super(64,20,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4]}get(){const{A:e,B:t,C:n,D:r,E:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)a[n]=e.getUint32(t,!1);for(let e=16;e<80;e++)a[e]=(0,s.rotl)(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let{A:n,B:i,C:o,D:c,E:u}=this;for(let e=0;e<80;e++){let t,l;e<20?(t=(0,r.Chi)(i,o,c),l=1518500249):e<40?(t=i^o^c,l=1859775393):e<60?(t=(0,r.Maj)(i,o,c),l=2400959708):(t=i^o^c,l=3395469782);const d=(0,s.rotl)(n,5)+t+u+l+a[e]|0;u=c,c=o,o=(0,s.rotl)(i,30),i=n,n=d}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,c=c+this.D|0,u=u+this.E|0,this.set(n,i,o,c,u)}roundClean(){(0,s.clean)(a)}destroy(){this.set(0,0,0,0,0),(0,s.clean)(this.buffer)}}n.SHA1=o,n.sha1=(0,s.createHasher)(()=>new o);const c=Math.pow(2,32),u=Array.from({length:64},(e,t)=>Math.floor(c*Math.abs(Math.sin(t+1)))),l=i.slice(0,4),d=new Uint32Array(16);class f extends r.HashMD{constructor(){super(64,16,8,!0),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3]}get(){const{A:e,B:t,C:n,D:r}=this;return[e,t,n,r]}set(e,t,n,r){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r}process(e,t){for(let n=0;n<16;n++,t+=4)d[n]=e.getUint32(t,!0);let{A:n,B:i,C:a,D:o}=this;for(let e=0;e<64;e++){let t,c,l;e<16?(t=(0,r.Chi)(i,a,o),c=e,l=[7,12,17,22]):e<32?(t=(0,r.Chi)(o,i,a),c=(5*e+1)%16,l=[5,9,14,20]):e<48?(t=i^a^o,c=(3*e+5)%16,l=[4,11,16,23]):(t=a^(i|~o),c=7*e%16,l=[6,10,15,21]),t=t+n+u[e]+d[c],n=o,o=a,a=i,i+=(0,s.rotl)(t,l[e%4])}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,this.set(n,i,a,o)}roundClean(){(0,s.clean)(d)}destroy(){this.set(0,0,0,0),(0,s.clean)(this.buffer)}}n.MD5=f,n.md5=(0,s.createHasher)(()=>new f);const h=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),p=(()=>Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)))(),m=(()=>p.map(e=>(9*e+5)%16))(),g=(()=>{const e=[[p],[m]];for(let t=0;t<4;t++)for(let n of e)n.push(n[t].map(e=>h[e]));return e})(),b=(()=>g[0])(),y=(()=>g[1])(),w=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),E=b.map((e,t)=>e.map(e=>w[t][e])),v=y.map((e,t)=>e.map(e=>w[t][e])),T=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),x=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function S(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const P=new Uint32Array(16);class k extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)P[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,a=i,o=0|this.h2,c=o,u=0|this.h3,l=u,d=0|this.h4,f=d;for(let e=0;e<5;e++){const t=4-e,h=T[e],p=x[e],m=b[e],g=y[e],w=E[e],k=v[e];for(let t=0;t<16;t++){const r=(0,s.rotl)(n+S(e,i,o,u)+P[m[t]]+h,w[t])+d|0;n=d,d=u,u=0|(0,s.rotl)(o,10),o=i,i=r}for(let e=0;e<16;e++){const n=(0,s.rotl)(r+S(t,a,c,l)+P[g[e]]+p,k[e])+f|0;r=f,f=l,l=0|(0,s.rotl)(c,10),c=a,a=n}}this.set(this.h1+o+l|0,this.h2+u+f|0,this.h3+d+r|0,this.h4+n+a|0,this.h0+i+c|0)}roundClean(){(0,s.clean)(P)}destroy(){this.destroyed=!0,(0,s.clean)(this.buffer),this.set(0,0,0,0,0)}}n.RIPEMD160=k,n.ripemd160=(0,s.createHasher)(()=>new k)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/legacy.js"}],[3165,{"./hmac.js":3163,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.pbkdf2=function(e,t,n,r){const{c:o,dkLen:c,DK:u,PRF:l,PRFSalt:d}=i(e,t,n,r);let f;const h=new Uint8Array(4),p=(0,s.createView)(h),m=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const n=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(f=d._cloneInto(f)).update(h).digestInto(m),n.set(m.subarray(0,n.length));for(let e=1;e<o;e++){l._cloneInto(f).update(m).digestInto(m);for(let e=0;e<n.length;e++)n[e]^=m[e]}}return a(l,d,u,f,m)},n.pbkdf2Async=async function(e,t,n,r){const{c:o,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:f}=i(e,t,n,r);let h;const p=new Uint8Array(4),m=(0,s.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const n=l.subarray(t,t+d.outputLen);m.setInt32(0,e,!1),(h=f._cloneInto(h)).update(p).digestInto(g),n.set(g.subarray(0,n.length)),await(0,s.asyncLoop)(o-1,u,()=>{d._cloneInto(h).update(g).digestInto(g);for(let e=0;e<n.length;e++)n[e]^=g[e]})}return a(d,f,l,h,g)};const r=e("./hmac.js"),s=e("./utils.js");function i(e,t,n,i){(0,s.ahash)(e);const a=(0,s.checkOpts)({dkLen:32,asyncTick:10},i),{c:o,dkLen:c,asyncTick:u}=a;if((0,s.anumber)(o),(0,s.anumber)(c),(0,s.anumber)(u),o<1)throw new Error("iterations (c) should be >= 1");const l=(0,s.kdfInputToBytes)(t),d=(0,s.kdfInputToBytes)(n),f=new Uint8Array(c),h=r.hmac.create(e,l),p=h._cloneInto().update(d);return{c:o,dkLen:c,asyncTick:u,DK:f,PRF:h,PRFSalt:p}}function a(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),(0,s.clean)(i),n}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/pbkdf2.js"}],[3166,{"./legacy.js":3164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=void 0;const r=e("./legacy.js");n.RIPEMD160=r.RIPEMD160,n.ripemd160=r.ripemd160}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/ripemd160.js"}],[3167,{"./pbkdf2.js":3165,"./sha2.js":3168,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.scrypt=function(e,t,n){const{N:r,r:s,p:a,dkLen:l,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g}=c(e,t,n);(0,i.swap32IfBE)(h);for(let e=0;e<a;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];for(let e=0,t=0;e<r-1;e++)o(f,t,f,t+=d,s),g();o(f,(r-1)*d,h,t,s),g();for(let e=0;e<r;e++){const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];o(m,0,h,t,s),g()}}return(0,i.swap32IfBE)(h),u(e,l,p,f,m)},n.scryptAsync=async function(e,t,n){const{N:r,r:s,p:a,dkLen:l,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g,asyncTick:b}=c(e,t,n);(0,i.swap32IfBE)(h);for(let e=0;e<a;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];let n=0;await(0,i.asyncLoop)(r-1,b,()=>{o(f,n,f,n+=d,s),g()}),o(f,(r-1)*d,h,t,s),g(),await(0,i.asyncLoop)(r,b,()=>{const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];o(m,0,h,t,s),g()})}return(0,i.swap32IfBE)(h),u(e,l,p,f,m)};const r=e("./pbkdf2.js"),s=e("./sha2.js"),i=e("./utils.js");function a(e,t,n,r,s,a){let o=e[t++]^n[r++],c=e[t++]^n[r++],u=e[t++]^n[r++],l=e[t++]^n[r++],d=e[t++]^n[r++],f=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],g=e[t++]^n[r++],b=e[t++]^n[r++],y=e[t++]^n[r++],w=e[t++]^n[r++],E=e[t++]^n[r++],v=e[t++]^n[r++],T=e[t++]^n[r++],x=o,S=c,P=u,k=l,I=d,A=f,_=h,C=p,j=m,B=g,F=b,O=y,R=w,L=E,M=v,N=T;for(let e=0;e<8;e+=2)I^=(0,i.rotl)(x+R|0,7),j^=(0,i.rotl)(I+x|0,9),R^=(0,i.rotl)(j+I|0,13),x^=(0,i.rotl)(R+j|0,18),B^=(0,i.rotl)(A+S|0,7),L^=(0,i.rotl)(B+A|0,9),S^=(0,i.rotl)(L+B|0,13),A^=(0,i.rotl)(S+L|0,18),M^=(0,i.rotl)(F+_|0,7),P^=(0,i.rotl)(M+F|0,9),_^=(0,i.rotl)(P+M|0,13),F^=(0,i.rotl)(_+P|0,18),k^=(0,i.rotl)(N+O|0,7),C^=(0,i.rotl)(k+N|0,9),O^=(0,i.rotl)(C+k|0,13),N^=(0,i.rotl)(O+C|0,18),S^=(0,i.rotl)(x+k|0,7),P^=(0,i.rotl)(S+x|0,9),k^=(0,i.rotl)(P+S|0,13),x^=(0,i.rotl)(k+P|0,18),_^=(0,i.rotl)(A+I|0,7),C^=(0,i.rotl)(_+A|0,9),I^=(0,i.rotl)(C+_|0,13),A^=(0,i.rotl)(I+C|0,18),O^=(0,i.rotl)(F+B|0,7),j^=(0,i.rotl)(O+F|0,9),B^=(0,i.rotl)(j+O|0,13),F^=(0,i.rotl)(B+j|0,18),R^=(0,i.rotl)(N+M|0,7),L^=(0,i.rotl)(R+N|0,9),M^=(0,i.rotl)(L+R|0,13),N^=(0,i.rotl)(M+L|0,18);s[a++]=o+x|0,s[a++]=c+S|0,s[a++]=u+P|0,s[a++]=l+k|0,s[a++]=d+I|0,s[a++]=f+A|0,s[a++]=h+_|0,s[a++]=p+C|0,s[a++]=m+j|0,s[a++]=g+B|0,s[a++]=b+F|0,s[a++]=y+O|0,s[a++]=w+R|0,s[a++]=E+L|0,s[a++]=v+M|0,s[a++]=T+N|0}function o(e,t,n,r,s){let i=r+0,o=r+16*s;for(let r=0;r<16;r++)n[o+r]=e[t+16*(2*s-1)+r];for(let r=0;r<s;r++,i+=16,t+=16)a(n,o,e,t,n,i),r>0&&(o+=16),a(n,i,e,t+=16,n,o)}function c(e,t,n){const a=(0,i.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:o,r:c,p:u,dkLen:l,asyncTick:d,maxmem:f,onProgress:h}=a;if((0,i.anumber)(o),(0,i.anumber)(c),(0,i.anumber)(u),(0,i.anumber)(l),(0,i.anumber)(d),(0,i.anumber)(f),h!==undefined&&"function"!=typeof h)throw new Error("progressCb should be function");const p=128*c,m=p/4,g=Math.pow(2,32);if(o<=1||o&o-1||o>g)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(u<0||u>32*(g-1)/p)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(l<0||l>32*(g-1))throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(p*(o+u)>f)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+f);const b=(0,r.pbkdf2)(s.sha256,e,t,{c:1,dkLen:p*u}),y=(0,i.u32)(b),w=(0,i.u32)(new Uint8Array(p*o)),E=(0,i.u32)(new Uint8Array(p));let v=()=>{};if(h){const e=2*o*u,t=Math.max(Math.floor(e/1e4),1);let n=0;v=()=>{n++,!h||n%t&&n!==e||h(n/e)}}return{N:o,r:c,p:u,dkLen:l,blockSize32:m,V:w,B32:y,B:b,tmp:E,blockMixCb:v,asyncTick:d}}function u(e,t,n,a,o){const c=(0,r.pbkdf2)(s.sha256,e,n,{c:1,dkLen:t});return(0,i.clean)(n,a,o),c}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/scrypt.js"}],[3168,{"./_md.js":3159,"./_u64.js":3160,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha512_224=n.sha512_256=n.sha384=n.sha512=n.sha224=n.sha256=n.SHA512_256=n.SHA512_224=n.SHA384=n.SHA512=n.SHA224=n.SHA256=void 0;const r=e("./_md.js"),s=e("./_u64.js"),i=e("./utils.js"),a=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array(64);class c extends r.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|r.SHA256_IV[0],this.B=0|r.SHA256_IV[1],this.C=0|r.SHA256_IV[2],this.D=0|r.SHA256_IV[3],this.E=0|r.SHA256_IV[4],this.F=0|r.SHA256_IV[5],this.G=0|r.SHA256_IV[6],this.H=0|r.SHA256_IV[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=o[e-15],n=o[e-2],r=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(n,17)^(0,i.rotr)(n,19)^n>>>10;o[e]=s+o[e-7]+r+o[e-16]|0}let{A:n,B:s,C:c,D:u,E:l,F:d,G:f,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+(0,r.Chi)(l,d,f)+a[e]+o[e]|0,p=((0,i.rotr)(n,2)^(0,i.rotr)(n,13)^(0,i.rotr)(n,22))+(0,r.Maj)(n,s,c)|0;h=f,f=d,d=l,l=u+t|0,u=c,c=s,s=n,n=t+p|0}n=n+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,s,c,u,l,d,f,h)}roundClean(){(0,i.clean)(o)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,i.clean)(this.buffer)}}n.SHA256=c;class u extends c{constructor(){super(28),this.A=0|r.SHA224_IV[0],this.B=0|r.SHA224_IV[1],this.C=0|r.SHA224_IV[2],this.D=0|r.SHA224_IV[3],this.E=0|r.SHA224_IV[4],this.F=0|r.SHA224_IV[5],this.G=0|r.SHA224_IV[6],this.H=0|r.SHA224_IV[7]}}n.SHA224=u;const l=(()=>s.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),d=(()=>l[0])(),f=(()=>l[1])(),h=new Uint32Array(80),p=new Uint32Array(80);class m extends r.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0|r.SHA512_IV[0],this.Al=0|r.SHA512_IV[1],this.Bh=0|r.SHA512_IV[2],this.Bl=0|r.SHA512_IV[3],this.Ch=0|r.SHA512_IV[4],this.Cl=0|r.SHA512_IV[5],this.Dh=0|r.SHA512_IV[6],this.Dl=0|r.SHA512_IV[7],this.Eh=0|r.SHA512_IV[8],this.El=0|r.SHA512_IV[9],this.Fh=0|r.SHA512_IV[10],this.Fl=0|r.SHA512_IV[11],this.Gh=0|r.SHA512_IV[12],this.Gl=0|r.SHA512_IV[13],this.Hh=0|r.SHA512_IV[14],this.Hl=0|r.SHA512_IV[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:a,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m]}set(e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)h[n]=e.getUint32(t),p[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|h[e-15],n=0|p[e-15],r=s.rotrSH(t,n,1)^s.rotrSH(t,n,8)^s.shrSH(t,n,7),i=s.rotrSL(t,n,1)^s.rotrSL(t,n,8)^s.shrSL(t,n,7),a=0|h[e-2],o=0|p[e-2],c=s.rotrSH(a,o,19)^s.rotrBH(a,o,61)^s.shrSH(a,o,6),u=s.rotrSL(a,o,19)^s.rotrBL(a,o,61)^s.shrSL(a,o,6),l=s.add4L(i,u,p[e-7],p[e-16]),d=s.add4H(l,r,c,h[e-7],h[e-16]);h[e]=0|d,p[e]=0|l}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:o,Cl:c,Dh:u,Dl:l,Eh:m,El:g,Fh:b,Fl:y,Gh:w,Gl:E,Hh:v,Hl:T}=this;for(let e=0;e<80;e++){const t=s.rotrSH(m,g,14)^s.rotrSH(m,g,18)^s.rotrBH(m,g,41),x=s.rotrSL(m,g,14)^s.rotrSL(m,g,18)^s.rotrBL(m,g,41),S=m&b^~m&w,P=g&y^~g&E,k=s.add5L(T,x,P,f[e],p[e]),I=s.add5H(k,v,t,S,d[e],h[e]),A=0|k,_=s.rotrSH(n,r,28)^s.rotrBH(n,r,34)^s.rotrBH(n,r,39),C=s.rotrSL(n,r,28)^s.rotrBL(n,r,34)^s.rotrBL(n,r,39),j=n&i^n&o^i&o,B=r&a^r&c^a&c;v=0|w,T=0|E,w=0|b,E=0|y,b=0|m,y=0|g,({h:m,l:g}=s.add(0|u,0|l,0|I,0|A)),u=0|o,l=0|c,o=0|i,c=0|a,i=0|n,a=0|r;const F=s.add3L(A,C,B);n=s.add3H(F,I,_,j),r=0|F}({h:n,l:r}=s.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:a}=s.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:o,l:c}=s.add(0|this.Ch,0|this.Cl,0|o,0|c)),({h:u,l:l}=s.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:m,l:g}=s.add(0|this.Eh,0|this.El,0|m,0|g)),({h:b,l:y}=s.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:w,l:E}=s.add(0|this.Gh,0|this.Gl,0|w,0|E)),({h:v,l:T}=s.add(0|this.Hh,0|this.Hl,0|v,0|T)),this.set(n,r,i,a,o,c,u,l,m,g,b,y,w,E,v,T)}roundClean(){(0,i.clean)(h,p)}destroy(){(0,i.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}n.SHA512=m;class g extends m{constructor(){super(48),this.Ah=0|r.SHA384_IV[0],this.Al=0|r.SHA384_IV[1],this.Bh=0|r.SHA384_IV[2],this.Bl=0|r.SHA384_IV[3],this.Ch=0|r.SHA384_IV[4],this.Cl=0|r.SHA384_IV[5],this.Dh=0|r.SHA384_IV[6],this.Dl=0|r.SHA384_IV[7],this.Eh=0|r.SHA384_IV[8],this.El=0|r.SHA384_IV[9],this.Fh=0|r.SHA384_IV[10],this.Fl=0|r.SHA384_IV[11],this.Gh=0|r.SHA384_IV[12],this.Gl=0|r.SHA384_IV[13],this.Hh=0|r.SHA384_IV[14],this.Hl=0|r.SHA384_IV[15]}}n.SHA384=g;const b=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),y=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class w extends m{constructor(){super(28),this.Ah=0|b[0],this.Al=0|b[1],this.Bh=0|b[2],this.Bl=0|b[3],this.Ch=0|b[4],this.Cl=0|b[5],this.Dh=0|b[6],this.Dl=0|b[7],this.Eh=0|b[8],this.El=0|b[9],this.Fh=0|b[10],this.Fl=0|b[11],this.Gh=0|b[12],this.Gl=0|b[13],this.Hh=0|b[14],this.Hl=0|b[15]}}n.SHA512_224=w;class E extends m{constructor(){super(32),this.Ah=0|y[0],this.Al=0|y[1],this.Bh=0|y[2],this.Bl=0|y[3],this.Ch=0|y[4],this.Cl=0|y[5],this.Dh=0|y[6],this.Dl=0|y[7],this.Eh=0|y[8],this.El=0|y[9],this.Fh=0|y[10],this.Fl=0|y[11],this.Gh=0|y[12],this.Gl=0|y[13],this.Hh=0|y[14],this.Hl=0|y[15]}}n.SHA512_256=E,n.sha256=(0,i.createHasher)(()=>new c),n.sha224=(0,i.createHasher)(()=>new u),n.sha512=(0,i.createHasher)(()=>new m),n.sha384=(0,i.createHasher)(()=>new g),n.sha512_256=(0,i.createHasher)(()=>new E),n.sha512_224=(0,i.createHasher)(()=>new w)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha2.js"}],[3169,{"./sha2.js":3168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha224=n.SHA224=n.sha256=n.SHA256=void 0;const r=e("./sha2.js");n.SHA256=r.SHA256,n.sha256=r.sha256,n.SHA224=r.SHA224,n.sha224=r.sha224}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha256.js"}],[3170,{"./_u64.js":3160,"./utils.js":3172},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shake256=n.shake128=n.keccak_512=n.keccak_384=n.keccak_256=n.keccak_224=n.sha3_512=n.sha3_384=n.sha3_256=n.sha3_224=n.Keccak=void 0,n.keccakP=w;const r=e("./_u64.js"),s=e("./utils.js"),i=BigInt(0),a=BigInt(1),o=BigInt(2),c=BigInt(7),u=BigInt(256),l=BigInt(113),d=[],f=[],h=[];for(let e=0,t=a,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],d.push(2*(5*r+n)),f.push((e+1)*(e+2)/2%64);let s=i;for(let e=0;e<7;e++)t=(t<<a^(t>>c)*l)%u,t&o&&(s^=a<<(a<<BigInt(e))-a);h.push(s)}const p=(0,r.split)(h,!0),m=p[0],g=p[1],b=(e,t,n)=>n>32?(0,r.rotlBH)(e,t,n):(0,r.rotlSH)(e,t,n),y=(e,t,n)=>n>32?(0,r.rotlBL)(e,t,n):(0,r.rotlSL)(e,t,n);function w(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],a=n[s+1],o=b(i,a,1)^n[r],c=y(i,a,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=f[n],i=b(t,s,r),a=y(t,s,r),o=d[n];t=e[o],s=e[o+1],e[o]=i,e[o+1]=a}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=m[r],e[1]^=g[r]}(0,s.clean)(n)}class E extends s.Hash{constructor(e,t,n,r=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,(0,s.anumber)(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,s.swap32IfBE)(this.state32),w(this.state32,this.rounds),(0,s.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,s.aexists)(this),e=(0,s.toBytes)(e),(0,s.abytes)(e);const{blockLen:t,state:n}=this,r=e.length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,s.aexists)(this,!1),(0,s.abytes)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,s.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,s.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,s.clean)(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new E(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}n.Keccak=E;const v=(e,t,n)=>(0,s.createHasher)(()=>new E(t,e,n));n.sha3_224=v(6,144,28),n.sha3_256=v(6,136,32),n.sha3_384=v(6,104,48),n.sha3_512=v(6,72,64),n.keccak_224=v(1,144,28),n.keccak_256=v(1,136,32),n.keccak_384=v(1,104,48),n.keccak_512=v(1,72,64);const T=(e,t,n)=>(0,s.createXOFer)((r={})=>new E(t,e,r.dkLen===undefined?n:r.dkLen,!0));n.shake128=T(31,168,16),n.shake256=T(31,136,32)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha3.js"}],[3171,{"./sha2.js":3168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha512_256=n.SHA512_256=n.sha512_224=n.SHA512_224=n.sha384=n.SHA384=n.sha512=n.SHA512=void 0;const r=e("./sha2.js");n.SHA512=r.SHA512,n.sha512=r.sha512,n.SHA384=r.SHA384,n.sha384=r.sha384,n.SHA512_224=r.SHA512_224,n.sha512_224=r.sha512_224,n.SHA512_256=r.SHA512_256,n.sha512_256=r.sha512_256}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha512.js"}],[3172,{"@noble/hashes/crypto":3161},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=s,n.anumber=i,n.abytes=a,n.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");i(e.outputLen),i(e.blockLen)},n.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},n.aoutput=function(e,t){a(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},n.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},n.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},n.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},n.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},n.rotr=function(e,t){return e<<32-t|e>>>t},n.rotl=function(e,t){return e<<t|e>>>32-t>>>0},n.byteSwap=o,n.byteSwap32=c,n.bytesToHex=function(e){if(a(e),u)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t},n.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(u)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=f(e.charCodeAt(s)),i=f(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r},n.asyncLoop=async function(e,t,r){let s=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-s;e>=0&&e<t||(await(0,n.nextTick)(),s+=e)}},n.utf8ToBytes=h,n.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},n.toBytes=p,n.kdfInputToBytes=function(e){"string"==typeof e&&(e=h(e));return a(e),e},n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];a(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!=={}.toString.call(t))throw new Error("options should be object or undefined");return Object.assign(e,t)},n.createHasher=m,n.createOptHasher=g,n.createXOFer=b,n.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return Uint8Array.from(r.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")};const r=e("@noble/hashes/crypto");function s(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function a(e,...t){if(!s(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function c(e){for(let t=0;t<e.length;t++)e[t]=o(e[t]);return e}n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],n.swap8IfBE=n.isLE?e=>e:e=>o(e),n.byteSwapIfBE=n.swap8IfBE,n.swap32IfBE=n.isLE?e=>e:c;const u=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const d={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}function h(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function p(e){return"string"==typeof e&&(e=h(e)),a(e),e}n.nextTick=async()=>{};function m(e){const t=t=>e().update(p(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function g(e){const t=(t,n)=>e(n).update(p(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}function b(e){const t=(t,n)=>e(n).update(p(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}n.Hash=class{},n.wrapConstructor=m,n.wrapConstructorWithOpts=g,n.wrapXOFConstructorWithOpts=b}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/utils.js"}],[3177,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function s(e){return e instanceof r(e).Element||e instanceof Element}function i(e){return e instanceof r(e).HTMLElement||e instanceof HTMLElement}function a(e){return"undefined"!=typeof ShadowRoot&&(e instanceof r(e).ShadowRoot||e instanceof ShadowRoot)}Object.defineProperty(n,"__esModule",{value:!0});var o=Math.max,c=Math.min,u=Math.round;function l(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function d(){return!/^((?!chrome|android).)*safari/i.test(l())}function f(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var a=e.getBoundingClientRect(),o=1,c=1;t&&i(e)&&(o=e.offsetWidth>0&&u(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&u(a.height)/e.offsetHeight||1);var l=(s(e)?r(e):window).visualViewport,f=!d()&&n,h=(a.left+(f&&l?l.offsetLeft:0))/o,p=(a.top+(f&&l?l.offsetTop:0))/c,m=a.width/o,g=a.height/c;return{width:m,height:g,top:p,right:h+m,bottom:p+g,left:h,x:h,y:p}}function h(e){var t=r(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function p(e){return e?(e.nodeName||"").toLowerCase():null}function m(e){return((s(e)?e.ownerDocument:e.document)||window.document).documentElement}function g(e){return f(m(e)).left+h(e).scrollLeft}function b(e){return r(e).getComputedStyle(e)}function y(e){var t=b(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function w(e,t,n){void 0===n&&(n=!1);var s,a,o=i(t),c=i(t)&&function(e){var t=e.getBoundingClientRect(),n=u(t.width)/e.offsetWidth||1,r=u(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),l=m(t),d=f(e,c,n),b={scrollLeft:0,scrollTop:0},w={x:0,y:0};return(o||!o&&!n)&&(("body"!==p(t)||y(l))&&(b=(s=t)!==r(s)&&i(s)?{scrollLeft:(a=s).scrollLeft,scrollTop:a.scrollTop}:h(s)),i(t)?((w=f(t,!0)).x+=t.clientLeft,w.y+=t.clientTop):l&&(w.x=g(l))),{x:d.left+b.scrollLeft-w.x,y:d.top+b.scrollTop-w.y,width:d.width,height:d.height}}function E(e){var t=f(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function v(e){return"html"===p(e)?e:e.assignedSlot||e.parentNode||(a(e)?e.host:null)||m(e)}function T(e){return["html","body","#document"].indexOf(p(e))>=0?e.ownerDocument.body:i(e)&&y(e)?e:T(v(e))}function x(e,t){var n;void 0===t&&(t=[]);var s=T(e),i=s===(null==(n=e.ownerDocument)?void 0:n.body),a=r(s),o=i?[a].concat(a.visualViewport||[],y(s)?s:[]):s,c=t.concat(o);return i?c:c.concat(x(v(o)))}function S(e){return["table","td","th"].indexOf(p(e))>=0}function P(e){return i(e)&&"fixed"!==b(e).position?e.offsetParent:null}function k(e){for(var t=r(e),n=P(e);n&&S(n)&&"static"===b(n).position;)n=P(n);return n&&("html"===p(n)||"body"===p(n)&&"static"===b(n).position)?t:n||function(e){var t=/firefox/i.test(l());if(/Trident/i.test(l())&&i(e)&&"fixed"===b(e).position)return null;var n=v(e);for(a(n)&&(n=n.host);i(n)&&["html","body"].indexOf(p(n))<0;){var r=b(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var I="top",A="bottom",_="right",C="left",j="auto",B=[I,A,_,C],F="start",O="end",R="viewport",L="popper",M=B.reduce(function(e,t){return e.concat([t+"-"+F,t+"-"+O])},[]),N=[].concat(B,[j]).reduce(function(e,t){return e.concat([t,t+"-"+F,t+"-"+O])},[]),G=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function D(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||s(e)}),r}function H(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&a(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function U(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function q(e,t,n){return t===R?U(function(e,t){var n=r(e),s=m(e),i=n.visualViewport,a=s.clientWidth,o=s.clientHeight,c=0,u=0;if(i){a=i.width,o=i.height;var l=d();(l||!l&&"fixed"===t)&&(c=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:c+g(e),y:u}}(e,n)):s(t)?function(e,t){var n=f(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):U(function(e){var t,n=m(e),r=h(e),s=null==(t=e.ownerDocument)?void 0:t.body,i=o(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=o(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+g(e),u=-r.scrollTop;return"rtl"===b(s||n).direction&&(c+=o(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:a,x:c,y:u}}(m(e)))}function V(e,t,n,r){var a="clippingParents"===t?function(e){var t=x(v(e)),n=["absolute","fixed"].indexOf(b(e).position)>=0&&i(e)?k(e):e;return s(n)?t.filter(function(e){return s(e)&&H(e,n)&&"body"!==p(e)}):[]}(e):[].concat(t),u=[].concat(a,[n]),l=u[0],d=u.reduce(function(t,n){var s=q(e,n,r);return t.top=o(s.top,t.top),t.right=c(s.right,t.right),t.bottom=c(s.bottom,t.bottom),t.left=o(s.left,t.left),t},q(e,l,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function $(e){return e.split("-")[0]}function z(e){return e.split("-")[1]}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function W(e){var t,n=e.reference,r=e.element,s=e.placement,i=s?$(s):null,a=s?z(s):null,o=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case I:t={x:o,y:n.y-r.height};break;case A:t={x:o,y:n.y+n.height};break;case _:t={x:n.x+n.width,y:c};break;case C:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=i?K(i):null;if(null!=u){var l="y"===u?"height":"width";switch(a){case F:t[u]=t[u]-(n[l]/2-r[l]/2);break;case O:t[u]=t[u]+(n[l]/2-r[l]/2)}}return t}function X(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function J(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function Z(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,c=n.boundary,u=void 0===c?"clippingParents":c,l=n.rootBoundary,d=void 0===l?R:l,h=n.elementContext,p=void 0===h?L:h,g=n.altBoundary,b=void 0!==g&&g,y=n.padding,w=void 0===y?0:y,E=X("number"!=typeof w?w:J(w,B)),v=p===L?"reference":L,T=e.rects.popper,x=e.elements[b?v:p],S=V(s(x)?x:x.contextElement||m(e.elements.popper),u,d,o),P=f(e.elements.reference),k=W({reference:P,element:T,strategy:"absolute",placement:i}),C=U(Object.assign({},T,k)),j=p===L?C:P,F={top:S.top-j.top+E.top,bottom:j.bottom-S.bottom+E.bottom,left:S.left-j.left+E.left,right:j.right-S.right+E.right},O=e.modifiersData.offset;if(p===L&&O){var M=O[i];Object.keys(F).forEach(function(e){var t=[_,A].indexOf(e)>=0?1:-1,n=[I,A].indexOf(e)>=0?"y":"x";F[e]+=M[n]*t})}return F}var Y={placement:"bottom",modifiers:[],strategy:"absolute"};function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function ee(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?Y:i;return function(e,t,n){void 0===n&&(n=a);var i,o,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},u=[],l=!1,d={state:c,setOptions:function(n){var i="function"==typeof n?n(c.options):n;f(),c.options=Object.assign({},a,c.options,i),c.scrollParents={reference:s(e)?x(e):e.contextElement?x(e.contextElement):[],popper:x(t)};var o,l,h=function(e){var t=D(e);return G.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((o=[].concat(r,c.options.modifiers),l=o.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(l).map(function(e){return l[e]})));return c.orderedModifiers=h.filter(function(e){return e.enabled}),c.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var i=s({state:c,name:t,instance:d,options:r}),a=function(){};u.push(i||a)}}),d.update()},forceUpdate:function(){if(!l){var e=c.elements,t=e.reference,n=e.popper;if(Q(t,n)){c.rects={reference:w(t,k(n),"fixed"===c.options.strategy),popper:E(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(e){return c.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<c.orderedModifiers.length;r++)if(!0!==c.reset){var s=c.orderedModifiers[r],i=s.fn,a=s.options,o=void 0===a?{}:a,u=s.name;"function"==typeof i&&(c=i({state:c,options:o,name:u,instance:d})||c)}else c.reset=!1,r=-1}}},update:(i=function(){return new Promise(function(e){d.forceUpdate(),e(c)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=undefined,e(i())})})),o}),destroy:function(){f(),l=!0}};if(!Q(e,t))return d;function f(){u.forEach(function(e){return e()}),u=[]}return d.setOptions(n).then(function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)}),d}}var te={passive:!0};var ne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,s=e.options,i=s.scroll,a=void 0===i||i,o=s.resize,c=void 0===o||o,u=r(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach(function(e){e.addEventListener("scroll",n.update,te)}),c&&u.addEventListener("resize",n.update,te),function(){a&&l.forEach(function(e){e.removeEventListener("scroll",n.update,te)}),c&&u.removeEventListener("resize",n.update,te)}},data:{}};var re={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=W({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},se={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ie(e){var t,n=e.popper,s=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,c=e.position,l=e.gpuAcceleration,d=e.adaptive,f=e.roundOffsets,h=e.isFixed,p=o.x,g=void 0===p?0:p,y=o.y,w=void 0===y?0:y,E="function"==typeof f?f({x:g,y:w}):{x:g,y:w};g=E.x,w=E.y;var v=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),x=C,S=I,P=window;if(d){var j=k(n),B="clientHeight",F="clientWidth";if(j===r(n)&&"static"!==b(j=m(n)).position&&"absolute"===c&&(B="scrollHeight",F="scrollWidth"),i===I||(i===C||i===_)&&a===O)S=A,w-=(h&&j===P&&P.visualViewport?P.visualViewport.height:j[B])-s.height,w*=l?1:-1;if(i===C||(i===I||i===A)&&a===O)x=_,g-=(h&&j===P&&P.visualViewport?P.visualViewport.width:j[F])-s.width,g*=l?1:-1}var R,L=Object.assign({position:c},d&&se),M=!0===f?function(e,t){var n=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:u(n*s)/s||0,y:u(r*s)/s||0}}({x:g,y:w},r(n)):{x:g,y:w};return g=M.x,w=M.y,l?Object.assign({},L,((R={})[S]=T?"0":"",R[x]=v?"0":"",R.transform=(P.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",R)):Object.assign({},L,((t={})[S]=T?w+"px":"",t[x]=v?g+"px":"",t.transform="",t))}var ae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,i=n.adaptive,a=void 0===i||i,o=n.roundOffsets,c=void 0===o||o,u={placement:$(t.placement),variation:z(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ie(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ie(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];i(s)&&p(s)&&(Object.assign(s.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],s=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});i(r)&&p(r)&&(Object.assign(r.style,a),Object.keys(s).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};var ce={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.offset,i=void 0===s?[0,0]:s,a=N.reduce(function(e,n){return e[n]=function(e,t,n){var r=$(e),s=[C,I].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*s,[C,_].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,i),e},{}),o=a[t.placement],c=o.x,u=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}},ue={left:"right",right:"left",bottom:"top",top:"bottom"};function le(e){return e.replace(/left|right|bottom|top/g,function(e){return ue[e]})}var de={start:"end",end:"start"};function fe(e){return e.replace(/start|end/g,function(e){return de[e]})}function he(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?N:c,l=z(r),d=l?o?M:M.filter(function(e){return z(e)===l}):B,f=d.filter(function(e){return u.indexOf(e)>=0});0===f.length&&(f=d);var h=f.reduce(function(t,n){return t[n]=Z(e,{placement:n,boundary:s,rootBoundary:i,padding:a})[$(n)],t},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}var pe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,i=void 0===s||s,a=n.altAxis,o=void 0===a||a,c=n.fallbackPlacements,u=n.padding,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,b=$(g),y=c||(b===g||!p?[le(g)]:function(e){if($(e)===j)return[];var t=le(e);return[fe(e),t,fe(t)]}(g)),w=[g].concat(y).reduce(function(e,n){return e.concat($(n)===j?he(t,{placement:n,boundary:l,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)},[]),E=t.rects.reference,v=t.rects.popper,T=new Map,x=!0,S=w[0],P=0;P<w.length;P++){var k=w[P],B=$(k),O=z(k)===F,R=[I,A].indexOf(B)>=0,L=R?"width":"height",M=Z(t,{placement:k,boundary:l,rootBoundary:d,altBoundary:f,padding:u}),N=R?O?_:C:O?A:I;E[L]>v[L]&&(N=le(N));var G=le(N),D=[];if(i&&D.push(M[B]<=0),o&&D.push(M[N]<=0,M[G]<=0),D.every(function(e){return e})){S=k,x=!1;break}T.set(k,D)}if(x)for(var H=function(e){var t=w.find(function(t){var n=T.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},U=p?3:1;U>0;U--){if("break"===H(U))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function me(e,t,n){return o(e,c(t,n))}var ge={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,i=void 0===s||s,a=n.altAxis,u=void 0!==a&&a,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.padding,p=n.tether,m=void 0===p||p,g=n.tetherOffset,b=void 0===g?0:g,y=Z(t,{boundary:l,rootBoundary:d,padding:h,altBoundary:f}),w=$(t.placement),v=z(t.placement),T=!v,x=K(w),S="x"===x?"y":"x",P=t.modifiersData.popperOffsets,j=t.rects.reference,B=t.rects.popper,O="function"==typeof b?b(Object.assign({},t.rects,{placement:t.placement})):b,R="number"==typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(P){if(i){var N,G="y"===x?I:C,D="y"===x?A:_,H="y"===x?"height":"width",U=P[x],q=U+y[G],V=U-y[D],W=m?-B[H]/2:0,X=v===F?j[H]:B[H],J=v===F?-B[H]:-j[H],Y=t.elements.arrow,Q=m&&Y?E(Y):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[G],ne=ee[D],re=me(0,j[H],Q[H]),se=T?j[H]/2-W-re-te-R.mainAxis:X-re-te-R.mainAxis,ie=T?-j[H]/2+W+re+ne+R.mainAxis:J+re+ne+R.mainAxis,ae=t.elements.arrow&&k(t.elements.arrow),oe=ae?"y"===x?ae.clientTop||0:ae.clientLeft||0:0,ce=null!=(N=null==L?void 0:L[x])?N:0,ue=U+ie-ce,le=me(m?c(q,U+se-ce-oe):q,U,m?o(V,ue):V);P[x]=le,M[x]=le-U}if(u){var de,fe="x"===x?I:C,he="x"===x?A:_,pe=P[S],ge="y"===S?"height":"width",be=pe+y[fe],ye=pe-y[he],we=-1!==[I,C].indexOf(w),Ee=null!=(de=null==L?void 0:L[S])?de:0,ve=we?be:pe-j[ge]-B[ge]-Ee+R.altAxis,Te=we?pe+j[ge]+B[ge]-Ee-R.altAxis:ye,xe=m&&we?function(e,t,n){var r=me(e,t,n);return r>n?n:r}(ve,pe,Te):me(m?ve:be,pe,m?Te:ye);P[S]=xe,M[S]=xe-pe}t.modifiersData[r]=M}},requiresIfExists:["offset"]};var be={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,s=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=$(n.placement),c=K(o),u=[C,_].indexOf(o)>=0?"height":"width";if(i&&a){var l=function(e,t){return X("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:J(e,B))}(s.padding,n),d=E(i),f="y"===c?I:C,h="y"===c?A:_,p=n.rects.reference[u]+n.rects.reference[c]-a[c]-n.rects.popper[u],m=a[c]-n.rects.reference[c],g=k(i),b=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,w=l[f],v=b-d[u]-l[h],T=b/2-d[u]/2+y,x=me(w,T,v),S=c;n.modifiersData[r]=((t={})[S]=x,t.centerOffset=x-T,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&H(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ye(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function we(e){return[I,_,A,C].some(function(t){return e[t]>=0})}var Ee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,a=Z(t,{elementContext:"reference"}),o=Z(t,{altBoundary:!0}),c=ye(a,r),u=ye(o,s,i),l=we(c),d=we(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":d})}},ve=ee({defaultModifiers:[ne,re,ae,oe]}),Te=[ne,re,ae,oe,ce,pe,ge,be,Ee],xe=ee({defaultModifiers:Te});n.applyStyles=oe,n.arrow=be,n.computeStyles=ae,n.createPopper=xe,n.createPopperLite=ve,n.defaultModifiers=Te,n.detectOverflow=Z,n.eventListeners=ne,n.flip=pe,n.hide=Ee,n.offset=ce,n.popperGenerator=ee,n.popperOffsets=re,n.preventOverflow=ge}}},{package:"@popperjs/core",file:"node_modules/@popperjs/core/dist/cjs/popper.js"}],[3178,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=new Array(arguments.length-1),r=0,s=2,i=!0;for(;s<arguments.length;)n[r++]=arguments[s++];return new Promise(function(s,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];s.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,a(e))}})}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/aspromise",file:"node_modules/@protobufjs/aspromise/index.js"}],[3179,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var s=new Array(64),i=new Array(123),a=0;a<64;)i[s[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,n){for(var r,i=null,a=[],o=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[o++]=s[u>>2],r=(3&u)<<4,c=1;break;case 1:a[o++]=s[r|u>>4],r=(15&u)<<2,c=2;break;case 2:a[o++]=s[r|u>>6],a[o++]=s[63&u],c=0}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0)}return c&&(a[o++]=s[r],a[o++]=61,1===c&&(a[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var o="invalid encoding";r.decode=function(e,t,n){for(var r,s=n,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if((u=i[u])===undefined)throw Error(o);switch(a){case 0:r=u,a=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error(o);return n-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/base64",file:"node_modules/@protobufjs/base64/index.js"}],[3180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function s(e){if("string"!=typeof e){var t=i();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),o=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)o[u]=a[u],c[u]=e[a[u++]];return o[u]=t,Function.apply(null,o).apply(null,c)}return Function(t)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var n=l[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"}),d!==l.length)throw Error("parameter count mismatch");return n.push(e),s}function i(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return s.toString=i,s}t.exports=r,r.verbose=!1}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/codegen",file:"node_modules/@protobufjs/codegen/index.js"}],[3181,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/eventemitter",file:"node_modules/@protobufjs/eventemitter/index.js"}],[3182,{"@protobufjs/aspromise":3178,"@protobufjs/inquire":3184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("@protobufjs/aspromise"),s=e("@protobufjs/inquire")("fs");function i(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&s&&s.readFile?s.readFile(e,function(r,s){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,n):r?n(r):n(null,t.binary?s:s.toString("utf8"))}):i.xhr(e,t,n):r(i,this,e,t)}i.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var s=0;s<r.responseText.length;++s)e.push(255&r.responseText.charCodeAt(s))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/fetch",file:"node_modules/@protobufjs/fetch/index.js"}],[3183,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3]}function i(e,r,s){t[0]=e,r[s]=n[3],r[s+1]=n[2],r[s+2]=n[1],r[s+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function o(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?s:i,e.writeFloatBE=r?i:s,e.readFloatLE=r?a:o,e.readFloatBE=r?o:a}():function(){function t(e,t,n,r){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((s<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),s=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:s*Infinity:0===i?1401298464324817e-60*s*a:s*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,s),e.writeFloatBE=t.bind(null,i),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3],r[s+4]=n[4],r[s+5]=n[5],r[s+6]=n[6],r[s+7]=n[7]}function i(e,r,s){t[0]=e,r[s]=n[7],r[s+1]=n[6],r[s+2]=n[5],r[s+3]=n[4],r[s+4]=n[3],r[s+5]=n[2],r[s+6]=n[1],r[s+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function o(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?s:i,e.writeDoubleBE=r?i:s,e.readDoubleLE=r?a:o,e.readDoubleBE=r?o:a}():function(){function t(e,t,n,r,s,i){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,s,i+t),e(1/r>0?0:2147483648,s,i+n);else if(isNaN(r))e(0,s,i+t),e(2146959360,s,i+n);else if(r>17976931348623157e292)e(0,s,i+t),e((a<<31|2146435072)>>>0,s,i+n);else{var o;if(r<22250738585072014e-324)e((o=r/5e-324)>>>0,s,i+t),e((a<<31|o/4294967296)>>>0,s,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(o=r*Math.pow(2,-c))>>>0,s,i+t),e((a<<31|c+1023<<20|1048576*o&1048575)>>>0,s,i+n)}}}function n(e,t,n,r,s){var i=e(r,s+t),a=e(r,s+n),o=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:o*Infinity:0===c?5e-324*o*u:o*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,s,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,o,4,0)}(),e}function s(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/float",file:"node_modules/@protobufjs/float/index.js"}],[3184,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){try{var t=(0,eval)("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/inquire",file:"node_modules/@protobufjs/inquire/index.js"}],[3185,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n,s=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=s(e),r="";n&&(r=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):n?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=i(t)),s(t)?t:(n||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/path",file:"node_modules/@protobufjs/path/index.js"}],[3186,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){var r=n||8192,s=r>>>1,i=null,a=r;return function(n){if(n<1||n>s)return e(n);a+n>r&&(i=e(r),a=0);var o=t.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),o}}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/pool",file:"node_modules/@protobufjs/pool/index.js"}],[3187,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,s=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))},r.write=function(e,t,n){for(var r,s,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&s),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/utf8",file:"node_modules/@protobufjs/utf8/index.js"}],[3188,{"./redux-toolkit.cjs.development.js":3189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./redux-toolkit.cjs.development.js")}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/index.js"}],[3189,{_process:5089,immer:4616,redux:5300,"redux-thunk":5299,reselect:3191},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s=this&&this.__define||function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]},i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){s(this,constructor,e)}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__generator||function(e,t){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e},c=Object.create,u=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,y=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=function(e,t){for(var n in t||(t={}))g.call(t,n)&&y(e,n,t[n]);if(p)for(var r=0,s=p(t);r<s.length;r++){n=s[r];b.call(t,n)&&y(e,n,t[n])}return e},E=function(e,t){return l(e,f(t))},v=function(e){return u(e,"__esModule",{value:!0})},T=function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r=function(r){g.call(e,r)||"default"===r||u(e,r,{get:function(){return t[r]},enumerable:!(n=d(t,r))||n.enumerable})},s=0,i=h(t);s<i.length;s++){r(i[s])}return e},x=function(e){return T(v(u(null!=e?c(m(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},S=function(e,t,n){return new Promise(function(r,s){var i=function(e){try{o(n.next(e))}catch(e){s(e)}},a=function(e){try{o(n.throw(e))}catch(e){s(e)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};o((n=n.apply(e,t)).next())})};v(n),function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(n,{EnhancerArray:function(){return K},MiddlewareArray:function(){return z},SHOULD_AUTOBATCH:function(){return vt},TaskAbortError:function(){return et},addListener:function(){return mt},autoBatchEnhancer:function(){return kt},clearAllListeners:function(){return gt},configureStore:function(){return de},createAction:function(){return M},createActionCreatorInvariantMiddleware:function(){return q},createAsyncThunk:function(){return Ce},createDraftSafeSelector:function(){return C},createEntityAdapter:function(){return Se},createImmutableStateInvariantMiddleware:function(){return re},createListenerMiddleware:function(){return wt},createNextState:function(){return k.default},createReducer:function(){return me},createSelector:function(){return I.createSelector},createSerializableStateInvariantMiddleware:function(){return oe},createSlice:function(){return be},current:function(){return k.current},findNonSerializableValue:function(){return ie},freeze:function(){return k.freeze},getDefaultMiddleware:function(){return ue},getType:function(){return U},isAction:function(){return N},isActionCreator:function(){return G},isAllOf:function(){return Oe},isAnyOf:function(){return Fe},isAsyncThunkAction:function(){return He},isDraft:function(){return k.isDraft},isFluxStandardAction:function(){return D},isFulfilled:function(){return De},isImmutableDefault:function(){return Q},isPending:function(){return Me},isPlain:function(){return se},isPlainObject:function(){return O},isRejected:function(){return Ne},isRejectedWithValue:function(){return Ge},miniSerializeError:function(){return _e},nanoid:function(){return Pe},original:function(){return k.original},prepareAutoBatched:function(){return Tt},removeListener:function(){return bt},unwrapResult:function(){return je}});var P=x(e("immer"));T(n,x(e("redux")));var k=x(e("immer")),I=x(e("reselect")),A=x(e("immer")),_=x(e("reselect")),C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_.createSelector.apply(void 0,e);return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,o([(0,A.isDraft)(e)?(0,A.current)(e):e],t))}},j=x(e("redux")),B=x(e("redux")),F="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?B.compose:B.compose.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function O(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var R=x(e("redux-thunk")),L=function(e){return e&&"function"==typeof e.match};function M(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var s=t.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return w(w({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function N(e){return O(e)&&"type"in e}function G(e){return"function"==typeof e&&"type"in e&&L(e)}function D(e){return N(e)&&"string"==typeof e.type&&Object.keys(e).every(H)}function H(e){return["type","payload","error","meta"].indexOf(e)>-1}function U(e){return""+e}function q(e){void 0===e&&(e={});var t=e.isActionCreator,n=void 0===t?G:t;return function(){return function(e){return function(t){var r,s,i;return n(t)&&console.warn((r=t.type,s=r?(""+r).split("/"):[],i=s[s.length-1]||"actionCreator",'Detected an action creator with type "'+(r||"unknown")+"\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. `dispatch("+i+"())` instead of `dispatch("+i+")`. This is necessary even if the action has no payload.")),e(t)}}}}var V=x(e("immer"));function $(e,t){var n=0;return{measureTime:function(e){var t=Date.now();try{return e()}finally{var r=Date.now();n+=r-t}},warnIfExceeded:function(){n>e&&console.warn(t+" took "+n+"ms, which is more than the warning threshold of "+e+"ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.")}}}var z=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)}),s(t.prototype,"prepend",function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))}),t}(Array),K=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)}),s(t.prototype,"prepend",function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))}),t}(Array);function W(e){return(0,V.isDraftable)(e)?(0,V.default)(e,function(){}):e}var X=!1,J="Invariant failed";function Z(e,t){if(!e){if(X)throw new Error(J);throw new Error(J+": "+(t||""))}}function Y(e,t,n,r){return JSON.stringify(e,function(e,t){var n=[],r=[];t||(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"});return function(s,i){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,Infinity,s):r.push(s),~n.indexOf(i)&&(i=t.call(this,s,i))}else n.push(i);return null==e?i:e.call(this,s,i)}}(t,r),n)}function Q(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function ee(e,t,n){var r=te(e,t,n);return{detectMutations:function(){return ne(e,t,r,n)}}}function te(e,t,n,r,s){void 0===t&&(t=[]),void 0===r&&(r=""),void 0===s&&(s=new Set);var i={value:n};if(!e(n)&&!s.has(n))for(var a in s.add(n),i.children={},n){var o=r?r+"."+a:a;t.length&&-1!==t.indexOf(o)||(i.children[a]=te(e,t,n[a],o))}return i}function ne(e,t,n,r,s,i){void 0===t&&(t=[]),void 0===s&&(s=!1),void 0===i&&(i="");var a=n?n.value:void 0,o=a===r;if(s&&!o&&!Number.isNaN(r))return{wasMutated:!0,path:i};if(e(a)||e(r))return{wasMutated:!1};var c={};for(var u in n.children)c[u]=!0;for(var u in r)c[u]=!0;var l=t.length>0,d=function(s){var a=i?i+"."+s:s;if(l&&t.some(function(e){return e instanceof RegExp?e.test(a):a===e}))return"continue";var c=ne(e,t,n.children[s],r[s],o,a);if(c.wasMutated)return{value:c}};for(var u in c){var f=d(u);if("object"==typeof f)return f.value}return{wasMutated:!1}}function re(e){void 0===e&&(e={});var t=e.isImmutable,n=void 0===t?Q:t,r=e.ignoredPaths,s=e.warnAfter,i=void 0===s?32:s,a=e.ignore;r=r||a;var o=ee.bind(null,n,r);return function(e){var t,n=e.getState,r=n(),s=o(r);return function(e){return function(a){var c=$(i,"ImmutableStateInvariantMiddleware");c.measureTime(function(){r=n(),t=s.detectMutations(),s=o(r),Z(!t.wasMutated,"A state mutation was detected between dispatches, in the path '"+(t.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")});var u=e(a);return c.measureTime(function(){r=n(),t=s.detectMutations(),s=o(r),t.wasMutated&&Z(!t.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(t.path||"")+". Take a look at the reducer(s) handling the action "+Y(a)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}),c.warnIfExceeded(),u}}}}function se(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||O(e)}function ie(e,t,n,r,s,i){var a;if(void 0===t&&(t=""),void 0===n&&(n=se),void 0===s&&(s=[]),!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==i?void 0:i.has(e))return!1;for(var o=null!=r?r(e):Object.entries(e),c=s.length>0,u=function(e,o){var u=t?t+"."+e:e;if(c&&s.some(function(e){return e instanceof RegExp?e.test(u):u===e}))return"continue";return n(o)?"object"==typeof o&&(a=ie(o,u,n,r,s,i))?{value:a}:void 0:{value:{keyPath:u,value:o}}},l=0,d=o;l<d.length;l++){var f=d[l],h=u(f[0],f[1]);if("object"==typeof h)return h.value}return i&&ae(e)&&i.add(e),!1}function ae(e){if(!Object.isFrozen(e))return!1;for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if("object"==typeof r&&null!==r&&!ae(r))return!1}return!0}function oe(e){void 0===e&&(e={});var t=e.isSerializable,n=void 0===t?se:t,r=e.getEntries,s=e.ignoredActions,i=void 0===s?[]:s,a=e.ignoredActionPaths,o=void 0===a?["meta.arg","meta.baseQueryMeta"]:a,c=e.ignoredPaths,u=void 0===c?[]:c,l=e.warnAfter,d=void 0===l?32:l,f=e.ignoreState,h=void 0!==f&&f,p=e.ignoreActions,m=void 0!==p&&p,g=e.disableCache,b=!(void 0!==g&&g)&&WeakSet?new WeakSet:void 0;return function(e){return function(t){return function(s){var a=t(s),c=$(d,"SerializableStateInvariantMiddleware");return m||i.length&&-1!==i.indexOf(s.type)||c.measureTime(function(){var e=ie(s,"",n,r,o,b);if(e){var t=e.keyPath,i=e.value;console.error("A non-serializable value was detected in an action, in the path: `"+t+"`. Value:",i,"\nTake a look at the logic that dispatched this action: ",s,"\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)","\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)")}}),h||(c.measureTime(function(){var t=ie(e.getState(),"",n,r,u,b);if(t){var i=t.keyPath,a=t.value;console.error("A non-serializable value was detected in the state, in the path: `"+i+"`. Value:",a,"\nTake a look at the reducer(s) handling this action type: "+s.type+".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)")}}),c.warnIfExceeded()),a}}}}function ce(e){return"boolean"==typeof e}function ue(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=e.immutableCheck,s=void 0===r||r,i=e.serializableCheck,a=void 0===i||i,o=e.actionCreatorCheck,c=void 0===o||o,u=new z;if(n&&(ce(n)?u.push(R.default):u.push(R.default.withExtraArgument(n.extraArgument))),s){var l={};ce(s)||(l=s),u.unshift(re(l))}if(a){var d={};ce(a)||(d=a),u.push(oe(d))}if(c){var f={};ce(c)||(f=c),u.unshift(q(f))}return u}var le=!1;function de(e){var t,n=function(e){return ue(e)},r=e||{},s=r.reducer,i=void 0===s?void 0:s,a=r.middleware,c=void 0===a?n():a,u=r.devTools,l=void 0===u||u,d=r.preloadedState,f=void 0===d?void 0:d,h=r.enhancers,p=void 0===h?void 0:h;if("function"==typeof i)t=i;else{if(!O(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,j.combineReducers)(i)}var m=c;if("function"==typeof m&&(m=m(n),!le&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!le&&m.some(function(e){return"function"!=typeof e}))throw new Error("each middleware provided to configureStore must be a function");var g=j.applyMiddleware.apply(void 0,m),b=j.compose;l&&(b=F(w({trace:!le},"object"==typeof l&&l)));var y=new K(g),E=y;Array.isArray(p)?E=o([g],p):"function"==typeof p&&(E=p(y));var v=b.apply(void 0,E);return(0,j.createStore)(t,f,v)}var fe=x(e("immer"));function he(e){var t,n={},r=[],s={addCase:function(e,i){if(r.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`");var a="string"==typeof e?e:e.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[a]=i,s},addMatcher:function(e,n){if(t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return r.push({matcher:e,reducer:n}),s},addDefaultCase:function(e){if(t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,s}};return e(s),[n,r,t]}var pe=!1;function me(e,t,n,r){void 0===n&&(n=[]),"object"==typeof t&&(pe||(pe=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var s,i="function"==typeof t?he(t):[t,n,r],a=i[0],c=i[1],u=i[2];if("function"==typeof e)s=function(){return W(e())};else{var l=W(e);s=function(){return l}}function d(e,t){void 0===e&&(e=s());var n=o([a[t.type]],c.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[u]),n.reduce(function(e,n){if(n){var r;if((0,fe.isDraft)(e))return void 0===(r=n(e,t))?e:r;if((0,fe.isDraftable)(e))return(0,fe.default)(e,function(e){return n(e,t)});if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return d.getInitialState=s,d}var ge=!1;function be(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");void 0!==t&&void 0===e.initialState&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var r,s="function"==typeof e.initialState?e.initialState:W(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},c={},u={};function l(){"object"==typeof e.extraReducers&&(ge||(ge=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var t="function"==typeof e.extraReducers?he(e.extraReducers):[e.extraReducers],n=t[0],r=void 0===n?{}:n,i=t[1],a=void 0===i?[]:i,o=t[2],u=void 0===o?void 0:o,l=w(w({},r),c);return me(s,function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=a;n<r.length;n++){var s=r[n];e.addMatcher(s.matcher,s.reducer)}u&&e.addDefaultCase(u)})}return a.forEach(function(e){var t,r,s=i[e],a=n+"/"+e;"reducer"in s?(t=s.reducer,r=s.prepare):t=s,o[e]=t,c[a]=t,u[e]=r?M(a,r):M(a)}),{name:n,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:o,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}var ye=x(e("immer"));function we(e){return function(t,n){var r=function(t){D(n)?e(n.payload,t):e(n,t)};return(0,ye.isDraft)(t)?(r(t),t):(0,ye.default)(t,r)}}function Ee(e,t){var n=t(e);return void 0===n&&console.warn("The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function ve(e){return Array.isArray(e)||(e=Object.values(e)),e}function Te(e,t,n){for(var r=[],s=[],i=0,a=e=ve(e);i<a.length;i++){var o=a[i],c=Ee(o,t);c in n.entities?s.push({id:c,changes:o}):r.push(o)}return[r,s]}function xe(e){function t(t,n){var r=Ee(t,e);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function n(e,n){for(var r=0,s=e=ve(e);r<s.length;r++){t(s[r],n)}}function r(t,n){var r=Ee(t,e);r in n.entities||n.ids.push(r),n.entities[r]=t}function s(e,t){var n=!1;e.forEach(function(e){e in t.entities&&(delete t.entities[e],n=!0)}),n&&(t.ids=t.ids.filter(function(e){return e in t.entities}))}function i(t,n){var r={},s={};if(t.forEach(function(e){e.id in n.entities&&(s[e.id]={id:e.id,changes:w(w({},s[e.id]?s[e.id].changes:null),e.changes)})}),(t=Object.values(s)).length>0){var i=t.filter(function(t){return function(t,n,r){var s=r.entities[n.id],i=Object.assign({},s,n.changes),a=Ee(i,e),o=a!==n.id;return o&&(t[n.id]=a,delete r.entities[n.id]),r.entities[a]=i,o}(r,t,n)}).length>0;i&&(n.ids=Object.keys(n.entities))}}function a(t,r){var s=Te(t,e,r),a=s[0];i(s[1],r),n(a,r)}return{removeAll:(o=function(e){Object.assign(e,{ids:[],entities:{}})},c=we(function(e,t){return o(t)}),function(e){return c(e,void 0)}),addOne:we(t),addMany:we(n),setOne:we(r),setMany:we(function(e,t){for(var n=0,s=e=ve(e);n<s.length;n++){r(s[n],t)}}),setAll:we(function(e,t){e=ve(e),t.ids=[],t.entities={},n(e,t)}),updateOne:we(function(e,t){return i([e],t)}),updateMany:we(i),upsertOne:we(function(e,t){return a([e],t)}),upsertMany:we(a),removeOne:we(function(e,t){return s([e],t)}),removeMany:we(s)};var o,c}function Se(e){void 0===e&&(e={});var t=w({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,r=t.sortComparer,s={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},r=C(t,n,function(e,t){return e.map(function(e){return t[e]})}),s=function(e,t){return t},i=function(e,t){return e[t]},a=C(t,function(e){return e.length});if(!e)return{selectIds:t,selectEntities:n,selectAll:r,selectTotal:a,selectById:C(n,s,i)};var o=C(e,n);return{selectIds:C(e,t),selectEntities:o,selectAll:C(e,r),selectTotal:C(e,a),selectById:C(o,s,i)}}},a=r?function(e,t){var n=xe(e);function r(t,n){var r=(t=ve(t)).filter(function(t){return!(Ee(t,e)in n.entities)});0!==r.length&&o(r,n)}function s(e,t){0!==(e=ve(e)).length&&o(e,t)}function i(t,n){for(var r=!1,s=0,i=t;s<i.length;s++){var a=i[s],o=n.entities[a.id];if(o){r=!0,Object.assign(o,a.changes);var u=e(o);a.id!==u&&(delete n.entities[a.id],n.entities[u]=o)}}r&&c(n)}function a(t,n){var s=Te(t,e,n),a=s[0];i(s[1],n),r(a,n)}function o(t,n){t.forEach(function(t){n.entities[e(t)]=t}),c(n)}function c(n){var r=Object.values(n.entities);r.sort(t);var s=r.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!1;return!0})(n.ids,s)||(n.ids=s)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:we(function(e,t){return r([e],t)}),updateOne:we(function(e,t){return i([e],t)}),upsertOne:we(function(e,t){return a([e],t)}),setOne:we(function(e,t){return s([e],t)}),setMany:we(s),setAll:we(function(e,t){e=ve(e),t.entities={},t.ids=[],r(e,t)}),addMany:we(r),updateMany:we(i),upsertMany:we(a)}}(n,r):xe(n);return w(w(w({selectId:n,sortComparer:r},s),i),a)}var Pe=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ke=["name","message","stack","code"],Ie=function(e,t){this.payload=e,this.meta=t},Ae=function(e,t){this.payload=e,this.meta=t},_e=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=ke;n<r.length;n++){var s=r[n];"string"==typeof e[s]&&(t[s]=e[s])}return t}return{message:String(e)}},Ce=function(){function e(e,t,n){var r=M(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:E(w({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),s=M(e+"/pending",function(e,t,n){return{payload:void 0,meta:E(w({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),i=M(e+"/rejected",function(e,t,r,s,i){return{payload:s,error:(n&&n.serializeError||_e)(e||"Rejected"),meta:E(w({},i||{}),{arg:r,requestId:t,rejectedWithValue:!!s,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),o=!1,c="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},e}();return Object.assign(function(e){return function(o,u,l){var d,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Pe(),h=new c;function p(e){d=e,h.abort()}var m=function(){return S(this,null,function(){var c,m,g,b,y,w;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),b=null==(c=null==n?void 0:n.condition)?void 0:c.call(n,e,{getState:u,extra:l}),null===(E=b)||"object"!=typeof E||"function"!=typeof E.then?[3,2]:[4,b];case 1:b=a.sent(),a.label=2;case 2:if(!1===b||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return h.signal.addEventListener("abort",function(){return t({name:"AbortError",message:d||"Aborted"})})}),o(s(f,e,null==(m=null==n?void 0:n.getPendingMeta)?void 0:m.call(n,{requestId:f,arg:e},{getState:u,extra:l}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:o,getState:u,extra:l,requestId:f,signal:h.signal,abort:p,rejectWithValue:function(e,t){return new Ie(e,t)},fulfillWithValue:function(e,t){return new Ae(e,t)}})).then(function(t){if(t instanceof Ie)throw t;return t instanceof Ae?r(t.payload,f,e,t.meta):r(t,f,e)})])];case 3:return g=a.sent(),[3,5];case 4:return w=a.sent(),g=w instanceof Ie?i(null,f,e,w.payload,w.meta):i(w,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(g)&&g.meta.condition||o(g),[2,g]}var E})})}();return Object.assign(m,{abort:p,requestId:f,arg:e,unwrap:function(){return m.then(je)}})}},{pending:s,rejected:i,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function je(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Be=function(e,t){return L(e)?e.match(t):e(t)};function Fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some(function(e){return Be(e,t)})}}function Oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every(function(e){return Be(e,t)})}}function Re(e,t){if(!e||!e.meta)return!1;var n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function Le(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Re(e,["pending"])}:Le(e)?function(t){var n=e.map(function(e){return e.pending});return Fe.apply(void 0,n)(t)}:Me()(e[0])}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Re(e,["rejected"])}:Le(e)?function(t){var n=e.map(function(e){return e.rejected});return Fe.apply(void 0,n)(t)}:Ne()(e[0])}function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||Le(e)?function(t){return Oe(Ne.apply(void 0,e),n)(t)}:Ge()(e[0])}function De(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Re(e,["fulfilled"])}:Le(e)?function(t){var n=e.map(function(e){return e.fulfilled});return Fe.apply(void 0,n)(t)}:De()(e[0])}function He(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Re(e,["pending","fulfilled","rejected"])}:Le(e)?function(t){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];n.push(i.pending,i.rejected,i.fulfilled)}return Fe.apply(void 0,n)(t)}:He()(e[0])}var Ue=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},qe=function(){},Ve=function(e,t){return void 0===t&&(t=qe),e.catch(t),e},$e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},ze=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ke="listener",We="completed",Xe="cancelled",Je="task-"+Xe,Ze="task-"+We,Ye=Ke+"-"+Xe,Qe=Ke+"-"+We,et=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+Xe+" (reason: "+e+")"},tt=function(e){if(e.aborted)throw new et(e.reason)};function nt(e,t){var n=qe;return new Promise(function(r,s){var i=function(){return s(new et(e.reason))};e.aborted?i():(n=$e(e,i),t.finally(function(){return n()}).then(r,s))}).finally(function(){n=qe})}var rt=function(e){return function(t){return Ve(nt(e,t).then(function(t){return tt(e),t}))}},st=function(e){var t=rt(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},it=Object.assign,at={},ot="listenerMiddleware",ct=function(e,t){return function(n,r){Ue(n,"taskExecutor");var s,i=new AbortController;s=i,$e(e,function(){return ze(s,e.reason)});var o,c,u=(o=function(){return S(void 0,null,function(){var t;return a(this,function(r){switch(r.label){case 0:return tt(e),tt(i.signal),[4,n({pause:rt(i.signal),delay:st(i.signal),signal:i.signal})];case 1:return t=r.sent(),tt(i.signal),[2,t]}})})},c=function(){return ze(i,Ze)},S(void 0,null,function(){var e;return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,o()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof et?"cancelled":"rejected",error:e}];case 4:return null==c||c(),[7];case 5:return[2]}})}));return(null==r?void 0:r.autoJoin)&&t.push(u),{result:rt(e)(u),cancel:function(){ze(i,Je)}}}},ut=function(e,t){return function(n,r){return Ve(function(n,r){return S(void 0,null,function(){var s,i,o,c;return a(this,function(a){switch(a.label){case 0:tt(t),s=function(){},i=new Promise(function(t,r){var i=e({predicate:n,effect:function(e,n){n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});s=function(){i(),r()}}),o=[i],null!=r&&o.push(new Promise(function(e){return setTimeout(e,r,null)})),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,nt(t,Promise.race(o))];case 2:return c=a.sent(),tt(t),[2,c];case 3:return s(),[7];case 4:return[2]}})})}(n,r))}},lt=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,s=e.predicate,i=e.effect;if(t)s=M(t).match;else if(n)t=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ue(i,"options.listener"),{predicate:s,type:t,effect:i}},dt=function(e){var t=lt(e),n=t.type,r=t.predicate,s=t.effect;return{id:Pe(),effect:s,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},ft=function(e){e.pending.forEach(function(e){ze(e,Ye)})},ht=function(e){return function(){e.forEach(ft),e.clear()}},pt=function(e,t,n){try{e(t,n)}catch(e){setTimeout(function(){throw e},0)}},mt=M(ot+"/add"),gt=M(ot+"/removeAll"),bt=M(ot+"/remove"),yt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,o([ot+"/error"],e))};function wt(e){var t=this;void 0===e&&(e={});var n=new Map,r=e.extra,s=e.onError,i=void 0===s?yt:s;Ue(i,"onError");var o=function(e){for(var t=0,r=Array.from(n.values());t<r.length;t++){var s=r[t];if(e(s))return s}},c=function(e){var t=o(function(t){return t.effect===e.effect});return t||(t=dt(e)),function(e){return e.unsubscribe=function(){return n.delete(e.id)},n.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&ft(e)}}(t)},u=function(e){var t=lt(e),n=t.type,r=t.effect,s=t.predicate,i=o(function(e){return("string"==typeof n?e.type===n:e.predicate===s)&&e.effect===r});return i&&(i.unsubscribe(),e.cancelActive&&ft(i)),!!i},l=function(e,s,o,u){return S(t,null,function(){var t,l,d,f;return a(this,function(a){switch(a.label){case 0:t=new AbortController,l=ut(c,t.signal),d=[],a.label=1;case 1:return a.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(s,it({},o,{getOriginalState:u,condition:function(e,t){return l(e,t).then(Boolean)},take:l,delay:st(t.signal),pause:rt(t.signal),extra:r,signal:t.signal,fork:ct(t.signal,d),unsubscribe:e.unsubscribe,subscribe:function(){n.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,n,r){e!==t&&(ze(e,Ye),r.delete(e))})}})))];case 2:return a.sent(),[3,6];case 3:return(f=a.sent())instanceof et||pt(i,f,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(d)];case 5:return a.sent(),ze(t,Qe),e.pending.delete(t),[7];case 6:return[2]}})})},d=ht(n);return{middleware:function(e){return function(t){return function(r){if(!N(r))return t(r);if(mt.match(r))return c(r.payload);if(!gt.match(r)){if(bt.match(r))return u(r.payload);var s,a=e.getState(),o=function(){if(a===at)throw new Error(ot+": getOriginalState can only be called synchronously");return a};try{if(s=t(r),n.size>0)for(var f=e.getState(),h=Array.from(n.values()),p=0,m=h;p<m.length;p++){var g=m[p],b=!1;try{b=g.predicate(r,f,a)}catch(e){b=!1,pt(i,e,{raisedBy:"predicate"})}b&&l(g,r,e,o)}}finally{a=at}return s}d()}}},startListening:c,stopListening:u,clearListeners:d}}var Et,vt="RTK_autoBatch",Tt=function(){return function(e){var t;return{payload:e,meta:(t={},t[vt]=!0,t)}}},xt="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(Et||(Et=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},St=function(e){return function(t){setTimeout(t,e)}},Pt="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:St(10),kt=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(void 0,n),i=!0,a=!1,o=!1,c=new Set,u="tick"===e.type?xt:"raf"===e.type?Pt:"callback"===e.type?e.queueNotification:St(e.timeout),l=function(){o=!1,a&&(a=!1,c.forEach(function(e){return e()}))};return Object.assign({},s,{subscribe:function(e){var t=s.subscribe(function(){return i&&e()});return c.add(e),function(){t(),c.delete(e)}},dispatch:function(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[vt]),(a=!i)&&(o||(o=!0,u(l))),s.dispatch(e)}finally{i=!0}}})}}};(0,P.enableES5)()}).call(this)}).call(this,e("_process"))}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.development.js"}],[3190,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKeyComparator=i,n.defaultEqualityCheck=void 0,n.defaultMemoize=function(e,t){var n="object"==typeof t?t:{equalityCheck:t},a=n.equalityCheck,o=void 0===a?s:a,c=n.maxSize,u=void 0===c?1:c,l=n.resultEqualityCheck,d=i(o),f=1===u?(h=d,{get:function(e){return p&&h(p.key,e)?p.value:r},put:function(e,t){p={key:e,value:t}},getEntries:function(){return p?[p]:[]},clear:function(){p=undefined}}):function(e,t){var n=[];function s(e){var s=n.findIndex(function(n){return t(e,n.key)});if(s>-1){var i=n[s];return s>0&&(n.splice(s,1),n.unshift(i)),i.value}return r}function i(t,i){s(t)===r&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())}function a(){return n}function o(){n=[]}return{get:s,put:i,getEntries:a,clear:o}}(u,d);var h,p;function m(){var t=f.get(arguments);if(t===r){if(t=e.apply(null,arguments),l){var n=f.getEntries().find(function(e){return l(e.value,t)});n&&(t=n.value)}f.put(arguments,t)}return t}return m.clearCache=function(){return f.clear()},m};var r="NOT_FOUND";var s=function(e,t){return e===t};function i(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,s=0;s<r;s++)if(!e(t[s],n[s]))return!1;return!0}}n.defaultEqualityCheck=s}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/defaultMemoize.js"}],[3191,{"./defaultMemoize":3190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSelector=void 0,n.createSelectorCreator=s,n.createStructuredSelector=void 0,Object.defineProperty(n,"defaultEqualityCheck",{enumerable:!0,get:function(){return r.defaultEqualityCheck}}),Object.defineProperty(n,"defaultMemoize",{enumerable:!0,get:function(){return r.defaultMemoize}});var r=e("./defaultMemoize");function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i,a=0,o={memoizeOptions:undefined},c=r.pop();if("object"==typeof c&&(o=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=o.memoizeOptions,l=void 0===u?n:u,d=Array.isArray(l)?l:[l],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),h=e.apply(void 0,[function(){return a++,c.apply(null,arguments)}].concat(d)),p=e(function(){for(var e=[],t=f.length,n=0;n<t;n++)e.push(f[n].apply(null,arguments));return i=h.apply(null,e)});return Object.assign(p,{resultFunc:c,memoizedResultFunc:h,dependencies:f,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),p}}var i=s(r.defaultMemoize);n.createSelector=i;n.createStructuredSelector=function(e,t){if(void 0===t&&(t=i),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})});return r}}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/index.js"}],[3195,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function a(e){if("function"!=typeof e)throw new Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw new Error("array expected")}function l(e,t){if(!i(!0,t))throw new Error(`${e}: array of strings expected`)}function d(e,t){if(!i(!1,t))throw new Error(`${e}: array of numbers expected`)}function f(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map(e=>e.encode).reduceRight(n,t),decode:e.map(e=>e.decode).reduce(n,t)}}function h(e){const t="string"==typeof e?e.split(""):e,n=t.length;l("alphabet",t);const r=new Map(t.map((e,t)=>[e,t]));return{encode:r=>(u(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]})),decode:t=>(u(t),t.map(t=>{o("alphabet.decode",t);const n=r.get(t);if(n===undefined)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}function p(e=""){return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function m(e,t="="){return c(e),o("padding",t),{encode(n){for(l("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){l("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--){if((r-1)*e%8==0)throw new Error("padding: invalid, string has too much padding")}return n.slice(0,r)}}}function g(e){return a(e),{encode:e=>e,decode:t=>e(t)}}function b(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(u(e),!e.length)return[];let r=0;const s=[],i=Array.from(e,e=>{if(c(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e}),a=i.length;for(;;){let e=0,o=!0;for(let s=r;s<a;s++){const a=i[s],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const l=u/n;e=u%n;const d=Math.floor(l);if(i[s]=d,!Number.isSafeInteger(d)||d*n+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=s)}if(s.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.createBase58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64urlnopad=n.base64url=n.base64nopad=n.base64=n.base32crockford=n.base32hexnopad=n.base32hex=n.base32nopad=n.base32=n.base16=n.utils=void 0;const y=(e,t)=>0===t?e:y(t,e%t),w=(e,t)=>e+(t-y(e,t)),E=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,n,r){if(u(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(w(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${w(t,n)}`);let s=0,i=0;const a=E[t],o=E[n]-1,l=[];for(const r of e){if(c(r),r>=a)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(s=s<<t|r,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)l.push((s>>i-n&o)>>>0);const e=E[i];if(e===undefined)throw new Error("invalid carry");s&=e-1}if(s=s<<n-i&o,!r&&i>=t)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&l.push(s>>>0),l}function T(e){c(e);return{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return b(Array.from(t),256,e)},decode:t=>(d("radix.decode",t),Uint8Array.from(b(t,e,256)))}}function x(e,t=!1){if(c(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(w(8,e)>32||w(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return v(Array.from(n),8,e,!t)},decode:n=>(d("radix2.decode",n),Uint8Array.from(v(n,e,8,t)))}}function S(e){return a(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function P(e,t){return c(e),a(t),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const s=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(s,n.length),i},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const s=n.slice(0,-e),i=n.slice(-e),a=t(s).slice(0,e);for(let t=0;t<e;t++)if(a[t]!==i[t])throw new Error("Invalid checksum");return s}}}n.utils={alphabet:h,chain:f,checksum:P,convertRadix:b,convertRadix2:v,radix:T,radix2:x,join:p,padding:m},n.base16=f(x(4),h("0123456789ABCDEF"),p("")),n.base32=f(x(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m(5),p("")),n.base32nopad=f(x(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p("")),n.base32hex=f(x(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m(5),p("")),n.base32hexnopad=f(x(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p("")),n.base32crockford=f(x(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),p(""),g(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const k=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)(),I=(e,t)=>{o("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})};n.base64=k?{encode:e=>(s(e),e.toBase64()),decode:e=>I(e,!1)}:f(x(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m(6),p("")),n.base64nopad=f(x(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p("")),n.base64url=k?{encode:e=>(s(e),e.toBase64({alphabet:"base64url"})),decode:e=>I(e,!0)}:f(x(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m(6),p("")),n.base64urlnopad=f(x(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(""));const A=e=>f(T(58),h(e),p(""));n.base58=A("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=A("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=A("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const _=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=n.base58.encode(s).padStart(_[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11),i=_.indexOf(s.length),a=n.base58.decode(s);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};n.createBase58check=e=>f(P(4,t=>e(e(t))),n.base58),n.base58check=n.createBase58check;const C=f(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),j=[996825010,642813549,513874426,1027748829,705979059];function B(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<j.length;e++)1==(t>>e&1)&&(n^=j[e]);return n}function F(e,t,n=1){const r=e.length;let s=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);s=B(s)^n>>5}s=B(s);for(let t=0;t<r;t++)s=B(s)^31&e.charCodeAt(t);for(let e of t)s=B(s)^e;for(let e=0;e<6;e++)s=B(s);return s^=n,C.encode(v([s%E[30]],30,5,!1))}function O(e){const t="bech32"===e?1:734539939,n=x(5),s=n.decode,i=n.encode,a=S(s);function c(e,n,s=90){o("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),d("bech32.encode",n);const i=e.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const a=i+7+n.length;if(!1!==s&&a>s)throw new TypeError(`Length ${a} exceeds limit ${s}`);const c=e.toLowerCase(),u=F(c,n,t);return`${c}1${C.encode(n)}${u}`}function u(e,n=90){o("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=s.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const a=s.slice(0,i),c=s.slice(i+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=C.decode(c).slice(0,-6),l=F(a,u,t);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:a,words:u}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:n}=u(e,!1);return{prefix:t,words:n,bytes:s(n)}},decodeUnsafe:S(u),fromWords:s,fromWordsUnsafe:a,toWords:i}}n.bech32=O("bech32"),n.bech32m=O("bech32m"),n.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)};const R=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),L={encode:e=>(s(e),e.toHex()),decode:e=>(o("hex",e),Uint8Array.fromHex(e))};n.hex=R?L:f(x(4),h("0123456789abcdef"),p(""),g(e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const M={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},N="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";n.bytesToString=(e,t)=>{if("string"!=typeof e||!M.hasOwnProperty(e))throw new TypeError(N);if(!r(t))throw new TypeError("bytesToString() expects Uint8Array");return M[e].encode(t)},n.str=n.bytesToString;n.stringToBytes=(e,t)=>{if(!M.hasOwnProperty(e))throw new TypeError(N);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return M[e].decode(t)},n.bytes=n.stringToBytes}}},{package:"@scure/base",file:"node_modules/@scure/base/lib/index.js"}],[3197,{"@solana/assertions":3198,"@solana/codecs-core":3199,"@solana/codecs-strings":3200,"@solana/errors":3201},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i=e("@solana/codecs-core"),a=e("@solana/codecs-strings"),o=e("@solana/errors"),c=e("@solana/assertions");function u(){return r||(r=a.getBase58Encoder()),r}function l(e){if(e.length<32||e.length>44)return!1;const t=u();try{return 32===t.encode(e).byteLength}catch{return!1}}function d(e){if(e.length<32||e.length>44)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__STRING_LENGTH_OUT_OF_RANGE,{actualLength:e.length});const t=u().encode(e).byteLength;if(32!==t)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_BYTE_LENGTH,{actualLength:t})}function f(e){return d(e),e}function h(){return i.transformEncoder(i.fixEncoderSize(u(),32),e=>f(e))}function p(){return i.fixDecoderSize((s||(s=a.getBase58Decoder()),s),32)}function m(){return i.combineCodec(h(),p())}var g=57896044618658097711785492504343953926634992332820282019728792003956564819949n,b=19681161376707505956807079304988542015446066515923890162744021073123829784752n;function y(e){const t=e%g;return t>=0n?t:g+t}function w(e,t){let n=e;for(;t-- >0n;)n*=n,n%=g;return n}function E(e,t){const n=y(t*t*t),r=function(e){const t=e*e%g*e%g,n=w(t,2n)*t%g,r=w(n,1n)*e%g,s=w(r,5n)*r%g,i=w(s,10n)*s%g,a=w(i,20n)*i%g,o=w(a,40n)*a%g,c=w(o,80n)*o%g,u=w(c,80n)*o%g,l=w(u,10n)*s%g;return w(l,2n)*e%g}(e*y(n*n*t));let s=y(e*n*r);const i=y(t*s*s),a=s,o=y(s*b),c=i===e,u=i===y(-e),l=i===y(-e*b);return c&&(s=a),(u||l)&&(s=o),1n==(1n&y(s))&&(s=y(-s)),c||u?s:null}function v(e){if(32!==e.byteLength)return!1;const t=function(e){const t=e.reduce((e,t,n)=>`${function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(31===n?-129&t:t)}${e}`,"");return BigInt(`0x${t}`)}(e);return function(e,t){const n=y(e*e),r=E(y(n-1n),y(37095705934669439343138083508754565189542113879843219016388785533085940283555n*n+1n));return null!==r&&(0n!==r||!(128&t))}(t,e[31])}var T=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function x({programAddress:e,seeds:t}){if(c.assertDigestCapabilityIsAvailable(),t.length>16)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_NUMBER_OF_PDA_SEEDS_EXCEEDED,{actual:t.length,maxSeeds:16});let n;const r=t.reduce((e,t,r)=>{const s="string"==typeof t?(n||(n=new TextEncoder)).encode(t):t;if(s.byteLength>32)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:s.byteLength,index:r,maxSeedLength:32});return e.push(...s),e},[]),s=m(),i=s.encode(e),a=await crypto.subtle.digest("SHA-256",new Uint8Array([...r,...i,...T])),u=new Uint8Array(a);if(v(u))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE);return s.decode(u)}n.address=f,n.assertIsAddress=d,n.assertIsProgramDerivedAddress=function(e){if(!(Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"number"==typeof e[1]))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MALFORMED_PDA);if(e[1]<0||e[1]>255)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__PDA_BUMP_SEED_OUT_OF_RANGE,{bump:e[1]});d(e[0])},n.createAddressWithSeed=async function({baseAddress:e,programAddress:t,seed:n}){const{encode:r,decode:s}=m(),i="string"==typeof n?(new TextEncoder).encode(n):n;if(i.byteLength>32)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__MAX_PDA_SEED_LENGTH_EXCEEDED,{actual:i.byteLength,index:0,maxSeedLength:32});const a=r(t);if(a.length>=T.length&&a.slice(-T.length).every((e,t)=>e===T[t]))throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__PDA_ENDS_WITH_PDA_MARKER);const c=await crypto.subtle.digest("SHA-256",new Uint8Array([...r(e),...i,...a]));return s(new Uint8Array(c))},n.getAddressCodec=m,n.getAddressComparator=function(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare},n.getAddressDecoder=p,n.getAddressEncoder=h,n.getAddressFromPublicKey=async function(e){if(c.assertKeyExporterIsAvailable(),"public"!==e.type||"Ed25519"!==e.algorithm.name)throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__INVALID_ED25519_PUBLIC_KEY);const t=await crypto.subtle.exportKey("raw",e);return p().decode(new Uint8Array(t))},n.getProgramDerivedAddress=async function({programAddress:e,seeds:t}){let n=255;for(;n>0;)try{return[await x({programAddress:e,seeds:[...t,new Uint8Array([n])]}),n]}catch(e){if(!o.isSolanaError(e,o.SOLANA_ERROR__ADDRESSES__INVALID_SEEDS_POINT_ON_CURVE))throw e;n--}throw new o.SolanaError(o.SOLANA_ERROR__ADDRESSES__FAILED_TO_FIND_VIABLE_PDA_BUMP_SEED)},n.isAddress=l,n.isProgramDerivedAddress=function(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"number"==typeof e[1]&&e[1]>=0&&e[1]<=255&&l(e[0])}}}},{package:"@solana/addresses",file:"node_modules/@solana/addresses/dist/index.browser.cjs"}]],[],{});