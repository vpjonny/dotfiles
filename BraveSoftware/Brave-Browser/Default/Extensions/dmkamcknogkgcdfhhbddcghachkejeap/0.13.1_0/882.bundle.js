"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[882],{28646:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(97790),a=n(96067),i=n(48246),s=n(91288),o=n(10423),c=n(48834).Buffer,l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};const u=[{vendorId:i.An}],d=()=>{const{hid:e}=navigator;if(!e)throw new o.PS("navigator.hid is not supported","HIDNotSupported");return e};function h(){return l(this,void 0,void 0,(function*(){const e=yield d().requestDevice({filters:u});return Array.isArray(e)?e:[e]}))}function p(){return l(this,void 0,void 0,(function*(){return(yield d().getDevices()).filter((e=>e.vendorId===i.An))}))}class f extends r.ZP{constructor(e){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise((e=>{this.inputCallback=e})),this.onInputReport=e=>{const t=c.from(e.data.buffer);this.inputCallback?(this.inputCallback(t),this.inputCallback=null):this.inputs.push(t)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>l(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>l(this,void 0,void 0,(function*(){const{channel:t,packetSize:n}=this;(0,s.cM)("apdu","=> "+e.toString("hex"));const r=(0,a.Z)(t,n),i=r.makeBlocks(e);for(let e=0;e<i.length;e++)yield this.device.sendReport(0,i[e]);let o,c;for(;!(o=r.getReducedResult(c));){const e=yield this.read();c=r.reduceResponse(c,e)}return(0,s.cM)("apdu","<= "+o.toString("hex")),o})))).catch((e=>{if(e&&e.message&&e.message.includes("write"))throw this._emitDisconnect(e),new o.vs(e.message);throw e}))})),this.device=e,this.deviceModel="number"==typeof e.productId?(0,i.Ht)(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return l(this,void 0,void 0,(function*(){const[e]=yield h();return f.open(e)}))}static openConnected(){return l(this,void 0,void 0,(function*(){const e=yield p();return 0===e.length?null:f.open(e[0])}))}static open(e){return l(this,void 0,void 0,(function*(){yield e.open();const t=new f(e),n=r=>{e===r.device&&(d().removeEventListener("disconnect",n),t._emitDisconnect(new o.qX))};return d().addEventListener("disconnect",n),t}))}close(){return l(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()}))}setScrambleKey(){}}f.isSupported=()=>Promise.resolve(!(!window.navigator||!window.navigator.hid)),f.list=p,f.listen=e=>{let t=!1;return function(){return l(this,void 0,void 0,(function*(){const e=yield p();return e.length>0?e[0]:(yield h())[0]}))}().then((n=>{if(n){if(!t){const t="number"==typeof n.productId?(0,i.Ht)(n.productId):void 0;e.next({type:"add",descriptor:n,deviceModel:t}),e.complete()}}else e.error(new o.FB("Access denied to use Ledger device"))}),(t=>{e.error(new o.FB(t.message))})),{unsubscribe:function(){t=!0}}};const g=f},19981:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(97790),a=n(9064),i=n(21036),s=n(91288),o=n(10423),c=n(62607),l=n(48834).Buffer,u=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};class d extends r.ZP{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=(0,i.Ht)(e.productId)}static request(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.PC)();return d.open(e)}))}static openConnected(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.yz)();return 0===e.length?null:d.open(e[0])}))}static open(e){return u(this,void 0,void 0,(function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield p(e);const t=e.configurations[0].interfaces.find((({alternates:e})=>e.some((e=>255===e.interfaceClass))));if(!t)throw new o.$u("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=t.interfaceNumber;try{yield e.claimInterface(n)}catch(t){throw yield e.close(),new o.$u(t.message)}const r=new d(e,n),a=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",a),r._emitDisconnect(new o.qX))};return navigator.usb.addEventListener("disconnect",a),r}))}close(){return u(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield p(this.device),yield this.device.close()}))}exchange(e){return u(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>u(this,void 0,void 0,(function*(){const{channel:t,packetSize:n}=this;(0,s.cM)("apdu","=> "+e.toString("hex"));const r=(0,a.Z)(t,n),i=r.makeBlocks(e);for(let e=0;e<i.length;e++)yield this.device.transferOut(3,i[e]);let o,c;for(;!(o=r.getReducedResult(c));){const e=yield this.device.transferIn(3,n),t=l.from(e.data.buffer);c=r.reduceResponse(c,t)}return(0,s.cM)("apdu","<= "+o.toString("hex")),o})))).catch((e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new o.vs(e.message);throw e}))}))}setScrambleKey(){}}d.isSupported=c.Gb,d.list=c.yz,d.listen=e=>{let t=!1;return(0,c.DC)().then((n=>{if(!t){const t=(0,i.Ht)(n.productId);e.next({type:"add",descriptor:n,deviceModel:t}),e.complete()}}),(t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new o.um(t.message)):e.error(new o.FB(t.message))})),{unsubscribe:function(){t=!0}}};const h=d;function p(e){return u(this,void 0,void 0,(function*(){try{yield e.reset()}catch(e){console.warn(e)}}))}},77257:(e,t,n)=>{n.d(t,{Pi:()=>s.P}),n(20580);var r=n(72615),a=n(40626),i=(n(30571),n(66065)),s=n(49839);n(22081),n(2784),n(92363),n(97432),(0,a.z0)(r.m),i.O.finalizeAllImmediately},52022:(e,t,n)=>{n.d(t,{S:()=>u});var r=n(80075),a=n(48834),i=n(83268),s=n(89170),o=(n(19731),n(96624),n(34298)),c=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t,n,s){this.kvStore=e,this.keyringStore=t,this.accountStore=n,this.apiKey=s,this.isInitialized=!1,this._sessionId="",this._sessionIdTimestamp=0,this.isFirefox=!1,this.cosmosHubChainId="cosmoshub-4",(0,r.makeObservable)(this),this.apiKey&&(i.S1(this.apiKey,void 0,{defaultTracking:!1}),(0,r.autorun)((()=>{var e;if((null===(e=this.keyringStore.selectedKeyInfo)||void 0===e?void 0:e.id)&&this.accountStore.hasAccount(this.cosmosHubChainId)&&"unlocked"===this.keyringStore.status){const e=this.accountStore.getAccount(this.cosmosHubChainId);if(e.bech32Address){const t=a.Buffer.from(o.Hash.hash256((new TextEncoder).encode(e.bech32Address))).toString("hex");i.Iv(t)}}}))),this.init()}init(){return l(this,void 0,void 0,(function*(){if("function"==typeof browser.runtime.getBrowserInfo&&"Firefox"===(yield browser.runtime.getBrowserInfo()).name)return this.isFirefox=!0,void(0,r.runInAction)((()=>{this.isInitialized=!0}));const e=yield this.kvStore.get("session_id");e&&(0,r.runInAction)((()=>{this._sessionId=e}));const t=yield this.kvStore.get("session_id_timestamp");t&&(0,r.runInAction)((()=>{this._sessionIdTimestamp=t})),(0,r.autorun)((()=>{this.kvStore.set("session_id",this._sessionId)})),(0,r.autorun)((()=>{this.kvStore.set("session_id_timestamp",this._sessionIdTimestamp)})),(0,r.runInAction)((()=>{this.isInitialized=!0}))}))}ensureInit(){return l(this,void 0,void 0,(function*(){if(!this.isFirefox&&!this.isInitialized&&!this.isInitialized){let e;yield new Promise((t=>{e=(0,r.autorun)((()=>{this.isInitialized&&t()}))})),e&&e()}}))}getAndUpdateSessionId(){const e=Date.now();if(this._sessionId&&this._sessionIdTimestamp&&e-this._sessionIdTimestamp<9e5)return(0,r.runInAction)((()=>{this._sessionIdTimestamp=e})),this._sessionId;{const t=new Uint8Array(12);crypto.getRandomValues(t);const n=a.Buffer.from(t).toString("hex");return(0,r.runInAction)((()=>{this._sessionId=n,this._sessionIdTimestamp=e})),n}}logEvent(e,t){this.apiKey&&(this.isFirefox||this.ensureInit().then((()=>{this.isFirefox||i.n5()&&i.j(e,Object.assign(Object.assign({},t),{session_id:this.getAndUpdateSessionId()}))})))}setUserProperties(e){if(this.isFirefox)return;if(!this.apiKey)return;if(!i.n5())return;const t=new s.h;Object.entries(e).forEach((([e,n])=>{null!=n&&t.set(e,n)})),i.yV(t)}incrementUserProperty(e,t){if(this.isFirefox)return;if(!this.apiKey)return;if(!i.n5())return;const n=new s.h;n.add(e,t),i.yV(n)}}c([r.observable],u.prototype,"isInitialized",void 0),c([r.observable],u.prototype,"_sessionId",void 0),c([r.observable],u.prototype,"_sessionIdTimestamp",void 0),c([r.action],u.prototype,"setUserProperties",null),c([r.action],u.prototype,"incrementUserProperty",null)},47790:(e,t,n)=>{n.d(t,{A:()=>r.A}),n(31755);var r=n(47918)},66674:(e,t,n)=>{n(2784)},96780:(e,t,n)=>{n(2784)},86917:(e,t,n)=>{n(2784)},22201:(e,t,n)=>{n(2784)},63167:(e,t,n)=>{n.d(t,{BX:()=>r.BX,CK:()=>r.CK});var r=n(58650)},91637:(e,t,n)=>{n.d(t,{u:()=>f});var r=n(2784),a=n(63167),i=n(28316),s=n(75868),o=n(66769),c=n(71346),l=n.n(c),u=n(19410),d=n(35150),h=n(71893);const p=(0,s.animated)(u.Z),f=({isOpen:e,close:t,align:n,maxHeight:c,onCloseTransitionEnd:l,forceNotUseSimplebar:u,forceNotOverflowAuto:d,disableBackdrop:h,children:p})=>{const f=(0,a.BX)(e),[y,m]=(0,r.useState)(e);(0,r.useLayoutEffect)((()=>{e&&m(!0)}),[e]);const _=e||y,b=(0,r.useRef)(null),A=(0,r.useMemo)((()=>_?(b.current||(b.current=f.registerRootElement()),f.getRootElement(b.current)):(b.current&&(f.releaseRootElement(b.current),b.current=null),null)),[_]);(0,r.useEffect)((()=>()=>{b.current&&(f.releaseRootElement(b.current),b.current=null)}),[]);const E=(0,s.useSpringValue)(e?1:0,{config:o.a});return A&&(e||y)?i.createPortal(r.createElement("div",null,r.createElement(g,{transition:E,isOpen:e,close:t,align:n,maxHeight:c,onCloseTransitionEnd:()=>{m(!1),l&&l()},forceNotUseSimplebar:u,forceNotOverflowAuto:d,disableBackdrop:h},p)),A):null},g=({children:e,transition:t,align:n,maxHeight:a,isOpen:i,close:o,onCloseTransitionEnd:c,forceNotUseSimplebar:u,forceNotOverflowAuto:f,disableBackdrop:g})=>{const y=(0,h.useTheme)(),m=(0,r.useRef)(c);m.current=c,(0,r.useLayoutEffect)((()=>{i?t.start(1):t.start(0,{onRest:m.current})}),[t,i]);const _=(0,r.useRef)(null);return r.createElement(s.animated.div,{style:Object.assign(Object.assign({position:"absolute",top:0,bottom:0,left:0,right:0},(()=>{if("left"!==n&&"right"!==n)return{display:"flex",flexDirection:"column",justifyContent:"center"===n?"center":"flex-end"}})()),{pointerEvents:g?"none":"auto",backgroundColor:g?"rgba(0,0,0,0)":t.to((e=>l()("light"===y.mode?d.VZ["gray-550"]:d.VZ["gray-700"]).alpha(.55*e).string()))}),onClick:e=>{e.preventDefault(),g?_.current&&_.current!==e.target&&_.current.contains(e.target)&&e.stopPropagation():(e.stopPropagation(),_.current&&_.current!==e.target&&_.current.contains(e.target)||i&&o())}},((e,t,a)=>"left"===n||"right"===n||u?r.createElement(s.animated.div,{ref:e,style:t},a):r.createElement(p,{scrollableNodeProps:{ref:e},style:t},a))(_,Object.assign({maxHeight:"left"!==n&&"right"!==n?a||"85vh":void 0,overflow:f?void 0:"auto",pointerEvents:"auto",position:"absolute",left:0,right:0},"left"===n?{top:0,bottom:0,transform:t.to((e=>`translateX(${-100*(1-e)}%)`))}:"right"===n?{top:0,bottom:0,transform:t.to((e=>`translateX(${100*(1-e)}%)`))}:{bottom:"center"===n?t.to((e=>50*e+"%")):"auto",transform:"center"===n?t.to((e=>`translateY(${50+50*(1-e)}%)`)):t.to((e=>`translateY(${100*(1-e)}%)`))}),e))}},90879:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(71893),a=n(25300);const i=(0,r.default)(a.i)`
  font-weight: 400;
  font-size: 0.875rem;
`},40602:(e,t,n)=>{n.d(t,{et:()=>r}),n(14002),n(28646),n(19981),n(47722),n(80471),n(34298),n(89642),n(48834).Buffer;const r="m/2645'/1195502025'/1148870696'/0'/0'/0"},35150:(e,t,n)=>{n.d(t,{VZ:()=>r.V,ZL:()=>a.Z,nW:()=>i.n});var r=n(93043),a=n(52977),i=(n(76948),n(61139),n(90820))},64259:(e,t,n)=>{n.d(t,{H:()=>s});var r=n(50318),a=n(19981),i=n(28646);const s={tryAppOpen:(e,t)=>{return n=void 0,s=void 0,c=function*(){let n=!1;try{const a=yield(0,r.getAppInfo)(e);"No errors"===a.error_message&&a.app_name===t&&(n=!0)}catch(e){console.log(e)}try{if(!n){yield r.CosmosApp.openApp(e,t);const n=25;let s=0;for(;s<n;){e=e instanceof i.Z?yield i.Z.create():yield a.Z.create();const n=yield(0,r.getAppInfo)(e);if("No errors"===n.error_message&&n.app_name===t)break;s++,yield new Promise((e=>setTimeout(e,200)))}}}catch(e){}return e},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function a(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}i((c=c.apply(n,s||[])).next())}));var n,s,o,c}}},21561:(e,t,n)=>{n.d(t,{S0:()=>r}),n(33783),n(96106),n(47722);const r=()=>"/sidePanel.html"===new URL(window.location.href).pathname},2462:(e,t,n)=>{n.d(t,{d:()=>a});const r=new(n(19731).Dec)(0);function a(e,t){var n,a,i,s;const o=null!==(a=null===(n=e.price)||void 0===n?void 0:n.toDec())&&void 0!==a?a:r,c=null!==(s=null===(i=t.price)||void 0===i?void 0:i.toDec())&&void 0!==s?s:r;if(o.equals(c)){if(o.equals(r)){const n=e.token.toDec().gt(r),a=t.token.toDec().gt(r);return n&&!a?-1:!n&&a?1:0}return 0}return o.gt(c)?-1:1}},89642:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(17859),t),a(n(11851),t),a(n(41549),t),a(n(83781),t),a(n(8407),t),a(n(3415),t),a(n(4371),t),a(n(90293),t),a(n(57673),t),a(n(83524),t),a(n(14010),t),a(n(51862),t),a(n(89037),t),a(n(31352),t)},34298:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(40409),t),a(n(91166),t),a(n(47577),t)},80471:(e,t,n)=>{n.d(t,{K:()=>a.KW,g:()=>l});var r=n(16210),a=n(33924),i=n(14002),s=n(89656),o=n(48834).Buffer,c=Object.defineProperty;class l{constructor(e){if(((e,t,n)=>{((e,t,n)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(this,"transport"),this.transport=e,!e)throw new Error("Transport has not been defined")}async sendApdu(e=a.N5.GET_VERSION,t=0,n=0,r=new Uint8Array(0)){return this.transport.send(a.Ds,e,t,n,o.from(r),[a.KW.NoError,a.KW.BadCla,a.KW.BadIns,a.KW.InvalidP1P2,a.KW.UserRejected]).then((e=>{const t=e.subarray(-2),n=256*t[0]+t[1];let r=(0,a.T9)(n);return{data:e.subarray(0,-2),returnCode:n,errorMessage:r}}))}async getAppVersion(){const e=await this.sendApdu(a.N5.GET_VERSION);return{returnCode:e.returnCode,errorMessage:e.errorMessage,major:e.data[0],minor:e.data[1],patch:e.data[2]}}async getPubKey(e,t=!0){const n=(0,r.Mi)(e);try{const e=await this.sendApdu(a.N5.GET_PUB_KEY,t?1:0,0,n);return{publicKey:e.data.slice(1,65),returnCode:e.returnCode,errorMessage:e.errorMessage}}catch{return console.warn("Caught error"),{publicKey:new Uint8Array(0),returnCode:a.KW.ExecutionError,errorMessage:(0,a.T9)(a.KW.ExecutionError)}}}async getStarkKey(e,t=!0){const{publicKey:n,errorMessage:r,returnCode:i}=await this.getPubKey(e,t);return i!==a.KW.NoError?{starkKey:n,returnCode:i,errorMessage:r}:{starkKey:n.slice(0,32),returnCode:i,errorMessage:r}}async signHash(e,t){const n=(0,r.Mi)(e),i=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substring(n,n+2),16));return Uint8Array.from(t)}(function(e){let t=e.replace(/^0x0*/,"");if(t.length>a.dI)throw"invalid hash length";return t="0".repeat(1+a.dI-t.length).concat(t),t}(t));try{let e=await this.sendApdu(a.N5.SIGN_HASH,0,0,n);return e=await this.sendApdu(a.N5.SIGN_HASH,1,0,i),e.returnCode!==a.KW.NoError?{returnCode:e.returnCode,errorMessage:(0,a.T9)(e.returnCode),r:new Uint8Array(0),s:new Uint8Array(0),v:0}:{returnCode:e.returnCode,errorMessage:e.errorMessage,r:e.data.subarray(1,33),s:e.data.subarray(33,65),v:e.data[65]}}catch{return{returnCode:a.KW.ExecutionError,errorMessage:(0,a.T9)(a.KW.ExecutionError),r:new Uint8Array(0),s:new Uint8Array(0),v:0}}}async signTx(e,t,n){await this.sendApdu(a.N5.SIGN_TX,0,0,(0,r.Mi)(e));const s=(0,r.Md)(n.accountAddress),o=(0,r.Md)(n.chainId),c=(0,r.Md)(n.nonce),l=(0,r.Md)(this.encodeDataAvailabilityMode(n.nonceDataAvailabilityMode,n.feeDataAvailabilityMode));let u=new Uint8Array([...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(a.N5.SIGN_TX,1,0,u);const d=(0,r.Md)(n.tip),{l1_gas:h,l2_gas:p,l1_data_gas:f}=this.encodeResourceBounds(n.resourceBounds);u=new Uint8Array([...d.toArray("be",32),...h.toArray("be",32),...p.toArray("be",32),...f.toArray("be",32)]),await this.sendApdu(a.N5.SIGN_TX,2,0,u),await this.sendApdu(a.N5.SIGN_TX,3,0,new Uint8Array(0)),await this.sendApdu(a.N5.SIGN_TX,4,0,new Uint8Array(0));let g=(0,r.Md)(t.length);u=new Uint8Array([...g.toArray("be",32)]),await this.sendApdu(a.N5.SIGN_TX,5,0,u);let y,m={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=i.lx.toCalldata(e.calldata);let n=new Uint8Array(32*(3+t.length));(0,r.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>n[t]=e)),(0,r.Md)(i.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>n[32+t]=e)),(0,r.Md)(t.length).toArray("be",32).forEach(((e,t)=>n[64+t]=e)),t.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,r)=>n[96+32*t+r]=e))}));let s=[];for(let e=0;e<n.length;e+=224)s.push(n.slice(e,e+224));if(s.length>1){if(y=await this.sendApdu(a.N5.SIGN_TX,6,0,s[0]),y.returnCode!==a.KW.NoError)return m;for(const e of s.slice(1))if(y=await this.sendApdu(a.N5.SIGN_TX,6,1,e),y.returnCode!==a.KW.NoError)return m}else if(y=await this.sendApdu(a.N5.SIGN_TX,6,0,s[0]),y.returnCode!==a.KW.NoError)return m}return(null==y?void 0:y.returnCode)===a.KW.NoError?{returnCode:y.returnCode,errorMessage:y.errorMessage,h:y.data.subarray(0,32),r:y.data.subarray(33,65),s:y.data.subarray(65,97),v:y.data[97]}:m}async signTxV1(e,t,n){await this.sendApdu(a.N5.SIGN_TX_V1,0,0,(0,r.Mi)(e));const s=(0,r.Md)(n.accountAddress),o=(0,r.Md)(n.max_fee),c=(0,r.Md)(n.chainId),l=(0,r.Md)(n.nonce);let u=new Uint8Array([...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(a.N5.SIGN_TX_V1,1,0,u);let d=(0,r.Md)(t.length);u=new Uint8Array([...d.toArray("be",32)]),await this.sendApdu(a.N5.SIGN_TX_V1,2,0,u);let h,p={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=i.lx.toCalldata(e.calldata);let n=new Uint8Array(32*(3+t.length));(0,r.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>n[t]=e)),(0,r.Md)(i.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>n[32+t]=e)),(0,r.Md)(t.length).toArray("be",32).forEach(((e,t)=>n[64+t]=e)),t.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,r)=>n[96+32*t+r]=e))}));let s=[];for(let e=0;e<n.length;e+=224)s.push(n.slice(e,e+224));if(s.length>1){if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,0,s[0]),h.returnCode!==a.KW.NoError)return p;for(const e of s.slice(1))if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,1,e),h.returnCode!==a.KW.NoError)return p}else if(h=await this.sendApdu(a.N5.SIGN_TX_V1,3,0,s[0]),h.returnCode!==a.KW.NoError)return p}return(null==h?void 0:h.returnCode)===a.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:p}async signDeployAccount(e,t){await this.sendApdu(a.N5.DEPLOY_ACCOUNT,0,0,(0,r.Mi)(e));const n=(0,r.Md)(t.contractAddress),i=(0,r.Md)(t.chainId),s=(0,r.Md)(t.nonce),o=(0,r.Md)(this.encodeDataAvailabilityMode(t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode)),c=(0,r.Md)(t.class_hash),l=(0,r.Md)(t.contract_address_salt);let u=new Uint8Array([...n.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(a.N5.DEPLOY_ACCOUNT,1,0,u);const d=(0,r.Md)(t.tip),{l1_gas:h,l2_gas:p,l1_data_gas:f}=this.encodeResourceBounds(t.resourceBounds);u=new Uint8Array([...d.toArray("be",32),...h.toArray("be",32),...p.toArray("be",32),...f.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,2,0,u),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,3,0,new Uint8Array(0));let g=(0,r.Md)(t.constructor_calldata.length);u=new Uint8Array([...g.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT,4,0,u);let y,m={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},_=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,n)=>_[32*t+n]=e))}));let b=[];for(let e=0;e<_.length;e+=224)b.push(_.slice(e,e+224));for(const e of b)if(y=await this.sendApdu(a.N5.DEPLOY_ACCOUNT,5,0,e),y.returnCode!==a.KW.NoError)return m;return(null==y?void 0:y.returnCode)===a.KW.NoError?{returnCode:y.returnCode,errorMessage:y.errorMessage,h:y.data.subarray(0,32),r:y.data.subarray(33,65),s:y.data.subarray(65,97),v:y.data[97]}:m}async signDeployAccountV1(e,t){await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,0,0,(0,r.Mi)(e));const n=(0,r.Md)(t.contractAddress),i=(0,r.Md)(t.class_hash),s=(0,r.Md)(t.contract_address_salt),o=(0,r.Md)(t.max_fee),c=(0,r.Md)(t.chainId),l=(0,r.Md)(t.nonce);let u=new Uint8Array([...n.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,1,0,u);let d=(0,r.Md)(t.constructor_calldata.length);u=new Uint8Array([...d.toArray("be",32)]),await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,2,0,u);let h,p={returnCode:a.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},f=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,r.Md)(e).toArray("be",32).forEach(((e,n)=>f[32*t+n]=e))}));let g=[];for(let e=0;e<f.length;e+=224)g.push(f.slice(e,e+224));for(const e of g)if(h=await this.sendApdu(a.N5.DEPLOY_ACCOUNT_V1,3,0,e),h.returnCode!==a.KW.NoError)return p;return(null==h?void 0:h.returnCode)===a.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:p}async signMessage(e,t,n){const r=i.AT.getMessageHash(t,n);return this.signHash(e,r)}encodeResourceBounds(e){const t=BigInt(64),n=BigInt(128),a=t+n,s=BigInt(i.lC.encodeShortString("L1_GAS")),o=BigInt(i.lC.encodeShortString("L2_GAS")),c=BigInt(i.lC.encodeShortString("L1_DATA")),l=(s<<a)+(BigInt(e.l1_gas.max_amount)<<n)+BigInt(e.l1_gas.max_price_per_unit),u=(o<<a)+(BigInt(e.l2_gas.max_amount)<<n)+BigInt(e.l2_gas.max_price_per_unit),d=(c<<a)+(BigInt(e.l1_data_gas.max_amount)<<n)+BigInt(e.l1_data_gas.max_price_per_unit);return{l1_gas:(0,r.Md)(l),l2_gas:(0,r.Md)(u),l1_data_gas:(0,r.Md)(d)}}encodeDataAvailabilityMode(e,t){const n=BigInt(32),r=e===s.h.L1?0:1,a=t===s.h.L1?0:1;return(BigInt(r)<<n)+BigInt(a)}}},14002:(e,t,n)=>{n.d(t,{AT:()=>Wi,cv:()=>B,lC:()=>Jt,lx:()=>Hr,vp:()=>jr});var r=n(80975),a=n(21812),i=n(95056),s=n(48912),o=n(69788),c=n(42078),l=n(49595),u=n(77010),d=n(42102),h=n(64905),p=n(11090),f=n(97334),g=n(57279),y=n(88117),m=n(72664),_=n(89947),b=n(96252),A=n(48834).Buffer,E=Object.defineProperty,v=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,I=Object.prototype.hasOwnProperty,S=(e,t)=>{for(var n in t)E(e,n,{get:t[n],enumerable:!0})},T=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of w(t))I.call(e,a)||a===n||E(e,a,{get:()=>t[a],enumerable:!(r=v(t,a))||r.enumerable});return e},k=(e,t,n)=>(T(e,t,"default"),n&&T(n,t,"default"));S({},{ADDR_BOUND:()=>oe,API_VERSION:()=>ae,BaseUrl:()=>Ce,DEFAULT_GLOBAL_CONFIG:()=>Re,HARDENING_4BYTES:()=>ke,HARDENING_BYTE:()=>Te,IS_BROWSER:()=>O,LegacyUDC:()=>Ee,MASK_250:()=>ne,MASK_31:()=>re,MAX_STORAGE_ITEM_SIZE:()=>se,NetworkName:()=>Ne,OutsideExecutionCallerAny:()=>we,PAYMASTER_RPC_NODES:()=>Me,PRIME:()=>ie,RANGE_FELT:()=>le,RANGE_I128:()=>Ae,RANGE_I16:()=>me,RANGE_I32:()=>_e,RANGE_I64:()=>be,RANGE_I8:()=>ye,RANGE_U128:()=>ge,RANGE_U16:()=>de,RANGE_U32:()=>he,RANGE_U64:()=>pe,RANGE_U8:()=>ue,RANGE_U96:()=>fe,RPC_DEFAULT_NODES:()=>De,SNIP9_V1_INTERFACE_ID:()=>Ie,SNIP9_V2_INTERFACE_ID:()=>Se,SN_VERSION_IMPLEMENTING_BLAKE_FOR_COMPILED_CLASS:()=>$e,SYSTEM_MESSAGES:()=>Pe,StarknetChainId:()=>xe,SupportedRpcVersion:()=>Oe,TEXT_TO_FELT_MAX_LEN:()=>ee,TransactionHashPrefix:()=>Be,UDC:()=>ve,ZERO:()=>te});var C={};S(C,{JRPC:()=>N,PAYMASTER_API:()=>o,RPCSPEC08:()=>r,RPCSPEC09:()=>i});var N={},x={};k(x,i),k(C,x);var B={};S(B,{IS_BROWSER:()=>O,addHexPrefix:()=>H,arrayBufferToString:()=>D,atobUniversal:()=>U,bigIntToUint8Array:()=>J,btoaUniversal:()=>V,buf2hex:()=>F,calcByteLength:()=>q,concatenateArrayBuffer:()=>z,hexStringToUint8Array:()=>Y,padLeft:()=>j,pascalToSnake:()=>G,removeHexPrefix:()=>L,sanitizeBytes:()=>W,sanitizeHex:()=>K,stringToUint8Array:()=>Z,uint8ArrayToBigInt:()=>Q,utf8ToArray:()=>P,utf8ToBigInt:()=>$,utf8ToUint8Array:()=>M});var O="undefined"!=typeof window,R="0";function D(e){return new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),"")}function M(e){return(new TextEncoder).encode(e)}var P=M;function $(e){return Q(M(e))}function U(e){return c.US.decode(e)}function V(e){return c.US.encode(new Uint8Array(e))}function F(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function L(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e}function H(e){return`0x${L(e)}`}function j(e,t,n=R){return function(e,t,n,r=R){const a=t-e.length;let i=e;if(a>0){const t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function q(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function W(e,t=8,n=R){return j(e,q(e,t),n)}function K(e){const t=W(L(e),2);return t?H(t):t}var G=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function z(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(e,r),r+=e.byteLength})),n}function Y(e){if(!X(H(e)))throw new Error(`Invalid hex string: "${e}"`);const t=L(K(e)),n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=parseInt(t.substring(e,e+2),16);return n}function X(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}function Z(e){return X(e)?Y(e):function(e){return/^[0-9]+$/.test(e)}(e)?J(BigInt(e)):M(e)}function J(e){if(e<0n)throw new Error(`Cannot convert negative bigint ${e} to Uint8Array`);if(0n===e)return new Uint8Array([0]);let t=e.toString(16);t.length%2!=0&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)n[e/2]=parseInt(t.substring(e,e+2),16);return n}function Q(e){if(!e||0===e.length)return 0n;let t="0x";for(let n=0;n<e.length;n+=1)t+=e[n].toString(16).padStart(2,"0");return BigInt(t)}var ee=31,te=0n,ne=2n**250n-1n,re=2n**31n-1n,ae=te,ie=2n**251n+17n*2n**192n+1n,se=256n,oe=2n**251n-se,ce=(e,t)=>({min:e,max:t}),le=ce(te,ie-1n),ue=ce(te,2n**8n-1n),de=ce(te,2n**16n-1n),he=ce(te,2n**32n-1n),pe=ce(te,2n**64n-1n),fe=ce(te,2n**96n-1n),ge=ce(te,2n**128n-1n),ye=ce(-(2n**7n),2n**7n-1n),me=ce(-(2n**15n),2n**15n-1n),_e=ce(-(2n**31n),2n**31n-1n),be=ce(-(2n**63n),2n**63n-1n),Ae=ce(-(2n**127n),2n**127n-1n),Ee={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ve={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},we="0x414e595f43414c4c4552",Ie="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Se="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",Te=128,ke=2147483648n,Ce={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},Ne={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},xe={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},Be={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},Oe={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Re={rpcVersion:"0.9.0",transactionVersion:C.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0,blake:void 0},De={SN_MAIN:["https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.g.alchemy.com/starknet/version/rpc/"]},Me={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},Pe={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},$e="0.14.1",Ue=class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Re}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}.getInstance(),Ve={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},Fe=class e{static instance;config;constructor(){this.config=Ue}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(e){const t=this.config.get("logLevel","INFO");return e<=Ve[t]}formatMessage(e){const{level:t,message:n,timestamp:r,data:a}=e;let i=`[${r}] ${t}: ${n}`;if(a)try{i+=`\n${JSON.stringify(a,null,2)}`}catch(e){i+=`\n[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,n){if(!this.shouldLog(Ve[e]))return;const r={level:e,message:t,timestamp:this.getTimestamp(),data:n},a=this.formatMessage(r);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Ve).filter((e=>this.shouldLog(Ve[e])&&"OFF"!==e))}}.getInstance(),Le={};S(Le,{RpcChannel:()=>Ci});var{ETransactionVersion:He}=i,{ETransactionVersion2:je}=i,{ETransactionVersion3:qe}=i,{EDataAvailabilityMode:We}=r,{EDAMode:Ke}=r;function Ge(e){return"l1_data_gas"in e}var{ETransactionStatus:ze}=r,{ETransactionExecutionStatus:Ye}=r,{ETransactionType:Xe}=i,{EBlockStatus:Ze}=i,{ETransactionFinalityStatus:Je}=i,{ETransactionExecutionStatus:Qe}=i,{EBlockTag:et}=i,tt="DEPLOY",nt="INVOKE",rt={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},at={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},it={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},st="core::zeroable::NonZero::",ot={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},ct={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};S({},{parse:()=>ut,parseAlwaysAsBig:()=>dt,stringify:()=>ht});var lt=e=>{if(!l.U(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},ut=e=>l.Qc(String(e),void 0,lt),dt=e=>l.Qc(String(e),void 0,l.A7),ht=(e,t,n,r)=>l.Pz(e,t,n,r),pt=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch,this.rpcMethods=e.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise((e=>{this.delayPromiseResolve=e}))),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout((()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)}),this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e.description||String(e),params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ht(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const e=this.sendBatch(Object.values(a));Object.keys(a).forEach((t=>{this.batchPromises[t]=e}))}const i=await this.batchPromises[r];delete this.batchPromises[r];const s=i.find((e=>e.id===r));if(!s)throw new Error(`Couldn't find the result for the request. Method: ${String(e)}`);return s}};function ft(e,t){if(!e)throw new Error(t||"Assertion failure")}S({},{addPercent:()=>Lt,assertInRange:()=>Ot,bigNumberishArrayToDecimalStringArray:()=>Rt,bigNumberishArrayToHexadecimalStringArray:()=>Dt,cleanHex:()=>Ct,getDecimalString:()=>Pt,getHexString:()=>$t,getHexStringArray:()=>Ut,getNext:()=>qt,hexToBytes:()=>Ft,hexToDecimalString:()=>Bt,isBigNumberish:()=>jt,isHex:()=>vt,isHexString:()=>wt,isStringWholeNumber:()=>Mt,stringToSha256ToArrayBuff4:()=>Ht,toBigInt:()=>It,toCairoBool:()=>Vt,toHex:()=>Tt,toHex64:()=>xt,toHexString:()=>kt,toStorageKey:()=>Nt,tryToBigInt:()=>St});var gt=e=>void 0===e||void 0===e;function yt(e){return"number"==typeof e}function mt(e){return"boolean"==typeof e}function _t(e){return"bigint"==typeof e}function bt(e){return"string"==typeof e}function At(e){return void 0!==A&&e instanceof A}function Et(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function vt(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}var wt=vt;function It(e){return BigInt(e)}function St(e){return e?BigInt(e):void 0}function Tt(e){return H(It(e).toString(16))}var kt=Tt;function Ct(e){return Tt(e)}function Nt(e){return H(It(e).toString(16).padStart(64,"0"))}function xt(e){const t=H(It(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function Bt(e){return BigInt(H(e)).toString(10)}function Ot(e,t,n,r=""){const a=""===r?"invalid length":`invalid ${r} length`,i=BigInt(e),s=BigInt(t),o=BigInt(n);ft(i>=s&&i<=o,`Message not signable, ${a}.`)}function Rt(e){return e.map((e=>It(e).toString(10)))}function Dt(e){return e.map((e=>Tt(e)))}function Mt(e){return/^\d+$/.test(e)}function Pt(e){if(vt(e))return Bt(e);if(Mt(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function $t(e){if(vt(e))return e;if(Mt(e))return kt(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function Ut(e){return e.map($t)}function Vt(e){return(+e).toString()}function Ft(e){if(!vt(e))throw new Error(`${e} needs to be a hex-string`);let t=L(e);return t.length%2!=0&&(t=`0${t}`),(0,u.hexToBytes)(t)}function Lt(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function Ht(e){var t;return Ft(Tt((t=BigInt(H(F((0,d.JQ)(e)))),Number(t&re))))}function jt(e){return yt(e)||_t(e)||bt(e)&&(vt(e)||Mt(e))}function qt(e){const t=e.next();if(t.done)throw new Error("Unexpected end of response");return t.value}function Wt(e){const t=L(Tt(BigInt(e))),n=t.length%2==0?t:`0${t}`;return H((0,h.keccak)(Ft(H(n))).toString(16))}function Kt(e){const t=BigInt(function(e){return H((0,h.keccak)(P(e)).toString(16))}(e));return t&ne}function Gt(e){return Tt(Kt(e))}function zt(e){return yt(e)||_t(e)?Tt(e):vt(e)?e:Mt(e)?Tt(e):Gt(e)}function Yt(e){const t=H(e.reduce(((e,t)=>e+L(Tt(t)).padStart(64,"0")),""));return H((0,u.ci)((0,p.fr)(Ft(t))))}function Xt(e,t,n,r,a){return Yt([e,t,a,n,r.length,...r])}function Zt(e,t,n){return Yt([e,t,n.length,...n])}S({},{getL1MessageHash:()=>Zt,getL2MessageHash:()=>Xt,getSelector:()=>zt,getSelectorFromName:()=>Gt,keccakBn:()=>Wt,solidityUint256PackedKeccak256:()=>Yt,starknetKeccak:()=>Kt});var Jt={};function Qt(e){return/^[\x00-\x7F]*$/.test(e)}function en(e){return e.length<=ee}function tn(e){return/^[0-9]*$/i.test(e)}function nn(e){return bt(e)&&!vt(e)&&!Mt(e)}S(Jt,{decodeShortString:()=>cn,encodeShortString:()=>on,isASCII:()=>Qt,isDecimalString:()=>tn,isLongText:()=>an,isShortString:()=>en,isShortText:()=>rn,isText:()=>nn,splitLongString:()=>sn});var rn=e=>nn(e)&&en(e),an=e=>nn(e)&&!en(e);function sn(e){const t=RegExp(`[^]{1,${ee}}`,"g");return e.match(t)||[]}function on(e){if(!Qt(e))throw new Error(`${e} is not an ASCII string`);if(!en(e))throw new Error(`${e} is too long`);return H(e.replace(/./g,(e=>e.charCodeAt(0).toString(16))))}function cn(e){if(!Qt(e))throw new Error(`${e} is not an ASCII string`);if(vt(e))return L(e).replace(/.{2}/g,(e=>String.fromCharCode(parseInt(e,16))));if(tn(e))return cn("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}function ln(e){const t=0n===BigInt(e.pending_word)?"":cn(Tt(e.pending_word));return e.data.reduce(((e,t)=>e+(0n===BigInt(t)?"":cn(Tt(t)))),"")+t}function un(e){const t=sn(e),n=t[t.length-1],r=t.map(on),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}S({},{byteArrayFromString:()=>un,stringFromByteArray:()=>ln});function dn(e){return Object.defineProperty(e,"__compiled__",{enumerable:!1,writable:!1,value:!0}),e}function hn(e){if(_t(e)||Number.isInteger(e))return e.toString();if(bt(e)){if(vt(e))return BigInt(e).toString();if(nn(e)){if(!en(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(on(e)).toString()}if(Mt(e))return e}if(mt(e))return""+ +e;throw new Error(`${e} can't be computed by felt()`)}S({},{felt:()=>Jn,getAbiContractVersion:()=>zn,getArrayType:()=>Wn,isCairo1Abi:()=>Kn,isCairo1Type:()=>qn,isLen:()=>Tn,isTypeArray:()=>Cn,isTypeBool:()=>Vn,isTypeContractAddress:()=>Fn,isTypeEnum:()=>On,isTypeEthAddress:()=>Ln,isTypeFelt:()=>kn,isTypeInt:()=>Pn,isTypeLiteral:()=>Un,isTypeNamedTuple:()=>xn,isTypeNonZero:()=>Gn,isTypeOption:()=>Rn,isTypeResult:()=>Dn,isTypeSecp256k1Point:()=>jn,isTypeStruct:()=>Bn,isTypeTuple:()=>Nn,isTypeU96:()=>Hn,isTypeUint:()=>Mn,isTypeUint256:()=>$n,tuple:()=>Zn,uint256:()=>Yn,uint512:()=>Xn});var pn=class e{data;static abiSelector="core::felt252";constructor(t){e.validate(t);const n=e.__processData(t);this.data=n.subarray(n.findIndex((e=>e>0)))}static __processData(e){if(bt(e))return Z(e);if(_t(e))return J(e);if(Number.isInteger(e))return J(BigInt(e));if(mt(e))return J(BigInt(e?1:0));throw new Error(`${e} can't be computed by felt()`)}toBigInt(){return Q(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return H(this.toBigInt().toString(16))}toApiRequest(){return dn([this.toHexString()])}static validate(t){ft(null!==t,"null value is not allowed for felt252"),ft(void 0!==t,"undefined value is not allowed for felt252"),ft(bt(t)||yt(t)||_t(t)||mt(t),`Unsupported data type '${typeof t}' for felt252. Expected string, number, bigint, or boolean`);const n=e.__processData(t),r=Q(n);ft(r>=0n&&r<ie,`Value ${n} is out of felt252 range [0, ${ie})`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},fn=(1n<<128n)-1n,gn=(1n<<256n)-1n,yn=0n,mn=340282366920938463463374607431768211455n,_n=340282366920938463463374607431768211455n,bn=0n,An=0n,En=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if(Et(t[0])&&1===t.length&&"low"in t[0]&&"high"in t[0]){const n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){const n=e.validate(t[0]);this.low=n&fn,this.high=n>>128n}else{if(2!==t.length)throw Error("Incorrect constructor parameters");{const n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}}}static validate(e){ft(null!==e,"null value is not allowed for u256"),ft(void 0!==e,"undefined value is not allowed for u256"),ft(jt(e)||Et(e),`Unsupported data type '${typeof e}' for u256. Expected string, number, bigint, or Uint256 object`);const t=BigInt(e);return ft(t>=yn,"bigNumberish is smaller than UINT_256_MIN"),ft(t<=gn,"bigNumberish is bigger than UINT_256_MAX"),t}static validateProps(e,t){const n=BigInt(e),r=BigInt(t);return ft(n>=bn&&n<=mn,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),ft(r>=An&&r<=_n,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=qt(t);return new e(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:H(this.low.toString(16)),high:H(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[hn(this.low),hn(this.high)]}},vn=(1n<<512n)-1n,wn=0n,In=0n,Sn=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if(Et(t[0])&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){const n=e.validate(t[0]);this.limb0=n&fn,this.limb1=(n&fn<<128n)>>128n,this.limb2=(n&fn<<256n)>>256n,this.limb3=n>>384n}else{if(4!==t.length)throw Error("Incorrect Uint512 constructor parameters");{const n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(e){ft(null!==e,"null value is not allowed for u512"),ft(void 0!==e,"undefined value is not allowed for u512"),ft(jt(e)||Et(e),`Unsupported data type '${typeof e}' for u512. Expected string, number, bigint, or Uint512 object`);const t=BigInt(e);return ft(t>=wn,"bigNumberish is smaller than UINT_512_MIN."),ft(t<=vn,"bigNumberish is bigger than UINT_512_MAX."),t}static validateProps(e,t,n,r){const a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach(((e,t)=>{ft(e>=In&&e<=fn,`limb${t} is not in the range of a u128 number`)})),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=qt(t),a=qt(t),i=qt(t);return new e(n,r,a,i)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:H(this.limb0.toString(16)),limb1:H(this.limb1.toString(16)),limb2:H(this.limb2.toString(16)),limb3:H(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[hn(this.limb0),hn(this.limb1),hn(this.limb2),hn(this.limb3)]}},Tn=e=>/_len$/.test(e),kn=e=>"felt"===e||"core::felt252"===e,Cn=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),Nn=e=>/^\(.*\)$/i.test(e),xn=e=>/\(.*\)/i.test(e)&&e.includes(":"),Bn=(e,t)=>e in t,On=(e,t)=>e in t,Rn=e=>e.startsWith("core::option::Option::"),Dn=e=>e.startsWith("core::result::Result::"),Mn=e=>Object.values(rt).includes(e),Pn=e=>Object.values(at).includes(e),$n=e=>En.isAbiType(e),Un=e=>Object.values(it).includes(e),Vn=e=>"core::bool"===e,Fn=e=>e===it.ContractAddress,Ln=e=>"core::starknet::eth_address::EthAddress"===e,Hn=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,jn=e=>e===it.Secp256k1Point,qn=e=>e.includes("::"),Wn=e=>qn(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function Kn(e){const{cairo:t}=zn(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function Gn(e){return e.startsWith(st)}function zn(e){if(e.find((e=>"interface"===e.type)))return{cairo:"1",compiler:"2"};const t=e.find((e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length)));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return qn(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Yn=e=>new En(e).toUint256DecimalString(),Xn=e=>new Sn(e).toUint512DecimalString(),Zn=(...e)=>({...e});function Jn(e){return hn(e)}var Qn=class{variant;constructor(e){const t=Object.values(e);if(0===t.length)throw new Error("This Enum must have at least 1 variant");if(1!==t.filter((e=>!gt(e))).length)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find((e=>!gt(e)))}activeVariant(){const e=Object.entries(this.variant).find((e=>!gt(e[1])));return gt(e)?"":e[0]}},er={Some:0,None:1},tr=class{Some;None;constructor(e,t){if(!(e in Object.values(er)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===er.Some){if(gt(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!gt(this.Some)}isNone(){return!0===this.None}},nr={Ok:0,Err:1},rr=class{Ok;Err;constructor(e,t){if(!(e in Object.values(nr)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===nr.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!gt(this.Ok))return this.Ok;if(!gt(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!gt(this.Ok)}isErr(){return!gt(this.Err)}},ar=(e,t,n)=>{if(!_t(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)};function ir(e,t,n){return Object.entries(e).reduce(((r,[a,i])=>{const s=n??t[a];if(!(a in t)&&!n)return r[a]=i,r;if("string"===s){if(Array.isArray(e[a])){const t=ir(e[a],e[a].map((e=>s)));return r[a]=Object.values(t).join(""),r}return ar(e,t,a),r[a]=cn(i),r}if("number"===s)return ar(e,t,a),r[a]=Number(i),r;if("function"==typeof s)return r[a]=s(i),r;if(Array.isArray(s)){const t=ir(e[a],s,s[0]);return r[a]=Object.values(t),r}return Et(s)?(r[a]=ir(e[a],s),r):(((e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)})(e,t,a),r)}),{})}var sr=class e{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(t){e.validate(t);const n=e.__processData(t);this.data=new Uint8Array(e.MAX_BYTE_SIZE),this.data.set(n,e.MAX_BYTE_SIZE-n.length)}static __processData(e){if(bt(e))return Z(e);if(At(e))return new Uint8Array(e);if(e instanceof Uint8Array)return new Uint8Array(e);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return Q(this.data)}decodeUtf8(){const e=this.data.findIndex((e=>e>0)),t=this.data.subarray(e>=0?e:1/0);return(new TextDecoder).decode(t)}toHexString(e){return H("padded"===e?F(this.data):this.toBigInt().toString(16))}static validate(t){const n=e.__processData(t).length;ft(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},or={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},cr=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},lr=class extends cr{},ur=class extends lr{constructor(e,t,n){super(`RPC: ${t} with params ${ht(n,null,2)}\n\n      ${e.code}: ${e.message}: ${ht(e.data)}`),this.baseError=e,this.request={method:t,params:n}}request;get code(){return this.baseError.code}isType(e){return or[e]===this.code}},dr=Ue.get("buffer")||void 0!==A&&A||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||"undefined"!=typeof global&&global.Buffer||class{constructor(){throw new lr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(e){throw new lr("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(e){const t=Ue.get("buffer")||void 0!==A&&A;return t&&t.isBuffer&&t.isBuffer(e)}},hr=class e{data;static abiSelector="core::u32::u32";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},pr=class e{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...t){if(3===t.length){const[e,n,r]=t;return ft(Array.isArray(e)&&n instanceof pn&&r instanceof hr,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=e,this.pending_word=n,void(this.pending_word_len=r)}const n=t[0];e.validate(n);const{data:r,pending_word:a,pending_word_len:i}=e.__processData(n);this.data=r,this.pending_word=a,this.pending_word_len=i}static __processData(e){let t;if(e instanceof Uint8Array)t=e;else if(At(e))t=new Uint8Array(e);else if(bt(e))t=Z(e);else if(_t(e))t=J(e);else{if(n=e,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");t=J(BigInt(e))}var n;const r=sr.MAX_BYTE_SIZE,a=Math.floor(t.length/r),i=t.length%r,s=[];let o,c;for(let e=0;e<a;e+=1){const n=e*r,a=n+r,i=t.slice(n,a);s.push(new sr(i))}if(i>0){const e=t.slice(a*r);let n="0x";for(let t=0;t<e.length;t+=1)n+=e[t].toString(16).padStart(2,"0");o=new pn(n),c=new hr(i)}else o=new pn(0),c=new hr(0);return{data:s,pending_word:o,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),dn([H(this.data.length.toString(16)),...this.data.flatMap((e=>e.toApiRequest())),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const e=z(this.toElements());return(new TextDecoder).decode(e)}toBigInt(){const e=z(this.toElements());if(0===e.length)return 0n;let t=0n;return e.forEach((e=>{t=256n*t+BigInt(e)})),t}toHexString(){const e=z(this.toElements());return H(0===e.length?"0":F(e))}toBuffer(){const e=z(this.toElements());return dr.from(e)}toElements(){this.assertInitialized();const e=this.data.flatMap((e=>e.data)),t=Number(this.pending_word_len.toBigInt());if(t){const n=new Uint8Array(t),r=t-this.pending_word.data.length;n.set(this.pending_word.data,r),e.push(n)}return e}assertInitialized(){ft(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(e){ft(null!=e,"Invalid input: null or undefined"),ft(!Array.isArray(e)||e instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),ft("object"!=typeof e||At(e)||e instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),ft(!yt(e)||Number.isInteger(e),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),ft(!yt(e)||e>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),ft(!_t(e)||e>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),ft(e instanceof Uint8Array||At(e)||bt(e)||yt(e)||_t(e),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=Array.from({length:Number(qt(t))},(()=>sr.factoryFromApiResponse(t))),r=pn.factoryFromApiResponse(t),a=hr.factoryFromApiResponse(t);return new e(n,r,a)}},fr=class e{data;static abiSelector="core::integer::u8";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=ue.min&&n<=ue.max,`Value is out of u8 range [${ue.min}, ${ue.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},gr=class e{data;static abiSelector="core::integer::u16";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=de.min&&n<=de.max,`Value is out of u16 range [${de.min}, ${de.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},yr=class e{data;static abiSelector="core::integer::u64";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=pe.min&&n<=pe.max,`Value is out of u64 range [${pe.min}, ${pe.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},mr=class e{data;static abiSelector="core::integer::u96";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=fe.min&&n<=fe.max,`Value is out of u96 range [${fe.min}, ${fe.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},_r=class e{data;static abiSelector="core::integer::u128";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data))}toHexString(){return H(this.toBigInt().toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=ge.min&&n<=ge.max,`Value is out of u128 range [${ge.min}, ${ge.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){return new e(qt(t))}},br=class e{data;static abiSelector="core::integer::i8";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data>=0n?this.data:256n+this.data))}toHexString(){const e=this.toBigInt();return H(e<0n?(ie+e).toString(16):e.toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=ye.min&&n<=ye.max,`Value is out of i8 range [${ye.min}, ${ye.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=BigInt(n);return new e(r>ie/2n?r-ie:r)}},Ar=class e{data;static abiSelector="core::integer::i16";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data>=0n?this.data:65536n+this.data))}toHexString(){const e=this.toBigInt();return H(e<0n?(ie+e).toString(16):e.toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=me.min&&n<=me.max,`Value is out of i16 range [${me.min}, ${me.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=BigInt(n);return new e(r>ie/2n?r-ie:r)}},Er=class e{data;static abiSelector="core::integer::i32";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const e=this.toBigInt();return H(e<0n?(ie+e).toString(16):e.toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=_e.min&&n<=_e.max,`Value is out of i32 range [${_e.min}, ${_e.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=BigInt(n);return new e(r>ie/2n?r-ie:r)}},vr=class e{data;static abiSelector="core::integer::i64";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const e=this.toBigInt();return H(e<0n?(ie+e).toString(16):e.toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=be.min&&n<=be.max,`Value is out of i64 range [${be.min}, ${be.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=BigInt(n);return new e(r>ie/2n?r-ie:r)}},wr=class e{data;static abiSelector="core::integer::i128";constructor(t){e.validate(t),this.data=e.__processData(t)}static __processData(e){return bt(e)&&nn(e)?$(e):BigInt(e)}toApiRequest(){return dn([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(J(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const e=this.toBigInt();return H(e<0n?(ie+e).toString(16):e.toString(16))}static validate(t){ft(null!=t,"Invalid input: null or undefined"),ft(!Et(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),ft(!yt(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=e.__processData(t);ft(n>=Ae.min&&n<=Ae.max,`Value is out of i128 range [${Ae.min}, ${Ae.max}]`)}static is(t){try{return e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===e.abiSelector}static factoryFromApiResponse(t){const n=qt(t),r=BigInt(n);return new e(r>ie/2n?r-ie:r)}},Ir=(sr.abiSelector,pr.abiSelector,pn.abiSelector,En.abiSelector,Sn.abiSelector,fr.abiSelector,gr.abiSelector,yr.abiSelector,mr.abiSelector,_r.abiSelector,br.abiSelector,Ar.abiSelector,Er.abiSelector,vr.abiSelector,wr.abiSelector,sr.abiSelector,pr.abiSelector,pn.abiSelector,En.abiSelector,Sn.abiSelector,fr.abiSelector,gr.abiSelector,yr.abiSelector,mr.abiSelector,_r.abiSelector,br.abiSelector,Ar.abiSelector,Er.abiSelector,vr.abiSelector,wr.abiSelector,{request:{[sr.abiSelector]:e=>new sr(e).toApiRequest(),[pr.abiSelector]:e=>new pr(e).toApiRequest(),[pn.abiSelector]:e=>Jn(e),[En.abiSelector]:e=>new En(e).toApiRequest(),[Sn.abiSelector]:e=>new Sn(e).toApiRequest(),[fr.abiSelector]:e=>Jn(e),[gr.abiSelector]:e=>Jn(e),[yr.abiSelector]:e=>Jn(e),[mr.abiSelector]:e=>Jn(e),[_r.abiSelector]:e=>Jn(e),[br.abiSelector]:e=>new br(e).toApiRequest(),[Ar.abiSelector]:e=>new Ar(e).toApiRequest(),[Er.abiSelector]:e=>new Er(e).toApiRequest(),[vr.abiSelector]:e=>new vr(e).toApiRequest(),[wr.abiSelector]:e=>new wr(e).toApiRequest()},response:{[sr.abiSelector]:e=>sr.factoryFromApiResponse(e).decodeUtf8(),[pr.abiSelector]:e=>pr.factoryFromApiResponse(e).decodeUtf8(),[pn.abiSelector]:e=>BigInt(qt(e)),[En.abiSelector]:e=>En.factoryFromApiResponse(e).toBigInt(),[Sn.abiSelector]:e=>Sn.factoryFromApiResponse(e).toBigInt(),[fr.abiSelector]:e=>BigInt(qt(e)),[gr.abiSelector]:e=>BigInt(qt(e)),[yr.abiSelector]:e=>BigInt(qt(e)),[mr.abiSelector]:e=>BigInt(qt(e)),[_r.abiSelector]:e=>BigInt(qt(e)),[br.abiSelector]:e=>BigInt(qt(e)),[Ar.abiSelector]:e=>BigInt(qt(e)),[Er.abiSelector]:e=>BigInt(qt(e)),[vr.abiSelector]:e=>BigInt(qt(e)),[wr.abiSelector]:e=>BigInt(qt(e))}});function Sr(e,t,n){return"constructor"===e&&!n&&!t.length}function Tr(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return Number.POSITIVE_INFINITY}function kr(e){return qn(e)?function(e){const t=e.slice(1,-1),n=[];let r,a=0;for(;a<t.length;){switch(!0){case"("===t[a]:r=a+Tr(t.slice(a),"(",")")+1;break;case t.startsWith("core::result::Result::<",a)||t.startsWith("core::array::Array::<",a)||t.startsWith("core::option::Option::<",a):r=a+Tr(t.slice(a),"<",">")+1;break;default:{const e=t.indexOf(",",a);r=-1!==e?e:Number.POSITIVE_INFINITY}}n.push(t.slice(a,r)),a=r+2}return n}(e):function(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1;const i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(t);let a=r.split(",").map((e=>n.length?e.replace(" ",n.shift()):e));return xn(e)&&(a=a.reduce(((e,t)=>e.concat(function(e){const t=e.substring(0,e.indexOf(":"));return{name:t,type:e.substring(t.length+1)}}(t))),[])),a}(e)}var Cr=class e{content;arrayType;constructor(t,n){ft(e.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=e.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}ft(r===t.length,`The ABI type ${n} is expecting ${r} items. ${t.length} items provided.`),this.content=t,this.arrayType=n}static getFixedArraySize(e){const t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{const t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce(((e,t,n)=>(e[n]=t,e)),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function Nr({type:e,val:t,parser:n}){switch(!0){case En.isAbiType(e):case Sn.isAbiType(e):case fr.isAbiType(e):case gr.isAbiType(e):case yr.isAbiType(e):case mr.isAbiType(e):case _r.isAbiType(e):case br.isAbiType(e):case Ar.isAbiType(e):case Er.isAbiType(e):case vr.isAbiType(e):case wr.isAbiType(e):case sr.isAbiType(e):return n.getRequestParser(e)(t);case jn(e):{const e=L(Tt(t)).padStart(128,"0"),n=Yn(H(e.slice(-64))),r=Yn(H(e.slice(0,-64)));return[Jn(r.low),Jn(r.high),Jn(n.low),Jn(n.high)]}default:return n.getRequestParser(pn.abiSelector)(t)}}function xr({element:e,type:t,structs:n,enums:r,parser:a}){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Cr.isTypeFixedArray(t)){const i=Cr.getFixedArrayType(t);let s=[];if(Array.isArray(e))s=new Cr(e,t).content;else{if("object"!=typeof e)throw new Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);s=Object.values(e),ft(s.length===Cr.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${Cr.getFixedArraySize(t)} items. ${s.length} items provided.`)}return s.reduce(((e,t)=>e.concat(xr({element:t,type:i,structs:n,enums:r,parser:a}))),[])}if(Array.isArray(e)){const i=[];i.push(Jn(e.length));const s=Wn(t);return e.reduce(((e,t)=>e.concat(xr({element:t,type:s,structs:n,enums:r,parser:a}))),i)}if(En.isAbiType(t))return a.getRequestParser(t)(e);if(Sn.isAbiType(t))return a.getRequestParser(t)(e);if(n[t]&&n[t].members.length){if(Ln(t))return Nr({type:t,val:e,parser:a});if(pr.isAbiType(t))return a.getRequestParser(t)(e);const{members:i}=n[t],s=e;return i.reduce(((e,t)=>e.concat(xr({element:s[t.name],type:t.type,structs:n,enums:r,parser:a}))),[])}if(Nn(t)){const i=function(e,t){const n=kr(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map(((e,t)=>({element:r[t],type:e.type??e})))}(e,t);return i.reduce(((e,t)=>{const i=xr({element:t.element,type:t.type,structs:n,enums:r,parser:a});return e.concat(i)}),[])}if(On(t,r)){const{variants:i}=r[t];if(Rn(t)){const t=e;if(t.isSome()){const e=i.find((e=>"Some"===e.name));if(gt(e))throw Error("Error in abi : Option has no 'Some' variant.");const s=e.type;if("()"===s)return er.Some.toString();const o=xr({element:t.unwrap(),type:s,structs:n,enums:r,parser:a});return Array.isArray(o)?[er.Some.toString(),...o]:[er.Some.toString(),o]}return er.None.toString()}if(Dn(t)){const t=e;if(t.isOk()){const e=i.find((e=>"Ok"===e.name));if(gt(e))throw Error("Error in abi : Result has no 'Ok' variant.");const s=e.type;if("()"===s)return nr.Ok.toString();const o=xr({element:t.unwrap(),type:s,structs:n,enums:r,parser:a});return Array.isArray(o)?[nr.Ok.toString(),...o]:[nr.Ok.toString(),o]}const s=i.find((e=>"Err"===e.name));if(gt(s))throw Error("Error in abi : Result has no 'Err' variant.");const o=s.type;if("()"===o)return nr.Err.toString();const c=xr({element:t.unwrap(),type:o,structs:n,enums:r,parser:a});return Array.isArray(c)?[nr.Err.toString(),...c]:[nr.Err.toString(),c]}const s=e,o=s.activeVariant(),c=i.find((e=>e.name===o));if(gt(c))throw Error(`Not find in abi : Enum has no '${o}' variant.`);const l=c.type,u=i.findIndex((e=>e.name===o));if("()"===l)return u.toString();const d=xr({element:s.unwrap(),type:l,structs:n,enums:r,parser:a});return Array.isArray(d)?[u.toString(),...d]:[u.toString(),d]}if(Gn(t))return Nr({type:Wn(t),val:e,parser:a});if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return Nr({type:t,val:e,parser:a})}function Br(e,t,n){let r;switch(!0){case Vn(e):return r=t.next().value,Boolean(BigInt(r));case En.isAbiType(e):case Sn.isAbiType(e):case fr.isAbiType(e):case gr.isAbiType(e):case yr.isAbiType(e):case mr.isAbiType(e):case _r.isAbiType(e):case br.isAbiType(e):case Ar.isAbiType(e):case Er.isAbiType(e):case vr.isAbiType(e):case wr.isAbiType(e):return n.getResponseParser(e)(t);case Ln(e):return r=t.next().value,BigInt(r);case sr.isAbiType(e):return n.getResponseParser(e)(t);case jn(e):const a=L(t.next().value).padStart(32,"0"),i=L(t.next().value).padStart(32,"0"),s=L(t.next().value).padStart(32,"0"),o=L(t.next().value).padStart(32,"0");return BigInt(H(i+a+o+s));default:return n.getResponseParser(pn.abiSelector)(t)}}function Or(e,t,n,r,a){if("()"===t.type)return{};if(En.isAbiType(t.type))return n.getResponseParser(t.type)(e);if(Sn.isAbiType(t.type))return n.getResponseParser(t.type)(e);if(pr.isAbiType(t.type))return n.getResponseParser(t.type)(e);if(Cr.isTypeFixedArray(t.type)){const i=[],s={name:"",type:Cr.getFixedArrayType(t.type)},o=Cr.getFixedArraySize(t.type);for(;i.length<o;)i.push(Or(e,s,n,r,a));return i}if(Cn(t.type)){const i=[],s={name:"",type:Wn(t.type)},o=BigInt(e.next().value);for(;i.length<o;)i.push(Or(e,s,n,r,a));return i}if(Gn(t.type)){const i={name:"",type:Wn(t.type)};return Or(e,i,n,r,a)}if(r&&t.type in r&&r[t.type])return Ln(t.type)?Br(t.type,e,n):r[t.type].members.reduce(((t,i)=>(t[i.name]=Or(e,i,n,r,a),t)),{});if(a&&t.type in a&&a[t.type]){const i=Number(e.next().value),s=a[t.type].variants.reduce(((t,s,o)=>o===i?(t[s.name]=Or(e,{name:"",type:s.type},n,r,a),t):(t[s.name]=void 0,t)),{});if(t.type.startsWith("core::option::Option")){const e=i===er.Some?s.Some:void 0;return new tr(i,e)}if(t.type.startsWith("core::result::Result")){let e;return e=i===nr.Ok?s.Ok:s.Err,new rr(i,e)}return new Qn(s)}if(Nn(t.type))return kr(t.type).reduce(((t,i,s)=>{const o=i?.name?i.name:s,c={name:o,type:i?.type?i.type:i};return t[o]=Or(e,c,n,r,a),t}),{});if(Cn(t.type)){const i=[],s={name:"",type:Wn(t.type)},o=BigInt(e.next().value);for(;i.length<o;)i.push(Or(e,s,n,r,a));return i}return Br(t.type,e,n)}function Rr({responseIterator:e,output:t,structs:n,enums:r,parsedResult:a,parser:i}){const{name:s,type:o}=t;let c;switch(!0){case Tn(s):return c=e.next().value,BigInt(c);case n&&o in n||Nn(o):case r&&On(o,r):case Cr.isTypeFixedArray(o):return Or(e,t,i,n,r);case Cn(o):if(qn(o))return Or(e,t,i,n,r);const l=[];if(a&&a[`${s}_len`]){const o=a[`${s}_len`];for(;l.length<o;)l.push(Or(e,{name:s,type:t.type.replace("*","")},i,n,r))}return l;case Gn(o):return Or(e,t,i,n,r);default:return Br(o,e,i)}}var Dr=(e,t)=>{if(ft(bt(e)||yt(e)||_t(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),bt(e)&&!vt(e))return;const n=BigInt(e.toString(10));ft(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},Mr=(e,t)=>{let n;switch(yt(e)&&ft(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),ft(bt(e)||yt(e)||_t(e)||Et(e)&&"low"in e&&"high"in e||Et(e)&&["limb0","limb1","limb2","limb3"].every((t=>t in e)),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case rt.u256:n=new En(e).toBigInt();break;case rt.u512:n=new Sn(e).toBigInt();break;default:n=It(e)}switch(t.type){case rt.u8:ft(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case rt.u16:ft(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case rt.u32:ft(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case rt.u64:ft(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case rt.u128:ft(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case rt.u256:ft(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case rt.u512:ft(Sn.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case it.ClassHash:case it.ContractAddress:ft(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case it.Secp256k1Point:ft(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case it.U96:ft(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},Pr=(e,t)=>{ft(mt(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},$r=(e,t,n)=>{if(t.type!==rt.u256&&t.type!==rt.u512)if(Ln(t.type)){ft(!Et(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const n=BigInt(e.toString(10));ft(n>=0n&&n<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`)}else ft(Et(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach((({name:n})=>{ft(Object.keys(e).includes(n),`Validate: arg ${t.name} should have a property ${n}`)}));else Mr(e,t)},Ur=(e,t)=>{ft(Et(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(Rn(t.type)&&r.includes("isSome")&&r.includes("isNone")||Dn(t.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},Vr=(e,t)=>{ft(Et(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},Fr=(e,t,n,r)=>{const a=Cn(t.type),i=a?Wn(t.type):Cr.getFixedArrayType(t.type);if(a&&kn(i)&&an(e))return;let s=[];if(a)ft(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw new Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case kn(i):s.forEach((e=>Dr(e,t)));break;case Nn(i):s.forEach((e=>Vr(e,{name:t.name,type:i})));break;case Cn(i):s.forEach((e=>Fr(e,{name:"",type:i},n,r)));break;case Bn(i,n):s.forEach((e=>$r(e,{name:t.name,type:i},n)));break;case On(i,r):s.forEach((e=>Ur(e,{name:t.name,type:i})));break;case Mn(i)||Un(i):s.forEach((e=>Mr(e,{name:"",type:i})));break;case Vn(i):s.forEach((e=>Pr(e,t)));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function Lr(e,t,n,r){e.inputs.reduce(((e,a)=>{const i=t[e];switch(!0){case Tn(a.name):return e;case kn(a.type):Dr(i,a);break;case sr.isAbiType(a.type):sr.validate(i);break;case Mn(a.type)||Un(a.type):Mr(i,a);break;case Vn(a.type):Pr(i,a);break;case pr.isAbiType(a.type):pr.validate(i);break;case br.isAbiType(a.type):br.validate(i);break;case Ar.isAbiType(a.type):Ar.validate(i);break;case Er.isAbiType(a.type):Er.validate(i);break;case vr.isAbiType(a.type):vr.validate(i);break;case wr.isAbiType(a.type):wr.validate(i);break;case Cn(a.type)||Cr.isTypeFixedArray(a.type):Fr(i,a,n,r);break;case Bn(a.type,n):$r(i,a,n);break;case On(a.type,r):Ur(i,a);break;case Nn(a.type):Vr(i,a);break;case Gn(a.type):((e,t)=>{const n=Wn(t.type);switch(ft(Mn(n)&&n!==Sn.abiSelector||kn(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case kn(n):Dr(e,t),ft(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Mn(n):Mr(e,{name:"",type:n}),n===rt.u256?ft(new En(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):ft(It(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}})(i,a);break;default:throw new Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1}),0)}var Hr=class e{abi;parser;structs;enums;constructor(t,n){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e,t){const n=function(e){return e.find((e=>"interface"===e.type))?2:Kn(e)?1:0}(e);if(0===n||1===n)return new class{abi;parsingStrategy;constructor(e,t){this.abi=e,this.parsingStrategy=t||Ir}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.reduce(((e,t)=>Tn(t.name)?e:e+1),0)}getMethod(e){return this.abi.find((t=>t.name===e))}getLegacyFormat(){return this.abi}}(e,t);if(2===n)return new class{abi;parsingStrategy;constructor(e,t){this.abi=e,this.parsingStrategy=t||Ir}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.length}getMethod(e){const t=this.abi.find((e=>"interface"===e.type));return t?.items?.find((t=>t.name===e))}getLegacyFormat(){return this.abi.flatMap((e=>"interface"===e.type?e.items:e))}}(e,t);throw Error(`Unsupported ABI version ${n}`)}(t,n),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){e!==tt&&ft(this.abi.filter((t=>{if("function"!==t.type)return!1;const n="view"===t.stateMutability||"view"===t.state_mutability;return e===nt?!n:n})).map((e=>e.name)).includes(t),(e===nt?"invocable":"viewable")+" method not found in abi");const r=this.abi.find((n=>e===tt?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type));if(Sr(t,n,r))return;const a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${n.length}`);Lr(r,n,this.structs,this.enums)}compile(e,t){const n=this.abi.find((t=>t.name===e));if(Sr(e,t,n))return[];let r;if(Array.isArray(t))r=t;else{const e=function(e,t,n,r){const a=(e,t)=>{if(Cr.isTypeFixedArray(t))return function(e,t){const n=Cr.getFixedArrayType(t),r=Cr.getFixedArraySize(t);if(Array.isArray(e)){if(r!==e.length)throw new Error(`ABI type ${t}: array provided do not includes  ${r} items. ${e.length} items provided.`);return e.map((e=>a(e,n)))}if(r!==Object.keys(e).length)throw new Error(`ABI type ${t}: object provided do not includes  ${r} properties. ${Object.keys(e).length} items provided.`);return a(e,n)}(e,t);if(Cn(t))return function(e,t){const n=Wn(t);return bt(e)?e:e.map((e=>a(e,n)))}(e,t);if(On(t,r)){const n=r[t];return s(e,n)}if(Nn(t))return function(e,t){const n=kr(t).reduce(((t,n,r)=>{const i=Object.keys(e),s=n?.type?n.type:n;return o=a(e[i[r]],s),Object.defineProperty(t,r.toString(),{enumerable:!0,value:o??e[i[r]]}),t;var o}),{});return n}(e,t);if(Ln(t))return e;if(Gn(t))return e;if(pr.isAbiType(t))return e;if(Hn(t))return e;if(jn(t))return e;if(En.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(Sn.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every((e=>e in n)))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(Bn(t,n)){const r=n[t].members;return i(e,r)}return e},i=(e,t)=>t.reduce(((t,n)=>{if("undefined"===e[n.name]&&(qn(n.type)||!Tn(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r??e[n.name]}),t}),{}),s=(e,t)=>{if(Dn(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),i=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return n.isOk()?new rr(nr.Ok,a(e.unwrap(),r)):new rr(nr.Err,a(e.unwrap(),i))}if(Rn(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return n.isSome()?new tr(er.Some,a(n.unwrap(),r)):new tr(er.None,{})}const n=e,r=Object.entries(n.variant).map((e=>{if(gt(e[1]))return e;const r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?e:[e[0],a(n.unwrap(),r)]}));return new Qn(Object.fromEntries(r))};return t.reduce(((t,n)=>{return Tn(n.name)&&!qn(n.type)||(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r})),t;var r}),{})}(t,n.inputs,this.structs,this.enums);r=Object.values(e),Lr(n,r,this.structs,this.enums)}const a=r[Symbol.iterator](),i=n.inputs.reduce(((e,t)=>Tn(t.name)&&!qn(t.type)?e:e.concat(function({argsIterator:e,input:t,structs:n,enums:r,parser:a}){const{name:i,type:s}=t;let{value:o}=e.next();switch(!0){case Cr.isTypeFixedArray(s):if(!Array.isArray(o)&&"object"!=typeof o)throw Error(`ABI expected parameter ${i} to be an array or an object, got ${o}`);return xr({element:o,type:t.type,structs:n,enums:r,parser:a});case Cn(s):if(!Array.isArray(o)&&!nn(o))throw Error(`ABI expected parameter ${i} to be array or long string, got ${o}`);return bt(o)&&(o=sn(o)),xr({element:o,type:t.type,structs:n,enums:r,parser:a});case Gn(s):return Nr({type:Wn(s),val:o,parser:a});case Ln(s):return Nr({type:s,val:o,parser:a});case Bn(s,n)||Nn(s)||En.isAbiType(s):case On(s,r):return xr({element:o,type:s,structs:n,enums:r,parser:a});default:return Nr({type:s,val:o,parser:a})}}({argsIterator:a,input:t,structs:this.structs,enums:this.enums,parser:this.parser}))),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){const t=e=>{const t=(e,n=".")=>{const r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap((([e,a])=>{let i=a;"entrypoint"===e?i=Gt(i):an(i)&&(i=un(i));const s=Array.isArray(r)&&"0"===e?"$$len":e;if(_t(i))return[[`${n}${s}`,Jn(i)]];if(Object(i)===i){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),r=[...Object.getOwnPropertyNames(i),...e];if(r.includes("isSome")&&r.includes("isNone")){const e=i,r=e.isSome()?er.Some:er.None;return e.isSome()?t({0:r,1:e.unwrap()},`${n}${s}.`):[[`${n}${s}`,Jn(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const e=i,r=e.isOk()?nr.Ok:nr.Err;return t({0:r,1:e.unwrap()},`${n}${s}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const e=i,r=e.activeVariant(),a=Object.keys(e.variant).findIndex((e=>e===r));return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${n}${s}`,Jn(a)]]:t({0:a,1:e.unwrap()},`${n}${s}.`)}return t(i,`${n}${s}.`)}return[[`${n}${s}`,Jn(i)]]}))};return Object.fromEntries(t(e))};let n;if(Array.isArray(e)){const r=t({...e});n=Object.values(r)}else{const r=t(e);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(e,t){const{outputs:n}=this.abi.find((t=>t.name===e)),r=t.flat()[Symbol.iterator](),a=n.flat().reduce(((e,t,n)=>{const a=t.name??n;return e[a]=Rr({responseIterator:r,output:t,structs:this.structs,enums:this.enums,parsedResult:e,parser:this.parser}),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e}),{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return ir(this.parse(e,t),n)}static getAbiStruct(e){return e.filter((e=>"struct"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{})}static getAbiEnum(e){const t=e.filter((e=>"enum"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map((e=>Tt(e)))}decodeParameters(e,t){const n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map((e=>Rr({responseIterator:r,output:{name:"",type:e},parser:this.parser,structs:this.structs,enums:this.enums})));return 1===a.length?a[0]:a}},jr={};S(jr,{COMPILED_CLASS_VERSION:()=>ga,blake2sHashMany:()=>Ra,calculateContractAddressFromHash:()=>wa,calculateDeclareTransactionHash:()=>pa,calculateDeployAccountTransactionHash:()=>fa,calculateInvokeTransactionHash:()=>ha,calculateL2MessageTxHash:()=>da,computeCompiledClassHash:()=>ja,computeCompiledClassHashBlake:()=>$a,computeCompiledClassHashPoseidon:()=>xa,computeContractClassHash:()=>Ha,computeHashOnElements:()=>Ea,computeHintedClassHash:()=>Ia,computeLegacyContractClassHash:()=>Sa,computePedersenHash:()=>Aa,computePedersenHashOnElements:()=>va,computePoseidonHash:()=>Ta,computePoseidonHashOnElements:()=>ka,computeSierraContractClassHash:()=>Oa,encodeBuiltins:()=>_a,flattenEntryPointData:()=>ba,formatSpaces:()=>ya,getL1MessageHash:()=>Zt,getL2MessageHash:()=>Xt,getSelector:()=>zt,getSelectorFromName:()=>Gt,hashByteCodeSegments:()=>Na,hashByteCodeSegmentsBlake:()=>Pa,keccakBn:()=>Wt,nullSkipReplacer:()=>ma,poseidon:()=>f,solidityUint256PackedKeccak256:()=>Yt,starknetKeccak:()=>Kt}),S({},{calculateDeclareTransactionHash:()=>aa,calculateDeployAccountTransactionHash:()=>ra,calculateInvokeTransactionHash:()=>ia,calculateTransactionHashCommon:()=>na,encodeDataResourceBoundsL1:()=>ea,encodeResourceBoundsL1:()=>Jr,encodeResourceBoundsL2:()=>Qr,hashDAMode:()=>Zr,hashFeeFieldV3B3:()=>ta});var qr=e=>e.map((e=>BigInt(e))),Wr=32n,Kr=128n,Gr=64n+Kr,zr=BigInt(on("L1_GAS")),Yr=BigInt(on("L2_GAS")),Xr=BigInt(on("L1_DATA"));function Zr(e,t){return(BigInt(e)<<Wr)+BigInt(t)}function Jr(e){return(zr<<Gr)+(e.l1_gas.max_amount<<Kr)+e.l1_gas.max_price_per_unit}function Qr(e){return(Yr<<Gr)+(e.l2_gas.max_amount<<Kr)+e.l2_gas.max_price_per_unit}function ea(e){return(Xr<<Gr)+(e.l1_data_gas.max_amount<<Kr)+e.l1_data_gas.max_price_per_unit}function ta(e,t){const n=Jr(t),r=Qr(t),a=ea(t);return(0,h.poseidonHashMany)([BigInt(e),n,r,a])}function na(e,t,n,r,a,i,s,o,c,l,u=[]){const d=ta(i,l),p=Zr(o,c),f=qr([e,t,n,d,(0,h.poseidonHashMany)(qr(s)),r,a,p,...qr(u)]);return Tt((0,h.poseidonHashMany)(f))}function ra(e,t,n,r,a,i,s,o,c,l,u,d){return na(Be.DEPLOY_ACCOUNT,a,e,i,s,u,d,o,c,l,[(0,h.poseidonHashMany)(qr(n)),t,r])}function aa(e,t,n,r,a,i,s,o,c,l,u,d){return na(Be.DECLARE,r,n,a,i,u,qr(d),o,c,l,[(0,h.poseidonHashMany)(qr(s)),e,t])}function ia(e,t,n,r,a,i,s,o,c,l,u){return na(Be.INVOKE,t,e,r,a,l,u,s,o,c,[(0,h.poseidonHashMany)(qr(i)),(0,h.poseidonHashMany)(qr(n))])}function sa(e){return[...e,e.length].reduce(((e,t)=>h.pedersen(It(e),It(t))),0).toString()}function oa(e,t,n,r,a,i,s,o=[]){const c=sa(a);return sa([e,t,n,r,c,i,s,...o])}function ca(e,t,n,r,a,i,s){return oa(Be.DECLARE,n,t,0,[e],r,a,[i,...s?[s]:[]])}function la(e,t,n,r,a,i,s,o){const c=[t,r,...n];return oa(Be.DEPLOY_ACCOUNT,a,e,0,c,i,s,[o])}function ua(e,t,n,r,a,i){return oa(Be.INVOKE,t,e,0,n,r,a,[i])}function da(e,t,n,r,a,i){const s=[e,...r];return oa(Be.L1_HANDLER,0,t,zt(n),s,0,a,[i])}function ha(e){if(function(e){return[C.ETransactionVersion.V3,C.ETransactionVersion.F3].includes(e.version)}(e))return ia(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function pa(e){if(function(e){return[C.ETransactionVersion.V3,C.ETransactionVersion.F3].includes(e.version)}(e))return aa(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function fa(e){if(function(e){return[C.ETransactionVersion.V3,C.ETransactionVersion.F3].includes(e.version)}(e))return ra(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}S({},{calculateDeclareTransactionHash:()=>ca,calculateDeployAccountTransactionHash:()=>la,calculateL2MessageTxHash:()=>da,calculateTransactionHash:()=>ua,calculateTransactionHashCommon:()=>oa,computeHashOnElements:()=>sa}),S({},{starkCurve:()=>h,weierstrass:()=>g});var ga="COMPILED_CLASS_V1";function ya(e){let t=!1;const n=[];for(const r of e)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function ma(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function _a(e){return e.map((e=>BigInt(on(e))))}function ba(e,t){return e.flatMap(((e,n)=>[BigInt(e.selector),BigInt(e.offset),...t[n]]))}function Aa(e,t){return h.pedersen(BigInt(e),BigInt(t))}function Ea(e){return[...e,e.length].reduce(((e,t)=>h.pedersen(BigInt(e),BigInt(t))),0).toString()}var va=Ea;function wa(e,t,n,r){const a=Ea(Hr.compile(n)),i=Ea([Jn("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]);return Tt(BigInt(i)%oe)}function Ia(e){const{abi:t,program:n}=e,r=ya(ht({abi:t,program:n},ma));return H(h.keccak(P(r)).toString(16))}function Sa(e){const t=bt(e)?ut(e):e,n=Tt(ae),r=Ea(t.entry_points_by_type.EXTERNAL.flatMap((e=>[e.selector,e.offset]))),a=Ea(t.entry_points_by_type.L1_HANDLER.flatMap((e=>[e.selector,e.offset]))),i=Ea(t.entry_points_by_type.CONSTRUCTOR.flatMap((e=>[e.selector,e.offset]))),s=Ea(t.program.builtins.map((e=>on(e)))),o=Ia(t),c=Ea(t.program.data);return Ea([n,r,a,i,s,o,c])}function Ta(e,t){return Tt(h.poseidonHash(BigInt(e),BigInt(t)))}function ka(e){return Tt((0,h.poseidonHashMany)(e.map((e=>BigInt(e)))))}function Ca(e){const t=e.flatMap((e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,h.poseidonHashMany)(_a(t)))];var t}));return(0,h.poseidonHashMany)(t)}function Na(e){const t=e.bytecode.map((e=>BigInt(e))),n=e.bytecode_segment_lengths??[];let r=0;const a=n.flatMap((e=>{const n=t.slice(r,r+=e);return[BigInt(e),(0,h.poseidonHashMany)(n)]}));return 1n+(0,h.poseidonHashMany)(a)}function xa(e){const t=BigInt(on(ga)),n=Ca(e.entry_points_by_type.EXTERNAL),r=Ca(e.entry_points_by_type.L1_HANDLER),a=Ca(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?Na(e):(0,h.poseidonHashMany)(e.bytecode.map((e=>BigInt(e))));return Tt((0,h.poseidonHashMany)([t,n,r,a,i]))}function Ba(e){const t=e.flatMap((e=>[BigInt(e.selector),BigInt(e.function_idx)]));return(0,h.poseidonHashMany)(t)}function Oa(e){const t=BigInt(on("CONTRACT_CLASS_V0.1.0")),n=Ba(e.entry_points_by_type.EXTERNAL),r=Ba(e.entry_points_by_type.L1_HANDLER),a=Ba(e.entry_points_by_type.CONSTRUCTOR),i=function(e){const t=ya(ht(e.abi,null));return BigInt(H(h.keccak(P(t)).toString(16)))}(e),s=(0,h.poseidonHashMany)(e.sierra_program.map((e=>BigInt(e))));return Tt((0,h.poseidonHashMany)([t,n,r,a,i,s]))}function Ra(e){const t=0x8000000000000000n,n=[],r=new ArrayBuffer(32),a=new DataView(r);for(const r of e){const e=0xffffffffffffffffn&r,i=(0xffffffffffffffff0000000000000000n&r)>>64n,s=(0xffffffffffffffff00000000000000000000000000000000n&r)>>128n,o=(0xffffffffffffffff000000000000000000000000000000000000000000000000n&r)>>192n;if(a.setBigUint64(0,o,!1),a.setBigUint64(8,s,!1),a.setBigUint64(16,i,!1),a.setBigUint64(24,e,!1),r<t){const e=a.getUint32(24,!1),t=a.getUint32(28,!1);n.push(e,t)}else{const e=2147483648|a.getUint32(0,!1),t=a.getUint32(4,!1),r=a.getUint32(8,!1),i=a.getUint32(12,!1),s=a.getUint32(16,!1),o=a.getUint32(20,!1),c=a.getUint32(24,!1),l=a.getUint32(28,!1);n.push(e,t,r,i,s,o,c,l)}}const i=new ArrayBuffer(4*n.length),s=new DataView(i);for(let e=0;e<n.length;e++)s.setUint32(4*e,n[e],!0);const o=(c=new Uint8Array(i),Ue.get("blake")?.(c)||(0,y.DB)(c,{dkLen:32}));var c;let l=0n;for(let e=0;e<32;e++)l|=BigInt(o[e])<<BigInt(8*e);return l%ie}function Da(e){const t=e.flatMap((e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,Ra(_a(t)))];var t}));return Ra(t)}function Ma(e,t){if("number"==typeof t){const n=[];for(let r=0;r<t;r++){const t=e.next();if(t.done)throw new Error("Bytecode length mismatch");n.push(t.value)}return[t,Ra(n)]}const n=t.map((t=>Ma(e,t))),r=Ra(n.flatMap((([e,t])=>[BigInt(e),t])))+1n;return[n.reduce(((e,[t])=>e+t),0),r]}function Pa(e){const t=e.bytecode.map((e=>BigInt(e))),n=e.bytecode_segment_lengths;if(!n)return Ra(t);const r=t[Symbol.iterator](),[a,i]=Ma(r,n);if(a!==t.length)throw new Error(`Bytecode length mismatch: expected ${t.length}, got ${a}`);return i}function $a(e){return Tt(Ra([BigInt(on(ga)),Da(e.entry_points_by_type.EXTERNAL),Da(e.entry_points_by_type.L1_HANDLER),Da(e.entry_points_by_type.CONSTRUCTOR),Pa(e)]))}function Ua(e){const t=e.version?Tt(e.version):He.V3;return t===He.V3||t===He.F3}function Va(e,t){const n=e.split("."),r=t.split(".");return n.every(((e,t)=>"*"===e||e===r[t]))}function Fa(e,t={allowAnyPatchVersion:!1}){return Object.values(Oe).some((n=>Va(t.allowAnyPatchVersion?function(e){const t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}(n):n,e)))}function La(e){const[t,n]=e.replace(/^v/,"").split(".");return`v${t}_${n}`}function Ha(e){const t=bt(e)?ut(e):e;return"sierra_program"in t?Oa(t):Sa(t)}function ja(e,t=$e){return function(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number),a=Math.max(n.length,r.length);for(let e=0;e<a;e+=1){const t=n[e]||0,a=r[e]||0;if(t>a)return 1;if(t<a)return-1}return 0}(t,$e)>=0?$a(e):xa(e)}function qa(e){const t=bt(e)?e:ht(e);return V((0,m.iv)(t))}function Wa(e){if(Array.isArray(e))return e;const t=D((0,m.ec)(U(e)));return ut(t)}function Ka(){const e=h.utils.randomPrivateKey();return(0,h.getStarkKey)(e)}function Ga(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map((e=>Tt(e)));try{const{r:t,s:n}=e;return[Tt(t),Tt(n)]}catch(e){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function za(e){return Rt(Ga(e))}function Ya(e){return Dt(Ga(e))}function Xa(){return Za({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function Za(e,t=Ue.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Lt(e.l2_gas_consumed,!1!==t?t.l2_gas.max_amount:0),max_price_per_unit:Lt(e.l2_gas_price,!1!==t?t.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Lt(e.l1_gas_consumed,!1!==t?t.l1_gas.max_amount:0),max_price_per_unit:Lt(e.l1_gas_price,!1!==t?t.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Lt(e.l1_data_gas_consumed,!1!==t?t.l1_data_gas.max_amount:0),max_price_per_unit:Lt(e.l1_data_gas_price,!1!==t?t.l1_data_gas.max_price_per_unit:0)}}}function Ja(e){return{resourceBounds:e,overall_fee:e.l1_gas.max_amount*e.l1_gas.max_price_per_unit+e.l1_data_gas.max_amount*e.l1_data_gas.max_price_per_unit+e.l2_gas.max_amount*e.l2_gas.max_price_per_unit,unit:"FRI"}}function Qa(e,t=Ue.get("resourceBoundsOverhead")){return Lt(e.l1_gas_consumed,!1!==t?t.l1_gas.max_amount:0)*Lt(e.l1_gas_price,!1!==t?t.l1_gas.max_price_per_unit:0)+Lt(e.l1_data_gas_consumed,!1!==t?t.l1_data_gas.max_amount:0)*Lt(e.l1_data_gas_price,!1!==t?t.l1_data_gas.max_price_per_unit:0)+Lt(e.l2_gas_consumed,!1!==t?t.l2_gas.max_amount:0)*Lt(e.l2_gas_price,!1!==t?t.l2_gas.max_price_per_unit:0)}function ei(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function ti(e){if(e===We.L1)return Ke.L1;if(e===We.L2)return Ke.L2;throw Error("EDAM conversion")}function ni(e,t){const n=Tt(t||e);if(!Object.values(qe).includes(n))throw Error(`${t?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function ri(e){if(!e)return;const t=Tt(e);if(t===He.V0)return He.F0;if(t===He.V1)return He.F1;if(t===He.V2)return He.F2;if(t===He.V3)return He.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function ai(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||We.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||We.L1,resourceBounds:e.resourceBounds??Xa()}}function ii(e){const t=Tt(e);return H(F((0,h.getPublicKey)(t,!1)))}function si(e){const t=e=>{if(_t(e))return Tt(e);if(Et(e)){const n={};return Object.keys(e).forEach((r=>{n[r]=t(e[r])})),n}return e};return t(e)}function oi(e){const t=e=>{if(bt(e))return BigInt(e);if(Et(e)){const n={};return Object.keys(e).forEach((r=>{n[r]=t(e[r])})),n}return e};return t(e)}function ci(e){return"sierra_program"in(bt(e)?ut(e):e)}function li(){return K(F(_.kA.utils.randomPrivateKey()))}function ui(e){Ot(e,te,2n**160n-1n,"Ethereum Address ");const t=H(L(Tt(e)).padStart(40,"0"));return ft(Boolean(t.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),t}S({},{ZeroFeeEstimate:()=>ei,compressProgram:()=>qa,decompressProgram:()=>Wa,formatSignature:()=>Ga,getFullPublicKey:()=>ii,intDAM:()=>ti,randomAddress:()=>Ka,resourceBoundsToBigInt:()=>oi,resourceBoundsToEstimateFeeResponse:()=>Ja,resourceBoundsToHexString:()=>si,signatureToDecimalArray:()=>za,signatureToHexArray:()=>Ya,toFeeVersion:()=>ri,toOverheadOverallFee:()=>Qa,toOverheadResourceBounds:()=>Za,toTransactionVersion:()=>ni,v3Details:()=>ai,zeroResourceBounds:()=>Xa}),S({},{ethRandomPrivateKey:()=>li,validateAndParseEthAddress:()=>ui});var di="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||"undefined"!=typeof global&&global.fetch.bind(global)||(()=>{throw new lr("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function hi(e){return new Promise((t=>{setTimeout(t,e)}))}function pi(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=ya(ht(e.abi)),t.sierra_program=ya(ht(e.sierra_program)),t.sierra_program=qa(t.sierra_program),t}function fi(e){const t=bt(e)?ut(e):e;return ci(e)?pi(t):{...t,..."program"in t&&{program:qa(t.program)}}}function gi(e){return bt(e.abi)?ut(e.abi):e.abi}S({},{Block:()=>Ai,createSierraContractClass:()=>pi,extractAbi:()=>gi,getDefaultNodeUrl:()=>yi,getDefaultNodes:()=>mi,getSupportedRpcVersions:()=>_i,parseContract:()=>fi,validBlockTags:()=>bi,wait:()=>hi});var yi=(e,t=!1,n)=>{t||Fe.info("Using default public node url, please provide nodeUrl in provider options!");const r=mi(n??Ue.get("rpcVersion"))[e??Ne.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function mi(e){const t={...De};return Object.keys(t).forEach((function(n,r){t[n]=t[n].map((t=>"https://starknet-sepolia.g.alchemy.com/starknet/version/rpc/"===t||"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/"===t?`${t}${La(e)}/uYLxCteYbHTFJpKSoKdVm`:`${t}${La(e)}`))})),t}function _i(){return[...new Set(Object.values(Oe))]}var bi=Object.values(et),Ai=class{hash=null;number=null;tag=null;setIdentifier(e){if(bt(e))if(tn(e))this.number=parseInt(e,10);else if(vt(e))this.hash=e;else{if(!bi.includes(e))throw TypeError(`Block identifier unmanaged: ${e}`);this.tag=e}else _t(e)?this.hash=Tt(e):yt(e)?this.number=e:this.tag=et.LATEST;if(yt(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function Ei(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}S({},{fromCallsToExecuteCalldata:()=>wi,fromCallsToExecuteCalldata_cairo1:()=>Ii,getCompiledCalldata:()=>Ei,getExecuteCalldata:()=>Si,getVersionsByType:()=>Ti,transformCallsToMulticallArrays:()=>vi});var vi=e=>{const t=[],n=[];return e.forEach((e=>{const r=Hr.compile(e.calldata||[]);t.push({to:It(e.contractAddress).toString(10),selector:It(Gt(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)})),{callArray:t,calldata:Hr.compile({calldata:n})}},wi=e=>{const{callArray:t,calldata:n}=vi(e);return[...Hr.compile({callArray:t}),...n]},Ii=e=>{const t=e.map((e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:Hr.compile(e.calldata)})));return Hr.compile({orderCalls:t})},Si=(e,t="0")=>"1"===t?Ii(e):wi(e);function Ti(e){return"fee"===e?{v3:He.F3}:{v3:He.V3}}var ki={headers:{"Content-Type":"application/json"},blockIdentifier:et.LATEST,retries:200},Ci=class{id="RPC081";channelSpecVersion=Oe.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(Ne).includes(s)?this.nodeUrl=yi(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||yi(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||Ue.get("fetch")||di,this.blockIdentifier=r??ki.blockIdentifier,this.chainId=a,this.headers={...ki.headers,...i},this.retries=o??ki.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,yt(n)&&(this.batchClient=new pt({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Fe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ht(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ur(n,e,t);if(r instanceof lr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(Va(this.channelSpecVersion,e)||Fe.error(Pe.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Fa(e))throw new lr(`${Pe.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=Tt(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const a=new Ai(r).identifier,i=Dt(e),s=Dt(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:n})}getCompiledCasm(e){const t=Tt(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(e=this.blockIdentifier){return(await this.getBlockWithTxHashes(e)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ai(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Tt(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,s=new Ai(n).identifier,o=[];return r&&o.push(a.gZ.SKIP_VALIDATE),i&&o.push(a.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const n=Tt(e);let r=t?.retries??this.retries,i=t?.lifeCycleRetries??3,o=!1,c=!1;const l=t?.retryInterval??this.transactionRetryIntervalDefault,u=t?.errorStates??[a.zO.REJECTED],d=t?.successStates??[a.zO.ACCEPTED_ON_L2,a.zO.ACCEPTED_ON_L1],h={[s.zO.RECEIVED]:Pe.txEvictedFromMempool,[s.zO.PRE_CONFIRMED]:Pe.consensusFailed,[s.zO.CANDIDATE]:Pe.txFailsBlockBuildingValidation},p=[];let f;for(;!o;){await hi(l);try{f=await this.getTransactionStatus(n),p.push(f.finality_status);const e=f.execution_status,t=f.finality_status;if(!t)throw new Error("waiting for transaction status");if(u.includes(e)||u.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=f,c=!0,r}(d.includes(e)||d.includes(t))&&(o=!0)}catch(e){if(e instanceof Error&&c)throw e;if(e instanceof ur&&e.isType("TXN_HASH_NOT_FOUND")){Fe.info("txLife: ",p);const e=h[p.at(-1)];if(e&&i<=0)throw new Error(e);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let g=null;for(;null===g;){try{g=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await hi(l)}return g}getStorageAt(e,t,n=this.blockIdentifier){const r=Tt(e),a=Nt(t),i=new Ai(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new Ai(t).identifier,i={simulation_flags:n?[a.gZ.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...i})}async invoke(e,t){let n;if(!Ua(t))throw Error(Pe.legacyTxRPC08Message);if(!Ge(t.resourceBounds))throw Error(Pe.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:Hr.toHex(e.calldata),version:a.sF.V3,signature:Ya(e.signature),nonce:Tt(t.nonce),resource_bounds:si(t.resourceBounds),tip:Tt(t.tip),paymaster_data:t.paymasterData.map((e=>Tt(e))),account_deployment_data:t.accountDeploymentData.map((e=>Tt(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let s;if(!ci(e)||!Ua(i))throw Error(Pe.legacyTxRPC08Message);if(!Ge(i.resourceBounds))throw Error(Pe.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,sender_address:n,compiled_class_hash:r||"",version:a.sF.V3,signature:Ya(t),nonce:Tt(i.nonce),contract_class:{sierra_program:Wa(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:si(i.resourceBounds),tip:Tt(i.tip),paymaster_data:i.paymasterData.map((e=>Tt(e))),account_deployment_data:i.accountDeploymentData.map((e=>Tt(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let s;if(!Ua(i))throw Error(Pe.legacyTxRPC08Message);if(!Ge(i.resourceBounds))throw Error(Pe.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.xz.DEPLOY_ACCOUNT,version:a.sF.V3,signature:Ya(r),nonce:Tt(i.nonce),contract_address_salt:Tt(n||0),constructor_calldata:Hr.toHex(t||[]),class_hash:Tt(e),resource_bounds:si(i.resourceBounds),tip:Tt(i.tip),paymaster_data:i.paymasterData.map((e=>Tt(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){const n=new Ai(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Gt(e.entrypoint),calldata:Hr.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ui(n),to_address:Tt(r),entry_point_selector:zt(a),payload:Ut(i)},o=new Ai(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Ti(t);let r;if(!Ua(e))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:Ya(e.signature),nonce:Tt(e.nonce),resource_bounds:si(e.resourceBounds),tip:Tt(e.tip),paymaster_data:e.paymasterData.map((e=>Tt(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Tt(e)))},e.type===a.xz.INVOKE)return{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:Hr.toHex(e.calldata),version:Tt(e.version||n.v3),...r};if(e.type===a.xz.DECLARE){if(!ci(e.contract))throw Fe.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:Wa(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Tt(e.version||n.v3),...r}}if(e.type===a.xz.DEPLOY_ACCOUNT){const{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:Hr.toHex(e.constructorCalldata||[]),class_hash:Tt(e.classHash),contract_address_salt:Tt(e.addressSalt||0),version:Tt(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},Ni={};S(Ni,{RpcChannel:()=>Bi});var xi={headers:{"Content-Type":"application/json"},blockIdentifier:et.LATEST,retries:200},Bi=class{id="RPC090";channelSpecVersion=Oe.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(Ne).includes(s)?this.nodeUrl=yi(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||yi(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||Ue.get("fetch")||di,this.blockIdentifier=r??xi.blockIdentifier,this.chainId=a,this.headers={...xi.headers,...i},this.retries=o??xi.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,yt(n)&&(this.batchClient=new pt({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),Fe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ht(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ur(n,e,t);if(r instanceof lr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(Va(this.channelSpecVersion,e)||Fe.error(Pe.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Fa(e))throw new lr(`${Pe.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=Tt(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const a=new Ai(r).identifier,i=Dt(e),s=Dt(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:n})}getCompiledCasm(e){const t=Tt(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(e=this.blockIdentifier){return(await this.getBlockWithTxHashes(e)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ai(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ai(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Tt(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Tt(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new Ai(n).identifier,o=[];return r&&o.push(s.gZ.SKIP_VALIDATE),a&&o.push(s.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const n=Tt(e);let r=t?.retries??this.retries,a=t?.lifeCycleRetries??3,i=!1,o=!1;const c=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[],u=t?.successStates??[s._V.ACCEPTED_ON_L2,s._V.ACCEPTED_ON_L1],d={[s.zO.RECEIVED]:Pe.txEvictedFromMempool,[s.zO.PRE_CONFIRMED]:Pe.consensusFailed,[s.zO.CANDIDATE]:Pe.txFailsBlockBuildingValidation},h=[];let p;for(;!i;){await hi(c);try{p=await this.getTransactionStatus(n),h.push(p.finality_status);const e=p.execution_status,t=p.finality_status;if(!t)throw new Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=p,o=!0,r}(u.includes(e)||u.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&o)throw e;if(e instanceof ur&&e.isType("TXN_HASH_NOT_FOUND")){Fe.info("txLife: ",h);const e=d[h.at(-1)];if(e&&a<=0)throw new Error(e);a-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await hi(c)}return f}async fastWaitForTransaction(e,t,n,r){const a=BigInt(n);let i=r?.retries??50;const o=r?.retryInterval??500,c=[s.y5.REVERTED],l=[s._V.ACCEPTED_ON_L2,s._V.ACCEPTED_ON_L1,s._V.PRE_CONFIRMED];let u;const d=(new Date).getTime();for(;i>0;){await hi(o),u=await this.getTransactionStatus(e),Fe.info(`${i} ${JSON.stringify(u)} ${((new Date).getTime()-d)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(c.includes(n)){const e=new Error(`${n}: ${r}`);throw e.response=u,e}if(l.includes(r)){let e=a;for(;e===a&&i>0;){if(e=BigInt(await this.getNonceForAddress(t,et.PRE_CONFIRMED)),Fe.info(`${i} Checking new nonce ${e} ${((new Date).getTime()-d)/1e3}s.`),e!==a)return!0;await hi(o),i-=1}return!1}i-=1}return!1}getStorageAt(e,t,n=this.blockIdentifier){const r=Tt(e),a=Nt(t),i=new Ai(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=Tt(e),r=new Ai(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new Ai(t).identifier,a={simulation_flags:n?[s.gZ.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...a})}async invoke(e,t){const n=this.buildTransaction({type:C.ETransactionType.INVOKE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(e,t){const n=this.buildTransaction({type:C.ETransactionType.DECLARE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(e,t){const n=this.buildTransaction({type:C.ETransactionType.DEPLOY_ACCOUNT,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(e,t=this.blockIdentifier){const n=new Ai(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Gt(e.entrypoint),calldata:Hr.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ui(n),to_address:Tt(r),entry_point_selector:zt(a),payload:Ut(i)},o=new Ai(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Ti(t);ft(Ua(e),Pe.legacyTxRPC08Message),ft("transaction"!==t||Ge(e.resourceBounds),Pe.SWOldV3);const r={signature:Ya(e.signature),nonce:Tt(e.nonce),resource_bounds:si(e.resourceBounds),tip:Tt(e.tip),paymaster_data:e.paymasterData.map((e=>Tt(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Tt(e))),version:ni(n.v3,e.version)};if(e.type===C.ETransactionType.INVOKE)return{type:s.xz.INVOKE,sender_address:e.contractAddress,calldata:Hr.toHex(e.calldata),...r};if(e.type===C.ETransactionType.DECLARE)return ft(ci(e.contract),"Declaring non Sierra contract using RPC 0.9"),{type:e.type,contract_class:{...e.contract,sierra_program:Wa(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,...r};if(e.type===C.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:t,...n}=r;return{type:e.type,constructor_calldata:Hr.toHex(e.constructorCalldata||[]),class_hash:Tt(e.classHash),contract_address_salt:Tt(e.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},Oi=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||"undefined"!=typeof global&&global.WebSocket,class{resourceBoundsOverhead;constructor(e){this.resourceBoundsOverhead=e}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateBulkResponse(e){return e.map((e=>({resourceBounds:Za(e,this.resourceBoundsOverhead),overall_fee:Qa(e,this.resourceBoundsOverhead),unit:e.unit})))}parseSimulateTransactionResponse(e){return e.map((e=>({transaction_trace:e.transaction_trace,resourceBounds:Za(e.fee_estimation,this.resourceBoundsOverhead),overall_fee:Qa(e.fee_estimation,this.resourceBoundsOverhead),unit:e.fee_estimation.unit})))}parseContractClassResponse(e){return{...e,abi:bt(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}});function Ri(e){return"0x3"===e.version&&"tip"in e&&bt(e.tip)&&("INVOKE"===e.type||"DECLARE"===e.type||"DEPLOY_ACCOUNT"===e.type)}function Di(e,t=!0){return e.transactions.filter(Ri).map((e=>BigInt(e.tip))).filter((e=>t||e>0n))}function Mi(e,t){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:e,transactionsTipsFound:t}}}function Pi(e,t){const n=t/100*(e.length-1),r=Math.floor(n),a=Math.ceil(n);if(r===a)return e[r];const i=n-r,s=e[r];return s+(e[a]-s)*BigInt(Math.round(1e3*i))/1000n}function $i(e){ft(e.length>0,"Cannot calculate statistics from empty tip array");const t=e.reduce(((e,t)=>t<e?t:e),le.max),n=e.reduce(((e,t)=>t>e?t:e),0n),r=e.reduce(((e,t)=>e+t),0n)/BigInt(e.length),a=[...e].sort(((e,t)=>e<t?-1:e>t?1:0)),i=Math.floor(a.length/2);let s;s=a.length%2==0?(a[i-1]+a[i])/2n:a[i];const o=new Map;e.forEach((e=>{o.set(e,(o.get(e)||0)+1)}));const{modeTip:c}=Array.from(o.entries()).reduce(((e,[t,n])=>n>e.maxCount||n===e.maxCount&&t<e.modeTip?{maxCount:n,modeTip:t}:e),{maxCount:0,modeTip:0n});return{minTip:t,maxTip:n,averageTip:r,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:Pi(a,90),p95Tip:Pi(a,95)}}async function Ui(e,t){try{const n=await e.getBlockWithTxs(t);return yt(n.block_number)?n.block_number:(await e.getBlockLatestAccepted()).block_number}catch(e){throw new lr(`Failed to determine starting block number: ${e instanceof Error?e.message:"Unknown error"}`)}}async function Vi(e,t){try{return await e.getBlockWithTxs(t)}catch(e){return Fe.warn(`Failed to fetch block ${t}:`,e),null}}function Fi(e,t){const n=Math.max(0,e-t+1),r=e-n+1;return Array.from({length:r},((t,n)=>e-n))}async function Li(e,t=et.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:a=10}=n;return ft(Number.isInteger(r),"maxBlocks parameter must be an integer"),ft(r>=1,"maxBlocks parameter must be greater than or equal to 1"),ft(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),ft(Number.isInteger(a),"minTxsNecessary parameter must be an integer"),ft(a>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(e){return!!e.channel.batchClient}(e)?async function(e,t,n){const{maxBlocks:r=3,minTxsNecessary:a=10,includeZeroTips:i=!0}=n;try{const n=await Ui(e,t),s=Fi(n,r),o=await async function(e,t){const n=t.map((async t=>{try{return await e.getBlockWithTxs(t)}catch(e){return Fe.warn(`Failed to fetch block ${t} in parallel:`,e),null}}));return Promise.all(n)}(e,s),c=o.filter((e=>null!==e)).flatMap((e=>Di(e,i))),l=o.filter((e=>null!==e)).length;return c.length<a?(Fe.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${l} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${a} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Mi(l,c)):{...$i(c),metrics:{blocksAnalyzed:l,transactionsTipsFound:c}}}catch(e){throw new lr(`Failed to analyze tip statistics (parallel): ${e instanceof Error?e.message:"Unknown error"}`)}}(e,t,n):async function(e,t,n){const{maxBlocks:r=3,minTxsNecessary:a=10,includeZeroTips:i=!0}=n;try{const n=await Ui(e,t),s=Fi(n,r),o=[];let c=0;for(const t of s){const n=await Vi(e,t);if(n){c+=1;const e=Di(n,i);if(o.push(...e),o.length>=a)break}}return o.length<a?(Fe.error(`Insufficient transaction data: found ${o.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${a} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Mi(c,o)):{...$i(o),metrics:{blocksAnalyzed:c,transactionsTipsFound:o}}}catch(e){throw new lr(`Failed to analyze tip statistics (sequential): ${e instanceof Error?e.message:"Unknown error"}`)}}(e,t,n)}var Hi=class e{statusReceipt;value;constructor(t){Object.assign(this,t);const[n,r]=e.isSuccess(t)?["SUCCEEDED",t]:e.isReverted(t)?["REVERTED",t]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:e=>n in e?e[n](r):e._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(e){return e.execution_status===Qe.SUCCEEDED}static isReverted(e){return e.execution_status===Qe.REVERTED}},ji={[Qe.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:e=>e,getValue:e=>e},[Qe.REVERTED]:{statusReceipt:"REVERTED",getBaseData:e=>e,getValue:e=>e}};function qi(e){const t=ji[e.execution_status];let n;if(t){const{statusReceipt:r,getBaseData:a,getValue:i}=t,s=i(e);n={...a(e),statusReceipt:r,value:s,match:e=>r in e?e[r](s):e._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const e=new Error("Unknown response type");n={statusReceipt:"ERROR",value:e,match:t=>"ERROR"in t?t.ERROR(e):t._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,Hi.prototype),Object.defineProperty(n,"constructor",{value:Hi,writable:!1,enumerable:!1,configurable:!1}),n}var Wi={};S(Wi,{encodeData:()=>ss,encodeType:()=>rs,encodeValue:()=>is,getDependencies:()=>ns,getMessageHash:()=>cs,getStructHash:()=>os,getTypeHash:()=>as,isMerkleTreeType:()=>ts,prepareSelector:()=>es,validateTypedData:()=>Qi,verifyMessage:()=>ls}),S({},{MerkleTree:()=>Ki,proofMerklePath:()=>Gi});var Ki=class e{leaves;branches=[];root;hashMethod;constructor(e,t=Aa){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t,n=Aa){const[r,a]=[BigInt(e),BigInt(t)].sort(((e,t)=>e>=t?1:-1));return n(r,a)}getProof(t,n=this.leaves,r=[]){const a=n.indexOf(t);if(-1===a)throw new Error("leaf not found");if(1===n.length)return r;const i=a%2==0,s=(i?n[a+1]:n[a-1])??"0x0",o=[...r,s],c=this.leaves.length===n.length?-1:this.branches.findIndex((e=>e.length===n.length)),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}};function Gi(e,t,n,r=Aa){if(0===n.length)return e===t;const[a,...i]=n;return Gi(e,Ki.hash(t,a,r),i,r)}var zi={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Yi={[C.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ka,hashMerkleMethod:Ta,escapeTypeString:e=>`"${e}"`,presetTypes:zi},[C.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:va,hashMerkleMethod:Aa,escapeTypeString:e=>e,presetTypes:{}}};function Xi(e,t,{min:n,max:r}){const a=BigInt(e);ft(a>=n&&a<=r,`${a} (${t}) is out of bounds [${n}, ${r}]`)}function Zi({types:e,domain:t}){return Yi[C.TypedDataRevision.ACTIVE].domain in e&&t.revision?.toString()===C.TypedDataRevision.ACTIVE?C.TypedDataRevision.ACTIVE:Yi[C.TypedDataRevision.LEGACY].domain in e&&(t.revision??C.TypedDataRevision.LEGACY)===C.TypedDataRevision.LEGACY?C.TypedDataRevision.LEGACY:void 0}function Ji(e){try{return Tt(e)}catch(t){if(bt(e))return Tt(on(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Qi(e){const t=e;return Boolean(t.message&&t.primaryType&&t.types&&Zi(t))}function es(e){return vt(e)?e:Gt(e)}function ts(e){return"merkletree"===e.type}function ns(e,t,n=[],r="",a=C.TypedDataRevision.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===C.TypedDataRevision.ACTIVE&&("enum"===t?i=[r]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map((e=>"*"===e[e.length-1]?e.slice(0,-1):e)))),i.filter((t=>!n.includes(t)&&e[t])).reduce(((t,n)=>[...t,...[n,...e[n].reduce(((t,n)=>[...t,...ns(e,n.type,t,n.contains,a).filter((e=>!t.includes(e)))]),[])].filter((e=>!t.includes(e)))]),[])}function rs(e,t,n=C.TypedDataRevision.LEGACY){const r=n===C.TypedDataRevision.ACTIVE?{...e,...Yi[n].presetTypes}:e,[a,...i]=ns(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],o=Yi[n].escapeTypeString;return s.map((e=>{const t=r[e].map((e=>{const t="enum"===e.type&&n===C.TypedDataRevision.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map((e=>e?o(e):e)).join(",")})`:o(t);return`${o(e.name)}:${r}`}));return`${o(e)}(${t})`})).join("")}function as(e,t,n=C.TypedDataRevision.LEGACY){return Gt(rs(e,t,n))}function is(e,t,n,r={},a=C.TypedDataRevision.LEGACY){if(e[t])return[t,os(e,t,n,a)];if(Yi[a].presetTypes[t])return[t,os(Yi[a].presetTypes,t,n,a)];if(t.endsWith("*")){const r=n.map((n=>is(e,t.slice(0,-1),n,void 0,a)[1]));return[t,Yi[a].hashMethod(r)]}switch(t){case"enum":if(a===C.TypedDataRevision.ACTIVE){const[i,s]=Object.entries(n)[0],o=e[r.parent].find((e=>e.name===r.key)),c=e[o.contains],l=c.find((e=>e.name===i)),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map(((t,n)=>{if(!t)return t;const r=s[n];return is(e,t,r,void 0,a)[1]}));return[t,Yi[a].hashMethod([u,...d])]}return[t,Ji(n)];case"merkletree":{const t=function(e,t){if(t.parent&&t.key){const n=e[t.parent].find((e=>e.name===t.key));if(!ts(n))throw new Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,r),i=n.map((n=>is(e,t,n,void 0,a)[1])),{root:s}=new Ki(i,Yi[a].hashMerkleMethod);return["felt",s]}case"selector":return["felt",es(n)];case"string":if(a===C.TypedDataRevision.ACTIVE){const e=un(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,Yi[a].hashMethod(r)]}return[t,Ji(n)];case"i128":if(a===C.TypedDataRevision.ACTIVE){const e=BigInt(n);return Xi(e,t,Ae),[t,Ji(e<0n?ie+e:e)]}return[t,Ji(n)];case"timestamp":case"u128":return a===C.TypedDataRevision.ACTIVE&&Xi(n,t,ge),[t,Ji(n)];case"felt":case"shortstring":return a===C.TypedDataRevision.ACTIVE&&Xi(Ji(n),t,le),[t,Ji(n)];case"ClassHash":case"ContractAddress":return a===C.TypedDataRevision.ACTIVE&&Xi(n,t,le),[t,Ji(n)];case"bool":return a===C.TypedDataRevision.ACTIVE&&ft(mt(n),`Type mismatch for ${t} ${n}`),[t,Ji(n)];default:if(a===C.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Ji(n)]}}function ss(e,t,n,r=C.TypedDataRevision.LEGACY){const a=e[t]??Yi[r].presetTypes[t],[i,s]=a.reduce((([a,i],s)=>{if(void 0===n[s.name]||null===n[s.name]&&"enum"!==s.type)throw new Error(`Cannot encode data: missing data for '${s.name}'`);const o=n[s.name],c={parent:t,key:s.name},[l,u]=is(e,s.type,o,c,r);return[[...a,l],[...i,u]]}),[["felt"],[as(e,t,r)]]);return[i,s]}function os(e,t,n,r=C.TypedDataRevision.LEGACY){return Yi[r].hashMethod(ss(e,t,n,r)[1])}function cs(e,t){if(!Qi(e))throw new Error("Typed data does not match JSON schema");const n=Zi(e),{domain:r,hashMethod:a}=Yi[n];return a([on("StarkNet Message"),os(e.types,r,e.domain,n),t,os(e.types,e.primaryType,e.message,n)])}function ls(e,t,n,r){const a=Qi(e);if(!jt(e)&&!a)throw new Error("message has a wrong format.");if(a&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!jt(r))throw new Error("accountAddress shall be a BigNumberish");const i=a?cs(e,r):Tt(e),s=Array.isArray(t)?new h.Signature(BigInt(t[0]),BigInt(t[1])):t,o=Tt(n);return h.verify(s,i,o)}var us=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new Oi;else{const t=e;if(t&&t.specVersion)if(Va("0.8",t.specVersion))this.channel=new Le.RpcChannel({...t,waitMode:!1});else{if(!Va("0.9",t.specVersion))throw new Error(`unsupported channel for spec version: ${t.specVersion}`);this.channel=new Ni.RpcChannel({...t,waitMode:!1})}else if(Va("0.8",Ue.get("rpcVersion")))this.channel=new Le.RpcChannel({...t,waitMode:!1});else{if(!Va("0.9",Ue.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Ni.RpcChannel({...t,waitMode:!1})}this.responseParser=new Oi(t?.resourceBoundsOverhead)}}static async create(e){const t=new Le.RpcChannel({...e}),n=await t.getSpecVersion();if(Fa(n)||Fe.warn(`Using incompatible node spec version ${n}`),Va("0.8",n))return new this({...e,specVersion:Oe.v0_8_1});if(Va("0.9",n))return new this({...e,specVersion:Oe.v0_9_0});throw new lr(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(Oe).toString()}`)}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getStarknetVersion(e){return this.channel.getStarknetVersion(e)}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e=et.LATEST,t=5e3){if(e===et.LATEST)return;if("pending"===e)return;const n=await this.getBlockNumber(),r=e===et.PRE_CONFIRMED?n+1:Number(Tt(e));if(r<=n)return;const{retries:a}=this.channel;let i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await hi(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(e=this.channel.blockIdentifier){if(this.channel instanceof Ni.RpcChannel)return async function(e,t=e.blockIdentifier){const n=await e.getBlockWithTxHashes(t);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}(this.channel,e);throw new lr("Unsupported method for RPC version")}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);ft("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t;return Yt([n[0],r,i,a,n.length-1,...n.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e);return qi(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then((e=>this.responseParser.parseSimulateTransactionResponse(e)))}async waitForTransaction(e,t){return qi(await this.channel.waitForTransaction(e,t))}async fastWaitForTransaction(e,t,n,r){if(this.channel instanceof Ni.RpcChannel)return await this.channel.fastWaitForTransaction(e,t,n,r);throw new Error("Unsupported channel type")}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let a;if(e)a=await this.getClassAt(e,n);else{if(!t)throw Error("getContractVersion require contractAddress or classHash");a=await this.getClass(t,n)}return ci(a)?r?{cairo:"1",compiler:zn(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:C.ETransactionType.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:C.ETransactionType.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:C.ETransactionType.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then((e=>this.responseParser.parseFeeEstimateBulkResponse(e)))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){if(this.channel instanceof Le.RpcChannel)return this.channel.getEvents(e);if(this.channel instanceof Ni.RpcChannel)return this.channel.getEvents(e);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(e,t,n,r,a){return async function(e,t,n,r,a,i){const s=Qi(t);if(!jt(t)&&!s)throw new Error("message has a wrong format.");if(!jt(r))throw new Error("accountAddress shall be a BigNumberish");const o=s?cs(t,r):Tt(t),c=a?[a]:["isValidSignature","is_valid_signature"],l=i||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const t of c)try{const a=await e.callContract({contractAddress:Tt(r),entrypoint:t,calldata:Hr.compile({hash:It(o).toString(),signature:Ga(n)})});if(l.nokResponse.includes(a[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(a[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(l.error.some((t=>e.message.includes(t))))return!1;u=e}throw Error(`Signature verification Error: ${u}`)}(this,e,t,n,r,a)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=function(e,t){const n={...e};if(ci(e.contract)&&(!e.compiledClassHash&&e.casm&&(n.compiledClassHash=ja(e.casm,t)),!n.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(n.classHash=e.classHash??Ha(e.contract),!n.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return n}(e,await this.channel.getStarknetVersion()).classHash;else{if(!e.classHash)throw Error("contractClassIdentifier type not satisfied");n=e.classHash}try{return await this.getClass(n,t)instanceof Object}catch(e){if(e instanceof lr)return!1;throw e}}async prepareInvocations(e){const t=[];for(const n of e)n.type===C.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}async getL1MessagesStatus(e){return this.channel.getMessagesStatus(e)}async getStorageProof(e,t,n,r){return this.channel.getStorageProof(e,t,n,r)}async getCompiledCasm(e){return this.channel.getCompiledCasm(e)}async getEstimateTip(e,t={}){return Li(this,e,t)}};S({},{StarknetIdContract:()=>As,StarknetIdIdentityContract:()=>vs,StarknetIdMulticallContract:()=>Is,StarknetIdPfpContract:()=>Cs,StarknetIdPopContract:()=>xs,StarknetIdVerifierContract:()=>Ts,dynamicCallData:()=>Ds,dynamicFelt:()=>Rs,execution:()=>Os,getStarknetIdContract:()=>Es,getStarknetIdIdentityContract:()=>ws,getStarknetIdMulticallContract:()=>Ss,getStarknetIdPfpContract:()=>Ns,getStarknetIdPopContract:()=>Bs,getStarknetIdVerifierContract:()=>ks,isStarkDomain:()=>Ms,useDecoded:()=>_s,useEncoded:()=>bs});var ds="abcdefghijklmnopqrstuvwxyz0123456789-",hs=BigInt(ds.length+1),ps="",fs=BigInt(ds.length),gs=BigInt(ps.length),ys=BigInt(ps.length+1);function ms(e){let t=0;for(;e.endsWith(ps[ps.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function _s(e){let t="";return e.forEach((e=>{for(;e!==te;){const n=e%hs;if(e/=hs,n===BigInt(ds.length)){const n=e/ys;if(n===te){const r=e%ys;e=n,t+=r===te?ds[0]:ps[Number(r)-1]}else t+=ps[Number(e%gs)],e/=gs}else t+=ds[Number(n)]}const[n,r]=ms(t);r&&(t=n+(r%2==0?ps[ps.length-1].repeat(r/2-1)+ps[0]+ds[1]:ps[ps.length-1].repeat((r-1)/2+1))),t+="."})),t?t.concat("stark"):t}function bs(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(ps[0]+ds[1])){const[t,n]=ms(e.substring(0,e.length-2));e=t+ps[ps.length-1].repeat(2*(n+1))}else{const[t,n]=ms(e);n&&(e=t+ps[ps.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){const a=e[r],i=ds.indexOf(a),s=BigInt(ds.indexOf(a));if(-1!==i)r===e.length-1&&e[r]===ds[0]?(t+=n*fs,n*=hs,n*=hs):(t+=n*s,n*=hs);else if(-1!==ps.indexOf(a)){t+=n*fs,n*=hs;const i=(r===e.length-1?1:0)+ps.indexOf(a);t+=n*BigInt(i),n*=gs}}return t}var As={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Es(e){switch(e){case xe.SN_MAIN:return As.MAINNET;case xe.SN_SEPOLIA:return As.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var vs={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function ws(e){switch(e){case xe.SN_MAIN:return vs.MAINNET;case xe.SN_SEPOLIA:return vs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Is="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Ss(e){switch(e){case xe.SN_MAIN:case xe.SN_SEPOLIA:return Is;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var Ts={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function ks(e){switch(e){case xe.SN_MAIN:return Ts.MAINNET;case xe.SN_SEPOLIA:return Ts.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Cs={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function Ns(e){switch(e){case xe.SN_MAIN:return Cs.MAINNET;case xe.SN_SEPOLIA:return Cs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var xs={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function Bs(e){switch(e){case xe.SN_MAIN:return xs.MAINNET;case xe.SN_SEPOLIA:return xs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Os(e,t=void 0,n=void 0){return new Qn({Static:e,IfEqual:t?Zn(t[0],t[1],t[2]):void 0,IfNotEqual:n?Zn(n[0],n[1],n[2]):void 0})}function Rs(e,t=void 0){return new Qn({Hardcoded:e,Reference:t?Zn(t[0],t[1]):void 0})}function Ds(e,t=void 0,n=void 0){return new Qn({Hardcoded:e,Reference:t?Zn(t[0],t[1]):void 0,ArrayReference:n?Zn(n[0],n[1]):void 0})}function Ms(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}function Ps(e){return bs(e.endsWith(".brother")?e.replace(".brother",""):e)}function $s(e){const t=_s([e]);return t.endsWith(".stark")?t.replace(".stark",".brother"):t?`${t}.brother`:t}function Us(e){return xe.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}function Vs(e){return new En(e).toBigInt()}function Fs(e){return En.is(e)}function Ls(e){return new En(e).toUint256HexString()}function Hs(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function js(e){const t=e.calldata??[],n=Array.isArray(t)?t:Hr.compile(t);return{to:e.contractAddress,selector:Gt(e.entrypoint),calldata:n}}function qs(e,t){const n=js(e);return"1"===t?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Ws(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function Ks(e,t,n,r,a){return"1"===a?{types:ot,primaryType:"OutsideExecution",domain:Ws(e,a),message:{...t,nonce:n,calls_len:r.length,calls:r.map((e=>qs(e,a)))}}:{types:ct,primaryType:"OutsideExecution",domain:Ws(e,a),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map((e=>qs(e,a)))}}}function Gs(e){const t=e.outsideExecution,n=Ga(e.signature);return Hr.compile({outside_execution:t,signature:n})}function zs(e){return(Array.isArray(e)?e:[e]).map((e=>{let t;if("1"===e.version)t="execute_from_outside";else{if("2"!==e.version)throw new Error("Unsupported OutsideExecution version");t="execute_from_outside_v2"}return{contractAddress:Tt(e.signerAddress),entrypoint:t,calldata:Gs(e)}}))}async function Ys(e,t,n){const r={contractAddress:Tt(t),entrypoint:"supports_interface",calldata:[Tt(n)]};try{const t=await e.callContract(r);return 0n!==BigInt(t[0])}catch{return!1}}(0,b.Mixin)(us,class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){const r=await e.getChainId(),a=n??Es(r);try{const n=_s((await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:Hr.compile({address:t,hint:[]})})).map((e=>BigInt(e))).slice(1));if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){const r=t.endsWith(".stark")?t:`${t}.stark`;if(!Ms(r))throw new Error("Invalid domain, must be a valid .stark domain");const a=await e.getChainId(),i=n??Es(a);try{const t=r.replace(".stark","").split(".").map((e=>bs(e).toString(10)));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:Hr.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){const c=await e.getChainId(),l=n??Es(c),u=r??ws(c),d=a??ks(c),h=i??Ns(c),p=s??Bs(c),f=o??Ss(c);try{const n=[{execution:Os({}),to:Ds(l),selector:Ds(Gt("address_to_domain")),calldata:[Ds(t),Ds("0")]},{execution:Os({}),to:Rs(l),selector:Rs(Gt("domain_to_id")),calldata:[Ds(void 0,void 0,[0,0])]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("twitter")),Ds(d),Ds("0")]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("github")),Ds(d),Ds("0")]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("discord")),Ds(d),Ds("0")]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("proof_of_personhood")),Ds(p),Ds("0")]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("nft_pp_contract")),Ds(h),Ds("0")]},{execution:Os({}),to:Rs(u),selector:Rs(Gt("get_extended_verifier_data")),calldata:[Ds(void 0,[1,0]),Ds(on("nft_pp_id")),Ds("2"),Ds(h),Ds("0")]},{execution:Os(void 0,void 0,[6,0,0]),to:Rs(void 0,[6,0]),selector:Rs(Gt("tokenURI")),calldata:[Ds(void 0,[7,1]),Ds(void 0,[7,2])]}],r=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:Hr.compile({calls:n})});if(Array.isArray(r)){const e=parseInt(r[0],16),t=[];let n=1;for(let a=0;a<e&&n<r.length;a+=1){const e=parseInt(r[n],16);n+=1;const a=r.slice(n,n+e);t.push(a),n+=e}const a=_s(t[0].slice(1).map((e=>BigInt(e)))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0];return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?t[8].slice(1).map((e=>cn(e))).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},class e{async getBrotherName(t,n){return e.getBrotherName(this,t,n)}async getAddressFromBrotherName(t,n){return e.getAddressFromBrotherName(this,t,n)}async getBrotherProfile(t,n){return e.getBrotherProfile(this,t,n)}static async getBrotherName(e,t,n){await e.getChainId();const r=n??Us();try{const n=await e.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Hr.compile({user:t})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return $s(BigInt(n[0]))}catch(e){if(e instanceof Error&&"Brother name not found"===e.message)throw e;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(e,t,n){const r=t.endsWith(".brother")?t:`${t}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await e.getChainId();const a=n??Us();try{const t=await e.callContract({contractAddress:a,entrypoint:"get_details_by_domain",calldata:Hr.compile({domain:Ps(r)})});if(!t[0]||"0x0"===t[1])throw Error("Could not get address from brother name");return t[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(e,t,n){await e.getChainId();const r=n??Us();try{const n=await e.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Hr.compile({user:t})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const a=$s(BigInt(n[0])).replace(".brother",""),i=await e.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:Hr.compile({domain:Ps(a)})});return{name:a,resolver:i[1],tokenId:i[2],expiryDate:parseInt(i[3],16),lastTransferTime:parseInt(i[4],16)}}catch(e){if(e instanceof Error&&"Brother profile not found"===e.message)throw e;throw Error("Could not get brother profile")}}}),new us({default:!0}),S({},{bnToUint256:()=>Ls,isUint256:()=>Fs,uint256ToBN:()=>Vs}),S({},{buildExecuteFromOutsideCall:()=>zs,buildExecuteFromOutsideCallData:()=>Gs,getOutsideCall:()=>js,getTypedData:()=>Ks,toOutsideCallV2:()=>Hs}),S({},{supportsInterface:()=>Ys}),S({},{assertCallsAreStrictlyEqual:()=>Zs,assertPaymasterTransactionSafety:()=>Js,getDefaultPaymasterNodeUrl:()=>Xs});var Xs=(e,t=!1)=>{t||Fe.info("Using default public node url, please provide nodeUrl in provider options!");const n=Me[e??Ne.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Zs(e,t){const n="Provided calls are not strictly equal to the returned calls";ft(t.length-1===e.length,`${n}: Expected ${e.length+1} calls, got ${t.length}`);for(let r=0;r<e.length;r+=1){const a=e[r],i=Hs(t[r]),s=e=>It(e).toString(16).toLowerCase();ft(s(a.contractAddress)===s(i.To),`${n}: Contract address mismatch at call ${r}. Expected: ${a.contractAddress}, Got: ${i.To}`),ft(Gt(a.entrypoint)===i.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${a.entrypoint}, Got: ${i.Selector}`);const o=Hr.toCalldata(a.calldata),c=Hr.toCalldata(i.Calldata);ft(o.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${o.length}, Got length: ${c.length}`);for(let e=0;e<o.length;e+=1)ft(BigInt(o[e])===BigInt(c[e]),`${n}: Calldata value mismatch at call ${r}, parameter ${e}. Expected: ${o[e]}, Got: ${c[e]}`)}}var Js=(e,t,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){const a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;Zs(t,a),((e,t)=>{const n=Hs(e[e.length-1]);ft(BigInt(n.To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,n.feeMode.gasToken),r&&(ft(e.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((e,t)=>{const n=Hs(e[e.length-1]),r=Hr.toCalldata(n.Calldata)[1];ft(BigInt(r)===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},Qs=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},eo=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,to=e=>{return{version:e.version,feeMode:(n=e.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(t=e.time_bounds,t?{executeAfter:t.execute_after,executeBefore:t.execute_before}:void 0)};var t,n},no={"Content-Type":"application/json"},ro=(new class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e)return this.nodeUrl=t.nodeUrl,this.headers={...no,...t.headers},this.baseFetch=t.baseFetch,void(this.requestId=t.requestId);if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t)return this.nodeUrl=t.nodeUrl??Xs(void 0),this.headers={...no,...t.headers},this.baseFetch=t.baseFetch??di,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:a}=t||{};n&&Object.values(Ne).includes(n)?this.nodeUrl=Xs(n,t?.default):this.nodeUrl=n||Xs(void 0,t?.default),this.baseFetch=a??di,this.headers={...no,...r},this.requestId=0}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ht(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ur(n,e,t);if(r instanceof lr)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{this.requestId+=1;const n=await this.fetch(e,t,this.requestId),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,calls:(r=e.invoke.calls,r.map((e=>({to:e.contractAddress,selector:Gt(e.entrypoint),calldata:Hr.toHex(e.calldata)}))))}};break;default:n=e}var r;const a={version:t.version,fee_mode:Qs(t.feeMode),time_bounds:eo(t.timeBounds)},i=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:a}),s={gas_token_price_in_strk:BigInt(i.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(i.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(i.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(i.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(i.fee.suggested_max_fee_in_gas_token)};switch(i.type){case"invoke":return{type:"invoke",typed_data:i.typed_data,parameters:to(i.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:i.deployment,typed_data:i.typed_data,parameters:to(i.parameters),fee:s};default:return{type:"deploy",deployment:i.deployment,parameters:to(i.parameters),fee:s}}}async executeTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:Ya(e.invoke.signature)}};break;default:n=e}const r={version:t.version,fee_mode:Qs(t.feeMode),time_bounds:eo(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then((e=>e.map((e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))))}}({default:!0}),class{address;entryPoint;constructor(e,t){this.address=e??ve.ADDRESS,this.entryPoint=t??ve.ENTRYPOINT}buildDeployerCall(e,t){const n=[].concat(e).map((e=>{const{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[],abi:s}=e,o=Ei(i,(()=>{if(s){const e=new Hr(s),t=Object.values(i);return e.validate(tt,"constructor",t),e.compile("constructor",t)}return Hr.compile(i)})),c=r??Ka();return{call:{contractAddress:Tt(this.address),entrypoint:this.entryPoint,calldata:[n,c,Vt(a),o.length,...o]},address:wa(a?h.pedersen(t,c):c,n,o,a?this.address:0)}}));return{calls:n.map((e=>e.call)),addresses:n.map((e=>e.address))}}parseDeployerEvent(e){if(!e.events?.length)throw new Error("Deployer emitted event is empty");const t=e.events.find((e=>Tt(e.from_address)===Tt(this.address)))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}});function ao(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function io(e){return e.request({type:"wallet_getPermissions"})}function so(e,t){return e.request({type:"wallet_watchAsset",params:t})}function oo(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function co(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function lo(e){return e.request({type:"wallet_requestChainId"})}function uo(e){return e.request({type:"wallet_deploymentData"})}function ho(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function po(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function fo(e,t){return e.request({type:"wallet_signTypedData",params:t})}function go(e){return e.request({type:"wallet_supportedSpecs"})}function yo(e,t){e.on("accountsChanged",t)}function mo(e,t){e.on("networkChanged",t)}function _o(e){return"event"===e.type}function bo(e){const t=e.filter((e=>_o(e)&&"struct"===e.kind)),n=e.filter((e=>_o(e)&&"enum"===e.kind));return t.reduce(((e,t)=>{let r=[],{name:a}=t,i=!1;const s=e=>e.type===a;for(;;){const e=n.find((e=>e.variants.some(s)));if(gt(e))break;const t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);const o=r.pop();let c={[H(h.keccak(P(o)).toString(16))]:t};for(;r.length>0;)c={[H(h.keccak(P(r.pop())).toString(16))]:c};return c={...c},Eo(e,c)}),{})}function Ao(e){return Kn(e)?bo(e):function(e){return e.filter((e=>"event"===e.type)).reduce(((e,t)=>{const n=t.name,r={...t};return r.name=n,{...e,[H(h.keccak(P(n)).toString(16))]:r}}),{})}(e)}function Eo(e,t){const n={...e};return Et(e)&&Et(t)&&Object.keys(t).forEach((r=>{Et(t[r])?r in e?n[r]=Eo(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}function vo(e,t,n,r,a){return e.flat().reduce(((e,i)=>{const s=JSON.parse(JSON.stringify(i));let o=t[s.keys.shift()??0];if(!o)return e;for(;!o.name;){const e=s.keys.shift();ft(!!e,'Not enough data in "keys" property of this event.'),o=o[e]}const c={};c[o.name]={};const l=s.keys[Symbol.iterator](),u=s.data[Symbol.iterator](),d=o.members?.filter((e=>"key"===e.kind))||o.keys,h=o.members?.filter((e=>"data"===e.kind))||o.data;return d.forEach((e=>{c[o.name][e.name]=Rr({responseIterator:l,output:e,structs:n,enums:r,parser:a,parsedResult:c[o.name]})})),h.forEach((e=>{c[o.name][e.name]=Rr({responseIterator:u,output:e,structs:n,enums:r,parser:a,parsedResult:c[o.name]})})),"block_hash"in s&&(c.block_hash=s.block_hash),"block_number"in s&&(c.block_number=s.block_number),"transaction_hash"in s&&(c.transaction_hash=s.transaction_hash),e.push(c),e}),[])}new ro(ve.ADDRESS,ve.ENTRYPOINT),new ro(Ee.ADDRESS,Ee.ENTRYPOINT),S({},{addDeclareTransaction:()=>po,addInvokeTransaction:()=>ho,addStarknetChain:()=>oo,deploymentData:()=>uo,getPermissions:()=>io,onAccountChange:()=>yo,onNetworkChanged:()=>mo,requestAccounts:()=>ao,requestChainId:()=>lo,signMessage:()=>fo,supportedSpecs:()=>go,switchStarknetChain:()=>co,watchAsset:()=>so}),S({},{getAbiEvents:()=>Ao,isAbiEvent:()=>_o,parseEvents:()=>vo}),C.TypedDataRevision}}]);