/*! For license information please see injectedScript.bundle.js.LICENSE.txt */
(()=>{var t={95766:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,s=a(t),o=s[0],c=s[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),l=0,d=c>0?o-4:o;for(n=0;n<d;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=16383,a=0,u=r-i;a<u;a+=o)s.push(c(t,a,a+o>u?u:a+o));return 1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,s,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},48834:(t,e,n)=>{"use strict";const r=n(95766),i=n(62333),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return u(t,e,n)}function u(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|g(t,e);let r=a(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(W(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(W(t,ArrayBuffer)||t&&W(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(W(t,SharedArrayBuffer)||t&&W(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const i=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Z(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return l(t),a(t<0?0:0|p(t))}function h(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||W(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return r?-1:$(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return B(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){let s,o=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(u(t,s)===u(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===c)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){let n=!0;for(let r=0;r<c;r++)if(u(t,s+r)!==u(e,r)){n=!1;break}if(n)return s}return-1}function _(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(Z(r))return o;t[n+o]=r}return o}function v(t,e,n,r){return Y($(e,t.length-n),t,n,r)}function E(t,e,n,r){return Y(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return Y(G(e),t,n,r)}function S(t,e,n,r){return Y(function(t,e){let n,r,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=k));return n}(r)}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return d(t)},c.allocUnsafeSlow=function(t){return d(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(W(e,Uint8Array))i+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,i){if(W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0);const a=Math.min(s,o),u=this.slice(r,i),l=t.slice(e,n);for(let t=0;t<a;++t)if(u[t]!==l[t]){s=u[t],o=l[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":case"latin1":case"binary":return E(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function O(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=X[t[r]];return i}function x(t,e,n){const r=t.slice(e,n);let i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r,i){H(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function D(t,e,n,r,i){H(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function L(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,s){return e=+e,n>>>=0,s||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function M(t,e,n,r,s){return e=+e,n>>>=0,s||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=J((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=J((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=J((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=J((function(t){j(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=J((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=J((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=J((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=J((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return M(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return M(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const s=c.isBuffer(t)?t:c.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};const F={};function V(t,e,n){F[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function q(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function H(t,e,n,r,i,s){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||K(e,t.length-(n+1))}(r,i,s)}function j(t,e){if("number"!=typeof t)throw new F.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){if(Math.floor(t)!==t)throw j(t,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=q(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function $(t,e){let n;e=e||1/0;const r=t.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function W(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Z(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},39714:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function i(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function s(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function o(t,e){try{return e in t}catch(t){return!1}}function a(t,n,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||e,c.cloneUnlessOtherwiseSpecified=r;var u=Array.isArray(n);return u===Array.isArray(t)?u?c.arrayMerge(t,n,c):function(t,e,n){var i={};return n.isMergeableObject(t)&&s(t).forEach((function(e){i[e]=r(t[e],n)})),s(e).forEach((function(s){(function(t,e){return o(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,s)||(o(t,s)&&n.isMergeableObject(e[s])?i[s]=function(t,e){if(!e.customMerge)return a;var n=e.customMerge(t);return"function"==typeof n?n:a}(s,n)(t[s],e[s],n):i[s]=r(e[s],n))})),i}(t,n,c):r(n,c)}a.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return a(t,n,e)}),{})};var c=a;t.exports=c},22699:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,s),r(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,n,r){var i,s,o,u;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(t))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){r.once&&t.removeEventListener(e,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)r(c,this,e);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,s,o;if(a(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return h(this,t,!0)},s.prototype.rawListeners=function(t){return h(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},62333:(t,e)=>{e.read=function(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+t[e+d],d+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+d],d+=h,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=u}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,n,r,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[n+f]=255&o,f+=p,o/=256,u-=8);t[n+f-p]|=128*g}},27808:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},s={};function o(t,e){var n,r,o;return e?(o=0<=(t>>>=0)&&t<256)&&(r=s[t])?r:(n=c(t,(0|t)<0?-1:0,!0),o&&(s[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(r=i[t])?r:(n=c(t,t<0?-1:0,!1),o&&(i[t]=n),n)}function a(t,e){if(isNaN(t))return e?m:y;if(e){if(t<0)return m;if(t>=f)return E}else{if(t<=-p)return A;if(t+1>=p)return v}return t<0?a(-t,e).neg():c(t%h|0,t/h|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=o,n.fromNumber=a,n.fromBits=c;var u=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return y;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,n).neg();for(var i=a(u(n,8)),s=y,o=0;o<t.length;o+=8){var c=Math.min(8,t.length-o),d=parseInt(t.substring(o,o+c),n);if(c<8){var h=a(u(n,c));s=s.mul(h).add(a(d))}else s=(s=s.mul(i)).add(a(d))}return s.unsigned=e,s}function d(t,e){return"number"==typeof t?a(t,e):"string"==typeof t?l(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=d;var h=4294967296,f=h*h,p=f/2,g=o(1<<24),y=o(0);n.ZERO=y;var m=o(0,!0);n.UZERO=m;var w=o(1);n.ONE=w;var b=o(1,!0);n.UONE=b;var _=o(-1);n.NEG_ONE=_;var v=c(-1,2147483647,!1);n.MAX_VALUE=v;var E=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=E;var A=c(0,-2147483648,!1);n.MIN_VALUE=A;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var e=a(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=a(u(t,6),this.unsigned),s=this,o="";;){var c=s.div(i),l=(s.sub(c.mul(i)).toInt()>>>0).toString(t);if((s=c).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return r(t)||(t=d(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(r(t)||(t=d(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(w)},S.neg=S.negate,S.add=function(t){r(t)||(t=d(t));var e=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,u=t.low>>>16,l=0,h=0,f=0,p=0;return f+=(p+=s+(65535&t.low))>>>16,h+=(f+=i+u)>>>16,l+=(h+=n+a)>>>16,l+=e+o,c((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(t){return r(t)||(t=d(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return y;if(r(t)||(t=d(t)),e)return c(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return y;if(this.eq(A))return t.isOdd()?A:y;if(t.eq(A))return this.isOdd()?A:y;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return a(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,s=this.low>>>16,o=65535&this.low,u=t.high>>>16,l=65535&t.high,h=t.low>>>16,f=65535&t.low,p=0,m=0,w=0,b=0;return w+=(b+=o*f)>>>16,m+=(w+=s*f)>>>16,w&=65535,m+=(w+=o*h)>>>16,p+=(m+=i*f)>>>16,m&=65535,p+=(m+=s*h)>>>16,m&=65535,p+=(m+=o*l)>>>16,p+=n*f+i*h+s*l+o*u,c((w&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(r(t)||(t=d(t)),t.isZero())throw Error("division by zero");var n,i,s;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:y;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return m;if(t.gt(this.shru(1)))return b;s=m}else{if(this.eq(A))return t.eq(w)||t.eq(_)?A:t.eq(A)?w:(n=this.shr(1).div(t).shl(1)).eq(y)?t.isNegative()?w:_:(i=this.sub(t.mul(n)),s=n.add(i.div(t)));if(t.eq(A))return this.unsigned?m:y;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=y}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:u(2,o-48),h=a(n),f=h.mul(t);f.isNegative()||f.gt(i);)f=(h=a(n-=l,this.unsigned)).mul(t);h.isZero()&&(h=w),s=s.add(h),i=i.sub(f)}return s},S.div=S.divide,S.modulo=function(t){return r(t)||(t=d(t)),e?c((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.and=function(t){return r(t)||(t=d(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return r(t)||(t=d(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return r(t)||(t=d(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},91985:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Keplr=void 0;const s=n(47722),o=n(81880),a=n(4941),c=i(n(39714)),u=i(n(27808)),l=n(48834),d=i(n(22699));e.Keplr=class{constructor(t,e,n){this.version=t,this.mode=e,this.requester=n,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new f(this,this.requester),this.starknet=new g(this,this.requester),this.bitcoin=new y(this,this.requester)}ping(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","keplr-ping",{})}))}enable(t){return"string"==typeof t&&(t=[t]),new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access",{chainIds:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}isEnabled(t){return r(this,void 0,void 0,(function*(){return"string"==typeof t&&(t=[t]),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","is-enabled-access",{chainIds:t})}))}disable(t){return r(this,void 0,void 0,(function*(){return"string"==typeof t&&(t=[t]),new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","disable-access",{chainIds:null!=t?t:[]}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}experimentalSuggestChain(t){return r(this,void 0,void 0,(function*(){if(t.hideInUI)throw new Error("hideInUI is not allowed");if(t.gasPriceStep){const e=Object.assign({},t.gasPriceStep);for(const n of t.feeCurrencies)n.gasPriceStep||(n.gasPriceStep=e);delete t.gasPriceStep,console.warn("The `gasPriceStep` field of the `ChainInfo` has been moved under `feeCurrencies`. This is automatically handled as of right now, but the upcoming update would potentially cause errors.")}return t.coinType&&(console.warn("The `coinType` field of the `ChainInfo` is removed. This is automatically handled as of right now, but the upcoming update would potentially cause errors."),delete t.coinType),new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","need-suggest-chain-info-interaction",{chainInfo:t}).then((i=>{i||(r=!0),(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","suggest-chain-info",{chainInfo:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}))}getKey(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-key",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getKeysSettled(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-keys-settled",{chainIds:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-infos-without-endpoints",{}).then((e=>t(e.chainInfos))).catch(e).finally((()=>n=!0)),setTimeout((()=>{n||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChainInfoWithoutEndpoints(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-info-without-endpoints",{chainId:t}).then((t=>e(t.chainInfo))).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}sendTx(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.enable(t),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx","send-tx-to-background",{chainId:t,tx:e,mode:n})}))}signAmino(t,e,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let u=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino",{chainId:t,signer:e,signDoc:n,signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then(r).catch(o).finally((()=>u=!0)),setTimeout((()=>{u||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signDirect(t,e,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let l=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct",{chainId:t,signer:e,signDoc:{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then((t=>r({signed:{bodyBytes:t.signed.bodyBytes,authInfoBytes:t.signed.authInfoBytes,chainId:t.signed.chainId,accountNumber:u.default.fromString(t.signed.accountNumber)},signature:t.signature}))).catch(o).finally((()=>l=!0)),setTimeout((()=>{l||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signDirectAux(t,e,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let l=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct-aux",{chainId:t,signer:e,signDoc:{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},signOptions:(0,c.default)({preferNoSetMemo:null===(a=this.defaultOptions.sign)||void 0===a?void 0:a.preferNoSetMemo},i)}).then((t=>r({signed:{bodyBytes:t.signed.bodyBytes,publicKey:t.signed.publicKey,chainId:t.signed.chainId,accountNumber:u.default.fromString(t.signed.accountNumber),sequence:u.default.fromString(t.signed.sequence)},signature:t.signature}))).catch(o).finally((()=>l=!0)),setTimeout((()=>{l||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signArbitrary(t,e,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino-adr-36",{chainId:t,signer:e,data:"string"==typeof n?l.Buffer.from(n):n,signOptions:{isADR36WithString:"string"==typeof n}}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}verifyArbitrary(t,e,n,i){return r(this,void 0,void 0,(function*(){return"string"==typeof n&&(n=l.Buffer.from(n)),new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","verify-cosmos-sign-amino-adr-36",{chainId:t,signer:e,data:n,signature:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signEthereum(t,e,n,i){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-sign-ethereum",{chainId:t,signer:e,message:"string"==typeof n?l.Buffer.from(n):n,signType:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signICNSAdr36(t,e,n,i,o){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{let c=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-icns-adr-36-signatures-v2",{chainId:t,contractAddress:e,owner:n,username:i,addressChainIds:o}).then(r).catch(a).finally((()=>c=!0)),setTimeout((()=>{c||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getOfflineSigner(t,e){return new a.CosmJSOfflineSigner(t,this,e)}getOfflineSignerOnlyAmino(t,e){return new a.CosmJSOfflineSignerOnlyAmino(t,this,e)}getOfflineSignerAuto(t,e){return r(this,void 0,void 0,(function*(){return(yield this.getKey(t)).isNanoLedger?new a.CosmJSOfflineSignerOnlyAmino(t,this,e):new a.CosmJSOfflineSigner(t,this,e)}))}suggestToken(t,e,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","SuggestTokenMsg",{chainId:t,contractAddress:e,viewingKey:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getSecret20ViewingKey(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","get-secret20-viewing-key",{chainId:t,contractAddress:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getEnigmaPubKey(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-pubkey-msg",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getEnigmaTxEncryptionKey(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-tx-encryption-key-msg",{chainId:t,nonce:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enigmaEncrypt(t,e,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-encrypt-msg",{chainId:t,contractCodeHash:e,msg:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enigmaDecrypt(t,e,n){return r(this,void 0,void 0,(function*(){return e&&0!==e.length?new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-decrypt-msg",{chainId:t,cipherText:e,nonce:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)})):new Uint8Array}))}getEnigmaUtils(t){if(this.enigmaUtils.has(t))return this.enigmaUtils.get(t);const e=new o.KeplrEnigmaUtils(t,this);return this.enigmaUtils.set(t,e),e}experimentalSignEIP712CosmosTx_v0(t,e,n,i,o={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{var u;let l=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-sign-eip-712-cosmos-tx-v0",{chainId:t,signer:e,eip712:n,signDoc:i,signOptions:(0,c.default)(null!==(u=this.defaultOptions.sign)&&void 0!==u?u:{},o)}).then(r).catch(a).finally((()=>l=!0)),setTimeout((()=>{l||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__getAnalyticsId(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"analytics","get-analytics-id",{})}))}changeKeyRingName({defaultName:t,editable:e=!0}){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-v2","change-keyring-name-interactive",{defaultName:t,editable:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__privilageSignAminoWithdrawRewards(t,e,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoWithdrawRewards",{chainId:t,signer:e,signDoc:n})}))}__core__privilageSignAminoDelegate(t,e,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoDelegate",{chainId:t,signer:e,signDoc:n})}))}__core__privilageSignAminoExecuteCosmWasm(t,e,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoExecuteCosmWasm",{chainId:t,signer:e,signDoc:n})}))}sendEthereumTx(t,e){return r(this,void 0,void 0,(function*(){return yield this.enable(t),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx-ethereum","send-ethereum-tx-to-background",{chainId:t,tx:e})}))}suggestERC20(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-erc20","SuggestERC20TokenMsg",{chainId:t,contractAddress:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","injected-webpage-closed",{})}))}getStarknetKey(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-key",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getStarknetKeysSettled(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-keys-settled",{chainIds:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signStarknetTx(t,e,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-tx",{chainId:t,transactions:e,details:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signStarknetDeployAccountTransaction(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-deploy-account-tx",{chainId:t,transaction:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}))}))}))}getBitcoinKey(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","get-bitcoin-key",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getBitcoinKeysSettled(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","get-bitcoin-keys-settled",{chainIds:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signPsbt(t,e,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbt",{chainId:t,psbtHex:e,options:n})}))}signPsbts(t,e,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbts",{chainId:t,psbtsHexes:e,options:n})}))}protectedTryOpenSidePanelIfEnabled(t=!1){return r(this,void 0,void 0,(function*(){let e=!1;if("undefined"!=typeof window&&!0===window.__keplr_content_script&&(e=!0),e&&(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"side-panel","GetSidePanelEnabledMsg",{})).enabled)try{return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"router-extension/src/router/extension.ts","tryOpenSidePanelIfEnabled",{})}catch(e){if(console.log(e),!t&&e.message&&e.message.includes("in response to a user gesture")&&!document.getElementById("__open_keplr_side_panel__")){if(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}))return;const t=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring","GetIsLockedMsg",{}),e=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"settings","GetThemeOptionMsg",{}),n=`\n                @font-face {\n                  font-family: 'Inter-SemiBold-Keplr';\n                  src: url('${chrome.runtime.getURL("/assets/Inter-SemiBold.ttf")}') format('truetype');\n                  font-weight: 600;\n                  font-style: normal;\n                }\n\n                @keyframes slide-left {\n                  0% {\n                    transform: translateY(0%) translateX(100%);\n                  }\n                  100% {\n                    transform: translateY(0%) translateX(0);\n                  }\n                }\n                    \n                @keyframes tada {\n                  0% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                  10%, 20% {\n                    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);\n                  }\n                  30%, 50%, 70%, 90% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);\n                  }\n                  40%, 60%, 80% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);\n                  }\n                  100% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                }\n                  \n            `,r="auto"===e?!window.matchMedia("(prefers-color-scheme: dark)").matches:"light"===e,i=document.createElement("style");i.appendChild(document.createTextNode(n)),document.head.appendChild(i);const o=document.createElement("div");o.id="__open_keplr_side_panel__",o.style.boxSizing="border-box",o.style.animation="slide-left 0.5s forwards",o.style.position="fixed",o.style.right="1.5rem",o.style.top="1.5rem",o.style.padding="1rem 1.75rem 1rem 0.75rem",o.style.zIndex="2147483647",o.style.borderRadius="1rem",o.style.display="flex",o.style.alignItems="center",o.style.fontFamily="Inter-SemiBold-Keplr",o.style.fontWeight="600",o.style.background=r?"#FEFEFE":"#1D1D1F";const a=document.createElement("div");a.style.boxSizing="border-box",a.style.transform="translateY(-0.65rem)",a.style.marginRight="0.35rem",a.innerHTML=`\n                <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M30 29.7522C25.1484 31.0691 16.7109 27.1184 18.6093 18.3391C20.5078 9.55979 25.5703 11.5351 26.414 12.852C27.2578 14.1689 28.3125 22.2898 15.8672 19.2171C5.9109 16.7589 7.15625 6.04811 8 1M8 1L14 8M8 1L1 7.5" stroke="${r?"#2C4BE2":"#72747B"}"/>\n                </svg>\n              `;const c=document.createElement("div");c.style.boxSizing="border-box",c.style.position="relative",c.style.marginRight="1rem";const u=document.createElement("img"),l=chrome.runtime.getURL(`/assets/${t?"locked-keplr-logo":"icon"}-128.png`);u.src=l,u.style.boxSizing="border-box",u.style.width="3rem",u.style.height="3rem",c.appendChild(u);const d=document.createElement("img"),h=chrome.runtime.getURL("assets/icon-click-cursor.png");d.src=h,d.style.boxSizing="border-box",d.style.position="absolute",d.style.right="-0.2rem",d.style.bottom="-0.2rem",d.style.aspectRatio="78/98",d.style.height="1.375rem",c.appendChild(d);const f=document.createElement("span");if(f.style.boxSizing="border-box",f.style.fontSize="1rem",f.style.color=r?"#020202":"#FEFEFE",f.textContent=t?"Unlock Keplr to proceed":"Open Keplr to approve request(s)",o.appendChild(a),o.appendChild(c),o.appendChild(f),!document.getElementById("__open_keplr_side_panel__")){let t=!1;const e=setInterval((()=>{(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}).then((n=>{n&&(clearInterval(e),t||(o.remove(),t=!0))}))}),300);document.body.appendChild(o)}}}}))}};const h=["eth_signTransaction","eth_sendTransaction","personal_sign","eth_signTypedData_v3","eth_signTypedData_v4","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset"];class f extends d.default{constructor(t,e){super(),this.keplr=t,this.requester=e,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.isKeplr=!0,this.isMetaMask=!0}protectedEnableAccess(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-evm",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}protectedGetNewCurrentChainIdFromRequest(t,e){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","get-new-current-chain-id-for-evm",{method:t,params:e})}))}protectedCheckNeedEnableAccess(t){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","check-need-enable-access-for-evm",{method:t})}))}isConnected(){return!0}request({method:t,params:e,providerId:n,chainId:i}){return r(this,void 0,void 0,(function*(){if("string"!=typeof t)throw new Error("Invalid paramater: `method` must be a string");if(yield this.protectedCheckNeedEnableAccess(t)){const n=yield this.protectedGetNewCurrentChainIdFromRequest(t,e);yield this.protectedEnableAccess(n)}return new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-json-rpc-to-evm",{method:t,params:e,providerId:n,chainId:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{!a&&h.includes(t)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enable(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})}))}net_version(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})}))}}const p=["wallet_watchAsset","wallet_switchStarknetChain","wallet_addInvokeTransaction","wallet_addDeclareTransaction","wallet_signTypedData"];class g{constructor(t,e){this.keplr=t,this.requester=e,this.id="",this.name="",this.version="",this.icon="",this.isConnected=!1}protectedEnableAccess(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-starknet",{chainId:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}protectedGetNewCurrentChainIdFromRequest(t,e){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-new-current-chain-id-for-starknet",{method:t,params:e})}))}protectedCheckNeedEnableAccess(t,e){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","check-need-enable-access-for-starknet",{method:t,params:e})}))}request({type:t,params:e}){return r(this,void 0,void 0,(function*(){if("string"!=typeof t)throw new Error("Invalid parameter: `type` must be a string");if(yield this.protectedCheckNeedEnableAccess(t,e)){const n=yield this.protectedGetNewCurrentChainIdFromRequest(t,e);yield this.protectedEnableAccess(n)}return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-json-rpc-to-starknet",{method:t,params:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{!i&&p.includes(t)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enable(t){return r(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}isPreauthorized(){throw new Error("Method not implemented.")}on(t,e){throw new Error("Method not implemented.")}off(t,e){throw new Error("Method not implemented.")}}class y extends d.default{constructor(t,e){super(),this.keplr=t,this.requester=e}protectedEnableAccess(){return r(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-bitcoin",{}).then(t).catch(e).finally((()=>n=!0)),setTimeout((()=>{n||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getAccounts(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-accounts",{})}))}requestAccounts(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-request-accounts",{})}))}disconnect(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-disconnect",{})}))}getNetwork(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-network",{})}))}switchNetwork(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-switch-network",{network:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChain(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-chain",{})}))}switchChain(t){return r(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-switch-chain",{chainType:t}).then(e).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getPublicKey(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-public-key",{})}))}getBalance(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-balance",{})}))}getInscriptions(t,e){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-inscriptions",{offset:t,limit:e})}))}signMessage(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-message",{message:t,signType:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}sendBitcoin(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-send-bitcoin",{to:t,amount:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}pushTx(t){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-push-tx",{rawTxHex:t})}))}pushPsbt(t){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-push-psbt",{psbtHex:t})}))}signPsbt(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbt",{psbtHex:t,options:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signPsbts(t,e){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbts",{psbtsHexes:t,options:e}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getAddress(){return r(this,void 0,void 0,(function*(){throw new Error("This method should not be called")}))}connectWallet(){return r(this,void 0,void 0,(function*(){throw new Error("This method should not be called")}))}}},4941:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CosmJSOfflineSigner=e.CosmJSOfflineSignerOnlyAmino=void 0;class r{constructor(t,e,n){this.chainId=t,this.keplr=e,this.signOptions=n}getAccounts(){return n(this,void 0,void 0,(function*(){const t=yield this.keplr.getKey(this.chainId);return[{address:t.bech32Address,algo:"secp256k1",pubkey:t.pubKey}]}))}signAmino(t,e){return n(this,void 0,void 0,(function*(){if(this.chainId!==e.chain_id)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(e.chain_id)).bech32Address!==t)throw new Error("Unknown signer address");return yield this.keplr.signAmino(this.chainId,t,e,this.signOptions)}))}sign(t,e){return n(this,void 0,void 0,(function*(){return yield this.signAmino(t,e)}))}}e.CosmJSOfflineSignerOnlyAmino=r,e.CosmJSOfflineSigner=class extends r{constructor(t,e,n){super(t,e,n)}signDirect(t,e){return n(this,void 0,void 0,(function*(){if(this.chainId!==e.chainId)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(e.chainId)).bech32Address!==t)throw new Error("Unknown signer address");return yield this.keplr.signDirect(this.chainId,t,e,this.signOptions)}))}}},81880:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.KeplrEnigmaUtils=void 0,e.KeplrEnigmaUtils=class{constructor(t,e){this.chainId=t,this.keplr=e}getPubkey(){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaPubKey(this.chainId)}))}getTxEncryptionKey(t){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaTxEncryptionKey(this.chainId,t)}))}encrypt(t,e){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaEncrypt(this.chainId,t,e)}))}decrypt(t,e){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaDecrypt(this.chainId,t,e)}))}}},33210:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(91985),e),i(n(4941),e),i(n(81880),e),i(n(77818),e)},77818:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BitcoinProvider=e.InjectedKeplr=e.injectKeplrToWindow=void 0;const s=n(65880),o=n(47722),a=n(81880),c=n(4941),u=i(n(39714)),l=i(n(27808)),d=i(n(22699));function h(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);!r||r.writable?!r||r.configurable?Object.defineProperty(t,e,{value:n,writable:!1}):t[e]=n:console.warn(`Failed to inject ${e} from keplr. Probably, other wallet is trying to intercept Keplr`)}e.injectKeplrToWindow=function(t){h(window,"keplr",t),h(window,"getOfflineSigner",t.getOfflineSigner),h(window,"getOfflineSignerOnlyAmino",t.getOfflineSignerOnlyAmino),h(window,"getOfflineSignerAuto",t.getOfflineSignerAuto),h(window,"getEnigmaUtils",t.getEnigmaUtils),h(window,"starknet_keplr",t.starknet),h(window,"bitcoin_keplr",t.bitcoin)};class f{static startProxy(t,e,n={addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},i){const s="proxy-request"+(e?`-${e}`:""),a=e=>r(this,void 0,void 0,(function*(){const a=i?i(e.data):e.data;if(a&&(a.type===s||"proxy-request"===a.type))try{if(!a.id)throw new Error("Empty id");if(a.method.startsWith("protected"))throw new Error("Rejected");if("version"===a.method)throw new Error("Version is not function");if("mode"===a.method)throw new Error("Mode is not function");if("defaultOptions"===a.method)throw new Error("DefaultOptions is not function");if(!t[a.method]||"ethereum"!==a.method&&"starknet"!==a.method&&"bitcoin"!==a.method&&"function"!=typeof t[a.method])throw new Error(`Invalid method: ${a.method}`);if("getOfflineSigner"===a.method)throw new Error("GetOfflineSigner method can't be proxy request");if("getOfflineSignerOnlyAmino"===a.method)throw new Error("GetOfflineSignerOnlyAmino method can't be proxy request");if("getOfflineSignerAuto"===a.method)throw new Error("GetOfflineSignerAuto method can't be proxy request");if("getEnigmaUtils"===a.method)throw new Error("GetEnigmaUtils method can't be proxy request");const e=a.method,i=yield(()=>r(this,void 0,void 0,(function*(){var n,i;if("signDirect"===e)return yield(()=>r(this,void 0,void 0,(function*(){const e=a.args[2],n=yield t.signDirect(a.args[0],a.args[1],{bodyBytes:e.bodyBytes,authInfoBytes:e.authInfoBytes,chainId:e.chainId,accountNumber:e.accountNumber?l.default.fromString(e.accountNumber):null},a.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,authInfoBytes:n.signed.authInfoBytes,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString()},signature:n.signature}})))();if("signDirectAux"===e)return yield(()=>r(this,void 0,void 0,(function*(){const e=a.args[2],n=yield t.signDirectAux(a.args[0],a.args[1],{bodyBytes:e.bodyBytes,publicKey:e.publicKey,chainId:e.chainId,accountNumber:e.accountNumber?l.default.fromString(e.accountNumber):null,sequence:e.sequence?l.default.fromString(e.sequence):null},a.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,publicKey:n.signed.publicKey,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString(),sequence:n.signed.sequence.toString()},signature:n.signature}})))();if("ethereum"===e){const e=a.ethereumProviderMethod;if(null==e?void 0:e.startsWith("protected"))throw new Error("Rejected");if("chainId"===e)throw new Error("chainId is not function");if("selectedAddress"===e)throw new Error("selectedAddress is not function");if("networkVersion"===e)throw new Error("networkVersion is not function");if("isKeplr"===e)throw new Error("isKeplr is not function");if("isMetaMask"===e)throw new Error("isMetaMask is not function");if(void 0===e||"function"!=typeof t.ethereum[e])throw new Error(`${a.ethereumProviderMethod} is not function or invalid Ethereum provider method`);const n=o.JSONUint8Array.unwrap(a.args);return"request"===e?yield t.ethereum.request("string"==typeof n?JSON.parse(n):n):yield t.ethereum[e](..."string"==typeof n?JSON.parse(n):n)}if("starknet"===e){const e=a.starknetProviderMethod;if(null==e?void 0:e.startsWith("protected"))throw new Error("Rejected");if("id"===e)throw new Error("id is not function");if("name"===e)throw new Error("name is not function");if("version"===e)throw new Error("version is not function");if("icon"===e)throw new Error("icon is not function");if("chainId"===e)throw new Error("chainId is not function");if("selectedAddress"===e)throw new Error("selectedAddress is not function");if("isConnected"===e)throw new Error("isConnected is not function");if("account"===e)throw new Error("account is not function");if("provider"===e)throw new Error("provider is not function");if(void 0===e||"function"!=typeof(null===(n=t.starknet)||void 0===n?void 0:n[e]))throw new Error(`${a.starknetProviderMethod} is not function or invalid Starknet provider method`);const r=o.JSONUint8Array.unwrap(a.args);return"request"===e?yield t.starknet.request("string"==typeof r?JSON.parse(r):r):yield t.starknet[e](..."string"==typeof r?JSON.parse(r):r)}if("bitcoin"===e){const e=a.bitcoinProviderMethod;if(null==e?void 0:e.startsWith("protected"))throw new Error("Rejected");if(void 0===e||"function"!=typeof(null===(i=t.bitcoin)||void 0===i?void 0:i[e]))throw new Error(`${a.bitcoinProviderMethod} is not function or invalid Bitcoin provider method`);const n=o.JSONUint8Array.unwrap(a.args);return yield t.bitcoin[e](..."string"==typeof n?JSON.parse(n):n)}return yield t[e](...o.JSONUint8Array.unwrap(a.args))})))(),s={type:"proxy-request-response",id:a.id,result:{return:o.JSONUint8Array.wrap(i)}};n.postMessage(s)}catch(t){const e={type:"proxy-request-response",id:a.id,result:{error:t.code&&!t.module?{code:t.code,message:t.message,data:t.data}:t.message||t.toString()}};n.postMessage(e)}}));return n.addMessageListener(a),()=>{n.removeMessageListener(a)}}requestMethod(t,e){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((t=>t.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:t,args:o.JSONUint8Array.wrap(e)};return new Promise(((t,e)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);a?a.error?e(new Error(a.error)):t(a.return):e(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))}constructor(t,e,n,r,i,s={addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},o,a,c){this.metaId=t,this.version=e,this.mode=n,this.onStarknetStateChange=r,this.onStarknetAccountChange=i,this.eventListener=s,this.parseMessage=o,this.eip6963ProviderInfo=a,this.starknetProviderInfo=c,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new p(this.metaId,(()=>this),this.eventListener,this.parseMessage,this.eip6963ProviderInfo),this.starknet=this.generateStarknetProvider(),this.bitcoin=new y((()=>this),this.eventListener,this.parseMessage);const u=Object.keys(this);for(const t of u)if("defaultOptions"!==t&&Object.defineProperty(this,t,{value:this[t],writable:!1}),"eventListener"===t){const t=Object.keys(this.eventListener);for(const e of t)Object.defineProperty(this.eventListener,e,{value:this.eventListener[e],writable:!1})}const l=Object.getOwnPropertyNames(f.prototype);for(const t of l)"constructor"!==t&&"function"==typeof this[t]&&Object.defineProperty(this,t,{value:this[t].bind(this),writable:!1})}ping(){return r(this,void 0,void 0,(function*(){yield this.requestMethod("ping",[])}))}enable(t){return r(this,void 0,void 0,(function*(){yield this.requestMethod("enable",[t])}))}disable(t){return r(this,void 0,void 0,(function*(){yield this.requestMethod("disable",[t])}))}experimentalSuggestChain(t){var e,n;return r(this,void 0,void 0,(function*(){if(t.hideInUI)throw new Error("hideInUI is not allowed");((null===(e=t.features)||void 0===e?void 0:e.includes("stargate"))||(null===(n=t.features)||void 0===n?void 0:n.includes("no-legacy-stdTx")))&&console.warn("stargate, no-legacy-stdTx feature has been deprecated. The launchpad is no longer supported, thus works without the two features. We would keep the aforementioned two feature for a while, but the upcoming update would potentially cause errors. Remove the two feature."),yield this.requestMethod("experimentalSuggestChain",[t])}))}getKey(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKey",[t])}))}getKeysSettled(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKeysSettled",[t])}))}sendTx(t,e,n){return r(this,void 0,void 0,(function*(){return"length"in e||console.warn("Do not send legacy std tx via `sendTx` API. We now only support protobuf tx. The usage of legeacy std tx would throw an error in the near future."),yield this.requestMethod("sendTx",[t,e,n])}))}signAmino(t,e,n,i={}){var s;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signAmino",[t,e,n,(0,u.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)])}))}signDirect(t,e,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirect",[t,e,{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},(0,u.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,authInfoBytes:o.authInfoBytes,chainId:o.chainId,accountNumber:l.default.fromString(o.accountNumber)},signature:r.signature}}))}signDirectAux(t,e,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirectAux",[t,e,{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},(0,u.default)({preferNoSetMemo:null===(s=this.defaultOptions.sign)||void 0===s?void 0:s.preferNoSetMemo},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,publicKey:o.publicKey||void 0,chainId:o.chainId,accountNumber:l.default.fromString(o.accountNumber),sequence:l.default.fromString(o.sequence)},signature:r.signature}}))}signArbitrary(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signArbitrary",[t,e,n])}))}signICNSAdr36(t,e,n,r,i){return this.requestMethod("signICNSAdr36",[t,e,n,r,i])}verifyArbitrary(t,e,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("verifyArbitrary",[t,e,n,i])}))}signEthereum(t,e,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signEthereum",[t,e,n,i])}))}getOfflineSigner(t,e){return new c.CosmJSOfflineSigner(t,this,e)}getOfflineSignerOnlyAmino(t,e){return new c.CosmJSOfflineSignerOnlyAmino(t,this,e)}getOfflineSignerAuto(t,e){return r(this,void 0,void 0,(function*(){return(yield this.getKey(t)).isNanoLedger?new c.CosmJSOfflineSignerOnlyAmino(t,this,e):new c.CosmJSOfflineSigner(t,this,e)}))}suggestToken(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestToken",[t,e,n])}))}getSecret20ViewingKey(t,e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getSecret20ViewingKey",[t,e])}))}getEnigmaPubKey(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaPubKey",[t])}))}getEnigmaTxEncryptionKey(t,e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaTxEncryptionKey",[t,e])}))}enigmaEncrypt(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaEncrypt",[t,e,n])}))}enigmaDecrypt(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaDecrypt",[t,e,n])}))}getEnigmaUtils(t){if(this.enigmaUtils.has(t))return this.enigmaUtils.get(t);const e=new a.KeplrEnigmaUtils(t,this);return this.enigmaUtils.set(t,e),e}experimentalSignEIP712CosmosTx_v0(t,e,n,i,s={}){var o;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("experimentalSignEIP712CosmosTx_v0",[t,e,n,i,(0,u.default)(null!==(o=this.defaultOptions.sign)&&void 0!==o?o:{},s)])}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfosWithoutEndpoints",[])}))}getChainInfoWithoutEndpoints(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfoWithoutEndpoints",[t])}))}__core__getAnalyticsId(){return this.requestMethod("__core__getAnalyticsId",[])}changeKeyRingName({defaultName:t,editable:e=!0}){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("changeKeyRingName",[{defaultName:t,editable:e}])}))}__core__privilageSignAminoWithdrawRewards(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoWithdrawRewards",[t,e,n])}))}__core__privilageSignAminoDelegate(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoDelegate",[t,e,n])}))}__core__privilageSignAminoExecuteCosmWasm(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoExecuteCosmWasm",[t,e,n])}))}sendEthereumTx(t,e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("sendEthereumTx",[t,e])}))}suggestERC20(t,e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestERC20",[t,e])}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__webpageClosed",[])}))}getStarknetKey(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKey",[t])}))}getStarknetKeysSettled(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKeysSettled",[t])}))}signStarknetTx(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetTx",[t,e,n])}))}signStarknetDeployAccountTransaction(t,e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetDeployAccountTransaction",[t,e])}))}generateStarknetProvider(){return new g(this.metaId,this.starknetProviderInfo.id,this.starknetProviderInfo.name,this.version,this.starknetProviderInfo.icon,(()=>this),this.onStarknetStateChange,this.onStarknetAccountChange,this.eventListener,this.parseMessage)}getBitcoinKey(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getBitcoinKey",[t])}))}getBitcoinKeysSettled(t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getBitcoinKeysSettled",[t])}))}signPsbt(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signPsbt",[t,e,n])}))}signPsbts(t,e,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signPsbts",[t,e,n])}))}}e.InjectedKeplr=f;class p extends d.default{constructor(t,e,n={addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},i,a){if(super(),this.metaId=t,this.injectedKeplr=e,this.eventListener=n,this.parseMessage=i,this.eip6963ProviderInfo=a,this.chainId=null,this.networkVersion=null,this.selectedAddress=null,this.isKeplr=!0,this.isMetaMask=!0,this._isConnected=!1,this._currentChainId=null,this._requestMethod=(t,e)=>r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((t=>t.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:"ethereum",args:o.JSONUint8Array.wrap(e),ethereumProviderMethod:t};return new Promise(((t,e)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const t=a.error;e(t.code&&!t.module?new o.EthereumProviderRpcError(t.code,t.message,t.data):new Error(t))}else t(a.return);else e(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))})),this._initProviderState=()=>r(this,void 0,void 0,(function*(){const t=yield this._requestMethod("request",{method:"keplr_initProviderState"});if(t){const{currentEvmChainId:e,currentChainId:n,selectedAddress:r}=t;null!=n&&null!=e&&null!=r&&(this._handleConnect(e),this._handleChainChanged(e),this._currentChainId=n,this._handleAccountsChanged(r))}})),this._handleConnect=t=>r(this,void 0,void 0,(function*(){if(!this._isConnected){this._isConnected=!0;const e=`0x${t.toString(16)}`;this.emit("connect",{chainId:e})}})),this._handleDisconnect=()=>r(this,void 0,void 0,(function*(){this._isConnected&&(yield this._requestMethod("request",{method:"keplr_disconnect"}),this._isConnected=!1,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.emit("disconnect"))})),this._handleChainChanged=t=>r(this,void 0,void 0,(function*(){const e=`0x${t.toString(16)}`;e!==this.chainId&&(this.chainId=e,this.networkVersion=t.toString(10),this.emit("chainChanged",e))})),this._handleAccountsChanged=t=>r(this,void 0,void 0,(function*(){this.selectedAddress!==t&&(this.selectedAddress=t,t?this.emit("accountsChanged",[t]):this.emit("accountsChanged",[]))})),this.request=({method:t,params:e,chainId:n})=>r(this,void 0,void 0,(function*(){var r;if("string"!=typeof t)throw new Error("Invalid paramater: `method` must be a string");return this._isConnected||(yield this._initProviderState()),yield this._requestMethod("request",{method:t,params:e,providerId:null===(r=this.eip6963ProviderInfo)||void 0===r?void 0:r.uuid,chainId:n})})),this.enable=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})})),this.net_version=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})})),this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId&&(yield e().getChainInfoWithoutEndpoints(this._currentChainId))){let t=null;try{t=(yield e().getKey(this._currentChainId)).ethereumHexAddress}catch(t){(null==t?void 0:t.message.includes("on Ledger by selecting the chain in the extension"))||console.error(`Failed to get key for keystorechange event: ${t.message}`)}this._handleAccountsChanged(t)}})))),window.addEventListener("keplr_chainChanged",(t=>{if(t.detail.origin===window.location.origin){const e=t.detail.evmChainId;this._handleChainChanged(e)}})),window.addEventListener("keplr_ethSubscription",(t=>{var e;const n=t.detail.origin,r=t.detail.providerId;if(n===window.location.origin&&r===(null===(e=this.eip6963ProviderInfo)||void 0===e?void 0:e.uuid)){const e=t.detail.data;this.emit("message",{type:"eth_subscription",data:e})}})),this.eip6963ProviderInfo){const t=new CustomEvent(s.EIP6963EventNames.Announce,{detail:Object.freeze({info:this.eip6963ProviderInfo,provider:this})});window.addEventListener(s.EIP6963EventNames.Request,(()=>window.dispatchEvent(t))),window.dispatchEvent(t)}}isConnected(){return this._isConnected}}class g{constructor(t,e,n,i,s,o,a,c,u={addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},l){this.metaId=t,this.id=e,this.name=n,this.version=i,this.icon=s,this._injectedKeplr=o,this.onStateChange=a,this.onAccountChange=c,this._eventListener=u,this._parseMessage=l,this.isConnected=!1,this.chainId=void 0,this.selectedAddress=void 0,this.account=void 0,this.provider=void 0,this._currentChainId=void 0,this._userWalletEvents=[],this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId){let t=null;try{t=(yield this._injectedKeplr().getStarknetKey(this._currentChainId)).hexAddress}catch(t){(null==t?void 0:t.message.includes("on Ledger by selecting the chain in the extension"))||console.error(`Failed to get key for keystorechange event: ${t.message}`)}this.selectedAddress=null!=t?t:void 0,this.onAccountChange({selectedAddress:t}),this._userWalletEvents.forEach((e=>{"accountsChanged"===e.type&&e.handler(t?[t]:[""])}))}})))),window.addEventListener("keplr_starknetChainChanged",(t=>{const e=t.detail.origin,n=t.detail.starknetChainId;this.chainId=n,e===window.location.origin&&this._userWalletEvents.forEach((t=>{"networkChanged"===t.type&&t.handler(n)}))}))}_requestMethod(t,e){return r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((t=>t.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:"starknet",args:o.JSONUint8Array.wrap(e),starknetProviderMethod:t};return new Promise(((t,e)=>{const n=i=>{const s=this._parseMessage?this._parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this._eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const t=a.error;e(t.code&&!t.module?new o.EthereumProviderRpcError(t.code,t.message,t.data):new Error(t))}else t(a.return);else e(new Error("Result is null"))};this._eventListener.addMessageListener(n),this._eventListener.postMessage(i)}))}))}_initProviderState(){return r(this,void 0,void 0,(function*(){const{currentChainId:t,selectedAddress:e,rpc:n}=yield this.request({type:"keplr_initStarknetProviderState"});null!=t&&null!=e&&null!=n?(this.onStateChange({selectedAddress:e,chainId:t,rpc:n}),this._currentChainId=t,this.chainId=t.replace("starknet:",""),this.selectedAddress=e,this.isConnected=!0):this.onStateChange({selectedAddress:null,chainId:null,rpc:null})}))}request({type:t,params:e}){return r(this,void 0,void 0,(function*(){if("string"!=typeof t)throw new Error("Invalid parameter: `type` must be a string");return yield this._requestMethod("request",{type:t,params:e})}))}enable(t){return r(this,void 0,void 0,(function*(){const{currentChainId:t,selectedAddress:e,rpc:n}=yield this.request({type:"keplr_enableStarknetProvider"});return this.onStateChange({selectedAddress:e,chainId:t,rpc:n}),this._currentChainId=t,this.chainId=t.replace("starknet:",""),this.selectedAddress=e,this.isConnected=!0,[e]}))}isPreauthorized(){return r(this,void 0,void 0,(function*(){const{currentChainId:t,selectedAddress:e}=yield this.request({type:"keplr_initStarknetProviderState"});return null!=t&&null!=e}))}on(t,e){if("accountsChanged"===t)this._userWalletEvents.push({type:"accountsChanged",handler:e});else{if("networkChanged"!==t)throw new Error("Invalid event type");this._userWalletEvents.push({type:"networkChanged",handler:e})}}off(t,e){if("accountsChanged"!==t&&"networkChanged"!==t)throw new Error("Invalid event type");const n=this._userWalletEvents.findIndex((n=>n.type===t&&n.handler===e));n>=0&&this._userWalletEvents.splice(n,1)}}class y extends d.default{constructor(t,e={addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},n){super(),this._injectedKeplr=t,this._eventListener=e,this._parseMessage=n,this._handleNetworkChanged=t=>r(this,void 0,void 0,(function*(){this.emit("networkChanged",t)})),this._handleAccountsChanged=t=>r(this,void 0,void 0,(function*(){t&&t.length>0?(this.emit("accountChanged",t),this.emit("accountsChanged",t)):(this.emit("accountChanged",[""]),this.emit("accountsChanged",[""]))})),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){let t=null;try{t=yield this.getAccounts()}catch(t){(null==t?void 0:t.message.includes("on Ledger by selecting the chain in the extension"))||console.error(`Failed to get key for keystorechange event: ${t.message}`)}this._handleAccountsChanged(t)})))),window.addEventListener("keplr_bitcoinChainChanged",(t=>r(this,void 0,void 0,(function*(){if(t.detail.origin===window.location.origin){const e=t.detail.network;let n=null;try{n=yield this.getAccounts()}catch(t){(null==t?void 0:t.message.includes("on Ledger by selecting the chain in the extension"))||console.error(`Failed to get key for keystorechange event: ${t.message}`)}this._handleNetworkChanged(e),this._handleAccountsChanged(n)}})))),window.addEventListener("keplr_bitcoinAccountsChanged",(()=>r(this,void 0,void 0,(function*(){let t=null;try{t=yield this.getAccounts()}catch(t){(null==t?void 0:t.message.includes("on Ledger by selecting the chain in the extension"))||console.error(`Failed to get key for keystorechange event: ${t.message}`)}this._handleAccountsChanged(t)}))))}_requestMethod(t,e){return r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((t=>t.toString(16))).join(""),i={type:"proxy-request",id:r,method:"bitcoin",args:o.JSONUint8Array.wrap(e),bitcoinProviderMethod:t};return new Promise(((t,e)=>{const n=i=>{const s=this._parseMessage?this._parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this._eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);a?a.error?e(new Error(a.error)):t(a.return):e(new Error("Result is null"))};this._eventListener.addMessageListener(n),this._eventListener.postMessage(i)}))}))}getAccounts(){return this._requestMethod("getAccounts",[])}requestAccounts(){return r(this,void 0,void 0,(function*(){return this._requestMethod("requestAccounts",[])}))}disconnect(){return r(this,void 0,void 0,(function*(){return this._requestMethod("disconnect",[])}))}getNetwork(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getNetwork",[])}))}switchNetwork(t){return r(this,void 0,void 0,(function*(){return this._requestMethod("switchNetwork",[t])}))}getChain(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getChain",[])}))}switchChain(t){return r(this,void 0,void 0,(function*(){return this._requestMethod("switchChain",[t])}))}getPublicKey(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getPublicKey",[])}))}getBalance(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getBalance",[])}))}getInscriptions(t,e){return r(this,void 0,void 0,(function*(){return this._requestMethod("getInscriptions",[t,e])}))}signMessage(t,e){return r(this,void 0,void 0,(function*(){return this._requestMethod("signMessage",[t,e])}))}sendBitcoin(t,e){return r(this,void 0,void 0,(function*(){return this._requestMethod("sendBitcoin",[t,e])}))}pushTx(t){return r(this,void 0,void 0,(function*(){return this._requestMethod("pushTx",[t])}))}pushPsbt(t){return r(this,void 0,void 0,(function*(){return this._requestMethod("pushPsbt",[t])}))}signPsbt(t,e){return r(this,void 0,void 0,(function*(){return this._requestMethod("signPsbt",[t,e])}))}signPsbts(t,e){return r(this,void 0,void 0,(function*(){return this._requestMethod("signPsbts",[t,e])}))}getAddress(){return r(this,void 0,void 0,(function*(){return(yield this.getAccounts())[0]}))}connectWallet(){return r(this,void 0,void 0,(function*(){return this.requestAccounts()}))}}e.BitcoinProvider=y},93160:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WEBPAGE_PORT=e.APP_PORT=e.BACKGROUND_PORT=void 0,e.BACKGROUND_PORT="background",e.APP_PORT="popup",e.WEBPAGE_PORT="webpage"},26307:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageRegistry=void 0,e.MessageRegistry=class{constructor(){this.registeredMsgType=new Map}registerMessage(t){if(this.registeredMsgType.has(t.type()))throw new Error(`Already registered type ${t.type()}`);this.registeredMsgType.set(t.type(),t)}parseMessage(t){if(!t.type)throw new Error("Null type");const e=this.registeredMsgType.get(t.type);if(!e)throw new Error(`Unregistered msg type ${t.type}`);return Object.setPrototypeOf(t.msg,e.prototype)}}},3371:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EthereumProviderRpcError=e.KeplrError=void 0;class n extends Error{constructor(t,e,r){super(r),this.module=t,this.code=e,Object.setPrototypeOf(this,n.prototype)}}e.KeplrError=n;class r extends Error{constructor(t,e,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,r.prototype)}}e.EthereumProviderRpcError=r},1701:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},596:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromHex=e.toHex=void 0,e.toHex=function(t){let e="";for(const n of t)e+=("0"+n.toString(16)).slice(-2);return e},e.fromHex=function(t){if(t.length%2!=0)throw new Error("hex string length must be a multiple of 2");const e=[];for(let n=0;n<t.length;n+=2){const r=t.substr(n,2);if(!r.match(/[0-9a-f]{2}/i))throw new Error("hex string contains invalid characters");e.push(parseInt(r,16))}return new Uint8Array(e)}},47722:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(61546),e),i(n(1701),e),i(n(60696),e),i(n(97529),e),i(n(3371),e),i(n(23510),e),i(n(93160),e),i(n(26307),e),i(n(74262),e),i(n(38740),e)},60696:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},23510:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Message=void 0,e.Message=class{approveExternal(t,e){return!1}}},61546:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;const i=n(26307),s=n(38740);e.Router=class{constructor(t){this.envProducer=t,this.msgRegistry=new i.MessageRegistry,this.registeredHandler=new Map,this.guards=[],this.port="",this._isInitialized=!1}get isInitialized(){return this._isInitialized}registerMessage(t){this.msgRegistry.registerMessage(t)}addHandler(t,e){if(this.registeredHandler.has(t))throw new Error(`Already registered type ${t}`);this.registeredHandler.set(t,e)}addGuard(t){this.guards.push(t)}listen(t,e){return r(this,void 0,void 0,(function*(){if(this.port=t,this.attachHandler(),e){let t;this._initWaiter=new Promise((e=>{t=e})),yield e(),t()}this._isInitialized=!0}))}unlisten(){this.port="",this.detachHandler()}handleMessage(t,e){var n;return r(this,void 0,void 0,(function*(){this.isInitialized||(yield this._initWaiter);const r=this.msgRegistry.parseMessage(s.JSONUint8Array.unwrap(t)),i=this.envProducer(e,null!==(n=r.routerMeta)&&void 0!==n?n:{});for(const t of this.guards)yield t(i,r,e);r.validateBasic();const o=r.route();if(!o)throw new Error("Null router");const a=this.registeredHandler.get(o);if(!a)throw new Error("Can't get handler");return s.JSONUint8Array.wrap(yield a(i,r))}))}}},74262:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.sendSimpleMessage=e.SimpleMessage=void 0;const i=n(23510),s=Symbol(),o=Symbol();class a extends i.Message{constructor(t,e,n){super(),this[s]=t,this[o]=e;for(const t of Object.keys(n))this[t]=n[t]}route(){return this[s]}type(){return this[o]}validateBasic(){}approveExternal(){return!0}}e.SimpleMessage=a,e.sendSimpleMessage=function(t,e,n,i,s){return r(this,void 0,void 0,(function*(){return yield t.sendMessage(e,new a(n,i,s))}))}},97529:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},38740:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONUint8Array=void 0;const r=n(596);class i{static parse(t){return JSON.parse(t,((t,e)=>{if("__proto__"===t)throw new Error("__proto__ is disallowed");return e&&"string"==typeof e&&e.startsWith("__uint8array__")?(0,r.fromHex)(e.replace("__uint8array__","")):"undefined"!=typeof BigInt&&e&&"string"==typeof e&&e.startsWith("__bigint__")?BigInt(e.replace("__bigint__","")):e}))}static stringify(t){return JSON.stringify(t,((t,e)=>{if("__proto__"===t)throw new Error("__proto__ is disallowed");if(e&&(e instanceof Uint8Array||"object"==typeof e&&"type"in e&&"data"in e&&"Buffer"===e.type&&Array.isArray(e.data))){const t=e instanceof Uint8Array?e:new Uint8Array(e.data);return`__uint8array__${(0,r.toHex)(t)}`}return"bigint"==typeof e?`__bigint__${e.toString()}`:e}))}static wrap(t){if(void 0!==t)return JSON.parse(i.stringify(t))}static unwrap(t){if(void 0!==t)return i.parse(i.stringify(t))}}e.JSONUint8Array=i},57132:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},83042:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},27013:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},15522:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},58615:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},96678:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},11779:(t,e)=>{"use strict";var n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.EvmGasSimulationOutcome=e.EthTxStatus=e.EthSignType=void 0,(i=e.EthSignType||(e.EthSignType={})).MESSAGE="message",i.TRANSACTION="transaction",i.EIP712="eip-712",(r=e.EthTxStatus||(e.EthTxStatus={})).Success="0x1",r.Failure="0x0",(n=e.EvmGasSimulationOutcome||(e.EvmGasSimulationOutcome={})).TX_SIMULATED="tx-simulated",n.TX_BUNDLE_SIMULATED="tx-bundle-simulated",n.APPROVAL_ONLY_SIMULATED="approval-only-simulated"},65880:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(96678),e),i(n(57132),e),i(n(83042),e),i(n(27013),e),i(n(83097),e),i(n(51056),e),i(n(11779),e),i(n(58615),e),i(n(15522),e),i(n(77487),e),i(n(33356),e),i(n(95979),e),i(n(18045),e)},95979:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},77487:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},33356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},18045:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.SwapProvider=void 0,(n=e.SwapProvider||(e.SwapProvider={})).SKIP="skip",n.SQUID="squid"},23493:(t,e)=>{"use strict";var n,r,i,s;Object.defineProperty(e,"__esModule",{value:!0}),e.CHAIN_TYPE_TO_GENESIS_HASH=e.GENESIS_HASH_TO_CHAIN_TYPE=e.NETWORK_TO_GENESIS_HASH=e.GENESIS_HASH_TO_NETWORK=e.ChainType=e.Network=e.GenesisHash=e.BitcoinSignMessageType=void 0,(s=e.BitcoinSignMessageType||(e.BitcoinSignMessageType={})).ECDSA="ecdsa",s.BIP322_SIMPLE="bip322-simple",function(t){t.MAINNET="000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f",t.TESTNET="000000000933ea01ad0ee984209779baaec3ced90fa3f408719526f8d77f4943",t.SIGNET="00000008819873e925422c1ff0f99f7cc9bbb232af63a077a480a3633bee1ef6"}(n=e.GenesisHash||(e.GenesisHash={})),function(t){t.MAINNET="mainnet",t.LIVENET="livenet",t.TESTNET="testnet",t.SIGNET="signet"}(r=e.Network||(e.Network={})),function(t){t.BITCOIN_MAINNET="BITCOIN_MAINNET",t.BITCOIN_TESTNET="BITCOIN_TESTNET",t.BITCOIN_SIGNET="BITCOIN_SIGNET"}(i=e.ChainType||(e.ChainType={})),e.GENESIS_HASH_TO_NETWORK={[n.MAINNET]:r.MAINNET,[n.TESTNET]:r.TESTNET,[n.SIGNET]:r.SIGNET},e.NETWORK_TO_GENESIS_HASH={[r.MAINNET]:n.MAINNET,[r.LIVENET]:n.MAINNET,[r.TESTNET]:n.TESTNET,[r.SIGNET]:n.SIGNET},e.GENESIS_HASH_TO_CHAIN_TYPE={[n.MAINNET]:i.BITCOIN_MAINNET,[n.TESTNET]:i.BITCOIN_TESTNET,[n.SIGNET]:i.BITCOIN_SIGNET},e.CHAIN_TYPE_TO_GENESIS_HASH={[i.BITCOIN_MAINNET]:n.MAINNET,[i.BITCOIN_TESTNET]:n.TESTNET,[i.BITCOIN_SIGNET]:n.SIGNET}},60762:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.EIP6963EventNames=void 0,(n=e.EIP6963EventNames||(e.EIP6963EventNames={})).Announce="eip6963:announceProvider",n.Request="eip6963:requestProvider"},23593:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},83097:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(93515),e),i(n(60762),e),i(n(23593),e),i(n(77037),e),i(n(23493),e)},93515:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},77037:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},51056:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};n.r(t);var e={};n.r(e),n.d(e,{ABI_TYPE_CONSTRUCTOR:()=>N,ABI_TYPE_ENUM:()=>P,ABI_TYPE_FUNCTION:()=>x,ABI_TYPE_L1_HANDLER:()=>R,CALL_TYPE:()=>V,CONTRACT:()=>t,EBlockTag:()=>$,EDAMode:()=>Y,EDataAvailabilityMode:()=>G,ESimulationFlag:()=>H,ETransactionExecutionStatus:()=>z,ETransactionFinalityStatus:()=>K,ETransactionStatus:()=>j,ETransactionType:()=>q,ETransactionVersion:()=>W,ETransactionVersion2:()=>Z,ETransactionVersion3:()=>X,EVENT_ABI_TYPE:()=>C,L1_DA_MODE:()=>F,PRICE_UNIT_FRI:()=>M,PRICE_UNIT_WEI:()=>U,STATE_MUTABILITY_EXTERNAL:()=>L,STATE_MUTABILITY_VIEW:()=>D,STATUS_ACCEPTED_ON_L1:()=>w,STATUS_ACCEPTED_ON_L2:()=>m,STATUS_PENDING:()=>v,STATUS_RECEIVED:()=>A,STATUS_REJECTED:()=>E,STATUS_REVERTED:()=>_,STATUS_SUCCEEDED:()=>b,STRUCT_ABI_TYPE:()=>B,TXN_TYPE_DECLARE:()=>S,TXN_TYPE_DEPLOY:()=>T,TXN_TYPE_DEPLOY_ACCOUNT:()=>I,TXN_TYPE_INVOKE:()=>k,TXN_TYPE_L1_HANDLER:()=>O});var r={};n.r(r),n.d(r,{Permission:()=>J,TypedDataRevision:()=>Q});var i={};n.r(i);var s={};n.r(s),n.d(s,{ABI_TYPE_CONSTRUCTOR:()=>N,ABI_TYPE_ENUM:()=>P,ABI_TYPE_FUNCTION:()=>x,ABI_TYPE_L1_HANDLER:()=>R,API:()=>e,CALL_TYPE:()=>V,CONTRACT:()=>t,EBlockTag:()=>$,EDAMode:()=>Y,EDataAvailabilityMode:()=>G,ESimulationFlag:()=>H,ETransactionExecutionStatus:()=>z,ETransactionFinalityStatus:()=>K,ETransactionStatus:()=>j,ETransactionType:()=>q,ETransactionVersion:()=>W,ETransactionVersion2:()=>Z,ETransactionVersion3:()=>X,EVENT_ABI_TYPE:()=>C,L1_DA_MODE:()=>F,PAYMASTER_API:()=>i,PRICE_UNIT_FRI:()=>M,PRICE_UNIT_WEI:()=>U,Permission:()=>J,STATE_MUTABILITY_EXTERNAL:()=>L,STATE_MUTABILITY_VIEW:()=>D,STATUS_ACCEPTED_ON_L1:()=>w,STATUS_ACCEPTED_ON_L2:()=>m,STATUS_PENDING:()=>v,STATUS_RECEIVED:()=>A,STATUS_REJECTED:()=>E,STATUS_REVERTED:()=>_,STATUS_SUCCEEDED:()=>b,STRUCT_ABI_TYPE:()=>B,TXN_TYPE_DECLARE:()=>S,TXN_TYPE_DEPLOY:()=>T,TXN_TYPE_DEPLOY_ACCOUNT:()=>I,TXN_TYPE_INVOKE:()=>k,TXN_TYPE_L1_HANDLER:()=>O,TypedDataRevision:()=>Q,WALLET_API:()=>r});var o={};n.r(o);var a={};n.r(a),n.d(a,{ABI_TYPE_CONSTRUCTOR:()=>yt,ABI_TYPE_ENUM:()=>wt,ABI_TYPE_FUNCTION:()=>gt,ABI_TYPE_L1_HANDLER:()=>mt,CALL_TYPE:()=>St,CONTRACT:()=>o,EBlockStatus:()=>xt,EBlockTag:()=>Ct,EDAMode:()=>Rt,EDataAvailabilityMode:()=>Nt,ESimulationFlag:()=>It,ETransactionExecutionStatus:()=>Bt,ETransactionFinalityStatus:()=>Ot,ETransactionStatus:()=>kt,ETransactionType:()=>Tt,ETransactionVersion:()=>Pt,ETransactionVersion2:()=>Dt,ETransactionVersion3:()=>Lt,EVENT_ABI_TYPE:()=>pt,L1_DA_MODE:()=>At,PRICE_UNIT_FRI:()=>Et,PRICE_UNIT_WEI:()=>vt,STATE_MUTABILITY_EXTERNAL:()=>_t,STATE_MUTABILITY_VIEW:()=>bt,STATUS_ACCEPTED_ON_L1:()=>et,STATUS_ACCEPTED_ON_L2:()=>tt,STATUS_CANDIDATE:()=>st,STATUS_PRE_CONFIRMED:()=>ot,STATUS_PRE_CONFIRMED_LOWERCASE:()=>at,STATUS_RECEIVED:()=>it,STATUS_REVERTED:()=>rt,STATUS_SUCCEEDED:()=>nt,STRUCT_ABI_TYPE:()=>ft,TXN_TYPE_DECLARE:()=>ct,TXN_TYPE_DEPLOY:()=>ut,TXN_TYPE_DEPLOY_ACCOUNT:()=>lt,TXN_TYPE_INVOKE:()=>dt,TXN_TYPE_L1_HANDLER:()=>ht});var c={};n.r(c),n.d(c,{Permission:()=>Ut,TypedDataRevision:()=>Mt});var u={};n.r(u);var l={};n.r(l),n.d(l,{ABI_TYPE_CONSTRUCTOR:()=>yt,ABI_TYPE_ENUM:()=>wt,ABI_TYPE_FUNCTION:()=>gt,ABI_TYPE_L1_HANDLER:()=>mt,API:()=>a,CALL_TYPE:()=>St,CONTRACT:()=>o,EBlockStatus:()=>xt,EBlockTag:()=>Ct,EDAMode:()=>Rt,EDataAvailabilityMode:()=>Nt,ESimulationFlag:()=>It,ETransactionExecutionStatus:()=>Bt,ETransactionFinalityStatus:()=>Ot,ETransactionStatus:()=>kt,ETransactionType:()=>Tt,ETransactionVersion:()=>Pt,ETransactionVersion2:()=>Dt,ETransactionVersion3:()=>Lt,EVENT_ABI_TYPE:()=>pt,L1_DA_MODE:()=>At,PAYMASTER_API:()=>u,PRICE_UNIT_FRI:()=>Et,PRICE_UNIT_WEI:()=>vt,Permission:()=>Ut,STATE_MUTABILITY_EXTERNAL:()=>_t,STATE_MUTABILITY_VIEW:()=>bt,STATUS_ACCEPTED_ON_L1:()=>et,STATUS_ACCEPTED_ON_L2:()=>tt,STATUS_CANDIDATE:()=>st,STATUS_PRE_CONFIRMED:()=>ot,STATUS_PRE_CONFIRMED_LOWERCASE:()=>at,STATUS_RECEIVED:()=>it,STATUS_REVERTED:()=>rt,STATUS_SUCCEEDED:()=>nt,STRUCT_ABI_TYPE:()=>ft,TXN_TYPE_DECLARE:()=>ct,TXN_TYPE_DEPLOY:()=>ut,TXN_TYPE_DEPLOY_ACCOUNT:()=>lt,TXN_TYPE_INVOKE:()=>dt,TXN_TYPE_L1_HANDLER:()=>ht,TypedDataRevision:()=>Mt,WALLET_API:()=>c});var d={};n.r(d),n.d(d,{Fy:()=>Sn,uw:()=>cn,gk:()=>an,Dd:()=>Tn,dQ:()=>In,ci:()=>ln,bytesToNumberBE:()=>yn,ty:()=>mn,eV:()=>vn,n$:()=>Bn,ql:()=>_n,hexToBytes:()=>gn,Z2:()=>An,_t:()=>on,H9:()=>Nn,tL:()=>wn,S5:()=>bn,uz:()=>dn,FF:()=>xn});var h={};n.r(h),n.d(h,{Fy:()=>ai,uw:()=>Kr,gk:()=>jr,Dd:()=>ci,dQ:()=>ui,ci:()=>$r,bytesToNumberBE:()=>Jr,ty:()=>Qr,eV:()=>ii,n$:()=>hi,ql:()=>ri,hexToBytes:()=>Xr,ly:()=>Yr,Z2:()=>oi,_t:()=>Hr,H9:()=>gi,tL:()=>ti,S5:()=>ei,uz:()=>Gr,Yt:()=>ni,FF:()=>pi});var f={};n.r(f),n.d(f,{CURVE:()=>bs,Fp251:()=>qs,MAX_VALUE:()=>ss,ProjectivePoint:()=>_s,Signature:()=>vs,_poseidonMDS:()=>js,_starkCurve:()=>us,computeHashOnElements:()=>Us,ethSigToPrivate:()=>ks,getAccountPath:()=>Cs,getPublicKey:()=>fs,getSharedSecret:()=>ps,getStarkKey:()=>Is,grindKey:()=>Ts,keccak:()=>Fs,normalizePrivateKey:()=>hs,pedersen:()=>Ls,poseidonBasic:()=>zs,poseidonCreate:()=>$s,poseidonHash:()=>Ys,poseidonHashFunc:()=>Ws,poseidonHashMany:()=>Xs,poseidonHashSingle:()=>Zs,poseidonSmall:()=>Gs,sign:()=>ms,utils:()=>Es,verify:()=>ws});var p={};n.r(p),n.d(p,{poseidon:()=>Mo,splitConstants:()=>Uo,validateOpts:()=>Lo});var g={};n.r(g),n.d(g,{DER:()=>Xo,SWUFpSqrtRatio:()=>sa,mapToCurveSimpleSWU:()=>oa,weierstrass:()=>ia,weierstrassPoints:()=>ra});var y=n(33210);const m="ACCEPTED_ON_L2",w="ACCEPTED_ON_L1",b="SUCCEEDED",_="REVERTED",v="PENDING",E="REJECTED",A="RECEIVED",S="DECLARE",T="DEPLOY",I="DEPLOY_ACCOUNT",k="INVOKE",O="L1_HANDLER",B="struct",C="event",x="function",N="constructor",R="l1_handler",P="enum",D="view",L="external",U="WEI",M="FRI",F={BLOB:"BLOB",CALLDATA:"CALLDATA"},V={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},q={DECLARE:S,DEPLOY:T,DEPLOY_ACCOUNT:I,INVOKE:k,L1_HANDLER:O},H={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},j={RECEIVED:A,REJECTED:E,ACCEPTED_ON_L2:m,ACCEPTED_ON_L1:w},K={ACCEPTED_ON_L2:m,ACCEPTED_ON_L1:w},z={SUCCEEDED:b,REVERTED:_},$={LATEST:"latest",PENDING:"pending"},G={L1:"L1",L2:"L2"},Y={L1:0,L2:1},W={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Z={V0:W.V0,V1:W.V1,V2:W.V2,F0:W.F0,F1:W.F1,F2:W.F2},X={V3:W.V3,F3:W.F3},J={ACCOUNTS:"accounts"},Q={ACTIVE:"1",LEGACY:"0"},tt="ACCEPTED_ON_L2",et="ACCEPTED_ON_L1",nt="SUCCEEDED",rt="REVERTED",it="RECEIVED",st="CANDIDATE",ot="PRE_CONFIRMED",at=ot.toLowerCase(),ct="DECLARE",ut="DEPLOY",lt="DEPLOY_ACCOUNT",dt="INVOKE",ht="L1_HANDLER",ft="struct",pt="event",gt="function",yt="constructor",mt="l1_handler",wt="enum",bt="view",_t="external",vt="WEI",Et="FRI",At={BLOB:"BLOB",CALLDATA:"CALLDATA"},St={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Tt={DECLARE:ct,DEPLOY:ut,DEPLOY_ACCOUNT:lt,INVOKE:dt,L1_HANDLER:ht},It={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},kt={RECEIVED:it,CANDIDATE:st,PRE_CONFIRMED:ot,ACCEPTED_ON_L2:tt,ACCEPTED_ON_L1:et},Ot={PRE_CONFIRMED:ot,ACCEPTED_ON_L2:tt,ACCEPTED_ON_L1:et},Bt={SUCCEEDED:nt,REVERTED:rt},Ct={LATEST:"latest",PRE_CONFIRMED:at,L1_ACCEPTED:"l1_accepted"},xt={PRE_CONFIRMED:ot,ACCEPTED_ON_L2:tt,ACCEPTED_ON_L1:et},Nt={L1:"L1",L2:"L2"},Rt={L1:0,L2:1},Pt={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Dt={V0:Pt.V0,V1:Pt.V1,V2:Pt.V2,F0:Pt.F0,F1:Pt.F1,F2:Pt.F2},Lt={V3:Pt.V3,F3:Pt.F3},Ut={ACCOUNTS:"accounts"},Mt={ACTIVE:"1",LEGACY:"0"};function Ft(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Vt(t,...e){if(!Ft(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qt(t,e){return!!Array.isArray(e)&&(0===e.length||(t?e.every((t=>"string"==typeof t)):e.every((t=>Number.isSafeInteger(t)))))}function Ht(t){if("function"!=typeof t)throw new Error("function expected");return!0}function jt(t,e){if("string"!=typeof e)throw new Error(`${t}: string expected`);return!0}function Kt(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function zt(t){if(!Array.isArray(t))throw new Error("array expected")}function $t(t,e){if(!qt(!0,e))throw new Error(`${t}: array of strings expected`)}function Gt(t,e){if(!qt(!1,e))throw new Error(`${t}: array of numbers expected`)}function Yt(...t){const e=t=>t,n=(t,e)=>n=>t(e(n));return{encode:t.map((t=>t.encode)).reduceRight(n,e),decode:t.map((t=>t.decode)).reduce(n,e)}}function Wt(t){const e="string"==typeof t?t.split(""):t,n=e.length;$t("alphabet",e);const r=new Map(e.map(((t,e)=>[t,e])));return{encode:r=>(zt(r),r.map((r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${t}`);return e[r]}))),decode:e=>(zt(e),e.map((e=>{jt("alphabet.decode",e);const n=r.get(e);if(void 0===n)throw new Error(`Unknown letter: "${e}". Allowed: ${t}`);return n})))}}function Zt(t=""){return jt("join",t),{encode:e=>($t("join.decode",e),e.join(t)),decode:e=>(jt("join.decode",e),e.split(t))}}function Xt(t,e="="){return Kt(t),jt("padding",e),{encode(n){for($t("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){$t("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Jt(t){return Ht(t),{encode:t=>t,decode:e=>t(e)}}function Qt(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(zt(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,(t=>{if(Kt(t),t<0||t>=e)throw new Error(`invalid integer: ${t}`);return t})),o=s.length;for(;;){let t=0,a=!0;for(let i=r;i<o;i++){const o=s[i],c=e*t,u=c+o;if(!Number.isSafeInteger(u)||c/e!==t||u-o!==c)throw new Error("convertRadix: carry overflow");const l=u/n;t=u%n;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*n+t!==u)throw new Error("convertRadix: carry overflow");a&&(d?a=!1:r=i)}if(i.push(t),a)break}for(let e=0;e<t.length-1&&0===t[e];e++)i.push(0);return i.reverse()}const te=(t,e)=>0===e?t:te(e,t%e),ee=(t,e)=>t+(e-te(t,e)),ne=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function re(t,e,n,r){if(zt(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ee(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${ee(e,n)}`);let i=0,s=0;const o=ne[e],a=ne[n]-1,c=[];for(const r of t){if(Kt(r),r>=o)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(i=i<<e|r,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const t=ne[s];if(void 0===t)throw new Error("invalid carry");i&=t-1}if(i=i<<n-s&a,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function ie(t,e=!1){if(Kt(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(ee(8,t)>32||ee(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Ft(n))throw new Error("radix2.encode input should be Uint8Array");return re(Array.from(n),8,t,!e)},decode:n=>(Gt("radix2.decode",n),Uint8Array.from(re(n,t,8,e)))}}function se(t){return Ht(t),function(...e){try{return t.apply(null,e)}catch(t){}}}Yt(ie(4),Wt("0123456789ABCDEF"),Zt("")),Yt(ie(5),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Xt(5),Zt(""));const oe=(Yt(ie(5),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Zt("")),Yt(ie(5),Wt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Xt(5),Zt("")),Yt(ie(5),Wt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Zt("")),Yt(ie(5),Wt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Zt(""),Jt((t=>t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)()),ae=(t,e)=>{jt("base64",t);const n=e?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=e?"base64url":"base64";if(t.length>0&&!n.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:r,lastChunkHandling:"strict"})},ce=oe?{encode:t=>(Vt(t),t.toBase64()),decode:t=>ae(t,!1)}:Yt(ie(6),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Xt(6),Zt("")),ue=(Yt(ie(6),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Zt("")),oe||Yt(ie(6),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Xt(6),Zt("")),Yt(ie(6),Wt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Zt("")),t=>{return Yt((Kt(e=58),{encode:t=>{if(!Ft(t))throw new Error("radix.encode input should be Uint8Array");return Qt(Array.from(t),256,e)},decode:t=>(Gt("radix.decode",t),Uint8Array.from(Qt(t,e,256)))}),Wt(t),Zt(""));var e}),le=(ue("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),ue("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),ue("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Yt(Wt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Zt(""))),de=[996825010,642813549,513874426,1027748829,705979059];function he(t){const e=t>>25;let n=(33554431&t)<<5;for(let t=0;t<de.length;t++)1==(e>>t&1)&&(n^=de[t]);return n}function fe(t,e,n=1){const r=t.length;let i=1;for(let e=0;e<r;e++){const n=t.charCodeAt(e);if(n<33||n>126)throw new Error(`Invalid prefix (${t})`);i=he(i)^n>>5}i=he(i);for(let e=0;e<r;e++)i=he(i)^31&t.charCodeAt(e);for(let t of e)i=he(i)^t;for(let t=0;t<6;t++)i=he(i);return i^=n,le.encode(re([i%ne[30]],30,5,!1))}function pe(t){const e="bech32"===t?1:734539939,n=ie(5),r=n.decode,i=n.encode,s=se(r);function o(t,n,r=90){jt("bech32.encode prefix",t),Ft(n)&&(n=Array.from(n)),Gt("bech32.encode",n);const i=t.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const o=t.toLowerCase(),a=fe(o,n,e);return`${o}1${le.encode(n)}${a}`}function a(t,n=90){jt("bech32.decode input",t);const r=t.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${t}). Expected (8..${n})`);const i=t.toLowerCase();if(t!==i&&t!==t.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),a=i.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const c=le.decode(a).slice(0,-6),u=fe(o,c,e);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${t}: expected "${u}"`);return{prefix:o,words:c}}return{encode:o,decode:a,encodeFromBytes:function(t,e){return o(t,i(e))},decodeToBytes:function(t){const{prefix:e,words:n}=a(t,!1);return{prefix:e,words:n,bytes:r(n)}},decodeUnsafe:se(a),fromWords:r,fromWordsUnsafe:s,toWords:i}}pe("bech32"),pe("bech32m");function ge(t){return ye.test(t)}(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)()||Yt(ie(4),Wt("0123456789abcdef"),Zt(""),Jt((t=>{if("string"!=typeof t||t.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof t} with length ${t.length}`);return t.toLowerCase()})));const ye=/^-?[0-9]+$/;function me(t){return we.test(t)}const we=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;let be=function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t}({});function _e(t){const{start:e,end:n}=function(t){let e=0;for("-"===t[0]&&e++;"0"===t[e]||"."===t[e];)e++;let n=t.lastIndexOf("e");for(-1===n&&(n=t.lastIndexOf("E")),-1===n&&(n=t.length);("0"===t[n-1]||"."===t[n-1])&&n>e;)n--;return{start:e,end:n}}(t),r=t.substring(e,n),i=r.indexOf(".");return-1===i?r:r.substring(0,i)+r.substring(i+1)}class ve{isLosslessNumber=!0;constructor(t){if(!me(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=function(t){if(function(t,e){if(ge(t))return Number.isSafeInteger(Number.parseInt(t,10));const n=Number.parseFloat(t),r=String(n);if(t===r)return!0;return _e(t)===_e(r)}(t))return;if(ge(t))return be.truncate_integer;const e=Number.parseFloat(t);return Number.isFinite(e)?0===e?be.underflow:be.truncate_float:be.overflow}(this.value);if(void 0===t||t===be.truncate_float)return Number.parseFloat(this.value);if(ge(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function Ee(t){return new ve(t)}function Ae(t){return ge(t)?BigInt(t):Number.parseFloat(t)}function Se(t,e,n,r){return Array.isArray(n)?r.call(t,e,function(t,e){for(let n=0;n<t.length;n++)t[n]=Se(t,String(n),t[n],e);return t}(n,r)):n&&"object"==typeof n&&!function(t){return t&&"object"==typeof t&&t.isLosslessNumber||!1}(n)?r.call(t,e,function(t,e){for(const n of Object.keys(t)){const r=Se(t,n,t[n],e);void 0!==r?t[n]=r:delete t[n]}return t}(n,r)):r.call(t,e,n)}function Te(t,e,n){const r="function"==typeof n?{parseNumber:n}:n,i=r?.parseNumber??Ee,s=r?.onDuplicateKey??function(t){let{key:e,position:n}=t;throw new SyntaxError(`Duplicate key '${e}' encountered at position ${n}`)};let o=0;const a=c();return function(t){if(void 0===t)throw new SyntaxError(`JSON value expected ${E()}`)}(a),function(){if(o<t.length)throw new SyntaxError(`Expected end of input ${E()}`)}(),e?function(t,e){return Se({"":t},"",t,e)}(a,e):a;function c(){l();const e=d()??function(){const e=o;if(t.charCodeAt(o)===He&&(o++,g(e)),t.charCodeAt(o)===je)o++;else if((n=t.charCodeAt(o))>=Ke&&n<=ze)for(o++;ke(t.charCodeAt(o));)o++;var n;if(t.charCodeAt(o)===Ge)for(o++,g(e);ke(t.charCodeAt(o));)o++;if(t.charCodeAt(o)===Je||t.charCodeAt(o)===Xe)for(o++,t.charCodeAt(o)!==He&&t.charCodeAt(o)!==qe||o++,g(e);ke(t.charCodeAt(o));)o++;if(o>e)return i(t.slice(e,o))}()??function(){if(t.charCodeAt(o)===Ne){o++,l();const e={};let n=!0;for(;o<t.length&&t.charCodeAt(o)!==Re;){n?n=!1:(h(),l());const t=o,r=d();if(void 0===r)return void y();l(),f();const i=c();if(void 0===i)return void b();if(Object.prototype.hasOwnProperty.call(e,r)&&!Oe(i,e[r])){const n=s({key:r,position:t+1,oldValue:e[r],newValue:i});void 0!==n&&(e[r]=n)}else e[r]=i}return t.charCodeAt(o)!==Re&&function(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${E()}`)}(),o++,e}}()??function(){if(t.charCodeAt(o)===Pe){o++,l();const e=[];let n=!0;for(;o<t.length&&t.charCodeAt(o)!==De;){n?n=!1:h();const t=c();p(t),e.push(t)}return t.charCodeAt(o)!==De&&function(){throw new SyntaxError(`Array item or end of array ']' expected ${E()}`)}(),o++,e}}()??u("true",!0)??u("false",!1)??u("null",null);return l(),e}function u(e,n){if(t.slice(o,o+e.length)===e)return o+=e.length,n}function l(){for(;(e=t.charCodeAt(o))===Le||e===Ue||e===Me||e===Fe;)o++;var e}function d(){if(t.charCodeAt(o)===Ve){o++;let n="";for(;o<t.length&&t.charCodeAt(o)!==Ve;){if(t.charCodeAt(o)===xe){const e=t[o+1],r=Ce[e];void 0!==r?(n+=r,o++):"u"===e?Ie(t.charCodeAt(o+2))&&Ie(t.charCodeAt(o+3))&&Ie(t.charCodeAt(o+4))&&Ie(t.charCodeAt(o+5))?(n+=String.fromCharCode(Number.parseInt(t.slice(o+2,o+6),16)),o+=5):_(o):w(o)}else(e=t.charCodeAt(o))>=32&&e<=1114111?n+=t[o]:m(t[o]);o++}return function(){if(t.charCodeAt(o)!==Ve)throw new SyntaxError(`End of string '"' expected ${E()}`)}(),o++,n}var e}function h(){if(t.charCodeAt(o)!==$e)throw new SyntaxError(`Comma ',' expected after value ${E()}`);o++}function f(){if(t.charCodeAt(o)!==Ye)throw new SyntaxError(`Colon ':' expected after property name ${E()}`);o++}function p(t){if(void 0===t)throw new SyntaxError(`Array item expected ${E()}`)}function g(e){if(!ke(t.charCodeAt(o))){const n=t.slice(e,o);throw new SyntaxError(`Invalid number '${n}', expecting a digit ${E()}`)}}function y(){throw new SyntaxError(`Quoted object key expected ${E()}`)}function m(t){throw new SyntaxError(`Invalid character '${t}' ${v()}`)}function w(e){const n=t.slice(e,e+2);throw new SyntaxError(`Invalid escape character '${n}' ${v()}`)}function b(){throw new SyntaxError(`Object value expected after ':' ${v()}`)}function _(e){const n=t.slice(e,e+6);throw new SyntaxError(`Invalid unicode character '${n}' ${v()}`)}function v(){return`at position ${o}`}function E(){return`${o<t.length?`but got '${t[o]}'`:"but reached end of input"} ${v()}`}}function Ie(t){return t>=je&&t<=ze||t>=We&&t<=Qe||t>=Ze&&t<=tn}function ke(t){return t>=je&&t<=ze}function Oe(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>Oe(t,e[n]))):!(!Be(t)||!Be(e))&&[...new Set([...Object.keys(t),...Object.keys(e)])].every((n=>Oe(t[n],e[n]))))}function Be(t){return"object"==typeof t&&null!==t}const Ce={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},xe=92,Ne=123,Re=125,Pe=91,De=93,Le=32,Ue=10,Me=9,Fe=13,Ve=34,qe=43,He=45,je=48,Ke=49,ze=57,$e=44,Ge=46,Ye=58,We=65,Ze=97,Xe=69,Je=101,Qe=70,tn=102;function en(t,e,n,r){const i=function(t){return"number"==typeof t?" ".repeat(t):"string"==typeof t&&""!==t?t:void 0}(n);return function t(o,a){if(Array.isArray(r)){const t=r.find((t=>t.test(o)));if(t){const e=t.stringify(o);if("string"!=typeof e||!me(e))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${e})`);return e}}return"boolean"==typeof o||"number"==typeof o||"string"==typeof o||null===o||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String?JSON.stringify(o):o?.isLosslessNumber||"bigint"==typeof o?o.toString():Array.isArray(o)?function(n,r){if(0===n.length)return"[]";const s=i?r+i:void 0;let o=i?"[\n":"[";for(let r=0;r<n.length;r++){const a="function"==typeof e?e.call(n,String(r),n[r]):n[r];i&&(o+=s),o+=void 0!==a&&"function"!=typeof a?t(a,s):"null",r<n.length-1&&(o+=i?",\n":",")}return o+=i?`\n${r}]`:"]",o}(o,a):o&&"object"==typeof o?function(r,o){if("function"==typeof r.toJSON)return en(r.toJSON(),e,n,void 0);const a=Array.isArray(e)?e.map(String):Object.keys(r);if(0===a.length)return"{}";const c=i?o+i:void 0;let u=!0,l=i?"{\n":"{";for(const n of a){const o="function"==typeof e?e.call(r,n,r[n]):r[n];if(s(0,o)){u?u=!1:l+=i?",\n":",";const e=JSON.stringify(n);l+=i?`${c+e}: `:`${e}:`,l+=t(o,c)}}return l+=i?`\n${o}}`:"}",l}(o,a):void 0}("function"==typeof e?e.call({"":t},"",t):t,"");function s(t,e){return void 0!==e&&"function"!=typeof e&&"symbol"!=typeof e}}const nn=BigInt(0),rn=BigInt(1),sn=BigInt(2);function on(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function an(t){if(!on(t))throw new Error("Uint8Array expected")}function cn(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const un=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function ln(t){an(t);let e="";for(let n=0;n<t.length;n++)e+=un[t[n]];return e}function dn(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function hn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?nn:BigInt("0x"+t)}const fn={_0:48,_9:57,A:65,F:70,a:97,f:102};function pn(t){return t>=fn._0&&t<=fn._9?t-fn._0:t>=fn.A&&t<=fn.F?t-(fn.A-10):t>=fn.a&&t<=fn.f?t-(fn.a-10):void 0}function gn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=pn(t.charCodeAt(i)),s=pn(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function yn(t){return hn(ln(t))}function mn(t){return an(t),hn(ln(Uint8Array.from(t).reverse()))}function wn(t,e){return gn(t.toString(16).padStart(2*e,"0"))}function bn(t,e){return wn(t,e).reverse()}function _n(t,e,n){let r;if("string"==typeof e)try{r=gn(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!on(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function vn(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];an(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const En=t=>"bigint"==typeof t&&nn<=t;function An(t,e,n){return En(t)&&En(e)&&En(n)&&e<=t&&t<n}function Sn(t,e,n,r){if(!An(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Tn(t){let e;for(e=0;t>nn;t>>=rn,e+=1);return e}const In=t=>(sn<<BigInt(t-1))-rn,kn=t=>new Uint8Array(t),On=t=>Uint8Array.from(t);function Bn(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=kn(t),i=kn(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...t)=>n(i,r,...t),c=(t=kn())=>{i=a(On([0]),t),r=a(),0!==t.length&&(i=a(On([1]),t),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return vn(...n)};return(t,e)=>{let n;for(o(),c(t);!(n=e(u()));)c();return o(),n}}const Cn={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||on(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function xn(t,e,n={}){const r=(e,n,r)=>{const i=Cn[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}function Nn(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}}function Rn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Pn(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Dn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ln(t,e){Pn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Un=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Mn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Fn=(t,e)=>t<<32-e|t>>>e,Vn=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),qn=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,Hn=Vn?t=>t:t=>qn(t);function jn(t){for(let e=0;e<t.length;e++)t[e]=qn(t[e])}function Kn(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),Pn(t),t}class zn{clone(){return this._cloneInto()}}function $n(t){const e=e=>t().update(Kn(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Gn(t){const e=(e,n)=>t(n).update(Kn(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}const Yn=(t,e,n)=>t&e^t&n^e&n;class Wn extends zn{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mn(this.buffer)}update(t){Dn(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Kn(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Mn(t);for(;r<=i-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Dn(this),Ln(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Mn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Zn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Jn=new Uint32Array(64);class Qn extends Wn{constructor(){super(64,32,8,!1),this.A=0|Xn[0],this.B=0|Xn[1],this.C=0|Xn[2],this.D=0|Xn[3],this.E=0|Xn[4],this.F=0|Xn[5],this.G=0|Xn[6],this.H=0|Xn[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Jn[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Jn[t-15],n=Jn[t-2],r=Fn(e,7)^Fn(e,18)^e>>>3,i=Fn(n,17)^Fn(n,19)^n>>>10;Jn[t]=i+Jn[t-7]+r+Jn[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(Fn(o,6)^Fn(o,11)^Fn(o,25))+((l=o)&a^~l&c)+Zn[t]+Jn[t]|0,d=(Fn(n,2)^Fn(n,13)^Fn(n,22))+Yn(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+d|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Jn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tr=$n((()=>new Qn));function er(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nr(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ir(t,e){nr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const sr=BigInt(2**32-1),or=BigInt(32);function ar(t,e=!1){return e?{h:Number(t&sr),l:Number(t>>or&sr)}:{h:0|Number(t>>or&sr),l:0|Number(t&sr)}}function cr(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=ar(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const ur=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),lr=(t,e)=>t<<32-e|t>>>e,dr=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function hr(t){for(let n=0;n<t.length;n++)t[n]=(e=t[n])<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;var e}function fr(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function pr(t){return"string"==typeof t&&(t=fr(t)),nr(t),t}class gr{clone(){return this._cloneInto()}}function yr(t){const e=e=>t().update(pr(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const mr=[],wr=[],br=[],_r=BigInt(0),vr=BigInt(1),Er=BigInt(2),Ar=BigInt(7),Sr=BigInt(256),Tr=BigInt(113);for(let t=0,e=vr,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],mr.push(2*(5*r+n)),wr.push((t+1)*(t+2)/2%64);let i=_r;for(let t=0;t<7;t++)e=(e<<vr^(e>>Ar)*Tr)%Sr,e&Er&&(i^=vr<<(vr<<BigInt(t))-vr);br.push(i)}const[Ir,kr]=cr(br,!0),Or=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),Br=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class Cr extends gr{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,er(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){dr||hr(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=Or(s,o,1)^n[r],c=Br(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=wr[n],s=Or(e,i,r),o=Br(e,i,r),a=mr[n];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=Ir[r],t[1]^=kr[r]}n.fill(0)}(this.state32,this.rounds),dr||hr(this.state32),this.posOut=0,this.pos=0}update(t){rr(this);const{blockLen:e,state:n}=this,r=(t=pr(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,0!=(128&e)&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){rr(this,!1),nr(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return er(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ir(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new Cr(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const xr=((t,e,n)=>yr((()=>new Cr(e,t,n))))(1,136,32),Nr=(t,e,n)=>t&e^t&n^e&n;class Rr extends gr{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ur(this.buffer)}update(t){rr(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=pr(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=ur(t);for(;r<=i-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){rr(this),ir(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=ur(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Pr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Lr=new Uint32Array(64);class Ur extends Rr{constructor(){super(64,32,8,!1),this.A=0|Dr[0],this.B=0|Dr[1],this.C=0|Dr[2],this.D=0|Dr[3],this.E=0|Dr[4],this.F=0|Dr[5],this.G=0|Dr[6],this.H=0|Dr[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Lr[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Lr[t-15],n=Lr[t-2],r=lr(e,7)^lr(e,18)^e>>>3,i=lr(n,17)^lr(n,19)^n>>>10;Lr[t]=i+Lr[t-7]+r+Lr[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(lr(o,6)^lr(o,11)^lr(o,25))+((l=o)&a^~l&c)+Pr[t]+Lr[t]|0,d=(lr(n,2)^lr(n,13)^lr(n,22))+Nr(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+d|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Mr=yr((()=>new Ur)),Fr=BigInt(0),Vr=BigInt(1),qr=BigInt(2);function Hr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function jr(t){if(!Hr(t))throw new Error("Uint8Array expected")}function Kr(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}const zr=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function $r(t){jr(t);let e="";for(let n=0;n<t.length;n++)e+=zr[t[n]];return e}function Gr(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function Yr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?Fr:BigInt("0x"+t)}const Wr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Zr(t){return t>=Wr._0&&t<=Wr._9?t-Wr._0:t>=Wr.A&&t<=Wr.F?t-(Wr.A-10):t>=Wr.a&&t<=Wr.f?t-(Wr.a-10):void 0}function Xr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,i=0;e<n;e++,i+=2){const n=Zr(t.charCodeAt(i)),s=Zr(t.charCodeAt(i+1));if(void 0===n||void 0===s){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[e]=16*n+s}return r}function Jr(t){return Yr($r(t))}function Qr(t){return jr(t),Yr($r(Uint8Array.from(t).reverse()))}function ti(t,e){return Xr(t.toString(16).padStart(2*e,"0"))}function ei(t,e){return ti(t,e).reverse()}function ni(t){return Xr(Gr(t))}function ri(t,e,n){let r;if("string"==typeof e)try{r=Xr(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!Hr(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function ii(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];jr(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}const si=t=>"bigint"==typeof t&&Fr<=t;function oi(t,e,n){return si(t)&&si(e)&&si(n)&&e<=t&&t<n}function ai(t,e,n,r){if(!oi(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ci(t){let e;for(e=0;t>Fr;t>>=Vr,e+=1);return e}const ui=t=>(qr<<BigInt(t-1))-Vr,li=t=>new Uint8Array(t),di=t=>Uint8Array.from(t);function hi(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=li(t),i=li(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...t)=>n(i,r,...t),c=(t=li())=>{i=a(di([0]),t),r=a(),0!==t.length&&(i=a(di([1]),t),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return ii(...n)};return(t,e)=>{let n;for(o(),c(t);!(n=e(u()));)c();return o(),n}}const fi={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||Hr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function pi(t,e,n={}){const r=(e,n,r)=>{const i=fi[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=t[e];if(!(r&&void 0===s||i(s,t)))throw new Error("param "+String(e)+" is invalid. Expected "+n+", got "+s)};for(const[t,n]of Object.entries(e))r(t,n,!1);for(const[t,e]of Object.entries(n))r(t,e,!0);return t}function gi(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}}const yi=BigInt(0),mi=BigInt(1),wi=BigInt(2),bi=BigInt(3),_i=BigInt(4),vi=BigInt(5),Ei=BigInt(8);function Ai(t,e){const n=t%e;return n>=yi?n:e+n}function Si(t,e,n){if(e<yi)throw new Error("invalid exponent, negatives unsupported");if(n<=yi)throw new Error("invalid modulus");if(n===mi)return yi;let r=mi;for(;e>yi;)e&mi&&(r=r*t%n),t=t*t%n,e>>=mi;return r}function Ti(t,e){if(t===yi)throw new Error("invert: expected non-zero number");if(e<=yi)throw new Error("invert: expected positive modulus, got "+e);let n=Ai(t,e),r=e,i=yi,s=mi,o=mi,a=yi;for(;n!==yi;){const t=r/n,e=r%n,c=i-o*t,u=s-a*t;r=n,n=e,i=o,s=a,o=c,a=u}if(r!==mi)throw new Error("invert: does not exist");return Ai(i,e)}const Ii=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ki(t){return pi(t,Ii.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function Oi(t,e,n){if(n<yi)throw new Error("invalid exponent, negatives unsupported");if(n===yi)return t.ONE;if(n===mi)return e;let r=t.ONE,i=e;for(;n>yi;)n&mi&&(r=t.mul(r,i)),i=t.sqr(i),n>>=mi;return r}function Bi(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ci(t,e,n=!1,r={}){if(t<=yi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Bi(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:ui(i),ZERO:yi,ONE:mi,create:e=>Ai(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return yi<=e&&e<t},is0:t=>t===yi,isOdd:t=>(t&mi)===mi,neg:e=>Ai(-e,t),eql:(t,e)=>t===e,sqr:e=>Ai(e*e,t),add:(e,n)=>Ai(e+n,t),sub:(e,n)=>Ai(e-n,t),mul:(e,n)=>Ai(e*n,t),pow:(t,e)=>Oi(a,t,e),div:(e,n)=>Ai(e*Ti(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Ti(e,t),sqrt:r.sqrt||(e=>(o||(o=function(t){if(t%_i===bi){const e=(t+mi)/_i;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%Ei===vi){const e=(t-vi)/Ei;return function(t,n){const r=t.mul(n,wi),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,wi),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-mi)/wi;let n,r,i;for(n=t-mi,r=0;n%wi===yi;n/=wi,r++);for(i=wi;i<t&&Si(i,e,t)!==t-mi;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+mi)/_i;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+mi)/wi;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(o,s),l=t.pow(o,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(l);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,mi<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}(t)}(t)),o(a,e))),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?ei(t,s):ti(t,s),fromBytes:t=>{if(t.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+t.length);return n?Qr(t):Jr(t)}});return Object.freeze(a)}function xi(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ni(t){const e=xi(t);return e+Math.ceil(e/2)}const Ri=BigInt(0),Pi=BigInt(1);function Di(t,e){const n=e.negate();return t?n:e}function Li(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ui(t,e){return Li(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const Mi=new WeakMap,Fi=new WeakMap;function Vi(t){return Fi.get(t)||1}function qi(t){return ki(t.Fp),pi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Hi(t){void 0!==t.lowS&&Kr("lowS",t.lowS),void 0!==t.prehash&&Kr("prehash",t.prehash)}const{bytesToNumberBE:ji,hexToBytes:Ki}=h,zi={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:n}=zi;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Gr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Gr(i.length/2|128):"";return Gr(t)+s+i+e},decode(t,e){const{Err:n}=zi;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const o=e.subarray(r,r+t);if(o.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=zi;if(t<$i)throw new e("integer: negative integers are not allowed");let n=Gr(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=zi;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return ji(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=zi,i="string"==typeof t?Ki(t):t;jr(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=zi,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},$i=BigInt(0),Gi=BigInt(1),Yi=(BigInt(2),BigInt(3));function Wi(t){const e=function(t){const e=qi(t);pi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=Ci(e.n,e.nBitLength),i=e.toBytes||((t,e,r)=>{const i=e.toAffine();return ii(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,s=n.sqr(t),o=n.mul(s,t);return n.add(n.add(o,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=e;if(n&&"bigint"!=typeof t){if(Hr(t)&&(t=$r(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let o;try{o="bigint"==typeof t?t:Jr(ri("private key",t,r))}catch(e){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return i&&(o=Ai(o,s)),ai("private key",o,Gi,s),o}function c(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}const u=gi(((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const o=t.is0();null==e&&(e=o?n.ONE:n.inv(s));const a=n.mul(r,e),c=n.mul(i,e),u=n.mul(s,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),l=gi((t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=o(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class d{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?d.ZERO:new d(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s(ri("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(a(t))}static msm(t,e){return function(t,e,n,r){if(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach(((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)}))}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach(((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)}))}(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=ci(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){c.fill(i);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(a));c[s]=c[s].add(n[e])}let e=i;for(let t=c.length-1,n=i;t>0;t--)n=n.add(c[t]),e=e.add(n);if(u=u.add(e),0!==t)for(let t=0;t<o;t++)u=u.double()}return u}(d,r,t,e)}_setWindowSize(t){f.setWindowSize(this,t)}assertValidity(){l(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){c(t);const{px:e,py:r,pz:i}=this,{px:s,py:o,pz:a}=t,u=n.eql(n.mul(e,a),n.mul(s,i)),l=n.eql(n.mul(r,a),n.mul(o,i));return u&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,Yi),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),l=n.mul(s,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(h,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(h,h),h=n.add(l,h),h=n.add(h,p),h=n.mul(h,g),u=n.add(u,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,g),c=n.sub(c,h),l=n.mul(p,f),l=n.add(l,l),l=n.add(l,l),new d(c,u,l)}add(t){c(t);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=t;let l=n.ZERO,h=n.ZERO,f=n.ZERO;const p=e.a,g=n.mul(e.b,Yi);let y=n.mul(r,o),m=n.mul(i,a),w=n.mul(s,u),b=n.add(r,i),_=n.add(o,a);b=n.mul(b,_),_=n.add(y,m),b=n.sub(b,_),_=n.add(r,s);let v=n.add(o,u);return _=n.mul(_,v),v=n.add(y,w),_=n.sub(_,v),v=n.add(i,s),l=n.add(a,u),v=n.mul(v,l),l=n.add(m,w),v=n.sub(v,l),f=n.mul(p,_),l=n.mul(g,w),f=n.add(l,f),l=n.sub(m,f),f=n.add(m,f),h=n.mul(l,f),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),_=n.mul(g,_),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),_=n.add(_,w),y=n.mul(m,_),h=n.add(h,y),y=n.mul(v,_),l=n.mul(b,l),l=n.sub(l,y),y=n.mul(b,m),f=n.mul(v,f),f=n.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,t,d.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:i}=e;ai("scalar",t,$i,i);const s=d.ZERO;if(t===$i)return s;if(this.is0()||t===Gi)return this;if(!r||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,t,d.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(t),l=s,h=s,p=this;for(;a>$i||u>$i;)a&Gi&&(l=l.add(p)),u&Gi&&(h=h.add(p)),p=p.double(),a>>=Gi,u>>=Gi;return o&&(l=l.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,r.beta),h.py,h.pz),l.add(h)}multiply(t){const{endo:r,n:i}=e;let s,o;if(ai("scalar",t,Gi,i),r){const{k1neg:e,k1:i,k2neg:a,k2:c}=r.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:h,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,r.beta),h.py,h.pz),s=u.add(h),o=l.add(p)}else{const{p:e,f:n}=this.wNAF(t);s=e,o=n}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,n){const r=d.BASE,i=(t,e)=>e!==$i&&e!==Gi&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return u(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===Gi)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===Gi?this:n?n(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return Kr("isCompressed",t),this.assertValidity(),i(d,this,t)}toHex(t=!0){return Kr("isCompressed",t),$r(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=(p=d,g=e.endo?Math.ceil(h/2):h,{constTimeNegate:Di,hasPrecomputes:t=>1!==Vi(t),unsafeLadder(t,e,n=p.ZERO){let r=t;for(;e>Ri;)e&Pi&&(n=n.add(r)),r=r.double(),e>>=Pi;return n},precomputeWindow(t,e){const{windows:n,windowSize:r}=Ui(e,g),i=[];let s=t,o=s;for(let t=0;t<n;t++){o=s,i.push(o);for(let t=1;t<r;t++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(t,e,n){const{windows:r,windowSize:i}=Ui(t,g);let s=p.ZERO,o=p.BASE;const a=BigInt(2**t-1),c=2**t,u=BigInt(t);for(let t=0;t<r;t++){const r=t*i;let l=Number(n&a);n>>=u,l>i&&(l-=c,n+=Pi);const d=r,h=r+Math.abs(l)-1,f=t%2!=0,p=l<0;0===l?o=o.add(Di(f,e[d])):s=s.add(Di(p,e[h]))}return{p:s,f:o}},wNAFUnsafe(t,e,n,r=p.ZERO){const{windows:i,windowSize:s}=Ui(t,g),o=BigInt(2**t-1),a=2**t,c=BigInt(t);for(let t=0;t<i;t++){const i=t*s;if(n===Ri)break;let u=Number(n&o);if(n>>=c,u>s&&(u-=a,n+=Pi),0===u)continue;let l=e[i+Math.abs(u)-1];u<0&&(l=l.negate()),r=r.add(l)}return r},getPrecomputes(t,e,n){let r=Mi.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&Mi.set(e,n(r))),r},wNAFCached(t,e,n){const r=Vi(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=Vi(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,e){Li(e,g),Fi.set(t,e),Mi.delete(t)}});var p,g;return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(t){return oi(t,Gi,e.n)}}}function Zi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Xi(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ji(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}BigInt(4);const Qi="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;class ts{clone(){return this._cloneInto()}}function es(t=32){if(Qi&&"function"==typeof Qi.getRandomValues)return Qi.getRandomValues(new Uint8Array(t));if(Qi&&"function"==typeof Qi.randomBytes)return Qi.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}class ns extends ts{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Zi(t.outputLen),Zi(t.blockLen)}(t);const n=("string"==typeof(r=e)&&(r=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(r)),Xi(r),r);var r;if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return Ji(this),this.iHash.update(t),this}digestInto(t){Ji(this),Xi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const rs=(t,e,n)=>new ns(t,e).update(n).digest();rs.create=(t,e)=>new ns(t,e);const is=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),ss=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function os(t){for(;0===t[0];)t=t.subarray(1);const e=8*t.length-252,n=Jr(t);return e>0?n>>BigInt(e):n}function as(t){return"string"==typeof t&&1&(t=Ss(t)).length&&(t="0"+t),Xr(t)}const cs=function(t){const e=function(t){const e=qi(t);return pi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(t){return Ai(t,r)}function a(t){return Ti(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Wi({...e,toBytes(t,e,r){const i=e.toAffine(),s=n.toBytes(i.x),o=ii;return Kr("isCompressed",r),r?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],o=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===s&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+e)}{const t=Jr(o);if(!oi(t,Gi,n.ORDER))throw new Error("Point is not on curve");const e=l(t);let i;try{i=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return 1==(1&r)!=((i&Gi)===Gi)&&(i=n.neg(i)),{x:t,y:i}}}}),h=t=>$r(ti(t,e.nByteLength));function f(t){return t>r>>Gi}const p=(t,e,n)=>Jr(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=ri("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=zi.toSig(ri("DER",t));return new g(e,n)}assertValidity(){ai("r",this.r,Gi,r),ai("s",this.s,Gi,r)}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:s}=this,u=b(ri("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0==(1&s)?"02":"03",f=c.fromHex(d+h(l)),p=a(l),g=o(-u*p),y=o(i*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Xr(this.toDERHex())}toDERHex(){return zi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Xr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const t=Ni(e.n);return function(t,e,n=!1){const r=t.length,i=xi(e),s=Ni(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=Ai(n?Jr(t):Qr(t),e-mi)+mi;return n?ei(o,i):ti(o,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=Hr(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===s:n?r===2*i||r===2*s:t instanceof c}const w=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const n=Jr(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},b=e.bits2int_modN||function(t){return o(w(t))},_=ui(e.nBitLength);function v(t){return ai("num < 2^"+e.nBitLength,t,$i,_),ti(t,e.nByteLength)}const E={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(t)).toRawBytes(n)},sign:function(t,r,i=E){const{seed:s,k2sig:l}=function(t,r,i=E){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:l}=e;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),t=ri("msgHash",t),Hi(i),p&&(t=ri("prehashed msgHash",s(t)));const m=b(t),_=u(r),A=[v(_),v(m)];if(null!=y&&!1!==y){const t=!0===y?l(n.BYTES):y;A.push(ri("extraEntropy",t))}const S=ii(...A),T=m;return{seed:S,k2sig:function(t){const e=w(t);if(!d(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=o(r.x);if(i===$i)return;const s=o(n*o(T+i*_));if(s===$i)return;let u=(r.x===i?0:2)|Number(r.y&Gi),l=s;return h&&f(s)&&(l=function(t){return f(t)?o(-t):t}(s),u^=1),new g(i,l,u)}}}(t,r,i),h=e;return hi(h.hash.outputLen,h.nByteLength,h.hmac)(s,l)},verify:function(t,n,r,i=A){const s=t;n=ri("msgHash",n),r=ri("publicKey",r);const{lowS:u,prehash:l,format:d}=i;if(Hi(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const h="string"==typeof s||Hr(s),f=!h&&!d&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(f&&(p=new g(s.r,s.s)),h){try{"compact"!==d&&(p=g.fromDER(s))}catch(t){if(!(t instanceof zi.Err))throw t}p||"der"===d||(p=g.fromCompact(s))}y=c.fromHex(r)}catch(t){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;l&&(n=e.hash(n));const{r:m,s:w}=p,_=b(n),v=a(w),E=o(_*v),S=o(m*v),T=c.BASE.multiplyAndAddUnsafe(y,E,S)?.toAffine();return!!T&&o(T.x)===m},ProjectivePoint:c,Signature:g,utils:y}}({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Ci(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:is,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(ls=Mr,{hash:ls,hmac:(t,...e)=>rs(ls,t,function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];Xi(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}(...e)),randomBytes:es}),bits2int:os,bits2int_modN:t=>{const e=Jr(t).toString(16);return 63===e.length&&(t=as(e+"0")),Ai(os(t),is)}}),us=cs;var ls;function ds(t){return ri("","string"==typeof t?as(t):t)}function hs(t){return $r(ds(t)).padStart(64,"0")}function fs(t,e=!1){return cs.getPublicKey(hs(t),e)}function ps(t,e){return cs.getSharedSecret(hs(t),e)}function gs(t){const{r:e,s:n}=t;if(e<0n||e>=ss)throw new Error(`Signature.r should be [1, ${ss})`);const r=Ti(n,is);if(r<0n||r>=ss)throw new Error(`inv(Signature.s) should be [1, ${ss})`)}function ys(t){const e=ds(t);if(Jr(e)>=ss)throw new Error(`msgHash should be [0, ${ss})`);return e}function ms(t,e,n){const r=cs.sign(ys(t),hs(e),n);return gs(r),r}function ws(t,e,n){if(!(t instanceof vs)){const e=ds(t);try{t=vs.fromDER(e)}catch(n){if(!(n instanceof zi.Err))throw n;t=vs.fromCompact(e)}}return gs(t),cs.verify(t,ys(e),ds(n))}const{CURVE:bs,ProjectivePoint:_s,Signature:vs,utils:Es}=cs;function As(t){return`0x${$r(t.subarray(1)).replace(/^0+/gm,"")}`}function Ss(t){return t.replace(/^0x/i,"")}function Ts(t){const e=ds(t),n=2n**256n,r=n-Ai(n,is);for(let t=0;;t++){const n=Vs(ii(e,ni(BigInt(t))));if(n<r)return Ai(n,is).toString(16);if(1e5===t)throw new Error("grindKey is broken: tried 100k vals")}}function Is(t){return As(fs(t,!0))}function ks(t){if(130!==(t=Ss(t)).length)throw new Error("Wrong ethereum signature");return Ts(t.substring(0,64))}const Os=2n**31n-1n,Bs=t=>Number(t&Os);function Cs(t,e,n,r){const i=Bs(Vs(t)),s=Bs(Vs(e)),o=Yr(Ss(n));return`m/2645'/${i}'/${s}'/${Bs(o)}'/${Bs(o>>31n)}'/${r}`}const xs=[new _s(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new _s(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new _s(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new _s(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new _s(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Ns(t,e){const n=[];let r=t;for(let t=0;t<248;t++)n.push(r),r=r.double();r=e;for(let t=0;t<4;t++)n.push(r),r=r.double();return n}const Rs=Ns(xs[1],xs[2]),Ps=Ns(xs[3],xs[4]);function Ds(t,e,n){let r=function(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=Jr(ds(t));if(!(0n<=e&&e<cs.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}(e);for(let e=0;e<252;e++){const i=n[e];if(!i)throw new Error("invalid constant index");if(i.equals(t))throw new Error("Same point");0n!==(1n&r)&&(t=t.add(i)),r>>=1n}return t}function Ls(t,e){let n=xs[0];return n=Ds(n,t,Rs),n=Ds(n,e,Ps),As(n.toRawBytes(!0))}const Us=(t,e=Ls)=>[0,...t,t.length].reduce(((t,n)=>e(t,n))),Ms=ui(250),Fs=t=>Jr(xr(t))&Ms,Vs=t=>Jr(Mr(t)),qs=Ci(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Hs(t,e,n){const r=t.fromBytes(Mr(fr(`${e}${n}`)));return t.create(r)}function js(t,e,n,r=0){const i=[],s=[];for(let o=0;o<n;o++)i.push(Hs(t,`${e}x`,r*n+o)),s.push(Hs(t,`${e}y`,r*n+o));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map((e=>s.map((n=>t.inv(t.sub(e,n))))))}const Ks=[[3,1,1],[1,-1,1],[1,1,-2]].map((t=>t.map(BigInt)));function zs(t,e){if(ki(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let e=0;e<r;e++){const r=[];for(let i=0;i<n;i++)r.push(Hs(t.Fp,"Hades",n*e+i));i.push(r)}const s=function(t){const e=function(t){const{Fp:e,mds:n,reversePartialPowIdx:r,roundConstants:i}=t,{roundsFull:s,roundsPartial:o,sboxPower:a,t:c}=t;ki(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==c)throw new Error("Poseidon: invalid MDS matrix");const u=n.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid MDS matrix row: "+t);return t.map((t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)}))}));if(void 0!==r&&"boolean"!=typeof r)throw new Error("invalid param reversePartialPowIdx="+r);if(1&s)throw new Error("roundsFull is not even"+s);const l=s+o;if(!Array.isArray(i)||i.length!==l)throw new Error("Poseidon: invalid round constants");const d=i.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid round constants");return t.map((t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)}))}));if(!a||![3,5,7].includes(a))throw new Error("invalid sboxPower");const h=BigInt(a);let f=t=>Oi(e,t,h);return 3===a?f=t=>e.mul(e.sqrN(t),t):5===a&&(f=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:l,sboxFn:f,roundConstants:d,mds:u})}(t),{Fp:n,mds:r,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:a,t:c}=e,u=e.roundsFull/2,l=e.reversePartialPowIdx?c-1:0,d=(t,e,s)=>(t=t.map(((t,e)=>n.add(t,i[s][e]))),e?t=t.map((t=>a(t))):t[l]=a(t[l]),t=r.map((e=>e.reduce(((e,r,i)=>n.add(e,n.mulN(r,t[i]))),n.ZERO)))),h=function(t){if(!Array.isArray(t)||t.length!==c)throw new Error("invalid values, expected array of bigints with length "+c);t=t.map((t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)}));let e=0;for(let n=0;n<u;n++)t=d(t,!0,e++);for(let n=0;n<o;n++)t=d(t,!1,e++);for(let n=0;n<u;n++)t=d(t,!0,e++);if(e!==s)throw new Error("invalid number of rounds");return t};return h.roundConstants=i,h}({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function $s(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return zs(t,js(t.Fp,"HadesMDS",n,e))}const Gs=zs({Fp:qs,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Ks);function Ys(t,e,n=Gs){return n([t,e,2n])[0]}function Ws(t,e,n=Gs){return ni(Ys(Jr(t),Jr(e),n))}function Zs(t,e=Gs){return e([t,0n,1n])[0]}function Xs(t,e=Gs){const{m:n,rate:r}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const i=Array.from(t);for(i.push(1n);i.length%r!=0;)i.push(0n);let s=new Array(n).fill(0n);for(let t=0;t<i.length;t+=r){for(let e=0;e<r;e++){const n=i[t+e];if(void 0===n)throw new Error("invalid index");if(void 0===s[e])throw new Error("state[j] is undefined");s[e]=s[e]+n}s=e(s)}return s[0]}const Js=BigInt(2**32-1),Qs=BigInt(32);function to(t,e=!1){return e?{h:Number(t&Js),l:Number(t>>Qs&Js)}:{h:0|Number(t>>Qs&Js),l:0|Number(t&Js)}}function eo(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=to(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const no=[],ro=[],io=[],so=BigInt(0),oo=BigInt(1),ao=BigInt(2),co=BigInt(7),uo=BigInt(256),lo=BigInt(113);for(let t=0,e=oo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],no.push(2*(5*r+n)),ro.push((t+1)*(t+2)/2%64);let i=so;for(let t=0;t<7;t++)e=(e<<oo^(e>>co)*lo)%uo,e&ao&&(i^=oo<<(oo<<BigInt(t))-oo);io.push(i)}const[ho,fo]=eo(io,!0),po=(t,e,n)=>n>32?((t,e,n)=>e<<n-32|t>>>64-n)(t,e,n):((t,e,n)=>t<<n|e>>>32-n)(t,e,n),go=(t,e,n)=>n>32?((t,e,n)=>t<<n-32|e>>>64-n)(t,e,n):((t,e,n)=>e<<n|t>>>32-n)(t,e,n);class yo extends zn{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Rn(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Un(this.state)}keccak(){Vn||jn(this.state32),function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,i=(e+2)%10,s=n[i],o=n[i+1],a=po(s,o,1)^n[r],c=go(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],i=t[3];for(let n=0;n<24;n++){const r=ro[n],s=po(e,i,r),o=go(e,i,r),a=no[n];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=ho[r],t[1]^=fo[r]}n.fill(0)}(this.state32,this.rounds),Vn||jn(this.state32),this.posOut=0,this.pos=0}update(t){Dn(this);const{blockLen:e,state:n}=this,r=(t=Kn(t)).length;for(let i=0;i<r;){const s=Math.min(e-this.pos,r-i);for(let e=0;e<s;e++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,0!=(128&e)&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Dn(this,!1),Pn(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Rn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ln(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return t||(t=new yo(e,n,r,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=s,t.destroyed=this.destroyed,t}}const mo=((t,e,n)=>$n((()=>new yo(e,t,n))))(1,136,32),wo=BigInt(0),bo=BigInt(1),_o=BigInt(2),vo=BigInt(3),Eo=BigInt(4),Ao=BigInt(5),So=BigInt(8);function To(t,e){const n=t%e;return n>=wo?n:e+n}function Io(t,e,n){if(e<wo)throw new Error("invalid exponent, negatives unsupported");if(n<=wo)throw new Error("invalid modulus");if(n===bo)return wo;let r=bo;for(;e>wo;)e&bo&&(r=r*t%n),t=t*t%n,e>>=bo;return r}function ko(t,e,n){let r=t;for(;e-- >wo;)r*=r,r%=n;return r}function Oo(t,e){if(t===wo)throw new Error("invert: expected non-zero number");if(e<=wo)throw new Error("invert: expected positive modulus, got "+e);let n=To(t,e),r=e,i=wo,s=bo,o=bo,a=wo;for(;n!==wo;){const t=r/n,e=r%n,c=i-o*t,u=s-a*t;r=n,n=e,i=o,s=a,o=c,a=u}if(r!==bo)throw new Error("invert: does not exist");return To(i,e)}const Bo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Co(t){return xn(t,Bo.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function xo(t,e,n){if(n<wo)throw new Error("invalid exponent, negatives unsupported");if(n===wo)return t.ONE;if(n===bo)return e;let r=t.ONE,i=e;for(;n>wo;)n&bo&&(r=t.mul(r,i)),i=t.sqr(i),n>>=bo;return r}function No(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ro(t,e,n=!1,r={}){if(t<=wo)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=No(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:In(i),ZERO:wo,ONE:bo,create:e=>To(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return wo<=e&&e<t},is0:t=>t===wo,isOdd:t=>(t&bo)===bo,neg:e=>To(-e,t),eql:(t,e)=>t===e,sqr:e=>To(e*e,t),add:(e,n)=>To(e+n,t),sub:(e,n)=>To(e-n,t),mul:(e,n)=>To(e*n,t),pow:(t,e)=>xo(a,t,e),div:(e,n)=>To(e*Oo(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Oo(e,t),sqrt:r.sqrt||(e=>(o||(o=function(t){if(t%Eo===vo){const e=(t+bo)/Eo;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%So===Ao){const e=(t-Ao)/So;return function(t,n){const r=t.mul(n,_o),i=t.pow(r,e),s=t.mul(n,i),o=t.mul(t.mul(s,_o),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-bo)/_o;let n,r,i;for(n=t-bo,r=0;n%_o===wo;n/=_o,r++);for(i=_o;i<t&&Io(i,e,t)!==t-bo;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const e=(t+bo)/Eo;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+bo)/_o;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,c=t.pow(t.mul(t.ONE,i),n),u=t.pow(o,s),l=t.pow(o,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let n=t.sqr(l);e<a&&!t.eql(n,t.ONE);e++)n=t.sqr(n);const n=t.pow(c,bo<<BigInt(a-e-1));c=t.sqr(n),u=t.mul(u,n),l=t.mul(l,c),a=e}return u}}(t)}(t)),o(a,e))),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,i)=>t.is0(r)?e:(n[i]=e,t.mul(e,r))),t.ONE),i=t.inv(r);return e.reduceRight(((e,r,i)=>t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))),i),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?bn(t,s):wn(t,s),fromBytes:t=>{if(t.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+t.length);return n?mn(t):yn(t)}});return Object.freeze(a)}function Po(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Do(t){const e=Po(t);return e+Math.ceil(e/2)}function Lo(t){const{Fp:e,mds:n,reversePartialPowIdx:r,roundConstants:i}=t,{roundsFull:s,roundsPartial:o,sboxPower:a,t:c}=t;Co(e);for(const e of["t","roundsFull","roundsPartial"])if("number"!=typeof t[e]||!Number.isSafeInteger(t[e]))throw new Error("invalid number "+e);if(!Array.isArray(n)||n.length!==c)throw new Error("Poseidon: invalid MDS matrix");const u=n.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid MDS matrix row: "+t);return t.map((t=>{if("bigint"!=typeof t)throw new Error("invalid MDS matrix bigint: "+t);return e.create(t)}))}));if(void 0!==r&&"boolean"!=typeof r)throw new Error("invalid param reversePartialPowIdx="+r);if(1&s)throw new Error("roundsFull is not even"+s);const l=s+o;if(!Array.isArray(i)||i.length!==l)throw new Error("Poseidon: invalid round constants");const d=i.map((t=>{if(!Array.isArray(t)||t.length!==c)throw new Error("invalid round constants");return t.map((t=>{if("bigint"!=typeof t||!e.isValid(t))throw new Error("invalid round constant");return e.create(t)}))}));if(!a||![3,5,7].includes(a))throw new Error("invalid sboxPower");const h=BigInt(a);let f=t=>xo(e,t,h);return 3===a?f=t=>e.mul(e.sqrN(t),t):5===a&&(f=t=>e.mul(e.sqrN(e.sqrN(t)),t)),Object.freeze({...t,rounds:l,sboxFn:f,roundConstants:d,mds:u})}function Uo(t,e){if("number"!=typeof e)throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n}function Mo(t){const e=Lo(t),{Fp:n,mds:r,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:a,t:c}=e,u=e.roundsFull/2,l=e.reversePartialPowIdx?c-1:0,d=(t,e,s)=>(t=t.map(((t,e)=>n.add(t,i[s][e]))),e?t=t.map((t=>a(t))):t[l]=a(t[l]),t=r.map((e=>e.reduce(((e,r,i)=>n.add(e,n.mulN(r,t[i]))),n.ZERO)))),h=function(t){if(!Array.isArray(t)||t.length!==c)throw new Error("invalid values, expected array of bigints with length "+c);t=t.map((t=>{if("bigint"!=typeof t)throw new Error("invalid bigint="+t);return n.create(t)}));let e=0;for(let n=0;n<u;n++)t=d(t,!0,e++);for(let n=0;n<o;n++)t=d(t,!1,e++);for(let n=0;n<u;n++)t=d(t,!0,e++);if(e!==s)throw new Error("invalid number of rounds");return t};return h.roundConstants=i,h}const Fo=BigInt(0),Vo=BigInt(1);function qo(t,e){const n=e.negate();return t?n:e}function Ho(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jo(t,e){return Ho(t,e),{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}}const Ko=new WeakMap,zo=new WeakMap;function $o(t){return zo.get(t)||1}function Go(t){return Co(t.Fp),xn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...No(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Yo(t){void 0!==t.lowS&&cn("lowS",t.lowS),void 0!==t.prehash&&cn("prehash",t.prehash)}const{bytesToNumberBE:Wo,hexToBytes:Zo}=d,Xo={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(t,e)=>{const{Err:n}=Xo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=dn(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?dn(i.length/2|128):"";return dn(t)+s+i+e},decode(t,e){const{Err:n}=Xo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const o=e.subarray(r,r+t);if(o.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=Xo;if(t<Jo)throw new e("integer: negative integers are not allowed");let n=dn(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Xo;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return Wo(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Xo,i="string"==typeof t?Zo(t):t;an(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Xo,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},Jo=BigInt(0),Qo=BigInt(1),ta=BigInt(2),ea=BigInt(3),na=BigInt(4);function ra(t){const e=function(t){const e=Go(t);xn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:n}=e,r=Ro(e.n,e.nBitLength),i=e.toBytes||((t,e,r)=>{const i=e.toAffine();return vn(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function o(t){const{a:r,b:i}=e,s=n.sqr(t),o=n.mul(s,t);return n.add(n.add(o,n.mul(t,r)),i)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=e;if(n&&"bigint"!=typeof t){if(on(t)&&(t=ln(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*r,"0")}let o;try{o="bigint"==typeof t?t:yn(_n("private key",t,r))}catch(e){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof t)}return i&&(o=To(o,s)),Sn("private key",o,Qo,s),o}function c(t){if(!(t instanceof d))throw new Error("ProjectivePoint expected")}const u=Nn(((t,e)=>{const{px:r,py:i,pz:s}=t;if(n.eql(s,n.ONE))return{x:r,y:i};const o=t.is0();null==e&&(e=o?n.ONE:n.inv(s));const a=n.mul(r,e),c=n.mul(i,e),u=n.mul(s,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),l=Nn((t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=t.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=o(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class d{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof d)throw new Error("projective point not allowed");const i=t=>n.eql(t,n.ZERO);return i(e)&&i(r)?d.ZERO:new d(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(d.fromAffine)}static fromHex(t){const e=d.fromAffine(s(_n("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return d.BASE.multiply(a(t))}static msm(t,e){return function(t,e,n,r){if(function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach(((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)}))}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach(((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)}))}(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Tn(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let t=Math.floor((e.BITS-1)/o)*o;t>=0;t-=o){c.fill(i);for(let e=0;e<r.length;e++){const i=r[e],s=Number(i>>BigInt(t)&BigInt(a));c[s]=c[s].add(n[e])}let e=i;for(let t=c.length-1,n=i;t>0;t--)n=n.add(c[t]),e=e.add(n);if(u=u.add(e),0!==t)for(let t=0;t<o;t++)u=u.double()}return u}(d,r,t,e)}_setWindowSize(t){f.setWindowSize(this,t)}assertValidity(){l(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){c(t);const{px:e,py:r,pz:i}=this,{px:s,py:o,pz:a}=t,u=n.eql(n.mul(e,a),n.mul(s,i)),l=n.eql(n.mul(r,a),n.mul(o,i));return u&&l}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,i=n.mul(r,ea),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),l=n.mul(s,a),l=n.add(l,l),c=n.mul(t,l),u=n.mul(i,p),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(g,c),l=n.mul(i,l),p=n.mul(t,p),g=n.sub(h,p),g=n.mul(t,g),g=n.add(g,l),l=n.add(h,h),h=n.add(l,h),h=n.add(h,p),h=n.mul(h,g),u=n.add(u,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,g),c=n.sub(c,h),l=n.mul(p,f),l=n.add(l,l),l=n.add(l,l),new d(c,u,l)}add(t){c(t);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=t;let l=n.ZERO,h=n.ZERO,f=n.ZERO;const p=e.a,g=n.mul(e.b,ea);let y=n.mul(r,o),m=n.mul(i,a),w=n.mul(s,u),b=n.add(r,i),_=n.add(o,a);b=n.mul(b,_),_=n.add(y,m),b=n.sub(b,_),_=n.add(r,s);let v=n.add(o,u);return _=n.mul(_,v),v=n.add(y,w),_=n.sub(_,v),v=n.add(i,s),l=n.add(a,u),v=n.mul(v,l),l=n.add(m,w),v=n.sub(v,l),f=n.mul(p,_),l=n.mul(g,w),f=n.add(l,f),l=n.sub(m,f),f=n.add(m,f),h=n.mul(l,f),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),_=n.mul(g,_),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),_=n.add(_,w),y=n.mul(m,_),h=n.add(h,y),y=n.mul(v,_),l=n.mul(b,l),l=n.sub(l,y),y=n.mul(b,m),f=n.mul(v,f),f=n.add(f,y),new d(l,h,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(d.ZERO)}wNAF(t){return f.wNAFCached(this,t,d.normalizeZ)}multiplyUnsafe(t){const{endo:r,n:i}=e;Sn("scalar",t,Jo,i);const s=d.ZERO;if(t===Jo)return s;if(this.is0()||t===Qo)return this;if(!r||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,t,d.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(t),l=s,h=s,p=this;for(;a>Jo||u>Jo;)a&Qo&&(l=l.add(p)),u&Qo&&(h=h.add(p)),p=p.double(),a>>=Qo,u>>=Qo;return o&&(l=l.negate()),c&&(h=h.negate()),h=new d(n.mul(h.px,r.beta),h.py,h.pz),l.add(h)}multiply(t){const{endo:r,n:i}=e;let s,o;if(Sn("scalar",t,Qo,i),r){const{k1neg:e,k1:i,k2neg:a,k2:c}=r.splitScalar(t);let{p:u,f:l}=this.wNAF(i),{p:h,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,r.beta),h.py,h.pz),s=u.add(h),o=l.add(p)}else{const{p:e,f:n}=this.wNAF(t);s=e,o=n}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(t,e,n){const r=d.BASE,i=(t,e)=>e!==Jo&&e!==Qo&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,n));return s.is0()?void 0:s}toAffine(t){return u(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===Qo)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===Qo?this:n?n(d,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return cn("isCompressed",t),this.assertValidity(),i(d,this,t)}toHex(t=!0){return cn("isCompressed",t),ln(this.toRawBytes(t))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=(p=d,g=e.endo?Math.ceil(h/2):h,{constTimeNegate:qo,hasPrecomputes:t=>1!==$o(t),unsafeLadder(t,e,n=p.ZERO){let r=t;for(;e>Fo;)e&Vo&&(n=n.add(r)),r=r.double(),e>>=Vo;return n},precomputeWindow(t,e){const{windows:n,windowSize:r}=jo(e,g),i=[];let s=t,o=s;for(let t=0;t<n;t++){o=s,i.push(o);for(let t=1;t<r;t++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(t,e,n){const{windows:r,windowSize:i}=jo(t,g);let s=p.ZERO,o=p.BASE;const a=BigInt(2**t-1),c=2**t,u=BigInt(t);for(let t=0;t<r;t++){const r=t*i;let l=Number(n&a);n>>=u,l>i&&(l-=c,n+=Vo);const d=r,h=r+Math.abs(l)-1,f=t%2!=0,p=l<0;0===l?o=o.add(qo(f,e[d])):s=s.add(qo(p,e[h]))}return{p:s,f:o}},wNAFUnsafe(t,e,n,r=p.ZERO){const{windows:i,windowSize:s}=jo(t,g),o=BigInt(2**t-1),a=2**t,c=BigInt(t);for(let t=0;t<i;t++){const i=t*s;if(n===Fo)break;let u=Number(n&o);if(n>>=c,u>s&&(u-=a,n+=Vo),0===u)continue;let l=e[i+Math.abs(u)-1];u<0&&(l=l.negate()),r=r.add(l)}return r},getPrecomputes(t,e,n){let r=Ko.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&Ko.set(e,n(r))),r},wNAFCached(t,e,n){const r=$o(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const i=$o(t);return 1===i?this.unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)},setWindowSize(t,e){Ho(e,g),zo.set(t,e),Ko.delete(t)}});var p,g;return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(t){return An(t,Qo,e.n)}}}function ia(t){const e=function(t){const e=Go(t);return xn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(t){return To(t,r)}function a(t){return Oo(t,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=ra({...e,toBytes(t,e,r){const i=e.toAffine(),s=n.toBytes(i.x),o=vn;return cn("isCompressed",r),r?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(t){const e=t.length,r=t[0],o=t.subarray(1);if(e!==i||2!==r&&3!==r){if(e===s&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+e)}{const t=yn(o);if(!An(t,Qo,n.ORDER))throw new Error("Point is not on curve");const e=l(t);let i;try{i=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("Point is not on curve"+e)}return 1==(1&r)!=((i&Qo)===Qo)&&(i=n.neg(i)),{x:t,y:i}}}}),h=t=>ln(wn(t,e.nByteLength));function f(t){return t>r>>Qo}const p=(t,e,n)=>yn(t.slice(e,n));class g{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=_n("compactSignature",t,2*n),new g(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=Xo.toSig(_n("DER",t));return new g(e,n)}assertValidity(){Sn("r",this.r,Qo,r),Sn("s",this.s,Qo,r)}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r,s:i,recovery:s}=this,u=b(_n("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0==(1&s)?"02":"03",f=c.fromHex(d+h(l)),p=a(l),g=o(-u*p),y=o(i*p),m=c.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return gn(this.toDERHex())}toDERHex(){return Xo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gn(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const t=Do(e.n);return function(t,e,n=!1){const r=t.length,i=Po(e),s=Do(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=To(n?yn(t):mn(t),e-bo)+bo;return n?bn(o,i):wn(o,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function m(t){const e=on(t),n="string"==typeof t,r=(e||n)&&t.length;return e?r===i||r===s:n?r===2*i||r===2*s:t instanceof c}const w=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const n=yn(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},b=e.bits2int_modN||function(t){return o(w(t))},_=In(e.nBitLength);function v(t){return Sn("num < 2^"+e.nBitLength,t,Jo,_),wn(t,e.nByteLength)}const E={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,n=!0){if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(t)).toRawBytes(n)},sign:function(t,r,i=E){const{seed:s,k2sig:l}=function(t,r,i=E){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:l}=e;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),t=_n("msgHash",t),Yo(i),p&&(t=_n("prehashed msgHash",s(t)));const m=b(t),_=u(r),A=[v(_),v(m)];if(null!=y&&!1!==y){const t=!0===y?l(n.BYTES):y;A.push(_n("extraEntropy",t))}const S=vn(...A),T=m;return{seed:S,k2sig:function(t){const e=w(t);if(!d(e))return;const n=a(e),r=c.BASE.multiply(e).toAffine(),i=o(r.x);if(i===Jo)return;const s=o(n*o(T+i*_));if(s===Jo)return;let u=(r.x===i?0:2)|Number(r.y&Qo),l=s;return h&&f(s)&&(l=function(t){return f(t)?o(-t):t}(s),u^=1),new g(i,l,u)}}}(t,r,i),h=e;return Bn(h.hash.outputLen,h.nByteLength,h.hmac)(s,l)},verify:function(t,n,r,i=A){const s=t;n=_n("msgHash",n),r=_n("publicKey",r);const{lowS:u,prehash:l,format:d}=i;if(Yo(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const h="string"==typeof s||on(s),f=!h&&!d&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(f&&(p=new g(s.r,s.s)),h){try{"compact"!==d&&(p=g.fromDER(s))}catch(t){if(!(t instanceof Xo.Err))throw t}p||"der"===d||(p=g.fromCompact(s))}y=c.fromHex(r)}catch(t){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;l&&(n=e.hash(n));const{r:m,s:w}=p,_=b(n),v=a(w),E=o(_*v),S=o(m*v),T=c.BASE.multiplyAndAddUnsafe(y,E,S)?.toAffine();return!!T&&o(T.x)===m},ProjectivePoint:c,Signature:g,utils:y}}function sa(t,e){const n=t.ORDER;let r=Jo;for(let t=n-Qo;t%ta===Jo;t/=ta)r+=Qo;const i=r,s=ta<<i-Qo-Qo,o=s*ta,a=(n-Qo)/o,c=(a-Qo)/ta,u=o-Qo,l=s,d=t.pow(e,a),h=t.pow(e,(a+Qo)/ta);let f=(e,n)=>{let r=d,s=t.pow(n,u),o=t.sqr(s);o=t.mul(o,n);let a=t.mul(e,o);a=t.pow(a,c),a=t.mul(a,s),s=t.mul(a,n),o=t.mul(a,e);let f=t.mul(o,s);a=t.pow(f,l);let p=t.eql(a,t.ONE);s=t.mul(o,h),a=t.mul(f,r),o=t.cmov(s,o,p),f=t.cmov(a,f,p);for(let e=i;e>Qo;e--){let n=e-ta;n=ta<<n-Qo;let i=t.pow(f,n);const a=t.eql(i,t.ONE);s=t.mul(o,r),r=t.mul(r,r),i=t.mul(f,r),o=t.cmov(s,o,a),f=t.cmov(i,f,a)}return{isValid:p,value:o}};if(t.ORDER%na===ea){const n=(t.ORDER-ea)/na,r=t.sqrt(t.neg(e));f=(e,i)=>{let s=t.sqr(i);const o=t.mul(e,i);s=t.mul(s,o);let a=t.pow(s,n);a=t.mul(a,o);const c=t.mul(a,r),u=t.mul(t.sqr(a),i),l=t.eql(u,e);return{isValid:l,value:t.cmov(c,a,l)}}}return f}function oa(t,e){if(Co(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=sa(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,u,l,d;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),c=t.mul(u,e.A),s=t.add(s,c),s=t.mul(s,o),u=t.mul(u,a),c=t.mul(u,e.B),s=t.add(s,c),l=t.mul(i,o);const{isValid:h,value:f}=n(s,u);d=t.mul(i,r),d=t.mul(d,f),l=t.cmov(l,o,h),d=t.cmov(d,f,h);const p=t.isOdd(r)===t.isOdd(d);return d=t.cmov(t.neg(d),d,p),l=t.div(l,a),{x:l,y:d}}}const aa=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class ca extends zn{constructor(t,e,n={},r,i,s){if(super(),this.blockLen=t,this.outputLen=e,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Rn(t),Rn(e),Rn(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");if(void 0!==n.key&&(n.key.length<1||n.key.length>r))throw new Error("key length must be undefined or 1.."+r);if(void 0!==n.salt&&n.salt.length!==i)throw new Error("salt must be undefined or "+i);if(void 0!==n.personalization&&n.personalization.length!==s)throw new Error("personalization must be undefined or "+s);this.buffer=new Uint8Array(t),this.buffer32=Un(this.buffer)}update(t){Dn(this);const{blockLen:e,buffer:n,buffer32:r}=this,i=(t=Kn(t)).length,s=t.byteOffset,o=t.buffer;for(let a=0;a<i;){this.pos===e&&(Vn||jn(r),this.compress(r,0,!1),Vn||jn(r),this.pos=0);const c=Math.min(e-this.pos,i-a),u=s+a;if(c!==e||u%4||!(a+c<i))n.set(t.subarray(a,a+c),this.pos),this.pos+=c,this.length+=c,a+=c;else{const t=new Uint32Array(o,u,Math.floor((i-a)/4));Vn||jn(t);for(let n=0;a+e<i;n+=r.length,a+=e)this.length+=e,this.compress(t,n,!1);Vn||jn(t)}}return this}digestInto(t){Dn(this),Ln(t,this);const{pos:e,buffer32:n}=this;this.finished=!0,this.buffer.subarray(e).fill(0),Vn||jn(n),this.compress(n,0,!0),Vn||jn(n);const r=Un(t);this.get().forEach(((t,e)=>r[e]=Hn(t)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){const{buffer:e,length:n,finished:r,destroyed:i,outputLen:s,pos:o}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.length=n,t.finished=r,t.destroyed=i,t.outputLen=s,t.buffer.set(e),t.pos=o,t}}const ua=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);function la(t,e,n,r,i){return r=Fn(r^(t=t+e+i|0),16),{a:t,b:e=Fn(e^(n=n+r|0),12),c:n,d:r}}function da(t,e,n,r,i){return r=Fn(r^(t=t+e+i|0),8),{a:t,b:e=Fn(e^(n=n+r|0),7),c:n,d:r}}class ha extends ca{constructor(t={}){super(64,void 0===t.dkLen?32:t.dkLen,t,32,8,8),this.v0=0|ua[0],this.v1=0|ua[1],this.v2=0|ua[2],this.v3=0|ua[3],this.v4=0|ua[4],this.v5=0|ua[5],this.v6=0|ua[6],this.v7=0|ua[7];const e=t.key?t.key.length:0;if(this.v0^=this.outputLen|e<<8|65536|1<<24,t.salt){const e=Un(Kn(t.salt));this.v4^=Hn(e[0]),this.v5^=Hn(e[1])}if(t.personalization){const e=Un(Kn(t.personalization));this.v6^=Hn(e[0]),this.v7^=Hn(e[1])}if(t.key){const e=new Uint8Array(this.blockLen);e.set(Kn(t.key)),this.update(e)}}get(){const{v0:t,v1:e,v2:n,v3:r,v4:i,v5:s,v6:o,v7:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.v0=0|t,this.v1=0|e,this.v2=0|n,this.v3=0|r,this.v4=0|i,this.v5=0|s,this.v6=0|o,this.v7=0|a}compress(t,e,n){const{h:r,l:i}=to(BigInt(this.length)),{v0:s,v1:o,v2:a,v3:c,v4:u,v5:l,v6:d,v7:h,v8:f,v9:p,v10:g,v11:y,v12:m,v13:w,v14:b,v15:_}=function(t,e,n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,w,b){let _=0;for(let r=0;r<10;r++)({a:i,b:c,c:h,d:y}=la(i,c,h,y,n[e+t[_++]])),({a:i,b:c,c:h,d:y}=da(i,c,h,y,n[e+t[_++]])),({a:s,b:u,c:f,d:m}=la(s,u,f,m,n[e+t[_++]])),({a:s,b:u,c:f,d:m}=da(s,u,f,m,n[e+t[_++]])),({a:o,b:l,c:p,d:w}=la(o,l,p,w,n[e+t[_++]])),({a:o,b:l,c:p,d:w}=da(o,l,p,w,n[e+t[_++]])),({a,b:d,c:g,d:b}=la(a,d,g,b,n[e+t[_++]])),({a,b:d,c:g,d:b}=da(a,d,g,b,n[e+t[_++]])),({a:i,b:u,c:p,d:b}=la(i,u,p,b,n[e+t[_++]])),({a:i,b:u,c:p,d:b}=da(i,u,p,b,n[e+t[_++]])),({a:s,b:l,c:g,d:y}=la(s,l,g,y,n[e+t[_++]])),({a:s,b:l,c:g,d:y}=da(s,l,g,y,n[e+t[_++]])),({a:o,b:d,c:h,d:m}=la(o,d,h,m,n[e+t[_++]])),({a:o,b:d,c:h,d:m}=da(o,d,h,m,n[e+t[_++]])),({a,b:c,c:f,d:w}=la(a,c,f,w,n[e+t[_++]])),({a,b:c,c:f,d:w}=da(a,c,f,w,n[e+t[_++]]));return{v0:i,v1:s,v2:o,v3:a,v4:c,v5:u,v6:l,v7:d,v8:h,v9:f,v10:p,v11:g,v12:y,v13:m,v14:w,v15:b}}(aa,e,t,0,this.v0,this.v1,this.v2,this.v3,this.v4,this.v5,this.v6,this.v7,ua[0],ua[1],ua[2],ua[3],i^ua[4],r^ua[5],n?~ua[6]:ua[6],ua[7]);this.v0^=s^f,this.v1^=o^p,this.v2^=a^g,this.v3^=c^y,this.v4^=u^m,this.v5^=l^w,this.v6^=d^b,this.v7^=h^_}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0)}}const fa=Gn((t=>new ha(t)));function pa(t){let e=t.length;for(;--e>=0;)t[e]=0}const ga=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ya=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wa=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ba=new Array(576);pa(ba);const _a=new Array(60);pa(_a);const va=new Array(512);pa(va);const Ea=new Array(256);pa(Ea);const Aa=new Array(29);pa(Aa);const Sa=new Array(30);function Ta(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let Ia,ka,Oa;function Ba(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}pa(Sa);const Ca=t=>t<256?va[t]:va[256+(t>>>7)],xa=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Na=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,xa(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},Ra=(t,e,n)=>{Na(t,n[2*e],n[2*e+1])},Pa=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},Da=(t,e,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=Pa(r[e]++,e))}},La=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Ua=t=>{t.bi_valid>8?xa(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Ma=(t,e,n,r)=>{const i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},Fa=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&Ma(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Ma(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},Va=(t,e,n)=>{let r,i,s,o,a=0;if(0!==t.sym_next)do{r=255&t.pending_buf[t.sym_buf+a++],r+=(255&t.pending_buf[t.sym_buf+a++])<<8,i=t.pending_buf[t.sym_buf+a++],0===r?Ra(t,i,e):(s=Ea[i],Ra(t,s+256+1,e),o=ga[s],0!==o&&(i-=Aa[s],Na(t,i,o)),r--,s=Ca(r),Ra(t,s,n),o=ya[s],0!==o&&(r-=Sa[s],Na(t,r,o)))}while(a<t.sym_next);Ra(t,256,e)},qa=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):n[2*o+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=u<2?++u:0,n[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)Fa(t,n,o);c=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Fa(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[2*c]=n[2*o]+n[2*a],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[2*o+1]=n[2*a+1]=c,t.heap[1]=c++,Fa(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,l,d,h,f,p,g=0;for(h=0;h<=15;h++)t.bl_count[h]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],h=n[2*n[2*l+1]+1]+1,h>c&&(h=c,g++),n[2*l+1]=h,l>r||(t.bl_count[h]++,f=0,l>=a&&(f=o[l-a]),p=n[2*l],t.opt_len+=p*(h+f),s&&(t.static_len+=p*(i[2*l+1]+f)));if(0!==g){do{for(h=c-1;0===t.bl_count[h];)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(h=c;0!==h;h--)for(l=t.bl_count[h];0!==l;)d=t.heap[--u],d>r||(n[2*d+1]!==h&&(t.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),l--)}})(t,e),Da(n,u,t.bl_count)},Ha=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=e[2*(r+1)+1],++a<c&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},ja=(t,e,n)=>{let r,i,s=-1,o=e[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),r=0;r<=n;r++)if(i=o,o=e[2*(r+1)+1],!(++a<c&&i===o)){if(a<u)do{Ra(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(Ra(t,i,t.bl_tree),a--),Ra(t,16,t.bl_tree),Na(t,a-3,2)):a<=10?(Ra(t,17,t.bl_tree),Na(t,a-3,3)):(Ra(t,18,t.bl_tree),Na(t,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}};let Ka=!1;const za=(t,e,n,r)=>{Na(t,0+(r?1:0),3),Ua(t),xa(t,n),xa(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};var $a={_tr_init:t=>{Ka||((()=>{let t,e,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(Aa[r]=n,t=0;t<1<<ga[r];t++)Ea[n++]=r;for(Ea[n-1]=r,i=0,r=0;r<16;r++)for(Sa[r]=i,t=0;t<1<<ya[r];t++)va[i++]=r;for(i>>=7;r<30;r++)for(Sa[r]=i<<7,t=0;t<1<<ya[r]-7;t++)va[256+i++]=r;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)ba[2*t+1]=8,t++,s[8]++;for(;t<=255;)ba[2*t+1]=9,t++,s[9]++;for(;t<=279;)ba[2*t+1]=7,t++,s[7]++;for(;t<=287;)ba[2*t+1]=8,t++,s[8]++;for(Da(ba,287,s),t=0;t<30;t++)_a[2*t+1]=5,_a[2*t]=Pa(t,5);Ia=new Ta(ba,ga,257,286,15),ka=new Ta(_a,ya,0,30,15),Oa=new Ta(new Array(0),ma,0,19,7)})(),Ka=!0),t.l_desc=new Ba(t.dyn_ltree,Ia),t.d_desc=new Ba(t.dyn_dtree,ka),t.bl_desc=new Ba(t.bl_tree,Oa),t.bi_buf=0,t.bi_valid=0,La(t)},_tr_stored_block:za,_tr_flush_block:(t,e,n,r)=>{let i,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),qa(t,t.l_desc),qa(t,t.d_desc),o=(t=>{let e;for(Ha(t,t.dyn_ltree,t.l_desc.max_code),Ha(t,t.dyn_dtree,t.d_desc.max_code),qa(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*wa[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?za(t,e,n,r):4===t.strategy||s===i?(Na(t,2+(r?1:0),3),Va(t,ba,_a)):(Na(t,4+(r?1:0),3),((t,e,n,r)=>{let i;for(Na(t,e-257,5),Na(t,n-1,5),Na(t,r-4,4),i=0;i<r;i++)Na(t,t.bl_tree[2*wa[i]+1],3);ja(t,t.dyn_ltree,e-1),ja(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Va(t,t.dyn_ltree,t.dyn_dtree)),La(t),r&&Ua(t)},_tr_tally:(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(Ea[n]+256+1)]++,t.dyn_dtree[2*Ca(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{Na(t,2,3),Ra(t,256,ba),(t=>{16===t.bi_valid?(xa(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},Ga=(t,e,n,r)=>{let i=65535&t|0,s=t>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+e[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const Ya=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());var Wa=(t,e,n,r)=>{const i=Ya,s=r+n;t^=-1;for(let n=r;n<s;n++)t=t>>>8^i[255&(t^e[n])];return-1^t},Za={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ja,_tr_stored_block:Qa,_tr_flush_block:tc,_tr_tally:ec,_tr_align:nc}=$a,{Z_NO_FLUSH:rc,Z_PARTIAL_FLUSH:ic,Z_FULL_FLUSH:sc,Z_FINISH:oc,Z_BLOCK:ac,Z_OK:cc,Z_STREAM_END:uc,Z_STREAM_ERROR:lc,Z_DATA_ERROR:dc,Z_BUF_ERROR:hc,Z_DEFAULT_COMPRESSION:fc,Z_FILTERED:pc,Z_HUFFMAN_ONLY:gc,Z_RLE:yc,Z_FIXED:mc,Z_DEFAULT_STRATEGY:wc,Z_UNKNOWN:bc,Z_DEFLATED:_c}=Xa,vc=258,Ec=262,Ac=42,Sc=113,Tc=666,Ic=(t,e)=>(t.msg=Za[e],e),kc=t=>2*t-(t>4?9:0),Oc=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Bc=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do{n=t.head[--r],t.head[r]=n>=i?n-i:0}while(--e);e=i,r=e;do{n=t.prev[--r],t.prev[r]=n>=i?n-i:0}while(--e)};let Cc=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const xc=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Nc=(t,e)=>{tc(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,xc(t.strm)},Rc=(t,e)=>{t.pending_buf[t.pending++]=e},Pc=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Dc=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),1===t.state.wrap?t.adler=Ga(t.adler,e,i,n):2===t.state.wrap&&(t.adler=Wa(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},Lc=(t,e)=>{let n,r,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-Ec?t.strstart-(t.w_size-Ec):0,u=t.window,l=t.w_mask,d=t.prev,h=t.strstart+vc;let f=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+o]===p&&u[n+o-1]===f&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<h);if(r=vc-(h-s),s=h-vc,r>o){if(t.match_start=e,o=r,r>=a)break;f=u[s+o-1],p=u[s+o]}}}while((e=d[e&l])>c&&0!=--i);return o<=t.lookahead?o:t.lookahead},Uc=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Ec)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Bc(t),r+=e),0===t.strm.avail_in)break;if(n=Dc(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Cc(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Cc(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Ec&&0!==t.strm.avail_in)},Mc=(t,e)=>{let n,r,i,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,o=0,a=t.strm.avail_in;do{if(n=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i)break;if(i=t.strm.avail_out-i,r=t.strstart-t.block_start,n>r+t.strm.avail_in&&(n=r+t.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&e!==oc||e===rc||n!==r+t.strm.avail_in))break;o=e===oc&&n===r+t.strm.avail_in?1:0,Qa(t,0,0,o),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,xc(t.strm),r&&(r>n&&(r=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,n-=r),n&&(Dc(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===o);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?4:e!==rc&&e!==oc&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(Dc(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,s=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=s||(r||e===oc)&&e!==rc&&0===t.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=e===oc&&0===t.strm.avail_in&&n===r?1:0,Qa(t,t.block_start,n,o),t.block_start+=n,xc(t.strm)),o?3:1)},Fc=(t,e)=>{let n,r;for(;;){if(t.lookahead<Ec){if(Uc(t),t.lookahead<Ec&&e===rc)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Cc(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Ec&&(t.match_length=Lc(t,n)),t.match_length>=3)if(r=ec(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Cc(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Cc(t,t.ins_h,t.window[t.strstart+1]);else r=ec(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Nc(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===oc?(Nc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Nc(t,!1),0===t.strm.avail_out)?1:2},Vc=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<Ec){if(Uc(t),t.lookahead<Ec&&e===rc)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=Cc(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Ec&&(t.match_length=Lc(t,n),t.match_length<=5&&(t.strategy===pc||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=ec(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=Cc(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Nc(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=ec(t,0,t.window[t.strstart-1]),r&&Nc(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=ec(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===oc?(Nc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Nc(t,!1),0===t.strm.avail_out)?1:2};function qc(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const Hc=[new qc(0,0,0,0,Mc),new qc(4,4,8,4,Fc),new qc(4,5,16,8,Fc),new qc(4,6,32,32,Fc),new qc(4,4,16,16,Vc),new qc(8,16,32,32,Vc),new qc(8,16,128,128,Vc),new qc(8,32,128,256,Vc),new qc(32,128,258,1024,Vc),new qc(32,258,258,4096,Vc)];function jc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_c,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Oc(this.dyn_ltree),Oc(this.dyn_dtree),Oc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Oc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Oc(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Kc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Ac&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Sc&&e.status!==Tc?1:0},zc=t=>{if(Kc(t))return Ic(t,lc);t.total_in=t.total_out=0,t.data_type=bc;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Ac:Sc,t.adler=2===e.wrap?0:1,e.last_flush=-2,Ja(e),cc},$c=t=>{const e=zc(t);var n;return e===cc&&((n=t.state).window_size=2*n.w_size,Oc(n.head),n.max_lazy_match=Hc[n.level].max_lazy,n.good_match=Hc[n.level].good_length,n.nice_match=Hc[n.level].nice_length,n.max_chain_length=Hc[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},Gc=(t,e,n,r,i,s)=>{if(!t)return lc;let o=1;if(e===fc&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==_c||r<8||r>15||e<0||e>9||s<0||s>mc||8===r&&1!==o)return Ic(t,lc);8===r&&(r=9);const a=new jc;return t.state=a,a.strm=t,a.status=Ac,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=s,a.method=n,$c(t)};var Yc={deflateInit:(t,e)=>Gc(t,e,_c,15,8,wc),deflateInit2:Gc,deflateReset:$c,deflateResetKeep:zc,deflateSetHeader:(t,e)=>Kc(t)||2!==t.state.wrap?lc:(t.state.gzhead=e,cc),deflate:(t,e)=>{if(Kc(t)||e>ac||e<0)return t?Ic(t,lc):lc;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===Tc&&e!==oc)return Ic(t,0===t.avail_out?hc:lc);const r=n.last_flush;if(n.last_flush=e,0!==n.pending){if(xc(t),0===t.avail_out)return n.last_flush=-1,cc}else if(0===t.avail_in&&kc(e)<=kc(r)&&e!==oc)return Ic(t,hc);if(n.status===Tc&&0!==t.avail_in)return Ic(t,hc);if(n.status===Ac&&0===n.wrap&&(n.status=Sc),n.status===Ac){let e=_c+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=gc||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=r<<6,0!==n.strstart&&(e|=32),e+=31-e%31,Pc(n,e),0!==n.strstart&&(Pc(n,t.adler>>>16),Pc(n,65535&t.adler)),t.adler=1,n.status=Sc,xc(t),0!==n.pending)return n.last_flush=-1,cc}if(57===n.status)if(t.adler=0,Rc(n,31),Rc(n,139),Rc(n,8),n.gzhead)Rc(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Rc(n,255&n.gzhead.time),Rc(n,n.gzhead.time>>8&255),Rc(n,n.gzhead.time>>16&255),Rc(n,n.gzhead.time>>24&255),Rc(n,9===n.level?2:n.strategy>=gc||n.level<2?4:0),Rc(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Rc(n,255&n.gzhead.extra.length),Rc(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Wa(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Rc(n,0),Rc(n,0),Rc(n,0),Rc(n,0),Rc(n,0),Rc(n,9===n.level?2:n.strategy>=gc||n.level<2?4:0),Rc(n,3),n.status=Sc,xc(t),0!==n.pending)return n.last_flush=-1,cc;if(69===n.status){if(n.gzhead.extra){let e=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=i,xc(t),0!==n.pending)return n.last_flush=-1,cc;e=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>e&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-r,r)),xc(t),0!==n.pending)return n.last_flush=-1,cc;r=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Rc(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-r,r)),xc(t),0!==n.pending)return n.last_flush=-1,cc;r=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Rc(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>r&&(t.adler=Wa(t.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(xc(t),0!==n.pending))return n.last_flush=-1,cc;Rc(n,255&t.adler),Rc(n,t.adler>>8&255),t.adler=0}if(n.status=Sc,xc(t),0!==n.pending)return n.last_flush=-1,cc}if(0!==t.avail_in||0!==n.lookahead||e!==rc&&n.status!==Tc){let r=0===n.level?Mc(n,e):n.strategy===gc?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Uc(t),0===t.lookahead)){if(e===rc)return 1;break}if(t.match_length=0,n=ec(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Nc(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===oc?(Nc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Nc(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===yc?((t,e)=>{let n,r,i,s;const o=t.window;for(;;){if(t.lookahead<=vc){if(Uc(t),t.lookahead<=vc&&e===rc)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+vc;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=vc-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=ec(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ec(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Nc(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===oc?(Nc(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Nc(t,!1),0===t.strm.avail_out)?1:2})(n,e):Hc[n.level].func(n,e);if(3!==r&&4!==r||(n.status=Tc),1===r||3===r)return 0===t.avail_out&&(n.last_flush=-1),cc;if(2===r&&(e===ic?nc(n):e!==ac&&(Qa(n,0,0,!1),e===sc&&(Oc(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),xc(t),0===t.avail_out))return n.last_flush=-1,cc}return e!==oc?cc:n.wrap<=0?uc:(2===n.wrap?(Rc(n,255&t.adler),Rc(n,t.adler>>8&255),Rc(n,t.adler>>16&255),Rc(n,t.adler>>24&255),Rc(n,255&t.total_in),Rc(n,t.total_in>>8&255),Rc(n,t.total_in>>16&255),Rc(n,t.total_in>>24&255)):(Pc(n,t.adler>>>16),Pc(n,65535&t.adler)),xc(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?cc:uc)},deflateEnd:t=>{if(Kc(t))return lc;const e=t.state.status;return t.state=null,e===Sc?Ic(t,dc):cc},deflateSetDictionary:(t,e)=>{let n=e.length;if(Kc(t))return lc;const r=t.state,i=r.wrap;if(2===i||1===i&&r.status!==Ac||r.lookahead)return lc;if(1===i&&(t.adler=Ga(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Oc(r.head),r.strstart=0,r.block_start=0,r.insert=0);let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0),e=t,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Uc(r);r.lookahead>=3;){let t=r.strstart,e=r.lookahead-2;do{r.ins_h=Cc(r,r.ins_h,r.window[t+3-1]),r.prev[t&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=t,t++}while(--e);r.strstart=t,r.lookahead=2,Uc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,cc},deflateInfo:"pako deflate (from Nodeca project)"};const Wc=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Zc={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)Wc(n,e)&&(t[e]=n[e])}}return t},flattenChunks:t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,r=0,i=t.length;e<i;e++){let i=t[e];n.set(i,r),r+=i.length}return n}};let Xc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Xc=!1}const Jc=new Uint8Array(256);for(let t=0;t<256;t++)Jc[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Jc[254]=Jc[254]=1;var Qc={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=t.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},buf2string:(t,e)=>{const n=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let e=t[r++];if(e<128){s[i++]=e;continue}let o=Jc[e];if(o>4)s[i++]=65533,r+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&r<n;)e=e<<6|63&t[r++],o--;o>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Xc)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n})(s,i)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let n=e-1;for(;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Jc[t[n]]>e?n:e}},tu=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const eu=Object.prototype.toString,{Z_NO_FLUSH:nu,Z_SYNC_FLUSH:ru,Z_FULL_FLUSH:iu,Z_FINISH:su,Z_OK:ou,Z_STREAM_END:au,Z_DEFAULT_COMPRESSION:cu,Z_DEFAULT_STRATEGY:uu,Z_DEFLATED:lu}=Xa;function du(t){this.options=Zc.assign({level:cu,method:lu,chunkSize:16384,windowBits:15,memLevel:8,strategy:uu},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tu,this.strm.avail_out=0;let n=Yc.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==ou)throw new Error(Za[n]);if(e.header&&Yc.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Qc.string2buf(e.dictionary):"[object ArrayBuffer]"===eu.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Yc.deflateSetDictionary(this.strm,t),n!==ou)throw new Error(Za[n]);this._dict_set=!0}}function hu(t,e){const n=new du(e);if(n.push(t,!0),n.err)throw n.msg||Za[n.err];return n.result}du.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?su:nu,"string"==typeof t?n.input=Qc.string2buf(t):"[object ArrayBuffer]"===eu.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===ru||s===iu)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Yc.deflate(n,s),i===au)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Yc.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ou;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},du.prototype.onData=function(t){this.chunks.push(t)},du.prototype.onEnd=function(t){t===ou&&(this.result=Zc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var fu={Deflate:du,deflate:hu,deflateRaw:function(t,e){return(e=e||{}).raw=!0,hu(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,hu(t,e)},constants:Xa};const pu=16209;var gu=function(t,e){let n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,w,b,_,v,E,A,S,T;const I=t.state;n=t.next_in,S=t.input,r=n+(t.avail_in-5),i=t.next_out,T=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),a=I.dmax,c=I.wsize,u=I.whave,l=I.wnext,d=I.window,h=I.hold,f=I.bits,p=I.lencode,g=I.distcode,y=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;t:do{f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),w=p[h&y];e:for(;;){if(b=w>>>24,h>>>=b,f-=b,b=w>>>16&255,0===b)T[i++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=p[(65535&w)+(h&(1<<b)-1)];continue e}if(32&b){I.mode=16191;break t}t.msg="invalid literal/length code",I.mode=pu;break t}_=65535&w,b&=15,b&&(f<b&&(h+=S[n++]<<f,f+=8),_+=h&(1<<b)-1,h>>>=b,f-=b),f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),w=g[h&m];n:for(;;){if(b=w>>>24,h>>>=b,f-=b,b=w>>>16&255,!(16&b)){if(0==(64&b)){w=g[(65535&w)+(h&(1<<b)-1)];continue n}t.msg="invalid distance code",I.mode=pu;break t}if(v=65535&w,b&=15,f<b&&(h+=S[n++]<<f,f+=8,f<b&&(h+=S[n++]<<f,f+=8)),v+=h&(1<<b)-1,v>a){t.msg="invalid distance too far back",I.mode=pu;break t}if(h>>>=b,f-=b,b=i-s,v>b){if(b=v-b,b>u&&I.sane){t.msg="invalid distance too far back",I.mode=pu;break t}if(E=0,A=d,0===l){if(E+=c-b,b<_){_-=b;do{T[i++]=d[E++]}while(--b);E=i-v,A=T}}else if(l<b){if(E+=c+l-b,b-=l,b<_){_-=b;do{T[i++]=d[E++]}while(--b);if(E=0,l<_){b=l,_-=b;do{T[i++]=d[E++]}while(--b);E=i-v,A=T}}}else if(E+=l-b,b<_){_-=b;do{T[i++]=d[E++]}while(--b);E=i-v,A=T}for(;_>2;)T[i++]=A[E++],T[i++]=A[E++],T[i++]=A[E++],_-=3;_&&(T[i++]=A[E++],_>1&&(T[i++]=A[E++]))}else{E=i-v;do{T[i++]=T[E++],T[i++]=T[E++],T[i++]=T[E++],_-=3}while(_>2);_&&(T[i++]=T[E++],_>1&&(T[i++]=T[E++]))}break}}break}}while(n<r&&i<o);_=f>>3,n-=_,f-=_<<3,h&=(1<<f)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=i<o?o-i+257:257-(i-o),I.hold=h,I.bits=f};const yu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wu=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bu=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var _u=(t,e,n,r,i,s,o,a)=>{const c=a.bits;let u,l,d,h,f,p,g=0,y=0,m=0,w=0,b=0,_=0,v=0,E=0,A=0,S=0,T=null;const I=new Uint16Array(16),k=new Uint16Array(16);let O,B,C,x=null;for(g=0;g<=15;g++)I[g]=0;for(y=0;y<r;y++)I[e[n+y]]++;for(b=c,w=15;w>=1&&0===I[w];w--);if(b>w&&(b=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<w&&0===I[m];m++);for(b<m&&(b=m),E=1,g=1;g<=15;g++)if(E<<=1,E-=I[g],E<0)return-1;if(E>0&&(0===t||1!==w))return-1;for(k[1]=0,g=1;g<15;g++)k[g+1]=k[g]+I[g];for(y=0;y<r;y++)0!==e[n+y]&&(o[k[e[n+y]]++]=y);if(0===t?(T=x=o,p=20):1===t?(T=yu,x=mu,p=257):(T=wu,x=bu,p=0),S=0,y=0,g=m,f=s,_=b,v=0,d=-1,A=1<<b,h=A-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){O=g-v,o[y]+1<p?(B=0,C=o[y]):o[y]>=p?(B=x[o[y]-p],C=T[o[y]-p]):(B=96,C=0),u=1<<g-v,l=1<<_,m=l;do{l-=u,i[f+(S>>v)+l]=O<<24|B<<16|C|0}while(0!==l);for(u=1<<g-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,y++,0==--I[g]){if(g===w)break;g=e[n+o[y]]}if(g>b&&(S&h)!==d){for(0===v&&(v=b),f+=m,_=g-v,E=1<<_;_+v<w&&(E-=I[_+v],!(E<=0));)_++,E<<=1;if(A+=1<<_,1===t&&A>852||2===t&&A>592)return 1;d=S&h,i[d]=b<<24|_<<16|f-s|0}}return 0!==S&&(i[f+S]=g-v<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:vu,Z_BLOCK:Eu,Z_TREES:Au,Z_OK:Su,Z_STREAM_END:Tu,Z_NEED_DICT:Iu,Z_STREAM_ERROR:ku,Z_DATA_ERROR:Ou,Z_MEM_ERROR:Bu,Z_BUF_ERROR:Cu,Z_DEFLATED:xu}=Xa,Nu=16180,Ru=16190,Pu=16191,Du=16192,Lu=16194,Uu=16199,Mu=16200,Fu=16206,Vu=16209,qu=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Hu(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ju=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Nu||e.mode>16211?1:0},Ku=t=>{if(ju(t))return ku;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Nu,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Su},zu=t=>{if(ju(t))return ku;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ku(t)},$u=(t,e)=>{let n;if(ju(t))return ku;const r=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?ku:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,zu(t))},Gu=(t,e)=>{if(!t)return ku;const n=new Hu;t.state=n,n.strm=t,n.window=null,n.mode=Nu;const r=$u(t,e);return r!==Su&&(t.state=null),r};let Yu,Wu,Zu=!0;const Xu=t=>{if(Zu){Yu=new Int32Array(512),Wu=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_u(1,t.lens,0,288,Yu,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_u(2,t.lens,0,32,Wu,0,t.work,{bits:5}),Zu=!1}t.lencode=Yu,t.lenbits=9,t.distcode=Wu,t.distbits=5},Ju=(t,e,n,r)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Qu={inflateReset:zu,inflateReset2:$u,inflateResetKeep:Ku,inflateInit:t=>Gu(t,15),inflateInit2:Gu,inflate:(t,e)=>{let n,r,i,s,o,a,c,u,l,d,h,f,p,g,y,m,w,b,_,v,E,A,S=0;const T=new Uint8Array(4);let I,k;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ju(t)||!t.output||!t.input&&0!==t.avail_in)return ku;n=t.state,n.mode===Pu&&(n.mode=Du),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,l=n.bits,d=a,h=c,A=Su;t:for(;;)switch(n.mode){case Nu:if(0===n.wrap){n.mode=Du;break}for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&u,T[1]=u>>>8&255,n.check=Wa(n.check,T,2,0),u=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Vu;break}if((15&u)!==xu){t.msg="unknown compression method",n.mode=Vu;break}if(u>>>=4,l-=4,E=8+(15&u),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){t.msg="invalid window size",n.mode=Vu;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&u?16189:Pu,u=0,l=0;break;case 16181:for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(n.flags=u,(255&n.flags)!==xu){t.msg="unknown compression method",n.mode=Vu;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Vu;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Wa(n.check,T,2,0)),u=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=Wa(n.check,T,4,0)),u=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Wa(n.check,T,2,0)),u=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Wa(n.check,T,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),E)),512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break t;f=0;do{E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,r,f,s)),a-=f,s+=f,E)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break t;f=0;do{E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,r,f,s)),a-=f,s+=f,E)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(4&n.wrap&&u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Vu;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Pu;break;case 16189:for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}t.adler=n.check=qu(u),u=0,l=0,n.mode=Ru;case Ru:if(0===n.havedict)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,Iu;t.adler=n.check=1,n.mode=Pu;case Pu:if(e===Eu||e===Au)break t;case Du:if(n.last){u>>>=7&l,l-=7&l,n.mode=Fu;break}for(;l<3;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}switch(n.last=1&u,u>>>=1,l-=1,3&u){case 0:n.mode=16193;break;case 1:if(Xu(n),n.mode=Uu,e===Au){u>>>=2,l-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=Vu}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Vu;break}if(n.length=65535&u,u=0,l=0,n.mode=Lu,e===Au)break t;case Lu:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break t;i.set(r.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,n.length-=f;break}n.mode=Pu;break;case 16196:for(;l<14;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Vu;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.lens[O[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},A=_u(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid code lengths set",n.mode=Vu;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[u&(1<<n.lenbits)-1],y=S>>>24,m=S>>>16&255,w=65535&S,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(w<16)u>>>=y,l-=y,n.lens[n.have++]=w;else{if(16===w){for(k=y+2;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(u>>>=y,l-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=Vu;break}E=n.lens[n.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===w){for(k=y+3;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=y,l-=y,E=0,f=3+(7&u),u>>>=3,l-=3}else{for(k=y+7;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=y,l-=y,E=0,f=11+(127&u),u>>>=7,l-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Vu;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===Vu)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Vu;break}if(n.lenbits=9,I={bits:n.lenbits},A=_u(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,A){t.msg="invalid literal/lengths set",n.mode=Vu;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},A=_u(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,A){t.msg="invalid distances set",n.mode=Vu;break}if(n.mode=Uu,e===Au)break t;case Uu:n.mode=Mu;case Mu:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,gu(t,h),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,l=n.bits,n.mode===Pu&&(n.back=-1);break}for(n.back=0;S=n.lencode[u&(1<<n.lenbits)-1],y=S>>>24,m=S>>>16&255,w=65535&S,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(m&&0==(240&m)){for(b=y,_=m,v=w;S=n.lencode[v+((u&(1<<b+_)-1)>>b)],y=S>>>24,m=S>>>16&255,w=65535&S,!(b+y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=y,l-=y,n.back+=y,n.length=w,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Pu;break}if(64&m){t.msg="invalid literal/length code",n.mode=Vu;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(k=n.extra;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[u&(1<<n.distbits)-1],y=S>>>24,m=S>>>16&255,w=65535&S,!(y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(0==(240&m)){for(b=y,_=m,v=w;S=n.distcode[v+((u&(1<<b+_)-1)>>b)],y=S>>>24,m=S>>>16&255,w=65535&S,!(b+y<=l);){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=y,l-=y,n.back+=y,64&m){t.msg="invalid distance code",n.mode=Vu;break}n.offset=w,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(k=n.extra;l<k;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Vu;break}n.mode=16204;case 16204:if(0===c)break t;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Vu;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=i,p=o-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[o++]=g[p++]}while(--f);0===n.length&&(n.mode=Mu);break;case 16205:if(0===c)break t;i[o++]=n.length,c--,n.mode=Mu;break;case Fu:if(n.wrap){for(;l<32;){if(0===a)break t;a--,u|=r[s++]<<l,l+=8}if(h-=c,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?Wa(n.check,i,h,o-h):Ga(n.check,i,h,o-h)),h=c,4&n.wrap&&(n.flags?u:qu(u))!==n.check){t.msg="incorrect data check",n.mode=Vu;break}u=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break t;a--,u+=r[s++]<<l,l+=8}if(4&n.wrap&&u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Vu;break}u=0,l=0}n.mode=16208;case 16208:A=Tu;break t;case Vu:A=Ou;break t;case 16210:return Bu;default:return ku}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=l,(n.wsize||h!==t.avail_out&&n.mode<Vu&&(n.mode<Fu||e!==vu))&&Ju(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,4&n.wrap&&h&&(t.adler=n.check=n.flags?Wa(n.check,i,h,t.next_out-h):Ga(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Pu?128:0)+(n.mode===Uu||n.mode===Lu?256:0),(0===d&&0===h||e===vu)&&A===Su&&(A=Cu),A},inflateEnd:t=>{if(ju(t))return ku;let e=t.state;return e.window&&(e.window=null),t.state=null,Su},inflateGetHeader:(t,e)=>{if(ju(t))return ku;const n=t.state;return 0==(2&n.wrap)?ku:(n.head=e,e.done=!1,Su)},inflateSetDictionary:(t,e)=>{const n=e.length;let r,i,s;return ju(t)?ku:(r=t.state,0!==r.wrap&&r.mode!==Ru?ku:r.mode===Ru&&(i=1,i=Ga(i,e,n,0),i!==r.check)?Ou:(s=Ju(t,e,n,n),s?(r.mode=16210,Bu):(r.havedict=1,Su)))},inflateInfo:"pako inflate (from Nodeca project)"},tl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const el=Object.prototype.toString,{Z_NO_FLUSH:nl,Z_FINISH:rl,Z_OK:il,Z_STREAM_END:sl,Z_NEED_DICT:ol,Z_STREAM_ERROR:al,Z_DATA_ERROR:cl,Z_MEM_ERROR:ul}=Xa;function ll(t){this.options=Zc.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tu,this.strm.avail_out=0;let n=Qu.inflateInit2(this.strm,e.windowBits);if(n!==il)throw new Error(Za[n]);if(this.header=new tl,Qu.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Qc.string2buf(e.dictionary):"[object ArrayBuffer]"===el.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Qu.inflateSetDictionary(this.strm,e.dictionary),n!==il)))throw new Error(Za[n])}function dl(t,e){const n=new ll(e);if(n.push(t),n.err)throw n.msg||Za[n.err];return n.result}ll.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?rl:nl,"[object ArrayBuffer]"===el.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Qu.inflate(n,o),s===ol&&i&&(s=Qu.inflateSetDictionary(n,i),s===il?s=Qu.inflate(n,o):s===cl&&(s=ol));n.avail_in>0&&s===sl&&n.state.wrap>0&&0!==t[n.next_in];)Qu.inflateReset(n),s=Qu.inflate(n,o);switch(s){case al:case cl:case ol:case ul:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===sl))if("string"===this.options.to){let t=Qc.utf8border(n.output,n.next_out),e=n.next_out-t,i=Qc.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==il||0!==a){if(s===sl)return s=Qu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ll.prototype.onData=function(t){this.chunks.push(t)},ll.prototype.onEnd=function(t){t===il&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Zc.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var hl={Inflate:ll,inflate:dl,inflateRaw:function(t,e){return(e=e||{}).raw=!0,dl(t,e)},ungzip:dl,constants:Xa};const{Deflate:fl,deflate:pl,deflateRaw:gl,gzip:yl}=fu,{Inflate:ml,inflate:wl,inflateRaw:bl,ungzip:_l}=hl;var vl=yl,El=_l;function Al(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Sl(t,...e){if(!((n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Tl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Il="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,kl=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ol=(t,e)=>t<<32-e|t>>>e;function Bl(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),Sl(t),t}class Cl{clone(){return this._cloneInto()}}function xl(t){const e=e=>t().update(Bl(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Nl(t=32){if(Il&&"function"==typeof Il.getRandomValues)return Il.getRandomValues(new Uint8Array(t));if(Il&&"function"==typeof Il.randomBytes)return Il.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Rl=(t,e,n)=>t&e^t&n^e&n;class Pl extends Cl{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kl(this.buffer)}update(t){Tl(this);const{view:e,buffer:n,blockLen:r}=this,i=(t=Bl(t)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=kl(t);for(;r<=i-s;s+=r)this.process(e,s)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Tl(this),function(t,e){Sl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let t=s;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=kl(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,u[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=s,r%e&&t.buffer.set(n),t}}const Dl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ll=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ul=new Uint32Array(64);class Ml extends Pl{constructor(){super(64,32,8,!1),this.A=0|Ll[0],this.B=0|Ll[1],this.C=0|Ll[2],this.D=0|Ll[3],this.E=0|Ll[4],this.F=0|Ll[5],this.G=0|Ll[6],this.H=0|Ll[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)Ul[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=Ul[t-15],n=Ul[t-2],r=Ol(e,7)^Ol(e,18)^e>>>3,i=Ol(n,17)^Ol(n,19)^n>>>10;Ul[t]=i+Ul[t-7]+r+Ul[t-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(Ol(o,6)^Ol(o,11)^Ol(o,25))+((l=o)&a^~l&c)+Dl[t]+Ul[t]|0,d=(Ol(n,2)^Ol(n,13)^Ol(n,22))+Rl(n,r,i)|0;u=c,c=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+d|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Ul.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Fl=xl((()=>new Ml));class Vl extends Cl{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Al(t.outputLen),Al(t.blockLen)}(t);const n=Bl(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return Tl(this),this.iHash.update(t),this}digestInto(t){Tl(this),Sl(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ql=(t,e,n)=>new Vl(t,e).update(n).digest();function Hl(t){return{hash:t,hmac:(e,...n)=>ql(t,e,function(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];Sl(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}(...n)),randomBytes:Nl}}ql.create=(t,e)=>new Vl(t,e);const jl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Kl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zl=BigInt(1),$l=BigInt(2),Gl=(t,e)=>(t+e/$l)/e;const Yl=Ro(jl,void 0,void 0,{sqrt:function(t){const e=jl,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=ko(l,n,e)*l%e,h=ko(d,n,e)*l%e,f=ko(h,$l,e)*u%e,p=ko(f,i,e)*f%e,g=ko(p,s,e)*p%e,y=ko(g,a,e)*g%e,m=ko(y,c,e)*y%e,w=ko(m,a,e)*g%e,b=ko(w,n,e)*l%e,_=ko(b,o,e)*p%e,v=ko(_,r,e)*u%e,E=ko(v,$l,e);if(!Yl.eql(Yl.sqr(E),t))throw new Error("Cannot find square root");return E}}),Wl=function(t,e){const n=e=>ia({...t,...Hl(e)});return Object.freeze({...n(e),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Yl,n:Kl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Kl,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Gl(s*t,e),c=Gl(-r*t,e);let u=To(t-a*n-c*i,e),l=To(-a*r-c*s,e);const d=u>o,h=l>o;if(d&&(u=e-u),h&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},Fl);BigInt(0),Wl.ProjectivePoint;const Zl=(t,e,n=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let t of n)delete r[t];Object.defineProperties(t,r)},Xl=(t,e=[t])=>{const n=Object.getPrototypeOf(t);return null===n?e:Xl(n,[...e,n])},Jl=(t,e,n=[])=>{var r;const i=null!==(r=((...t)=>{if(0===t.length)return;let e;const n=t.map((t=>Xl(t)));for(;n.every((t=>t.length>0));){const t=n.map((t=>t.pop())),r=t[0];if(!t.every((t=>t===r)))break;e=r}return e})(...t))&&void 0!==r?r:Object.prototype,s=Object.create(i),o=Xl(i);for(let e of t){let t=Xl(e);for(let e=t.length-1;e>=0;e--){let r=t[e];-1===o.indexOf(r)&&(Zl(s,r,["constructor",...n]),o.push(r))}}return s.constructor=e,s},Ql=t=>t.filter(((e,n)=>t.indexOf(e)==n)),td=new WeakMap,ed=t=>td.get(t),nd=(t,e)=>{var n,r;const i=Ql([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),s={};for(let o of i)s[o]=Ql([...null!==(n=null==t?void 0:t[o])&&void 0!==n?n:[],...null!==(r=null==e?void 0:e[o])&&void 0!==r?r:[]]);return s},rd=(t,e)=>{var n,r,i,s;return{property:nd(null!==(n=null==t?void 0:t.property)&&void 0!==n?n:{},null!==(r=null==e?void 0:e.property)&&void 0!==r?r:{}),method:nd(null!==(i=null==t?void 0:t.method)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.method)&&void 0!==s?s:{})}},id=(t,e)=>{var n,r,i,s,o,a;return{class:Ql([...null!==(n=null==t?void 0:t.class)&&void 0!==n?n:[],...null!==(r=null==e?void 0:e.class)&&void 0!==r?r:[]]),static:rd(null!==(i=null==t?void 0:t.static)&&void 0!==i?i:{},null!==(s=null==e?void 0:e.static)&&void 0!==s?s:{}),instance:rd(null!==(o=null==t?void 0:t.instance)&&void 0!==o?o:{},null!==(a=null==e?void 0:e.instance)&&void 0!==a?a:{})}},sd=new Map;function od(...t){var e,n,r;const i=t.map((t=>t.prototype));function s(...e){for(const n of t)Zl(this,new n(...e))}s.prototype=Jl(i,s),Object.setPrototypeOf(s,Jl(t,null,["prototype"]));let o=s;{const i=((...t)=>{const e=((...t)=>{var e;const n=new Set,r=new Set([...t]);for(;r.size>0;)for(let t of r){const i=[...Xl(t.prototype).map((t=>t.constructor)),...null!==(e=ed(t))&&void 0!==e?e:[]].filter((t=>!n.has(t)));for(let t of i)r.add(t);n.add(t),r.delete(t)}return[...n]})(...t).map((t=>sd.get(t))).filter((t=>!!t));return 0==e.length?{}:1==e.length?e[0]:e.reduce(((t,e)=>id(t,e)))})(...t);for(let t of null!==(e=null==i?void 0:i.class)&&void 0!==e?e:[]){const e=t(o);e&&(o=e)}ad(null!==(n=null==i?void 0:i.static)&&void 0!==n?n:{},o),ad(null!==(r=null==i?void 0:i.instance)&&void 0!==r?r:{},o.prototype)}var a,c;return a=o,c=t,td.set(a,c),o}const ad=(t,e)=>{const n=t.property,r=t.method;if(n)for(let t in n)for(let r of n[t])r(e,t);if(r)for(let t in r)for(let n of r[t])n(e,t,Object.getOwnPropertyDescriptor(e,t))};var cd=n(48834).Buffer,ud=Object.defineProperty,ld=Object.getOwnPropertyDescriptor,dd=Object.getOwnPropertyNames,hd=Object.prototype.hasOwnProperty,fd=(t,e)=>{for(var n in e)ud(t,n,{get:e[n],enumerable:!0})},pd=(t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of dd(e))hd.call(t,i)||i===n||ud(t,i,{get:()=>e[i],enumerable:!(r=ld(e,i))||r.enumerable});return t},gd=(t,e,n)=>(pd(t,e,"default"),n&&pd(n,e,"default"));fd({},{ADDR_BOUND:()=>Yd,API_VERSION:()=>zd,BaseUrl:()=>gh,DEFAULT_GLOBAL_CONFIG:()=>_h,HARDENING_4BYTES:()=>ph,HARDENING_BYTE:()=>fh,IS_BROWSER:()=>bd,LegacyUDC:()=>ch,MASK_250:()=>jd,MASK_31:()=>Kd,MAX_STORAGE_ITEM_SIZE:()=>Gd,NetworkName:()=>yh,OutsideExecutionCallerAny:()=>lh,PAYMASTER_RPC_NODES:()=>Eh,PRIME:()=>$d,RANGE_FELT:()=>Zd,RANGE_I128:()=>ah,RANGE_I16:()=>ih,RANGE_I32:()=>sh,RANGE_I64:()=>oh,RANGE_I8:()=>rh,RANGE_U128:()=>nh,RANGE_U16:()=>Jd,RANGE_U32:()=>Qd,RANGE_U64:()=>th,RANGE_U8:()=>Xd,RANGE_U96:()=>eh,RPC_DEFAULT_NODES:()=>vh,SNIP9_V1_INTERFACE_ID:()=>dh,SNIP9_V2_INTERFACE_ID:()=>hh,SN_VERSION_IMPLEMENTING_BLAKE_FOR_COMPILED_CLASS:()=>Sh,SYSTEM_MESSAGES:()=>Ah,StarknetChainId:()=>mh,SupportedRpcVersion:()=>bh,TEXT_TO_FELT_MAX_LEN:()=>qd,TransactionHashPrefix:()=>wh,UDC:()=>uh,ZERO:()=>Hd});var yd={};fd(yd,{JRPC:()=>md,PAYMASTER_API:()=>i,RPCSPEC08:()=>s,RPCSPEC09:()=>l});var md={},wd={};gd(wd,l),gd(yd,wd),fd({},{IS_BROWSER:()=>bd,addHexPrefix:()=>Bd,arrayBufferToString:()=>vd,atobUniversal:()=>Td,bigIntToUint8Array:()=>Fd,btoaUniversal:()=>Id,buf2hex:()=>kd,calcByteLength:()=>xd,concatenateArrayBuffer:()=>Dd,hexStringToUint8Array:()=>Ld,padLeft:()=>Cd,pascalToSnake:()=>Pd,removeHexPrefix:()=>Od,sanitizeBytes:()=>Nd,sanitizeHex:()=>Rd,stringToUint8Array:()=>Md,uint8ArrayToBigInt:()=>Vd,utf8ToArray:()=>Ad,utf8ToBigInt:()=>Sd,utf8ToUint8Array:()=>Ed});var bd="undefined"!=typeof window,_d="0";function vd(t){return new Uint8Array(t).reduce(((t,e)=>t+String.fromCharCode(e)),"")}function Ed(t){return(new TextEncoder).encode(t)}var Ad=Ed;function Sd(t){return Vd(Ed(t))}function Td(t){return ce.decode(t)}function Id(t){return ce.encode(new Uint8Array(t))}function kd(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"")}function Od(t){return t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t}function Bd(t){return`0x${Od(t)}`}function Cd(t,e,n=_d){return function(t,e,n,r=_d){const i=e-t.length;let s=t;if(i>0){const e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}function xd(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function Nd(t,e=8,n=_d){return Cd(t,xd(t,e),n)}function Rd(t){const e=Nd(Od(t),2);return e?Bd(e):e}var Pd=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function Dd(t){const e=t.reduce(((t,e)=>t+e.byteLength),0),n=new Uint8Array(e);let r=0;return t.forEach((t=>{n.set(t,r),r+=t.byteLength})),n}function Ld(t){if(!Ud(Bd(t)))throw new Error(`Invalid hex string: "${t}"`);const e=Od(Rd(t)),n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function Ud(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}function Md(t){return Ud(t)?Ld(t):function(t){return/^[0-9]+$/.test(t)}(t)?Fd(BigInt(t)):Ed(t)}function Fd(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(0n===t)return new Uint8Array([0]);let e=t.toString(16);e.length%2!=0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n}function Vd(t){if(!t||0===t.length)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var qd=31,Hd=0n,jd=2n**250n-1n,Kd=2n**31n-1n,zd=Hd,$d=2n**251n+17n*2n**192n+1n,Gd=256n,Yd=2n**251n-Gd,Wd=(t,e)=>({min:t,max:e}),Zd=Wd(Hd,$d-1n),Xd=Wd(Hd,2n**8n-1n),Jd=Wd(Hd,2n**16n-1n),Qd=Wd(Hd,2n**32n-1n),th=Wd(Hd,2n**64n-1n),eh=Wd(Hd,2n**96n-1n),nh=Wd(Hd,2n**128n-1n),rh=Wd(-(2n**7n),2n**7n-1n),ih=Wd(-(2n**15n),2n**15n-1n),sh=Wd(-(2n**31n),2n**31n-1n),oh=Wd(-(2n**63n),2n**63n-1n),ah=Wd(-(2n**127n),2n**127n-1n),ch={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},uh={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},lh="0x414e595f43414c4c4552",dh="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",hh="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",fh=128,ph=2147483648n,gh={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},yh={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},mh={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},wh={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},bh={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},_h={rpcVersion:"0.9.0",transactionVersion:yd.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0,blake:void 0},vh={SN_MAIN:["https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.g.alchemy.com/starknet/version/rpc/"]},Eh={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},Ah={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},Sh="0.14.1",Th=class t{static instance;config;constructor(){this.initialize()}initialize(){this.config={..._h}}static getInstance(){return t.instance||(t.instance=new t),t.instance}get(t,e){return this.config[t]??e}set(t,e){this.config[t]=e}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}}.getInstance(),Ih={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},kh=class t{static instance;config;constructor(){this.config=Th}static getInstance(){return t.instance||(t.instance=new t),t.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(t){const e=this.config.get("logLevel","INFO");return t<=Ih[e]}formatMessage(t){const{level:e,message:n,timestamp:r,data:i}=t;let s=`[${r}] ${e}: ${n}`;if(i)try{s+=`\n${JSON.stringify(i,null,2)}`}catch(t){s+=`\n[JSON.stringify Error/Circular]: ${t}`}return s}log(t,e,n){if(!this.shouldLog(Ih[t]))return;const r={level:t,message:e,timestamp:this.getTimestamp(),data:n},i=this.formatMessage(r);switch(t){case"DEBUG":console.debug(i);break;case"INFO":console.info(i);break;case"WARN":console.warn(i);break;case"ERROR":case"FATAL":console.error(i);break;case"OFF":break;default:console.log(i)}}debug(t,e){this.log("DEBUG",t,e)}info(t,e){this.log("INFO",t,e)}warn(t,e){this.log("WARN",t,e)}error(t,e){this.log("ERROR",t,e)}fatal(t,e){this.log("FATAL",t,e)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Ih).filter((t=>this.shouldLog(Ih[t])&&"OFF"!==t))}}.getInstance(),Oh={};fd(Oh,{RpcChannel:()=>pm});var{ETransactionVersion:Bh}=l,{ETransactionVersion2:Ch}=l,{ETransactionVersion3:xh}=l,{EDataAvailabilityMode:Nh}=s,{EDAMode:Rh}=s;function Ph(t){return"l1_data_gas"in t}var{ETransactionStatus:Dh}=s,{ETransactionExecutionStatus:Lh}=s,{ETransactionType:Uh}=l,{EBlockStatus:Mh}=l,{ETransactionFinalityStatus:Fh}=l,{ETransactionExecutionStatus:Vh}=l,{EBlockTag:qh}=l,Hh="DEPLOY",jh="INVOKE",Kh={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},zh={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},$h={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Gh="core::zeroable::NonZero::",Yh={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},Wh={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]};fd({},{parse:()=>Xh,parseAlwaysAsBig:()=>Jh,stringify:()=>Qh});var Zh=t=>{if(!ge(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},Xh=t=>Te(String(t),void 0,Zh),Jh=t=>Te(String(t),void 0,Ae),Qh=(t,e,n,r)=>en(t,e,n,r),tf=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise((t=>{this.delayPromiseResolve=t}))),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout((()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)}),this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:Qh(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const t=this.sendBatch(Object.values(i));Object.keys(i).forEach((e=>{this.batchPromises[e]=t}))}const s=await this.batchPromises[r];delete this.batchPromises[r];const o=s.find((t=>t.id===r));if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return o}};function ef(t,e){if(!t)throw new Error(e||"Assertion failure")}fd({},{addPercent:()=>Bf,assertInRange:()=>_f,bigNumberishArrayToDecimalStringArray:()=>vf,bigNumberishArrayToHexadecimalStringArray:()=>Ef,cleanHex:()=>yf,getDecimalString:()=>Sf,getHexString:()=>Tf,getHexStringArray:()=>If,getNext:()=>Nf,hexToBytes:()=>Of,hexToDecimalString:()=>bf,isBigNumberish:()=>xf,isHex:()=>lf,isHexString:()=>df,isStringWholeNumber:()=>Af,stringToSha256ToArrayBuff4:()=>Cf,toBigInt:()=>hf,toCairoBool:()=>kf,toHex:()=>pf,toHex64:()=>wf,toHexString:()=>gf,toStorageKey:()=>mf,tryToBigInt:()=>ff});var nf=t=>void 0===t||void 0===t;function rf(t){return"number"==typeof t}function sf(t){return"boolean"==typeof t}function of(t){return"bigint"==typeof t}function af(t){return"string"==typeof t}function cf(t){return void 0!==cd&&t instanceof cd}function uf(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}function lf(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var df=lf;function hf(t){return BigInt(t)}function ff(t){return t?BigInt(t):void 0}function pf(t){return Bd(hf(t).toString(16))}var gf=pf;function yf(t){return pf(t)}function mf(t){return Bd(hf(t).toString(16).padStart(64,"0"))}function wf(t){const e=Bd(hf(t).toString(16).padStart(64,"0"));if(66!==e.length)throw TypeError("number is too big for hex 0x(64) representation");return e}function bf(t){return BigInt(Bd(t)).toString(10)}function _f(t,e,n,r=""){const i=""===r?"invalid length":`invalid ${r} length`,s=BigInt(t),o=BigInt(e),a=BigInt(n);ef(s>=o&&s<=a,`Message not signable, ${i}.`)}function vf(t){return t.map((t=>hf(t).toString(10)))}function Ef(t){return t.map((t=>pf(t)))}function Af(t){return/^\d+$/.test(t)}function Sf(t){if(lf(t))return bf(t);if(Af(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Tf(t){if(lf(t))return t;if(Af(t))return gf(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function If(t){return t.map(Tf)}function kf(t){return(+t).toString()}function Of(t){if(!lf(t))throw new Error(`${t} needs to be a hex-string`);let e=Od(t);return e.length%2!=0&&(e=`0${e}`),gn(e)}function Bf(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function Cf(t){var e;return Of(pf((e=BigInt(Bd(kd(tr(t)))),Number(e&Kd))))}function xf(t){return rf(t)||of(t)||af(t)&&(lf(t)||Af(t))}function Nf(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}function Rf(t){const e=Od(pf(BigInt(t))),n=e.length%2==0?e:`0${e}`;return Bd(Fs(Of(Bd(n))).toString(16))}function Pf(t){const e=BigInt(function(t){return Bd(Fs(Ad(t)).toString(16))}(t));return e&jd}function Df(t){return pf(Pf(t))}function Lf(t){return rf(t)||of(t)?pf(t):lf(t)?t:Af(t)?pf(t):Df(t)}function Uf(t){const e=Bd(t.reduce(((t,e)=>t+Od(pf(e)).padStart(64,"0")),""));return Bd(ln(mo(Of(e))))}function Mf(t,e,n,r,i){return Uf([t,e,i,n,r.length,...r])}function Ff(t,e,n){return Uf([t,e,n.length,...n])}function Vf(t){return/^[\x00-\x7F]*$/.test(t)}function qf(t){return t.length<=qd}function Hf(t){return/^[0-9]*$/i.test(t)}function jf(t){return af(t)&&!lf(t)&&!Af(t)}fd({},{getL1MessageHash:()=>Ff,getL2MessageHash:()=>Mf,getSelector:()=>Lf,getSelectorFromName:()=>Df,keccakBn:()=>Rf,solidityUint256PackedKeccak256:()=>Uf,starknetKeccak:()=>Pf}),fd({},{decodeShortString:()=>Yf,encodeShortString:()=>Gf,isASCII:()=>Vf,isDecimalString:()=>Hf,isLongText:()=>zf,isShortString:()=>qf,isShortText:()=>Kf,isText:()=>jf,splitLongString:()=>$f});var Kf=t=>jf(t)&&qf(t),zf=t=>jf(t)&&!qf(t);function $f(t){const e=RegExp(`[^]{1,${qd}}`,"g");return t.match(e)||[]}function Gf(t){if(!Vf(t))throw new Error(`${t} is not an ASCII string`);if(!qf(t))throw new Error(`${t} is too long`);return Bd(t.replace(/./g,(t=>t.charCodeAt(0).toString(16))))}function Yf(t){if(!Vf(t))throw new Error(`${t} is not an ASCII string`);if(lf(t))return Od(t).replace(/.{2}/g,(t=>String.fromCharCode(parseInt(t,16))));if(Hf(t))return Yf("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}function Wf(t){const e=0n===BigInt(t.pending_word)?"":Yf(pf(t.pending_word));return t.data.reduce(((t,e)=>t+(0n===BigInt(e)?"":Yf(pf(e)))),"")+e}function Zf(t){const e=$f(t),n=e[e.length-1],r=e.map(Gf),[i,s]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:i,pending_word_len:s}}fd({},{byteArrayFromString:()=>Zf,stringFromByteArray:()=>Wf});function Xf(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function Jf(t){if(of(t)||Number.isInteger(t))return t.toString();if(af(t)){if(lf(t))return BigInt(t).toString();if(jf(t)){if(!qf(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(Gf(t)).toString()}if(Af(t))return t}if(sf(t))return""+ +t;throw new Error(`${t} can't be computed by felt()`)}fd({},{felt:()=>Mp,getAbiContractVersion:()=>Pp,getArrayType:()=>xp,isCairo1Abi:()=>Np,isCairo1Type:()=>Cp,isLen:()=>hp,isTypeArray:()=>pp,isTypeBool:()=>Tp,isTypeContractAddress:()=>Ip,isTypeEnum:()=>wp,isTypeEthAddress:()=>kp,isTypeFelt:()=>fp,isTypeInt:()=>Ep,isTypeLiteral:()=>Sp,isTypeNamedTuple:()=>yp,isTypeNonZero:()=>Rp,isTypeOption:()=>bp,isTypeResult:()=>_p,isTypeSecp256k1Point:()=>Bp,isTypeStruct:()=>mp,isTypeTuple:()=>gp,isTypeU96:()=>Op,isTypeUint:()=>vp,isTypeUint256:()=>Ap,tuple:()=>Up,uint256:()=>Dp,uint512:()=>Lp});var Qf=class t{data;static abiSelector="core::felt252";constructor(e){t.validate(e);const n=t.__processData(e);this.data=n.subarray(n.findIndex((t=>t>0)))}static __processData(t){if(af(t))return Md(t);if(of(t))return Fd(t);if(Number.isInteger(t))return Fd(BigInt(t));if(sf(t))return Fd(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return Vd(this.data)}decodeUtf8(){return(new TextDecoder).decode(this.data)}toHexString(){return Bd(this.toBigInt().toString(16))}toApiRequest(){return Xf([this.toHexString()])}static validate(e){ef(null!==e,"null value is not allowed for felt252"),ef(void 0!==e,"undefined value is not allowed for felt252"),ef(af(e)||rf(e)||of(e)||sf(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=t.__processData(e),r=Vd(n);ef(r>=0n&&r<$d,`Value ${n} is out of felt252 range [0, ${$d})`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},tp=(1n<<128n)-1n,ep=(1n<<256n)-1n,np=0n,rp=340282366920938463463374607431768211455n,ip=340282366920938463463374607431768211455n,sp=0n,op=0n,ap=class t{low;high;static abiSelector="core::integer::u256";constructor(...e){if(uf(e[0])&&1===e.length&&"low"in e[0]&&"high"in e[0]){const n=t.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(1===e.length){const n=t.validate(e[0]);this.low=n&tp,this.high=n>>128n}else{if(2!==e.length)throw Error("Incorrect constructor parameters");{const n=t.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}}}static validate(t){ef(null!==t,"null value is not allowed for u256"),ef(void 0!==t,"undefined value is not allowed for u256"),ef(xf(t)||uf(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const e=BigInt(t);return ef(e>=np,"bigNumberish is smaller than UINT_256_MIN"),ef(e<=ep,"bigNumberish is bigger than UINT_256_MAX"),e}static validateProps(t,e){const n=BigInt(t),r=BigInt(e);return ef(n>=sp&&n<=rp,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),ef(r>=op&&r<=ip,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:n,high:r}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=Nf(e);return new t(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Bd(this.low.toString(16)),high:Bd(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[Jf(this.low),Jf(this.high)]}},cp=(1n<<512n)-1n,up=0n,lp=0n,dp=class t{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(uf(e[0])&&1===e.length&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=t.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===e.length){const n=t.validate(e[0]);this.limb0=n&tp,this.limb1=(n&tp<<128n)>>128n,this.limb2=(n&tp<<256n)>>256n,this.limb3=n>>384n}else{if(4!==e.length)throw Error("Incorrect Uint512 constructor parameters");{const n=t.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(t){ef(null!==t,"null value is not allowed for u512"),ef(void 0!==t,"undefined value is not allowed for u512"),ef(xf(t)||uf(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const e=BigInt(t);return ef(e>=up,"bigNumberish is smaller than UINT_512_MIN."),ef(e<=cp,"bigNumberish is bigger than UINT_512_MAX."),e}static validateProps(t,e,n,r){const i=BigInt(t),s=BigInt(e),o=BigInt(n),a=BigInt(r);return[i,s,o,a].forEach(((t,e)=>{ef(t>=lp&&t<=tp,`limb${e} is not in the range of a u128 number`)})),{limb0:i,limb1:s,limb2:o,limb3:a}}static is(e){try{t.validate(e)}catch(t){return!1}return!0}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=Nf(e),i=Nf(e),s=Nf(e);return new t(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Bd(this.limb0.toString(16)),limb1:Bd(this.limb1.toString(16)),limb2:Bd(this.limb2.toString(16)),limb3:Bd(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[Jf(this.limb0),Jf(this.limb1),Jf(this.limb2),Jf(this.limb3)]}},hp=t=>/_len$/.test(t),fp=t=>"felt"===t||"core::felt252"===t,pp=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),gp=t=>/^\(.*\)$/i.test(t),yp=t=>/\(.*\)/i.test(t)&&t.includes(":"),mp=(t,e)=>t in e,wp=(t,e)=>t in e,bp=t=>t.startsWith("core::option::Option::"),_p=t=>t.startsWith("core::result::Result::"),vp=t=>Object.values(Kh).includes(t),Ep=t=>Object.values(zh).includes(t),Ap=t=>ap.isAbiType(t),Sp=t=>Object.values($h).includes(t),Tp=t=>"core::bool"===t,Ip=t=>t===$h.ContractAddress,kp=t=>"core::starknet::eth_address::EthAddress"===t,Op=t=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===t,Bp=t=>t===$h.Secp256k1Point,Cp=t=>t.includes("::"),xp=t=>Cp(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function Np(t){const{cairo:e}=Pp(t);if(void 0===e)throw Error("Unable to determine Cairo version");return"1"===e}function Rp(t){return t.startsWith(Gh)}function Pp(t){if(t.find((t=>"interface"===t.type)))return{cairo:"1",compiler:"2"};const e=t.find((t=>("function"===t.type||"constructor"===t.type)&&(t.inputs.length||t.outputs.length)));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return Cp(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Dp=t=>new ap(t).toUint256DecimalString(),Lp=t=>new dp(t).toUint512DecimalString(),Up=(...t)=>({...t});function Mp(t){return Jf(t)}var Fp=class{variant;constructor(t){const e=Object.values(t);if(0===e.length)throw new Error("This Enum must have at least 1 variant");if(1!==e.filter((t=>!nf(t))).length)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find((t=>!nf(t)))}activeVariant(){const t=Object.entries(this.variant).find((t=>!nf(t[1])));return nf(t)?"":t[0]}},Vp={Some:0,None:1},qp=class{Some;None;constructor(t,e){if(!(t in Object.values(Vp)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===Vp.Some){if(nf(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!nf(this.Some)}isNone(){return!0===this.None}},Hp={Ok:0,Err:1},jp=class{Ok;Err;constructor(t,e){if(!(t in Object.values(Hp)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===Hp.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!nf(this.Ok))return this.Ok;if(!nf(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!nf(this.Ok)}isErr(){return!nf(this.Err)}},Kp=(t,e,n)=>{if(!of(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)};function zp(t,e,n){return Object.entries(t).reduce(((r,[i,s])=>{const o=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if("string"===o){if(Array.isArray(t[i])){const e=zp(t[i],t[i].map((t=>o)));return r[i]=Object.values(e).join(""),r}return Kp(t,e,i),r[i]=Yf(s),r}if("number"===o)return Kp(t,e,i),r[i]=Number(s),r;if("function"==typeof o)return r[i]=o(s),r;if(Array.isArray(o)){const e=zp(t[i],o,o[0]);return r[i]=Object.values(e),r}return uf(o)?(r[i]=zp(t[i],o),r):(((t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)})(t,e,i),r)}),{})}var $p=class t{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){t.validate(e);const n=t.__processData(e);this.data=new Uint8Array(t.MAX_BYTE_SIZE),this.data.set(n,t.MAX_BYTE_SIZE-n.length)}static __processData(t){if(af(t))return Md(t);if(cf(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return Vd(this.data)}decodeUtf8(){const t=this.data.findIndex((t=>t>0)),e=this.data.subarray(t>=0?t:1/0);return(new TextDecoder).decode(e)}toHexString(t){return Bd("padded"===t?kd(this.data):this.toBigInt().toString(16))}static validate(e){const n=t.__processData(e).length;ef(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},Gp={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},Yp=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}(this,new.target.prototype),function(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}(this)}},Wp=class extends Yp{},Zp=class extends Wp{constructor(t,e,n){super(`RPC: ${e} with params ${Qh(n,null,2)}\n\n      ${t.code}: ${t.message}: ${Qh(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return Gp[t]===this.code}},Xp=Th.get("buffer")||void 0!==cd&&cd||"undefined"!=typeof globalThis&&globalThis.Buffer||"undefined"!=typeof window&&window.Buffer||"undefined"!=typeof global&&global.Buffer||class{constructor(){throw new Wp("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static from(t){throw new Wp("Buffer not detected, use 'config.set(\"buffer\", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support")}static isBuffer(t){const e=Th.get("buffer")||void 0!==cd&&cd;return e&&e.isBuffer&&e.isBuffer(t)}},Jp=class t{data;static abiSelector="core::u32::u32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},Qp=class t{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(3===e.length){const[t,n,r]=e;return ef(Array.isArray(t)&&n instanceof Qf&&r instanceof Jp,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=t,this.pending_word=n,void(this.pending_word_len=r)}const n=e[0];t.validate(n);const{data:r,pending_word:i,pending_word_len:s}=t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(t){let e;if(t instanceof Uint8Array)e=t;else if(cf(t))e=new Uint8Array(t);else if(af(t))e=Md(t);else if(of(t))e=Fd(t);else{if(n=t,!Number.isInteger(n))throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");e=Fd(BigInt(t))}var n;const r=$p.MAX_BYTE_SIZE,i=Math.floor(e.length/r),s=e.length%r,o=[];let a,c;for(let t=0;t<i;t+=1){const n=t*r,i=n+r,s=e.slice(n,i);o.push(new $p(s))}if(s>0){const t=e.slice(i*r);let n="0x";for(let e=0;e<t.length;e+=1)n+=t[e].toString(16).padStart(2,"0");a=new Qf(n),c=new Jp(s)}else a=new Qf(0),c=new Jp(0);return{data:o,pending_word:a,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),Xf([Bd(this.data.length.toString(16)),...this.data.flatMap((t=>t.toApiRequest())),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=Dd(this.toElements());return(new TextDecoder).decode(t)}toBigInt(){const t=Dd(this.toElements());if(0===t.length)return 0n;let e=0n;return t.forEach((t=>{e=256n*e+BigInt(t)})),e}toHexString(){const t=Dd(this.toElements());return Bd(0===t.length?"0":kd(t))}toBuffer(){const t=Dd(this.toElements());return Xp.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap((t=>t.data)),e=Number(this.pending_word_len.toBigInt());if(e){const n=new Uint8Array(e),r=e-this.pending_word.data.length;n.set(this.pending_word.data,r),t.push(n)}return t}assertInitialized(){ef(this.data&&void 0!==this.pending_word&&void 0!==this.pending_word_len,"CairoByteArray is not properly initialized")}static validate(t){ef(null!=t,"Invalid input: null or undefined"),ef(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),ef("object"!=typeof t||cf(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),ef(!rf(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),ef(!rf(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),ef(!of(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),ef(t instanceof Uint8Array||cf(t)||af(t)||rf(t)||of(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(Nf(e))},(()=>$p.factoryFromApiResponse(e))),r=Qf.factoryFromApiResponse(e),i=Jp.factoryFromApiResponse(e);return new t(n,r,i)}},tg=class t{data;static abiSelector="core::integer::u8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=Xd.min&&n<=Xd.max,`Value is out of u8 range [${Xd.min}, ${Xd.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},eg=class t{data;static abiSelector="core::integer::u16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=Jd.min&&n<=Jd.max,`Value is out of u16 range [${Jd.min}, ${Jd.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},ng=class t{data;static abiSelector="core::integer::u64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=th.min&&n<=th.max,`Value is out of u64 range [${th.min}, ${th.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},rg=class t{data;static abiSelector="core::integer::u96";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=eh.min&&n<=eh.max,`Value is out of u96 range [${eh.min}, ${eh.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},ig=class t{data;static abiSelector="core::integer::u128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data))}toHexString(){return Bd(this.toBigInt().toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=nh.min&&n<=nh.max,`Value is out of u128 range [${nh.min}, ${nh.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){return new t(Nf(e))}},sg=class t{data;static abiSelector="core::integer::i8";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();return Bd(t<0n?($d+t).toString(16):t.toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=rh.min&&n<=rh.max,`Value is out of i8 range [${rh.min}, ${rh.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=BigInt(n);return new t(r>$d/2n?r-$d:r)}},og=class t{data;static abiSelector="core::integer::i16";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();return Bd(t<0n?($d+t).toString(16):t.toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=ih.min&&n<=ih.max,`Value is out of i16 range [${ih.min}, ${ih.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=BigInt(n);return new t(r>$d/2n?r-$d:r)}},ag=class t{data;static abiSelector="core::integer::i32";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();return Bd(t<0n?($d+t).toString(16):t.toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=sh.min&&n<=sh.max,`Value is out of i32 range [${sh.min}, ${sh.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=BigInt(n);return new t(r>$d/2n?r-$d:r)}},cg=class t{data;static abiSelector="core::integer::i64";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();return Bd(t<0n?($d+t).toString(16):t.toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=oh.min&&n<=oh.max,`Value is out of i64 range [${oh.min}, ${oh.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=BigInt(n);return new t(r>$d/2n?r-$d:r)}},ug=class t{data;static abiSelector="core::integer::i128";constructor(e){t.validate(e),this.data=t.__processData(e)}static __processData(t){return af(t)&&jf(t)?Sd(t):BigInt(t)}toApiRequest(){return Xf([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return(new TextDecoder).decode(Fd(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();return Bd(t<0n?($d+t).toString(16):t.toString(16))}static validate(e){ef(null!=e,"Invalid input: null or undefined"),ef(!uf(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),ef(!rf(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=t.__processData(e);ef(n>=ah.min&&n<=ah.max,`Value is out of i128 range [${ah.min}, ${ah.max}]`)}static is(e){try{return t.validate(e),!0}catch{return!1}}static isAbiType(e){return e===t.abiSelector}static factoryFromApiResponse(e){const n=Nf(e),r=BigInt(n);return new t(r>$d/2n?r-$d:r)}},lg=($p.abiSelector,Qp.abiSelector,Qf.abiSelector,ap.abiSelector,dp.abiSelector,tg.abiSelector,eg.abiSelector,ng.abiSelector,rg.abiSelector,ig.abiSelector,sg.abiSelector,og.abiSelector,ag.abiSelector,cg.abiSelector,ug.abiSelector,$p.abiSelector,Qp.abiSelector,Qf.abiSelector,ap.abiSelector,dp.abiSelector,tg.abiSelector,eg.abiSelector,ng.abiSelector,rg.abiSelector,ig.abiSelector,sg.abiSelector,og.abiSelector,ag.abiSelector,cg.abiSelector,ug.abiSelector,{request:{[$p.abiSelector]:t=>new $p(t).toApiRequest(),[Qp.abiSelector]:t=>new Qp(t).toApiRequest(),[Qf.abiSelector]:t=>Mp(t),[ap.abiSelector]:t=>new ap(t).toApiRequest(),[dp.abiSelector]:t=>new dp(t).toApiRequest(),[tg.abiSelector]:t=>Mp(t),[eg.abiSelector]:t=>Mp(t),[ng.abiSelector]:t=>Mp(t),[rg.abiSelector]:t=>Mp(t),[ig.abiSelector]:t=>Mp(t),[sg.abiSelector]:t=>new sg(t).toApiRequest(),[og.abiSelector]:t=>new og(t).toApiRequest(),[ag.abiSelector]:t=>new ag(t).toApiRequest(),[cg.abiSelector]:t=>new cg(t).toApiRequest(),[ug.abiSelector]:t=>new ug(t).toApiRequest()},response:{[$p.abiSelector]:t=>$p.factoryFromApiResponse(t).decodeUtf8(),[Qp.abiSelector]:t=>Qp.factoryFromApiResponse(t).decodeUtf8(),[Qf.abiSelector]:t=>BigInt(Nf(t)),[ap.abiSelector]:t=>ap.factoryFromApiResponse(t).toBigInt(),[dp.abiSelector]:t=>dp.factoryFromApiResponse(t).toBigInt(),[tg.abiSelector]:t=>BigInt(Nf(t)),[eg.abiSelector]:t=>BigInt(Nf(t)),[ng.abiSelector]:t=>BigInt(Nf(t)),[rg.abiSelector]:t=>BigInt(Nf(t)),[ig.abiSelector]:t=>BigInt(Nf(t)),[sg.abiSelector]:t=>BigInt(Nf(t)),[og.abiSelector]:t=>BigInt(Nf(t)),[ag.abiSelector]:t=>BigInt(Nf(t)),[cg.abiSelector]:t=>BigInt(Nf(t)),[ug.abiSelector]:t=>BigInt(Nf(t))}});function dg(t,e,n){return"constructor"===t&&!n&&!e.length}function hg(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&0==--i)return r;return Number.POSITIVE_INFINITY}function fg(t){return Cp(t)?function(t){const e=t.slice(1,-1),n=[];let r,i=0;for(;i<e.length;){switch(!0){case"("===e[i]:r=i+hg(e.slice(i),"(",")")+1;break;case e.startsWith("core::result::Result::<",i)||e.startsWith("core::array::Array::<",i)||e.startsWith("core::option::Option::<",i):r=i+hg(e.slice(i),"<",">")+1;break;default:{const t=e.indexOf(",",i);r=-1!==t?t:Number.POSITIVE_INFINITY}}n.push(e.slice(i,r)),i=r+2}return n}(t):function(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if("("===t[r]){let i=1;const s=r;for(r++;i;)")"===t[r]&&i--,"("===t[r]&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}(e);let i=r.split(",").map((t=>n.length?t.replace(" ",n.shift()):t));return yp(t)&&(i=i.reduce(((t,e)=>t.concat(function(t){const e=t.substring(0,t.indexOf(":"));return{name:e,type:t.substring(e.length+1)}}(e))),[])),i}(t)}var pg=class t{content;arrayType;constructor(e,n){ef(t.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{t.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=t.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}ef(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(t){const e=t.match(/(?<=; )\d+(?=\])/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(e[0])}getFixedArraySize(){return t.getFixedArraySize(this.arrayType)}static getFixedArrayType=t=>{const e=t.match(/(?<=\[).+(?=;)/);if(null===e)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return e[0]};getFixedArrayType(){return t.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce(((t,e,n)=>(t[n]=e,t)),{})}compile(){return t.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&/(?<=\[).+(?=;)/.test(t)&&/(?<=; )\d+(?=\])/.test(t)}};function gg({type:t,val:e,parser:n}){switch(!0){case ap.isAbiType(t):case dp.isAbiType(t):case tg.isAbiType(t):case eg.isAbiType(t):case ng.isAbiType(t):case rg.isAbiType(t):case ig.isAbiType(t):case sg.isAbiType(t):case og.isAbiType(t):case ag.isAbiType(t):case cg.isAbiType(t):case ug.isAbiType(t):case $p.isAbiType(t):return n.getRequestParser(t)(e);case Bp(t):{const t=Od(pf(e)).padStart(128,"0"),n=Dp(Bd(t.slice(-64))),r=Dp(Bd(t.slice(0,-64)));return[Mp(r.low),Mp(r.high),Mp(n.low),Mp(n.high)]}default:return n.getRequestParser(Qf.abiSelector)(e)}}function yg({element:t,type:e,structs:n,enums:r,parser:i}){if(void 0===t)throw Error(`Missing parameter for type ${e}`);if(pg.isTypeFixedArray(e)){const s=pg.getFixedArrayType(e);let o=[];if(Array.isArray(t))o=new pg(t,e).content;else{if("object"!=typeof t)throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);o=Object.values(t),ef(o.length===pg.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${pg.getFixedArraySize(e)} items. ${o.length} items provided.`)}return o.reduce(((t,e)=>t.concat(yg({element:e,type:s,structs:n,enums:r,parser:i}))),[])}if(Array.isArray(t)){const s=[];s.push(Mp(t.length));const o=xp(e);return t.reduce(((t,e)=>t.concat(yg({element:e,type:o,structs:n,enums:r,parser:i}))),s)}if(ap.isAbiType(e))return i.getRequestParser(e)(t);if(dp.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(kp(e))return gg({type:e,val:t,parser:i});if(Qp.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],o=t;return s.reduce(((t,e)=>t.concat(yg({element:o[e.name],type:e.type,structs:n,enums:r,parser:i}))),[])}if(gp(e)){const s=function(t,e){const n=fg(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map(((t,e)=>({element:r[e],type:t.type??t})))}(t,e);return s.reduce(((t,e)=>{const s=yg({element:e.element,type:e.type,structs:n,enums:r,parser:i});return t.concat(s)}),[])}if(wp(e,r)){const{variants:s}=r[e];if(bp(e)){const e=t;if(e.isSome()){const t=s.find((t=>"Some"===t.name));if(nf(t))throw Error("Error in abi : Option has no 'Some' variant.");const o=t.type;if("()"===o)return Vp.Some.toString();const a=yg({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[Vp.Some.toString(),...a]:[Vp.Some.toString(),a]}return Vp.None.toString()}if(_p(e)){const e=t;if(e.isOk()){const t=s.find((t=>"Ok"===t.name));if(nf(t))throw Error("Error in abi : Result has no 'Ok' variant.");const o=t.type;if("()"===o)return Hp.Ok.toString();const a=yg({element:e.unwrap(),type:o,structs:n,enums:r,parser:i});return Array.isArray(a)?[Hp.Ok.toString(),...a]:[Hp.Ok.toString(),a]}const o=s.find((t=>"Err"===t.name));if(nf(o))throw Error("Error in abi : Result has no 'Err' variant.");const a=o.type;if("()"===a)return Hp.Err.toString();const c=yg({element:e.unwrap(),type:a,structs:n,enums:r,parser:i});return Array.isArray(c)?[Hp.Err.toString(),...c]:[Hp.Err.toString(),c]}const o=t,a=o.activeVariant(),c=s.find((t=>t.name===a));if(nf(c))throw Error(`Not find in abi : Enum has no '${a}' variant.`);const u=c.type,l=s.findIndex((t=>t.name===a));if("()"===u)return l.toString();const d=yg({element:o.unwrap(),type:u,structs:n,enums:r,parser:i});return Array.isArray(d)?[l.toString(),...d]:[l.toString(),d]}if(Rp(e))return gg({type:xp(e),val:t,parser:i});if("object"==typeof t)throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return gg({type:e,val:t,parser:i})}function mg(t,e,n){let r;switch(!0){case Tp(t):return r=e.next().value,Boolean(BigInt(r));case ap.isAbiType(t):case dp.isAbiType(t):case tg.isAbiType(t):case eg.isAbiType(t):case ng.isAbiType(t):case rg.isAbiType(t):case ig.isAbiType(t):case sg.isAbiType(t):case og.isAbiType(t):case ag.isAbiType(t):case cg.isAbiType(t):case ug.isAbiType(t):return n.getResponseParser(t)(e);case kp(t):return r=e.next().value,BigInt(r);case $p.isAbiType(t):return n.getResponseParser(t)(e);case Bp(t):const i=Od(e.next().value).padStart(32,"0"),s=Od(e.next().value).padStart(32,"0"),o=Od(e.next().value).padStart(32,"0"),a=Od(e.next().value).padStart(32,"0");return BigInt(Bd(s+i+a+o));default:return n.getResponseParser(Qf.abiSelector)(e)}}function wg(t,e,n,r,i){if("()"===e.type)return{};if(ap.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(dp.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Qp.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(pg.isTypeFixedArray(e.type)){const s=[],o={name:"",type:pg.getFixedArrayType(e.type)},a=pg.getFixedArraySize(e.type);for(;s.length<a;)s.push(wg(t,o,n,r,i));return s}if(pp(e.type)){const s=[],o={name:"",type:xp(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(wg(t,o,n,r,i));return s}if(Rp(e.type)){const s={name:"",type:xp(e.type)};return wg(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return kp(e.type)?mg(e.type,t,n):r[e.type].members.reduce(((e,s)=>(e[s.name]=wg(t,s,n,r,i),e)),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),o=i[e.type].variants.reduce(((e,o,a)=>a===s?(e[o.name]=wg(t,{name:"",type:o.type},n,r,i),e):(e[o.name]=void 0,e)),{});if(e.type.startsWith("core::option::Option")){const t=s===Vp.Some?o.Some:void 0;return new qp(s,t)}if(e.type.startsWith("core::result::Result")){let t;return t=s===Hp.Ok?o.Ok:o.Err,new jp(s,t)}return new Fp(o)}if(gp(e.type))return fg(e.type).reduce(((e,s,o)=>{const a=s?.name?s.name:o,c={name:a,type:s?.type?s.type:s};return e[a]=wg(t,c,n,r,i),e}),{});if(pp(e.type)){const s=[],o={name:"",type:xp(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(wg(t,o,n,r,i));return s}return mg(e.type,t,n)}function bg({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:o,type:a}=e;let c;switch(!0){case hp(o):return c=t.next().value,BigInt(c);case n&&a in n||gp(a):case r&&wp(a,r):case pg.isTypeFixedArray(a):return wg(t,e,s,n,r);case pp(a):if(Cp(a))return wg(t,e,s,n,r);const u=[];if(i&&i[`${o}_len`]){const a=i[`${o}_len`];for(;u.length<a;)u.push(wg(t,{name:o,type:e.type.replace("*","")},s,n,r))}return u;case Rp(a):return wg(t,e,s,n,r);default:return mg(a,t,s)}}var _g=(t,e)=>{if(ef(af(t)||rf(t)||of(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),af(t)&&!lf(t))return;const n=BigInt(t.toString(10));ef(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},vg=(t,e)=>{let n;switch(rf(t)&&ef(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),ef(af(t)||rf(t)||of(t)||uf(t)&&"low"in t&&"high"in t||uf(t)&&["limb0","limb1","limb2","limb3"].every((e=>e in t)),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`),e.type){case Kh.u256:n=new ap(t).toBigInt();break;case Kh.u512:n=new dp(t).toBigInt();break;default:n=hf(t)}switch(e.type){case Kh.u8:ef(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case Kh.u16:ef(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case Kh.u32:ef(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case Kh.u64:ef(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case Kh.u128:ef(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case Kh.u256:ef(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case Kh.u512:ef(dp.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case $h.ClassHash:case $h.ContractAddress:ef(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case $h.Secp256k1Point:ef(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break;case $h.U96:ef(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`)}},Eg=(t,e)=>{ef(sf(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Ag=(t,e,n)=>{if(e.type!==Kh.u256&&e.type!==Kh.u512)if(kp(e.type)){ef(!uf(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const n=BigInt(t.toString(10));ef(n>=0n&&n<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`)}else ef(uf(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach((({name:n})=>{ef(Object.keys(t).includes(n),`Validate: arg ${e.name} should have a property ${n}`)}));else vg(t,e)},Sg=(t,e)=>{ef(uf(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(bp(e.type)&&r.includes("isSome")&&r.includes("isNone")||_p(e.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Tg=(t,e)=>{ef(uf(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},Ig=(t,e,n,r)=>{const i=pp(e.type),s=i?xp(e.type):pg.getFixedArrayType(e.type);if(i&&fp(s)&&zf(t))return;let o=[];if(i)ef(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),o=t;else switch(!0){case Array.isArray(t):o=t;break;case"object"==typeof t:o=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case fp(s):o.forEach((t=>_g(t,e)));break;case gp(s):o.forEach((t=>Tg(t,{name:e.name,type:s})));break;case pp(s):o.forEach((t=>Ig(t,{name:"",type:s},n,r)));break;case mp(s,n):o.forEach((t=>Ag(t,{name:e.name,type:s},n)));break;case wp(s,r):o.forEach((t=>Sg(t,{name:e.name,type:s})));break;case vp(s)||Sp(s):o.forEach((t=>vg(t,{name:"",type:s})));break;case Tp(s):o.forEach((t=>Eg(t,e)));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${o}`)}};function kg(t,e,n,r){t.inputs.reduce(((t,i)=>{const s=e[t];switch(!0){case hp(i.name):return t;case fp(i.type):_g(s,i);break;case $p.isAbiType(i.type):$p.validate(s);break;case vp(i.type)||Sp(i.type):vg(s,i);break;case Tp(i.type):Eg(s,i);break;case Qp.isAbiType(i.type):Qp.validate(s);break;case sg.isAbiType(i.type):sg.validate(s);break;case og.isAbiType(i.type):og.validate(s);break;case ag.isAbiType(i.type):ag.validate(s);break;case cg.isAbiType(i.type):cg.validate(s);break;case ug.isAbiType(i.type):ug.validate(s);break;case pp(i.type)||pg.isTypeFixedArray(i.type):Ig(s,i,n,r);break;case mp(i.type,n):Ag(s,i,n);break;case wp(i.type,r):Sg(s,i);break;case gp(i.type):Tg(s,i);break;case Rp(i.type):((t,e)=>{const n=xp(e.type);switch(ef(vp(n)&&n!==dp.abiSelector||fp(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case fp(n):_g(t,e),ef(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case vp(n):vg(t,{name:"",type:n}),n===Kh.u256?ef(new ap(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):ef(hf(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return t+1}),0)}var Og=class t{abi;parser;structs;enums;constructor(e,n){this.structs=t.getAbiStruct(e),this.enums=t.getAbiEnum(e),this.parser=function(t,e){const n=function(t){return t.find((t=>"interface"===t.type))?2:Np(t)?1:0}(t);if(0===n||1===n)return new class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||lg}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce(((t,e)=>hp(e.name)?t:t+1),0)}getMethod(t){return this.abi.find((e=>e.name===t))}getLegacyFormat(){return this.abi}}(t,e);if(2===n)return new class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||lg}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){const e=this.abi.find((t=>"interface"===t.type));return e?.items?.find((e=>e.name===t))}getLegacyFormat(){return this.abi.flatMap((t=>"interface"===t.type?t.items:t))}}(t,e);throw Error(`Unsupported ABI version ${n}`)}(e,n),this.abi=this.parser.getLegacyFormat()}validate(t,e,n=[]){t!==Hh&&ef(this.abi.filter((e=>{if("function"!==e.type)return!1;const n="view"===e.stateMutability||"view"===e.state_mutability;return t===jh?!n:n})).map((t=>t.name)).includes(e),(t===jh?"invocable":"viewable")+" method not found in abi");const r=this.abi.find((n=>t===Hh?n.name===e&&"constructor"===n.type:n.name===e&&"function"===n.type));if(dg(e,n,r))return;const i=this.parser.methodInputsLength(r);if(n.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${n.length}`);kg(r,n,this.structs,this.enums)}compile(t,e){const n=this.abi.find((e=>e.name===t));if(dg(t,e,n))return[];let r;if(Array.isArray(e))r=e;else{const t=function(t,e,n,r){const i=(t,e)=>{if(pg.isTypeFixedArray(e))return function(t,e){const n=pg.getFixedArrayType(e),r=pg.getFixedArraySize(e);if(Array.isArray(t)){if(r!==t.length)throw new Error(`ABI type ${e}: array provided do not includes  ${r} items. ${t.length} items provided.`);return t.map((t=>i(t,n)))}if(r!==Object.keys(t).length)throw new Error(`ABI type ${e}: object provided do not includes  ${r} properties. ${Object.keys(t).length} items provided.`);return i(t,n)}(t,e);if(pp(e))return function(t,e){const n=xp(e);return af(t)?t:t.map((t=>i(t,n)))}(t,e);if(wp(e,r)){const n=r[e];return o(t,n)}if(gp(e))return function(t,e){const n=fg(e).reduce(((e,n,r)=>{const s=Object.keys(t),o=n?.type?n.type:n;return a=i(t[s[r]],o),Object.defineProperty(e,r.toString(),{enumerable:!0,value:a??t[s[r]]}),e;var a}),{});return n}(t,e);if(kp(e))return t;if(Rp(e))return t;if(Qp.isAbiType(e))return t;if(Op(e))return t;if(Bp(e))return t;if(ap.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(dp.isAbiType(e)){const n=t;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every((t=>t in n)))throw Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(mp(e,n)){const r=n[e].members;return s(t,r)}return t},s=(t,e)=>e.reduce(((e,n)=>{if("undefined"===t[n.name]&&(Cp(n.type)||!hp(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r??t[n.name]}),e}),{}),o=(t,e)=>{if(_p(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(",")),s=e.name.substring(e.name.indexOf(",")+1,e.name.lastIndexOf(">"));return n.isOk()?new jp(Hp.Ok,i(t.unwrap(),r)):new jp(Hp.Err,i(t.unwrap(),s))}if(bp(e.name)){const n=t,r=e.name.substring(e.name.indexOf("<")+1,e.name.lastIndexOf(">"));return n.isSome()?new qp(Vp.Some,i(n.unwrap(),r)):new qp(Vp.None,{})}const n=t,r=Object.entries(n.variant).map((t=>{if(nf(t[1]))return t;const r=e.type.substring(e.type.lastIndexOf("<")+1,e.type.lastIndexOf(">"));return"()"===r?t:[t[0],i(n.unwrap(),r)]}));return new Fp(Object.fromEntries(r))};return e.reduce(((e,n)=>{return hp(n.name)&&!Cp(n.type)||(r=i(t[n.name],n.type),Object.defineProperty(e,n.name,{enumerable:!0,value:r})),e;var r}),{})}(e,n.inputs,this.structs,this.enums);r=Object.values(t),kg(n,r,this.structs,this.enums)}const i=r[Symbol.iterator](),s=n.inputs.reduce(((t,e)=>hp(e.name)&&!Cp(e.type)?t:t.concat(function({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:o}=e;let{value:a}=t.next();switch(!0){case pg.isTypeFixedArray(o):if(!Array.isArray(a)&&"object"!=typeof a)throw Error(`ABI expected parameter ${s} to be an array or an object, got ${a}`);return yg({element:a,type:e.type,structs:n,enums:r,parser:i});case pp(o):if(!Array.isArray(a)&&!jf(a))throw Error(`ABI expected parameter ${s} to be array or long string, got ${a}`);return af(a)&&(a=$f(a)),yg({element:a,type:e.type,structs:n,enums:r,parser:i});case Rp(o):return gg({type:xp(o),val:a,parser:i});case kp(o):return gg({type:o,val:a,parser:i});case mp(o,n)||gp(o)||ap.isAbiType(o):case wp(o,r):return yg({element:a,type:o,structs:n,enums:r,parser:i});default:return gg({type:o,val:a,parser:i})}}({argsIterator:i,input:e,structs:this.structs,enums:this.enums,parser:this.parser}))),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(t){const e=t=>{const e=(t,n=".")=>{const r=Array.isArray(t)?[t.length.toString(),...t]:t;return Object.entries(r).flatMap((([t,i])=>{let s=i;"entrypoint"===t?s=Df(s):zf(s)&&(s=Zf(s));const o=Array.isArray(r)&&"0"===t?"$$len":t;if(of(s))return[[`${n}${o}`,Mp(s)]];if(Object(s)===s){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...t];if(r.includes("isSome")&&r.includes("isNone")){const t=s,r=t.isSome()?Vp.Some:Vp.None;return t.isSome()?e({0:r,1:t.unwrap()},`${n}${o}.`):[[`${n}${o}`,Mp(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const t=s,r=t.isOk()?Hp.Ok:Hp.Err;return e({0:r,1:t.unwrap()},`${n}${o}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const t=s,r=t.activeVariant(),i=Object.keys(t.variant).findIndex((t=>t===r));return"object"==typeof t.unwrap()&&0===Object.keys(t.unwrap()).length?[[`${n}${o}`,Mp(i)]]:e({0:i,1:t.unwrap()},`${n}${o}.`)}return e(s,`${n}${o}.`)}return[[`${n}${o}`,Mp(s)]]}))};return Object.fromEntries(e(t))};let n;if(Array.isArray(t)){const r=e({...t});n=Object.values(r)}else{const r=e(t);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(t,e){const{outputs:n}=this.abi.find((e=>e.name===t)),r=e.flat()[Symbol.iterator](),i=n.flat().reduce(((t,e,n)=>{const i=e.name??n;return t[i]=bg({responseIterator:r,output:e,structs:this.structs,enums:this.enums,parsedResult:t,parser:this.parser}),t[i]&&t[`${i}_len`]&&delete t[`${i}_len`],t}),{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(t,e,n){return zp(this.parse(t,e),n)}static getAbiStruct(t){return t.filter((t=>"struct"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{})}static getAbiEnum(t){const e=t.filter((t=>"enum"===t.type)).reduce(((t,e)=>({...t,[e.name]:e})),{});return delete e["core::bool"],e}static toCalldata(e=[]){return t.compile(e)}static toHex(e=[]){return t.compile(e).map((t=>pf(t)))}decodeParameters(t,e){const n=Array.isArray(t)?t:[t],r=e.flat()[Symbol.iterator](),i=n.map((t=>bg({responseIterator:r,output:{name:"",type:t},parser:this.parser,structs:this.structs,enums:this.enums})));return 1===i.length?i[0]:i}};fd({},{COMPILED_CLASS_VERSION:()=>ty,blake2sHashMany:()=>wy,calculateContractAddressFromHash:()=>cy,calculateDeclareTransactionHash:()=>Jg,calculateDeployAccountTransactionHash:()=>Qg,calculateInvokeTransactionHash:()=>Xg,calculateL2MessageTxHash:()=>Zg,computeCompiledClassHash:()=>Oy,computeCompiledClassHashBlake:()=>Ey,computeCompiledClassHashPoseidon:()=>gy,computeContractClassHash:()=>ky,computeHashOnElements:()=>oy,computeHintedClassHash:()=>uy,computeLegacyContractClassHash:()=>ly,computePedersenHash:()=>sy,computePedersenHashOnElements:()=>ay,computePoseidonHash:()=>dy,computePoseidonHashOnElements:()=>hy,computeSierraContractClassHash:()=>my,encodeBuiltins:()=>ry,flattenEntryPointData:()=>iy,formatSpaces:()=>ey,getL1MessageHash:()=>Ff,getL2MessageHash:()=>Mf,getSelector:()=>Lf,getSelectorFromName:()=>Df,hashByteCodeSegments:()=>py,hashByteCodeSegmentsBlake:()=>vy,keccakBn:()=>Rf,nullSkipReplacer:()=>ny,poseidon:()=>p,solidityUint256PackedKeccak256:()=>Uf,starknetKeccak:()=>Pf}),fd({},{calculateDeclareTransactionHash:()=>jg,calculateDeployAccountTransactionHash:()=>Hg,calculateInvokeTransactionHash:()=>Kg,calculateTransactionHashCommon:()=>qg,encodeDataResourceBoundsL1:()=>Fg,encodeResourceBoundsL1:()=>Ug,encodeResourceBoundsL2:()=>Mg,hashDAMode:()=>Lg,hashFeeFieldV3B3:()=>Vg});var Bg=t=>t.map((t=>BigInt(t))),Cg=32n,xg=128n,Ng=64n+xg,Rg=BigInt(Gf("L1_GAS")),Pg=BigInt(Gf("L2_GAS")),Dg=BigInt(Gf("L1_DATA"));function Lg(t,e){return(BigInt(t)<<Cg)+BigInt(e)}function Ug(t){return(Rg<<Ng)+(t.l1_gas.max_amount<<xg)+t.l1_gas.max_price_per_unit}function Mg(t){return(Pg<<Ng)+(t.l2_gas.max_amount<<xg)+t.l2_gas.max_price_per_unit}function Fg(t){return(Dg<<Ng)+(t.l1_data_gas.max_amount<<xg)+t.l1_data_gas.max_price_per_unit}function Vg(t,e){const n=Ug(e),r=Mg(e),i=Fg(e);return Xs([BigInt(t),n,r,i])}function qg(t,e,n,r,i,s,o,a,c,u,l=[]){const d=Vg(s,u),h=Lg(a,c),f=Bg([t,e,n,d,Xs(Bg(o)),r,i,h,...Bg(l)]);return pf(Xs(f))}function Hg(t,e,n,r,i,s,o,a,c,u,l,d){return qg(wh.DEPLOY_ACCOUNT,i,t,s,o,l,d,a,c,u,[Xs(Bg(n)),e,r])}function jg(t,e,n,r,i,s,o,a,c,u,l,d){return qg(wh.DECLARE,r,n,i,s,l,Bg(d),a,c,u,[Xs(Bg(o)),t,e])}function Kg(t,e,n,r,i,s,o,a,c,u,l){return qg(wh.INVOKE,e,t,r,i,u,l,o,a,c,[Xs(Bg(s)),Xs(Bg(n))])}function zg(t){return[...t,t.length].reduce(((t,e)=>Ls(hf(t),hf(e))),0).toString()}function $g(t,e,n,r,i,s,o,a=[]){const c=zg(i);return zg([t,e,n,r,c,s,o,...a])}function Gg(t,e,n,r,i,s,o){return $g(wh.DECLARE,n,e,0,[t],r,i,[s,...o?[o]:[]])}function Yg(t,e,n,r,i,s,o,a){const c=[e,r,...n];return $g(wh.DEPLOY_ACCOUNT,i,t,0,c,s,o,[a])}function Wg(t,e,n,r,i,s){return $g(wh.INVOKE,e,t,0,n,r,i,[s])}function Zg(t,e,n,r,i,s){const o=[t,...r];return $g(wh.L1_HANDLER,0,e,Lf(n),o,0,i,[s])}function Xg(t){if(function(t){return[yd.ETransactionVersion.V3,yd.ETransactionVersion.F3].includes(t.version)}(t))return Kg(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Jg(t){if(function(t){return[yd.ETransactionVersion.V3,yd.ETransactionVersion.F3].includes(t.version)}(t))return jg(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Qg(t){if(function(t){return[yd.ETransactionVersion.V3,yd.ETransactionVersion.F3].includes(t.version)}(t))return Hg(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}fd({},{calculateDeclareTransactionHash:()=>Gg,calculateDeployAccountTransactionHash:()=>Yg,calculateL2MessageTxHash:()=>Zg,calculateTransactionHash:()=>Wg,calculateTransactionHashCommon:()=>$g,computeHashOnElements:()=>zg}),fd({},{starkCurve:()=>f,weierstrass:()=>g});var ty="COMPILED_CLASS_V1";function ey(t){let e=!1;const n=[];for(const r of t)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(e=!e),e?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function ny(t,e){return"attributes"===t||"accessible_scopes"===t?Array.isArray(e)&&0===e.length?void 0:e:"debug_info"===t?null:null===e?void 0:e}function ry(t){return t.map((t=>BigInt(Gf(t))))}function iy(t,e){return t.flatMap(((t,n)=>[BigInt(t.selector),BigInt(t.offset),...e[n]]))}function sy(t,e){return Ls(BigInt(t),BigInt(e))}function oy(t){return[...t,t.length].reduce(((t,e)=>Ls(BigInt(t),BigInt(e))),0).toString()}var ay=oy;function cy(t,e,n,r){const i=oy(Og.compile(n)),s=oy([Mp("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,t,e,i]);return pf(BigInt(s)%Yd)}function uy(t){const{abi:e,program:n}=t,r=ey(Qh({abi:e,program:n},ny));return Bd(Fs(Ad(r)).toString(16))}function ly(t){const e=af(t)?Xh(t):t,n=pf(zd),r=oy(e.entry_points_by_type.EXTERNAL.flatMap((t=>[t.selector,t.offset]))),i=oy(e.entry_points_by_type.L1_HANDLER.flatMap((t=>[t.selector,t.offset]))),s=oy(e.entry_points_by_type.CONSTRUCTOR.flatMap((t=>[t.selector,t.offset]))),o=oy(e.program.builtins.map((t=>Gf(t)))),a=uy(e),c=oy(e.program.data);return oy([n,r,i,s,o,a,c])}function dy(t,e){return pf(Ys(BigInt(t),BigInt(e)))}function hy(t){return pf(Xs(t.map((t=>BigInt(t)))))}function fy(t){const e=t.flatMap((t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,Xs(ry(e)))];var e}));return Xs(e)}function py(t){const e=t.bytecode.map((t=>BigInt(t))),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap((t=>{const n=e.slice(r,r+=t);return[BigInt(t),Xs(n)]}));return 1n+Xs(i)}function gy(t){const e=BigInt(Gf(ty)),n=fy(t.entry_points_by_type.EXTERNAL),r=fy(t.entry_points_by_type.L1_HANDLER),i=fy(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?py(t):Xs(t.bytecode.map((t=>BigInt(t))));return pf(Xs([e,n,r,i,s]))}function yy(t){return Xs(t.flatMap((t=>[BigInt(t.selector),BigInt(t.function_idx)])))}function my(t){const e=BigInt(Gf("CONTRACT_CLASS_V0.1.0")),n=yy(t.entry_points_by_type.EXTERNAL),r=yy(t.entry_points_by_type.L1_HANDLER),i=yy(t.entry_points_by_type.CONSTRUCTOR),s=function(t){const e=ey(Qh(t.abi,null));return BigInt(Bd(Fs(Ad(e)).toString(16)))}(t),o=Xs(t.sierra_program.map((t=>BigInt(t))));return pf(Xs([e,n,r,i,s,o]))}function wy(t){const e=0x8000000000000000n,n=[],r=new ArrayBuffer(32),i=new DataView(r);for(const r of t){const t=0xffffffffffffffffn&r,s=(0xffffffffffffffff0000000000000000n&r)>>64n,o=(0xffffffffffffffff00000000000000000000000000000000n&r)>>128n,a=(0xffffffffffffffff000000000000000000000000000000000000000000000000n&r)>>192n;if(i.setBigUint64(0,a,!1),i.setBigUint64(8,o,!1),i.setBigUint64(16,s,!1),i.setBigUint64(24,t,!1),r<e){const t=i.getUint32(24,!1),e=i.getUint32(28,!1);n.push(t,e)}else{const t=2147483648|i.getUint32(0,!1),e=i.getUint32(4,!1),r=i.getUint32(8,!1),s=i.getUint32(12,!1),o=i.getUint32(16,!1),a=i.getUint32(20,!1),c=i.getUint32(24,!1),u=i.getUint32(28,!1);n.push(t,e,r,s,o,a,c,u)}}const s=new ArrayBuffer(4*n.length),o=new DataView(s);for(let t=0;t<n.length;t++)o.setUint32(4*t,n[t],!0);const a=(c=new Uint8Array(s),Th.get("blake")?.(c)||fa(c,{dkLen:32}));var c;let u=0n;for(let t=0;t<32;t++)u|=BigInt(a[t])<<BigInt(8*t);return u%$d}function by(t){const e=t.flatMap((t=>{return[BigInt(t.selector),BigInt(t.offset),(e=t.builtins,wy(ry(e)))];var e}));return wy(e)}function _y(t,e){if("number"==typeof e){const n=[];for(let r=0;r<e;r++){const e=t.next();if(e.done)throw new Error("Bytecode length mismatch");n.push(e.value)}return[e,wy(n)]}const n=e.map((e=>_y(t,e))),r=wy(n.flatMap((([t,e])=>[BigInt(t),e])))+1n;return[n.reduce(((t,[e])=>t+e),0),r]}function vy(t){const e=t.bytecode.map((t=>BigInt(t))),n=t.bytecode_segment_lengths;if(!n)return wy(e);const r=e[Symbol.iterator](),[i,s]=_y(r,n);if(i!==e.length)throw new Error(`Bytecode length mismatch: expected ${e.length}, got ${i}`);return s}function Ey(t){return pf(wy([BigInt(Gf(ty)),by(t.entry_points_by_type.EXTERNAL),by(t.entry_points_by_type.L1_HANDLER),by(t.entry_points_by_type.CONSTRUCTOR),vy(t)]))}function Ay(t){const e=t.version?pf(t.version):Bh.V3;return e===Bh.V3||e===Bh.F3}function Sy(t,e){const n=t.split("."),r=e.split(".");return n.every(((t,e)=>"*"===t||t===r[e]))}function Ty(t,e={allowAnyPatchVersion:!1}){return Object.values(bh).some((n=>Sy(e.allowAnyPatchVersion?function(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}(n):n,t)))}function Iy(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}function ky(t){const e=af(t)?Xh(t):t;return"sierra_program"in e?my(e):ly(e)}function Oy(t,e=Sh){return function(t,e){const n=t.split(".").map(Number),r=e.split(".").map(Number),i=Math.max(n.length,r.length);for(let t=0;t<i;t+=1){const e=n[t]||0,i=r[t]||0;if(e>i)return 1;if(e<i)return-1}return 0}(e,Sh)>=0?Ey(t):gy(t)}function By(t){const e=af(t)?t:Qh(t);return Id(vl(e))}function Cy(t){if(Array.isArray(t))return t;const e=vd(El(Td(t)));return Xh(e)}function xy(){return Is(Es.randomPrivateKey())}function Ny(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map((t=>pf(t)));try{const{r:e,s:n}=t;return[pf(e),pf(n)]}catch(t){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Ry(t){return vf(Ny(t))}function Py(t){return Ef(Ny(t))}function Dy(){return Ly({l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"},!1)}function Ly(t,e=Th.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Bf(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0),max_price_per_unit:Bf(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Bf(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0),max_price_per_unit:Bf(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Bf(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0),max_price_per_unit:Bf(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)}}}function Uy(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function My(t,e=Th.get("resourceBoundsOverhead")){return Bf(t.l1_gas_consumed,!1!==e?e.l1_gas.max_amount:0)*Bf(t.l1_gas_price,!1!==e?e.l1_gas.max_price_per_unit:0)+Bf(t.l1_data_gas_consumed,!1!==e?e.l1_data_gas.max_amount:0)*Bf(t.l1_data_gas_price,!1!==e?e.l1_data_gas.max_price_per_unit:0)+Bf(t.l2_gas_consumed,!1!==e?e.l2_gas.max_amount:0)*Bf(t.l2_gas_price,!1!==e?e.l2_gas.max_price_per_unit:0)}function Fy(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Vy(t){if(t===Nh.L1)return Rh.L1;if(t===Nh.L2)return Rh.L2;throw Error("EDAM conversion")}function qy(t,e){const n=pf(e||t);if(!Object.values(xh).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function Hy(t){if(!t)return;const e=pf(t);if(e===Bh.V0)return Bh.F0;if(e===Bh.V1)return Bh.F1;if(e===Bh.V2)return Bh.F2;if(e===Bh.V3)return Bh.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function jy(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||Nh.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||Nh.L1,resourceBounds:t.resourceBounds??Dy()}}function Ky(t){return Bd(kd(fs(pf(t),!1)))}function zy(t){const e=t=>{if(of(t))return pf(t);if(uf(t)){const n={};return Object.keys(t).forEach((r=>{n[r]=e(t[r])})),n}return t};return e(t)}function $y(t){const e=t=>{if(af(t))return BigInt(t);if(uf(t)){const n={};return Object.keys(t).forEach((r=>{n[r]=e(t[r])})),n}return t};return e(t)}function Gy(t){return"sierra_program"in(af(t)?Xh(t):t)}function Yy(t,e){const n={...t};if(Gy(t.contract)&&(!t.compiledClassHash&&t.casm&&(n.compiledClassHash=Oy(t.casm,e)),!n.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(n.classHash=t.classHash??ky(t.contract),!n.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return n}function Wy(){return Rd(kd(Wl.utils.randomPrivateKey()))}function Zy(t){_f(t,Hd,2n**160n-1n,"Ethereum Address ");const e=Bd(Od(pf(t)).padStart(40,"0"));return ef(Boolean(e.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),e}fd({},{ZeroFeeEstimate:()=>Fy,compressProgram:()=>By,decompressProgram:()=>Cy,formatSignature:()=>Ny,getFullPublicKey:()=>Ky,intDAM:()=>Vy,randomAddress:()=>xy,resourceBoundsToBigInt:()=>$y,resourceBoundsToEstimateFeeResponse:()=>Uy,resourceBoundsToHexString:()=>zy,signatureToDecimalArray:()=>Ry,signatureToHexArray:()=>Py,toFeeVersion:()=>Hy,toOverheadOverallFee:()=>My,toOverheadResourceBounds:()=>Ly,toTransactionVersion:()=>qy,v3Details:()=>jy,zeroResourceBounds:()=>Dy}),fd({},{ethRandomPrivateKey:()=>Wy,validateAndParseEthAddress:()=>Zy});var Xy="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||"undefined"!=typeof global&&global.fetch.bind(global)||(()=>{throw new Wp("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function Jy(t){return new Promise((e=>{setTimeout(e,t)}))}function Qy(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=ey(Qh(t.abi)),e.sierra_program=ey(Qh(t.sierra_program)),e.sierra_program=By(e.sierra_program),e}function tm(t){const e=af(t)?Xh(t):t;return Gy(t)?Qy(e):{...e,..."program"in e&&{program:By(e.program)}}}function em(t){return af(t.abi)?Xh(t.abi):t.abi}fd({},{Block:()=>om,createSierraContractClass:()=>Qy,extractAbi:()=>em,getDefaultNodeUrl:()=>nm,getDefaultNodes:()=>rm,getSupportedRpcVersions:()=>im,parseContract:()=>tm,validBlockTags:()=>sm,wait:()=>Jy});var nm=(t,e=!1,n)=>{e||kh.info("Using default public node url, please provide nodeUrl in provider options!");const r=rm(n??Th.get("rpcVersion"))[t??yh.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function rm(t){const e={...vh};return Object.keys(e).forEach((function(n,r){e[n]=e[n].map((e=>"https://starknet-sepolia.g.alchemy.com/starknet/version/rpc/"===e||"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/"===e?`${e}${Iy(t)}/uYLxCteYbHTFJpKSoKdVm`:`${e}${Iy(t)}`))})),e}function im(){return[...new Set(Object.values(bh))]}var sm=Object.values(qh),om=class{hash=null;number=null;tag=null;setIdentifier(t){if(af(t))if(Hf(t))this.number=parseInt(t,10);else if(lf(t))this.hash=t;else{if(!sm.includes(t))throw TypeError(`Block identifier unmanaged: ${t}`);this.tag=t}else of(t)?this.hash=pf(t):rf(t)?this.number=t:this.tag=qh.LATEST;if(rf(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash};function am(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}fd({},{fromCallsToExecuteCalldata:()=>um,fromCallsToExecuteCalldata_cairo1:()=>lm,getCompiledCalldata:()=>am,getExecuteCalldata:()=>dm,getVersionsByType:()=>hm,transformCallsToMulticallArrays:()=>cm});var cm=t=>{const e=[],n=[];return t.forEach((t=>{const r=Og.compile(t.calldata||[]);e.push({to:hf(t.contractAddress).toString(10),selector:hf(Df(t.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)})),{callArray:e,calldata:Og.compile({calldata:n})}},um=t=>{const{callArray:e,calldata:n}=cm(t);return[...Og.compile({callArray:e}),...n]},lm=t=>{const e=t.map((t=>({contractAddress:t.contractAddress,entrypoint:t.entrypoint,calldata:Array.isArray(t.calldata)&&"__compiled__"in t.calldata?t.calldata:Og.compile(t.calldata)})));return Og.compile({orderCalls:e})},dm=(t,e="0")=>"1"===e?lm(t):um(t);function hm(t){return"fee"===t?{v3:Bh.F3}:{v3:Bh.V3}}var fm={headers:{"Content-Type":"application/json"},blockIdentifier:qh.LATEST,retries:200},pm=class{id="RPC081";channelSpecVersion=bh.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(yh).includes(o)?this.nodeUrl=nm(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||nm(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Th.get("fetch")||Xy,this.blockIdentifier=r??fm.blockIdentifier,this.chainId=i,this.headers={...fm.headers,...s},this.retries=a??fm.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,rf(n)&&(this.batchClient=new tf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),kh.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Qh(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new Zp(n,t,e);if(r instanceof Wp)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Sy(this.channelSpecVersion,t)||kh.error(Ah.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Ty(t))throw new Wp(`${Ah.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=pf(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new om(r).identifier,s=Ef(t),o=Ef(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=pf(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(t=this.blockIdentifier){return(await this.getBlockWithTxHashes(t)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new om(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=pf(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new om(n).identifier,o=[];return r&&o.push(H.SKIP_VALIDATE),i&&o.push(H.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map((t=>this.buildTransaction(t))),simulation_flags:o})}async waitForTransaction(t,e){const n=pf(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[j.REJECTED],u=e?.successStates??[j.ACCEPTED_ON_L2,j.ACCEPTED_ON_L1],l={[kt.RECEIVED]:Ah.txEvictedFromMempool,[kt.PRE_CONFIRMED]:Ah.consensusFailed,[kt.CANDIDATE]:Ah.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Jy(a);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,o=!0,r}(u.includes(t)||u.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof Zp&&t.isType("TXN_HASH_NOT_FOUND")){kh.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jy(a)}return f}getStorageAt(t,e,n=this.blockIdentifier){const r=pf(t),i=mf(e),s=new om(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new om(e).identifier,i={simulation_flags:n?[H.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map((t=>this.buildTransaction(t,"fee"))),block_id:r,...i})}async invoke(t,e){let n;if(!Ay(e))throw Error(Ah.legacyTxRPC08Message);if(!Ph(e.resourceBounds))throw Error(Ah.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:q.INVOKE,sender_address:t.contractAddress,calldata:Og.toHex(t.calldata),version:W.V3,signature:Py(t.signature),nonce:pf(e.nonce),resource_bounds:zy(e.resourceBounds),tip:pf(e.tip),paymaster_data:e.paymasterData.map((t=>pf(t))),account_deployment_data:e.accountDeploymentData.map((t=>pf(t))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(!Gy(t)||!Ay(i))throw Error(Ah.legacyTxRPC08Message);if(!Ph(i.resourceBounds))throw Error(Ah.SWOldV3);return s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:q.DECLARE,sender_address:n,compiled_class_hash:r||"",version:W.V3,signature:Py(e),nonce:pf(i.nonce),contract_class:{sierra_program:Cy(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:zy(i.resourceBounds),tip:pf(i.tip),paymaster_data:i.paymasterData.map((t=>pf(t))),account_deployment_data:i.accountDeploymentData.map((t=>pf(t))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(!Ay(i))throw Error(Ah.legacyTxRPC08Message);if(!Ph(i.resourceBounds))throw Error(Ah.SWOldV3);return s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:q.DEPLOY_ACCOUNT,version:W.V3,signature:Py(r),nonce:pf(i.nonce),contract_address_salt:pf(n||0),constructor_calldata:Og.toHex(e||[]),class_hash:pf(t),resource_bounds:zy(i.resourceBounds),tip:pf(i.tip),paymaster_data:i.paymasterData.map((t=>pf(t))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new om(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Df(t.entrypoint),calldata:Og.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:Zy(n),to_address:pf(r),entry_point_selector:Lf(i),payload:If(s)},a=new om(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=hm(e);let r;if(!Ay(t))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:Py(t.signature),nonce:pf(t.nonce),resource_bounds:zy(t.resourceBounds),tip:pf(t.tip),paymaster_data:t.paymasterData.map((t=>pf(t))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map((t=>pf(t)))},t.type===q.INVOKE)return{type:q.INVOKE,sender_address:t.contractAddress,calldata:Og.toHex(t.calldata),version:pf(t.version||n.v3),...r};if(t.type===q.DECLARE){if(!Gy(t.contract))throw kh.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:Cy(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:pf(t.version||n.v3),...r}}if(t.type===q.DEPLOY_ACCOUNT){const{account_deployment_data:e,...i}=r;return{type:t.type,constructor_calldata:Og.toHex(t.constructorCalldata||[]),class_hash:pf(t.classHash),contract_address_salt:pf(t.addressSalt||0),version:pf(t.version||n.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},gm={};fd(gm,{RpcChannel:()=>mm});var ym={headers:{"Content-Type":"application/json"},blockIdentifier:qh.LATEST,retries:200},mm=class{id="RPC090";channelSpecVersion=bh.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:u,waitMode:l}=t||{};Object.values(yh).includes(o)?this.nodeUrl=nm(o,t?.default,this.channelSpecVersion):this.nodeUrl=o||nm(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||Th.get("fetch")||Xy,this.blockIdentifier=r??ym.blockIdentifier,this.chainId=i,this.headers={...ym.headers,...s},this.retries=a??ym.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=l??!1,this.requestId=0,rf(n)&&(this.batchClient=new tf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),kh.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Qh(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new Zp(n,t,e);if(r instanceof Wp)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,n),r}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(Sy(this.channelSpecVersion,t)||kh.error(Ah.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Ty(t))throw new Wp(`${Ah.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=pf(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new om(r).identifier,s=Ef(t),o=Ef(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=pf(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(t=this.blockIdentifier){return(await this.getBlockWithTxHashes(t)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new om(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new om(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=pf(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=pf(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new om(n).identifier,o=[];return r&&o.push(It.SKIP_VALIDATE),i&&o.push(It.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map((t=>this.buildTransaction(t))),simulation_flags:o})}async waitForTransaction(t,e){const n=pf(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],u=e?.successStates??[Ot.ACCEPTED_ON_L2,Ot.ACCEPTED_ON_L1],l={[kt.RECEIVED]:Ah.txEvictedFromMempool,[kt.PRE_CONFIRMED]:Ah.consensusFailed,[kt.CANDIDATE]:Ah.txFailsBlockBuildingValidation},d=[];let h;for(;!s;){await Jy(a);try{h=await this.getTransactionStatus(n),d.push(h.finality_status);const t=h.execution_status,e=h.finality_status;if(!e)throw new Error("waiting for transaction status");if(c.includes(t)||c.includes(e)){const n=`${t}: ${e}`,r=new Error(n);throw r.response=h,o=!0,r}(u.includes(t)||u.includes(e))&&(s=!0)}catch(t){if(t instanceof Error&&o)throw t;if(t instanceof Zp&&t.isType("TXN_HASH_NOT_FOUND")){kh.info("txLife: ",d);const t=l[d.at(-1)];if(t&&i<=0)throw new Error(t);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(n)}catch(t){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jy(a)}return f}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const o=r?.retryInterval??500,a=[Bt.REVERTED],c=[Ot.ACCEPTED_ON_L2,Ot.ACCEPTED_ON_L1,Ot.PRE_CONFIRMED];let u;const l=(new Date).getTime();for(;s>0;){await Jy(o),u=await this.getTransactionStatus(t),kh.info(`${s} ${JSON.stringify(u)} ${((new Date).getTime()-l)/1e3}s.`);const n=u.execution_status??"",r=u.finality_status;if(a.includes(n)){const t=new Error(`${n}: ${r}`);throw t.response=u,t}if(c.includes(r)){let t=i;for(;t===i&&s>0;){if(t=BigInt(await this.getNonceForAddress(e,qh.PRE_CONFIRMED)),kh.info(`${s} Checking new nonce ${t} ${((new Date).getTime()-l)/1e3}s.`),t!==i)return!0;await Jy(o),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=pf(t),i=mf(e),s=new om(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=pf(t),r=new om(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new om(e).identifier,i={simulation_flags:n?[It.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map((t=>this.buildTransaction(t,"fee"))),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:yd.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:yd.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:yd.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new om(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:Df(t.entrypoint),calldata:Og.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:Zy(n),to_address:pf(r),entry_point_selector:Lf(i),payload:If(s)},a=new om(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=hm(e);ef(Ay(t),Ah.legacyTxRPC08Message),ef("transaction"!==e||Ph(t.resourceBounds),Ah.SWOldV3);const r={signature:Py(t.signature),nonce:pf(t.nonce),resource_bounds:zy(t.resourceBounds),tip:pf(t.tip),paymaster_data:t.paymasterData.map((t=>pf(t))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map((t=>pf(t))),version:qy(n.v3,t.version)};if(t.type===yd.ETransactionType.INVOKE)return{type:Tt.INVOKE,sender_address:t.contractAddress,calldata:Og.toHex(t.calldata),...r};if(t.type===yd.ETransactionType.DECLARE)return ef(Gy(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:Cy(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===yd.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:e,...n}=r;return{type:t.type,constructor_calldata:Og.toHex(t.constructorCalldata||[]),class_hash:pf(t.classHash),contract_address_salt:pf(t.addressSalt||0),...n}}throw Error("RPC buildTransaction received unknown TransactionType")}},wm=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||"undefined"!=typeof global&&global.WebSocket,class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map((t=>({resourceBounds:Ly(t,this.resourceBoundsOverhead),overall_fee:My(t,this.resourceBoundsOverhead),unit:t.unit})))}parseSimulateTransactionResponse(t){return t.map((t=>({transaction_trace:t.transaction_trace,resourceBounds:Ly(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:My(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit})))}parseContractClassResponse(t){return{...t,abi:af(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}});function bm(t){return"0x3"===t.version&&"tip"in t&&af(t.tip)&&("INVOKE"===t.type||"DECLARE"===t.type||"DEPLOY_ACCOUNT"===t.type)}function _m(t,e=!0){return t.transactions.filter(bm).map((t=>BigInt(t.tip))).filter((t=>e||t>0n))}function vm(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function Em(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,o=t[r];return o+(t[i]-o)*BigInt(Math.round(1e3*s))/1000n}function Am(t){ef(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce(((t,e)=>e<t?e:t),Zd.max),n=t.reduce(((t,e)=>e>t?e:t),0n),r=t.reduce(((t,e)=>t+e),0n)/BigInt(t.length),i=[...t].sort(((t,e)=>t<e?-1:t>e?1:0)),s=Math.floor(i.length/2);let o;o=i.length%2==0?(i[s-1]+i[s])/2n:i[s];const a=new Map;t.forEach((t=>{a.set(t,(a.get(t)||0)+1)}));const{modeTip:c}=Array.from(a.entries()).reduce(((t,[e,n])=>n>t.maxCount||n===t.maxCount&&e<t.modeTip?{maxCount:n,modeTip:e}:t),{maxCount:0,modeTip:0n});return{minTip:e,maxTip:n,averageTip:r,medianTip:o,modeTip:c,recommendedTip:o,p90Tip:Em(i,90),p95Tip:Em(i,95)}}async function Sm(t,e){try{const n=await t.getBlockWithTxs(e);return rf(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(t){throw new Wp(`Failed to determine starting block number: ${t instanceof Error?t.message:"Unknown error"}`)}}async function Tm(t,e){try{return await t.getBlockWithTxs(e)}catch(t){return kh.warn(`Failed to fetch block ${e}:`,t),null}}function Im(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},((e,n)=>t-n))}async function km(t,e=qh.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return ef(Number.isInteger(r),"maxBlocks parameter must be an integer"),ef(r>=1,"maxBlocks parameter must be greater than or equal to 1"),ef(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),ef(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),ef(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),function(t){return!!t.channel.batchClient}(t)?async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Sm(t,e),o=Im(n,r),a=await async function(t,e){const n=e.map((async e=>{try{return await t.getBlockWithTxs(e)}catch(t){return kh.warn(`Failed to fetch block ${e} in parallel:`,t),null}}));return Promise.all(n)}(t,o),c=a.filter((t=>null!==t)).flatMap((t=>_m(t,s))),u=a.filter((t=>null!==t)).length;return c.length<i?(kh.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),vm(u,c)):{...Am(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(t){throw new Wp(`Failed to analyze tip statistics (parallel): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n):async function(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const n=await Sm(t,e),o=Im(n,r),a=[];let c=0;for(const e of o){const n=await Tm(t,e);if(n){c+=1;const t=_m(n,s);if(a.push(...t),a.length>=i)break}}return a.length<i?(kh.error(`Insufficient transaction data: found ${a.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,n-r+1)}-${n}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),vm(c,a)):{...Am(a),metrics:{blocksAnalyzed:c,transactionsTipsFound:a}}}catch(t){throw new Wp(`Failed to analyze tip statistics (sequential): ${t instanceof Error?t.message:"Unknown error"}`)}}(t,e,n)}var Om=class t{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=t.isSuccess(e)?["SUCCEEDED",e]:t.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value:t=>n in t?t[n](r):t._(),writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>"SUCCEEDED"===n,writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>"REVERTED"===n,writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>"ERROR"===n,writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(t){return t.execution_status===Vh.SUCCEEDED}static isReverted(t){return t.execution_status===Vh.REVERTED}},Bm={[Vh.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[Vh.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function Cm(t){const e=Bm[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,o=s(t);n={...i(t),statusReceipt:r,value:o,match:t=>r in t?t[r](o):t._(),isSuccess:()=>"SUCCEEDED"===r,isReverted:()=>"REVERTED"===r,isError:()=>!1}}else{const t=new Error("Unknown response type");n={statusReceipt:"ERROR",value:t,match:e=>"ERROR"in e?e.ERROR(t):e._(),isSuccess:()=>!1,isReverted:()=>!1,isError:()=>!0}}return Object.setPrototypeOf(n,Om.prototype),Object.defineProperty(n,"constructor",{value:Om,writable:!1,enumerable:!1,configurable:!1}),n}fd({},{encodeData:()=>zm,encodeType:()=>Hm,encodeValue:()=>Km,getDependencies:()=>qm,getMessageHash:()=>Gm,getStructHash:()=>$m,getTypeHash:()=>jm,isMerkleTreeType:()=>Vm,prepareSelector:()=>Fm,validateTypedData:()=>Mm,verifyMessage:()=>Ym}),fd({},{MerkleTree:()=>xm,proofMerklePath:()=>Nm});var xm=class t{leaves;branches=[];root;hashMethod;constructor(t,e=sy){this.hashMethod=e,this.leaves=t,this.root=this.build(t)}build(e){if(1===e.length)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(t.hash(e[r],"0x0",this.hashMethod)):n.push(t.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(t,e,n=sy){const[r,i]=[BigInt(t),BigInt(e)].sort(((t,e)=>t>=e?1:-1));return n(r,i)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(-1===i)throw new Error("leaf not found");if(1===n.length)return r;const s=i%2==0,o=(s?n[i+1]:n[i-1])??"0x0",a=[...r,o],c=this.leaves.length===n.length?-1:this.branches.findIndex((t=>t.length===n.length)),u=this.branches[c+1]??[this.root];return this.getProof(t.hash(s?e:o,s?o:e,this.hashMethod),u,a)}};function Nm(t,e,n,r=sy){if(0===n.length)return t===e;const[i,...s]=n;return Nm(t,xm.hash(e,i,r),s,r)}var Rm={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Pm={[yd.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:hy,hashMerkleMethod:dy,escapeTypeString:t=>`"${t}"`,presetTypes:Rm},[yd.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:ay,hashMerkleMethod:sy,escapeTypeString:t=>t,presetTypes:{}}};function Dm(t,e,{min:n,max:r}){const i=BigInt(t);ef(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function Lm({types:t,domain:e}){return Pm[yd.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===yd.TypedDataRevision.ACTIVE?yd.TypedDataRevision.ACTIVE:Pm[yd.TypedDataRevision.LEGACY].domain in t&&(e.revision??yd.TypedDataRevision.LEGACY)===yd.TypedDataRevision.LEGACY?yd.TypedDataRevision.LEGACY:void 0}function Um(t){try{return pf(t)}catch(e){if(af(t))return pf(Gf(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function Mm(t){const e=t;return Boolean(e.message&&e.primaryType&&e.types&&Lm(e))}function Fm(t){return lf(t)?t:Df(t)}function Vm(t){return"merkletree"===t.type}function qm(t,e,n=[],r="",i=yd.TypedDataRevision.LEGACY){let s=[e];return"*"===e[e.length-1]?s=[e.slice(0,-1)]:i===yd.TypedDataRevision.ACTIVE&&("enum"===e?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map((t=>"*"===t[t.length-1]?t.slice(0,-1):t)))),s.filter((e=>!n.includes(e)&&t[e])).reduce(((e,n)=>[...e,...[n,...t[n].reduce(((e,n)=>[...e,...qm(t,n.type,e,n.contains,i).filter((t=>!e.includes(t)))]),[])].filter((t=>!e.includes(t)))]),[])}function Hm(t,e,n=yd.TypedDataRevision.LEGACY){const r=n===yd.TypedDataRevision.ACTIVE?{...t,...Pm[n].presetTypes}:t,[i,...s]=qm(r,e,void 0,void 0,n),o=i?[i,...s.sort()]:[],a=Pm[n].escapeTypeString;return o.map((t=>{const e=r[t].map((t=>{const e="enum"===t.type&&n===yd.TypedDataRevision.ACTIVE?t.contains:t.type,r=e.match(/^\(.*\)$/)?`(${e.slice(1,-1).split(",").map((t=>t?a(t):t)).join(",")})`:a(e);return`${a(t.name)}:${r}`}));return`${a(t)}(${e})`})).join("")}function jm(t,e,n=yd.TypedDataRevision.LEGACY){return Df(Hm(t,e,n))}function Km(t,e,n,r={},i=yd.TypedDataRevision.LEGACY){if(t[e])return[e,$m(t,e,n,i)];if(Pm[i].presetTypes[e])return[e,$m(Pm[i].presetTypes,e,n,i)];if(e.endsWith("*")){const r=n.map((n=>Km(t,e.slice(0,-1),n,void 0,i)[1]));return[e,Pm[i].hashMethod(r)]}switch(e){case"enum":if(i===yd.TypedDataRevision.ACTIVE){const[s,o]=Object.entries(n)[0],a=t[r.parent].find((t=>t.name===r.key)),c=t[a.contains],u=c.find((t=>t.name===s)),l=c.indexOf(u),d=u.type.slice(1,-1).split(",").map(((e,n)=>{if(!e)return e;const r=o[n];return Km(t,e,r,void 0,i)[1]}));return[e,Pm[i].hashMethod([l,...d])]}return[e,Um(n)];case"merkletree":{const e=function(t,e){if(e.parent&&e.key){const n=t[e.parent].find((t=>t.name===e.key));if(!Vm(n))throw new Error(`${e.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return n.contains}return"raw"}(t,r),s=n.map((n=>Km(t,e,n,void 0,i)[1])),{root:o}=new xm(s,Pm[i].hashMerkleMethod);return["felt",o]}case"selector":return["felt",Fm(n)];case"string":if(i===yd.TypedDataRevision.ACTIVE){const t=Zf(n),r=[t.data.length,...t.data,t.pending_word,t.pending_word_len];return[e,Pm[i].hashMethod(r)]}return[e,Um(n)];case"i128":if(i===yd.TypedDataRevision.ACTIVE){const t=BigInt(n);return Dm(t,e,ah),[e,Um(t<0n?$d+t:t)]}return[e,Um(n)];case"timestamp":case"u128":return i===yd.TypedDataRevision.ACTIVE&&Dm(n,e,nh),[e,Um(n)];case"felt":case"shortstring":return i===yd.TypedDataRevision.ACTIVE&&Dm(Um(n),e,Zd),[e,Um(n)];case"ClassHash":case"ContractAddress":return i===yd.TypedDataRevision.ACTIVE&&Dm(n,e,Zd),[e,Um(n)];case"bool":return i===yd.TypedDataRevision.ACTIVE&&ef(sf(n),`Type mismatch for ${e} ${n}`),[e,Um(n)];default:if(i===yd.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,Um(n)]}}function zm(t,e,n,r=yd.TypedDataRevision.LEGACY){const i=t[e]??Pm[r].presetTypes[e],[s,o]=i.reduce((([i,s],o)=>{if(void 0===n[o.name]||null===n[o.name]&&"enum"!==o.type)throw new Error(`Cannot encode data: missing data for '${o.name}'`);const a=n[o.name],c={parent:e,key:o.name},[u,l]=Km(t,o.type,a,c,r);return[[...i,u],[...s,l]]}),[["felt"],[jm(t,e,r)]]);return[s,o]}function $m(t,e,n,r=yd.TypedDataRevision.LEGACY){return Pm[r].hashMethod(zm(t,e,n,r)[1])}function Gm(t,e){if(!Mm(t))throw new Error("Typed data does not match JSON schema");const n=Lm(t),{domain:r,hashMethod:i}=Pm[n];return i([Gf("StarkNet Message"),$m(t.types,r,t.domain,n),e,$m(t.types,t.primaryType,t.message,n)])}function Ym(t,e,n,r){const i=Mm(t);if(!xf(t)&&!i)throw new Error("message has a wrong format.");if(i&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!xf(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Gm(t,r):pf(t);return ws(Array.isArray(e)?new vs(BigInt(e[0]),BigInt(e[1])):e,s,pf(n))}var Wm=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new wm;else{const e=t;if(e&&e.specVersion)if(Sy("0.8",e.specVersion))this.channel=new Oh.RpcChannel({...e,waitMode:!1});else{if(!Sy("0.9",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new gm.RpcChannel({...e,waitMode:!1})}else if(Sy("0.8",Th.get("rpcVersion")))this.channel=new Oh.RpcChannel({...e,waitMode:!1});else{if(!Sy("0.9",Th.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new gm.RpcChannel({...e,waitMode:!1})}this.responseParser=new wm(e?.resourceBoundsOverhead)}}static async create(t){const e=new Oh.RpcChannel({...t}),n=await e.getSpecVersion();if(Ty(n)||kh.warn(`Using incompatible node spec version ${n}`),Sy("0.8",n))return new this({...t,specVersion:bh.v0_8_1});if(Sy("0.9",n))return new this({...t,specVersion:bh.v0_9_0});throw new Wp(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(bh).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getStarknetVersion(t){return this.channel.getStarknetVersion(t)}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=qh.LATEST,e=5e3){if(t===qh.LATEST)return;if("pending"===t)return;const n=await this.getBlockNumber(),r=t===qh.PRE_CONFIRMED?n+1:Number(pf(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Jy(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof gm.RpcChannel)return async function(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}(this.channel,t);throw new Wp("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);ef("L1_HANDLER"===e.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e;return Uf([n[0],r,s,i,n.length-1,...n.slice(1)])}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t);return Cm(this.responseParser.parseTransactionReceipt(e))}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then((t=>this.responseParser.parseSimulateTransactionResponse(t)))}async waitForTransaction(t,e){return Cm(await this.channel.waitForTransaction(t,e))}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof gm.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else{if(!e)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(e,n)}return Gy(i)?r?{cairo:"1",compiler:Pp(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:yd.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:yd.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:yd.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then((t=>this.responseParser.parseFeeEstimateBulkResponse(t)))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Oh.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof gm.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return async function(t,e,n,r,i,s){const o=Mm(e);if(!xf(e)&&!o)throw new Error("message has a wrong format.");if(!xf(r))throw new Error("accountAddress shall be a BigNumberish");const a=o?Gm(e,r):pf(e),c=i?[i]:["isValidSignature","is_valid_signature"],u=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let l;for(const e of c)try{const i=await t.callContract({contractAddress:pf(r),entrypoint:e,calldata:Og.compile({hash:hf(a).toString(),signature:Ny(n)})});if(u.nokResponse.includes(i[0].toString()))return!1;if(0===u.okResponse.length||u.okResponse.includes(i[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(t){if(u.error.some((e=>t.message.includes(e))))return!1;l=t}throw Error(`Signature verification Error: ${l}`)}(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=Yy(t,await this.channel.getStarknetVersion()).classHash;else{if(!t.classHash)throw Error("contractClassIdentifier type not satisfied");n=t.classHash}try{return await this.getClass(n,e)instanceof Object}catch(t){if(t instanceof Wp)return!1;throw t}}async prepareInvocations(t){const e=[];for(const n of t)n.type===yd.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return km(this,t,e)}};fd({},{StarknetIdContract:()=>sw,StarknetIdIdentityContract:()=>aw,StarknetIdMulticallContract:()=>uw,StarknetIdPfpContract:()=>fw,StarknetIdPopContract:()=>gw,StarknetIdVerifierContract:()=>dw,dynamicCallData:()=>bw,dynamicFelt:()=>ww,execution:()=>mw,getStarknetIdContract:()=>ow,getStarknetIdIdentityContract:()=>cw,getStarknetIdMulticallContract:()=>lw,getStarknetIdPfpContract:()=>pw,getStarknetIdPopContract:()=>yw,getStarknetIdVerifierContract:()=>hw,isStarkDomain:()=>_w,useDecoded:()=>rw,useEncoded:()=>iw});var Zm="abcdefghijklmnopqrstuvwxyz0123456789-",Xm=BigInt(Zm.length+1),Jm="",Qm=BigInt(Zm.length),tw=BigInt(Jm.length),ew=BigInt(Jm.length+1);function nw(t){let e=0;for(;t.endsWith(Jm[Jm.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function rw(t){let e="";return t.forEach((t=>{for(;t!==Hd;){const n=t%Xm;if(t/=Xm,n===BigInt(Zm.length)){const n=t/ew;if(n===Hd){const r=t%ew;t=n,e+=r===Hd?Zm[0]:Jm[Number(r)-1]}else e+=Jm[Number(t%tw)],t/=tw}else e+=Zm[Number(n)]}const[n,r]=nw(e);r&&(e=n+(r%2==0?Jm[Jm.length-1].repeat(r/2-1)+Jm[0]+Zm[1]:Jm[Jm.length-1].repeat((r-1)/2+1))),e+="."})),e?e.concat("stark"):e}function iw(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(Jm[0]+Zm[1])){const[e,n]=nw(t.substring(0,t.length-2));t=e+Jm[Jm.length-1].repeat(2*(n+1))}else{const[e,n]=nw(t);n&&(t=e+Jm[Jm.length-1].repeat(1+2*(n-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=Zm.indexOf(i),o=BigInt(Zm.indexOf(i));if(-1!==s)r===t.length-1&&t[r]===Zm[0]?(e+=n*Qm,n*=Xm,n*=Xm):(e+=n*o,n*=Xm);else if(-1!==Jm.indexOf(i)){e+=n*Qm,n*=Xm;const s=(r===t.length-1?1:0)+Jm.indexOf(i);e+=n*BigInt(s),n*=tw}}return e}var sw={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ow(t){switch(t){case mh.SN_MAIN:return sw.MAINNET;case mh.SN_SEPOLIA:return sw.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var aw={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function cw(t){switch(t){case mh.SN_MAIN:return aw.MAINNET;case mh.SN_SEPOLIA:return aw.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var uw="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function lw(t){switch(t){case mh.SN_MAIN:case mh.SN_SEPOLIA:return uw;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var dw={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function hw(t){switch(t){case mh.SN_MAIN:return dw.MAINNET;case mh.SN_SEPOLIA:return dw.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var fw={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function pw(t){switch(t){case mh.SN_MAIN:return fw.MAINNET;case mh.SN_SEPOLIA:return fw.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var gw={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function yw(t){switch(t){case mh.SN_MAIN:return gw.MAINNET;case mh.SN_SEPOLIA:return gw.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function mw(t,e=void 0,n=void 0){return new Fp({Static:t,IfEqual:e?Up(e[0],e[1],e[2]):void 0,IfNotEqual:n?Up(n[0],n[1],n[2]):void 0})}function ww(t,e=void 0){return new Fp({Hardcoded:t,Reference:e?Up(e[0],e[1]):void 0})}function bw(t,e=void 0,n=void 0){return new Fp({Hardcoded:t,Reference:e?Up(e[0],e[1]):void 0,ArrayReference:n?Up(n[0],n[1]):void 0})}function _w(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var vw=class t{async getStarkName(e,n){return t.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return t.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,o,a){return t.getStarkProfile(this,e,n,r,i,s,o,a)}static async getStarkName(t,e,n){const r=await t.getChainId(),i=n??ow(r);try{const n=rw((await t.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:Og.compile({address:e,hint:[]})})).map((t=>BigInt(t))).slice(1));if(!n)throw Error("Starkname not found");return n}catch(t){if(t instanceof Error&&"Starkname not found"===t.message)throw t;throw Error("Could not get stark name")}}static async getAddressFromStarkName(t,e,n){const r=e.endsWith(".stark")?e:`${e}.stark`;if(!_w(r))throw new Error("Invalid domain, must be a valid .stark domain");const i=await t.getChainId(),s=n??ow(i);try{const e=r.replace(".stark","").split(".").map((t=>iw(t).toString(10)));return(await t.callContract({contractAddress:s,entrypoint:"domain_to_address",calldata:Og.compile({domain:e,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,e,n,r,i,s,o,a){const c=await t.getChainId(),u=n??ow(c),l=r??cw(c),d=i??hw(c),h=s??pw(c),f=o??yw(c),p=a??lw(c);try{const n=[{execution:mw({}),to:bw(u),selector:bw(Df("address_to_domain")),calldata:[bw(e),bw("0")]},{execution:mw({}),to:ww(u),selector:ww(Df("domain_to_id")),calldata:[bw(void 0,void 0,[0,0])]},{execution:mw({}),to:ww(l),selector:ww(Df("get_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("twitter")),bw(d),bw("0")]},{execution:mw({}),to:ww(l),selector:ww(Df("get_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("github")),bw(d),bw("0")]},{execution:mw({}),to:ww(l),selector:ww(Df("get_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("discord")),bw(d),bw("0")]},{execution:mw({}),to:ww(l),selector:ww(Df("get_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("proof_of_personhood")),bw(f),bw("0")]},{execution:mw({}),to:ww(l),selector:ww(Df("get_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("nft_pp_contract")),bw(h),bw("0")]},{execution:mw({}),to:ww(l),selector:ww(Df("get_extended_verifier_data")),calldata:[bw(void 0,[1,0]),bw(Gf("nft_pp_id")),bw("2"),bw(h),bw("0")]},{execution:mw(void 0,void 0,[6,0,0]),to:ww(void 0,[6,0]),selector:ww(Df("tokenURI")),calldata:[bw(void 0,[7,1]),bw(void 0,[7,2])]}],r=await t.callContract({contractAddress:p,entrypoint:"aggregate",calldata:Og.compile({calls:n})});if(Array.isArray(r)){const t=parseInt(r[0],16),e=[];let n=1;for(let i=0;i<t&&n<r.length;i+=1){const t=parseInt(r[n],16);n+=1;const i=r.slice(n,n+t);e.push(i),n+=t}const i=rw(e[0].slice(1).map((t=>BigInt(t)))),s="0x0"!==e[2][0]?BigInt(e[2][0]).toString():void 0,o="0x0"!==e[3][0]?BigInt(e[3][0]).toString():void 0,a="0x0"!==e[4][0]?BigInt(e[4][0]).toString():void 0,c="0x1"===e[5][0];return{name:i,twitter:s,github:o,discord:a,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?e[8].slice(1).map((t=>Yf(t))).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(e[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(t){if(t instanceof Error)throw t;throw Error("Could not get user stark profile data from address")}}};function Ew(t){return iw(t.endsWith(".brother")?t.replace(".brother",""):t)}function Aw(t){const e=rw([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e?`${e}.brother`:e}function Sw(t){return mh.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var Tw=class t{async getBrotherName(e,n){return t.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return t.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return t.getBrotherProfile(this,e,n)}static async getBrotherName(t,e,n){await t.getChainId();const r=n??Sw();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Og.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother name not found");return Aw(BigInt(n[0]))}catch(t){if(t instanceof Error&&"Brother name not found"===t.message)throw t;throw Error("Could not get brother name")}}static async getAddressFromBrotherName(t,e,n){const r=e.endsWith(".brother")?e:`${e}.brother`;if(!r.endsWith(".brother"))throw new Error("Invalid domain, must be a valid .brother domain");await t.getChainId();const i=n??Sw();try{const e=await t.callContract({contractAddress:i,entrypoint:"get_details_by_domain",calldata:Og.compile({domain:Ew(r)})});if(!e[0]||"0x0"===e[1])throw Error("Could not get address from brother name");return e[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,e,n){await t.getChainId();const r=n??Sw();try{const n=await t.callContract({contractAddress:r,entrypoint:"getPrimary",calldata:Og.compile({user:e})});if(!n[0]||"0x0"===n[0])throw Error("Brother profile not found");const i=Aw(BigInt(n[0])).replace(".brother",""),s=await t.callContract({contractAddress:r,entrypoint:"get_details_by_domain",calldata:Og.compile({domain:Ew(i)})});return{name:i,resolver:s[1],tokenId:s[2],expiryDate:parseInt(s[3],16),lastTransferTime:parseInt(s[4],16)}}catch(t){if(t instanceof Error&&"Brother profile not found"===t.message)throw t;throw Error("Could not get brother profile")}}},Iw=class extends(od(Wm,vw,Tw)){};function kw(t){return new ap(t).toBigInt()}function Ow(t){return ap.is(t)}function Bw(t){return new ap(t).toUint256HexString()}function Cw(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function xw(t){const e=t.calldata??[],n=Array.isArray(e)?e:Og.compile(e);return{to:t.contractAddress,selector:Df(t.entrypoint),calldata:n}}function Nw(t,e){const n=xw(t);return"1"===e?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Rw(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,..."2"===e?{revision:"1"}:{}}}function Pw(t,e,n,r,i){return"1"===i?{types:Yh,primaryType:"OutsideExecution",domain:Rw(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map((t=>Nw(t,i)))}}:{types:Wh,primaryType:"OutsideExecution",domain:Rw(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map((t=>Nw(t,i)))}}}function Dw(t){const e=t.outsideExecution,n=Ny(t.signature);return Og.compile({outside_execution:e,signature:n})}function Lw(t){return(Array.isArray(t)?t:[t]).map((t=>{let e;if("1"===t.version)e="execute_from_outside";else{if("2"!==t.version)throw new Error("Unsupported OutsideExecution version");e="execute_from_outside_v2"}return{contractAddress:pf(t.signerAddress),entrypoint:e,calldata:Dw(t)}}))}async function Uw(t,e,n){const r={contractAddress:pf(e),entrypoint:"supports_interface",calldata:[pf(n)]};try{const e=await t.callContract(r);return 0n!==BigInt(e[0])}catch{return!1}}new Wm({default:!0}),fd({},{bnToUint256:()=>Bw,isUint256:()=>Ow,uint256ToBN:()=>kw}),fd({},{buildExecuteFromOutsideCall:()=>Lw,buildExecuteFromOutsideCallData:()=>Dw,getOutsideCall:()=>xw,getTypedData:()=>Pw,toOutsideCallV2:()=>Cw}),fd({},{supportsInterface:()=>Uw}),fd({},{assertCallsAreStrictlyEqual:()=>Fw,assertPaymasterTransactionSafety:()=>Vw,getDefaultPaymasterNodeUrl:()=>Mw});var Mw=(t,e=!1)=>{e||kh.info("Using default public node url, please provide nodeUrl in provider options!");const n=Eh[t??yh.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Fw(t,e){const n="Provided calls are not strictly equal to the returned calls";ef(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=Cw(e[r]),o=t=>hf(t).toString(16).toLowerCase();ef(o(i.contractAddress)===o(s.To),`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),ef(Df(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const a=Og.toCalldata(i.calldata),c=Og.toCalldata(s.Calldata);ef(a.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${a.length}, Got length: ${c.length}`);for(let t=0;t<a.length;t+=1)ef(BigInt(a[t])===BigInt(c[t]),`${n}: Calldata value mismatch at call ${r}, parameter ${t}. Expected: ${a[t]}, Got: ${c[t]}`)}}var Vw=(t,e,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===t.type||"deploy_and_invoke"===t.type)){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;Fw(e,i),((t,e)=>{const n=Cw(t[t.length-1]);ef(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")})(i,n.feeMode.gasToken),r&&(ef(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((t,e)=>{const n=Cw(t[t.length-1]),r=Og.toCalldata(n.Calldata)[1];ef(BigInt(r)===BigInt(e),"Gas token value is not equal to the provided gas fees")})(i,t.fee.suggested_max_fee_in_gas_token))}},qw=t=>"sponsored"===t.mode?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},Hw=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,jw=t=>{return{version:t.version,feeMode:(n=t.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(e=t.time_bounds,e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)};var e,n},Kw={"Content-Type":"application/json"},zw=class t{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof t)return this.nodeUrl=e.nodeUrl,this.headers={...Kw,...e.headers},this.baseFetch=e.baseFetch,void(this.requestId=e.requestId);if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e)return this.nodeUrl=e.nodeUrl??Mw(void 0),this.headers={...Kw,...e.headers},this.baseFetch=e.baseFetch??Xy,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(yh).includes(n)?this.nodeUrl=Mw(n,e?.default):this.nodeUrl=n||Mw(void 0,e?.default),this.baseFetch=i??Xy,this.headers={...Kw,...r},this.requestId=0}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Qh(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new Zp(n,t,e);if(r instanceof Wp)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{this.requestId+=1;const n=await this.fetch(t,e,this.requestId),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,calls:(r=t.invoke.calls,r.map((t=>({to:t.contractAddress,selector:Df(t.entrypoint),calldata:Og.toHex(t.calldata)}))))}};break;default:n=t}var r;const i={version:e.version,fee_mode:qw(e.feeMode),time_bounds:Hw(e.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:i}),o={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:jw(s.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:jw(s.parameters),fee:o};default:return{type:"deploy",deployment:s.deployment,parameters:jw(s.parameters),fee:o}}}async executeTransaction(t,e){let n;switch(t.type){case"invoke":case"deploy_and_invoke":n={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Py(t.invoke.signature)}};break;default:n=t}const r={version:e.version,fee_mode:qw(e.feeMode),time_bounds:Hw(e.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then((t=>t.map((t=>({token_address:t.token_address,decimals:t.decimals,priceInStrk:BigInt(t.price_in_strk)})))))}},$w=new zw({default:!0}),Gw=class{address;entryPoint;constructor(t,e){this.address=t??uh.ADDRESS,this.entryPoint=e??uh.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map((t=>{const{classHash:n,salt:r,unique:i=!0,constructorCalldata:s=[],abi:o}=t,a=am(s,(()=>{if(o){const t=new Og(o),e=Object.values(s);return t.validate(Hh,"constructor",e),t.compile("constructor",e)}return Og.compile(s)})),c=r??xy();return{call:{contractAddress:pf(this.address),entrypoint:this.entryPoint,calldata:[n,c,kf(i),a.length,...a]},address:cy(i?Ls(e,c):c,n,a,i?this.address:0)}}));return{calls:n.map((t=>t.call)),addresses:n.map((t=>t.address))}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find((t=>pf(t.from_address)===pf(this.address)))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},Yw=new Gw(uh.ADDRESS,uh.ENTRYPOINT),Ww=(new Gw(ch.ADDRESS,ch.ENTRYPOINT),class extends Iw{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:o,defaultTipType:a}=t;super(e),this.address=n.toLowerCase(),this.signer=af(r)||r instanceof Uint8Array?new class{pk;constructor(t=Es.randomPrivateKey()){this.pk=t instanceof Uint8Array?kd(t):pf(t)}async getPubKey(){return Is(this.pk)}async signMessage(t,e){const n=Gm(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=dm(t,e.cairoVersion);let r;if(!Object.values(yd.ETransactionVersion3).includes(e.version))throw Error("unsupported signTransaction version");{const t=e;r=Xg({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:Vy(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:Vy(t.feeDataAvailabilityMode)})}return this.signRaw(r)}async signDeployAccountTransaction(t){const e=Og.compile(t.constructorCalldata);let n;if(!Object.values(yd.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeployAccountTransaction version");{const r=t;n=Qg({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:Vy(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:Vy(r.feeDataAvailabilityMode)})}return this.signRaw(n)}async signDeclareTransaction(t){let e;if(!Object.values(yd.ETransactionVersion3).includes(t.version))throw Error("unsupported signDeclareTransaction version");{const n=t;e=Jg({...n,version:n.version,nonceDataAvailabilityMode:Vy(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:Vy(n.feeDataAvailabilityMode)})}return this.signRaw(e)}async signRaw(t){return ms(t,this.pk)}}(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??Th.get("transactionVersion"),this.paymaster=o?new zw(o):$w,this.deployer=t.deployer??Yw,this.defaultTipType=a??Th.get("defaultTipType"),kh.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new Wp("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return hf(t??await this.getNonce())}catch(t){return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:yd.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){ef(Gy(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:yd.ETransactionType.DECLARE,payload:Yy(t,await this.channel.getStarknetVersion())}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=Og.compile(n),o=r??cy(e,t,s,0),a=[{type:yd.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:o}}];return(await this.estimateFeeBulk(a,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[Uy(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,o=await this.resolveDetailsWithTip(e),a=await this.accountInvocationsFactory(t,{...jy(o),versions:[qy(Hy(this.transactionVersion)||xh.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(a,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:o}=e,a=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...jy(a),versions:[this.resolveTransactionVersion(o)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:yd.ETransactionType.INVOKE,payload:n}],{...jy(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:o.contractAddress,calldata:o.calldata,signature:o.signature},{...jy(r),resourceBounds:o.resourceBounds,nonce:o.nonce,version:o.version})}async fastExecute(t,e={},n={}){ef(this.channel instanceof gm.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),ef(this.channel.blockIdentifier===qh.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,qh.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i);return{txResult:s,isReady:await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n)}}async declareIfNot(t,e={}){const n=Yy(t,await this.channel.getStarknetVersion());try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){ef(Gy(t.contract),Ah.declareNonSierra);const n=Yy(t,await this.channel.getStarknetVersion()),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const o=(await this.accountInvocationsFactory([{type:yd.ETransactionType.DECLARE,payload:n}],{...jy(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:o.senderAddress,signature:o.signature,contract:o.contract,compiledClassHash:o.compiledClassHash},{...jy(r),nonce:o.nonce,resourceBounds:o.resourceBounds,version:o.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(""!==n.transaction_hash){const t=await this.waitForTransaction(n.transaction_hash,e);n={...n,...t}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=Og.compile(e),o=r??cy(n,t,s,0),a=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let u=c;u||(u=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:o},a)).resourceBounds);const l=(await this.accountInvocationsFactory([{type:yd.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:o}}],{...jy(a),resourceBounds:u,versions:[this.resolveTransactionVersion(i.version)],nonce:Hd,skipValidate:!1}))[0];return super.deployAccountContract({classHash:l.classHash,addressSalt:l.addressSalt,constructorCalldata:l.constructorCalldata,signature:l.signature},{...jy(a),nonce:l.nonce,resourceBounds:l.resourceBounds,version:l.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Gm(t,this.address)}async getSnip9Version(){return await Uw(this,this.address,hh)?"2":await Uw(this,this.address,dh)?"1":"0"}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[pf(t)]},n=await this.callContract(e);return 0n!==BigInt(n[0])}catch(t){throw new Error(`Failed to check if nonce is valid: ${t}`)}}async getSnip9Nonce(){const t=xy();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!lf(t.caller)&&"ANY_CALLER"!==t.caller)throw new Error(`The caller ${t.caller} is not valid.`);const i=lf(t.caller)?t.caller:lh,s=[e].flat(),o=n??await this.getSnip9Version();if(!o)throw new Error("This account is not handling outside transactions.");const a=r?pf(r):await this.getSnip9Nonce(),c=Pw(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},a,s,o),u=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:a,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(xw)},signature:u,signerAddress:this.address,version:o}}async executeFromOutside(t,e){const n=Lw(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return qy(this.transactionVersion||xh.V3,t)}async buildInvocation(t,e){const n=dm(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...jy(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=Yy(t,await this.channel.getStarknetVersion()),s=tm(r);ef(!nf(i)&&(e.version===xh.F3||e.version===xh.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const o=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...jy(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:o,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=Og.compile(n),o=r??cy(e,t,s,0),a=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...jy(i),classHash:t,contractAddress:o,addressSalt:e,constructorCalldata:s});return{...jy(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:a}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),o=await this.getChainId(),a=e.versions.map((t=>qy(t))),c="payload"in t[0]?t[0].payload:t[0],u=t[0].type===yd.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map((async(t,n)=>{const c="payload"in t?t.payload:t,l={...jy(e),walletAddress:this.address,nonce:hf(Number(s)+n),chainId:o,cairoVersion:u,version:a[0],skipValidate:i},d={type:t.type,nonce:hf(Number(s)+n),blockIdentifier:r,version:a[0]};if(t.type===yd.ETransactionType.INVOKE){const t=await this.buildInvocation([].concat(c),l);return{...d,...t,...l}}if(t.type===yd.ETransactionType.DEPLOY){const{calls:t}=this.deployer.buildDeployerCall(c,this.address),e=await this.buildInvocation(t,l);return{...d,...e,...l,type:yd.ETransactionType.INVOKE}}if(t.type===yd.ETransactionType.DECLARE){ef(Gy(c.contract),"Declare fee estimation is not supported for Cairo0 contracts");const t=await this.buildDeclarePayload(c,l);return{...d,...t,...l}}if(t.type===yd.ETransactionType.DEPLOY_ACCOUNT){const t=await this.buildAccountDeployPayload(c,l);return{...d,...t,...l}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${t}`)})))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&"0"===await this.getSnip9Version())throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return r=e.deploymentData?t.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:{type:"deploy",deployment:e.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Py(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Py(n)}};break}case"deploy":e={type:"deploy",deployment:t.deployment};break;default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);Vw(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then((t=>({transaction_hash:t.transaction_hash})))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}});function Zw(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function Xw(t){return t.request({type:"wallet_getPermissions"})}function Jw(t,e){return t.request({type:"wallet_watchAsset",params:e})}function Qw(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function tb(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function eb(t){return t.request({type:"wallet_requestChainId"})}function nb(t){return t.request({type:"wallet_deploymentData"})}function rb(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function ib(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function sb(t,e){return t.request({type:"wallet_signTypedData",params:e})}function ob(t){return t.request({type:"wallet_supportedSpecs"})}function ab(t,e){t.on("accountsChanged",e)}function cb(t,e){t.on("networkChanged",e)}fd({},{addDeclareTransaction:()=>ib,addInvokeTransaction:()=>rb,addStarknetChain:()=>Qw,deploymentData:()=>nb,getPermissions:()=>Xw,onAccountChange:()=>ab,onNetworkChanged:()=>cb,requestAccounts:()=>Zw,requestChainId:()=>eb,signMessage:()=>sb,supportedSpecs:()=>ob,switchStarknetChain:()=>tb,watchAsset:()=>Jw});var ub=class t extends Ww{walletProvider;constructor(t){super({...t,signer:""}),this.walletProvider=t.walletProvider,this.walletProvider.on("accountsChanged",(t=>{t&&(this.address=t[0].toLowerCase())})),this.walletProvider.on("networkChanged",(t=>{t&&this.channel.setChainId(t)}))}onAccountChange(t){ab(this.walletProvider,t)}onNetworkChanged(t){cb(this.walletProvider,t)}requestAccounts(t=!1){return Zw(this.walletProvider,t)}getPermissions(){return Xw(this.walletProvider)}switchStarknetChain(t){return tb(this.walletProvider,t)}watchAsset(t){return Jw(this.walletProvider,t)}addStarknetChain(t){return Qw(this.walletProvider,t)}execute(t){const e={calls:[].concat(t).map((t=>{const{contractAddress:e,entrypoint:n,calldata:r}=t;return{contract_address:e,entry_point:n,calldata:r}}))};return rb(this.walletProvider,e)}async declare(t){const e=Yy(t,await this.channel.getStarknetVersion()),n=t.contract,r={...n,abi:Qh(n.abi)};if(!e.compiledClassHash)throw Error("compiledClassHash is required");const i={compiled_class_hash:e.compiledClassHash,contract_class:r};return ib(this.walletProvider,i)}async deploy(t){const{calls:e,addresses:n}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(e),contract_address:n}}signMessage(t){return sb(this.walletProvider,t)}static async connect(e,n,r,i,s=!1){const[o]=await Zw(n,s);return new t({provider:e,walletProvider:n,address:o,cairoVersion:r,paymaster:i})}static async connectSilent(e,n,r,i){return t.connect(e,n,r,i,!0)}};function lb(t){return"event"===t.type}function db(t){const e=t.filter((t=>lb(t)&&"struct"===t.kind)),n=t.filter((t=>lb(t)&&"enum"===t.kind));return e.reduce(((t,e)=>{let r=[],{name:i}=e,s=!1;const o=t=>t.type===i;for(;;){const t=n.find((t=>t.variants.some(o)));if(nf(t))break;const e=t.variants.find(o);r.unshift(e.name),"flat"===e.kind&&(s=!0),i=t.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");s&&(r=[r[r.length-1]]);const a=r.pop();let c={[Bd(Fs(Ad(a)).toString(16))]:e};for(;r.length>0;)c={[Bd(Fs(Ad(r.pop())).toString(16))]:c};return c={...c},fb(t,c)}),{})}function hb(t){return Np(t)?db(t):function(t){return t.filter((t=>"event"===t.type)).reduce(((t,e)=>{const n=e.name,r={...e};return r.name=n,{...t,[Bd(Fs(Ad(n)).toString(16))]:r}}),{})}(t)}function fb(t,e){const n={...t};return uf(t)&&uf(e)&&Object.keys(e).forEach((r=>{uf(e[r])?r in t?n[r]=fb(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})})),n}function pb(t,e,n,r,i){return t.flat().reduce(((t,s)=>{const o=JSON.parse(JSON.stringify(s));let a=e[o.keys.shift()??0];if(!a)return t;for(;!a.name;){const t=o.keys.shift();ef(!!t,'Not enough data in "keys" property of this event.'),a=a[t]}const c={};c[a.name]={};const u=o.keys[Symbol.iterator](),l=o.data[Symbol.iterator](),d=a.members?.filter((t=>"key"===t.kind))||a.keys,h=a.members?.filter((t=>"data"===t.kind))||a.data;return d.forEach((t=>{c[a.name][t.name]=bg({responseIterator:u,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})})),h.forEach((t=>{c[a.name][t.name]=bg({responseIterator:l,output:t,structs:n,enums:r,parser:i,parsedResult:c[a.name]})})),"block_hash"in o&&(c.block_hash=o.block_hash),"block_number"in o&&(c.block_number=o.block_number),"transaction_hash"in o&&(c.transaction_hash=o.transaction_hash),t.push(c),t}),[])}fd({},{getAbiEvents:()=>hb,isAbiEvent:()=>lb,parseEvents:()=>pb}),yd.TypedDataRevision;const gb={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yb;const mb=new Uint8Array(16),wb=[];for(let t=0;t<256;++t)wb.push((t+256).toString(16).slice(1));const bb=new y.InjectedKeplr("d_2hxd99brRo","0.13.1","extension",(t=>{t.rpc&&(bb.starknet.provider?bb.starknet.provider.channel.nodeUrl=t.rpc:bb.starknet.provider=new Iw({nodeUrl:t.rpc,specVersion:"0.9.0"})),bb.starknet.provider&&t.selectedAddress?bb.starknet.account?bb.starknet.account.address=t.selectedAddress:ub.connect(bb.starknet.provider,bb.generateStarknetProvider()).then((e=>{bb.starknet.account=e,t.selectedAddress&&(bb.starknet.account.address=t.selectedAddress)})).catch((t=>{console.error("Failed to connect starknet account:",t),bb.starknet.account=void 0})):bb.starknet.account=void 0}),(t=>{t.selectedAddress&&bb.starknet.account&&(bb.starknet.account.address=t.selectedAddress)}),{addMessageListener:t=>window.addEventListener("message",t),removeMessageListener:t=>window.removeEventListener("message",t),postMessage:t=>window.postMessage(t,window.location.origin)},void 0,{uuid:function(t,e,n){if(gb.randomUUID&&!e&&!t)return gb.randomUUID();const r=(t=t||{}).random??t.rng?.()??function(){if(!yb){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yb=crypto.getRandomValues.bind(crypto)}return yb(mb)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if((n=n||0)<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return(wb[t[e+0]]+wb[t[e+1]]+wb[t[e+2]]+wb[t[e+3]]+"-"+wb[t[e+4]]+wb[t[e+5]]+"-"+wb[t[e+6]]+wb[t[e+7]]+"-"+wb[t[e+8]]+wb[t[e+9]]+"-"+wb[t[e+10]]+wb[t[e+11]]+wb[t[e+12]]+wb[t[e+13]]+wb[t[e+14]]+wb[t[e+15]]).toLowerCase()}(r)}(),name:"Keplr",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA/ISURBVHgB7Z1NbFtVFsfPc8xXW2KXSTqNNE2NukGCirYbJKjUZBZo2llMPJuBzVA27Wag7QJWjEqlYUMXLbCZsqGwGlZOF9NKbBKkgjQL2owSJDYIN0UK0wRqp6VAm/jN+T+/GxzXdu67X+868U+ynj/bl3fOPfecc889LyBPyJfmClnKFgIKCiGFebwVBuFOfBaEQfQ6es6fN/82jD6LfuOQoBIQVVa/F1bChvf4/MvRN8PgGh8qGQrKNf7OEi2VK8WhMnlAQI4plG7m79DyCAv5AF8sCHwPPy/QBoQv/hRfgzI//S8rx9Qm6pssF7dWyCFOFGCgND/ChwP8GIkfPdoApeDDJNuPD+eL26bIMtYUACP9Ni0d5qd/op7QlWDrWCaqnWJFOE+WMK4AseCP8T993P28vD6BIvA0eX6hOHiKDGNUAbaV/jcWUt+ZjTqn28aGRTCiANtLNwvs2X5APVPvinGOmE58V9xaJk0ypMnghe+PLdHyVeoJ3yVjPOCuDpZuHCZNlC1APNef5KfHqUdqsADPzhcHT5AiSgoAk79MSyWOYfdQj9RB6NhH2aLKlJBYAerCX57oOXp+AQexj/pGkypBIgXoCd9vVJRAWgF6wu8OkiqBlAL0hN9dJFECKQUYLM1f9cnh27EpQ7kHMjQcH38XHQPq5wde56Jj/blAfC7D4r2QqvwQzN5ZXvVcfI7jdX6N5zPVpVW/SRs4hpspO7rW4tKaV4QXcs5QSqEeBL1/4EF6MtcXCQ/PkwgyDaAIs3dq0fFLfojXaSATIna8kkg0hBR8QI6AwA8NPRQJ/I989FnQSbjOCjDNinBp7i59vnDXsUIsn1gobj/b7tO2V7ie3kWGz+6CDkb0kV2P0HMDD0SPjQCswrmvf3alDBVOG+9t5w+0VYCB8fkShTRGloCwX3ti04YRejv+NfszP36hzxbukUUmeSVxtNUHLRXApunvCb41UIBXr9yyZhEyFBRvFAfGm99vowAL35gO+WDqIfijbO57tOfc1z/R6a9+4ojCrCIgNNxMfXubo4L7VgMHLnx/0rTwd+eyNDG6tSd8CXCNJkbzUYhrEsj0du3ufdHcff9LUAsPk0FeGH6IxvfnIg+/hxy4Vl88/1h07YySyRzDKu6qtxpf1Od+c6P/6K6H6b19j66bcM41uHZHzFpNUae5Qnb155mTUZW9AaC9/9i9hdYLiOUxL8/Gx0aGN/VFx6d4qssZVva3dm/mjGMtihQMgSLdlbzAytny6N/Dnv9VMsBwbMK6FcTp8Mq/rC5HCRyR/pUB1g4+z8GhB6NIB0qhC1LMY5er0XkZYpTDwkk8WTm7GmUOBwZGP0bA+P7uKgYWufyPeZT9e+4XaWG3Ar+F8oi4HvP56xz9PMtpbFXHDtf0o2f6aXSiYiY6qNVGKNp70KAALPwDZACEet3i8EFIJoTeCUwdr1y5HV2TF4cfpr/wQ0UR8PvXnniE3pj+kbTJZFZkHU0BefYMs7R0kzTpBtOP0f4+x9oXOS9v0KRKIyzCC6wIKmAqMJE13ELZrcgJRKrYR8sjZIB32Wv1FQj+9Fd3aN8nP9DbfExD+EBYBNWRDAtrgjuxzCMFYPOvvdbv62JOs+AXPVmzR8YPc3rS1K+p6xyGkR+wkgd4mjQxnrQwABZafBN8I7BCY5eTO3YmrEAY1PM9QgEKpAHmftU5zQbT0YWtRqbWR8E3gilh7PJiIiWABWisdlIhoL5o0It/RWsKQIjjCzD3v2fTanl51SiwBFgASsKRXXoDTmR8M9tLcwXS5Oiu9Ec/5lLMqTD33ci5ODKRxYQfgK4smSXKFkgDmH8T2S4dUF0zOnEzNc/eFG9M35aeCqAAuvkWtOTJcPpXK22XpvmHh//KlVvRhfN9rpcB/sD7rMyyHBzSc7zRbykTaK7+HRxKJ/SbjZynqslFEi/AVCBrBZ7K9ZEOaMYFG6JlAXbn3CvAdBw+dbvJbwWsmqxSHxrSDr3zWhYA87/rvD9KqzHyr6dUa++CS5LOIBaJdK5/GAQ7taTn2vnDyPjrfxbXxXzfCYSwsgr+nKYPlmUncCcp8qRDBUB4d9pQiIewtfncZ3jtH4tEvnCRVyhlaih1BmEQLm/VkqCuEyKLSeEDeM/NcbRvCoDzkaFfywXL5LSmAFEKZROY/dOGkzutzjvnWd3iZwtyfsB+zSlAKwqw7QPAGUKcb5pWjpNvRSzXW9QetkKn4DbOA6glgmyPGIR6f7Mg/E7n7ZsSLEosZ+hGAsq/tDn6keR5yZK33+m8dVfYTNPYl6ATOuet/EtbFqBeAVuxFud3Ou+01zSauS6pADq+mLIC2DKXcPhsJnk6ha7duoFF57wzoeL+/34L5hKreucsh2KdQldXYa1pVAej1lqA6SkA8z5W9WzTyVymsa7RCdmRreED5L3xATDv2wbn3GmehwXwyRGUPRedZJCGD2DOXL5ted4XyKyfY0uXL+TsWwBKXd1h+k87KuOSqVz2qbpZdm7XscapK4AL0w8OxZs118KX/Q3NfQ47fzcFC2BiHQB1+y5MP+oWkmxVx778tH2BJDmJrrQASPi4qODFxfnwmf5EoRK+O76/P1UlcBWSpvYXIt63PfrrW9VzShk+/AZKMJzS+sCzjqYh5b9OJ/SA4wfzbxPM42hMpZPerStBPpVdT0lyEjqZQOWro2Mebc39T8WdOeDwmcrrYzp4b9+WaEs3rBbKtWwXoyattcyloQCq1Ktek4/+xm7goku4aCKNlixwSm3m8ndEjuTmlddQBNFZpLFreGM3cVVc7rVwrgCX5n6RGv242GITpI8dR0SoeKhD4gh/JxQCSpKkH4DLXIRzBZD1/GHCfVueTcoOhbJ5WDeXeQinQytJufNGxfVWO6cKsN62cdnA9U5rpwpwKcH2540Ikj+upz1n/xv2vifpgiFCLXj33dpnWFT2yoaNaTTTdqYASUd/s9fcH98ICgpRr4Sth32iPatLx6kah33TcQiIjqKNbWTFDaWSkFabHWcKILvRoR2LK3fpam9FoAxQBDRYNp3CnYnv+WOrv6Cp9m9JUVYAaLpsNhDbnFx4/zPxXbqQscNowkXVVQSMatzJw2bPId3Rr5N0Ur46iwmuRxoNm5Bt1O0hABOP1jO2z1939C+moQBJ+Dyljl3X4y4iKkogWs3Z3oqedos9Jwogu8PFBqLVepKOnDZ3JjWT1twvUFYAlZAuLaAErybYZ/j36dtOfBaMfBOjX2eAaSiA3OjwJfXb2MN/re9ddJCwQuj6esqjH1i3AGma/2ZkUtGu0tVI+viQ4NKIArqvTw+Wotf+jv3RL26eaQqvpwCfLIAo4GjHTJzRs8lwVGFk9r4KixpBFhRAqTC/2oUWAHRSABfKauOWOhpKW0GHECUF6NZ1/c4WwG60onOrmE6oDkbIXsMH6E4FqHYwl19W7VkA1C3aivm/1RiMygrgon2JDWY6aICt+R/zPjan2ELnvK07gS5aySWh03nPWLAAw9Euo7zVkE/nvJXPSraNmY/t19ph2gKobEtTQf28wwpaxJRJEdk2Zr5NA62UwIZTi3DPdomXzugPEQWQBrJFHr7dTq7ViDEdAkL4LppN6J431FN5g76sH4CNjhfn/KkIRq1Ac7cwkxEAhO9qc4du6JoNKKyGpLalStb8+GYBzn1tZ2Mqpjv0IXC5s0dHccMgKDuZAtIod3aN2IruusXMdFWv2AY3jSqTIrKRAPCp+ZJpEOrpbkVXAYUrOs5rEIbXlNcCBLKrZ1j+9C0aMAGmN9txfjsMpK7V1wKSngRM5BEPbjBpEmzjgtlPK9ehu3SdYeuvlQcASapn1osVgDJ/xAmeJI2nbKC716KGRFCWlsqkAeYg2bJpXLh396V70XQRrWfS9mlM7LVYYtlnvisOlUmTJGXfaKhwJIU9cLrUQ7zNqZr8Rkw01a6w7KO/JNCIBFROBuvi3RQWilF/1CPF1TX/nPmZwjFSAPYDpkgDZAST7J4RMfOwZwtFzdRX8nLejHqBiSZbIdWu4RgrQHCNNEna77euBHkvLQHODcUbXzz/mHdZTGCmcjnzqwVgJkkT2br7RnZECZS8Nz6BEPwVFrwPNfutULnOreAQMFKAaPgtU98kRwOkC6zAc2wuk/IWO1e7OV2M38+mUGuIUY4ULm7G7PttY0zdRm8TyxzHlb92oDQ/wYcR0gTCVB3R8CXgUH7Mc9ysgzayKNA8KNlF3AewiGXiripwAOeLg3vxvHEC/pQMKADawP2BR5KKgye2S73IgoGXiz/YZKUuphyM8m4SugAD4u2v5HsNdiQMPxVPGy3ACB8myACi0bKJrF890XQ3SnviIiRJPYteg+goilusdmuvIbDvkx+MVS0FFO6dL26bqj9vwNQ0AGBe37OU9YMSVON2rI2rkShAFT2EuvUWcK3AvG9qzyILv8zCf1y8bo7BLpAhBUCsKrJnplnvtQWNoFmW4Q2rpxpfrBom+dLNPEcD35DGDaWbsWkJ1jOwbnD4TAq/efSDVZNipbgVS8PvkEFgCTB/pRHedSuzcWsb01vVw1r4YfN7902UsAIP0L2rnB0skEGEh9+NC0EuQeQDb9/09vtWo7/+fgt+U1oY4x+UyAI74u3R3RaG2QbZPSTCbHUkY3m+zApw/v7322AyImiFyL6l2SHLB2wLPmZ8oThYbPVBWwXYXporLFH2Khl0CFuxI+qP/2BUXrVRvHsIGzUU/+Ssp4NOKxV27Pe2q/voGCyzFTjOhzPkCKEMB+N7/vi+XCwLPHpsjEEN/0XJO6aYop3p//XzNWB/4Cz/I8coBaAQu6NMXnZFIXy2EqJJ9GXOXIom0nieVjONIAzfmf/ztuMdv0NrEOcG4A/sIU8QN4pq7Bousn+N29Ebn4vvyNDc7Vt0ABeZR3FTqG/jfRGiS7hPXVN40PKCz7a9a39PAvgDvGQ8YTo07GEHhHx9tDwqU+8pnTDvKUF3kET49e8noKcEfpNU+PXfJKSnBH6iInyQOM7Cf4D/iOKy4h7pA4dPRfj132qQZojYow5Cvc3Bj2+Wi48r7fHUrpoYLN04zNMBkkVWM4Y97gMCP8Up3rOkgZGymShtHGTPUEhj1MMFqOJ+2cS2PqN1U7AGfDjZcxDtAEePHyduFH87ToawUjjHawhv8om+1FMEY0SFOlvo9lnVub4dVisnexZBm0l+XGDBnzcteIGT0llWBKwjwFk8QB6tKXjKJNX3aEyygzdJlnFeO10ofZO/RY+O8BSxh//3p9lxLNAGVQpsyw+DcArNmmqUmXyUbk3aGuntz8ET8hxJZClbYCuRZ+Uo4C2+ODvxWRAGhcav8oVbFXKGFOK16zC00qq/0krLnYAq/Dz6nM//mvg+PkdnjooBD94E/we8TZxJI397XAAAAABJRU5ErkJggg==",rdns:"app.keplr"},{id:"keplr",name:"Keplr",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA/ISURBVHgB7Z1NbFtVFsfPc8xXW2KXSTqNNE2NukGCirYbJKjUZBZo2llMPJuBzVA27Wag7QJWjEqlYUMXLbCZsqGwGlZOF9NKbBKkgjQL2owSJDYIN0UK0wRqp6VAm/jN+T+/GxzXdu67X+868U+ynj/bl3fOPfecc889LyBPyJfmClnKFgIKCiGFebwVBuFOfBaEQfQ6es6fN/82jD6LfuOQoBIQVVa/F1bChvf4/MvRN8PgGh8qGQrKNf7OEi2VK8WhMnlAQI4plG7m79DyCAv5AF8sCHwPPy/QBoQv/hRfgzI//S8rx9Qm6pssF7dWyCFOFGCgND/ChwP8GIkfPdoApeDDJNuPD+eL26bIMtYUACP9Ni0d5qd/op7QlWDrWCaqnWJFOE+WMK4AseCP8T993P28vD6BIvA0eX6hOHiKDGNUAbaV/jcWUt+ZjTqn28aGRTCiANtLNwvs2X5APVPvinGOmE58V9xaJk0ypMnghe+PLdHyVeoJ3yVjPOCuDpZuHCZNlC1APNef5KfHqUdqsADPzhcHT5AiSgoAk79MSyWOYfdQj9RB6NhH2aLKlJBYAerCX57oOXp+AQexj/pGkypBIgXoCd9vVJRAWgF6wu8OkiqBlAL0hN9dJFECKQUYLM1f9cnh27EpQ7kHMjQcH38XHQPq5wde56Jj/blAfC7D4r2QqvwQzN5ZXvVcfI7jdX6N5zPVpVW/SRs4hpspO7rW4tKaV4QXcs5QSqEeBL1/4EF6MtcXCQ/PkwgyDaAIs3dq0fFLfojXaSATIna8kkg0hBR8QI6AwA8NPRQJ/I989FnQSbjOCjDNinBp7i59vnDXsUIsn1gobj/b7tO2V7ie3kWGz+6CDkb0kV2P0HMDD0SPjQCswrmvf3alDBVOG+9t5w+0VYCB8fkShTRGloCwX3ti04YRejv+NfszP36hzxbukUUmeSVxtNUHLRXApunvCb41UIBXr9yyZhEyFBRvFAfGm99vowAL35gO+WDqIfijbO57tOfc1z/R6a9+4ojCrCIgNNxMfXubo4L7VgMHLnx/0rTwd+eyNDG6tSd8CXCNJkbzUYhrEsj0du3ufdHcff9LUAsPk0FeGH6IxvfnIg+/hxy4Vl88/1h07YySyRzDKu6qtxpf1Od+c6P/6K6H6b19j66bcM41uHZHzFpNUae5Qnb155mTUZW9AaC9/9i9hdYLiOUxL8/Gx0aGN/VFx6d4qssZVva3dm/mjGMtihQMgSLdlbzAytny6N/Dnv9VMsBwbMK6FcTp8Mq/rC5HCRyR/pUB1g4+z8GhB6NIB0qhC1LMY5er0XkZYpTDwkk8WTm7GmUOBwZGP0bA+P7uKgYWufyPeZT9e+4XaWG3Ar+F8oi4HvP56xz9PMtpbFXHDtf0o2f6aXSiYiY6qNVGKNp70KAALPwDZACEet3i8EFIJoTeCUwdr1y5HV2TF4cfpr/wQ0UR8PvXnniE3pj+kbTJZFZkHU0BefYMs7R0kzTpBtOP0f4+x9oXOS9v0KRKIyzCC6wIKmAqMJE13ELZrcgJRKrYR8sjZIB32Wv1FQj+9Fd3aN8nP9DbfExD+EBYBNWRDAtrgjuxzCMFYPOvvdbv62JOs+AXPVmzR8YPc3rS1K+p6xyGkR+wkgd4mjQxnrQwABZafBN8I7BCY5eTO3YmrEAY1PM9QgEKpAHmftU5zQbT0YWtRqbWR8E3gilh7PJiIiWABWisdlIhoL5o0It/RWsKQIjjCzD3v2fTanl51SiwBFgASsKRXXoDTmR8M9tLcwXS5Oiu9Ec/5lLMqTD33ci5ODKRxYQfgK4smSXKFkgDmH8T2S4dUF0zOnEzNc/eFG9M35aeCqAAuvkWtOTJcPpXK22XpvmHh//KlVvRhfN9rpcB/sD7rMyyHBzSc7zRbykTaK7+HRxKJ/SbjZynqslFEi/AVCBrBZ7K9ZEOaMYFG6JlAXbn3CvAdBw+dbvJbwWsmqxSHxrSDr3zWhYA87/rvD9KqzHyr6dUa++CS5LOIBaJdK5/GAQ7taTn2vnDyPjrfxbXxXzfCYSwsgr+nKYPlmUncCcp8qRDBUB4d9pQiIewtfncZ3jtH4tEvnCRVyhlaih1BmEQLm/VkqCuEyKLSeEDeM/NcbRvCoDzkaFfywXL5LSmAFEKZROY/dOGkzutzjvnWd3iZwtyfsB+zSlAKwqw7QPAGUKcb5pWjpNvRSzXW9QetkKn4DbOA6glgmyPGIR6f7Mg/E7n7ZsSLEosZ+hGAsq/tDn6keR5yZK33+m8dVfYTNPYl6ATOuet/EtbFqBeAVuxFud3Ou+01zSauS6pADq+mLIC2DKXcPhsJnk6ha7duoFF57wzoeL+/34L5hKreucsh2KdQldXYa1pVAej1lqA6SkA8z5W9WzTyVymsa7RCdmRreED5L3xATDv2wbn3GmehwXwyRGUPRedZJCGD2DOXL5ted4XyKyfY0uXL+TsWwBKXd1h+k87KuOSqVz2qbpZdm7XscapK4AL0w8OxZs118KX/Q3NfQ47fzcFC2BiHQB1+y5MP+oWkmxVx778tH2BJDmJrrQASPi4qODFxfnwmf5EoRK+O76/P1UlcBWSpvYXIt63PfrrW9VzShk+/AZKMJzS+sCzjqYh5b9OJ/SA4wfzbxPM42hMpZPerStBPpVdT0lyEjqZQOWro2Mebc39T8WdOeDwmcrrYzp4b9+WaEs3rBbKtWwXoyattcyloQCq1Ktek4/+xm7goku4aCKNlixwSm3m8ndEjuTmlddQBNFZpLFreGM3cVVc7rVwrgCX5n6RGv242GITpI8dR0SoeKhD4gh/JxQCSpKkH4DLXIRzBZD1/GHCfVueTcoOhbJ5WDeXeQinQytJufNGxfVWO6cKsN62cdnA9U5rpwpwKcH2540Ikj+upz1n/xv2vifpgiFCLXj33dpnWFT2yoaNaTTTdqYASUd/s9fcH98ICgpRr4Sth32iPatLx6kah33TcQiIjqKNbWTFDaWSkFabHWcKILvRoR2LK3fpam9FoAxQBDRYNp3CnYnv+WOrv6Cp9m9JUVYAaLpsNhDbnFx4/zPxXbqQscNowkXVVQSMatzJw2bPId3Rr5N0Ur46iwmuRxoNm5Bt1O0hABOP1jO2z1939C+moQBJ+Dyljl3X4y4iKkogWs3Z3oqedos9Jwogu8PFBqLVepKOnDZ3JjWT1twvUFYAlZAuLaAErybYZ/j36dtOfBaMfBOjX2eAaSiA3OjwJfXb2MN/re9ddJCwQuj6esqjH1i3AGma/2ZkUtGu0tVI+viQ4NKIArqvTw+Wotf+jv3RL26eaQqvpwCfLIAo4GjHTJzRs8lwVGFk9r4KixpBFhRAqTC/2oUWAHRSABfKauOWOhpKW0GHECUF6NZ1/c4WwG60onOrmE6oDkbIXsMH6E4FqHYwl19W7VkA1C3aivm/1RiMygrgon2JDWY6aICt+R/zPjan2ELnvK07gS5aySWh03nPWLAAw9Euo7zVkE/nvJXPSraNmY/t19ph2gKobEtTQf28wwpaxJRJEdk2Zr5NA62UwIZTi3DPdomXzugPEQWQBrJFHr7dTq7ViDEdAkL4LppN6J431FN5g76sH4CNjhfn/KkIRq1Ac7cwkxEAhO9qc4du6JoNKKyGpLalStb8+GYBzn1tZ2Mqpjv0IXC5s0dHccMgKDuZAtIod3aN2IruusXMdFWv2AY3jSqTIrKRAPCp+ZJpEOrpbkVXAYUrOs5rEIbXlNcCBLKrZ1j+9C0aMAGmN9txfjsMpK7V1wKSngRM5BEPbjBpEmzjgtlPK9ehu3SdYeuvlQcASapn1osVgDJ/xAmeJI2nbKC716KGRFCWlsqkAeYg2bJpXLh396V70XQRrWfS9mlM7LVYYtlnvisOlUmTJGXfaKhwJIU9cLrUQ7zNqZr8Rkw01a6w7KO/JNCIBFROBuvi3RQWilF/1CPF1TX/nPmZwjFSAPYDpkgDZAST7J4RMfOwZwtFzdRX8nLejHqBiSZbIdWu4RgrQHCNNEna77euBHkvLQHODcUbXzz/mHdZTGCmcjnzqwVgJkkT2br7RnZECZS8Nz6BEPwVFrwPNfutULnOreAQMFKAaPgtU98kRwOkC6zAc2wuk/IWO1e7OV2M38+mUGuIUY4ULm7G7PttY0zdRm8TyxzHlb92oDQ/wYcR0gTCVB3R8CXgUH7Mc9ysgzayKNA8KNlF3AewiGXiripwAOeLg3vxvHEC/pQMKADawP2BR5KKgye2S73IgoGXiz/YZKUuphyM8m4SugAD4u2v5HsNdiQMPxVPGy3ACB8myACi0bKJrF890XQ3SnviIiRJPYteg+goilusdmuvIbDvkx+MVS0FFO6dL26bqj9vwNQ0AGBe37OU9YMSVON2rI2rkShAFT2EuvUWcK3AvG9qzyILv8zCf1y8bo7BLpAhBUCsKrJnplnvtQWNoFmW4Q2rpxpfrBom+dLNPEcD35DGDaWbsWkJ1jOwbnD4TAq/efSDVZNipbgVS8PvkEFgCTB/pRHedSuzcWsb01vVw1r4YfN7902UsAIP0L2rnB0skEGEh9+NC0EuQeQDb9/09vtWo7/+fgt+U1oY4x+UyAI74u3R3RaG2QbZPSTCbHUkY3m+zApw/v7322AyImiFyL6l2SHLB2wLPmZ8oThYbPVBWwXYXporLFH2Khl0CFuxI+qP/2BUXrVRvHsIGzUU/+Ssp4NOKxV27Pe2q/voGCyzFTjOhzPkCKEMB+N7/vi+XCwLPHpsjEEN/0XJO6aYop3p//XzNWB/4Cz/I8coBaAQu6NMXnZFIXy2EqJJ9GXOXIom0nieVjONIAzfmf/ztuMdv0NrEOcG4A/sIU8QN4pq7Bousn+N29Ebn4vvyNDc7Vt0ABeZR3FTqG/jfRGiS7hPXVN40PKCz7a9a39PAvgDvGQ8YTo07GEHhHx9tDwqU+8pnTDvKUF3kET49e8noKcEfpNU+PXfJKSnBH6iInyQOM7Cf4D/iOKy4h7pA4dPRfj132qQZojYow5Cvc3Bj2+Wi48r7fHUrpoYLN04zNMBkkVWM4Y97gMCP8Up3rOkgZGymShtHGTPUEhj1MMFqOJ+2cS2PqN1U7AGfDjZcxDtAEePHyduFH87ToawUjjHawhv8om+1FMEY0SFOlvo9lnVub4dVisnexZBm0l+XGDBnzcteIGT0llWBKwjwFk8QB6tKXjKJNX3aEyygzdJlnFeO10ofZO/RY+O8BSxh//3p9lxLNAGVQpsyw+DcArNmmqUmXyUbk3aGuntz8ET8hxJZClbYCuRZ+Uo4C2+ODvxWRAGhcav8oVbFXKGFOK16zC00qq/0krLnYAq/Dz6nM//mvg+PkdnjooBD94E/we8TZxJI397XAAAAABJRU5ErkJggg=="});(0,y.injectKeplrToWindow)(bb),window.keplrRequestMetaIdSupport=!0,window.addEventListener("beforeunload",(()=>{bb.__core__webpageClosed()}))})()})();