(()=>{"use strict";var e={},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.rv=()=>"1.3.13",a.ruid="bundler=rspack@1.3.13";var n=0;function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}var i="__private_"+n+++"_send";let s=class{constructor({name:e}){Object.defineProperty(this,i,{writable:!0,value:async(e,t,a)=>{let{tabId:n,senderMetadata:r}=t||{},i={async:a,tabId:n,data:e,channel:this.name,senderMetadata:r};return"number"==typeof n?chrome.tabs.sendMessage(n,i):chrome.runtime.sendMessage(i)}}),this.sendMessage=async(e,t)=>{await r(this,i)[i](e,t,!1)},this.call=async(e,t)=>{let a=await r(this,i)[i](e,t,!0);if(!a||!a.success)throw Error(`Failed to call with: ${JSON.stringify(e)}`);return a.data},this.onMessage=e=>{chrome.runtime.onMessage.addListener((t,a,n)=>{if(t.async||t.channel!==this.name)return!1;try{a.metadata=t.senderMetadata,e(t.data,a)}catch(e){console.error(e)}return n({success:!0}),!0})},this.onCall=e=>{chrome.runtime.onMessage.addListener((t,a,n)=>{let r=e=>{n({success:!0,data:e})},i=async()=>{try{a.metadata=t.senderMetadata,await e(t.data,a,r)}catch{n({success:!1})}};return!!t.async&&this.name===t.channel&&(i(),!0)})},this.name=e}},o=new Proxy(Object.create(null),{get:(e,t)=>(e[t]=e[t]||new s({name:t}),e[t])});var c=0;function d(e){return"__private_"+c+++"_"+e}function l(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}class h{constructor({name:e,target:t,transport:a}){this.name=void 0,this.target=void 0,Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:e=>e.target===this.name&&e.data}),this.write=e=>{l(this,u)[u].write({target:this.target,data:e})},this.on=(e,t)=>{l(this,u)[u].on(e,e=>{l(this,m)[m](e)&&t(e.data)})},this.name=e,this.target=t,l(this,u)[u]=a}removeListener(e,t){l(this,u)[u].removeListener(e,t)}}var u=d("transport"),m=d("isValidEvent"),w=0;class p{constructor(){Object.defineProperty(this,g,{writable:!0,value:e=>"object"==typeof(null==e?void 0:e.data)&&e.origin===window.location.origin}),this.write=e=>{var t;let a=window;if(null!=(t=a.ReactNativeWebView)&&t.postMessage)a.ReactNativeWebView.postMessage(JSON.stringify(e));else if(window.postMessage){let t=window.location.origin;window.postMessage(e,t)}else throw Error("unable to write data because no postMessage is available")},this.on=(e,t)=>{window.addEventListener("message",e=>{(function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e})(this,g)[g](e)&&t(e.data)})}}removeListener(e,t){}}var g="__private_"+w+++"_isValidEvent";let v=e=>btoa([...e].map(e=>String.fromCharCode(e)).join("")),y=()=>{let e=document.querySelector('head > meta[property="og:site_name"]');if(e)return e.content;let t=document.querySelector('head > meta[name="title"]');return t?t.content:document.title},f=e=>{try{let t=e.sizes.value.match(/\d+/gm);return parseInt(t[0],10)}catch{return 0}},b=(e,t)=>{let a,n,r,i,s,o,c=e.width/e.height;return c>1?(r=a=Math.min(e.width,t),n=a,s=0,o=Math.floor((r-(i=Math.round(a/c)))/2)):(i=n=Math.min(e.height,t),a=n,o=0,s=Math.floor((i-(r=Math.round(n*c)))/2)),{width:a,height:n,dWidth:r,dHeight:i,dx:s,dy:o}},M=e=>{let t=new Image;return t.crossOrigin="anonymous",t.src=e,new Promise(e=>{t.addEventListener("load",()=>{let a=document.createElement("canvas"),n=a.getContext("2d"),r=b(t,120),i=r.width,s=r.height;a.width=i,a.height=s,n.drawImage(t,r.dx,r.dy,r.dWidth,r.dHeight);let{data:o}=n.getImageData(0,0,i,s);e({width:i,height:s,data:v(o)})}),t.onerror=()=>e(null)})},O=async()=>{var e;return M((null==(e=[...document.querySelectorAll('head > link[rel~="icon"]')].sort((e,t)=>f(t)-f(e))[0])?void 0:e.href)||`${document.location.origin}/favicon.ico`)},E=new Promise(e=>{window.addEventListener("load",async()=>{e({title:y(),icon:await O()})})}),_=({extensionName:e,channelName:t})=>{if("string"!=typeof e||"string"!=typeof t)throw TypeError("Unable to create RPC because channelName or extensionName are missing");let a=o[t],n=function({name:e,target:t}){return new h({name:e,target:t,transport:new p})}({name:`${e}-${t}`,target:`${e}-${t}-window`});n.on("data",async e=>{let t=!JSON.parse(e).method,r={senderMetadata:await E};t?a.sendMessage(e,r):a.call(e,r).then(n.write)}),a.onMessage((e,t)=>{t.tab||n.write(e)})},j=({id:e,src:t,attributes:a={}})=>new Promise(n=>{let r=document.head||document.documentElement,i=document.createElement("script");i.id=e,i.src=t,Object.keys(a).map(e=>{i.setAttribute(e,a[e])}),i.addEventListener("load",()=>{n(),r.contains(i)&&i.remove()}),r.insertBefore(i,r.children[0])});(async()=>{let e=chrome.runtime.getURL("inapp.js");await j({id:"magic-eden-extension",src:e,attributes:{"data-extension-id":chrome.runtime.id}})})(),_({extensionName:"magic-eden",channelName:"provider"}),_({extensionName:"magic-eden",channelName:"content"})})();