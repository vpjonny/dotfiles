import{k as e}from"./rsa-plugins-common.min.js";const n="OneTrustConsentManagerPlugin",t="OneTrustConsentManager",s=()=>({name:t,deps:[],initialize:e=>{e.plugins.loadedPlugins.value=[...e.plugins.loadedPlugins.value,t]},consentManager:{init(e,n){},updateConsentsInfo(t,s,o){if(!globalThis.OneTrust||!globalThis.OnetrustActiveGroups)return null==o||o.error(`${n}${e}Failed to access OneTrust SDK resources. Please ensure that the OneTrust SDK is loaded successfully before RudderStack SDK.`),void(t.consents.initialized.value=!1);const i=globalThis.OneTrust.GetDomainData().Groups,r=globalThis.OnetrustActiveGroups.split(",").filter((e=>e)),a=[];i.forEach((({CustomGroupId:e})=>{r.includes(e)||a.push(e)})),t.consents.initialized.value=!0,t.consents.data.value={allowedConsentIds:r,deniedConsentIds:a}},isDestinationConsented(e,t,s,o){if(!e.consents.initialized.value)return!0;const i=e.consents.data.value.allowedConsentIds;try{const{oneTrustCookieCategories:n,consentManagement:s}=t,o=e=>i.includes(e);if(s){var r;const n=null===(r=s.find((n=>n.provider===e.consents.provider.value)))||void 0===r?void 0:r.consents;if(!n)return!0;const t=n.map((e=>e.consent.trim())).filter((e=>e));return"or"===e.consents.resolutionStrategy.value?t.some(o)||0===t.length:t.every(o)}if(n){return n.map((e=>e.oneTrustCookieCategory.trim())).filter((e=>e)).every(o)}return!0}catch(e){return null==s||s.onError(e,n,"Failed to determine the consent status for the destination. Please check the destination configuration and try again."),!0}}}});export{s as OneTrustConsentManager,s as default};
//# sourceMappingURL=rsa-plugins-remote-OneTrustConsentManager.min.js.map
