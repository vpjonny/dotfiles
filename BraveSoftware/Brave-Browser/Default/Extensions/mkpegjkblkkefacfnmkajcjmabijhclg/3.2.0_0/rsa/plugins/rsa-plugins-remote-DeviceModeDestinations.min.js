import{k as e,d as i,i as t,m as n}from"./rsa-plugins-common.min.js";import{i as a,p as o,t as s,a as l,b as r,g as d,f as g}from"./rsa-plugins-deviceModeDestinations.min.js";const u="Adobe Analytics",c="Amplitude",v="Appcues",p="Bing Ads",m="Braze",y="Bugsnag",D="Chartbeat",f="CleverTap",A="Comscore",I="Criteo",h="Customer IO",C="Drip",P="Facebook Pixel",T="Fullstory",b="Google Analytics",M="Google Analytics 4 (GA4)",S="Google Analytics 4 (GA4) V2",k="Google Ads",F="Google Optimize",O="Google Tag Manager",G="Heap.io",x="Hotjar",E="HubSpot",L="Intercom",R="Keen",B="Kiss Metrics",$="Klaviyo",w="LaunchDarkly",z="Linkedin Insight Tag",Q="Lotame",V="Lytics",j="Mixpanel",H="MoEngage",K="Optimizely Web",N="Pendo",W="Pinterest Tag",U="Post Affiliate Pro",q="PostHog",J="ProfitWell",Y="Qualtrics",_="Quantum Metric",X="Reddit Pixel",Z="Sentry",ee="Snap Pixel",ie="TVSquared",te="VWO",ne="Google Analytics 360",ae="Adroll",oe="DCM Floodlight",se="Matomo",le="Vero",re="Mouseflow",de="Rockerbox",ge="ConvertFlow",ue="SnapEngage",ce="LiveChat",ve="Shynet",pe="Woopra",me="RollBar",ye="Quora Pixel",De="June",fe="Engage",Ae="Iterable",Ie="Yandex.Metrica",he="Refiner",Ce="Qualaroo",Pe="Podsights",Te="Axeptio",be="Satismeter",Me="Microsoft Clarity",Se="Sendinblue",ke="Olark",Fe="Lemnisk",Oe="TikTok Ads",Ge="Active Campaign",xe="Sprig",Ee="Spotify Pixel",Le="CommandBar",Re="Ninetailed",Be={[E]:"HubSpot",[b]:"GA",[x]:"Hotjar",[k]:"GoogleAds",[te]:"VWO",[O]:"GoogleTagManager",[m]:"Braze",[L]:"INTERCOM",[R]:"Keen",[B]:"Kissmetrics",[h]:"CustomerIO",[D]:"Chartbeat",[A]:"Comscore",[P]:"FacebookPixel",[Q]:"Lotame",[K]:"Optimizely",[y]:"Bugsnag",[T]:"Fullstory",[ie]:"TVSquared",[M]:"GA4",[S]:"GA4_V2",[H]:"MoEngage",[c]:"Amplitude",[N]:"Pendo",[V]:"Lytics",[v]:"Appcues",[q]:"Posthog",[$]:"Klaviyo",[f]:"Clevertap",[p]:"BingAds",[W]:"PinterestTag",[u]:"AdobeAnalytics",[z]:"LinkedInInsightTag",[X]:"RedditPixel",[C]:"Drip",[G]:"Heap",[I]:"Criteo",[j]:"Mixpanel",[Y]:"Qualtrics",[J]:"ProfitWell",[Z]:"Sentry",[_]:"QuantumMetric",[ee]:"SnapPixel",[U]:"PostAffiliatePro",[F]:"GoogleOptimize",[w]:"LaunchDarkly",[ne]:"GA360",[ae]:"Adroll",[oe]:"DCMFloodlight",[se]:"Matomo",[le]:"Vero",[re]:"Mouseflow",[de]:"Rockerbox",[ge]:"ConvertFlow",[ue]:"SnapEngage",[ce]:"LiveChat",[ve]:"Shynet",[pe]:"Woopra",[me]:"RollBar",[ye]:"QuoraPixel",[De]:"June",[fe]:"Engage",[Ae]:"Iterable",[Ie]:"YandexMetrica",[he]:"Refiner",[Ce]:"Qualaroo",[Pe]:"Podsights",[Te]:"Axeptio",[be]:"Satismeter",[Me]:"MicrosoftClarity",[Se]:"Sendinblue",[ke]:"Olark",[Fe]:"Lemnisk",[Oe]:"TiktokAds",[Ge]:"ActiveCampaign",[xe]:"Sprig",[Ee]:"SpotifyPixel",[Le]:"CommandBar",[Re]:"Ninetailed"},$e={All:!0},we="DeviceModeDestinationsPlugin",ze=(i,t)=>`${i}${e}Failed to load script for destination ${t}.`,Qe=(e,g,u,c,v,p)=>{try{const m=i(e),y=((e,t,n,a)=>{var g,u;const c=globalThis.rudderanalytics.getAnalyticsInstance(a.lifecycle.writeKey.value),v={loadIntegration:a.nativeDestinations.loadIntegration.value,logLevel:a.lifecycle.logLevel.value,loadOnlyIntegrations:null!==(g=null===(u=a.consents.postConsent.value)||void 0===u?void 0:u.integrations)&&void 0!==g?g:a.nativeDestinations.loadOnlyIntegrations.value,page:(e,i,t,n,a)=>c.page(o(e,i,t,n,a)),track:(e,i,t,n)=>c.track(s(e,i,t,n)),identify:(e,i,t,n)=>c.identify(l(e,i,t,n)),alias:(e,i,t,n)=>c.alias(r(e,i,t,n)),group:(e,i,t,n)=>c.group(d(e,i,t,n)),getAnonymousId:e=>c.getAnonymousId(e),getUserId:()=>c.getUserId(),getUserTraits:()=>c.getUserTraits(),getGroupId:()=>c.getGroupId(),getGroupTraits:()=>c.getGroupTraits(),getSessionId:()=>c.getSessionId()};return new globalThis[e][t](i(n.config),v,{shouldApplyDeviceModeTransformation:n.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:n.propagateEventsUntransformedOnError,destinationId:n.id})})(u,c,e,g);m.instance=y,y.init(),(e=>new Promise(((i,t)=>{const n=e.instance;let a;const o=()=>{!n.isLoaded()||n.isReady&&!n.isReady()?a=globalThis.requestAnimationFrame(o):i(!0)};o(),setTimeout((()=>{globalThis.cancelAnimationFrame(a),t(new Error(`A timeout of ${11e3} ms occurred while trying to check the ready status for "${e.userFriendlyId}" destination.`))}),11e3)})))(m).then((()=>{a(m)&&(g.nativeDestinations.integrationsConfig.value=((e,i,a)=>{var o;let s=i;if(t(null===(o=e.instance)||void 0===o?void 0:o.getDataForIntegrationsObject))try{var l;s=n(i,null===(l=e.instance)||void 0===l?void 0:l.getDataForIntegrationsObject())}catch(i){null==a||a.onError(i,we,`Failed to get integrations data for destination ${e.userFriendlyId}.`)}return s})(m,g.nativeDestinations.integrationsConfig.value,v)),g.nativeDestinations.initializedDestinations.value=[...g.nativeDestinations.initializedDestinations.value,m]})).catch((i=>{g.nativeDestinations.failedDestinations.value=[...g.nativeDestinations.failedDestinations.value,e],null==p||p.error(i)}))}catch(i){g.nativeDestinations.failedDestinations.value=[...g.nativeDestinations.failedDestinations.value,e],null==v||v.onError(i,we,`Failed to initialize destination ${e.userFriendlyId}.`)}},Ve="DeviceModeDestinations",je=()=>({name:Ve,initialize:e=>{e.plugins.loadedPlugins.value=[...e.plugins.loadedPlugins.value,Ve]},nativeDestinations:{setActiveDestinations(e,t,n,a){var o,s,l;e.nativeDestinations.loadOnlyIntegrations.value=null!==(o=i(e.loadOptions.value.integrations))&&void 0!==o?o:$e,e.nativeDestinations.loadIntegration.value=e.loadOptions.value.loadIntegration;const r=e.nativeDestinations.configuredDestinations.value.filter((e=>!!Be[e.displayName]||(null==n||n.onError(new Error(`Destination ${e.userFriendlyId} is not supported.`),we),!1))),d=g(null!==(s=null===(l=e.consents.postConsent.value)||void 0===l?void 0:l.integrations)&&void 0!==s?s:e.nativeDestinations.loadOnlyIntegrations.value,r).filter((i=>{var o;return null===(o=t.invokeSingle("consentManager.isDestinationConsented",e,i.config,n,a))||void 0===o||o}));e.nativeDestinations.activeDestinations.value=d},load(e,i,t,n,a){const o=e.lifecycle.integrationsCDNPath.value;e.nativeDestinations.activeDestinations.value.forEach((s=>{const l=Be[s.displayName],r=`${l}_RS`,d=l;if(d&&!((e,i,t)=>Boolean(globalThis[e]&&globalThis[e][i]&&globalThis[e][i].prototype&&void 0!==globalThis[e][i].prototype.constructor))(r,d)){const g=`${o}/${l}.min.js`;i.loadJSFile({url:g,id:s.userFriendlyId,callback:null!=a?a:i=>{i?Qe(s,e,r,d,t,n):(null==n||n.error(ze(we,s.userFriendlyId)),e.nativeDestinations.failedDestinations.value=[...e.nativeDestinations.failedDestinations.value,s])},timeout:1e4})}else d?Qe(s,e,r,d,t,n):null==n||n.error(ze(we,s.displayName))}))}}});export{je as DeviceModeDestinations,je as default};
//# sourceMappingURL=rsa-plugins-remote-DeviceModeDestinations.min.js.map
