/*! For license information please see vendor-sui.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[5393],{394372:(e,t)=>{function r(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function n(e,...t){if(!r(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"==typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function s(e){if("function"!=typeof e)throw new Error("function expected");return!0}function a(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function o(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function c(e){if(!Array.isArray(e))throw new Error("array expected")}function u(e,t){if(!i(!0,t))throw new Error(`${e}: array of strings expected`)}function l(e,t){if(!i(!1,t))throw new Error(`${e}: array of numbers expected`)}function d(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function p(e){const t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);const n=new Map(t.map(((e,t)=>[e,t])));return{encode:n=>(c(n),n.map((n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]}))),decode:t=>(c(t),t.map((t=>{a("alphabet.decode",t);const r=n.get(t);if(void 0===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})))}}function h(e=""){return a("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(a("join.decode",t),t.split(e))}}function f(e,t="="){return o(e),a("padding",t),{encode(r){for(u("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){u("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function g(e){return s(e),{encode:e=>e,decode:t=>e(t)}}function b(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(c(e),!e.length)return[];let n=0;const i=[],s=Array.from(e,(e=>{if(o(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){const a=s[i],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const l=u/r;e=u%r;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;const m=(e,t)=>0===t?e:m(t,e%t),y=(e,t)=>e+(t-m(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,r,n){if(c(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(y(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${y(t,r)}`);let i=0,s=0;const a=w[t],u=w[r]-1,l=[];for(const n of e){if(o(n),n>=a)throw new Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((i>>s-r&u)>>>0);const e=w[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<r-s&u,!n&&s>=t)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function j(e){return o(e),{encode:t=>{if(!r(t))throw new Error("radix.encode input should be Uint8Array");return b(Array.from(t),256,e)},decode:t=>(l("radix.decode",t),Uint8Array.from(b(t,e,256)))}}function O(e,t=!1){if(o(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(y(8,e)>32||y(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!r(n))throw new Error("radix2.encode input should be Uint8Array");return v(Array.from(n),8,e,!t)},decode:r=>(l("radix2.decode",r),Uint8Array.from(v(r,e,8,t)))}}function S(e){return s(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function k(e,t){return o(e),s(t),{encode(n){if(!r(n))throw new Error("checksum.encode: input should be Uint8Array");const i=t(n).slice(0,e),s=new Uint8Array(n.length+e);return s.set(n),s.set(i,n.length),s},decode(n){if(!r(n))throw new Error("checksum.decode: input should be Uint8Array");const i=n.slice(0,-e),s=n.slice(-e),a=t(i).slice(0,e);for(let t=0;t<e;t++)if(a[t]!==s[t])throw new Error("Invalid checksum");return i}}}t.utils={alphabet:p,chain:d,checksum:k,convertRadix:b,convertRadix2:v,radix:j,radix2:O,join:h,padding:f},t.base16=d(O(4),p("0123456789ABCDEF"),h("")),t.base32=d(O(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),h("")),t.base32nopad=d(O(5),p("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=d(O(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),h("")),t.base32hexnopad=d(O(5),p("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=d(O(5),p("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),g((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))));const I=(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)(),E=(e,t)=>{a("base64",e);const r=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=t?"base64url":"base64";if(e.length>0&&!r.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:n,lastChunkHandling:"strict"})};t.base64=I?{encode:e=>(n(e),e.toBase64()),decode:e=>E(e,!1)}:d(O(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),h("")),t.base64nopad=d(O(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=I?{encode:e=>(n(e),e.toBase64({alphabet:"base64url"})),decode:e=>E(e,!0)}:d(O(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),h("")),t.base64urlnopad=d(O(6),p("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const T=e=>d(j(58),p(e),h(""));t.base58=T("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=T("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=T("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const P=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);r+=t.base58.encode(i).padStart(P[i.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=P.indexOf(i.length),a=t.base58.decode(i);for(let e=0;e<a.length-s;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(a.slice(a.length-s)))}return Uint8Array.from(r)}},t.createBase58check=e=>d(k(4,(t=>e(e(t)))),t.base58),t.base58check=t.createBase58check;const M=d(p("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),$=[996825010,642813549,513874426,1027748829,705979059];function x(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<$.length;e++)1==(t>>e&1)&&(r^=$[e]);return r}function C(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=x(i)^r>>5}i=x(i);for(let t=0;t<n;t++)i=x(i)^31&e.charCodeAt(t);for(let e of t)i=x(i)^e;for(let e=0;e<6;e++)i=x(i);return i^=r,M.encode(v([i%w[30]],30,5,!1))}function A(e){const t="bech32"===e?1:734539939,n=O(5),i=n.decode,s=n.encode,o=S(i);function c(e,n,i=90){a("bech32.encode prefix",e),r(n)&&(n=Array.from(n)),l("bech32.encode",n);const s=e.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const o=s+7+n.length;if(!1!==i&&o>i)throw new TypeError(`Length ${o} exceeds limit ${i}`);const c=e.toLowerCase(),u=C(c,n,t);return`${c}1${M.encode(n)}${u}`}function u(e,r=90){a("bech32.decode input",e);const n=e.length;if(n<8||!1!==r&&n>r)throw new TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=M.decode(c).slice(0,-6),l=C(o,u,t);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:o,words:u}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:i(r)}},decodeUnsafe:S(u),fromWords:i,fromWordsUnsafe:o,toWords:s}}t.bech32=A("bech32"),t.bech32m=A("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)};const U=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),B={encode:e=>(n(e),e.toHex()),decode:e=>(a("hex",e),Uint8Array.fromHex(e))};t.hex=U?B:d(O(4),p("0123456789abcdef"),h(""),g((e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const R={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},N="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";t.bytesToString=(e,t)=>{if("string"!=typeof e||!R.hasOwnProperty(e))throw new TypeError(N);if(!r(t))throw new TypeError("bytesToString() expects Uint8Array");return R[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!R.hasOwnProperty(e))throw new TypeError(N);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return R[e].decode(t)},t.bytes=t.stringToBytes},815179:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;const n=r(249530),i=r(838358),s=r(141377),a=r(196178),o=r(695047),c=r(870064),u=r(394372),l=i.secp256k1.ProjectivePoint,d=(0,u.createBase58check)(o.sha256);function p(e){(0,c.abytes)(e);const t=0===e.length?"0":(0,c.bytesToHex)(e);return BigInt("0x"+t)}const h=(0,c.utf8ToBytes)("Bitcoin seed"),f={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const g=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+e);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class b{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return d.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return d.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=f){if((0,c.abytes)(e),8*e.length<128||8*e.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);const r=(0,s.hmac)(o.sha512,h,e);return new b({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=f){const r=d.decode(e),n=(0,c.createView)(r),i=n.getUint32(0,!1),s={versions:t,depth:r[4],parentFingerprint:n.getUint32(5,!1),index:n.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),o=0===a[0];if(i!==t[o?"private":"public"])throw new Error("Version mismatch");return new b(o?{...s,privateKey:a.slice(1)}:{...s,publicKey:a})}static fromJSON(e){return b.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||f,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!i.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:p(e.privateKey),this.privKeyBytes=function(e){if("bigint"!=typeof e)throw new Error("bigint expected");return(0,c.hexToBytes)(e.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=i.secp256k1.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=l.fromHex(e.publicKey).toRawBytes(!0)}var t;this.pubHash=(t=this.pubKey,(0,a.ripemd160)((0,o.sha256)(t)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const r=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const e of r){const r=/^(\d+)('?)$/.exec(e),i=r&&r[1];if(!r||3!==r.length||"string"!=typeof i)throw new Error("invalid child index: "+e);let s=+i;if(!Number.isSafeInteger(s)||s>=t.HARDENED_OFFSET)throw new Error("Invalid index");"'"===r[2]&&(s+=t.HARDENED_OFFSET),n=n.deriveChild(s)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let r=g(e);if(e>=t.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");r=(0,c.concatBytes)(new Uint8Array([0]),e,r)}else r=(0,c.concatBytes)(this.pubKey,r);const a=(0,s.hmac)(o.sha512,this.chainCode,r),u=p(a.slice(0,32)),d=a.slice(32);if(!i.secp256k1.utils.isValidPrivateKey(u))throw new Error("Tweak bigger than curve order");const h={versions:this.versions,chainCode:d,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,n.mod)(this.privKey+u,i.secp256k1.CURVE.n);if(!i.secp256k1.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");h.privateKey=e}else{const e=l.fromHex(this.pubKey).add(l.fromPrivateKey(u));if(e.equals(l.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");h.publicKey=e.toRawBytes(!0)}return new b(h)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,c.abytes)(e,32),i.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,c.abytes)(e,32),(0,c.abytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=i.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return i.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,c.abytes)(t,33),(0,c.concatBytes)(g(e),new Uint8Array([this.depth]),g(this.parentFingerprint),g(this.index),this.chainCode,t)}}t.HDKey=b},313817:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Address:()=>p,AppId:()=>A,Argument:()=>v,CallArg:()=>m,Command:()=>O,CompressedSignature:()=>R,GasData:()=>P,Intent:()=>U,IntentMessage:()=>B,IntentScope:()=>x,IntentVersion:()=>C,MultiSig:()=>_,MultiSigPkMap:()=>z,MultiSigPublicKey:()=>D,ObjectArg:()=>b,ObjectDigest:()=>h,PasskeyAuthenticator:()=>F,ProgrammableMoveCall:()=>j,ProgrammableTransaction:()=>k,PublicKey:()=>N,SenderSignedData:()=>L,SenderSignedTransaction:()=>K,SharedObjectRef:()=>g,StructTag:()=>T,SuiObjectRef:()=>f,TransactionData:()=>$,TransactionDataV1:()=>M,TransactionExpiration:()=>E,TransactionKind:()=>I,TypeTag:()=>w,base64String:()=>V}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(321423),d=r(46748);const p=u.bcs.bytes(l.SUI_ADDRESS_LENGTH).transform({validate:e=>{const t="string"==typeof e?e:(0,u.toHex)(e);if(!t||!(0,l.isValidSuiAddress)((0,l.normalizeSuiAddress)(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,u.fromHex)((0,l.normalizeSuiAddress)(e)):e,output:e=>(0,l.normalizeSuiAddress)((0,u.toHex)(e))}),h=u.bcs.vector(u.bcs.u8()).transform({name:"ObjectDigest",input:e=>(0,u.fromBase58)(e),output:e=>(0,u.toBase58)(new Uint8Array(e)),validate:e=>{if(32!==(0,u.fromBase58)(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),f=u.bcs.struct("SuiObjectRef",{objectId:p,version:u.bcs.u64(),digest:h}),g=u.bcs.struct("SharedObjectRef",{objectId:p,initialSharedVersion:u.bcs.u64(),mutable:u.bcs.bool()}),b=u.bcs.enum("ObjectArg",{ImmOrOwnedObject:f,SharedObject:g,Receiving:f}),m=u.bcs.enum("CallArg",{Pure:u.bcs.struct("Pure",{bytes:u.bcs.vector(u.bcs.u8()).transform({input:e=>"string"==typeof e?(0,u.fromBase64)(e):e,output:e=>(0,u.toBase64)(new Uint8Array(e))})}),Object:b}),y=u.bcs.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.bcs.lazy((()=>y)),struct:u.bcs.lazy((()=>T)),u16:null,u32:null,u256:null}),w=y.transform({input:e=>"string"==typeof e?d.TypeTagSerializer.parseFromStr(e,!0):e,output:e=>d.TypeTagSerializer.tagToString(e)}),v=u.bcs.enum("Argument",{GasCoin:null,Input:u.bcs.u16(),Result:u.bcs.u16(),NestedResult:u.bcs.tuple([u.bcs.u16(),u.bcs.u16()])}),j=u.bcs.struct("ProgrammableMoveCall",{package:p,module:u.bcs.string(),function:u.bcs.string(),typeArguments:u.bcs.vector(w),arguments:u.bcs.vector(v)}),O=u.bcs.enum("Command",{MoveCall:j,TransferObjects:u.bcs.struct("TransferObjects",{objects:u.bcs.vector(v),address:v}),SplitCoins:u.bcs.struct("SplitCoins",{coin:v,amounts:u.bcs.vector(v)}),MergeCoins:u.bcs.struct("MergeCoins",{destination:v,sources:u.bcs.vector(v)}),Publish:u.bcs.struct("Publish",{modules:u.bcs.vector(u.bcs.vector(u.bcs.u8()).transform({input:e=>"string"==typeof e?(0,u.fromBase64)(e):e,output:e=>(0,u.toBase64)(new Uint8Array(e))})),dependencies:u.bcs.vector(p)}),MakeMoveVec:u.bcs.struct("MakeMoveVec",{type:(S=w,u.bcs.enum("Option",{None:null,Some:S})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:u.bcs.vector(v)}),Upgrade:u.bcs.struct("Upgrade",{modules:u.bcs.vector(u.bcs.vector(u.bcs.u8()).transform({input:e=>"string"==typeof e?(0,u.fromBase64)(e):e,output:e=>(0,u.toBase64)(new Uint8Array(e))})),dependencies:u.bcs.vector(p),package:p,ticket:v})});var S;const k=u.bcs.struct("ProgrammableTransaction",{inputs:u.bcs.vector(m),commands:u.bcs.vector(O)}),I=u.bcs.enum("TransactionKind",{ProgrammableTransaction:k,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),E=u.bcs.enum("TransactionExpiration",{None:null,Epoch:u.bcs.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})});const T=u.bcs.struct("StructTag",{address:p,module:u.bcs.string(),name:u.bcs.string(),typeParams:u.bcs.vector(y)}),P=u.bcs.struct("GasData",{payment:u.bcs.vector(f),owner:p,price:u.bcs.u64(),budget:u.bcs.u64()}),M=u.bcs.struct("TransactionDataV1",{kind:I,sender:p,gasData:P,expiration:E}),$=u.bcs.enum("TransactionData",{V1:M}),x=u.bcs.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),C=u.bcs.enum("IntentVersion",{V0:null}),A=u.bcs.enum("AppId",{Sui:null}),U=u.bcs.struct("Intent",{scope:x,version:C,appId:A});function B(e){return u.bcs.struct(`IntentMessage<${e.name}>`,{intent:U,value:e})}const R=u.bcs.enum("CompressedSignature",{ED25519:u.bcs.fixedArray(64,u.bcs.u8()),Secp256k1:u.bcs.fixedArray(64,u.bcs.u8()),Secp256r1:u.bcs.fixedArray(64,u.bcs.u8()),ZkLogin:u.bcs.vector(u.bcs.u8())}),N=u.bcs.enum("PublicKey",{ED25519:u.bcs.fixedArray(32,u.bcs.u8()),Secp256k1:u.bcs.fixedArray(33,u.bcs.u8()),Secp256r1:u.bcs.fixedArray(33,u.bcs.u8()),ZkLogin:u.bcs.vector(u.bcs.u8())}),z=u.bcs.struct("MultiSigPkMap",{pubKey:N,weight:u.bcs.u8()}),D=u.bcs.struct("MultiSigPublicKey",{pk_map:u.bcs.vector(z),threshold:u.bcs.u16()}),_=u.bcs.struct("MultiSig",{sigs:u.bcs.vector(R),bitmap:u.bcs.u16(),multisig_pk:D}),V=u.bcs.vector(u.bcs.u8()).transform({input:e=>"string"==typeof e?(0,u.fromBase64)(e):e,output:e=>(0,u.toBase64)(new Uint8Array(e))}),K=u.bcs.struct("SenderSignedTransaction",{intentMessage:B($),txSignatures:u.bcs.vector(V)}),L=u.bcs.vector(K,{name:"SenderSignedData"}),F=u.bcs.struct("PasskeyAuthenticator",{authenticatorData:u.bcs.vector(u.bcs.u8()),clientDataJson:u.bcs.string(),userSignature:u.bcs.vector(u.bcs.u8())})},223592:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{TransactionEffects:()=>P}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(313817);const d=u.bcs.enum("PackageUpgradeError",{UnableToFetchPackage:u.bcs.struct("UnableToFetchPackage",{packageId:l.Address}),NotAPackage:u.bcs.struct("NotAPackage",{objectId:l.Address}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.bcs.struct("DigestDoesNotMatch",{digest:u.bcs.vector(u.bcs.u8())}),UnknownUpgradePolicy:u.bcs.struct("UnknownUpgradePolicy",{policy:u.bcs.u8()}),PackageIDDoesNotMatch:u.bcs.struct("PackageIDDoesNotMatch",{packageId:l.Address,ticketId:l.Address})}),p=u.bcs.struct("ModuleId",{address:l.Address,name:u.bcs.string()}),h=u.bcs.struct("MoveLocation",{module:p,function:u.bcs.u16(),instruction:u.bcs.u16(),functionName:u.bcs.option(u.bcs.string())}),f=u.bcs.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.bcs.struct("IndexOutOfBounds",{idx:u.bcs.u16()}),SecondaryIndexOutOfBounds:u.bcs.struct("SecondaryIndexOutOfBounds",{resultIdx:u.bcs.u16(),secondaryIdx:u.bcs.u16()}),InvalidResultArity:u.bcs.struct("InvalidResultArity",{resultIdx:u.bcs.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),g=u.bcs.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),b=u.bcs.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.bcs.struct("MoveObjectTooBig",{objectSize:u.bcs.u64(),maxObjectSize:u.bcs.u64()}),MovePackageTooBig:u.bcs.struct("MovePackageTooBig",{objectSize:u.bcs.u64(),maxObjectSize:u.bcs.u64()}),CircularObjectOwnership:u.bcs.struct("CircularObjectOwnership",{object:l.Address}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.bcs.option(h),MoveAbort:u.bcs.tuple([h,u.bcs.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.bcs.struct("CommandArgumentError",{argIdx:u.bcs.u16(),kind:f}),TypeArgumentError:u.bcs.struct("TypeArgumentError",{argumentIdx:u.bcs.u16(),kind:g}),UnusedValueWithoutDrop:u.bcs.struct("UnusedValueWithoutDrop",{resultIdx:u.bcs.u16(),secondaryIdx:u.bcs.u16()}),InvalidPublicFunctionReturnType:u.bcs.struct("InvalidPublicFunctionReturnType",{idx:u.bcs.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.bcs.struct("EffectsTooLarge",{currentSize:u.bcs.u64(),maxSize:u.bcs.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.bcs.struct("PackageUpgradeError",{upgradeError:d}),WrittenObjectsTooLarge:u.bcs.struct("WrittenObjectsTooLarge",{currentSize:u.bcs.u64(),maxSize:u.bcs.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.bcs.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.bcs.vector(l.Address)}),AddressDeniedForCoin:u.bcs.struct("AddressDeniedForCoin",{address:l.Address,coinType:u.bcs.string()}),CoinTypeGlobalPause:u.bcs.struct("CoinTypeGlobalPause",{coinType:u.bcs.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),m=u.bcs.enum("ExecutionStatus",{Success:null,Failed:u.bcs.struct("ExecutionFailed",{error:b,command:u.bcs.option(u.bcs.u64())})}),y=u.bcs.struct("GasCostSummary",{computationCost:u.bcs.u64(),storageCost:u.bcs.u64(),storageRebate:u.bcs.u64(),nonRefundableStorageFee:u.bcs.u64()}),w=u.bcs.enum("Owner",{AddressOwner:l.Address,ObjectOwner:l.Address,Shared:u.bcs.struct("Shared",{initialSharedVersion:u.bcs.u64()}),Immutable:null}),v=u.bcs.struct("TransactionEffectsV1",{status:m,executedEpoch:u.bcs.u64(),gasUsed:y,modifiedAtVersions:u.bcs.vector(u.bcs.tuple([l.Address,u.bcs.u64()])),sharedObjects:u.bcs.vector(l.SuiObjectRef),transactionDigest:l.ObjectDigest,created:u.bcs.vector(u.bcs.tuple([l.SuiObjectRef,w])),mutated:u.bcs.vector(u.bcs.tuple([l.SuiObjectRef,w])),unwrapped:u.bcs.vector(u.bcs.tuple([l.SuiObjectRef,w])),deleted:u.bcs.vector(l.SuiObjectRef),unwrappedThenDeleted:u.bcs.vector(l.SuiObjectRef),wrapped:u.bcs.vector(l.SuiObjectRef),gasObject:u.bcs.tuple([l.SuiObjectRef,w]),eventsDigest:u.bcs.option(l.ObjectDigest),dependencies:u.bcs.vector(l.ObjectDigest)}),j=u.bcs.tuple([u.bcs.u64(),l.ObjectDigest]),O=u.bcs.enum("ObjectIn",{NotExist:null,Exist:u.bcs.tuple([j,w])}),S=u.bcs.enum("ObjectOut",{NotExist:null,ObjectWrite:u.bcs.tuple([l.ObjectDigest,w]),PackageWrite:j}),k=u.bcs.enum("IDOperation",{None:null,Created:null,Deleted:null}),I=u.bcs.struct("EffectsObjectChange",{inputState:O,outputState:S,idOperation:k}),E=u.bcs.enum("UnchangedSharedKind",{ReadOnlyRoot:j,MutateDeleted:u.bcs.u64(),ReadDeleted:u.bcs.u64(),Cancelled:u.bcs.u64(),PerEpochConfig:null}),T=u.bcs.struct("TransactionEffectsV2",{status:m,executedEpoch:u.bcs.u64(),gasUsed:y,transactionDigest:l.ObjectDigest,gasObjectIndex:u.bcs.option(u.bcs.u32()),eventsDigest:u.bcs.option(l.ObjectDigest),dependencies:u.bcs.vector(l.ObjectDigest),lamportVersion:u.bcs.u64(),changedObjects:u.bcs.vector(u.bcs.tuple([l.Address,I])),unchangedSharedObjects:u.bcs.vector(u.bcs.tuple([l.Address,E])),auxDataDigest:u.bcs.option(l.ObjectDigest)}),P=u.bcs.enum("TransactionEffects",{V1:v,V2:T})},941882:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{BcsType:()=>h.BcsType,TypeTagSerializer:()=>p.TypeTagSerializer,bcs:()=>g,pureBcsSchemaFromTypeName:()=>f.pureBcsSchemaFromTypeName}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(313817),d=r(223592),p=r(46748),h=r(858171),f=r(806999);const g={...u.bcs,U8:u.bcs.u8(),U16:u.bcs.u16(),U32:u.bcs.u32(),U64:u.bcs.u64(),U128:u.bcs.u128(),U256:u.bcs.u256(),ULEB128:u.bcs.uleb128(),Bool:u.bcs.bool(),String:u.bcs.string(),Address:l.Address,AppId:l.AppId,Argument:l.Argument,CallArg:l.CallArg,CompressedSignature:l.CompressedSignature,GasData:l.GasData,Intent:l.Intent,IntentMessage:l.IntentMessage,IntentScope:l.IntentScope,IntentVersion:l.IntentVersion,MultiSig:l.MultiSig,MultiSigPkMap:l.MultiSigPkMap,MultiSigPublicKey:l.MultiSigPublicKey,ObjectArg:l.ObjectArg,ObjectDigest:l.ObjectDigest,ProgrammableMoveCall:l.ProgrammableMoveCall,ProgrammableTransaction:l.ProgrammableTransaction,PublicKey:l.PublicKey,SenderSignedData:l.SenderSignedData,SenderSignedTransaction:l.SenderSignedTransaction,SharedObjectRef:l.SharedObjectRef,StructTag:l.StructTag,SuiObjectRef:l.SuiObjectRef,Command:l.Command,TransactionData:l.TransactionData,TransactionDataV1:l.TransactionDataV1,TransactionExpiration:l.TransactionExpiration,TransactionKind:l.TransactionKind,TypeTag:l.TypeTag,TransactionEffects:d.TransactionEffects,PasskeyAuthenticator:l.PasskeyAuthenticator}},806999:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{pureBcsSchemaFromTypeName:()=>d}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(313817);function d(e){switch(e){case"u8":return u.bcs.u8();case"u16":return u.bcs.u16();case"u32":return u.bcs.u32();case"u64":return u.bcs.u64();case"u128":return u.bcs.u128();case"u256":return u.bcs.u256();case"bool":return u.bcs.bool();case"string":return u.bcs.string();case"id":case"address":return l.Address}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,r]=t.slice(1);return"vector"===e?u.bcs.vector(d(r)):u.bcs.option(d(r))}throw new Error(`Invalid Pure type name: ${e}`)}},46748:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{TypeTagSerializer:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(321423);const d=/^vector<(.+)>$/,p=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class h{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(d);if(r)return{vector:h.parseFromStr(r[1],t)};const n=e.match(p);if(n)return{struct:{address:t?(0,l.normalizeSuiAddress)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:h.parseStructTypeArgs(n[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(0,u.splitGenericParameters)(e).map((e=>h.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${h.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(h.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}},907936:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{SuiClient:()=>b,isSuiClient:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(108979),d=r(321423),p=r(979479),h=r(491364);const f=Symbol.for("@mysten/SuiClient");function g(e){return"object"==typeof e&&null!==e&&!0===e[f]}class b{get[f](){return!0}constructor(e){this.transport=e.transport??new h.SuiHTTPTransport({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,d.isValidSuiObjectId)((0,d.normalizeSuiObjectId)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach((e=>{if(!e||!(0,d.isValidSuiObjectId)((0,d.normalizeSuiObjectId)(e)))throw new Error(`Invalid Sui Object id ${e}`)})),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,d.isValidTransactionDigest)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach((e=>{if(!(0,d.isValidTransactionDigest)(e))throw new Error(`Invalid Transaction digest ${e}`)})),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:n}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:(0,u.toBase64)(e),Array.isArray(t)?t:[t],r]});if("WaitForLocalExecution"===n)try{await this.waitForTransaction({digest:i.digest})}catch(e){}return i}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));const{signature:i,bytes:s}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...r})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,d.isValidSuiAddress)((0,d.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!(0,d.isValidSuiObjectId)((0,d.normalizeSuiObjectId)(e)))throw new Error(`Invalid Sui Stake id ${e}`)})),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let t;if((0,l.isTransaction)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,u.toBase64)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=(0,u.toBase64)(e.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,u.toBase64)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,d.isValidSuiObjectId)((0,d.normalizeSuiObjectId)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=(0,u.fromBase58)(e.digest);return(0,u.toHex)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:n,nextCursor:r,data:i.map((t=>(0,p.normalizeSuiNSName)(t,e)))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){const i=AbortSignal.timeout(t),s=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(i.reason)))}));for(s.catch((()=>{}));!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,r))),s])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}},379934:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{JsonRpcError:()=>u,SuiHTTPStatusError:()=>l,SuiHTTPTransportError:()=>c}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const o={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class c extends Error{}class u extends c{constructor(e,t){super(e),this.code=t,this.type=o[t]??"ServerError"}}class l extends c{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}},491364:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{SuiHTTPTransport:()=>O}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b,m,y,w=r(769568),v=r(379934),j=r(583493);class O{constructor(e){d(this,m),d(this,f,0),d(this,g),d(this,b),p(this,g,e)}fetch(e,t){const r=l(this,g).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){p(this,f,l(this,f)+1);const t=await this.fetch(l(this,g).rpc?.url??l(this,g).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":w.PACKAGE_VERSION,"Client-Target-Api-Version":w.TARGETED_RPC_VERSION,"Client-Request-Method":e.method,...l(this,g).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:l(this,f),method:e.method,params:e.params})});if(!t.ok)throw new v.SuiHTTPStatusError(`Unexpected status code: ${t.status}`,t.status,t.statusText);const r=await t.json();if("error"in r&&null!=r.error)throw new v.JsonRpcError(r.error.message,r.error.code);return r.result}async subscribe(e){const t=await(this,r=m,n=y,u(this,r,"access private method"),n).call(this).subscribe(e);var r,n;return async()=>!!await t()}}f=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakSet,y=function(){if(!l(this,b)){const e=l(this,g).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");p(this,b,new j.WebsocketClient(l(this,g).websocket?.url??l(this,g).url,{WebSocketConstructor:e,...l(this,g).websocket}))}return l(this,b)}},494678:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let c of a(t))o.call(e,c)||c===r||i(e,c,{get:()=>t[c],enumerable:!(n=s(t,c))||n.enumerable});return e},u={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(u,{JsonRpcError:()=>h.JsonRpcError,SuiClient:()=>p.SuiClient,SuiHTTPStatusError:()=>h.SuiHTTPStatusError,SuiHTTPTransport:()=>l.SuiHTTPTransport,SuiHTTPTransportError:()=>h.SuiHTTPTransportError,getFullnodeUrl:()=>d.getFullnodeUrl,isSuiClient:()=>p.isSuiClient}),e.exports=(n=u,c(i({},"__esModule",{value:!0}),n));var l=r(491364),d=r(951782);((e,t,r)=>{c(e,t,"default"),r&&c(r,t,"default")})(u,r(920818),e.exports);var p=r(907936),h=r(379934)},951782:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function o(e){switch(e){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${e}`)}}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{getFullnodeUrl:()=>o}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},583493:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h=(e,t,r)=>(u(e,t,"access private method"),r),f={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(f,{DEFAULT_CLIENT_OPTIONS:()=>I,WebsocketClient:()=>E}),e.exports=(n=f,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var g,b,m,y,w,v,j,O,S,k=r(379934);const I={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class E{constructor(e,t={}){if(d(this,j),d(this,g,0),d(this,b,0),d(this,m,null),d(this,y,null),d(this,w,new Set),d(this,v,new Map),this.endpoint=e,this.options={...I,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const r=await h(this,j,O).call(this);return new Promise(((n,i)=>{p(this,g,l(this,g)+1),l(this,v).set(l(this,g),{resolve:n,reject:i,timeout:setTimeout((()=>{l(this,v).delete(l(this,g)),i(new Error(`Request timeout: ${e}`))}),this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:l(this,g),method:e,params:t}))})).then((({error:e,result:t})=>{if(e)throw new k.JsonRpcError(e.message,e.code);return t}))}async subscribe(e){const t=new T(e);return l(this,w).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,j=new WeakSet,O=function(){return l(this,y)||p(this,y,new Promise((e=>{l(this,m)?.close(),p(this,m,new this.options.WebSocketConstructor(this.endpoint)),l(this,m).addEventListener("open",(()=>{p(this,b,0),e(l(this,m))})),l(this,m).addEventListener("close",(()=>{var e,t;(e=this,t=b,{set _(r){p(e,t,r,undefined)},get _(){return l(e,t,undefined)}})._++,l(this,b)<=this.options.maxReconnects&&setTimeout((()=>{h(this,j,S).call(this)}),this.options.reconnectTimeout)})),l(this,m).addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){return void console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:t}))}if("id"in t&&null!=t.id&&l(this,v).has(t.id)){const{resolve:e,timeout:r}=l(this,v).get(t.id);clearTimeout(r),e(t)}else if("params"in t){const{params:e}=t;l(this,w).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),l(this,y)},S=async function(){return l(this,m)?.close(),p(this,y,null),Promise.allSettled([...l(this,w)].map((e=>e.subscribe(this))))};class T{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}},624301:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},860218:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},428959:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},604211:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},985025:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},920818:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let c of a(t))o.call(e,c)||c===r||i(e,c,{get:()=>t[c],enumerable:!(n=s(t,c))||n.enumerable});return e},u=(e,t,r)=>(c(e,t,"default"),r&&c(r,t,"default")),l={};e.exports=(n=l,c(i({},"__esModule",{value:!0}),n)),u(l,r(624301),e.exports),u(l,r(428959),e.exports),u(l,r(604211),e.exports),u(l,r(860218),e.exports),u(l,r(985025),e.exports),u(l,r(956533),e.exports)},956533:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},801406:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Keypair:()=>h.Keypair,LEGACY_PRIVATE_KEY_SIZE:()=>h.LEGACY_PRIVATE_KEY_SIZE,PRIVATE_KEY_SIZE:()=>h.PRIVATE_KEY_SIZE,PublicKey:()=>f.PublicKey,SIGNATURE_FLAG_TO_SCHEME:()=>l.SIGNATURE_FLAG_TO_SCHEME,SIGNATURE_SCHEME_TO_FLAG:()=>l.SIGNATURE_SCHEME_TO_FLAG,SIGNATURE_SCHEME_TO_SIZE:()=>l.SIGNATURE_SCHEME_TO_SIZE,SUI_PRIVATE_KEY_PREFIX:()=>h.SUI_PRIVATE_KEY_PREFIX,Signer:()=>h.Signer,decodeSuiPrivateKey:()=>h.decodeSuiPrivateKey,encodeSuiPrivateKey:()=>h.encodeSuiPrivateKey,isValidBIP32Path:()=>d.isValidBIP32Path,isValidHardenedPath:()=>d.isValidHardenedPath,messageWithIntent:()=>p.messageWithIntent,mnemonicToSeed:()=>d.mnemonicToSeed,mnemonicToSeedHex:()=>d.mnemonicToSeedHex,parseSerializedSignature:()=>u.parseSerializedSignature,toSerializedSignature:()=>u.toSerializedSignature}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(260785),l=r(771997),d=r(522936),p=r(793390),h=r(355383),f=r(191574)},793390:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{messageWithIntent:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(941882);function l(e,t){return u.bcs.IntentMessage(u.bcs.fixedArray(t.length,u.bcs.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}},355383:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Keypair:()=>w,LEGACY_PRIVATE_KEY_SIZE:()=>b,PRIVATE_KEY_SIZE:()=>g,SUI_PRIVATE_KEY_PREFIX:()=>m,Signer:()=>y,decodeSuiPrivateKey:()=>v,encodeSuiPrivateKey:()=>j}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(513806),d=r(394372),p=r(793390),h=r(771997),f=r(260785);const g=32,b=64,m="suiprivkey";class y{async signWithIntent(e,t){const r=(0,p.messageWithIntent)(t,e),n=(0,l.blake2b)(r,{dkLen:32});return{signature:(0,f.toSerializedSignature)({signature:await this.sign(n),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:(0,u.toBase64)(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:t}=await this.signWithIntent(u.bcs.vector(u.bcs.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:(0,u.toBase64)(e),signature:t}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class w extends y{}function v(e){const{prefix:t,words:r}=d.bech32.decode(e);if(t!==m)throw new Error("invalid private key prefix");const n=new Uint8Array(d.bech32.fromWords(r)),i=n.slice(1);return{schema:h.SIGNATURE_FLAG_TO_SCHEME[n[0]],secretKey:i}}function j(e,t){if(e.length!==g)throw new Error("Invalid bytes length");const r=h.SIGNATURE_SCHEME_TO_FLAG[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),d.bech32.encode(m,d.bech32.toWords(n))}},522936:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{isValidBIP32Path:()=>p,isValidHardenedPath:()=>d,mnemonicToSeed:()=>h,mnemonicToSeedHex:()=>f}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(455796);function d(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function p(e){return!!new RegExp("^m\\/(54|74)'\\/784'\\/[0-9]+'\\/[0-9]+\\/[0-9]+$").test(e)}function h(e){return(0,l.mnemonicToSeedSync)(e,"")}function f(e){return(0,u.toHex)(h(e))}},191574:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{PublicKey:()=>m,bytesEqual:()=>b,parseSerializedKeypairSignature:()=>y}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(513806),d=r(870064),p=r(941882),h=r(321423),f=r(793390),g=r(771997);function b(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class m{equals(e){return b(this.toRawBytes(),e.toRawBytes())}toBase64(){return(0,u.toBase64)(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return(0,u.toBase64)(e)}verifyWithIntent(e,t,r){const n=(0,f.messageWithIntent)(r,e),i=(0,l.blake2b)(n,{dkLen:32});return this.verify(i,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(p.bcs.vector(p.bcs.u8()).serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return(0,h.normalizeSuiAddress)((0,d.bytesToHex)((0,l.blake2b)(this.toSuiBytes(),{dkLen:32})).slice(0,2*h.SUI_ADDRESS_LENGTH))}}function y(e){const t=(0,u.fromBase64)(e),r=g.SIGNATURE_FLAG_TO_SCHEME[t[0]];switch(r){case"ED25519":case"Secp256k1":case"Secp256r1":const n=g.SIGNATURE_SCHEME_TO_SIZE[r],i=t.slice(1,t.length-n);return{serializedSignature:e,signatureScheme:r,signature:i,publicKey:t.slice(1+i.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}},771997:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{SIGNATURE_FLAG_TO_SCHEME:()=>u,SIGNATURE_SCHEME_TO_FLAG:()=>o,SIGNATURE_SCHEME_TO_SIZE:()=>c}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const o={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},c={ED25519:32,Secp256k1:33,Secp256r1:33},u={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"}},260785:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{parseSerializedSignature:()=>b,toSerializedSignature:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(941882),d=r(463322),p=r(651108),h=r(191574),f=r(771997);function g({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([f.SIGNATURE_SCHEME_TO_FLAG[t]]),i.set(e,1),i.set(n,1+e.length),(0,u.toBase64)(i)}function b(e){const t=(0,u.fromBase64)(e),r=f.SIGNATURE_FLAG_TO_SCHEME[t[0]];switch(r){case"Passkey":return(0,d.parseSerializedPasskeySignature)(e);case"MultiSig":return{serializedSignature:e,signatureScheme:r,multisig:l.bcs.MultiSig.parse(t.slice(1)),bytes:t,signature:void 0};case"ZkLogin":return(0,p.parseSerializedZkLoginSignature)(e);case"ED25519":case"Secp256k1":case"Secp256r1":return(0,h.parseSerializedKeypairSignature)(e);default:throw new Error("Unsupported signature scheme")}}},67284:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{SuiGraphQLClient:()=>v,SuiGraphQLRequestError:()=>w}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b,m,y=r(463206);class w extends Error{}class v{constructor({url:e,fetch:t=fetch,headers:r={},queries:n={}}){d(this,f),d(this,g),d(this,b),d(this,m),p(this,f,e),p(this,g,n),p(this,b,r),p(this,m,((...e)=>t(...e)))}async query(e){const t=await l(this,m).call(this,l(this,f),{method:"POST",headers:{"Content-Type":"application/json",...l(this,b)},body:JSON.stringify({query:"string"==typeof e.query?String(e.query):(0,y.print)(e.query),variables:e.variables,extensions:e.extensions,operationName:e.operationName})});if(!t.ok)throw new w(`GraphQL request failed: ${t.statusText} (${t.status})`);return await t.json()}async execute(e,t){return this.query({...t,query:l(this,g)[e]})}}f=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap},107269:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let c of a(t))o.call(e,c)||c===r||i(e,c,{get:()=>t[c],enumerable:!(n=s(t,c))||n.enumerable});return e},u={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(u,{graphql:()=>p,maskFragments:()=>d.maskFragments,readFragment:()=>d.readFragment}),e.exports=(n=u,c(i({},"__esModule",{value:!0}),n));var l=r(812438);((e,t,r)=>{c(e,t,"default"),r&&c(r,t,"default")})(u,r(554726),e.exports);var d=r(812438);const p=(0,l.initGraphQLTada)()},554726:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},233392:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{derivePath:()=>f}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(141377),d=r(312540);const p=new RegExp("^m(\\/[0-9]+')+$"),h=e=>e.replace("'",""),f=(e,t,r=2147483648)=>{if(!(e=>!!p.test(e)&&!e.split("/").slice(1).map(h).some(isNaN))(e))throw new Error("Invalid derivation path");const{key:n,chainCode:i}=(e=>{const t=l.hmac.create(d.sha512,"ed25519 seed").update((0,u.fromHex)(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(h).map((e=>parseInt(e,10))).reduce(((e,t)=>(({key:e,chainCode:t},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const i=new Uint8Array(1+e.length+n.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(e,1),i.set(new Uint8Array(n,0,n.byteLength),e.length+1);const s=l.hmac.create(d.sha512,t).update(i).digest();return{key:s.slice(0,32),chainCode:s.slice(32)}})(e,t+r)),{key:n,chainCode:i})}},953045:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_ED25519_DERIVATION_PATH:()=>u.DEFAULT_ED25519_DERIVATION_PATH,Ed25519Keypair:()=>u.Ed25519Keypair,Ed25519PublicKey:()=>l.Ed25519PublicKey}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(274306),l=r(778311)},274306:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_ED25519_DERIVATION_PATH:()=>f,Ed25519Keypair:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(416836),l=r(355383),d=r(522936),p=r(233392),h=r(778311);const f="m/44'/784'/0'/0'/0'";class g extends l.Keypair{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const e=u.ed25519.utils.randomPrivateKey();this.keypair={publicKey:u.ed25519.getPublicKey(e),secretKey:e}}}getKeyScheme(){return"ED25519"}static generate(){const e=u.ed25519.utils.randomPrivateKey();return new g({publicKey:u.ed25519.getPublicKey(e),secretKey:e})}static fromSecretKey(e,t){if("string"==typeof e){const r=(0,l.decodeSuiPrivateKey)(e);if("ED25519"!==r.schema)throw new Error(`Expected a ED25519 keypair, got ${r.schema}`);return this.fromSecretKey(r.secretKey,t)}const r=e.length;if(r!==l.PRIVATE_KEY_SIZE)throw new Error(`Wrong secretKey size. Expected ${l.PRIVATE_KEY_SIZE} bytes, got ${r}.`);const n={publicKey:u.ed25519.getPublicKey(e),secretKey:e};if(!t||!t.skipValidation){const t=(new TextEncoder).encode("sui validation"),r=u.ed25519.sign(t,e);if(!u.ed25519.verify(r,t,n.publicKey))throw new Error("provided secretKey is invalid")}return new g(n)}getPublicKey(){return new h.Ed25519PublicKey(this.keypair.publicKey)}getSecretKey(){return(0,l.encodeSuiPrivateKey)(this.keypair.secretKey.slice(0,l.PRIVATE_KEY_SIZE),this.getKeyScheme())}async sign(e){return u.ed25519.sign(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=f),!(0,d.isValidHardenedPath)(t))throw new Error("Invalid derivation path");const{key:r}=(0,p.derivePath)(t,(0,d.mnemonicToSeedHex)(e));return g.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=f),!(0,d.isValidHardenedPath)(t))throw new Error("Invalid derivation path");const{key:r}=(0,p.derivePath)(t,e);return g.fromSecretKey(r)}}},778311:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Ed25519PublicKey:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(416836),d=r(191574),p=r(771997);class h extends d.PublicKey{constructor(e){if(super(),"string"==typeof e?this.data=(0,u.fromBase64)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return p.SIGNATURE_SCHEME_TO_FLAG.ED25519}async verify(e,t){let r;if("string"==typeof t){const e=(0,d.parseSerializedKeypairSignature)(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!(0,d.bytesEqual)(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return l.ed25519.verify(r,e,this.toRawBytes())}}h.SIZE=32},463322:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{PASSKEY_PUBLIC_KEY_SIZE:()=>g,PASSKEY_SIGNATURE_SIZE:()=>m,PASSKEY_UNCOMPRESSED_PUBLIC_KEY_SIZE:()=>b,PasskeyPublicKey:()=>w,SECP256R1_SPKI_HEADER:()=>y,parseDerSPKI:()=>v,parseSerializedPasskeySignature:()=>j}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(354842),d=r(596053),p=r(313817),h=r(191574),f=r(771997);const g=33,b=65,m=64,y=new Uint8Array([48,89,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,3,66,0]);class w extends h.PublicKey{constructor(e){if(super(),"string"==typeof e?this.data=(0,u.fromBase64)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==g)throw new Error(`Invalid public key input. Expected ${g} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return f.SIGNATURE_SCHEME_TO_FLAG.Passkey}async verify(e,t){const r=j(t),n=JSON.parse(r.clientDataJson);if("webauthn.get"!==n.type)return!1;const i=(0,u.fromBase64)(n.challenge.replace(/-/g,"+").replace(/_/g,"/"));if(!(0,h.bytesEqual)(e,i))return!1;const s=r.userSignature.slice(1+m);if(!(0,h.bytesEqual)(this.toRawBytes(),s))return!1;const a=new Uint8Array([...r.authenticatorData,...(0,d.sha256)(r.clientDataJson)]),o=r.userSignature.slice(1,m+1);return l.secp256r1.verify(o,(0,d.sha256)(a),s)}}function v(e){if(e.length!==y.length+b)throw new Error("Invalid DER length");for(let t=0;t<y.length;t++)if(e[t]!==y[t])throw new Error("Invalid spki header");if(4!==e[y.length])throw new Error("Invalid point marker");return e.slice(y.length)}function j(e){const t="string"==typeof e?(0,u.fromBase64)(e):e;if(t[0]!==f.SIGNATURE_SCHEME_TO_FLAG.Passkey)throw new Error("Invalid signature scheme");const r=p.PasskeyAuthenticator.parse(t.slice(1));return{signatureScheme:"Passkey",serializedSignature:(0,u.toBase64)(t),signature:t,authenticatorData:r.authenticatorData,clientDataJson:r.clientDataJson,userSignature:new Uint8Array(r.userSignature),publicKey:new Uint8Array(r.userSignature.slice(1+m))}}w.SIZE=g},907867:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_SECP256K1_DERIVATION_PATH:()=>u.DEFAULT_SECP256K1_DERIVATION_PATH,Secp256k1Keypair:()=>u.Secp256k1Keypair,Secp256k1PublicKey:()=>l.Secp256k1PublicKey}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(624857),l=r(498255)},624857:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_SECP256K1_DERIVATION_PATH:()=>m,Secp256k1Keypair:()=>y}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(838358),l=r(513806),d=r(596053),p=r(870064),h=r(815179),f=r(355383),g=r(522936),b=r(498255);const m="m/54'/784'/0'/0/0";class y extends f.Keypair{constructor(e){if(super(),e)this.keypair=e;else{const e=u.secp256k1.utils.randomPrivateKey(),t=u.secp256k1.getPublicKey(e,!0);this.keypair={publicKey:t,secretKey:e}}}getKeyScheme(){return"Secp256k1"}static generate(){return new y}static fromSecretKey(e,t){if("string"==typeof e){const r=(0,f.decodeSuiPrivateKey)(e);if("Secp256k1"!==r.schema)throw new Error(`Expected a Secp256k1 keypair, got ${r.schema}`);return this.fromSecretKey(r.secretKey,t)}const r=u.secp256k1.getPublicKey(e,!0);if(!t||!t.skipValidation){const t=(new TextEncoder).encode("sui validation"),n=(0,p.bytesToHex)((0,l.blake2b)(t,{dkLen:32})),i=u.secp256k1.sign(n,e);if(!u.secp256k1.verify(i,n,r,{lowS:!0}))throw new Error("Provided secretKey is invalid")}return new y({publicKey:r,secretKey:e})}static fromSeed(e){let t=u.secp256k1.getPublicKey(e,!0);return new y({publicKey:t,secretKey:e})}getPublicKey(){return new b.Secp256k1PublicKey(this.keypair.publicKey)}getSecretKey(){return(0,f.encodeSuiPrivateKey)(this.keypair.secretKey,this.getKeyScheme())}async sign(e){const t=(0,d.sha256)(e);return u.secp256k1.sign(t,this.keypair.secretKey,{lowS:!0}).toCompactRawBytes()}static deriveKeypair(e,t){if(null==t&&(t=m),!(0,g.isValidBIP32Path)(t))throw new Error("Invalid derivation path");const r=h.HDKey.fromMasterSeed((0,g.mnemonicToSeed)(e)).derive(t);if(null==r.publicKey||null==r.privateKey)throw new Error("Invalid key");return new y({publicKey:r.publicKey,secretKey:r.privateKey})}}},498255:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Secp256k1PublicKey:()=>f}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(838358),d=r(596053),p=r(191574),h=r(771997);class f extends p.PublicKey{constructor(e){if(super(),"string"==typeof e?this.data=(0,u.fromBase64)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),33!==this.data.length)throw new Error(`Invalid public key input. Expected 33 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return h.SIGNATURE_SCHEME_TO_FLAG.Secp256k1}async verify(e,t){let r;if("string"==typeof t){const e=(0,p.parseSerializedKeypairSignature)(t);if("Secp256k1"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!(0,p.bytesEqual)(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return l.secp256k1.verify(l.secp256k1.Signature.fromCompact(r),(0,d.sha256)(e),this.toRawBytes())}}f.SIZE=33},306979:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_SECP256R1_DERIVATION_PATH:()=>u.DEFAULT_SECP256R1_DERIVATION_PATH,Secp256r1Keypair:()=>u.Secp256r1Keypair,Secp256r1PublicKey:()=>l.Secp256r1PublicKey}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(103868),l=r(467112)},103868:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{DEFAULT_SECP256R1_DERIVATION_PATH:()=>m,Secp256r1Keypair:()=>y}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(354842),l=r(513806),d=r(596053),p=r(870064),h=r(815179),f=r(355383),g=r(522936),b=r(467112);const m="m/74'/784'/0'/0/0";class y extends f.Keypair{constructor(e){if(super(),e)this.keypair=e;else{const e=u.secp256r1.utils.randomPrivateKey(),t=u.secp256r1.getPublicKey(e,!0);this.keypair={publicKey:t,secretKey:e}}}getKeyScheme(){return"Secp256r1"}static generate(){return new y}static fromSecretKey(e,t){if("string"==typeof e){const r=(0,f.decodeSuiPrivateKey)(e);if("Secp256r1"!==r.schema)throw new Error(`Expected a Secp256r1 keypair, got ${r.schema}`);return this.fromSecretKey(r.secretKey,t)}const r=u.secp256r1.getPublicKey(e,!0);if(!t||!t.skipValidation){const t=(new TextEncoder).encode("sui validation"),n=(0,p.bytesToHex)((0,l.blake2b)(t,{dkLen:32})),i=u.secp256r1.sign(n,e,{lowS:!0});if(!u.secp256r1.verify(i,n,r,{lowS:!0}))throw new Error("Provided secretKey is invalid")}return new y({publicKey:r,secretKey:e})}static fromSeed(e){let t=u.secp256r1.getPublicKey(e,!0);return new y({publicKey:t,secretKey:e})}getPublicKey(){return new b.Secp256r1PublicKey(this.keypair.publicKey)}getSecretKey(){return(0,f.encodeSuiPrivateKey)(this.keypair.secretKey,this.getKeyScheme())}async sign(e){const t=(0,d.sha256)(e);return u.secp256r1.sign(t,this.keypair.secretKey,{lowS:!0}).toCompactRawBytes()}static deriveKeypair(e,t){if(null==t&&(t=m),!(0,g.isValidBIP32Path)(t))throw new Error("Invalid derivation path");const r=h.HDKey.fromMasterSeed((0,g.mnemonicToSeed)(e)).derive(t).privateKey;return y.fromSecretKey(r)}}},467112:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Secp256r1PublicKey:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(354842),d=r(596053),p=r(191574),h=r(771997),f=r(260785);class g extends p.PublicKey{constructor(e){if(super(),"string"==typeof e?this.data=(0,u.fromBase64)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),33!==this.data.length)throw new Error(`Invalid public key input. Expected 33 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return h.SIGNATURE_SCHEME_TO_FLAG.Secp256r1}async verify(e,t){let r;if("string"==typeof t){const e=(0,f.parseSerializedSignature)(t);if("Secp256r1"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!(0,p.bytesEqual)(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return l.secp256r1.verify(l.secp256r1.Signature.fromCompact(r),(0,d.sha256)(e),this.toRawBytes())}}g.SIZE=33},280469:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{MultiSigPublicKey:()=>l.MultiSigPublicKey,MultiSigSigner:()=>u.MultiSigSigner,parsePartialSignatures:()=>l.parsePartialSignatures}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(846469),l=r(554907)},554907:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{MAX_SIGNER_IN_MULTISIG:()=>v,MIN_SIGNER_IN_MULTISIG:()=>j,MultiSigPublicKey:()=>O,parsePartialSignatures:()=>S}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(513806),d=r(870064),p=r(941882),h=r(191574),f=r(771997),g=r(260785),b=r(321423),m=r(824680),y=r(651108),w=r(846469);const v=10,j=1;class O extends h.PublicKey{constructor(e,t={}){if(super(),"string"==typeof e?(this.rawBytes=(0,u.fromBase64)(e),this.multisigPublicKey=p.bcs.MultiSigPublicKey.parse(this.rawBytes)):e instanceof Uint8Array?(this.rawBytes=e,this.multisigPublicKey=p.bcs.MultiSigPublicKey.parse(this.rawBytes)):(this.multisigPublicKey=e,this.rawBytes=p.bcs.MultiSigPublicKey.serialize(e).toBytes()),this.multisigPublicKey.threshold<1)throw new Error("Invalid threshold");const r=new Set;this.publicKeys=this.multisigPublicKey.pk_map.map((({pubKey:e,weight:n})=>{const[i,s]=Object.entries(e).filter((([e])=>"$kind"!==e))[0],a=Uint8Array.from(s).toString();if(r.has(a))throw new Error("Multisig does not support duplicate public keys");if(r.add(a),n<1)throw new Error("Invalid weight");return{publicKey:(0,m.publicKeyFromRawBytes)(i,Uint8Array.from(s),t),weight:n}}));const n=this.publicKeys.reduce(((e,{weight:t})=>e+t),0);if(this.multisigPublicKey.threshold>n)throw new Error("Unreachable threshold");if(this.publicKeys.length>v)throw new Error(`Max number of signers in a multisig is ${v}`);if(this.publicKeys.length<j)throw new Error(`Min number of signers in a multisig is ${j}`)}static fromPublicKeys({threshold:e,publicKeys:t}){return new O({pk_map:t.map((({publicKey:e,weight:t})=>({pubKey:{[f.SIGNATURE_FLAG_TO_SCHEME[e.flag()]]:Array.from(e.toRawBytes())},weight:t}))),threshold:e})}equals(e){return super.equals(e)}toRawBytes(){return this.rawBytes}getPublicKeys(){return this.publicKeys}getThreshold(){return this.multisigPublicKey.threshold}getSigner(...e){return new w.MultiSigSigner(this,e)}toSuiAddress(){const e=new Uint8Array(1+65*v+2);e.set([f.SIGNATURE_SCHEME_TO_FLAG.MultiSig]),e.set(p.bcs.u16().serialize(this.multisigPublicKey.threshold).toBytes(),1);let t=3;for(const{publicKey:r,weight:n}of this.publicKeys){const i=r.toSuiBytes();e.set(i,t),t+=i.length,e.set([n],t++)}return(0,b.normalizeSuiAddress)((0,d.bytesToHex)((0,l.blake2b)(e.slice(0,t),{dkLen:32})))}flag(){return f.SIGNATURE_SCHEME_TO_FLAG.MultiSig}async verify(e,t){const r=(0,g.parseSerializedSignature)(t);if("MultiSig"!==r.signatureScheme)throw new Error("Invalid signature scheme");const{multisig:n}=r;let i=0;if(!(0,h.bytesEqual)(p.bcs.MultiSigPublicKey.serialize(this.multisigPublicKey).toBytes(),p.bcs.MultiSigPublicKey.serialize(n.multisig_pk).toBytes()))return!1;for(const{publicKey:t,weight:r,signature:s}of S(n)){if(!await t.verify(e,s))return!1;i+=r}return i>=this.multisigPublicKey.threshold}combinePartialSignatures(e){if(e.length>v)throw new Error(`Max number of signatures in a multisig is ${v}`);let t=0;const r=new Array(e.length);for(let n=0;n<e.length;n++){let i,s,a=(0,g.parseSerializedSignature)(e[n]);if("MultiSig"===a.signatureScheme)throw new Error("MultiSig is not supported inside MultiSig");i="ZkLogin"===a.signatureScheme?(0,y.toZkLoginPublicIdentifier)(a.zkLogin?.addressSeed,a.zkLogin?.iss).toRawBytes():a.publicKey,r[n]={[a.signatureScheme]:Array.from(a.signature.map((e=>Number(e))))};for(let e=0;e<this.publicKeys.length;e++)if((0,h.bytesEqual)(i,this.publicKeys[e].publicKey.toRawBytes())){if(t&1<<e)throw new Error("Received multiple signatures from the same public key");s=e;break}if(void 0===s)throw new Error("Received signature from unknown public key");t|=1<<s}let n={sigs:r,bitmap:t,multisig_pk:this.multisigPublicKey};const i=p.bcs.MultiSig.serialize(n,{maxSize:8192}).toBytes();let s=new Uint8Array(i.length+1);return s.set([f.SIGNATURE_SCHEME_TO_FLAG.MultiSig]),s.set(i,1),(0,u.toBase64)(s)}}function S(e,t={}){let r=new Array(e.sigs.length);for(let n=0;n<e.sigs.length;n++){const[i,s]=Object.entries(e.sigs[n]).filter((([e])=>"$kind"!==e))[0],a=k(e.bitmap).at(n),o=e.multisig_pk.pk_map[a],c=Uint8Array.from(Object.values(o.pubKey)[0]);if("MultiSig"===i)throw new Error("MultiSig is not supported inside MultiSig");const u=(0,m.publicKeyFromRawBytes)(i,c,t);r[n]={signatureScheme:i,signature:Uint8Array.from(s),publicKey:u,weight:o.weight}}return r}function k(e){if(e<0||e>1024)throw new Error("Invalid bitmap");let t=[];for(let r=0;r<10;r++)0!=(e&1<<r)&&t.push(r);return Uint8Array.from(t)}},846469:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{MultiSigSigner:()=>y}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b=r(858171),m=r(801406);class y extends m.Signer{constructor(e,t=[]){super(),d(this,f),d(this,g),p(this,f,e),p(this,g,t);let r=new Set,n=0;const i=e.getPublicKeys().map((({weight:e,publicKey:t})=>({weight:e,address:t.toSuiAddress()})));for(let e of t){const t=e.toSuiAddress();if(r.has(t))throw new Error("Can't create MultiSigSigner with duplicate signers");r.add(t);const s=i.find((e=>e.address===t))?.weight;if(!s)throw new Error(`Signer ${t} is not part of the MultiSig public key`);n+=s}if(n<e.getThreshold())throw new Error("Combined weight of signers is less than threshold")}getKeyScheme(){return"MultiSig"}getPublicKey(){return l(this,f)}sign(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}signData(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}async signTransaction(e){return{signature:l(this,f).combinePartialSignatures(await Promise.all(l(this,g).map((async t=>(await t.signTransaction(e)).signature)))),bytes:(0,b.toBase64)(e)}}async signPersonalMessage(e){return{signature:l(this,f).combinePartialSignatures(await Promise.all(l(this,g).map((async t=>(await t.signPersonalMessage(e)).signature)))),bytes:(0,b.toBase64)(e)}}}f=new WeakMap,g=new WeakMap},274389:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Arguments:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(609577);const l={pure:(0,r(860360).createPure)((e=>t=>t.pure(e))),object:(0,u.createObjectMethods)((e=>t=>t.object(e))),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)}},92855:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Commands:()=>f,UpgradePolicy:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(882374),d=r(321423),p=r(675914),h=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(h||{});const f={MoveCall(e){const[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>(0,l.parse)(p.Argument,e))),address:(0,l.parse)(p.Argument,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:(0,l.parse)(p.Argument,e),amounts:t.map((e=>(0,l.parse)(p.Argument,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:(0,l.parse)(p.Argument,e),sources:t.map((e=>(0,l.parse)(p.Argument,e)))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map((e=>"string"==typeof e?e:(0,u.toBase64)(new Uint8Array(e)))),dependencies:t.map((e=>(0,d.normalizeSuiObjectId)(e)))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:n})=>({$kind:"Upgrade",Upgrade:{modules:e.map((e=>"string"==typeof e?e:(0,u.toBase64)(new Uint8Array(e)))),dependencies:t.map((e=>(0,d.normalizeSuiObjectId)(e))),package:r,ticket:(0,l.parse)(p.Argument,n)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>(0,l.parse)(p.Argument,e)))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>(0,l.parse)(p.Argument,e))):(0,l.parse)(p.Argument,t)]))),data:r}})}},514824:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Inputs:()=>d}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(321423);const d={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,u.toBase64)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,l.normalizeSuiAddress)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,l.normalizeSuiAddress)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,l.normalizeSuiAddress)(e)}}})}},340982:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{AsyncCache:()=>y,InMemoryCache:()=>w,ObjectCache:()=>v}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b,m=r(321423);class y{async getObject(e){const[t,r]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return t??r??null}async getObjects(e){return Promise.all([...e.map((e=>this.getObject(e)))])}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map((async e=>this.addObject(e))))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map((e=>this.deleteObject(e))))}async getMoveFunctionDefinition(e){const t=`${(0,m.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",t)}async addMoveFunctionDefinition(e){const t=(0,m.normalizeSuiAddress)(e.package),r=`${t}::${e.module}::${e.function}`,n={...e,package:t};return await this.set("MoveFunction",r,n),n}async deleteMoveFunctionDefinition(e){const t=`${(0,m.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",t)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,t){return this.set("Custom",e,t)}async deleteCustom(e){return this.delete("Custom",e)}}class w extends y{constructor(){super(...arguments),d(this,f,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,t){return l(this,f)[e].get(t)??null}async set(e,t,r){l(this,f)[e].set(t,r)}async delete(e,t){l(this,f)[e].delete(t)}async clear(e){if(e)l(this,f)[e].clear();else for(const e of Object.values(l(this,f)))e.clear()}}f=new WeakMap;class v{constructor({cache:e=new w,onEffects:t}){d(this,g),d(this,b),p(this,g,e),p(this,b,t)}asPlugin(){return async(e,t,r)=>{const n=e.inputs.filter((e=>e.UnresolvedObject)).map((e=>e.UnresolvedObject.objectId)),i=(await l(this,g).getObjects(n)).filter((e=>null!==e)),s=new Map(i.map((e=>[e.objectId,e])));for(const t of e.inputs){if(!t.UnresolvedObject)continue;const e=s.get(t.UnresolvedObject.objectId);e&&(e.initialSharedVersion&&!t.UnresolvedObject.initialSharedVersion?t.UnresolvedObject.initialSharedVersion=e.initialSharedVersion:(e.version&&!t.UnresolvedObject.version&&(t.UnresolvedObject.version=e.version),e.digest&&!t.UnresolvedObject.digest&&(t.UnresolvedObject.digest=e.digest)))}await Promise.all(e.commands.map((async e=>{if(e.MoveCall){const t=await this.getMoveFunctionDefinition({package:e.MoveCall.package,module:e.MoveCall.module,function:e.MoveCall.function});t&&(e.MoveCall._argumentTypes=t.parameters)}}))),await r(),await Promise.all(e.commands.map((async e=>{e.MoveCall?._argumentTypes&&await l(this,g).addMoveFunctionDefinition({package:e.MoveCall.package,module:e.MoveCall.module,function:e.MoveCall.function,parameters:e.MoveCall._argumentTypes})})))}}async clear(){await l(this,g).clear()}async getMoveFunctionDefinition(e){return l(this,g).getMoveFunctionDefinition(e)}async getObjects(e){return l(this,g).getObjects(e)}async deleteObjects(e){return l(this,g).deleteObjects(e)}async clearOwnedObjects(){await l(this,g).clear("OwnedObject")}async clearCustom(){await l(this,g).clear("Custom")}async getCustom(e){return l(this,g).getCustom(e)}async setCustom(e,t){return l(this,g).setCustom(e,t)}async deleteCustom(e){return l(this,g).deleteCustom(e)}async applyEffects(e){var t;if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:r,changedObjects:n}=e.V2,i=[],s=[];n.forEach((([e,t])=>{if(t.outputState.NotExist)i.push(e);else if(t.outputState.ObjectWrite){const[n,i]=t.outputState.ObjectWrite;s.push({objectId:e,digest:n,version:r,owner:i.AddressOwner??i.ObjectOwner??null,initialSharedVersion:i.Shared?.initialSharedVersion??null})}})),await Promise.all([l(this,g).addObjects(s),l(this,g).deleteObjects(i),null==(t=l(this,b))?void 0:t.call(this,e)])}}g=new WeakMap,b=new WeakMap},50415:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h=(e,t,r)=>(u(e,t,"access private method"),r),f={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(f,{Transaction:()=>L,isTransaction:()=>D}),e.exports=(n=f,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var g,b,m,y,w,v,j,O,S,k=r(858171),I=r(882374),E=r(321423),T=r(92855),P=r(675914),M=r(83445),$=r(568433),x=r(514824),C=r(904015),A=r(609577),U=r(860360),B=r(523440),R=r(196333);function N(e,t=1/0){const r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",NestedResult:[e,t]});return new Proxy({$kind:"Result",Result:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;const i=parseInt(r,10);return Number.isNaN(i)||i<0?void 0:n(i)}})}const z=Symbol.for("@mysten/transaction");function D(e){return!!e&&"object"==typeof e&&!0===e[z]}const _={buildPlugins:new Map,serializationPlugins:new Map},V=Symbol.for("@mysten/transaction/registry");function K(){try{const e=globalThis;return e[V]||(e[V]=_),e[V]}catch(e){return _}}g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakSet,v=function(e){return(0,k.isSerializedBcs)(e)?this.pure(e):h(this,w,j).call(this,e)},j=function(e){return"function"==typeof e?(0,I.parse)(P.Argument,e(this)):(0,I.parse)(P.Argument,e)},O=async function(e){if(!e.onlyTransactionKind&&!l(this,y).sender)throw new Error("Missing transaction sender");await h(this,w,S).call(this,[...l(this,b),C.resolveTransactionData],e)},S=async function(e,t){const r=n=>{if(n>=e.length)return()=>{};const i=e[n];return async()=>{const e=r(n+1);let s=!1,a=!1;if(await i(l(this,y),t,(async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0})),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let L=class e{constructor(){d(this,w),d(this,g),d(this,b),d(this,m,new Map),d(this,y),this.object=(0,A.createObjectMethods)((e=>{if("function"==typeof e)return this.object(e(this));if("object"==typeof e&&(0,I.is)(P.Argument,e))return e;const t=(0,R.getIdFromCallArg)(e),r=l(this,y).inputs.find((e=>t===(0,R.getIdFromCallArg)(e)));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:l(this,y).inputs.indexOf(r),type:"object"}:l(this,y).addInput("object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,E.normalizeSuiAddress)(e)}}:e)}));const e=K();p(this,y,new B.TransactionDataBuilder),p(this,b,[...e.buildPlugins.values()]),p(this,g,[...e.serializationPlugins.values()])}static fromKind(t){const r=new e;return p(r,y,B.TransactionDataBuilder.fromKindBytes("string"==typeof t?(0,k.fromBase64)(t):t)),r}static from(t){const r=new e;return D(t)?p(r,y,new B.TransactionDataBuilder(t.getData())):"string"==typeof t&&t.startsWith("{")?p(r,y,B.TransactionDataBuilder.restore(JSON.parse(t))):p(r,y,B.TransactionDataBuilder.fromBytes("string"==typeof t?(0,k.fromBase64)(t):t)),r}static registerGlobalSerializationPlugin(e,t){K().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){K().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){K().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){K().buildPlugins.delete(e)}addSerializationPlugin(e){l(this,g).push(e)}addBuildPlugin(e){l(this,b).push(e)}addIntentResolver(e,t){if(l(this,m).has(e)&&l(this,m).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);l(this,m).set(e,t)}setSender(e){l(this,y).sender=e}setSenderIfNotSet(e){l(this,y).sender||(l(this,y).sender=e)}setExpiration(e){l(this,y).expiration=e?(0,I.parse)(P.TransactionExpiration,e):null}setGasPrice(e){l(this,y).gasConfig.price=String(e)}setGasBudget(e){l(this,y).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==l(this,y).gasData.budget&&(l(this,y).gasConfig.budget=String(e))}setGasOwner(e){l(this,y).gasConfig.owner=e}setGasPayment(e){l(this,y).gasConfig.payment=e.map((e=>(0,I.parse)(P.ObjectRef,e)))}get blockData(){return(0,M.serializeV1TransactionData)(l(this,y).snapshot())}getData(){return l(this,y).snapshot()}get[z](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:(0,U.createPure)((e=>(0,k.isSerializedBcs)(e)?l(this,y).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):l(this,y).addInput("pure",(0,I.is)(P.NormalizedCallArg,e)?(0,I.parse)(P.NormalizedCallArg,e):e instanceof Uint8Array?x.Inputs.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(x.Inputs.ObjectRef(...e))}receivingRef(...e){return this.object(x.Inputs.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(x.Inputs.SharedObjectRef(...e))}add(e){return"function"==typeof e?e(this):N(l(this,y).commands.push(e)-1)}splitCoins(e,t){const r=T.Commands.SplitCoins("string"==typeof e?this.object(e):h(this,w,j).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):h(this,w,v).call(this,e))));return N(l(this,y).commands.push(r)-1,t.length)}mergeCoins(e,t){return this.add(T.Commands.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(T.Commands.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(T.Commands.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(T.Commands.MoveCall({...t,arguments:e?.map((e=>h(this,w,v).call(this,e)))}))}transferObjects(e,t){return this.add(T.Commands.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):h(this,w,v).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(T.Commands.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify((0,M.serializeV1TransactionData)(l(this,y).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify((0,I.parse)($.SerializedTransactionDataV2,l(this,y).snapshot()),((e,t)=>"bigint"==typeof t?t.toString():t),2)}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await h(this,w,O).call(this,e),l(this,y).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await h(this,w,O).call(this,e),l(this,y).getDigest()}async prepareForSerialization(e){const t=new Set;for(const e of l(this,y).commands)e.$Intent&&t.add(e.$Intent.name);const r=[...l(this,g)];for(const n of t)if(!e.supportedIntents?.includes(n)){if(!l(this,m).has(n))throw new Error(`Missing intent resolver for ${n}`);r.push(l(this,m).get(n))}await h(this,w,S).call(this,r,e)}}},523440:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{TransactionDataBuilder:()=>m}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(882374),d=r(941882),p=r(321423),h=r(675914),f=r(83445),g=r(695070);function b(e){return(0,p.normalizeSuiAddress)(e).replace("0x","")}class m{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=d.bcs.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return m.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=d.bcs.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");return m.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return 2===e.version?new m((0,l.parse)(h.TransactionData,e)):new m((0,l.parse)(h.TransactionData,(0,f.transactionDataFromV1)(e)))}static getDigestFromBytes(e){const t=(0,g.hashTypedData)("TransactionData",e);return(0,u.toBase58)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const n=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:n,commands:i}};if(r)return d.bcs.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,c={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:b(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:b(this.gasData.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return d.bcs.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r)))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map((r=>e(r,t)));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map((r=>e(r,t))),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map((r=>e(r,t)));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map((r=>e(r,t)));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map((r=>e(r,t)));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const r=t.$Intent.inputs;t.$Intent.inputs={};for(const[n,i]of Object.entries(r))t.$Intent.inputs[n]=Array.isArray(i)?i.map((r=>e(r,t))):e(i,t);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t))return void(this.commands[e]=t);const r=t.length-1;this.commands.splice(e,1,...t),0!==r&&this.mapArguments((t=>{switch(t.$kind){case"Result":t.Result>e&&(t.Result+=r);break;case"NestedResult":t.NestedResult[0]>e&&(t.NestedResult[0]+=r)}return t}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return m.getDigestFromBytes(e)}snapshot(){return(0,l.parse)(h.TransactionData,this)}}},675914:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{$Intent:()=>S,Argument:()=>m,BCSBytes:()=>f,Command:()=>k,GasData:()=>y,JsonU64:()=>g,NormalizedCallArg:()=>T,ObjectArg:()=>I,ObjectID:()=>h,ObjectRef:()=>b,OpenMoveTypeSignature:()=>j,OpenMoveTypeSignatureBody:()=>v,StructTag:()=>w,SuiAddress:()=>p,TransactionData:()=>M,TransactionExpiration:()=>P,safeEnum:()=>d}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(882374),l=r(321423);function d(e){const t=Object.entries(e).map((([e,t])=>(0,u.object)({[e]:t})));return(0,u.pipe)((0,u.union)(t),(0,u.transform)((e=>({...e,$kind:Object.keys(e)[0]}))))}const p=(0,u.pipe)((0,u.string)(),(0,u.transform)((e=>(0,l.normalizeSuiAddress)(e))),(0,u.check)(l.isValidSuiAddress)),h=p,f=(0,u.string)(),g=(0,u.pipe)((0,u.union)([(0,u.string)(),(0,u.pipe)((0,u.number)(),(0,u.integer)())]),(0,u.check)((e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),b=(0,u.object)({objectId:p,version:g,digest:(0,u.string)()}),m=(0,u.pipe)((0,u.union)([(0,u.object)({GasCoin:(0,u.literal)(!0)}),(0,u.object)({Input:(0,u.pipe)((0,u.number)(),(0,u.integer)()),type:(0,u.optional)((0,u.literal)("pure"))}),(0,u.object)({Input:(0,u.pipe)((0,u.number)(),(0,u.integer)()),type:(0,u.optional)((0,u.literal)("object"))}),(0,u.object)({Result:(0,u.pipe)((0,u.number)(),(0,u.integer)())}),(0,u.object)({NestedResult:(0,u.tuple)([(0,u.pipe)((0,u.number)(),(0,u.integer)()),(0,u.pipe)((0,u.number)(),(0,u.integer)())])})]),(0,u.transform)((e=>({...e,$kind:Object.keys(e)[0]})))),y=(0,u.object)({budget:(0,u.nullable)(g),price:(0,u.nullable)(g),owner:(0,u.nullable)(p),payment:(0,u.nullable)((0,u.array)(b))}),w=(0,u.object)({address:(0,u.string)(),module:(0,u.string)(),name:(0,u.string)(),typeParams:(0,u.array)((0,u.string)())}),v=(0,u.union)([(0,u.literal)("address"),(0,u.literal)("bool"),(0,u.literal)("u8"),(0,u.literal)("u16"),(0,u.literal)("u32"),(0,u.literal)("u64"),(0,u.literal)("u128"),(0,u.literal)("u256"),(0,u.object)({vector:(0,u.lazy)((()=>v))}),(0,u.object)({datatype:(0,u.object)({package:(0,u.string)(),module:(0,u.string)(),type:(0,u.string)(),typeParameters:(0,u.array)((0,u.lazy)((()=>v)))})}),(0,u.object)({typeParameter:(0,u.pipe)((0,u.number)(),(0,u.integer)())})]),j=(0,u.object)({ref:(0,u.nullable)((0,u.union)([(0,u.literal)("&"),(0,u.literal)("&mut")])),body:v}),O=(0,u.object)({package:h,module:(0,u.string)(),function:(0,u.string)(),typeArguments:(0,u.array)((0,u.string)()),arguments:(0,u.array)(m),_argumentTypes:(0,u.optional)((0,u.nullable)((0,u.array)(j)))}),S=(0,u.object)({name:(0,u.string)(),inputs:(0,u.record)((0,u.string)(),(0,u.union)([m,(0,u.array)(m)])),data:(0,u.record)((0,u.string)(),(0,u.unknown)())}),k=d({MoveCall:O,TransferObjects:(0,u.object)({objects:(0,u.array)(m),address:m}),SplitCoins:(0,u.object)({coin:m,amounts:(0,u.array)(m)}),MergeCoins:(0,u.object)({destination:m,sources:(0,u.array)(m)}),Publish:(0,u.object)({modules:(0,u.array)(f),dependencies:(0,u.array)(h)}),MakeMoveVec:(0,u.object)({type:(0,u.nullable)((0,u.string)()),elements:(0,u.array)(m)}),Upgrade:(0,u.object)({modules:(0,u.array)(f),dependencies:(0,u.array)(h),package:h,ticket:m}),$Intent:S}),I=d({ImmOrOwnedObject:b,SharedObject:(0,u.object)({objectId:h,initialSharedVersion:g,mutable:(0,u.boolean)()}),Receiving:b}),E=d({Object:I,Pure:(0,u.object)({bytes:f}),UnresolvedPure:(0,u.object)({value:(0,u.unknown)()}),UnresolvedObject:(0,u.object)({objectId:h,version:(0,u.optional)((0,u.nullable)(g)),digest:(0,u.optional)((0,u.nullable)((0,u.string)())),initialSharedVersion:(0,u.optional)((0,u.nullable)(g))})}),T=d({Object:I,Pure:(0,u.object)({bytes:f})}),P=d({None:(0,u.literal)(!0),Epoch:g}),M=(0,u.object)({version:(0,u.literal)(2),sender:(0,u.nullish)(p),expiration:(0,u.nullish)(P),gasData:y,inputs:(0,u.array)(E),commands:(0,u.array)(k)})},83445:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{NormalizedCallArg:()=>g,ObjectRef:()=>h,SerializedTransactionDataV1:()=>x,StructTag:()=>v,TransactionArgument:()=>S,TypeTag:()=>w,serializeV1TransactionData:()=>C,transactionDataFromV1:()=>U}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(882374),d=r(941882),p=r(675914);const h=(0,l.object)({digest:(0,l.string)(),objectId:(0,l.string)(),version:(0,l.union)([(0,l.pipe)((0,l.number)(),(0,l.integer)()),(0,l.string)(),(0,l.bigint)()])}),f=(0,p.safeEnum)({ImmOrOwned:h,Shared:(0,l.object)({objectId:p.ObjectID,initialSharedVersion:p.JsonU64,mutable:(0,l.boolean)()}),Receiving:h}),g=(0,p.safeEnum)({Object:f,Pure:(0,l.array)((0,l.pipe)((0,l.number)(),(0,l.integer)()))}),b=(0,l.union)([(0,l.object)({kind:(0,l.literal)("Input"),index:(0,l.pipe)((0,l.number)(),(0,l.integer)()),value:(0,l.unknown)(),type:(0,l.optional)((0,l.literal)("object"))}),(0,l.object)({kind:(0,l.literal)("Input"),index:(0,l.pipe)((0,l.number)(),(0,l.integer)()),value:(0,l.unknown)(),type:(0,l.literal)("pure")})]),m=(0,l.union)([(0,l.object)({Epoch:(0,l.pipe)((0,l.number)(),(0,l.integer)())}),(0,l.object)({None:(0,l.nullable)((0,l.literal)(!0))})]),y=(0,l.pipe)((0,l.union)([(0,l.number)(),(0,l.string)(),(0,l.bigint)()]),(0,l.check)((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),w=(0,l.union)([(0,l.object)({bool:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({u8:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({u64:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({u128:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({address:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({signer:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({vector:(0,l.lazy)((()=>w))}),(0,l.object)({struct:(0,l.lazy)((()=>v))}),(0,l.object)({u16:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({u32:(0,l.nullable)((0,l.literal)(!0))}),(0,l.object)({u256:(0,l.nullable)((0,l.literal)(!0))})]),v=(0,l.object)({address:(0,l.string)(),module:(0,l.string)(),name:(0,l.string)(),typeParams:(0,l.array)(w)}),j=(0,l.object)({budget:(0,l.optional)(y),price:(0,l.optional)(y),payment:(0,l.optional)((0,l.array)(h)),owner:(0,l.optional)((0,l.string)())}),O=[b,(0,l.object)({kind:(0,l.literal)("GasCoin")}),(0,l.object)({kind:(0,l.literal)("Result"),index:(0,l.pipe)((0,l.number)(),(0,l.integer)())}),(0,l.object)({kind:(0,l.literal)("NestedResult"),index:(0,l.pipe)((0,l.number)(),(0,l.integer)()),resultIndex:(0,l.pipe)((0,l.number)(),(0,l.integer)())})],S=(0,l.union)([...O]),k=(0,l.object)({kind:(0,l.literal)("MoveCall"),target:(0,l.pipe)((0,l.string)(),(0,l.check)((e=>3===e.split("::").length))),typeArguments:(0,l.array)((0,l.string)()),arguments:(0,l.array)(S)}),I=(0,l.object)({kind:(0,l.literal)("TransferObjects"),objects:(0,l.array)(S),address:S}),E=(0,l.object)({kind:(0,l.literal)("SplitCoins"),coin:S,amounts:(0,l.array)(S)}),T=(0,l.object)({kind:(0,l.literal)("MergeCoins"),destination:S,sources:(0,l.array)(S)}),P=(0,l.object)({kind:(0,l.literal)("MakeMoveVec"),type:(0,l.union)([(0,l.object)({Some:w}),(0,l.object)({None:(0,l.nullable)((0,l.literal)(!0))})]),objects:(0,l.array)(S)}),M=[k,I,E,T,(0,l.object)({kind:(0,l.literal)("Publish"),modules:(0,l.array)((0,l.array)((0,l.pipe)((0,l.number)(),(0,l.integer)()))),dependencies:(0,l.array)((0,l.string)())}),(0,l.object)({kind:(0,l.literal)("Upgrade"),modules:(0,l.array)((0,l.array)((0,l.pipe)((0,l.number)(),(0,l.integer)()))),dependencies:(0,l.array)((0,l.string)()),packageId:(0,l.string)(),ticket:S}),P],$=(0,l.union)([...M]),x=(0,l.object)({version:(0,l.literal)(1),sender:(0,l.optional)((0,l.string)()),expiration:(0,l.nullish)(m),gasConfig:j,inputs:(0,l.array)(b),transactions:(0,l.array)($)});function C(e){const t=e.inputs.map(((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,u.fromBase64)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map((e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:d.TypeTagSerializer.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map((e=>A(e,t)))};if(e.MergeCoins)return{kind:"MergeCoins",destination:A(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map((e=>A(e,t)))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map((e=>A(e,t)))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map((e=>Array.from((0,u.fromBase64)(e)))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:A(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map((e=>A(e,t)))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map((e=>A(e,t))),address:A(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map((e=>Array.from((0,u.fromBase64)(e)))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:A(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)}))}}function A(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function U(e){return(0,l.parse)(p.TransactionData,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))??null},inputs:e.inputs.map((e=>{if("Input"===e.kind){if((0,l.is)(g,e.value)){const t=(0,l.parse)(g,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,u.toBase64)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")})),commands:e.transactions.map((e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?d.TypeTagSerializer.tagToString(e.type.Some):null,elements:e.objects.map((e=>B(e)))}};case"MergeCoins":return{MergeCoins:{destination:B(e.destination),sources:e.sources.map((e=>B(e)))}};case"MoveCall":{const[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map((e=>B(e)))}}}case"Publish":return{Publish:{modules:e.modules.map((e=>(0,u.toBase64)(Uint8Array.from(e)))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:B(e.coin),amounts:e.amounts.map((e=>B(e)))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map((e=>B(e))),address:B(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map((e=>(0,u.toBase64)(Uint8Array.from(e)))),dependencies:e.dependencies,package:e.packageId,ticket:B(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)}))})}function B(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}},568433:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{SerializedTransactionDataV2:()=>v}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(882374),l=r(675914);function d(e){return(0,u.union)(Object.entries(e).map((([e,t])=>(0,u.object)({[e]:t}))))}const p=d({GasCoin:(0,u.literal)(!0),Input:(0,u.pipe)((0,u.number)(),(0,u.integer)()),Result:(0,u.pipe)((0,u.number)(),(0,u.integer)()),NestedResult:(0,u.tuple)([(0,u.pipe)((0,u.number)(),(0,u.integer)()),(0,u.pipe)((0,u.number)(),(0,u.integer)())])}),h=(0,u.object)({budget:(0,u.nullable)(l.JsonU64),price:(0,u.nullable)(l.JsonU64),owner:(0,u.nullable)(l.SuiAddress),payment:(0,u.nullable)((0,u.array)(l.ObjectRef))}),f=(0,u.object)({package:l.ObjectID,module:(0,u.string)(),function:(0,u.string)(),typeArguments:(0,u.array)((0,u.string)()),arguments:(0,u.array)(p)}),g=(0,u.object)({name:(0,u.string)(),inputs:(0,u.record)((0,u.string)(),(0,u.union)([p,(0,u.array)(p)])),data:(0,u.record)((0,u.string)(),(0,u.unknown)())}),b=d({MoveCall:f,TransferObjects:(0,u.object)({objects:(0,u.array)(p),address:p}),SplitCoins:(0,u.object)({coin:p,amounts:(0,u.array)(p)}),MergeCoins:(0,u.object)({destination:p,sources:(0,u.array)(p)}),Publish:(0,u.object)({modules:(0,u.array)(l.BCSBytes),dependencies:(0,u.array)(l.ObjectID)}),MakeMoveVec:(0,u.object)({type:(0,u.nullable)((0,u.string)()),elements:(0,u.array)(p)}),Upgrade:(0,u.object)({modules:(0,u.array)(l.BCSBytes),dependencies:(0,u.array)(l.ObjectID),package:l.ObjectID,ticket:p}),$Intent:g}),m=d({ImmOrOwnedObject:l.ObjectRef,SharedObject:(0,u.object)({objectId:l.ObjectID,initialSharedVersion:l.JsonU64,mutable:(0,u.boolean)()}),Receiving:l.ObjectRef}),y=d({Object:m,Pure:(0,u.object)({bytes:l.BCSBytes}),UnresolvedPure:(0,u.object)({value:(0,u.unknown)()}),UnresolvedObject:(0,u.object)({objectId:l.ObjectID,version:(0,u.optional)((0,u.nullable)(l.JsonU64)),digest:(0,u.optional)((0,u.nullable)((0,u.string)())),initialSharedVersion:(0,u.optional)((0,u.nullable)(l.JsonU64))})}),w=d({None:(0,u.literal)(!0),Epoch:l.JsonU64}),v=(0,u.object)({version:(0,u.literal)(2),sender:(0,u.nullish)(l.SuiAddress),expiration:(0,u.nullish)(w),gasData:h,inputs:(0,u.array)(y),commands:(0,u.array)(b)})},580894:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{CachingTransactionExecutor:()=>w}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b=r(941882),m=r(340982),y=r(50415);class w{constructor({client:e,...t}){d(this,f),d(this,g,null),p(this,f,e),this.cache=new m.ObjectCache(t)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:e,...t}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:l(this,f),...t})}async executeTransaction({transaction:e,options:t,...r}){const n=(0,y.isTransaction)(e)?await this.buildTransaction({transaction:e}):e,i=await l(this,f).executeTransactionBlock({...r,transactionBlock:n,options:{...t,showRawEffects:!0}});if(i.rawEffects){const e=b.bcs.TransactionEffects.parse(Uint8Array.from(i.rawEffects));await this.applyEffects(e)}return i}async signAndExecuteTransaction({options:e,transaction:t,...r}){t.setSenderIfNotSet(r.signer.toSuiAddress());const n=await this.buildTransaction({transaction:t}),{signature:i}=await r.signer.signTransaction(n);return await this.executeTransaction({transaction:n,signature:i,options:e})}async applyEffects(e){p(this,g,e.V2?.transactionDigest??null),await this.cache.applyEffects(e)}async waitForLastTransaction(){l(this,g)&&(await l(this,f).waitForTransaction({digest:l(this,g)}),p(this,g,null))}}f=new WeakMap,g=new WeakMap},425255:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h=(e,t,r)=>(u(e,t,"access private method"),r),f=(e,t,r,n)=>({set _(n){p(e,t,n,r)},get _(){return l(e,t,n)}}),g={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(g,{ParallelTransactionExecutor:()=>Y}),e.exports=(n=g,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var b,m,y,w,v,j,O,S,k,I,E,T,P,M,$,x,C,A,U,B,R,N,z,D,_,V,K=r(858171),L=r(941882),F=r(50415),G=r(523440),W=r(580894),q=r(723298),H=r(166193);const J=200000000n,Z=50000000n;class Y{constructor(e){d(this,U),d(this,b),d(this,m),d(this,y),d(this,w),d(this,v),d(this,j),d(this,O),d(this,S),d(this,k),d(this,I,[]),d(this,E),d(this,T,new Map),d(this,P,new q.SerialQueue),d(this,M),d(this,$,null),d(this,x,null),d(this,C,0),d(this,A,null),p(this,b,e.signer),p(this,m,e.client),p(this,y,e.coinBatchSize??20),p(this,w,e.initialCoinBalance??J),p(this,v,e.minimumCoinBalance??Z),p(this,O,e.defaultGasBudget??l(this,v)),p(this,j,e.epochBoundaryWindow??1e3),p(this,S,e.maxPoolSize??50),p(this,E,new W.CachingTransactionExecutor({client:e.client,cache:e.cache})),p(this,M,new q.ParallelQueue(l(this,S))),p(this,k,e.sourceCoins?new Map(e.sourceCoins.map((e=>[e,null]))):null)}resetCache(){return p(this,A,null),h(this,U,N).call(this,(()=>l(this,E).reset()))}async waitForLastTransaction(){await h(this,U,N).call(this,(()=>h(this,U,z).call(this)))}async executeTransaction(e,t){const{promise:r,resolve:n,reject:i}=function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}}(),s=await h(this,U,B).call(this,e),a=()=>{l(this,M).runTask((()=>h(this,U,R).call(this,e,s,t).then(n,i)))},o=new Set;return s.forEach((e=>{l(this,T).get(e)?(o.add(e),l(this,T).get(e).push((()=>{o.delete(e),0===o.size&&a()}))):l(this,T).set(e,[])})),0===o.size&&a(),r}}b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,j=new WeakMap,O=new WeakMap,S=new WeakMap,k=new WeakMap,I=new WeakMap,E=new WeakMap,T=new WeakMap,P=new WeakMap,M=new WeakMap,$=new WeakMap,x=new WeakMap,C=new WeakMap,A=new WeakMap,U=new WeakSet,B=async function(e){const t=new Set;let r=!1;return e.addSerializationPlugin((async(e,n,i)=>{await i(),r||(r=!0,e.inputs.forEach((e=>{e.Object?.ImmOrOwnedObject?.objectId?t.add(e.Object.ImmOrOwnedObject.objectId):e.Object?.Receiving?.objectId?t.add(e.Object.Receiving.objectId):e.UnresolvedObject?.objectId&&!e.UnresolvedObject.initialSharedVersion&&t.add(e.UnresolvedObject.objectId)})))})),await e.prepareForSerialization({client:l(this,m)}),t},R=async function(e,t,r){let n;try{e.setSenderIfNotSet(l(this,b).toSuiAddress()),await l(this,P).runTask((async()=>{e.getData().gasData.price||e.setGasPrice(await h(this,U,_).call(this)),e.setGasBudgetIfNotSet(l(this,O)),await h(this,U,N).call(this),n=await h(this,U,D).call(this),f(this,C)._++,e.setGasPayment([{objectId:n.id,version:n.version,digest:n.digest}]),await l(this,E).buildTransaction({transaction:e,onlyTransactionKind:!0})}));const t=await e.build({client:l(this,m)}),{signature:i}=await l(this,b).signTransaction(t),s=await l(this,E).executeTransaction({transaction:t,signature:i,options:{...r,showEffects:!0}}),a=Uint8Array.from(s.rawEffects),o=L.bcs.TransactionEffects.parse(a),c=(0,H.getGasCoinFromEffects)(o),u=o.V2?.gasUsed;if(n&&u&&c.owner===l(this,b).toSuiAddress()){const t=BigInt(u.computationCost)+BigInt(u.storageCost)+BigInt(u.storageCost)-BigInt(u.storageRebate);let r=!1;new G.TransactionDataBuilder(e.getData()).mapArguments((e=>("GasCoin"===e.$kind&&(r=!0),e))),!r&&n.balance>=l(this,v)?l(this,I).push({id:c.ref.objectId,version:c.ref.version,digest:c.ref.digest,balance:n.balance-t}):(l(this,k)||p(this,k,new Map),l(this,k).set(c.ref.objectId,c.ref))}return p(this,$,s.digest),{digest:s.digest,effects:(0,K.toBase64)(a),data:s}}catch(e){throw n&&(l(this,k)||p(this,k,new Map),l(this,k).set(n.id,null)),await h(this,U,N).call(this,(async()=>{await Promise.all([l(this,E).cache.deleteObjects([...t]),h(this,U,z).call(this)])})),e}finally{t.forEach((e=>{const t=l(this,T).get(e);t&&t.length>0?t.shift()():t&&l(this,T).delete(e)})),f(this,C)._--}},N=async function(e){l(this,x)&&await l(this,x),p(this,x,e?.().then((()=>{p(this,x,null)}),(()=>{}))??null)},z=async function(){const e=l(this,$);e&&(p(this,$,null),await l(this,m).waitForTransaction({digest:e}))},D=async function(){if(0===l(this,I).length&&l(this,C)<=l(this,S)&&await h(this,U,V).call(this),0===l(this,I).length)throw new Error("No coins available");return l(this,I).shift()},_=async function(){if((l(this,A)?l(this,A).expiration-l(this,j)-Date.now():0)>0)return l(this,A).price;if(l(this,A)){const e=Math.max(l(this,A).expiration+l(this,j)-Date.now(),1e3);await new Promise((t=>setTimeout(t,e)))}const e=await l(this,m).getLatestSuiSystemState();return p(this,A,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),h(this,U,_).call(this)},V=async function(){const e=Math.min(l(this,y),l(this,S)-(l(this,I).length+l(this,C))+1);if(0===e)return;const t=new F.Transaction,r=l(this,b).toSuiAddress();if(t.setSender(r),l(this,k)){const e=[],r=[];for(const[t,n]of l(this,k))n?e.push(n):r.push(t);if(r.length>0){const t=await l(this,m).multiGetObjects({ids:r});e.push(...t.filter((e=>null!==e.data)).map((({data:e})=>({objectId:e.objectId,version:e.version,digest:e.digest}))))}t.setGasPayment(e),p(this,k,new Map)}const n=new Array(e).fill(l(this,w)),i=t.splitCoins(t.gas,n),s=[];for(let e=0;e<n.length;e++)s.push(i[e]);t.transferObjects(s,r),await this.waitForLastTransaction();const a=await l(this,m).signAndExecuteTransaction({transaction:t,signer:l(this,b),options:{showRawEffects:!0}}),o=L.bcs.TransactionEffects.parse(Uint8Array.from(a.rawEffects));o.V2?.changedObjects.forEach((([e,{outputState:t}],r)=>{r!==o.V2?.gasObjectIndex&&t.ObjectWrite&&l(this,I).push({id:e,version:o.V2.lamportVersion,digest:t.ObjectWrite[0],balance:BigInt(l(this,w))})})),l(this,k)||p(this,k,new Map);const c=(0,H.getGasCoinFromEffects)(o).ref;l(this,k).set(c.objectId,c),await l(this,m).waitForTransaction({digest:a.digest})}},723298:e=>{var t,r,n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>(((e,t,r)=>{t.has(e)||c("Cannot read from private field")})(e,t),r?r.call(e):t.get(e)),l=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),d={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(d,{ParallelQueue:()=>h,SerialQueue:()=>p}),e.exports=(t=d,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),t));class p{constructor(){l(this,r,[])}async runTask(e){return new Promise(((t,n)=>{u(this,r).push((()=>{e().finally((()=>{u(this,r).shift(),u(this,r).length>0&&u(this,r)[0]()})).then(t,n)})),1===u(this,r).length&&u(this,r)[0]()}))}}r=new WeakMap;class h{constructor(e){l(this,n,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise(((t,r)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally((()=>{u(this,n).length>0?u(this,n).shift()():this.activeTasks--})).then(t,r)):u(this,n).push((()=>{e().finally((()=>{u(this,n).length>0?u(this,n).shift()():this.activeTasks--})).then(t,r)}))}))}}n=new WeakMap},166193:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{SerialTransactionExecutor:()=>k,getGasCoinFromEffects:()=>I}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b,m,y,w,v=r(858171),j=r(50415),O=r(580894),S=r(723298);class k{constructor({signer:e,defaultGasBudget:t=50000000n,...r}){d(this,f,new S.SerialQueue),d(this,g),d(this,b),d(this,m),d(this,y,(async e=>{if(!e.V2)return;const t=I(e).ref;t?l(this,b).cache.setCustom("gasCoin",t):l(this,b).cache.deleteCustom("gasCoin")})),d(this,w,(async e=>{const t=await l(this,b).cache.getCustom("gasCoin"),r=j.Transaction.from(e);return t&&r.setGasPayment([t]),r.setGasBudgetIfNotSet(l(this,m)),r.setSenderIfNotSet(l(this,g).toSuiAddress()),l(this,b).buildTransaction({transaction:r})})),p(this,g,e),p(this,m,t),p(this,b,new O.CachingTransactionExecutor({client:r.client,cache:r.cache,onEffects:e=>l(this,y).call(this,e)}))}async applyEffects(e){return l(this,b).applyEffects(e)}async buildTransaction(e){return l(this,f).runTask((()=>l(this,w).call(this,e)))}resetCache(){return l(this,b).reset()}waitForLastTransaction(){return l(this,b).waitForLastTransaction()}executeTransaction(e,t){return l(this,f).runTask((async()=>{const r=(0,j.isTransaction)(e)?await l(this,w).call(this,e):e,{signature:n}=await l(this,g).signTransaction(r),i=await l(this,b).executeTransaction({signature:n,transaction:r,options:t}).catch((async e=>{throw await this.resetCache(),e})),s=Uint8Array.from(i.rawEffects);return{digest:i.digest,effects:(0,v.toBase64)(s),data:i}}))}}function I(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[r,{outputState:n}]=t;if(!n.ObjectWrite)throw new Error("Unexpected gas object state");const[i,s]=n.ObjectWrite;return{ref:{objectId:r,digest:i,version:e.V2.lamportVersion},owner:s.AddressOwner||s.ObjectOwner}}f=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap},695070:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{hashTypedData:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(513806);function l(e,t){const r=Array.from(`${e}::`).map((e=>e.charCodeAt(0))),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,u.blake2b)(n,{dkLen:32})}},108979:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{Arguments:()=>y.Arguments,AsyncCache:()=>f.AsyncCache,Commands:()=>d.Commands,Inputs:()=>l.Inputs,ObjectCache:()=>f.ObjectCache,ParallelTransactionExecutor:()=>b.ParallelTransactionExecutor,SerialTransactionExecutor:()=>g.SerialTransactionExecutor,Transaction:()=>p.Transaction,TransactionDataBuilder:()=>h.TransactionDataBuilder,UpgradePolicy:()=>d.UpgradePolicy,coinWithBalance:()=>m.coinWithBalance,getPureBcsSchema:()=>u.getPureBcsSchema,isArgument:()=>v.isArgument,isTransaction:()=>p.isTransaction,namedPackagesPlugin:()=>w.namedPackagesPlugin,normalizedTypeToMoveTypeSignature:()=>u.normalizedTypeToMoveTypeSignature}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(887498),l=r(514824),d=r(92855),p=r(50415),h=r(523440),f=r(340982),g=r(166193),b=r(425255),m=r(582762),y=r(274389),w=r(391772),v=r(196333)},582762:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{coinWithBalance:()=>m}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(882374),l=r(941882),d=r(321423),p=r(92855),h=r(514824),f=r(904015);const g="CoinWithBalance",b=(0,d.normalizeStructTag)("0x2::sui::SUI");function m({type:e=b,balance:t,useGasCoin:r=!0}){return n=>{n.addIntentResolver(g,w);const i="gas"===e?e:(0,d.normalizeStructTag)(e);return n.add(p.Commands.Intent({name:g,inputs:{},data:{type:i===b&&r?"gas":i,balance:BigInt(t)}}))}}const y=(0,u.object)({type:(0,u.string)(),balance:(0,u.bigint)()});async function w(e,t,r){const n=new Set,i=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const t of e.commands)if("$Intent"===t.$kind&&t.$Intent.name===g){const{type:e,balance:r}=(0,u.parse)(y,t.$Intent.data);"gas"!==e&&r>0n&&n.add(e),i.set(e,(i.get(e)??0n)+r)}const s=new Set;for(const t of e.inputs)t.Object?.ImmOrOwnedObject&&s.add(t.Object.ImmOrOwnedObject.objectId),t.UnresolvedObject?.objectId&&s.add(t.UnresolvedObject.objectId);const a=new Map,o=(0,f.getClient)(t);await Promise.all([...n].map((async t=>{a.set(t,await async function({coinType:e,balance:t,client:r,owner:n,usedIds:i}){let s=t;const a=[];return async function t(o=null){const{data:c,hasNextPage:u,nextCursor:l}=await r.getCoins({owner:n,coinType:e,cursor:o}),d=c.sort(((e,t)=>Number(BigInt(t.balance)-BigInt(e.balance))));for(const e of d){if(i.has(e.coinObjectId))continue;const t=BigInt(e.balance);if(a.push(e),s-=t,s<=0)return a}if(u)return t(l);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}()}({coinType:t,balance:i.get(t),client:o,owner:e.sender,usedIds:s}))})));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[t,r]of e.commands.entries()){if("$Intent"!==r.$kind||r.$Intent.name!==g)continue;const{type:n,balance:i}=r.$Intent.data;if(0n===i){e.replaceCommand(t,p.Commands.MoveCall({target:"0x2::coin::zero",typeArguments:[n]}));continue}const s=[];if(!c.has(n)){const[t,...r]=a.get(n).map((t=>e.addInput("object",h.Inputs.ObjectRef({objectId:t.coinObjectId,digest:t.digest,version:t.version}))));r.length>0&&s.push(p.Commands.MergeCoins(t,r)),c.set(n,t)}s.push(p.Commands.SplitCoins(c.get(n),[e.addInput("pure",h.Inputs.Pure(l.bcs.u64().serialize(i)))])),e.replaceCommand(t,s),e.mapArguments((e=>"Result"===e.$kind&&e.Result===t?{$kind:"NestedResult",NestedResult:[t+s.length-1,0]}:e))}return r()}},904015:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{getClient:()=>O,resolveTransactionData:()=>y}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(882374),l=r(941882),d=r(404151),p=r(675914),h=r(514824),f=r(887498);const g=50,b=1000n,m=5e10;async function y(e,t,r){return await async function(e,t){const{inputs:r,commands:n}=e,i=[],s=new Set;n.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject))){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{w(t,l.bcs.U64,e)}));break;case"TransferObjects":w(t.TransferObjects.address,l.bcs.Address,e)}}));const a=new Map;if(s.size>0){const e=O(t);await Promise.all([...s].map((async t=>{const[r,n,i]=t.split("::"),s=await e.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(t,s.parameters.map((e=>(0,f.normalizedTypeToMoveTypeSignature)(e))))})))}i.length&&await Promise.all(i.map((async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const r=t.length>0&&(0,f.isTxContext)(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r}))),n.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${n}`);i.forEach(((e,n)=>{const i=t.arguments[n];if("Input"!==i.$kind)return;const s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=(0,f.getPureBcsSchema)(e.body);if(o)return i.type="pure",void(r[r.indexOf(s)]=h.Inputs.Pure(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const c=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=c}))}}))}(e,t),await async function(e,t){const r=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),n=[...new Set(r.map((e=>(0,d.normalizeSuiObjectId)(e.UnresolvedObject.objectId))))],i=n.length?(c=n,u=g,Array.from({length:Math.ceil(c.length/u)},((e,t)=>c.slice(t*u,t*u+u)))):[],s=(await Promise.all(i.map((e=>O(t).multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),a=new Map(n.map(((e,t)=>[e,s[t]]))),o=Array.from(a).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));var c,u;if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const l=s.map((e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,r=t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}})),p=new Map(n.map(((e,t)=>[e,l[t]])));for(const[t,r]of e.inputs.entries()){if(!r.UnresolvedObject)continue;let n;const i=(0,d.normalizeSuiAddress)(r.UnresolvedObject.objectId),s=p.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=h.Inputs.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:v(e,t)}):j(e,t)&&(n=h.Inputs.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??h.Inputs.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}(e,t),t.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await O(t).getReferenceGasPrice()))}(e,t),await async function(e,t){if(e.gasConfig.budget)return;const r=await O(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(m),payment:[]}}})});if("success"!==r.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=b*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(e,t),await async function(e,t){if(!e.gasConfig.payment){const r=(await O(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:d.SUI_TYPE_ARG})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!r.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map((e=>(0,u.parse)(p.ObjectRef,e)))}}(e,t)),await function(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}(e),await r()}function w(e,t,r){if("Input"!==e.$kind)return;const n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=h.Inputs.Pure(t.serialize(n.UnresolvedPure.value)))}function v(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind||(r=!0)})),r}function j(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const i=t.MoveCall.arguments.indexOf(e);n=t.MoveCall._argumentTypes[i],r="object"==typeof n.body&&"datatype"in n.body&&"0x2"===n.body.datatype.package&&"transfer"===n.body.datatype.module&&"Receiving"===n.body.datatype.type||r}var n})),r}function O(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}},609577:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function o(e){function t(t){return e(t)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[r.object(t)]}),t}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{createObjectMethods:()=>o}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},391772:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{namedPackagesPlugin:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(286878);const l=({suiGraphQLClient:e,pageSize:t=10,overrides:r={packages:{},types:{}}})=>{const n={packages:{...r.packages},types:{...r.types}};return async(r,i,s)=>{const a=(0,u.findTransactionBlockNames)(r),o=(0,u.listToRequests)({packages:a.packages.filter((e=>!n.packages[e])),types:a.types.filter((e=>!n.types[e]))},t);(await Promise.all(o.map((t=>async function(e,t){const r={packages:{},types:{}};if(0===t.length)return r;const n=`{\n        ${t.map((e=>{const t="package"===e.type?"packageByName":"typeByName",r="package"===e.type?"address":"repr";return`${d(e.id)}: ${t}(name:"${e.name}") {\n                    ${r}\n                }`}))}\n    }`,i=await e.query({query:n,variables:void 0});if(i.errors)throw new Error(JSON.stringify({query:n,errors:i.errors}));for(const e of t){const t=d(e.id);if(!i.data||!i.data[t])throw new Error(`No result found for: ${e.name}`);const n=i.data[t];"package"===e.type&&(r.packages[e.name]=n.address),"moveType"===e.type&&(r.types[e.name]=n.repr)}return r}(e,t))))).forEach((e=>{Object.assign(n.types,e.types),Object.assign(n.packages,e.packages)})),(0,u.replaceNames)(r,n),await s()}},d=e=>`key_${e}`},286878:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{findTransactionBlockNames:()=>d,listToRequests:()=>f,replaceNames:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(315270);const l="/",d=e=>{const t=new Set,r=new Set;for(const n of e.commands){if(n.MakeMoveVec?.type){p([n.MakeMoveVec.type]).forEach((e=>{r.add(e)}));continue}if(!("MoveCall"in n))continue;const e=n.MoveCall;if(!e)continue;const i=e.package.split("::")[0];if(i.includes(l)){if(!(0,u.isValidNamedPackage)(i))throw new Error(`Invalid package name: ${i}`);t.add(i)}p(e.typeArguments??[]).forEach((e=>{r.add(e)}))}return{packages:[...t],types:[...r]}};function p(e){const t=new Set;for(const r of e)if(r.includes(l)){if(!(0,u.isValidNamedType)(r))throw new Error(`Invalid type with names: ${r}`);t.add(r)}return[...t]}const h=(e,t)=>{for(const r of e.commands){if(r.MakeMoveVec?.type){if(!r.MakeMoveVec.type.includes(l))continue;if(!t.types[r.MakeMoveVec.type])throw new Error(`No resolution found for type: ${r.MakeMoveVec.type}`);r.MakeMoveVec.type=t.types[r.MakeMoveVec.type]}const e=r.MoveCall;if(!e)continue;const n=e.package.split("::"),i=n[0];if(i.includes(l)&&!t.packages[i])throw new Error(`No address found for package: ${i}`);i.includes(l)&&(n[0]=t.packages[i],e.package=n.join("::"));const s=e.typeArguments;if(s){for(let e=0;e<s.length;e++)if(s[e].includes(l)){if(!t.types[s[e]])throw new Error(`No resolution found for type: ${s[e]}`);s[e]=t.types[s[e]]}e.typeArguments=s}}},f=(e,t)=>{const r=[],n=g(e.packages),i=g(e.types);for(const[e,t]of n.entries())r.push({id:e,type:"package",name:t});for(const[e,t]of i.entries())r.push({id:e+n.length,type:"moveType",name:t});return b(r,t)},g=e=>[...new Set(e)],b=(e,t)=>{const r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}},860360:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{createPure:()=>p}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(941882),d=r(806999);function p(e){function t(t,r){if("string"==typeof t)return e((0,d.pureBcsSchemaFromTypeName)(t).serialize(r));if(t instanceof Uint8Array||(0,u.isSerializedBcs)(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(l.bcs.U8.serialize(t)),t.u16=t=>e(l.bcs.U16.serialize(t)),t.u32=t=>e(l.bcs.U32.serialize(t)),t.u64=t=>e(l.bcs.U64.serialize(t)),t.u128=t=>e(l.bcs.U128.serialize(t)),t.u256=t=>e(l.bcs.U256.serialize(t)),t.bool=t=>e(l.bcs.Bool.serialize(t)),t.string=t=>e(l.bcs.String.serialize(t)),t.address=t=>e(l.bcs.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e(l.bcs.vector((0,d.pureBcsSchemaFromTypeName)(t)).serialize(r)),t.option=(t,r)=>e(l.bcs.option((0,d.pureBcsSchemaFromTypeName)(t)).serialize(r)),t}},887498:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{getPureBcsSchema:()=>j,isTxContext:()=>v,normalizedTypeToMoveTypeSignature:()=>O,pureBcsSchemaFromOpenMoveTypeSignatureBody:()=>k}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(941882),l=r(404151),d=r(321423);const p="object",h="ID",f="ascii",g="String",b="string",m="String",y="option",w="Option";function v(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,d.normalizeSuiAddress)(t.package)===(0,d.normalizeSuiAddress)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}function j(e){if("string"==typeof e)switch(e){case"address":return u.bcs.Address;case"bool":return u.bcs.Bool;case"u8":return u.bcs.U8;case"u16":return u.bcs.U16;case"u32":return u.bcs.U32;case"u64":return u.bcs.U64;case"u128":return u.bcs.U128;case"u256":return u.bcs.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return u.bcs.vector(u.bcs.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=j(e.vector);return t?u.bcs.vector(t):null}if("datatype"in e){const t=(0,d.normalizeSuiAddress)(e.datatype.package);if(t===(0,d.normalizeSuiAddress)(l.MOVE_STDLIB_ADDRESS)){if(e.datatype.module===f&&e.datatype.type===g)return u.bcs.String;if(e.datatype.module===b&&e.datatype.type===m)return u.bcs.String;if(e.datatype.module===y&&e.datatype.type===w){const t=j(e.datatype.typeParameters[0]);return t?u.bcs.vector(t):null}}if(t===(0,d.normalizeSuiAddress)(l.SUI_FRAMEWORK_ADDRESS)&&e.datatype.module===p&&e.datatype.type===h)return u.bcs.Address}return null}function O(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:S(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:S(e.MutableReference)}:{ref:null,body:S(e)}}function S(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:S(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(S)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function k(e){if("string"==typeof e)switch(e){case"address":return u.bcs.Address;case"bool":return u.bcs.Bool;case"u8":return u.bcs.U8;case"u16":return u.bcs.U16;case"u32":return u.bcs.U32;case"u64":return u.bcs.U64;case"u128":return u.bcs.U128;case"u256":return u.bcs.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e)return u.bcs.vector(k(e.vector));throw new Error(`Expected pure typeSignature, but got ${JSON.stringify(e)}`)}},196333:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{extractMutableReference:()=>p,extractReference:()=>h,extractStructTag:()=>f,getIdFromCallArg:()=>g,isArgument:()=>b}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(882374),l=r(321423),d=r(675914);function p(e){return"object"==typeof e&&"MutableReference"in e?e.MutableReference:void 0}function h(e){return"object"==typeof e&&"Reference"in e?e.Reference:void 0}function f(e){if("object"==typeof e&&"Struct"in e)return e;const t=h(e),r=p(e);return"object"==typeof t&&"Struct"in t?t:"object"==typeof r&&"Struct"in r?r:void 0}function g(e){return"string"==typeof e?(0,l.normalizeSuiAddress)(e):e.Object?e.Object.ImmOrOwnedObject?(0,l.normalizeSuiAddress)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,l.normalizeSuiAddress)(e.Object.Receiving.objectId):(0,l.normalizeSuiAddress)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,l.normalizeSuiAddress)(e.UnresolvedObject.objectId):void 0}function b(e){return(0,u.is)(d.Argument,e)}},243749:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{MIST_PER_SUI:()=>d,MOVE_STDLIB_ADDRESS:()=>p,SUI_CLOCK_OBJECT_ID:()=>g,SUI_DECIMALS:()=>l,SUI_FRAMEWORK_ADDRESS:()=>h,SUI_SYSTEM_ADDRESS:()=>f,SUI_SYSTEM_MODULE_NAME:()=>b,SUI_SYSTEM_STATE_OBJECT_ID:()=>y,SUI_TYPE_ARG:()=>m}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(321423);const l=9,d=BigInt(1e9),p="0x1",h="0x2",f="0x3",g=(0,u.normalizeSuiObjectId)("0x6"),b="sui_system",m=`${h}::sui::SUI`,y=(0,u.normalizeSuiObjectId)("0x5")},609167:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{deriveDynamicFieldID:()=>p}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(513806),d=r(941882);function p(e,t,r){const n=d.bcs.Address.serialize(e).toBytes(),i=d.bcs.TypeTag.serialize(t).toBytes(),s=d.bcs.u64().serialize(r.length).toBytes(),a=l.blake2b.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(n),a.update(s),a.update(r),a.update(i),`0x${(0,u.toHex)(a.digest().slice(0,32))}`}},493404:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{formatAddress:()=>c,formatDigest:()=>u}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const o="";function c(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${o}${e.slice(-4)}`}function u(e){return`${e.slice(0,10)}${o}`}},404151:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{MIST_PER_SUI:()=>h.MIST_PER_SUI,MOVE_STDLIB_ADDRESS:()=>h.MOVE_STDLIB_ADDRESS,SUI_ADDRESS_LENGTH:()=>l.SUI_ADDRESS_LENGTH,SUI_CLOCK_OBJECT_ID:()=>h.SUI_CLOCK_OBJECT_ID,SUI_DECIMALS:()=>h.SUI_DECIMALS,SUI_FRAMEWORK_ADDRESS:()=>h.SUI_FRAMEWORK_ADDRESS,SUI_SYSTEM_ADDRESS:()=>h.SUI_SYSTEM_ADDRESS,SUI_SYSTEM_MODULE_NAME:()=>h.SUI_SYSTEM_MODULE_NAME,SUI_SYSTEM_STATE_OBJECT_ID:()=>h.SUI_SYSTEM_STATE_OBJECT_ID,SUI_TYPE_ARG:()=>h.SUI_TYPE_ARG,deriveDynamicFieldID:()=>g.deriveDynamicFieldID,formatAddress:()=>u.formatAddress,formatDigest:()=>u.formatDigest,fromB64:()=>d.fromB64,fromBase58:()=>d.fromBase58,fromBase64:()=>d.fromBase64,fromHEX:()=>d.fromHEX,fromHex:()=>d.fromHex,isValidNamedPackage:()=>f.isValidNamedPackage,isValidNamedType:()=>f.isValidNamedType,isValidSuiAddress:()=>l.isValidSuiAddress,isValidSuiNSName:()=>p.isValidSuiNSName,isValidSuiObjectId:()=>l.isValidSuiObjectId,isValidTransactionDigest:()=>l.isValidTransactionDigest,normalizeStructTag:()=>l.normalizeStructTag,normalizeSuiAddress:()=>l.normalizeSuiAddress,normalizeSuiNSName:()=>p.normalizeSuiNSName,normalizeSuiObjectId:()=>l.normalizeSuiObjectId,parseStructTag:()=>l.parseStructTag,toB64:()=>d.toB64,toBase58:()=>d.toBase58,toBase64:()=>d.toBase64,toHEX:()=>d.toHEX,toHex:()=>d.toHex}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(493404),l=r(321423),d=r(858171),p=r(979479),h=r(243749),f=r(315270),g=r(609167)},315270:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{isValidNamedPackage:()=>p,isValidNamedType:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(979479);const l=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,d=/^\d+$/,p=e=>{const t=e.split("/");if(t.length<2||t.length>3)return!1;const[r,n,i]=t;return!(void 0!==i&&!d.test(i))&&!!(0,u.isValidSuiNSName)(r)&&l.test(n)&&n.length<64},h=e=>{const t=e.split(/::|<|>|,/);for(const e of t)if(e.includes("/")&&!p(e))return!1;return!0}},321423:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{SUI_ADDRESS_LENGTH:()=>p,isValidSuiAddress:()=>h,isValidSuiObjectId:()=>f,isValidTransactionDigest:()=>d,normalizeStructTag:()=>b,normalizeSuiAddress:()=>m,normalizeSuiObjectId:()=>y,parseStructTag:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171);const l=32;function d(e){try{return(0,u.fromBase58)(e).length===l}catch(e){return!1}}const p=32;function h(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===p}function f(e){return h(e)}function g(e){const[t,r]=e.split("::"),n=e.slice(t.length+r.length+4),i=n.includes("<")?n.slice(0,n.indexOf("<")):n,s=n.includes("<")?(0,u.splitGenericParameters)(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map((e=>function(e){return e.includes("::")?g(e):e}(e.trim()))):[];return{address:m(t),module:r,name:i,typeParams:s}}function b(e){const{address:t,module:r,name:n,typeParams:i}="string"==typeof e?g(e):e;return`${t}::${r}::${n}${i?.length>0?`<${i.map((e=>"string"==typeof e?e:b(e))).join(",")}>`:""}`}function m(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*p,"0")}`}function y(e,t=!1){return m(e,t)}},979479:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{isValidSuiNSName:()=>l,normalizeSuiNSName:()=>d}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const o=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,c=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,u=235;function l(e){return!(e.length>u)&&(e.includes("@")?o.test(e):c.test(e))}function d(e,t="at"){const r=e.toLowerCase();let n;if(r.includes("@")){if(!o.test(r))throw new Error(`Invalid SuiNS name ${e}`);const[t,i]=r.split("@");n=[...t?t.split("."):[],i]}else{if(!c.test(r))throw new Error(`Invalid SuiNS name ${e}`);n=r.split(".").slice(0,-1)}return"dot"===t?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}},824680:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{publicKeyFromRawBytes:()=>u.publicKeyFromRawBytes,publicKeyFromSuiBytes:()=>u.publicKeyFromSuiBytes,verifyPersonalMessageSignature:()=>u.verifyPersonalMessageSignature,verifySignature:()=>u.verifySignature,verifyTransactionSignature:()=>u.verifyTransactionSignature}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(763478)},763478:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{publicKeyFromRawBytes:()=>j,publicKeyFromSuiBytes:()=>O,verifyPersonalMessageSignature:()=>y,verifySignature:()=>m,verifyTransactionSignature:()=>w}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(801406),d=r(778311),p=r(463322),h=r(498255),f=r(467112),g=r(554907),b=r(651108);async function m(e,t,r){const n=v(t);if(!await n.publicKey.verify(e,n.serializedSignature))throw new Error("Signature is not valid for the provided data");if(r?.address&&!n.publicKey.verifyAddress(r.address))throw new Error("Signature is not valid for the provided address");return n.publicKey}async function y(e,t,r={}){const n=v(t,r);if(!await n.publicKey.verifyPersonalMessage(e,n.serializedSignature))throw new Error("Signature is not valid for the provided message");if(r?.address&&!n.publicKey.verifyAddress(r.address))throw new Error("Signature is not valid for the provided address");return n.publicKey}async function w(e,t,r={}){const n=v(t,r);if(!await n.publicKey.verifyTransaction(e,n.serializedSignature))throw new Error("Signature is not valid for the provided Transaction");if(r?.address&&!n.publicKey.verifyAddress(r.address))throw new Error("Signature is not valid for the provided address");return n.publicKey}function v(e,t={}){const r=(0,l.parseSerializedSignature)(e);if("MultiSig"===r.signatureScheme)return{...r,publicKey:new g.MultiSigPublicKey(r.multisig.multisig_pk)};const n=j(r.signatureScheme,r.publicKey,t);return{...r,publicKey:n}}function j(e,t,r={}){switch(e){case"ED25519":return new d.Ed25519PublicKey(t);case"Secp256k1":return new h.Secp256k1PublicKey(t);case"Secp256r1":return new f.Secp256r1PublicKey(t);case"MultiSig":return new g.MultiSigPublicKey(t);case"ZkLogin":return new b.ZkLoginPublicIdentifier(t,r);case"Passkey":return new p.PasskeyPublicKey(t);default:throw new Error(`Unsupported signature scheme ${e}`)}}function O(e,t={}){const r="string"==typeof e?(0,u.fromBase64)(e):e;return j(l.SIGNATURE_FLAG_TO_SCHEME[r[0]],r.slice(1),t)}},769568:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{PACKAGE_VERSION:()=>o,TARGETED_RPC_VERSION:()=>c}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const o="1.24.0",c="1.45.0"},743352:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{zkLoginSignature:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171);const l=u.bcs.struct("ZkLoginSignature",{inputs:u.bcs.struct("ZkLoginSignatureInputs",{proofPoints:u.bcs.struct("ZkLoginSignatureInputsProofPoints",{a:u.bcs.vector(u.bcs.string()),b:u.bcs.vector(u.bcs.vector(u.bcs.string())),c:u.bcs.vector(u.bcs.string())}),issBase64Details:u.bcs.struct("ZkLoginSignatureInputsClaim",{value:u.bcs.string(),indexMod4:u.bcs.u8()}),headerBase64:u.bcs.string(),addressSeed:u.bcs.string()}),maxEpoch:u.bcs.u64(),userSignature:u.bcs.vector(u.bcs.u8())})},735294:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{InvalidTokenError:()=>o,jwtDecode:()=>c}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));class o extends Error{}function c(e,t){if("string"!=typeof e)throw new o("Invalid token specified: must be a string");t||(t={});const r=!0===t.header?0:1,n=e.split(".")[r];if("string"!=typeof n)throw new o(`Invalid token specified: missing part #${r+1}`);let i;try{i=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return atob(t)}}(n)}catch(e){throw new o(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(i)}catch(e){throw new o(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}o.prototype.name="InvalidTokenError"},825023:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{decodeJwt:()=>h,extractClaimValue:()=>p}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(735294),l=r(196681);function d(e){if(1!==e.length)throw new Error("Invalid base64Url character: "+e);const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(-1===t)throw new Error("Invalid base64Url character: "+e);const r=t.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function p(e,t){const r=function(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=function(e){let t=[];for(let r=0;r<e.length;r++){const n=d(e.charAt(r));t=t.concat(n)}return t}(e);const n=t%4;if(0===n);else if(1===n)r=r.slice(2);else{if(2!==n)throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);r=r.slice(4)}const i=(t+e.length-1)%4;if(3===i);else if(2===i)r=r.slice(0,r.length-2);else{if(1!==i)throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);r=r.slice(0,r.length-4)}if(r.length%8!=0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(r.length/8));let a=0;for(let e=0;e<r.length;e+=8){const t=r.slice(e,e+8),n=parseInt(t.join(""),2);s[a++]=n}return(new TextDecoder).decode(s)}(e.value,e.indexMod4),[n,i]=function(e){if("}"!==e.slice(-1)&&","!==e.slice(-1))throw new Error("Invalid claim");const t=JSON.parse("{"+e.slice(0,-1)+"}");if(1!==Object.keys(t).length)throw new Error("Invalid claim");const r=Object.keys(t)[0];return[r,t[r]]}(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}function h(e){const{iss:t,aud:r,sub:n,...i}=(0,u.jwtDecode)(e);if(!n||!t||!r)throw new Error("Missing jwt data");if(Array.isArray(r))throw new Error("Not supported aud. Aud is an array, string was expected.");return{...i,iss:(0,l.normalizeZkLoginIssuer)(t),rawIss:t,aud:r,sub:n}}},412650:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{BN254_FIELD_SIZE:()=>d,poseidonHash:()=>p}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(342343);const l=[u.poseidon1,u.poseidon2,u.poseidon3,u.poseidon4,u.poseidon5,u.poseidon6,u.poseidon7,u.poseidon8,u.poseidon9,u.poseidon10,u.poseidon11,u.poseidon12,u.poseidon13,u.poseidon14,u.poseidon15,u.poseidon16],d=21888242871839275222246405745257275088548364400416034343698204186575808495617n;function p(e){e.forEach((e=>{const t=BigInt(e);if(t<0||t>=d)throw new Error(`Element ${t} not in the BN254 field`)}));const t=l[e.length-1];if(t)return t(e);if(e.length<=32){const t=p(e.slice(0,16)),r=p(e.slice(16));return p([t,r])}throw new Error(`Yet to implement: Unable to hash a vector of length ${e.length}`)}},651108:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h=(e,t,r)=>(u(e,t,"access private method"),r),f={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(f,{ZkLoginPublicIdentifier:()=>C,parseSerializedZkLoginSignature:()=>N,toZkLoginPublicIdentifier:()=>A}),e.exports=(n=f,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var g,b,m,y,w,v=r(858171),j=r(513806),O=r(870064),S=r(191574),k=r(771997),I=r(67284),E=r(107269),T=r(321423),P=r(825023),M=r(290990),$=r(196681);const x=class e extends S.PublicKey{constructor(e,{client:t}={}){super(),d(this,y),d(this,g),d(this,b),d(this,m),p(this,b,t),"string"==typeof e?p(this,g,(0,v.fromBase64)(e)):e instanceof Uint8Array?p(this,g,e):p(this,g,Uint8Array.from(e)),p(this,m,l(this,g).length!==l(this,g)[0]+1+32),l(this,m)&&p(this,g,B(l(this,g)))}static fromProof(e,t){const{issBase64Details:r,addressSeed:n}=t,i=(0,P.extractClaimValue)(r,"iss"),s=A(BigInt(n),i,{legacyAddress:!0});if(s.toSuiAddress()===e)return s;const a=A(BigInt(n),i,{legacyAddress:!1});if(a.toSuiAddress()!==e)throw new Error("Proof does not match address");return a}equals(e){return super.equals(e)}toSuiAddress(){return l(this,m)?h(this,y,w).call(this):super.toSuiAddress()}toRawBytes(){return l(this,g)}flag(){return k.SIGNATURE_SCHEME_TO_FLAG.ZkLogin}async verify(e,t){throw Error("does not support")}verifyPersonalMessage(t,r){const n=N(r);return R({address:new e(n.publicKey).toSuiAddress(),bytes:(0,v.toBase64)(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:l(this,b)})}verifyTransaction(t,r){const n=N(r);return R({address:new e(n.publicKey).toSuiAddress(),bytes:(0,v.toBase64)(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:l(this,b)})}verifyAddress(e){return e===super.toSuiAddress()||e===h(this,y,w).call(this)}};g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakSet,w=function(){const e=B(l(this,g),!0),t=new Uint8Array(e.length+1);return t[0]=this.flag(),t.set(e,1),(0,T.normalizeSuiAddress)((0,O.bytesToHex)((0,j.blake2b)(t,{dkLen:32})).slice(0,2*T.SUI_ADDRESS_LENGTH))};let C=x;function A(e,t,r){const n=r?.legacyAddress?(0,$.toBigEndianBytes)(e,32):(0,$.toPaddedBigEndianBytes)(e,32),i=(new TextEncoder).encode((0,$.normalizeZkLoginIssuer)(t)),s=new Uint8Array(1+i.length+n.length);return s.set([i.length],0),s.set(i,1),s.set(n,1+i.length),new C(s,r)}const U=(0,E.graphql)("\n\tquery Zklogin(\n\t\t$bytes: Base64!\n\t\t$signature: Base64!\n\t\t$intentScope: ZkLoginIntentScope!\n\t\t$author: SuiAddress!\n\t) {\n\t\tverifyZkloginSignature(\n\t\t\tbytes: $bytes\n\t\t\tsignature: $signature\n\t\t\tintentScope: $intentScope\n\t\t\tauthor: $author\n\t\t) {\n\t\t\tsuccess\n\t\t\terrors\n\t\t}\n\t}\n");function B(e,t=!1){const r=e[0]+1,n=BigInt(`0x${(0,v.toHex)(e.slice(r))}`),i=t?(0,$.toBigEndianBytes)(n,32):(0,$.toPaddedBigEndianBytes)(n,32),s=new Uint8Array(r+i.length);return s.set(e.slice(0,r),0),s.set(i,r),s}async function R({address:e,bytes:t,signature:r,intentScope:n,client:i=new I.SuiGraphQLClient({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){const s=await i.query({query:U,variables:{bytes:t,signature:r,intentScope:n,author:e}});return!0===s.data?.verifyZkloginSignature.success&&0===s.data?.verifyZkloginSignature.errors.length}function N(e){const t="string"==typeof e?(0,v.fromBase64)(e):e;if(t[0]!==k.SIGNATURE_SCHEME_TO_FLAG.ZkLogin)throw new Error("Invalid signature scheme");const r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:s}=(0,M.parseZkLoginSignature)(r),{issBase64Details:a,addressSeed:o}=n,c=(0,P.extractClaimValue)(a,"iss"),u=A(BigInt(o),c);return{serializedSignature:(0,v.toBase64)(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:s,iss:c,addressSeed:BigInt(o)},signature:t,publicKey:u.toRawBytes()}}},290990:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{getZkLoginSignature:()=>p,parseZkLoginSignature:()=>h}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(858171),l=r(771997),d=r(743352);function p({inputs:e,maxEpoch:t,userSignature:r}){const n=function({inputs:e,maxEpoch:t,userSignature:r}){return d.zkLoginSignature.serialize({inputs:e,maxEpoch:t,userSignature:"string"==typeof r?(0,u.fromBase64)(r):r},{maxSize:2048}).toBytes()}({inputs:e,maxEpoch:t,userSignature:r}),i=new Uint8Array(n.length+1);return i.set([l.SIGNATURE_SCHEME_TO_FLAG.ZkLogin]),i.set(n,1),(0,u.toBase64)(i)}function h(e){return d.zkLoginSignature.parse("string"==typeof e?(0,u.fromBase64)(e):e)}},196681:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{chunkArray:()=>y,genAddressSeed:()=>v,getExtendedEphemeralPublicKey:()=>m,hashASCIIStrToField:()=>w,normalizeZkLoginIssuer:()=>j,toBigEndianBytes:()=>b,toPaddedBigEndianBytes:()=>g}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(870064),l=r(412650);const d=32,p=115,h=145,f=248;function g(e,t){const r=e.toString(16);return(0,u.hexToBytes)(r.padStart(2*t,"0").slice(2*-t))}function b(e,t){const r=g(e,t),n=function(e){for(let t=0;t<e.length;t++)if(0!==e[t])return t;return-1}(r);return-1===n?new Uint8Array([0]):r.slice(n)}function m(e){return e.toSuiPublicKey()}function y(e,t){const r=Array(Math.ceil(e.length/t)),n=e.reverse();for(let e=0;e<r.length;e++)r[e]=n.slice(e*t,(e+1)*t).reverse();return r.reverse()}function w(e,t){if(e.length>t)throw new Error(`String ${e} is longer than ${t} chars`);const r=y(e.padEnd(t,String.fromCharCode(0)).split("").map((e=>e.charCodeAt(0))),f/8).map((e=>function(e){const t=e.map((e=>e.toString(16).padStart(2,"0"))).join("");return 0===t.length?BigInt(0):BigInt("0x"+t)}(e)));return(0,l.poseidonHash)(r)}function v(e,t,r,n,i=d,s=p,a=h){return(0,l.poseidonHash)([w(t,i),w(r,s),w(n,a),(0,l.poseidonHash)([BigInt(e)])])}function j(e){return"accounts.google.com"===e?"https://accounts.google.com":e}},432707:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{fromB58:()=>h,fromBase58:()=>d,toB58:()=>p,toBase58:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(394372);const l=e=>u.base58.encode(e),d=e=>u.base58.decode(e),p=l,h=d},585239:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function o(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{fromB64:()=>d,fromBase64:()=>o,toB64:()=>l,toBase64:()=>u}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const c=8192;function u(e){if(e.length<c)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=c){const n=e.slice(r,r+c);t+=String.fromCharCode(...n)}return btoa(t)}const l=u,d=o},639958:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c=e=>{throw TypeError(e)},u=(e,t,r)=>t.has(e)||c("Cannot "+r),l=(e,t,r)=>(u(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r,n)=>(u(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),h={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(h,{BcsType:()=>k,SerializedBcs:()=>T,bigUIntBcsType:()=>$,dynamicSizeBcsType:()=>x,fixedSizeBcsType:()=>P,isSerializedBcs:()=>E,lazyBcsType:()=>A,stringLikeBcsType:()=>C,uIntBcsType:()=>M}),e.exports=(n=h,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var f,g,b,m,y=r(432707),w=r(585239),v=r(904128),j=r(696146),O=r(52185),S=r(417977);f=new WeakMap,g=new WeakMap;let k=class e{constructor(e){d(this,f),d(this,g),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),p(this,f,e.write),p(this,g,e.serialize??((e,t)=>{const r=new S.BcsWriter({initialSize:this.serializedSize(e)??void 0,...t});return l(this,f).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),l(this,f).call(this,e,t)}serialize(e,t){return this.validate(e),new T(this,l(this,g).call(this,e,t))}parse(e){const t=new j.BcsReader(e);return this.read(t)}fromHex(e){return this.parse((0,v.fromHex)(e))}fromBase58(e){return this.parse((0,y.fromBase58)(e))}fromBase64(e){return this.parse((0,w.fromBase64)(e))}transform({name:t,input:r,output:n,validate:i}){return new e({name:t??this.name,read:e=>n?n(this.read(e)):this.read(e),write:(e,t)=>l(this,f).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>l(this,g).call(this,r?r(e):e,t),validate:e=>{i?.(e),this.validate(r?r(e):e)}})}};const I=Symbol.for("@mysten/serialized-bcs");function E(e){return!!e&&"object"==typeof e&&!0===e[I]}class T{constructor(e,t){d(this,b),d(this,m),p(this,b,e),p(this,m,t)}get[I](){return!0}toBytes(){return l(this,m)}toHex(){return(0,v.toHex)(l(this,m))}toBase64(){return(0,w.toBase64)(l(this,m))}toBase58(){return(0,y.toBase58)(l(this,m))}parse(){return l(this,b).parse(l(this,m))}}function P({size:e,...t}){return new k({...t,serializedSize:()=>e})}function M({readMethod:e,writeMethod:t,...r}){return P({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function $({readMethod:e,writeMethod:t,...r}){return P({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}function x({serialize:e,...t}){const r=new k({...t,serialize:e,write:(e,t)=>{for(const n of r.serialize(e).toBytes())t.write8(n)}});return r}function C({toBytes:e,fromBytes:t,...r}){return new k({...r,read:e=>{const r=e.readULEB(),n=e.readBytes(r);return t(n)},write:(t,r)=>{const n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{const r=e(t),n=(0,O.ulebEncode)(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})}function A(e){let t=null;function r(){return t||(t=e()),t}return new k({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}b=new WeakMap,m=new WeakMap},95098:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{bcs:()=>d}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(639958),l=r(52185);const d={u8:e=>(0,u.uIntBcsType)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>(0,u.uIntBcsType)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>(0,u.uIntBcsType)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e}),u64:e=>(0,u.bigUIntBcsType)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>(0,u.bigUIntBcsType)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>(0,u.bigUIntBcsType)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>(0,u.fixedSizeBcsType)({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>(0,u.dynamicSizeBcsType)({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from((0,l.ulebEncode)(e)),...e}),bytes:(e,t)=>(0,u.fixedSizeBcsType)({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,r)=>{const n=new Uint8Array(t);for(let t=0;t<e;t++)r.write8(n[t]??0)},...t,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new u.BcsType({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const r=new Uint8Array(e);t.writeULEB(r.length);for(let e=0;e<r.length;e++)t.write8(r[e]??0)},...e,serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:(0,l.ulebEncode)(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>(0,u.stringLikeBcsType)({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e}),fixedArray:(e,t,r)=>new u.BcsType({name:`${t.name}[${e}]`,read:r=>{const n=new Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(const n of e)t.write(n,r)},...r,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>d.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new u.BcsType({name:`vector<${e.name}>`,read:t=>{const r=t.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{r.writeULEB(t.length);for(const n of t)e.write(n,r)},...t,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}}),tuple:(e,t)=>new u.BcsType({name:`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){const i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{const r=[];for(const n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...t,validate:r=>{if(t?.validate?.(r),!Array.isArray(r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${r.length}`)}}),struct(e,t,r){const n=Object.entries(t);return new u.BcsType({name:e,serializedSize:e=>{let t=0;for(const[r,i]of n){const n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{const t={};for(const[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(const[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})},enum(e,t,r){const n=Object.entries(t);return new u.BcsType({name:e,read:t=>{const r=t.readULEB(),i=n[r];if(!i)throw new TypeError(`Unknown value ${r} for enum ${e}`);const[s,a]=i;return{[s]:a?.read(t)??!0,$kind:s}},write:(e,r)=>{const[i,s]=Object.entries(e).filter((([e])=>Object.hasOwn(t,e)))[0];for(let e=0;e<n.length;e++){const[t,a]=n[e];if(t===i)return r.writeULEB(e),void a?.write(s,r)}},...r,validate:n=>{if(r?.validate?.(n),"object"!=typeof n||null==n)throw new TypeError("Expected object, found "+typeof n);const i=Object.keys(n).filter((e=>void 0!==n[e]&&Object.hasOwn(t,e)));if(1!==i.length)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${e}}`);const[s]=i;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map:(e,t)=>d.vector(d.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[r,n]of e)t.set(r,n);return t}}),lazy:e=>(0,u.lazyBcsType)(e)}},904128:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function o(e){const t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map((e=>parseInt(e,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function c(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{fromHEX:()=>l,fromHex:()=>o,toHEX:()=>u,toHex:()=>c}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));const u=c,l=o},858171:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{BcsReader:()=>f.BcsReader,BcsType:()=>d.BcsType,BcsWriter:()=>b.BcsWriter,SerializedBcs:()=>d.SerializedBcs,bcs:()=>p.bcs,decodeStr:()=>g.decodeStr,encodeStr:()=>g.encodeStr,fromB58:()=>u.fromB58,fromB64:()=>l.fromB64,fromBase58:()=>u.fromBase58,fromBase64:()=>l.fromBase64,fromHEX:()=>h.fromHEX,fromHex:()=>h.fromHex,isSerializedBcs:()=>d.isSerializedBcs,splitGenericParameters:()=>g.splitGenericParameters,toB58:()=>u.toB58,toB64:()=>l.toB64,toBase58:()=>u.toBase58,toBase64:()=>l.toBase64,toHEX:()=>h.toHEX,toHex:()=>h.toHex}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(432707),l=r(585239),d=r(639958),p=r(95098),h=r(904128),f=r(696146),g=r(18658),b=r(417977)},696146:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{BcsReader:()=>l}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(52185);class l{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=(0,u.ulebDecode)(t);return this.shift(n),r}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}},52185:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function o(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}function c(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,0==(128&i))break;r+=7}return{value:t,length:n}}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{ulebDecode:()=>c,ulebEncode:()=>o}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of i(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=n(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t))},18658:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{decodeStr:()=>h,encodeStr:()=>p,splitGenericParameters:()=>f}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(432707),l=r(585239),d=r(904128);function p(e,t){switch(t){case"base58":return(0,u.toBase58)(e);case"base64":return(0,l.toBase64)(e);case"hex":return(0,d.toHex)(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function h(e,t){switch(t){case"base58":return(0,u.fromBase58)(e);case"base64":return(0,l.fromBase64)(e);case"hex":return(0,d.fromHex)(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function f(e,t=["<",">"]){const[r,n]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===r&&a++,o===n&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}},417977:(e,t,r)=>{var n,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,c={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(c,{BcsWriter:()=>d}),e.exports=(n=c,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))o.call(e,r)||undefined===r||i(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(i({},"__esModule",{value:!0}),n));var u=r(52185),l=r(18658);class d{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return p(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return p(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return p(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return(0,u.ulebEncode)(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,l.encodeStr)(this.toBytes(),e)}}function p(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}},71093:(e,t,r)=>{function n(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}r.d(t,{Gh:()=>n,s3:()=>s});const i=8192;function s(e){if(e.length<i)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=i){const n=e.slice(r,r+i);t+=String.fromCharCode(...n)}return btoa(t)}},348888:(e,t,r)=>{function n(e){const t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}}`,n=r.match(/.{2}/g)?.map((e=>parseInt(e,16)))??[];return Uint8Array.from(n)}function i(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}r.d(t,{H_:()=>n,NC:()=>i})},120692:(e,t,r)=>{r.d(t,{uP:()=>a,xr:()=>o});var n=r(984355),i=r(806882),s=r(850289);const a=n.$5.struct(i.pm,{id:n.$5.Address,profits:n.$5.u64(),owner:n.$5.Address,itemCount:n.$5.u32(),allowExtensions:n.$5.bool()}),o=(n.$5.struct(i.QC,{id:n.$5.Address,kioskId:n.$5.Address,itemId:n.$5.Address,minPrice:n.$5.u64()}),n.$5.struct(s.ph,{id:n.$5.Address}),n.$5.struct(s.AY,{id:n.$5.Address,balance:n.$5.u64(),rules:n.$5.vector(n.$5.string())}))},464413:(e,t,r)=>{r.d(t,{l:()=>E});var n=r(984355),i=r(313929),s=r(55855),a=r(938268);async function o(e){const{kioskClient:t,transaction:r,itemType:a,price:o,packageId:c,transferRequest:u,policyId:l}=e,d=r.object(l),p=new i.Y;p.moveCall({target:`${c}::royalty_rule::fee_amount`,typeArguments:[a],arguments:[d,r.pure.u64(o||"0")]});const{results:h}=await t.client.devInspectTransactionBlock({sender:r.getData().sender||(0,s.yT)("0x0"),transactionBlock:p});let f=null;if(h){const e=h?.[0].returnValues?.[0]?.[0];e&&(f=BigInt(n.$5.U64.parse(new Uint8Array(e))))}f||([f]=r.moveCall({target:`${c}::royalty_rule::fee_amount`,typeArguments:[a],arguments:[d,r.pure.u64(o||"0")]}));const g=r.splitCoins(r.gas,[f]);r.moveCall({target:`${c}::royalty_rule::pay`,typeArguments:[a],arguments:[d,u,g]})}function c(e){const{transaction:t,packageId:r,itemType:n,kiosk:i,kioskCap:s,policyId:o,purchasedItem:c,transferRequest:u}=e;if(!i||!s)throw new Error("Missing Owned Kiosk or Owned Kiosk Cap");(0,a.dR)(t,n,i,s,o,c),t.moveCall({target:`${r}::kiosk_lock_rule::prove`,typeArguments:[n],arguments:[u,t.object(i)]})}function u(e){const{transaction:t,packageId:r,itemType:n,kiosk:i,transferRequest:s}=e;if(!i)throw new Error("Missing owned Kiosk.");t.moveCall({target:`${r}::personal_kiosk_rule::prove`,typeArguments:[n],arguments:[t.object(i),s]})}function l(e){const{transaction:t,packageId:r,itemType:n,policyId:i,transferRequest:s}=e;t.moveCall({target:`${r}::floor_price_rule::prove`,typeArguments:[n],arguments:[t.object(i),s]})}var d=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.CUSTOM="custom",e))(d||{});const p={[d.TESTNET]:"bd8fc1947cf119350184107a3087e2dc27efefa0dd82e25a1f699069fe81a585",[d.MAINNET]:"0x434b5bd8f6a7b05fede0ff46c6e511d71ea326ed38056e3bcd681d2d7c2a7879",[d.CUSTOM]:""},h={[d.TESTNET]:"bd8fc1947cf119350184107a3087e2dc27efefa0dd82e25a1f699069fe81a585",[d.MAINNET]:"0x434b5bd8f6a7b05fede0ff46c6e511d71ea326ed38056e3bcd681d2d7c2a7879",[d.CUSTOM]:""},f={[d.TESTNET]:"0x06f6bdd3f2e2e759d8a4b9c252f379f7a05e72dfe4c0b9311cdac27b8eb791b1",[d.MAINNET]:"0x34cc6762780f4f6f153c924c0680cfe2a1fb4601e7d33cc28a92297b62de1e0e",[d.CUSTOM]:""},g={[d.TESTNET]:"0x06f6bdd3f2e2e759d8a4b9c252f379f7a05e72dfe4c0b9311cdac27b8eb791b1",[d.MAINNET]:"0x0cb4bcc0560340eb1a1b929cabe56b33fc6449820ec8c1980d69bb98b649b802",[d.CUSTOM]:""};function b({royaltyRulePackageId:e,kioskLockRulePackageId:t,personalKioskRulePackageId:r,floorPriceRulePackageId:n}){const i=[];return e&&i.push({rule:`${e}::royalty_rule::Rule`,packageId:e,resolveRuleFunction:o}),t&&i.push({rule:`${t}::kiosk_lock_rule::Rule`,packageId:t,resolveRuleFunction:c,hasLockingRule:!0}),r&&i.push({rule:`${r}::personal_kiosk_rule::Rule`,packageId:r,resolveRuleFunction:u}),n&&i.push({rule:`${n}::floor_price_rule::Rule`,packageId:n,resolveRuleFunction:l}),i}const m=[...b({royaltyRulePackageId:p[d.TESTNET],kioskLockRulePackageId:h[d.TESTNET],personalKioskRulePackageId:g[d.TESTNET],floorPriceRulePackageId:f[d.TESTNET]}),...b({royaltyRulePackageId:p[d.MAINNET],kioskLockRulePackageId:h[d.MAINNET]})];var y=r(806882),w=r(601195);const v="personal",j="owned";function O(e,t){const{data:r,hasNextPage:n,nextCursor:i}=e,s=r?.map((e=>{const t="moveObject"===e.data?.content?.dataType?e.data.content.fields:null;return t?.cap?t?.cap?.fields?.for:t?.for}));return{nextCursor:i?`${t}:${i}`:i,hasNextPage:n,kioskOwnerCaps:r.filter((e=>"data"in e)).map((e=>e.data)).map(((e,t)=>({isPersonal:e.type!==y.p9,digest:e.digest,version:e.version,objectId:e.objectId,kioskId:s[t]}))),kioskIds:s}}var S=r(675790),k=r(120692),I=r(850289);class E{constructor(e){this.client=e.client,this.network=e.network,this.rules=m,this.packageIds=e.packageIds,e.packageIds&&this.rules.push(...b(e.packageIds))}async getOwnedKiosks({address:e,pagination:t}){const r=this.packageIds?.personalKioskRulePackageId||g[this.network];return async function(e,t,r){if(!(0,s.oI)(t))return{nextCursor:null,hasNextPage:!1,kioskOwnerCaps:[],kioskIds:[]};const n=r?.pagination?.limit??50,[i,a]=r?.pagination?.cursor?.split(":")??[v,null];if(r?.personalKioskType&&i===v){const i=O(await e.getOwnedObjects({owner:t,filter:{StructType:r.personalKioskType},options:{showContent:!0,showType:!0},cursor:a,limit:n}),v);if(i.hasNextPage)return i;const s=n-i.kioskOwnerCaps.length;if(s<1)return{nextCursor:`${j}:`,hasNextPage:!0,kioskOwnerCaps:i.kioskOwnerCaps,kioskIds:i.kioskIds};const o=O(await e.getOwnedObjects({owner:t,filter:{StructType:y.p9},options:{showContent:!0,showType:!0},limit:s}),j);return{nextCursor:o.nextCursor,hasNextPage:o.hasNextPage,kioskOwnerCaps:[...i.kioskOwnerCaps,...o.kioskOwnerCaps],kioskIds:[...i.kioskIds,...o.kioskIds]}}return O(await e.getOwnedObjects({owner:t,filter:{StructType:y.p9},options:{showContent:!0,showType:!0},cursor:a||null,limit:n}),j)}(this.client,e,{pagination:t,personalKioskType:r?`${r}::personal_kiosk::PersonalKioskCap`:""})}async getKiosk({id:e,options:t}){return(await async function(e,t,r,n){const i=await(0,w.kH)(e,t,{limit:1e3}),s=[],a=[],o=(0,w.eU)(i,s,a,t),[c,u,l]=await Promise.all([n.withKioskFields?(0,w.I_)(e,t):Promise.resolve(void 0),n.withListingPrices?(0,w.RJ)(e,o.listingIds,{showContent:!0}):Promise.resolve([]),n.withObjects?(0,w.RJ)(e,o.itemIds,n.objectOptions||{showDisplay:!0}):Promise.resolve([])]);return n.withKioskFields&&(o.kiosk=c),(0,w.IU)(o,s,u),(0,w.g8)(o,a),(0,w.ad)(o,l.filter((e=>!!e.data)).map((e=>e.data))),{data:o,nextCursor:null,hasNextPage:!1}}(this.client,e,0,t||{})).data}async getKioskExtension({kioskId:e,type:t}){return async function(e,t,r){const n=await e.getDynamicFieldObject({parentId:t,name:{type:`0x2::kiosk_extension::ExtensionKey<${r}>`,value:{dummy_field:!1}}});if(!n.data)return null;const i=n?.data?.content?.fields?.value?.fields;return{objectId:n.data.objectId,type:r,isEnabled:i?.is_enabled,permissions:i?.permissions,storageId:i?.storage?.fields?.id?.id,storageSize:i?.storage?.fields?.size}}(this.client,e,t)}async getTransferPolicies({type:e}){return async function(e,t){const{data:r}=await e.queryEvents({query:{MoveEventType:`${I.ph}<${t}>`}}),n=r.map((e=>e.parsedJson));return(await e.multiGetObjects({ids:n.map((e=>e.id)),options:{showBcs:!0,showOwner:!0}})).filter((e=>!!e&&"data"in e)).map((({data:e})=>{if(!e||!e.bcs||!("bcsBytes"in e.bcs))throw new Error(`Invalid policy: ${e?.objectId}, expected object, got package`);const r=k.xr.parse((0,S.Gh)(e.bcs.bcsBytes));return{id:e?.objectId,type:`${I.AY}<${t}>`,owner:e?.owner,rules:r.rules,balance:r.balance}}))}(this.client,e)}async getOwnedTransferPolicies({address:e}){return async function(e,t){if(!(0,s.oI)(t))return;const r=await(0,w.ld)({client:e,owner:t,filter:{MatchAll:[{MoveModule:{module:"transfer_policy",package:"0x2"}}]}}),n=[];for(const e of r){const t=(0,w._K)(e);t&&n.push(t)}return n}(this.client,e)}async getOwnedTransferPoliciesByType({type:e,address:t}){return async function(e,t,r){if(!(0,s.oI)(t))return[];const n={MatchAll:[{StructType:`${I.Rf}<${r}>`}]};return(await(0,w.ld)({client:e,filter:n,owner:t})).map((e=>(0,w._K)(e))).filter((e=>!!e))}(this.client,t,e)}addRuleResolver(e){if(this.rules.find((t=>t.rule===e.rule)))throw new Error(`Rule ${e.rule} resolver already exists.`);this.rules.push(e)}getRulePackageId(e){const t=this.packageIds||{},r=this.network;if(!t[e]&&r!==d.MAINNET&&r!==d.TESTNET)throw new Error(`Missing packageId for rule ${e}`);switch(e){case"kioskLockRulePackageId":return t[e]||h[r];case"royaltyRulePackageId":return t[e]||p[r];case"personalKioskRulePackageId":return t[e]||g[r];case"floorPriceRulePackageId":return t[e]||f[r]}}}},771229:(e,t,r)=>{r.d(t,{G:()=>O});var n,i,s,a,o,c,u,l,d,p,h=r(938268),f=r(850289),g=r(601195),b=e=>{throw TypeError(e)},m=(e,t,r)=>t.has(e)||b("Cannot "+r),y=(e,t,r)=>(m(e,t,"read from private field"),r?r.call(e):t.get(e)),w=(e,t,r)=>t.has(e)?b("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,n)=>(m(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),j=(e,t,r)=>(m(e,t,"access private method"),r);class O{constructor({transactionBlock:e,transaction:t=e,kioskClient:r,cap:u}){w(this,c),w(this,n),w(this,i),w(this,s),w(this,a),w(this,o,!1),this.transaction=t,this.kioskClient=r,u&&this.setCap(u)}create(){j(this,c,p).call(this),j(this,c,l).call(this,{share:!0,transfer:!0});const[e,t]=h.RB(this.transaction);return this.kiosk=e,this.kioskCap=t,this}createPersonal(e){return v(this,n,!0),this.create().convertToPersonal(e)}convertToPersonal(e){j(this,c,d).call(this);const t=(r=this.transaction,n=this.kiosk,i=this.kioskCap,s=this.kioskClient.getRulePackageId("personalKioskRulePackageId"),r.moveCall({target:`${s}::personal_kiosk::new`,arguments:[r.object(n),r.object(i)]}));var r,n,i,s;return e?j(this,c,u).call(this,t):v(this,a,t),j(this,c,l).call(this,{transfer:!0}),this}createAndShare(e){j(this,c,p).call(this);const t=h.ed(this.transaction);this.transaction.transferObjects([t],this.transaction.pure.address(e))}share(){j(this,c,d).call(this),j(this,c,l).call(this,{share:!1}),h.Fb(this.transaction,this.kiosk)}shareAndTransferCap(e){if(y(this,a))throw new Error("You can only call `shareAndTransferCap` on a non-personal kiosk.");j(this,c,l).call(this,{transfer:!1}),this.share(),this.transaction.transferObjects([this.kioskCap],this.transaction.pure.address(e))}borrowTx({itemType:e,itemId:t},r){j(this,c,d).call(this);const[n,i]=h.vz(this.transaction,e,this.kiosk,this.kioskCap,t);r(n),this.return({itemType:e,item:n,promise:i})}borrow({itemType:e,itemId:t}){j(this,c,d).call(this);const[r,n]=h.vz(this.transaction,e,this.kiosk,this.kioskCap,t);return[r,n]}return({itemType:e,item:t,promise:r}){return j(this,c,d).call(this),h.FW(this.transaction,e,this.kiosk,t,r),this}withdraw(e,t){j(this,c,d).call(this);const r=h.Cd(this.transaction,this.kiosk,this.kioskCap,t);return this.transaction.transferObjects([r],this.transaction.pure.address(e)),this}place({itemType:e,item:t}){return j(this,c,d).call(this),h.Zp(this.transaction,e,this.kiosk,this.kioskCap,t),this}placeAndList({itemType:e,item:t,price:r}){return j(this,c,d).call(this),h.sX(this.transaction,e,this.kiosk,this.kioskCap,t,r),this}list({itemType:e,itemId:t,price:r}){return j(this,c,d).call(this),h.pb(this.transaction,e,this.kiosk,this.kioskCap,t,r),this}delist({itemType:e,itemId:t}){return j(this,c,d).call(this),h.Kn(this.transaction,e,this.kiosk,this.kioskCap,t),this}take({itemType:e,itemId:t}){return j(this,c,d).call(this),h.qn(this.transaction,e,this.kiosk,this.kioskCap,t)}transfer({itemType:e,itemId:t,address:r}){j(this,c,d).call(this);const n=this.take({itemType:e,itemId:t});return this.transaction.transferObjects([n],this.transaction.pure.address(r)),this}lock({itemType:e,item:t,itemId:r,policy:n}){return j(this,c,d).call(this),h.dR(this.transaction,e,this.kiosk,this.kioskCap,n,r??t),this}purchase({itemType:e,itemId:t,price:r,sellerKiosk:n}){const i=this.transaction.splitCoins(this.transaction.gas,[this.transaction.pure.u64(r)]);return h.e_(this.transaction,e,n,t,i)}async purchaseAndResolve({itemType:e,itemId:t,price:r,sellerKiosk:n,extraArgs:i}){j(this,c,d).call(this);const s=await this.kioskClient.getTransferPolicies({type:e});if(0===s.length)throw new Error(`The type ${e} doesn't have a Transfer Policy so it can't be traded through kiosk.`);const a=s[0],[o,u]=this.purchase({itemType:e,itemId:t,price:r,sellerKiosk:n});let l=!0;for(const s of a.rules){const c=this.kioskClient.rules.find((e=>(0,g.I1)(e.rule)===(0,g.I1)(s)));if(!c)throw new Error(`No resolver for the following rule: ${s}.`);c.hasLockingRule&&(l=!1),await c.resolveRuleFunction({packageId:c.packageId,transactionBlock:this.transaction,transaction:this.transaction,itemType:e,itemId:t,price:r.toString(),sellerKiosk:n,policyId:a.id,transferRequest:u,purchasedItem:o,kiosk:this.kiosk,kioskCap:this.kioskCap,extraArgs:i||{},kioskClient:this.kioskClient})}return function(e,t,r,n){e.moveCall({target:`${f.tk}::confirm_request`,typeArguments:[t],arguments:[e.object(r),n]})}(this.transaction,e,a.id,u),l&&this.place({itemType:e,item:o}),this}setCap(e){if(j(this,c,p).call(this),this.kiosk=this.transaction.object(e.kioskId),e.isPersonal)return j(this,c,u).call(this,e.objectId);this.kioskCap=this.transaction.object(e.objectId)}finalize(){if(j(this,c,d).call(this),y(this,n)&&this.share(),!y(this,a)){if(y(this,i))throw new Error("You need to transfer the `kioskOwnerCap` by calling `shareAndTransferCap()` before wrap");return}const e=this.kioskClient.getRulePackageId("personalKioskRulePackageId");y(this,s)&&this.transaction.moveCall({target:`${e}::personal_kiosk::return_val`,arguments:[y(this,a),this.transaction.object(this.kioskCap),y(this,s)]}),y(this,i)&&function(e,t,r){e.moveCall({target:`${r}::personal_kiosk::transfer_to_sender`,arguments:[t]})}(this.transaction,y(this,a),e),v(this,o,!0)}setKioskCap(e){return j(this,c,p).call(this),this.kioskCap=e,this}setKiosk(e){return j(this,c,p).call(this),this.kiosk=e,this}getKiosk(){if(j(this,c,p).call(this),!this.kiosk)throw new Error("Kiosk is not set.");return this.kiosk}getKioskCap(){if(j(this,c,p).call(this),!this.kioskCap)throw new Error("Kiosk cap is not set");return this.kioskCap}}n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,u=function(e){const[t,r]=this.transaction.moveCall({target:`${this.kioskClient.getRulePackageId("personalKioskRulePackageId")}::personal_kiosk::borrow_val`,arguments:[this.transaction.object(e)]});return this.kioskCap=t,v(this,a,this.transaction.object(e)),v(this,s,r),this},l=function({share:e,transfer:t}){void 0!==t&&v(this,i,t),void 0!==e&&v(this,n,e)},d=function(){if(j(this,c,p).call(this),!this.kiosk||!this.kioskCap)throw new Error("You need to initialize the client by either supplying an existing owner cap or by creating a new by calling `.create()`")},p=function(){if(y(this,o))throw new Error("You can't add more transactions to a finalized kiosk transaction.")}},938268:(e,t,r)=>{r.d(t,{Cd:()=>g,FW:()=>m,Fb:()=>o,Kn:()=>p,RB:()=>s,Zp:()=>c,dR:()=>u,e_:()=>f,ed:()=>a,pb:()=>d,qn:()=>l,sX:()=>h,vz:()=>b});var n=r(984355),i=r(806882);function s(e){const[t,r]=e.moveCall({target:`${i.M5}::new`});return[t,r]}function a(e){const[t,r]=s(e);return o(e,t),r}function o(e,t){e.moveCall({target:"0x2::transfer::public_share_object",typeArguments:[i.pm],arguments:[t]})}function c(e,t,r,n,s){e.moveCall({target:`${i.M5}::place`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.object(s)]})}function u(e,t,r,n,s,a){e.moveCall({target:`${i.M5}::lock`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.object(s),e.object(a)]})}function l(e,t,r,n,s){const[a]=e.moveCall({target:`${i.M5}::take`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.pure.id(s)]});return a}function d(e,t,r,n,s,a){e.moveCall({target:`${i.M5}::list`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.pure.id(s),e.pure.u64(a)]})}function p(e,t,r,n,s){e.moveCall({target:`${i.M5}::delist`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.pure.id(s)]})}function h(e,t,r,n,s,a){e.moveCall({target:`${i.M5}::place_and_list`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.object(s),e.pure.u64(a)]})}function f(e,t,r,n,s){const[a,o]=e.moveCall({target:`${i.M5}::purchase`,typeArguments:[t],arguments:[e.object(r),e.pure.id(n),e.object(s)]});return[a,o]}function g(e,t,r,s){const a=n.$5.option(n.$5.u64()).serialize(s),[o]=e.moveCall({target:`${i.M5}::withdraw`,arguments:[e.object(t),e.object(r),a]});return o}function b(e,t,r,n,s){const[a,o]=e.moveCall({target:`${i.M5}::borrow_val`,typeArguments:[t],arguments:[e.object(r),e.object(n),e.pure.id(s)]});return[a,o]}function m(e,t,r,n,s){e.moveCall({target:`${i.M5}::return_val`,typeArguments:[t],arguments:[e.object(r),n,s]})}},806882:(e,t,r)=>{r.d(t,{M5:()=>n,QC:()=>a,p9:()=>s,pm:()=>i});const n="0x2::kiosk",i=`${n}::Kiosk`,s=`${n}::KioskOwnerCap`,a=`${n}::PurchaseCap`},850289:(e,t,r)=>{r.d(t,{AY:()=>s,Rf:()=>a,ph:()=>i,tk:()=>n});const n="0x2::transfer_policy",i=`${n}::TransferPolicyCreated`,s=`${n}::TransferPolicy`,a=`${n}::TransferPolicyCap`},601195:(e,t,r)=>{r.d(t,{I1:()=>m,IU:()=>l,I_:()=>c,RJ:()=>f,_K:()=>b,ad:()=>d,eU:()=>u,g8:()=>p,kH:()=>h,ld:()=>g});var n=r(675790),i=r(55855),s=r(120692),a=r(850289);const o=50;async function c(e,t){const r=await e.getObject({id:t,options:{showBcs:!0}});if(!r||r.error||!r.data)throw new Error(`Kiosk ${t} not found; ${r.error}`);if(!r.data.bcs||!("bcsBytes"in r.data.bcs))throw new Error(`Invalid kiosk query: ${t}, expected object, got package`);return s.uP.parse((0,n.Gh)(r.data.bcs.bcsBytes))}function u(e,t,r,n){return e.reduce(((e,s)=>{const a=s.name.type;return a.startsWith("0x2::kiosk::Item")&&(e.itemIds.push(s.objectId),e.items.push({objectId:s.objectId,type:s.objectType,isLocked:!1,kioskId:n})),a.startsWith("0x2::kiosk::Listing")&&(e.listingIds.push(s.objectId),t.push({objectId:s.name.value.id,listingId:s.objectId,isExclusive:s.name.value.is_exclusive})),a.startsWith("0x2::kiosk::Lock")&&r?.push(s.name.value.id),a.startsWith("0x2::kiosk_extension::ExtensionKey")&&e.extensions.push({objectId:s.objectId,type:(0,i.kX)((0,i.$A)(s.name.type).typeParams[0])}),e}),{items:[],itemIds:[],listingIds:[],extensions:[]})}function l(e,t,r){const n=t.reduce(((e,t,n)=>{if(e[t.objectId]={...t},0===r.length)return e;const i=r[n].data?.content,s="moveObject"===i?.dataType?i?.fields:null;return s?(e[t.objectId].price=s.value,e):e}),{});e.items.forEach((e=>{e.listing=n[e.objectId]||void 0}))}function d(e,t){const r=t.reduce(((e,t)=>(e[t.objectId]=t,e)),{});e.items.forEach((e=>{e.data=r[e.objectId]||void 0}))}function p(e,t){const r=t.reduce(((e,t)=>(e[t]=!0,e)),{});e.items.forEach((e=>{e.isLocked=r[e.objectId]||!1}))}async function h(e,t,r){let n,i=!0;const s=[];for(;i;){const a=await e.getDynamicFields({parentId:t,limit:r.limit||void 0,cursor:n});s.push(...a.data),i=a.hasNextPage,n=a.nextCursor}return s}async function f(e,t,r,n=o){const i=Array.from({length:Math.ceil(t.length/n)},((e,r)=>t.slice(r*n,r*n+n)));return(await Promise.all(i.map((t=>e.multiGetObjects({ids:t,options:r}))))).flat()}async function g({client:e,owner:t,filter:r,limit:n=o,options:i={showType:!0,showContent:!0}}){let s,a=!0;const c=[];for(;a;){const o=await e.getOwnedObjects({owner:t,filter:r,limit:n,cursor:s,options:i});c.push(...o.data),a=o.hasNextPage,s=o.nextCursor}return c}function b(e){const t=e?.data?.content?.type,r=e?.data?.content?.fields?.policy_id;if(!t.includes(a.Rf))return;const n=t.replace(a.Rf+"<","").slice(0,-1);return{policyId:r,policyCapId:e.data?.objectId,type:n}}function m(e){const t=e.split("::");return t[0]=(0,i.yT)(t[0]),t.join("::")}},204534:(e,t,r)=>{r.d(t,{Z:()=>b});var n,i,s,a,o,c=r(527501),u=r(348834).Buffer,l=e=>{throw TypeError(e)},d=(e,t,r)=>t.has(e)||l("Cannot "+r),p=(e,t,r)=>(d(e,t,"read from private field"),r?r.call(e):t.get(e)),h=(e,t,r)=>t.has(e)?l("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),f=(e,t,r)=>(d(e,t,"access private method"),r),g=(e=>(e[e.RESULT_ACCUMULATING=0]="RESULT_ACCUMULATING",e[e.RESULT_FINAL=1]="RESULT_FINAL",e[e.GET_CHUNK=2]="GET_CHUNK",e[e.PUT_CHUNK=3]="PUT_CHUNK",e))(g||{});class b{constructor(e,t="default_sui_scramble_key",r=!1){var s,a;h(this,i),h(this,n),a=r,d(this,s=n,"write to private field"),s.set(this,a),this.transport=e,this.transport.decorateAppAPIMethods(this,["getPublicKey","signTransaction","getVersion"],t)}async getPublicKey(e,t=!1){const r=t?1:2,n=m(e),a=await f(this,i,s).call(this,0,r,0,0,n),o=a[0],c=a.slice(1,o+1);let u=null;if(a.length>o+2){const e=a[o+1];u=a.slice(o+2,o+2+e)}return{publicKey:c,address:u}}async signTransaction(e,t){p(this,n)&&f(this,i,o).call(this,t);const r="string"==typeof t?u.from(t,"hex"):u.from(t),a=u.alloc(4);a.writeUInt32LE(r.length,0);const c=m(e),l=u.concat([a,r]);return f(this,i,o).call(this,"Payload Txn",l),{signature:await f(this,i,s).call(this,0,3,0,0,[l,c])}}async getVersion(){const[e,t,r]=await f(this,i,s).call(this,0,0,0,0,u.alloc(1));return{major:e,minor:t,patch:r}}}function m(e){const t=function(e){const t=[];return e.split("/").forEach((e=>{let r=parseInt(e,10);isNaN(r)||(e.length>1&&"'"===e[e.length-1]&&(r+=2147483648),t.push(r))})),t}(e),r=u.alloc(1+4*t.length);return r[0]=t.length,t.forEach(((e,t)=>{r.writeUInt32LE(e,1+4*t)})),r}n=new WeakMap,i=new WeakSet,s=async function(e,t,r,n,s,l=new Map){s instanceof Array||(s=[s]);let d=[],p=new Map(l);for(let e=0;e<s.length;e++){let t=[];for(let r=0;r<s[e].length;r+=180){let n=s[e].slice(r,r+180);t.push(n)}let r=u.alloc(32);f(this,i,o).call(this,r),p=t.reduceRight(((e,t)=>{let n=u.concat([r,t]);return f(this,i,o).call(this,"Chunk: ",t),f(this,i,o).call(this,"linkedChunk: ",n),r=u.from(c(n)),e.set(r.toString("hex"),n),e}),p),d.push(r),r=u.alloc(32)}return f(this,i,o).call(this,p),await f(this,i,a).call(this,e,t,r,n,u.concat([u.from([0])].concat(d)),p)},a=async function(e,t,r,n,s,a){let l=s,d=u.alloc(0);do{f(this,i,o).call(this,"Sending payload to ledger: ",l.toString("hex"));let s=await this.transport.send(e,t,r,n,l);f(this,i,o).call(this,"Received response: ",s);var p=s[0];let h=s.slice(1,s.length-2);if(!(p in g))throw new TypeError("Unknown instruction returned from ledger");switch(p){case 0:case 1:d=u.concat([d,h]),l=u.from([4]);break;case 2:let e=a.get(h.toString("hex"));f(this,i,o).call(this,"Getting block ",h),f(this,i,o).call(this,"Found block ",e),l=e?u.concat([u.from([1]),e]):u.from([2]);break;case 3:a.set(u.from(c(h)).toString("hex"),h),l=u.from([3])}}while(1!==p);return d},o=function(...e){p(this,n)&&console.log(e)}},921145:(e,t,r)=>{r.d(t,{Ct:()=>T,GQ:()=>P,J1:()=>C,Jx:()=>d,Ls:()=>S,O$:()=>b,Ow:()=>M,Qh:()=>y,SE:()=>x,W2:()=>j,WJ:()=>l,YQ:()=>f,_8:()=>p,cy:()=>k,dy:()=>E,eO:()=>D,hA:()=>m,jU:()=>_,jf:()=>V,k8:()=>N,kL:()=>u,ko:()=>A,mY:()=>w,nb:()=>h,nh:()=>U,oA:()=>I,os:()=>B,qd:()=>R,tj:()=>$,wz:()=>O});var n=r(316340),i=r(684819),s=r(601664),a=r(675790),o=r(55855),c=r(119902);const u=n.$.bytes(o.kT).transform({validate:e=>{const t="string"==typeof e?e:(0,i.NC)(e);if(!t||!(0,o.oI)((0,o.yT)(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,i.H_)((0,o.yT)(e)):e,output:e=>(0,o.yT)((0,i.NC)(e))}),l=n.$.vector(n.$.u8()).transform({name:"ObjectDigest",input:e=>(0,s.Le)(e),output:e=>(0,s.zX)(new Uint8Array(e)),validate:e=>{if(32!==(0,s.Le)(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),d=n.$.struct("SuiObjectRef",{objectId:u,version:n.$.u64(),digest:l}),p=n.$.struct("SharedObjectRef",{objectId:u,initialSharedVersion:n.$.u64(),mutable:n.$.bool()}),h=n.$.enum("ObjectArg",{ImmOrOwnedObject:d,SharedObject:p,Receiving:d}),f=n.$.enum("CallArg",{Pure:n.$.struct("Pure",{bytes:n.$.vector(n.$.u8()).transform({input:e=>"string"==typeof e?(0,a.Gh)(e):e,output:e=>(0,a.s3)(new Uint8Array(e))})}),Object:h}),g=n.$.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:n.$.lazy((()=>g)),struct:n.$.lazy((()=>k)),u16:null,u32:null,u256:null}),b=g.transform({input:e=>"string"==typeof e?c.X.parseFromStr(e,!0):e,output:e=>c.X.tagToString(e)}),m=n.$.enum("Argument",{GasCoin:null,Input:n.$.u16(),Result:n.$.u16(),NestedResult:n.$.tuple([n.$.u16(),n.$.u16()])}),y=n.$.struct("ProgrammableMoveCall",{package:u,module:n.$.string(),function:n.$.string(),typeArguments:n.$.vector(b),arguments:n.$.vector(m)}),w=n.$.enum("Command",{MoveCall:y,TransferObjects:n.$.struct("TransferObjects",{objects:n.$.vector(m),address:m}),SplitCoins:n.$.struct("SplitCoins",{coin:m,amounts:n.$.vector(m)}),MergeCoins:n.$.struct("MergeCoins",{destination:m,sources:n.$.vector(m)}),Publish:n.$.struct("Publish",{modules:n.$.vector(n.$.vector(n.$.u8()).transform({input:e=>"string"==typeof e?(0,a.Gh)(e):e,output:e=>(0,a.s3)(new Uint8Array(e))})),dependencies:n.$.vector(u)}),MakeMoveVec:n.$.struct("MakeMoveVec",{type:(v=b,n.$.enum("Option",{None:null,Some:v})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:n.$.vector(m)}),Upgrade:n.$.struct("Upgrade",{modules:n.$.vector(n.$.vector(n.$.u8()).transform({input:e=>"string"==typeof e?(0,a.Gh)(e):e,output:e=>(0,a.s3)(new Uint8Array(e))})),dependencies:n.$.vector(u),package:u,ticket:m})});var v;const j=n.$.struct("ProgrammableTransaction",{inputs:n.$.vector(f),commands:n.$.vector(w)}),O=n.$.enum("TransactionKind",{ProgrammableTransaction:j,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),S=n.$.enum("TransactionExpiration",{None:null,Epoch:n.$.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})});const k=n.$.struct("StructTag",{address:u,module:n.$.string(),name:n.$.string(),typeParams:n.$.vector(g)}),I=n.$.struct("GasData",{payment:n.$.vector(d),owner:u,price:n.$.u64(),budget:n.$.u64()}),E=n.$.struct("TransactionDataV1",{kind:O,sender:u,gasData:I,expiration:S}),T=n.$.enum("TransactionData",{V1:E}),P=n.$.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),M=n.$.enum("IntentVersion",{V0:null}),$=n.$.enum("AppId",{Sui:null}),x=n.$.struct("Intent",{scope:P,version:M,appId:$});function C(e){return n.$.struct(`IntentMessage<${e.name}>`,{intent:x,value:e})}const A=n.$.enum("CompressedSignature",{ED25519:n.$.fixedArray(64,n.$.u8()),Secp256k1:n.$.fixedArray(64,n.$.u8()),Secp256r1:n.$.fixedArray(64,n.$.u8()),ZkLogin:n.$.vector(n.$.u8())}),U=n.$.enum("PublicKey",{ED25519:n.$.fixedArray(32,n.$.u8()),Secp256k1:n.$.fixedArray(33,n.$.u8()),Secp256r1:n.$.fixedArray(33,n.$.u8()),ZkLogin:n.$.vector(n.$.u8())}),B=n.$.struct("MultiSigPkMap",{pubKey:U,weight:n.$.u8()}),R=n.$.struct("MultiSigPublicKey",{pk_map:n.$.vector(B),threshold:n.$.u16()}),N=n.$.struct("MultiSig",{sigs:n.$.vector(A),bitmap:n.$.u16(),multisig_pk:R}),z=n.$.vector(n.$.u8()).transform({input:e=>"string"==typeof e?(0,a.Gh)(e):e,output:e=>(0,a.s3)(new Uint8Array(e))}),D=n.$.struct("SenderSignedTransaction",{intentMessage:C(T),txSignatures:n.$.vector(z)}),_=n.$.vector(D,{name:"SenderSignedData"}),V=n.$.struct("PasskeyAuthenticator",{authenticatorData:n.$.vector(n.$.u8()),clientDataJson:n.$.string(),userSignature:n.$.vector(n.$.u8())})},133:(e,t,r)=>{r.d(t,{y:()=>O});var n=r(316340),i=r(921145);const s=n.$.enum("PackageUpgradeError",{UnableToFetchPackage:n.$.struct("UnableToFetchPackage",{packageId:i.kL}),NotAPackage:n.$.struct("NotAPackage",{objectId:i.kL}),IncompatibleUpgrade:null,DigestDoesNotMatch:n.$.struct("DigestDoesNotMatch",{digest:n.$.vector(n.$.u8())}),UnknownUpgradePolicy:n.$.struct("UnknownUpgradePolicy",{policy:n.$.u8()}),PackageIDDoesNotMatch:n.$.struct("PackageIDDoesNotMatch",{packageId:i.kL,ticketId:i.kL})}),a=n.$.struct("ModuleId",{address:i.kL,name:n.$.string()}),o=n.$.struct("MoveLocation",{module:a,function:n.$.u16(),instruction:n.$.u16(),functionName:n.$.option(n.$.string())}),c=n.$.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:n.$.struct("IndexOutOfBounds",{idx:n.$.u16()}),SecondaryIndexOutOfBounds:n.$.struct("SecondaryIndexOutOfBounds",{resultIdx:n.$.u16(),secondaryIdx:n.$.u16()}),InvalidResultArity:n.$.struct("InvalidResultArity",{resultIdx:n.$.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),u=n.$.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),l=n.$.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:n.$.struct("MoveObjectTooBig",{objectSize:n.$.u64(),maxObjectSize:n.$.u64()}),MovePackageTooBig:n.$.struct("MovePackageTooBig",{objectSize:n.$.u64(),maxObjectSize:n.$.u64()}),CircularObjectOwnership:n.$.struct("CircularObjectOwnership",{object:i.kL}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:n.$.option(o),MoveAbort:n.$.tuple([o,n.$.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:n.$.struct("CommandArgumentError",{argIdx:n.$.u16(),kind:c}),TypeArgumentError:n.$.struct("TypeArgumentError",{argumentIdx:n.$.u16(),kind:u}),UnusedValueWithoutDrop:n.$.struct("UnusedValueWithoutDrop",{resultIdx:n.$.u16(),secondaryIdx:n.$.u16()}),InvalidPublicFunctionReturnType:n.$.struct("InvalidPublicFunctionReturnType",{idx:n.$.u16()}),InvalidTransferObject:null,EffectsTooLarge:n.$.struct("EffectsTooLarge",{currentSize:n.$.u64(),maxSize:n.$.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:n.$.struct("PackageUpgradeError",{upgradeError:s}),WrittenObjectsTooLarge:n.$.struct("WrittenObjectsTooLarge",{currentSize:n.$.u64(),maxSize:n.$.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:n.$.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:n.$.vector(i.kL)}),AddressDeniedForCoin:n.$.struct("AddressDeniedForCoin",{address:i.kL,coinType:n.$.string()}),CoinTypeGlobalPause:n.$.struct("CoinTypeGlobalPause",{coinType:n.$.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),d=n.$.enum("ExecutionStatus",{Success:null,Failed:n.$.struct("ExecutionFailed",{error:l,command:n.$.option(n.$.u64())})}),p=n.$.struct("GasCostSummary",{computationCost:n.$.u64(),storageCost:n.$.u64(),storageRebate:n.$.u64(),nonRefundableStorageFee:n.$.u64()}),h=n.$.enum("Owner",{AddressOwner:i.kL,ObjectOwner:i.kL,Shared:n.$.struct("Shared",{initialSharedVersion:n.$.u64()}),Immutable:null}),f=n.$.struct("TransactionEffectsV1",{status:d,executedEpoch:n.$.u64(),gasUsed:p,modifiedAtVersions:n.$.vector(n.$.tuple([i.kL,n.$.u64()])),sharedObjects:n.$.vector(i.Jx),transactionDigest:i.WJ,created:n.$.vector(n.$.tuple([i.Jx,h])),mutated:n.$.vector(n.$.tuple([i.Jx,h])),unwrapped:n.$.vector(n.$.tuple([i.Jx,h])),deleted:n.$.vector(i.Jx),unwrappedThenDeleted:n.$.vector(i.Jx),wrapped:n.$.vector(i.Jx),gasObject:n.$.tuple([i.Jx,h]),eventsDigest:n.$.option(i.WJ),dependencies:n.$.vector(i.WJ)}),g=n.$.tuple([n.$.u64(),i.WJ]),b=n.$.enum("ObjectIn",{NotExist:null,Exist:n.$.tuple([g,h])}),m=n.$.enum("ObjectOut",{NotExist:null,ObjectWrite:n.$.tuple([i.WJ,h]),PackageWrite:g}),y=n.$.enum("IDOperation",{None:null,Created:null,Deleted:null}),w=n.$.struct("EffectsObjectChange",{inputState:b,outputState:m,idOperation:y}),v=n.$.enum("UnchangedSharedKind",{ReadOnlyRoot:g,MutateDeleted:n.$.u64(),ReadDeleted:n.$.u64(),Cancelled:n.$.u64(),PerEpochConfig:null}),j=n.$.struct("TransactionEffectsV2",{status:d,executedEpoch:n.$.u64(),gasUsed:p,transactionDigest:i.WJ,gasObjectIndex:n.$.option(n.$.u32()),eventsDigest:n.$.option(i.WJ),dependencies:n.$.vector(i.WJ),lamportVersion:n.$.u64(),changedObjects:n.$.vector(n.$.tuple([i.kL,w])),unchangedSharedObjects:n.$.vector(n.$.tuple([i.kL,v])),auxDataDigest:n.$.option(i.WJ)}),O=n.$.enum("TransactionEffects",{V1:f,V2:j})},984355:(e,t,r)=>{r.d(t,{$5:()=>a});var n=r(316340),i=r(921145),s=r(133);const a={...n.$,U8:n.$.u8(),U16:n.$.u16(),U32:n.$.u32(),U64:n.$.u64(),U128:n.$.u128(),U256:n.$.u256(),ULEB128:n.$.uleb128(),Bool:n.$.bool(),String:n.$.string(),Address:i.kL,AppId:i.tj,Argument:i.hA,CallArg:i.YQ,CompressedSignature:i.ko,GasData:i.oA,Intent:i.SE,IntentMessage:i.J1,IntentScope:i.GQ,IntentVersion:i.Ow,MultiSig:i.k8,MultiSigPkMap:i.os,MultiSigPublicKey:i.qd,ObjectArg:i.nb,ObjectDigest:i.WJ,ProgrammableMoveCall:i.Qh,ProgrammableTransaction:i.W2,PublicKey:i.nh,SenderSignedData:i.jU,SenderSignedTransaction:i.eO,SharedObjectRef:i._8,StructTag:i.cy,SuiObjectRef:i.Jx,Command:i.mY,TransactionData:i.Ct,TransactionDataV1:i.dy,TransactionExpiration:i.Ls,TransactionKind:i.wz,TypeTag:i.O$,TransactionEffects:s.y,PasskeyAuthenticator:i.jf}},119902:(e,t,r)=>{r.d(t,{X:()=>o});var n=r(15030),i=r(55855);const s=/^vector<(.+)>$/,a=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class o{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(s);if(r)return{vector:o.parseFromStr(r[1],t)};const n=e.match(a);if(n)return{struct:{address:t?(0,i.yT)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:o.parseStructTypeArgs(n[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(0,n.fR)(e).map((e=>o.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${o.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(o.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}},380688:(e,t,r)=>{r.d(t,{u:()=>F});var n=r(675790),i=r(601664),s=r(684819),a=r(313929),o=r(55855);const c=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,u=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,l={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class d extends Error{}class p extends d{constructor(e,t){super(e),this.code=t,this.type=l[t]??"ServerError"}}class h extends d{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var f,g,b,m,y,w,v,j,O,S=e=>{throw TypeError(e)},k=(e,t,r)=>t.has(e)||S("Cannot "+r),I=(e,t,r)=>(k(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),T=(e,t,r,n)=>(k(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),P=(e,t,r)=>(k(e,t,"access private method"),r);const M={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class ${constructor(e,t={}){if(E(this,v),E(this,f,0),E(this,g,0),E(this,b,null),E(this,m,null),E(this,y,new Set),E(this,w,new Map),this.endpoint=e,this.options={...M,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const r=await P(this,v,j).call(this);return new Promise(((n,i)=>{T(this,f,I(this,f)+1),I(this,w).set(I(this,f),{resolve:n,reject:i,timeout:setTimeout((()=>{I(this,w).delete(I(this,f)),i(new Error(`Request timeout: ${e}`))}),this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:I(this,f),method:e,params:t}))})).then((({error:e,result:t})=>{if(e)throw new p(e.message,e.code);return t}))}async subscribe(e){const t=new x(e);return I(this,y).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}f=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakSet,j=function(){return I(this,m)||T(this,m,new Promise((e=>{I(this,b)?.close(),T(this,b,new this.options.WebSocketConstructor(this.endpoint)),I(this,b).addEventListener("open",(()=>{T(this,g,0),e(I(this,b))})),I(this,b).addEventListener("close",(()=>{var e,t;(e=this,t=g,{set _(r){T(e,t,r,undefined)},get _(){return I(e,t,undefined)}})._++,I(this,g)<=this.options.maxReconnects&&setTimeout((()=>{P(this,v,O).call(this)}),this.options.reconnectTimeout)})),I(this,b).addEventListener("message",(({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){return void console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:t}))}if("id"in t&&null!=t.id&&I(this,w).has(t.id)){const{resolve:e,timeout:r}=I(this,w).get(t.id);clearTimeout(r),e(t)}else if("params"in t){const{params:e}=t;I(this,y).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),I(this,m)},O=async function(){return I(this,b)?.close(),T(this,m,null),Promise.allSettled([...I(this,y)].map((e=>e.subscribe(this))))};class x{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var C,A,U,B,R,N=e=>{throw TypeError(e)},z=(e,t,r)=>t.has(e)||N("Cannot "+r),D=(e,t,r)=>(z(e,t,"read from private field"),r?r.call(e):t.get(e)),_=(e,t,r)=>t.has(e)?N("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),V=(e,t,r,n)=>(z(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class K{constructor(e){_(this,B),_(this,C,0),_(this,A),_(this,U),V(this,A,e)}fetch(e,t){const r=D(this,A).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){V(this,C,D(this,C)+1);const t=await this.fetch(D(this,A).rpc?.url??D(this,A).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.24.0","Client-Target-Api-Version":"1.45.0","Client-Request-Method":e.method,...D(this,A).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:D(this,C),method:e.method,params:e.params})});if(!t.ok)throw new h(`Unexpected status code: ${t.status}`,t.status,t.statusText);const r=await t.json();if("error"in r&&null!=r.error)throw new p(r.error.message,r.error.code);return r.result}async subscribe(e){const t=await(this,r=B,n=R,z(this,r,"access private method"),n).call(this).subscribe(e);var r,n;return async()=>!!await t()}}C=new WeakMap,A=new WeakMap,U=new WeakMap,B=new WeakSet,R=function(){if(!D(this,U)){const e=D(this,A).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");V(this,U,new $(D(this,A).websocket?.url??D(this,A).url,{WebSocketConstructor:e,...D(this,A).websocket}))}return D(this,U)};const L=Symbol.for("@mysten/SuiClient");class F{get[L](){return!0}constructor(e){this.transport=e.transport??new K({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,o.uV)((0,o.Fw)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach((e=>{if(!e||!(0,o.uV)((0,o.Fw)(e)))throw new Error(`Invalid Sui Object id ${e}`)})),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,o.iI)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach((e=>{if(!(0,o.iI)(e))throw new Error(`Invalid Transaction digest ${e}`)})),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:i}){const s=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:(0,n.s3)(e),Array.isArray(t)?t:[t],r]});if("WaitForLocalExecution"===i)try{await this.waitForTransaction({digest:s.digest})}catch(e){}return s}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));const{signature:i,bytes:s}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:s,signature:i,...r})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,o.oI)((0,o.yT)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!(0,o.uV)((0,o.Fw)(e)))throw new Error(`Invalid Sui Stake id ${e}`)})),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let t;if((0,a.h)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=(0,n.s3)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=(0,n.s3)(e.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,n.s3)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,o.uV)((0,o.Fw)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=(0,i.Le)(e.digest);return(0,s.NC)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit]});return{hasNextPage:n,nextCursor:r,data:i.map((t=>function(e,t="at"){const r=e.toLowerCase();let n;if(r.includes("@")){if(!c.test(r))throw new Error(`Invalid SuiNS name ${e}`);const[t,i]=r.split("@");n=[...t?t.split("."):[],i]}else{if(!u.test(r))throw new Error(`Invalid SuiNS name ${e}`);n=r.split(".").slice(0,-1)}return"dot"===t?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}(t,e)))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){const i=AbortSignal.timeout(t),s=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(i.reason)))}));for(s.catch((()=>{}));!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch(e){await Promise.race([new Promise((e=>setTimeout(e,r))),s])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}},635787:(e,t,r)=>{function n(e){switch(e){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${e}`)}}r.d(t,{I:()=>n})},889801:(e,t,r)=>{r.d(t,{F:()=>i});var n=r(984355);function i(e,t){return n.$5.IntentMessage(n.$5.fixedArray(t.length,n.$5.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}},441185:(e,t,r)=>{r.d(t,{nh:()=>d,sB:()=>p,yK:()=>l});var n=r(675790),i=r(546275),s=r(590920),a=r(984355),o=r(55855),c=r(889801),u=r(641195);function l(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class d{equals(e){return l(this.toRawBytes(),e.toRawBytes())}toBase64(){return(0,n.s3)(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return(0,n.s3)(e)}verifyWithIntent(e,t,r){const n=(0,c.F)(r,e),s=(0,i.R)(n,{dkLen:32});return this.verify(s,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(a.$5.vector(a.$5.u8()).serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return(0,o.yT)((0,s.ci)((0,i.R)(this.toSuiBytes(),{dkLen:32})).slice(0,2*o.kT))}}function p(e){const t=(0,n.Gh)(e),r=u.ex[t[0]];switch(r){case"ED25519":case"Secp256k1":case"Secp256r1":const n=u.sK[r],i=t.slice(1,t.length-n);return{serializedSignature:e,signatureScheme:r,signature:i,publicKey:t.slice(1+i.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}},641195:(e,t,r)=>{r.d(t,{ex:()=>s,hD:()=>n,sK:()=>i});const n={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},i={ED25519:32,Secp256k1:33,Secp256r1:33},s={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"}},515497:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(675790),i=r(117780),s=r(441185),a=r(641195);class o extends s.nh{constructor(e){if(super(),"string"==typeof e?this.data=(0,n.Gh)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return a.hD.ED25519}async verify(e,t){let r;if("string"==typeof t){const e=(0,s.sB)(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!(0,s.yK)(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return i.UN.verify(r,e,this.toRawBytes())}}o.SIZE=32},281868:(e,t,r)=>{r.d(t,{G:()=>o});var n=r(675790),i=r(882374),s=r(55855),a=r(442745);const o={MoveCall(e){const[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>(0,i.parse)(a.hA,e))),address:(0,i.parse)(a.hA,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:(0,i.parse)(a.hA,e),amounts:t.map((e=>(0,i.parse)(a.hA,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:(0,i.parse)(a.hA,e),sources:t.map((e=>(0,i.parse)(a.hA,e)))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map((e=>"string"==typeof e?e:(0,n.s3)(new Uint8Array(e)))),dependencies:t.map((e=>(0,s.Fw)(e)))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:o})=>({$kind:"Upgrade",Upgrade:{modules:e.map((e=>"string"==typeof e?e:(0,n.s3)(new Uint8Array(e)))),dependencies:t.map((e=>(0,s.Fw)(e))),package:r,ticket:(0,i.parse)(a.hA,o)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>(0,i.parse)(a.hA,e)))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>(0,i.parse)(a.hA,e))):(0,i.parse)(a.hA,t)]))),data:r}})}},69304:(e,t,r)=>{r.d(t,{k:()=>s});var n=r(675790),i=r(55855);const s={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,n.s3)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,i.yT)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,i.yT)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,i.yT)(e)}}})}},313929:(e,t,r)=>{r.d(t,{Y:()=>ve,h:()=>be});var n=r(675790),i=r(763728),s=r(882374),a=r(55855),o=r(281868),c=r(442745),u=r(119902);const l=(0,s.object)({digest:(0,s.string)(),objectId:(0,s.string)(),version:(0,s.union)([(0,s.pipe)((0,s.number)(),(0,s.integer)()),(0,s.string)(),(0,s.bigint)()])}),d=(0,c.O_)({ImmOrOwned:l,Shared:(0,s.object)({objectId:c.t4,initialSharedVersion:c.MA,mutable:(0,s.boolean)()}),Receiving:l}),p=(0,c.O_)({Object:d,Pure:(0,s.array)((0,s.pipe)((0,s.number)(),(0,s.integer)()))}),h=(0,s.union)([(0,s.object)({kind:(0,s.literal)("Input"),index:(0,s.pipe)((0,s.number)(),(0,s.integer)()),value:(0,s.unknown)(),type:(0,s.optional)((0,s.literal)("object"))}),(0,s.object)({kind:(0,s.literal)("Input"),index:(0,s.pipe)((0,s.number)(),(0,s.integer)()),value:(0,s.unknown)(),type:(0,s.literal)("pure")})]),f=(0,s.union)([(0,s.object)({Epoch:(0,s.pipe)((0,s.number)(),(0,s.integer)())}),(0,s.object)({None:(0,s.nullable)((0,s.literal)(!0))})]),g=(0,s.pipe)((0,s.union)([(0,s.number)(),(0,s.string)(),(0,s.bigint)()]),(0,s.check)((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),b=(0,s.union)([(0,s.object)({bool:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({u8:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({u64:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({u128:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({address:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({signer:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({vector:(0,s.lazy)((()=>b))}),(0,s.object)({struct:(0,s.lazy)((()=>m))}),(0,s.object)({u16:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({u32:(0,s.nullable)((0,s.literal)(!0))}),(0,s.object)({u256:(0,s.nullable)((0,s.literal)(!0))})]),m=(0,s.object)({address:(0,s.string)(),module:(0,s.string)(),name:(0,s.string)(),typeParams:(0,s.array)(b)}),y=(0,s.object)({budget:(0,s.optional)(g),price:(0,s.optional)(g),payment:(0,s.optional)((0,s.array)(l)),owner:(0,s.optional)((0,s.string)())}),w=[h,(0,s.object)({kind:(0,s.literal)("GasCoin")}),(0,s.object)({kind:(0,s.literal)("Result"),index:(0,s.pipe)((0,s.number)(),(0,s.integer)())}),(0,s.object)({kind:(0,s.literal)("NestedResult"),index:(0,s.pipe)((0,s.number)(),(0,s.integer)()),resultIndex:(0,s.pipe)((0,s.number)(),(0,s.integer)())})],v=(0,s.union)([...w]),j=(0,s.object)({kind:(0,s.literal)("MoveCall"),target:(0,s.pipe)((0,s.string)(),(0,s.check)((e=>3===e.split("::").length))),typeArguments:(0,s.array)((0,s.string)()),arguments:(0,s.array)(v)}),O=(0,s.object)({kind:(0,s.literal)("TransferObjects"),objects:(0,s.array)(v),address:v}),S=(0,s.object)({kind:(0,s.literal)("SplitCoins"),coin:v,amounts:(0,s.array)(v)}),k=(0,s.object)({kind:(0,s.literal)("MergeCoins"),destination:v,sources:(0,s.array)(v)}),I=(0,s.object)({kind:(0,s.literal)("MakeMoveVec"),type:(0,s.union)([(0,s.object)({Some:b}),(0,s.object)({None:(0,s.nullable)((0,s.literal)(!0))})]),objects:(0,s.array)(v)}),E=[j,O,S,k,(0,s.object)({kind:(0,s.literal)("Publish"),modules:(0,s.array)((0,s.array)((0,s.pipe)((0,s.number)(),(0,s.integer)()))),dependencies:(0,s.array)((0,s.string)())}),(0,s.object)({kind:(0,s.literal)("Upgrade"),modules:(0,s.array)((0,s.array)((0,s.pipe)((0,s.number)(),(0,s.integer)()))),dependencies:(0,s.array)((0,s.string)()),packageId:(0,s.string)(),ticket:v}),I],T=(0,s.union)([...E]);function P(e){const t=e.inputs.map(((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,n.Gh)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map((e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:u.X.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map((e=>M(e,t)))};if(e.MergeCoins)return{kind:"MergeCoins",destination:M(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map((e=>M(e,t)))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map((e=>M(e,t)))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map((e=>Array.from((0,n.Gh)(e)))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:M(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map((e=>M(e,t)))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map((e=>M(e,t))),address:M(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map((e=>Array.from((0,n.Gh)(e)))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:M(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)}))}}function M(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function $(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function x(e){return(0,s.union)(Object.entries(e).map((([e,t])=>(0,s.object)({[e]:t}))))}(0,s.object)({version:(0,s.literal)(1),sender:(0,s.optional)((0,s.string)()),expiration:(0,s.nullish)(f),gasConfig:y,inputs:(0,s.array)(h),transactions:(0,s.array)(T)});const C=x({GasCoin:(0,s.literal)(!0),Input:(0,s.pipe)((0,s.number)(),(0,s.integer)()),Result:(0,s.pipe)((0,s.number)(),(0,s.integer)()),NestedResult:(0,s.tuple)([(0,s.pipe)((0,s.number)(),(0,s.integer)()),(0,s.pipe)((0,s.number)(),(0,s.integer)())])}),A=(0,s.object)({budget:(0,s.nullable)(c.MA),price:(0,s.nullable)(c.MA),owner:(0,s.nullable)(c.Ne),payment:(0,s.nullable)((0,s.array)(c.lK))}),U=(0,s.object)({package:c.t4,module:(0,s.string)(),function:(0,s.string)(),typeArguments:(0,s.array)((0,s.string)()),arguments:(0,s.array)(C)}),B=(0,s.object)({name:(0,s.string)(),inputs:(0,s.record)((0,s.string)(),(0,s.union)([C,(0,s.array)(C)])),data:(0,s.record)((0,s.string)(),(0,s.unknown)())}),R=x({MoveCall:U,TransferObjects:(0,s.object)({objects:(0,s.array)(C),address:C}),SplitCoins:(0,s.object)({coin:C,amounts:(0,s.array)(C)}),MergeCoins:(0,s.object)({destination:C,sources:(0,s.array)(C)}),Publish:(0,s.object)({modules:(0,s.array)(c.Hi),dependencies:(0,s.array)(c.t4)}),MakeMoveVec:(0,s.object)({type:(0,s.nullable)((0,s.string)()),elements:(0,s.array)(C)}),Upgrade:(0,s.object)({modules:(0,s.array)(c.Hi),dependencies:(0,s.array)(c.t4),package:c.t4,ticket:C}),$Intent:B}),N=x({ImmOrOwnedObject:c.lK,SharedObject:(0,s.object)({objectId:c.t4,initialSharedVersion:c.MA,mutable:(0,s.boolean)()}),Receiving:c.lK}),z=x({Object:N,Pure:(0,s.object)({bytes:c.Hi}),UnresolvedPure:(0,s.object)({value:(0,s.unknown)()}),UnresolvedObject:(0,s.object)({objectId:c.t4,version:(0,s.optional)((0,s.nullable)(c.MA)),digest:(0,s.optional)((0,s.nullable)((0,s.string)())),initialSharedVersion:(0,s.optional)((0,s.nullable)(c.MA))})}),D=x({None:(0,s.literal)(!0),Epoch:c.MA}),_=(0,s.object)({version:(0,s.literal)(2),sender:(0,s.nullish)(c.Ne),expiration:(0,s.nullish)(D),gasData:A,inputs:(0,s.array)(z),commands:(0,s.array)(R)});var V=r(69304),K=r(361112),L=r(984355),F=r(316340),G=r(921145);function W(e){switch(e){case"u8":return F.$.u8();case"u16":return F.$.u16();case"u32":return F.$.u32();case"u64":return F.$.u64();case"u128":return F.$.u128();case"u256":return F.$.u256();case"bool":return F.$.bool();case"string":return F.$.string();case"id":case"address":return G.kL}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,r]=t.slice(1);return"vector"===e?F.$.vector(W(r)):F.$.option(W(r))}throw new Error(`Invalid Pure type name: ${e}`)}function q(e){function t(t,r){if("string"==typeof t)return e(W(t).serialize(r));if(t instanceof Uint8Array||(0,i.pF)(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(L.$5.U8.serialize(t)),t.u16=t=>e(L.$5.U16.serialize(t)),t.u32=t=>e(L.$5.U32.serialize(t)),t.u64=t=>e(L.$5.U64.serialize(t)),t.u128=t=>e(L.$5.U128.serialize(t)),t.u256=t=>e(L.$5.U256.serialize(t)),t.bool=t=>e(L.$5.Bool.serialize(t)),t.string=t=>e(L.$5.String.serialize(t)),t.address=t=>e(L.$5.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e(L.$5.vector(W(t)).serialize(r)),t.option=(t,r)=>e(L.$5.option(W(t)).serialize(r)),t}var H=r(601664),J=r(546275);function Z(e){return(0,a.yT)(e).replace("0x","")}class Y{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=L.$5.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return Y.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=L.$5.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");return Y.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return 2===e.version?new Y((0,s.parse)(c.Ct,e)):new Y((0,s.parse)(c.Ct,function(e){return(0,s.parse)(c.Ct,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))??null},inputs:e.inputs.map((e=>{if("Input"===e.kind){if((0,s.is)(p,e.value)){const t=(0,s.parse)(p,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,n.s3)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")})),commands:e.transactions.map((e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?u.X.tagToString(e.type.Some):null,elements:e.objects.map((e=>$(e)))}};case"MergeCoins":return{MergeCoins:{destination:$(e.destination),sources:e.sources.map((e=>$(e)))}};case"MoveCall":{const[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map((e=>$(e)))}}}case"Publish":return{Publish:{modules:e.modules.map((e=>(0,n.s3)(Uint8Array.from(e)))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:$(e.coin),amounts:e.amounts.map((e=>$(e)))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map((e=>$(e))),address:$(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map((e=>(0,n.s3)(Uint8Array.from(e)))),dependencies:e.dependencies,package:e.packageId,ticket:$(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)}))})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const r=Array.from("TransactionData::").map((e=>e.charCodeAt(0))),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,J.R)(n,{dkLen:32})}(0,e);return(0,H.zX)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const n=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:n,commands:i}};if(r)return L.$5.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,c={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:Z(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:Z(this.gasData.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return L.$5.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r)))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map((r=>e(r,t)));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map((r=>e(r,t))),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map((r=>e(r,t)));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map((r=>e(r,t)));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map((r=>e(r,t)));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const r=t.$Intent.inputs;t.$Intent.inputs={};for(const[n,i]of Object.entries(r))t.$Intent.inputs[n]=Array.isArray(i)?i.map((r=>e(r,t))):e(i,t);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${t.$kind}`)}}replaceCommand(e,t){if(!Array.isArray(t))return void(this.commands[e]=t);const r=t.length-1;this.commands.splice(e,1,...t),0!==r&&this.mapArguments((t=>{switch(t.$kind){case"Result":t.Result>e&&(t.Result+=r);break;case"NestedResult":t.NestedResult[0]>e&&(t.NestedResult[0]+=r)}return t}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return Y.getDigestFromBytes(e)}snapshot(){return(0,s.parse)(c.Ct,this)}}function X(e){return"string"==typeof e?(0,a.yT)(e):e.Object?e.Object.ImmOrOwnedObject?(0,a.yT)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,a.yT)(e.Object.Receiving.objectId):(0,a.yT)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,a.yT)(e.UnresolvedObject.objectId):void 0}var Q,ee,te,re,ne,ie,se,ae,oe,ce=e=>{throw TypeError(e)},ue=(e,t,r)=>t.has(e)||ce("Cannot "+r),le=(e,t,r)=>(ue(e,t,"read from private field"),r?r.call(e):t.get(e)),de=(e,t,r)=>t.has(e)?ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pe=(e,t,r,n)=>(ue(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),he=(e,t,r)=>(ue(e,t,"access private method"),r);function fe(e,t=1/0){const r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",NestedResult:[e,t]});return new Proxy({$kind:"Result",Result:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;const i=parseInt(r,10);return Number.isNaN(i)||i<0?void 0:n(i)}})}const ge=Symbol.for("@mysten/transaction");function be(e){return!!e&&"object"==typeof e&&!0===e[ge]}const me={buildPlugins:new Map,serializationPlugins:new Map},ye=Symbol.for("@mysten/transaction/registry");function we(){try{const e=globalThis;return e[ye]||(e[ye]=me),e[ye]}catch(e){return me}}Q=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap,ne=new WeakSet,ie=function(e){return(0,i.pF)(e)?this.pure(e):he(this,ne,se).call(this,e)},se=function(e){return"function"==typeof e?(0,s.parse)(c.hA,e(this)):(0,s.parse)(c.hA,e)},ae=async function(e){if(!e.onlyTransactionKind&&!le(this,re).sender)throw new Error("Missing transaction sender");await he(this,ne,oe).call(this,[...le(this,ee),K.I],e)},oe=async function(e,t){const r=n=>{if(n>=e.length)return()=>{};const i=e[n];return async()=>{const e=r(n+1);let s=!1,a=!1;if(await i(le(this,re),t,(async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0})),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let ve=class e{constructor(){de(this,ne),de(this,Q),de(this,ee),de(this,te,new Map),de(this,re),this.object=function(e){function t(t){return e(t)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[r.object(t)]}),t}((e=>{if("function"==typeof e)return this.object(e(this));if("object"==typeof e&&(0,s.is)(c.hA,e))return e;const t=X(e),r=le(this,re).inputs.find((e=>t===X(e)));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:le(this,re).inputs.indexOf(r),type:"object"}:le(this,re).addInput("object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,a.yT)(e)}}:e)}));const e=we();pe(this,re,new Y),pe(this,ee,[...e.buildPlugins.values()]),pe(this,Q,[...e.serializationPlugins.values()])}static fromKind(t){const r=new e;return pe(r,re,Y.fromKindBytes("string"==typeof t?(0,n.Gh)(t):t)),r}static from(t){const r=new e;return be(t)?pe(r,re,new Y(t.getData())):"string"==typeof t&&t.startsWith("{")?pe(r,re,Y.restore(JSON.parse(t))):pe(r,re,Y.fromBytes("string"==typeof t?(0,n.Gh)(t):t)),r}static registerGlobalSerializationPlugin(e,t){we().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){we().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){we().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){we().buildPlugins.delete(e)}addSerializationPlugin(e){le(this,Q).push(e)}addBuildPlugin(e){le(this,ee).push(e)}addIntentResolver(e,t){if(le(this,te).has(e)&&le(this,te).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);le(this,te).set(e,t)}setSender(e){le(this,re).sender=e}setSenderIfNotSet(e){le(this,re).sender||(le(this,re).sender=e)}setExpiration(e){le(this,re).expiration=e?(0,s.parse)(c.Ls,e):null}setGasPrice(e){le(this,re).gasConfig.price=String(e)}setGasBudget(e){le(this,re).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==le(this,re).gasData.budget&&(le(this,re).gasConfig.budget=String(e))}setGasOwner(e){le(this,re).gasConfig.owner=e}setGasPayment(e){le(this,re).gasConfig.payment=e.map((e=>(0,s.parse)(c.lK,e)))}get blockData(){return P(le(this,re).snapshot())}getData(){return le(this,re).snapshot()}get[ge](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:q((e=>(0,i.pF)(e)?le(this,re).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):le(this,re).addInput("pure",(0,s.is)(c.r5,e)?(0,s.parse)(c.r5,e):e instanceof Uint8Array?V.k.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(V.k.ObjectRef(...e))}receivingRef(...e){return this.object(V.k.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(V.k.SharedObjectRef(...e))}add(e){return"function"==typeof e?e(this):fe(le(this,re).commands.push(e)-1)}splitCoins(e,t){const r=o.G.SplitCoins("string"==typeof e?this.object(e):he(this,ne,se).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):he(this,ne,ie).call(this,e))));return fe(le(this,re).commands.push(r)-1,t.length)}mergeCoins(e,t){return this.add(o.G.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(o.G.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(o.G.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(o.G.MoveCall({...t,arguments:e?.map((e=>he(this,ne,ie).call(this,e)))}))}transferObjects(e,t){return this.add(o.G.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):he(this,ne,ie).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(o.G.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify(P(le(this,re).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify((0,s.parse)(_,le(this,re).snapshot()),((e,t)=>"bigint"==typeof t?t.toString():t),2)}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}async build(e={}){return await this.prepareForSerialization(e),await he(this,ne,ae).call(this,e),le(this,re).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await he(this,ne,ae).call(this,e),le(this,re).getDigest()}async prepareForSerialization(e){const t=new Set;for(const e of le(this,re).commands)e.$Intent&&t.add(e.$Intent.name);const r=[...le(this,Q)];for(const n of t)if(!e.supportedIntents?.includes(n)){if(!le(this,te).has(n))throw new Error(`Missing intent resolver for ${n}`);r.push(le(this,te).get(n))}await he(this,ne,oe).call(this,r,e)}}},442745:(e,t,r)=>{r.d(t,{Ct:()=>O,Hi:()=>c,Ls:()=>j,MA:()=>u,Ne:()=>a,O_:()=>s,hA:()=>d,lK:()=>l,r5:()=>v,t4:()=>o});var n=r(882374),i=r(55855);function s(e){const t=Object.entries(e).map((([e,t])=>(0,n.object)({[e]:t})));return(0,n.pipe)((0,n.union)(t),(0,n.transform)((e=>({...e,$kind:Object.keys(e)[0]}))))}const a=(0,n.pipe)((0,n.string)(),(0,n.transform)((e=>(0,i.yT)(e))),(0,n.check)(i.oI)),o=a,c=(0,n.string)(),u=(0,n.pipe)((0,n.union)([(0,n.string)(),(0,n.pipe)((0,n.number)(),(0,n.integer)())]),(0,n.check)((e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),l=(0,n.object)({objectId:a,version:u,digest:(0,n.string)()}),d=(0,n.pipe)((0,n.union)([(0,n.object)({GasCoin:(0,n.literal)(!0)}),(0,n.object)({Input:(0,n.pipe)((0,n.number)(),(0,n.integer)()),type:(0,n.optional)((0,n.literal)("pure"))}),(0,n.object)({Input:(0,n.pipe)((0,n.number)(),(0,n.integer)()),type:(0,n.optional)((0,n.literal)("object"))}),(0,n.object)({Result:(0,n.pipe)((0,n.number)(),(0,n.integer)())}),(0,n.object)({NestedResult:(0,n.tuple)([(0,n.pipe)((0,n.number)(),(0,n.integer)()),(0,n.pipe)((0,n.number)(),(0,n.integer)())])})]),(0,n.transform)((e=>({...e,$kind:Object.keys(e)[0]})))),p=(0,n.object)({budget:(0,n.nullable)(u),price:(0,n.nullable)(u),owner:(0,n.nullable)(a),payment:(0,n.nullable)((0,n.array)(l))}),h=((0,n.object)({address:(0,n.string)(),module:(0,n.string)(),name:(0,n.string)(),typeParams:(0,n.array)((0,n.string)())}),(0,n.union)([(0,n.literal)("address"),(0,n.literal)("bool"),(0,n.literal)("u8"),(0,n.literal)("u16"),(0,n.literal)("u32"),(0,n.literal)("u64"),(0,n.literal)("u128"),(0,n.literal)("u256"),(0,n.object)({vector:(0,n.lazy)((()=>h))}),(0,n.object)({datatype:(0,n.object)({package:(0,n.string)(),module:(0,n.string)(),type:(0,n.string)(),typeParameters:(0,n.array)((0,n.lazy)((()=>h)))})}),(0,n.object)({typeParameter:(0,n.pipe)((0,n.number)(),(0,n.integer)())})])),f=(0,n.object)({ref:(0,n.nullable)((0,n.union)([(0,n.literal)("&"),(0,n.literal)("&mut")])),body:h}),g=(0,n.object)({package:o,module:(0,n.string)(),function:(0,n.string)(),typeArguments:(0,n.array)((0,n.string)()),arguments:(0,n.array)(d),_argumentTypes:(0,n.optional)((0,n.nullable)((0,n.array)(f)))}),b=(0,n.object)({name:(0,n.string)(),inputs:(0,n.record)((0,n.string)(),(0,n.union)([d,(0,n.array)(d)])),data:(0,n.record)((0,n.string)(),(0,n.unknown)())}),m=s({MoveCall:g,TransferObjects:(0,n.object)({objects:(0,n.array)(d),address:d}),SplitCoins:(0,n.object)({coin:d,amounts:(0,n.array)(d)}),MergeCoins:(0,n.object)({destination:d,sources:(0,n.array)(d)}),Publish:(0,n.object)({modules:(0,n.array)(c),dependencies:(0,n.array)(o)}),MakeMoveVec:(0,n.object)({type:(0,n.nullable)((0,n.string)()),elements:(0,n.array)(d)}),Upgrade:(0,n.object)({modules:(0,n.array)(c),dependencies:(0,n.array)(o),package:o,ticket:d}),$Intent:b}),y=s({ImmOrOwnedObject:l,SharedObject:(0,n.object)({objectId:o,initialSharedVersion:u,mutable:(0,n.boolean)()}),Receiving:l}),w=s({Object:y,Pure:(0,n.object)({bytes:c}),UnresolvedPure:(0,n.object)({value:(0,n.unknown)()}),UnresolvedObject:(0,n.object)({objectId:o,version:(0,n.optional)((0,n.nullable)(u)),digest:(0,n.optional)((0,n.nullable)((0,n.string)())),initialSharedVersion:(0,n.optional)((0,n.nullable)(u))})}),v=s({Object:y,Pure:(0,n.object)({bytes:c})}),j=s({None:(0,n.literal)(!0),Epoch:u}),O=(0,n.object)({version:(0,n.literal)(2),sender:(0,n.nullish)(a),expiration:(0,n.nullish)(j),gasData:p,inputs:(0,n.array)(w),commands:(0,n.array)(m)})},684142:(e,t,r)=>{r.d(t,{R:()=>d});var n=r(882374),i=r(984355),s=r(55855),a=r(281868),o=r(69304),c=r(361112);const u="CoinWithBalance",l=(0,s.kX)("0x2::sui::SUI");function d({type:e=l,balance:t,useGasCoin:r=!0}){return n=>{n.addIntentResolver(u,h);const i="gas"===e?e:(0,s.kX)(e);return n.add(a.G.Intent({name:u,inputs:{},data:{type:i===l&&r?"gas":i,balance:BigInt(t)}}))}}const p=(0,n.object)({type:(0,n.string)(),balance:(0,n.bigint)()});async function h(e,t,r){const s=new Set,l=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const t of e.commands)if("$Intent"===t.$kind&&t.$Intent.name===u){const{type:e,balance:r}=(0,n.parse)(p,t.$Intent.data);"gas"!==e&&r>0n&&s.add(e),l.set(e,(l.get(e)??0n)+r)}const d=new Set;for(const t of e.inputs)t.Object?.ImmOrOwnedObject&&d.add(t.Object.ImmOrOwnedObject.objectId),t.UnresolvedObject?.objectId&&d.add(t.UnresolvedObject.objectId);const h=new Map,f=(0,c.s)(t);await Promise.all([...s].map((async t=>{h.set(t,await async function({coinType:e,balance:t,client:r,owner:n,usedIds:i}){let s=t;const a=[];return async function t(o=null){const{data:c,hasNextPage:u,nextCursor:l}=await r.getCoins({owner:n,coinType:e,cursor:o}),d=c.sort(((e,t)=>Number(BigInt(t.balance)-BigInt(e.balance))));for(const e of d){if(i.has(e.coinObjectId))continue;const t=BigInt(e.balance);if(a.push(e),s-=t,s<=0)return a}if(u)return t(l);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}()}({coinType:t,balance:l.get(t),client:f,owner:e.sender,usedIds:d}))})));const g=new Map;g.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[t,r]of e.commands.entries()){if("$Intent"!==r.$kind||r.$Intent.name!==u)continue;const{type:n,balance:s}=r.$Intent.data;if(0n===s){e.replaceCommand(t,a.G.MoveCall({target:"0x2::coin::zero",typeArguments:[n]}));continue}const c=[];if(!g.has(n)){const[t,...r]=h.get(n).map((t=>e.addInput("object",o.k.ObjectRef({objectId:t.coinObjectId,digest:t.digest,version:t.version}))));r.length>0&&c.push(a.G.MergeCoins(t,r)),g.set(n,t)}c.push(a.G.SplitCoins(g.get(n),[e.addInput("pure",o.k.Pure(i.$5.u64().serialize(s)))])),e.replaceCommand(t,c),e.mapArguments((e=>"Result"===e.$kind&&e.Result===t?{$kind:"NestedResult",NestedResult:[t+c.length-1,0]}:e))}return r()}},361112:(e,t,r)=>{r.d(t,{s:()=>E,I:()=>O});var n=r(882374),i=r(984355),s=r(341478),a=r(55855),o=r(442745),c=r(69304);const u="object",l="ID",d="ascii",p="String",h="string",f="String",g="option",b="Option";function m(e){if("string"==typeof e)switch(e){case"address":return i.$5.Address;case"bool":return i.$5.Bool;case"u8":return i.$5.U8;case"u16":return i.$5.U16;case"u32":return i.$5.U32;case"u64":return i.$5.U64;case"u128":return i.$5.U128;case"u256":return i.$5.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return i.$5.vector(i.$5.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=m(e.vector);return t?i.$5.vector(t):null}if("datatype"in e){const t=(0,a.yT)(e.datatype.package);if(t===(0,a.yT)(s.ht)){if(e.datatype.module===d&&e.datatype.type===p)return i.$5.String;if(e.datatype.module===h&&e.datatype.type===f)return i.$5.String;if(e.datatype.module===g&&e.datatype.type===b){const t=m(e.datatype.typeParameters[0]);return t?i.$5.vector(t):null}}if(t===(0,a.yT)(s.Nf)&&e.datatype.module===u&&e.datatype.type===l)return i.$5.Address}return null}function y(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:y(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(y)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}const w=50,v=1000n,j=5e10;async function O(e,t,r){return await async function(e,t){const{inputs:r,commands:n}=e,s=[],o=new Set;n.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject))){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;o.add(e),s.push(t.MoveCall)}}switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{S(t,i.$5.U64,e)}));break;case"TransferObjects":S(t.TransferObjects.address,i.$5.Address,e)}}));const u=new Map;if(o.size>0){const e=E(t);await Promise.all([...o].map((async t=>{const[r,n,i]=t.split("::"),s=await e.getNormalizedMoveFunction({package:r,module:n,function:i});u.set(t,s.parameters.map((e=>{return"object"==typeof(t=e)&&"Reference"in t?{ref:"&",body:y(t.Reference)}:"object"==typeof t&&"MutableReference"in t?{ref:"&mut",body:y(t.MutableReference)}:{ref:null,body:y(t)};var t})))})))}s.length&&await Promise.all(s.map((async e=>{const t=u.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const r=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,a.yT)(t.package)===(0,a.yT)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r}))),n.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${n}`);i.forEach(((e,n)=>{const i=t.arguments[n];if("Input"!==i.$kind)return;const s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=m(e.body);if(o)return i.type="pure",void(r[r.indexOf(s)]=c.k.Pure(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const u=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=u}))}}))}(e,t),await async function(e,t){const r=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),n=[...new Set(r.map((e=>(0,a.Fw)(e.UnresolvedObject.objectId))))],i=n.length?(l=n,d=w,Array.from({length:Math.ceil(l.length/d)},((e,t)=>l.slice(t*d,t*d+d)))):[],s=(await Promise.all(i.map((e=>E(t).multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),o=new Map(n.map(((e,t)=>[e,s[t]]))),u=Array.from(o).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));var l,d;if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);const p=s.map((e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,r=t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}})),h=new Map(n.map(((e,t)=>[e,p[t]])));for(const[t,r]of e.inputs.entries()){if(!r.UnresolvedObject)continue;let n;const i=(0,a.yT)(r.UnresolvedObject.objectId),s=h.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=c.k.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:k(e,t)}):I(e,t)&&(n=c.k.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??c.k.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}(e,t),t.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await E(t).getReferenceGasPrice()))}(e,t),await async function(e,t){if(e.gasConfig.budget)return;const r=await E(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(j),payment:[]}}})});if("success"!==r.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=v*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(e,t),await async function(e,t){if(!e.gasConfig.payment){const r=(await E(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:s.uq})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!r.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map((e=>(0,n.parse)(o.lK,e)))}}(e,t)),await function(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}(e),await r()}function S(e,t,r){if("Input"!==e.$kind)return;const n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=c.k.Pure(t.serialize(n.UnresolvedPure.value)))}function k(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind||(r=!0)})),r}function I(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const i=t.MoveCall.arguments.indexOf(e);n=t.MoveCall._argumentTypes[i],r="object"==typeof n.body&&"datatype"in n.body&&"0x2"===n.body.datatype.package&&"transfer"===n.body.datatype.module&&"Receiving"===n.body.datatype.type||r}var n})),r}function E(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}},341478:(e,t,r)=>{r.d(t,{Nf:()=>a,ht:()=>s,uq:()=>o,xO:()=>i});var n=r(55855);const i=9,s=(BigInt(1e9),"0x1"),a="0x2",o=((0,n.Fw)("0x6"),`${a}::sui::SUI`);(0,n.Fw)("0x5")},55855:(e,t,r)=>{r.d(t,{$A:()=>l,Fw:()=>h,iI:()=>a,kT:()=>o,kX:()=>d,oI:()=>c,uV:()=>u,yT:()=>p});var n=r(601664),i=r(15030);const s=32;function a(e){try{return(0,n.Le)(e).length===s}catch(e){return!1}}const o=32;function c(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===o}function u(e){return c(e)}function l(e){const[t,r]=e.split("::"),n=e.slice(t.length+r.length+4),s=n.includes("<")?n.slice(0,n.indexOf("<")):n,a=n.includes("<")?(0,i.fR)(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map((e=>function(e){return e.includes("::")?l(e):e}(e.trim()))):[];return{address:p(t),module:r,name:s,typeParams:a}}function d(e){const{address:t,module:r,name:n,typeParams:i}="string"==typeof e?l(e):e;return`${t}::${r}::${n}${i?.length>0?`<${i.map((e=>"string"==typeof e?e:d(e))).join(",")}>`:""}`}function p(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*o,"0")}`}function h(e,t=!1){return p(e,t)}},601664:(e,t,r)=>{r.d(t,{Le:()=>s,zX:()=>i});var n=r(433863);const i=e=>n.Jq.encode(e),s=e=>n.Jq.decode(e)},675790:(e,t,r)=>{function n(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}r.d(t,{Gh:()=>n,s3:()=>s});const i=8192;function s(e){if(e.length<i)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=i){const n=e.slice(r,r+i);t+=String.fromCharCode(...n)}return btoa(t)}},763728:(e,t,r)=>{r.d(t,{ZY:()=>O,bZ:()=>k,mn:()=>y,pF:()=>v,pq:()=>I,sN:()=>S,um:()=>T,ws:()=>E});var n,i,s,a,o=r(601664),c=r(675790),u=r(684819),l=r(835873),d=r(201821),p=r(264088),h=e=>{throw TypeError(e)},f=(e,t,r)=>t.has(e)||h("Cannot "+r),g=(e,t,r)=>(f(e,t,"read from private field"),r?r.call(e):t.get(e)),b=(e,t,r)=>t.has(e)?h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),m=(e,t,r,n)=>(f(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);n=new WeakMap,i=new WeakMap;let y=class e{constructor(e){b(this,n),b(this,i),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),m(this,n,e.write),m(this,i,e.serialize??((e,t)=>{const r=new p.B({initialSize:this.serializedSize(e)??void 0,...t});return g(this,n).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),g(this,n).call(this,e,t)}serialize(e,t){return this.validate(e),new j(this,g(this,i).call(this,e,t))}parse(e){const t=new l.r(e);return this.read(t)}fromHex(e){return this.parse((0,u.H_)(e))}fromBase58(e){return this.parse((0,o.Le)(e))}fromBase64(e){return this.parse((0,c.Gh)(e))}transform({name:t,input:r,output:s,validate:a}){return new e({name:t??this.name,read:e=>s?s(this.read(e)):this.read(e),write:(e,t)=>g(this,n).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>g(this,i).call(this,r?r(e):e,t),validate:e=>{a?.(e),this.validate(r?r(e):e)}})}};const w=Symbol.for("@mysten/serialized-bcs");function v(e){return!!e&&"object"==typeof e&&!0===e[w]}class j{constructor(e,t){b(this,s),b(this,a),m(this,s,e),m(this,a,t)}get[w](){return!0}toBytes(){return g(this,a)}toHex(){return(0,u.NC)(g(this,a))}toBase64(){return(0,c.s3)(g(this,a))}toBase58(){return(0,o.zX)(g(this,a))}parse(){return g(this,s).parse(g(this,a))}}function O({size:e,...t}){return new y({...t,serializedSize:()=>e})}function S({readMethod:e,writeMethod:t,...r}){return O({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function k({readMethod:e,writeMethod:t,...r}){return O({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}function I({serialize:e,...t}){const r=new y({...t,serialize:e,write:(e,t)=>{for(const n of r.serialize(e).toBytes())t.write8(n)}});return r}function E({toBytes:e,fromBytes:t,...r}){return new y({...r,read:e=>{const r=e.readULEB(),n=e.readBytes(r);return t(n)},write:(t,r)=>{const n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{const r=e(t),n=(0,d.u)(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})}function T(e){let t=null;function r(){return t||(t=e()),t}return new y({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}s=new WeakMap,a=new WeakMap},316340:(e,t,r)=>{r.d(t,{$:()=>s});var n=r(763728),i=r(201821);const s={u8:e=>(0,n.sN)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>(0,n.sN)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>(0,n.sN)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e}),u64:e=>(0,n.bZ)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>(0,n.bZ)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>(0,n.bZ)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>(0,n.ZY)({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>(0,n.pq)({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from((0,i.u)(e)),...e}),bytes:(e,t)=>(0,n.ZY)({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,r)=>{const n=new Uint8Array(t);for(let t=0;t<e;t++)r.write8(n[t]??0)},...t,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new n.mn({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const r=new Uint8Array(e);t.writeULEB(r.length);for(let e=0;e<r.length;e++)t.write8(r[e]??0)},...e,serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:(0,i.u)(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>(0,n.ws)({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e}),fixedArray:(e,t,r)=>new n.mn({name:`${t.name}[${e}]`,read:r=>{const n=new Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(const n of e)t.write(n,r)},...r,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>s.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new n.mn({name:`vector<${e.name}>`,read:t=>{const r=t.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{r.writeULEB(t.length);for(const n of t)e.write(n,r)},...t,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}}),tuple:(e,t)=>new n.mn({name:`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){const i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{const r=[];for(const n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...t,validate:r=>{if(t?.validate?.(r),!Array.isArray(r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${r.length}`)}}),struct(e,t,r){const i=Object.entries(t);return new n.mn({name:e,serializedSize:e=>{let t=0;for(const[r,n]of i){const i=n.serializedSize(e[r]);if(null==i)return null;t+=i}return t},read:e=>{const t={};for(const[r,n]of i)t[r]=n.read(e);return t},write:(e,t)=>{for(const[r,n]of i)n.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})},enum(e,t,r){const i=Object.entries(t);return new n.mn({name:e,read:t=>{const r=t.readULEB(),n=i[r];if(!n)throw new TypeError(`Unknown value ${r} for enum ${e}`);const[s,a]=n;return{[s]:a?.read(t)??!0,$kind:s}},write:(e,r)=>{const[n,s]=Object.entries(e).filter((([e])=>Object.hasOwn(t,e)))[0];for(let e=0;e<i.length;e++){const[t,a]=i[e];if(t===n)return r.writeULEB(e),void a?.write(s,r)}},...r,validate:n=>{if(r?.validate?.(n),"object"!=typeof n||null==n)throw new TypeError("Expected object, found "+typeof n);const i=Object.keys(n).filter((e=>void 0!==n[e]&&Object.hasOwn(t,e)));if(1!==i.length)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${e}}`);const[s]=i;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map:(e,t)=>s.vector(s.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[r,n]of e)t.set(r,n);return t}}),lazy:e=>(0,n.um)(e)}},684819:(e,t,r)=>{function n(e){const t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map((e=>parseInt(e,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function i(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}r.d(t,{H_:()=>n,NC:()=>i})},835873:(e,t,r)=>{r.d(t,{r:()=>i});var n=r(201821);class i{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=(0,n.y)(t);return this.shift(i),r}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}},201821:(e,t,r)=>{function n(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}function i(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,0==(128&i))break;r+=7}return{value:t,length:n}}r.d(t,{u:()=>n,y:()=>i})},15030:(e,t,r)=>{r.d(t,{fR:()=>o,zS:()=>a});var n=r(601664),i=r(675790),s=r(684819);function a(e,t){switch(t){case"base58":return(0,n.zX)(e);case"base64":return(0,i.s3)(e);case"hex":return(0,s.NC)(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function o(e,t=["<",">"]){const[r,n]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===r&&a++,o===n&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}},264088:(e,t,r)=>{r.d(t,{B:()=>s});var n=r(201821),i=r(15030);class s{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return a(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return a(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return a(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return(0,n.u)(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,i.zS)(this.toBytes(),e)}}function a(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}},433863:(e,t,r)=>{function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!n(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"==typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function a(e){if("function"!=typeof e)throw new Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw new Error("array expected")}function l(e,t){if(!s(!0,t))throw new Error(`${e}: array of strings expected`)}function d(e,t){if(!s(!1,t))throw new Error(`${e}: array of numbers expected`)}function p(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function h(e){const t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);const n=new Map(t.map(((e,t)=>[e,t])));return{encode:n=>(u(n),n.map((n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]}))),decode:t=>(u(t),t.map((t=>{o("alphabet.decode",t);const r=n.get(t);if(void 0===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})))}}function f(e=""){return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function g(e,t="="){return c(e),o("padding",t),{encode(r){for(l("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function b(e){return a(e),{encode:e=>e,decode:t=>e(t)}}function m(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(e),!e.length)return[];let n=0;const i=[],s=Array.from(e,(e=>{if(c(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){const a=s[i],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const l=u/r;e=u%r;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{Jq:()=>T});const y=(e,t)=>0===t?e:y(t,e%t),w=(e,t)=>e+(t-y(e,t)),v=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function j(e,t,r,n){if(u(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(w(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${w(t,r)}`);let i=0,s=0;const a=v[t],o=v[r]-1,l=[];for(const n of e){if(c(n),n>=a)throw new Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((i>>s-r&o)>>>0);const e=v[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<r-s&o,!n&&s>=t)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function O(e,t=!1){if(c(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(w(8,e)>32||w(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return j(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(j(r,e,8,t)))}}function S(e){return a(e),function(...t){try{return e.apply(null,t)}catch(e){}}}p(O(4),h("0123456789ABCDEF"),f("")),p(O(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g(5),f(""));const k=(p(O(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),p(O(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g(5),f("")),p(O(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),p(O(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),b((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)()),I=(e,t)=>{o("base64",e);const r=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=t?"base64url":"base64";if(e.length>0&&!r.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:n,lastChunkHandling:"strict"})},E=(k||p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g(6),f("")),p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),k||p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g(6),f("")),p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f("")),e=>{return p((c(t=58),{encode:e=>{if(!n(e))throw new Error("radix.encode input should be Uint8Array");return m(Array.from(e),256,t)},decode:e=>(d("radix.decode",e),Uint8Array.from(m(e,t,256)))}),h(e),f(""));var t}),T=E("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),P=(E("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),E("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),p(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f(""))),M=[996825010,642813549,513874426,1027748829,705979059];function $(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<M.length;e++)1==(t>>e&1)&&(r^=M[e]);return r}function x(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=$(i)^r>>5}i=$(i);for(let t=0;t<n;t++)i=$(i)^31&e.charCodeAt(t);for(let e of t)i=$(i)^e;for(let e=0;e<6;e++)i=$(i);return i^=r,P.encode(j([i%v[30]],30,5,!1))}function C(e){const t="bech32"===e?1:734539939,r=O(5),i=r.decode,s=r.encode,a=S(i);function c(e,r,i=90){o("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),d("bech32.encode",r);const s=e.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const a=s+7+r.length;if(!1!==i&&a>i)throw new TypeError(`Length ${a} exceeds limit ${i}`);const c=e.toLowerCase(),u=x(c,r,t);return`${c}1${P.encode(r)}${u}`}function u(e,r=90){o("bech32.decode input",e);const n=e.length;if(n<8||!1!==r&&n>r)throw new TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=P.decode(c).slice(0,-6),l=x(a,u,t);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:a,words:u}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:i(r)}},decodeUnsafe:S(u),fromWords:i,fromWordsUnsafe:a,toWords:s}}C("bech32"),C("bech32m");(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)()||p(O(4),h("0123456789abcdef"),f(""),b((e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})))},32532:(e,t,r)=>{function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,...t){if(!n(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"==typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function a(e){if("function"!=typeof e)throw new Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function c(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function u(e){if(!Array.isArray(e))throw new Error("array expected")}function l(e,t){if(!s(!0,t))throw new Error(`${e}: array of strings expected`)}function d(e,t){if(!s(!1,t))throw new Error(`${e}: array of numbers expected`)}function p(...e){const t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map((e=>e.encode)).reduceRight(r,t),decode:e.map((e=>e.decode)).reduce(r,t)}}function h(e){const t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);const n=new Map(t.map(((e,t)=>[e,t])));return{encode:n=>(u(n),n.map((n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]}))),decode:t=>(u(t),t.map((t=>{o("alphabet.decode",t);const r=n.get(t);if(void 0===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})))}}function f(e=""){return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function g(e,t="="){return c(e),o("padding",t),{encode(r){for(l("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function b(e){return a(e),{encode:e=>e,decode:t=>e(t)}}function m(e,t,r){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(u(e),!e.length)return[];let n=0;const i=[],s=Array.from(e,(e=>{if(c(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),a=s.length;for(;;){let e=0,o=!0;for(let i=n;i<a;i++){const a=s[i],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const l=u/r;e=u%r;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*r+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{L:()=>U,z:()=>A});const y=(e,t)=>0===t?e:y(t,e%t),w=(e,t)=>e+(t-y(e,t)),v=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function j(e,t,r,n){if(u(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(w(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${w(t,r)}`);let i=0,s=0;const a=v[t],o=v[r]-1,l=[];for(const n of e){if(c(n),n>=a)throw new Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((i>>s-r&o)>>>0);const e=v[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<r-s&o,!n&&s>=t)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function O(e,t=!1){if(c(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(w(8,e)>32||w(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return j(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(j(r,e,8,t)))}}function S(e){return a(e),function(...t){try{return e.apply(null,t)}catch(e){}}}p(O(4),h("0123456789ABCDEF"),f("")),p(O(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g(5),f(""));const k=(p(O(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),p(O(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g(5),f("")),p(O(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),p(O(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),b((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),(()=>"function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64)()),I=(e,t)=>{o("base64",e);const r=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,n=t?"base64url":"base64";if(e.length>0&&!r.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:n,lastChunkHandling:"strict"})},E=(k||p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g(6),f("")),p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),k||p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g(6),f("")),p(O(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f("")),e=>{return p((c(t=58),{encode:e=>{if(!n(e))throw new Error("radix.encode input should be Uint8Array");return m(Array.from(e),256,t)},decode:e=>(d("radix.decode",e),Uint8Array.from(m(e,t,256)))}),h(e),f(""));var t}),T=E("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),P=(E("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),E("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),p(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f(""))),M=[996825010,642813549,513874426,1027748829,705979059];function $(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<M.length;e++)1==(t>>e&1)&&(r^=M[e]);return r}function x(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=$(i)^r>>5}i=$(i);for(let t=0;t<n;t++)i=$(i)^31&e.charCodeAt(t);for(let e of t)i=$(i)^e;for(let e=0;e<6;e++)i=$(i);return i^=r,P.encode(j([i%v[30]],30,5,!1))}function C(e){const t="bech32"===e?1:734539939,r=O(5),i=r.decode,s=r.encode,a=S(i);function c(e,r,i=90){o("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),d("bech32.encode",r);const s=e.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const a=s+7+r.length;if(!1!==i&&a>i)throw new TypeError(`Length ${a} exceeds limit ${i}`);const c=e.toLowerCase(),u=x(c,r,t);return`${c}1${P.encode(r)}${u}`}function u(e,r=90){o("bech32.decode input",e);const n=e.length;if(n<8||!1!==r&&n>r)throw new TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),c=i.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=P.decode(c).slice(0,-6),l=x(a,u,t);if(!c.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:a,words:u}}return{encode:c,decode:u,encodeFromBytes:function(e,t){return c(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:i(r)}},decodeUnsafe:S(u),fromWords:i,fromWordsUnsafe:a,toWords:s}}C("bech32"),C("bech32m");const A=((()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)()||p(O(4),h("0123456789abcdef"),f(""),b((e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),e=>T.encode(e)),U=e=>T.decode(e)},232193:(e,t,r)=>{function n(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}r.d(t,{G:()=>n,s:()=>s});const i=8192;function s(e){if(e.length<i)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=i){const n=e.slice(r,r+i);t+=String.fromCharCode(...n)}return btoa(t)}},199544:(e,t,r)=>{function n(e,t){return Array.from({length:Math.ceil(e.length/t)},((r,n)=>e.slice(n*t,(n+1)*t)))}r.d(t,{y:()=>n})},293228:(e,t,r)=>{r.d(t,{R:()=>n});class n{constructor(e,t){if("function"!=typeof e)throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: ${e}.`);this._batchLoadFn=e,this._maxBatchSize=function(e){if(!(!e||!1!==e.batch))return 1;const t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw new TypeError(`maxBatchSize must be a positive number: ${t}`);return t}(t),this._batchScheduleFn=function(e){const t=e&&e.batchScheduleFn;if(void 0===t)return i;if("function"!=typeof t)throw new TypeError(`batchScheduleFn must be a function: ${t}`);return t}(t),this._cacheKeyFn=function(e){const t=e&&e.cacheKeyFn;if(void 0===t)return e=>e;if("function"!=typeof t)throw new TypeError(`cacheKeyFn must be a function: ${t}`);return t}(t),this._cacheMap=function(e){if(!(!e||!1!==e.cache))return null;const t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){const e=["get","set","delete","clear"].filter((e=>t&&"function"!=typeof t[e]));if(0!==e.length)throw new TypeError("Custom cacheMap missing methods: "+e.join(", "))}return t}(t),this._batch=null,this.name=function(e){return e&&e.name?e.name:null}(t)}load(e){if(null==e)throw new TypeError(`The loader.load() function must be called with a value, but got: ${String(e)}.`);const t=function(e){const t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;const r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn((()=>{!function(e,t){if(t.hasDispatched=!0,0===t.keys.length)return void o(t);let r;try{r=e._batchLoadFn(t.keys)}catch(r){return a(e,t,new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: ${String(r)}.`))}if(!r||"function"!=typeof r.then)return a(e,t,new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: ${String(r)}.`));Promise.resolve(r).then((e=>{if(!c(e))throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: ${String(e)}.`);if(e.length!==t.keys.length)throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n${String(t.keys)}\n\nValues:\n${String(e)}`);o(t);for(let r=0;r<t.callbacks.length;r++){const n=e[r];n instanceof Error?t.callbacks[r].reject(n):t.callbacks[r].resolve(n)}})).catch((r=>{a(e,t,r)}))}(e,r)})),r}(this),r=this._cacheMap;let n;if(r){n=this._cacheKeyFn(e);const i=r.get(n);if(i){const e=t.cacheHits||(t.cacheHits=[]);return new Promise((t=>{e.push((()=>{t(i)}))}))}}t.keys.push(e);const i=new Promise(((e,r)=>{t.callbacks.push({resolve:e,reject:r})}));return r&&r.set(n,i),i}loadMany(e){if(!c(e))throw new TypeError(`The loader.loadMany() function must be called with Array<key>, but got: ${e}.`);const t=[];for(let r=0;r<e.length;r++)t.push(this.load(e[r]).catch((e=>e)));return Promise.all(t)}clear(e){const t=this._cacheMap;if(t){const r=this._cacheKeyFn(e);t.delete(r)}return this}clearAll(){const e=this._cacheMap;return e&&e.clear(),this}prime(e,t){const r=this._cacheMap;if(r){const n=this._cacheKeyFn(e);if(void 0===r.get(n)){let e;t instanceof Error?(e=Promise.reject(t),e.catch((()=>{}))):e=Promise.resolve(t),r.set(n,e)}}return this}}const i="function"==typeof{env:{__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0",BACKPACK_ENV:"production",BACKPACK_CONFIG_LOG_LEVEL:"none",BACKPACK_CONFIG_VERSION:"0.10.190-2"}}.nextTick?function(e){s||(s=Promise.resolve()),s.then((()=>{({env:{__DEV__:!1,IS_STATIC:"",NODE_ENV:"production",TAMAGUI_TARGET:"web",DEBUG:"0",BACKPACK_ENV:"production",BACKPACK_CONFIG_LOG_LEVEL:"none",BACKPACK_CONFIG_VERSION:"0.10.190-2"}}).nextTick(e)}))}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};let s;function a(e,t,r){o(t);for(let n=0;n<t.keys.length;n++)e.clear(t.keys[n]),t.callbacks[n].reject(r)}function o(e){if(e.cacheHits)for(let t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function c(e){return"object"==typeof e&&null!==e&&"length"in e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}},67121:(e,t,r)=>{function n(e){const t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map((e=>parseInt(e,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function i(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}r.d(t,{H:()=>n,N:()=>i})},525006:(e,t,r)=>{r.d(t,{fR:()=>o,zS:()=>a});var n=r(32532),i=r(232193),s=r(67121);function a(e,t){switch(t){case"base58":return(0,n.z)(e);case"base64":return(0,i.s)(e);case"hex":return(0,s.N)(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function o(e,t=["<",">"]){const[r,n]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===r&&a++,o===n&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}},460346:(e,t,r)=>{r.d(t,{Y:()=>wn});var n=r(232193),i=r(67121),s=r(32532);function a(e){let t=BigInt(e);const r=[];let n=0;if(0n===t)return[0];for(;t>0;)r[n]=Number(0x7fn&t),t>>=7n,t>0n&&(r[n]|=128),n+=1;return r}class o{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){const e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){const e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){const t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=function(e){let t=0n,r=0n,n=0;for(;;){if(n>=e.length)throw new Error("ULEB decode error: buffer overflow");const i=e[n];if(n+=1,t+=BigInt(127&i)<<r,0==(128&i))break;r+=7n}if(t>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("ULEB decode error: value exceeds MAX_SAFE_INTEGER");return{value:Number(t),length:n}}(t);return this.shift(n),r}readVec(e){const t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}var c=r(525006);class u{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,Math.max(this.size+t,this.size+this.allocateSize));if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}writeBytes(e){this.ensureSizeOrGrow(e.length);for(let t=0;t<e.length;t++)this.dataView.setUint8(this.bytePosition+t,e[t]);return this.shift(e.length)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return l(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return l(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return l(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return a(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,c.zS)(this.toBytes(),e)}}function l(e,t){const r=new Uint8Array(t);let n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var d,p,h,f,g=e=>{throw TypeError(e)},b=(e,t,r)=>t.has(e)||g("Cannot "+r),m=(e,t,r)=>(b(e,t,"read from private field"),r?r.call(e):t.get(e)),y=(e,t,r)=>t.has(e)?g("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),w=(e,t,r,n)=>(b(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);d=new WeakMap,p=new WeakMap;let v=class e{constructor(e){y(this,d),y(this,p),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),w(this,d,e.write),w(this,p,e.serialize??((e,t)=>{const r=new u({initialSize:this.serializedSize(e)??void 0,...t});return m(this,d).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),m(this,d).call(this,e,t)}serialize(e,t){return this.validate(e),new S(this,m(this,p).call(this,e,t))}parse(e){const t=new o(e);return this.read(t)}fromHex(e){return this.parse((0,i.H)(e))}fromBase58(e){return this.parse((0,s.L)(e))}fromBase64(e){return this.parse((0,n.G)(e))}transform({name:t,input:r,output:n,validate:i}){return new e({name:t??this.name,read:e=>n?n(this.read(e)):this.read(e),write:(e,t)=>m(this,d).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>m(this,p).call(this,r?r(e):e,t),validate:e=>{i?.(e),this.validate(r?r(e):e)}})}};const j=Symbol.for("@mysten/serialized-bcs");function O(e){return!!e&&"object"==typeof e&&!0===e[j]}class S{constructor(e,t){y(this,h),y(this,f),w(this,h,e),w(this,f,t)}get[j](){return!0}toBytes(){return m(this,f)}toHex(){return(0,i.N)(m(this,f))}toBase64(){return(0,n.s)(m(this,f))}toBase58(){return(0,s.z)(m(this,f))}parse(){return m(this,h).parse(m(this,f))}}function k({size:e,...t}){return new v({...t,serializedSize:()=>e})}function I({readMethod:e,writeMethod:t,...r}){return k({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function E({readMethod:e,writeMethod:t,...r}){return k({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}h=new WeakMap,f=new WeakMap;class T extends v{constructor({name:e,fields:t,...r}){const n=Object.entries(t);super({name:e,serializedSize:e=>{let t=0;for(const[r,i]of n){const n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{const t={};for(const[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(const[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})}}class P extends v{constructor({fields:e,...t}){const r=Object.entries(e);super({read:e=>{const n=e.readULEB(),i=r[n];if(!i)throw new TypeError(`Unknown value ${n} for enum ${t.name}`);const[s,a]=i;return{[s]:a?.read(e)??!0,$kind:s}},write:(t,n)=>{const[i,s]=Object.entries(t).filter((([t])=>Object.hasOwn(e,t)))[0];for(let e=0;e<r.length;e++){const[t,a]=r[e];if(t===i)return n.writeULEB(e),void a?.write(s,n)}},...t,validate:r=>{if(t?.validate?.(r),"object"!=typeof r||null==r)throw new TypeError("Expected object, found "+typeof r);const n=Object.keys(r).filter((t=>void 0!==r[t]&&Object.hasOwn(e,t)));if(1!==n.length)throw new TypeError(`Expected object with one key, but found ${n.length} for type ${t.name}}`);const[i]=n;if(!Object.hasOwn(e,i))throw new TypeError(`Invalid enum variant ${i}`)}})}}class M extends v{constructor({fields:e,name:t,...r}){super({name:t??`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){const i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{const r=[];for(const n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...r,validate:t=>{if(r?.validate?.(t),!Array.isArray(t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${t.length}`)}})}}var $=r(882374),x=r(721039);function C(e){const t=Object.entries(e).map((([e,t])=>(0,$.object)({[e]:t})));return(0,$.pipe)((0,$.union)(t),(0,$.transform)((e=>({...e,$kind:Object.keys(e)[0]}))))}const A=(0,$.pipe)((0,$.string)(),(0,$.transform)((e=>(0,x.yT)(e))),(0,$.check)(x.oI)),U=A,B=(0,$.string)(),R=(0,$.pipe)((0,$.union)([(0,$.string)(),(0,$.pipe)((0,$.number)(),(0,$.integer)())]),(0,$.check)((e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),N=(0,$.object)({objectId:A,version:R,digest:(0,$.string)()}),z=(0,$.pipe)((0,$.union)([(0,$.object)({GasCoin:(0,$.literal)(!0)}),(0,$.object)({Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),type:(0,$.optional)((0,$.literal)("pure"))}),(0,$.object)({Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),type:(0,$.optional)((0,$.literal)("object"))}),(0,$.object)({Result:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({NestedResult:(0,$.tuple)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.pipe)((0,$.number)(),(0,$.integer)())])})]),(0,$.transform)((e=>({...e,$kind:Object.keys(e)[0]})))),D=(0,$.object)({budget:(0,$.nullable)(R),price:(0,$.nullable)(R),owner:(0,$.nullable)(A),payment:(0,$.nullable)((0,$.array)(N))}),_=((0,$.object)({address:(0,$.string)(),module:(0,$.string)(),name:(0,$.string)(),typeParams:(0,$.array)((0,$.string)())}),(0,$.union)([(0,$.literal)("address"),(0,$.literal)("bool"),(0,$.literal)("u8"),(0,$.literal)("u16"),(0,$.literal)("u32"),(0,$.literal)("u64"),(0,$.literal)("u128"),(0,$.literal)("u256"),(0,$.object)({vector:(0,$.lazy)((()=>_))}),(0,$.object)({datatype:(0,$.object)({package:(0,$.string)(),module:(0,$.string)(),type:(0,$.string)(),typeParameters:(0,$.array)((0,$.lazy)((()=>_)))})}),(0,$.object)({typeParameter:(0,$.pipe)((0,$.number)(),(0,$.integer)())})])),V=(0,$.object)({ref:(0,$.nullable)((0,$.union)([(0,$.literal)("&"),(0,$.literal)("&mut")])),body:_}),K=(0,$.object)({package:U,module:(0,$.string)(),function:(0,$.string)(),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(z),_argumentTypes:(0,$.optional)((0,$.nullable)((0,$.array)(V)))}),L=(0,$.object)({name:(0,$.string)(),inputs:(0,$.record)((0,$.string)(),(0,$.union)([z,(0,$.array)(z)])),data:(0,$.record)((0,$.string)(),(0,$.unknown)())}),F=C({MoveCall:K,TransferObjects:(0,$.object)({objects:(0,$.array)(z),address:z}),SplitCoins:(0,$.object)({coin:z,amounts:(0,$.array)(z)}),MergeCoins:(0,$.object)({destination:z,sources:(0,$.array)(z)}),Publish:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U)}),MakeMoveVec:(0,$.object)({type:(0,$.nullable)((0,$.string)()),elements:(0,$.array)(z)}),Upgrade:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U),package:U,ticket:z}),$Intent:L}),G=C({ImmOrOwnedObject:N,SharedObject:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:N}),W=C({Object:G,Pure:(0,$.object)({bytes:B}),UnresolvedPure:(0,$.object)({value:(0,$.unknown)()}),UnresolvedObject:(0,$.object)({objectId:U,version:(0,$.optional)((0,$.nullable)(R)),digest:(0,$.optional)((0,$.nullable)((0,$.string)())),initialSharedVersion:(0,$.optional)((0,$.nullable)(R)),mutable:(0,$.optional)((0,$.nullable)((0,$.boolean)()))})}),q=C({Object:G,Pure:(0,$.object)({bytes:B})}),H=C({None:(0,$.literal)(!0),Epoch:R}),J=(0,$.object)({version:(0,$.literal)(2),sender:(0,$.nullish)(A),expiration:(0,$.nullish)(H),gasData:D,inputs:(0,$.array)(W),commands:(0,$.array)(F)}),Z={MoveCall(e){const[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>(0,$.parse)(z,e))),address:(0,$.parse)(z,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:(0,$.parse)(z,e),amounts:t.map((e=>(0,$.parse)(z,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:(0,$.parse)(z,e),sources:t.map((e=>(0,$.parse)(z,e)))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map((e=>"string"==typeof e?e:(0,n.s)(new Uint8Array(e)))),dependencies:t.map((e=>(0,x.Fw)(e)))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:i})=>({$kind:"Upgrade",Upgrade:{modules:e.map((e=>"string"==typeof e?e:(0,n.s)(new Uint8Array(e)))),dependencies:t.map((e=>(0,x.Fw)(e))),package:r,ticket:(0,$.parse)(z,i)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>(0,$.parse)(z,e)))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>(0,$.parse)(z,e))):(0,$.parse)(z,t)]))),data:r}})},Y=/^vector<(.+)>$/,X=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Q{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(Y);if(r)return{vector:Q.parseFromStr(r[1],t)};const n=e.match(X);if(n)return{struct:{address:t?(0,x.yT)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:Q.parseStructTypeArgs(n[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(0,c.fR)(e).map((e=>Q.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Q.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(Q.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}const ee=(0,$.object)({digest:(0,$.string)(),objectId:(0,$.string)(),version:(0,$.union)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.string)(),(0,$.bigint)()])}),te=C({ImmOrOwned:ee,Shared:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:ee}),re=C({Object:te,Pure:(0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))}),ne=(0,$.union)([(0,$.object)({kind:(0,$.literal)("Input"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),value:(0,$.unknown)(),type:(0,$.optional)((0,$.literal)("object"))}),(0,$.object)({kind:(0,$.literal)("Input"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),value:(0,$.unknown)(),type:(0,$.literal)("pure")})]),ie=(0,$.union)([(0,$.object)({Epoch:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({None:(0,$.nullable)((0,$.literal)(!0))})]),se=(0,$.pipe)((0,$.union)([(0,$.number)(),(0,$.string)(),(0,$.bigint)()]),(0,$.check)((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),ae=(0,$.union)([(0,$.object)({bool:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u8:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u64:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u128:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({address:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({signer:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({vector:(0,$.lazy)((()=>ae))}),(0,$.object)({struct:(0,$.lazy)((()=>oe))}),(0,$.object)({u16:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u32:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u256:(0,$.nullable)((0,$.literal)(!0))})]),oe=(0,$.object)({address:(0,$.string)(),module:(0,$.string)(),name:(0,$.string)(),typeParams:(0,$.array)(ae)}),ce=(0,$.object)({budget:(0,$.optional)(se),price:(0,$.optional)(se),payment:(0,$.optional)((0,$.array)(ee)),owner:(0,$.optional)((0,$.string)())}),ue=[ne,(0,$.object)({kind:(0,$.literal)("GasCoin")}),(0,$.object)({kind:(0,$.literal)("Result"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({kind:(0,$.literal)("NestedResult"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),resultIndex:(0,$.pipe)((0,$.number)(),(0,$.integer)())})],le=(0,$.union)([...ue]),de=(0,$.object)({kind:(0,$.literal)("MoveCall"),target:(0,$.pipe)((0,$.string)(),(0,$.check)((e=>3===e.split("::").length))),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(le)}),pe=(0,$.object)({kind:(0,$.literal)("TransferObjects"),objects:(0,$.array)(le),address:le}),he=(0,$.object)({kind:(0,$.literal)("SplitCoins"),coin:le,amounts:(0,$.array)(le)}),fe=(0,$.object)({kind:(0,$.literal)("MergeCoins"),destination:le,sources:(0,$.array)(le)}),ge=(0,$.object)({kind:(0,$.literal)("MakeMoveVec"),type:(0,$.union)([(0,$.object)({Some:ae}),(0,$.object)({None:(0,$.nullable)((0,$.literal)(!0))})]),objects:(0,$.array)(le)}),be=[de,pe,he,fe,(0,$.object)({kind:(0,$.literal)("Publish"),modules:(0,$.array)((0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))),dependencies:(0,$.array)((0,$.string)())}),(0,$.object)({kind:(0,$.literal)("Upgrade"),modules:(0,$.array)((0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))),dependencies:(0,$.array)((0,$.string)()),packageId:(0,$.string)(),ticket:le}),ge],me=(0,$.union)([...be]);function ye(e){const t=e.inputs.map(((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,n.G)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map((e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:Q.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map((e=>we(e,t)))};if(e.MergeCoins)return{kind:"MergeCoins",destination:we(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map((e=>we(e,t)))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map((e=>we(e,t)))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map((e=>Array.from((0,n.G)(e)))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:we(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map((e=>we(e,t)))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map((e=>we(e,t))),address:we(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map((e=>Array.from((0,n.G)(e)))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:we(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)}))}}function we(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function ve(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function je(e){return(0,$.union)(Object.entries(e).map((([e,t])=>(0,$.object)({[e]:t}))))}(0,$.object)({version:(0,$.literal)(1),sender:(0,$.optional)((0,$.string)()),expiration:(0,$.nullish)(ie),gasConfig:ce,inputs:(0,$.array)(ne),transactions:(0,$.array)(me)});const Oe=je({GasCoin:(0,$.literal)(!0),Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),Result:(0,$.pipe)((0,$.number)(),(0,$.integer)()),NestedResult:(0,$.tuple)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.pipe)((0,$.number)(),(0,$.integer)())])}),Se=(0,$.object)({budget:(0,$.nullable)(R),price:(0,$.nullable)(R),owner:(0,$.nullable)(A),payment:(0,$.nullable)((0,$.array)(N))}),ke=(0,$.object)({package:U,module:(0,$.string)(),function:(0,$.string)(),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(Oe)}),Ie=(0,$.object)({name:(0,$.string)(),inputs:(0,$.record)((0,$.string)(),(0,$.union)([Oe,(0,$.array)(Oe)])),data:(0,$.record)((0,$.string)(),(0,$.unknown)())}),Ee=je({MoveCall:ke,TransferObjects:(0,$.object)({objects:(0,$.array)(Oe),address:Oe}),SplitCoins:(0,$.object)({coin:Oe,amounts:(0,$.array)(Oe)}),MergeCoins:(0,$.object)({destination:Oe,sources:(0,$.array)(Oe)}),Publish:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U)}),MakeMoveVec:(0,$.object)({type:(0,$.nullable)((0,$.string)()),elements:(0,$.array)(Oe)}),Upgrade:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U),package:U,ticket:Oe}),$Intent:Ie}),Te=je({ImmOrOwnedObject:N,SharedObject:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:N}),Pe=je({Object:Te,Pure:(0,$.object)({bytes:B}),UnresolvedPure:(0,$.object)({value:(0,$.unknown)()}),UnresolvedObject:(0,$.object)({objectId:U,version:(0,$.optional)((0,$.nullable)(R)),digest:(0,$.optional)((0,$.nullable)((0,$.string)())),initialSharedVersion:(0,$.optional)((0,$.nullable)(R)),mutable:(0,$.optional)((0,$.nullable)((0,$.boolean)()))})}),Me=je({None:(0,$.literal)(!0),Epoch:R}),$e=(0,$.object)({version:(0,$.literal)(2),sender:(0,$.nullish)(A),expiration:(0,$.nullish)(Me),gasData:Se,inputs:(0,$.array)(Pe),commands:(0,$.array)(Ee),digest:(0,$.optional)((0,$.nullable)((0,$.string)()))}),xe={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,n.s)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,x.yT)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,x.yT)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,x.yT)(e)}}})},Ce={u8:e=>I({readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e,name:e?.name??"u8"}),u16:e=>I({readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e,name:e?.name??"u16"}),u32:e=>I({readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e,name:e?.name??"u32"}),u64:e=>E({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e,name:e?.name??"u64"}),u128:e=>E({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e,name:e?.name??"u128"}),u256:e=>E({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e,name:e?.name??"u256"}),bool:e=>k({size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,name:e?.name??"bool",validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function({serialize:e,...t}){const r=new v({...t,serialize:e,write:(e,t)=>{for(const n of r.serialize(e).toBytes())t.write8(n)}});return r}({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(a(e)),...e,name:e?.name??"uleb128"}),bytes:(e,t)=>k({size:e,read:t=>t.readBytes(e),write:(e,t)=>{t.writeBytes(new Uint8Array(e))},...t,name:t?.name??`bytes[${e}]`,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new v({read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const r=new Uint8Array(e);t.writeULEB(r.length),t.writeBytes(r)},...e,name:e?.name??"vector<u8>",serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:a(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>function({toBytes:e,fromBytes:t,...r}){return new v({...r,read:e=>{const r=e.readULEB(),n=e.readBytes(r);return t(n)},write:(t,r)=>{const n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{const r=e(t),n=a(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})}({toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e,name:e?.name??"string"}),fixedArray:function(e,t,r){return new v({read:r=>{const n=new Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(const n of e)t.write(n,r)},...r,name:r?.name??`${t.name}[${e}]`,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}})},option:function(e){return Ce.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null})},vector:function(e,t){return new v({read:t=>{const r=t.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{r.writeULEB(t.length);for(const n of t)e.write(n,r)},...t,name:t?.name??`vector<${e.name}>`,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}})},tuple:(e,t)=>new M({fields:e,...t}),struct:(e,t,r)=>new T({name:e,fields:t,...r}),enum:(e,t,r)=>new P({name:e,fields:t,...r}),map:function(e,t){return Ce.vector(Ce.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[r,n]of e)t.set(r,n);return t}})},lazy:e=>function(e){let t=null;function r(){return t||(t=e()),t}return new v({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}(e)},Ae=Ce.bytes(x.kT).transform({validate:e=>{const t="string"==typeof e?e:(0,i.N)(e);if(!t||!(0,x.oI)((0,x.yT)(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,i.H)((0,x.yT)(e)):e,output:e=>(0,x.yT)((0,i.N)(e))}),Ue=Ce.byteVector().transform({name:"ObjectDigest",input:e=>(0,s.L)(e),output:e=>(0,s.z)(new Uint8Array(e)),validate:e=>{if(32!==(0,s.L)(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),Be=Ce.struct("SuiObjectRef",{objectId:Ae,version:Ce.u64(),digest:Ue}),Re=Ce.struct("SharedObjectRef",{objectId:Ae,initialSharedVersion:Ce.u64(),mutable:Ce.bool()}),Ne=Ce.enum("ObjectArg",{ImmOrOwnedObject:Be,SharedObject:Re,Receiving:Be}),ze=Ce.enum("Owner",{AddressOwner:Ae,ObjectOwner:Ae,Shared:Ce.struct("Shared",{initialSharedVersion:Ce.u64()}),Immutable:null,ConsensusAddressOwner:Ce.struct("ConsensusAddressOwner",{owner:Ae,startVersion:Ce.u64()})}),De=Ce.enum("CallArg",{Pure:Ce.struct("Pure",{bytes:Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})}),Object:Ne}),_e=Ce.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:Ce.lazy((()=>_e)),struct:Ce.lazy((()=>Je)),u16:null,u32:null,u256:null}),Ve=_e.transform({input:e=>"string"==typeof e?Q.parseFromStr(e,!0):e,output:e=>Q.tagToString(e)}),Ke=Ce.enum("Argument",{GasCoin:null,Input:Ce.u16(),Result:Ce.u16(),NestedResult:Ce.tuple([Ce.u16(),Ce.u16()])}),Le=Ce.struct("ProgrammableMoveCall",{package:Ae,module:Ce.string(),function:Ce.string(),typeArguments:Ce.vector(Ve),arguments:Ce.vector(Ke)}),Fe=Ce.enum("Command",{MoveCall:Le,TransferObjects:Ce.struct("TransferObjects",{objects:Ce.vector(Ke),address:Ke}),SplitCoins:Ce.struct("SplitCoins",{coin:Ke,amounts:Ce.vector(Ke)}),MergeCoins:Ce.struct("MergeCoins",{destination:Ke,sources:Ce.vector(Ke)}),Publish:Ce.struct("Publish",{modules:Ce.vector(Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})),dependencies:Ce.vector(Ae)}),MakeMoveVec:Ce.struct("MakeMoveVec",{type:(Ge=Ve,Ce.enum("Option",{None:null,Some:Ge})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:Ce.vector(Ke)}),Upgrade:Ce.struct("Upgrade",{modules:Ce.vector(Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})),dependencies:Ce.vector(Ae),package:Ae,ticket:Ke})});var Ge;const We=Ce.struct("ProgrammableTransaction",{inputs:Ce.vector(De),commands:Ce.vector(Fe)}),qe=Ce.enum("TransactionKind",{ProgrammableTransaction:We,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),He=Ce.enum("TransactionExpiration",{None:null,Epoch:Ce.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})});const Je=Ce.struct("StructTag",{address:Ae,module:Ce.string(),name:Ce.string(),typeParams:Ce.vector(_e)}),Ze=Ce.struct("GasData",{payment:Ce.vector(Be),owner:Ae,price:Ce.u64(),budget:Ce.u64()}),Ye=Ce.struct("TransactionDataV1",{kind:qe,sender:Ae,gasData:Ze,expiration:He}),Xe=Ce.enum("TransactionData",{V1:Ye}),Qe=Ce.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),et=Ce.enum("IntentVersion",{V0:null}),tt=Ce.enum("AppId",{Sui:null}),rt=Ce.struct("Intent",{scope:Qe,version:et,appId:tt});function nt(e){return Ce.struct(`IntentMessage<${e.name}>`,{intent:rt,value:e})}const it=Ce.enum("CompressedSignature",{ED25519:Ce.bytes(64),Secp256k1:Ce.bytes(64),Secp256r1:Ce.bytes(64),ZkLogin:Ce.byteVector(),Passkey:Ce.byteVector()}),st=Ce.enum("PublicKey",{ED25519:Ce.bytes(32),Secp256k1:Ce.bytes(33),Secp256r1:Ce.bytes(33),ZkLogin:Ce.byteVector(),Passkey:Ce.bytes(33)}),at=Ce.struct("MultiSigPkMap",{pubKey:st,weight:Ce.u8()}),ot=Ce.struct("MultiSigPublicKey",{pk_map:Ce.vector(at),threshold:Ce.u16()}),ct=Ce.struct("MultiSig",{sigs:Ce.vector(it),bitmap:Ce.u16(),multisig_pk:ot}),ut=Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))}),lt=Ce.struct("SenderSignedTransaction",{intentMessage:nt(Xe),txSignatures:Ce.vector(ut)}),dt=Ce.vector(lt,{name:"SenderSignedData"}),pt=Ce.struct("PasskeyAuthenticator",{authenticatorData:Ce.byteVector(),clientDataJson:Ce.string(),userSignature:Ce.byteVector()}),ht=Ce.enum("PackageUpgradeError",{UnableToFetchPackage:Ce.struct("UnableToFetchPackage",{packageId:Ae}),NotAPackage:Ce.struct("NotAPackage",{objectId:Ae}),IncompatibleUpgrade:null,DigestDoesNotMatch:Ce.struct("DigestDoesNotMatch",{digest:Ce.byteVector()}),UnknownUpgradePolicy:Ce.struct("UnknownUpgradePolicy",{policy:Ce.u8()}),PackageIDDoesNotMatch:Ce.struct("PackageIDDoesNotMatch",{packageId:Ae,ticketId:Ae})}),ft=Ce.struct("ModuleId",{address:Ae,name:Ce.string()}),gt=Ce.struct("MoveLocation",{module:ft,function:Ce.u16(),instruction:Ce.u16(),functionName:Ce.option(Ce.string())}),bt=Ce.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:Ce.struct("IndexOutOfBounds",{idx:Ce.u16()}),SecondaryIndexOutOfBounds:Ce.struct("SecondaryIndexOutOfBounds",{resultIdx:Ce.u16(),secondaryIdx:Ce.u16()}),InvalidResultArity:Ce.struct("InvalidResultArity",{resultIdx:Ce.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),mt=Ce.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),yt=Ce.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:Ce.struct("MoveObjectTooBig",{objectSize:Ce.u64(),maxObjectSize:Ce.u64()}),MovePackageTooBig:Ce.struct("MovePackageTooBig",{objectSize:Ce.u64(),maxObjectSize:Ce.u64()}),CircularObjectOwnership:Ce.struct("CircularObjectOwnership",{object:Ae}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:Ce.option(gt),MoveAbort:Ce.tuple([gt,Ce.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:Ce.struct("CommandArgumentError",{argIdx:Ce.u16(),kind:bt}),TypeArgumentError:Ce.struct("TypeArgumentError",{argumentIdx:Ce.u16(),kind:mt}),UnusedValueWithoutDrop:Ce.struct("UnusedValueWithoutDrop",{resultIdx:Ce.u16(),secondaryIdx:Ce.u16()}),InvalidPublicFunctionReturnType:Ce.struct("InvalidPublicFunctionReturnType",{idx:Ce.u16()}),InvalidTransferObject:null,EffectsTooLarge:Ce.struct("EffectsTooLarge",{currentSize:Ce.u64(),maxSize:Ce.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:Ce.struct("PackageUpgradeError",{upgradeError:ht}),WrittenObjectsTooLarge:Ce.struct("WrittenObjectsTooLarge",{currentSize:Ce.u64(),maxSize:Ce.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:Ce.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:Ce.vector(Ae)}),AddressDeniedForCoin:Ce.struct("AddressDeniedForCoin",{address:Ae,coinType:Ce.string()}),CoinTypeGlobalPause:Ce.struct("CoinTypeGlobalPause",{coinType:Ce.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),wt=Ce.enum("ExecutionStatus",{Success:null,Failed:Ce.struct("ExecutionFailed",{error:yt,command:Ce.option(Ce.u64())})}),vt=Ce.struct("GasCostSummary",{computationCost:Ce.u64(),storageCost:Ce.u64(),storageRebate:Ce.u64(),nonRefundableStorageFee:Ce.u64()}),jt=Ce.struct("TransactionEffectsV1",{status:wt,executedEpoch:Ce.u64(),gasUsed:vt,modifiedAtVersions:Ce.vector(Ce.tuple([Ae,Ce.u64()])),sharedObjects:Ce.vector(Be),transactionDigest:Ue,created:Ce.vector(Ce.tuple([Be,ze])),mutated:Ce.vector(Ce.tuple([Be,ze])),unwrapped:Ce.vector(Ce.tuple([Be,ze])),deleted:Ce.vector(Be),unwrappedThenDeleted:Ce.vector(Be),wrapped:Ce.vector(Be),gasObject:Ce.tuple([Be,ze]),eventsDigest:Ce.option(Ue),dependencies:Ce.vector(Ue)}),Ot=Ce.tuple([Ce.u64(),Ue]),St=Ce.enum("ObjectIn",{NotExist:null,Exist:Ce.tuple([Ot,ze])}),kt=Ce.enum("ObjectOut",{NotExist:null,ObjectWrite:Ce.tuple([Ue,ze]),PackageWrite:Ot}),It=Ce.enum("IDOperation",{None:null,Created:null,Deleted:null}),Et=Ce.struct("EffectsObjectChange",{inputState:St,outputState:kt,idOperation:It}),Tt=Ce.enum("UnchangedSharedKind",{ReadOnlyRoot:Ot,MutateDeleted:Ce.u64(),ReadDeleted:Ce.u64(),Cancelled:Ce.u64(),PerEpochConfig:null}),Pt=Ce.struct("TransactionEffectsV2",{status:wt,executedEpoch:Ce.u64(),gasUsed:vt,transactionDigest:Ue,gasObjectIndex:Ce.option(Ce.u32()),eventsDigest:Ce.option(Ue),dependencies:Ce.vector(Ue),lamportVersion:Ce.u64(),changedObjects:Ce.vector(Ce.tuple([Ae,Et])),unchangedSharedObjects:Ce.vector(Ce.tuple([Ae,Tt])),auxDataDigest:Ce.option(Ue)}),Mt=Ce.enum("TransactionEffects",{V1:jt,V2:Pt}),$t={...Ce,U8:Ce.u8(),U16:Ce.u16(),U32:Ce.u32(),U64:Ce.u64(),U128:Ce.u128(),U256:Ce.u256(),ULEB128:Ce.uleb128(),Bool:Ce.bool(),String:Ce.string(),Address:Ae,AppId:tt,Argument:Ke,CallArg:De,Command:Fe,CompressedSignature:it,GasData:Ze,Intent:rt,IntentMessage:nt,IntentScope:Qe,IntentVersion:et,MultiSig:ct,MultiSigPkMap:at,MultiSigPublicKey:ot,ObjectArg:Ne,ObjectDigest:Ue,Owner:ze,PasskeyAuthenticator:pt,ProgrammableMoveCall:Le,ProgrammableTransaction:We,PublicKey:st,SenderSignedData:dt,SenderSignedTransaction:lt,SharedObjectRef:Re,StructTag:Je,SuiObjectRef:Be,TransactionData:Xe,TransactionDataV1:Ye,TransactionEffects:Mt,TransactionExpiration:He,TransactionKind:qe,TypeTag:Ve};var xt=r(967468);const Ct="object",At="ID",Ut="ascii",Bt="String",Rt="string",Nt="String",zt="option",Dt="Option";function _t(e){if("string"==typeof e)switch(e){case"address":return $t.Address;case"bool":return $t.Bool;case"u8":return $t.U8;case"u16":return $t.U16;case"u32":return $t.U32;case"u64":return $t.U64;case"u128":return $t.U128;case"u256":return $t.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return $t.byteVector().transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=_t(e.vector);return t?$t.vector(t):null}if("datatype"in e){const t=(0,x.yT)(e.datatype.package);if(t===(0,x.yT)(xt.ht)){if(e.datatype.module===Ut&&e.datatype.type===Bt)return $t.String;if(e.datatype.module===Rt&&e.datatype.type===Nt)return $t.String;if(e.datatype.module===zt&&e.datatype.type===Dt){const t=_t(e.datatype.typeParameters[0]);return t?$t.vector(t):null}}if(t===(0,x.yT)(xt.Nf)&&e.datatype.module===Ct&&e.datatype.type===At)return $t.Address}return null}function Vt(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:Vt(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(Vt)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}var Kt=r(199544);const Lt=50,Ft=1000n,Gt=5e10;function Wt(e){return async function(t,r,n){return await async function(e,t){const{inputs:r,commands:n}=e,i=[],s=new Set;n.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject&&"boolean"!=typeof e?.UnresolvedObject.mutable))){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}}));const a=new Map;s.size>0&&await Promise.all([...s].map((async e=>{const[r,n,i]=e.split("::"),s=await t.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(e,s.parameters.map((e=>function(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:Vt(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:Vt(e.MutableReference)}:{ref:null,body:Vt(e)}}(e))))}))),i.length&&await Promise.all(i.map((async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const r=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,x.yT)(t.package)===(0,x.yT)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r}))),n.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${n}`);i.forEach(((e,n)=>{const i=t.arguments[n];if("Input"!==i.$kind)return;const s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=_t(e.body);if(o)return i.type="pure",void(r[r.indexOf(s)]=xe.Pure(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const c=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=c}))}}))}(t,e),await async function(e,t){const r=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),n=[...new Set(r.map((e=>(0,x.Fw)(e.UnresolvedObject.objectId))))],i=n.length?(0,Kt.y)(n,Lt):[],s=(await Promise.all(i.map((e=>t.multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),a=new Map(n.map(((e,t)=>[e,s[t]]))),o=Array.from(a).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=s.map((e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,r=t&&"object"==typeof t?"Shared"in t?t.Shared.initial_shared_version:"ConsensusAddressOwner"in t?t.ConsensusAddressOwner.start_version:null:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}})),u=new Map(n.map(((e,t)=>[e,c[t]])));for(const[t,r]of e.inputs.entries()){if(!r.UnresolvedObject)continue;let n;const i=(0,x.yT)(r.UnresolvedObject.objectId),s=u.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=xe.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:r.UnresolvedObject.mutable||qt(e,t)}):Ht(e,t)&&(n=xe.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??xe.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}(t,e),r.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await t.getReferenceGasPrice()))}(t,e),await async function(e,t){if(e.gasConfig.budget)return;const r=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Gt),payment:[]}}})});if("success"!==r.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=Ft*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(t,e),await async function(e,t){if(!e.gasConfig.payment){const r=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:xt.uq})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!r.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map((e=>(0,$.parse)(N,e)))}}(t,e)),await n()}}function qt(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind&&"TransferObjects"!==t.$kind||(r=!0)})),r}function Ht(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r=function(e){return"object"==typeof e.body&&"datatype"in e.body&&("0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type)}(t.MoveCall._argumentTypes[n])||r}})),r}function Jt(e,t){return!!e.inputs.some((e=>e.UnresolvedObject||e.UnresolvedPure))||!(t.onlyTransactionKind||e.gasConfig.price&&e.gasConfig.budget&&e.gasConfig.payment)}async function Zt(e,t,r){if(function(e){for(const t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{Xt(t,$t.U64,e)}));break;case"TransferObjects":Xt(t.TransferObjects.address,$t.Address,e)}}(e),!Jt(e,t))return await Yt(e),r();const n=function(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(t);return(n.core?.resolveTransactionPlugin()??Wt(n))(e,t,(async()=>{await Yt(e),await r()}))}function Yt(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}function Xt(e,t,r){if("Input"!==e.$kind)return;const n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=xe.Pure(t.serialize(n.UnresolvedPure.value)))}function Qt(e){switch(e){case"u8":return Ce.u8();case"u16":return Ce.u16();case"u32":return Ce.u32();case"u64":return Ce.u64();case"u128":return Ce.u128();case"u256":return Ce.u256();case"bool":return Ce.bool();case"string":return Ce.string();case"id":case"address":return Ae}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,r]=t.slice(1);return"vector"===e?Ce.vector(Qt(r)):Ce.option(Qt(r))}throw new Error(`Invalid Pure type name: ${e}`)}function er(e){function t(t,r){if("string"==typeof t)return e(Qt(t).serialize(r));if(t instanceof Uint8Array||O(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e($t.U8.serialize(t)),t.u16=t=>e($t.U16.serialize(t)),t.u32=t=>e($t.U32.serialize(t)),t.u64=t=>e($t.U64.serialize(t)),t.u128=t=>e($t.U128.serialize(t)),t.u256=t=>e($t.U256.serialize(t)),t.bool=t=>e($t.Bool.serialize(t)),t.string=t=>e($t.String.serialize(t)),t.address=t=>e($t.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e($t.vector(Qt(t)).serialize(r)),t.option=(t,r)=>e($t.option(Qt(t)).serialize(r)),t}var tr=r(546275);function rr(e){return"string"==typeof e?(0,x.yT)(e):e.Object?e.Object.ImmOrOwnedObject?(0,x.yT)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,x.yT)(e.Object.Receiving.objectId):(0,x.yT)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,x.yT)(e.UnresolvedObject.objectId):void 0}function nr(e,t,r){const n=e=>{switch(e.$kind){case"Input":{const r=t.get(e.Input);if(void 0===r)throw new Error(`Input ${e.Input} not found in input mapping`);return{...e,Input:r}}case"Result":{const t=r.get(e.Result);return void 0!==t?{...e,Result:t}:e}case"NestedResult":{const t=r.get(e.NestedResult[0]);return void 0!==t?{...e,NestedResult:[t,e.NestedResult[1]]}:e}default:return e}};switch(e.$kind){case"MoveCall":e.MoveCall.arguments=e.MoveCall.arguments.map(n);break;case"TransferObjects":e.TransferObjects.objects=e.TransferObjects.objects.map(n),e.TransferObjects.address=n(e.TransferObjects.address);break;case"SplitCoins":e.SplitCoins.coin=n(e.SplitCoins.coin),e.SplitCoins.amounts=e.SplitCoins.amounts.map(n);break;case"MergeCoins":e.MergeCoins.destination=n(e.MergeCoins.destination),e.MergeCoins.sources=e.MergeCoins.sources.map(n);break;case"MakeMoveVec":e.MakeMoveVec.elements=e.MakeMoveVec.elements.map(n);break;case"Upgrade":e.Upgrade.ticket=n(e.Upgrade.ticket);break;case"$Intent":{const t=e.$Intent.inputs;e.$Intent.inputs={};for(const[r,i]of Object.entries(t))e.$Intent.inputs[r]=Array.isArray(i)?i.map(n):n(i);break}}}function ir(e){return(0,x.yT)(e).replace("0x","")}class sr{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=$t.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=$t.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return 2===e.version?new sr((0,$.parse)(J,e)):new sr((0,$.parse)(J,function(e){return(0,$.parse)(J,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))??null},inputs:e.inputs.map((e=>{if("Input"===e.kind){if((0,$.is)(re,e.value)){const t=(0,$.parse)(re,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,n.s)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")})),commands:e.transactions.map((e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?Q.tagToString(e.type.Some):null,elements:e.objects.map((e=>ve(e)))}};case"MergeCoins":return{MergeCoins:{destination:ve(e.destination),sources:e.sources.map((e=>ve(e)))}};case"MoveCall":{const[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map((e=>ve(e)))}}}case"Publish":return{Publish:{modules:e.modules.map((e=>(0,n.s)(Uint8Array.from(e)))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ve(e.coin),amounts:e.amounts.map((e=>ve(e)))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map((e=>ve(e))),address:ve(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map((e=>(0,n.s)(Uint8Array.from(e)))),dependencies:e.dependencies,package:e.packageId,ticket:ve(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)}))})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const r=Array.from("TransactionData::").map((e=>e.charCodeAt(0))),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,tr.R)(n,{dkLen:32})}(0,e);return(0,s.z)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const n=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:n,commands:i}};if(r)return $t.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,c={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:ir(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:ir(this.gasData.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return $t.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r)))}mapCommandArguments(e,t){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map((n=>t(n,r,e)));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map((n=>t(n,r,e))),r.TransferObjects.address=t(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=t(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map((n=>t(n,r,e)));break;case"MergeCoins":r.MergeCoins.destination=t(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map((n=>t(n,r,e)));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map((n=>t(n,r,e)));break;case"Upgrade":r.Upgrade.ticket=t(r.Upgrade.ticket,r,e);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map((n=>t(n,r,e))):t(s,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,r=e){if(!Array.isArray(t))return void(this.commands[e]=t);const n=t.length-1;this.commands.splice(e,1,...structuredClone(t)),this.mapArguments(((i,s,a)=>{if(a<e+t.length)return i;if("number"!=typeof r&&("Result"===i.$kind&&i.Result===e||"NestedResult"===i.$kind&&i.NestedResult[0]===e)){if("NestedResult"in i&&0!==i.NestedResult[1])throw new Error(`Cannot replace command ${e} with a specific result type: NestedResult[${e}, ${i.NestedResult[1]}] references a nested element that cannot be mapped to the replacement result`);return(0,$.parse)(z,structuredClone(r))}switch(i.$kind){case"Result":i.Result===e&&"number"==typeof r&&(i.Result=r),i.Result>e&&(i.Result+=n);break;case"NestedResult":if(i.NestedResult[0]===e&&"number"==typeof r)return{$kind:"NestedResult",NestedResult:[r,i.NestedResult[1]]};i.NestedResult[0]>e&&(i.NestedResult[0]+=n)}return i}))}replaceCommandWithTransaction(e,t,r){if("Result"!==r.$kind&&"NestedResult"!==r.$kind)throw new Error("Result must be of kind Result or NestedResult");this.insertTransaction(e,t),this.replaceCommand(e+t.commands.length,[],"Result"in r?{NestedResult:[r.Result+e,0]}:{NestedResult:[r.NestedResult[0]+e,r.NestedResult[1]]})}insertTransaction(e,t){const r=new Map,n=new Map;for(let e=0;e<t.inputs.length;e++){const n=t.inputs[e],i=rr(n);let s=-1;if(void 0!==i&&(s=this.inputs.findIndex((e=>rr(e)===i)),-1!==s&&this.inputs[s].Object?.SharedObject&&n.Object?.SharedObject&&(this.inputs[s].Object.SharedObject.mutable=this.inputs[s].Object.SharedObject.mutable||n.Object.SharedObject.mutable)),-1!==s)r.set(e,s);else{const t=this.inputs.length;this.inputs.push(n),r.set(e,t)}}for(let r=0;r<t.commands.length;r++)n.set(r,e+r);const i=[];for(let e=0;e<t.commands.length;e++){const s=structuredClone(t.commands[e]);nr(s,r,n),i.push(s)}this.commands.splice(e,0,...i);const s=i.length;s>0&&this.mapArguments(((t,r,n)=>{if(n>=e&&n<e+i.length)return t;switch(t.$kind){case"Result":t.Result>=e&&(t.Result+=s);break;case"NestedResult":t.NestedResult[0]>=e&&(t.NestedResult[0]+=s)}return t}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return sr.getDigestFromBytes(e)}snapshot(){return(0,$.parse)(J,this)}shallowClone(){return new sr({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}applyResolvedData(e){this.sender||(this.sender=e.sender??null),this.expiration||(this.expiration=e.expiration??null),this.gasData.budget||(this.gasData.budget=e.gasData.budget),this.gasData.owner||(this.gasData.owner=e.gasData.owner??null),this.gasData.payment||(this.gasData.payment=e.gasData.payment),this.gasData.price||(this.gasData.price=e.gasData.price);for(let t=0;t<this.inputs.length;t++){const r=this.inputs[t],n=e.inputs[t];switch(r.$kind){case"UnresolvedPure":if("Pure"!==n.$kind)throw new Error(`Expected input at index ${t} to resolve to a Pure argument, but got ${JSON.stringify(n)}`);this.inputs[t]=n;break;case"UnresolvedObject":if("Object"!==n.$kind)throw new Error(`Expected input at index ${t} to resolve to an Object argument, but got ${JSON.stringify(n)}`);if("ImmOrOwnedObject"===n.Object.$kind||"Receiving"===n.Object.$kind){const e=r.UnresolvedObject,i=n.Object.ImmOrOwnedObject??n.Object.Receiving;if((0,x.yT)(e.objectId)!==(0,x.yT)(i.objectId)||null!=e.version&&e.version!==i.version||null!=e.digest&&e.digest!==i.digest||null!=e.mutable||null!=e.initialSharedVersion)throw new Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}else{if("SharedObject"!==n.Object.$kind)throw new Error(`Input at index ${t} resolved to an unexpected Object kind: ${JSON.stringify(n.Object)}`);{const e=r.UnresolvedObject,i=n.Object.SharedObject;if((0,x.yT)(e.objectId)!==(0,x.yT)(i.objectId)||null!=e.initialSharedVersion&&e.initialSharedVersion!==i.initialSharedVersion||null!=e.mutable&&e.mutable!==i.mutable||null!=e.version||null!=e.digest)throw new Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}}this.inputs[t]=n}}}}var ar,or,cr=e=>{throw TypeError(e)},ur=(e,t,r)=>t.has(e)||cr("Cannot "+r),lr=(e,t,r)=>(ur(e,t,"read from private field"),r?r.call(e):t.get(e)),dr=(e,t,r)=>t.has(e)?cr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pr=(e,t,r,n)=>(ur(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);ar=new WeakMap,or=new WeakMap;let hr=class e{constructor({prefix:e,cache:t}={}){dr(this,ar),dr(this,or),pr(this,ar,e??[]),pr(this,or,t??new Map)}read(e,t){const r=[lr(this,ar),...e].join(":");if(lr(this,or).has(r))return lr(this,or).get(r);const n=t();return lr(this,or).set(r,n),"object"==typeof n&&null!==n&&"then"in n?Promise.resolve(n).then((e=>(lr(this,or).set(r,e),e))).catch((e=>{throw lr(this,or).delete(r),e})):n}readSync(e,t){const r=[lr(this,ar),...e].join(":");if(lr(this,or).has(r))return lr(this,or).get(r);const n=t();return lr(this,or).set(r,n),n}clear(e){const t=[...lr(this,ar),...e??[]].join(":");if(t)for(const e of lr(this,or).keys())e.startsWith(t)&&lr(this,or).delete(e);else lr(this,or).clear()}scope(t){return new e({prefix:[...lr(this,ar),...Array.isArray(t)?t:[t]],cache:lr(this,or)})}};var fr,gr,br,mr,yr,wr,vr,jr,Or,Sr,kr=r(293228),Ir=r(693111),Er=e=>{throw TypeError(e)},Tr=(e,t,r)=>t.has(e)||Er("Cannot "+r),Pr=(e,t,r)=>(Tr(e,t,"read from private field"),r?r.call(e):t.get(e)),Mr=(e,t,r)=>t.has(e)?Er("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$r=(e,t,r,n)=>(Tr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),xr=(e,t,r)=>(Tr(e,t,"access private method"),r);const Cr="/",Ar={"Mvr-Source":"@mysten/sui@1.45.2"};class Ur{constructor({cache:e,url:t,pageSize:r=50,overrides:n}){Mr(this,yr),Mr(this,fr),Mr(this,gr),Mr(this,br),Mr(this,mr),$r(this,fr,e),$r(this,gr,t),$r(this,br,r),$r(this,mr,{packages:n?.packages,types:n?.types}),function(e){if(e?.packages)for(const[t,r]of Object.entries(e.packages)){if(!(0,Ir.Y)(t))throw new Error(`Invalid package name: ${t}`);if(!(0,x.oI)((0,x.yT)(r)))throw new Error(`Invalid package ID: ${r}`)}if(e?.types)for(const[t,r]of Object.entries(e.types)){if((0,x.$A)(t).typeParams.length>0)throw new Error("Type overrides must be first-level only. If you want to supply generic types, just pass each type individually.");const e=(0,x.$A)(r);if(!(0,x.oI)(e.address))throw new Error(`Invalid type: ${r}`)}}(Pr(this,mr))}async resolvePackage({package:e}){return Nr(e)?{package:await Pr(this,yr,wr).load(e)}:{package:e}}async resolveType({type:e}){if(!Nr(e))return{type:e};const t=[...Br(e)],r=await Pr(this,yr,vr).loadMany(t),n={};for(let e=0;e<t.length;e++){const i=r[e];if(i instanceof Error)throw i;n[t[e]]=i}return{type:Rr(e,n)}}async resolve({types:e=[],packages:t=[]}){const r=new Set;for(const t of e??[])Br(t,r);const n=[...r],[i,s]=await Promise.all([n.length>0?Pr(this,yr,vr).loadMany(n):[],t.length>0?Pr(this,yr,wr).loadMany(t):[]]),a={...Pr(this,mr)?.types};for(const[e,t]of n.entries()){const r=i[e];if(r instanceof Error)throw r;a[t]=r}const o={};for(const t of e??[]){const e=Rr(t,a);o[t]={type:e}}const c={};for(const[e,r]of(t??[]).entries()){const t=Pr(this,mr)?.packages?.[r]??s[e];if(t instanceof Error)throw t;c[r]={package:t}}return{types:o,packages:c}}}function Br(e,t=new Set){if("string"==typeof e&&!Nr(e))return t;const r=zr(e)?e:(0,x.$A)(e);Nr(r.address)&&t.add(`${r.address}::${r.module}::${r.name}`);for(const e of r.typeParams)Br(e,t);return t}function Rr(e,t){const r=zr(e)?e:(0,x.$A)(e),n=`${r.address}::${r.module}::${r.name}`,i=t[n];return(0,x.kX)({...r,address:i?i.split("::")[0]:r.address,typeParams:r.typeParams.map((e=>Rr(e,t)))})}function Nr(e){return e.includes(Cr)||e.includes("@")||e.includes(".sui")}function zr(e){return"object"==typeof e&&"address"in e&&"module"in e&&"name"in e&&"typeParams"in e}function Dr(e){const t=new Set;for(const r of e)if(Nr(r)){if(!(0,Ir.S)(r))throw new Error(`Invalid type with names: ${r}`);t.add(r)}return t}fr=new WeakMap,gr=new WeakMap,br=new WeakMap,mr=new WeakMap,yr=new WeakSet,wr=function(){return Pr(this,fr).readSync(["#mvrPackageDataLoader",Pr(this,gr)??""],(()=>{const e=new kr.R((async e=>{if(!Pr(this,gr))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await xr(this,yr,jr).call(this,e);return e.map((e=>t[e]??new Error(`Failed to resolve package: ${e}`)))})),t=Pr(this,mr)?.packages;if(t)for(const[r,n]of Object.entries(t))e.prime(r,n);return e}))},vr=function(){return Pr(this,fr).readSync(["#mvrTypeDataLoader",Pr(this,gr)??""],(()=>{const e=new kr.R((async e=>{if(!Pr(this,gr))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await xr(this,yr,Or).call(this,e);return e.map((e=>t[e]??new Error(`Failed to resolve type: ${e}`)))})),t=Pr(this,mr)?.types;if(t)for(const[r,n]of Object.entries(t))e.prime(r,n);return e}))},jr=async function(e){if(0===e.length)return{};const t=(0,Kt.y)(e,Pr(this,br)),r={};return await Promise.all(t.map((async e=>{const t=await xr(this,yr,Sr).call(this,"/v1/resolution/bulk",{names:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const n=t.resolution[e]?.package_id;n&&(r[e]=n)}}))),r},Or=async function(e){if(0===e.length)return{};const t=(0,Kt.y)(e,Pr(this,br)),r={};return await Promise.all(t.map((async e=>{const t=await xr(this,yr,Sr).call(this,"/v1/struct-definition/bulk",{types:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const n=t.resolution[e]?.type_tag;n&&(r[e]=n)}}))),r},Sr=async function(e,t){if(!Pr(this,gr))throw new Error("MVR Api URL is not set for the current client");const r=await fetch(`${Pr(this,gr)}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...Ar},body:JSON.stringify(t)});if(!r.ok){const e=await r.json().catch((()=>({})));throw new Error(`Failed to resolve types: ${e?.message}`)}return r.json()};const _r=new WeakMap;var Vr,Kr,Lr,Fr,Gr,Wr,qr,Hr,Jr,Zr,Yr,Xr,Qr,en,tn,rn,nn,sn,an,on=e=>{throw TypeError(e)},cn=(e,t,r)=>t.has(e)||on("Cannot "+r),un=(e,t,r)=>(cn(e,t,"read from private field"),r?r.call(e):t.get(e)),ln=(e,t,r)=>t.has(e)?on("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dn=(e,t,r,n)=>(cn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),pn=(e,t,r)=>(cn(e,t,"access private method"),r);function hn(e,t=1/0){const r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",get NestedResult(){return["function"==typeof e?e():e,t]}});return new Proxy({$kind:"Result",get Result(){return"function"==typeof e?e():e}},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;const i=parseInt(r,10);return Number.isNaN(i)||i<0?void 0:n(i)}})}const fn=Symbol.for("@mysten/transaction"),gn={buildPlugins:new Map,serializationPlugins:new Map},bn=Symbol.for("@mysten/transaction/registry");function mn(){try{const e=globalThis;return e[bn]||(e[bn]=gn),e[bn]}catch{return gn}}const yn=class e{constructor(){ln(this,Zr),ln(this,Vr),ln(this,Kr),ln(this,Lr,new Map),ln(this,Fr,[]),ln(this,Gr,[]),ln(this,Wr,new Set),ln(this,qr,new Set),ln(this,Hr,new Map),ln(this,Jr),this.object=function(e){function t(t){return e(t)}return t.system=e=>{const r=e?.mutable;return t(void 0!==r?xe.SharedObjectRef({objectId:"0x5",initialSharedVersion:1,mutable:r}):{$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x5",initialSharedVersion:1}})},t.clock=()=>t(xe.SharedObjectRef({objectId:"0x6",initialSharedVersion:1,mutable:!1})),t.random=()=>t({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x8",mutable:!1}}),t.denyList=e=>t({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x403",mutable:e?.mutable}}),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[r.object(t)]}),t}((e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&(0,$.is)(z,e))return e;const t=rr(e),r=un(this,Jr).inputs.find((e=>t===rr(e)));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:un(this,Jr).inputs.indexOf(r),type:"object"}:pn(this,Zr,Qr).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,x.yT)(e)}}:e)}));const e=mn();dn(this,Jr,new sr),dn(this,Kr,[...e.buildPlugins.values()]),dn(this,Vr,[...e.serializationPlugins.values()])}static fromKind(t){const r=new e;return dn(r,Jr,sr.fromKindBytes("string"==typeof t?(0,n.G)(t):t)),dn(r,Fr,un(r,Jr).inputs.slice()),dn(r,Gr,un(r,Jr).commands.slice()),dn(r,Wr,new Set(un(r,Gr).map(((e,t)=>t)))),r}static from(t){const r=new e;var i;return(i=t)&&"object"==typeof i&&!0===i[fn]?dn(r,Jr,sr.restore(t.getData())):"string"==typeof t&&t.startsWith("{")?dn(r,Jr,sr.restore(JSON.parse(t))):dn(r,Jr,sr.fromBytes("string"==typeof t?(0,n.G)(t):t)),dn(r,Fr,un(r,Jr).inputs.slice()),dn(r,Gr,un(r,Jr).commands.slice()),dn(r,Wr,new Set(un(r,Gr).map(((e,t)=>t)))),r}static registerGlobalSerializationPlugin(e,t){mn().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){mn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){mn().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){mn().buildPlugins.delete(e)}addSerializationPlugin(e){un(this,Vr).push(e)}addBuildPlugin(e){un(this,Kr).push(e)}addIntentResolver(e,t){if(un(this,Lr).has(e)&&un(this,Lr).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);un(this,Lr).set(e,t)}setSender(e){un(this,Jr).sender=e}setSenderIfNotSet(e){un(this,Jr).sender||(un(this,Jr).sender=e)}setExpiration(e){un(this,Jr).expiration=e?(0,$.parse)(H,e):null}setGasPrice(e){un(this,Jr).gasConfig.price=String(e)}setGasBudget(e){un(this,Jr).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==un(this,Jr).gasData.budget&&(un(this,Jr).gasConfig.budget=String(e))}setGasOwner(e){un(this,Jr).gasConfig.owner=e}setGasPayment(e){un(this,Jr).gasConfig.payment=e.map((e=>(0,$.parse)(N,e)))}get blockData(){return ye(un(this,Jr).snapshot())}getData(){return un(this,Jr).snapshot()}get[fn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:er((e=>O(e)?pn(this,Zr,Qr).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):pn(this,Zr,Qr).call(this,"pure",(0,$.is)(q,e)?(0,$.parse)(q,e):e instanceof Uint8Array?xe.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(xe.ObjectRef(...e))}receivingRef(...e){return this.object(xe.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(xe.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(un(this,Hr).has(e))return un(this,Hr).get(e);const t=pn(this,Zr,Yr).call(this),r=e(t);if(!r||"object"!=typeof r||!("then"in r))return dn(this,Wr,un(t,Wr)),un(this,Hr).set(e,r),r;const n=pn(this,Zr,Xr).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:un(this,Jr).commands.length,result:null}}});un(this,qr).add(Promise.resolve(r).then((e=>{n.$Intent.data.result=e})));const i=hn((()=>n.$Intent.data.resultIndex));return un(this,Hr).set(e,i),i}return pn(this,Zr,Xr).call(this,e),hn(un(this,Jr).commands.length-1)}splitCoins(e,t){const r=Z.SplitCoins("string"==typeof e?this.object(e):pn(this,Zr,tn).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):pn(this,Zr,en).call(this,e))));return pn(this,Zr,Xr).call(this,r),hn(un(this,Jr).commands.length-1,t.length)}mergeCoins(e,t){return this.add(Z.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(Z.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(Z.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(Z.MoveCall({...t,arguments:e?.map((e=>pn(this,Zr,en).call(this,e)))}))}transferObjects(e,t){return this.add(Z.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):pn(this,Zr,en).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(Z.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify(ye(un(this,Jr).snapshot()))}async toJSON(e={}){await this.prepareForSerialization(e);const t=this.isFullyResolved();return JSON.stringify((0,$.parse)($e,t?{...un(this,Jr).snapshot(),digest:un(this,Jr).getDigest()}:un(this,Jr).snapshot()),((e,t)=>"bigint"==typeof t?t.toString():t),2)}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}isFullyResolved(){return!(!un(this,Jr).sender||un(this,qr).size>0||un(this,Jr).commands.some((e=>e.$Intent))||Jt(un(this,Jr),{}))}async build(e={}){return await this.prepareForSerialization(e),await pn(this,Zr,rn).call(this,e),un(this,Jr).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await pn(this,Zr,rn).call(this,e),un(this,Jr).getDigest()}async prepareForSerialization(e){await pn(this,Zr,sn).call(this),pn(this,Zr,an).call(this);const t=new Set;for(const e of un(this,Jr).commands)e.$Intent&&t.add(e.$Intent.name);const r=[...un(this,Vr)];for(const n of t)if(!e.supportedIntents?.includes(n)){if(!un(this,Lr).has(n))throw new Error(`Missing intent resolver for ${n}`);r.push(un(this,Lr).get(n))}r.push((e=>{let t;if(e){const r=e.overrides??{packages:{},types:{}};_r.has(r)||_r.set(r,new hr),t=new Ur({cache:_r.get(r),url:e.url,pageSize:e.pageSize,overrides:r})}return async(e,r,n)=>{const i=function(e){const t=new Set,r=new Set;for(const n of e.commands)switch(n.$kind){case"MakeMoveVec":n.MakeMoveVec.type&&Dr([n.MakeMoveVec.type]).forEach((e=>{r.add(e)}));break;case"MoveCall":const e=n.MoveCall,i=e.package.split("::")[0];if(Nr(i)){if(!(0,Ir.Y)(i))throw new Error(`Invalid package name: ${i}`);t.add(i)}Dr(e.typeArguments??[]).forEach((e=>{r.add(e)}))}return{packages:[...t],types:[...r]}}(e);if(0===i.types.length&&0===i.packages.length)return n();const s=await(t||function(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(r).core.mvr).resolve({types:i.types,packages:i.packages});!function(e,t){for(const r of e.commands){if(r.MakeMoveVec?.type){if(!Nr(r.MakeMoveVec.type))continue;if(!t.types[r.MakeMoveVec.type])throw new Error(`No resolution found for type: ${r.MakeMoveVec.type}`);r.MakeMoveVec.type=t.types[r.MakeMoveVec.type].type}const e=r.MoveCall;if(!e)continue;const n=e.package.split("::"),i=n[0];if(Nr(i)&&!t.packages[i])throw new Error(`No address found for package: ${i}`);Nr(i)&&(n[0]=t.packages[i].package,e.package=n.join("::"));const s=e.typeArguments;if(s){for(let e=0;e<s.length;e++)if(Nr(s[e])){if(!t.types[s[e]])throw new Error(`No resolution found for type: ${s[e]}`);s[e]=t.types[s[e]].type}e.typeArguments=s}}}(e,s),await n()}})()),await pn(this,Zr,nn).call(this,r,e)}};Vr=new WeakMap,Kr=new WeakMap,Lr=new WeakMap,Fr=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,qr=new WeakMap,Hr=new WeakMap,Jr=new WeakMap,Zr=new WeakSet,Yr=function(){const e=new yn;return dn(e,Jr,un(this,Jr)),dn(e,Vr,un(this,Vr)),dn(e,Kr,un(this,Kr)),dn(e,Lr,un(this,Lr)),dn(e,qr,un(this,qr)),dn(e,Wr,new Set(un(this,Wr))),dn(e,Hr,un(this,Hr)),un(this,Fr).push(un(e,Fr)),un(this,Gr).push(un(e,Gr)),e},Xr=function(e){const t=un(this,Jr).commands.length;return un(this,Gr).push(e),un(this,Wr).add(t),un(this,Jr).commands.push(e),un(this,Jr).mapCommandArguments(t,(e=>{if("Result"===e.$kind&&!un(this,Wr).has(e.Result))throw new Error(`Result { Result: ${e.Result} } is not available to use in the current transaction`);if("NestedResult"===e.$kind&&!un(this,Wr).has(e.NestedResult[0]))throw new Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use in the current transaction`);if("Input"===e.$kind&&e.Input>=un(this,Jr).inputs.length)throw new Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e})),e},Qr=function(e,t){return un(this,Fr).push(t),un(this,Jr).addInput(e,t)},en=function(e){return O(e)?this.pure(e):pn(this,Zr,tn).call(this,e)},tn=function(e){if("function"==typeof e){const t=this.add(e);return"function"==typeof t?pn(this,Zr,tn).call(this,t):(0,$.parse)(z,t)}return(0,$.parse)(z,e)},rn=async function(e){if(!e.onlyTransactionKind&&!un(this,Jr).sender)throw new Error("Missing transaction sender");await pn(this,Zr,nn).call(this,[...un(this,Kr),Zt],e)},nn=async function(e,t){try{const r=n=>{if(n>=e.length)return()=>{};const i=e[n];return async()=>{const e=r(n+1);let s=!1,a=!1;if(await i(un(this,Jr),t,(async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0})),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()}finally{dn(this,Fr,un(this,Jr).inputs.slice()),dn(this,Gr,un(this,Jr).commands.slice()),dn(this,Wr,new Set(un(this,Gr).map(((e,t)=>t))))}},sn=async function(){for(;un(this,qr).size>0;){const e=Promise.all(un(this,qr));un(this,qr).clear(),un(this,qr).add(e),await e,un(this,qr).delete(e)}},an=function(){const e=un(this,Jr).commands,t=un(this,Jr).inputs,r=un(this,Gr).flat(1/0),n=un(this,Fr).flat(1/0);if(r.length!==e.length)throw new Error("Unexpected number of commands found in transaction data");if(n.length!==t.length)throw new Error("Unexpected number of inputs found in transaction data");const i=r.filter((e=>"AsyncTransactionThunk"!==e.$Intent?.name));function s(t){const r=e[t];if("AsyncTransactionThunk"===r.$Intent?.name){const e=r.$Intent.data.result;if(null==e)throw new Error("AsyncTransactionThunk has not been resolved");return s(e.Result)}const n=i.indexOf(r);if(-1===n)throw new Error("Unable to find original index for command");return n}un(this,Jr).commands=i,un(this,Jr).inputs=n,dn(this,Gr,i),dn(this,Fr,n),dn(this,Wr,new Set(i.map(((e,t)=>t)))),un(this,Jr).mapArguments((e=>{if("Input"===e.$kind){const r=n.indexOf(t[e.Input]);if(-1===r)throw new Error("Input has not been resolved");return{...e,Input:r}}if("Result"===e.$kind){const t=s(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){const t=s(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e}));for(const[t,r]of e.entries())if("AsyncTransactionThunk"===r.$Intent?.name)try{r.$Intent.data.resultIndex=s(t)}catch{}};let wn=yn},967468:(e,t,r)=>{r.d(t,{H$:()=>a,Nf:()=>s,ht:()=>i,uq:()=>o});var n=r(721039);BigInt(1e9);const i="0x1",s="0x2",a=(0,n.Fw)("0x6"),o=`${s}::sui::SUI`;(0,n.Fw)("0x5"),(0,n.Fw)("0x8")},693111:(e,t,r)=>{r.d(t,{Y:()=>o,S:()=>c});const n=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,i=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,s=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,a=/^\d+$/,o=e=>{const t=e.split("/");if(t.length<2||t.length>3)return!1;const[r,o,c]=t;return!(void 0!==c&&!a.test(c))&&!!function(e){return!(e.length>235)&&(e.includes("@")?n.test(e):i.test(e))}(r)&&s.test(o)&&o.length<64},c=e=>{const t=e.split(/::|<|>|,/);for(const e of t)if(e.includes("/")&&!o(e))return!1;return!0}},721039:(e,t,r)=>{r.d(t,{$A:()=>o,Fw:()=>l,kT:()=>s,kX:()=>c,oI:()=>a,yT:()=>u});var n=r(525006),i=r(693111);const s=32;function a(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===s}function o(e){const[t,r]=e.split("::"),s=(0,i.Y)(t),a=e.slice(t.length+r.length+4),c=a.includes("<")?a.slice(0,a.indexOf("<")):a,l=a.includes("<")?(0,n.fR)(a.slice(a.indexOf("<")+1,a.lastIndexOf(">"))).map((e=>function(e){return e.includes("::")?o(e):e}(e.trim()))):[];return{address:s?t:u(t),module:r,name:c,typeParams:l}}function c(e){const{address:t,module:r,name:n,typeParams:i}="string"==typeof e?o(e):e;return`${t}::${r}::${n}${i?.length>0?`<${i.map((e=>"string"==typeof e?e:c(e))).join(",")}>`:""}`}function u(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*s,"0")}`}function l(e,t=!1){return u(e,t)}},527478:(e,t,r)=>{r.d(t,{fR:()=>o,zS:()=>a});var n=r(32532),i=r(232193),s=r(67121);function a(e,t){switch(t){case"base58":return(0,n.z)(e);case"base64":return(0,i.s)(e);case"hex":return(0,s.N)(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function o(e,t=["<",">"]){const[r,n]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===r&&a++,o===n&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}},467475:(e,t,r)=>{r.d(t,{Y:()=>wn});var n=r(232193),i=r(67121),s=r(32532);function a(e){let t=BigInt(e);const r=[];let n=0;if(0n===t)return[0];for(;t>0;)r[n]=Number(0x7fn&t),t>>=7n,t>0n&&(r[n]|=128),n+=1;return r}class o{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){const e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){const e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){const t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=function(e){let t=0n,r=0n,n=0;for(;;){if(n>=e.length)throw new Error("ULEB decode error: buffer overflow");const i=e[n];if(n+=1,t+=BigInt(127&i)<<r,0==(128&i))break;r+=7n}if(t>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("ULEB decode error: value exceeds MAX_SAFE_INTEGER");return{value:Number(t),length:n}}(t);return this.shift(n),r}readVec(e){const t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}var c=r(527478);class u{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,Math.max(this.size+t,this.size+this.allocateSize));if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}writeBytes(e){this.ensureSizeOrGrow(e.length);for(let t=0;t<e.length;t++)this.dataView.setUint8(this.bytePosition+t,e[t]);return this.shift(e.length)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return l(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return l(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return l(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return a(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,c.zS)(this.toBytes(),e)}}function l(e,t){const r=new Uint8Array(t);let n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var d,p,h,f,g=e=>{throw TypeError(e)},b=(e,t,r)=>t.has(e)||g("Cannot "+r),m=(e,t,r)=>(b(e,t,"read from private field"),r?r.call(e):t.get(e)),y=(e,t,r)=>t.has(e)?g("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),w=(e,t,r,n)=>(b(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);d=new WeakMap,p=new WeakMap;let v=class e{constructor(e){y(this,d),y(this,p),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),w(this,d,e.write),w(this,p,e.serialize??((e,t)=>{const r=new u({initialSize:this.serializedSize(e)??void 0,...t});return m(this,d).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),m(this,d).call(this,e,t)}serialize(e,t){return this.validate(e),new S(this,m(this,p).call(this,e,t))}parse(e){const t=new o(e);return this.read(t)}fromHex(e){return this.parse((0,i.H)(e))}fromBase58(e){return this.parse((0,s.L)(e))}fromBase64(e){return this.parse((0,n.G)(e))}transform({name:t,input:r,output:n,validate:i}){return new e({name:t??this.name,read:e=>n?n(this.read(e)):this.read(e),write:(e,t)=>m(this,d).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>m(this,p).call(this,r?r(e):e,t),validate:e=>{i?.(e),this.validate(r?r(e):e)}})}};const j=Symbol.for("@mysten/serialized-bcs");function O(e){return!!e&&"object"==typeof e&&!0===e[j]}class S{constructor(e,t){y(this,h),y(this,f),w(this,h,e),w(this,f,t)}get[j](){return!0}toBytes(){return m(this,f)}toHex(){return(0,i.N)(m(this,f))}toBase64(){return(0,n.s)(m(this,f))}toBase58(){return(0,s.z)(m(this,f))}parse(){return m(this,h).parse(m(this,f))}}function k({size:e,...t}){return new v({...t,serializedSize:()=>e})}function I({readMethod:e,writeMethod:t,...r}){return k({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function E({readMethod:e,writeMethod:t,...r}){return k({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}h=new WeakMap,f=new WeakMap;class T extends v{constructor({name:e,fields:t,...r}){const n=Object.entries(t);super({name:e,serializedSize:e=>{let t=0;for(const[r,i]of n){const n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{const t={};for(const[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(const[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})}}class P extends v{constructor({fields:e,...t}){const r=Object.entries(e);super({read:e=>{const n=e.readULEB(),i=r[n];if(!i)throw new TypeError(`Unknown value ${n} for enum ${t.name}`);const[s,a]=i;return{[s]:a?.read(e)??!0,$kind:s}},write:(t,n)=>{const[i,s]=Object.entries(t).filter((([t])=>Object.hasOwn(e,t)))[0];for(let e=0;e<r.length;e++){const[t,a]=r[e];if(t===i)return n.writeULEB(e),void a?.write(s,n)}},...t,validate:r=>{if(t?.validate?.(r),"object"!=typeof r||null==r)throw new TypeError("Expected object, found "+typeof r);const n=Object.keys(r).filter((t=>void 0!==r[t]&&Object.hasOwn(e,t)));if(1!==n.length)throw new TypeError(`Expected object with one key, but found ${n.length} for type ${t.name}}`);const[i]=n;if(!Object.hasOwn(e,i))throw new TypeError(`Invalid enum variant ${i}`)}})}}class M extends v{constructor({fields:e,name:t,...r}){super({name:t??`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){const i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{const r=[];for(const n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...r,validate:t=>{if(r?.validate?.(t),!Array.isArray(t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${t.length}`)}})}}var $=r(882374),x=r(44115);function C(e){const t=Object.entries(e).map((([e,t])=>(0,$.object)({[e]:t})));return(0,$.pipe)((0,$.union)(t),(0,$.transform)((e=>({...e,$kind:Object.keys(e)[0]}))))}const A=(0,$.pipe)((0,$.string)(),(0,$.transform)((e=>(0,x.yT)(e))),(0,$.check)(x.oI)),U=A,B=(0,$.string)(),R=(0,$.pipe)((0,$.union)([(0,$.string)(),(0,$.pipe)((0,$.number)(),(0,$.integer)())]),(0,$.check)((e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}}),"Invalid u64")),N=(0,$.object)({objectId:A,version:R,digest:(0,$.string)()}),z=(0,$.pipe)((0,$.union)([(0,$.object)({GasCoin:(0,$.literal)(!0)}),(0,$.object)({Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),type:(0,$.optional)((0,$.literal)("pure"))}),(0,$.object)({Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),type:(0,$.optional)((0,$.literal)("object"))}),(0,$.object)({Result:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({NestedResult:(0,$.tuple)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.pipe)((0,$.number)(),(0,$.integer)())])})]),(0,$.transform)((e=>({...e,$kind:Object.keys(e)[0]})))),D=(0,$.object)({budget:(0,$.nullable)(R),price:(0,$.nullable)(R),owner:(0,$.nullable)(A),payment:(0,$.nullable)((0,$.array)(N))}),_=((0,$.object)({address:(0,$.string)(),module:(0,$.string)(),name:(0,$.string)(),typeParams:(0,$.array)((0,$.string)())}),(0,$.union)([(0,$.literal)("address"),(0,$.literal)("bool"),(0,$.literal)("u8"),(0,$.literal)("u16"),(0,$.literal)("u32"),(0,$.literal)("u64"),(0,$.literal)("u128"),(0,$.literal)("u256"),(0,$.object)({vector:(0,$.lazy)((()=>_))}),(0,$.object)({datatype:(0,$.object)({package:(0,$.string)(),module:(0,$.string)(),type:(0,$.string)(),typeParameters:(0,$.array)((0,$.lazy)((()=>_)))})}),(0,$.object)({typeParameter:(0,$.pipe)((0,$.number)(),(0,$.integer)())})])),V=(0,$.object)({ref:(0,$.nullable)((0,$.union)([(0,$.literal)("&"),(0,$.literal)("&mut")])),body:_}),K=(0,$.object)({package:U,module:(0,$.string)(),function:(0,$.string)(),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(z),_argumentTypes:(0,$.optional)((0,$.nullable)((0,$.array)(V)))}),L=(0,$.object)({name:(0,$.string)(),inputs:(0,$.record)((0,$.string)(),(0,$.union)([z,(0,$.array)(z)])),data:(0,$.record)((0,$.string)(),(0,$.unknown)())}),F=C({MoveCall:K,TransferObjects:(0,$.object)({objects:(0,$.array)(z),address:z}),SplitCoins:(0,$.object)({coin:z,amounts:(0,$.array)(z)}),MergeCoins:(0,$.object)({destination:z,sources:(0,$.array)(z)}),Publish:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U)}),MakeMoveVec:(0,$.object)({type:(0,$.nullable)((0,$.string)()),elements:(0,$.array)(z)}),Upgrade:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U),package:U,ticket:z}),$Intent:L}),G=C({ImmOrOwnedObject:N,SharedObject:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:N}),W=C({Object:G,Pure:(0,$.object)({bytes:B}),UnresolvedPure:(0,$.object)({value:(0,$.unknown)()}),UnresolvedObject:(0,$.object)({objectId:U,version:(0,$.optional)((0,$.nullable)(R)),digest:(0,$.optional)((0,$.nullable)((0,$.string)())),initialSharedVersion:(0,$.optional)((0,$.nullable)(R)),mutable:(0,$.optional)((0,$.nullable)((0,$.boolean)()))})}),q=C({Object:G,Pure:(0,$.object)({bytes:B})}),H=C({None:(0,$.literal)(!0),Epoch:R}),J=(0,$.object)({version:(0,$.literal)(2),sender:(0,$.nullish)(A),expiration:(0,$.nullish)(H),gasData:D,inputs:(0,$.array)(W),commands:(0,$.array)(F)}),Z={MoveCall(e){const[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map((e=>(0,$.parse)(z,e))),address:(0,$.parse)(z,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:(0,$.parse)(z,e),amounts:t.map((e=>(0,$.parse)(z,e)))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:(0,$.parse)(z,e),sources:t.map((e=>(0,$.parse)(z,e)))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map((e=>"string"==typeof e?e:(0,n.s)(new Uint8Array(e)))),dependencies:t.map((e=>(0,x.Fw)(e)))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:i})=>({$kind:"Upgrade",Upgrade:{modules:e.map((e=>"string"==typeof e?e:(0,n.s)(new Uint8Array(e)))),dependencies:t.map((e=>(0,x.Fw)(e))),package:r,ticket:(0,$.parse)(z,i)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map((e=>(0,$.parse)(z,e)))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map((([e,t])=>[e,Array.isArray(t)?t.map((e=>(0,$.parse)(z,e))):(0,$.parse)(z,t)]))),data:r}})},Y=/^vector<(.+)>$/,X=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Q{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(Y);if(r)return{vector:Q.parseFromStr(r[1],t)};const n=e.match(X);if(n)return{struct:{address:t?(0,x.yT)(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:Q.parseStructTypeArgs(n[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return(0,c.fR)(e).map((e=>Q.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Q.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(Q.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}const ee=(0,$.object)({digest:(0,$.string)(),objectId:(0,$.string)(),version:(0,$.union)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.string)(),(0,$.bigint)()])}),te=C({ImmOrOwned:ee,Shared:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:ee}),re=C({Object:te,Pure:(0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))}),ne=(0,$.union)([(0,$.object)({kind:(0,$.literal)("Input"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),value:(0,$.unknown)(),type:(0,$.optional)((0,$.literal)("object"))}),(0,$.object)({kind:(0,$.literal)("Input"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),value:(0,$.unknown)(),type:(0,$.literal)("pure")})]),ie=(0,$.union)([(0,$.object)({Epoch:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({None:(0,$.nullable)((0,$.literal)(!0))})]),se=(0,$.pipe)((0,$.union)([(0,$.number)(),(0,$.string)(),(0,$.bigint)()]),(0,$.check)((e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}))),ae=(0,$.union)([(0,$.object)({bool:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u8:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u64:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u128:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({address:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({signer:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({vector:(0,$.lazy)((()=>ae))}),(0,$.object)({struct:(0,$.lazy)((()=>oe))}),(0,$.object)({u16:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u32:(0,$.nullable)((0,$.literal)(!0))}),(0,$.object)({u256:(0,$.nullable)((0,$.literal)(!0))})]),oe=(0,$.object)({address:(0,$.string)(),module:(0,$.string)(),name:(0,$.string)(),typeParams:(0,$.array)(ae)}),ce=(0,$.object)({budget:(0,$.optional)(se),price:(0,$.optional)(se),payment:(0,$.optional)((0,$.array)(ee)),owner:(0,$.optional)((0,$.string)())}),ue=[ne,(0,$.object)({kind:(0,$.literal)("GasCoin")}),(0,$.object)({kind:(0,$.literal)("Result"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)())}),(0,$.object)({kind:(0,$.literal)("NestedResult"),index:(0,$.pipe)((0,$.number)(),(0,$.integer)()),resultIndex:(0,$.pipe)((0,$.number)(),(0,$.integer)())})],le=(0,$.union)([...ue]),de=(0,$.object)({kind:(0,$.literal)("MoveCall"),target:(0,$.pipe)((0,$.string)(),(0,$.check)((e=>3===e.split("::").length))),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(le)}),pe=(0,$.object)({kind:(0,$.literal)("TransferObjects"),objects:(0,$.array)(le),address:le}),he=(0,$.object)({kind:(0,$.literal)("SplitCoins"),coin:le,amounts:(0,$.array)(le)}),fe=(0,$.object)({kind:(0,$.literal)("MergeCoins"),destination:le,sources:(0,$.array)(le)}),ge=(0,$.object)({kind:(0,$.literal)("MakeMoveVec"),type:(0,$.union)([(0,$.object)({Some:ae}),(0,$.object)({None:(0,$.nullable)((0,$.literal)(!0))})]),objects:(0,$.array)(le)}),be=[de,pe,he,fe,(0,$.object)({kind:(0,$.literal)("Publish"),modules:(0,$.array)((0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))),dependencies:(0,$.array)((0,$.string)())}),(0,$.object)({kind:(0,$.literal)("Upgrade"),modules:(0,$.array)((0,$.array)((0,$.pipe)((0,$.number)(),(0,$.integer)()))),dependencies:(0,$.array)((0,$.string)()),packageId:(0,$.string)(),ticket:le}),ge],me=(0,$.union)([...be]);function ye(e){const t=e.inputs.map(((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,n.G)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")}));return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map((e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:Q.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map((e=>we(e,t)))};if(e.MergeCoins)return{kind:"MergeCoins",destination:we(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map((e=>we(e,t)))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map((e=>we(e,t)))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map((e=>Array.from((0,n.G)(e)))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:we(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map((e=>we(e,t)))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map((e=>we(e,t))),address:we(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map((e=>Array.from((0,n.G)(e)))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:we(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)}))}}function we(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function ve(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function je(e){return(0,$.union)(Object.entries(e).map((([e,t])=>(0,$.object)({[e]:t}))))}(0,$.object)({version:(0,$.literal)(1),sender:(0,$.optional)((0,$.string)()),expiration:(0,$.nullish)(ie),gasConfig:ce,inputs:(0,$.array)(ne),transactions:(0,$.array)(me)});const Oe=je({GasCoin:(0,$.literal)(!0),Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),Result:(0,$.pipe)((0,$.number)(),(0,$.integer)()),NestedResult:(0,$.tuple)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.pipe)((0,$.number)(),(0,$.integer)())])}),Se=(0,$.object)({budget:(0,$.nullable)(R),price:(0,$.nullable)(R),owner:(0,$.nullable)(A),payment:(0,$.nullable)((0,$.array)(N))}),ke=(0,$.object)({package:U,module:(0,$.string)(),function:(0,$.string)(),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(Oe)}),Ie=(0,$.object)({name:(0,$.string)(),inputs:(0,$.record)((0,$.string)(),(0,$.union)([Oe,(0,$.array)(Oe)])),data:(0,$.record)((0,$.string)(),(0,$.unknown)())}),Ee=je({MoveCall:ke,TransferObjects:(0,$.object)({objects:(0,$.array)(Oe),address:Oe}),SplitCoins:(0,$.object)({coin:Oe,amounts:(0,$.array)(Oe)}),MergeCoins:(0,$.object)({destination:Oe,sources:(0,$.array)(Oe)}),Publish:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U)}),MakeMoveVec:(0,$.object)({type:(0,$.nullable)((0,$.string)()),elements:(0,$.array)(Oe)}),Upgrade:(0,$.object)({modules:(0,$.array)(B),dependencies:(0,$.array)(U),package:U,ticket:Oe}),$Intent:Ie}),Te=je({ImmOrOwnedObject:N,SharedObject:(0,$.object)({objectId:U,initialSharedVersion:R,mutable:(0,$.boolean)()}),Receiving:N}),Pe=je({Object:Te,Pure:(0,$.object)({bytes:B}),UnresolvedPure:(0,$.object)({value:(0,$.unknown)()}),UnresolvedObject:(0,$.object)({objectId:U,version:(0,$.optional)((0,$.nullable)(R)),digest:(0,$.optional)((0,$.nullable)((0,$.string)())),initialSharedVersion:(0,$.optional)((0,$.nullable)(R)),mutable:(0,$.optional)((0,$.nullable)((0,$.boolean)()))})}),Me=je({None:(0,$.literal)(!0),Epoch:R}),$e=(0,$.object)({version:(0,$.literal)(2),sender:(0,$.nullish)(A),expiration:(0,$.nullish)(Me),gasData:Se,inputs:(0,$.array)(Pe),commands:(0,$.array)(Ee),digest:(0,$.optional)((0,$.nullable)((0,$.string)()))}),xe={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,n.s)(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:(0,x.yT)(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:(0,x.yT)(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:(0,x.yT)(e)}}})},Ce={u8:e=>I({readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e,name:e?.name??"u8"}),u16:e=>I({readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e,name:e?.name??"u16"}),u32:e=>I({readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e,name:e?.name??"u32"}),u64:e=>E({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e,name:e?.name??"u64"}),u128:e=>E({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e,name:e?.name??"u128"}),u256:e=>E({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e,name:e?.name??"u256"}),bool:e=>k({size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,name:e?.name??"bool",validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function({serialize:e,...t}){const r=new v({...t,serialize:e,write:(e,t)=>{for(const n of r.serialize(e).toBytes())t.write8(n)}});return r}({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(a(e)),...e,name:e?.name??"uleb128"}),bytes:(e,t)=>k({size:e,read:t=>t.readBytes(e),write:(e,t)=>{t.writeBytes(new Uint8Array(e))},...t,name:t?.name??`bytes[${e}]`,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new v({read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const r=new Uint8Array(e);t.writeULEB(r.length),t.writeBytes(r)},...e,name:e?.name??"vector<u8>",serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:a(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>function({toBytes:e,fromBytes:t,...r}){return new v({...r,read:e=>{const r=e.readULEB(),n=e.readBytes(r);return t(n)},write:(t,r)=>{const n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{const r=e(t),n=a(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})}({toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e,name:e?.name??"string"}),fixedArray:function(e,t,r){return new v({read:r=>{const n=new Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(const n of e)t.write(n,r)},...r,name:r?.name??`${t.name}[${e}]`,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}})},option:function(e){return Ce.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null})},vector:function(e,t){return new v({read:t=>{const r=t.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{r.writeULEB(t.length);for(const n of t)e.write(n,r)},...t,name:t?.name??`vector<${e.name}>`,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}})},tuple:(e,t)=>new M({fields:e,...t}),struct:(e,t,r)=>new T({name:e,fields:t,...r}),enum:(e,t,r)=>new P({name:e,fields:t,...r}),map:function(e,t){return Ce.vector(Ce.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[r,n]of e)t.set(r,n);return t}})},lazy:e=>function(e){let t=null;function r(){return t||(t=e()),t}return new v({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}(e)},Ae=Ce.bytes(x.kT).transform({validate:e=>{const t="string"==typeof e?e:(0,i.N)(e);if(!t||!(0,x.oI)((0,x.yT)(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?(0,i.H)((0,x.yT)(e)):e,output:e=>(0,x.yT)((0,i.N)(e))}),Ue=Ce.byteVector().transform({name:"ObjectDigest",input:e=>(0,s.L)(e),output:e=>(0,s.z)(new Uint8Array(e)),validate:e=>{if(32!==(0,s.L)(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),Be=Ce.struct("SuiObjectRef",{objectId:Ae,version:Ce.u64(),digest:Ue}),Re=Ce.struct("SharedObjectRef",{objectId:Ae,initialSharedVersion:Ce.u64(),mutable:Ce.bool()}),Ne=Ce.enum("ObjectArg",{ImmOrOwnedObject:Be,SharedObject:Re,Receiving:Be}),ze=Ce.enum("Owner",{AddressOwner:Ae,ObjectOwner:Ae,Shared:Ce.struct("Shared",{initialSharedVersion:Ce.u64()}),Immutable:null,ConsensusAddressOwner:Ce.struct("ConsensusAddressOwner",{owner:Ae,startVersion:Ce.u64()})}),De=Ce.enum("CallArg",{Pure:Ce.struct("Pure",{bytes:Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})}),Object:Ne}),_e=Ce.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:Ce.lazy((()=>_e)),struct:Ce.lazy((()=>Je)),u16:null,u32:null,u256:null}),Ve=_e.transform({input:e=>"string"==typeof e?Q.parseFromStr(e,!0):e,output:e=>Q.tagToString(e)}),Ke=Ce.enum("Argument",{GasCoin:null,Input:Ce.u16(),Result:Ce.u16(),NestedResult:Ce.tuple([Ce.u16(),Ce.u16()])}),Le=Ce.struct("ProgrammableMoveCall",{package:Ae,module:Ce.string(),function:Ce.string(),typeArguments:Ce.vector(Ve),arguments:Ce.vector(Ke)}),Fe=Ce.enum("Command",{MoveCall:Le,TransferObjects:Ce.struct("TransferObjects",{objects:Ce.vector(Ke),address:Ke}),SplitCoins:Ce.struct("SplitCoins",{coin:Ke,amounts:Ce.vector(Ke)}),MergeCoins:Ce.struct("MergeCoins",{destination:Ke,sources:Ce.vector(Ke)}),Publish:Ce.struct("Publish",{modules:Ce.vector(Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})),dependencies:Ce.vector(Ae)}),MakeMoveVec:Ce.struct("MakeMoveVec",{type:(Ge=Ve,Ce.enum("Option",{None:null,Some:Ge})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:Ce.vector(Ke)}),Upgrade:Ce.struct("Upgrade",{modules:Ce.vector(Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))})),dependencies:Ce.vector(Ae),package:Ae,ticket:Ke})});var Ge;const We=Ce.struct("ProgrammableTransaction",{inputs:Ce.vector(De),commands:Ce.vector(Fe)}),qe=Ce.enum("TransactionKind",{ProgrammableTransaction:We,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),He=Ce.enum("TransactionExpiration",{None:null,Epoch:Ce.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})});const Je=Ce.struct("StructTag",{address:Ae,module:Ce.string(),name:Ce.string(),typeParams:Ce.vector(_e)}),Ze=Ce.struct("GasData",{payment:Ce.vector(Be),owner:Ae,price:Ce.u64(),budget:Ce.u64()}),Ye=Ce.struct("TransactionDataV1",{kind:qe,sender:Ae,gasData:Ze,expiration:He}),Xe=Ce.enum("TransactionData",{V1:Ye}),Qe=Ce.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),et=Ce.enum("IntentVersion",{V0:null}),tt=Ce.enum("AppId",{Sui:null}),rt=Ce.struct("Intent",{scope:Qe,version:et,appId:tt});function nt(e){return Ce.struct(`IntentMessage<${e.name}>`,{intent:rt,value:e})}const it=Ce.enum("CompressedSignature",{ED25519:Ce.bytes(64),Secp256k1:Ce.bytes(64),Secp256r1:Ce.bytes(64),ZkLogin:Ce.byteVector(),Passkey:Ce.byteVector()}),st=Ce.enum("PublicKey",{ED25519:Ce.bytes(32),Secp256k1:Ce.bytes(33),Secp256r1:Ce.bytes(33),ZkLogin:Ce.byteVector(),Passkey:Ce.bytes(33)}),at=Ce.struct("MultiSigPkMap",{pubKey:st,weight:Ce.u8()}),ot=Ce.struct("MultiSigPublicKey",{pk_map:Ce.vector(at),threshold:Ce.u16()}),ct=Ce.struct("MultiSig",{sigs:Ce.vector(it),bitmap:Ce.u16(),multisig_pk:ot}),ut=Ce.byteVector().transform({input:e=>"string"==typeof e?(0,n.G)(e):e,output:e=>(0,n.s)(new Uint8Array(e))}),lt=Ce.struct("SenderSignedTransaction",{intentMessage:nt(Xe),txSignatures:Ce.vector(ut)}),dt=Ce.vector(lt,{name:"SenderSignedData"}),pt=Ce.struct("PasskeyAuthenticator",{authenticatorData:Ce.byteVector(),clientDataJson:Ce.string(),userSignature:Ce.byteVector()}),ht=Ce.enum("PackageUpgradeError",{UnableToFetchPackage:Ce.struct("UnableToFetchPackage",{packageId:Ae}),NotAPackage:Ce.struct("NotAPackage",{objectId:Ae}),IncompatibleUpgrade:null,DigestDoesNotMatch:Ce.struct("DigestDoesNotMatch",{digest:Ce.byteVector()}),UnknownUpgradePolicy:Ce.struct("UnknownUpgradePolicy",{policy:Ce.u8()}),PackageIDDoesNotMatch:Ce.struct("PackageIDDoesNotMatch",{packageId:Ae,ticketId:Ae})}),ft=Ce.struct("ModuleId",{address:Ae,name:Ce.string()}),gt=Ce.struct("MoveLocation",{module:ft,function:Ce.u16(),instruction:Ce.u16(),functionName:Ce.option(Ce.string())}),bt=Ce.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:Ce.struct("IndexOutOfBounds",{idx:Ce.u16()}),SecondaryIndexOutOfBounds:Ce.struct("SecondaryIndexOutOfBounds",{resultIdx:Ce.u16(),secondaryIdx:Ce.u16()}),InvalidResultArity:Ce.struct("InvalidResultArity",{resultIdx:Ce.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),mt=Ce.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),yt=Ce.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:Ce.struct("MoveObjectTooBig",{objectSize:Ce.u64(),maxObjectSize:Ce.u64()}),MovePackageTooBig:Ce.struct("MovePackageTooBig",{objectSize:Ce.u64(),maxObjectSize:Ce.u64()}),CircularObjectOwnership:Ce.struct("CircularObjectOwnership",{object:Ae}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:Ce.option(gt),MoveAbort:Ce.tuple([gt,Ce.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:Ce.struct("CommandArgumentError",{argIdx:Ce.u16(),kind:bt}),TypeArgumentError:Ce.struct("TypeArgumentError",{argumentIdx:Ce.u16(),kind:mt}),UnusedValueWithoutDrop:Ce.struct("UnusedValueWithoutDrop",{resultIdx:Ce.u16(),secondaryIdx:Ce.u16()}),InvalidPublicFunctionReturnType:Ce.struct("InvalidPublicFunctionReturnType",{idx:Ce.u16()}),InvalidTransferObject:null,EffectsTooLarge:Ce.struct("EffectsTooLarge",{currentSize:Ce.u64(),maxSize:Ce.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:Ce.struct("PackageUpgradeError",{upgradeError:ht}),WrittenObjectsTooLarge:Ce.struct("WrittenObjectsTooLarge",{currentSize:Ce.u64(),maxSize:Ce.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:Ce.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:Ce.vector(Ae)}),AddressDeniedForCoin:Ce.struct("AddressDeniedForCoin",{address:Ae,coinType:Ce.string()}),CoinTypeGlobalPause:Ce.struct("CoinTypeGlobalPause",{coinType:Ce.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),wt=Ce.enum("ExecutionStatus",{Success:null,Failed:Ce.struct("ExecutionFailed",{error:yt,command:Ce.option(Ce.u64())})}),vt=Ce.struct("GasCostSummary",{computationCost:Ce.u64(),storageCost:Ce.u64(),storageRebate:Ce.u64(),nonRefundableStorageFee:Ce.u64()}),jt=Ce.struct("TransactionEffectsV1",{status:wt,executedEpoch:Ce.u64(),gasUsed:vt,modifiedAtVersions:Ce.vector(Ce.tuple([Ae,Ce.u64()])),sharedObjects:Ce.vector(Be),transactionDigest:Ue,created:Ce.vector(Ce.tuple([Be,ze])),mutated:Ce.vector(Ce.tuple([Be,ze])),unwrapped:Ce.vector(Ce.tuple([Be,ze])),deleted:Ce.vector(Be),unwrappedThenDeleted:Ce.vector(Be),wrapped:Ce.vector(Be),gasObject:Ce.tuple([Be,ze]),eventsDigest:Ce.option(Ue),dependencies:Ce.vector(Ue)}),Ot=Ce.tuple([Ce.u64(),Ue]),St=Ce.enum("ObjectIn",{NotExist:null,Exist:Ce.tuple([Ot,ze])}),kt=Ce.enum("ObjectOut",{NotExist:null,ObjectWrite:Ce.tuple([Ue,ze]),PackageWrite:Ot}),It=Ce.enum("IDOperation",{None:null,Created:null,Deleted:null}),Et=Ce.struct("EffectsObjectChange",{inputState:St,outputState:kt,idOperation:It}),Tt=Ce.enum("UnchangedSharedKind",{ReadOnlyRoot:Ot,MutateDeleted:Ce.u64(),ReadDeleted:Ce.u64(),Cancelled:Ce.u64(),PerEpochConfig:null}),Pt=Ce.struct("TransactionEffectsV2",{status:wt,executedEpoch:Ce.u64(),gasUsed:vt,transactionDigest:Ue,gasObjectIndex:Ce.option(Ce.u32()),eventsDigest:Ce.option(Ue),dependencies:Ce.vector(Ue),lamportVersion:Ce.u64(),changedObjects:Ce.vector(Ce.tuple([Ae,Et])),unchangedSharedObjects:Ce.vector(Ce.tuple([Ae,Tt])),auxDataDigest:Ce.option(Ue)}),Mt=Ce.enum("TransactionEffects",{V1:jt,V2:Pt}),$t={...Ce,U8:Ce.u8(),U16:Ce.u16(),U32:Ce.u32(),U64:Ce.u64(),U128:Ce.u128(),U256:Ce.u256(),ULEB128:Ce.uleb128(),Bool:Ce.bool(),String:Ce.string(),Address:Ae,AppId:tt,Argument:Ke,CallArg:De,Command:Fe,CompressedSignature:it,GasData:Ze,Intent:rt,IntentMessage:nt,IntentScope:Qe,IntentVersion:et,MultiSig:ct,MultiSigPkMap:at,MultiSigPublicKey:ot,ObjectArg:Ne,ObjectDigest:Ue,Owner:ze,PasskeyAuthenticator:pt,ProgrammableMoveCall:Le,ProgrammableTransaction:We,PublicKey:st,SenderSignedData:dt,SenderSignedTransaction:lt,SharedObjectRef:Re,StructTag:Je,SuiObjectRef:Be,TransactionData:Xe,TransactionDataV1:Ye,TransactionEffects:Mt,TransactionExpiration:He,TransactionKind:qe,TypeTag:Ve};var xt=r(800969);const Ct="object",At="ID",Ut="ascii",Bt="String",Rt="string",Nt="String",zt="option",Dt="Option";function _t(e){if("string"==typeof e)switch(e){case"address":return $t.Address;case"bool":return $t.Bool;case"u8":return $t.U8;case"u16":return $t.U16;case"u32":return $t.U32;case"u64":return $t.U64;case"u128":return $t.U128;case"u256":return $t.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return $t.byteVector().transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=_t(e.vector);return t?$t.vector(t):null}if("datatype"in e){const t=(0,x.yT)(e.datatype.package);if(t===(0,x.yT)(xt.ht)){if(e.datatype.module===Ut&&e.datatype.type===Bt)return $t.String;if(e.datatype.module===Rt&&e.datatype.type===Nt)return $t.String;if(e.datatype.module===zt&&e.datatype.type===Dt){const t=_t(e.datatype.typeParameters[0]);return t?$t.vector(t):null}}if(t===(0,x.yT)(xt.Nf)&&e.datatype.module===Ct&&e.datatype.type===At)return $t.Address}return null}function Vt(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:Vt(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(Vt)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}var Kt=r(199544);const Lt=50,Ft=1000n,Gt=5e10;function Wt(e){return async function(t,r,n){return await async function(e,t){const{inputs:r,commands:n}=e,i=[],s=new Set;n.forEach((t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map((t=>"Input"===t.$kind?e.inputs[t.Input]:null)).some((e=>e?.UnresolvedPure||e?.UnresolvedObject&&"boolean"!=typeof e?.UnresolvedObject.mutable))){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}}));const a=new Map;s.size>0&&await Promise.all([...s].map((async e=>{const[r,n,i]=e.split("::"),s=await t.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(e,s.parameters.map((e=>function(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:Vt(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:Vt(e.MutableReference)}:{ref:null,body:Vt(e)}}(e))))}))),i.length&&await Promise.all(i.map((async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const r=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,x.yT)(t.package)===(0,x.yT)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r}))),n.forEach((e=>{if(!e.MoveCall)return;const t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${n}`);i.forEach(((e,n)=>{const i=t.arguments[n];if("Input"!==i.$kind)return;const s=r[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=_t(e.body);if(o)return i.type="pure",void(r[r.indexOf(s)]=xe.Pure(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const c=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;r[i.Input]=c}))}}))}(t,e),await async function(e,t){const r=e.inputs.filter((e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion))),n=[...new Set(r.map((e=>(0,x.Fw)(e.UnresolvedObject.objectId))))],i=n.length?(0,Kt.y)(n,Lt):[],s=(await Promise.all(i.map((e=>t.multiGetObjects({ids:e,options:{showOwner:!0}}))))).flat(),a=new Map(n.map(((e,t)=>[e,s[t]]))),o=Array.from(a).filter((([e,t])=>t.error)).map((([e,t])=>JSON.stringify(t.error)));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=s.map((e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,r=t&&"object"==typeof t?"Shared"in t?t.Shared.initial_shared_version:"ConsensusAddressOwner"in t?t.ConsensusAddressOwner.start_version:null:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}})),u=new Map(n.map(((e,t)=>[e,c[t]])));for(const[t,r]of e.inputs.entries()){if(!r.UnresolvedObject)continue;let n;const i=(0,x.yT)(r.UnresolvedObject.objectId),s=u.get(i);r.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?n=xe.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:r.UnresolvedObject.mutable||qt(e,t)}):Ht(e,t)&&(n=xe.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(r)]=n??xe.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??s?.digest,version:r.UnresolvedObject.version??s?.version})}}(t,e),r.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await t.getReferenceGasPrice()))}(t,e),await async function(e,t){if(e.gasConfig.budget)return;const r=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Gt),payment:[]}}})});if("success"!==r.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=Ft*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(t,e),await async function(e,t){if(!e.gasConfig.payment){const r=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:xt.uq})).data.filter((t=>!e.inputs.find((e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)))).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!r.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map((e=>(0,$.parse)(N,e)))}}(t,e)),await n()}}function qt(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind&&"TransferObjects"!==t.$kind||(r=!0)})),r}function Ht(e,t){let r=!1;return e.getInputUses(t,((e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const n=t.MoveCall.arguments.indexOf(e);r=function(e){return"object"==typeof e.body&&"datatype"in e.body&&("0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type)}(t.MoveCall._argumentTypes[n])||r}})),r}function Jt(e,t){return!!e.inputs.some((e=>e.UnresolvedObject||e.UnresolvedPure))||!(t.onlyTransactionKind||e.gasConfig.price&&e.gasConfig.budget&&e.gasConfig.payment)}async function Zt(e,t,r){if(function(e){for(const t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach((t=>{Xt(t,$t.U64,e)}));break;case"TransferObjects":Xt(t.TransferObjects.address,$t.Address,e)}}(e),!Jt(e,t))return await Yt(e),r();const n=function(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(t);return(n.core?.resolveTransactionPlugin()??Wt(n))(e,t,(async()=>{await Yt(e),await r()}))}function Yt(e){e.inputs.forEach(((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)}))}function Xt(e,t,r){if("Input"!==e.$kind)return;const n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=xe.Pure(t.serialize(n.UnresolvedPure.value)))}function Qt(e){switch(e){case"u8":return Ce.u8();case"u16":return Ce.u16();case"u32":return Ce.u32();case"u64":return Ce.u64();case"u128":return Ce.u128();case"u256":return Ce.u256();case"bool":return Ce.bool();case"string":return Ce.string();case"id":case"address":return Ae}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,r]=t.slice(1);return"vector"===e?Ce.vector(Qt(r)):Ce.option(Qt(r))}throw new Error(`Invalid Pure type name: ${e}`)}function er(e){function t(t,r){if("string"==typeof t)return e(Qt(t).serialize(r));if(t instanceof Uint8Array||O(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e($t.U8.serialize(t)),t.u16=t=>e($t.U16.serialize(t)),t.u32=t=>e($t.U32.serialize(t)),t.u64=t=>e($t.U64.serialize(t)),t.u128=t=>e($t.U128.serialize(t)),t.u256=t=>e($t.U256.serialize(t)),t.bool=t=>e($t.Bool.serialize(t)),t.string=t=>e($t.String.serialize(t)),t.address=t=>e($t.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e($t.vector(Qt(t)).serialize(r)),t.option=(t,r)=>e($t.option(Qt(t)).serialize(r)),t}var tr=r(546275);function rr(e){return"string"==typeof e?(0,x.yT)(e):e.Object?e.Object.ImmOrOwnedObject?(0,x.yT)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,x.yT)(e.Object.Receiving.objectId):(0,x.yT)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,x.yT)(e.UnresolvedObject.objectId):void 0}function nr(e,t,r){const n=e=>{switch(e.$kind){case"Input":{const r=t.get(e.Input);if(void 0===r)throw new Error(`Input ${e.Input} not found in input mapping`);return{...e,Input:r}}case"Result":{const t=r.get(e.Result);return void 0!==t?{...e,Result:t}:e}case"NestedResult":{const t=r.get(e.NestedResult[0]);return void 0!==t?{...e,NestedResult:[t,e.NestedResult[1]]}:e}default:return e}};switch(e.$kind){case"MoveCall":e.MoveCall.arguments=e.MoveCall.arguments.map(n);break;case"TransferObjects":e.TransferObjects.objects=e.TransferObjects.objects.map(n),e.TransferObjects.address=n(e.TransferObjects.address);break;case"SplitCoins":e.SplitCoins.coin=n(e.SplitCoins.coin),e.SplitCoins.amounts=e.SplitCoins.amounts.map(n);break;case"MergeCoins":e.MergeCoins.destination=n(e.MergeCoins.destination),e.MergeCoins.sources=e.MergeCoins.sources.map(n);break;case"MakeMoveVec":e.MakeMoveVec.elements=e.MakeMoveVec.elements.map(n);break;case"Upgrade":e.Upgrade.ticket=n(e.Upgrade.ticket);break;case"$Intent":{const t=e.$Intent.inputs;e.$Intent.inputs={};for(const[r,i]of Object.entries(t))e.$Intent.inputs[r]=Array.isArray(i)?i.map(n):n(i);break}}}function ir(e){return(0,x.yT)(e).replace("0x","")}class sr{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=$t.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=$t.TransactionData.parse(e),r=t?.V1,n=r.kind.ProgrammableTransaction;if(!r||!n)throw new Error("Unable to deserialize from bytes.");return sr.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:n.inputs,commands:n.commands})}static restore(e){return 2===e.version?new sr((0,$.parse)(J,e)):new sr((0,$.parse)(J,function(e){return(0,$.parse)(J,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map((e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))??null},inputs:e.inputs.map((e=>{if("Input"===e.kind){if((0,$.is)(re,e.value)){const t=(0,$.parse)(re,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,n.s)(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")})),commands:e.transactions.map((e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?Q.tagToString(e.type.Some):null,elements:e.objects.map((e=>ve(e)))}};case"MergeCoins":return{MergeCoins:{destination:ve(e.destination),sources:e.sources.map((e=>ve(e)))}};case"MoveCall":{const[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map((e=>ve(e)))}}}case"Publish":return{Publish:{modules:e.modules.map((e=>(0,n.s)(Uint8Array.from(e)))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ve(e.coin),amounts:e.amounts.map((e=>ve(e)))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map((e=>ve(e))),address:ve(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map((e=>(0,n.s)(Uint8Array.from(e)))),dependencies:e.dependencies,package:e.packageId,ticket:ve(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)}))})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const r=Array.from("TransactionData::").map((e=>e.charCodeAt(0))),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),(0,tr.R)(n,{dkLen:32})}(0,e);return(0,s.z)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){const n=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:n,commands:i}};if(r)return $t.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,c={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:ir(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:ir(this.gasData.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return $t.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments(((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r)))}mapCommandArguments(e,t){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map((n=>t(n,r,e)));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map((n=>t(n,r,e))),r.TransferObjects.address=t(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=t(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map((n=>t(n,r,e)));break;case"MergeCoins":r.MergeCoins.destination=t(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map((n=>t(n,r,e)));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map((n=>t(n,r,e)));break;case"Upgrade":r.Upgrade.ticket=t(r.Upgrade.ticket,r,e);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map((n=>t(n,r,e))):t(s,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,r=e){if(!Array.isArray(t))return void(this.commands[e]=t);const n=t.length-1;this.commands.splice(e,1,...structuredClone(t)),this.mapArguments(((i,s,a)=>{if(a<e+t.length)return i;if("number"!=typeof r&&("Result"===i.$kind&&i.Result===e||"NestedResult"===i.$kind&&i.NestedResult[0]===e)){if("NestedResult"in i&&0!==i.NestedResult[1])throw new Error(`Cannot replace command ${e} with a specific result type: NestedResult[${e}, ${i.NestedResult[1]}] references a nested element that cannot be mapped to the replacement result`);return(0,$.parse)(z,structuredClone(r))}switch(i.$kind){case"Result":i.Result===e&&"number"==typeof r&&(i.Result=r),i.Result>e&&(i.Result+=n);break;case"NestedResult":if(i.NestedResult[0]===e&&"number"==typeof r)return{$kind:"NestedResult",NestedResult:[r,i.NestedResult[1]]};i.NestedResult[0]>e&&(i.NestedResult[0]+=n)}return i}))}replaceCommandWithTransaction(e,t,r){if("Result"!==r.$kind&&"NestedResult"!==r.$kind)throw new Error("Result must be of kind Result or NestedResult");this.insertTransaction(e,t),this.replaceCommand(e+t.commands.length,[],"Result"in r?{NestedResult:[r.Result+e,0]}:{NestedResult:[r.NestedResult[0]+e,r.NestedResult[1]]})}insertTransaction(e,t){const r=new Map,n=new Map;for(let e=0;e<t.inputs.length;e++){const n=t.inputs[e],i=rr(n);let s=-1;if(void 0!==i&&(s=this.inputs.findIndex((e=>rr(e)===i)),-1!==s&&this.inputs[s].Object?.SharedObject&&n.Object?.SharedObject&&(this.inputs[s].Object.SharedObject.mutable=this.inputs[s].Object.SharedObject.mutable||n.Object.SharedObject.mutable)),-1!==s)r.set(e,s);else{const t=this.inputs.length;this.inputs.push(n),r.set(e,t)}}for(let r=0;r<t.commands.length;r++)n.set(r,e+r);const i=[];for(let e=0;e<t.commands.length;e++){const s=structuredClone(t.commands[e]);nr(s,r,n),i.push(s)}this.commands.splice(e,0,...i);const s=i.length;s>0&&this.mapArguments(((t,r,n)=>{if(n>=e&&n<e+i.length)return t;switch(t.$kind){case"Result":t.Result>=e&&(t.Result+=s);break;case"NestedResult":t.NestedResult[0]>=e&&(t.NestedResult[0]+=s)}return t}))}getDigest(){const e=this.build({onlyTransactionKind:!1});return sr.getDigestFromBytes(e)}snapshot(){return(0,$.parse)(J,this)}shallowClone(){return new sr({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}applyResolvedData(e){this.sender||(this.sender=e.sender??null),this.expiration||(this.expiration=e.expiration??null),this.gasData.budget||(this.gasData.budget=e.gasData.budget),this.gasData.owner||(this.gasData.owner=e.gasData.owner??null),this.gasData.payment||(this.gasData.payment=e.gasData.payment),this.gasData.price||(this.gasData.price=e.gasData.price);for(let t=0;t<this.inputs.length;t++){const r=this.inputs[t],n=e.inputs[t];switch(r.$kind){case"UnresolvedPure":if("Pure"!==n.$kind)throw new Error(`Expected input at index ${t} to resolve to a Pure argument, but got ${JSON.stringify(n)}`);this.inputs[t]=n;break;case"UnresolvedObject":if("Object"!==n.$kind)throw new Error(`Expected input at index ${t} to resolve to an Object argument, but got ${JSON.stringify(n)}`);if("ImmOrOwnedObject"===n.Object.$kind||"Receiving"===n.Object.$kind){const e=r.UnresolvedObject,i=n.Object.ImmOrOwnedObject??n.Object.Receiving;if((0,x.yT)(e.objectId)!==(0,x.yT)(i.objectId)||null!=e.version&&e.version!==i.version||null!=e.digest&&e.digest!==i.digest||null!=e.mutable||null!=e.initialSharedVersion)throw new Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}else{if("SharedObject"!==n.Object.$kind)throw new Error(`Input at index ${t} resolved to an unexpected Object kind: ${JSON.stringify(n.Object)}`);{const e=r.UnresolvedObject,i=n.Object.SharedObject;if((0,x.yT)(e.objectId)!==(0,x.yT)(i.objectId)||null!=e.initialSharedVersion&&e.initialSharedVersion!==i.initialSharedVersion||null!=e.mutable&&e.mutable!==i.mutable||null!=e.version||null!=e.digest)throw new Error(`Input at index ${t} did not match unresolved object. ${JSON.stringify(e)} is not compatible with ${JSON.stringify(i)}`)}}this.inputs[t]=n}}}}var ar,or,cr=e=>{throw TypeError(e)},ur=(e,t,r)=>t.has(e)||cr("Cannot "+r),lr=(e,t,r)=>(ur(e,t,"read from private field"),r?r.call(e):t.get(e)),dr=(e,t,r)=>t.has(e)?cr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pr=(e,t,r,n)=>(ur(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);ar=new WeakMap,or=new WeakMap;let hr=class e{constructor({prefix:e,cache:t}={}){dr(this,ar),dr(this,or),pr(this,ar,e??[]),pr(this,or,t??new Map)}read(e,t){const r=[lr(this,ar),...e].join(":");if(lr(this,or).has(r))return lr(this,or).get(r);const n=t();return lr(this,or).set(r,n),"object"==typeof n&&null!==n&&"then"in n?Promise.resolve(n).then((e=>(lr(this,or).set(r,e),e))).catch((e=>{throw lr(this,or).delete(r),e})):n}readSync(e,t){const r=[lr(this,ar),...e].join(":");if(lr(this,or).has(r))return lr(this,or).get(r);const n=t();return lr(this,or).set(r,n),n}clear(e){const t=[...lr(this,ar),...e??[]].join(":");if(t)for(const e of lr(this,or).keys())e.startsWith(t)&&lr(this,or).delete(e);else lr(this,or).clear()}scope(t){return new e({prefix:[...lr(this,ar),...Array.isArray(t)?t:[t]],cache:lr(this,or)})}};var fr,gr,br,mr,yr,wr,vr,jr,Or,Sr,kr=r(293228),Ir=r(469271),Er=e=>{throw TypeError(e)},Tr=(e,t,r)=>t.has(e)||Er("Cannot "+r),Pr=(e,t,r)=>(Tr(e,t,"read from private field"),r?r.call(e):t.get(e)),Mr=(e,t,r)=>t.has(e)?Er("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$r=(e,t,r,n)=>(Tr(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),xr=(e,t,r)=>(Tr(e,t,"access private method"),r);const Cr="/",Ar={"Mvr-Source":"@mysten/sui@1.45.2"};class Ur{constructor({cache:e,url:t,pageSize:r=50,overrides:n}){Mr(this,yr),Mr(this,fr),Mr(this,gr),Mr(this,br),Mr(this,mr),$r(this,fr,e),$r(this,gr,t),$r(this,br,r),$r(this,mr,{packages:n?.packages,types:n?.types}),function(e){if(e?.packages)for(const[t,r]of Object.entries(e.packages)){if(!(0,Ir.Y)(t))throw new Error(`Invalid package name: ${t}`);if(!(0,x.oI)((0,x.yT)(r)))throw new Error(`Invalid package ID: ${r}`)}if(e?.types)for(const[t,r]of Object.entries(e.types)){if((0,x.$A)(t).typeParams.length>0)throw new Error("Type overrides must be first-level only. If you want to supply generic types, just pass each type individually.");const e=(0,x.$A)(r);if(!(0,x.oI)(e.address))throw new Error(`Invalid type: ${r}`)}}(Pr(this,mr))}async resolvePackage({package:e}){return Nr(e)?{package:await Pr(this,yr,wr).load(e)}:{package:e}}async resolveType({type:e}){if(!Nr(e))return{type:e};const t=[...Br(e)],r=await Pr(this,yr,vr).loadMany(t),n={};for(let e=0;e<t.length;e++){const i=r[e];if(i instanceof Error)throw i;n[t[e]]=i}return{type:Rr(e,n)}}async resolve({types:e=[],packages:t=[]}){const r=new Set;for(const t of e??[])Br(t,r);const n=[...r],[i,s]=await Promise.all([n.length>0?Pr(this,yr,vr).loadMany(n):[],t.length>0?Pr(this,yr,wr).loadMany(t):[]]),a={...Pr(this,mr)?.types};for(const[e,t]of n.entries()){const r=i[e];if(r instanceof Error)throw r;a[t]=r}const o={};for(const t of e??[]){const e=Rr(t,a);o[t]={type:e}}const c={};for(const[e,r]of(t??[]).entries()){const t=Pr(this,mr)?.packages?.[r]??s[e];if(t instanceof Error)throw t;c[r]={package:t}}return{types:o,packages:c}}}function Br(e,t=new Set){if("string"==typeof e&&!Nr(e))return t;const r=zr(e)?e:(0,x.$A)(e);Nr(r.address)&&t.add(`${r.address}::${r.module}::${r.name}`);for(const e of r.typeParams)Br(e,t);return t}function Rr(e,t){const r=zr(e)?e:(0,x.$A)(e),n=`${r.address}::${r.module}::${r.name}`,i=t[n];return(0,x.kX)({...r,address:i?i.split("::")[0]:r.address,typeParams:r.typeParams.map((e=>Rr(e,t)))})}function Nr(e){return e.includes(Cr)||e.includes("@")||e.includes(".sui")}function zr(e){return"object"==typeof e&&"address"in e&&"module"in e&&"name"in e&&"typeParams"in e}function Dr(e){const t=new Set;for(const r of e)if(Nr(r)){if(!(0,Ir.S)(r))throw new Error(`Invalid type with names: ${r}`);t.add(r)}return t}fr=new WeakMap,gr=new WeakMap,br=new WeakMap,mr=new WeakMap,yr=new WeakSet,wr=function(){return Pr(this,fr).readSync(["#mvrPackageDataLoader",Pr(this,gr)??""],(()=>{const e=new kr.R((async e=>{if(!Pr(this,gr))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await xr(this,yr,jr).call(this,e);return e.map((e=>t[e]??new Error(`Failed to resolve package: ${e}`)))})),t=Pr(this,mr)?.packages;if(t)for(const[r,n]of Object.entries(t))e.prime(r,n);return e}))},vr=function(){return Pr(this,fr).readSync(["#mvrTypeDataLoader",Pr(this,gr)??""],(()=>{const e=new kr.R((async e=>{if(!Pr(this,gr))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await xr(this,yr,Or).call(this,e);return e.map((e=>t[e]??new Error(`Failed to resolve type: ${e}`)))})),t=Pr(this,mr)?.types;if(t)for(const[r,n]of Object.entries(t))e.prime(r,n);return e}))},jr=async function(e){if(0===e.length)return{};const t=(0,Kt.y)(e,Pr(this,br)),r={};return await Promise.all(t.map((async e=>{const t=await xr(this,yr,Sr).call(this,"/v1/resolution/bulk",{names:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const n=t.resolution[e]?.package_id;n&&(r[e]=n)}}))),r},Or=async function(e){if(0===e.length)return{};const t=(0,Kt.y)(e,Pr(this,br)),r={};return await Promise.all(t.map((async e=>{const t=await xr(this,yr,Sr).call(this,"/v1/struct-definition/bulk",{types:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const n=t.resolution[e]?.type_tag;n&&(r[e]=n)}}))),r},Sr=async function(e,t){if(!Pr(this,gr))throw new Error("MVR Api URL is not set for the current client");const r=await fetch(`${Pr(this,gr)}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...Ar},body:JSON.stringify(t)});if(!r.ok){const e=await r.json().catch((()=>({})));throw new Error(`Failed to resolve types: ${e?.message}`)}return r.json()};const _r=new WeakMap;var Vr,Kr,Lr,Fr,Gr,Wr,qr,Hr,Jr,Zr,Yr,Xr,Qr,en,tn,rn,nn,sn,an,on=e=>{throw TypeError(e)},cn=(e,t,r)=>t.has(e)||on("Cannot "+r),un=(e,t,r)=>(cn(e,t,"read from private field"),r?r.call(e):t.get(e)),ln=(e,t,r)=>t.has(e)?on("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dn=(e,t,r,n)=>(cn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),pn=(e,t,r)=>(cn(e,t,"access private method"),r);function hn(e,t=1/0){const r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",get NestedResult(){return["function"==typeof e?e():e,t]}});return new Proxy({$kind:"Result",get Result(){return"function"==typeof e?e():e}},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;const i=parseInt(r,10);return Number.isNaN(i)||i<0?void 0:n(i)}})}const fn=Symbol.for("@mysten/transaction"),gn={buildPlugins:new Map,serializationPlugins:new Map},bn=Symbol.for("@mysten/transaction/registry");function mn(){try{const e=globalThis;return e[bn]||(e[bn]=gn),e[bn]}catch{return gn}}const yn=class e{constructor(){ln(this,Zr),ln(this,Vr),ln(this,Kr),ln(this,Lr,new Map),ln(this,Fr,[]),ln(this,Gr,[]),ln(this,Wr,new Set),ln(this,qr,new Set),ln(this,Hr,new Map),ln(this,Jr),this.object=function(e){function t(t){return e(t)}return t.system=e=>{const r=e?.mutable;return t(void 0!==r?xe.SharedObjectRef({objectId:"0x5",initialSharedVersion:1,mutable:r}):{$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x5",initialSharedVersion:1}})},t.clock=()=>t(xe.SharedObjectRef({objectId:"0x6",initialSharedVersion:1,mutable:!1})),t.random=()=>t({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x8",mutable:!1}}),t.denyList=e=>t({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x403",mutable:e?.mutable}}),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[r.object(t)]}),t}((e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&(0,$.is)(z,e))return e;const t=rr(e),r=un(this,Jr).inputs.find((e=>t===rr(e)));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:un(this,Jr).inputs.indexOf(r),type:"object"}:pn(this,Zr,Qr).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,x.yT)(e)}}:e)}));const e=mn();dn(this,Jr,new sr),dn(this,Kr,[...e.buildPlugins.values()]),dn(this,Vr,[...e.serializationPlugins.values()])}static fromKind(t){const r=new e;return dn(r,Jr,sr.fromKindBytes("string"==typeof t?(0,n.G)(t):t)),dn(r,Fr,un(r,Jr).inputs.slice()),dn(r,Gr,un(r,Jr).commands.slice()),dn(r,Wr,new Set(un(r,Gr).map(((e,t)=>t)))),r}static from(t){const r=new e;var i;return(i=t)&&"object"==typeof i&&!0===i[fn]?dn(r,Jr,sr.restore(t.getData())):"string"==typeof t&&t.startsWith("{")?dn(r,Jr,sr.restore(JSON.parse(t))):dn(r,Jr,sr.fromBytes("string"==typeof t?(0,n.G)(t):t)),dn(r,Fr,un(r,Jr).inputs.slice()),dn(r,Gr,un(r,Jr).commands.slice()),dn(r,Wr,new Set(un(r,Gr).map(((e,t)=>t)))),r}static registerGlobalSerializationPlugin(e,t){mn().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){mn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){mn().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){mn().buildPlugins.delete(e)}addSerializationPlugin(e){un(this,Vr).push(e)}addBuildPlugin(e){un(this,Kr).push(e)}addIntentResolver(e,t){if(un(this,Lr).has(e)&&un(this,Lr).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);un(this,Lr).set(e,t)}setSender(e){un(this,Jr).sender=e}setSenderIfNotSet(e){un(this,Jr).sender||(un(this,Jr).sender=e)}setExpiration(e){un(this,Jr).expiration=e?(0,$.parse)(H,e):null}setGasPrice(e){un(this,Jr).gasConfig.price=String(e)}setGasBudget(e){un(this,Jr).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==un(this,Jr).gasData.budget&&(un(this,Jr).gasConfig.budget=String(e))}setGasOwner(e){un(this,Jr).gasConfig.owner=e}setGasPayment(e){un(this,Jr).gasConfig.payment=e.map((e=>(0,$.parse)(N,e)))}get blockData(){return ye(un(this,Jr).snapshot())}getData(){return un(this,Jr).snapshot()}get[fn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:er((e=>O(e)?pn(this,Zr,Qr).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):pn(this,Zr,Qr).call(this,"pure",(0,$.is)(q,e)?(0,$.parse)(q,e):e instanceof Uint8Array?xe.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}})))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(xe.ObjectRef(...e))}receivingRef(...e){return this.object(xe.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(xe.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(un(this,Hr).has(e))return un(this,Hr).get(e);const t=pn(this,Zr,Yr).call(this),r=e(t);if(!r||"object"!=typeof r||!("then"in r))return dn(this,Wr,un(t,Wr)),un(this,Hr).set(e,r),r;const n=pn(this,Zr,Xr).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:un(this,Jr).commands.length,result:null}}});un(this,qr).add(Promise.resolve(r).then((e=>{n.$Intent.data.result=e})));const i=hn((()=>n.$Intent.data.resultIndex));return un(this,Hr).set(e,i),i}return pn(this,Zr,Xr).call(this,e),hn(un(this,Jr).commands.length-1)}splitCoins(e,t){const r=Z.SplitCoins("string"==typeof e?this.object(e):pn(this,Zr,tn).call(this,e),t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):pn(this,Zr,en).call(this,e))));return pn(this,Zr,Xr).call(this,r),hn(un(this,Jr).commands.length-1,t.length)}mergeCoins(e,t){return this.add(Z.MergeCoins(this.object(e),t.map((e=>this.object(e)))))}publish({modules:e,dependencies:t}){return this.add(Z.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(Z.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(Z.MoveCall({...t,arguments:e?.map((e=>pn(this,Zr,en).call(this,e)))}))}transferObjects(e,t){return this.add(Z.TransferObjects(e.map((e=>this.object(e))),"string"==typeof t?this.pure.address(t):pn(this,Zr,en).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(Z.MakeMoveVec({type:e,elements:t.map((e=>this.object(e)))}))}serialize(){return JSON.stringify(ye(un(this,Jr).snapshot()))}async toJSON(e={}){await this.prepareForSerialization(e);const t=this.isFullyResolved();return JSON.stringify((0,$.parse)($e,t?{...un(this,Jr).snapshot(),digest:un(this,Jr).getDigest()}:un(this,Jr).snapshot()),((e,t)=>"bigint"==typeof t?t.toString():t),2)}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}isFullyResolved(){return!(!un(this,Jr).sender||un(this,qr).size>0||un(this,Jr).commands.some((e=>e.$Intent))||Jt(un(this,Jr),{}))}async build(e={}){return await this.prepareForSerialization(e),await pn(this,Zr,rn).call(this,e),un(this,Jr).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await pn(this,Zr,rn).call(this,e),un(this,Jr).getDigest()}async prepareForSerialization(e){await pn(this,Zr,sn).call(this),pn(this,Zr,an).call(this);const t=new Set;for(const e of un(this,Jr).commands)e.$Intent&&t.add(e.$Intent.name);const r=[...un(this,Vr)];for(const n of t)if(!e.supportedIntents?.includes(n)){if(!un(this,Lr).has(n))throw new Error(`Missing intent resolver for ${n}`);r.push(un(this,Lr).get(n))}r.push((e=>{let t;if(e){const r=e.overrides??{packages:{},types:{}};_r.has(r)||_r.set(r,new hr),t=new Ur({cache:_r.get(r),url:e.url,pageSize:e.pageSize,overrides:r})}return async(e,r,n)=>{const i=function(e){const t=new Set,r=new Set;for(const n of e.commands)switch(n.$kind){case"MakeMoveVec":n.MakeMoveVec.type&&Dr([n.MakeMoveVec.type]).forEach((e=>{r.add(e)}));break;case"MoveCall":const e=n.MoveCall,i=e.package.split("::")[0];if(Nr(i)){if(!(0,Ir.Y)(i))throw new Error(`Invalid package name: ${i}`);t.add(i)}Dr(e.typeArguments??[]).forEach((e=>{r.add(e)}))}return{packages:[...t],types:[...r]}}(e);if(0===i.types.length&&0===i.packages.length)return n();const s=await(t||function(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(r).core.mvr).resolve({types:i.types,packages:i.packages});!function(e,t){for(const r of e.commands){if(r.MakeMoveVec?.type){if(!Nr(r.MakeMoveVec.type))continue;if(!t.types[r.MakeMoveVec.type])throw new Error(`No resolution found for type: ${r.MakeMoveVec.type}`);r.MakeMoveVec.type=t.types[r.MakeMoveVec.type].type}const e=r.MoveCall;if(!e)continue;const n=e.package.split("::"),i=n[0];if(Nr(i)&&!t.packages[i])throw new Error(`No address found for package: ${i}`);Nr(i)&&(n[0]=t.packages[i].package,e.package=n.join("::"));const s=e.typeArguments;if(s){for(let e=0;e<s.length;e++)if(Nr(s[e])){if(!t.types[s[e]])throw new Error(`No resolution found for type: ${s[e]}`);s[e]=t.types[s[e]].type}e.typeArguments=s}}}(e,s),await n()}})()),await pn(this,Zr,nn).call(this,r,e)}};Vr=new WeakMap,Kr=new WeakMap,Lr=new WeakMap,Fr=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,qr=new WeakMap,Hr=new WeakMap,Jr=new WeakMap,Zr=new WeakSet,Yr=function(){const e=new yn;return dn(e,Jr,un(this,Jr)),dn(e,Vr,un(this,Vr)),dn(e,Kr,un(this,Kr)),dn(e,Lr,un(this,Lr)),dn(e,qr,un(this,qr)),dn(e,Wr,new Set(un(this,Wr))),dn(e,Hr,un(this,Hr)),un(this,Fr).push(un(e,Fr)),un(this,Gr).push(un(e,Gr)),e},Xr=function(e){const t=un(this,Jr).commands.length;return un(this,Gr).push(e),un(this,Wr).add(t),un(this,Jr).commands.push(e),un(this,Jr).mapCommandArguments(t,(e=>{if("Result"===e.$kind&&!un(this,Wr).has(e.Result))throw new Error(`Result { Result: ${e.Result} } is not available to use in the current transaction`);if("NestedResult"===e.$kind&&!un(this,Wr).has(e.NestedResult[0]))throw new Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use in the current transaction`);if("Input"===e.$kind&&e.Input>=un(this,Jr).inputs.length)throw new Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e})),e},Qr=function(e,t){return un(this,Fr).push(t),un(this,Jr).addInput(e,t)},en=function(e){return O(e)?this.pure(e):pn(this,Zr,tn).call(this,e)},tn=function(e){if("function"==typeof e){const t=this.add(e);return"function"==typeof t?pn(this,Zr,tn).call(this,t):(0,$.parse)(z,t)}return(0,$.parse)(z,e)},rn=async function(e){if(!e.onlyTransactionKind&&!un(this,Jr).sender)throw new Error("Missing transaction sender");await pn(this,Zr,nn).call(this,[...un(this,Kr),Zt],e)},nn=async function(e,t){try{const r=n=>{if(n>=e.length)return()=>{};const i=e[n];return async()=>{const e=r(n+1);let s=!1,a=!1;if(await i(un(this,Jr),t,(async()=>{if(s)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);s=!0,await e(),a=!0})),!s)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()}finally{dn(this,Fr,un(this,Jr).inputs.slice()),dn(this,Gr,un(this,Jr).commands.slice()),dn(this,Wr,new Set(un(this,Gr).map(((e,t)=>t))))}},sn=async function(){for(;un(this,qr).size>0;){const e=Promise.all(un(this,qr));un(this,qr).clear(),un(this,qr).add(e),await e,un(this,qr).delete(e)}},an=function(){const e=un(this,Jr).commands,t=un(this,Jr).inputs,r=un(this,Gr).flat(1/0),n=un(this,Fr).flat(1/0);if(r.length!==e.length)throw new Error("Unexpected number of commands found in transaction data");if(n.length!==t.length)throw new Error("Unexpected number of inputs found in transaction data");const i=r.filter((e=>"AsyncTransactionThunk"!==e.$Intent?.name));function s(t){const r=e[t];if("AsyncTransactionThunk"===r.$Intent?.name){const e=r.$Intent.data.result;if(null==e)throw new Error("AsyncTransactionThunk has not been resolved");return s(e.Result)}const n=i.indexOf(r);if(-1===n)throw new Error("Unable to find original index for command");return n}un(this,Jr).commands=i,un(this,Jr).inputs=n,dn(this,Gr,i),dn(this,Fr,n),dn(this,Wr,new Set(i.map(((e,t)=>t)))),un(this,Jr).mapArguments((e=>{if("Input"===e.$kind){const r=n.indexOf(t[e.Input]);if(-1===r)throw new Error("Input has not been resolved");return{...e,Input:r}}if("Result"===e.$kind){const t=s(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){const t=s(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e}));for(const[t,r]of e.entries())if("AsyncTransactionThunk"===r.$Intent?.name)try{r.$Intent.data.resultIndex=s(t)}catch{}};let wn=yn},800969:(e,t,r)=>{r.d(t,{H$:()=>a,Nf:()=>s,ht:()=>i,uq:()=>o});var n=r(44115);BigInt(1e9);const i="0x1",s="0x2",a=(0,n.Fw)("0x6"),o=`${s}::sui::SUI`;(0,n.Fw)("0x5"),(0,n.Fw)("0x8")},469271:(e,t,r)=>{r.d(t,{Y:()=>o,S:()=>c});const n=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,i=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,s=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,a=/^\d+$/,o=e=>{const t=e.split("/");if(t.length<2||t.length>3)return!1;const[r,o,c]=t;return!(void 0!==c&&!a.test(c))&&!!function(e){return!(e.length>235)&&(e.includes("@")?n.test(e):i.test(e))}(r)&&s.test(o)&&o.length<64},c=e=>{const t=e.split(/::|<|>|,/);for(const e of t)if(e.includes("/")&&!o(e))return!1;return!0}},44115:(e,t,r)=>{r.d(t,{$A:()=>o,Fw:()=>l,kT:()=>s,kX:()=>c,oI:()=>a,yT:()=>u});var n=r(527478),i=r(469271);const s=32;function a(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===s}function o(e){const[t,r]=e.split("::"),s=(0,i.Y)(t),a=e.slice(t.length+r.length+4),c=a.includes("<")?a.slice(0,a.indexOf("<")):a,l=a.includes("<")?(0,n.fR)(a.slice(a.indexOf("<")+1,a.lastIndexOf(">"))).map((e=>function(e){return e.includes("::")?o(e):e}(e.trim()))):[];return{address:s?t:u(t),module:r,name:c,typeParams:l}}function c(e){const{address:t,module:r,name:n,typeParams:i}="string"==typeof e?o(e):e;return`${t}::${r}::${n}${i?.length>0?`<${i.map((e=>"string"==typeof e?e:c(e))).join(",")}>`:""}`}function u(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*s,"0")}`}function l(e,t=!1){return u(e,t)}}}]);