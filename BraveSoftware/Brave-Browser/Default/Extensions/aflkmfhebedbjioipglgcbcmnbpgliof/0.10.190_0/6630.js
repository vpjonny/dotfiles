"use strict";(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[6630],{813586:(e,t,a)=>{a.d(t,{Cf:()=>u,Gn:()=>d,YX:()=>c,_S:()=>l});var n=a(67324),r=a(44171);class i{static getUrl(e){return globalThis.chrome?.runtime?.getURL(e)}static async openTab(e){return new Promise(((t,a)=>{chrome?.tabs.create(e,(e=>{const r=n.r.checkForError();return r?a(r):t(e)}))}))}}const s="options.html",o="onboarding.html";function c(){const e=`${s}?${r.me}`;i.openTab({url:globalThis.chrome?.runtime?.getURL(e)})}function l(e){const t=`${s}?${r.zc}&${r.b6}${e}`;i.openTab({url:globalThis.chrome?.runtime?.getURL(t)})}function u(){const e=`${o}`;i.openTab({url:globalThis.chrome?.runtime?.getURL(e)})}function d(){const e=`${o}?${r.Sx}`;i.openTab({url:globalThis.chrome?.runtime?.getURL(e)})}},707876:(e,t,a)=>{a.d(t,{ey:()=>s.e,ir:()=>s.i,u5:()=>c.u,xK:()=>l.x,pu:()=>u.pu,lz:()=>d.l,$y:()=>u.$y}),a(552322),a(152010);a(202784);a(71556),a(202784);var n=a(442248),r=a(33229),i=a(878052);n.default.create({container:{display:"flex",alignItems:"center",justifyContent:"center"}}),n.default.create({lucideContainer:{display:"flex",alignItems:"center",justifyContent:"center"}}),a(138461),a(429538),a(899509),n.default.create({container:{...r.default.select({native:{height:i.default.get("window").height},web:{marginHorizontal:16}})}}),a(788269);a(337288),a(382740),a(695188),a(664468),a(202784);var s=a(476453),o=(a(634706),a(642719));r.default.select({native:165,web:165}),(0,o.x)((()=>({button:{"&:hover":{opacity:.8},"&:hover .openXnft":{display:"flex"},"&:hover .xnftIcon":{width:"100%"},"&:hover .appIcon":{transform:"rotate(360deg)"}}}))),a(997246);var c=a(973368),l=a(821179),u=a(642807),d=a(971368),m=a(301685);(0,a(987809).n7)(m.ZC)},785766:(e,t,a)=>{a.d(t,{u:()=>c});var n=a(326951),r=a(337288),i=a(312397),s=a(639784),o=a(202784);function c({title:e,subtitle:t,icon:a,renderIcon:c,iconType:l}){if("function"==typeof a&&"function"==typeof c)throw new Error('Only one of "icon" or "renderIcon" should be provided');const u=(0,n.F)();return o.createElement(r.FA,{gap:"$4"},o.createElement(r.FA,{als:"center"},c?c({size:80}):null,c?null:o.createElement(i.C,{size:80,bg:"success"===l?"$greenBackgroundTransparent":"error"===l?"$redBackgroundTransparent":"warning"===l?"$yellowBackgroundTransparent":"$baseBackgroundL1"},a?.({size:40,color:u.baseIcon.val}))),o.createElement(s.V,{title:e,subtitle:t}))}},531518:(e,t,a)=>{a.d(t,{m:()=>s});var n=a(326951),r=a(30267),i=a(202784);function s({height:e,width:t,br:a=8}){const s=(0,n.F)();return i.createElement(r.ZP,{speed:1,width:t,height:e,viewBox:`0 0 ${t} ${e}`,backgroundColor:s.baseBackgroundL0.val,foregroundColor:s.baseBackgroundL1.val},i.createElement(r.UL,{x:"0",y:"0",rx:a,ry:a,width:t,height:e}))}},277210:(e,t,a)=>{a.d(t,{lA:()=>i});var n=a(338263),r=a(627158);function i(e){return new n.$r(s,e)}new r.PublicKey("xnft5aaToUM4UFETUQfj7NUDUBdvYHTVhNFThEYTm55"),r.PublicKey.default,new r.PublicKey("CkqWjTWzRMAtYN3CSs8Gp4K9H891htmaN1ysNXqcULc8"),new r.PublicKey("ANRn3ypikUTDEsY6ShgeHskX8bmZGpbmXEDACGt8hQAR"),new n.BN("00"),Array(64).fill(0),r.PublicKey.default,new r.PublicKey("GUt1LFqrs5Wbp6b6jLK1rXUvQKEavmAvM2UjAYWwJsNh"),new r.PublicKey("4WatrHZmabx9jEEL18SEQEWAtbHCktEHBaLSWiZ2kDeK"),new n.BN("00"),Array(64).fill(0);const s={address:"xnft5aaToUM4UFETUQfj7NUDUBdvYHTVhNFThEYTm55",metadata:{name:"xnft",version:"0.2.5",spec:"0.1.0"},instructions:[{name:"create_app_xnft",docs:["Creates all parts of an xNFT instance.",'Once this is invoked, an xNFT exists and can be "installed" by users.'],discriminator:[163,181,42,46,219,211,7,133],accounts:[{name:"master_mint",writable:!0,pda:{seeds:[{kind:"const",value:[34,109,105,110,116,34]},{kind:"account",path:"publisher"},{kind:"arg",path:"name"}]}},{name:"master_token",writable:!0},{name:"master_metadata",writable:!0,pda:{seeds:[{kind:"const",value:[34,109,101,116,97,100,97,116,97,34]},{kind:"account",path:"metadata_program"},{kind:"account",path:"master_mint",account:"Mint"}],program:{kind:"account",path:"metadata_program"}}},{name:"xnft",writable:!0,pda:{seeds:[{kind:"const",value:[34,120,110,102,116,34]},{kind:"account",path:"master_mint",account:"Mint"}]}},{name:"payer",writable:!0,signer:!0},{name:"publisher",signer:!0},{name:"system_program"},{name:"token_program"},{name:"associated_token_program"},{name:"metadata_program"},{name:"rent"}],args:[{name:"name",type:"string"},{name:"params",type:{defined:{name:"CreateXnftParams"}}}]},{name:"create_collectible_xnft",docs:["Creates an xNFT instance on top of an existing digital collectible that is MPL compliant."],discriminator:[239,245,207,226,8,154,200,33],accounts:[{name:"master_mint"},{name:"master_token"},{name:"master_metadata"},{name:"xnft",writable:!0,pda:{seeds:[{kind:"const",value:[34,120,110,102,116,34]},{kind:"account",path:"master_mint",account:"Mint"}]}},{name:"payer",writable:!0,signer:!0},{name:"publisher",signer:!0},{name:"system_program"}],args:[{name:"params",type:{defined:{name:"CreateXnftParams"}}}]},{name:"create_install",docs:['Creates an "installation" of an xNFT.',"Installation is just a synonym for minting an xNFT edition for a given","user."],discriminator:[41,58,153,9,228,59,218,207],accounts:[{name:"xnft",writable:!0,relations:["install_vault"]},{name:"install_vault",writable:!0},{name:"install",writable:!0,pda:{seeds:[{kind:"const",value:[34,105,110,115,116,97,108,108,34]},{kind:"account",path:"target"},{kind:"account",path:"xnft",account:"Xnft"}]}},{name:"target",writable:!0,signer:!0},{name:"authority",signer:!0},{name:"system_program"}],args:[]},{name:"create_permissioned_install",docs:['Creates an "installation" of a private xNFT through prior access approval',"granted by the xNFT's installation authority."],discriminator:[93,218,157,212,22,147,180,196],accounts:[{name:"xnft",writable:!0,relations:["install_vault"]},{name:"install_vault",writable:!0},{name:"install",writable:!0,pda:{seeds:[{kind:"const",value:[34,105,110,115,116,97,108,108,34]},{kind:"account",path:"authority"},{kind:"account",path:"xnft",account:"Xnft"}]}},{name:"access",writable:!0,pda:{seeds:[{kind:"const",value:[34,97,99,99,101,115,115,34]},{kind:"account",path:"authority"},{kind:"account",path:"xnft",account:"Xnft"}]},relations:["xnft"]},{name:"install_authority",writable:!0},{name:"authority",writable:!0,signer:!0},{name:"system_program"}],args:[]},{name:"create_review",docs:['Creates a "review" of an xNFT containing a URI to a comment and a 0-5 rating.'],discriminator:[69,237,87,43,238,125,40,1],accounts:[{name:"install",relations:["xnft"]},{name:"master_token"},{name:"xnft",writable:!0},{name:"review",writable:!0,pda:{seeds:[{kind:"const",value:[34,114,101,118,105,101,119,34]},{kind:"account",path:"xnft",account:"Xnft"},{kind:"account",path:"author"}]}},{name:"author",writable:!0,signer:!0},{name:"system_program"}],args:[{name:"uri",type:"string"},{name:"rating",type:"u8"}]},{name:"delete_install",docs:["Closes the install account."],discriminator:[223,134,126,1,183,26,254,206],accounts:[{name:"install",writable:!0,relations:["authority"]},{name:"receiver",writable:!0},{name:"authority",signer:!0}],args:[]},{name:"delete_review",docs:["Closes the review account and removes metrics from xNFT account."],discriminator:[217,101,10,71,231,220,241,202],accounts:[{name:"review",writable:!0,relations:["author","xnft"]},{name:"xnft",writable:!0},{name:"receiver",writable:!0},{name:"author",signer:!0}],args:[]},{name:"delete_xnft",docs:["Closes the xNFT and burns the NFT if it meets the criteria for being deletable and optionally burn."],discriminator:[190,8,168,196,174,173,114,146],accounts:[{name:"xnft",writable:!0,relations:["master_metadata","master_mint"]},{name:"master_metadata",writable:!0},{name:"master_token",writable:!0},{name:"master_mint",docs:["account and the token account mint check."],writable:!0},{name:"receiver",writable:!0},{name:"authority",signer:!0},{name:"token_program"}],args:[]},{name:"donate",docs:["Donate funds to the creators listed in the metadata account of an xNFT."],discriminator:[121,186,218,211,73,70,196,180],accounts:[{name:"xnft",relations:["master_metadata"]},{name:"master_metadata"},{name:"donator",writable:!0,signer:!0},{name:"system_program"}],args:[{name:"amount",type:"u64"}]},{name:"grant_access",docs:["Creates an access program account that indicates a wallet's","access permission to install a private xNFT."],discriminator:[66,88,87,113,39,22,27,165],accounts:[{name:"xnft"},{name:"wallet"},{name:"access",writable:!0,pda:{seeds:[{kind:"const",value:[34,97,99,99,101,115,115,34]},{kind:"account",path:"wallet"},{kind:"account",path:"xnft",account:"Xnft"}]}},{name:"authority",writable:!0,signer:!0},{name:"system_program"}],args:[]},{name:"revoke_access",docs:["Closes the access program account for a given wallet on a private xNFT,","effectively revoking their permission to create installations of the xNFT."],discriminator:[106,128,38,169,103,238,102,147],accounts:[{name:"xnft"},{name:"wallet"},{name:"access",writable:!0,pda:{seeds:[{kind:"const",value:[34,97,99,99,101,115,115,34]},{kind:"account",path:"wallet"},{kind:"account",path:"xnft",account:"Xnft"}]},relations:["wallet","xnft"]},{name:"authority",writable:!0,signer:!0}],args:[]},{name:"set_curator",docs:["Assigns a curator public key to the provided xNFT."],discriminator:[115,127,196,219,235,198,96,253],accounts:[{name:"xnft",writable:!0},{name:"master_token"},{name:"curator"},{name:"authority",signer:!0}],args:[]},{name:"set_curator_verification",docs:["Sets the boolean flag for verification of the assigned curator to an xNFT, signed by the curator authority."],discriminator:[10,33,60,4,24,32,21,129],accounts:[{name:"xnft",writable:!0},{name:"curator",signer:!0}],args:[{name:"value",type:"bool"}]},{name:"set_suspended",docs:["Sets the install suspension flag on the xnft."],discriminator:[240,182,200,60,209,54,180,240],accounts:[{name:"xnft",writable:!0},{name:"master_token"},{name:"authority",signer:!0}],args:[{name:"flag",type:"bool"}]},{name:"transfer",docs:["Transfer the xNFT to the provided designation wallet."],discriminator:[163,52,200,231,140,3,69,186],accounts:[{name:"xnft",relations:["master_mint"]},{name:"source",writable:!0},{name:"destination",writable:!0},{name:"master_mint"},{name:"recipient"},{name:"authority",writable:!0,signer:!0},{name:"system_program"},{name:"token_program"},{name:"associated_token_program"}],args:[]},{name:"update_xnft",docs:["Updates the code of an xNFT.","This is simply a token metadata update cpi."],discriminator:[65,211,212,147,239,154,133,2],accounts:[{name:"xnft",writable:!0,relations:["master_metadata"]},{name:"master_token"},{name:"master_metadata",writable:!0},{name:"curation_authority"},{name:"updater",signer:!0},{name:"metadata_program"}],args:[{name:"updates",type:{defined:{name:"UpdateParams"}}}]}],accounts:[{name:"access",discriminator:[95,108,248,102,214,149,165,195]},{name:"install",discriminator:[148,197,25,47,91,151,213,75]},{name:"review",discriminator:[110,51,226,84,164,158,130,53]},{name:"xnft",discriminator:[102,249,217,221,142,239,226,35]}],events:[{name:"AccessGranted",discriminator:[21,212,83,192,198,26,62,185]},{name:"InstallationCreated",discriminator:[205,249,10,81,195,152,162,126]},{name:"ReviewCreated",discriminator:[178,85,104,160,165,57,215,45]},{name:"XnftCreated",discriminator:[161,250,154,37,159,244,237,74]},{name:"XnftUpdated",discriminator:[94,250,56,174,183,63,43,169]}],errors:[{code:6e3,name:"CannotReviewOwned",msg:"You cannot create a review for an xNFT that you currently own or published"},{code:6001,name:"CuratorAlreadySet",msg:"There is already a verified curator assigned"},{code:6002,name:"CuratorAuthorityMismatch",msg:"The expected curator authority did not match expected"},{code:6003,name:"CuratorMismatch",msg:"The provided curator account did not match the one assigned"},{code:6004,name:"InstallAuthorityMismatch",msg:"The provided xNFT install authority did not match"},{code:6005,name:"InstallExceedsSupply",msg:"The max supply has been reached for the xNFT"},{code:6006,name:"InstallOwnerMismatch",msg:"The asserted authority/owner did not match that of the Install account"},{code:6007,name:"MetadataIsImmutable",msg:"The metadata of the xNFT is marked as immutable"},{code:6008,name:"MustBeApp",msg:"The xNFT must be of `Kind::App` for this operation"},{code:6009,name:"RatingOutOfBounds",msg:"The rating for a review must be between 0 and 5"},{code:6010,name:"ReviewInstallMismatch",msg:"The installation provided for the review does not match the xNFT"},{code:6011,name:"SupplyReduction",msg:"Updated supply is less than the original supply set on creation"},{code:6012,name:"SuspendedInstallation",msg:"Attempting to install a currently suspended xNFT"},{code:6013,name:"UnauthorizedInstall",msg:"The access account provided is not associated with the wallet"},{code:6014,name:"UnknownCreator",msg:"A provided creator was not found on the metadata account"},{code:6015,name:"UpdateAuthorityMismatch",msg:"The signer did not match the update authority of the metadata account or the owner"},{code:6016,name:"UpdateReviewAuthorityMismatch",msg:"The signing authority for the xNFT update did not match the review authority"},{code:6017,name:"UriExceedsMaxLength",msg:"The metadata URI provided exceeds the maximum length"},{code:6018,name:"XnftNotDeletable",msg:"The xNFT is not deletable because its either an app with installations or has reviews"}],types:[{name:"CreatorsParam",type:{kind:"struct",fields:[{name:"address",type:"pubkey"},{name:"share",type:"u8"}]}},{name:"CreateXnftParams",type:{kind:"struct",fields:[{name:"creators",type:{vec:{defined:{name:"CreatorsParam"}}}},{name:"curator",type:{option:"pubkey"}},{name:"install_authority",type:{option:"pubkey"}},{name:"install_price",type:"u64"},{name:"install_vault",type:"pubkey"},{name:"seller_fee_basis_points",type:"u16"},{name:"supply",type:{option:"u64"}},{name:"symbol",type:"string"},{name:"tag",type:{defined:{name:"Tag"}}},{name:"uri",type:"string"}]}},{name:"UpdateParams",type:{kind:"struct",fields:[{name:"install_authority",type:{option:"pubkey"}},{name:"install_price",type:{option:"u64"}},{name:"install_vault",type:{option:"pubkey"}},{name:"name",type:{option:"string"}},{name:"supply",type:{option:"u64"}},{name:"tag",type:{option:{defined:{name:"Tag"}}}},{name:"uri",type:{option:"string"}}]}},{name:"CuratorStatus",type:{kind:"struct",fields:[{name:"pubkey",docs:["The pubkey of the `Curator` program account (32)."],type:"pubkey"},{name:"verified",docs:["Whether the curator's authority has verified the assignment (1)."],type:"bool"}]}},{name:"Kind",type:{kind:"enum",variants:[{name:"App"},{name:"Collectible"}]}},{name:"Tag",type:{kind:"enum",variants:[{name:"None"},{name:"Defi"},{name:"Game"},{name:"Nfts"}]}},{name:"access",type:{kind:"struct",fields:[{name:"wallet",docs:["The pubkey of the wallet being granted access (32)."],type:"pubkey"},{name:"xnft",docs:["The pubkey of the xNFT account that is access gated (32)."],type:"pubkey"},{name:"bump",docs:["Bump nonce of the PDA (1)."],type:"u8"},{name:"reserved",docs:["Unused reserved byte space for additive future changes."],type:{array:["u8",32]}}]}},{name:"install",type:{kind:"struct",fields:[{name:"authority",docs:["The authority who created the installation (32)."],type:"pubkey"},{name:"xnft",docs:["The pubkey of the xNFT that was installed (32)."],type:"pubkey"},{name:"master_metadata",docs:["The pubkey of the MPL master metadata account (32)."],type:"pubkey"},{name:"edition",docs:["The sequential installation number of the xNFT (8)."],type:"u64"},{name:"reserved",docs:["Unused reserved byte space for additive future changes."],type:{array:["u8",64]}}]}},{name:"review",type:{kind:"struct",fields:[{name:"author",docs:["The pubkey of the account that created the review (32)."],type:"pubkey"},{name:"xnft",docs:["The pubkey of the associated xNFT (32)."],type:"pubkey"},{name:"rating",docs:["The numerical rating for the review, 0-5 (1)."],type:"u8"},{name:"uri",docs:["The URI of the off-chain JSON data that holds the comment (4 + len)."],type:"string"},{name:"reserved",docs:["Unused reserved byte space for future additive changes."],type:{array:["u8",32]}}]}},{name:"xnft",type:{kind:"struct",fields:[{name:"publisher",docs:["The pubkey of the original xNFT creator (32)."],type:"pubkey"},{name:"install_vault",docs:["The pubkey of the account to receive install payments (32)."],type:"pubkey"},{name:"master_metadata",docs:["The pubkey of the MPL master metadata account (32)."],type:"pubkey"},{name:"master_mint",docs:["The pubkey of the master token mint (32)."],type:"pubkey"},{name:"install_authority",docs:["The optional pubkey of the xNFT installation authority (33)."],type:{option:"pubkey"}},{name:"curator",docs:["Optional pubkey of the global authority required for reviewing xNFT updates (34)."],type:{option:{defined:{name:"CuratorStatus"}}}},{name:"uri",docs:["The URI of the custom metadata blob for the xNFT (4 + mpl_token_metadata::state::MAX_URI_LENGTH)."],type:"string"},{name:"mint_seed_name",docs:["The original name used to seed the master mint if it was a standalone (1 + 4 + mpl_token_metadata::state::MAX_NAME_LENGTH)."],type:{option:"string"}},{name:"kind",docs:["The `Kind` enum variant describing the type of xNFT (1)."],type:{defined:{name:"Kind"}}},{name:"tag",docs:["The `Tag` enum variant to assign the category of xNFT (1)."],type:{defined:{name:"Tag"}}},{name:"supply",docs:["The optional finite supply of installations available for this xNFT (9)."],type:{option:"u64"}},{name:"total_installs",docs:["Total amount of install accounts that have been created for this xNFT (8)."],type:"u64"},{name:"install_price",docs:["The price-per-install of this xNFT (8)."],type:"u64"},{name:"created_ts",docs:["The unix timestamp of when the account was created (8)."],type:"i64"},{name:"updated_ts",docs:["The unix timestamp of the last time the account was updated (8)."],type:"i64"},{name:"total_rating",docs:["The total cumulative rating value of all reviews (8)."],type:"u64"},{name:"num_ratings",docs:["The number of ratings created used to calculate the average (4)."],type:"u32"},{name:"suspended",docs:["Flag to determine whether new installations of the xNFT should be halted (1)."],type:"bool"},{name:"bump",docs:["The bump nonce for the xNFT's PDA (1)."],type:{array:["u8",1]}},{name:"reserved0",docs:["Unused reserved byte space for additive future changes."],type:{array:["u8",64]}},{name:"reserved1",type:{array:["u8",24]}},{name:"reserved2",type:{array:["u8",9]}}]}},{name:"AccessGranted",type:{kind:"struct",fields:[{name:"wallet",type:"pubkey"},{name:"xnft",type:"pubkey"}]}},{name:"InstallationCreated",type:{kind:"struct",fields:[{name:"installer",type:"pubkey"},{name:"xnft",type:"pubkey"}]}},{name:"ReviewCreated",type:{kind:"struct",fields:[{name:"author",type:"pubkey"},{name:"rating",type:"u8"},{name:"xnft",type:"pubkey"}]}},{name:"XnftCreated",type:{kind:"struct",fields:[{name:"tag",type:{defined:{name:"Tag"}}},{name:"xnft",type:"pubkey"}]}},{name:"XnftUpdated",type:{kind:"struct",fields:[{name:"xnft",type:"pubkey"}]}}],constants:[{name:"MAX_RATING",type:"u8",value:"5"},{name:"MIN_RATING",type:"u8",value:"1"}]}},63923:(e,t,a)=>{a.d(t,{z7:()=>c});var n=a(533767),r=a(565058),i=a(987809),s=(a(202784),a(473386));const o=(0,i.O4)(n.y4.DAPP_TRANSACTIONS,{},(0,s._)(n.y4.DAPP_TRANSACTIONS)),c=(0,r.cn)(null,(async(e,t,{txHash:a,dappUrl:n,blockchainId:r})=>{const i=await Promise.resolve(e(o)),s=i[r]??[];if(s.some((e=>e.txHash===a)))return;const c=[{txHash:a,dappUrl:n,timestamp:Date.now()},...s].slice(0,50);t(o,{...i,[r]:c})}))},227443:(e,t,a)=>{a.d(t,{$D:()=>w,K1:()=>y,NT:()=>l,_d:()=>g,aI:()=>m,jp:()=>b});var n=a(533767),r=a(812626),i=a(565058),s=a(255717),o=a(987809),c=a(473386),l=function(e){return e.CNY="cny",e.EUR="eur",e.GBP="gbp",e.AUD="aud",e.USD="usd",e}({});const u={biometrics:{enabled:!1,pinEnabled:!1,requiredToOpen:!1,requiredToSend:!1},currency:"usd",language:"en",maskBalances:!1,mobileDeveloperMode:!1,theme:"dark",homeScreenMarketList:"spots",appsFilter:"trending",chartResolution:"1h",chartLineType:"candles",chartPriceType:"Last",isBackpackTeam:!1,dismissedHomeScreenBanners:{points:!0,autolend:!0,zeroFees:!0},maxSlippage:null,convertMaxSlippage:.01,isDrawerGridExpanded:!1,orderSide:"Bid",orderType:"Limit",showMmrAsNumber:!1,unrealizedPnlPriceBasis:"markPrice",pnlTrackingBase:"EntryPrice",positionShowQuantityOrValue:"Quantity",positionTpSlDisplay:"tpSl",euSpotMarketAgreementV2:!1,euFuturesMarketAgreement:!1,showCurrentMarketOnly:!1,selectedNetApyType:"LendBorrow",optedInCampaigns:{},recentlyAccessedExchangeAccounts:[],recentlyAccessedWallets:[],exchangeDrawerTab:"trading",hideDustActivity:!1,chartShowOrderLines:!0,chartShowPositionLines:!0,chartShowFills:!0,chartIndicators:[],lastViewedQuestId:0,showTradingTour:void 0},d=(0,o.O4)(n.y4.GLOBAL_PREFERENCES_KEY,u,(0,o.FL)((function(){return{getItem:async e=>{const t=await r.f.get(e);if(t){const e=JSON.parse(t);return JSON.stringify({...u,...e})}return JSON.stringify(u)},removeItem:async e=>r.f.remove(e),setItem:async(e,t)=>r.f.set(e,t)}})),{getOnInit:!0}),m=(0,s.R)(d,(e=>e.prop("maskBalances"))),p=((0,s.R)(d,(e=>e.prop("unrealizedPnlPriceBasis"))),(0,s.R)(d,(e=>e.prop("pnlTrackingBase"))),(0,s.R)(d,(e=>e.prop("positionShowQuantityOrValue"))),(0,s.R)(d,(e=>e.prop("positionTpSlDisplay"))),(0,s.R)(d,(e=>e.prop("showCurrentMarketOnly"))),(0,s.R)(d,(e=>e.prop("appsFilter"))),(0,s.R)(d,(e=>e.prop("dismissedHomeScreenBanners"))),(0,s.R)(d,(e=>e.prop("maxSlippage"))),(0,s.R)(d,(e=>e.prop("convertMaxSlippage")))),y=((0,o.Wg)(p,(e=>e??.01)),(0,i.cn)(null,((e,t,a)=>{t(p,a)})),(0,s.R)(d,(e=>e.prop("euSpotMarketAgreementV2"))),(0,s.R)(d,(e=>e.prop("euFuturesMarketAgreement"))),(0,s.R)(d,(e=>e.prop("homeScreenMarketList"))),(0,s.R)(d,(e=>e.prop("currency")))),h=((0,s.R)(d,(e=>e.prop("chartResolution"))),(0,s.R)(d,(e=>e.prop("chartLineType"))),(0,s.R)(d,(e=>e.prop("chartPriceType"))),(0,s.R)(d,(e=>e.prop("isBackpackTeam")))),f=((0,o.Wg)(h,(e=>e??!1)),(0,s.R)(d,(e=>e.prop("isDrawerGridExpanded"))),(0,s.R)(d,(e=>e.prop("orderSide"))),(0,s.R)(d,(e=>e.prop("orderType"))),(0,s.R)(d,(e=>e.prop("showMmrAsNumber"))),(0,s.R)(d,(e=>e.prop("selectedNetApyType"))),(0,s.R)(d,(e=>e.prop("optedInCampaigns"))),(0,o.O4)("account-sort-option","default",(0,c._)(n.y4.ACCOUNT_SORT_OPTION),{getOnInit:!0}),(0,o.O4)("account-sort-direction","desc",(0,c._)(n.y4.ACCOUNT_SORT_DIRECTION),{getOnInit:!0}),(0,s.R)(d,(e=>e.prop("recentlyAccessedExchangeAccounts"))),(0,s.R)(d,(e=>e.prop("exchangeDrawerTab")))),b=((0,o.Wg)(f,(e=>e??"trading")),(0,s.R)(d,(e=>e.prop("recentlyAccessedWallets")))),g=(0,s.R)(d,(e=>e.prop("hideDustActivity"))),w=((0,s.R)(d,(e=>e.prop("chartShowOrderLines"))),(0,s.R)(d,(e=>e.prop("chartShowPositionLines"))),(0,s.R)(d,(e=>e.prop("chartShowFills"))),(0,s.R)(d,(e=>e.prop("chartIndicators"))),(0,s.R)(d,(e=>e.prop("lastViewedQuestId"))),(0,s.R)(d,(e=>e.prop("accountOrder"))));(0,s.R)(d,(e=>e.prop("showTradingTour")))},2716:(e,t,a)=>{a.d(t,{EA:()=>u,XE:()=>d,Yr:()=>l,cL:()=>c,gI:()=>s,q$:()=>p,r1:()=>y,u$:()=>o,yl:()=>m});var n=a(565058),r=a(987809),i=a(495320);const s=(0,n.cn)((async e=>(await e(i.D5)).preferences)),o=((0,n.cn)((()=>!0)),(0,n.cn)((async e=>(await e(s)).developerMode)),(0,n.cn)((async e=>(await e(s)).autoLockSettings))),c=(0,n.cn)((async e=>{const t=await e(s);return Boolean(t.aggregateWallets)})),l=(0,n.cn)((async e=>!!(await e(s)).isLockAvatarFullScreen)),u=((0,n.cn)((async e=>(await e(s)).approvedOrigins)),(0,n.cn)((async e=>(await e(i.D5)).user))),d=i.ao,m=(0,r.xu)((e=>(0,n.cn)((async t=>{const a=await t(s);return a.hiddenTokenAddresses?.[e]??[]})))),p=(0,n.cn)((async e=>{const t=await e(s);return void 0!==t.tokenValueThreshold?t.tokenValueThreshold:t.hideLowValueTokens?1:.01})),y=((0,n.cn)((async e=>(await e(s)).showAllCollectibles??!1)),(0,n.cn)((async e=>(await e(s)).showCompressedBalances??!0)))},837993:(e,t,a)=>{a.d(t,{Ds:()=>k,Tr:()=>g,Zh:()=>v});var n=a(152010),r=a(778908),i=a(812626),s=a(533767),o=a(565058),c=a(987809),l=a(972160),u=a(66046),d=a(495320),m=a(242033),p=a(190776),y=a(473386);const h=216e5,f=(e,t)=>`${t}:${e}`;async function b(e,t){const a=await i.f.get(s.y4.WALLET_BALANCES)||{};a[e]={value:t,timestamp:Date.now()},await i.f.set(s.y4.WALLET_BALANCES,a)}const g=(0,c.xu)((({address:e,blockchainId:t})=>{const a=(0,o.cn)((async a=>{if(!e||!t)return null;const r=await a((0,u.I5)(t)),o={namespace:r.caip2Namespace,reference:r.caip2Reference},c=f(e,t),l=await async function(e){const t=(await i.f.get(s.y4.WALLET_BALANCES)||{})[e];return t?.timestamp&&Date.now()-t.timestamp<h?t:null}(c);if(l)return{value:l.value};const d=await a(p.F);{const t=await d.query({query:n.Mz,variables:{address:e,caip2:o},errorPolicy:"all"}),a=(0,n._m)(t.data?.wallet?.balances?.aggregate)?.value;if(void 0!==a)return await b(c,a),{value:a}}return null})),r=(0,o.cn)(null);return(0,l.j)(r,((e,t)=>{e(a).then((e=>{t(r,e)}))}))}),((e,t)=>e.address===t.address&&e.blockchainId===t.blockchainId)),w=(0,c.O4)(s.y4.TOTAL_WALLET_BALANCE,0,(0,y._)(s.y4.TOTAL_WALLET_BALANCE)),T=(0,o.cn)((async e=>{if(await e(d.A)===r.a.NeedsOnboarding)return 0;const t=await e(d.LE);if(!t||0===t.length)return 0;const a=t.slice(0,20),n=(await Promise.all(a.map((t=>{const a=e(g({address:t.publicKey,blockchainId:t.blockchainId}));return{blockchainId:t.blockchainId,address:t.publicKey,balance:a}})))).reduce(((e,t)=>e+Number(t.balance?.value||0)),0);return Number.isFinite(n)?n:0})),k=(0,l.j)(w,((e,t)=>{(async()=>{const a=await e(T);t(w,a)})()})),v=((0,o.cn)(null,(async(e,t,{address:a,blockchainId:n,balance:r})=>{const i=g({address:a,blockchainId:n}),s=f(a,n);await b(s,r.value),t(i,r)})),(0,o.cn)((async e=>{const t=await e(m.R2);return async function(e){const t=await i.f.get(s.y4.WALLET_BALANCES)||{},a=new Map;for(const n of e){const e=t[n];e?.timestamp&&Date.now()-e.timestamp<h&&a.set(n,e.value)}return a}((await e(d.LE)).filter((e=>e.blockchainId===t.blockchainId)).map((e=>f(e.publicKey,e.blockchainId))))})),(0,c.xu)((e=>(0,o.cn)((async t=>{if(await t(d.A)===r.a.NeedsOnboarding)return 0;const a=await t(d.DU);if(!a||0===a.length)return 0;const n=a.filter((t=>t.userId===e));if(0===n.length)return 0;const i=(await Promise.all(n.map((e=>{const a=t(g({address:e.publicKey,blockchainId:e.blockchainId}));return{blockchainId:e.blockchainId,address:e.publicKey,balance:a}})))).reduce(((e,t)=>e+Number(t.balance?.value||0)),0);return Number.isFinite(i)?i:0})))))},242033:(e,t,a)=>{a.d(t,{GC:()=>m,Q5:()=>b,R2:()=>y,TI:()=>p,t_:()=>h,uy:()=>g,xC:()=>f});var n=a(533767),r=a(565058),i=a(987809),s=a(972160),o=a(2716),c=a(66046),l=a(495320),u=a(726615),d=a(473386);(0,r.cn)((async e=>await e(c.rz)));const m=(0,r.cn)((async e=>{const t=await e(c.x7),a=Object.values(t).map((async t=>await e(p(t.blockchainId))));return(await Promise.all(a)).flat()})),p=((0,r.cn)((async e=>await e(o.cL)?await e(m):[await e(y)])),(0,i.xu)((e=>(0,r.cn)((async t=>{const a=await t(l.D5),n=await t((0,c.I5)(e));return Object.entries(a.publicKeys.platforms[e]?.publicKeys??{}).map((([t,a])=>({blockchain:n.blockchain,blockchainId:e,publicKey:t,info:a})))}))))),y=(0,r.cn)((async e=>{const t=await e(h(null));if(!t)throw new Error("No active wallet");return t})),h=(0,i.xu)((e=>(0,u.K)((0,r.cn)((async t=>{let a=null;if(t(l.sT)||(a=await t(l.D5)),!a)return null;const n=e??a.publicKeys.activePlatform,r=a.publicKeys.platforms[n]?.activePublicKey;if(!r)return;const i=await t((0,c.I5)(n));if(!i)return null;const s=a.publicKeys.platforms[n]?.publicKeys[r];return s?{blockchain:i.blockchain,blockchainId:n,publicKey:r,info:s}:void 0}))))),f=(0,i.xu)((({blockchainId:e,publicKey:t})=>(0,u.K)((0,r.cn)((async a=>{let n=null;if(a(l.sT)||(n=await a(l.D5)),!n)return null;const r=await a((0,c.I5)(e));if(!r)return null;const i=n.publicKeys.platforms[e]?.publicKeys[t];return i?{blockchain:r.blockchain,blockchainId:e,info:i,publicKey:t}:null})))),((e,t)=>JSON.stringify(e)===JSON.stringify(t))),b=(0,r.cn)((async e=>{const t=await e(l.D5),a=await e(c.lm);return Object.entries(t.publicKeys.platforms).filter((([e])=>!!a[e])).map((([e,t])=>({publicKey:t.activePublicKey,blockchainId:e,blockchain:a[e].blockchain,info:t.publicKeys[t.activePublicKey]})))})),g=(0,r.cn)((async e=>{const t=await e(b);return Object.fromEntries(t.map((e=>[e.blockchainId,e.publicKey])))})),w=((0,r.cn)((async e=>{const t=await e(l.D5);if(!t)return{};const a={};return Object.keys(t.publicKeys.platforms).forEach((e=>{a[e]=!0})),a})),(0,i.O4)(n.y4.HOST_ACCOUNT_WALLET_NETWORK_FILTER,[],(0,d._)(n.y4.HOST_ACCOUNT_WALLET_NETWORK_FILTER))),T=(0,r.cn)(null);(0,s.j)(y,((e,t)=>{(async()=>{const a=await e(y);if(a){const n=e(T);if(n&&n.blockchainId!==a.blockchainId){const n=await e(w);n.length&&!n.includes(a.blockchainId)&&t(w,[a.blockchainId])}t(T,a)}})()}))},541214:(e,t,a)=>{a.d(t,{Os:()=>y,TB:()=>m,g8:()=>h,gI:()=>u,iL:()=>d,pI:()=>p,rT:()=>l,wU:()=>f,xE:()=>w});var n=a(400752),r=a(565058),i=a(202784),s=a(242033),o=a(66046),c=a(495320);function l(){return(0,n.Dv)(s.R2)}function u(e){const{caip2Namespace:t,caip2Reference:a}=d(e);return{namespace:t,reference:a}}function d(e){return(0,n.Dv)((0,o.I5)(e))}function m(){return(0,n.Dv)(s.Q5)}function p(){return(0,n.Dv)(s.uy)}function y(e,t){return(0,n.Dv)((0,s.xC)({blockchainId:e,publicKey:t}))}function h(e){return(0,n.Dv)((0,s.TI)(e))}function f(){return(0,n.Dv)(s.GC)}const b=(0,r.cn)((async e=>{const t=await e(c.DU),a=e(g);if(!a)return[];const{excludeWallet:n,blockchainId:r,searchFilter:i,walletTypes:s,uuid:o}=a;return t.filter((e=>e.blockchainId===r)).filter((e=>!(e.publicKey===n.publicKey&&e.blockchainId===n.blockchainId)&&(!i||e.publicKey.includes(i)||(e.info.name||"").toLowerCase().includes(i.toLowerCase()))&&(s.length<=0||s.includes(e.info.walletType)))).sort(((e,t)=>{if(e.userId===o&&t.userId!==o)return-1;if(t.userId===o&&e.userId!==o)return 1;if(i){const a=(e.info.name||"").toLowerCase().includes(i.toLowerCase());if(a!==(t.info.name||"").toLowerCase().includes(i.toLowerCase()))return a?-1:1;const n=e.publicKey.includes(i);if(n!==t.publicKey.includes(i))return n?-1:1}const a=e.username||"",n=t.username||"",r=e.info.name||"",s=t.info.name||"";return a!==n?a.localeCompare(n,void 0,{numeric:!0,sensitivity:"base",ignorePunctuation:!0}):r.localeCompare(s,void 0,{numeric:!0,sensitivity:"base",ignorePunctuation:!0})})).slice(0,20)})),g=(0,r.cn)(null);function w(e){const[,t]=(0,n.KO)(g),a=(0,n.Dv)(b);return(0,i.useEffect)((()=>{t(e)}),[e.excludeWallet.publicKey,e.excludeWallet.blockchainId,e.blockchainId,e.searchFilter,e.walletTypes,e.uuid]),a}},636134:(e,t,a)=>{a.d(t,{Hl:()=>T,W1:()=>x,ar:()=>I,n8:()=>k});var n=a(152010),r=a(812626),i=a(533767),s=a(41498),o=a(565058),c=a(400752),l=a(972160),u=a(202784),d=a(33229),m=a(726499),p=a(639460),y=a(63923),h=a(66046),f=a(957211),b=a(495320),g=a(837993),w=a(190776);const T=(0,o.cn)((async e=>{let t=await r.f.get(i.y4.INSTALLATION_ID);t||(t=(0,p.Z)(),await r.f.set(i.y4.INSTALLATION_ID,t));const a=await e(b.DU),n={user_count:0,wallet_count:a?.length||0,platform_type:d.default.OS};let o=!1;if("web"!==d.default.OS)try{try{o=!!await s.F.get(i.c1.SESSION),n.exchange_signed_in=o}catch(e){n.exchange_signed_in=!1}}catch(e){console.error("Failed to check exchange sign-in status:",e),n.exchange_signed_in=!1}if(!(a&&0!==a.length||o))return null;const c=new Set;if(a&&a.length>0){for(const t of a){c.add(t.userId);const a=(await e((0,h.I5)(t.blockchainId))).name.toLowerCase().replace(/\s+/g,"_"),r=n[`${a}_wallet_count`]||0;n[`${a}_wallet_count`]=r+1;const i=t.info,s=`${i.walletType}_${i.type}_${i.publicKeyringInfo?.keyringType||"none"}_${i.publicKeyringInfo?.addressType||"none"}`.replace(/-+/g,"_"),o=n[`wallet_type_${s}`]||0;n[`wallet_type_${s}`]=o+1}n.user_count=c.size}const l=await r.f.get(i.y4.TOTAL_WALLET_BALANCE);if(null==l){await e(g.Ds);const t=await r.f.get(i.y4.TOTAL_WALLET_BALANCE);n.total_wallet_balance=Number(t?.toFixed(2))||0}else n.total_wallet_balance=Number(l.toFixed(2))||0;return{installationId:t,walletCounts:n}})),k=(0,o.cn)((async()=>{let e=await r.f.get(i.y4.INSTALLATION_ID);return e||(e=(0,p.Z)(),await r.f.set(i.y4.INSTALLATION_ID,e)),e})),v=(0,l.j)((0,o.cn)(!1),((e,t)=>{let a,s=!1;const o=()=>{a&&clearTimeout(a),a=setTimeout((()=>{(async()=>{s||(s=!0,Promise.resolve().then((async()=>{try{const a=await r.f.get(i.y4.INSTALLATION_STATS_LAST_UPDATED),o=Date.now();!a||o-parseInt(a)>432e5?await(async()=>{try{const a=await e(T);if(!a)return;const s=await e(w.F);await s.mutate({mutation:n.D$,variables:{installationId:a.installationId,walletCounts:a.walletCounts}}),await r.f.set(i.y4.INSTALLATION_STATS_LAST_UPDATED,Date.now().toString()),t(v,!0)}catch(e){console.error("Failed to update installation stats:",e)}finally{s=!1}})():s=!1}catch(e){console.error("Error checking stats update time:",e),s=!1}})))})()}),1e4)};"undefined"!=typeof requestAnimationFrame?requestAnimationFrame((()=>{o()})):setTimeout(o,0);let c=null;if("web"!==d.default.OS){const e=e=>{"active"===e&&o()};c=m.Z.addEventListener("change",e)}else if("undefined"!=typeof document){const e=()=>{"visible"===document.visibilityState&&("undefined"!=typeof requestIdleCallback?requestIdleCallback((()=>o())):o())},t=()=>{"undefined"!=typeof requestIdleCallback?requestIdleCallback((()=>o())):o()};document.addEventListener("visibilitychange",e),window.addEventListener("focus",t)}return()=>{c&&c.remove(),a&&clearTimeout(a),"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&o()})),window.removeEventListener("focus",o))}}));function _(){const e=d.default.OS;return"ios"===e?n.hx.Ios:"android"===e?n.hx.Android:n.hx.Web}function x(){const e=(0,c.Dv)(k),t=(0,n.Kg)();return(0,u.useCallback)((a=>t({variables:{input:{...a,installationId:e}}})),[e,t])}function I(){const e=(0,c.Dv)(k),t=(0,n.qC)();return(0,u.useCallback)(((a,n)=>t({variables:{events:[{eventAt:(new Date).toISOString(),eventType:a,installationId:e,eventPayload:n}]}})),[e,t])}(0,l.j)((0,o.cn)(!1),((e,t)=>{let a=!1;const r=e(f.z).addListener((async r=>{if(a)return;if("NOTIFICATION_SIGNED_TRANSACTION"!==r.name)return;const{origin:i,txHashes:s,blockchainId:o,transactionType:c}=r;if(o&&s&&0!==s.length)try{const a=await e(w.F),r=await e(k),l=(await e(h.lm))[o];if(!l)return void console.error("walletTransactionTrackingAtom: No network config for",o);const u={namespace:l.caip2Namespace,reference:l.caip2Reference},d=i?.address,m=c??"unknown";await Promise.all(s.map((e=>a.mutate({mutation:n.F5,variables:{input:{caip2:u,installationId:r,platform:_(),status:"signed",transactionType:m,txHash:e,url:d}}})))),d&&await Promise.all(s.map((e=>t(y.z7,{txHash:e,dappUrl:d,blockchainId:o}))))}catch(e){console.error("walletTransactionTrackingAtom: Failed to track transaction:",e)}}));return()=>{a=!0;try{r()}catch{}}}))}}]);