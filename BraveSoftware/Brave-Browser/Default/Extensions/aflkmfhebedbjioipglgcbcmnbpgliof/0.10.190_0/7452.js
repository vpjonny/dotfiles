"use strict";(globalThis.webpackChunk_coral_xyz_app_extension=globalThis.webpackChunk_coral_xyz_app_extension||[]).push([[7452],{725582:(e,t,n)=>{n.d(t,{d:()=>r});const o=globalThis;function r(){return"app"===s()?"extension-app":"service-worker"===s()?"extension-sw":a()?"mobile-injected-provider":"undefined"==typeof window||void 0===window.document?"mobile-app":"undefined"==typeof window||void 0===window.document||!o._backpack_injected_provider||a()?"unknown":"web-injected-provider"}function s(){return"undefined"!=typeof chrome&&chrome.runtime?"undefined"!=typeof self&&o.clients&&o.clients.matchAll?"service-worker":"app":"not-supported"}function a(){return o.isMobileInjectedProvider}},971186:(e,t,n)=>{n.d(t,{D:()=>o});const o=e=>new Promise((t=>setTimeout(t,1e3*e)))},457373:(e,t,n)=>{n.d(t,{Dg:()=>i});var o=n(474417),r=n(565058),s=n(284898),a=(n(202784),n(957211));const i={NO_WALLET:"no_wallet"},c=(0,r.cn)(null),u=(0,s.v)(((e,t)=>{const n=e(a.z);if(!n)return;const o=n.addListener((e=>{"NOTIFICATION_SUSPENDED_EVENT"===e.name&&t(c,{eventName:e.eventName,eventId:e.eventId,suspendContext:e.suspendContext})}));return()=>o()})),l=((0,r.cn)((e=>(e(u),e(c)))),(0,r.cn)(null,((e,t)=>{t(c,null)})),(0,r.cn)(null));(0,r.cn)(null,(async(e,t)=>{const n=e(l);if(!n)return{resumed:!1,error:"No pending event to resume"};const r=e(a.C);if(!r)return t(l,null),{resumed:!1,error:"Transport sender not available"};const{eventId:s}=n;try{const n=new o.K(r),a=await n.resumeSuspendedEvent(s),i=e(l);return i?.eventId===s&&t(l,null),a.response??{resumed:!1,error:"No response"}}catch(n){const o=e(l);return o?.eventId===s&&t(l,null),{resumed:!1,error:n.message||"Failed to resume event"}}})),(0,r.cn)(null,(async(e,t,n)=>{const r=e(l);if(!r)return{cancelled:!1};const s=e(a.C);if(!s)return t(l,null),{cancelled:!1};const{eventId:i}=r;t(l,null);try{const e=new o.K(s);return(await e.cancelSuspendedEvent(i,n||"User cancelled")).response??{cancelled:!1}}catch{return{cancelled:!1}}}))},770522:(e,t,n)=>{n.d(t,{uV:()=>x});var o=n(817967),r=n(887388),s=n(565058),a=n(987809),i=n(182486),c=n(348834);const u=async(e,t)=>{try{const n=await fetch(`https://blockchain.info/rawtx/${e}`);if(!n.ok)throw new Error("Failed to fetch previous transaction details");const o=(await n.json()).out[t];return{value:o.value,address:o.addr}}catch(t){throw console.error(`Error fetching previous transaction details for ${e}:`,t),t}};var l=n(266534),d=n(376314),h=n(199670);const p=e=>({edicts:e.edicts,etching:e.etching.isSome()?e.etching.value():void 0,mint:e.mint.isSome()?e.mint.value():void 0,pointer:e.pointer.isSome()?e.pointer.value():void 0,tokenName:e.toMessage().getRune().isSome()?e.toMessage().getRune().value().name:"NoName"}),f=e=>{let t;const n=c.Buffer.from(e,"hex");try{if(e.startsWith("6a"))return"OP_RETURN";if(e.startsWith("51")){const e=l.bech32m.toWords(n.subarray(2));return l.bech32m.encode("bc",[1,...e])}t=d.address.fromOutputScript(n)}catch(t){console.error("Failed to decode address from script:",e,t)}return t},m=(0,a.xu)((e=>(0,s.cn)((async()=>{try{return await(async e=>{try{const t=await fetch(`https://blockchain.info/rawtx/${e}?format=hex`);if(!t.ok)throw new Error("Failed to fetch transaction hex");return await t.text()}catch(t){throw console.error(`Error fetching transaction details for ${e}:`,t),t}})(e.txHash)}catch(e){return console.error("Error fetching Bitcoin in bitcoinTransactionDetailsAtomInner Transaction Details: ",e),null}}))),((e,t)=>e.txHash===t.txHash)),x=(0,a.xu)((e=>(0,s.cn)((async()=>{if(!e.txHex||e.blockchainId!==o.Ek.BITCOIN_MAINNET)return null;try{const t=((e,t)=>{const n=Uint8Array.from(c.Buffer.from(e,"hex"));let o;return o=t?i.YW.fromPSBT(n,{allowUnknownOutputs:!0,allowUnknownInputs:!0,allowLegacyWitnessUtxo:!0}):i.YW.fromRaw(n,{allowUnknownOutputs:!0,allowUnknownInputs:!0,allowLegacyWitnessUtxo:!0}),{hexTx:o.hex,transaction:o}})(e.txHex,e.isPsbtFormat),n=(e=>{const t=h.Runestone.decipher(e);return t.isSome()?t.value():null})(t.hexTx),o=await(async(e,t)=>{const n=[];for(let o=0;o<e.inputsLength;o++){const r=e.getInput(o),s=c.Buffer.from(r.txid).toString("hex"),a=r.index,{value:i,address:l}=await u(s,a);let d;t&&0===o&&(d=p(t)),n.push({txid:s,index:o,sequence:r.sequence,witnessUtxo:{amount:i.toString(),address:l},runestone:d})}return n})(t.transaction,n??void 0),s=((e,t)=>{const n=[];for(let o=0;o<e.outputsLength;o++){const r=e.getOutput(o),s=r.amount.toString(),a=c.Buffer.from(r.script).toString("hex"),i=f(a);let u;t&&t.edicts.find((e=>e.output===o))&&(u=p(t)),n.push({index:o,amount:s,script:a,address:i,runestone:u})}return n})(t.transaction,n??void 0),a=((e,t)=>{const n=((e,t)=>{const n=new Map;return t.filter((e=>"OP_RETURN"!==e.address)).forEach((e=>{const t=e.address||"",o=BigInt(e.amount),r=e.runestone;if(n.has(t)){const e=n.get(t);e.totalReceived=(BigInt(e.totalReceived||"0")+o).toString(),r&&(e.runestone=r)}else n.set(t,{address:t,totalReceived:o.toString(),totalSent:"0",isSender:!1,runestone:r})})),e.forEach((e=>{const t=e.witnessUtxo?.address||"",o=BigInt(e.witnessUtxo?.amount||"0"),r=e.runestone;if(n.has(t)){const e=n.get(t);e.totalSent=(BigInt(e.totalSent||"0")+o).toString(),r&&(e.runestone=r)}else n.set(t,{address:t,totalReceived:"0",totalSent:o.toString(),isSender:!0,runestone:r})})),console.log("addressMap ",n),n})(e,t);return(e=>{const t=[];return e.forEach(((e,n)=>{const o=BigInt(e.totalSent||"0"),r=BigInt(e.totalReceived||"0"),s=o>r,a=(r-o).toString(),i=(r-o).toString();t.push({...e,totalReceived:r.toString(),totalSent:o.toString(),finalBalance:a,netAmount:i,isSender:s})})),console.log("summaries ",t),t})(n)})(o,s);return{processedTx:t,inputs:o,outputs:s,transactionSummaries:a,formattedFee:(0,r.bM)(1e3,8)}}catch(e){return console.error("Error processing Bitcoin transaction details:",e),null}}))),((e,t)=>e.txHex===t.txHex&&e.blockchainId===t.blockchainId&&e.isPsbtFormat===t.isPsbtFormat));(0,a.xu)((e=>(0,s.cn)((async t=>{if(!e.txHash||e.blockchainId!==o.Ek.BITCOIN_MAINNET)return null;try{const n=await t(m({txHash:e.txHash}));return n?await t(x({txHex:n,blockchainId:e.blockchainId})):null}catch(e){return console.error("Error fetching and processing Bitcoin Transaction Details: ",e),null}}))),((e,t)=>e.txHash===t.txHash&&e.blockchainId===t.blockchainId))}}]);