var VZ=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Gqe=VZ((cl,hc)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();try{}catch(r){console.error("[wxt] Failed to initialize plugins",r)}const KZ=!1,HZ=(r,e)=>r===e,Oa=Symbol("solid-proxy"),sU=typeof Proxy=="function",qv=Symbol("solid-track"),jv={equals:HZ};let rg=null,oU=uU;const _c=1,Vv=2,aU={owned:null,cleanups:null,context:null,owner:null},Zw={};var Mr=null;let Qw=null,WZ=null,cn=null,xs=null,Ta=null,h1=0;function ll(r,e){const t=cn,n=Mr,i=r.length===0,s=e===void 0?n:e,o=i?aU:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?r:()=>r(()=>Sr(()=>Ag(o)));Mr=o,cn=null;try{return vc(a,!0)}finally{cn=t,Mr=n}}function Pe(r,e){e=e?Object.assign({},jv,e):jv;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(t.value)),lU(t,i));return[cU.bind(t),n]}function ng(r,e,t){const n=pm(r,e,!0,_c);pp(n)}function Ge(r,e,t){const n=pm(r,e,!1,_c);pp(n)}function ot(r,e,t){oU=eQ;const n=pm(r,e,!1,_c);(!t||!t.render)&&(n.user=!0),Ta?Ta.push(n):pp(n)}function Te(r,e,t){t=t?Object.assign({},jv,t):jv;const n=pm(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,pp(n),cU.bind(n)}function GZ(r){return r&&typeof r=="object"&&"then"in r}function KT(r,e,t){let n,i,s;typeof e=="function"?(n=r,i=e,s={}):(n=!0,i=r,s=e||{});let o=null,a=Zw,c=!1,l="initialValue"in s,u=typeof n=="function"&&Te(n);const f=new Set,[d,h]=(s.storage||Pe)(s.initialValue),[g,p]=Pe(void 0),[m,y]=Pe(void 0,{equals:!1}),[v,w]=Pe(l?"ready":"unresolved");function _(C,P,V,L){return o===C&&(o=null,L!==void 0&&(l=!0),(C===a||P===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(L,{value:P})),a=Zw,x(P,V)),P}function x(C,P){vc(()=>{P===void 0&&h(()=>C),w(P!==void 0?"errored":l?"ready":"unresolved"),p(P);for(const V of f.keys())V.decrement();f.clear()},!1)}function E(){const C=XZ,P=d(),V=g();if(V!==void 0&&!o)throw V;return cn&&cn.user,P}function S(C=!0){if(C!==!1&&c)return;c=!1;const P=u?u():n;if(P==null||P===!1){_(o,Sr(d));return}let V;const L=a!==Zw?a:Sr(()=>{try{return i(P,{value:d(),refetching:C})}catch(D){V=D}});if(V!==void 0){_(o,void 0,dv(V),P);return}else if(!GZ(L))return _(o,L,void 0,P),L;return o=L,"v"in L?(L.s===1?_(o,L.v,void 0,P):_(o,void 0,dv(L.v),P),L):(c=!0,queueMicrotask(()=>c=!1),vc(()=>{w(l?"refreshing":"pending"),y()},!1),L.then(D=>_(L,D,void 0,P),D=>_(L,void 0,dv(D),P)))}Object.defineProperties(E,{state:{get:()=>v()},error:{get:()=>g()},loading:{get(){const C=v();return C==="pending"||C==="refreshing"}},latest:{get(){if(!l)return E();const C=g();if(C&&!o)throw C;return d()}}});let T=Mr;return u?ng(()=>(T=Mr,S(!1))):S(!1),[E,{refetch:C=>hm(T,()=>S(C)),mutate:h}]}function In(r){return vc(r,!1)}function Sr(r){if(cn===null)return r();const e=cn;cn=null;try{return r()}finally{cn=e}}function Pn(r,e,t){const n=Array.isArray(r);let i,s=t&&t.defer;return o=>{let a;if(n){a=Array(r.length);for(let l=0;l<r.length;l++)a[l]=r[l]()}else a=r();if(s)return s=!1,o;const c=Sr(()=>e(a,i,o));return i=a,c}}function mr(r){ot(()=>Sr(r))}function mt(r){return Mr===null||(Mr.cleanups===null?Mr.cleanups=[r]:Mr.cleanups.push(r)),r}function YZ(r,e){rg||(rg=Symbol("error")),Mr=pm(void 0,void 0,!0),Mr.context={...Mr.context,[rg]:[e]};try{return r()}catch(t){gm(t)}finally{Mr=Mr.owner}}function Kv(){return cn}function ad(){return Mr}function hm(r,e){const t=Mr,n=cn;Mr=r,cn=null;try{return vc(e,!0)}catch(i){gm(i)}finally{Mr=t,cn=n}}function JZ(r){const e=cn,t=Mr;return Promise.resolve().then(()=>{cn=e,Mr=t;let n;return vc(r,!1),cn=Mr=null,n?n.done:void 0})}const[Jqe,Xqe]=Pe(!1);function fn(r,e){const t=Symbol("context");return{id:t,Provider:tQ(t),defaultValue:r}}function rn(r){let e;return Mr&&Mr.context&&(e=Mr.context[r.id])!==void 0?e:r.defaultValue}function hp(r){const e=Te(r),t=Te(()=>cI(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}let XZ;function cU(){if(this.sources&&this.state)if(this.state===_c)pp(this);else{const r=xs;xs=null,vc(()=>Wv(this),!1),xs=r}if(cn){const r=this.observers?this.observers.length:0;cn.sources?(cn.sources.push(this),cn.sourceSlots.push(r)):(cn.sources=[this],cn.sourceSlots=[r]),this.observers?(this.observers.push(cn),this.observerSlots.push(cn.sources.length-1)):(this.observers=[cn],this.observerSlots=[cn.sources.length-1])}return this.value}function lU(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&vc(()=>{for(let i=0;i<r.observers.length;i+=1){const s=r.observers[i],o=Qw&&Qw.running;o&&Qw.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?xs.push(s):Ta.push(s),s.observers&&fU(s)),o||(s.state=_c)}if(xs.length>1e6)throw xs=[],new Error},!1)),e}function pp(r){if(!r.fn)return;Ag(r);const e=h1;ZZ(r,r.value,e)}function ZZ(r,e,t){let n;const i=Mr,s=cn;cn=Mr=r;try{n=r.fn(e)}catch(o){return r.pure&&(r.state=_c,r.owned&&r.owned.forEach(Ag),r.owned=null),r.updatedAt=t+1,gm(o)}finally{cn=s,Mr=i}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?lU(r,n):r.value=n,r.updatedAt=t)}function pm(r,e,t,n=_c,i){const s={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Mr,context:Mr?Mr.context:null,pure:t};return Mr===null||Mr!==aU&&(Mr.owned?Mr.owned.push(s):Mr.owned=[s]),s}function Hv(r){if(r.state===0)return;if(r.state===Vv)return Wv(r);if(r.suspense&&Sr(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<h1);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===_c)pp(r);else if(r.state===Vv){const n=xs;xs=null,vc(()=>Wv(r,e[0]),!1),xs=n}}function vc(r,e){if(xs)return r();let t=!1;e||(xs=[]),Ta?t=!0:Ta=[],h1++;try{const n=r();return QZ(t),n}catch(n){t||(Ta=null),xs=null,gm(n)}}function QZ(r){if(xs&&(uU(xs),xs=null),r)return;const e=Ta;Ta=null,e.length&&vc(()=>oU(e),!1)}function uU(r){for(let e=0;e<r.length;e++)Hv(r[e])}function eQ(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:Hv(n)}for(e=0;e<t;e++)Hv(r[e])}function Wv(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const i=n.state;i===_c?n!==e&&(!n.updatedAt||n.updatedAt<h1)&&Hv(n):i===Vv&&Wv(n,e)}}}function fU(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Vv,t.pure?xs.push(t):Ta.push(t),t.observers&&fU(t))}}function Ag(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,t.observerSlots[n]=o)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)Ag(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)Ag(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function dv(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function $k(r,e,t){try{for(const n of e)n(r)}catch(n){gm(n,t&&t.owner||null)}}function gm(r,e=Mr){const t=rg&&e&&e.context&&e.context[rg],n=dv(r);if(!t)throw n;Ta?Ta.push({fn(){$k(n,t,e)},state:_c}):$k(n,t,e)}function cI(r){if(typeof r=="function"&&!r.length)return cI(r());if(Array.isArray(r)){const e=[];for(let t=0;t<r.length;t++){const n=cI(r[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return r}function tQ(r,e){return function(n){let i;return Ge(()=>i=Sr(()=>(Mr.context={...Mr.context,[r]:n.value},hp(()=>n.children))),void 0),i}}const rQ=Symbol("fallback");function Dk(r){for(let e=0;e<r.length;e++)r[e]()}function nQ(r,e,t={}){let n=[],i=[],s=[],o=0,a=e.length>1?[]:null;return mt(()=>Dk(s)),()=>{let c=r()||[],l=c.length,u,f;return c[qv],Sr(()=>{let h,g,p,m,y,v,w,_,x;if(l===0)o!==0&&(Dk(s),s=[],n=[],i=[],o=0,a&&(a=[])),t.fallback&&(n=[rQ],i[0]=ll(E=>(s[0]=E,t.fallback())),o=1);else if(o===0){for(i=new Array(l),f=0;f<l;f++)n[f]=c[f],i[f]=ll(d);o=l}else{for(p=new Array(l),m=new Array(l),a&&(y=new Array(l)),v=0,w=Math.min(o,l);v<w&&n[v]===c[v];v++);for(w=o-1,_=l-1;w>=v&&_>=v&&n[w]===c[_];w--,_--)p[_]=i[w],m[_]=s[w],a&&(y[_]=a[w]);for(h=new Map,g=new Array(_+1),f=_;f>=v;f--)x=c[f],u=h.get(x),g[f]=u===void 0?-1:u,h.set(x,f);for(u=v;u<=w;u++)x=n[u],f=h.get(x),f!==void 0&&f!==-1?(p[f]=i[u],m[f]=s[u],a&&(y[f]=a[u]),f=g[f],h.set(x,f)):s[u]();for(f=v;f<l;f++)f in p?(i[f]=p[f],s[f]=m[f],a&&(a[f]=y[f],a[f](f))):i[f]=ll(d);i=i.slice(0,o=l),n=c.slice(0)}return i});function d(h){if(s[f]=h,a){const[g,p]=Pe(f);return a[f]=p,e(c[f],g)}return e(c[f])}}}function A(r,e){return Sr(()=>r(e||{}))}function Zm(){return!0}const lI={get(r,e,t){return e===Oa?t:r.get(e)},has(r,e){return e===Oa?!0:r.has(e)},set:Zm,deleteProperty:Zm,getOwnPropertyDescriptor(r,e){return{configurable:!0,enumerable:!0,get(){return r.get(e)},set:Zm,deleteProperty:Zm}},ownKeys(r){return r.keys()}};function ex(r){return(r=typeof r=="function"?r():r)?r:{}}function iQ(){for(let r=0,e=this.length;r<e;++r){const t=this[r]();if(t!==void 0)return t}}function at(...r){let e=!1;for(let o=0;o<r.length;o++){const a=r[o];e=e||!!a&&Oa in a,r[o]=typeof a=="function"?(e=!0,Te(a)):a}if(sU&&e)return new Proxy({get(o){for(let a=r.length-1;a>=0;a--){const c=ex(r[a])[o];if(c!==void 0)return c}},has(o){for(let a=r.length-1;a>=0;a--)if(o in ex(r[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<r.length;a++)o.push(...Object.keys(ex(r[a])));return[...new Set(o)]}},lI);const t={},n=Object.create(null);for(let o=r.length-1;o>=0;o--){const a=r[o];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!n[u])n[u]=f.get?{enumerable:!0,configurable:!0,get:iQ.bind(t[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const d=t[u];d&&(f.get?d.push(f.get.bind(a)):f.value!==void 0&&d.push(()=>f.value))}}}const i={},s=Object.keys(n);for(let o=s.length-1;o>=0;o--){const a=s[o],c=n[a];c&&c.get?Object.defineProperty(i,a,c):i[a]=c?c.value:void 0}return i}function Lt(r,...e){if(sU&&Oa in r){const i=new Set(e.length>1?e.flat():e[0]),s=e.map(o=>new Proxy({get(a){return o.includes(a)?r[a]:void 0},has(a){return o.includes(a)&&a in r},keys(){return o.filter(a=>a in r)}},lI));return s.push(new Proxy({get(o){return i.has(o)?void 0:r[o]},has(o){return i.has(o)?!1:o in r},keys(){return Object.keys(r).filter(o=>!i.has(o))}},lI)),s}const t={},n=e.map(()=>({}));for(const i of Object.getOwnPropertyNames(r)){const s=Object.getOwnPropertyDescriptor(r,i),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,c=0;for(const l of e)l.includes(i)&&(a=!0,o?n[c][i]=s.value:Object.defineProperty(n[c],i,s)),++c;a||(o?t[i]=s.value:Object.defineProperty(t,i,s))}return[...n,t]}let sQ=0;function Ti(){return`cl-${sQ++}`}const dU=r=>`Stale read from <${r}>.`;function pt(r){const e="fallback"in r&&{fallback:()=>r.fallback};return Te(nQ(()=>r.each,r.children,e||void 0))}function Oe(r){const e=r.keyed,t=Te(()=>r.when,void 0,void 0),n=e?t:Te(t,void 0,{equals:(i,s)=>!i==!s});return Te(()=>{const i=n();if(i){const s=r.children;return typeof s=="function"&&s.length>0?Sr(()=>s(e?i:()=>{if(!Sr(n))throw dU("Show");return t()})):s}return r.fallback},void 0,void 0)}function Kt(r){const e=hp(()=>r.children),t=Te(()=>{const n=e(),i=Array.isArray(n)?n:[n];let s=()=>{};for(let o=0;o<i.length;o++){const a=o,c=i[o],l=s,u=Te(()=>l()?void 0:c.when,void 0,void 0),f=c.keyed?u:Te(u,void 0,{equals:(d,h)=>!d==!h});s=()=>l()||(f()?[a,u,c]:void 0)}return s});return Te(()=>{const n=t()();if(!n)return r.fallback;const[i,s,o]=n,a=o.children;return typeof a=="function"&&a.length>0?Sr(()=>a(o.keyed?s():()=>{if(Sr(t)()?.[0]!==i)throw dU("Match");return s()})):a},void 0,void 0)}function Re(r){return r}let dh;function oQ(){dh&&[...dh].forEach(r=>r())}function hU(r){let e;const[t,n]=Pe(e,void 0);return dh||(dh=new Set),dh.add(n),mt(()=>dh.delete(n)),Te(()=>{let i;if(i=t()){const s=r.fallback;return typeof s=="function"&&s.length?Sr(()=>s(i,()=>n())):s}return YZ(()=>r.children,n)},void 0,void 0)}const aQ=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],cQ=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...aQ]),lQ=new Set(["innerHTML","textContent","innerText","children"]),uQ=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),fQ=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function dQ(r,e){const t=fQ[r];return typeof t=="object"?t[e]?t.$:void 0:t}const hQ=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),pQ=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),gQ={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},kr=r=>Te(()=>r());function mQ(r,e,t){let n=t.length,i=e.length,s=n,o=0,a=0,c=e[i-1].nextSibling,l=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const u=s<n?a?t[a-1].nextSibling:t[s-a]:c;for(;a<s;)r.insertBefore(t[a++],u)}else if(s===a)for(;o<i;)(!l||!l.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const u=e[--i].nextSibling;r.insertBefore(t[a++],e[o++].nextSibling),r.insertBefore(t[--s],u),e[i]=t[s]}else{if(!l){l=new Map;let f=a;for(;f<s;)l.set(t[f],f++)}const u=l.get(e[o]);if(u!=null)if(a<u&&u<s){let f=o,d=1,h;for(;++f<i&&f<s&&!((h=l.get(e[f]))==null||h!==u+d);)d++;if(d>u-a){const g=e[o];for(;a<u;)r.insertBefore(t[a++],g)}else r.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const Mk="_$DX_DELEGATE";function yQ(r,e,t,n={}){let i;return ll(s=>{i=s,e===document?r():Z(e,r(),e.firstChild?null:void 0,t)},n.owner),()=>{i(),e.textContent=""}}function le(r,e,t,n){let i;const s=()=>{const a=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=r,t?a.content.firstChild.firstChild:n?a.firstChild:a.content.firstChild},o=e?()=>Sr(()=>document.importNode(i||(i=s()),!0)):()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function At(r,e=window.document){const t=e[Mk]||(e[Mk]=new Set);for(let n=0,i=r.length;n<i;n++){const s=r[n];t.has(s)||(t.add(s),e.addEventListener(s,_Q))}}function Lr(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function vQ(r,e,t,n){n==null?r.removeAttributeNS(e,t):r.setAttributeNS(e,t,n)}function bQ(r,e,t){t?r.setAttribute(e,""):r.removeAttribute(e)}function tn(r,e){e==null?r.removeAttribute("class"):r.className=e}function gl(r,e,t,n){if(n)Array.isArray(t)?(r[`$$${e}`]=t[0],r[`$$${e}Data`]=t[1]):r[`$$${e}`]=t;else if(Array.isArray(t)){const i=t[0];r.addEventListener(e,t[0]=s=>i.call(r,t[1],s))}else r.addEventListener(e,t,typeof t!="function"&&t)}function nr(r,e,t={}){const n=Object.keys(e||{}),i=Object.keys(t);let s,o;for(s=0,o=i.length;s<o;s++){const a=i[s];!a||a==="undefined"||e[a]||(Bk(r,a,!1),delete t[a])}for(s=0,o=n.length;s<o;s++){const a=n[s],c=!!e[a];!a||a==="undefined"||t[a]===c||!c||(Bk(r,a,!0),t[a]=c)}return t}function p1(r,e,t){if(!e)return t?Lr(r,"style"):e;const n=r.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let i,s;for(s in t)e[s]==null&&n.removeProperty(s),delete t[s];for(s in e)i=e[s],i!==t[s]&&(n.setProperty(s,i),t[s]=i);return t}function un(r,e={},t,n){const i={};return n||Ge(()=>i.children=Ig(r,e.children,i.children)),Ge(()=>typeof e.ref=="function"&&cd(e.ref,r)),Ge(()=>wQ(r,e,t,!0,i,!0)),i}function cd(r,e,t){return Sr(()=>r(e,t))}function Z(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Ig(r,e,n,t);Ge(i=>Ig(r,e(),i,t),n)}function wQ(r,e,t,n,i={},s=!1){e||(e={});for(const o in i)if(!(o in e)){if(o==="children")continue;i[o]=Nk(r,o,null,i[o],t,s,e)}for(const o in e){if(o==="children")continue;const a=e[o];i[o]=Nk(r,o,a,i[o],t,s,e)}}function xQ(r){return r.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Bk(r,e,t){const n=e.trim().split(/\s+/);for(let i=0,s=n.length;i<s;i++)r.classList.toggle(n[i],t)}function Nk(r,e,t,n,i,s,o){let a,c,l,u,f;if(e==="style")return p1(r,t,n);if(e==="classList")return nr(r,t,n);if(t===n)return n;if(e==="ref")s||t(r);else if(e.slice(0,3)==="on:"){const d=e.slice(3);n&&r.removeEventListener(d,n,typeof n!="function"&&n),t&&r.addEventListener(d,t,typeof t!="function"&&t)}else if(e.slice(0,10)==="oncapture:"){const d=e.slice(10);n&&r.removeEventListener(d,n,!0),t&&r.addEventListener(d,t,!0)}else if(e.slice(0,2)==="on"){const d=e.slice(2).toLowerCase(),h=hQ.has(d);if(!h&&n){const g=Array.isArray(n)?n[0]:n;r.removeEventListener(d,g)}(h||t)&&(gl(r,d,t,h),h&&At([d]))}else if(e.slice(0,5)==="attr:")Lr(r,e.slice(5),t);else if(e.slice(0,5)==="bool:")bQ(r,e.slice(5),t);else if((f=e.slice(0,5)==="prop:")||(l=lQ.has(e))||!i&&((u=dQ(e,r.tagName))||(c=cQ.has(e)))||(a=r.nodeName.includes("-")||"is"in o))f&&(e=e.slice(5),c=!0),e==="class"||e==="className"?tn(r,t):a&&!c&&!l?r[xQ(e)]=t:r[u||e]=t;else{const d=i&&e.indexOf(":")>-1&&gQ[e.split(":")[0]];d?vQ(r,d,e,t):Lr(r,uQ[e]||e,t)}return t}function _Q(r){let e=r.target;const t=`$$${r.type}`,n=r.target,i=r.currentTarget,s=c=>Object.defineProperty(r,"target",{configurable:!0,value:c}),o=()=>{const c=e[t];if(c&&!e.disabled){const l=e[`${t}Data`];if(l!==void 0?c.call(e,l,r):c.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&s(e.host),!0},a=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const c=r.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(e=c[l],!!o());l++){if(e._$host){e=e._$host,a();break}if(e.parentNode===i)break}}else a();s(n)}function Ig(r,e,t,n,i){for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=n!==void 0;if(r=o&&t[0]&&t[0].parentNode||r,s==="string"||s==="number"){if(s==="number"&&(e=e.toString(),e===t))return t;if(o){let a=t[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),t=Cd(r,t,n,a)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||s==="boolean")t=Cd(r,t,n);else{if(s==="function")return Ge(()=>{let a=e();for(;typeof a=="function";)a=a();t=Ig(r,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],c=t&&Array.isArray(t);if(uI(a,e,t,i))return Ge(()=>t=Ig(r,a,t,n,!0)),()=>t;if(a.length===0){if(t=Cd(r,t,n),o)return t}else c?t.length===0?Lk(r,a,n):mQ(r,t,a):(t&&Cd(r),Lk(r,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=Cd(r,t,n,e);Cd(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function uI(r,e,t,n){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],c=t&&t[r.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)r.push(a);else if(Array.isArray(a))i=uI(r,a,c)||i;else if(l==="function")if(n){for(;typeof a=="function";)a=a();i=uI(r,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else r.push(a),i=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?r.push(c):r.push(document.createTextNode(u))}}return i}function Lk(r,e,t=null){for(let n=0,i=e.length;n<i;n++)r.insertBefore(e[n],t)}function Cd(r,e,t,n){if(t===void 0)return r.textContent="";const i=n||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const c=a.parentNode===r;!s&&!o?c?r.replaceChild(i,a):r.insertBefore(i,t):c&&a.remove()}else s=!0}}else r.insertBefore(i,t);return[i]}const SQ=!1,EQ="http://www.w3.org/2000/svg";function pU(r,e=!1){return e?document.createElementNS(EQ,r):document.createElement(r)}function g1(r){const{useShadow:e}=r,t=document.createTextNode(""),n=()=>r.mount||document.body,i=ad();let s;return ot(()=>{s||(s=hm(i,()=>Te(()=>r.children)));const o=n();if(o instanceof HTMLHeadElement){const[a,c]=Pe(!1),l=()=>c(!0);ll(u=>Z(o,()=>a()?u():s(),null)),mt(l)}else{const a=pU(r.isSVG?"g":"div",r.isSVG),c=e&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return t.parentNode},configurable:!0}),Z(c,s),o.appendChild(a),r.ref&&r.ref(a),mt(()=>o.removeChild(a))}},void 0,{render:!0}),t}function AQ(r,e){const t=Te(r);return Te(()=>{const n=t();switch(typeof n){case"function":return Sr(()=>n(e));case"string":const i=pQ.has(n),s=pU(n,i);return un(s,e,i),s}})}function HT(r){const[,e]=Lt(r,["component"]);return AQ(()=>r.component,e)}/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const fs=2n**255n-19n,ig=2n**252n+27742317777372353535851937790883648493n,Fk=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Uk=0x6666666666666666666666666666666666666666666666666666666666666658n,IQ=37095705934669439343138083508754565189542113879843219016388785533085940283555n,Qm={a:-1n,d:IQ,h:8},zi=(r="")=>{throw new Error(r)},gU=r=>typeof r=="string",CQ=r=>r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array",zh=(r,e)=>!CQ(r)||typeof e=="number"&&e>0&&r.length!==e?zi("Uint8Array of valid length expected"):r,qh=r=>new Uint8Array(r),kf=(r,e)=>zh(gU(r)?GT(r):qh(zh(r)),e),Gt=(r,e=fs)=>{let t=r%e;return t>=0n?t:e+t},zk=r=>r instanceof Cu?r:zi("Point expected");let Cu=class rh{constructor(e,t,n,i){this.ex=e,this.ey=t,this.ez=n,this.et=i}static fromAffine(e){return new rh(e.x,e.y,1n,Gt(e.x*e.y))}static fromHex(e,t=!1){const{d:n}=Qm;e=kf(e,32);const i=e.slice(),s=e[31];i[31]=s&-129;const o=YT(i);t&&!(0n<=o&&o<2n**256n)&&zi("bad y coord 1"),!t&&!(0n<=o&&o<fs)&&zi("bad y coord 2");const a=Gt(o*o),c=Gt(a-1n),l=Gt(n*a+1n);let{isValid:u,value:f}=RQ(c,l);u||zi("bad y coordinate 3");const d=(f&1n)===1n,h=(s&128)!==0;return!t&&f===0n&&h&&zi("bad y coord 3"),h!==d&&(f=Gt(-f)),new rh(f,o,1n,Gt(f*o))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){const{ex:t,ey:n,ez:i}=this,{ex:s,ey:o,ez:a}=zk(e),c=Gt(t*a),l=Gt(s*i),u=Gt(n*a),f=Gt(o*i);return c===l&&u===f}is0(){return this.equals(N0)}negate(){return new rh(Gt(-this.ex),this.ey,this.ez,Gt(-this.et))}double(){const{ex:e,ey:t,ez:n}=this,{a:i}=Qm,s=Gt(e*e),o=Gt(t*t),a=Gt(2n*Gt(n*n)),c=Gt(i*s),l=e+t,u=Gt(Gt(l*l)-s-o),f=c+o,d=f-a,h=c-o,g=Gt(u*d),p=Gt(f*h),m=Gt(u*h),y=Gt(d*f);return new rh(g,p,y,m)}add(e){const{ex:t,ey:n,ez:i,et:s}=this,{ex:o,ey:a,ez:c,et:l}=zk(e),{a:u,d:f}=Qm,d=Gt(t*o),h=Gt(n*a),g=Gt(s*f*l),p=Gt(i*c),m=Gt((t+n)*(o+a)-d-h),y=Gt(p-g),v=Gt(p+g),w=Gt(h-u*d),_=Gt(m*y),x=Gt(v*w),E=Gt(m*w),S=Gt(y*v);return new rh(_,x,S,E)}mul(e,t=!0){if(e===0n)return t===!0?zi("cannot multiply by 0"):N0;if(typeof e=="bigint"&&0n<e&&e<ig||zi("invalid scalar, must be < L"),!t&&this.is0()||e===1n)return this;if(this.equals(Tu))return FQ(e).p;let n=N0,i=Tu;for(let s=this;e>0n;s=s.double(),e>>=1n)e&1n?n=n.add(s):t&&(i=i.add(s));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(Qm.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(ig/2n,!1).double();return ig%2n&&(e=e.add(this)),e.is0()}toAffine(){const{ex:e,ey:t,ez:n}=this;if(this.equals(N0))return{x:0n,y:1n};const i=vU(n,fs);return Gt(n*i)!==1n&&zi("invalid inverse"),{x:Gt(e*i),y:Gt(t*i)}}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=yU(t);return n[31]|=e&1n?128:0,n}toHex(){return WT(this.toRawBytes())}};Cu.BASE=new Cu(Fk,Uk,1n,Gt(Fk*Uk));Cu.ZERO=new Cu(0n,1n,1n,0n);const{BASE:Tu,ZERO:N0}=Cu,mU=(r,e)=>r.toString(16).padStart(e,"0"),WT=r=>Array.from(zh(r)).map(e=>mU(e,2)).join(""),Dc={_0:48,_9:57,A:65,F:70,a:97,f:102},qk=r=>{if(r>=Dc._0&&r<=Dc._9)return r-Dc._0;if(r>=Dc.A&&r<=Dc.F)return r-(Dc.A-10);if(r>=Dc.a&&r<=Dc.f)return r-(Dc.a-10)},GT=r=>{const e="hex invalid";if(!gU(r))return zi(e);const t=r.length,n=t/2;if(t%2)return zi(e);const i=qh(n);for(let s=0,o=0;s<n;s++,o+=2){const a=qk(r.charCodeAt(o)),c=qk(r.charCodeAt(o+1));if(a===void 0||c===void 0)return zi(e);i[s]=a*16+c}return i},yU=r=>GT(mU(r,32*2)).reverse(),YT=r=>BigInt("0x"+WT(qh(zh(r)).reverse())),Cg=(...r)=>{const e=qh(r.reduce((n,i)=>n+zh(i).length,0));let t=0;return r.forEach(n=>{e.set(n,t),t+=n.length}),e},vU=(r,e)=>{(r===0n||e<=0n)&&zi("no inverse n="+r+" mod="+e);let t=Gt(r,e),n=e,i=0n,s=1n;for(;t!==0n;){const o=n/t,a=n%t,c=i-s*o;n=t,t=a,i=s,s=c}return n===1n?Gt(i,e):zi("no inverse")},Wa=(r,e)=>{let t=r;for(;e-- >0n;)t*=t,t%=fs;return t},TQ=r=>{const t=r*r%fs*r%fs,n=Wa(t,2n)*t%fs,i=Wa(n,1n)*r%fs,s=Wa(i,5n)*i%fs,o=Wa(s,10n)*s%fs,a=Wa(o,20n)*o%fs,c=Wa(a,40n)*a%fs,l=Wa(c,80n)*c%fs,u=Wa(l,80n)*c%fs,f=Wa(u,10n)*s%fs;return{pow_p_5_8:Wa(f,2n)*r%fs,b2:t}},jk=19681161376707505956807079304988542015446066515923890162744021073123829784752n,RQ=(r,e)=>{const t=Gt(e*e*e),n=Gt(t*t*e),i=TQ(r*n).pow_p_5_8;let s=Gt(r*t*i);const o=Gt(e*s*s),a=s,c=Gt(s*jk),l=o===r,u=o===Gt(-r),f=o===Gt(-r*jk);return l&&(s=a),(u||f)&&(s=c),(Gt(s)&1n)===1n&&(s=Gt(-s)),{isValid:l||u,value:s}},Gv=r=>Gt(YT(r),ig);let sg;const JT=(...r)=>ZT.sha512Async(...r),kQ=(...r)=>typeof sg=="function"?sg(...r):zi("etc.sha512Sync not set"),bU=r=>{const e=r.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const t=r.slice(32,64),n=Gv(e),i=Tu.mul(n),s=i.toRawBytes();return{head:e,prefix:t,scalar:n,point:i,pointBytes:s}},XT=r=>JT(kf(r,32)).then(bU),OQ=r=>bU(kQ(kf(r,32))),PQ=r=>XT(r).then(e=>e.pointBytes);function wU(r,e){return JT(e.hashable).then(e.finish)}const $Q=(r,e,t)=>{const{pointBytes:n,scalar:i}=r,s=Gv(e),o=Tu.mul(s).toRawBytes();return{hashable:Cg(o,n,t),finish:l=>{const u=Gt(s+Gv(l)*i,ig);return zh(Cg(o,yU(u)),64)}}},DQ=async(r,e)=>{const t=kf(r),n=await XT(e),i=await JT(n.prefix,t);return wU(!0,$Q(n,i,t))},xU={zip215:!0},MQ=(r,e,t,n=xU)=>{r=kf(r,64),e=kf(e),t=kf(t,32);const{zip215:i}=n;let s,o,a,c,l=new Uint8Array;try{s=Cu.fromHex(t,i),o=Cu.fromHex(r.slice(0,32),i),a=YT(r.slice(32,64)),c=Tu.mul(a,!1),l=Cg(o.toRawBytes(),s.toRawBytes(),e)}catch{}return{hashable:l,finish:f=>{if(c==null||!i&&s.isSmallOrder())return!1;const d=Gv(f);return o.add(s.mul(d,!1)).add(c.negate()).clearCofactor().is0()}}},BQ=async(r,e,t,n=xU)=>wU(!0,MQ(r,e,t,n)),Vk=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,ZT={bytesToHex:WT,hexToBytes:GT,concatBytes:Cg,mod:Gt,invert:vU,randomBytes:(r=32)=>{const e=Vk();return(!e||!e.getRandomValues)&&zi("crypto.getRandomValues must be defined"),e.getRandomValues(qh(r))},sha512Async:async(...r)=>{const e=Vk(),t=e&&e.subtle;t||zi("etc.sha512Async or crypto.subtle must be defined");const n=Cg(...r);return qh(await t.digest("SHA-512",n.buffer))},sha512Sync:void 0};Object.defineProperties(ZT,{sha512Sync:{configurable:!1,get(){return sg},set(r){sg||(sg=r)}}});const NQ={getExtendedPublicKeyAsync:XT,getExtendedPublicKey:OQ,randomPrivateKey:()=>ZT.randomBytes(32),precompute:(r=8,e=Tu)=>(e.multiply(3n),e)},gf=8,LQ=()=>{const r=[],e=256/gf+1;let t=Tu,n=t;for(let i=0;i<e;i++){n=t,r.push(n);for(let s=1;s<2**(gf-1);s++)n=n.add(t),r.push(n);t=n.double()}return r};let Kk;const FQ=r=>{const e=Kk||(Kk=LQ()),t=(u,f)=>{let d=f.negate();return u?d:f};let n=N0,i=Tu;const s=1+256/gf,o=2**(gf-1),a=BigInt(2**gf-1),c=2**gf,l=BigInt(gf);for(let u=0;u<s;u++){const f=u*o;let d=Number(r&a);r>>=l,d>o&&(d-=c,r+=1n);const h=f,g=f+Math.abs(d)-1,p=u%2!==0,m=d<0;d===0?i=i.add(t(p,e[h])):n=n.add(t(m,e[g]))}return{p:n,f:i}};var _U=new Set(["decrypt","deriveBits","deriveKey","encrypt","unwrapKey","wrapKey"]),SU=[48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32];function Tg(r){return r instanceof Uint8Array?r:new Uint8Array(ArrayBuffer.isView(r)?r.buffer:r)}var Rg,Yv;function UQ(r,e,t){const n=zQ(e,t),i=Rg||=new WeakMap;return i.set(n.privateKey,r),i.set(n.publicKey,r),n}function zQ(r,e){if(e.length===0)throw new DOMException("Usages cannot be empty when creating a key.","SyntaxError");if(e.some(s=>_U.has(s)))throw new DOMException("Unsupported key usage for an Ed25519 key.","SyntaxError");const t={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"})},n={...t,extractable:r,type:"private",usages:Object.freeze(e.filter(s=>s==="sign"))},i={...t,extractable:!0,type:"public",usages:Object.freeze(e.filter(s=>s==="verify"))};return Object.freeze({privateKey:Object.freeze(n),publicKey:Object.freeze(i)})}function Jv(r){const e=Rg?.get(r);if(e===void 0)throw new Error("Could not find secret key material associated with this `CryptoKey`");return e}async function fI(r){const e=Yv||=new WeakMap,t=e.get(r);if(t)return t;const n=await PQ(Jv(r));return e.set(r,n),n}function Hk(r){return btoa(Array.from(r,e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Wk(r){const e=r.length%4,t=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(e===0?0:4-e),"=");return Uint8Array.from(atob(t),n=>n.charCodeAt(0))}async function qQ(r,e){if(e.extractable===!1)throw new DOMException("key is not extractable","InvalidAccessException");switch(r){case"raw":{if(e.type!=="public")throw new DOMException(`Unable to export a raw Ed25519 ${e.type} key`,"InvalidAccessError");return await fI(e)}case"pkcs8":{if(e.type!=="private")throw new DOMException(`Unable to export a pkcs8 Ed25519 ${e.type} key`,"InvalidAccessError");const t=Jv(e);return new Uint8Array([...SU,...t])}case"jwk":{const t=await fI(e),n={crv:"Ed25519",ext:e.extractable,key_ops:e.usages,kty:"OKP",x:Hk(t)};if(e.type==="private"){const i=Jv(e);return Object.freeze({...n,d:Hk(i)})}return Object.freeze({...n})}default:throw new Error(`Exporting polyfilled Ed25519 keys in the "${r}" format is unimplemented`)}}function jQ(r,e){const t=NQ.randomPrivateKey();return UQ(t,r,e)}function tx(r){return!!Rg?.has(r)||!!Yv?.has(r)}async function VQ(r,e){if(r.type!=="private"||!r.usages.includes("sign"))throw new DOMException("Unable to use this key to sign","InvalidAccessError");const t=Jv(r),n=Tg(e);return await DQ(n,t)}async function KQ(r,e,t){if(r.type!=="public"||!r.usages.includes("verify"))throw new DOMException("Unable to use this key to verify","InvalidAccessError");const n=await fI(r);try{return await BQ(Tg(e),Tg(t),n)}catch{return!1}}function rx(r,e){const t=new Set([...e==="private"?["verify"]:["sign"],..._U]);if(r.some(n=>t.has(n)))throw new DOMException("Unsupported key usage for a Ed25519 key","SyntaxError")}function HQ(r,e,t,n){if(r==="raw"){const i=Tg(e);if(rx(n,"public"),i.length!==32)throw new DOMException("Ed25519 raw keys must be exactly 32-bytes","DataError");const s={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:"public",usages:Object.freeze(n.filter(a=>a==="verify"))};return(Yv||=new WeakMap).set(s,i),s}if(r==="pkcs8"){const i=Tg(e);if(rx(n,"private"),i.length!==48)throw new DOMException("Invalid keyData","DataError");if(!i.slice(0,16).every((l,u)=>l===SU[u]))throw new DOMException("Invalid keyData","DataError");const o=i.slice(16),a={[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:"private",usages:Object.freeze(n.filter(l=>l==="sign"))};return(Rg||=new WeakMap).set(a,o),a}if(r==="jwk"){const i=e,s="d"in i?"private":"public";rx(n,s);const o=new Set(i.key_ops??[]),a=n.length===o.size&&[...n].every(u=>o.has(u));if(i.kty!=="OKP"||i.crv!=="Ed25519"||i.ext!==t||!a)throw new DOMException("Invalid Ed25519 JWK","DataError");if(s==="public"&&!i.x)throw new DOMException("Ed25519 JWK is missing public key coordinates","DataError");if(s==="private"&&!i.d)throw new DOMException("Ed25519 JWK is missing private key coordinates","DataError");const c=s==="public"?"verify":"sign",l=Object.freeze({[Symbol.toStringTag]:"CryptoKey",algorithm:Object.freeze({name:"Ed25519"}),extractable:t,type:s,usages:Object.freeze(n.filter(u=>u===c))});return s==="public"?(Yv||=new WeakMap).set(l,Wk(i.x)):(Rg||=new WeakMap).set(l,Wk(i.d)),l}throw new Error(`Importing Ed25519 keys in the "${r}" format is unimplemented`)}function Gk(r){return(typeof r=="string"?r:r.name).localeCompare("Ed25519","en-US",{sensitivity:"base"})===0}function WQ(){if(globalThis.isSecureContext){const r=globalThis.crypto||={},e=r.subtle||={},t=e.exportKey;e.exportKey=async(...l)=>{const[u,f]=l;if(tx(f))return await qQ(...l);if(t)return await t.apply(e,l);throw new TypeError("No native `exportKey` function exists to handle this call")};const n=e.generateKey;let i;e.generateKey=async(...l)=>{const[u]=l;if(!Gk(u)){if(n)return await n.apply(e,l);throw new TypeError("No native `generateKey` function exists to handle this call")}let f;if(i===void 0&&(i=new Promise(d=>{if(!n){d(i=!1);return}n.apply(e,l).then(h=>{e.generateKey!==n&&(e.generateKey=n),f=h,d(i=!0)}).catch(()=>{d(i=!1)})})),typeof i=="boolean"?i:await i){if(f)return f;if(n)return await n.apply(e,l);throw new TypeError("No native `generateKey` function exists to handle this call")}else{const[d,h,g]=l;return jQ(h,g)}};const s=e.sign;e.sign=async(...l)=>{const[u,f]=l;if(tx(f)){const[d,...h]=l;return await VQ(...h)}else{if(s)return await s.apply(e,l);throw new TypeError("No native `sign` function exists to handle this call")}};const o=e.verify;e.verify=async(...l)=>{const[u,f]=l;if(tx(f)){const[d,...h]=l;return await KQ(...h)}else{if(o)return await o.apply(e,l);throw new TypeError("No native `verify` function exists to handle this call")}};const a=e.importKey;let c;e.importKey=async(...l)=>{const[u,f,d]=l;if(!Gk(d)){if(a)return await a.apply(e,l);throw new TypeError("No native `importKey` function exists to handle this call")}let h;if(c===void 0&&(c=new Promise(g=>{if(!a){g(c=!1);return}a.apply(e,l).then(p=>{e.importKey!==a&&(e.importKey=a),h=p,g(c=!0)}).catch(()=>{g(c=!1)})})),typeof a=="boolean"?c:await c){if(h)return h;if(a)return await a.apply(e,l);throw new TypeError("No native `importKey` function exists to handle this call")}else{const[g,p,m,y,v]=l;return HQ(u,f,y,v)}}}}function El(r,e){const t=fn(e);return[n=>A(t.Provider,{value:r(n),get children(){return n.children}}),()=>rn(t)]}function GQ(r){const{values:e}=r,t=n=>{let i=e[n];if(!i)return r.children;const s={get children(){return t(n+1)}};return Array.isArray(i)&&(s.value=i[1],i=i[0],typeof i!="function"&&(i=i.Provider)),A(i,s)};return t(0)}function EU(){let r=new Set;function e(i){return r.add(i),()=>r.delete(i)}let t=!1;function n(i,s){if(t)return!(t=!1);const o={to:i,options:s,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of r)a.listener({...o,from:a.location,retry:c=>{c&&(t=!0),a.navigate(i,{...s,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:n}}let dI;function QT(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),dI=window.history.state._depth}QT();function YQ(r){return{...r,_depth:window.history.state&&window.history.state._depth}}function JQ(r,e){let t=!1;return()=>{const n=dI;QT();const i=n==null?null:dI-n;if(t){t=!1;return}i&&e(i)?(t=!0,window.history.go(-i)):r()}}const XQ=/^(?:[a-z0-9]+:)?\/\//i,ZQ=/^\/+|(\/)\/+$/g,AU="http://sr";function Of(r,e=!1){const t=r.replace(ZQ,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function hv(r,e,t){if(XQ.test(e))return;const n=Of(r),i=t&&Of(t);let s="";return!i||e.startsWith("/")?s=n:i.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+i:s=i,(s||"/")+Of(e,!s)}function QQ(r,e){if(r==null)throw new Error(e);return r}function eee(r,e){return Of(r).replace(/\/*(\*.*)?$/g,"")+Of(e)}function IU(r){const e={};return r.searchParams.forEach((t,n)=>{n in e?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=t}),e}function tee(r,e,t){const[n,i]=r.split("/*",2),s=n.split("/").filter(Boolean),o=s.length;return a=>{const c=a.split("/").filter(Boolean),l=c.length-o;if(l<0||l>0&&i===void 0&&!e)return null;const u={path:o?"":"/",params:{}},f=d=>t===void 0?void 0:t[d];for(let d=0;d<o;d++){const h=s[d],g=h[0]===":",p=g?c[d]:c[d].toLowerCase(),m=g?h.slice(1):h.toLowerCase();if(g&&nx(p,f(m)))u.params[m]=p;else if(g||!nx(p,m))return null;u.path+=`/${p}`}if(i){const d=l?c.slice(-l).join("/"):"";if(nx(d,f(i)))u.params[i]=d;else return null}return u}}function nx(r,e){const t=n=>n===r;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(r):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(r):!1}function ree(r){const[e,t]=r.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((i,s)=>i+(s.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function CU(r){const e=new Map,t=ad();return new Proxy({},{get(n,i){return e.has(i)||hm(t,()=>e.set(i,Te(()=>r()[i]))),e.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function nee(r,e){const t=new URLSearchParams(r);Object.entries(e).forEach(([i,s])=>{s==null||s===""||s instanceof Array&&!s.length?t.delete(i):s instanceof Array?(t.delete(i),s.forEach(o=>{t.append(i,String(o))})):t.set(i,String(s))});const n=t.toString();return n?`?${n}`:""}function TU(r){let e=/(\/?\:[^\/]+)\?/.exec(r);if(!e)return[r];let t=r.slice(0,e.index),n=r.slice(e.index+e[0].length);const i=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)i.push(t+=e[1]),n=n.slice(e[0].length);return TU(n).reduce((s,o)=>[...s,...i.map(a=>a+o)],[])}const iee=100,RU=fn(),eR=fn(),mm=()=>QQ(rn(RU),"<A> and 'use' router primitives can be only used inside a Route."),see=()=>rn(eR)||mm().base,oee=r=>{const e=see();return Te(()=>e.resolvePath(r()))},aee=r=>{const e=mm();return Te(()=>{const t=r();return t!==void 0?e.renderPath(t):t})},Gn=()=>mm().navigatorFactory(),ld=()=>mm().location,m1=()=>mm().params,Na=()=>{const r=ld(),e=Gn(),t=(n,i)=>{const s=Sr(()=>nee(r.search,n)+r.hash);e(s,{scroll:!1,resolve:!1,...i})};return[r.query,t]};function cee(r,e=""){const{component:t,preload:n,load:i,children:s,info:o}=r,a=!s||Array.isArray(s)&&!s.length,c={key:r,component:t,preload:n||i,info:o};return kU(r.path).reduce((l,u)=>{for(const f of TU(u)){const d=eee(e,f);let h=a?d:d.split("/*",1)[0];h=h.split("/").map(g=>g.startsWith(":")||g.startsWith("*")?g:encodeURIComponent(g)).join("/"),l.push({...c,originalPath:u,pattern:h,matcher:tee(h,!a,r.matchFilters)})}return l},[])}function lee(r,e=0){return{routes:r,score:ree(r[r.length-1])*1e4-e,matcher(t){const n=[];for(let i=r.length-1;i>=0;i--){const s=r[i],o=s.matcher(t);if(!o)return null;n.unshift({...o,route:s})}return n}}}function kU(r){return Array.isArray(r)?r:[r]}function OU(r,e="",t=[],n=[]){const i=kU(r);for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const c=cee(a,e);for(const l of c){t.push(l);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)OU(a.children,l.pattern,t,n);else{const f=lee([...t],n.length);n.push(f)}t.pop()}}}return t.length?n:n.sort((s,o)=>o.score-s.score)}function ix(r,e){for(let t=0,n=r.length;t<n;t++){const i=r[t].matcher(e);if(i)return i}return[]}function uee(r,e,t){const n=new URL(AU),i=Te(u=>{const f=r();try{return new URL(f,n)}catch{return console.error(`Invalid path ${f}`),u}},n,{equals:(u,f)=>u.href===f.href}),s=Te(()=>i().pathname),o=Te(()=>i().search,!0),a=Te(()=>i().hash),c=()=>"",l=Pn(o,()=>IU(i()));return{get pathname(){return s()},get search(){return o()},get hash(){return a()},get state(){return e()},get key(){return c()},query:t?t(l):CU(l)}}let mf;function fee(){return mf}function dee(r,e,t,n={}){const{signal:[i,s],utils:o={}}=r,a=o.parsePath||(b=>b),c=o.renderPath||(b=>b),l=o.beforeLeave||EU(),u=hv("",n.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!i().value&&s({value:u,replace:!0,scroll:!1});const[f,d]=Pe(!1);let h;const g=(b,I)=>{I.value===p()&&I.state===y()||(h===void 0&&d(!0),mf=b,h=I,JZ(()=>{h===I&&(m(h.value),v(h.state),oQ(),x[1](B=>B.filter(F=>F.pending)))}).finally(()=>{h===I&&In(()=>{mf=void 0,b==="navigate"&&L(h),d(!1),h=void 0})}))},[p,m]=Pe(i().value),[y,v]=Pe(i().state),w=uee(p,y,o.queryWrapper),_=[],x=Pe([]),E=Te(()=>typeof n.transformUrl=="function"?ix(e(),n.transformUrl(w.pathname)):ix(e(),w.pathname)),S=()=>{const b=E(),I={};for(let B=0;B<b.length;B++)Object.assign(I,b[B].params);return I},T=o.paramsWrapper?o.paramsWrapper(S,e):CU(S),C={pattern:u,path:()=>u,outlet:()=>null,resolvePath(b){return hv(u,b)}};return Ge(Pn(i,b=>g("native",b),{defer:!0})),{base:C,location:w,params:T,isRouting:f,renderPath:c,parsePath:a,navigatorFactory:V,matches:E,beforeLeave:l,preloadRoute:D,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:x};function P(b,I,B){Sr(()=>{if(typeof I=="number"){I&&(o.go?o.go(I):console.warn("Router integration does not support relative routing"));return}const F=!I||I[0]==="?",{replace:z,resolve:G,scroll:Q,state:X}={replace:!1,resolve:!F,scroll:!0,...B},O=G?b.resolvePath(I):hv(F&&w.pathname||"",I);if(O===void 0)throw new Error(`Path '${I}' is not a routable path`);if(_.length>=iee)throw new Error("Too many redirects");const R=p();(O!==R||X!==y())&&(SQ||l.confirm(O,B)&&(_.push({value:R,replace:z,scroll:Q,state:y()}),g("navigate",{value:O,state:X})))})}function V(b){return b=b||rn(eR)||C,(I,B)=>P(b,I,B)}function L(b){const I=_[0];I&&(s({...b,replace:I.replace,scroll:I.scroll}),_.length=0)}function D(b,I){const B=ix(e(),b.pathname),F=mf;mf="preload";for(let z in B){const{route:G,params:Q}=B[z];G.component&&G.component.preload&&G.component.preload();const{preload:X}=G;I&&X&&hm(t(),()=>X({params:Q,location:{pathname:b.pathname,search:b.search,hash:b.hash,query:IU(b),state:null,key:""},intent:"preload"}))}mf=F}}function hee(r,e,t,n){const{base:i,location:s,params:o}=r,{pattern:a,component:c,preload:l}=n().route,u=Te(()=>n().path);c&&c.preload&&c.preload();const f=l?l({params:o,location:s,intent:mf||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>c?A(c,{params:o,location:s,data:f,get children(){return t()}}):t(),resolvePath(h){return hv(i.path(),h,u())}}}const pee=r=>e=>{const{base:t}=e,n=hp(()=>e.children),i=Te(()=>OU(n(),e.base||""));let s;const o=dee(r,i,()=>s,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return r.create&&r.create(o),A(RU.Provider,{value:o,get children(){return A(gee,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[kr(()=>(s=ad())&&null),A(mee,{routerState:o,get branches(){return i()}})]}})}})};function gee(r){const e=r.routerState.location,t=r.routerState.params,n=Te(()=>r.preload&&Sr(()=>{r.preload({params:t,location:e,intent:fee()||"initial"})}));return A(Oe,{get when(){return r.root},keyed:!0,get fallback(){return r.children},children:i=>A(i,{params:t,location:e,get data(){return n()},get children(){return r.children}})})}function mee(r){const e=[];let t;const n=Te(Pn(r.routerState.matches,(i,s,o)=>{let a=s&&i.length===s.length;const c=[];for(let l=0,u=i.length;l<u;l++){const f=s&&s[l],d=i[l];o&&f&&d.route.key===f.route.key?c[l]=o[l]:(a=!1,e[l]&&e[l](),ll(h=>{e[l]=h,c[l]=hee(r.routerState,c[l-1]||r.routerState.base,Yk(()=>n()[l+1]),()=>r.routerState.matches()[l])}))}return e.splice(i.length).forEach(l=>l()),o&&a?o:(t=c[0],c)}));return Yk(()=>n()&&t)()}const Yk=r=>()=>A(Oe,{get when(){return r()},keyed:!0,children:e=>A(eR.Provider,{value:e,get children(){return e.outlet()}})}),gn=r=>{const e=hp(()=>r.children);return at(r,{get children(){return e()}})};function yee([r,e],t,n){return[r,n?i=>e(n(i)):e]}function PU(r){let e=!1;const t=i=>typeof i=="string"?{value:i}:i,n=yee(Pe(t(r.get()),{equals:(i,s)=>i.value===s.value&&i.state===s.state}),void 0,i=>(!e&&r.set(i),i));return r.init&&mt(r.init((i=r.get())=>{e=!0,n[1](t(i)),e=!1})),pee({signal:n,create:r.create,utils:r.utils})}function vee(r,e,t){return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}function $U(r,e){const t=r&&document.getElementById(r);t?t.scrollIntoView():e&&window.scrollTo(0,0)}const bee=new Map;function DU(r=!0,e=!1,t="/_server",n){return i=>{const s=i.base.path(),o=i.navigatorFactory(i.base);let a,c;function l(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const m=p.composedPath().find(E=>E instanceof Node&&E.nodeName.toUpperCase()==="A");if(!m||e&&!m.hasAttribute("link"))return;const y=l(m),v=y?m.href.baseVal:m.href;if((y?m.target.baseVal:m.target)||!v&&!m.hasAttribute("state"))return;const _=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||_&&_.includes("external"))return;const x=y?new URL(v,document.baseURI):new URL(v);if(!(x.origin!==window.location.origin||s&&x.pathname&&!x.pathname.toLowerCase().startsWith(s.toLowerCase())))return[m,x]}function f(p){const m=u(p);if(!m)return;const[y,v]=m,w=i.parsePath(v.pathname+v.search+v.hash),_=y.getAttribute("state");p.preventDefault(),o(w,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:_?JSON.parse(_):void 0})}function d(p){const m=u(p);if(!m)return;const[y,v]=m;i.preloadRoute(v,y.getAttribute("preload")!=="false")}function h(p){clearTimeout(a);const m=u(p);if(!m)return c=null;const[y,v]=m;c!==y&&(a=setTimeout(()=>{i.preloadRoute(v,y.getAttribute("preload")!=="false"),c=y},20))}function g(p){if(p.defaultPrevented)return;let m=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!m)return;if(!m.startsWith("https://action/")){const v=new URL(m,AU);if(m=i.parsePath(v.pathname+v.search),!m.startsWith(t))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const y=bee.get(m);if(y){p.preventDefault();const v=new FormData(p.target,p.submitter);y.call({r:i,f:p.target},p.target.enctype==="multipart/form-data"?v:new URLSearchParams(v))}}At(["click","submit"]),document.addEventListener("click",f),r&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",g),mt(()=>{document.removeEventListener("click",f),r&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",g)})}}function wee(r){const e=r.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${e}`}return e}function xee(r){const e=()=>window.location.hash.slice(1),t=EU();return PU({get:e,set({value:n,replace:i,scroll:s,state:o}){i?window.history.replaceState(YQ(o),"","#"+n):window.history.pushState(o,"","#"+n);const a=n.indexOf("#"),c=a>=0?n.slice(a+1):"";$U(c,s),QT()},init:n=>vee(window,"hashchange",JQ(n,i=>!t.confirm(i&&i<0?i:e()))),create:DU(r.preload,r.explicitLinks,r.actionBase),utils:{go:n=>window.history.go(n),renderPath:n=>`#${n}`,parsePath:wee,beforeLeave:t}})(r)}function _ee(){const r=["/"];let e=0;const t=[],n=i=>{e=Math.max(0,Math.min(e+i,r.length-1));const s=r[e];t.forEach(o=>o(s))};return{get:()=>r[e],set:({value:i,scroll:s,replace:o})=>{o?r[e]=i:(r.splice(e+1,r.length-e,i),e++),t.forEach(a=>a(i)),setTimeout(()=>{s&&$U(i.split("#")[1]||"",!0)},0)},back:()=>{n(-1)},forward:()=>{n(1)},go:n,listen:i=>(t.push(i),()=>{const s=t.indexOf(i);t.splice(s,1)})}}function See(r){const e=r.history||_ee();return PU({get:e.get,set:e.set,init:e.listen,create:DU(r.preload,r.explicitLinks,r.actionBase),utils:{go:e.go}})(r)}var Eee=le("<a>");function Aee(r){r=at({inactiveClass:"inactive",activeClass:"active"},r);const[,e]=Lt(r,["href","state","class","activeClass","inactiveClass","end"]),t=oee(()=>r.href),n=aee(t),i=ld(),s=Te(()=>{const o=t();if(o===void 0)return[!1,!1];const a=Of(o.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(Of(i.pathname).toLowerCase());return[r.end?a===c:c.startsWith(a+"/")||c===a,a===c]});return(()=>{var o=Eee();return un(o,at(e,{get href(){return n()||r.href},get state(){return JSON.stringify(r.state)},get classList(){return{...r.class&&{[r.class]:!0},[r.inactiveClass]:!s()[0],[r.activeClass]:s()[0],...e.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),o})()}const hI=Symbol("store-raw"),xh=Symbol("store-node"),Wc=Symbol("store-has"),MU=Symbol("store-self");function BU(r){let e=r[Oa];if(!e&&(Object.defineProperty(r,Oa,{value:e=new Proxy(r,Tee)}),!Array.isArray(r))){const t=Object.keys(r),n=Object.getOwnPropertyDescriptors(r);for(let i=0,s=t.length;i<s;i++){const o=t[i];n[o].get&&Object.defineProperty(r,o,{enumerable:n[o].enumerable,get:n[o].get.bind(e)})}}return e}function Ru(r){let e;return r!=null&&typeof r=="object"&&(r[Oa]||!(e=Object.getPrototypeOf(r))||e===Object.prototype||Array.isArray(r))}function jf(r,e=new Set){let t,n,i,s;if(t=r!=null&&r[hI])return t;if(!Ru(r)||e.has(r))return r;if(Array.isArray(r)){Object.isFrozen(r)?r=r.slice(0):e.add(r);for(let o=0,a=r.length;o<a;o++)i=r[o],(n=jf(i,e))!==i&&(r[o]=n)}else{Object.isFrozen(r)?r=Object.assign({},r):e.add(r);const o=Object.keys(r),a=Object.getOwnPropertyDescriptors(r);for(let c=0,l=o.length;c<l;c++)s=o[c],!a[s].get&&(i=r[s],(n=jf(i,e))!==i&&(r[s]=n))}return r}function Xv(r,e){let t=r[e];return t||Object.defineProperty(r,e,{value:t=Object.create(null)}),t}function kg(r,e,t){if(r[e])return r[e];const[n,i]=Pe(t,{equals:!1,internal:!0});return n.$=i,r[e]=n}function Iee(r,e){const t=Reflect.getOwnPropertyDescriptor(r,e);return!t||t.get||!t.configurable||e===Oa||e===xh||(delete t.value,delete t.writable,t.get=()=>r[Oa][e]),t}function NU(r){Kv()&&kg(Xv(r,xh),MU)()}function Cee(r){return NU(r),Reflect.ownKeys(r)}const Tee={get(r,e,t){if(e===hI)return r;if(e===Oa)return t;if(e===qv)return NU(r),t;const n=Xv(r,xh),i=n[e];let s=i?i():r[e];if(e===xh||e===Wc||e==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(r,e);Kv()&&(typeof s!="function"||r.hasOwnProperty(e))&&!(o&&o.get)&&(s=kg(n,e,s)())}return Ru(s)?BU(s):s},has(r,e){return e===hI||e===Oa||e===qv||e===xh||e===Wc||e==="__proto__"?!0:(Kv()&&kg(Xv(r,Wc),e)(),e in r)},set(){return!0},deleteProperty(){return!0},ownKeys:Cee,getOwnPropertyDescriptor:Iee};function ta(r,e,t,n=!1){if(!n&&r[e]===t)return;const i=r[e],s=r.length;t===void 0?(delete r[e],r[Wc]&&r[Wc][e]&&i!==void 0&&r[Wc][e].$()):(r[e]=t,r[Wc]&&r[Wc][e]&&i===void 0&&r[Wc][e].$());let o=Xv(r,xh),a;if((a=kg(o,e,i))&&a.$(()=>t),Array.isArray(r)&&r.length!==s){for(let c=r.length;c<s;c++)(a=o[c])&&a.$();(a=kg(o,"length",s))&&a.$(r.length)}(a=o[MU])&&a.$()}function LU(r,e){const t=Object.keys(e);for(let n=0;n<t.length;n+=1){const i=t[n];ta(r,i,e[i])}}function Ree(r,e){if(typeof e=="function"&&(e=e(r)),e=jf(e),Array.isArray(e)){if(r===e)return;let t=0,n=e.length;for(;t<n;t++){const i=e[t];r[t]!==i&&ta(r,t,i)}ta(r,"length",n)}else LU(r,e)}function L0(r,e,t=[]){let n,i=r;if(e.length>1){n=e.shift();const o=typeof n,a=Array.isArray(r);if(Array.isArray(n)){for(let c=0;c<n.length;c++)L0(r,[n[c]].concat(e),t);return}else if(a&&o==="function"){for(let c=0;c<r.length;c++)n(r[c],c)&&L0(r,[c].concat(e),t);return}else if(a&&o==="object"){const{from:c=0,to:l=r.length-1,by:u=1}=n;for(let f=c;f<=l;f+=u)L0(r,[f].concat(e),t);return}else if(e.length>1){L0(r[n],e,[n].concat(t));return}i=r[n],t=[n].concat(t)}let s=e[0];typeof s=="function"&&(s=s(i,t),s===i)||n===void 0&&s==null||(s=jf(s),n===void 0||Ru(i)&&Ru(s)&&!Array.isArray(s)?LU(i,s):ta(r,n,s))}function ud(...[r,e]){const t=jf(r||{}),n=Array.isArray(t),i=BU(t);function s(...o){In(()=>{n&&o.length===1?Ree(t,o[0]):L0(t,o)})}return[i,s]}const pI=Symbol("store-root");function nh(r,e,t,n,i){const s=e[t];if(r===s)return;const o=Array.isArray(r);if(t!==pI&&(!Ru(r)||!Ru(s)||o!==Array.isArray(s)||i&&r[i]!==s[i])){ta(e,t,r);return}if(o){if(r.length&&s.length&&(!n||i&&r[0]&&r[0][i]!=null)){let l,u,f,d,h,g,p,m;for(f=0,d=Math.min(s.length,r.length);f<d&&(s[f]===r[f]||i&&s[f]&&r[f]&&s[f][i]===r[f][i]);f++)nh(r[f],s,f,n,i);const y=new Array(r.length),v=new Map;for(d=s.length-1,h=r.length-1;d>=f&&h>=f&&(s[d]===r[h]||i&&s[d]&&r[h]&&s[d][i]===r[h][i]);d--,h--)y[h]=s[d];if(f>h||f>d){for(u=f;u<=h;u++)ta(s,u,r[u]);for(;u<r.length;u++)ta(s,u,y[u]),nh(r[u],s,u,n,i);s.length>r.length&&ta(s,"length",r.length);return}for(p=new Array(h+1),u=h;u>=f;u--)g=r[u],m=i&&g?g[i]:g,l=v.get(m),p[u]=l===void 0?-1:l,v.set(m,u);for(l=f;l<=d;l++)g=s[l],m=i&&g?g[i]:g,u=v.get(m),u!==void 0&&u!==-1&&(y[u]=s[l],u=p[u],v.set(m,u));for(u=f;u<r.length;u++)u in y?(ta(s,u,y[u]),nh(r[u],s,u,n,i)):ta(s,u,r[u])}else for(let l=0,u=r.length;l<u;l++)nh(r[l],s,l,n,i);s.length>r.length&&ta(s,"length",r.length);return}const a=Object.keys(r);for(let l=0,u=a.length;l<u;l++)nh(r[a[l]],s,a[l],n,i);const c=Object.keys(s);for(let l=0,u=c.length;l<u;l++)r[c[l]]===void 0&&ta(s,c[l],void 0)}function gI(r,e={}){const{merge:t,key:n="id"}=e,i=jf(r);return s=>{if(!Ru(s)||!Ru(i))return i;const o=nh(i,{[pI]:s},pI,t,n);return o===void 0?s:o}}var ym=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jh=typeof window>"u"||"Deno"in globalThis;function Gs(){}function kee(r,e){return typeof r=="function"?r(e):r}function mI(r){return typeof r=="number"&&r>=0&&r!==1/0}function FU(r,e){return Math.max(r+(e||0)-Date.now(),0)}function vu(r,e){return typeof r=="function"?r(e):r}function ba(r,e){return typeof r=="function"?r(e):r}function Jk(r,e){const{type:t="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=r;if(o){if(n){if(e.queryHash!==tR(o,e.options))return!1}else if(!Pg(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function Xk(r,e){const{exact:t,status:n,predicate:i,mutationKey:s}=r;if(s){if(!e.options.mutationKey)return!1;if(t){if(Og(e.options.mutationKey)!==Og(s))return!1}else if(!Pg(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function tR(r,e){return(e?.queryKeyHashFn||Og)(r)}function Og(r){return JSON.stringify(r,(e,t)=>vI(t)?Object.keys(t).sort().reduce((n,i)=>(n[i]=t[i],n),{}):t)}function Pg(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Pg(r[t],e[t])):!1}function UU(r,e){if(r===e)return r;const t=Zk(r)&&Zk(e);if(t||vI(r)&&vI(e)){const n=t?r:Object.keys(r),i=n.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{},c=new Set(n);let l=0;for(let u=0;u<o;u++){const f=t?u:s[u];(!t&&c.has(f)||t)&&r[f]===void 0&&e[f]===void 0?(a[f]=void 0,l++):(a[f]=UU(r[f],e[f]),a[f]===r[f]&&r[f]!==void 0&&l++)}return i===o&&l===i?r:a}return e}function yI(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function Zk(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function vI(r){if(!Qk(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Qk(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function Qk(r){return Object.prototype.toString.call(r)==="[object Object]"}function Oee(r){return new Promise(e=>{setTimeout(e,r)})}function bI(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?UU(r,e):e}function Pee(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function $ee(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var rR=Symbol();function zU(r,e){return!r.queryFn&&e?.initialPromise?()=>e.initialPromise:!r.queryFn||r.queryFn===rR?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Dee(r,e){return typeof r=="function"?r(...e):!!r}var Mee=class extends ym{#e;#t;#r;constructor(){super(),this.#r=r=>{if(!jh&&window.addEventListener){const e=()=>r();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(r){this.#e!==r&&(this.#e=r,this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(e=>{e(r)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},nR=new Mee,Bee=class extends ym{#e=!0;#t;#r;constructor(){super(),this.#r=r=>{if(!jh&&window.addEventListener){const e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(r){this.#r=r,this.#t?.(),this.#t=r(this.setOnline.bind(this))}setOnline(r){this.#e!==r&&(this.#e=r,this.listeners.forEach(t=>{t(r)}))}isOnline(){return this.#e}},Zv=new Bee;function wI(){let r,e;const t=new Promise((i,s)=>{r=i,e=s});t.status="pending",t.catch(()=>{});function n(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{n({status:"fulfilled",value:i}),r(i)},t.reject=i=>{n({status:"rejected",reason:i}),e(i)},t}function Nee(r){let e;if(r.then(t=>(e=t,t),Gs)?.catch(Gs),e!==void 0)return{data:e}}function Lee(r){return Math.min(1e3*2**r,3e4)}function qU(r){return(r??"online")==="online"?Zv.isOnline():!0}var jU=class extends Error{constructor(r){super("CancelledError"),this.revert=r?.revert,this.silent=r?.silent}};function sx(r){return r instanceof jU}function VU(r){let e=!1,t=0,n=!1,i;const s=wI(),o=p=>{n||(d(new jU(p)),r.abort?.())},a=()=>{e=!0},c=()=>{e=!1},l=()=>nR.isFocused()&&(r.networkMode==="always"||Zv.isOnline())&&r.canRun(),u=()=>qU(r.networkMode)&&r.canRun(),f=p=>{n||(n=!0,r.onSuccess?.(p),i?.(),s.resolve(p))},d=p=>{n||(n=!0,r.onError?.(p),i?.(),s.reject(p))},h=()=>new Promise(p=>{i=m=>{(n||l())&&p(m)},r.onPause?.()}).then(()=>{i=void 0,n||r.onContinue?.()}),g=()=>{if(n)return;let p;const m=t===0?r.initialPromise:void 0;try{p=m??r.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(f).catch(y=>{if(n)return;const v=r.retry??(jh?0:3),w=r.retryDelay??Lee,_=typeof w=="function"?w(t,y):w,x=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,y);if(e||!x){d(y);return}t++,r.onFail?.(t,y),Oee(_).then(()=>l()?void 0:h()).then(()=>{e?d(y):g()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?g():h().then(g),s)}}var Fee=r=>setTimeout(r,0);function Uee(){let r=[],e=0,t=a=>{a()},n=a=>{a()},i=Fee;const s=a=>{e?r.push(a):i(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&i(()=>{n(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{s(()=>{a(...c)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var ps=Uee(),KU=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mI(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(jh?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},zee=class extends KU{#e;#t;#r;#n;#i;#o;#a;constructor(r){super(),this.#a=!1,this.#o=r.defaultOptions,this.setOptions(r.options),this.observers=[],this.#n=r.client,this.#r=this.#n.getQueryCache(),this.queryKey=r.queryKey,this.queryHash=r.queryHash,this.#e=qee(this.options),this.state=r.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(r){this.options={...this.#o,...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(r,e){const t=bI(this.state.data,r,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(r,e){this.#s({type:"setState",state:r,setStateOptions:e})}cancel(r){const e=this.#i?.promise;return this.#i?.cancel(r),e?e.then(Gs).catch(Gs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(r=>ba(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>vu(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!FU(this.state.dataUpdatedAt,r)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(e=>e!==r),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(r,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(r&&this.setOptions(r),!this.options.queryFn){const c=this.observers.find(l=>l.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},i=()=>{const c=zU(this.options,e),u=(()=>{const f={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(f),f})();return this.#a=!1,this.options.persister?this.options.persister(c,u,this):c(u)},o=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const a=c=>{sx(c)&&c.silent||this.#s({type:"error",error:c}),sx(c)||(this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#i=VU({initialPromise:e?.initialPromise,fn:o.fetchFn,abort:t.abort.bind(t),onSuccess:c=>{if(c===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(l){a(l);return}this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:a,onFail:(c,l)=>{this.#s({type:"failed",failureCount:c,error:l})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#i.start()}#s(r){const e=t=>{switch(r.type){case"failed":return{...t,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...HU(t.data,this.options),fetchMeta:r.meta??null};case"success":return this.#t=void 0,{...t,data:r.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=r.error;return sx(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...r.state}}};this.state=e(this.state),ps.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:r})})}};function HU(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qU(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function qee(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var jee=class extends ym{constructor(r={}){super(),this.config=r,this.#e=new Map}#e;build(r,e,t){const n=e.queryKey,i=e.queryHash??tR(n,e);let s=this.get(i);return s||(s=new zee({client:r,queryKey:n,queryHash:i,options:r.defaultQueryOptions(e),state:t,defaultOptions:r.getQueryDefaults(n)}),this.add(s)),s}add(r){this.#e.has(r.queryHash)||(this.#e.set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const e=this.#e.get(r.queryHash);e&&(r.destroy(),e===r&&this.#e.delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){ps.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return this.#e.get(r)}getAll(){return[...this.#e.values()]}find(r){const e={exact:!0,...r};return this.getAll().find(t=>Jk(e,t))}findAll(r={}){const e=this.getAll();return Object.keys(r).length>0?e.filter(t=>Jk(r,t)):e}notify(r){ps.batch(()=>{this.listeners.forEach(e=>{e(r)})})}onFocus(){ps.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){ps.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Vee=class extends KU{#e;#t;#r;constructor(r){super(),this.mutationId=r.mutationId,this.#t=r.mutationCache,this.#e=[],this.state=r.state||Kee(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){this.#e.includes(r)||(this.#e.push(r),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){this.#e=this.#e.filter(e=>e!==r),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(r){const e=()=>{this.#n({type:"continue"})};this.#r=VU({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(i,s)=>{this.#n({type:"failed",failureCount:i,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(t)e();else{this.#n({type:"pending",variables:r,isPaused:n}),await this.#t.config.onMutate?.(r,this);const s=await this.options.onMutate?.(r);s!==this.state.context&&this.#n({type:"pending",context:s,variables:r,isPaused:n})}const i=await this.#r.start();return await this.#t.config.onSuccess?.(i,r,this.state.context,this),await this.options.onSuccess?.(i,r,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,r,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,r,this.state.context,this),await this.options.onError?.(i,r,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,r,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#t.runNext(this)}}#n(r){const e=t=>{switch(r.type){case"failed":return{...t,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...t,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:r.error,failureCount:t.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=e(this.state),ps.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(r)}),this.#t.notify({mutation:this,type:"updated",action:r})})}};function Kee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hee=class extends ym{constructor(r={}){super(),this.config=r,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(r,e,t){const n=new Vee({mutationCache:this,mutationId:++this.#r,options:r.defaultMutationOptions(e),state:t});return this.add(n),n}add(r){this.#e.add(r);const e=ey(r);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(r):this.#t.set(e,[r])}this.notify({type:"added",mutation:r})}remove(r){if(this.#e.delete(r)){const e=ey(r);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const n=t.indexOf(r);n!==-1&&t.splice(n,1)}else t[0]===r&&this.#t.delete(e)}}this.notify({type:"removed",mutation:r})}canRun(r){const e=ey(r);if(typeof e=="string"){const n=this.#t.get(e)?.find(i=>i.state.status==="pending");return!n||n===r}else return!0}runNext(r){const e=ey(r);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==r&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ps.batch(()=>{this.#e.forEach(r=>{this.notify({type:"removed",mutation:r})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(r){const e={exact:!0,...r};return this.getAll().find(t=>Xk(e,t))}findAll(r={}){return this.getAll().filter(e=>Xk(r,e))}notify(r){ps.batch(()=>{this.listeners.forEach(e=>{e(r)})})}resumePausedMutations(){const r=this.getAll().filter(e=>e.state.isPaused);return ps.batch(()=>Promise.all(r.map(e=>e.continue().catch(Gs))))}};function ey(r){return r.options.scope?.id}function Qv(r){return{onFetch:(e,t)=>{const n=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const f=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},d=zU(e.options,e.fetchOptions),h=async(g,p,m)=>{if(u)return Promise.reject();if(p==null&&g.pages.length)return Promise.resolve(g);const v=(()=>{const E={client:e.client,queryKey:e.queryKey,pageParam:p,direction:m?"backward":"forward",meta:e.options.meta};return f(E),E})(),w=await d(v),{maxPages:_}=e.options,x=m?$ee:Pee;return{pages:x(g.pages,w,_),pageParams:x(g.pageParams,p,_)}};if(i&&s.length){const g=i==="backward",p=g?WU:xI,m={pages:s,pageParams:o},y=p(n,m);a=await h(m,y,g)}else{const g=r??s.length;do{const p=c===0?o[0]??n.initialPageParam:xI(n,a);if(c>0&&p==null)break;a=await h(a,p),c++}while(c<g)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=l}}}function xI(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function WU(r,{pages:e,pageParams:t}){return e.length>0?r.getPreviousPageParam?.(e[0],e,t[0],t):void 0}function Wee(r,e){return e?xI(r,e)!=null:!1}function Gee(r,e){return!e||!r.getPreviousPageParam?!1:WU(r,e)!=null}var Yee=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new jee,this.#t=e.mutationCache||new Hee,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=nR.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Zv.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),i=n.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(vu(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const i=n.data;return[t,i]})}setQueryData(e,t,n){const i=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(i.queryHash)?.state.data,a=kee(t,o);if(a!==void 0)return this.#e.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return ps.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;ps.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return ps.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},i=ps.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(i).then(Gs).catch(Gs)}invalidateQueries(e,t={}){return ps.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},i=ps.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Gs)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(Gs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(vu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Gs).catch(Gs)}fetchInfiniteQuery(e){return e.behavior=Qv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Gs).catch(Gs)}ensureInfiniteQueryData(e){return e.behavior=Qv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Zv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Og(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],n={};return t.forEach(i=>{Pg(e,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(e,t){this.#i.set(Og(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],n={};return t.forEach(i=>{Pg(e,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=tR(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===rR&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},GU=class extends ym{constructor(r,e){super(),this.options=e,this.#e=r,this.#s=null,this.#a=wI(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#o;#a;#s;#u;#c;#f;#p;#g;#d;#y=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),e8(this.#t,this.options)?this.#l():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _I(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _I(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(r){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ba(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!yI(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&t8(this.#t,t,this.options,e)&&this.#l(),this.updateResult(),n&&(this.#t!==t||ba(this.options.enabled,this.#t)!==ba(e.enabled,this.#t)||vu(this.options.staleTime,this.#t)!==vu(e.staleTime,this.#t))&&this.#v();const i=this.#h();n&&(this.#t!==t||ba(this.options.enabled,this.#t)!==ba(e.enabled,this.#t)||i!==this.#d)&&this.#_(i)}getOptimisticResult(r){const e=this.#e.getQueryCache().build(this.#e,r),t=this.createResult(e,r);return Xee(this,t)&&(this.#n=t,this.#o=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#n}trackResult(r,e){return new Proxy(r,{get:(t,n)=>(this.trackProp(n),e?.(n),Reflect.get(t,n))})}trackProp(r){this.#y.add(r)}getCurrentQuery(){return this.#t}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const e=this.#e.defaultQueryOptions(r),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(r){return this.#l({...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#l(r){this.#S();let e=this.#t.fetch(this.options,r);return r?.throwOnError||(e=e.catch(Gs)),e}#v(){this.#w();const r=vu(this.options.staleTime,this.#t);if(jh||this.#n.isStale||!mI(r))return;const t=FU(this.#n.dataUpdatedAt,r)+1;this.#p=setTimeout(()=>{this.#n.isStale||this.updateResult()},t)}#h(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#_(r){this.#x(),this.#d=r,!(jh||ba(this.options.enabled,this.#t)===!1||!mI(this.#d)||this.#d===0)&&(this.#g=setInterval(()=>{(this.options.refetchIntervalInBackground||nR.isFocused())&&this.#l()},this.#d))}#b(){this.#v(),this.#_(this.#h())}#w(){this.#p&&(clearTimeout(this.#p),this.#p=void 0)}#x(){this.#g&&(clearInterval(this.#g),this.#g=void 0)}createResult(r,e){const t=this.#t,n=this.options,i=this.#n,s=this.#i,o=this.#o,c=r!==t?r.state:this.#r,{state:l}=r;let u={...l},f=!1,d;if(e._optimisticResults){const T=this.hasListeners(),C=!T&&e8(r,e),P=T&&t8(r,t,e,n);(C||P)&&(u={...u,...HU(l.data,r.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:p}=u;d=u.data;let m=!1;if(e.placeholderData!==void 0&&d===void 0&&p==="pending"){let T;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(T=i.data,m=!0):T=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,T!==void 0&&(p="success",d=bI(i?.data,T,e),f=!0)}if(e.select&&d!==void 0&&!m)if(i&&d===s?.data&&e.select===this.#u)d=this.#c;else try{this.#u=e.select,d=e.select(d),d=bI(i?.data,d,e),this.#c=d,this.#s=null}catch(T){this.#s=T}this.#s&&(h=this.#s,d=this.#c,g=Date.now(),p="error");const y=u.fetchStatus==="fetching",v=p==="pending",w=p==="error",_=v&&y,x=d!==void 0,S={status:p,fetchStatus:u.fetchStatus,isPending:v,isSuccess:p==="success",isError:w,isInitialLoading:_,isLoading:_,data:d,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:w&&!x,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&x,isStale:iR(r,e),refetch:this.refetch,promise:this.#a};if(this.options.experimental_prefetchInRender){const T=V=>{S.status==="error"?V.reject(S.error):S.data!==void 0&&V.resolve(S.data)},C=()=>{const V=this.#a=S.promise=wI();T(V)},P=this.#a;switch(P.status){case"pending":r.queryHash===t.queryHash&&T(P);break;case"fulfilled":(S.status==="error"||S.data!==P.value)&&C();break;case"rejected":(S.status!=="error"||S.error!==P.reason)&&C();break}}return S}updateResult(){const r=this.#n,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#f=this.#t),yI(e,r))return;this.#n=e;const t=()=>{if(!r)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#y.size)return!0;const s=new Set(i??this.#y);return this.options.throwOnError&&s.add("error"),Object.keys(this.#n).some(o=>{const a=o;return this.#n[a]!==r[a]&&s.has(a)})};this.#m({listeners:t()})}#S(){const r=this.#e.getQueryCache().build(this.#e,this.options);if(r===this.#t)return;const e=this.#t;this.#t=r,this.#r=r.state,this.hasListeners()&&(e?.removeObserver(this),r.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#m(r){ps.batch(()=>{r.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Jee(r,e){return ba(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function e8(r,e){return Jee(r,e)||r.state.data!==void 0&&_I(r,e,e.refetchOnMount)}function _I(r,e,t){if(ba(e.enabled,r)!==!1&&vu(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&iR(r,e)}return!1}function t8(r,e,t,n){return(r!==e||ba(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&iR(r,t)}function iR(r,e){return ba(e.enabled,r)!==!1&&r.isStaleByTime(vu(e.staleTime,r))}function Xee(r,e){return!yI(r.getCurrentResult(),e)}var Zee=class extends GU{constructor(r,e){super(r,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(r){super.setOptions({...r,behavior:Qv()})}getOptimisticResult(r){return r.behavior=Qv(),super.getOptimisticResult(r)}fetchNextPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(r){return this.fetch({...r,meta:{fetchMore:{direction:"backward"}}})}createResult(r,e){const{state:t}=r,n=super.createResult(r,e),{isFetching:i,isRefetching:s,isError:o,isRefetchError:a}=n,c=t.fetchMeta?.fetchMore?.direction,l=o&&c==="forward",u=i&&c==="forward",f=o&&c==="backward",d=i&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Wee(e,t.data),hasPreviousPage:Gee(e,t.data),isFetchNextPageError:l,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:d,isRefetchError:a&&!l&&!f,isRefetching:s&&!u&&!d}}};function Qee(r){return r}function ete(r,e,t){if(typeof e!="object"||e===null)return;const n=r.getMutationCache(),i=r.getQueryCache(),s=r.getDefaultOptions().hydrate?.deserializeData??Qee,o=e.mutations||[],a=e.queries||[];o.forEach(({state:c,...l})=>{n.build(r,{...r.getDefaultOptions().hydrate?.mutations,...t?.defaultOptions?.mutations,...l},c)}),a.forEach(({queryKey:c,state:l,queryHash:u,meta:f,promise:d,dehydratedAt:h})=>{const g=d?Nee(d):void 0,p=l.data===void 0?g?.data:l.data,m=p===void 0?p:s(p);let y=i.get(u);const v=y?.state.status==="pending",w=y?.state.fetchStatus==="fetching";if(y){const _=g&&h!==void 0&&h>y.state.dataUpdatedAt;if(l.dataUpdatedAt>y.state.dataUpdatedAt||_){const{fetchStatus:x,...E}=l;y.setState({...E,data:m})}}else y=i.build(r,{...r.getDefaultOptions().hydrate?.queries,...t?.defaultOptions?.queries,queryKey:c,queryHash:u,meta:f},{...l,data:m,fetchStatus:"idle",status:m!==void 0?"success":l.status});d&&!v&&!w&&(h===void 0||h>y.state.dataUpdatedAt)&&y.fetch(void 0,{initialPromise:Promise.resolve(d).then(s)})})}var YU=fn(void 0),tte=r=>{if(r)return r;const e=rn(YU);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e()},rte=r=>(Ge(e=>(e?.(),r.client.mount(),r.client.unmount.bind(r.client))),mt(()=>r.client.unmount()),A(YU.Provider,{value:()=>r.client,get children(){return r.children}})),JU=fn(()=>!1),nte=()=>rn(JU);JU.Provider;function ite(r,e,t,n){if(t===!1)return e;if(typeof t=="function"){const o=t(r.data,e.data);return{...e,data:o}}let i=e.data;if(r.data===void 0)try{i=structuredClone(i)}catch{}const s=gI(i,{key:t})(r.data);return{...e,data:s}}var ste=(r,e)=>e;function XU(r,e,t){const n=Te(()=>tte(t?.())),i=nte(),s=Te(()=>{const _=n().defaultQueryOptions(r());return _._optimisticResults=i()?"isRestoring":"optimistic",_.structuralSharing=!1,_}),o=s(),[a,c]=Pe(new e(n(),s()));let l=a().getOptimisticResult(s());const[u,f]=ud(l),d=()=>a().subscribe(x=>{l=x,queueMicrotask(()=>{p&&v()})});function h(_){const x=a().options,E=x.reconcile;f(S=>ite(S,_,E===void 0?!1:E,x.queryHash))}function g(){return[()=>u,_=>{const x=jf(u);if(typeof _=="function"&&(_=_(x)),_?.hydrationData){const{hydrationData:E,...S}=_;_=S}h(_)}]}let p=null,m=null;const[y,{refetch:v}]=KT(()=>{const _=a();return new Promise((x,E)=>{if(m=x,!p&&!i()&&(p=d()),_.updateResult(),l.isError&&!l.isFetching&&!i()&&Dee(_.options.throwOnError,[l.error,_.getCurrentQuery()]))return h(l),E(l.error);if(!l.isLoading)return m=null,x(ste(_.getCurrentQuery(),l));h(l)})},{storage:g,get deferStream(){return r().deferStream},onHydrated(_,x){if(x.value&&"hydrationData"in x.value&&ete(n(),{queries:[{...x.value.hydrationData}]}),p)return;const E={...o};(o.staleTime||!o.initialData)&&x.value&&(E.refetchOnMount=!1),a().setOptions(E),h(a().getOptimisticResult(E)),p=d()}});ng(Pn(n,_=>{p&&p();const x=new e(_,s());p=d(),c(x)},{defer:!0})),ng(Pn(i,_=>{_||v()},{defer:!0})),mt(()=>{p&&(p(),p=null),m&&(m(l),m=null)}),ng(Pn([a,s],([_,x])=>{_.setOptions(x),h(_.getOptimisticResult(x)),v()},{defer:!0}));const w={get(_,x){return x==="data"?u.data!==void 0?y.latest?.data:y()?.data:Reflect.get(_,x)}};return new Proxy(u,w)}function hi(r,e){return XU(Te(()=>r()),GU,e)}function ZU(r,e){return XU(Te(()=>r()),Zee,e)}var ote=class extends Yee{constructor(r={}){super(r)}};const ate=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,yi=ate,cte=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(r=>[r.name,r]),lte=new Map(cte);class sR extends Error{name="NonError";constructor(e){super(sR._prepareSuperMessage(e))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const ute=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],SI=new WeakSet,fte=r=>{SI.add(r);const e=r.toJSON();return SI.delete(r),e},QU=r=>lte.get(r)??Error,oR=({from:r,seen:e,to:t,forceEnumerable:n,maxDepth:i,depth:s,useToJSON:o,serialize:a})=>{if(!t)if(Array.isArray(r))t=[];else if(!a&&r8(r)){const l=QU(r.name);t=new l}else t={};if(e.push(r),s>=i)return t;if(o&&typeof r.toJSON=="function"&&!SI.has(r))return fte(r);const c=l=>oR({from:l,seen:[...e],forceEnumerable:n,maxDepth:i,depth:s,useToJSON:o,serialize:a});for(const[l,u]of Object.entries(r)){if(u&&u instanceof Uint8Array&&u.constructor.name==="Buffer"){t[l]="[object Buffer]";continue}if(u!==null&&typeof u=="object"&&typeof u.pipe=="function"){t[l]="[object Stream]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){try{t[l]=u}catch{}continue}if(!e.includes(r[l])){s++,t[l]=c(r[l]);continue}t[l]="[Circular]"}}for(const{property:l,enumerable:u}of ute)typeof r[l]<"u"&&r[l]!==null&&Object.defineProperty(t,l,{value:r8(r[l])?c(r[l]):r[l],enumerable:n?!0:u,configurable:!0,writable:!0});return t};function dte(r,e={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:n=!0}=e;return typeof r=="object"&&r!==null?oR({from:r,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:n,serialize:!0}):typeof r=="function"?`[Function: ${r.name||"anonymous"}]`:r}function hte(r,e={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=e;if(r instanceof Error)return r;if(pte(r)){const n=QU(r.name);return oR({from:r,seen:[],to:new n,maxDepth:t,depth:0,serialize:!1})}return new sR(r)}function r8(r){return!!r&&typeof r=="object"&&"name"in r&&"message"in r&&"stack"in r}function pte(r){return!!r&&typeof r=="object"&&"message"in r&&!Array.isArray(r)}var gte=Object.defineProperty,mte=Object.defineProperties,yte=Object.getOwnPropertyDescriptors,n8=Object.getOwnPropertySymbols,vte=Object.prototype.hasOwnProperty,bte=Object.prototype.propertyIsEnumerable,i8=(r,e,t)=>e in r?gte(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,s8=(r,e)=>{for(var t in e||(e={}))vte.call(e,t)&&i8(r,t,e[t]);if(n8)for(var t of n8(e))bte.call(e,t)&&i8(r,t,e[t]);return r},o8=(r,e)=>mte(r,yte(e)),wte=(r,e,t)=>new Promise((n,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(r,e)).next())});function xte(r){let e,t={};function n(){Object.entries(t).length===0&&(e?.(),e=void 0)}let i=Math.floor(Math.random()*1e4);function s(){return i++}return{sendMessage(o,a,...c){return wte(this,null,function*(){var l,u,f,d;const h={id:s(),type:o,data:a,timestamp:Date.now()},g=(u=yield(l=r.verifyMessageData)==null?void 0:l.call(r,h))!=null?u:h;(f=r.logger)==null||f.debug(`[messaging] sendMessage {id=${g.id}} `,g,...c);const p=yield r.sendMessage(g,...c),{res:m,err:y}=p??{err:new Error("No response")};if((d=r.logger)==null||d.debug(`[messaging] sendMessage {id=${g.id}} `,{res:m,err:y}),y!=null)throw hte(y);return m})},onMessage(o,a){var c,l,u;if(e==null&&((c=r.logger)==null||c.debug(`[messaging] "${o}" initialized the message listener for this context`),e=r.addRootListener(f=>{var d,h;if(typeof f.type!="string"||typeof f.timestamp!="number"){if(r.breakError)return;const m=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(f)}`);throw(d=r.logger)==null||d.error(m),m}(h=r?.logger)==null||h.debug("[messaging] Received message",f);const g=t[f.type];if(g==null)return;const p=g(f);return Promise.resolve(p).then(m=>{var y,v;return(v=(y=r.verifyMessageData)==null?void 0:y.call(r,m))!=null?v:m}).then(m=>{var y;return(y=r?.logger)==null||y.debug(`[messaging] onMessage {id=${f.id}} `,{res:m}),{res:m}}).catch(m=>{var y;return(y=r?.logger)==null||y.debug(`[messaging] onMessage {id=${f.id}} `,{err:m}),{err:dte(m)}})})),t[o]!=null){const f=Error(`[messaging] In this JS context, only one listener can be setup for ${o}`);throw(l=r.logger)==null||l.error(f),f}return t[o]=a,(u=r.logger)==null||u.log(`[messaging] Added listener for ${o}`),()=>{delete t[o],n()}},removeAllListeners(){Object.keys(t).forEach(o=>{delete t[o]}),n()}}}var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function gp(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var pv={exports:{}},_te=pv.exports,a8;function Ste(){return a8||(a8=1,function(r,e){(function(t,n){n(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:_te,function(t){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",i=s=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(S,T=void 0){super(T),this.createItem=S}get(S){return this.has(S)||this.set(S,this.createItem(S)),super.get(S)}}const c=E=>E&&typeof E=="object"&&typeof E.then=="function",l=(E,S)=>(...T)=>{s.runtime.lastError?E.reject(new Error(s.runtime.lastError.message)):S.singleCallbackArg||T.length<=1&&S.singleCallbackArg!==!1?E.resolve(T[0]):E.resolve(T)},u=E=>E==1?"argument":"arguments",f=(E,S)=>function(C,...P){if(P.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${u(S.minArgs)} for ${E}(), got ${P.length}`);if(P.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${u(S.maxArgs)} for ${E}(), got ${P.length}`);return new Promise((V,L)=>{if(S.fallbackToNoCallback)try{C[E](...P,l({resolve:V,reject:L},S))}catch(D){console.warn(`${E} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,D),C[E](...P),S.fallbackToNoCallback=!1,S.noCallback=!0,V()}else S.noCallback?(C[E](...P),V()):C[E](...P,l({resolve:V,reject:L},S))})},d=(E,S,T)=>new Proxy(S,{apply(C,P,V){return T.call(P,E,...V)}});let h=Function.call.bind(Object.prototype.hasOwnProperty);const g=(E,S={},T={})=>{let C=Object.create(null),P={has(L,D){return D in E||D in C},get(L,D,b){if(D in C)return C[D];if(!(D in E))return;let I=E[D];if(typeof I=="function")if(typeof S[D]=="function")I=d(E,E[D],S[D]);else if(h(T,D)){let B=f(D,T[D]);I=d(E,E[D],B)}else I=I.bind(E);else if(typeof I=="object"&&I!==null&&(h(S,D)||h(T,D)))I=g(I,S[D],T[D]);else if(h(T,"*"))I=g(I,S[D],T["*"]);else return Object.defineProperty(C,D,{configurable:!0,enumerable:!0,get(){return E[D]},set(B){E[D]=B}}),I;return C[D]=I,I},set(L,D,b,I){return D in C?C[D]=b:E[D]=b,!0},defineProperty(L,D,b){return Reflect.defineProperty(C,D,b)},deleteProperty(L,D){return Reflect.deleteProperty(C,D)}},V=Object.create(E);return new Proxy(V,P)},p=E=>({addListener(S,T,...C){S.addListener(E.get(T),...C)},hasListener(S,T){return S.hasListener(E.get(T))},removeListener(S,T){S.removeListener(E.get(T))}}),m=new a(E=>typeof E!="function"?E:function(T){const C=g(T,{},{getContent:{minArgs:0,maxArgs:0}});E(C)}),y=new a(E=>typeof E!="function"?E:function(T,C,P){let V=!1,L,D=new Promise(F=>{L=function(z){V=!0,F(z)}}),b;try{b=E(T,C,L)}catch(F){b=Promise.reject(F)}const I=b!==!0&&c(b);if(b!==!0&&!I&&!V)return!1;const B=F=>{F.then(z=>{P(z)},z=>{let G;z&&(z instanceof Error||typeof z.message=="string")?G=z.message:G="An unexpected error occurred",P({__mozWebExtensionPolyfillReject__:!0,message:G})}).catch(z=>{console.error("Failed to send onMessage rejected reply",z)})};return B(I?b:D),!0}),v=({reject:E,resolve:S},T)=>{s.runtime.lastError?s.runtime.lastError.message===n?S():E(new Error(s.runtime.lastError.message)):T&&T.__mozWebExtensionPolyfillReject__?E(new Error(T.message)):S(T)},w=(E,S,T,...C)=>{if(C.length<S.minArgs)throw new Error(`Expected at least ${S.minArgs} ${u(S.minArgs)} for ${E}(), got ${C.length}`);if(C.length>S.maxArgs)throw new Error(`Expected at most ${S.maxArgs} ${u(S.maxArgs)} for ${E}(), got ${C.length}`);return new Promise((P,V)=>{const L=v.bind(null,{resolve:P,reject:V});C.push(L),T.sendMessage(...C)})},_={devtools:{network:{onRequestFinished:p(m)}},runtime:{onMessage:p(y),onMessageExternal:p(y),sendMessage:w.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:w.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},g(s,_,o)};t.exports=i(chrome)}else t.exports=globalThis.browser})}(pv)),pv.exports}var Ete=Ste();const ty=zs(Ete);function Ate(r){return xte(o8(s8({},r),{sendMessage(e,t){if(t==null)return ty.runtime.sendMessage(e);const n=typeof t=="number"?{tabId:t}:t;return ty.tabs.sendMessage(n.tabId,e,n.frameId!=null?{frameId:n.frameId}:void 0)},addRootListener(e){const t=(n,i)=>e(typeof n=="object"?o8(s8({},n),{sender:i}):n);return ty.runtime.onMessage.addListener(t),()=>ty.runtime.onMessage.removeListener(t)}}))}const Nr=Ate(),Co={POPUP:"popup",SIDE_PANEL:"sidepanel",WINDOW:"window"},pc=yi.extension.getViews({type:"popup"}).some(r=>r===window)?Co.POPUP:document.getElementById("__SIDE_PANEL_CONTEXT__DO_NOT_REMOVE__")!==null?Co.SIDE_PANEL:Co.WINDOW,Qe={ROOT:"/",ONBOARD:"/onboard",HOME:"/home",SEARCH:"/search",SETTINGS:"/settings",SETTINGS_AUTO_APPROVE:"/settings/auto-approve",SETTINGS_CONNECTED_APPS:"/settings/connected-apps",SETTINGS_AUTO_LOCK:"/settings/auto-lock",SETTINGS_CHANGE_PASSWORD:"/settings/change-password",SETTINGS_BLOCK_EXPLORER:"/settings/block-explorer",SETTINGS_PHANTOM_COMPAT:"/settings/phantom-compat",SETTINGS_SKIP_REVIEW:"/settings/skip-review",UNLOCK:"/unlock",APPROVE_CONNECT:"/approve/connect",APPROVE_TRANSACTION:"/approve/transaction",APPROVE_MESSAGE:"/approve/message",APPROVE_SEND:"/approve/send",RECEIVE:"/receive",SEND:"/send",SWAP:"/swap",ACCOUNTS:"/accounts",ACCOUNTS_RENAME:(r=":address")=>`/accounts/${r}/rename`,ACCOUNTS_KEY:(r=":address")=>`/accounts/${r}/key`,ASSETS:(r=":address")=>`/assets/${r}`,PNL:"/pnl",ADDRESS_BOOK:"/address-book",ADDRESS_BOOK_SAVE:"/address-book/save",TOKEN_RECLAIM:"/reclaim"};class qt{static#e=null;static#t=null;static assertIsInternal(e){if(!e||e.id!==yi.runtime.id)throw new Error("unauthorized")}static async init(){(pc===Co.POPUP||pc===Co.SIDE_PANEL)&&(pc!==Co.POPUP&&yi.runtime.connect({name:"panel"}),Nr.onMessage("navigateToApproval",({data:t,sender:n})=>{this.assertIsInternal(n);const i=`${t.path}?id=${t.requestId}&origin=${t.origin}`;return this.#e?this.#e(i):this.#t=i,{}}),Nr.onMessage("approvalCompleted",({sender:t})=>(this.assertIsInternal(t),this.#e?this.#e(Qe.HOME):this.#t=Qe.HOME,{})))}static getWalletState(e={}){return Nr.sendMessage("getWalletState",e)}static import(e){return Nr.sendMessage("import",e)}static export(e){return Nr.sendMessage("export",e)}static lock(e={}){return Nr.sendMessage("lock",e)}static unlock(e){return Nr.sendMessage("unlock",e)}static connect(e){return Nr.sendMessage("connect",e)}static disconnect(e){return Nr.sendMessage("disconnect",e)}static signTransactions(e){return Nr.sendMessage("signTransactions",e)}static signMessages(e){return Nr.sendMessage("signMessages",e)}static getAccounts(e={}){return Nr.sendMessage("getAccounts",e)}static async approve(e){return Nr.sendMessage("approve",e)}static async getPendingTransaction(e){return Nr.sendMessage("getPendingTransaction",e)}static getPendingMessage(e){return Nr.sendMessage("getPendingMessage",e)}static updateUserSettings(e){return Nr.sendMessage("updateUserSettings",e)}static getUserSettings(e={}){return Nr.sendMessage("getUserSettings",e)}static getPopupCache(e){return Nr.sendMessage("getPopupCache",e)}static setPopupCache(e){return Nr.sendMessage("setPopupCache",e)}static getConnectedApps(e){return Nr.sendMessage("getConnectedApps",e)}static removeConnectedApps(e){return Nr.sendMessage("removeConnectedApps",e)}static recordMetric(e){return Nr.sendMessage("recordMetric",e)}static trezorGetAddresses(e){return Nr.sendMessage("trezor:getAddresses",e)}static trezorSignTransaction(e){return Nr.sendMessage("trezor:signTransaction",e)}static resetLockAlarm(e){return Nr.sendMessage("resetLockAlarm",e)}static updatePassword(e){return Nr.sendMessage("updatePassword",e)}static factoryReset(e){return Nr.sendMessage("factoryReset",e)}static listSavedContacts(e={}){return Nr.sendMessage("listSavedContacts",e)}static upsertSavedContact(e){return Nr.sendMessage("upsertSavedContact",e)}static deleteSavedContact(e){return Nr.sendMessage("deleteSavedContact",e)}static reorderSavedContacts(e){return Nr.sendMessage("reorderSavedContacts",e)}static listRecentContacts(e={}){return Nr.sendMessage("listRecentContacts",e)}static upsertRecentContact(e){return Nr.sendMessage("upsertRecentContact",e)}static deleteRecentContact(e){return Nr.sendMessage("deleteRecentContact",e)}static listGlobalSearchHistory(e={}){return Nr.sendMessage("listGlobalSearchHistory",e)}static upsertGlobalSearchHistory(e){return Nr.sendMessage("upsertGlobalSearchHistory",e)}static resetGlobalSearchHistory(e={}){return Nr.sendMessage("resetGlobalSearchHistory",e)}static registerNavigate(e){this.#e=e,this.#t&&(e(this.#t),this.#t=null)}static unregisterNavigate(){this.#e=null}}const[Ite,Cte]=El(()=>{const r=ld(),e=i=>{qt.recordMetric({type:"error",payload:i instanceof Error?{stack:i.stack}:i})},t=()=>{qt.recordMetric({type:"popup_opened",payload:{}})};mr(()=>t());const n=i=>{qt.recordMetric({type:"page_view",payload:{path:i}})};return ot(()=>n(r.pathname)),{recordError:e}}),vm=()=>{const r=Cte();if(!r)throw new Error("useMetrics must be used within a MetricsProvider");return r};var Tte=le('<div class="flex flex-col items-center justify-center h-full text-center gap-4"><div class=text-5xl></div><div class=text-lg>Something went wrong!</div><div class="font-mono bg-zinc-900 rounded w-full p-3 text-left text-red-300"></div><button class="py-2 px-6 bg-zinc-800 rounded-full cursor-pointer active:bg-zinc-800/75 transition-100 font-semibold">Refresh');const Rte=r=>{const{recordError:e}=vm();return mr(()=>{e(r.error),console.error(r.error)}),(()=>{var t=Tte(),n=t.firstChild,i=n.nextSibling,s=i.nextSibling,o=s.nextSibling;return Z(s,()=>typeof r.error=="object"&&r.error&&"message"in r.error&&typeof r.error.message=="string"?r.error.message:`"Unknown error: ${r.error}`),o.$$click=()=>r.reset(),t})()};At(["click"]);const EI={equals:!1},$g=r=>typeof r=="function"&&!r.length?r():r,AI=r=>Array.isArray(r)?r:r?[r]:[];function kte(r,...e){return typeof r=="function"?r(...e):r}const Ote=mt;function y1(r,e,t,n){return r.addEventListener(e,t,n),Ote(r.removeEventListener.bind(r,e,t,n))}function ez(r,e,t,n){const i=()=>{AI($g(r)).forEach(s=>{s&&AI($g(e)).forEach(o=>y1(s,o,t,n))})};typeof r=="function"?ot(i):Ge(i)}const[Pte,Qqe]=El(()=>{function r(){qt.resetLockAlarm({})}return mr(()=>r()),y1(window,"click",()=>r()),{}});var $te=le('<svg viewBox="0 0 329 329"fill=none xmlns=http://www.w3.org/2000/svg><path d="M205.385 324.447L186.26 326.994L183.627 327.32C177.465 328.039 171.205 328.416 164.868 328.433C158.531 328.45 152.27 328.105 146.106 327.419L143.467 327.107L124.33 324.662L129.221 286.383L148.358 288.828L150.376 289.067C155.092 289.593 159.893 289.858 164.765 289.845C170.334 289.83 175.809 289.455 181.167 288.741L200.292 286.195L205.385 324.447ZM65.1269 241.036L66.3969 242.653C72.3844 250.146 79.2126 256.939 86.7374 262.886L88.3574 264.148L103.69 275.864L80.2584 306.523L64.9289 294.807L62.8079 293.16C52.9818 285.394 44.0687 276.524 36.2501 266.739L34.5888 264.63L22.7918 249.363L53.3299 225.769L65.1269 241.036ZM306.523 248.612L294.807 263.942C286.112 275.319 275.961 285.523 264.63 294.278L249.363 306.075L225.769 275.541L241.036 263.744C249.714 257.039 257.489 249.222 264.148 240.51L275.864 225.18L306.523 248.612ZM0.434085 164.868C0.414932 157.625 0.867742 150.481 1.7637 143.467L4.20902 124.33L42.4842 129.221L40.0388 148.358C39.3538 153.72 39.0075 159.197 39.0222 164.765C39.0369 170.334 39.4123 175.809 40.1257 181.167L42.6723 200.292L4.42357 205.385L1.87697 186.26L1.54737 183.627C0.828179 177.465 0.45086 171.205 0.434085 164.868ZM289.845 164.102C289.832 159.229 289.541 154.43 288.991 149.716L288.741 147.7L286.195 128.575L324.447 123.482L326.994 142.607L327.32 145.244C328.039 151.404 328.416 157.663 328.433 163.999C328.452 171.242 328.003 178.386 327.107 185.4L324.662 204.537L286.383 199.646L288.828 180.509L289.067 178.494C289.593 173.777 289.858 168.975 289.845 164.102ZM103.101 53.3299L87.8306 65.1269L86.2173 66.3969C78.189 72.812 70.9617 80.1895 64.7192 88.3574L53.0068 103.69L22.3442 80.2584L34.0602 64.9289L35.7103 62.8079C44.0315 52.2804 53.6175 42.7967 64.2401 34.5888L79.5074 22.7918L103.101 53.3299ZM263.942 34.0602L266.059 35.7103C275.885 43.477 284.802 52.343 292.62 62.1279L294.278 64.2401L306.075 79.5074L275.541 103.101L263.744 87.8306L262.474 86.2173C256.486 78.7241 249.658 71.932 242.133 65.9842L240.51 64.7192L225.18 53.0068L248.612 22.3442L263.942 34.0602ZM163.999 0.434085C170.337 0.417311 176.599 0.761489 182.764 1.44804L185.4 1.7637L204.537 4.20902L199.646 42.4842L180.509 40.0388C175.147 39.3538 169.671 39.0074 164.102 39.0222C158.533 39.0369 153.058 39.4123 147.7 40.1257L128.575 42.6723L123.482 4.42357L142.607 1.87697C149.615 0.943893 156.757 0.45327 163.999 0.434085Z"fill=#E84125>');const Dte=r=>(()=>{var e=$te();return un(e,r,!0,!0),e})();var Mte=le('<svg viewBox="0 0 101 88"fill=currentColor xmlns=http://www.w3.org/2000/svg><path d="M100.48 69.3817L83.8068 86.8015C83.4444 87.1799 83.0058 87.4816 82.5185 87.6878C82.0312 87.894 81.5055 88.0003 80.9743 88H1.93563C1.55849 88 1.18957 87.8926 0.874202 87.6912C0.558829 87.4897 0.31074 87.2029 0.160416 86.8659C0.0100923 86.529 -0.0359181 86.1566 0.0280382 85.7945C0.0919944 85.4324 0.263131 85.0964 0.520422 84.8278L17.2061 67.408C17.5676 67.0306 18.0047 66.7295 18.4904 66.5234C18.9762 66.3172 19.5002 66.2104 20.0301 66.2095H99.0644C99.4415 66.2095 99.8104 66.3169 100.126 66.5183C100.441 66.7198 100.689 67.0067 100.84 67.3436C100.99 67.6806 101.036 68.0529 100.972 68.415C100.908 68.7771 100.737 69.1131 100.48 69.3817ZM83.8068 34.3032C83.4444 33.9248 83.0058 33.6231 82.5185 33.4169C82.0312 33.2108 81.5055 33.1045 80.9743 33.1048H1.93563C1.55849 33.1048 1.18957 33.2121 0.874202 33.4136C0.558829 33.6151 0.31074 33.9019 0.160416 34.2388C0.0100923 34.5758 -0.0359181 34.9482 0.0280382 35.3103C0.0919944 35.6723 0.263131 36.0083 0.520422 36.277L17.2061 53.6968C17.5676 54.0742 18.0047 54.3752 18.4904 54.5814C18.9762 54.7875 19.5002 54.8944 20.0301 54.8952H99.0644C99.4415 54.8952 99.8104 54.7879 100.126 54.5864C100.441 54.3849 100.689 54.0981 100.84 53.7612C100.99 53.4242 101.036 53.0518 100.972 52.6897C100.908 52.3277 100.737 51.9917 100.48 51.723L83.8068 34.3032ZM1.93563 21.7905H80.9743C81.5055 21.7907 82.0312 21.6845 82.5185 21.4783C83.0058 21.2721 83.4444 20.9704 83.8068 20.592L100.48 3.17219C100.737 2.90357 100.908 2.56758 100.972 2.2055C101.036 1.84342 100.99 1.47103 100.84 1.13408C100.689 0.79713 100.441 0.510296 100.126 0.308823C99.8104 0.107349 99.4415 1.24074e-05 99.0644 0L20.0301 0C19.5002 0.000878397 18.9762 0.107699 18.4904 0.313848C18.0047 0.519998 17.5676 0.821087 17.2061 1.19848L0.524723 18.6183C0.267681 18.8866 0.0966198 19.2223 0.0325185 19.5839C-0.0315829 19.9456 0.0140624 20.3177 0.163856 20.6545C0.31365 20.9913 0.561081 21.2781 0.875804 21.4799C1.19053 21.6817 1.55886 21.7896 1.93563 21.7905Z">');const Bte=r=>(()=>{var e=Mte();return un(e,r,!0,!0),e})();var Nte=le('<svg viewBox="0 0 316 315"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_15320_6389)><path d="M157.501 -0.375009C158.243 -0.3738 158.986 -0.372592 159.751 -0.371347C200.901 -0.19058 238.327 15.5969 268.001 44C268.795 44.7309 269.589 45.4618 270.407 46.2148C299.639 74.0132 314.085 114.372 316.001 154C316.043 154.866 316.086 155.732 316.129 156.625C317.036 195.299 303.157 231.777 277.001 260C272.034 255.884 267.588 251.579 263.251 246.812C258.943 242.131 254.59 237.533 250.063 233.062C245.827 228.877 241.829 224.56 238.001 220C239.494 215.902 241.505 212.358 243.751 208.625C258.049 184.089 261.052 157.294 253.876 130C247.036 105.774 231.076 84.526 209.251 71.875C185.025 58.3674 158.112 53.5756 131.001 61C105.763 68.7927 83.7433 84.5134 70.9019 108.01C58.1815 132.403 54.1314 159.243 62.1256 185.875C70.2872 211.566 87.1832 233.11 111.001 246C136.273 258.52 161.194 259.401 188.125 252.452C190.247 251.941 192.193 251.796 194.376 251.75C195.47 251.711 195.47 251.711 196.587 251.672C203.77 252.648 208.21 257.811 213.024 262.73C213.77 263.481 214.516 264.231 215.285 265.004C217.656 267.392 220.016 269.789 222.376 272.188C223.986 273.813 225.596 275.437 227.208 277.061C231.147 281.033 235.077 285.013 239.001 289C237.172 293.096 234.662 294.969 230.938 297.312C230.016 297.897 230.016 297.897 229.075 298.493C208.561 311.04 185.304 315.442 161.563 315.375C160.771 315.374 159.978 315.373 159.162 315.371C119.658 315.208 81.7949 301.088 52.0006 275C51.1511 274.283 50.3016 273.567 49.4264 272.828C43.1832 267.436 38.0125 261.54 33.0006 255C32.3212 254.125 31.6419 253.249 30.942 252.348C14.9048 231.058 4.95175 206.294 1.00058 180C0.816245 178.802 0.631909 177.605 0.441987 176.371C-4.60214 134.33 7.93634 92.1714 33.7896 58.9648C59.598 26.653 96.2021 6.05584 137.122 0.414542C143.913 -0.311258 150.679 -0.395715 157.501 -0.375009Z"fill=white></path><path d="M197.996 108.172C209.455 118.008 217.931 131.94 220 147C221.423 167.213 218.076 184.808 204.625 200.5C192.888 212.619 177.288 219.847 160.402 220.354C142.737 220.513 127.002 215.572 114.062 203.26C101.611 190.821 95.117 175.085 94.625 157.5C95.1486 140.845 100.967 125.086 112.727 113.105C137.096 90.5362 171.111 88.6825 197.996 108.172Z"fill=#C74AE3></path></g><defs><clipPath id=clip0_15320_6389><rect width=316 height=315 fill=white>');const Lte=r=>(()=>{var e=Nte();return un(e,r,!0,!0),e})();function tz(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=tz(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Fte(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=tz(r))&&(n&&(n+=" "),n+=e);return n}const aR="-",Ute=r=>{const e=qte(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(aR);return a[0]===""&&a.length!==1&&a.shift(),rz(a,e)||zte(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},rz=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?rz(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(aR);return e.validators.find(({validator:o})=>o(s))?.classGroupId},c8=/^\[(.+)\]$/,zte=r=>{if(c8.test(r)){const e=c8.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},qte=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const i in t)II(t[i],n,i,e);return n},II=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:l8(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(jte(i)){II(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{II(o,l8(e,s),t,n)})})},l8=(r,e)=>{let t=r;return e.split(aR).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},jte=r=>r.isThemeGetter,Vte=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,o)=>{t.set(s,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},CI="!",TI=":",Kte=TI.length,Hte=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=i=>{const s=[];let o=0,a=0,c=0,l;for(let g=0;g<i.length;g++){let p=i[g];if(o===0&&a===0){if(p===TI){s.push(i.slice(c,g)),c=g+Kte;continue}if(p==="/"){l=g;continue}}p==="["?o++:p==="]"?o--:p==="("?a++:p===")"&&a--}const u=s.length===0?i:i.substring(c),f=Wte(u),d=f!==u,h=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}};if(e){const i=e+TI,s=n;n=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const i=n;n=s=>t({className:s,parseClassName:i})}return n},Wte=r=>r.endsWith(CI)?r.substring(0,r.length-1):r.startsWith(CI)?r.substring(1):r,Gte=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},Yte=r=>({cache:Vte(r.cacheSize),parseClassName:Hte(r),sortModifiers:Gte(r),...Ute(r)}),Jte=/\s+/,Xte=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=r.trim().split(Jte);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:f,modifiers:d,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:p}=t(u);if(f){c=u+(c.length>0?" "+c:c);continue}let m=!!p,y=n(m?g.substring(0,p):g);if(!y){if(!m){c=u+(c.length>0?" "+c:c);continue}if(y=n(g),!y){c=u+(c.length>0?" "+c:c);continue}m=!1}const v=s(d).join(":"),w=h?v+CI:v,_=w+y;if(o.includes(_))continue;o.push(_);const x=i(y,m);for(let E=0;E<x.length;++E){const S=x[E];o.push(w+S)}c=u+(c.length>0?" "+c:c)}return c};function Zte(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=nz(e))&&(n&&(n+=" "),n+=t);return n}const nz=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=nz(r[n]))&&(t&&(t+=" "),t+=e);return t};function Qte(r,...e){let t,n,i,s=o;function o(c){const l=e.reduce((u,f)=>f(u),r());return t=Yte(l),n=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const l=n(c);if(l)return l;const u=Xte(c,t);return i(c,u),u}return function(){return s(Zte.apply(null,arguments))}}const mi=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},iz=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sz=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ere=/^\d+\/\d+$/,tre=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rre=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nre=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ire=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sre=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Td=r=>ere.test(r),Pr=r=>!!r&&!Number.isNaN(Number(r)),Nl=r=>!!r&&Number.isInteger(Number(r)),ox=r=>r.endsWith("%")&&Pr(r.slice(0,-1)),Mc=r=>tre.test(r),ore=()=>!0,are=r=>rre.test(r)&&!nre.test(r),oz=()=>!1,cre=r=>ire.test(r),lre=r=>sre.test(r),ure=r=>!Dt(r)&&!Mt(r),fre=r=>mp(r,lz,oz),Dt=r=>iz.test(r),Ju=r=>mp(r,uz,are),ax=r=>mp(r,mre,Pr),u8=r=>mp(r,az,oz),dre=r=>mp(r,cz,lre),ry=r=>mp(r,fz,cre),Mt=r=>sz.test(r),Wp=r=>yp(r,uz),hre=r=>yp(r,yre),f8=r=>yp(r,az),pre=r=>yp(r,lz),gre=r=>yp(r,cz),ny=r=>yp(r,fz,!0),mp=(r,e,t)=>{const n=iz.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},yp=(r,e,t=!1)=>{const n=sz.exec(r);return n?n[1]?e(n[1]):t:!1},az=r=>r==="position"||r==="percentage",cz=r=>r==="image"||r==="url",lz=r=>r==="length"||r==="size"||r==="bg-size",uz=r=>r==="length",mre=r=>r==="number",yre=r=>r==="family-name",fz=r=>r==="shadow",vre=()=>{const r=mi("color"),e=mi("font"),t=mi("text"),n=mi("font-weight"),i=mi("tracking"),s=mi("leading"),o=mi("breakpoint"),a=mi("container"),c=mi("spacing"),l=mi("radius"),u=mi("shadow"),f=mi("inset-shadow"),d=mi("text-shadow"),h=mi("drop-shadow"),g=mi("blur"),p=mi("perspective"),m=mi("aspect"),y=mi("ease"),v=mi("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[..._(),Mt,Dt],E=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],T=()=>[Mt,Dt,c],C=()=>[Td,"full","auto",...T()],P=()=>[Nl,"none","subgrid",Mt,Dt],V=()=>["auto",{span:["full",Nl,Mt,Dt]},Nl,Mt,Dt],L=()=>[Nl,"auto",Mt,Dt],D=()=>["auto","min","max","fr",Mt,Dt],b=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...T()],F=()=>[Td,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],z=()=>[r,Mt,Dt],G=()=>[..._(),f8,u8,{position:[Mt,Dt]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",pre,fre,{size:[Mt,Dt]}],O=()=>[ox,Wp,Ju],R=()=>["","none","full",l,Mt,Dt],M=()=>["",Pr,Wp,Ju],k=()=>["solid","dashed","dotted","double"],j=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[Pr,ox,f8,u8],ae=()=>["","none",g,Mt,Dt],he=()=>["none",Pr,Mt,Dt],re=()=>["none",Pr,Mt,Dt],q=()=>[Pr,Mt,Dt],J=()=>[Td,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Mc],breakpoint:[Mc],color:[ore],container:[Mc],"drop-shadow":[Mc],ease:["in","out","in-out"],font:[ure],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Mc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Mc],shadow:[Mc],spacing:["px",Pr],text:[Mc],"text-shadow":[Mc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Td,Dt,Mt,m]}],container:["container"],columns:[{columns:[Pr,Dt,Mt,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Nl,"auto",Mt,Dt]}],basis:[{basis:[Td,"full","auto",a,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Pr,Td,"auto","initial","none",Dt]}],grow:[{grow:["",Pr,Mt,Dt]}],shrink:[{shrink:["",Pr,Mt,Dt]}],order:[{order:[Nl,"first","last","none",Mt,Dt]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...b(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...b()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":b()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[a,"screen",...F()]}],"min-w":[{"min-w":[a,"screen","none",...F()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",t,Wp,Ju]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Mt,ax]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ox,Dt]}],"font-family":[{font:[hre,Dt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Mt,Dt]}],"line-clamp":[{"line-clamp":[Pr,"none",Mt,ax]}],leading:[{leading:[s,...T()]}],"list-image":[{"list-image":["none",Mt,Dt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Mt,Dt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:[Pr,"from-font","auto",Mt,Ju]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Pr,"auto",Mt,Dt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mt,Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mt,Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nl,Mt,Dt],radial:["",Mt,Dt],conic:[Nl,Mt,Dt]},gre,dre]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...k(),"hidden","none"]}],"divide-style":[{divide:[...k(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...k(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Pr,Mt,Dt]}],"outline-w":[{outline:["",Pr,Wp,Ju]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,ny,ry]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",f,ny,ry]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Pr,Ju]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",d,ny,ry]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Pr,Mt,Dt]}],"mix-blend":[{"mix-blend":[...j(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":j()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Pr]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Mt,Dt]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Pr]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Mt,Dt]}],filter:[{filter:["","none",Mt,Dt]}],blur:[{blur:ae()}],brightness:[{brightness:[Pr,Mt,Dt]}],contrast:[{contrast:[Pr,Mt,Dt]}],"drop-shadow":[{"drop-shadow":["","none",h,ny,ry]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Pr,Mt,Dt]}],"hue-rotate":[{"hue-rotate":[Pr,Mt,Dt]}],invert:[{invert:["",Pr,Mt,Dt]}],saturate:[{saturate:[Pr,Mt,Dt]}],sepia:[{sepia:["",Pr,Mt,Dt]}],"backdrop-filter":[{"backdrop-filter":["","none",Mt,Dt]}],"backdrop-blur":[{"backdrop-blur":ae()}],"backdrop-brightness":[{"backdrop-brightness":[Pr,Mt,Dt]}],"backdrop-contrast":[{"backdrop-contrast":[Pr,Mt,Dt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Pr,Mt,Dt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Pr,Mt,Dt]}],"backdrop-invert":[{"backdrop-invert":["",Pr,Mt,Dt]}],"backdrop-opacity":[{"backdrop-opacity":[Pr,Mt,Dt]}],"backdrop-saturate":[{"backdrop-saturate":[Pr,Mt,Dt]}],"backdrop-sepia":[{"backdrop-sepia":["",Pr,Mt,Dt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Mt,Dt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Pr,"initial",Mt,Dt]}],ease:[{ease:["linear","initial",y,Mt,Dt]}],delay:[{delay:[Pr,Mt,Dt]}],animate:[{animate:["none",v,Mt,Dt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Mt,Dt]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:he()}],"rotate-x":[{"rotate-x":he()}],"rotate-y":[{"rotate-y":he()}],"rotate-z":[{"rotate-z":he()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":["scale-3d"],skew:[{skew:q()}],"skew-x":[{"skew-x":q()}],"skew-y":[{"skew-y":q()}],transform:[{transform:[Mt,Dt,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:J()}],"translate-x":[{"translate-x":J()}],"translate-y":[{"translate-y":J()}],"translate-z":[{"translate-z":J()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mt,Dt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mt,Dt]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Pr,Wp,Ju,ax]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bre=Qte(vre),gr=(...r)=>bre(Fte(r));var d8=Object.prototype.hasOwnProperty;function RI(r,e){var t,n;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&RI(r[n],e[n]););return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(d8.call(r,t)&&++n&&!d8.call(e,t)||!(t in e)||!RI(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}const wre=new Error("request for lock canceled");var xre=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};class _re{constructor(e,t=wre){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((n,i)=>{const s={resolve:n,reject:i,weight:e,priority:t},o=dz(this._queue,a=>t<=a.priority);o===-1&&e<=this._value?this._dispatchItem(s):this._queue.splice(o+1,0,s)})}runExclusive(e){return xre(this,arguments,void 0,function*(t,n=1,i=0){const[s,o]=yield this.acquire(n,i);try{return yield t(s)}finally{o()}})}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Sre(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(n=>n.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const n=this._weightedWaiters[t-1];if(!n)continue;const i=n.findIndex(s=>s.priority<=e);(i===-1?n:n.splice(0,i)).forEach(s=>s.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}}function Sre(r,e){const t=dz(r,n=>e.priority<=n.priority);r.splice(t+1,0,e)}function dz(r,e){for(let t=r.length-1;t>=0;t--)if(e(r[t]))return t;return-1}var Ere=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};class v1{constructor(e){this._semaphore=new _re(1,e)}acquire(){return Ere(this,arguments,void 0,function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const gv=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser,bm=Are();function Are(){const r={local:iy("local"),session:iy("session"),sync:iy("sync"),managed:iy("managed")},e=p=>{const m=r[p];if(m==null){const y=Object.keys(r).join(", ");throw Error(`Invalid area "${p}". Options: ${y}`)}return m},t=p=>{const m=p.indexOf(":"),y=p.substring(0,m),v=p.substring(m+1);if(v==null)throw Error(`Storage key should be in the form of "area:key", but received "${p}"`);return{driverArea:y,driverKey:v,driver:e(y)}},n=p=>p+"$",i=(p,m)=>{const y={...p};return Object.entries(m).forEach(([v,w])=>{w==null?delete y[v]:y[v]=w}),y},s=(p,m)=>p??m??null,o=p=>typeof p=="object"&&!Array.isArray(p)?p:{},a=async(p,m,y)=>{const v=await p.getItem(m);return s(v,y?.fallback??y?.defaultValue)},c=async(p,m)=>{const y=n(m),v=await p.getItem(y);return o(v)},l=async(p,m,y)=>{await p.setItem(m,y??null)},u=async(p,m,y)=>{const v=n(m),w=o(await p.getItem(v));await p.setItem(v,i(w,y))},f=async(p,m,y)=>{if(await p.removeItem(m),y?.removeMeta){const v=n(m);await p.removeItem(v)}},d=async(p,m,y)=>{const v=n(m);if(y==null)await p.removeItem(v);else{const w=o(await p.getItem(v));[y].flat().forEach(_=>delete w[_]),await p.setItem(v,w)}},h=(p,m,y)=>p.watch(m,y);return{getItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);return await a(y,v,m)},getItems:async p=>{const m=new Map,y=new Map,v=[];p.forEach(_=>{let x,E;typeof _=="string"?x=_:"getValue"in _?(x=_.key,E={fallback:_.fallback}):(x=_.key,E=_.options),v.push(x);const{driverArea:S,driverKey:T}=t(x),C=m.get(S)??[];m.set(S,C.concat(T)),y.set(x,E)});const w=new Map;return await Promise.all(Array.from(m.entries()).map(async([_,x])=>{(await r[_].getItems(x)).forEach(S=>{const T=`${_}:${S.key}`,C=y.get(T),P=s(S.value,C?.fallback??C?.defaultValue);w.set(T,P)})})),v.map(_=>({key:_,value:w.get(_)}))},getMeta:async p=>{const{driver:m,driverKey:y}=t(p);return await c(m,y)},getMetas:async p=>{const m=p.map(w=>{const _=typeof w=="string"?w:w.key,{driverArea:x,driverKey:E}=t(_);return{key:_,driverArea:x,driverKey:E,driverMetaKey:n(E)}}),y=m.reduce((w,_)=>(w[_.driverArea]??=[],w[_.driverArea].push(_),w),{}),v={};return await Promise.all(Object.entries(y).map(async([w,_])=>{const x=await gv.storage[w].get(_.map(E=>E.driverMetaKey));_.forEach(E=>{v[E.key]=x[E.driverMetaKey]??{}})})),m.map(w=>({key:w.key,meta:v[w.key]}))},setItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await l(y,v,m)},setItems:async p=>{const m={};p.forEach(y=>{const{driverArea:v,driverKey:w}=t("key"in y?y.key:y.item.key);m[v]??=[],m[v].push({key:w,value:y.value})}),await Promise.all(Object.entries(m).map(async([y,v])=>{await e(y).setItems(v)}))},setMeta:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await u(y,v,m)},setMetas:async p=>{const m={};p.forEach(y=>{const{driverArea:v,driverKey:w}=t("key"in y?y.key:y.item.key);m[v]??=[],m[v].push({key:w,properties:y.meta})}),await Promise.all(Object.entries(m).map(async([y,v])=>{const w=e(y),_=v.map(({key:T})=>n(T));console.log(y,_);const x=await w.getItems(_),E=Object.fromEntries(x.map(({key:T,value:C})=>[T,o(C)])),S=v.map(({key:T,properties:C})=>{const P=n(T);return{key:P,value:i(E[P]??{},C)}});await w.setItems(S)}))},removeItem:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await f(y,v,m)},removeItems:async p=>{const m={};p.forEach(y=>{let v,w;typeof y=="string"?v=y:"getValue"in y?v=y.key:"item"in y?(v=y.item.key,w=y.options):(v=y.key,w=y.options);const{driverArea:_,driverKey:x}=t(v);m[_]??=[],m[_].push(x),w?.removeMeta&&m[_].push(n(x))}),await Promise.all(Object.entries(m).map(async([y,v])=>{await e(y).removeItems(v)}))},clear:async p=>{await e(p).clear()},removeMeta:async(p,m)=>{const{driver:y,driverKey:v}=t(p);await d(y,v,m)},snapshot:async(p,m)=>{const v=await e(p).snapshot();return m?.excludeKeys?.forEach(w=>{delete v[w],delete v[n(w)]}),v},restoreSnapshot:async(p,m)=>{await e(p).restoreSnapshot(m)},watch:(p,m)=>{const{driver:y,driverKey:v}=t(p);return h(y,v,m)},unwatch(){Object.values(r).forEach(p=>{p.unwatch()})},defineItem:(p,m)=>{const{driver:y,driverKey:v}=t(p),{version:w=1,migrations:_={}}=m??{};if(w<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const x=async()=>{const P=n(v),[{value:V},{value:L}]=await y.getItems([v,P]);if(V==null)return;const D=L?.v??1;if(D>w)throw Error(`Version downgrade detected (v${D} -> v${w}) for "${p}"`);if(D===w)return;console.debug(`[@wxt-dev/storage] Running storage migration for ${p}: v${D} -> v${w}`);const b=Array.from({length:w-D},(B,F)=>D+F+1);let I=V;for(const B of b)try{I=await _?.[B]?.(I)??I}catch(F){throw new Ire(p,B,{cause:F})}await y.setItems([{key:v,value:I},{key:P,value:{...L,v:w}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${p} v${w}`,{migratedValue:I})},E=m?.migrations==null?Promise.resolve():x().catch(P=>{console.error(`[@wxt-dev/storage] Migration failed for ${p}`,P)}),S=new v1,T=()=>m?.fallback??m?.defaultValue??null,C=()=>S.runExclusive(async()=>{const P=await y.getItem(v);if(P!=null||m?.init==null)return P;const V=await m.init();return await y.setItem(v,V),V});return E.then(C),{key:p,get defaultValue(){return T()},get fallback(){return T()},getValue:async()=>(await E,m?.init?await C():await a(y,v,m)),getMeta:async()=>(await E,await c(y,v)),setValue:async P=>(await E,await l(y,v,P)),setMeta:async P=>(await E,await u(y,v,P)),removeValue:async P=>(await E,await f(y,v,P)),removeMeta:async P=>(await E,await d(y,v,P)),watch:P=>h(y,v,(V,L)=>P(V??T(),L??T())),migrate:x}}}}function iy(r){const e=()=>{if(gv.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(gv.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const n=gv.storage[r];if(n==null)throw Error(`"browser.storage.${r}" is undefined`);return n},t=new Set;return{getItem:async n=>(await e().get(n))[n],getItems:async n=>{const i=await e().get(n);return n.map(s=>({key:s,value:i[s]??null}))},setItem:async(n,i)=>{i==null?await e().remove(n):await e().set({[n]:i})},setItems:async n=>{const i=n.reduce((s,{key:o,value:a})=>(s[o]=a,s),{});await e().set(i)},removeItem:async n=>{await e().remove(n)},removeItems:async n=>{await e().remove(n)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async n=>{await e().set(n)},watch(n,i){const s=o=>{const a=o[n];a!=null&&(RI(a.newValue,a.oldValue)||i(a.newValue??null,a.oldValue??null))};return e().onChanged.addListener(s),t.add(s),()=>{e().onChanged.removeListener(s),t.delete(s)}},unwatch(){t.forEach(n=>{e().onChanged.removeListener(n)}),t.clear()}}}class Ire extends Error{constructor(e,t,n){super(`v${t} migration failed for "${e}"`,n),this.key=e,this.version=t}}const $i=[];for(let r=0;r<256;++r)$i.push((r+256).toString(16).slice(1));function Cre(r,e=0){return($i[r[e+0]]+$i[r[e+1]]+$i[r[e+2]]+$i[r[e+3]]+"-"+$i[r[e+4]]+$i[r[e+5]]+"-"+$i[r[e+6]]+$i[r[e+7]]+"-"+$i[r[e+8]]+$i[r[e+9]]+"-"+$i[r[e+10]]+$i[r[e+11]]+$i[r[e+12]]+$i[r[e+13]]+$i[r[e+14]]+$i[r[e+15]]).toLowerCase()}let cx;const Tre=new Uint8Array(16);function Rre(){if(!cx){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cx=crypto.getRandomValues.bind(crypto)}return cx(Tre)}const lx={};function hz(r,e,t){let n;{const i=Date.now(),s=Rre();kre(lx,i,s),n=Ore(s,lx.msecs,lx.seq,e,t)}return Cre(n)}function kre(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}function Ore(r,e,t,n,i=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|t>>>28&15,n[i++]=t>>>20&255,n[i++]=128|t>>>14&63,n[i++]=t>>>6&255,n[i++]=t<<2&255|r[10]&3,n[i++]=r[11],n[i++]=r[12],n[i++]=r[13],n[i++]=r[14],n[i++]=r[15],n}const Pre=600420,$re=16,ux=12;class Dg{#e;constructor(e){this.#e=e}static generateSalt(){return crypto.getRandomValues(new Uint8Array($re))}static async fromPassword(e,t){const n=await crypto.subtle.importKey("raw",new TextEncoder().encode(e),{name:"PBKDF2"},!1,["deriveKey"]),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:Pre,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return new Dg(i)}async encrypt(e){const t=crypto.getRandomValues(new Uint8Array(ux)),n=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},this.#e,e);return new Uint8Array([...t,...new Uint8Array(n)])}async decrypt(e){const t=e.slice(0,ux),n=e.slice(ux),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},this.#e,n);return new Uint8Array(i)}async toJson(){return crypto.subtle.exportKey("jwk",this.#e)}static async fromJson(e){const t=await crypto.subtle.importKey("jwk",e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return new Dg(t)}async hash(){const e=await crypto.subtle.exportKey("raw",this.#e),t=await crypto.subtle.digest("SHA-256",e);return new Uint8Array(t)}}var Dre=28e5,Mre=2800001,Bre=2800003,Nre=361e4,Lre=3610003,Fre=3610005,Ure=3610007,zre=3704001,qre=5663015,jre=5663016,Vre=5663017,Kre=8078e3,Hre=8078001,Wre=8078004,Gre=8078005,Yre=8078006,Jre=8078007,Xre=8078011,Mg=8078012,Zre=8078013,Qre=8078014;function pz(r){return Array.isArray(r)?"%5B"+r.map(pz).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function ene([r,e]){return`${r}=${pz(e)}`}function tne(r){const e=Object.entries(r).map(ene).join("&");return btoa(e)}function rne(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${tne(e)}'`),`${t}\``}}var Rn=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:s,...o}=e;s&&(n={cause:s}),Object.keys(o).length>0&&(t=o)}const i=rne(r,t);super(i,n),this.context={__code:r,...t},this.name="SolanaError"}},nne=(r,e)=>{if(r.length>=e)return r;const t=new Uint8Array(e).fill(0);return t.set(r),t},ine=(r,e)=>nne(r.length<=e?r:r.slice(0,e),e);function eb(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function La(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(eb(e,r));return r.write(e,t,0),t}})}function qs(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function wa(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function sne(r){return!wa(r)}function gz(r,e){if(wa(r)!==wa(e))throw new Rn(Wre);if(wa(r)&&wa(e)&&r.fixedSize!==e.fixedSize)throw new Rn(Gre,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!wa(r)&&!wa(e)&&r.maxSize!==e.maxSize)throw new Rn(Yre,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function one(r,e,t=0){if(e.length-t<=0)throw new Rn(Kre,{codecDescription:r})}function mz(r,e,t,n=0){const i=t.length-n;if(i<e)throw new Rn(Hre,{bytesLength:i,codecDescription:r,expected:e})}function h8(r,e,t){if(e<0||e>t)throw new Rn(Qre,{bytesLength:t,codecDescription:r,offset:e})}function yz(r,e){return La({fixedSize:e,write:(t,n,i)=>{const s=r.encode(t),o=s.length>e?s.slice(0,e):s;return n.set(o,i),i+e}})}function vz(r,e){return qs({fixedSize:e,read:(t,n)=>{mz("fixCodecSize",e,t,n),(n>0||t.length>e)&&(t=t.slice(n,n+e)),wa(r)&&(t=ine(t,r.fixedSize));const[i]=r.read(t,0);return[i,n+e]}})}function ane(r,e){return qs({...r,read:(t,n)=>{const i=l=>cne(l,t.length),s=e.preOffset?e.preOffset({bytes:t,preOffset:n,wrapBytes:i}):n;h8("offsetDecoder",s,t.length);const[o,a]=r.read(t,s),c=e.postOffset?e.postOffset({bytes:t,newPreOffset:s,postOffset:a,preOffset:n,wrapBytes:i}):a;return h8("offsetDecoder",c,t.length),[o,c]}})}function cne(r,e){return e===0?0:(r%e+e)%e}function lne(r,e){if(wa(r)){const t=e(r.fixedSize);if(t<0)throw new Rn(Zre,{bytesLength:t,codecDescription:"resizeDecoder"});return qs({...r,fixedSize:t})}return r}function une(r,e){return ane(lne(r,t=>t+e),{postOffset:({postOffset:t})=>t+e})}function bz(r,e){return La({...sne(r)?{...r,getSizeFromValue:t=>r.getSizeFromValue(e(t))}:r,write:(t,n,i)=>r.write(e(t),n,i)})}function fne(r,e){return qs({...r,read:(t,n)=>{const[i,s]=r.read(t,n);return[e(i,t,n),s]}})}function dne(r,e,t=e){if(!e.match(new RegExp(`^[${r}]*$`)))throw new Rn(Mg,{alphabet:r,base:r.length,value:t})}var hne=r=>La({getSizeFromValue:e=>{const[t,n]=p8(e,r[0]);if(!n)return e.length;const i=g8(n,r);return t.length+Math.ceil(i.toString(16).length/2)},write(e,t,n){if(dne(r,e),e==="")return n;const[i,s]=p8(e,r[0]);if(!s)return t.set(new Uint8Array(i.length).fill(0),n),n+i.length;let o=g8(s,r);const a=[];for(;o>0n;)a.unshift(Number(o%256n)),o/=256n;const c=[...Array(i.length).fill(0),...a];return t.set(c,n),n+c.length}}),pne=r=>qs({read(e,t){const n=t===0?e:e.slice(t);if(n.length===0)return["",0];let i=n.findIndex(c=>c!==0);i=i===-1?n.length:i;const s=r[0].repeat(i);if(i===n.length)return[s,e.length];const o=n.slice(i).reduce((c,l)=>c*256n+BigInt(l),0n),a=gne(o,r);return[s+a,e.length]}});function p8(r,e){const[t,n]=r.split(new RegExp(`((?!${e}).*)`));return[t,n]}function g8(r,e){const t=BigInt(e.length);let n=0n;for(const i of r)n*=t,n+=BigInt(e.indexOf(i));return n}function gne(r,e){const t=BigInt(e.length),n=[];for(;r>0n;)n.unshift(e[Number(r%t)]),r/=t;return n.join("")}var m8={alphabet:"0123456789abcdef",base:16};function fx(r){if(r>=48&&r<=57)return r-48;if(r>=65&&r<=70)return r-55;if(r>=97&&r<=102)return r-87}var mne=()=>La({getSizeFromValue:r=>Math.ceil(r.length/2),write(r,e,t){const n=r.length,i=n/2;if(n===1){const o=r.charCodeAt(0),a=fx(o);if(a===void 0)throw new Rn(Mg,{...m8,value:r});return e.set([a],t),1+t}const s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=r.charCodeAt(a++),l=r.charCodeAt(a++),u=fx(c),f=fx(l);if(u===void 0||f===void 0&&!Number.isNaN(l))throw new Rn(Mg,{...m8,value:r});s[o]=Number.isNaN(l)?u:u<<4|(f??0)}return e.set(s,t),s.length+t}}),yne=()=>qs({read(r,e){return[r.slice(e).reduce((n,i)=>n+i.toString(16).padStart(2,"0"),""),r.length]}}),wz="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",xz=()=>hne(wz),_z=()=>pne(wz),y8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vne=()=>La({getSizeFromValue:r=>{try{return atob(r).length}catch{throw new Rn(Mg,{alphabet:y8,base:64,value:r})}},write(r,e,t){try{const n=atob(r).split("").map(i=>i.charCodeAt(0));return e.set(n,t),n.length+t}catch{throw new Rn(Mg,{alphabet:y8,base:64,value:r})}}}),Sz=()=>qs({read(r,e=0){const t=r.slice(e);return[btoa(String.fromCharCode(...t)),r.length]}}),bne=r=>r.replace(/\u0000/g,""),wne=globalThis.TextDecoder,v8=globalThis.TextEncoder,xne=()=>{let r;return La({getSizeFromValue:e=>(r||=new v8).encode(e).length,write:(e,t,n)=>{const i=(r||=new v8).encode(e);return t.set(i,n),n+i.length}})},_ne=()=>{let r;return qs({read(e,t){const n=(r||=new wne).decode(e.slice(t));return[bne(n),e.length]}})};function Ez(){if(!globalThis.isSecureContext)throw new Rn(Nre)}function Az(){if(Ez(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.exportKey!="function")throw new Rn(Lre)}function Sne(){if(Ez(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.sign!="function")throw new Rn(Fre)}var dx,hx;function cR(){return dx||(dx=xz()),dx}function Ene(){return hx||(hx=_z()),hx}function bu(r){if(r.length<32||r.length>44)return!1;const e=cR();try{return e.encode(r).byteLength===32}catch{return!1}}function Ane(r){if(r.length<32||r.length>44)throw new Rn(Mre,{actualLength:r.length});const n=cR().encode(r).byteLength;if(n!==32)throw new Rn(Dre,{actualLength:n})}function lR(r){return Ane(r),r}function Iz(){return bz(yz(cR(),32),r=>lR(r))}function uR(){return vz(Ene(),32)}function Ine(){return gz(Iz(),uR())}async function Cz(r){if(Az(),r.type!=="public"||r.algorithm.name!=="Ed25519")throw new Rn(Bre);const e=await crypto.subtle.exportKey("raw",r);return uR().decode(new Uint8Array(e))}function Tz(r,e,t,n){if(n<e||n>t)throw new Rn(Xre,{codecDescription:r,max:t,min:e,value:n})}function Rz(r){return r?.endian!==1}function kz(r){return La({fixedSize:r.size,write(e,t,n){r.range&&Tz(r.name,r.range[0],r.range[1],e);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,Rz(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function fR(r){return qs({fixedSize:r.size,read(e,t=0){one(r.name,e,t),mz(r.name,r.size,e,t);const n=new DataView(Cne(e,t,r.size));return[r.get(n,Rz(r.config)),t+r.size]}})}function Cne(r,e,t){const n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var Tne=()=>La({getSizeFromValue:r=>r<=127?1:r<=16383?2:3,maxSize:3,write:(r,e,t)=>{Tz("shortU16",0,65535,r);const n=[0];for(let i=0;;i+=1){const s=Number(r)>>i*7;if(s===0)break;const o=127&s;n[i]=o,i>0&&(n[i-1]|=128)}return e.set(n,t),t+n.length}}),Oz=()=>qs({maxSize:3,read:(r,e)=>{let t=0,n=0;for(;++n;){const i=n-1,s=r[e+i],o=127&s;if(t|=o<<i*7,(s&128)===0)break}return[t,e+n]}}),Rne=(r={})=>kz({config:r,name:"u32",range:[0,+"0xffffffff"],set:(e,t,n)=>e.setUint32(0,Number(t),n),size:4}),kne=(r={})=>fR({config:r,get:(e,t)=>e.getUint32(0,t),name:"u32",size:4}),One=(r={})=>kz({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Pne=(r={})=>fR({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),$ne=(r={})=>gz(One(r),Pne(r)),Dne=()=>fR({get:r=>r.getUint8(0),name:"u8",size:1});function Mne(r,e,t){if(e!==t)throw new Rn(Jre,{actual:t,codecDescription:r,expected:e})}function Vh(r){return r.reduce((e,t)=>e===null||t===null?null:e+t,0)}function wm(r){return wa(r)?r.fixedSize:null}function xm(r){return wa(r)?r.fixedSize:r.maxSize??null}function Bne(r,e={}){const t=e.size??Rne(),n=tb(t,wm(r)),i=tb(t,xm(r))??void 0;return La({...n!==null?{fixedSize:n}:{getSizeFromValue:s=>(typeof t=="object"?eb(s.length,t):0)+[...s].reduce((a,c)=>a+eb(c,r),0),maxSize:i},write:(s,o,a)=>(typeof t=="number"&&Mne("array",t,s.length),typeof t=="object"&&(a=t.write(s.length,o,a)),s.forEach(c=>{a=r.write(c,o,a)}),a)})}function Pz(r,e={}){const t=e.size??kne(),n=wm(r),i=tb(t,n),s=tb(t,xm(r))??void 0;return qs({...i!==null?{fixedSize:i}:{maxSize:s},read:(o,a)=>{const c=[];if(typeof t=="object"&&o.slice(a).length===0)return[c,a];if(t==="remainder"){for(;a<o.length;){const[f,d]=r.read(o,a);a=d,c.push(f)}return[c,a]}const[l,u]=typeof t=="number"?[t,a]:t.read(o,a);a=u;for(let f=0;f<l;f+=1){const[d,h]=r.read(o,a);a=h,c.push(d)}return[c,a]}})}function tb(r,e){return typeof r!="number"?null:r===0?0:e===null?null:e*r}function $z(){return La({getSizeFromValue:r=>r.length,write:(r,e,t)=>(e.set(r,t),t+r.length)})}function b8(){return qs({read:(r,e)=>{const t=r.slice(e);return[t,e+t.length]}})}function Nne(r){const e=Vh(r.map(wm)),t=Vh(r.map(xm))??void 0;return qs({...e===null?{maxSize:t}:{fixedSize:e},read:(n,i)=>{const s=[];return r.forEach(o=>{const[a,c]=o.read(n,i);s.push(a),i=c}),[s,i]}})}function Lne(r){const e=r.map(([,i])=>i),t=Vh(e.map(wm)),n=Vh(e.map(xm))??void 0;return La({...t===null?{getSizeFromValue:i=>r.map(([s,o])=>eb(i[s],o)).reduce((s,o)=>s+o,0),maxSize:n}:{fixedSize:t},write:(i,s,o)=>(r.forEach(([a,c])=>{o=c.write(i[a],s,o)}),o)})}function Fne(r){const e=r.map(([,i])=>i),t=Vh(e.map(wm)),n=Vh(e.map(xm))??void 0;return qs({...t===null?{maxSize:n}:{fixedSize:t},read:(i,s)=>{const o={};return r.forEach(([a,c])=>{const[l,u]=c.read(i,s);s=u,o[a]=l}),[o,s]}})}var Dz=Object.freeze({name:"Ed25519"});function Une(r){return new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...r])}async function w8(r,e=!1){const t=r.byteLength;if(t!==32)throw new Rn(zre,{actualLength:t});const n=Une(r);return await crypto.subtle.importKey("pkcs8",n,Dz,e,["sign"])}async function zne(r,e=!1){if(Az(),r.extractable===!1)throw new Rn(Ure,{key:r});const t=await crypto.subtle.exportKey("jwk",r);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:e,key_ops:["verify"],kty:"OKP",x:t.x},"Ed25519",e,["verify"])}async function Mz(r,e){Sne();const t=await crypto.subtle.sign(Dz,r,e);return new Uint8Array(t)}async function qne(r,e=!1){const t=w8(r,e),[n,i]=await Promise.all([(e?t:w8(r,!0)).then(async s=>await zne(s,!0)),t]);return{privateKey:i,publicKey:n}}var x8=128;function jne(){return qs({maxSize:1,read:(r,e)=>{const t=r[e];return(t&x8)===0?["legacy",e]:[t^x8,e+1]}})}function Vne(r){const e=Object.values(r);if(e.length===0)throw new Rn(jre);return e.map(t=>t||new Uint8Array(64).fill(0))}function Kne(){return bz(Bne(yz($z(),64),{size:Tne()}),Vne)}function Bz(){return Lne([["signatures",Kne()],["messageBytes",$z()]])}function Nz(){return fne(Fne([["signatures",Pz(vz(b8(),64),{size:Oz()})],["messageBytes",b8()]]),Hne)}function Hne(r){const{messageBytes:e,signatures:t}=r,n=Nne([jne(),une(Dne(),2),Pz(uR(),{size:Oz()})]),[i,s,o]=n.decode(e),a=o.slice(0,s);if(a.length!==t.length)throw new Rn(Vre,{numRequiredSignatures:s,signaturesLength:t.length,signerAddresses:a});const c={};return a.forEach((l,u)=>{const f=t[u];f.every(d=>d===0)?c[l]=null:c[l]=f}),{messageBytes:e,signatures:Object.freeze(c)}}function Wne(r,e){return r.length===e.length&&r.every((t,n)=>t===e[n])}async function Lz(r,e){let t,n;if(await Promise.all(r.map(async i=>{const s=await Cz(i.publicKey),o=e.signatures[s];if(o===void 0){n||=new Set,n.add(s);return}if(n)return;const a=await Mz(i.privateKey,e.messageBytes);o!==null&&Wne(a,o)||(t||={},t[s]=a)})),n&&n.size>0){const i=Object.keys(e.signatures);throw new Rn(qre,{expectedAddresses:i,unexpectedAddresses:[...n]})}return t?Object.freeze({...e,signatures:Object.freeze({...e.signatures,...t})}):e}function Gne(r){const e=Bz().encode(r);return Sz().decode(e)}async function Yne(r){const e=await Cz(r.publicKey);return Object.freeze({address:e,keyPair:r,signMessages:n=>Promise.all(n.map(async i=>Object.freeze({[e]:await Mz(r.privateKey,i.content)}))),signTransactions:n=>Promise.all(n.map(async i=>{const s=await Lz([r],i);return Object.freeze({[e]:s.signatures[e]})}))})}async function _h(r,e){return await Yne(await qne(r,e))}var Jne=globalThis.TextEncoder;function Xne(r,e={}){return Object.freeze({content:typeof r=="string"?new Jne().encode(r):r,signatures:Object.freeze({...e})})}class $r{static unmarshalBase64(e){return vne().encode(e)}static marshalBase64(e){return Sz().decode(e)}static unmarshalBase58(e){return xz().encode(e)}static marshalBase58(e){return _z().decode(e)}static unmarshalHex(e){return mne().encode(e)}static marshalHex(e){return yne().decode(e)}}const Si={id:hz(),uiMode:"popup",selectedAccountIdx:0,passwordSalt:$r.marshalBase64(Dg.generateSalt()),showBalances:!0,jupiterAutoApprove:!0,meteoraAutoApprove:!1,orbAutoApprove:!1,autoApproveNotifications:!0,lockDelayMinutes:1440,explorer:"orb",phantomCompat:!1,skipReviewStep:!1,holdingsValueFilter:0};class eje{static mutex=new v1;static#e=bm.defineItem("local:user_settings",{init:()=>Si,version:2,migrations:{2:e=>{const{jupiterAutoApproveNotifications:t,...n}=e;return{...Si,...n,autoApproveNotifications:t??Si.autoApproveNotifications}}}});static async get(){return this.mutex.runExclusive(async()=>{const e=await this.#e.getValue();return{...Si,...e}})}static async update(e){return this.mutex.runExclusive(async()=>{const t=await this.#e.getValue();return this.#e.setValue({...Si,...t,...e})})}static async reset(){return this.mutex.runExclusive(async()=>this.#e.setValue({...Si,passwordSalt:$r.marshalBase64(Dg.generateSalt())}))}}const _8={selectedAccountIdx:Si.selectedAccountIdx,showBalances:Si.showBalances,jupiterAutoApprove:Si.jupiterAutoApprove,meteoraAutoApprove:Si.meteoraAutoApprove,orbAutoApprove:Si.orbAutoApprove,autoApproveNotifications:Si.autoApproveNotifications,uiMode:Si.uiMode,lockDelayMinutes:Si.lockDelayMinutes,explorer:Si.explorer,phantomCompat:Si.phantomCompat,skipReviewStep:Si.skipReviewStep,holdingsValueFilter:Si.holdingsValueFilter},[Zne,Qne]=El(()=>{const[r,e]=ud(_8);async function t(i){const s=await qt.getUserSettings();for(const o in _8)if(o in s){if(o==="selectedAccountIdx"&&i)continue;e(o,s[o])}}y1(window,"focus",()=>t(!0));async function n(i){await qt.updateUserSettings(i),await t()}return{settings:r,updateUserSettings:n,refresh:t}}),xi=()=>{const r=Qne();if(!r)throw new Error("useSettings must be used within a SettingsProvider");return r},kI={orb:{id:"orb",name:"Orb",Icon:Dte,links:r=>{switch(r.type){case"address":return`https://orb.helius.dev/address/${r.value}`;case"tx":return`https://orb.helius.dev/tx/${r.value}`}}},solscan:{id:"solscan",name:"Solscan",Icon:Lte,links:r=>{switch(r.type){case"address":return`https://solscan.io/account/${r.value}`;case"tx":return`https://solscan.io/tx/${r.value}`}}},explorer:{id:"explorer",name:"Explorer",Icon:r=>A(Bte,at(r,{get class(){return gr("fill-#14f195",r.class)}})),links:r=>{switch(r.type){case"address":return`https://explorer.solana.com/address/${r.value}`;case"tx":return`https://explorer.solana.com/tx/${r.value}`}}}},[eie,tie]=El(()=>{const{settings:r,updateUserSettings:e}=xi(),t=Te(()=>kI[r.explorer]||kI.orb),n=s=>e({type:"setExplorer",explorer:s});function i(s){const o=t().links(s);window.open(o,"_blank")}return{selectedExplorer:t,updateExplorer:n,openExplorer:i}}),Al=()=>{const r=tie();if(!r)throw new Error("useExplorer must be used within a ExplorerProvider");return r},px=Symbol("fallback");function S8(r){for(const e of r)e.dispose()}function rie(r,e,t,n={}){const i=new Map;return mt(()=>S8(i.values())),()=>{const o=r()||[];return o[qv],Sr(()=>{if(!o.length)return S8(i.values()),i.clear(),n.fallback?[ll(f=>(i.set(px,{dispose:f}),n.fallback()))]:[];const a=new Array(o.length),c=i.get(px);if(!i.size||c){c?.dispose(),i.delete(px);for(let u=0;u<o.length;u++){const f=o[u],d=e(f,u);s(a,f,u,d)}return a}const l=new Set(i.keys());for(let u=0;u<o.length;u++){const f=o[u],d=e(f,u);l.delete(d);const h=i.get(d);h?(a[u]=h.mapped,h.setIndex?.(u),h.setItem(()=>f)):s(a,f,u,d)}for(const u of l)i.get(u)?.dispose(),i.delete(u);return a})};function s(o,a,c,l){ll(u=>{const[f,d]=Pe(a),h={setItem:d,dispose:u};if(t.length>1){const[g,p]=Pe(c);h.setIndex=p,h.mapped=t(f,g)}else h.mapped=t(f);i.set(l,h),o[c]=h.mapped})}}function nie(r){const{by:e}=r;return Te(rie(()=>r.each,typeof e=="function"?e:t=>t[e],r.children,"fallback"in r?{fallback:()=>r.fallback}:void 0))}function iie(r){return(...e)=>{for(const t of r)t&&t(...e)}}const We=r=>typeof r=="function"&&!r.length?r():r;function sie(r,...e){return typeof r=="function"?r(...e):r}const oie=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function E8(r){const e={};let t;for(;t=oie.exec(r);)e[t[1]]=t[2];return e}function Sc(r,e){if(typeof r=="string"){if(typeof e=="string")return`${r};${e}`;r=E8(r)}else typeof e=="string"&&(e=E8(e));return{...r,...e}}function Sn(...r){return iie(r)}function aie(r,e,t=-1){return t in r?[...r.slice(0,t),e,...r.slice(t)]:[...r,e]}function OI(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function cie(r){return typeof r=="number"}function ih(r){return Object.prototype.toString.call(r)==="[object String]"}function b1(r){return typeof r=="function"}function Mo(r){return e=>`${r()}-${e}`}function bs(r,e){return r?r===e||r.contains(e):!1}function F0(r,e=!1){const{activeElement:t}=Po(r);if(!t?.nodeName)return null;if(Uz(t)&&t.contentDocument)return F0(t.contentDocument.body,e);if(e){const n=t.getAttribute("aria-activedescendant");if(n){const i=Po(t).getElementById(n);if(i)return i}}return t}function Fz(r){return Po(r).defaultView||window}function Po(r){return r?r.ownerDocument||r:document}function Uz(r){return r.tagName==="IFRAME"}var dR=(r=>(r.Escape="Escape",r.Enter="Enter",r.Tab="Tab",r.Space=" ",r.ArrowDown="ArrowDown",r.ArrowLeft="ArrowLeft",r.ArrowRight="ArrowRight",r.ArrowUp="ArrowUp",r.End="End",r.Home="Home",r.PageDown="PageDown",r.PageUp="PageUp",r))(dR||{});function zz(r){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(e=>r.test(e.brand))||r.test(window.navigator.userAgent)}function hR(r){return typeof window<"u"&&window.navigator!=null?r.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function _m(){return hR(/^Mac/i)}function lie(){return hR(/^iPhone/i)}function uie(){return hR(/^iPad/i)||_m()&&navigator.maxTouchPoints>1}function fie(){return lie()||uie()}function die(){return _m()||fie()}function hie(){return zz(/AppleWebKit/i)&&!pie()}function pie(){return zz(/Chrome/i)}function pr(r,e){return e&&(b1(e)?e(r):e[0](e[1],r)),r?.defaultPrevented}function pn(r){return e=>{for(const t of r)pr(e,t)}}function gie(r){return _m()?r.metaKey&&!r.ctrlKey:r.ctrlKey&&!r.metaKey}function ei(r){if(r)if(mie())r.focus({preventScroll:!0});else{const e=yie(r);r.focus(),vie(e)}}var sy=null;function mie(){if(sy==null){sy=!1;try{document.createElement("div").focus({get preventScroll(){return sy=!0,!0}})}catch{}}return sy}function yie(r){let e=r.parentNode;const t=[],n=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==n;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&t.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return n instanceof HTMLElement&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),t}function vie(r){for(const{element:e,scrollTop:t,scrollLeft:n}of r)e.scrollTop=t,e.scrollLeft=n}var qz=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],bie=[...qz,'[tabindex]:not([tabindex="-1"]):not([disabled])'],pR=`${qz.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,wie=bie.join(':not([hidden]):not([tabindex="-1"]),');function jz(r,e){const n=Array.from(r.querySelectorAll(pR)).filter(A8);return e&&A8(r)&&n.unshift(r),n.forEach((i,s)=>{if(Uz(i)&&i.contentDocument){const o=i.contentDocument.body,a=jz(o,!1);n.splice(s,1,...a)}}),n}function A8(r){return Vz(r)&&!xie(r)}function Vz(r){return r.matches(pR)&&gR(r)}function xie(r){return Number.parseInt(r.getAttribute("tabindex")||"0",10)<0}function gR(r,e){return r.nodeName!=="#comment"&&_ie(r)&&Sie(r,e)&&(!r.parentElement||gR(r.parentElement,r))}function _ie(r){if(!(r instanceof HTMLElement)&&!(r instanceof SVGElement))return!1;const{display:e,visibility:t}=r.style;let n=e!=="none"&&t!=="hidden"&&t!=="collapse";if(n){if(!r.ownerDocument.defaultView)return n;const{getComputedStyle:i}=r.ownerDocument.defaultView,{display:s,visibility:o}=i(r);n=s!=="none"&&o!=="hidden"&&o!=="collapse"}return n}function Sie(r,e){return!r.hasAttribute("hidden")&&(r.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?r.hasAttribute("open"):!0)}function Eie(r,e,t){const n=e?.tabbable?wie:pR,i=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return e?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(n)&&gR(s)&&(!e?.accept||e.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(i.currentNode=e.from),i}function I8(r){let e=r;for(;e&&!Aie(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function Aie(r){const e=window.getComputedStyle(r);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function Iie(){}function Kz(r,e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){return Math.min(Math.max(r,e),t)}function Cie(r){return[r.clientX,r.clientY]}function Hz(r,e){const[t,n]=r;let i=!1;const s=e.length;for(let o=s,a=0,c=o-1;a<o;c=a++){const[l,u]=e[a],[f,d]=e[c],[,h]=e[c===0?o-1:c-1]||[0,0],g=(u-d)*(t-l)-(l-f)*(n-u);if(d<u){if(n>=d&&n<u){if(g===0)return!0;g>0&&(n===d?n>h&&(i=!i):i=!i)}}else if(u<d){if(n>u&&n<=d){if(g===0)return!0;g<0&&(n===d?n<h&&(i=!i):i=!i)}}else if(n===u&&(t>=f&&t<=l||t>=l&&t<=f))return!0}return i}function Jt(r,e){return at(r,e)}var Gp=new Map,C8=new Set;function T8(){if(typeof window>"u")return;const r=t=>{if(!t.target)return;let n=Gp.get(t.target);n||(n=new Set,Gp.set(t.target,n),t.target.addEventListener("transitioncancel",e)),n.add(t.propertyName)},e=t=>{if(!t.target)return;const n=Gp.get(t.target);if(n&&(n.delete(t.propertyName),n.size===0&&(t.target.removeEventListener("transitioncancel",e),Gp.delete(t.target)),Gp.size===0)){for(const i of C8)i();C8.clear()}};document.body.addEventListener("transitionrun",r),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?T8():document.addEventListener("DOMContentLoaded",T8));function PI(r,e){const t=R8(r,e,"left"),n=R8(r,e,"top"),i=e.offsetWidth,s=e.offsetHeight;let o=r.scrollLeft,a=r.scrollTop;const c=o+r.offsetWidth,l=a+r.offsetHeight;t<=o?o=t:t+i>c&&(o+=t+i-c),n<=a?a=n:n+s>l&&(a+=n+s-l),r.scrollLeft=o,r.scrollTop=a}function R8(r,e,t){const n=t==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[n],e.offsetParent!==r);){if(e.offsetParent.contains(r)){i-=r[n];break}e=e.offsetParent}return i}function Tie(r,e){if(document.contains(r)){const t=document.scrollingElement||document.documentElement;if(window.getComputedStyle(t).overflow==="hidden"){let i=I8(r);for(;r&&i&&r!==t&&i!==t;)PI(i,r),r=i,i=I8(r)}else{const{left:i,top:s}=r.getBoundingClientRect();r?.scrollIntoView?.({block:"nearest"});const{left:o,top:a}=r.getBoundingClientRect();(Math.abs(i-o)>1||Math.abs(s-a)>1)&&r.scrollIntoView?.({block:"nearest"})}}}var mR={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"},rb="data-kb-top-layer",Wz,$I=!1,ml=[];function Bg(r){return ml.findIndex(e=>e.node===r)}function Rie(r){return ml[Bg(r)]}function kie(r){return ml[ml.length-1].node===r}function Gz(){return ml.filter(r=>r.isPointerBlocking)}function Oie(){return[...Gz()].slice(-1)[0]}function yR(){return Gz().length>0}function Yz(r){const e=Bg(Oie()?.node);return Bg(r)<e}function Pie(r){ml.push(r)}function $ie(r){const e=Bg(r);e<0||ml.splice(e,1)}function Die(){for(const{node:r}of ml)r.style.pointerEvents=Yz(r)?"none":"auto"}function Mie(r){if(yR()&&!$I){const e=Po(r);Wz=document.body.style.pointerEvents,e.body.style.pointerEvents="none",$I=!0}}function Bie(r){if(yR())return;const e=Po(r);e.body.style.pointerEvents=Wz,e.body.style.length===0&&e.body.removeAttribute("style"),$I=!1}var oo={layers:ml,isTopMostLayer:kie,hasPointerBlockingLayer:yR,isBelowPointerBlockingLayer:Yz,addLayer:Pie,removeLayer:$ie,indexOf:Bg,find:Rie,assignPointerEventToLayers:Die,disableBodyPointerEvents:Mie,restoreBodyPointerEvents:Bie},gx="focusScope.autoFocusOnMount",mx="focusScope.autoFocusOnUnmount",k8={bubbles:!1,cancelable:!0},O8={stack:[],active(){return this.stack[0]},add(r){r!==this.active()&&this.active()?.pause(),this.stack=OI(this.stack,r),this.stack.unshift(r)},remove(r){this.stack=OI(this.stack,r),this.active()?.resume()}};function vR(r,e){const[t,n]=Pe(!1),i={pause(){n(!0)},resume(){n(!1)}};let s=null;const o=g=>r.onMountAutoFocus?.(g),a=g=>r.onUnmountAutoFocus?.(g),c=()=>Po(e()),l=()=>{const g=c().createElement("span");return g.setAttribute("data-focus-trap",""),g.tabIndex=0,Object.assign(g.style,mR),g},u=()=>{const g=e();return g?jz(g,!0).filter(p=>!p.hasAttribute("data-focus-trap")):[]},f=()=>{const g=u();return g.length>0?g[0]:null},d=()=>{const g=u();return g.length>0?g[g.length-1]:null},h=()=>{const g=e();if(!g)return!1;const p=F0(g);return!p||bs(g,p)?!1:Vz(p)};ot(()=>{const g=e();if(!g)return;O8.add(i);const p=F0(g);if(!bs(g,p)){const y=new CustomEvent(gx,k8);g.addEventListener(gx,o),g.dispatchEvent(y),y.defaultPrevented||setTimeout(()=>{ei(f()),F0(g)===p&&ei(g)},0)}mt(()=>{g.removeEventListener(gx,o),setTimeout(()=>{const y=new CustomEvent(mx,k8);h()&&y.preventDefault(),g.addEventListener(mx,a),g.dispatchEvent(y),y.defaultPrevented||ei(p??c().body),g.removeEventListener(mx,a),O8.remove(i)},0)})}),ot(()=>{const g=e();if(!g||!We(r.trapFocus)||t())return;const p=y=>{const v=y.target;v?.closest(`[${rb}]`)||(bs(g,v)?s=v:ei(s))},m=y=>{const w=y.relatedTarget??F0(g);w?.closest(`[${rb}]`)||bs(g,w)||ei(s)};c().addEventListener("focusin",p),c().addEventListener("focusout",m),mt(()=>{c().removeEventListener("focusin",p),c().removeEventListener("focusout",m)})}),ot(()=>{const g=e();if(!g||!We(r.trapFocus)||t())return;const p=l();g.insertAdjacentElement("afterbegin",p);const m=l();g.insertAdjacentElement("beforeend",m);function y(w){const _=f(),x=d();w.relatedTarget===_?ei(x):ei(_)}p.addEventListener("focusin",y),m.addEventListener("focusin",y);const v=new MutationObserver(w=>{for(const _ of w)_.previousSibling===m&&(m.remove(),g.insertAdjacentElement("beforeend",m)),_.nextSibling===p&&(p.remove(),g.insertAdjacentElement("afterbegin",p))});v.observe(g,{childList:!0,subtree:!1}),mt(()=>{p.removeEventListener("focusin",y),m.removeEventListener("focusin",y),p.remove(),m.remove(),v.disconnect()})})}var Nie="data-live-announcer";function bR(r){ot(()=>{We(r.isDisabled)||mt(Lie(We(r.targets),We(r.root)))})}var Yp=new WeakMap,jo=[];function Lie(r,e=document.body){const t=new Set(r),n=new Set,i=c=>{for(const d of c.querySelectorAll(`[${Nie}], [${rb}]`))t.add(d);const l=d=>{if(t.has(d)||d.parentElement&&n.has(d.parentElement)&&d.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const h of t)if(d.contains(h))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:l}),f=l(c);if(f===NodeFilter.FILTER_ACCEPT&&s(c),f!==NodeFilter.FILTER_REJECT){let d=u.nextNode();for(;d!=null;)s(d),d=u.nextNode()}},s=c=>{const l=Yp.get(c)??0;c.getAttribute("aria-hidden")==="true"&&l===0||(l===0&&c.setAttribute("aria-hidden","true"),n.add(c),Yp.set(c,l+1))};jo.length&&jo[jo.length-1].disconnect(),i(e);const o=new MutationObserver(c=>{for(const l of c)if(!(l.type!=="childList"||l.addedNodes.length===0)&&![...t,...n].some(u=>u.contains(l.target))){for(const u of l.removedNodes)u instanceof Element&&(t.delete(u),n.delete(u));for(const u of l.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?t.add(u):u instanceof Element&&i(u)}});o.observe(e,{childList:!0,subtree:!0});const a={observe(){o.observe(e,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return jo.push(a),()=>{o.disconnect();for(const c of n){const l=Yp.get(c);if(l==null)return;l===1?(c.removeAttribute("aria-hidden"),Yp.delete(c)):Yp.set(c,l-1)}a===jo[jo.length-1]?(jo.pop(),jo.length&&jo[jo.length-1].observe()):jo.splice(jo.indexOf(a),1)}}var P8="interactOutside.pointerDownOutside",$8="interactOutside.focusOutside";function Fie(r,e){let t,n=Iie;const i=()=>Po(e()),s=f=>r.onPointerDownOutside?.(f),o=f=>r.onFocusOutside?.(f),a=f=>r.onInteractOutside?.(f),c=f=>{const d=f.target;return!(d instanceof HTMLElement)||d.closest(`[${rb}]`)||!bs(i(),d)||bs(e(),d)?!1:!r.shouldExcludeElement?.(d)},l=f=>{function d(){const h=e(),g=f.target;if(!h||!g||!c(f))return;const p=pn([s,a]);g.addEventListener(P8,p,{once:!0});const m=new CustomEvent(P8,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:f.button===2||gie(f)&&f.button===0}});g.dispatchEvent(m)}f.pointerType==="touch"?(i().removeEventListener("click",d),n=d,i().addEventListener("click",d,{once:!0})):d()},u=f=>{const d=e(),h=f.target;if(!d||!h||!c(f))return;const g=pn([o,a]);h.addEventListener($8,g,{once:!0});const p=new CustomEvent($8,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:!1}});h.dispatchEvent(p)};ot(()=>{We(r.isDisabled)||(t=window.setTimeout(()=>{i().addEventListener("pointerdown",l,!0)},0),i().addEventListener("focusin",u,!0),mt(()=>{window.clearTimeout(t),i().removeEventListener("click",n),i().removeEventListener("pointerdown",l,!0),i().removeEventListener("focusin",u,!0)}))})}function Uie(r){const e=t=>{t.key===dR.Escape&&r.onEscapeKeyDown?.(t)};ot(()=>{if(We(r.isDisabled))return;const t=r.ownerDocument?.()??Po();t.addEventListener("keydown",e),mt(()=>{t.removeEventListener("keydown",e)})})}function Ir(r){const[e,t]=Lt(r,["as"]);if(!e.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return A(HT,at(t,{get component(){return e.as}}))}var Jz=fn();function zie(){return rn(Jz)}function w1(r){let e;const t=zie(),[n,i]=Lt(r,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),o=f=>{s.add(f);const d=t?.registerNestedLayer(f);return()=>{s.delete(f),d?.()}};Fie({shouldExcludeElement:f=>e?n.excludedElements?.some(d=>bs(d(),f))||[...s].some(d=>bs(d,f)):!1,onPointerDownOutside:f=>{!e||oo.isBelowPointerBlockingLayer(e)||!n.bypassTopMostLayerCheck&&!oo.isTopMostLayer(e)||(n.onPointerDownOutside?.(f),n.onInteractOutside?.(f),f.defaultPrevented||n.onDismiss?.())},onFocusOutside:f=>{n.onFocusOutside?.(f),n.onInteractOutside?.(f),f.defaultPrevented||n.onDismiss?.()}},()=>e),Uie({ownerDocument:()=>Po(e),onEscapeKeyDown:f=>{!e||!oo.isTopMostLayer(e)||(n.onEscapeKeyDown?.(f),!f.defaultPrevented&&n.onDismiss&&(f.preventDefault(),n.onDismiss()))}}),mr(()=>{if(!e)return;oo.addLayer({node:e,isPointerBlocking:n.disableOutsidePointerEvents,dismiss:n.onDismiss});const f=t?.registerNestedLayer(e);oo.assignPointerEventToLayers(),oo.disableBodyPointerEvents(e),mt(()=>{e&&(oo.removeLayer(e),f?.(),oo.assignPointerEventToLayers(),oo.restoreBodyPointerEvents(e))})}),ot(Pn([()=>e,()=>n.disableOutsidePointerEvents],([f,d])=>{if(!f)return;const h=oo.find(f);h&&h.isPointerBlocking!==d&&(h.isPointerBlocking=d,oo.assignPointerEventToLayers()),d&&oo.disableBodyPointerEvents(f),mt(()=>{oo.restoreBodyPointerEvents(f)})},{defer:!0}));const u={registerNestedLayer:o};return A(Jz.Provider,{value:u,get children(){return A(Ir,at({as:"div",ref(f){var d=Sn(h=>e=h,n.ref);typeof d=="function"&&d(f)}},i))}})}function x1(r){const[e,t]=Pe(r.defaultValue?.()),n=Te(()=>r.value?.()!==void 0),i=Te(()=>n()?r.value?.():e());return[i,o=>{Sr(()=>{const a=sie(o,i());return Object.is(a,i())||(n()||t(a),r.onChange?.(a)),a})}]}function Xz(r){const[e,t]=x1(r);return[()=>e()??!1,t]}function qie(r){const[e,t]=x1(r);return[()=>e()??[],t]}function vp(r={}){const[e,t]=Xz({value:()=>We(r.open),defaultValue:()=>!!We(r.defaultOpen),onChange:o=>r.onOpenChange?.(o)}),n=()=>{t(!0)},i=()=>{t(!1)};return{isOpen:e,setIsOpen:t,open:n,close:i,toggle:()=>{e()?i():n()}}}function _1(r,e){const[t,n]=Pe(D8(e?.()));return ot(()=>{n(r()?.tagName.toLowerCase()||D8(e?.()))}),t}function D8(r){return ih(r)?r:void 0}var jie=Object.defineProperty,Ec=(r,e)=>{for(var t in e)jie(r,t,{get:e[t],enumerable:!0})},Vie={};Ec(Vie,{Button:()=>Wie,Root:()=>fd});var Kie=["button","color","file","image","reset","submit"];function Hie(r){const e=r.tagName.toLowerCase();return e==="button"?!0:e==="input"&&r.type?Kie.indexOf(r.type)!==-1:!1}function fd(r){let e;const t=Jt({type:"button"},r),[n,i]=Lt(t,["ref","type","disabled"]),s=_1(()=>e,()=>"button"),o=Te(()=>{const l=s();return l==null?!1:Hie({tagName:l,type:n.type})}),a=Te(()=>s()==="input"),c=Te(()=>s()==="a"&&e?.getAttribute("href")!=null);return A(Ir,at({as:"button",ref(l){var u=Sn(f=>e=f,n.ref);typeof u=="function"&&u(l)},get type(){return o()||a()?n.type:void 0},get role(){return!o()&&!c()?"button":void 0},get tabIndex(){return!o()&&!c()&&!n.disabled?0:void 0},get disabled(){return o()||a()?n.disabled:void 0},get"aria-disabled"(){return!o()&&!a()&&n.disabled?!0:void 0},get"data-disabled"(){return n.disabled?"":void 0}},i))}var Wie=fd;function ni(r){return e=>(r(e),()=>r(void 0))}var ds=r=>typeof r=="function"?r():r,DI=(r,e)=>{if(r.contains(e))return!0;let t=e;for(;t;){if(t===r)return!0;t=t._$host??t.parentElement}return!1},oy=new Map,Gie=r=>{ot(()=>{const e=ds(r.style)??{},t=ds(r.properties)??[],n={};for(const s in e)n[s]=r.element.style[s];const i=oy.get(r.key);i?i.activeCount++:oy.set(r.key,{activeCount:1,originalStyles:n,properties:t.map(s=>s.key)}),Object.assign(r.element.style,r.style);for(const s of t)r.element.style.setProperty(s.key,s.value);mt(()=>{const s=oy.get(r.key);if(s){if(s.activeCount!==1){s.activeCount--;return}oy.delete(r.key);for(const[o,a]of Object.entries(s.originalStyles))r.element.style[o]=a;for(const o of s.properties)r.element.style.removeProperty(o);r.element.style.length===0&&r.element.removeAttribute("style"),r.cleanup?.()}})})},M8=Gie,Yie=(r,e)=>{switch(e){case"x":return[r.clientWidth,r.scrollLeft,r.scrollWidth];case"y":return[r.clientHeight,r.scrollTop,r.scrollHeight]}},Jie=(r,e)=>{const t=getComputedStyle(r),n=e==="x"?t.overflowX:t.overflowY;return n==="auto"||n==="scroll"||r.tagName==="HTML"&&n==="visible"},Xie=(r,e,t)=>{const n=e==="x"&&window.getComputedStyle(r).direction==="rtl"?-1:1;let i=r,s=0,o=0,a=!1;do{const[c,l,u]=Yie(i,e),f=u-c-n*l;(l!==0||f!==0)&&Jie(i,e)&&(s+=f,o+=l),i===(t??document.documentElement)?a=!0:i=i._$host??i.parentElement}while(i&&!a);return[s,o]},[B8,N8]=Pe([]),Zie=r=>B8().indexOf(r)===B8().length-1,Qie=r=>{const e=at({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},r),t=Ti();let n=[0,0],i=null,s=null;ot(()=>{ds(e.enabled)&&(N8(l=>[...l,t]),mt(()=>{N8(l=>l.filter(u=>u!==t))}))}),ot(()=>{if(!ds(e.enabled)||!ds(e.hideScrollbar))return;const{body:l}=document,u=window.innerWidth-l.offsetWidth;if(ds(e.preventScrollbarShift)){const f={overflow:"hidden"},d=[];u>0&&(ds(e.preventScrollbarShiftMode)==="padding"?f.paddingRight=`calc(${window.getComputedStyle(l).paddingRight} + ${u}px)`:f.marginRight=`calc(${window.getComputedStyle(l).marginRight} + ${u}px)`,d.push({key:"--scrollbar-width",value:`${u}px`}));const h=window.scrollY,g=window.scrollX;M8({key:"prevent-scroll",element:l,style:f,properties:d,cleanup:()=>{ds(e.restoreScrollPosition)&&u>0&&window.scrollTo(g,h)}})}else M8({key:"prevent-scroll",element:l,style:{overflow:"hidden"}})}),ot(()=>{!Zie(t)||!ds(e.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),mt(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",c)}))});const o=l=>{n=L8(l),i=null,s=null},a=l=>{const u=l.target,f=ds(e.element),d=ese(l),h=Math.abs(d[0])>Math.abs(d[1])?"x":"y",g=h==="x"?d[0]:d[1],p=F8(u,h,g,f);let m;f&&DI(f,u)?m=!p:m=!0,m&&l.cancelable&&l.preventDefault()},c=l=>{const u=ds(e.element),f=l.target;let d;if(l.touches.length===2)d=!ds(e.allowPinchZoom);else{if(i==null||s===null){const h=L8(l).map((p,m)=>n[m]-p),g=Math.abs(h[0])>Math.abs(h[1])?"x":"y";i=g,s=g==="x"?h[0]:h[1]}if(f.type==="range")d=!1;else{const h=F8(f,i,s,u);u&&DI(u,f)?d=!h:d=!0}}d&&l.cancelable&&l.preventDefault()}},ese=r=>[r.deltaX,r.deltaY],L8=r=>r.changedTouches[0]?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0],F8=(r,e,t,n)=>{const i=n!==null&&DI(n,r),[s,o]=Xie(r,e,i?n:void 0);return!(t>0&&Math.abs(s)<=1||t<0&&Math.abs(o)<1)},tse=Qie,wR=tse,rse=r=>{const e=Te(()=>{const o=ds(r.element);if(o)return getComputedStyle(o)}),t=()=>e()?.animationName??"none",[n,i]=Pe(ds(r.show)?"present":"hidden");let s="none";return ot(o=>{const a=ds(r.show);return Sr(()=>{if(o===a)return a;const c=s,l=t();a?i("present"):l==="none"||e()?.display==="none"?i("hidden"):i(o===!0&&c!==l?"hiding":"hidden")}),a}),ot(()=>{const o=ds(r.element);if(!o)return;const a=l=>{l.target===o&&(s=t())},c=l=>{const f=t().includes(l.animationName);l.target===o&&f&&n()==="hiding"&&i("hidden")};o.addEventListener("animationstart",a),o.addEventListener("animationcancel",c),o.addEventListener("animationend",c),mt(()=>{o.removeEventListener("animationstart",a),o.removeEventListener("animationcancel",c),o.removeEventListener("animationend",c)})}),{present:()=>n()==="present"||n()==="hiding",state:n,setState:i}},nse=rse,Kh=nse,ise={};Ec(ise,{CloseButton:()=>Qz,Content:()=>eq,Description:()=>tq,Dialog:()=>ti,Overlay:()=>rq,Portal:()=>nq,Root:()=>iq,Title:()=>sq,Trigger:()=>oq,useDialogContext:()=>Ku});var Zz=fn();function Ku(){const r=rn(Zz);if(r===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return r}function Qz(r){const e=Ku(),[t,n]=Lt(r,["aria-label","onClick"]);return A(fd,at({get"aria-label"(){return t["aria-label"]||e.translations().dismiss},onClick:s=>{pr(s,t.onClick),e.close()}},n))}function eq(r){let e;const t=Ku(),n=Jt({id:t.generateId("content")},r),[i,s]=Lt(n,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let o=!1,a=!1;const c=d=>{i.onPointerDownOutside?.(d),t.modal()&&d.detail.isContextMenu&&d.preventDefault()},l=d=>{i.onFocusOutside?.(d),t.modal()&&d.preventDefault()},u=d=>{i.onInteractOutside?.(d),!t.modal()&&(d.defaultPrevented||(o=!0,d.detail.originalEvent.type==="pointerdown"&&(a=!0)),bs(t.triggerRef(),d.target)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&a&&d.preventDefault())},f=d=>{i.onCloseAutoFocus?.(d),t.modal()?(d.preventDefault(),ei(t.triggerRef())):(d.defaultPrevented||(o||ei(t.triggerRef()),d.preventDefault()),o=!1,a=!1)};return bR({isDisabled:()=>!(t.isOpen()&&t.modal()),targets:()=>e?[e]:[]}),wR({element:()=>e??null,enabled:()=>t.contentPresent()&&t.preventScroll()}),vR({trapFocus:()=>t.isOpen()&&t.modal(),onMountAutoFocus:i.onOpenAutoFocus,onUnmountAutoFocus:f},()=>e),ot(()=>mt(t.registerContentId(s.id))),A(Oe,{get when(){return t.contentPresent()},get children(){return A(w1,at({ref(d){var h=Sn(g=>{t.setContentRef(g),e=g},i.ref);typeof h=="function"&&h(d)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return kr(()=>!!t.modal())()&&t.isOpen()},get excludedElements(){return[t.triggerRef]},get"aria-labelledby"(){return t.titleId()},get"aria-describedby"(){return t.descriptionId()},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,get onDismiss(){return t.close}},s))}})}function tq(r){const e=Ku(),t=Jt({id:e.generateId("description")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerDescriptionId(n.id))),A(Ir,at({as:"p",get id(){return n.id}},i))}function rq(r){const e=Ku(),[t,n]=Lt(r,["ref","style","onPointerDown"]),i=s=>{pr(s,t.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return A(Oe,{get when(){return e.overlayPresent()},get children(){return A(Ir,at({as:"div",ref(s){var o=Sn(e.setOverlayRef,t.ref);typeof o=="function"&&o(s)},get style(){return Sc({"pointer-events":"auto"},t.style)},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onPointerDown:i},n))}})}function nq(r){const e=Ku();return A(Oe,{get when(){return e.contentPresent()||e.overlayPresent()},get children(){return A(g1,r)}})}var U8={dismiss:"Dismiss"};function iq(r){const e=`dialog-${Ti()}`,t=Jt({id:e,modal:!0,translations:U8},r),[n,i]=Pe(),[s,o]=Pe(),[a,c]=Pe(),[l,u]=Pe(),[f,d]=Pe(),[h,g]=Pe(),p=vp({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:_=>t.onOpenChange?.(_)}),m=()=>t.forceMount||p.isOpen(),{present:y}=Kh({show:m,element:()=>l()??null}),{present:v}=Kh({show:m,element:()=>f()??null}),w={translations:()=>t.translations??U8,isOpen:p.isOpen,modal:()=>t.modal??!0,preventScroll:()=>t.preventScroll??w.modal(),contentId:n,titleId:s,descriptionId:a,triggerRef:h,overlayRef:l,setOverlayRef:u,contentRef:f,setContentRef:d,overlayPresent:y,contentPresent:v,close:p.close,toggle:p.toggle,setTriggerRef:g,generateId:Mo(()=>t.id),registerContentId:ni(i),registerTitleId:ni(o),registerDescriptionId:ni(c)};return A(Zz.Provider,{value:w,get children(){return t.children}})}function sq(r){const e=Ku(),t=Jt({id:e.generateId("title")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerTitleId(n.id))),A(Ir,at({as:"h2",get id(){return n.id}},i))}function oq(r){const e=Ku(),[t,n]=Lt(r,["ref","onClick"]);return A(fd,at({ref(s){var o=Sn(e.setTriggerRef,t.ref);typeof o=="function"&&o(s)},"aria-haspopup":"dialog",get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return kr(()=>!!e.isOpen())()?e.contentId():void 0},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onClick:s=>{pr(s,t.onClick),e.toggle()}},n))}var ti=Object.assign(iq,{CloseButton:Qz,Content:eq,Description:tq,Overlay:rq,Portal:nq,Title:sq,Trigger:oq}),sse=le('<div><div class="i-tabler:chevron-up size-6 text-zinc-400">'),ose=le('<div><div class="i-tabler:chevron-down size-6 text-zinc-400">'),ase=le("<div class=relative><div>");const bp=r=>{const[e,t]=Pe(!1),[n,i]=Pe(!1);let s;function o(){t(s.scrollTop>5),i(s.scrollTop<s.scrollHeight-s.clientHeight-5)}return mr(()=>{const a=new ResizeObserver(()=>o());a.observe(s),mt(()=>a.disconnect())}),(()=>{var a=ase(),c=a.firstChild;return Z(a,A(Oe,{get when(){return e()},get children(){var l=sse();return Ge(()=>tn(l,gr("z-1 absolute top-0 left-0 w-full h-12 bg-linear-to-t from-zinc-900/0 to-zinc-900 pointer-events-none flex justify-center items-start",r.gradientClass))),l}}),c),c.addEventListener("scroll",()=>o()),cd(l=>s=l,c),Z(c,()=>r.children),Z(a,A(Oe,{get when(){return n()},get children(){var l=ose();return Ge(()=>tn(l,gr("z-1 absolute bottom-0 left-0 w-full h-12 bg-linear-to-b from-zinc-900/0 to-zinc-900 pointer-events-none flex justify-center items-end",r.gradientClass))),l}}),null),Ge(()=>tn(c,gr("overflow-y-scroll",r.class))),a})()};var z8=le('<button class="py-2 px-4 text-center cursor-pointer bg-zinc-800 active:bg-zinc-800/75 font-semibold rounded-md text-zinc-300 transition-100">'),cse=le('<button class="py-2 px-4 text-center cursor-pointer font-semibold rounded-md transition-100">'),lse=le('<div class="i-tabler:x size-5">'),use=le('<div class="flex items-center justify-between border-b border-zinc-700 p-4">'),fse=le("<div>"),dse=le('<div class="fixed inset-0 flex items-center justify-center z-101">'),hse=le('<div class="flex items-center justify-end gap-2">');const aq=fn(),pse=r=>{const[e,t]=Pe(null);function n(s){if("onConfirm"in s){t({...s,actions:s.actions??[(()=>{var o=z8();return o.$$click=()=>i(!1),Z(o,A(Oe,{get when(){return s.cancelText},fallback:"Cancel",get children(){return s.cancelText}})),o})(),(()=>{var o=cse();return o.$$click=()=>{s.onConfirm(),i(!1)},Z(o,A(Oe,{get when(){return s.confirmText},fallback:"Confirm",get children(){return s.confirmText}})),Ge(a=>nr(o,{"bg-primary-200 active:bg-primary-200/80 text-zinc-950":!s.confirmStyle||s.confirmStyle==="primary","bg-red-500 active:bg-red-700":s.confirmStyle==="danger"},a)),o})()]});return}if("okText"in s){t({...s,actions:s.actions??[(()=>{var o=z8();return o.$$click=()=>i(!1),Z(o,()=>s.okText),o})()]});return}t({...s,actions:s.actions})}function i(s){s||(e()?.onClose?.(),t(null))}return A(aq.Provider,{value:{open:n,confirm:n,alert:s=>n({...s,okText:"OK"})},get children(){return[kr(()=>r.children),A(ti,{get open(){return!!e()},onOpenChange:i,get children(){return A(ti.Portal,{get children(){return[A(ti.Overlay,{class:"fixed inset-0 backdrop-blur z-100"}),(()=>{var s=dse();return Z(s,A(ti.Content,{class:"bg-zinc-900 rounded-md max-w-95vw w-md ring-1 ring-zinc-700",get children(){return[(()=>{var o=use();return Z(o,A(ti.Title,{class:"font-semibold",get children(){return e()?.title}}),null),Z(o,A(ti.CloseButton,{class:"cursor-pointer bg-zinc-900 hover:bg-zinc-800 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return lse()}}),null),o})(),A(bp,{class:"max-h-70vh",gradientClass:"rounded-md",get children(){return A(ti.Description,{class:"p-4 space-y-4",get children(){return[(()=>{var o=fse();return Z(o,()=>e()?.content),o})(),A(Oe,{get when(){return e()?.actions},children:o=>(()=>{var a=hse();return Z(a,A(pt,{get each(){return o()},children:c=>c})),a})()})]}})}})]}})),s})()]}})}})]}})},ci=()=>{const r=rn(aq);if(!r)throw new Error("useModal must be used within a ModalProvider");return r};At(["click"]);const Pf=(r,e,t)=>{const n=t(r,e);return mt(()=>clearInterval(n))},gse=(r,e,t)=>{if(typeof e=="number"){Pf(r,e,t);return}let n=!1,i=performance.now(),s=0,o=!1;const a=()=>{Sr(r),i=performance.now(),n=t===setTimeout};ot(c=>{if(n)return;const l=e();if(l===!1)return c&&(s+=(performance.now()-i)/c),l;if(c===!1&&(i=performance.now()),o){if(c&&(s+=(performance.now()-i)/c),i=performance.now(),s>=1)s=0,a();else if(s>0){const[u,f]=Pe(void 0,{equals:!1});return u(),Pf(()=>{s=0,o=!1,f(),a()},(1-s)*l,setTimeout),l}}return o=!0,Pf(a,l,t),l})},ay={CLEAN:"CLEAN",LOCKED:"LOCKED",UNLOCKED:"UNLOCKED"},yx=Qe.HOME,[mse,yse]=El(()=>{const r=ld(),e=Gn(),{settings:t,updateUserSettings:n,refresh:i}=xi(),[s,o]=Pe(!1),[a,c]=Pe([]),l=Te(()=>a().at(t.selectedAccountIdx));let u=null;async function f(){const[{accounts:m},{state:y}]=await Promise.all([qt.getAccounts(),qt.getWalletState()]);In(()=>{c(m),y===ay.LOCKED&&e(Qe.UNLOCK)})}y1(window,"focus",()=>f()),Pf(()=>f(),6e4,setInterval);async function d(m){await qt.unlock(m),await Promise.all([i(),f()]),e(u||yx,{replace:!0}),u=null}async function h(){await qt.lock(),await f(),e(Qe.UNLOCK)}async function g(m){await qt.import(m),await f()}async function p(m){await n({type:"setAccountsOrder",addresses:m}),await f()}return mr(async()=>{const{state:m}=await qt.getWalletState();switch(m){case ay.CLEAN:r.pathname!==Qe.ONBOARD&&(await yi.tabs.create({url:"popup.html#"+Qe.ONBOARD}),window.close());break;case ay.LOCKED:r.pathname!==Qe.UNLOCK&&(u=r.pathname===Qe.ROOT?yx:r.pathname+r.search,e(Qe.UNLOCK));break;case ay.UNLOCKED:await Promise.all([i(),f()]),!r.pathname.startsWith("/approve/")&&!r.pathname.startsWith("/assets/")&&!r.pathname.startsWith(Qe.SETTINGS)&&r.pathname!==Qe.SEND&&r.pathname!==Qe.SWAP&&r.pathname!==Qe.RECEIVE&&r.pathname!==Qe.ONBOARD&&r.pathname!==Qe.PNL&&r.pathname!==Qe.ADDRESS_BOOK&&r.pathname!==Qe.ADDRESS_BOOK_SAVE&&r.pathname!==Qe.TOKEN_RECLAIM&&e(yx,{replace:!0});break}requestAnimationFrame(()=>{o(!0)})}),{isReady:s,refresh:f,importWallet:g,unlock:d,lock:h,accounts:a,updateAccountsOrder:p,selectedAccount:l}}),Jr=()=>{const r=yse();if(!r)throw new Error("useWallet must be used within a WalletProvider");return r};var vse=le('<div class="fixed inset-0 w-full h-full bg-zinc-950 z-100">');const cq=r=>A(Oe,{get when(){return r.isVisible},get children(){return vse()}});function lq(r={}){const[e,t]=Xz({value:()=>We(r.isSelected),defaultValue:()=>!!We(r.defaultIsSelected),onChange:s=>r.onSelectedChange?.(s)});return{isSelected:e,setIsSelected:s=>{!We(r.isReadOnly)&&!We(r.isDisabled)&&t(s)},toggle:()=>{!We(r.isReadOnly)&&!We(r.isDisabled)&&t(!e())}}}function uq(r){let e=r.startIndex??0;const t=r.startLevel??0,n=[],i=c=>{if(c==null)return"";const l=r.getKey??"key",u=ih(l)?c[l]:l(c);return u!=null?String(u):""},s=c=>{if(c==null)return"";const l=r.getTextValue??"textValue",u=ih(l)?c[l]:l(c);return u!=null?String(u):""},o=c=>{if(c==null)return!1;const l=r.getDisabled??"disabled";return(ih(l)?c[l]:l(c))??!1},a=c=>{if(c!=null)return ih(r.getSectionChildren)?c[r.getSectionChildren]:r.getSectionChildren?.(c)};for(const c of r.dataSource){if(ih(c)||cie(c)){n.push({type:"item",rawValue:c,key:String(c),textValue:String(c),disabled:o(c),level:t,index:e}),e++;continue}if(a(c)!=null){n.push({type:"section",rawValue:c,key:"",textValue:"",disabled:!1,level:t,index:e}),e++;const l=a(c)??[];if(l.length>0){const u=uq({dataSource:l,getKey:r.getKey,getTextValue:r.getTextValue,getDisabled:r.getDisabled,getSectionChildren:r.getSectionChildren,startIndex:e,startLevel:t+1});n.push(...u),e+=u.length}}else n.push({type:"item",rawValue:c,key:i(c),textValue:s(c),disabled:o(c),level:t,index:e}),e++}return n}function bse(r,e=[]){return Te(()=>{const t=uq({dataSource:We(r.dataSource),getKey:We(r.getKey),getTextValue:We(r.getTextValue),getDisabled:We(r.getDisabled),getSectionChildren:We(r.getSectionChildren)});for(let n=0;n<e.length;n++)e[n]();return r.factory(t)})}let vx=new Map,MI=!1;try{MI=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let nb=!1;try{nb=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const fq={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class wse{format(e){let t="";if(!MI&&this.options.signDisplay!=null?t=_se(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!nb){var n;let{unit:i,unitDisplay:s="short",locale:o}=this.resolvedOptions();if(!i)return t;let a=(n=fq[i])===null||n===void 0?void 0:n[s];t+=a[o]||a.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)}  ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let n=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(t);return[...n.map(s=>({...s,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!MI&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!nb&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=xse(e,t),this.options=t}}function xse(r,e={}){let{numberingSystem:t}=e;if(t&&r.includes("-nu-")&&(r.includes("-u-")||(r+="-u-"),r+=`-nu-${t}`),e.style==="unit"&&!nb){var n;let{unit:o,unitDisplay:a="short"}=e;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((n=fq[o])===null||n===void 0)&&n[a]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${a}`);e={...e,style:"decimal"}}let i=r+(e?Object.entries(e).sort((o,a)=>o[0]<a[0]?-1:1).join():"");if(vx.has(i))return vx.get(i);let s=new Intl.NumberFormat(r,e);return vx.set(i,s),s}function _se(r,e,t){if(e==="auto")return r.format(t);if(e==="never")return r.format(Math.abs(t));{let n=!1;if(e==="always"?n=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):n=t>0),n){let i=r.format(-t),s=r.format(t),o=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(o,"+").replace("!!!",s)}else return r.format(t)}}var Sse=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Ese=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Ase(r){if(Intl.Locale){const t=new Intl.Locale(r).maximize().script??"";return Sse.has(t)}const e=r.split("-")[0];return Ese.has(e)}function Ise(r){return Ase(r)?"rtl":"ltr"}function dq(){let r=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([r])}catch{r="en-US"}return{locale:r,direction:Ise(r)}}var BI=dq(),U0=new Set;function q8(){BI=dq();for(const r of U0)r(BI)}function Cse(){const[r,e]=Pe(BI),t=Te(()=>r());return mr(()=>{U0.size===0&&window.addEventListener("languagechange",q8),U0.add(e),mt(()=>{U0.delete(e),U0.size===0&&window.removeEventListener("languagechange",q8)})}),{locale:()=>t().locale,direction:()=>t().direction}}var Tse=fn();function Il(){const r=Cse();return rn(Tse)||r}var bx=new Map;function hq(r){const{locale:e}=Il(),t=Te(()=>e()+(r?Object.entries(r).sort((n,i)=>n[0]<i[0]?-1:1).join():""));return Te(()=>{const n=t();let i;return bx.has(n)&&(i=bx.get(n)),i||(i=new Intl.Collator(e(),r),bx.set(n,i)),i})}function pq(r){const{locale:e}=Il();return Te(()=>new wse(e(),We(r)))}var ac=class gq extends Set{anchorKey;currentKey;constructor(e,t,n){super(e),e instanceof gq?(this.anchorKey=t||e.anchorKey,this.currentKey=n||e.currentKey):(this.anchorKey=t,this.currentKey=n)}};function Rse(r){const[e,t]=x1(r);return[()=>e()??new ac,t]}function mq(r){return die()?r.altKey:r.ctrlKey}function sh(r){return _m()?r.metaKey:r.ctrlKey}function j8(r){return new ac(r)}function yq(r,e){if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function kse(r){const e=Jt({selectionMode:"none",selectionBehavior:"toggle"},r),[t,n]=Pe(!1),[i,s]=Pe(),o=Te(()=>{const p=We(e.selectedKeys);return p!=null?j8(p):p}),a=Te(()=>{const p=We(e.defaultSelectedKeys);return p!=null?j8(p):new ac}),[c,l]=Rse({value:o,defaultValue:a,onChange:p=>e.onSelectionChange?.(p)}),[u,f]=Pe(We(e.selectionBehavior)),d=()=>We(e.selectionMode),h=()=>We(e.disallowEmptySelection)??!1,g=p=>{(We(e.allowDuplicateSelectionEvents)||!yq(p,c()))&&l(p)};return ot(()=>{const p=c();We(e.selectionBehavior)==="replace"&&u()==="toggle"&&typeof p=="object"&&p.size===0&&f("replace")}),ot(()=>{f(We(e.selectionBehavior)??"toggle")}),{selectionMode:d,disallowEmptySelection:h,selectionBehavior:u,setSelectionBehavior:f,isFocused:t,setFocused:n,focusedKey:i,setFocusedKey:s,selectedKeys:c,setSelectedKeys:g}}function vq(r){const[e,t]=Pe(""),[n,i]=Pe(-1);return{typeSelectHandlers:{onKeyDown:o=>{if(We(r.isDisabled))return;const a=We(r.keyboardDelegate),c=We(r.selectionManager);if(!a.getKeyForSearch)return;const l=Ose(o.key);if(!l||o.ctrlKey||o.metaKey)return;l===" "&&e().trim().length>0&&(o.preventDefault(),o.stopPropagation());let u=t(d=>d+l),f=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u);f==null&&Pse(u)&&(u=u[0],f=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u)),f!=null&&(c.setFocusedKey(f),r.onTypeSelect?.(f)),clearTimeout(n()),i(window.setTimeout(()=>t(""),500))}}}}function Ose(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function Pse(r){return r.split("").every(e=>e===r[0])}function $se(r,e,t){const i=at({selectOnFocus:()=>We(r.selectionManager).selectionBehavior()==="replace"},r),s=()=>t?.()??e(),{direction:o}=Il();let a={top:0,left:0};ez(()=>We(i.isVirtualized)?void 0:s(),"scroll",()=>{const m=s();m&&(a={top:m.scrollTop,left:m.scrollLeft})});const{typeSelectHandlers:c}=vq({isDisabled:()=>We(i.disallowTypeAhead),keyboardDelegate:()=>We(i.keyboardDelegate),selectionManager:()=>We(i.selectionManager)}),l=()=>We(i.orientation)??"vertical",u=m=>{pr(m,c.onKeyDown),m.altKey&&m.key==="Tab"&&m.preventDefault();const y=e();if(!y?.contains(m.target))return;const v=We(i.selectionManager),w=We(i.selectOnFocus),_=T=>{T!=null&&(v.setFocusedKey(T),m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(T):w&&!mq(m)&&v.replaceSelection(T))},x=We(i.keyboardDelegate),E=We(i.shouldFocusWrap),S=v.focusedKey();switch(m.key){case(l()==="vertical"?"ArrowDown":"ArrowRight"):{if(x.getKeyBelow){m.preventDefault();let T;S!=null?T=x.getKeyBelow(S):T=x.getFirstKey?.(),T==null&&E&&(T=x.getFirstKey?.(S)),_(T)}break}case(l()==="vertical"?"ArrowUp":"ArrowLeft"):{if(x.getKeyAbove){m.preventDefault();let T;S!=null?T=x.getKeyAbove(S):T=x.getLastKey?.(),T==null&&E&&(T=x.getLastKey?.(S)),_(T)}break}case(l()==="vertical"?"ArrowLeft":"ArrowUp"):{if(x.getKeyLeftOf){m.preventDefault();const T=o()==="rtl";let C;S!=null?C=x.getKeyLeftOf(S):C=T?x.getFirstKey?.():x.getLastKey?.(),_(C)}break}case(l()==="vertical"?"ArrowRight":"ArrowDown"):{if(x.getKeyRightOf){m.preventDefault();const T=o()==="rtl";let C;S!=null?C=x.getKeyRightOf(S):C=T?x.getLastKey?.():x.getFirstKey?.(),_(C)}break}case"Home":if(x.getFirstKey){m.preventDefault();const T=x.getFirstKey(S,sh(m));T!=null&&(v.setFocusedKey(T),sh(m)&&m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(T):w&&v.replaceSelection(T))}break;case"End":if(x.getLastKey){m.preventDefault();const T=x.getLastKey(S,sh(m));T!=null&&(v.setFocusedKey(T),sh(m)&&m.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(T):w&&v.replaceSelection(T))}break;case"PageDown":if(x.getKeyPageBelow&&S!=null){m.preventDefault();const T=x.getKeyPageBelow(S);_(T)}break;case"PageUp":if(x.getKeyPageAbove&&S!=null){m.preventDefault();const T=x.getKeyPageAbove(S);_(T)}break;case"a":sh(m)&&v.selectionMode()==="multiple"&&We(i.disallowSelectAll)!==!0&&(m.preventDefault(),v.selectAll());break;case"Escape":m.defaultPrevented||(m.preventDefault(),We(i.disallowEmptySelection)||v.clearSelection());break;case"Tab":if(!We(i.allowsTabNavigation)){if(m.shiftKey)y.focus();else{const T=Eie(y,{tabbable:!0});let C,P;do P=T.lastChild(),P&&(C=P);while(P);C&&!C.contains(document.activeElement)&&ei(C)}break}}},f=m=>{const y=We(i.selectionManager),v=We(i.keyboardDelegate),w=We(i.selectOnFocus);if(y.isFocused()){m.currentTarget.contains(m.target)||y.setFocused(!1);return}if(m.currentTarget.contains(m.target)){if(y.setFocused(!0),y.focusedKey()==null){const _=E=>{E!=null&&(y.setFocusedKey(E),w&&y.replaceSelection(E))},x=m.relatedTarget;x&&m.currentTarget.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?_(y.lastSelectedKey()??v.getLastKey?.()):_(y.firstSelectedKey()??v.getFirstKey?.())}else if(!We(i.isVirtualized)){const _=s();if(_){_.scrollTop=a.top,_.scrollLeft=a.left;const x=_.querySelector(`[data-key="${y.focusedKey()}"]`);x&&(ei(x),PI(_,x))}}}},d=m=>{const y=We(i.selectionManager);m.currentTarget.contains(m.relatedTarget)||y.setFocused(!1)},h=m=>{s()===m.target&&m.preventDefault()},g=()=>{const m=We(i.autoFocus);if(!m)return;const y=We(i.selectionManager),v=We(i.keyboardDelegate);let w;m==="first"&&(w=v.getFirstKey?.()),m==="last"&&(w=v.getLastKey?.());const _=y.selectedKeys();_.size&&(w=_.values().next().value),y.setFocused(!0),y.setFocusedKey(w);const x=e();x&&w==null&&!We(i.shouldUseVirtualFocus)&&ei(x)};return mr(()=>{i.deferAutoFocus?setTimeout(g,0):g()}),ot(Pn([s,()=>We(i.isVirtualized),()=>We(i.selectionManager).focusedKey()],m=>{const[y,v,w]=m;if(v)w&&i.scrollToKey?.(w);else if(w&&y){const _=y.querySelector(`[data-key="${w}"]`);_&&PI(y,_)}})),{tabIndex:Te(()=>{if(!We(i.shouldUseVirtualFocus))return We(i.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:h,onFocusIn:f,onFocusOut:d}}function xR(r,e){const t=()=>We(r.selectionManager),n=()=>We(r.key),i=()=>We(r.shouldUseVirtualFocus),s=v=>{t().selectionMode()!=="none"&&(t().selectionMode()==="single"?t().isSelected(n())&&!t().disallowEmptySelection()?t().toggleSelection(n()):t().replaceSelection(n()):v?.shiftKey?t().extendSelection(n()):t().selectionBehavior()==="toggle"||sh(v)||"pointerType"in v&&v.pointerType==="touch"?t().toggleSelection(n()):t().replaceSelection(n()))},o=()=>t().isSelected(n()),a=()=>We(r.disabled)||t().isDisabled(n()),c=()=>!a()&&t().canSelectItem(n());let l=null;const u=v=>{c()&&(l=v.pointerType,v.pointerType==="mouse"&&v.button===0&&!We(r.shouldSelectOnPressUp)&&s(v))},f=v=>{c()&&v.pointerType==="mouse"&&v.button===0&&We(r.shouldSelectOnPressUp)&&We(r.allowsDifferentPressOrigin)&&s(v)},d=v=>{c()&&(We(r.shouldSelectOnPressUp)&&!We(r.allowsDifferentPressOrigin)||l!=="mouse")&&s(v)},h=v=>{!c()||!["Enter"," "].includes(v.key)||(mq(v)?t().toggleSelection(n()):s(v))},g=v=>{a()&&v.preventDefault()},p=v=>{const w=e();i()||a()||!w||v.target===w&&t().setFocusedKey(n())},m=Te(()=>{if(!(i()||a()))return n()===t().focusedKey()?0:-1}),y=Te(()=>We(r.virtualized)?void 0:n());return ot(Pn([e,n,i,()=>t().focusedKey(),()=>t().isFocused()],([v,w,_,x,E])=>{v&&w===x&&E&&!_&&document.activeElement!==v&&(r.focus?r.focus():ei(v))})),{isSelected:o,isDisabled:a,allowsSelection:c,tabIndex:m,dataKey:y,onPointerDown:u,onPointerUp:f,onClick:d,onKeyDown:h,onMouseDown:g,onFocus:p}}var Dse=class{collection;state;constructor(r,e){this.collection=r,this.state=e}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(r){this.state.setSelectionBehavior(r)}isFocused(){return this.state.isFocused()}setFocused(r){this.state.setFocused(r)}focusedKey(){return this.state.focusedKey()}setFocusedKey(r){(r==null||this.collection().getItem(r))&&this.state.setFocusedKey(r)}selectedKeys(){return this.state.selectedKeys()}isSelected(r){if(this.state.selectionMode()==="none")return!1;const e=this.getKey(r);return e==null?!1:this.state.selectedKeys().has(e)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const r=this.state.selectedKeys();return this.getAllSelectableKeys().every(e=>r.has(e))}firstSelectedKey(){let r;for(const e of this.state.selectedKeys()){const t=this.collection().getItem(e),n=t?.index!=null&&r?.index!=null&&t.index<r.index;(!r||n)&&(r=t)}return r?.key}lastSelectedKey(){let r;for(const e of this.state.selectedKeys()){const t=this.collection().getItem(e),n=t?.index!=null&&r?.index!=null&&t.index>r.index;(!r||n)&&(r=t)}return r?.key}extendSelection(r){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(r);return}const e=this.getKey(r);if(e==null)return;const t=this.state.selectedKeys(),n=t.anchorKey||e,i=new ac(t,n,e);for(const s of this.getKeyRange(n,t.currentKey||e))i.delete(s);for(const s of this.getKeyRange(e,n))this.canSelectItem(s)&&i.add(s);this.state.setSelectedKeys(i)}getKeyRange(r,e){const t=this.collection().getItem(r),n=this.collection().getItem(e);return t&&n?t.index!=null&&n.index!=null&&t.index<=n.index?this.getKeyRangeInternal(r,e):this.getKeyRangeInternal(e,r):[]}getKeyRangeInternal(r,e){const t=[];let n=r;for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&t.push(n),n===e)return t;n=this.collection().getKeyAfter(n)}return[]}getKey(r){const e=this.collection().getItem(r);return e?!e||e.type!=="item"?null:e.key:r}toggleSelection(r){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(r)){this.replaceSelection(r);return}const e=this.getKey(r);if(e==null)return;const t=new ac(this.state.selectedKeys());t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection()&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(r){if(this.selectionMode()==="none")return;const e=this.getKey(r);if(e==null)return;const t=this.canSelectItem(e)?new ac([e],e,e):new ac;this.state.setSelectedKeys(t)}setSelectedKeys(r){if(this.selectionMode()==="none")return;const e=new ac;for(const t of r){const n=this.getKey(t);if(n!=null&&(e.add(n),this.selectionMode()==="single"))break}this.state.setSelectedKeys(e)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const r=this.state.selectedKeys();!this.disallowEmptySelection()&&r.size>0&&this.state.setSelectedKeys(new ac)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(r,e){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(r)&&!this.disallowEmptySelection()?this.toggleSelection(r):this.replaceSelection(r):this.selectionBehavior()==="toggle"||e&&e.pointerType==="touch"?this.toggleSelection(r):this.replaceSelection(r))}isSelectionEqual(r){if(r===this.state.selectedKeys())return!0;const e=this.selectedKeys();if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;for(const t of e)if(!r.has(t))return!1;return!0}canSelectItem(r){if(this.state.selectionMode()==="none")return!1;const e=this.collection().getItem(r);return e!=null&&!e.disabled}isDisabled(r){const e=this.collection().getItem(r);return!e||e.disabled}getAllSelectableKeys(){const r=[];return(t=>{for(;t!=null;){if(this.canSelectItem(t)){const n=this.collection().getItem(t);if(!n)continue;n.type==="item"&&r.push(t)}t=this.collection().getKeyAfter(t)}})(this.collection().getFirstKey()),r}},V8=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(r){this.iterable=r;for(const n of r)this.keyMap.set(n.key,n);if(this.keyMap.size===0)return;let e,t=0;for(const[n,i]of this.keyMap)e?(e.nextKey=n,i.prevKey=e.key):(this.firstKey=n,i.prevKey=void 0),i.type==="item"&&(i.index=t++),e=i,e.nextKey=void 0;this.lastKey=e.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(r){return this.keyMap.get(r)?.prevKey}getKeyAfter(r){return this.keyMap.get(r)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(r){return this.keyMap.get(r)}at(r){const e=[...this.getKeys()];return this.getItem(e[r])}};function _R(r){const e=kse(r),n=bse({dataSource:()=>We(r.dataSource),getKey:()=>We(r.getKey),getTextValue:()=>We(r.getTextValue),getDisabled:()=>We(r.getDisabled),getSectionChildren:()=>We(r.getSectionChildren),factory:s=>r.filter?new V8(r.filter(s)):new V8(s)},[()=>r.filter]),i=new Dse(n,e);return ng(()=>{const s=e.focusedKey();s!=null&&!n().getItem(s)&&e.setFocusedKey(void 0)}),{collection:n,selectionManager:()=>i}}var bq=fn();function wq(){return rn(bq)}function Mse(){const r=wq();if(r===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return r}function xq(r,e){return!!(e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING)}function Bse(r,e){const t=e.ref();if(!t)return-1;let n=r.length;if(!n)return-1;for(;n--;){const i=r[n]?.ref();if(i&&xq(i,t))return n+1}return 0}function Nse(r){const e=r.map((n,i)=>[i,n]);let t=!1;return e.sort(([n,i],[s,o])=>{const a=i.ref(),c=o.ref();return a===c||!a||!c?0:xq(a,c)?(n>s&&(t=!0),-1):(n<s&&(t=!0),1)}),t?e.map(([n,i])=>i):r}function _q(r,e){const t=Nse(r);r!==t&&e(t)}function Lse(r){const e=r[0],t=r[r.length-1]?.ref();let n=e?.ref()?.parentElement;for(;n;){if(t&&n.contains(t))return n;n=n.parentElement}return Po(n).body}function Fse(r,e){ot(()=>{const t=setTimeout(()=>{_q(r(),e)});mt(()=>clearTimeout(t))})}function Use(r,e){if(typeof IntersectionObserver!="function"){Fse(r,e);return}let t=[];ot(()=>{const n=()=>{const o=!!t.length;t=r(),o&&_q(r(),e)},i=Lse(r()),s=new IntersectionObserver(n,{root:i});for(const o of r()){const a=o.ref();a&&s.observe(a)}mt(()=>s.disconnect())})}function zse(r={}){const[e,t]=qie({value:()=>We(r.items),onChange:s=>r.onItemsChange?.(s)});Use(e,t);const n=s=>(t(o=>{const a=Bse(o,s);return aie(o,s,a)}),()=>{t(o=>{const a=o.filter(c=>c.ref()!==s.ref());return o.length===a.length?o:a})});return{DomCollectionProvider:s=>A(bq.Provider,{value:{registerItem:n},get children(){return s.children}})}}function qse(r){const e=Mse(),t=Jt({shouldRegisterItem:!0},r);ot(()=>{if(!t.shouldRegisterItem)return;const n=e.registerItem(t.getItem());mt(n)})}const jse=["top","right","bottom","left"],ku=Math.min,Ao=Math.max,ib=Math.round,cy=Math.floor,gc=r=>({x:r,y:r}),Vse={left:"right",right:"left",bottom:"top",top:"bottom"},Kse={start:"end",end:"start"};function NI(r,e,t){return Ao(r,ku(e,t))}function dd(r,e){return typeof r=="function"?r(e):r}function Ou(r){return r.split("-")[0]}function wp(r){return r.split("-")[1]}function Sq(r){return r==="x"?"y":"x"}function SR(r){return r==="y"?"height":"width"}function Qc(r){return["top","bottom"].includes(Ou(r))?"y":"x"}function ER(r){return Sq(Qc(r))}function Hse(r,e,t){t===void 0&&(t=!1);const n=wp(r),i=ER(r),s=SR(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=sb(o)),[o,sb(o)]}function Wse(r){const e=sb(r);return[LI(r),e,LI(e)]}function LI(r){return r.replace(/start|end/g,e=>Kse[e])}function Gse(r,e,t){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function Yse(r,e,t,n){const i=wp(r);let s=Gse(Ou(r),t==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(LI)))),s}function sb(r){return r.replace(/left|right|bottom|top/g,e=>Vse[e])}function Jse(r){return{top:0,right:0,bottom:0,left:0,...r}}function Eq(r){return typeof r!="number"?Jse(r):{top:r,right:r,bottom:r,left:r}}function ob(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function K8(r,e,t){let{reference:n,floating:i}=r;const s=Qc(e),o=ER(e),a=SR(o),c=Ou(e),l=s==="y",u=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,d=n[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:n.y-i.height};break;case"bottom":h={x:u,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-i.width,y:f};break;default:h={x:n.x,y:n.y}}switch(wp(e)){case"start":h[o]-=d*(t&&l?-1:1);break;case"end":h[o]+=d*(t&&l?-1:1);break}return h}const Xse=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:f}=K8(l,n,c),d=n,h={},g=0;for(let p=0;p<a.length;p++){const{name:m,fn:y}=a[p],{x:v,y:w,data:_,reset:x}=await y({x:u,y:f,initialPlacement:n,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:r,floating:e}});u=v??u,f=w??f,h={...h,[m]:{...h[m],..._}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:i}):x.rects),{x:u,y:f}=K8(l,d,c)),p=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}};async function Ng(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:c}=r,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=dd(e,r),g=Eq(h),m=a[d?f==="floating"?"reference":"floating":f],y=ob(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},x=ob(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:c}):v);return{top:(y.top-x.top+g.top)/_.y,bottom:(x.bottom-y.bottom+g.bottom)/_.y,left:(y.left-x.left+g.left)/_.x,right:(x.right-y.right+g.right)/_.x}}const Zse=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=dd(r,e)||{};if(l==null)return{};const f=Eq(u),d={x:t,y:n},h=ER(i),g=SR(h),p=await o.getDimensions(l),m=h==="y",y=m?"top":"left",v=m?"bottom":"right",w=m?"clientHeight":"clientWidth",_=s.reference[g]+s.reference[h]-d[h]-s.floating[g],x=d[h]-s.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=E?E[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(E)))&&(S=a.floating[w]||s.floating[g]);const T=_/2-x/2,C=S/2-p[g]/2-1,P=ku(f[y],C),V=ku(f[v],C),L=P,D=S-p[g]-V,b=S/2-p[g]/2+T,I=NI(L,b,D),B=!c.arrow&&wp(i)!=null&&b!==I&&s.reference[g]/2-(b<L?P:V)-p[g]/2<0,F=B?b<L?b-L:b-D:0;return{[h]:d[h]+F,data:{[h]:I,centerOffset:b-I-F,...B&&{alignmentOffset:F}},reset:B}}}),Qse=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...m}=dd(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=Ou(i),v=Qc(a),w=Ou(a)===a,_=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=d||(w||!p?[sb(a)]:Wse(a)),E=g!=="none";!d&&E&&x.push(...Yse(a,p,g,_));const S=[a,...x],T=await Ng(e,m),C=[];let P=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&C.push(T[y]),f){const b=Hse(i,o,_);C.push(T[b[0]],T[b[1]])}if(P=[...P,{placement:i,overflows:C}],!C.every(b=>b<=0)){var V,L;const b=(((V=s.flip)==null?void 0:V.index)||0)+1,I=S[b];if(I&&(!(f==="alignment"?v!==Qc(I):!1)||P.every(z=>z.overflows[0]>0&&Qc(z.placement)===v)))return{data:{index:b,overflows:P},reset:{placement:I}};let B=(L=P.filter(F=>F.overflows[0]<=0).sort((F,z)=>F.overflows[1]-z.overflows[1])[0])==null?void 0:L.placement;if(!B)switch(h){case"bestFit":{var D;const F=(D=P.filter(z=>{if(E){const G=Qc(z.placement);return G===v||G==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,Q)=>G+Q,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:D[0];F&&(B=F);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function H8(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function W8(r){return jse.some(e=>r[e]>=0)}const eoe=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=dd(r,e);switch(n){case"referenceHidden":{const s=await Ng(e,{...i,elementContext:"reference"}),o=H8(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:W8(o)}}}case"escaped":{const s=await Ng(e,{...i,altBoundary:!0}),o=H8(s,t.floating);return{data:{escapedOffsets:o,escaped:W8(o)}}}default:return{}}}}};async function toe(r,e){const{placement:t,platform:n,elements:i}=r,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Ou(t),a=wp(t),c=Qc(t)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,f=dd(e,r);let{mainAxis:d,crossAxis:h,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),c?{x:h*u,y:d*l}:{x:d*l,y:h*u}}const roe=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await toe(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},noe=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:y,y:v}=m;return{x:y,y:v}}},...c}=dd(r,e),l={x:t,y:n},u=await Ng(e,c),f=Qc(Ou(i)),d=Sq(f);let h=l[d],g=l[f];if(s){const m=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+u[m],w=h-u[y];h=NI(v,h,w)}if(o){const m=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=g+u[m],w=g-u[y];g=NI(v,g,w)}const p=a.fn({...e,[d]:h,[f]:g});return{...p,data:{x:p.x-t,y:p.y-n,enabled:{[d]:s,[f]:o}}}}}},ioe=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=dd(r,e),u=await Ng(e,l),f=Ou(i),d=wp(i),h=Qc(i)==="y",{width:g,height:p}=s.floating;let m,y;f==="top"||f==="bottom"?(m=f,y=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=f,m=d==="end"?"top":"bottom");const v=p-u.top-u.bottom,w=g-u.left-u.right,_=ku(p-u[m],v),x=ku(g-u[y],w),E=!e.middlewareData.shift;let S=_,T=x;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(S=v),E&&!d){const P=Ao(u.left,0),V=Ao(u.right,0),L=Ao(u.top,0),D=Ao(u.bottom,0);h?T=g-2*(P!==0||V!==0?P+V:Ao(u.left,u.right)):S=p-2*(L!==0||D!==0?L+D:Ao(u.top,u.bottom))}await c({...e,availableWidth:T,availableHeight:S});const C=await o.getDimensions(a.floating);return g!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function S1(){return typeof window<"u"}function xp(r){return Aq(r)?(r.nodeName||"").toLowerCase():"#document"}function To(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Ac(r){var e;return(e=(Aq(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Aq(r){return S1()?r instanceof Node||r instanceof To(r).Node:!1}function Pa(r){return S1()?r instanceof Element||r instanceof To(r).Element:!1}function bc(r){return S1()?r instanceof HTMLElement||r instanceof To(r).HTMLElement:!1}function G8(r){return!S1()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof To(r).ShadowRoot}function Sm(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=$a(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function soe(r){return["table","td","th"].includes(xp(r))}function E1(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function AR(r){const e=IR(),t=Pa(r)?$a(r):r;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function ooe(r){let e=Pu(r);for(;bc(e)&&!Hh(e);){if(AR(e))return e;if(E1(e))return null;e=Pu(e)}return null}function IR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hh(r){return["html","body","#document"].includes(xp(r))}function $a(r){return To(r).getComputedStyle(r)}function A1(r){return Pa(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Pu(r){if(xp(r)==="html")return r;const e=r.assignedSlot||r.parentNode||G8(r)&&r.host||Ac(r);return G8(e)?e.host:e}function Iq(r){const e=Pu(r);return Hh(e)?r.ownerDocument?r.ownerDocument.body:r.body:bc(e)&&Sm(e)?e:Iq(e)}function Lg(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Iq(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),o=To(i);if(s){const a=FI(o);return e.concat(o,o.visualViewport||[],Sm(i)?i:[],a&&t?Lg(a):[])}return e.concat(i,Lg(i,[],t))}function FI(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Cq(r){const e=$a(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=bc(r),s=i?r.offsetWidth:t,o=i?r.offsetHeight:n,a=ib(t)!==s||ib(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function CR(r){return Pa(r)?r:r.contextElement}function Sh(r){const e=CR(r);if(!bc(e))return gc(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=Cq(e);let o=(s?ib(t.width):t.width)/n,a=(s?ib(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const aoe=gc(0);function Tq(r){const e=To(r);return!IR()||!e.visualViewport?aoe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function coe(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==To(r)?!1:e}function Vf(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=CR(r);let o=gc(1);e&&(n?Pa(n)&&(o=Sh(n)):o=Sh(r));const a=coe(s,t,n)?Tq(s):gc(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const d=To(s),h=n&&Pa(n)?To(n):n;let g=d,p=FI(g);for(;p&&n&&h!==g;){const m=Sh(p),y=p.getBoundingClientRect(),v=$a(p),w=y.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,_=y.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,f*=m.y,c+=w,l+=_,g=To(p),p=FI(g)}}return ob({width:u,height:f,x:c,y:l})}function TR(r,e){const t=A1(r).scrollLeft;return e?e.left+t:Vf(Ac(r)).left+t}function Rq(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:TR(r,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function loe(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",o=Ac(n),a=e?E1(e.floating):!1;if(n===o||a&&s)return t;let c={scrollLeft:0,scrollTop:0},l=gc(1);const u=gc(0),f=bc(n);if((f||!f&&!s)&&((xp(n)!=="body"||Sm(o))&&(c=A1(n)),bc(n))){const h=Vf(n);l=Sh(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}const d=o&&!f&&!s?Rq(o,c,!0):gc(0);return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-c.scrollLeft*l.x+u.x+d.x,y:t.y*l.y-c.scrollTop*l.y+u.y+d.y}}function uoe(r){return Array.from(r.getClientRects())}function foe(r){const e=Ac(r),t=A1(r),n=r.ownerDocument.body,i=Ao(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Ao(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+TR(r);const a=-t.scrollTop;return $a(n).direction==="rtl"&&(o+=Ao(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function doe(r,e){const t=To(r),n=Ac(r),i=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=IR();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function hoe(r,e){const t=Vf(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=bc(r)?Sh(r):gc(1),o=r.clientWidth*s.x,a=r.clientHeight*s.y,c=i*s.x,l=n*s.y;return{width:o,height:a,x:c,y:l}}function Y8(r,e,t){let n;if(e==="viewport")n=doe(r,t);else if(e==="document")n=foe(Ac(r));else if(Pa(e))n=hoe(e,t);else{const i=Tq(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ob(n)}function kq(r,e){const t=Pu(r);return t===e||!Pa(t)||Hh(t)?!1:$a(t).position==="fixed"||kq(t,e)}function poe(r,e){const t=e.get(r);if(t)return t;let n=Lg(r,[],!1).filter(a=>Pa(a)&&xp(a)!=="body"),i=null;const s=$a(r).position==="fixed";let o=s?Pu(r):r;for(;Pa(o)&&!Hh(o);){const a=$a(o),c=AR(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Sm(o)&&!c&&kq(r,o))?n=n.filter(u=>u!==o):i=a,o=Pu(o)}return e.set(r,n),n}function goe(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const o=[...t==="clippingAncestors"?E1(e)?[]:poe(e,this._c):[].concat(t),n],a=o[0],c=o.reduce((l,u)=>{const f=Y8(e,u,i);return l.top=Ao(f.top,l.top),l.right=ku(f.right,l.right),l.bottom=ku(f.bottom,l.bottom),l.left=Ao(f.left,l.left),l},Y8(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function moe(r){const{width:e,height:t}=Cq(r);return{width:e,height:t}}function yoe(r,e,t){const n=bc(e),i=Ac(e),s=t==="fixed",o=Vf(r,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=gc(0);function l(){c.x=TR(i)}if(n||!n&&!s)if((xp(e)!=="body"||Sm(i))&&(a=A1(e)),n){const h=Vf(e,!0,s,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else i&&l();s&&!n&&i&&l();const u=i&&!n&&!s?Rq(i,a):gc(0),f=o.left+a.scrollLeft-c.x-u.x,d=o.top+a.scrollTop-c.y-u.y;return{x:f,y:d,width:o.width,height:o.height}}function wx(r){return $a(r).position==="static"}function J8(r,e){if(!bc(r)||$a(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Ac(r)===t&&(t=t.ownerDocument.body),t}function Oq(r,e){const t=To(r);if(E1(r))return t;if(!bc(r)){let i=Pu(r);for(;i&&!Hh(i);){if(Pa(i)&&!wx(i))return i;i=Pu(i)}return t}let n=J8(r,e);for(;n&&soe(n)&&wx(n);)n=J8(n,e);return n&&Hh(n)&&wx(n)&&!AR(n)?t:n||ooe(r)||t}const voe=async function(r){const e=this.getOffsetParent||Oq,t=this.getDimensions,n=await t(r.floating);return{reference:yoe(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function boe(r){return $a(r).direction==="rtl"}const Pq={convertOffsetParentRelativeRectToViewportRelativeRect:loe,getDocumentElement:Ac,getClippingRect:goe,getOffsetParent:Oq,getElementRects:voe,getClientRects:uoe,getDimensions:moe,getScale:Sh,isElement:Pa,isRTL:boe};function $q(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function woe(r,e){let t=null,n;const i=Ac(r);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=r.getBoundingClientRect(),{left:u,top:f,width:d,height:h}=l;if(a||e(),!d||!h)return;const g=cy(f),p=cy(i.clientWidth-(u+d)),m=cy(i.clientHeight-(f+h)),y=cy(u),w={rootMargin:-g+"px "+-p+"px "+-m+"px "+-y+"px",threshold:Ao(0,ku(1,c))||1};let _=!0;function x(E){const S=E[0].intersectionRatio;if(S!==c){if(!_)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!$q(l,r.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(x,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(x,w)}t.observe(r)}return o(!0),s}function xoe(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=CR(r),u=i||s?[...l?Lg(l):[],...Lg(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const f=l&&a?woe(l,t):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),t()}),l&&!c&&h.observe(l),h.observe(e));let g,p=c?Vf(r):null;c&&m();function m(){const y=Vf(r);p&&!$q(p,y)&&t(),p=y,g=requestAnimationFrame(m)}return t(),()=>{var y;u.forEach(v=>{i&&v.removeEventListener("scroll",t),s&&v.removeEventListener("resize",t)}),f?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const _oe=roe,Soe=noe,Eoe=Qse,Aoe=ioe,Ioe=eoe,Coe=Zse,Toe=(r,e,t)=>{const n=new Map,i={platform:Pq,...t},s={...i.platform,_c:n};return Xse(r,e,{...i,platform:s})};var Roe=le('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),RR=fn();function kR(){const r=rn(RR);if(r===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return r}var UI=30,X8=UI/2,koe={top:180,right:-90,bottom:0,left:90};function hd(r){const e=kR(),t=Jt({size:UI},r),[n,i]=Lt(t,["ref","style","size"]),s=()=>e.currentPlacement().split("-")[0],o=Ooe(e.contentRef),a=()=>o()?.getPropertyValue("background-color")||"none",c=()=>o()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>o()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(l())*2*(UI/n.size),f=()=>`rotate(${koe[s()]} ${X8} ${X8}) translate(0 2)`;return A(Ir,at({as:"div",ref(d){var h=Sn(e.setArrowRef,n.ref);typeof h=="function"&&h(d)},"aria-hidden":"true",get style(){return Sc({position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:c(),"stroke-width":u()},n.style)}},i,{get children(){var d=Roe(),h=d.firstChild,g=h.firstChild;return g.nextSibling,Ge(()=>Lr(h,"transform",f())),d}}))}function Ooe(r){const[e,t]=Pe();return ot(()=>{const n=r();n&&t(Fz(n).getComputedStyle(n))}),e}function Poe(r){const e=kR(),[t,n]=Lt(r,["ref","style"]);return A(Ir,at({as:"div",ref(i){var s=Sn(e.setPositionerRef,t.ref);typeof s=="function"&&s(i)},"data-popper-positioner":"",get style(){return Sc({position:"absolute",top:0,left:0,"min-width":"max-content"},t.style)}},n))}function Z8(r){const{x:e=0,y:t=0,width:n=0,height:i=0}=r??{};if(typeof DOMRect=="function")return new DOMRect(e,t,n,i);const s={x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:t+i,left:e};return{...s,toJSON:()=>s}}function $oe(r,e){return{contextElement:r,getBoundingClientRect:()=>{const n=e(r);return n?Z8(n):r?r.getBoundingClientRect():Z8()}}}function Doe(r){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(r)}var Moe={top:"bottom",right:"left",bottom:"top",left:"right"};function Boe(r,e){const[t,n]=r.split("-"),i=Moe[t];return n?t==="left"||t==="right"?`${i} ${n==="start"?"top":"bottom"}`:n==="start"?`${i} ${e==="rtl"?"right":"left"}`:`${i} ${e==="rtl"?"left":"right"}`:`${i} center`}function Noe(r){const e=Jt({getAnchorRect:d=>d?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},r),[t,n]=Pe(),[i,s]=Pe(),[o,a]=Pe(e.placement),c=()=>$oe(e.anchorRef?.(),e.getAnchorRect),{direction:l}=Il();async function u(){const d=c(),h=t(),g=i();if(!d||!h)return;const p=(g?.clientHeight||0)/2,m=typeof e.gutter=="number"?e.gutter+p:e.gutter??p;h.style.setProperty("--kb-popper-content-overflow-padding",`${e.overflowPadding}px`),d.getBoundingClientRect();const y=[_oe(({placement:E})=>{const S=!!E.split("-")[1];return{mainAxis:m,crossAxis:S?void 0:e.shift,alignmentAxis:e.shift}})];if(e.flip!==!1){const E=typeof e.flip=="string"?e.flip.split(" "):void 0;if(E!==void 0&&!E.every(Doe))throw new Error("`flip` expects a spaced-delimited list of placements");y.push(Eoe({padding:e.overflowPadding,fallbackPlacements:E}))}(e.slide||e.overlap)&&y.push(Soe({mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding})),y.push(Aoe({padding:e.overflowPadding,apply({availableWidth:E,availableHeight:S,rects:T}){const C=Math.round(T.reference.width);E=Math.floor(E),S=Math.floor(S),h.style.setProperty("--kb-popper-anchor-width",`${C}px`),h.style.setProperty("--kb-popper-content-available-width",`${E}px`),h.style.setProperty("--kb-popper-content-available-height",`${S}px`),e.sameWidth&&(h.style.width=`${C}px`),e.fitViewport&&(h.style.maxWidth=`${E}px`,h.style.maxHeight=`${S}px`)}})),e.hideWhenDetached&&y.push(Ioe({padding:e.detachedPadding})),g&&y.push(Coe({element:g,padding:e.arrowPadding}));const v=await Toe(d,h,{placement:e.placement,strategy:"absolute",middleware:y,platform:{...Pq,isRTL:()=>l()==="rtl"}});if(a(v.placement),e.onCurrentPlacementChange?.(v.placement),!h)return;h.style.setProperty("--kb-popper-content-transform-origin",Boe(v.placement,l()));const w=Math.round(v.x),_=Math.round(v.y);let x;if(e.hideWhenDetached&&(x=v.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(h.style,{top:"0",left:"0",transform:`translate3d(${w}px, ${_}px, 0)`,visibility:x}),g&&v.middlewareData.arrow){const{x:E,y:S}=v.middlewareData.arrow,T=v.placement.split("-")[0];Object.assign(g.style,{left:E!=null?`${E}px`:"",top:S!=null?`${S}px`:"",[T]:"100%"})}}ot(()=>{const d=c(),h=t();if(!d||!h)return;const g=xoe(d,h,u,{elementResize:typeof ResizeObserver=="function"});mt(g)}),ot(()=>{const d=t(),h=e.contentRef?.();!d||!h||queueMicrotask(()=>{d.style.zIndex=getComputedStyle(h).zIndex})});const f={currentPlacement:o,contentRef:()=>e.contentRef?.(),setPositionerRef:n,setArrowRef:s};return A(RR.Provider,{value:f,get children(){return e.children}})}var _p=Object.assign(Noe,{Arrow:hd,Context:RR,usePopperContext:kR,Positioner:Poe}),Loe={};Ec(Loe,{Arrow:()=>hd,Content:()=>Mq,Portal:()=>Bq,Root:()=>Nq,Tooltip:()=>el,Trigger:()=>Lq,useTooltipContext:()=>I1});var Dq=fn();function I1(){const r=rn(Dq);if(r===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return r}function Mq(r){const e=I1(),t=Jt({id:e.generateId("content")},r),[n,i]=Lt(t,["ref","style"]);return ot(()=>mt(e.registerContentId(i.id))),A(Oe,{get when(){return e.contentPresent()},get children(){return A(_p.Positioner,{get children(){return A(w1,at({ref(s){var o=Sn(a=>{e.setContentRef(a)},n.ref);typeof o=="function"&&o(s)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return Sc({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},n.style)},onFocusOutside:s=>s.preventDefault(),onDismiss:()=>e.hideTooltip(!0)},()=>e.dataset(),i))}})}})}function Bq(r){const e=I1();return A(Oe,{get when(){return e.contentPresent()},get children(){return A(g1,r)}})}function Foe(r,e,t){const n=r.split("-")[0],i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),o=[],a=i.left+i.width/2,c=i.top+i.height/2;switch(n){case"top":o.push([i.left,c]),o.push([s.left,s.bottom]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([i.right,c]);break;case"right":o.push([a,i.top]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([s.left,s.bottom]),o.push([a,i.bottom]);break;case"bottom":o.push([i.left,c]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([s.right,s.top]),o.push([i.right,c]);break;case"left":o.push([a,i.top]),o.push([s.right,s.top]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([a,i.bottom]);break}return o}var Xu={},Uoe=0,Rd=!1,Bc,Jp,kd;function Nq(r){const e=`tooltip-${Ti()}`,t=`${++Uoe}`,n=Jt({id:e,openDelay:700,closeDelay:300,skipDelayDuration:300},r),[i,s]=Lt(n,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let o;const[a,c]=Pe(),[l,u]=Pe(),[f,d]=Pe(),[h,g]=Pe(s.placement),p=vp({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:b=>i.onOpenChange?.(b)}),{present:m}=Kh({show:()=>i.forceMount||p.isOpen(),element:()=>f()??null}),y=()=>{Xu[t]=w},v=()=>{for(const b in Xu)b!==t&&(Xu[b](!0),delete Xu[b])},w=(b=!1)=>{b||i.closeDelay&&i.closeDelay<=0?(window.clearTimeout(o),o=void 0,p.close()):o||(o=window.setTimeout(()=>{o=void 0,p.close()},i.closeDelay)),window.clearTimeout(Bc),Bc=void 0,i.skipDelayDuration&&i.skipDelayDuration>=0&&(kd=window.setTimeout(()=>{window.clearTimeout(kd),kd=void 0},i.skipDelayDuration)),Rd&&(window.clearTimeout(Jp),Jp=window.setTimeout(()=>{delete Xu[t],Jp=void 0,Rd=!1},i.closeDelay))},_=()=>{clearTimeout(o),o=void 0,v(),y(),Rd=!0,p.open(),window.clearTimeout(Bc),Bc=void 0,window.clearTimeout(Jp),Jp=void 0,window.clearTimeout(kd),kd=void 0},x=()=>{v(),y(),!p.isOpen()&&!Bc&&!Rd?Bc=window.setTimeout(()=>{Bc=void 0,Rd=!0,_()},i.openDelay):p.isOpen()||_()},E=(b=!1)=>{!b&&i.openDelay&&i.openDelay>0&&!o&&!kd?x():_()},S=()=>{window.clearTimeout(Bc),Bc=void 0,Rd=!1},T=()=>{window.clearTimeout(o),o=void 0},C=b=>bs(l(),b)||bs(f(),b),P=b=>{const I=l(),B=f();if(!(!I||!B))return Foe(b,I,B)},V=b=>{const I=b.target;if(C(I)){T();return}if(!i.ignoreSafeArea){const B=P(h());if(B&&Hz(Cie(b),B)){T();return}}o||w()};ot(()=>{if(!p.isOpen())return;const b=Po();b.addEventListener("pointermove",V,!0),mt(()=>{b.removeEventListener("pointermove",V,!0)})}),ot(()=>{const b=l();if(!b||!p.isOpen())return;const I=F=>{const z=F.target;bs(z,b)&&w(!0)},B=Fz();B.addEventListener("scroll",I,{capture:!0}),mt(()=>{B.removeEventListener("scroll",I,{capture:!0})})}),mt(()=>{clearTimeout(o),Xu[t]&&delete Xu[t]});const D={dataset:Te(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>i.disabled??!1,triggerOnFocusOnly:()=>i.triggerOnFocusOnly??!1,contentId:a,contentPresent:m,openTooltip:E,hideTooltip:w,cancelOpening:S,generateId:Mo(()=>n.id),registerContentId:ni(c),isTargetOnTooltip:C,setTriggerRef:u,setContentRef:d};return A(Dq.Provider,{value:D,get children(){return A(_p,at({anchorRef:l,contentRef:f,onCurrentPlacementChange:g},s))}})}function Lq(r){let e;const t=I1(),[n,i]=Lt(r,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let s=!1,o=!1,a=!1;const c=()=>{s=!1},l=()=>{!t.isOpen()&&(o||a)&&t.openTooltip(a)},u=y=>{t.isOpen()&&!o&&!a&&t.hideTooltip(y)},f=y=>{pr(y,n.onPointerEnter),!(y.pointerType==="touch"||t.triggerOnFocusOnly()||t.isDisabled()||y.defaultPrevented)&&(o=!0,l())},d=y=>{pr(y,n.onPointerLeave),y.pointerType!=="touch"&&(o=!1,a=!1,t.isOpen()?u():t.cancelOpening())},h=y=>{pr(y,n.onPointerDown),s=!0,Po(e).addEventListener("pointerup",c,{once:!0})},g=y=>{pr(y,n.onClick),o=!1,a=!1,u(!0)},p=y=>{pr(y,n.onFocus),!(t.isDisabled()||y.defaultPrevented||s)&&(a=!0,l())},m=y=>{pr(y,n.onBlur);const v=y.relatedTarget;t.isTargetOnTooltip(v)||(o=!1,a=!1,u(!0))};return mt(()=>{Po(e).removeEventListener("pointerup",c)}),A(Ir,at({as:"button",ref(y){var v=Sn(w=>{t.setTriggerRef(w),e=w},n.ref);typeof v=="function"&&v(y)},get"aria-describedby"(){return kr(()=>!!t.isOpen())()?t.contentId():void 0},onPointerEnter:f,onPointerLeave:d,onPointerDown:h,onClick:g,onFocus:p,onBlur:m},()=>t.dataset(),i))}var el=Object.assign(Nq,{Arrow:hd,Content:Mq,Portal:Bq,Trigger:Lq}),Fq=["id","name","validationState","required","disabled","readOnly"];function Uq(r){const e=`form-control-${Ti()}`,t=Jt({id:e},r),[n,i]=Pe(),[s,o]=Pe(),[a,c]=Pe(),[l,u]=Pe(),f=(p,m,y)=>{const v=y!=null||n()!=null;return[y,n(),v&&m!=null?p:void 0].filter(Boolean).join(" ")||void 0},d=p=>[a(),l(),p].filter(Boolean).join(" ")||void 0,h=Te(()=>({"data-valid":We(t.validationState)==="valid"?"":void 0,"data-invalid":We(t.validationState)==="invalid"?"":void 0,"data-required":We(t.required)?"":void 0,"data-disabled":We(t.disabled)?"":void 0,"data-readonly":We(t.readOnly)?"":void 0}));return{formControlContext:{name:()=>We(t.name)??We(t.id),dataset:h,validationState:()=>We(t.validationState),isRequired:()=>We(t.required),isDisabled:()=>We(t.disabled),isReadOnly:()=>We(t.readOnly),labelId:n,fieldId:s,descriptionId:a,errorMessageId:l,getAriaLabelledBy:f,getAriaDescribedBy:d,generateId:Mo(()=>We(t.id)),registerLabel:ni(i),registerField:ni(o),registerDescription:ni(c),registerErrorMessage:ni(u)}}}var OR=fn();function Ic(){const r=rn(OR);if(r===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return r}function PR(r){const e=Ic(),t=Jt({id:e.generateId("description")},r);return ot(()=>mt(e.registerDescription(t.id))),A(Ir,at({as:"div"},()=>e.dataset(),t))}var zq=["id","aria-label","aria-labelledby","aria-describedby"];function qq(r){const e=Ic(),t=Jt({id:e.generateId("field")},r);return ot(()=>mt(e.registerField(We(t.id)))),{fieldProps:{id:()=>We(t.id),ariaLabel:()=>We(t["aria-label"]),ariaLabelledBy:()=>e.getAriaLabelledBy(We(t.id),We(t["aria-label"]),We(t["aria-labelledby"])),ariaDescribedBy:()=>e.getAriaDescribedBy(We(t["aria-describedby"]))}}}function jq(r){let e;const t=Ic(),n=Jt({id:t.generateId("label")},r),[i,s]=Lt(n,["ref"]),o=_1(()=>e,()=>"label");return ot(()=>mt(t.registerLabel(s.id))),A(Ir,at({as:"label",ref(a){var c=Sn(l=>e=l,i.ref);typeof c=="function"&&c(a)},get for(){return kr(()=>o()==="label")()?t.fieldId():void 0}},()=>t.dataset(),s))}function Vq(r,e){ot(Pn(r,t=>{if(t==null)return;const n=zoe(t);n!=null&&(n.addEventListener("reset",e,{passive:!0}),mt(()=>{n.removeEventListener("reset",e)}))}))}function zoe(r){return qoe(r)?r.form:r.closest("form")}function qoe(r){return r.matches("textarea, input, select, button")}function $R(r){const e=Ic(),t=Jt({id:e.generateId("error-message")},r),[n,i]=Lt(t,["forceMount"]),s=()=>e.validationState()==="invalid";return ot(()=>{s()&&mt(e.registerErrorMessage(i.id))}),A(Oe,{get when(){return n.forceMount||s()},get children(){return A(Ir,at({as:"div"},()=>e.dataset(),i))}})}var joe={};Ec(joe,{Control:()=>Hq,Description:()=>Wq,ErrorMessage:()=>Gq,Input:()=>Yq,Label:()=>Jq,Root:()=>Xq,Switch:()=>$u,Thumb:()=>Zq,useSwitchContext:()=>pd});var Kq=fn();function pd(){const r=rn(Kq);if(r===void 0)throw new Error("[kobalte]: `useSwitchContext` must be used within a `Switch` component");return r}function Hq(r){const e=Ic(),t=pd(),n=Jt({id:t.generateId("control")},r),[i,s]=Lt(n,["onClick","onKeyDown"]);return A(Ir,at({as:"div",onClick:c=>{pr(c,i.onClick),t.toggle(),t.inputRef()?.focus()},onKeyDown:c=>{pr(c,i.onKeyDown),c.key===dR.Space&&(t.toggle(),t.inputRef()?.focus())}},()=>e.dataset(),()=>t.dataset(),s))}function Wq(r){const e=pd();return A(PR,at(()=>e.dataset(),r))}function Gq(r){const e=pd();return A($R,at(()=>e.dataset(),r))}function Yq(r){const e=Ic(),t=pd(),n=Jt({id:t.generateId("input")},r),[i,s,o]=Lt(n,["ref","style","onChange","onFocus","onBlur"],zq),{fieldProps:a}=qq(s);return A(Ir,at({as:"input",ref(f){var d=Sn(t.setInputRef,i.ref);typeof d=="function"&&d(f)},type:"checkbox",role:"switch",get id(){return a.id()},get name(){return e.name()},get value(){return t.value()},get checked(){return t.checked()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get style(){return Sc({...mR},i.style)},get"aria-checked"(){return t.checked()},get"aria-label"(){return a.ariaLabel()},get"aria-labelledby"(){return a.ariaLabelledBy()},get"aria-describedby"(){return a.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()||void 0},get"aria-disabled"(){return e.isDisabled()||void 0},get"aria-readonly"(){return e.isReadOnly()||void 0},onChange:f=>{pr(f,i.onChange),f.stopPropagation();const d=f.target;t.setIsChecked(d.checked),d.checked=t.checked()},onFocus:f=>{pr(f,i.onFocus),t.setIsFocused(!0)},onBlur:f=>{pr(f,i.onBlur),t.setIsFocused(!1)}},()=>e.dataset(),()=>t.dataset(),o))}function Jq(r){const e=pd();return A(jq,at(()=>e.dataset(),r))}function Xq(r){let e;const t=`switch-${Ti()}`,n=Jt({value:"on",id:t},r),[i,s,o]=Lt(n,["ref","children","value","checked","defaultChecked","onChange","onPointerDown"],Fq),[a,c]=Pe(),[l,u]=Pe(!1),{formControlContext:f}=Uq(s),d=lq({isSelected:()=>i.checked,defaultIsSelected:()=>i.defaultChecked,onSelectedChange:m=>i.onChange?.(m),isDisabled:()=>f.isDisabled(),isReadOnly:()=>f.isReadOnly()});Vq(()=>e,()=>d.setIsSelected(i.defaultChecked??!1));const h=m=>{pr(m,i.onPointerDown),l()&&m.preventDefault()},g=Te(()=>({"data-checked":d.isSelected()?"":void 0})),p={value:()=>i.value,dataset:g,checked:()=>d.isSelected(),inputRef:a,generateId:Mo(()=>We(s.id)),toggle:()=>d.toggle(),setIsChecked:m=>d.setIsSelected(m),setIsFocused:u,setInputRef:c};return A(OR.Provider,{value:f,get children(){return A(Kq.Provider,{value:p,get children(){return A(Ir,at({as:"div",ref(m){var y=Sn(v=>e=v,i.ref);typeof y=="function"&&y(m)},role:"group",get id(){return We(s.id)},onPointerDown:h},()=>f.dataset(),g,o,{get children(){return A(Voe,{state:p,get children(){return i.children}})}}))}})}})}function Voe(r){const e=hp(()=>{const t=r.children;return b1(t)?t(r.state):t});return kr(e)}function Zq(r){const e=Ic(),t=pd(),n=Jt({id:t.generateId("thumb")},r);return A(Ir,at({as:"div"},()=>e.dataset(),()=>t.dataset(),n))}var $u=Object.assign(Xq,{Control:Hq,Description:Wq,ErrorMessage:Gq,Input:Yq,Label:Jq,Thumb:Zq}),Qq=fn();function C1(){const r=rn(Qq);if(r===void 0)throw new Error("[kobalte]: `useMeterContext` must be used within a `Meter.Root` component");return r}function Koe(r){const e=C1(),[t,n]=Lt(r,["style"]);return A(Ir,at({as:"div",get style(){return Sc({"--kb-meter-fill-width":e.meterFillWidth()},t.style)}},()=>e.dataset(),n))}function Hoe(r){const e=C1(),t=Jt({id:e.generateId("label")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerLabelId(n.id))),A(Ir,at({as:"span",get id(){return n.id}},()=>e.dataset(),i))}function Woe(r){const e=`meter-${Ti()}`,t=Jt({id:e,value:0,minValue:0,maxValue:100,role:"meter",indeterminate:!1},r),[n,i]=Lt(t,["value","minValue","maxValue","getValueLabel","role","aria-valuetext","aria-labelledby","aria-valuemax","aria-valuemin","aria-valuenow","indeterminate"]),[s,o]=Pe(),a=pq(()=>({style:"percent"})),c=()=>Kz(n.value,n.minValue,n.maxValue),l=()=>(c()-n.minValue)/(n.maxValue-n.minValue),u=()=>{if(!n.indeterminate)return n.getValueLabel?n.getValueLabel({value:c(),min:n.minValue,max:n.maxValue}):a().format(l())},f=()=>`${Math.round(l()*100)}%`,d=Te(()=>({})),h={dataset:d,value:c,valuePercent:l,valueLabel:u,labelId:s,meterFillWidth:f,generateId:Mo(()=>i.id),registerLabelId:ni(o)};return A(Qq.Provider,{value:h,get children(){return A(Ir,at({as:"div",get role(){return n.role||"meter"},get"aria-valuenow"(){return kr(()=>!!n.indeterminate)()?void 0:c()},get"aria-valuemin"(){return n.minValue},get"aria-valuemax"(){return n.maxValue},get"aria-valuetext"(){return u()},get"aria-labelledby"(){return s()}},d,i))}})}function Goe(r){const e=C1();return A(Ir,at({as:"div"},()=>e.dataset(),r))}function Yoe(r){const e=C1();return A(Ir,at({as:"div"},()=>e.dataset(),r,{get children(){return e.valueLabel()}}))}var Em=Object.assign(Woe,{Fill:Koe,Label:Hoe,Track:Goe,ValueLabel:Yoe}),Joe={};Ec(Joe,{Fill:()=>tj,Label:()=>rj,Progress:()=>Eh,Root:()=>nj,Track:()=>ij,ValueLabel:()=>sj,useProgressContext:()=>Am});var ej=fn();function Am(){const r=rn(ej);if(r===void 0)throw new Error("[kobalte]: `useProgressContext` must be used within a `Progress.Root` component");return r}function tj(r){const e=Am(),[t,n]=Lt(r,["style"]);return A(Em.Fill,at({get style(){return Sc({"--kb-progress-fill-width":e.progressFillWidth()},t.style)}},()=>e.dataset(),n))}function rj(r){const e=Am(),t=Jt({id:e.generateId("label")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerLabelId(n.id))),A(Em.Label,at({get id(){return n.id}},()=>e.dataset(),i))}function nj(r){const e=`progress-${Ti()}`,t=Jt({id:e,value:0,minValue:0,maxValue:100},r),[n,i]=Lt(t,["value","minValue","maxValue","indeterminate","getValueLabel"]),[s,o]=Pe(),a=pq(()=>({style:"percent"})),c=()=>Kz(n.value,n.minValue,n.maxValue),l=()=>(c()-n.minValue)/(n.maxValue-n.minValue),u=()=>{if(!n.indeterminate)return n.getValueLabel?n.getValueLabel({value:c(),min:n.minValue,max:n.maxValue}):a().format(l())},f=()=>n.indeterminate?void 0:`${Math.round(l()*100)}%`,d=Te(()=>{let g;return n.indeterminate||(g=l()===1?"complete":"loading"),{"data-progress":g,"data-indeterminate":n.indeterminate?"":void 0}}),h={dataset:d,value:c,valuePercent:l,valueLabel:u,labelId:s,progressFillWidth:f,generateId:Mo(()=>i.id),registerLabelId:ni(o)};return A(ej.Provider,{value:h,get children(){return A(Em,at({role:"progressbar",get indeterminate(){return n.indeterminate||!1}},d,t))}})}function ij(r){const e=Am();return A(Em.Track,at(()=>e.dataset(),r))}function sj(r){const e=Am();return A(Em.ValueLabel,at(()=>e.dataset(),r))}var Eh=Object.assign(nj,{Fill:tj,Label:rj,Track:ij,ValueLabel:sj}),Xoe=le("<option>"),Zoe=le("<div aria-hidden=true><input type=text><select tabindex=-1><option>");function Qoe(r){let e;const[t,n]=Lt(r,["ref","onChange","collection","selectionManager","isOpen","isMultiple","isVirtualized","focusTrigger"]),i=Ic(),[s,o]=Pe(!1),a=c=>{const l=t.collection.getItem(c);return A(Oe,{get when(){return l?.type==="item"},get children(){var u=Xoe();return u.value=c,Z(u,()=>l?.textValue),Ge(()=>u.selected=t.selectionManager.isSelected(c)),u}})};return ot(Pn(()=>t.selectionManager.selectedKeys(),(c,l)=>{l&&yq(c,l)||(o(!0),e?.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),e?.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})))},{defer:!0})),(()=>{var c=Zoe(),l=c.firstChild,u=l.nextSibling;u.firstChild,l.addEventListener("focus",()=>t.focusTrigger()),l.style.setProperty("font-size","16px"),u.addEventListener("change",d=>{pr(d,t.onChange),s()||t.selectionManager.setSelectedKeys(new Set([d.target.value])),o(!1)});var f=Sn(d=>e=d,t.ref);return typeof f=="function"&&cd(f,u),un(u,at({get multiple(){return t.isMultiple},get name(){return i.name()},get required(){return i.isRequired()},get disabled(){return i.isDisabled()},get size(){return t.collection.getSize()},get value(){return t.selectionManager.firstSelectedKey()??""}},n),!1,!0),Z(u,A(Oe,{get when(){return t.isVirtualized},get fallback(){return A(pt,{get each(){return[...t.collection.getKeys()]},children:a})},get children(){return A(pt,{get each(){return[...t.selectionManager.selectedKeys()]},children:a})}}),null),Ge(d=>{var h=mR,g=t.selectionManager.isFocused()||t.isOpen?-1:0,p=i.isRequired(),m=i.isDisabled(),y=i.isReadOnly();return d.e=p1(c,h,d.e),g!==d.t&&Lr(l,"tabindex",d.t=g),p!==d.a&&(l.required=d.a=p),m!==d.o&&(l.disabled=d.o=m),y!==d.i&&(l.readOnly=d.i=y),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c})()}var Q8=new WeakMap;function eae(r){let e=Q8.get(r);if(e!=null)return e;e=0;for(const t of r)t.type==="item"&&e++;return Q8.set(r,e),e}var oj=class{collection;ref;collator;constructor(r,e,t){this.collection=r,this.ref=e,this.collator=t}getKeyBelow(r){let e=this.collection().getKeyAfter(r);for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getKeyAbove(r){let e=this.collection().getKeyBefore(r);for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getFirstKey(){let r=this.collection().getFirstKey();for(;r!=null;){const e=this.collection().getItem(r);if(e&&e.type==="item"&&!e.disabled)return r;r=this.collection().getKeyAfter(r)}}getLastKey(){let r=this.collection().getLastKey();for(;r!=null;){const e=this.collection().getItem(r);if(e&&e.type==="item"&&!e.disabled)return r;r=this.collection().getKeyBefore(r)}}getItem(r){return this.ref?.()?.querySelector(`[data-key="${r}"]`)??null}getKeyPageAbove(r){const e=this.ref?.();let t=this.getItem(r);if(!e||!t)return;const n=Math.max(0,t.offsetTop+t.offsetHeight-e.offsetHeight);let i=r;for(;i&&t&&t.offsetTop>n;)i=this.getKeyAbove(i),t=i!=null?this.getItem(i):null;return i}getKeyPageBelow(r){const e=this.ref?.();let t=this.getItem(r);if(!e||!t)return;const n=Math.min(e.scrollHeight,t.offsetTop-t.offsetHeight+e.offsetHeight);let i=r;for(;i&&t&&t.offsetTop<n;)i=this.getKeyBelow(i),t=i!=null?this.getItem(i):null;return i}getKeyForSearch(r,e){const t=this.collator?.();if(!t)return;let n=e!=null?this.getKeyBelow(e):this.getFirstKey();for(;n!=null;){const i=this.collection().getItem(n);if(i){const s=i.textValue.slice(0,r.length);if(i.textValue&&t.compare(s,r)===0)return n}n=this.getKeyBelow(n)}}};function aj(r,e,t){const n=hq({usage:"search",sensitivity:"base"}),i=Te(()=>{const s=We(r.keyboardDelegate);return s||new oj(r.collection,e,n)});return $se({selectionManager:()=>We(r.selectionManager),keyboardDelegate:i,autoFocus:()=>We(r.autoFocus),deferAutoFocus:()=>We(r.deferAutoFocus),shouldFocusWrap:()=>We(r.shouldFocusWrap),disallowEmptySelection:()=>We(r.disallowEmptySelection),selectOnFocus:()=>We(r.selectOnFocus),disallowTypeAhead:()=>We(r.disallowTypeAhead),shouldUseVirtualFocus:()=>We(r.shouldUseVirtualFocus),allowsTabNavigation:()=>We(r.allowsTabNavigation),isVirtualized:()=>We(r.isVirtualized),scrollToKey:s=>We(r.scrollToKey)?.(s),orientation:()=>We(r.orientation)},e,t)}var tae={};Ec(tae,{Item:()=>T1,ItemDescription:()=>R1,ItemIndicator:()=>k1,ItemLabel:()=>O1,Listbox:()=>rae,Root:()=>MR,Section:()=>P1,useListboxContext:()=>lj});var cj=fn();function lj(){const r=rn(cj);if(r===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return r}var uj=fn();function DR(){const r=rn(uj);if(r===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return r}function T1(r){let e;const t=lj(),n=`${t.generateId("item")}-${Ti()}`,i=Jt({id:n},r),[s,o]=Lt(i,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=Pe(),[l,u]=Pe(),f=()=>t.listState().selectionManager(),d=()=>f().focusedKey()===s.item.key,h=xR({key:()=>s.item.key,selectionManager:f,shouldSelectOnPressUp:t.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>t.shouldSelectOnPressUp()&&t.shouldFocusOnHover(),shouldUseVirtualFocus:t.shouldUseVirtualFocus,disabled:()=>s.item.disabled},()=>e),g=()=>{if(f().selectionMode()!=="none")return h.isSelected()},p=Te(()=>!(_m()&&hie())),m=()=>p()?s["aria-label"]:void 0,y=()=>p()?a():void 0,v=()=>p()?l():void 0,w=()=>{if(!t.isVirtualized())return;const T=t.listState().collection().getItem(s.item.key)?.index;return T!=null?T+1:void 0},_=()=>{if(t.isVirtualized())return eae(t.listState().collection())},x=T=>{pr(T,s.onPointerMove),T.pointerType==="mouse"&&!h.isDisabled()&&t.shouldFocusOnHover()&&(ei(T.currentTarget),f().setFocused(!0),f().setFocusedKey(s.item.key))},E=Te(()=>({"data-disabled":h.isDisabled()?"":void 0,"data-selected":h.isSelected()?"":void 0,"data-highlighted":d()?"":void 0})),S={isSelected:h.isSelected,dataset:E,generateId:Mo(()=>o.id),registerLabelId:ni(c),registerDescriptionId:ni(u)};return A(uj.Provider,{value:S,get children(){return A(Ir,at({as:"li",ref(T){var C=Sn(P=>e=P,s.ref);typeof C=="function"&&C(T)},role:"option",get tabIndex(){return h.tabIndex()},get"aria-disabled"(){return h.isDisabled()},get"aria-selected"(){return g()},get"aria-label"(){return m()},get"aria-labelledby"(){return y()},get"aria-describedby"(){return v()},get"aria-posinset"(){return w()},get"aria-setsize"(){return _()},get"data-key"(){return h.dataKey()},get onPointerDown(){return pn([s.onPointerDown,h.onPointerDown])},get onPointerUp(){return pn([s.onPointerUp,h.onPointerUp])},get onClick(){return pn([s.onClick,h.onClick])},get onKeyDown(){return pn([s.onKeyDown,h.onKeyDown])},get onMouseDown(){return pn([s.onMouseDown,h.onMouseDown])},get onFocus(){return pn([s.onFocus,h.onFocus])},onPointerMove:x},E,o))}})}function R1(r){const e=DR(),t=Jt({id:e.generateId("description")},r);return ot(()=>mt(e.registerDescriptionId(t.id))),A(Ir,at({as:"div"},()=>e.dataset(),t))}function k1(r){const e=DR(),t=Jt({id:e.generateId("indicator")},r),[n,i]=Lt(t,["forceMount"]);return A(Oe,{get when(){return n.forceMount||e.isSelected()},get children(){return A(Ir,at({as:"div","aria-hidden":"true"},()=>e.dataset(),i))}})}function O1(r){const e=DR(),t=Jt({id:e.generateId("label")},r);return ot(()=>mt(e.registerLabelId(t.id))),A(Ir,at({as:"div"},()=>e.dataset(),t))}function MR(r){let e;const t=`listbox-${Ti()}`,n=Jt({id:t,selectionMode:"single",virtualized:!1},r),[i,s]=Lt(n,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),o=Te(()=>i.state?i.state:_R({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:i.onChange,allowDuplicateSelectionEvents:()=>We(i.allowDuplicateSelectionEvents),disallowEmptySelection:()=>We(i.disallowEmptySelection),selectionBehavior:()=>We(i.selectionBehavior),selectionMode:()=>We(i.selectionMode),dataSource:()=>i.options??[],getKey:()=>i.optionValue,getTextValue:()=>i.optionTextValue,getDisabled:()=>i.optionDisabled,getSectionChildren:()=>i.optionGroupChildren})),a=aj({selectionManager:()=>o().selectionManager(),collection:()=>o().collection(),autoFocus:()=>We(i.autoFocus),shouldFocusWrap:()=>We(i.shouldFocusWrap),keyboardDelegate:()=>i.keyboardDelegate,disallowEmptySelection:()=>We(i.disallowEmptySelection),selectOnFocus:()=>We(i.selectOnFocus),disallowTypeAhead:()=>We(i.disallowTypeAhead),shouldUseVirtualFocus:()=>We(i.shouldUseVirtualFocus),allowsTabNavigation:()=>We(i.allowsTabNavigation),isVirtualized:()=>i.virtualized,scrollToKey:()=>i.scrollToItem},()=>e,()=>i.scrollRef?.()),c={listState:o,generateId:Mo(()=>s.id),shouldUseVirtualFocus:()=>n.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>n.shouldSelectOnPressUp,shouldFocusOnHover:()=>n.shouldFocusOnHover,isVirtualized:()=>i.virtualized};return A(cj.Provider,{value:c,get children(){return A(Ir,at({as:"ul",ref(l){var u=Sn(f=>e=f,i.ref);typeof u=="function"&&u(l)},role:"listbox",get tabIndex(){return a.tabIndex()},get"aria-multiselectable"(){return o().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return pn([i.onKeyDown,a.onKeyDown])},get onMouseDown(){return pn([i.onMouseDown,a.onMouseDown])},get onFocusIn(){return pn([i.onFocusIn,a.onFocusIn])},get onFocusOut(){return pn([i.onFocusOut,a.onFocusOut])}},s,{get children(){return A(Oe,{get when(){return!i.virtualized},get fallback(){return i.children?.(o().collection)},get children(){return A(nie,{get each(){return[...o().collection()]},by:"key",children:l=>A(Kt,{get children(){return[A(Re,{get when(){return l().type==="section"},get children(){return i.renderSection?.(l())}}),A(Re,{get when(){return l().type==="item"},get children(){return i.renderItem?.(l())}})]}})})}})}}))}})}function P1(r){return A(Ir,at({as:"li",role:"presentation"},r))}var rae=Object.assign(MR,{Item:T1,ItemDescription:R1,ItemIndicator:k1,ItemLabel:O1,Section:P1}),nae={};Ec(nae,{Arrow:()=>hd,Content:()=>dj,Description:()=>PR,ErrorMessage:()=>$R,HiddenSelect:()=>hj,Icon:()=>pj,Item:()=>T1,ItemDescription:()=>R1,ItemIndicator:()=>k1,ItemLabel:()=>O1,Label:()=>gj,Listbox:()=>mj,Portal:()=>yj,Root:()=>vj,Section:()=>P1,Select:()=>ec,Trigger:()=>bj,Value:()=>wj,useSelectContext:()=>Cl});var fj=fn();function Cl(){const r=rn(fj);if(r===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return r}function dj(r){let e;const t=Cl(),[n,i]=Lt(r,["ref","style","onCloseAutoFocus","onFocusOutside"]),s=a=>{t.close()},o=a=>{n.onFocusOutside?.(a),t.isOpen()&&t.isModal()&&a.preventDefault()};return bR({isDisabled:()=>!(t.isOpen()&&t.isModal()),targets:()=>e?[e]:[]}),wR({element:()=>e??null,enabled:()=>t.contentPresent()&&t.preventScroll()}),vR({trapFocus:()=>t.isOpen()&&t.isModal(),onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(ei(t.triggerRef()),a.preventDefault())}},()=>e),A(Oe,{get when(){return t.contentPresent()},get children(){return A(_p.Positioner,{get children(){return A(w1,at({ref(a){var c=Sn(l=>{t.setContentRef(l),e=l},n.ref);typeof c=="function"&&c(a)},get disableOutsidePointerEvents(){return kr(()=>!!t.isModal())()&&t.isOpen()},get excludedElements(){return[t.triggerRef]},get style(){return Sc({"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},n.style)},onEscapeKeyDown:s,onFocusOutside:o,get onDismiss(){return t.close}},()=>t.dataset(),i))}})}})}function hj(r){const e=Cl();return A(Qoe,at({get collection(){return e.listState().collection()},get selectionManager(){return e.listState().selectionManager()},get isOpen(){return e.isOpen()},get isMultiple(){return e.isMultiple()},get isVirtualized(){return e.isVirtualized()},focusTrigger:()=>e.triggerRef()?.focus()},r))}function pj(r){const e=Cl(),t=Jt({children:""},r);return A(Ir,at({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function gj(r){const e=Cl(),[t,n]=Lt(r,["onClick"]);return A(jq,at({as:"span",onClick:s=>{pr(s,t.onClick),e.isDisabled()||e.triggerRef()?.focus()}},n))}function mj(r){const e=Cl(),t=Jt({id:e.generateId("listbox")},r),[n,i]=Lt(t,["ref","id","onKeyDown"]);return ot(()=>mt(e.registerListboxId(n.id))),A(MR,at({ref(o){var a=Sn(e.setListboxRef,n.ref);typeof a=="function"&&a(o)},get id(){return n.id},get state(){return e.listState()},get virtualized(){return e.isVirtualized()},get autoFocus(){return e.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return e.shouldFocusWrap()},get disallowTypeAhead(){return e.disallowTypeAhead()},get"aria-labelledby"(){return e.listboxAriaLabelledBy()},get renderItem(){return e.renderItem},get renderSection(){return e.renderSection},onKeyDown:o=>{pr(o,n.onKeyDown),o.key==="Escape"&&o.preventDefault()}},i))}function yj(r){const e=Cl();return A(Oe,{get when(){return e.contentPresent()},get children(){return A(g1,r)}})}function iae(r){const e=`select-${Ti()}`,t=Jt({id:e,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:r.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},r),[n,i,s,o]=Lt(t,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],Fq),[a,c]=Pe(),[l,u]=Pe(),[f,d]=Pe(),[h,g]=Pe(),[p,m]=Pe(),[y,v]=Pe(),[w,_]=Pe(),[x,E]=Pe(!0),S=te=>{const ae=n.optionValue;return ae==null?String(te):String(b1(ae)?ae(te):te[ae])},T=Te(()=>{const te=n.optionGroupChildren;return te==null?n.options:n.options.flatMap(ae=>ae[te]??ae)}),C=Te(()=>T().map(te=>S(te))),P=te=>[...te].map(ae=>T().find(he=>S(he)===ae)).filter(ae=>ae!=null),V=vp({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:te=>n.onOpenChange?.(te)}),L=_R({selectedKeys:()=>n.value!=null?n.value.map(S):n.value,defaultSelectedKeys:()=>n.defaultValue!=null?n.defaultValue.map(S):n.defaultValue,onSelectionChange:te=>{n.onChange?.(P(te)),n.closeOnSelection&&z()},allowDuplicateSelectionEvents:()=>We(n.allowDuplicateSelectionEvents),disallowEmptySelection:()=>We(n.disallowEmptySelection),selectionBehavior:()=>We(n.selectionBehavior),selectionMode:()=>n.selectionMode,dataSource:()=>n.options??[],getKey:()=>n.optionValue,getTextValue:()=>n.optionTextValue,getDisabled:()=>n.optionDisabled,getSectionChildren:()=>n.optionGroupChildren}),D=Te(()=>P(L.selectionManager().selectedKeys())),b=te=>{L.selectionManager().toggleSelection(S(te))},{present:I}=Kh({show:()=>n.forceMount||V.isOpen(),element:()=>p()??null}),B=()=>{const te=y();te&&ei(te)},F=te=>{if(n.options.length<=0)return;E(te),V.open();let ae=L.selectionManager().firstSelectedKey();ae==null&&(te==="first"?ae=L.collection().getFirstKey():te==="last"&&(ae=L.collection().getLastKey())),B(),L.selectionManager().setFocused(!0),L.selectionManager().setFocusedKey(ae)},z=()=>{V.close(),L.selectionManager().setFocused(!1),L.selectionManager().setFocusedKey(void 0)},G=te=>{V.isOpen()?z():F(te)},{formControlContext:Q}=Uq(s);Vq(h,()=>{const te=n.defaultValue?[...n.defaultValue].map(S):new ac;L.selectionManager().setSelectedKeys(te)});const X=hq({usage:"search",sensitivity:"base"}),O=Te(()=>{const te=We(n.keyboardDelegate);return te||new oj(L.collection,void 0,X)}),R=te=>n.itemComponent?.({item:te}),M=te=>n.sectionComponent?.({section:te});ot(Pn([C],([te])=>{const he=[...L.selectionManager().selectedKeys()].filter(re=>te.includes(re));L.selectionManager().setSelectedKeys(he)},{defer:!0}));const k=Te(()=>({"data-expanded":V.isOpen()?"":void 0,"data-closed":V.isOpen()?void 0:""})),j={dataset:k,isOpen:V.isOpen,isDisabled:()=>Q.isDisabled()??!1,isMultiple:()=>We(n.selectionMode)==="multiple",isVirtualized:()=>n.virtualized??!1,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??j.isModal(),disallowTypeAhead:()=>n.disallowTypeAhead??!1,shouldFocusWrap:()=>n.shouldFocusWrap??!1,selectedOptions:D,contentPresent:I,autoFocus:x,triggerRef:h,listState:()=>L,keyboardDelegate:O,triggerId:a,valueId:l,listboxId:f,listboxAriaLabelledBy:w,setListboxAriaLabelledBy:_,setTriggerRef:g,setContentRef:m,setListboxRef:v,open:F,close:z,toggle:G,placeholder:()=>n.placeholder,renderItem:R,renderSection:M,removeOptionFromSelection:b,generateId:Mo(()=>We(s.id)),registerTriggerId:ni(c),registerValueId:ni(u),registerListboxId:ni(d)};return A(OR.Provider,{value:Q,get children(){return A(fj.Provider,{value:j,get children(){return A(_p,at({anchorRef:h,contentRef:p},i,{get children(){return A(Ir,at({as:"div",role:"group",get id(){return We(s.id)}},()=>Q.dataset(),k,o))}}))}})}})}function vj(r){const[e,t]=Lt(r,["value","defaultValue","onChange","multiple"]),n=Te(()=>e.value!=null?e.multiple?e.value:[e.value]:e.value),i=Te(()=>e.defaultValue!=null?e.multiple?e.defaultValue:[e.defaultValue]:e.defaultValue);return A(iae,at({get value(){return n()},get defaultValue(){return i()},onChange:o=>{e.multiple?e.onChange?.(o??[]):e.onChange?.(o[0]??null)},get selectionMode(){return e.multiple?"multiple":"single"}},t))}function bj(r){const e=Ic(),t=Cl(),n=Jt({id:t.generateId("trigger")},r),[i,s,o]=Lt(n,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],zq),a=()=>t.listState().selectionManager(),c=()=>t.keyboardDelegate(),l=()=>i.disabled||t.isDisabled(),{fieldProps:u}=qq(s),{typeSelectHandlers:f}=vq({keyboardDelegate:c,selectionManager:a,onTypeSelect:v=>a().select(v)}),d=()=>[t.listboxAriaLabelledBy(),t.valueId()].filter(Boolean).join(" ")||void 0,h=v=>{pr(v,i.onPointerDown),v.currentTarget.dataset.pointerType=v.pointerType,!l()&&v.pointerType!=="touch"&&v.button===0&&(v.preventDefault(),t.toggle(!0))},g=v=>{pr(v,i.onClick),!l()&&v.currentTarget.dataset.pointerType==="touch"&&t.toggle(!0)},p=v=>{if(pr(v,i.onKeyDown),!l())switch(pr(v,f.onKeyDown),v.key){case"Enter":case" ":case"ArrowDown":v.stopPropagation(),v.preventDefault(),t.toggle("first");break;case"ArrowUp":v.stopPropagation(),v.preventDefault(),t.toggle("last");break;case"ArrowLeft":{if(v.preventDefault(),t.isMultiple())return;const w=a().firstSelectedKey(),_=w!=null?c().getKeyAbove?.(w):c().getFirstKey?.();_!=null&&a().select(_);break}case"ArrowRight":{if(v.preventDefault(),t.isMultiple())return;const w=a().firstSelectedKey(),_=w!=null?c().getKeyBelow?.(w):c().getFirstKey?.();_!=null&&a().select(_);break}}},m=v=>{pr(v,i.onFocus),!a().isFocused()&&a().setFocused(!0)},y=v=>{pr(v,i.onBlur),!t.isOpen()&&a().setFocused(!1)};return ot(()=>mt(t.registerTriggerId(u.id()))),ot(()=>{t.setListboxAriaLabelledBy([u.ariaLabelledBy(),u.ariaLabel()&&!u.ariaLabelledBy()?u.id():null].filter(Boolean).join(" ")||void 0)}),A(fd,at({ref(v){var w=Sn(t.setTriggerRef,i.ref);typeof w=="function"&&w(v)},get id(){return u.id()},get disabled(){return l()},"aria-haspopup":"listbox",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return kr(()=>!!t.isOpen())()?t.listboxId():void 0},get"aria-label"(){return u.ariaLabel()},get"aria-labelledby"(){return d()},get"aria-describedby"(){return u.ariaDescribedBy()},onPointerDown:h,onClick:g,onKeyDown:p,onFocus:m,onBlur:y},()=>t.dataset(),()=>e.dataset(),o))}function wj(r){const e=Ic(),t=Cl(),n=Jt({id:t.generateId("value")},r),[i,s]=Lt(n,["id","children"]),o=()=>t.listState().selectionManager(),a=()=>{const c=o().selectedKeys();return c.size===1&&c.has("")?!0:o().isEmpty()};return ot(()=>mt(t.registerValueId(i.id))),A(Ir,at({as:"span",get id(){return i.id},get"data-placeholder-shown"(){return a()?"":void 0}},()=>e.dataset(),s,{get children(){return A(Oe,{get when(){return!a()},get fallback(){return t.placeholder()},get children(){return A(sae,{state:{selectedOption:()=>t.selectedOptions()[0],selectedOptions:()=>t.selectedOptions(),remove:c=>t.removeOptionFromSelection(c),clear:()=>o().clearSelection()},get children(){return i.children}})}})}}))}function sae(r){const e=hp(()=>{const t=r.children;return b1(t)?t(r.state):t});return kr(e)}var ec=Object.assign(vj,{Arrow:hd,Content:dj,Description:PR,ErrorMessage:$R,HiddenSelect:hj,Icon:pj,Item:T1,ItemDescription:R1,ItemIndicator:k1,ItemLabel:O1,Label:gj,Listbox:mj,Portal:yj,Section:P1,Trigger:bj,Value:wj}),oae=fn();function $1(){return rn(oae)}var aae=fn();function xj(){return rn(aae)}var _j=fn();function Sj(){return rn(_j)}function Tl(){const r=Sj();if(r===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return r}var Ej=fn();function BR(){const r=rn(Ej);if(r===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return r}var Aj=fn();function Cc(){const r=rn(Aj);if(r===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return r}function NR(r){let e;const t=Cc(),n=Tl(),i=Jt({id:t.generateId(`item-${Ti()}`)},r),[s,o]=Lt(i,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=Pe(),[l,u]=Pe(),[f,d]=Pe(),h=()=>n.listState().selectionManager(),g=()=>o.id,p=()=>h().focusedKey()===g(),m=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{n.close(!0)})};qse({getItem:()=>({ref:()=>e,type:"item",key:g(),textValue:s.textValue??f()?.textContent??e?.textContent??"",disabled:s.disabled??!1})});const y=xR({key:g,selectionManager:h,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>e),v=C=>{pr(C,s.onPointerMove),C.pointerType==="mouse"&&(s.disabled?n.onItemLeave(C):(n.onItemEnter(C),C.defaultPrevented||(ei(C.currentTarget),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(g()))))},w=C=>{pr(C,s.onPointerLeave),C.pointerType==="mouse"&&n.onItemLeave(C)},_=C=>{pr(C,s.onPointerUp),!s.disabled&&C.button===0&&m()},x=C=>{if(pr(C,s.onKeyDown),!C.repeat&&!s.disabled)switch(C.key){case"Enter":case" ":m();break}},E=Te(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),S=Te(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":p()?"":void 0})),T={isChecked:()=>s.checked,dataset:S,setLabelRef:d,generateId:Mo(()=>o.id),registerLabel:ni(c),registerDescription:ni(u)};return A(Ej.Provider,{value:T,get children(){return A(Ir,at({as:"div",ref(C){var P=Sn(V=>e=V,s.ref);typeof P=="function"&&P(C)},get tabIndex(){return y.tabIndex()},get"aria-checked"(){return E()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return a()},get"aria-describedby"(){return l()},get"data-key"(){return y.dataKey()},get onPointerDown(){return pn([s.onPointerDown,y.onPointerDown])},get onPointerUp(){return pn([_,y.onPointerUp])},get onClick(){return pn([s.onClick,y.onClick])},get onKeyDown(){return pn([x,y.onKeyDown])},get onMouseDown(){return pn([s.onMouseDown,y.onMouseDown])},get onFocus(){return pn([s.onFocus,y.onFocus])},onPointerMove:v,onPointerLeave:w},S,o))}})}function Ij(r){const e=Jt({closeOnSelect:!1},r),[t,n]=Lt(e,["checked","defaultChecked","onChange","onSelect"]),i=lq({isSelected:()=>t.checked,defaultIsSelected:()=>t.defaultChecked,onSelectedChange:o=>t.onChange?.(o),isDisabled:()=>n.disabled});return A(NR,at({role:"menuitemcheckbox",get checked(){return i.isSelected()},onSelect:()=>{t.onSelect?.(),i.toggle()}},n))}var Fg={next:(r,e)=>r==="ltr"?e==="horizontal"?"ArrowRight":"ArrowDown":e==="horizontal"?"ArrowLeft":"ArrowUp",previous:(r,e)=>Fg.next(r==="ltr"?"rtl":"ltr",e)},eO={first:r=>r==="horizontal"?"ArrowDown":"ArrowRight",last:r=>r==="horizontal"?"ArrowUp":"ArrowLeft"};function Cj(r){const e=Cc(),t=Tl(),n=$1(),{direction:i}=Il(),s=Jt({id:e.generateId("trigger")},r),[o,a]=Lt(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let c=()=>e.value();n!==void 0&&(c=()=>e.value()??o.id,n.lastValue()===void 0&&n.setLastValue(c));const l=_1(()=>t.triggerRef(),()=>"button"),u=Te(()=>l()==="a"&&t.triggerRef()?.getAttribute("href")!=null);ot(Pn(()=>n?.value(),y=>{u()&&y===c()&&t.triggerRef()?.focus()}));const f=()=>{n!==void 0?t.isOpen()?n.value()===c()&&n.closeMenu():(n.autoFocusMenu()||n.setAutoFocusMenu(!0),t.open(!1)):t.toggle(!0)},d=y=>{pr(y,o.onPointerDown),y.currentTarget.dataset.pointerType=y.pointerType,!o.disabled&&y.pointerType!=="touch"&&y.button===0&&f()},h=y=>{pr(y,o.onClick),o.disabled||y.currentTarget.dataset.pointerType==="touch"&&f()},g=y=>{if(pr(y,o.onKeyDown),!o.disabled){if(u())switch(y.key){case"Enter":case" ":return}switch(y.key){case"Enter":case" ":case eO.first(e.orientation()):y.stopPropagation(),y.preventDefault(),Tie(y.currentTarget),t.open("first"),n?.setAutoFocusMenu(!0),n?.setValue(c);break;case eO.last(e.orientation()):y.stopPropagation(),y.preventDefault(),t.open("last");break;case Fg.next(i(),e.orientation()):if(n===void 0)break;y.stopPropagation(),y.preventDefault(),n.nextMenu();break;case Fg.previous(i(),e.orientation()):if(n===void 0)break;y.stopPropagation(),y.preventDefault(),n.previousMenu();break}}},p=y=>{pr(y,o.onMouseOver),t.triggerRef()?.dataset.pointerType!=="touch"&&!o.disabled&&n!==void 0&&n.value()!==void 0&&n.setValue(c)},m=y=>{pr(y,o.onFocus),n!==void 0&&y.currentTarget.dataset.pointerType!=="touch"&&n.setValue(c)};return ot(()=>mt(t.registerTriggerId(o.id))),A(fd,at({ref(y){var v=Sn(t.setTriggerRef,o.ref);typeof v=="function"&&v(y)},get"data-kb-menu-value-trigger"(){return e.value()},get id(){return o.id},get disabled(){return o.disabled},"aria-haspopup":"true",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return kr(()=>!!t.isOpen())()?t.contentId():void 0},get"data-highlighted"(){return c()!==void 0&&n?.value()===c()?!0:void 0},get tabIndex(){return n!==void 0?n.value()===c()||n.lastValue()===c()?0:-1:void 0},onPointerDown:d,onMouseOver:p,onClick:h,onKeyDown:g,onFocus:m,role:n!==void 0?"menuitem":void 0},()=>t.dataset(),a))}function Tj(r){let e;const t=Cc(),n=Tl(),i=$1(),s=xj(),{direction:o}=Il(),a=Jt({id:t.generateId(`content-${Ti()}`)},r),[c,l]=Lt(a,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let u=0;const f=()=>n.parentMenuContext()==null&&i===void 0&&t.isModal(),d=aj({selectionManager:n.listState().selectionManager,collection:n.listState().collection,autoFocus:n.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!n.listState().selectionManager().isFocused(),orientation:()=>t.orientation()==="horizontal"?"vertical":"horizontal"},()=>e);vR({trapFocus:()=>f()&&n.isOpen(),onMountAutoFocus:w=>{i===void 0&&c.onOpenAutoFocus?.(w)},onUnmountAutoFocus:c.onCloseAutoFocus},()=>e);const h=w=>{if(bs(w.currentTarget,w.target)&&(w.key==="Tab"&&n.isOpen()&&w.preventDefault(),i!==void 0&&w.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(w.key){case Fg.next(o(),t.orientation()):w.stopPropagation(),w.preventDefault(),n.close(!0),i.setAutoFocusMenu(!0),i.nextMenu();break;case Fg.previous(o(),t.orientation()):if(w.currentTarget.hasAttribute("data-closed"))break;w.stopPropagation(),w.preventDefault(),n.close(!0),i.setAutoFocusMenu(!0),i.previousMenu();break}},g=w=>{c.onEscapeKeyDown?.(w),i?.setAutoFocusMenu(!1),n.close(!0)},p=w=>{c.onFocusOutside?.(w),t.isModal()&&w.preventDefault()},m=w=>{pr(w,c.onPointerEnter),n.isOpen()&&(n.parentMenuContext()?.listState().selectionManager().setFocused(!1),n.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},y=w=>{if(pr(w,c.onPointerMove),w.pointerType!=="mouse")return;const _=w.target,x=u!==w.clientX;bs(w.currentTarget,_)&&x&&(n.setPointerDir(w.clientX>u?"right":"left"),u=w.clientX)};ot(()=>mt(n.registerContentId(c.id))),mt(()=>n.setContentRef(void 0));const v={ref:Sn(w=>{n.setContentRef(w),e=w},c.ref),role:"menu",get id(){return c.id},get tabIndex(){return d.tabIndex()},get"aria-labelledby"(){return n.triggerId()},onKeyDown:pn([c.onKeyDown,d.onKeyDown,h]),onMouseDown:pn([c.onMouseDown,d.onMouseDown]),onFocusIn:pn([c.onFocusIn,d.onFocusIn]),onFocusOut:pn([c.onFocusOut,d.onFocusOut]),onPointerEnter:m,onPointerMove:y,get"data-orientation"(){return t.orientation()}};return A(Oe,{get when(){return n.contentPresent()},get children(){return A(Oe,{get when(){return s===void 0||n.parentMenuContext()!=null},get fallback(){return A(Ir,at({as:"div"},()=>n.dataset(),v,l))},get children(){return A(_p.Positioner,{get children(){return A(w1,at({get disableOutsidePointerEvents(){return kr(()=>!!f())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return Sc({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onEscapeKeyDown:g,onFocusOutside:p,get onDismiss(){return n.close}},()=>n.dataset(),v,l))}})}})}})}function cae(r){let e;const t=Cc(),n=Tl(),[i,s]=Lt(r,["ref"]);return wR({element:()=>e??null,enabled:()=>n.contentPresent()&&t.preventScroll()}),A(Tj,at({ref(o){var a=Sn(c=>{e=c},i.ref);typeof a=="function"&&a(o)}},s))}var Rj=fn();function lae(){const r=rn(Rj);if(r===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return r}function LR(r){const e=Cc(),t=Jt({id:e.generateId(`group-${Ti()}`)},r),[n,i]=Pe(),s={generateId:Mo(()=>t.id),registerLabelId:ni(i)};return A(Rj.Provider,{value:s,get children(){return A(Ir,at({as:"div",role:"group",get"aria-labelledby"(){return n()}},t))}})}function kj(r){const e=lae(),t=Jt({id:e.generateId("label")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerLabelId(n.id))),A(Ir,at({as:"span",get id(){return n.id},"aria-hidden":"true"},i))}function Oj(r){const e=Tl(),t=Jt({children:""},r);return A(Ir,at({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function Pj(r){return A(NR,at({role:"menuitem",closeOnSelect:!0},r))}function $j(r){const e=BR(),t=Jt({id:e.generateId("description")},r),[n,i]=Lt(t,["id"]);return ot(()=>mt(e.registerDescription(n.id))),A(Ir,at({as:"div",get id(){return n.id}},()=>e.dataset(),i))}function Dj(r){const e=BR(),t=Jt({id:e.generateId("indicator")},r),[n,i]=Lt(t,["forceMount"]);return A(Oe,{get when(){return n.forceMount||e.isChecked()},get children(){return A(Ir,at({as:"div"},()=>e.dataset(),i))}})}function Mj(r){const e=BR(),t=Jt({id:e.generateId("label")},r),[n,i]=Lt(t,["ref","id"]);return ot(()=>mt(e.registerLabel(n.id))),A(Ir,at({as:"div",ref(s){var o=Sn(e.setLabelRef,n.ref);typeof o=="function"&&o(s)},get id(){return n.id}},()=>e.dataset(),i))}function Bj(r){const e=Tl();return A(Oe,{get when(){return e.contentPresent()},get children(){return A(g1,r)}})}var Nj=fn();function uae(){const r=rn(Nj);if(r===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return r}function Lj(r){const t=Cc().generateId(`radiogroup-${Ti()}`),n=Jt({id:t},r),[i,s]=Lt(n,["value","defaultValue","onChange","disabled"]),[o,a]=x1({value:()=>i.value,defaultValue:()=>i.defaultValue,onChange:l=>i.onChange?.(l)}),c={isDisabled:()=>i.disabled,isSelectedValue:l=>l===o(),setSelectedValue:l=>a(l)};return A(Nj.Provider,{value:c,get children(){return A(LR,s)}})}function Fj(r){const e=uae(),t=Jt({closeOnSelect:!1},r),[n,i]=Lt(t,["value","onSelect"]);return A(NR,at({role:"menuitemradio",get checked(){return e.isSelectedValue(n.value)},onSelect:()=>{n.onSelect?.(),e.setSelectedValue(n.value)}},i))}function fae(r,e,t){const n=r.split("-")[0],i=t.getBoundingClientRect(),s=[],o=e.clientX,a=e.clientY;switch(n){case"top":s.push([o,a+5]),s.push([i.left,i.bottom]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]);break;case"right":s.push([o-5,a]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]);break;case"bottom":s.push([o,a-5]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]),s.push([i.left,i.top]);break;case"left":s.push([o+5,a]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]),s.push([i.left,i.top]),s.push([i.right,i.top]);break}return s}function dae(r,e){return e?Hz([r.clientX,r.clientY],e):!1}function Uj(r){const e=Cc(),t=wq(),n=Sj(),i=$1(),s=xj(),o=Jt({placement:e.orientation()==="horizontal"?"bottom-start":"right-start"},r),[a,c]=Lt(o,["open","defaultOpen","onOpenChange"]);let l=0,u=null,f="right";const[d,h]=Pe(),[g,p]=Pe(),[m,y]=Pe(),[v,w]=Pe(),[_,x]=Pe(!0),[E,S]=Pe(c.placement),[T,C]=Pe([]),[P,V]=Pe([]),{DomCollectionProvider:L}=zse({items:P,onItemsChange:V}),D=vp({open:()=>a.open,defaultOpen:()=>a.defaultOpen,onOpenChange:ae=>a.onOpenChange?.(ae)}),{present:b}=Kh({show:()=>e.forceMount()||D.isOpen(),element:()=>v()??null}),I=_R({selectionMode:"none",dataSource:P}),B=ae=>{x(ae),D.open()},F=(ae=!1)=>{D.close(),ae&&n&&n.close(!0)},z=ae=>{x(ae),D.toggle()},G=()=>{const ae=v();ae&&(ei(ae),I.selectionManager().setFocused(!0),I.selectionManager().setFocusedKey(void 0))},Q=()=>{s!=null?setTimeout(()=>G()):G()},X=ae=>{C(re=>[...re,ae]);const he=n?.registerNestedMenu(ae);return()=>{C(re=>OI(re,ae)),he?.()}},O=ae=>f===u?.side&&dae(ae,u?.area),R=ae=>{O(ae)&&ae.preventDefault()},M=ae=>{O(ae)||Q()},k=ae=>{O(ae)&&ae.preventDefault()};bR({isDisabled:()=>!(n==null&&D.isOpen()&&e.isModal()),targets:()=>[v(),...T()].filter(Boolean)}),ot(()=>{const ae=v();if(!ae||!n)return;const he=n.registerNestedMenu(ae);mt(()=>{he()})}),ot(()=>{n===void 0&&i?.registerMenu(e.value(),[v(),...T()])}),ot(()=>{n!==void 0||i===void 0||(i.value()===e.value()?(m()?.focus(),i.autoFocusMenu()&&B(!0)):F())}),ot(()=>{n!==void 0||i===void 0||D.isOpen()&&i.setValue(e.value())}),mt(()=>{n===void 0&&i?.unregisterMenu(e.value())});const te={dataset:Te(()=>({"data-expanded":D.isOpen()?"":void 0,"data-closed":D.isOpen()?void 0:""})),isOpen:D.isOpen,contentPresent:b,nestedMenus:T,currentPlacement:E,pointerGraceTimeoutId:()=>l,autoFocus:_,listState:()=>I,parentMenuContext:()=>n,triggerRef:m,contentRef:v,triggerId:d,contentId:g,setTriggerRef:y,setContentRef:w,open:B,close:F,toggle:z,focusContent:Q,onItemEnter:R,onItemLeave:M,onTriggerLeave:k,setPointerDir:ae=>f=ae,setPointerGraceTimeoutId:ae=>l=ae,setPointerGraceIntent:ae=>u=ae,registerNestedMenu:X,registerItemToParentDomCollection:t?.registerItem,registerTriggerId:ni(h),registerContentId:ni(p)};return A(L,{get children(){return A(_j.Provider,{value:te,get children(){return A(Oe,{when:s===void 0,get fallback(){return c.children},get children(){return A(_p,at({anchorRef:m,contentRef:v,onCurrentPlacementChange:S},c))}})}})}})}function zj(r){const{direction:e}=Il();return A(Uj,at({get placement(){return e()==="rtl"?"left-start":"right-start"},flip:!0},r))}var hae={close:(r,e)=>r==="ltr"?[e==="horizontal"?"ArrowLeft":"ArrowUp"]:[e==="horizontal"?"ArrowRight":"ArrowDown"]};function qj(r){const e=Tl(),t=Cc(),[n,i]=Lt(r,["onFocusOutside","onKeyDown"]),{direction:s}=Il();return A(Tj,at({onOpenAutoFocus:u=>{u.preventDefault()},onCloseAutoFocus:u=>{u.preventDefault()},onFocusOutside:u=>{n.onFocusOutside?.(u);const f=u.target;bs(e.triggerRef(),f)||e.close()},onKeyDown:u=>{pr(u,n.onKeyDown);const f=bs(u.currentTarget,u.target),d=hae.close(s(),t.orientation()).includes(u.key),h=e.parentMenuContext()!=null;f&&d&&h&&(e.close(),ei(e.triggerRef()))}},i))}var tO=["Enter"," "],pae={open:(r,e)=>r==="ltr"?[...tO,e==="horizontal"?"ArrowRight":"ArrowDown"]:[...tO,e==="horizontal"?"ArrowLeft":"ArrowUp"]};function jj(r){let e;const t=Cc(),n=Tl(),i=Jt({id:t.generateId(`sub-trigger-${Ti()}`)},r),[s,o]=Lt(i,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let a=null;const c=()=>{a&&window.clearTimeout(a),a=null},{direction:l}=Il(),u=()=>s.id,f=()=>{const w=n.parentMenuContext();if(w==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return w.listState().selectionManager()},d=()=>n.listState().collection(),h=()=>f().focusedKey()===u(),g=xR({key:u,selectionManager:f,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>e),p=w=>{pr(w,s.onClick),!n.isOpen()&&!s.disabled&&n.open(!0)},m=w=>{if(pr(w,s.onPointerMove),w.pointerType!=="mouse")return;const _=n.parentMenuContext();if(_?.onItemEnter(w),!w.defaultPrevented){if(s.disabled){_?.onItemLeave(w);return}!n.isOpen()&&!a&&(n.parentMenuContext()?.setPointerGraceIntent(null),a=window.setTimeout(()=>{n.open(!1),c()},100)),_?.onItemEnter(w),w.defaultPrevented||(n.listState().selectionManager().isFocused()&&(n.listState().selectionManager().setFocused(!1),n.listState().selectionManager().setFocusedKey(void 0)),ei(w.currentTarget),_?.listState().selectionManager().setFocused(!0),_?.listState().selectionManager().setFocusedKey(u()))}},y=w=>{if(pr(w,s.onPointerLeave),w.pointerType!=="mouse")return;c();const _=n.parentMenuContext(),x=n.contentRef();if(x){_?.setPointerGraceIntent({area:fae(n.currentPlacement(),w,x),side:n.currentPlacement().split("-")[0]}),window.clearTimeout(_?.pointerGraceTimeoutId());const E=window.setTimeout(()=>{_?.setPointerGraceIntent(null)},300);_?.setPointerGraceTimeoutId(E)}else{if(_?.onTriggerLeave(w),w.defaultPrevented)return;_?.setPointerGraceIntent(null)}_?.onItemLeave(w)},v=w=>{pr(w,s.onKeyDown),!w.repeat&&(s.disabled||pae.open(l(),t.orientation()).includes(w.key)&&(w.stopPropagation(),w.preventDefault(),f().setFocused(!1),f().setFocusedKey(void 0),n.isOpen()||n.open("first"),n.focusContent(),n.listState().selectionManager().setFocused(!0),n.listState().selectionManager().setFocusedKey(d().getFirstKey())))};return ot(()=>{if(n.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const w=n.registerItemToParentDomCollection({ref:()=>e,type:"item",key:u(),textValue:s.textValue??e?.textContent??"",disabled:s.disabled??!1});mt(w)}),ot(Pn(()=>n.parentMenuContext()?.pointerGraceTimeoutId(),w=>{mt(()=>{window.clearTimeout(w),n.parentMenuContext()?.setPointerGraceIntent(null)})})),ot(()=>mt(n.registerTriggerId(s.id))),mt(()=>{c()}),A(Ir,at({as:"div",ref(w){var _=Sn(x=>{n.setTriggerRef(x),e=x},s.ref);typeof _=="function"&&_(w)},get id(){return s.id},role:"menuitem",get tabIndex(){return g.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return kr(()=>!!n.isOpen())()?n.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return g.dataKey()},get"data-highlighted"(){return h()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return pn([s.onPointerDown,g.onPointerDown])},get onPointerUp(){return pn([s.onPointerUp,g.onPointerUp])},get onClick(){return pn([p,g.onClick])},get onKeyDown(){return pn([v,g.onKeyDown])},get onMouseDown(){return pn([s.onMouseDown,g.onMouseDown])},get onFocus(){return pn([s.onFocus,g.onFocus])},onPointerMove:m,onPointerLeave:y},()=>n.dataset(),o))}function gae(r){const e=$1(),t=`menu-${Ti()}`,n=Jt({id:t,modal:!0},r),[i,s]=Lt(n,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),o=vp({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:c=>i.onOpenChange?.(c)}),a={isModal:()=>i.modal??!0,preventScroll:()=>i.preventScroll??a.isModal(),forceMount:()=>i.forceMount??!1,generateId:Mo(()=>i.id),value:()=>i.value,orientation:()=>i.orientation??e?.orientation()??"horizontal"};return A(Aj.Provider,{value:a,get children(){return A(Uj,at({get open(){return o.isOpen()},get onOpenChange(){return o.setIsOpen}},s))}})}var mae={};Ec(mae,{Root:()=>D1,Separator:()=>yae});function D1(r){let e;const t=Jt({orientation:"horizontal"},r),[n,i]=Lt(t,["ref","orientation"]),s=_1(()=>e,()=>"hr");return A(Ir,at({as:"hr",ref(o){var a=Sn(c=>e=c,n.ref);typeof a=="function"&&a(o)},get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return n.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return n.orientation}},i))}var yae=D1,Tn={};Ec(Tn,{Arrow:()=>hd,CheckboxItem:()=>Ij,Content:()=>Vj,DropdownMenu:()=>vae,Group:()=>LR,GroupLabel:()=>kj,Icon:()=>Oj,Item:()=>Pj,ItemDescription:()=>$j,ItemIndicator:()=>Dj,ItemLabel:()=>Mj,Portal:()=>Bj,RadioGroup:()=>Lj,RadioItem:()=>Fj,Root:()=>Kj,Separator:()=>D1,Sub:()=>zj,SubContent:()=>qj,SubTrigger:()=>jj,Trigger:()=>Cj});function Vj(r){const e=Cc(),t=Tl(),[n,i]=Lt(r,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return A(cae,at({onCloseAutoFocus:c=>{n.onCloseAutoFocus?.(c),s||ei(t.triggerRef()),s=!1,c.preventDefault()},onInteractOutside:c=>{n.onInteractOutside?.(c),(!e.isModal()||c.detail.isContextMenu)&&(s=!0)}},i))}function Kj(r){const e=`dropdownmenu-${Ti()}`,t=Jt({id:e},r);return A(gae,t)}var vae=Object.assign(Kj,{Arrow:hd,CheckboxItem:Ij,Content:Vj,Group:LR,GroupLabel:kj,Icon:Oj,Item:Pj,ItemDescription:$j,ItemIndicator:Dj,ItemLabel:Mj,Portal:Bj,RadioGroup:Lj,RadioItem:Fj,Separator:D1,Sub:zj,SubContent:qj,SubTrigger:jj,Trigger:Cj}),bae={};Ec(bae,{Collapsible:()=>$f,Content:()=>Wj,Root:()=>Gj,Trigger:()=>Yj,useCollapsibleContext:()=>FR});var Hj=fn();function FR(){const r=rn(Hj);if(r===void 0)throw new Error("[kobalte]: `useCollapsibleContext` must be used within a `Collapsible.Root` component");return r}function Wj(r){const[e,t]=Pe(),n=FR(),i=Jt({id:n.generateId("content")},r),[s,o]=Lt(i,["ref","id","style"]),{present:a}=Kh({show:n.shouldMount,element:()=>e()??null}),[c,l]=Pe(0),[u,f]=Pe(0);let h=n.isOpen()||a();return mr(()=>{const g=requestAnimationFrame(()=>{h=!1});mt(()=>{cancelAnimationFrame(g)})}),ot(Pn(a,()=>{if(!e())return;e().style.transitionDuration="0s",e().style.animationName="none";const g=e().getBoundingClientRect();l(g.height),f(g.width),h||(e().style.transitionDuration="",e().style.animationName="")})),ot(Pn(n.isOpen,g=>{!g&&e()&&(e().style.transitionDuration="",e().style.animationName="")},{defer:!0})),ot(()=>mt(n.registerContentId(s.id))),A(Oe,{get when(){return a()},get children(){return A(Ir,at({as:"div",ref(g){var p=Sn(t,s.ref);typeof p=="function"&&p(g)},get id(){return s.id},get style(){return Sc({"--kb-collapsible-content-height":c()?`${c()}px`:void 0,"--kb-collapsible-content-width":u()?`${u()}px`:void 0},s.style)}},()=>n.dataset(),o))}})}function Gj(r){const e=`collapsible-${Ti()}`,t=Jt({id:e},r),[n,i]=Lt(t,["open","defaultOpen","onOpenChange","disabled","forceMount"]),[s,o]=Pe(),a=vp({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:u=>n.onOpenChange?.(u)}),c=Te(()=>({"data-expanded":a.isOpen()?"":void 0,"data-closed":a.isOpen()?void 0:"","data-disabled":n.disabled?"":void 0})),l={dataset:c,isOpen:a.isOpen,disabled:()=>n.disabled??!1,shouldMount:()=>n.forceMount||a.isOpen(),contentId:s,toggle:a.toggle,generateId:Mo(()=>i.id),registerContentId:ni(o)};return A(Hj.Provider,{value:l,get children(){return A(Ir,at({as:"div"},c,i))}})}function Yj(r){const e=FR(),[t,n]=Lt(r,["onClick"]);return A(fd,at({get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return kr(()=>!!e.isOpen())()?e.contentId():void 0},get disabled(){return e.disabled()},onClick:s=>{pr(s,t.onClick),e.toggle()}},()=>e.dataset(),n))}var $f=Object.assign(Gj,{Content:Wj,Trigger:Yj}),wae=le("<span>"),xae=le('<nav class="fixed bottom-0 left-0 border-t border-r rounded-tr border-red-600 z-100 bg-red-950 flex items-center text-sm">');const _ae=()=>{const r=ld();return(()=>{var e=xae();return Z(e,A(Tn.Root,{get children(){return[A(Tn.Trigger,{class:"cursor-pointer min-w-12 text-center px-1 hover:bg-red-900",get children(){var t=wae();return Z(t,()=>r.pathname),t}}),A(Tn.Portal,{get children(){return A(Tn.Content,{class:"z-100 text-sm bg-red-950 border border-red-600 rounded",get children(){return A(pt,{get each(){return Object.values(Qe).filter(t=>typeof t=="string")},children:t=>A(Tn.Item,{class:"flex hover:bg-red-900 rounded",get children(){return A(Aee,{href:t,class:"flex-1 p-1",children:t})}})})}})}})]}})),e})()},Im=r=>{const[e,t]=Pe(!1);return ot(Pn(e,n=>r.onOpenChange?.(n))),A(el,{openDelay:0,closeDelay:0,get open(){return e()},onOpenChange:n=>t(n),get children(){return[A(el.Trigger,{class:"cursor-pointer flex items-center",onMouseDown:()=>requestAnimationFrame(()=>t(!0)),onMouseUp:()=>requestAnimationFrame(()=>t(!0)),get children(){return r.trigger}}),A(el.Portal,{get children(){return A(el.Content,{class:"z-999",onClick:n=>n.stopImmediatePropagation(),get children(){return r.content}})}})]}})};var Sae=le('<svg viewBox="0 0 256 256"fill=none xmlns=http://www.w3.org/2000/svg><path d="M26.1464 199.614C36.7084 214.305 50.2565 226.598 65.9023 235.686C81.5482 244.774 98.9383 250.452 116.932 252.348C107.675 238.417 94.218 225.6 77.4183 215.842C60.6186 206.084 42.8275 200.754 26.1464 199.614Z"fill=url(#paint0_linear_13278_146915)></path><path d="M99.9925 176.988C67.6261 158.185 32.5947 153.393 7.52861 161.858C9.94843 169.856 13.1398 177.599 17.0576 184.979C38.8358 184.475 62.6138 190.39 84.7394 203.241C106.865 216.092 123.787 233.828 134.143 253C142.499 252.743 150.811 251.679 158.963 249.822C153.896 223.858 132.35 195.796 99.9925 176.988Z"fill=url(#paint1_linear_13278_146915)></path><path d="M254.229 100.663C250.113 83.925 242.668 68.1877 232.336 54.3909C222.004 40.5942 208.997 29.0209 194.093 20.3621C179.189 11.7034 162.693 6.13675 145.59 3.99461C128.487 1.85247 111.128 3.17875 94.5489 7.89426C122.246 11.2839 152.99 21.6814 183.14 39.1972C213.291 56.7129 237.573 78.2665 254.229 100.663Z"fill=url(#paint2_linear_13278_146915)></path><path d="M213.93 162.049C199.753 138.505 175.467 115.959 145.55 98.5793C115.632 81.1992 84.0242 71.2719 56.5727 70.6152C32.4219 70.0432 14.296 77.0639 6.85584 89.8723C6.81347 89.9486 6.75415 90.0206 6.70754 90.0969C6.0381 92.4992 5.46187 94.9058 4.93648 97.3209C15.3256 93.2195 27.3629 90.9358 40.7476 90.6816C70.5124 90.1223 103.824 99.6428 134.563 117.502C165.302 135.361 190.093 159.592 204.346 185.717C210.736 197.488 214.723 209.076 216.303 220.147C218.142 218.503 219.947 216.804 221.697 215.037C221.743 214.957 221.773 214.872 221.82 214.787C229.26 201.966 226.383 182.747 213.93 162.049Z"fill=url(#paint3_linear_13278_146915)></path><path d="M122.788 137.754C76.9736 111.137 26.3458 106.968 2 125.543C2.04782 131.357 2.49231 137.161 3.3304 142.915C10.4921 140.744 17.8732 139.377 25.3373 138.839C52.5431 136.792 82.5368 144.372 109.755 160.193C136.974 176.014 158.43 198.326 170.132 222.956C173.367 229.703 175.834 236.792 177.488 244.09C182.902 241.967 188.167 239.48 193.245 236.646C197.321 206.292 168.616 164.375 122.788 137.754Z"fill=url(#paint4_linear_13278_146915)></path><path d="M237.496 122.641C223.158 99.1218 198.659 76.5132 168.53 59.0187C138.401 41.5241 106.67 31.4401 79.1295 30.6308C58.1352 30.0249 41.8736 35.1135 33.4419 44.7273C68.4522 38.7955 114.631 48.7651 159.391 74.7676C204.15 100.77 235.699 135.954 247.876 169.303C252.05 157.224 248.419 140.577 237.496 122.641Z"fill=url(#paint5_linear_13278_146915)></path><defs><linearGradient id=paint0_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint1_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint2_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint3_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint4_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7></stop></linearGradient><linearGradient id=paint5_linear_13278_146915 x1=169.969 y1=53.7813 x2=54.0834 y2=253 gradientUnits=userSpaceOnUse><stop offset=0.0001 stop-color=#A4D756></stop><stop offset=1 stop-color=#00B6E7>');const Sp=r=>(()=>{var e=Sae();return un(e,r,!0,!0),e})();var Eae=le('<svg viewBox="0 0 32 32"fill=none xmlns=http://www.w3.org/2000/svg><path d="M6.27794 5.30859H17.9446L10.1668 21.8364H4.3335L6.27794 5.30859Z"></path><path d="M25.7223 26.7007H14.0557L21.8335 10.1729H27.6668L25.7223 26.7007Z">');const UR=r=>(()=>{var e=Eae();return un(e,r,!0,!0),e})();var Aae=le(`<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 768.91 669.35"><path d="M0,479.29v190.06h289.22V627.2H42.14V479.29H0z M726.77,479.29V627.2H479.69v42.14h289.22V479.29H726.77z M289.64,190.06
	v289.22h190.05v-38.01H331.78V190.06H289.64z M0,0v190.06h42.14V42.14h247.08V0H0z M479.69,0v42.14h247.08v147.92h42.14V0H479.69z">`);const zR=r=>(()=>{var e=Aae();return un(e,r,!0,!0),e})(),Iae={path:"/api/v1/analytics_events",method:"POST"},Cae={path:"/api/v1/apps/:app_id",method:"GET"},Tae={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},Rae={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"},kae={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},Oae={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},Pae={path:"/api/v1/farcaster/init",method:"POST"},$ae={path:"/api/v1/farcaster/authenticate",method:"POST"},Dae={path:"/api/v1/farcaster/link",method:"POST"},Mae={path:"/api/v1/farcaster/unlink",method:"POST"},Bae={path:"/api/v1/farcaster/status",method:"GET"},Nae={path:"/api/v2/farcaster/init",method:"POST"},Lae={path:"/api/v2/farcaster/authenticate",method:"POST"},Fae={path:"/api/v1/guest/authenticate",method:"POST"},Uae={path:"/api/v1/mfa/passkeys/init",method:"POST"},zae={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"},qae={path:"/api/v1/oauth/authenticate",method:"POST"},jae={path:"/api/v1/oauth/init",method:"POST"},Vae={path:"/api/v1/oauth/link",method:"POST"},Kae={path:"/api/v1/oauth/unlink",method:"POST"},Hae={path:"/api/v1/passkeys/link",method:"POST"},Wae={path:"/api/v1/passkeys/authenticate",method:"POST"},Gae={path:"/api/v1/passkeys/register",method:"POST"},Yae={path:"/api/v1/passkeys/authenticate/init",method:"POST"},Jae={path:"/api/v1/passkeys/register/init",method:"POST"},Xae={path:"/api/v1/passkeys/link/init",method:"POST"},Zae={path:"/api/v1/passwordless/authenticate",method:"POST"},Qae={path:"/api/v1/passwordless/init",method:"POST"},ece={path:"/api/v1/passwordless/link",method:"POST"},tce={path:"/api/v1/passwordless/unlink",method:"POST"},rce={path:"/api/v1/passwordless/update",method:"POST"},nce={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},ice={path:"/api/v1/passwordless_sms/init",method:"POST"},sce={path:"/api/v1/passwordless_sms/link",method:"POST"},oce={path:"/api/v1/passwordless_sms/unlink",method:"POST"},ace={path:"/api/v1/passwordless_sms/update",method:"POST"},cce={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},lce={path:"/api/v1/recovery/oauth/init",method:"POST"},uce={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},fce={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},dce={path:"/api/v1/recovery/configuration_icloud",method:"POST"},hce=(r,e)=>e?Object.entries(e).reduce((t,[n,i])=>t.replace(`:${n}`,`${i}`),r):r,rO={path:"/api/v1/sessions",method:"POST"},pce={path:"/api/v1/sessions/logout",method:"POST"},gce={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"},Jj={path:"/api/v1/siwe/init",method:"POST"},mce={path:"/api/v1/siwe/authenticate",method:"POST"},yce={path:"/api/v1/siwe/link",method:"POST"},vce={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},bce={path:"/api/v1/siwe/unlink",method:"POST"},wce={path:"/api/v1/siws/init",method:"POST"},xce={path:"/api/v1/siws/authenticate",method:"POST"},_ce={path:"/api/v1/siws/link",method:"POST"},Sce={path:"/api/v1/siws/unlink",method:"POST"},Ece={path:"/api/v1/users/me/accept_terms",method:"POST"},Ace={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"},Ice={path:"/api/v1/wallets",method:"POST"},xx={path:"/api/v1/wallets/:wallet_id/rpc",method:"POST"},Cce={path:"/api/v1/wallets/revoke",method:"POST"};var Qt,nO=((Qt={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",Qt.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Qt.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",Qt.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Qt.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",Qt.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",Qt.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",Qt.INVALID_DATA="invalid_data",Qt.INVALID_CREDENTIALS="invalid_credentials",Qt.INVALID_CAPTCHA="invalid_captcha",Qt.LINKED_TO_ANOTHER_USER="linked_to_another_user",Qt.ALLOWLIST_REJECTED="allowlist_rejected",Qt.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",Qt.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",Qt.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",Qt.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",Qt.TOO_MANY_REQUESTS="too_many_requests",Qt.INVALID_ORIGIN="invalid_origin",Qt.MISSING_ORIGIN="missing_origin",Qt.INVALID_NATIVE_APP_ID="invalid_native_app_id",Qt.TOKEN_ALREADY_USED="token_already_used",Qt.ALREADY_LOGGED_OUT="already_logged_out",Qt.NOT_SUPPORTED="not_supported",Qt.USER_UNSUBSCRIBED="user_unsubscribed",Qt.MAX_APPS_REACHED="max_apps_reached",Qt.USER_LIMIT_REACHED="max_accounts_reached",Qt.DEVICE_REVOKED="device_revoked",Qt.WALLET_PASSWORD_EXISTS="wallet_password_exists",Qt.OAUTH_STATE_MISMATCH="oauth_state_mismatch",Qt.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",Qt.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",Qt.DISALLOWED_LOGIN_METHOD="disallowed_login_method",Qt.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",Qt.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",Qt.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",Qt.CANNOT_SET_PASSWORD="cannot_set_password",Qt.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",Qt.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",Qt.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",Qt.USER_DOES_NOT_EXIST="user_does_not_exist",Qt.ALREADY_EXISTS="resource_already_exists",Qt.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",Qt.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",Qt.FEATURE_NOT_ENABLED="feature_not_enabled",Qt.INSUFFICIENT_FUNDS="insufficient_funds",Qt.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",Qt.INVALID_POLICY_FORMAT="invalid_policy_format",Qt.POLICY_VIOLATION="policy_violation",Qt.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",Qt.INVALID_REQUEST="invalid_request",Qt);const ly=BigInt(2**32-1),iO=BigInt(32);function Tce(r,e=!1){return e?{h:Number(r&ly),l:Number(r>>iO&ly)}:{h:Number(r>>iO&ly)|0,l:Number(r&ly)|0}}function Rce(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=Tce(r[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const sO=(r,e,t)=>r>>>t,oO=(r,e,t)=>r<<32-t|e>>>t,Od=(r,e,t)=>r>>>t|e<<32-t,Pd=(r,e,t)=>r<<32-t|e>>>t,uy=(r,e,t)=>r<<64-t|e>>>t-32,fy=(r,e,t)=>r>>>t-32|e<<64-t;function Nc(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const kce=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Oce=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Pce=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),$ce=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,Dce=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Mce=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,$d=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qR(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Df(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function $o(r,...e){if(!qR(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Xj(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Df(r.outputLen),Df(r.blockLen)}function ab(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Bce(r,e){$o(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function yl(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Ah(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ga(r,e){return r<<32-e|r>>>e}function dy(r,e){return r<<e|r>>>32-e>>>0}const Zj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Nce=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Du(r){if($o(r),Zj)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=Nce[r[t]];return e}const Lc={_0:48,_9:57,A:65,F:70,a:97,f:102};function aO(r){if(r>=Lc._0&&r<=Lc._9)return r-Lc._0;if(r>=Lc.A&&r<=Lc.F)return r-(Lc.A-10);if(r>=Lc.a&&r<=Lc.f)return r-(Lc.a-10)}function M1(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Zj)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=aO(r.charCodeAt(s)),a=aO(r.charCodeAt(s+1));if(o===void 0||a===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function jR(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function VR(r){return typeof r=="string"&&(r=jR(r)),$o(r),r}function cO(r){return typeof r=="string"&&(r=jR(r)),$o(r),r}function _a(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];$o(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function Lce(r,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(r,e)}let Qj=class{};function KR(r){const e=n=>r().update(VR(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function HR(r=32){if($d&&typeof $d.getRandomValues=="function")return $d.getRandomValues(new Uint8Array(r));if($d&&typeof $d.randomBytes=="function")return Uint8Array.from($d.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Fce(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function Uce(r,e,t){return r&e^~r&t}function zce(r,e,t){return r&e^r&t^e&t}let WR=class extends Qj{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ah(this.buffer)}update(e){ab(this),e=VR(e),$o(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Ah(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ab(this),Bce(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,yl(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)t[f]=0;Fce(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Ah(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Ll=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ss=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),qce=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fl=new Uint32Array(64);class jce extends WR{constructor(e=32){super(64,e,8,!1),this.A=Ll[0]|0,this.B=Ll[1]|0,this.C=Ll[2]|0,this.D=Ll[3]|0,this.E=Ll[4]|0,this.F=Ll[5]|0,this.G=Ll[6]|0,this.H=Ll[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Fl[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=Fl[f-15],h=Fl[f-2],g=Ga(d,7)^Ga(d,18)^d>>>3,p=Ga(h,17)^Ga(h,19)^h>>>10;Fl[f]=p+Fl[f-7]+g+Fl[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Ga(a,6)^Ga(a,11)^Ga(a,25),h=u+d+Uce(a,c,l)+qce[f]+Fl[f]|0,p=(Ga(n,2)^Ga(n,13)^Ga(n,22))+zce(n,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=n,n=h+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){yl(Fl)}destroy(){this.set(0,0,0,0,0,0,0,0),yl(this.buffer)}}const eV=Rce(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Vce=eV[0],Kce=eV[1],Ul=new Uint32Array(80),zl=new Uint32Array(80);class Hce extends WR{constructor(e=64){super(128,e,16,!1),this.Ah=ss[0]|0,this.Al=ss[1]|0,this.Bh=ss[2]|0,this.Bl=ss[3]|0,this.Ch=ss[4]|0,this.Cl=ss[5]|0,this.Dh=ss[6]|0,this.Dl=ss[7]|0,this.Eh=ss[8]|0,this.El=ss[9]|0,this.Fh=ss[10]|0,this.Fl=ss[11]|0,this.Gh=ss[12]|0,this.Gl=ss[13]|0,this.Hh=ss[14]|0,this.Hl=ss[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:g,Hh:p,Hl:m}=this;return[e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m]}set(e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,t){for(let w=0;w<16;w++,t+=4)Ul[w]=e.getUint32(t),zl[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const _=Ul[w-15]|0,x=zl[w-15]|0,E=Od(_,x,1)^Od(_,x,8)^sO(_,x,7),S=Pd(_,x,1)^Pd(_,x,8)^oO(_,x,7),T=Ul[w-2]|0,C=zl[w-2]|0,P=Od(T,C,19)^uy(T,C,61)^sO(T,C,6),V=Pd(T,C,19)^fy(T,C,61)^oO(T,C,6),L=Pce(S,V,zl[w-7],zl[w-16]),D=$ce(L,E,P,Ul[w-7],Ul[w-16]);Ul[w]=D|0,zl[w]=L|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:g,Gh:p,Gl:m,Hh:y,Hl:v}=this;for(let w=0;w<80;w++){const _=Od(f,d,14)^Od(f,d,18)^uy(f,d,41),x=Pd(f,d,14)^Pd(f,d,18)^fy(f,d,41),E=f&h^~f&p,S=d&g^~d&m,T=Dce(v,x,S,Kce[w],zl[w]),C=Mce(T,y,_,E,Vce[w],Ul[w]),P=T|0,V=Od(n,i,28)^uy(n,i,34)^uy(n,i,39),L=Pd(n,i,28)^fy(n,i,34)^fy(n,i,39),D=n&s^n&a^s&a,b=i&o^i&c^o&c;y=p|0,v=m|0,p=h|0,m=g|0,h=f|0,g=d|0,{h:f,l:d}=Nc(l|0,u|0,C|0,P|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const I=kce(P,L,b);n=Oce(I,C,V,D),i=I|0}({h:n,l:i}=Nc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Nc(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Nc(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Nc(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=Nc(this.Eh|0,this.El|0,f|0,d|0),{h,l:g}=Nc(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:m}=Nc(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:v}=Nc(this.Hh|0,this.Hl|0,y|0,v|0),this.set(n,i,s,o,a,c,l,u,f,d,h,g,p,m,y,v)}roundClean(){yl(Ul,zl)}destroy(){yl(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const B1=KR(()=>new jce),cb=KR(()=>new Hce),lO=B1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GR=BigInt(0),zI=BigInt(1);function Kf(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function hy(r){const e=r.toString(16);return e.length&1?"0"+e:e}function tV(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?GR:BigInt("0x"+r)}function N1(r){return tV(Du(r))}function Ug(r){return $o(r),tV(Du(Uint8Array.from(r).reverse()))}function YR(r,e){return M1(r.toString(16).padStart(e*2,"0"))}function L1(r,e){return YR(r,e).reverse()}function Zn(r,e,t){let n;if(typeof e=="string")try{n=M1(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(qR(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}const _x=r=>typeof r=="bigint"&&GR<=r;function Wce(r,e,t){return _x(r)&&_x(e)&&_x(t)&&e<=r&&r<t}function hh(r,e,t,n){if(!Wce(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Gce(r){let e;for(e=0;r>GR;r>>=zI,e+=1);return e}const F1=r=>(zI<<BigInt(r))-zI;function Yce(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let s=n(r),o=n(r),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...h)=>t(o,s,...h),u=(h=n(0))=>{o=l(i(0),h),s=l(),h.length!==0&&(o=l(i(1),h),s=l())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const g=[];for(;h<e;){s=l();const p=s.slice();g.push(p),h+=s.length}return _a(...g)};return(h,g)=>{c(),u(h);let p;for(;!(p=g(f()));)u();return c(),p}}function Cm(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,o){const a=r[i];if(o&&a===void 0)return;const c=typeof a;if(c!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function lb(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}const Jce=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),rV=Uint8Array.from(new Array(16).fill(0).map((r,e)=>e)),Xce=rV.map(r=>(9*r+5)%16),nV=(()=>{const t=[[rV],[Xce]];for(let n=0;n<4;n++)for(let i of t)i.push(i[n].map(s=>Jce[s]));return t})(),iV=nV[0],sV=nV[1],oV=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>Uint8Array.from(r)),Zce=iV.map((r,e)=>r.map(t=>oV[e][t])),Qce=sV.map((r,e)=>r.map(t=>oV[e][t])),ele=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),tle=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function uO(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const py=new Uint32Array(16);class rle extends WR{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let h=0;h<16;h++,t+=4)py[h]=e.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,c=a,l=this.h3|0,u=l,f=this.h4|0,d=f;for(let h=0;h<5;h++){const g=4-h,p=ele[h],m=tle[h],y=iV[h],v=sV[h],w=Zce[h],_=Qce[h];for(let x=0;x<16;x++){const E=dy(n+uO(h,s,a,l)+py[y[x]]+p,w[x])+f|0;n=f,f=l,l=dy(a,10)|0,a=s,s=E}for(let x=0;x<16;x++){const E=dy(i+uO(g,o,c,u)+py[v[x]]+m,_[x])+d|0;i=d,d=u,u=dy(c,10)|0,c=o,o=E}}this.set(this.h1+a+u|0,this.h2+l+d|0,this.h3+f+i|0,this.h4+n+o|0,this.h0+s+c|0)}roundClean(){yl(py)}destroy(){this.destroyed=!0,yl(this.buffer),this.set(0,0,0,0,0)}}const nle=KR(()=>new rle),ile=nle;class aV extends Qj{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Xj(e);const n=VR(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),yl(s)}update(e){return ab(this),this.iHash.update(e),this}digestInto(e){ab(this),$o(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zg=(r,e,t)=>new aV(r,e).update(t).digest();zg.create=(r,e)=>new aV(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xs=BigInt(0),Yi=BigInt(1),_f=BigInt(2),sle=BigInt(3),cV=BigInt(4),lV=BigInt(5),uV=BigInt(8);function Qn(r,e){const t=r%e;return t>=Xs?t:e+t}function jn(r,e,t){let n=r;for(;e-- >Xs;)n*=n,n%=t;return n}function fO(r,e){if(r===Xs)throw new Error("invert: expected non-zero number");if(e<=Xs)throw new Error("invert: expected positive modulus, got "+e);let t=Qn(r,e),n=e,i=Xs,s=Yi;for(;t!==Xs;){const a=n/t,c=n%t,l=i-s*a;n=t,t=c,i=s,s=l}if(n!==Yi)throw new Error("invert: does not exist");return Qn(i,e)}function fV(r,e){const t=(r.ORDER+Yi)/cV,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function ole(r,e){const t=(r.ORDER-lV)/uV,n=r.mul(e,_f),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,_f),i),a=r.mul(s,r.sub(o,r.ONE));if(!r.eql(r.sqr(a),e))throw new Error("Cannot find square root");return a}function ale(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-Yi,t=0;for(;e%_f===Xs;)e/=_f,t++;let n=_f;const i=Ep(r);for(;dO(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return fV;let s=i.pow(n,e);const o=(e+Yi)/_f;return function(c,l){if(c.is0(l))return l;if(dO(c,l)!==1)throw new Error("Cannot find square root");let u=t,f=c.mul(c.ONE,s),d=c.pow(l,e),h=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let g=1,p=c.sqr(d);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=Yi<<BigInt(u-g-1),y=c.pow(f,m);u=g,f=c.sqr(y),d=c.mul(d,f),h=c.mul(h,y)}return h}}function cle(r){return r%cV===sle?fV:r%uV===lV?ole:ale(r)}const lle=(r,e)=>(Qn(r,e)&Yi)===Yi,ule=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fle(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=ule.reduce((n,i)=>(n[i]="function",n),e);return Cm(r,t),r}function dle(r,e,t){if(t<Xs)throw new Error("invalid exponent, negatives unsupported");if(t===Xs)return r.ONE;if(t===Yi)return e;let n=r.ONE,i=e;for(;t>Xs;)t&Yi&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Yi;return n}function dV(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),s=r.inv(i);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),s),n}function dO(r,e){const t=(r.ORDER-Yi)/_f,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function hle(r,e){e!==void 0&&Df(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Ep(r,e,t=!1,n={}){if(r<=Xs)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(t=u.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:o,nByteLength:a}=hle(r,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:r,isLE:t,BITS:o,BYTES:a,MASK:F1(o),ZERO:Xs,ONE:Yi,create:u=>Qn(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Xs<=u&&u<r},is0:u=>u===Xs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Yi)===Yi,neg:u=>Qn(-u,r),eql:(u,f)=>u===f,sqr:u=>Qn(u*u,r),add:(u,f)=>Qn(u+f,r),sub:(u,f)=>Qn(u-f,r),mul:(u,f)=>Qn(u*f,r),pow:(u,f)=>dle(l,u,f),div:(u,f)=>Qn(u*fO(f,r),r),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>fO(u,r),sqrt:s||(u=>(c||(c=cle(r)),c(l,u))),toBytes:u=>t?L1(u,a):YR(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return t?Ug(u):N1(u)},invertBatch:u=>dV(l,u),cmov:(u,f,d)=>d?f:u});return Object.freeze(l)}function hV(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function pV(r){const e=hV(r);return e+Math.ceil(e/2)}function ple(r,e,t=!1){const n=r.length,i=hV(e),s=pV(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?Ug(r):N1(r),a=Qn(o,e-Yi)+Yi;return t?L1(a,i):YR(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wh=BigInt(0),Sf=BigInt(1);function og(r,e){const t=e.negate();return r?t:e}function gV(r,e,t){const n=e==="pz"?o=>o.pz:o=>o.ez,i=dV(r.Fp,t.map(n));return t.map((o,a)=>o.toAffine(i[a])).map(r.fromAffine)}function mV(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Sx(r,e){mV(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=F1(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function hO(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(r&i),c=r>>o;a>n&&(a-=s,c+=Sf);const l=e*n,u=l+Math.abs(a)-1,f=a===0,d=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:h,offsetF:l}}function gle(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function mle(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Ex=new WeakMap,yV=new WeakMap;function Ax(r){return yV.get(r)||1}function pO(r){if(r!==Wh)throw new Error("invalid wNAF")}function vV(r,e){return{constTimeNegate:og,hasPrecomputes(t){return Ax(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>Wh;)n&Sf&&(i=i.add(s)),s=s.double(),n>>=Sf;return i},precomputeWindow(t,n){const{windows:i,windowSize:s}=Sx(n,e),o=[];let a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,i){let s=r.ZERO,o=r.BASE;const a=Sx(t,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:f,isNeg:d,isNegF:h,offsetF:g}=hO(i,c,a);i=l,f?o=o.add(og(h,n[g])):s=s.add(og(d,n[u]))}return pO(i),{p:s,f:o}},wNAFUnsafe(t,n,i,s=r.ZERO){const o=Sx(t,e);for(let a=0;a<o.windows&&i!==Wh;a++){const{nextN:c,offset:l,isZero:u,isNeg:f}=hO(i,a,o);if(i=c,!u){const d=n[l];s=s.add(f?d.negate():d)}}return pO(i),s},getPrecomputes(t,n,i){let s=Ex.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof i=="function"&&(s=i(s)),Ex.set(n,s))),s},wNAFCached(t,n,i){const s=Ax(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){const o=Ax(t);return o===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),n,s)},setWindowSize(t,n){mV(n,e),yV.set(t,n),Ex.delete(t)}}}function yle(r,e,t,n){let i=e,s=r.ZERO,o=r.ZERO;for(;t>Wh||n>Wh;)t&Sf&&(s=s.add(i)),n&Sf&&(o=o.add(i)),i=i.double(),t>>=Sf,n>>=Sf;return{p1:s,p2:o}}function bV(r,e,t,n){gle(t,r),mle(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=Gce(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=F1(c),u=new Array(Number(l)+1).fill(o),f=Math.floor((e.BITS-1)/c)*c;let d=o;for(let h=f;h>=0;h-=c){u.fill(o);for(let p=0;p<s;p++){const m=n[p],y=Number(m>>BigInt(h)&l);u[y]=u[y].add(t[p])}let g=o;for(let p=u.length-1,m=o;p>0;p--)m=m.add(u[p]),g=g.add(m);if(d=d.add(g),h!==0)for(let p=0;p<c;p++)d=d.double()}return d}function gO(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return fle(e),e}else return Ep(r)}function wV(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Wh))throw new Error(`CURVE.${a} must be positive bigint`)}const n=gO(e.p,t.Fp),i=gO(e.n,t.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mO(r){r.lowS!==void 0&&Kf("lowS",r.lowS),r.prehash!==void 0&&Kf("prehash",r.prehash)}let vle=class extends Error{constructor(e=""){super(e)}};const Gc={Err:vle,_tlv:{encode:(r,e)=>{const{Err:t}=Gc;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=hy(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?hy(i.length/2|128):"";return hy(r)+s+i+e},decode(r,e){const{Err:t}=Gc;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Gc;if(r<ag)throw new e("integer: negative integers are not allowed");let t=hy(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Gc;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return N1(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Gc,i=Zn("signature",r),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(r){const{_tlv:e,_int:t}=Gc,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},ag=BigInt(0),cg=BigInt(1),ble=BigInt(2),gy=BigInt(3),wle=BigInt(4);function xle(r,e,t){function n(i){const s=r.sqr(i),o=r.mul(s,i);return r.add(r.add(o,r.mul(i,e)),t)}return n}function xV(r,e,t){const{BYTES:n}=r;function i(s){let o;if(typeof s=="bigint")o=s;else{let a=Zn("private key",s);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{o=r.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(t&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function _le(r,e={}){const{Fp:t,Fn:n}=wV("weierstrass",r,e),{h:i,n:s}=r;Cm(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,C,P){const{x:V,y:L}=C.toAffine(),D=t.toBytes(V);if(Kf("isCompressed",P),P){a();const b=!t.isOdd(L);return _a(_V(b),D)}else return _a(Uint8Array.of(4),D,t.toBytes(L))}function l(T){$o(T);const C=t.BYTES,P=C+1,V=2*C+1,L=T.length,D=T[0],b=T.subarray(1);if(L===P&&(D===2||D===3)){const I=t.fromBytes(b);if(!t.isValid(I))throw new Error("bad point: is not on curve, wrong x");const B=d(I);let F;try{F=t.sqrt(B)}catch(Q){const X=Q instanceof Error?": "+Q.message:"";throw new Error("bad point: is not on curve, sqrt error"+X)}a();const z=t.isOdd(F);return(D&1)===1!==z&&(F=t.neg(F)),{x:I,y:F}}else if(L===V&&D===4){const I=t.fromBytes(b.subarray(C*0,C*1)),B=t.fromBytes(b.subarray(C*1,C*2));if(!h(I,B))throw new Error("bad point: is not on curve");return{x:I,y:B}}else throw new Error(`bad point: got length ${L}, expected compressed=${P} or uncompressed=${V}`)}const u=e.toBytes||c,f=e.fromBytes||l,d=xle(t,r.a,r.b);function h(T,C){const P=t.sqr(C),V=d(T);return t.eql(P,V)}if(!h(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const g=t.mul(t.pow(r.a,gy),wle),p=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(g,p)))throw new Error("bad curve params: a or b");function m(T,C,P=!1){if(!t.isValid(C)||P&&t.is0(C))throw new Error(`bad point coordinate ${T}`);return C}function y(T){if(!(T instanceof x))throw new Error("ProjectivePoint expected")}const v=lb((T,C)=>{const{px:P,py:V,pz:L}=T;if(t.eql(L,t.ONE))return{x:P,y:V};const D=T.is0();C==null&&(C=D?t.ONE:t.inv(L));const b=t.mul(P,C),I=t.mul(V,C),B=t.mul(L,C);if(D)return{x:t.ZERO,y:t.ZERO};if(!t.eql(B,t.ONE))throw new Error("invZ was invalid");return{x:b,y:I}}),w=lb(T=>{if(T.is0()){if(e.allowInfinityPoint&&!t.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:C,y:P}=T.toAffine();if(!t.isValid(C)||!t.isValid(P))throw new Error("bad point: x or y not field elements");if(!h(C,P))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(T,C,P,V,L){return P=new x(t.mul(P.px,T),P.py,P.pz),C=og(V,C),P=og(L,P),C.add(P)}class x{constructor(C,P,V){this.px=m("x",C),this.py=m("y",P,!0),this.pz=m("z",V),Object.freeze(this)}static fromAffine(C){const{x:P,y:V}=C||{};if(!C||!t.isValid(P)||!t.isValid(V))throw new Error("invalid affine point");if(C instanceof x)throw new Error("projective point not allowed");return t.is0(P)&&t.is0(V)?x.ZERO:new x(P,V,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return gV(x,"pz",C)}static fromBytes(C){return $o(C),x.fromHex(C)}static fromHex(C){const P=x.fromAffine(f(Zn("pointHex",C)));return P.assertValidity(),P}static fromPrivateKey(C){const P=xV(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return x.BASE.multiply(P(C))}static msm(C,P){return bV(x,n,C,P)}precompute(C=8,P=!0){return S.setWindowSize(this,C),P||this.multiply(gy),this}_setWindowSize(C){this.precompute(C)}assertValidity(){w(this)}hasEvenY(){const{y:C}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(C)}equals(C){y(C);const{px:P,py:V,pz:L}=this,{px:D,py:b,pz:I}=C,B=t.eql(t.mul(P,I),t.mul(D,L)),F=t.eql(t.mul(V,I),t.mul(b,L));return B&&F}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:C,b:P}=r,V=t.mul(P,gy),{px:L,py:D,pz:b}=this;let I=t.ZERO,B=t.ZERO,F=t.ZERO,z=t.mul(L,L),G=t.mul(D,D),Q=t.mul(b,b),X=t.mul(L,D);return X=t.add(X,X),F=t.mul(L,b),F=t.add(F,F),I=t.mul(C,F),B=t.mul(V,Q),B=t.add(I,B),I=t.sub(G,B),B=t.add(G,B),B=t.mul(I,B),I=t.mul(X,I),F=t.mul(V,F),Q=t.mul(C,Q),X=t.sub(z,Q),X=t.mul(C,X),X=t.add(X,F),F=t.add(z,z),z=t.add(F,z),z=t.add(z,Q),z=t.mul(z,X),B=t.add(B,z),Q=t.mul(D,b),Q=t.add(Q,Q),z=t.mul(Q,X),I=t.sub(I,z),F=t.mul(Q,G),F=t.add(F,F),F=t.add(F,F),new x(I,B,F)}add(C){y(C);const{px:P,py:V,pz:L}=this,{px:D,py:b,pz:I}=C;let B=t.ZERO,F=t.ZERO,z=t.ZERO;const G=r.a,Q=t.mul(r.b,gy);let X=t.mul(P,D),O=t.mul(V,b),R=t.mul(L,I),M=t.add(P,V),k=t.add(D,b);M=t.mul(M,k),k=t.add(X,O),M=t.sub(M,k),k=t.add(P,L);let j=t.add(D,I);return k=t.mul(k,j),j=t.add(X,R),k=t.sub(k,j),j=t.add(V,L),B=t.add(b,I),j=t.mul(j,B),B=t.add(O,R),j=t.sub(j,B),z=t.mul(G,k),B=t.mul(Q,R),z=t.add(B,z),B=t.sub(O,z),z=t.add(O,z),F=t.mul(B,z),O=t.add(X,X),O=t.add(O,X),R=t.mul(G,R),k=t.mul(Q,k),O=t.add(O,R),R=t.sub(X,R),R=t.mul(G,R),k=t.add(k,R),X=t.mul(O,k),F=t.add(F,X),X=t.mul(j,k),B=t.mul(M,B),B=t.sub(B,X),X=t.mul(M,O),z=t.mul(j,z),z=t.add(z,X),new x(B,F,z)}subtract(C){return this.add(C.negate())}is0(){return this.equals(x.ZERO)}multiply(C){const{endo:P}=e;if(!n.isValidNot0(C))throw new Error("invalid scalar: out of range");let V,L;const D=b=>S.wNAFCached(this,b,x.normalizeZ);if(P){const{k1neg:b,k1:I,k2neg:B,k2:F}=P.splitScalar(C),{p:z,f:G}=D(I),{p:Q,f:X}=D(F);L=G.add(X),V=_(P.beta,z,Q,b,B)}else{const{p:b,f:I}=D(C);V=b,L=I}return x.normalizeZ([V,L])[0]}multiplyUnsafe(C){const{endo:P}=e,V=this;if(!n.isValid(C))throw new Error("invalid scalar: out of range");if(C===ag||V.is0())return x.ZERO;if(C===cg)return V;if(S.hasPrecomputes(this))return this.multiply(C);if(P){const{k1neg:L,k1:D,k2neg:b,k2:I}=P.splitScalar(C),{p1:B,p2:F}=yle(x,V,D,I);return _(P.beta,B,F,L,b)}else return S.wNAFCachedUnsafe(V,C)}multiplyAndAddUnsafe(C,P,V){const L=this.multiplyUnsafe(P).add(C.multiplyUnsafe(V));return L.is0()?void 0:L}toAffine(C){return v(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return i===cg?!0:C?C(x,this):S.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:C}=e;return i===cg?this:C?C(x,this):this.multiplyUnsafe(i)}toBytes(C=!0){return Kf("isCompressed",C),this.assertValidity(),u(x,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return Du(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(r.Gx,r.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO),x.Fp=t,x.Fn=n;const E=n.BITS,S=vV(x,e.endo?Math.ceil(E/2):E);return x}function _V(r){return Uint8Array.of(r?2:3)}function Sle(r,e,t={}){Cm(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||HR,i=e.hmac||((V,...L)=>zg(e.hash,V,_a(...L))),{Fp:s,Fn:o}=r,{ORDER:a,BITS:c}=o;function l(V){const L=a>>cg;return V>L}function u(V){return l(V)?o.neg(V):V}function f(V,L){if(!o.isValidNot0(L))throw new Error(`invalid signature ${V}: out of range 1..CURVE.n`)}class d{constructor(L,D,b){f("r",L),f("s",D),this.r=L,this.s=D,b!=null&&(this.recovery=b),Object.freeze(this)}static fromCompact(L){const D=o.BYTES,b=Zn("compactSignature",L,D*2);return new d(o.fromBytes(b.subarray(0,D)),o.fromBytes(b.subarray(D,D*2)))}static fromDER(L){const{r:D,s:b}=Gc.toSig(Zn("DER",L));return new d(D,b)}assertValidity(){}addRecoveryBit(L){return new d(this.r,this.s,L)}recoverPublicKey(L){const D=s.ORDER,{r:b,s:I,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(a*ble<D&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const z=B===2||B===3?b+a:b;if(!s.isValid(z))throw new Error("recovery id 2 or 3 invalid");const G=s.toBytes(z),Q=r.fromHex(_a(_V((B&1)===0),G)),X=o.inv(z),O=w(Zn("msgHash",L)),R=o.create(-O*X),M=o.create(I*X),k=r.BASE.multiplyUnsafe(R).add(Q.multiplyUnsafe(M));if(k.is0())throw new Error("point at infinify");return k.assertValidity(),k}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,o.neg(this.s),this.recovery):this}toBytes(L){if(L==="compact")return _a(o.toBytes(this.r),o.toBytes(this.s));if(L==="der")return M1(Gc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Du(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Du(this.toBytes("compact"))}}const h=xV(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),g={isValidPrivateKey(V){try{return h(V),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const V=a;return ple(n(pV(V)),V)},precompute(V=8,L=r.BASE){return L.precompute(V,!1)}};function p(V,L=!0){return r.fromPrivateKey(V).toBytes(L)}function m(V){if(typeof V=="bigint")return!1;if(V instanceof r)return!0;const D=Zn("key",V).length,b=s.BYTES,I=b+1,B=2*b+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===I))return D===I||D===B}function y(V,L,D=!0){if(m(V)===!0)throw new Error("first arg must be private key");if(m(L)===!1)throw new Error("second arg must be public key");return r.fromHex(L).multiply(h(V)).toBytes(D)}const v=e.bits2int||function(V){if(V.length>8192)throw new Error("input is too large");const L=N1(V),D=V.length*8-c;return D>0?L>>BigInt(D):L},w=e.bits2int_modN||function(V){return o.create(v(V))},_=F1(c);function x(V){return hh("num < 2^"+c,V,ag,_),o.toBytes(V)}function E(V,L,D=S){if(["recovered","canonical"].some(M=>M in D))throw new Error("sign() legacy options not supported");const{hash:b}=e;let{lowS:I,prehash:B,extraEntropy:F}=D;I==null&&(I=!0),V=Zn("msgHash",V),mO(D),B&&(V=Zn("prehashed msgHash",b(V)));const z=w(V),G=h(L),Q=[x(G),x(z)];if(F!=null&&F!==!1){const M=F===!0?n(s.BYTES):F;Q.push(Zn("extraEntropy",M))}const X=_a(...Q),O=z;function R(M){const k=v(M);if(!o.isValidNot0(k))return;const j=o.inv(k),te=r.BASE.multiply(k).toAffine(),ae=o.create(te.x);if(ae===ag)return;const he=o.create(j*o.create(O+ae*G));if(he===ag)return;let re=(te.x===ae?0:2)|Number(te.y&cg),q=he;return I&&l(he)&&(q=u(he),re^=1),new d(ae,q,re)}return{seed:X,k2sig:R}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function C(V,L,D=S){const{seed:b,k2sig:I}=E(V,L,D);return Yce(e.hash.outputLen,o.BYTES,i)(b,I)}r.BASE.precompute(8);function P(V,L,D,b=T){const I=V;L=Zn("msgHash",L),D=Zn("publicKey",D),mO(b);const{lowS:B,prehash:F,format:z}=b;if("strict"in b)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&!["compact","der","js"].includes(z))throw new Error('format must be "compact", "der" or "js"');const G=typeof I=="string"||qR(I),Q=!G&&!z&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!G&&!Q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,O;try{if(Q)if(z===void 0||z==="js")X=new d(I.r,I.s);else throw new Error("invalid format");if(G){try{z!=="compact"&&(X=d.fromDER(I))}catch(q){if(!(q instanceof Gc.Err))throw q}!X&&z!=="der"&&(X=d.fromCompact(I))}O=r.fromHex(D)}catch{return!1}if(!X||B&&X.hasHighS())return!1;F&&(L=e.hash(L));const{r:R,s:M}=X,k=w(L),j=o.inv(M),te=o.create(k*j),ae=o.create(R*j),he=r.BASE.multiplyUnsafe(te).add(O.multiplyUnsafe(ae));return he.is0()?!1:o.create(he.x)===R}return Object.freeze({getPublicKey:p,getSharedSecret:y,sign:C,verify:P,utils:g,Point:r,Signature:d})}function Ele(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ep(e.n,r.nBitLength),i={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:i}}function Ale(r){const{CURVE:e,curveOpts:t}=Ele(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function Ile(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function Cle(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=Ale(r),i=_le(e,t),s=Sle(i,n,t);return Ile(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Tle(r,e){const t=n=>Cle({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ub={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Rle=BigInt(1),qI=BigInt(2),yO=(r,e)=>(r+e/qI)/e;function kle(r){const e=ub.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,f=jn(u,t,e)*u%e,d=jn(f,t,e)*u%e,h=jn(d,qI,e)*l%e,g=jn(h,i,e)*h%e,p=jn(g,s,e)*g%e,m=jn(p,a,e)*p%e,y=jn(m,c,e)*m%e,v=jn(y,a,e)*p%e,w=jn(v,t,e)*u%e,_=jn(w,o,e)*g%e,x=jn(_,n,e)*l%e,E=jn(x,qI,e);if(!jI.eql(jI.sqr(E),r))throw new Error("Cannot find square root");return E}const jI=Ep(ub.p,void 0,void 0,{sqrt:kle}),Ole=Tle({...ub,Fp:jI,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=ub.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Rle*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=yO(s*r,e),c=yO(-n*r,e);let l=Qn(r-a*t-c*i,e),u=Qn(-a*n-c*s,e);const f=l>o,d=u>o;if(f&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},B1);let Ple=class{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(gce,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}};const $le=new TextEncoder,SV=new TextDecoder,Dle=r=>{let e=r;typeof e=="string"&&(e=$le.encode(e));const t=32768,n=[];for(let i=0;i<e.length;i+=t)n.push(String.fromCharCode.apply(null,e.subarray(i,i+t)));return btoa(n.join(""))},Mle=r=>Dle(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Ble=r=>{const e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},Nle=r=>{let e=r;e instanceof Uint8Array&&(e=SV.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Ble(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Lle extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(t=Error.captureStackTrace)===null||t===void 0||t.call(Error,this,this.constructor)}}class Zu extends Lle{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function Fle(r){return typeof r=="object"&&r!==null}function Ule(r){if(!Fle(r)||Object.prototype.toString.call(r)!=="[object Object]")return!1;if(Object.getPrototypeOf(r)===null)return!0;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}const JR=Mle,zle=Nle;function qle(r){if(typeof r!="string")throw new Zu("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:t}=r.split(".");if(t===5)throw new Zu("Only JWTs using Compact JWS serialization can be decoded");if(t!==3)throw new Zu("Invalid JWT");if(!e)throw new Zu("JWTs must contain a payload");let n;try{n=zle(e)}catch{throw new Zu("Failed to base64url decode the payload")}let i;try{i=JSON.parse(SV.decode(n))}catch{throw new Zu("Failed to parse the decoded payload as JSON")}if(!Ule(i))throw new Zu("Invalid JWT Claims Set");return i}let z0=class EV{static parse(e){try{return new EV(e)}catch{return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=qle(e)}},AV=class VI{async updateOnCrossAppAuthentication(e,t){let n=t.access_token,i=VI.providerAccessTokenStorageKey(e);await this._storage.put(i,n)}async getProviderAccessToken(e){let t=VI.providerAccessTokenStorageKey(e),n=await this._storage.get(t);if(typeof n!="string")return null;try{if(new z0(n).isExpired())throw Error("JWT is expired");return n}catch{return await this._storage.del(t),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(kae,{params:{app_id:this._privyInternal.appId}})}constructor(e,t){this._privyInternal=e,this._storage=t}};AV.providerAccessTokenStorageKey=r=>`privy:cross-app:${r}`;let jle=class{async revoke(){await this._privyInternal.fetch(Cce,{})}constructor(e){this._privyInternal=e}};function Vle(r,e){return{...r,rpcUrls:{...r.rpcUrls,privy:{http:[e]}}}}const U1={id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-mainnet.rpc.privy.systems"]},alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}}},IV={id:421614,name:"Arbitrum Sepolia",network:"arbitrum-sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]},public:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Blockscout",url:"https://sepolia-explorer.arbitrum.io"}},testnet:!0},CV={id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}}},Kle={id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},testnet:!0},z1={id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-mainnet.rpc.privy.systems"]},blast:{http:["https://base-mainnet.blastapi.io"],webSocket:["wss://base-mainnet.blastapi.io"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{etherscan:{name:"Basescan",url:"https://basescan.org"},default:{name:"Basescan",url:"https://basescan.org"}}},TV={id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.base.org"]},public:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"}},testnet:!0},Hle={id:80085,network:"berachain-artio",name:"Berachain Artio",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18},rpcUrls:{default:{http:["https://berachain-artio.rpc.privy.systems"]},public:{http:["https://berachain-artio.rpc.privy.systems"]}},blockExplorers:{default:{name:"Beratrail",url:"https://artio.beratrail.io"}},testnet:!0},RV={id:42220,name:"Celo Mainnet",network:"celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]},infura:{http:["https://celo-mainnet.infura.io/v3"]},public:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/mainnet"},etherscan:{name:"CeloScan",url:"https://celoscan.io"}},testnet:!1},Wle={id:44787,name:"Celo Alfajores Testnet",network:"celo-alfajores",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://alfajores-forno.celo-testnet.org"]},infura:{http:["https://celo-alfajores.infura.io/v3"]},public:{http:["https://alfajores-forno.celo-testnet.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/alfajores"},etherscan:{name:"CeloScan",url:"https://alfajores.celoscan.io/"}},testnet:!0},Gle={id:314,name:"Filecoin - Mainnet",network:"filecoin-mainnet",nativeCurrency:{decimals:18,name:"filecoin",symbol:"FIL"},rpcUrls:{default:{http:["https://api.node.glif.io/rpc/v1"]},public:{http:["https://api.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filfox",url:"https://filfox.info/en"},filscan:{name:"Filscan",url:"https://filscan.io"},filscout:{name:"Filscout",url:"https://filscout.io/en"},glif:{name:"Glif",url:"https://explorer.glif.io"}}},Yle={id:314159,name:"Filecoin - Calibration testnet",network:"filecoin-calibration",nativeCurrency:{decimals:18,name:"testnet filecoin",symbol:"tFIL"},rpcUrls:{default:{http:["https://api.calibration.node.glif.io/rpc/v1"]},public:{http:["https://api.calibration.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filscan",url:"https://calibration.filscan.io"}}},Jle={id:17069,name:"Garnet Holesky",network:"garnet-holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"]},public:{http:["https://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}}},Xle={id:17e3,name:"Holesky",network:"holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://ethereum-holesky.publicnode.com"]},public:{http:["https://ethereum-holesky.publicnode.com"]}},blockExplorers:{etherscan:{name:"EtherScan",url:"https://holesky.etherscan.io"},default:{name:"EtherScan",url:"https://holesky.etherscan.io"}}},Zle={id:59144,network:"linea-mainnet",name:"Linea Mainnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]},public:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://lineascan.build"},etherscan:{name:"Etherscan",url:"https://lineascan.build"}},testnet:!1},Qle={id:59140,network:"linea-testnet",name:"Linea Goerli Testnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{infura:{http:["https://linea-goerli.infura.io/v3"],webSocket:["wss://linea-goerli.infura.io/ws/v3"]},default:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]},public:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.lineascan.build"},etherscan:{name:"Etherscan",url:"https://goerli.lineascan.build"}},testnet:!0},eue={id:42,network:"lukso",name:"LUKSO",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.lukso.network"],webSocket:["wss://ws-rpc.mainnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Mainnet Explorer",url:"https://explorer.execution.mainnet.lukso.network"}}},XR={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://mainnet.rpc.privy.systems"]},alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}}},ZR={id:10,name:"OP Mainnet",network:"optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-mainnet.rpc.privy.systems"]},alchemy:{http:["https://opt-mainnet.g.alchemy.com/v2"],webSocket:["wss://opt-mainnet.g.alchemy.com/v2"]},infura:{http:["https://optimism-mainnet.infura.io/v3"],webSocket:["wss://optimism-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.optimism.io"]},public:{http:["https://mainnet.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://optimistic.etherscan.io"},default:{name:"Optimism Explorer",url:"https://explorer.optimism.io"}}},kV={id:11155420,name:"Optimism Sepolia",network:"optimism-sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.optimism.io"]},public:{http:["https://sepolia.optimism.io"]},infura:{http:["https://optimism-sepolia.infura.io/v3"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com"}},testnet:!0},Tm={id:137,name:"Polygon Mainnet",network:"polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-mainnet.rpc.privy.systems"]},alchemy:{http:["https://polygon-mainnet.g.alchemy.com/v2"],webSocket:["wss://polygon-mainnet.g.alchemy.com/v2"]},infura:{http:["https://polygon-mainnet.infura.io/v3"],webSocket:["wss://polygon-mainnet.infura.io/ws/v3"]},default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://polygonscan.com"},default:{name:"PolygonScan",url:"https://polygonscan.com"}}},QR={id:80002,name:"Polygon Amoy",network:"polygon-amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-amoy.rpc.privy.systems"]},infura:{http:["https://polygon-amoy.infura.io/v3"],webSocket:["wss://polygon-amoy.infura.io/ws/v3"]},default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"OK LINK",url:"https://www.oklink.com/amoy"}},testnet:!0},tue={id:690,name:"Redstone",network:"redstone",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.redstonechain.com"]},public:{http:["https://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz/"}}},rue={id:11155111,network:"sepolia",name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:{privy:{http:["https://sepolia.rpc.privy.systems"]},alchemy:{http:["https://eth-sepolia.g.alchemy.com/v2"],webSocket:["wss://eth-sepolia.g.alchemy.com/v2"]},infura:{http:["https://sepolia.infura.io/v3"],webSocket:["wss://sepolia.infura.io/ws/v3"]},default:{http:["https://rpc.sepolia.org"]},public:{http:["https://rpc.sepolia.org"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://sepolia.etherscan.io"},default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}},testnet:!0},OV={id:7777777,name:"Zora",network:"zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]},public:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.zora.energy"}}},PV={id:999999999,name:"Zora Sepolia",network:"zora-sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},rpcUrls:{default:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]},public:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]}},blockExplorers:{default:{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/"}},testnet:!0},$V={id:999,name:"Zora Goerli Testnet",network:"zora-testnet",nativeCurrency:{decimals:18,name:"Zora Goerli",symbol:"ETH"},rpcUrls:{default:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]},public:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://testnet.explorer.zora.energy"}},testnet:!0},e4=[XR,rue,Xle,U1,IV,ZR,kV,Tm,QR,RV,Wle,Gle,Yle,z1,TV,Hle,eue,Zle,Qle,CV,Kle,OV,$V,PV,tue,Jle];new Set(e4.map(r=>r.id));const nue=r=>r.map(e=>{if(e.rpcUrls.privyWalletOverride)return e;let t=e4.find(i=>i.id===e.id),n=t?.rpcUrls.privy?.http[0];return n?Vle(e,n):e});let Ix=class extends Error{constructor({error:e,code:t}){super(e),this.error=e,this.code=t}},Qr=class extends Error{constructor({error:e,code:t}){super(e),this.code=t,this.error=e}},iue=class extends Error{constructor({error:e,code:t,response:n}){super(e),this.code=t,this.error=e,this.response=n}};const su=r=>!!r.id&&r.recovery_method==="privy-v2";let sue=class{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(su(this._account))throw new Qr({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessToken())throw new Qr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Qr({code:"embedded_wallet_request_error",error:n})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s}){this._proxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s}};const oue=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","mfa_timeout","missing_or_invalid_mfa","mfa_verification_max_attempts_reached"];var Vs;(Vs={}).MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Vs.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Vs.INVALID_DATA="invalid_data",Vs.LINKED_TO_ANOTHER_USER="linked_to_another_user",Vs.ALLOWLIST_REJECTED="allowlist_rejected",Vs.OAUTH_USER_DENIED="oauth_user_denied",Vs.UNKNOWN_AUTH_ERROR="unknown_auth_error",Vs.USER_EXITED_AUTH_FLOW="exited_auth_flow",Vs.MUST_BE_AUTHENTICATED="must_be_authenticated",Vs.UNKNOWN_CONNECT_WALLET_ERROR="unknown_connect_wallet_error",Vs.GENERIC_CONNECT_WALLET_ERROR="generic_connect_wallet_error",Vs.CLIENT_REQUEST_TIMEOUT="client_request_timeout",Vs.INVALID_CREDENTIALS="invalid_credentials";let aue=class extends Error{toString(){return`${this.type}${this.privyErrorCode?`-${this.privyErrorCode}`:""}: ${this.message}${this.cause?` [cause: ${this.cause}]`:""}`}constructor(e,t,n){super(e),t instanceof Error&&(this.cause=t),this.privyErrorCode=n}},mv=class extends Error{constructor(e,t){super(t),this.type=e}},cue=class extends aue{constructor(e,t,n){super(e,t,n),this.type="connector_error"}},vO=class extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n}};function lue(r){let e=r.type;return typeof e=="string"&&oue.includes(e)}function t4(r){return lue(r)&&r.type==="wallet_not_on_device"}async function uue(r,{request:e}){return await r.fetchPrivyRoute(Ice,{body:e})}async function Cx({context:r,chainType:e}){return{wallet:await uue(r,{request:{chain_type:e,owner_id:void 0}})}}const fue="logger/5.8.0";let bO=!1,wO=!1;const yv={debug:1,default:2,info:2,warning:3,error:4,off:5};let xO=yv.default,Tx=null;function due(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(r){return r.message}return null}const _O=due();var KI;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(KI||(KI={}));var ma;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(ma||(ma={}));const SO="0123456789abcdef";class Ke{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();yv[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(xO>yv[n])&&console.log.apply(console,t)}debug(...e){this._log(Ke.levels.DEBUG,e)}info(...e){this._log(Ke.levels.INFO,e)}warn(...e){this._log(Ke.levels.WARNING,e)}makeError(e,t,n){if(wO)return this.makeError("censored error",t,{});t||(t=Ke.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const l=n[c];try{if(l instanceof Uint8Array){let u="";for(let f=0;f<l.length;f++)u+=SO[l[f]>>4],u+=SO[l[f]&15];i.push(c+"=Uint8Array(0x"+u+")")}else i.push(c+"="+JSON.stringify(l))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case ma.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case ma.CALL_EXCEPTION:case ma.INSUFFICIENT_FUNDS:case ma.MISSING_NEW:case ma.NONCE_EXPIRED:case ma.REPLACEMENT_UNDERPRICED:case ma.TRANSACTION_REPLACED:case ma.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,Ke.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){_O&&this.throwError("platform missing String.prototype.normalize",Ke.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_O})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ke.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ke.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,Ke.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Ke.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",Ke.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ke.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Ke.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Tx||(Tx=new Ke(fue)),Tx}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ke.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),bO){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ke.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}wO=!!e,bO=!!t}static setLogLevel(e){const t=yv[e.toLowerCase()];if(t==null){Ke.globalLogger().warn("invalid log level - "+e);return}xO=t}static from(e){return new Ke(e)}}Ke.errors=ma;Ke.levels=KI;const hue="properties/5.8.0";var pue=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const fb=new Ke(hue);function qr(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function q0(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function Ui(r){return pue(this,void 0,void 0,function*(){const e=Object.keys(r).map(n=>{const i=r[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function gue(r,e){(!r||typeof r!="object")&&fb.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||fb.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function Zs(r){const e={};for(const t in r)e[t]=r[t];return e}const mue={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function DV(r){if(r==null||mue[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;const e=Object.keys(r);for(let t=0;t<e.length;t++){let n=null;try{n=r[e[t]]}catch{continue}if(!DV(n))return!1}return!0}return fb.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function yue(r){if(DV(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>qg(e)));if(typeof r=="object"){const e={};for(const t in r){const n=r[t];n!==void 0&&qr(e,t,qg(n))}return e}return fb.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function qg(r){return yue(r)}class vue{constructor(e){for(const t in e)this[t]=qg(e[t])}}const bue="abstract-signer/5.8.0";var fa=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Zo=new Ke(bue),wue=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],xue=[Ke.errors.INSUFFICIENT_FUNDS,Ke.errors.NONCE_EXPIRED,Ke.errors.REPLACEMENT_UNDERPRICED];class q1{constructor(){Zo.checkAbstract(new.target,q1),qr(this,"_isSigner",!0)}getBalance(e){return fa(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return fa(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return fa(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ui(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return fa(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Ui(this.checkTransaction(e));return yield this.provider.call(n,t)})}sendTransaction(e){return fa(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)})}getChainId(){return fa(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return fa(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return fa(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return fa(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)wue.indexOf(n)===-1&&Zo.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=Zs(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Zo.throwArgumentError("from address mismatch","transaction",e),n[0])),t}populateTransaction(e){return fa(this,void 0,void 0,function*(){const t=yield Ui(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>fa(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Zo.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const n=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||n)?Zo.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&n&&Zo.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Zo.throwError("network does not support EIP-1559",Ke.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Zo.throwError("failed to get consistent fee data",Ke.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(xue.indexOf(i.code)>=0)throw i;return Zo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Zo.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Ui(t)})}_checkProvider(e){this.provider||Zo.throwError("missing provider",Ke.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class r4 extends q1{constructor(e,t){super(),qr(this,"address",e),qr(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Zo.throwError(e,Ke.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new r4(this.address,e)}}var vv={exports:{}};const _ue={},Sue=Object.freeze(Object.defineProperty({__proto__:null,default:_ue},Symbol.toStringTag,{value:"Module"})),gd=gp(Sue);var Eue=vv.exports,EO;function MV(){return EO||(EO=1,function(r){(function(e,t){function n(D,b){if(!D)throw new Error(b||"Assertion failed")}function i(D,b){D.super_=b;var I=function(){};I.prototype=b.prototype,D.prototype=new I,D.prototype.constructor=D}function s(D,b,I){if(s.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&((b==="le"||b==="be")&&(I=b,b=10),this._init(D||0,b||10,I||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=gd.Buffer}catch{}s.isBN=function(b){return b instanceof s?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===s.wordSize&&Array.isArray(b.words)},s.max=function(b,I){return b.cmp(I)>0?b:I},s.min=function(b,I){return b.cmp(I)<0?b:I},s.prototype._init=function(b,I,B){if(typeof b=="number")return this._initNumber(b,I,B);if(typeof b=="object")return this._initArray(b,I,B);I==="hex"&&(I=16),n(I===(I|0)&&I>=2&&I<=36),b=b.toString().replace(/\s+/g,"");var F=0;b[0]==="-"&&(F++,this.negative=1),F<b.length&&(I===16?this._parseHex(b,F,B):(this._parseBase(b,I,F),B==="le"&&this._initArray(this.toArray(),I,B)))},s.prototype._initNumber=function(b,I,B){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(n(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),B==="le"&&this._initArray(this.toArray(),I,B)},s.prototype._initArray=function(b,I,B){if(n(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var z,G,Q=0;if(B==="be")for(F=b.length-1,z=0;F>=0;F-=3)G=b[F]|b[F-1]<<8|b[F-2]<<16,this.words[z]|=G<<Q&67108863,this.words[z+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,z++);else if(B==="le")for(F=0,z=0;F<b.length;F+=3)G=b[F]|b[F+1]<<8|b[F+2]<<16,this.words[z]|=G<<Q&67108863,this.words[z+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,z++);return this._strip()};function a(D,b){var I=D.charCodeAt(b);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;n(!1,"Invalid character in "+D)}function c(D,b,I){var B=a(D,I);return I-1>=b&&(B|=a(D,I-1)<<4),B}s.prototype._parseHex=function(b,I,B){this.length=Math.ceil((b.length-I)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var z=0,G=0,Q;if(B==="be")for(F=b.length-1;F>=I;F-=2)Q=c(b,I,F)<<z,this.words[G]|=Q&67108863,z>=18?(z-=18,G+=1,this.words[G]|=Q>>>26):z+=8;else{var X=b.length-I;for(F=X%2===0?I+1:I;F<b.length;F+=2)Q=c(b,I,F)<<z,this.words[G]|=Q&67108863,z>=18?(z-=18,G+=1,this.words[G]|=Q>>>26):z+=8}this._strip()};function l(D,b,I,B){for(var F=0,z=0,G=Math.min(D.length,I),Q=b;Q<G;Q++){var X=D.charCodeAt(Q)-48;F*=B,X>=49?z=X-49+10:X>=17?z=X-17+10:z=X,n(X>=0&&z<B,"Invalid character"),F+=z}return F}s.prototype._parseBase=function(b,I,B){this.words=[0],this.length=1;for(var F=0,z=1;z<=67108863;z*=I)F++;F--,z=z/I|0;for(var G=b.length-B,Q=G%F,X=Math.min(G,G-Q)+B,O=0,R=B;R<X;R+=F)O=l(b,R,R+F,I),this.imuln(z),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(Q!==0){var M=1;for(O=l(b,R,b.length,I),R=0;R<Q;R++)M*=I;this.imuln(M),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this._strip()},s.prototype.copy=function(b){b.words=new Array(this.length);for(var I=0;I<this.length;I++)b.words[I]=this.words[I];b.length=this.length,b.negative=this.negative,b.red=this.red};function u(D,b){D.words=b.words,D.length=b.length,D.negative=b.negative,D.red=b.red}if(s.prototype._move=function(b){u(b,this)},s.prototype.clone=function(){var b=new s(null);return this.copy(b),b},s.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(b,I){b=b||10,I=I|0||1;var B;if(b===16||b==="hex"){B="";for(var F=0,z=0,G=0;G<this.length;G++){var Q=this.words[G],X=((Q<<F|z)&16777215).toString(16);z=Q>>>24-F&16777215,F+=2,F>=26&&(F-=26,G--),z!==0||G!==this.length-1?B=d[6-X.length]+X+B:B=X+B}for(z!==0&&(B=z.toString(16)+B);B.length%I!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}if(b===(b|0)&&b>=2&&b<=36){var O=h[b],R=g[b];B="";var M=this.clone();for(M.negative=0;!M.isZero();){var k=M.modrn(R).toString(b);M=M.idivn(R),M.isZero()?B=k+B:B=d[O-k.length]+k+B}for(this.isZero()&&(B="0"+B);B.length%I!==0;)B="0"+B;return this.negative!==0&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(b,I){return this.toArrayLike(o,b,I)}),s.prototype.toArray=function(b,I){return this.toArrayLike(Array,b,I)};var p=function(b,I){return b.allocUnsafe?b.allocUnsafe(I):new b(I)};s.prototype.toArrayLike=function(b,I,B){this._strip();var F=this.byteLength(),z=B||Math.max(1,F);n(F<=z,"byte array longer than desired length"),n(z>0,"Requested array length <= 0");var G=p(b,z),Q=I==="le"?"LE":"BE";return this["_toArrayLike"+Q](G,F),G},s.prototype._toArrayLikeLE=function(b,I){for(var B=0,F=0,z=0,G=0;z<this.length;z++){var Q=this.words[z]<<G|F;b[B++]=Q&255,B<b.length&&(b[B++]=Q>>8&255),B<b.length&&(b[B++]=Q>>16&255),G===6?(B<b.length&&(b[B++]=Q>>24&255),F=0,G=0):(F=Q>>>24,G+=2)}if(B<b.length)for(b[B++]=F;B<b.length;)b[B++]=0},s.prototype._toArrayLikeBE=function(b,I){for(var B=b.length-1,F=0,z=0,G=0;z<this.length;z++){var Q=this.words[z]<<G|F;b[B--]=Q&255,B>=0&&(b[B--]=Q>>8&255),B>=0&&(b[B--]=Q>>16&255),G===6?(B>=0&&(b[B--]=Q>>24&255),F=0,G=0):(F=Q>>>24,G+=2)}if(B>=0)for(b[B--]=F;B>=0;)b[B--]=0},Math.clz32?s.prototype._countBits=function(b){return 32-Math.clz32(b)}:s.prototype._countBits=function(b){var I=b,B=0;return I>=4096&&(B+=13,I>>>=13),I>=64&&(B+=7,I>>>=7),I>=8&&(B+=4,I>>>=4),I>=2&&(B+=2,I>>>=2),B+I},s.prototype._zeroBits=function(b){if(b===0)return 26;var I=b,B=0;return(I&8191)===0&&(B+=13,I>>>=13),(I&127)===0&&(B+=7,I>>>=7),(I&15)===0&&(B+=4,I>>>=4),(I&3)===0&&(B+=2,I>>>=2),(I&1)===0&&B++,B},s.prototype.bitLength=function(){var b=this.words[this.length-1],I=this._countBits(b);return(this.length-1)*26+I};function m(D){for(var b=new Array(D.bitLength()),I=0;I<b.length;I++){var B=I/26|0,F=I%26;b[I]=D.words[B]>>>F&1}return b}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,I=0;I<this.length;I++){var B=this._zeroBits(this.words[I]);if(b+=B,B!==26)break}return b},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},s.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var I=0;I<b.length;I++)this.words[I]=this.words[I]|b.words[I];return this._strip()},s.prototype.ior=function(b){return n((this.negative|b.negative)===0),this.iuor(b)},s.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},s.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},s.prototype.iuand=function(b){var I;this.length>b.length?I=b:I=this;for(var B=0;B<I.length;B++)this.words[B]=this.words[B]&b.words[B];return this.length=I.length,this._strip()},s.prototype.iand=function(b){return n((this.negative|b.negative)===0),this.iuand(b)},s.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},s.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},s.prototype.iuxor=function(b){var I,B;this.length>b.length?(I=this,B=b):(I=b,B=this);for(var F=0;F<B.length;F++)this.words[F]=I.words[F]^B.words[F];if(this!==I)for(;F<I.length;F++)this.words[F]=I.words[F];return this.length=I.length,this._strip()},s.prototype.ixor=function(b){return n((this.negative|b.negative)===0),this.iuxor(b)},s.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},s.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},s.prototype.inotn=function(b){n(typeof b=="number"&&b>=0);var I=Math.ceil(b/26)|0,B=b%26;this._expand(I),B>0&&I--;for(var F=0;F<I;F++)this.words[F]=~this.words[F]&67108863;return B>0&&(this.words[F]=~this.words[F]&67108863>>26-B),this._strip()},s.prototype.notn=function(b){return this.clone().inotn(b)},s.prototype.setn=function(b,I){n(typeof b=="number"&&b>=0);var B=b/26|0,F=b%26;return this._expand(B+1),I?this.words[B]=this.words[B]|1<<F:this.words[B]=this.words[B]&~(1<<F),this._strip()},s.prototype.iadd=function(b){var I;if(this.negative!==0&&b.negative===0)return this.negative=0,I=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,I=this.isub(b),b.negative=1,I._normSign();var B,F;this.length>b.length?(B=this,F=b):(B=b,F=this);for(var z=0,G=0;G<F.length;G++)I=(B.words[G]|0)+(F.words[G]|0)+z,this.words[G]=I&67108863,z=I>>>26;for(;z!==0&&G<B.length;G++)I=(B.words[G]|0)+z,this.words[G]=I&67108863,z=I>>>26;if(this.length=B.length,z!==0)this.words[this.length]=z,this.length++;else if(B!==this)for(;G<B.length;G++)this.words[G]=B.words[G];return this},s.prototype.add=function(b){var I;return b.negative!==0&&this.negative===0?(b.negative=0,I=this.sub(b),b.negative^=1,I):b.negative===0&&this.negative!==0?(this.negative=0,I=b.sub(this),this.negative=1,I):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},s.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var I=this.iadd(b);return b.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var B=this.cmp(b);if(B===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,z;B>0?(F=this,z=b):(F=b,z=this);for(var G=0,Q=0;Q<z.length;Q++)I=(F.words[Q]|0)-(z.words[Q]|0)+G,G=I>>26,this.words[Q]=I&67108863;for(;G!==0&&Q<F.length;Q++)I=(F.words[Q]|0)+G,G=I>>26,this.words[Q]=I&67108863;if(G===0&&Q<F.length&&F!==this)for(;Q<F.length;Q++)this.words[Q]=F.words[Q];return this.length=Math.max(this.length,Q),F!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(b){return this.clone().isub(b)};function y(D,b,I){I.negative=b.negative^D.negative;var B=D.length+b.length|0;I.length=B,B=B-1|0;var F=D.words[0]|0,z=b.words[0]|0,G=F*z,Q=G&67108863,X=G/67108864|0;I.words[0]=Q;for(var O=1;O<B;O++){for(var R=X>>>26,M=X&67108863,k=Math.min(O,b.length-1),j=Math.max(0,O-D.length+1);j<=k;j++){var te=O-j|0;F=D.words[te]|0,z=b.words[j]|0,G=F*z+M,R+=G/67108864|0,M=G&67108863}I.words[O]=M|0,X=R|0}return X!==0?I.words[O]=X|0:I.length--,I._strip()}var v=function(b,I,B){var F=b.words,z=I.words,G=B.words,Q=0,X,O,R,M=F[0]|0,k=M&8191,j=M>>>13,te=F[1]|0,ae=te&8191,he=te>>>13,re=F[2]|0,q=re&8191,J=re>>>13,de=F[3]|0,ue=de&8191,we=de>>>13,se=F[4]|0,U=se&8191,K=se>>>13,ie=F[5]|0,ge=ie&8191,_e=ie>>>13,Ce=F[6]|0,Ne=Ce&8191,xe=Ce>>>13,Ae=F[7]|0,Me=Ae&8191,oe=Ae>>>13,H=F[8]|0,ee=H&8191,W=H>>>13,N=F[9]|0,$=N&8191,ne=N>>>13,pe=z[0]|0,be=pe&8191,fe=pe>>>13,Ee=z[1]|0,Fe=Ee&8191,He=Ee>>>13,Ve=z[2]|0,De=Ve&8191,nt=Ve>>>13,vt=z[3]|0,dt=vt&8191,Ct=vt>>>13,Cr=z[4]|0,or=Cr&8191,fr=Cr>>>13,Ts=z[5]|0,Xr=Ts&8191,yr=Ts>>>13,ts=z[6]|0,ce=ts&8191,me=ts>>>13,ye=z[7]|0,Y=ye&8191,ve=ye>>>13,$e=z[8]|0,ke=$e&8191,qe=$e>>>13,tt=z[9]|0,ut=tt&8191,it=tt>>>13;B.negative=b.negative^I.negative,B.length=19,X=Math.imul(k,be),O=Math.imul(k,fe),O=O+Math.imul(j,be)|0,R=Math.imul(j,fe);var cr=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(cr>>>26)|0,cr&=67108863,X=Math.imul(ae,be),O=Math.imul(ae,fe),O=O+Math.imul(he,be)|0,R=Math.imul(he,fe),X=X+Math.imul(k,Fe)|0,O=O+Math.imul(k,He)|0,O=O+Math.imul(j,Fe)|0,R=R+Math.imul(j,He)|0;var gt=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(gt>>>26)|0,gt&=67108863,X=Math.imul(q,be),O=Math.imul(q,fe),O=O+Math.imul(J,be)|0,R=Math.imul(J,fe),X=X+Math.imul(ae,Fe)|0,O=O+Math.imul(ae,He)|0,O=O+Math.imul(he,Fe)|0,R=R+Math.imul(he,He)|0,X=X+Math.imul(k,De)|0,O=O+Math.imul(k,nt)|0,O=O+Math.imul(j,De)|0,R=R+Math.imul(j,nt)|0;var Ft=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,X=Math.imul(ue,be),O=Math.imul(ue,fe),O=O+Math.imul(we,be)|0,R=Math.imul(we,fe),X=X+Math.imul(q,Fe)|0,O=O+Math.imul(q,He)|0,O=O+Math.imul(J,Fe)|0,R=R+Math.imul(J,He)|0,X=X+Math.imul(ae,De)|0,O=O+Math.imul(ae,nt)|0,O=O+Math.imul(he,De)|0,R=R+Math.imul(he,nt)|0,X=X+Math.imul(k,dt)|0,O=O+Math.imul(k,Ct)|0,O=O+Math.imul(j,dt)|0,R=R+Math.imul(j,Ct)|0;var jt=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(jt>>>26)|0,jt&=67108863,X=Math.imul(U,be),O=Math.imul(U,fe),O=O+Math.imul(K,be)|0,R=Math.imul(K,fe),X=X+Math.imul(ue,Fe)|0,O=O+Math.imul(ue,He)|0,O=O+Math.imul(we,Fe)|0,R=R+Math.imul(we,He)|0,X=X+Math.imul(q,De)|0,O=O+Math.imul(q,nt)|0,O=O+Math.imul(J,De)|0,R=R+Math.imul(J,nt)|0,X=X+Math.imul(ae,dt)|0,O=O+Math.imul(ae,Ct)|0,O=O+Math.imul(he,dt)|0,R=R+Math.imul(he,Ct)|0,X=X+Math.imul(k,or)|0,O=O+Math.imul(k,fr)|0,O=O+Math.imul(j,or)|0,R=R+Math.imul(j,fr)|0;var Ht=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,X=Math.imul(ge,be),O=Math.imul(ge,fe),O=O+Math.imul(_e,be)|0,R=Math.imul(_e,fe),X=X+Math.imul(U,Fe)|0,O=O+Math.imul(U,He)|0,O=O+Math.imul(K,Fe)|0,R=R+Math.imul(K,He)|0,X=X+Math.imul(ue,De)|0,O=O+Math.imul(ue,nt)|0,O=O+Math.imul(we,De)|0,R=R+Math.imul(we,nt)|0,X=X+Math.imul(q,dt)|0,O=O+Math.imul(q,Ct)|0,O=O+Math.imul(J,dt)|0,R=R+Math.imul(J,Ct)|0,X=X+Math.imul(ae,or)|0,O=O+Math.imul(ae,fr)|0,O=O+Math.imul(he,or)|0,R=R+Math.imul(he,fr)|0,X=X+Math.imul(k,Xr)|0,O=O+Math.imul(k,yr)|0,O=O+Math.imul(j,Xr)|0,R=R+Math.imul(j,yr)|0;var ar=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(ar>>>26)|0,ar&=67108863,X=Math.imul(Ne,be),O=Math.imul(Ne,fe),O=O+Math.imul(xe,be)|0,R=Math.imul(xe,fe),X=X+Math.imul(ge,Fe)|0,O=O+Math.imul(ge,He)|0,O=O+Math.imul(_e,Fe)|0,R=R+Math.imul(_e,He)|0,X=X+Math.imul(U,De)|0,O=O+Math.imul(U,nt)|0,O=O+Math.imul(K,De)|0,R=R+Math.imul(K,nt)|0,X=X+Math.imul(ue,dt)|0,O=O+Math.imul(ue,Ct)|0,O=O+Math.imul(we,dt)|0,R=R+Math.imul(we,Ct)|0,X=X+Math.imul(q,or)|0,O=O+Math.imul(q,fr)|0,O=O+Math.imul(J,or)|0,R=R+Math.imul(J,fr)|0,X=X+Math.imul(ae,Xr)|0,O=O+Math.imul(ae,yr)|0,O=O+Math.imul(he,Xr)|0,R=R+Math.imul(he,yr)|0,X=X+Math.imul(k,ce)|0,O=O+Math.imul(k,me)|0,O=O+Math.imul(j,ce)|0,R=R+Math.imul(j,me)|0;var tr=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(tr>>>26)|0,tr&=67108863,X=Math.imul(Me,be),O=Math.imul(Me,fe),O=O+Math.imul(oe,be)|0,R=Math.imul(oe,fe),X=X+Math.imul(Ne,Fe)|0,O=O+Math.imul(Ne,He)|0,O=O+Math.imul(xe,Fe)|0,R=R+Math.imul(xe,He)|0,X=X+Math.imul(ge,De)|0,O=O+Math.imul(ge,nt)|0,O=O+Math.imul(_e,De)|0,R=R+Math.imul(_e,nt)|0,X=X+Math.imul(U,dt)|0,O=O+Math.imul(U,Ct)|0,O=O+Math.imul(K,dt)|0,R=R+Math.imul(K,Ct)|0,X=X+Math.imul(ue,or)|0,O=O+Math.imul(ue,fr)|0,O=O+Math.imul(we,or)|0,R=R+Math.imul(we,fr)|0,X=X+Math.imul(q,Xr)|0,O=O+Math.imul(q,yr)|0,O=O+Math.imul(J,Xr)|0,R=R+Math.imul(J,yr)|0,X=X+Math.imul(ae,ce)|0,O=O+Math.imul(ae,me)|0,O=O+Math.imul(he,ce)|0,R=R+Math.imul(he,me)|0,X=X+Math.imul(k,Y)|0,O=O+Math.imul(k,ve)|0,O=O+Math.imul(j,Y)|0,R=R+Math.imul(j,ve)|0;var ir=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(ir>>>26)|0,ir&=67108863,X=Math.imul(ee,be),O=Math.imul(ee,fe),O=O+Math.imul(W,be)|0,R=Math.imul(W,fe),X=X+Math.imul(Me,Fe)|0,O=O+Math.imul(Me,He)|0,O=O+Math.imul(oe,Fe)|0,R=R+Math.imul(oe,He)|0,X=X+Math.imul(Ne,De)|0,O=O+Math.imul(Ne,nt)|0,O=O+Math.imul(xe,De)|0,R=R+Math.imul(xe,nt)|0,X=X+Math.imul(ge,dt)|0,O=O+Math.imul(ge,Ct)|0,O=O+Math.imul(_e,dt)|0,R=R+Math.imul(_e,Ct)|0,X=X+Math.imul(U,or)|0,O=O+Math.imul(U,fr)|0,O=O+Math.imul(K,or)|0,R=R+Math.imul(K,fr)|0,X=X+Math.imul(ue,Xr)|0,O=O+Math.imul(ue,yr)|0,O=O+Math.imul(we,Xr)|0,R=R+Math.imul(we,yr)|0,X=X+Math.imul(q,ce)|0,O=O+Math.imul(q,me)|0,O=O+Math.imul(J,ce)|0,R=R+Math.imul(J,me)|0,X=X+Math.imul(ae,Y)|0,O=O+Math.imul(ae,ve)|0,O=O+Math.imul(he,Y)|0,R=R+Math.imul(he,ve)|0,X=X+Math.imul(k,ke)|0,O=O+Math.imul(k,qe)|0,O=O+Math.imul(j,ke)|0,R=R+Math.imul(j,qe)|0;var rr=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(rr>>>26)|0,rr&=67108863,X=Math.imul($,be),O=Math.imul($,fe),O=O+Math.imul(ne,be)|0,R=Math.imul(ne,fe),X=X+Math.imul(ee,Fe)|0,O=O+Math.imul(ee,He)|0,O=O+Math.imul(W,Fe)|0,R=R+Math.imul(W,He)|0,X=X+Math.imul(Me,De)|0,O=O+Math.imul(Me,nt)|0,O=O+Math.imul(oe,De)|0,R=R+Math.imul(oe,nt)|0,X=X+Math.imul(Ne,dt)|0,O=O+Math.imul(Ne,Ct)|0,O=O+Math.imul(xe,dt)|0,R=R+Math.imul(xe,Ct)|0,X=X+Math.imul(ge,or)|0,O=O+Math.imul(ge,fr)|0,O=O+Math.imul(_e,or)|0,R=R+Math.imul(_e,fr)|0,X=X+Math.imul(U,Xr)|0,O=O+Math.imul(U,yr)|0,O=O+Math.imul(K,Xr)|0,R=R+Math.imul(K,yr)|0,X=X+Math.imul(ue,ce)|0,O=O+Math.imul(ue,me)|0,O=O+Math.imul(we,ce)|0,R=R+Math.imul(we,me)|0,X=X+Math.imul(q,Y)|0,O=O+Math.imul(q,ve)|0,O=O+Math.imul(J,Y)|0,R=R+Math.imul(J,ve)|0,X=X+Math.imul(ae,ke)|0,O=O+Math.imul(ae,qe)|0,O=O+Math.imul(he,ke)|0,R=R+Math.imul(he,qe)|0,X=X+Math.imul(k,ut)|0,O=O+Math.imul(k,it)|0,O=O+Math.imul(j,ut)|0,R=R+Math.imul(j,it)|0;var It=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(It>>>26)|0,It&=67108863,X=Math.imul($,Fe),O=Math.imul($,He),O=O+Math.imul(ne,Fe)|0,R=Math.imul(ne,He),X=X+Math.imul(ee,De)|0,O=O+Math.imul(ee,nt)|0,O=O+Math.imul(W,De)|0,R=R+Math.imul(W,nt)|0,X=X+Math.imul(Me,dt)|0,O=O+Math.imul(Me,Ct)|0,O=O+Math.imul(oe,dt)|0,R=R+Math.imul(oe,Ct)|0,X=X+Math.imul(Ne,or)|0,O=O+Math.imul(Ne,fr)|0,O=O+Math.imul(xe,or)|0,R=R+Math.imul(xe,fr)|0,X=X+Math.imul(ge,Xr)|0,O=O+Math.imul(ge,yr)|0,O=O+Math.imul(_e,Xr)|0,R=R+Math.imul(_e,yr)|0,X=X+Math.imul(U,ce)|0,O=O+Math.imul(U,me)|0,O=O+Math.imul(K,ce)|0,R=R+Math.imul(K,me)|0,X=X+Math.imul(ue,Y)|0,O=O+Math.imul(ue,ve)|0,O=O+Math.imul(we,Y)|0,R=R+Math.imul(we,ve)|0,X=X+Math.imul(q,ke)|0,O=O+Math.imul(q,qe)|0,O=O+Math.imul(J,ke)|0,R=R+Math.imul(J,qe)|0,X=X+Math.imul(ae,ut)|0,O=O+Math.imul(ae,it)|0,O=O+Math.imul(he,ut)|0,R=R+Math.imul(he,it)|0;var Ut=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,X=Math.imul($,De),O=Math.imul($,nt),O=O+Math.imul(ne,De)|0,R=Math.imul(ne,nt),X=X+Math.imul(ee,dt)|0,O=O+Math.imul(ee,Ct)|0,O=O+Math.imul(W,dt)|0,R=R+Math.imul(W,Ct)|0,X=X+Math.imul(Me,or)|0,O=O+Math.imul(Me,fr)|0,O=O+Math.imul(oe,or)|0,R=R+Math.imul(oe,fr)|0,X=X+Math.imul(Ne,Xr)|0,O=O+Math.imul(Ne,yr)|0,O=O+Math.imul(xe,Xr)|0,R=R+Math.imul(xe,yr)|0,X=X+Math.imul(ge,ce)|0,O=O+Math.imul(ge,me)|0,O=O+Math.imul(_e,ce)|0,R=R+Math.imul(_e,me)|0,X=X+Math.imul(U,Y)|0,O=O+Math.imul(U,ve)|0,O=O+Math.imul(K,Y)|0,R=R+Math.imul(K,ve)|0,X=X+Math.imul(ue,ke)|0,O=O+Math.imul(ue,qe)|0,O=O+Math.imul(we,ke)|0,R=R+Math.imul(we,qe)|0,X=X+Math.imul(q,ut)|0,O=O+Math.imul(q,it)|0,O=O+Math.imul(J,ut)|0,R=R+Math.imul(J,it)|0;var xt=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(xt>>>26)|0,xt&=67108863,X=Math.imul($,dt),O=Math.imul($,Ct),O=O+Math.imul(ne,dt)|0,R=Math.imul(ne,Ct),X=X+Math.imul(ee,or)|0,O=O+Math.imul(ee,fr)|0,O=O+Math.imul(W,or)|0,R=R+Math.imul(W,fr)|0,X=X+Math.imul(Me,Xr)|0,O=O+Math.imul(Me,yr)|0,O=O+Math.imul(oe,Xr)|0,R=R+Math.imul(oe,yr)|0,X=X+Math.imul(Ne,ce)|0,O=O+Math.imul(Ne,me)|0,O=O+Math.imul(xe,ce)|0,R=R+Math.imul(xe,me)|0,X=X+Math.imul(ge,Y)|0,O=O+Math.imul(ge,ve)|0,O=O+Math.imul(_e,Y)|0,R=R+Math.imul(_e,ve)|0,X=X+Math.imul(U,ke)|0,O=O+Math.imul(U,qe)|0,O=O+Math.imul(K,ke)|0,R=R+Math.imul(K,qe)|0,X=X+Math.imul(ue,ut)|0,O=O+Math.imul(ue,it)|0,O=O+Math.imul(we,ut)|0,R=R+Math.imul(we,it)|0;var Tt=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,X=Math.imul($,or),O=Math.imul($,fr),O=O+Math.imul(ne,or)|0,R=Math.imul(ne,fr),X=X+Math.imul(ee,Xr)|0,O=O+Math.imul(ee,yr)|0,O=O+Math.imul(W,Xr)|0,R=R+Math.imul(W,yr)|0,X=X+Math.imul(Me,ce)|0,O=O+Math.imul(Me,me)|0,O=O+Math.imul(oe,ce)|0,R=R+Math.imul(oe,me)|0,X=X+Math.imul(Ne,Y)|0,O=O+Math.imul(Ne,ve)|0,O=O+Math.imul(xe,Y)|0,R=R+Math.imul(xe,ve)|0,X=X+Math.imul(ge,ke)|0,O=O+Math.imul(ge,qe)|0,O=O+Math.imul(_e,ke)|0,R=R+Math.imul(_e,qe)|0,X=X+Math.imul(U,ut)|0,O=O+Math.imul(U,it)|0,O=O+Math.imul(K,ut)|0,R=R+Math.imul(K,it)|0;var Ot=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,X=Math.imul($,Xr),O=Math.imul($,yr),O=O+Math.imul(ne,Xr)|0,R=Math.imul(ne,yr),X=X+Math.imul(ee,ce)|0,O=O+Math.imul(ee,me)|0,O=O+Math.imul(W,ce)|0,R=R+Math.imul(W,me)|0,X=X+Math.imul(Me,Y)|0,O=O+Math.imul(Me,ve)|0,O=O+Math.imul(oe,Y)|0,R=R+Math.imul(oe,ve)|0,X=X+Math.imul(Ne,ke)|0,O=O+Math.imul(Ne,qe)|0,O=O+Math.imul(xe,ke)|0,R=R+Math.imul(xe,qe)|0,X=X+Math.imul(ge,ut)|0,O=O+Math.imul(ge,it)|0,O=O+Math.imul(_e,ut)|0,R=R+Math.imul(_e,it)|0;var bt=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(bt>>>26)|0,bt&=67108863,X=Math.imul($,ce),O=Math.imul($,me),O=O+Math.imul(ne,ce)|0,R=Math.imul(ne,me),X=X+Math.imul(ee,Y)|0,O=O+Math.imul(ee,ve)|0,O=O+Math.imul(W,Y)|0,R=R+Math.imul(W,ve)|0,X=X+Math.imul(Me,ke)|0,O=O+Math.imul(Me,qe)|0,O=O+Math.imul(oe,ke)|0,R=R+Math.imul(oe,qe)|0,X=X+Math.imul(Ne,ut)|0,O=O+Math.imul(Ne,it)|0,O=O+Math.imul(xe,ut)|0,R=R+Math.imul(xe,it)|0;var Ue=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,X=Math.imul($,Y),O=Math.imul($,ve),O=O+Math.imul(ne,Y)|0,R=Math.imul(ne,ve),X=X+Math.imul(ee,ke)|0,O=O+Math.imul(ee,qe)|0,O=O+Math.imul(W,ke)|0,R=R+Math.imul(W,qe)|0,X=X+Math.imul(Me,ut)|0,O=O+Math.imul(Me,it)|0,O=O+Math.imul(oe,ut)|0,R=R+Math.imul(oe,it)|0;var ze=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(ze>>>26)|0,ze&=67108863,X=Math.imul($,ke),O=Math.imul($,qe),O=O+Math.imul(ne,ke)|0,R=Math.imul(ne,qe),X=X+Math.imul(ee,ut)|0,O=O+Math.imul(ee,it)|0,O=O+Math.imul(W,ut)|0,R=R+Math.imul(W,it)|0;var et=(Q+X|0)+((O&8191)<<13)|0;Q=(R+(O>>>13)|0)+(et>>>26)|0,et&=67108863,X=Math.imul($,ut),O=Math.imul($,it),O=O+Math.imul(ne,ut)|0,R=Math.imul(ne,it);var Ye=(Q+X|0)+((O&8191)<<13)|0;return Q=(R+(O>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,G[0]=cr,G[1]=gt,G[2]=Ft,G[3]=jt,G[4]=Ht,G[5]=ar,G[6]=tr,G[7]=ir,G[8]=rr,G[9]=It,G[10]=Ut,G[11]=xt,G[12]=Tt,G[13]=Ot,G[14]=bt,G[15]=Ue,G[16]=ze,G[17]=et,G[18]=Ye,Q!==0&&(G[19]=Q,B.length++),B};Math.imul||(v=y);function w(D,b,I){I.negative=b.negative^D.negative,I.length=D.length+b.length;for(var B=0,F=0,z=0;z<I.length-1;z++){var G=F;F=0;for(var Q=B&67108863,X=Math.min(z,b.length-1),O=Math.max(0,z-D.length+1);O<=X;O++){var R=z-O,M=D.words[R]|0,k=b.words[O]|0,j=M*k,te=j&67108863;G=G+(j/67108864|0)|0,te=te+Q|0,Q=te&67108863,G=G+(te>>>26)|0,F+=G>>>26,G&=67108863}I.words[z]=Q,B=G,G=F}return B!==0?I.words[z]=B:I.length--,I._strip()}function _(D,b,I){return w(D,b,I)}s.prototype.mulTo=function(b,I){var B,F=this.length+b.length;return this.length===10&&b.length===10?B=v(this,b,I):F<63?B=y(this,b,I):F<1024?B=w(this,b,I):B=_(this,b,I),B},s.prototype.mul=function(b){var I=new s(null);return I.words=new Array(this.length+b.length),this.mulTo(b,I)},s.prototype.mulf=function(b){var I=new s(null);return I.words=new Array(this.length+b.length),_(this,b,I)},s.prototype.imul=function(b){return this.clone().mulTo(b,this)},s.prototype.imuln=function(b){var I=b<0;I&&(b=-b),n(typeof b=="number"),n(b<67108864);for(var B=0,F=0;F<this.length;F++){var z=(this.words[F]|0)*b,G=(z&67108863)+(B&67108863);B>>=26,B+=z/67108864|0,B+=G>>>26,this.words[F]=G&67108863}return B!==0&&(this.words[F]=B,this.length++),this.length=b===0?1:this.length,I?this.ineg():this},s.prototype.muln=function(b){return this.clone().imuln(b)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(b){var I=m(b);if(I.length===0)return new s(1);for(var B=this,F=0;F<I.length&&I[F]===0;F++,B=B.sqr());if(++F<I.length)for(var z=B.sqr();F<I.length;F++,z=z.sqr())I[F]!==0&&(B=B.mul(z));return B},s.prototype.iushln=function(b){n(typeof b=="number"&&b>=0);var I=b%26,B=(b-I)/26,F=67108863>>>26-I<<26-I,z;if(I!==0){var G=0;for(z=0;z<this.length;z++){var Q=this.words[z]&F,X=(this.words[z]|0)-Q<<I;this.words[z]=X|G,G=Q>>>26-I}G&&(this.words[z]=G,this.length++)}if(B!==0){for(z=this.length-1;z>=0;z--)this.words[z+B]=this.words[z];for(z=0;z<B;z++)this.words[z]=0;this.length+=B}return this._strip()},s.prototype.ishln=function(b){return n(this.negative===0),this.iushln(b)},s.prototype.iushrn=function(b,I,B){n(typeof b=="number"&&b>=0);var F;I?F=(I-I%26)/26:F=0;var z=b%26,G=Math.min((b-z)/26,this.length),Q=67108863^67108863>>>z<<z,X=B;if(F-=G,F=Math.max(0,F),X){for(var O=0;O<G;O++)X.words[O]=this.words[O];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,O=0;O<this.length;O++)this.words[O]=this.words[O+G];else this.words[0]=0,this.length=1;var R=0;for(O=this.length-1;O>=0&&(R!==0||O>=F);O--){var M=this.words[O]|0;this.words[O]=R<<26-z|M>>>z,R=M&Q}return X&&R!==0&&(X.words[X.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(b,I,B){return n(this.negative===0),this.iushrn(b,I,B)},s.prototype.shln=function(b){return this.clone().ishln(b)},s.prototype.ushln=function(b){return this.clone().iushln(b)},s.prototype.shrn=function(b){return this.clone().ishrn(b)},s.prototype.ushrn=function(b){return this.clone().iushrn(b)},s.prototype.testn=function(b){n(typeof b=="number"&&b>=0);var I=b%26,B=(b-I)/26,F=1<<I;if(this.length<=B)return!1;var z=this.words[B];return!!(z&F)},s.prototype.imaskn=function(b){n(typeof b=="number"&&b>=0);var I=b%26,B=(b-I)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=B)return this;if(I!==0&&B++,this.length=Math.min(B,this.length),I!==0){var F=67108863^67108863>>>I<<I;this.words[this.length-1]&=F}return this._strip()},s.prototype.maskn=function(b){return this.clone().imaskn(b)},s.prototype.iaddn=function(b){return n(typeof b=="number"),n(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<=b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},s.prototype._iaddn=function(b){this.words[0]+=b;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(b){if(n(typeof b=="number"),n(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(b){return this.clone().iaddn(b)},s.prototype.subn=function(b){return this.clone().isubn(b)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(b,I,B){var F=b.length+B,z;this._expand(F);var G,Q=0;for(z=0;z<b.length;z++){G=(this.words[z+B]|0)+Q;var X=(b.words[z]|0)*I;G-=X&67108863,Q=(G>>26)-(X/67108864|0),this.words[z+B]=G&67108863}for(;z<this.length-B;z++)G=(this.words[z+B]|0)+Q,Q=G>>26,this.words[z+B]=G&67108863;if(Q===0)return this._strip();for(n(Q===-1),Q=0,z=0;z<this.length;z++)G=-(this.words[z]|0)+Q,Q=G>>26,this.words[z]=G&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(b,I){var B=this.length-b.length,F=this.clone(),z=b,G=z.words[z.length-1]|0,Q=this._countBits(G);B=26-Q,B!==0&&(z=z.ushln(B),F.iushln(B),G=z.words[z.length-1]|0);var X=F.length-z.length,O;if(I!=="mod"){O=new s(null),O.length=X+1,O.words=new Array(O.length);for(var R=0;R<O.length;R++)O.words[R]=0}var M=F.clone()._ishlnsubmul(z,1,X);M.negative===0&&(F=M,O&&(O.words[X]=1));for(var k=X-1;k>=0;k--){var j=(F.words[z.length+k]|0)*67108864+(F.words[z.length+k-1]|0);for(j=Math.min(j/G|0,67108863),F._ishlnsubmul(z,j,k);F.negative!==0;)j--,F.negative=0,F._ishlnsubmul(z,1,k),F.isZero()||(F.negative^=1);O&&(O.words[k]=j)}return O&&O._strip(),F._strip(),I!=="div"&&B!==0&&F.iushrn(B),{div:O||null,mod:F}},s.prototype.divmod=function(b,I,B){if(n(!b.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var F,z,G;return this.negative!==0&&b.negative===0?(G=this.neg().divmod(b,I),I!=="mod"&&(F=G.div.neg()),I!=="div"&&(z=G.mod.neg(),B&&z.negative!==0&&z.iadd(b)),{div:F,mod:z}):this.negative===0&&b.negative!==0?(G=this.divmod(b.neg(),I),I!=="mod"&&(F=G.div.neg()),{div:F,mod:G.mod}):(this.negative&b.negative)!==0?(G=this.neg().divmod(b.neg(),I),I!=="div"&&(z=G.mod.neg(),B&&z.negative!==0&&z.isub(b)),{div:G.div,mod:z}):b.length>this.length||this.cmp(b)<0?{div:new s(0),mod:this}:b.length===1?I==="div"?{div:this.divn(b.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new s(this.modrn(b.words[0]))}:this._wordDiv(b,I)},s.prototype.div=function(b){return this.divmod(b,"div",!1).div},s.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},s.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},s.prototype.divRound=function(b){var I=this.divmod(b);if(I.mod.isZero())return I.div;var B=I.div.negative!==0?I.mod.isub(b):I.mod,F=b.ushrn(1),z=b.andln(1),G=B.cmp(F);return G<0||z===1&&G===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(b){var I=b<0;I&&(b=-b),n(b<=67108863);for(var B=(1<<26)%b,F=0,z=this.length-1;z>=0;z--)F=(B*F+(this.words[z]|0))%b;return I?-F:F},s.prototype.modn=function(b){return this.modrn(b)},s.prototype.idivn=function(b){var I=b<0;I&&(b=-b),n(b<=67108863);for(var B=0,F=this.length-1;F>=0;F--){var z=(this.words[F]|0)+B*67108864;this.words[F]=z/b|0,B=z%b}return this._strip(),I?this.ineg():this},s.prototype.divn=function(b){return this.clone().idivn(b)},s.prototype.egcd=function(b){n(b.negative===0),n(!b.isZero());var I=this,B=b.clone();I.negative!==0?I=I.umod(b):I=I.clone();for(var F=new s(1),z=new s(0),G=new s(0),Q=new s(1),X=0;I.isEven()&&B.isEven();)I.iushrn(1),B.iushrn(1),++X;for(var O=B.clone(),R=I.clone();!I.isZero();){for(var M=0,k=1;(I.words[0]&k)===0&&M<26;++M,k<<=1);if(M>0)for(I.iushrn(M);M-- >0;)(F.isOdd()||z.isOdd())&&(F.iadd(O),z.isub(R)),F.iushrn(1),z.iushrn(1);for(var j=0,te=1;(B.words[0]&te)===0&&j<26;++j,te<<=1);if(j>0)for(B.iushrn(j);j-- >0;)(G.isOdd()||Q.isOdd())&&(G.iadd(O),Q.isub(R)),G.iushrn(1),Q.iushrn(1);I.cmp(B)>=0?(I.isub(B),F.isub(G),z.isub(Q)):(B.isub(I),G.isub(F),Q.isub(z))}return{a:G,b:Q,gcd:B.iushln(X)}},s.prototype._invmp=function(b){n(b.negative===0),n(!b.isZero());var I=this,B=b.clone();I.negative!==0?I=I.umod(b):I=I.clone();for(var F=new s(1),z=new s(0),G=B.clone();I.cmpn(1)>0&&B.cmpn(1)>0;){for(var Q=0,X=1;(I.words[0]&X)===0&&Q<26;++Q,X<<=1);if(Q>0)for(I.iushrn(Q);Q-- >0;)F.isOdd()&&F.iadd(G),F.iushrn(1);for(var O=0,R=1;(B.words[0]&R)===0&&O<26;++O,R<<=1);if(O>0)for(B.iushrn(O);O-- >0;)z.isOdd()&&z.iadd(G),z.iushrn(1);I.cmp(B)>=0?(I.isub(B),F.isub(z)):(B.isub(I),z.isub(F))}var M;return I.cmpn(1)===0?M=F:M=z,M.cmpn(0)<0&&M.iadd(b),M},s.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var I=this.clone(),B=b.clone();I.negative=0,B.negative=0;for(var F=0;I.isEven()&&B.isEven();F++)I.iushrn(1),B.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;B.isEven();)B.iushrn(1);var z=I.cmp(B);if(z<0){var G=I;I=B,B=G}else if(z===0||B.cmpn(1)===0)break;I.isub(B)}while(!0);return B.iushln(F)},s.prototype.invm=function(b){return this.egcd(b).a.umod(b)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(b){return this.words[0]&b},s.prototype.bincn=function(b){n(typeof b=="number");var I=b%26,B=(b-I)/26,F=1<<I;if(this.length<=B)return this._expand(B+1),this.words[B]|=F,this;for(var z=F,G=B;z!==0&&G<this.length;G++){var Q=this.words[G]|0;Q+=z,z=Q>>>26,Q&=67108863,this.words[G]=Q}return z!==0&&(this.words[G]=z,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(b){var I=b<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var B;if(this.length>1)B=1;else{I&&(b=-b),n(b<=67108863,"Number is too big");var F=this.words[0]|0;B=F===b?0:F<b?-1:1}return this.negative!==0?-B|0:B},s.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var I=this.ucmp(b);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var I=0,B=this.length-1;B>=0;B--){var F=this.words[B]|0,z=b.words[B]|0;if(F!==z){F<z?I=-1:F>z&&(I=1);break}}return I},s.prototype.gtn=function(b){return this.cmpn(b)===1},s.prototype.gt=function(b){return this.cmp(b)===1},s.prototype.gten=function(b){return this.cmpn(b)>=0},s.prototype.gte=function(b){return this.cmp(b)>=0},s.prototype.ltn=function(b){return this.cmpn(b)===-1},s.prototype.lt=function(b){return this.cmp(b)===-1},s.prototype.lten=function(b){return this.cmpn(b)<=0},s.prototype.lte=function(b){return this.cmp(b)<=0},s.prototype.eqn=function(b){return this.cmpn(b)===0},s.prototype.eq=function(b){return this.cmp(b)===0},s.red=function(b){return new V(b)},s.prototype.toRed=function(b){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(b){return this.red=b,this},s.prototype.forceRed=function(b){return n(!this.red,"Already a number in reduction context"),this._forceRed(b)},s.prototype.redAdd=function(b){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},s.prototype.redIAdd=function(b){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},s.prototype.redSub=function(b){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},s.prototype.redISub=function(b){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},s.prototype.redShl=function(b){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},s.prototype.redMul=function(b){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},s.prototype.redIMul=function(b){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(b){return n(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var x={k256:null,p224:null,p192:null,p25519:null};function E(D,b){this.name=D,this.p=new s(b,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var b=new s(null);return b.words=new Array(Math.ceil(this.n/13)),b},E.prototype.ireduce=function(b){var I=b,B;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),B=I.bitLength();while(B>this.n);var F=B<this.n?-1:I.ucmp(this.p);return F===0?(I.words[0]=0,I.length=1):F>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},E.prototype.split=function(b,I){b.iushrn(this.n,0,I)},E.prototype.imulK=function(b){return b.imul(this.k)};function S(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(S,E),S.prototype.split=function(b,I){for(var B=4194303,F=Math.min(b.length,9),z=0;z<F;z++)I.words[z]=b.words[z];if(I.length=F,b.length<=9){b.words[0]=0,b.length=1;return}var G=b.words[9];for(I.words[I.length++]=G&B,z=10;z<b.length;z++){var Q=b.words[z]|0;b.words[z-10]=(Q&B)<<4|G>>>22,G=Q}G>>>=22,b.words[z-10]=G,G===0&&b.length>10?b.length-=10:b.length-=9},S.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var I=0,B=0;B<b.length;B++){var F=b.words[B]|0;I+=F*977,b.words[B]=I&67108863,I=F*64+(I/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function T(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(T,E);function C(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(C,E);function P(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(P,E),P.prototype.imulK=function(b){for(var I=0,B=0;B<b.length;B++){var F=(b.words[B]|0)*19+I,z=F&67108863;F>>>=26,b.words[B]=z,I=F}return I!==0&&(b.words[b.length++]=I),b},s._prime=function(b){if(x[b])return x[b];var I;if(b==="k256")I=new S;else if(b==="p224")I=new T;else if(b==="p192")I=new C;else if(b==="p25519")I=new P;else throw new Error("Unknown prime "+b);return x[b]=I,I};function V(D){if(typeof D=="string"){var b=s._prime(D);this.m=b.p,this.prime=b}else n(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}V.prototype._verify1=function(b){n(b.negative===0,"red works only with positives"),n(b.red,"red works only with red numbers")},V.prototype._verify2=function(b,I){n((b.negative|I.negative)===0,"red works only with positives"),n(b.red&&b.red===I.red,"red works only with red numbers")},V.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):(u(b,b.umod(this.m)._forceRed(this)),b)},V.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},V.prototype.add=function(b,I){this._verify2(b,I);var B=b.add(I);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},V.prototype.iadd=function(b,I){this._verify2(b,I);var B=b.iadd(I);return B.cmp(this.m)>=0&&B.isub(this.m),B},V.prototype.sub=function(b,I){this._verify2(b,I);var B=b.sub(I);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},V.prototype.isub=function(b,I){this._verify2(b,I);var B=b.isub(I);return B.cmpn(0)<0&&B.iadd(this.m),B},V.prototype.shl=function(b,I){return this._verify1(b),this.imod(b.ushln(I))},V.prototype.imul=function(b,I){return this._verify2(b,I),this.imod(b.imul(I))},V.prototype.mul=function(b,I){return this._verify2(b,I),this.imod(b.mul(I))},V.prototype.isqr=function(b){return this.imul(b,b.clone())},V.prototype.sqr=function(b){return this.mul(b,b)},V.prototype.sqrt=function(b){if(b.isZero())return b.clone();var I=this.m.andln(3);if(n(I%2===1),I===3){var B=this.m.add(new s(1)).iushrn(2);return this.pow(b,B)}for(var F=this.m.subn(1),z=0;!F.isZero()&&F.andln(1)===0;)z++,F.iushrn(1);n(!F.isZero());var G=new s(1).toRed(this),Q=G.redNeg(),X=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new s(2*O*O).toRed(this);this.pow(O,X).cmp(Q)!==0;)O.redIAdd(Q);for(var R=this.pow(O,F),M=this.pow(b,F.addn(1).iushrn(1)),k=this.pow(b,F),j=z;k.cmp(G)!==0;){for(var te=k,ae=0;te.cmp(G)!==0;ae++)te=te.redSqr();n(ae<j);var he=this.pow(R,new s(1).iushln(j-ae-1));M=M.redMul(he),R=he.redSqr(),k=k.redMul(R),j=ae}return M},V.prototype.invm=function(b){var I=b._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},V.prototype.pow=function(b,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return b.clone();var B=4,F=new Array(1<<B);F[0]=new s(1).toRed(this),F[1]=b;for(var z=2;z<F.length;z++)F[z]=this.mul(F[z-1],b);var G=F[0],Q=0,X=0,O=I.bitLength()%26;for(O===0&&(O=26),z=I.length-1;z>=0;z--){for(var R=I.words[z],M=O-1;M>=0;M--){var k=R>>M&1;if(G!==F[0]&&(G=this.sqr(G)),k===0&&Q===0){X=0;continue}Q<<=1,Q|=k,X++,!(X!==B&&(z!==0||M!==0))&&(G=this.mul(G,F[Q]),X=0,Q=0)}O=26}return G},V.prototype.convertTo=function(b){var I=b.umod(this.m);return I===b?I.clone():I},V.prototype.convertFrom=function(b){var I=b.clone();return I.red=null,I},s.mont=function(b){return new L(b)};function L(D){V.call(this,D),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(L,V),L.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},L.prototype.convertFrom=function(b){var I=this.imod(b.mul(this.rinv));return I.red=null,I},L.prototype.imul=function(b,I){if(b.isZero()||I.isZero())return b.words[0]=0,b.length=1,b;var B=b.imul(I),F=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=B.isub(F).iushrn(this.shift),G=z;return z.cmp(this.m)>=0?G=z.isub(this.m):z.cmpn(0)<0&&(G=z.iadd(this.m)),G._forceRed(this)},L.prototype.mul=function(b,I){if(b.isZero()||I.isZero())return new s(0)._forceRed(this);var B=b.mul(I),F=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=B.isub(F).iushrn(this.shift),G=z;return z.cmp(this.m)>=0?G=z.isub(this.m):z.cmpn(0)<0&&(G=z.iadd(this.m)),G._forceRed(this)},L.prototype.invm=function(b){var I=this.imod(b._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(r,Eue)}(vv)),vv.exports}var Aue=MV();const sr=zs(Aue),Iue="bytes/5.8.0",Vn=new Ke(Iue);function BV(r){return!!r.toHexString}function Ih(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return Ih(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function n4(r){return mn(r)&&!(r.length%2)||Ap(r)}function AO(r){return typeof r=="number"&&r==r&&r%1===0}function Ap(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!AO(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!AO(t)||t<0||t>=256)return!1}return!0}function Ar(r,e){if(e||(e={}),typeof r=="number"){Vn.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Ih(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),BV(r)&&(r=r.toHexString()),mn(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Vn.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return Ih(new Uint8Array(n))}return Ap(r)?Ih(new Uint8Array(r)):Vn.throwArgumentError("invalid arrayify value","value",r)}function Ef(r){const e=r.map(i=>Ar(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Ih(n)}function Gh(r){let e=Ar(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Cue(r,e){r=Ar(r),r.length>e&&Vn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),Ih(t)}function mn(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Rx="0123456789abcdef";function Er(r,e){if(e||(e={}),typeof r=="number"){Vn.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Rx[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),BV(r))return r.toHexString();if(mn(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Vn.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Ap(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=Rx[(i&240)>>4]+Rx[i&15]}return t}return Vn.throwArgumentError("invalid hexlify value","value",r)}function Hf(r){if(typeof r!="string")r=Er(r);else if(!mn(r)||r.length%2)return null;return(r.length-2)/2}function Os(r,e,t){return typeof r!="string"?r=Er(r):(!mn(r)||r.length%2)&&Vn.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Io(r){let e="0x";return r.forEach(t=>{e+=Er(t).substring(2)}),e}function i4(r){const e=Tue(Er(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function Tue(r){typeof r!="string"&&(r=Er(r)),mn(r)||Vn.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function Hn(r,e){for(typeof r!="string"?r=Er(r):mn(r)||Vn.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&Vn.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function j1(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(n4(r)){let t=Ar(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Er(t.slice(0,32)),e.s=Er(t.slice(32,64))):t.length===65?(e.r=Er(t.slice(0,32)),e.s=Er(t.slice(32,64)),e.v=t[64]):Vn.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:Vn.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Er(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=Cue(Ar(e._vs),32);e._vs=Er(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Vn.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const o=Er(i);e.s==null?e.s=o:e.s!==o&&Vn.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?Vn.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Vn.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!mn(e.r)?Vn.throwArgumentError("signature missing or invalid r","signature",r):e.r=Hn(e.r,32),e.s==null||!mn(e.s)?Vn.throwArgumentError("signature missing or invalid s","signature",r):e.s=Hn(e.s,32);const t=Ar(e.s);t[0]>=128&&Vn.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=Er(t);e._vs&&(mn(e._vs)||Vn.throwArgumentError("signature invalid _vs","signature",r),e._vs=Hn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Vn.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const NV="bignumber/5.8.0";var db=sr.BN;const Vc=new Ke(NV),kx={},Rue=9007199254740991;function kue(r){return r!=null&&(_t.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||mn(r)||typeof r=="bigint"||Ap(r))}let IO=!1;class _t{constructor(e,t){e!==kx&&Vc.throwError("cannot call constructor directly; use BigNumber.from",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Ks(zr(this).fromTwos(e))}toTwos(e){return Ks(zr(this).toTwos(e))}abs(){return this._hex[0]==="-"?_t.from(this._hex.substring(1)):this}add(e){return Ks(zr(this).add(zr(e)))}sub(e){return Ks(zr(this).sub(zr(e)))}div(e){return _t.from(e).isZero()&&Vo("division-by-zero","div"),Ks(zr(this).div(zr(e)))}mul(e){return Ks(zr(this).mul(zr(e)))}mod(e){const t=zr(e);return t.isNeg()&&Vo("division-by-zero","mod"),Ks(zr(this).umod(t))}pow(e){const t=zr(e);return t.isNeg()&&Vo("negative-power","pow"),Ks(zr(this).pow(t))}and(e){const t=zr(e);return(this.isNegative()||t.isNeg())&&Vo("unbound-bitwise-result","and"),Ks(zr(this).and(t))}or(e){const t=zr(e);return(this.isNegative()||t.isNeg())&&Vo("unbound-bitwise-result","or"),Ks(zr(this).or(t))}xor(e){const t=zr(e);return(this.isNegative()||t.isNeg())&&Vo("unbound-bitwise-result","xor"),Ks(zr(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Vo("negative-width","mask"),Ks(zr(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Vo("negative-width","shl"),Ks(zr(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Vo("negative-width","shr"),Ks(zr(this).shrn(e))}eq(e){return zr(this).eq(zr(e))}lt(e){return zr(this).lt(zr(e))}lte(e){return zr(this).lte(zr(e))}gt(e){return zr(this).gt(zr(e))}gte(e){return zr(this).gte(zr(e))}isNegative(){return this._hex[0]==="-"}isZero(){return zr(this).isZero()}toNumber(){try{return zr(this).toNumber()}catch{Vo("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Vc.throwError("this platform does not support BigInt",Ke.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?IO||(IO=!0,Vc.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Vc.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ke.errors.UNEXPECTED_ARGUMENT,{}):Vc.throwError("BigNumber.toString does not accept parameters",Ke.errors.UNEXPECTED_ARGUMENT,{})),zr(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof _t)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new _t(kx,jg(e)):e.match(/^-?[0-9]+$/)?new _t(kx,jg(new db(e))):Vc.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Vo("underflow","BigNumber.from",e),(e>=Rue||e<=-9007199254740991)&&Vo("overflow","BigNumber.from",e),_t.from(String(e));const t=e;if(typeof t=="bigint")return _t.from(t.toString());if(Ap(t))return _t.from(Er(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return _t.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&(mn(n)||n[0]==="-"&&mn(n.substring(1))))return _t.from(n)}return Vc.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function jg(r){if(typeof r!="string")return jg(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Vc.throwArgumentError("invalid hex","value",r),r=jg(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Ks(r){return _t.from(jg(r))}function zr(r){const e=_t.from(r).toHexString();return e[0]==="-"?new db("-"+e.substring(3),16):new db(e.substring(2),16)}function Vo(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),Vc.throwError(r,Ke.errors.NUMERIC_FAULT,n)}function Oue(r){return new db(r,36).toString(16)}const Ps=new Ke(NV),lg={},LV=_t.from(0),FV=_t.from(-1);function UV(r,e,t,n){const i={fault:e,operation:t};return n!==void 0&&(i.value=n),Ps.throwError(r,Ke.errors.NUMERIC_FAULT,i)}let ug="0";for(;ug.length<256;)ug+=ug;function s4(r){if(typeof r!="number")try{r=_t.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+ug.substring(0,r):Ps.throwArgumentError("invalid decimal size","decimals",r)}function Ox(r,e){e==null&&(e=0);const t=s4(e);r=_t.from(r);const n=r.lt(LV);n&&(r=r.mul(FV));let i=r.mod(t).toString();for(;i.length<t.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=r.div(t).toString();return t.length===1?r=s:r=s+"."+i,n&&(r="-"+r),r}function tc(r,e){e==null&&(e=0);const t=s4(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Ps.throwArgumentError("invalid decimal value","value",r);const n=r.substring(0,1)==="-";n&&(r=r.substring(1)),r==="."&&Ps.throwArgumentError("missing value","value",r);const i=r.split(".");i.length>2&&Ps.throwArgumentError("too many decimal points","value",r);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>t.length-1&&UV("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<t.length-1;)o+="0";const a=_t.from(s),c=_t.from(o);let l=a.mul(t).add(c);return n&&(l=l.mul(FV)),l}class Ch{constructor(e,t,n,i){e!==lg&&Ps.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=n,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=s4(i),Object.freeze(this)}static from(e){if(e instanceof Ch)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Ps.throwArgumentError("invalid fixed format","format",e),t=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Ps.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);t=s("signed","boolean",t),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Ps.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Ps.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Ch(lg,t,n,i)}}class Bi{constructor(e,t,n,i){e!==lg&&Ps.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Ps.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=tc(this._value,this.format.decimals),n=tc(e._value,e.format.decimals);return Bi.fromValue(t.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=tc(this._value,this.format.decimals),n=tc(e._value,e.format.decimals);return Bi.fromValue(t.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=tc(this._value,this.format.decimals),n=tc(e._value,e.format.decimals);return Bi.fromValue(t.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=tc(this._value,this.format.decimals),n=tc(e._value,e.format.decimals);return Bi.fromValue(t.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Bi.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(t=t.subUnsafe(CO.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Bi.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(t=t.addUnsafe(CO.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Ps.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const n=Bi.from("1"+ug.substring(0,e),this.format),i=Pue.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Ps.throwArgumentError("invalid byte width","width",e);const t=_t.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Hn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Bi.fromString(this._value,e)}static fromValue(e,t,n){return n==null&&t!=null&&!kue(t)&&(n=t,t=null),t==null&&(t=0),n==null&&(n="fixed"),Bi.fromString(Ox(e,t),Ch.from(n))}static fromString(e,t){t==null&&(t="fixed");const n=Ch.from(t),i=tc(e,n.decimals);!n.signed&&i.lt(LV)&&UV("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=Hn(s,n.width/8));const o=Ox(i,n.decimals);return new Bi(lg,s,o,n)}static fromBytes(e,t){t==null&&(t="fixed");const n=Ch.from(t);if(Ar(e).length>n.width/8)throw new Error("overflow");let i=_t.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Ox(i,n.decimals);return new Bi(lg,s,o,n)}static from(e,t){if(typeof e=="string")return Bi.fromString(e,t);if(Ap(e))return Bi.fromBytes(e,t);try{return Bi.fromValue(e,0,t)}catch(n){if(n.code!==Ke.errors.INVALID_ARGUMENT)throw n}return Ps.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const CO=Bi.from(1),Pue=Bi.from("0.5"),$ue="abstract-provider/5.8.0";var Due=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Mue=new Ke($ue);class Bue extends vue{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class o4{constructor(){Mue.checkAbstract(new.target,o4),qr(this,"_isProvider",!0)}getFeeData(){return Due(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ui({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=_t.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Nue="networks/5.8.0",TO=new Ke(Nue);function Lue(r){return r&&typeof r.renetwork=="function"}function ya(r){const e=function(t,n){n==null&&(n={});const i=[];if(t.InfuraProvider&&n.infura!=="-")try{i.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{i.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{i.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(r,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(r,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(t.QuickNodeProvider&&n.quicknode!=="-")try{i.push(new t.QuickNodeProvider(r,n.quicknode))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:r==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return ya(t)},e}function hb(r,e){const t=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return hb(r,n)},t}const RO={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ya("homestead")},kO={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ya("ropsten")},OO={chainId:63,name:"classicMordor",_defaultProvider:hb("https://www.ethercluster.com/mordor","classicMordor")},my={unspecified:{chainId:0,name:"unspecified"},homestead:RO,mainnet:RO,morden:{chainId:2,name:"morden"},ropsten:kO,testnet:kO,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ya("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ya("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ya("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:ya("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:ya("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:hb("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:OO,classicTestnet:OO,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:hb("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ya("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:ya("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:ya("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Fue(r){if(r==null)return null;if(typeof r=="number"){for(const n in my){const i=my[n];if(i.chainId===r)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=my[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=my[r.name];if(!e)return typeof r.chainId!="number"&&TO.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&TO.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(Lue(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}function zV(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return Ar(e)}function qV(r){r=Ar(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}class jV{constructor(e){qr(this,"alphabet",e),qr(this,"base",e.length),qr(this,"_alphabetMap",{}),qr(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Ar(e);if(t.length===0)return"";let n=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return Ar(new Uint8Array(t.reverse()))}}new jV("abcdefghijklmnopqrstuvwxyz234567");const HI=new jV("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Uue="0x0000000000000000000000000000000000000000",zue=_t.from(0),que="0x0000000000000000000000000000000000000000000000000000000000000000";function jue(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var VV={exports:{}},li=VV.exports={},ic,sc;function WI(){throw new Error("setTimeout has not been defined")}function GI(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ic=setTimeout:ic=WI}catch{ic=WI}try{typeof clearTimeout=="function"?sc=clearTimeout:sc=GI}catch{sc=GI}})();function KV(r){if(ic===setTimeout)return setTimeout(r,0);if((ic===WI||!ic)&&setTimeout)return ic=setTimeout,setTimeout(r,0);try{return ic(r,0)}catch{try{return ic.call(null,r,0)}catch{return ic.call(this,r,0)}}}function Vue(r){if(sc===clearTimeout)return clearTimeout(r);if((sc===GI||!sc)&&clearTimeout)return sc=clearTimeout,clearTimeout(r);try{return sc(r)}catch{try{return sc.call(null,r)}catch{return sc.call(this,r)}}}var tl=[],Th=!1,Af,bv=-1;function Kue(){!Th||!Af||(Th=!1,Af.length?tl=Af.concat(tl):bv=-1,tl.length&&HV())}function HV(){if(!Th){var r=KV(Kue);Th=!0;for(var e=tl.length;e;){for(Af=tl,tl=[];++bv<e;)Af&&Af[bv].run();bv=-1,e=tl.length}Af=null,Th=!1,Vue(r)}}li.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];tl.push(new WV(r,e)),tl.length===1&&!Th&&KV(HV)};function WV(r,e){this.fun=r,this.array=e}WV.prototype.run=function(){this.fun.apply(null,this.array)};li.title="browser";li.browser=!0;li.env={};li.argv=[];li.version="";li.versions={};function Rl(){}li.on=Rl;li.addListener=Rl;li.once=Rl;li.off=Rl;li.removeListener=Rl;li.removeAllListeners=Rl;li.emit=Rl;li.prependListener=Rl;li.prependOnceListener=Rl;li.listeners=function(r){return[]};li.binding=function(r){throw new Error("process.binding is not supported")};li.cwd=function(){return"/"};li.chdir=function(r){throw new Error("process.chdir is not supported")};li.umask=function(){return 0};var Hue=VV.exports;const Yt=jue(Hue);var Px={exports:{}},PO;function Wue(){return PO||(PO=1,function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof Yt=="object"&&Yt.versions&&Yt.versions.node;o?i=Ii:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],d=[1,256,65536,16777216],h=[6,1536,393216,100663296],g=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],y=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});for(var _=function(k,j,te){return function(ae){return new O(k,j,k).update(ae)[te]()}},x=function(k,j,te){return function(ae,he){return new O(k,j,he).update(ae)[te]()}},E=function(k,j,te){return function(ae,he,re,q){return b["cshake"+k].update(ae,he,re,q)[te]()}},S=function(k,j,te){return function(ae,he,re,q){return b["kmac"+k].update(ae,he,re,q)[te]()}},T=function(k,j,te,ae){for(var he=0;he<v.length;++he){var re=v[he];k[re]=j(te,ae,re)}return k},C=function(k,j){var te=_(k,j,"hex");return te.create=function(){return new O(k,j,k)},te.update=function(ae){return te.create().update(ae)},T(te,_,k,j)},P=function(k,j){var te=x(k,j,"hex");return te.create=function(ae){return new O(k,j,ae)},te.update=function(ae,he){return te.create(he).update(ae)},T(te,x,k,j)},V=function(k,j){var te=w[k],ae=E(k,j,"hex");return ae.create=function(he,re,q){return!re&&!q?b["shake"+k].create(he):new O(k,j,he).bytepad([re,q],te)},ae.update=function(he,re,q,J){return ae.create(re,q,J).update(he)},T(ae,E,k,j)},L=function(k,j){var te=w[k],ae=S(k,j,"hex");return ae.create=function(he,re,q){return new R(k,j,re).bytepad(["KMAC",q],te).bytepad([he],te)},ae.update=function(he,re,q,J){return ae.create(he,q,J).update(re)},T(ae,S,k,j)},D=[{name:"keccak",padding:d,bits:m,createMethod:C},{name:"sha3",padding:h,bits:m,createMethod:C},{name:"shake",padding:u,bits:y,createMethod:P},{name:"cshake",padding:f,bits:y,createMethod:V},{name:"kmac",padding:f,bits:y,createMethod:L}],b={},I=[],B=0;B<D.length;++B)for(var F=D[B],z=F.bits,G=0;G<z.length;++G){var Q=F.name+"_"+z[G];if(I.push(Q),b[Q]=F.createMethod(z[G],F.padding),F.name!=="sha3"){var X=F.name+z[G];I.push(X),b[X]=b[Q]}}function O(k,j,te){this.blocks=[],this.s=[],this.padding=j,this.outputBits=te,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(k<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=te>>5,this.extraBytes=(te&31)>>3;for(var ae=0;ae<50;++ae)this.s[ae]=0}O.prototype.update=function(k){if(this.finalized)throw new Error(t);var j,te=typeof k;if(te!=="string"){if(te==="object"){if(k===null)throw new Error(e);if(c&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!c||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);j=!0}for(var ae=this.blocks,he=this.byteCount,re=k.length,q=this.blockCount,J=0,de=this.s,ue,we;J<re;){if(this.reset)for(this.reset=!1,ae[0]=this.block,ue=1;ue<q+1;++ue)ae[ue]=0;if(j)for(ue=this.start;J<re&&ue<he;++J)ae[ue>>2]|=k[J]<<g[ue++&3];else for(ue=this.start;J<re&&ue<he;++J)we=k.charCodeAt(J),we<128?ae[ue>>2]|=we<<g[ue++&3]:we<2048?(ae[ue>>2]|=(192|we>>6)<<g[ue++&3],ae[ue>>2]|=(128|we&63)<<g[ue++&3]):we<55296||we>=57344?(ae[ue>>2]|=(224|we>>12)<<g[ue++&3],ae[ue>>2]|=(128|we>>6&63)<<g[ue++&3],ae[ue>>2]|=(128|we&63)<<g[ue++&3]):(we=65536+((we&1023)<<10|k.charCodeAt(++J)&1023),ae[ue>>2]|=(240|we>>18)<<g[ue++&3],ae[ue>>2]|=(128|we>>12&63)<<g[ue++&3],ae[ue>>2]|=(128|we>>6&63)<<g[ue++&3],ae[ue>>2]|=(128|we&63)<<g[ue++&3]);if(this.lastByteIndex=ue,ue>=he){for(this.start=ue-he,this.block=ae[q],ue=0;ue<q;++ue)de[ue]^=ae[ue];M(de),this.reset=!0}else this.start=ue}return this},O.prototype.encode=function(k,j){var te=k&255,ae=1,he=[te];for(k=k>>8,te=k&255;te>0;)he.unshift(te),k=k>>8,te=k&255,++ae;return j?he.push(ae):he.unshift(ae),this.update(he),he.length},O.prototype.encodeString=function(k){var j,te=typeof k;if(te!=="string"){if(te==="object"){if(k===null)throw new Error(e);if(c&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!c||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);j=!0}var ae=0,he=k.length;if(j)ae=he;else for(var re=0;re<k.length;++re){var q=k.charCodeAt(re);q<128?ae+=1:q<2048?ae+=2:q<55296||q>=57344?ae+=3:(q=65536+((q&1023)<<10|k.charCodeAt(++re)&1023),ae+=4)}return ae+=this.encode(ae*8),this.update(k),ae},O.prototype.bytepad=function(k,j){for(var te=this.encode(j),ae=0;ae<k.length;++ae)te+=this.encodeString(k[ae]);var he=j-te%j,re=[];return re.length=he,this.update(re),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,j=this.lastByteIndex,te=this.blockCount,ae=this.s;if(k[j>>2]|=this.padding[j&3],this.lastByteIndex===this.byteCount)for(k[0]=k[te],j=1;j<te+1;++j)k[j]=0;for(k[te-1]|=2147483648,j=0;j<te;++j)ae[j]^=k[j];M(ae)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var k=this.blockCount,j=this.s,te=this.outputBlocks,ae=this.extraBytes,he=0,re=0,q="",J;re<te;){for(he=0;he<k&&re<te;++he,++re)J=j[he],q+=l[J>>4&15]+l[J&15]+l[J>>12&15]+l[J>>8&15]+l[J>>20&15]+l[J>>16&15]+l[J>>28&15]+l[J>>24&15];re%k===0&&(M(j),he=0)}return ae&&(J=j[he],q+=l[J>>4&15]+l[J&15],ae>1&&(q+=l[J>>12&15]+l[J>>8&15]),ae>2&&(q+=l[J>>20&15]+l[J>>16&15])),q},O.prototype.arrayBuffer=function(){this.finalize();var k=this.blockCount,j=this.s,te=this.outputBlocks,ae=this.extraBytes,he=0,re=0,q=this.outputBits>>3,J;ae?J=new ArrayBuffer(te+1<<2):J=new ArrayBuffer(q);for(var de=new Uint32Array(J);re<te;){for(he=0;he<k&&re<te;++he,++re)de[re]=j[he];re%k===0&&M(j)}return ae&&(de[he]=j[he],J=J.slice(0,q)),J},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var k=this.blockCount,j=this.s,te=this.outputBlocks,ae=this.extraBytes,he=0,re=0,q=[],J,de;re<te;){for(he=0;he<k&&re<te;++he,++re)J=re<<2,de=j[he],q[J]=de&255,q[J+1]=de>>8&255,q[J+2]=de>>16&255,q[J+3]=de>>24&255;re%k===0&&M(j)}return ae&&(J=re<<2,de=j[he],q[J]=de&255,ae>1&&(q[J+1]=de>>8&255),ae>2&&(q[J+2]=de>>16&255)),q};function R(k,j,te){O.call(this,k,j,te)}R.prototype=new O,R.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var M=function(k){var j,te,ae,he,re,q,J,de,ue,we,se,U,K,ie,ge,_e,Ce,Ne,xe,Ae,Me,oe,H,ee,W,N,$,ne,pe,be,fe,Ee,Fe,He,Ve,De,nt,vt,dt,Ct,Cr,or,fr,Ts,Xr,yr,ts,ce,me,ye,Y,ve,$e,ke,qe,tt,ut,it,cr,gt,Ft,jt,Ht;for(ae=0;ae<48;ae+=2)he=k[0]^k[10]^k[20]^k[30]^k[40],re=k[1]^k[11]^k[21]^k[31]^k[41],q=k[2]^k[12]^k[22]^k[32]^k[42],J=k[3]^k[13]^k[23]^k[33]^k[43],de=k[4]^k[14]^k[24]^k[34]^k[44],ue=k[5]^k[15]^k[25]^k[35]^k[45],we=k[6]^k[16]^k[26]^k[36]^k[46],se=k[7]^k[17]^k[27]^k[37]^k[47],U=k[8]^k[18]^k[28]^k[38]^k[48],K=k[9]^k[19]^k[29]^k[39]^k[49],j=U^(q<<1|J>>>31),te=K^(J<<1|q>>>31),k[0]^=j,k[1]^=te,k[10]^=j,k[11]^=te,k[20]^=j,k[21]^=te,k[30]^=j,k[31]^=te,k[40]^=j,k[41]^=te,j=he^(de<<1|ue>>>31),te=re^(ue<<1|de>>>31),k[2]^=j,k[3]^=te,k[12]^=j,k[13]^=te,k[22]^=j,k[23]^=te,k[32]^=j,k[33]^=te,k[42]^=j,k[43]^=te,j=q^(we<<1|se>>>31),te=J^(se<<1|we>>>31),k[4]^=j,k[5]^=te,k[14]^=j,k[15]^=te,k[24]^=j,k[25]^=te,k[34]^=j,k[35]^=te,k[44]^=j,k[45]^=te,j=de^(U<<1|K>>>31),te=ue^(K<<1|U>>>31),k[6]^=j,k[7]^=te,k[16]^=j,k[17]^=te,k[26]^=j,k[27]^=te,k[36]^=j,k[37]^=te,k[46]^=j,k[47]^=te,j=we^(he<<1|re>>>31),te=se^(re<<1|he>>>31),k[8]^=j,k[9]^=te,k[18]^=j,k[19]^=te,k[28]^=j,k[29]^=te,k[38]^=j,k[39]^=te,k[48]^=j,k[49]^=te,ie=k[0],ge=k[1],yr=k[11]<<4|k[10]>>>28,ts=k[10]<<4|k[11]>>>28,ne=k[20]<<3|k[21]>>>29,pe=k[21]<<3|k[20]>>>29,gt=k[31]<<9|k[30]>>>23,Ft=k[30]<<9|k[31]>>>23,or=k[40]<<18|k[41]>>>14,fr=k[41]<<18|k[40]>>>14,He=k[2]<<1|k[3]>>>31,Ve=k[3]<<1|k[2]>>>31,_e=k[13]<<12|k[12]>>>20,Ce=k[12]<<12|k[13]>>>20,ce=k[22]<<10|k[23]>>>22,me=k[23]<<10|k[22]>>>22,be=k[33]<<13|k[32]>>>19,fe=k[32]<<13|k[33]>>>19,jt=k[42]<<2|k[43]>>>30,Ht=k[43]<<2|k[42]>>>30,ke=k[5]<<30|k[4]>>>2,qe=k[4]<<30|k[5]>>>2,De=k[14]<<6|k[15]>>>26,nt=k[15]<<6|k[14]>>>26,Ne=k[25]<<11|k[24]>>>21,xe=k[24]<<11|k[25]>>>21,ye=k[34]<<15|k[35]>>>17,Y=k[35]<<15|k[34]>>>17,Ee=k[45]<<29|k[44]>>>3,Fe=k[44]<<29|k[45]>>>3,ee=k[6]<<28|k[7]>>>4,W=k[7]<<28|k[6]>>>4,tt=k[17]<<23|k[16]>>>9,ut=k[16]<<23|k[17]>>>9,vt=k[26]<<25|k[27]>>>7,dt=k[27]<<25|k[26]>>>7,Ae=k[36]<<21|k[37]>>>11,Me=k[37]<<21|k[36]>>>11,ve=k[47]<<24|k[46]>>>8,$e=k[46]<<24|k[47]>>>8,Ts=k[8]<<27|k[9]>>>5,Xr=k[9]<<27|k[8]>>>5,N=k[18]<<20|k[19]>>>12,$=k[19]<<20|k[18]>>>12,it=k[29]<<7|k[28]>>>25,cr=k[28]<<7|k[29]>>>25,Ct=k[38]<<8|k[39]>>>24,Cr=k[39]<<8|k[38]>>>24,oe=k[48]<<14|k[49]>>>18,H=k[49]<<14|k[48]>>>18,k[0]=ie^~_e&Ne,k[1]=ge^~Ce&xe,k[10]=ee^~N&ne,k[11]=W^~$&pe,k[20]=He^~De&vt,k[21]=Ve^~nt&dt,k[30]=Ts^~yr&ce,k[31]=Xr^~ts&me,k[40]=ke^~tt&it,k[41]=qe^~ut&cr,k[2]=_e^~Ne&Ae,k[3]=Ce^~xe&Me,k[12]=N^~ne&be,k[13]=$^~pe&fe,k[22]=De^~vt&Ct,k[23]=nt^~dt&Cr,k[32]=yr^~ce&ye,k[33]=ts^~me&Y,k[42]=tt^~it&gt,k[43]=ut^~cr&Ft,k[4]=Ne^~Ae&oe,k[5]=xe^~Me&H,k[14]=ne^~be&Ee,k[15]=pe^~fe&Fe,k[24]=vt^~Ct&or,k[25]=dt^~Cr&fr,k[34]=ce^~ye&ve,k[35]=me^~Y&$e,k[44]=it^~gt&jt,k[45]=cr^~Ft&Ht,k[6]=Ae^~oe&ie,k[7]=Me^~H&ge,k[16]=be^~Ee&ee,k[17]=fe^~Fe&W,k[26]=Ct^~or&He,k[27]=Cr^~fr&Ve,k[36]=ye^~ve&Ts,k[37]=Y^~$e&Xr,k[46]=gt^~jt&ke,k[47]=Ft^~Ht&qe,k[8]=oe^~ie&_e,k[9]=H^~ge&Ce,k[18]=Ee^~ee&N,k[19]=Fe^~W&$,k[28]=or^~He&De,k[29]=fr^~Ve&nt,k[38]=ve^~Ts&yr,k[39]=$e^~Xr&ts,k[48]=jt^~ke&tt,k[49]=Ht^~qe&ut,k[0]^=p[ae],k[1]^=p[ae+1]};if(a)r.exports=b;else for(B=0;B<I.length;++B)i[I[B]]=b[I[B]]})()}(Px)),Px.exports}var Gue=Wue();const Yue=zs(Gue);function Wi(r){return"0x"+Yue.keccak_256(Ar(r))}const Jue="strings/5.8.0",GV=new Ke(Jue);var Vg;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Vg||(Vg={}));var vo;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(vo||(vo={}));function Xue(r,e,t,n,i){return GV.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function YV(r,e,t,n,i){if(r===vo.BAD_PREFIX||r===vo.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r===vo.OVERRUN?t.length-e-1:0}function Zue(r,e,t,n,i){return r===vo.OVERLONG?(n.push(i),0):(n.push(65533),YV(r,e,t))}const Que=Object.freeze({error:Xue,ignore:YV,replace:Zue});function JV(r,e){e==null&&(e=Que.error),r=Ar(r);const t=[];let n=0;for(;n<r.length;){const i=r[n++];if(i>>7===0){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(vo.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(vo.BAD_PREFIX,n-1,r,t);continue}if(n-1+s>=r.length){n+=e(vo.OVERRUN,n-1,r,t);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let l=r[n];if((l&192)!=128){n+=e(vo.MISSING_CONTINUE,n,r,t),a=null;break}a=a<<6|l&63,n++}if(a!==null){if(a>1114111){n+=e(vo.OUT_OF_RANGE,n-1-s,r,t,a);continue}if(a>=55296&&a<=57343){n+=e(vo.UTF16_SURROGATE,n-1-s,r,t,a);continue}if(a<=o){n+=e(vo.OVERLONG,n-1-s,r,t,a);continue}t.push(a)}}return t}function vl(r,e=Vg.current){e!=Vg.current&&(GV.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return Ar(t)}function efe(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function V1(r,e){return efe(JV(r,e))}function tfe(r,e=Vg.current){return JV(vl(r,e))}function XV(r){return Wi(vl(r))}const ZV="hash/5.8.0";function QV(r,e){e==null&&(e=1);const t=[],n=t.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(r,e),t}function rfe(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function nfe(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let x=1;x<n;x++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[e++],c=8),l>>--c&1}const f=31,d=Math.pow(2,f),h=d>>>1,g=h>>1,p=d-1;let m=0;for(let x=0;x<f;x++)m=m<<1|u();let y=[],v=0,w=d;for(;;){let x=Math.floor(((m-v+1)*i-1)/w),E=0,S=n;for(;S-E>1;){let P=E+S>>>1;x<s[P]?S=P:E=P}if(E==0)break;y.push(E);let T=v+Math.floor(w*s[E]/i),C=v+Math.floor(w*s[E+1]/i)-1;for(;((T^C)&h)==0;)m=m<<1&p|u(),T=T<<1&p,C=C<<1&p|1;for(;T&~C&g;)m=m&h|m<<1&p>>>1|u(),T=T<<1^h,C=(C^h)<<1|h|1;v=T,w=1+C-T}let _=n-4;return y.map(x=>{switch(x-_){case 3:return _+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return _+256+(r[a++]<<8|r[a++]);case 1:return _+r[a++];default:return x-1}})}function ife(r){let e=0;return()=>r[e++]}function sfe(r){return ife(nfe(r))}function ofe(r){return r&1?~r>>1:r>>1}function afe(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function $O(r,e){let t=Array(r);for(let n=0,i=-1;n<r;n++)t[n]=i+=1+e();return t}function cfe(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=ofe(e());return t}function pb(r,e){let t=$O(r(),r),n=r(),i=$O(n,r),s=afe(n,r);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function lfe(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(ffe(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(dfe(t,r))}return rfe(QV(e))}function ufe(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function eK(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)cfe(r,t).forEach((s,o)=>n[o].push(s));return n}function ffe(r,e){let t=1+e(),n=e(),i=ufe(e),s=eK(i.length,1+r,e);return QV(s.map((o,a)=>{const c=o[0],l=o.slice(1);return Array(i[a]).fill(void 0).map((u,f)=>{let d=f*n;return[c+f*t,l.map(h=>h+d)]})}))}function dfe(r,e){let t=1+e();return eK(t,1+r,e).map(i=>[i[0],i.slice(1)])}function hfe(r){let e=pb(r).sort((n,i)=>n-i);return t();function t(){let n=[];for(;;){let l=pb(r,e);if(l.length==0)break;n.push({set:new Set(l),node:t()})}n.sort((l,u)=>u.set.size-l.set.size);let i=r(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function pfe(){return sfe(zV("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const K1=pfe(),gfe=new Set(pb(K1)),mfe=new Set(pb(K1)),yfe=lfe(K1),vfe=hfe(K1),DO=45,MO=95;function tK(r){return tfe(r)}function bfe(r){return r.filter(e=>e!=65039)}function rK(r){for(let e of r.split(".")){let t=tK(e);try{for(let n=t.lastIndexOf(MO)-1;n>=0;n--)if(t[n]!==MO)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===DO&&t[3]===DO)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function wfe(r){return rK(xfe(r,bfe))}function xfe(r,e){let t=tK(r).reverse(),n=[];for(;t.length;){let i=Sfe(t);if(i){n.push(...e(i));continue}let s=t.pop();if(gfe.has(s)){n.push(s);continue}if(mfe.has(s))continue;let o=yfe[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return rK(_fe(String.fromCodePoint(...n)))}function _fe(r){return r.normalize("NFC")}function Sfe(r,e){var t;let n=vfe,i,s,o=[],a=r.length;for(;a;){let c=r[--a];if(n=(t=n.branches.find(l=>l.set.has(c)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&r[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),r.length=a)}return i}const Efe=new Ke(ZV),nK=new Uint8Array(32);nK.fill(0);function BO(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function iK(r){const e=vl(wfe(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(BO(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(BO(e.slice(n))),t}function wv(r){typeof r!="string"&&Efe.throwArgumentError("invalid ENS name; not a string","name",r);let e=nK;const t=iK(r);for(;t.length;)e=Wi(Ef([e,Wi(t.pop())]));return Er(e)}function Afe(r){return Er(Ef(iK(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const Ife="rlp/5.8.0",oc=new Ke(Ife);function NO(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function LO(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function sK(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(sK(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=NO(n.length);return i.unshift(247+i.length),i.concat(n)}n4(r)||oc.throwArgumentError("RLP object must be BytesLike","object",r);const e=Array.prototype.slice.call(Ar(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=NO(e.length);return t.unshift(183+t.length),t.concat(e)}function H1(r){return Er(sK(r))}function FO(r,e,t,n){const i=[];for(;t<e+1+n;){const s=oK(r,t);i.push(s.result),t+=s.consumed,t>e+1+n&&oc.throwError("child data too short",Ke.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function oK(r,e){if(r.length===0&&oc.throwError("data too short",Ke.errors.BUFFER_OVERRUN,{}),r[e]>=248){const t=r[e]-247;e+1+t>r.length&&oc.throwError("data short segment too short",Ke.errors.BUFFER_OVERRUN,{});const n=LO(r,e+1,t);return e+1+t+n>r.length&&oc.throwError("data long segment too short",Ke.errors.BUFFER_OVERRUN,{}),FO(r,e,e+1+t,t+n)}else if(r[e]>=192){const t=r[e]-192;return e+1+t>r.length&&oc.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{}),FO(r,e,e+1,t)}else if(r[e]>=184){const t=r[e]-183;e+1+t>r.length&&oc.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{});const n=LO(r,e+1,t);e+1+t+n>r.length&&oc.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{});const i=Er(r.slice(e+1+t,e+1+t+n));return{consumed:1+t+n,result:i}}else if(r[e]>=128){const t=r[e]-128;e+1+t>r.length&&oc.throwError("data too short",Ke.errors.BUFFER_OVERRUN,{});const n=Er(r.slice(e+1,e+1+t));return{consumed:1+t,result:n}}return{consumed:1,result:Er(r[e])}}function a4(r){const e=Ar(r),t=oK(e,0);return t.consumed!==e.length&&oc.throwArgumentError("invalid rlp data","data",r),t.result}const Cfe="address/5.8.0",ph=new Ke(Cfe);function UO(r){mn(r,20)||ph.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=Ar(Wi(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Tfe=9007199254740991;function Rfe(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const c4={};for(let r=0;r<10;r++)c4[String(r)]=String(r);for(let r=0;r<26;r++)c4[String.fromCharCode(65+r)]=String(10+r);const zO=Math.floor(Rfe(Tfe));function kfe(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>c4[n]).join("");for(;e.length>=zO;){let n=e.substring(0,zO);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Da(r){let e=null;if(typeof r!="string"&&ph.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=UO(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&ph.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==kfe(r)&&ph.throwArgumentError("bad icap checksum","address",r),e=Oue(r.substring(4));e.length<40;)e="0"+e;e=UO("0x"+e)}else ph.throwArgumentError("invalid address","address",r);return e}function Ofe(r){let e=null;try{e=Da(r.from)}catch{ph.throwArgumentError("missing from address","transaction",r)}const t=Gh(Ar(_t.from(r.nonce).toHexString()));return Da(Os(Wi(H1([e,t])),12))}var Pfe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Dn=new Ke(ZV),aK=new Uint8Array(32);aK.fill(0);const $fe=_t.from(-1),cK=_t.from(0),lK=_t.from(1),Dfe=_t.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Mfe(r){const e=Ar(r),t=e.length%32;return t?Io([e,aK.slice(t)]):Er(e)}const Bfe=Hn(lK.toHexString(),32),Nfe=Hn(cK.toHexString(),32),qO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$x=["name","version","chainId","verifyingContract","salt"];function jO(r){return function(e){return typeof e!="string"&&Dn.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const Lfe={name:jO("name"),version:jO("version"),chainId:function(r){try{return _t.from(r).toString()}catch{}return Dn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return Da(r).toLowerCase()}catch{}return Dn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=Ar(r);if(e.length!==32)throw new Error("bad length");return Er(e)}catch{}return Dn.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function Dx(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Dn.throwArgumentError("invalid numeric width","type",r);const i=Dfe.mask(t?n-1:n),s=t?i.add(lK).mul($fe):cK;return function(o){const a=_t.from(o);return(a.lt(s)||a.gt(i))&&Dn.throwArgumentError(`value out-of-bounds for ${r}`,"value",o),Hn(a.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Dn.throwArgumentError("invalid bytes width","type",r),function(n){return Ar(n).length!==t&&Dn.throwArgumentError(`invalid length for ${r}`,"value",n),Mfe(n)}}}switch(r){case"address":return function(e){return Hn(Da(e),32)};case"bool":return function(e){return e?Bfe:Nfe};case"bytes":return function(e){return Wi(e)};case"string":return function(e){return XV(e)}}return null}function VO(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class go{constructor(e){qr(this,"types",Object.freeze(qg(e))),qr(this,"_encoderCache",{}),qr(this,"_types",{});const t={},n={},i={};Object.keys(e).forEach(a=>{t[a]={},n[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(l=>{c[l.name]&&Dn.throwArgumentError(`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",e),c[l.name]=!0;const u=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&Dn.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!Dx(u)&&(n[u]||Dn.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(a),t[a][u]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?Dn.throwArgumentError("missing primary type","types",e):s.length>1&&Dn.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),qr(this,"primaryType",s[0]);function o(a,c){c[a]&&Dn.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(t[a]).forEach(l=>{n[l]&&(o(l,c),Object.keys(c).forEach(u=>{i[u][l]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=VO(a,e[a])+c.map(l=>VO(l,e[l])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Dx(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Dn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(Wi)),Wi(Io(c))}}const n=this.types[e];if(n){const i=XV(this._types[e]);return s=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(s[a]);return this._types[c]?Wi(l):l});return o.unshift(i),Io(o)}}return Dn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Dn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Wi(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Dx(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Dn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(c=>this._visit(o,c,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],n),o),{}):Dn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new go(e)}static getPrimaryType(e){return go.from(e).primaryType}static hashStruct(e,t,n){return go.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const i=qO[n];i||Dn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>$x.indexOf(n.name)-$x.indexOf(i.name)),go.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return Io(["0x1901",go.hashDomain(e),go.from(t).hash(n)])}static hash(e,t,n){return Wi(go.encode(e,t,n))}static resolveNames(e,t,n,i){return Pfe(this,void 0,void 0,function*(){e=Zs(e);const s={};e.verifyingContract&&!mn(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=go.from(t);o.visit(n,(a,c)=>(a==="address"&&!mn(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,t,n){go.hashDomain(e);const i={},s=[];$x.forEach(c=>{const l=e[c];l!=null&&(i[c]=Lfe[c](l),s.push({name:c,type:qO[c]}))});const o=go.from(t),a=Zs(t);return a.EIP712Domain?Dn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return Er(Ar(l));if(c.match(/^u?int/))return _t.from(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return typeof l!="string"&&Dn.throwArgumentError("invalid string","value",l),l}return Dn.throwArgumentError("unsupported type","type",c)})}}}var Mx={},dn={},Bx,KO;function Rm(){if(KO)return Bx;KO=1,Bx=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,i){if(t!=n)throw new Error(i||"Assertion failed: "+t+" != "+n)},Bx}var yy={exports:{}},HO;function Ri(){return HO||(HO=1,typeof Object.create=="function"?yy.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:yy.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),yy.exports}var WO;function Tc(){if(WO)return dn;WO=1;var r=Rm(),e=Ri();dn.inherits=e;function t(L,D){return(L.charCodeAt(D)&64512)!==55296||D<0||D+1>=L.length?!1:(L.charCodeAt(D+1)&64512)===56320}function n(L,D){if(Array.isArray(L))return L.slice();if(!L)return[];var b=[];if(typeof L=="string")if(D){if(D==="hex")for(L=L.replace(/[^a-z0-9]+/ig,""),L.length%2!==0&&(L="0"+L),B=0;B<L.length;B+=2)b.push(parseInt(L[B]+L[B+1],16))}else for(var I=0,B=0;B<L.length;B++){var F=L.charCodeAt(B);F<128?b[I++]=F:F<2048?(b[I++]=F>>6|192,b[I++]=F&63|128):t(L,B)?(F=65536+((F&1023)<<10)+(L.charCodeAt(++B)&1023),b[I++]=F>>18|240,b[I++]=F>>12&63|128,b[I++]=F>>6&63|128,b[I++]=F&63|128):(b[I++]=F>>12|224,b[I++]=F>>6&63|128,b[I++]=F&63|128)}else for(B=0;B<L.length;B++)b[B]=L[B]|0;return b}dn.toArray=n;function i(L){for(var D="",b=0;b<L.length;b++)D+=a(L[b].toString(16));return D}dn.toHex=i;function s(L){var D=L>>>24|L>>>8&65280|L<<8&16711680|(L&255)<<24;return D>>>0}dn.htonl=s;function o(L,D){for(var b="",I=0;I<L.length;I++){var B=L[I];D==="little"&&(B=s(B)),b+=c(B.toString(16))}return b}dn.toHex32=o;function a(L){return L.length===1?"0"+L:L}dn.zero2=a;function c(L){return L.length===7?"0"+L:L.length===6?"00"+L:L.length===5?"000"+L:L.length===4?"0000"+L:L.length===3?"00000"+L:L.length===2?"000000"+L:L.length===1?"0000000"+L:L}dn.zero8=c;function l(L,D,b,I){var B=b-D;r(B%4===0);for(var F=new Array(B/4),z=0,G=D;z<F.length;z++,G+=4){var Q;I==="big"?Q=L[G]<<24|L[G+1]<<16|L[G+2]<<8|L[G+3]:Q=L[G+3]<<24|L[G+2]<<16|L[G+1]<<8|L[G],F[z]=Q>>>0}return F}dn.join32=l;function u(L,D){for(var b=new Array(L.length*4),I=0,B=0;I<L.length;I++,B+=4){var F=L[I];D==="big"?(b[B]=F>>>24,b[B+1]=F>>>16&255,b[B+2]=F>>>8&255,b[B+3]=F&255):(b[B+3]=F>>>24,b[B+2]=F>>>16&255,b[B+1]=F>>>8&255,b[B]=F&255)}return b}dn.split32=u;function f(L,D){return L>>>D|L<<32-D}dn.rotr32=f;function d(L,D){return L<<D|L>>>32-D}dn.rotl32=d;function h(L,D){return L+D>>>0}dn.sum32=h;function g(L,D,b){return L+D+b>>>0}dn.sum32_3=g;function p(L,D,b,I){return L+D+b+I>>>0}dn.sum32_4=p;function m(L,D,b,I,B){return L+D+b+I+B>>>0}dn.sum32_5=m;function y(L,D,b,I){var B=L[D],F=L[D+1],z=I+F>>>0,G=(z<I?1:0)+b+B;L[D]=G>>>0,L[D+1]=z}dn.sum64=y;function v(L,D,b,I){var B=D+I>>>0,F=(B<D?1:0)+L+b;return F>>>0}dn.sum64_hi=v;function w(L,D,b,I){var B=D+I;return B>>>0}dn.sum64_lo=w;function _(L,D,b,I,B,F,z,G){var Q=0,X=D;X=X+I>>>0,Q+=X<D?1:0,X=X+F>>>0,Q+=X<F?1:0,X=X+G>>>0,Q+=X<G?1:0;var O=L+b+B+z+Q;return O>>>0}dn.sum64_4_hi=_;function x(L,D,b,I,B,F,z,G){var Q=D+I+F+G;return Q>>>0}dn.sum64_4_lo=x;function E(L,D,b,I,B,F,z,G,Q,X){var O=0,R=D;R=R+I>>>0,O+=R<D?1:0,R=R+F>>>0,O+=R<F?1:0,R=R+G>>>0,O+=R<G?1:0,R=R+X>>>0,O+=R<X?1:0;var M=L+b+B+z+Q+O;return M>>>0}dn.sum64_5_hi=E;function S(L,D,b,I,B,F,z,G,Q,X){var O=D+I+F+G+X;return O>>>0}dn.sum64_5_lo=S;function T(L,D,b){var I=D<<32-b|L>>>b;return I>>>0}dn.rotr64_hi=T;function C(L,D,b){var I=L<<32-b|D>>>b;return I>>>0}dn.rotr64_lo=C;function P(L,D,b){return L>>>b}dn.shr64_hi=P;function V(L,D,b){var I=L<<32-b|D>>>b;return I>>>0}return dn.shr64_lo=V,dn}var Nx={},GO;function km(){if(GO)return Nx;GO=1;var r=Tc(),e=Rm();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Nx.BlockHash=t,t.prototype.update=function(i,s){if(i=r.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-o,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,a=new Array(o+this.padLength);a[0]=128;for(var c=1;c<o;c++)a[c]=0;if(i<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=i>>>24&255,a[c++]=i>>>16&255,a[c++]=i>>>8&255,a[c++]=i&255}else for(a[c++]=i&255,a[c++]=i>>>8&255,a[c++]=i>>>16&255,a[c++]=i>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,l=8;l<this.padLength;l++)a[c++]=0;return a},Nx}var Qu={},Ya={},YO;function uK(){if(YO)return Ya;YO=1;var r=Tc(),e=r.rotr32;function t(u,f,d,h){if(u===0)return n(f,d,h);if(u===1||u===3)return s(f,d,h);if(u===2)return i(f,d,h)}Ya.ft_1=t;function n(u,f,d){return u&f^~u&d}Ya.ch32=n;function i(u,f,d){return u&f^u&d^f&d}Ya.maj32=i;function s(u,f,d){return u^f^d}Ya.p32=s;function o(u){return e(u,2)^e(u,13)^e(u,22)}Ya.s0_256=o;function a(u){return e(u,6)^e(u,11)^e(u,25)}Ya.s1_256=a;function c(u){return e(u,7)^e(u,18)^u>>>3}Ya.g0_256=c;function l(u){return e(u,17)^e(u,19)^u>>>10}return Ya.g1_256=l,Ya}var Lx,JO;function Ffe(){if(JO)return Lx;JO=1;var r=Tc(),e=km(),t=uK(),n=r.rotl32,i=r.sum32,s=r.sum32_5,o=t.ft_1,a=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(l,a),Lx=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(f,d){for(var h=this.W,g=0;g<16;g++)h[g]=f[d+g];for(;g<h.length;g++)h[g]=n(h[g-3]^h[g-8]^h[g-14]^h[g-16],1);var p=this.h[0],m=this.h[1],y=this.h[2],v=this.h[3],w=this.h[4];for(g=0;g<h.length;g++){var _=~~(g/20),x=s(n(p,5),o(_,m,y,v),w,h[g],c[_]);w=v,v=y,y=n(m,30),m=p,p=x}this.h[0]=i(this.h[0],p),this.h[1]=i(this.h[1],m),this.h[2]=i(this.h[2],y),this.h[3]=i(this.h[3],v),this.h[4]=i(this.h[4],w)},l.prototype._digest=function(f){return f==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Lx}var Fx,XO;function fK(){if(XO)return Fx;XO=1;var r=Tc(),e=km(),t=uK(),n=Rm(),i=r.sum32,s=r.sum32_4,o=r.sum32_5,a=t.ch32,c=t.maj32,l=t.s0_256,u=t.s1_256,f=t.g0_256,d=t.g1_256,h=e.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}return r.inherits(p,h),Fx=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(y,v){for(var w=this.W,_=0;_<16;_++)w[_]=y[v+_];for(;_<w.length;_++)w[_]=s(d(w[_-2]),w[_-7],f(w[_-15]),w[_-16]);var x=this.h[0],E=this.h[1],S=this.h[2],T=this.h[3],C=this.h[4],P=this.h[5],V=this.h[6],L=this.h[7];for(n(this.k.length===w.length),_=0;_<w.length;_++){var D=o(L,u(C),a(C,P,V),this.k[_],w[_]),b=i(l(x),c(x,E,S));L=V,V=P,P=C,C=i(T,D),T=S,S=E,E=x,x=i(D,b)}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],E),this.h[2]=i(this.h[2],S),this.h[3]=i(this.h[3],T),this.h[4]=i(this.h[4],C),this.h[5]=i(this.h[5],P),this.h[6]=i(this.h[6],V),this.h[7]=i(this.h[7],L)},p.prototype._digest=function(y){return y==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},Fx}var Ux,ZO;function Ufe(){if(ZO)return Ux;ZO=1;var r=Tc(),e=fK();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),Ux=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},Ux}var zx,QO;function dK(){if(QO)return zx;QO=1;var r=Tc(),e=km(),t=Rm(),n=r.rotr64_hi,i=r.rotr64_lo,s=r.shr64_hi,o=r.shr64_lo,a=r.sum64,c=r.sum64_hi,l=r.sum64_lo,u=r.sum64_4_hi,f=r.sum64_4_lo,d=r.sum64_5_hi,h=r.sum64_5_lo,g=e.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}r.inherits(m,g),zx=m,m.blockSize=1024,m.outSize=512,m.hmacStrength=192,m.padLength=128,m.prototype._prepareBlock=function(b,I){for(var B=this.W,F=0;F<32;F++)B[F]=b[I+F];for(;F<B.length;F+=2){var z=V(B[F-4],B[F-3]),G=L(B[F-4],B[F-3]),Q=B[F-14],X=B[F-13],O=C(B[F-30],B[F-29]),R=P(B[F-30],B[F-29]),M=B[F-32],k=B[F-31];B[F]=u(z,G,Q,X,O,R,M,k),B[F+1]=f(z,G,Q,X,O,R,M,k)}},m.prototype._update=function(b,I){this._prepareBlock(b,I);var B=this.W,F=this.h[0],z=this.h[1],G=this.h[2],Q=this.h[3],X=this.h[4],O=this.h[5],R=this.h[6],M=this.h[7],k=this.h[8],j=this.h[9],te=this.h[10],ae=this.h[11],he=this.h[12],re=this.h[13],q=this.h[14],J=this.h[15];t(this.k.length===B.length);for(var de=0;de<B.length;de+=2){var ue=q,we=J,se=S(k,j),U=T(k,j),K=y(k,j,te,ae,he),ie=v(k,j,te,ae,he,re),ge=this.k[de],_e=this.k[de+1],Ce=B[de],Ne=B[de+1],xe=d(ue,we,se,U,K,ie,ge,_e,Ce,Ne),Ae=h(ue,we,se,U,K,ie,ge,_e,Ce,Ne);ue=x(F,z),we=E(F,z),se=w(F,z,G,Q,X),U=_(F,z,G,Q,X,O);var Me=c(ue,we,se,U),oe=l(ue,we,se,U);q=he,J=re,he=te,re=ae,te=k,ae=j,k=c(R,M,xe,Ae),j=l(M,M,xe,Ae),R=X,M=O,X=G,O=Q,G=F,Q=z,F=c(xe,Ae,Me,oe),z=l(xe,Ae,Me,oe)}a(this.h,0,F,z),a(this.h,2,G,Q),a(this.h,4,X,O),a(this.h,6,R,M),a(this.h,8,k,j),a(this.h,10,te,ae),a(this.h,12,he,re),a(this.h,14,q,J)},m.prototype._digest=function(b){return b==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function y(D,b,I,B,F){var z=D&I^~D&F;return z<0&&(z+=4294967296),z}function v(D,b,I,B,F,z){var G=b&B^~b&z;return G<0&&(G+=4294967296),G}function w(D,b,I,B,F){var z=D&I^D&F^I&F;return z<0&&(z+=4294967296),z}function _(D,b,I,B,F,z){var G=b&B^b&z^B&z;return G<0&&(G+=4294967296),G}function x(D,b){var I=n(D,b,28),B=n(b,D,2),F=n(b,D,7),z=I^B^F;return z<0&&(z+=4294967296),z}function E(D,b){var I=i(D,b,28),B=i(b,D,2),F=i(b,D,7),z=I^B^F;return z<0&&(z+=4294967296),z}function S(D,b){var I=n(D,b,14),B=n(D,b,18),F=n(b,D,9),z=I^B^F;return z<0&&(z+=4294967296),z}function T(D,b){var I=i(D,b,14),B=i(D,b,18),F=i(b,D,9),z=I^B^F;return z<0&&(z+=4294967296),z}function C(D,b){var I=n(D,b,1),B=n(D,b,8),F=s(D,b,7),z=I^B^F;return z<0&&(z+=4294967296),z}function P(D,b){var I=i(D,b,1),B=i(D,b,8),F=o(D,b,7),z=I^B^F;return z<0&&(z+=4294967296),z}function V(D,b){var I=n(D,b,19),B=n(b,D,29),F=s(D,b,6),z=I^B^F;return z<0&&(z+=4294967296),z}function L(D,b){var I=i(D,b,19),B=i(b,D,29),F=o(D,b,6),z=I^B^F;return z<0&&(z+=4294967296),z}return zx}var qx,eP;function zfe(){if(eP)return qx;eP=1;var r=Tc(),e=dK();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),qx=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},qx}var tP;function qfe(){return tP||(tP=1,Qu.sha1=Ffe(),Qu.sha224=Ufe(),Qu.sha256=fK(),Qu.sha384=zfe(),Qu.sha512=dK()),Qu}var jx={},rP;function jfe(){if(rP)return jx;rP=1;var r=Tc(),e=km(),t=r.rotl32,n=r.sum32,i=r.sum32_3,s=r.sum32_4,o=e.BlockHash;function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(a,o),jx.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(m,y){for(var v=this.h[0],w=this.h[1],_=this.h[2],x=this.h[3],E=this.h[4],S=v,T=w,C=_,P=x,V=E,L=0;L<80;L++){var D=n(t(s(v,c(L,w,_,x),m[f[L]+y],l(L)),h[L]),E);v=E,E=x,x=t(_,10),_=w,w=D,D=n(t(s(S,c(79-L,T,C,P),m[d[L]+y],u(L)),g[L]),V),S=V,V=P,P=t(C,10),C=T,T=D}D=i(this.h[1],_,P),this.h[1]=i(this.h[2],x,V),this.h[2]=i(this.h[3],E,S),this.h[3]=i(this.h[4],v,T),this.h[4]=i(this.h[0],w,C),this.h[0]=D},a.prototype._digest=function(m){return m==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function c(p,m,y,v){return p<=15?m^y^v:p<=31?m&y|~m&v:p<=47?(m|~y)^v:p<=63?m&v|y&~v:m^(y|~v)}function l(p){return p<=15?0:p<=31?1518500249:p<=47?1859775393:p<=63?2400959708:2840853838}function u(p){return p<=15?1352829926:p<=31?1548603684:p<=47?1836072691:p<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return jx}var Vx,nP;function Vfe(){if(nP)return Vx;nP=1;var r=Tc(),e=Rm();function t(n,i,s){if(!(this instanceof t))return new t(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,s))}return Vx=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,s){return this.inner.update(i,s),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},Vx}var iP;function Kfe(){return iP||(iP=1,function(r){var e=r;e.utils=Tc(),e.common=km(),e.sha=qfe(),e.ripemd=jfe(),e.hmac=Vfe(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Mx)),Mx}var Hfe=Kfe();const nc=zs(Hfe);function sP(r){return"0x"+nc.sha256().update(Ar(r)).digest("hex")}const Wfe="web/5.8.0";var Gfe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};function Yfe(r,e){return Gfe(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const n=yield fetch(r,t),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:Ar(new Uint8Array(i))}})}var Jfe=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const pa=new Ke(Wfe);function oP(r){return new Promise(e=>{setTimeout(e,r)})}function ql(r,e){if(r==null)return null;if(typeof r=="string")return r;if(n4(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return V1(r)}catch{}return Er(r)}return r}function Xfe(r){return vl(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function Zfe(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;pa.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof r=="object"?r.throttleCallback:null,s=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;pa.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof r=="object"?!!r.errorPassThrough:!1,a={};let c=null;const l={method:"GET"};let u=!1,f=2*60*1e3;if(typeof r=="string")c=r;else if(typeof r=="object"){if((r==null||r.url==null)&&pa.throwArgumentError("missing URL","connection.url",r),c=r.url,typeof r.timeout=="number"&&r.timeout>0&&(f=r.timeout),r.headers)for(const y in r.headers)a[y.toLowerCase()]={key:y,value:String(r.headers[y])},["if-none-match","if-modified-since"].indexOf(y.toLowerCase())>=0&&(u=!0);if(l.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){c.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&pa.throwError("basic authentication requires a secure https url",Ke.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:r.user,password:"[REDACTED]"});const y=r.user+":"+r.password;a.authorization={key:"Authorization",value:"Basic "+qV(vl(y))}}r.skipFetchSetup!=null&&(l.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(l.fetchOptions=Zs(r.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),h=c?c.match(d):null;if(h)try{const y={statusCode:200,statusMessage:"OK",headers:{"content-type":h[1]||"text/plain"},body:h[2]?zV(h[3]):Xfe(h[3])};let v=y.body;return t&&(v=t(y.body,y)),Promise.resolve(v)}catch(y){pa.throwError("processing response error",Ke.errors.SERVER_ERROR,{body:ql(h[1],h[2]),error:y,requestBody:null,requestMethod:"GET",url:c})}e&&(l.method="POST",l.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const g={};Object.keys(a).forEach(y=>{const v=a[y];g[v.key]=v.value}),l.headers=g;const p=function(){let y=null;return{promise:new Promise(function(_,x){f&&(y=setTimeout(()=>{y!=null&&(y=null,x(pa.makeError("timeout",Ke.errors.TIMEOUT,{requestBody:ql(l.body,g["content-type"]),requestMethod:l.method,timeout:f,url:c})))},f))}),cancel:function(){y!=null&&(clearTimeout(y),y=null)}}}(),m=function(){return Jfe(this,void 0,void 0,function*(){for(let y=0;y<n;y++){let v=null;try{if(v=yield Yfe(c,l),y<n){if(v.statusCode===301||v.statusCode===302){const _=v.headers.location||"";if(l.method==="GET"&&_.match(/^https:/)){c=v.headers.location;continue}}else if(v.statusCode===429){let _=!0;if(i&&(_=yield i(y,c)),_){let x=0;const E=v.headers["retry-after"];typeof E=="string"&&E.match(/^[1-9][0-9]*$/)?x=parseInt(E)*1e3:x=s*parseInt(String(Math.random()*Math.pow(2,y))),yield oP(x);continue}}}}catch(_){v=_.response,v==null&&(p.cancel(),pa.throwError("missing response",Ke.errors.SERVER_ERROR,{requestBody:ql(l.body,g["content-type"]),requestMethod:l.method,serverError:_,url:c}))}let w=v.body;if(u&&v.statusCode===304?w=null:!o&&(v.statusCode<200||v.statusCode>=300)&&(p.cancel(),pa.throwError("bad response",Ke.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:ql(w,v.headers?v.headers["content-type"]:null),requestBody:ql(l.body,g["content-type"]),requestMethod:l.method,url:c})),t)try{const _=yield t(w,v);return p.cancel(),_}catch(_){if(_.throttleRetry&&y<n){let x=!0;if(i&&(x=yield i(y,c)),x){const E=s*parseInt(String(Math.random()*Math.pow(2,y)));yield oP(E);continue}}p.cancel(),pa.throwError("processing response error",Ke.errors.SERVER_ERROR,{body:ql(w,v.headers?v.headers["content-type"]:null),error:_,requestBody:ql(l.body,g["content-type"]),requestMethod:l.method,url:c})}return p.cancel(),w}return pa.throwError("failed response",Ke.errors.SERVER_ERROR,{requestBody:ql(l.body,g["content-type"]),requestMethod:l.method,url:c})})}();return Promise.race([p.promise,m])}function l4(r,e,t){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(V1(s))}catch(c){pa.throwError("invalid JSON",Ke.errors.SERVER_ERROR,{body:s,error:c})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=vl(e);const s=typeof r=="string"?{url:r}:Zs(r);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Zs(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},r=s}return Zfe(r,i,n)}function j0(r,e){return e||(e={}),e=Zs(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function l(){return r().then(function(u){if(u!==void 0)o()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",l);else if(e.onceBlock)e.onceBlock.once("block",l);else if(!s){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(l,f)}return null},function(u){o()&&n(u)})}l()})}var Kx,aP;function Qfe(){if(aP)return Kx;aP=1;for(var r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},t=0;t<r.length;t++){var n=r.charAt(t);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=t}function i(p){var m=p>>25;return(p&33554431)<<5^-(m>>0&1)&996825010^-(m>>1&1)&642813549^-(m>>2&1)&513874426^-(m>>3&1)&1027748829^-(m>>4&1)&705979059}function s(p){for(var m=1,y=0;y<p.length;++y){var v=p.charCodeAt(y);if(v<33||v>126)return"Invalid prefix ("+p+")";m=i(m)^v>>5}for(m=i(m),y=0;y<p.length;++y){var w=p.charCodeAt(y);m=i(m)^w&31}return m}function o(p,m,y){if(y=y||90,p.length+7+m.length>y)throw new TypeError("Exceeds length limit");p=p.toLowerCase();var v=s(p);if(typeof v=="string")throw new Error(v);for(var w=p+"1",_=0;_<m.length;++_){var x=m[_];if(x>>5!==0)throw new Error("Non 5-bit word");v=i(v)^x,w+=r.charAt(x)}for(_=0;_<6;++_)v=i(v);for(v^=1,_=0;_<6;++_){var E=v>>(5-_)*5&31;w+=r.charAt(E)}return w}function a(p,m){if(m=m||90,p.length<8)return p+" too short";if(p.length>m)return"Exceeds length limit";var y=p.toLowerCase(),v=p.toUpperCase();if(p!==y&&p!==v)return"Mixed-case string "+p;p=y;var w=p.lastIndexOf("1");if(w===-1)return"No separator character for "+p;if(w===0)return"Missing prefix for "+p;var _=p.slice(0,w),x=p.slice(w+1);if(x.length<6)return"Data too short";var E=s(_);if(typeof E=="string")return E;for(var S=[],T=0;T<x.length;++T){var C=x.charAt(T),P=e[C];if(P===void 0)return"Unknown character "+C;E=i(E)^P,!(T+6>=x.length)&&S.push(P)}return E!==1?"Invalid checksum for "+p:{prefix:_,words:S}}function c(){var p=a.apply(null,arguments);if(typeof p=="object")return p}function l(p){var m=a.apply(null,arguments);if(typeof m=="object")return m;throw new Error(m)}function u(p,m,y,v){for(var w=0,_=0,x=(1<<y)-1,E=[],S=0;S<p.length;++S)for(w=w<<m|p[S],_+=m;_>=y;)_-=y,E.push(w>>_&x);if(v)_>0&&E.push(w<<y-_&x);else{if(_>=m)return"Excess padding";if(w<<y-_&x)return"Non-zero padding"}return E}function f(p){var m=u(p,8,5,!0);if(Array.isArray(m))return m}function d(p){var m=u(p,8,5,!0);if(Array.isArray(m))return m;throw new Error(m)}function h(p){var m=u(p,5,8,!1);if(Array.isArray(m))return m}function g(p){var m=u(p,5,8,!1);if(Array.isArray(m))return m;throw new Error(m)}return Kx={decodeUnsafe:c,decode:l,encode:o,toWordsUnsafe:f,toWords:d,fromWordsUnsafe:h,fromWords:g},Kx}var ede=Qfe();const cP=zs(ede),W1="providers/5.8.0",Sa=globalThis||void 0||self;function Ip(r,e,t){return t={path:e,exports:{},require:function(n,i){return tde(n,i??t.path)}},r(t,t.exports),t.exports}function tde(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var u4=hK;function hK(r,e){if(!r)throw new Error(e||"Assertion failed")}hK.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Ea=Ip(function(r,e){var t=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)c[l]=o[l]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)c.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var u=o.charCodeAt(l),f=u>>8,d=u&255;f?c.push(f,d):c.push(d)}return c}t.toArray=n;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}t.toHex=s,t.encode=function(a,c){return c==="hex"?s(a):a}}),Bo=Ip(function(r,e){var t=e;t.assert=u4,t.toArray=Ea.toArray,t.zero2=Ea.zero2,t.toHex=Ea.toHex,t.encode=Ea.encode;function n(c,l,u){var f=new Array(Math.max(c.bitLength(),u)+1),d;for(d=0;d<f.length;d+=1)f[d]=0;var h=1<<l+1,g=c.clone();for(d=0;d<f.length;d++){var p,m=g.andln(h-1);g.isOdd()?(m>(h>>1)-1?p=(h>>1)-m:p=m,g.isubn(p)):p=0,f[d]=p,g.iushrn(1)}return f}t.getNAF=n;function i(c,l){var u=[[],[]];c=c.clone(),l=l.clone();for(var f=0,d=0,h;c.cmpn(-f)>0||l.cmpn(-d)>0;){var g=c.andln(3)+f&3,p=l.andln(3)+d&3;g===3&&(g=-1),p===3&&(p=-1);var m;(g&1)===0?m=0:(h=c.andln(7)+f&7,(h===3||h===5)&&p===2?m=-g:m=g),u[0].push(m);var y;(p&1)===0?y=0:(h=l.andln(7)+d&7,(h===3||h===5)&&g===2?y=-p:y=p),u[1].push(y),2*f===m+1&&(f=1-f),2*d===y+1&&(d=1-d),c.iushrn(1),l.iushrn(1)}return u}t.getJSF=i;function s(c,l,u){var f="_"+l;c.prototype[l]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}t.cachedProperty=s;function o(c){return typeof c=="string"?t.toArray(c,"hex"):c}t.parseBytes=o;function a(c){return new sr(c,"hex","le")}t.intFromLE=a}),gb=Bo.getNAF,rde=Bo.getJSF,mb=Bo.assert;function Hu(r,e){this.type=r,this.p=new sr(e.p,16),this.red=e.prime?sr.red(e.prime):sr.mont(this.p),this.zero=new sr(0).toRed(this.red),this.one=new sr(1).toRed(this.red),this.two=new sr(2).toRed(this.red),this.n=e.n&&new sr(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var md=Hu;Hu.prototype.point=function(){throw new Error("Not implemented")};Hu.prototype.validate=function(){throw new Error("Not implemented")};Hu.prototype._fixedNafMul=function(e,t){mb(e.precomputed);var n=e._getDoubles(),i=gb(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?f=f.mixedAdd(n.points[a]):c===-d&&(f=f.mixedAdd(n.points[a].neg()));u=u.add(f)}return u.toP()};Hu.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=gb(t,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];mb(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Hu.prototype._wnafMulAdd=function(e,t,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,f,d;for(u=0;u<i;u++){d=t[u];var h=d._getNAFPoints(e);o[u]=h.wnd,a[u]=h.points}for(u=i-1;u>=1;u-=2){var g=u-1,p=u;if(o[g]!==1||o[p]!==1){c[g]=gb(n[g],o[g],this._bitLength),c[p]=gb(n[p],o[p],this._bitLength),l=Math.max(c[g].length,l),l=Math.max(c[p].length,l);continue}var m=[t[g],null,null,t[p]];t[g].y.cmp(t[p].y)===0?(m[1]=t[g].add(t[p]),m[2]=t[g].toJ().mixedAdd(t[p].neg())):t[g].y.cmp(t[p].y.redNeg())===0?(m[1]=t[g].toJ().mixedAdd(t[p]),m[2]=t[g].add(t[p].neg())):(m[1]=t[g].toJ().mixedAdd(t[p]),m[2]=t[g].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],v=rde(n[g],n[p]);for(l=Math.max(v[0].length,l),c[g]=new Array(l),c[p]=new Array(l),f=0;f<l;f++){var w=v[0][f]|0,_=v[1][f]|0;c[g][f]=y[(w+1)*3+(_+1)],c[p][f]=0,a[g]=m}}var x=this.jpoint(null,null,null),E=this._wnafT4;for(u=l;u>=0;u--){for(var S=0;u>=0;){var T=!0;for(f=0;f<i;f++)E[f]=c[f][u]|0,E[f]!==0&&(T=!1);if(!T)break;S++,u--}if(u>=0&&S++,x=x.dblp(S),u<0)break;for(f=0;f<i;f++){var C=E[f];C!==0&&(C>0?d=a[f][C-1>>1]:C<0&&(d=a[f][-C-1>>1].neg()),d.type==="affine"?x=x.mixedAdd(d):x=x.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?x:x.toP()};function ca(r,e){this.curve=r,this.type=e,this.precomputed=null}Hu.BasePoint=ca;ca.prototype.eq=function(){throw new Error("Not implemented")};ca.prototype.validate=function(){return this.curve.validate(this)};Hu.prototype.decodePoint=function(e,t){e=Bo.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?mb(e[e.length-1]%2===0):e[0]===7&&mb(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ca.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ca.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};ca.prototype.encode=function(e,t){return Bo.encode(this._encode(t),e)};ca.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};ca.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};ca.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};ca.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};ca.prototype._getBeta=function(){return null};ca.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var f4=Ip(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),nde=Bo.assert;function la(r){md.call(this,"short",r),this.a=new sr(r.a,16).toRed(this.red),this.b=new sr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}f4(la,md);var ide=la;la.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new sr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new sr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],nde(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new sr(a.a,16),b:new sr(a.b,16)}}):o=this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}};la.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:sr.mont(e),n=new sr(2).toRed(t).redInvm(),i=n.redNeg(),s=new sr(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};la.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new sr(1),o=new sr(0),a=new sr(0),c=new sr(1),l,u,f,d,h,g,p,m=0,y,v;n.cmpn(0)!==0;){var w=i.div(n);y=i.sub(w.mul(n)),v=a.sub(w.mul(s));var _=c.sub(w.mul(o));if(!f&&y.cmp(t)<0)l=p.neg(),u=s,f=y.neg(),d=v;else if(f&&++m===2)break;p=y,i=n,n=y,a=s,s=v,c=o,o=_}h=y.neg(),g=v;var x=f.sqr().add(d.sqr()),E=h.sqr().add(g.sqr());return E.cmp(x)>=0&&(h=l,g=u),f.negative&&(f=f.neg(),d=d.neg()),h.negative&&(h=h.neg(),g=g.neg()),[{a:f,b:d},{a:h,b:g}]};la.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),u=o.mul(i.b),f=e.sub(a).sub(c),d=l.add(u).neg();return{k1:f,k2:d}};la.prototype.pointFromX=function(e,t){e=new sr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};la.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};la.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),f=0;f<o*2;f++)i[f]=null,s[f]=null;return u};function ki(r,e,t,n){md.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new sr(e,16),this.y=new sr(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}f4(ki,md.BasePoint);la.prototype.point=function(e,t,n){return new ki(this,e,t,n)};la.prototype.pointFromJSON=function(e,t){return ki.fromJSON(this,e,t)};ki.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};ki.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ki.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ki.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ki.prototype.isInfinity=function(){return this.inf};ki.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ki.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ki.prototype.getX=function(){return this.x.fromRed()};ki.prototype.getY=function(){return this.y.fromRed()};ki.prototype.mul=function(e){return e=new sr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};ki.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ki.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ki.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};ki.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};ki.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function es(r,e,t,n){md.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new sr(0)):(this.x=new sr(e,16),this.y=new sr(t,16),this.z=new sr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}f4(es,md.BasePoint);la.prototype.jpoint=function(e,t,n){return new es(this,e,t,n)};es.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};es.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};es.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),f=u.redMul(c),d=i.redMul(u),h=l.redSqr().redIAdd(f).redISub(d).redISub(d),g=l.redMul(d.redISub(h)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(h,g,p)};es.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),f=n.redMul(l),d=c.redSqr().redIAdd(u).redISub(f).redISub(f),h=c.redMul(f.redISub(d)).redISub(s.redMul(u)),g=this.z.redMul(a);return this.curve.jpoint(d,h,g)};es.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),d=u.redSqr(),h=d.redSqr(),g=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(l)),p=o.redMul(d),m=g.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),v=g.redMul(y);v=v.redIAdd(v).redISub(h);var w=u.redMul(c);t+1<e&&(l=l.redMul(h)),o=m,c=w,u=v}return this.curve.jpoint(o,u.redMul(s),c)};es.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};es.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),g=this.x.redAdd(d).redSqr().redISub(f).redISub(h);g=g.redIAdd(g);var p=f.redAdd(f).redIAdd(f),m=p.redSqr(),y=h.redIAdd(h);y=y.redIAdd(y),y=y.redIAdd(y),e=m.redISub(g).redISub(g),t=p.redMul(g.redISub(e)).redISub(y),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};es.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var p=h.redIAdd(h);p=p.redIAdd(p);var m=p.redAdd(p);e=g.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var y=d.redSqr();y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y),t=g.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,n)};es.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var u=l.redMul(a),f=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),h=a.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=c.redMul(d).redISub(h),p=n.redAdd(n).redMul(i);return this.curve.jpoint(f,g,p)};es.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),f=t.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(c).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,h,g)};es.prototype.mul=function(e,t){return e=new sr(e,t),this.curve._wnafMul(this,e)};es.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};es.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};es.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};es.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var xv=Ip(function(r,e){var t=e;t.base=md,t.short=ide,t.mont=null,t.edwards=null}),_v=Ip(function(r,e){var t=e,n=Bo.assert;function i(a){a.type==="short"?this.curve=new xv.short(a):a.type==="edwards"?this.curve=new xv.edwards(a):this.curve=new xv.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,c){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var l=new i(c);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:nc.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:nc.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:nc.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:nc.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:nc.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:nc.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:nc.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:nc.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Mu(r){if(!(this instanceof Mu))return new Mu(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ea.toArray(r.entropy,r.entropyEnc||"hex"),t=Ea.toArray(r.nonce,r.nonceEnc||"hex"),n=Ea.toArray(r.pers,r.persEnc||"hex");u4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var pK=Mu;Mu.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Mu.prototype._hmac=function(){return new nc.hmac(this.hash,this.K)};Mu.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Mu.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=Ea.toArray(e,t),n=Ea.toArray(n,i),u4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Mu.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=Ea.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Ea.encode(o,t)};var YI=Bo.assert;function _s(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var d4=_s;_s.fromPublic=function(e,t,n){return t instanceof _s?t:new _s(e,{pub:t,pubEnc:n})};_s.fromPrivate=function(e,t,n){return t instanceof _s?t:new _s(e,{priv:t,privEnc:n})};_s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};_s.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};_s.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};_s.prototype._importPrivate=function(e,t){this.priv=new sr(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};_s.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?YI(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&YI(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};_s.prototype.derive=function(e){return e.validate()||YI(e.validate(),"public point not validated"),e.mul(this.priv).getX()};_s.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};_s.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};_s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var sde=Bo.assert;function G1(r,e){if(r instanceof G1)return r;this._importDER(r,e)||(sde(r.r&&r.s,"Signature without r or s"),this.r=new sr(r.r,16),this.s=new sr(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Y1=G1;function ode(){this.place=0}function Hx(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=r[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function lP(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}G1.prototype._importDER=function(e,t){e=Bo.toArray(e,t);var n=new ode;if(e[n.place++]!==48)return!1;var i=Hx(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Hx(e,n);if(s===!1||(e[n.place]&128)!==0)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Hx(e,n);if(a===!1||e.length!==a+n.place||(e[n.place]&128)!==0)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new sr(o),this.s=new sr(c),this.recoveryParam=null,!0};function Wx(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}G1.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=lP(t),n=lP(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Wx(i,t.length),i=i.concat(t),i.push(2),Wx(i,n.length);var s=i.concat(n),o=[48];return Wx(o,s.length),o=o.concat(s),Bo.encode(o,e)};var ade=function(){throw new Error("unsupported")},yf=Bo.assert;function oa(r){if(!(this instanceof oa))return new oa(r);typeof r=="string"&&(yf(Object.prototype.hasOwnProperty.call(_v,r),"Unknown curve "+r),r=_v[r]),r instanceof _v.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var cde=oa;oa.prototype.keyPair=function(e){return new d4(this,e)};oa.prototype.keyFromPrivate=function(e,t){return d4.fromPrivate(this,e,t)};oa.prototype.keyFromPublic=function(e,t){return d4.fromPublic(this,e,t)};oa.prototype.genKeyPair=function(e){e||(e={});for(var t=new pK({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||ade(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new sr(2));;){var s=new sr(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};oa.prototype._truncateToN=function(e,t,n){var i;if(sr.isBN(e)||typeof e=="number")e=new sr(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new sr(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new sr(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};oa.prototype.sign=function(e,t,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!sr.isBN(e)){yf(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),yf(e.length>>>0===e.length);for(var s=0;s<e.length;s++)yf((e[s]&255)===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,i.msgBitLength),yf(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),c=e.toArray("be",o);yf(new sr(c).eq(e),"Can not sign message");for(var l=new pK({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new sr(1)),f=0;;f++){var d=i.k?i.k(f):new sr(l.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var g=h.getX(),p=g.umod(this.n);if(p.cmpn(0)!==0){var m=d.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var y=(h.getY().isOdd()?1:0)|(g.cmp(p)!==0?2:0);return i.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),y^=1),new Y1({r:p,s:m,recoveryParam:y})}}}}}};oa.prototype.verify=function(e,t,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),t=new Y1(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(l,n.getPublic(),u),f.isInfinity()?!1:f.eqXToP(o)):(f=this.g.mulAdd(l,n.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(o)===0)};oa.prototype.recoverPubKey=function(r,e,t,n){yf((3&t)===t,"The recovery param is more than two bits"),e=new Y1(e,n);var i=this.n,s=new sr(r),o=e.r,a=e.s,c=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),f=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(f,o,d)};oa.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Y1(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var lde=Ip(function(r,e){var t=e;t.version="6.6.1",t.utils=Bo,t.rand=function(){throw new Error("unsupported")},t.curve=xv,t.curves=_v,t.ec=cde,t.eddsa=null}),ude=lde.ec;const fde="signing-key/5.8.0",JI=new Ke(fde);let Gx=null;function eu(){return Gx||(Gx=new ude("secp256k1")),Gx}class dde{constructor(e){qr(this,"curve","secp256k1"),qr(this,"privateKey",Er(e)),Hf(this.privateKey)!==32&&JI.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=eu().keyFromPrivate(Ar(this.privateKey));qr(this,"publicKey","0x"+t.getPublic(!1,"hex")),qr(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),qr(this,"_isSigningKey",!0)}_addPoint(e){const t=eu().keyFromPublic(Ar(this.publicKey)),n=eu().keyFromPublic(Ar(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=eu().keyFromPrivate(Ar(this.privateKey)),n=Ar(e);n.length!==32&&JI.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return j1({recoveryParam:i.recoveryParam,r:Hn("0x"+i.r.toString(16),32),s:Hn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=eu().keyFromPrivate(Ar(this.privateKey)),n=eu().keyFromPublic(Ar(gK(e)));return Hn("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function hde(r,e){const t=j1(e),n={r:Ar(t.r),s:Ar(t.s)};return"0x"+eu().recoverPubKey(Ar(r),n,t.recoveryParam).encode("hex",!1)}function gK(r,e){const t=Ar(r);return t.length===32?new dde(t).publicKey:t.length===33?"0x"+eu().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?Er(t):JI.throwArgumentError("invalid public or private key","key","[REDACTED]")}const pde="transactions/5.8.0",kl=new Ke(pde);var uP;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(uP||(uP={}));function h4(r){return r==="0x"?null:Da(r)}function gs(r){return r==="0x"?zue:_t.from(r)}function gde(r){const e=gK(r);return Da(Os(Wi(Os(e,1)),12))}function mK(r,e){return gde(hde(Ar(r),e))}function bo(r,e){const t=Gh(_t.from(r).toHexString());return t.length>32&&kl.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function Yx(r,e){return{address:Da(r),storageKeys:(e||[]).map((t,n)=>(Hf(t)!==32&&kl.throwArgumentError("invalid access list storageKey",`accessList[${r}:${n}]`,t),t.toLowerCase()))}}function Om(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(t.length>2&&kl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,t),Yx(t[0],t[1])):Yx(t.address,t.storageKeys));const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return Yx(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function yK(r){return Om(r).map(e=>[e.address,e.storageKeys])}function mde(r,e){if(r.gasPrice!=null){const n=_t.from(r.gasPrice),i=_t.from(r.maxFeePerGas||0);n.eq(i)||kl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const t=[bo(r.chainId||0,"chainId"),bo(r.nonce||0,"nonce"),bo(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),bo(r.maxFeePerGas||0,"maxFeePerGas"),bo(r.gasLimit||0,"gasLimit"),r.to!=null?Da(r.to):"0x",bo(r.value||0,"value"),r.data||"0x",yK(r.accessList||[])];if(e){const n=j1(e);t.push(bo(n.recoveryParam,"recoveryParam")),t.push(Gh(n.r)),t.push(Gh(n.s))}return Io(["0x02",H1(t)])}function yde(r,e){const t=[bo(r.chainId||0,"chainId"),bo(r.nonce||0,"nonce"),bo(r.gasPrice||0,"gasPrice"),bo(r.gasLimit||0,"gasLimit"),r.to!=null?Da(r.to):"0x",bo(r.value||0,"value"),r.data||"0x",yK(r.accessList||[])];if(e){const n=j1(e);t.push(bo(n.recoveryParam,"recoveryParam")),t.push(Gh(n.r)),t.push(Gh(n.s))}return Io(["0x01",H1(t)])}function vK(r,e,t){try{const n=gs(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");r.v=n}catch{kl.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=Hn(e[1],32),r.s=Hn(e[2],32);try{const n=Wi(t(r));r.from=mK(n,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function vde(r){const e=a4(r.slice(1));e.length!==9&&e.length!==12&&kl.throwArgumentError("invalid component count for transaction type: 2","payload",Er(r));const t=gs(e[2]),n=gs(e[3]),i={type:2,chainId:gs(e[0]).toNumber(),nonce:gs(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:gs(e[4]),to:h4(e[5]),value:gs(e[6]),data:e[7],accessList:Om(e[8])};return e.length===9||(i.hash=Wi(r),vK(i,e.slice(9),mde)),i}function bde(r){const e=a4(r.slice(1));e.length!==8&&e.length!==11&&kl.throwArgumentError("invalid component count for transaction type: 1","payload",Er(r));const t={type:1,chainId:gs(e[0]).toNumber(),nonce:gs(e[1]).toNumber(),gasPrice:gs(e[2]),gasLimit:gs(e[3]),to:h4(e[4]),value:gs(e[5]),data:e[6],accessList:Om(e[7])};return e.length===8||(t.hash=Wi(r),vK(t,e.slice(8),yde)),t}function wde(r){const e=a4(r);e.length!==9&&e.length!==6&&kl.throwArgumentError("invalid raw transaction","rawTransaction",r);const t={nonce:gs(e[0]).toNumber(),gasPrice:gs(e[1]),gasLimit:gs(e[2]),to:h4(e[3]),value:gs(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=_t.from(e[6]).toNumber()}catch{return t}if(t.r=Hn(e[7],32),t.s=Hn(e[8],32),_t.from(t.r).isZero()&&_t.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let n=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(Er(t.chainId)),i.push("0x"),i.push("0x"),n-=t.chainId*2+8);const s=Wi(H1(i));try{t.from=mK(s,{r:Er(t.r),s:Er(t.s),recoveryParam:n})}catch{}t.hash=Wi(r)}return t.type=null,t}function xde(r){const e=Ar(r);if(e[0]>127)return wde(e);switch(e[0]){case 1:return bde(e);case 2:return vde(e)}return kl.throwError(`unsupported transaction type: ${e[0]}`,Ke.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Xp=new Ke(W1);class Bt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),l=this.type.bind(this),u=f=>this.data(f,!0);return e.transaction={hash:o,type:l,accessList:Bt.allowNull(this.accessList.bind(this),null),blockHash:Bt.allowNull(o,null),blockNumber:Bt.allowNull(c,null),transactionIndex:Bt.allowNull(c,null),confirmations:Bt.allowNull(c,null),from:t,gasPrice:Bt.allowNull(n),maxPriorityFeePerGas:Bt.allowNull(n),maxFeePerGas:Bt.allowNull(n),gasLimit:n,to:Bt.allowNull(t,null),value:n,nonce:c,data:s,r:Bt.allowNull(this.uint256),s:Bt.allowNull(this.uint256),v:Bt.allowNull(c),creates:Bt.allowNull(t,null),raw:Bt.allowNull(s)},e.transactionRequest={from:Bt.allowNull(t),nonce:Bt.allowNull(c),gasLimit:Bt.allowNull(n),gasPrice:Bt.allowNull(n),maxPriorityFeePerGas:Bt.allowNull(n),maxFeePerGas:Bt.allowNull(n),to:Bt.allowNull(t),value:Bt.allowNull(n),data:Bt.allowNull(u),type:Bt.allowNull(c),accessList:Bt.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:t,topics:Bt.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:Bt.allowNull(this.address,null),from:Bt.allowNull(this.address,null),contractAddress:Bt.allowNull(t,null),transactionIndex:c,root:Bt.allowNull(a),gasUsed:n,logsBloom:Bt.allowNull(s),blockHash:o,transactionHash:o,logs:Bt.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:Bt.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:Bt.allowNull(n),status:Bt.allowNull(c),type:l},e.block={hash:Bt.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:Bt.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Bt.allowNull(t),extraData:s,transactions:Bt.allowNull(Bt.arrayOf(o)),baseFeePerGas:Bt.allowNull(n)},e.blockWithTransactions=Zs(e.block),e.blockWithTransactions.transactions=Bt.allowNull(Bt.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Bt.allowNull(i,void 0),toBlock:Bt.allowNull(i,void 0),blockHash:Bt.allowNull(o,void 0),address:Bt.allowNull(t,void 0),topics:Bt.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Bt.allowNull(c),blockHash:Bt.allowNull(o),transactionIndex:c,removed:Bt.allowNull(this.boolean.bind(this)),address:t,data:Bt.allowFalsish(s,"0x"),topics:Bt.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return Om(e||[])}number(e){return e==="0x"?0:_t.from(e).toNumber()}type(e){return e==="0x"||e==null?0:_t.from(e).toNumber()}bigNumber(e){return _t.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),mn(e))?e.toLowerCase():Xp.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Da(e)}callAddress(e){if(!mn(e,32))return null;const t=Da(Os(e,12));return t===Uue?null:t}contractAddress(e){return Ofe(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||mn(e))return i4(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return Hf(n)!==32?Xp.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=_t.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!mn(e))throw new Error("invalid uint256");return Hn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Bt.check(t,e);return i._difficulty=n==null?null:_t.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Bt.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&_t.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Bt.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;mn(n)&&(n=_t.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),mn(n)&&(n=_t.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return xde(e)}receiptLog(e){return Bt.check(this.formats.receiptLog,e)}receipt(e){const t=Bt.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=_t.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&Xp.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):Xp.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Xp.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Bt.check(this.formats.filter,e)}filterLog(e){return Bt.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(i){n.push(e(i))}),n}}}var dr=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Dr=new Ke(W1),_de=10;function fP(r){return r==null?"null":(Hf(r)!==32&&Dr.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function dP(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[fP(i)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return fP(e)}).join("&")}function Sde(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function Dd(r){if(typeof r=="string"){if(r=r.toLowerCase(),Hf(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+dP(r);if(Bue.isForkEvent(r))throw Dr.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+dP(r.topics||[])}throw new Error("invalid event - "+r)}function Zp(){return new Date().getTime()}function hP(r){return new Promise(e=>{setTimeout(e,r)})}const Ede=["block","network","pending","poll"];let Ade=class{constructor(e,t,n){qr(this,"tag",e),qr(this,"listener",t),qr(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=Sde(e[2]),i={};return n.length>0&&(i.topics=n),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Ede.indexOf(this.tag)>=0}};const Ide={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Jx(r){return Hn(_t.from(r).toHexString(),32)}function pP(r){return HI.encode(Ef([r,Os(sP(sP(r)),0,4)]))}const bK=new RegExp("^(ipfs)://(.*)$","i"),gP=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),bK,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Sv(r,e){try{return V1(Kg(r,e))}catch{}return null}function Kg(r,e){if(r==="0x")return null;const t=_t.from(Os(r,e,e+32)).toNumber(),n=_t.from(Os(r,t,t+32)).toNumber();return Os(r,t+32,t+32+n)}function Xx(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):Dr.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function mP(r){const e=Ar(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Cde(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function wK(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const i=Ar(r[n]);e[n]=mP(t),e.push(mP(i.length)),e.push(Cde(i)),t+=32+Math.ceil(i.length/32)*32}return Io(e)}class yP{constructor(e,t,n,i){qr(this,"provider",e),qr(this,"name",n),qr(this,"address",e.formatter.address(t)),qr(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>_t.from(e).eq(1)).catch(e=>{if(e.code===Ke.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return dr(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:Io([e,wv(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=Io(["0x9061b923",wK([Afe(this.name),n.data])]));try{let s=yield this.provider.call(n);return Ar(s).length%32===4&&Dr.throwError("resolver threw error",Ke.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Kg(s,0)),s}catch(s){if(s.code===Ke.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return dr(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?Kg(n,0):null})}_getAddress(e,t){const n=Ide[String(e)];if(n==null&&Dr.throwError(`unsupported coin type: ${e}`,Ke.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const i=Ar(t);if(n.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return pP(Ef([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return pP(Ef([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=cP.toWords(i.slice(2));return a.unshift(o),cP.encode(n.prefix,a)}}return null}getAddress(e){return dr(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===que?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===Ke.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",Jx(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&Dr.throwError("invalid or unsupported coin data",Ke.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return dr(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<gP.length;n++){const i=t.match(gP[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Xx(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const l=yield this.provider.formatter.address(c[0]),u=Hn(_t.from(c[1]).toHexString(),32);if(s==="erc721"){const p=this.provider.formatter.callAddress(yield this.provider.call({to:l,data:Io(["0x6352211e",u])}));if(a!==p)return null;e.push({type:"owner",content:p})}else if(s==="erc1155"){const p=_t.from(yield this.provider.call({to:l,data:Io(["0x00fdd58e",Hn(a,32),u])}));if(p.isZero())return null;e.push({type:"balance",content:p.toString()})}const f={to:this.provider.formatter.address(c[0]),data:Io([o,u])};let d=Sv(yield this.provider.call(f),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),s==="erc1155"&&(d=d.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=Xx(d)),e.push({type:"metadata-url",content:d});const h=yield l4(d);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let g=h.image;if(typeof g!="string")return null;if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(bK)==null)return null;e.push({type:"url-ipfs",content:g}),g=Xx(g)}return e.push({type:"url",content:g}),{linkage:e,url:g}}}}}catch{}return null})}getContentHash(){return dr(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+HI.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+HI.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+qV("0x"+s[1]).replace(/[=+\/]/g,c=>o[c])}return Dr.throwError("invalid or unsupported content hash data",Ke.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return dr(this,void 0,void 0,function*(){let t=vl(e);t=Ef([Jx(64),Jx(t.length),t]),t.length%32!==0&&(t=Ef([t,Hn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",Er(t));return n==null||n==="0x"?null:V1(n)})}}let Zx=null,Tde=1;class Rde extends o4{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),qr(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=q0(new.target,"getNetwork")(e);t?(qr(this,"_network",t),this.emit("network",t,null)):Dr.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return dr(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Dr.throwError("no network detected",Ke.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:qr(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return j0(()=>this._ready().then(e=>e,e=>{if(!(e.code===Ke.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Zx==null&&(Zx=new Bt),Zx}static getNetwork(e){return Fue(e??"homestead")}ccipReadFetch(e,t,n){return dr(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",i).replace("{data}",s),u=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),f=yield l4({url:l,errorPassThrough:!0},u,(h,g)=>(h.status=g.statusCode,h));if(f.data)return f.data;const d=f.message||"unknown error";if(f.status>=400&&f.status<500)return Dr.throwError(`response not found during CCIP fetch: ${d}`,Ke.errors.SERVER_ERROR,{url:c,errorMessage:d});o.push(d)}return Dr.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,Ke.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return dr(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Zp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=Zp(),n=Ui({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=Zp();return i=_t.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return dr(this,void 0,void 0,function*(){const e=Tde++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)Dr.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",Dr.makeError("network block skew detected",Ke.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(l=>{l.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=l.blockNumber),this._emitted["b:"+l.blockHash]=l.blockNumber,this._emitted["t:"+l.transactionHash]=l.blockNumber,this.emit(s,l)})}).catch(c=>{this.emit("error",c),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return dr(this,void 0,void 0,function*(){return Dr.throwError("provider does not support network detection",Ke.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return dr(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield hP(0),this._network;const n=Dr.makeError("underlying network changed",Ke.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Zp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Zp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return dr(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,i){return dr(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const c=[];let l=!1;const u=function(){return l?!0:(l=!0,c.forEach(d=>{d()}),!1)},f=d=>{d.confirmations<t||u()||o(d)};if(this.on(e,f),c.push(()=>{this.removeListener(e,f)}),i){let d=i.startBlock,h=null;const g=p=>dr(this,void 0,void 0,function*(){l||(yield hP(1e3),this.getTransactionCount(i.from).then(m=>dr(this,void 0,void 0,function*(){if(!l){if(m<=i.nonce)d=p;else{{const y=yield this.getTransaction(e);if(y&&y.blockNumber!=null)return}for(h==null&&(h=d-3,h<i.startBlock&&(h=i.startBlock));h<=p;){if(l)return;const y=yield this.getBlockWithTransactions(h);for(let v=0;v<y.transactions.length;v++){const w=y.transactions[v];if(w.hash===e)return;if(w.from===i.from&&w.nonce===i.nonce){if(l)return;const _=yield this.waitForTransaction(w.hash,t);if(u())return;let x="replaced";w.data===i.data&&w.to===i.to&&w.value.eq(i.value)?x="repriced":w.data==="0x"&&w.from===w.to&&w.value.isZero()&&(x="cancelled"),a(Dr.makeError("transaction was replaced",Ke.errors.TRANSACTION_REPLACED,{cancelled:x==="replaced"||x==="cancelled",reason:x,replacement:this._wrapTransaction(w),hash:e,receipt:_}));return}}h++}}l||this.once("block",g)}}),m=>{l||this.once("block",g)}))});if(l)return;this.once("block",g),c.push(()=>{this.removeListener("block",g)})}if(typeof n=="number"&&n>0){const d=setTimeout(()=>{u()||a(Dr.makeError("timeout exceeded",Ke.errors.TIMEOUT,{timeout:n}))},n);d.unref&&d.unref(),c.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return dr(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return _t.from(e)}catch(t){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",n);try{return _t.from(i)}catch(s){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,t){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",n);try{return _t.from(i).toNumber()}catch(s){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,t){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",n);try{return Er(i)}catch(s){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,t,n){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(o=>i4(o))}),s=yield this.perform("getStorageAt",i);try{return Er(s)}catch(o){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,n){if(t!=null&&Hf(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Dr.throwError("Transaction hash mismatch from Provider.sendTransaction.",Ke.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>dr(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&Dr.throwError("transaction failed",Ke.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>Er(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return dr(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?_t.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?Er(s):null))}),this.formatter.transactionRequest(yield Ui(n))})}_getFilter(e){return dr(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Ui(t))})}_call(e,t,n){return dr(this,void 0,void 0,function*(){n>=_de&&Dr.throwError("CCIP read exceeded maximum redirections",Ke.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Hf(s)%32===4)try{const o=Os(s,4),a=Os(o,0,32);_t.from(a).eq(i)||Dr.throwError("CCIP Read sender did not match",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],l=_t.from(Os(o,32,64)).toNumber(),u=_t.from(Os(o,l,l+32)).toNumber(),f=Os(o,l+32);for(let y=0;y<u;y++){const v=Sv(f,y*32);v==null&&Dr.throwError("CCIP Read contained corrupt URL string",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(v)}const d=Kg(o,64);_t.from(Os(o,100,128)).isZero()||Dr.throwError("CCIP Read callback selector included junk",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const h=Os(o,96,100),g=Kg(o,128),p=yield this.ccipReadFetch(e,d,c);p==null&&Dr.throwError("CCIP Read disabled or provided no URLs",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:Io([h,wK([p,g])])};return this._call(m,t,n+1)}catch(o){if(o.code===Ke.errors.SERVER_ERROR)throw o}try{return Er(s)}catch(o){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ui({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ui({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return _t.from(n)}catch(i){return Dr.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:i})}})}_getAddress(e){return dr(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Dr.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Dr.throwError("ENS name not configured",Ke.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return dr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!t};if(mn(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),mn(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{Dr.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return j0(()=>dr(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let o=null;for(let c=0;c<s.transactions.length;c++){const l=s.transactions[c];if(l.blockNumber==null)l.confirmations=0;else if(l.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-l.blockNumber+1;u<=0&&(u=1),l.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return dr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return j0(()=>dr(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return dr(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return j0(()=>dr(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return dr(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ui({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),Bt.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return dr(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return dr(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Dr.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return dr(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const i=new yP(this,n,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return dr(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||Dr.throwError("network does not support ENS",Ke.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+wv(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return dr(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(mn(e))throw n}typeof e!="string"&&Dr.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return dr(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const i=Sv(yield this.call({to:n,data:"0x691f3431"+wv(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return dr(this,void 0,void 0,function*(){let t=null;if(mn(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new yP(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==Ke.errors.CALL_EXCEPTION)throw a}try{const a=Sv(yield this.call({to:o,data:"0x691f3431"+wv(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==Ke.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return Dr.throwError(e+" not implemented",Ke.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const i=new Ade(Dd(e),t,n);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,i=[],s=Dd(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let t=Dd(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=Dd(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let i=!1,s=Dd(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=Dd(e);this._events=this._events.filter(i=>i.tag!==n?!0:(t.push(i),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}var Kc=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const fi=new Ke(W1),kde=["call","estimateGas"];function fg(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=mn(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=fg(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return fg(JSON.parse(r),e)}catch{}return null}function xK(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const s=fg(e,!0);if(s)return s.data;fi.throwError("missing revert data in call exception; Transaction reverted without a reason string",Ke.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let s=fg(e.body,!1);s==null&&(s=fg(e,!1)),s&&fi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:r,transaction:n,error:e})}let i=e.message;throw e.code===Ke.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&fi.throwError("insufficient funds for intrinsic transaction cost",Ke.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),i.match(/nonce (is )?too low/i)&&fi.throwError("nonce has already been used",Ke.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&fi.throwError("replacement fee too low",Ke.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),i.match(/only replay-protected/i)&&fi.throwError("legacy pre-eip-155 transactions not supported",Ke.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),kde.indexOf(r)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&fi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function vP(r){return new Promise(function(e){setTimeout(e,r)})}function Ode(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function Qp(r){return r&&r.toLowerCase()}const XI={};class _K extends q1{constructor(e,t,n){if(super(),e!==XI)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");qr(this,"provider",t),n==null&&(n=0),typeof n=="string"?(qr(this,"_address",this.provider.formatter.address(n)),qr(this,"_index",null)):typeof n=="number"?(qr(this,"_index",n),qr(this,"_address",null)):fi.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return fi.throwError("cannot alter JSON-RPC Signer connection",Ke.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Pde(XI,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&fi.throwError("unknown account #"+this._index,Ke.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Zs(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Zs(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Kc(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&fi.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Ui({tx:Ui(e),sender:t}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&fi.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&fi.throwError("user rejected transaction",Ke.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),xK("sendTransaction",o,s)))})}signTransaction(e){return fi.throwError("signing transactions is unsupported",Ke.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Kc(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield j0(()=>Kc(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Kc(this,void 0,void 0,function*(){const t=typeof e=="string"?vl(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Er(t),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&fi.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return Kc(this,void 0,void 0,function*(){const t=typeof e=="string"?vl(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),Er(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&fi.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,t,n){return Kc(this,void 0,void 0,function*(){const i=yield go.resolveNames(e,t,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(go.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&fi.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return Kc(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class Pde extends _K{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const $de={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Dde extends Rde{constructor(e,t){let n=t;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=q0(this.constructor,"defaultUrl")()),typeof e=="string"?qr(this,"connection",Object.freeze({url:e})):qr(this,"connection",Object.freeze(Zs(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Kc(this,void 0,void 0,function*(){yield vP(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=q0(this.constructor,"getNetwork");try{return t(_t.from(e).toNumber())}catch(n){return fi.throwError("could not detect network",Ke.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return fi.throwError("could not detect network",Ke.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new _K(XI,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:qg(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=l4(this.connection,JSON.stringify(n),Ode).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Qp(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Qp(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Qp(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Qp(t.address),Hn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[q0(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[q0(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Qp(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Kc(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&_t.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Zs(t),t.transaction=Zs(i),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&fi.throwError(e+" not implemented",Ke.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return xK(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return vP(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=Zs($de);if(t)for(const s in t)t[s]&&(n[s]=!0);gue(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=i4(_t.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=Er(e[s]))}),e.accessList&&(i.accessList=Om(e.accessList)),i}}var Mde=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})};const Bde=new Ke(W1);class Nde extends Dde{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Mde(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||Bde.throwError("no network detected",Ke.errors.UNKNOWN_ERROR,{}),this._network==null&&(qr(this,"_network",t),this.emit("network",t,null))),t})}}function ZI(r){if(typeof r=="number"||typeof r=="bigint"||typeof r=="string")return r;if(typeof r.toHexString=="function")return r.toHexString();throw Error(`Expected numeric value but received ${r}`)}const SK=r=>[U1.id,IV.id].includes(r),Lde=async(r,e)=>{if(!SK(r.chainId))throw Error("Invalid chain ID for Arbitrum gas estimation.");if(r.type===void 0&&(r.type=2),r.maxFeePerGas)return r;try{let{lastBaseFeePerGas:t}=await e.getFeeData();if(t){let n=t.mul(_t.from(120)).div(_t.from(100));r.maxFeePerGas=ZI(n),r.maxPriorityFeePerGas=ZI(_t.from(0))}}catch(t){throw Error(`Failed to set gas price for Arbitrum transaction: ${t}.`)}return r},EK=r=>[56,97].includes(r),Fde=async(r,e)=>{if(!EK(r.chainId))throw Error("Invalid chain ID for BSC gas estimation.");if(r.type===void 0?r.type=0:(r.type==1||r.type==2)&&console.warn("Transaction request type specified is incompatible for chain and will result in undefined behavior.  Please use transaction type 0."),!r.gasPrice){let t=await e.getFeeData();r.gasPrice=t.gasPrice?.toHexString()}return r},AK=r=>[z1.id,TV.id,ZR.id,kV.id,OV.id,$V.id,PV.id,81457,168587773].includes(r),Ude=async(r,e)=>{if(!AK(r.chainId))throw Error("Invalid chain ID for OP Stack gas estimation.");if(r.type===void 0&&(r.type=2),r.gasPrice&&(console.warn("`gasPrice` is not supported on this chain and will be ignored. Use `maxPriorityFeePerGas` and/or `maxFeePerGas` instead."),delete r.gasPrice),r.maxPriorityFeePerGas&&r.maxFeePerGas)return r;try{if(!r.maxPriorityFeePerGas){let t=await e.send("eth_maxPriorityFeePerGas",[]);r.maxPriorityFeePerGas=t}if(r.maxFeePerGas&&(console.warn("maxFeePerGas is specified without maxPriorityFeePerGas - this can result in hung transactions."),r.maxPriorityFeePerGas>=r.maxFeePerGas))throw Error("Overridden maxFeePerGas is less than or equal to the calculated maxPriorityFeePerGas. Please set both values or maxPriorityFeePerGas alone for correct gas estimation.");if(!r.maxFeePerGas){let{lastBaseFeePerGas:t}=await e.getFeeData();if(!t)throw Error("Unable to fetch baseFee for last block.");let n=_t.from(t).mul(_t.from(126)).div(_t.from(100)).add(_t.from(r.maxPriorityFeePerGas));r.maxFeePerGas=ZI(n)}}catch(t){throw Error(`Failed to set gas price for OP stack transaction: ${t}.`)}return r},zde="units/5.8.0",qde=new Ke(zde),jde=["wei","kwei","mwei","gwei","szabo","finney","ether"];function bP(r,e){if(typeof r!="string"&&qde.throwArgumentError("value must be a string","value",r),typeof e=="string"){const t=jde.indexOf(e);t!==-1&&(e=3*t)}return tc(r,e??18)}var Ev={exports:{}},Vde=Ev.exports,wP;function Kde(){return wP||(wP=1,function(r,e){(function(t,n){r.exports=n()})(Vde,function(){var t=function(s,o){if(o=o||{},typeof s!="function")throw new i("fetch must be a function");if(typeof o!="object")throw new i("defaults must be an object");if(o.retries!==void 0&&!n(o.retries))throw new i("retries must be a positive integer");if(o.retryDelay!==void 0&&!n(o.retryDelay)&&typeof o.retryDelay!="function")throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(o.retryOn!==void 0&&!Array.isArray(o.retryOn)&&typeof o.retryOn!="function")throw new i("retryOn property expects an array or function");var a={retries:3,retryDelay:1e3,retryOn:[]};return o=Object.assign(a,o),function(l,u){var f=o.retries,d=o.retryDelay,h=o.retryOn;if(u&&u.retries!==void 0)if(n(u.retries))f=u.retries;else throw new i("retries must be a positive integer");if(u&&u.retryDelay!==void 0)if(n(u.retryDelay)||typeof u.retryDelay=="function")d=u.retryDelay;else throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(u&&u.retryOn)if(Array.isArray(u.retryOn)||typeof u.retryOn=="function")h=u.retryOn;else throw new i("retryOn property expects an array or function");return new Promise(function(g,p){var m=function(v){var w=typeof Request<"u"&&l instanceof Request?l.clone():l;s(w,u).then(function(_){if(Array.isArray(h)&&h.indexOf(_.status)===-1)g(_);else if(typeof h=="function")try{return Promise.resolve(h(v,null,_)).then(function(x){x?y(v,null,_):g(_)}).catch(p)}catch(x){p(x)}else v<f?y(v,null,_):g(_)}).catch(function(_){if(typeof h=="function")try{Promise.resolve(h(v,_,null)).then(function(x){x?y(v,_,null):p(_)}).catch(function(x){p(x)})}catch(x){p(x)}else v<f?y(v,_,null):p(_)})};function y(v,w,_){var x=typeof d=="function"?d(v,w,_):d;setTimeout(function(){m(++v)},x)}m(0)})}};function n(s){return Number.isInteger(s)&&s>=0}function i(s){this.name="ArgumentError",this.message=s}return t})}(Ev)),Ev.exports}var Hde=Kde();const p4=zs(Hde);let Wde=p4(fetch,{retries:3,retryDelay:500});const IK=r=>[Tm.id,QR.id].includes(r);let Qx=r=>({maxPriorityFee:bP(r.maxPriorityFee.toFixed(9),"gwei").toHexString(),maxFee:bP(r.maxFee.toFixed(9),"gwei").toHexString()}),Gde=r=>({safeLow:Qx(r.safeLow),standard:Qx(r.standard),fast:Qx(r.fast)});const Yde=async r=>{let e="";switch(r){case Tm.id:e="https://gasstation.polygon.technology/v2";break;case QR.id:e="https://gasstation.polygon.technology/amoy";break;default:throw Error(`chainId ${r} does not support polygon gas stations`)}let t=await Wde(e),n=await t.json();if(t.status>399)throw n;return Gde(n)};async function Jde(r){if(!IK(r.chainId))throw Error("Invalid chain ID for Polygon gas estimation.");if(r.type===void 0&&(r.type=2),r.maxPriorityFeePerGas&&r.maxFeePerGas)return r;try{let{standard:e}=await Yde(r.chainId);r.maxPriorityFeePerGas||(r.maxPriorityFeePerGas=e.maxPriorityFee),r.maxFeePerGas||(r.maxFeePerGas=e.maxFee),r.gasPrice&&(console.warn("`gasPrice` is not supported on this chain and will be ignored. Use `maxPriorityFeePerGas` and/or `maxFeePerGas` instead."),delete r.gasPrice)}catch(e){throw Error(`Failed to set gas prices from Polygon gas station with error: ${e}.`)}return r}const Xde=async(r,e)=>{if(r.type===void 0&&(r.type=2),r.type===2){if(!r.maxFeePerGas||!r.maxPriorityFeePerGas){let t=await e.getFeeData();r.maxFeePerGas||(r.maxFeePerGas=t.maxFeePerGas?.toHexString()),r.maxPriorityFeePerGas||(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas?.toHexString())}}else if(!r.gasPrice){let t=await e.getFeeData();r.gasPrice=t.gasPrice?.toHexString()}return r};async function Zde(r,e){try{return(await e.estimateGas(r)).toHexString()}catch(t){let n;if("message"in t&&t.message.includes("insufficient funds")&&(console.warn(`Gas estimation failed with error: ${t}. Retrying gas estimation by omitting the 'value'`),n=await async function({txRequest:i,provider:s}){try{let o={...i,value:void 0};return(await s.estimateGas(o)).toHexString()}catch(o){return console.warn(`Gas estimation failed with error: ${o} when omitting the 'value'`),null}}({txRequest:r,provider:e})),n||(console.warn(`Gas estimation failed with error: ${t}. Retrying gas estimation by omitting the 'from'`),n=await async function({txRequest:i,provider:s}){try{let o={...i,from:void 0};return(await s.estimateGas(o)).toHexString()}catch(o){return console.warn(`Gas estimation failed with error: ${o} when omitting the 'from' address`),null}}({txRequest:r,provider:e})),!n)throw t;return n}}const xP=(r,e,t,n)=>{let i=Number(r),s=e.find(o=>o.id===i);if(!s)throw new cue(`Unsupported chainId ${r}`,4901);return new Nde(s.rpcUrls.privyWalletOverride&&s.rpcUrls.privyWalletOverride.http[0]?s.rpcUrls.privyWalletOverride.http[0]:t.rpcUrls&&t.rpcUrls[i]?t.rpcUrls[i]:s.rpcUrls.privy?.http[0]?{url:s.rpcUrls.privy.http[0],headers:{"privy-app-id":n.appId}}:s.rpcUrls.public?.http[0]?s.rpcUrls.public?.http[0]:s.rpcUrls.default?.http[0])};function CK(r){return/^-?0x[a-f0-9]+$/i.test(r)}function Qde(r){for(let e of["gasLimit","gasPrice","value","maxPriorityFeePerGas","maxFeePerGas"]){let t=r[e];if(t!==void 0&&!function(n){let i=typeof n=="number",s=typeof n=="bigint",o=typeof n=="string"&&CK(n);return i||s||o}(t))throw Error(`Transaction request property '${e}' must be a valid number, bigint, or hex string representing a quantity`)}if(typeof r.chainId!="number")throw Error("Transaction request property 'chainId' must be a number")}async function _P(r,e,t){if(e.chainId=Number(e.chainId),Qde(e),e.from||(e.from=r),!e.nonce){let n=new r4(r,t);e.nonce=await n.getTransactionCount("pending")}return e.gasLimit||(e.gas?(e.gasLimit=e.gas,delete e.gas):e.gasLimit=await Zde(e,t)),typeof e.type=="string"&&CK(e.type)&&(e.type=Number(e.type)),[23294,23295].includes(e.chainId)&&(e.type=0),(e=IK(e.chainId)?await Jde(e):SK(e.chainId)?await Lde(e,t):AK(e.chainId)?await Ude(e,t):EK(e.chainId)?await Fde(e,t):await Xde(e,t)).type===0&&delete e.accessList,e.type!==2&&(delete e.maxPriorityFeePerGas,delete e.maxFeePerGas),e}function ehe({currentRecoveryMethod:r,upgradeToRecoveryMethod:e}){switch(r){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(r===e)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}function TK(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}let the=class{enqueue(e,t){this.callbacks[e]=t}dequeue(e,t){let n=this.callbacks[t];if(!n)throw Error(`cannot dequeue ${e} event: no event found for id ${t}`);switch(delete this.callbacks[t],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return n;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}};async function rhe(r,e,t,n,i=!1,s,o){let a=i,c=async u=>{if(a){u===(i?0:1)?n():t.current?.reject(new mv("missing_or_invalid_mfa","MFA verification failed, retry."));let f=await new Promise((d,h)=>{e.current={resolve:d,reject:h},setTimeout(()=>{let g=new mv("mfa_timeout","Timed out waiting for MFA code");t.current?.reject(g),h(g)},o)});return await r(f)}return await r()},l=null;for(let u=0;u<s;u++)try{l=await c(u),t.current?.resolve(void 0);break}catch(f){if(f.type!=="missing_or_invalid_mfa")throw t.current?.resolve(void 0),f;a=!0}if(l===null){let u=new mv("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw t.current?.reject(u),u}return l}var SP;let nhe=(SP=0,()=>"id-"+SP++),ihe=(r,e)=>typeof e=="bigint"?e.toString():e,jl=(r,{ms:e,msg:t})=>Promise.race([r,TK(e??15e3).then(()=>Promise.reject(Error(t)))]),EP=new the,AP=class{invokeWithMfa(e,t){return jl(rhe(n=>jl(this.waitForReady().then(()=>e(n)),{msg:t.timeoutMsg,ms:t.timeoutMs}),this.mfa.rootPromise,this.mfa.submitPromise,()=>this.mfa.emit("mfaRequired"),t.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return jl(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return jl(this.waitForReady().then(()=>this.invoke("privy:wallet:create",e)),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa(t=>this.invoke("privy:wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return jl(this.waitForReady().then(()=>this.invoke("privy:solana-wallet:create-additional",e)),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa(t=>this.invoke("privy:solana-wallet:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa(t=>this.invoke("privy:delegated-actions:consent",{...t,...e}),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:verify",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:init-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:submit-enrollment",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa(t=>this.invoke("privy:mfa:unenroll",{...t,...e}),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return jl(this.waitForReady().then(()=>this.invoke("privy:mfa:clear",e)),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:create",{...t,...e}),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa(t=>this.invoke("privy:user-signer:sign",{...t,...e}),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return jl(this.waitForReady().then(()=>this.invoke("privy:wallets:add",e)),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:set-recovery",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return jl(this.waitForReady().then(()=>this.invoke("privy:wallets:connect",e)),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:recover",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa(t=>this.invoke("privy:wallets:rpc",{...t,...e}),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){let{reject:t,resolve:n}=EP.dequeue(e.event,e.id);return e.error!==void 0?t(new mv(e.error.type,e.error.message)):n(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise(async(e,t)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then(()=>{this.ready=!0,e()}).catch(t),await TK(150)})}invoke(e,t){let n=((s,o)=>`${s}${JSON.stringify(o,ihe)}`)(e,t);if(e==="privy:wallet:create"||e==="privy:solana-wallet:create"){let s=this.cache.get(n);if(s)return s}let i=new Promise((s,o)=>{let a=nhe();EP.enqueue(a,{resolve:s,reject:o}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:a,event:e,data:t}),"*")}).finally(()=>{this.cache.delete(n)});return this.cache.set(n,i),i}constructor(e,t){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=t}};var e_={exports:{}},IP;function she(){return IP||(IP=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,f||c,d),g=t?t+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,g=new Array(h);d<h;d++)g[d]=f[d].fn;return g},a.prototype.listenerCount=function(l){var u=t?t+l:l,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,u,f,d,h,g){var p=t?t+l:l;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,v,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,f),!0;case 4:return m.fn.call(m.context,u,f,d),!0;case 5:return m.fn.call(m.context,u,f,d,h),!0;case 6:return m.fn.call(m.context,u,f,d,h,g),!0}for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];m.fn.apply(m.context,v)}else{var _=m.length,x;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),y){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,u);break;case 3:m[w].fn.call(m[w].context,u,f);break;case 4:m[w].fn.call(m[w].context,u,f,d);break;default:if(!v)for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];m[w].fn.apply(m[w].context,v)}}return!0},a.prototype.on=function(l,u,f){return s(this,l,u,f,!1)},a.prototype.once=function(l,u,f){return s(this,l,u,f,!0)},a.prototype.removeListener=function(l,u,f,d){var h=t?t+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===u&&(!d||g.once)&&(!f||g.context===f)&&o(this,h);else{for(var p=0,m=[],y=g.length;p<y;p++)(g[p].fn!==u||d&&!g[p].once||f&&g[p].context!==f)&&m.push(g[p]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(e_)),e_.exports}var ohe=she();const Pm=zs(ohe);let ahe=["eth_sign","eth_signTransaction","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"];const che=r=>ahe.includes(r);var RK={},J1={};J1.byteLength=fhe;J1.toByteArray=hhe;J1.fromByteArray=mhe;var uc=[],ea=[],lhe=typeof Uint8Array<"u"?Uint8Array:Array,t_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Md=0,uhe=t_.length;Md<uhe;++Md)uc[Md]=t_[Md],ea[t_.charCodeAt(Md)]=Md;ea[45]=62;ea[95]=63;function kK(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function fhe(r){var e=kK(r),t=e[0],n=e[1];return(t+n)*3/4-n}function dhe(r,e,t){return(e+t)*3/4-t}function hhe(r){var e,t=kK(r),n=t[0],i=t[1],s=new lhe(dhe(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=ea[r.charCodeAt(c)]<<18|ea[r.charCodeAt(c+1)]<<12|ea[r.charCodeAt(c+2)]<<6|ea[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ea[r.charCodeAt(c)]<<2|ea[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=ea[r.charCodeAt(c)]<<10|ea[r.charCodeAt(c+1)]<<4|ea[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function phe(r){return uc[r>>18&63]+uc[r>>12&63]+uc[r>>6&63]+uc[r&63]}function ghe(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(phe(n));return i.join("")}function mhe(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(ghe(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(uc[e>>2]+uc[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(uc[e>>10]+uc[e>>4&63]+uc[e<<2&63]+"=")),i.join("")}var g4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g4.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,f=t?i-1:0,d=t?-1:1,h=r[e+f];for(f+=d,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+r[e+f],f+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+f],f+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(h?-1:1)*o*Math.pow(2,s-n)};g4.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=d/c:e+=d*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+h]=a&255,h+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+h]=o&255,h+=g,o/=256,l-=8);r[t+h-g]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=J1,t=g4,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=x,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const W=new s(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,s.prototype),Object.setPrototypeOf(W,N),W.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(W){if(W>i)throw new RangeError('The value "'+W+'" is invalid for option "size"');const N=new s(W);return Object.setPrototypeOf(N,u.prototype),N}function u(W,N,$){if(typeof W=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(W)}return f(W,N,$)}u.poolSize=8192;function f(W,N,$){if(typeof W=="string")return p(W,N);if(o.isView(W))return y(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(Ae(W,o)||W&&Ae(W.buffer,o)||typeof a<"u"&&(Ae(W,a)||W&&Ae(W.buffer,a)))return v(W,N,$);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ne=W.valueOf&&W.valueOf();if(ne!=null&&ne!==W)return u.from(ne,N,$);const pe=w(W);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return u.from(W[Symbol.toPrimitive]("string"),N,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}u.from=function(W,N,$){return f(W,N,$)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function d(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function h(W,N,$){return d(W),W<=0?l(W):N!==void 0?typeof $=="string"?l(W).fill(N,$):l(W).fill(N):l(W)}u.alloc=function(W,N,$){return h(W,N,$)};function g(W){return d(W),l(W<0?0:_(W)|0)}u.allocUnsafe=function(W){return g(W)},u.allocUnsafeSlow=function(W){return g(W)};function p(W,N){if((typeof N!="string"||N==="")&&(N="utf8"),!u.isEncoding(N))throw new TypeError("Unknown encoding: "+N);const $=E(W,N)|0;let ne=l($);const pe=ne.write(W,N);return pe!==$&&(ne=ne.slice(0,pe)),ne}function m(W){const N=W.length<0?0:_(W.length)|0,$=l(N);for(let ne=0;ne<N;ne+=1)$[ne]=W[ne]&255;return $}function y(W){if(Ae(W,s)){const N=new s(W);return v(N.buffer,N.byteOffset,N.byteLength)}return m(W)}function v(W,N,$){if(N<0||W.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<N+($||0))throw new RangeError('"length" is outside of buffer bounds');let ne;return N===void 0&&$===void 0?ne=new s(W):$===void 0?ne=new s(W,N):ne=new s(W,N,$),Object.setPrototypeOf(ne,u.prototype),ne}function w(W){if(u.isBuffer(W)){const N=_(W.length)|0,$=l(N);return $.length===0||W.copy($,0,0,N),$}if(W.length!==void 0)return typeof W.length!="number"||Me(W.length)?l(0):m(W);if(W.type==="Buffer"&&Array.isArray(W.data))return m(W.data)}function _(W){if(W>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return W|0}function x(W){return+W!=W&&(W=0),u.alloc(+W)}u.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==u.prototype},u.compare=function(N,$){if(Ae(N,s)&&(N=u.from(N,N.offset,N.byteLength)),Ae($,s)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(N)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===$)return 0;let ne=N.length,pe=$.length;for(let be=0,fe=Math.min(ne,pe);be<fe;++be)if(N[be]!==$[be]){ne=N[be],pe=$[be];break}return ne<pe?-1:pe<ne?1:0},u.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(N,$){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return u.alloc(0);let ne;if($===void 0)for($=0,ne=0;ne<N.length;++ne)$+=N[ne].length;const pe=u.allocUnsafe($);let be=0;for(ne=0;ne<N.length;++ne){let fe=N[ne];if(Ae(fe,s))be+fe.length>pe.length?(u.isBuffer(fe)||(fe=u.from(fe)),fe.copy(pe,be)):s.prototype.set.call(pe,fe,be);else if(u.isBuffer(fe))fe.copy(pe,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=fe.length}return pe};function E(W,N){if(u.isBuffer(W))return W.length;if(o.isView(W)||Ae(W,o))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);const $=W.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&$===0)return 0;let pe=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return ge(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return Ne(W).length;default:if(pe)return ne?-1:ge(W).length;N=(""+N).toLowerCase(),pe=!0}}u.byteLength=E;function S(W,N,$){let ne=!1;if((N===void 0||N<0)&&(N=0),N>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,N>>>=0,$<=N))return"";for(W||(W="utf8");;)switch(W){case"hex":return O(this,N,$);case"utf8":case"utf-8":return F(this,N,$);case"ascii":return Q(this,N,$);case"latin1":case"binary":return X(this,N,$);case"base64":return B(this,N,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,N,$);default:if(ne)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),ne=!0}}u.prototype._isBuffer=!0;function T(W,N,$){const ne=W[N];W[N]=W[$],W[$]=ne}u.prototype.swap16=function(){const N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<N;$+=2)T(this,$,$+1);return this},u.prototype.swap32=function(){const N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<N;$+=4)T(this,$,$+3),T(this,$+1,$+2);return this},u.prototype.swap64=function(){const N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<N;$+=8)T(this,$,$+7),T(this,$+1,$+6),T(this,$+2,$+5),T(this,$+3,$+4);return this},u.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?F(this,0,N):S.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(N){if(!u.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:u.compare(this,N)===0},u.prototype.inspect=function(){let N="";const $=r.INSPECT_MAX_BYTES;return N=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(N+=" ... "),"<Buffer "+N+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(N,$,ne,pe,be){if(Ae(N,s)&&(N=u.from(N,N.offset,N.byteLength)),!u.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if($===void 0&&($=0),ne===void 0&&(ne=N?N.length:0),pe===void 0&&(pe=0),be===void 0&&(be=this.length),$<0||ne>N.length||pe<0||be>this.length)throw new RangeError("out of range index");if(pe>=be&&$>=ne)return 0;if(pe>=be)return-1;if($>=ne)return 1;if($>>>=0,ne>>>=0,pe>>>=0,be>>>=0,this===N)return 0;let fe=be-pe,Ee=ne-$;const Fe=Math.min(fe,Ee),He=this.slice(pe,be),Ve=N.slice($,ne);for(let De=0;De<Fe;++De)if(He[De]!==Ve[De]){fe=He[De],Ee=Ve[De];break}return fe<Ee?-1:Ee<fe?1:0};function C(W,N,$,ne,pe){if(W.length===0)return-1;if(typeof $=="string"?(ne=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,Me($)&&($=pe?0:W.length-1),$<0&&($=W.length+$),$>=W.length){if(pe)return-1;$=W.length-1}else if($<0)if(pe)$=0;else return-1;if(typeof N=="string"&&(N=u.from(N,ne)),u.isBuffer(N))return N.length===0?-1:P(W,N,$,ne,pe);if(typeof N=="number")return N=N&255,typeof s.prototype.indexOf=="function"?pe?s.prototype.indexOf.call(W,N,$):s.prototype.lastIndexOf.call(W,N,$):P(W,[N],$,ne,pe);throw new TypeError("val must be string, number or Buffer")}function P(W,N,$,ne,pe){let be=1,fe=W.length,Ee=N.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(W.length<2||N.length<2)return-1;be=2,fe/=2,Ee/=2,$/=2}function Fe(Ve,De){return be===1?Ve[De]:Ve.readUInt16BE(De*be)}let He;if(pe){let Ve=-1;for(He=$;He<fe;He++)if(Fe(W,He)===Fe(N,Ve===-1?0:He-Ve)){if(Ve===-1&&(Ve=He),He-Ve+1===Ee)return Ve*be}else Ve!==-1&&(He-=He-Ve),Ve=-1}else for($+Ee>fe&&($=fe-Ee),He=$;He>=0;He--){let Ve=!0;for(let De=0;De<Ee;De++)if(Fe(W,He+De)!==Fe(N,De)){Ve=!1;break}if(Ve)return He}return-1}u.prototype.includes=function(N,$,ne){return this.indexOf(N,$,ne)!==-1},u.prototype.indexOf=function(N,$,ne){return C(this,N,$,ne,!0)},u.prototype.lastIndexOf=function(N,$,ne){return C(this,N,$,ne,!1)};function V(W,N,$,ne){$=Number($)||0;const pe=W.length-$;ne?(ne=Number(ne),ne>pe&&(ne=pe)):ne=pe;const be=N.length;ne>be/2&&(ne=be/2);let fe;for(fe=0;fe<ne;++fe){const Ee=parseInt(N.substr(fe*2,2),16);if(Me(Ee))return fe;W[$+fe]=Ee}return fe}function L(W,N,$,ne){return xe(ge(N,W.length-$),W,$,ne)}function D(W,N,$,ne){return xe(_e(N),W,$,ne)}function b(W,N,$,ne){return xe(Ne(N),W,$,ne)}function I(W,N,$,ne){return xe(Ce(N,W.length-$),W,$,ne)}u.prototype.write=function(N,$,ne,pe){if($===void 0)pe="utf8",ne=this.length,$=0;else if(ne===void 0&&typeof $=="string")pe=$,ne=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(ne)?(ne=ne>>>0,pe===void 0&&(pe="utf8")):(pe=ne,ne=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-$;if((ne===void 0||ne>be)&&(ne=be),N.length>0&&(ne<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");let fe=!1;for(;;)switch(pe){case"hex":return V(this,N,$,ne);case"utf8":case"utf-8":return L(this,N,$,ne);case"ascii":case"latin1":case"binary":return D(this,N,$,ne);case"base64":return b(this,N,$,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,N,$,ne);default:if(fe)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),fe=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(W,N,$){return N===0&&$===W.length?e.fromByteArray(W):e.fromByteArray(W.slice(N,$))}function F(W,N,$){$=Math.min(W.length,$);const ne=[];let pe=N;for(;pe<$;){const be=W[pe];let fe=null,Ee=be>239?4:be>223?3:be>191?2:1;if(pe+Ee<=$){let Fe,He,Ve,De;switch(Ee){case 1:be<128&&(fe=be);break;case 2:Fe=W[pe+1],(Fe&192)===128&&(De=(be&31)<<6|Fe&63,De>127&&(fe=De));break;case 3:Fe=W[pe+1],He=W[pe+2],(Fe&192)===128&&(He&192)===128&&(De=(be&15)<<12|(Fe&63)<<6|He&63,De>2047&&(De<55296||De>57343)&&(fe=De));break;case 4:Fe=W[pe+1],He=W[pe+2],Ve=W[pe+3],(Fe&192)===128&&(He&192)===128&&(Ve&192)===128&&(De=(be&15)<<18|(Fe&63)<<12|(He&63)<<6|Ve&63,De>65535&&De<1114112&&(fe=De))}}fe===null?(fe=65533,Ee=1):fe>65535&&(fe-=65536,ne.push(fe>>>10&1023|55296),fe=56320|fe&1023),ne.push(fe),pe+=Ee}return G(ne)}const z=4096;function G(W){const N=W.length;if(N<=z)return String.fromCharCode.apply(String,W);let $="",ne=0;for(;ne<N;)$+=String.fromCharCode.apply(String,W.slice(ne,ne+=z));return $}function Q(W,N,$){let ne="";$=Math.min(W.length,$);for(let pe=N;pe<$;++pe)ne+=String.fromCharCode(W[pe]&127);return ne}function X(W,N,$){let ne="";$=Math.min(W.length,$);for(let pe=N;pe<$;++pe)ne+=String.fromCharCode(W[pe]);return ne}function O(W,N,$){const ne=W.length;(!N||N<0)&&(N=0),(!$||$<0||$>ne)&&($=ne);let pe="";for(let be=N;be<$;++be)pe+=oe[W[be]];return pe}function R(W,N,$){const ne=W.slice(N,$);let pe="";for(let be=0;be<ne.length-1;be+=2)pe+=String.fromCharCode(ne[be]+ne[be+1]*256);return pe}u.prototype.slice=function(N,$){const ne=this.length;N=~~N,$=$===void 0?ne:~~$,N<0?(N+=ne,N<0&&(N=0)):N>ne&&(N=ne),$<0?($+=ne,$<0&&($=0)):$>ne&&($=ne),$<N&&($=N);const pe=this.subarray(N,$);return Object.setPrototypeOf(pe,u.prototype),pe};function M(W,N,$){if(W%1!==0||W<0)throw new RangeError("offset is not uint");if(W+N>$)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(N,$,ne){N=N>>>0,$=$>>>0,ne||M(N,$,this.length);let pe=this[N],be=1,fe=0;for(;++fe<$&&(be*=256);)pe+=this[N+fe]*be;return pe},u.prototype.readUintBE=u.prototype.readUIntBE=function(N,$,ne){N=N>>>0,$=$>>>0,ne||M(N,$,this.length);let pe=this[N+--$],be=1;for(;$>0&&(be*=256);)pe+=this[N+--$]*be;return pe},u.prototype.readUint8=u.prototype.readUInt8=function(N,$){return N=N>>>0,$||M(N,1,this.length),this[N]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(N,$){return N=N>>>0,$||M(N,2,this.length),this[N]|this[N+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(N,$){return N=N>>>0,$||M(N,2,this.length),this[N]<<8|this[N+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(N,$){return N=N>>>0,$||M(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(N,$){return N=N>>>0,$||M(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},u.prototype.readBigUInt64LE=H(function(N){N=N>>>0,se(N,"offset");const $=this[N],ne=this[N+7];($===void 0||ne===void 0)&&U(N,this.length-8);const pe=$+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24,be=this[++N]+this[++N]*2**8+this[++N]*2**16+ne*2**24;return BigInt(pe)+(BigInt(be)<<BigInt(32))}),u.prototype.readBigUInt64BE=H(function(N){N=N>>>0,se(N,"offset");const $=this[N],ne=this[N+7];($===void 0||ne===void 0)&&U(N,this.length-8);const pe=$*2**24+this[++N]*2**16+this[++N]*2**8+this[++N],be=this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+ne;return(BigInt(pe)<<BigInt(32))+BigInt(be)}),u.prototype.readIntLE=function(N,$,ne){N=N>>>0,$=$>>>0,ne||M(N,$,this.length);let pe=this[N],be=1,fe=0;for(;++fe<$&&(be*=256);)pe+=this[N+fe]*be;return be*=128,pe>=be&&(pe-=Math.pow(2,8*$)),pe},u.prototype.readIntBE=function(N,$,ne){N=N>>>0,$=$>>>0,ne||M(N,$,this.length);let pe=$,be=1,fe=this[N+--pe];for(;pe>0&&(be*=256);)fe+=this[N+--pe]*be;return be*=128,fe>=be&&(fe-=Math.pow(2,8*$)),fe},u.prototype.readInt8=function(N,$){return N=N>>>0,$||M(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},u.prototype.readInt16LE=function(N,$){N=N>>>0,$||M(N,2,this.length);const ne=this[N]|this[N+1]<<8;return ne&32768?ne|4294901760:ne},u.prototype.readInt16BE=function(N,$){N=N>>>0,$||M(N,2,this.length);const ne=this[N+1]|this[N]<<8;return ne&32768?ne|4294901760:ne},u.prototype.readInt32LE=function(N,$){return N=N>>>0,$||M(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},u.prototype.readInt32BE=function(N,$){return N=N>>>0,$||M(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},u.prototype.readBigInt64LE=H(function(N){N=N>>>0,se(N,"offset");const $=this[N],ne=this[N+7];($===void 0||ne===void 0)&&U(N,this.length-8);const pe=this[N+4]+this[N+5]*2**8+this[N+6]*2**16+(ne<<24);return(BigInt(pe)<<BigInt(32))+BigInt($+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24)}),u.prototype.readBigInt64BE=H(function(N){N=N>>>0,se(N,"offset");const $=this[N],ne=this[N+7];($===void 0||ne===void 0)&&U(N,this.length-8);const pe=($<<24)+this[++N]*2**16+this[++N]*2**8+this[++N];return(BigInt(pe)<<BigInt(32))+BigInt(this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+ne)}),u.prototype.readFloatLE=function(N,$){return N=N>>>0,$||M(N,4,this.length),t.read(this,N,!0,23,4)},u.prototype.readFloatBE=function(N,$){return N=N>>>0,$||M(N,4,this.length),t.read(this,N,!1,23,4)},u.prototype.readDoubleLE=function(N,$){return N=N>>>0,$||M(N,8,this.length),t.read(this,N,!0,52,8)},u.prototype.readDoubleBE=function(N,$){return N=N>>>0,$||M(N,8,this.length),t.read(this,N,!1,52,8)};function k(W,N,$,ne,pe,be){if(!u.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>pe||N<be)throw new RangeError('"value" argument is out of bounds');if($+ne>W.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(N,$,ne,pe){if(N=+N,$=$>>>0,ne=ne>>>0,!pe){const Ee=Math.pow(2,8*ne)-1;k(this,N,$,ne,Ee,0)}let be=1,fe=0;for(this[$]=N&255;++fe<ne&&(be*=256);)this[$+fe]=N/be&255;return $+ne},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(N,$,ne,pe){if(N=+N,$=$>>>0,ne=ne>>>0,!pe){const Ee=Math.pow(2,8*ne)-1;k(this,N,$,ne,Ee,0)}let be=ne-1,fe=1;for(this[$+be]=N&255;--be>=0&&(fe*=256);)this[$+be]=N/fe&255;return $+ne},u.prototype.writeUint8=u.prototype.writeUInt8=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,1,255,0),this[$]=N&255,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,2,65535,0),this[$]=N&255,this[$+1]=N>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,2,65535,0),this[$]=N>>>8,this[$+1]=N&255,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,4,4294967295,0),this[$+3]=N>>>24,this[$+2]=N>>>16,this[$+1]=N>>>8,this[$]=N&255,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,4,4294967295,0),this[$]=N>>>24,this[$+1]=N>>>16,this[$+2]=N>>>8,this[$+3]=N&255,$+4};function j(W,N,$,ne,pe){we(N,ne,pe,W,$,7);let be=Number(N&BigInt(4294967295));W[$++]=be,be=be>>8,W[$++]=be,be=be>>8,W[$++]=be,be=be>>8,W[$++]=be;let fe=Number(N>>BigInt(32)&BigInt(4294967295));return W[$++]=fe,fe=fe>>8,W[$++]=fe,fe=fe>>8,W[$++]=fe,fe=fe>>8,W[$++]=fe,$}function te(W,N,$,ne,pe){we(N,ne,pe,W,$,7);let be=Number(N&BigInt(4294967295));W[$+7]=be,be=be>>8,W[$+6]=be,be=be>>8,W[$+5]=be,be=be>>8,W[$+4]=be;let fe=Number(N>>BigInt(32)&BigInt(4294967295));return W[$+3]=fe,fe=fe>>8,W[$+2]=fe,fe=fe>>8,W[$+1]=fe,fe=fe>>8,W[$]=fe,$+8}u.prototype.writeBigUInt64LE=H(function(N,$=0){return j(this,N,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=H(function(N,$=0){return te(this,N,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(N,$,ne,pe){if(N=+N,$=$>>>0,!pe){const Fe=Math.pow(2,8*ne-1);k(this,N,$,ne,Fe-1,-Fe)}let be=0,fe=1,Ee=0;for(this[$]=N&255;++be<ne&&(fe*=256);)N<0&&Ee===0&&this[$+be-1]!==0&&(Ee=1),this[$+be]=(N/fe>>0)-Ee&255;return $+ne},u.prototype.writeIntBE=function(N,$,ne,pe){if(N=+N,$=$>>>0,!pe){const Fe=Math.pow(2,8*ne-1);k(this,N,$,ne,Fe-1,-Fe)}let be=ne-1,fe=1,Ee=0;for(this[$+be]=N&255;--be>=0&&(fe*=256);)N<0&&Ee===0&&this[$+be+1]!==0&&(Ee=1),this[$+be]=(N/fe>>0)-Ee&255;return $+ne},u.prototype.writeInt8=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,1,127,-128),N<0&&(N=255+N+1),this[$]=N&255,$+1},u.prototype.writeInt16LE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,2,32767,-32768),this[$]=N&255,this[$+1]=N>>>8,$+2},u.prototype.writeInt16BE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,2,32767,-32768),this[$]=N>>>8,this[$+1]=N&255,$+2},u.prototype.writeInt32LE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,4,2147483647,-2147483648),this[$]=N&255,this[$+1]=N>>>8,this[$+2]=N>>>16,this[$+3]=N>>>24,$+4},u.prototype.writeInt32BE=function(N,$,ne){return N=+N,$=$>>>0,ne||k(this,N,$,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[$]=N>>>24,this[$+1]=N>>>16,this[$+2]=N>>>8,this[$+3]=N&255,$+4},u.prototype.writeBigInt64LE=H(function(N,$=0){return j(this,N,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=H(function(N,$=0){return te(this,N,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(W,N,$,ne,pe,be){if($+ne>W.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function he(W,N,$,ne,pe){return N=+N,$=$>>>0,pe||ae(W,N,$,4),t.write(W,N,$,ne,23,4),$+4}u.prototype.writeFloatLE=function(N,$,ne){return he(this,N,$,!0,ne)},u.prototype.writeFloatBE=function(N,$,ne){return he(this,N,$,!1,ne)};function re(W,N,$,ne,pe){return N=+N,$=$>>>0,pe||ae(W,N,$,8),t.write(W,N,$,ne,52,8),$+8}u.prototype.writeDoubleLE=function(N,$,ne){return re(this,N,$,!0,ne)},u.prototype.writeDoubleBE=function(N,$,ne){return re(this,N,$,!1,ne)},u.prototype.copy=function(N,$,ne,pe){if(!u.isBuffer(N))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),!pe&&pe!==0&&(pe=this.length),$>=N.length&&($=N.length),$||($=0),pe>0&&pe<ne&&(pe=ne),pe===ne||N.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),N.length-$<pe-ne&&(pe=N.length-$+ne);const be=pe-ne;return this===N&&typeof s.prototype.copyWithin=="function"?this.copyWithin($,ne,pe):s.prototype.set.call(N,this.subarray(ne,pe),$),be},u.prototype.fill=function(N,$,ne,pe){if(typeof N=="string"){if(typeof $=="string"?(pe=$,$=0,ne=this.length):typeof ne=="string"&&(pe=ne,ne=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!u.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(N.length===1){const fe=N.charCodeAt(0);(pe==="utf8"&&fe<128||pe==="latin1")&&(N=fe)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if($<0||this.length<$||this.length<ne)throw new RangeError("Out of range index");if(ne<=$)return this;$=$>>>0,ne=ne===void 0?this.length:ne>>>0,N||(N=0);let be;if(typeof N=="number")for(be=$;be<ne;++be)this[be]=N;else{const fe=u.isBuffer(N)?N:u.from(N,pe),Ee=fe.length;if(Ee===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(be=0;be<ne-$;++be)this[be+$]=fe[be%Ee]}return this};const q={};function J(W,N,$){q[W]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${W}]`,this.stack,delete this.name}get code(){return W}set code(pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:pe,writable:!0})}toString(){return`${this.name} [${W}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?`${W} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(W,N){return`The "${W}" argument must be of type number. Received type ${typeof N}`},TypeError),J("ERR_OUT_OF_RANGE",function(W,N,$){let ne=`The value of "${W}" is out of range.`,pe=$;return Number.isInteger($)&&Math.abs($)>2**32?pe=de(String($)):typeof $=="bigint"&&(pe=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(pe=de(pe)),pe+="n"),ne+=` It must be ${N}. Received ${pe}`,ne},RangeError);function de(W){let N="",$=W.length;const ne=W[0]==="-"?1:0;for(;$>=ne+4;$-=3)N=`_${W.slice($-3,$)}${N}`;return`${W.slice(0,$)}${N}`}function ue(W,N,$){se(N,"offset"),(W[N]===void 0||W[N+$]===void 0)&&U(N,W.length-($+1))}function we(W,N,$,ne,pe,be){if(W>$||W<N){const fe=typeof N=="bigint"?"n":"";let Ee;throw N===0||N===BigInt(0)?Ee=`>= 0${fe} and < 2${fe} ** ${(be+1)*8}${fe}`:Ee=`>= -(2${fe} ** ${(be+1)*8-1}${fe}) and < 2 ** ${(be+1)*8-1}${fe}`,new q.ERR_OUT_OF_RANGE("value",Ee,W)}ue(ne,pe,be)}function se(W,N){if(typeof W!="number")throw new q.ERR_INVALID_ARG_TYPE(N,"number",W)}function U(W,N,$){throw Math.floor(W)!==W?(se(W,$),new q.ERR_OUT_OF_RANGE("offset","an integer",W)):N<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${N}`,W)}const K=/[^+/0-9A-Za-z-_]/g;function ie(W){if(W=W.split("=")[0],W=W.trim().replace(K,""),W.length<2)return"";for(;W.length%4!==0;)W=W+"=";return W}function ge(W,N){N=N||1/0;let $;const ne=W.length;let pe=null;const be=[];for(let fe=0;fe<ne;++fe){if($=W.charCodeAt(fe),$>55295&&$<57344){if(!pe){if($>56319){(N-=3)>-1&&be.push(239,191,189);continue}else if(fe+1===ne){(N-=3)>-1&&be.push(239,191,189);continue}pe=$;continue}if($<56320){(N-=3)>-1&&be.push(239,191,189),pe=$;continue}$=(pe-55296<<10|$-56320)+65536}else pe&&(N-=3)>-1&&be.push(239,191,189);if(pe=null,$<128){if((N-=1)<0)break;be.push($)}else if($<2048){if((N-=2)<0)break;be.push($>>6|192,$&63|128)}else if($<65536){if((N-=3)<0)break;be.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((N-=4)<0)break;be.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return be}function _e(W){const N=[];for(let $=0;$<W.length;++$)N.push(W.charCodeAt($)&255);return N}function Ce(W,N){let $,ne,pe;const be=[];for(let fe=0;fe<W.length&&!((N-=2)<0);++fe)$=W.charCodeAt(fe),ne=$>>8,pe=$%256,be.push(pe),be.push(ne);return be}function Ne(W){return e.toByteArray(ie(W))}function xe(W,N,$,ne){let pe;for(pe=0;pe<ne&&!(pe+$>=N.length||pe>=W.length);++pe)N[pe+$]=W[pe];return pe}function Ae(W,N){return W instanceof N||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===N.name}function Me(W){return W!==W}const oe=function(){const W="0123456789abcdef",N=new Array(256);for(let $=0;$<16;++$){const ne=$*16;for(let pe=0;pe<16;++pe)N[ne+pe]=W[$]+W[pe]}return N}();function H(W){return typeof BigInt>"u"?ee:W}function ee(){throw new Error("BigInt not supported")}})(RK);const Ze=RK.Buffer,yb=r=>/^0x[0-9a-fA-F]*$/.test(r),vb=r=>Ze.from(r,"utf8"),Hg=r=>`0x${r.toString("hex")}`;var r_,CP;function yhe(){return CP||(CP=1,r_=function r(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?r(e.toJSON()):Array.isArray(e)?`[${e.reduce((i,s,o)=>`${i}${o===0?"":","}${r(s===void 0||typeof s=="symbol"?null:s)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,i)=>{if(e[i]===void 0||typeof e[i]=="symbol")return n;const s=n.length===0?"":",";return`${n}${s}${r(i)}:${r(e[i])}`},"")}}`}),r_}var vhe=yhe();const bhe=zs(vhe);async function whe(r,e){let t=bhe(e);if(t===void 0)throw new Qr({error:"Failed to prepare the payload for signing",code:"invalid_input"});let n=Ze.from(t).toString("base64"),{signature:i}=await r({message:n});return{signature:i}}async function Bd(r,e,{wallet_id:t,...n}){let i={version:1,url:r.getCompiledPath(xx,{params:{wallet_id:t}}),method:xx.method,headers:{"privy-app-id":r.app.appId},body:{...n}},{signature:s}=await whe(e,i);return await r.fetchPrivyRoute(xx,{body:n,params:{wallet_id:t},headers:{"privy-authorization-signature":s}})}function xhe(r){return{from:r.from,to:r.to,nonce:ef(r.nonce),chain_id:ef(r.chainId),data:function(e){if(e!==void 0)return typeof e=="string"?yb(e)?e:Hg(vb(e)):Hg(Ze.from(Uint8Array.from(e)))}(r.data),value:ef(r.value),type:r.type,gas_limit:ef(r.gasLimit),gas_price:ef(r.gasPrice),max_fee_per_gas:ef(r.maxFeePerGas),max_priority_fee_per_gas:ef(r.maxPriorityFeePerGas)}}function ef(r){if(typeof r=="number"||typeof r=="bigint")return`0x${BigInt(r).toString(16)}`;if(typeof r=="string")return yb(r)?r:Hg(vb(r))}function _he(r){return typeof r=="string"&&(r=JSON.parse(r)),{types:r.types,primary_type:String(r.primaryType),domain:r.domain,message:r.message}}async function OK({context:r,account:e,rpcRequest:t}){switch(t.chainType){case"ethereum":return async function({context:n,account:i,rpcRequest:s}){switch(s.method){case"personal_sign":{let[o]=s.params,a=await Bd(n,n.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:i.id,params:o.startsWith("0x")?{message:o.slice(2),encoding:"hex"}:{message:o,encoding:"utf-8"}});if(a.method!=="personal_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"eth_signTransaction":{let[o]=s.params,a=await Bd(n,n.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:i.id,params:{transaction:xhe(o)}});if(a.method!=="eth_signTransaction")throw Error("Unable to sign transaction");return{data:a.data.signed_transaction}}case"eth_signTypedData_v4":{let[,o]=s.params,a=await Bd(n,n.signRequest,{chain_type:"ethereum",method:s.method,wallet_id:i.id,params:{typed_data:_he(o)}});if(a.method!=="eth_signTypedData_v4")throw Error("Unable to sign typed data");return{data:a.data.signature}}case"eth_sign":{let[,o]=s.params,a=await Bd(n,n.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:i.id,params:{hash:yb(o)?o:Hg(vb(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"secp256k1_sign":{let[o]=s.params,a=await Bd(n,n.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:i.id,params:{hash:yb(o)?o:Hg(vb(o))}});if(a.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:a.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${s.method}`)}}({context:r,account:e,rpcRequest:t.request});case"solana":return async function({context:n,account:i,rpcRequest:s}){if(s.method==="signMessage"){let{message:o}=s.params,a=await Bd(n,n.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:i.id,params:{message:o,encoding:"base64"}});if(a.method!=="signMessage")throw Error("Unable to sign message");return{data:a.data.signature}}}({context:r,account:e,rpcRequest:t.request})}}let n_=class extends Pm{async request(e){if(che(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_sendTransaction":{let t=e.params?.[0];return this.handleSendTransaction(t)}case"eth_populateTransactionRequest":{let t=e.params?.[0];return this.handlePopulateTransaction(t)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let t={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(t.chainId),t}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._jsonRpcProvider=xP(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let t=this.ensureChainId(e);return _P(this._account.address,t,this._jsonRpcProvider)}async handleSendTransaction(e){let t=this.ensureChainId(e),n=await _P(this._account.address,t,this._jsonRpcProvider),i=await this.handleIFrameRpc({method:"eth_signTransaction",params:[n]});return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[i]})}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");delete e.params[0].gasPrice,delete e.params[0].maxFeePerGas,delete e.params[0].maxPriorityFeePerGas;let t={...e.params[0],chainId:`0x${this._chainId.toString(16)}`};this.internalSwitchEthereumChain(t.chainId);try{return await this._jsonRpcProvider.send("eth_estimateGas",[t])}catch(n){console.warn(`Gas estimation failed with error: ${n}. Retrying gas estimation by omitting the 'from' address`);try{return delete t.from,await this._jsonRpcProvider.send("eth_estimateGas",[t])}catch(i){throw console.warn(`Gas estimation failed with error: ${i} when omitting the 'from' address`),n}}}handleSwitchEthereumChain(e){let t;if(!e.params||!Array.isArray(e.params))throw new vO(`Invalid params for ${e.method}`,4200);if(typeof e.params[0]=="string")t=e.params[0];else{if(!("chainId"in e.params[0])||typeof e.params[0].chainId!="string")throw new vO(`Invalid params for ${e.method}`,4200);t=e.params[0].chainId}this.internalSwitchEthereumChain(t)}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let n=this._account;if(su(n)){let{data:i}=await OK({context:{app:this._appApi,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s),signRequest:({message:s})=>this._walletProxy.signWithUserSigner({accessToken:t,message:s})},account:n,rpcRequest:{chainType:"ethereum",request:e}});return i}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t})}catch(i){let s=t4(i);if(s&&this._account.recovery_method==="privy")await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:t});else{if(!s||!this._onNeedsRecovery)throw i;{let o;await new Promise(async(a,c)=>{o=setTimeout(()=>c(new Qr({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>a(!0)})}).finally(()=>clearTimeout(o))}}}return(await this._walletProxy.rpcWallet({accessToken:t,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Qr({code:"embedded_wallet_request_error",error:n})}}async handleJsonRpc(e){return this._jsonRpcProvider.send(e.method,e.params??[])}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s,chains:o,onNeedsRecovery:a,chainId:c=o[0].id,appApi:l}){super(),this._walletProxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s,this._chainId=c,this._chains=o,this._onNeedsRecovery=a,this._jsonRpcProvider=xP(c,o,{rpcUrls:[]},{appId:l.appId}),this._appApi=l}};function QI(r){return"version"in r}function TP(r,e){let t=(QI(r)?r.message:r.compileMessage()).staticAccountKeys.find(n=>n.toBase58()===e);if(!t)throw Error(`Transaction does not contain public key ${e}`);return t}let She=class{async request(e){if(!await this._privyInternal.getAccessToken())throw new Qr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if(this._account.recovery_method!=="privy-v2")try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(t){let n=t4(t);if(n&&this._account.recovery_method==="privy")await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!n||!this._onNeedsRecovery)throw t;{let i;await new Promise(async(s,o)=>{i=setTimeout(()=>o(new Qr({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"})),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>s(!0)})}).finally(()=>clearTimeout(i))}}}}async signMessageRpc(e,t){let n=this._account;if(!su(n))return(await this._proxy.rpcWallet({accessToken:t,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:i}=await OK({context:{app:this._app,fetchPrivyRoute:(...s)=>this._privyInternal.fetch(...s),getCompiledPath:(...s)=>this._privyInternal.getPath(...s),signRequest:({message:s})=>this._proxy.signWithUserSigner({accessToken:t,message:s})},account:n,rpcRequest:{chainType:"solana",request:e}});return{signature:i}}}async handleIFrameRpc(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t),await this.signMessageRpc(e,t)}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Qr({code:"embedded_wallet_request_error",error:n})}}async handleSignAndSendTransaction(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:n,connection:i,options:s}=e.params,o=TP(n,this._account.address),a=QI(n)?Ze.from(n.message.serialize()):n.serializeMessage(),{signature:c}=await this.signMessageRpc({method:"signMessage",params:{message:a.toString("base64")}},t);return n.addSignature(o,Ze.from(c,"base64")),{signature:await i.sendRawTransaction(n.serialize(),s)}}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:n}),new Qr({code:"embedded_wallet_request_error",error:n})}}async handleSignTransaction(e){try{let t=await this._privyInternal.getAccessToken();if(!t)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(t);let{transaction:n}=e.params,i=TP(n,this._account.address),s=QI(n)?Ze.from(n.message.serialize()):n.serializeMessage(),{signature:o}=await this.signMessageRpc({method:"signMessage",params:{message:s.toString("base64")}},t);return n.addSignature(i,Ze.from(o,"base64")),{signedTransaction:n}}catch(t){console.error(t);let n=t instanceof Error?t.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:n}),new Qr({code:"embedded_wallet_request_error",error:n})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:t,account:n,entropyId:i,entropyIdVerifier:s,onNeedsRecovery:o,app:a}){this._proxy=e,this._privyInternal=t,this._account=n,this._entropyId=i,this._entropyIdVerifier=s,this._onNeedsRecovery=o,this._app=a}},Ehe=class{setMessagePoster(e){this._proxy=new AP(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let t=await this._privyInternal.getAccessToken();if(!t)throw new Qr({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:n}=await this._proxy.signWithUserSigner({accessToken:t,message:e.message});return{signature:n}}async add(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await Cx({context:{app:this._appApi,fetchPrivyRoute:(...n)=>this._privyInternal.fetch(...n),getCompiledPath:(...n)=>this._privyInternal.getPath(...n)},chainType:e.chainType});else{let n=await this._privyInternal.getAccessToken();if(!n)throw new Qr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:n,...e})}let{user:t}=await this._privyInternal.refreshSession();return{user:t}}async getBitcoinProvider({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessToken())throw Error("User must be logged in to create an embedded wallet");return su(e)||await this._load({entropyId:t,entropyIdVerifier:n,wallet:e,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}),new sue({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:n})}async create({password:e,recoveryMethod:t,recoveryToken:n,recoveryKey:i,recoverySecretOverride:s,iCloudRecordNameOverride:o,solanaAccount:a,skipCallbacks:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only"){if(t&&!t.startsWith("privy"))throw new Qr({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await Cx({context:{app:this._appApi,fetchPrivyRoute:(...l)=>this._privyInternal.fetch(...l),getCompiledPath:(...l)=>this._privyInternal.getPath(...l)},chainType:"ethereum"})}else{let l;if(l=t||(e?"user-passcode":"privy"),e&&typeof e!="string")throw Error("Invalid recovery password, must be a string");if(l==="privy"&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let u=await this._privyInternal.getAccessToken();if(!u)throw Error("User must be logged in to create an embedded wallet");let{address:f}=await this._proxy.create({accessToken:u,recoveryMethod:l,recoveryKey:i,recoveryPassword:e,recoveryAccessToken:n,recoverySecretOverride:s,iCloudRecordNameOverride:o,solanaAddress:a?.address});if(!f)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(c)}async createSolana(e){if(!this._proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await Cx({context:{app:this._appApi,fetchPrivyRoute:(...t)=>this._privyInternal.fetch(...t),getCompiledPath:(...t)=>this._privyInternal.getPath(...t)},chainType:"solana"});else{let t=await this._privyInternal.getAccessToken();if(!t)throw new Qr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e?.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:n}=await this._proxy.createSolana({accessToken:t,ethereumAddress:e?.ethereumAccount?.address});if(!n)throw new Qr({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:t}){if(!this._proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let n=await this._privyInternal.getAccessToken();if(!n)throw new Qr({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:n,delegatedWallets:e,rootWallet:t})}async getProvider(e,t,n,i,s){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return su(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:t,recoveryKey:s,recoveryAccessToken:n,recoverySecretOverride:i}),new n_({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o,recoveryKey:a,onNeedsRecovery:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessToken())throw Error("User must be logged in to create an embedded wallet");return su(e)||(!c||i||s||o||a)&&await this._load({entropyId:t,entropyIdVerifier:n,wallet:e,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o,recoveryKey:a}),new n_({account:e,entropyId:t,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:c,appApi:this._appApi})}async getSolanaProvider(e,t,n,i,s,o,a){if(!this._proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return su(e)||(!a||i||s||o)&&await this._load({wallet:e,entropyId:t,entropyIdVerifier:n,recoveryPassword:i,recoveryAccessToken:s,recoverySecretOverride:o}),new She({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:t,entropyIdVerifier:n,onNeedsRecovery:a,app:this._appApi})}async setRecovery(e){let{wallet:t,...n}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(su(t))throw new Qr({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});ehe({currentRecoveryMethod:t.recovery_method,upgradeToRecoveryMethod:n.recoveryMethod==="icloud-native"?"icloud":n.recoveryMethod}),await this._load(t.chain_type==="solana"?{wallet:t,entropyId:t.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier"});let i=await this._privyInternal.getAccessToken();if(!i)throw Error("User must be logged in to interact with embedded wallets");let s=t.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:t.address,target_recovery_method:n.recoveryMethod,existing_recovery_method:s});try{let o;if(n.recoveryMethod==="user-passcode")o={recoveryMethod:"user-passcode",recoveryPassword:n.password};else if(n.recoveryMethod==="google-drive")o={recoveryMethod:"google-drive",recoveryAccessToken:n.recoveryAccessToken};else if(n.recoveryMethod==="icloud")o={recoveryMethod:"icloud",recoveryAccessToken:n.recoveryAccessToken};else if(n.recoveryMethod==="icloud-native")o={recoveryMethod:"icloud-native",iCloudRecordNameOverride:n.iCloudRecordNameOverride,recoverySecretOverride:n.recoverySecretOverride};else if(n.recoveryMethod==="recovery-encryption-key")o={recoveryMethod:"recovery-encryption-key",recoveryKey:n.recoveryKey};else{if(n.recoveryMethod!=="privy")throw Error(`Unknown recovery method: ${n.recoveryMethod}`);o={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:i,entropyId:t.address,entropyIdVerifier:t.chain_type==="solana"?"solana-address-verifier":"ethereum-address-verifier",...o}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:t.address,target_recovery_method:n.recoveryMethod,existing_recovery_method:s});let{user:a}=await this._privyInternal.refreshSession();return{user:a,provider:t.chain_type!=="ethereum"?null:new n_({account:t,entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(o){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:t.address,recovery_method:t.recovery_method,error:o instanceof Error?o.message:"Unable to recover wallet"}),o}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(t){return console.error(t),!1}}async _load({entropyId:e,entropyIdVerifier:t,wallet:n,recoveryPassword:i,recoveryKey:s,recoveryAccessToken:o,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let c=await this._privyInternal.getAccessToken();if(!c)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:c,entropyId:e,entropyIdVerifier:t}),e}catch(l){if(t4(l))try{if(n.recovery_method==="privy"){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(n.recovery_method==="user-passcode"&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryPassword:i,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(["google-drive","icloud"].includes(n.recovery_method)&&o){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryAccessToken:o,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}if(n.recovery_method==="icloud"&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:"icloud-native"});let u=await this._proxy.recover({accessToken:c,recoverySecretOverride:a,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:"icloud-native"}),u.entropyId}if(n.recovery_method==="recovery-encryption-key"&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:n.address,recovery_method:n.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryKey:s,entropyId:e,entropyIdVerifier:t});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:n.address,recovery_method:n.recovery_method}),u.entropyId}}catch(u){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:n.address,recovery_method:n.recovery_method,error:u instanceof Error?u.message:`Unable to recover wallet: ${e}`}),u}throw l}}constructor(e,t,n,i,s,o){if(this._chains=Array.from(e4),this._privyInternal=e,t&&(this._proxy=new AP(t,s),i.setProxy(this._proxy)),n){let a=nue(n);this._chains=a}this._mfa=i,this._mfaPromises=s,this._appApi=o}},Ahe=class extends Pm{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}};var vy,Ihe=new Uint8Array(16);function PK(){if(!vy&&(vy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!vy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vy(Ihe)}const Che=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function X1(r){return typeof r=="string"&&Che.test(r)}var Di=[];for(var i_=0;i_<256;++i_)Di.push((i_+256).toString(16).substr(1));function Z1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Di[r[e+0]]+Di[r[e+1]]+Di[r[e+2]]+Di[r[e+3]]+"-"+Di[r[e+4]]+Di[r[e+5]]+"-"+Di[r[e+6]]+Di[r[e+7]]+"-"+Di[r[e+8]]+Di[r[e+9]]+"-"+Di[r[e+10]]+Di[r[e+11]]+Di[r[e+12]]+Di[r[e+13]]+Di[r[e+14]]+Di[r[e+15]]).toLowerCase();if(!X1(t))throw TypeError("Stringified UUID is invalid");return t}var RP,s_,o_=0,a_=0;function The(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||RP,o=r.clockseq!==void 0?r.clockseq:s_;if(s==null||o==null){var a=r.random||(r.rng||PK)();s==null&&(s=RP=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=s_=(a[6]<<8|a[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:a_+1,u=c-o_+(l-a_)/1e4;if(u<0&&r.clockseq===void 0&&(o=o+1&16383),(u<0||c>o_)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o_=c,a_=l,s_=o,c+=122192928e5;var f=((c&268435455)*1e4+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;var d=c/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var h=0;h<6;++h)i[n+h]=s[h];return e||Z1(i)}function $K(r){if(!X1(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Rhe(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var khe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ohe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function DK(r,e,t){function n(i,s,o,a){if(typeof i=="string"&&(i=Rhe(i)),typeof s=="string"&&(s=$K(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return Z1(c)}try{n.name=r}catch{}return n.DNS=khe,n.URL=Ohe,n}function Phe(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return $he(Dhe(Mhe(r),r.length*8))}function $he(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function MK(r){return(r+64>>>9<<4)+14+1}function Dhe(r,e){r[e>>5]|=128<<e%32,r[MK(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var a=t,c=n,l=i,u=s;t=os(t,n,i,s,r[o],7,-680876936),s=os(s,t,n,i,r[o+1],12,-389564586),i=os(i,s,t,n,r[o+2],17,606105819),n=os(n,i,s,t,r[o+3],22,-1044525330),t=os(t,n,i,s,r[o+4],7,-176418897),s=os(s,t,n,i,r[o+5],12,1200080426),i=os(i,s,t,n,r[o+6],17,-1473231341),n=os(n,i,s,t,r[o+7],22,-45705983),t=os(t,n,i,s,r[o+8],7,1770035416),s=os(s,t,n,i,r[o+9],12,-1958414417),i=os(i,s,t,n,r[o+10],17,-42063),n=os(n,i,s,t,r[o+11],22,-1990404162),t=os(t,n,i,s,r[o+12],7,1804603682),s=os(s,t,n,i,r[o+13],12,-40341101),i=os(i,s,t,n,r[o+14],17,-1502002290),n=os(n,i,s,t,r[o+15],22,1236535329),t=as(t,n,i,s,r[o+1],5,-165796510),s=as(s,t,n,i,r[o+6],9,-1069501632),i=as(i,s,t,n,r[o+11],14,643717713),n=as(n,i,s,t,r[o],20,-373897302),t=as(t,n,i,s,r[o+5],5,-701558691),s=as(s,t,n,i,r[o+10],9,38016083),i=as(i,s,t,n,r[o+15],14,-660478335),n=as(n,i,s,t,r[o+4],20,-405537848),t=as(t,n,i,s,r[o+9],5,568446438),s=as(s,t,n,i,r[o+14],9,-1019803690),i=as(i,s,t,n,r[o+3],14,-187363961),n=as(n,i,s,t,r[o+8],20,1163531501),t=as(t,n,i,s,r[o+13],5,-1444681467),s=as(s,t,n,i,r[o+2],9,-51403784),i=as(i,s,t,n,r[o+7],14,1735328473),n=as(n,i,s,t,r[o+12],20,-1926607734),t=cs(t,n,i,s,r[o+5],4,-378558),s=cs(s,t,n,i,r[o+8],11,-2022574463),i=cs(i,s,t,n,r[o+11],16,1839030562),n=cs(n,i,s,t,r[o+14],23,-35309556),t=cs(t,n,i,s,r[o+1],4,-1530992060),s=cs(s,t,n,i,r[o+4],11,1272893353),i=cs(i,s,t,n,r[o+7],16,-155497632),n=cs(n,i,s,t,r[o+10],23,-1094730640),t=cs(t,n,i,s,r[o+13],4,681279174),s=cs(s,t,n,i,r[o],11,-358537222),i=cs(i,s,t,n,r[o+3],16,-722521979),n=cs(n,i,s,t,r[o+6],23,76029189),t=cs(t,n,i,s,r[o+9],4,-640364487),s=cs(s,t,n,i,r[o+12],11,-421815835),i=cs(i,s,t,n,r[o+15],16,530742520),n=cs(n,i,s,t,r[o+2],23,-995338651),t=ls(t,n,i,s,r[o],6,-198630844),s=ls(s,t,n,i,r[o+7],10,1126891415),i=ls(i,s,t,n,r[o+14],15,-1416354905),n=ls(n,i,s,t,r[o+5],21,-57434055),t=ls(t,n,i,s,r[o+12],6,1700485571),s=ls(s,t,n,i,r[o+3],10,-1894986606),i=ls(i,s,t,n,r[o+10],15,-1051523),n=ls(n,i,s,t,r[o+1],21,-2054922799),t=ls(t,n,i,s,r[o+8],6,1873313359),s=ls(s,t,n,i,r[o+15],10,-30611744),i=ls(i,s,t,n,r[o+6],15,-1560198380),n=ls(n,i,s,t,r[o+13],21,1309151649),t=ls(t,n,i,s,r[o+4],6,-145523070),s=ls(s,t,n,i,r[o+11],10,-1120210379),i=ls(i,s,t,n,r[o+2],15,718787259),n=ls(n,i,s,t,r[o+9],21,-343485551),t=fu(t,a),n=fu(n,c),i=fu(i,l),s=fu(s,u)}return[t,n,i,s]}function Mhe(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(MK(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function fu(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function Bhe(r,e){return r<<e|r>>>32-e}function Q1(r,e,t,n,i,s){return fu(Bhe(fu(fu(e,r),fu(n,s)),i),t)}function os(r,e,t,n,i,s,o){return Q1(e&t|~e&n,r,e,i,s,o)}function as(r,e,t,n,i,s,o){return Q1(e&n|t&~n,r,e,i,s,o)}function cs(r,e,t,n,i,s,o){return Q1(e^t^n,r,e,i,s,o)}function ls(r,e,t,n,i,s,o){return Q1(t^(e|~n),r,e,i,s,o)}var Nhe=DK("v3",48,Phe);function eC(r,e,t){r=r||{};var n=r.random||(r.rng||PK)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Z1(n)}function Lhe(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function c_(r,e){return r<<e|r>>>32-e}function Fhe(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=r[c*64+u*4]<<24|r[c*64+u*4+1]<<16|r[c*64+u*4+2]<<8|r[c*64+u*4+3];a[c]=l}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=a[f][h];for(var g=16;g<80;++g)d[g]=c_(d[g-3]^d[g-8]^d[g-14]^d[g-16],1);for(var p=t[0],m=t[1],y=t[2],v=t[3],w=t[4],_=0;_<80;++_){var x=Math.floor(_/20),E=c_(p,5)+Lhe(x,m,y,v)+w+e[x]+d[_]>>>0;w=v,v=y,y=c_(m,30)>>>0,m=p,p=E}t[0]=t[0]+p>>>0,t[1]=t[1]+m>>>0,t[2]=t[2]+y>>>0,t[3]=t[3]+v>>>0,t[4]=t[4]+w>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Uhe=DK("v5",80,Fhe);const zhe="00000000-0000-0000-0000-000000000000";function qhe(r){if(!X1(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const jhe=Object.freeze(Object.defineProperty({__proto__:null,NIL:zhe,parse:$K,stringify:Z1,v1:The,v3:Nhe,v4:eC,v5:Uhe,validate:X1,version:qhe},Symbol.toStringTag,{value:"Module"}));/*! js-cookie v3.0.5 | MIT */function by(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var Vhe={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function tC(r,e){function t(i,s,o){if(!(typeof document>"u")){o=by({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=i+"="+r.write(s,i)+a}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var c=s[a].split("="),l=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(o[u]=r.read(l,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,s){t(i,"",by({},s,{expires:-1}))},withAttributes:function(i){return tC(this.converter,by({},this.attributes,i))},withConverter:function(i){return tC(by({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var ao=tC(Vhe,{path:"/"});const kP=Promise.allSettled.bind(Promise)??(r=>Promise.all(r.map(e=>e.then(t=>({status:"fulfilled",value:t})).catch(t=>({status:"rejected",reason:t})))));let Nd="privy:token",l_="privy-token",wy="privy:refresh_token",u_="privy-refresh-token",Ld="privy:id-token",f_="privy-id-token",xy="privy-session",BK=class extends Pm{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getToken(){let e=await this._storage.get(Nd);try{return typeof e=="string"?new z0(e).value:null}catch(t){return console.error(t),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(wy);return typeof e=="string"?e:null}async getIdentityToken(){let e=await this._storage.get(Ld);return typeof e=="string"?e:null}get mightHaveServerCookies(){try{let e=ao.get(xy);return e!==void 0&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,t){return this.mightHaveServerCookies||typeof e=="string"&&typeof t=="string"}tokenIsActive(e){if(!e)return!1;let t=z0.parse(e);return t!==null&&!t.isExpired(30)}async destroyLocalState(e){await kP([this._storage.del(Nd),this._storage.del(wy),this._storage.del(Ld),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),ao.remove(l_),ao.remove(u_),ao.remove(f_),ao.remove(xy),e?.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeToken(e){if(typeof e=="string"){let t=await this._storage.get(Nd);if(await this._storage.put(Nd,e),!this._isUsingServerCookies){let n=z0.parse(e)?.expiration;ao.set(l_,e,{sameSite:"Strict",secure:!0,expires:n?new Date(1e3*n):void 0})}t!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let t=await this._storage.get(Nd);await this._storage.del(Nd),ao.remove(l_),t!==null&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storeRefreshToken(e){typeof e=="string"?(await this._storage.put(wy,e),this._isUsingServerCookies||(ao.set(xy,"t",{sameSite:"Strict",secure:!0,expires:30}),ao.set(u_,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(wy),ao.remove(u_),ao.remove(xy),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let t=(await kP([this.storeToken(e.token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter(n=>n.status==="rejected");t.length>0&&this.emit("error_storing_tokens",t.map(n=>String(n.reason)).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){if(typeof e=="string"){let t=await this._storage.get(Ld);if(await this._storage.put(Ld,e),!this._isUsingServerCookies){let n=z0.parse(e)?.expiration;ao.set(f_,e,{sameSite:"Strict",secure:!0,expires:n?new Date(1e3*n):void 0})}t!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let t=await this._storage.get(Ld);await this._storage.del(Ld),ao.remove(f_),t!==null&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&typeof e=="string")return e;let t=JR(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,t),t}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}};BK.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];var Khe=r=>{let e=new AbortController;return setTimeout(()=>e.abort(),r),e.signal};function Hhe(r){let e=new URLSearchParams;for(let t in r)r[t]!=null&&e.append(t,String(r[t]));return Array.from(e).length?"?"+e.toString():""}const _y=()=>{};let Vl={NONE:Number.NEGATIVE_INFINITY,ERROR:1,WARN:2,INFO:3,DEBUG:Number.POSITIVE_INFINITY};const Whe=({level:r}={level:"ERROR"})=>({get level(){return r},error:Vl[r]>=Vl.ERROR?console.error:_y,warn:Vl[r]>=Vl.WARN?console.warn:_y,info:Vl[r]>=Vl.INFO?console.info:_y,debug:Vl[r]>=Vl.DEBUG?console.debug:_y});let d_="privy:caid",Ghe=class{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new Qr({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:t,query:n}){return`${this.baseUrl}${hce(e.path,t)}${Hhe(n)}`}async fetch(e,{body:t,params:n,query:i,headers:s,onRequest:o=this._beforeRequest.bind(this)}){let a=new Request(this.getPath(e,{params:n,query:i}),{method:e.method,body:JSON.stringify(t),headers:s}),c=await o(a),l=await this._fetch(a,c),u=await l.json();if(l.status>299)throw new Ix(u);return u}async _beforeRequestWithoutInitialize(e){let t=await this.session.getToken(),n=new Headers(e.headers);n.set("privy-app-id",this.appId),this.appClientId&&n.set("privy-client-id",this.appClientId),n.set("privy-client",this._sdkVersion),t&&n.set("Authorization",`Bearer ${t}`),n.set("Content-Type","application/json"),n.set("Accept","application/json");let i=await this._getOrGenerateClientAnalyticsId();return i&&n.set("privy-ca-id",i),this.nativeAppIdentifier&&n.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:Khe(2e4),headers:n,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessToken(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch(Cae,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(d_);if(typeof e=="string"&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=eC()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(!this._analyticsId)return null;try{await this._storage.put(d_,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}async destroyClientAnalyticsId(){try{return await this._storage.del(d_)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,t){try{await this.fetch(Iae,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:t},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch{}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new Qr({code:"storage_error",error:"Unable to access storage"});let t=await this.session.getRefreshToken()??void 0,n=t??"key",i=this._cache.get(n);if(i)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await i;let s=this._refreshSession(t,e);this._cache.set(n,s);try{return await s}finally{this._cache.delete(n)}}async _refreshSession(e,t){let n=await this.session.getToken();if(!this.session.hasRefreshCredentials(n,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new Ix({code:nO.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${rO.path}`);let i=await this.fetch(rO,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),s=i.session_update_action;return this.logger.debug(`[privy:refresh] response: ${s}`),t||this.callbacks?.setUser?.(i.user),s==="set"&&(await this.session.updateWithTokensResponse(i),this.logger.debug("[privy:refresh] tokens stored")),s==="clear"&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),t||this.callbacks?.setUser?.(null)),s==="ignore"&&i.token&&(await this.session.storeToken(i.token),this.logger.debug("[privy:refresh] access token stored"),i.identity_token&&(this.logger.debug("[privy:refresh] identity token stored"),await this.session.storeIdentityToken(i.identity_token))),this.logger.debug("[privy:refresh] returning response"),i}catch(i){throw this.logger.debug(`[privy:refresh] error: ${i.message??"unknown error"}`),i instanceof Ix&&i.code===nO.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),t||this.callbacks?.setUser?.(null)),i}}async getAccessToken(){let[e,t]=await Promise.all([this.session.getToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,t)){let n=await this.refreshSession(),i=await this.session.getToken();return n.token||this.logger.debug("[privy:getAccessToken] expected token received null"),n.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),i===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),n.token??i}return e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${eC()}`,t="blobby";await this._storage.put(e,t);let n=await this._storage.get(e);return await this._storage.del(e),n===t}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.54.2",this._cache=new Map,this.logger=Whe({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new BK({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=p4(globalThis.fetch,{retries:3,retryDelay:t=>3**t*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",t=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:t})})}},Yhe=class{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(Ece,{})}}constructor(e){this._privyInternal=e}};const NK=r=>r.type==="wallet"&&r.wallet_client_type==="privy"&&r.connector_type==="embedded",LK=r=>r?r.linked_accounts.filter(NK).filter(e=>e.chain_type==="ethereum").sort((e,t)=>e.wallet_index-t.wallet_index):[],rC=r=>LK(r).find(e=>e.wallet_index===0)??null,FK=r=>r?r.linked_accounts.filter(NK).filter(e=>e.chain_type==="solana").sort((e,t)=>e.wallet_index-t.wallet_index):[],bb=r=>FK(r).find(e=>e.wallet_index===0)??null,Jhe=(r,e)=>!(e==="off"||LK(r).length>0||r.linked_accounts.filter(t=>t.type==="wallet"&&t.chain_type==="ethereum").length>0&&e!=="all-users"),Xhe=(r,e)=>!(e==="off"||FK(r).length>0||r.linked_accounts.filter(t=>t.type==="wallet"&&t.chain_type==="solana").length>0&&e!=="all-users"),Ma=async(r,e,t)=>{let n=Jhe(e.user,t?.ethereum?.createOnLogin??"off"),i=Xhe(e.user,t?.solana?.createOnLogin??"off");if(n&&i){let s=await r.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await r.createSolana({ethereumAccount:rC(s.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}}return n?{...await r.create({recoveryMethod:"privy",solanaAccount:bb(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:i?{...await r.createSolana({ethereumAccount:rC(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:e};let Zhe=class{async syncWithToken(e,t,n){let i=await this._privyInternal.fetch(Oae,{body:{token:e,mode:n}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await Ma(this._embedded,i,t?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}constructor(e,t){this._privyInternal=e,this._embedded=t}},Qhe=class{async sendCode(e,t){return this._privyInternal.fetch(Qae,{body:{email:e,token:t}})}async loginWithCode(e,t,n,i){let s=await this._privyInternal.fetch(Zae,{body:{email:e,code:t,mode:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ma(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async linkWithCode(e,t){await this._privyInternal.fetch(ece,{body:{email:e,code:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:t,code:n}){await this._privyInternal.fetch(rce,{body:{oldAddress:e,newAddress:t,code:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink(e){await this._privyInternal.fetch(tce,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},epe=class{async initializeAuth({relyingParty:e,redirectUrl:t,token:n}){return await this._privyInternal.fetch(Pae,{body:{relying_party:e,redirect_url:t,token:n}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(Bae,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:t,signature:n,fid:i,mode:s},o){let a=await this._privyInternal.fetch($ae,{body:{channel_token:e,message:t,signature:n,fid:i,mode:s}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ma(this._embedded,a,o?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async link({channel_token:e,message:t,signature:n,fid:i}){await this._privyInternal.fetch(Dae,{body:{channel_token:e,message:t,signature:n,fid:i}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(Mae,{body:{fid:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},tpe=class{async initializeAuth(){return await this._privyInternal.fetch(Nae,{body:{}})}async authenticate({message:e,signature:t,fid:n},i){let s=await this._privyInternal.fetch(Lae,{body:{message:e,signature:t,fid:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ma(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}constructor(e,t){this._privyInternal=e,this._embedded=t}},rpe=class{async create(e){let t=await this._privyInternal.session.getOrCreateGuestCredential(),n=await this._privyInternal.fetch(Fae,{body:{guest_credential:t}});await this._privyInternal.session.updateWithTokensResponse(n);let i=await Ma(this._embedded,n,e?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}constructor(e,t){this._privyInternal=e,this._embedded=t}};const ou="privy:state_code",au="privy:code_verifier";async function npe(r,e){let t=new TextEncoder().encode(r);return new Uint8Array(await e("SHA-256",t))}function ipe(r){return crypto.getRandomValues(new Uint8Array(r))}function m4(){return JR(ipe(36))}function UK(){return m4()}async function zK({codeVerifier:r,method:e="S256",digest:t=crypto.subtle.digest.bind(crypto.subtle)}){if(e!="S256")return r;{let n=await npe(r,t);return JR(n)}}let spe=class{async generateURL(e,t){let n=m4(),i=UK(),s=await zK({codeVerifier:n,digest:this._crypto?.digest});return await Promise.all([this._storage.put(au,n),this._storage.put(ou,i)]),this._privyInternal.fetch(jae,{body:{redirect_to:t,provider:e,code_challenge:s,state_code:i}})}async loginWithCode(e,t,n,i,s,o){let[a,c]=await Promise.all([this._storage.get(au),this._storage.get(ou)]);if(c!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:n,storedStateCode:c??"",returnedStateCode:t??""}),new Qr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let l=await this._privyInternal.fetch(qae,{body:{authorization_code:e,code_type:i,state_code:c,code_verifier:a,mode:s}});await this._privyInternal.session.updateWithTokensResponse(l);let u=await Ma(this._embedded,l,o?.embedded);return await Promise.all([this._storage.del(au),this._storage.del(ou)]),this._privyInternal.callbacks?.setUser?.(u.user),u}async linkWithCode(e,t,n,i){let[s,o]=await Promise.all([this._storage.get(au),this._storage.get(ou)]);if(o!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:n,storedStateCode:o??"",returnedStateCode:t??""}),new Qr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let a=await this._privyInternal.fetch(Vae,{body:{authorization_code:e,code_type:i,state_code:o,code_verifier:s}});await this._privyInternal.session.processOAuthTokens(a.oauth_tokens);let c=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(au),this._storage.del(ou)]),{user:c.user,identity_token:c.identity_token}}async unlink(e,t){await this._privyInternal.fetch(Kae,{body:{provider:e,subject:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,t,n,i){this._privyInternal=e,this._embedded=t,this._storage=n,this._crypto=i}},ope=class{async generateRegistrationOptions(e){return await this._privyInternal.fetch(Xae,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(Yae,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(Jae,{body:{relying_party:e}})}async loginWithPasskey(e,t,n,i){let s=await this._privyInternal.fetch(Wae,{body:{relying_party:n,challenge:t,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ma(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async signupWithPasskey(e,t,n){let i=await this._privyInternal.fetch(Gae,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let s=await Ma(this._embedded,i,n?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}async linkWithPasskey(e,t){await this._privyInternal.fetch(Hae,{body:{relying_party:t,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,t){this._privyInternal=e,this._embedded=t}},ape=class{async sendCode(e,t){return this._privyInternal.fetch(ice,{body:{phoneNumber:e,token:t}})}async loginWithCode(e,t,n,i){let s=await this._privyInternal.fetch(nce,{body:{phoneNumber:e,code:t,mode:n}});await this._privyInternal.session.updateWithTokensResponse(s);let o=await Ma(this._embedded,s,i?.embedded);return this._privyInternal.callbacks?.setUser?.(o.user),o}async linkWithCode(e,t){await this._privyInternal.fetch(sce,{body:{phoneNumber:e,code:t}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:t,code:n}){await this._privyInternal.fetch(ace,{body:{old_phone_number:e,new_phone_number:t,code:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink(e){await this._privyInternal.fetch(oce,{body:{phoneNumber:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}constructor(e,t){this._privyInternal=e,this._embedded=t}},cpe=class{async unlinkWallet(e){await this._privyInternal.fetch(bce,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async linkWithSiwe(e,t,n){let i=t||this._wallet,s=n||this._preparedMessage;if(!i)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!s)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(yce,{body:{message:s,signature:e,chainId:i.chainId,walletClientType:i.walletClientType,connectorType:i.connectorType}});let o=await this._privyInternal.refreshSession();return{user:o.user,identity_token:o.identity_token}}async loginWithSiwe(e,t,n,i,s){let o=t||this._wallet,a=n||this._preparedMessage;if(!o)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!a)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let c=await this._privyInternal.fetch(mce,{body:{signature:e,message:a,chainId:o.chainId,walletClientType:o.walletClientType,connectorType:o.connectorType,mode:i}});await this._privyInternal.session.updateWithTokensResponse(c);let l=await Ma(this._embedded,c,s?.embedded);return this._privyInternal.callbacks?.setUser?.(l.user),l}async init(e,t,n){var i;this._wallet=e;let{nonce:s}=await this._privyInternal.fetch(Jj,{body:{address:e.address}}),o=`${(i={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:t,nonce:s,uri:n}).domain} wants you to sign in with your Ethereum account:
${i.address}

${i.statement}

URI: ${i.uri}
Version: 1
Chain ID: ${i.chainId}
Nonce: ${i.nonce}
Issued At: ${i.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=o,{nonce:s,message:o}}constructor(e,t){this._wallet=void 0,this._privyInternal=e,this._embedded=t}},lpe=class{async unlink({address:e}){await this._privyInternal.fetch(Sce,{body:{address:e}});let t=await this._privyInternal.refreshSession();return{user:t.user,identity_token:t.identity_token}}async link({message:e,signature:t,walletClientType:n,connectorType:i}){await this._privyInternal.fetch(_ce,{body:{message:e,signature:t,walletClientType:n,connectorType:i}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async login({mode:e,message:t,signature:n,walletClientType:i,connectorType:s,opts:o}){let a=await this._privyInternal.fetch(xce,{body:{signature:n,message:t,walletClientType:i,connectorType:s,mode:e}});await this._privyInternal.session.updateWithTokensResponse(a);let c=await Ma(this._embedded,a,o?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async fetchNonce({address:e}){let{nonce:t}=await this._privyInternal.fetch(wce,{body:{address:e}});return{nonce:t}}constructor(e,t){this._privyInternal=e,this._embedded=t}},upe=class{async link(e,t,n){await this._privyInternal.fetch(vce,{body:{message:e,signature:t,smart_wallet_type:n}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var t;let{nonce:n}=await this._privyInternal.fetch(Jj,{body:{address:e.address}});return{nonce:n,message:`${(t={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:n}).domain} wants you to sign in with your Ethereum account:
${t.address}

${t.statement}

URI: ${t.uri}
Version: 1
Chain ID: ${t.chainId}
Nonce: ${t.nonce}
Issued At: ${t.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}},fpe=class{async logout(){try{let e=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(pce,{body:{refresh_token:e}})}catch{console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId()]),this._privyInternal.callbacks?.setUser?.(null)}constructor(e,t,n,i){this._privyInternal=e,this.customProvider=new Zhe(this._privyInternal,t),this.phone=new ape(this._privyInternal,t),this.email=new Qhe(this._privyInternal,t),this.oauth=new spe(this._privyInternal,t,n,i),this.guest=new rpe(this._privyInternal,t),this.siwe=new cpe(this._privyInternal,t),this.siws=new lpe(this._privyInternal,t),this.smartWallet=new upe(this._privyInternal),this.passkey=new ope(this._privyInternal,t),this.farcaster=new epe(this._privyInternal,t),this.farcasterV2=new tpe(this._privyInternal,t)}},dpe=class{async initOnRampSession(e){return await this._privyInternal.fetch(Tae,{body:e})}async getStatus(e){return await this._privyInternal.fetch(Rae,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}};const hpe={prod:{url:"https://api.moonpay.com/v1",key:"pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL"},sandbox:{url:"https://api.moonpay.com/v1",key:"pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI"}};XR.id,U1.id,z1.id,Tm.id,CV.id,RV.id;XR.id,U1.id,ZR.id,z1.id,Tm.id;let ppe=class{async sign(e){return await this._privyInternal.fetch(Ace,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:t}){let{url:n,key:i}=hpe[t?"sandbox":"prod"],s=await p4(fetch,{retries:3,retryDelay:500})(`${n}/transactions/ext/${e}?apiKey=${i}`);if(!s.ok)throw new iue({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:s});let o=await s.json();return Array.isArray(o)?o.at(0):void 0}constructor(e){this._privyInternal=e}},gpe=class{constructor(e){this.moonpay=new ppe(e),this.coinbase=new dpe(e)}},mpe=class{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(Uae,{body:e})}constructor(e){this._privyInternal=e}},ype=class{async sendCode(e){return await this._privyInternal.fetch(zae,{body:e})}constructor(e){this._privyInternal=e}},vpe=class{setProxy(e){this.proxy=e}async getAccessToken(){let e=await this.privyInternal.getAccessToken();if(!e)throw new Qr({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessToken()})}async initEnrollMfa(e){if(!this.proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessToken()})}async submitEnrollMfa(e){if(!this.proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessToken()});return await this.privyInternal.refreshSession(),t}async unenrollMfa(e){if(!this.proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let t=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessToken()});return await this.privyInternal.refreshSession(),t}async clearMfa(e){if(!this.proxy)throw new Qr({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,t){this.proxy=t,this.privyInternal=e,this.sms=new ype(e),this.passkey=new mpe(e)}},bpe=class{async init(e){return this._privyInternal.fetch(fce,{body:{client_type:e}})}async getICloudConfiguration(e){return this._privyInternal.fetch(dce,{body:{client_type:e}})}constructor(e){this._privyInternal=e}},wpe=class{async generateURL(e){let t=m4(),n=UK(),i=await zK({codeVerifier:t,digest:this._crypto?.digest});return await Promise.all([this._storage.put(au,t),this._storage.put(ou,n)]),this._privyInternal.fetch(lce,{body:{redirect_to:e,code_challenge:i,state_code:n}})}async authorize(e,t){let[n,i]=await Promise.all([this._storage.get(au),this._storage.get(ou)]);if(i!==t)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:i??"",returnedStateCode:t??""}),new Qr({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let s=await this._privyInternal.fetch(uce,{body:{authorization_code:e,state_code:i,code_verifier:n}});return await Promise.all([this._storage.del(au),this._storage.del(ou)]),s}constructor(e,t,n){this._privyInternal=e,this._storage=t,this._crypto=n}},xpe=class{async getRecoveryKeyMaterial(e,t){return this._privyInternal.fetch(cce,{body:{chain_type:t},params:{address:e}})}constructor(e,t,n){this._privyInternal=e,this.auth=new wpe(this._privyInternal,t,n),this.icloudAuth=new bpe(this._privyInternal)}},_pe=class{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,t){return this._privyInternal.getPath(e,t)}async fetchPrivyRoute(e,t){return this._privyInternal.fetch(e,t)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...t}){this._privyInternal=new Ghe({...t,appClientId:e}),this.mfa=new vpe(this._privyInternal),this.mfaPromises=new Ahe,this.app=new Ple(this._privyInternal),this.embeddedWallet=new Ehe(this._privyInternal,t.embeddedWalletMessagePoster,t.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new Yhe(this._privyInternal),this.auth=new fpe(this._privyInternal,this.embeddedWallet,t.storage,t.crypto),this.recovery=new xpe(this._privyInternal,t.storage,t.crypto),this.funding=new gpe(this._privyInternal),this.delegated=new jle(this._privyInternal),this.crossApp=new AV(this._privyInternal,t.storage)}};const Spe=(r,e)=>{if(!r)return null;let t=rC(r)??bb(r);return t?Epe(t):null},Epe=r=>{if(r.chain_type==="ethereum")return{entropyId:r.address,entropyIdVerifier:"ethereum-address-verifier"};if(r.chain_type==="solana")return{entropyId:r.address,entropyIdVerifier:"solana-address-verifier"};throw Error("Invalid embedded wallet account type")};class Yh{static unmarshalTransaction(e){const t=typeof e=="string"?$r.unmarshalBase64(e):e;return Nz().decode(t)}static marshalTransaction(e,t){return Bz().encode({messageBytes:e,signatures:t})}static appendSignature(e,t,n){const{messageBytes:i,signatures:s}=this.unmarshalTransaction(e);return this.marshalTransaction(i,{...s,[t]:n})}}class Ape{#e=new v1;#t=bm.defineItem("local:privy_sdk",{init:()=>({})});async get(e){return this.#e.runExclusive(async()=>(await this.#t.getValue())[e])}async put(e,t){return this.#e.runExclusive(async()=>{const n=await this.#t.getValue();n[e]=t,await this.#t.setValue(n)})}async del(e){return this.#e.runExclusive(async()=>{const t=await this.#t.getValue();delete t[e],await this.#t.setValue(t)})}async getKeys(){return this.#e.runExclusive(async()=>{const e=await this.#t.getValue();return Object.keys(e)})}}class Sy{static#e=new v1;static#t=bm.defineItem("local:privy_user",{init:()=>null});static async get(){return this.#e.runExclusive(async()=>this.#t.getValue())}static async set(e){return this.#e.runExclusive(async()=>this.#t.setValue(e))}}class Cp{static#e="cm8pkejey0052l1ljvgxjztau";static#t=["https://auth.privy.io","https://wallet.privy.io","https://api.privy.io"];static#r=new _pe({appId:this.#e,storage:new Ape,clientId:"client-WY5i3gLn3XiKAEXk8hFjvfSJBfBsUXa2cWs6wSbm2qeKZ"});static#n=!1;static async initEmbeddedWallet(){if(this.#n)return;const e=document.createElement("iframe");if(e.src=this.#r.embeddedWallet.getURL(),e.style.display="none",e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.border="none",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),await new Promise(t=>e.onload=t),e.contentWindow){this.#r.setMessagePoster(e.contentWindow);const t=n=>{this.#t.some(s=>s===n.origin)?this.#r.embeddedWallet.onMessage(n.data):console.warn("Rejected message from invalid origin:",n.origin)};window.addEventListener("message",t)}else console.warn("iframe.contentWindow is null - embedded wallet may not work properly");this.#n=!0}static async getAuthenticatedUser(e){if(e)return Sy.get();try{const{user:t}=await this.#r.user.get();return await Sy.set(t),t}catch{return null}}static async login(e){const{url:t}=await this.#r.auth.oauth.generateURL(e,yi.identity.getRedirectURL()),n=await yi.identity.launchWebAuthFlow({url:t,interactive:!0});if(yi.runtime.lastError)throw new Error(yi.runtime.lastError.message);if(!n)throw new Error("OAuth cancelled or failed");const{searchParams:i}=new URL(n),s=i.get("privy_oauth_code")||i.get("code"),o=i.get("privy_oauth_state")||i.get("state");if(!s||!o)throw new Error("Missing authorization code or state");const{user:a}=await this.#r.auth.oauth.loginWithCode(s,o,e);return await Sy.set(a),a}static async findLinkedAccount(e){const t=await this.getAuthenticatedUser(!0);if(!t)throw new Error("User not logged in yet");switch(e){case"google":return t.linked_accounts.find(n=>n.type==="google_oauth");case"apple":return t.linked_accounts.find(n=>n.type==="apple_oauth");case"twitter":return t.linked_accounts.find(n=>n.type==="twitter_oauth");case"discord":return t.linked_accounts.find(n=>n.type==="discord_oauth")}}static async getSolanaWallet(){const e=await this.getAuthenticatedUser(!0);if(!e)throw new Error("User not logged in yet");const t=bb(e);if(t)return t;await this.initEmbeddedWallet();const{user:n}=await this.#r.embeddedWallet.createSolana();await Sy.set(n);const i=bb(n);if(!i)throw new Error("Failed to create Solana wallet");return i}static async sign(e){const t=await this.getAuthenticatedUser(!0);if(!t)throw new Error("User not logged in yet");const n=await this.getSolanaWallet();if(!n)throw new Error("Could not get Solana wallet");const i=Spe(t);if(!i)throw new Error("Could not get entropy details");await this.initEmbeddedWallet();const s=await this.#r.embeddedWallet.getSolanaProvider(n,i.entropyId,i.entropyIdVerifier),{signature:o}=await s.request({method:"signMessage",params:{message:e}});return{signerAddress:n.address,signature:o}}static async signMessage(e){const{signature:t}=await this.sign(e);return t}static async signTransaction(e){const{messageBytes:t,signatures:n}=Yh.unmarshalTransaction(e),{signature:i,signerAddress:s}=await this.sign($r.marshalBase64(t)),o=Yh.marshalTransaction(t,{...n,[s]:$r.unmarshalBase64(i)});return $r.marshalBase64(o)}}var Ipe=le("<div>");const qK=r=>{const e=hi(()=>({queryKey:["prive_provider",r.account.address],queryFn:async()=>{if(r.account.type!=="privy")return null;const n=(await Cp.getAuthenticatedUser(!0))?.linked_accounts.map(i=>i.type);return n?.includes("google_oauth")?"i-tabler:brand-google":n?.includes("apple_oauth")?"i-tabler:brand-apple":n?.includes("twitter_oauth")?"i-tabler:brand-x":n?.includes("discord_oauth")?"i-tabler:brand-discord":null}}));return A(Oe,{get when(){return e.data},children:t=>(()=>{var n=Ipe();return un(n,at(r,{get class(){return gr(t(),r.class)}}),!1,!1),n})()})};var Cpe=le('<svg viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M5.535 7.74707H18.466V17.7866L12.0005 20.75L5.535 17.7866V7.74707ZM6.97178 9.18385V16.8646L12.0005 19.1694L17.0292 16.8646V9.18385H6.97178Z"></path><path fill-rule=evenodd clip-rule=evenodd d="M12.0005 3.43678C10.6415 3.43678 9.48618 4.59769 9.48618 6.0974L9.48616 7.73863H14.5149V6.0974C14.5149 4.59769 13.3595 3.43678 12.0005 3.43678ZM15.9517 8.45701V6.0974C15.9517 3.86476 14.2123 2 12.0005 2C9.78875 2 8.0494 3.86476 8.0494 6.0974L8.04936 8.45661L8.04932 9.17541H15.9517V8.45701Z">');const y4=r=>(()=>{var e=Cpe();return un(e,r,!0,!0),e})();var Tpe=le("<title>"),Rpe=le("<svg><path fill=none stroke-linecap=round></svg>",!1,!0,!1),kpe=le("<svg fill=none role=img xmlns=http://www.w3.org/2000/svg><mask maskUnits=userSpaceOnUse x=0 y=0><rect fill=#FFFFFF></rect></mask><g><rect></rect><rect x=0 y=0></rect><g><rect y=14 width=1.5 height=2 rx=1 stroke=none></rect><rect y=14 width=1.5 height=2 rx=1 stroke=none>"),Ope=le("<svg><path></svg>",!1,!0,!1);const Ppe=r=>{const e=Te(()=>"mask"+jK(r.name)),t=Te(()=>Dpe(r.name,r.colors));return(()=>{var n=kpe(),i=n.firstChild,s=i.firstChild,o=i.nextSibling,a=o.firstChild,c=a.nextSibling,l=c.nextSibling,u=l.firstChild,f=u.nextSibling;return Lr(n,"viewBox","0 0 "+qn+" "+qn),un(n,at({get width(){return r.size},get height(){return r.size}},r),!0,!0),Z(n,A(Oe,{get when(){return r.title},get children(){var d=Tpe();return Z(d,()=>r.name),d}}),i),Lr(i,"width",qn),Lr(i,"height",qn),Lr(s,"width",qn),Lr(s,"height",qn),Lr(a,"width",qn),Lr(a,"height",qn),Lr(c,"width",qn),Lr(c,"height",qn),Z(l,A(Oe,{get when(){return t().isMouthOpen},get fallback(){return(()=>{var d=Ope();return Ge(h=>{var g="M13,"+(19+t().mouthSpread)+" a1,0.75 0 0,0 10,0",p=t().faceColor;return g!==h.e&&Lr(d,"d",h.e=g),p!==h.t&&Lr(d,"fill",h.t=p),h},{e:void 0,t:void 0}),d})()},get children(){var d=Rpe();return Ge(h=>{var g="M15 "+(19+t().mouthSpread)+"c2 1 4 1 6 0",p=t().faceColor;return g!==h.e&&Lr(d,"d",h.e=g),p!==h.t&&Lr(d,"stroke",h.t=p),h},{e:void 0,t:void 0}),d}}),u),Ge(d=>{var h=e(),g=r.square?void 0:qn*2,p=`url(#${e()})`,m=t().backgroundColor,y="translate("+t().wrapperTranslateX+" "+t().wrapperTranslateY+") rotate("+t().wrapperRotate+" "+qn/2+" "+qn/2+") scale("+t().wrapperScale+")",v=t().wrapperColor,w=t().isCircle?qn:qn/6,_="translate("+t().faceTranslateX+" "+t().faceTranslateY+") rotate("+t().faceRotate+" "+qn/2+" "+qn/2+")",x=14-t().eyeSpread,E=t().faceColor,S=20+t().eyeSpread,T=t().faceColor;return h!==d.e&&Lr(i,"id",d.e=h),g!==d.t&&Lr(s,"rx",d.t=g),p!==d.a&&Lr(o,"mask",d.a=p),m!==d.o&&Lr(a,"fill",d.o=m),y!==d.i&&Lr(c,"transform",d.i=y),v!==d.n&&Lr(c,"fill",d.n=v),w!==d.s&&Lr(c,"rx",d.s=w),_!==d.h&&Lr(l,"transform",d.h=_),x!==d.r&&Lr(u,"x",d.r=x),E!==d.d&&Lr(u,"fill",d.d=E),S!==d.l&&Lr(f,"x",d.l=S),T!==d.u&&Lr(f,"fill",d.u=T),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),n})()},jK=r=>{let e=0;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);e=(e<<5)-e+n,e=e&e}return Math.abs(e)},VK=(r,e)=>Math.floor(r/Math.pow(10,e)%10),OP=(r,e)=>!(VK(r,e)%2),Fc=(r,e,t)=>{const n=r%e;return t&&VK(r,t)%2===0?-n:n},PP=(r,e,t)=>e[r%t],$pe=r=>{r.slice(0,1)==="#"&&(r=r.slice(1));const e=parseInt(r.substr(0,2),16),t=parseInt(r.substr(2,2),16),n=parseInt(r.substr(4,2),16);return(e*299+t*587+n*114)/1e3>=128?"#000000":"#FFFFFF"},qn=36;function Dpe(r,e){const t=jK(r),n=e&&e.length,i=PP(t,e,n),s=Fc(t,10,1),o=s<5?s+qn/9:s,a=Fc(t,10,2),c=a<5?a+qn/9:a;return{wrapperColor:i,faceColor:$pe(i),backgroundColor:PP(t+13,e,n),wrapperTranslateX:o,wrapperTranslateY:c,wrapperRotate:Fc(t,360),wrapperScale:1+Fc(t,qn/12)/10,isMouthOpen:OP(t,2),isCircle:OP(t,1),eyeSpread:Fc(t,5),mouthSpread:Fc(t,3),faceRotate:Fc(t,10,3),faceTranslateX:o>qn/6?o/2:Fc(t,8,1),faceTranslateY:c>qn/6?c/2:Fc(t,7,2)}}const Tp=r=>A(Ppe,{get name(){return r.id},colors:["#1F5739","#A4D756","#00A57F","#C7F284"],get class(){return gr("size-8",r.class)}}),Mpe=async r=>{typeof r=="string"?await navigator.clipboard.writeText(r):await navigator.clipboard.write(r)},yd=()=>{const[r,e]=Pe(!1);let t;const n=i=>{t?.(),Mpe(i),e(!0),t=Pf(()=>e(!1),2500,setTimeout)};return mt(()=>{t?.()}),{copyToClipboard:n,showCheckmark:r}},$P=yi,KK=()=>{const{updateUserSettings:r}=xi();return{useStandaloneMode:i=>{const s=i?`${new URL(document.URL).origin}/popup.html#${i}`:document.URL.replace("sidepanel.html","popup.html");window.open(s,"_blank"),window.close()},useSidepanelMode:async()=>{const i=$P.sidebarAction?$P.sidebarAction.open():null,s=(await yi.windows.getCurrent()).id??-1;try{await r({type:"setUiMode",mode:"sidepanel",windowId:s}),i?await i:typeof yi.sidePanel<"u"&&await yi.sidePanel.open({windowId:s}),pc!==Co.WINDOW&&window.close()}catch(o){console.error("[useModeSwitcher] Sidepanel switch failed:",o)}},usePopupMode:async()=>{yi.action.setPopup({popup:"popup.html"});const i=yi.action.openPopup(),s=(await yi.windows.getCurrent()).id??-1;await r({type:"setUiMode",mode:"popup",windowId:s});try{await i}catch{}pc===Co.SIDE_PANEL&&window.close()}}},Fa=r=>{const e=Gn();return()=>{pc===Co.SIDE_PANEL||window.history.length>1?e(-1):e(Qe.HOME)}};var Bpe=le('<nav class="h-[3.25rem] ring-0.5 ring-zinc-700 flex items-center bg-zinc-900">'),Npe=le('<div class="flex items-center gap-2"><div class=font-semibold>Jupiter Wallet'),Lpe=le('<div class="size-4.5 i-tabler:spy text-zinc-400 ml-1 mr--1">'),Fpe=le('<div class="i-tabler:chevron-down size-5 text-zinc-500 group-hover:text-zinc-300 transition-100 ml-1.5">'),Upe=le('<button class="h-full pl-4 pr-3 flex items-center transition-100 group"><div class="font-semibold pl-3">'),zpe=le("<div class=flex-1>"),qpe=le('<button class="cursor-pointer text-zinc-400 hover:text-zinc-50 transition-100 px-3 h-full hover:bg-zinc-800"><div class="i-tabler:search size-5">'),jpe=le('<div class="i-tabler:dots-vertical size-5">'),Vpe=le('<button class="inline-flex items-center gap-1 mt-1 text-xs py-1 px-1.5 bg-zinc-700/50 backdrop-blur rounded ring-1 ring-zinc-700 break-all max-w-[calc(100vw-2rem)] cursor-pointer"><div class=text-left></div><div class="size-4 flex-none">'),Kpe=le("<button>"),DP=le("<div>");const Hpe=()=>{const r=ld(),e=Gn(),t=Fa(),{settings:n}=xi(),{selectedAccount:i,lock:s}=Jr(),{useStandaloneMode:o,useSidepanelMode:a,usePopupMode:c}=KK(),{copyToClipboard:l,showCheckmark:u}=yd(),[f,d]=Pe(!1),h=Te(()=>{if(!(r.pathname===Qe.ONBOARD||r.pathname===Qe.ROOT||r.pathname===Qe.UNLOCK))return i()}),g=Te(()=>r.pathname===Qe.HOME||r.pathname===Qe.RECEIVE||r.pathname===Qe.SEND||r.pathname===Qe.SWAP||r.pathname===Qe.PNL||r.pathname===Qe.SEARCH||r.pathname===Qe.TOKEN_RECLAIM||r.pathname.startsWith(Qe.SETTINGS)||r.pathname.startsWith(Qe.ADDRESS_BOOK)||r.pathname.startsWith(Qe.ACCOUNTS)||r.pathname.startsWith(Qe.ASSETS(""))),p=y=>{y.stopImmediatePropagation();const v=h();v&&l(v.address)},m=Te(()=>[{title:"Settings",icon:"i-tabler:settings",onClick:()=>{e(Qe.SETTINGS)}},n.uiMode==="popup"?{title:"Side Panel Mode",icon:"i-tabler:layout-sidebar-right",onClick:()=>a()}:{title:"Popup Mode",icon:"i-tabler:picture-in-picture-top",onClick:()=>c()},{title:"Expand View",icon:"i-tabler:arrows-diagonal",onClick:()=>o()},{title:"Jupiter Sync",icon:"i-tabler:device-mobile-bolt",onClick:()=>{o(`${Qe.ONBOARD}?type=jupiter-sync`)}},{title:"Lock Wallet",icon:"i-tabler:lock-password",onClick:()=>{s()}}]);return(()=>{var y=Bpe();return Z(y,A(Oe,{get when(){return h()},get fallback(){return(()=>{var v=Npe(),w=v.firstChild;return Z(v,A(Sp,{class:"size-7 rounded-full"}),w),v})()},children:v=>[(()=>{var w=Upe(),_=w.firstChild;return w.$$click=()=>g()?r.pathname.startsWith(Qe.ACCOUNTS)?t():e(Qe.ACCOUNTS):null,Z(w,A(Tp,{get id(){return v().address},class:"size-6.5"}),_),Z(_,()=>v().label),Z(w,A(Im,{get content(){return(()=>{var x=Vpe(),E=x.firstChild,S=E.nextSibling;return x.$$click=T=>p(T),Z(E,()=>v().address),Ge(T=>nr(S,{"i-tabler:copy-check-filled":u(),"i-tabler:copy":!u()},T)),x})()},get trigger(){return(()=>{var x=Kpe();return x.$$click=E=>p(E),Ge(()=>tn(x,gr("size-4 transition-100 cursor-pointer ml-1",{"text-zinc-50":f(),"text-zinc-400":!f(),"i-tabler:copy-check-filled":u(),"i-tabler:copy":!u()}))),x})()},onOpenChange:x=>d(x)}),null),Z(w,A(Kt,{get children(){return[A(Re,{get when(){return v().type==="readonly"},get children(){return Lpe()}}),A(Re,{get when(){return v().type==="ledger"},get children(){return A(zR,{class:"size-4 fill-zinc-400 ml-1.5"})}}),A(Re,{get when(){return v().type==="keystone"},get children(){return A(UR,{class:"size-5 fill-zinc-400 ml-1 mr--1"})}}),A(Re,{get when(){return v().type==="trezor"},get children(){return A(y4,{class:"size-5 fill-zinc-400 ml-1 mr--1"})}}),A(Re,{get when(){return v().type==="privy"},get children(){return A(qK,{class:"size-4 text-zinc-400 ml-1 mr--1",get account(){return v()}})}})]}}),null),Z(w,A(Oe,{get when(){return g()},get children(){return Fpe()}}),null),Ge(x=>nr(w,{"cursor-pointer hover:bg-zinc-800 hover:text-zinc-100":g()},x)),w})(),zpe(),(()=>{var w=qpe();return w.$$click=()=>r.pathname===Qe.SEARCH?t():e(Qe.SEARCH),Ge(()=>w.classList.toggle("hidden",!g())),w})(),A(Tn.Root,{get children(){return[A(Tn.Trigger,{class:"cursor-pointer text-zinc-400 hover:text-zinc-50 transition-100 px-3 h-full hover:bg-zinc-800",get classList(){return{hidden:!g()}},get disabled(){return!g()},get children(){return jpe()}}),A(Tn.Portal,{get children(){return A(Tn.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700",get children(){return A(pt,{get each(){return m()},children:({title:w,icon:_,onClick:x})=>A(Tn.Item,{as:"button",class:"cursor-pointer flex items-center gap-3 p-3 hover:bg-zinc-800 rounded w-full",onClick:x,get children(){return[(()=>{var E=DP();return Ge(()=>tn(E,gr(_,"size-5"))),E})(),(()=>{var E=DP();return Z(E,w),E})()]}})})}})}})]}})]})),y})()};At(["click"]);var Wpe=le('<div class="flex flex-col">');const Gpe=r=>{const e=ld(),{isReady:t}=Jr(),n=Te(()=>e.pathname.startsWith(Qe.ONBOARD)||e.pathname===Qe.UNLOCK);return[A(cq,{get isVisible(){return!t()}}),A(Oe,{get when(){return!n()},get children(){return A(Hpe,{})}}),(()=>{var i=Wpe();return Z(i,()=>r.children),Ge(s=>nr(i,{"min-h-100%":n(),"min-h-[calc(100%-3.25rem)] ring-0.5 ring-zinc-700":!n()},s)),i})(),A(Oe,{get when(){return!1},get children(){return A(_ae,{})}})]};var Ype=le('<div class="i-tabler:x size-5">'),Jpe=le('<div class="flex items-center justify-between border-b border-zinc-700 p-4">'),Xpe=le('<div class="text-zinc-400 leading-5">On the next screen, your private key and seed phrase will be revealed.'),Zpe=le('<div class="bg-zinc-950 ring-1 ring-zinc-800 p-4 rounded-md text-zinc-300 space-y-5">'),Qpe=le('<form><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-md p-3 bg-zinc-800 transition-100"placeholder="Confirm password to continue"type=password id=password-input name=password-input><div class="mt-3 flex justify-between gap-3"><button class="flex-1 cursor-pointer p-2.5 rounded-md bg-zinc-800 font-semibold active:bg-zinc-800/75 transition-100"type=reset>Cancel</button><button class="flex-1 cursor-pointer p-2.5 rounded-md bg-red-500 font-semibold active:bg-red-700 transition-100"type=submit>Reveal'),e0e=le('<div class="fixed inset-0 flex items-center justify-center">'),t0e=le('<div class="flex items-center gap-3"><div class="flex-none size-6 i-tabler:alert-triangle text-red-500"></div><div class=leading-5>');const MP="password-input",r0e=r=>{const e=ci(),[t,n]=Pe(!0);async function i(o){o.preventDefault();const c=new FormData(o.target).get(MP)?.toString().trim()||"";if(!(!c||!r.address))try{const l=await qt.export({password:c,address:r.address});r.onConfirm(l),n(!1)}catch{e.alert({title:"Incorrect Password",content:"The password you entered is incorrect."})}}function s(o){o||r.onExit()}return mr(()=>document.getElementById(MP)?.focus()),A(ti,{get open(){return t()},onOpenChange:s,get children(){return A(ti.Portal,{get children(){return[A(ti.Overlay,{class:"fixed inset-0 backdrop-blur"}),(()=>{var o=e0e();return Z(o,A(ti.Content,{class:"bg-zinc-900 rounded-md max-w-95vw w-md ring-1 ring-zinc-700",get children(){return[(()=>{var a=Jpe();return Z(a,A(ti.Title,{class:"font-semibold",get children(){return r.title??"Confirm Password"}}),null),Z(a,A(ti.CloseButton,{class:"cursor-pointer bg-zinc-900 hover:bg-zinc-950 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return Ype()}}),null),a})(),A(ti.Description,{class:"p-4 space-y-4",get children(){return[Xpe(),(()=>{var a=Zpe();return Z(a,A(pt,{each:["Anyone with your keys will have complete control of your wallet","Never share your keys with any app or website","Jupiter will never ask you for your keys"],children:c=>(()=>{var l=t0e(),u=l.firstChild,f=u.nextSibling;return Z(f,c),l})()})),a})(),(()=>{var a=Qpe(),c=a.firstChild,l=c.nextSibling,u=l.firstChild;return a.addEventListener("submit",f=>i(f)),u.$$click=()=>r.onExit(),a})()]}})]}})),o})()]}})}})};At(["click"]);var n0e=le('<div><button class="flex items-center gap-2 h-6 cursor-pointer group transition-100"><div class="text-zinc-500 group-hover:text-zinc-200 flex items-center justify-center transition-100"><div class="i-tabler:arrow-left size-5"></div></div><div class="font-semibold text-zinc-200">');const ui=r=>{const e=Fa();return(()=>{var t=n0e(),n=t.firstChild,i=n.firstChild,s=i.nextSibling;return n.$$click=()=>{r.onBack?r.onBack():e()},Z(s,()=>r.title),t})()};At(["click"]);var i0e=le('<div class="p-3 h-48 bg-zinc-900 rounded-xl">'),s0e=le('<div class="p-4 space-y-4"><div class="flex items-center gap-2"><div class="text-zinc-400 text-sm bg-zinc-900 rounded-md h-6 px-1.5 flex items-center">'),o0e=le('<div class=space-y-3><div><div class=text-zinc-400>Address</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all"></div></div><div><div class=text-zinc-400>Private Key (Base 58)</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all"></div></div><div><div class=text-zinc-400>Private Key (Base 64)</div><div class="bg-zinc-900 py-3 px-4 rounded-xl whitespace-pre-wrap break-all select-all">'),a0e=le('<div><div class="flex items-center justify-between"><div class=text-zinc-400>Seed Phrase</div><div class="text-sm text-zinc-400"></div></div><div class="bg-zinc-900 p-3 rounded-xl whitespace-pre-wrap select-all">');const c0e=()=>{const r=m1(),e=Fa(),{accounts:t}=Jr(),n=Te(()=>t().find(o=>o.address===r.address)),[i,s]=Pe();return[A(r0e,{title:"Export Key/Seed",get address(){return n()?.address},onConfirm:o=>s(o),onExit:e}),(()=>{var o=s0e(),a=o.firstChild,c=a.firstChild;return Z(a,A(ui,{title:"Export Key/Seed"}),c),Z(c,()=>n()?.label),Z(o,A(Kt,{get children(){return[A(Re,{get when(){return!i()},get children(){return i0e()}}),A(Re,{get when(){return i()},keyed:!0,children:l=>(()=>{var u=o0e(),f=u.firstChild,d=f.firstChild,h=d.nextSibling,g=f.nextSibling,p=g.firstChild,m=p.nextSibling,y=g.nextSibling,v=y.firstChild,w=v.nextSibling;return Z(h,()=>n()?.address),Z(m,()=>$r.marshalBase58($r.unmarshalBase64(l.privateKey))),Z(w,()=>l.privateKey),Z(u,A(Oe,{get when(){return l.type==="mnemonic"&&l},keyed:!0,children:_=>(()=>{var x=a0e(),E=x.firstChild,S=E.firstChild,T=S.nextSibling,C=E.nextSibling;return Z(T,()=>_.path),Z(C,()=>_.mnemonic),x})()}),null),u})()})]}}),null),o})()]};var l0e=le('<div><div class="w-full h-14.5"></div><div class="fixed bottom-0 left-0 w-full flex justify-center z-1"><div class="flex items-center gap-4 grid grid-cols-2 font-semibold w-full max-w-md border-t border-zinc-700 bg-zinc-950 p-4"><button class="p-2.25 bg-zinc-800 rounded-xl cursor-pointer text-zinc-300 active:bg-zinc-800/75 transition-100"type=reset></button><button class="p-2.25 rounded-xl transition-100"type=submit>');const _i=r=>(()=>{var e=l0e(),t=e.firstChild,n=t.nextSibling,i=n.firstChild,s=i.firstChild,o=s.nextSibling;return s.$$click=()=>r.onCancelClick(),Z(s,()=>r.cancelTitle??"Cancel"),o.$$click=()=>r.onApproveClick(),Z(o,()=>r.approveTitle??"Approve"),Ge(a=>{var c={"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":!r.isApproveDisabled,"cursor-not-allowed bg-zinc-900 text-zinc-500":r.isApproveDisabled},l=r.isApproveDisabled;return a.e=nr(o,c,a.e),l!==a.t&&(o.disabled=a.t=l),a},{e:void 0,t:void 0}),e})();At(["click"]);var u0e=le('<button class="inline-flex items-center gap-1 mt-0.5 text-xs py-1 px-1.5 bg-zinc-700/50 backdrop-blur rounded ring-1 ring-zinc-700 break-all max-w-[calc(100vw-2rem)] cursor-pointer"><div class=text-left></div><div class="size-4 flex-none">'),f0e=le("<span>");const Gi=r=>{const{copyToClipboard:e,showCheckmark:t}=yd();function n(i){i.stopImmediatePropagation(),e(r.address)}return A(Im,{get content(){return(()=>{var i=u0e(),s=i.firstChild,o=s.nextSibling;return i.$$click=a=>n(a),Z(s,()=>r.address),Ge(a=>nr(o,{"i-tabler:copy-check-filled":t(),"i-tabler:copy":!t()},a)),i})()},get trigger(){return(()=>{var i=f0e(),s=i.firstChild;return un(i,r,!1,!0),Z(i,()=>r.address.slice(0,5),s),Z(i,()=>r.address.slice(-5),null),i})()}})};At(["click"]);var d0e=le('<div class="p-4 space-y-4"><div class="flex items-center gap-2"><div class="text-zinc-400 text-sm bg-zinc-900 rounded-md h-6 px-1.5 flex items-center"></div></div><div class="space-y-3 rounded"><div class=text-zinc-400><label>Current Name</label><div class="bg-zinc-900/80 rounded-xl py-3 px-4 cursor-not-allowed"></div></div><form><div class="flex flex-col text-zinc-400"><label for=wallet-name-input>New Name</label><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-xl py-3 px-4 bg-zinc-900 transition-100 text-zinc-50"placeholder="eg. Trading, Savings, Investments"id=wallet-name-input name=wallet-name-input maxlength=16>');const BP="wallet-name-input",h0e=()=>{const r=m1(),e=Fa(),{updateUserSettings:t}=xi(),{refresh:n,accounts:i}=Jr(),s=Te(()=>i().find(a=>a.address===r.address));async function o(a,c){a.preventDefault();const u=new FormData(a.target).get(BP)?.toString().trim()||"";!u||!c||(await t({type:"setAccountLabel",address:c,label:u}),await n(),e())}return mr(()=>document.getElementById(BP)?.focus()),(()=>{var a=d0e(),c=a.firstChild,l=c.firstChild,u=c.nextSibling,f=u.firstChild,d=f.firstChild,h=d.nextSibling,g=f.nextSibling,p=g.firstChild,m=p.firstChild;return m.nextSibling,Z(c,A(ui,{title:"Rename Wallet"}),l),Z(l,A(Gi,{get address(){return s()?.address??""}})),Z(h,()=>s()?.label),g.addEventListener("submit",y=>o(y,s()?.address)),Z(g,A(_i,{onCancelClick:e,onApproveClick:()=>{},approveTitle:"Rename"}),null),a})()};var ew=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},dg=r=>{let e=new ew(r.getBoundingClientRect());const{transform:t}=getComputedStyle(r);return t&&(e=p0e(e,t)),e},p0e=(r,e)=>{let t,n;if(e.startsWith("matrix3d(")){const i=e.slice(9,-1).split(/, /);t=+i[12],n=+i[13]}else if(e.startsWith("matrix(")){const i=e.slice(7,-1).split(/, /);t=+i[4],n=+i[5]}else t=0,n=0;return new ew({...r,x:r.x-t,y:r.y-n})},Aa=()=>({x:0,y:0}),v4=(r,e)=>r.x===e.x&&r.y===e.y,h_=(r,e)=>new ew({...r,x:r.x+e.x,y:r.y+e.y}),g0e=(r,e)=>Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2)),m0e=(r,e)=>{const t=Math.max(r.top,e.top),n=Math.max(r.left,e.left),i=Math.min(r.right,e.right),s=Math.min(r.bottom,e.bottom),o=i-n,a=s-t;if(n<i&&t<s){const c=r.width*r.height,l=e.width*e.height,u=o*a;return u/(c+l-u)}return 0},p_=(r,e)=>r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height,HK=(r,e,t)=>{const n=r.transformed.center,i={distance:1/0,droppable:null};for(const s of e){const o=g0e(n,s.layout.center);o<i.distance?(i.distance=o,i.droppable=s):o===i.distance&&s.id===t.activeDroppableId&&(i.droppable=s)}return i.droppable},y0e=(r,e,t)=>{const n=r.transformed,i={ratio:0,droppable:null};for(const s of e){const o=m0e(n,s.layout);o>i.ratio?(i.ratio=o,i.droppable=s):o>0&&o===i.ratio&&s.id===t.activeDroppableId&&(i.droppable=s)}return i.droppable},WK=fn(),GK=r=>{const e=at({collisionDetector:y0e},r),[t,n]=ud({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),i=(b,I,B)=>{b.substring(0,b.length-1),Sr(()=>t[b][I])&&n(b,I,"transformers",B.id,B)},s=(b,I,B)=>{b.substring(0,b.length-1),Sr(()=>t[b][I])&&Sr(()=>t[b][I].transformers[B])&&n(b,I,"transformers",B,void 0)},o=({id:b,node:I,layout:B,data:F})=>{const z=t.draggables[b],G={id:b,node:I,layout:B,data:F,_pendingCleanup:!1};let Q;if(!z)Object.defineProperties(G,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return Aa();const X=Object.values(t.draggables[b].transformers);return X.sort((O,R)=>O.order-R.order),X.reduce((O,R)=>R.callback(O),Aa())}},transformed:{enumerable:!0,configurable:!0,get:()=>h_(t.draggables[b].layout,t.draggables[b].transform)}});else if(t.active.draggableId===b&&!t.active.overlay){const X={x:z.layout.x-B.x,y:z.layout.y-B.y},O="addDraggable-existing-offset",R=z.transformers[O],M=R?R.callback(X):X;Q={id:O,order:100,callback:k=>({x:k.x+M.x,y:k.y+M.y})},V(()=>s("draggables",b,O))}In(()=>{n("draggables",b,G),Q&&i("draggables",b,Q)}),t.active.draggable&&_()},a=b=>{Sr(()=>t.draggables[b])&&(n("draggables",b,"_pendingCleanup",!0),queueMicrotask(()=>c(b)))},c=b=>{if(t.draggables[b]?._pendingCleanup){const I=t.active.draggableId===b;In(()=>{I&&n("active","draggableId",null),n("draggables",b,void 0)})}},l=({id:b,node:I,layout:B,data:F})=>{const z=t.droppables[b],G={id:b,node:I,layout:B,data:F,_pendingCleanup:!1};z||Object.defineProperties(G,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const Q=Object.values(t.droppables[b].transformers);return Q.sort((X,O)=>X.order-O.order),Q.reduce((X,O)=>O.callback(X),Aa())}},transformed:{enumerable:!0,configurable:!0,get:()=>h_(t.droppables[b].layout,t.droppables[b].transform)}}),n("droppables",b,G),t.active.draggable&&_()},u=b=>{Sr(()=>t.droppables[b])&&(n("droppables",b,"_pendingCleanup",!0),queueMicrotask(()=>f(b)))},f=b=>{if(t.droppables[b]?._pendingCleanup){const I=t.active.droppableId===b;In(()=>{I&&n("active","droppableId",null),n("droppables",b,void 0)})}},d=({id:b,activators:I})=>{n("sensors",b,{id:b,activators:I,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[b].coordinates.current.x-t.sensors[b].coordinates.origin.x,y:t.sensors[b].coordinates.current.y-t.sensors[b].coordinates.origin.y}}}})},h=b=>{if(!Sr(()=>t.sensors[b]))return;const I=t.active.sensorId===b;In(()=>{I&&n("active","sensorId",null),n("sensors",b,void 0)})},g=({node:b,layout:I})=>{const B=t.active.overlay,F={node:b,layout:I};B||Object.defineProperties(F,{id:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>t.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([z])=>z!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const z=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return z.sort((G,Q)=>G.order-Q.order),z.reduce((G,Q)=>Q.callback(G),Aa())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?h_(t.active.overlay.layout,t.active.overlay.transform):new ew({x:0,y:0,width:0,height:0})}}),n("active","overlay",F)},p=()=>n("active","overlay",null),m=(b,I)=>{In(()=>{n("sensors",b,"coordinates",{origin:{...I},current:{...I}}),n("active","sensorId",b)})},y=b=>{const I=t.active.sensorId;I&&n("sensors",I,"coordinates","current",{...b})},v=()=>n("active","sensorId",null),w=(b,I)=>{const B={};for(const z of Object.values(t.sensors))if(z)for(const[G,Q]of Object.entries(z.activators))B[G]??=[],B[G].push({sensor:z,activator:Q});const F={};for(const z in B){let G=z;I&&(G=`on${z}`),F[G]=Q=>{for(const{activator:X}of B[z]){if(t.active.sensor)break;X(Q,b)}}}return F},_=()=>{let b=!1;const I=Object.values(t.draggables),B=Object.values(t.droppables),F=t.active.overlay;return In(()=>{const z=new WeakMap;for(const G of I)if(G){const Q=G.layout;z.has(G.node)||z.set(G.node,dg(G.node));const X=z.get(G.node);p_(Q,X)||(n("draggables",G.id,"layout",X),b=!0)}for(const G of B)if(G){const Q=G.layout;z.has(G.node)||z.set(G.node,dg(G.node));const X=z.get(G.node);p_(Q,X)||(n("droppables",G.id,"layout",X),b=!0)}if(F){const G=F.layout,Q=dg(F.node);p_(G,Q)||(n("active","overlay","layout",Q),b=!0)}}),b},x=()=>{const b=t.active.overlay??t.active.draggable;if(b){const I=e.collisionDetector(b,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),B=I?I.id:null;t.active.droppableId!==B&&n("active","droppableId",B)}},E=b=>{const I={id:"sensorMove",order:0,callback:B=>t.active.sensor?{x:B.x+t.active.sensor.coordinates.delta.x,y:B.y+t.active.sensor.coordinates.delta.y}:B};_(),In(()=>{n("active","draggableId",b),i("draggables",b,I)}),x()},S=()=>{const b=Sr(()=>t.active.draggableId);In(()=>{b!==null&&s("draggables",b,"sensorMove"),n("active",["draggableId","droppableId"],null)}),_()},T=b=>{ot(()=>{const I=t.active.draggable;I&&Sr(()=>b({draggable:I}))})},C=b=>{ot(()=>{const I=t.active.draggable;if(I){const B=Sr(()=>t.active.overlay);Object.values(B?B.transform:I.transform),Sr(()=>b({draggable:I,overlay:B}))}})},P=b=>{ot(()=>{const I=t.active.draggable,B=t.active.droppable;I&&Sr(()=>b({draggable:I,droppable:B,overlay:t.active.overlay}))})},V=b=>{ot(({previousDraggable:I,previousDroppable:B,previousOverlay:F})=>{const z=t.active.draggable,G=z?t.active.droppable:null,Q=z?t.active.overlay:null;return!z&&I&&Sr(()=>b({draggable:I,droppable:B,overlay:F})),{previousDraggable:z,previousDroppable:G,previousOverlay:Q}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};C(()=>x()),e.onDragStart&&T(e.onDragStart),e.onDragMove&&C(e.onDragMove),e.onDragOver&&P(e.onDragOver),e.onDragEnd&&V(e.onDragEnd);const D=[t,{addTransformer:i,removeTransformer:s,addDraggable:o,removeDraggable:a,addDroppable:l,removeDroppable:u,addSensor:d,removeSensor:h,setOverlay:g,clearOverlay:p,recomputeLayouts:_,detectCollisions:x,draggableActivators:w,sensorStart:m,sensorMove:y,sensorEnd:v,dragStart:E,dragEnd:S,onDragStart:T,onDragMove:C,onDragOver:P,onDragEnd:V}];return A(WK.Provider,{value:D,get children(){return e.children}})},vd=()=>rn(WK)||null,v0e=(r="pointer-sensor")=>{const[e,{addSensor:t,removeSensor:n,sensorStart:i,sensorMove:s,sensorEnd:o,dragStart:a,dragEnd:c}]=vd(),l=250,u=10;mr(()=>{t({id:r,activators:{pointerdown:p}})}),mt(()=>{n(r)});const f=()=>e.active.sensorId===r,d={x:0,y:0};let h=null,g=null;const p=(x,E)=>{x.button===0&&(document.addEventListener("pointermove",v),document.addEventListener("pointerup",w),g=E,d.x=x.clientX,d.y=x.clientY,h=window.setTimeout(y,l))},m=()=>{h&&(clearTimeout(h),h=null),document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",w),document.removeEventListener("selectionchange",_)},y=()=>{e.active.sensor?f()||m():(i(r,d),a(g),_(),document.addEventListener("selectionchange",_))},v=x=>{const E={x:x.clientX,y:x.clientY};if(!e.active.sensor){const S={x:E.x-d.x,y:E.y-d.y};Math.sqrt(S.x**2+S.y**2)>u&&y()}f()&&(x.preventDefault(),s(E))},w=x=>{m(),f()&&(x.preventDefault(),c(),o())},_=()=>{window.getSelection()?.removeAllRanges()}},YK=r=>(v0e(),kr(()=>r.children)),$m=r=>({transform:`translate3d(${r.x}px, ${r.y}px, 0)`}),b0e=(r,e={})=>{const[t,{addDraggable:n,removeDraggable:i,draggableActivators:s}]=vd(),[o,a]=Pe(null);mr(()=>{const f=o();f&&n({id:r,node:f,layout:dg(f),data:e})}),mt(()=>i(r));const c=()=>t.active.draggableId===r,l=()=>t.draggables[r]?.transform||Aa();return Object.defineProperties((f,d)=>{const h=d?d():{};ot(()=>{const g=o(),p=s(r);if(g)for(const m in p)g.addEventListener(m,p[m]);mt(()=>{if(g)for(const m in p)g.removeEventListener(m,p[m])})}),a(f),h.skipTransform||ot(()=>{const g=l();if(v4(g,Aa()))f.style.removeProperty("transform");else{const p=$m(l());f.style.setProperty("transform",p.transform??null)}})},{ref:{enumerable:!0,value:a},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>s(r,!0)},transform:{enumerable:!0,get:l}})},w0e=(r,e={})=>{const[t,{addDroppable:n,removeDroppable:i}]=vd(),[s,o]=Pe(null);mr(()=>{const u=s();u&&n({id:r,node:u,layout:dg(u),data:e})}),mt(()=>i(r));const a=()=>t.active.droppableId===r,c=()=>t.droppables[r]?.transform||Aa();return Object.defineProperties((u,f)=>{const d=f?f():{};o(u),d.skipTransform||ot(()=>{const h=c();if(v4(h,Aa()))u.style.removeProperty("transform");else{const g=$m(c());u.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:o},isActiveDroppable:{enumerable:!0,get:a},transform:{enumerable:!0,get:c}})},x0e=(r,e,t)=>{const n=r.slice();return n.splice(t,0,...n.splice(e,1)),n},JK=fn(),XK=r=>{const[e]=vd(),[t,n]=ud({initialIds:[],sortedIds:[]}),i=a=>a>=0&&a<t.initialIds.length;ot(()=>{n("initialIds",[...r.ids]),n("sortedIds",[...r.ids])}),ot(()=>{e.active.draggableId&&e.active.droppableId?Sr(()=>{const a=t.sortedIds.indexOf(e.active.draggableId),c=t.initialIds.indexOf(e.active.droppableId);if(!i(a)||!i(c))n("sortedIds",[...r.ids]);else if(a!==c){const l=x0e(t.sortedIds,a,c);n("sortedIds",l)}}):n("sortedIds",[...r.ids])});const o=[t,{}];return A(JK.Provider,{value:o,get children(){return r.children}})},_0e=()=>rn(JK)||null,S0e=(r,e)=>t=>{r(t),e(t)},ZK=(r,e={})=>{const[t,{addTransformer:n,removeTransformer:i}]=vd(),[s]=_0e(),o=b0e(r,e),a=w0e(r,e),c=S0e(o.ref,a.ref),l=()=>s.initialIds.indexOf(r),u=()=>s.sortedIds.indexOf(r),f=m=>t.droppables[m]?.layout||null,d=()=>{const m=Aa(),y=l(),v=u();if(v!==y){const w=f(r),_=f(s.initialIds[v]);w&&_&&(m.x=_.x-w.x,m.y=_.y-w.y)}return m},h={id:"sortableOffset",order:100,callback:m=>{const y=d();return{x:m.x+y.x,y:m.y+y.y}}};mr(()=>n("droppables",r,h)),mt(()=>i("droppables",r,h.id));const g=()=>(r===t.active.draggableId&&!t.active.overlay?t.draggables[r]?.transform:t.droppables[r]?.transform)||Aa();return Object.defineProperties(m=>{o(m,()=>({skipTransform:!0})),a(m,()=>({skipTransform:!0})),ot(()=>{const y=g();if(v4(y,Aa()))m.style.removeProperty("transform");else{const v=$m(g());m.style.setProperty("transform",v.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>o.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>o.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>a.isActiveDroppable}})},E0e=le('<div class="i-tabler:dots-vertical size-5">'),NP=le("<div>");const A0e=r=>{const e=Gn(),{updateUserSettings:t}=xi(),{accounts:n,refresh:i}=Jr(),{openExplorer:s}=Al(),o=ci(),a=Te(()=>[{title:"Rename Wallet",icon:"i-tabler:edit",onClick:()=>{e(Qe.ACCOUNTS_RENAME(r.account.address))}},{title:"Export Key/Seed",icon:"i-tabler:key",onClick:()=>{e(Qe.ACCOUNTS_KEY(r.account.address))},isHidden:r.account.type!=="standalone"&&r.account.type!=="mnemonic"},{title:"View on Explorer",icon:"i-tabler:external-link",onClick:()=>{s({type:"address",value:r.account.address})}},{title:"Delete Wallet",icon:"i-tabler:trash-x",onClick:()=>{o.confirm({title:"Confirm Delete Wallet",content:"Are you sure you want to delete this wallet? This action cannot be undone. Make sure you have a suitable backup of your seed phrase or private key before proceeding!",confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{await t({type:"deleteAccount",address:r.account.address}),await i()}})},isHidden:n().length===1}]);return A(Tn.Root,{get children(){return[A(Tn.Trigger,{class:"cursor-pointer px-4 h-full text-zinc-500 hover:text-zinc-100 transition-100",onClick:c=>{c.stopImmediatePropagation()},get children(){return E0e()}}),A(Tn.Portal,{get children(){return A(Tn.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700",get children(){return A(pt,{get each(){return a()},children:({title:c,icon:l,onClick:u,isHidden:f})=>A(Oe,{when:!f,get children(){return A(Tn.Item,{as:"button",class:"cursor-pointer flex items-center gap-3 p-3 hover:bg-zinc-800 rounded w-full",classList:{"text-red-500":c==="Delete Wallet"},onClick:d=>{d.stopImmediatePropagation(),u()},get children(){return[(()=>{var d=NP();return Ge(()=>tn(d,gr(l,"size-5"))),d})(),(()=>{var d=NP();return Z(d,c),d})()]}})}})})}})}})]}})};var I0e=le('<div class="absolute top-16 left-0 w-fit bg-zinc-800 ring-1 ring-zinc-600 rounded-md py-2 px-3 text-sm flex items-center gap-2 cursor-auto"><div class="absolute -top-2.5 left-6 size-0 border-l-10 border-r-10 border-b-10 border-l-transparent border-r-transparent border-b-zinc-600"></div><div class="absolute -top-2 left-6 size-0 border-l-10 border-r-10 border-b-10 border-l-transparent border-r-transparent border-b-zinc-800"></div><span class=text-zinc-200>Drag the wallet icon to reorder the wallet</span><button type=button class="i-tabler:x size-4 text-zinc-500 hover:text-zinc-50 cursor-pointer transition-100 shrink-0">');const C0e=r=>(()=>{var e=I0e(),t=e.firstChild,n=t.nextSibling,i=n.nextSibling,s=i.nextSibling;return s.$$click=o=>{o.stopPropagation(),r.onDismiss()},e})();At(["click"]);var T0e=le('<div class="size-4.5 i-tabler:spy text-zinc-400 ml-1">'),R0e=le('<div><button class="group relative cursor-move px-4 h-full flex items-center text-zinc-50 transition-100"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 i-tabler:arrows-move size-6 opacity-0 group-hover:opacity-100 transition-100"></div></button><div class=text-left><div class="flex items-center"><div class=font-semibold></div></div><button class="flex-1 flex gap-1 text-sm justify-center items-center cursor-pointer transition-100 text-zinc-400 hover:text-zinc-100"><div class=size-4></div></button></div><div class=flex-1>');const k0e=r=>{const e=Gn(),{updateUserSettings:t}=xi(),{selectedAccount:n}=Jr(),i=ZK(r.account.address),[s]=vd()??[],{copyToClipboard:o,showCheckmark:a}=yd();async function c(u){n()?.address!==u&&(await t({type:"setSelectedAccount",address:u}),e(Qe.HOME))}function l(u,f){u.stopImmediatePropagation(),o(f)}return(()=>{var u=R0e(),f=u.firstChild,d=f.firstChild,h=f.nextSibling,g=h.firstChild,p=g.firstChild,m=g.nextSibling,y=m.firstChild;h.nextSibling,u.$$click=()=>{c(r.account.address)};var v=i.ref;return typeof v=="function"?cd(v,u):i.ref=u,f.$$click=w=>{w.stopPropagation()},un(f,at(()=>i.dragActivators),!1,!0),Z(f,A(Tp,{get id(){return r.account.address},class:"size-9 transition-100 group-hover:opacity-25"}),d),Z(p,()=>r.account.label),Z(g,A(Kt,{get children(){return[A(Re,{get when(){return r.account.type==="readonly"},get children(){return T0e()}}),A(Re,{get when(){return r.account.type==="ledger"},get children(){return A(zR,{class:"size-4 fill-zinc-400 ml-1.5"})}}),A(Re,{get when(){return r.account.type==="keystone"},get children(){return A(UR,{class:"size-5 fill-zinc-400 ml-1"})}}),A(Re,{get when(){return r.account.type==="trezor"},get children(){return A(y4,{class:"size-5 fill-zinc-400 ml-1"})}}),A(Re,{get when(){return r.account.type==="privy"},get children(){return A(qK,{class:"size-4 text-zinc-400 ml-1",get account(){return r.account}})}})]}}),null),m.$$click=w=>l(w,r.account.address),Z(m,A(Gi,{get address(){return r.account.address}}),y),Z(u,A(A0e,{get account(){return r.account}}),null),Z(u,A(Oe,{get when(){return r.showSortingTip},get children(){return A(C0e,{get onDismiss(){return r.onDismissSortingTip}})}}),null),Ge(w=>{var _=gr("group relative cursor-pointer w-full h-17 bg-zinc-900 rounded-xl flex items-center",{"ring-1 ring-primary-200":n()?.address===r.account.address,"bg-zinc-800 duration-0 z-1":i.isActiveDraggable,"transition-transform":!!s?.active.draggable,"transition-100 hover:bg-zinc-800/75":!s?.active.draggable,"z-2":r.showSortingTip&&!s?.active.draggable}),x=$m(i.transform),E={"i-tabler:copy-check-filled":a(),"i-tabler:copy":!a()};return _!==w.e&&tn(u,w.e=_),w.t=p1(u,x,w.t),w.a=nr(y,E,w.a),w},{e:void 0,t:void 0,a:void 0}),u})()};At(["click"]);var O0e=le('<div class="space-y-2 pb-2">');const LP=bm.defineItem("local:sorting_tip_dismissed",{fallback:!1}),P0e=()=>{const{accounts:r,updateAccountsOrder:e}=Jr(),t=Te(()=>r().map(c=>c.address)),[n,i]=Pe(!1);mr(async()=>{const c=await LP.getValue();i(!c)});function s(){i(!1),LP.setValue(!0)}return A(GK,{onDragStart:()=>{n()&&s()},onDragEnd:({draggable:c,droppable:l})=>{if(c&&l){const u=t(),f=u.indexOf(c.id.toString()),d=u.indexOf(l.id.toString());if(f!==d){const h=u.slice();h.splice(d,0,...h.splice(f,1)),e(h)}}},collisionDetector:HK,get children(){return[A(YK,{}),A(XK,{get ids(){return t()},get children(){var c=O0e();return Z(c,A(pt,{get each(){return r()},children:(l,u)=>A(k0e,{account:l,get showSortingTip(){return kr(()=>u()===0)()&&n()},onDismissSortingTip:()=>s()})})),c}})]}})};var $0e=le('<div class="relative flex flex-col flex-1"><div class=p-4></div><div class="absolute bottom-0 left-0 border-t border-zinc-700 bg-zinc-950 p-4 w-full"><button class="relative h-10 cursor-pointer w-full rounded-xl bg-zinc-800 text-zinc-300 font-semibold active:bg-zinc-800/75 transition-100 group"><div>Add New Wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:plus size-5.5 group-hover:rotate-90 transition-200">');const D0e=()=>{function r(){window.open(`/popup.html#${Qe.ONBOARD}`,"_blank")}return(()=>{var e=$0e(),t=e.firstChild,n=t.nextSibling,i=n.firstChild;return Z(t,A(ui,{title:"Manage Wallets"})),Z(e,A(bp,{class:"h-[calc(100vh-11.3rem)] overflow-auto px-4 pt-0.3",gradientClass:"from-zinc-950/0 to-zinc-950",get children(){return A(P0e,{})}}),n),i.$$click=r,e})()};At(["click"]);const Rp=()=>hi(()=>({queryKey:["contacts"],queryFn:async()=>{const[e,t]=await Promise.all([qt.listSavedContacts(),qt.listRecentContacts()]);return{saved:e.contacts,recent:t.contacts}},staleTime:1e3}));var M0e=le('<div class="i-tabler:dots-vertical size-5">'),FP=le("<div>");const B0e=r=>{const e=Gn(),[t]=Na(),n=Te(()=>t.tab||"saved"),{openExplorer:i}=Al(),s=ci(),o=Rp(),a=Te(()=>[{title:"View on Explorer",icon:"i-tabler:external-link",onClick:()=>{i({type:"address",value:r.account.address})}},{title:"Edit Address",icon:"i-tabler:edit",onClick:()=>{e(`${Qe.ADDRESS_BOOK_SAVE}?type=edit&address=${r.account.address}&label=${r.account.label}`)},isHidden:n()==="my-wallets"||n()==="recent"},{title:"Save Address",icon:"i-tabler:bookmark-plus",onClick:()=>{e(`${Qe.ADDRESS_BOOK_SAVE}?type=new&address=${r.account.address}`)},isHidden:n()==="my-wallets"||n()==="saved"},{title:"Delete Address",icon:"i-tabler:trash-x",onClick:()=>{s.confirm({title:"Confirm Delete Address",content:"Are you sure you want to delete this address from the address book? This action cannot be undone.",confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{n()==="recent"?await qt.deleteRecentContact({address:r.account.address}):n()==="saved"&&await qt.deleteSavedContact({address:r.account.address}),o.refetch()}})},isHidden:n()==="my-wallets"}]);return A(Tn.Root,{get children(){return[A(Tn.Trigger,{class:"cursor-pointer px-4 h-full text-zinc-500 hover:text-zinc-100 transition-100",onClick:c=>{c.stopImmediatePropagation()},get children(){return M0e()}}),A(Tn.Portal,{get children(){return A(Tn.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700",get children(){return A(pt,{get each(){return a()},children:({title:c,icon:l,onClick:u,isHidden:f})=>A(Oe,{when:!f,get children(){return A(Tn.Item,{as:"button",class:"cursor-pointer flex items-center gap-3 p-3 hover:bg-zinc-800 rounded w-full",classList:{"text-red-500":c==="Delete Address"},onClick:d=>{d.stopImmediatePropagation(),u()},get children(){return[(()=>{var d=FP();return Ge(()=>tn(d,gr(l,"size-5"))),d})(),(()=>{var d=FP();return Z(d,c),d})()]}})}})})}})}})]}})};var N0e=le('<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 i-tabler:arrows-move size-6 opacity-0 group-hover:opacity-100 transition-100">'),L0e=le('<div><button></button><div class=text-left><div class="flex items-center"></div><button class="flex-1 flex gap-1 text-sm justify-center items-center cursor-pointer transition-100 text-zinc-400 hover:text-zinc-100"><div class=size-4></div></button></div><div class=flex-1>'),F0e=le('<div class="font-semibold text-zinc-400">Unknown'),U0e=le("<div class=font-semibold>");const z0e=r=>{const e=Gn(),[t]=Na(),n=ZK(r.account.address),[i]=vd()??[],{copyToClipboard:s,showCheckmark:o}=yd();function a(l){const u=new URLSearchParams;u.set("recipient",l),t.amount&&u.set("amount",t.amount),t.mint&&u.set("mint",t.mint),e(`${Qe.SEND}?${u}`)}function c(l,u){l.stopImmediatePropagation(),s(u)}return(()=>{var l=L0e(),u=l.firstChild,f=u.nextSibling,d=f.firstChild,h=d.nextSibling,g=h.firstChild;f.nextSibling,l.$$click=()=>{a(r.account.address)};var p=n.ref;return typeof p=="function"?cd(p,l):n.ref=l,u.$$click=m=>{m.stopPropagation()},un(u,at({get class(){return gr("group relative px-4 h-full flex items-center text-zinc-50 transition-100",{"cursor-move":r.sortable,"cursor-pointer":!r.sortable})}},()=>r.sortable?n.dragActivators:{}),!1,!0),Z(u,A(Tp,{get id(){return r.account.address},get class(){return gr("size-9 transition-100",{"group-hover:opacity-25":r.sortable})}}),null),Z(u,A(Oe,{get when(){return r.sortable},get children(){return N0e()}}),null),Z(d,A(Oe,{get when(){return r.account.label},get fallback(){return F0e()},children:m=>(()=>{var y=U0e();return Z(y,m),y})()})),h.$$click=m=>c(m,r.account.address),Z(h,A(Gi,{get address(){return r.account.address}}),g),Z(l,A(B0e,{get account(){return r.account}}),null),Ge(m=>{var y=gr("group relative cursor-pointer w-full h-17 bg-zinc-900 rounded-xl flex items-center",{"bg-zinc-800 duration-0 z-10":r.sortable&&n.isActiveDraggable,"transition-transform":r.sortable&&!!i?.active.draggable,"transition-100 hover:bg-zinc-800/75":!i?.active.draggable}),v=$m(n.transform),w={"i-tabler:copy-check-filled":o(),"i-tabler:copy":!o()};return y!==m.e&&tn(l,m.e=y),m.t=p1(l,v,m.t),m.a=nr(g,w,m.a),m},{e:void 0,t:void 0,a:void 0}),l})()};At(["click"]);var q0e=le('<div class="space-y-2 p-4">');const b4=r=>{const e=Rp(),t=Te(()=>r.accounts.map(i=>i.address));return A(GK,{onDragEnd:({draggable:i,droppable:s})=>{if(i&&s){const o=t(),a=o.indexOf(i.id.toString()),c=o.indexOf(s.id.toString());if(a!==c){const l=o.slice();l.splice(c,0,...l.splice(a,1)),qt.reorderSavedContacts({addresses:l}).then(()=>e.refetch())}}},collisionDetector:HK,get children(){return[A(YK,{}),A(XK,{get ids(){return t()},get children(){var i=q0e();return Z(i,A(pt,{get each(){return r.accounts},children:s=>A(z0e,{account:s,get sortable(){return r.sortable}})})),i}})]}})};var j0e=le('<div><div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more addresses');const V0e=()=>{const{accounts:r}=Jr();return(()=>{var e=j0e(),t=e.firstChild;return Z(e,A(b4,{get accounts(){return r()},sortable:!1}),t),e})()};var K0e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100 group"><div>Save New Address</div><div class="absolute i-tabler:plus size-5 right-3 top-1/2 -translate-y-1/2 group-hover:rotate-90 transition-200">'),H0e=le('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-4 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="size-7 text-zinc-400"></div></div></div><div class="font-medium mb-2"></div><div class="text-sm text-zinc-400 text-center leading-4"></div><div class="mt-8 w-full space-y-2">');const QK=r=>{const e=Gn(),t=Te(()=>"No addresses yet"),n=Te(()=>r.type==="recent"?"Addresses you recently sent to will appear here":r.type==="saved"?"Addresses you save will appear here":"Your wallets will appear here");return(()=>{var i=H0e(),s=i.firstChild,o=s.firstChild,a=o.firstChild,c=s.nextSibling,l=c.nextSibling,u=l.nextSibling;return Z(c,t),Z(l,n),Z(u,A(Oe,{get when(){return r.type==="saved"},get children(){var f=K0e();return f.$$click=()=>e(`${Qe.ADDRESS_BOOK_SAVE}?type=new`),f}})),Ge(f=>nr(a,{"i-tabler:clock-hour-4":r.type==="recent","i-tabler:bookmark":r.type==="saved","i-tabler:wallet":r.type==="my-wallets"},f)),i})()};At(["click"]);var W0e=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more addresses'),G0e=le("<div>");const Y0e=()=>{const r=Rp();return(()=>{var e=G0e();return Z(e,A(Kt,{get children(){return[A(Re,{get when(){return r.data?.recent.length===0},get children(){return A(QK,{type:"recent"})}}),A(Re,{get when(){return(r.data?.recent.length??0)>0&&r.data?.recent},children:t=>A(b4,{get accounts(){return t()},sortable:!1})})]}}),null),Z(e,A(Oe,{get when(){return(r.data?.recent.length??0)>0},get children(){return W0e()}}),null),e})()};var J0e=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more addresses'),X0e=le('<div class="relative flex flex-col flex-1">'),Z0e=le('<div class><div class="fixed bottom-0 left-0 w-full flex justify-center z-1"><div class="flex items-center gap-4 grid grid-cols-1 font-semibold w-full max-w-md border-t border-zinc-700 bg-zinc-950 p-4"><button class="relative p-2.25 bg-zinc-800 rounded-xl cursor-pointer text-zinc-300 active:bg-zinc-800/75 transition-100 group"><div>Save New Address</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:plus size-5.5 group-hover:rotate-90 transition-200">');const Q0e=()=>{const r=Rp(),e=Gn();return(()=>{var t=X0e();return Z(t,A(Kt,{get children(){return[A(Re,{get when(){return r.data?.saved.length===0},get children(){return A(QK,{type:"saved"})}}),A(Re,{get when(){return(r.data?.saved.length??0)>0&&r.data?.saved},children:n=>(()=>{var i=Z0e(),s=i.firstChild,o=s.firstChild,a=o.firstChild;return Z(i,A(b4,{get accounts(){return n()},sortable:!0}),s),a.$$click=()=>e(`${Qe.ADDRESS_BOOK_SAVE}?type=new`),i})()})]}}),null),Z(t,A(Oe,{get when(){return(r.data?.saved.length??0)>0},get children(){return J0e()}}),null),t})()};At(["click"]);var ege=le('<div class=bg-zinc-950><div class="p-4 space-y-4"></div><div class="mx-0.1 sticky top-0 z-10 border-b border-zinc-800 h-12 flex items-center mt--2"><div class="flex items-center px-3 gap-2">'),tge=le('<div class="cursor-pointer text-center font-medium px-2 min-w-18 transition-100 h-12 flex items-center justify-center border-t-4 border-t-transparent">');const rge=[{label:"Saved",value:"saved"},{label:"Recent",value:"recent"},{label:"My Wallets",value:"my-wallets"}],nge=()=>{const[r,e]=Na(),t=Te(()=>r.tab||"saved");function n(i){t()!==i&&(e({tab:i},{replace:!0}),window.scrollTo(0,0))}return(()=>{var i=ege(),s=i.firstChild,o=s.nextSibling,a=o.firstChild;return Z(s,A(ui,{title:"Address Book"})),Z(a,A(pt,{each:rge,children:({label:c,value:l})=>(()=>{var u=tge();return u.$$click=()=>n(l),Z(u,c),Ge(f=>nr(u,{"border-b-2 border-b-primary-200":t()===l,"text-zinc-500 hover:text-zinc-300 border-b-2 border-b-transparent":t()!==l},f)),u})()})),Z(i,A(Kt,{get children(){return[A(Re,{get when(){return t()==="saved"},get children(){return A(Q0e,{})}}),A(Re,{get when(){return t()==="recent"},get children(){return A(Y0e,{})}}),A(Re,{get when(){return t()==="my-wallets"},get children(){return A(V0e,{})}})]}}),null),i})()};At(["click"]);class UP extends Error{response;request;options;constructor(e,t,n){const i=e.status||e.status===0?e.status:"",s=e.statusText||"",o=`${i} ${s}`.trim(),a=o?`status code ${o}`:"an unknown error";super(`Request failed with ${a}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=n}}let eH=class extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}};const zP=(()=>{let r=!1,e=!1;const t=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(t&&n)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type")}catch(i){if(i instanceof Error&&i.message==="unsupported BodyInit type")return!1;throw i}return r&&!e})(),ige=typeof globalThis.AbortController=="function",sge=typeof globalThis.ReadableStream=="function",oge=typeof globalThis.FormData=="function",tH=["get","post","put","patch","head","delete"],age={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},g_=2147483647,cge=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,rH=Symbol("stop"),lge={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},uge={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},fge=r=>{if(!r)return 0;if(r instanceof FormData){let e=0;for(const[t,n]of r)e+=cge,e+=new TextEncoder().encode(`Content-Disposition: form-data; name="${t}"`).length,e+=typeof n=="string"?new TextEncoder().encode(n).length:n.size;return e}if(r instanceof Blob)return r.size;if(r instanceof ArrayBuffer)return r.byteLength;if(typeof r=="string")return new TextEncoder().encode(r).length;if(r instanceof URLSearchParams)return new TextEncoder().encode(r.toString()).length;if("byteLength"in r)return r.byteLength;if(typeof r=="object"&&r!==null)try{const e=JSON.stringify(r);return new TextEncoder().encode(e).length}catch{return 0}return 0},dge=(r,e)=>{const t=Number(r.headers.get("content-length"))||0;let n=0;return r.status===204?(e&&e({percent:1,totalBytes:t,transferredBytes:n},new Uint8Array),new Response(null,{status:r.status,statusText:r.statusText,headers:r.headers})):new Response(new ReadableStream({async start(i){const s=r.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:t},new Uint8Array);async function o(){const{done:a,value:c}=await s.read();if(a){i.close();return}if(e){n+=c.byteLength;const l=t===0?0:n/t;e({percent:l,transferredBytes:n,totalBytes:t},c)}i.enqueue(c),await o()}await o()}}),{status:r.status,statusText:r.statusText,headers:r.headers})},hge=(r,e)=>{const t=fge(r.body);let n=0;return new Request(r,{duplex:"half",body:new ReadableStream({async start(i){const s=r.body instanceof ReadableStream?r.body.getReader():new Response("").body.getReader();async function o(){const{done:a,value:c}=await s.read();if(a){e&&e({percent:1,transferredBytes:n,totalBytes:Math.max(t,n)},new Uint8Array),i.close();return}n+=c.byteLength;let l=t===0?0:n/t;(t<n||l===1)&&(l=.99),e&&e({percent:Number(l.toFixed(2)),transferredBytes:n,totalBytes:t},c),i.enqueue(c),await o()}await o()}})})},V0=r=>r!==null&&typeof r=="object",Ey=(...r)=>{for(const e of r)if((!V0(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return w4({},...r)},nH=(r={},e={})=>{const t=new globalThis.Headers(r),n=e instanceof globalThis.Headers,i=new globalThis.Headers(e);for(const[s,o]of i.entries())n&&o==="undefined"||o===void 0?t.delete(s):t.set(s,o);return t};function Ay(r,e,t){return Object.hasOwn(e,t)&&e[t]===void 0?[]:w4(r[t]??[],e[t]??[])}const iH=(r={},e={})=>({beforeRequest:Ay(r,e,"beforeRequest"),beforeRetry:Ay(r,e,"beforeRetry"),afterResponse:Ay(r,e,"afterResponse"),beforeError:Ay(r,e,"beforeError")}),w4=(...r)=>{let e={},t={},n={};for(const i of r)if(Array.isArray(i))Array.isArray(e)||(e=[]),e=[...e,...i];else if(V0(i)){for(let[s,o]of Object.entries(i))V0(o)&&s in e&&(o=w4(e[s],o)),e={...e,[s]:o};V0(i.hooks)&&(n=iH(n,i.hooks),e.hooks=n),V0(i.headers)&&(t=nH(t,i.headers),e.headers=t)}return e},pge=r=>tH.includes(r)?r.toUpperCase():r,gge=["get","put","head","delete","options","trace"],mge=[408,413,429,500,502,503,504],yge=[413,429,503],qP={limit:2,methods:gge,statusCodes:mge,afterStatusCodes:yge,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:r=>.3*2**(r-1)*1e3},vge=(r={})=>{if(typeof r=="number")return{...qP,limit:r};if(r.methods&&!Array.isArray(r.methods))throw new Error("retry.methods must be an array");if(r.statusCodes&&!Array.isArray(r.statusCodes))throw new Error("retry.statusCodes must be an array");return{...qP,...r}};async function bge(r,e,t,n){return new Promise((i,s)=>{const o=setTimeout(()=>{t&&t.abort(),s(new eH(r))},n.timeout);n.fetch(r,e).then(i).catch(s).then(()=>{clearTimeout(o)})})}async function wge(r,{signal:e}){return new Promise((t,n)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",i,{once:!0}));function i(){clearTimeout(s),n(e.reason)}const s=setTimeout(()=>{e?.removeEventListener("abort",i),t()},r)})}const xge=(r,e)=>{const t={};for(const n in e)!(n in uge)&&!(n in lge)&&!(n in r)&&(t[n]=e[n]);return t};class wb{static create(e,t){const n=new wb(e,t),i=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>g_)throw new RangeError(`The \`timeout\` option cannot be greater than ${g_}`);await Promise.resolve();let a=await n._fetch();for(const c of n._options.hooks.afterResponse){const l=await c(n.request,n._options,n._decorateResponse(a.clone()));l instanceof globalThis.Response&&(a=l)}if(n._decorateResponse(a),!a.ok&&n._options.throwHttpErrors){let c=new UP(a,n.request,n._options);for(const l of n._options.hooks.beforeError)c=await l(c);throw c}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!sge)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return dge(a.clone(),n._options.onDownloadProgress)}return a},o=(n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(i):i()).finally(async()=>{n.request.bodyUsed||await n.request.body?.cancel()});for(const[a,c]of Object.entries(age))o[a]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||c);const l=await o;if(a==="json"){if(l.status===204||(await l.clone().arrayBuffer()).byteLength===0)return"";if(t.parseJson)return t.parseJson(await l.text())}return l[a]()};return o}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:nH(this._input.headers,t.headers),hooks:iH({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:pge(t.method??this._input.method??"GET"),prefixUrl:String(t.prefixUrl||""),retry:vge(t.retry),throwHttpErrors:t.throwHttpErrors!==!1,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(ige){const n=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=n?AbortSignal.any([n,this.abortController.signal]):this.abortController.signal}if(zP&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),s=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(oge&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(s,{...this.request}),this._options)}if(this._options.onUploadProgress){if(typeof this._options.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!zP)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=hge(this.request,this._options.onUploadProgress))}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof eH)throw e;if(e instanceof UP){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const n=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(n&&this._options.retry.afterStatusCodes.includes(e.response.status)){let i=Number(n)*1e3;Number.isNaN(i)?i=Date.parse(n)-Date.now():i>=Date.parse("2024-01-01")&&(i-=Date.now());const s=this._options.retry.maxRetryAfter??i;return i<s?i:s}if(e.response.status===413)throw e}const t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const n=Math.min(this._calculateRetryDelay(t),g_);if(this._retryCount<1)throw t;await wge(n,{signal:this._options.signal});for(const i of this._options.hooks.beforeRetry)if(await i({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===rH)return;return this._retry(e)}}async _fetch(){for(const n of this._options.hooks.beforeRequest){const i=await n(this.request,this._options);if(i instanceof Request){this.request=i;break}if(i instanceof Response)return i}const e=xge(this.request,this._options),t=this.request;return this.request=t.clone(),this._options.timeout===!1?this._options.fetch(t,e):bge(t,e,this.abortController,this._options)}}/*! MIT License  Sindre Sorhus */const nC=r=>{const e=(t,n)=>wb.create(t,Ey(r,n));for(const t of tH)e[t]=(n,i)=>wb.create(n,Ey(r,i,{method:t}));return e.create=t=>nC(Ey(t)),e.extend=t=>(typeof t=="function"&&(t=t(r??{})),nC(Ey(r,t))),e.stop=rH,e},an=nC();class ws{static#e="https://wallet-api.jup.ag";static async simulateTransaction(e){return an.post(`${this.#e}/v1/simulate`,{json:e}).json()}static async getAddressesExistence(e){return an.get(`${this.#e}/v1/existence`,{searchParams:{addresses:e.join(",")}}).json()}static async getHoldings(e){return an.get(`${this.#e}/v2/portfolio/holdings/${e}`,{searchParams:{include:"reclaimableLamports"}}).json()}static async getNfts({address:e,page:t=1,limit:n=30}){return an.get(`${this.#e}/v2/portfolio/nft/${e}`,{searchParams:{page:t,limit:n}}).json()}static async getPositions(e){return an.get(`${this.#e}/v2/portfolio/positions/${e}`).json()}static async getTransactions(e,t){return an.get(`${this.#e}/v1/transactions/${e}`,{searchParams:t?{before:t}:{}}).json()}static async scanSite(e){return an.get(`${this.#e}/v1/scan/site/${encodeURIComponent(e)}`).json()}static async getTransferTx(e){return an.get(`${this.#e}/v3/transfer`,{searchParams:e,throwHttpErrors:!1}).json()}static async postExecuteTransfer(e){return an.post(`${this.#e}/v3/transfer`,{json:e}).json()}static async postMetrics(e,t){return an.post(`${this.#e}/v1/metrics`,{json:t,headers:{"x-user-id":e}}).json()}static async getOverallPnl(e){return an.get(`${this.#e}/v1/pnl/${e}`).json()}static async getPnlPositions(e,t){return an.get(`${this.#e}/v1/pnl/${e}/positions`,{searchParams:t}).json()}static async getPnlPosition(e,t){return an.get(`${this.#e}/v1/pnl/${e}/positions/${t}`).json()}static async getPnlActivity(e,t){return an.get(`${this.#e}/v1/pnl/${e}/activity/${t}`).json()}static async postBroadcast(e,t){return an.post(`${this.#e}/v1/broadcast`,{json:{tx:e,network:t}}).json()}}const jP=[],Cs=()=>{const{selectedAccount:r}=Jr(),e=Te(()=>r()?.address),t=hi(()=>({queryKey:["portfolio-holdings",e()],queryFn:async()=>{const n=`portfolio-holdings:${e()}`;if(!jP.includes(n)){jP.push(n);const{value:s}=await qt.getPopupCache({key:n});if(s&&Array.isArray(s.tokens))return requestAnimationFrame(()=>t.refetch()),s}const i=await ws.getHoldings(e());return await qt.setPopupCache({key:n,value:i}),i},enabled:!!e(),staleTime:3e4,refetchInterval:3e4}));return t};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rc=BigInt(0),Rs=BigInt(1),m_=BigInt(2),_ge=BigInt(8),Sge={zip215:!0};function Ege(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),o=r.add(r.mul(e.a,i),s),a=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(o,a)}function Age(r,e={}){const{Fp:t,Fn:n}=wV("edwards",r,e),{h:i,n:s}=r;Cm(e,{},{uvRatio:"function"});const o=m_<<BigInt(n.BYTES*8)-Rs,a=p=>t.create(p),c=e.uvRatio||((p,m)=>{try{return{isValid:!0,value:t.sqrt(t.div(p,m))}}catch{return{isValid:!1,value:rc}}});if(!Ege(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function l(p,m,y=!1){const v=y?Rs:rc;return hh("coordinate "+p,m,v,o),m}function u(p){if(!(p instanceof h))throw new Error("ExtendedPoint expected")}const f=lb((p,m)=>{const{ex:y,ey:v,ez:w}=p,_=p.is0();m==null&&(m=_?_ge:t.inv(w));const x=a(y*m),E=a(v*m),S=a(w*m);if(_)return{x:rc,y:Rs};if(S!==Rs)throw new Error("invZ was invalid");return{x,y:E}}),d=lb(p=>{const{a:m,d:y}=r;if(p.is0())throw new Error("bad point: ZERO");const{ex:v,ey:w,ez:_,et:x}=p,E=a(v*v),S=a(w*w),T=a(_*_),C=a(T*T),P=a(E*m),V=a(T*a(P+S)),L=a(C+a(y*a(E*S)));if(V!==L)throw new Error("bad point: equation left != right (1)");const D=a(v*w),b=a(_*x);if(D!==b)throw new Error("bad point: equation left != right (2)");return!0});class h{constructor(m,y,v,w){this.ex=l("x",m),this.ey=l("y",y),this.ez=l("z",v,!0),this.et=l("t",w),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof h)throw new Error("extended point not allowed");const{x:y,y:v}=m||{};return l("x",y),l("y",v),new h(y,v,Rs,a(y*v))}static normalizeZ(m){return gV(h,"ez",m)}static msm(m,y){return bV(h,n,m,y)}_setWindowSize(m){this.precompute(m)}precompute(m=8,y=!0){return g.setWindowSize(this,m),y||this.multiply(m_),this}assertValidity(){d(this)}equals(m){u(m);const{ex:y,ey:v,ez:w}=this,{ex:_,ey:x,ez:E}=m,S=a(y*E),T=a(_*w),C=a(v*E),P=a(x*w);return S===T&&C===P}is0(){return this.equals(h.ZERO)}negate(){return new h(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:m}=r,{ex:y,ey:v,ez:w}=this,_=a(y*y),x=a(v*v),E=a(m_*a(w*w)),S=a(m*_),T=y+v,C=a(a(T*T)-_-x),P=S+x,V=P-E,L=S-x,D=a(C*V),b=a(P*L),I=a(C*L),B=a(V*P);return new h(D,b,B,I)}add(m){u(m);const{a:y,d:v}=r,{ex:w,ey:_,ez:x,et:E}=this,{ex:S,ey:T,ez:C,et:P}=m,V=a(w*S),L=a(_*T),D=a(E*v*P),b=a(x*C),I=a((w+_)*(S+T)-V-L),B=b-D,F=b+D,z=a(L-y*V),G=a(I*B),Q=a(F*z),X=a(I*z),O=a(B*F);return new h(G,Q,O,X)}subtract(m){return this.add(m.negate())}multiply(m){const y=m;hh("scalar",y,Rs,s);const{p:v,f:w}=g.wNAFCached(this,y,h.normalizeZ);return h.normalizeZ([v,w])[0]}multiplyUnsafe(m,y=h.ZERO){const v=m;return hh("scalar",v,rc,s),v===rc?h.ZERO:this.is0()||v===Rs?this:g.wNAFCachedUnsafe(this,v,h.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return g.wNAFCachedUnsafe(this,s).is0()}toAffine(m){return f(this,m)}clearCofactor(){return i===Rs?this:this.multiplyUnsafe(i)}static fromBytes(m,y=!1){return $o(m),this.fromHex(m,y)}static fromHex(m,y=!1){const{d:v,a:w}=r,_=t.BYTES;m=Zn("pointHex",m,_),Kf("zip215",y);const x=m.slice(),E=m[_-1];x[_-1]=E&-129;const S=Ug(x),T=y?o:t.ORDER;hh("pointHex.y",S,rc,T);const C=a(S*S),P=a(C-Rs),V=a(v*C-w);let{isValid:L,value:D}=c(P,V);if(!L)throw new Error("Point.fromHex: invalid y coordinate");const b=(D&Rs)===Rs,I=(E&128)!==0;if(!y&&D===rc&&I)throw new Error("Point.fromHex: x=0 and x_0=1");return I!==b&&(D=a(-D)),h.fromAffine({x:D,y:S})}static fromPrivateScalar(m){return h.BASE.multiply(m)}toBytes(){const{x:m,y}=this.toAffine(),v=L1(y,t.BYTES);return v[v.length-1]|=m&Rs?128:0,v}toRawBytes(){return this.toBytes()}toHex(){return Du(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}h.BASE=new h(r.Gx,r.Gy,Rs,a(r.Gx*r.Gy)),h.ZERO=new h(rc,Rs,Rs,rc),h.Fp=t,h.Fn=n;const g=vV(h,n.BYTES*8);return h}function Ige(r,e){Cm(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:i,Fp:s,Fn:o}=r,a=o.ORDER,c=e.randomBytes||HR,l=e.adjustScalarBytes||(x=>x),u=e.domain||((x,E,S)=>{if(Kf("phflag",S),E.length||S)throw new Error("Contexts/pre-hash are not supported");return x});function f(x){return o.create(x)}function d(x){return f(Ug(x))}function h(x){const E=s.BYTES;x=Zn("private key",x,E);const S=Zn("hashed private key",n(x),2*E),T=l(S.slice(0,E)),C=S.slice(E,2*E),P=d(T);return{head:T,prefix:C,scalar:P}}function g(x){const{head:E,prefix:S,scalar:T}=h(x),C=i.multiply(T),P=C.toBytes();return{head:E,prefix:S,scalar:T,point:C,pointBytes:P}}function p(x){return g(x).pointBytes}function m(x=Uint8Array.of(),...E){const S=_a(...E);return d(n(u(S,Zn("context",x),!!t)))}function y(x,E,S={}){x=Zn("message",x),t&&(x=t(x));const{prefix:T,scalar:C,pointBytes:P}=g(E),V=m(S.context,T,x),L=i.multiply(V).toBytes(),D=m(S.context,L,P,x),b=f(V+D*C);hh("signature.s",b,rc,a);const I=s.BYTES,B=_a(L,L1(b,I));return Zn("result",B,I*2)}const v=Sge;function w(x,E,S,T=v){const{context:C,zip215:P}=T,V=s.BYTES;x=Zn("signature",x,2*V),E=Zn("message",E),S=Zn("publicKey",S,V),P!==void 0&&Kf("zip215",P),t&&(E=t(E));const L=Ug(x.slice(V,2*V));let D,b,I;try{D=r.fromHex(S,P),b=r.fromHex(x.slice(0,V),P),I=i.multiplyUnsafe(L)}catch{return!1}if(!P&&D.isSmallOrder())return!1;const B=m(C,b.toBytes(),D.toBytes(),E);return b.add(D.multiplyUnsafe(B)).subtract(I).clearCofactor().is0()}return i.precompute(8),{getPublicKey:p,sign:y,verify:w,utils:{getExtendedPublicKey:g,randomPrivateKey:()=>c(s.BYTES),precompute(x=8,E=r.BASE){return E.precompute(x,!1)}},Point:r}}function Cge(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ep(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:s}}function Tge(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function Rge(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=Cge(r),i=Age(e,t),s=Ige(i,n);return Tge(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const kge=BigInt(1),VP=BigInt(2);BigInt(3);const Oge=BigInt(5),Pge=BigInt(8),tw={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Pge,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $ge(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=tw.p,a=r*r%s*r%s,c=jn(a,VP,s)*a%s,l=jn(c,kge,s)*r%s,u=jn(l,Oge,s)*l%s,f=jn(u,e,s)*u%s,d=jn(f,t,s)*f%s,h=jn(d,n,s)*d%s,g=jn(h,i,s)*h%s,p=jn(g,i,s)*h%s,m=jn(p,e,s)*u%s;return{pow_p_5_8:jn(m,VP,s)*r%s,b2:a}}function Dge(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const KP=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Mge(r,e){const t=tw.p,n=Qn(e*e*e,t),i=Qn(n*n*e,t),s=$ge(r*i).pow_p_5_8;let o=Qn(r*n*s,t);const a=Qn(e*o*o,t),c=o,l=Qn(o*KP,t),u=a===r,f=a===Qn(-r,t),d=a===Qn(-r*KP,t);return u&&(o=c),(f||d)&&(o=l),lle(o,t)&&(o=Qn(-o,t)),{isValid:u||f,value:o}}const Bge=Ep(tw.p,void 0,!0),Nge={...tw,Fp:Bge,hash:cb,adjustScalarBytes:Dge,uvRatio:Mge},ul=Rge(Nge),sH=()=>{function r(e){if(!bu(e))return!1;try{return ul.Point.fromBytes(Iz().encode(e)),!0}catch{return!1}}return{isOnCurve:r}};var Lge=le('<div class="flex flex-col"><label class=text-zinc-400 for=label-input>Current Label</label><div>'),Fge=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">Recipient address is not a valid Solana address.'),Uge=le('<div class="text-sm text-red-400 ring-1 ring-red-800 bg-red-900/15 py-3 px-4 rounded-xl">Recipient address is a token, sending is blocked as it will incur permanent loss of funds!'),zge=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">Recipient address is not a standard user wallet, please double check the address before saving.'),qge=le('<div class="flex-1 flex flex-col bg-zinc-950"><div class="p-4 space-y-4"></div><form class="flex-1 flex flex-col space-y-3 px-4 pb-4"><div class="flex flex-col"><label class=text-zinc-400 for=address-input>Address</label><textarea id=address-input placeholder="Enter a valid Solana address"name=address-input rows=2 required></textarea></div><div class="flex flex-col"><label class=text-zinc-400 for=label-input></label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Enter a label for this address"name=label-input type=text minlength=1 maxlength=16 required></div><div class=flex-1>');const jge="address-input",Vge="label-input",Kge=()=>{const[r,e]=Na(),t=Fa(),n=Cs(),{isOnCurve:i}=sH(),s=Te(()=>{const c=r.address?.trim();return c?n.data?.tokens.some(l=>l.id===c)??!1:!1}),o=Te(()=>bu(r.address??"")&&!s());async function a(c){c.preventDefault();const l=new FormData(c.target),u=l.get(jge)?.toString().trim()||"",f=l.get(Vge)?.toString().trim()||"";!u||!f||!bu(u)||(await qt.upsertSavedContact({address:u,label:f}),t())}return(()=>{var c=qge(),l=c.firstChild,u=l.nextSibling,f=u.firstChild,d=f.firstChild,h=d.nextSibling,g=f.nextSibling,p=g.firstChild;return p.nextSibling,g.nextSibling,Z(l,A(ui,{get title(){return r?.type==="new"?"Save Address":"Edit Address"}})),u.addEventListener("submit",m=>a(m)),h.$$input=m=>{e({address:m.currentTarget.value},{replace:!0})},Z(u,A(Oe,{get when(){return r?.type==="edit"},get children(){var m=Lge(),y=m.firstChild,v=y.nextSibling;return Z(v,()=>r.type==="edit"?r.label??"Unknown":"Unknown"),Ge(()=>tn(v,gr("w-full outline-none rounded-xl p-3 bg-zinc-900 text-zinc-400 cursor-not-allowed"))),m}}),g),Z(p,A(Oe,{get when(){return r?.type==="edit"},fallback:"Label",children:"New Label"})),Z(u,A(Kt,{get children(){return[A(Re,{get when(){return!r.address},get children(){return[]}}),A(Re,{get when(){return!bu(r.address??"")},get children(){return Fge()}}),A(Re,{get when(){return s()},get children(){return Uge()}}),A(Re,{get when(){return!i(r.address??"")},get children(){return zge()}})]}}),null),Z(u,A(_i,{onCancelClick:()=>t(),onApproveClick:()=>{},get approveTitle(){return r?.type==="new"?"Save":"Update"},get isApproveDisabled(){return!o()}}),null),Ge(m=>{var y=gr("w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200 resize-none",{"ring-1 ring-zinc-800":r?.type!=="edit","text-zinc-400 cursor-not-allowed":r?.type==="edit"}),v=r?.type==="edit";return y!==m.e&&tn(h,m.e=y),v!==m.t&&(h.disabled=m.t=v),m},{e:void 0,t:void 0}),Ge(()=>h.value=r.address??""),c})()};At(["input"]);var Hge=le('<img class="size-full rounded">'),Wge=le("<div>"),Gge=le('<div class="size-full i-tabler:world-question">');const oH=r=>{const[e,t]=Pe(!0),n=Te(()=>{if(!r.domain.includes("://"))return r.domain;try{return new URL(r.domain).host}catch{return t(!1),""}});return(()=>{var i=Wge();return Z(i,A(Oe,{get when(){return e()},get fallback(){return Gge()},get children(){var s=Hge();return s.addEventListener("error",()=>t(!1)),Ge(()=>Lr(s,"src",`https://wsrv.nl/?w=128&h=128&url=${encodeURIComponent(`https://www.google.com/s2/favicons?domain=${n()}&sz=64`)}`)),s}})),Ge(()=>tn(i,gr("size-8 text-zinc-400",r.class))),i})()};var Yge=le('<div class="flex items-center gap-3"><div class="space-y-1 py-1"><h1 class="text-lg font-semibold leading-none"></h1><h2 class="text-zinc-300 leading-none">');const x4=r=>{const[e]=Na(),t=Te(()=>typeof e.origin!="string"?"unknown":new URL(e.origin).host),n=Te(()=>t()===yi.runtime.id);return(()=>{var i=Yge(),s=i.firstChild,o=s.firstChild,a=o.nextSibling;return Z(i,A(Oe,{get when(){return n()},get fallback(){return A(oH,{get domain(){return t()},class:"size-10"})},get children(){return A(Sp,{class:"size-10 rounded-full"})}}),s),Z(o,()=>r.title),Z(a,A(Oe,{get when(){return n()},get fallback(){return t()},children:"Jupiter Wallet"})),i})()};var Jge=le('<div class="p-3 bg-zinc-900 rounded space-y-3"><div class=text-zinc-400>Connecting will allow the site to:'),Xge=le('<div class="p-3 bg-zinc-900 rounded space-y-3"><div class=text-zinc-400>This will not allow the site to:'),Zge=le('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class=flex-1></div><div class="text-zinc-500 text-center">Only connect to websites you trust'),Qge=le('<div class="space-y-2 p-3 ring-1 ring-red-800 bg-red-900/15 rounded text-red-400"><div class="flex items-center gap-2"><div class="i-tabler:alert-triangle-filled size-6 animate-pulse"></div><p class=font-bold>This website could be malicious!</p></div><p>Do not proceed to connect unless you know what you are doing.</p><p>If you think this is a mistake, please <a class=underline href=https://discord.gg/jup target=_blank>reach out to us on Discord</a>.'),eme=le('<div class="flex gap-3 items-center"><div class="size-6 rounded-full bg-green-500/10 flex items-center justify-center"><div class="size-4 i-tabler:check text-green-500"></div></div><div>'),tme=le('<div class="flex gap-3 items-center"><div class="size-6 rounded-full bg-red-500/10 flex items-center justify-center"><div class="size-4 i-tabler:x text-red-500"></div></div><div>');const rme=()=>{const[r]=Na(),e=Te(()=>typeof r.id!="string"?null:r.id||null),t=Te(()=>typeof r.origin!="string"?"":new URL(r.origin).host),n=hi(()=>({queryKey:["connect",t()],queryFn:()=>ws.scanSite(t()),enabled:t()!==""})),i=Te(()=>n.data?.result==="MALICIOUS");async function s(o){await qt.approve({id:e()||"",isApproved:o})}return(()=>{var o=Zge(),a=o.firstChild;return a.nextSibling,Z(o,A(x4,{title:"Approve Connection"}),a),Z(o,A(Oe,{get when(){return!i()},get fallback(){return Qge()},get children(){return[(()=>{var c=Jge();return c.firstChild,Z(c,A(pt,{each:["View your addresses","View your balances","View your on-chain activity"],children:l=>(()=>{var u=eme(),f=u.firstChild,d=f.nextSibling;return Z(d,l),u})()}),null),c})(),(()=>{var c=Xge();return c.firstChild,Z(c,A(pt,{each:["Sign without your approval","Steal your private keys"],children:l=>(()=>{var u=tme(),f=u.firstChild,d=f.nextSibling;return Z(d,l),u})()}),null),c})()]}}),a),Z(o,A(_i,{onCancelClick:()=>s(!1),onApproveClick:()=>s(!0),approveTitle:"Connect"}),null),o})()},aH=()=>{const[r]=Na();return Te(()=>typeof r.id!="string"?null:r.id||null)};var Ko={};const rw=gp(jhe);var y_={},iC=function(r,e){return iC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},iC(r,e)};function ua(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iC(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var xb=function(){return xb=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},xb.apply(this,arguments)};function cH(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function lH(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function uH(r,e){return function(t,n){e(t,n,r)}}function fH(r,e,t,n,i,s){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&r?n.static?r:r.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),f,d=!1,h=t.length-1;h>=0;h--){var g={};for(var p in n)g[p]=p==="access"?{}:n[p];for(var p in n.access)g.access[p]=n.access[p];g.addInitializer=function(y){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(y||null))};var m=(0,t[h])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(f=o(m.get))&&(u.get=f),(f=o(m.set))&&(u.set=f),(f=o(m.init))&&i.unshift(f)}else(f=o(m))&&(a==="field"?i.unshift(f):u[c]=f)}l&&Object.defineProperty(l,n.name,u),d=!0}function dH(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function hH(r){return typeof r=="symbol"?r:"".concat(r)}function pH(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function gH(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function _4(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function nw(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var iw=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function mH(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&iw(e,r,t)}function Bu(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nu(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function yH(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Nu(arguments[e]));return r}function vH(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Wf(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function fl(r){return this instanceof fl?(this.v=r,this):new fl(r)}function S4(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(g){return Promise.resolve(g).then(h,f)}}function a(h,g){n[h]&&(i[h]=function(p){return new Promise(function(m,y){s.push([h,p,m,y])>1||c(h,p)})},g&&(i[h]=g(i[h])))}function c(h,g){try{l(n[h](g))}catch(p){d(s[0][3],p)}}function l(h){h.value instanceof fl?Promise.resolve(h.value.v).then(u,f):d(s[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function d(h,g){h(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function bH(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:fl(r[i](o)),done:!1}:s?s(o):o}:s}}function E4(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Bu=="function"?Bu(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function wH(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var nme=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e},sC=function(r){return sC=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},sC(r)};function xH(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=sC(r),n=0;n<t.length;n++)t[n]!=="default"&&iw(e,r,t[n]);return nme(e,r),e}function _H(r){return r&&r.__esModule?r:{default:r}}function SH(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function EH(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function AH(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function IH(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var ime=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function CH(r){function e(s){r.error=r.hasError?new ime(s,r.error,"An error was suppressed during disposal."):s,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function TH(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):r}const sme={__extends:ua,__assign:xb,__rest:cH,__decorate:lH,__param:uH,__esDecorate:fH,__runInitializers:dH,__propKey:hH,__setFunctionName:pH,__metadata:gH,__awaiter:_4,__generator:nw,__createBinding:iw,__exportStar:mH,__values:Bu,__read:Nu,__spread:yH,__spreadArrays:vH,__spreadArray:Wf,__await:fl,__asyncGenerator:S4,__asyncDelegator:bH,__asyncValues:E4,__makeTemplateObject:wH,__importStar:xH,__importDefault:_H,__classPrivateFieldGet:SH,__classPrivateFieldSet:EH,__classPrivateFieldIn:AH,__addDisposableResource:IH,__disposeResources:CH,__rewriteRelativeImportExtension:TH},ome=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:IH,get __assign(){return xb},__asyncDelegator:bH,__asyncGenerator:S4,__asyncValues:E4,__await:fl,__awaiter:_4,__classPrivateFieldGet:SH,__classPrivateFieldIn:AH,__classPrivateFieldSet:EH,__createBinding:iw,__decorate:lH,__disposeResources:CH,__esDecorate:fH,__exportStar:mH,__extends:ua,__generator:nw,__importDefault:_H,__importStar:xH,__makeTemplateObject:wH,__metadata:gH,__param:uH,__propKey:hH,__read:Nu,__rest:cH,__rewriteRelativeImportExtension:TH,__runInitializers:dH,__setFunctionName:pH,__spread:yH,__spreadArray:Wf,__spreadArrays:vH,__values:Bu,default:sme},Symbol.toStringTag,{value:"Module"})),ame=gp(ome);var v_={},e0={},b_={},Av={exports:{}},t0={},HP;function A4(){if(HP)return t0;HP=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.DataItem=void 0;let r=class{constructor(t,n){this.setTag=i=>{this.tag=i},this.clearTag=()=>{this.tag=void 0},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=t,this.tag=n}};return t0.DataItem=r,t0}var cme=Av.exports,WP;function lme(){return WP||(WP=1,function(r){(function(e,t){r.exports?r.exports=t():e.CBOR=t()})(cme,function(){const{DataItem:e}=A4();var t=function(){function n(S){this.$hex=S}n.prototype={length:function(){return this.$hex.length/2},toString:function(S){if(!S||S==="hex"||S===16)return this.$hex;if(S==="utf-8"){for(var T="",C=0;C<this.$hex.length;C+=2)T+="%"+this.$hex.substring(C,C+2);return decodeURIComponent(T)}if(S==="latin"){for(var T=[],C=0;C<this.$hex.length;C+=2)T.push(parseInt(this.$hex.substring(C,C+2),16));return String.fromCharCode.apply(String,T)}throw new Error("Unrecognised format: "+S)}},n.fromLatinString=function(S){for(var T="",C=0;C<S.length;C++){var P=S.charCodeAt(C).toString(16);P.length===1&&(P="0"+P),T+=P}return new n(T)},n.fromUtf8String=function(S){for(var T=encodeURIComponent(S),C="",P=0;P<T.length;P++)if(T.charAt(P)==="%")C+=T.substring(P+1,P+3),P+=2;else{var V=T.charCodeAt(P).toString(16);V.length<2&&(V="0"+V),C+=V}return new n(C)};var i=[],s={},o=function(S){return function(){throw new Error(S+" not implemented")}};function a(){}a.prototype={peekByte:o("peekByte"),readByte:o("readByte"),readChunk:o("readChunk"),readFloat16:function(){var S=this.readUint16(),T=(S&32767)>>10,C=S&1023,P=S&32768;if(T===31)return C===0?P?-1/0:1/0:NaN;var V=T?Math.pow(2,T-25)*(1024+C):Math.pow(2,-24)*C;return P?-V:V},readFloat32:function(){var S=this.readUint32(),T=(S&2147483647)>>23,C=S&8388607,P=S&2147483648;if(T===255)return C===0?P?-1/0:1/0:NaN;var V=T?Math.pow(2,T-23-127)*(8388608+C):Math.pow(2,-149)*C;return P?-V:V},readFloat64:function(){var S=this.readUint32(),T=this.readUint32(),C=S>>20&2047,P=(S&1048575)*4294967296+T,V=S&2147483648;if(C===2047)return P===0?V?-1/0:1/0:NaN;var L=C?Math.pow(2,C-52-1023)*(4503599627370496+P):Math.pow(2,-1074)*P;return V?-L:L},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function c(){}c.prototype={writeByte:o("writeByte"),result:o("result"),writeFloat16:o("writeFloat16"),writeFloat32:o("writeFloat32"),writeFloat64:o("writeFloat64"),writeUint16:function(S){this.writeByte(S>>8&255),this.writeByte(S&255)},writeUint32:function(S){this.writeUint16(S>>16&65535),this.writeUint16(S&65535)},writeUint64:function(S){if(S>=9007199254740992||S<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+S+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(S/4294967296)),this.writeUint32(S%4294967296)},writeString:o("writeString"),canWriteBinary:function(S){return!1},writeBinary:o("writeChunk")};function l(S){var T=S.readByte(),C=T>>5,P=T&31;return{type:C,value:P}}function u(S,T){var C=S.value;if(C<24)return C;if(C==24)return T.readByte();if(C==25)return T.readUint16();if(C==26)return T.readUint32();if(C==27)return T.readUint64();if(C==31)return null;o("Additional info: "+C)()}function f(S,T,C){C.writeByte(S<<5|T)}function d(S,T,C){var P=S<<5;T<24?C.writeByte(P|T):T<256?(C.writeByte(P|24),C.writeByte(T)):T<65536?(C.writeByte(P|25),C.writeUint16(T)):T<4294967296?(C.writeByte(P|26),C.writeUint32(T)):(C.writeByte(P|27),C.writeUint64(T))}var h=new Error;function g(S){var T=l(S);switch(T.type){case 0:return u(T,S);case 1:return-1-u(T,S);case 2:return S.readChunk(u(T,S));case 3:var C=S.readChunk(u(T,S));return C.toString("utf-8");case 4:case 5:var P=u(T,S),B=[];if(P!==null){T.type===5&&(P*=2);for(var V=0;V<P;V++)B[V]=g(S)}else for(var L;(L=g(S))!==h;)B.push(L);if(T.type===5){for(var D={},V=0;V<B.length;V+=2)D[B[V]]=B[V+1];return D}else return B;case 6:var b=u(T,S),I=s[b],B=g(S);return I?I(B):B;case 7:if(T.value===25)return S.readFloat16();if(T.value===26)return S.readFloat32();if(T.value===27)return S.readFloat64();switch(u(T,S)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return h;default:throw new Error("Unknown fixed value: "+T.value)}default:throw new Error("Unsupported header: "+JSON.stringify(T))}throw new Error("not implemented yet")}function p(S,T){for(var C=0;C<i.length;C++){var P=i[C].fn(S);if(P!==void 0)return d(6,i[C].tag,T),p(P,T)}if(S&&typeof S.toCBOR=="function"&&(S=S.toCBOR()),S===!1)d(7,20,T);else if(S===!0)d(7,21,T);else if(S===null)d(7,22,T);else if(S===void 0)d(7,23,T);else if(typeof S=="number")Math.floor(S)===S&&S<9007199254740992&&S>-9007199254740992?S<0?d(1,-1-S,T):d(0,S,T):(f(7,27,T),T.writeFloat64(S));else if(typeof S=="string")T.writeString(S,function(L){d(3,L,T)});else if(T.canWriteBinary(S))T.writeBinary(S,function(L){d(2,L,T)});else if(typeof S=="object")if(v.config.useToJSON&&typeof S.toJSON=="function"&&(S=S.toJSON()),Array.isArray(S)){d(4,S.length,T);for(var C=0;C<S.length;C++)p(S[C],T)}else{var V=Object.keys(S);d(5,V.length,T);for(var C=0;C<V.length;C++){const D=parseInt(V[C]);isNaN(D)?(p(V[C],T),p(S[V[C]],T)):(p(D,T),p(S[V[C]],T))}}else throw new Error("CBOR encoding not supported: "+S)}var m=[],y=[],v={config:{useToJSON:!0},addWriter:function(S,T){typeof S=="string"?y.push(function(C){if(S===C)return T(C)}):y.push(S)},addReader:function(S,T){typeof S=="string"?m.push(function(C,P){if(S===P)return T(C,P)}):m.push(S)},encode:function(S,T){for(var C=0;C<y.length;C++){var P=y[C],V=P(T);if(V)return p(S,V),V.result()}throw new Error("Unsupported output format: "+T)},encodeDataItem:function(S,T){for(var C=0;C<y.length;C++){var P=y[C],V=P(T);if(V)return S.getTag()!==void 0?(p(S,V),V.result()):(p(S.getData(),V),V.result())}throw new Error("Unsupported output format: "+T)},decode:function(S,T){for(var C=0;C<m.length;C++){var P=m[C],V=P(S,T);if(V)return g(V)}throw new Error("Unsupported input format: "+T)},decodeToDataItem:function(S,T){for(var C=0;C<m.length;C++){var P=m[C],V=P(S,T);if(V){const L=g(V);return L instanceof e?L:new e(L)}}throw new Error("Unsupported input format: "+T)},addSemanticEncode:function(S,T){if(typeof S!="number"||S%1!==0||S<0)throw new Error("Tag must be a positive integer");return i.push({tag:S,fn:T}),this},addSemanticDecode:function(S,T){if(typeof S!="number"||S%1!==0||S<0)throw new Error("Tag must be a positive integer");return s[S]=T,this}};function w(S){this.buffer=S,this.pos=0}w.prototype=Object.create(a.prototype),w.prototype.peekByte=function(){return this.buffer[this.pos]},w.prototype.readByte=function(){return this.buffer[this.pos++]},w.prototype.readUint16=function(){var S=this.buffer.readUInt16BE(this.pos);return this.pos+=2,S},w.prototype.readUint32=function(){var S=this.buffer.readUInt32BE(this.pos);return this.pos+=4,S},w.prototype.readFloat32=function(){var S=this.buffer.readFloatBE(this.pos);return this.pos+=4,S},w.prototype.readFloat64=function(){var S=this.buffer.readDoubleBE(this.pos);return this.pos+=8,S},w.prototype.readChunk=function(S){var T=Ze.alloc(S);return this.buffer.copy(T,0,this.pos,this.pos+=S),T};function _(S){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=S}_.prototype=Object.create(c.prototype),_.prototype.writeByte=function(S){this.latestBuffer[this.latestBufferOffset++]=S,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},_.prototype.writeFloat32=function(S){var T=Ze.alloc(4);T.writeFloatBE(S,0),this.writeBuffer(T)},_.prototype.writeFloat64=function(S){var T=Ze.alloc(8);T.writeDoubleBE(S,0),this.writeBuffer(T)},_.prototype.writeString=function(S,T){var C=Ze.from(S,"utf-8");T(C.length),this.writeBuffer(C)},_.prototype.canWriteBinary=function(S){return S instanceof Ze},_.prototype.writeBinary=function(S,T){T(S.length),this.writeBuffer(S)},_.prototype.writeBuffer=function(S){if(!(S instanceof Ze))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=S.length?(S.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=S.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(S),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(S),this.byteLength+=S.length},_.prototype.result=function(){for(var S=Ze.alloc(this.byteLength),T=0,C=0;C<this.completeBuffers.length;C++){var P=this.completeBuffers[C];P.copy(S,T,0,P.length),T+=P.length}return this.latestBufferOffset&&this.latestBuffer.copy(S,T,0,this.latestBufferOffset),this.stringFormat?S.toString(this.stringFormat):S},typeof Ze=="function"&&(v.addReader(function(S,T){if(Ze.isBuffer(S))return new w(S);if(T==="hex"||T==="base64"){var C=Ze.from(S,T);return new w(C)}}),v.addWriter(function(S){if(!S||S==="buffer")return new _;if(S==="hex"||S==="base64")return new _(S)}));function x(S){this.hex=S,this.pos=0}x.prototype=Object.create(a.prototype),x.prototype.peekByte=function(){var S=this.hex.substring(this.pos,2);return parseInt(S,16)},x.prototype.readByte=function(){var S=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(S,16)},x.prototype.readChunk=function(S){var T=this.hex.substring(this.pos,this.pos+S*2);return this.pos+=S*2,typeof Ze=="function"?Ze.from(T,"hex"):new n(T)};function E(S){this.$hex="",this.finalFormat=S||"hex"}return E.prototype=Object.create(c.prototype),E.prototype.writeByte=function(S){if(S<0||S>255)throw new Error("Byte value out of range: "+S);var T=S.toString(16);T.length==1&&(T="0"+T),this.$hex+=T},E.prototype.canWriteBinary=function(S){return S instanceof n||typeof Ze=="function"&&S instanceof Ze},E.prototype.writeBinary=function(S,T){if(S instanceof n)T(S.length()),this.$hex+=S.$hex;else if(typeof Ze=="function"&&S instanceof Ze)T(S.length),this.$hex+=S.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},E.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Ze=="function"?Ze.from(this.$hex,"hex"):new n(this.$hex).toString(this.finalFormat)},E.prototype.writeString=function(S,T){var C=n.fromUtf8String(S);T(C.length()),this.$hex+=C.$hex},v.addReader(function(S,T){if(S instanceof n||S.$hex)return new x(S.$hex);if(T==="hex")return new x(S)}),v.addWriter(function(S){if(S==="hex")return new E}),v}();return t.addSemanticEncode(0,function(n){if(n instanceof Date)return n.toISOString()}).addSemanticDecode(0,function(n){return new Date(n)}).addSemanticDecode(1,function(n){return new Date(n)}),t})}(Av)),Av.exports}var GP;function Ji(){return GP||(GP=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=r.addWriter=r.addReader=r.addSemanticEncode=r.addSemanticDecode=r.decodeToDataItem=r.encodeDataItem=void 0;var e=lme();Object.defineProperty(r,"encodeDataItem",{enumerable:!0,get:function(){return e.encodeDataItem}}),Object.defineProperty(r,"decodeToDataItem",{enumerable:!0,get:function(){return e.decodeToDataItem}}),Object.defineProperty(r,"addSemanticDecode",{enumerable:!0,get:function(){return e.addSemanticDecode}}),Object.defineProperty(r,"addSemanticEncode",{enumerable:!0,get:function(){return e.addSemanticEncode}}),Object.defineProperty(r,"addReader",{enumerable:!0,get:function(){return e.addReader}}),Object.defineProperty(r,"addWriter",{enumerable:!0,get:function(){return e.addWriter}});var t=A4();Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return t.DataItem}})}(b_)),b_}var YP;function oC(){if(YP)return e0;YP=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.patchTags=void 0;const r=Ji(),e=[],t=n=>{n.forEach(i=>{e.find(s=>s===i)||((0,r.addSemanticEncode)(i,s=>{if(s instanceof r.DataItem&&s.getTag()===i)return s.getData()}),(0,r.addSemanticDecode)(i,s=>new r.DataItem(s,i)),e.push(i))})};return e0.patchTags=t,e0}var tf={},JP;function Xi(){if(JP)return tf;JP=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.RegistryTypes=tf.RegistryType=void 0;let r=class{constructor(t,n){this.type=t,this.tag=n,this.getTag=()=>this.tag,this.getType=()=>this.type}};return tf.RegistryType=r,tf.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",void 0),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)},tf}var w_={},XP;function I4(){return XP||(XP=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptExpressions=r.ScriptExpression=void 0;class e{constructor(n,i){this.tag=n,this.expression=i,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}r.ScriptExpression=e,e.fromTag=t=>Object.values(r.ScriptExpressions).find(i=>i.getTag()===t),r.ScriptExpressions={SCRIPT_HASH:new e(400,"sh"),WITNESS_SCRIPT_HASH:new e(401,"wsh"),PUBLIC_KEY:new e(402,"pk"),PUBLIC_KEY_HASH:new e(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new e(404,"wpkh"),COMBO:new e(405,"combo"),MULTISIG:new e(406,"multi"),SORTED_MULTISIG:new e(407,"sortedmulti"),ADDRESS:new e(307,"addr"),RAW_SCRIPT:new e(408,"raw")}}(w_)),w_}var ZP;function QP(){if(ZP)return v_;ZP=1,Object.defineProperty(v_,"__esModule",{value:!0});const r=oC(),e=Xi(),t=I4(),n=Object.values(e.RegistryTypes).filter(s=>!!s.getTag()).map(s=>s.getTag()),i=Object.values(t.ScriptExpressions).map(s=>s.getTag());return(0,r.patchTags)(n.concat(i)),v_}var x_={},r0={},e5;function RH(){if(e5)return r0;e5=1,r0.byteLength=a,r0.toByteArray=l,r0.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(h){var g=h.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");p===-1&&(p=g);var m=p===g?0:4-p%4;return[p,m]}function a(h){var g=o(h),p=g[0],m=g[1];return(p+m)*3/4-m}function c(h,g,p){return(g+p)*3/4-p}function l(h){var g,p=o(h),m=p[0],y=p[1],v=new t(c(h,m,y)),w=0,_=y>0?m-4:m,x;for(x=0;x<_;x+=4)g=e[h.charCodeAt(x)]<<18|e[h.charCodeAt(x+1)]<<12|e[h.charCodeAt(x+2)]<<6|e[h.charCodeAt(x+3)],v[w++]=g>>16&255,v[w++]=g>>8&255,v[w++]=g&255;return y===2&&(g=e[h.charCodeAt(x)]<<2|e[h.charCodeAt(x+1)]>>4,v[w++]=g&255),y===1&&(g=e[h.charCodeAt(x)]<<10|e[h.charCodeAt(x+1)]<<4|e[h.charCodeAt(x+2)]>>2,v[w++]=g>>8&255,v[w++]=g&255),v}function u(h){return r[h>>18&63]+r[h>>12&63]+r[h>>6&63]+r[h&63]}function f(h,g,p){for(var m,y=[],v=g;v<p;v+=3)m=(h[v]<<16&16711680)+(h[v+1]<<8&65280)+(h[v+2]&255),y.push(u(m));return y.join("")}function d(h){for(var g,p=h.length,m=p%3,y=[],v=16383,w=0,_=p-m;w<_;w+=v)y.push(f(h,w,w+v>_?_:w+v));return m===1?(g=h[p-1],y.push(r[g>>2]+r[g<<4&63]+"==")):m===2&&(g=(h[p-2]<<8)+h[p-1],y.push(r[g>>10]+r[g>>4&63]+r[g<<2&63]+"=")),y.join("")}return r0}var Iy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var t5;function kH(){return t5||(t5=1,Iy.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,f=t?i-1:0,d=t?-1:1,h=r[e+f];for(f+=d,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+r[e+f],f+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+f],f+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(h?-1:1)*o*Math.pow(2,s-n)},Iy.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+f>=1?e+=d/c:e+=d*Math.pow(2,1-f),e*c>=2&&(o++,c/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*c-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;r[t+h]=a&255,h+=g,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+h]=o&255,h+=g,o/=256,l-=8);r[t+h-g]|=p*128}),Iy}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r5;function Rc(){return r5||(r5=1,function(r){const e=RH(),t=kH(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const oe=new Uint8Array(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,Uint8Array.prototype),Object.setPrototypeOf(oe,H),oe.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');const H=new Uint8Array(oe);return Object.setPrototypeOf(H,a.prototype),H}function a(oe,H,ee){if(typeof oe=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(oe)}return c(oe,H,ee)}a.poolSize=8192;function c(oe,H,ee){if(typeof oe=="string")return d(oe,H);if(ArrayBuffer.isView(oe))return g(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(Ce(oe,ArrayBuffer)||oe&&Ce(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(oe,SharedArrayBuffer)||oe&&Ce(oe.buffer,SharedArrayBuffer)))return p(oe,H,ee);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=oe.valueOf&&oe.valueOf();if(W!=null&&W!==oe)return a.from(W,H,ee);const N=m(oe);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return a.from(oe[Symbol.toPrimitive]("string"),H,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}a.from=function(oe,H,ee){return c(oe,H,ee)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function u(oe,H,ee){return l(oe),oe<=0?o(oe):H!==void 0?typeof ee=="string"?o(oe).fill(H,ee):o(oe).fill(H):o(oe)}a.alloc=function(oe,H,ee){return u(oe,H,ee)};function f(oe){return l(oe),o(oe<0?0:y(oe)|0)}a.allocUnsafe=function(oe){return f(oe)},a.allocUnsafeSlow=function(oe){return f(oe)};function d(oe,H){if((typeof H!="string"||H==="")&&(H="utf8"),!a.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const ee=w(oe,H)|0;let W=o(ee);const N=W.write(oe,H);return N!==ee&&(W=W.slice(0,N)),W}function h(oe){const H=oe.length<0?0:y(oe.length)|0,ee=o(H);for(let W=0;W<H;W+=1)ee[W]=oe[W]&255;return ee}function g(oe){if(Ce(oe,Uint8Array)){const H=new Uint8Array(oe);return p(H.buffer,H.byteOffset,H.byteLength)}return h(oe)}function p(oe,H,ee){if(H<0||oe.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<H+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let W;return H===void 0&&ee===void 0?W=new Uint8Array(oe):ee===void 0?W=new Uint8Array(oe,H):W=new Uint8Array(oe,H,ee),Object.setPrototypeOf(W,a.prototype),W}function m(oe){if(a.isBuffer(oe)){const H=y(oe.length)|0,ee=o(H);return ee.length===0||oe.copy(ee,0,0,H),ee}if(oe.length!==void 0)return typeof oe.length!="number"||Ne(oe.length)?o(0):h(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return h(oe.data)}function y(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return oe|0}function v(oe){return+oe!=oe&&(oe=0),a.alloc(+oe)}a.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==a.prototype},a.compare=function(H,ee){if(Ce(H,Uint8Array)&&(H=a.from(H,H.offset,H.byteLength)),Ce(ee,Uint8Array)&&(ee=a.from(ee,ee.offset,ee.byteLength)),!a.isBuffer(H)||!a.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===ee)return 0;let W=H.length,N=ee.length;for(let $=0,ne=Math.min(W,N);$<ne;++$)if(H[$]!==ee[$]){W=H[$],N=ee[$];break}return W<N?-1:N<W?1:0},a.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(H,ee){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return a.alloc(0);let W;if(ee===void 0)for(ee=0,W=0;W<H.length;++W)ee+=H[W].length;const N=a.allocUnsafe(ee);let $=0;for(W=0;W<H.length;++W){let ne=H[W];if(Ce(ne,Uint8Array))$+ne.length>N.length?(a.isBuffer(ne)||(ne=a.from(ne)),ne.copy(N,$)):Uint8Array.prototype.set.call(N,ne,$);else if(a.isBuffer(ne))ne.copy(N,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=ne.length}return N};function w(oe,H){if(a.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||Ce(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);const ee=oe.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&ee===0)return 0;let N=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return U(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return ge(oe).length;default:if(N)return W?-1:U(oe).length;H=(""+H).toLowerCase(),N=!0}}a.byteLength=w;function _(oe,H,ee){let W=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,H>>>=0,ee<=H))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return G(this,H,ee);case"utf8":case"utf-8":return b(this,H,ee);case"ascii":return F(this,H,ee);case"latin1":case"binary":return z(this,H,ee);case"base64":return D(this,H,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,H,ee);default:if(W)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),W=!0}}a.prototype._isBuffer=!0;function x(oe,H,ee){const W=oe[H];oe[H]=oe[ee],oe[ee]=W}a.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<H;ee+=2)x(this,ee,ee+1);return this},a.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<H;ee+=4)x(this,ee,ee+3),x(this,ee+1,ee+2);return this},a.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<H;ee+=8)x(this,ee,ee+7),x(this,ee+1,ee+6),x(this,ee+2,ee+5),x(this,ee+3,ee+4);return this},a.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?b(this,0,H):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(H){if(!a.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:a.compare(this,H)===0},a.prototype.inspect=function(){let H="";const ee=r.INSPECT_MAX_BYTES;return H=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(H+=" ... "),"<Buffer "+H+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(H,ee,W,N,$){if(Ce(H,Uint8Array)&&(H=a.from(H,H.offset,H.byteLength)),!a.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(ee===void 0&&(ee=0),W===void 0&&(W=H?H.length:0),N===void 0&&(N=0),$===void 0&&($=this.length),ee<0||W>H.length||N<0||$>this.length)throw new RangeError("out of range index");if(N>=$&&ee>=W)return 0;if(N>=$)return-1;if(ee>=W)return 1;if(ee>>>=0,W>>>=0,N>>>=0,$>>>=0,this===H)return 0;let ne=$-N,pe=W-ee;const be=Math.min(ne,pe),fe=this.slice(N,$),Ee=H.slice(ee,W);for(let Fe=0;Fe<be;++Fe)if(fe[Fe]!==Ee[Fe]){ne=fe[Fe],pe=Ee[Fe];break}return ne<pe?-1:pe<ne?1:0};function E(oe,H,ee,W,N){if(oe.length===0)return-1;if(typeof ee=="string"?(W=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,Ne(ee)&&(ee=N?0:oe.length-1),ee<0&&(ee=oe.length+ee),ee>=oe.length){if(N)return-1;ee=oe.length-1}else if(ee<0)if(N)ee=0;else return-1;if(typeof H=="string"&&(H=a.from(H,W)),a.isBuffer(H))return H.length===0?-1:S(oe,H,ee,W,N);if(typeof H=="number")return H=H&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(oe,H,ee):Uint8Array.prototype.lastIndexOf.call(oe,H,ee):S(oe,[H],ee,W,N);throw new TypeError("val must be string, number or Buffer")}function S(oe,H,ee,W,N){let $=1,ne=oe.length,pe=H.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(oe.length<2||H.length<2)return-1;$=2,ne/=2,pe/=2,ee/=2}function be(Ee,Fe){return $===1?Ee[Fe]:Ee.readUInt16BE(Fe*$)}let fe;if(N){let Ee=-1;for(fe=ee;fe<ne;fe++)if(be(oe,fe)===be(H,Ee===-1?0:fe-Ee)){if(Ee===-1&&(Ee=fe),fe-Ee+1===pe)return Ee*$}else Ee!==-1&&(fe-=fe-Ee),Ee=-1}else for(ee+pe>ne&&(ee=ne-pe),fe=ee;fe>=0;fe--){let Ee=!0;for(let Fe=0;Fe<pe;Fe++)if(be(oe,fe+Fe)!==be(H,Fe)){Ee=!1;break}if(Ee)return fe}return-1}a.prototype.includes=function(H,ee,W){return this.indexOf(H,ee,W)!==-1},a.prototype.indexOf=function(H,ee,W){return E(this,H,ee,W,!0)},a.prototype.lastIndexOf=function(H,ee,W){return E(this,H,ee,W,!1)};function T(oe,H,ee,W){ee=Number(ee)||0;const N=oe.length-ee;W?(W=Number(W),W>N&&(W=N)):W=N;const $=H.length;W>$/2&&(W=$/2);let ne;for(ne=0;ne<W;++ne){const pe=parseInt(H.substr(ne*2,2),16);if(Ne(pe))return ne;oe[ee+ne]=pe}return ne}function C(oe,H,ee,W){return _e(U(H,oe.length-ee),oe,ee,W)}function P(oe,H,ee,W){return _e(K(H),oe,ee,W)}function V(oe,H,ee,W){return _e(ge(H),oe,ee,W)}function L(oe,H,ee,W){return _e(ie(H,oe.length-ee),oe,ee,W)}a.prototype.write=function(H,ee,W,N){if(ee===void 0)N="utf8",W=this.length,ee=0;else if(W===void 0&&typeof ee=="string")N=ee,W=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(W)?(W=W>>>0,N===void 0&&(N="utf8")):(N=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-ee;if((W===void 0||W>$)&&(W=$),H.length>0&&(W<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let ne=!1;for(;;)switch(N){case"hex":return T(this,H,ee,W);case"utf8":case"utf-8":return C(this,H,ee,W);case"ascii":case"latin1":case"binary":return P(this,H,ee,W);case"base64":return V(this,H,ee,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,H,ee,W);default:if(ne)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),ne=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(oe,H,ee){return H===0&&ee===oe.length?e.fromByteArray(oe):e.fromByteArray(oe.slice(H,ee))}function b(oe,H,ee){ee=Math.min(oe.length,ee);const W=[];let N=H;for(;N<ee;){const $=oe[N];let ne=null,pe=$>239?4:$>223?3:$>191?2:1;if(N+pe<=ee){let be,fe,Ee,Fe;switch(pe){case 1:$<128&&(ne=$);break;case 2:be=oe[N+1],(be&192)===128&&(Fe=($&31)<<6|be&63,Fe>127&&(ne=Fe));break;case 3:be=oe[N+1],fe=oe[N+2],(be&192)===128&&(fe&192)===128&&(Fe=($&15)<<12|(be&63)<<6|fe&63,Fe>2047&&(Fe<55296||Fe>57343)&&(ne=Fe));break;case 4:be=oe[N+1],fe=oe[N+2],Ee=oe[N+3],(be&192)===128&&(fe&192)===128&&(Ee&192)===128&&(Fe=($&15)<<18|(be&63)<<12|(fe&63)<<6|Ee&63,Fe>65535&&Fe<1114112&&(ne=Fe))}}ne===null?(ne=65533,pe=1):ne>65535&&(ne-=65536,W.push(ne>>>10&1023|55296),ne=56320|ne&1023),W.push(ne),N+=pe}return B(W)}const I=4096;function B(oe){const H=oe.length;if(H<=I)return String.fromCharCode.apply(String,oe);let ee="",W=0;for(;W<H;)ee+=String.fromCharCode.apply(String,oe.slice(W,W+=I));return ee}function F(oe,H,ee){let W="";ee=Math.min(oe.length,ee);for(let N=H;N<ee;++N)W+=String.fromCharCode(oe[N]&127);return W}function z(oe,H,ee){let W="";ee=Math.min(oe.length,ee);for(let N=H;N<ee;++N)W+=String.fromCharCode(oe[N]);return W}function G(oe,H,ee){const W=oe.length;(!H||H<0)&&(H=0),(!ee||ee<0||ee>W)&&(ee=W);let N="";for(let $=H;$<ee;++$)N+=xe[oe[$]];return N}function Q(oe,H,ee){const W=oe.slice(H,ee);let N="";for(let $=0;$<W.length-1;$+=2)N+=String.fromCharCode(W[$]+W[$+1]*256);return N}a.prototype.slice=function(H,ee){const W=this.length;H=~~H,ee=ee===void 0?W:~~ee,H<0?(H+=W,H<0&&(H=0)):H>W&&(H=W),ee<0?(ee+=W,ee<0&&(ee=0)):ee>W&&(ee=W),ee<H&&(ee=H);const N=this.subarray(H,ee);return Object.setPrototypeOf(N,a.prototype),N};function X(oe,H,ee){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+H>ee)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(H,ee,W){H=H>>>0,ee=ee>>>0,W||X(H,ee,this.length);let N=this[H],$=1,ne=0;for(;++ne<ee&&($*=256);)N+=this[H+ne]*$;return N},a.prototype.readUintBE=a.prototype.readUIntBE=function(H,ee,W){H=H>>>0,ee=ee>>>0,W||X(H,ee,this.length);let N=this[H+--ee],$=1;for(;ee>0&&($*=256);)N+=this[H+--ee]*$;return N},a.prototype.readUint8=a.prototype.readUInt8=function(H,ee){return H=H>>>0,ee||X(H,1,this.length),this[H]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(H,ee){return H=H>>>0,ee||X(H,2,this.length),this[H]|this[H+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(H,ee){return H=H>>>0,ee||X(H,2,this.length),this[H]<<8|this[H+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},a.prototype.readBigUInt64LE=Ae(function(H){H=H>>>0,de(H,"offset");const ee=this[H],W=this[H+7];(ee===void 0||W===void 0)&&ue(H,this.length-8);const N=ee+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,$=this[++H]+this[++H]*2**8+this[++H]*2**16+W*2**24;return BigInt(N)+(BigInt($)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(H){H=H>>>0,de(H,"offset");const ee=this[H],W=this[H+7];(ee===void 0||W===void 0)&&ue(H,this.length-8);const N=ee*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],$=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+W;return(BigInt(N)<<BigInt(32))+BigInt($)}),a.prototype.readIntLE=function(H,ee,W){H=H>>>0,ee=ee>>>0,W||X(H,ee,this.length);let N=this[H],$=1,ne=0;for(;++ne<ee&&($*=256);)N+=this[H+ne]*$;return $*=128,N>=$&&(N-=Math.pow(2,8*ee)),N},a.prototype.readIntBE=function(H,ee,W){H=H>>>0,ee=ee>>>0,W||X(H,ee,this.length);let N=ee,$=1,ne=this[H+--N];for(;N>0&&($*=256);)ne+=this[H+--N]*$;return $*=128,ne>=$&&(ne-=Math.pow(2,8*ee)),ne},a.prototype.readInt8=function(H,ee){return H=H>>>0,ee||X(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},a.prototype.readInt16LE=function(H,ee){H=H>>>0,ee||X(H,2,this.length);const W=this[H]|this[H+1]<<8;return W&32768?W|4294901760:W},a.prototype.readInt16BE=function(H,ee){H=H>>>0,ee||X(H,2,this.length);const W=this[H+1]|this[H]<<8;return W&32768?W|4294901760:W},a.prototype.readInt32LE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},a.prototype.readInt32BE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},a.prototype.readBigInt64LE=Ae(function(H){H=H>>>0,de(H,"offset");const ee=this[H],W=this[H+7];(ee===void 0||W===void 0)&&ue(H,this.length-8);const N=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(W<<24);return(BigInt(N)<<BigInt(32))+BigInt(ee+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),a.prototype.readBigInt64BE=Ae(function(H){H=H>>>0,de(H,"offset");const ee=this[H],W=this[H+7];(ee===void 0||W===void 0)&&ue(H,this.length-8);const N=(ee<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(N)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+W)}),a.prototype.readFloatLE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),t.read(this,H,!0,23,4)},a.prototype.readFloatBE=function(H,ee){return H=H>>>0,ee||X(H,4,this.length),t.read(this,H,!1,23,4)},a.prototype.readDoubleLE=function(H,ee){return H=H>>>0,ee||X(H,8,this.length),t.read(this,H,!0,52,8)},a.prototype.readDoubleBE=function(H,ee){return H=H>>>0,ee||X(H,8,this.length),t.read(this,H,!1,52,8)};function O(oe,H,ee,W,N,$){if(!a.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>N||H<$)throw new RangeError('"value" argument is out of bounds');if(ee+W>oe.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(H,ee,W,N){if(H=+H,ee=ee>>>0,W=W>>>0,!N){const pe=Math.pow(2,8*W)-1;O(this,H,ee,W,pe,0)}let $=1,ne=0;for(this[ee]=H&255;++ne<W&&($*=256);)this[ee+ne]=H/$&255;return ee+W},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(H,ee,W,N){if(H=+H,ee=ee>>>0,W=W>>>0,!N){const pe=Math.pow(2,8*W)-1;O(this,H,ee,W,pe,0)}let $=W-1,ne=1;for(this[ee+$]=H&255;--$>=0&&(ne*=256);)this[ee+$]=H/ne&255;return ee+W},a.prototype.writeUint8=a.prototype.writeUInt8=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,1,255,0),this[ee]=H&255,ee+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,2,65535,0),this[ee]=H&255,this[ee+1]=H>>>8,ee+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,2,65535,0),this[ee]=H>>>8,this[ee+1]=H&255,ee+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,4,4294967295,0),this[ee+3]=H>>>24,this[ee+2]=H>>>16,this[ee+1]=H>>>8,this[ee]=H&255,ee+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,4,4294967295,0),this[ee]=H>>>24,this[ee+1]=H>>>16,this[ee+2]=H>>>8,this[ee+3]=H&255,ee+4};function R(oe,H,ee,W,N){J(H,W,N,oe,ee,7);let $=Number(H&BigInt(4294967295));oe[ee++]=$,$=$>>8,oe[ee++]=$,$=$>>8,oe[ee++]=$,$=$>>8,oe[ee++]=$;let ne=Number(H>>BigInt(32)&BigInt(4294967295));return oe[ee++]=ne,ne=ne>>8,oe[ee++]=ne,ne=ne>>8,oe[ee++]=ne,ne=ne>>8,oe[ee++]=ne,ee}function M(oe,H,ee,W,N){J(H,W,N,oe,ee,7);let $=Number(H&BigInt(4294967295));oe[ee+7]=$,$=$>>8,oe[ee+6]=$,$=$>>8,oe[ee+5]=$,$=$>>8,oe[ee+4]=$;let ne=Number(H>>BigInt(32)&BigInt(4294967295));return oe[ee+3]=ne,ne=ne>>8,oe[ee+2]=ne,ne=ne>>8,oe[ee+1]=ne,ne=ne>>8,oe[ee]=ne,ee+8}a.prototype.writeBigUInt64LE=Ae(function(H,ee=0){return R(this,H,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(H,ee=0){return M(this,H,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(H,ee,W,N){if(H=+H,ee=ee>>>0,!N){const be=Math.pow(2,8*W-1);O(this,H,ee,W,be-1,-be)}let $=0,ne=1,pe=0;for(this[ee]=H&255;++$<W&&(ne*=256);)H<0&&pe===0&&this[ee+$-1]!==0&&(pe=1),this[ee+$]=(H/ne>>0)-pe&255;return ee+W},a.prototype.writeIntBE=function(H,ee,W,N){if(H=+H,ee=ee>>>0,!N){const be=Math.pow(2,8*W-1);O(this,H,ee,W,be-1,-be)}let $=W-1,ne=1,pe=0;for(this[ee+$]=H&255;--$>=0&&(ne*=256);)H<0&&pe===0&&this[ee+$+1]!==0&&(pe=1),this[ee+$]=(H/ne>>0)-pe&255;return ee+W},a.prototype.writeInt8=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,1,127,-128),H<0&&(H=255+H+1),this[ee]=H&255,ee+1},a.prototype.writeInt16LE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,2,32767,-32768),this[ee]=H&255,this[ee+1]=H>>>8,ee+2},a.prototype.writeInt16BE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,2,32767,-32768),this[ee]=H>>>8,this[ee+1]=H&255,ee+2},a.prototype.writeInt32LE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,4,2147483647,-2147483648),this[ee]=H&255,this[ee+1]=H>>>8,this[ee+2]=H>>>16,this[ee+3]=H>>>24,ee+4},a.prototype.writeInt32BE=function(H,ee,W){return H=+H,ee=ee>>>0,W||O(this,H,ee,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[ee]=H>>>24,this[ee+1]=H>>>16,this[ee+2]=H>>>8,this[ee+3]=H&255,ee+4},a.prototype.writeBigInt64LE=Ae(function(H,ee=0){return R(this,H,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(H,ee=0){return M(this,H,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function k(oe,H,ee,W,N,$){if(ee+W>oe.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function j(oe,H,ee,W,N){return H=+H,ee=ee>>>0,N||k(oe,H,ee,4),t.write(oe,H,ee,W,23,4),ee+4}a.prototype.writeFloatLE=function(H,ee,W){return j(this,H,ee,!0,W)},a.prototype.writeFloatBE=function(H,ee,W){return j(this,H,ee,!1,W)};function te(oe,H,ee,W,N){return H=+H,ee=ee>>>0,N||k(oe,H,ee,8),t.write(oe,H,ee,W,52,8),ee+8}a.prototype.writeDoubleLE=function(H,ee,W){return te(this,H,ee,!0,W)},a.prototype.writeDoubleBE=function(H,ee,W){return te(this,H,ee,!1,W)},a.prototype.copy=function(H,ee,W,N){if(!a.isBuffer(H))throw new TypeError("argument should be a Buffer");if(W||(W=0),!N&&N!==0&&(N=this.length),ee>=H.length&&(ee=H.length),ee||(ee=0),N>0&&N<W&&(N=W),N===W||H.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),H.length-ee<N-W&&(N=H.length-ee+W);const $=N-W;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ee,W,N):Uint8Array.prototype.set.call(H,this.subarray(W,N),ee),$},a.prototype.fill=function(H,ee,W,N){if(typeof H=="string"){if(typeof ee=="string"?(N=ee,ee=0,W=this.length):typeof W=="string"&&(N=W,W=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(H.length===1){const ne=H.charCodeAt(0);(N==="utf8"&&ne<128||N==="latin1")&&(H=ne)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(ee<0||this.length<ee||this.length<W)throw new RangeError("Out of range index");if(W<=ee)return this;ee=ee>>>0,W=W===void 0?this.length:W>>>0,H||(H=0);let $;if(typeof H=="number")for($=ee;$<W;++$)this[$]=H;else{const ne=a.isBuffer(H)?H:a.from(H,N),pe=ne.length;if(pe===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for($=0;$<W-ee;++$)this[$+ee]=ne[$%pe]}return this};const ae={};function he(oe,H,ee){ae[oe]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${oe}]`,this.stack,delete this.name}get code(){return oe}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${oe}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?`${oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(oe,H){return`The "${oe}" argument must be of type number. Received type ${typeof H}`},TypeError),he("ERR_OUT_OF_RANGE",function(oe,H,ee){let W=`The value of "${oe}" is out of range.`,N=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?N=re(String(ee)):typeof ee=="bigint"&&(N=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(N=re(N)),N+="n"),W+=` It must be ${H}. Received ${N}`,W},RangeError);function re(oe){let H="",ee=oe.length;const W=oe[0]==="-"?1:0;for(;ee>=W+4;ee-=3)H=`_${oe.slice(ee-3,ee)}${H}`;return`${oe.slice(0,ee)}${H}`}function q(oe,H,ee){de(H,"offset"),(oe[H]===void 0||oe[H+ee]===void 0)&&ue(H,oe.length-(ee+1))}function J(oe,H,ee,W,N,$){if(oe>ee||oe<H){const ne=typeof H=="bigint"?"n":"";let pe;throw H===0||H===BigInt(0)?pe=`>= 0${ne} and < 2${ne} ** ${($+1)*8}${ne}`:pe=`>= -(2${ne} ** ${($+1)*8-1}${ne}) and < 2 ** ${($+1)*8-1}${ne}`,new ae.ERR_OUT_OF_RANGE("value",pe,oe)}q(W,N,$)}function de(oe,H){if(typeof oe!="number")throw new ae.ERR_INVALID_ARG_TYPE(H,"number",oe)}function ue(oe,H,ee){throw Math.floor(oe)!==oe?(de(oe,ee),new ae.ERR_OUT_OF_RANGE("offset","an integer",oe)):H<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,oe)}const we=/[^+/0-9A-Za-z-_]/g;function se(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(we,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function U(oe,H){H=H||1/0;let ee;const W=oe.length;let N=null;const $=[];for(let ne=0;ne<W;++ne){if(ee=oe.charCodeAt(ne),ee>55295&&ee<57344){if(!N){if(ee>56319){(H-=3)>-1&&$.push(239,191,189);continue}else if(ne+1===W){(H-=3)>-1&&$.push(239,191,189);continue}N=ee;continue}if(ee<56320){(H-=3)>-1&&$.push(239,191,189),N=ee;continue}ee=(N-55296<<10|ee-56320)+65536}else N&&(H-=3)>-1&&$.push(239,191,189);if(N=null,ee<128){if((H-=1)<0)break;$.push(ee)}else if(ee<2048){if((H-=2)<0)break;$.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((H-=3)<0)break;$.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((H-=4)<0)break;$.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return $}function K(oe){const H=[];for(let ee=0;ee<oe.length;++ee)H.push(oe.charCodeAt(ee)&255);return H}function ie(oe,H){let ee,W,N;const $=[];for(let ne=0;ne<oe.length&&!((H-=2)<0);++ne)ee=oe.charCodeAt(ne),W=ee>>8,N=ee%256,$.push(N),$.push(W);return $}function ge(oe){return e.toByteArray(se(oe))}function _e(oe,H,ee,W){let N;for(N=0;N<W&&!(N+ee>=H.length||N>=oe.length);++N)H[N+ee]=oe[N];return N}function Ce(oe,H){return oe instanceof H||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===H.name}function Ne(oe){return oe!==oe}const xe=function(){const oe="0123456789abcdef",H=new Array(256);for(let ee=0;ee<16;++ee){const W=ee*16;for(let N=0;N<16;++N)H[W+N]=oe[ee]+oe[N]}return H}();function Ae(oe){return typeof BigInt>"u"?Me:oe}function Me(){throw new Error("BigInt not supported")}}(x_)),x_}var n0={},Cy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n5;function so(){return n5||(n5=1,function(r,e){var t=Rc(),n=t.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(Cy,Cy.exports)),Cy.exports}var Ty={exports:{}},Ry={exports:{}},i5;function OH(){if(i5)return Ry.exports;i5=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(x,E,S){return Function.prototype.apply.call(x,E,S)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:t=function(x){return Object.getOwnPropertyNames(x)};function n(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(x){return x!==x};function s(){s.init.call(this)}Ry.exports=s,Ry.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");o=_}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function c(_){return _._maxListeners===void 0?s.defaultMaxListeners:_._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(x){for(var E=[],S=1;S<arguments.length;S++)E.push(arguments[S]);var T=x==="error",C=this._events;if(C!==void 0)T=T&&C.error===void 0;else if(!T)return!1;if(T){var P;if(E.length>0&&(P=E[0]),P instanceof Error)throw P;var V=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw V.context=P,V}var L=C[x];if(L===void 0)return!1;if(typeof L=="function")e(L,this,E);else for(var D=L.length,b=g(L,D),S=0;S<D;++S)e(b[S],this,E);return!0};function l(_,x,E,S){var T,C,P;if(a(E),C=_._events,C===void 0?(C=_._events=Object.create(null),_._eventsCount=0):(C.newListener!==void 0&&(_.emit("newListener",x,E.listener?E.listener:E),C=_._events),P=C[x]),P===void 0)P=C[x]=E,++_._eventsCount;else if(typeof P=="function"?P=C[x]=S?[E,P]:[P,E]:S?P.unshift(E):P.push(E),T=c(_),T>0&&P.length>T&&!P.warned){P.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=_,V.type=x,V.count=P.length,n(V)}return _}s.prototype.addListener=function(x,E){return l(this,x,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(x,E){return l(this,x,E,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(_,x,E){var S={fired:!1,wrapFn:void 0,target:_,type:x,listener:E},T=u.bind(S);return T.listener=E,S.wrapFn=T,T}s.prototype.once=function(x,E){return a(E),this.on(x,f(this,x,E)),this},s.prototype.prependOnceListener=function(x,E){return a(E),this.prependListener(x,f(this,x,E)),this},s.prototype.removeListener=function(x,E){var S,T,C,P,V;if(a(E),T=this._events,T===void 0)return this;if(S=T[x],S===void 0)return this;if(S===E||S.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete T[x],T.removeListener&&this.emit("removeListener",x,S.listener||E));else if(typeof S!="function"){for(C=-1,P=S.length-1;P>=0;P--)if(S[P]===E||S[P].listener===E){V=S[P].listener,C=P;break}if(C<0)return this;C===0?S.shift():p(S,C),S.length===1&&(T[x]=S[0]),T.removeListener!==void 0&&this.emit("removeListener",x,V||E)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(x){var E,S,T;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[x]),this;if(arguments.length===0){var C=Object.keys(S),P;for(T=0;T<C.length;++T)P=C[T],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=S[x],typeof E=="function")this.removeListener(x,E);else if(E!==void 0)for(T=E.length-1;T>=0;T--)this.removeListener(x,E[T]);return this};function d(_,x,E){var S=_._events;if(S===void 0)return[];var T=S[x];return T===void 0?[]:typeof T=="function"?E?[T.listener||T]:[T]:E?m(T):g(T,T.length)}s.prototype.listeners=function(x){return d(this,x,!0)},s.prototype.rawListeners=function(x){return d(this,x,!1)},s.listenerCount=function(_,x){return typeof _.listenerCount=="function"?_.listenerCount(x):h.call(_,x)},s.prototype.listenerCount=h;function h(_){var x=this._events;if(x!==void 0){var E=x[_];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function g(_,x){for(var E=new Array(x),S=0;S<x;++S)E[S]=_[S];return E}function p(_,x){for(;x+1<_.length;x++)_[x]=_[x+1];_.pop()}function m(_){for(var x=new Array(_.length),E=0;E<x.length;++E)x[E]=_[E].listener||_[E];return x}function y(_,x){return new Promise(function(E,S){function T(P){_.removeListener(x,C),S(P)}function C(){typeof _.removeListener=="function"&&_.removeListener("error",T),E([].slice.call(arguments))}w(_,x,C,{once:!0}),x!=="error"&&v(_,T,{once:!0})})}function v(_,x,E){typeof _.on=="function"&&w(_,"error",x,E)}function w(_,x,E,S){if(typeof _.on=="function")S.once?_.once(x,E):_.on(x,E);else if(typeof _.addEventListener=="function")_.addEventListener(x,function T(C){S.once&&_.removeEventListener(x,T),E(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Ry.exports}var __,s5;function PH(){return s5||(s5=1,__=OH().EventEmitter),__}var S_,o5;function ume(){if(o5)return S_;o5=1;function r(g,p){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);p&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(g,v).enumerable})),m.push.apply(m,y)}return m}function e(g){for(var p=1;p<arguments.length;p++){var m=arguments[p]!=null?arguments[p]:{};p%2?r(Object(m),!0).forEach(function(y){t(g,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(m,y))})}return g}function t(g,p,m){return p=o(p),p in g?Object.defineProperty(g,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):g[p]=m,g}function n(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function i(g,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,o(y.key),y)}}function s(g,p,m){return p&&i(g.prototype,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function o(g){var p=a(g,"string");return typeof p=="symbol"?p:String(p)}function a(g,p){if(typeof g!="object"||g===null)return g;var m=g[Symbol.toPrimitive];if(m!==void 0){var y=m.call(g,p);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(g)}var c=Rc(),l=c.Buffer,u=gd,f=u.inspect,d=f&&f.custom||"inspect";function h(g,p,m){l.prototype.copy.call(g,p,m)}return S_=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return s(g,[{key:"push",value:function(m){var y={data:m,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(m){var y={data:m,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var y=this.head,v=""+y.data;y=y.next;)v+=m+y.data;return v}},{key:"concat",value:function(m){if(this.length===0)return l.alloc(0);for(var y=l.allocUnsafe(m>>>0),v=this.head,w=0;v;)h(v.data,y,w),w+=v.data.length,v=v.next;return y}},{key:"consume",value:function(m,y){var v;return m<this.head.data.length?(v=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?v=this.shift():v=y?this._getString(m):this._getBuffer(m),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var y=this.head,v=1,w=y.data;for(m-=w.length;y=y.next;){var _=y.data,x=m>_.length?_.length:m;if(x===_.length?w+=_:w+=_.slice(0,m),m-=x,m===0){x===_.length?(++v,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=_.slice(x));break}++v}return this.length-=v,w}},{key:"_getBuffer",value:function(m){var y=l.allocUnsafe(m),v=this.head,w=1;for(v.data.copy(y),m-=v.data.length;v=v.next;){var _=v.data,x=m>_.length?_.length:m;if(_.copy(y,y.length-m,0,x),m-=x,m===0){x===_.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(x));break}++w}return this.length-=w,y}},{key:d,value:function(m,y){return f(this,e(e({},y),{},{depth:0,customInspect:!1}))}}]),g}(),S_}var E_,a5;function $H(){if(a5)return E_;a5=1;function r(o,a){var c=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Yt.nextTick(i,this,o)):Yt.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(f){!a&&f?c._writableState?c._writableState.errorEmitted?Yt.nextTick(t,c):(c._writableState.errorEmitted=!0,Yt.nextTick(e,c,f)):Yt.nextTick(e,c,f):a?(Yt.nextTick(t,c),a(f)):Yt.nextTick(t,c)}),this)}function e(o,a){i(o,a),t(o)}function t(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var c=o._readableState,l=o._writableState;c&&c.autoDestroy||l&&l.autoDestroy?o.destroy(a):o.emit("error",a)}return E_={destroy:r,undestroy:n,errorOrDestroy:s},E_}var A_={},c5;function kp(){if(c5)return A_;c5=1;function r(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var e={};function t(a,c,l){l||(l=Error);function u(d,h,g){return typeof c=="string"?c:c(d,h,g)}var f=function(d){r(h,d);function h(g,p,m){return d.call(this,u(g,p,m))||this}return h}(l);f.prototype.name=l.name,f.prototype.code=a,e[a]=f}function n(a,c){if(Array.isArray(a)){var l=a.length;return a=a.map(function(u){return String(u)}),l>2?"one of ".concat(c," ").concat(a.slice(0,l-1).join(", "),", or ")+a[l-1]:l===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function i(a,c,l){return a.substr(0,c.length)===c}function s(a,c,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-c.length,l)===c}function o(a,c,l){return typeof l!="number"&&(l=0),l+c.length>a.length?!1:a.indexOf(c,l)!==-1}return t("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(a,c,l){var u;typeof c=="string"&&i(c,"not ")?(u="must not be",c=c.replace(/^not /,"")):u="must be";var f;if(s(a," argument"))f="The ".concat(a," ").concat(u," ").concat(n(c,"type"));else{var d=o(a,".")?"property":"argument";f='The "'.concat(a,'" ').concat(d," ").concat(u," ").concat(n(c,"type"))}return f+=". Received type ".concat(typeof l),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),A_.codes=e,A_}var I_,l5;function DH(){if(l5)return I_;l5=1;var r=kp().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function t(n,i,s,o){var a=e(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var c=o?s:"highWaterMark";throw new r(c,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return I_={getHighWaterMark:t},I_}var C_,u5;function fme(){if(u5)return C_;u5=1,C_=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!Ii.localStorage)return!1}catch{return!1}var n=Ii.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return C_}var T_,f5;function MH(){if(f5)return T_;f5=1,T_=T;function r(j){var te=this;this.next=null,this.entry=null,this.finish=function(){k(te,j)}}var e;T.WritableState=E;var t={deprecate:fme()},n=PH(),i=Rc().Buffer,s=(typeof Ii<"u"?Ii:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(j){return i.from(j)}function a(j){return i.isBuffer(j)||j instanceof s}var c=$H(),l=DH(),u=l.getHighWaterMark,f=kp().codes,d=f.ERR_INVALID_ARG_TYPE,h=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,p=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,v=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,_=c.errorOrDestroy;Ri()(T,n);function x(){}function E(j,te,ae){e=e||Jh(),j=j||{},typeof ae!="boolean"&&(ae=te instanceof e),this.objectMode=!!j.objectMode,ae&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=u(this,j,"writableHighWaterMark",ae),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var he=j.decodeStrings===!1;this.decodeStrings=!he,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(re){B(te,re)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var te=this.bufferedRequest,ae=[];te;)ae.push(te),te=te.next;return ae},function(){try{Object.defineProperty(E.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var S;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(te){return S.call(this,te)?!0:this!==T?!1:te&&te._writableState instanceof E}})):S=function(te){return te instanceof this};function T(j){e=e||Jh();var te=this instanceof e;if(!te&&!S.call(T,this))return new T(j);this._writableState=new E(j,this,te),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),n.call(this)}T.prototype.pipe=function(){_(this,new p)};function C(j,te){var ae=new v;_(j,ae),Yt.nextTick(te,ae)}function P(j,te,ae,he){var re;return ae===null?re=new y:typeof ae!="string"&&!te.objectMode&&(re=new d("chunk",["string","Buffer"],ae)),re?(_(j,re),Yt.nextTick(he,re),!1):!0}T.prototype.write=function(j,te,ae){var he=this._writableState,re=!1,q=!he.objectMode&&a(j);return q&&!i.isBuffer(j)&&(j=o(j)),typeof te=="function"&&(ae=te,te=null),q?te="buffer":te||(te=he.defaultEncoding),typeof ae!="function"&&(ae=x),he.ending?C(this,ae):(q||P(this,he,j,ae))&&(he.pendingcb++,re=L(this,he,q,j,te,ae)),re},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&G(this,j))},T.prototype.setDefaultEncoding=function(te){if(typeof te=="string"&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new w(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function V(j,te,ae){return!j.objectMode&&j.decodeStrings!==!1&&typeof te=="string"&&(te=i.from(te,ae)),te}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(j,te,ae,he,re,q){if(!ae){var J=V(te,he,re);he!==J&&(ae=!0,re="buffer",he=J)}var de=te.objectMode?1:he.length;te.length+=de;var ue=te.length<te.highWaterMark;if(ue||(te.needDrain=!0),te.writing||te.corked){var we=te.lastBufferedRequest;te.lastBufferedRequest={chunk:he,encoding:re,isBuf:ae,callback:q,next:null},we?we.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else D(j,te,!1,de,he,re,q);return ue}function D(j,te,ae,he,re,q,J){te.writelen=he,te.writecb=J,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new m("write")):ae?j._writev(re,te.onwrite):j._write(re,q,te.onwrite),te.sync=!1}function b(j,te,ae,he,re){--te.pendingcb,ae?(Yt.nextTick(re,he),Yt.nextTick(R,j,te),j._writableState.errorEmitted=!0,_(j,he)):(re(he),j._writableState.errorEmitted=!0,_(j,he),R(j,te))}function I(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function B(j,te){var ae=j._writableState,he=ae.sync,re=ae.writecb;if(typeof re!="function")throw new g;if(I(ae),te)b(j,ae,he,te,re);else{var q=Q(ae)||j.destroyed;!q&&!ae.corked&&!ae.bufferProcessing&&ae.bufferedRequest&&G(j,ae),he?Yt.nextTick(F,j,ae,q,re):F(j,ae,q,re)}}function F(j,te,ae,he){ae||z(j,te),te.pendingcb--,he(),R(j,te)}function z(j,te){te.length===0&&te.needDrain&&(te.needDrain=!1,j.emit("drain"))}function G(j,te){te.bufferProcessing=!0;var ae=te.bufferedRequest;if(j._writev&&ae&&ae.next){var he=te.bufferedRequestCount,re=new Array(he),q=te.corkedRequestsFree;q.entry=ae;for(var J=0,de=!0;ae;)re[J]=ae,ae.isBuf||(de=!1),ae=ae.next,J+=1;re.allBuffers=de,D(j,te,!0,te.length,re,"",q.finish),te.pendingcb++,te.lastBufferedRequest=null,q.next?(te.corkedRequestsFree=q.next,q.next=null):te.corkedRequestsFree=new r(te),te.bufferedRequestCount=0}else{for(;ae;){var ue=ae.chunk,we=ae.encoding,se=ae.callback,U=te.objectMode?1:ue.length;if(D(j,te,!1,U,ue,we,se),ae=ae.next,te.bufferedRequestCount--,te.writing)break}ae===null&&(te.lastBufferedRequest=null)}te.bufferedRequest=ae,te.bufferProcessing=!1}T.prototype._write=function(j,te,ae){ae(new h("_write()"))},T.prototype._writev=null,T.prototype.end=function(j,te,ae){var he=this._writableState;return typeof j=="function"?(ae=j,j=null,te=null):typeof te=="function"&&(ae=te,te=null),j!=null&&this.write(j,te),he.corked&&(he.corked=1,this.uncork()),he.ending||M(this,he,ae),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Q(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function X(j,te){j._final(function(ae){te.pendingcb--,ae&&_(j,ae),te.prefinished=!0,j.emit("prefinish"),R(j,te)})}function O(j,te){!te.prefinished&&!te.finalCalled&&(typeof j._final=="function"&&!te.destroyed?(te.pendingcb++,te.finalCalled=!0,Yt.nextTick(X,j,te)):(te.prefinished=!0,j.emit("prefinish")))}function R(j,te){var ae=Q(te);if(ae&&(O(j,te),te.pendingcb===0&&(te.finished=!0,j.emit("finish"),te.autoDestroy))){var he=j._readableState;(!he||he.autoDestroy&&he.endEmitted)&&j.destroy()}return ae}function M(j,te,ae){te.ending=!0,R(j,te),ae&&(te.finished?Yt.nextTick(ae):j.once("finish",ae)),te.ended=!0,j.writable=!1}function k(j,te,ae){var he=j.entry;for(j.entry=null;he;){var re=he.callback;te.pendingcb--,re(ae),he=he.next}te.corkedRequestsFree.next=j}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(te){this._writableState&&(this._writableState.destroyed=te)}}),T.prototype.destroy=c.destroy,T.prototype._undestroy=c.undestroy,T.prototype._destroy=function(j,te){te(j)},T_}var R_,d5;function Jh(){if(d5)return R_;d5=1;var r=Object.keys||function(l){var u=[];for(var f in l)u.push(f);return u};R_=o;var e=BH(),t=MH();Ri()(o,e);for(var n=r(t.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=t.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),t.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||Yt.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),R_}var k_={},h5;function aC(){if(h5)return k_;h5=1;var r=so().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function n(y){var v=t(y);if(typeof v!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return v||y}k_.StringDecoder=i;function i(y){this.encoding=n(y);var v;switch(this.encoding){case"utf16le":this.text=f,this.end=d,v=4;break;case"utf8":this.fillLast=c,v=4;break;case"base64":this.text=h,this.end=g,v=3;break;default:this.write=p,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(v)}i.prototype.write=function(y){if(y.length===0)return"";var v,w;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<y.length?v?v+this.text(y,w):this.text(y,w):v||""},i.prototype.end=u,i.prototype.text=l,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function s(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function o(y,v,w){var _=v.length-1;if(_<w)return 0;var x=s(v[_]);return x>=0?(x>0&&(y.lastNeed=x-1),x):--_<w||x===-2?0:(x=s(v[_]),x>=0?(x>0&&(y.lastNeed=x-2),x):--_<w||x===-2?0:(x=s(v[_]),x>=0?(x>0&&(x===2?x=0:y.lastNeed=x-3),x):0))}function a(y,v,w){if((v[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,""}}function c(y){var v=this.lastTotal-this.lastNeed,w=a(this,y);if(w!==void 0)return w;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function l(y,v){var w=o(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=w;var _=y.length-(w-this.lastNeed);return y.copy(this.lastChar,0,_),y.toString("utf8",v,_)}function u(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"":v}function f(y,v){if((y.length-v)%2===0){var w=y.toString("utf16le",v);if(w){var _=w.charCodeAt(w.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function d(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,w)}return v}function h(y,v){var w=(y.length-v)%3;return w===0?y.toString("base64",v):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-w))}function g(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function p(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return k_}var O_,p5;function C4(){if(p5)return O_;p5=1;var r=kp().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];s.apply(this,c)}}}function t(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=e(a||t);var c=o.readable||o.readable!==!1&&s.readable,l=o.writable||o.writable!==!1&&s.writable,u=function(){s.writable||d()},f=s._writableState&&s._writableState.finished,d=function(){l=!1,f=!0,c||a.call(s)},h=s._readableState&&s._readableState.endEmitted,g=function(){c=!1,h=!0,l||a.call(s)},p=function(w){a.call(s,w)},m=function(){var w;if(c&&!h)return(!s._readableState||!s._readableState.ended)&&(w=new r),a.call(s,w);if(l&&!f)return(!s._writableState||!s._writableState.ended)&&(w=new r),a.call(s,w)},y=function(){s.req.on("finish",d)};return n(s)?(s.on("complete",d),s.on("abort",m),s.req?y():s.on("request",y)):l&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",g),s.on("finish",d),o.error!==!1&&s.on("error",p),s.on("close",m),function(){s.removeListener("complete",d),s.removeListener("abort",m),s.removeListener("request",y),s.req&&s.req.removeListener("finish",d),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",d),s.removeListener("end",g),s.removeListener("error",p),s.removeListener("close",m)}}return O_=i,O_}var P_,g5;function dme(){if(g5)return P_;g5=1;var r;function e(w,_,x){return _=t(_),_ in w?Object.defineProperty(w,_,{value:x,enumerable:!0,configurable:!0,writable:!0}):w[_]=x,w}function t(w){var _=n(w,"string");return typeof _=="symbol"?_:String(_)}function n(w,_){if(typeof w!="object"||w===null)return w;var x=w[Symbol.toPrimitive];if(x!==void 0){var E=x.call(w,_);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(w)}var i=C4(),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),f=Symbol("stream");function d(w,_){return{value:w,done:_}}function h(w){var _=w[s];if(_!==null){var x=w[f].read();x!==null&&(w[l]=null,w[s]=null,w[o]=null,_(d(x,!1)))}}function g(w){Yt.nextTick(h,w)}function p(w,_){return function(x,E){w.then(function(){if(_[c]){x(d(void 0,!0));return}_[u](x,E)},E)}}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var _=this,x=this[a];if(x!==null)return Promise.reject(x);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise(function(C,P){Yt.nextTick(function(){_[a]?P(_[a]):C(d(void 0,!0))})});var E=this[l],S;if(E)S=new Promise(p(E,this));else{var T=this[f].read();if(T!==null)return Promise.resolve(d(T,!1));S=new Promise(this[u])}return this[l]=S,S}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var _=this;return new Promise(function(x,E){_[f].destroy(null,function(S){if(S){E(S);return}x(d(void 0,!0))})})}),r),m),v=function(_){var x,E=Object.create(y,(x={},e(x,f,{value:_,writable:!0}),e(x,s,{value:null,writable:!0}),e(x,o,{value:null,writable:!0}),e(x,a,{value:null,writable:!0}),e(x,c,{value:_._readableState.endEmitted,writable:!0}),e(x,u,{value:function(T,C){var P=E[f].read();P?(E[l]=null,E[s]=null,E[o]=null,T(d(P,!1))):(E[s]=T,E[o]=C)},writable:!0}),x));return E[l]=null,i(_,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var T=E[o];T!==null&&(E[l]=null,E[s]=null,E[o]=null,T(S)),E[a]=S;return}var C=E[s];C!==null&&(E[l]=null,E[s]=null,E[o]=null,C(d(void 0,!0))),E[c]=!0}),_.on("readable",g.bind(null,E)),E};return P_=v,P_}var $_,m5;function hme(){return m5||(m5=1,$_=function(){throw new Error("Readable.from is not available in the browser")}),$_}var D_,y5;function BH(){if(y5)return D_;y5=1,D_=C;var r;C.ReadableState=T,OH().EventEmitter;var e=function(J,de){return J.listeners(de).length},t=PH(),n=Rc().Buffer,i=(typeof Ii<"u"?Ii:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(q){return n.from(q)}function o(q){return n.isBuffer(q)||q instanceof i}var a=gd,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var l=ume(),u=$H(),f=DH(),d=f.getHighWaterMark,h=kp().codes,g=h.ERR_INVALID_ARG_TYPE,p=h.ERR_STREAM_PUSH_AFTER_EOF,m=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,w,_;Ri()(C,t);var x=u.errorOrDestroy,E=["error","close","destroy","pause","resume"];function S(q,J,de){if(typeof q.prependListener=="function")return q.prependListener(J,de);!q._events||!q._events[J]?q.on(J,de):Array.isArray(q._events[J])?q._events[J].unshift(de):q._events[J]=[de,q._events[J]]}function T(q,J,de){r=r||Jh(),q=q||{},typeof de!="boolean"&&(de=J instanceof r),this.objectMode=!!q.objectMode,de&&(this.objectMode=this.objectMode||!!q.readableObjectMode),this.highWaterMark=d(this,q,"readableHighWaterMark",de),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=q.emitClose!==!1,this.autoDestroy=!!q.autoDestroy,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(v||(v=aC().StringDecoder),this.decoder=new v(q.encoding),this.encoding=q.encoding)}function C(q){if(r=r||Jh(),!(this instanceof C))return new C(q);var J=this instanceof r;this._readableState=new T(q,this,J),this.readable=!0,q&&(typeof q.read=="function"&&(this._read=q.read),typeof q.destroy=="function"&&(this._destroy=q.destroy)),t.call(this)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),C.prototype.destroy=u.destroy,C.prototype._undestroy=u.undestroy,C.prototype._destroy=function(q,J){J(q)},C.prototype.push=function(q,J){var de=this._readableState,ue;return de.objectMode?ue=!0:typeof q=="string"&&(J=J||de.defaultEncoding,J!==de.encoding&&(q=n.from(q,J),J=""),ue=!0),P(this,q,J,!1,ue)},C.prototype.unshift=function(q){return P(this,q,null,!0,!1)};function P(q,J,de,ue,we){c("readableAddChunk",J);var se=q._readableState;if(J===null)se.reading=!1,B(q,se);else{var U;if(we||(U=L(se,J)),U)x(q,U);else if(se.objectMode||J&&J.length>0)if(typeof J!="string"&&!se.objectMode&&Object.getPrototypeOf(J)!==n.prototype&&(J=s(J)),ue)se.endEmitted?x(q,new y):V(q,se,J,!0);else if(se.ended)x(q,new p);else{if(se.destroyed)return!1;se.reading=!1,se.decoder&&!de?(J=se.decoder.write(J),se.objectMode||J.length!==0?V(q,se,J,!1):G(q,se)):V(q,se,J,!1)}else ue||(se.reading=!1,G(q,se))}return!se.ended&&(se.length<se.highWaterMark||se.length===0)}function V(q,J,de,ue){J.flowing&&J.length===0&&!J.sync?(J.awaitDrain=0,q.emit("data",de)):(J.length+=J.objectMode?1:de.length,ue?J.buffer.unshift(de):J.buffer.push(de),J.needReadable&&F(q)),G(q,J)}function L(q,J){var de;return!o(J)&&typeof J!="string"&&J!==void 0&&!q.objectMode&&(de=new g("chunk",["string","Buffer","Uint8Array"],J)),de}C.prototype.isPaused=function(){return this._readableState.flowing===!1},C.prototype.setEncoding=function(q){v||(v=aC().StringDecoder);var J=new v(q);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;for(var de=this._readableState.buffer.head,ue="";de!==null;)ue+=J.write(de.data),de=de.next;return this._readableState.buffer.clear(),ue!==""&&this._readableState.buffer.push(ue),this._readableState.length=ue.length,this};var D=1073741824;function b(q){return q>=D?q=D:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}function I(q,J){return q<=0||J.length===0&&J.ended?0:J.objectMode?1:q!==q?J.flowing&&J.length?J.buffer.head.data.length:J.length:(q>J.highWaterMark&&(J.highWaterMark=b(q)),q<=J.length?q:J.ended?J.length:(J.needReadable=!0,0))}C.prototype.read=function(q){c("read",q),q=parseInt(q,10);var J=this._readableState,de=q;if(q!==0&&(J.emittedReadable=!1),q===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended))return c("read: emitReadable",J.length,J.ended),J.length===0&&J.ended?ae(this):F(this),null;if(q=I(q,J),q===0&&J.ended)return J.length===0&&ae(this),null;var ue=J.needReadable;c("need readable",ue),(J.length===0||J.length-q<J.highWaterMark)&&(ue=!0,c("length less than watermark",ue)),J.ended||J.reading?(ue=!1,c("reading or ended",ue)):ue&&(c("do read"),J.reading=!0,J.sync=!0,J.length===0&&(J.needReadable=!0),this._read(J.highWaterMark),J.sync=!1,J.reading||(q=I(de,J)));var we;return q>0?we=te(q,J):we=null,we===null?(J.needReadable=J.length<=J.highWaterMark,q=0):(J.length-=q,J.awaitDrain=0),J.length===0&&(J.ended||(J.needReadable=!0),de!==q&&J.ended&&ae(this)),we!==null&&this.emit("data",we),we};function B(q,J){if(c("onEofChunk"),!J.ended){if(J.decoder){var de=J.decoder.end();de&&de.length&&(J.buffer.push(de),J.length+=J.objectMode?1:de.length)}J.ended=!0,J.sync?F(q):(J.needReadable=!1,J.emittedReadable||(J.emittedReadable=!0,z(q)))}}function F(q){var J=q._readableState;c("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,J.emittedReadable||(c("emitReadable",J.flowing),J.emittedReadable=!0,Yt.nextTick(z,q))}function z(q){var J=q._readableState;c("emitReadable_",J.destroyed,J.length,J.ended),!J.destroyed&&(J.length||J.ended)&&(q.emit("readable"),J.emittedReadable=!1),J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,j(q)}function G(q,J){J.readingMore||(J.readingMore=!0,Yt.nextTick(Q,q,J))}function Q(q,J){for(;!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0);){var de=J.length;if(c("maybeReadMore read 0"),q.read(0),de===J.length)break}J.readingMore=!1}C.prototype._read=function(q){x(this,new m("_read()"))},C.prototype.pipe=function(q,J){var de=this,ue=this._readableState;switch(ue.pipesCount){case 0:ue.pipes=q;break;case 1:ue.pipes=[ue.pipes,q];break;default:ue.pipes.push(q);break}ue.pipesCount+=1,c("pipe count=%d opts=%j",ue.pipesCount,J);var we=(!J||J.end!==!1)&&q!==Yt.stdout&&q!==Yt.stderr,se=we?K:Me;ue.endEmitted?Yt.nextTick(se):de.once("end",se),q.on("unpipe",U);function U(oe,H){c("onunpipe"),oe===de&&H&&H.hasUnpiped===!1&&(H.hasUnpiped=!0,_e())}function K(){c("onend"),q.end()}var ie=X(de);q.on("drain",ie);var ge=!1;function _e(){c("cleanup"),q.removeListener("close",xe),q.removeListener("finish",Ae),q.removeListener("drain",ie),q.removeListener("error",Ne),q.removeListener("unpipe",U),de.removeListener("end",K),de.removeListener("end",Me),de.removeListener("data",Ce),ge=!0,ue.awaitDrain&&(!q._writableState||q._writableState.needDrain)&&ie()}de.on("data",Ce);function Ce(oe){c("ondata");var H=q.write(oe);c("dest.write",H),H===!1&&((ue.pipesCount===1&&ue.pipes===q||ue.pipesCount>1&&re(ue.pipes,q)!==-1)&&!ge&&(c("false write response, pause",ue.awaitDrain),ue.awaitDrain++),de.pause())}function Ne(oe){c("onerror",oe),Me(),q.removeListener("error",Ne),e(q,"error")===0&&x(q,oe)}S(q,"error",Ne);function xe(){q.removeListener("finish",Ae),Me()}q.once("close",xe);function Ae(){c("onfinish"),q.removeListener("close",xe),Me()}q.once("finish",Ae);function Me(){c("unpipe"),de.unpipe(q)}return q.emit("pipe",de),ue.flowing||(c("pipe resume"),de.resume()),q};function X(q){return function(){var de=q._readableState;c("pipeOnDrain",de.awaitDrain),de.awaitDrain&&de.awaitDrain--,de.awaitDrain===0&&e(q,"data")&&(de.flowing=!0,j(q))}}C.prototype.unpipe=function(q){var J=this._readableState,de={hasUnpiped:!1};if(J.pipesCount===0)return this;if(J.pipesCount===1)return q&&q!==J.pipes?this:(q||(q=J.pipes),J.pipes=null,J.pipesCount=0,J.flowing=!1,q&&q.emit("unpipe",this,de),this);if(!q){var ue=J.pipes,we=J.pipesCount;J.pipes=null,J.pipesCount=0,J.flowing=!1;for(var se=0;se<we;se++)ue[se].emit("unpipe",this,{hasUnpiped:!1});return this}var U=re(J.pipes,q);return U===-1?this:(J.pipes.splice(U,1),J.pipesCount-=1,J.pipesCount===1&&(J.pipes=J.pipes[0]),q.emit("unpipe",this,de),this)},C.prototype.on=function(q,J){var de=t.prototype.on.call(this,q,J),ue=this._readableState;return q==="data"?(ue.readableListening=this.listenerCount("readable")>0,ue.flowing!==!1&&this.resume()):q==="readable"&&!ue.endEmitted&&!ue.readableListening&&(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,c("on readable",ue.length,ue.reading),ue.length?F(this):ue.reading||Yt.nextTick(R,this)),de},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(q,J){var de=t.prototype.removeListener.call(this,q,J);return q==="readable"&&Yt.nextTick(O,this),de},C.prototype.removeAllListeners=function(q){var J=t.prototype.removeAllListeners.apply(this,arguments);return(q==="readable"||q===void 0)&&Yt.nextTick(O,this),J};function O(q){var J=q._readableState;J.readableListening=q.listenerCount("readable")>0,J.resumeScheduled&&!J.paused?J.flowing=!0:q.listenerCount("data")>0&&q.resume()}function R(q){c("readable nexttick read 0"),q.read(0)}C.prototype.resume=function(){var q=this._readableState;return q.flowing||(c("resume"),q.flowing=!q.readableListening,M(this,q)),q.paused=!1,this};function M(q,J){J.resumeScheduled||(J.resumeScheduled=!0,Yt.nextTick(k,q,J))}function k(q,J){c("resume",J.reading),J.reading||q.read(0),J.resumeScheduled=!1,q.emit("resume"),j(q),J.flowing&&!J.reading&&q.read(0)}C.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function j(q){var J=q._readableState;for(c("flow",J.flowing);J.flowing&&q.read()!==null;);}C.prototype.wrap=function(q){var J=this,de=this._readableState,ue=!1;q.on("end",function(){if(c("wrapped end"),de.decoder&&!de.ended){var U=de.decoder.end();U&&U.length&&J.push(U)}J.push(null)}),q.on("data",function(U){if(c("wrapped data"),de.decoder&&(U=de.decoder.write(U)),!(de.objectMode&&U==null)&&!(!de.objectMode&&(!U||!U.length))){var K=J.push(U);K||(ue=!0,q.pause())}});for(var we in q)this[we]===void 0&&typeof q[we]=="function"&&(this[we]=function(K){return function(){return q[K].apply(q,arguments)}}(we));for(var se=0;se<E.length;se++)q.on(E[se],this.emit.bind(this,E[se]));return this._read=function(U){c("wrapped _read",U),ue&&(ue=!1,q.resume())},this},typeof Symbol=="function"&&(C.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=dme()),w(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),C._fromList=te,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function te(q,J){if(J.length===0)return null;var de;return J.objectMode?de=J.buffer.shift():!q||q>=J.length?(J.decoder?de=J.buffer.join(""):J.buffer.length===1?de=J.buffer.first():de=J.buffer.concat(J.length),J.buffer.clear()):de=J.buffer.consume(q,J.decoder),de}function ae(q){var J=q._readableState;c("endReadable",J.endEmitted),J.endEmitted||(J.ended=!0,Yt.nextTick(he,J,q))}function he(q,J){if(c("endReadableNT",q.endEmitted,q.length),!q.endEmitted&&q.length===0&&(q.endEmitted=!0,J.readable=!1,J.emit("end"),q.autoDestroy)){var de=J._writableState;(!de||de.autoDestroy&&de.finished)&&J.destroy()}}typeof Symbol=="function"&&(C.from=function(q,J){return _===void 0&&(_=hme()),_(C,q,J)});function re(q,J){for(var de=0,ue=q.length;de<ue;de++)if(q[de]===J)return de;return-1}return D_}var M_,v5;function NH(){if(v5)return M_;v5=1,M_=a;var r=kp().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,s=Jh();Ri()(a,s);function o(u,f){var d=this._transformState;d.transforming=!1;var h=d.writecb;if(h===null)return this.emit("error",new t);d.writechunk=null,d.writecb=null,f!=null&&this.push(f),h(u);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);s.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",c)}function c(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,d){l(u,f,d)}):l(this,null,null)}a.prototype.push=function(u,f){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,f)},a.prototype._transform=function(u,f,d){d(new e("_transform()"))},a.prototype._write=function(u,f,d){var h=this._transformState;if(h.writecb=d,h.writechunk=u,h.writeencoding=f,!h.transforming){var g=this._readableState;(h.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(u){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},a.prototype._destroy=function(u,f){s.prototype._destroy.call(this,u,function(d){f(d)})};function l(u,f,d){if(f)return u.emit("error",f);if(d!=null&&u.push(d),u._writableState.length)throw new i;if(u._transformState.transforming)throw new n;return u.push(null)}return M_}var B_,b5;function pme(){if(b5)return B_;b5=1,B_=e;var r=NH();Ri()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},B_}var N_,w5;function gme(){if(w5)return N_;w5=1;var r;function e(d){var h=!1;return function(){h||(h=!0,d.apply(void 0,arguments))}}var t=kp().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function s(d){if(d)throw d}function o(d){return d.setHeader&&typeof d.abort=="function"}function a(d,h,g,p){p=e(p);var m=!1;d.on("close",function(){m=!0}),r===void 0&&(r=C4()),r(d,{readable:h,writable:g},function(v){if(v)return p(v);m=!0,p()});var y=!1;return function(v){if(!m&&!y){if(y=!0,o(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();p(v||new i("pipe"))}}}function c(d){d()}function l(d,h){return d.pipe(h)}function u(d){return!d.length||typeof d[d.length-1]!="function"?s:d.pop()}function f(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];var p=u(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new n("streams");var m,y=h.map(function(v,w){var _=w<h.length-1,x=w>0;return a(v,_,x,function(E){m||(m=E),E&&y.forEach(c),!_&&(y.forEach(c),p(m))})});return h.reduce(l)}return N_=f,N_}var x5;function mme(){return x5||(x5=1,function(r,e){e=r.exports=BH(),e.Stream=e,e.Readable=e,e.Writable=MH(),e.Duplex=Jh(),e.Transform=NH(),e.PassThrough=pme(),e.finished=C4(),e.pipeline=gme()}(Ty,Ty.exports)),Ty.exports}var L_,_5;function LH(){if(_5)return L_;_5=1;var r=so().Buffer,e=mme().Transform,t=Ri();function n(s,o){if(!r.isBuffer(s)&&typeof s!="string")throw new TypeError(o+" must be a string or a buffer")}function i(s){e.call(this),this._block=r.allocUnsafe(s),this._blockSize=s,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return t(i,e),i.prototype._transform=function(s,o,a){var c=null;try{this.update(s,o)}catch(l){c=l}a(c)},i.prototype._flush=function(s){var o=null;try{this.push(this.digest())}catch(a){o=a}s(o)},i.prototype.update=function(s,o){if(n(s,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(s)||(s=r.from(s,o));for(var a=this._block,c=0;this._blockOffset+s.length-c>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)a[l++]=s[c++];this._update(),this._blockOffset=0}for(;c<s.length;)a[this._blockOffset++]=s[c++];for(var u=0,f=s.length*8;f>0;++u)this._length[u]+=f,f=this._length[u]/4294967296|0,f>0&&(this._length[u]-=4294967296*f);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(s){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var o=this._digest();s!==void 0&&(o=o.toString(s)),this._block.fill(0),this._blockOffset=0;for(var a=0;a<4;++a)this._length[a]=0;return o},i.prototype._digest=function(){throw new Error("_digest is not implemented")},L_=i,L_}var F_,S5;function yme(){if(S5)return F_;S5=1;var r=Ri(),e=LH(),t=so().Buffer,n=new Array(16);function i(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}r(i,e),i.prototype._update=function(){for(var u=n,f=0;f<16;++f)u[f]=this._block.readInt32LE(f*4);var d=this._a,h=this._b,g=this._c,p=this._d;d=o(d,h,g,p,u[0],3614090360,7),p=o(p,d,h,g,u[1],3905402710,12),g=o(g,p,d,h,u[2],606105819,17),h=o(h,g,p,d,u[3],3250441966,22),d=o(d,h,g,p,u[4],4118548399,7),p=o(p,d,h,g,u[5],1200080426,12),g=o(g,p,d,h,u[6],2821735955,17),h=o(h,g,p,d,u[7],4249261313,22),d=o(d,h,g,p,u[8],1770035416,7),p=o(p,d,h,g,u[9],2336552879,12),g=o(g,p,d,h,u[10],4294925233,17),h=o(h,g,p,d,u[11],2304563134,22),d=o(d,h,g,p,u[12],1804603682,7),p=o(p,d,h,g,u[13],4254626195,12),g=o(g,p,d,h,u[14],2792965006,17),h=o(h,g,p,d,u[15],1236535329,22),d=a(d,h,g,p,u[1],4129170786,5),p=a(p,d,h,g,u[6],3225465664,9),g=a(g,p,d,h,u[11],643717713,14),h=a(h,g,p,d,u[0],3921069994,20),d=a(d,h,g,p,u[5],3593408605,5),p=a(p,d,h,g,u[10],38016083,9),g=a(g,p,d,h,u[15],3634488961,14),h=a(h,g,p,d,u[4],3889429448,20),d=a(d,h,g,p,u[9],568446438,5),p=a(p,d,h,g,u[14],3275163606,9),g=a(g,p,d,h,u[3],4107603335,14),h=a(h,g,p,d,u[8],1163531501,20),d=a(d,h,g,p,u[13],2850285829,5),p=a(p,d,h,g,u[2],4243563512,9),g=a(g,p,d,h,u[7],1735328473,14),h=a(h,g,p,d,u[12],2368359562,20),d=c(d,h,g,p,u[5],4294588738,4),p=c(p,d,h,g,u[8],2272392833,11),g=c(g,p,d,h,u[11],1839030562,16),h=c(h,g,p,d,u[14],4259657740,23),d=c(d,h,g,p,u[1],2763975236,4),p=c(p,d,h,g,u[4],1272893353,11),g=c(g,p,d,h,u[7],4139469664,16),h=c(h,g,p,d,u[10],3200236656,23),d=c(d,h,g,p,u[13],681279174,4),p=c(p,d,h,g,u[0],3936430074,11),g=c(g,p,d,h,u[3],3572445317,16),h=c(h,g,p,d,u[6],76029189,23),d=c(d,h,g,p,u[9],3654602809,4),p=c(p,d,h,g,u[12],3873151461,11),g=c(g,p,d,h,u[15],530742520,16),h=c(h,g,p,d,u[2],3299628645,23),d=l(d,h,g,p,u[0],4096336452,6),p=l(p,d,h,g,u[7],1126891415,10),g=l(g,p,d,h,u[14],2878612391,15),h=l(h,g,p,d,u[5],4237533241,21),d=l(d,h,g,p,u[12],1700485571,6),p=l(p,d,h,g,u[3],2399980690,10),g=l(g,p,d,h,u[10],4293915773,15),h=l(h,g,p,d,u[1],2240044497,21),d=l(d,h,g,p,u[8],1873313359,6),p=l(p,d,h,g,u[15],4264355552,10),g=l(g,p,d,h,u[6],2734768916,15),h=l(h,g,p,d,u[13],1309151649,21),d=l(d,h,g,p,u[4],4149444226,6),p=l(p,d,h,g,u[11],3174756917,10),g=l(g,p,d,h,u[2],718787259,15),h=l(h,g,p,d,u[9],3951481745,21),this._a=this._a+d|0,this._b=this._b+h|0,this._c=this._c+g|0,this._d=this._d+p|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=t.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function s(u,f){return u<<f|u>>>32-f}function o(u,f,d,h,g,p,m){return s(u+(f&d|~f&h)+g+p|0,m)+f|0}function a(u,f,d,h,g,p,m){return s(u+(f&h|d&~h)+g+p|0,m)+f|0}function c(u,f,d,h,g,p,m){return s(u+(f^d^h)+g+p|0,m)+f|0}function l(u,f,d,h,g,p,m){return s(u+(d^(f|~h))+g+p|0,m)+f|0}return F_=i,F_}var U_,E5;function vme(){if(E5)return U_;E5=1;var r=Rc().Buffer,e=Ri(),t=LH(),n=new Array(16),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],o=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function u(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(u,t),u.prototype._update=function(){for(var y=n,v=0;v<16;++v)y[v]=this._block.readInt32LE(v*4);for(var w=this._a|0,_=this._b|0,x=this._c|0,E=this._d|0,S=this._e|0,T=this._a|0,C=this._b|0,P=this._c|0,V=this._d|0,L=this._e|0,D=0;D<80;D+=1){var b,I;D<16?(b=d(w,_,x,E,S,y[i[D]],c[0],o[D]),I=m(T,C,P,V,L,y[s[D]],l[0],a[D])):D<32?(b=h(w,_,x,E,S,y[i[D]],c[1],o[D]),I=p(T,C,P,V,L,y[s[D]],l[1],a[D])):D<48?(b=g(w,_,x,E,S,y[i[D]],c[2],o[D]),I=g(T,C,P,V,L,y[s[D]],l[2],a[D])):D<64?(b=p(w,_,x,E,S,y[i[D]],c[3],o[D]),I=h(T,C,P,V,L,y[s[D]],l[3],a[D])):(b=m(w,_,x,E,S,y[i[D]],c[4],o[D]),I=d(T,C,P,V,L,y[s[D]],l[4],a[D])),w=S,S=E,E=f(x,10),x=_,_=b,T=L,L=V,V=f(P,10),P=C,C=I}var B=this._b+x+V|0;this._b=this._c+E+L|0,this._c=this._d+S+T|0,this._d=this._e+w+C|0,this._e=this._a+_+P|0,this._a=B},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var y=r.alloc?r.alloc(20):new r(20);return y.writeInt32LE(this._a,0),y.writeInt32LE(this._b,4),y.writeInt32LE(this._c,8),y.writeInt32LE(this._d,12),y.writeInt32LE(this._e,16),y};function f(y,v){return y<<v|y>>>32-v}function d(y,v,w,_,x,E,S,T){return f(y+(v^w^_)+E+S|0,T)+x|0}function h(y,v,w,_,x,E,S,T){return f(y+(v&w|~v&_)+E+S|0,T)+x|0}function g(y,v,w,_,x,E,S,T){return f(y+((v|~w)^_)+E+S|0,T)+x|0}function p(y,v,w,_,x,E,S,T){return f(y+(v&_|w&~_)+E+S|0,T)+x|0}function m(y,v,w,_,x,E,S,T){return f(y+(v^(w|~_))+E+S|0,T)+x|0}return U_=u,U_}var z_={exports:{}},q_,A5;function bme(){if(A5)return q_;A5=1;var r={}.toString;return q_=Array.isArray||function(e){return r.call(e)=="[object Array]"},q_}var j_,I5;function kc(){return I5||(I5=1,j_=TypeError),j_}var V_,C5;function T4(){return C5||(C5=1,V_=Object),V_}var K_,T5;function wme(){return T5||(T5=1,K_=Error),K_}var H_,R5;function xme(){return R5||(R5=1,H_=EvalError),H_}var W_,k5;function _me(){return k5||(k5=1,W_=RangeError),W_}var G_,O5;function Sme(){return O5||(O5=1,G_=ReferenceError),G_}var Y_,P5;function FH(){return P5||(P5=1,Y_=SyntaxError),Y_}var J_,$5;function Eme(){return $5||($5=1,J_=URIError),J_}var X_,D5;function Ame(){return D5||(D5=1,X_=Math.abs),X_}var Z_,M5;function Ime(){return M5||(M5=1,Z_=Math.floor),Z_}var Q_,B5;function Cme(){return B5||(B5=1,Q_=Math.max),Q_}var eS,N5;function Tme(){return N5||(N5=1,eS=Math.min),eS}var tS,L5;function Rme(){return L5||(L5=1,tS=Math.pow),tS}var rS,F5;function kme(){return F5||(F5=1,rS=Math.round),rS}var nS,U5;function Ome(){return U5||(U5=1,nS=Number.isNaN||function(e){return e!==e}),nS}var iS,z5;function Pme(){if(z5)return iS;z5=1;var r=Ome();return iS=function(t){return r(t)||t===0?t:t<0?-1:1},iS}var sS,q5;function $me(){return q5||(q5=1,sS=Object.getOwnPropertyDescriptor),sS}var oS,j5;function Op(){if(j5)return oS;j5=1;var r=$me();if(r)try{r([],"length")}catch{r=null}return oS=r,oS}var aS,V5;function sw(){if(V5)return aS;V5=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return aS=r,aS}var cS,K5;function R4(){return K5||(K5=1,cS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),cS}var lS,H5;function Dme(){if(H5)return lS;H5=1;var r=typeof Symbol<"u"&&Symbol,e=R4();return lS=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},lS}var uS,W5;function UH(){return W5||(W5=1,uS=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),uS}var fS,G5;function zH(){if(G5)return fS;G5=1;var r=T4();return fS=r.getPrototypeOf||null,fS}var dS,Y5;function Mme(){if(Y5)return dS;Y5=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(c,l){for(var u=[],f=0;f<c.length;f+=1)u[f]=c[f];for(var d=0;d<l.length;d+=1)u[d+c.length]=l[d];return u},s=function(c,l){for(var u=[],f=l,d=0;f<c.length;f+=1,d+=1)u[d]=c[f];return u},o=function(a,c){for(var l="",u=0;u<a.length;u+=1)l+=a[u],u+1<a.length&&(l+=c);return l};return dS=function(c){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var u=s(arguments,1),f,d=function(){if(this instanceof f){var y=l.apply(this,i(u,arguments));return Object(y)===y?y:this}return l.apply(c,i(u,arguments))},h=t(0,l.length-u.length),g=[],p=0;p<h;p++)g[p]="$"+p;if(f=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(d),l.prototype){var m=function(){};m.prototype=l.prototype,f.prototype=new m,m.prototype=null}return f},dS}var hS,J5;function Dm(){if(J5)return hS;J5=1;var r=Mme();return hS=Function.prototype.bind||r,hS}var pS,X5;function k4(){return X5||(X5=1,pS=Function.prototype.call),pS}var gS,Z5;function O4(){return Z5||(Z5=1,gS=Function.prototype.apply),gS}var mS,Q5;function Bme(){return Q5||(Q5=1,mS=typeof Reflect<"u"&&Reflect&&Reflect.apply),mS}var yS,e$;function qH(){if(e$)return yS;e$=1;var r=Dm(),e=O4(),t=k4(),n=Bme();return yS=n||r.call(t,e),yS}var vS,t$;function P4(){if(t$)return vS;t$=1;var r=Dm(),e=kc(),t=k4(),n=qH();return vS=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(r,t,s)},vS}var bS,r$;function Nme(){if(r$)return bS;r$=1;var r=P4(),e=Op(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return bS=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,bS}var wS,n$;function $4(){if(n$)return wS;n$=1;var r=UH(),e=zH(),t=Nme();return wS=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,wS}var xS,i$;function jH(){if(i$)return xS;i$=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Dm();return xS=t.call(r,e),xS}var _S,s$;function Mm(){if(s$)return _S;s$=1;var r,e=T4(),t=wme(),n=xme(),i=_me(),s=Sme(),o=FH(),a=kc(),c=Eme(),l=Ame(),u=Ime(),f=Cme(),d=Tme(),h=Rme(),g=kme(),p=Pme(),m=Function,y=function(he){try{return m('"use strict"; return ('+he+").constructor;")()}catch{}},v=Op(),w=sw(),_=function(){throw new a},x=v?function(){try{return arguments.callee,_}catch{try{return v(arguments,"callee").get}catch{return _}}}():_,E=Dme()(),S=$4(),T=zH(),C=UH(),P=O4(),V=k4(),L={},D=typeof Uint8Array>"u"||!S?r:S(Uint8Array),b={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":E&&S?S([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":L,"%AsyncGenerator%":L,"%AsyncGeneratorFunction%":L,"%AsyncIteratorPrototype%":L,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":L,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&S?S(S([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!S?r:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!S?r:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&S?S(""[Symbol.iterator]()):r,"%Symbol%":E?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":x,"%TypedArray%":D,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":V,"%Function.prototype.apply%":P,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":T,"%Math.abs%":l,"%Math.floor%":u,"%Math.max%":f,"%Math.min%":d,"%Math.pow%":h,"%Math.round%":g,"%Math.sign%":p,"%Reflect.getPrototypeOf%":C};if(S)try{null.error}catch(he){var I=S(S(he));b["%Error.prototype%"]=I}var B=function he(re){var q;if(re==="%AsyncFunction%")q=y("async function () {}");else if(re==="%GeneratorFunction%")q=y("function* () {}");else if(re==="%AsyncGeneratorFunction%")q=y("async function* () {}");else if(re==="%AsyncGenerator%"){var J=he("%AsyncGeneratorFunction%");J&&(q=J.prototype)}else if(re==="%AsyncIteratorPrototype%"){var de=he("%AsyncGenerator%");de&&S&&(q=S(de.prototype))}return b[re]=q,q},F={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},z=Dm(),G=jH(),Q=z.call(V,Array.prototype.concat),X=z.call(P,Array.prototype.splice),O=z.call(V,String.prototype.replace),R=z.call(V,String.prototype.slice),M=z.call(V,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,j=/\\(\\)?/g,te=function(re){var q=R(re,0,1),J=R(re,-1);if(q==="%"&&J!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&q!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var de=[];return O(re,k,function(ue,we,se,U){de[de.length]=se?O(U,j,"$1"):we||ue}),de},ae=function(re,q){var J=re,de;if(G(F,J)&&(de=F[J],J="%"+de[0]+"%"),G(b,J)){var ue=b[J];if(ue===L&&(ue=B(J)),typeof ue>"u"&&!q)throw new a("intrinsic "+re+" exists, but is not available. Please file an issue!");return{alias:de,name:J,value:ue}}throw new o("intrinsic "+re+" does not exist!")};return _S=function(re,q){if(typeof re!="string"||re.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new a('"allowMissing" argument must be a boolean');if(M(/^%?[^%]*%?$/,re)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var J=te(re),de=J.length>0?J[0]:"",ue=ae("%"+de+"%",q),we=ue.name,se=ue.value,U=!1,K=ue.alias;K&&(de=K[0],X(J,Q([0,1],K)));for(var ie=1,ge=!0;ie<J.length;ie+=1){var _e=J[ie],Ce=R(_e,0,1),Ne=R(_e,-1);if((Ce==='"'||Ce==="'"||Ce==="`"||Ne==='"'||Ne==="'"||Ne==="`")&&Ce!==Ne)throw new o("property names with quotes must have matching quotes");if((_e==="constructor"||!ge)&&(U=!0),de+="."+_e,we="%"+de+"%",G(b,we))se=b[we];else if(se!=null){if(!(_e in se)){if(!q)throw new a("base intrinsic for "+re+" exists, but the property is not available.");return}if(v&&ie+1>=J.length){var xe=v(se,_e);ge=!!xe,ge&&"get"in xe&&!("originalValue"in xe.get)?se=xe.get:se=se[_e]}else ge=G(se,_e),se=se[_e];ge&&!U&&(b[we]=se)}}return se},_S}var SS,o$;function Ol(){if(o$)return SS;o$=1;var r=Mm(),e=P4(),t=e([r("%String.prototype.indexOf%")]);return SS=function(i,s){var o=r(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},SS}var ES,a$;function Lme(){if(a$)return ES;a$=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(v){v!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(w){try{var _=r.call(w);return i.test(_)}catch{return!1}},o=function(w){try{return s(w)?!1:(r.call(w),!0)}catch{return!1}},a=Object.prototype.toString,c="[object Object]",l="[object Function]",u="[object GeneratorFunction]",f="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,p=!(0 in[,]),m=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(m=function(w){if((p||!w)&&(typeof w>"u"||typeof w=="object"))try{var _=a.call(w);return(_===f||_===d||_===h||_===c)&&w("")==null}catch{}return!1})}return ES=e?function(w){if(m(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{e(w,null,t)}catch(_){if(_!==n)return!1}return!s(w)&&o(w)}:function(w){if(m(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(g)return o(w);if(s(w))return!1;var _=a.call(w);return _!==l&&_!==u&&!/^\[object HTML/.test(_)?!1:o(w)},ES}var AS,c$;function Fme(){if(c$)return AS;c$=1;var r=Lme(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(c,l,u){for(var f=0,d=c.length;f<d;f++)t.call(c,f)&&(u==null?l(c[f],f,c):l.call(u,c[f],f,c))},i=function(c,l,u){for(var f=0,d=c.length;f<d;f++)u==null?l(c.charAt(f),f,c):l.call(u,c.charAt(f),f,c)},s=function(c,l,u){for(var f in c)t.call(c,f)&&(u==null?l(c[f],f,c):l.call(u,c[f],f,c))};function o(a){return e.call(a)==="[object Array]"}return AS=function(c,l,u){if(!r(l))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=u),o(c)?n(c,l,f):typeof c=="string"?i(c,l,f):s(c,l,f)},AS}var IS,l$;function Ume(){return l$||(l$=1,IS=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),IS}var CS,u$;function zme(){if(u$)return CS;u$=1;var r=Ume(),e=typeof globalThis>"u"?Ii:globalThis;return CS=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},CS}var TS={exports:{}},RS,f$;function VH(){if(f$)return RS;f$=1;var r=sw(),e=FH(),t=kc(),n=Op();return RS=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,d=!!n&&n(s,o);if(r)r(s,o,{configurable:u===null&&d?d.configurable:!u,enumerable:c===null&&d?d.enumerable:!c,value:a,writable:l===null&&d?d.writable:!l});else if(f||!c&&!l&&!u)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},RS}var kS,d$;function KH(){if(d$)return kS;d$=1;var r=sw(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},kS=e,kS}var OS,h$;function qme(){if(h$)return OS;h$=1;var r=Mm(),e=VH(),t=KH()(),n=Op(),i=kc(),s=r("%Math.floor%");return OS=function(a,c){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],u=!0,f=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(u=!1),d&&!d.writable&&(f=!1)}return(u||f||!l)&&(t?e(a,"length",c,!0,!0):e(a,"length",c)),a},OS}var PS,p$;function jme(){if(p$)return PS;p$=1;var r=Dm(),e=O4(),t=qH();return PS=function(){return t(r,e,arguments)},PS}var g$;function ow(){return g$||(g$=1,function(r){var e=qme(),t=sw(),n=P4(),i=jme();r.exports=function(o){var a=n(arguments),c=o.length-(arguments.length-1);return e(a,1+(c>0?c:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i}(TS)),TS.exports}var $S,m$;function aw(){if(m$)return $S;m$=1;var r=R4();return $S=function(){return r()&&!!Symbol.toStringTag},$S}var DS,y$;function HH(){if(y$)return DS;y$=1;var r=Fme(),e=zme(),t=ow(),n=Ol(),i=Op(),s=$4(),o=n("Object.prototype.toString"),a=aw()(),c=typeof globalThis>"u"?Ii:globalThis,l=e(),u=n("String.prototype.slice"),f=n("Array.prototype.indexOf",!0)||function(m,y){for(var v=0;v<m.length;v+=1)if(m[v]===y)return v;return-1},d={__proto__:null};a&&i&&s?r(l,function(p){var m=new c[p];if(Symbol.toStringTag in m&&s){var y=s(m),v=i(y,Symbol.toStringTag);if(!v&&y){var w=s(y);v=i(w,Symbol.toStringTag)}d["$"+p]=t(v.get)}}):r(l,function(p){var m=new c[p],y=m.slice||m.set;y&&(d["$"+p]=t(y))});var h=function(m){var y=!1;return r(d,function(v,w){if(!y)try{"$"+v(m)===w&&(y=u(w,1))}catch{}}),y},g=function(m){var y=!1;return r(d,function(v,w){if(!y)try{v(m),y=u(w,1)}catch{}}),y};return DS=function(m){if(!m||typeof m!="object")return!1;if(!a){var y=u(o(m),8,-1);return f(l,y)>-1?y:y!=="Object"?!1:g(m)}return i?h(m):null},DS}var MS,v$;function WH(){if(v$)return MS;v$=1;var r=HH();return MS=function(t){return!!r(t)},MS}var BS,b$;function Vme(){if(b$)return BS;b$=1;var r=kc(),e=Ol(),t=e("TypedArray.prototype.buffer",!0),n=WH();return BS=t||function(s){if(!n(s))throw new r("Not a Typed Array");return s.buffer},BS}var NS,w$;function Kme(){if(w$)return NS;w$=1;var r=so().Buffer,e=bme(),t=Vme(),n=ArrayBuffer.isView||function(c){try{return t(c),!0}catch{return!1}},i=typeof Uint8Array<"u",s=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o=s&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);return NS=function(c,l){if(c instanceof r)return c;if(typeof c=="string")return r.from(c,l);if(s&&n(c)){if(c.byteLength===0)return r.alloc(0);if(o){var u=r.from(c.buffer,c.byteOffset,c.byteLength);if(u.byteLength===c.byteLength)return u}var f=c instanceof Uint8Array?c:new Uint8Array(c.buffer,c.byteOffset,c.byteLength),d=r.from(f);if(d.length===c.byteLength)return d}if(i&&c instanceof Uint8Array)return r.from(c);var h=e(c);if(h)for(var g=0;g<c.length;g+=1){var p=c[g];if(typeof p!="number"||p<0||p>255||~~p!==p)throw new RangeError("Array items must be numbers in the range 0-255.")}if(h||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},NS}var LS,x$;function Pp(){if(x$)return LS;x$=1;var r=so().Buffer,e=Kme();function t(n,i){this._block=r.alloc(n),this._finalSize=i,this._blockSize=n,this._len=0}return t.prototype.update=function(n,i){n=e(n,i||"utf8");for(var s=this._block,o=this._blockSize,a=n.length,c=this._len,l=0;l<a;){for(var u=c%o,f=Math.min(a-l,o-u),d=0;d<f;d++)s[u+d]=n[l+d];c+=f,l+=f,c%o===0&&this._update(s)}return this._len+=a,this},t.prototype.digest=function(n){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var o=(s&4294967295)>>>0,a=(s-o)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(o,this._blockSize-4)}this._update(this._block);var c=this._hash();return n?c.toString(n):c},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},LS=t,LS}var FS,_$;function Hme(){if(_$)return FS;_$=1;var r=Ri(),e=Pp(),t=so().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(l){return l<<5|l>>>27}function a(l){return l<<30|l>>>2}function c(l,u,f,d){return l===0?u&f|~u&d:l===2?u&f|u&d|f&d:u^f^d}return s.prototype._update=function(l){for(var u=this._w,f=this._a|0,d=this._b|0,h=this._c|0,g=this._d|0,p=this._e|0,m=0;m<16;++m)u[m]=l.readInt32BE(m*4);for(;m<80;++m)u[m]=u[m-3]^u[m-8]^u[m-14]^u[m-16];for(var y=0;y<80;++y){var v=~~(y/20),w=o(f)+c(v,d,h,g)+p+u[y]+n[v]|0;p=g,g=h,h=a(d),d=f,f=w}this._a=f+this._a|0,this._b=d+this._b|0,this._c=h+this._c|0,this._d=g+this._d|0,this._e=p+this._e|0},s.prototype._hash=function(){var l=t.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},FS=s,FS}var US,S$;function Wme(){if(S$)return US;S$=1;var r=Ri(),e=Pp(),t=so().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(u){return u<<1|u>>>31}function a(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,f,d,h){return u===0?f&d|~f&h:u===2?f&d|f&h|d&h:f^d^h}return s.prototype._update=function(u){for(var f=this._w,d=this._a|0,h=this._b|0,g=this._c|0,p=this._d|0,m=this._e|0,y=0;y<16;++y)f[y]=u.readInt32BE(y*4);for(;y<80;++y)f[y]=o(f[y-3]^f[y-8]^f[y-14]^f[y-16]);for(var v=0;v<80;++v){var w=~~(v/20),_=a(d)+l(w,h,g,p)+m+f[v]+n[w]|0;m=p,p=g,g=c(h),h=d,d=_}this._a=d+this._a|0,this._b=h+this._b|0,this._c=g+this._c|0,this._d=p+this._d|0,this._e=m+this._e|0},s.prototype._hash=function(){var u=t.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},US=s,US}var zS,E$;function GH(){if(E$)return zS;E$=1;var r=Ri(),e=Pp(),t=so().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function s(){this.init(),this._w=i,e.call(this,64,56)}r(s,e),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function o(d,h,g){return g^d&(h^g)}function a(d,h,g){return d&h|g&(d|h)}function c(d){return(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10)}function l(d){return(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7)}function u(d){return(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3}function f(d){return(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10}return s.prototype._update=function(d){for(var h=this._w,g=this._a|0,p=this._b|0,m=this._c|0,y=this._d|0,v=this._e|0,w=this._f|0,_=this._g|0,x=this._h|0,E=0;E<16;++E)h[E]=d.readInt32BE(E*4);for(;E<64;++E)h[E]=f(h[E-2])+h[E-7]+u(h[E-15])+h[E-16]|0;for(var S=0;S<64;++S){var T=x+l(v)+o(v,w,_)+n[S]+h[S]|0,C=c(g)+a(g,p,m)|0;x=_,_=w,w=v,v=y+T|0,y=m,m=p,p=g,g=T+C|0}this._a=g+this._a|0,this._b=p+this._b|0,this._c=m+this._c|0,this._d=y+this._d|0,this._e=v+this._e|0,this._f=w+this._f|0,this._g=_+this._g|0,this._h=x+this._h|0},s.prototype._hash=function(){var d=t.allocUnsafe(32);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d.writeInt32BE(this._h,28),d},zS=s,zS}var qS,A$;function Gme(){if(A$)return qS;A$=1;var r=Ri(),e=GH(),t=Pp(),n=so().Buffer,i=new Array(64);function s(){this.init(),this._w=i,t.call(this,64,56)}return r(s,e),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var o=n.allocUnsafe(28);return o.writeInt32BE(this._a,0),o.writeInt32BE(this._b,4),o.writeInt32BE(this._c,8),o.writeInt32BE(this._d,12),o.writeInt32BE(this._e,16),o.writeInt32BE(this._f,20),o.writeInt32BE(this._g,24),o},qS=s,qS}var jS,I$;function YH(){if(I$)return jS;I$=1;var r=Ri(),e=Pp(),t=so().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function s(){this.init(),this._w=i,e.call(this,128,112)}r(s,e),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function o(p,m,y){return y^p&(m^y)}function a(p,m,y){return p&m|y&(p|m)}function c(p,m){return(p>>>28|m<<4)^(m>>>2|p<<30)^(m>>>7|p<<25)}function l(p,m){return(p>>>14|m<<18)^(p>>>18|m<<14)^(m>>>9|p<<23)}function u(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^p>>>7}function f(p,m){return(p>>>1|m<<31)^(p>>>8|m<<24)^(p>>>7|m<<25)}function d(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^p>>>6}function h(p,m){return(p>>>19|m<<13)^(m>>>29|p<<3)^(p>>>6|m<<26)}function g(p,m){return p>>>0<m>>>0?1:0}return s.prototype._update=function(p){for(var m=this._w,y=this._ah|0,v=this._bh|0,w=this._ch|0,_=this._dh|0,x=this._eh|0,E=this._fh|0,S=this._gh|0,T=this._hh|0,C=this._al|0,P=this._bl|0,V=this._cl|0,L=this._dl|0,D=this._el|0,b=this._fl|0,I=this._gl|0,B=this._hl|0,F=0;F<32;F+=2)m[F]=p.readInt32BE(F*4),m[F+1]=p.readInt32BE(F*4+4);for(;F<160;F+=2){var z=m[F-30],G=m[F-15*2+1],Q=u(z,G),X=f(G,z);z=m[F-2*2],G=m[F-2*2+1];var O=d(z,G),R=h(G,z),M=m[F-7*2],k=m[F-7*2+1],j=m[F-16*2],te=m[F-16*2+1],ae=X+k|0,he=Q+M+g(ae,X)|0;ae=ae+R|0,he=he+O+g(ae,R)|0,ae=ae+te|0,he=he+j+g(ae,te)|0,m[F]=he,m[F+1]=ae}for(var re=0;re<160;re+=2){he=m[re],ae=m[re+1];var q=a(y,v,w),J=a(C,P,V),de=c(y,C),ue=c(C,y),we=l(x,D),se=l(D,x),U=n[re],K=n[re+1],ie=o(x,E,S),ge=o(D,b,I),_e=B+se|0,Ce=T+we+g(_e,B)|0;_e=_e+ge|0,Ce=Ce+ie+g(_e,ge)|0,_e=_e+K|0,Ce=Ce+U+g(_e,K)|0,_e=_e+ae|0,Ce=Ce+he+g(_e,ae)|0;var Ne=ue+J|0,xe=de+q+g(Ne,ue)|0;T=S,B=I,S=E,I=b,E=x,b=D,D=L+_e|0,x=_+Ce+g(D,L)|0,_=w,L=V,w=v,V=P,v=y,P=C,C=_e+Ne|0,y=Ce+xe+g(C,_e)|0}this._al=this._al+C|0,this._bl=this._bl+P|0,this._cl=this._cl+V|0,this._dl=this._dl+L|0,this._el=this._el+D|0,this._fl=this._fl+b|0,this._gl=this._gl+I|0,this._hl=this._hl+B|0,this._ah=this._ah+y+g(this._al,C)|0,this._bh=this._bh+v+g(this._bl,P)|0,this._ch=this._ch+w+g(this._cl,V)|0,this._dh=this._dh+_+g(this._dl,L)|0,this._eh=this._eh+x+g(this._el,D)|0,this._fh=this._fh+E+g(this._fl,b)|0,this._gh=this._gh+S+g(this._gl,I)|0,this._hh=this._hh+T+g(this._hl,B)|0},s.prototype._hash=function(){var p=t.allocUnsafe(64);function m(y,v,w){p.writeInt32BE(y,w),p.writeInt32BE(v,w+4)}return m(this._ah,this._al,0),m(this._bh,this._bl,8),m(this._ch,this._cl,16),m(this._dh,this._dl,24),m(this._eh,this._el,32),m(this._fh,this._fl,40),m(this._gh,this._gl,48),m(this._hh,this._hl,56),p},jS=s,jS}var VS,C$;function Yme(){if(C$)return VS;C$=1;var r=Ri(),e=YH(),t=Pp(),n=so().Buffer,i=new Array(160);function s(){this.init(),this._w=i,t.call(this,128,112)}return r(s,e),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var o=n.allocUnsafe(48);function a(c,l,u){o.writeInt32BE(c,u),o.writeInt32BE(l,u+4)}return a(this._ah,this._al,0),a(this._bh,this._bl,8),a(this._ch,this._cl,16),a(this._dh,this._dl,24),a(this._eh,this._el,32),a(this._fh,this._fl,40),o},VS=s,VS}var T$;function JH(){return T$||(T$=1,function(r){r.exports=function(t){var n=t.toLowerCase(),i=r.exports[n];if(!i)throw new Error(n+" is not supported (we accept pull requests)");return new i},r.exports.sha=Hme(),r.exports.sha1=Wme(),r.exports.sha224=Gme(),r.exports.sha256=GH(),r.exports.sha384=Yme(),r.exports.sha512=YH()}(z_)),z_.exports}var KS,R$;function Jme(){if(R$)return KS;R$=1;var r=so().Buffer,e=gd.Transform,t=aC().StringDecoder,n=Ri();function i(c){e.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(i,e);var s=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);function a(c,l){if(c instanceof r)return c;if(typeof c=="string")return r.from(c,l);if(o&&ArrayBuffer.isView(c)){if(c.byteLength===0)return r.alloc(0);var u=r.from(c.buffer,c.byteOffset,c.byteLength);if(u.byteLength===c.byteLength)return u}if(s&&c instanceof Uint8Array||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return i.prototype.update=function(c,l,u){var f=a(c,l),d=this._update(f);return this.hashMode?this:(u&&(d=this._toString(d,u)),d)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(c,l,u){var f;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(d){f=d}finally{u(f)}},i.prototype._flush=function(c){var l;try{this.push(this.__final())}catch(u){l=u}c(l)},i.prototype._finalOrDigest=function(c){var l=this.__final()||r.alloc(0);return c&&(l=this._toString(l,c,!0)),l},i.prototype._toString=function(c,l,u){if(this._decoder||(this._decoder=new t(l),this._encoding=l),this._encoding!==l)throw new Error("cant switch encodings");var f=this._decoder.write(c);return u&&(f+=this._decoder.end()),f},KS=i,KS}var HS,k$;function Xme(){if(k$)return HS;k$=1;var r=Ri(),e=yme(),t=vme(),n=JH(),i=Jme();function s(o){i.call(this,"digest"),this._hash=o}return r(s,i),s.prototype._update=function(o){this._hash.update(o)},s.prototype._final=function(){return this._hash.digest()},HS=function(a){return a=a.toLowerCase(),a==="md5"?new e:a==="rmd160"||a==="ripemd160"?new t:new s(n(a))},HS}var WS,O$;function Zme(){if(O$)return WS;O$=1;var r=so().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=s}var c=t.length,l=t.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function d(p){if((Array.isArray(p)||p instanceof Uint8Array)&&(p=r.from(p)),!r.isBuffer(p))throw new TypeError("Expected Buffer");if(p.length===0)return"";for(var m=0,y=0,v=0,w=p.length;v!==w&&p[v]===0;)v++,m++;for(var _=(w-v)*f+1>>>0,x=new Uint8Array(_);v!==w;){for(var E=p[v],S=0,T=_-1;(E!==0||S<y)&&T!==-1;T--,S++)E+=256*x[T]>>>0,x[T]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,v++}for(var C=_-y;C!==_&&x[C]===0;)C++;for(var P=l.repeat(m);C<_;++C)P+=t.charAt(x[C]);return P}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return r.alloc(0);for(var m=0,y=0,v=0;p[m]===l;)y++,m++;for(var w=(p.length-m)*u+1>>>0,_=new Uint8Array(w);m<p.length;){var x=p.charCodeAt(m);if(x>255)return;var E=n[x];if(E===255)return;for(var S=0,T=w-1;(E!==0||S<v)&&T!==-1;T--,S++)E+=c*_[T]>>>0,_[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");v=S,m++}for(var C=w-v;C!==w&&_[C]===0;)C++;var P=r.allocUnsafe(y+(w-C));P.fill(0,0,y);for(var V=y;C!==w;)P[V++]=_[C++];return P}function g(p){var m=h(p);if(m)return m;throw new Error("Non-base"+c+" character")}return{encode:d,decodeUnsafe:h,decode:g}}return WS=e,WS}var GS,P$;function D4(){if(P$)return GS;P$=1;var r=Zme(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return GS=r(e),GS}var YS,$$;function Qme(){if($$)return YS;$$=1;var r=D4(),e=so().Buffer;return YS=function(t){function n(a){var c=t(a);return r.encode(e.concat([a,c],a.length+4))}function i(a){var c=a.slice(0,-4),l=a.slice(-4),u=t(c);if(!(l[0]^u[0]|l[1]^u[1]|l[2]^u[2]|l[3]^u[3]))return c}function s(a){var c=r.decodeUnsafe(a);if(c)return i(c)}function o(a){var c=r.decode(a),l=i(c);if(!l)throw new Error("Invalid checksum");return l}return{encode:n,decode:o,decodeUnsafe:s}},YS}var JS,D$;function eye(){if(D$)return JS;D$=1;var r=Xme(),e=Qme();function t(n){var i=r("sha256").update(n).digest();return r("sha256").update(i).digest()}return JS=e(t),JS}var XS={},i0={},da={},ky={},co={},M$;function M4(){if(M$)return co;M$=1,Object.defineProperty(co,"__esModule",{value:!0}),co.InvalidChecksumError=co.InvalidSequenceComponentError=co.InvalidTypeError=co.InvalidPathLengthError=co.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}co.InvalidSchemeError=r;class e extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}co.InvalidPathLengthError=e;class t extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}co.InvalidTypeError=t;class n extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}co.InvalidSequenceComponentError=n;class i extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}return co.InvalidChecksumError=i,co}var en={},ZS={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var B$;function tye(){return B$||(B$=1,function(r){var e=RH(),t=kH(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var se=new Uint8Array(1),U={foo:function(){return 42}};return Object.setPrototypeOf(U,Uint8Array.prototype),Object.setPrototypeOf(se,U),se.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');var U=new Uint8Array(se);return Object.setPrototypeOf(U,a.prototype),U}function a(se,U,K){if(typeof se=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(se)}return c(se,U,K)}a.poolSize=8192;function c(se,U,K){if(typeof se=="string")return d(se,U);if(ArrayBuffer.isView(se))return g(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(de(se,ArrayBuffer)||se&&de(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(se,SharedArrayBuffer)||se&&de(se.buffer,SharedArrayBuffer)))return p(se,U,K);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ie=se.valueOf&&se.valueOf();if(ie!=null&&ie!==se)return a.from(ie,U,K);var ge=m(se);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return a.from(se[Symbol.toPrimitive]("string"),U,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}a.from=function(se,U,K){return c(se,U,K)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se,U,K){return l(se),se<=0?o(se):U!==void 0?typeof K=="string"?o(se).fill(U,K):o(se).fill(U):o(se)}a.alloc=function(se,U,K){return u(se,U,K)};function f(se){return l(se),o(se<0?0:y(se)|0)}a.allocUnsafe=function(se){return f(se)},a.allocUnsafeSlow=function(se){return f(se)};function d(se,U){if((typeof U!="string"||U==="")&&(U="utf8"),!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);var K=w(se,U)|0,ie=o(K),ge=ie.write(se,U);return ge!==K&&(ie=ie.slice(0,ge)),ie}function h(se){for(var U=se.length<0?0:y(se.length)|0,K=o(U),ie=0;ie<U;ie+=1)K[ie]=se[ie]&255;return K}function g(se){if(de(se,Uint8Array)){var U=new Uint8Array(se);return p(U.buffer,U.byteOffset,U.byteLength)}return h(se)}function p(se,U,K){if(U<0||se.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<U+(K||0))throw new RangeError('"length" is outside of buffer bounds');var ie;return U===void 0&&K===void 0?ie=new Uint8Array(se):K===void 0?ie=new Uint8Array(se,U):ie=new Uint8Array(se,U,K),Object.setPrototypeOf(ie,a.prototype),ie}function m(se){if(a.isBuffer(se)){var U=y(se.length)|0,K=o(U);return K.length===0||se.copy(K,0,0,U),K}if(se.length!==void 0)return typeof se.length!="number"||ue(se.length)?o(0):h(se);if(se.type==="Buffer"&&Array.isArray(se.data))return h(se.data)}function y(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function v(se){return+se!=se&&(se=0),a.alloc(+se)}a.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==a.prototype},a.compare=function(U,K){if(de(U,Uint8Array)&&(U=a.from(U,U.offset,U.byteLength)),de(K,Uint8Array)&&(K=a.from(K,K.offset,K.byteLength)),!a.isBuffer(U)||!a.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===K)return 0;for(var ie=U.length,ge=K.length,_e=0,Ce=Math.min(ie,ge);_e<Ce;++_e)if(U[_e]!==K[_e]){ie=U[_e],ge=K[_e];break}return ie<ge?-1:ge<ie?1:0},a.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(U,K){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return a.alloc(0);var ie;if(K===void 0)for(K=0,ie=0;ie<U.length;++ie)K+=U[ie].length;var ge=a.allocUnsafe(K),_e=0;for(ie=0;ie<U.length;++ie){var Ce=U[ie];if(de(Ce,Uint8Array))_e+Ce.length>ge.length?a.from(Ce).copy(ge,_e):Uint8Array.prototype.set.call(ge,Ce,_e);else if(a.isBuffer(Ce))Ce.copy(ge,_e);else throw new TypeError('"list" argument must be an Array of Buffers');_e+=Ce.length}return ge};function w(se,U){if(a.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||de(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var K=se.length,ie=arguments.length>2&&arguments[2]===!0;if(!ie&&K===0)return 0;for(var ge=!1;;)switch(U){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return ae(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return q(se).length;default:if(ge)return ie?-1:ae(se).length;U=(""+U).toLowerCase(),ge=!0}}a.byteLength=w;function _(se,U,K){var ie=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,U>>>=0,K<=U))return"";for(se||(se="utf8");;)switch(se){case"hex":return G(this,U,K);case"utf8":case"utf-8":return b(this,U,K);case"ascii":return F(this,U,K);case"latin1":case"binary":return z(this,U,K);case"base64":return D(this,U,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,U,K);default:if(ie)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),ie=!0}}a.prototype._isBuffer=!0;function x(se,U,K){var ie=se[U];se[U]=se[K],se[K]=ie}a.prototype.swap16=function(){var U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<U;K+=2)x(this,K,K+1);return this},a.prototype.swap32=function(){var U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<U;K+=4)x(this,K,K+3),x(this,K+1,K+2);return this},a.prototype.swap64=function(){var U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<U;K+=8)x(this,K,K+7),x(this,K+1,K+6),x(this,K+2,K+5),x(this,K+3,K+4);return this},a.prototype.toString=function(){var U=this.length;return U===0?"":arguments.length===0?b(this,0,U):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(U){if(!a.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:a.compare(this,U)===0},a.prototype.inspect=function(){var U="",K=r.INSPECT_MAX_BYTES;return U=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(U+=" ... "),"<Buffer "+U+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(U,K,ie,ge,_e){if(de(U,Uint8Array)&&(U=a.from(U,U.offset,U.byteLength)),!a.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(K===void 0&&(K=0),ie===void 0&&(ie=U?U.length:0),ge===void 0&&(ge=0),_e===void 0&&(_e=this.length),K<0||ie>U.length||ge<0||_e>this.length)throw new RangeError("out of range index");if(ge>=_e&&K>=ie)return 0;if(ge>=_e)return-1;if(K>=ie)return 1;if(K>>>=0,ie>>>=0,ge>>>=0,_e>>>=0,this===U)return 0;for(var Ce=_e-ge,Ne=ie-K,xe=Math.min(Ce,Ne),Ae=this.slice(ge,_e),Me=U.slice(K,ie),oe=0;oe<xe;++oe)if(Ae[oe]!==Me[oe]){Ce=Ae[oe],Ne=Me[oe];break}return Ce<Ne?-1:Ne<Ce?1:0};function E(se,U,K,ie,ge){if(se.length===0)return-1;if(typeof K=="string"?(ie=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,ue(K)&&(K=ge?0:se.length-1),K<0&&(K=se.length+K),K>=se.length){if(ge)return-1;K=se.length-1}else if(K<0)if(ge)K=0;else return-1;if(typeof U=="string"&&(U=a.from(U,ie)),a.isBuffer(U))return U.length===0?-1:S(se,U,K,ie,ge);if(typeof U=="number")return U=U&255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(se,U,K):Uint8Array.prototype.lastIndexOf.call(se,U,K):S(se,[U],K,ie,ge);throw new TypeError("val must be string, number or Buffer")}function S(se,U,K,ie,ge){var _e=1,Ce=se.length,Ne=U.length;if(ie!==void 0&&(ie=String(ie).toLowerCase(),ie==="ucs2"||ie==="ucs-2"||ie==="utf16le"||ie==="utf-16le")){if(se.length<2||U.length<2)return-1;_e=2,Ce/=2,Ne/=2,K/=2}function xe(ee,W){return _e===1?ee[W]:ee.readUInt16BE(W*_e)}var Ae;if(ge){var Me=-1;for(Ae=K;Ae<Ce;Ae++)if(xe(se,Ae)===xe(U,Me===-1?0:Ae-Me)){if(Me===-1&&(Me=Ae),Ae-Me+1===Ne)return Me*_e}else Me!==-1&&(Ae-=Ae-Me),Me=-1}else for(K+Ne>Ce&&(K=Ce-Ne),Ae=K;Ae>=0;Ae--){for(var oe=!0,H=0;H<Ne;H++)if(xe(se,Ae+H)!==xe(U,H)){oe=!1;break}if(oe)return Ae}return-1}a.prototype.includes=function(U,K,ie){return this.indexOf(U,K,ie)!==-1},a.prototype.indexOf=function(U,K,ie){return E(this,U,K,ie,!0)},a.prototype.lastIndexOf=function(U,K,ie){return E(this,U,K,ie,!1)};function T(se,U,K,ie){K=Number(K)||0;var ge=se.length-K;ie?(ie=Number(ie),ie>ge&&(ie=ge)):ie=ge;var _e=U.length;ie>_e/2&&(ie=_e/2);for(var Ce=0;Ce<ie;++Ce){var Ne=parseInt(U.substr(Ce*2,2),16);if(ue(Ne))return Ce;se[K+Ce]=Ne}return Ce}function C(se,U,K,ie){return J(ae(U,se.length-K),se,K,ie)}function P(se,U,K,ie){return J(he(U),se,K,ie)}function V(se,U,K,ie){return J(q(U),se,K,ie)}function L(se,U,K,ie){return J(re(U,se.length-K),se,K,ie)}a.prototype.write=function(U,K,ie,ge){if(K===void 0)ge="utf8",ie=this.length,K=0;else if(ie===void 0&&typeof K=="string")ge=K,ie=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(ie)?(ie=ie>>>0,ge===void 0&&(ge="utf8")):(ge=ie,ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _e=this.length-K;if((ie===void 0||ie>_e)&&(ie=_e),U.length>0&&(ie<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var Ce=!1;;)switch(ge){case"hex":return T(this,U,K,ie);case"utf8":case"utf-8":return C(this,U,K,ie);case"ascii":case"latin1":case"binary":return P(this,U,K,ie);case"base64":return V(this,U,K,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,U,K,ie);default:if(Ce)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),Ce=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(se,U,K){return U===0&&K===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(U,K))}function b(se,U,K){K=Math.min(se.length,K);for(var ie=[],ge=U;ge<K;){var _e=se[ge],Ce=null,Ne=_e>239?4:_e>223?3:_e>191?2:1;if(ge+Ne<=K){var xe,Ae,Me,oe;switch(Ne){case 1:_e<128&&(Ce=_e);break;case 2:xe=se[ge+1],(xe&192)===128&&(oe=(_e&31)<<6|xe&63,oe>127&&(Ce=oe));break;case 3:xe=se[ge+1],Ae=se[ge+2],(xe&192)===128&&(Ae&192)===128&&(oe=(_e&15)<<12|(xe&63)<<6|Ae&63,oe>2047&&(oe<55296||oe>57343)&&(Ce=oe));break;case 4:xe=se[ge+1],Ae=se[ge+2],Me=se[ge+3],(xe&192)===128&&(Ae&192)===128&&(Me&192)===128&&(oe=(_e&15)<<18|(xe&63)<<12|(Ae&63)<<6|Me&63,oe>65535&&oe<1114112&&(Ce=oe))}}Ce===null?(Ce=65533,Ne=1):Ce>65535&&(Ce-=65536,ie.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),ie.push(Ce),ge+=Ne}return B(ie)}var I=4096;function B(se){var U=se.length;if(U<=I)return String.fromCharCode.apply(String,se);for(var K="",ie=0;ie<U;)K+=String.fromCharCode.apply(String,se.slice(ie,ie+=I));return K}function F(se,U,K){var ie="";K=Math.min(se.length,K);for(var ge=U;ge<K;++ge)ie+=String.fromCharCode(se[ge]&127);return ie}function z(se,U,K){var ie="";K=Math.min(se.length,K);for(var ge=U;ge<K;++ge)ie+=String.fromCharCode(se[ge]);return ie}function G(se,U,K){var ie=se.length;(!U||U<0)&&(U=0),(!K||K<0||K>ie)&&(K=ie);for(var ge="",_e=U;_e<K;++_e)ge+=we[se[_e]];return ge}function Q(se,U,K){for(var ie=se.slice(U,K),ge="",_e=0;_e<ie.length-1;_e+=2)ge+=String.fromCharCode(ie[_e]+ie[_e+1]*256);return ge}a.prototype.slice=function(U,K){var ie=this.length;U=~~U,K=K===void 0?ie:~~K,U<0?(U+=ie,U<0&&(U=0)):U>ie&&(U=ie),K<0?(K+=ie,K<0&&(K=0)):K>ie&&(K=ie),K<U&&(K=U);var ge=this.subarray(U,K);return Object.setPrototypeOf(ge,a.prototype),ge};function X(se,U,K){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+U>K)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(U,K,ie){U=U>>>0,K=K>>>0,ie||X(U,K,this.length);for(var ge=this[U],_e=1,Ce=0;++Ce<K&&(_e*=256);)ge+=this[U+Ce]*_e;return ge},a.prototype.readUintBE=a.prototype.readUIntBE=function(U,K,ie){U=U>>>0,K=K>>>0,ie||X(U,K,this.length);for(var ge=this[U+--K],_e=1;K>0&&(_e*=256);)ge+=this[U+--K]*_e;return ge},a.prototype.readUint8=a.prototype.readUInt8=function(U,K){return U=U>>>0,K||X(U,1,this.length),this[U]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(U,K){return U=U>>>0,K||X(U,2,this.length),this[U]|this[U+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(U,K){return U=U>>>0,K||X(U,2,this.length),this[U]<<8|this[U+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(U,K){return U=U>>>0,K||X(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(U,K){return U=U>>>0,K||X(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},a.prototype.readIntLE=function(U,K,ie){U=U>>>0,K=K>>>0,ie||X(U,K,this.length);for(var ge=this[U],_e=1,Ce=0;++Ce<K&&(_e*=256);)ge+=this[U+Ce]*_e;return _e*=128,ge>=_e&&(ge-=Math.pow(2,8*K)),ge},a.prototype.readIntBE=function(U,K,ie){U=U>>>0,K=K>>>0,ie||X(U,K,this.length);for(var ge=K,_e=1,Ce=this[U+--ge];ge>0&&(_e*=256);)Ce+=this[U+--ge]*_e;return _e*=128,Ce>=_e&&(Ce-=Math.pow(2,8*K)),Ce},a.prototype.readInt8=function(U,K){return U=U>>>0,K||X(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},a.prototype.readInt16LE=function(U,K){U=U>>>0,K||X(U,2,this.length);var ie=this[U]|this[U+1]<<8;return ie&32768?ie|4294901760:ie},a.prototype.readInt16BE=function(U,K){U=U>>>0,K||X(U,2,this.length);var ie=this[U+1]|this[U]<<8;return ie&32768?ie|4294901760:ie},a.prototype.readInt32LE=function(U,K){return U=U>>>0,K||X(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},a.prototype.readInt32BE=function(U,K){return U=U>>>0,K||X(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},a.prototype.readFloatLE=function(U,K){return U=U>>>0,K||X(U,4,this.length),t.read(this,U,!0,23,4)},a.prototype.readFloatBE=function(U,K){return U=U>>>0,K||X(U,4,this.length),t.read(this,U,!1,23,4)},a.prototype.readDoubleLE=function(U,K){return U=U>>>0,K||X(U,8,this.length),t.read(this,U,!0,52,8)},a.prototype.readDoubleBE=function(U,K){return U=U>>>0,K||X(U,8,this.length),t.read(this,U,!1,52,8)};function O(se,U,K,ie,ge,_e){if(!a.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>ge||U<_e)throw new RangeError('"value" argument is out of bounds');if(K+ie>se.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(U,K,ie,ge){if(U=+U,K=K>>>0,ie=ie>>>0,!ge){var _e=Math.pow(2,8*ie)-1;O(this,U,K,ie,_e,0)}var Ce=1,Ne=0;for(this[K]=U&255;++Ne<ie&&(Ce*=256);)this[K+Ne]=U/Ce&255;return K+ie},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(U,K,ie,ge){if(U=+U,K=K>>>0,ie=ie>>>0,!ge){var _e=Math.pow(2,8*ie)-1;O(this,U,K,ie,_e,0)}var Ce=ie-1,Ne=1;for(this[K+Ce]=U&255;--Ce>=0&&(Ne*=256);)this[K+Ce]=U/Ne&255;return K+ie},a.prototype.writeUint8=a.prototype.writeUInt8=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,1,255,0),this[K]=U&255,K+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,2,65535,0),this[K]=U&255,this[K+1]=U>>>8,K+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,2,65535,0),this[K]=U>>>8,this[K+1]=U&255,K+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,4,4294967295,0),this[K+3]=U>>>24,this[K+2]=U>>>16,this[K+1]=U>>>8,this[K]=U&255,K+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,4,4294967295,0),this[K]=U>>>24,this[K+1]=U>>>16,this[K+2]=U>>>8,this[K+3]=U&255,K+4},a.prototype.writeIntLE=function(U,K,ie,ge){if(U=+U,K=K>>>0,!ge){var _e=Math.pow(2,8*ie-1);O(this,U,K,ie,_e-1,-_e)}var Ce=0,Ne=1,xe=0;for(this[K]=U&255;++Ce<ie&&(Ne*=256);)U<0&&xe===0&&this[K+Ce-1]!==0&&(xe=1),this[K+Ce]=(U/Ne>>0)-xe&255;return K+ie},a.prototype.writeIntBE=function(U,K,ie,ge){if(U=+U,K=K>>>0,!ge){var _e=Math.pow(2,8*ie-1);O(this,U,K,ie,_e-1,-_e)}var Ce=ie-1,Ne=1,xe=0;for(this[K+Ce]=U&255;--Ce>=0&&(Ne*=256);)U<0&&xe===0&&this[K+Ce+1]!==0&&(xe=1),this[K+Ce]=(U/Ne>>0)-xe&255;return K+ie},a.prototype.writeInt8=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,1,127,-128),U<0&&(U=255+U+1),this[K]=U&255,K+1},a.prototype.writeInt16LE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,2,32767,-32768),this[K]=U&255,this[K+1]=U>>>8,K+2},a.prototype.writeInt16BE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,2,32767,-32768),this[K]=U>>>8,this[K+1]=U&255,K+2},a.prototype.writeInt32LE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,4,2147483647,-2147483648),this[K]=U&255,this[K+1]=U>>>8,this[K+2]=U>>>16,this[K+3]=U>>>24,K+4},a.prototype.writeInt32BE=function(U,K,ie){return U=+U,K=K>>>0,ie||O(this,U,K,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[K]=U>>>24,this[K+1]=U>>>16,this[K+2]=U>>>8,this[K+3]=U&255,K+4};function R(se,U,K,ie,ge,_e){if(K+ie>se.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function M(se,U,K,ie,ge){return U=+U,K=K>>>0,ge||R(se,U,K,4),t.write(se,U,K,ie,23,4),K+4}a.prototype.writeFloatLE=function(U,K,ie){return M(this,U,K,!0,ie)},a.prototype.writeFloatBE=function(U,K,ie){return M(this,U,K,!1,ie)};function k(se,U,K,ie,ge){return U=+U,K=K>>>0,ge||R(se,U,K,8),t.write(se,U,K,ie,52,8),K+8}a.prototype.writeDoubleLE=function(U,K,ie){return k(this,U,K,!0,ie)},a.prototype.writeDoubleBE=function(U,K,ie){return k(this,U,K,!1,ie)},a.prototype.copy=function(U,K,ie,ge){if(!a.isBuffer(U))throw new TypeError("argument should be a Buffer");if(ie||(ie=0),!ge&&ge!==0&&(ge=this.length),K>=U.length&&(K=U.length),K||(K=0),ge>0&&ge<ie&&(ge=ie),ge===ie||U.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),U.length-K<ge-ie&&(ge=U.length-K+ie);var _e=ge-ie;return this===U&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(K,ie,ge):Uint8Array.prototype.set.call(U,this.subarray(ie,ge),K),_e},a.prototype.fill=function(U,K,ie,ge){if(typeof U=="string"){if(typeof K=="string"?(ge=K,K=0,ie=this.length):typeof ie=="string"&&(ge=ie,ie=this.length),ge!==void 0&&typeof ge!="string")throw new TypeError("encoding must be a string");if(typeof ge=="string"&&!a.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(U.length===1){var _e=U.charCodeAt(0);(ge==="utf8"&&_e<128||ge==="latin1")&&(U=_e)}}else typeof U=="number"?U=U&255:typeof U=="boolean"&&(U=Number(U));if(K<0||this.length<K||this.length<ie)throw new RangeError("Out of range index");if(ie<=K)return this;K=K>>>0,ie=ie===void 0?this.length:ie>>>0,U||(U=0);var Ce;if(typeof U=="number")for(Ce=K;Ce<ie;++Ce)this[Ce]=U;else{var Ne=a.isBuffer(U)?U:a.from(U,ge),xe=Ne.length;if(xe===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(Ce=0;Ce<ie-K;++Ce)this[Ce+K]=Ne[Ce%xe]}return this};var j=/[^+/0-9A-Za-z-_]/g;function te(se){if(se=se.split("=")[0],se=se.trim().replace(j,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function ae(se,U){U=U||1/0;for(var K,ie=se.length,ge=null,_e=[],Ce=0;Ce<ie;++Ce){if(K=se.charCodeAt(Ce),K>55295&&K<57344){if(!ge){if(K>56319){(U-=3)>-1&&_e.push(239,191,189);continue}else if(Ce+1===ie){(U-=3)>-1&&_e.push(239,191,189);continue}ge=K;continue}if(K<56320){(U-=3)>-1&&_e.push(239,191,189),ge=K;continue}K=(ge-55296<<10|K-56320)+65536}else ge&&(U-=3)>-1&&_e.push(239,191,189);if(ge=null,K<128){if((U-=1)<0)break;_e.push(K)}else if(K<2048){if((U-=2)<0)break;_e.push(K>>6|192,K&63|128)}else if(K<65536){if((U-=3)<0)break;_e.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((U-=4)<0)break;_e.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return _e}function he(se){for(var U=[],K=0;K<se.length;++K)U.push(se.charCodeAt(K)&255);return U}function re(se,U){for(var K,ie,ge,_e=[],Ce=0;Ce<se.length&&!((U-=2)<0);++Ce)K=se.charCodeAt(Ce),ie=K>>8,ge=K%256,_e.push(ge),_e.push(ie);return _e}function q(se){return e.toByteArray(te(se))}function J(se,U,K,ie){for(var ge=0;ge<ie&&!(ge+K>=U.length||ge>=se.length);++ge)U[ge+K]=se[ge];return ge}function de(se,U){return se instanceof U||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===U.name}function ue(se){return se!==se}var we=function(){for(var se="0123456789abcdef",U=new Array(256),K=0;K<16;++K)for(var ie=K*16,ge=0;ge<16;++ge)U[ie+ge]=se[K]+se[ge];return U}()}(ZS)),ZS}var Ki=tye();const Ua=Ki.Buffer.from&&Ki.Buffer.alloc&&Ki.Buffer.allocUnsafe&&Ki.Buffer.allocUnsafeSlow?Ki.Buffer.from:r=>new Ki.Buffer(r);function za(r,e){const t=(n,i)=>e(n,i)>>>0;return t.signed=e,t.unsigned=t,t.model=r,t}const XH=za("crc1",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=~~e,n=0;for(let i=0;i<r.length;i++){const s=r[i];n+=s}return t+=n%256,t%256});let cC=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];typeof Int32Array<"u"&&(cC=new Int32Array(cC));const ZH=za("crc-8",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=cC[(t^i)&255]&255}return t});let lC=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];typeof Int32Array<"u"&&(lC=new Int32Array(lC));const QH=za("dallas-1-wire",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=lC[(t^i)&255]&255}return t});let uC=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];typeof Int32Array<"u"&&(uC=new Int32Array(uC));const eW=za("crc-16",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=~~e;for(let n=0;n<r.length;n++){const i=r[n];t=(uC[(t^i)&255]^t>>8)&65535}return t});let fC=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];typeof Int32Array<"u"&&(fC=new Int32Array(fC));const tW=za("ccitt",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=typeof e<"u"?~~e:65535;for(let n=0;n<r.length;n++){const i=r[n];t=(fC[(t>>8^i)&255]^t<<8)&65535}return t});let dC=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];typeof Int32Array<"u"&&(dC=new Int32Array(dC));const rW=za("crc-16-modbus",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=typeof e<"u"?~~e:65535;for(let n=0;n<r.length;n++){const i=r[n];t=(dC[(t^i)&255]^t>>8)&65535}return t}),nW=za("xmodem",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=typeof e<"u"?~~e:0;for(let n=0;n<r.length;n++){const i=r[n];let s=t>>>8&255;s^=i&255,s^=s>>>4,t=t<<8&65535,t^=s,s=s<<5&65535,t^=s,s=s<<7&65535,t^=s}return t});let hC=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];typeof Int32Array<"u"&&(hC=new Int32Array(hC));const iW=za("kermit",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=typeof e<"u"?~~e:0;for(let n=0;n<r.length;n++){const i=r[n];t=(hC[(t^i)&255]^t>>8)&65535}return t});let pC=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];typeof Int32Array<"u"&&(pC=new Int32Array(pC));const sW=za("crc-24",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=typeof e<"u"?~~e:11994318;for(let n=0;n<r.length;n++){const i=r[n];t=(pC[(t>>16^i)&255]^t<<8)&16777215}return t});let gC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(gC=new Int32Array(gC));const oW=za("crc-32",function(r,e){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=e===0?0:~~e^-1;for(let n=0;n<r.length;n++){const i=r[n];t=gC[(t^i)&255]^t>>>8}return t^-1});let mC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(mC=new Int32Array(mC));const aW=za("jam",function(r,e=-1){Ki.Buffer.isBuffer(r)||(r=Ua(r));let t=e===0?0:~~e;for(let n=0;n<r.length;n++){const i=r[n];t=mC[(t^i)&255]^t>>>8}return t}),rye={crc1:XH,crc8:ZH,crc81wire:QH,crc16:eW,crc16ccitt:tW,crc16modbus:rW,crc16xmodem:nW,crc16kermit:iW,crc24:sW,crc32:oW,crcjam:aW},nye=Object.freeze(Object.defineProperty({__proto__:null,crc1:XH,crc16:eW,crc16ccitt:tW,crc16kermit:iW,crc16modbus:rW,crc16xmodem:nW,crc24:sW,crc32:oW,crc8:ZH,crc81wire:QH,crcjam:aW,default:rye},Symbol.toStringTag,{value:"Module"})),iye=gp(nye);var N$;function bd(){if(N$)return en;N$=1;var r=en&&en.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(en,"__esModule",{value:!0}),en.bufferXOR=en.setDifference=en.arrayContains=en.arraysEqual=en.hasPrefix=en.isURType=en.intToBytes=en.toUint32=en.getCRCHex=en.getCRC=en.split=en.partition=en.sha256Hash=void 0;const e=r(JH()),t=iye,n=m=>e.default("sha256").update(m).digest();en.sha256Hash=n;const i=(m,y)=>m.match(new RegExp(".{1,"+y+"}","g"))||[m];en.partition=i;const s=(m,y)=>[m.slice(0,-y),m.slice(-y)];en.split=s;const o=m=>t.crc32(m);en.getCRC=o;const a=m=>t.crc32(m).toString(16).padStart(8,"0");en.getCRCHex=a;const c=m=>m>>>0;en.toUint32=c;const l=m=>{const y=new ArrayBuffer(4);return new DataView(y).setUint32(0,m,!1),Ze.from(y)};en.intToBytes=l;const u=m=>m.split("").every((y,v)=>{let w=m.charCodeAt(v);return 97<=w&&w<=122||48<=w&&w<=57||w===45});en.isURType=u;const f=(m,y)=>m.indexOf(y)===0;en.hasPrefix=f;const d=(m,y)=>m.length!==y.length?!1:m.every(v=>y.includes(v));en.arraysEqual=d;const h=(m,y)=>y.every(v=>m.includes(v));en.arrayContains=h;const g=(m,y)=>m.filter(v=>y.indexOf(v)<0);en.setDifference=g;const p=(m,y)=>{const v=Math.max(m.length,y.length),w=Ze.allocUnsafe(v);for(let _=0;_<v;++_)w[_]=m[_]^y[_];return w};return en.bufferXOR=p,en}var rf={},Iv={exports:{}},sye=Iv.exports,L$;function oye(){return L$||(L$=1,function(r){(function(e,t){r.exports?r.exports=t():e.CBOR=t()})(sye,function(){var e=function(){function t(E){this.$hex=E}t.prototype={length:function(){return this.$hex.length/2},toString:function(E){if(!E||E==="hex"||E===16)return this.$hex;if(E==="utf-8"){for(var S="",T=0;T<this.$hex.length;T+=2)S+="%"+this.$hex.substring(T,T+2);return decodeURIComponent(S)}if(E==="latin"){for(var S=[],T=0;T<this.$hex.length;T+=2)S.push(parseInt(this.$hex.substring(T,T+2),16));return String.fromCharCode.apply(String,S)}throw new Error("Unrecognised format: "+E)}},t.fromLatinString=function(E){for(var S="",T=0;T<E.length;T++){var C=E.charCodeAt(T).toString(16);C.length===1&&(C="0"+C),S+=C}return new t(S)},t.fromUtf8String=function(E){for(var S=encodeURIComponent(E),T="",C=0;C<S.length;C++)if(S.charAt(C)==="%")T+=S.substring(C+1,C+3),C+=2;else{var P=S.charCodeAt(C).toString(16);P.length<2&&(P="0"+P),T+=P}return new t(T)};var n=[],i={},s=function(E){return function(){throw new Error(E+" not implemented")}};function o(){}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var E=this.readUint16(),S=(E&32767)>>10,T=E&1023,C=E&32768;if(S===31)return T===0?C?-1/0:1/0:NaN;var P=S?Math.pow(2,S-25)*(1024+T):Math.pow(2,-24)*T;return C?-P:P},readFloat32:function(){var E=this.readUint32(),S=(E&2147483647)>>23,T=E&8388607,C=E&2147483648;if(S===255)return T===0?C?-1/0:1/0:NaN;var P=S?Math.pow(2,S-23-127)*(8388608+T):Math.pow(2,-149)*T;return C?-P:P},readFloat64:function(){var E=this.readUint32(),S=this.readUint32(),T=E>>20&2047,C=(E&1048575)*4294967296+S,P=E&2147483648;if(T===2047)return C===0?P?-1/0:1/0:NaN;var V=T?Math.pow(2,T-52-1023)*(4503599627370496+C):Math.pow(2,-1074)*C;return P?-V:V},readUint16:function(){return this.readByte()*256+this.readByte()},readUint32:function(){return this.readUint16()*65536+this.readUint16()},readUint64:function(){return this.readUint32()*4294967296+this.readUint32()}};function a(){}a.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(E){this.writeByte(E>>8&255),this.writeByte(E&255)},writeUint32:function(E){this.writeUint16(E>>16&65535),this.writeUint16(E&65535)},writeUint64:function(E){if(E>=9007199254740992||E<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+E+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(E/4294967296)),this.writeUint32(E%4294967296)},writeString:s("writeString"),canWriteBinary:function(E){return!1},writeBinary:s("writeChunk")};function c(E){var S=E.readByte(),T=S>>5,C=S&31;return{type:T,value:C}}function l(E,S){var T=E.value;if(T<24)return T;if(T==24)return S.readByte();if(T==25)return S.readUint16();if(T==26)return S.readUint32();if(T==27)return S.readUint64();if(T==31)return null;s("Additional info: "+T)()}function u(E,S,T){T.writeByte(E<<5|S)}function f(E,S,T){var C=E<<5;S<24?T.writeByte(C|S):S<256?(T.writeByte(C|24),T.writeByte(S)):S<65536?(T.writeByte(C|25),T.writeUint16(S)):S<4294967296?(T.writeByte(C|26),T.writeUint32(S)):(T.writeByte(C|27),T.writeUint64(S))}var d=new Error;function h(E){var S=c(E);switch(S.type){case 0:return l(S,E);case 1:return-1-l(S,E);case 2:return E.readChunk(l(S,E));case 3:var T=E.readChunk(l(S,E));return T.toString("utf-8");case 4:case 5:var C=l(S,E),I=[];if(C!==null){S.type===5&&(C*=2);for(var P=0;P<C;P++)I[P]=h(E)}else for(var V;(V=h(E))!==d;)I.push(V);if(S.type===5){for(var L={},P=0;P<I.length;P+=2)L[I[P]]=I[P+1];return L}else return I;case 6:var D=l(S,E),b=i[D],I=h(E);return b?b(I):I;case 7:if(S.value===25)return E.readFloat16();if(S.value===26)return E.readFloat32();if(S.value===27)return E.readFloat64();switch(l(S,E)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case null:return d;default:throw new Error("Unknown fixed value: "+S.value)}default:throw new Error("Unsupported header: "+JSON.stringify(S))}throw new Error("not implemented yet")}function g(E,S){for(var T=0;T<n.length;T++){var C=n[T].fn(E);if(C!==void 0)return f(6,n[T].tag,S),g(C,S)}if(E&&typeof E.toCBOR=="function"&&(E=E.toCBOR()),E===!1)f(7,20,S);else if(E===!0)f(7,21,S);else if(E===null)f(7,22,S);else if(E===void 0)f(7,23,S);else if(typeof E=="number")Math.floor(E)===E&&E<9007199254740992&&E>-9007199254740992?E<0?f(1,-1-E,S):f(0,E,S):(u(7,27,S),S.writeFloat64(E));else if(typeof E=="string")S.writeString(E,function(V){f(3,V,S)});else if(S.canWriteBinary(E))S.writeBinary(E,function(V){f(2,V,S)});else if(typeof E=="object")if(y.config.useToJSON&&typeof E.toJSON=="function"&&(E=E.toJSON()),Array.isArray(E)){f(4,E.length,S);for(var T=0;T<E.length;T++)g(E[T],S)}else{var P=Object.keys(E);f(5,P.length,S);for(var T=0;T<P.length;T++)g(P[T],S),g(E[P[T]],S)}else throw new Error("CBOR encoding not supported: "+E)}var p=[],m=[],y={config:{useToJSON:!0},addWriter:function(E,S){typeof E=="string"?m.push(function(T){if(E===T)return S(T)}):m.push(E)},addReader:function(E,S){typeof E=="string"?p.push(function(T,C){if(E===C)return S(T,C)}):p.push(E)},encode:function(E,S){for(var T=0;T<m.length;T++){var C=m[T],P=C(S);if(P)return g(E,P),P.result()}throw new Error("Unsupported output format: "+S)},decode:function(E,S){for(var T=0;T<p.length;T++){var C=p[T],P=C(E,S);if(P)return h(P)}throw new Error("Unsupported input format: "+S)},addSemanticEncode:function(E,S){if(typeof E!="number"||E%1!==0||E<0)throw new Error("Tag must be a positive integer");return n.push({tag:E,fn:S}),this},addSemanticDecode:function(E,S){if(typeof E!="number"||E%1!==0||E<0)throw new Error("Tag must be a positive integer");return i[E]=S,this},Reader:o,Writer:a};function v(E){this.buffer=E,this.pos=0}v.prototype=Object.create(o.prototype),v.prototype.peekByte=function(){return this.buffer[this.pos]},v.prototype.readByte=function(){return this.buffer[this.pos++]},v.prototype.readUint16=function(){var E=this.buffer.readUInt16BE(this.pos);return this.pos+=2,E},v.prototype.readUint32=function(){var E=this.buffer.readUInt32BE(this.pos);return this.pos+=4,E},v.prototype.readFloat32=function(){var E=this.buffer.readFloatBE(this.pos);return this.pos+=4,E},v.prototype.readFloat64=function(){var E=this.buffer.readDoubleBE(this.pos);return this.pos+=8,E},v.prototype.readChunk=function(E){var S=Ze.alloc(E);return this.buffer.copy(S,0,this.pos,this.pos+=E),S};function w(E){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=E}w.prototype=Object.create(a.prototype),w.prototype.writeByte=function(E){this.latestBuffer[this.latestBufferOffset++]=E,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},w.prototype.writeFloat32=function(E){var S=Ze.alloc(4);S.writeFloatBE(E,0),this.writeBuffer(S)},w.prototype.writeFloat64=function(E){var S=Ze.alloc(8);S.writeDoubleBE(E,0),this.writeBuffer(S)},w.prototype.writeString=function(E,S){var T=Ze.from(E,"utf-8");S(T.length),this.writeBuffer(T)},w.prototype.canWriteBinary=function(E){return E instanceof Ze},w.prototype.writeBinary=function(E,S){S(E.length),this.writeBuffer(E)},w.prototype.writeBuffer=function(E){if(!(E instanceof Ze))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=E.length?(E.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=E.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(E),this.latestBuffer=Ze.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(E),this.byteLength+=E.length},w.prototype.result=function(){for(var E=Ze.alloc(this.byteLength),S=0,T=0;T<this.completeBuffers.length;T++){var C=this.completeBuffers[T];C.copy(E,S,0,C.length),S+=C.length}return this.latestBufferOffset&&this.latestBuffer.copy(E,S,0,this.latestBufferOffset),this.stringFormat?E.toString(this.stringFormat):E},typeof Ze=="function"&&(y.addReader(function(E,S){if(E instanceof Ze)return new v(E);if(S==="hex"||S==="base64"){var T=Ze.from(E,S);return new v(T)}}),y.addWriter(function(E){if(!E||E==="buffer")return new w;if(E==="hex"||E==="base64")return new w(E)}));function _(E){this.hex=E,this.pos=0}_.prototype=Object.create(o.prototype),_.prototype.peekByte=function(){var E=this.hex.substring(this.pos,2);return parseInt(E,16)},_.prototype.readByte=function(){var E=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(E,16)},_.prototype.readChunk=function(E){var S=this.hex.substring(this.pos,this.pos+E*2);return this.pos+=E*2,typeof Ze=="function"?Ze.from(S,"hex"):new t(S)};function x(E){this.$hex="",this.finalFormat=E||"hex"}return x.prototype=Object.create(a.prototype),x.prototype.writeByte=function(E){if(E<0||E>255)throw new Error("Byte value out of range: "+E);var S=E.toString(16);S.length==1&&(S="0"+S),this.$hex+=S},x.prototype.canWriteBinary=function(E){return E instanceof t||typeof Ze=="function"&&E instanceof Ze},x.prototype.writeBinary=function(E,S){if(E instanceof t)S(E.length()),this.$hex+=E.$hex;else if(typeof Ze=="function"&&E instanceof Ze)S(E.length),this.$hex+=E.toString("hex");else throw new TypeError("HexWriter only accepts BinaryHex or Buffers")},x.prototype.result=function(){return this.finalFormat==="buffer"&&typeof Ze=="function"?Ze.from(this.$hex,"hex"):new t(this.$hex).toString(this.finalFormat)},x.prototype.writeString=function(E,S){var T=t.fromUtf8String(E);S(T.length()),this.$hex+=T.$hex},y.addReader(function(E,S){if(E instanceof t||E.$hex)return new _(E.$hex);if(S==="hex")return new _(E)}),y.addWriter(function(E){if(E==="hex")return new x}),y}();return e.addSemanticEncode(0,function(t){if(t instanceof Date)return t.toISOString()}).addSemanticDecode(0,function(t){return new Date(t)}).addSemanticDecode(1,function(t){return new Date(t)}),e})}(Iv)),Iv.exports}var F$;function cW(){if(F$)return rf;F$=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.cborDecode=rf.cborEncode=void 0;const r=oye(),e=n=>r.encode(n);rf.cborEncode=e;const t=n=>r.decode(Ze.isBuffer(n)?n:Ze.from(n,"hex"));return rf.cborDecode=t,rf}var U$;function lW(){if(U$)return ky;U$=1,Object.defineProperty(ky,"__esModule",{value:!0});const r=M4(),e=bd(),t=cW();class n{constructor(s,o="bytes"){if(this._cborPayload=s,this._type=o,!e.isURType(this._type))throw new r.InvalidTypeError}static fromBuffer(s){return new n(t.cborEncode(s))}static from(s,o){return n.fromBuffer(Ze.from(s,o))}decodeCBOR(){return t.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(s){return this.type===s.type&&this.cbor.equals(s.cbor)}}return ky.default=n,ky}var Fd={},Kl={},QS={exports:{}},e2={},t2={},r2={},n2,z$;function aye(){if(z$)return n2;z$=1;var r=aw()(),e=Ol(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&"length"in a&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&"callee"in a&&t(a.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=i,n2=s?n:i,n2}var i2,q$;function cye(){if(q$)return i2;q$=1;var r=Ol(),e=aw()(),t=jH(),n=Op(),i;if(e){var s=r("RegExp.prototype.exec"),o={},a=function(){throw o},c={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(c[Symbol.toPrimitive]=a),i=function(d){if(!d||typeof d!="object")return!1;var h=n(d,"lastIndex"),g=h&&t(h,"value");if(!g)return!1;try{s(d,c)}catch(p){return p===o}}}else{var l=r("Object.prototype.toString"),u="[object RegExp]";i=function(d){return!d||typeof d!="object"&&typeof d!="function"?!1:l(d)===u}}return i2=i,i2}var s2,j$;function lye(){if(j$)return s2;j$=1;var r=Ol(),e=cye(),t=r("RegExp.prototype.exec"),n=kc();return s2=function(s){if(!e(s))throw new n("`regex` must be a RegExp");return function(a){return t(s,a)!==null}},s2}var o2,V$;function uye(){if(V$)return o2;V$=1;var r=Ol(),e=lye(),t=e(/^\s*(?:function)?\*/),n=aw()(),i=$4(),s=r("Object.prototype.toString"),o=r("Function.prototype.toString"),a=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},c;return o2=function(u){if(typeof u!="function")return!1;if(t(o(u)))return!0;if(!n){var f=s(u);return f==="[object GeneratorFunction]"}if(!i)return!1;if(typeof c>"u"){var d=a();c=d?i(d):!1}return i(u)===c},o2}var K$;function fye(){return K$||(K$=1,function(r){var e=aye(),t=uye(),n=HH(),i=WH();function s(ie){return ie.call.bind(ie)}var o=typeof BigInt<"u",a=typeof Symbol<"u",c=s(Object.prototype.toString),l=s(Number.prototype.valueOf),u=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var h=s(Symbol.prototype.valueOf);function g(ie,ge){if(typeof ie!="object")return!1;try{return ge(ie),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=i;function p(ie){return typeof Promise<"u"&&ie instanceof Promise||ie!==null&&typeof ie=="object"&&typeof ie.then=="function"&&typeof ie.catch=="function"}r.isPromise=p;function m(ie){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ie):i(ie)||R(ie)}r.isArrayBufferView=m;function y(ie){return n(ie)==="Uint8Array"}r.isUint8Array=y;function v(ie){return n(ie)==="Uint8ClampedArray"}r.isUint8ClampedArray=v;function w(ie){return n(ie)==="Uint16Array"}r.isUint16Array=w;function _(ie){return n(ie)==="Uint32Array"}r.isUint32Array=_;function x(ie){return n(ie)==="Int8Array"}r.isInt8Array=x;function E(ie){return n(ie)==="Int16Array"}r.isInt16Array=E;function S(ie){return n(ie)==="Int32Array"}r.isInt32Array=S;function T(ie){return n(ie)==="Float32Array"}r.isFloat32Array=T;function C(ie){return n(ie)==="Float64Array"}r.isFloat64Array=C;function P(ie){return n(ie)==="BigInt64Array"}r.isBigInt64Array=P;function V(ie){return n(ie)==="BigUint64Array"}r.isBigUint64Array=V;function L(ie){return c(ie)==="[object Map]"}L.working=typeof Map<"u"&&L(new Map);function D(ie){return typeof Map>"u"?!1:L.working?L(ie):ie instanceof Map}r.isMap=D;function b(ie){return c(ie)==="[object Set]"}b.working=typeof Set<"u"&&b(new Set);function I(ie){return typeof Set>"u"?!1:b.working?b(ie):ie instanceof Set}r.isSet=I;function B(ie){return c(ie)==="[object WeakMap]"}B.working=typeof WeakMap<"u"&&B(new WeakMap);function F(ie){return typeof WeakMap>"u"?!1:B.working?B(ie):ie instanceof WeakMap}r.isWeakMap=F;function z(ie){return c(ie)==="[object WeakSet]"}z.working=typeof WeakSet<"u"&&z(new WeakSet);function G(ie){return z(ie)}r.isWeakSet=G;function Q(ie){return c(ie)==="[object ArrayBuffer]"}Q.working=typeof ArrayBuffer<"u"&&Q(new ArrayBuffer);function X(ie){return typeof ArrayBuffer>"u"?!1:Q.working?Q(ie):ie instanceof ArrayBuffer}r.isArrayBuffer=X;function O(ie){return c(ie)==="[object DataView]"}O.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&O(new DataView(new ArrayBuffer(1),0,1));function R(ie){return typeof DataView>"u"?!1:O.working?O(ie):ie instanceof DataView}r.isDataView=R;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function k(ie){return c(ie)==="[object SharedArrayBuffer]"}function j(ie){return typeof M>"u"?!1:(typeof k.working>"u"&&(k.working=k(new M)),k.working?k(ie):ie instanceof M)}r.isSharedArrayBuffer=j;function te(ie){return c(ie)==="[object AsyncFunction]"}r.isAsyncFunction=te;function ae(ie){return c(ie)==="[object Map Iterator]"}r.isMapIterator=ae;function he(ie){return c(ie)==="[object Set Iterator]"}r.isSetIterator=he;function re(ie){return c(ie)==="[object Generator]"}r.isGeneratorObject=re;function q(ie){return c(ie)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=q;function J(ie){return g(ie,l)}r.isNumberObject=J;function de(ie){return g(ie,u)}r.isStringObject=de;function ue(ie){return g(ie,f)}r.isBooleanObject=ue;function we(ie){return o&&g(ie,d)}r.isBigIntObject=we;function se(ie){return a&&g(ie,h)}r.isSymbolObject=se;function U(ie){return J(ie)||de(ie)||ue(ie)||we(ie)||se(ie)}r.isBoxedPrimitive=U;function K(ie){return typeof Uint8Array<"u"&&(X(ie)||j(ie))}r.isAnyArrayBuffer=K,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ie){Object.defineProperty(r,ie,{enumerable:!1,value:function(){throw new Error(ie+" is not supported in userland")}})})}(r2)),r2}var a2,H$;function dye(){return H$||(H$=1,a2=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),a2}var W$;function Wg(){return W$||(W$=1,function(r){var e={},t=Object.getOwnPropertyDescriptors||function(M){for(var k=Object.keys(M),j={},te=0;te<k.length;te++)j[k[te]]=Object.getOwnPropertyDescriptor(M,k[te]);return j},n=/%[sdj%]/g;r.format=function(R){if(!E(R)){for(var M=[],k=0;k<arguments.length;k++)M.push(a(arguments[k]));return M.join(" ")}for(var k=1,j=arguments,te=j.length,ae=String(R).replace(n,function(re){if(re==="%%")return"%";if(k>=te)return re;switch(re){case"%s":return String(j[k++]);case"%d":return Number(j[k++]);case"%j":try{return JSON.stringify(j[k++])}catch{return"[Circular]"}default:return re}}),he=j[k];k<te;he=j[++k])w(he)||!P(he)?ae+=" "+he:ae+=" "+a(he);return ae},r.deprecate=function(R,M){if(typeof Yt<"u"&&Yt.noDeprecation===!0)return R;if(typeof Yt>"u")return function(){return r.deprecate(R,M).apply(this,arguments)};var k=!1;function j(){if(!k){if(Yt.throwDeprecation)throw new Error(M);Yt.traceDeprecation?console.trace(M):console.error(M),k=!0}return R.apply(this,arguments)}return j};var i={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}r.debuglog=function(R){if(R=R.toUpperCase(),!i[R])if(s.test(R)){var M=Yt.pid;i[R]=function(){var k=r.format.apply(r,arguments);console.error("%s %d: %s",R,M,k)}}else i[R]=function(){};return i[R]};function a(R,M){var k={seen:[],stylize:l};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),v(M)?k.showHidden=M:M&&r._extend(k,M),T(k.showHidden)&&(k.showHidden=!1),T(k.depth)&&(k.depth=2),T(k.colors)&&(k.colors=!1),T(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=c),f(k,R,k.depth)}r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function c(R,M){var k=a.styles[M];return k?"\x1B["+a.colors[k][0]+"m"+R+"\x1B["+a.colors[k][1]+"m":R}function l(R,M){return R}function u(R){var M={};return R.forEach(function(k,j){M[k]=!0}),M}function f(R,M,k){if(R.customInspect&&M&&D(M.inspect)&&M.inspect!==r.inspect&&!(M.constructor&&M.constructor.prototype===M)){var j=M.inspect(k,R);return E(j)||(j=f(R,j,k)),j}var te=d(R,M);if(te)return te;var ae=Object.keys(M),he=u(ae);if(R.showHidden&&(ae=Object.getOwnPropertyNames(M)),L(M)&&(ae.indexOf("message")>=0||ae.indexOf("description")>=0))return h(M);if(ae.length===0){if(D(M)){var re=M.name?": "+M.name:"";return R.stylize("[Function"+re+"]","special")}if(C(M))return R.stylize(RegExp.prototype.toString.call(M),"regexp");if(V(M))return R.stylize(Date.prototype.toString.call(M),"date");if(L(M))return h(M)}var q="",J=!1,de=["{","}"];if(y(M)&&(J=!0,de=["[","]"]),D(M)){var ue=M.name?": "+M.name:"";q=" [Function"+ue+"]"}if(C(M)&&(q=" "+RegExp.prototype.toString.call(M)),V(M)&&(q=" "+Date.prototype.toUTCString.call(M)),L(M)&&(q=" "+h(M)),ae.length===0&&(!J||M.length==0))return de[0]+q+de[1];if(k<0)return C(M)?R.stylize(RegExp.prototype.toString.call(M),"regexp"):R.stylize("[Object]","special");R.seen.push(M);var we;return J?we=g(R,M,k,he,ae):we=ae.map(function(se){return p(R,M,k,he,se,J)}),R.seen.pop(),m(we,q,de)}function d(R,M){if(T(M))return R.stylize("undefined","undefined");if(E(M)){var k="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(k,"string")}if(x(M))return R.stylize(""+M,"number");if(v(M))return R.stylize(""+M,"boolean");if(w(M))return R.stylize("null","null")}function h(R){return"["+Error.prototype.toString.call(R)+"]"}function g(R,M,k,j,te){for(var ae=[],he=0,re=M.length;he<re;++he)G(M,String(he))?ae.push(p(R,M,k,j,String(he),!0)):ae.push("");return te.forEach(function(q){q.match(/^\d+$/)||ae.push(p(R,M,k,j,q,!0))}),ae}function p(R,M,k,j,te,ae){var he,re,q;if(q=Object.getOwnPropertyDescriptor(M,te)||{value:M[te]},q.get?q.set?re=R.stylize("[Getter/Setter]","special"):re=R.stylize("[Getter]","special"):q.set&&(re=R.stylize("[Setter]","special")),G(j,te)||(he="["+te+"]"),re||(R.seen.indexOf(q.value)<0?(w(k)?re=f(R,q.value,null):re=f(R,q.value,k-1),re.indexOf(`
`)>-1&&(ae?re=re.split(`
`).map(function(J){return"  "+J}).join(`
`).slice(2):re=`
`+re.split(`
`).map(function(J){return"   "+J}).join(`
`))):re=R.stylize("[Circular]","special")),T(he)){if(ae&&te.match(/^\d+$/))return re;he=JSON.stringify(""+te),he.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(he=he.slice(1,-1),he=R.stylize(he,"name")):(he=he.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),he=R.stylize(he,"string"))}return he+": "+re}function m(R,M,k){var j=R.reduce(function(te,ae){return ae.indexOf(`
`)>=0,te+ae.replace(/\u001b\[\d\d?m/g,"").length+1},0);return j>60?k[0]+(M===""?"":M+`
 `)+" "+R.join(`,
  `)+" "+k[1]:k[0]+M+" "+R.join(", ")+" "+k[1]}r.types=fye();function y(R){return Array.isArray(R)}r.isArray=y;function v(R){return typeof R=="boolean"}r.isBoolean=v;function w(R){return R===null}r.isNull=w;function _(R){return R==null}r.isNullOrUndefined=_;function x(R){return typeof R=="number"}r.isNumber=x;function E(R){return typeof R=="string"}r.isString=E;function S(R){return typeof R=="symbol"}r.isSymbol=S;function T(R){return R===void 0}r.isUndefined=T;function C(R){return P(R)&&I(R)==="[object RegExp]"}r.isRegExp=C,r.types.isRegExp=C;function P(R){return typeof R=="object"&&R!==null}r.isObject=P;function V(R){return P(R)&&I(R)==="[object Date]"}r.isDate=V,r.types.isDate=V;function L(R){return P(R)&&(I(R)==="[object Error]"||R instanceof Error)}r.isError=L,r.types.isNativeError=L;function D(R){return typeof R=="function"}r.isFunction=D;function b(R){return R===null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||typeof R=="symbol"||typeof R>"u"}r.isPrimitive=b,r.isBuffer=dye();function I(R){return Object.prototype.toString.call(R)}function B(R){return R<10?"0"+R.toString(10):R.toString(10)}var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var R=new Date,M=[B(R.getHours()),B(R.getMinutes()),B(R.getSeconds())].join(":");return[R.getDate(),F[R.getMonth()],M].join(" ")}r.log=function(){console.log("%s - %s",z(),r.format.apply(r,arguments))},r.inherits=Ri(),r._extend=function(R,M){if(!M||!P(M))return R;for(var k=Object.keys(M),j=k.length;j--;)R[k[j]]=M[k[j]];return R};function G(R,M){return Object.prototype.hasOwnProperty.call(R,M)}var Q=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(M){if(typeof M!="function")throw new TypeError('The "original" argument must be of type Function');if(Q&&M[Q]){var k=M[Q];if(typeof k!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,Q,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}function k(){for(var j,te,ae=new Promise(function(q,J){j=q,te=J}),he=[],re=0;re<arguments.length;re++)he.push(arguments[re]);he.push(function(q,J){q?te(q):j(J)});try{M.apply(this,he)}catch(q){te(q)}return ae}return Object.setPrototypeOf(k,Object.getPrototypeOf(M)),Q&&Object.defineProperty(k,Q,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,t(M))},r.promisify.custom=Q;function X(R,M){if(!R){var k=new Error("Promise was rejected with a falsy value");k.reason=R,R=k}return M(R)}function O(R){if(typeof R!="function")throw new TypeError('The "original" argument must be of type Function');function M(){for(var k=[],j=0;j<arguments.length;j++)k.push(arguments[j]);var te=k.pop();if(typeof te!="function")throw new TypeError("The last argument must be of type Function");var ae=this,he=function(){return te.apply(ae,arguments)};R.apply(this,k).then(function(re){Yt.nextTick(he.bind(null,null,re))},function(re){Yt.nextTick(X.bind(null,re,he))})}return Object.setPrototypeOf(M,Object.getPrototypeOf(R)),Object.defineProperties(M,t(R)),M}r.callbackify=O}(t2)),t2}var G$;function uW(){if(G$)return e2;G$=1;function r(v){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},r(v)}function e(v,w,_){return Object.defineProperty(v,"prototype",{writable:!1}),v}function t(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function n(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),w&&i(v,w)}function i(v,w){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,E){return x.__proto__=E,x},i(v,w)}function s(v){var w=c();return function(){var x=l(v),E;if(w){var S=l(this).constructor;E=Reflect.construct(x,arguments,S)}else E=x.apply(this,arguments);return o(this,E)}}function o(v,w){if(w&&(r(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(v)}function a(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(v){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},l(v)}var u={},f,d;function h(v,w,_){_||(_=Error);function x(S,T,C){return typeof w=="string"?w:w(S,T,C)}var E=function(S){n(C,S);var T=s(C);function C(P,V,L){var D;return t(this,C),D=T.call(this,x(P,V,L)),D.code=v,D}return e(C)}(_);u[v]=E}function g(v,w){if(Array.isArray(v)){var _=v.length;return v=v.map(function(x){return String(x)}),_>2?"one of ".concat(w," ").concat(v.slice(0,_-1).join(", "),", or ")+v[_-1]:_===2?"one of ".concat(w," ").concat(v[0]," or ").concat(v[1]):"of ".concat(w," ").concat(v[0])}else return"of ".concat(w," ").concat(String(v))}function p(v,w,_){return v.substr(0,w.length)===w}function m(v,w,_){return(_===void 0||_>v.length)&&(_=v.length),v.substring(_-w.length,_)===w}function y(v,w,_){return typeof _!="number"&&(_=0),_+w.length>v.length?!1:v.indexOf(w,_)!==-1}return h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),h("ERR_INVALID_ARG_TYPE",function(v,w,_){f===void 0&&(f=Gg()),f(typeof v=="string","'name' must be a string");var x;typeof w=="string"&&p(w,"not ")?(x="must not be",w=w.replace(/^not /,"")):x="must be";var E;if(m(v," argument"))E="The ".concat(v," ").concat(x," ").concat(g(w,"type"));else{var S=y(v,".")?"property":"argument";E='The "'.concat(v,'" ').concat(S," ").concat(x," ").concat(g(w,"type"))}return E+=". Received type ".concat(r(_)),E},TypeError),h("ERR_INVALID_ARG_VALUE",function(v,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";d===void 0&&(d=Wg());var x=d.inspect(w);return x.length>128&&(x="".concat(x.slice(0,128),"...")),"The argument '".concat(v,"' ").concat(_,". Received ").concat(x)},TypeError),h("ERR_INVALID_RETURN_VALUE",function(v,w,_){var x;return _&&_.constructor&&_.constructor.name?x="instance of ".concat(_.constructor.name):x="type ".concat(r(_)),"Expected ".concat(v,' to be returned from the "').concat(w,'"')+" function but got ".concat(x,".")},TypeError),h("ERR_MISSING_ARGS",function(){for(var v=arguments.length,w=new Array(v),_=0;_<v;_++)w[_]=arguments[_];f===void 0&&(f=Gg()),f(w.length>0,"At least one arg needs to be specified");var x="The ",E=w.length;switch(w=w.map(function(S){return'"'.concat(S,'"')}),E){case 1:x+="".concat(w[0]," argument");break;case 2:x+="".concat(w[0]," and ").concat(w[1]," arguments");break;default:x+=w.slice(0,E-1).join(", "),x+=", and ".concat(w[E-1]," arguments");break}return"".concat(x," must be specified")},TypeError),e2.codes=u,e2}var c2,Y$;function hye(){if(Y$)return c2;Y$=1;function r(G,Q){var X=Object.keys(G);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(G);Q&&(O=O.filter(function(R){return Object.getOwnPropertyDescriptor(G,R).enumerable})),X.push.apply(X,O)}return X}function e(G){for(var Q=1;Q<arguments.length;Q++){var X=arguments[Q]!=null?arguments[Q]:{};Q%2?r(Object(X),!0).forEach(function(O){t(G,O,X[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(X)):r(Object(X)).forEach(function(O){Object.defineProperty(G,O,Object.getOwnPropertyDescriptor(X,O))})}return G}function t(G,Q,X){return Q=o(Q),Q in G?Object.defineProperty(G,Q,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[Q]=X,G}function n(G,Q){if(!(G instanceof Q))throw new TypeError("Cannot call a class as a function")}function i(G,Q){for(var X=0;X<Q.length;X++){var O=Q[X];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(G,o(O.key),O)}}function s(G,Q,X){return Q&&i(G.prototype,Q),Object.defineProperty(G,"prototype",{writable:!1}),G}function o(G){var Q=a(G,"string");return v(Q)==="symbol"?Q:String(Q)}function a(G,Q){if(v(G)!=="object"||G===null)return G;var X=G[Symbol.toPrimitive];if(X!==void 0){var O=X.call(G,Q);if(v(O)!=="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(G)}function c(G,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(Q&&Q.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),Object.defineProperty(G,"prototype",{writable:!1}),Q&&m(G,Q)}function l(G){var Q=g();return function(){var O=y(G),R;if(Q){var M=y(this).constructor;R=Reflect.construct(O,arguments,M)}else R=O.apply(this,arguments);return u(this,R)}}function u(G,Q){if(Q&&(v(Q)==="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(G)}function f(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function d(G){var Q=typeof Map=="function"?new Map:void 0;return d=function(O){if(O===null||!p(O))return O;if(typeof O!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Q<"u"){if(Q.has(O))return Q.get(O);Q.set(O,R)}function R(){return h(O,arguments,y(this).constructor)}return R.prototype=Object.create(O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),m(R,O)},d(G)}function h(G,Q,X){return g()?h=Reflect.construct.bind():h=function(R,M,k){var j=[null];j.push.apply(j,M);var te=Function.bind.apply(R,j),ae=new te;return k&&m(ae,k.prototype),ae},h.apply(null,arguments)}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(G){return Function.toString.call(G).indexOf("[native code]")!==-1}function m(G,Q){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,R){return O.__proto__=R,O},m(G,Q)}function y(G){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},y(G)}function v(G){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},v(G)}var w=Wg(),_=w.inspect,x=uW(),E=x.codes.ERR_INVALID_ARG_TYPE;function S(G,Q,X){return(X===void 0||X>G.length)&&(X=G.length),G.substring(X-Q.length,X)===Q}function T(G,Q){if(Q=Math.floor(Q),G.length==0||Q==0)return"";var X=G.length*Q;for(Q=Math.floor(Math.log(Q)/Math.log(2));Q;)G+=G,Q--;return G+=G.substring(0,X-G.length),G}var C="",P="",V="",L="",D={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},b=10;function I(G){var Q=Object.keys(G),X=Object.create(Object.getPrototypeOf(G));return Q.forEach(function(O){X[O]=G[O]}),Object.defineProperty(X,"message",{value:G.message}),X}function B(G){return _(G,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function F(G,Q,X){var O="",R="",M=0,k="",j=!1,te=B(G),ae=te.split(`
`),he=B(Q).split(`
`),re=0,q="";if(X==="strictEqual"&&v(G)==="object"&&v(Q)==="object"&&G!==null&&Q!==null&&(X="strictEqualObject"),ae.length===1&&he.length===1&&ae[0]!==he[0]){var J=ae[0].length+he[0].length;if(J<=b){if((v(G)!=="object"||G===null)&&(v(Q)!=="object"||Q===null)&&(G!==0||Q!==0))return"".concat(D[X],`

`)+"".concat(ae[0]," !== ").concat(he[0],`
`)}else if(X!=="strictEqualObject"){var de=Yt.stderr&&Yt.stderr.isTTY?Yt.stderr.columns:80;if(J<de){for(;ae[0][re]===he[0][re];)re++;re>2&&(q=`
  `.concat(T(" ",re),"^"),re=0)}}}for(var ue=ae[ae.length-1],we=he[he.length-1];ue===we&&(re++<2?k=`
  `.concat(ue).concat(k):O=ue,ae.pop(),he.pop(),!(ae.length===0||he.length===0));)ue=ae[ae.length-1],we=he[he.length-1];var se=Math.max(ae.length,he.length);if(se===0){var U=te.split(`
`);if(U.length>30)for(U[26]="".concat(C,"...").concat(L);U.length>27;)U.pop();return"".concat(D.notIdentical,`

`).concat(U.join(`
`),`
`)}re>3&&(k=`
`.concat(C,"...").concat(L).concat(k),j=!0),O!==""&&(k=`
  `.concat(O).concat(k),O="");var K=0,ie=D[X]+`
`.concat(P,"+ actual").concat(L," ").concat(V,"- expected").concat(L),ge=" ".concat(C,"...").concat(L," Lines skipped");for(re=0;re<se;re++){var _e=re-M;if(ae.length<re+1)_e>1&&re>2&&(_e>4?(R+=`
`.concat(C,"...").concat(L),j=!0):_e>3&&(R+=`
  `.concat(he[re-2]),K++),R+=`
  `.concat(he[re-1]),K++),M=re,O+=`
`.concat(V,"-").concat(L," ").concat(he[re]),K++;else if(he.length<re+1)_e>1&&re>2&&(_e>4?(R+=`
`.concat(C,"...").concat(L),j=!0):_e>3&&(R+=`
  `.concat(ae[re-2]),K++),R+=`
  `.concat(ae[re-1]),K++),M=re,R+=`
`.concat(P,"+").concat(L," ").concat(ae[re]),K++;else{var Ce=he[re],Ne=ae[re],xe=Ne!==Ce&&(!S(Ne,",")||Ne.slice(0,-1)!==Ce);xe&&S(Ce,",")&&Ce.slice(0,-1)===Ne&&(xe=!1,Ne+=","),xe?(_e>1&&re>2&&(_e>4?(R+=`
`.concat(C,"...").concat(L),j=!0):_e>3&&(R+=`
  `.concat(ae[re-2]),K++),R+=`
  `.concat(ae[re-1]),K++),M=re,R+=`
`.concat(P,"+").concat(L," ").concat(Ne),O+=`
`.concat(V,"-").concat(L," ").concat(Ce),K+=2):(R+=O,O="",(_e===1||re===0)&&(R+=`
  `.concat(Ne),K++))}if(K>20&&re<se-2)return"".concat(ie).concat(ge,`
`).concat(R,`
`).concat(C,"...").concat(L).concat(O,`
`)+"".concat(C,"...").concat(L)}return"".concat(ie).concat(j?ge:"",`
`).concat(R).concat(O).concat(k).concat(q)}var z=function(G,Q){c(O,G);var X=l(O);function O(R){var M;if(n(this,O),v(R)!=="object"||R===null)throw new E("options","Object",R);var k=R.message,j=R.operator,te=R.stackStartFn,ae=R.actual,he=R.expected,re=Error.stackTraceLimit;if(Error.stackTraceLimit=0,k!=null)M=X.call(this,String(k));else if(Yt.stderr&&Yt.stderr.isTTY&&(Yt.stderr&&Yt.stderr.getColorDepth&&Yt.stderr.getColorDepth()!==1?(C="\x1B[34m",P="\x1B[32m",L="\x1B[39m",V="\x1B[31m"):(C="",P="",L="",V="")),v(ae)==="object"&&ae!==null&&v(he)==="object"&&he!==null&&"stack"in ae&&ae instanceof Error&&"stack"in he&&he instanceof Error&&(ae=I(ae),he=I(he)),j==="deepStrictEqual"||j==="strictEqual")M=X.call(this,F(ae,he,j));else if(j==="notDeepStrictEqual"||j==="notStrictEqual"){var q=D[j],J=B(ae).split(`
`);if(j==="notStrictEqual"&&v(ae)==="object"&&ae!==null&&(q=D.notStrictEqualObject),J.length>30)for(J[26]="".concat(C,"...").concat(L);J.length>27;)J.pop();J.length===1?M=X.call(this,"".concat(q," ").concat(J[0])):M=X.call(this,"".concat(q,`

`).concat(J.join(`
`),`
`))}else{var de=B(ae),ue="",we=D[j];j==="notDeepEqual"||j==="notEqual"?(de="".concat(D[j],`

`).concat(de),de.length>1024&&(de="".concat(de.slice(0,1021),"..."))):(ue="".concat(B(he)),de.length>512&&(de="".concat(de.slice(0,509),"...")),ue.length>512&&(ue="".concat(ue.slice(0,509),"...")),j==="deepEqual"||j==="equal"?de="".concat(we,`

`).concat(de,`

should equal

`):ue=" ".concat(j," ").concat(ue)),M=X.call(this,"".concat(de).concat(ue))}return Error.stackTraceLimit=re,M.generatedMessage=!k,Object.defineProperty(f(M),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),M.code="ERR_ASSERTION",M.actual=ae,M.expected=he,M.operator=j,Error.captureStackTrace&&Error.captureStackTrace(f(M),te),M.stack,M.name="AssertionError",u(M)}return s(O,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:Q,value:function(M,k){return _(this,e(e({},k),{},{customInspect:!1,depth:0}))}}]),O}(d(Error),_.custom);return c2=z,c2}var l2,J$;function fW(){if(J$)return l2;J$=1;var r=Object.prototype.toString;return l2=function(t){var n=r.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&r.call(t.callee)==="[object Function]"),i},l2}var u2,X$;function pye(){if(X$)return u2;X$=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=fW(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),o=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(d){var h=d.constructor;return h&&h.prototype===d},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!l["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{c(window[d])}catch{return!0}}catch{return!0}return!1}(),f=function(d){if(typeof window>"u"||!u)return c(d);try{return c(d)}catch{return!1}};r=function(h){var g=h!==null&&typeof h=="object",p=t.call(h)==="[object Function]",m=n(h),y=g&&t.call(h)==="[object String]",v=[];if(!g&&!p&&!m)throw new TypeError("Object.keys called on a non-object");var w=o&&p;if(y&&h.length>0&&!e.call(h,0))for(var _=0;_<h.length;++_)v.push(String(_));if(m&&h.length>0)for(var x=0;x<h.length;++x)v.push(String(x));else for(var E in h)!(w&&E==="prototype")&&e.call(h,E)&&v.push(String(E));if(s)for(var S=f(h),T=0;T<a.length;++T)!(S&&a[T]==="constructor")&&e.call(h,a[T])&&v.push(a[T]);return v}}return u2=r,u2}var f2,Z$;function dW(){if(Z$)return f2;Z$=1;var r=Array.prototype.slice,e=fW(),t=Object.keys,n=t?function(o){return t(o)}:pye(),i=Object.keys;return n.shim=function(){if(Object.keys){var o=function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2);o||(Object.keys=function(c){return e(c)?i(r.call(c)):i(c)})}else Object.keys=n;return Object.keys||n},f2=n,f2}var d2,Q$;function gye(){if(Q$)return d2;Q$=1;var r=dW(),e=R4()(),t=Ol(),n=T4(),i=t("Array.prototype.push"),s=t("Object.prototype.propertyIsEnumerable"),o=e?n.getOwnPropertySymbols:null;return d2=function(c,l){if(c==null)throw new TypeError("target must be an object");var u=n(c);if(arguments.length===1)return u;for(var f=1;f<arguments.length;++f){var d=n(arguments[f]),h=r(d),g=e&&(n.getOwnPropertySymbols||o);if(g)for(var p=g(d),m=0;m<p.length;++m){var y=p[m];s(d,y)&&i(h,y)}for(var v=0;v<h.length;++v){var w=h[v];if(s(d,w)){var _=d[w];u[w]=_}}}return u},d2}var h2,eD;function mye(){if(eD)return h2;eD=1;var r=gye(),e=function(){if(!Object.assign)return!1;for(var n="abcdefghijklmnopqrst",i=n.split(""),s={},o=0;o<i.length;++o)s[i[o]]=i[o];var a=Object.assign({},s),c="";for(var l in a)c+=l;return n!==c},t=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch{return n[1]==="y"}return!1};return h2=function(){return!Object.assign||e()||t()?r:Object.assign},h2}var p2,tD;function hW(){if(tD)return p2;tD=1;var r=function(e){return e!==e};return p2=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||r(t)&&r(n))},p2}var g2,rD;function B4(){if(rD)return g2;rD=1;var r=hW();return g2=function(){return typeof Object.is=="function"?Object.is:r},g2}var m2,nD;function yye(){if(nD)return m2;nD=1;var r=Mm(),e=ow(),t=e(r("String.prototype.indexOf"));return m2=function(i,s){var o=r(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e(o):o},m2}var y2,iD;function cw(){if(iD)return y2;iD=1;var r=dW(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,n=Array.prototype.concat,i=VH(),s=function(l){return typeof l=="function"&&t.call(l)==="[object Function]"},o=KH()(),a=function(l,u,f,d){if(u in l){if(d===!0){if(l[u]===f)return}else if(!s(d)||!d())return}o?i(l,u,f,!0):i(l,u,f)},c=function(l,u){var f=arguments.length>2?arguments[2]:{},d=r(u);e&&(d=n.call(d,Object.getOwnPropertySymbols(u)));for(var h=0;h<d.length;h+=1)a(l,d[h],u[d[h]],f[d[h]])};return c.supportsDescriptors=!!o,y2=c,y2}var v2,sD;function vye(){if(sD)return v2;sD=1;var r=B4(),e=cw();return v2=function(){var n=r();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},v2}var b2,oD;function bye(){if(oD)return b2;oD=1;var r=cw(),e=ow(),t=hW(),n=B4(),i=vye(),s=e(n(),Object);return r(s,{getPolyfill:n,implementation:t,shim:i}),b2=s,b2}var w2,aD;function pW(){return aD||(aD=1,w2=function(e){return e!==e}),w2}var x2,cD;function gW(){if(cD)return x2;cD=1;var r=pW();return x2=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},x2}var _2,lD;function wye(){if(lD)return _2;lD=1;var r=cw(),e=gW();return _2=function(){var n=e();return r(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},_2}var S2,uD;function xye(){if(uD)return S2;uD=1;var r=ow(),e=cw(),t=pW(),n=gW(),i=wye(),s=r(n(),Number);return e(s,{getPolyfill:n,implementation:t,shim:i}),S2=s,S2}var E2,fD;function _ye(){if(fD)return E2;fD=1;function r(xe,Ae){return s(xe)||i(xe,Ae)||t(xe,Ae)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(xe,Ae){if(xe){if(typeof xe=="string")return n(xe,Ae);var Me=Object.prototype.toString.call(xe).slice(8,-1);if(Me==="Object"&&xe.constructor&&(Me=xe.constructor.name),Me==="Map"||Me==="Set")return Array.from(xe);if(Me==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Me))return n(xe,Ae)}}function n(xe,Ae){(Ae==null||Ae>xe.length)&&(Ae=xe.length);for(var Me=0,oe=new Array(Ae);Me<Ae;Me++)oe[Me]=xe[Me];return oe}function i(xe,Ae){var Me=xe==null?null:typeof Symbol<"u"&&xe[Symbol.iterator]||xe["@@iterator"];if(Me!=null){var oe,H,ee,W,N=[],$=!0,ne=!1;try{if(ee=(Me=Me.call(xe)).next,Ae!==0)for(;!($=(oe=ee.call(Me)).done)&&(N.push(oe.value),N.length!==Ae);$=!0);}catch(pe){ne=!0,H=pe}finally{try{if(!$&&Me.return!=null&&(W=Me.return(),Object(W)!==W))return}finally{if(ne)throw H}}return N}}function s(xe){if(Array.isArray(xe))return xe}function o(xe){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},o(xe)}var a=/a/g.flags!==void 0,c=function(Ae){var Me=[];return Ae.forEach(function(oe){return Me.push(oe)}),Me},l=function(Ae){var Me=[];return Ae.forEach(function(oe,H){return Me.push([H,oe])}),Me},u=Object.is?Object.is:bye(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},d=Number.isNaN?Number.isNaN:xye();function h(xe){return xe.call.bind(xe)}var g=h(Object.prototype.hasOwnProperty),p=h(Object.prototype.propertyIsEnumerable),m=h(Object.prototype.toString),y=Wg().types,v=y.isAnyArrayBuffer,w=y.isArrayBufferView,_=y.isDate,x=y.isMap,E=y.isRegExp,S=y.isSet,T=y.isNativeError,C=y.isBoxedPrimitive,P=y.isNumberObject,V=y.isStringObject,L=y.isBooleanObject,D=y.isBigIntObject,b=y.isSymbolObject,I=y.isFloat32Array,B=y.isFloat64Array;function F(xe){if(xe.length===0||xe.length>10)return!0;for(var Ae=0;Ae<xe.length;Ae++){var Me=xe.charCodeAt(Ae);if(Me<48||Me>57)return!0}return xe.length===10&&xe>=Math.pow(2,32)}function z(xe){return Object.keys(xe).filter(F).concat(f(xe).filter(Object.prototype.propertyIsEnumerable.bind(xe)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function G(xe,Ae){if(xe===Ae)return 0;for(var Me=xe.length,oe=Ae.length,H=0,ee=Math.min(Me,oe);H<ee;++H)if(xe[H]!==Ae[H]){Me=xe[H],oe=Ae[H];break}return Me<oe?-1:oe<Me?1:0}var Q=!0,X=!1,O=0,R=1,M=2,k=3;function j(xe,Ae){return a?xe.source===Ae.source&&xe.flags===Ae.flags:RegExp.prototype.toString.call(xe)===RegExp.prototype.toString.call(Ae)}function te(xe,Ae){if(xe.byteLength!==Ae.byteLength)return!1;for(var Me=0;Me<xe.byteLength;Me++)if(xe[Me]!==Ae[Me])return!1;return!0}function ae(xe,Ae){return xe.byteLength!==Ae.byteLength?!1:G(new Uint8Array(xe.buffer,xe.byteOffset,xe.byteLength),new Uint8Array(Ae.buffer,Ae.byteOffset,Ae.byteLength))===0}function he(xe,Ae){return xe.byteLength===Ae.byteLength&&G(new Uint8Array(xe),new Uint8Array(Ae))===0}function re(xe,Ae){return P(xe)?P(Ae)&&u(Number.prototype.valueOf.call(xe),Number.prototype.valueOf.call(Ae)):V(xe)?V(Ae)&&String.prototype.valueOf.call(xe)===String.prototype.valueOf.call(Ae):L(xe)?L(Ae)&&Boolean.prototype.valueOf.call(xe)===Boolean.prototype.valueOf.call(Ae):D(xe)?D(Ae)&&BigInt.prototype.valueOf.call(xe)===BigInt.prototype.valueOf.call(Ae):b(Ae)&&Symbol.prototype.valueOf.call(xe)===Symbol.prototype.valueOf.call(Ae)}function q(xe,Ae,Me,oe){if(xe===Ae)return xe!==0?!0:Me?u(xe,Ae):!0;if(Me){if(o(xe)!=="object")return typeof xe=="number"&&d(xe)&&d(Ae);if(o(Ae)!=="object"||xe===null||Ae===null||Object.getPrototypeOf(xe)!==Object.getPrototypeOf(Ae))return!1}else{if(xe===null||o(xe)!=="object")return Ae===null||o(Ae)!=="object"?xe==Ae:!1;if(Ae===null||o(Ae)!=="object")return!1}var H=m(xe),ee=m(Ae);if(H!==ee)return!1;if(Array.isArray(xe)){if(xe.length!==Ae.length)return!1;var W=z(xe),N=z(Ae);return W.length!==N.length?!1:de(xe,Ae,Me,oe,R,W)}if(H==="[object Object]"&&(!x(xe)&&x(Ae)||!S(xe)&&S(Ae)))return!1;if(_(xe)){if(!_(Ae)||Date.prototype.getTime.call(xe)!==Date.prototype.getTime.call(Ae))return!1}else if(E(xe)){if(!E(Ae)||!j(xe,Ae))return!1}else if(T(xe)||xe instanceof Error){if(xe.message!==Ae.message||xe.name!==Ae.name)return!1}else if(w(xe)){if(!Me&&(I(xe)||B(xe))){if(!te(xe,Ae))return!1}else if(!ae(xe,Ae))return!1;var $=z(xe),ne=z(Ae);return $.length!==ne.length?!1:de(xe,Ae,Me,oe,O,$)}else{if(S(xe))return!S(Ae)||xe.size!==Ae.size?!1:de(xe,Ae,Me,oe,M);if(x(xe))return!x(Ae)||xe.size!==Ae.size?!1:de(xe,Ae,Me,oe,k);if(v(xe)){if(!he(xe,Ae))return!1}else if(C(xe)&&!re(xe,Ae))return!1}return de(xe,Ae,Me,oe,O)}function J(xe,Ae){return Ae.filter(function(Me){return p(xe,Me)})}function de(xe,Ae,Me,oe,H,ee){if(arguments.length===5){ee=Object.keys(xe);var W=Object.keys(Ae);if(ee.length!==W.length)return!1}for(var N=0;N<ee.length;N++)if(!g(Ae,ee[N]))return!1;if(Me&&arguments.length===5){var $=f(xe);if($.length!==0){var ne=0;for(N=0;N<$.length;N++){var pe=$[N];if(p(xe,pe)){if(!p(Ae,pe))return!1;ee.push(pe),ne++}else if(p(Ae,pe))return!1}var be=f(Ae);if($.length!==be.length&&J(Ae,be).length!==ne)return!1}else{var fe=f(Ae);if(fe.length!==0&&J(Ae,fe).length!==0)return!1}}if(ee.length===0&&(H===O||H===R&&xe.length===0||xe.size===0))return!0;if(oe===void 0)oe={val1:new Map,val2:new Map,position:0};else{var Ee=oe.val1.get(xe);if(Ee!==void 0){var Fe=oe.val2.get(Ae);if(Fe!==void 0)return Ee===Fe}oe.position++}oe.val1.set(xe,oe.position),oe.val2.set(Ae,oe.position);var He=_e(xe,Ae,Me,ee,oe,H);return oe.val1.delete(xe),oe.val2.delete(Ae),He}function ue(xe,Ae,Me,oe){for(var H=c(xe),ee=0;ee<H.length;ee++){var W=H[ee];if(q(Ae,W,Me,oe))return xe.delete(W),!0}return!1}function we(xe){switch(o(xe)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":xe=+xe;case"number":if(d(xe))return!1}return!0}function se(xe,Ae,Me){var oe=we(Me);return oe??(Ae.has(oe)&&!xe.has(oe))}function U(xe,Ae,Me,oe,H){var ee=we(Me);if(ee!=null)return ee;var W=Ae.get(ee);return W===void 0&&!Ae.has(ee)||!q(oe,W,!1,H)?!1:!xe.has(ee)&&q(oe,W,!1,H)}function K(xe,Ae,Me,oe){for(var H=null,ee=c(xe),W=0;W<ee.length;W++){var N=ee[W];if(o(N)==="object"&&N!==null)H===null&&(H=new Set),H.add(N);else if(!Ae.has(N)){if(Me||!se(xe,Ae,N))return!1;H===null&&(H=new Set),H.add(N)}}if(H!==null){for(var $=c(Ae),ne=0;ne<$.length;ne++){var pe=$[ne];if(o(pe)==="object"&&pe!==null){if(!ue(H,pe,Me,oe))return!1}else if(!Me&&!xe.has(pe)&&!ue(H,pe,Me,oe))return!1}return H.size===0}return!0}function ie(xe,Ae,Me,oe,H,ee){for(var W=c(xe),N=0;N<W.length;N++){var $=W[N];if(q(Me,$,H,ee)&&q(oe,Ae.get($),H,ee))return xe.delete($),!0}return!1}function ge(xe,Ae,Me,oe){for(var H=null,ee=l(xe),W=0;W<ee.length;W++){var N=r(ee[W],2),$=N[0],ne=N[1];if(o($)==="object"&&$!==null)H===null&&(H=new Set),H.add($);else{var pe=Ae.get($);if(pe===void 0&&!Ae.has($)||!q(ne,pe,Me,oe)){if(Me||!U(xe,Ae,$,ne,oe))return!1;H===null&&(H=new Set),H.add($)}}}if(H!==null){for(var be=l(Ae),fe=0;fe<be.length;fe++){var Ee=r(be[fe],2),Fe=Ee[0],He=Ee[1];if(o(Fe)==="object"&&Fe!==null){if(!ie(H,xe,Fe,He,Me,oe))return!1}else if(!Me&&(!xe.has(Fe)||!q(xe.get(Fe),He,!1,oe))&&!ie(H,xe,Fe,He,!1,oe))return!1}return H.size===0}return!0}function _e(xe,Ae,Me,oe,H,ee){var W=0;if(ee===M){if(!K(xe,Ae,Me,H))return!1}else if(ee===k){if(!ge(xe,Ae,Me,H))return!1}else if(ee===R)for(;W<xe.length;W++)if(g(xe,W)){if(!g(Ae,W)||!q(xe[W],Ae[W],Me,H))return!1}else{if(g(Ae,W))return!1;for(var N=Object.keys(xe);W<N.length;W++){var $=N[W];if(!g(Ae,$)||!q(xe[$],Ae[$],Me,H))return!1}return N.length===Object.keys(Ae).length}for(W=0;W<oe.length;W++){var ne=oe[W];if(!q(xe[ne],Ae[ne],Me,H))return!1}return!0}function Ce(xe,Ae){return q(xe,Ae,X)}function Ne(xe,Ae){return q(xe,Ae,Q)}return E2={isDeepEqual:Ce,isDeepStrictEqual:Ne},E2}var dD;function Gg(){if(dD)return QS.exports;dD=1;function r(M){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},r(M)}function e(M,k,j){return Object.defineProperty(M,"prototype",{writable:!1}),M}function t(M,k){if(!(M instanceof k))throw new TypeError("Cannot call a class as a function")}var n=uW(),i=n.codes,s=i.ERR_AMBIGUOUS_ARGUMENT,o=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,c=i.ERR_INVALID_RETURN_VALUE,l=i.ERR_MISSING_ARGS,u=hye(),f=Wg(),d=f.inspect,h=Wg().types,g=h.isPromise,p=h.isRegExp,m=mye()(),y=B4()(),v=yye()("RegExp.prototype.test"),w,_;function x(){var M=_ye();w=M.isDeepEqual,_=M.isDeepStrictEqual}var E=!1,S=QS.exports=L,T={};function C(M){throw M.message instanceof Error?M.message:new u(M)}function P(M,k,j,te,ae){var he=arguments.length,re;if(he===0)re="Failed";else if(he===1)j=M,M=void 0;else{if(E===!1){E=!0;var q=Yt.emitWarning?Yt.emitWarning:console.warn.bind(console);q("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}he===2&&(te="!=")}if(j instanceof Error)throw j;var J={actual:M,expected:k,operator:te===void 0?"fail":te,stackStartFn:ae||P};j!==void 0&&(J.message=j);var de=new u(J);throw re&&(de.message=re,de.generatedMessage=!0),de}S.fail=P,S.AssertionError=u;function V(M,k,j,te){if(!j){var ae=!1;if(k===0)ae=!0,te="No value argument passed to `assert.ok()`";else if(te instanceof Error)throw te;var he=new u({actual:j,expected:!0,message:te,operator:"==",stackStartFn:M});throw he.generatedMessage=ae,he}}function L(){for(var M=arguments.length,k=new Array(M),j=0;j<M;j++)k[j]=arguments[j];V.apply(void 0,[L,k.length].concat(k))}S.ok=L,S.equal=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");k!=j&&C({actual:k,expected:j,message:te,operator:"==",stackStartFn:M})},S.notEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");k==j&&C({actual:k,expected:j,message:te,operator:"!=",stackStartFn:M})},S.deepEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");w===void 0&&x(),w(k,j)||C({actual:k,expected:j,message:te,operator:"deepEqual",stackStartFn:M})},S.notDeepEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");w===void 0&&x(),w(k,j)&&C({actual:k,expected:j,message:te,operator:"notDeepEqual",stackStartFn:M})},S.deepStrictEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");w===void 0&&x(),_(k,j)||C({actual:k,expected:j,message:te,operator:"deepStrictEqual",stackStartFn:M})},S.notDeepStrictEqual=D;function D(M,k,j){if(arguments.length<2)throw new l("actual","expected");w===void 0&&x(),_(M,k)&&C({actual:M,expected:k,message:j,operator:"notDeepStrictEqual",stackStartFn:D})}S.strictEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");y(k,j)||C({actual:k,expected:j,message:te,operator:"strictEqual",stackStartFn:M})},S.notStrictEqual=function M(k,j,te){if(arguments.length<2)throw new l("actual","expected");y(k,j)&&C({actual:k,expected:j,message:te,operator:"notStrictEqual",stackStartFn:M})};var b=e(function M(k,j,te){var ae=this;t(this,M),j.forEach(function(he){he in k&&(te!==void 0&&typeof te[he]=="string"&&p(k[he])&&v(k[he],te[he])?ae[he]=te[he]:ae[he]=k[he])})});function I(M,k,j,te,ae,he){if(!(j in M)||!_(M[j],k[j])){if(!te){var re=new b(M,ae),q=new b(k,ae,M),J=new u({actual:re,expected:q,operator:"deepStrictEqual",stackStartFn:he});throw J.actual=M,J.expected=k,J.operator=he.name,J}C({actual:M,expected:k,message:te,operator:he.name,stackStartFn:he})}}function B(M,k,j,te){if(typeof k!="function"){if(p(k))return v(k,M);if(arguments.length===2)throw new o("expected",["Function","RegExp"],k);if(r(M)!=="object"||M===null){var ae=new u({actual:M,expected:k,message:j,operator:"deepStrictEqual",stackStartFn:te});throw ae.operator=te.name,ae}var he=Object.keys(k);if(k instanceof Error)he.push("name","message");else if(he.length===0)throw new a("error",k,"may not be an empty object");return w===void 0&&x(),he.forEach(function(re){typeof M[re]=="string"&&p(k[re])&&v(k[re],M[re])||I(M,k,re,j,he,te)}),!0}return k.prototype!==void 0&&M instanceof k?!0:Error.isPrototypeOf(k)?!1:k.call({},M)===!0}function F(M){if(typeof M!="function")throw new o("fn","Function",M);try{M()}catch(k){return k}return T}function z(M){return g(M)||M!==null&&r(M)==="object"&&typeof M.then=="function"&&typeof M.catch=="function"}function G(M){return Promise.resolve().then(function(){var k;if(typeof M=="function"){if(k=M(),!z(k))throw new c("instance of Promise","promiseFn",k)}else if(z(M))k=M;else throw new o("promiseFn",["Function","Promise"],M);return Promise.resolve().then(function(){return k}).then(function(){return T}).catch(function(j){return j})})}function Q(M,k,j,te){if(typeof j=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],j);if(r(k)==="object"&&k!==null){if(k.message===j)throw new s("error/message",'The error message "'.concat(k.message,'" is identical to the message.'))}else if(k===j)throw new s("error/message",'The error "'.concat(k,'" is identical to the message.'));te=j,j=void 0}else if(j!=null&&r(j)!=="object"&&typeof j!="function")throw new o("error",["Object","Error","Function","RegExp"],j);if(k===T){var ae="";j&&j.name&&(ae+=" (".concat(j.name,")")),ae+=te?": ".concat(te):".";var he=M.name==="rejects"?"rejection":"exception";C({actual:void 0,expected:j,operator:M.name,message:"Missing expected ".concat(he).concat(ae),stackStartFn:M})}if(j&&!B(k,j,te,M))throw k}function X(M,k,j,te){if(k!==T){if(typeof j=="string"&&(te=j,j=void 0),!j||B(k,j)){var ae=te?": ".concat(te):".",he=M.name==="doesNotReject"?"rejection":"exception";C({actual:k,expected:j,operator:M.name,message:"Got unwanted ".concat(he).concat(ae,`
`)+'Actual message: "'.concat(k&&k.message,'"'),stackStartFn:M})}throw k}}S.throws=function M(k){for(var j=arguments.length,te=new Array(j>1?j-1:0),ae=1;ae<j;ae++)te[ae-1]=arguments[ae];Q.apply(void 0,[M,F(k)].concat(te))},S.rejects=function M(k){for(var j=arguments.length,te=new Array(j>1?j-1:0),ae=1;ae<j;ae++)te[ae-1]=arguments[ae];return G(k).then(function(he){return Q.apply(void 0,[M,he].concat(te))})},S.doesNotThrow=function M(k){for(var j=arguments.length,te=new Array(j>1?j-1:0),ae=1;ae<j;ae++)te[ae-1]=arguments[ae];X.apply(void 0,[M,F(k)].concat(te))},S.doesNotReject=function M(k){for(var j=arguments.length,te=new Array(j>1?j-1:0),ae=1;ae<j;ae++)te[ae-1]=arguments[ae];return G(k).then(function(he){return X.apply(void 0,[M,he].concat(te))})},S.ifError=function M(k){if(k!=null){var j="ifError got unwanted exception: ";r(k)==="object"&&typeof k.message=="string"?k.message.length===0&&k.constructor?j+=k.constructor.name:j+=k.message:j+=d(k);var te=new u({actual:k,expected:null,operator:"ifError",message:j,stackStartFn:M}),ae=k.stack;if(typeof ae=="string"){var he=ae.split(`
`);he.shift();for(var re=te.stack.split(`
`),q=0;q<he.length;q++){var J=re.indexOf(he[q]);if(J!==-1){re=re.slice(0,J);break}}te.stack="".concat(re.join(`
`),`
`).concat(he.join(`
`))}throw te}};function O(M,k,j,te,ae){if(!p(k))throw new o("regexp","RegExp",k);var he=ae==="match";if(typeof M!="string"||v(k,M)!==he){if(j instanceof Error)throw j;var re=!j;j=j||(typeof M!="string"?'The "string" argument must be of type string. Received type '+"".concat(r(M)," (").concat(d(M),")"):(he?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(d(k),`. Input:

`).concat(d(M),`
`));var q=new u({actual:M,expected:k,message:j,operator:ae,stackStartFn:te});throw q.generatedMessage=re,q}}S.match=function M(k,j,te){O(k,j,te,M,"match")},S.doesNotMatch=function M(k,j,te){O(k,j,te,M,"doesNotMatch")};function R(){for(var M=arguments.length,k=new Array(M),j=0;j<M;j++)k[j]=arguments[j];V.apply(void 0,[R,k.length].concat(k))}return S.strict=m(R,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict,QS.exports}var s0={},Ud={},Cv={exports:{}},Sye=Cv.exports,hD;function Eye(){return hD||(hD=1,function(r){(function(e){var t,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,h=1e9;function g(E){var S,T,C,P=M.prototype={constructor:M,toString:null,valueOf:null},V=new M(1),L=20,D=4,b=-7,I=21,B=-1e7,F=1e7,z=!1,G=1,Q=0,X={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},O="0123456789abcdefghijklmnopqrstuvwxyz",R=!0;function M(re,q){var J,de,ue,we,se,U,K,ie,ge=this;if(!(ge instanceof M))return new M(re,q);if(q==null){if(re&&re._isBigNumber===!0){ge.s=re.s,!re.c||re.e>F?ge.c=ge.e=null:re.e<B?ge.c=[ge.e=0]:(ge.e=re.e,ge.c=re.c.slice());return}if((U=typeof re=="number")&&re*0==0){if(ge.s=1/re<0?(re=-re,-1):1,re===~~re){for(we=0,se=re;se>=10;se/=10,we++);we>F?ge.c=ge.e=null:(ge.e=we,ge.c=[re]);return}ie=String(re)}else{if(!n.test(ie=String(re)))return C(ge,ie,U);ge.s=ie.charCodeAt(0)==45?(ie=ie.slice(1),-1):1}(we=ie.indexOf("."))>-1&&(ie=ie.replace(".","")),(se=ie.search(/e/i))>0?(we<0&&(we=se),we+=+ie.slice(se+1),ie=ie.substring(0,se)):we<0&&(we=ie.length)}else{if(v(q,2,O.length,"Base"),q==10&&R)return ge=new M(re),ae(ge,L+ge.e+1,D);if(ie=String(re),U=typeof re=="number"){if(re*0!=0)return C(ge,ie,U,q);if(ge.s=1/re<0?(ie=ie.slice(1),-1):1,M.DEBUG&&ie.replace(/^0\.0*|\./,"").length>15)throw Error(a+re)}else ge.s=ie.charCodeAt(0)===45?(ie=ie.slice(1),-1):1;for(J=O.slice(0,q),we=se=0,K=ie.length;se<K;se++)if(J.indexOf(de=ie.charAt(se))<0){if(de=="."){if(se>we){we=K;continue}}else if(!ue&&(ie==ie.toUpperCase()&&(ie=ie.toLowerCase())||ie==ie.toLowerCase()&&(ie=ie.toUpperCase()))){ue=!0,se=-1,we=0;continue}return C(ge,String(re),U,q)}U=!1,ie=T(ie,q,10,ge.s),(we=ie.indexOf("."))>-1?ie=ie.replace(".",""):we=ie.length}for(se=0;ie.charCodeAt(se)===48;se++);for(K=ie.length;ie.charCodeAt(--K)===48;);if(ie=ie.slice(se,++K)){if(K-=se,U&&M.DEBUG&&K>15&&(re>u||re!==s(re)))throw Error(a+ge.s*re);if((we=we-se-1)>F)ge.c=ge.e=null;else if(we<B)ge.c=[ge.e=0];else{if(ge.e=we,ge.c=[],se=(we+1)%l,we<0&&(se+=l),se<K){for(se&&ge.c.push(+ie.slice(0,se)),K-=l;se<K;)ge.c.push(+ie.slice(se,se+=l));se=l-(ie=ie.slice(se)).length}else se-=K;for(;se--;ie+="0");ge.c.push(+ie)}}else ge.c=[ge.e=0]}M.clone=g,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(re){var q,J;if(re!=null)if(typeof re=="object"){if(re.hasOwnProperty(q="DECIMAL_PLACES")&&(J=re[q],v(J,0,h,q),L=J),re.hasOwnProperty(q="ROUNDING_MODE")&&(J=re[q],v(J,0,8,q),D=J),re.hasOwnProperty(q="EXPONENTIAL_AT")&&(J=re[q],J&&J.pop?(v(J[0],-1e9,0,q),v(J[1],0,h,q),b=J[0],I=J[1]):(v(J,-1e9,h,q),b=-(I=J<0?-J:J))),re.hasOwnProperty(q="RANGE"))if(J=re[q],J&&J.pop)v(J[0],-1e9,-1,q),v(J[1],1,h,q),B=J[0],F=J[1];else if(v(J,-1e9,h,q),J)B=-(F=J<0?-J:J);else throw Error(o+q+" cannot be zero: "+J);if(re.hasOwnProperty(q="CRYPTO"))if(J=re[q],J===!!J)if(J)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))z=J;else throw z=!J,Error(o+"crypto unavailable");else z=J;else throw Error(o+q+" not true or false: "+J);if(re.hasOwnProperty(q="MODULO_MODE")&&(J=re[q],v(J,0,9,q),G=J),re.hasOwnProperty(q="POW_PRECISION")&&(J=re[q],v(J,0,h,q),Q=J),re.hasOwnProperty(q="FORMAT"))if(J=re[q],typeof J=="object")X=J;else throw Error(o+q+" not an object: "+J);if(re.hasOwnProperty(q="ALPHABET"))if(J=re[q],typeof J=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(J))R=J.slice(0,10)=="0123456789",O=J;else throw Error(o+q+" invalid: "+J)}else throw Error(o+"Object expected: "+re);return{DECIMAL_PLACES:L,ROUNDING_MODE:D,EXPONENTIAL_AT:[b,I],RANGE:[B,F],CRYPTO:z,MODULO_MODE:G,POW_PRECISION:Q,FORMAT:X,ALPHABET:O}},M.isBigNumber=function(re){if(!re||re._isBigNumber!==!0)return!1;if(!M.DEBUG)return!0;var q,J,de=re.c,ue=re.e,we=re.s;e:if({}.toString.call(de)=="[object Array]"){if((we===1||we===-1)&&ue>=-1e9&&ue<=h&&ue===s(ue)){if(de[0]===0){if(ue===0&&de.length===1)return!0;break e}if(q=(ue+1)%l,q<1&&(q+=l),String(de[0]).length==q){for(q=0;q<de.length;q++)if(J=de[q],J<0||J>=c||J!==s(J))break e;if(J!==0)return!0}}}else if(de===null&&ue===null&&(we===null||we===1||we===-1))return!0;throw Error(o+"Invalid BigNumber: "+re)},M.maximum=M.max=function(){return j(arguments,-1)},M.minimum=M.min=function(){return j(arguments,1)},M.random=function(){var re=9007199254740992,q=Math.random()*re&2097151?function(){return s(Math.random()*re)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(J){var de,ue,we,se,U,K=0,ie=[],ge=new M(V);if(J==null?J=L:v(J,0,h),se=i(J/l),z)if(crypto.getRandomValues){for(de=crypto.getRandomValues(new Uint32Array(se*=2));K<se;)U=de[K]*131072+(de[K+1]>>>11),U>=9e15?(ue=crypto.getRandomValues(new Uint32Array(2)),de[K]=ue[0],de[K+1]=ue[1]):(ie.push(U%1e14),K+=2);K=se/2}else if(crypto.randomBytes){for(de=crypto.randomBytes(se*=7);K<se;)U=(de[K]&31)*281474976710656+de[K+1]*1099511627776+de[K+2]*4294967296+de[K+3]*16777216+(de[K+4]<<16)+(de[K+5]<<8)+de[K+6],U>=9e15?crypto.randomBytes(7).copy(de,K):(ie.push(U%1e14),K+=7);K=se/7}else throw z=!1,Error(o+"crypto unavailable");if(!z)for(;K<se;)U=q(),U<9e15&&(ie[K++]=U%1e14);for(se=ie[--K],J%=l,se&&J&&(U=f[l-J],ie[K]=s(se/U)*U);ie[K]===0;ie.pop(),K--);if(K<0)ie=[we=0];else{for(we=-1;ie[0]===0;ie.splice(0,1),we-=l);for(K=1,U=ie[0];U>=10;U/=10,K++);K<l&&(we-=l-K)}return ge.e=we,ge.c=ie,ge}}(),M.sum=function(){for(var re=1,q=arguments,J=new M(q[0]);re<q.length;)J=J.plus(q[re++]);return J},T=function(){var re="0123456789";function q(J,de,ue,we){for(var se,U=[0],K,ie=0,ge=J.length;ie<ge;){for(K=U.length;K--;U[K]*=de);for(U[0]+=we.indexOf(J.charAt(ie++)),se=0;se<U.length;se++)U[se]>ue-1&&(U[se+1]==null&&(U[se+1]=0),U[se+1]+=U[se]/ue|0,U[se]%=ue)}return U.reverse()}return function(J,de,ue,we,se){var U,K,ie,ge,_e,Ce,Ne,xe,Ae=J.indexOf("."),Me=L,oe=D;for(Ae>=0&&(ge=Q,Q=0,J=J.replace(".",""),xe=new M(de),Ce=xe.pow(J.length-Ae),Q=ge,xe.c=q(x(m(Ce.c),Ce.e,"0"),10,ue,re),xe.e=xe.c.length),Ne=q(J,de,ue,se?(U=O,re):(U=re,O)),ie=ge=Ne.length;Ne[--ge]==0;Ne.pop());if(!Ne[0])return U.charAt(0);if(Ae<0?--ie:(Ce.c=Ne,Ce.e=ie,Ce.s=we,Ce=S(Ce,xe,Me,oe,ue),Ne=Ce.c,_e=Ce.r,ie=Ce.e),K=ie+Me+1,Ae=Ne[K],ge=ue/2,_e=_e||K<0||Ne[K+1]!=null,_e=oe<4?(Ae!=null||_e)&&(oe==0||oe==(Ce.s<0?3:2)):Ae>ge||Ae==ge&&(oe==4||_e||oe==6&&Ne[K-1]&1||oe==(Ce.s<0?8:7)),K<1||!Ne[0])J=_e?x(U.charAt(1),-Me,U.charAt(0)):U.charAt(0);else{if(Ne.length=K,_e)for(--ue;++Ne[--K]>ue;)Ne[K]=0,K||(++ie,Ne=[1].concat(Ne));for(ge=Ne.length;!Ne[--ge];);for(Ae=0,J="";Ae<=ge;J+=U.charAt(Ne[Ae++]));J=x(J,ie,U.charAt(0))}return J}}(),S=function(){function re(de,ue,we){var se,U,K,ie,ge=0,_e=de.length,Ce=ue%d,Ne=ue/d|0;for(de=de.slice();_e--;)K=de[_e]%d,ie=de[_e]/d|0,se=Ne*K+ie*Ce,U=Ce*K+se%d*d+ge,ge=(U/we|0)+(se/d|0)+Ne*ie,de[_e]=U%we;return ge&&(de=[ge].concat(de)),de}function q(de,ue,we,se){var U,K;if(we!=se)K=we>se?1:-1;else for(U=K=0;U<we;U++)if(de[U]!=ue[U]){K=de[U]>ue[U]?1:-1;break}return K}function J(de,ue,we,se){for(var U=0;we--;)de[we]-=U,U=de[we]<ue[we]?1:0,de[we]=U*se+de[we]-ue[we];for(;!de[0]&&de.length>1;de.splice(0,1));}return function(de,ue,we,se,U){var K,ie,ge,_e,Ce,Ne,xe,Ae,Me,oe,H,ee,W,N,$,ne,pe,be=de.s==ue.s?1:-1,fe=de.c,Ee=ue.c;if(!fe||!fe[0]||!Ee||!Ee[0])return new M(!de.s||!ue.s||(fe?Ee&&fe[0]==Ee[0]:!Ee)?NaN:fe&&fe[0]==0||!Ee?be*0:be/0);for(Ae=new M(be),Me=Ae.c=[],ie=de.e-ue.e,be=we+ie+1,U||(U=c,ie=p(de.e/l)-p(ue.e/l),be=be/l|0),ge=0;Ee[ge]==(fe[ge]||0);ge++);if(Ee[ge]>(fe[ge]||0)&&ie--,be<0)Me.push(1),_e=!0;else{for(N=fe.length,ne=Ee.length,ge=0,be+=2,Ce=s(U/(Ee[0]+1)),Ce>1&&(Ee=re(Ee,Ce,U),fe=re(fe,Ce,U),ne=Ee.length,N=fe.length),W=ne,oe=fe.slice(0,ne),H=oe.length;H<ne;oe[H++]=0);pe=Ee.slice(),pe=[0].concat(pe),$=Ee[0],Ee[1]>=U/2&&$++;do{if(Ce=0,K=q(Ee,oe,ne,H),K<0){if(ee=oe[0],ne!=H&&(ee=ee*U+(oe[1]||0)),Ce=s(ee/$),Ce>1)for(Ce>=U&&(Ce=U-1),Ne=re(Ee,Ce,U),xe=Ne.length,H=oe.length;q(Ne,oe,xe,H)==1;)Ce--,J(Ne,ne<xe?pe:Ee,xe,U),xe=Ne.length,K=1;else Ce==0&&(K=Ce=1),Ne=Ee.slice(),xe=Ne.length;if(xe<H&&(Ne=[0].concat(Ne)),J(oe,Ne,H,U),H=oe.length,K==-1)for(;q(Ee,oe,ne,H)<1;)Ce++,J(oe,ne<H?pe:Ee,H,U),H=oe.length}else K===0&&(Ce++,oe=[0]);Me[ge++]=Ce,oe[0]?oe[H++]=fe[W]||0:(oe=[fe[W]],H=1)}while((W++<N||oe[0]!=null)&&be--);_e=oe[0]!=null,Me[0]||Me.splice(0,1)}if(U==c){for(ge=1,be=Me[0];be>=10;be/=10,ge++);ae(Ae,we+(Ae.e=ge+ie*l-1)+1,se,_e)}else Ae.e=ie,Ae.r=+_e;return Ae}}();function k(re,q,J,de){var ue,we,se,U,K;if(J==null?J=D:v(J,0,8),!re.c)return re.toString();if(ue=re.c[0],se=re.e,q==null)K=m(re.c),K=de==1||de==2&&(se<=b||se>=I)?_(K,se):x(K,se,"0");else if(re=ae(new M(re),q,J),we=re.e,K=m(re.c),U=K.length,de==1||de==2&&(q<=we||we<=b)){for(;U<q;K+="0",U++);K=_(K,we)}else if(q-=se+(de===2&&we>se),K=x(K,we,"0"),we+1>U){if(--q>0)for(K+=".";q--;K+="0");}else if(q+=we-U,q>0)for(we+1==U&&(K+=".");q--;K+="0");return re.s<0&&ue?"-"+K:K}function j(re,q){for(var J,de,ue=1,we=new M(re[0]);ue<re.length;ue++)de=new M(re[ue]),(!de.s||(J=y(we,de))===q||J===0&&we.s===q)&&(we=de);return we}function te(re,q,J){for(var de=1,ue=q.length;!q[--ue];q.pop());for(ue=q[0];ue>=10;ue/=10,de++);return(J=de+J*l-1)>F?re.c=re.e=null:J<B?re.c=[re.e=0]:(re.e=J,re.c=q),re}C=function(){var re=/^(-?)0([xbo])(?=\w[\w.]*$)/i,q=/^([^.]+)\.$/,J=/^\.([^.]+)$/,de=/^-?(Infinity|NaN)$/,ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(we,se,U,K){var ie,ge=U?se:se.replace(ue,"");if(de.test(ge))we.s=isNaN(ge)?null:ge<0?-1:1;else{if(!U&&(ge=ge.replace(re,function(_e,Ce,Ne){return ie=(Ne=Ne.toLowerCase())=="x"?16:Ne=="b"?2:8,!K||K==ie?Ce:_e}),K&&(ie=K,ge=ge.replace(q,"$1").replace(J,"0.$1")),se!=ge))return new M(ge,ie);if(M.DEBUG)throw Error(o+"Not a"+(K?" base "+K:"")+" number: "+se);we.s=null}we.c=we.e=null}}();function ae(re,q,J,de){var ue,we,se,U,K,ie,ge,_e=re.c,Ce=f;if(_e){e:{for(ue=1,U=_e[0];U>=10;U/=10,ue++);if(we=q-ue,we<0)we+=l,se=q,K=_e[ie=0],ge=s(K/Ce[ue-se-1]%10);else if(ie=i((we+1)/l),ie>=_e.length)if(de){for(;_e.length<=ie;_e.push(0));K=ge=0,ue=1,we%=l,se=we-l+1}else break e;else{for(K=U=_e[ie],ue=1;U>=10;U/=10,ue++);we%=l,se=we-l+ue,ge=se<0?0:s(K/Ce[ue-se-1]%10)}if(de=de||q<0||_e[ie+1]!=null||(se<0?K:K%Ce[ue-se-1]),de=J<4?(ge||de)&&(J==0||J==(re.s<0?3:2)):ge>5||ge==5&&(J==4||de||J==6&&(we>0?se>0?K/Ce[ue-se]:0:_e[ie-1])%10&1||J==(re.s<0?8:7)),q<1||!_e[0])return _e.length=0,de?(q-=re.e+1,_e[0]=Ce[(l-q%l)%l],re.e=-q||0):_e[0]=re.e=0,re;if(we==0?(_e.length=ie,U=1,ie--):(_e.length=ie+1,U=Ce[l-we],_e[ie]=se>0?s(K/Ce[ue-se]%Ce[se])*U:0),de)for(;;)if(ie==0){for(we=1,se=_e[0];se>=10;se/=10,we++);for(se=_e[0]+=U,U=1;se>=10;se/=10,U++);we!=U&&(re.e++,_e[0]==c&&(_e[0]=1));break}else{if(_e[ie]+=U,_e[ie]!=c)break;_e[ie--]=0,U=1}for(we=_e.length;_e[--we]===0;_e.pop());}re.e>F?re.c=re.e=null:re.e<B&&(re.c=[re.e=0])}return re}function he(re){var q,J=re.e;return J===null?re.toString():(q=m(re.c),q=J<=b||J>=I?_(q,J):x(q,J,"0"),re.s<0?"-"+q:q)}return P.absoluteValue=P.abs=function(){var re=new M(this);return re.s<0&&(re.s=1),re},P.comparedTo=function(re,q){return y(this,new M(re,q))},P.decimalPlaces=P.dp=function(re,q){var J,de,ue,we=this;if(re!=null)return v(re,0,h),q==null?q=D:v(q,0,8),ae(new M(we),re+we.e+1,q);if(!(J=we.c))return null;if(de=((ue=J.length-1)-p(this.e/l))*l,ue=J[ue])for(;ue%10==0;ue/=10,de--);return de<0&&(de=0),de},P.dividedBy=P.div=function(re,q){return S(this,new M(re,q),L,D)},P.dividedToIntegerBy=P.idiv=function(re,q){return S(this,new M(re,q),0,1)},P.exponentiatedBy=P.pow=function(re,q){var J,de,ue,we,se,U,K,ie,ge,_e=this;if(re=new M(re),re.c&&!re.isInteger())throw Error(o+"Exponent not an integer: "+he(re));if(q!=null&&(q=new M(q)),U=re.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!re.c||!re.c[0])return ge=new M(Math.pow(+he(_e),U?re.s*(2-w(re)):+he(re))),q?ge.mod(q):ge;if(K=re.s<0,q){if(q.c?!q.c[0]:!q.s)return new M(NaN);de=!K&&_e.isInteger()&&q.isInteger(),de&&(_e=_e.mod(q))}else{if(re.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||U&&_e.c[1]>=24e7:_e.c[0]<8e13||U&&_e.c[0]<=9999975e7)))return we=_e.s<0&&w(re)?-0:0,_e.e>-1&&(we=1/we),new M(K?1/we:we);Q&&(we=i(Q/l+2))}for(U?(J=new M(.5),K&&(re.s=1),ie=w(re)):(ue=Math.abs(+he(re)),ie=ue%2),ge=new M(V);;){if(ie){if(ge=ge.times(_e),!ge.c)break;we?ge.c.length>we&&(ge.c.length=we):de&&(ge=ge.mod(q))}if(ue){if(ue=s(ue/2),ue===0)break;ie=ue%2}else if(re=re.times(J),ae(re,re.e+1,1),re.e>14)ie=w(re);else{if(ue=+he(re),ue===0)break;ie=ue%2}_e=_e.times(_e),we?_e.c&&_e.c.length>we&&(_e.c.length=we):de&&(_e=_e.mod(q))}return de?ge:(K&&(ge=V.div(ge)),q?ge.mod(q):we?ae(ge,Q,D,se):ge)},P.integerValue=function(re){var q=new M(this);return re==null?re=D:v(re,0,8),ae(q,q.e+1,re)},P.isEqualTo=P.eq=function(re,q){return y(this,new M(re,q))===0},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(re,q){return y(this,new M(re,q))>0},P.isGreaterThanOrEqualTo=P.gte=function(re,q){return(q=y(this,new M(re,q)))===1||q===0},P.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},P.isLessThan=P.lt=function(re,q){return y(this,new M(re,q))<0},P.isLessThanOrEqualTo=P.lte=function(re,q){return(q=y(this,new M(re,q)))===-1||q===0},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&this.c[0]==0},P.minus=function(re,q){var J,de,ue,we,se=this,U=se.s;if(re=new M(re,q),q=re.s,!U||!q)return new M(NaN);if(U!=q)return re.s=-q,se.plus(re);var K=se.e/l,ie=re.e/l,ge=se.c,_e=re.c;if(!K||!ie){if(!ge||!_e)return ge?(re.s=-q,re):new M(_e?se:NaN);if(!ge[0]||!_e[0])return _e[0]?(re.s=-q,re):new M(ge[0]?se:D==3?-0:0)}if(K=p(K),ie=p(ie),ge=ge.slice(),U=K-ie){for((we=U<0)?(U=-U,ue=ge):(ie=K,ue=_e),ue.reverse(),q=U;q--;ue.push(0));ue.reverse()}else for(de=(we=(U=ge.length)<(q=_e.length))?U:q,U=q=0;q<de;q++)if(ge[q]!=_e[q]){we=ge[q]<_e[q];break}if(we&&(ue=ge,ge=_e,_e=ue,re.s=-re.s),q=(de=_e.length)-(J=ge.length),q>0)for(;q--;ge[J++]=0);for(q=c-1;de>U;){if(ge[--de]<_e[de]){for(J=de;J&&!ge[--J];ge[J]=q);--ge[J],ge[de]+=c}ge[de]-=_e[de]}for(;ge[0]==0;ge.splice(0,1),--ie);return ge[0]?te(re,ge,ie):(re.s=D==3?-1:1,re.c=[re.e=0],re)},P.modulo=P.mod=function(re,q){var J,de,ue=this;return re=new M(re,q),!ue.c||!re.s||re.c&&!re.c[0]?new M(NaN):!re.c||ue.c&&!ue.c[0]?new M(ue):(G==9?(de=re.s,re.s=1,J=S(ue,re,0,3),re.s=de,J.s*=de):J=S(ue,re,0,G),re=ue.minus(J.times(re)),!re.c[0]&&G==1&&(re.s=ue.s),re)},P.multipliedBy=P.times=function(re,q){var J,de,ue,we,se,U,K,ie,ge,_e,Ce,Ne,xe,Ae,Me,oe=this,H=oe.c,ee=(re=new M(re,q)).c;if(!H||!ee||!H[0]||!ee[0])return!oe.s||!re.s||H&&!H[0]&&!ee||ee&&!ee[0]&&!H?re.c=re.e=re.s=null:(re.s*=oe.s,!H||!ee?re.c=re.e=null:(re.c=[0],re.e=0)),re;for(de=p(oe.e/l)+p(re.e/l),re.s*=oe.s,K=H.length,_e=ee.length,K<_e&&(xe=H,H=ee,ee=xe,ue=K,K=_e,_e=ue),ue=K+_e,xe=[];ue--;xe.push(0));for(Ae=c,Me=d,ue=_e;--ue>=0;){for(J=0,Ce=ee[ue]%Me,Ne=ee[ue]/Me|0,se=K,we=ue+se;we>ue;)ie=H[--se]%Me,ge=H[se]/Me|0,U=Ne*ie+ge*Ce,ie=Ce*ie+U%Me*Me+xe[we]+J,J=(ie/Ae|0)+(U/Me|0)+Ne*ge,xe[we--]=ie%Ae;xe[we]=J}return J?++de:xe.splice(0,1),te(re,xe,de)},P.negated=function(){var re=new M(this);return re.s=-re.s||null,re},P.plus=function(re,q){var J,de=this,ue=de.s;if(re=new M(re,q),q=re.s,!ue||!q)return new M(NaN);if(ue!=q)return re.s=-q,de.minus(re);var we=de.e/l,se=re.e/l,U=de.c,K=re.c;if(!we||!se){if(!U||!K)return new M(ue/0);if(!U[0]||!K[0])return K[0]?re:new M(U[0]?de:ue*0)}if(we=p(we),se=p(se),U=U.slice(),ue=we-se){for(ue>0?(se=we,J=K):(ue=-ue,J=U),J.reverse();ue--;J.push(0));J.reverse()}for(ue=U.length,q=K.length,ue-q<0&&(J=K,K=U,U=J,q=ue),ue=0;q;)ue=(U[--q]=U[q]+K[q]+ue)/c|0,U[q]=c===U[q]?0:U[q]%c;return ue&&(U=[ue].concat(U),++se),te(re,U,se)},P.precision=P.sd=function(re,q){var J,de,ue,we=this;if(re!=null&&re!==!!re)return v(re,1,h),q==null?q=D:v(q,0,8),ae(new M(we),re,q);if(!(J=we.c))return null;if(ue=J.length-1,de=ue*l+1,ue=J[ue]){for(;ue%10==0;ue/=10,de--);for(ue=J[0];ue>=10;ue/=10,de++);}return re&&we.e+1>de&&(de=we.e+1),de},P.shiftedBy=function(re){return v(re,-9007199254740991,u),this.times("1e"+re)},P.squareRoot=P.sqrt=function(){var re,q,J,de,ue,we=this,se=we.c,U=we.s,K=we.e,ie=L+4,ge=new M("0.5");if(U!==1||!se||!se[0])return new M(!U||U<0&&(!se||se[0])?NaN:se?we:1/0);if(U=Math.sqrt(+he(we)),U==0||U==1/0?(q=m(se),(q.length+K)%2==0&&(q+="0"),U=Math.sqrt(+q),K=p((K+1)/2)-(K<0||K%2),U==1/0?q="5e"+K:(q=U.toExponential(),q=q.slice(0,q.indexOf("e")+1)+K),J=new M(q)):J=new M(U+""),J.c[0]){for(K=J.e,U=K+ie,U<3&&(U=0);;)if(ue=J,J=ge.times(ue.plus(S(we,ue,ie,1))),m(ue.c).slice(0,U)===(q=m(J.c)).slice(0,U))if(J.e<K&&--U,q=q.slice(U-3,U+1),q=="9999"||!de&&q=="4999"){if(!de&&(ae(ue,ue.e+L+2,0),ue.times(ue).eq(we))){J=ue;break}ie+=4,U+=4,de=1}else{(!+q||!+q.slice(1)&&q.charAt(0)=="5")&&(ae(J,J.e+L+2,1),re=!J.times(J).eq(we));break}}return ae(J,J.e+L+1,D,re)},P.toExponential=function(re,q){return re!=null&&(v(re,0,h),re++),k(this,re,q,1)},P.toFixed=function(re,q){return re!=null&&(v(re,0,h),re=re+this.e+1),k(this,re,q)},P.toFormat=function(re,q,J){var de,ue=this;if(J==null)re!=null&&q&&typeof q=="object"?(J=q,q=null):re&&typeof re=="object"?(J=re,re=q=null):J=X;else if(typeof J!="object")throw Error(o+"Argument not an object: "+J);if(de=ue.toFixed(re,q),ue.c){var we,se=de.split("."),U=+J.groupSize,K=+J.secondaryGroupSize,ie=J.groupSeparator||"",ge=se[0],_e=se[1],Ce=ue.s<0,Ne=Ce?ge.slice(1):ge,xe=Ne.length;if(K&&(we=U,U=K,K=we,xe-=we),U>0&&xe>0){for(we=xe%U||U,ge=Ne.substr(0,we);we<xe;we+=U)ge+=ie+Ne.substr(we,U);K>0&&(ge+=ie+Ne.slice(we)),Ce&&(ge="-"+ge)}de=_e?ge+(J.decimalSeparator||"")+((K=+J.fractionGroupSize)?_e.replace(new RegExp("\\d{"+K+"}\\B","g"),"$&"+(J.fractionGroupSeparator||"")):_e):ge}return(J.prefix||"")+de+(J.suffix||"")},P.toFraction=function(re){var q,J,de,ue,we,se,U,K,ie,ge,_e,Ce,Ne=this,xe=Ne.c;if(re!=null&&(U=new M(re),!U.isInteger()&&(U.c||U.s!==1)||U.lt(V)))throw Error(o+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+he(U));if(!xe)return new M(Ne);for(q=new M(V),ie=J=new M(V),de=K=new M(V),Ce=m(xe),we=q.e=Ce.length-Ne.e-1,q.c[0]=f[(se=we%l)<0?l+se:se],re=!re||U.comparedTo(q)>0?we>0?q:ie:U,se=F,F=1/0,U=new M(Ce),K.c[0]=0;ge=S(U,q,0,1),ue=J.plus(ge.times(de)),ue.comparedTo(re)!=1;)J=de,de=ue,ie=K.plus(ge.times(ue=ie)),K=ue,q=U.minus(ge.times(ue=q)),U=ue;return ue=S(re.minus(J),de,0,1),K=K.plus(ue.times(ie)),J=J.plus(ue.times(de)),K.s=ie.s=Ne.s,we=we*2,_e=S(ie,de,we,D).minus(Ne).abs().comparedTo(S(K,J,we,D).minus(Ne).abs())<1?[ie,de]:[K,J],F=se,_e},P.toNumber=function(){return+he(this)},P.toPrecision=function(re,q){return re!=null&&v(re,1,h),k(this,re,q,2)},P.toString=function(re){var q,J=this,de=J.s,ue=J.e;return ue===null?de?(q="Infinity",de<0&&(q="-"+q)):q="NaN":(re==null?q=ue<=b||ue>=I?_(m(J.c),ue):x(m(J.c),ue,"0"):re===10&&R?(J=ae(new M(J),L+ue+1,D),q=x(m(J.c),J.e,"0")):(v(re,2,O.length,"Base"),q=T(x(m(J.c),ue,"0"),10,re,de,!0)),de<0&&J.c[0]&&(q="-"+q)),q},P.valueOf=P.toJSON=function(){return he(this)},P._isBigNumber=!0,E!=null&&M.set(E),M}function p(E){var S=E|0;return E>0||E===S?S:S-1}function m(E){for(var S,T,C=1,P=E.length,V=E[0]+"";C<P;){for(S=E[C++]+"",T=l-S.length;T--;S="0"+S);V+=S}for(P=V.length;V.charCodeAt(--P)===48;);return V.slice(0,P+1||1)}function y(E,S){var T,C,P=E.c,V=S.c,L=E.s,D=S.s,b=E.e,I=S.e;if(!L||!D)return null;if(T=P&&!P[0],C=V&&!V[0],T||C)return T?C?0:-D:L;if(L!=D)return L;if(T=L<0,C=b==I,!P||!V)return C?0:!P^T?1:-1;if(!C)return b>I^T?1:-1;for(D=(b=P.length)<(I=V.length)?b:I,L=0;L<D;L++)if(P[L]!=V[L])return P[L]>V[L]^T?1:-1;return b==I?0:b>I^T?1:-1}function v(E,S,T,C){if(E<S||E>T||E!==s(E))throw Error(o+(C||"Argument")+(typeof E=="number"?E<S||E>T?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function w(E){var S=E.c.length-1;return p(E.e/l)==S&&E.c[S]%2!=0}function _(E,S){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(S<0?"e":"e+")+S}function x(E,S,T){var C,P;if(S<0){for(P=T+".";++S;P+=T);E=P+E}else if(C=E.length,++S>C){for(P=T,S-=C;--S;P+=T);E+=P}else S<C&&(E=E.slice(0,S)+"."+E.slice(S));return E}t=g(),t.default=t.BigNumber=t,r.exports?r.exports=t:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=t)})(Sye)}(Cv)),Cv.exports}var Tv={exports:{}},Aye=Tv.exports,pD;function Iye(){return pD||(pD=1,function(r,e){(function(t,n){r.exports=n()})(Aye,function(){var t=Math.imul,n=Math.clz32,i=Math.abs,s=Math.max,o=Math.floor;class a extends Array{constructor(l,u){if(super(l),this.sign=u,l>a.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(l){var u=Number.isFinite;if(typeof l=="number"){if(l===0)return a.__zero();if(a.__isOneDigitInt(l))return 0>l?a.__oneDigit(-l,!0):a.__oneDigit(l,!1);if(!u(l)||o(l)!==l)throw new RangeError("The number "+l+" cannot be converted to BigInt because it is not an integer");return a.__fromDouble(l)}if(typeof l=="string"){const f=a.__fromString(l);if(f===null)throw new SyntaxError("Cannot convert "+l+" to a BigInt");return f}if(typeof l=="boolean")return l===!0?a.__oneDigit(1,!1):a.__zero();if(typeof l=="object"){if(l.constructor===a)return l;const f=a.__toPrimitive(l);return a.BigInt(f)}throw new TypeError("Cannot convert "+l+" to a BigInt")}toDebugString(){const l=["BigInt["];for(const u of this)l.push((u&&(u>>>0).toString(16))+", ");return l.push("]"),l.join("")}toString(l=10){if(2>l||36<l)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(l&l-1)==0?a.__toStringBasePowerOfTwo(this,l):a.__toStringGeneric(this,l,!1)}static toNumber(l){const u=l.length;if(u===0)return 0;if(u===1){const T=l.__unsignedDigit(0);return l.sign?-T:T}const f=l.__digit(u-1),d=a.__clz30(f),h=30*u-d;if(1024<h)return l.sign?-1/0:1/0;let g=h-1,p=f,m=u-1;const y=d+3;let v=y===32?0:p<<y;v>>>=12;const w=y-12;let _=12<=y?0:p<<20+y,x=20+y;for(0<w&&0<m&&(m--,p=l.__digit(m),v|=p>>>30-w,_=p<<w+2,x=w+2);0<x&&0<m;)m--,p=l.__digit(m),_|=30<=x?p<<x-30:p>>>30-x,x-=30;const E=a.__decideRounding(l,x,m,p);if((E===1||E===0&&(1&_)==1)&&(_=_+1>>>0,_===0&&(v++,v>>>20!=0&&(v=0,g++,1023<g))))return l.sign?-1/0:1/0;const S=l.sign?-2147483648:0;return g=g+1023<<20,a.__kBitConversionInts[1]=S|g|v,a.__kBitConversionInts[0]=_,a.__kBitConversionDouble[0]}static unaryMinus(l){if(l.length===0)return l;const u=l.__copy();return u.sign=!l.sign,u}static bitwiseNot(l){return l.sign?a.__absoluteSubOne(l).__trim():a.__absoluteAddOne(l,!0)}static exponentiate(l,u){if(u.sign)throw new RangeError("Exponent must be positive");if(u.length===0)return a.__oneDigit(1,!1);if(l.length===0)return l;if(l.length===1&&l.__digit(0)===1)return l.sign&&(1&u.__digit(0))==0?a.unaryMinus(l):l;if(1<u.length)throw new RangeError("BigInt too big");let f=u.__unsignedDigit(0);if(f===1)return l;if(f>=a.__kMaxLengthBits)throw new RangeError("BigInt too big");if(l.length===1&&l.__digit(0)===2){const g=1+(0|f/30),p=l.sign&&(1&f)!=0,m=new a(g,p);m.__initializeDigits();const y=1<<f%30;return m.__setDigit(g-1,y),m}let d=null,h=l;for((1&f)!=0&&(d=l),f>>=1;f!==0;f>>=1)h=a.multiply(h,h),(1&f)!=0&&(d===null?d=h:d=a.multiply(d,h));return d}static multiply(l,u){if(l.length===0)return l;if(u.length===0)return u;let f=l.length+u.length;30<=l.__clzmsd()+u.__clzmsd()&&f--;const d=new a(f,l.sign!==u.sign);d.__initializeDigits();for(let h=0;h<l.length;h++)a.__multiplyAccumulate(u,l.__digit(h),d,h);return d.__trim()}static divide(l,u){if(u.length===0)throw new RangeError("Division by zero");if(0>a.__absoluteCompare(l,u))return a.__zero();const f=l.sign!==u.sign,d=u.__unsignedDigit(0);let h;if(u.length===1&&32767>=d){if(d===1)return f===l.sign?l:a.unaryMinus(l);h=a.__absoluteDivSmall(l,d,null)}else h=a.__absoluteDivLarge(l,u,!0,!1);return h.sign=f,h.__trim()}static remainder(l,u){if(u.length===0)throw new RangeError("Division by zero");if(0>a.__absoluteCompare(l,u))return l;const f=u.__unsignedDigit(0);if(u.length===1&&32767>=f){if(f===1)return a.__zero();const h=a.__absoluteModSmall(l,f);return h===0?a.__zero():a.__oneDigit(h,l.sign)}const d=a.__absoluteDivLarge(l,u,!1,!0);return d.sign=l.sign,d.__trim()}static add(l,u){const f=l.sign;return f===u.sign?a.__absoluteAdd(l,u,f):0<=a.__absoluteCompare(l,u)?a.__absoluteSub(l,u,f):a.__absoluteSub(u,l,!f)}static subtract(l,u){const f=l.sign;return f===u.sign?0<=a.__absoluteCompare(l,u)?a.__absoluteSub(l,u,f):a.__absoluteSub(u,l,!f):a.__absoluteAdd(l,u,f)}static leftShift(l,u){return u.length===0||l.length===0?l:u.sign?a.__rightShiftByAbsolute(l,u):a.__leftShiftByAbsolute(l,u)}static signedRightShift(l,u){return u.length===0||l.length===0?l:u.sign?a.__leftShiftByAbsolute(l,u):a.__rightShiftByAbsolute(l,u)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(l,u){return 0>a.__compareToBigInt(l,u)}static lessThanOrEqual(l,u){return 0>=a.__compareToBigInt(l,u)}static greaterThan(l,u){return 0<a.__compareToBigInt(l,u)}static greaterThanOrEqual(l,u){return 0<=a.__compareToBigInt(l,u)}static equal(l,u){if(l.sign!==u.sign||l.length!==u.length)return!1;for(let f=0;f<l.length;f++)if(l.__digit(f)!==u.__digit(f))return!1;return!0}static notEqual(l,u){return!a.equal(l,u)}static bitwiseAnd(l,u){if(!l.sign&&!u.sign)return a.__absoluteAnd(l,u).__trim();if(l.sign&&u.sign){const f=s(l.length,u.length)+1;let d=a.__absoluteSubOne(l,f);const h=a.__absoluteSubOne(u);return d=a.__absoluteOr(d,h,d),a.__absoluteAddOne(d,!0,d).__trim()}return l.sign&&([l,u]=[u,l]),a.__absoluteAndNot(l,a.__absoluteSubOne(u)).__trim()}static bitwiseXor(l,u){if(!l.sign&&!u.sign)return a.__absoluteXor(l,u).__trim();if(l.sign&&u.sign){const h=s(l.length,u.length),g=a.__absoluteSubOne(l,h),p=a.__absoluteSubOne(u);return a.__absoluteXor(g,p,g).__trim()}const f=s(l.length,u.length)+1;l.sign&&([l,u]=[u,l]);let d=a.__absoluteSubOne(u,f);return d=a.__absoluteXor(d,l,d),a.__absoluteAddOne(d,!0,d).__trim()}static bitwiseOr(l,u){const f=s(l.length,u.length);if(!l.sign&&!u.sign)return a.__absoluteOr(l,u).__trim();if(l.sign&&u.sign){let h=a.__absoluteSubOne(l,f);const g=a.__absoluteSubOne(u);return h=a.__absoluteAnd(h,g,h),a.__absoluteAddOne(h,!0,h).__trim()}l.sign&&([l,u]=[u,l]);let d=a.__absoluteSubOne(u,f);return d=a.__absoluteAndNot(d,l,d),a.__absoluteAddOne(d,!0,d).__trim()}static asIntN(l,u){if(u.length===0)return u;if(l=o(l),0>l)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(l===0)return a.__zero();if(l>=a.__kMaxLengthBits)return u;const f=0|(l+29)/30;if(u.length<f)return u;const d=u.__unsignedDigit(f-1),h=1<<(l-1)%30;if(u.length===f&&d<h)return u;if((d&h)!==h)return a.__truncateToNBits(l,u);if(!u.sign)return a.__truncateAndSubFromPowerOfTwo(l,u,!0);if((d&h-1)==0){for(let g=f-2;0<=g;g--)if(u.__digit(g)!==0)return a.__truncateAndSubFromPowerOfTwo(l,u,!1);return u.length===f&&d===h?u:a.__truncateToNBits(l,u)}return a.__truncateAndSubFromPowerOfTwo(l,u,!1)}static asUintN(l,u){if(u.length===0)return u;if(l=o(l),0>l)throw new RangeError("Invalid value: not (convertible to) a safe integer");if(l===0)return a.__zero();if(u.sign){if(l>a.__kMaxLengthBits)throw new RangeError("BigInt too big");return a.__truncateAndSubFromPowerOfTwo(l,u,!1)}if(l>=a.__kMaxLengthBits)return u;const f=0|(l+29)/30;if(u.length<f)return u;const d=l%30;return u.length==f&&(d===0||!(u.__digit(f-1)>>>d))?u:a.__truncateToNBits(l,u)}static ADD(l,u){if(l=a.__toPrimitive(l),u=a.__toPrimitive(u),typeof l=="string")return typeof u!="string"&&(u=u.toString()),l+u;if(typeof u=="string")return l.toString()+u;if(l=a.__toNumeric(l),u=a.__toNumeric(u),a.__isBigInt(l)&&a.__isBigInt(u))return a.add(l,u);if(typeof l=="number"&&typeof u=="number")return l+u;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(l,u){return a.__compare(l,u,0)}static LE(l,u){return a.__compare(l,u,1)}static GT(l,u){return a.__compare(l,u,2)}static GE(l,u){return a.__compare(l,u,3)}static EQ(l,u){for(;;){if(a.__isBigInt(l))return a.__isBigInt(u)?a.equal(l,u):a.EQ(u,l);if(typeof l=="number"){if(a.__isBigInt(u))return a.__equalToNumber(u,l);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="string"){if(a.__isBigInt(u))return l=a.__fromString(l),l!==null&&a.equal(l,u);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="boolean"){if(a.__isBigInt(u))return a.__equalToNumber(u,+l);if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="symbol"){if(a.__isBigInt(u))return!1;if(typeof u!="object")return l==u;u=a.__toPrimitive(u)}else if(typeof l=="object"){if(typeof u=="object"&&u.constructor!==a)return l==u;l=a.__toPrimitive(l)}else return l==u}}static NE(l,u){return!a.EQ(l,u)}static __zero(){return new a(0,!1)}static __oneDigit(l,u){const f=new a(1,u);return f.__setDigit(0,l),f}__copy(){const l=new a(this.length,this.sign);for(let u=0;u<this.length;u++)l[u]=this[u];return l}__trim(){let l=this.length,u=this[l-1];for(;u===0;)l--,u=this[l-1],this.pop();return l===0&&(this.sign=!1),this}__initializeDigits(){for(let l=0;l<this.length;l++)this[l]=0}static __decideRounding(l,u,f,d){if(0<u)return-1;let h;if(0>u)h=-u-1;else{if(f===0)return-1;f--,d=l.__digit(f),h=29}let g=1<<h;if((d&g)==0)return-1;if(g-=1,(d&g)!=0)return 1;for(;0<f;)if(f--,l.__digit(f)!==0)return 1;return 0}static __fromDouble(l){a.__kBitConversionDouble[0]=l;const u=2047&a.__kBitConversionInts[1]>>>20,f=u-1023,d=(0|f/30)+1,h=new a(d,0>l);let g=1048575&a.__kBitConversionInts[1]|1048576,p=a.__kBitConversionInts[0];const m=20,y=f%30;let v,w=0;if(20>y){const _=m-y;w=_+32,v=g>>>_,g=g<<32-_|p>>>_,p<<=32-_}else if(y===20)w=32,v=g,g=p,p=0;else{const _=y-m;w=32-_,v=g<<_|p>>>32-_,g=p<<_,p=0}h.__setDigit(d-1,v);for(let _=d-2;0<=_;_--)0<w?(w-=30,v=g>>>2,g=g<<30|p>>>2,p<<=30):v=0,h.__setDigit(_,v);return h.__trim()}static __isWhitespace(l){return 13>=l&&9<=l||(159>=l?l==32:131071>=l?l==160||l==5760:196607>=l?(l&=131071,10>=l||l==40||l==41||l==47||l==95||l==4096):l==65279)}static __fromString(l,u=0){let f=0;const d=l.length;let h=0;if(h===d)return a.__zero();let g=l.charCodeAt(h);for(;a.__isWhitespace(g);){if(++h===d)return a.__zero();g=l.charCodeAt(h)}if(g===43){if(++h===d)return null;g=l.charCodeAt(h),f=1}else if(g===45){if(++h===d)return null;g=l.charCodeAt(h),f=-1}if(u===0){if(u=10,g===48){if(++h===d)return a.__zero();if(g=l.charCodeAt(h),g===88||g===120){if(u=16,++h===d)return null;g=l.charCodeAt(h)}else if(g===79||g===111){if(u=8,++h===d)return null;g=l.charCodeAt(h)}else if(g===66||g===98){if(u=2,++h===d)return null;g=l.charCodeAt(h)}}}else if(u===16&&g===48){if(++h===d)return a.__zero();if(g=l.charCodeAt(h),g===88||g===120){if(++h===d)return null;g=l.charCodeAt(h)}}if(f!=0&&u!==10)return null;for(;g===48;){if(++h===d)return a.__zero();g=l.charCodeAt(h)}const p=d-h;let m=a.__kMaxBitsPerChar[u],y=a.__kBitsPerCharTableMultiplier-1;if(p>1073741824/m)return null;const v=m*p+y>>>a.__kBitsPerCharTableShift,w=new a(0|(v+29)/30,!1),_=10>u?u:10,x=10<u?u-10:0;if((u&u-1)==0){m>>=a.__kBitsPerCharTableShift;const E=[],S=[];let T=!1;do{let C=0,P=0;for(;;){let V;if(g-48>>>0<_)V=g-48;else if((32|g)-97>>>0<x)V=(32|g)-87;else{T=!0;break}if(P+=m,C=C<<m|V,++h===d){T=!0;break}if(g=l.charCodeAt(h),30<P+m)break}E.push(C),S.push(P)}while(!T);a.__fillFromParts(w,E,S)}else{w.__initializeDigits();let E=!1,S=0;do{let T=0,C=1;for(;;){let V;if(g-48>>>0<_)V=g-48;else if((32|g)-97>>>0<x)V=(32|g)-87;else{E=!0;break}const L=C*u;if(1073741823<L)break;if(C=L,T=T*u+V,S++,++h===d){E=!0;break}g=l.charCodeAt(h)}y=30*a.__kBitsPerCharTableMultiplier-1;const P=0|(m*S+y>>>a.__kBitsPerCharTableShift)/30;w.__inplaceMultiplyAdd(C,T,P)}while(!E)}if(h!==d){if(!a.__isWhitespace(g))return null;for(h++;h<d;h++)if(g=l.charCodeAt(h),!a.__isWhitespace(g))return null}return w.sign=f==-1,w.__trim()}static __fillFromParts(l,u,f){let d=0,h=0,g=0;for(let p=u.length-1;0<=p;p--){const m=u[p],y=f[p];h|=m<<g,g+=y,g===30?(l.__setDigit(d++,h),g=0,h=0):30<g&&(l.__setDigit(d++,1073741823&h),g-=30,h=m>>>y-g)}if(h!==0){if(d>=l.length)throw new Error("implementation bug");l.__setDigit(d++,h)}for(;d<l.length;d++)l.__setDigit(d,0)}static __toStringBasePowerOfTwo(l,u){const f=l.length;let d=u-1;d=(85&d>>>1)+(85&d),d=(51&d>>>2)+(51&d),d=(15&d>>>4)+(15&d);const h=d,g=u-1,p=l.__digit(f-1),m=a.__clz30(p);let y=0|(30*f-m+h-1)/h;if(l.sign&&y++,268435456<y)throw new Error("string too long");const v=Array(y);let w=y-1,_=0,x=0;for(let S=0;S<f-1;S++){const T=l.__digit(S),C=(_|T<<x)&g;v[w--]=a.__kConversionChars[C];const P=h-x;for(_=T>>>P,x=30-P;x>=h;)v[w--]=a.__kConversionChars[_&g],_>>>=h,x-=h}const E=(_|p<<x)&g;for(v[w--]=a.__kConversionChars[E],_=p>>>h-x;_!==0;)v[w--]=a.__kConversionChars[_&g],_>>>=h;if(l.sign&&(v[w--]="-"),w!=-1)throw new Error("implementation bug");return v.join("")}static __toStringGeneric(l,u,f){const d=l.length;if(d===0)return"";if(d===1){let S=l.__unsignedDigit(0).toString(u);return f===!1&&l.sign&&(S="-"+S),S}const h=30*d-a.__clz30(l.__digit(d-1)),g=a.__kMaxBitsPerChar[u],p=g-1;let m=h*a.__kBitsPerCharTableMultiplier;m+=p-1,m=0|m/p;const y=m+1>>1,v=a.exponentiate(a.__oneDigit(u,!1),a.__oneDigit(y,!1));let w,_;const x=v.__unsignedDigit(0);if(v.length===1&&32767>=x){w=new a(l.length,!1),w.__initializeDigits();let S=0;for(let T=2*l.length-1;0<=T;T--){const C=S<<15|l.__halfDigit(T);w.__setHalfDigit(T,0|C/x),S=0|C%x}_=S.toString(u)}else{const S=a.__absoluteDivLarge(l,v,!0,!0);w=S.quotient;const T=S.remainder.__trim();_=a.__toStringGeneric(T,u,!0)}w.__trim();let E=a.__toStringGeneric(w,u,!0);for(;_.length<y;)_="0"+_;return f===!1&&l.sign&&(E="-"+E),E+_}static __unequalSign(l){return l?-1:1}static __absoluteGreater(l){return l?-1:1}static __absoluteLess(l){return l?1:-1}static __compareToBigInt(l,u){const f=l.sign;if(f!==u.sign)return a.__unequalSign(f);const d=a.__absoluteCompare(l,u);return 0<d?a.__absoluteGreater(f):0>d?a.__absoluteLess(f):0}static __compareToNumber(l,u){if(a.__isOneDigitInt(u)){const f=l.sign,d=0>u;if(f!==d)return a.__unequalSign(f);if(l.length===0){if(d)throw new Error("implementation bug");return u===0?0:-1}if(1<l.length)return a.__absoluteGreater(f);const h=i(u),g=l.__unsignedDigit(0);return g>h?a.__absoluteGreater(f):g<h?a.__absoluteLess(f):0}return a.__compareToDouble(l,u)}static __compareToDouble(l,u){if(u!==u)return u;if(u===1/0)return-1;if(u===-1/0)return 1;const f=l.sign;if(f!==0>u)return a.__unequalSign(f);if(u===0)throw new Error("implementation bug: should be handled elsewhere");if(l.length===0)return-1;a.__kBitConversionDouble[0]=u;const d=2047&a.__kBitConversionInts[1]>>>20;if(d==2047)throw new Error("implementation bug: handled elsewhere");const h=d-1023;if(0>h)return a.__absoluteGreater(f);const g=l.length;let p=l.__digit(g-1);const m=a.__clz30(p),y=30*g-m,v=h+1;if(y<v)return a.__absoluteLess(f);if(y>v)return a.__absoluteGreater(f);let w=1048576|1048575&a.__kBitConversionInts[1],_=a.__kBitConversionInts[0];const x=20,E=29-m;if(E!==(0|(y-1)%30))throw new Error("implementation bug");let S,T=0;if(20>E){const C=x-E;T=C+32,S=w>>>C,w=w<<32-C|_>>>C,_<<=32-C}else if(E===20)T=32,S=w,w=_,_=0;else{const C=E-x;T=32-C,S=w<<C|_>>>32-C,w=_<<C,_=0}if(p>>>=0,S>>>=0,p>S)return a.__absoluteGreater(f);if(p<S)return a.__absoluteLess(f);for(let C=g-2;0<=C;C--){0<T?(T-=30,S=w>>>2,w=w<<30|_>>>2,_<<=30):S=0;const P=l.__unsignedDigit(C);if(P>S)return a.__absoluteGreater(f);if(P<S)return a.__absoluteLess(f)}if(w!==0||_!==0){if(T===0)throw new Error("implementation bug");return a.__absoluteLess(f)}return 0}static __equalToNumber(l,u){return a.__isOneDigitInt(u)?u===0?l.length===0:l.length===1&&l.sign===0>u&&l.__unsignedDigit(0)===i(u):a.__compareToDouble(l,u)===0}static __comparisonResultToBool(l,u){return u===0?0>l:u===1?0>=l:u===2?0<l:u===3?0<=l:void 0}static __compare(l,u,f){if(l=a.__toPrimitive(l),u=a.__toPrimitive(u),typeof l=="string"&&typeof u=="string")switch(f){case 0:return l<u;case 1:return l<=u;case 2:return l>u;case 3:return l>=u}if(a.__isBigInt(l)&&typeof u=="string")return u=a.__fromString(u),u!==null&&a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(typeof l=="string"&&a.__isBigInt(u))return l=a.__fromString(l),l!==null&&a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(l=a.__toNumeric(l),u=a.__toNumeric(u),a.__isBigInt(l)){if(a.__isBigInt(u))return a.__comparisonResultToBool(a.__compareToBigInt(l,u),f);if(typeof u!="number")throw new Error("implementation bug");return a.__comparisonResultToBool(a.__compareToNumber(l,u),f)}if(typeof l!="number")throw new Error("implementation bug");if(a.__isBigInt(u))return a.__comparisonResultToBool(a.__compareToNumber(u,l),2^f);if(typeof u!="number")throw new Error("implementation bug");return f===0?l<u:f===1?l<=u:f===2?l>u:f===3?l>=u:void 0}__clzmsd(){return a.__clz30(this.__digit(this.length-1))}static __absoluteAdd(l,u,f){if(l.length<u.length)return a.__absoluteAdd(u,l,f);if(l.length===0)return l;if(u.length===0)return l.sign===f?l:a.unaryMinus(l);let d=l.length;(l.__clzmsd()===0||u.length===l.length&&u.__clzmsd()===0)&&d++;const h=new a(d,f);let g=0,p=0;for(;p<u.length;p++){const m=l.__digit(p)+u.__digit(p)+g;g=m>>>30,h.__setDigit(p,1073741823&m)}for(;p<l.length;p++){const m=l.__digit(p)+g;g=m>>>30,h.__setDigit(p,1073741823&m)}return p<h.length&&h.__setDigit(p,g),h.__trim()}static __absoluteSub(l,u,f){if(l.length===0)return l;if(u.length===0)return l.sign===f?l:a.unaryMinus(l);const d=new a(l.length,f);let h=0,g=0;for(;g<u.length;g++){const p=l.__digit(g)-u.__digit(g)-h;h=1&p>>>30,d.__setDigit(g,1073741823&p)}for(;g<l.length;g++){const p=l.__digit(g)-h;h=1&p>>>30,d.__setDigit(g,1073741823&p)}return d.__trim()}static __absoluteAddOne(l,u,f=null){const d=l.length;f===null?f=new a(d,u):f.sign=u;let h=1;for(let g=0;g<d;g++){const p=l.__digit(g)+h;h=p>>>30,f.__setDigit(g,1073741823&p)}return h!=0&&f.__setDigitGrow(d,1),f}static __absoluteSubOne(l,u){const f=l.length;u=u||f;const d=new a(u,!1);let h=1;for(let g=0;g<f;g++){const p=l.__digit(g)-h;h=1&p>>>30,d.__setDigit(g,1073741823&p)}if(h!=0)throw new Error("implementation bug");for(let g=f;g<u;g++)d.__setDigit(g,0);return d}static __absoluteAnd(l,u,f=null){let d=l.length,h=u.length,g=h;if(d<h){g=d;const y=l,v=d;l=u,d=h,u=y,h=v}let p=g;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)&u.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteAndNot(l,u,f=null){const d=l.length,h=u.length;let g=h;d<h&&(g=d);let p=d;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)&~u.__digit(m));for(;m<d;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteOr(l,u,f=null){let d=l.length,h=u.length,g=h;if(d<h){g=d;const y=l,v=d;l=u,d=h,u=y,h=v}let p=d;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)|u.__digit(m));for(;m<d;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteXor(l,u,f=null){let d=l.length,h=u.length,g=h;if(d<h){g=d;const y=l,v=d;l=u,d=h,u=y,h=v}let p=d;f===null?f=new a(p,!1):p=f.length;let m=0;for(;m<g;m++)f.__setDigit(m,l.__digit(m)^u.__digit(m));for(;m<d;m++)f.__setDigit(m,l.__digit(m));for(;m<p;m++)f.__setDigit(m,0);return f}static __absoluteCompare(l,u){const f=l.length-u.length;if(f!=0)return f;let d=l.length-1;for(;0<=d&&l.__digit(d)===u.__digit(d);)d--;return 0>d?0:l.__unsignedDigit(d)>u.__unsignedDigit(d)?1:-1}static __multiplyAccumulate(l,u,f,d){if(u===0)return;const h=32767&u,g=u>>>15;let p=0,m=0;for(let y,v=0;v<l.length;v++,d++){y=f.__digit(d);const w=l.__digit(v),_=32767&w,x=w>>>15,E=a.__imul(_,h),S=a.__imul(_,g),T=a.__imul(x,h),C=a.__imul(x,g);y+=m+E+p,p=y>>>30,y&=1073741823,y+=((32767&S)<<15)+((32767&T)<<15),p+=y>>>30,m=C+(S>>>15)+(T>>>15),f.__setDigit(d,1073741823&y)}for(;p!=0||m!==0;d++){let y=f.__digit(d);y+=p+m,m=0,p=y>>>30,f.__setDigit(d,1073741823&y)}}static __internalMultiplyAdd(l,u,f,d,h){let g=f,p=0;for(let m=0;m<d;m++){const y=l.__digit(m),v=a.__imul(32767&y,u),w=a.__imul(y>>>15,u),_=v+((32767&w)<<15)+p+g;g=_>>>30,p=w>>>15,h.__setDigit(m,1073741823&_)}if(h.length>d)for(h.__setDigit(d++,g+p);d<h.length;)h.__setDigit(d++,0);else if(g+p!==0)throw new Error("implementation bug")}__inplaceMultiplyAdd(l,u,f){f>this.length&&(f=this.length);const d=32767&l,h=l>>>15;let g=0,p=u;for(let m=0;m<f;m++){const y=this.__digit(m),v=32767&y,w=y>>>15,_=a.__imul(v,d),x=a.__imul(v,h),E=a.__imul(w,d),S=a.__imul(w,h);let T=p+_+g;g=T>>>30,T&=1073741823,T+=((32767&x)<<15)+((32767&E)<<15),g+=T>>>30,p=S+(x>>>15)+(E>>>15),this.__setDigit(m,1073741823&T)}if(g!=0||p!==0)throw new Error("implementation bug")}static __absoluteDivSmall(l,u,f=null){f===null&&(f=new a(l.length,!1));let d=0;for(let h,g=2*l.length-1;0<=g;g-=2){h=(d<<15|l.__halfDigit(g))>>>0;const p=0|h/u;d=0|h%u,h=(d<<15|l.__halfDigit(g-1))>>>0;const m=0|h/u;d=0|h%u,f.__setDigit(g>>>1,p<<15|m)}return f}static __absoluteModSmall(l,u){let f=0;for(let d=2*l.length-1;0<=d;d--)f=0|((f<<15|l.__halfDigit(d))>>>0)%u;return f}static __absoluteDivLarge(l,u,f,d){const h=u.__halfDigitLength(),g=u.length,p=l.__halfDigitLength()-h;let m=null;f&&(m=new a(p+2>>>1,!1),m.__initializeDigits());const y=new a(h+2>>>1,!1);y.__initializeDigits();const v=a.__clz15(u.__halfDigit(h-1));0<v&&(u=a.__specialLeftShift(u,v,0));const w=a.__specialLeftShift(l,v,1),_=u.__halfDigit(h-1);let x=0;for(let E,S=p;0<=S;S--){E=32767;const T=w.__halfDigit(S+h);if(T!==_){const P=(T<<15|w.__halfDigit(S+h-1))>>>0;E=0|P/_;let V=0|P%_;const L=u.__halfDigit(h-2),D=w.__halfDigit(S+h-2);for(;a.__imul(E,L)>>>0>(V<<16|D)>>>0&&(E--,V+=_,!(32767<V)););}a.__internalMultiplyAdd(u,E,0,g,y);let C=w.__inplaceSub(y,S,h+1);C!==0&&(C=w.__inplaceAdd(u,S,h),w.__setHalfDigit(S+h,32767&w.__halfDigit(S+h)+C),E--),f&&(1&S?x=E<<15:m.__setDigit(S>>>1,x|E))}if(d)return w.__inplaceRightShift(v),f?{quotient:m,remainder:w}:w;if(f)return m;throw new Error("unreachable")}static __clz15(l){return a.__clz30(l)-15}__inplaceAdd(l,u,f){let d=0;for(let h=0;h<f;h++){const g=this.__halfDigit(u+h)+l.__halfDigit(h)+d;d=g>>>15,this.__setHalfDigit(u+h,32767&g)}return d}__inplaceSub(l,u,f){let d=0;if(1&u){u>>=1;let h=this.__digit(u),g=32767&h,p=0;for(;p<f-1>>>1;p++){const v=l.__digit(p),w=(h>>>15)-(32767&v)-d;d=1&w>>>15,this.__setDigit(u+p,(32767&w)<<15|32767&g),h=this.__digit(u+p+1),g=(32767&h)-(v>>>15)-d,d=1&g>>>15}const m=l.__digit(p),y=(h>>>15)-(32767&m)-d;if(d=1&y>>>15,this.__setDigit(u+p,(32767&y)<<15|32767&g),u+p+1>=this.length)throw new RangeError("out of bounds");(1&f)==0&&(h=this.__digit(u+p+1),g=(32767&h)-(m>>>15)-d,d=1&g>>>15,this.__setDigit(u+l.length,1073709056&h|32767&g))}else{u>>=1;let h=0;for(;h<l.length-1;h++){const v=this.__digit(u+h),w=l.__digit(h),_=(32767&v)-(32767&w)-d;d=1&_>>>15;const x=(v>>>15)-(w>>>15)-d;d=1&x>>>15,this.__setDigit(u+h,(32767&x)<<15|32767&_)}const g=this.__digit(u+h),p=l.__digit(h),m=(32767&g)-(32767&p)-d;d=1&m>>>15;let y=0;(1&f)==0&&(y=(g>>>15)-(p>>>15)-d,d=1&y>>>15),this.__setDigit(u+h,(32767&y)<<15|32767&m)}return d}__inplaceRightShift(l){if(l===0)return;let u=this.__digit(0)>>>l;const f=this.length-1;for(let d=0;d<f;d++){const h=this.__digit(d+1);this.__setDigit(d,1073741823&h<<30-l|u),u=h>>>l}this.__setDigit(f,u)}static __specialLeftShift(l,u,f){const d=l.length,h=new a(d+f,!1);if(u===0){for(let p=0;p<d;p++)h.__setDigit(p,l.__digit(p));return 0<f&&h.__setDigit(d,0),h}let g=0;for(let p=0;p<d;p++){const m=l.__digit(p);h.__setDigit(p,1073741823&m<<u|g),g=m>>>30-u}return 0<f&&h.__setDigit(d,g),h}static __leftShiftByAbsolute(l,u){const f=a.__toShiftAmount(u);if(0>f)throw new RangeError("BigInt too big");const d=0|f/30,h=f%30,g=l.length,p=h!==0&&l.__digit(g-1)>>>30-h!=0,m=g+d+(p?1:0),y=new a(m,l.sign);if(h===0){let v=0;for(;v<d;v++)y.__setDigit(v,0);for(;v<m;v++)y.__setDigit(v,l.__digit(v-d))}else{let v=0;for(let w=0;w<d;w++)y.__setDigit(w,0);for(let w=0;w<g;w++){const _=l.__digit(w);y.__setDigit(w+d,1073741823&_<<h|v),v=_>>>30-h}if(p)y.__setDigit(g+d,v);else if(v!==0)throw new Error("implementation bug")}return y.__trim()}static __rightShiftByAbsolute(l,u){const f=l.length,d=l.sign,h=a.__toShiftAmount(u);if(0>h)return a.__rightShiftByMaximum(d);const g=0|h/30,p=h%30;let m=f-g;if(0>=m)return a.__rightShiftByMaximum(d);let y=!1;if(d){if((l.__digit(g)&(1<<p)-1)!=0)y=!0;else for(let w=0;w<g;w++)if(l.__digit(w)!==0){y=!0;break}}y&&p===0&&~l.__digit(f-1)==0&&m++;let v=new a(m,d);if(p===0){v.__setDigit(m-1,0);for(let w=g;w<f;w++)v.__setDigit(w-g,l.__digit(w))}else{let w=l.__digit(g)>>>p;const _=f-g-1;for(let x=0;x<_;x++){const E=l.__digit(x+g+1);v.__setDigit(x,1073741823&E<<30-p|w),w=E>>>p}v.__setDigit(_,w)}return y&&(v=a.__absoluteAddOne(v,!0,v)),v.__trim()}static __rightShiftByMaximum(l){return l?a.__oneDigit(1,!0):a.__zero()}static __toShiftAmount(l){if(1<l.length)return-1;const u=l.__unsignedDigit(0);return u>a.__kMaxLengthBits?-1:u}static __toPrimitive(l,u="default"){if(typeof l!="object"||l.constructor===a)return l;if(typeof Symbol<"u"&&typeof Symbol.toPrimitive=="symbol"){const h=l[Symbol.toPrimitive];if(h){const g=h(u);if(typeof g!="object")return g;throw new TypeError("Cannot convert object to primitive value")}}const f=l.valueOf;if(f){const h=f.call(l);if(typeof h!="object")return h}const d=l.toString;if(d){const h=d.call(l);if(typeof h!="object")return h}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(l){return a.__isBigInt(l)?l:+l}static __isBigInt(l){return typeof l=="object"&&l!==null&&l.constructor===a}static __truncateToNBits(l,u){const f=0|(l+29)/30,d=new a(f,u.sign),h=f-1;for(let p=0;p<h;p++)d.__setDigit(p,u.__digit(p));let g=u.__digit(h);if(l%30!=0){const p=32-l%30;g=g<<p>>>p}return d.__setDigit(h,g),d.__trim()}static __truncateAndSubFromPowerOfTwo(l,u,f){var d=Math.min;const h=0|(l+29)/30,g=new a(h,f);let p=0;const m=h-1;let y=0;for(const x=d(m,u.length);p<x;p++){const E=0-u.__digit(p)-y;y=1&E>>>30,g.__setDigit(p,1073741823&E)}for(;p<m;p++)g.__setDigit(p,0|1073741823&-y);let v=m<u.length?u.__digit(m):0;const w=l%30;let _;if(w==0)_=0-v-y,_&=1073741823;else{const x=32-w;v=v<<x>>>x;const E=1<<32-x;_=E-v-y,_&=E-1}return g.__setDigit(m,_),g.__trim()}__digit(l){return this[l]}__unsignedDigit(l){return this[l]>>>0}__setDigit(l,u){this[l]=0|u}__setDigitGrow(l,u){this[l]=0|u}__halfDigitLength(){const l=this.length;return 32767>=this.__unsignedDigit(l-1)?2*l-1:2*l}__halfDigit(l){return 32767&this[l>>>1]>>>15*(1&l)}__setHalfDigit(l,u){const f=l>>>1,d=this.__digit(f),h=1&l?32767&d|u<<15:1073709056&d|32767&u;this.__setDigit(f,h)}static __digitPow(l,u){let f=1;for(;0<u;)1&u&&(f*=l),u>>>=1,l*=l;return f}static __isOneDigitInt(l){return(1073741823&l)===l}}return a.__kMaxLength=33554432,a.__kMaxLengthBits=a.__kMaxLength<<5,a.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],a.__kBitsPerCharTableShift=5,a.__kBitsPerCharTableMultiplier=1<<a.__kBitsPerCharTableShift,a.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],a.__kBitConversionBuffer=new ArrayBuffer(8),a.__kBitConversionDouble=new Float64Array(a.__kBitConversionBuffer),a.__kBitConversionInts=new Int32Array(a.__kBitConversionBuffer),a.__clz30=n?function(c){return n(c)-2}:function(c){var l=Math.LN2,u=Math.log;return c===0?30:0|29-(0|u(c>>>0)/l)},a.__imul=t||function(c,l){return 0|c*l},a})}(Tv)),Tv.exports}var gD;function Cye(){if(gD)return Ud;gD=1;var r=Ud&&Ud.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ud,"__esModule",{value:!0});const e=bd(),t=r(Eye()),n=r(Iye()),i=18446744073709552e3,s=(a,c)=>n.default.bitwiseXor(n.default.asUintN(64,n.default.leftShift(a,n.default.BigInt(c))),n.default.BigInt(n.default.asUintN(64,n.default.signedRightShift(a,n.default.subtract(n.default.BigInt(64),n.default.BigInt(c))))));class o{constructor(c){this.next=()=>new t.default(this.roll().toString()),this.nextDouble=()=>new t.default(this.roll().toString()).div(i+1),this.nextInt=(u,f)=>Math.floor(this.nextDouble().toNumber()*(f-u+1)+u),this.nextByte=()=>this.nextInt(0,255),this.nextData=u=>[...new Array(u)].map(()=>this.nextByte());const l=e.sha256Hash(c);this.s=[n.default.BigInt(0),n.default.BigInt(0),n.default.BigInt(0),n.default.BigInt(0)],this.setS(l)}setS(c){for(let l=0;l<4;l++){let u=l*8,f=n.default.BigInt(0);for(let d=0;d<8;d++)f=n.default.asUintN(64,n.default.leftShift(f,n.default.BigInt(8))),f=n.default.asUintN(64,n.default.bitwiseOr(f,n.default.BigInt(c[u+d])));this.s[l]=n.default.asUintN(64,f)}}roll(){const c=n.default.asUintN(64,n.default.multiply(s(n.default.asUintN(64,n.default.multiply(this.s[1],n.default.BigInt(5))),7),n.default.BigInt(9))),l=n.default.asUintN(64,n.default.leftShift(this.s[1],n.default.BigInt(17)));return this.s[2]=n.default.asUintN(64,n.default.bitwiseXor(this.s[2],n.default.BigInt(this.s[0]))),this.s[3]=n.default.asUintN(64,n.default.bitwiseXor(this.s[3],n.default.BigInt(this.s[1]))),this.s[1]=n.default.asUintN(64,n.default.bitwiseXor(this.s[1],n.default.BigInt(this.s[2]))),this.s[0]=n.default.asUintN(64,n.default.bitwiseXor(this.s[0],n.default.BigInt(this.s[3]))),this.s[2]=n.default.asUintN(64,n.default.bitwiseXor(this.s[2],n.default.BigInt(l))),this.s[3]=n.default.asUintN(64,s(this.s[3],45)),c}}return Ud.default=o,Ud}var Tye=function(r,e){var t=r.reduce(function(u,f){if(f<0)throw new Error("Probability must be a positive: p["+r.indexOf(f)+"]="+f);return u+f},0);if(t===0)throw new Error("Probability sum must be greater than zero.");for(var n=r.map(function(u){return u*e/t}),i={prob:new Array(e),alias:new Array(e)},s=[],o=[],a=e-1;a>=0;a--)n[a]<1?s.push(a):o.push(a);for(;s.length>0&&o.length>0;){var c=s.pop(),l=o.pop();i.prob[c]=n[c],i.alias[c]=l,n[l]=n[l]+n[c]-1,n[l]<1?s.push(l):o.push(l)}for(;o.length>0;)i.prob[o.pop()]=1;for(;s.length>0;)i.prob[s.pop()]=1;return i},mD=function(r,e,t){var n=Math.floor(t()*r.prob.length);return e[t()<r.prob[n]?n:r.alias[n]]},Rye=function(r,e,t,n){if(n===void 0&&(n=1),n===1)return mD(r,e,t);for(var i=[],s=0;s<n;s++)i.push(mD(r,e,t));return i},kye=function(r,e,t){if(t===void 0&&(t=Math.random),!Array.isArray(r))throw new Error("Probabilities must be an array.");if(r.length===0)throw new Error("Probabilities array must not be empty.");var n=r.length,i=e??Array.from({length:n},function(o,a){return a}),s=Tye(r,n);return{next:function(o){return o===void 0&&(o=1),Rye(s,i,t,o)}}};const Oye=Object.freeze(Object.defineProperty({__proto__:null,default:kye},Symbol.toStringTag,{value:"Module"})),Pye=gp(Oye);var yD;function mW(){return yD||(yD=1,function(r){var e=s0&&s0.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(r,"__esModule",{value:!0}),r.chooseFragments=r.shuffle=r.chooseDegree=void 0;const t=bd(),n=e(Cye()),i=e(Pye),s=(c,l)=>{const u=[...new Array(c)].map((d,h)=>1/(h+1));return i.default(u,void 0,l.nextDouble).next()+1};r.chooseDegree=s;const o=(c,l)=>{let u=[...c],f=[];for(;u.length>0;){let d=l.nextInt(0,u.length-1),h=u[d];u.splice(d,1),f.push(h)}return f};r.shuffle=o;const a=(c,l,u)=>{if(c<=l)return[c-1];{const f=Ze.concat([t.intToBytes(c),t.intToBytes(u)]),d=new n.default(f),h=r.chooseDegree(l,d),g=[...new Array(l)].map((m,y)=>y);return r.shuffle(g,d).slice(0,h)}};r.chooseFragments=a}(s0)),s0}var vD;function yW(){if(vD)return Kl;vD=1;var r=Kl&&Kl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.FountainEncoderPart=void 0;const e=r(Gg()),t=bd(),n=mW(),i=cW();class s{constructor(c,l,u,f,d){this._seqNum=c,this._seqLength=l,this._messageLength=u,this._checksum=f,this._fragment=d}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const c=i.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return Ze.from(c)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(c){const[l,u,f,d,h]=i.cborDecode(c);return e.default(typeof l=="number"),e.default(typeof u=="number"),e.default(typeof f=="number"),e.default(typeof d=="number"),e.default(Ze.isBuffer(h)&&h.length>0),new s(l,u,f,d,Ze.from(h))}}Kl.FountainEncoderPart=s;class o{constructor(c,l=100,u=0,f=10){const d=o.findNominalFragmentLength(c.length,f,l);this._messageLength=c.length,this._fragments=o.partitionMessage(c,d),this.fragmentLength=d,this.seqNum=t.toUint32(u),this.checksum=t.getCRC(c)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return this._fragments.length===1}seqLength(){return this._fragments.length}mix(c){return c.reduce((l,u)=>t.bufferXOR(this._fragments[u],l),Ze.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=t.toUint32(this.seqNum+1);const c=n.chooseFragments(this.seqNum,this._fragments.length,this.checksum),l=this.mix(c);return new s(this.seqNum,this._fragments.length,this._messageLength,this.checksum,l)}static findNominalFragmentLength(c,l,u){e.default(c>0),e.default(l>0),e.default(u>=l);const f=Math.ceil(c/l);let d=0;for(let h=1;h<=f&&(d=Math.ceil(c/h),!(d<=u));h++);return d}static partitionMessage(c,l){let u=Ze.from(c),f,d=[];for(;u.length>0;)[f,u]=t.split(u,-l),f=Ze.alloc(l,0).fill(f,0,f.length),d.push(f);return d}}return Kl.default=o,Kl}var zd={},bD;function vW(){if(bD)return zd;bD=1;var r=zd&&zd.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(zd,"__esModule",{value:!0});const e=r(Gg()),t=bd(),n="ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom";let i=[];const s=256,o=4,a=2;var c;(function(v){v.STANDARD="standard",v.URI="uri",v.MINIMAL="minimal"})(c||(c={}));const l=v=>n.slice(v*o,v*o+o),u=v=>{const w=l(v);return`${w[0]}${w[o-1]}`},f=v=>{const w=t.getCRCHex(Ze.from(v,"hex"));return`${v}${w}`},d=(v,w)=>{const _=f(v);return Ze.from(_,"hex").reduce((S,T)=>[...S,l(T)],[]).join(w)},h=v=>{const w=f(v);return Ze.from(w,"hex").reduce((E,S)=>E+u(S),"")},g=(v,w)=>{e.default(v.length===w,"Invalid Bytewords: word.length does not match wordLength provided");const _=26;if(i.length===0){const C=_*_;i=[...new Array(C)].map(()=>-1);for(let P=0;P<s;P++){const V=l(P);let L=V[0].charCodeAt(0)-97,b=(V[3].charCodeAt(0)-97)*_+L;i[b]=P}}let x=v[0].toLowerCase().charCodeAt(0)-97,E=v[w==4?3:1].toLowerCase().charCodeAt(0)-97;e.default(0<=x&&x<_&&0<=E&&E<_,"Invalid Bytewords: invalid word");let S=E*_+x,T=i[S];if(e.default(T!==-1,"Invalid Bytewords: value not in lookup table"),w==o){const C=l(T);let P=v[1].toLowerCase(),V=v[2].toLowerCase();e.default(P===C[1]&&V===C[2],"Invalid Bytewords: invalid middle letters of word")}return Ze.from([T]).toString("hex")},p=(v,w,_)=>{const E=(_==o?v.split(w):t.partition(v,2)).map(P=>g(P,_)).join("");e.default(E.length>=5,"Invalid Bytewords: invalid decoded string length");const[S,T]=t.split(Ze.from(E,"hex"),4),C=t.getCRCHex(S);return e.default(C===T.toString("hex"),"Invalid Checksum"),S.toString("hex")},m=(v,w=c.MINIMAL)=>{switch(w){case c.STANDARD:return p(v," ",o);case c.URI:return p(v,"-",o);case c.MINIMAL:return p(v,"",a);default:throw new Error(`Invalid style ${w}`)}},y=(v,w=c.MINIMAL)=>{switch(w){case c.STANDARD:return d(v," ");case c.URI:return d(v,"-");case c.MINIMAL:return h(v);default:throw new Error(`Invalid style ${w}`)}};return zd.default={decode:m,encode:y,STYLES:c},zd}var wD;function $ye(){if(wD)return Fd;wD=1;var r=Fd&&Fd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Fd,"__esModule",{value:!0});const e=r(yW()),t=r(vW());class n{constructor(s,o,a,c){this.ur=s,this.fountainEncoder=new e.default(s.cbor,o,a,c)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map(()=>this.nextPart())}nextPart(){const s=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?n.encodeSinglePart(this.ur):n.encodePart(this.ur.type,s)}static encodeUri(s,o){const a=o.join("/");return[s,a].join(":")}static encodeUR(s){return n.encodeUri("ur",s)}static encodePart(s,o){const a=`${o.seqNum}-${o.seqLength}`,c=t.default.encode(o.cbor().toString("hex"),t.default.STYLES.MINIMAL);return n.encodeUR([s,a,c])}static encodeSinglePart(s){const o=t.default.encode(s.cbor.toString("hex"),t.default.STYLES.MINIMAL);return n.encodeUR([s.type,o])}}return Fd.default=n,Fd}var qd={},jd={},xD;function Dye(){if(xD)return jd;xD=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.FountainDecoderPart=void 0;const r=bd(),e=mW(),t=M4();class n{constructor(o,a){this._indexes=o,this._fragment=a}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(o){const a=e.chooseFragments(o.seqNum,o.seqLength,o.checksum),c=o.fragment;return new n(a,c)}isSimple(){return this.indexes.length===1}}jd.FountainDecoderPart=n;class i{constructor(){this.result=void 0,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(o){if(this.expectedPartIndexes.length===0)[...new Array(o.seqLength)].forEach((a,c)=>this.expectedPartIndexes.push(c)),this.expectedMessageLength=o.messageLength,this.expectedChecksum=o.checksum,this.expectedFragmentLength=o.fragment.length;else if(this.expectedPartIndexes.length!==o.seqLength||this.expectedMessageLength!==o.messageLength||this.expectedChecksum!==o.checksum||this.expectedFragmentLength!==o.fragment.length)return!1;return!0}reducePartByPart(o,a){if(r.arrayContains(o.indexes,a.indexes)){const c=r.setDifference(o.indexes,a.indexes),l=r.bufferXOR(o.fragment,a.fragment);return new n(c,l)}else return o}reduceMixedBy(o){const a=[];this.mixedParts.map(({value:c})=>this.reducePartByPart(c,o)).forEach(c=>{c.isSimple()?this.queuedParts.push(c):a.push({key:c.indexes,value:c})}),this.mixedParts=a}processSimplePart(o){const a=o.indexes[0];if(!this.receivedPartIndexes.includes(a))if(this.simpleParts.push({key:o.indexes,value:o}),this.receivedPartIndexes.push(a),r.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const c=this.simpleParts.map(({value:f})=>f).sort((f,d)=>f.indexes[0]-d.indexes[0]),l=i.joinFragments(c.map(f=>f.fragment),this.expectedMessageLength);r.getCRC(l)===this.expectedChecksum?this.result=l:this.error=new t.InvalidChecksumError}else this.reduceMixedBy(o)}processMixedPart(o){if(this.mixedParts.some(({key:c})=>r.arraysEqual(c,o.indexes)))return;let a=this.simpleParts.reduce((c,{value:l})=>this.reducePartByPart(c,l),o);a=this.mixedParts.reduce((c,{value:l})=>this.reducePartByPart(c,l),a),a.isSimple()?this.queuedParts.push(a):(this.reduceMixedBy(a),this.mixedParts.push({key:a.indexes,value:a}))}processQueuedItem(){if(this.queuedParts.length===0)return;const o=this.queuedParts.shift();o.isSimple()?this.processSimplePart(o):this.processMixedPart(o)}receivePart(o){if(this.isComplete()||!this.validatePart(o))return!1;const a=n.fromEncoderPart(o);for(this.lastPartIndexes=a.indexes,this.queuedParts.push(a);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return this.result!==void 0&&this.result.length>0}isSuccess(){return!!(this.error===void 0&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:Ze.from([])}isFailure(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const o=this.expectedPartCount();return o===0?0:Math.min(.99,this.processedPartsCount/(o*1.75))}getProgress(){if(this.isComplete())return 1;const o=this.expectedPartCount();return o===0?0:this.receivedPartIndexes.length/o}}return jd.default=i,i.joinFragments=(s,o)=>Ze.concat(s).slice(0,o),jd}var _D;function Mye(){if(_D)return qd;_D=1;var r=qd&&qd.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(qd,"__esModule",{value:!0});const e=r(Dye()),t=r(vW()),n=r(Gg()),i=bd(),s=M4(),o=r(lW()),a=yW();class c{constructor(u=new e.default,f="bytes"){this.fountainDecoder=u,this.type=f,n.default(i.isURType(f),"Invalid UR type"),this.expected_type=""}static decodeBody(u,f){const d=t.default.decode(f,t.default.STYLES.MINIMAL);return new o.default(Ze.from(d,"hex"),u)}validatePart(u){return this.expected_type?this.expected_type===u:i.isURType(u)?(this.expected_type=u,!0):!1}static decode(u){const[f,d]=this.parse(u);if(d.length===0)throw new s.InvalidPathLengthError;const h=d[0];return c.decodeBody(f,h)}static parse(u){const f=u.toLowerCase();if(f.slice(0,3)!=="ur:")throw new s.InvalidSchemeError;const h=f.slice(3).split("/"),g=h[0];if(h.length<2)throw new s.InvalidPathLengthError;if(!i.isURType(g))throw new s.InvalidTypeError;return[g,h.slice(1)]}static parseSequenceComponent(u){const f=u.split("-");if(f.length!==2)throw new s.InvalidSequenceComponentError;const d=i.toUint32(Number(f[0])),h=Number(f[1]);if(d<1||h<1)throw new s.InvalidSequenceComponentError;return[d,h]}receivePart(u){if(this.result!==void 0)return!1;const[f,d]=c.parse(u);if(!this.validatePart(f))return!1;if(d.length===1)return this.result=c.decodeBody(f,d[0]),!0;if(d.length!==2)throw new s.InvalidPathLengthError;const[h,g]=d,[p,m]=c.parseSequenceComponent(h),y=t.default.decode(g,t.default.STYLES.MINIMAL),v=a.FountainEncoderPart.fromCBOR(y);return p!==v.seqNum||m!==v.seqLength||!this.fountainDecoder.receivePart(v)?!1:(this.fountainDecoder.isSuccess()?this.result=new o.default(this.fountainDecoder.resultMessage(),f):this.fountainDecoder.isFailure()&&(this.error=new s.InvalidSchemeError),!0)}resultUR(){return this.result?this.result:new o.default(Ze.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==void 0}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}return qd.default=c,qd}var SD;function N4(){if(SD)return da;SD=1;var r=da&&da.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(da,"__esModule",{value:!0}),da.URDecoder=da.UREncoder=da.UR=void 0;const e=r(lW());da.UR=e.default;const t=r($ye());da.UREncoder=t.default;const n=r(Mye());return da.URDecoder=n.default,da}var ED;function Ls(){if(ED)return i0;ED=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.RegistryItem=void 0;const r=N4(),e=Ji();let t=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===void 0)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,e.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(i,s,o)=>{const a=this.toUR();return new r.UREncoder(a,i,s,o)}}};return i0.RegistryItem=t,i0}var AD;function yC(){return AD||(AD=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoCoinInfo=r.Network=r.Type=void 0;const e=Ji(),t=Ls(),n=Xi();var i;(function(c){c.type="1",c.network="2"})(i||(i={}));var s;(function(c){c[c.bitcoin=0]="bitcoin"})(s=r.Type||(r.Type={}));var o;(function(c){c[c.mainnet=0]="mainnet",c[c.testnet=1]="testnet"})(o=r.Network||(r.Network={}));class a extends t.RegistryItem{constructor(l,u){super(),this.type=l,this.network=u,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||s.bitcoin,this.getNetwork=()=>this.network||o.mainnet,this.toDataItem=()=>{const f={};return this.type&&(f[i.type]=this.type),this.network&&(f[i.network]=this.network),new e.DataItem(f)}}}r.CryptoCoinInfo=a,a.fromDataItem=c=>{const l=c.getData(),u=l[i.type],f=l[i.network];return new a(u,f)},a.fromCBOR=c=>{const l=(0,e.decodeToDataItem)(c);return a.fromDataItem(l)}}(XS)),XS}var o0={},a0={},ID;function vC(){if(ID)return a0;ID=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.PathComponent=void 0;let r=class bW{constructor(t){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=t.index,this.hardened=t.hardened,this.index!==void 0?this.wildcard=!1:this.wildcard=!0,this.index&&(this.index&bW.HARDENED_BIT)!==0)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}};return a0.PathComponent=r,r.HARDENED_BIT=2147483648,a0}var CD;function _b(){if(CD)return o0;CD=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.CryptoKeypath=void 0;const r=Ji(),e=vC(),t=Ls(),n=Xi();var i;(function(o){o[o.components=1]="components",o[o.source_fingerprint=2]="source_fingerprint",o[o.depth=3]="depth"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a=[],c,l){super(),this.components=a,this.sourceFingerprint=c,this.depth=l,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>this.components.length===0?void 0:this.components.map(f=>`${f.isWildcard()?"*":f.getIndex()}${f.isHardened()?"'":""}`).join("/"),this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const u={},f=[];return this.components&&this.components.forEach(d=>{d.isWildcard()?f.push([]):f.push(d.getIndex()),f.push(d.isHardened())}),u[i.components]=f,this.sourceFingerprint&&(u[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==void 0&&(u[i.depth]=this.depth),new r.DataItem(u)}}};return o0.CryptoKeypath=s,s.fromDataItem=o=>{const a=o.getData(),c=[],l=a[i.components];if(l)for(let h=0;h<l.length;h+=2){const g=l[h+1],p=l[h];typeof p=="number"?c.push(new e.PathComponent({index:p,hardened:g})):c.push(new e.PathComponent({hardened:g}))}const u=a[i.source_fingerprint];let f;u&&(f=Ze.alloc(4),f.writeUInt32BE(u,0));const d=a[i.depth];return new s(c,f,d)},s.fromCBOR=o=>{const a=(0,r.decodeToDataItem)(o);return s.fromDataItem(a)},o0}var TD;function Yg(){if(TD)return n0;TD=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.CryptoHDKey=void 0;const r=eye(),e=yC(),t=_b(),n=Ji(),i=Ls(),s=Xi();var o;(function(c){c[c.is_master=1]="is_master",c[c.is_private=2]="is_private",c[c.key_data=3]="key_data",c[c.chain_code=4]="chain_code",c[c.use_info=5]="use_info",c[c.origin=6]="origin",c[c.children=7]="children",c[c.parent_fingerprint=8]="parent_fingerprint",c[c.name=9]="name",c[c.note=10]="note"})(o||(o={}));let a=class extends i.RegistryItem{constructor(l){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var u,f,d;let h,g,p=0,m=Ze.alloc(4).fill(0);if(this.isMaster())h=Ze.from("0488ADE4","hex"),g=0,p=0;else{g=((u=this.getOrigin())===null||u===void 0?void 0:u.getComponents().length)||((f=this.getOrigin())===null||f===void 0?void 0:f.getDepth());const x=(d=this.getOrigin())===null||d===void 0?void 0:d.getComponents(),E=x[x.length-1];E&&(p=E.isHardened()?E.getIndex()+2147483648:E.getIndex(),this.getParentFingerprint()&&(m=this.getParentFingerprint())),this.isPrivateKey()?h=Ze.from("0488ADE4","hex"):h=Ze.from("0488B21E","hex")}const y=Ze.alloc(1);y.writeUInt8(g,0);const v=Ze.alloc(4);v.writeUInt32BE(p,0);const w=this.getChainCode(),_=this.getKey();return(0,r.encode)(Ze.concat([h,y,m,v,w,_]))},this.getRegistryType=()=>s.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var u,f,d,h,g,p,m;let y="";return this.getOrigin()&&!((u=this.getOrigin())===null||u===void 0)&&u.getSourceFingerprint()&&!((f=this.getOrigin())===null||f===void 0)&&f.getPath()&&(y+=`${(h=(d=this.getOrigin())===null||d===void 0?void 0:d.getSourceFingerprint())===null||h===void 0?void 0:h.toString("hex")}/${(g=this.getOrigin())===null||g===void 0?void 0:g.getPath()}`),y+=this.getBip32Key(),this.getChildren()&&!((p=this.getChildren())===null||p===void 0)&&p.getPath()&&(y+=`/${(m=this.getChildren())===null||m===void 0?void 0:m.getPath()}`),y},this.setupMasterKey=u=>{this.master=!0,this.key=u.key,this.chainCode=u.chainCode},this.setupDeriveKey=u=>{this.master=!1,this.privateKey=u.isPrivateKey,this.key=u.key,this.chainCode=u.chainCode,this.useInfo=u.useInfo,this.origin=u.origin,this.children=u.children,this.parentFingerprint=u.parentFingerprint,this.name=u.name,this.note=u.note},this.toDataItem=()=>{const u={};if(this.master)u[o.is_master]=!0,u[o.key_data]=this.key,u[o.chain_code]=this.chainCode;else{if(this.privateKey!==void 0&&(u[o.is_private]=this.privateKey),u[o.key_data]=this.key,this.chainCode&&(u[o.chain_code]=this.chainCode),this.useInfo){const f=this.useInfo.toDataItem();f.setTag(this.useInfo.getRegistryType().getTag()),u[o.use_info]=f}if(this.origin){const f=this.origin.toDataItem();f.setTag(this.origin.getRegistryType().getTag()),u[o.origin]=f}if(this.children){const f=this.children.toDataItem();f.setTag(this.children.getRegistryType().getTag()),u[o.children]=f}this.parentFingerprint&&(u[o.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==void 0&&(u[o.name]=this.name),this.note!==void 0&&(u[o.note]=this.note)}return new n.DataItem(u)},l.isMaster?this.setupMasterKey(l):this.setupDeriveKey(l)}};return n0.CryptoHDKey=a,a.fromDataItem=c=>{const l=c.getData(),u=!!l[o.is_master],f=l[o.is_private],d=l[o.key_data],h=l[o.chain_code],g=l[o.use_info]?e.CryptoCoinInfo.fromDataItem(l[o.use_info]):void 0,p=l[o.origin]?t.CryptoKeypath.fromDataItem(l[o.origin]):void 0,m=l[o.children]?t.CryptoKeypath.fromDataItem(l[o.children]):void 0,y=l[o.parent_fingerprint];let v;y&&(v=Ze.alloc(4),v.writeUInt32BE(y,0));const w=l[o.name],_=l[o.note];return new a({isMaster:u,isPrivateKey:f,key:d,chainCode:h,useInfo:g,origin:p,children:m,parentFingerprint:v,name:w,note:_})},a.fromCBOR=c=>{const l=(0,n.decodeToDataItem)(c);return a.fromDataItem(l)},n0}var c0={},RD;function Sb(){if(RD)return c0;RD=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.CryptoECKey=void 0;const r=Ji(),e=Ls(),t=Xi();var n;(function(s){s[s.curve=1]="curve",s[s.private=2]="private",s[s.data=3]="data"})(n||(n={}));let i=class extends e.RegistryItem{constructor(o){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>t.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const a={};return this.curve&&(a[n.curve]=this.curve),this.privateKey!==void 0&&(a[n.private]=this.privateKey),a[n.data]=this.data,new r.DataItem(a)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=o.data,this.curve=o.curve,this.privateKey=o.privateKey||void 0}};return c0.CryptoECKey=i,i.fromDataItem=s=>{const o=s.getData(),a=o[n.curve],c=o[n.private],l=o[n.data];if(!l)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${s}`);return new i({data:l,curve:a,privateKey:c})},i.fromCBOR=s=>{const o=(0,r.decodeToDataItem)(s);return i.fromDataItem(o)},c0}var l0={},kD;function Bye(){if(kD)return l0;kD=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.Bytes=void 0;const r=Ji(),e=Ls(),t=Xi();let n=class extends e.RegistryItem{constructor(s){super(),this.bytes=s,this.getRegistryType=()=>t.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}};return l0.Bytes=n,n.fromDataItem=i=>{const s=i.getData();if(!s)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${i}`);return new n(s)},n.fromCBOR=i=>{const s=(0,r.decodeToDataItem)(i);return n.fromDataItem(s)},l0}var u0={},f0={},OD;function bC(){if(OD)return f0;OD=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.MultiKey=void 0;const r=Sb(),e=Yg(),t=A4(),n=Ls(),i=Xi();var s;(function(a){a[a.threshold=1]="threshold",a[a.keys=2]="keys"})(s||(s={}));let o=class extends n.RegistryItem{constructor(c,l){super(),this.threshold=c,this.keys=l,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const u={};u[s.threshold]=this.threshold;const f=this.keys.map(d=>{const h=d.toDataItem();return h.setTag(d.getRegistryType().getTag()),h});return u[s.keys]=f,new t.DataItem(u)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map(u=>u.getOutputDescriptorContent()).join(",")].join(",")}};return f0.MultiKey=o,o.fromDataItem=a=>{const c=a.getData(),l=c[s.threshold],u=c[s.keys],f=[];return u.forEach(d=>{d.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?f.push(e.CryptoHDKey.fromDataItem(d)):d.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&f.push(r.CryptoECKey.fromDataItem(d))}),new o(l,f)},f0}var PD;function $D(){if(PD)return u0;PD=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.CryptoOutput=void 0;const r=Sb(),e=Yg(),t=Ji(),n=bC(),i=Ls(),s=Xi(),o=I4();let a=class extends i.RegistryItem{constructor(l,u){super(),this.scriptExpressions=l,this.cryptoKey=u,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>{if(this.cryptoKey instanceof e.CryptoHDKey)return this.cryptoKey},this.getECKey=()=>{if(this.cryptoKey instanceof r.CryptoECKey)return this.cryptoKey},this.getMultiKey=()=>{if(this.cryptoKey instanceof n.MultiKey)return this.cryptoKey},this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=f=>f>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[f].getExpression()}(${this._toOutputDescriptor(f+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let f=this.cryptoKey.toDataItem();return(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof e.CryptoHDKey)&&f.setTag(this.cryptoKey.getRegistryType().getTag()),[...this.scriptExpressions].reverse().forEach(h=>{const g=h.getTag();f.getTag()===void 0?f.setTag(g):f=new t.DataItem(f,g)}),f}}};return u0.CryptoOutput=a,a.fromDataItem=c=>{const l=[];let u=c;for(;;){let h=u.getTag();const g=o.ScriptExpression.fromTag(h);if(g)if(l.push(g),u.getData()instanceof t.DataItem)u=u.getData(),h=u.getTag();else break;else break}const f=l.length;if(f>0&&(l[f-1].getExpression()===o.ScriptExpressions.MULTISIG.getExpression()||l[f-1].getExpression()===o.ScriptExpressions.SORTED_MULTISIG.getExpression())){const h=n.MultiKey.fromDataItem(u);return new a(l,h)}if(u.getTag()===s.RegistryTypes.CRYPTO_HDKEY.getTag()){const h=e.CryptoHDKey.fromDataItem(u);return new a(l,h)}else{const h=r.CryptoECKey.fromDataItem(u);return new a(l,h)}},a.fromCBOR=c=>{const l=(0,t.decodeToDataItem)(c);return a.fromDataItem(l)},u0}var d0={},DD;function MD(){if(DD)return d0;DD=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.CryptoPSBT=void 0;const r=Ji(),e=Ls(),t=Xi();let n=class extends e.RegistryItem{constructor(s){super(),this.psbt=s,this.getRegistryType=()=>t.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}};return d0.CryptoPSBT=n,n.fromDataItem=i=>{const s=i.getData();if(!s)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${i}`);return new n(s)},n.fromCBOR=i=>{const s=(0,r.decodeToDataItem)(i);return n.fromDataItem(s)},d0}var h0={},BD;function ND(){if(BD)return h0;BD=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.CryptoAccount=void 0;const r=lw(),e=Ji(),t=Ls(),n=Xi();var i;(function(o){o[o.masterFingerprint=1]="masterFingerprint",o[o.outputDescriptors=2]="outputDescriptors"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a,c){super(),this.masterFingerprint=a,this.outputDescriptors=c,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const l={};return this.masterFingerprint&&(l[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(l[i.outputDescriptors]=this.outputDescriptors.map(u=>u.toDataItem())),new e.DataItem(l)}}};return h0.CryptoAccount=s,s.fromDataItem=o=>{const a=o.getData(),c=Ze.alloc(4),l=a[i.masterFingerprint];l&&c.writeUInt32BE(l,0);const f=a[i.outputDescriptors].map(d=>r.CryptoOutput.fromDataItem(d));return new s(c,f)},s.fromCBOR=o=>{const a=(0,e.decodeToDataItem)(o);return s.fromDataItem(a)},h0}var p0={},g0={},LD;function wW(){if(LD)return g0;LD=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.UnknownURTypeError=void 0;class r extends Error{constructor(t){super(t)}}return g0.UnknownURTypeError=r,g0}var FD;function UD(){if(FD)return p0;FD=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.URRegistryDecoder=void 0;const r=N4(),e=lw(),t=Xi(),n=wW();class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const o=this.resultUR();switch(o.type){case t.RegistryTypes.BYTES.getType():return e.Bytes.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_HDKEY.getType():return e.CryptoHDKey.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_KEYPATH.getType():return e.CryptoKeypath.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_COIN_INFO.getType():return e.CryptoCoinInfo.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_ECKEY.getType():return e.CryptoECKey.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_OUTPUT.getType():return e.CryptoOutput.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_PSBT.getType():return e.CryptoPSBT.fromCBOR(o.cbor);case t.RegistryTypes.CRYPTO_ACCOUNT.getType():return e.CryptoAccount.fromCBOR(o.cbor);default:throw new n.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${o.type} is not supported now`)}}}}return p0.URRegistryDecoder=i,p0}var m0={},zD;function qD(){if(zD)return m0;zD=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.CryptoMultiAccounts=void 0;const r=Xi(),e=Yg(),t=Ls(),n=Ji();var i;(function(o){o[o.masterFingerprint=1]="masterFingerprint",o[o.keys=2]="keys",o[o.device=3]="device",o[o.deviceId=4]="deviceId",o[o.version=5]="version"})(i||(i={}));let s=class extends t.RegistryItem{constructor(a,c,l,u,f){super(),this.masterFingerprint=a,this.keys=c,this.device=l,this.deviceId=u,this.version=f,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const d={};return this.masterFingerprint&&(d[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(d[i.keys]=this.keys.map(h=>{const g=h.toDataItem();return g.setTag(h.getRegistryType().getTag()),g})),this.device&&(d[i.device]=this.device),this.deviceId&&(d[i.deviceId]=this.deviceId),this.version&&(d[i.version]=this.version),new n.DataItem(d)}}};return m0.CryptoMultiAccounts=s,s.fromDataItem=o=>{const a=o.getData(),c=Ze.alloc(4),l=a[i.masterFingerprint];l&&c.writeUInt32BE(l,0);const f=a[i.keys].map(p=>e.CryptoHDKey.fromDataItem(p)),d=a[i.device],h=a[i.deviceId],g=a[i.version];return new s(c,f,d,h,g)},s.fromCBOR=o=>{const a=(0,n.decodeToDataItem)(o);return s.fromDataItem(a)},m0}var A2={},y0={},I2={},jD;function xW(){return jD||(jD=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyDerivationSchema=r.DerivationAlgorithm=r.Curve=void 0;const e=Xi(),t=Ls(),n=Ji(),i=_b();var s;(function(l){l[l.keyPath=1]="keyPath",l[l.curve=2]="curve",l[l.algo=3]="algo",l[l.chainType=4]="chainType"})(s||(s={}));var o;(function(l){l[l.secp256k1=0]="secp256k1",l[l.ed25519=1]="ed25519"})(o=r.Curve||(r.Curve={}));var a;(function(l){l[l.slip10=0]="slip10",l[l.bip32ed25519=1]="bip32ed25519"})(a=r.DerivationAlgorithm||(r.DerivationAlgorithm={}));class c extends t.RegistryItem{constructor(u,f=o.secp256k1,d=a.slip10,h){super(),this.keypath=u,this.curve=f,this.algo=d,this.chainType=h,this.getRegistryType=()=>e.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.getChainType=()=>this.chainType,this.toDataItem=()=>{const g={},p=this.getKeypath().toDataItem();return p.setTag(this.getKeypath().getRegistryType().getTag()),g[s.keyPath]=p,g[s.curve]=this.curve,g[s.algo]=this.algo,this.chainType&&(g[s.chainType]=this.chainType),new n.DataItem(g)}}}r.KeyDerivationSchema=c,c.fromDataItem=l=>{const u=l.getData(),f=i.CryptoKeypath.fromDataItem(u[s.keyPath]),d=u[s.curve],h=u[s.algo],g=u[s.chainType];return new c(f,d,h,g)},c.fromCBOR=l=>{const u=(0,n.decodeToDataItem)(l);return c.fromDataItem(u)}}(I2)),I2}var VD;function _W(){if(VD)return y0;VD=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.KeyDerivation=void 0;const r=Xi(),e=Ls(),t=Ji(),n=xW();var i;(function(o){o[o.schemas=1]="schemas"})(i||(i={}));let s=class extends e.RegistryItem{constructor(a){super(),this.schemas=a,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const c={};return c[i.schemas]=this.schemas.map(l=>{const u=l.toDataItem();return u.setTag(l.getRegistryType().getTag()),u}),new t.DataItem(c)}}};return y0.KeyDerivation=s,s.fromDataItem=o=>{const c=o.getData()[i.schemas].map(l=>n.KeyDerivationSchema.fromDataItem(l));return new s(c)},s.fromCBOR=o=>{const a=(0,t.decodeToDataItem)(o);return s.fromDataItem(a)},y0}var KD;function Nye(){return KD||(KD=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.QRHardwareCall=r.QRHardwareCallVersion=r.QRHardwareCallType=void 0;const e=Xi(),t=Ls(),n=Ji(),i=_W();var s;(function(c){c[c.type=1]="type",c[c.params=2]="params",c[c.origin=3]="origin",c[c.version=4]="version"})(s||(s={}));var o;(function(c){c[c.KeyDerivation=0]="KeyDerivation"})(o=r.QRHardwareCallType||(r.QRHardwareCallType={})),function(c){c[c.V0=0]="V0",c[c.V1=1]="V1"}(r.QRHardwareCallVersion||(r.QRHardwareCallVersion={}));class a extends t.RegistryItem{constructor(l,u,f,d){super(),this.type=l,this.params=u,this.origin=f,this.version=d,this.getRegistryType=()=>e.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.getVersion=()=>this.version,this.toDataItem=()=>{const h={};h[s.type]=this.type;const g=this.params.toDataItem();return g.setTag(this.params.getRegistryType().getTag()),h[s.params]=g,this.origin&&(h[s.origin]=this.origin),this.version&&(h[s.version]=this.version),new n.DataItem(h)}}}r.QRHardwareCall=a,a.fromDataItem=c=>{const l=c.getData(),u=l[s.type]||o.KeyDerivation;let f;switch(u){case o.KeyDerivation:f=i.KeyDerivation.fromDataItem(l[s.params])}const d=l[s.origin],h=l[s.version];return new a(u,f,d,h)},a.fromCBOR=c=>{const l=(0,n.decodeToDataItem)(c);return a.fromDataItem(l)}}(A2)),A2}var C2={},HD;function Lye(){return HD||(HD=1,Object.defineProperty(C2,"__esModule",{value:!0})),C2}var WD;function lw(){return WD||(WD=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.extend=r.PathComponent=r.ScriptExpressions=r.MultiKey=r.CryptoPSBT=r.CryptoOutput=r.CryptoECKey=r.CryptoCoinInfoNetwork=r.CryptoCoinInfoType=r.CryptoCoinInfo=r.CryptoKeypath=r.CryptoMultiAccounts=r.CryptoHDKey=r.CryptoAccount=r.Bytes=r.URRegistryDecoder=r.DataItem=void 0;const e=ame;QP();const t=Rc();Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return t.Buffer}});const n=Yg();Object.defineProperty(r,"CryptoHDKey",{enumerable:!0,get:function(){return n.CryptoHDKey}});const i=_b();Object.defineProperty(r,"CryptoKeypath",{enumerable:!0,get:function(){return i.CryptoKeypath}});const s=yC();Object.defineProperty(r,"CryptoCoinInfo",{enumerable:!0,get:function(){return s.CryptoCoinInfo}}),Object.defineProperty(r,"CryptoCoinInfoType",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(r,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return s.Network}});const o=Sb();Object.defineProperty(r,"CryptoECKey",{enumerable:!0,get:function(){return o.CryptoECKey}});const a=Bye();Object.defineProperty(r,"Bytes",{enumerable:!0,get:function(){return a.Bytes}});const c=$D();Object.defineProperty(r,"CryptoOutput",{enumerable:!0,get:function(){return c.CryptoOutput}});const l=MD();Object.defineProperty(r,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const u=ND();Object.defineProperty(r,"CryptoAccount",{enumerable:!0,get:function(){return u.CryptoAccount}});const f=UD();Object.defineProperty(r,"URRegistryDecoder",{enumerable:!0,get:function(){return f.URRegistryDecoder}});const d=bC();Object.defineProperty(r,"MultiKey",{enumerable:!0,get:function(){return d.MultiKey}});const h=I4();Object.defineProperty(r,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const g=vC();Object.defineProperty(r,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const p=Ls(),m=Xi(),y=Ji();var v=Ji();Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return v.DataItem}});const w=oC(),_=qD();Object.defineProperty(r,"CryptoMultiAccounts",{enumerable:!0,get:function(){return _.CryptoMultiAccounts}});const x={URRegistryDecoder:f.URRegistryDecoder,Bytes:a.Bytes,CryptoAccount:u.CryptoAccount,CryptoHDKey:n.CryptoHDKey,CryptoMultiAccounts:_.CryptoMultiAccounts,CryptoKeypath:i.CryptoKeypath,CryptoCoinInfo:s.CryptoCoinInfo,CryptoCoinInfoType:s.Type,CryptoCoinInfoNetwork:s.Network,CryptoECKey:o.CryptoECKey,CryptoOutput:c.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:d.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:g.PathComponent},E={addReader:y.addReader,addSemanticDecode:y.addSemanticDecode,addSemanticEncode:y.addSemanticEncode,addWriter:y.addWriter,patchTags:w.patchTags},S={RegistryTypes:m.RegistryTypes,RegistryItem:p.RegistryItem,RegistryType:m.RegistryType,decodeToDataItem:y.decodeToDataItem,encodeDataItem:y.encodeDataItem,cbor:E};r.extend=S,(0,e.__exportStar)(wW(),r),(0,e.__exportStar)(UD(),r),(0,e.__exportStar)(Ji(),r),(0,e.__exportStar)(ND(),r),(0,e.__exportStar)(MD(),r),(0,e.__exportStar)(Yg(),r),(0,e.__exportStar)(qD(),r),(0,e.__exportStar)(Nye(),r),(0,e.__exportStar)(_W(),r),(0,e.__exportStar)(xW(),r),(0,e.__exportStar)($D(),r),(0,e.__exportStar)(yC(),r),(0,e.__exportStar)(Sb(),r),(0,e.__exportStar)(bC(),r),(0,e.__exportStar)(_b(),r),(0,e.__exportStar)(QP(),r),(0,e.__exportStar)(vC(),r),(0,e.__exportStar)(Ls(),r),(0,e.__exportStar)(Xi(),r),(0,e.__exportStar)(Lye(),r),(0,e.__exportStar)(oC(),r),r.default=x}(y_)),y_}var lo={},nf={},v0={},GD;function SW(){if(GD)return v0;GD=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.Status=void 0;var r;return function(e){e[e.RSP_SUCCESS_CODE=0]="RSP_SUCCESS_CODE",e[e.RSP_FAILURE_CODE=1]="RSP_FAILURE_CODE",e[e.PRS_INVALID_TOTAL_PACKETS=2]="PRS_INVALID_TOTAL_PACKETS",e[e.PRS_INVALID_INDEX=3]="PRS_INVALID_INDEX",e[e.PRS_PARSING_REJECTED=4]="PRS_PARSING_REJECTED",e[e.PRS_PARSING_ERROR=5]="PRS_PARSING_ERROR",e[e.PRS_PARSING_DISALLOWED=6]="PRS_PARSING_DISALLOWED",e[e.PRS_PARSING_UNMATCHED=7]="PRS_PARSING_UNMATCHED",e[e.PRS_PARSING_MISMATCHED_WALLET=8]="PRS_PARSING_MISMATCHED_WALLET",e[e.PRS_PARSING_VERIFY_PASSWORD_ERROR=9]="PRS_PARSING_VERIFY_PASSWORD_ERROR",e[e.PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN=10]="PRS_EXPORT_ADDRESS_UNSUPPORTED_CHAIN",e[e.PRS_EXPORT_ADDRESS_INVALID_PARAMS=11]="PRS_EXPORT_ADDRESS_INVALID_PARAMS",e[e.PRS_EXPORT_ADDRESS_ERROR=12]="PRS_EXPORT_ADDRESS_ERROR",e[e.PRS_EXPORT_ADDRESS_DISALLOWED=13]="PRS_EXPORT_ADDRESS_DISALLOWED",e[e.PRS_EXPORT_ADDRESS_REJECTED=14]="PRS_EXPORT_ADDRESS_REJECTED",e[e.PRS_EXPORT_ADDRESS_BUSY=15]="PRS_EXPORT_ADDRESS_BUSY",e[e.ERR_DEVICE_NOT_OPENED=2684354561]="ERR_DEVICE_NOT_OPENED",e[e.ERR_DEVICE_NOT_FOUND=2684354562]="ERR_DEVICE_NOT_FOUND",e[e.ERR_RESPONSE_STATUS_NOT_OK=2684354563]="ERR_RESPONSE_STATUS_NOT_OK",e[e.ERR_TIMEOUT=2684354564]="ERR_TIMEOUT",e[e.ERR_DATA_TOO_LARGE=2684354565]="ERR_DATA_TOO_LARGE",e[e.ERR_NOT_SUPPORTED=2684354566]="ERR_NOT_SUPPORTED",e[e.ERR_BUFFER_MISMATCH=2684354567]="ERR_BUFFER_MISMATCH",e[e.ERR_RECEIVED_BABBLE=2684354568]="ERR_RECEIVED_BABBLE",e[e.ERR_INVALID_PACKET_SIZE=2684354569]="ERR_INVALID_PACKET_SIZE",e[e.ERR_TRANSPORT_HAS_NOT_BEEN_SET=2684354570]="ERR_TRANSPORT_HAS_NOT_BEEN_SET",e[e.ERR_UR_INCOMPLETE=2684354571]="ERR_UR_INCOMPLETE",e[e.ERR_UR_INVALID_TYPE=2684354572]="ERR_UR_INVALID_TYPE",e[e.RSP_MAX_VALUE=4294967295]="RSP_MAX_VALUE"}(r||(v0.Status=r={})),v0}var T2={},YD;function Fye(){return YD||(YD=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.throwTransportError=r.ErrorInfo=r.TransportError=void 0;const e=SW();class t extends Error{constructor(s,o,a){super(`${s} (error_code: ${o})`),this.name="TransportError",this.transportErrorCode=o,this.details=a??"",Object.setPrototypeOf(this,new.target.prototype)}}r.TransportError=t,r.ErrorInfo={[e.Status.ERR_DEVICE_NOT_OPENED]:"The USB device cannot be connected.",[e.Status.ERR_DEVICE_NOT_FOUND]:"The USB device cannot be found.",[e.Status.ERR_RESPONSE_STATUS_NOT_OK]:"The response status is not ok.",[e.Status.ERR_TIMEOUT]:"The request timed out.",[e.Status.ERR_DATA_TOO_LARGE]:"The data is too large.",[e.Status.ERR_NOT_SUPPORTED]:"The USB device is not supported.",[e.Status.ERR_BUFFER_MISMATCH]:"The buffer mismatched.",[e.Status.ERR_RECEIVED_BABBLE]:"The USB device received babble.",[e.Status.ERR_INVALID_PACKET_SIZE]:"The packet size is invalid.",[e.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET]:"The transport has not been set.",[e.Status.ERR_UR_INCOMPLETE]:"The UR is incomplete.",[e.Status.ERR_UR_INVALID_TYPE]:"The UR type is invalid."};const n=i=>{var s;const o=(s=r.ErrorInfo[i])!==null&&s!==void 0?s:"Unknown error";throw new t(o,i)};r.throwTransportError=n}(T2)),T2}var JD;function Lu(){return JD||(JD=1,function(r){var e=nf&&nf.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=nf&&nf.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(SW(),r),t(Fye(),r)}(nf)),nf}var sf={},Oi={},XD;function Eb(){if(XD)return Oi;XD=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.isString=Oi.isUint8Array=Oi.generateRequestID=Oi.isEmpty=Oi.setUint16=Oi.safeJSONparse=Oi.safeJSONStringify=void 0;const r=a=>{try{return JSON.stringify(a)}catch{return""}};Oi.safeJSONStringify=r;const e=a=>{try{return JSON.parse(a)}catch{return a}};Oi.safeJSONparse=e;const t=(a,c,l)=>{a[c]=l>>8&255,a[c+1]=l&255};Oi.setUint16=t;const n=a=>Array.isArray(a)?a.length===0:typeof a=="object"?Object.keys(a).length===0:!a;Oi.isEmpty=n;const i=()=>Math.floor(Math.random()*65535);Oi.generateRequestID=i;const s=a=>a instanceof Uint8Array;Oi.isUint8Array=s;const o=a=>typeof a=="string";return Oi.isString=o,Oi}var En={},ZD;function L4(){return ZD||(ZD=1,Object.defineProperty(En,"__esModule",{value:!0}),En.OFFSET_CDATA=En.OFFSET_LC=En.OFFSET_P2=En.OFFSET_P1=En.OFFSET_INS=En.OFFSET_CLA=En.USBTimeout=En.MAXUSBPackets=En.USBPackageSize=En.USBInterfaceNumber=En.USBConfigurationValue=void 0,En.USBConfigurationValue=1,En.USBInterfaceNumber=0,En.USBPackageSize=64,En.MAXUSBPackets=200,En.USBTimeout=1e3*15,En.OFFSET_CLA=0,En.OFFSET_INS=1,En.OFFSET_P1=3,En.OFFSET_P2=5,En.OFFSET_LC=7,En.OFFSET_CDATA=9),En}var QD;function Uye(){if(QD)return sf;QD=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.decode=sf.encode=void 0;const r=Eb(),e=L4(),t=Lu(),n=55,i=9,s=l=>l.length===0?null:new TextDecoder("utf-8").decode(l),o=(l,u,f)=>{if((0,r.isString)(f)&&(!f||f.length===0)){const p=new Uint8Array(9);return p[e.OFFSET_CLA]=0,(0,r.setUint16)(p,e.OFFSET_INS,l),(0,r.setUint16)(p,e.OFFSET_P1,1),(0,r.setUint16)(p,e.OFFSET_P2,0),(0,r.setUint16)(p,e.OFFSET_LC,u),[p]}const d=(0,r.isString)(f)?new TextEncoder().encode(f):f,h=[],g=Math.ceil(d.length/n);for(let p=0;p<g;p++){const m=d.slice(p*n,(p+1)*n),y=i+m.length,v=new Uint8Array(y);v[e.OFFSET_CLA]=0,(0,r.setUint16)(v,e.OFFSET_INS,l),(0,r.setUint16)(v,e.OFFSET_P1,g),(0,r.setUint16)(v,e.OFFSET_P2,p),(0,r.setUint16)(v,e.OFFSET_LC,u),v.set(m,i),h.push(v)}return h};sf.encode=o;const a=l=>{l.length<i&&(0,t.throwTransportError)(t.Status.ERR_INVALID_PACKET_SIZE);const u=new DataView(l.buffer),f=u.getUint8(0),d=u.getUint16(e.OFFSET_INS),h=u.getUint16(e.OFFSET_P1),g=u.getUint16(e.OFFSET_P2),p=u.getUint16(e.OFFSET_LC),m=l.buffer.byteLength-2,y=u.getUint16(m),v=m-e.OFFSET_CDATA,w=new Uint8Array(l.buffer,e.OFFSET_CDATA,v),_=s(w);return{cla:f,ins:d,totalPackets:h,packetIndex:g,requestID:p,data:_,status:y}},c=l=>l.map(f=>a(f)).sort(({packetIndex:f},{packetIndex:d})=>f-d).reduce((f,{data:d,status:h})=>({data:f.data+d,status:h}),{data:""});return sf.decode=c,sf}var b0={},eM;function tM(){return eM||(eM=1,function(r){var e=b0&&b0.__awaiter||function(m,y,v,w){function _(x){return x instanceof v?x:new v(function(E){E(x)})}return new(v||(v=Promise))(function(x,E){function S(P){try{C(w.next(P))}catch(V){E(V)}}function T(P){try{C(w.throw(P))}catch(V){E(V)}}function C(P){P.done?x(P.value):_(P.value).then(S,T)}C((w=w.apply(m,y||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.close=r.request=r.gracefullyResetDevice=r.isSupported=r.getFirstKeystoneDevice=r.getKeystoneDevices=r.open=r.requestKeystoneDevice=r.initializeDisconnectListener=r.keystoneUSBVendorId=void 0;const t=L4(),n=Eb(),i=Lu();r.keystoneUSBVendorId=4617;const s=[{vendorId:r.keystoneUSBVendorId}],o=(m,y)=>{const v=w=>{m===w.device&&(y&&y(m),(0,r.close)(m),navigator.usb.removeEventListener("disconnect",v))};navigator.usb.addEventListener("disconnect",v)};r.initializeDisconnectListener=o;function a(m){return e(this,void 0,void 0,function*(){m.configuration===null&&(yield m.selectConfiguration(t.USBConfigurationValue))})}function c(){return e(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:s})})}r.requestKeystoneDevice=c;const l=m=>e(void 0,void 0,void 0,function*(){yield m.open(),yield a(m),yield h(m);try{yield m.claimInterface(t.USBInterfaceNumber)}catch(y){throw yield(0,r.close)(m),y}return m});r.open=l;function u(){return e(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(y=>y.vendorId===r.keystoneUSBVendorId)})}r.getKeystoneDevices=u;function f(){return e(this,void 0,void 0,function*(){const m=yield u();return m.length>0?m[0]:c()})}r.getFirstKeystoneDevice=f;const d=()=>e(void 0,void 0,void 0,function*(){return(!navigator?.usb||typeof navigator.usb.getDevices!="function")&&(0,i.throwTransportError)(i.Status.ERR_NOT_SUPPORTED),(0,n.isEmpty)(yield u())&&(0,i.throwTransportError)(i.Status.ERR_DEVICE_NOT_FOUND),!0});r.isSupported=d;function h(m){return e(this,void 0,void 0,function*(){try{yield m.reset()}catch(y){console.warn(y)}})}r.gracefullyResetDevice=h;const g=()=>e(void 0,void 0,void 0,function*(){const m=yield c();return yield(0,r.open)(m)});r.request=g;const p=m=>e(void 0,void 0,void 0,function*(){try{console.log("Closing device"),yield m.releaseInterface(t.USBInterfaceNumber),yield h(m),yield m.close(),console.log("Closing device done")}catch(y){console.log("in closh func"),console.warn(y)}});r.close=p}(b0)),b0}var of={},rM;function nM(){if(rM)return of;rM=1;var r=of&&of.__awaiter||function(t,n,i,s){function o(a){return a instanceof i?a:new i(function(c){c(a)})}return new(i||(i=Promise))(function(a,c){function l(d){try{f(s.next(d))}catch(h){c(h)}}function u(d){try{f(s.throw(d))}catch(h){c(h)}}function f(d){d.done?a(d.value):o(d.value).then(l,u)}f((s=s.apply(t,n||[])).next())})};Object.defineProperty(of,"__esModule",{value:!0}),of.logMethod=void 0;function e(t,n,i){const s=i.value;return i.value=function(...o){return r(this,void 0,void 0,function*(){const a=o.map(l=>JSON.stringify(l)).join(),c=yield s.apply(this,o);return console.log(`[${new Date().toISOString()}] Call: ${n}(${a}) => ${JSON.stringify(c)}`),c})},i}return of.logMethod=e,of}var w0={},iM;function zye(){if(iM)return w0;iM=1,Object.defineProperty(w0,"__esModule",{value:!0}),w0.Actions=void 0;var r;return function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(w0.Actions=r={})),w0}var x0={},sM;function qye(){if(sM)return x0;sM=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.Chain=void 0;var r;return function(e){e[e.ETH=0]="ETH"}(r||(x0.Chain=r={})),x0}var oM;function jye(){return oM||(oM=1,function(r){var e=lo&&lo.__createBinding||(Object.create?function(_,x,E,S){S===void 0&&(S=E);var T=Object.getOwnPropertyDescriptor(x,E);(!T||("get"in T?!x.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return x[E]}}),Object.defineProperty(_,S,T)}:function(_,x,E,S){S===void 0&&(S=E),_[S]=x[E]}),t=lo&&lo.__decorate||function(_,x,E,S){var T=arguments.length,C=T<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,E):S,P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,x,E,S);else for(var V=_.length-1;V>=0;V--)(P=_[V])&&(C=(T<3?P(C):T>3?P(x,E,C):P(x,E))||C);return T>3&&C&&Object.defineProperty(x,E,C),C},n=lo&&lo.__exportStar||function(_,x){for(var E in _)E!=="default"&&!Object.prototype.hasOwnProperty.call(x,E)&&e(x,_,E)},i=lo&&lo.__awaiter||function(_,x,E,S){function T(C){return C instanceof E?C:new E(function(P){P(C)})}return new(E||(E=Promise))(function(C,P){function V(b){try{D(S.next(b))}catch(I){P(I)}}function L(b){try{D(S.throw(b))}catch(I){P(I)}}function D(b){b.done?C(b.value):T(b.value).then(V,L)}D((S=S.apply(_,x||[])).next())})},s=lo&&lo.__classPrivateFieldGet||function(_,x,E,S){if(E==="a"&&!S)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?_!==x||!S:!x.has(_))throw new TypeError("Cannot read private member from an object whose class did not declare it");return E==="m"?S:E==="a"?S.call(_):S?S.value:x.get(_)},o,a,c;Object.defineProperty(r,"__esModule",{value:!0}),r.TransportWebUSB=r.Chain=r.StatusCode=r.Actions=void 0;const l=Rc(),u=Lu(),f=Uye(),d=L4(),h=tM(),g=Eb(),p=nM();var m=zye();Object.defineProperty(r,"Actions",{enumerable:!0,get:function(){return m.Actions}}),n(tM(),r);var y=Lu();Object.defineProperty(r,"StatusCode",{enumerable:!0,get:function(){return y.Status}});var v=qye();Object.defineProperty(r,"Chain",{enumerable:!0,get:function(){return v.Chain}}),n(nM(),r),n(Eb(),r);class w{constructor(x,E){var S,T,C;o.add(this),this.endpoint=3,this.requestTimeout=d.USBTimeout,this.maxPacketSize=d.MAXUSBPackets,this.receive=(P,V)=>i(this,void 0,void 0,function*(){var L,D,b,I,B,F,z;if(!(!((L=this.device)===null||L===void 0)&&L.opened))return null;const G=[];let Q=0,X=0,O=!0;do{const M=yield this.device.transferIn(this.endpoint,d.USBPackageSize);M.status==="babble"&&(0,u.throwTransportError)(u.Status.ERR_RECEIVED_BABBLE);const k=!!(!((D=M?.data)===null||D===void 0)&&D.buffer),j=((I=(b=M?.data)===null||b===void 0?void 0:b.buffer)===null||I===void 0?void 0:I.byteLength)===0;if(!(k&&!j&&new DataView(M.data.buffer).getUint16(d.OFFSET_INS)===P&&new DataView(M.data.buffer).getUint16(d.OFFSET_LC)===V)){yield this.open();continue}O=!1,G.push(l.Buffer.from(M.data.buffer)),X=new DataView(M.data.buffer).getUint16(d.OFFSET_P1),Q+=1}while(Q<X||O);const R=(0,f.decode)(G);if(R.status!==u.Status.RSP_SUCCESS_CODE)throw new u.TransportError(`${(F=(B=(0,g.safeJSONparse)(R.data))===null||B===void 0?void 0:B.payload)!==null&&F!==void 0?F:"unknown error"}`,(z=R.status)!==null&&z!==void 0?z:u.Status.RSP_FAILURE_CODE);return(0,g.safeJSONparse)(R.data)}),this.open=()=>i(this,void 0,void 0,function*(){this.device||(this.device=yield(0,h.requestKeystoneDevice)()),yield(0,h.open)(this.device)}),this.close=()=>i(this,void 0,void 0,function*(){var P;return((P=this.device)===null||P===void 0?void 0:P.opened)&&(0,h.close)(this.device)}),this.endpoint=(S=E?.endpoint)!==null&&S!==void 0?S:this.endpoint,this.requestTimeout=(T=E?.timeout)!==null&&T!==void 0?T:this.requestTimeout,this.maxPacketSize=(C=E?.maxPacketSize)!==null&&C!==void 0?C:this.maxPacketSize,this.device=x}send(x,E){return i(this,void 0,void 0,function*(){return yield s(this,o,"m",c).call(this,x,E).finally(()=>i(this,void 0,void 0,function*(){yield(0,h.close)(this.device)}))})}}r.TransportWebUSB=w,a=w,o=new WeakSet,c=function(x,E){var S;return i(this,void 0,void 0,function*(){yield(0,h.open)(this.device),!((S=this.device)===null||S===void 0)&&S.opened||(0,u.throwTransportError)(u.Status.ERR_DEVICE_NOT_OPENED),!(0,g.isUint8Array)(E)&&!(0,g.isString)(E)&&(E=(0,g.safeJSONStringify)(E));const T=(0,g.generateRequestID)(),C=(0,f.encode)(x,T,E);this.maxPacketSize<C.length&&(0,u.throwTransportError)(u.Status.ERR_DATA_TOO_LARGE);let P;const V=new Promise((D,b)=>{P=setTimeout(()=>b(new u.TransportError(u.ErrorInfo[u.Status.ERR_TIMEOUT],u.Status.ERR_TIMEOUT)),this.requestTimeout)}),L=i(this,void 0,void 0,function*(){try{do(yield this.device.transferOut(this.endpoint,C[0])).status!=="ok"&&(0,u.throwTransportError)(u.Status.ERR_RESPONSE_STATUS_NOT_OK),C.shift();while(C.length>0);return yield this.receive(x,T)}finally{clearTimeout(P)}});return Promise.race([L,V])})},w.requestPermission=()=>i(void 0,void 0,void 0,function*(){return yield(0,h.close)(yield(0,h.request)())}),w.connect=_=>i(void 0,void 0,void 0,function*(){yield(0,h.isSupported)();const x=yield(0,h.getKeystoneDevices)();let E=null;return x.length>1?E=yield(0,h.requestKeystoneDevice)():E=x[0],(0,h.initializeDisconnectListener)(E,_?.disconnectListener),new a(E,_)}),t([p.logMethod],w.prototype,"send",null)}(lo)),lo}var R2={exports:{}},k2={},aM;function Vye(){return aM||(aM=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=lw(),t=rw;const n={SOL_SIGN_REQUEST:new e.RegistryType("sol-sign-request",1101),SOL_SIGNATURE:new e.RegistryType("sol-signature",1102),SOL_NFT_ITEM:new e.RegistryType("sol-nft-item",1104)},{decodeToDataItem:i,RegistryTypes:s}=e.extend;var o,a;(o=r.SignType||(r.SignType={}))[o.Transaction=1]="Transaction",o[o.Message=2]="Message",function(m){m[m.requestId=1]="requestId",m[m.signData=2]="signData",m[m.derivationPath=3]="derivationPath",m[m.address=4]="address",m[m.origin=5]="origin",m[m.signType=6]="signType"}(a||(a={}));class c extends e.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.SOL_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.getSignType=()=>this.signType,this.toDataItem=()=>{const v={};this.requestId&&(v[a.requestId]=new e.DataItem(this.requestId,s.UUID.getTag())),this.address&&(v[a.address]=this.address),this.origin&&(v[a.origin]=this.origin),v[a.signData]=this.signData,v[a.signType]=this.signType;const w=this.derivationPath.toDataItem();return w.setTag(this.derivationPath.getRegistryType().getTag()),v[a.derivationPath]=w,new e.DataItem(v)},this.requestId=y.requestId,this.signData=y.signData,this.derivationPath=y.derivationPath,this.address=y.address,this.origin=y.origin,this.signType=y.signType}static constructSOLRequest(y,v,w,_,x,E,S){const T=v.replace(/[m|M]\//,"").split("/"),C=new e.CryptoKeypath(T.map(P=>{const V=parseInt(P.replace("'",""));let L=!1;return P.endsWith("'")&&(L=!0),new e.PathComponent({index:V,hardened:L})}),Ze.from(w,"hex"));return new c({requestId:x?Ze.from(t.parse(x)):void 0,signData:y,derivationPath:C,address:E?Ze.from(E.replace("0x",""),"hex"):void 0,origin:S||void 0,signType:_})}}c.fromDataItem=m=>{const y=m.getData(),v=y[a.signData],w=e.CryptoKeypath.fromDataItem(y[a.derivationPath]),_=y[a.address]?y[a.address]:void 0,x=y[a.requestId]?y[a.requestId].getData():void 0;return new c({requestId:x,signData:v,derivationPath:w,address:_,origin:y[a.origin]?y[a.origin]:void 0,signType:y[a.signType]})},c.fromCBOR=m=>{const y=i(m);return c.fromDataItem(y)};const{RegistryTypes:l,decodeToDataItem:u}=e.extend;var f;(function(m){m[m.requestId=1]="requestId",m[m.signature=2]="signature"})(f||(f={}));class d extends e.RegistryItem{constructor(y,v){super(),this.getRegistryType=()=>n.SOL_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.toDataItem=()=>{const w={};return this.requestId&&(w[f.requestId]=new e.DataItem(this.requestId,l.UUID.getTag())),w[f.signature]=this.signature,new e.DataItem(w)},this.signature=y,this.requestId=v}}d.fromDataItem=m=>{const y=m.getData(),v=y[f.signature],w=y[f.requestId]?y[f.requestId].getData():void 0;return new d(v,w)},d.fromCBOR=m=>{const y=u(m);return d.fromDataItem(y)};const{decodeToDataItem:h}=e.extend;var g;(function(m){m[m.mintAddress=1]="mintAddress",m[m.collectionName=2]="collectionName",m[m.name=3]="name",m[m.mediaData=4]="mediaData"})(g||(g={}));class p extends e.RegistryItem{constructor(y){super(),this.getRegistryType=()=>n.SOL_NFT_ITEM,this.getName=()=>this.name,this.getMediaData=()=>this.mediaData,this.getMintAddress=()=>this.mintAddress,this.getCollectionName=()=>this.collectionName,this.toDataItem=()=>{const v={};return v[g.name]=this.name,v[g.mintAddress]=this.mintAddress,v[g.collectionName]=this.collectionName,v[g.mediaData]=this.mediaData,new e.DataItem(v)},this.name=y.name,this.mintAddress=y.mintAddress,this.collectionName=y.collectionName,this.mediaData=y.mediaData}static constructETHNFTItem(y,v,w,_){return new p({mintAddress:y,collectionName:v,mediaData:_,name:w})}}p.fromDataItem=m=>{const y=m.getData();return new p({name:y[g.name],mintAddress:y[g.mintAddress],collectionName:y[g.collectionName],mediaData:y[g.mediaData]})},p.fromCBOR=m=>{const y=h(m);return p.fromDataItem(y)},e.patchTags(Object.values(n).filter(m=>!!m.getTag()).map(m=>m.getTag())),Object.keys(e).forEach(function(m){m!=="default"&&Object.defineProperty(r,m,{enumerable:!0,get:function(){return e[m]}})}),r.SOLNFTItem=p,r.SolSignRequest=c,r.SolSignature=d}(k2)),k2}var cM;function Kye(){return cM||(cM=1,R2.exports=Vye()),R2.exports}var lM;function Hye(){if(lM)return Ko;lM=1;var r=Ko&&Ko.__createBinding||(Object.create?function(p,m,y,v){v===void 0&&(v=y);var w=Object.getOwnPropertyDescriptor(m,y);(!w||("get"in w?!m.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return m[y]}}),Object.defineProperty(p,v,w)}:function(p,m,y,v){v===void 0&&(v=y),p[v]=m[y]}),e=Ko&&Ko.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),t=Ko&&Ko.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&r(m,p,y);return e(m,p),m},n=Ko&&Ko.__awaiter||function(p,m,y,v){function w(_){return _ instanceof y?_:new y(function(x){x(_)})}return new(y||(y=Promise))(function(_,x){function E(C){try{T(v.next(C))}catch(P){x(P)}}function S(C){try{T(v.throw(C))}catch(P){x(P)}}function T(C){C.done?_(C.value):w(C.value).then(E,S)}T((v=v.apply(p,m||[])).next())})};Object.defineProperty(Ko,"__esModule",{value:!0});const i=t(rw),s=lw(),o=N4(),a=jye(),c=Lu(),l=Kye(),u=p=>{const y=p.replace(/[m|M]\//,"").split("/").map(v=>{const w=parseInt(v.replace("'",""),10),_=v.endsWith("'");return new s.PathComponent({index:w,hardened:_})});return new s.CryptoKeypath(y)};class f{constructor(m,y){this.transport=m,y&&(this.mfp=y)}precheck(){if(this.transport||(0,c.throwTransportError)(c.Status.ERR_TRANSPORT_HAS_NOT_BEEN_SET),!this.mfp)throw new Error("missing mfp for this wallet")}sendToDevice(m,y){return n(this,void 0,void 0,function*(){return this.transport.send(m,y)})}checkDeviceLockStatus(){return n(this,void 0,void 0,function*(){return(yield this.sendToDevice(a.Actions.CMD_CHECK_LOCK_STATUS,"")).payload})}getAddress(m,y=!1){return n(this,void 0,void 0,function*(){const v=s.Curve.ed25519,w=s.DerivationAlgorithm.slip10,_=new s.KeyDerivationSchema(u(m),v,w,"SOL"),x=new s.KeyDerivation([_]);let S=new s.QRHardwareCall(s.QRHardwareCallType.KeyDerivation,x,"Keystone USB SDK",s.QRHardwareCallVersion.V1).toUR();const T=new o.UREncoder(S,1/0).nextPart().toUpperCase(),C=yield this.sendToDevice(a.Actions.CMD_RESOLVE_UR,T);let P=h(C.payload),V=s.CryptoMultiAccounts.fromCBOR(P.cbor),L=V.getKeys()[0];return this.mfp=V.getMasterFingerprint().toString("hex"),{address:L.getKey(),mfp:this.mfp}})}sign(m,y,v){return n(this,void 0,void 0,function*(){this.precheck();const w=d(y,m,this.mfp,v),_=yield this.sendToDevice(a.Actions.CMD_RESOLVE_UR,w);let x=h(_.payload);return{signature:g(x)}})}signTransaction(m,y){return n(this,void 0,void 0,function*(){return this.sign(m,y,l.SignType.Transaction)})}signOffchainMessage(m,y){return n(this,void 0,void 0,function*(){return this.sign(m,y,l.SignType.Message)})}getAppConfig(){return n(this,void 0,void 0,function*(){let y=(yield this.sendToDevice(a.Actions.CMD_GET_DEVICE_VERSION,"")).payload,v=JSON.parse(y);return{version:v.firmwareVersion,mfp:v.walletMFP}})}}Ko.default=f;const d=(p,m,y,v)=>{const w=i.v4(),x=l.SolSignRequest.constructSOLRequest(p,m,y,v,w).toUR();return new o.UREncoder(x,1/0).nextPart().toUpperCase()},h=p=>{const m=new o.URDecoder;return m.receivePart(p),m.isComplete()||(0,c.throwTransportError)(c.Status.ERR_UR_INCOMPLETE),m.resultUR()},g=p=>l.SolSignature.fromCBOR(p.cbor).getSignature();return Ko}var Wye=Hye();const Gye=zs(Wye);var af={},Ho={},Uc={},sn={},uM;function wC(){if(uM)return sn;uM=1;var r={};return Object.defineProperty(sn,"__esModule",{value:!0}),sn.keystoneUSBProductId=sn.keystoneUSBVendorId=sn.OFFSET_CDATA=sn.OFFSET_LC=sn.OFFSET_P2=sn.OFFSET_P1=sn.OFFSET_INS=sn.OFFSET_CLA=sn.USBTimeout=sn.MAXUSBPackets=sn.USBPackageSize=sn.USBInterfaceNumber=sn.USBConfigurationValue=void 0,sn.USBConfigurationValue=1,sn.USBInterfaceNumber=typeof window<"u"?0:r.KEYSTONE_USB_ENV==="development"?1:0,sn.USBPackageSize=64,sn.MAXUSBPackets=200,sn.USBTimeout=1e3*15,sn.OFFSET_CLA=0,sn.OFFSET_INS=1,sn.OFFSET_P1=3,sn.OFFSET_P2=5,sn.OFFSET_LC=7,sn.OFFSET_CDATA=9,sn.keystoneUSBVendorId=4617,sn.keystoneUSBProductId=12289,sn}var _0={},fM;function Yye(){if(fM)return _0;fM=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.Actions=void 0;var r;return function(e){e[e.CMD_ECHO_TEST=1]="CMD_ECHO_TEST",e[e.CMD_RESOLVE_UR=2]="CMD_RESOLVE_UR",e[e.CMD_CHECK_LOCK_STATUS=3]="CMD_CHECK_LOCK_STATUS",e[e.CMD_EXPORT_ADDRESS=4]="CMD_EXPORT_ADDRESS",e[e.CMD_GET_DEVICE_VERSION=5]="CMD_GET_DEVICE_VERSION"}(r||(_0.Actions=r={})),_0}var S0={},dM;function Jye(){if(dM)return S0;dM=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.Chain=void 0;var r;return function(e){e[e.ETH=0]="ETH"}(r||(S0.Chain=r={})),S0}var Vd={},hM;function Xye(){if(hM)return Vd;hM=1;var r={},e=Vd&&Vd.__awaiter||function(i,s,o,a){function c(l){return l instanceof o?l:new o(function(u){u(l)})}return new(o||(o=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(p){u(p)}}function d(g){try{h(a.throw(g))}catch(p){u(p)}}function h(g){g.done?l(g.value):c(g.value).then(f,d)}h((a=a.apply(i,s||[])).next())})};Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.logMethod=n;const t=r.KEYSTONE_USB_ENV==="development";function n(i,s,o){const a=o.value;return o.value=function(...c){return e(this,void 0,void 0,function*(){const l=c.map(f=>JSON.stringify(f)).join(),u=yield a.apply(this,c);return t&&console.log(`[${new Date().toISOString()}] Call: ${s}(${l}) => ${JSON.stringify(u)}`),u})},o}return Vd}var Pi={},pM;function EW(){if(pM)return Pi;pM=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.isString=Pi.isUint8Array=Pi.generateRequestID=Pi.isEmpty=Pi.setUint16=Pi.safeJSONparse=Pi.safeJSONStringify=void 0;const r=a=>{try{return JSON.stringify(a)}catch{return""}};Pi.safeJSONStringify=r;const e=a=>{try{return JSON.parse(a)}catch{return a}};Pi.safeJSONparse=e;const t=(a,c,l)=>{a[c]=l>>8&255,a[c+1]=l&255};Pi.setUint16=t;const n=a=>Array.isArray(a)?a.length===0:typeof a=="object"?Object.keys(a).length===0:!a;Pi.isEmpty=n;const i=()=>Math.floor(Math.random()*65535);Pi.generateRequestID=i;const s=a=>a instanceof Uint8Array;Pi.isUint8Array=s;const o=a=>typeof a=="string";return Pi.isString=o,Pi}var cf={},gM;function Zye(){if(gM)return cf;gM=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.decode=cf.encode=void 0;const r=EW(),e=wC(),t=Lu(),n=55,i=9,s=l=>l.length===0?null:new TextDecoder("utf-8").decode(l),o=(l,u,f)=>{if((0,r.isString)(f)&&(!f||f.length===0)){const p=new Uint8Array(9);return p[e.OFFSET_CLA]=0,(0,r.setUint16)(p,e.OFFSET_INS,l),(0,r.setUint16)(p,e.OFFSET_P1,1),(0,r.setUint16)(p,e.OFFSET_P2,0),(0,r.setUint16)(p,e.OFFSET_LC,u),[p]}const d=(0,r.isString)(f)?new TextEncoder().encode(f):f,h=[],g=Math.ceil(d.length/n);for(let p=0;p<g;p++){const m=d.slice(p*n,(p+1)*n),y=i+m.length,v=new Uint8Array(y);v[e.OFFSET_CLA]=0,(0,r.setUint16)(v,e.OFFSET_INS,l),(0,r.setUint16)(v,e.OFFSET_P1,g),(0,r.setUint16)(v,e.OFFSET_P2,p),(0,r.setUint16)(v,e.OFFSET_LC,u),v.set(m,i),h.push(v)}return h};cf.encode=o;const a=l=>{l.length<i&&(0,t.throwTransportError)(t.Status.ERR_INVALID_PACKET_SIZE);const u=new DataView(l.buffer),f=u.getUint8(0),d=u.getUint16(e.OFFSET_INS),h=u.getUint16(e.OFFSET_P1),g=u.getUint16(e.OFFSET_P2),p=u.getUint16(e.OFFSET_LC),m=l.buffer.byteLength-2,y=u.getUint16(m),v=m-e.OFFSET_CDATA,w=new Uint8Array(l.buffer,e.OFFSET_CDATA,v),_=s(w);return{cla:f,ins:d,totalPackets:h,packetIndex:g,requestID:p,data:_,status:y}},c=l=>l.map(f=>a(f)).sort(({packetIndex:f},{packetIndex:d})=>f-d).reduce((f,{data:d,status:h})=>({data:f.data+d,status:h}),{data:""});return cf.decode=c,cf}var O2={},mM;function Qye(){return mM||(mM=1,Object.defineProperty(O2,"__esModule",{value:!0})),O2}var yM;function P2(){return yM||(yM=1,function(r){var e=Uc&&Uc.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,u)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),t=Uc&&Uc.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Uc&&Uc.__awaiter,Object.defineProperty(r,"__esModule",{value:!0}),r.Chain=r.StatusCode=r.Actions=void 0,wC();var n=Yye();Object.defineProperty(r,"Actions",{enumerable:!0,get:function(){return n.Actions}});var i=Lu();Object.defineProperty(r,"StatusCode",{enumerable:!0,get:function(){return i.Status}});var s=Jye();Object.defineProperty(r,"Chain",{enumerable:!0,get:function(){return s.Chain}}),t(Xye(),r),t(EW(),r),t(Zye(),r),t(wC(),r),t(Qye(),r)}(Uc)),Uc}var vM;function eve(){if(vM)return Ho;vM=1;var r=Ho&&Ho.__decorate||function(x,E,S,T){var C=arguments.length,P=C<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,S):T,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,E,S,T);else for(var L=x.length-1;L>=0;L--)(V=x[L])&&(P=(C<3?V(P):C>3?V(E,S,P):V(E,S))||P);return C>3&&P&&Object.defineProperty(E,S,P),P},e=Ho&&Ho.__awaiter||function(x,E,S,T){function C(P){return P instanceof S?P:new S(function(V){V(P)})}return new(S||(S=Promise))(function(P,V){function L(I){try{b(T.next(I))}catch(B){V(B)}}function D(I){try{b(T.throw(I))}catch(B){V(B)}}function b(I){I.done?P(I.value):C(I.value).then(L,D)}b((T=T.apply(x,E||[])).next())})},t=Ho&&Ho.__classPrivateFieldGet||function(x,E,S,T){if(S==="a"&&!T)throw new TypeError("Private accessor was defined without a getter");if(typeof E=="function"?x!==E||!T:!E.has(x))throw new TypeError("Cannot read private member from an object whose class did not declare it");return S==="m"?T:S==="a"?T.call(x):T?T.value:E.get(x)},n,i,s;Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.TransportWebUSB=void 0,Ho.createKeystoneTransport=g;const o=P2(),a=P2(),c=P2(),l=Lu(),u=Rc(),f=[{vendorId:a.keystoneUSBVendorId}];class d{static getKeystoneDevices(){return e(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(S=>S.vendorId===a.keystoneUSBVendorId)})}static getFirstKeystoneDevice(){return e(this,void 0,void 0,function*(){const E=yield this.getKeystoneDevices();return E.length>0?E[0]:m()})}static isSupported(){return e(this,void 0,void 0,function*(){return(!navigator?.usb||typeof navigator.usb.getDevices!="function")&&(0,l.throwTransportError)(l.Status.ERR_NOT_SUPPORTED),(0,c.isEmpty)(yield this.getKeystoneDevices())&&(0,l.throwTransportError)(l.Status.ERR_DEVICE_NOT_FOUND),!0})}constructor(E,S){var T,C,P;n.add(this),this.endpoint=3,this.requestTimeout=a.USBTimeout,this.maxPacketSize=a.MAXUSBPackets,this.receive=(V,L)=>e(this,void 0,void 0,function*(){var D,b,I,B,F,z,G;if(!(!((D=this.device)===null||D===void 0)&&D.opened))return null;const Q=[];let X=0,O=0,R=!0;do{const k=yield this.device.transferIn(this.endpoint,a.USBPackageSize);k.status==="babble"&&(0,l.throwTransportError)(l.Status.ERR_RECEIVED_BABBLE);const j=!!(!((b=k?.data)===null||b===void 0)&&b.buffer),te=((B=(I=k?.data)===null||I===void 0?void 0:I.buffer)===null||B===void 0?void 0:B.byteLength)===0;if(!(j&&!te&&new DataView(k.data.buffer).getUint16(a.OFFSET_INS)===V&&new DataView(k.data.buffer).getUint16(a.OFFSET_LC)===L)){yield this.open();continue}R=!1,Q.push(u.Buffer.from(k.data.buffer)),O=new DataView(k.data.buffer).getUint16(a.OFFSET_P1),X+=1}while(X<O||R);const M=(0,o.decode)(Q);if(M.status!==l.Status.RSP_SUCCESS_CODE)throw new l.TransportError(`${(z=(F=(0,c.safeJSONparse)(M.data))===null||F===void 0?void 0:F.payload)!==null&&z!==void 0?z:"unknown error"}`,(G=M.status)!==null&&G!==void 0?G:l.Status.RSP_FAILURE_CODE);return(0,c.safeJSONparse)(M.data)}),this.open=()=>e(this,void 0,void 0,function*(){this.device||(this.device=yield m()),yield y(this.device)}),this.close=()=>e(this,void 0,void 0,function*(){var V;!((V=this.device)===null||V===void 0)&&V.opened&&(yield _(this.device))}),this.endpoint=(T=S?.endpoint)!==null&&T!==void 0?T:this.endpoint,this.requestTimeout=(C=S?.timeout)!==null&&C!==void 0?C:this.requestTimeout,this.maxPacketSize=(P=S?.maxPacketSize)!==null&&P!==void 0?P:this.maxPacketSize,this.device=E}send(E,S){return e(this,void 0,void 0,function*(){return yield t(this,n,"m",s).call(this,E,S).finally(()=>e(this,void 0,void 0,function*(){yield _(this.device)}))})}}Ho.TransportWebUSB=d,i=d,n=new WeakSet,s=function(E,S){return e(this,void 0,void 0,function*(){var T;yield y(this.device),!((T=this.device)===null||T===void 0)&&T.opened||(0,l.throwTransportError)(l.Status.ERR_DEVICE_NOT_OPENED),!(0,c.isUint8Array)(S)&&!(0,c.isString)(S)&&(S=(0,c.safeJSONStringify)(S));const C=(0,c.generateRequestID)(),P=(0,o.encode)(E,C,S);this.maxPacketSize<P.length&&(0,l.throwTransportError)(l.Status.ERR_DATA_TOO_LARGE);let V;const L=new Promise((b,I)=>{V=setTimeout(()=>I(new l.TransportError(l.ErrorInfo[l.Status.ERR_TIMEOUT],l.Status.ERR_TIMEOUT)),this.requestTimeout)}),D=e(this,void 0,void 0,function*(){try{do(yield this.device.transferOut(this.endpoint,P[0])).status!=="ok"&&(0,l.throwTransportError)(l.Status.ERR_RESPONSE_STATUS_NOT_OK),P.shift();while(P.length>0);return yield this.receive(E,C)}finally{clearTimeout(V)}});return Promise.race([D,L])})},d.requestPermission=()=>e(void 0,void 0,void 0,function*(){return yield _(yield w())}),d.connect=x=>e(void 0,void 0,void 0,function*(){yield i.isSupported();const E=yield i.getKeystoneDevices();let S=null;return E.length>1?S=yield m():S=E[0],h(S,x?.disconnectListener),new i(S,x)}),r([o.logMethod],d.prototype,"send",null);const h=(x,E)=>{const S=T=>{x===T.device&&(E&&E(x),_(x),navigator.usb.removeEventListener("disconnect",S))};navigator.usb.addEventListener("disconnect",S)};function g(){return e(this,arguments,void 0,function*(x=1e5){if((yield d.getKeystoneDevices()).length<=0)try{yield d.requestPermission()}catch{throw new Error("USB_PERMISSION_NOT_AVAILABLE")}const E=yield d.connect({timeout:x});return yield E.close(),E})}function p(x){return e(this,void 0,void 0,function*(){x.configuration===null&&(yield x.selectConfiguration(a.USBConfigurationValue))})}function m(){return e(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:f})})}const y=x=>e(void 0,void 0,void 0,function*(){yield x.open(),yield p(x),yield v(x);try{yield x.claimInterface(a.USBInterfaceNumber)}catch(E){throw yield _(x),E}return x});function v(x){return e(this,void 0,void 0,function*(){try{yield x.reset()}catch(E){console.warn(E)}})}const w=()=>e(void 0,void 0,void 0,function*(){const x=yield m();return yield y(x)}),_=x=>e(void 0,void 0,void 0,function*(){try{yield x.releaseInterface(a.USBInterfaceNumber),yield v(x),yield x.close()}catch(E){console.warn(E)}});return Ho}var bM;function tve(){return bM||(bM=1,function(r){var e=af&&af.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),t=af&&af.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(eve(),r)}(af)),af}var wM=tve();class gh{static getDerivationPath(e){switch(e.type){case"root":return"m/44'/501'";case"current":return`m/44'/501'/${e.index}'/0'`;case"legacy":return`m/44'/501'/${e.index}'`;case"bip32":case"ledger-live":return`m/44'/501'/${e.index}'/0'/0'`;case"backpack-legacy":return`m/44'/501'/0'/0'/${e.index}'`;case"custom":return e.path}}static async pairDevice(){return wM.TransportWebUSB.requestPermission()}static async getSolanaApp(e){const t=await wM.TransportWebUSB.connect({timeout:12e4});return new Gye(t,e)}static async getAddress(e){const t=this.getDerivationPath(e),n=await this.getSolanaApp(),{address:i,mfp:s}=await n.getAddress(t);return{address:Ine().decode(i),mfp:s,path:t}}static async signTransaction(e,t,n,i){const{messageBytes:s,signatures:o}=Yh.unmarshalTransaction(i),c=await(await this.getSolanaApp(e)).signTransaction(t,Ze.from(s));return Yh.marshalTransaction(s,{...o,[n]:c.signature})}static async signMessage(e,t,n){const i=await this.getSolanaApp(e),{signature:s}=await i.signOffchainMessage(t,Ze.from(n,"utf-8"));return s}}var rve=le('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),nve=le('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Keystone device is unlocked and in the main page, then re-connect and re-approve the connection.'),ive=le("<span> (<!>/<!>)"),sve=le('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Keystone device');const ove=r=>{const[e,t]=Pe(null),[n,i]=Pe(0);async function s(){if(t(null),r.pendingMsg.type==="keystone")try{const o=[];for(const a of r.pendingMsg.messages){const c=await gh.signMessage(r.pendingMsg.mfp,r.pendingMsg.path,a);i(l=>l+1),o.push($r.marshalBase64(c))}qt.approve({id:r.pendingMsg.id,isApproved:!0,signatures:o})}catch(o){t(o instanceof Error?o.message:"Unknown error occurred.")}}return mr(()=>s()),[A(Oe,{get when(){return e()},get fallback(){return(()=>{var o=sve(),a=o.firstChild,c=a.nextSibling;return c.firstChild,Z(c,A(Oe,{get when(){return r.pendingMsg.messages.length>1},get children(){var l=ive(),u=l.firstChild,f=u.nextSibling,d=f.nextSibling,h=d.nextSibling;return h.nextSibling,Z(l,()=>n()+1,f),Z(l,()=>r.pendingMsg.messages.length,h),l}}),null),o})()},get children(){return[(()=>{var o=rve();return o.firstChild,Z(o,e,null),o})(),nve()]}}),A(_i,{onApproveClick:s,onCancelClick:()=>r.setView("message"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var ave=le('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2"><div class="flex items-center gap-2"><div class="i-tabler:info-triangle size-5"></div><div class=font-semibold>Not Supported</div></div><div class=leading-5>Signing off-chain messages is not supported by Ledger yet. Please try again with a different wallet.');const cve=r=>[ave(),A(_i,{onApproveClick:()=>{},onCancelClick:()=>r.setView("message"),cancelTitle:"Back",approveTitle:"Sign",isApproveDisabled:!0})];var lve=le('<p class="text-zinc-400 leading-5">Signing the following message will prove you have ownership of your wallet:'),uve=le('<div class="flex-1 flex items-end"><div class="flex-1 text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),fve=le('<div class="py-3 px-4 bg-zinc-900 rounded-xl leading-5 whitespace-pre-line break-words"><div>');const dve=r=>{async function e(t){if(!t||r.pendingMsg.type==="standalone"||r.pendingMsg.type==="mnemonic"||r.pendingMsg.type==="privy"||r.pendingMsg.type==="readonly")return qt.approve({id:r.pendingMsg.id,isApproved:t});r.setView(r.pendingMsg.type)}return[lve(),A(pt,{get each(){return r.pendingMsg.messages},children:t=>(()=>{var n=fve(),i=n.firstChild;return Z(i,t),n})()}),A(Oe,{get when(){return r.pendingMsg.type==="readonly"},get children(){return uve()}}),A(_i,{onApproveClick:()=>e(!0),onCancelClick:()=>e(!1),approveTitle:"Sign",get isApproveDisabled(){return r.pendingMsg.type==="readonly"}})]};var hve=le('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2"><div class="flex items-center gap-2"><div class="i-tabler:info-triangle size-5"></div><div class=font-semibold>Not Supported</div></div><div class=leading-5>Signing off-chain messages is not supported by Trezor yet. Please try again with a different wallet.');const pve=r=>[hve(),A(_i,{onApproveClick:()=>{},onCancelClick:()=>r.setView("message"),cancelTitle:"Back",approveTitle:"Sign",isApproveDisabled:!0})];var gve=le('<div class="flex-1 p-4 space-y-4 flex flex-col">');const mve=()=>{const r=aH(),[e]=KT(r,i=>qt.getPendingMessage({id:i})),[t,n]=Pe("message");return(()=>{var i=gve();return Z(i,A(x4,{title:"Sign Message"}),null),Z(i,A(Oe,{get when(){return e.latest},children:s=>A(Kt,{get children(){return[A(Re,{get when(){return t()==="message"},get children(){return A(dve,{setView:n,get pendingMsg(){return s()}})}}),A(Re,{get when(){return t()==="ledger"},get children(){return A(cve,{setView:n,get pendingMsg(){return s()}})}}),A(Re,{get when(){return t()==="keystone"},get children(){return A(ove,{setView:n,get pendingMsg(){return s()}})}}),A(Re,{get when(){return t()==="trezor"},get children(){return A(pve,{setView:n})}})]}})}),null),i})()};var yve=le('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),vve=le('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Keystone device is unlocked and in the main page, then re-connect and re-approve the connection.'),bve=le("<span> (<!>/<!>)"),wve=le('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Keystone device');const xve=r=>{const[e,t]=Pe(null),[n,i]=Pe(0);async function s(){if(t(null),r.pendingTx.type==="keystone")try{i(0);const o=[];for(const a of r.pendingTx.transactions){i(l=>l+1);const c=await gh.signTransaction(r.pendingTx.mfp,r.pendingTx.path,r.pendingTx.signerAddress,a);o.push($r.marshalBase64(c))}qt.approve({id:r.pendingTx.id,isApproved:!0,signatures:o})}catch(o){t(o instanceof Error?o.message:"Unknown error occurred.")}}return mr(()=>s()),[A(Oe,{get when(){return e()},get fallback(){return(()=>{var o=wve(),a=o.firstChild,c=a.nextSibling;return c.firstChild,Z(c,A(Oe,{get when(){return r.pendingTx.transactions.length>1},get children(){var l=bve(),u=l.firstChild,f=u.nextSibling,d=f.nextSibling,h=d.nextSibling;return h.nextSibling,Z(l,n,f),Z(l,()=>r.pendingTx.transactions.length,h),l}}),null),o})()},get children(){return[(()=>{var o=yve();return o.firstChild,Z(o,e,null),o})(),vve()]}}),A(_i,{onApproveClick:s,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var xM={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _M;function _ve(){if(_M)return xM;_M=1;var r;return function(e){(function(t){var n=typeof globalThis=="object"?globalThis:typeof Ii=="object"?Ii:typeof self=="object"?self:typeof this=="object"?this:c(),i=s(e);typeof n.Reflect<"u"&&(i=s(n.Reflect,i)),t(i,n),typeof n.Reflect>"u"&&(n.Reflect=e);function s(l,u){return function(f,d){Object.defineProperty(l,f,{configurable:!0,writable:!0,value:d}),u&&u(f,d)}}function o(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return o()||a()}})(function(t,n){var i=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",o=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,f={create:c?function(){return N(Object.create(null))}:l?function(){return N({__proto__:null})}:function(){return N({})},has:u?function($,ne){return i.call($,ne)}:function($,ne){return ne in $},get:u?function($,ne){return i.call($,ne)?$[ne]:void 0}:function($,ne){return $[ne]}},d=Object.getPrototypeOf(Function),h=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:H(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ee(),p=typeof WeakMap=="function"?WeakMap:W(),m=s?Symbol.for("@reflect-metadata:registry"):void 0,y=xe(),v=Ae(y);function w($,ne,pe,be){if(R(pe)){if(!J($))throw new TypeError;if(!ue(ne))throw new TypeError;return D($,ne)}else{if(!J($))throw new TypeError;if(!j(ne))throw new TypeError;if(!j(be)&&!R(be)&&!M(be))throw new TypeError;return M(be)&&(be=void 0),pe=q(pe),b($,ne,pe,be)}}t("decorate",w);function _($,ne){function pe(be,fe){if(!j(be))throw new TypeError;if(!R(fe)&&!we(fe))throw new TypeError;G($,ne,be,fe)}return pe}t("metadata",_);function x($,ne,pe,be){if(!j(pe))throw new TypeError;return R(be)||(be=q(be)),G($,ne,pe,be)}t("defineMetadata",x);function E($,ne,pe){if(!j(ne))throw new TypeError;return R(pe)||(pe=q(pe)),I($,ne,pe)}t("hasMetadata",E);function S($,ne,pe){if(!j(ne))throw new TypeError;return R(pe)||(pe=q(pe)),B($,ne,pe)}t("hasOwnMetadata",S);function T($,ne,pe){if(!j(ne))throw new TypeError;return R(pe)||(pe=q(pe)),F($,ne,pe)}t("getMetadata",T);function C($,ne,pe){if(!j(ne))throw new TypeError;return R(pe)||(pe=q(pe)),z($,ne,pe)}t("getOwnMetadata",C);function P($,ne){if(!j($))throw new TypeError;return R(ne)||(ne=q(ne)),Q($,ne)}t("getMetadataKeys",P);function V($,ne){if(!j($))throw new TypeError;return R(ne)||(ne=q(ne)),X($,ne)}t("getOwnMetadataKeys",V);function L($,ne,pe){if(!j(ne))throw new TypeError;if(R(pe)||(pe=q(pe)),!j(ne))throw new TypeError;R(pe)||(pe=q(pe));var be=oe(ne,pe,!1);return R(be)?!1:be.OrdinaryDeleteMetadata($,ne,pe)}t("deleteMetadata",L);function D($,ne){for(var pe=$.length-1;pe>=0;--pe){var be=$[pe],fe=be(ne);if(!R(fe)&&!M(fe)){if(!ue(fe))throw new TypeError;ne=fe}}return ne}function b($,ne,pe,be){for(var fe=$.length-1;fe>=0;--fe){var Ee=$[fe],Fe=Ee(ne,pe,be);if(!R(Fe)&&!M(Fe)){if(!j(Fe))throw new TypeError;be=Fe}}return be}function I($,ne,pe){var be=B($,ne,pe);if(be)return!0;var fe=Ce(ne);return M(fe)?!1:I($,fe,pe)}function B($,ne,pe){var be=oe(ne,pe,!1);return R(be)?!1:he(be.OrdinaryHasOwnMetadata($,ne,pe))}function F($,ne,pe){var be=B($,ne,pe);if(be)return z($,ne,pe);var fe=Ce(ne);if(!M(fe))return F($,fe,pe)}function z($,ne,pe){var be=oe(ne,pe,!1);if(!R(be))return be.OrdinaryGetOwnMetadata($,ne,pe)}function G($,ne,pe,be){var fe=oe(pe,be,!0);fe.OrdinaryDefineOwnMetadata($,ne,pe,be)}function Q($,ne){var pe=X($,ne),be=Ce($);if(be===null)return pe;var fe=Q(be,ne);if(fe.length<=0)return pe;if(pe.length<=0)return fe;for(var Ee=new g,Fe=[],He=0,Ve=pe;He<Ve.length;He++){var De=Ve[He],nt=Ee.has(De);nt||(Ee.add(De),Fe.push(De))}for(var vt=0,dt=fe;vt<dt.length;vt++){var De=dt[vt],nt=Ee.has(De);nt||(Ee.add(De),Fe.push(De))}return Fe}function X($,ne){var pe=oe($,ne,!1);return pe?pe.OrdinaryOwnMetadataKeys($,ne):[]}function O($){if($===null)return 1;switch(typeof $){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return $===null?1:6;default:return 6}}function R($){return $===void 0}function M($){return $===null}function k($){return typeof $=="symbol"}function j($){return typeof $=="object"?$!==null:typeof $=="function"}function te($,ne){switch(O($)){case 0:return $;case 1:return $;case 2:return $;case 3:return $;case 4:return $;case 5:return $}var pe="string",be=U($,o);if(be!==void 0){var fe=be.call($,pe);if(j(fe))throw new TypeError;return fe}return ae($)}function ae($,ne){var pe,be,fe;{var Ee=$.toString;if(de(Ee)){var be=Ee.call($);if(!j(be))return be}var pe=$.valueOf;if(de(pe)){var be=pe.call($);if(!j(be))return be}}throw new TypeError}function he($){return!!$}function re($){return""+$}function q($){var ne=te($);return k(ne)?ne:re(ne)}function J($){return Array.isArray?Array.isArray($):$ instanceof Object?$ instanceof Array:Object.prototype.toString.call($)==="[object Array]"}function de($){return typeof $=="function"}function ue($){return typeof $=="function"}function we($){switch(O($)){case 3:return!0;case 4:return!0;default:return!1}}function se($,ne){return $===ne||$!==$&&ne!==ne}function U($,ne){var pe=$[ne];if(pe!=null){if(!de(pe))throw new TypeError;return pe}}function K($){var ne=U($,a);if(!de(ne))throw new TypeError;var pe=ne.call($);if(!j(pe))throw new TypeError;return pe}function ie($){return $.value}function ge($){var ne=$.next();return ne.done?!1:ne}function _e($){var ne=$.return;ne&&ne.call($)}function Ce($){var ne=Object.getPrototypeOf($);if(typeof $!="function"||$===d||ne!==d)return ne;var pe=$.prototype,be=pe&&Object.getPrototypeOf(pe);if(be==null||be===Object.prototype)return ne;var fe=be.constructor;return typeof fe!="function"||fe===$?ne:fe}function Ne(){var $;!R(m)&&typeof n.Reflect<"u"&&!(m in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&($=Me(n.Reflect));var ne,pe,be,fe=new p,Ee={registerProvider:Fe,getProvider:Ve,setProvider:nt};return Ee;function Fe(vt){if(!Object.isExtensible(Ee))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case $===vt:break;case R(ne):ne=vt;break;case ne===vt:break;case R(pe):pe=vt;break;case pe===vt:break;default:be===void 0&&(be=new g),be.add(vt);break}}function He(vt,dt){if(!R(ne)){if(ne.isProviderFor(vt,dt))return ne;if(!R(pe)){if(pe.isProviderFor(vt,dt))return ne;if(!R(be))for(var Ct=K(be);;){var Cr=ge(Ct);if(!Cr)return;var or=ie(Cr);if(or.isProviderFor(vt,dt))return _e(Ct),or}}}if(!R($)&&$.isProviderFor(vt,dt))return $}function Ve(vt,dt){var Ct=fe.get(vt),Cr;return R(Ct)||(Cr=Ct.get(dt)),R(Cr)&&(Cr=He(vt,dt),R(Cr)||(R(Ct)&&(Ct=new h,fe.set(vt,Ct)),Ct.set(dt,Cr))),Cr}function De(vt){if(R(vt))throw new TypeError;return ne===vt||pe===vt||!R(be)&&be.has(vt)}function nt(vt,dt,Ct){if(!De(Ct))throw new Error("Metadata provider not registered.");var Cr=Ve(vt,dt);if(Cr!==Ct){if(!R(Cr))return!1;var or=fe.get(vt);R(or)&&(or=new h,fe.set(vt,or)),or.set(dt,Ct)}return!0}}function xe(){var $;return!R(m)&&j(n.Reflect)&&Object.isExtensible(n.Reflect)&&($=n.Reflect[m]),R($)&&($=Ne()),!R(m)&&j(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:$}),$}function Ae($){var ne=new p,pe={isProviderFor:function(De,nt){var vt=ne.get(De);return R(vt)?!1:vt.has(nt)},OrdinaryDefineOwnMetadata:Fe,OrdinaryHasOwnMetadata:fe,OrdinaryGetOwnMetadata:Ee,OrdinaryOwnMetadataKeys:He,OrdinaryDeleteMetadata:Ve};return y.registerProvider(pe),pe;function be(De,nt,vt){var dt=ne.get(De),Ct=!1;if(R(dt)){if(!vt)return;dt=new h,ne.set(De,dt),Ct=!0}var Cr=dt.get(nt);if(R(Cr)){if(!vt)return;if(Cr=new h,dt.set(nt,Cr),!$.setProvider(De,nt,pe))throw dt.delete(nt),Ct&&ne.delete(De),new Error("Wrong provider for target.")}return Cr}function fe(De,nt,vt){var dt=be(nt,vt,!1);return R(dt)?!1:he(dt.has(De))}function Ee(De,nt,vt){var dt=be(nt,vt,!1);if(!R(dt))return dt.get(De)}function Fe(De,nt,vt,dt){var Ct=be(vt,dt,!0);Ct.set(De,nt)}function He(De,nt){var vt=[],dt=be(De,nt,!1);if(R(dt))return vt;for(var Ct=dt.keys(),Cr=K(Ct),or=0;;){var fr=ge(Cr);if(!fr)return vt.length=or,vt;var Ts=ie(fr);try{vt[or]=Ts}catch(Xr){try{_e(Cr)}finally{throw Xr}}or++}}function Ve(De,nt,vt){var dt=be(nt,vt,!1);if(R(dt)||!dt.delete(De))return!1;if(dt.size===0){var Ct=ne.get(nt);R(Ct)||(Ct.delete(vt),Ct.size===0&&ne.delete(Ct))}return!0}}function Me($){var ne=$.defineMetadata,pe=$.hasOwnMetadata,be=$.getOwnMetadata,fe=$.getOwnMetadataKeys,Ee=$.deleteMetadata,Fe=new p,He={isProviderFor:function(Ve,De){var nt=Fe.get(Ve);return!R(nt)&&nt.has(De)?!0:fe(Ve,De).length?(R(nt)&&(nt=new g,Fe.set(Ve,nt)),nt.add(De),!0):!1},OrdinaryDefineOwnMetadata:ne,OrdinaryHasOwnMetadata:pe,OrdinaryGetOwnMetadata:be,OrdinaryOwnMetadataKeys:fe,OrdinaryDeleteMetadata:Ee};return He}function oe($,ne,pe){var be=y.getProvider($,ne);if(!R(be))return be;if(pe){if(y.setProvider($,ne,v))return v;throw new Error("Illegal state.")}}function H(){var $={},ne=[],pe=function(){function He(Ve,De,nt){this._index=0,this._keys=Ve,this._values=De,this._selector=nt}return He.prototype["@@iterator"]=function(){return this},He.prototype[a]=function(){return this},He.prototype.next=function(){var Ve=this._index;if(Ve>=0&&Ve<this._keys.length){var De=this._selector(this._keys[Ve],this._values[Ve]);return Ve+1>=this._keys.length?(this._index=-1,this._keys=ne,this._values=ne):this._index++,{value:De,done:!1}}return{value:void 0,done:!0}},He.prototype.throw=function(Ve){throw this._index>=0&&(this._index=-1,this._keys=ne,this._values=ne),Ve},He.prototype.return=function(Ve){return this._index>=0&&(this._index=-1,this._keys=ne,this._values=ne),{value:Ve,done:!0}},He}(),be=function(){function He(){this._keys=[],this._values=[],this._cacheKey=$,this._cacheIndex=-2}return Object.defineProperty(He.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),He.prototype.has=function(Ve){return this._find(Ve,!1)>=0},He.prototype.get=function(Ve){var De=this._find(Ve,!1);return De>=0?this._values[De]:void 0},He.prototype.set=function(Ve,De){var nt=this._find(Ve,!0);return this._values[nt]=De,this},He.prototype.delete=function(Ve){var De=this._find(Ve,!1);if(De>=0){for(var nt=this._keys.length,vt=De+1;vt<nt;vt++)this._keys[vt-1]=this._keys[vt],this._values[vt-1]=this._values[vt];return this._keys.length--,this._values.length--,se(Ve,this._cacheKey)&&(this._cacheKey=$,this._cacheIndex=-2),!0}return!1},He.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=$,this._cacheIndex=-2},He.prototype.keys=function(){return new pe(this._keys,this._values,fe)},He.prototype.values=function(){return new pe(this._keys,this._values,Ee)},He.prototype.entries=function(){return new pe(this._keys,this._values,Fe)},He.prototype["@@iterator"]=function(){return this.entries()},He.prototype[a]=function(){return this.entries()},He.prototype._find=function(Ve,De){if(!se(this._cacheKey,Ve)){this._cacheIndex=-1;for(var nt=0;nt<this._keys.length;nt++)if(se(this._keys[nt],Ve)){this._cacheIndex=nt;break}}return this._cacheIndex<0&&De&&(this._cacheIndex=this._keys.length,this._keys.push(Ve),this._values.push(void 0)),this._cacheIndex},He}();return be;function fe(He,Ve){return He}function Ee(He,Ve){return Ve}function Fe(He,Ve){return[He,Ve]}}function ee(){var $=function(){function ne(){this._map=new h}return Object.defineProperty(ne.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ne.prototype.has=function(pe){return this._map.has(pe)},ne.prototype.add=function(pe){return this._map.set(pe,pe),this},ne.prototype.delete=function(pe){return this._map.delete(pe)},ne.prototype.clear=function(){this._map.clear()},ne.prototype.keys=function(){return this._map.keys()},ne.prototype.values=function(){return this._map.keys()},ne.prototype.entries=function(){return this._map.entries()},ne.prototype["@@iterator"]=function(){return this.keys()},ne.prototype[a]=function(){return this.keys()},ne}();return $}function W(){var $=16,ne=f.create(),pe=be();return function(){function Ve(){this._key=be()}return Ve.prototype.has=function(De){var nt=fe(De,!1);return nt!==void 0?f.has(nt,this._key):!1},Ve.prototype.get=function(De){var nt=fe(De,!1);return nt!==void 0?f.get(nt,this._key):void 0},Ve.prototype.set=function(De,nt){var vt=fe(De,!0);return vt[this._key]=nt,this},Ve.prototype.delete=function(De){var nt=fe(De,!1);return nt!==void 0?delete nt[this._key]:!1},Ve.prototype.clear=function(){this._key=be()},Ve}();function be(){var Ve;do Ve="@@WeakMap@@"+He();while(f.has(ne,Ve));return ne[Ve]=!0,Ve}function fe(Ve,De){if(!i.call(Ve,pe)){if(!De)return;Object.defineProperty(Ve,pe,{value:f.create()})}return Ve[pe]}function Ee(Ve,De){for(var nt=0;nt<De;++nt)Ve[nt]=Math.random()*255|0;return Ve}function Fe(Ve){if(typeof Uint8Array=="function"){var De=new Uint8Array(Ve);return typeof crypto<"u"?crypto.getRandomValues(De):typeof msCrypto<"u"?msCrypto.getRandomValues(De):Ee(De,Ve),De}return Ee(new Array(Ve),Ve)}function He(){var Ve=Fe($);Ve[6]=Ve[6]&79|64,Ve[8]=Ve[8]&191|128;for(var De="",nt=0;nt<$;++nt){var vt=Ve[nt];(nt===4||nt===6||nt===8)&&(De+="-"),vt<16&&(De+="0"),De+=vt.toString(16).toLowerCase()}return De}}function N($){return $.__=void 0,delete $.__,$}})}(r||(r={})),xM}_ve();let Sve=class{cla;ins;p1;p2;data;constructor(e,t,n,i,s){this.cla=e,this.ins=t,this.p1=n,this.p2=i,this.data=s??new Uint8Array}getRawApdu(){const e=Uint8Array.from([this.cla,this.ins,this.p1,this.p2,this.data.length]),t=new Uint8Array(e.length+this.data.length);return t.set(e,0),this.data.length>0&&t.set(this.data,e.length),t}};function Kn(r){return typeof r=="string"&&/^0x[0-9a-fA-F]*$/.test(r)}function Ab(r){if(r.startsWith("0x")&&(r=r.slice(2)),r.length===0)return new Uint8Array;if(r.length%2!==0&&(r="0"+r),/^[0-9a-fA-F]*$/.test(r)===!1)return null;const e=r.match(/.{1,2}/g)?.map(t=>parseInt(t,16));return!e||e.some(isNaN)?null:new Uint8Array(e)}function wu(r,e=!0){return`${e?"0x":""}${Array.from(r,t=>t.toString(16).padStart(2,"0")).join("")}`}let $2=class{_tag="ValueOverflow";originalError;message;constructor(e,t=hg){this.message=`Value overflow for ${e}, max is ${t}`}},Oy=class{_tag="DataOverflow";message;originalError;constructor(e,t=0){this.message=t===0?`this.data is already full (value: ${e})`:`this.data will overflow with "${e}", remaining bytes: ${t}`}},SM=class{_tag="HexaString";message;originalError;constructor(e){this.message=`Invalid encoded hexa string or length is null: ${e}`}};const Eve=4294967295;let Jg=class{constructor(e=Eve){this.maxPayloadSize=e}data=new Uint8Array;errors=[];build=()=>this.data;tryBuild=()=>this.hasErrors()?void 0:this.data;add8BitUIntToData=e=>this.addNumberToData(e,8n,!1,!1);add16BitUIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!1,t);add32BitUIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!1,t);add64BitUIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!1,t);add128BitUIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!1,t);add256BitUIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!1,t);add16BitIntToData=(e,t=!0)=>this.addNumberToData(e,16n,!0,t);add32BitIntToData=(e,t=!0)=>this.addNumberToData(e,32n,!0,t);add64BitIntToData=(e,t=!0)=>this.addNumberToData(e,64n,!0,t);add128BitIntToData=(e,t=!0)=>this.addNumberToData(e,128n,!0,t);add256BitIntToData=(e,t=!0)=>this.addNumberToData(e,256n,!0,t);addBufferToData=e=>this.hasEnoughLengthRemaining(e)?(this.data=Uint8Array.from([...this.data,...e]),this):(this.errors.push(new Oy(e.toString())),this);addHexaStringToData=e=>{const t=Ab(e);return t===null||t.length===0?(this.errors.push(new SM(e)),this):(this.addBufferToData(t),this)};addAsciiStringToData=e=>{const t=new TextEncoder().encode(e);return this.addBufferToData(t),this};encodeInLVFromHexa=e=>{const t=Ab(e);return t===null||t.length===0?(this.errors.push(new SM(e)),this):this.hasEnoughLengthRemaining(t,!0)?(this.add8BitUIntToData(t.length),this.addBufferToData(t),this):(this.errors.push(new Oy(e)),this)};encodeInLVFromBuffer=e=>this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addBufferToData(e),this):(this.errors.push(new Oy(e.toString())),this);encodeInLVFromAscii=e=>this.hasEnoughLengthRemaining(e,!0)?(this.add8BitUIntToData(e.length),this.addAsciiStringToData(e),this):(this.errors.push(new Oy(e)),this);encodeInTLVFromAscii=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromAscii(t));encodeInTLVFromHexa=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromHexa(t));encodeInTLVFromBuffer=(e,t)=>(this.add8BitUIntToData(e),this.encodeInLVFromBuffer(t));encodeInTLVFromUInt8=(e,t)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(1),this.add8BitUIntToData(t));encodeInTLVFromUInt16=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(2),this.add16BitUIntToData(t,n));encodeInTLVFromUInt32=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(4),this.add32BitUIntToData(t,n));encodeInTLVFromUInt64=(e,t,n=!0)=>(this.add8BitUIntToData(e),this.add8BitUIntToData(8),this.add64BitUIntToData(t,n));getAvailablePayloadLength=()=>this.maxPayloadSize-this.data.length;getErrors=()=>this.errors;hasErrors=()=>this.errors.length!==0;hasEnoughLengthRemaining=(e,t=!1)=>this.data.length+e.length+(t?1:0)<=this.maxPayloadSize;addNumberToData(e,t,n,i){let s=this.checkBoundsAndConvert(e,t,n);if(s===void 0)return this;const o=Number(t)/8,a=new Uint8Array(o);if(i)for(let c=o-1;c>=0;c--)a[c]=Number(s&0xffn),s>>=8n;else for(let c=0;c<o;c++)a[c]=Number(s&0xffn),s>>=8n;return this.addBufferToData(a)}checkBoundsAndConvert(e,t,n){if(typeof e=="number"){if(!Number.isInteger(e)||e>Number.MAX_SAFE_INTEGER){this.errors.push(new $2(e.toString()));return}e=BigInt(e)}if(n){const i=1n<<t-1n;if(e>=i||e<-i){this.errors.push(new $2(e.toString(),i-1n));return}if(e<0n){const s=(1n<<t)-1n;e=-e,e=(~e&s)+1n}}else{const i=1n<<t;if(e<0||e>=i){this.errors.push(new $2(e.toString(),i-1n));return}}return e}};const hg=255;let qa=class{_ins;_cla;_p1;p2;data=new Jg(hg);constructor({ins:e,cla:t,p1:n,p2:i}){this._cla=t&255,this._ins=e&255,this._p1=n&255,this.p2=i&255}build=()=>new Sve(this._cla,this._ins,this._p1,this.p2,this.data.build());add8BitUIntToData=e=>(this.data.add8BitUIntToData(e),this);add16BitUIntToData=e=>(this.data.add16BitUIntToData(e),this);add32BitUIntToData=e=>(this.data.add32BitUIntToData(e),this);addBufferToData=e=>(this.data.addBufferToData(e),this);addHexaStringToData=e=>(this.data.addHexaStringToData(e),this);addAsciiStringToData=e=>(this.data.addAsciiStringToData(e),this);encodeInLVFromHexa=e=>(this.data.encodeInLVFromHexa(e),this);encodeInLVFromBuffer=e=>(this.data.encodeInLVFromBuffer(e),this);encodeInLVFromAscii=e=>(this.data.encodeInLVFromAscii(e),this);getAvailablePayloadLength=()=>this.data.getAvailablePayloadLength();getErrors=()=>this.data.getErrors()},Ave=class{constructor(e){this.buffer=e}index=0;testMinimalLength(e){return e<=this.buffer.length-this.index}extract8BitUInt(){if(!this.outOfRange(1))return this.buffer[this.index++]}extract16BitUInt(e=!0){const t=this.extractNumber(16n,!1,e);return t===void 0?void 0:Number(t)}extract16BitInt(e=!0){const t=this.extractNumber(16n,!0,e);return t===void 0?void 0:Number(t)}extract32BitUInt(e=!0){const t=this.extractNumber(32n,!1,e);return t===void 0?void 0:Number(t)}extract32BitInt(e=!0){const t=this.extractNumber(32n,!0,e);return t===void 0?void 0:Number(t)}extract64BitUInt(e=!0){return this.extractNumber(64n,!1,e)}extract64BitInt(e=!0){return this.extractNumber(64n,!0,e)}extract128BitUInt(e=!0){return this.extractNumber(128n,!1,e)}extract128BitInt(e=!0){return this.extractNumber(128n,!0,e)}extract256BitUInt(e=!0){return this.extractNumber(256n,!1,e)}extract256BitInt(e=!0){return this.extractNumber(256n,!0,e)}extractFieldByLength(e){if(this.outOfRange(e))return;if(e===0)return new Uint8Array;const t=this.buffer.slice(this.index,this.index+e);return this.index+=e,t}extractFieldLVEncoded(){const e=this.extract8BitUInt();if(e===void 0)return;if(e===0)return new Uint8Array;const t=this.extractFieldByLength(e);return t===void 0&&this.index--,t}extractFieldTLVEncoded(){if(this.outOfRange(2))return;const e=this.index,t=this.extract8BitUInt(),n=this.extractFieldLVEncoded();if(t===void 0||n===void 0){this.index--;return}const i=this.index;return{tag:t,value:n,tlv:this.buffer.slice(e,i)}}encodeToHexaString(e,t=!1){if(e===void 0||e.length===0)return"";const n=wu(e);return t?n:n.slice(2)}encodeToString(e){let t="",n=0;if(!e)return t;for(;n<=e.length;){const i=e[n];i&&(t+=String.fromCharCode(i)),n++}return t}getCurrentIndex(){return this.index}resetIndex(){this.index=0}getUnparsedRemainingLength(){return this.buffer.length-this.index}outOfRange(e){return this.index+e>this.buffer.length}extractNumber(e,t,n){const i=Number(e)/8;if(this.outOfRange(i))return;let s=0n;if(n)for(let o=0;o<i;o++)s=s<<8n|BigInt(this.buffer[o+this.index]);else for(let o=i-1;o>=0;o--)s=s<<8n|BigInt(this.buffer[o+this.index]);if(t){const o=1n<<e-1n;s&o&&(s-=o<<1n)}return this.index+=i,s}},Oc=class{parser;constructor(e){this.parser=new Ave(e.data)}testMinimalLength=e=>this.parser.testMinimalLength(e);extract8BitUInt=()=>this.parser.extract8BitUInt();extract16BitUInt=()=>this.parser.extract16BitUInt();extract32BitUInt=()=>this.parser.extract32BitUInt();extractFieldByLength=e=>this.parser.extractFieldByLength(e);extractFieldLVEncoded=()=>this.parser.extractFieldLVEncoded();extractFieldTLVEncoded=()=>this.parser.extractFieldTLVEncoded();encodeToHexaString(e,t=!1){return t?this.parser.encodeToHexaString(e,!0):this.parser.encodeToHexaString(e,!1)}encodeToString=e=>this.parser.encodeToString(e);getUnparsedRemainingLength=()=>this.parser.getUnparsedRemainingLength()},hs=class{_tag="InvalidStatusWordError";originalError;constructor(e){this.originalError=new Error(e??"Invalid status word.")}},Ive=class{_tag="InvalidResponseFormatError";originalError;constructor(e){this.originalError=new Error(e??"Invalid response format.")}};var Cve=(r=>(r.Error="ERROR",r.Success="SUCCESS",r))(Cve||{});function Br({data:r,error:e}){return e?{status:"ERROR",error:e}:{status:"SUCCESS",data:r}}function Es(r){return r.status==="SUCCESS"}let Fu=class oh{static isValidStatusCode(e){return e.length===2}static isSuccessResponse({statusCode:e}){return oh.isValidStatusCode(e)?e[0]===144&&e[1]===0:!1}static isLockedDeviceResponse({statusCode:e}){return oh.isValidStatusCode(e)?e[0]===85&&e[1]===21||e[0]===105&&e[1]===130||e[0]===83&&e[1]===3:!1}static isRefusedByUser({statusCode:e}){return oh.isValidStatusCode(e)?e[0]===85&&e[1]===1||e[0]===105&&e[1]===133:!1}static isAppAlreadyInstalled({statusCode:e}){return oh.isValidStatusCode(e)?e[0]===106&&e[1]===128||e[0]===106&&e[1]===129||e[0]===106&&e[1]===142||e[0]===106&&e[1]===143:!1}static isOutOfMemory({statusCode:e}){return oh.isValidStatusCode(e)?e[0]===106&&e[1]===132||e[0]===106&&e[1]===133||e[0]===81&&e[1]===2||e[0]===81&&e[1]===3:!1}static isApduThatTriggersDisconnection(e){const t=new Map;return t.set("openApp",new Uint8Array([224,216,0,0])),t.set("closeApp",new Uint8Array([176,167,0,0])),Array.from(t.values()).some(n=>{for(let i=0;i<4;i++)if(n[i]!==e[i])return!1;return!0})}},F4=class{_tag;originalError;errorCode;message;constructor({tag:e,errorCode:t,originalError:n,message:i}){this._tag=e,this.originalError=n,this.errorCode=t,this.message=i??"An error occured during device exchange."}},U4=class{_tag="UnknownDeviceExchangeError";originalError;message;constructor(e){this.originalError=e,this.message="Unexpected device exchange error happened."}};const z4=(r,e)=>Object.keys(e).includes(r);let Tve=class extends F4{constructor(e){super({tag:"GlobalCommandError",...e})}};const EM={5515:{message:"Device is locked.",tag:"DeviceLockedError"},5501:{message:"Action refused on device.",tag:"ActionRefusedError"},5502:{message:"Pin is not set",tag:"PinNotSetError"},5223:{message:"Device internal error",tag:"DeviceInternalError"},"6e00":{message:"CLA not supported",tag:"DeviceInternalError"},"6d00":{message:"INS not supported",tag:"DeviceInternalError"}};let Bm=class{static handle(e){const t=new Oc(e).encodeToHexaString(e.statusCode);return z4(t,EM)?new Tve({...EM[t],errorCode:t}):new U4({message:"UnknownError",errorCode:t})}},Rve=class{name="closeApp";args=void 0;triggersDisconnection=!0;getApdu(){const e={cla:176,ins:167,p1:0,p2:0};return new qa(e).build()}parseResponse(e){return Fu.isSuccessResponse(e)?Br({data:void 0}):Br({error:Bm.handle(e)})}},Xg=class{name="getAppAndVersion";args=void 0;getApdu(){const e={cla:176,ins:1,p1:0,p2:0};return new qa(e).build()}parseResponse(e){if(!Fu.isSuccessResponse(e))return Br({error:Bm.handle(e)});const t=new Oc(e);if(t.extract8BitUInt()!==1)return Br({error:new Ive("getAppAndVersion: format not supported")});const n=t.encodeToString(t.extractFieldLVEncoded()),i=t.encodeToString(t.extractFieldLVEncoded());if(t.getUnparsedRemainingLength()===0)return Br({data:{name:n,version:i}});const s=t.extractFieldLVEncoded();return Br({data:{name:n,version:i,flags:s}})}};var kve=(r=>(r[r.BATTERY_PERCENTAGE=0]="BATTERY_PERCENTAGE",r[r.BATTERY_VOLTAGE=1]="BATTERY_VOLTAGE",r[r.BATTERY_TEMPERATURE=2]="BATTERY_TEMPERATURE",r[r.BATTERY_CURRENT=3]="BATTERY_CURRENT",r[r.BATTERY_FLAGS=4]="BATTERY_FLAGS",r))(kve||{}),Ove=(r=>(r[r.NONE=0]="NONE",r[r.USB=1]="USB",r[r.QI=2]="QI",r))(Ove||{}),Py={exports:{}},D2,AM;function uw(){if(AM)return D2;AM=1;const r="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=e-6;return D2={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},D2}var M2,IM;function fw(){if(IM)return M2;IM=1;var r={};return M2=typeof Yt=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},M2}var CM;function Nm(){return CM||(CM=1,function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=uw(),s=fw();e=r.exports={};const o=e.re=[],a=e.safeRe=[],c=e.src=[],l=e.safeSrc=[],u=e.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,n]],g=m=>{for(const[y,v]of h)m=m.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return m},p=(m,y,v)=>{const w=g(y),_=f++;s(m,_,y),u[m]=_,c[_]=y,l[_]=w,o[_]=new RegExp(y,v?"g":void 0),a[_]=new RegExp(w,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),p("FULL",`^${c[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),p("LOOSE",`^${c[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),p("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),p("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[u.COERCE],!0),p("COERCERTLFULL",c[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Py,Py.exports)),Py.exports}var B2,TM;function q4(){if(TM)return B2;TM=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return B2=n=>n?typeof n!="object"?r:n:e,B2}var N2,RM;function AW(){if(RM)return N2;RM=1;const r=/^[0-9]+$/,e=(n,i)=>{const s=r.test(n),o=r.test(i);return s&&o&&(n=+n,i=+i),n===i?0:s&&!o?-1:o&&!s?1:n<i?-1:1};return N2={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},N2}var L2,kM;function js(){if(kM)return L2;kM=1;const r=fw(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=uw(),{safeRe:n,t:i}=Nm(),s=q4(),{compareIdentifiers:o}=AW();class a{constructor(l,u){if(u=s(u),l instanceof a){if(l.loose===!!u.loose&&l.includePrerelease===!!u.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",l,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const f=l.trim().match(u.loose?n[i.LOOSE]:n[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<t)return h}return d}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(r("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let u=0;do{const f=this.prerelease[u],d=l.prerelease[u];if(r("prerelease compare",u,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return o(f,d)}while(++u)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let u=0;do{const f=this.build[u],d=l.build[u];if(r("build compare",u,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return o(f,d)}while(++u)}inc(l,u,f){if(l.startsWith("pre")){if(!u&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const d=`-${u}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!d||d[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,f),this.inc("pre",u,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,f),this.inc("pre",u,f);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(f)?1:0;if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(u===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(u){let h=[u,d];f===!1&&(h=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return L2=a,L2}var F2,OM;function $p(){if(OM)return F2;OM=1;const r=js();return F2=(t,n,i=!1)=>{if(t instanceof r)return t;try{return new r(t,n)}catch(s){if(!i)return null;throw s}},F2}var U2,PM;function Pve(){if(PM)return U2;PM=1;const r=$p();return U2=(t,n)=>{const i=r(t,n);return i?i.version:null},U2}var z2,$M;function $ve(){if($M)return z2;$M=1;const r=$p();return z2=(t,n)=>{const i=r(t.trim().replace(/^[=v]+/,""),n);return i?i.version:null},z2}var q2,DM;function Dve(){if(DM)return q2;DM=1;const r=js();return q2=(t,n,i,s,o)=>{typeof i=="string"&&(o=s,s=i,i=void 0);try{return new r(t instanceof r?t.version:t,i).inc(n,s,o).version}catch{return null}},q2}var j2,MM;function Mve(){if(MM)return j2;MM=1;const r=$p();return j2=(t,n)=>{const i=r(t,null,!0),s=r(n,null,!0),o=i.compare(s);if(o===0)return null;const a=o>0,c=a?i:s,l=a?s:i,u=!!c.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(l.compareMain(c)===0)return l.minor&&!l.patch?"minor":"patch"}const d=u?"pre":"";return i.major!==s.major?d+"major":i.minor!==s.minor?d+"minor":i.patch!==s.patch?d+"patch":"prerelease"},j2}var V2,BM;function Bve(){if(BM)return V2;BM=1;const r=js();return V2=(t,n)=>new r(t,n).major,V2}var K2,NM;function Nve(){if(NM)return K2;NM=1;const r=js();return K2=(t,n)=>new r(t,n).minor,K2}var H2,LM;function Lve(){if(LM)return H2;LM=1;const r=js();return H2=(t,n)=>new r(t,n).patch,H2}var W2,FM;function Fve(){if(FM)return W2;FM=1;const r=$p();return W2=(t,n)=>{const i=r(t,n);return i&&i.prerelease.length?i.prerelease:null},W2}var G2,UM;function ja(){if(UM)return G2;UM=1;const r=js();return G2=(t,n,i)=>new r(t,i).compare(new r(n,i)),G2}var Y2,zM;function Uve(){if(zM)return Y2;zM=1;const r=ja();return Y2=(t,n,i)=>r(n,t,i),Y2}var J2,qM;function zve(){if(qM)return J2;qM=1;const r=ja();return J2=(t,n)=>r(t,n,!0),J2}var X2,jM;function j4(){if(jM)return X2;jM=1;const r=js();return X2=(t,n,i)=>{const s=new r(t,i),o=new r(n,i);return s.compare(o)||s.compareBuild(o)},X2}var Z2,VM;function qve(){if(VM)return Z2;VM=1;const r=j4();return Z2=(t,n)=>t.sort((i,s)=>r(i,s,n)),Z2}var Q2,KM;function jve(){if(KM)return Q2;KM=1;const r=j4();return Q2=(t,n)=>t.sort((i,s)=>r(s,i,n)),Q2}var eE,HM;function dw(){if(HM)return eE;HM=1;const r=ja();return eE=(t,n,i)=>r(t,n,i)>0,eE}var tE,WM;function V4(){if(WM)return tE;WM=1;const r=ja();return tE=(t,n,i)=>r(t,n,i)<0,tE}var rE,GM;function IW(){if(GM)return rE;GM=1;const r=ja();return rE=(t,n,i)=>r(t,n,i)===0,rE}var nE,YM;function CW(){if(YM)return nE;YM=1;const r=ja();return nE=(t,n,i)=>r(t,n,i)!==0,nE}var iE,JM;function K4(){if(JM)return iE;JM=1;const r=ja();return iE=(t,n,i)=>r(t,n,i)>=0,iE}var sE,XM;function H4(){if(XM)return sE;XM=1;const r=ja();return sE=(t,n,i)=>r(t,n,i)<=0,sE}var oE,ZM;function TW(){if(ZM)return oE;ZM=1;const r=IW(),e=CW(),t=dw(),n=K4(),i=V4(),s=H4();return oE=(a,c,l,u)=>{switch(c){case"===":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a===l;case"!==":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a!==l;case"":case"=":case"==":return r(a,l,u);case"!=":return e(a,l,u);case">":return t(a,l,u);case">=":return n(a,l,u);case"<":return i(a,l,u);case"<=":return s(a,l,u);default:throw new TypeError(`Invalid operator: ${c}`)}},oE}var aE,QM;function Vve(){if(QM)return aE;QM=1;const r=js(),e=$p(),{safeRe:t,t:n}=Nm();return aE=(s,o)=>{if(s instanceof r)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?t[n.COERCEFULL]:t[n.COERCE]);else{const h=o.includePrerelease?t[n.COERCERTLFULL]:t[n.COERCERTL];let g;for(;(g=h.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||g.index+g[0].length!==a.index+a[0].length)&&(a=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(a===null)return null;const c=a[2],l=a[3]||"0",u=a[4]||"0",f=o.includePrerelease&&a[5]?`-${a[5]}`:"",d=o.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${c}.${l}.${u}${f}${d}`,o)},aE}var cE,eB;function Kve(){if(eB)return cE;eB=1;class r{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,n)}return this}}return cE=r,cE}var lE,tB;function Va(){if(tB)return lE;tB=1;const r=/\s+/g;class e{constructor(I,B){if(B=i(B),I instanceof e)return I.loose===!!B.loose&&I.includePrerelease===!!B.includePrerelease?I:new e(I.raw,B);if(I instanceof s)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=I.trim().replace(r," "),this.set=this.raw.split("||").map(F=>this.parseRange(F.trim())).filter(F=>F.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const F=this.set[0];if(this.set=this.set.filter(z=>!p(z[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){for(const z of this.set)if(z.length===1&&m(z[0])){this.set=[z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const B=this.set[I];for(let F=0;F<B.length;F++)F>0&&(this.formatted+=" "),this.formatted+=B[F].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const F=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+I,z=n.get(F);if(z)return z;const G=this.options.loose,Q=G?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];I=I.replace(Q,L(this.options.includePrerelease)),o("hyphen replace",I),I=I.replace(c[l.COMPARATORTRIM],u),o("comparator trim",I),I=I.replace(c[l.TILDETRIM],f),o("tilde trim",I),I=I.replace(c[l.CARETTRIM],d),o("caret trim",I);let X=I.split(" ").map(k=>v(k,this.options)).join(" ").split(/\s+/).map(k=>V(k,this.options));G&&(X=X.filter(k=>(o("loose invalid filter",k,this.options),!!k.match(c[l.COMPARATORLOOSE])))),o("range list",X);const O=new Map,R=X.map(k=>new s(k,this.options));for(const k of R){if(p(k))return[k];O.set(k.value,k)}O.size>1&&O.has("")&&O.delete("");const M=[...O.values()];return n.set(F,M),M}intersects(I,B){if(!(I instanceof e))throw new TypeError("a Range is required");return this.set.some(F=>y(F,B)&&I.set.some(z=>y(z,B)&&F.every(G=>z.every(Q=>G.intersects(Q,B)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new a(I,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(D(this.set[B],I,this.options))return!0;return!1}}lE=e;const t=Kve(),n=new t,i=q4(),s=hw(),o=fw(),a=js(),{safeRe:c,t:l,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:d}=Nm(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=uw(),p=b=>b.value==="<0.0.0-0",m=b=>b.value==="",y=(b,I)=>{let B=!0;const F=b.slice();let z=F.pop();for(;B&&F.length;)B=F.every(G=>z.intersects(G,I)),z=F.pop();return B},v=(b,I)=>(o("comp",b,I),b=E(b,I),o("caret",b),b=_(b,I),o("tildes",b),b=T(b,I),o("xrange",b),b=P(b,I),o("stars",b),b),w=b=>!b||b.toLowerCase()==="x"||b==="*",_=(b,I)=>b.trim().split(/\s+/).map(B=>x(B,I)).join(" "),x=(b,I)=>{const B=I.loose?c[l.TILDELOOSE]:c[l.TILDE];return b.replace(B,(F,z,G,Q,X)=>{o("tilde",b,F,z,G,Q,X);let O;return w(z)?O="":w(G)?O=`>=${z}.0.0 <${+z+1}.0.0-0`:w(Q)?O=`>=${z}.${G}.0 <${z}.${+G+1}.0-0`:X?(o("replaceTilde pr",X),O=`>=${z}.${G}.${Q}-${X} <${z}.${+G+1}.0-0`):O=`>=${z}.${G}.${Q} <${z}.${+G+1}.0-0`,o("tilde return",O),O})},E=(b,I)=>b.trim().split(/\s+/).map(B=>S(B,I)).join(" "),S=(b,I)=>{o("caret",b,I);const B=I.loose?c[l.CARETLOOSE]:c[l.CARET],F=I.includePrerelease?"-0":"";return b.replace(B,(z,G,Q,X,O)=>{o("caret",b,z,G,Q,X,O);let R;return w(G)?R="":w(Q)?R=`>=${G}.0.0${F} <${+G+1}.0.0-0`:w(X)?G==="0"?R=`>=${G}.${Q}.0${F} <${G}.${+Q+1}.0-0`:R=`>=${G}.${Q}.0${F} <${+G+1}.0.0-0`:O?(o("replaceCaret pr",O),G==="0"?Q==="0"?R=`>=${G}.${Q}.${X}-${O} <${G}.${Q}.${+X+1}-0`:R=`>=${G}.${Q}.${X}-${O} <${G}.${+Q+1}.0-0`:R=`>=${G}.${Q}.${X}-${O} <${+G+1}.0.0-0`):(o("no pr"),G==="0"?Q==="0"?R=`>=${G}.${Q}.${X}${F} <${G}.${Q}.${+X+1}-0`:R=`>=${G}.${Q}.${X}${F} <${G}.${+Q+1}.0-0`:R=`>=${G}.${Q}.${X} <${+G+1}.0.0-0`),o("caret return",R),R})},T=(b,I)=>(o("replaceXRanges",b,I),b.split(/\s+/).map(B=>C(B,I)).join(" ")),C=(b,I)=>{b=b.trim();const B=I.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return b.replace(B,(F,z,G,Q,X,O)=>{o("xRange",b,F,z,G,Q,X,O);const R=w(G),M=R||w(Q),k=M||w(X),j=k;return z==="="&&j&&(z=""),O=I.includePrerelease?"-0":"",R?z===">"||z==="<"?F="<0.0.0-0":F="*":z&&j?(M&&(Q=0),X=0,z===">"?(z=">=",M?(G=+G+1,Q=0,X=0):(Q=+Q+1,X=0)):z==="<="&&(z="<",M?G=+G+1:Q=+Q+1),z==="<"&&(O="-0"),F=`${z+G}.${Q}.${X}${O}`):M?F=`>=${G}.0.0${O} <${+G+1}.0.0-0`:k&&(F=`>=${G}.${Q}.0${O} <${G}.${+Q+1}.0-0`),o("xRange return",F),F})},P=(b,I)=>(o("replaceStars",b,I),b.trim().replace(c[l.STAR],"")),V=(b,I)=>(o("replaceGTE0",b,I),b.trim().replace(c[I.includePrerelease?l.GTE0PRE:l.GTE0],"")),L=b=>(I,B,F,z,G,Q,X,O,R,M,k,j)=>(w(F)?B="":w(z)?B=`>=${F}.0.0${b?"-0":""}`:w(G)?B=`>=${F}.${z}.0${b?"-0":""}`:Q?B=`>=${B}`:B=`>=${B}${b?"-0":""}`,w(R)?O="":w(M)?O=`<${+R+1}.0.0-0`:w(k)?O=`<${R}.${+M+1}.0-0`:j?O=`<=${R}.${M}.${k}-${j}`:b?O=`<${R}.${M}.${+k+1}-0`:O=`<=${O}`,`${B} ${O}`.trim()),D=(b,I,B)=>{for(let F=0;F<b.length;F++)if(!b[F].test(I))return!1;if(I.prerelease.length&&!B.includePrerelease){for(let F=0;F<b.length;F++)if(o(b[F].semver),b[F].semver!==s.ANY&&b[F].semver.prerelease.length>0){const z=b[F].semver;if(z.major===I.major&&z.minor===I.minor&&z.patch===I.patch)return!0}return!1}return!0};return lE}var uE,rB;function hw(){if(rB)return uE;rB=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(u,f){if(f=t(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===r?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=r}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===r||u===r)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,f).test(u.semver):(f=t(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}uE=e;const t=q4(),{safeRe:n,t:i}=Nm(),s=TW(),o=fw(),a=js(),c=Va();return uE}var fE,nB;function pw(){if(nB)return fE;nB=1;const r=Va();return fE=(t,n,i)=>{try{n=new r(n,i)}catch{return!1}return n.test(t)},fE}var dE,iB;function Hve(){if(iB)return dE;iB=1;const r=Va();return dE=(t,n)=>new r(t,n).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),dE}var hE,sB;function Wve(){if(sB)return hE;sB=1;const r=js(),e=Va();return hE=(n,i,s)=>{let o=null,a=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(l=>{c.test(l)&&(!o||a.compare(l)===-1)&&(o=l,a=new r(o,s))}),o},hE}var pE,oB;function Gve(){if(oB)return pE;oB=1;const r=js(),e=Va();return pE=(n,i,s)=>{let o=null,a=null,c=null;try{c=new e(i,s)}catch{return null}return n.forEach(l=>{c.test(l)&&(!o||a.compare(l)===1)&&(o=l,a=new r(o,s))}),o},pE}var gE,aB;function Yve(){if(aB)return gE;aB=1;const r=js(),e=Va(),t=dw();return gE=(i,s)=>{i=new e(i,s);let o=new r("0.0.0");if(i.test(o)||(o=new r("0.0.0-0"),i.test(o)))return o;o=null;for(let a=0;a<i.set.length;++a){const c=i.set[a];let l=null;c.forEach(u=>{const f=new r(u.semver.version);switch(u.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!l||t(f,l))&&(l=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),l&&(!o||t(o,l))&&(o=l)}return o&&i.test(o)?o:null},gE}var mE,cB;function Jve(){if(cB)return mE;cB=1;const r=Va();return mE=(t,n)=>{try{return new r(t,n).range||"*"}catch{return null}},mE}var yE,lB;function W4(){if(lB)return yE;lB=1;const r=js(),e=hw(),{ANY:t}=e,n=Va(),i=pw(),s=dw(),o=V4(),a=H4(),c=K4();return yE=(u,f,d,h)=>{u=new r(u,h),f=new n(f,h);let g,p,m,y,v;switch(d){case">":g=s,p=a,m=o,y=">",v=">=";break;case"<":g=o,p=c,m=s,y="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,f,h))return!1;for(let w=0;w<f.set.length;++w){const _=f.set[w];let x=null,E=null;if(_.forEach(S=>{S.semver===t&&(S=new e(">=0.0.0")),x=x||S,E=E||S,g(S.semver,x.semver,h)?x=S:m(S.semver,E.semver,h)&&(E=S)}),x.operator===y||x.operator===v||(!E.operator||E.operator===y)&&p(u,E.semver))return!1;if(E.operator===v&&m(u,E.semver))return!1}return!0},yE}var vE,uB;function Xve(){if(uB)return vE;uB=1;const r=W4();return vE=(t,n,i)=>r(t,n,">",i),vE}var bE,fB;function Zve(){if(fB)return bE;fB=1;const r=W4();return bE=(t,n,i)=>r(t,n,"<",i),bE}var wE,dB;function Qve(){if(dB)return wE;dB=1;const r=Va();return wE=(t,n,i)=>(t=new r(t,i),n=new r(n,i),t.intersects(n,i)),wE}var xE,hB;function ebe(){if(hB)return xE;hB=1;const r=pw(),e=ja();return xE=(t,n,i)=>{const s=[];let o=null,a=null;const c=t.sort((d,h)=>e(d,h,i));for(const d of c)r(d,n,i)?(a=d,o||(o=d)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const l=[];for(const[d,h]of s)d===h?l.push(d):!h&&d===c[0]?l.push("*"):h?d===c[0]?l.push(`<=${h}`):l.push(`${d} - ${h}`):l.push(`>=${d}`);const u=l.join(" || "),f=typeof n.raw=="string"?n.raw:String(n);return u.length<f.length?u:n},xE}var _E,pB;function tbe(){if(pB)return _E;pB=1;const r=Va(),e=hw(),{ANY:t}=e,n=pw(),i=ja(),s=(f,d,h={})=>{if(f===d)return!0;f=new r(f,h),d=new r(d,h);let g=!1;e:for(const p of f.set){for(const m of d.set){const y=c(p,m,h);if(g=g||y!==null,y)continue e}if(g)return!1}return!0},o=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],c=(f,d,h)=>{if(f===d)return!0;if(f.length===1&&f[0].semver===t){if(d.length===1&&d[0].semver===t)return!0;h.includePrerelease?f=o:f=a}if(d.length===1&&d[0].semver===t){if(h.includePrerelease)return!0;d=a}const g=new Set;let p,m;for(const T of f)T.operator===">"||T.operator===">="?p=l(p,T,h):T.operator==="<"||T.operator==="<="?m=u(m,T,h):g.add(T.semver);if(g.size>1)return null;let y;if(p&&m){if(y=i(p.semver,m.semver,h),y>0)return null;if(y===0&&(p.operator!==">="||m.operator!=="<="))return null}for(const T of g){if(p&&!n(T,String(p),h)||m&&!n(T,String(m),h))return null;for(const C of d)if(!n(T,String(C),h))return!1;return!0}let v,w,_,x,E=m&&!h.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=p&&!h.includePrerelease&&p.semver.prerelease.length?p.semver:!1;E&&E.prerelease.length===1&&m.operator==="<"&&E.prerelease[0]===0&&(E=!1);for(const T of d){if(x=x||T.operator===">"||T.operator===">=",_=_||T.operator==="<"||T.operator==="<=",p){if(S&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===S.major&&T.semver.minor===S.minor&&T.semver.patch===S.patch&&(S=!1),T.operator===">"||T.operator===">="){if(v=l(p,T,h),v===T&&v!==p)return!1}else if(p.operator===">="&&!n(p.semver,String(T),h))return!1}if(m){if(E&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===E.major&&T.semver.minor===E.minor&&T.semver.patch===E.patch&&(E=!1),T.operator==="<"||T.operator==="<="){if(w=u(m,T,h),w===T&&w!==m)return!1}else if(m.operator==="<="&&!n(m.semver,String(T),h))return!1}if(!T.operator&&(m||p)&&y!==0)return!1}return!(p&&_&&!m&&y!==0||m&&x&&!p&&y!==0||S||E)},l=(f,d,h)=>{if(!f)return d;const g=i(f.semver,d.semver,h);return g>0?f:g<0||d.operator===">"&&f.operator===">="?d:f},u=(f,d,h)=>{if(!f)return d;const g=i(f.semver,d.semver,h);return g<0?f:g>0||d.operator==="<"&&f.operator==="<="?d:f};return _E=s,_E}var SE,gB;function rbe(){if(gB)return SE;gB=1;const r=Nm(),e=uw(),t=js(),n=AW(),i=$p(),s=Pve(),o=$ve(),a=Dve(),c=Mve(),l=Bve(),u=Nve(),f=Lve(),d=Fve(),h=ja(),g=Uve(),p=zve(),m=j4(),y=qve(),v=jve(),w=dw(),_=V4(),x=IW(),E=CW(),S=K4(),T=H4(),C=TW(),P=Vve(),V=hw(),L=Va(),D=pw(),b=Hve(),I=Wve(),B=Gve(),F=Yve(),z=Jve(),G=W4(),Q=Xve(),X=Zve(),O=Qve(),R=ebe(),M=tbe();return SE={parse:i,valid:s,clean:o,inc:a,diff:c,major:l,minor:u,patch:f,prerelease:d,compare:h,rcompare:g,compareLoose:p,compareBuild:m,sort:y,rsort:v,gt:w,lt:_,eq:x,neq:E,gte:S,lte:T,cmp:C,coerce:P,Comparator:V,Range:L,satisfies:D,toComparators:b,maxSatisfying:I,minSatisfying:B,minVersion:F,validRange:z,outside:G,gtr:Q,ltr:X,intersects:O,simplifyRange:R,subset:M,SemVer:t,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},SE}var ks=rbe();const mB=zs(ks);var Fr=(r=>(r.NANO_S="nanoS",r.NANO_SP="nanoSP",r.NANO_X="nanoX",r.STAX="stax",r.FLEX="flex",r.APEX="apexp",r))(Fr||{});let RW=class{id;model;name;constructor({id:e,model:t,name:n}){this.id=e,this.model=t,this.name=n}};const yB=11415;let nbe=class{constructor(e){if(this.seFlags=e,this.seFlags.length!==4)throw new Error("Invalid secure element flags length")}generalDeviceState(){const e=this.seFlags[0]??0;return{isPinValidated:this._checkNthBitInByte(e,1),hasMcuSerialNumber:this._checkNthBitInByte(e,2),hasValidCertificate:this._checkNthBitInByte(e,3),isCustomAuthorityConnectionAllowed:this._checkNthBitInByte(e,4),isSecureConnectionAllowed:this._checkNthBitInByte(e,5),isOnboarded:this._checkNthBitInByte(e,6),isMcuCodeSigned:this._checkNthBitInByte(e,7),isInRecoveryMode:this._checkNthBitInByte(e,8)}}endorsementInformation(){throw new Error("Not implemented")}wordsInformation(){throw new Error("Not implemented")}onboardingStatus(){throw new Error("Not implemented")}_checkNthBitInByte(e,t){return(e>>8-t&1)===1}},ibe=class{name="getOsVersion";args=void 0;getApdu(){const e={cla:224,ins:1,p1:0,p2:0};return new qa(e).build()}parseResponse(e,t){if(!Fu.isSuccessResponse(e))return Br({error:Bm.handle(e)});const n=new Oc(e),i=n.extract32BitUInt();if(i===void 0)return Br({error:new hs("Missing target ID in OS version")});let s=n.encodeToString(n.extractFieldLVEncoded()),o=n.extractFieldLVEncoded()??new Uint8Array(0);const a={...new nbe(o).generalDeviceState()};s||(s="0.0.0",o=new Uint8Array);const c=(i&4026531840)!==805306368,l=s.includes("-osu");let u="",f="",d="",h="",g,p,m,y;if(c){d=s,g=i;const v=n.extractFieldLVEncoded();v&&(v.length>=5?(u=n.encodeToString(v),p=parseInt(n.encodeToHexaString(n.extractFieldLVEncoded()),16)):p=parseInt(n.encodeToHexaString(v),16))}else{if(u=s,p=i,f=n.encodeToString(n.extractFieldLVEncoded()),this.isBootloaderVersionSupported(u,t)&&(d=n.encodeToString(n.extractFieldLVEncoded())),this.isHardwareVersionSupported(u,t)?h=n.encodeToHexaString(n.extractFieldLVEncoded()):h="00",this.isLocalizationSupported(u,t)){const v=n.extractFieldLVEncoded();v!==void 0&&(m=parseInt(n.encodeToHexaString(v),16))}if(this.isRecoverSupported(u,t)){const v=n.extractFieldLVEncoded();v!==void 0&&(y=parseInt(n.encodeToHexaString(v),16))}}return Br({data:{isBootloader:c,isOsu:l,targetId:i,seTargetId:p,mcuTargetId:g,seVersion:u,seFlags:o,mcuSephVersion:f,mcuBootloaderVersion:d,hwVersion:h,langId:m,recoverState:y,secureElementFlags:a}})}isBootloaderVersionSupported(e,t){const n=ks.coerce(e)??"";switch(t){case Fr.NANO_S:case Fr.NANO_X:return ks.gte(n,"2.0.0");default:return!0}}isHardwareVersionSupported(e,t){const n=ks.coerce(e)??"";switch(t){case Fr.NANO_X:return ks.gte(n,"2.0.0");default:return!1}}isLocalizationSupported(e,t){const n=ks.coerce(e)??"";switch(t){case Fr.NANO_S:return!1;case Fr.NANO_SP:return ks.gte(n,"1.1.0");case Fr.NANO_X:return ks.gte(n,"2.1.0");default:return!0}}isRecoverSupported(e,t){const n=ks.coerce(e)??"";switch(t){case Fr.NANO_S:return!1;case Fr.NANO_SP:return ks.gte(n,"1.1.2");case Fr.NANO_X:return ks.gte(n,"2.2.3");case Fr.STAX:return ks.gte(n,"1.4.0");case Fr.FLEX:return ks.gte(n,"1.0.1");default:return!0}}};const vB={"670a":{message:"No app name provided"},6807:{message:"Unknown application name"}};let sbe=class extends F4{constructor({message:e,errorCode:t}){super({tag:"OpenAppCommandError",message:e,errorCode:t})}},obe=class{name="openApp";args;triggersDisconnection=!0;constructor(e){this.args=e}getApdu(){const e={cla:224,ins:216,p1:0,p2:0};return new qa(e).addAsciiStringToData(this.args.appName).build()}parseResponse(e){if(Fu.isSuccessResponse(e))return Br({data:void 0});const t=new Oc(e).encodeToHexaString(e.statusCode);return z4(t,vB)?Br({error:new sbe({...vB[t],errorCode:t})}):Br({error:Bm.handle(e)})}};var du=(r=>(r.LOCKED="LOCKED",r.BUSY="BUSY",r.CONNECTED="CONNECTED",r.NOT_CONNECTED="NOT CONNECTED",r))(du||{}),K0=(r=>(r.NotStarted="not-started",r.Pending="pending",r.Stopped="stopped",r.Completed="completed",r.Error="error",r))(K0||{}),Yr=(r=>(r.None="none",r.UnlockDevice="unlock-device",r.AllowSecureConnection="allow-secure-connection",r.ConfirmOpenApp="confirm-open-app",r.SignTransaction="sign-transaction",r.SignTypedData="sign-typed-data",r.AllowListApps="allow-list-apps",r.VerifyAddress="verify-address",r.SignPersonalMessage="sign-personal-message",r.SignDelegationAuthorization="sign-delegation-authorization",r.Web3ChecksOptIn="web3-checks-opt-in",r.VerifySafeAddress="verify-safe-address",r))(Yr||{});const vn={of(r){return ms(r)},empty(){return jr},zero(){return jr},fromNullable(r){return r==null?jr:ms(r)},fromFalsy(r){return r?ms(r):jr},fromPredicate(r,e){switch(arguments.length){case 1:return t=>vn.fromPredicate(r,t);default:return r(e)?ms(e):jr}},mapMaybe(r,e){switch(arguments.length){case 1:return t=>vn.mapMaybe(r,t);default:return vn.catMaybes(e.map(r))}},catMaybes(r){let e=[];for(const t of r)t.isJust()&&e.push(t.extract());return e},encase(r){try{return ms(r())}catch{return jr}},isMaybe(r){return r instanceof G4||r instanceof Y4},sequence(r){let e=[];for(const t of r)if(t.isJust())e.push(t.extract());else return jr;return ms(e)},"fantasy-land/of"(r){return this.of(r)},"fantasy-land/empty"(){return this.empty()},"fantasy-land/zero"(){return this.zero()}};class G4{constructor(e){this.__value=e,this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!0}isNothing(){return!1}inspect(){return`Just(${this.__value})`}toString(){return this.inspect()}toJSON(){const e=this.__value;return e instanceof Date?e.toJSON():e}equals(e){return this.extract()===e.extract()}map(e){return ms(e(this.__value))}ap(e){return e.isJust()?this.map(e.extract()):jr}alt(e){return this}altLazy(e){return this}chain(e){return e(this.__value)}chainNullable(e){return vn.fromNullable(e(this.__value))}join(){return this.__value}reduce(e,t){return e(t,this.__value)}extend(e){return ms(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Just(this.__value)}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}toList(){return[this.__value]}mapOrDefault(e,t){return e(this.__value)}extract(){return this.__value}extractNullable(){return this.__value}toEither(e){return Zt(this.__value)}ifJust(e){return e(this.__value),this}ifNothing(e){return this}filter(e){return e(this.__value)?ms(this.__value):jr}}G4.prototype.constructor=vn;class Y4{constructor(){this["fantasy-land/equals"]=this.equals,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/alt"]=this.alt,this["fantasy-land/chain"]=this.chain,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend,this["fantasy-land/filter"]=this.filter}isJust(){return!1}isNothing(){return!0}inspect(){return"Nothing"}toString(){return this.inspect()}toJSON(){return this.__value}equals(e){return this.extract()===e.extract()}map(e){return jr}ap(e){return jr}alt(e){return e}altLazy(e){return e()}chain(e){return jr}chainNullable(e){return jr}join(){return jr}reduce(e,t){return t}extend(e){return jr}unsafeCoerce(){throw new Error("Maybe#unsafeCoerce was ran on a Nothing")}caseOf(e){return"_"in e?e._():e.Nothing()}orDefault(e){return e}orDefaultLazy(e){return e()}toList(){return[]}mapOrDefault(e,t){return t}extract(){}extractNullable(){return null}toEither(e){return lt(e)}ifJust(e){return this}ifNothing(e){return e(),this}filter(e){return jr}}Y4.prototype.constructor=vn;const ms=r=>new G4(r),jr=new Y4,Ro={of(r){return Zt(r)},lefts(r){let e=[];for(const t of r)t.isLeft()&&e.push(t.extract());return e},rights(r){let e=[];for(const t of r)t.isRight()&&e.push(t.extract());return e},encase(r){try{return Zt(r())}catch(e){return lt(e)}},sequence(r){let e=[];for(const t of r){if(t.isLeft())return t;e.push(t.extract())}return Zt(e)},isEither(r){return r instanceof X4||r instanceof J4},"fantasy-land/of"(r){return Ro.of(r)}};class J4{constructor(e){this.__value=e,this._="R",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!1}isRight(){return!0}toJSON(){return this.__value}inspect(){return`Right(${this.__value})`}toString(){return this.inspect()}bimap(e,t){return Zt(t(this.__value))}map(e){return Zt(e(this.__value))}mapLeft(e){return this}ap(e){return e.isRight()?this.map(e.extract()):e}equals(e){return e.isRight()?this.__value===e.extract():!1}chain(e){return e(this.__value)}chainLeft(e){return this}join(){return this.__value}alt(e){return this}altLazy(e){return this}reduce(e,t){return e(t,this.__value)}extend(e){return Zt(e(this))}unsafeCoerce(){return this.__value}caseOf(e){return"_"in e?e._():e.Right(this.__value)}leftOrDefault(e){return e}orDefault(e){return this.__value}orDefaultLazy(e){return this.__value}leftOrDefaultLazy(e){return e()}ifLeft(e){return this}ifRight(e){return e(this.__value),this}toMaybe(){return ms(this.__value)}leftToMaybe(){return jr}extract(){return this.__value}swap(){return lt(this.__value)}}J4.prototype.constructor=Ro;class X4{constructor(e){this.__value=e,this._="L",this["fantasy-land/bimap"]=this.bimap,this["fantasy-land/map"]=this.map,this["fantasy-land/ap"]=this.ap,this["fantasy-land/equals"]=this.equals,this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this["fantasy-land/reduce"]=this.reduce,this["fantasy-land/extend"]=this.extend}isLeft(){return!0}isRight(){return!1}toJSON(){return this.__value}inspect(){return`Left(${JSON.stringify(this.__value)})`}toString(){return this.inspect()}bimap(e,t){return lt(e(this.__value))}map(e){return this}mapLeft(e){return lt(e(this.__value))}ap(e){return e.isLeft()?e:this}equals(e){return e.isLeft()?e.extract()===this.__value:!1}chain(e){return this}chainLeft(e){return e(this.__value)}join(){return this}alt(e){return e}altLazy(e){return e()}reduce(e,t){return t}extend(e){return this}unsafeCoerce(){throw this.__value instanceof Error?this.__value:new Error("Either#unsafeCoerce was ran on a Left")}caseOf(e){return"_"in e?e._():e.Left(this.__value)}leftOrDefault(e){return this.__value}orDefault(e){return e}orDefaultLazy(e){return e()}leftOrDefaultLazy(e){return this.__value}ifLeft(e){return e(this.__value),this}ifRight(e){return this}toMaybe(){return jr}leftToMaybe(){return ms(this.__value)}extract(){return this.__value}swap(){return Zt(this.__value)}}X4.prototype.constructor=Ro;const lt=r=>new X4(r),Zt=r=>new J4(r);var kW;const OW={liftEither(r){if(r.isRight())return Promise.resolve(r.extract());throw r.extract()},fromPromise(r){return r.then(OW.liftEither)},throwE(r){throw r}};class PW{constructor(e){this.runPromise=e,this[kW]="EitherAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/alt"]=this.alt,this.then=(t,n)=>this.run().then(t,n)}leftOrDefault(e){return this.run().then(t=>t.leftOrDefault(e))}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return hr(async e=>{const t=await this;if(t.isRight()){const n=await t.extract();return e.liftEither(n)}return e.liftEither(t)})}ap(e){return hr(async t=>{const n=await e;if(n.isRight()){const i=await this.run();return i.isRight()?n.extract()(i.extract()):t.liftEither(i)}return t.liftEither(n)})}alt(e){return hr(async t=>{const n=await this.run();if(n.isRight())return n.extract();{const i=await e;return t.liftEither(i)}})}extend(e){return hr(async t=>{const n=await this.run();if(n.isRight()){const i=hr.liftEither(n);return t.liftEither(Zt(e(i)))}return t.liftEither(n)})}async run(){try{return Zt(await this.runPromise(OW))}catch(e){return lt(e)}}bimap(e,t){return hr(async n=>{const i=await this.run();try{return await n.liftEither(i.bimap(e,t))}catch(s){throw await s}})}map(e){return hr(t=>this.runPromise(t).then(e))}mapLeft(e){return hr(async t=>{try{return await this.runPromise(t)}catch(n){throw await e(n)}})}chain(e){return hr(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}chainLeft(e){return hr(async t=>{try{return await this.runPromise(t)}catch(n){return t.fromPromise(e(n))}})}toMaybeAsync(){return Li(async({liftMaybe:e})=>{const t=await this.run();return e(t.toMaybe())})}swap(){return hr(async e=>{const t=await this.run();return t.isRight()&&e.throwE(t.extract()),e.liftEither(Zt(t.extract()))})}ifLeft(e){return hr(async t=>{const n=await this.run();return n.ifLeft(e),t.liftEither(n)})}ifRight(e){return hr(async t=>{const n=await this.run();return n.ifRight(e),t.liftEither(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return hr(({fromPromise:t})=>t(this.run().finally(e)))}}kW=Symbol.toStringTag;const hr=Object.assign(r=>new PW(r),{fromPromise:r=>hr(({fromPromise:e})=>e(r())),liftEither:r=>hr(({liftEither:e})=>e(r)),lefts:r=>Promise.all(r.map(e=>e.run())).then(Ro.lefts),rights:r=>Promise.all(r.map(e=>e.run())).then(Ro.rights),sequence:r=>hr(async e=>{let t=[];for await(const n of r){if(n.isLeft())return e.liftEither(n);t.push(n.extract())}return e.liftEither(Zt(t))}),all:r=>hr.fromPromise(async()=>Promise.all(r).then(Ro.sequence))});PW.prototype.constructor=hr;var $W;const DW={liftMaybe(r){if(r.isJust())return Promise.resolve(r.extract());throw jr},fromPromise(r){return r.then(DW.liftMaybe)}};class MW{constructor(e){this.runPromise=e,this[$W]="MaybeAsync",this["fantasy-land/chain"]=this.chain,this["fantasy-land/filter"]=this.filter,this["fantasy-land/alt"]=this.alt}orDefault(e){return this.run().then(t=>t.orDefault(e))}join(){return Li(async e=>{const t=await this.run();if(t.isJust()){const n=await t.extract();return e.liftMaybe(n)}return e.liftMaybe(jr)})}ap(e){return Li(async t=>{const n=await e;if(n.isJust()){const i=await this.run();return i.isJust()?n.extract()(i.extract()):t.liftMaybe(jr)}return t.liftMaybe(jr)})}alt(e){return Li(async t=>{const n=await this.run();if(n.isJust())return n.extract();{const i=await e;return t.liftMaybe(i)}})}extend(e){return Li(async t=>{const n=await this.run();if(n.isJust()){const i=Li.liftMaybe(n);return t.liftMaybe(ms(e(i)))}return t.liftMaybe(jr)})}filter(e){return Li(async t=>{const n=await this.run();return t.liftMaybe(n.filter(e))})}async run(){try{return ms(await this.runPromise(DW))}catch{return jr}}map(e){return Li(t=>this.runPromise(t).then(e))}chain(e){return Li(async t=>{const n=await this.runPromise(t);return t.fromPromise(e(n))})}toEitherAsync(e){return hr(async({liftEither:t})=>{const n=await this.run();return t(n.toEither(e))})}ifJust(e){return Li(async t=>{const n=await this.run();return n.ifJust(e),t.liftMaybe(n)})}ifNothing(e){return Li(async t=>{const n=await this.run();return n.ifNothing(e),t.liftMaybe(n)})}void(){return this.map(e=>{})}caseOf(e){return this.run().then(t=>t.caseOf(e))}finally(e){return Li(({fromPromise:t})=>t(this.run().finally(e)))}then(e,t){return this.run().then(e,t)}}$W=Symbol.toStringTag;const Li=Object.assign(r=>new MW(r),{catMaybes:r=>Promise.all(r).then(vn.catMaybes),fromPromise:r=>Li(({fromPromise:e})=>e(r())),liftMaybe:r=>Li(({liftMaybe:e})=>e(r))});MW.prototype.constructor=Li;function abe(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Sa<"u")return Sa}function cbe(){const r=abe();if(r.__xstate__)return r.__xstate__}const lbe=r=>{if(typeof window>"u")return;const e=cbe();e&&e.register(r)};class bB{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const BW=".",ube="",NW="",fbe="#",dbe="*",LW="xstate.init",Zg="xstate.stop";function hbe(r,e){return{type:`xstate.after.${r}.${e}`}}function xC(r,e){return{type:`xstate.done.state.${r}`,output:e}}function pbe(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function gbe(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function FW(r){return{type:LW,input:r}}function zc(r){setTimeout(()=>{throw r})}const mbe=typeof Symbol=="function"&&Symbol.observable||"@@observable";function UW(r,e){const t=wB(r),n=wB(e);return typeof n=="string"?typeof t=="string"?n===t:!1:typeof t=="string"?t in n:Object.keys(t).every(i=>i in n?UW(t[i],n[i]):!1)}function Z4(r){if(qW(r))return r;const e=[];let t="";for(let n=0;n<r.length;n++){switch(r.charCodeAt(n)){case 92:t+=r[n+1],n++;continue;case 46:e.push(t),t="";continue}t+=r[n]}return e.push(t),e}function wB(r){if(Jbe(r))return r.value;if(typeof r!="string")return r;const e=Z4(r);return ybe(e)}function ybe(r){if(r.length===1)return r[0];const e={};let t=e;for(let n=0;n<r.length-1;n++)if(n===r.length-2)t[r[n]]=r[n+1];else{const i=t;t={},i[r[n]]=t}return e}function xB(r,e){const t={},n=Object.keys(r);for(let i=0;i<n.length;i++){const s=n[i];t[s]=e(r[s],s,r,i)}return t}function zW(r){return qW(r)?r:[r]}function hu(r){return r===void 0?[]:zW(r)}function _C(r,e,t,n){return typeof r=="function"?r({context:e,event:t,self:n}):r}function qW(r){return Array.isArray(r)}function vbe(r){return r.type.startsWith("xstate.error.actor")}function ah(r){return zW(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function jW(r){if(!(r===void 0||r===ube))return hu(r)}function SC(r,e,t){const n=typeof r=="object",i=n?r:void 0;return{next:(n?r.next:r)?.bind(i),error:(n?r.error:e)?.bind(i),complete:(n?r.complete:t)?.bind(i)}}function _B(r,e){return`${e}.${r}`}function Q4(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,n,i]=t,o=r.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[n]:o).src}function SB(r,e){return`${r.sessionId}.${e}`}let bbe=0;function wbe(r,e){const t=new Map,n=new Map,i=new WeakMap,s=new Set,o={},{clock:a,logger:c}=e,l={schedule:(d,h,g,p,m=Math.random().toString(36).slice(2))=>{const y={source:d,target:h,event:g,delay:p,id:m,startedAt:Date.now()},v=SB(d,m);f._snapshot._scheduledEvents[v]=y;const w=a.setTimeout(()=>{delete o[v],delete f._snapshot._scheduledEvents[v],f._relay(d,h,g)},p);o[v]=w},cancel:(d,h)=>{const g=SB(d,h),p=o[g];delete o[g],delete f._snapshot._scheduledEvents[g],p!==void 0&&a.clearTimeout(p)},cancelAll:d=>{for(const h in f._snapshot._scheduledEvents){const g=f._snapshot._scheduledEvents[h];g.source===d&&l.cancel(d,g.id)}}},u=d=>{if(!s.size)return;const h={...d,rootId:r.sessionId};s.forEach(g=>g.next?.(h))},f={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${bbe++}`,_register:(d,h)=>(t.set(d,h),d),_unregister:d=>{t.delete(d.sessionId);const h=i.get(d);h!==void 0&&(n.delete(h),i.delete(d))},get:d=>n.get(d),_set:(d,h)=>{const g=n.get(d);if(g&&g!==h)throw new Error(`Actor with system ID '${d}' already exists.`);n.set(d,h),i.set(h,d)},inspect:d=>{const h=SC(d);return s.add(h),{unsubscribe(){s.delete(h)}}},_sendInspectionEvent:u,_relay:(d,h,g)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:d,actorRef:h,event:g}),h._send(g)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const d=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const h in d){const{source:g,target:p,event:m,delay:y,id:v}=d[h];l.schedule(g,p,m,y,v)}},_clock:a,_logger:c};return f}let EE=!1;const e6=1;let Ws=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const xbe={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class _be{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new bB(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ws.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const n={...xbe,...t},{clock:i,logger:s,parent:o,syncSnapshot:a,id:c,systemId:l,inspect:u}=n;this.system=o?o.system:wbe(this,{clock:i,logger:s}),u&&!o&&this.system.inspect(SC(u)),this.sessionId=this.system._bookId(),this.id=c??this.sessionId,this.logger=t?.logger??this.system._logger,this.clock=t?.clock??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=n,this.src=n.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const d=this.eventListeners.get(f.type),h=this.eventListeners.get("*");if(!d&&!h)return;const g=[...d?d.values():[],...h?h.values():[]];for(const p of g)p(f)},actionExecutor:f=>{const d=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const h=EE;try{EE=!0,f.exec(f.info,f.params)}finally{EE=h}};this._processingStatus===Ws.Running?d():this._deferred.push(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState(t?.snapshot??t?.state),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(e,t){this._snapshot=e;let n;for(;n=this._deferred.shift();)try{n()}catch(i){this._deferred.length=0,this._snapshot={...e,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(e)}catch(s){zc(s)}break;case"done":for(const i of this.observers)try{i.next?.(e)}catch(s){zc(s)}this._stopProcedure(),this._complete(),this._doneEvent=pbe(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,n){const i=SC(e,t,n);if(this._processingStatus!==Ws.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(s){zc(s)}break;case"error":{const s=this._snapshot.error;if(!i.error)zc(s);else try{i.error(s)}catch(o){zc(o)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,t){let n=this.eventListeners.get(e);n||(n=new Set,this.eventListeners.set(e,n));const i=t.bind(void 0);return n.add(i),{unsubscribe:()=>{n.delete(i)}}}start(){if(this._processingStatus===Ws.Running)return this;this._syncSnapshot&&this.subscribe({next:n=>{n.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:n})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ws.Running;const e=FW(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(n){return this._snapshot={...this._snapshot,status:"error",error:n},this._error(n),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,n;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){n={err:i}}if(n){const{err:i}=n;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(t,e),e.type===Zg&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ws.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ws.NotStarted?(this._processingStatus=Ws.Stopped,this):(this.mailbox.enqueue({type:Zg}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(t){zc(t)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||zc(e);return}let t=!1;for(const n of this.observers){const i=n.error;t||=!i;try{i?.(e)}catch(s){zc(s)}}this.observers.clear(),t&&zc(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,gbe(this.id,e))}_stopProcedure(){return this._processingStatus!==Ws.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new bB(this._process.bind(this)),this._processingStatus=Ws.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Ws.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:lbe)(this)}toJSON(){return{xstate$$type:e6,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[mbe](){return this}getSnapshot(){return this._snapshot}}function Xh(r,...[e]){return new _be(r,e)}function Sbe(r,e,t,n,{sendId:i}){const s=typeof i=="function"?i(t,n):i;return[e,{sendId:s},void 0]}function Ebe(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function Abe(r){function e(t,n){}return e.type="xstate.cancel",e.sendId=r,e.resolve=Sbe,e.execute=Ebe,e}function Ibe(r,e,t,n,{id:i,systemId:s,src:o,input:a,syncSnapshot:c}){const l=typeof o=="string"?Q4(e.machine,o):o,u=typeof i=="function"?i(t):i;let f,d;return l&&(d=typeof a=="function"?a({context:e.context,event:t.event,self:r.self}):a,f=Xh(l,{id:u,src:o,parent:r.self,syncSnapshot:c,systemId:s,input:d})),[Gf(e,{children:{...e.children,[u]:f}}),{id:i,systemId:s,actorRef:f,src:o,input:d},void 0]}function Cbe(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==Ws.Stopped&&e.start()})}function Tbe(...[r,{id:e,systemId:t,input:n,syncSnapshot:i=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=n,s.syncSnapshot=i,s.resolve=Ibe,s.execute=Cbe,s}function Rbe(r,e,t,n,{actorRef:i}){const s=typeof i=="function"?i(t,n):i,o=typeof s=="string"?e.children[s]:s;let a=e.children;return o&&(a={...a},delete a[o.id]),[Gf(e,{children:a}),o,void 0]}function kbe(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==Ws.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function VW(r){function e(t,n){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=Rbe,e.execute=kbe,e}function t6(r,e,t,n){const{machine:i}=n,s=typeof r=="function",o=s?r:i.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return t6(o,e,t,n);const a={context:e,event:t},c=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in o?o.check(n,a,o):o(a,c)}const r6=r=>r.type==="atomic"||r.type==="final";function Zh(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Lm(r,e){const t=[];if(e===r)return t;let n=r.parent;for(;n&&n!==e;)t.push(n),n=n.parent;return t}function Ib(r){const e=new Set(r),t=HW(e);for(const n of e)if(n.type==="compound"&&(!t.get(n)||!t.get(n).length))EB(n).forEach(i=>e.add(i));else if(n.type==="parallel"){for(const i of Zh(n))if(i.type!=="history"&&!e.has(i)){const s=EB(i);for(const o of s)e.add(o)}}for(const n of e){let i=n.parent;for(;i;)e.add(i),i=i.parent}return e}function KW(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const i=t[0];if(i){if(r6(i))return i.key}else return{}}const n={};for(const i of t)n[i.key]=KW(i,e);return n}function HW(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function WW(r,e){const t=Ib(e);return KW(r,HW(t))}function n6(r,e){return e.type==="compound"?Zh(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?Zh(e).every(t=>n6(r,t)):e.type==="final"}const gw=r=>r[0]===fbe;function Obe(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(n=>{if(n===dbe)return!0;if(!n.endsWith(".*"))return!1;const i=n.split("."),s=e.split(".");for(let o=0;o<i.length;o++){const a=i[o],c=s[o];if(a==="*")return o===i.length-1;if(a!==c)return!1}return!0}).sort((n,i)=>i.length-n.length).flatMap(n=>r.transitions.get(n))}function Pbe(r){const e=r.config.after;if(!e)return[];const t=i=>{const s=hbe(i,r.id),o=s.type;return r.entry.push(s1e(s,{id:o,delay:i})),r.exit.push(Abe(o)),o};return Object.keys(e).flatMap(i=>{const s=e[i],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+i)?i:+i,c=t(a);return hu(o).map(l=>({...l,event:c,delay:a}))}).map(i=>{const{delay:s}=i;return{...vf(r,i.event,i),delay:s}})}function vf(r,e,t){const n=jW(t.target),i=t.reenter??!1,s=Mbe(r,n),o={...t,actions:hu(t.actions),guard:t.guard,target:s,source:r,reenter:i,eventType:e,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function $be(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===NW)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const n=r.config.on[t];e.set(t,ah(n).map(i=>vf(r,t,i)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,ah(r.config.onDone).map(n=>vf(r,t,n)))}for(const t of r.invoke){if(t.onDone){const n=`xstate.done.actor.${t.id}`;e.set(n,ah(t.onDone).map(i=>vf(r,n,i)))}if(t.onError){const n=`xstate.error.actor.${t.id}`;e.set(n,ah(t.onError).map(i=>vf(r,n,i)))}if(t.onSnapshot){const n=`xstate.snapshot.${t.id}`;e.set(n,ah(t.onSnapshot).map(i=>vf(r,n,i)))}}for(const t of r.after){let n=e.get(t.eventType);n||(n=[],e.set(t.eventType,n)),n.push(t)}return e}function Dbe(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const n={source:r,actions:!e||typeof e=="string"?[]:hu(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...n,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return n}function Mbe(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(gw(t))return r.machine.getStateNodeById(t);const n=t[0]===BW;if(n&&!r.parent)return Cb(r,t.slice(1));const i=n?r.key+t:t;if(r.parent)try{return Cb(r.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function GW(r){const e=jW(r.config.target);return e?{target:e.map(t=>typeof t=="string"?Cb(r.parent,t):t)}:r.parent.initial}function If(r){return r.type==="history"}function EB(r){const e=YW(r);for(const t of e)for(const n of Lm(t,r))e.add(n);return e}function YW(r){const e=new Set;function t(n){if(!e.has(n)){if(e.add(n),n.type==="compound")t(n.initial.target[0]);else if(n.type==="parallel")for(const i of Zh(n))t(i)}}return t(r),e}function Qh(r,e){if(gw(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function Cb(r,e){if(typeof e=="string"&&gw(e))try{return r.machine.getStateNodeById(e)}catch{}const t=Z4(e).slice();let n=r;for(;t.length;){const i=t.shift();if(!i.length)break;n=Qh(n,i)}return n}function Tb(r,e){if(typeof e=="string"){const i=r.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,i]}const t=Object.keys(e),n=t.map(i=>Qh(r,i)).filter(Boolean);return[r.machine.root,r].concat(n,t.reduce((i,s)=>{const o=Qh(r,s);if(!o)return i;const a=Tb(o,e[s]);return i.concat(a)},[]))}function Bbe(r,e,t,n){const s=Qh(r,e).next(t,n);return!s||!s.length?r.next(t,n):s}function Nbe(r,e,t,n){const i=Object.keys(e),s=Qh(r,i[0]),o=i6(s,e[i[0]],t,n);return!o||!o.length?r.next(t,n):o}function Lbe(r,e,t,n){const i=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const a=Qh(r,s),c=i6(a,o,t,n);c&&i.push(...c)}return i.length?i:r.next(t,n)}function i6(r,e,t,n){return typeof e=="string"?Bbe(r,e,t,n):Object.keys(e).length===1?Nbe(r,e,t,n):Lbe(r,e,t,n)}function Fbe(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function Uu(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Ube(r,e){const t=new Set(r),n=new Set(e);for(const i of t)if(n.has(i))return!0;for(const i of n)if(t.has(i))return!0;return!1}function JW(r,e,t){const n=new Set;for(const i of r){let s=!1;const o=new Set;for(const a of n)if(Ube(EC([i],e,t),EC([a],e,t)))if(Uu(i.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)n.delete(a);n.add(i)}}return Array.from(n)}function zbe(r){const[e,...t]=r;for(const n of Lm(e,void 0))if(t.every(i=>Uu(i,n)))return n}function s6(r,e){if(!r.target)return[];const t=new Set;for(const n of r.target)if(If(n))if(e[n.id])for(const i of e[n.id])t.add(i);else for(const i of s6(GW(n),e))t.add(i);else t.add(n);return[...t]}function XW(r,e){const t=s6(r,e);if(!t)return;if(!r.reenter&&t.every(i=>i===r.source||Uu(i,r.source)))return r.source;const n=zbe(t.concat(r.source));if(n)return n;if(!r.reenter)return r.source.machine.root}function EC(r,e,t){const n=new Set;for(const i of r)if(i.target?.length){const s=XW(i,t);i.reenter&&i.source===s&&n.add(s);for(const o of e)Uu(o,s)&&n.add(o)}return[...n]}function qbe(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function AC(r,e,t,n,i,s){if(!r.length)return e;const o=new Set(e._nodes);let a=e.historyValue;const c=JW(r,o,a);let l=e;i||([l,a]=Hbe(l,n,t,c,o,a,s,t.actionExecutor)),l=ep(l,n,t,c.flatMap(f=>f.actions),s,void 0),l=Vbe(l,n,t,c,o,s,a,i);const u=[...o];l.status==="done"&&(l=ep(l,n,t,u.sort((f,d)=>d.order-f.order).flatMap(f=>f.exit),s,void 0));try{return a===e.historyValue&&qbe(e._nodes,o)?l:Gf(l,{_nodes:u,historyValue:a})}catch(f){throw f}}function jbe(r,e,t,n,i){if(n.output===void 0)return;const s=xC(i.id,i.output!==void 0&&i.parent?_C(i.output,r.context,e,t.self):void 0);return _C(n.output,r.context,s,t.self)}function Vbe(r,e,t,n,i,s,o,a){let c=r;const l=new Set,u=new Set;Kbe(n,o,u,l),a&&u.add(r.machine.root);const f=new Set;for(const d of[...l].sort((h,g)=>h.order-g.order)){i.add(d);const h=[];h.push(...d.entry);for(const g of d.invoke)h.push(Tbe(g.src,{...g,syncSnapshot:!!g.onSnapshot}));if(u.has(d)){const g=d.initial.actions;h.push(...g)}if(c=ep(c,e,t,h,s,d.invoke.map(g=>g.id)),d.type==="final"){const g=d.parent;let p=g?.type==="parallel"?g:g?.parent,m=p||d;for(g?.type==="compound"&&s.push(xC(g.id,d.output!==void 0?_C(d.output,c.context,e,t.self):void 0));p?.type==="parallel"&&!f.has(p)&&n6(i,p);)f.add(p),s.push(xC(p.id)),m=p,p=p.parent;if(p)continue;c=Gf(c,{status:"done",output:jbe(c,e,t,c.machine.root,m)})}}return c}function Kbe(r,e,t,n){for(const i of r){const s=XW(i,e);for(const a of i.target||[])!If(a)&&(i.source!==a||i.source!==s||i.reenter)&&(n.add(a),t.add(a)),mh(a,e,t,n);const o=s6(i,e);for(const a of o){const c=Lm(a,s);s?.type==="parallel"&&c.push(s),ZW(n,e,t,c,!i.source.parent&&i.reenter?void 0:s)}}}function mh(r,e,t,n){if(If(r))if(e[r.id]){const i=e[r.id];for(const s of i)n.add(s),mh(s,e,t,n);for(const s of i)AE(s,r.parent,n,e,t)}else{const i=GW(r);for(const s of i.target)n.add(s),i===r.parent?.initial&&t.add(r.parent),mh(s,e,t,n);for(const s of i.target)AE(s,r.parent,n,e,t)}else if(r.type==="compound"){const[i]=r.initial.target;If(i)||(n.add(i),t.add(i)),mh(i,e,t,n),AE(i,r,n,e,t)}else if(r.type==="parallel")for(const i of Zh(r).filter(s=>!If(s)))[...n].some(s=>Uu(s,i))||(If(i)||(n.add(i),t.add(i)),mh(i,e,t,n))}function ZW(r,e,t,n,i){for(const s of n)if((!i||Uu(s,i))&&r.add(s),s.type==="parallel")for(const o of Zh(s).filter(a=>!If(a)))[...r].some(a=>Uu(a,o))||(r.add(o),mh(o,e,t,r))}function AE(r,e,t,n,i){ZW(t,n,i,Lm(r,e))}function Hbe(r,e,t,n,i,s,o,a){let c=r;const l=EC(n,i,s);l.sort((f,d)=>d.order-f.order);let u;for(const f of l)for(const d of Fbe(f)){let h;d.history==="deep"?h=g=>r6(g)&&Uu(g,f):h=g=>g.parent===f,u??={...s},u[d.id]=Array.from(i).filter(h)}for(const f of l)c=ep(c,e,t,[...f.exit,...f.invoke.map(d=>VW(d.id))],o,void 0),i.delete(f);return[c,u||s]}function Wbe(r,e){return r.implementations.actions[e]}function QW(r,e,t,n,i,s){const{machine:o}=r;let a=r;for(const c of n){const l=typeof c=="function",u=l?c:Wbe(o,typeof c=="string"?c:c.type),f={context:a.context,event:e,self:t.self,system:t.system},d=l||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:a.context,event:e}):c.params:void 0;if(!u||!("resolve"in u)){t.actionExecutor({type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",info:f,params:d,exec:u});continue}const h=u,[g,p,m]=h.resolve(t,a,f,d,u,i);a=g,"retryResolve"in h&&s?.push([h,p]),"execute"in h&&t.actionExecutor({type:h.type,info:f,params:p,exec:h.execute.bind(null,t,p)}),m&&(a=QW(a,e,t,m,i,s))}return a}function ep(r,e,t,n,i,s){const o=s?[]:void 0,a=QW(r,e,t,n,{internalQueue:i,deferredActorIds:s},o);return o?.forEach(([c,l])=>{c.retryResolve(t,a,l)}),a}function IE(r,e,t,n){let i=r;const s=[];function o(l,u,f){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:u,snapshot:l,_transitions:f}),s.push(l)}if(e.type===Zg)return i=Gf(AB(i,e,t),{status:"stopped"}),o(i,e,[]),{snapshot:i,microstates:s};let a=e;if(a.type!==LW){const l=a,u=vbe(l),f=IB(l,i);if(u&&!f.length)return i=Gf(r,{status:"error",error:l.error}),o(i,l,[]),{snapshot:i,microstates:s};i=AC(f,r,t,a,!1,n),o(i,l,f)}let c=!0;for(;i.status==="active";){let l=c?Gbe(i,a):[];const u=l.length?i:void 0;if(!l.length){if(!n.length)break;a=n.shift(),l=IB(a,i)}i=AC(l,i,t,a,!1,n),c=i!==u,o(i,a,l)}return i.status!=="active"&&AB(i,a,t),{snapshot:i,microstates:s}}function AB(r,e,t){return ep(r,e,t,Object.values(r.children).map(n=>VW(n)),[],void 0)}function IB(r,e){return e.machine.getTransitionData(e,r)}function Gbe(r,e){const t=new Set,n=r._nodes.filter(r6);for(const i of n)e:for(const s of[i].concat(Lm(i,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||t6(o.guard,r.context,e,r)){t.add(o);break e}}return JW(Array.from(t),new Set(r._nodes),r.historyValue)}function Ybe(r,e){const t=Ib(Tb(r,e));return WW(r,[...t])}function Jbe(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Xbe=function(e){return UW(e,this.value)},Zbe=function(e){return this.tags.has(e)},Qbe=function(e){const t=this.machine.getTransitionData(this,e);return!!t?.length&&t.some(n=>n.target!==void 0||n.actions.length)},e1e=function(){const{_nodes:e,tags:t,machine:n,getMeta:i,toJSON:s,can:o,hasTag:a,matches:c,...l}=this;return{...l,tags:Array.from(t)}},t1e=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function Rv(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:WW(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:Xbe,hasTag:Zbe,can:Qbe,getMeta:t1e,toJSON:e1e}}function Gf(r,e={}){return Rv({...r,...e},r.machine)}function r1e(r,e){const{_nodes:t,tags:n,machine:i,children:s,context:o,can:a,hasTag:c,matches:l,getMeta:u,toJSON:f,...d}=r,h={};for(const p in s){const m=s[p];h[p]={snapshot:m.getPersistedSnapshot(e),src:m.src,systemId:m._systemId,syncSnapshot:m._syncSnapshot}}return{...d,context:eG(o),children:h}}function eG(r){let e;for(const t in r){const n=r[t];if(n&&typeof n=="object")if("sessionId"in n&&"send"in n&&"ref"in n)e??=Array.isArray(r)?r.slice():{...r},e[t]={xstate$$type:e6,id:n.id};else{const i=eG(n);i!==n&&(e??=Array.isArray(r)?r.slice():{...r},e[t]=i)}}return e??r}function n1e(r,e,t,n,{event:i,id:s,delay:o},{internalQueue:a}){const c=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const l=typeof i=="function"?i(t,n):i;let u;if(typeof o=="string"){const f=c&&c[o];u=typeof f=="function"?f(t,n):f}else u=typeof o=="function"?o(t,n):o;return typeof u!="number"&&a.push(l),[e,{event:l,id:s,delay:u},void 0]}function i1e(r,e){const{event:t,delay:n,id:i}=e;if(typeof n=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,n,i)});return}}function s1e(r,e){function t(n,i){}return t.type="xstate.raise",t.event=r,t.id=e?.id,t.delay=e?.delay,t.resolve=n1e,t.execute=i1e,t}const CB="xstate.observable.next",TB="xstate.observable.error",RB="xstate.observable.complete";function o1e(r){return{config:r,transition:(t,n)=>{if(t.status!=="active")return t;switch(n.type){case CB:return{...t,context:n.data};case TB:return{...t,status:"error",error:n.data,input:void 0,_subscription:void 0};case RB:return{...t,status:"done",input:void 0,_subscription:void 0};case Zg:return t._subscription.unsubscribe(),{...t,status:"stopped",input:void 0,_subscription:void 0};default:return t}},getInitialSnapshot:(t,n)=>({status:"active",output:void 0,error:void 0,context:void 0,input:n,_subscription:void 0}),start:(t,{self:n,system:i,emit:s})=>{t.status!=="done"&&(t._subscription=r({input:t.input,system:i,self:n,emit:s}).subscribe({next:o=>{i._relay(n,n,{type:CB,data:o})},error:o=>{i._relay(n,n,{type:TB,data:o})},complete:()=>{i._relay(n,n,{type:RB})}}))},getPersistedSnapshot:({_subscription:t,...n})=>n,restoreSnapshot:t=>({...t,_subscription:void 0})}}const kB="xstate.promise.resolve",OB="xstate.promise.reject",$y=new WeakMap;function ra(r){return{config:r,transition:(t,n,i)=>{if(t.status!=="active")return t;switch(n.type){case kB:{const s=n.data;return{...t,status:"done",output:s,input:void 0}}case OB:return{...t,status:"error",error:n.data,input:void 0};case Zg:return $y.get(i.self)?.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:n,system:i,emit:s})=>{if(t.status!=="active")return;const o=new AbortController;$y.set(n,o),Promise.resolve(r({input:t.input,system:i,self:n,signal:o.signal,emit:s})).then(c=>{n.getSnapshot().status==="active"&&($y.delete(n),i._relay(n,n,{type:kB,data:c}))},c=>{n.getSnapshot().status==="active"&&($y.delete(n),i._relay(n,n,{type:OB,data:c}))})},getInitialSnapshot:(t,n)=>({status:"active",output:void 0,error:void 0,input:n}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function a1e(r,{machine:e,context:t},n,i){const s=(o,a)=>{if(typeof o=="string"){const c=Q4(e,o);if(!c)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const l=Xh(c,{id:a?.id,parent:r.self,syncSnapshot:a?.syncSnapshot,input:typeof a?.input=="function"?a.input({context:t,event:n,self:r.self}):a?.input,src:o,systemId:a?.systemId});return i[l.id]=l,l}else return Xh(o,{id:a?.id,parent:r.self,syncSnapshot:a?.syncSnapshot,input:a?.input,src:o,systemId:a?.systemId})};return(o,a)=>{const c=s(o,a);return i[c.id]=c,r.defer(()=>{c._processingStatus!==Ws.Stopped&&c.start()}),c}}function c1e(r,e,t,n,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:t.event,spawn:a1e(r,e,t.event,s),self:r.self,system:r.system};let a={};if(typeof i=="function")a=i(o,n);else for(const l of Object.keys(i)){const u=i[l];a[l]=typeof u=="function"?u(o,n):u}const c=Object.assign({},e.context,a);return[Gf(e,{context:c,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function Vt(r){function e(t,n){}return e.type="xstate.assign",e.assignment=r,e.resolve=c1e,e}function l1e(r,e,t,n,{event:i}){const s=typeof i=="function"?i(t,n):i;return[e,{event:s},void 0]}function u1e(r,{event:e}){r.defer(()=>r.emit(e))}function f1e(r){function e(t,n){}return e.type="xstate.emit",e.event=r,e.resolve=l1e,e.execute=u1e,e}const PB=new WeakMap;function Kd(r,e,t){let n=PB.get(r);return n?e in n||(n[e]=t()):(n={[e]:t()},PB.set(r,n)),n[e]}const d1e={},E0=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class o6{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(BW),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?xB(this.config.states,(n,i)=>new o6(n,{_parent:this,_key:i,_machine:this.machine})):d1e,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=hu(this.config.entry).slice(),this.exit=hu(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=hu(e.tags).slice()}_initialize(){this.transitions=$be(this),this.config.always&&(this.always=ah(this.config.always).map(e=>vf(this,NW,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(E0),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(E0),eventType:null})}:void 0,history:this.history,states:xB(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(E0)})),entry:this.entry.map(E0),exit:this.exit.map(E0),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Kd(this,"invoke",()=>hu(this.config.invoke).map((e,t)=>{const{src:n,systemId:i}=e,s=e.id??_B(this.id,t),o=typeof n=="string"?n:`xstate.invoke.${_B(this.id,t)}`;return{...e,src:o,id:s,systemId:i,toJSON(){const{onDone:a,onError:c,...l}=e;return{...l,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return Kd(this,"on",()=>[...this.transitions].flatMap(([t,n])=>n.map(i=>[t,i])).reduce((t,[n,i])=>(t[n]=t[n]||[],t[n].push(i),t),{}))}get after(){return Kd(this,"delayedTransitions",()=>Pbe(this))}get initial(){return Kd(this,"initial",()=>Dbe(this,this.config.initial))}next(e,t){const n=t.type,i=[];let s;const o=Kd(this,`candidates-${n}`,()=>Obe(this,n));for(const a of o){const{guard:c}=a,l=e.context;let u=!1;try{u=!c||t6(c,l,t,e)}catch(f){const d=typeof c=="string"?c:typeof c=="object"?c.type:void 0;throw new Error(`Unable to evaluate guard ${d?`'${d}' `:""}in transition for event '${n}' in state node '${this.id}':
${f.message}`)}if(u){i.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return Kd(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const n of Object.keys(e)){const i=e[n];if(i.states)for(const s of i.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(n=>!(!n.target&&!n.actions.length&&!n.reenter))));return Array.from(e)}}const h1e="#";class a6{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new o6(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:n,actors:i,delays:s}=this.implementations;return new a6(this.config,{actions:{...t,...e.actions},guards:{...n,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=Ybe(this.root,e.value),n=Ib(Tb(this.root,t));return Rv({_nodes:[...n],context:e.context||{},children:{},status:n6(n,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,n){return IE(e,t,n,[]).snapshot}microstep(e,t,n){return IE(e,t,n,[]).microstates}getTransitionData(e,t){return i6(this.root,e.value,e,t)||[]}getPreInitialState(e,t,n){const{context:i}=this.config,s=Rv({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?ep(s,t,e,[Vt(({spawn:a,event:c,self:l})=>i({spawn:a,input:c.input,self:l}))],n,void 0):s}getInitialSnapshot(e,t){const n=FW(t),i=[],s=this.getPreInitialState(e,n,i),o=AC([{target:[...YW(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,n,!0,i),{snapshot:a}=IE(o,n,e,i);return a}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=Z4(e),n=t.slice(1),i=gw(t[0])?t[0].slice(h1e.length):t[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Cb(s,n)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return r1e(e,t)}restoreSnapshot(e,t){const n={},i=e.children;Object.keys(i).forEach(c=>{const l=i[c],u=l.snapshot,f=l.src,d=typeof f=="string"?Q4(this,f):f;if(!d)return;const h=Xh(d,{id:c,parent:t.self,syncSnapshot:l.syncSnapshot,snapshot:u,src:f,systemId:l.systemId});n[c]=h});const s=Rv({...e,children:n,_nodes:Array.from(Ib(Tb(this.root,e.value)))},this),o=new Set;function a(c,l){if(!o.has(c)){o.add(c);for(const u in c){const f=c[u];if(f&&typeof f=="object"){if("xstate$$type"in f&&f.xstate$$type===e6){c[u]=l[f.id];continue}a(f,l)}}}}return a(s.context,n),s}}function p1e(r,e){return new a6(r,e)}function wd({schemas:r,actors:e,actions:t,guards:n,delays:i}){return{createMachine:s=>p1e({...s,schemas:r},{actors:e,actions:t,guards:n,delays:i})}}let tG=class{_tag="DeviceNotOnboardedError";originalError;constructor(e){this.originalError=new Error(e??"Device not onboarded.")}},g1e=class{_tag="DeviceLockedError";originalError;constructor(e){this.originalError=new Error(e??"Device locked.")}},rl=class{_tag="UnknownDAError";originalError;constructor(e){this.originalError=new Error(e??"Unknown error.")}};const rG=6e4;function bi(r){return typeof r=="function"}function c6(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var CE=c6(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function Rb(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Fm=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Bu(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(bi(u))try{u()}catch(p){s=p instanceof CE?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Bu(f),h=d.next();!h.done;h=d.next()){var g=h.value;try{$B(g)}catch(p){s=s??[],p instanceof CE?s=Wf(Wf([],Nu(s)),Nu(p.errors)):s.push(p)}}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(s)throw new CE(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)$B(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Rb(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&Rb(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}(),nG=Fm.EMPTY;function iG(r){return r instanceof Fm||r&&"closed"in r&&bi(r.remove)&&bi(r.add)&&bi(r.unsubscribe)}function $B(r){bi(r)?r():r.unsubscribe()}var m1e={Promise:void 0},y1e={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,Wf([r,e],Nu(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function sG(r){y1e.setTimeout(function(){throw r})}function DB(){}function kv(r){r()}var l6=function(r){ua(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,iG(t)&&t.add(n)):n.destination=w1e,n}return e.create=function(t,n,i){return new Qg(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Fm),v1e=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){Dy(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){Dy(n)}else Dy(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Dy(t)}},r}(),Qg=function(r){ua(e,r);function e(t,n,i){var s=r.call(this)||this,o;return bi(t)||!t?o={next:t??void 0,error:n??void 0,complete:i??void 0}:o=t,s.destination=new v1e(o),s}return e}(l6);function Dy(r){sG(r)}function b1e(r){throw r}var w1e={closed:!0,next:DB,error:b1e,complete:DB},u6=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function oG(r){return r}function x1e(r){return r.length===0?oG:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var ro=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,s=S1e(e)?e:new Qg(e,t,n);return kv(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=MB(t),new t(function(i,s){var o=new Qg({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[u6]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x1e(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=MB(e),new e(function(n,i){var s;t.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},r.create=function(e){return new r(e)},r}();function MB(r){var e;return(e=r??m1e.Promise)!==null&&e!==void 0?e:Promise}function _1e(r){return r&&bi(r.next)&&bi(r.error)&&bi(r.complete)}function S1e(r){return r&&r instanceof l6||_1e(r)&&iG(r)}function E1e(r){return bi(r?.lift)}function Pl(r){return function(e){if(E1e(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function bl(r,e,t,n,i){return new A1e(r,e,t,n,i)}var A1e=function(r){ua(e,r);function e(t,n,i,s,o,a){var c=r.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(u){t.error(u)}}:r.prototype._next,c._error=s?function(l){try{s(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=i?function(){try{i()}catch(l){t.error(l)}finally{this.unsubscribe()}}:r.prototype._complete,c}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(l6),I1e=c6(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Um=function(r){ua(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var n=new BB(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new I1e},e.prototype.next=function(t){var n=this;kv(function(){var i,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=Bu(n.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(t)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(t){var n=this;kv(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},e.prototype.complete=function(){var t=this;kv(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?nG:(this.currentObservers=null,a.push(t),new Fm(function(){n.currentObservers=null,Rb(a,t)}))},e.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,s=n.thrownError,o=n.isStopped;i?t.error(s):o&&t.complete()},e.prototype.asObservable=function(){var t=new ro;return t.source=this,t},e.create=function(t,n){return new BB(t,n)},e}(ro),BB=function(r){ua(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},e.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},e.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},e.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:nG},e}(Um),aG=function(r){ua(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,s=t._value;if(n)throw i;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(Um),f6={now:function(){return(f6.delegate||Date).now()},delegate:void 0},cG=function(r){ua(e,r);function e(t,n,i){t===void 0&&(t=1/0),n===void 0&&(n=1/0),i===void 0&&(i=f6);var s=r.call(this)||this;return s._bufferSize=t,s._windowTime=n,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=n===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,n),s}return e.prototype.next=function(t){var n=this,i=n.isStopped,s=n._buffer,o=n._infiniteTimeWindow,a=n._timestampProvider,c=n._windowTime;i||(s.push(t),!o&&s.push(a.now()+c)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),c=0;c<a.length&&!t.closed;c+=s?1:2)t.next(a[c]);return this._checkFinalizedStatuses(t),n},e.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,i=t._timestampProvider,s=t._buffer,o=t._infiniteTimeWindow,a=(o?1:2)*n;if(n<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var c=i.now(),l=0,u=1;u<s.length&&s[u]<=c;u+=2)l=u;l&&s.splice(0,l+1)}},e}(Um),C1e=function(r){ua(e,r);function e(t,n){return r.call(this)||this}return e.prototype.schedule=function(t,n){return this},e}(Fm),NB={setInterval:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setInterval.apply(void 0,Wf([r,e],Nu(t)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},T1e=function(r){ua(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),NB.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&NB.clearInterval(n)},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,s;try{this.work(t)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Rb(s,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(C1e),LB=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},r.now=f6.now,r}(),R1e=function(r){ua(e,r);function e(t,n){n===void 0&&(n=LB.now);var i=r.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(LB),d6=new R1e(T1e),k1e=d6,h6=new ro(function(r){return r.complete()});function lG(r){return r&&bi(r.schedule)}function uG(r){return r[r.length-1]}function fG(r){return lG(uG(r))?r.pop():void 0}function O1e(r,e){return typeof uG(r)=="number"?r.pop():e}var dG=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function hG(r){return bi(r?.then)}function pG(r){return bi(r[u6])}function gG(r){return Symbol.asyncIterator&&bi(r?.[Symbol.asyncIterator])}function mG(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function P1e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yG=P1e();function vG(r){return bi(r?.[yG])}function bG(r){return S4(this,arguments,function(){var t,n,i,s;return nw(this,function(o){switch(o.label){case 0:t=r.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,fl(t.read())];case 3:return n=o.sent(),i=n.value,s=n.done,s?[4,fl(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,fl(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function wG(r){return bi(r?.getReader)}function Pc(r){if(r instanceof ro)return r;if(r!=null){if(pG(r))return $1e(r);if(dG(r))return D1e(r);if(hG(r))return M1e(r);if(gG(r))return xG(r);if(vG(r))return B1e(r);if(wG(r))return N1e(r)}throw mG(r)}function $1e(r){return new ro(function(e){var t=r[u6]();if(bi(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function D1e(r){return new ro(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function M1e(r){return new ro(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,sG)})}function B1e(r){return new ro(function(e){var t,n;try{for(var i=Bu(r),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}e.complete()})}function xG(r){return new ro(function(e){L1e(r,e).catch(function(t){return e.error(t)})})}function N1e(r){return xG(bG(r))}function L1e(r,e){var t,n,i,s;return _4(this,void 0,void 0,function(){var o,a;return nw(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=E4(r),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function xu(r,e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var s=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(s),!i)return s}function _G(r,e){return e===void 0&&(e=0),Pl(function(t,n){t.subscribe(bl(n,function(i){return xu(n,r,function(){return n.next(i)},e)},function(){return xu(n,r,function(){return n.complete()},e)},function(i){return xu(n,r,function(){return n.error(i)},e)}))})}function SG(r,e){return e===void 0&&(e=0),Pl(function(t,n){n.add(r.schedule(function(){return t.subscribe(n)},e))})}function F1e(r,e){return Pc(r).pipe(SG(e),_G(e))}function U1e(r,e){return Pc(r).pipe(SG(e),_G(e))}function z1e(r,e){return new ro(function(t){var n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function q1e(r,e){return new ro(function(t){var n;return xu(t,e,function(){n=r[yG](),xu(t,e,function(){var i,s,o;try{i=n.next(),s=i.value,o=i.done}catch(a){t.error(a);return}o?t.complete():t.next(s)},0,!0)}),function(){return bi(n?.return)&&n.return()}})}function EG(r,e){if(!r)throw new Error("Iterable cannot be null");return new ro(function(t){xu(t,e,function(){var n=r[Symbol.asyncIterator]();xu(t,e,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function j1e(r,e){return EG(bG(r),e)}function V1e(r,e){if(r!=null){if(pG(r))return F1e(r,e);if(dG(r))return z1e(r,e);if(hG(r))return U1e(r,e);if(gG(r))return EG(r,e);if(vG(r))return q1e(r,e);if(wG(r))return j1e(r,e)}throw mG(r)}function tp(r,e){return e?V1e(r,e):Pc(r)}function p6(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=fG(r);return tp(r,t)}function AG(r){return r instanceof Date&&!isNaN(r)}var K1e=c6(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function H1e(r,e){var t=AG(r)?{first:r}:typeof r=="number"?{each:r}:r,n=t.first,i=t.each,s=t.with,o=s===void 0?W1e:s,a=t.scheduler,c=a===void 0?d6:a,l=t.meta,u=l===void 0?null:l;if(n==null&&i==null)throw new TypeError("No timeout provided.");return Pl(function(f,d){var h,g,p=null,m=0,y=function(v){g=xu(d,c,function(){try{h.unsubscribe(),Pc(o({meta:u,lastValue:p,seen:m})).subscribe(d)}catch(w){d.error(w)}},v)};h=f.subscribe(bl(d,function(v){g?.unsubscribe(),m++,d.next(p=v),i>0&&y(i)},void 0,void 0,function(){g?.closed||g?.unsubscribe(),p=null})),!m&&y(n!=null?typeof n=="number"?n:+n-c.now():i)})}function W1e(r){throw new K1e(r)}function _u(r,e){return Pl(function(t,n){var i=0;t.subscribe(bl(n,function(s){n.next(r.call(e,s,i++))}))})}function G1e(r,e,t,n,i,s,o,a){var c=[],l=0,u=0,f=!1,d=function(){f&&!c.length&&!l&&e.complete()},h=function(p){return l<n?g(p):c.push(p)},g=function(p){l++;var m=!1;Pc(t(p,u++)).subscribe(bl(e,function(y){e.next(y)},function(){m=!0},void 0,function(){if(m)try{l--;for(var y=function(){var v=c.shift();o||g(v)};c.length&&l<n;)y();d()}catch(v){e.error(v)}}))};return r.subscribe(bl(e,h,function(){f=!0,d()})),function(){}}function mw(r,e,t){return t===void 0&&(t=1/0),bi(e)?mw(function(n,i){return _u(function(s,o){return e(n,s,i,o)})(Pc(r(n,i)))},t):(typeof e=="number"&&(t=e),Pl(function(n,i){return G1e(n,i,r,t)}))}function Y1e(r){return r===void 0&&(r=1/0),mw(oG,r)}function IG(r,e,t){r===void 0&&(r=0),t===void 0&&(t=k1e);var n=-1;return e!=null&&(lG(e)?t=e:n=e),new ro(function(i){var s=AG(r)?+r-t.now():r;s<0&&(s=0);var o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=n?this.schedule(void 0,n):i.complete())},s)})}function J1e(r,e){return e===void 0&&(e=d6),IG(r,r,e)}function X1e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=fG(r),n=O1e(r,1/0),i=r;return i.length?i.length===1?Pc(i[0]):Y1e(n)(tp(i,t)):h6}function Z1e(r,e,t,n,i){return function(s,o){var a=t,c=e,l=0;s.subscribe(bl(o,function(u){var f=l++;c=a?r(c,u,f):(a=!0,u),o.next(c)},i))}}function Q1e(r){return r<=0?function(){return h6}:Pl(function(e,t){var n=0;e.subscribe(bl(t,function(i){++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function ewe(r,e){return Pl(Z1e(r,e,arguments.length>=2,!0))}function twe(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new Um}:e,n=r.resetOnError,i=n===void 0?!0:n,s=r.resetOnComplete,o=s===void 0?!0:s,a=r.resetOnRefCountZero,c=a===void 0?!0:a;return function(l){var u,f,d,h=0,g=!1,p=!1,m=function(){f?.unsubscribe(),f=void 0},y=function(){m(),u=d=void 0,g=p=!1},v=function(){var w=u;y(),w?.unsubscribe()};return Pl(function(w,_){h++,!p&&!g&&m();var x=d=d??t();_.add(function(){h--,h===0&&!p&&!g&&(f=TE(v,c))}),x.subscribe(_),!u&&h>0&&(u=new Qg({next:function(E){return x.next(E)},error:function(E){p=!0,m(),f=TE(y,i,E),x.error(E)},complete:function(){g=!0,m(),f=TE(y,o),x.complete()}}),Pc(w).subscribe(u))})(l)}}function TE(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(e===!0){r();return}if(e!==!1){var i=new Qg({next:function(){i.unsubscribe(),r()}});return Pc(e.apply(void 0,Wf([],Nu(t)))).subscribe(i)}}function CG(r,e){return Pl(function(t,n){var i=null,s=0,o=!1,a=function(){return o&&!i&&n.complete()};t.subscribe(bl(n,function(c){i?.unsubscribe();var l=0,u=s++;Pc(r(c,u)).subscribe(i=bl(n,function(f){return n.next(e?e(c,f,u,l++):f)},function(){i=null,a()}))},function(){o=!0,a()}))})}let Dp=class{input;inspect=!1;constructor(e){this.input=e.input,this.inspect=!!e.inspect}_execute(e){const t=this.makeStateMachine(e);return this._subscribeToStateMachine(t)}_subscribeToStateMachine(e){const t=Xh(e,{input:this.input}),n=new cG,i=a=>{const{context:c,status:l,output:u,error:f}=a;switch(l){case"active":n.next({status:K0.Pending,intermediateValue:c.intermediateValue});break;case"done":u.caseOf({Left:d=>{n.next({status:K0.Error,error:d})},Right:d=>{n.next({status:K0.Completed,output:d})}}),n.complete();break;case"error":n.error(f),n.complete();break;case"stopped":n.next({status:K0.Stopped}),n.complete();break;default:this._exhaustiveMatchingGuard(l)}},s=new ro(a=>{const c=n.subscribe(a);return()=>{o.unsubscribe(),c.unsubscribe(),t.stop()}}),o=t.subscribe(i);return t.start(),{observable:s.pipe(twe()),cancel:()=>{t.stop(),o.unsubscribe(),i(t.getSnapshot())}}}_exhaustiveMatchingGuard(e){throw console.log("_exhaustiveMatchingGuard status",e),new Error(`Unhandled status: ${e}`)}};var Ra=(r=>(r[r.Connected=0]="Connected",r[r.ReadyWithoutSecureChannel=1]="ReadyWithoutSecureChannel",r[r.ReadyWithSecureChannel=2]="ReadyWithSecureChannel",r))(Ra||{});let rwe=class extends Dp{makeStateMachine(e){const{getAppAndVersion:t,getDeviceSessionState:n,setDeviceSessionState:i,waitForDeviceUnlock:s,isDeviceOnboarded:o}=this.extractDependencies(e),a=this.input.unlockTimeout??rG;return wd({actors:{getAppAndVersion:ra(t),waitForDeviceUnlock:o1e(s)},guards:{isDeviceOnboarded:()=>o(),isDeviceLocked:({context:c})=>c._internalState.locked,hasError:({context:c})=>c._internalState.error!==null},actions:{assignErrorDeviceNotOnboarded:Vt({_internalState:c=>({...c.context._internalState,error:new tG})}),assignErrorDeviceLocked:Vt({_internalState:c=>({...c.context._internalState,error:new g1e}),intermediateValue:{requiredUserInteraction:Yr.UnlockDevice}}),assignErrorFromEvent:Vt({_internalState:c=>({...c.context._internalState,error:c.event.error})}),assignNoUserActionNeeded:Vt({intermediateValue:c=>({...c.context.intermediateValue,requiredUserInteraction:Yr.None})}),assignUserActionUnlockNeeded:Vt({intermediateValue:c=>({...c.context.intermediateValue,requiredUserInteraction:Yr.UnlockDevice})})}}).createMachine({id:"GetDeviceStatusDeviceAction",initial:"DeviceReady",context:c=>{const l=n(),{sessionStateType:u}=l;return{input:{unlockTimeout:c.input.unlockTimeout},intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{onboarded:!1,locked:!1,currentApp:u===Ra.ReadyWithoutSecureChannel?l.currentApp.name:null,currentAppVersion:null,error:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{guard:{type:"isDeviceOnboarded"},target:"AppAndVersionCheck",actions:Vt({_internalState:c=>({...c.context._internalState,onboarded:!0})})},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},UserActionUnlockDevice:{entry:"assignUserActionUnlockNeeded",exit:"assignNoUserActionNeeded",invoke:{id:"UserActionUnlockDevice",src:"waitForDeviceUnlock",input:c=>({unlockTimeout:a}),onDone:{target:"AppAndVersionCheck",actions:Vt({_internalState:c=>({...c.context._internalState,locked:!1})})},onError:{target:"Error",actions:"assignErrorDeviceLocked"}}},AppAndVersionCheck:{invoke:{src:"getAppAndVersion",onDone:{target:"ApplicationAvailableResultCheck",actions:Vt({_internalState:c=>{if(Es(c.event.output)){const l=n();return l.sessionStateType!==Ra.Connected?i({...l,currentApp:c.event.output.data}):i({deviceModelId:l.deviceModelId,sessionStateType:Ra.ReadyWithoutSecureChannel,deviceStatus:du.CONNECTED,currentApp:c.event.output.data,installedApps:[],isSecureConnectionAllowed:!1}),{...c.context._internalState,locked:!1,currentApp:c.event.output.data.name,currentAppVersion:c.event.output.data.version}}if("errorCode"in c.event.output.error){if(c.event.output.error.errorCode==="5515")return{...c.context._internalState,locked:!0};if(c.event.output.error.errorCode==="6e00")return{...c.context._internalState,locked:!1,currentApp:"BOLOS",currentAppVersion:"0.0.0"}}return{...c.context._internalState,error:c.event.output.error}}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ApplicationAvailableResultCheck:{always:[{guard:"hasError",target:"Error"},{target:"UserActionUnlockDevice",guard:"isDeviceLocked"},{target:"Success"}]},Success:{type:"final"},Error:{type:"final"}},output:c=>{const{context:l}=c,{error:u,currentApp:f,currentAppVersion:d}=l._internalState;return u?lt(u):Zt({currentApp:f,currentAppVersion:d})}})}extractDependencies(e){return{getAppAndVersion:()=>e.sendCommand(new Xg),waitForDeviceUnlock:({input:t})=>J1e(1e3).pipe(CG(()=>tp(e.sendCommand(new Xg))),mw(n=>!Es(n)&&"errorCode"in n.error&&n.error.errorCode==="5515"?h6:p6(void 0)),Q1e(1),H1e(t.unlockTimeout)),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},No=class{_tag="GeneralDmkError";originalError;constructor(e){e instanceof Error?this.originalError=e:e!==void 0&&(this.originalError=new Error(String(e)))}},nwe=class extends No{constructor(e){super(e),this.err=e}_tag="DeviceNotRecognizedError"},RE=class extends No{constructor(e){super(e),this.err=e}_tag="NoAccessibleDeviceError"},IC=class extends No{_tag="ConnectionOpeningError";constructor(e){super(e)}},FB=class extends No{constructor(e){super(e),this.err=e}_tag="UnknownDeviceError"},g6=class extends No{constructor(e){super(e),this.err=e}_tag="TransportNotSupportedError"},iwe=class extends No{constructor(e){super(e),this.err=e}_tag="SendApduTimeoutError"},swe=class extends No{constructor(e){super(e),this.err=e}_tag="TransportAlreadyExistsError"},Ov=class extends No{constructor(e){super(e),this.err=e}_tag="DeviceDisconnectedWhileSendingError"},kE=class extends No{constructor(e){super(e),this.err=e}_tag="AlreadySendingApduError"},owe=class extends No{constructor(e){super(e),this.err=e}_tag="DeviceDisconnectedBeforeSendingApdu"},awe=class extends No{constructor(e){super(e),this.err=e}_tag="NoTransportProvidedError"};const cwe=["BOLOS","OLOS","OLOS\0"],lwe=r=>cwe.includes(r);let yw=class extends Dp{makeStateMachine(e){const{closeApp:t,openApp:n,getDeviceSessionState:i,isDeviceOnboarded:s,setDeviceSessionState:o}=this.extractDependencies(e),a=this.input.unlockTimeout??rG,c=new rwe({input:{unlockTimeout:a}}).makeStateMachine(e);return wd({actors:{closeApp:ra(t),openApp:ra(n),getDeviceStatus:c},guards:{isDeviceOnboarded:()=>s(),isRequestedAppOpen:({context:l})=>l._internalState.currentlyRunningApp===null?!1:l._internalState.currentlyRunningApp===l.input.appName,isDashboardOpen:({context:l})=>{if(l._internalState.currentlyRunningApp===null)throw new Error("context.currentlyRunningApp === null");return lwe(l._internalState.currentlyRunningApp)},hasDisconnectedWhileSending:({context:l})=>l._internalState.error!==null&&l._internalState.error instanceof Ov,hasError:({context:l})=>l._internalState.error!==null},actions:{assignErrorDeviceNotOnboarded:Vt({_internalState:l=>({...l.context._internalState,error:new tG})}),assignUserActionNeededOpenApp:Vt({intermediateValue:l=>({...l.context.intermediateValue,requiredUserInteraction:Yr.ConfirmOpenApp})}),assignNoUserActionNeeded:Vt({intermediateValue:l=>({...l.context.intermediateValue,requiredUserInteraction:Yr.None})}),assignErrorFromEvent:Vt({_internalState:l=>({...l.context._internalState,error:l.event.error})}),assignNoError:Vt({_internalState:l=>({...l.context._internalState,error:null})})}}).createMachine({id:"OpenAppDeviceAction",initial:"DeviceReady",context:({input:l})=>{const u=i(),{sessionStateType:f}=u;return{input:l,intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{error:null,currentlyRunningApp:f===Ra.ReadyWithoutSecureChannel?u.currentApp.name:null}}},states:{DeviceReady:{always:{target:"OnboardingCheck"}},OnboardingCheck:{always:[{target:"GetDeviceStatus",guard:{type:"isDeviceOnboarded"}},{target:"Error",actions:"assignErrorDeviceNotOnboarded"}]},GetDeviceStatus:{invoke:{id:"deviceStatus",src:"getDeviceStatus",input:l=>({unlockTimeout:l.context.input.unlockTimeout}),onSnapshot:{actions:Vt({intermediateValue:l=>l.event.snapshot.context.intermediateValue})},onDone:{target:"CheckDeviceStatus",actions:Vt({_internalState:l=>l.event.output.caseOf({Right:u=>{const f=i();return f.sessionStateType!==Ra.Connected&&o({...f,currentApp:{name:u.currentApp,version:u.currentAppVersion}}),{...l.context._internalState,currentlyRunningApp:u.currentApp}},Left:u=>({...l.context._internalState,currentlyRunningApp:null,error:u})})})},onError:{target:"Error",actions:[Vt({_internalState:l=>({...l.context._internalState,currentlyRunningApp:null})}),"assignErrorFromEvent"]}}},CheckDeviceStatus:{always:[{target:"ApplicationReady",guard:"isRequestedAppOpen",actions:"assignNoError"},{target:"Error",guard:"hasError"},{target:"DashboardCheck"}]},DashboardCheck:{always:[{target:"OpenApplication",guard:"isDashboardOpen"},"CloseApplication"]},OpenApplication:{entry:"assignUserActionNeededOpenApp",exit:"assignNoUserActionNeeded",invoke:{src:"openApp",input:({context:l})=>({appName:l.input.appName}),onDone:{target:"OpenApplicationResultCheck",actions:Vt({_internalState:l=>Es(l.event.output)?{...l.context._internalState,currentlyRunningApp:l.context.input.appName}:{...l.context._internalState,error:l.event.output.error}})},onError:{target:"OpenApplicationResultCheck",actions:"assignErrorFromEvent"}}},OpenApplicationResultCheck:{always:[{target:"GetDeviceStatus",guard:"hasDisconnectedWhileSending"},{target:"Error",guard:"hasError"},{target:"GetDeviceStatus"}]},CloseApplication:{invoke:{src:"closeApp",onDone:{target:"CloseApplicationResultCheck",actions:Vt({_internalState:l=>Es(l.event.output)?{...l.context._internalState,currentlyRunningApp:"BOLOS"}:{...l.context._internalState,error:l.event.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CloseApplicationResultCheck:{always:[{target:"Error",guard:"hasError"},{target:"OpenApplication"}]},ApplicationReady:{always:"Success"},Success:{type:"final",actions:"assignNoError"},Error:{type:"final"}},output:({context:l})=>l._internalState.error?lt(l._internalState.error):Zt(void 0)})}extractDependencies(e){return{closeApp:async()=>e.sendCommand(new Rve),openApp:async t=>e.sendCommand(new obe({appName:t.input.appName})),getDeviceSessionState:()=>e.getDeviceSessionState(),setDeviceSessionState:t=>e.setDeviceSessionState(t),isDeviceOnboarded:()=>!0}}},uwe=class extends Dp{makeStateMachine(e){const{callTask:t}=this.extractDependencies(e);return wd({actors:{callTask:ra(t),openAppStateMachine:new yw({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:n})=>n._internalState.error===null},actions:{assignErrorFromEvent:Vt({_internalState:n=>({...n.context._internalState,error:n.event.error})})}}).createMachine({id:"CallTaskInAppDeviceAction",initial:"InitialState",context:({input:n})=>({input:n,intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{taskResponse:null,error:null}}),states:{InitialState:{always:[{target:"CallTask",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:Vt({intermediateValue:n=>n.event.snapshot.context.intermediateValue})},onDone:{actions:Vt({_internalState:n=>n.event.output.caseOf({Right:()=>n.context._internalState,Left:i=>({...n.context._internalState,error:i})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"CallTask",guard:"noInternalError"},"Error"]},CallTask:{entry:Vt({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:Vt({intermediateValue:{requiredUserInteraction:Yr.None}}),invoke:{id:"callTask",src:"callTask",input:n=>n.context.input.task,onDone:{target:"CallTaskResultCheck",actions:[Vt({_internalState:({event:n,context:i})=>Es(n.output)?{...i._internalState,taskResponse:n.output.data}:{...i._internalState,error:n.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},CallTaskResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:n})=>n._internalState.taskResponse?Zt(n._internalState.taskResponse):lt(n._internalState.error||new rl("No error in final state"))})}extractDependencies(e){return{callTask:t=>t.input(e)}}};var ch=null;typeof WebSocket<"u"?ch=WebSocket:typeof MozWebSocket<"u"?ch=MozWebSocket:typeof Sa<"u"?ch=Sa.WebSocket||Sa.MozWebSocket:typeof window<"u"?ch=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ch=self.WebSocket||self.MozWebSocket);const fwe=ch;var dwe=(r=>(r.GenuineCheck="GenuineCheck",r.ListInstalledApps="ListInstalledApps",r.UpdateMcu="UpdateMcu",r.UpdateFirmware="UpdateFirmware",r.InstallApp="InstallApp",r.UninstallApp="UninstallApp",r))(dwe||{}),hwe=(r=>(r.EXCHANGE="exchange",r.BULK="bulk",r.ERROR="error",r.WARNING="warning",r.SUCCESS="success",r))(hwe||{}),pwe=(r=>(r.SUCCESS="success",r.ERROR="error",r))(pwe||{}),gwe=(r=>(r.Opened="opened",r.Closed="closed",r.PermissionRequested="permission-requested",r.PermissionGranted="permission-granted",r.PreExchange="pre-exchange",r.Exchange="exchange",r.Progress="progress",r.Warning="warning",r.Error="error",r.Result="result",r))(gwe||{}),mwe=(r=>(r[r.AppAlreadyInstalled=0]="AppAlreadyInstalled",r[r.DeviceLocked=1]="DeviceLocked",r[r.OutOfMemory=2]="OutOfMemory",r[r.RefusedByUser=3]="RefusedByUser",r[r.Unknown=4]="Unknown",r))(mwe||{});let ywe=class{constructor(e){this.error=e,this.originalError=e}_tag="WebSocketConnectionError";originalError},UB=class extends Dp{makeStateMachine(e){const{sendCommand:t}=this.extractDependencies(e);return wd({actors:{sendCommand:ra(t),openAppStateMachine:new yw({input:{appName:this.input.appName}}).makeStateMachine(e)},guards:{skipOpenApp:()=>this.input.skipOpenApp,noInternalError:({context:n})=>n._internalState.error===null},actions:{assignErrorFromEvent:Vt({_internalState:n=>({...n.context._internalState,error:n.event.error})})}}).createMachine({id:"SendCommandInAppDeviceAction",initial:"InitialState",context:({input:n})=>({input:n,intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{commandResponse:null,error:null}}),states:{InitialState:{always:[{target:"SendCommand",guard:"skipOpenApp"},"OpenAppDeviceAction"]},OpenAppDeviceAction:{invoke:{id:"openAppStateMachine",input:{appName:this.input.appName},src:"openAppStateMachine",onSnapshot:{actions:Vt({intermediateValue:n=>n.event.snapshot.context.intermediateValue})},onDone:{actions:Vt({_internalState:n=>n.event.output.caseOf({Right:()=>n.context._internalState,Left:i=>({...n.context._internalState,error:i})})}),target:"CheckOpenAppDeviceActionResult"}}},CheckOpenAppDeviceActionResult:{always:[{target:"SendCommand",guard:"noInternalError"},"Error"]},SendCommand:{entry:Vt({intermediateValue:{requiredUserInteraction:this.input.requiredUserInteraction}}),exit:Vt({intermediateValue:{requiredUserInteraction:Yr.None}}),invoke:{id:"sendCommand",src:"sendCommand",input:({context:n})=>n.input.command,onDone:{target:"SendCommandResultCheck",actions:[Vt({_internalState:({event:n,context:i})=>Es(n.output)?{...i._internalState,commandResponse:n.output.data}:{...i._internalState,error:n.output.error}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SendCommandResultCheck:{always:[{target:"Success",guard:"noInternalError"},"Error"]},Success:{type:"final"},Error:{type:"final"}},output:({context:n})=>n._internalState.commandResponse?Zt(n._internalState.commandResponse):lt(n._internalState.error||new rl("No error in final state"))})}extractDependencies(e){return{sendCommand:t=>e.sendCommand(t.input)}}};function wi(r){return(typeof r=="object"&&r!==null||typeof r=="function")&&typeof r.then=="function"}function Js(r){switch(typeof r){case"string":case"symbol":return r.toString();case"function":return r.name;default:throw new Error(`Unexpected ${typeof r} service id type`)}}const OE=Symbol.for("@inversifyjs/common/islazyServiceIdentifier");let m6=class{[OE];#e;constructor(e){this.#e=e,this[OE]=!0}static is(e){return typeof e=="object"&&e!==null&&e[OE]===!0}unwrap(){return this.#e()}};function Yf(r,e){return Reflect.getOwnMetadata(e,r)}function y6(r,e,t){Reflect.defineMetadata(e,t,r)}function Mf(r,e,t,n){const i=n(Yf(r,e)??t());Reflect.defineMetadata(e,i,r)}const PE="@inversifyjs/container/bindingId";function Zl(){const r=Yf(Object,PE)??0;return r===Number.MAX_SAFE_INTEGER?y6(Object,PE,Number.MIN_SAFE_INTEGER):Mf(Object,PE,()=>r,e=>e+1),r}const ka={Request:"Request",Singleton:"Singleton",Transient:"Transient"},ri={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Instance:"Instance",Provider:"Provider",ResolvedValue:"ResolvedValue",ServiceRedirection:"ServiceRedirection"};function*TG(...r){for(const e of r)yield*e}let v6=class RG{#e;#t;#r;constructor(e){this.#e=new Map,this.#t={};for(const t of Reflect.ownKeys(e))this.#t[t]=new Map;this.#r=e}add(e,t){this.#n(e).push(t);for(const n of Reflect.ownKeys(t))this.#i(n,t[n]).push(e)}clone(){const e=Reflect.ownKeys(this.#r),t=new RG(this.#r);this.#o(this.#e,t.#e);for(const n of e)this.#o(this.#t[n],t.#t[n]);return t}get(e,t){return this.#t[e].get(t)}getAllKeys(e){return this.#t[e].keys()}removeByRelation(e,t){const n=this.get(e,t);if(n===void 0)return;const i=new Set(n);for(const s of i){const o=this.#e.get(s);if(o===void 0)throw new Error("Expecting model relation, none found");for(const a of o)a[e]===t&&this.#a(s,a);this.#e.delete(s)}}#n(e){let t=this.#e.get(e);return t===void 0&&(t=[],this.#e.set(e,t)),t}#i(e,t){let n=this.#t[e].get(t);return n===void 0&&(n=[],this.#t[e].set(t,n)),n}#o(e,t){for(const[n,i]of e)t.set(n,[...i])}#a(e,t){for(const n of Reflect.ownKeys(t))this.#s(e,n,t[n])}#s(e,t,n){const i=this.#t[t].get(n);if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1),i.length===0&&this.#t[t].delete(n)}}};var pg,Qo,gg;(function(r){r.moduleId="moduleId",r.serviceId="serviceId"})(pg||(pg={}));let zB=class CC{#e;#t;constructor(e,t){this.#e=t??new v6({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new CC(e)}add(e,t){this.#e.add(e,t)}clone(){return new CC(this.#t,this.#e.clone())}get(e){const t=[],n=this.#e.get(pg.serviceId,e);n!==void 0&&t.push(n);const i=this.#t?.get(e);if(i!==void 0&&t.push(i),t.length!==0)return TG(...t)}removeAllByModuleId(e){this.#e.removeByRelation(pg.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation(pg.serviceId,e)}};(function(r){r.id="id",r.moduleId="moduleId",r.serviceId="serviceId"})(Qo||(Qo={}));let qB=class TC{#e;#t;constructor(e,t){this.#e=t??new v6({id:{isOptional:!1},moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new TC(e)}clone(){return new TC(this.#t,this.#e.clone())}get(e){return this.getNonParentBindings(e)??this.#t?.get(e)}getById(e){return this.#e.get(Qo.id,e)??this.#t?.getById(e)}getByModuleId(e){return this.#e.get(Qo.moduleId,e)??this.#t?.getByModuleId(e)}getNonParentBindings(e){return this.#e.get(Qo.serviceId,e)}getNonParentBoundServices(){return this.#e.getAllKeys(Qo.serviceId)}removeById(e){this.#e.removeByRelation(Qo.id,e)}removeAllByModuleId(e){this.#e.removeByRelation(Qo.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation(Qo.serviceId,e)}set(e){const t={[Qo.id]:e.id,[Qo.serviceId]:e.serviceIdentifier};e.moduleId!==void 0&&(t[Qo.moduleId]=e.moduleId),this.#e.add(e,t)}};(function(r){r.moduleId="moduleId",r.serviceId="serviceId"})(gg||(gg={}));let jB=class RC{#e;#t;constructor(e,t){this.#e=t??new v6({moduleId:{isOptional:!0},serviceId:{isOptional:!1}}),this.#t=e}static build(e){return new RC(e)}add(e,t){this.#e.add(e,t)}clone(){return new RC(this.#t,this.#e.clone())}get(e){const t=[],n=this.#e.get(gg.serviceId,e);n!==void 0&&t.push(n);const i=this.#t?.get(e);if(i!==void 0&&t.push(i),t.length!==0)return TG(...t)}removeAllByModuleId(e){this.#e.removeByRelation(gg.moduleId,e)}removeAllByServiceId(e){this.#e.removeByRelation(gg.serviceId,e)}};const mg="@inversifyjs/core/classMetadataReflectKey";function yg(){return{constructorArguments:[],lifecycle:{postConstructMethodName:void 0,preDestroyMethodName:void 0},properties:new Map,scope:void 0}}const kG="@inversifyjs/core/pendingClassMetadataCountReflectKey",$E=Symbol.for("@inversifyjs/core/InversifyCoreError");let ii=class OG extends Error{[$E];kind;constructor(e,t,n){super(t,n),this[$E]=!0,this.kind=e}static is(e){return typeof e=="object"&&e!==null&&e[$E]===!0}static isErrorOfKind(e,t){return OG.is(e)&&e.kind===t}};var Nn,rp,zu;function kb(r){const e=Yf(r,mg)??yg();if(!function(t){const n=Yf(t,kG);return n!==void 0&&n!==0}(r))return function(t,n){const i=[];if(n.length<t.length)throw new ii(Nn.missingInjectionDecorator,`Found unexpected missing metadata on type "${t.name}". "${t.name}" constructor requires at least ${t.length.toString()} arguments, found ${n.length.toString()} instead.
Are you using @inject, @multiInject or @unmanaged decorators in every non optional constructor argument?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`);for(let s=0;s<n.length;++s)n[s]===void 0&&i.push(s);if(i.length>0)throw new ii(Nn.missingInjectionDecorator,`Found unexpected missing metadata on type "${t.name}" at constructor indexes "${i.join('", "')}".

Are you using @inject, @multiInject or @unmanaged decorators at those indexes?

If you're using typescript and want to rely on auto injection, set "emitDecoratorMetadata" compiler option to true`)}(r,e.constructorArguments),e;(function(t,n){const i=[];for(let s=0;s<n.constructorArguments.length;++s){const o=n.constructorArguments[s];o!==void 0&&o.kind!==rp.unknown||i.push(`  - Missing or incomplete metadata for type "${t.name}" at constructor argument with index ${s.toString()}.
Every constructor parameter must be decorated either with @inject, @multiInject or @unmanaged decorator.`)}for(const[s,o]of n.properties)o.kind===rp.unknown&&i.push(`  - Missing or incomplete metadata for type "${t.name}" at property "${s.toString()}".
This property must be decorated either with @inject or @multiInject decorator.`);throw i.length===0?new ii(Nn.unknown,`Unexpected class metadata for type "${t.name}" with uncompletion traces.
This might be caused by one of the following reasons:

1. A third party library is targeting inversify reflection metadata.
2. A bug is causing the issue. Consider submiting an issue to fix it.`):new ii(Nn.missingInjectionDecorator,`Invalid class metadata at type ${t.name}:

${i.join(`

`)}`)})(r,e)}function vwe(){return 0}function bwe(r){return e=>{e!==void 0&&e.kind===rp.unknown&&Mf(r,kG,vwe,t=>t-1)}}function wwe(r,e){return(...t)=>n=>{if(n===void 0)return r(...t);if(n.kind===zu.unmanaged)throw new ii(Nn.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found");return e(n,...t)}}function xwe(r){if(r.kind!==rp.unknown&&r.isFromTypescriptParamType!==!0)throw new ii(Nn.injectionDecoratorConflict,"Unexpected injection found. Multiple @inject, @multiInject or @unmanaged decorators found")}(function(r){r[r.injectionDecoratorConflict=0]="injectionDecoratorConflict",r[r.missingInjectionDecorator=1]="missingInjectionDecorator",r[r.planning=2]="planning",r[r.resolution=3]="resolution",r[r.unknown=4]="unknown"})(Nn||(Nn={})),function(r){r[r.unknown=32]="unknown"}(rp||(rp={})),function(r){r[r.multipleInjection=0]="multipleInjection",r[r.singleInjection=1]="singleInjection",r[r.unmanaged=2]="unmanaged"}(zu||(zu={}));const _we=wwe(function(r,e){return{kind:r,name:void 0,optional:!1,tags:new Map,value:e}},function(r,e,t){return xwe(r),{...r,kind:e,value:t}});function VB(r,e){return t=>{const n=t.properties.get(e);return t.properties.set(e,r(n)),t}}var tu;function Swe(r,e,t,n){if(ii.isErrorOfKind(n,Nn.injectionDecoratorConflict)){const i=function(s,o,a){if(a===void 0){if(o===void 0)throw new ii(Nn.unknown,"Unexpected undefined property and index values");return{kind:tu.property,property:o,targetClass:s.constructor}}return typeof a=="number"?{index:a,kind:tu.parameter,targetClass:s}:{kind:tu.method,method:o,targetClass:s}}(r,e,t);throw new ii(Nn.injectionDecoratorConflict,`Unexpected injection error.

Cause:

${n.message}

Details

${function(s){switch(s.kind){case tu.method:return`[class: "${s.targetClass.name}", method: "${s.method.toString()}"]`;case tu.parameter:return`[class: "${s.targetClass.name}", index: "${s.index.toString()}"]`;case tu.property:return`[class: "${s.targetClass.name}", property: "${s.property.toString()}"]`}}(i)}`,{cause:n})}throw n}function Ewe(r,e){return(t,n,i)=>{try{i===void 0?function(s,o){const a=DE(s,o);return(c,l)=>{Mf(c.constructor,mg,yg,VB(a(c),l))}}(r,e)(t,n):typeof i=="number"?function(s,o){const a=DE(s,o);return(c,l,u)=>{if(!function(f,d){return typeof f=="function"&&d===void 0}(c,l))throw new ii(Nn.injectionDecoratorConflict,`Found an @inject decorator in a non constructor parameter.
Found @inject decorator at method "${l?.toString()??""}" at class "${c.constructor.name}"`);Mf(c,mg,yg,function(f,d){return h=>{const g=h.constructorArguments[d];return h.constructorArguments[d]=f(g),h}}(a(c),u))}}(r,e)(t,n,i):function(s,o){const a=DE(s,o);return(c,l,u)=>{if(!function(f){return f.set!==void 0}(u))throw new ii(Nn.injectionDecoratorConflict,`Found an @inject decorator in a non setter property method.
Found @inject decorator at method "${l.toString()}" at class "${c.constructor.name}"`);Mf(c.constructor,mg,yg,VB(a(c),l))}}(r,e)(t,n,i)}catch(s){Swe(t,n,i,s)}}}function DE(r,e){return t=>{const n=e(t);return i=>(n(i),r(i))}}function Xe(r){return Ewe(_we(zu.singleInjection,r),bwe)}(function(r){r[r.method=0]="method",r[r.parameter=1]="parameter",r[r.property=2]="property"})(tu||(tu={}));const KB="@inversifyjs/core/classIsInjectableFlagReflectKey",Awe=[Array,BigInt,Boolean,Function,Number,Object,String];function Iwe(r){const e=Yf(r,"design:paramtypes");e!==void 0&&Mf(r,mg,yg,function(t){return n=>(t.forEach((i,s)=>{var o;n.constructorArguments[s]!==void 0||(o=i,Awe.includes(o))||(n.constructorArguments[s]=function(a){return{isFromTypescriptParamType:!0,kind:zu.singleInjection,name:void 0,optional:!1,tags:new Map,value:a}}(i))}),n)}(e))}function Et(r){return e=>{(function(t){if(Yf(t,KB)!==void 0)throw new ii(Nn.injectionDecoratorConflict,`Cannot apply @injectable decorator multiple times at class "${t.name}"`);y6(t,KB,!0)})(e),Iwe(e)}}var Rh;(function(r){r[r.multipleInjection=0]="multipleInjection",r[r.singleInjection=1]="singleInjection"})(Rh||(Rh={}));class Mp{#e;constructor(e){this.#e=e}get name(){return this.#e.elem.name}get serviceIdentifier(){return this.#e.elem.serviceIdentifier}get tags(){return this.#e.elem.tags}getAncestor(){if(this.#e.previous!==void 0)return new Mp(this.#e.previous)}}class b6{last;constructor(e){this.last=e}concat(e){return new b6({elem:e,previous:this.last})}[Symbol.iterator](){let e=this.last;return{next:()=>{if(e===void 0)return{done:!0,value:void 0};const t=e.elem;return e=e.previous,{done:!1,value:t}}}}}function vw(r,e,t){const n=t?.customServiceIdentifier??e.serviceIdentifier,i=[...r.getBindings(n)??[]].filter(s=>s.isSatisfiedBy(e));if(i.length===0&&r.autobindOptions!==void 0&&typeof n=="function"){const s=function(o,a){const c=kb(a),l=c.scope??o.scope;return{cache:{isRight:!1,value:void 0},id:Zl(),implementationType:a,isSatisfiedBy:()=>!0,moduleId:void 0,onActivation:void 0,onDeactivation:void 0,scope:l,serviceIdentifier:a,type:ri.Instance}}(r.autobindOptions,n);r.setBinding(s),i.push(s)}return i}function Jf(r){return r.redirections!==void 0}function PG(r,e,t,n){let i,s;Jf(t)?(i=t.binding.targetServiceIdentifier,s=t.binding.serviceIdentifier):(i=t.serviceIdentifier,s=t.parent?.binding.serviceIdentifier),Array.isArray(r)?function(o,a,c,l,u){if(o.length!==0){const f=`Ambiguous bindings found for service: "${Js(c)}".

Registered bindings:

${o.map(d=>function(h){switch(h.type){case ri.Instance:return`[ type: "${h.type}", serviceIdentifier: "${Js(h.serviceIdentifier)}", scope: "${h.scope}", implementationType: "${h.implementationType.name}" ]`;case ri.ServiceRedirection:return`[ type: "${h.type}", serviceIdentifier: "${Js(h.serviceIdentifier)}", redirection: "${Js(h.targetServiceIdentifier)}" ]`;default:return`[ type: "${h.type}", serviceIdentifier: "${Js(h.serviceIdentifier)}", scope: "${h.scope}" ]`}}(d.binding)).join(`
`)}

Trying to resolve bindings for "${$G(c,l)}".

${DG(u)}`;throw new ii(Nn.planning,f)}a||HB(c,l,u)}(r,e,i,s,n):function(o,a,c,l,u){o!==void 0||a||HB(c,l,u)}(r,e,i,s,n)}function HB(r,e,t){const n=`No bindings found for service: "${Js(r)}".

Trying to resolve bindings for "${$G(r,e)}".

${DG(t)}`;throw new ii(Nn.planning,n)}function $G(r,e){return e===void 0?`${Js(r)} (Root service)`:Js(e)}function DG(r){const e=r.tags.size===0?"":`
- tags:
  - ${[...r.tags.keys()].map(t=>t.toString()).join(`
  - `)}`;return`Binding constraints:
- service identifier: ${Js(r.serviceIdentifier)}
- name: ${r.name?.toString()??"-"}${e}`}function MG(r,e,t){if(r.redirections.length!==1)PG(r.redirections,e,r,t);else{const[n]=r.redirections;Jf(n)&&MG(n,e,t)}}function w6(r,e,t){if(Array.isArray(r.bindings)&&r.bindings.length===1){const[n]=r.bindings;Jf(n)&&MG(n,e,t)}else PG(r.bindings,e,r,t)}function Cwe(r,e){if(function(t){return t instanceof Error&&(t instanceof RangeError&&/stack space|call stack|too much recursion/i.test(t.message)||t.name==="InternalError"&&/too much recursion/.test(t.message))}(e)){const t=function(n){const i=[...n];return i.length===0?"(No dependency trace)":i.map(Js).join(" -> ")}(function(n){const i=new Set;for(const s of n.servicesBranch){if(i.has(s))return[...i,s];i.add(s)}return[...i]}(r));throw new ii(Nn.planning,`Circular dependency found: ${t}`,{cause:e})}throw e}function Twe(r){try{const e=new Map;r.rootConstraints.tag!==void 0&&e.set(r.rootConstraints.tag.key,r.rootConstraints.tag.value);const t=new b6({elem:{name:r.rootConstraints.name,serviceIdentifier:r.rootConstraints.serviceIdentifier,tags:e},previous:void 0}),n=new Mp(t.last),i=vw(r,n),s=[],o={bindings:s,parent:void 0,serviceIdentifier:r.rootConstraints.serviceIdentifier};if(s.push(...bw(r,t,i,o)),!r.rootConstraints.isMultiple){w6(o,r.rootConstraints.isOptional??!1,n);const[a]=s;o.bindings=a}return{tree:{root:o}}}catch(e){Cwe(r,e)}}function Rwe(r,e,t,n){const i={binding:e,classMetadata:r.getClassMetadata(e.implementationType),constructorParams:[],parent:n,propertyParams:new Map};return BG({autobindOptions:r.autobindOptions,getBindings:r.getBindings,getClassMetadata:r.getClassMetadata,node:i,servicesBranch:r.servicesBranch,setBinding:r.setBinding},t)}function WB(r,e,t){if(t.kind===zu.unmanaged)return;const n=m6.is(t.value)?t.value.unwrap():t.value,i=e.concat({name:t.name,serviceIdentifier:n,tags:t.tags}),s=new Mp(i.last),o=vw(r,s),a=[],c={bindings:a,parent:r.node,serviceIdentifier:n};if(a.push(...bw(r,i,o,c)),t.kind===zu.singleInjection){w6(c,t.optional,s);const[l]=a;c.bindings=l}return c}function kwe(r,e,t){const n=m6.is(t.value)?t.value.unwrap():t.value,i=e.concat({name:t.name,serviceIdentifier:n,tags:t.tags}),s=new Mp(i.last),o=vw(r,s),a=[],c={bindings:a,parent:r.node,serviceIdentifier:n};if(a.push(...bw(r,i,o,c)),t.kind===Rh.singleInjection){w6(c,t.optional,s);const[l]=a;c.bindings=l}return c}function Owe(r,e,t,n){const i={binding:e,params:[],parent:n};return BG({autobindOptions:r.autobindOptions,getBindings:r.getBindings,getClassMetadata:r.getClassMetadata,node:i,servicesBranch:r.servicesBranch,setBinding:r.setBinding},t)}function bw(r,e,t,n){const i=Jf(n)?n.binding.targetServiceIdentifier:n.serviceIdentifier;r.servicesBranch.push(i);const s=[];for(const o of t)switch(o.type){case ri.Instance:s.push(Rwe(r,o,e,n));break;case ri.ResolvedValue:s.push(Owe(r,o,e,n));break;case ri.ServiceRedirection:{const a=Pwe(r,e,o,n);s.push(a);break}default:s.push({binding:o,parent:n})}return r.servicesBranch.pop(),s}function Pwe(r,e,t,n){const i={binding:t,parent:n,redirections:[]},s=vw(r,new Mp(e.last),{customServiceIdentifier:t.targetServiceIdentifier});return i.redirections.push(...bw(r,e,s,i)),i}function BG(r,e){return r.node.binding.type===ri.Instance?function(t,n,i){const s=n.classMetadata;for(const[o,a]of s.constructorArguments.entries())n.constructorParams[o]=WB(t,i,a);for(const[o,a]of s.properties){const c=WB(t,i,a);c!==void 0&&n.propertyParams.set(o,c)}return t.node}(r,r.node,e):function(t,n,i){const s=n.binding.metadata;for(const[o,a]of s.arguments.entries())n.params[o]=kwe(t,i,a);return t.node}(r,r.node,e)}var bf;(function(r){r[r.singleMandatory=0]="singleMandatory",r[r.singleOptional=1]="singleOptional",r[r.multipleMandatory=2]="multipleMandatory",r[r.multipleOptional=3]="multipleOptional",r[r.length=4]="length"})(bf||(bf={}));class $we{#e;#t;#r;#n;#i;constructor(){this.#e=this.#o(),this.#t=this.#o(),this.#n=this.#o(),this.#r=this.#o(),this.#i=[]}clearCache(){for(const e of this.#u())e.clear();for(const e of this.#i)e.clearCache()}get(e){return e.name===void 0?e.tag===void 0?this.#s(this.#e,e).get(e.serviceIdentifier):this.#s(this.#r,e).get(e.serviceIdentifier)?.get(e.tag.key)?.get(e.tag.value):e.tag===void 0?this.#s(this.#t,e).get(e.serviceIdentifier)?.get(e.name):this.#s(this.#n,e).get(e.serviceIdentifier)?.get(e.name)?.get(e.tag.key)?.get(e.tag.value)}set(e,t){e.name===void 0?e.tag===void 0?this.#s(this.#e,e).set(e.serviceIdentifier,t):this.#a(this.#a(this.#s(this.#r,e),e.serviceIdentifier),e.tag.key).set(e.tag.value,t):e.tag===void 0?this.#a(this.#s(this.#t,e),e.serviceIdentifier).set(e.name,t):this.#a(this.#a(this.#a(this.#s(this.#n,e),e.serviceIdentifier),e.name),e.tag.key).set(e.tag.value,t)}subscribe(e){this.#i.push(e)}#o(){const e=new Array(bf.length);for(let t=0;t<e.length;++t)e[t]=new Map;return e}#a(e,t){let n=e.get(t);return n===void 0&&(n=new Map,e.set(t,n)),n}#s(e,t){return e[this.#c(t)]}#u(){return[...this.#e,...this.#t,...this.#n,...this.#r]}#c(e){return e.isMultiple?e.optional===!0?bf.multipleOptional:bf.multipleMandatory:e.optional===!0?bf.singleOptional:bf.singleMandatory}}function NG(r,e){return wi(e)?(r.cache={isRight:!0,value:e},e.then(t=>GB(r,t))):GB(r,e)}function GB(r,e){return r.cache={isRight:!0,value:e},e}function Dwe(r,e,t){const n=r.getActivations(e);return n===void 0?t:wi(t)?YB(r,t,n[Symbol.iterator]()):function(i,s,o){let a=s,c=o.next();for(;c.done!==!0;){const l=c.value(i.context,a);if(wi(l))return YB(i,l,o);a=l,c=o.next()}return a}(r,t,n[Symbol.iterator]())}async function YB(r,e,t){let n=await e,i=t.next();for(;i.done!==!0;)n=await i.value(r.context,n),i=t.next();return n}function Pv(r,e,t){let n=t;if(e.onActivation!==void 0){const i=e.onActivation;n=wi(n)?n.then(s=>i(r.context,s)):i(r.context,n)}return Dwe(r,e.serviceIdentifier,n)}function x6(r){return(e,t)=>t.cache.isRight?t.cache.value:NG(t,Pv(e,t,r(e,t)))}const Mwe=x6(function(r,e){return e.value});function Bwe(r){return r}function _6(r,e){return(t,n)=>{const i=r(n);switch(i.scope){case ka.Singleton:return i.cache.isRight?i.cache.value:NG(i,Pv(t,i,e(t,n)));case ka.Request:{if(t.requestScopeCache.has(i.id))return t.requestScopeCache.get(i.id);const s=Pv(t,i,e(t,n));return t.requestScopeCache.set(i.id,s),s}case ka.Transient:return Pv(t,i,e(t,n))}}}const Nwe=(r=>_6(Bwe,r))(function(r,e){return e.value(r.context)}),Lwe=x6(function(r,e){return e.factory(r.context)});function JB(r,e,t){const n=function(i,s,o){if(o!==void 0){if(!(o in i))throw new ii(Nn.resolution,`Expecting a "${o.toString()}" property when resolving "${s.implementationType.name}" class @postConstruct decorated method, none found.`);if(typeof i[o]!="function")throw new ii(Nn.resolution,`Expecting a "${o.toString()}" method when resolving "${s.implementationType.name}" class @postConstruct decorated method, a non function property was found instead.`);{let a;try{a=i[o]()}catch(c){throw new ii(Nn.resolution,`Unexpected error found when calling "${o.toString()}" @postConstruct decorated method on class "${s.implementationType.name}"`,{cause:c})}if(wi(a))return async function(c,l,u){try{await u}catch(f){throw new ii(Nn.resolution,`Unexpected error found when calling "${l.toString()}" @postConstruct decorated method on class "${c.implementationType.name}"`,{cause:f})}}(s,o,a)}}}(r,e,t);return wi(n)?n.then(()=>r):r}function XB(r){return(e,t,n)=>{const i=new n.binding.implementationType(...e),s=r(t,i,n);return wi(s)?s.then(()=>JB(i,n.binding,n.classMetadata.lifecycle.postConstructMethodName)):JB(i,n.binding,n.classMetadata.lifecycle.postConstructMethodName)}}const Fwe=x6(function(r,e){return e.provider(r.context)});function Uwe(r){return r.binding}function zwe(r){return r.binding}const ZB=function(r){return(e,t,n)=>{const i=[];for(const[s,o]of n.propertyParams){const a=n.classMetadata.properties.get(s);if(a===void 0)throw new ii(Nn.resolution,`Expecting metadata at property "${s.toString()}", none found`);a.kind!==zu.unmanaged&&o.bindings!==void 0&&(t[s]=r(e,o),wi(t[s])&&i.push((async()=>{t[s]=await t[s]})()))}if(i.length>0)return Promise.all(i).then(()=>{})}}(ww),QB=function(r){return function e(t,n){const i=[];for(const s of n.redirections)Jf(s)?i.push(...e(t,s)):i.push(r(t,s));return i}}(kC),qwe=function(r,e,t){return(n,i)=>{const s=r(n,i);return wi(s)?e(s,n,i):t(s,n,i)}}(function(r){return(e,t)=>{const n=[];for(const i of t.constructorParams)i===void 0?n.push(void 0):n.push(r(e,i));return n.some(wi)?Promise.all(n):n}}(ww),function(r){return async(e,t,n)=>{const i=await e;return r(i,t,n)}}(XB(ZB)),XB(ZB)),jwe=function(r){return(e,t)=>{const n=r(e,t);return wi(n)?n.then(i=>t.binding.factory(...i)):t.binding.factory(...n)}}(function(r){return(e,t)=>{const n=[];for(const i of t.params)n.push(r(e,i));return n.some(wi)?Promise.all(n):n}}(ww)),Vwe=(r=>_6(Uwe,r))(qwe),Kwe=(r=>_6(zwe,r))(jwe);function Hwe(r){return ww(r,r.planResult.tree.root)}function kC(r,e){switch(e.binding.type){case ri.ConstantValue:return Mwe(r,e.binding);case ri.DynamicValue:return Nwe(r,e.binding);case ri.Factory:return Lwe(r,e.binding);case ri.Instance:return Vwe(r,e);case ri.Provider:return Fwe(r,e.binding);case ri.ResolvedValue:return Kwe(r,e)}}function ww(r,e){if(e.bindings!==void 0)return Array.isArray(e.bindings)?function(t,n){const i=[];for(const s of n)Jf(s)?i.push(...QB(t,s)):i.push(kC(t,s));return i.some(wi)?Promise.all(i):i}(r,e.bindings):function(t,n){if(Jf(n)){const i=QB(t,n);if(i.length===1)return i[0];throw new ii(Nn.resolution,"Unexpected multiple resolved values on single injection")}return kC(t,n)}(r,e.bindings)}function Wwe(r){return r.scope!==void 0}function eN(r,e){if(r.lifecycle.preDestroyMethodName!==void 0&&typeof e[r.lifecycle.preDestroyMethodName]=="function")return e[r.lifecycle.preDestroyMethodName]()}function tN(r,e,t){const n=r.getDeactivations(e);if(n!==void 0)return wi(t)?rN(t,n[Symbol.iterator]()):function(i,s){let o=s.next();for(;o.done!==!0;){const a=o.value(i);if(wi(a))return rN(i,s);o=s.next()}}(t,n[Symbol.iterator]())}async function rN(r,e){const t=await r;let n=e.next();for(;n.done!==!0;)await n.value(t),n=e.next()}function Gwe(r,e){const t=function(n,i){if(i.type===ri.Instance){const s=n.getClassMetadata(i.implementationType),o=i.cache.value;return wi(o)?o.then(a=>eN(s,a)):eN(s,o)}}(r,e);return t===void 0?nN(r,e):t.then(()=>nN(r,e))}function nN(r,e){const t=e.cache;return wi(t.value)?t.value.then(n=>iN(r,e,n)):iN(r,e,t.value)}function iN(r,e,t){let n;return e.onDeactivation!==void 0&&(n=(0,e.onDeactivation)(t)),n===void 0?tN(r,e.serviceIdentifier,t):n.then(()=>tN(r,e.serviceIdentifier,t))}function S6(r,e){if(e===void 0)return;const t=function(i){const s=[];for(const o of i)Wwe(o)&&o.scope===ka.Singleton&&o.cache.isRight&&s.push(o);return s}(e),n=[];for(const i of t){const s=Gwe(r,i);s!==void 0&&n.push(s)}return n.length>0?Promise.all(n).then(()=>{}):void 0}function Ywe(r,e){const t=r.getBindingsFromModule(e);return S6(r,t)}function sN(r,e){const t=r.getBindings(e);return S6(r,t)}const ME="@inversifyjs/container/bindingId";let bn=class{#e;#t;constructor(e){this.#e=function(){const t=Yf(Object,ME)??0;return t===Number.MAX_SAFE_INTEGER?y6(Object,ME,Number.MIN_SAFE_INTEGER):Mf(Object,ME,()=>t,n=>n+1),t}(),this.#t=e}get id(){return this.#e}load(e){return this.#t(e)}};const LG=Symbol.for("@inversifyjs/container/bindingIdentifier");function oN(r){return typeof r=="object"&&r!==null&&r[LG]===!0}let lf=class{static always=e=>!0};function E6(r){return{[LG]:!0,id:r.id}}function H0(r){return e=>{for(let t=e.getAncestor();t!==void 0;t=t.getAncestor())if(r(t))return!0;return!1}}function A0(r){return e=>e.name===r}function My(r){return e=>e.serviceIdentifier===r}function I0(r,e){return t=>t.tags.has(r)&&t.tags.get(r)===e}function Jwe(r){return r.name===void 0&&r.tags.size===0}function By(r){const e=H0(r);return t=>!e(t)}function Ny(r){return e=>{const t=e.getAncestor();return t===void 0||!r(t)}}function Ly(r){return e=>{const t=e.getAncestor();return t!==void 0&&r(t)}}let Xwe=class{#e;constructor(e){this.#e=e}getIdentifier(){return E6(this.#e)}inRequestScope(){return this.#e.scope=ka.Request,new Bf(this.#e)}inSingletonScope(){return this.#e.scope=ka.Singleton,new Bf(this.#e)}inTransientScope(){return this.#e.scope=ka.Transient,new Bf(this.#e)}},aN=class{#e;#t;#r;#n;constructor(e,t,n,i){this.#e=e,this.#t=t,this.#r=n,this.#n=i}to(e){const t=kb(e),n={cache:{isRight:!1,value:void 0},id:Zl(),implementationType:e,isSatisfiedBy:lf.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:t.scope??this.#r,serviceIdentifier:this.#n,type:ri.Instance};return this.#e(n),new BE(n)}toSelf(){if(typeof this.#n!="function")throw new Error('"toSelf" function can only be applied when a newable function is used as service identifier');return this.to(this.#n)}toConstantValue(e){const t={cache:{isRight:!1,value:void 0},id:Zl(),isSatisfiedBy:lf.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:ka.Singleton,serviceIdentifier:this.#n,type:ri.ConstantValue,value:e};return this.#e(t),new Bf(t)}toDynamicValue(e){const t={cache:{isRight:!1,value:void 0},id:Zl(),isSatisfiedBy:lf.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:this.#r,serviceIdentifier:this.#n,type:ri.DynamicValue,value:e};return this.#e(t),new BE(t)}toResolvedValue(e,t){const n={cache:{isRight:!1,value:void 0},factory:e,id:Zl(),isSatisfiedBy:lf.always,metadata:this.#i(t),moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:this.#r,serviceIdentifier:this.#n,type:ri.ResolvedValue};return this.#e(n),new BE(n)}toFactory(e){const t={cache:{isRight:!1,value:void 0},factory:e,id:Zl(),isSatisfiedBy:lf.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,scope:ka.Singleton,serviceIdentifier:this.#n,type:ri.Factory};return this.#e(t),new Bf(t)}toProvider(e){const t={cache:{isRight:!1,value:void 0},id:Zl(),isSatisfiedBy:lf.always,moduleId:this.#t,onActivation:void 0,onDeactivation:void 0,provider:e,scope:ka.Singleton,serviceIdentifier:this.#n,type:ri.Provider};return this.#e(t),new Bf(t)}toService(e){const t={id:Zl(),isSatisfiedBy:lf.always,moduleId:this.#t,serviceIdentifier:this.#n,targetServiceIdentifier:e,type:ri.ServiceRedirection};this.#e(t)}#i(e){return{arguments:(e??[]).map(t=>function(n){return typeof n=="object"&&!m6.is(n)}(t)?{kind:t.isMultiple===!0?Rh.multipleInjection:Rh.singleInjection,name:t.name,optional:t.optional??!1,tags:new Map((t.tags??[]).map(n=>[n.key,n.value])),value:t.serviceIdentifier}:{kind:Rh.singleInjection,name:void 0,optional:!1,tags:new Map,value:t})}}},FG=class{#e;constructor(e){this.#e=e}getIdentifier(){return E6(this.#e)}onActivation(e){return this.#e.onActivation=e,new OC(this.#e)}onDeactivation(e){return this.#e.onDeactivation=e,new OC(this.#e)}},OC=class{#e;constructor(e){this.#e=e}getIdentifier(){return E6(this.#e)}when(e){return this.#e.isSatisfiedBy=e,new FG(this.#e)}whenAnyAncestor(e){return this.when(H0(e))}whenAnyAncestorIs(e){return this.when(H0(My(e)))}whenAnyAncestorNamed(e){return this.when(function(t){return H0(A0(t))}(e))}whenAnyAncestorTagged(e,t){return this.when(function(n,i){return H0(I0(n,i))}(e,t))}whenDefault(){return this.when(Jwe)}whenNamed(e){return this.when(A0(e))}whenNoParent(e){return this.when(Ny(e))}whenNoParentIs(e){return this.when(Ny(My(e)))}whenNoParentNamed(e){return this.when(function(t){return Ny(A0(t))}(e))}whenNoParentTagged(e,t){return this.when(function(n,i){return Ny(I0(n,i))}(e,t))}whenParent(e){return this.when(Ly(e))}whenParentIs(e){return this.when(Ly(My(e)))}whenParentNamed(e){return this.when(function(t){return Ly(A0(t))}(e))}whenParentTagged(e,t){return this.when(function(n,i){return Ly(I0(n,i))}(e,t))}whenTagged(e,t){return this.when(I0(e,t))}whenNoAncestor(e){return this.when(By(e))}whenNoAncestorIs(e){return this.when(By(My(e)))}whenNoAncestorNamed(e){return this.when(function(t){return By(A0(t))}(e))}whenNoAncestorTagged(e,t){return this.when(function(n,i){return By(I0(n,i))}(e,t))}},Bf=class extends OC{#e;constructor(e){super(e),this.#e=new FG(e)}onActivation(e){return this.#e.onActivation(e)}onDeactivation(e){return this.#e.onDeactivation(e)}},BE=class extends Bf{#e;constructor(e){super(e),this.#e=new Xwe(e)}inRequestScope(){return this.#e.inRequestScope()}inSingletonScope(){return this.#e.inSingletonScope()}inTransientScope(){return this.#e.inTransientScope()}};const NE=Symbol.for("@inversifyjs/container/InversifyContainerError");let Hd=class UG extends Error{[NE];kind;constructor(e,t,n){super(t,n),this[NE]=!0,this.kind=e}static is(e){return typeof e=="object"&&e!==null&&e[NE]===!0}static isErrorOfKind(e,t){return UG.is(e)&&e.kind===t}};var ru;(function(r){r[r.invalidOperation=0]="invalidOperation"})(ru||(ru={}));const Zwe=ka.Transient;let A6=class{#e;#t;#r;#n;#i;#o;#a;#s;#u;#c;#f;constructor(e){this.#r=this.#g(),this.#i=t=>this.#e.get(t),this.#s=new $we,this.#u=this.#v(),e?.parent===void 0?(this.#e=zB.build(void 0),this.#t=qB.build(void 0),this.#n=jB.build(void 0)):(this.#e=zB.build(e.parent.#e),this.#t=qB.build(e.parent.#t),this.#n=jB.build(e.parent.#n),e.parent.#s.subscribe(this.#s)),this.#o=this.#t.get.bind(this.#t),this.#c=this.#m.bind(this),this.#a={autobind:e?.autobind??!1,defaultScope:e?.defaultScope??Zwe},this.#f=[]}bind(e){return new aN(t=>{this.#m(t)},void 0,this.#a.defaultScope,e)}get(e,t){const n=this.#l(!1,e,t),i=this.#h(n);if(wi(i))throw new Hd(ru.invalidOperation,`Unexpected asyncronous service when resolving service "${Js(e)}"`);return i}getAll(e,t){const n=this.#l(!0,e,t),i=this.#h(n);if(wi(i))throw new Hd(ru.invalidOperation,`Unexpected asyncronous service when resolving service "${Js(e)}"`);return i}async getAllAsync(e,t){const n=this.#l(!0,e,t);return this.#h(n)}async getAsync(e,t){const n=this.#l(!1,e,t);return this.#h(n)}isBound(e,t){const n=this.#t.get(e);return this.#b(e,n,t)}isCurrentBound(e,t){const n=this.#t.getNonParentBindings(e);return this.#b(e,n,t)}async load(...e){await Promise.all(this.#w(...e))}loadSync(...e){const t=this.#w(...e);for(const n of t)if(n!==void 0)throw new Hd(ru.invalidOperation,"Unexpected asyncronous module load. Consider using Container.load() instead.")}onActivation(e,t){this.#e.add(t,{serviceId:e})}onDeactivation(e,t){this.#n.add(t,{serviceId:e})}restore(){const e=this.#f.pop();if(e===void 0)throw new Hd(ru.invalidOperation,"No snapshot available to restore");this.#e=e.activationService,this.#t=e.bindingService,this.#n=e.deactivationService,this.#S()}async rebind(e){return await this.unbind(e),this.bind(e)}rebindSync(e){return this.unbindSync(e),this.bind(e)}snapshot(){this.#f.push({activationService:this.#e.clone(),bindingService:this.#t.clone(),deactivationService:this.#n.clone()})}async unbind(e){await this.#E(e)}async unbindAll(){const e=[...this.#t.getNonParentBoundServices()];await Promise.all(e.map(async t=>sN(this.#r,t)));for(const t of e)this.#e.removeAllByServiceId(t),this.#t.removeAllByServiceId(t),this.#n.removeAllByServiceId(t);this.#s.clearCache()}unbindSync(e){this.#E(e)!==void 0&&this.#T(e)}async unload(...e){await Promise.all(this.#x(...e)),this.#I(e)}unloadSync(...e){const t=this.#x(...e);for(const n of t)if(n!==void 0)throw new Hd(ru.invalidOperation,"Unexpected asyncronous module unload. Consider using Container.unload() instead.");this.#I(e)}#p(e){return{bind:t=>new aN(n=>{this.#m(n)},e,this.#a.defaultScope,t),isBound:this.isBound.bind(this),onActivation:(t,n)=>{this.#e.add(n,{moduleId:e,serviceId:t})},onDeactivation:(t,n)=>{this.#n.add(n,{moduleId:e,serviceId:t})},rebind:this.rebind.bind(this),rebindSync:this.rebindSync.bind(this),unbind:this.unbind.bind(this),unbindSync:this.unbindSync.bind(this)}}#g(){return{getBindings:e=>this.#t.get(e),getBindingsFromModule:e=>this.#t.getByModuleId(e),getClassMetadata:kb,getDeactivations:e=>this.#n.get(e)}}#d(e,t,n){return{isMultiple:e,name:n?.name,optional:n?.optional,serviceIdentifier:t,tag:n?.tag}}#y(e,t,n){const i={autobindOptions:n?.autobind??this.#a.autobind?{scope:this.#a.defaultScope}:void 0,getBindings:this.#o,getClassMetadata:kb,rootConstraints:{isMultiple:t,serviceIdentifier:e},servicesBranch:[],setBinding:this.#c};return this.#_(i,n),i}#l(e,t,n){const i=this.#d(e,t,n),s=this.#s.get(i);if(s!==void 0)return s;const o=Twe(this.#y(t,e,n));return this.#s.set(i,o),o}#v(){return{get:this.get.bind(this),getAll:this.getAll.bind(this),getAllAsync:this.getAllAsync.bind(this),getAsync:this.getAsync.bind(this)}}#h(e){return Hwe({context:this.#u,getActivations:this.#i,planResult:e,requestScopeCache:new Map})}#_(e,t){t!==void 0&&(t.name!==void 0&&(e.rootConstraints.name=t.name),t.optional===!0&&(e.rootConstraints.isOptional=!0),t.tag!==void 0&&(e.rootConstraints.tag={key:t.tag.key,value:t.tag.value}))}#b(e,t,n){if(t===void 0)return!1;const i={getAncestor:()=>{},name:n?.name,serviceIdentifier:e,tags:new Map};n?.tag!==void 0&&i.tags.set(n.tag.key,n.tag.value);for(const s of t)if(s.isSatisfiedBy(i))return!0;return!1}#w(...e){return e.map(t=>t.load(this.#p(t.id)))}#x(...e){return e.map(t=>Ywe(this.#r,t.id))}#S(){this.#s.clearCache(),this.#i=e=>this.#e.get(e),this.#o=this.#t.get.bind(this.#t),this.#u=this.#v(),this.#c=this.#m.bind(this)}#m(e){this.#t.set(e),this.#s.clearCache()}#T(e){let t;if(oN(e)){const i=this.#t.getById(e.id),s=(n=i,function(o){if(o===void 0)return;const a=o.next();return a.done!==!0?a.value:void 0}(n?.[Symbol.iterator]()))?.serviceIdentifier;t=s===void 0?"Unexpected asyncronous deactivation when unbinding binding identifier. Consider using Container.unbind() instead.":`Unexpected asyncronous deactivation when unbinding "${Js(s)}" binding. Consider using Container.unbind() instead.`}else t=`Unexpected asyncronous deactivation when unbinding "${Js(e)}" service. Consider using Container.unbind() instead.`;var n;throw new Hd(ru.invalidOperation,t)}#E(e){return oN(e)?this.#R(e):this.#k(e)}#R(e){const t=this.#t.getById(e.id),n=S6(this.#r,t);if(n!==void 0)return n.then(()=>{this.#A(e)});this.#A(e)}#A(e){this.#t.removeById(e.id),this.#s.clearCache()}#I(e){for(const t of e)this.#e.removeAllByModuleId(t.id),this.#t.removeAllByModuleId(t.id),this.#n.removeAllByModuleId(t.id);this.#s.clearCache()}#k(e){const t=sN(this.#r,e);if(t!==void 0)return t.then(()=>{this.#C(e)});this.#C(e)}#C(e){this.#e.removeAllByServiceId(e),this.#t.removeAllByServiceId(e),this.#n.removeAllByServiceId(e),this.#s.clearCache()}},Qwe=class{constructor(e,t,n,i,s){this.deviceModel=e,this.serviceUuid=t,this.writeUuid=n,this.writeCmdUuid=i,this.notifyUuid=s}},Wd=class{id;productName;usbProductId;bootloaderUsbProductId;usbOnly;memorySize;blockSize;masks;bluetoothSpec;constructor(e){this.id=e.id,this.productName=e.productName,this.usbProductId=e.usbProductId,this.bootloaderUsbProductId=e.bootloaderUsbProductId,this.usbOnly=e.usbOnly,this.memorySize=e.memorySize,this.blockSize=e.blockSize,this.masks=e.masks,this.bluetoothSpec=e.bluetoothSpec}getBlockSize(e){switch(this.id){case Fr.NANO_S:return mB.lt(mB.coerce(e)??"","2.0.0")?4*1024:2*1024;case Fr.NANO_X:return 4*1024;case Fr.NANO_SP:case Fr.STAX:case Fr.FLEX:case Fr.APEX:return 32}}};var exe=Object.defineProperty,txe=(r,e,t)=>e in r?exe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},nxe=(r,e,t)=>txe(r,e+"",t);let pu=class{getAllDeviceModels(){return Object.values(pu.deviceModelByIds)}getDeviceModel(e){return pu.deviceModelByIds[e.id]}filterDeviceModels(e){return this.getAllDeviceModels().filter(t=>Object.entries(e).every(([n,i])=>t[n]===i))}getBluetoothServicesInfos(){return Object.values(pu.deviceModelByIds).reduce((e,t)=>{const{bluetoothSpec:n}=t;return n?{...e,...n.reduce((i,s)=>({...i,[s.serviceUuid]:new Qwe(t,s.serviceUuid,s.writeUuid,s.writeCmdUuid,s.notifyUuid)}),{})}:e},{})}getBluetoothServices(){return Object.values(pu.deviceModelByIds).map(e=>(e.bluetoothSpec||[]).map(t=>t.serviceUuid)).flat().filter(e=>!!e)}};nxe(pu,"deviceModelByIds",{[Fr.NANO_S]:new Wd({id:Fr.NANO_S,productName:"Ledger Nano S",usbProductId:16,bootloaderUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,masks:[823132160]}),[Fr.NANO_SP]:new Wd({id:Fr.NANO_SP,productName:"Ledger Nano S Plus",usbProductId:80,bootloaderUsbProductId:5,usbOnly:!0,memorySize:1533*1024,blockSize:32,masks:[856686592]}),[Fr.NANO_X]:new Wd({id:Fr.NANO_X,productName:"Ledger Nano X",usbProductId:64,bootloaderUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,masks:[855638016],bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]}),[Fr.STAX]:new Wd({id:Fr.STAX,productName:"Ledger Stax",usbProductId:96,bootloaderUsbProductId:6,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[857735168],bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]}),[Fr.FLEX]:new Wd({id:Fr.FLEX,productName:"Ledger Flex",usbProductId:112,bootloaderUsbProductId:7,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[858783744],bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}),[Fr.APEX]:new Wd({id:Fr.APEX,productName:"Ledger Apex",usbProductId:128,bootloaderUsbProductId:8,usbOnly:!1,memorySize:1533*1024,blockSize:32,masks:[859832320],bluetoothSpec:[{serviceUuid:"13d63400-2c97-8004-0000-4c6564676572",notifyUuid:"13d63400-2c97-8004-0001-4c6564676572",writeUuid:"13d63400-2c97-8004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-8004-0003-4c6564676572"}]})}),pu=rxe([Et()],pu);let ixe=class{statusCode;data;constructor({statusCode:e,data:t}){this.statusCode=e,this.data=t}};const sxe=5,pf=1,PC=2,yh=2,$C=2,Mi=[];for(let r=0;r<256;++r)Mi.push((r+256).toString(16).slice(1));function oxe(r,e=0){return(Mi[r[e+0]]+Mi[r[e+1]]+Mi[r[e+2]]+Mi[r[e+3]]+"-"+Mi[r[e+4]]+Mi[r[e+5]]+"-"+Mi[r[e+6]]+Mi[r[e+7]]+"-"+Mi[r[e+8]]+Mi[r[e+9]]+"-"+Mi[r[e+10]]+Mi[r[e+11]]+Mi[r[e+12]]+Mi[r[e+13]]+Mi[r[e+14]]+Mi[r[e+15]]).toLowerCase()}let LE;const axe=new Uint8Array(16);function cxe(){if(!LE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LE=crypto.getRandomValues.bind(crypto)}return LE(axe)}const lxe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cN={randomUUID:lxe};function zm(r,e,t){if(cN.randomUUID&&!r)return cN.randomUUID();r=r||{};const n=r.random||(r.rng||cxe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,oxe(n)}const Su={getLastBytesFrom(r,e){return r.slice(-e)},getFirstBytesFrom(r,e){return r.slice(0,e)},bytesToNumber(r){return r.reduce((e,t,n)=>e+t*Math.pow(256,r.length-1-n),0)},numberToByteArray(r,e){return new Uint8Array(e).map((t,n)=>r>>8*(e-1-n)&255)}},lN=2,FE=800;let uN=class{_tag="FramerOverflowError";originalError;constructor(){this.originalError=new Error("Frame header length is greater than frame size")}},uxe=class{_tag="FramerApduError";originalError;constructor(){this.originalError=new Error("Frame offset is greater than apdu length")}},fN=class{_tag="ReceiverApduError";originalError;constructor(e){this.originalError=new Error(e??"Unable to parse apdu")}},dN=class{_tag="DeviceSessionNotFound";originalError;constructor(e){this.originalError=e??new Error("Device session not found")}},zG=class{_header;_data;constructor({header:e,data:t}){this._header=e,this._data=t}toString(){return JSON.stringify({header:this._header.toString(),data:wu(this._data)},null,2)}getRawData(){const e=this._header.getRawData(),t=new Uint8Array(e.length+this._data.length);return t.set(e,0),t.set(this._data,e.length),t}getHeader(){return this._header}getData(){return this._data}},qG=class{_uuid;_channel;_headTag;_index;_length;_dataLength;constructor({uuid:e,dataSize:t,index:n,headTag:i,length:s,channel:o}){this._uuid=e,this._dataLength=t,this._index=n,this._headTag=i,this._length=s,this._channel=o}getDataLength(){return this._dataLength.map(e=>Su.bytesToNumber(e))}setDataSize(e){return this._dataLength=e,this}getLength(){return this._length}toString(){return JSON.stringify({uuid:this._uuid.toString(),dataSize:this._dataLength.extract()?.toString(),index:this._index.toString(),headTag:this._headTag.toString(),length:this._length.toString(),channel:this._channel.extract()?.toString()})}getRawData(){return new Uint8Array([...this._channel.caseOf({Just:e=>[...e],Nothing:()=>[]}),...this._headTag,...this._index,...this._dataLength.caseOf({Just:e=>[...e],Nothing:()=>[]})])}};const ai={LoggerPublisherServiceFactory:Symbol.for("LoggerPublisherServiceFactory")};var fxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},dxe=(r,e)=>(t,n)=>e(t,n,r);let DC=class{_channel;_logger;_pendingFrames;constructor({channel:e=vn.zero()},t){this._channel=e,this._logger=t("ApduReceiverService"),this._pendingFrames=[]}handleFrame(e){return this.getFrameFromBytes(e).map(t=>{if(this._pendingFrames.push(t),!this._pendingFrames[0])return jr;const n=this._pendingFrames[0].getHeader().getDataLength();return this.getCompleteFrame(n)})}getCompleteFrame(e){return e.chain(t=>{if(!this.isComplete(t))return this._logger.debug("frame is not complete, waiting for more"),jr;const n=Su.getFirstBytesFrom(this.concatFrames(this._pendingFrames),t),i=Su.getFirstBytesFrom(n,n.length-lN),s=Su.getLastBytesFrom(n,lN);return this._pendingFrames=[],ms(new ixe({data:i,statusCode:s}))})}getFrameFromBytes(e){const t=this._channel.caseOf({Just:()=>PC,Nothing:()=>0}),n=e.slice(t,t+pf),i=e.slice(t+pf,t+pf+yh),s=i.reduce((d,h)=>d+h,0)===0;if(!s&&this._pendingFrames.length===0)return lt(new fN);const o=t+pf+yh,a=s?$C:0;if(e.length<t+pf+yh+a)return lt(new fN("Unable to parse header from apdu"));const c=s?ms(e.slice(o,o+a)):jr,l=o+a,u=e.slice(l),f=new zG({header:new qG({uuid:zm(),channel:this._channel,dataSize:c,headTag:n,index:i,length:t+pf+yh+a}),data:u});return Zt(f)}isComplete(e){return this._pendingFrames.reduce((t,n)=>t+n.getData().length,0)>=e}concatFrames(e){return e.reduce((t,n)=>Uint8Array.from([...t,...n.getData()]),new Uint8Array(0))}};DC=fxe([Et(),dxe(1,Xe(ai.LoggerPublisherServiceFactory))],DC);var hxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},pxe=(r,e)=>(t,n)=>e(t,n,r);let MC=class{_frameSize;_channel;_padding;_logger;constructor({frameSize:e,channel:t=vn.zero(),padding:n=!1},i){this._frameSize=e,this._channel=t,this._padding=n,this._logger=i("DefaultApduSenderService")}getFrames(e){const t=[];let n=0,i=this.getFrameAtIndex(e,n);for(;i.isRight();)t.push(i.extract()),n+=1,i=this.getFrameAtIndex(e,n).mapLeft(s=>(s instanceof uN||this._logger.error("Error while parsing frame",{data:{error:s}}),s));return t}getFrameAtIndex(e,t){const n=this.getFrameHeaderFrom(t,e.length),i=t===0?0:t*this._frameSize-this.getHeaderSizeSumFrom(t);if(i>=e.length)return lt(new uN);if(n.getLength()>this._frameSize)return lt(new uxe);const s=this._frameSize-n.getLength(),o=e.slice(i,i+this._frameSize-n.getLength()),a=this._padding?new Uint8Array(s).fill(0):new Uint8Array(o.length<s?o.length:s);a.set(o,0);const c=new zG({header:n,data:a});return Zt(c)}getFrameHeaderFrom(e,t){const n=new qG({uuid:zm(),channel:this._channel.map(i=>Su.getLastBytesFrom(i,PC)),headTag:new Uint8Array([sxe]),index:Su.numberToByteArray(e,yh),length:this.getFrameHeaderSizeFromIndex(e),dataSize:vn.zero()});return e===0&&n.setDataSize(vn.of(Su.numberToByteArray(t,$C))),n}getHeaderSizeSumFrom(e){let t=this.getFrameHeaderSizeFromIndex(0),n=1;for(;n<e;)t+=this.getFrameHeaderSizeFromIndex(n),n+=1;return t}getFrameHeaderSizeFromIndex(e){return this._channel.caseOf({Just:()=>PC,Nothing:()=>0})+yh+pf+(e===0?$C:0)}};MC=hxe([Et(),pxe(1,Xe(ai.LoggerPublisherServiceFactory))],MC);const BC={SendCommandUseCase:Symbol.for("SendCommandUseCase")},cc={LocalConfigDataSource:Symbol.for("LocalConfigDataSource"),RemoteConfigDataSource:Symbol.for("RemoteConfigDataSource"),ConfigService:Symbol.for("ConfigService"),GetDmkVersionUseCase:Symbol.for("GetDmkVersionUseCase")},Cn={ApduSenderServiceFactory:Symbol.for("ApduSenderServiceFactory"),ApduReceiverServiceFactory:Symbol.for("ApduReceiverServiceFactory"),DeviceSessionService:Symbol.for("DeviceSessionService"),GetDeviceSessionStateUseCase:Symbol.for("GetDeviceSessionStateUseCase"),DisableDeviceSessionRefresherUseCase:Symbol.for("DisableDeviceSessionRefresherUseCase"),CloseSessionsUseCase:Symbol.for("CloseSessionsUseCase")},hn={StartDiscoveringUseCase:Symbol.for("StartDiscoveringUseCase"),StopDiscoveringUseCase:Symbol.for("StopDiscoveringUseCase"),ConnectUseCase:Symbol.for("ConnectUseCase"),DisconnectUseCase:Symbol.for("DisconnectUseCase"),GetConnectedDeviceUseCase:Symbol.for("GetConnectedDeviceUseCase"),ListenToAvailableDevicesUseCase:Symbol.for("ListenToAvailableDevicesUseCase"),ListenToConnectedDeviceUseCase:Symbol.for("ListenToConnectedDeviceUseCase"),ListConnectedDevicesUseCase:Symbol.for("ListConnectedDevicesUseCase"),ReconnectUseCase:Symbol.for("ReconnectUseCase")},wo={ManagerApiService:Symbol.for("ManagerApiService"),ManagerApiDataSource:Symbol.for("ManagerApiDataSource"),DmkConfig:Symbol.for("ManagerApiDmkConfig"),SetProviderUseCase:Symbol.for("SetProviderUseCase")},NC={SendApduUseCase:Symbol.for("SendApduUseCase")},sa={DmkConfig:Symbol.for("TransportDmkConfig"),TransportService:Symbol.for("TransportService"),TransportsInput:Symbol.for("TransportsInput")};var gxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},hN=(r,e)=>(t,n)=>e(t,n,r);let LC=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendCommandUseCase")}async execute({sessionId:e,command:t,abortTimeout:n}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async i=>await i.sendCommand(t,n),Left:i=>{throw this._logger.error("Error getting session",{data:{error:i}}),i}})}};LC=gxe([Et(),hN(0,Xe(Cn.DeviceSessionService)),hN(1,Xe(ai.LoggerPublisherServiceFactory))],LC);var mxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let Ei=class{execute=vi.fn(()=>"stub")};Ei=mxe([Et()],Ei);const yxe=({stub:r=!1}={})=>new bn(({bind:e,rebindSync:t})=>{e(BC.SendCommandUseCase).to(LC),r&&t(BC.SendCommandUseCase).to(Ei)});var vxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},pN=(r,e)=>(t,n)=>e(t,n,r);let FC=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ExecuteDeviceActionUseCase")}execute({sessionId:e,deviceAction:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:n=>n.executeDeviceAction(t),Left:n=>{throw this._logger.error("Error getting session",{data:{error:n}}),n}})}};FC=vxe([Et(),pN(0,Xe(Cn.DeviceSessionService)),pN(1,Xe(ai.LoggerPublisherServiceFactory))],FC);const UC={ExecuteDeviceActionUseCase:Symbol.for("ExecuteDeviceActionUseCase")},bxe=({stub:r=!1}={})=>new bn(({bind:e,rebindSync:t})=>{e(UC.ExecuteDeviceActionUseCase).to(FC),r&&t(UC.ExecuteDeviceActionUseCase).to(Ei)});function wxe(r){return typeof r=="object"&&r!==null&&"version"in r&&"name"in r&&typeof r.version=="string"&&typeof r.name=="string"}let gN=class{constructor(e){this.err=e,this.originalError=e}_tag="ApiCallError";originalError},xxe=class{constructor(e){this.err=e,this.originalError=e}_tag="ParseResponseError";originalError},jG=class{constructor(e){this.err=e,this.originalError=e}_tag="JSONParseError";originalError},_xe=class{constructor(e){this.err=e,this.originalError=e}_tag="ReadFileError";originalError};const Sxe="@ledgerhq/device-management-kit",Exe="0.11.0",mN={name:Sxe,version:Exe};var Axe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};const Ixe={name:mN.name,version:mN.version},Cxe=()=>JSON.stringify(Ixe);let zC=class{getConfig(){return Ro.encase(()=>Cxe()).mapLeft(e=>new _xe(e)).chain(e=>Ro.encase(()=>{const t=JSON.parse(e);if(wxe(t))return t;throw new Error("Invalid config file")}).mapLeft(t=>new jG(t)))}};zC=Axe([Et()],zC);var Txe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let qC=class{getConfig(){return Ro.of({name:"DeviceSDK",version:"0.0.0-stub.1"})}};qC=Txe([Et()],qC);var Rxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let jC=class{async getConfig(){const e=await this._callApi();if(e.isLeft())return lt(new gN(e.extract()));if(!e.extract().ok)return lt(new gN(new Error("response not ok")));const t=await e.extract().json();return t.isLeft()?lt(new jG):t.chain(n=>this._parseResponse(n)).map(n=>n)}_parseResponse(e){const{name:t,version:n}=e;return!t||!n?lt(new xxe):Ro.of({name:t,version:n})}_callApi(){return new Promise(e=>{e(Ro.of({ok:!0,json:async()=>new Promise(t=>{t(Ro.of({name:"DeviceSDK",version:"0.0.0-fake.1",yolo:"yolo"}))})}))})}};jC=Rxe([Et()],jC);var kxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let VC=class{async getConfig(){return new Promise(e=>e(Ro.of({name:"DeviceSDK",version:"0.0.0-fake.2"})))}};VC=kxe([Et()],VC);var Oxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},UE=(r,e)=>(t,n)=>e(t,n,r);let KC=class{_local;_remote;_logger;constructor(e,t,n){this._local=e,this._remote=t,this._logger=n("config")}async getDmkConfig(){const e=this._local.getConfig().ifLeft(t=>{this._logger.error("Local config not available",{data:{error:t}})});if(e.isRight()){const t=e.extract();return this._logger.info("Local config available",{data:{config:t}}),t}return this._remote.getConfig().then(t=>t.mapLeft(n=>(this._logger.error("Local config available",{data:{error:n}}),{name:"DeadDmk",version:"0.0.0-dead.1"})).extract())}};KC=Oxe([Et(),UE(0,Xe(cc.LocalConfigDataSource)),UE(1,Xe(cc.RemoteConfigDataSource)),UE(2,Xe(ai.LoggerPublisherServiceFactory))],KC);var Pxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},$xe=(r,e)=>(t,n)=>e(t,n,r);let HC=class{_configService;constructor(e){this._configService=e}async getDmkVersion(){return(await this._configService.getDmkConfig()).version}};HC=Pxe([Et(),$xe(0,Xe(cc.ConfigService))],HC);const Dxe=({stub:r})=>new bn(({bind:e,rebindSync:t})=>{e(cc.LocalConfigDataSource).to(zC),e(cc.RemoteConfigDataSource).to(jC),e(cc.GetDmkVersionUseCase).to(HC),e(cc.ConfigService).to(KC),r&&(t(cc.LocalConfigDataSource).to(qC),t(cc.RemoteConfigDataSource).to(VC))}),VG={DeviceModelDataSource:Symbol.for("DeviceModelDataSource")},Mxe=({stub:r})=>new bn(({bind:e})=>{e(VG.DeviceModelDataSource).to(pu)});var Bxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},yN=(r,e)=>(t,n)=>e(t,n,r);let WC=class{constructor(e,t){this._sessionService=e,this._logger=t("DisableDeviceSessionRefresherUseCase")}_logger;execute({sessionId:e,blockerId:t}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:n=>{throw this._logger.error("Error getting device session",{data:{error:n}}),n},Right:n=>n.disableRefresher(t)})}};WC=Bxe([Et(),yN(0,Xe(Cn.DeviceSessionService)),yN(1,Xe(ai.LoggerPublisherServiceFactory))],WC);var Nxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Lxe=(r,e)=>(t,n)=>e(t,n,r);let GC=class{_sessions;_logger;_sessionsSubject;constructor(e){this._sessions=[],this._sessionsSubject=new cG,this._logger=e("DeviceSessionService")}get sessionsObs(){return this._sessionsSubject.asObservable()}addDeviceSession(e){return this._sessions.find(t=>t.id===e.id)?(this._logger.warn("DeviceSession already exists",{data:{deviceSession:e}}),this):(this._sessions.push(e),this._sessionsSubject.next(e),this._logger.info("DeviceSession added",{data:{sessionId:e.id}}),this)}removeDeviceSession(e){const t=this._sessions.find(n=>n.id===e);return t?(t.close(),this._sessions=this._sessions.filter(n=>n.id!==e),this._logger.info("DeviceSession removed",{data:{sessionId:e}}),this):(this._logger.warn("DeviceSession not found",{data:{sessionId:e}}),this)}getDeviceSessionById(e){return vn.fromNullable(this._sessions.find(t=>t.id===e)).toEither(new dN)}getDeviceSessionByDeviceId(e){return vn.fromNullable(this._sessions.find(t=>t.connectedDevice.id===e)).toEither(new dN)}getDeviceSessions(){return this._sessions}};GC=Nxe([Et(),Lxe(0,Xe(ai.LoggerPublisherServiceFactory))],GC);var Fxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},vN=(r,e)=>(t,n)=>e(t,n,r);let YC=class{_sessionService;_transportService;constructor(e,t){this._sessionService=e,this._transportService=t}execute(){const e=this._sessionService.getDeviceSessions();for(const t of e)this._transportService.closeConnection(t.connectedDevice),this._sessionService.removeDeviceSession(t.id)}};YC=Fxe([Et(),vN(0,Xe(Cn.DeviceSessionService)),vN(1,Xe(sa.TransportService))],YC);var Uxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},bN=(r,e)=>(t,n)=>e(t,n,r);let JC=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetDeviceSessionStateUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Left:t=>{throw this._logger.error("Error getting session device",{data:{error:t}}),t},Right:t=>t.state})}};JC=Uxe([Et(),bN(0,Xe(Cn.DeviceSessionService)),bN(1,Xe(ai.LoggerPublisherServiceFactory))],JC);const zxe=({stub:r}={stub:!1})=>new bn(({bind:e,rebindSync:t})=>{e(Cn.ApduSenderServiceFactory).toFactory(n=>{const i=n.get(ai.LoggerPublisherServiceFactory);return s=>new MC(s,i)}),e(Cn.ApduReceiverServiceFactory).toFactory(n=>{const i=n.get(ai.LoggerPublisherServiceFactory);return(s={})=>new DC(s,i)}),e(Cn.DeviceSessionService).to(GC).inSingletonScope(),e(Cn.GetDeviceSessionStateUseCase).to(JC),e(Cn.CloseSessionsUseCase).to(YC),e(Cn.DisableDeviceSessionRefresherUseCase).to(WC),r&&(t(Cn.GetDeviceSessionStateUseCase).to(Ei),t(Cn.DisableDeviceSessionRefresherUseCase).to(Ei))}),XC=1e3,zE=1e3,qxe={isRefresherDisabled:!1,pollingInterval:1e3};let jxe=class{_queue=[];_locked=!1;async lock(){return new Promise(e=>{const t=()=>{if(this._locked=!1,this._queue.length>0){const n=this._queue.shift();this._locked=!0,n()}};this._locked?this._queue.push(()=>e(t)):(this._locked=!0,e(t))})}},Vxe=class{constructor(e,t){this._refresher=t,this._logger=e("refresher-service")}_refresherBlockers=new Set;_logger;disableRefresher(e){const t=`${e}-${zm()}`;this.addRefresherBlocker(t),this._logger.debug("Refresher disabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}});let n=!1;return()=>{n||(n=!0,this.removeRefresherBlocker(t),this._logger.debug("Refresher re-enabled",{data:{blockerId:t,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(e){const t=this._refresherBlockers.size;this._refresherBlockers.add(e),t===0&&this._refresher.stop()}removeRefresherBlocker(e){const t=this._refresherBlockers.size;this._refresherBlockers.delete(e),t>0&&this._refresherBlockers.size===0&&this._refresher.start()}};var Qs=(r=>(r.NEW_STATE="NEW_STATE",r.REFRESH_NEEDED="REFRESH_NEEDED",r.COMMAND_SUCCEEDED="COMMAND_SUCCEEDED",r.DEVICE_STATE_UPDATE_BUSY="DEVICE_STATE_UPDATE_BUSY",r.DEVICE_STATE_UPDATE_LOCKED="DEVICE_STATE_UPDATE_LOCKED",r.DEVICE_STATE_UPDATE_CONNECTED="DEVICE_STATE_UPDATE_CONNECTED",r))(Qs||{});let Kxe=class{_eventEmitter=new Um;listen(){return this._eventEmitter.asObservable()}dispatch(e){this._eventEmitter.next(e)}},Hxe=class{constructor(e,t,n,i){this.connectedDevice=t,this._sessionEventDispatcher=n,this._sendCommandFunction=i,this._logger=e("device-pinger"),this._subscription=this._sessionEventDispatcher.listen().subscribe(async s=>await this.mapEventAction(s))}_sendCommandFunction;_subscription;_logger;async ping(){try{return await this.mapDevicePingAction(this.connectedDevice.deviceModel.id)}catch(e){throw this._logger.error("Error while pinging device",{data:{error:e}}),e}}mapEventAction=async e=>{switch(e.eventName){case Qs.REFRESH_NEEDED:return await this.ping();default:return null}};async mapDevicePingAction(e){switch(e){case Fr.NANO_S:{const t=async()=>{const s=await this._sendCommandFunction(new Xg,FE);return this._sendCommandFunction(new ibe,FE),s},n=new Promise(s=>{setTimeout(()=>s(null),XC*2+100)}),i=await Promise.race([t(),n]);return i?this._sessionEventDispatcher.dispatch({eventName:Qs.COMMAND_SUCCEEDED,eventData:i}):this._sessionEventDispatcher.dispatch({eventName:Qs.DEVICE_STATE_UPDATE_LOCKED}),i}default:{const t=await this._sendCommandFunction(new Xg,FE);return this._sessionEventDispatcher.dispatch({eventName:Qs.COMMAND_SUCCEEDED,eventData:t}),t}}}unsubscribe(){this._subscription.unsubscribe()}},Wxe=class{constructor(e,t,n,i){this._sessionEventDispatcher=n,this._refresherOptions=t,this._logger=e("device-session-refresher"),this._connectedDeviceID=i.deviceModel.id}_refresherSubscription;_refresherOptions;_logger;_connectedDeviceID;startRefresher(){if(this._refresherOptions.isRefresherDisabled)return;const e=this.getValidPollingInterval(this._refresherOptions,this._logger)*2;this._refresherSubscription=IG(0,e).subscribe(()=>{this._sessionEventDispatcher.dispatch({eventName:Qs.REFRESH_NEEDED})})}stopRefresher(){this._refresherSubscription&&(this._refresherSubscription.unsubscribe(),this._refresherSubscription=void 0,this._logger.info("Refresher stopped."))}restartRefresher(){this.stopRefresher(),this.startRefresher(),this._logger.info("Refresher restarted.")}destroy(){this.stopRefresher()}getValidPollingInterval=(e,t)=>{const{pollingInterval:n}=e;switch(this._connectedDeviceID){case Fr.NANO_S:{const i=XC*2;return n!==void 0&&n<i?(t.warn(`Polling interval of ${n} is too low, setting to minimum as ${i}`),i):n??i}default:return n!==void 0&&n<zE?(t.warn(`Polling interval of ${n} is too low, setting to minimum as ${zE}`),zE):n??XC}}},Gxe=class{constructor(e,t,n,i,s){this._sessionEventDispatcher=t,this._connectedDevice=n,this._deviceState=i,this.setDeviceSessionState=s,this._subscription=this._sessionEventDispatcher.listen().subscribe(o=>this.mapEventAction(o)),this._logger=e("device-session-state-handler")}_subscription;_logger;_updateDeviceState(e){const t=this._parseDeviceStatus(e);if(t){const{sessionStateType:n,deviceStatus:i,currentApp:s}=t,o=this._deviceState.getValue();o.sessionStateType===Ra.Connected?this.setDeviceSessionState({sessionStateType:n,deviceStatus:i,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:s,installedApps:[],isSecureConnectionAllowed:!1}):this.setDeviceSessionState({...o,sessionStateType:n,deviceStatus:i,deviceModelId:this._connectedDevice.deviceModel.id,currentApp:s})}}mapEventAction=e=>{switch(e.eventName){case Qs.COMMAND_SUCCEEDED:return this._updateDeviceState(e.eventData);case Qs.DEVICE_STATE_UPDATE_BUSY:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:du.BUSY});case Qs.DEVICE_STATE_UPDATE_LOCKED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:du.LOCKED});case Qs.DEVICE_STATE_UPDATE_CONNECTED:return this.setDeviceSessionState({...this._deviceState.getValue(),deviceStatus:du.CONNECTED});default:return null}};_parseDeviceStatus(e){return Es(e)?{sessionStateType:Ra.ReadyWithoutSecureChannel,deviceStatus:du.CONNECTED,currentApp:{name:e.data.name,version:e.data.version}}:(this._logger.debug("Error while parsing APDU response",{data:{parsedResponse:e}}),null)}unsubscribe(){this._subscription.unsubscribe()}},Yxe=class{_id;_connectedDevice;_deviceState;_managerApiService;_secureChannelService;_logger;_refresherOptions;_pinger;_deviceSessionRefresher;_refresherService;_commandMutex=new jxe;_sessionEventDispatcher=new Kxe;constructor({connectedDevice:e,id:t=zm()},n,i,s,o){this._id=t,this._connectedDevice=e,this._logger=n("device-session"),this._managerApiService=i,this._secureChannelService=s,this._refresherOptions={...qxe,...o},this._deviceState=new aG({sessionStateType:Ra.Connected,deviceStatus:du.CONNECTED,deviceModelId:this._connectedDevice.deviceModel.id}),this._pinger=new Hxe(n,e,this._sessionEventDispatcher,(a,c)=>this.sendCommand(a,c)),this._deviceSessionRefresher=new Wxe(n,this._refresherOptions,this._sessionEventDispatcher,this._connectedDevice),new Gxe(n,this._sessionEventDispatcher,this._connectedDevice,this._deviceState,a=>this.setDeviceSessionState(a)),this._refresherService=new Vxe(n,{start:()=>this._deviceSessionRefresher.restartRefresher(),stop:()=>this._deviceSessionRefresher.stopRefresher()})}async initialiseSession(){try{await this._pinger.ping()}catch(e){throw this._logger.error("Error while initialising session",{data:{error:e}}),e}finally{this._refresherOptions.isRefresherDisabled||this._deviceSessionRefresher.startRefresher()}}get id(){return this._id}get connectedDevice(){return this._connectedDevice}get state(){return this._deviceState.asObservable()}getDeviceSessionState(){return this._deviceState.getValue()}setDeviceSessionState(e){this._deviceState.next(e)}async sendApdu(e,t={isPolling:!1,triggersDisconnection:!1,abortTimeout:void 0}){const n=await this._commandMutex.lock();try{this._sessionEventDispatcher.dispatch({eventName:Qs.DEVICE_STATE_UPDATE_BUSY}),this._logger.debug(`[exchange] => ${wu(e,!1)}`);const i=await this._connectedDevice.sendApdu(e,t.triggersDisconnection,t.abortTimeout);return i.ifRight(s=>{this._logger.debug(`[exchange] <= ${wu(s.data,!1)}${wu(s.statusCode,!1)}`),Fu.isLockedDeviceResponse(s)?this._sessionEventDispatcher.dispatch({eventName:Qs.DEVICE_STATE_UPDATE_LOCKED}):this._sessionEventDispatcher.dispatch({eventName:Qs.DEVICE_STATE_UPDATE_CONNECTED})}).ifLeft(()=>{this._sessionEventDispatcher.dispatch({eventName:Qs.DEVICE_STATE_UPDATE_CONNECTED})}),i}finally{n()}}async sendCommand(e,t){this._logger.debug(`[sendCommand] ${e.name}`);const n=e.getApdu();return(await this.sendApdu(n.getRawApdu(),{isPolling:!1,triggersDisconnection:e.triggersDisconnection??!1,abortTimeout:t})).caseOf({Left:i=>{throw this._logger.error("[sendCommand] error",{data:{err:i}}),i},Right:i=>{const s=e.parseResponse(i,this._connectedDevice.deviceModel.id);return this._logger.debug("[sendCommand] result",{data:{result:s}}),s}})}executeDeviceAction(e){const{observable:t,cancel:n}=e._execute({sendApdu:async i=>this.sendApdu(i),sendCommand:async(i,s)=>this.sendCommand(i,s),getDeviceModel:()=>this._connectedDevice.deviceModel,getDeviceSessionState:()=>this._deviceState.getValue(),getDeviceSessionStateObservable:()=>this.state,setDeviceSessionState:i=>(this.setDeviceSessionState(i),this._deviceState.getValue()),disableRefresher:i=>this._refresherService.disableRefresher(i),getManagerApiService:()=>this._managerApiService,getSecureChannelService:()=>this._secureChannelService});return{observable:t,cancel:n}}close(){this._updateDeviceStatus(du.NOT_CONNECTED),this._deviceState.complete(),this._deviceSessionRefresher.stopRefresher()}disableRefresher(e){return this._refresherService.disableRefresher(e)}_updateDeviceStatus(e){const t=this._deviceState.getValue();this._deviceState.next({...t,deviceStatus:e})}};const kh={SecureChannelService:Symbol.for("SecureChannelService"),SecureChannelDataSource:Symbol.for("SecureChannelDataSource"),DmkConfig:Symbol.for("SecureChannelDmkConfig")};var Jxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},C0=(r,e)=>(t,n)=>e(t,n,r);let ZC=class{_transportService;_sessionService;_loggerFactory;_managerApi;_secureChannel;_logger;constructor(e,t,n,i,s){this._sessionService=t,this._transportService=e,this._loggerFactory=n,this._logger=n("ConnectUseCase"),this._managerApi=i,this._secureChannel=s}handleDeviceDisconnect(e){this._sessionService.getDeviceSessionByDeviceId(e).map(t=>{this._sessionService.removeDeviceSession(t.id)})}async execute({device:e,sessionRefresherOptions:t}){const n=this._transportService.getTransport(e.transport),i="sessionId"in e?e.sessionId:void 0;return hr.liftEither(n.toEither(new g6(new Error("Unknown transport")))).chain(async s=>s.connect({deviceId:e.id,onDisconnect:o=>this.handleDeviceDisconnect(o)})).ifLeft(s=>{this._logger.error("Error connecting to device",{data:{deviceId:e.id,error:s}})}).map(async s=>{const o=new Yxe({connectedDevice:s,id:i},this._loggerFactory,this._managerApi,this._secureChannel,t);return this._sessionService.addDeviceSession(o),await o.initialiseSession(),o.id}).caseOf({Left:s=>{throw s},Right:s=>s})}};ZC=Jxe([Et(),C0(0,Xe(sa.TransportService)),C0(1,Xe(Cn.DeviceSessionService)),C0(2,Xe(ai.LoggerPublisherServiceFactory)),C0(3,Xe(wo.ManagerApiService)),C0(4,Xe(kh.SecureChannelService))],ZC);var Xxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},qE=(r,e)=>(t,n)=>e(t,n,r);let QC=class{_transportService;_sessionService;_logger;constructor(e,t,n){this._sessionService=t,this._transportService=e,this._logger=n("DisconnectUseCase")}async execute({sessionId:e}){return this._logger.debug("Disconnecting from device",{data:{test:this._sessionService.getDeviceSessions().map(t=>t.id)}}),hr(async({liftEither:t})=>{const n=await t(this._sessionService.getDeviceSessionById(e).ifLeft(o=>{this._logger.error("Device session not found",{data:{sessionId:e,error:o}})})),i=n.connectedDevice.transport,s=await t(this._transportService.getTransport(i).toEither(new g6(new Error("Unknown transport"))));n.close(),this._sessionService.removeDeviceSession(e),await s.disconnect({connectedDevice:n.connectedDevice})}).caseOf({Left:t=>{throw this._logger.error("Error disconnecting from device",{data:{error:t}}),t},Right:()=>{}})}};QC=Xxe([Et(),qE(0,Xe(sa.TransportService)),qE(1,Xe(Cn.DeviceSessionService)),qE(2,Xe(ai.LoggerPublisherServiceFactory))],QC);let I6=class{id;sessionId;modelId;name;type;transport;constructor({transportConnectedDevice:{id:e,deviceModel:{id:t,productName:n},type:i,transport:s,name:o},sessionId:a}){this.id=e,this.sessionId=a,this.modelId=t,this.name=o??n,this.type=i,this.transport=s}};var Zxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},wN=(r,e)=>(t,n)=>e(t,n,r);let e3=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("GetConnectedDeviceUseCase")}execute({sessionId:e}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:t=>new I6({sessionId:t.id,transportConnectedDevice:t.connectedDevice}),Left:t=>{throw this._logger.error("Error getting session",{data:{error:t}}),t}})}};e3=Zxe([Et(),wN(0,Xe(Cn.DeviceSessionService)),wN(1,Xe(ai.LoggerPublisherServiceFactory))],e3);var Qxe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},xN=(r,e)=>(t,n)=>e(t,n,r);let t3=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("ListConnectedDeviceUseCase")}execute(){return this._logger.info("Listing connected devices"),this._sessionService.getDeviceSessions().map(e=>new I6({transportConnectedDevice:e.connectedDevice,sessionId:e.id}))}};t3=Qxe([Et(),xN(0,Xe(Cn.DeviceSessionService)),xN(1,Xe(ai.LoggerPublisherServiceFactory))],t3);var e_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},_N=(r,e)=>(t,n)=>e(t,n,r);let r3=class{_transports;_transportService;_logger;constructor(e,t){this._transports=e.getAllTransports(),this._transportService=e,this._logger=t("ListenToAvailableDevicesUseCase")}mapTransportDiscoveredDeviceToDiscoveredDevice(e){const t=new RW({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){if(this._logger.info("Listening to available devices"),this._transports.length===0)return this._logger.warn("No transports available"),tp([[]]);if(!e){this._logger.info("Discovering all available transports");const t=this._transports.map((n,i)=>n.listenToAvailableDevices().pipe(_u(s=>({index:i,arr:s}))));return X1e(...t).pipe(ewe((n,{index:i,arr:s})=>(n[i]=s,n),{}),_u(n=>Object.values(n).flat().map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))}return this._logger.info(`Discovering devices on transport ${e}`),this._transportService.getTransport(e).caseOf({Nothing:()=>(this._logger.error(`Transport ${e} not found`),p6([])),Just:t=>t.listenToAvailableDevices().pipe(_u(n=>n.map(this.mapTransportDiscoveredDeviceToDiscoveredDevice)))})}};r3=e_e([Et(),_N(0,Xe(sa.TransportService)),_N(1,Xe(ai.LoggerPublisherServiceFactory))],r3);var t_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},SN=(r,e)=>(t,n)=>e(t,n,r);let n3=class{constructor(e,t){this._sessionService=e,this._logger=t("ListenToConnectedDeviceUseCase")}_logger;execute(){return this._logger.info("Observe connected devices"),this._sessionService.sessionsObs.pipe(_u(e=>new I6({transportConnectedDevice:e.connectedDevice,sessionId:e.id})))}};n3=t_e([Et(),SN(0,Xe(Cn.DeviceSessionService)),SN(1,Xe(ai.LoggerPublisherServiceFactory))],n3);var r_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},jE=(r,e)=>(t,n)=>e(t,n,r);let i3=class{constructor(e,t,n){this.connectUseCase=e,this.disconnectUseCase=t,this._logger=n("ReconnectUseCase")}_logger;async execute({device:e,sessionRefresherOptions:t}){return this._logger.debug("Reconnecting device session",{data:{deviceId:e.id,transport:e.transport}}),await this.disconnectUseCase.execute({sessionId:e.sessionId}),this.connectUseCase.execute({device:e,sessionRefresherOptions:t})}};i3=r_e([Et(),jE(0,Xe(hn.ConnectUseCase)),jE(1,Xe(hn.DisconnectUseCase)),jE(2,Xe(ai.LoggerPublisherServiceFactory))],i3);var n_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},i_e=(r,e)=>(t,n)=>e(t,n,r);let s3=class{constructor(e){this._transportService=e}mapDiscoveredDevice(e){const t=new RW({id:e.id,model:e.deviceModel.id,name:e.deviceModel.productName});return{id:e.id,deviceModel:t,transport:e.transport,name:e.name||t.name,rssi:e.rssi}}execute({transport:e}={}){if(!e){const t=this._transportService.getAllTransports();return p6(...t).pipe(mw(n=>n.startDiscovering().pipe(_u(i=>this.mapDiscoveredDevice(i)))))}return this._transportService.getTransport(e).caseOf({Just:t=>t.startDiscovering().pipe(_u(n=>this.mapDiscoveredDevice(n))),Nothing:()=>{throw new g6(new Error("Unknown transport"))}})}};s3=n_e([Et(),i_e(0,Xe(sa.TransportService))],s3);var s_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},EN=(r,e)=>(t,n)=>e(t,n,r);let o3=class{constructor(e,t){this.transportService=e,this._logger=t("StopDiscoveringUseCase")}_logger;async execute(){this._logger.debug("Stopping discovering devices");for(const e of this.transportService.getAllTransports())await e.stopDiscovering()}};o3=s_e([Et(),EN(0,Xe(sa.TransportService)),EN(1,Xe(ai.LoggerPublisherServiceFactory))],o3);const o_e=({stub:r=!1})=>new bn(({bind:e,rebindSync:t})=>{e(hn.ConnectUseCase).to(ZC),e(hn.DisconnectUseCase).to(QC),e(hn.ReconnectUseCase).to(i3),e(hn.StartDiscoveringUseCase).to(s3),e(hn.StopDiscoveringUseCase).to(o3),e(hn.GetConnectedDeviceUseCase).to(e3),e(hn.ListenToAvailableDevicesUseCase).to(r3),e(hn.ListenToConnectedDeviceUseCase).to(n3),e(hn.ListConnectedDevicesUseCase).to(t3),r&&(t(hn.ConnectUseCase).to(Ei),t(hn.DisconnectUseCase).to(Ei),t(hn.StartDiscoveringUseCase).to(Ei),t(hn.StopDiscoveringUseCase).to(Ei),t(hn.GetConnectedDeviceUseCase).to(Ei),t(hn.ListenToAvailableDevicesUseCase).to(Ei),t(hn.ListenToConnectedDeviceUseCase).to(Ei),t(hn.ListConnectedDevicesUseCase).to(Ei))});var W0=(r=>(r[r.Fatal=0]="Fatal",r[r.Error=1]="Error",r[r.Warning=2]="Warning",r[r.Info=3]="Info",r[r.Debug=4]="Debug",r))(W0||{}),a_e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let a3=class{subscribers;tag;constructor(e,t){this.subscribers=e,this.tag=t}_log(e,t,n){this.subscribers.forEach(i=>{const s={timestamp:Date.now(),tag:this.tag,...n};i.log(e,t,s)})}info(e,t){this._log(W0.Info,e,t)}warn(e,t){this._log(W0.Warning,e,t)}debug(e,t){this._log(W0.Debug,e,t)}error(e,t){this._log(W0.Error,e,t)}};a3=a_e([Et()],a3);const c_e=({subscribers:r}={subscribers:[]})=>new bn(({bind:e})=>{e(ai.LoggerPublisherServiceFactory).toFactory(t=>n=>new a3(r,n))});function KG(r,e){return function(){return r.apply(e,arguments)}}const{toString:l_e}=Object.prototype,{getPrototypeOf:C6}=Object,xw=(r=>e=>{const t=l_e.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ka=r=>(r=r.toLowerCase(),e=>xw(e)===r),_w=r=>e=>typeof e===r,{isArray:Bp}=Array,em=_w("undefined");function u_e(r){return r!==null&&!em(r)&&r.constructor!==null&&!em(r.constructor)&&ko(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const HG=Ka("ArrayBuffer");function f_e(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&HG(r.buffer),e}const d_e=_w("string"),ko=_w("function"),WG=_w("number"),Sw=r=>r!==null&&typeof r=="object",h_e=r=>r===!0||r===!1,$v=r=>{if(xw(r)!=="object")return!1;const e=C6(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},p_e=Ka("Date"),g_e=Ka("File"),m_e=Ka("Blob"),y_e=Ka("FileList"),v_e=r=>Sw(r)&&ko(r.pipe),b_e=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||ko(r.append)&&((e=xw(r))==="formdata"||e==="object"&&ko(r.toString)&&r.toString()==="[object FormData]"))},w_e=Ka("URLSearchParams"),[x_e,__e,S_e,E_e]=["ReadableStream","Request","Response","Headers"].map(Ka),A_e=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qm(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Bp(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{const s=t?Object.getOwnPropertyNames(r):Object.keys(r),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,r[a],a,r)}}function GG(r,e){e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Cf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sa,YG=r=>!em(r)&&r!==Cf;function c3(){const{caseless:r}=YG(this)&&this||{},e={},t=(n,i)=>{const s=r&&GG(e,i)||i;$v(e[s])&&$v(n)?e[s]=c3(e[s],n):$v(n)?e[s]=c3({},n):Bp(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&qm(arguments[n],t);return e}const I_e=(r,e,t,{allOwnKeys:n}={})=>(qm(e,(i,s)=>{t&&ko(i)?r[s]=KG(i,t):r[s]=i},{allOwnKeys:n}),r),C_e=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),T_e=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},R_e=(r,e,t,n)=>{let i,s,o;const a={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)o=i[s],(!n||n(o,r,e))&&!a[o]&&(e[o]=r[o],a[o]=!0);r=t!==!1&&C6(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},k_e=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},O_e=r=>{if(!r)return null;if(Bp(r))return r;let e=r.length;if(!WG(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},P_e=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&C6(Uint8Array)),$_e=(r,e)=>{const n=(r&&r[Symbol.iterator]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},D_e=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},M_e=Ka("HTMLFormElement"),B_e=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),AN=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),N_e=Ka("RegExp"),JG=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};qm(t,(i,s)=>{let o;(o=e(i,s,r))!==!1&&(n[s]=o||i)}),Object.defineProperties(r,n)},L_e=r=>{JG(r,(e,t)=>{if(ko(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(ko(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},F_e=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return Bp(r)?n(r):n(String(r).split(e)),t},U_e=()=>{},z_e=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function q_e(r){return!!(r&&ko(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const j_e=r=>{const e=new Array(10),t=(n,i)=>{if(Sw(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Bp(n)?[]:{};return qm(n,(o,a)=>{const c=t(o,i+1);!em(c)&&(s[a]=c)}),e[i]=void 0,s}}return n};return t(r,0)},V_e=Ka("AsyncFunction"),K_e=r=>r&&(Sw(r)||ko(r))&&ko(r.then)&&ko(r.catch),XG=((r,e)=>r?setImmediate:e?((t,n)=>(Cf.addEventListener("message",({source:i,data:s})=>{i===Cf&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Cf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ko(Cf.postMessage)),H_e=typeof queueMicrotask<"u"?queueMicrotask.bind(Cf):typeof Yt<"u"&&Yt.nextTick||XG,je={isArray:Bp,isArrayBuffer:HG,isBuffer:u_e,isFormData:b_e,isArrayBufferView:f_e,isString:d_e,isNumber:WG,isBoolean:h_e,isObject:Sw,isPlainObject:$v,isReadableStream:x_e,isRequest:__e,isResponse:S_e,isHeaders:E_e,isUndefined:em,isDate:p_e,isFile:g_e,isBlob:m_e,isRegExp:N_e,isFunction:ko,isStream:v_e,isURLSearchParams:w_e,isTypedArray:P_e,isFileList:y_e,forEach:qm,merge:c3,extend:I_e,trim:A_e,stripBOM:C_e,inherits:T_e,toFlatObject:R_e,kindOf:xw,kindOfTest:Ka,endsWith:k_e,toArray:O_e,forEachEntry:$_e,matchAll:D_e,isHTMLForm:M_e,hasOwnProperty:AN,hasOwnProp:AN,reduceDescriptors:JG,freezeMethods:L_e,toObjectSet:F_e,toCamelCase:B_e,noop:U_e,toFiniteNumber:z_e,findKey:GG,global:Cf,isContextDefined:YG,isSpecCompliantForm:q_e,toJSONObject:j_e,isAsyncFn:V_e,isThenable:K_e,setImmediate:XG,asap:H_e};function xr(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}je.inherits(xr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.status}}});const ZG=xr.prototype,QG={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{QG[r]={value:r}});Object.defineProperties(xr,QG);Object.defineProperty(ZG,"isAxiosError",{value:!0});xr.from=(r,e,t,n,i,s)=>{const o=Object.create(ZG);return je.toFlatObject(r,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),xr.call(o,r.message,e,t,n,i),o.cause=r,o.name=r.name,s&&Object.assign(o,s),o};const W_e=null;function l3(r){return je.isPlainObject(r)||je.isArray(r)}function eY(r){return je.endsWith(r,"[]")?r.slice(0,-2):r}function IN(r,e,t){return r?r.concat(e).map(function(i,s){return i=eY(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function G_e(r){return je.isArray(r)&&!r.some(l3)}const Y_e=je.toFlatObject(je,{},null,function(e){return/^is[A-Z]/.test(e)});function Ew(r,e,t){if(!je.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=je.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!je.isUndefined(m[p])});const n=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&je.isSpecCompliantForm(e);if(!je.isFunction(i))throw new TypeError("visitor must be a function");function l(g){if(g===null)return"";if(je.isDate(g))return g.toISOString();if(!c&&je.isBlob(g))throw new xr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(g)||je.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Ze.from(g):g}function u(g,p,m){let y=g;if(g&&!m&&typeof g=="object"){if(je.endsWith(p,"{}"))p=n?p:p.slice(0,-2),g=JSON.stringify(g);else if(je.isArray(g)&&G_e(g)||(je.isFileList(g)||je.endsWith(p,"[]"))&&(y=je.toArray(g)))return p=eY(p),y.forEach(function(w,_){!(je.isUndefined(w)||w===null)&&e.append(o===!0?IN([p],_,s):o===null?p:p+"[]",l(w))}),!1}return l3(g)?!0:(e.append(IN(m,p,s),l(g)),!1)}const f=[],d=Object.assign(Y_e,{defaultVisitor:u,convertValue:l,isVisitable:l3});function h(g,p){if(!je.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(g),je.forEach(g,function(y,v){(!(je.isUndefined(y)||y===null)&&i.call(e,y,je.isString(v)?v.trim():v,p,d))===!0&&h(y,p?p.concat(v):[v])}),f.pop()}}if(!je.isObject(r))throw new TypeError("data must be an object");return h(r),e}function CN(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function T6(r,e){this._pairs=[],r&&Ew(r,this,e)}const tY=T6.prototype;tY.append=function(e,t){this._pairs.push([e,t])};tY.toString=function(e){const t=e?function(n){return e.call(this,n,CN)}:CN;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function J_e(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rY(r,e,t){if(!e)return r;const n=t&&t.encode||J_e;je.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=je.isURLSearchParams(e)?e.toString():new T6(e,t).toString(n),s){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class TN{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){je.forEach(this.handlers,function(n){n!==null&&e(n)})}}const nY={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},X_e=typeof URLSearchParams<"u"?URLSearchParams:T6,Z_e=typeof FormData<"u"?FormData:null,Q_e=typeof Blob<"u"?Blob:null,eSe={isBrowser:!0,classes:{URLSearchParams:X_e,FormData:Z_e,Blob:Q_e},protocols:["http","https","file","blob","url","data"]},R6=typeof window<"u"&&typeof document<"u",u3=typeof navigator=="object"&&navigator||void 0,tSe=R6&&(!u3||["ReactNative","NativeScript","NS"].indexOf(u3.product)<0),rSe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nSe=R6&&window.location.href||"http://localhost",iSe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:R6,hasStandardBrowserEnv:tSe,hasStandardBrowserWebWorkerEnv:rSe,navigator:u3,origin:nSe},Symbol.toStringTag,{value:"Module"})),ys={...iSe,...eSe};function sSe(r,e){return Ew(r,new ys.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,s){return ys.isNode&&je.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function oSe(r){return je.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function aSe(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function iY(r){function e(t,n,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=t.length;return o=!o&&je.isArray(i)?i.length:o,c?(je.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!je.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],s)&&je.isArray(i[o])&&(i[o]=aSe(i[o])),!a)}if(je.isFormData(r)&&je.isFunction(r.entries)){const t={};return je.forEachEntry(r,(n,i)=>{e(oSe(n),i,t,0)}),t}return null}function cSe(r,e,t){if(je.isString(r))try{return(e||JSON.parse)(r),je.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const jm={transitional:nY,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=je.isObject(e);if(s&&je.isHTMLForm(e)&&(e=new FormData(e)),je.isFormData(e))return i?JSON.stringify(iY(e)):e;if(je.isArrayBuffer(e)||je.isBuffer(e)||je.isStream(e)||je.isFile(e)||je.isBlob(e)||je.isReadableStream(e))return e;if(je.isArrayBufferView(e))return e.buffer;if(je.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sSe(e,this.formSerializer).toString();if((a=je.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ew(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),cSe(e)):e}],transformResponse:[function(e){const t=this.transitional||jm.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(je.isResponse(e)||je.isReadableStream(e))return e;if(e&&je.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xr.from(a,xr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ys.classes.FormData,Blob:ys.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};je.forEach(["delete","get","head","post","put","patch"],r=>{jm.headers[r]={}});const lSe=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uSe=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&lSe[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},RN=Symbol("internals");function T0(r){return r&&String(r).trim().toLowerCase()}function Dv(r){return r===!1||r==null?r:je.isArray(r)?r.map(Dv):String(r)}function fSe(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const dSe=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function VE(r,e,t,n,i){if(je.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!je.isString(e)){if(je.isString(n))return e.indexOf(n)!==-1;if(je.isRegExp(n))return n.test(e)}}function hSe(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function pSe(r,e){const t=je.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let to=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(a,c,l){const u=T0(c);if(!u)throw new Error("header name must be a non-empty string");const f=je.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Dv(a))}const o=(a,c)=>je.forEach(a,(l,u)=>s(l,u,c));if(je.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(je.isString(e)&&(e=e.trim())&&!dSe(e))o(uSe(e),t);else if(je.isHeaders(e))for(const[a,c]of e.entries())s(c,a,n);else e!=null&&s(t,e,n);return this}get(e,t){if(e=T0(e),e){const n=je.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return fSe(i);if(je.isFunction(t))return t.call(this,i,n);if(je.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=T0(e),e){const n=je.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||VE(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(o){if(o=T0(o),o){const a=je.findKey(n,o);a&&(!t||VE(n,n[a],a,t))&&(delete n[a],i=!0)}}return je.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||VE(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return je.forEach(this,(i,s)=>{const o=je.findKey(n,s);if(o){t[o]=Dv(i),delete t[s];return}const a=e?hSe(s):String(s).trim();a!==s&&delete t[s],t[a]=Dv(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return je.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&je.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[RN]=this[RN]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=T0(o);n[a]||(pSe(i,o),n[a]=!0)}return je.isArray(e)?e.forEach(s):s(e),this}};to.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);je.reduceDescriptors(to.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});je.freezeMethods(to);function KE(r,e){const t=this||jm,n=e||t,i=to.from(n.headers);let s=n.data;return je.forEach(r,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function sY(r){return!!(r&&r.__CANCEL__)}function Np(r,e,t){xr.call(this,r??"canceled",xr.ERR_CANCELED,e,t),this.name="CanceledError"}je.inherits(Np,xr,{__CANCEL__:!0});function oY(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new xr("Request failed with status code "+t.status,[xr.ERR_BAD_REQUEST,xr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function gSe(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function mSe(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const l=Date.now(),u=n[s];o||(o=l),t[i]=c,n[i]=l;let f=s,d=0;for(;f!==i;)d+=t[f++],f=f%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),l-o<e)return;const h=u&&l-u;return h?Math.round(d*1e3/h):void 0}}function ySe(r,e){let t=0,n=1e3/e,i,s;const o=(l,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),r.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-t;f>=n?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},n-f)))},()=>i&&o(i)]}const Ob=(r,e,t=3)=>{let n=0;const i=mSe(50,250);return ySe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-n,l=i(c),u=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};r(f)},t)},kN=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},ON=r=>(...e)=>je.asap(()=>r(...e)),vSe=ys.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,ys.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(ys.origin),ys.navigator&&/(msie|trident)/i.test(ys.navigator.userAgent)):()=>!0,bSe=ys.hasStandardBrowserEnv?{write(r,e,t,n,i,s){const o=[r+"="+encodeURIComponent(e)];je.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),je.isString(n)&&o.push("path="+n),je.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wSe(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function xSe(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function aY(r,e,t){let n=!wSe(e);return r&&n||t==!1?xSe(r,e):e}const PN=r=>r instanceof to?{...r}:r;function Xf(r,e){e=e||{};const t={};function n(l,u,f,d){return je.isPlainObject(l)&&je.isPlainObject(u)?je.merge.call({caseless:d},l,u):je.isPlainObject(u)?je.merge({},u):je.isArray(u)?u.slice():u}function i(l,u,f,d){if(je.isUndefined(u)){if(!je.isUndefined(l))return n(void 0,l,f,d)}else return n(l,u,f,d)}function s(l,u){if(!je.isUndefined(u))return n(void 0,u)}function o(l,u){if(je.isUndefined(u)){if(!je.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function a(l,u,f){if(f in e)return n(l,u);if(f in r)return n(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,f)=>i(PN(l),PN(u),f,!0)};return je.forEach(Object.keys(Object.assign({},r,e)),function(u){const f=c[u]||i,d=f(r[u],e[u],u);je.isUndefined(d)&&f!==a||(t[u]=d)}),t}const cY=r=>{const e=Xf({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=to.from(o),e.url=rY(aY(e.baseURL,e.url),r.params,r.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(je.isFormData(t)){if(ys.hasStandardBrowserEnv||ys.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(ys.hasStandardBrowserEnv&&(n&&je.isFunction(n)&&(n=n(e)),n||n!==!1&&vSe(e.url))){const l=i&&s&&bSe.read(s);l&&o.set(i,l)}return e},_Se=typeof XMLHttpRequest<"u",SSe=_Se&&function(r){return new Promise(function(t,n){const i=cY(r);let s=i.data;const o=to.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,f,d,h,g;function p(){h&&h(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function y(){if(!m)return;const w=to.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:r,request:m};oY(function(S){t(S),p()},function(S){n(S),p()},x),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new xr("Request aborted",xr.ECONNABORTED,r,m)),m=null)},m.onerror=function(){n(new xr("Network Error",xr.ERR_NETWORK,r,m)),m=null},m.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||nY;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),n(new xr(_,x.clarifyTimeoutError?xr.ETIMEDOUT:xr.ECONNABORTED,r,m)),m=null},s===void 0&&o.setContentType(null),"setRequestHeader"in m&&je.forEach(o.toJSON(),function(_,x){m.setRequestHeader(x,_)}),je.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),a&&a!=="json"&&(m.responseType=i.responseType),l&&([d,g]=Ob(l,!0),m.addEventListener("progress",d)),c&&m.upload&&([f,h]=Ob(c),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=w=>{m&&(n(!w||w.type?new Np(null,r,m):w),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const v=gSe(i.url);if(v&&ys.protocols.indexOf(v)===-1){n(new xr("Unsupported protocol "+v+":",xr.ERR_BAD_REQUEST,r));return}m.send(s||null)})},ESe=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;n.abort(u instanceof xr?u:new Np(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new xr(`timeout ${e} of ms exceeded`,xr.ETIMEDOUT))},e);const a=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),r=null)};r.forEach(l=>l.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>je.asap(a),c}},ASe=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},ISe=async function*(r,e){for await(const t of CSe(r))yield*ASe(t,e)},CSe=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},$N=(r,e,t,n)=>{const i=ISe(r,e);let s=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let f=u.byteLength;if(t){let d=s+=f;t(d)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},Aw=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lY=Aw&&typeof ReadableStream=="function",TSe=Aw&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),uY=(r,...e)=>{try{return!!r(...e)}catch{return!1}},RSe=lY&&uY(()=>{let r=!1;const e=new Request(ys.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),DN=64*1024,f3=lY&&uY(()=>je.isReadableStream(new Response("").body)),Pb={stream:f3&&(r=>r.body)};Aw&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pb[e]&&(Pb[e]=je.isFunction(r[e])?t=>t[e]():(t,n)=>{throw new xr(`Response type '${e}' is not supported`,xr.ERR_NOT_SUPPORT,n)})})})(new Response);const kSe=async r=>{if(r==null)return 0;if(je.isBlob(r))return r.size;if(je.isSpecCompliantForm(r))return(await new Request(ys.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(je.isArrayBufferView(r)||je.isArrayBuffer(r))return r.byteLength;if(je.isURLSearchParams(r)&&(r=r+""),je.isString(r))return(await TSe(r)).byteLength},OSe=async(r,e)=>{const t=je.toFiniteNumber(r.getContentLength());return t??kSe(e)},PSe=Aw&&(async r=>{let{url:e,method:t,data:n,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:d}=cY(r);l=l?(l+"").toLowerCase():"text";let h=ESe([i,s&&s.toAbortSignal()],o),g;const p=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let m;try{if(c&&RSe&&t!=="get"&&t!=="head"&&(m=await OSe(u,n))!==0){let x=new Request(e,{method:"POST",body:n,duplex:"half"}),E;if(je.isFormData(n)&&(E=x.headers.get("content-type"))&&u.setContentType(E),x.body){const[S,T]=kN(m,Ob(ON(c)));n=$N(x.body,DN,S,T)}}je.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;g=new Request(e,{...d,signal:h,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?f:void 0});let v=await fetch(g);const w=f3&&(l==="stream"||l==="response");if(f3&&(a||w&&p)){const x={};["status","statusText","headers"].forEach(C=>{x[C]=v[C]});const E=je.toFiniteNumber(v.headers.get("content-length")),[S,T]=a&&kN(E,Ob(ON(a),!0))||[];v=new Response($N(v.body,DN,S,()=>{T&&T(),p&&p()}),x)}l=l||"text";let _=await Pb[je.findKey(Pb,l)||"text"](v,r);return!w&&p&&p(),await new Promise((x,E)=>{oY(x,E,{data:_,headers:to.from(v.headers),status:v.status,statusText:v.statusText,config:r,request:g})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new xr("Network Error",xr.ERR_NETWORK,r,g),{cause:y.cause||y}):xr.from(y,y&&y.code,r,g)}}),d3={http:W_e,xhr:SSe,fetch:PSe};je.forEach(d3,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const MN=r=>`- ${r}`,$Se=r=>je.isFunction(r)||r===null||r===!1,fY={getAdapter:r=>{r=je.isArray(r)?r:[r];const{length:e}=r;let t,n;const i={};for(let s=0;s<e;s++){t=r[s];let o;if(n=t,!$Se(t)&&(n=d3[(o=String(t)).toLowerCase()],n===void 0))throw new xr(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(MN).join(`
`):" "+MN(s[0]):"as no adapter specified";throw new xr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:d3};function HE(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Np(null,r)}function BN(r){return HE(r),r.headers=to.from(r.headers),r.data=KE.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),fY.getAdapter(r.adapter||jm.adapter)(r).then(function(n){return HE(r),n.data=KE.call(r,r.transformResponse,n),n.headers=to.from(n.headers),n},function(n){return sY(n)||(HE(r),n&&n.response&&(n.response.data=KE.call(r,r.transformResponse,n.response),n.response.headers=to.from(n.response.headers))),Promise.reject(n)})}const dY="1.8.2",Iw={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Iw[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const NN={};Iw.transitional=function(e,t,n){function i(s,o){return"[Axios v"+dY+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new xr(i(o," has been removed"+(t?" in "+t:"")),xr.ERR_DEPRECATED);return t&&!NN[o]&&(NN[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};Iw.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function DSe(r,e,t){if(typeof r!="object")throw new xr("options must be an object",xr.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const a=r[s],c=a===void 0||o(a,s,r);if(c!==!0)throw new xr("option "+s+" must be "+c,xr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xr("Unknown option "+s,xr.ERR_BAD_OPTION)}}const Mv={assertOptions:DSe,validators:Iw},Ja=Mv.validators;let Nf=class{constructor(e){this.defaults=e,this.interceptors={request:new TN,response:new TN}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Xf(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&Mv.assertOptions(n,{silentJSONParsing:Ja.transitional(Ja.boolean),forcedJSONParsing:Ja.transitional(Ja.boolean),clarifyTimeoutError:Ja.transitional(Ja.boolean)},!1),i!=null&&(je.isFunction(i)?t.paramsSerializer={serialize:i}:Mv.assertOptions(i,{encode:Ja.function,serialize:Ja.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mv.assertOptions(t,{baseUrl:Ja.spelling("baseURL"),withXsrfToken:Ja.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&je.merge(s.common,s[t.method]);s&&je.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=to.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(c=c&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const l=[];this.interceptors.response.forEach(function(p){l.push(p.fulfilled,p.rejected)});let u,f=0,d;if(!c){const g=[BN.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,l),d=g.length,u=Promise.resolve(t);f<d;)u=u.then(g[f++],g[f++]);return u}d=a.length;let h=t;for(f=0;f<d;){const g=a[f++],p=a[f++];try{h=g(h)}catch(m){p.call(this,m);break}}try{u=BN.call(this,h)}catch(g){return Promise.reject(g)}for(f=0,d=l.length;f<d;)u=u.then(l[f++],l[f++]);return u}getUri(e){e=Xf(this.defaults,e);const t=aY(e.baseURL,e.url,e.allowAbsoluteUrls);return rY(t,e.params,e.paramsSerializer)}};je.forEach(["delete","get","head","options"],function(e){Nf.prototype[e]=function(t,n){return this.request(Xf(n||{},{method:e,url:t,data:(n||{}).data}))}});je.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Xf(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Nf.prototype[e]=t(),Nf.prototype[e+"Form"]=t(!0)});let MSe=class hY{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Np(s,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new hY(function(i){e=i}),cancel:e}}};function BSe(r){return function(t){return r.apply(null,t)}}function NSe(r){return je.isObject(r)&&r.isAxiosError===!0}const h3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(h3).forEach(([r,e])=>{h3[e]=r});function pY(r){const e=new Nf(r),t=KG(Nf.prototype.request,e);return je.extend(t,Nf.prototype,e,{allOwnKeys:!0}),je.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return pY(Xf(r,i))},t}const lr=pY(jm);lr.Axios=Nf;lr.CanceledError=Np;lr.CancelToken=MSe;lr.isCancel=sY;lr.VERSION=dY;lr.toFormData=Ew;lr.AxiosError=xr;lr.Cancel=lr.CanceledError;lr.all=function(e){return Promise.all(e)};lr.spread=BSe;lr.isAxiosError=NSe;lr.mergeConfig=Xf;lr.AxiosHeaders=to;lr.formToJSON=r=>iY(je.isHTMLForm(r)?new FormData(r):r);lr.getAdapter=fY.getAdapter;lr.HttpStatusCode=h3;lr.default=lr;const{Axios:rHe,AxiosError:nHe,CanceledError:iHe,isCancel:sHe,CancelToken:oHe,VERSION:aHe,all:cHe,Cancel:lHe,isAxiosError:uHe,spread:fHe,toFormData:dHe,AxiosHeaders:hHe,HttpStatusCode:pHe,formToJSON:gHe,getAdapter:mHe,mergeConfig:yHe}=lr;var G0=(r=>(r.currency="currency",r.plugin="plugin",r.tool="tool",r.swap="swap",r))(G0||{});const gY="https://manager.api.live.ledger.com/api",mY="http://localhost:8080",k6=1,O6="0";let ga=class{constructor(e){this.error=e,this.originalError=e}_tag="FetchError";originalError};var Y0=(r=>(r.currency="currency",r.plugin="plugin",r.tool="tool",r.swap="swap",r))(Y0||{}),LSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},FSe=(r,e)=>(t,n)=>e(t,n,r);let p3=class{_managerApiBaseUrl;_provider=k6;_firmwareDistributionSalt=O6;constructor({managerApiUrl:e,provider:t,firmwareDistributionSalt:n}){this._managerApiBaseUrl=e,this._provider=t,this._firmwareDistributionSalt=n}setProvider(e){this._provider===e||e<1||(this._provider=e)}getProvider(){return this._provider}getAppList(e){const{targetId:t,firmwareVersionName:n}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/v2/apps/by-target`,{params:{target_id:t,provider:this._provider,firmware_version_name:n}})).map(i=>i.data).chain(i=>this.mapApplicationDtoToApplication(i)).mapLeft(i=>new ga(i))}getMcuList(){return hr(()=>lr.get(`${this._managerApiBaseUrl}/mcu_versions`,{})).map(e=>e.data).chain(e=>this.mapMcuDtoToMcu(e)).mapLeft(e=>new ga(e))}getDeviceVersion(e){const{targetId:t}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/get_device_version`,{params:{target_id:t,provider:this._provider}})).map(n=>n.data).chain(n=>this.mapDeviceVersionDto(n)).mapLeft(n=>new ga(n))}getFirmwareVersion(e){const{deviceId:t,version:n}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/get_firmware_version`,{params:{device_version:t,version_name:n,provider:this._provider}})).map(i=>i.data).chain(i=>this.mapFinalFirmwareDto(i)).mapLeft(i=>new ga(i))}getFirmwareVersionById(e){return hr(()=>lr.get(`${this._managerApiBaseUrl}/firmware_final_versions/${e}`,{})).map(t=>t.data).chain(t=>this.mapFinalFirmwareDto(t)).mapLeft(t=>new ga(t))}getOsuFirmwareVersion(e){const{deviceId:t,version:n}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/get_osu_version`,{params:{device_version:t,version_name:n,provider:this._provider}})).map(i=>i.data).chain(i=>this.mapOsuFirmwareDto(i)).mapLeft(i=>new ga(i))}getLatestFirmwareVersion(e){const t="34.27.0",{currentFinalFirmwareId:n,deviceId:i}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/get_latest_firmware`,{params:{current_se_firmware_final_version:n,device_version:i,provider:this._provider,salt:this._firmwareDistributionSalt,livecommonversion:t}})).map(s=>s.data).chain(s=>this.mapLatestFirmwareDto(s)).mapLeft(s=>new ga(s))}getAppsByHash(e){const{hashes:t}=e;return hr(()=>lr.post(`${this._managerApiBaseUrl}/v2/apps/hash`,t)).map(n=>n.data).chain(n=>this.mapNullableApplicationDtoToApplication(n)).mapLeft(n=>new ga(n))}getLanguagePackages(e){const{deviceId:t,currentFinalFirmwareId:n}=e;return hr(()=>lr.get(`${this._managerApiBaseUrl}/language-packages`,{params:{device_version:t,current_se_firmware_final_version:n}})).map(i=>i.data).chain(i=>this.mapLanguagesDtoToLanguages(i)).mapLeft(i=>new ga(i))}mapAppTypeDtoToAppType(e){if(e===null)return null;switch(e){case Y0.currency:return G0.currency;case Y0.plugin:return G0.plugin;case Y0.tool:return G0.tool;case Y0.swap:return G0.swap}}mapApplicationDtoToApplication(e){return hr(()=>Promise.resolve(e.map(t=>this.mapApplicationDto(t))))}mapNullableApplicationDtoToApplication(e){return hr(()=>Promise.resolve(e.map(t=>t===null?null:this.mapApplicationDto(t))))}mapApplicationDto(e){if(typeof e!="object"||typeof e.versionId!="number"||typeof e.versionName!="string"||e.versionDisplayName!==null&&typeof e.versionDisplayName!="string"||typeof e.version!="string"||e.currencyId!==null&&typeof e.currencyId!="string"||e.description!==null&&typeof e.description!="string"||e.applicationType!==null&&typeof e.applicationType!="string"||typeof e.dateModified!="string"||e.icon!==null&&typeof e.icon!="string"||e.authorName!==null&&typeof e.authorName!="string"||e.supportURL!==null&&typeof e.supportURL!="string"||e.contactURL!==null&&typeof e.contactURL!="string"||e.sourceURL!==null&&typeof e.sourceURL!="string"||e.compatibleWallets!==null&&typeof e.compatibleWallets!="string"||typeof e.hash!="string"||typeof e.perso!="string"||typeof e.firmware!="string"||typeof e.firmwareKey!="string"||typeof e.delete!="string"||typeof e.deleteKey!="string"||e.bytes!==null&&typeof e.bytes!="number"||e.warning!==null&&typeof e.warning!="string"||typeof e.isDevTools!="boolean"||e.category!==null&&typeof e.category!="number"||e.parent!==null&&typeof e.parent!="number"||e.parentName!==null&&typeof e.parentName!="string")throw new Error(`Incomplete application: ${JSON.stringify(e)}`);const{applicationType:t,hash:n,perso:i,firmware:s,firmwareKey:o,delete:a,deleteKey:c,...l}=e;return{...l,hash:n,perso:i,firmware:s,firmwareKey:o,delete:a,deleteKey:c,applicationType:this.mapAppTypeDtoToAppType(t)}}mapMcuDtoToMcu(e){return hr(()=>Promise.resolve(e.map(t=>{if(typeof t!="object"||typeof t.id!="number"||typeof t.name!="string")throw new Error(`Incomplete MCU version: ${JSON.stringify(t)}`);return{id:t.id,name:t.name}})))}mapDeviceVersionDto(e){return hr(()=>{if(typeof e!="object"||typeof e.id!="number")throw new Error(`Incomplete device version: ${JSON.stringify(e)}`);const t={id:e.id};return Promise.resolve(t)})}mapFinalFirmwareDto(e){return hr(()=>{if(typeof e!="object"||typeof e.id!="number"||typeof e.version!="string"||typeof e.perso!="string"||e.firmware!==null&&typeof e.firmware!="string"||e.firmware_key!==null&&typeof e.firmware_key!="string"||e.hash!==null&&typeof e.hash!="string"||e.bytes!==null&&typeof e.bytes!="number"||!Array.isArray(e.mcu_versions))throw new Error(`Incomplete final firmware: ${JSON.stringify(e)}`);const t={id:e.id,version:e.version,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,bytes:e.bytes,mcuVersions:e.mcu_versions};return Promise.resolve(t)})}mapLatestFirmwareDto(e){return hr(()=>{if(e.result!=="success"||!e.se_firmware_osu_version)throw new Error(`Latest firmware could not be retrieved: ${e.result}`);const t=e.se_firmware_osu_version;return Promise.resolve(t)}).chain(t=>this.mapOsuFirmwareDto(t))}mapOsuFirmwareDto(e){return hr(()=>{if(typeof e!="object"||typeof e.id!="number"||typeof e.perso!="string"||typeof e.firmware!="string"||typeof e.firmware_key!="string"||e.hash!==null&&typeof e.hash!="string"||typeof e.next_se_firmware_final_version!="number")throw new Error(`Incomplete latest firmware: ${JSON.stringify(e)}`);const t={id:e.id,perso:e.perso,firmware:e.firmware,firmwareKey:e.firmware_key,hash:e.hash,nextFinalFirmware:e.next_se_firmware_final_version};return Promise.resolve(t)})}mapLanguagesDtoToLanguages(e){return hr(()=>Promise.resolve(e.map(t=>this.mapLanguageDto(t))))}mapLanguageDto(e){if(typeof e!="object"||typeof e.language!="string"||typeof e.languagePackageVersionId!="number"||typeof e.version!="string"||typeof e.language_package_id!="number"||typeof e.apdu_install_url!="string"||typeof e.apdu_uninstall_url!="string"||typeof e.bytes!="number"||typeof e.date_creation!="string"||typeof e.date_last_modified!="string")throw new Error(`Incomplete language version: ${JSON.stringify(e)}`);return{language:e.language,languagePackageVersionId:e.languagePackageVersionId,version:e.version,languagePackageId:e.language_package_id,apduInstallUrl:e.apdu_install_url,apduUninstallUrl:e.apdu_uninstall_url,bytes:e.bytes,dateCreation:e.date_creation,dateLastModified:e.date_last_modified}}};p3=LSe([Et(),FSe(0,Xe(wo.DmkConfig))],p3);var USe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},zSe=(r,e)=>(t,n)=>e(t,n,r);let g3=class{constructor(e){this.dataSource=e}getAppList(e){const t={targetId:e.targetId.toString(),firmwareVersionName:e.seVersion};return this.dataSource.getAppList(t)}getDeviceVersion(e){const t={targetId:e.targetId.toString()};return this.dataSource.getDeviceVersion(t)}getFirmwareVersion(e,t){const n={version:e.seVersion,deviceId:t.id};return this.dataSource.getFirmwareVersion(n)}getOsuFirmwareVersion(e,t){const n={version:e.seVersion,deviceId:t.id};return this.dataSource.getOsuFirmwareVersion(n)}getLatestFirmwareVersion(e,t){const n={currentFinalFirmwareId:e.id,deviceId:t.id};return this.dataSource.getLatestFirmwareVersion(n)}getNextFirmwareVersion(e){return this.dataSource.getFirmwareVersionById(e.nextFinalFirmware)}getLanguagePackages(e,t){const n={deviceId:e.id,currentFinalFirmwareId:t.id};return this.dataSource.getLanguagePackages(n)}getMcuList(){return this.dataSource.getMcuList()}getAppsByHash(e){const t={hashes:e};return hr(async({fromPromise:n,throwE:i})=>{if(t.hashes.length===0)return[];try{return await n(this.dataSource.getAppsByHash(t))}catch(s){return s instanceof ga?i(s):i(new ga(s))}})}};g3=USe([Et(),zSe(0,Xe(wo.ManagerApiDataSource))],g3);var qSe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},LN=(r,e)=>(t,n)=>e(t,n,r);let m3=class{constructor(e,t){this.sessionService=e,this.managerApiDataSource=t}execute(e){for(const t of this.sessionService.getDeviceSessions()){const n=t.getDeviceSessionState();n.sessionStateType!==Ra.Connected&&t.setDeviceSessionState({...n,firmwareUpdateContext:void 0,installedApps:[],appsUpdates:void 0,catalog:void 0})}this.managerApiDataSource.setProvider(e)}};m3=qSe([Et(),LN(0,Xe(Cn.DeviceSessionService)),LN(1,Xe(wo.ManagerApiDataSource))],m3);const jSe=({stub:r,config:e})=>new bn(({bind:t,rebindSync:n})=>{t(wo.DmkConfig).toConstantValue(e),t(wo.ManagerApiDataSource).to(p3).inSingletonScope(),t(wo.ManagerApiService).to(g3).inSingletonScope(),t(wo.SetProviderUseCase).to(m3),r&&(n(wo.ManagerApiDataSource).to(Ei),n(wo.ManagerApiService).to(Ei),n(wo.SetProviderUseCase).to(Ei))});var uf={},J0={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var VSe=J0.exports,FN;function KSe(){return FN||(FN=1,function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof Ii=="object"&&Ii;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,c=36,l=1,u=26,f=38,d=700,h=72,g=128,p="-",m=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=c-l,x=Math.floor,E=String.fromCharCode,S;function T(Q){throw new RangeError(w[Q])}function C(Q,X){for(var O=Q.length,R=[];O--;)R[O]=X(Q[O]);return R}function P(Q,X){var O=Q.split("@"),R="";O.length>1&&(R=O[0]+"@",Q=O[1]),Q=Q.replace(v,".");var M=Q.split("."),k=C(M,X).join(".");return R+k}function V(Q){for(var X=[],O=0,R=Q.length,M,k;O<R;)M=Q.charCodeAt(O++),M>=55296&&M<=56319&&O<R?(k=Q.charCodeAt(O++),(k&64512)==56320?X.push(((M&1023)<<10)+(k&1023)+65536):(X.push(M),O--)):X.push(M);return X}function L(Q){return C(Q,function(X){var O="";return X>65535&&(X-=65536,O+=E(X>>>10&1023|55296),X=56320|X&1023),O+=E(X),O}).join("")}function D(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:c}function b(Q,X){return Q+22+75*(Q<26)-((X!=0)<<5)}function I(Q,X,O){var R=0;for(Q=O?x(Q/d):Q>>1,Q+=x(Q/X);Q>_*u>>1;R+=c)Q=x(Q/_);return x(R+(_+1)*Q/(Q+f))}function B(Q){var X=[],O=Q.length,R,M=0,k=g,j=h,te,ae,he,re,q,J,de,ue,we;for(te=Q.lastIndexOf(p),te<0&&(te=0),ae=0;ae<te;++ae)Q.charCodeAt(ae)>=128&&T("not-basic"),X.push(Q.charCodeAt(ae));for(he=te>0?te+1:0;he<O;){for(re=M,q=1,J=c;he>=O&&T("invalid-input"),de=D(Q.charCodeAt(he++)),(de>=c||de>x((a-M)/q))&&T("overflow"),M+=de*q,ue=J<=j?l:J>=j+u?u:J-j,!(de<ue);J+=c)we=c-ue,q>x(a/we)&&T("overflow"),q*=we;R=X.length+1,j=I(M-re,R,re==0),x(M/R)>a-k&&T("overflow"),k+=x(M/R),M%=R,X.splice(M++,0,k)}return L(X)}function F(Q){var X,O,R,M,k,j,te,ae,he,re,q,J=[],de,ue,we,se;for(Q=V(Q),de=Q.length,X=g,O=0,k=h,j=0;j<de;++j)q=Q[j],q<128&&J.push(E(q));for(R=M=J.length,M&&J.push(p);R<de;){for(te=a,j=0;j<de;++j)q=Q[j],q>=X&&q<te&&(te=q);for(ue=R+1,te-X>x((a-O)/ue)&&T("overflow"),O+=(te-X)*ue,X=te,j=0;j<de;++j)if(q=Q[j],q<X&&++O>a&&T("overflow"),q==X){for(ae=O,he=c;re=he<=k?l:he>=k+u?u:he-k,!(ae<re);he+=c)se=ae-re,we=c-re,J.push(E(b(re+se%we,0))),ae=x(se/we);J.push(E(b(ae,0))),k=I(O,ue,R==M),O=0,++R}++O,++X}return J.join("")}function z(Q){return P(Q,function(X){return m.test(X)?B(X.slice(4).toLowerCase()):X})}function G(Q){return P(Q,function(X){return y.test(X)?"xn--"+F(X):X})}if(o={version:"1.4.1",ucs2:{decode:V,encode:L},decode:B,encode:F,toASCII:G,toUnicode:z},n&&i)if(r.exports==n)i.exports=o;else for(S in o)o.hasOwnProperty(S)&&(n[S]=o[S]);else t.punycode=o})(VSe)}(J0,J0.exports)),J0.exports}var WE,UN;function Cw(){if(UN)return WE;UN=1;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&s&&typeof s.get=="function"?s.get:null,a=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,l=c?WeakMap.prototype.has:null,u=typeof WeakSet=="function"&&WeakSet.prototype,f=u?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,h=d?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,p=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,w=String.prototype.replace,_=String.prototype.toUpperCase,x=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,T=Array.prototype.join,C=Array.prototype.slice,P=Math.floor,V=typeof BigInt=="function"?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,b=typeof Symbol=="function"&&typeof Symbol.iterator=="object",I=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===b||!0)?Symbol.toStringTag:null,B=Object.prototype.propertyIsEnumerable,F=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(fe){return fe.__proto__}:null);function z(fe,Ee){if(fe===1/0||fe===-1/0||fe!==fe||fe&&fe>-1e3&&fe<1e3||E.call(/e/,Ee))return Ee;var Fe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof fe=="number"){var He=fe<0?-P(-fe):P(fe);if(He!==fe){var Ve=String(He),De=v.call(Ee,Ve.length+1);return w.call(Ve,Fe,"$&_")+"."+w.call(w.call(De,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(Ee,Fe,"$&_")}var G=gd,Q=G.custom,X=ue(Q)?Q:null,O={__proto__:null,double:'"',single:"'"},R={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};WE=function fe(Ee,Fe,He,Ve){var De=Fe||{};if(U(De,"quoteStyle")&&!U(O,De.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(U(De,"maxStringLength")&&(typeof De.maxStringLength=="number"?De.maxStringLength<0&&De.maxStringLength!==1/0:De.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var nt=U(De,"customInspect")?De.customInspect:!0;if(typeof nt!="boolean"&&nt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(De,"indent")&&De.indent!==null&&De.indent!=="	"&&!(parseInt(De.indent,10)===De.indent&&De.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(De,"numericSeparator")&&typeof De.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var vt=De.numericSeparator;if(typeof Ee>"u")return"undefined";if(Ee===null)return"null";if(typeof Ee=="boolean")return Ee?"true":"false";if(typeof Ee=="string")return oe(Ee,De);if(typeof Ee=="number"){if(Ee===0)return 1/0/Ee>0?"0":"-0";var dt=String(Ee);return vt?z(Ee,dt):dt}if(typeof Ee=="bigint"){var Ct=String(Ee)+"n";return vt?z(Ee,Ct):Ct}var Cr=typeof De.depth>"u"?5:De.depth;if(typeof He>"u"&&(He=0),He>=Cr&&Cr>0&&typeof Ee=="object")return te(Ee)?"[Array]":"[Object]";var or=ne(De,He);if(typeof Ve>"u")Ve=[];else if(ge(Ve,Ee)>=0)return"[Circular]";function fr(gt,Ft,jt){if(Ft&&(Ve=C.call(Ve),Ve.push(Ft)),jt){var Ht={depth:De.depth};return U(De,"quoteStyle")&&(Ht.quoteStyle=De.quoteStyle),fe(gt,Ht,He+1,Ve)}return fe(gt,De,He+1,Ve)}if(typeof Ee=="function"&&!he(Ee)){var Ts=ie(Ee),Xr=be(Ee,fr);return"[Function"+(Ts?": "+Ts:" (anonymous)")+"]"+(Xr.length>0?" { "+T.call(Xr,", ")+" }":"")}if(ue(Ee)){var yr=b?w.call(String(Ee),/^(Symbol\(.*\))_[^)]*$/,"$1"):D.call(Ee);return typeof Ee=="object"&&!b?ee(yr):yr}if(Me(Ee)){for(var ts="<"+x.call(String(Ee.nodeName)),ce=Ee.attributes||[],me=0;me<ce.length;me++)ts+=" "+ce[me].name+"="+M(k(ce[me].value),"double",De);return ts+=">",Ee.childNodes&&Ee.childNodes.length&&(ts+="..."),ts+="</"+x.call(String(Ee.nodeName))+">",ts}if(te(Ee)){if(Ee.length===0)return"[]";var ye=be(Ee,fr);return or&&!$(ye)?"["+pe(ye,or)+"]":"[ "+T.call(ye,", ")+" ]"}if(re(Ee)){var Y=be(Ee,fr);return!("cause"in Error.prototype)&&"cause"in Ee&&!B.call(Ee,"cause")?"{ ["+String(Ee)+"] "+T.call(S.call("[cause]: "+fr(Ee.cause),Y),", ")+" }":Y.length===0?"["+String(Ee)+"]":"{ ["+String(Ee)+"] "+T.call(Y,", ")+" }"}if(typeof Ee=="object"&&nt){if(X&&typeof Ee[X]=="function"&&G)return G(Ee,{depth:Cr-He});if(nt!=="symbol"&&typeof Ee.inspect=="function")return Ee.inspect()}if(_e(Ee)){var ve=[];return n&&n.call(Ee,function(gt,Ft){ve.push(fr(Ft,Ee,!0)+" => "+fr(gt,Ee))}),N("Map",t.call(Ee),ve,or)}if(xe(Ee)){var $e=[];return a&&a.call(Ee,function(gt){$e.push(fr(gt,Ee))}),N("Set",o.call(Ee),$e,or)}if(Ce(Ee))return W("WeakMap");if(Ae(Ee))return W("WeakSet");if(Ne(Ee))return W("WeakRef");if(J(Ee))return ee(fr(Number(Ee)));if(we(Ee))return ee(fr(V.call(Ee)));if(de(Ee))return ee(g.call(Ee));if(q(Ee))return ee(fr(String(Ee)));if(typeof window<"u"&&Ee===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ee===globalThis||typeof Ii<"u"&&Ee===Ii)return"{ [object globalThis] }";if(!ae(Ee)&&!he(Ee)){var ke=be(Ee,fr),qe=F?F(Ee)===Object.prototype:Ee instanceof Object||Ee.constructor===Object,tt=Ee instanceof Object?"":"null prototype",ut=!qe&&I&&Object(Ee)===Ee&&I in Ee?v.call(K(Ee),8,-1):tt?"Object":"",it=qe||typeof Ee.constructor!="function"?"":Ee.constructor.name?Ee.constructor.name+" ":"",cr=it+(ut||tt?"["+T.call(S.call([],ut||[],tt||[]),": ")+"] ":"");return ke.length===0?cr+"{}":or?cr+"{"+pe(ke,or)+"}":cr+"{ "+T.call(ke,", ")+" }"}return String(Ee)};function M(fe,Ee,Fe){var He=Fe.quoteStyle||Ee,Ve=O[He];return Ve+fe+Ve}function k(fe){return w.call(String(fe),/"/g,"&quot;")}function j(fe){return!I||!(typeof fe=="object"&&(I in fe||typeof fe[I]<"u"))}function te(fe){return K(fe)==="[object Array]"&&j(fe)}function ae(fe){return K(fe)==="[object Date]"&&j(fe)}function he(fe){return K(fe)==="[object RegExp]"&&j(fe)}function re(fe){return K(fe)==="[object Error]"&&j(fe)}function q(fe){return K(fe)==="[object String]"&&j(fe)}function J(fe){return K(fe)==="[object Number]"&&j(fe)}function de(fe){return K(fe)==="[object Boolean]"&&j(fe)}function ue(fe){if(b)return fe&&typeof fe=="object"&&fe instanceof Symbol;if(typeof fe=="symbol")return!0;if(!fe||typeof fe!="object"||!D)return!1;try{return D.call(fe),!0}catch{}return!1}function we(fe){if(!fe||typeof fe!="object"||!V)return!1;try{return V.call(fe),!0}catch{}return!1}var se=Object.prototype.hasOwnProperty||function(fe){return fe in this};function U(fe,Ee){return se.call(fe,Ee)}function K(fe){return p.call(fe)}function ie(fe){if(fe.name)return fe.name;var Ee=y.call(m.call(fe),/^function\s*([\w$]+)/);return Ee?Ee[1]:null}function ge(fe,Ee){if(fe.indexOf)return fe.indexOf(Ee);for(var Fe=0,He=fe.length;Fe<He;Fe++)if(fe[Fe]===Ee)return Fe;return-1}function _e(fe){if(!t||!fe||typeof fe!="object")return!1;try{t.call(fe);try{o.call(fe)}catch{return!0}return fe instanceof Map}catch{}return!1}function Ce(fe){if(!l||!fe||typeof fe!="object")return!1;try{l.call(fe,l);try{f.call(fe,f)}catch{return!0}return fe instanceof WeakMap}catch{}return!1}function Ne(fe){if(!h||!fe||typeof fe!="object")return!1;try{return h.call(fe),!0}catch{}return!1}function xe(fe){if(!o||!fe||typeof fe!="object")return!1;try{o.call(fe);try{t.call(fe)}catch{return!0}return fe instanceof Set}catch{}return!1}function Ae(fe){if(!f||!fe||typeof fe!="object")return!1;try{f.call(fe,f);try{l.call(fe,l)}catch{return!0}return fe instanceof WeakSet}catch{}return!1}function Me(fe){return!fe||typeof fe!="object"?!1:typeof HTMLElement<"u"&&fe instanceof HTMLElement?!0:typeof fe.nodeName=="string"&&typeof fe.getAttribute=="function"}function oe(fe,Ee){if(fe.length>Ee.maxStringLength){var Fe=fe.length-Ee.maxStringLength,He="... "+Fe+" more character"+(Fe>1?"s":"");return oe(v.call(fe,0,Ee.maxStringLength),Ee)+He}var Ve=R[Ee.quoteStyle||"single"];Ve.lastIndex=0;var De=w.call(w.call(fe,Ve,"\\$1"),/[\x00-\x1f]/g,H);return M(De,"single",Ee)}function H(fe){var Ee=fe.charCodeAt(0),Fe={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ee];return Fe?"\\"+Fe:"\\x"+(Ee<16?"0":"")+_.call(Ee.toString(16))}function ee(fe){return"Object("+fe+")"}function W(fe){return fe+" { ? }"}function N(fe,Ee,Fe,He){var Ve=He?pe(Fe,He):T.call(Fe,", ");return fe+" ("+Ee+") {"+Ve+"}"}function $(fe){for(var Ee=0;Ee<fe.length;Ee++)if(ge(fe[Ee],`
`)>=0)return!1;return!0}function ne(fe,Ee){var Fe;if(fe.indent==="	")Fe="	";else if(typeof fe.indent=="number"&&fe.indent>0)Fe=T.call(Array(fe.indent+1)," ");else return null;return{base:Fe,prev:T.call(Array(Ee+1),Fe)}}function pe(fe,Ee){if(fe.length===0)return"";var Fe=`
`+Ee.prev+Ee.base;return Fe+T.call(fe,","+Fe)+`
`+Ee.prev}function be(fe,Ee){var Fe=te(fe),He=[];if(Fe){He.length=fe.length;for(var Ve=0;Ve<fe.length;Ve++)He[Ve]=U(fe,Ve)?Ee(fe[Ve],fe):""}var De=typeof L=="function"?L(fe):[],nt;if(b){nt={};for(var vt=0;vt<De.length;vt++)nt["$"+De[vt]]=De[vt]}for(var dt in fe)U(fe,dt)&&(Fe&&String(Number(dt))===dt&&dt<fe.length||b&&nt["$"+dt]instanceof Symbol||(E.call(/[^\w$]/,dt)?He.push(Ee(dt,fe)+": "+Ee(fe[dt],fe)):He.push(dt+": "+Ee(fe[dt],fe))));if(typeof L=="function")for(var Ct=0;Ct<De.length;Ct++)B.call(fe,De[Ct])&&He.push("["+Ee(De[Ct])+"]: "+Ee(fe[De[Ct]],fe));return He}return WE}var GE,zN;function HSe(){if(zN)return GE;zN=1;var r=Cw(),e=kc(),t=function(a,c,l){for(var u=a,f;(f=u.next)!=null;u=f)if(f.key===c)return u.next=f.next,l||(f.next=a.next,a.next=f),f},n=function(a,c){if(a){var l=t(a,c);return l&&l.value}},i=function(a,c,l){var u=t(a,c);u?u.value=l:a.next={key:c,next:a.next,value:l}},s=function(a,c){return a?!!t(a,c):!1},o=function(a,c){if(a)return t(a,c,!0)};return GE=function(){var c,l={assert:function(u){if(!l.has(u))throw new e("Side channel does not contain "+r(u))},delete:function(u){var f=c&&c.next,d=o(c,u);return d&&f&&f===d&&(c=void 0),!!d},get:function(u){return n(c,u)},has:function(u){return s(c,u)},set:function(u,f){c||(c={next:void 0}),i(c,u,f)}};return l},GE}var YE,qN;function yY(){if(qN)return YE;qN=1;var r=Mm(),e=Ol(),t=Cw(),n=kc(),i=r("%Map%",!0),s=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),a=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),l=e("Map.prototype.size",!0);return YE=!!i&&function(){var f,d={assert:function(h){if(!d.has(h))throw new n("Side channel does not contain "+t(h))},delete:function(h){if(f){var g=c(f,h);return l(f)===0&&(f=void 0),g}return!1},get:function(h){if(f)return s(f,h)},has:function(h){return f?a(f,h):!1},set:function(h,g){f||(f=new i),o(f,h,g)}};return d},YE}var JE,jN;function WSe(){if(jN)return JE;jN=1;var r=Mm(),e=Ol(),t=Cw(),n=yY(),i=kc(),s=r("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),l=e("WeakMap.prototype.delete",!0);return JE=s?function(){var f,d,h={assert:function(g){if(!h.has(g))throw new i("Side channel does not contain "+t(g))},delete:function(g){if(s&&g&&(typeof g=="object"||typeof g=="function")){if(f)return l(f,g)}else if(n&&d)return d.delete(g);return!1},get:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&f?o(f,g):d&&d.get(g)},has:function(g){return s&&g&&(typeof g=="object"||typeof g=="function")&&f?c(f,g):!!d&&d.has(g)},set:function(g,p){s&&g&&(typeof g=="object"||typeof g=="function")?(f||(f=new s),a(f,g,p)):n&&(d||(d=n()),d.set(g,p))}};return h}:n,JE}var XE,VN;function GSe(){if(VN)return XE;VN=1;var r=kc(),e=Cw(),t=HSe(),n=yY(),i=WSe(),s=i||n||t;return XE=function(){var a,c={assert:function(l){if(!c.has(l))throw new r("Side channel does not contain "+e(l))},delete:function(l){return!!a&&a.delete(l)},get:function(l){return a&&a.get(l)},has:function(l){return!!a&&a.has(l)},set:function(l,u){a||(a=s()),a.set(l,u)}};return c},XE}var ZE,KN;function P6(){if(KN)return ZE;KN=1;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return ZE={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},ZE}var QE,HN;function vY(){if(HN)return QE;HN=1;var r=P6(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=function(){for(var m=[],y=0;y<256;++y)m.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return m}(),i=function(y){for(;y.length>1;){var v=y.pop(),w=v.obj[v.prop];if(t(w)){for(var _=[],x=0;x<w.length;++x)typeof w[x]<"u"&&_.push(w[x]);v.obj[v.prop]=_}}},s=function(y,v){for(var w=v&&v.plainObjects?{__proto__:null}:{},_=0;_<y.length;++_)typeof y[_]<"u"&&(w[_]=y[_]);return w},o=function m(y,v,w){if(!v)return y;if(typeof v!="object"&&typeof v!="function"){if(t(y))y.push(v);else if(y&&typeof y=="object")(w&&(w.plainObjects||w.allowPrototypes)||!e.call(Object.prototype,v))&&(y[v]=!0);else return[y,v];return y}if(!y||typeof y!="object")return[y].concat(v);var _=y;return t(y)&&!t(v)&&(_=s(y,w)),t(y)&&t(v)?(v.forEach(function(x,E){if(e.call(y,E)){var S=y[E];S&&typeof S=="object"&&x&&typeof x=="object"?y[E]=m(S,x,w):y.push(x)}else y[E]=x}),y):Object.keys(v).reduce(function(x,E){var S=v[E];return e.call(x,E)?x[E]=m(x[E],S,w):x[E]=S,x},_)},a=function(y,v){return Object.keys(v).reduce(function(w,_){return w[_]=v[_],w},y)},c=function(m,y,v){var w=m.replace(/\+/g," ");if(v==="iso-8859-1")return w.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(w)}catch{return w}},l=1024,u=function(y,v,w,_,x){if(y.length===0)return y;var E=y;if(typeof y=="symbol"?E=Symbol.prototype.toString.call(y):typeof y!="string"&&(E=String(y)),w==="iso-8859-1")return escape(E).replace(/%u[0-9a-f]{4}/gi,function(D){return"%26%23"+parseInt(D.slice(2),16)+"%3B"});for(var S="",T=0;T<E.length;T+=l){for(var C=E.length>=l?E.slice(T,T+l):E,P=[],V=0;V<C.length;++V){var L=C.charCodeAt(V);if(L===45||L===46||L===95||L===126||L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122||x===r.RFC1738&&(L===40||L===41)){P[P.length]=C.charAt(V);continue}if(L<128){P[P.length]=n[L];continue}if(L<2048){P[P.length]=n[192|L>>6]+n[128|L&63];continue}if(L<55296||L>=57344){P[P.length]=n[224|L>>12]+n[128|L>>6&63]+n[128|L&63];continue}V+=1,L=65536+((L&1023)<<10|C.charCodeAt(V)&1023),P[P.length]=n[240|L>>18]+n[128|L>>12&63]+n[128|L>>6&63]+n[128|L&63]}S+=P.join("")}return S},f=function(y){for(var v=[{obj:{o:y},prop:"o"}],w=[],_=0;_<v.length;++_)for(var x=v[_],E=x.obj[x.prop],S=Object.keys(E),T=0;T<S.length;++T){var C=S[T],P=E[C];typeof P=="object"&&P!==null&&w.indexOf(P)===-1&&(v.push({obj:E,prop:C}),w.push(P))}return i(v),y},d=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},h=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},g=function(y,v){return[].concat(y,v)},p=function(y,v){if(t(y)){for(var w=[],_=0;_<y.length;_+=1)w.push(v(y[_]));return w}return v(y)};return QE={arrayToObject:s,assign:a,combine:g,compact:f,decode:c,encode:u,isBuffer:h,isRegExp:d,maybeMap:p,merge:o},QE}var eA,WN;function YSe(){if(WN)return eA;WN=1;var r=GSe(),e=vY(),t=P6(),n=Object.prototype.hasOwnProperty,i={brackets:function(m){return m+"[]"},comma:"comma",indices:function(m,y){return m+"["+y+"]"},repeat:function(m){return m}},s=Array.isArray,o=Array.prototype.push,a=function(p,m){o.apply(p,s(m)?m:[m])},c=Date.prototype.toISOString,l=t.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:l,formatter:t.formatters[l],indices:!1,serializeDate:function(m){return c.call(m)},skipNulls:!1,strictNullHandling:!1},f=function(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"},d={},h=function p(m,y,v,w,_,x,E,S,T,C,P,V,L,D,b,I,B,F){for(var z=m,G=F,Q=0,X=!1;(G=G.get(d))!==void 0&&!X;){var O=G.get(m);if(Q+=1,typeof O<"u"){if(O===Q)throw new RangeError("Cyclic object value");X=!0}typeof G.get(d)>"u"&&(Q=0)}if(typeof C=="function"?z=C(y,z):z instanceof Date?z=L(z):v==="comma"&&s(z)&&(z=e.maybeMap(z,function(we){return we instanceof Date?L(we):we})),z===null){if(x)return T&&!I?T(y,u.encoder,B,"key",D):y;z=""}if(f(z)||e.isBuffer(z)){if(T){var R=I?y:T(y,u.encoder,B,"key",D);return[b(R)+"="+b(T(z,u.encoder,B,"value",D))]}return[b(y)+"="+b(String(z))]}var M=[];if(typeof z>"u")return M;var k;if(v==="comma"&&s(z))I&&T&&(z=e.maybeMap(z,T)),k=[{value:z.length>0?z.join(",")||null:void 0}];else if(s(C))k=C;else{var j=Object.keys(z);k=P?j.sort(P):j}var te=S?String(y).replace(/\./g,"%2E"):String(y),ae=w&&s(z)&&z.length===1?te+"[]":te;if(_&&s(z)&&z.length===0)return ae+"[]";for(var he=0;he<k.length;++he){var re=k[he],q=typeof re=="object"&&re&&typeof re.value<"u"?re.value:z[re];if(!(E&&q===null)){var J=V&&S?String(re).replace(/\./g,"%2E"):String(re),de=s(z)?typeof v=="function"?v(ae,J):ae:ae+(V?"."+J:"["+J+"]");F.set(m,Q);var ue=r();ue.set(d,F),a(M,p(q,de,v,w,_,x,E,S,v==="comma"&&I&&s(z)?null:T,C,P,V,L,D,b,I,B,ue))}}return M},g=function(m){if(!m)return u;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.encodeDotInKeys<"u"&&typeof m.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=m.charset||u.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var v=t.default;if(typeof m.format<"u"){if(!n.call(t.formatters,m.format))throw new TypeError("Unknown format option provided.");v=m.format}var w=t.formatters[v],_=u.filter;(typeof m.filter=="function"||s(m.filter))&&(_=m.filter);var x;if(m.arrayFormat in i?x=m.arrayFormat:"indices"in m?x=m.indices?"indices":"repeat":x=u.arrayFormat,"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var E=typeof m.allowDots>"u"?m.encodeDotInKeys===!0?!0:u.allowDots:!!m.allowDots;return{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:u.addQueryPrefix,allowDots:E,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:x,charset:y,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:u.charsetSentinel,commaRoundTrip:!!m.commaRoundTrip,delimiter:typeof m.delimiter>"u"?u.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:u.encode,encodeDotInKeys:typeof m.encodeDotInKeys=="boolean"?m.encodeDotInKeys:u.encodeDotInKeys,encoder:typeof m.encoder=="function"?m.encoder:u.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:u.encodeValuesOnly,filter:_,format:v,formatter:w,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:u.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:u.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:u.strictNullHandling}};return eA=function(p,m){var y=p,v=g(m),w,_;typeof v.filter=="function"?(_=v.filter,y=_("",y)):s(v.filter)&&(_=v.filter,w=_);var x=[];if(typeof y!="object"||y===null)return"";var E=i[v.arrayFormat],S=E==="comma"&&v.commaRoundTrip;w||(w=Object.keys(y)),v.sort&&w.sort(v.sort);for(var T=r(),C=0;C<w.length;++C){var P=w[C],V=y[P];v.skipNulls&&V===null||a(x,h(V,P,E,S,v.allowEmptyArrays,v.strictNullHandling,v.skipNulls,v.encodeDotInKeys,v.encode?v.encoder:null,v.filter,v.sort,v.allowDots,v.serializeDate,v.format,v.formatter,v.encodeValuesOnly,v.charset,T))}var L=x.join(v.delimiter),D=v.addQueryPrefix===!0?"?":"";return v.charsetSentinel&&(v.charset==="iso-8859-1"?D+="utf8=%26%2310003%3B&":D+="utf8=%E2%9C%93&"),L.length>0?D+L:""},eA}var tA,GN;function JSe(){if(GN)return tA;GN=1;var r=vY(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(d){return d.replace(/&#(\d+);/g,function(h,g){return String.fromCharCode(parseInt(g,10))})},s=function(d,h,g){if(d&&typeof d=="string"&&h.comma&&d.indexOf(",")>-1)return d.split(",");if(h.throwOnLimitExceeded&&g>=h.arrayLimit)throw new RangeError("Array limit exceeded. Only "+h.arrayLimit+" element"+(h.arrayLimit===1?"":"s")+" allowed in an array.");return d},o="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",c=function(h,g){var p={__proto__:null},m=g.ignoreQueryPrefix?h.replace(/^\?/,""):h;m=m.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=g.parameterLimit===1/0?void 0:g.parameterLimit,v=m.split(g.delimiter,g.throwOnLimitExceeded?y+1:y);if(g.throwOnLimitExceeded&&v.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var w=-1,_,x=g.charset;if(g.charsetSentinel)for(_=0;_<v.length;++_)v[_].indexOf("utf8=")===0&&(v[_]===a?x="utf-8":v[_]===o&&(x="iso-8859-1"),w=_,_=v.length);for(_=0;_<v.length;++_)if(_!==w){var E=v[_],S=E.indexOf("]="),T=S===-1?E.indexOf("="):S+1,C,P;T===-1?(C=g.decoder(E,n.decoder,x,"key"),P=g.strictNullHandling?null:""):(C=g.decoder(E.slice(0,T),n.decoder,x,"key"),P=r.maybeMap(s(E.slice(T+1),g,t(p[C])?p[C].length:0),function(L){return g.decoder(L,n.decoder,x,"value")})),P&&g.interpretNumericEntities&&x==="iso-8859-1"&&(P=i(String(P))),E.indexOf("[]=")>-1&&(P=t(P)?[P]:P);var V=e.call(p,C);V&&g.duplicates==="combine"?p[C]=r.combine(p[C],P):(!V||g.duplicates==="last")&&(p[C]=P)}return p},l=function(d,h,g,p){var m=0;if(d.length>0&&d[d.length-1]==="[]"){var y=d.slice(0,-1).join("");m=Array.isArray(h)&&h[y]?h[y].length:0}for(var v=p?h:s(h,g,m),w=d.length-1;w>=0;--w){var _,x=d[w];if(x==="[]"&&g.parseArrays)_=g.allowEmptyArrays&&(v===""||g.strictNullHandling&&v===null)?[]:r.combine([],v);else{_=g.plainObjects?{__proto__:null}:{};var E=x.charAt(0)==="["&&x.charAt(x.length-1)==="]"?x.slice(1,-1):x,S=g.decodeDotInKeys?E.replace(/%2E/g,"."):E,T=parseInt(S,10);!g.parseArrays&&S===""?_={0:v}:!isNaN(T)&&x!==S&&String(T)===S&&T>=0&&g.parseArrays&&T<=g.arrayLimit?(_=[],_[T]=v):S!=="__proto__"&&(_[S]=v)}v=_}return v},u=function(h,g,p,m){if(h){var y=p.allowDots?h.replace(/\.([^.[]+)/g,"[$1]"):h,v=/(\[[^[\]]*])/,w=/(\[[^[\]]*])/g,_=p.depth>0&&v.exec(y),x=_?y.slice(0,_.index):y,E=[];if(x){if(!p.plainObjects&&e.call(Object.prototype,x)&&!p.allowPrototypes)return;E.push(x)}for(var S=0;p.depth>0&&(_=w.exec(y))!==null&&S<p.depth;){if(S+=1,!p.plainObjects&&e.call(Object.prototype,_[1].slice(1,-1))&&!p.allowPrototypes)return;E.push(_[1])}if(_){if(p.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+p.depth+" and strictDepth is true");E.push("["+y.slice(_.index)+"]")}return l(E,g,p,m)}},f=function(h){if(!h)return n;if(typeof h.allowEmptyArrays<"u"&&typeof h.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof h.decodeDotInKeys<"u"&&typeof h.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(h.decoder!==null&&typeof h.decoder<"u"&&typeof h.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof h.charset<"u"&&h.charset!=="utf-8"&&h.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof h.throwOnLimitExceeded<"u"&&typeof h.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var g=typeof h.charset>"u"?n.charset:h.charset,p=typeof h.duplicates>"u"?n.duplicates:h.duplicates;if(p!=="combine"&&p!=="first"&&p!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var m=typeof h.allowDots>"u"?h.decodeDotInKeys===!0?!0:n.allowDots:!!h.allowDots;return{allowDots:m,allowEmptyArrays:typeof h.allowEmptyArrays=="boolean"?!!h.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof h.allowPrototypes=="boolean"?h.allowPrototypes:n.allowPrototypes,allowSparse:typeof h.allowSparse=="boolean"?h.allowSparse:n.allowSparse,arrayLimit:typeof h.arrayLimit=="number"?h.arrayLimit:n.arrayLimit,charset:g,charsetSentinel:typeof h.charsetSentinel=="boolean"?h.charsetSentinel:n.charsetSentinel,comma:typeof h.comma=="boolean"?h.comma:n.comma,decodeDotInKeys:typeof h.decodeDotInKeys=="boolean"?h.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof h.decoder=="function"?h.decoder:n.decoder,delimiter:typeof h.delimiter=="string"||r.isRegExp(h.delimiter)?h.delimiter:n.delimiter,depth:typeof h.depth=="number"||h.depth===!1?+h.depth:n.depth,duplicates:p,ignoreQueryPrefix:h.ignoreQueryPrefix===!0,interpretNumericEntities:typeof h.interpretNumericEntities=="boolean"?h.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof h.parameterLimit=="number"?h.parameterLimit:n.parameterLimit,parseArrays:h.parseArrays!==!1,plainObjects:typeof h.plainObjects=="boolean"?h.plainObjects:n.plainObjects,strictDepth:typeof h.strictDepth=="boolean"?!!h.strictDepth:n.strictDepth,strictNullHandling:typeof h.strictNullHandling=="boolean"?h.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof h.throwOnLimitExceeded=="boolean"?h.throwOnLimitExceeded:!1}};return tA=function(d,h){var g=f(h);if(d===""||d===null||typeof d>"u")return g.plainObjects?{__proto__:null}:{};for(var p=typeof d=="string"?c(d,g):d,m=g.plainObjects?{__proto__:null}:{},y=Object.keys(p),v=0;v<y.length;++v){var w=y[v],_=u(w,p[w],g,typeof d=="string");m=r.merge(m,_,g)}return g.allowSparse===!0?m:r.compact(m)},tA}var rA,YN;function XSe(){if(YN)return rA;YN=1;var r=YSe(),e=JSe(),t=P6();return rA={formats:t,parse:e,stringify:r},rA}var JN;function ZSe(){if(JN)return uf;JN=1;var r=KSe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),a=["'"].concat(o),c=["%","/","?",";","#"].concat(a),l=["/","?","#"],u=255,f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},p={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=XSe();function y(x,E,S){if(x&&typeof x=="object"&&x instanceof e)return x;var T=new e;return T.parse(x,E,S),T}e.prototype.parse=function(x,E,S){if(typeof x!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof x);var T=x.indexOf("?"),C=T!==-1&&T<x.indexOf("#")?"?":"#",P=x.split(C),V=/\\/g;P[0]=P[0].replace(V,"/"),x=P.join(C);var L=x;if(L=L.trim(),!S&&x.split("#").length===1){var D=i.exec(L);if(D)return this.path=L,this.href=L,this.pathname=D[1],D[2]?(this.search=D[2],E?this.query=m.parse(this.search.substr(1)):this.query=this.search.substr(1)):E&&(this.search="",this.query={}),this}var b=t.exec(L);if(b){b=b[0];var I=b.toLowerCase();this.protocol=I,L=L.substr(b.length)}if(S||b||L.match(/^\/\/[^@/]+@[^@/]+/)){var B=L.substr(0,2)==="//";B&&!(b&&g[b])&&(L=L.substr(2),this.slashes=!0)}if(!g[b]&&(B||b&&!p[b])){for(var F=-1,z=0;z<l.length;z++){var G=L.indexOf(l[z]);G!==-1&&(F===-1||G<F)&&(F=G)}var Q,X;F===-1?X=L.lastIndexOf("@"):X=L.lastIndexOf("@",F),X!==-1&&(Q=L.slice(0,X),L=L.slice(X+1),this.auth=decodeURIComponent(Q)),F=-1;for(var z=0;z<c.length;z++){var G=L.indexOf(c[z]);G!==-1&&(F===-1||G<F)&&(F=G)}F===-1&&(F=L.length),this.host=L.slice(0,F),L=L.slice(F),this.parseHost(),this.hostname=this.hostname||"";var O=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!O)for(var R=this.hostname.split(/\./),z=0,M=R.length;z<M;z++){var k=R[z];if(k&&!k.match(f)){for(var j="",te=0,ae=k.length;te<ae;te++)k.charCodeAt(te)>127?j+="x":j+=k[te];if(!j.match(f)){var he=R.slice(0,z),re=R.slice(z+1),q=k.match(d);q&&(he.push(q[1]),re.unshift(q[2])),re.length&&(L="/"+re.join(".")+L),this.hostname=he.join(".");break}}}this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var J=this.port?":"+this.port:"",de=this.hostname||"";this.host=de+J,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),L[0]!=="/"&&(L="/"+L))}if(!h[I])for(var z=0,M=a.length;z<M;z++){var ue=a[z];if(L.indexOf(ue)!==-1){var we=encodeURIComponent(ue);we===ue&&(we=escape(ue)),L=L.split(ue).join(we)}}var se=L.indexOf("#");se!==-1&&(this.hash=L.substr(se),L=L.slice(0,se));var U=L.indexOf("?");if(U!==-1?(this.search=L.substr(U),this.query=L.substr(U+1),E&&(this.query=m.parse(this.query)),L=L.slice(0,U)):E&&(this.search="",this.query={}),L&&(this.pathname=L),p[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var J=this.pathname||"",K=this.search||"";this.path=J+K}return this.href=this.format(),this};function v(x){return typeof x=="string"&&(x=y(x)),x instanceof e?x.format():e.prototype.format.call(x)}e.prototype.format=function(){var x=this.auth||"";x&&(x=encodeURIComponent(x),x=x.replace(/%3A/i,":"),x+="@");var E=this.protocol||"",S=this.pathname||"",T=this.hash||"",C=!1,P="";this.host?C=x+this.host:this.hostname&&(C=x+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(C+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(P=m.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var V=this.search||P&&"?"+P||"";return E&&E.substr(-1)!==":"&&(E+=":"),this.slashes||(!E||p[E])&&C!==!1?(C="//"+(C||""),S&&S.charAt(0)!=="/"&&(S="/"+S)):C||(C=""),T&&T.charAt(0)!=="#"&&(T="#"+T),V&&V.charAt(0)!=="?"&&(V="?"+V),S=S.replace(/[?#]/g,function(L){return encodeURIComponent(L)}),V=V.replace("#","%23"),E+C+S+V+T};function w(x,E){return y(x,!1,!0).resolve(E)}e.prototype.resolve=function(x){return this.resolveObject(y(x,!1,!0)).format()};function _(x,E){return x?y(x,!1,!0).resolveObject(E):E}return e.prototype.resolveObject=function(x){if(typeof x=="string"){var E=new e;E.parse(x,!1,!0),x=E}for(var S=new e,T=Object.keys(this),C=0;C<T.length;C++){var P=T[C];S[P]=this[P]}if(S.hash=x.hash,x.href==="")return S.href=S.format(),S;if(x.slashes&&!x.protocol){for(var V=Object.keys(x),L=0;L<V.length;L++){var D=V[L];D!=="protocol"&&(S[D]=x[D])}return p[S.protocol]&&S.hostname&&!S.pathname&&(S.pathname="/",S.path=S.pathname),S.href=S.format(),S}if(x.protocol&&x.protocol!==S.protocol){if(!p[x.protocol]){for(var b=Object.keys(x),I=0;I<b.length;I++){var B=b[I];S[B]=x[B]}return S.href=S.format(),S}if(S.protocol=x.protocol,!x.host&&!g[x.protocol]){for(var M=(x.pathname||"").split("/");M.length&&!(x.host=M.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),M[0]!==""&&M.unshift(""),M.length<2&&M.unshift(""),S.pathname=M.join("/")}else S.pathname=x.pathname;if(S.search=x.search,S.query=x.query,S.host=x.host||"",S.auth=x.auth,S.hostname=x.hostname||x.host,S.port=x.port,S.pathname||S.search){var F=S.pathname||"",z=S.search||"";S.path=F+z}return S.slashes=S.slashes||x.slashes,S.href=S.format(),S}var G=S.pathname&&S.pathname.charAt(0)==="/",Q=x.host||x.pathname&&x.pathname.charAt(0)==="/",X=Q||G||S.host&&x.pathname,O=X,R=S.pathname&&S.pathname.split("/")||[],M=x.pathname&&x.pathname.split("/")||[],k=S.protocol&&!p[S.protocol];if(k&&(S.hostname="",S.port=null,S.host&&(R[0]===""?R[0]=S.host:R.unshift(S.host)),S.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&(M[0]===""?M[0]=x.host:M.unshift(x.host)),x.host=null),X=X&&(M[0]===""||R[0]==="")),Q)S.host=x.host||x.host===""?x.host:S.host,S.hostname=x.hostname||x.hostname===""?x.hostname:S.hostname,S.search=x.search,S.query=x.query,R=M;else if(M.length)R||(R=[]),R.pop(),R=R.concat(M),S.search=x.search,S.query=x.query;else if(x.search!=null){if(k){S.host=R.shift(),S.hostname=S.host;var j=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;j&&(S.auth=j.shift(),S.hostname=j.shift(),S.host=S.hostname)}return S.search=x.search,S.query=x.query,(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.href=S.format(),S}if(!R.length)return S.pathname=null,S.search?S.path="/"+S.search:S.path=null,S.href=S.format(),S;for(var te=R.slice(-1)[0],ae=(S.host||x.host||R.length>1)&&(te==="."||te==="..")||te==="",he=0,re=R.length;re>=0;re--)te=R[re],te==="."?R.splice(re,1):te===".."?(R.splice(re,1),he++):he&&(R.splice(re,1),he--);if(!X&&!O)for(;he--;he)R.unshift("..");X&&R[0]!==""&&(!R[0]||R[0].charAt(0)!=="/")&&R.unshift(""),ae&&R.join("/").substr(-1)!=="/"&&R.push("");var q=R[0]===""||R[0]&&R[0].charAt(0)==="/";if(k){S.hostname=q?"":R.length?R.shift():"",S.host=S.hostname;var j=S.host&&S.host.indexOf("@")>0?S.host.split("@"):!1;j&&(S.auth=j.shift(),S.hostname=j.shift(),S.host=S.hostname)}return X=X||S.host&&R.length,X&&!q&&R.unshift(""),R.length>0?S.pathname=R.join("/"):(S.pathname=null,S.path=null),(S.pathname!==null||S.search!==null)&&(S.path=(S.pathname?S.pathname:"")+(S.search?S.search:"")),S.auth=x.auth||S.auth,S.slashes=S.slashes||x.slashes,S.href=S.format(),S},e.prototype.parseHost=function(){var x=this.host,E=n.exec(x);E&&(E=E[0],E!==":"&&(this.port=E.substr(1)),x=x.substr(0,x.length-E.length)),x&&(this.hostname=x)},uf.parse=y,uf.resolve=w,uf.resolveObject=_,uf.format=v,uf.Url=e,uf}var QSe=ZSe();const Gd=zs(QSe);var e2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},t2e=(r,e)=>(t,n)=>e(t,n,r);let y3=class{webSocketBaseUrl;constructor({webSocketUrl:e}){this.webSocketBaseUrl=e}genuineCheck(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){const t=Gd.format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return Zt(new fwe(e))}catch(t){return lt(new ywe(t))}}};y3=e2e([Et(),t2e(0,Xe(kh.DmkConfig))],y3);var r2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},n2e=(r,e)=>(t,n)=>e(t,n,r);let v3=class{constructor(e){this.dataSource=e}genuineCheck(e,t){const n={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.genuineCheck(n)}installApp(e,t){const{perso:n,firmware:i,firmwareKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:n,firmware:i,firmwareKey:s,hash:o};return this.dataSource.installApp(a)}listInstalledApps(e,t){const n={targetId:e.targetId.toString(),perso:t.perso};return this.dataSource.listInstalledApps(n)}uninstallApp(e,t){const{perso:n,delete:i,deleteKey:s,hash:o}=t,a={targetId:e.targetId.toString(),perso:n,firmware:i,firmwareKey:s,hash:o};return this.dataSource.uninstallApp(a)}updateFirmware(e,t){const n={targetId:e.targetId.toString(),perso:t.perso,firmware:t.firmware,firmwareKey:t.firmwareKey};return this.dataSource.updateFirmware(n)}updateMcu(e,t){const n={targetId:e.targetId.toString(),version:t.version};return this.dataSource.updateMcu(n)}};v3=r2e([Et(),n2e(0,Xe(kh.SecureChannelDataSource))],v3);const i2e=({stub:r,config:e})=>new bn(({bind:t})=>{t(kh.DmkConfig).toConstantValue(e),t(kh.SecureChannelDataSource).to(y3),t(kh.SecureChannelService).to(v3)}),bY="wss://scriptrunner.api.live.ledger.com/update";var s2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},XN=(r,e)=>(t,n)=>e(t,n,r);let b3=class{_sessionService;_logger;constructor(e,t){this._sessionService=e,this._logger=t("SendApduUseCase")}async execute({sessionId:e,apdu:t,abortTimeout:n,triggersDisconnection:i}){return this._sessionService.getDeviceSessionById(e).caseOf({Right:async s=>(await s.sendApdu(t,{abortTimeout:n,triggersDisconnection:i})).caseOf({Right:o=>o,Left:o=>{throw this._logger.error("Error sending APDU",{data:{sessionId:e,apdu:t,error:o}}),o}}),Left:s=>{throw this._logger.error("Error getting deviceSession",{data:{error:s}}),s}})}};b3=s2e([Et(),XN(0,Xe(Cn.DeviceSessionService)),XN(1,Xe(ai.LoggerPublisherServiceFactory))],b3);const o2e=({stub:r=!1})=>new bn(({bind:e,rebindSync:t})=>{e(NC.SendApduUseCase).to(b3),r&&t(NC.SendApduUseCase).to(Ei)});var a2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Yd=(r,e)=>(t,n)=>e(t,n,r);let w3=class{constructor(e,t,n,i,s,o){if(this._config=t,this._loggerModuleFactory=n,this._deviceModelDataSource=i,this._apduSenderServiceFactory=s,this._apduReceiverServiceFactory=o,this._logger=n("TransportService"),e.length===0)throw this._logger.warn("No transports provided, please check your configuration"),new awe("No transports provided, please check your configuration");for(const a of e){const c=this.addTransport(a);if(c.isLeft())throw c.extract()}}_transports=new Map;_logger;addTransport(e){const t=e({deviceModelDataSource:this._deviceModelDataSource,loggerServiceFactory:this._loggerModuleFactory,config:this._config,apduSenderServiceFactory:this._apduSenderServiceFactory,apduReceiverServiceFactory:this._apduReceiverServiceFactory});return this.addTransportInternal(t)}addTransportInternal(e){return this.getTransport(e.getIdentifier()).isJust()?(this._logger.warn(`Transport ${e.getIdentifier()} already exists, please check your configuration`),lt(new swe(`Transport ${e.getIdentifier()} already exists, please check your configuration`))):(this._transports.set(e.getIdentifier(),e),Zt(void 0))}getTransport(e){return vn.fromNullable(this._transports.get(e))}getAllTransports(){return Array.from(this._transports.values())}closeConnection(e){this.getTransport(e.transport).map(t=>t.disconnect({connectedDevice:e}))}};w3=a2e([Et(),Yd(0,Xe(sa.TransportsInput)),Yd(1,Xe(sa.DmkConfig)),Yd(2,Xe(ai.LoggerPublisherServiceFactory)),Yd(3,Xe(VG.DeviceModelDataSource)),Yd(4,Xe(Cn.ApduSenderServiceFactory)),Yd(5,Xe(Cn.ApduReceiverServiceFactory))],w3);const c2e=({stub:r=!1,transports:e=[],config:t}={})=>new bn(({bind:n})=>{n(sa.TransportsInput).toConstantValue(e),n(sa.TransportService).to(w3).inSingletonScope(),n(sa.DmkConfig).toConstantValue(t)}),l2e=({stub:r=!1,transports:e=[],loggers:t=[],config:n={mockUrl:mY,managerApiUrl:gY,webSocketUrl:bY,provider:k6,firmwareDistributionSalt:O6}})=>{const i=new A6;return i.loadSync(Dxe({stub:r}),Mxe({stub:r}),c2e({stub:r,transports:e,config:n}),jSe({stub:r,config:n}),i2e({stub:r,config:n}),o_e({stub:r}),c_e({subscribers:t}),zxe({stub:r}),o2e({stub:r}),yxe({stub:r}),bxe({stub:r})),i};let u2e=class{container;constructor({stub:e,transports:t,loggers:n,config:i}={}){this.container=l2e({stub:e,transports:t,loggers:n,config:i})}getVersion(){return this.container.get(cc.GetDmkVersionUseCase).getDmkVersion()}startDiscovering(e){return this.container.get(hn.StartDiscoveringUseCase).execute(e)}stopDiscovering(){return this.container.get(hn.StopDiscoveringUseCase).execute()}listenToAvailableDevices(e){return this.container.get(hn.ListenToAvailableDevicesUseCase).execute(e)}async reconnect(e){return this.container.get(hn.ReconnectUseCase).execute(e)}connect(e){return this.container.get(hn.ConnectUseCase).execute(e)}disconnect(e){return this.container.get(hn.DisconnectUseCase).execute(e)}sendApdu(e){return this.container.get(NC.SendApduUseCase).execute(e)}sendCommand(e){return this.container.get(BC.SendCommandUseCase).execute(e)}executeDeviceAction(e){return this.container.get(UC.ExecuteDeviceActionUseCase).execute(e)}getConnectedDevice(e){return this.container.get(hn.GetConnectedDeviceUseCase).execute(e)}getDeviceSessionState(e){return this.container.get(Cn.GetDeviceSessionStateUseCase).execute(e)}close(){return this.container.get(Cn.CloseSessionsUseCase).execute()}listConnectedDevices(){return this.container.get(hn.ListConnectedDevicesUseCase).execute()}listenToConnectedDevice(){return this.container.get(hn.ListenToConnectedDeviceUseCase).execute()}disableDeviceSessionRefresher(e){return this.container.get(Cn.DisableDeviceSessionRefresherUseCase).execute(e)}setProvider(e){return this.container.get(wo.SetProviderUseCase).execute(e)}getProvider(){return this.container.get(wo.ManagerApiDataSource).getProvider()}isEnvironmentSupported(){return this.container.get(sa.TransportService).getAllTransports().some(e=>e.isSupported())}},f2e=class{stub=!1;loggers=[];transports=[];config={managerApiUrl:gY,mockUrl:mY,webSocketUrl:bY,provider:k6,firmwareDistributionSalt:O6};build(){return new u2e({stub:this.stub,transports:this.transports,loggers:this.loggers,config:this.config})}setStub(e){return this.stub=e,this}addTransport(e){return this.transports.push(e),this}addLogger(e){return this.loggers.push(e),this}addConfig(e){return this.config={...this.config,...e},this}},d2e=class{deviceId;deviceAdpuSender;machineActor;timeoutDuration;timeout=null;startReconnectionTimeout(){this.timeout=setTimeout(()=>{this.machineActor.send({type:"ReconnectionTimedOut"})},this.timeoutDuration)}constructor(e){this.deviceId=e.deviceId,this.deviceAdpuSender=e.deviceApduSender,this.timeoutDuration=e.timeoutDuration,this.machineActor=Xh(h2e({sendApduFn:(t,n,i)=>this.sendApduToDeviceConnection(t,n,i),startReconnectionTimeout:()=>this.startReconnectionTimeout(),cancelReconnectionTimeout:()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},tryToReconnect:()=>{e.tryToReconnect(this.timeoutDuration)},onTerminated:e.onTerminated,closeConnection:()=>{this.deviceAdpuSender.closeConnection()}})),this.machineActor.start()}sendApduToDeviceConnection(e,t,n){this.deviceAdpuSender.sendApdu(e,t,n).then(i=>{i.caseOf({Left:s=>{this.machineActor.send({type:"ApduSendingError",error:s})},Right:s=>{this.machineActor.send({type:"ApduResponseReceived",apduResponse:s})}})}).catch(i=>{this.machineActor.send({type:"ApduSendingError",error:new U4(i)})})}getDependencies(){return this.deviceAdpuSender.getDependencies()}setDependencies(e){this.deviceAdpuSender.setDependencies(e)}getDeviceId(){return this.deviceId}sendApdu(e,t,n){return new Promise(i=>{this.machineActor.send({type:"SendApduCalled",apdu:e,triggersDisconnection:!!t,abortTimeout:n,responseCallback:i})})}async setupConnection(){await this.deviceAdpuSender.setupConnection()}eventDeviceConnected(){this.machineActor.send({type:"DeviceConnected"})}eventDeviceDisconnected(){this.machineActor.send({type:"DeviceDisconnected"})}closeConnection(){this.machineActor.send({type:"CloseConnectionCalled"})}};function h2e({sendApduFn:r,startReconnectionTimeout:e,cancelReconnectionTimeout:t,tryToReconnect:n,onTerminated:i,closeConnection:s}){return wd({actions:{startTimer:()=>{e()},cancelTimer:()=>{t()},reconnectionTimeoutEvent:f1e({type:"ReconnectionTimedOut"}),sendApdu:({context:o})=>{o.apduInProgress.map(({apdu:a,abortTimeout:c})=>{r(a,!1,c)})},sendApduResponse:({context:o},a)=>{o.apduInProgress.map(({responseCallback:c})=>c(a.response))},sendGetAppAndVersion:()=>{r(new Xg().getApdu().getRawApdu(),!1)},tryToReconnect:()=>{n()},clearApduInProgress:Vt({apduInProgress:jr}),clearApduResponse:Vt({apduResponse:jr}),signalTermination:()=>{i()},closeConnection:()=>{s()}},guards:{isApduThatTriggersDisconnection:({context:o,event:a})=>a.type!=="ApduResponseReceived"?!1:o.apduInProgress.caseOf({Just:({triggersDisconnection:c,apdu:l})=>(c||Fu.isApduThatTriggersDisconnection(l))&&Fu.isSuccessResponse(a.apduResponse),Nothing:()=>!1}),isSendApduBusyError:({event:o})=>o.type!=="ApduResponseReceived"?!1:o.apduResponse.statusCode[0]===102&&o.apduResponse.statusCode[1]===1}}).createMachine({id:"deviceConnection",initial:"Connected",context:{apduInProgress:jr,apduResponse:jr},states:{Connected:{on:{DeviceDisconnected:{target:"WaitingForReconnection"},SendApduCalled:{target:"SendingApdu",actions:Vt({apduInProgress:({event:o})=>vn.of({apdu:o.apdu,triggersDisconnection:o.triggersDisconnection,abortTimeout:o.abortTimeout,responseCallback:o.responseCallback})})},CloseConnectionCalled:{target:"Terminated"}}},SendingApdu:{entry:"sendApdu",on:{ApduResponseReceived:[{guard:"isApduThatTriggersDisconnection",target:"WaitingForDisconnection",actions:[Vt({apduResponse:({event:o})=>vn.of(o.apduResponse)})]},{target:"Connected",actions:[{type:"sendApduResponse",params:({event:o})=>({response:Zt(o.apduResponse)})},{type:"clearApduInProgress"}]}],ApduSendingError:{target:"Connected",actions:[{type:"sendApduResponse",params:({event:o})=>({response:lt(o.error)})},"clearApduInProgress"]},DeviceDisconnected:{target:"WaitingForReconnection",actions:[{type:"sendApduResponse",params:{response:lt(new Ov)}},"clearApduInProgress"]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:lt(new Ov)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:o})=>{o.responseCallback(lt(new kE))}}}},WaitingForDisconnection:{entry:["sendGetAppAndVersion"],exit:[{type:"sendApduResponse",params:({context:o})=>({response:o.apduResponse.caseOf({Just:a=>Zt(a),Nothing:()=>lt(new U4)})})},{type:"clearApduInProgress"},{type:"clearApduResponse"}],on:{ApduResponseReceived:[{guard:"isSendApduBusyError",actions:["sendGetAppAndVersion"],target:"WaitingForDisconnection"},{target:"Connected"}],ApduSendingError:[{target:"WaitingForReconnection"}],SendApduCalled:{actions:({event:o})=>{o.responseCallback(lt(new kE))}},DeviceDisconnected:{target:"WaitingForReconnection"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnection:{entry:["startTimer","tryToReconnect"],on:{DeviceConnected:{target:"Connected",actions:"cancelTimer"},SendApduCalled:{target:"WaitingForReconnectionWithQueuedSendApdu",actions:Vt({apduInProgress:({event:o})=>vn.of({apdu:o.apdu,triggersDisconnection:o.triggersDisconnection,abortTimeout:o.abortTimeout,responseCallback:o.responseCallback})})},ReconnectionTimedOut:{target:"Terminated"},CloseConnectionCalled:{target:"Terminated"}}},WaitingForReconnectionWithQueuedSendApdu:{on:{DeviceConnected:{target:"SendingApdu",actions:"cancelTimer"},ReconnectionTimedOut:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:lt(new owe)}},{type:"clearApduInProgress"}]},CloseConnectionCalled:{target:"Terminated",actions:[{type:"sendApduResponse",params:{response:lt(new Ov)}},"clearApduInProgress"]},SendApduCalled:{actions:({event:o})=>{o.responseCallback(lt(new kE))}}}},Terminated:{entry:["signalTermination","closeConnection"],type:"final"}}})}let ZN=class{id;deviceModel;sendApdu;type;transport;name;constructor({id:e,deviceModel:t,type:n,transport:i,sendApdu:s,name:o}){this.id=e,this.deviceModel=t,this.sendApdu=s,this.type=n,this.transport=i,this.name=o}};const Ci={Config:Symbol.for("config")},Fs={PkiCertificateDataSource:Symbol.for("PkiCertificateDataSource"),PkiCertificateLoader:Symbol.for("PkiCertificateLoader")};var Tw=(r=>(r.Test="test",r.PersoV2="persov2",r.LedgerRootV3="ledger_root_v3",r.PluginSelectorKey="plugin_selector_key",r.NftMetadataKey="nft_metadata_key",r.PartnerMetadataKey="partner_metadata_key",r.Erc20MetadataKey="erc20_metadata_key",r.DomainMetadataKey="domain_metadata_key",r.CalCalldataKey="cal_calldata_key",r.CalTrustedNameKey="cal_trusted_name_key",r.CalNetwork="cal_network",r))(Tw||{}),Jn=(r=>(r.GenuineCheck="genuine_check",r.ExchangePayload="exchange_payload",r.NftMeta="nft_meta",r.TrustedName="trusted_name",r.BackupProvider="backup_provider",r.ProtectOrchestrator="protect_orchestrator",r.PluginMeta="plugin_meta",r.CoinMeta="coin_meta",r.SeedIdAuth="seed_id_auth",r.TxSimulationSigner="tx_simu_signer",r.Calldata="calldata",r.Network="network",r.LESMultisig="les_multisig",r))(Jn||{});const Zi="X-Ledger-Client-Version",Do="X-Ledger-Client-Origin";var kt=(r=>(r.TOKEN="token",r.NFT="nft",r.TRUSTED_NAME="trustedName",r.PLUGIN="plugin",r.EXTERNAL_PLUGIN="externalPlugin",r.TRANSACTION_INFO="transactionInfo",r.PROXY_INFO="proxyInfo",r.ENUM="enum",r.TRANSACTION_FIELD_DESCRIPTION="transactionFieldDescription",r.TRANSACTION_CHECK="transactionCheck",r.DYNAMIC_NETWORK="dynamicNetwork",r.DYNAMIC_NETWORK_ICON="dynamicNetworkIcon",r.ERROR="error",r.SAFE="safe",r.SIGNER="signer",r))(kt||{}),Ql=(r=>(r.TOKEN="token",r.NFT="nft",r.TRUSTED_NAME="trustedName",r.ENUM="enum",r.CALLDATA="calldata",r))(Ql||{});const p2e="15",QN="81ff";let $b=class{static stringToHex(e){let t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n).toString(16);t+=i.padStart(2,"0")}return t}static appendSignatureToPayload(e,t,n){t.length%2!==0&&(t="0"+t);let i=(t.length/2).toString(16);return i.length%2!==0&&(i="0"+i),`${e}${n}${i}${t}`}};const g2e="@ledgerhq/context-module",m2e="1.10.0",y2e="Apache-2.0",v2e={".":{types:"./lib/types/index.d.ts",import:"./lib/esm/index.js",require:"./lib/cjs/index.js"},"./*":{types:"./lib/types/*",import:"./lib/esm/*",require:"./lib/cjs/*"}},b2e=["./lib"],w2e={prebuild:"rimraf lib",build:"pnpm ldmk-tool build --entryPoints index.ts,src/**/*.ts --tsconfig tsconfig.prod.json",dev:'concurrently "pnpm watch:builds" "pnpm watch:types"',"watch:builds":"pnpm ldmk-tool watch --entryPoints index.ts,src/**/*.ts --tsconfig tsconfig.prod.json","watch:types":'concurrently "tsc --watch -p tsconfig.prod.json" "tsc-alias --watch -p tsconfig.prod.json"',lint:"eslint","lint:fix":"pnpm lint --fix",postpack:"find . -name '*.tgz' -exec cp {} ../../../dist/ \\; ",prettier:"prettier . --check","prettier:fix":"prettier . --write",test:"vitest run","test:watch":"vitest","test:coverage":"vitest run --coverage",typecheck:"tsc --noEmit"},x2e={"@ledgerhq/device-management-kit":"workspace:*","@ledgerhq/ldmk-tool":"workspace:*","@ledgerhq/eslint-config-dsdk":"workspace:*","@ledgerhq/prettier-config-dsdk":"workspace:*","@ledgerhq/tsconfig-dsdk":"workspace:*","@ledgerhq/vitest-config-dmk":"workspace:*","@types/crypto-js":"catalog:","ts-node":"catalog:"},_2e={axios:"catalog:","crypto-js":"catalog:",ethers:"catalog:",inversify:"catalog:","purify-ts":"catalog:","reflect-metadata":"catalog:"},S2e={"@ledgerhq/device-management-kit":"workspace:*"},Qi={name:g2e,version:m2e,private:!1,license:y2e,exports:v2e,files:b2e,scripts:w2e,devDependencies:x2e,dependencies:_2e,peerDependencies:S2e};var E2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},eL=(r,e)=>(t,n)=>e(t,n,r);let Db=class{constructor(e,t,n){this.config=e,this._certificateLoader=t,this.endpoint=n}async getCalldataDescriptors({chainId:e,address:t,selector:n,deviceModelId:i}){let s;try{s=(await lr.request({method:"GET",url:`${this.config.cal.url}/${this.endpoint}`,params:{output:"descriptors_calldata",chain_id:e,contracts:t,contract_address:t,ref:`branch:${this.config.cal.branch}`},headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}})).data}catch(o){return lt(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: Failed to fetch calldata descriptors: ${o}`))}if(!Array.isArray(s))return lt(new Error("[ContextModule] HttpCalldataDescriptorDataSource: Response is not an array"));if(s.length===0)return lt(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: No data for contract ${t} and selector ${n}`));for(const o of s){t=t.toLowerCase(),n=`0x${n.slice(2).toLowerCase()}`;const a=o.descriptors_calldata?.[t]?.[n];if(!a||!this.isCalldataDescriptorV1(a,this.config.cal.mode))continue;const c=a.transaction_info.descriptor.data,l=a.transaction_info.descriptor.signatures[this.config.cal.mode],u={targetDevice:i,keyUsage:Jn.Calldata,keyId:Tw.CalCalldataKey},f=await this._certificateLoader.loadCertificate(u),d={type:kt.TRANSACTION_INFO,payload:$b.appendSignatureToPayload(c,l,QN),certificate:f},h=[];for(const[p,m]of Object.entries(a.enums))for(const[y,{data:v,signatures:w}]of Object.entries(m))h.push({type:kt.ENUM,id:Number(p),value:Number(y),payload:$b.appendSignatureToPayload(v,w[this.config.cal.mode],QN),certificate:f});const g=a.fields.map(p=>({type:kt.TRANSACTION_FIELD_DESCRIPTION,payload:p.descriptor,reference:this.getReference(p.param)}));return Zt([d,...h,...g])}return lt(new Error(`[ContextModule] HttpCalldataDescriptorDataSource: Invalid response for contract ${t} and selector ${n}`))}getReference(e){if(e.type==="TOKEN_AMOUNT"&&e.token!==void 0&&e.token.type==="path")return{type:Ql.TOKEN,valuePath:this.toGenericPath(e.token.binary_path)};if(e.type==="TOKEN_AMOUNT"&&e.token!==void 0&&e.token.type==="constant")return{type:Ql.TOKEN,value:e.token.value};if(e.type==="NFT"&&e.collection.type==="path")return{type:Ql.NFT,valuePath:this.toGenericPath(e.collection.binary_path)};if(e.type==="NFT"&&e.collection.type==="constant")return{type:Ql.NFT,value:e.collection.value};if(e.type==="TRUSTED_NAME"&&e.value.type==="path")return{type:Ql.TRUSTED_NAME,valuePath:this.toGenericPath(e.value.binary_path),types:e.types,sources:e.sources};if(e.type==="ENUM"&&e.value.type==="path")return{type:Ql.ENUM,valuePath:this.toGenericPath(e.value.binary_path),id:e.id};if(e.type==="CALLDATA"&&e.value.type==="path"&&e.callee.type==="path")return{type:Ql.CALLDATA,valuePath:this.toGenericPath(e.value.binary_path),callee:this.toGenericPath(e.callee.binary_path),selector:e.selector?.type==="path"?this.toGenericPath(e.selector.binary_path):void 0,amount:e.amount?.type==="path"?this.toGenericPath(e.amount.binary_path):void 0,spender:e.spender?.type==="path"?this.toGenericPath(e.spender.binary_path):void 0,chainId:e.chainId?.type==="path"?this.toGenericPath(e.chainId.binary_path):void 0}}toGenericPath(e){return e.type==="CONTAINER"?e.value:e.elements.map(t=>{if(t.type==="ARRAY"){const{weight:n,...i}=t;return{itemSize:n,...i}}else if(t.type==="LEAF"){const{leaf_type:n,...i}=t;return{leafType:n,...i}}return t})}isCalldataDescriptorV1(e,t){return typeof e=="object"&&e.type==="calldata"&&e.version==="v1"&&this.isTransactionInfoV1(e.transaction_info,t)&&this.isEnumV1(e.enums,t)&&Array.isArray(e.fields)&&e.fields.every(n=>this.isFieldV1(n))}isTransactionInfoV1(e,t){return typeof e=="object"&&typeof e.descriptor=="object"&&typeof e.descriptor.data=="string"&&typeof e.descriptor.signatures=="object"&&typeof e.descriptor.signatures[t]=="string"}isEnumV1(e,t){return typeof e=="object"&&Object.entries(e).every(([n,i])=>typeof n=="string"&&typeof i=="object"&&Object.entries(i).every(([s,o])=>typeof s=="string"&&typeof o=="object"&&typeof o.data=="string"&&o.signatures!==void 0&&this.isCalldataSignatures(o.signatures,t)))}isCalldataSignatures(e,t){return typeof e=="object"&&typeof e[t]=="string"}isFieldV1(e){return typeof e=="object"&&typeof e.descriptor=="string"&&typeof e.param=="object"&&typeof e.param.value=="object"&&this.isDescriptorValueV1(e.param.value)&&(e.param.type==="RAW"||e.param.type==="AMOUNT"||e.param.type==="DATETIME"||e.param.type==="DURATION"||e.param.type==="UNIT"||e.param.type==="ENUM"||e.param.type==="NFT"&&this.isDescriptorValueV1(e.param.collection)||e.param.type==="TOKEN_AMOUNT"&&(e.param.token===void 0||this.isDescriptorValueV1(e.param.token))||e.param.type==="TRUSTED_NAME"&&Array.isArray(e.param.types)&&Array.isArray(e.param.sources)&&e.param.types.every(t=>typeof t=="string")&&e.param.sources.every(t=>typeof t=="string")||e.param.type==="CALLDATA"&&this.isDescriptorValueV1(e.param.value)&&this.isDescriptorValueV1(e.param.callee)&&(e.param.selector===void 0||this.isDescriptorValueV1(e.param.selector))&&(e.param.amount===void 0||this.isDescriptorValueV1(e.param.amount))&&(e.param.spender===void 0||this.isDescriptorValueV1(e.param.spender))&&(e.param.chainId===void 0||this.isDescriptorValueV1(e.param.chainId)))}isDescriptorValueV1(e){return typeof e=="object"&&typeof e.type_family=="string"&&["UINT","INT","UFIXED","FIXED","ADDRESS","BOOL","BYTES","STRING"].includes(e.type_family)&&(typeof e.type_size>"u"||typeof e.type_size=="number")&&(e.type==="path"&&this.isCalldataDescriptorValueBinaryPathV1(e)||e.type==="constant"&&this.isCalldataDescriptorValueConstantV1(e))}isCalldataDescriptorValueConstantV1(e){return typeof e=="object"&&e.type==="constant"&&typeof e.value=="string"}isCalldataDescriptorValueBinaryPathV1(e){return typeof e=="object"&&(e.type==="path"&&e.binary_path.type==="CONTAINER"&&["FROM","TO","VALUE"].includes(e.binary_path.value)||e.binary_path.type==="DATA"&&Array.isArray(e.binary_path.elements)&&e.binary_path.elements.every(t=>this.isPathElementV1(t)))}isPathElementV1(e){return typeof e=="object"&&(e.type==="REF"||e.type==="TUPLE"&&typeof e.offset=="number"||e.type==="ARRAY"&&typeof e.weight=="number"&&(typeof e.start>"u"||typeof e.start=="number")&&(typeof e.end>"u"||typeof e.end=="number")||e.type==="LEAF"&&typeof e.leaf_type=="string"&&["ARRAY_LEAF","TUPLE_LEAF","STATIC_LEAF","DYNAMIC_LEAF"].includes(e.leaf_type)||e.type==="SLICE"&&(typeof e.start>"u"||typeof e.start=="number")&&(typeof e.end>"u"||typeof e.end=="number"))}};Db=E2e([Et(),eL(0,Xe(Ci.Config)),eL(1,Xe(Fs.PkiCertificateLoader))],Db);const Oh={CalldataContextLoader:Symbol.for("CalldataContextLoader"),DappCalldataDescriptorDataSource:Symbol.for("DappCalldataDescriptorDataSource"),TokenCalldataDescriptorDataSource:Symbol.for("TokenCalldataDescriptorDataSource")},Lf={ProxyDataSource:Symbol.for("ProxyDataSource"),ProxyContextFieldLoader:Symbol.for("ProxyContextFieldLoader")};var A2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},nA=(r,e)=>(t,n)=>e(t,n,r);const I2e=[kt.TRANSACTION_INFO,kt.TRANSACTION_FIELD_DESCRIPTION,kt.PROXY_INFO,kt.ENUM];let x3=class{constructor(e,t,n){this.dappDataSource=e,this.tokenDataSource=t,this.proxyDataSource=n}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Fr.NANO_S&&typeof e.chainId=="number"&&Kn(e.to)&&e.to!=="0x"&&Kn(e.data)&&Kn(e.selector)&&e.selector!=="0x"&&I2e.every(n=>t.includes(n))}async load(e){const{to:t,data:n,selector:i,chainId:s,deviceModelId:o}=e,a={address:t,chainId:s,selector:i,deviceModelId:o,data:n};return this._getContexts(a,this.dappDataSource).alt(this._getContexts(a,this.tokenDataSource)).alt(this._getContextsWithProxy(a,this.dappDataSource)).orDefault([{type:kt.ERROR,error:new Error("[ContextModule] CalldataContextLoader: No calldata contexts found")}])}_getContexts({address:e,chainId:t,selector:n,deviceModelId:i},s){return Li(async({liftMaybe:o})=>{const a=await s.getCalldataDescriptors({deviceModelId:i,address:e,chainId:t,selector:n});return o(a.toMaybe().filter(c=>c.length>0))})}_getContextsWithProxy({address:e,chainId:t,selector:n,deviceModelId:i,data:s},o){return Li(async({liftMaybe:a})=>{const c=await this.proxyDataSource.getProxyImplementationAddress({calldata:s,proxyAddress:e,chainId:t,challenge:""});return a(c.toMaybe())}).map(({implementationAddress:a})=>{const c={address:a,chainId:t,selector:n,deviceModelId:i,data:s};return this._getContexts(c,o).map(l=>[{type:kt.PROXY_INFO,payload:"0x"},...l])}).join()}};x3=A2e([Et(),nA(0,Xe(Oh.DappCalldataDescriptorDataSource)),nA(1,Xe(Oh.TokenCalldataDescriptorDataSource)),nA(2,Xe(Lf.ProxyDataSource))],x3);const Mb={DynamicNetworkDataSource:Symbol("DynamicNetworkDataSource"),DynamicNetworkContextLoader:Symbol("DynamicNetworkContextLoader")},Ff={TrustedNameDataSource:Symbol.for("TrustedNameDataSource"),TrustedNameContextLoader:Symbol.for("TrustedNameContextLoader"),TrustedNameContextFieldLoader:Symbol.for("TrustedNameContextFieldLoader")},Bb={ExternalPluginDataSource:Symbol.for("externalPluginDataSource"),ExternalPluginContextLoader:Symbol.for("externalPluginContextLoader")},Uf={NftDataSource:Symbol.for("nftDataSource"),NftContextLoader:Symbol.for("nftContextLoader"),NftContextFieldLoader:Symbol.for("nftContextFieldLoader")},Nb={SafeAddressDataSource:Symbol.for("SafeAddressDataSource"),SafeAddressLoader:Symbol.for("SafeAddressLoader")},Lb={SolanaDataSource:Symbol.for("SolanaDataSource"),SolanaContextLoader:Symbol.for("SolanaContextLoader")},mc={TokenDataSource:Symbol.for("TokenDataSource"),TokenContextLoader:Symbol.for("TokenContextLoader"),TokenContextFieldLoader:Symbol.for("TokenContextFieldLoader")},gu={TransactionCheckDataSource:Symbol.for("TransactionCheckDataSource"),TransactionCheckContextLoader:Symbol.for("TransactionCheckContextLoader"),TypedDataCheckDataSource:Symbol.for("TypedDataCheckDataSource"),TypedDataCheckContextLoader:Symbol.for("TypedDataCheckContextLoader")},Fb={TypedDataDataSource:Symbol.for("TypedDataDataSource"),TypedDataContextLoader:Symbol.for("TypedDataContextLoader")},C2e=()=>new bn(({bind:r})=>{r(Oh.DappCalldataDescriptorDataSource).toDynamicValue(e=>new Db(e.get(Ci.Config),e.get(Fs.PkiCertificateLoader),"dapps")),r(Oh.TokenCalldataDescriptorDataSource).toDynamicValue(e=>new Db(e.get(Ci.Config),e.get(Fs.PkiCertificateLoader),"tokens")),r(Oh.CalldataContextLoader).to(x3)}),T2e=r=>new bn(({bind:e})=>{e(Ci.Config).toConstantValue(r)});var R2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},k2e=(r,e)=>(t,n)=>e(t,n,r);let _3=class{constructor(e){this.config=e}async getDynamicNetworkConfiguration(e){let t;try{t=(await lr.get(`${this.config.cal.url}/networks?output=id,descriptors,icons&chain_id=${e}`,{headers:{[Zi]:`context-module/${Qi.version}`}})).data}catch(s){return lt(s instanceof Error?s:new Error("Failed to fetch network configuration"))}const n=t?.[0];if(!n)return lt(new Error(`Network configuration not found for chain ID: ${e}`));if(!this.isValidNetworkData(n))return lt(new Error(`Invalid network configuration response for chain ID: ${e}`));const i=this.transformToNetworkConfiguration(n);return Zt(i)}isValidNetworkData(e){if(!e||typeof e!="object")return!1;const t=e;if(typeof t.id!="string"||!t.descriptors||typeof t.descriptors!="object")return!1;for(const n of Object.values(t.descriptors))if(!this.isValidDescriptor(n))return!1;return!(t.icons&&typeof t.icons!="object")}isValidDescriptor(e){if(!e||typeof e!="object")return!1;const t=e;if(typeof t.data!="string"||typeof t.descriptorType!="string"||typeof t.descriptorVersion!="string"||!t.signatures||typeof t.signatures!="object")return!1;const n=t.signatures;return!(typeof n.prod!="string"||typeof n.test!="string")}transformToNetworkConfiguration(e){const t=Object.entries(e.descriptors).reduce((n,[i,s])=>(n[i]={descriptorType:s.descriptorType,descriptorVersion:s.descriptorVersion,data:s.data,signatures:s.signatures,icon:e.icons?.[i]},n),{});return{id:e.id,descriptors:t}}};_3=R2e([Et(),k2e(0,Xe(Ci.Config))],_3);var O2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},iA=(r,e)=>(t,n)=>e(t,n,r);const P2e="15",$2e=[kt.DYNAMIC_NETWORK,kt.DYNAMIC_NETWORK_ICON];let S3=class{_networkDataSource;_config;_certificateLoader;constructor(e,t,n){this._networkDataSource=e,this._config=t,this._certificateLoader=n}canHandle(e,t){return typeof e=="object"&&e!==null&&"chainId"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Fr.NANO_S&&typeof e.chainId=="number"&&$2e.every(n=>t.includes(n))}async load(e){const{chainId:t,deviceModelId:n}=e,i=await this._networkDataSource.getDynamicNetworkConfiguration(t),s=await this._certificateLoader.loadCertificate({keyId:Tw.CalNetwork,keyUsage:Jn.Network,targetDevice:n});return i.caseOf({Left:()=>[],Right:o=>{const a=[],c=o.descriptors[n];if(!c)return[];const l=c.signatures[this._config.cal.mode];if(!l)return[];const u=$b.appendSignatureToPayload(c.data,l,P2e);return a.push({type:kt.DYNAMIC_NETWORK,payload:u,certificate:s}),c.icon&&a.push({type:kt.DYNAMIC_NETWORK_ICON,payload:c.icon}),a}})}};S3=O2e([Et(),iA(0,Xe(Mb.DynamicNetworkDataSource)),iA(1,Xe(Ci.Config)),iA(2,Xe(Fs.PkiCertificateLoader))],S3);const D2e=()=>new bn(({bind:r})=>{r(Mb.DynamicNetworkDataSource).to(_3),r(Mb.DynamicNetworkContextLoader).to(S3)});var M2e=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},B2e=(r,e)=>(t,n)=>e(t,n,r);let E3=class{constructor(e){this.config=e}async getDappInfos({chainId:e,address:t,selector:n}){try{const i=await lr.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{output:"b2c,b2c_signatures,abis",chain_id:e,contracts:t},headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}});if(!i.data[0])return Zt(void 0);t=t.toLowerCase(),n=`0x${n.slice(2).toLowerCase()}`;const{erc20OfInterest:s,method:o,plugin:a}=i.data[0].b2c?.contracts?.find(f=>f.address===t)?.selectors?.[n]||{},{signature:c,serialized_data:l}=i.data[0].b2c_signatures?.[t]?.[n]||{};if(!s||!o||!a||!c||!l)return Zt(void 0);const u=i.data[0].abis?.[t];return Zt(u?{selectorDetails:{method:o,plugin:a,erc20OfInterest:s,signature:c,serializedData:l},abi:u}:void 0)}catch{return lt(new Error("[ContextModule] HttpExternalPluginDataSource: Error fetching dapp infos"))}}};E3=M2e([Et(),B2e(0,Xe(Ci.Config))],E3);const N2e="6.14.1";function L2e(r,e,t){const n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}function On(r,e,t){for(let n in e){let i=e[n];const s=t?t[n]:null;s&&L2e(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function vh(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(vh).join(", ")+" ]";if(r instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return vh(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${vh(t)}: ${vh(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function tL(r,e){return r&&r.code===e}function wY(r,e,t){let n=r;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${vh(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];s.push(o+"="+vh(a))}}s.push(`code=${e}`),s.push(`version=${N2e}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return On(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&On(i,{shortMessage:n}),i}function Wn(r,e,t,n){if(!r)throw wY(e,t,n)}function $t(r,e,t,n){Wn(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function xY(r,e,t){t==null&&(t=""),t&&(t=": "+t),Wn(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),Wn(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function $6(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),Wn(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function _Y(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}$t(!1,"invalid BytesLike value",e||"value",r)}function wl(r,e){return _Y(r,e,!1)}function yc(r,e){return _Y(r,e,!0)}function Fy(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}const rL="0123456789abcdef";function qi(r){const e=wl(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=rL[(i&240)>>4]+rL[i&15]}return t}function Ph(r){return"0x"+r.map(e=>qi(e).substring(2)).join("")}function Jd(r,e,t){const n=wl(r);return t!=null&&t>n.length&&Wn(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),qi(n.slice(e??0,t??n.length))}function SY(r,e,t){const n=wl(r);Wn(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),qi(i)}function F2e(r,e){return SY(r,e,!0)}function U2e(r,e){return SY(r,e,!1)}const Rw=BigInt(0),xa=BigInt(1),A3=9007199254740991;function z2e(r,e){const t=kw(r,"value"),n=BigInt(Wu(e,"width"));if(Wn(t>>n===Rw,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-xa){const i=(xa<<n)-xa;return-((~t&i)+xa)}return t}function q2e(r,e){let t=Lp(r,"value");const n=BigInt(Wu(e,"width")),i=xa<<n-xa;if(t<Rw){t=-t,Wn(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(xa<<n)-xa;return(~t&s)+xa}else Wn(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function Uy(r,e){const t=kw(r,"value"),n=BigInt(Wu(e,"bits"));return t&(xa<<n)-xa}function Lp(r,e){switch(typeof r){case"bigint":return r;case"number":return $t(Number.isInteger(r),"underflow",e||"value",r),$t(r>=-9007199254740991&&r<=A3,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){$t(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}$t(!1,"invalid BigNumberish value",e||"value",r)}function kw(r,e){const t=Lp(r,e);return Wn(t>=Rw,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const nL="0123456789abcdef";function EY(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=nL[t>>4],e+=nL[t&15];return BigInt(e)}return Lp(r)}function Wu(r,e){switch(typeof r){case"bigint":return $t(r>=-9007199254740991&&r<=A3,"overflow",e||"value",r),Number(r);case"number":return $t(Number.isInteger(r),"underflow",e||"value",r),$t(r>=-9007199254740991&&r<=A3,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Wu(BigInt(r),e)}catch(t){$t(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}$t(!1,"invalid numeric value",e||"value",r)}function j2e(r){return Wu(EY(r))}function AY(r,e){let n=kw(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=Wu(e,"width");for(Wn(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function V2e(r){const e=kw(r,"value");if(e===Rw)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function K2e(r,e,t,n,i){$t(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function IY(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function H2e(r,e,t,n,i){return r==="OVERLONG"?($t(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),IY(r,e,t))}const W2e=Object.freeze({error:K2e,ignore:IY,replace:H2e});function G2e(r,e){e==null&&(e=W2e.error);const t=wl(r,"bytes"),n=[];let i=0;for(;i<t.length;){const s=t[i++];if(s>>7===0){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=t[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,n,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,n,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,t,n,c);continue}n.push(c)}}return n}function CY(r,e){$t(typeof r=="string","invalid string value","str",r);let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);$t(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function Y2e(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function J2e(r,e){return Y2e(G2e(r,e))}const Ds=32,I3=new Uint8Array(Ds),X2e=["then"],zy={},TY=new WeakMap;function wf(r){return TY.get(r)}function iL(r,e){TY.set(r,e)}function R0(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function C3(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof nl?C3(wf(n),n,t):n):r.reduce((n,i,s)=>{let o=e.getValue(i);return i in n||(t&&o instanceof nl&&(o=C3(wf(o),o,t)),n[i]=o),n},{})}class nl extends Array{#e;constructor(...e){const t=e[0];let n=e[1],i=(e[2]||[]).slice(),s=!0;t!==zy&&(n=e,i=[],s=!1),super(n.length),n.forEach((c,l)=>{this[l]=c});const o=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(iL(this,Object.freeze(n.map((c,l)=>{const u=i[l];return u!=null&&o.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!s)return;Object.freeze(this);const a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const d=Wu(l,"%index");if(d<0||d>=this.length)throw new RangeError("out of result range");const h=c[d];return h instanceof Error&&R0(`index ${d}`,h),h}if(X2e.indexOf(l)>=0)return Reflect.get(c,l,u);const f=c[l];if(f instanceof Function)return function(...d){return f.apply(this===u?c:this,d)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return iL(a,wf(this)),a}toArray(e){const t=[];return this.forEach((n,i)=>{n instanceof Error&&R0(`index ${i}`,n),e&&n instanceof nl&&(n=n.toArray(e)),t.push(n)}),t}toObject(e){const t=wf(this);return t.reduce((n,i,s)=>(Wn(i!=null,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),C3(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);const n=wf(this),i=[],s=[];for(let o=e;o<t;o++)i.push(this[o]),s.push(n[o]);return new nl(zy,i,s)}filter(e,t){const n=wf(this),i=[],s=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&R0(`index ${o}`,a),e.call(t,a,o,this)&&(i.push(a),s.push(n[o]))}return new nl(zy,i,s)}map(e,t){const n=[];for(let i=0;i<this.length;i++){const s=this[i];s instanceof Error&&R0(`index ${i}`,s),n.push(e.call(t,s,i,this))}return n}getValue(e){const t=wf(this).indexOf(e);if(t===-1)return;const n=this[t];return n instanceof Error&&R0(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new nl(zy,e,t)}}function sL(r){let e=V2e(r);return Wn(e.length<=Ds,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ds,offset:e.length}),e.length!==Ds&&(e=yc(Ph([I3.slice(e.length%Ds),e]))),e}class $l{name;type;localName;dynamic;constructor(e,t,n,i){On(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){$t(!1,e,this.localName,t)}}class T3{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Ph(this.#e)}get length(){return this.#t}#r(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#r(yc(e.data))}writeBytes(e){let t=yc(e);const n=t.length%Ds;return n&&(t=yc(Ph([t,I3.slice(n)]))),this.#r(t)}writeValue(e){return this.#r(sL(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(I3),this.#t+=Ds,t=>{this.#e[e]=sL(t)}}}class D6{allowLoose;#e;#t;#r;#n;#i;constructor(e,t,n){On(this,{allowLoose:!!t}),this.#e=yc(e),this.#r=0,this.#n=null,this.#i=n??1024,this.#t=0}get data(){return qi(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#n)return this.#n.#o(e);this.#r+=e,Wn(this.#i<1||this.#r<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:yc(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#r,dataLength:this.dataLength}})}#a(e,t,n){let i=Math.ceil(t/Ds)*Ds;return this.#t+i>this.#e.length&&(this.allowLoose&&n&&this.#t+t<=this.#e.length?i=t:Wn(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:yc(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){const t=new D6(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return t.#n=this,t}readBytes(e,t){let n=this.#a(0,e,!!t);return this.#o(e),this.#t+=n.length,n.slice(0,e)}readValue(){return EY(this.readBytes(Ds))}readIndex(){return j2e(this.readBytes(Ds))}}function oL(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function RY(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function aL(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Z2e(r,e){RY(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q2e=r=>r instanceof Uint8Array,eEe=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),tEe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!tEe)throw new Error("Non little-endian hardware is not supported");function rEe(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function kY(r){if(typeof r=="string"&&(r=rEe(r)),!Q2e(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}let nEe=class{clone(){return this._cloneInto()}};function iEe(r){const e=n=>r().update(kY(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}const qy=BigInt(2**32-1),cL=BigInt(32);function sEe(r,e=!1){return e?{h:Number(r&qy),l:Number(r>>cL&qy)}:{h:Number(r>>cL&qy)|0,l:Number(r&qy)|0}}function oEe(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=sEe(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const aEe=(r,e,t)=>r<<t|e>>>32-t,cEe=(r,e,t)=>e<<t|r>>>32-t,lEe=(r,e,t)=>e<<t-32|r>>>64-t,uEe=(r,e,t)=>r<<t-32|e>>>64-t,[OY,PY,$Y]=[[],[],[]],fEe=BigInt(0),k0=BigInt(1),dEe=BigInt(2),hEe=BigInt(7),pEe=BigInt(256),gEe=BigInt(113);for(let r=0,e=k0,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],OY.push(2*(5*n+t)),PY.push((r+1)*(r+2)/2%64);let i=fEe;for(let s=0;s<7;s++)e=(e<<k0^(e>>hEe)*gEe)%pEe,e&dEe&&(i^=k0<<(k0<<BigInt(s))-k0);$Y.push(i)}const[mEe,yEe]=oEe($Y,!0),lL=(r,e,t)=>t>32?lEe(r,e,t):aEe(r,e,t),uL=(r,e,t)=>t>32?uEe(r,e,t):cEe(r,e,t);function vEe(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],f=lL(l,u,1)^t[a],d=uL(l,u,1)^t[a+1];for(let h=0;h<50;h+=10)r[o+h]^=f,r[o+h+1]^=d}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=PY[o],c=lL(i,s,a),l=uL(i,s,a),u=OY[o];i=r[u],s=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=mEe[n],r[1]^=yEe[n]}t.fill(0)}class M6 extends nEe{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,oL(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=eEe(this.state)}keccak(){vEe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){aL(this);const{blockLen:t,state:n}=this;e=kY(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){aL(this,!1),RY(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return oL(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Z2e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new M6(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const bEe=(r,e,t)=>iEe(()=>new M6(e,r,t)),wEe=bEe(1,136,256/8);let DY=!1;const MY=function(r){return wEe(r)};let BY=MY;function qu(r){const e=wl(r,"data");return qi(BY(e))}qu._=MY;qu.lock=function(){DY=!0};qu.register=function(r){if(DY)throw new TypeError("keccak256 is locked");BY=r};Object.freeze(qu);const xEe=BigInt(0),_Ee=BigInt(36);function fL(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=wl(qu(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const B6={};for(let r=0;r<10;r++)B6[String(r)]=String(r);for(let r=0;r<26;r++)B6[String.fromCharCode(65+r)]=String(10+r);const dL=15;function SEe(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>B6[n]).join("");for(;e.length>=dL;){let n=e.substring(0,dL);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const EEe=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function AEe(r){r=r.toLowerCase();let e=xEe;for(let t=0;t<r.length;t++)e=e*_Ee+EEe[r[t]];return e}function Ub(r){if($t(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=fL(r);return $t(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){$t(r.substring(2,4)===SEe(r),"bad icap checksum","address",r);let e=AEe(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return fL("0x"+e)}$t(!1,"invalid address","address",r)}const Hc={};function Pt(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new di(Hc,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Zr(r,e){return new di(Hc,`bytes${e||""}`,r,{size:e})}const hL=Symbol.for("_ethers_typed");class di{type;value;#e;_typedSymbol;constructor(e,t,n,i){i==null&&(i=null),$6(Hc,e,"Typed"),On(this,{_typedSymbol:hL,type:t,value:n}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new di(Hc,e,t)}static uint8(e){return Pt(e,8)}static uint16(e){return Pt(e,16)}static uint24(e){return Pt(e,24)}static uint32(e){return Pt(e,32)}static uint40(e){return Pt(e,40)}static uint48(e){return Pt(e,48)}static uint56(e){return Pt(e,56)}static uint64(e){return Pt(e,64)}static uint72(e){return Pt(e,72)}static uint80(e){return Pt(e,80)}static uint88(e){return Pt(e,88)}static uint96(e){return Pt(e,96)}static uint104(e){return Pt(e,104)}static uint112(e){return Pt(e,112)}static uint120(e){return Pt(e,120)}static uint128(e){return Pt(e,128)}static uint136(e){return Pt(e,136)}static uint144(e){return Pt(e,144)}static uint152(e){return Pt(e,152)}static uint160(e){return Pt(e,160)}static uint168(e){return Pt(e,168)}static uint176(e){return Pt(e,176)}static uint184(e){return Pt(e,184)}static uint192(e){return Pt(e,192)}static uint200(e){return Pt(e,200)}static uint208(e){return Pt(e,208)}static uint216(e){return Pt(e,216)}static uint224(e){return Pt(e,224)}static uint232(e){return Pt(e,232)}static uint240(e){return Pt(e,240)}static uint248(e){return Pt(e,248)}static uint256(e){return Pt(e,256)}static uint(e){return Pt(e,256)}static int8(e){return Pt(e,-8)}static int16(e){return Pt(e,-16)}static int24(e){return Pt(e,-24)}static int32(e){return Pt(e,-32)}static int40(e){return Pt(e,-40)}static int48(e){return Pt(e,-48)}static int56(e){return Pt(e,-56)}static int64(e){return Pt(e,-64)}static int72(e){return Pt(e,-72)}static int80(e){return Pt(e,-80)}static int88(e){return Pt(e,-88)}static int96(e){return Pt(e,-96)}static int104(e){return Pt(e,-104)}static int112(e){return Pt(e,-112)}static int120(e){return Pt(e,-120)}static int128(e){return Pt(e,-128)}static int136(e){return Pt(e,-136)}static int144(e){return Pt(e,-144)}static int152(e){return Pt(e,-152)}static int160(e){return Pt(e,-160)}static int168(e){return Pt(e,-168)}static int176(e){return Pt(e,-176)}static int184(e){return Pt(e,-184)}static int192(e){return Pt(e,-192)}static int200(e){return Pt(e,-200)}static int208(e){return Pt(e,-208)}static int216(e){return Pt(e,-216)}static int224(e){return Pt(e,-224)}static int232(e){return Pt(e,-232)}static int240(e){return Pt(e,-240)}static int248(e){return Pt(e,-248)}static int256(e){return Pt(e,-256)}static int(e){return Pt(e,-256)}static bytes1(e){return Zr(e,1)}static bytes2(e){return Zr(e,2)}static bytes3(e){return Zr(e,3)}static bytes4(e){return Zr(e,4)}static bytes5(e){return Zr(e,5)}static bytes6(e){return Zr(e,6)}static bytes7(e){return Zr(e,7)}static bytes8(e){return Zr(e,8)}static bytes9(e){return Zr(e,9)}static bytes10(e){return Zr(e,10)}static bytes11(e){return Zr(e,11)}static bytes12(e){return Zr(e,12)}static bytes13(e){return Zr(e,13)}static bytes14(e){return Zr(e,14)}static bytes15(e){return Zr(e,15)}static bytes16(e){return Zr(e,16)}static bytes17(e){return Zr(e,17)}static bytes18(e){return Zr(e,18)}static bytes19(e){return Zr(e,19)}static bytes20(e){return Zr(e,20)}static bytes21(e){return Zr(e,21)}static bytes22(e){return Zr(e,22)}static bytes23(e){return Zr(e,23)}static bytes24(e){return Zr(e,24)}static bytes25(e){return Zr(e,25)}static bytes26(e){return Zr(e,26)}static bytes27(e){return Zr(e,27)}static bytes28(e){return Zr(e,28)}static bytes29(e){return Zr(e,29)}static bytes30(e){return Zr(e,30)}static bytes31(e){return Zr(e,31)}static bytes32(e){return Zr(e,32)}static address(e){return new di(Hc,"address",e)}static bool(e){return new di(Hc,"bool",!!e)}static bytes(e){return new di(Hc,"bytes",e)}static string(e){return new di(Hc,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new di(Hc,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===hL}static dereference(e,t){if(di.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class IEe extends $l{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=di.dereference(t,"string");try{n=Ub(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return Ub(AY(e.readValue(),20))}}class CEe extends $l{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function NY(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{const u=l.localName;return Wn(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),Wn(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else $t(!1,"invalid tuple value","tuple",t);$t(e.length===n.length,"types/value length mismatch","tuple",t);let i=new T3,s=new T3,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let f=s.length;c.encode(s,u);let d=i.writeUpdatableValue();o.push(h=>{d(h+f)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function LY(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(tL(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(tL(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),n.push(s.localName||null)}),nl.fromItems(t,n)}class TEe extends $l{coder;length;constructor(e,t,n){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),On(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=di.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let i=this.length;i===-1&&(i=n.length,e.writeValue(n.length)),xY(n.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<n.length;o++)s.push(this.coder);return NY(e,s,n)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),Wn(t*Ds<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*Ds,length:e.dataLength}));let n=[];for(let i=0;i<t;i++)n.push(new CEe(this.coder));return LY(e,n)}}class REe extends $l{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=di.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class FY extends $l{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=yc(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class kEe extends FY{constructor(e){super("bytes",e)}decode(e){return qi(super.decode(e))}}class OEe extends $l{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),On(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=yc(di.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return qi(e.readBytes(this.size))}}const PEe=new Uint8Array([]);class $Ee extends $l{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(PEe)}decode(e){return e.readBytes(0),null}}const DEe=BigInt(0),MEe=BigInt(1),BEe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NEe extends $l{size;signed;constructor(e,t,n){const i=(t?"int":"uint")+e*8;super(i,i,n,!1),On(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=Lp(di.dereference(t,this.type)),i=Uy(BEe,Ds*8);if(this.signed){let s=Uy(i,this.size*8-1);(n>s||n<-(s+MEe))&&this._throwError("value out-of-bounds",t),n=q2e(n,8*Ds)}else(n<DEe||n>Uy(i,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=Uy(e.readValue(),this.size*8);return this.signed&&(t=z2e(t,this.size*8)),t}}class LEe extends FY{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,CY(di.dereference(t,"string")))}decode(e){return J2e(super.decode(e))}}class jy extends $l{coders;constructor(e,t){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,n),On(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){const n=di.dereference(t,"tuple");return NY(e,this.coders,n)}decode(e){return LY(e,this.coders)}}function tm(r){return qu(CY(r))}function Ms(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const FEe="external public payable override",UEe=Ms(FEe.split(" ")),UY="constant external internal payable private public pure view override",zEe=Ms(UY.split(" ")),zY="constructor error event fallback function receive struct",qY=Ms(zY.split(" ")),jY="calldata memory storage payable indexed",qEe=Ms(jY.split(" ")),jEe="tuple returns",VEe=[zY,jY,jEe,UY].join(" "),KEe=Ms(VEe.split(" ")),HEe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},WEe=new RegExp("^(\\s*)"),GEe=new RegExp("^([0-9]+)"),YEe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),VY=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),KY=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class aa{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new aa(this.#t)}reset(){this.#e=0}#r(e=0,t=0){return new aa(this.#t.slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=this.#r(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;this.#e<e.match-1;){const n=this.peek().linkNext;t.push(this.#r(this.#e+1,n)),this.#e=n}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let t=this.#e;t<this.#t.length;t++){const n=this.#t[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Gu(r){const e=[],t=o=>{const a=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let n=[],i=[],s=0;for(;s<r.length;){let o=r.substring(s),a=o.match(WEe);a&&(s+=a[1].length,o=r.substring(s));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=HEe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;u=f+u,e[e.length-1].value=Wu(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(YEe),a){if(c.text=a[1],s+=c.text.length,KEe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(KY)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(GEe),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new aa(e.map(o=>Object.freeze(o)))}function pL(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function Ow(r,e){if(e.peekKeyword(qY)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function xl(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function HY(r){let e=xl(r,zEe);return pL(e,Ms("constant payable nonpayable".split(" "))),pL(e,Ms("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function dl(r,e){return r.popParams().map(t=>xn.from(t,e))}function WY(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return Lp(r.pop().text);throw new Error("invalid gas")}return null}function Zf(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const JEe=new RegExp(/^(.*)\[([0-9]*)\]$/);function gL(r){const e=r.match(KY);if($t(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);$t(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);$t(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const Bn={},no=Symbol.for("_ethers_internal"),mL="_ParamTypeInternal",yL="_ErrorInternal",vL="_EventInternal",bL="_ConstructorInternal",wL="_FallbackInternal",xL="_FunctionInternal",_L="_StructInternal";class xn{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,i,s,o,a,c){if($6(e,Bn,"ParamType"),Object.defineProperty(this,no,{value:mL}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");On(this,{name:t,type:n,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}#e(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{o.#e(e,c,n,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#e(e,c,n,u=>{a[l]=u})}),i(a);return}const s=n(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)}async walkAsync(e,t){const n=[],i=[e];return this.#e(n,e,t,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(xn.isParamType(e))return e;if(typeof e=="string")try{return xn.from(Gu(e),t)}catch{$t(!1,"invalid param type","obj",e)}else if(e instanceof aa){let a="",c="",l=null;xl(e,Ms(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(p=>xn.from(p)),a=`tuple(${l.map(p=>p.format()).join(",")})`):(a=gL(e.popType("TYPE")),c=a);let u=null,f=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();u=new xn(Bn,"",a,c,null,l,f,u),f=p.value,a+=p.text,c="array",l=null}let d=null;if(xl(e,qEe).has("indexed")){if(!t)throw new Error("");d=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new xn(Bn,g,a,c,d,l,f,u)}const n=e.name;$t(!n||typeof n=="string"&&n.match(VY),"invalid name","obj.name",n);let i=e.indexed;i!=null&&($t(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(JEe);if(o){const a=parseInt(o[2]||"-1"),c=xn.from({type:o[1],components:e.components});return new xn(Bn,n||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(l=>xn.from(l)):null;return new xn(Bn,n||"",s,"tuple",i,a,null,null)}return s=gL(e.type),new xn(Bn,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[no]===mL}}class Qf{type;inputs;constructor(e,t,n){$6(e,Bn,"Fragment"),n=Object.freeze(n.slice()),On(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{Qf.from(JSON.parse(e))}catch{}return Qf.from(Gu(e))}if(e instanceof aa)switch(e.peekKeyword(qY)){case"constructor":return il.from(e);case"error":return Ys.from(e);case"event":return fc.from(e);case"fallback":case"receive":return Yc.from(e);case"function":return dc.from(e);case"struct":return zf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return il.from(e);case"error":return Ys.from(e);case"event":return fc.from(e);case"fallback":case"receive":return Yc.from(e);case"function":return dc.from(e);case"struct":return zf.from(e)}Wn(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}$t(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return il.isFragment(e)}static isError(e){return Ys.isFragment(e)}static isEvent(e){return fc.isFragment(e)}static isFunction(e){return dc.isFragment(e)}static isStruct(e){return zf.isFragment(e)}}class Pw extends Qf{name;constructor(e,t,n,i){super(e,t,i),$t(typeof n=="string"&&n.match(VY),"invalid identifier","name",n),i=Object.freeze(i.slice()),On(this,{name:n})}}function rm(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class Ys extends Pw{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,no,{value:yL})}get selector(){return tm(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+rm(e,this.inputs)),t.join(" ")}static from(e){if(Ys.isFragment(e))return e;if(typeof e=="string")return Ys.from(Gu(e));if(e instanceof aa){const t=Ow("error",e),n=dl(e);return Zf(e),new Ys(Bn,t,n)}return new Ys(Bn,e.name,e.inputs?e.inputs.map(xn.from):[])}static isFragment(e){return e&&e[no]===yL}}class fc extends Pw{anonymous;constructor(e,t,n,i){super(e,"event",t,n),Object.defineProperty(this,no,{value:vL}),On(this,{anonymous:i})}get topicHash(){return tm(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+rm(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(i=>xn.from(i)),new fc(Bn,e,t,!1).topicHash}static from(e){if(fc.isFragment(e))return e;if(typeof e=="string")try{return fc.from(Gu(e))}catch{$t(!1,"invalid event fragment","obj",e)}else if(e instanceof aa){const t=Ow("event",e),n=dl(e,!0),i=!!xl(e,Ms(["anonymous"])).has("anonymous");return Zf(e),new fc(Bn,t,n,i)}return new fc(Bn,e.name,e.inputs?e.inputs.map(t=>xn.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[no]===vL}}class il extends Qf{payable;gas;constructor(e,t,n,i,s){super(e,t,n),Object.defineProperty(this,no,{value:bL}),On(this,{payable:i,gas:s})}format(e){if(Wn(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[`constructor${rm(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(il.isFragment(e))return e;if(typeof e=="string")try{return il.from(Gu(e))}catch{$t(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof aa){xl(e,Ms(["constructor"]));const t=dl(e),n=!!xl(e,UEe).has("payable"),i=WY(e);return Zf(e),new il(Bn,"constructor",t,n,i)}return new il(Bn,"constructor",e.inputs?e.inputs.map(xn.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[no]===bL}}class Yc extends Qf{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,no,{value:wL}),On(this,{payable:n})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:n})}return`${t}()${this.payable?" payable":""}`}static from(e){if(Yc.isFragment(e))return e;if(typeof e=="string")try{return Yc.from(Gu(e))}catch{$t(!1,"invalid fallback fragment","obj",e)}else if(e instanceof aa){const t=e.toString(),n=e.peekKeyword(Ms(["fallback","receive"]));if($t(n,"type must be fallback or receive","obj",t),e.popKeyword(Ms(["fallback","receive"]))==="receive"){const a=dl(e);return $t(a.length===0,"receive cannot have arguments","obj.inputs",a),xl(e,Ms(["payable"])),Zf(e),new Yc(Bn,[],!0)}let s=dl(e);s.length?$t(s.length===1&&s[0].type==="bytes","invalid fallback inputs","obj.inputs",s.map(a=>a.format("minimal")).join(", ")):s=[xn.from("bytes")];const o=HY(e);if($t(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),xl(e,Ms(["returns"])).has("returns")){const a=dl(e);$t(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Zf(e),new Yc(Bn,s,o==="payable")}if(e.type==="receive")return new Yc(Bn,[],!0);if(e.type==="fallback"){const t=[xn.from("bytes")],n=e.stateMutability==="payable";return new Yc(Bn,t,n)}$t(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[no]===wL}}class dc extends Pw{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,i,s,o){super(e,"function",t,i),Object.defineProperty(this,no,{value:xL}),s=Object.freeze(s.slice()),On(this,{constant:n==="view"||n==="pure",gas:o,outputs:s,payable:n==="payable",stateMutability:n})}get selector(){return tm(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+rm(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(rm(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(i=>xn.from(i)),new dc(Bn,e,"view",t,[],null).selector}static from(e){if(dc.isFragment(e))return e;if(typeof e=="string")try{return dc.from(Gu(e))}catch{$t(!1,"invalid function fragment","obj",e)}else if(e instanceof aa){const n=Ow("function",e),i=dl(e),s=HY(e);let o=[];xl(e,Ms(["returns"])).has("returns")&&(o=dl(e));const a=WY(e);return Zf(e),new dc(Bn,n,s,i,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new dc(Bn,e.name,t,e.inputs?e.inputs.map(xn.from):[],e.outputs?e.outputs.map(xn.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[no]===xL}}class zf extends Pw{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,no,{value:_L})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return zf.from(Gu(e))}catch{$t(!1,"invalid struct fragment","obj",e)}else if(e instanceof aa){const t=Ow("struct",e),n=dl(e);return Zf(e),new zf(Bn,t,n)}return new zf(Bn,e.name,e.inputs?e.inputs.map(xn.from):[])}static isFragment(e){return e&&e[no]===_L}}const Ha=new Map;Ha.set(0,"GENERIC_PANIC");Ha.set(1,"ASSERT_FALSE");Ha.set(17,"OVERFLOW");Ha.set(18,"DIVIDE_BY_ZERO");Ha.set(33,"ENUM_RANGE_ERROR");Ha.set(34,"BAD_STORAGE_DATA");Ha.set(49,"STACK_UNDERFLOW");Ha.set(50,"ARRAY_RANGE_ERROR");Ha.set(65,"OUT_OF_MEMORY");Ha.set(81,"UNINITIALIZED_FUNCTION_CALL");const XEe=new RegExp(/^bytes([0-9]*)$/),ZEe=new RegExp(/^(u?int)([0-9]*)$/);let sA=null,SL=1024;function QEe(r,e,t,n){let i="missing revert data",s=null;const o=null;let a=null;if(t){i="execution reverted";const l=wl(t);if(t=qi(t),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(qi(l.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(qi(l.slice(0,4))==="0x4e487b71")try{const u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Ha.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?Ub(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ub(e.from)),wY(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:c,invocation:o,revert:a})}class np{#e(e){if(e.isArray())return new TEe(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new jy(e.components.map(n=>this.#e(n)),e.name);switch(e.baseType){case"address":return new IEe(e.name);case"bool":return new REe(e.name);case"string":return new LEe(e.name);case"bytes":return new kEe(e.name);case"":return new $Ee(e.name)}let t=e.type.match(ZEe);if(t){let n=parseInt(t[2]||"256");return $t(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new NEe(n/8,t[1]==="int",e.name)}if(t=e.type.match(XEe),t){let n=parseInt(t[1]);return $t(n!==0&&n<=32,"invalid bytes length","param",e),new OEe(n,e.name)}$t(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map(i=>this.#e(xn.from(i)));return new jy(t,"_").defaultValue()}encode(e,t){xY(t.length,e.length,"types/values length mismatch");const n=e.map(o=>this.#e(xn.from(o))),i=new jy(n,"_"),s=new T3;return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(o=>this.#e(xn.from(o)));return new jy(i,"_").decode(new D6(t,n,SL))}static _setDefaultMaxInflation(e){$t(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),SL=e}static defaultAbiCoder(){return sA==null&&(sA=new np),sA}static getBuiltinCallException(e,t,n){return QEe(e,t,n,np.defaultAbiCoder())}}class eAe{fragment;name;signature;topic;args;constructor(e,t,n){const i=e.name,s=e.format();On(this,{fragment:e,name:i,signature:s,topic:t,args:n})}}class tAe{fragment;name;args;signature;selector;value;constructor(e,t,n,i){const s=e.name,o=e.format();On(this,{fragment:e,name:s,args:n,signature:o,selector:t,value:i})}}class rAe{fragment;name;args;signature;selector;constructor(e,t,n){const i=e.name,s=e.format();On(this,{fragment:e,name:i,args:n,signature:s,selector:t})}}class EL{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){On(this,{hash:e,_isIndexed:!0})}}const AL={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},IL={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&AL[r.toString()]&&(e=AL[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};class cu{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#r=new Map,this.#e=new Map,this.#t=new Map;const n=[];for(const o of t)try{n.push(Qf.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}On(this,{fragments:Object.freeze(n)});let i=null,s=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}On(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:($t(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=this.#r;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||On(this,{deploy:il.from("constructor()")}),On(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return np.defaultAbiCoder()}#i(e,t,n){if(Fy(e)){const s=e.toLowerCase();for(const o of this.#r.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#r)o.split("(")[0]===e&&s.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,c=!0;di.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){const u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){const u=s[l].inputs;for(let f=0;f<t.length;f++)if(di.isTyped(t[f])){if(f>=u.length){if(t[f].type==="overrides")continue;s.splice(l,1);break}if(t[f].type!==u[f].baseType){s.splice(l,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");$t(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#r.get(dc.from(e).format());return i||null}getFunctionName(e){const t=this.#i(e,null,!1);return $t(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,t){return this.#i(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#r.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#r.get(i),n)}}#o(e,t,n){if(Fy(e)){const s=e.toLowerCase();for(const o of this.#t.values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&s.push(a);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let c=0;c<t.length;c++)if(di.isTyped(t[c])&&t[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const o=s.map(a=>JSON.stringify(a.format())).join(", ");$t(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=this.#t.get(fc.from(e).format());return i||null}getEventName(e){const t=this.#o(e,null,!1);return $t(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#t.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#t.get(i),n)}}getError(e,t){if(Fy(e)){const i=e.toLowerCase();if(IL[i])return Ys.from(IL[i].signature);for(const s of this.#e.values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of this.#e)s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Ys.from("error Error(string)"):e==="Panic"?Ys.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");$t(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Ys.from(e).format(),e==="Error(string)")return Ys.from("error Error(string)");if(e==="Panic(uint256)")return Ys.from("error Panic(uint256)");const n=this.#e.get(e);return n||null}forEachError(e){const t=Array.from(this.#e.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(this.#e.get(i),n)}}_decodeParams(e,t){return this.#n.decode(e,t)}_encodeParams(e,t){return this.#n.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);$t(n,"unknown error","fragment",e),e=n}return $t(Jd(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Jd(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);$t(n,"unknown error","fragment",e),e=n}return Ph([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);$t(n,"unknown function","fragment",e),e=n}return $t(Jd(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Jd(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);$t(n,"unknown function","fragment",e),e=n}return Ph([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);$t(s,"unknown function","fragment",e),e=s}let n="invalid length for result data";const i=yc(t);if(i.length%32===0)try{return this.#n.decode(e.outputs,i)}catch{n="could not decode result data"}Wn(!1,n,"BAD_DATA",{value:qi(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=wl(e,"data"),i=np.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=qi(n.slice(0,4)),c=this.getError(a);if(c)try{const l=this.#n.decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);$t(n,"unknown function","fragment",e),e=n}return qi(this.#n.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);$t(s,"unknown event","eventFragment",e),e=s}Wn(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(s,o)=>s.type==="string"?tm(o):s.type==="bytes"?qu(qi(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=AY(o):s.type.match(/^bytes/)?o=U2e(o,32):s.type==="address"&&this.#n.encode(["address"],[o]),F2e(qi(o),32));for(t.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){$t(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?$t(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);$t(o,"unknown event","eventFragment",e),e=o}const n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),$t(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const c=t[a];if(o.indexed)if(o.type==="string")n.push(tm(c));else if(o.type==="bytes")n.push(qu(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#n.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this.#n.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const h=this.getEvent(e);$t(h,"unknown event","eventFragment",e),e=h}if(n!=null&&!e.anonymous){const h=e.topicHash;$t(Fy(n[0],32)&&n[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(xn.from({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});const a=n!=null?this.#n.decode(i,Ph(n)):null,c=this.#n.decode(s,t,!0),l=[],u=[];let f=0,d=0;return e.inputs.forEach((h,g)=>{let p=null;if(h.indexed)if(a==null)p=new EL(null);else if(o[g])p=new EL(a[d++]);else try{p=a[d++]}catch(m){p=m}else try{p=c[f++]}catch(m){p=m}l.push(p),u.push(h.name||null)}),nl.fromItems(l,u)}parseTransaction(e){const t=wl(e.data,"tx.data"),n=Lp(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(qi(t.slice(0,4)));if(!i)return null;const s=this.#n.decode(i.inputs,t.slice(4));return new tAe(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new eAe(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=qi(e),n=this.getError(Jd(t,0,4));if(!n)return null;const i=this.#n.decode(n.inputs,Jd(t,4));return new rAe(n,n.selector,i)}static from(e){return e instanceof cu?e:typeof e=="string"?new cu(JSON.parse(e)):typeof e.formatJson=="function"?new cu(e.formatJson()):typeof e.format=="function"?new cu(e.format("json")):new cu(e)}}const $h={AbiDecoderDataSource:Symbol.for("AbiDecoderDataSource"),CommandDecoderDataSource:Symbol.for("CommandDecoderDataSource"),UniswapContextLoader:Symbol.for("UniswapContextLoader")};var nAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},oA=(r,e)=>(t,n)=>e(t,n,r);const iAe=[kt.EXTERNAL_PLUGIN,kt.TOKEN];let R3=class{constructor(e,t,n){this._externalPluginDataSource=e,this._tokenDataSource=t,this._uniswapLoader=n,this._customPluginLoaders={Uniswap:this._uniswapLoader}}_customPluginLoaders;canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"data"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&Kn(e.to)&&e.to!=="0x"&&Kn(e.data)&&e.data!=="0x"&&Kn(e.selector)&&e.selector!=="0x"&&iAe.every(n=>t.includes(n))}async load(e){const{to:t,data:n,selector:i,chainId:s}=e,o=await this._externalPluginDataSource.getDappInfos({address:t,chainId:s,selector:i});return hr(async({liftEither:a})=>{const c=await a(o);if(!c)return[];const l={type:kt.EXTERNAL_PLUGIN,payload:c.selectorDetails.serializedData.concat(c.selectorDetails.signature)},u=this._customPluginLoaders[c.selectorDetails.plugin];if(u!==void 0&&u.canHandle(e,[kt.TOKEN])){const g=await u.load(e);return[l,...g]}const f=this.getDecodedCallData(c.abi,c.selectorDetails.method,n);if(f.isLeft())return[{type:kt.ERROR,error:f.extract()},l];const d=f.extract(),h=c.selectorDetails.erc20OfInterest.map(async g=>this.getTokenPayload(e,g,d));return[...(await Promise.all(h)).map(g=>g.caseOf({Left:p=>({type:kt.ERROR,error:p}),Right:p=>({type:kt.TOKEN,payload:p})})),l]}).caseOf({Left:a=>[{type:kt.ERROR,error:a}],Right:a=>a})}getTokenPayload(e,t,n){const i=this.getAddressFromPath(t,n);return hr(({fromPromise:s})=>s(this._tokenDataSource.getTokenInfosPayload({address:i,chainId:e.chainId})))}getDecodedCallData(e,t,n){try{const i=new cu(e);return Zt(i.decodeFunctionData(t,n))}catch{return lt(new Error("[ContextModule] ExternalPluginContextLoader: Unable to parse abi"))}}getAddressFromPath(e,t){let n=t;for(const i of e.split("."))i==="-1"?n=n[n.length-1]:n=n[i];if(!Kn(n))throw new Error("[ContextModule] ExternalPluginContextLoader: Unable to get address");return n}};R3=nAe([Et(),oA(0,Xe(Bb.ExternalPluginDataSource)),oA(1,Xe(mc.TokenDataSource)),oA(2,Xe($h.UniswapContextLoader))],R3);const sAe=()=>new bn(({bind:r})=>{r(Bb.ExternalPluginDataSource).to(E3),r(Bb.ExternalPluginContextLoader).to(R3)});var oAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},aAe=(r,e)=>(t,n)=>e(t,n,r);let k3=class{constructor(e){this.config=e}async getSetPluginPayload({chainId:e,address:t,selector:n}){try{const i=await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}/plugin-selector/${n}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}});return i.data.payload?Zt(i.data.payload):lt(new Error("[ContextModule] HttpNftDataSource: unexpected empty response"))}catch{return lt(new Error("[ContextModule] HttpNftDataSource: Failed to fetch set plugin payload"))}}async getNftInfosPayload({chainId:e,address:t}){try{const n=await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v1/ethereum/${e}/contracts/${t}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}});return n.data.payload?Zt(n.data.payload):lt(new Error("[ContextModule] HttpNftDataSource: no nft metadata"))}catch{return lt(new Error("[ContextModule] HttpNftDataSource: Failed to fetch nft informations"))}}};k3=oAe([Et(),aAe(0,Xe(Ci.Config))],k3);var cAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},lAe=(r,e)=>(t,n)=>e(t,n,r);let O3=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===kt.NFT&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getNftInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:t=>({type:kt.ERROR,error:t}),Right:t=>({type:kt.NFT,payload:t})})}};O3=cAe([Et(),lAe(0,Xe(Uf.NftDataSource))],O3);var uAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},fAe=(r,e)=>(t,n)=>e(t,n,r),GY=(r=>(r.Approve="0x095ea7b3",r.SetApprovalForAll="0xa22cb465",r.TransferFrom="0x23b872dd",r.SafeTransferFrom="0x42842e0e",r.SafeTransferFromWithData="0xb88d4fde",r))(GY||{}),YY=(r=>(r.SetApprovalForAll="0xa22cb465",r.SafeTransferFrom="0xf242432a",r.SafeBatchTransferFrom="0x2eb2c2d6",r))(YY||{});const dAe=[...Object.values(GY),...Object.values(YY)],hAe=[kt.PLUGIN,kt.NFT];let P3=class{_dataSource;constructor(e){this._dataSource=e}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&Kn(e.to)&&e.to!=="0x"&&Kn(e.selector)&&this.isSelectorSupported(e.selector)&&hAe.every(n=>t.includes(n))}async load(e){const t=[],{to:n,selector:i,chainId:s}=e,o=(await this._dataSource.getSetPluginPayload({chainId:s,address:n,selector:i})).caseOf({Left:c=>({type:kt.ERROR,error:c}),Right:c=>({type:kt.PLUGIN,payload:c})});if(o.type===kt.ERROR)return[o];t.push(o);const a=(await this._dataSource.getNftInfosPayload({chainId:s,address:n})).caseOf({Left:c=>({type:kt.ERROR,error:c}),Right:c=>({type:kt.NFT,payload:c})});return a.type===kt.ERROR?[a]:(t.push(a),t)}isSelectorSupported(e){return Object.values(dAe).includes(e)}};P3=uAe([Et(),fAe(0,Xe(Uf.NftDataSource))],P3);const pAe=()=>new bn(({bind:r})=>{r(Uf.NftDataSource).to(k3),r(Uf.NftContextLoader).to(P3),r(Uf.NftContextFieldLoader).to(O3)});let gAe=class{static keyUsageMap=new Map([[Jn.GenuineCheck,1],[Jn.ExchangePayload,2],[Jn.NftMeta,3],[Jn.TrustedName,4],[Jn.BackupProvider,5],[Jn.ProtectOrchestrator,6],[Jn.PluginMeta,7],[Jn.CoinMeta,8],[Jn.SeedIdAuth,9],[Jn.TxSimulationSigner,10],[Jn.Calldata,11],[Jn.Network,12],[Jn.LESMultisig,14]]);static mapKeyUsageForFirmware(e){return Object.values(Jn).includes(e)?this.keyUsageMap.get(e)??-1:-1}};var mAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},yAe=(r,e)=>(t,n)=>e(t,n,r);let $3=class{constructor(e){this.config=e}async fetchCertificate(e){const t={output:"descriptor",target_device:e.targetDevice,latest:!0,public_key_id:e.keyId,public_key_usage:e.keyUsage};try{const n=await lr.request({method:"GET",url:`${this.config.cal.url}/certificates`,params:t,headers:{[Zi]:`context-module/${Qi.version}`}});if(n.status==200&&n.data!==void 0&&n.data.length>0&&this.isValidPkiCertificateResponse(n.data[0],this.config.cal.mode)){const i=Ab($b.appendSignatureToPayload(n.data[0].descriptor.data,n.data[0].descriptor.signatures[this.config.cal.mode],p2e));if(!i)return lt(Error("[ContextModule] HttpPkiCertificateDataSource: Cannot generate payload from fetched PKI Certificate"));const s={payload:i,keyUsageNumber:gAe.mapKeyUsageForFirmware(e.keyUsage)};return Zt(s)}else return lt(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"))}catch{return lt(Error("[ContextModule] HttpPkiCertificateDataSource: failed to fetch PKI for given descriptor"))}}isValidPkiCertificateResponse(e,t){return typeof e=="object"&&e!==null&&"descriptor"in e&&typeof e.descriptor=="object"&&e.descriptor!==null&&"data"in e.descriptor&&typeof e.descriptor.data=="string"&&"signatures"in e.descriptor&&typeof e.descriptor.signatures=="object"&&e.descriptor.signatures!==null&&t in e.descriptor.signatures&&typeof e.descriptor.signatures[t]=="string"}};$3=mAe([Et(),yAe(0,Xe(Ci.Config))],$3);var vAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},bAe=(r,e)=>(t,n)=>e(t,n,r);let D3=class{_dataSource;constructor(e){this._dataSource=e}async loadCertificate(e){return(await this._dataSource.fetchCertificate(e)).orDefault(void 0)}};D3=vAe([Et(),bAe(0,Xe(Fs.PkiCertificateDataSource))],D3);const wAe=()=>new bn(({bind:r})=>{r(Fs.PkiCertificateDataSource).to($3),r(Fs.PkiCertificateLoader).to(D3)});var xAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},_Ae=(r,e)=>(t,n)=>e(t,n,r);let M3=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:n,calldata:i}){let s;try{s=(await lr.request({method:"POST",url:`${this.config.metadataServiceDomain.url}/v2/ethereum/${t}/contract/proxy/delegate`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken},data:{proxy:e,data:i,challenge:n}})).data}catch{return lt(new Error("[ContextModule] HttpProxyDataSource: Failed to fetch delegate proxy"))}return s?this.isProxyDelegateCallDto(s)?s.addresses[0]?Zt({implementationAddress:s.addresses[0],signedDescriptor:s.signedDescriptor,keyId:Tw.DomainMetadataKey,keyUsage:Jn.TrustedName}):lt(new Error(`[ContextModule] HttpProxyDataSource: No implementation address found for proxy ${e} on chain ${t}`)):lt(new Error(`[ContextModule] HttpProxyDataSource: Invalid proxy delegate call response format for proxy ${e} on chain ${t}`)):lt(new Error(`[ContextModule] HttpProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isProxyDelegateCallDto(e){return typeof e=="object"&&e!==null&&"addresses"in e&&"signedDescriptor"in e&&Array.isArray(e.addresses)&&e.addresses.every(t=>typeof t=="string")&&typeof e.signedDescriptor=="string"}};M3=xAe([Et(),_Ae(0,Xe(Ci.Config))],M3);var SAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},EAe=(r,e)=>(t,n)=>e(t,n,r);let B3=class{constructor(e){this.config=e}async getProxyImplementationAddress({proxyAddress:e,chainId:t,challenge:n}){let i;try{i=(await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v3/ethereum/${t}/contract/proxy/${e}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken},params:{challenge:n,resolver:"SAFE_GATEWAY"}})).data}catch{return lt(new Error("[ContextModule] HttpSafeProxyDataSource: Failed to fetch safe proxy implementation"))}return i?this.isSafeProxyImplementationAddressDto(i)?Zt({implementationAddress:i.implementationAddress,signedDescriptor:i.signedDescriptor,keyId:i.keyId,keyUsage:i.keyUsage}):lt(new Error(`[ContextModule] HttpSafeProxyDataSource: Invalid safe proxy response format for proxy ${e} on chain ${t}`)):lt(new Error(`[ContextModule] HttpSafeProxyDataSource: No data received for proxy ${e} on chain ${t}`))}isSafeProxyImplementationAddressDto(e){return typeof e=="object"&&e!==null&&"proxyAddress"in e&&"implementationAddress"in e&&"standard"in e&&"signedDescriptor"in e&&"providedBy"in e&&"keyId"in e&&"keyUsage"in e&&typeof e.proxyAddress=="string"&&typeof e.implementationAddress=="string"&&typeof e.standard=="string"&&typeof e.signedDescriptor=="string"&&typeof e.providedBy=="string"&&typeof e.keyId=="string"&&typeof e.keyUsage=="string"}};B3=SAe([Et(),EAe(0,Xe(Ci.Config))],B3);var AAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},CL=(r,e)=>(t,n)=>e(t,n,r);let N3=class{constructor(e,t){this._proxyDataSource=e,this._certificateLoader=t}canHandle(e,t){return t===kt.PROXY_INFO&&typeof e=="object"&&e!==null&&"chainId"in e&&"proxyAddress"in e&&"calldata"in e&&"challenge"in e&&"deviceModelId"in e}async loadField(e){return(await this._proxyDataSource.getProxyImplementationAddress({calldata:e.calldata,proxyAddress:e.proxyAddress,chainId:e.chainId,challenge:e.challenge})).caseOf({Left:t=>Promise.resolve({type:kt.ERROR,error:t}),Right:async({signedDescriptor:t,keyId:n,keyUsage:i})=>{const s=await this._certificateLoader.loadCertificate({keyId:n,keyUsage:i,targetDevice:e.deviceModelId});return{type:kt.PROXY_INFO,payload:t,certificate:s}}})}};N3=AAe([Et(),CL(0,Xe(Lf.ProxyDataSource)),CL(1,Xe(Fs.PkiCertificateLoader))],N3);const IAe=r=>new bn(({bind:e})=>{r?.datasource?.proxy==="safe"?e(Lf.ProxyDataSource).to(B3):e(Lf.ProxyDataSource).to(M3),e(Lf.ProxyContextFieldLoader).to(N3)});var CAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},TAe=(r,e)=>(t,n)=>e(t,n,r);let L3=class{constructor(e){this.config=e}async getDescriptors({safeContractAddress:e,chainId:t,challenge:n}){try{const i=await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/ethereum/${t}/safe/account/${e}`,params:{challenge:n},headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}});return i.data?this.isSafeAccountDto(i.data)?Zt({account:{signedDescriptor:i.data.accountDescriptor.signedDescriptor,keyId:i.data.accountDescriptor.keyId,keyUsage:i.data.accountDescriptor.keyUsage},signers:{signedDescriptor:i.data.signersDescriptor.signedDescriptor,keyId:i.data.signersDescriptor.keyId,keyUsage:i.data.signersDescriptor.keyUsage}}):lt(new Error("[ContextModule] HttpSafeAccountDataSource: invalid safe account response format")):lt(new Error("[ContextModule] HttpSafeAccountDataSource: unexpected empty response"))}catch{return lt(new Error("[ContextModule] HttpSafeAccountDataSource: Failed to fetch safe account descriptors"))}}isSafeAccountDto(e){return typeof e=="object"&&e!==null&&"accountDescriptor"in e&&"signersDescriptor"in e&&typeof e.accountDescriptor=="object"&&typeof e.signersDescriptor=="object"&&this.isSafeDescriptorDto(e.accountDescriptor)&&this.isSafeDescriptorDto(e.signersDescriptor)}isSafeDescriptorDto(e){return typeof e=="object"&&e!==null&&"signedDescriptor"in e&&"keyId"in e&&"keyUsage"in e&&typeof e.signedDescriptor=="string"&&typeof e.keyId=="string"&&typeof e.keyUsage=="string"}};L3=CAe([TAe(0,Xe(Ci.Config))],L3);var RAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},TL=(r,e)=>(t,n)=>e(t,n,r);const kAe=[kt.SAFE,kt.SIGNER];let F3=class{constructor(e,t){this._dataSource=e,this._certificateLoader=t}canHandle(e,t){return t.every(n=>kAe.includes(n))&&typeof e=="object"&&e!==null&&"safeContractAddress"in e&&Kn(e.safeContractAddress)&&e.safeContractAddress!=="0x"&&"chainId"in e&&typeof e.chainId=="number"&&"deviceModelId"in e&&e.deviceModelId!==void 0&&"challenge"in e&&typeof e.challenge=="string"&&e.challenge.length>0}async load({safeContractAddress:e,chainId:t,deviceModelId:n,challenge:i}){return(await this._dataSource.getDescriptors({safeContractAddress:e,chainId:t,challenge:i})).caseOf({Left:s=>Promise.resolve([{type:kt.ERROR,error:s}]),Right:async({account:s,signers:o})=>[{type:kt.SAFE,payload:s.signedDescriptor,certificate:await this._certificateLoader.loadCertificate({keyId:s.keyId,keyUsage:s.keyUsage,targetDevice:n})},{type:kt.SIGNER,payload:o.signedDescriptor,certificate:await this._certificateLoader.loadCertificate({keyId:o.keyId,keyUsage:o.keyUsage,targetDevice:n})}]})}};F3=RAe([Et(),TL(0,Xe(Nb.SafeAddressDataSource)),TL(1,Xe(Fs.PkiCertificateLoader))],F3);const OAe=()=>new bn(({bind:r})=>{r(Nb.SafeAddressDataSource).to(L3),r(Nb.SafeAddressLoader).to(F3)});var PAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},$Ae=(r,e)=>(t,n)=>e(t,n,r);let U3=class{constructor(e){if(this.config=e,!this.config.originToken)throw new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: origin token is required")}isSolanaSPLOwnerInfo(e){return typeof e!="object"||e===null?!1:typeof e.tokenAccount=="string"&&typeof e.owner=="string"&&typeof e.contract=="string"&&typeof e.signedDescriptor=="string"}async fetchAddressMetadata(e,t){return await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/owner/${e}?challenge=${t}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}}).then(n=>this.isSolanaSPLOwnerInfo(n.data)?Zt(n.data):lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid fetchAddressMetadata response shape"))).catch(()=>lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to fetch address metadata")))}async computeAddressMetadata(e,t,n){return await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/solana/computed-token-account/${e}/${t}?challenge=${n}`,headers:{[Zi]:`context-module/${Qi.version}`,"X-Ledger-Client-Origin":this.config.originToken}}).then(i=>this.isSolanaSPLOwnerInfo(i.data)?Zt(i.data):lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid computeAddressMetadata response shape"))).catch(()=>lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: Failed to compute address metadata")))}async getOwnerInfo(e){const{tokenAddress:t,challenge:n,createATA:i}=e;if(!n)return lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: challenge is required"));let s;if(t)s=await this.fetchAddressMetadata(t,n);else if(i?.address&&i?.mintAddress)s=await this.computeAddressMetadata(i.address,i.mintAddress,n);else return lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: either tokenAddress or valid createATA must be provided"));return s.chain(o=>{const a=Ab(o.signedDescriptor);return a?Zt({descriptor:a,tokenAccount:o.tokenAccount,owner:o.owner,contract:o.contract}):lt(new Error("[ContextModule] - HttpSolanaOwnerInfoDataSource: invalid base64 descriptor received"))})}};U3=PAe([Et(),$Ae(0,Xe(Ci.Config))],U3);var DAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},RL=(r,e)=>(t,n)=>e(t,n,r);let z3=class{constructor(e,t){this._certificateLoader=t,this._dataSource=e}_dataSource;async load(e){const t=await this._certificateLoader.loadCertificate({keyId:"domain_metadata_key",keyUsage:Jn.TrustedName,targetDevice:e.deviceModelId});return t?(await this._dataSource.getOwnerInfo(e)).map(({descriptor:n,tokenAccount:i,owner:s,contract:o})=>({descriptor:n,tokenAccount:i,owner:s,contract:o,certificate:t})):lt(new Error("[ContextModule] - DefaultSolanaContextLoader: CAL certificate is undefined"))}};z3=DAe([Et(),RL(0,Xe(Lb.SolanaDataSource)),RL(1,Xe(Fs.PkiCertificateLoader))],z3);const MAe=()=>new bn(({bind:r})=>{r(Lb.SolanaDataSource).to(U3),r(Lb.SolanaContextLoader).to(z3)});var BAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},NAe=(r,e)=>(t,n)=>e(t,n,r);let q3=class{constructor(e){this.config=e}async getTokenInfosPayload({chainId:e,address:t}){try{const n=(await lr.request({method:"GET",url:`${this.config.cal.url}/tokens`,params:{contract_address:t,chain_id:e,output:"descriptor",ref:`branch:${this.config.cal.branch}`},headers:{[Zi]:`context-module/${Qi.version}`}})).data?.[0];if(!n||!n.descriptor||!n.descriptor.data||!n.descriptor.signatures||typeof n.descriptor.signatures[this.config.cal.mode]!="string")return lt(new Error(`[ContextModule] HttpTokenDataSource: no token metadata for address ${t} on chain ${e}`));const i=(n.descriptor.data.length/2-20-4-4).toString(16).padStart(2,"0");return Zt([i,n.descriptor.data,n.descriptor.signatures[this.config.cal.mode]].join(""))}catch{return lt(new Error("[ContextModule] HttpTokenDataSource: Failed to fetch token informations"))}}};q3=BAe([Et(),NAe(0,Xe(Ci.Config))],q3);var LAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},FAe=(r,e)=>(t,n)=>e(t,n,r);let j3=class{constructor(e){this._dataSource=e}canHandle(e,t){return t===kt.TOKEN&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e}async loadField(e){return(await this._dataSource.getTokenInfosPayload({address:e.address,chainId:e.chainId})).caseOf({Left:t=>({type:kt.ERROR,error:t}),Right:t=>({type:kt.TOKEN,payload:t})})}};j3=LAe([Et(),FAe(0,Xe(mc.TokenDataSource))],j3);var UAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},zAe=(r,e)=>(t,n)=>e(t,n,r),JY=(r=>(r.Approve="0x095ea7b3",r.Transfer="0xa9059cbb",r))(JY||{});const qAe=Object.values(JY),jAe=[kt.TOKEN];let V3=class{_dataSource;constructor(e){this._dataSource=e}canHandle(e,t){return typeof e=="object"&&e!==null&&"to"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&Kn(e.to)&&e.to!=="0x"&&Kn(e.selector)&&this.isSelectorSupported(e.selector)&&jAe.every(n=>t.includes(n))}async load(e){const{to:t,chainId:n}=e;return[(await this._dataSource.getTokenInfosPayload({address:t,chainId:n})).caseOf({Left:i=>({type:kt.ERROR,error:i}),Right:i=>({type:kt.TOKEN,payload:i})})]}isSelectorSupported(e){return Object.values(qAe).includes(e)}};V3=UAe([Et(),zAe(0,Xe(mc.TokenDataSource))],V3);const VAe=()=>new bn(({bind:r})=>{r(mc.TokenDataSource).to(q3),r(mc.TokenContextLoader).to(V3),r(mc.TokenContextFieldLoader).to(j3)});var KAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},HAe=(r,e)=>(t,n)=>e(t,n,r);let K3=class{constructor(e){this.config=e}async getTransactionCheck({chainId:e,rawTx:t,from:n}){let i;const s={tx:{from:n,raw:t},chain:e};try{i=(await lr.request({method:"POST",url:`${this.config.web3checks.url}/ethereum/scan/tx`,data:s,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}})).data}catch{return lt(new Error("[ContextModule] HttpTransactionCheckDataSource: Failed to fetch web3 checks information"))}if(!this._isTransactionCheckDto(i))return lt(new Error("[ContextModule] HttpTransactionCheckDataSource: Cannot exploit transaction check data received"));const o={publicKeyId:i.public_key_id,descriptor:i.descriptor};return Zt(o)}_isTransactionCheckDto(e){return e!=null&&typeof e=="object"&&"public_key_id"in e&&e.public_key_id!=null&&typeof e.public_key_id=="string"&&"descriptor"in e&&e.descriptor!=null&&typeof e.descriptor=="string"}};K3=KAe([Et(),HAe(0,Xe(Ci.Config))],K3);var WAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},GAe=(r,e)=>(t,n)=>e(t,n,r);let H3=class{constructor(e){this.config=e}async getTypedDataCheck({from:e,data:t}){let n;const i={msg:{from:e,data:t}};try{n=(await lr.request({method:"POST",url:`${this.config.web3checks.url}/ethereum/scan/eip-712`,data:i,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}})).data}catch{return lt(new Error("[ContextModule] HttpTypedDataCheckDataSource: Failed to fetch typed data check information"))}if(!this._isTypedDataCheckDto(n))return lt(new Error("[ContextModule] HttpTypedDataCheckDataSource: Cannot exploit typed data check data received"));const s={publicKeyId:n.public_key_id,descriptor:n.descriptor};return Zt(s)}_isTypedDataCheckDto(e){return e!=null&&typeof e=="object"&&"public_key_id"in e&&e.public_key_id!=null&&typeof e.public_key_id=="string"&&"descriptor"in e&&e.descriptor!=null&&typeof e.descriptor=="string"}};H3=WAe([Et(),GAe(0,Xe(Ci.Config))],H3);var YAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},kL=(r,e)=>(t,n)=>e(t,n,r);const JAe=[kt.TRANSACTION_CHECK];let W3=class{constructor(e,t){this.transactionCheckDataSource=e,this.certificateLoader=t}canHandle(e,t){return typeof e=="object"&&e!==null&&"from"in e&&e.from!==void 0&&Kn(e.from)&&"chainId"in e&&e.chainId!==void 0&&typeof e.chainId=="number"&&"transaction"in e&&e.transaction!==void 0&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Fr.NANO_S&&typeof e.chainId=="number"&&Kn(e.from)&&e.from!=="0x"&&JAe.every(n=>t.includes(n))}async load(e){const{from:t,chainId:n,transaction:i}=e,s=wu(i);return!t||!s?[]:[await(await this.transactionCheckDataSource.getTransactionCheck({chainId:n,rawTx:s,from:t})).caseOf({Left:o=>Promise.resolve({type:kt.ERROR,error:o}),Right:async o=>{const a=await this.certificateLoader.loadCertificate({keyId:o.publicKeyId,keyUsage:Jn.TxSimulationSigner,targetDevice:e.deviceModelId});return{type:kt.TRANSACTION_CHECK,payload:o.descriptor,certificate:a}}})]}};W3=YAe([Et(),kL(0,Xe(gu.TransactionCheckDataSource)),kL(1,Xe(Fs.PkiCertificateLoader))],W3);var XAe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},OL=(r,e)=>(t,n)=>e(t,n,r);const ZAe=[kt.TRANSACTION_CHECK];let G3=class{constructor(e,t){this.typedDataCheckDataSource=e,this.certificateLoader=t}canHandle(e,t){return typeof e=="object"&&e!==null&&"from"in e&&e.from!==void 0&&Kn(e.from)&&e.from!=="0x"&&"data"in e&&typeof e.data=="object"&&"deviceModelId"in e&&e.deviceModelId!==void 0&&e.deviceModelId!==Fr.NANO_S&&ZAe.every(n=>t.includes(n))}async load(e){const{from:t,data:n}=e;return!t||!n?[]:[await(await this.typedDataCheckDataSource.getTypedDataCheck({data:n,from:t})).caseOf({Left:i=>Promise.resolve({type:kt.ERROR,error:i}),Right:async i=>{const s=await this.certificateLoader.loadCertificate({keyId:i.publicKeyId,keyUsage:Jn.TxSimulationSigner,targetDevice:e.deviceModelId});return{type:kt.TRANSACTION_CHECK,payload:i.descriptor,certificate:s}}})]}};G3=XAe([Et(),OL(0,Xe(gu.TypedDataCheckDataSource)),OL(1,Xe(Fs.PkiCertificateLoader))],G3);const QAe=()=>new bn(({bind:r})=>{r(gu.TransactionCheckDataSource).to(K3),r(gu.TransactionCheckContextLoader).to(W3),r(gu.TypedDataCheckDataSource).to(H3),r(gu.TypedDataCheckContextLoader).to(G3)});var eIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},tIe=(r,e)=>(t,n)=>e(t,n,r);let Y3=class{constructor(e){this.config=e}async getDomainNamePayload({chainId:e,domain:t,challenge:n}){let i;try{i=(await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/forward/${t}?types=eoa&sources=ens&challenge=${n}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}})).data}catch{return lt(new Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch domain name"))}return i?this.isTrustedNameDto(i)?Zt({data:i.signedDescriptor.data,keyId:i.keyId,keyUsage:i.keyUsage}):lt(new Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for domain ${t} on chain ${e}`)):lt(new Error(`[ContextModule] HttpTrustedNameDataSource: No data received for domain ${t} on chain ${e}`))}async getTrustedNamePayload({chainId:e,address:t,challenge:n,sources:i,types:s}){let o;try{i=i.filter(c=>c==="ens"||c==="crypto_asset_list"),o=(await lr.request({method:"GET",url:`${this.config.metadataServiceDomain.url}/v2/names/ethereum/${e}/reverse/${t}?types=${s.join(",")}&sources=${i.join(",")}&challenge=${n}`,headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}})).data}catch{return lt(new Error("[ContextModule] HttpTrustedNameDataSource: Failed to fetch trusted name"))}if(!o)return lt(new Error(`[ContextModule] HttpTrustedNameDataSource: No data received for address ${t} on chain ${e}`));if(!this.isTrustedNameDto(o))return lt(new Error(`[ContextModule] HttpTrustedNameDataSource: Invalid trusted name response format for address ${t} on chain ${e}`));if(typeof o.signedDescriptor.signatures[this.config.cal.mode]!="string")return Zt({data:o.signedDescriptor.data,keyId:o.keyId,keyUsage:o.keyUsage});const a=o.signedDescriptor.signatures[this.config.cal.mode];return Zt({data:this.formatTrustedName(o.signedDescriptor.data,a),keyId:o.keyId,keyUsage:o.keyUsage})}formatTrustedName(e,t){t.length%2!==0&&(t="0"+t);const n="15",i=(t.length/2).toString(16);return`${e}${n}${i}${t}`}isTrustedNameDto(e){return typeof e=="object"&&e!==null&&"signedDescriptor"in e&&"keyId"in e&&"keyUsage"in e&&typeof e.keyId=="string"&&typeof e.keyUsage=="string"&&typeof e.signedDescriptor=="object"&&e.signedDescriptor!==null&&"data"in e.signedDescriptor&&"signatures"in e.signedDescriptor&&typeof e.signedDescriptor.data=="string"&&typeof e.signedDescriptor.signatures=="object"}};Y3=eIe([Et(),tIe(0,Xe(Ci.Config))],Y3);var rIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},PL=(r,e)=>(t,n)=>e(t,n,r);let J3=class{constructor(e,t){this._dataSource=e,this._certificateLoader=t}canHandle(e,t){return t===kt.TRUSTED_NAME&&typeof e=="object"&&e!==null&&"chainId"in e&&"address"in e&&"challenge"in e&&"types"in e&&"sources"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0}async loadField(e){return await(await this._dataSource.getTrustedNamePayload({chainId:e.chainId,address:e.address,challenge:e.challenge,types:e.types,sources:e.sources})).caseOf({Left:t=>Promise.resolve({type:kt.ERROR,error:t}),Right:async({data:t,keyId:n,keyUsage:i})=>{const s=await this._certificateLoader.loadCertificate({keyId:n,keyUsage:i,targetDevice:e.deviceModelId});return{type:kt.TRUSTED_NAME,payload:t,certificate:s}}})}};J3=rIe([Et(),PL(0,Xe(Ff.TrustedNameDataSource)),PL(1,Xe(Fs.PkiCertificateLoader))],J3);var nIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},$L=(r,e)=>(t,n)=>e(t,n,r);const iIe=[kt.TRUSTED_NAME];let X3=class{constructor(e,t){this.certificateLoader=t,this._dataSource=e}_dataSource;canHandle(e,t){return typeof e=="object"&&e!==null&&"chainId"in e&&"domain"in e&&"challenge"in e&&"deviceModelId"in e&&e.deviceModelId!==void 0&&typeof e.chainId=="number"&&typeof e.domain=="string"&&e.domain.length>0&&typeof e.challenge=="string"&&e.challenge.length>0&&iIe.every(n=>t.includes(n))}async load(e){const{chainId:t,domain:n,challenge:i,deviceModelId:s}=e;return this.isDomainValid(n)?[await(await this._dataSource.getDomainNamePayload({chainId:t,domain:n,challenge:i})).caseOf({Left:o=>Promise.resolve({type:kt.ERROR,error:o}),Right:async({data:o,keyId:a,keyUsage:c})=>{const l=await this.certificateLoader.loadCertificate({keyId:a,keyUsage:c,targetDevice:s});return{type:kt.TRUSTED_NAME,payload:o,certificate:l}}})]:[{type:kt.ERROR,error:new Error("[ContextModule] TrustedNameLoader: invalid domain")}]}isDomainValid(e){const t=e.length>0&&Number(e.length)<30,n=new RegExp("^[a-zA-Z0-9\\-\\_\\.]+$").test(e);return t&&n}};X3=nIe([Et(),$L(0,Xe(Ff.TrustedNameDataSource)),$L(1,Xe(Fs.PkiCertificateLoader))],X3);const sIe=()=>new bn(({bind:r})=>{r(Ff.TrustedNameDataSource).to(Y3),r(Ff.TrustedNameContextLoader).to(X3),r(Ff.TrustedNameContextFieldLoader).to(J3)});var Bv={exports:{}};function XY(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nv={exports:{}},oIe=Nv.exports,DL;function ZY(){return DL||(DL=1,function(r,e){(function(t,n){r.exports=n()})(oIe,function(){var t=t||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Ii<"u"&&Ii.crypto&&(s=Ii.crypto),!s&&typeof XY=="function")try{s=gd}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(w){var _;return v.prototype=w,_=new v,v.prototype=null,_}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(v){var w=a(this);return v&&w.mixIn(v),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var w in v)v.hasOwnProperty(w)&&(this[w]=v[w]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(v,w){v=this.words=v||[],w!=i?this.sigBytes=w:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var w=this.words,_=v.words,x=this.sigBytes,E=v.sigBytes;if(this.clamp(),x%4)for(var S=0;S<E;S++){var T=_[S>>>2]>>>24-S%4*8&255;w[x+S>>>2]|=T<<24-(x+S)%4*8}else for(var C=0;C<E;C+=4)w[x+C>>>2]=_[C>>>2];return this.sigBytes+=E,this},clamp:function(){var v=this.words,w=this.sigBytes;v[w>>>2]&=4294967295<<32-w%4*8,v.length=n.ceil(w/4)},clone:function(){var v=u.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var w=[],_=0;_<v;_+=4)w.push(o());return new f.init(w,v)}}),d=c.enc={},h=d.Hex={stringify:function(v){for(var w=v.words,_=v.sigBytes,x=[],E=0;E<_;E++){var S=w[E>>>2]>>>24-E%4*8&255;x.push((S>>>4).toString(16)),x.push((S&15).toString(16))}return x.join("")},parse:function(v){for(var w=v.length,_=[],x=0;x<w;x+=2)_[x>>>3]|=parseInt(v.substr(x,2),16)<<24-x%8*4;return new f.init(_,w/2)}},g=d.Latin1={stringify:function(v){for(var w=v.words,_=v.sigBytes,x=[],E=0;E<_;E++){var S=w[E>>>2]>>>24-E%4*8&255;x.push(String.fromCharCode(S))}return x.join("")},parse:function(v){for(var w=v.length,_=[],x=0;x<w;x++)_[x>>>2]|=(v.charCodeAt(x)&255)<<24-x%4*8;return new f.init(_,w)}},p=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(g.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return g.parse(unescape(encodeURIComponent(v)))}},m=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=p.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var w,_=this._data,x=_.words,E=_.sigBytes,S=this.blockSize,T=S*4,C=E/T;v?C=n.ceil(C):C=n.max((C|0)-this._minBufferSize,0);var P=C*S,V=n.min(P*4,E);if(P){for(var L=0;L<P;L+=S)this._doProcessBlock(x,L);w=x.splice(0,P),_.sigBytes-=V}return new f.init(w,V)},clone:function(){var v=u.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=m.extend({cfg:u.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(v){return function(w,_){return new v.init(_).finalize(w)}},_createHmacHelper:function(v){return function(w,_){return new y.HMAC.init(v,_).finalize(w)}}});var y=c.algo={};return c}(Math);return t})}(Nv)),Nv.exports}var Lv={exports:{}},aIe=Lv.exports,ML;function cIe(){return ML||(ML=1,function(r,e){(function(t,n){r.exports=n(ZY())})(aIe,function(t){return function(n){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,c=i.algo,l=[],u=[];(function(){function h(y){for(var v=n.sqrt(y),w=2;w<=v;w++)if(!(y%w))return!1;return!0}function g(y){return(y-(y|0))*4294967296|0}for(var p=2,m=0;m<64;)h(p)&&(m<8&&(l[m]=g(n.pow(p,1/2))),u[m]=g(n.pow(p,1/3)),m++),p++})();var f=[],d=c.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,g){for(var p=this._hash.words,m=p[0],y=p[1],v=p[2],w=p[3],_=p[4],x=p[5],E=p[6],S=p[7],T=0;T<64;T++){if(T<16)f[T]=h[g+T]|0;else{var C=f[T-15],P=(C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3,V=f[T-2],L=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;f[T]=P+f[T-7]+L+f[T-16]}var D=_&x^~_&E,b=m&y^m&v^y&v,I=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),B=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),F=S+B+D+u[T]+f[T],z=I+b;S=E,E=x,x=_,_=w+F|0,w=v,v=y,y=m,m=F+z|0}p[0]=p[0]+m|0,p[1]=p[1]+y|0,p[2]=p[2]+v|0,p[3]=p[3]+w|0,p[4]=p[4]+_|0,p[5]=p[5]+x|0,p[6]=p[6]+E|0,p[7]=p[7]+S|0},_doFinalize:function(){var h=this._data,g=h.words,p=this._nDataBytes*8,m=h.sigBytes*8;return g[m>>>5]|=128<<24-m%32,g[(m+64>>>9<<4)+14]=n.floor(p/4294967296),g[(m+64>>>9<<4)+15]=p,h.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),t.SHA256})}(Lv)),Lv.exports}var lIe=Bv.exports,BL;function uIe(){return BL||(BL=1,function(r,e){(function(t,n,i){r.exports=n(ZY(),cIe())})(lIe,function(t){return function(){var n=t,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,c=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=a._createHelper(c),n.HmacSHA224=a._createHmacHelper(c)}(),t.SHA224})}(Bv)),Bv.exports}var fIe=uIe();const dIe=zs(fIe),hIe=255;var vg=(r=>(r.None="none",r.Present="present",r.VerifyingContract="verifying_contract",r))(vg||{}),pIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},gIe=(r,e)=>(t,n)=>e(t,n,r);let Z3=class{constructor(e){this.config=e}async getTypedDataFilters({chainId:e,address:t,schema:n,version:i}){let s;try{const o=await lr.request({method:"GET",url:`${this.config.cal.url}/dapps`,params:{contracts:t,chain_id:e,output:"descriptors_eip712",descriptors_eip712_version:i,descriptors_eip712:"<set>",ref:`branch:${this.config.cal.branch}`},headers:{[Zi]:`context-module/${Qi.version}`,[Do]:this.config.originToken}}),a=dIe(JSON.stringify(this.sortTypes(n)).replace(" ","")).toString();t=t.toLowerCase();const c=o.data?.[0]?.descriptors_eip712?.[t]?.[a];if(!c)return lt(new Error(`[ContextModule] HttpTypedDataDataSource: no typed data filters for address ${t} on chain ${e} for schema ${a}`));if(!c.schema||!Array.isArray(c.instructions))return lt(new Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${a}`));const l=[],u={};for(const f of c.instructions)if(this.isInstructionContractInfo(f,this.config.cal.mode))s={displayName:f.display_name,signature:f.signatures[this.config.cal.mode],filtersCount:f.field_mappers_count};else if(i==="v1"&&this.isInstructionFieldV1(f,this.config.cal.mode))l.push({type:"raw",displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode]});else if(this.isInstructionFieldV2WithCoinRef(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],tokenIndex:f.coin_ref});else if(this.isInstructionFieldV2WithName(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],types:f.name_types,sources:f.name_sources,typesAndSourcesPayload:this.formatTrustedNameTypesAndSources(f)});else if(this.isInstructionCalldataInfo(f,this.config.cal.mode))u[f.calldata_index]={displayName:f.display_name,calldataIndex:f.calldata_index,valueFlag:f.value_filter_flag,calleeFlag:this.convertCalldataPresenceFlag(f.callee_filter_flag),amountFlag:f.amount_filter_flag,spenderFlag:this.convertCalldataPresenceFlag(f.spender_filter_flag),chainIdFlag:f.chain_id_filter_flag,selectorFlag:f.selector_filter_flag,signature:f.signatures[this.config.cal.mode]};else if(this.isInstructionFieldV2Calldata(f,this.config.cal.mode))l.push({type:f.format,displayName:f.display_name,path:f.field_path,signature:f.signatures[this.config.cal.mode],calldataIndex:f.calldata_index});else return lt(new Error(`[ContextModule] HttpTypedDataDataSource: invalid typed data field for address ${t} on chain ${e} for schema ${a}`));return s?Zt({messageInfo:s,filters:l,calldatasInfos:u}):lt(new Error(`[ContextModule] HttpTypedDataDataSource: no message info for address ${t} on chain ${e} for schema ${a}`))}catch{return lt(new Error("[ContextModule] HttpTypedDataDataSource: Failed to fetch typed data informations"))}}convertCalldataPresenceFlag(e){switch(e){case"none":return vg.None;case"present":return vg.Present;case"verifying_contract":return vg.VerifyingContract;default:{const t=e;throw new Error(`Unhandled flag: ${t}`)}}}formatTrustedNameTypesAndSources(e){const t=e.name_types.length,n=e.name_sources.length,i=e.descriptor.slice((t+n)*2*-1,n*2*-1),s=e.descriptor.slice(n*2*-1),o=t.toString(16).padStart(2,"0"),a=n.toString(16).padStart(2,"0");return o+i+a+s}isInstructionFieldV1(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"}isInstructionFieldV2(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["raw","datetime"].includes(e.format)&&e.coin_ref===void 0}isInstructionFieldV2WithCoinRef(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["token","amount"].includes(e.format)&&typeof e.coin_ref=="number"}isInstructionFieldV2WithName(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&e.format==="trusted-name"&&e.coin_ref===void 0&&Array.isArray(e.name_types)&&Array.isArray(e.name_sources)&&e.name_types.every(n=>typeof n=="string")&&e.name_sources.every(n=>typeof n=="string")}isInstructionContractInfo(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_mappers_count=="number"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&e.field_path===void 0}isInstructionCalldataInfo(e,t){return typeof e=="object"&&typeof e.type=="string"&&e.type==="calldata"&&typeof e.display_name=="string"&&typeof e.calldata_index=="number"&&typeof e.value_filter_flag=="boolean"&&typeof e.chain_id_filter_flag=="boolean"&&typeof e.selector_filter_flag=="boolean"&&typeof e.amount_filter_flag=="boolean"&&["none","present","verifying_contract"].includes(e.callee_filter_flag)&&["none","present","verifying_contract"].includes(e.spender_filter_flag)&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"}isInstructionFieldV2Calldata(e,t){return typeof e=="object"&&typeof e.display_name=="string"&&typeof e.field_path=="string"&&typeof e.signatures=="object"&&typeof e.signatures[t]=="string"&&typeof e.format=="string"&&["calldata-value","calldata-callee","calldata-chain-id","calldata-selector","calldata-amount","calldata-spender"].includes(e.format)&&typeof e.calldata_index=="number"}sortTypes(e){return Object.fromEntries(Object.entries(e).sort(([t],[n])=>t.localeCompare(n)).map(([t,n])=>[t,n.map(i=>({name:i.name,type:i.type}))]))}};Z3=pIe([Et(),gIe(0,Xe(Ci.Config))],Z3);var mIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},Vy=(r,e)=>(t,n)=>e(t,n,r);let Q3=class{constructor(e,t,n,i){this.dataSource=e,this.tokenDataSource=t,this.proxyDataSource=n,this._certificateLoader=i}async load(e){let t,n=await this.dataSource.getTypedDataFilters({address:e.verifyingContract,chainId:e.chainId,version:e.version,schema:e.schema});if(n.isLeft()){const{resolvedAddress:c,context:l}=await this.resolveProxy(e);if(l!==void 0&&(t=l,n=await this.dataSource.getTypedDataFilters({address:c,chainId:e.chainId,version:e.version,schema:e.schema})),n.isLeft())return{type:"error",error:n.extract()}}const{messageInfo:i,filters:s,calldatasInfos:o}=n.unsafeCoerce(),a=s.reduce((c,l)=>(c[l.path]=l,c),{});return{type:"success",messageInfo:i,filters:a,trustedNamesAddresses:this.extractTrustedNames(s,e),tokens:await this.extractTokens(s,e),calldatas:this.extractCalldatas(s,o,e),proxy:t}}async resolveProxy(e){const t=await this.proxyDataSource.getProxyImplementationAddress({calldata:"0x",proxyAddress:e.verifyingContract,chainId:e.chainId,challenge:e.challenge??""});if(t.isLeft())return{resolvedAddress:e.verifyingContract,context:void 0};const n=t.unsafeCoerce(),i=await this._certificateLoader.loadCertificate({keyId:n.keyId,keyUsage:n.keyUsage,targetDevice:e.deviceModelId});return{resolvedAddress:n.implementationAddress,context:{type:kt.PROXY_INFO,payload:n.signedDescriptor,certificate:i}}}extractTrustedNames(e,t){return e.filter(n=>n.type==="trusted-name").reduce((n,i)=>{const s=t.fieldsValues.filter(o=>o.path===i.path);if(s.length!==0){const o=s[0],a=this.convertAddressToHexaString(o.value);n[i.path]=a}return n},{})}async extractTokens(e,t){const n={};for(const i of e){if(i.type!=="token"&&i.type!=="amount")continue;const s=i.tokenIndex;if(n[s]===void 0){if(i.type==="token"){const o=t.fieldsValues.filter(l=>l.path===i.path);if(o.length===0)continue;const a=o[0],c=this.convertAddressToHexaString(a.value);if(o.every(l=>this.convertAddressToHexaString(l.value)===c)){const l=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:c,chainId:l})).ifRight(u=>{n[s]=u})}}else if(i.type==="amount"&&s===hIe){const o=t.verifyingContract,a=t.chainId;(await this.tokenDataSource.getTokenInfosPayload({address:o,chainId:a})).ifRight(c=>{n[s]=c})}}}return n}extractCalldatas(e,t,n){const i=e.reduce((o,a)=>{if(a.type==="calldata-value"||a.type==="calldata-callee"||a.type==="calldata-chain-id"||a.type==="calldata-selector"||a.type==="calldata-amount"||a.type==="calldata-spender"){const c=o[a.calldataIndex];c===void 0?o[a.calldataIndex]=[a]:c.push(a)}return o},{}),s={};for(const o in t){const a=t[o],c=i[o];if(!c)continue;const l=this.extractHexaString(c.find(m=>m.type==="calldata-value"),n,"0x"),u=this.extractHexaString(c.find(m=>m.type==="calldata-selector"),n,l.slice(0,10)),f=this.extractAddress(c.find(m=>m.type==="calldata-callee"),n,a.calleeFlag),d=this.extractAddress(c.find(m=>m.type==="calldata-spender"),n,a.spenderFlag),h=this.extractBigint(c.find(m=>m.type==="calldata-amount"),n,void 0),g=this.extractBigint(c.find(m=>m.type==="calldata-chain-id"),n,void 0),p=g!==void 0&&g<Number.MAX_SAFE_INTEGER?Number(g):n.chainId;s[o]={filter:a,subset:{chainId:p,data:l,selector:u,to:f,value:h,from:d}}}return s}extractHexaString(e,t,n){if(e!==void 0){const i=t.fieldsValues.filter(s=>s.path===e.path);if(i.length!==0)return wu(i[0].value)}return n}extractAddress(e,t,n,i){if(n===vg.VerifyingContract)return t.verifyingContract;if(e!==void 0){const s=t.fieldsValues.filter(o=>o.path===e.path);if(s.length!==0)return this.convertAddressToHexaString(s[0].value)}return i}extractBigint(e,t,n){if(e!==void 0){const i=t.fieldsValues.filter(s=>s.path===e.path);if(i.length!==0)return BigInt(wu(i[0].value))}return n}convertAddressToHexaString(e){return`0x${Array.from(e,t=>t.toString(16).padStart(2,"0")).join("").padStart(40,"0")}`}};Q3=mIe([Et(),Vy(0,Xe(Fb.TypedDataDataSource)),Vy(1,Xe(mc.TokenDataSource)),Vy(2,Xe(Lf.ProxyDataSource)),Vy(3,Xe(Fs.PkiCertificateLoader))],Q3);const yIe=()=>new bn(({bind:r})=>{r(Fb.TypedDataDataSource).to(Z3),r(Fb.TypedDataContextLoader).to(Q3)}),vIe=["function execute(bytes calldata commands, bytes[] calldata inputs, uint256 deadline) external payable"],bIe="0x3593564c";var po=(r=>(r.V2_SWAP_EXACT_IN="V2_SWAP_EXACT_IN",r.V2_SWAP_EXACT_OUT="V2_SWAP_EXACT_OUT",r.V3_SWAP_EXACT_IN="V3_SWAP_EXACT_IN",r.V3_SWAP_EXACT_OUT="V3_SWAP_EXACT_OUT",r.WRAP_ETH="WRAP_ETH",r.UNWRAP_ETH="UNWRAP_ETH",r.PERMIT2_PERMIT="PERMIT2_PERMIT",r.PERMIT2_TRANSFER_FROM="PERMIT2_TRANSFER_FROM",r.PERMIT2_PERMIT_BATCH="PERMIT2_PERMIT_BATCH",r.PERMIT2_TRANSFER_FROM_BATCH="PERMIT2_TRANSFER_FROM_BATCH",r.PAY_PORTION="PAY_PORTION",r.SWEEP="SWEEP",r))(po||{});const wIe={"0x08":"V2_SWAP_EXACT_IN","0x09":"V2_SWAP_EXACT_OUT","0x00":"V3_SWAP_EXACT_IN","0x01":"V3_SWAP_EXACT_OUT","0x0b":"WRAP_ETH","0x0c":"UNWRAP_ETH","0x0a":"PERMIT2_PERMIT","0x0d":"PERMIT2_TRANSFER_FROM","0x02":"PERMIT2_PERMIT_BATCH","0x03":"PERMIT2_TRANSFER_FROM_BATCH","0x06":"PAY_PORTION","0x04":"SWEEP"},xIe=["V2_SWAP_EXACT_IN","V2_SWAP_EXACT_OUT","V3_SWAP_EXACT_IN","V3_SWAP_EXACT_OUT"];var QY=(r=>(r[r.ETHEREUM_MAINNET=1]="ETHEREUM_MAINNET",r[r.ETHEREUM_GOERLI=5]="ETHEREUM_GOERLI",r[r.ETHEREUM_SEPOLIA=11155111]="ETHEREUM_SEPOLIA",r[r.ARBITRUM_ONE=42161]="ARBITRUM_ONE",r[r.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",r[r.AVALANCHE_C_CHAIN=43114]="AVALANCHE_C_CHAIN",r[r.BSC=56]="BSC",r[r.BASE=8453]="BASE",r[r.BASE_GOERLI=84531]="BASE_GOERLI",r[r.BLAST=23888]="BLAST",r[r.OPTIMISM=10]="OPTIMISM",r[r.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",r[r.POLYGON=137]="POLYGON",r[r.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",r))(QY||{});const _Ie={1:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",5:"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",11155111:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",42161:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",421613:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",43114:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",56:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",8453:"0x4200000000000000000000000000000000000006",84531:"0x44D627f900da8AdaC7561bD73aA745F132450798",23888:"0x4300000000000000000000000000000000000004",10:"0x4200000000000000000000000000000000000006",420:"0x4200000000000000000000000000000000000006",137:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",80001:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889"};var SIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},EIe=(r,e)=>(t,n)=>e(t,n,r);const aA=20*2,NL=3*2;let eT=class{constructor(e){this.abiDecoder=e}decode(e,t,n){switch(e){case po.V2_SWAP_EXACT_IN:return this._decodeSwapV2(t);case po.V2_SWAP_EXACT_OUT:return this._decodeSwapV2(t);case po.V3_SWAP_EXACT_IN:return this._decodeSwapV3(t);case po.V3_SWAP_EXACT_OUT:return this._decodeSwapV3(t);case po.WRAP_ETH:return this._decodeWrappedEth(t,n);case po.UNWRAP_ETH:return this._decodeWrappedEth(t,n);case po.SWEEP:return this._decodeSweep(t);case po.PERMIT2_PERMIT:case po.PERMIT2_TRANSFER_FROM:case po.PERMIT2_PERMIT_BATCH:case po.PERMIT2_TRANSFER_FROM_BATCH:case po.PAY_PORTION:return[];default:return[]}}_decodeSwapV2(e){const[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","address[]","bool"],e);return!Array.isArray(t)||!t.every(Kn)?[]:t.map(n=>n.toLowerCase())}_decodeSwapV3(e){const[,,,t]=this.abiDecoder.decode(["address","uint256","uint256","bytes","bool"],e);if(typeof t!="string"||!Kn(t)||t.length<2+aA*2+NL)return[];const n=[];for(let i=2;i<t.length;i+=aA+NL)n.push(t.slice(i,i+aA));return n.map(i=>i.toLowerCase()).map(i=>`0x${i}`)}_isSupportedChainId(e){return Object.values(QY).includes(e)}_decodeWrappedEth(e,t){return this._isSupportedChainId(t)?[_Ie[t].toLowerCase()]:[]}_decodeSweep=e=>{const[t]=this.abiDecoder.decode(["address","address","uint256"],e);return typeof t!="string"||!Kn(t)?[]:[t.toLowerCase()]}};eT=SIe([Et(),EIe(0,Xe($h.AbiDecoderDataSource))],eT);var AIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i};let tT=class{decode(e,t){try{return np.defaultAbiCoder().decode(e,t)}catch{return[]}}};tT=AIe([Et()],tT);var IIe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},LL=(r,e)=>(t,n)=>e(t,n,r);const CIe=[kt.TOKEN];let rT=class{constructor(e,t){this.commandDecoderDataSource=e,this.tokenDataSource=t}canHandle(e,t){return typeof e=="object"&&e!==null&&"data"in e&&"selector"in e&&"chainId"in e&&typeof e.chainId=="number"&&Kn(e.data)&&e.data!=="0x"&&Kn(e.selector)&&e.selector===bIe&&CIe.every(n=>t.includes(n))}async load(e){const{data:t,chainId:n}=e;return await this._extractClearSignContexts(t,n)}async _extractClearSignContexts(e,t){try{const n=new cu(vIe).parseTransaction({data:e}),i=n?.args[0],s=n?.args[1];if(!Kn(i)||!this._isHexaStringArray(s))return[];const o=this._extractCommands(i).orDefault([]);if(i.length===0||s.length!==o.length)return[];const a=o.reduce((l,u,f)=>{const d=s[f],h=this.commandDecoderDataSource.decode(u,d,t);return l.push([u,h]),l},[]);if(!this._isChainingSwapSupported(a))return[];const c=[...new Set(a.flatMap(([,l])=>l))];return(await Promise.all(c.map(l=>this.tokenDataSource.getTokenInfosPayload({address:l,chainId:t})))).map(l=>l.caseOf({Left:u=>({type:kt.ERROR,error:u}),Right:u=>({type:kt.TOKEN,payload:u})}))}catch{return[]}}_extractCommands(e){return vn.fromNullable(e.slice(2).match(/../g)).map(t=>t.map(n=>`0x${n}`)).map(t=>t.map(n=>wIe[n])).chain(t=>t.every(n=>n!==void 0)?vn.of(t):jr)}_isChainingSwapSupported(e){let t,n;for(const[i,s]of e){if(!xIe.includes(i))continue;const o=i.slice(0,2);if(t&&(t!==s[0]||n!==o))return!1;t=s[s.length-1],n=o}return!0}_isHexaStringArray(e){return Array.isArray(e)&&e.every(t=>typeof t=="string"&&Kn(t))}};rT=IIe([Et(),LL(0,Xe($h.CommandDecoderDataSource)),LL(1,Xe(mc.TokenDataSource))],rT);const TIe=()=>new bn(({bind:r})=>{r($h.AbiDecoderDataSource).to(tT),r($h.CommandDecoderDataSource).to(eT),r($h.UniswapContextLoader).to(rT)}),RIe=({config:r})=>{const e=new A6;return e.loadSync(T2e(r),sAe(),D2e(),pAe(),IAe(r),OAe(),VAe(),C2e(),sIe(),yIe(),wAe(),TIe(),QAe(),MAe()),e};let kIe=class{_container;_loaders;_typedDataLoader;_solanaLoader;_fieldLoaders;constructor(e){this._container=RIe({config:e}),this._loaders=e.defaultLoaders?this._getDefaultLoaders():[],this._loaders.push(...e.customLoaders),this._fieldLoaders=e.defaultFieldLoaders?this._getDefaultFieldLoaders():[],this._fieldLoaders.push(...e.customFieldLoaders),this._typedDataLoader=e.customTypedDataLoader??this._getDefaultTypedDataLoader(),this._solanaLoader=e.customSolanaLoader??this._getSolanaLoader()}_getDefaultFieldLoaders(){return[this._container.get(Uf.NftContextFieldLoader),this._container.get(mc.TokenContextFieldLoader),this._container.get(Ff.TrustedNameContextFieldLoader),this._container.get(Lf.ProxyContextFieldLoader)]}_getDefaultLoaders(){return[this._container.get(Bb.ExternalPluginContextLoader),this._container.get(Ff.TrustedNameContextLoader),this._container.get(Uf.NftContextLoader),this._container.get(mc.TokenContextLoader),this._container.get(Oh.CalldataContextLoader),this._container.get(Mb.DynamicNetworkContextLoader),this._container.get(Nb.SafeAddressLoader),this._container.get(gu.TransactionCheckContextLoader),this._container.get(gu.TypedDataCheckContextLoader)]}_getDefaultTypedDataLoader(){return this._container.get(Fb.TypedDataContextLoader)}_getSolanaLoader(){try{return this._container.get(Lb.SolanaContextLoader)}catch{return{load:async e=>lt(new Error("[ContextModule] - DefaultContextModule: no SolanaContextLoader bound"))}}}async getContexts(e,t){const n=Object.values(kt),i=this._loaders.filter(s=>s.canHandle(e,t??n)).map(s=>s.load(e));return(await Promise.all(i)).flat()}async getFieldContext(e,t){const n=this._fieldLoaders.filter(i=>i.canHandle(e,t));if(n.length===0)return Promise.resolve({type:kt.ERROR,error:new Error(`Loader not found for field: ${e} and expected type: ${t}`)});for(const i of n){const s=await i.loadField(e);if(s.type!==kt.ERROR)return s}return{type:kt.ERROR,error:new Error(`Loader not found for field: ${e} and expected type: ${t}`)}}async getTypedDataFilters(e){return this._typedDataLoader.load(e)}async getSolanaContext(e){return await this._solanaLoader.load(e)}};const OIe="https://crypto-assets-service.api.ledger.com/v1",PIe="https://web3checks-backend.api.ledger.com/v3",$Ie="https://nft.api.live.ledger.com",DIe={cal:{url:OIe,mode:"prod",branch:"main"},web3checks:{url:PIe},metadataServiceDomain:{url:$Ie},defaultLoaders:!0,customLoaders:[],defaultFieldLoaders:!0,customFieldLoaders:[],customTypedDataLoader:void 0,customSolanaLoader:void 0};let MIe=class{config=DIe;originToken;constructor({originToken:e}={}){this.originToken=e}removeDefaultLoaders(){return this.config.defaultLoaders=!1,this}addLoader(e){return this.config.customLoaders.push(e),this}addTypedDataLoader(e){return this.config.customTypedDataLoader=e,this}addSolanaLoader(e){return this.config.customSolanaLoader=e,this}setCalConfig(e){return this.config.cal=e,this}setMetadataServiceConfig(e){return this.config.metadataServiceDomain=e,this}setWeb3ChecksConfig(e){return this.config.web3checks=e,this}setDatasourceConfig(e){return this.config.datasource=e,this}build(){const e={...this.config,originToken:this.originToken};return new kIe(e)}};var BIe=(r=>(r.FROM="FROM",r.TO="TO",r.VALUE="VALUE",r))(BIe||{}),NIe=(r=>(r.TUPLE="TUPLE",r.ARRAY="ARRAY",r.REF="REF",r.LEAF="LEAF",r.SLICE="SLICE",r))(NIe||{}),LIe=(r=>(r.STATIC_LEAF="STATIC_LEAF",r.DYNAMIC_LEAF="DYNAMIC_LEAF",r.TUPLE_LEAF="TUPLE_LEAF",r.ARRAY_LEAF="ARRAY_LEAF",r))(LIe||{});const Jc={GetAddressUseCase:Symbol.for("GetAddressUseCase"),GetAppConfigurationUseCase:Symbol.for("GetAppConfigurationUseCase"),SignTransactionUseCase:Symbol.for("SignTransactionUseCase"),GenerateTransactionUseCase:Symbol.for("GenerateTransactionUseCase"),SignMessageUseCase:Symbol.for("SignMessageUseCase")},Fp={AppBinder:Symbol.for("AppBinder")};let Up=class{constructor(e,t,n=Fu.isSuccessResponse){this._errors=e,this._errorFactory=t,this._isSuccessResponse=n}getError(e){const t=new Oc(e).encodeToHexaString(e.statusCode);if(z4(t,this._errors))return Br({error:this._errorFactory({...this._errors[t],errorCode:t})});if(!this._isSuccessResponse(e))return Br({error:Bm.handle(e)})}},N6=class{static PADDING=2147483648;static splitPath(e){const t=[];return e.split("/").forEach(n=>{let i=parseInt(n,10);if(isNaN(i))throw new Error("invalid number provided");n.length>1&&n[n.length-1]==="'"&&(i+=this.PADDING),t.push(i)}),t}};function FIe(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<r.length;l++){const u=r.charAt(l),f=u.charCodeAt(0);if(e[f]!==255)throw new TypeError(u+" is ambiguous");e[f]=l}const t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,f=0,d=0;const h=l.length;for(;d!==h&&l[d]===0;)d++,u++;const g=(h-d)*s+1>>>0,p=new Uint8Array(g);for(;d!==h;){let v=l[d],w=0;for(let _=g-1;(v!==0||w<f)&&_!==-1;_--,w++)v+=256*p[_]>>>0,p[_]=v%t>>>0,v=v/t>>>0;if(v!==0)throw new Error("Non-zero carry");f=w,d++}let m=g-f;for(;m!==g&&p[m]===0;)m++;let y=n.repeat(u);for(;m<g;++m)y+=r.charAt(p[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,f=0,d=0;for(;l[u]===n;)f++,u++;const h=(l.length-u)*i+1>>>0,g=new Uint8Array(h);for(;u<l.length;){const v=l.charCodeAt(u);if(v>255)return;let w=e[v];if(w===255)return;let _=0;for(let x=h-1;(w!==0||_<d)&&x!==-1;x--,_++)w+=t*g[x]>>>0,g[x]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");d=_,u++}let p=h-d;for(;p!==h&&g[p]===0;)p++;const m=new Uint8Array(f+(h-p));let y=f;for(;p!==h;)m[y++]=g[p++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var UIe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const FL=FIe(UIe);let eJ=class{static encode(e){return FL.encode(e)}static decode(e){return FL.decode(e)}};const zp={6700:{message:"Incorrect length"},6982:{message:"Security status not satisfied (Canceled by user)"},"6a80":{message:"Invalid data"},"6a81":{message:"Invalid off-chain message header"},"6a82":{message:"Invalid off-chain message format"},"6b00":{message:"Incorrect parameter P1 or P2"}};let zIe=class extends F4{constructor(e){super({tag:"SolanaAppCommandError",...e})}};const qp=r=>new zIe(r),UL=32;let L6=class{constructor(e,t=eJ){this.bs58Encoder=t,this.args=e}name="getPubKey";errorHelper=new Up(zp,qp);args;getApdu(){const e={cla:224,ins:5,p1:this.args.checkOnDevice?1:0,p2:0},t=new qa(e),n=this.args.derivationPath,i=N6.splitPath(n);return t.add8BitUIntToData(i.length),i.forEach(s=>{t.add32BitUIntToData(s)}),t.build()}parseResponse(e){return vn.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Oc(e);if(t.testMinimalLength(UL)===!1)return Br({error:new hs("Public key is missing")});const n=t.extractFieldByLength(UL);return Br(n===void 0?{error:new hs("Unable to extract public key")}:{data:this.bs58Encoder.encode(n)})})}};const qIe=224,jIe=7,VIe=1,zL=64,cA={INIT:0,EXTEND:1,MORE:2};let KIe=class{constructor(e){this.args=e}name="signOffChainMessage";getApdu(){const e=(this.args.extend?cA.EXTEND:cA.INIT)|(this.args.more?cA.MORE:0);return new qa({cla:qIe,ins:jIe,p1:VIe,p2:e}).addBufferToData(this.args.chunkedData).build()}parseResponse(e){const t=new Oc(e).extractFieldByLength(zL);return!t||t.length!==zL?Br({data:new Uint8Array(0)}):Br({data:t})}},tJ=class{constructor(e,t){this.api=e,this.args=t}async run(){const{data:e,commandFactory:t}=this.args,n=new Jg(e.length).addBufferToData(e).build();for(let i=0;i<n.length;i+=hg){const s=i+hg>=n.length,o=await this.api.sendCommand(t({more:!s,extend:i>0,chunkedData:n.slice(i,i+hg)}));if(!Es(o))return o;if(s)return Br({data:o.data})}throw new hs("No result after processing all chunks")}};const HIe=15*1024,WIe=1280,rJ=40,nJ=8,GIe=HIe-rJ-nJ,qL=WIe-rJ-nJ,nT=65515,YIe=126,JIe=32,XIe=10;var ZIe=(r=>(r[r.Ascii=0]="Ascii",r[r.Utf8=1]="Utf8",r[r.Utf8LongV0=2]="Utf8LongV0",r))(ZIe||{});const jL=nT;let QIe=class{constructor(e,t,n=eJ){this.api=e,this.args=t,this.bs58Encoder=n}async run(){const{sendingData:e,derivationPath:t}=this.args;if(e.length===0)return Br({error:new hs("Message cannot be empty")});if(e.length>jL)return Br({error:new hs(`Message too long: ${e.length} bytes (max is ${jL})`)});const n=N6.splitPath(t),i=await this.api.sendCommand(new L6({derivationPath:t,checkOnDevice:!1}));if(!("data"in i))return Br({error:new hs("Error getting public key from device")});const s=this.bs58Encoder.decode(i.data),o=this._buildFullMessage(e,s,!1),a=this._buildApduCommand(o,n),c=await this._sendInChunks(a);if(Es(c))try{const u=this._buildEnvelopeBase58(c.data,o);return Br({data:{signature:u}})}catch(u){return Br({error:new hs(u instanceof Error?u.message:String(u))})}const l="error"in c?c.error:void 0;if(this._isInvalidOffchainHeaderError(l)){if(e.length>qL)return c;const u=this._buildFullMessage(e,s,!0),f=this._buildApduCommand(u,n),d=await this._sendInChunks(f);if(Es(d))try{const h=this._buildEnvelopeBase58(d.data,u);return Br({data:{signature:h}})}catch(h){return Br({error:new hs(h instanceof Error?h.message:String(h))})}return d}return c}_isUTF8(e){try{return new TextDecoder("utf-8",{fatal:!0}).decode(e),!0}catch{return!1}}_findMessageFormat(e,t){const n=t?qL:GIe;if(e.length<=n){if(this._isPrintableASCII(e,t))return 0;if(this._isUTF8(e))return 1}else if(e.length<=nT){if(this._isUTF8(e))return 2}else throw new hs(`Message too long: ${e.length} bytes (max is ${nT})`);return 0}_isPrintableASCII(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(!(!t&&i===XIe)&&(i<JIe||i>YIe))return!1}return!0}_buildFullMessage(e,t,n){const i=this._findMessageFormat(e,n),s=new Jg;return s.add8BitUIntToData(255).addAsciiStringToData("solana offchain"),s.add8BitUIntToData(0),n||s.addBufferToData(new Uint8Array(32)),s.add8BitUIntToData(i),n||(s.add8BitUIntToData(1),s.addBufferToData(t)),s.add8BitUIntToData(e.length&255),s.add8BitUIntToData(e.length>>8&255),s.addBufferToData(e),s.build()}_isInvalidOffchainHeaderError(e){if(!e||typeof e!="object")return!1;const t=e,n=t._tag,i=t.errorCode;return typeof n=="string"&&typeof i=="string"&&i.toLowerCase()==="6a81"}_buildApduCommand(e,t){const n=new Jg(2+t.length*4+e.length);return n.add8BitUIntToData(1),n.add8BitUIntToData(t.length),t.forEach(i=>n.add32BitUIntToData(i)),n.addBufferToData(e),n.build()}async _sendInChunks(e){const t=n=>new KIe(n);return await new tJ(this.api,{data:e,commandFactory:t}).run()}_buildEnvelopeBase58(e,t){if(e.length!==64)throw new hs(`Invalid signature length: ${e.length} (expected 64)`);const n=Uint8Array.of(1),i=new Uint8Array(n.length+e.length+t.length);return i.set(n,0),i.set(e,n.length),i.set(t,n.length+e.length),this.bs58Encoder.encode(i)}};const Dh={Dmk:Symbol.for("Dmk"),SessionId:Symbol.for("SessionId"),ContextModule:Symbol.for("ContextModule")};var iT=(r=>(r.LONG="long",r.SHORT="short",r))(iT||{});let iJ=class{name="getAppConfiguration";errorHelper=new Up(zp,qp);args;constructor(e){this.args=e}getApdu(){return new qa({cla:224,ins:4,p1:0,p2:0}).build()}parseResponse(e){return vn.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Oc(e).extractFieldByLength(5);if(!t||t.length!==5||t.some(i=>i===void 0))return Br({error:new hs("Invalid response")});const n={blindSigningEnabled:!!t[0],pubKeyDisplayMode:t[1]===0?iT.LONG:iT.SHORT,version:`${t[2]}.${t[3]}.${t[4]}`};return Br({data:n})})}};var wr=Rc(),eCe=D4();const Hi=zs(eCe);var on={};function Xc(r,e,t){return e<=r&&r<=t}function $w(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function tCe(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,c=o&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function rCe(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var zb=-1;function F6(r){this.tokens=[].slice.call(r)}F6.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():zb},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var ip=-1;function lA(r,e){if(r)throw TypeError("Decoder error");return e||65533}var qb="utf-8";function jb(r,e){if(!(this instanceof jb))return new jb(r,e);if(r=r!==void 0?String(r).toLowerCase():qb,r!==qb)throw new Error("Encoding not supported. Only utf-8 is supported");e=$w(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}jb.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=$w(t),this._streaming||(this._decoder=new nCe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new F6(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==ip);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===ip)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),rCe(s)}};function Vb(r,e){if(!(this instanceof Vb))return new Vb(r,e);if(r=r!==void 0?String(r).toLowerCase():qb,r!==qb)throw new Error("Encoding not supported. Only utf-8 is supported");e=$w(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Vb.prototype={encode:function(e,t){e=e?String(e):"",t=$w(t),this._streaming||(this._encoder=new iCe(this._options)),this._streaming=!!t.stream;for(var n=[],i=new F6(tCe(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==ip);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==ip;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function nCe(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(a,c){if(c===zb&&i!==0)return i=0,lA(e);if(c===zb)return ip;if(i===0){if(Xc(c,0,127))return c;if(Xc(c,194,223))i=1,t=c-192;else if(Xc(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Xc(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return lA(e);return t=t<<6*i,null}if(!Xc(c,s,o))return t=i=n=0,s=128,o=191,a.prepend(c),lA(e);if(s=128,o=191,n+=1,t+=c-128<<6*(i-n),n!==i)return null;var l=t;return t=i=n=0,l}}function iCe(r){r.fatal,this.handler=function(e,t){if(t===zb)return ip;if(Xc(t,0,127))return t;var n,i;Xc(t,128,2047)?(n=1,i=192):Xc(t,2048,65535)?(n=2,i=224):Xc(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}const sCe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:jb,TextEncoder:Vb},Symbol.toStringTag,{value:"Module"})),oCe=gp(sCe);var VL;function aCe(){if(VL)return on;VL=1;var r=on&&on.__createBinding||(Object.create?function(C,P,V,L){L===void 0&&(L=V),Object.defineProperty(C,L,{enumerable:!0,get:function(){return P[V]}})}:function(C,P,V,L){L===void 0&&(L=V),C[L]=P[V]}),e=on&&on.__setModuleDefault||(Object.create?function(C,P){Object.defineProperty(C,"default",{enumerable:!0,value:P})}:function(C,P){C.default=P}),t=on&&on.__decorate||function(C,P,V,L){var D=arguments.length,b=D<3?P:L===null?L=Object.getOwnPropertyDescriptor(P,V):L,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(C,P,V,L);else for(var B=C.length-1;B>=0;B--)(I=C[B])&&(b=(D<3?I(b):D>3?I(P,V,b):I(P,V))||b);return D>3&&b&&Object.defineProperty(P,V,b),b},n=on&&on.__importStar||function(C){if(C&&C.__esModule)return C;var P={};if(C!=null)for(var V in C)V!=="default"&&Object.hasOwnProperty.call(C,V)&&r(P,C,V);return e(P,C),P},i=on&&on.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(on,"__esModule",{value:!0}),on.deserializeUnchecked=on.deserialize=on.serialize=on.BinaryReader=on.BinaryWriter=on.BorshError=on.baseDecode=on.baseEncode=void 0;const s=i(MV()),o=i(D4()),a=n(oCe),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,l=new c("utf-8",{fatal:!0});function u(C){return typeof C=="string"&&(C=Ze.from(C,"utf8")),o.default.encode(Ze.from(C))}on.baseEncode=u;function f(C){return Ze.from(o.default.decode(C))}on.baseDecode=f;const d=1024;class h extends Error{constructor(P){super(P),this.fieldPath=[],this.originalMessage=P}addToFieldPath(P){this.fieldPath.splice(0,0,P),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}on.BorshError=h;class g{constructor(){this.buf=Ze.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Ze.concat([this.buf,Ze.alloc(d)]))}writeU8(P){this.maybeResize(),this.buf.writeUInt8(P,this.length),this.length+=1}writeU16(P){this.maybeResize(),this.buf.writeUInt16LE(P,this.length),this.length+=2}writeU32(P){this.maybeResize(),this.buf.writeUInt32LE(P,this.length),this.length+=4}writeU64(P){this.maybeResize(),this.writeBuffer(Ze.from(new s.default(P).toArray("le",8)))}writeU128(P){this.maybeResize(),this.writeBuffer(Ze.from(new s.default(P).toArray("le",16)))}writeU256(P){this.maybeResize(),this.writeBuffer(Ze.from(new s.default(P).toArray("le",32)))}writeU512(P){this.maybeResize(),this.writeBuffer(Ze.from(new s.default(P).toArray("le",64)))}writeBuffer(P){this.buf=Ze.concat([Ze.from(this.buf.subarray(0,this.length)),P,Ze.alloc(d)]),this.length+=P.length}writeString(P){this.maybeResize();const V=Ze.from(P,"utf8");this.writeU32(V.length),this.writeBuffer(V)}writeFixedArray(P){this.writeBuffer(Ze.from(P))}writeArray(P,V){this.maybeResize(),this.writeU32(P.length);for(const L of P)this.maybeResize(),V(L)}toArray(){return this.buf.subarray(0,this.length)}}on.BinaryWriter=g;function p(C,P,V){const L=V.value;V.value=function(...D){try{return L.apply(this,D)}catch(b){if(b instanceof RangeError){const I=b.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(I)>=0)throw new h("Reached the end of buffer when deserializing")}throw b}}}class m{constructor(P){this.buf=P,this.offset=0}readU8(){const P=this.buf.readUInt8(this.offset);return this.offset+=1,P}readU16(){const P=this.buf.readUInt16LE(this.offset);return this.offset+=2,P}readU32(){const P=this.buf.readUInt32LE(this.offset);return this.offset+=4,P}readU64(){const P=this.readBuffer(8);return new s.default(P,"le")}readU128(){const P=this.readBuffer(16);return new s.default(P,"le")}readU256(){const P=this.readBuffer(32);return new s.default(P,"le")}readU512(){const P=this.readBuffer(64);return new s.default(P,"le")}readBuffer(P){if(this.offset+P>this.buf.length)throw new h(`Expected buffer length ${P} isn't within bounds`);const V=this.buf.slice(this.offset,this.offset+P);return this.offset+=P,V}readString(){const P=this.readU32(),V=this.readBuffer(P);try{return l.decode(V)}catch(L){throw new h(`Error decoding UTF-8 string: ${L}`)}}readFixedArray(P){return new Uint8Array(this.readBuffer(P))}readArray(P){const V=this.readU32(),L=Array();for(let D=0;D<V;++D)L.push(P());return L}}t([p],m.prototype,"readU8",null),t([p],m.prototype,"readU16",null),t([p],m.prototype,"readU32",null),t([p],m.prototype,"readU64",null),t([p],m.prototype,"readU128",null),t([p],m.prototype,"readU256",null),t([p],m.prototype,"readU512",null),t([p],m.prototype,"readString",null),t([p],m.prototype,"readFixedArray",null),t([p],m.prototype,"readArray",null),on.BinaryReader=m;function y(C){return C.charAt(0).toUpperCase()+C.slice(1)}function v(C,P,V,L,D){try{if(typeof L=="string")D[`write${y(L)}`](V);else if(L instanceof Array)if(typeof L[0]=="number"){if(V.length!==L[0])throw new h(`Expecting byte array of length ${L[0]}, but got ${V.length} bytes`);D.writeFixedArray(V)}else if(L.length===2&&typeof L[1]=="number"){if(V.length!==L[1])throw new h(`Expecting byte array of length ${L[1]}, but got ${V.length} bytes`);for(let b=0;b<L[1];b++)v(C,null,V[b],L[0],D)}else D.writeArray(V,b=>{v(C,P,b,L[0],D)});else if(L.kind!==void 0)switch(L.kind){case"option":{V==null?D.writeU8(0):(D.writeU8(1),v(C,P,V,L.type,D));break}case"map":{D.writeU32(V.size),V.forEach((b,I)=>{v(C,P,I,L.key,D),v(C,P,b,L.value,D)});break}default:throw new h(`FieldType ${L} unrecognized`)}else w(C,V,D)}catch(b){throw b instanceof h&&b.addToFieldPath(P),b}}function w(C,P,V){if(typeof P.borshSerialize=="function"){P.borshSerialize(V);return}const L=C.get(P.constructor);if(!L)throw new h(`Class ${P.constructor.name} is missing in schema`);if(L.kind==="struct")L.fields.map(([D,b])=>{v(C,D,P[D],b,V)});else if(L.kind==="enum"){const D=P[L.field];for(let b=0;b<L.values.length;++b){const[I,B]=L.values[b];if(I===D){V.writeU8(b),v(C,I,P[I],B,V);break}}}else throw new h(`Unexpected schema kind: ${L.kind} for ${P.constructor.name}`)}function _(C,P,V=g){const L=new V;return w(C,P,L),L.toArray()}on.serialize=_;function x(C,P,V,L){try{if(typeof V=="string")return L[`read${y(V)}`]();if(V instanceof Array){if(typeof V[0]=="number")return L.readFixedArray(V[0]);if(typeof V[1]=="number"){const D=[];for(let b=0;b<V[1];b++)D.push(x(C,null,V[0],L));return D}else return L.readArray(()=>x(C,P,V[0],L))}if(V.kind==="option")return L.readU8()?x(C,P,V.type,L):void 0;if(V.kind==="map"){let D=new Map;const b=L.readU32();for(let I=0;I<b;I++){const B=x(C,P,V.key,L),F=x(C,P,V.value,L);D.set(B,F)}return D}return E(C,V,L)}catch(D){throw D instanceof h&&D.addToFieldPath(P),D}}function E(C,P,V){if(typeof P.borshDeserialize=="function")return P.borshDeserialize(V);const L=C.get(P);if(!L)throw new h(`Class ${P.name} is missing in schema`);if(L.kind==="struct"){const D={};for(const[b,I]of C.get(P).fields)D[b]=x(C,b,I,V);return new P(D)}if(L.kind==="enum"){const D=V.readU8();if(D>=L.values.length)throw new h(`Enum index: ${D} is out of range`);const[b,I]=L.values[D],B=x(C,b,I,V);return new P({[b]:B})}throw new h(`Unexpected schema kind: ${L.kind} for ${P.constructor.name}`)}function S(C,P,V,L=m){const D=new L(V),b=E(C,P,D);if(D.offset<V.length)throw new h(`Unexpected ${V.length-D.offset} bytes after deserialized data`);return b}on.deserialize=S;function T(C,P,V,L=m){const D=new L(V);return E(C,P,D)}return on.deserializeUnchecked=T,on}var uA=aCe(),Le={},KL;function cCe(){if(KL)return Le;KL=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.s16=Le.s8=Le.nu64be=Le.u48be=Le.u40be=Le.u32be=Le.u24be=Le.u16be=Le.nu64=Le.u48=Le.u40=Le.u32=Le.u24=Le.u16=Le.u8=Le.offset=Le.greedy=Le.Constant=Le.UTF8=Le.CString=Le.Blob=Le.Boolean=Le.BitField=Le.BitStructure=Le.VariantLayout=Le.Union=Le.UnionLayoutDiscriminator=Le.UnionDiscriminator=Le.Structure=Le.Sequence=Le.DoubleBE=Le.Double=Le.FloatBE=Le.Float=Le.NearInt64BE=Le.NearInt64=Le.NearUInt64BE=Le.NearUInt64=Le.IntBE=Le.Int=Le.UIntBE=Le.UInt=Le.OffsetLayout=Le.GreedyCount=Le.ExternalLayout=Le.bindConstructorLayout=Le.nameWithProperty=Le.Layout=Le.uint8ArrayToBuffer=Le.checkUint8Array=void 0,Le.constant=Le.utf8=Le.cstr=Le.blob=Le.unionLayoutDiscriminator=Le.union=Le.seq=Le.bits=Le.struct=Le.f64be=Le.f64=Le.f32be=Le.f32=Le.ns64be=Le.s48be=Le.s40be=Le.s32be=Le.s24be=Le.s16be=Le.ns64=Le.s48=Le.s40=Le.s32=Le.s24=void 0;const r=Rc();function e(O){if(!(O instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Le.checkUint8Array=e;function t(O){return e(O),r.Buffer.from(O.buffer,O.byteOffset,O.length)}Le.uint8ArrayToBuffer=t;let n=class{constructor(R,M){if(!Number.isInteger(R))throw new TypeError("span must be an integer");this.span=R,this.property=M}makeDestinationObject(){return{}}getSpan(R,M){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(R){const M=Object.create(this.constructor.prototype);return Object.assign(M,this),M.property=R,M}fromArray(R){}};Le.Layout=n;function i(O,R){return R.property?O+"["+R.property+"]":O}Le.nameWithProperty=i;function s(O,R){if(typeof O!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(O,"layout_"))throw new Error("Class is already bound to a layout");if(!(R&&R instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(R,"boundConstructor_"))throw new Error("layout is already bound to a constructor");O.layout_=R,R.boundConstructor_=O,R.makeDestinationObject=()=>new O,Object.defineProperty(O.prototype,"encode",{value(M,k){return R.encode(this,M,k)},writable:!0}),Object.defineProperty(O,"decode",{value(M,k){return R.decode(M,k)},writable:!0})}Le.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Le.ExternalLayout=o;class a extends o{constructor(R=1,M){if(!Number.isInteger(R)||0>=R)throw new TypeError("elementSpan must be a (positive) integer");super(-1,M),this.elementSpan=R}isCount(){return!0}decode(R,M=0){e(R);const k=R.length-M;return Math.floor(k/this.elementSpan)}encode(R,M,k){return 0}}Le.GreedyCount=a;class c extends o{constructor(R,M=0,k){if(!(R instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(M))throw new TypeError("offset must be integer or undefined");super(R.span,k||R.property),this.layout=R,this.offset=M}isCount(){return this.layout instanceof l||this.layout instanceof u}decode(R,M=0){return this.layout.decode(R,M+this.offset)}encode(R,M,k=0){return this.layout.encode(R,M,k+this.offset)}}Le.OffsetLayout=c;class l extends n{constructor(R,M){if(super(R,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,M=0){return t(R).readUIntLE(M,this.span)}encode(R,M,k=0){return t(M).writeUIntLE(R,k,this.span),this.span}}Le.UInt=l;class u extends n{constructor(R,M){if(super(R,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,M=0){return t(R).readUIntBE(M,this.span)}encode(R,M,k=0){return t(M).writeUIntBE(R,k,this.span),this.span}}Le.UIntBE=u;class f extends n{constructor(R,M){if(super(R,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,M=0){return t(R).readIntLE(M,this.span)}encode(R,M,k=0){return t(M).writeIntLE(R,k,this.span),this.span}}Le.Int=f;class d extends n{constructor(R,M){if(super(R,M),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(R,M=0){return t(R).readIntBE(M,this.span)}encode(R,M,k=0){return t(M).writeIntBE(R,k,this.span),this.span}}Le.IntBE=d;const h=Math.pow(2,32);function g(O){const R=Math.floor(O/h),M=O-R*h;return{hi32:R,lo32:M}}function p(O,R){return O*h+R}class m extends n{constructor(R){super(8,R)}decode(R,M=0){const k=t(R),j=k.readUInt32LE(M),te=k.readUInt32LE(M+4);return p(te,j)}encode(R,M,k=0){const j=g(R),te=t(M);return te.writeUInt32LE(j.lo32,k),te.writeUInt32LE(j.hi32,k+4),8}}Le.NearUInt64=m;class y extends n{constructor(R){super(8,R)}decode(R,M=0){const k=t(R),j=k.readUInt32BE(M),te=k.readUInt32BE(M+4);return p(j,te)}encode(R,M,k=0){const j=g(R),te=t(M);return te.writeUInt32BE(j.hi32,k),te.writeUInt32BE(j.lo32,k+4),8}}Le.NearUInt64BE=y;class v extends n{constructor(R){super(8,R)}decode(R,M=0){const k=t(R),j=k.readUInt32LE(M),te=k.readInt32LE(M+4);return p(te,j)}encode(R,M,k=0){const j=g(R),te=t(M);return te.writeUInt32LE(j.lo32,k),te.writeInt32LE(j.hi32,k+4),8}}Le.NearInt64=v;class w extends n{constructor(R){super(8,R)}decode(R,M=0){const k=t(R),j=k.readInt32BE(M),te=k.readUInt32BE(M+4);return p(j,te)}encode(R,M,k=0){const j=g(R),te=t(M);return te.writeInt32BE(j.hi32,k),te.writeUInt32BE(j.lo32,k+4),8}}Le.NearInt64BE=w;class _ extends n{constructor(R){super(4,R)}decode(R,M=0){return t(R).readFloatLE(M)}encode(R,M,k=0){return t(M).writeFloatLE(R,k),4}}Le.Float=_;class x extends n{constructor(R){super(4,R)}decode(R,M=0){return t(R).readFloatBE(M)}encode(R,M,k=0){return t(M).writeFloatBE(R,k),4}}Le.FloatBE=x;class E extends n{constructor(R){super(8,R)}decode(R,M=0){return t(R).readDoubleLE(M)}encode(R,M,k=0){return t(M).writeDoubleLE(R,k),8}}Le.Double=E;class S extends n{constructor(R){super(8,R)}decode(R,M=0){return t(R).readDoubleBE(M)}encode(R,M,k=0){return t(M).writeDoubleBE(R,k),8}}Le.DoubleBE=S;class T extends n{constructor(R,M,k){if(!(R instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(M instanceof o&&M.isCount()||Number.isInteger(M)&&0<=M))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let j=-1;!(M instanceof o)&&0<R.span&&(j=M*R.span),super(j,k),this.elementLayout=R,this.count=M}getSpan(R,M=0){if(0<=this.span)return this.span;let k=0,j=this.count;if(j instanceof o&&(j=j.decode(R,M)),0<this.elementLayout.span)k=j*this.elementLayout.span;else{let te=0;for(;te<j;)k+=this.elementLayout.getSpan(R,M+k),++te}return k}decode(R,M=0){const k=[];let j=0,te=this.count;for(te instanceof o&&(te=te.decode(R,M));j<te;)k.push(this.elementLayout.decode(R,M)),M+=this.elementLayout.getSpan(R,M),j+=1;return k}encode(R,M,k=0){const j=this.elementLayout,te=R.reduce((ae,he)=>ae+j.encode(he,M,k+ae),0);return this.count instanceof o&&this.count.encode(R.length,M,k),te}}Le.Sequence=T;class C extends n{constructor(R,M,k){if(!(Array.isArray(R)&&R.reduce((te,ae)=>te&&ae instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof M=="boolean"&&k===void 0&&(k=M,M=void 0);for(const te of R)if(0>te.span&&te.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let j=-1;try{j=R.reduce((te,ae)=>te+ae.getSpan(),0)}catch{}super(j,M),this.fields=R,this.decodePrefixes=!!k}getSpan(R,M=0){if(0<=this.span)return this.span;let k=0;try{k=this.fields.reduce((j,te)=>{const ae=te.getSpan(R,M);return M+=ae,j+ae},0)}catch{throw new RangeError("indeterminate span")}return k}decode(R,M=0){e(R);const k=this.makeDestinationObject();for(const j of this.fields)if(j.property!==void 0&&(k[j.property]=j.decode(R,M)),M+=j.getSpan(R,M),this.decodePrefixes&&R.length===M)break;return k}encode(R,M,k=0){const j=k;let te=0,ae=0;for(const he of this.fields){let re=he.span;if(ae=0<re?re:0,he.property!==void 0){const q=R[he.property];q!==void 0&&(ae=he.encode(q,M,k),0>re&&(re=he.getSpan(M,k)))}te=k,k+=re}return te+ae-j}fromArray(R){const M=this.makeDestinationObject();for(const k of this.fields)k.property!==void 0&&0<R.length&&(M[k.property]=R.shift());return M}layoutFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const M of this.fields)if(M.property===R)return M}offsetOf(R){if(typeof R!="string")throw new TypeError("property must be string");let M=0;for(const k of this.fields){if(k.property===R)return M;0>k.span?M=-1:0<=M&&(M+=k.span)}}}Le.Structure=C;class P{constructor(R){this.property=R}decode(R,M){throw new Error("UnionDiscriminator is abstract")}encode(R,M,k){throw new Error("UnionDiscriminator is abstract")}}Le.UnionDiscriminator=P;class V extends P{constructor(R,M){if(!(R instanceof o&&R.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(M||R.property||"variant"),this.layout=R}decode(R,M){return this.layout.decode(R,M)}encode(R,M,k){return this.layout.encode(R,M,k)}}Le.UnionLayoutDiscriminator=V;class L extends n{constructor(R,M,k){let j;if(R instanceof l||R instanceof u)j=new V(new c(R));else if(R instanceof o&&R.isCount())j=new V(R);else if(R instanceof P)j=R;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(M===void 0&&(M=null),!(M===null||M instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(M!==null){if(0>M.span)throw new Error("defaultLayout must have constant span");M.property===void 0&&(M=M.replicate("content"))}let te=-1;M&&(te=M.span,0<=te&&(R instanceof l||R instanceof u)&&(te+=j.layout.span)),super(te,k),this.discriminator=j,this.usesPrefixDiscriminator=R instanceof l||R instanceof u,this.defaultLayout=M,this.registry={};let ae=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return ae(he)},this.configGetSourceVariant=function(he){ae=he.bind(this)}}getSpan(R,M=0){if(0<=this.span)return this.span;const k=this.getVariant(R,M);if(!k)throw new Error("unable to determine span for unrecognized variant");return k.getSpan(R,M)}defaultGetSourceVariant(R){if(Object.prototype.hasOwnProperty.call(R,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(R,this.defaultLayout.property))return;const M=this.registry[R[this.discriminator.property]];if(M&&(!M.layout||M.property&&Object.prototype.hasOwnProperty.call(R,M.property)))return M}else for(const M in this.registry){const k=this.registry[M];if(k.property&&Object.prototype.hasOwnProperty.call(R,k.property))return k}throw new Error("unable to infer src variant")}decode(R,M=0){let k;const j=this.discriminator,te=j.decode(R,M),ae=this.registry[te];if(ae===void 0){const he=this.defaultLayout;let re=0;this.usesPrefixDiscriminator&&(re=j.layout.span),k=this.makeDestinationObject(),k[j.property]=te,k[he.property]=he.decode(R,M+re)}else k=ae.decode(R,M);return k}encode(R,M,k=0){const j=this.getSourceVariant(R);if(j===void 0){const te=this.discriminator,ae=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=te.layout.span),te.encode(R[te.property],M,k),he+ae.encode(R[ae.property],M,k+he)}return j.encode(R,M,k)}addVariant(R,M,k){const j=new D(this,R,M,k);return this.registry[R]=j,j}getVariant(R,M=0){let k;return R instanceof Uint8Array?k=this.discriminator.decode(R,M):k=R,this.registry[k]}}Le.Union=L;class D extends n{constructor(R,M,k,j){if(!(R instanceof L))throw new TypeError("union must be a Union");if(!Number.isInteger(M)||0>M)throw new TypeError("variant must be a (non-negative) integer");if(typeof k=="string"&&j===void 0&&(j=k,k=null),k){if(!(k instanceof n))throw new TypeError("layout must be a Layout");if(R.defaultLayout!==null&&0<=k.span&&k.span>R.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof j!="string")throw new TypeError("variant must have a String property")}let te=R.span;0>R.span&&(te=k?k.span:0,0<=te&&R.usesPrefixDiscriminator&&(te+=R.discriminator.layout.span)),super(te,j),this.union=R,this.variant=M,this.layout=k||null}getSpan(R,M=0){if(0<=this.span)return this.span;let k=0;this.union.usesPrefixDiscriminator&&(k=this.union.discriminator.layout.span);let j=0;return this.layout&&(j=this.layout.getSpan(R,M+k)),k+j}decode(R,M=0){const k=this.makeDestinationObject();if(this!==this.union.getVariant(R,M))throw new Error("variant mismatch");let j=0;return this.union.usesPrefixDiscriminator&&(j=this.union.discriminator.layout.span),this.layout?k[this.property]=this.layout.decode(R,M+j):this.property?k[this.property]=!0:this.union.usesPrefixDiscriminator&&(k[this.union.discriminator.property]=this.variant),k}encode(R,M,k=0){let j=0;if(this.union.usesPrefixDiscriminator&&(j=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(R,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,M,k);let te=j;if(this.layout&&(this.layout.encode(R[this.property],M,k+j),te+=this.layout.getSpan(M,k+j),0<=this.union.span&&te>this.union.span))throw new Error("encoded variant overruns containing union");return te}fromArray(R){if(this.layout)return this.layout.fromArray(R)}}Le.VariantLayout=D;function b(O){return 0>O&&(O+=4294967296),O}class I extends n{constructor(R,M,k){if(!(R instanceof l||R instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof M=="string"&&k===void 0&&(k=M,M=!1),4<R.span)throw new RangeError("word cannot exceed 32 bits");super(R.span,k),this.word=R,this.msb=!!M,this.fields=[];let j=0;this._packedSetValue=function(te){return j=b(te),this},this._packedGetValue=function(){return j}}decode(R,M=0){const k=this.makeDestinationObject(),j=this.word.decode(R,M);this._packedSetValue(j);for(const te of this.fields)te.property!==void 0&&(k[te.property]=te.decode(R));return k}encode(R,M,k=0){const j=this.word.decode(M,k);this._packedSetValue(j);for(const te of this.fields)if(te.property!==void 0){const ae=R[te.property];ae!==void 0&&te.encode(ae)}return this.word.encode(this._packedGetValue(),M,k)}addField(R,M){const k=new B(this,R,M);return this.fields.push(k),k}addBoolean(R){const M=new F(this,R);return this.fields.push(M),M}fieldFor(R){if(typeof R!="string")throw new TypeError("property must be string");for(const M of this.fields)if(M.property===R)return M}}Le.BitStructure=I;class B{constructor(R,M,k){if(!(R instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(M)||0>=M)throw new TypeError("bits must be positive integer");const j=8*R.span,te=R.fields.reduce((ae,he)=>ae+he.bits,0);if(M+te>j)throw new Error("bits too long for span remainder ("+(j-te)+" of "+j+" remain)");this.container=R,this.bits=M,this.valueMask=(1<<M)-1,M===32&&(this.valueMask=4294967295),this.start=te,this.container.msb&&(this.start=j-te-M),this.wordMask=b(this.valueMask<<this.start),this.property=k}decode(R,M){const k=this.container._packedGetValue();return b(k&this.wordMask)>>>this.start}encode(R){if(typeof R!="number"||!Number.isInteger(R)||R!==b(R&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const M=this.container._packedGetValue(),k=b(R<<this.start);this.container._packedSetValue(b(M&~this.wordMask)|k)}}Le.BitField=B;class F extends B{constructor(R,M){super(R,1,M)}decode(R,M){return!!super.decode(R,M)}encode(R){typeof R=="boolean"&&(R=+R),super.encode(R)}}Le.Boolean=F;class z extends n{constructor(R,M){if(!(R instanceof o&&R.isCount()||Number.isInteger(R)&&0<=R))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let k=-1;R instanceof o||(k=R),super(k,M),this.length=R}getSpan(R,M){let k=this.span;return 0>k&&(k=this.length.decode(R,M)),k}decode(R,M=0){let k=this.span;return 0>k&&(k=this.length.decode(R,M)),t(R).slice(M,M+k)}encode(R,M,k){let j=this.length;if(this.length instanceof o&&(j=R.length),!(R instanceof Uint8Array&&j===R.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+j+") Uint8Array as src");if(k+j>M.length)throw new RangeError("encoding overruns Uint8Array");const te=t(R);return t(M).write(te.toString("hex"),k,j,"hex"),this.length instanceof o&&this.length.encode(j,M,k),j}}Le.Blob=z;class G extends n{constructor(R){super(-1,R)}getSpan(R,M=0){e(R);let k=M;for(;k<R.length&&R[k]!==0;)k+=1;return 1+k-M}decode(R,M=0){const k=this.getSpan(R,M);return t(R).slice(M,M+k-1).toString("utf-8")}encode(R,M,k=0){typeof R!="string"&&(R=String(R));const j=r.Buffer.from(R,"utf8"),te=j.length;if(k+te>M.length)throw new RangeError("encoding overruns Buffer");const ae=t(M);return j.copy(ae,k),ae[k+te]=0,te+1}}Le.CString=G;class Q extends n{constructor(R,M){if(typeof R=="string"&&M===void 0&&(M=R,R=void 0),R===void 0)R=-1;else if(!Number.isInteger(R))throw new TypeError("maxSpan must be an integer");super(-1,M),this.maxSpan=R}getSpan(R,M=0){return e(R),R.length-M}decode(R,M=0){const k=this.getSpan(R,M);if(0<=this.maxSpan&&this.maxSpan<k)throw new RangeError("text length exceeds maxSpan");return t(R).slice(M,M+k).toString("utf-8")}encode(R,M,k=0){typeof R!="string"&&(R=String(R));const j=r.Buffer.from(R,"utf8"),te=j.length;if(0<=this.maxSpan&&this.maxSpan<te)throw new RangeError("text length exceeds maxSpan");if(k+te>M.length)throw new RangeError("encoding overruns Buffer");return j.copy(t(M),k),te}}Le.UTF8=Q;class X extends n{constructor(R,M){super(0,M),this.value=R}decode(R,M){return this.value}encode(R,M,k){return 0}}return Le.Constant=X,Le.greedy=(O,R)=>new a(O,R),Le.offset=(O,R,M)=>new c(O,R,M),Le.u8=O=>new l(1,O),Le.u16=O=>new l(2,O),Le.u24=O=>new l(3,O),Le.u32=O=>new l(4,O),Le.u40=O=>new l(5,O),Le.u48=O=>new l(6,O),Le.nu64=O=>new m(O),Le.u16be=O=>new u(2,O),Le.u24be=O=>new u(3,O),Le.u32be=O=>new u(4,O),Le.u40be=O=>new u(5,O),Le.u48be=O=>new u(6,O),Le.nu64be=O=>new y(O),Le.s8=O=>new f(1,O),Le.s16=O=>new f(2,O),Le.s24=O=>new f(3,O),Le.s32=O=>new f(4,O),Le.s40=O=>new f(5,O),Le.s48=O=>new f(6,O),Le.ns64=O=>new v(O),Le.s16be=O=>new d(2,O),Le.s24be=O=>new d(3,O),Le.s32be=O=>new d(4,O),Le.s40be=O=>new d(5,O),Le.s48be=O=>new d(6,O),Le.ns64be=O=>new w(O),Le.f32=O=>new _(O),Le.f32be=O=>new x(O),Le.f64=O=>new E(O),Le.f64be=O=>new S(O),Le.struct=(O,R,M)=>new C(O,R,M),Le.bits=(O,R,M)=>new I(O,R,M),Le.seq=(O,R,M)=>new T(O,R,M),Le.union=(O,R,M)=>new L(O,R,M),Le.unionLayoutDiscriminator=(O,R)=>new V(O,R),Le.blob=(O,R)=>new z(O,R),Le.cstr=O=>new G(O),Le.utf8=(O,R)=>new Q(O,R),Le.constant=(O,R)=>new X(O,R),Le}var Se=cCe();class lCe extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...o}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function uCe(r){return Vm(r)&&typeof r[Symbol.iterator]=="function"}function Vm(r){return typeof r=="object"&&r!=null}function Kb(r){return Vm(r)&&!Array.isArray(r)}function Ba(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function fCe(r){const{done:e,value:t}=r.next();return e?void 0:t}function dCe(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ba(n)}\``}=r;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*HL(r,e,t,n){uCe(r)||(r=[r]);for(const i of r){const s=dCe(i,e,t,n);s&&(yield s)}}function*U6(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,a={path:n,branch:i,mask:o};s&&(r=e.coercer(r,a));let c="valid";for(const l of e.validator(r,a))l.explanation=t.message,c="not_valid",yield[l,void 0];for(let[l,u,f]of e.entries(r,a)){const d=U6(u,f,{path:l===void 0?n:[...n,l],branch:l===void 0?i:[...i,u],coerce:s,mask:o,message:t.message});for(const h of d)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):s&&(u=h[1],l===void 0?r=u:r instanceof Map?r.set(l,u):r instanceof Set?r.add(u):Vm(r)&&(u!==void 0||l in r)&&(r[l]=u))}if(c!=="not_valid")for(const l of e.refiner(r,a))l.explanation=t.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,r])}let $c=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(c,l)=>{const u=i(c,l);return HL(u,l,this,c)}:this.validator=()=>[],s?this.refiner=(c,l)=>{const u=s(c,l);return HL(u,l,this,c)}:this.refiner=()=>[]}assert(e,t){return hCe(e,this,t)}create(e,t){return yt(e,this,t)}is(e){return sJ(e,this)}mask(e,t){return pCe(e,this,t)}validate(e,t={}){return Km(e,this,t)}};function hCe(r,e,t){const n=Km(r,e,{message:t});if(n[0])throw n[0]}function yt(r,e,t){const n=Km(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function pCe(r,e,t){const n=Km(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function sJ(r,e){return!Km(r,e)[0]}function Km(r,e,t={}){const n=U6(r,e,t),i=fCe(n);return i[0]?[new lCe(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function xd(r,e){return new $c({type:r,schema:null,validator:e})}function gCe(){return xd("any",()=>!0)}function wt(r){return new $c({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ba(e)}`}})}function wc(){return xd("boolean",r=>typeof r=="boolean")}function z6(r){return xd("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ba(e)}`)}function Mn(r){const e=Ba(r),t=typeof r;return new $c({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Ba(n)}`}})}function mCe(){return xd("never",()=>!1)}function St(r){return new $c({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Be(){return xd("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ba(r)}`)}function Wt(r){return new $c({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function oJ(r,e){return new $c({type:"record",schema:null,*entries(t){if(Vm(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return Kb(t)||`Expected an object, but received: ${Ba(t)}`},coercer(t){return Kb(t)?{...t}:t}})}function ht(){return xd("string",r=>typeof r=="string"||`Expected a string, but received: ${Ba(r)}`)}function q6(r){const e=mCe();return new $c({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Ba(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function rt(r){const e=Object.keys(r);return new $c({type:"type",schema:r,*entries(t){if(Vm(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Kb(t)||`Expected an object, but received: ${Ba(t)}`},coercer(t){return Kb(t)?{...t}:t}})}function Us(r){const e=r.map(t=>t.type).join(" | ");return new $c({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,o]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return o}return t},validator(t,n){const i=[];for(const s of r){const[...o]=U6(t,s,n),[a]=o;if(a[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ba(t)}`,...i]}})}function jp(){return xd("unknown",()=>!0)}function Hm(r,e,t){return new $c({...r,coercer:(n,i)=>sJ(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var fA,WL;function yCe(){if(WL)return fA;WL=1;const r=rw.v4;return fA=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return r()};a.id=c(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},fA}var dA,GL;function vCe(){if(GL)return dA;GL=1;const r=rw.v4,e=yCe(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return dA=t,t.prototype.request=function(n,i,s,o){const a=this;let c=null;const l=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&l)throw new TypeError("JSON-RPC 1.0 does not support batching");if(l||!l&&n&&typeof n=="object"&&typeof i=="function")o=i,c=n;else{typeof s=="function"&&(o=s,s=void 0);const d=typeof o=="function";try{c=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(d)return o(h);throw h}if(!d)return c}let f;try{f=JSON.stringify(c,this.options.replacer)}catch(d){return o(d)}return this.callServer(f,function(d,h){a._parseResponse(d,h,o)}),c},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){return s(a)}if(s.length===3)if(Array.isArray(o)){const a=function(l){return typeof l.error<"u"},c=function(l){return!a(l)};return s(null,o.filter(a),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},dA}var bCe=vCe();const wCe=zs(bCe);var xCe=class extends Pm{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(i){n(i)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function _Ce(r,e){return new xCe(r,e)}var SCe=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},ECe=class extends Pm{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new SCe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(r,e),a={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,c=>{if(c)return s(c);this.queue[o]={promise:[i,s]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(i),s=>{if(s)return n(s);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=wr.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let i=0;i<t.params.length;i++)n.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};ul.utils.randomPrivateKey;ul.getPublicKey;function YL(r){try{return ul.ExtendedPoint.fromHex(r),!0}catch{return!1}}const aJ=(r,e)=>ul.sign(r,e.slice(0,32)),ACe=ul.verify,Fi=r=>wr.Buffer.isBuffer(r)?r:r instanceof Uint8Array?wr.Buffer.from(r.buffer,r.byteOffset,r.byteLength):wr.Buffer.from(r);class ICe{constructor(e){Object.assign(this,e)}encode(){return wr.Buffer.from(uA.serialize(Fv,this))}static decode(e){return uA.deserialize(Fv,this,e)}static decodeUnchecked(e){return uA.deserializeUnchecked(Fv,this,e)}}const Fv=new Map;var cJ;const CCe=32,Eu=32;function TCe(r){return r._bn!==void 0}let JL=1;class Nt extends ICe{constructor(e){if(super({}),this._bn=void 0,TCe(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Hi.decode(e);if(t.length!=Eu)throw new Error("Invalid public key input");this._bn=new sr(t)}else this._bn=new sr(e);if(this._bn.byteLength()>Eu)throw new Error("Invalid public key input")}}static unique(){const e=new Nt(JL);return JL+=1,new Nt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Hi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(wr.Buffer);if(e.length===Eu)return e;const t=wr.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=wr.Buffer.concat([e.toBuffer(),wr.Buffer.from(t),n.toBuffer()]),s=lO(i);return new Nt(s)}static createProgramAddressSync(e,t){let n=wr.Buffer.alloc(0);e.forEach(function(s){if(s.length>CCe)throw new TypeError("Max seed length exceeded");n=wr.Buffer.concat([n,Fi(s)])}),n=wr.Buffer.concat([n,t.toBuffer(),wr.Buffer.from("ProgramDerivedAddress")]);const i=lO(n);if(YL(i))throw new Error("Invalid seeds, address must fall off the curve");return new Nt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(wr.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Nt(e);return YL(t.toBytes())}}cJ=Nt;Nt.default=new cJ("11111111111111111111111111111111");Fv.set(Nt,{kind:"struct",fields:[["_bn","u256"]]});new Nt("BPFLoader1111111111111111111111111111111111");const Mh=1232,j6=127,Hb=64;class lJ extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(lJ.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class uJ extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(uJ.prototype,"name",{value:"TransactionExpiredTimeoutError"});class X0 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(X0.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Wb{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Ur=(r="publicKey")=>Se.blob(32,r),RCe=(r="signature")=>Se.blob(64,r),bh=(r="string")=>{const e=Se.struct([Se.u32("length"),Se.u32("lengthPadding"),Se.blob(Se.offset(Se.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const c={chars:wr.Buffer.from(s,"utf8")};return n(c,o,a)},i.alloc=s=>Se.u32().span+Se.u32().span+wr.Buffer.from(s,"utf8").length,i},kCe=(r="authorized")=>Se.struct([Ur("staker"),Ur("withdrawer")],r),OCe=(r="lockup")=>Se.struct([Se.ns64("unixTimestamp"),Se.ns64("epoch"),Ur("custodian")],r),PCe=(r="voteInit")=>Se.struct([Ur("nodePubkey"),Ur("authorizedVoter"),Ur("authorizedWithdrawer"),Se.u8("commission")],r),$Ce=(r="voteAuthorizeWithSeedArgs")=>Se.struct([Se.u32("voteAuthorizationType"),Ur("currentAuthorityDerivedKeyOwnerPubkey"),bh("currentAuthorityDerivedKeySeed"),Ur("newAuthorized")],r);function fJ(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return fJ({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function xo(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function _o(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function kn(r,e){if(!r)throw new Error(e||"Assertion failed")}class Dw{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const a=o.toBase58();let c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new Dw(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];kn(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{kn(t.length>0,"Expected at least one writable signer key");const[c]=t[0];kn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new Nt(c)),...n.map(([c])=>new Nt(c)),...i.map(([c])=>new Nt(c)),...s.map(([c])=>new Nt(c))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new Nt(s),c=e.findIndex(l=>l.equals(a));c>=0&&(kn(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}const dJ="Reached end of buffer unexpectedly";function Zc(r){if(r.length===0)throw new Error(dJ);return r.shift()}function So(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(dJ);return r.splice(...e)}class _l{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Nt(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Hi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Wb(this.staticAccountKeys)}static compile(e){const t=Dw.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Wb(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Hi.encode(a.data)}));return new _l({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];_o(t,e);const n=this.instructions.map(f=>{const{accounts:d,programIdIndex:h}=f,g=Array.from(Hi.decode(f.data));let p=[];_o(p,d.length);let m=[];return _o(m,g.length),{programIdIndex:h,keyIndicesCount:wr.Buffer.from(p),keyIndices:d,dataLength:wr.Buffer.from(m),data:g}});let i=[];_o(i,n.length);let s=wr.Buffer.alloc(Mh);wr.Buffer.from(i).copy(s);let o=i.length;n.forEach(f=>{const h=Se.struct([Se.u8("programIdIndex"),Se.blob(f.keyIndicesCount.length,"keyIndicesCount"),Se.seq(Se.u8("keyIndex"),f.keyIndices.length,"keyIndices"),Se.blob(f.dataLength.length,"dataLength"),Se.seq(Se.u8("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=h}),s=s.slice(0,o);const a=Se.struct([Se.blob(1,"numRequiredSignatures"),Se.blob(1,"numReadonlySignedAccounts"),Se.blob(1,"numReadonlyUnsignedAccounts"),Se.blob(t.length,"keyCount"),Se.seq(Ur("key"),e,"keys"),Ur("recentBlockhash")]),c={numRequiredSignatures:wr.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:wr.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:wr.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:wr.Buffer.from(t),keys:this.accountKeys.map(f=>Fi(f.toBytes())),recentBlockhash:Hi.decode(this.recentBlockhash)};let l=wr.Buffer.alloc(2048);const u=a.encode(c,l);return s.copy(l,u),l.slice(0,u+s.length)}static from(e){let t=[...e];const n=Zc(t);if(n!==(n&j6))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Zc(t),s=Zc(t),o=xo(t);let a=[];for(let d=0;d<o;d++){const h=So(t,0,Eu);a.push(new Nt(wr.Buffer.from(h)))}const c=So(t,0,Eu),l=xo(t);let u=[];for(let d=0;d<l;d++){const h=Zc(t),g=xo(t),p=So(t,0,g),m=xo(t),y=So(t,0,m),v=Hi.encode(wr.Buffer.from(y));u.push({programIdIndex:h,accounts:p,data:v})}const f={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Hi.encode(wr.Buffer.from(c)),accountKeys:a,instructions:u};return new _l(f)}}class nm{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Wb(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Dw.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const f=t.extractTableLookup(u);if(f!==void 0){const[d,{writable:h,readonly:g}]=f;n.push(d),i.writable.push(...h),i.readonly.push(...g)}}const[o,a]=t.getMessageComponents(),l=new Wb(a,i).compileInstructions(e.instructions);return new nm({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:n})}serialize(){const e=Array();_o(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();_o(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();_o(s,this.addressTableLookups.length);const o=Se.struct([Se.u8("prefix"),Se.struct([Se.u8("numRequiredSignatures"),Se.u8("numReadonlySignedAccounts"),Se.u8("numReadonlyUnsignedAccounts")],"header"),Se.blob(e.length,"staticAccountKeysLength"),Se.seq(Ur(),this.staticAccountKeys.length,"staticAccountKeys"),Ur("recentBlockhash"),Se.blob(n.length,"instructionsLength"),Se.blob(t.length,"serializedInstructions"),Se.blob(s.length,"addressTableLookupsLength"),Se.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Mh),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:Hi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,l)}serializeInstructions(){let e=0;const t=new Uint8Array(Mh);for(const n of this.compiledInstructions){const i=Array();_o(i,n.accountKeyIndexes.length);const s=Array();_o(s,n.data.length);const o=Se.struct([Se.u8("programIdIndex"),Se.blob(i.length,"encodedAccountKeyIndexesLength"),Se.seq(Se.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),Se.blob(s.length,"encodedDataLength"),Se.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Mh);for(const n of this.addressTableLookups){const i=Array();_o(i,n.writableIndexes.length);const s=Array();_o(s,n.readonlyIndexes.length);const o=Se.struct([Ur("accountKey"),Se.blob(i.length,"encodedWritableIndexesLength"),Se.seq(Se.u8(),n.writableIndexes.length,"writableIndexes"),Se.blob(s.length,"encodedReadonlyIndexesLength"),Se.seq(Se.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Zc(t),i=n&j6;kn(n!==i,"Expected versioned message but received legacy message");const s=i;kn(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Zc(t),numReadonlySignedAccounts:Zc(t),numReadonlyUnsignedAccounts:Zc(t)},a=[],c=xo(t);for(let g=0;g<c;g++)a.push(new Nt(So(t,0,Eu)));const l=Hi.encode(So(t,0,Eu)),u=xo(t),f=[];for(let g=0;g<u;g++){const p=Zc(t),m=xo(t),y=So(t,0,m),v=xo(t),w=new Uint8Array(So(t,0,v));f.push({programIdIndex:p,accountKeyIndexes:y,data:w})}const d=xo(t),h=[];for(let g=0;g<d;g++){const p=new Nt(So(t,0,Eu)),m=xo(t),y=So(t,0,m),v=xo(t),w=So(t,0,v);h.push({accountKey:p,writableIndexes:y,readonlyIndexes:w})}return new nm({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:f,addressTableLookups:h})}}const V6={deserializeMessageVersion(r){const e=r[0],t=e&j6;return t===e?"legacy":t},deserialize:r=>{const e=V6.deserializeMessageVersion(r);if(e==="legacy")return _l.from(r);if(e===0)return nm.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Hl=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const DCe=wr.Buffer.alloc(Hb).fill(0);class mo{constructor(e){this.keys=void 0,this.programId=void 0,this.data=wr.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class na{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new mo(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let p=0;p<t.length;p++)if(t[p].programId===void 0)throw new Error(`Transaction instruction index ${p} has undefined program id`);const i=[],s=[];t.forEach(p=>{p.keys.forEach(y=>{s.push({...y})});const m=p.programId.toString();i.includes(m)||i.push(m)}),i.forEach(p=>{s.push({pubkey:new Nt(p),isSigner:!1,isWritable:!1})});const o=[];s.forEach(p=>{const m=p.pubkey.toString(),y=o.findIndex(v=>v.pubkey.toString()===m);y>-1?(o[y].isWritable=o[y].isWritable||p.isWritable,o[y].isSigner=o[y].isSigner||p.isSigner):o.push(p)}),o.sort(function(p,m){if(p.isSigner!==m.isSigner)return p.isSigner?-1:1;if(p.isWritable!==m.isWritable)return p.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return p.pubkey.toBase58().localeCompare(m.pubkey.toBase58(),"en",y)});const a=o.findIndex(p=>p.pubkey.equals(n));if(a>-1){const[p]=o.splice(a,1);p.isSigner=!0,p.isWritable=!0,o.unshift(p)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const p of this.signatures){const m=o.findIndex(y=>y.pubkey.equals(p.publicKey));if(m>-1)o[m].isSigner||(o[m].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${p.publicKey.toString()}`)}let c=0,l=0,u=0;const f=[],d=[];o.forEach(({pubkey:p,isSigner:m,isWritable:y})=>{m?(f.push(p.toString()),c+=1,y||(l+=1)):(d.push(p.toString()),y||(u+=1))});const h=f.concat(d),g=t.map(p=>{const{data:m,programId:y}=p;return{programIdIndex:h.indexOf(y.toString()),accounts:p.keys.map(v=>h.indexOf(v.pubkey.toString())),data:Hi.encode(m)}});return g.forEach(p=>{kn(p.programIdIndex>=0),p.accounts.forEach(m=>kn(m>=0))}),new _l({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:h,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=aJ(n,i.secretKey);this._addSignature(i.publicKey,Fi(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){kn(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=wr.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||=[]).push(s):ACe(i,e,s.toBytes())||(n.invalid||=[]).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];_o(n,t.length);const i=n.length+t.length*64+e.length,s=wr.Buffer.alloc(i);return kn(t.length<256),wr.Buffer.from(n).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(kn(o.length===64,"signature has invalid length"),wr.Buffer.from(o).copy(s,n.length+a*64))}),e.copy(s,n.length+t.length*64),kn(s.length<=Mh,`Transaction too large: ${s.length} > ${Mh}`),s}get keys(){return kn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return kn(this.instructions.length===1),this.instructions[0].programId}get data(){return kn(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=xo(t);let i=[];for(let s=0;s<n;s++){const o=So(t,0,Hb);i.push(Hi.encode(wr.Buffer.from(o)))}return na.populate(_l.from(t),i)}static populate(e,t=[]){const n=new na;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==Hi.encode(DCe)?null:Hi.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new mo({keys:s,programId:e.accountKeys[i.programIdIndex],data:Hi.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class K6{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)kn(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Hb));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();_o(t,this.signatures.length);const n=Se.struct([Se.blob(t.length,"encodedSignaturesLength"),Se.seq(RCe(),this.signatures.length,"signatures"),Se.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=xo(t);for(let o=0;o<i;o++)n.push(new Uint8Array(So(t,0,Hb)));const s=V6.deserialize(new Uint8Array(t));return new K6(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));kn(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=aJ(t,i.secretKey)}}addSignature(e,t){kn(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));kn(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const MCe=160,BCe=64,NCe=MCe/BCe,LCe=1e3/NCe;new Nt("SysvarC1ock11111111111111111111111111111111");new Nt("SysvarEpochSchedu1e111111111111111111111111");new Nt("Sysvar1nstructions1111111111111111111111111");const hA=new Nt("SysvarRecentB1ockHashes11111111111111111111"),sT=new Nt("SysvarRent111111111111111111111111111111111");new Nt("SysvarRewards111111111111111111111111111111");new Nt("SysvarS1otHashes111111111111111111111111111");new Nt("SysvarS1otHistory11111111111111111111111111");new Nt("SysvarStakeHistory1111111111111111111111111");class XL extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class zt extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function lh(r){return new Promise(e=>setTimeout(e,r))}function Wo(r,e){const t=r.layout.span>=0?r.layout.span:fJ(r,e),n=wr.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const FCe=Se.nu64("lamportsPerSignature"),hJ=Se.struct([Se.u32("version"),Se.u32("state"),Ur("authorizedPubkey"),Ur("nonce"),Se.struct([FCe],"feeCalculator")]),ZL=hJ.span;class H6{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=hJ.decode(Fi(e),0);return new H6({authorizedPubkey:new Nt(t.authorizedPubkey),nonce:new Nt(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function sp(r){const e=Se.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,s=$ne();return i.decode=(o,a)=>{const c=t(o,a);return s.decode(c)},i.encode=(o,a,c)=>{const l=s.encode(o);return n(l,a,c)},i}const Go=Object.freeze({Create:{index:0,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports"),Se.ns64("space"),Ur("programId")])},Assign:{index:1,layout:Se.struct([Se.u32("instruction"),Ur("programId")])},Transfer:{index:2,layout:Se.struct([Se.u32("instruction"),sp("lamports")])},CreateWithSeed:{index:3,layout:Se.struct([Se.u32("instruction"),Ur("base"),bh("seed"),Se.ns64("lamports"),Se.ns64("space"),Ur("programId")])},AdvanceNonceAccount:{index:4,layout:Se.struct([Se.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Se.struct([Se.u32("instruction"),Ur("authorized")])},AuthorizeNonceAccount:{index:7,layout:Se.struct([Se.u32("instruction"),Ur("authorized")])},Allocate:{index:8,layout:Se.struct([Se.u32("instruction"),Se.ns64("space")])},AllocateWithSeed:{index:9,layout:Se.struct([Se.u32("instruction"),Ur("base"),bh("seed"),Se.ns64("space"),Ur("programId")])},AssignWithSeed:{index:10,layout:Se.struct([Se.u32("instruction"),Ur("base"),bh("seed"),Ur("programId")])},TransferWithSeed:{index:11,layout:Se.struct([Se.u32("instruction"),sp("lamports"),bh("seed"),Ur("programId")])},UpgradeNonceAccount:{index:12,layout:Se.struct([Se.u32("instruction")])}});class op{constructor(){}static createAccount(e){const t=Go.Create,n=Wo(t,{lamports:e.lamports,space:e.space,programId:Fi(e.programId.toBuffer())});return new mo({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Go.TransferWithSeed;t=Wo(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Fi(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Go.Transfer;t=Wo(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new mo({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Go.AssignWithSeed;t=Wo(i,{base:Fi(e.basePubkey.toBuffer()),seed:e.seed,programId:Fi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Go.Assign;t=Wo(i,{programId:Fi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mo({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Go.CreateWithSeed,n=Wo(t,{base:Fi(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Fi(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new mo({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new na;"basePubkey"in e&&"seed"in e?t.add(op.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ZL,programId:this.programId})):t.add(op.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ZL,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Go.InitializeNonceAccount,n=Wo(t,{authorized:Fi(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hA,isSigner:!1,isWritable:!1},{pubkey:sT,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new mo(i)}static nonceAdvance(e){const t=Go.AdvanceNonceAccount,n=Wo(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hA,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new mo(i)}static nonceWithdraw(e){const t=Go.WithdrawNonceAccount,n=Wo(t,{lamports:e.lamports});return new mo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:hA,isSigner:!1,isWritable:!1},{pubkey:sT,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Go.AuthorizeNonceAccount,n=Wo(t,{authorized:Fi(e.newAuthorizedPubkey.toBuffer())});return new mo({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Go.AllocateWithSeed;t=Wo(i,{base:Fi(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Fi(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Go.Allocate;t=Wo(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mo({keys:n,programId:this.programId,data:t})}}op.programId=new Nt("11111111111111111111111111111111");new Nt("BPFLoader2111111111111111111111111111111111");function UCe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pA,QL;function zCe(){if(QL)return pA;QL=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,o,a,c,l,u,f;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(f=r.call(n),f==="[object Array]"){for(a="[",o=n.length-1,s=0;s<o;s++)a+=t(n[s],!0)+",";return o>-1&&(a+=t(n[s],!0)),a+"]"}else if(f==="[object Object]"){for(c=e(n).sort(),o=c.length,a="",s=0;s<o;)l=c[s],u=t(n[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return pA=function(n){var i=t(n,!1);if(i!==void 0)return""+i},pA}var qCe=zCe(),eF=UCe(qCe);const O0=32;function gA(r){let e=0;for(;r>1;)r/=2,e++;return e}function jCe(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class VCe{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=gA(jCe(e+O0+1))-gA(O0)-1,n=this.getSlotsInEpoch(t),i=e-(n-O0);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*O0:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+gA(O0)):this.slotsPerEpoch}}var KCe=globalThis.fetch;class HCe extends ECe{constructor(e,t,n){const i=s=>{const o=_Ce(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function WCe(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const tF=56;class rF{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=WCe(GCe,e),n=e.length-tF;kn(n>=0,"lookup table is invalid"),kn(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Se.struct([Se.seq(Ur(),i,"addresses")]).decode(e.slice(tF));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Nt(t.authority[0]):void 0,addresses:s.map(o=>new Nt(o))}}}const GCe={index:1,layout:Se.struct([Se.u32("typeIndex"),sp("deactivationSlot"),Se.nu64("lastExtendedSlot"),Se.u8("lastExtendedStartIndex"),Se.u8(),Se.seq(Ur(),Se.offset(Se.u8(),-1),"authority")])},YCe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function JCe(r){const e=r.match(YCe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${n}${c}${s}`}const Ln=Hm(z6(Nt),ht(),r=>new Nt(r)),pJ=q6([ht(),Mn("base64")]),W6=Hm(z6(wr.Buffer),pJ,r=>wr.Buffer.from(r[0],"base64")),XCe=30*1e3;function ZCe(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function wn(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function nF(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function gJ(r){return Us([rt({jsonrpc:Mn("2.0"),id:ht(),result:r}),rt({jsonrpc:Mn("2.0"),id:ht(),error:rt({code:jp(),message:ht(),data:Wt(gCe())})})])}const QCe=gJ(jp());function Rr(r){return Hm(gJ(r),QCe,e=>"error"in e?e:{...e,result:yt(e.result,r)})}function Xn(r){return Rr(rt({context:rt({slot:Be()}),value:r}))}function Mw(r){return rt({context:rt({slot:Be()}),value:r})}function mA(r,e){return r===0?new nm({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Nt(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Hi.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new _l(e)}const e3e=rt({foundation:Be(),foundationTerm:Be(),initial:Be(),taper:Be(),terminal:Be()}),t3e=Rr(wt(St(rt({epoch:Be(),effectiveSlot:Be(),amount:Be(),postBalance:Be(),commission:Wt(St(Be()))})))),r3e=wt(rt({slot:Be(),prioritizationFee:Be()})),n3e=rt({total:Be(),validator:Be(),foundation:Be(),epoch:Be()}),i3e=rt({epoch:Be(),slotIndex:Be(),slotsInEpoch:Be(),absoluteSlot:Be(),blockHeight:Wt(Be()),transactionCount:Wt(Be())}),s3e=rt({slotsPerEpoch:Be(),leaderScheduleSlotOffset:Be(),warmup:wc(),firstNormalEpoch:Be(),firstNormalSlot:Be()}),o3e=oJ(ht(),wt(Be())),_d=St(Us([rt({}),ht()])),a3e=rt({err:_d}),c3e=Mn("receivedSignature"),l3e=rt({"solana-core":ht(),"feature-set":Wt(Be())}),u3e=rt({program:ht(),programId:Ln,parsed:jp()}),f3e=rt({programId:Ln,accounts:wt(Ln),data:ht()}),iF=Xn(rt({err:St(Us([rt({}),ht()])),logs:St(wt(ht())),accounts:Wt(St(wt(St(rt({executable:wc(),owner:ht(),lamports:Be(),data:wt(ht()),rentEpoch:Wt(Be())}))))),unitsConsumed:Wt(Be()),returnData:Wt(St(rt({programId:ht(),data:q6([ht(),Mn("base64")])}))),innerInstructions:Wt(St(wt(rt({index:Be(),instructions:wt(Us([u3e,f3e]))}))))})),d3e=Xn(rt({byIdentity:oJ(ht(),wt(Be())),range:rt({firstSlot:Be(),lastSlot:Be()})}));function h3e(r,e,t,n,i,s){const o=t||KCe;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(u,f)=>{const d=await new Promise((h,g)=>{try{n(u,f,(p,m)=>h([p,m]))}catch(p){g(p)}});return await o(...d)}),new wCe(async(u,f)=>{const d={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},hTe)};try{let h=5,g,p=500;for(;c?g=await c(r,d):g=await o(r,d),!(g.status!==429||i===!0||(h-=1,h===0));)console.error(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${p}ms delay...`),await lh(p),p*=2;const m=await g.text();g.ok?f(null,m):f(new Error(`${g.status} ${g.statusText}: ${m}`))}catch(h){h instanceof Error&&f(h)}},{})}function p3e(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function g3e(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const m3e=Rr(e3e),y3e=Rr(n3e),v3e=Rr(r3e),b3e=Rr(i3e),w3e=Rr(s3e),x3e=Rr(o3e),_3e=Rr(Be()),S3e=Xn(rt({total:Be(),circulating:Be(),nonCirculating:Be(),nonCirculatingAccounts:wt(Ln)})),oT=rt({amount:ht(),uiAmount:St(Be()),decimals:Be(),uiAmountString:Wt(ht())}),E3e=Xn(wt(rt({address:Ln,amount:ht(),uiAmount:St(Be()),decimals:Be(),uiAmountString:Wt(ht())}))),A3e=Xn(wt(rt({pubkey:Ln,account:rt({executable:wc(),owner:Ln,lamports:Be(),data:W6,rentEpoch:Be()})}))),aT=rt({program:ht(),parsed:jp(),space:Be()}),I3e=Xn(wt(rt({pubkey:Ln,account:rt({executable:wc(),owner:Ln,lamports:Be(),data:aT,rentEpoch:Be()})}))),C3e=Xn(wt(rt({lamports:Be(),address:Ln}))),im=rt({executable:wc(),owner:Ln,lamports:Be(),data:W6,rentEpoch:Be()}),T3e=rt({pubkey:Ln,account:im}),R3e=Hm(Us([z6(wr.Buffer),aT]),Us([pJ,aT]),r=>Array.isArray(r)?yt(r,W6):r),cT=rt({executable:wc(),owner:Ln,lamports:Be(),data:R3e,rentEpoch:Be()}),k3e=rt({pubkey:Ln,account:cT}),O3e=rt({state:Us([Mn("active"),Mn("inactive"),Mn("activating"),Mn("deactivating")]),active:Be(),inactive:Be()}),P3e=Rr(wt(rt({signature:ht(),slot:Be(),err:_d,memo:St(ht()),blockTime:Wt(St(Be()))}))),$3e=Rr(wt(rt({signature:ht(),slot:Be(),err:_d,memo:St(ht()),blockTime:Wt(St(Be()))}))),D3e=rt({subscription:Be(),result:Mw(im)}),M3e=rt({pubkey:Ln,account:im}),B3e=rt({subscription:Be(),result:Mw(M3e)}),N3e=rt({parent:Be(),slot:Be(),root:Be()}),L3e=rt({subscription:Be(),result:N3e}),F3e=Us([rt({type:Us([Mn("firstShredReceived"),Mn("completed"),Mn("optimisticConfirmation"),Mn("root")]),slot:Be(),timestamp:Be()}),rt({type:Mn("createdBank"),parent:Be(),slot:Be(),timestamp:Be()}),rt({type:Mn("frozen"),slot:Be(),timestamp:Be(),stats:rt({numTransactionEntries:Be(),numSuccessfulTransactions:Be(),numFailedTransactions:Be(),maxTransactionsPerEntry:Be()})}),rt({type:Mn("dead"),slot:Be(),timestamp:Be(),err:ht()})]),U3e=rt({subscription:Be(),result:F3e}),z3e=rt({subscription:Be(),result:Mw(Us([a3e,c3e]))}),q3e=rt({subscription:Be(),result:Be()}),j3e=rt({pubkey:ht(),gossip:St(ht()),tpu:St(ht()),rpc:St(ht()),version:St(ht())}),sF=rt({votePubkey:ht(),nodePubkey:ht(),activatedStake:Be(),epochVoteAccount:wc(),epochCredits:wt(q6([Be(),Be(),Be()])),commission:Be(),lastVote:Be(),rootSlot:St(Be())}),V3e=Rr(rt({current:wt(sF),delinquent:wt(sF)})),K3e=Us([Mn("processed"),Mn("confirmed"),Mn("finalized")]),H3e=rt({slot:Be(),confirmations:St(Be()),err:_d,confirmationStatus:Wt(K3e)}),W3e=Xn(wt(St(H3e))),G3e=Rr(Be()),mJ=rt({accountKey:Ln,writableIndexes:wt(Be()),readonlyIndexes:wt(Be())}),G6=rt({signatures:wt(ht()),message:rt({accountKeys:wt(ht()),header:rt({numRequiredSignatures:Be(),numReadonlySignedAccounts:Be(),numReadonlyUnsignedAccounts:Be()}),instructions:wt(rt({accounts:wt(Be()),data:ht(),programIdIndex:Be()})),recentBlockhash:ht(),addressTableLookups:Wt(wt(mJ))})}),yJ=rt({pubkey:Ln,signer:wc(),writable:wc(),source:Wt(Us([Mn("transaction"),Mn("lookupTable")]))}),vJ=rt({accountKeys:wt(yJ),signatures:wt(ht())}),bJ=rt({parsed:jp(),program:ht(),programId:Ln}),wJ=rt({accounts:wt(Ln),data:ht(),programId:Ln}),Y3e=Us([wJ,bJ]),J3e=Us([rt({parsed:jp(),program:ht(),programId:ht()}),rt({accounts:wt(ht()),data:ht(),programId:ht()})]),xJ=Hm(Y3e,J3e,r=>"accounts"in r?yt(r,wJ):yt(r,bJ)),_J=rt({signatures:wt(ht()),message:rt({accountKeys:wt(yJ),instructions:wt(xJ),recentBlockhash:ht(),addressTableLookups:Wt(St(wt(mJ)))})}),Gb=rt({accountIndex:Be(),mint:ht(),owner:Wt(ht()),programId:Wt(ht()),uiTokenAmount:oT}),SJ=rt({writable:wt(Ln),readonly:wt(Ln)}),Bw=rt({err:_d,fee:Be(),innerInstructions:Wt(St(wt(rt({index:Be(),instructions:wt(rt({accounts:wt(Be()),data:ht(),programIdIndex:Be()}))})))),preBalances:wt(Be()),postBalances:wt(Be()),logMessages:Wt(St(wt(ht()))),preTokenBalances:Wt(St(wt(Gb))),postTokenBalances:Wt(St(wt(Gb))),loadedAddresses:Wt(SJ),computeUnitsConsumed:Wt(Be()),costUnits:Wt(Be())}),Y6=rt({err:_d,fee:Be(),innerInstructions:Wt(St(wt(rt({index:Be(),instructions:wt(xJ)})))),preBalances:wt(Be()),postBalances:wt(Be()),logMessages:Wt(St(wt(ht()))),preTokenBalances:Wt(St(wt(Gb))),postTokenBalances:Wt(St(wt(Gb))),loadedAddresses:Wt(SJ),computeUnitsConsumed:Wt(Be()),costUnits:Wt(Be())}),Vp=Us([Mn(0),Mn("legacy")]),Sd=rt({pubkey:ht(),lamports:Be(),postBalance:St(Be()),rewardType:St(ht()),commission:Wt(St(Be()))}),X3e=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),transactions:wt(rt({transaction:G6,meta:St(Bw),version:Wt(Vp)})),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),Z3e=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),Q3e=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),transactions:wt(rt({transaction:vJ,meta:St(Bw),version:Wt(Vp)})),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),eTe=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),transactions:wt(rt({transaction:_J,meta:St(Y6),version:Wt(Vp)})),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),tTe=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),transactions:wt(rt({transaction:vJ,meta:St(Y6),version:Wt(Vp)})),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),rTe=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),rewards:Wt(wt(Sd)),blockTime:St(Be()),blockHeight:St(Be())}))),nTe=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),transactions:wt(rt({transaction:G6,meta:St(Bw)})),rewards:Wt(wt(Sd)),blockTime:St(Be())}))),oF=Rr(St(rt({blockhash:ht(),previousBlockhash:ht(),parentSlot:Be(),signatures:wt(ht()),blockTime:St(Be())}))),yA=Rr(St(rt({slot:Be(),meta:St(Bw),blockTime:Wt(St(Be())),transaction:G6,version:Wt(Vp)}))),Ky=Rr(St(rt({slot:Be(),transaction:_J,meta:St(Y6),blockTime:Wt(St(Be())),version:Wt(Vp)}))),iTe=Xn(rt({blockhash:ht(),lastValidBlockHeight:Be()})),sTe=Xn(wc()),oTe=rt({slot:Be(),numTransactions:Be(),numSlots:Be(),samplePeriodSecs:Be()}),aTe=Rr(wt(oTe)),cTe=Xn(St(rt({feeCalculator:rt({lamportsPerSignature:Be()})}))),lTe=Rr(ht()),uTe=Rr(ht()),fTe=rt({err:_d,logs:wt(ht()),signature:ht()}),dTe=rt({result:Mw(fTe),subscription:Be()}),hTe={"solana-client":"js/1.0.0-maintenance"};class pTe{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:f,config:d}=wn(u),h=this._buildArgs([],f,void 0,d),g=eF(h);return l[g]=l[g]??(async()=>{try{const p=await this._rpcRequest("getBlockHeight",h),m=yt(p,Rr(Be()));if("error"in m)throw new zt(m.error,"failed to get block height information");return m.result}finally{delete l[g]}})(),await l[g]}})();let n,i,s,o,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=ZCe(e),this._rpcWsEndpoint=n||JCe(e),this._rpcClient=h3e(e,i,s,o,a,c),this._rpcRequest=p3e(this._rpcClient),this._rpcBatchRequest=g3e(this._rpcClient),this._rpcWebSocket=new HCe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=yt(o,Xn(Be()));if("error"in a)throw new zt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=yt(t,Rr(St(Be())));if("error"in n)throw new zt(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=yt(e,Rr(Be()));if("error"in t)throw new zt(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=yt(e,_3e);if("error"in t)throw new zt(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=yt(n,S3e);if("error"in i)throw new zt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=yt(i,Xn(oT));if("error"in s)throw new zt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=yt(i,Xn(oT));if("error"in s)throw new zt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=wn(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=yt(c,A3e);if("error"in l)throw new zt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=yt(o,I3e);if("error"in a)throw new zt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=yt(i,C3e);if("error"in s)throw new zt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=yt(i,E3e);if("error"in s)throw new zt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=yt(o,Xn(St(im)));if("error"in a)throw new zt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=yt(o,Xn(St(cT)));if("error"in a)throw new zt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=wn(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),c=yt(a,Xn(wt(St(cT))));if("error"in c)throw new zt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=wn(t),s=e.map(l=>l.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),c=yt(a,Xn(wt(St(im))));if("error"in c)throw new zt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=wn(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??s?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=yt(a,Rr(O3e));if("error"in c)throw new zt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=wn(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:nF(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=wt(T3e),u=o.withContext===!0?yt(c,Xn(l)):yt(c,Rr(l));if("error"in u)throw new zt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=yt(o,Rr(wt(k3e)));if("error"in a)throw new zt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let i;try{i=Hi.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return kn(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((c,l)=>{try{n=this.onSignature(t,(f,d)=>{n=void 0;const h={context:d,value:f};c({__type:Hl.PROCESSED,response:h})},e);const u=new Promise(f=>{n==null?f():i=this._onSubscriptionStateChange(n,d=>{d==="subscribed"&&f()})});(async()=>{if(await u,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:d,value:h}=f;if(h!=null)if(h?.err)l(h.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(h.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(h.confirmationStatus==="processed"||h.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:Hl.PROCESSED,response:{context:d,value:h}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(f=>{const d=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let h=await d();if(!s){for(;h<=n;)if(await lh(1e3),s||(h=await d(),s))return;f({__type:Hl.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),l=this.getCancellationPromise(t);let u;try{const f=await Promise.race([l,c,o]);if(f.__type===Hl.PROCESSED)u=f.response;else throw new lJ(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const c=new Promise(h=>{let g=s,p=null;const m=async()=>{try{const{context:y,value:v}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return p=y.slot,v?.nonce}catch{return g}};(async()=>{if(g=await m(),!a)for(;;){if(s!==g){h({__type:Hl.NONCE_INVALID,slotInWhichNonceDidAdvance:p});return}if(await lh(2e3),a||(g=await m(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);let d;try{const h=await Promise.race([f,u,c]);if(h.__type===Hl.PROCESSED)d=h.response;else{let g;for(;;){const p=await this.getSignatureStatus(o);if(p==null)break;if(p.context.slot<(h.slotInWhichNonceDidAdvance??n)){await lh(400);continue}g=p;break}if(g?.value){const p=e||"finalized",{confirmationStatus:m}=g.value;switch(p){case"processed":case"recent":if(m!=="processed"&&m!=="confirmed"&&m!=="finalized")throw new X0(o);break;case"confirmed":case"single":case"singleGossip":if(m!=="confirmed"&&m!=="finalized")throw new X0(o);break;case"finalized":case"max":case"root":if(m!=="finalized")throw new X0(o);break;default:}d={context:g.context,value:{err:g.value.err}}}else throw new X0(o)}}finally{a=!0,l()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Hl.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([o,i]);if(c.__type===Hl.PROCESSED)a=c.response;else throw new uJ(t,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=yt(e,Rr(wt(j3e)));if("error"in t)throw new zt(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=yt(n,V3e);if("error"in i)throw new zt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=yt(s,Rr(Be()));if("error"in o)throw new zt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=yt(s,Rr(ht()));if("error"in o)throw new zt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=yt(i,Rr(wt(Ln)));if("error"in s)throw new zt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);kn(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=yt(i,W3e);if("error"in s)throw new zt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=yt(s,Rr(Be()));if("error"in o)throw new zt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=yt(n,m3e);if("error"in i)throw new zt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=wn(n),o=this._buildArgs([e.map(l=>l.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=yt(a,t3e);if("error"in c)throw new zt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=yt(e,y3e);if("error"in t)throw new zt(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=yt(s,b3e);if("error"in o)throw new zt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=yt(e,w3e);if("error"in t)throw new zt(t.error,"failed to get epoch schedule");const n=t.result;return new VCe(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=yt(e,x3e);if("error"in t)throw new zt(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=yt(i,G3e);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=yt(t,aTe);if("error"in n)throw new zt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=yt(i,cTe);if("error"in s)throw new zt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=Fi(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=yt(s,Xn(St(Be())));if("error"in o)throw new zt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=yt(i,v3e);if("error"in s)throw new zt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=yt(s,iTe);if("error"in o)throw new zt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=yt(o,sTe);if("error"in a)throw new zt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=yt(e,Rr(l3e));if("error"in t)throw new zt(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=yt(e,Rr(ht()));if("error"in t)throw new zt(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=yt(o,Q3e);if("error"in a)throw a.error;return a.result}case"none":{const a=yt(o,Z3e);if("error"in a)throw a.error;return a.result}default:{const a=yt(o,X3e);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:f})=>({meta:u,transaction:{...l,message:mA(f,l.message)},version:f}))}:null}}}catch(a){throw new zt(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const a=yt(o,tTe);if("error"in a)throw a.error;return a.result}case"none":{const a=yt(o,rTe);if("error"in a)throw a.error;return a.result}default:{const a=yt(o,eTe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new zt(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...c}=e;n=a,t=c}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=yt(s,d3e);if("error"in o)throw new zt(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=yt(o,yA);if("error"in a)throw new zt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:mA(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=wn(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=yt(o,Ky);if("error"in a)throw new zt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=wn(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=yt(c,Ky);if("error"in l)throw new zt(l.error,"failed to get transactions");return l.result})}async getTransactions(e,t){const{commitment:n,config:i}=wn(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const l=yt(c,yA);if("error"in l)throw new zt(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:mA(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=yt(i,nTe);if("error"in s)throw new zt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new _l(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:na.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=yt(s,Rr(wt(Be())));if("error"in o)throw new zt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=yt(i,oF);if("error"in s)throw new zt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=yt(i,oF);if("error"in s)throw new zt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=yt(i,yA);if("error"in s)throw new zt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new _l(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:na.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=yt(i,Ky);if("error"in s)throw new zt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=yt(o,Ky);if("error"in a)throw new zt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=yt(s,P3e);if("error"in o)throw new zt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=yt(s,$3e);if("error"in o)throw new zt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new rF({key:e,state:rF.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=H6.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=yt(n,lTe);if("error"in i)throw new zt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await lh(100);const n=Date.now()-this._blockhashInfo.lastFetch>=XCe;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await lh(LCe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=wn(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=yt(s,Xn(Be()));if("error"in o)throw new zt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const p=e.serialize(),m=wr.Buffer.from(p).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const y=t||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(y.innerInstructions=t.innerInstructions);const v=[m,y],w=await this._rpcRequest("simulateTransaction",v),_=yt(w,iF);if("error"in _)throw new Error("failed to simulate transaction: "+_.error.message);return _.result}let i;if(e instanceof na){let g=e;i=new na,i.feePayer=g.feePayer,i.instructions=e.instructions,i.nonceInfo=g.nonceInfo,i.signatures=g.signatures}else i=na.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let g=this._disableBlockhashCaching;for(;;){const p=await this._blockhashWithExpiryBlockHeight(g);if(i.lastValidBlockHeight=p.lastValidBlockHeight,i.recentBlockhash=p.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const m=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(m)&&!this._blockhashInfo.transactionSignatures.includes(m)){this._blockhashInfo.simulatedSignatures.push(m);break}else g=!0}}const o=i._compile(),a=o.serialize(),l=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const g=(Array.isArray(n)?n:o.nonProgramIds()).map(p=>p.toBase58());u.accounts={encoding:"base64",addresses:g}}s&&(u.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const f=[l,u],d=await this._rpcRequest("simulateTransaction",f),h=yt(d,iF);if("error"in h){let g;if("data"in h.error&&(g=h.error.data.logs,g&&Array.isArray(g))){const p=`
    `,m=p+g.join(p);console.error(h.error.message,m)}throw new XL({action:"simulate",signature:"",transactionMessage:h.error.message,logs:g})}return h.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Fi(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),c=yt(a,uTe);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new XL({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=yt(e,D3e);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=eF([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];kn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=wn(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=yt(e,B3e);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:o}=wn(n),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:nF(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=yt(e,dTe);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=yt(e,L3e);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=yt(e,U3e);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=yt(e,z3e);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(c,l)=>{t(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=yt(e,q3e);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Se.struct([Se.u32("instruction"),sp("recentSlot"),Se.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Se.struct([Se.u32("instruction")])},ExtendLookupTable:{index:2,layout:Se.struct([Se.u32("instruction"),sp(),Se.seq(Ur(),Se.offset(Se.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Se.struct([Se.u32("instruction")])},CloseLookupTable:{index:4,layout:Se.struct([Se.u32("instruction")])}});new Nt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Se.struct([Se.u8("instruction"),Se.u32("units"),Se.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Se.struct([Se.u8("instruction"),Se.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Se.struct([Se.u8("instruction"),Se.u32("units")])},SetComputeUnitPrice:{index:3,layout:Se.struct([Se.u8("instruction"),sp("microLamports")])}});new Nt("ComputeBudget111111111111111111111111111111");Se.struct([Se.u8("numSignatures"),Se.u8("padding"),Se.u16("signatureOffset"),Se.u16("signatureInstructionIndex"),Se.u16("publicKeyOffset"),Se.u16("publicKeyInstructionIndex"),Se.u16("messageDataOffset"),Se.u16("messageDataSize"),Se.u16("messageInstructionIndex")]);new Nt("Ed25519SigVerify111111111111111111111111111");Ole.utils.isValidPrivateKey;Se.struct([Se.u8("numSignatures"),Se.u16("signatureOffset"),Se.u8("signatureInstructionIndex"),Se.u16("ethAddressOffset"),Se.u8("ethAddressInstructionIndex"),Se.u16("messageDataOffset"),Se.u16("messageDataSize"),Se.u8("messageInstructionIndex"),Se.blob(20,"ethAddress"),Se.blob(64,"signature"),Se.u8("recoveryId")]);new Nt("KeccakSecp256k11111111111111111111111111111");var EJ;new Nt("StakeConfig11111111111111111111111111111111");class AJ{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}EJ=AJ;AJ.default=new EJ(0,0,Nt.default);Object.freeze({Initialize:{index:0,layout:Se.struct([Se.u32("instruction"),kCe(),OCe()])},Authorize:{index:1,layout:Se.struct([Se.u32("instruction"),Ur("newAuthorized"),Se.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Se.struct([Se.u32("instruction")])},Split:{index:3,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},Withdraw:{index:4,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},Deactivate:{index:5,layout:Se.struct([Se.u32("instruction")])},Merge:{index:7,layout:Se.struct([Se.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Se.struct([Se.u32("instruction"),Ur("newAuthorized"),Se.u32("stakeAuthorizationType"),bh("authoritySeed"),Ur("authorityOwner")])}});new Nt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Se.struct([Se.u32("instruction"),PCe()])},Authorize:{index:1,layout:Se.struct([Se.u32("instruction"),Ur("newAuthorized"),Se.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Se.struct([Se.u32("instruction"),Se.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Se.struct([Se.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Se.struct([Se.u32("instruction"),$Ce()])}});new Nt("Vote111111111111111111111111111111111111111");new Nt("Va1idator1nfo111111111111111111111111111111");rt({name:ht(),website:Wt(ht()),details:Wt(ht()),iconUrl:Wt(ht()),keybaseUsername:Wt(ht())});new Nt("Vote111111111111111111111111111111111111111");Se.struct([Ur("nodePubkey"),Ur("authorizedWithdrawer"),Se.u8("commission"),Se.nu64(),Se.seq(Se.struct([Se.nu64("slot"),Se.u32("confirmationCount")]),Se.offset(Se.u32(),-8),"votes"),Se.u8("rootSlotValid"),Se.nu64("rootSlot"),Se.nu64(),Se.seq(Se.struct([Se.nu64("epoch"),Ur("authorizedVoter")]),Se.offset(Se.u32(),-8),"authorizedVoters"),Se.struct([Se.seq(Se.struct([Ur("authorizedPubkey"),Se.nu64("epochOfLastAuthorizedSwitch"),Se.nu64("targetEpoch")]),32,"buf"),Se.nu64("idx"),Se.u8("isEmpty")],"priorVoters"),Se.nu64(),Se.seq(Se.struct([Se.nu64("epoch"),Se.nu64("credits"),Se.nu64("prevCredits")]),Se.offset(Se.u32(),-8),"epochCredits"),Se.struct([Se.nu64("slot"),Se.nu64("timestamp")],"lastTimestamp")]);const si=new Nt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),xf=new Nt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),mu=new Nt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Nt("So11111111111111111111111111111111111111112");new Nt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const J6=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var ff={},aF;function gTe(){if(aF)return ff;aF=1,Object.defineProperty(ff,"__esModule",{value:!0});function r(i){{const s=Ze.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}ff.toBigIntLE=r;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}ff.toBigIntBE=e;function t(i,s){{const o=i.toString(16),a=Ze.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}ff.toBufferLE=t;function n(i,s){{const o=i.toString(16);return Ze.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return ff.toBufferBE=n,ff}var cF=gTe();const mTe=r=>e=>{const t=Se.blob(r,e),{encode:n,decode:i}=J6(t),s=t;return s.decode=(o,a)=>{const c=i(o,a);return cF.toBigIntLE(Ze.from(c))},s.encode=(o,a,c)=>{const l=cF.toBufferLE(o,r);return n(l,a,c)},s},Sl=mTe(8),yTe=r=>{const e=Se.u8(r),{encode:t,decode:n}=J6(e),i=e;return i.decode=(s,o)=>!!n(s,o),i.encode=(s,o,a)=>{const c=Number(s);return t(c,o,a)},i},sm=r=>{const e=Se.blob(32,r),{encode:t,decode:n}=J6(e),i=e;return i.decode=(s,o)=>{const a=n(s,o);return new Nt(a)},i.encode=(s,o,a)=>{const c=s.toBuffer();return t(c,o,a)},i};class Wm extends Error{constructor(e){super(e)}}class vTe extends Wm{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class Lo extends Wm{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class Fo extends Wm{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class Uo extends Wm{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class zo extends Wm{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}var As;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2",r[r.GetAccountDataSize=21]="GetAccountDataSize",r[r.InitializeImmutableOwner=22]="InitializeImmutableOwner",r[r.AmountToUiAmount=23]="AmountToUiAmount",r[r.UiAmountToAmount=24]="UiAmountToAmount",r[r.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",r[r.TransferFeeExtension=26]="TransferFeeExtension",r[r.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",r[r.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",r[r.Reallocate=29]="Reallocate",r[r.MemoTransferExtension=30]="MemoTransferExtension",r[r.CreateNativeMint=31]="CreateNativeMint",r[r.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",r[r.InterestBearingMintExtension=33]="InterestBearingMintExtension",r[r.CpiGuardExtension=34]="CpiGuardExtension",r[r.InitializePermanentDelegate=35]="InitializePermanentDelegate",r[r.TransferHookExtension=36]="TransferHookExtension",r[r.MetadataPointerExtension=39]="MetadataPointerExtension",r[r.GroupPointerExtension=40]="GroupPointerExtension",r[r.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",r[r.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",r[r.PausableExtension=44]="PausableExtension"})(As||(As={}));function bTe(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of t)r.push({pubkey:n instanceof Nt?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}class lF extends Se.Layout{constructor(e){super(-1,e),this.publicKeyLayout=sm()}decode(e,t=0){return e[t]===0?null:this.publicKeyLayout.decode(e,t+1)}encode(e,t,n=0){return e===null?(t[n]=0,1):(t[n]=1,this.publicKeyLayout.encode(e,t,n+1),33)}getSpan(e,t=0){if(e)return e[t]===0?1:1+this.publicKeyLayout.span;throw new RangeError("Buffer must be provided")}}var lT;(function(r){r[r.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",r[r.TransferCheckedWithFee=1]="TransferCheckedWithFee",r[r.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",r[r.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",r[r.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",r[r.SetTransferFee=5]="SetTransferFee"})(lT||(lT={}));Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),new lF("transferFeeConfigAuthority"),new lF("withdrawWithheldAuthority"),Se.u16("transferFeeBasisPoints"),Sl("maximumFee")]);const IJ=Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),Sl("amount"),Se.u8("decimals"),Sl("fee")]);function wTe(r,e){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==IJ.span)throw new Uo;const{keys:{source:t,mint:n,destination:i,authority:s,signers:o},data:a}=xTe(r);if(a.instruction!==As.TransferFeeExtension||a.transferFeeInstruction!==lT.TransferCheckedWithFee)throw new zo;if(!n)throw new Fo;return{programId:e,keys:{source:t,mint:n,destination:i,authority:s,signers:o||null},data:a}}function xTe({programId:r,keys:[e,t,n,i,...s],data:o}){const{instruction:a,transferFeeInstruction:c,amount:l,decimals:u,fee:f}=IJ.decode(o);return{programId:r,keys:{source:e,mint:t,destination:n,authority:i,signers:s},data:{instruction:a,transferFeeInstruction:c,amount:l,decimals:u,fee:f}}}Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),Se.u8("numTokenAccounts")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction")]);Se.struct([Se.u8("instruction"),Se.u8("transferFeeInstruction"),Se.u16("transferFeeBasisPoints"),Sl("maximumFee")]);const Yb=Se.struct([Se.u8("instruction"),Sl("amount"),Se.u8("decimals")]);function _Te(r,e,t,n,i,s,o=[],a=si){const c=bTe([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],n,o),l=Ze.alloc(Yb.span);return Yb.encode({instruction:As.TransferChecked,amount:BigInt(i),decimals:s},l),new mo({keys:c,programId:a,data:l})}function STe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==Yb.span)throw new Uo;const{keys:{source:t,mint:n,destination:i,owner:s,multiSigners:o},data:a}=ETe(r);if(a.instruction!==As.TransferChecked)throw new zo;if(!t||!n||!i||!s)throw new Fo;return{programId:e,keys:{source:t,mint:n,destination:i,owner:s,multiSigners:o},data:a}}function ETe({programId:r,keys:[e,t,n,i,...s],data:o}){return{programId:r,keys:{source:e,mint:t,destination:n,owner:i,multiSigners:s},data:Yb.decode(o)}}const ATe=Se.struct([Se.u32("mintAuthorityOption"),sm("mintAuthority"),Sl("supply"),Se.u8("decimals"),yTe("isInitialized"),Se.u32("freezeAuthorityOption"),sm("freezeAuthority")]);ATe.span;function uT(r,e,t=!1,n=si,i=mu){if(!t&&!Nt.isOnCurve(e.toBuffer()))throw new vTe;const[s]=Nt.findProgramAddressSync([e.toBuffer(),n.toBuffer(),r.toBuffer()],i);return s}const CJ=Se.struct([Se.u8("instruction"),Sl("amount")]);function ITe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==CJ.span)throw new Uo;const{keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}=CTe(r);if(o.instruction!==As.Burn)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}}function CTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:CJ.decode(s)}}const TJ=Se.struct([Se.u8("instruction"),Sl("amount"),Se.u8("decimals")]);function TTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==TJ.span)throw new Uo;const{keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}=RTe(r);if(o.instruction!==As.BurnChecked)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,mint:n,owner:i,multiSigners:s},data:o}}function RTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,multiSigners:i},data:TJ.decode(s)}}const RJ=Se.struct([Se.u8("instruction")]);function kTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==RJ.span)throw new Uo;const{keys:{account:t,destination:n,authority:i,multiSigners:s},data:o}=OTe(r);if(o.instruction!==As.CloseAccount)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,destination:n,authority:i,multiSigners:s},data:o}}function OTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,destination:t,authority:n,multiSigners:i},data:RJ.decode(s)}}const kJ=Se.struct([Se.u8("instruction")]);function PTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==kJ.span)throw new Uo;const{keys:{account:t,mint:n,owner:i,rent:s},data:o}=$Te(r);if(o.instruction!==As.InitializeAccount)throw new zo;if(!t||!n||!i||!s)throw new Fo;return{programId:e,keys:{account:t,mint:n,owner:i,rent:s},data:o}}function $Te({programId:r,keys:[e,t,n,i],data:s}){return{programId:r,keys:{account:e,mint:t,owner:n,rent:i},data:kJ.decode(s)}}const OJ=Se.struct([Se.u8("instruction")]);function DTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==OJ.span)throw new Uo;const{keys:{account:t},data:n}=MTe(r);if(n.instruction!==As.SyncNative)throw new zo;if(!t)throw new Fo;return{programId:e,keys:{account:t},data:n}}function MTe({programId:r,keys:[e],data:t}){return{programId:r,keys:{account:e},data:OJ.decode(t)}}const PJ=Se.struct([Se.u8("instruction")]);function BTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==PJ.span)throw new Uo;const{keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}=NTe(r);if(o.instruction!==As.FreezeAccount)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}}function NTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,authority:n,multiSigners:i},data:PJ.decode(s)}}const $J=Se.struct([Se.u8("instruction")]);function LTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==$J.span)throw new Uo;const{keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}=FTe(r);if(o.instruction!==As.ThawAccount)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,mint:n,authority:i,multiSigners:s},data:o}}function FTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{account:e,mint:t,authority:n,multiSigners:i},data:$J.decode(s)}}const DJ=Se.struct([Se.u8("instruction"),Sl("amount")]);function UTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==DJ.span)throw new Uo;const{keys:{source:t,destination:n,owner:i,multiSigners:s},data:o}=zTe(r);if(o.instruction!==As.Transfer)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{source:t,destination:n,owner:i,multiSigners:s},data:o}}function zTe({programId:r,keys:[e,t,n,...i],data:s}){return{programId:r,keys:{source:e,destination:t,owner:n,multiSigners:i},data:DJ.decode(s)}}const MJ=Se.struct([Se.u8("instruction"),sm("owner")]);function qTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==MJ.span)throw new Uo;const{keys:{account:t,mint:n,rent:i},data:s}=jTe(r);if(s.instruction!==As.InitializeAccount2)throw new zo;if(!t||!n||!i)throw new Fo;return{programId:e,keys:{account:t,mint:n,rent:i},data:s}}function jTe({programId:r,keys:[e,t,n],data:i}){return{programId:r,keys:{account:e,mint:t,rent:n},data:MJ.decode(i)}}const BJ=Se.struct([Se.u8("instruction"),sm("owner")]);function VTe(r,e=si){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==BJ.span)throw new Uo;const{keys:{account:t,mint:n},data:i}=KTe(r);if(i.instruction!==As.InitializeAccount3)throw new zo;if(!t||!n)throw new Fo;return{programId:e,keys:{account:t,mint:n},data:i}}function KTe({programId:r,keys:[e,t],data:n}){return{programId:r,keys:{account:e,mint:t},data:BJ.decode(n)}}const NJ=Se.struct([Se.u8("instruction")]);function HTe(r,e){if(!r.programId.equals(e))throw new Lo;if(r.data.length!==NJ.span)throw new Uo;const{keys:{account:t},data:n}=WTe(r);if(n.instruction!==As.InitializeImmutableOwner)throw new zo;if(!t)throw new Fo;return{programId:e,keys:{account:t},data:n}}function WTe({programId:r,keys:[e],data:t}){const{instruction:n}=NJ.decode(t);return{programId:r,keys:{account:e},data:{instruction:n}}}const uF={USDC:{mint:new Nt("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),decimals:6}};let GTe=class{generateUsdcTransaction(e,t,n,i=1){return this.generateSplTokenTransaction(e,t,uF.USDC.mint.toBase58(),n,uF.USDC.decimals,i)}generateSplTokenTransaction(e,t,n,i,s,o=1){const a=new Nt(e),c=new Nt(t),l=new Nt(n),u=uT(l,a,!1,si,mu),f=uT(l,c,!1,si,mu),d=BigInt(Math.round(i*10**s)),h=new na({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:a});for(let g=0;g<o;g++)h.add(_Te(u,l,f,a,d,s,[]));return h.signatures=[{publicKey:a,signature:null}],this.toBase64(h.serializeMessage())}generatePlainSolanaTransaction(e,t,n,i=1){const s=new Nt(e),o=new Nt(t),a=new na({recentBlockhash:"a3PD566oU2nE9JHwuC897aaT7ispdqaQ63Si6jzyKAg",feePayer:s});for(let c=0;c<i;c++)a.add(op.transfer({fromPubkey:s,toPubkey:o,lamports:n}));return a.signatures=[{publicKey:s,signature:null}],this.toBase64(a.serializeMessage())}toBase64(e){let t="";for(const n of e){if(typeof n!="number")throw new Error("Invalid byte value");t+=String.fromCharCode(n)}try{return btoa(t)}catch{return Ze.from(e).toString("base64")}}},YTe=class extends Dp{makeStateMachine(e){const{getPublicKey:t,generatePlainSolanaTransaction:n}=this.extractDependencies(e);return wd({actors:{openAppStateMachine:new yw({input:{appName:"Solana"}}).makeStateMachine(e),getPublicKey:ra(t),generatePlainSolanaTransaction:ra(n)},guards:{noInternalError:({context:i})=>i._internalState.error===null,skipOpenApp:({context:i})=>i.input.skipOpenApp},actions:{assignErrorFromEvent:Vt({_internalState:i=>({...i.context._internalState,error:new rl(i.event.error instanceof Error?i.event.error.message:String(i.event.error))})})}}).createMachine({id:"GenerateTransactionDeviceAction",initial:"InitialState",context:({input:i})=>({input:i,intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{error:null,publicKey:null,serialisedTransaction:null}}),states:{InitialState:{always:[{target:"GetPublicKey",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{exit:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:Vt({intermediateValue:({event:i})=>i.snapshot.context.intermediateValue})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:Vt({_internalState:({event:i,context:s})=>i.output.caseOf({Right:()=>s._internalState,Left:o=>({...s._internalState,error:o})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetPublicKey",guard:"noInternalError"},{target:"Error"}]},GetPublicKey:{entry:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"getPublicKey",src:"getPublicKey",input:i=>({derivationPath:i.context.input.derivationPath,checkOnDevice:!1}),onDone:{target:"GetPublicKeyResultCheck",actions:Vt({_internalState:({event:i,context:s})=>Es(i.output)?{...s._internalState,publicKey:i.output.data}:{...s._internalState,error:i.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetPublicKeyResultCheck:{always:[{target:"GenerateTransaction",guard:"noInternalError"},{target:"Error"}]},GenerateTransaction:{entry:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"generatePlainSolanaTransaction",src:"generatePlainSolanaTransaction",input:i=>({publicKey:i.context._internalState.publicKey}),onDone:{target:"GenerateTransactionResultCheck",actions:Vt({_internalState:({event:i,context:s})=>i.output?{...s._internalState,serialisedTransaction:i.output}:{...s._internalState,error:new rl("Failed to generate transaction")}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GenerateTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:i})=>i._internalState.serialisedTransaction?Zt(i._internalState.serialisedTransaction):lt(i._internalState.error||new rl("No error or signature available"))})}extractDependencies(e){return{getPublicKey:async t=>e.sendCommand(new L6(t.input)),generatePlainSolanaTransaction:async t=>Promise.resolve(new GTe().generatePlainSolanaTransaction(t.input.publicKey,t.input.publicKey,1e6,1))}}};const JTe=64;let XTe=class{name="signTransaction";errorHelper=new Up(zp,qp);args;constructor(e){this.args=e}getApdu(){const{more:e,extend:t,serializedTransaction:n}=this.args;let i=0;e&&(i|=2),t&&(i|=1);const s={cla:224,ins:6,p1:1,p2:i};return new qa(s).addBufferToData(n).build()}parseResponse(e){return vn.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Oc(e);if(t.getUnparsedRemainingLength()===0)return Br({data:jr});const n=t.extractFieldByLength(JTe);return Br(n?{data:ms(n)}:{error:new hs("Signature is missing")})})}},ZTe=class{isCompatible=!0;version="0.0.1";modelId;constructor(e,t){if(this.modelId=e.deviceModelId,e.sessionStateType===Ra.Connected){this.isCompatible=!1;return}if(e.currentApp.name!=="Solana"){this.isCompatible=!1;return}e.currentApp.name==="Solana"?this.version=e.currentApp.version:this.version=t.version}withMinVersionInclusive(e){return ks.gte(this.version,e)||(this.isCompatible=!1),this}withMinVersionExclusive(e){return ks.gt(this.version,e)||(this.isCompatible=!1),this}excludeDeviceModel(e){return this.modelId===e&&(this.isCompatible=!1),this}check(){return this.isCompatible}};const Yo=r=>r.equals(si)||r.equals(xf),uo=r=>{try{return r()}catch{return null}},QTe=[{when:({programId:r})=>r.equals(mu),decode:({ixMeta:r,message:e})=>{const t=r.accountKeyIndexes??[],n=f=>t[f]!==void 0?e.allKeys[t[f]]??null:null,i=n(1),s=n(3);if(!i||!s)return null;const o=t.map(f=>e.allKeys[f]).filter(f=>!!f),a=o.find(f=>f.equals(xf))??o.find(f=>f.equals(si))??null,c=f=>f.equals(op.programId)||f.equals(si)||f.equals(xf)||f.equals(mu)||f.equals(sT),l=o.filter(f=>!c(f)&&!f.equals(i)&&!f.equals(s)),u=(f,d)=>uT(s,f,!0,d,mu);if(a){for(const f of l)if(u(f,a).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}}}for(const f of l){if(u(f,si).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}};if(u(f,xf).equals(i))return{createATA:{address:f.toBase58(),mintAddress:s.toBase58()}}}return null}},{when:({programId:r})=>r.equals(xf),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{destination:t}}=wTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{destination:t}}=UTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{destination:t}}=STe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t,mint:n}}=PTe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t,mint:n}}=qTe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t,mint:n}}=VTe(r,e);return{createATA:{address:t.pubkey.toBase58(),mintAddress:n.pubkey.toBase58()}}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=HTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=kTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=DTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=TTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=ITe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=BTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>Yo(r),decode:({instruction:r,programId:e})=>uo(()=>{const{keys:{account:t}}=LTe(r,e);return{tokenAddress:t.pubkey.toBase58()}})},{when:({programId:r})=>r.equals(mu)||r.equals(si)||r.equals(xf),decode:()=>null}];var LJ=(r=>(r.STANDARD="Standard",r.SPL="SPL",r))(LJ||{});const eRe="https://api.mainnet-beta.solana.com/",tRe=r=>new pTe(r,{commitment:"confirmed"}),fF=r=>!!r&&(r.equals(mu)||r.equals(si)||r.equals(xf));let rRe=class{constructor(e,t,n,i){this.rawTransactionBytes=e,this.tokenAddress=t,this.createATA=n,this.injectedRPCURL=i}async inspectTransactionType(){try{const e=await this.normaliseMessage(this.rawTransactionBytes);if(this.tokenAddress||this.createATA)return{transactionType:e.compiledInstructions.some(i=>fF(e.allKeys[i.programIdIndex]))?"SPL":"Standard",data:{...this.tokenAddress?{tokenAddress:this.tokenAddress}:{},...this.createATA?{createATA:this.createATA}:{}}};let t=!1,n={};for(const i of e.compiledInstructions){const s=e.allKeys[i.programIdIndex];if(!s)continue;fF(s)&&(t=!0);const o=i.accountKeyIndexes.map(l=>e.allKeys[l]).filter(l=>!!l),a=new mo({programId:s,keys:o.map(l=>({pubkey:l,isSigner:!1,isWritable:!1})),data:wr.Buffer.from(i.data)}),c={programId:s,ixMeta:i,message:e,instruction:a};for(const l of QTe){if(!l.when(c))continue;const u=l.decode(c);u&&(u.createATA&&!n.createATA?n={...n,createATA:u.createATA}:u.tokenAddress&&!n.tokenAddress&&!n.createATA&&(n={...n,tokenAddress:u.tokenAddress}))}}return n.createATA?{transactionType:"SPL",data:n}:n.tokenAddress?{transactionType:"SPL",data:n}:t?{transactionType:"SPL",data:{}}:{transactionType:"Standard",data:{}}}catch{return{transactionType:"Standard",data:{}}}}async normaliseMessage(e){const t=this.tryDeserialiseVersioned(e);if(t){const c=t.message,l=await this.resolveLookedUpAddressesFromMessage(c),u=[...c.staticAccountKeys,...l?.writable??[],...l?.readonly??[]];return{compiledInstructions:c.compiledInstructions.map(f=>{const d=f,h=Array.from(d.accounts??f.accountKeyIndexes??[]);let g;return f.data instanceof Uint8Array?g=f.data:typeof f.data=="string"?g=wr.Buffer.from(f.data,"base64"):g=Uint8Array.from(f.data??[]),{programIdIndex:f.programIdIndex,accountKeyIndexes:h,data:g}}),allKeys:u}}const n=na.from(e),i=new Map,s=c=>{if(!c)return;const l=c.toBase58();i.has(l)||i.set(l,c)};s(n.feePayer??null);for(const c of n.instructions){s(c.programId);for(const l of c.keys)s(l.pubkey)}const o=Array.from(i.values()),a=new Map(o.map((c,l)=>[c.toBase58(),l]));return{compiledInstructions:n.instructions.map(c=>({programIdIndex:a.get(c.programId.toBase58())??-1,accountKeyIndexes:c.keys.map(l=>a.get(l.pubkey.toBase58())??-1),data:c.data})),allKeys:o}}tryDeserialiseVersioned(e){try{return K6.deserialize(e)}catch{try{return{message:V6.deserialize(e)}}catch{return null}}}async resolveLookedUpAddressesFromMessage(e){const t=e.addressTableLookups??[];if(!t.length)return;const n=[],i=[];for(const s of t){const o=(await tRe(this.injectedRPCURL||eRe).getAddressLookupTable(s.accountKey)).value;if(!o)continue;const a=o.state.addresses;for(const c of s.writableIndexes??[]){const l=a[c];l&&n.push(l)}for(const c of s.readonlyIndexes??[]){const l=a[c];l&&i.push(l)}}return{writable:n,readonly:i}}};const nRe=224,iRe=32,sRe=0,oRe=0,dF=4;let aRe=class{name="getChallenge";errorHelper=new Up(zp,qp);getApdu(){return new qa({cla:nRe,ins:iRe,p1:sRe,p2:oRe}).build()}parseResponse(e){return vn.fromNullable(this.errorHelper.getError(e)).orDefaultLazy(()=>{const t=new Oc(e);if(t.testMinimalLength(dF)===!1)return Br({error:new hs("Challenge key is missing")});const n=t.encodeToHexaString(t.extractFieldByLength(dF));return Br({data:{challenge:n}})})}},cRe=class{constructor(e,t){this.api=e,this.args=t}async run(){const{contextModule:e,options:t}=this.args,n=this.api.getDeviceSessionState();let i;const s=await this.api.sendCommand(new aRe);return Es(s)&&(i=s.data.challenge),(await e.getSolanaContext({deviceModelId:n.deviceModelId,tokenAddress:t.tokenAddress,challenge:i,createATA:t.createATA})).caseOf({Left:o=>{throw o},Right:o=>({challenge:i,descriptor:o.descriptor,addressResult:{tokenAccount:o.tokenAccount,owner:o.owner,contract:o.contract},calCertificate:o.certificate})})}};const lRe=224,uRe=33,fRe=0,dRe=0;let hRe=class{constructor(e){this.args=e}name="provideTLVDescriptor";errorHelper=new Up(zp,qp);getApdu(){const e={cla:lRe,ins:uRe,p1:fRe,p2:dRe};return new qa(e).addBufferToData(this.args.payload).build()}parseResponse(e){return this.errorHelper.getError(e)||(e.data.length!==0?Br({error:new hs("Unexpected data in response")}):Br({data:void 0}))}};const pRe=176,gRe=6,mRe=4,yRe=0;let vRe=class{constructor(e){this.args=e}name="provideTrustedNamePKI";errorHelper=new Up(zp,qp);getApdu(){const e={cla:pRe,ins:gRe,p1:mRe,p2:yRe};return new qa(e).addBufferToData(this.args.pkiBlob).build()}parseResponse(e){return this.errorHelper.getError(e)||(e.data.length!==0?Br({error:new hs("Unexpected data in response")}):Br({data:void 0}))}},bRe=class{constructor(e,t){this.api=e,this.context=t}async run(){const{descriptor:e,certificate:t}=this.context,{payload:n}=t,i=await this.api.sendCommand(new vRe({pkiBlob:n}));if(!Es(i))throw i;const s=await this.api.sendCommand(new hRe({payload:e}));if(!Es(s))throw s;return jr}};const wRe=4;let xRe=class{constructor(e,t){this.api=e,this.args=t}async run(){const{sendingData:e,derivationPath:t,commandFactory:n}=this.args,i=N6.splitPath(t),s=new Jg(e.length+2+i.length*wRe);s.add8BitUIntToData(1),s.add8BitUIntToData(i.length),i.forEach(a=>s.add32BitUIntToData(a)),s.addBufferToData(e);const o=s.build();return await new tJ(this.api,{data:o,commandFactory:n}).run()}},_Re=class extends Dp{makeStateMachine(e){const{signTransaction:t,getAppConfig:n,buildContext:i,provideContext:s,inspectTransaction:o}=this.extractDependencies(e);return wd({actors:{openAppStateMachine:new yw({input:{appName:"Solana"}}).makeStateMachine(e),getAppConfig:ra(n),inspectTransaction:ra(({input:a})=>o({serializedTransaction:a.serializedTransaction,resolutionContext:a.resolutionContext,rpcUrl:a.rpcUrl})),buildContext:ra(i),provideContext:ra(s),signTransaction:ra(t)},guards:{noInternalError:({context:a})=>a._internalState.error===null,skipOpenApp:({context:a})=>a.input.transactionOptions?.skipOpenApp||!1,isSPLSupported:({context:a})=>new ZTe(e.getDeviceSessionState(),a._internalState.appConfig).withMinVersionExclusive("1.4.0").excludeDeviceModel(Fr.NANO_S).check(),isAnSPLTransaction:({context:a})=>a._internalState.inspectorResult?.transactionType===LJ.SPL,shouldSkipInspection:({context:a})=>a._internalState.error===null&&!!a.input.transactionOptions?.transactionResolutionContext},actions:{assignErrorFromEvent:Vt({_internalState:a=>({...a.context._internalState,error:new rl(a.event.error instanceof Error?a.event.error.message:String(a.event.error))})})}}).createMachine({id:"SignTransactionDeviceAction",initial:"InitialState",context:({input:a})=>({input:a,intermediateValue:{requiredUserInteraction:Yr.None},_internalState:{error:null,signature:null,appConfig:null,solanaTransactionContext:null,inspectorResult:null}}),states:{InitialState:{always:[{target:"GetAppConfig",guard:"skipOpenApp"},{target:"OpenAppDeviceAction"}]},OpenAppDeviceAction:{exit:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"openAppStateMachine",src:"openAppStateMachine",input:()=>({appName:"Solana"}),onSnapshot:{actions:Vt({intermediateValue:({event:a})=>a.snapshot.context.intermediateValue})},onDone:{target:"CheckOpenAppDeviceActionResult",actions:Vt({_internalState:({event:a,context:c})=>a.output.caseOf({Right:()=>c._internalState,Left:l=>({...c._internalState,error:l})})})}}},CheckOpenAppDeviceActionResult:{always:[{target:"GetAppConfig",guard:"noInternalError"},{target:"Error"}]},GetAppConfig:{entry:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"getAppConfig",src:"getAppConfig",onDone:{target:"GetAppConfigResultCheck",actions:Vt({_internalState:({event:a,context:c})=>Es(a.output)?{...c._internalState,appConfig:a.output.data}:{...c._internalState,error:a.output.error}})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},GetAppConfigResultCheck:{always:[{target:"InspectTransaction",guard:"noInternalError"},{target:"Error"}]},InspectTransaction:{invoke:{id:"inspectTransaction",src:"inspectTransaction",input:({context:a})=>({serializedTransaction:a.input.transaction,resolutionContext:a.input.transactionOptions?.transactionResolutionContext,rpcUrl:a.input.transactionOptions?.solanaRPCURL}),onDone:{target:"AfterInspect",actions:Vt({_internalState:({context:a,event:c})=>({...a._internalState,inspectorResult:c.output})})},onError:{target:"Error",actions:"assignErrorFromEvent"}}},AfterInspect:{always:[{target:"BuildContext",guard:"isAnSPLTransaction"},{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},BuildContext:{entry:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"buildContext",src:"buildContext",input:({context:a})=>{const c=a._internalState.inspectorResult?.data;return{contextModule:a.input.contextModule,options:{tokenAddress:c?.tokenAddress,createATA:c?.createATA}}},onDone:{target:"ProvideContext",actions:[Vt({_internalState:({event:a,context:c})=>({...c._internalState,solanaTransactionContext:{descriptor:a.output.descriptor,certificate:a.output.calCertificate,tokenAccount:a.output.addressResult.tokenAccount,owner:a.output.addressResult.owner,contract:a.output.addressResult.contract}})})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContext:{entry:Vt({intermediateValue:()=>({requiredUserInteraction:Yr.None})}),invoke:{id:"provideContext",src:"provideContext",input:({context:a})=>{if(!a._internalState.solanaTransactionContext)throw new rl("Solana transaction context is not available");return a._internalState.solanaTransactionContext},onDone:{target:"ProvideContextResultCheck"},onError:{target:"Error",actions:"assignErrorFromEvent"}}},ProvideContextResultCheck:{always:[{target:"SignTransaction",guard:"noInternalError"},{target:"Error"}]},SignTransaction:{entry:Vt({intermediateValue:{requiredUserInteraction:Yr.SignTransaction}}),exit:Vt({intermediateValue:{requiredUserInteraction:Yr.None}}),invoke:{id:"signTransaction",src:"signTransaction",input:({context:a})=>({derivationPath:a.input.derivationPath,serializedTransaction:a.input.transaction}),onDone:{target:"SignTransactionResultCheck",actions:[Vt({_internalState:({event:a,context:c})=>{if(!Es(a.output))return{...c._internalState,error:a.output.error};const l=a.output.data.extract();return a.output.data.isJust()&&l instanceof Uint8Array?{...c._internalState,signature:l}:{...c._internalState,error:new rl("No Signature available")}}})]},onError:{target:"Error",actions:"assignErrorFromEvent"}}},SignTransactionResultCheck:{always:[{guard:"noInternalError",target:"Success"},{target:"Error"}]},Success:{type:"final"},Error:{type:"final"}},output:({context:a})=>a._internalState.signature?Zt(a._internalState.signature):lt(a._internalState.error||new rl("No error or signature available"))})}extractDependencies(e){return{getAppConfig:async()=>e.sendCommand(new iJ),buildContext:async t=>new cRe(e,t.input).run(),provideContext:async t=>new bRe(e,t.input).run(),signTransaction:async t=>new xRe(e,{commandFactory:n=>new XTe({serializedTransaction:n.chunkedData,more:n.more,extend:n.extend}),derivationPath:t.input.derivationPath,sendingData:t.input.serializedTransaction}).run(),inspectTransaction:async t=>Promise.resolve(new rRe(t.serializedTransaction,t.resolutionContext?.tokenAddress,t.resolutionContext?.createATA,t.rpcUrl).inspectTransactionType())}}};var SRe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},vA=(r,e)=>(t,n)=>e(t,n,r);let fT=class{constructor(e,t,n){this.dmk=e,this.sessionId=t,this.contextModule=n}getAddress(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new UB({input:{command:new L6(e),appName:"Solana",requiredUserInteraction:e.checkOnDevice?Yr.VerifyAddress:Yr.None,skipOpenApp:e.skipOpenApp}})})}signTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new _Re({input:{derivationPath:e.derivationPath,transaction:e.transaction,transactionOptions:e.solanaTransactionOptionalConfig,contextModule:this.contextModule}})})}generateTransaction(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new YTe({input:{derivationPath:e.derivationPath,skipOpenApp:e.skipOpenApp,contextModule:this.contextModule}})})}signMessage(e){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new uwe({input:{task:async t=>new QIe(t,{derivationPath:e.derivationPath,sendingData:new TextEncoder().encode(e.message)}).run(),appName:"Solana",requiredUserInteraction:Yr.SignPersonalMessage,skipOpenApp:e.skipOpenApp}})})}getAppConfiguration(){return this.dmk.executeDeviceAction({sessionId:this.sessionId,deviceAction:new UB({input:{command:new iJ,appName:"Solana",requiredUserInteraction:Yr.None,skipOpenApp:!1}})})}};fT=SRe([Et(),vA(0,Xe(Dh.Dmk)),vA(1,Xe(Dh.SessionId)),vA(2,Xe(Dh.ContextModule))],fT);const ERe=()=>new bn(({bind:r})=>{r(Fp.AppBinder).to(fT)});var ARe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},IRe=(r,e)=>(t,n)=>e(t,n,r);let dT=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.getAddress({derivationPath:e,checkOnDevice:t?.checkOnDevice??!1,skipOpenApp:t?.skipOpenApp??!1})}};dT=ARe([Et(),IRe(0,Xe(Fp.AppBinder))],dT);var CRe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},TRe=(r,e)=>(t,n)=>e(t,n,r);let hT=class{constructor(r){this.appBinder=r}execute(){return this.appBinder.getAppConfiguration()}};hT=CRe([Et(),TRe(0,Xe(Fp.AppBinder))],hT);var RRe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},kRe=(r,e)=>(t,n)=>e(t,n,r);let pT=class{constructor(e){this.appBinder=e}execute(e,t){return this.appBinder.generateTransaction({derivationPath:e,skipOpenApp:t?.skipOpenApp??!1})}};pT=RRe([Et(),kRe(0,Xe(Fp.AppBinder))],pT);var ORe=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},PRe=(r,e)=>(t,n)=>e(t,n,r);let gT=class{_appBinder;constructor(e){this._appBinder=e}execute(e,t,n){return this._appBinder.signMessage({derivationPath:e,message:t,skipOpenApp:n?.skipOpenApp??!1})}};gT=ORe([Et(),PRe(0,Xe(Fp.AppBinder))],gT);var $Re=(r,e,t,n)=>{for(var i=e,s=r.length-1,o;s>=0;s--)(o=r[s])&&(i=o(i)||i);return i},DRe=(r,e)=>(t,n)=>e(t,n,r);let mT=class{constructor(r){this.appBinder=r}execute(r,e,t){return this.appBinder.signTransaction({derivationPath:r,transaction:e,solanaTransactionOptionalConfig:t})}};mT=$Re([Et(),DRe(0,Xe(Fp.AppBinder))],mT);const MRe=()=>new bn(({bind:r})=>{r(Jc.GetAddressUseCase).to(dT),r(Jc.GetAppConfigurationUseCase).to(hT),r(Jc.SignTransactionUseCase).to(mT),r(Jc.SignMessageUseCase).to(gT),r(Jc.GenerateTransactionUseCase).to(pT)}),BRe=({dmk:r,sessionId:e,contextModule:t})=>{const n=new A6;return n.bind(Dh.Dmk).toConstantValue(r),n.bind(Dh.SessionId).toConstantValue(e),n.bind(Dh.ContextModule).toConstantValue(t),n.loadSync(ERe(),MRe()),n};let NRe=class{_container;constructor({dmk:e,sessionId:t,contextModule:n}){this._container=BRe({dmk:e,sessionId:t,contextModule:n})}signTransaction(e,t,n){return this._container.get(Jc.SignTransactionUseCase).execute(e,t,n)}signMessage(e,t,n){return this._container.get(Jc.SignMessageUseCase).execute(e,t,n)}getAddress(e,t){return this._container.get(Jc.GetAddressUseCase).execute(e,t)}getAppConfiguration(){return this._container.get(Jc.GetAppConfigurationUseCase).execute()}},LRe=class{_dmk;_sessionId;_customContextModule;_originToken;constructor({dmk:e,sessionId:t,originToken:n}){this._dmk=e,this._sessionId=t,this._originToken=n}withContextModule(e){return this._customContextModule=e,this}build(){return new NRe({dmk:this._dmk,sessionId:this._sessionId,contextModule:this._customContextModule??new MIe({originToken:this._originToken}).build()})}},FRe=class extends No{constructor(e){super(e),this.err=e}_tag="WebHidTransportNotSupportedError"},URe=class extends No{constructor(e){super(e),this.err=e}_tag="WebHidSendReportError"};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var er=function(){return er=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},er.apply(this,arguments)};function zRe(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qRe(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function lu(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(qRe(arguments[e]));return r}function jRe(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function X6(){return!jRe()&&Object.prototype.toString.call(typeof Yt<"u"?Yt:0)==="[object process]"}function VRe(r,e){return r.require(e)}var KRe={};function Yu(){return X6()?Sa:typeof window<"u"?window:typeof self<"u"?self:KRe}function Z6(r,e,t){var n=t||Yu(),i=n.__SENTRY__=n.__SENTRY__||{},s=i[r]||(i[r]=e());return s}var HRe=Object.prototype.toString;function WRe(r,e){return HRe.call(r)==="[object "+e+"]"}function FJ(r){return WRe(r,"Object")}function UJ(r){return!!(r&&r.then&&typeof r.then=="function")}var zJ=typeof __SENTRY_DEBUG__>"u"?!0:__SENTRY_DEBUG__,GRe=Yu(),YRe="Sentry Logger ",yT=["debug","info","warn","error","log","assert"];function qJ(r){var e=Yu();if(!("console"in e))return r();var t=e.console,n={};yT.forEach(function(i){var s=t[i]&&t[i].__sentry_original__;i in e.console&&s&&(n[i]=t[i],t[i]=s)});try{return r()}finally{Object.keys(n).forEach(function(i){t[i]=n[i]})}}function hF(){var r=!1,e={enable:function(){r=!0},disable:function(){r=!1}};return zJ?yT.forEach(function(t){e[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r&&qJ(function(){var s;(s=GRe.console)[t].apply(s,lu([YRe+"["+t+"]:"],n))})}}):yT.forEach(function(t){e[t]=function(){}}),e}var Jb;zJ?Jb=Z6("logger",hF):Jb=hF();function vT(r){var e,t;if(FJ(r)){var n={};try{for(var i=zRe(Object.keys(r)),s=i.next();!s.done;s=i.next()){var o=s.value;typeof r[o]<"u"&&(n[o]=vT(r[o]))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n}return Array.isArray(r)?r.map(vT):r}function bg(){var r=Yu(),e=r.crypto||r.msCrypto;if(e!==void 0&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=t[3]&4095|16384,t[4]=t[4]&16383|32768;var n=function(i){for(var s=i.toString(16);s.length<4;)s="0"+s;return s};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var s=Math.random()*16|0,o=i==="x"?s:s&3|8;return o.toString(16)})}var JRe=function(){function r(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(n){t._setResult(1,n)},this._reject=function(n){t._setResult(2,n)},this._setResult=function(n,i){if(t._state===0){if(UJ(i)){i.then(t._resolve,t._reject);return}t._state=n,t._value=i,t._executeHandlers()}},this._executeHandlers=function(){if(t._state!==0){var n=t._handlers.slice();t._handlers=[],n.forEach(function(i){i[0]||(t._state===1&&i[1](t._value),t._state===2&&i[2](t._value),i[0]=!0)})}};try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}return r.prototype.then=function(e,t){var n=this;return new r(function(i,s){n._handlers.push([!1,function(o){if(!e)i(o);else try{i(e(o))}catch(a){s(a)}},function(o){if(!t)s(o);else try{i(t(o))}catch(a){s(a)}}]),n._executeHandlers()})},r.prototype.catch=function(e){return this.then(function(t){return t},e)},r.prototype.finally=function(e){var t=this;return new r(function(n,i){var s,o;return t.then(function(a){o=!1,s=a,e&&e()},function(a){o=!0,s=a,e&&e()}).then(function(){if(o){i(s);return}n(s)})})},r}(),bT={nowSeconds:function(){return Date.now()/1e3}};function XRe(){var r=Yu().performance;if(!(!r||!r.now)){var e=Date.now()-r.now();return{now:function(){return r.now()},timeOrigin:e}}}function ZRe(){try{var r=VRe(hc,"perf_hooks");return r.performance}catch{return}}var bA=X6()?ZRe():XRe(),pF=bA===void 0?bT:{nowSeconds:function(){return(bA.timeOrigin+bA.now())/1e3}},jJ=bT.nowSeconds.bind(bT),gF=pF.nowSeconds.bind(pF);(function(){var r=Yu().performance;if(!(!r||!r.now)){var e=3600*1e3,t=r.now(),n=Date.now(),i=r.timeOrigin?Math.abs(r.timeOrigin+t-n):e,s=i<e,o=r.timing&&r.timing.navigationStart,a=typeof o=="number",c=a?Math.abs(o+t-n):e,l=c<e;return s||l?i<=c?r.timeOrigin:o:n}})();var mF=100,wT=function(){function r(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return r.clone=function(e){var t=new r;return e&&(t._breadcrumbs=lu(e._breadcrumbs),t._tags=er({},e._tags),t._extra=er({},e._extra),t._contexts=er({},e._contexts),t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=lu(e._eventProcessors),t._requestSession=e._requestSession),t},r.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},r.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},r.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},r.prototype.getUser=function(){return this._user},r.prototype.getRequestSession=function(){return this._requestSession},r.prototype.setRequestSession=function(e){return this._requestSession=e,this},r.prototype.setTags=function(e){return this._tags=er(er({},this._tags),e),this._notifyScopeListeners(),this},r.prototype.setTag=function(e,t){var n;return this._tags=er(er({},this._tags),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setExtras=function(e){return this._extra=er(er({},this._extra),e),this._notifyScopeListeners(),this},r.prototype.setExtra=function(e,t){var n;return this._extra=er(er({},this._extra),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},r.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},r.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},r.prototype.setTransaction=function(e){return this.setTransactionName(e)},r.prototype.setContext=function(e,t){var n;return t===null?delete this._contexts[e]:this._contexts=er(er({},this._contexts),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},r.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},r.prototype.getSpan=function(){return this._span},r.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},r.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},r.prototype.getSession=function(){return this._session},r.prototype.update=function(e){if(!e)return this;if(typeof e=="function"){var t=e(this);return t instanceof r?t:this}return e instanceof r?(this._tags=er(er({},this._tags),e._tags),this._extra=er(er({},this._extra),e._extra),this._contexts=er(er({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):FJ(e)&&(e=e,this._tags=er(er({},this._tags),e.tags),this._extra=er(er({},this._extra),e.extra),this._contexts=er(er({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this},r.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},r.prototype.addBreadcrumb=function(e,t){var n=typeof t=="number"?Math.min(t,mF):mF;if(n<=0)return this;var i=er({timestamp:jJ()},e);return this._breadcrumbs=lu(this._breadcrumbs,[i]).slice(-n),this._notifyScopeListeners(),this},r.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},r.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=er(er({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=er(er({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=er(er({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=er(er({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=er({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags=er({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=lu(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(lu(QRe(),this._eventProcessors),e,t)},r.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=er(er({},this._sdkProcessingMetadata),e),this},r.prototype._notifyEventProcessors=function(e,t,n,i){var s=this;return i===void 0&&(i=0),new JRe(function(o,a){var c=e[i];if(t===null||typeof c!="function")o(t);else{var l=c(er({},t),n);UJ(l)?l.then(function(u){return s._notifyEventProcessors(e,u,n,i+1).then(o)}).then(null,a):s._notifyEventProcessors(e,l,n,i+1).then(o).then(null,a)}})},r.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),this._notifyingListeners=!1)},r.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},r}();function QRe(){return Z6("globalEventProcessors",function(){return[]})}var e4e=function(){function r(e){this.errors=0,this.sid=bg(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=gF();this.timestamp=t,this.started=t,e&&this.update(e)}return r.prototype.update=function(e){if(e===void 0&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),!this.did&&!e.did&&(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||gF(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=e.sid.length===32?e.sid:bg()),e.init!==void 0&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),typeof e.started=="number"&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if(typeof e.duration=="number")this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors=="number"&&(this.errors=e.errors),e.status&&(this.status=e.status)},r.prototype.close=function(e){e?this.update({status:e}):this.status==="ok"?this.update({status:"exited"}):this.update()},r.prototype.toJSON=function(){return vT({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},r}(),yF=typeof __SENTRY_DEBUG__>"u"?!0:__SENTRY_DEBUG__,Q6=4,t4e=100,ek=function(){function r(e,t,n){t===void 0&&(t=new wT),n===void 0&&(n=Q6),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return r.prototype.isOlderThan=function(e){return this._version<e},r.prototype.bindClient=function(e){var t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},r.prototype.pushScope=function(){var e=wT.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},r.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},r.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},r.prototype.getClient=function(){return this.getStackTop().client},r.prototype.getScope=function(){return this.getStackTop().scope},r.prototype.getStack=function(){return this._stack},r.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},r.prototype.captureException=function(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:bg(),i=t;if(!t){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(o){s=o}i={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,er(er({},i),{event_id:n})),n},r.prototype.captureMessage=function(e,t,n){var i=this._lastEventId=n&&n.event_id?n.event_id:bg(),s=n;if(!n){var o=void 0;try{throw new Error(e)}catch(a){o=a}s={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,er(er({},s),{event_id:i})),i},r.prototype.captureEvent=function(e,t){var n=t&&t.event_id?t.event_id:bg();return e.type!=="transaction"&&(this._lastEventId=n),this._invokeClient("captureEvent",e,er(er({},t),{event_id:n})),n},r.prototype.lastEventId=function(){return this._lastEventId},r.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),i=n.scope,s=n.client;if(!(!i||!s)){var o=s.getOptions&&s.getOptions()||{},a=o.beforeBreadcrumb,c=a===void 0?null:a,l=o.maxBreadcrumbs,u=l===void 0?t4e:l;if(!(u<=0)){var f=jJ(),d=er({timestamp:f},e),h=c?qJ(function(){return c(d,t)}):d;h!==null&&i.addBreadcrumb(h,u)}}},r.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},r.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},r.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},r.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},r.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},r.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},r.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,i=t.client;n&&i&&e(n)},r.prototype.run=function(e){var t=vF(this);try{e(this)}finally{vF(t)}},r.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return yF&&Jb.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},r.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},r.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},r.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},r.prototype.captureSession=function(e){if(e===void 0&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},r.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&n.close(),this._sendSessionUpdate(),t&&t.setSession()},r.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,i=t.client,s=i&&i.getOptions()||{},o=s.release,a=s.environment,c=Yu(),l=(c.navigator||{}).userAgent,u=new e4e(er(er(er({release:o,environment:a},n&&{user:n.getUser()}),l&&{userAgent:l}),e));if(n){var f=n.getSession&&n.getSession();f&&f.status==="ok"&&f.update({status:"exited"}),this.endSession(),n.setSession(u)}return u},r.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var i=t.getSession&&t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},r.prototype._invokeClient=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=this.getStackTop(),o=s.scope,a=s.client;a&&a[e]&&(t=a)[e].apply(t,lu(n,[o]))},r.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Nw(),s=i.__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,t);yF&&Jb.warn("Extension method "+e+" couldn't be found, doing nothing.")},r}();function Nw(){var r=Yu();return r.__SENTRY__=r.__SENTRY__||{extensions:{},hub:void 0},r}function vF(r){var e=Nw(),t=uu(e);return tk(e,r),t}function r4e(){var r=Nw();return(!VJ(r)||uu(r).isOlderThan(Q6))&&tk(r,new ek),X6()?n4e(r):uu(r)}function n4e(r){try{var e=Nw().__SENTRY__,t=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!t)return uu(r);if(!VJ(t)||uu(t).isOlderThan(Q6)){var n=uu(r).getStackTop();tk(t,new ek(n.client,wT.clone(n.scope)))}return uu(t)}catch{return uu(r)}}function VJ(r){return!!(r&&r.__SENTRY__&&r.__SENTRY__.hub)}function uu(r){return Z6("hub",function(){return new ek},r)}function tk(r,e){if(!r)return!1;var t=r.__SENTRY__=r.__SENTRY__||{};return t.hub=e,!0}function i4e(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=r4e();if(n&&n[r])return n[r].apply(n,lu(e));throw new Error("No hub defined or "+r+" was not found on the hub, please open a bug report.")}function Z0(r,e){var t=new Error("Sentry syntheticException");return i4e("captureException",r,{captureContext:e,originalException:r,syntheticException:t})}const s4e=64,o4e=6e3;let a4e=class{dependencies;apduSender;apduReceiver;sendApduPromiseResolver;logger;constructor({dependencies:e,apduSenderFactory:t,apduReceiverFactory:n},i){const s=vn.of(Su.numberToByteArray(Math.floor(Math.random()*65535),2));this.logger=i("WebHidApduSender"),this.apduSender=t({frameSize:s4e,channel:s,padding:!0}),this.apduReceiver=n({channel:s}),this.sendApduPromiseResolver=jr,this.dependencies=e,this.logger.info(" Connected to device")}async sendApdu(e,t,n){let i;const s=new Promise(o=>{this.sendApduPromiseResolver=vn.of((...a)=>(i&&clearTimeout(i),o(...a)))});for(const o of this.apduSender.getFrames(e))try{await this.dependencies.device.sendReport(0,new Uint8Array(o.getRawData()))}catch(a){return this.logger.info("Error sending frame",{data:{error:a}}),Promise.resolve(lt(new URe(a)))}return n&&(i=setTimeout(()=>{this.logger.debug("[sendApdu] Abort timeout",{data:{abortTimeout:n}}),this.sendApduPromiseResolver.map(o=>o(lt(new iwe("Abort timeout"))))},n)),s}receiveHidInputReport(e){const t=new Uint8Array(e.data.buffer);this.apduReceiver.handleFrame(t).map(n=>{n.map(i=>{this.sendApduPromiseResolver.map(s=>s(Zt(i)))})}).mapLeft(n=>{this.sendApduPromiseResolver.map(i=>i(lt(n)))})}getDependencies(){return this.dependencies}setDependencies(e){this.dependencies=e}async setupConnection(){try{this.dependencies.device.oninputreport=e=>this.receiveHidInputReport(e),await this.dependencies.device.open()}catch(e){if(e instanceof DOMException&&e.name==="InvalidStateError")this.logger.info("Device is already opened");else{const t=new IC(e);throw this.logger.error("Error while opening device",{data:{error:e}}),Z0(t),e}}}closeConnection(){this.logger.info(" Disconnect");try{this.dependencies.device.close()}catch(e){this.logger.error("Error while closing device",{data:{device:this.dependencies.device,error:e}})}}};const c4e="WEB-HID";let l4e=class{constructor(e,t,n,i,s=a=>new d2e(a),o=(a,c)=>new a4e(a,c)){this._deviceModelDataSource=e,this._loggerServiceFactory=t,this._apduSenderFactory=n,this._apduReceiverFactory=i,this._deviceConnectionStateMachineFactory=s,this._deviceApduSenderFactory=o,this._logger=t("WebWebHidTransport"),this.startListeningToConnectionEvents()}_transportDiscoveredDevices=new aG([]);_deviceConnectionsByHidDevice=new Map;_deviceConnectionsPendingReconnection=new Set;_connectionListenersAbortController=new AbortController;_logger;connectionType="USB";identifier=c4e;get hidApi(){return this.isSupported()?Zt(navigator.hid):lt(new FRe("WebHID not supported"))}isSupported(){try{const e=!!navigator?.hid;return this._logger.debug(`isSupported: ${e}`),e}catch(e){return this._logger.error("isSupported: error",{data:{error:e}}),!1}}getIdentifier(){return this.identifier}async getDevices(){return hr.liftEither(this.hidApi).map(async e=>{try{return(await e.getDevices()).filter(t=>t.vendorId===yB)}catch(t){const n=new RE(t);throw this._logger.error("getDevices: error getting devices",{data:{error:t}}),Z0(n),n}})}mapHIDDeviceToTransportDiscoveredDevice(e){const t=this._transportDiscoveredDevices.getValue().find(i=>i.hidDevice===e);if(t)return t;const n=this._deviceConnectionsByHidDevice.get(e);return this.getDeviceModel(e).caseOf({Just:i=>{const s=n?.getDeviceId()??zm(),o={id:s,deviceModel:i,hidDevice:e,transport:this.identifier};return this._logger.debug(`Discovered device ${s} ${o.deviceModel.productName}`),o},Nothing:()=>{throw this._logger.warn(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`),new nwe(`Device not recognized: hidDevice.productId: 0x${e.productId.toString(16)}`)}})}listenToAvailableDevices(){return this.updateTransportDiscoveredDevices(),this._transportDiscoveredDevices.pipe(_u(e=>e.map(({hidDevice:t,...n})=>n)))}async updateTransportDiscoveredDevices(){(await this.getDevices()).caseOf({Left:e=>{this._logger.error("Error while getting accessible device",{data:{error:e}}),Z0(e)},Right:e=>{this._transportDiscoveredDevices.next(e.map(t=>this.mapHIDDeviceToTransportDiscoveredDevice(t)))}})}async promptDeviceAccess(){return hr.liftEither(this.hidApi).map(async e=>{let t=[];try{t=await e.requestDevice({filters:[{vendorId:yB}]}),await this.updateTransportDiscoveredDevices()}catch(i){const s=new RE(i);throw this._logger.error("promptDeviceAccess: error requesting device",{data:{error:i}}),Z0(s),s}if(this._logger.debug(`promptDeviceAccess: hidDevices len ${t.length}`),t.length===0)throw this._logger.warn("No device was selected"),new RE("No selected device");const n=[];for(const i of t)n.push(i),this._logger.debug("promptDeviceAccess: selected device",{data:{hidDevice:i}});return n}).run()}startDiscovering(){return this._logger.debug("startDiscovering"),tp(this.promptDeviceAccess()).pipe(CG(e=>e.caseOf({Left:t=>{throw this._logger.error("Error while getting accessible device",{data:{error:t}}),Z0(t),t},Right:t=>{this._logger.info(`Got access to ${t.length} HID devices`);const n=t.map(i=>this.mapHIDDeviceToTransportDiscoveredDevice(i));return tp(n)}})))}stopDiscovering(){}startListeningToConnectionEvents(){this._logger.debug("startListeningToConnectionEvents"),this.hidApi.map(e=>{e.addEventListener("connect",t=>this.handleDeviceConnectionEvent(t),{signal:this._connectionListenersAbortController.signal}),e.addEventListener("disconnect",t=>this.handleDeviceDisconnectionEvent(t),{signal:this._connectionListenersAbortController.signal})})}stopListeningToConnectionEvents(){this._logger.debug("stopListeningToConnectionEvents"),this._connectionListenersAbortController.abort()}async connect({deviceId:e,onDisconnect:t}){this._logger.debug("connect",{data:{deviceId:e}});const n=this._transportDiscoveredDevices.getValue().find(l=>l.id===e);if(!n)return this._logger.error(`Unknown device ${e}`),lt(new FB(`Unknown device ${e}`));const{deviceModel:i}=n,s=this._deviceConnectionsByHidDevice.get(n.hidDevice);if(s)return Zt(new ZN({id:e,deviceModel:i,type:this.connectionType,sendApdu:(...l)=>s.sendApdu(...l),transport:this.identifier}));const o=this._deviceApduSenderFactory({apduSenderFactory:this._apduSenderFactory,apduReceiverFactory:this._apduReceiverFactory,dependencies:{device:n.hidDevice}},this._loggerServiceFactory),a=this._deviceConnectionStateMachineFactory({deviceId:e,deviceApduSender:o,timeoutDuration:o4e,tryToReconnect:()=>{this._deviceConnectionsByHidDevice.forEach((l,u)=>{l.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.add(l),this._deviceConnectionsByHidDevice.delete(u))})},onTerminated:()=>{this._deviceConnectionsPendingReconnection.forEach(l=>{l.getDeviceId()===e&&(this._deviceConnectionsPendingReconnection.delete(l),t(l.getDeviceId()))}),this._deviceConnectionsByHidDevice.forEach((l,u)=>{l.getDeviceId()===e&&(this._deviceConnectionsByHidDevice.delete(u),t(l.getDeviceId()))})}});try{await o.setupConnection()}catch(l){return l instanceof IC?lt(l):lt(new IC(l))}this._deviceConnectionsByHidDevice.set(n.hidDevice,a);const c=new ZN({sendApdu:(...l)=>a.sendApdu(...l),deviceModel:i,id:e,type:this.connectionType,transport:this.identifier});return Zt(c)}getDeviceModel(e){const{productId:t}=e,n=this._deviceModelDataSource.getAllDeviceModels().find(i=>i.usbProductId===t>>8||i.bootloaderUsbProductId===t);return n?vn.of(n):vn.zero()}getHidUsbProductId(e){return this.getDeviceModel(e).caseOf({Just:t=>t.usbProductId,Nothing:()=>e.productId>>8})}async disconnect(e){this._logger.debug("disconnect",{data:{connectedDevice:e}});const t=Array.from(this._deviceConnectionsByHidDevice.values()).find(n=>n.getDeviceId()===e.connectedDevice.id);return t?(t.closeConnection(),Promise.resolve(Zt(void 0))):(this._logger.error("No matching device connection found",{data:{connectedDevice:e}}),Promise.resolve(lt(new FB(`Unknown device ${e.connectedDevice.id}`))))}isHIDConnectionEvent(e){return"device"in e&&typeof e.device=="object"&&e.device!==null&&"productId"in e.device&&typeof e.device.productId=="number"}async handleDeviceDisconnectionEvent(e){if(!this.isHIDConnectionEvent(e)){this._logger.error("Invalid event",{data:{event:e}});return}this._logger.info("[handleDeviceDisconnectionEvent] Device disconnected",{data:{event:e}}),this.updateTransportDiscoveredDevices();try{await e.device.close()}catch(n){this._logger.error("Error while closing device ",{data:{event:e,error:n}})}const t=this._deviceConnectionsByHidDevice.get(e.device);t&&t.eventDeviceDisconnected()}async handleDeviceReconnection(e,t){this._deviceConnectionsPendingReconnection.delete(e),this._deviceConnectionsByHidDevice.set(t,e);try{e.setDependencies({device:t}),await e.setupConnection(),e.eventDeviceConnected()}catch(n){this._logger.error("Error while reconnecting to device",{data:{event,error:n}}),e.closeConnection()}}async handleDeviceConnectionEvent(e){if(!this.isHIDConnectionEvent(e)){this._logger.error("Invalid event",{data:{event:e}});return}this._logger.info("[handleDeviceConnectionEvent] Device connected",{data:{event:e}});const t=Array.from(this._deviceConnectionsPendingReconnection).find(n=>this.getHidUsbProductId(n.getDependencies().device)===this.getHidUsbProductId(e.device));t&&await this.handleDeviceReconnection(t,e.device),this.updateTransportDiscoveredDevices()}destroy(){this.stopListeningToConnectionEvents(),this._deviceConnectionsByHidDevice.forEach(e=>{e.closeConnection()}),this._deviceConnectionsPendingReconnection.clear()}};const u4e=({deviceModelDataSource:r,loggerServiceFactory:e,apduSenderServiceFactory:t,apduReceiverServiceFactory:n})=>new l4e(r,e,t,n);class lc{static#e=new f2e().addTransport(u4e).build();static getDerivationPath(e){switch(e.type){case"root":return"44'/501'";case"current":return`44'/501'/${e.index}'/0'`;case"legacy":return`44'/501'/${e.index}'`;case"bip32":case"ledger-live":return`44'/501'/${e.index}'/0'/0'`;case"backpack-legacy":return`44'/501'/0'/0'/${e.index}'`;case"custom":return e.path}}static unsubscribe(e){e&&!e.closed&&e.unsubscribe()}static async pairDevice(){return new Promise((e,t)=>{const n=this.#e.startDiscovering({}).subscribe({next:i=>{this.unsubscribe(n),e(i)},error:i=>{t(i)}})})}static async getConnectedDevice(){const e=this.#e.listConnectedDevices().at(0);if(e)return e;let t=!0;return new Promise((n,i)=>{const s=this.#e.listenToAvailableDevices({}).subscribe({next:async o=>{if(t){t=!1;return}const a=o.at(0);if(!a){i("Ledger device not connected");return}const c=await this.#e.connect({device:a,sessionRefresherOptions:{isRefresherDisabled:!0}});this.unsubscribe(s),n(this.#e.getConnectedDevice({sessionId:c}))}})})}static async getConnectedSignerSolana(){const{sessionId:e}=await this.getConnectedDevice();return new LRe({dmk:this.#e,sessionId:e,originToken:"NA"}).build()}static async getAddress(e){const t=await this.getConnectedSignerSolana(),n=this.getDerivationPath(e),{observable:i}=t.getAddress(n,{checkOnDevice:!1});return new Promise((s,o)=>{const a=i.subscribe({next:c=>{c.status==="error"&&(this.unsubscribe(a),o(c.error)),c.status==="completed"&&(this.unsubscribe(a),s({address:c.output,path:n}))}})})}static async signTransaction(e,t,n){const{messageBytes:i,signatures:s}=Yh.unmarshalTransaction(n),o=await this.getConnectedSignerSolana(),{observable:a}=o.signTransaction(e,new Uint8Array(i));return new Promise((c,l)=>{const u=a.subscribe({next:f=>{if(f.status==="error"&&(this.unsubscribe(u),l(f.error)),f.status==="completed"){this.unsubscribe(u);const d=Yh.marshalTransaction(i,{...s,[t]:f.output});c(d)}}})})}static async signMessage(e,t){const n=await this.getConnectedSignerSolana(),{observable:i}=n.signMessage(e,t);return new Promise((s,o)=>{const a=i.subscribe({next:c=>{c.status==="error"&&(this.unsubscribe(a),o(c.error)),c.status==="completed"&&(this.unsubscribe(a),s($r.unmarshalBase58(c.output.signature)))}})})}static async assertAppConfig(e){const t=await this.getConnectedSignerSolana(),{observable:n}=t.getAppConfiguration();return new Promise((i,s)=>{const o=n.subscribe({next:a=>{if(a.status==="pending"){const{requiredUserInteraction:c}=a.intermediateValue;switch(c){case Yr.UnlockDevice:case Yr.ConfirmOpenApp:e?.(c);break}}if(a.status==="error"&&(this.unsubscribe(o),s(a.error)),a.status==="completed"){this.unsubscribe(o);const{blindSigningEnabled:c}=a.output;c||s("Please enable blind signing on your Ledger device and try again."),i(void 0)}}})})}static extractErrorMessage(e){return typeof e=="string"?e:typeof e=="object"&&e&&"message"in e&&typeof e.message=="string"?e.message:"An unknown error has occured, please try again."}}var f4e=le('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),d4e=le('<p class="leading-5 text-yellow-400">Facing issues? Ensure that your Ledger device is unlocked and in the Solana app, then re-connect and re-approve the connection.'),h4e=le("<span> (<!>/<!>)"),p4e=le('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>');const Hy={UNLOCK:"Unlock your Ledger device",OPEN_APP:"Open the Solana app on your Ledger device",APPROVE:"Approve on your Ledger device"},g4e=r=>{const[e,t]=Pe(null),{recordError:n}=vm(),[i,s]=Pe(0),[o,a]=Pe(Hy.APPROVE);async function c(){if(t(null),r.pendingTx.type==="ledger"){try{await lc.assertAppConfig(l=>{switch(l){case Yr.UnlockDevice:a(Hy.UNLOCK);break;case Yr.ConfirmOpenApp:a(Hy.OPEN_APP);break}})}catch(l){const u=lc.extractErrorMessage(l);t(u)}try{a(Hy.APPROVE),s(0);const l=[];for(const u of r.pendingTx.transactions){s(d=>d+1);const f=await lc.signTransaction(r.pendingTx.path,r.pendingTx.signerAddress,u);l.push($r.marshalBase64(f))}qt.approve({id:r.pendingTx.id,isApproved:!0,signatures:l})}catch(l){console.error(l);const u=lc.extractErrorMessage(l);n({type:"ledger:sign-tx",err:l}),t(u)}}}return mr(()=>c()),[A(Oe,{get when(){return e()},get fallback(){return(()=>{var l=p4e(),u=l.firstChild,f=u.nextSibling;return Z(f,o,null),Z(f,A(Oe,{get when(){return r.pendingTx.transactions.length>1},get children(){var d=h4e(),h=d.firstChild,g=h.nextSibling,p=g.nextSibling,m=p.nextSibling;return m.nextSibling,Z(d,i,g),Z(d,()=>r.pendingTx.transactions.length,m),d}}),null),l})()},get children(){return[(()=>{var l=f4e();return l.firstChild,Z(l,e,null),l})(),d4e()]}}),A(_i,{onApproveClick:c,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]},Is={MINUS:"",DASH:"",STAR:""};var m4e=le("<span>0.00"),bF=le("<span>");const Hr=r=>{const e=Te(()=>r.override?r.value.toLocaleString("en-US",r.override):r.value<10?r.value.toLocaleString("en-US",{minimumSignificantDigits:5,maximumSignificantDigits:5}):r.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));return A(Kt,{get children(){return[A(Re,{get when(){return r.value===0&&r.showZero},get children(){var t=m4e(),n=t.firstChild;return un(t,r,!1,!0),Z(t,()=>r.prefix,n),Z(t,()=>r.suffix,null),t}}),A(Re,{get when(){return r.value===0&&!r.showZero},get children(){var t=bF();return un(t,r,!1,!0),Z(t,()=>Is.DASH),t}}),A(Re,{get when(){return r.value!==0},get children(){var t=bF();return un(t,r,!1,!0),Z(t,()=>r.prefix,null),Z(t,e,null),Z(t,()=>r.suffix,null),t}})]}})};var y4e=le("<span>");const rk=r=>{const e=()=>{const t=Math.abs(r.value);return`${r.value>=0?"+":Is.MINUS}${r.prefix??""}${t.toLocaleString("en-US",r.override??{minimumFractionDigits:2,maximumFractionDigits:2})}${r.suffix??""}`};return(()=>{var t=y4e();return un(t,at(r,{get class(){return gr({"text-green-400":r.value>0},{"text-red-400":r.value<0},r.class)}}),!1,!0),Z(t,e),t})()};var v4e=le('<div><div class="i-tabler:question-mark size-full text-zinc-300">'),b4e=le("<img>");const w4e=[/https:\/\/wsrv\.nl\/.*/,/https:\/\/i\.imgur\.com\/.*/,/https:\/\/.*\.irys\.xyz\/.*/,/https:\/\/static\.coinall\.ltd\/.*/,/https:\/\/token-metadata\.bridge\.xyz\/.*/],ln=r=>{const[e,t]=Pe(!0),n=Te(()=>typeof r.src=="string"?w4e.some(i=>i.test(r.src??""))?r.src:r.hd?`https://wsrv.nl/?w=384&h=384&url=${encodeURIComponent(r.src)}&n=-1`:`https://wsrv.nl/?w=48&h=48&url=${encodeURIComponent(r.src)}`:null);return A(Oe,{get when(){return kr(()=>!!e())()&&n()},get fallback(){return A(Oe,{get when(){return r.fallback},get fallback(){return(()=>{var i=v4e();return Ge(()=>tn(i,gr("size-8 rounded-full p-1 bg-zinc-700 ring-1 ring-zinc-800",r.class))),i})()},children:i=>i()})},children:i=>(()=>{var s=b4e();return un(s,at(r,{get src(){return i()},get class(){return gr("size-8 rounded-full ring-1 ring-zinc-800",r.class)},onError:()=>t(!1)}),!1,!1),s})()})};var x4e=le('<div class="text-zinc-400 leading-5">Balance changes are estimated. Amounts shown are not guaranteed on execution.'),_4e=le('<div class="text-red-400 ring-1 ring-red-800 bg-red-900/15 py-3 px-4 rounded-xl">Simulation failed. This transaction will likely fail even if submitted on-chain.'),S4e=le('<div class="py-3 px-4 bg-zinc-900 rounded-xl space-y-3"><div class=text-zinc-400>Balance Changes'),E4e=le('<div class="flex items-center gap-1 text-zinc-400"><div class="i-tabler:gas-station-off size-5"></div><div class=font-medium>Gasless'),A4e=le('<div class="bg-zinc-900 rounded-xl divide-y divide-zinc-800"><div class="py-3 px-4 flex justify-between items-center"><div class=text-zinc-400>Signer</div><div class=font-medium></div></div><div class="py-3 px-4 flex justify-between items-center"><div class=text-zinc-400>Network Fee'),I4e=le('<div class="flex-1 flex items-end"><div class="flex-1 text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl"> transactions will be signed when you approve. Your estimated balance changes may be inaccurate.'),C4e=le('<div class="flex-1 flex items-end"><div class="flex-1 text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),T4e=le('<div class="flex items-center gap-3"><div class="rounded-full size-8 bg-zinc-800 animate-pulse"></div><div class="h-5 w-12 bg-zinc-800 animate-pulse rounded"></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-5 w-26 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded">'),R4e=le('<div class="flex items-center gap-3 py-0.5"><div class=font-semibold></div><div class=flex-1></div><div class="flex flex-col items-end gap-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),k4e=le('<div class="font-medium text-zinc-500">'),O4e=le("<div class=font-medium>"),P4e=le('<div class="bg-zinc-900 rounded-xl"><div class="flex justify-between py-3 px-4 "><div class=text-zinc-400>Transaction </div><div class=font-medium> Bytes</div></div><div class="pb-3 px-4 flex justify-between items-center break-all select-all text-zinc-300 text-sm font-mono">');const $4e=r=>{const{selectedAccount:e}=Jr(),t=Te(()=>e()?.address),n=hi(()=>({queryKey:["simulate-txs",r.pendingTx.id],queryFn:async()=>ws.simulateTransaction(r.pendingTx.transactions.length===1?{tx:r.pendingTx.transactions[0],accounts:r.pendingTx.signerAddress}:{bundle:r.pendingTx.transactions,accounts:r.pendingTx.signerAddress}),enabled:r.pendingTx.transactions.length>=1,refetchInterval:5e3}));async function i(s){if(!s||r.pendingTx.type==="standalone"||r.pendingTx.type==="mnemonic"||r.pendingTx.type==="privy"||r.pendingTx.type==="readonly")return qt.approve({id:r.pendingTx.id,isApproved:s});r.setView(r.pendingTx.type)}return[x4e(),(()=>{var s=S4e();return s.firstChild,Z(s,A(Kt,{get children(){return[A(Re,{get when(){return!t()||n.data==null},get children(){return A(pt,{get each(){return Array.from({length:2})},children:()=>T4e()})}}),A(Re,{get when(){return n.data&&"status"in n.data&&n.data.status==="revert"},get children(){return _4e()}}),A(Re,{get when(){return kr(()=>!!(n.data&&"status"in n.data&&n.data.status==="success"))()&&n.data.balanceChanges[t()]},children:o=>A(pt,{get each(){return o()},children:({icon:a,symbol:c,amount:l,value:u})=>(()=>{var f=R4e(),d=f.firstChild,h=d.nextSibling,g=h.nextSibling,p=g.firstChild,m=p.nextSibling;return Z(f,A(ln,{src:a}),d),Z(d,c),p.classList.toggle("text-red-400",l<0),p.classList.toggle("text-green-400",l>0),Z(p,A(rk,{value:l,override:{minimumFractionDigits:2,maximumFractionDigits:9}})),Z(m,A(Hr,{value:u,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),f})()})})]}}),null),s})(),(()=>{var s=A4e(),o=s.firstChild,a=o.firstChild,c=a.nextSibling,l=o.nextSibling;return l.firstChild,Z(c,A(Gi,{get address(){return r.pendingTx.signerAddress}})),Z(l,A(Kt,{get fallback(){return k4e()},get children(){return[A(Re,{get when(){return kr(()=>!!(n.data&&"status"in n.data&&n.data.status==="success"))()&&n.data.networkFee.payer!==t()},get children(){return E4e()}}),A(Re,{get when(){return n.data&&"status"in n.data&&n.data.status==="success"&&n.data.networkFee},children:u=>(()=>{var f=O4e();return Z(f,A(Hr,{get value(){return u().amount},suffix:" SOL",override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0})),f})()})]}}),null),s})(),A(Oe,{get when(){return r.pendingTx.transactions.length>1},get children(){var s=I4e(),o=s.firstChild,a=o.firstChild;return Z(o,()=>r.pendingTx.transactions.length,a),s}}),A(Oe,{get when(){return r.pendingTx.type==="readonly"},get children(){return C4e()}}),A(Oe,{get when(){return!1},get children(){return A(pt,{get each(){return r.pendingTx.transactions},children:(s,o)=>(()=>{var a=P4e(),c=a.firstChild,l=c.firstChild;l.firstChild;var u=l.nextSibling,f=u.firstChild,d=c.nextSibling;return Z(l,()=>o()+1,null),Z(u,()=>$r.unmarshalBase64(s).length,f),Z(d,s),a})()})}}),A(_i,{onCancelClick:()=>i(!1),onApproveClick:()=>i(!0),approveTitle:"Confirm",get isApproveDisabled(){return r.pendingTx.type==="readonly"}})]};var D4e=le('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2">Error: '),M4e=le("<span> (<!>/<!>)"),B4e=le('<div class="bg-zinc-900 rounded-xl flex flex-col items-center justify-center gap-6 py-10"><div class="i-tabler:loader-2 animate-spin size-12 text-zinc-500"></div><div class=text-zinc-400>Approve with your Trezor device');const N4e=r=>{const[e,t]=Pe(null),[n,i]=Pe(0);async function s(){if(r.pendingTx.type==="trezor")try{i(0),t(null);const o=[];for(const a of r.pendingTx.transactions){i(l=>l+1);const{signature:c}=await qt.trezorSignTransaction({signerAddress:r.pendingTx.signerAddress,path:r.pendingTx.path,transaction:a});o.push(c),r.pendingTx.transactions.length>1&&await new Promise(l=>setTimeout(l,1500))}qt.approve({id:r.pendingTx.id,isApproved:!0,signatures:o})}catch(o){t(o instanceof Error?o.message:"Unknown error occurred.")}}return mr(()=>s()),[A(Oe,{get when(){return e()},get fallback(){return(()=>{var o=B4e(),a=o.firstChild,c=a.nextSibling;return c.firstChild,Z(c,A(Oe,{get when(){return r.pendingTx.transactions.length>1},get children(){var l=M4e(),u=l.firstChild,f=u.nextSibling,d=f.nextSibling,h=d.nextSibling;return h.nextSibling,Z(l,n,f),Z(l,()=>r.pendingTx.transactions.length,h),l}}),null),o})()},get children(){var o=D4e();return o.firstChild,Z(o,e,null),o}}),A(_i,{onApproveClick:s,onCancelClick:()=>r.setView("simulation"),cancelTitle:"Back",get approveTitle(){return e()===null?"Sign":"Retry"},get isApproveDisabled(){return e()===null}})]};var L4e=le('<div class="relative flex-1 p-4 space-y-4 flex flex-col">');const F4e=()=>{const r=aH(),[e]=KT(r,i=>qt.getPendingTransaction({id:i})),[t,n]=Pe("simulation");return(()=>{var i=L4e();return Z(i,A(x4,{title:"Confirm Transaction"}),null),Z(i,A(Oe,{get when(){return e.latest},children:s=>A(Kt,{get children(){return[A(Re,{get when(){return t()==="simulation"},get children(){return A($4e,{setView:n,get pendingTx(){return s()}})}}),A(Re,{get when(){return t()==="ledger"},get children(){return A(g4e,{setView:n,get pendingTx(){return s()}})}}),A(Re,{get when(){return t()==="keystone"},get children(){return A(xve,{setView:n,get pendingTx(){return s()}})}}),A(Re,{get when(){return t()==="trezor"},get children(){return A(N4e,{setView:n,get pendingTx(){return s()}})}})]}})}),null),i})()};class ed{static#e="https://datapi.jup.ag";static async search(e){return an.get(`${this.#e}/v1/assets/search`,{searchParams:e,throwHttpErrors:!1}).json()}static async getChart(e,t){const{mint:n,...i}=e;return an.get(`${this.#e}/v2/charts/${n}`,{searchParams:i,throwHttpErrors:!1,signal:t}).json()}static async getDescription(e){return an.get(`${this.#e}/v1/assets/${e}/description`).json()}static async getPnl(e){return an.get(`${this.#e}/v1/pnl?addresses=${e.addresses.join(",")}&assetIds=${e.assetIds.join(",")}`).json()}static async getTopCategoryAssets(e,t,n){return an.get(`${this.#e}/v1/assets/${e}/${t}`,{searchParams:n,throwHttpErrors:!1}).json()}static async getGlobalSearch(e){return an.get(`${this.#e}/v2/search`,{searchParams:e,throwHttpErrors:!1}).json()}}function U4e(r,e,t){let n,i;const s=typeof window<"u"&&"MutationObserver"in window;typeof e=="function"?(n={},i=e):(n=e,i=t);const o=s?new MutationObserver(i):void 0,a=(u,f)=>o?.observe(u,$g(f)??n),c=()=>{AI($g(r)).forEach(u=>{u instanceof Node?a(u,n):a(u[0],u[1])})},l=()=>o?.disconnect();return mr(c),mt(l),[a,{start:c,stop:l,instance:o,isSupported:s}]}var z4e=le("<span>");const Ia=r=>{let e;const[t,n]=Pe(!1);function i(){return setTimeout(()=>n(!1),1e3)}let s=i();return U4e(()=>e,{subtree:!0,characterData:!0},()=>{clearTimeout(s),n(!0),s=i()}),mt(()=>clearTimeout(s)),(()=>{var o=z4e();return cd(a=>e=a,o),un(o,at(r,{get class(){return gr(r.class,{"animate-[flash-background_1s_ease-out_forwards]":t()})}}),!1,!0),Z(o,()=>r.children),o})()};var q4e=le("<span>");const Gm=r=>{const e=()=>{const t=Math.abs(r.value),n=r.value>=0?"+":Is.MINUS;if(t<1e3)return`${r.prefix??""}${n}${t.toFixed(2)}%${r.suffix??""}`;const i=Math.round(t/100);return`${r.prefix??""}${n}${i}x${r.suffix??""}`};return(()=>{var t=q4e();return un(t,at(r,{get class(){return gr("px-1 rounded",{hidden:r.value===0},{"text-green-400 bg-green-400/5":r.value>0},{"text-red-400 bg-red-400/5":r.value<0},{"bg-transparent px-0":r.hideBackground},r.class)}}),!1,!0),Z(t,e),t})()},KJ=()=>".",qo=()=>{const r=KJ();function e(o){if(o.length===0)return"";if(Number(o)===0)return"0";let a=0;for(;a<o.length&&o[a]==="0"&&o[a+1]!==r;)a++;let c=o.length-1;if(o.includes(r)){for(;c>=0&&(o[c]==="0"||o[c]===r);)if(c--,o[c]===r){c--;break}}return o.substring(a,c+1)}function t(o,a,c){const l=o.toString();let u;if(l.length<=a){const f="0".repeat(a-l.length);u=e(`0${r}${f}${l}`)}else{const f=l.length-a,d=l.substring(0,f),h=l.substring(f);u=e(`${d}${r}${h}`)}return!c||c===1?u:e((Number(u)*c).toFixed(a))}function n(o,a,c){const[l,u]=o.split(/[.,]/),f=e((l??"")+(u??"").padEnd(a,"0").slice(0,a));return!c||c===1?f:e(Math.round(Number(f)/c).toFixed(0))}function i(o,a,c){const l=o<0,u=Math.abs(o);if(u<.01)return Is.DASH;const f=a==="currency"?"$":"",[d,h]=u<1e3?["",1]:u<1e6?["K",1e3]:u<1e9?["M",1e6]:u<1e12?["B",1e9]:u<1e15?["T",1e12]:["Q",1e15],g=(u/h).toLocaleString("en-US",a==="currency"||a==="float"||u>=1e3?{minimumSignificantDigits:3,maximumSignificantDigits:3}:{maximumFractionDigits:0});return`${c?l?Is.DASH:"+":""}${f}${g}${d}`}function s(o){return o<0n?-o:o}return{removeInsignificantZeros:e,fromChainAmount:t,toChainAmount:n,formatLargeNumbers:i,bigIntAbs:s}};var j4e=le("<sub>"),V4e=le("<span>0.00"),wF=le("<span>");function xF(r,e){const t=r.toLocaleString("en-US",{minimumSignificantDigits:1,maximumSignificantDigits:e});let n=0;for(let i=2;i<t.length&&t.at(i)==="0";i++)n++;return["0.0",(()=>{var i=j4e();return i.classList.toggle("hidden",n<=1),Z(i,n),i})(),kr(()=>t.slice(2+n))]}const Ai=r=>{const{formatLargeNumbers:e}=qo(),t=Te(()=>{const n=Math.abs(r.value);return r.type==="long"?n<.01?xF(n,5):n<10?n.toLocaleString("en-US",{minimumSignificantDigits:3,maximumSignificantDigits:5}):n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):n<.01?xF(n,3):e(n,"float")});return A(Kt,{get children(){return[A(Re,{get when(){return r.value===0&&r.showZero},get children(){var n=V4e(),i=n.firstChild;return un(n,r,!1,!0),Z(n,()=>r.prefix,i),Z(n,()=>r.suffix,null),n}}),A(Re,{get when(){return r.value===0&&!r.showZero},get children(){var n=wF();return un(n,r,!1,!0),Z(n,()=>Is.DASH),n}}),A(Re,{get when(){return r.value!==0},get children(){var n=wF();return un(n,r,!1,!0),Z(n,()=>r.prefix,null),Z(n,t,null),Z(n,()=>r.suffix,null),n}})]}})},Ss={BASE:"https://jup.ag",LANDING:"https://jup.ag?connect=jupiter-extension",SWAP:"https://jup.ag/swap?connect=jupiter-extension",ONBOARD:"https://jup.ag/onboard?connect=jupiter-extension",PORTFOLIO:r=>`https://jup.ag/portfolio/${r}?connect=jupiter-extension`,TOKENS:r=>`https://jup.ag/tokens/${r}?connect=jupiter-extension`,FEEDBACK:"https://feedback.jup.ag",TERMS:"https://dev.jup.ag/docs/misc/terms-of-use",PRIVACY:"https://dev.jup.ag/docs/misc/privacy-policy",SUPPORT:"https://support.jup.ag/",LEND:"https://jup.ag/lend/earn?connect=jupiter-extension",LAUNCHPAD_METADATA:"https://jup.ag/metadata/launchpad.json",STOCK_ISSUER_METADATA:"https://jup.ag/metadata/stock-issuer.json"},Au={SOL:{id:"So11111111111111111111111111111111111111112",symbol:"SOL",icon:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9,amount:0,rawAmount:"0",value:0,price:0,priceChange:0},USDC:{id:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"}},HJ=r=>hi(()=>({queryKey:["asset",r()],queryFn:async()=>(await ed.search({query:r()})).at(0),refetchInterval:15e3}));function yn(r){var e=r.width,t=r.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function qf(r,e){return r.width===e.width&&r.height===e.height}var K4e=function(){function r(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return r.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(r.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),r.prototype.subscribe=function(e){var t=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){t._observers=t._observers.filter(function(i){return i!==n})}}},r.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},r.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},r.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},r.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},r}();function H4e(r){return new K4e(r)}var W4e=function(){function r(e,t,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=yn({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(i=n?.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return r.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(r.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bitmapSize",{get:function(){return yn({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),r.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=yn(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},r.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},r.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(r.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),r.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},r.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},r.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},r.prototype._resizeBitmap=function(e){var t=this.bitmapSize;qf(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},r.prototype._emitBitmapSizeChanged=function(e,t){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},r.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,n=yn(this._transformBitmapSize(e,this._canvasElementClientSize)),i=qf(this.bitmapSize,n)?null:n;t===null&&i===null||t!==null&&i!==null&&qf(t,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(t,i))},r.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},r.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Y4e().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},r.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=_F(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=H4e(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},r.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var n=_F(this._canvasElement);if(n!==null){var i=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:n.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?J4e(s[0],i):yn({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},r.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var n=t.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],s=yn({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},r}();function G4e(r,e){return new W4e(r,e.transform,e.options)}function _F(r){return r.ownerDocument.defaultView}function Y4e(){return new Promise(function(r){var e=new ResizeObserver(function(t){r(t.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function J4e(r,e){return yn({width:Math.round(r.left*e+r.width*e)-Math.round(r.left*e),height:Math.round(r.top*e+r.height*e)-Math.round(r.top*e)})}var X4e=function(){function r(e,t,n){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return r.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},r.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(r.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),r}();function td(r,e){var t=r.canvasElementClientSize;if(t.width===0||t.height===0)return null;var n=r.bitmapSize;if(n.width===0||n.height===0)return null;var i=r.canvasElement.getContext("2d",e);return i===null?null:new X4e(i,t,n)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const WJ={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var SF,EF;function rd(r,e){const t={0:[],1:[r.lineWidth,r.lineWidth],2:[2*r.lineWidth,2*r.lineWidth],3:[6*r.lineWidth,6*r.lineWidth],4:[r.lineWidth,4*r.lineWidth]}[e];r.setLineDash(t)}function GJ(r,e,t,n){r.beginPath();const i=r.lineWidth%2?.5:0;r.moveTo(t,e+i),r.lineTo(n,e+i),r.stroke()}function ji(r,e){if(!r)throw new Error("Assertion failed"+(e?": "+e:""))}function io(r){if(r===void 0)throw new Error("Value is undefined");return r}function ft(r){if(r===null)throw new Error("Value is null");return r}function yu(r){return ft(io(r))}(function(r){r[r.Simple=0]="Simple",r[r.WithSteps=1]="WithSteps",r[r.Curved=2]="Curved"})(SF||(SF={})),function(r){r[r.Solid=0]="Solid",r[r.Dotted=1]="Dotted",r[r.Dashed=2]="Dashed",r[r.LargeDashed=3]="LargeDashed",r[r.SparseDotted=4]="SparseDotted"}(EF||(EF={}));class oi{constructor(){this.t=[]}i(e,t,n){const i={h:e,l:t,o:n===!0};this.t.push(i)}_(e){const t=this.t.findIndex(n=>e===n.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,n){const i=[...this.t];this.t=this.t.filter(s=>!s.o),i.forEach(s=>s.h(e,t,n))}v(){return this.t.length>0}m(){this.t=[]}}function Oo(r,...e){for(const t of e)for(const n in t)t[n]!==void 0&&Object.prototype.hasOwnProperty.call(t,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof t[n]!="object"||r[n]===void 0||Array.isArray(t[n])?r[n]=t[n]:Oo(r[n],t[n]));return r}function ap(r){return typeof r=="number"&&isFinite(r)}function om(r){return typeof r=="number"&&r%1==0}function Ym(r){return typeof r=="string"}function Wy(r){return typeof r=="boolean"}function sl(r){const e=r;if(!e||typeof e!="object")return e;let t,n,i;for(n in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&typeof i=="object"?sl(i):i);return t}function Z4e(r){return r!==null}function xT(r){return r===null?void 0:r}const YJ="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Xb(r,e,t){return e===void 0&&(e=YJ),`${t=t!==void 0?`${t} `:""}${r}px ${e}`}class Q4e{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),n=this.W();return e.P===t&&e.T===n||(e.P=t,e.T=n,e.k=Xb(t,n),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function wA(r){return r<0?0:r>255?255:Math.round(r)||0}function AF(r){return .199*r[0]+.687*r[1]+.114*r[2]}class e6e{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if(e==="transparent")return e;const n=this.K(e),i=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${t*i})`}X(e){const t=this.K(e);return{Z:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:AF(t)>160?"black":"white"}}J(e){return AF(this.K(e))}tt(e,t,n){const[i,s,o,a]=this.K(e),[c,l,u,f]=this.K(t),d=[wA(i+n*(c-i)),wA(s+n*(l-s)),wA(o+n*(u-o)),(h=a+n*(f-a),h<=0||h>1?Math.min(Math.max(h,0),1):Math.round(1e4*h)/1e4)];var h;return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(e){const t=this.q.get(e);if(t)return t;const n=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const c=window.getComputedStyle(a).color;return document.body.removeChild(a),c}(e),i=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!i){if(this.Y.length)for(const o of this.Y){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const s=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[4]?parseFloat(i[4]):1];return this.q.set(e,s),s}}class JJ{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,n){this.it.forEach(i=>{i.nt(e,t,n)})}}class Ed{nt(e,t,n){e.useBitmapCoordinateSpace(i=>this.et(i,t,n))}}class t6e extends Ed{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const i=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=c=>{e.beginPath();for(let l=i.to-1;l>=i.from;--l){const u=s.ot[l],f=Math.round(u._t*t)+o,d=u.ut*n,h=c*n+o;e.moveTo(f,d),e.arc(f,d,h,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,a(s.ft+s.ct)),e.fillStyle=s.vt,a(s.ft)}}function r6e(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const n6e={from:0,to:1};class i6e{constructor(e,t,n){this.Mt=new JJ,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.Pt=n,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(r6e),this.bt=this.St.map(t=>{const n=new t6e;return n.ht(t),n}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),t=this.Pt.It(),n=this.Ct.Bt(),i=this.O.Et();this.yt(),t.forEach((s,o)=>{const a=this.St[o],c=s.At(n),l=s.zt();!e&&c!==null&&s.Vt()&&l!==null?(a.vt=c.Lt,a.ft=c.ft,a.ct=c.Ot,a.ot[0].gt=c.gt,a.ot[0].ut=s.Ft().Nt(c.gt,l.Wt),a.dt=c.Ht??this.O.Ut(a.ot[0].ut/s.Ft().$t()),a.ot[0].wt=n,a.ot[0]._t=i.qt(n),a.lt=n6e):a.lt=null})}}class s6e extends Ed{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const s=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!s&&!o)return;const a=Math.round(this.Yt._t*n),c=Math.round(this.Yt.ut*i);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*n),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,rd(e,this.Yt.jt.Xt),function(l,u,f,d){l.beginPath();const h=l.lineWidth%2?.5:0;l.moveTo(u+h,f),l.lineTo(u+h,d),l.stroke()}(e,a,0,t.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*i),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,rd(e,this.Yt.Kt.Xt),GJ(e,c,0,t.width))}}class o6e{constructor(e,t){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new s6e(this.Zt),this.Jt=e,this.Pt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),t=this.Pt.Qt().N().crosshair,n=this.Zt;if(t.mode===2)return n.Kt.Vt=!1,void(n.jt.Vt=!1);n.Kt.Vt=e&&this.Jt.ti(this.Pt),n.jt.Vt=e&&this.Jt.ii(),n.Kt.ct=t.horzLine.width,n.Kt.Xt=t.horzLine.style,n.Kt.R=t.horzLine.color,n.jt.ct=t.vertLine.width,n.jt.Xt=t.vertLine.style,n.jt.R=t.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function Lw(r,e,t,n,i,s){r.save(),r.globalCompositeOperation="copy",r.fillStyle=s,r.fillRect(e,t,n,i),r.restore()}function IF(r,e,t,n,i,s){r.beginPath(),r.roundRect?r.roundRect(e,t,n,i,s):(r.lineTo(e+n-s[1],t),s[1]!==0&&r.arcTo(e+n,t,e+n,t+s[1],s[1]),r.lineTo(e+n,t+i-s[2]),s[2]!==0&&r.arcTo(e+n,t+i,e+n-s[2],t+i,s[2]),r.lineTo(e+s[3],t+i),s[3]!==0&&r.arcTo(e,t+i,e,t+i-s[3],s[3]),r.lineTo(e,t+s[0]),s[0]!==0&&r.arcTo(e,t,e+s[0],t,s[0]))}function CF(r,e,t,n,i,s,o=0,a=[0,0,0,0],c=""){if(r.save(),!o||!c||c===s)return IF(r,e,t,n,i,a),r.fillStyle=s,r.fill(),void r.restore();const l=o/2;var u;IF(r,e+l,t+l,n-o,i-o,(u=-l,a.map(f=>f===0?f:f+u))),s!=="transparent"&&(r.fillStyle=s,r.fill()),c!=="transparent"&&(r.lineWidth=o,r.strokeStyle=c,r.closePath(),r.stroke()),r.restore()}function XJ(r,e,t,n,i,s,o){r.save(),r.globalCompositeOperation="copy";const a=r.createLinearGradient(0,0,0,i);a.addColorStop(0,s),a.addColorStop(1,o),r.fillStyle=a,r.fillRect(e,t,n,i),r.restore()}class TF{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,n,i){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const s=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(c=>{const l=c.context;l.font=t.k;const u=this.hi(c,t,n,i),f=u.ai;return u.li?CF(l,f.oi,f._i,f.ui,f.ci,o,f.di,[f.ft,0,0,f.ft],o):CF(l,f.fi,f._i,f.ui,f.ci,o,f.di,[0,f.ft,f.ft,0],o),this.Yt.pi&&(l.fillStyle=s,l.fillRect(f.fi,f.mi,f.wi-f.fi,f.gi)),this.Yt.Mi&&(l.fillStyle=t.D,l.fillRect(u.li?f.bi-f.di:0,f._i,f.di,f.Si-f._i)),u});e.useMediaCoordinateSpace(({context:c})=>{const l=a.xi;c.font=t.k,c.textAlign=a.li?"right":"left",c.textBaseline="middle",c.fillStyle=s,c.fillText(this.Yt.ri,l.Ci,(l._i+l.Si)/2+l.Pi)})}hi(e,t,n,i){const{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:c,verticalPixelRatio:l}=e,u=this.Yt.pi||!this.Yt.ki?t.C:0,f=this.Yt.yi?t.S:0,d=t.A+this.ei.Ti,h=t.V+this.ei.Ri,g=t.I,p=t.B,m=this.Yt.ri,y=t.P,v=n.Di(s,m),w=Math.ceil(n.Vi(s,m)),_=y+d+h,x=t.S+g+p+w+u,E=Math.max(1,Math.floor(l));let S=Math.round(_*l);S%2!=E%2&&(S+=1);const T=f>0?Math.max(1,Math.floor(f*c)):0,C=Math.round(x*c),P=Math.round(u*c),V=this.ei.Ii??this.ei.Bi,L=Math.round(V*l)-Math.floor(.5*l),D=Math.floor(L+E/2-S/2),b=D+S,I=i==="right",B=I?a.width-f:f,F=I?o.width-T:T;let z,G,Q;return I?(z=F-C,G=F-P,Q=B-u-g-f):(z=F+C,G=F+P,Q=B+u+g),{li:I,ai:{_i:D,mi:L,Si:b,ui:C,ci:S,ft:2*c,di:T,oi:z,fi:F,wi:G,gi:E,bi:o.width},xi:{_i:D/l,Si:b/l,Ci:Q,Pi:v}}}}class Fw{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||TF)(this.Ai,this.Ei),this.Oi=new(e||TF)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class a6e extends Fw{constructor(e,t,n){super(),this.Jt=e,this.Yi=t,this.ji=n}qi(e,t,n){if(e.Vt=!1,this.Jt.N().mode===2)return;const i=this.Jt.N().horzLine;if(!i.labelVisible)return;const s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||s===null)return;const o=this.Yi.Xi().X(i.labelBackgroundColor);n.Z=o.Z,e.R=o.G;const a=2/12*this.Yi.P();n.Ti=a,n.Ri=a;const c=this.ji(this.Yi);n.Bi=c.Bi,e.ri=this.Yi.Zi(c.gt,s),e.Vt=!0}}const c6e=/[1-9]/g;class ZJ{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const n=e.useMediaCoordinateSpace(({context:d})=>(d.font=t.k,Math.round(t.Gi.Vi(d,ft(this.Yt).ri,c6e))));if(n<=0)return;const i=t.Ji,s=n+2*i,o=s/2,a=this.Yt.Qi;let c=this.Yt.Bi,l=Math.floor(c-o)+.5;l<0?(c+=Math.abs(0-l),l=Math.floor(c-o)+.5):l+s>a&&(c-=Math.abs(a-(l+s)),l=Math.floor(c-o)+.5);const u=l+s,f=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:h,verticalPixelRatio:g})=>{const p=ft(this.Yt);d.fillStyle=p.Z;const m=Math.round(l*h),y=Math.round(0*g),v=Math.round(u*h),w=Math.round(f*g),_=Math.round(2*h);if(d.beginPath(),d.moveTo(m,y),d.lineTo(m,w-_),d.arcTo(m,w,m+_,w,_),d.lineTo(v-_,w),d.arcTo(v,w,v,w-_,_),d.lineTo(v,y),d.fill(),p.pi){const x=Math.round(p.Bi*h),E=y,S=Math.round((E+t.C)*g);d.fillStyle=p.R;const T=Math.max(1,Math.floor(h)),C=Math.floor(.5*h);d.fillRect(x-C,E,T,S-E)}}),e.useMediaCoordinateSpace(({context:d})=>{const h=ft(this.Yt),g=0+t.S+t.C+t.A+t.P/2;d.font=t.k,d.textAlign="left",d.textBaseline="middle",d.fillStyle=h.R;const p=t.Gi.Di(d,"Apr0");d.translate(l+i,g+p),d.fillText(h.ri,0,0)})}}class l6e{constructor(e,t,n){this.xt=!0,this.Gt=new ZJ,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const n=this.ts.Et();if(n.Ki())return;e.Qi=n.Qi();const i=this.ji();if(i===null)return;e.Bi=i.Bi;const s=n.ss(this.Ct.Bt());e.ri=n.ns(ft(s)),e.Vt=!0;const o=this.ts.Xi().X(t.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=n.N().ticksVisible}}class QJ{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var RF;(function(r){r[r.Normal=0]="Normal",r[r.Magnet=1]="Magnet",r[r.Hidden=2]="Hidden",r[r.MagnetOHLC=3]="MagnetOHLC"})(RF||(RF={}));class u6e extends QJ{constructor(e,t){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=t,this.ks=((i,s)=>o=>{const a=s(),c=i();if(o===ft(this.Pt).ys())return{gt:c,Bi:a};{const l=ft(o.zt());return{gt:o.Ts(a,l),Bi:a}}})(()=>this.ds,()=>this.Ss);const n=((i,s)=>()=>{const o=this.ts.Et().Rs(i()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new l6e(this,e,n)}N(){return this.Ps}Vs(e,t){this.xs=e,this.Cs=t}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,t,n){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,n)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let t=this.gs.get(e);t||(t=new o6e(this,e),this.gs.set(e,t));let n=this.Ms.get(e);return n||(n=new i6e(this.ts,this,e),this.Ms.set(e,n)),[t,n]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,t){this.ps&&this.Pt===e||this.vs.clear();const n=[];return this.Pt===e&&n.push(this.Hs(this.vs,t,this.ks)),n}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{this.gs.get(e)?.kt(),this.Ms.get(e)?.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,t,n){this.Ys(e,t,n)&&this.Ns()}Ys(e,t,n){const i=this.bs,s=this.Ss,o=this.ds,a=this.fs,c=this.Pt,l=this.qs(n);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=n;const u=l!==null?l.zt():null;return l!==null&&u!==null?(this.ds=t,this.Ss=l.Nt(t,u)):(this.ds=NaN,this.Ss=NaN),i!==this.bs||s!==this.Ss||a!==this.fs||o!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(n=>n.Xs().Ks()).filter(Z4e),t=e.length===0?null:Math.max(...e);this.fs=t!==null?t:NaN}Hs(e,t,n){let i=e.get(t);return i===void 0&&(i=new a6e(this,t,n),e.set(t,i)),i}}function Uw(r){return r==="left"||r==="right"}class Ni{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,t){const n=function(i,s){return i===void 0?s:{tn:Math.max(i.tn,s.tn),sn:i.sn||s.sn}}(this.Zs.get(e),t);this.Zs.set(e,n)}nn(){return this.Js}en(e){const t=this.Zs.get(e);return t===void 0?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((t,n)=>{this.Qs(n,t)})}static wn(){return new Ni(2)}static gn(){return new Ni(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(t=>t.an===5);e!==-1&&this.Gs.splice(e,1)}}class eX{formatTickmarks(e){return e.map(t=>this.format(t))}}const kF=".";function ol(r,e){if(!ap(r))return"n/a";if(!om(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?r.toString():("0000000000000000"+r.toString()).slice(-e)}class zw extends eX{constructor(e,t){if(super(),t||(t=1),ap(e)&&om(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){const t=e<0?"":"";return e=Math.abs(e),t+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const t=this.Yi/this.Mn;let n=Math.floor(e),i="";const s=this.xn!==void 0?this.xn:NaN;if(t>1){let o=+(Math.round(e*t)-n*t).toFixed(this.xn);o>=t&&(o-=t,n+=1),i=kF+ol(+o.toFixed(this.xn)*this.Mn,s)}else n=Math.round(n*t)/t,s>0&&(i=kF+ol(0,s));return n.toFixed(0)+i}}class tX extends zw{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class f6e extends eX{constructor(e){super(),this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.Pn(e):e<999995?t+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.Pn(e/1e9)+"B")}Pn(e){let t;const n=Math.pow(10,this.Cn);return t=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}const d6e=/[2-9]/g;class Zb{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,t,n){return this.Bn(e,t,n).width}Di(e,t,n){const i=this.Bn(e,t,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}Bn(e,t,n){const i=n||d6e,s=String(t).replace(i,"0");if(this.Dn.has(s))return io(this.Dn.get(s)).En;if(this.kn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.Dn.set(s,{En:o,An:this.yn}),this.Rn[this.yn]=s,this.kn++,this.yn++),o}}class h6e{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,n){this.zn=e,this.M=t,this.Ln=n}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class rX{constructor(e,t,n){this.Fn=e,this.On=new Zb(50),this.Wn=t,this.O=n,this.F=-1,this.Gt=new h6e(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const t=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(t===null)return null;const n=e.qn(t);if(n==="overlay")return null;const i=this.O.Yn();return i.P!==this.F&&(this.F=i.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),i,n),this.Gt}}class p6e extends Ed{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){if(!this.Yt?.Vt)return null;const{ut:n,ct:i,Kn:s}=this.Yt;return t>=n-i-7&&t<=n+i+7?{Xn:this.Yt,Kn:s}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.Vt===!1)return;const s=Math.round(this.Yt.ut*i);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*n),rd(e,this.Yt.Xt),GJ(e,s,0,t.width))}}class nk{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new p6e,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class g6e extends nk{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),t=e.ie().ie;if(t!==2&&t!==3)return;const n=this.Jn.N();if(!n.baseLineVisible||!this.Jn.Vt())return;const i=this.Jn.zt();i!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(i.Wt,i.Wt),this.Zn.R=n.baseLineColor,this.Zn.ct=n.baseLineWidth,this.Zn.Xt=n.baseLineStyle)}}class m6e extends Ed{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){const i=this.Yt;if(i===null)return;const s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(i.ne.x*t)+o,c=i.ne.y*n;e.fillStyle=i.ee,e.beginPath();const l=Math.max(2,1.5*i.re)*t;e.arc(a,c,l,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.he,e.beginPath(),e.arc(a,c,i.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.ae,e.beginPath(),e.arc(a,c,i.ft*t+s/2,0,2*Math.PI,!1),e.stroke()}}const y6e=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class v6e{constructor(e){this.Gt=new m6e,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),t=e.Pe(),n=this.ge.zt();if(t===null||n===null)return;const i=this.ge.ke(!0);if(i.ye||!t.Te(i.Re))return;const s={x:e.qt(i.Re),y:this.ge.Ft().Nt(i.gt,n.Wt)},o=i.R,a=this.ge.N().lineWidth,c=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:c.he,ae:c.ae,ft:c.ft,ne:s})}Ce(){const e=this.Gt.se();if(e!==null){const t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,t,n,i){const s=n+(i-n)*t;return this.ge.Qt().Xi().j(e,s)}De(e,t){const n=e%2600/2600;let i;for(const l of y6e)if(n>=l.le&&n<=l.oe){i=l;break}ji(i!==void 0,"Last price animation internal logic error");const s=(n-i.le)/(i.oe-i.le);return{he:this.Ie(t,s,i.ce,i.de),ae:this.Ie(t,s,i.fe,i.pe),ft:(o=s,a=i._e,c=i.ue,a+(c-a)*o)};var o,a,c}}class b6e extends nk{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;const n=this.Jn.ke(t.priceLineSource===0);n.ye||(e.Vt=!0,e.ut=n.Bi,e.R=this.Jn.Be(n.R),e.ct=t.priceLineWidth,e.Xt=t.priceLineStyle)}}class w6e extends Fw{constructor(e){super(),this.Jt=e}qi(e,t,n){e.Vt=!1,t.Vt=!1;const i=this.Jt;if(!i.Vt())return;const s=i.N(),o=s.lastValueVisible,a=i.Ee()!=="",c=s.seriesLastValueMode===0,l=i.ke(!1);if(l.ye)return;o&&(e.ri=this.Ae(l,o,c),e.Vt=e.ri.length!==0),(a||c)&&(t.ri=this.ze(l,o,a,c),t.Vt=t.ri.length>0);const u=i.Be(l.R),f=this.Jt.Qt().Xi().X(u);n.Z=f.Z,n.Bi=l.Bi,t.Ht=i.Qt().Ut(l.Bi/i.Ft().$t()),e.Ht=u,e.R=f.G,t.R=f.G}ze(e,t,n,i){let s="";const o=this.Jt.Ee();return n&&o.length!==0&&(s+=`${o} `),t&&i&&(s+=this.Jt.Ft().Le()?e.Oe:e.Ne),s.trim()}Ae(e,t,n){return t?n?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function OF(r,e,t,n){const i=Number.isFinite(e),s=Number.isFinite(t);return i&&s?r(e,t):i||s?i?e:t:n}class Bs{constructor(e,t){this.Fe=e,this.We=t}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Bs(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Bs(OF(Math.min,this.$e(),e.$e(),-1/0),OF(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!ap(e)||this.We-this.Fe===0)return;const t=.5*(this.We+this.Fe);let n=this.We-t,i=this.Fe-t;n*=e,i*=e,this.We=t+n,this.Fe=t+i}Ke(e){ap(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Bs(e.minValue,e.maxValue)}}class Qb{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Qb(Bs.Ze(e.priceRange),e.margins)}}class x6e extends nk{constructor(e,t){super(e),this.ir=t}te(){const e=this.Zn;e.Vt=!1;const t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;const n=this.ir.sr();n!==null&&(e.Vt=!0,e.ut=n,e.R=t.color,e.ct=t.lineWidth,e.Xt=t.lineStyle,e.Kn=this.ir.N().id)}}class _6e extends Fw{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,n){e.Vt=!1,t.Vt=!1;const i=this.ir.N(),s=i.axisLabelVisible,o=i.title!=="",a=this.ge;if(!s||!a.Vt())return;const c=this.ir.sr();if(c===null)return;o&&(t.ri=i.title,t.Vt=!0),t.Ht=a.Qt().Ut(c/a.Ft().$t()),e.ri=this.nr(i.price),e.Vt=!0;const l=this.ge.Qt().Xi().X(i.axisLabelColor||i.color);n.Z=l.Z;const u=i.axisLabelTextColor||l.G;e.R=u,t.R=u,n.Bi=c}nr(e){const t=this.ge.zt();return t===null?"":this.ge.Ft().Zi(e,t.Wt)}}class S6e{constructor(e,t){this.ge=e,this.Ps=t,this.er=new x6e(e,this),this.Fn=new _6e(e,this),this.rr=new rX(this.Fn,e,e.Qt())}hr(e){Oo(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,t=e.Ft();if(e.Qt().Et().Ki()||t.Ki())return null;const n=e.zt();return n===null?null:t.Nt(this.Ps.price,n.Wt)}}class E6e extends QJ{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const A6e={Bar:(r,e,t,n)=>{const i=e.upColor,s=e.downColor,o=ft(r(t,n)),a=yu(o.Wt[0])<=yu(o.Wt[3]);return{cr:o.R??(a?i:s)}},Candlestick:(r,e,t,n)=>{const i=e.upColor,s=e.downColor,o=e.borderUpColor,a=e.borderDownColor,c=e.wickUpColor,l=e.wickDownColor,u=ft(r(t,n)),f=yu(u.Wt[0])<=yu(u.Wt[3]);return{cr:u.R??(f?i:s),dr:u.Ht??(f?o:a),pr:u.vr??(f?c:l)}},Custom:(r,e,t,n)=>({cr:ft(r(t,n)).R??e.color}),Area:(r,e,t,n)=>{const i=ft(r(t,n));return{cr:i.vt??e.lineColor,vt:i.vt??e.lineColor,mr:i.mr??e.topColor,wr:i.wr??e.bottomColor}},Baseline:(r,e,t,n)=>{const i=ft(r(t,n));return{cr:i.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:i.gr??e.topLineColor,Mr:i.Mr??e.bottomLineColor,br:i.br??e.topFillColor1,Sr:i.Sr??e.topFillColor2,Cr:i.Cr??e.bottomFillColor1,Pr:i.Pr??e.bottomFillColor2}},Line:(r,e,t,n)=>{const i=ft(r(t,n));return{cr:i.R??e.color,vt:i.R??e.color}},Histogram:(r,e,t,n)=>({cr:ft(r(t,n)).R??e.color})};class I6e{constructor(e){this.kr=(t,n)=>n!==void 0?n.Wt:this.ge.Xs().yr(t),this.ge=e,this.Tr=A6e[e.Rr()]}Dr(e,t){return this.Tr(this.kr,this.ge.N(),e,t)}}function nX(r,e,t,n,i=0,s=e.length){let o=s-i;for(;0<o;){const a=o>>1,c=i+a;n(e[c],t)===r?(i=c+1,o-=a+1):o=a}return i}const cp=nX.bind(null,!0),iX=nX.bind(null,!1);var PF;(function(r){r[r.NearestLeft=-1]="NearestLeft",r[r.None=0]="None",r[r.NearestRight=1]="NearestRight"})(PF||(PF={}));const Wl=30;class C6e{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,t=0){const n=this.Nr(e,t);return n===null?null:{...this.Wr(n),Re:this.Or(n)}}Hr(){return this.Vr}Ur(e,t,n){if(this.Ki())return null;let i=null;for(const s of n)i=Gy(i,this.$r(e,t,s));return i}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(t=>t.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,t){const n=this.Yr(e);if(n===null&&t!==0)switch(t){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return n}jr(e){let t=this.Xr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Kr(e){const t=this.Zr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){const t=this.Xr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Xr(e){return cp(this.Vr,e,(t,n)=>t.Re<n)}Zr(e){return iX(this.Vr,e,(t,n)=>t.Re>n)}Gr(e,t,n){let i=null;for(let s=e;s<t;s++){const o=this.Vr[s].Wt[n];Number.isNaN(o)||(i===null?i={Jr:o,Qr:o}:(o<i.Jr&&(i.Jr=o),o>i.Qr&&(i.Qr=o)))}return i}$r(e,t,n){if(this.Ki())return null;let i=null;const s=ft(this.Lr()),o=ft(this.Ks()),a=Math.max(e,s),c=Math.min(t,o),l=Math.ceil(a/Wl)*Wl,u=Math.max(l,Math.floor(c/Wl)*Wl);{const d=this.Xr(a),h=this.Zr(Math.min(c,l,t));i=Gy(i,this.Gr(d,h,n))}let f=this.Ir.get(n);f===void 0&&(f=new Map,this.Ir.set(n,f));for(let d=Math.max(l+1,a);d<u;d+=Wl){const h=Math.floor(d/Wl);let g=f.get(h);if(g===void 0){const p=this.Xr(h*Wl),m=this.Zr((h+1)*Wl-1);g=this.Gr(p,m,n),f.set(h,g)}i=Gy(i,g)}{const d=this.Xr(u),h=this.Zr(c);i=Gy(i,this.Gr(d,h,n))}return i}}function Gy(r,e){return r===null?e:e===null?r:{Jr:Math.min(r.Jr,e.Jr),Qr:Math.max(r.Qr,e.Qr)}}class T6e{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){this.th.drawBackground?.(e)}}class R6e{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const t=new T6e(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}}class sX{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){const e=this.ah.paneViews?.()??[];if(this.hh?.nh===e)return this.hh.eh;const t=e.map(n=>new R6e(n));return this.hh={nh:e,eh:t},t}jn(e,t){return this.ah.hitTest?.(e,t)??null}}let k6e=class extends sX{us(){return[]}};class O6e{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){this.th.drawBackground?.(e)}}class $F{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const t=new O6e(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}}function oX(r){return{ri:r.text(),Bi:r.coordinate(),Ii:r.fixedCoordinate?.(),R:r.textColor(),Z:r.backColor(),Vt:r.visible?.()??!0,pi:r.tickVisible?.()??!0}}class P6e{constructor(e,t){this.Gt=new ZJ,this._h=e,this.uh=t}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...oX(this._h)}),this.Gt}}class $6e extends Fw{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,n){const i=oX(this._h);n.Z=i.Z,e.R=i.R;const s=2/12*this.Yi.P();n.Ti=s,n.Ri=s,n.Bi=i.Bi,n.Ii=i.Ii,e.ri=i.ri,e.Vt=i.Vt,e.pi=i.pi}}class D6e extends sX{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){const e=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===e)return this.dh.eh;const t=this.ge.Qt().Et(),n=e.map(i=>new P6e(i,t));return this.dh={nh:e,eh:n},n}Ws(){const e=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===e)return this.fh.eh;const t=this.ge.Ft(),n=e.map(i=>new $6e(i,t));return this.fh={nh:e,eh:n},n}wh(){const e=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===e)return this.ph.eh;const t=e.map(n=>new $F(n));return this.ph={nh:e,eh:t},t}gh(){const e=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===e)return this.mh.eh;const t=e.map(n=>new $F(n));return this.mh={nh:e,eh:t},t}Mh(e,t){return this.ah.autoscaleInfo?.(e,t)??null}}function xA(r,e,t,n){r.forEach(i=>{e(i).forEach(s=>{s.rh()===t&&n.push(s)})})}function _A(r){return r.Fs()}function M6e(r){return r.wh()}function B6e(r){return r.gh()}const N6e=["Area","Line","Baseline"];class qw extends E6e{constructor(e,t,n,i,s){super(e),this.Yt=new C6e,this.er=new b6e(this),this.bh=[],this.Sh=new g6e(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=n,this.yh=t;const o=new w6e(this);this.vs=[o],this.rr=new rX(o,this,e),N6e.includes(this.yh)&&(this.xh=new v6e(this)),this.Th(),this.sh=i(this,this.Qt(),s)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const t={ye:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return t;const i=this.Qt().Et().Pe(),s=this.zt();if(i===null||s===null)return t;let o,a;if(e){const f=this.Yt.Ar();if(f===null)return t;o=f,a=f.Re}else{const f=this.Yt.Fr(i.bi(),-1);if(f===null||(o=this.Yt.yr(f.Re),o===null))return t;a=f.Re}const c=o.Wt[3],l=this.Rh().Dr(a,{Wt:o}),u=n.Nt(c,s.Wt);return{ye:!1,gt:c,ri:n.Zi(c,s.Wt),Oe:n.Dh(c),Ne:n.Vh(c,s.Wt),R:l.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new I6e(this)),this.Ch}N(){return this.Ps}hr(e){const t=e.priceScaleId;t!==void 0&&t!==this.Ps.priceScaleId&&this.Qt().Ih(this,t),Oo(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,t){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(t&&t.zh?this.xh.be():e.length===0&&this.xh.Me());const n=this.Qt().Hn(this);this.Qt().Lh(n),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const t=new S6e(this,e);return this.bh.push(t),this.Qt().Eh(this),t}Nh(e){const t=this.bh.indexOf(e);t!==-1&&this.bh.splice(t,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const t=e.Uh();return this.Yt.Fr(t,1)}Xs(){return this.Yt}$h(e){const t=this.Yt.yr(e);return t===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3]}:t.Wt[3]}Xh(e){const t=[];xA(this.kh,_A,"top",t);const n=this.xh;return n!==null&&n.Vt()&&(this.Ph===null&&n.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),n.Se(),t.unshift(n)),t}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const t=this.bh.map(n=>n.lr());return e.push(...t),xA(this.kh,_A,"normal",e),e}Jh(){return this.Qh(_A,"bottom")}ta(e){return this.Qh(M6e,e)}ia(e){return this.Qh(B6e,e)}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(n=>n!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,t){if(t!==this.es&&!this.Gh())return[];const n=[...this.vs];for(const i of this.bh)n.push(i.ur());return this.kh.forEach(i=>{n.push(...i.Ws())}),n}cs(){const e=[];return this.kh.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider(()=>{const i=this.na(e,t);return i===null?null:i.Xe()});return Qb.Ze(n)}return this.na(e,t)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.kt();for(const e of this.vs)e.kt();for(const e of this.bh)e.kt();this.er.kt(),this.Sh.kt(),this.xh?.kt(),this.kh.forEach(e=>e.Ns())}Ft(){return ft(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const t=this.Yt.yr(e);return t===null?null:{gt:t.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new D6e(e,this))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Uw(this.Ft().wa())}na(e,t){if(!om(e)||!om(t)||this.Yt.Ki())return null;const n=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],i=this.Yt.Ur(e,t,n);let s=i!==null?new Bs(i.Jr,i.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.Ps.base,c=new Bs(a,a);s=s!==null?s.vn(c):c}return this.kh.forEach(a=>{const c=a.Mh(e,t);if(c?.priceRange){const l=new Bs(c.priceRange.minValue,c.priceRange.maxValue);s=s!==null?s.vn(l):l}c?.margins&&(o=c.margins)}),new Qb(s,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.ha=new f6e(this.Ps.priceFormat.precision);break;case"percent":this.ha=new tX(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new zw(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,t){const n=[];return xA(this.kh,e,t,n),n}}const L6e=[3],F6e=[0,1,2,3];class U6e{constructor(e){this.Ps=e}Ma(e,t,n){let i=e;if(this.Ps.mode===0)return i;const s=n.ys(),o=s.zt();if(o===null)return i;const a=s.Nt(e,o),c=n.ba().filter(u=>u instanceof qw).reduce((u,f)=>{if(n.Un(f)||!f.Vt())return u;const d=f.Ft(),h=f.Xs();if(d.Ki()||!h.Te(t))return u;const g=h.yr(t);if(g===null)return u;const p=yu(f.zt()),m=this.Ps.mode===3?F6e:L6e;return u.concat(m.map(y=>d.Nt(g.Wt[y],p.Wt)))},[]);if(c.length===0)return i;c.sort((u,f)=>Math.abs(u-a)-Math.abs(f-a));const l=c[0];return i=s.Ts(l,o),i}}function Bh(r,e,t){return Math.min(Math.max(r,e),t)}function Yy(r,e,t){return e-r<=t}class z6e extends Ed{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const s=Math.max(1,Math.floor(n));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=ft(this.Yt);if(o.Sa){e.strokeStyle=o.xa,rd(e,o.Ca),e.beginPath();for(const a of o.Pa){const c=Math.round(a.ka*n);e.moveTo(c,-s),e.lineTo(c,t.height+s)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,rd(e,o.Ra),e.beginPath();for(const a of o.Da){const c=Math.round(a.ka*i);e.moveTo(-s,c),e.lineTo(t.width+s,c)}e.stroke()}})}}class q6e{constructor(e){this.Gt=new z6e,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,t={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(n=>({ka:n.coord}))};this.Gt.ht(t),this.xt=!1}return this.Gt}}class j6e{constructor(e){this.sh=new q6e(e)}lr(){return this.sh}}const SA={Ia:4,Ba:1e-4};function wh(r,e){const t=100*(r-e)/e;return e<0?-t:t}function V6e(r,e){const t=wh(r.$e(),e),n=wh(r.qe(),e);return new Bs(t,n)}function wg(r,e){const t=100*(r-e)/e+100;return e<0?-t:t}function K6e(r,e){const t=wg(r.$e(),e),n=wg(r.qe(),e);return new Bs(t,n)}function e1(r,e){const t=Math.abs(r);if(t<1e-15)return 0;const n=Math.log10(t+e.Ba)+e.Ia;return r<0?-n:n}function xg(r,e){const t=Math.abs(r);if(t<1e-15)return 0;const n=Math.pow(10,t-e.Ia)-e.Ba;return r<0?-n:n}function P0(r,e){if(r===null)return null;const t=e1(r.$e(),e),n=e1(r.qe(),e);return new Bs(t,n)}function Q0(r,e){if(r===null)return null;const t=xg(r.$e(),e),n=xg(r.qe(),e);return new Bs(t,n)}function EA(r){if(r===null)return SA;const e=Math.abs(r.qe()-r.$e());if(e>=1||e<1e-15)return SA;const t=Math.ceil(Math.abs(Math.log10(e))),n=SA.Ia+t;return{Ia:n,Ba:1/Math.pow(10,n)}}class AA{constructor(e,t){if(this.Ea=e,this.Aa=t,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let n=this.Ea;n!==1;){if(n%2==0)this.za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),n/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,n){const i=this.Ea===0?0:1/this.Ea;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Aa[0];for(;;){const f=Yy(s,i,1e-14)&&s>i+1e-14,d=Yy(s,n*a,1e-14),h=Yy(s,1,1e-14);if(!(f&&d&&h))break;s/=a,a=this.Aa[++o%this.Aa.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.za.length>0&&(c=s,l=1,u=1e-14,Math.abs(c-l)<u))for(o=0,a=this.za[0];Yy(s,n*a,1e-14)&&s>i+1e-14;)s/=a,a=this.za[++o%this.za.length];var c,l,u;return s}}class DF{constructor(e,t,n,i){this.Oa=[],this.Yi=e,this.Ea=t,this.Na=n,this.Fa=i}La(e,t){if(e<t)throw new Error("high < low");const n=this.Yi.$t(),i=(e-t)*this.Wa()/n,s=new AA(this.Ea,[2,2.5,2]),o=new AA(this.Ea,[2,2,2.5]),a=new AA(this.Ea,[2.5,2,2]),c=[];return c.push(s.La(e,t,i),o.La(e,t,i),a.La(e,t,i)),function(l){if(l.length<1)throw Error("array is empty");let u=l[0];for(let f=1;f<l.length;++f)l[f]<u&&(u=l[f]);return u}(c)}Ha(){const e=this.Yi,t=e.zt();if(t===null)return void(this.Oa=[]);const n=e.$t(),i=this.Na(n-1,t),s=this.Na(0,t),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,c=n-1-o,l=Math.max(i,s),u=Math.min(i,s);if(l===u)return void(this.Oa=[]);const f=this.La(l,u);if(this.$a(t,f,l,u,a,c),e.qa()&&this.Ya(f,u,l)){const g=this.Yi.ja();this.Ka(t,f,a,c,g,2*g)}const d=this.Oa.map(g=>g.Xa),h=this.Yi.Za(d);for(let g=0;g<this.Oa.length;g++)this.Oa[g].Ga=h[g]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,t,n,i,s,o){const a=this.Oa,c=this.Yi;let l=n%t;l+=l<0?t:0;const u=n>=i?1:-1;let f=null,d=0;for(let h=n-l;h>i;h-=t){const g=this.Fa(h,e,!0);f!==null&&Math.abs(g-f)<this.Wa()||g<s||g>o||(d<a.length?(a[d].ka=g,a[d].Ga=c.Ja(h),a[d].Xa=h):a.push({ka:g,Ga:c.Ja(h),Xa:h}),d++,f=g,c.Qa()&&(t=this.La(h*u,i)))}a.length=d}Ka(e,t,n,i,s,o){const a=this.Oa,c=this.tl(e,n,s,o),l=this.tl(e,i,-o,-s),u=this.Fa(0,e,!0)-this.Fa(t,e,!0);a.length>0&&a[0].ka-c.ka<u/2&&a.shift(),a.length>0&&l.ka-a[a.length-1].ka<u/2&&a.pop(),a.unshift(c),a.push(l)}tl(e,t,n,i){const s=(n+i)/2,o=this.Na(t+n,e),a=this.Na(t+i,e),c=Math.min(o,a),l=Math.max(o,a),u=Math.max(.1,this.La(l,c)),f=this.Na(t+s,e),d=f-f%u,h=this.Fa(d,e,!0);return{Ga:this.Yi.Ja(d),ka:h,Xa:d}}Ya(e,t,n){let i=yu(this.Yi.Qe());return this.Yi.Qa()&&(i=Q0(i,this.Yi.il())),i.$e()-t<e&&n-i.qe()<e}}function aX(r){return r.slice().sort((e,t)=>ft(e.hs())-ft(t.hs()))}var MF;(function(r){r[r.Normal=0]="Normal",r[r.Logarithmic=1]="Logarithmic",r[r.Percentage=2]="Percentage",r[r.IndexedTo100=3]="IndexedTo100"})(MF||(MF={}));const BF=new tX,NF=new zw(100,1);class H6e{constructor(e,t,n,i,s){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new oi,this.cl=new oi,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=NF,this.gl=EA(null),this.Ml=e,this.Ps=t,this.bl=n,this.Sl=i,this.xl=s,this.Cl=new DF(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(Oo(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const t=io(e.scaleMargins.top),n=io(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(t+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+n}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const t=this.ie();let n=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),t.ie===1&&e.ie!==t.ie&&(function(s,o){if(s===null)return!1;const a=xg(s.$e(),o),c=xg(s.qe(),o);return isFinite(a)&&isFinite(c)}(this.Ge,this.gl)?(n=Q0(this.Ge,this.gl),n!==null&&this.Bl(n)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==t.ie&&(n=P0(this.Ge,this.gl),n!==null&&this.Bl(n));const i=t.ie!==this.Ps.mode;i&&(t.ie===2||this.Le())&&this.ga(),i&&(t.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&t.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(t,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,t){const n=this.Ge;(t||n===null&&e!==null||n!==null&&!n.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=wh(e,t):this.Vl()&&(e=wg(e,t)),this.kl(e,t)}$l(e,t,n){this.Fl();const i=this.Nl(),s=ft(this.Qe()),o=s.$e(),a=s.qe(),c=this.Ll()-1,l=this.Il(),u=c/(a-o),f=n===void 0?0:n.from,d=n===void 0?e.length:n.to,h=this.ql();for(let g=f;g<d;g++){const p=e[g],m=p.gt;if(isNaN(m))continue;let y=m;h!==null&&(y=h(p.gt,t));const v=i+u*(y-o),w=l?v:this.sl-1-v;p.ut=w}}Yl(e,t,n){this.Fl();const i=this.Nl(),s=ft(this.Qe()),o=s.$e(),a=s.qe(),c=this.Ll()-1,l=this.Il(),u=c/(a-o),f=n===void 0?0:n.from,d=n===void 0?e.length:n.to,h=this.ql();for(let g=f;g<d;g++){const p=e[g];let m=p.qh,y=p.Yh,v=p.jh,w=p.Kh;h!==null&&(m=h(p.qh,t),y=h(p.Yh,t),v=h(p.jh,t),w=h(p.Kh,t));let _=i+u*(m-o),x=l?_:this.sl-1-_;p.jl=x,_=i+u*(y-o),x=l?_:this.sl-1-_,p.Kl=x,_=i+u*(v-o),x=l?_:this.sl-1-_,p.Xl=x,_=i+u*(w-o),x=l?_:this.sl-1-_,p.Zl=x}}Ts(e,t){const n=this.Pl(e,t);return this.Gl(n,t)}Gl(e,t){let n=e;return this.Le()?n=function(i,s){return s<0&&(i=-i),i/100*s+s}(n,t):this.Vl()&&(n=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(n,t)),n}ba(){return this.dl}Dt(){return this.pl||(this.pl=aX(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const t=this.dl.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.dl.splice(t,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const t of this.dl){const n=t.zt();n!==null&&(e===null||n.Hh<e.Hh)&&(e=n)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const t=this.Cl.Va();return this.vl={Va:t,so:e},this.ul.p(),t}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=ft(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let t=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const n=ft(this.el).Ue();t=Math.max(t,.1),n.je(t),this.Bl(n)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=ft(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const t=ft(this.Qe()).Ye()/(this.Ll()-1);let n=e-this.wl;this.Il()&&(n*=-1);const i=n*t,s=ft(this.el).Ue();s.Ke(i),this.Bl(s,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,t){switch(this.Ps.mode){case 2:return this._o(wh(e,t));case 3:return this.ra().format(wg(e,t));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,ft(this.fl).ra())}Vh(e,t){return e=wh(e,t),this._o(e,BF)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const n of this.dl)n.hs()<e&&(e=n.hs(),this.fl=n);let t=100;this.fl!==null&&(t=Math.round(1/this.fl.ea())),this.ha=NF,this.Le()?(this.ha=BF,t=100):this.Vl()?(this.ha=new zw(100,1),t=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new DF(this,t,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,t){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?e1(e,this.gl):e;const n=ft(this.Qe()),i=this.Nl()+(this.Ll()-1)*(e-n.$e())/n.Ye();return this.Ul(i)}Pl(e,t){if(this.Fl(),this.Ki())return 0;const n=this.Ul(e),i=ft(this.Qe()),s=i.$e()+i.Ye()*((n-this.Nl())/(this.Ll()-1));return this.Qa()?xg(s,this.gl):s}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let t=null;const n=this.do();let i=0,s=0;for(const c of n){if(!c.Vt())continue;const l=c.zt();if(l===null)continue;const u=c.Mh(e.Uh(),e.bi());let f=u&&u.Qe();if(f!==null){switch(this.Ps.mode){case 1:f=P0(f,this.gl);break;case 2:f=V6e(f,l.Wt);break;case 3:f=K6e(f,l.Wt)}if(t=t===null?f:t.vn(ft(f)),u!==null){const d=u.tr();d!==null&&(i=Math.max(i,d.above),s=Math.max(s,d.below))}}}if(this.qa()&&(i=Math.max(i,this.ja()),s=Math.max(s,this.ja())),i===this.ol&&s===this._l||(this.ol=i,this._l=s,this.vl=null,this.Tl()),t!==null){if(t.$e()===t.qe()){const c=this.fl,l=5*(c===null||this.Le()||this.Vl()?1:c.ea());this.Qa()&&(t=Q0(t,this.gl)),t=new Bs(t.$e()-l,t.qe()+l),this.Qa()&&(t=P0(t,this.gl))}if(this.Qa()){const c=Q0(t,this.gl),l=EA(c);if(o=l,a=this.gl,o.Ia!==a.Ia||o.Ba!==a.Ba){const u=this.el!==null?Q0(this.el,this.gl):null;this.gl=l,t=P0(c,l),u!==null&&(this.el=P0(u,l))}}this.Bl(t)}else this.Ge===null&&(this.Bl(new Bs(-.5,.5)),this.gl=EA(null));var o,a}ql(){return this.Le()?wh:this.Vl()?wg:this.Qa()?e=>e1(e,this.gl):null}vo(e,t,n){return t===void 0?(n===void 0&&(n=this.ra()),n.format(e)):t(e)}mo(e,t,n){return t===void 0?(n===void 0&&(n=this.ra()),n.formatTickmarks(e)):t(e)}nr(e,t){return this.vo(e,this.Sl.priceFormatter,t)}co(e,t){const n=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(n?i=>i.map(n):void 0),t)}_o(e,t){return this.vo(e,this.Sl.percentageFormatter,t)}uo(e,t){const n=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(n?i=>i.map(n):void 0),t)}}function LF(r){return r instanceof qw}class FF{constructor(e,t){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new oi,this.kh=[],this.uh=e,this.ts=t,this.Co=new j6e(this);const n=t.N();this.Po=this.ko("left",n.leftPriceScale),this.yo=this.ko("right",n.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(n)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const t=Array.from(this.wo.values());for(const n of t){const i=ft(n[0].Ft());i.hr(e.overlayPriceScales),e.localization&&i.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?io(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const t=e.oh();return t.detached&&t.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(t=>{if(this.Un(t)){const n=t.Ft();n!==null&&n.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(LF)}ba(){return this.dl}Un(e){const t=e.Ft();return t===null||this.Po!==t&&this.yo!==t}Jl(e,t,n){this.No(e,t,n?e.hs():this.dl.length)}io(e,t){const n=this.dl.indexOf(e);ji(n!==-1,"removeDataSource: invalid data source"),this.dl.splice(n,1),t||this.dl.forEach((o,a)=>o.ls(a));const i=ft(e.Ft()).wa();if(this.wo.has(i)){const o=io(this.wo.get(i)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(i))}const s=e.Ft();s&&s.ba().indexOf(e)>=0&&(s.io(e),this.Fo(s)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,t){e.eo(t)}$o(e,t){e.ro(t),this.Ao()}qo(e){e.ho()}Yo(e,t){e.ao(t)}jo(e,t){e.lo(t),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const t=this.uh.Pe();e.yl({sn:!0}),t!==null&&e.fo(t),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=aX(this.dl)),this.pl}Qo(e,t){t=Bh(t,0,this.dl.length-1);const n=this.dl.indexOf(e);ji(n!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(n,1),this.dl.splice(t,0,e),this.dl.forEach((i,s)=>i.ls(s)),this.pl=null;for(const i of[this.Po,this.yo])i.Ql(),i.ga();this.ts.ar()}It(){return this.Dt().filter(LF)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new k6e(e))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(n=>n!==null)}Xo(e){const t=e.do();if(t&&t.length>0&&!this.uh.Ki()){const n=this.uh.Pe();n!==null&&e.fo(n)}e.Ns()}No(e,t,n){let i=this.Do(t);if(i===null&&(i=this.ko(t,this.ts.N().overlayPriceScales)),this.dl.splice(n,0,e),!Uw(t)){const s=this.wo.get(t)||[];s.push(e),this.wo.set(t,s)}e.ls(n),i.Jl(e),e._s(i),this.Fo(i),this.pl=null}To(e,t,n){t.ie!==n.ie&&this.Xo(e)}ko(e,t){const n={visible:!0,autoScale:!0,...sl(t)},i=new H6e(e,n,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return i.zl(this.$t()),i}}function Jy(r){return{n_:r.n_,e_:{Kn:r.r_.externalId},h_:r.r_.cursorStyle}}function W6e(r,e,t,n){for(const i of r){const s=i.Tt(n);if(s!==null&&s.jn){const o=s.jn(e,t);if(o!==null)return{a_:i,e_:o}}}return null}function G6e(r){return r.Fs!==void 0}function cX(r,e,t){const n=[r,...r.Dt()],i=function(s,o,a){let c,l;for(const d of s){const h=d.sa?.(o,a)??[];for(const g of h)u=g.zOrder,f=c?.zOrder,(!f||u==="top"&&f!=="top"||u==="normal"&&f==="bottom")&&(c=g,l=d)}var u,f;return c&&l?{r_:c,n_:l}:null}(n,e,t);if(i?.r_.zOrder==="top")return Jy(i);for(const s of n){if(i&&i.n_===s&&i.r_.zOrder!=="bottom"&&!i.r_.isBackground)return Jy(i);if(G6e(s)){const o=W6e(s.Fs(r),e,t,r);if(o!==null)return{n_:s,a_:o.a_,e_:o.e_}}if(i&&i.n_===s&&i.r_.zOrder!=="bottom"&&i.r_.isBackground)return Jy(i)}return i?.r_?Jy(i):null}class Y6e{constructor(e,t,n=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=t,this.Vn=n}__(e){const t=e.time,n=this.o_.cacheKey(t),i=this.Dn.get(n);if(i!==void 0)return i.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(io(o)),this.Tn++,this.kn--}const s=this.l_(e);return this.Dn.set(n,{u_:s,An:this.yn}),this.Rn.set(this.yn,n),this.kn++,this.yn++,s}}class _g{constructor(e,t){ji(e<=t,"right should be >= left"),this.c_=e,this.d_=t}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function UF(r,e){return r===null||e===null?r===e:r.He(e)}class J6e{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,t){this.g_(t),this.Dn=null;for(let n=t;n<e.length;++n){const i=e[n];let s=this.p_.get(i.timeWeight);s===void 0&&(s=[],this.p_.set(i.timeWeight,s)),s.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}M_(e,t,n,i,s){const o=Math.ceil(t/e);return this.Dn!==null&&this.Dn.b_===o&&s===this.Dn.S_&&n===this.Dn.x_||(this.Dn={S_:s,x_:n,Va:this.C_(o,n,i),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const t=[];this.p_.forEach((n,i)=>{e<=n[0].index?t.push(i):n.splice(cp(n,e,s=>s.index<e),1/0)});for(const n of t)this.p_.delete(n)}C_(e,t,n){let i=[];const s=o=>!t||n.has(o.index);for(const o of Array.from(this.p_.keys()).sort((a,c)=>c-a)){if(!this.p_.get(o))continue;const a=i;i=[];const c=a.length;let l=0;const u=io(this.p_.get(o)),f=u.length;let d=1/0,h=-1/0;for(let g=0;g<f;g++){const p=u[g],m=p.index;for(;l<c;){const y=a[l],v=y.index;if(!(v<m&&s(y))){d=v;break}l++,i.push(y),h=v,d=1/0}if(d-m>=e&&m-h>=e&&s(p))i.push(p),h=m;else if(this.v_)return a}for(;l<c;l++)s(a[l])&&i.push(a[l])}return i}}class Nh{constructor(e){this.P_=e}k_(){return this.P_===null?null:new _g(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new Nh(null)}}function X6e(r,e){return r.weight>e.weight?r:e}class Z6e{constructor(e,t,n,i){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new J6e,this.I_=new Map,this.B_=Nh.T_(),this.E_=!0,this.A_=new oi,this.z_=new oi,this.L_=new oi,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=t,this.Sl=n,this.U_=t.rightOffset,this.q_=t.barSpacing,this.ts=e,this.o_=i,this.Y_(),this.V_.m_(t.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){Oo(this.Sl,e),this.X_(),this.Y_()}hr(e,t){Oo(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){return this.D_[e]?.time??null}ss(e){return this.D_[e]??null}J_(e,t){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return t?this.D_.length-1:null;const n=cp(this.D_,this.o_.key(e),(i,s)=>this.o_.key(i.time)<s);return this.o_.key(e)<this.o_.key(this.D_[n].time)?t?n:null:n}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const t={from:e.Uh(),to:e.bi()};return this.nu(t)}nu(e){const t=Math.round(e.from),n=Math.round(e.to),i=ft(this.eu()),s=ft(this.ru());return{from:ft(this.ss(Math.max(i,t))),to:ft(this.ss(Math.min(s,n)))}}hu(e){return{from:ft(this.J_(e.from,!0)),to:ft(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const t=this.iu(),n=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const i=this.q_*e/n;this.q_=i}if(this.Ps.fixLeftEdge&&t!==null&&t.Uh()<=0){const i=n-e;this.U_-=Math.round(i/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!om(e))return 0;const t=this.ou()+this.U_-e;return this.Mo-(t+.5)*this.q_-1}_u(e,t){const n=this.ou(),i=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=i;o<s;o++){const a=e[o].wt,c=n+this.U_-a,l=this.Mo-(c+.5)*this.q_-1;e[o]._t=l}}uu(e,t){const n=Math.ceil(this.cu(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.du(n)?this.fu(n):n}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(t/e),i=ft(this.Pe()),s=Math.max(i.Uh(),i.Uh()-n),o=Math.max(i.bi(),i.bi()-n),a=this.V_.M_(e,t,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.eu()+n,l=this.ru()-n,u=this.gu(),f=this.Ps.fixLeftEdge||u,d=this.Ps.fixRightEdge||u;let h=0;for(const g of a){if(!(s<=g.index&&g.index<=o))continue;let p;h<this.H_.length?(p=this.H_[h],p.coord=this.qt(g.index),p.label=this.Mu(g),p.weight=g.weight):(p={needAlignCoordinate:!1,coord:this.qt(g.index),label:this.Mu(g),weight:g.weight},this.H_.push(p)),this.q_>t/2&&!u?p.needAlignCoordinate=!1:p.needAlignCoordinate=f&&g.index<=c||d&&g.index>=l,h++}return this.H_.length=h,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,t){const n=this.cu(e),i=this.vu(),s=i+t*(i/10);this.dn(s),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(n-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const t=Bh(this.Mo-e,0,this.Mo),n=Bh(this.Mo-ft(this.ml),0,this.Mo);t!==0&&n!==0&&this.dn(this.O_.vu*t/n)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const t=(this.wl-e)/this.vu();this.U_=ft(this.O_).wu+t,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.U_,i=performance.now();this.ts._n({Tu:s=>(s-i)/t>=1,Ru:s=>{const o=(s-i)/t;return o>=1?e:n+(e-n)*o}})}kt(e,t){this.E_=!0,this.D_=e,this.V_.w_(e,t),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const t=e.f_();this.mu(this.Mo/t),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),t=this.ru();e!==null&&t!==null&&this.Bu(new _g(e,t+this.Ps.rightOffset))}Au(e){const t=new _g(e.from,e.to);this.Bu(t)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const t of e)for(const n of t.ma())this.F_.set(n,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const t=this.zu(e),n=this.ou()+this.U_-t;return Math.round(1e6*n)/1e6}mu(e){const t=this.q_;this.q_=e,this.au(),t!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(Nh.T_());const e=this.ou(),t=this.Mo/this.q_,n=this.U_+e,i=new _g(n-t+1,n);this.Ou(new Nh(i))}au(){const e=Bh(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const t=this.Hu();this.U_>t&&(this.U_=t,this.E_=!0)}Wu(){const e=this.eu(),t=this.R_;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let t=this.I_.get(e.weight);return t===void 0&&(t=new Y6e(n=>this.Uu(n),this.o_),this.I_.set(e.weight,t)),t.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const t=this.B_;this.B_=e,UF(t.k_(),this.B_.k_())||this.A_.p(),UF(t.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const t=this.Pe();if(t===null)return;const n=t.Uh()-e;if(n<0){const i=this.U_-n-1;this.fn(i)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const t=function*(i){const s=Math.round(i),o=s<i;let a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++}(e),n=this.ru();for(;n;){const i=t.next().value;if(this.F_.get(i))return i;if(i<0||i>n)break}return e}}var zF,qF,jF,VF,KF;(function(r){r[r.OnTouchEnd=0]="OnTouchEnd",r[r.OnNextTap=1]="OnNextTap"})(zF||(zF={}));class Q6e{constructor(e,t,n){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new oi,this.Ku=new oi,this.Xu=null,this.Zu=e,this.Ps=t,this.o_=n,this.xl=new e6e(this.Ps.layout.colorParsers),this.Gu=new Q4e(this),this.uh=new Z6e(this,t.timeScale,this.Ps.localization,n),this.Ct=new u6e(this,t.crosshair),this.Ju=new U6e(t.crosshair),t.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(Ni.gn())}ar(){this.ec(Ni.wn())}Zh(){this.ec(new Ni(1))}Eh(e){const t=this.rc(e);this.ec(t)}hc(){return this.Yu}ac(e){if(this.Yu?.n_===e?.n_&&this.Yu?.e_?.Kn===e?.e_?.Kn)return;const t=this.Yu;this.Yu=e,t!==null&&this.Eh(t.n_),e!==null&&e.n_!==t?.n_&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Oo(this.Ps,e),this.$u.forEach(t=>t.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,t,n=0){const i=this.$u[n];if(i===void 0)return;if(e==="left")return Oo(this.Ps,{leftPriceScale:t}),i.Ro({leftPriceScale:t}),this.ju.p(),void this.Bh();if(e==="right")return Oo(this.Ps,{rightPriceScale:t}),i.Ro({rightPriceScale:t}),this.ju.p(),void this.Bh();const s=this.oc(e,n);s!==null&&(s.Ft.hr(t),this.ju.p())}oc(e,t){const n=this.$u[t];if(n===void 0)return null;const i=n.Do(e);return i!==null?{Us:n,Ft:i}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,t){e.zl(t),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(t=>t.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(ji(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,t){if(this.$u.length<2)return;ji(e>=0&&e<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u.reduce((f,d)=>f+d.Io(),0),s=this.$u.reduce((f,d)=>f+d.$t(),0),o=s-30*(this.$u.length-1);t=Math.min(o,Math.max(30,t));const a=i/s,c=n.$t();n.Bo(t*a);let l=t-c,u=this.$u.length-1;for(const f of this.$u)if(f!==n){const d=Math.min(o,Math.max(30,f.$t()-l/u));l-=f.$t()-d,u-=1;const h=d*a;f.Bo(h)}this.Bh()}vc(e,t){ji(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u[t];this.$u[e]=i,this.$u[t]=n,this.Bh()}mc(e,t){if(ji(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index"),e===t)return;const[n]=this.$u.splice(e,1);this.$u.splice(t,0,n),this.Bh()}Uo(e,t,n){e.Uo(t,n)}$o(e,t,n){e.$o(t,n),this.Ah(),this.ec(this.wc(e,2))}qo(e,t){e.qo(t),this.ec(this.wc(e,2))}Yo(e,t,n){t.Rl()||e.Yo(t,n)}jo(e,t,n){t.Rl()||(e.jo(t,n),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,t){t.Rl()||(e.Ko(t),this.ec(this.wc(e,2)))}Zo(e,t){e.Zo(t),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,t){const n=this.Et();if(n.Ki()||t===0)return;const i=n.Qi();e=Math.max(1,Math.min(e,i)),n.xu(e,t),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,t,n,i,s){this.Ct.Vs(e,t);let o=NaN,a=this.uh.uu(e,!0);const c=this.uh.Pe();c!==null&&(a=Math.min(Math.max(c.Uh(),a),c.bi()));const l=i.ys(),u=l.zt();if(u!==null&&(o=l.Ts(t,u)),o=this.Ju.Ma(o,a,i),this.Ct.As(a,o,i),this.Zh(),!s){const f=cX(i,e,t);this.ac(f&&{n_:f.n_,e_:f.e_,h_:f.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:t},n)}}Tc(e,t,n){const i=n.ys(),s=i.zt(),o=i.Nt(e,ft(s)),a=this.uh.J_(t,!0),c=this.uh.qt(ft(a));this.yc(c,o,null,n,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const t=this.Ct.Bs(),n=this.Ct.Es();this.yc(t,n,null,e)}this.Ct.Ns()}Dc(e,t,n){const i=this.uh.Rs(0);t!==void 0&&n!==void 0&&this.uh.kt(t,n);const s=this.uh.Rs(0),o=this.uh.ou(),a=this.uh.Pe();if(a!==null&&i!==null&&s!==null){const c=a.Te(o),l=this.o_.key(i)>this.o_.key(s),u=e!==null&&e>o&&!l,f=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,d=c&&(n!==void 0||f)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!d){const h=e-o;this.uh.fn(this.uh.wu()-h)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(n){return n instanceof FF}(e))return e;const t=this.$u.find(n=>n.Dt().includes(e));return t===void 0?null:t}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,t){const n=this.Qu(t);this.Bc(e,n),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const t=this.Hn(e),n=this.qu.indexOf(e);ji(n!==-1,"Series not found");const i=ft(t);this.qu.splice(n,1),i.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(i)}Ih(e,t){const n=ft(this.Hn(e));n.io(e,!0),n.Jl(e,t,!0)}Eu(){const e=Ni.wn();e.rn(),this.ec(e)}zc(e){const t=Ni.wn();t.ln(e),this.ec(t)}cn(){const e=Ni.wn();e.cn(),this.ec(e)}dn(e){const t=Ni.wn();t.dn(e),this.ec(t)}fn(e){const t=Ni.wn();t.fn(e),this.ec(t)}_n(e){const t=Ni.wn();t._n(e),this.ec(t)}hn(){const e=Ni.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,t){if(ji(t>=0,"Index should be greater or equal to 0"),t===this.Nc(e))return;const n=ft(this.Hn(e));n.io(e);const i=this.Qu(t);this.Bc(e,i),n.ba().length===0&&this.Ac(n),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const t=this.nc,n=this.tc;if(t===n)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==n||this.Xu.wr!==t)this.Xu={mr:n,wr:t,Wc:new Map};else{const s=this.Xu.Wc.get(e);if(s!==void 0)return s}const i=this.xl.tt(n,t,e/100);return this.Xu.Wc.set(e,i),i}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const t=new FF(this.uh,this);this.$u.push(t);const n=e??this.$u.length-1,i=Ni.gn();return i.Qs(n,{tn:0,sn:!0}),this.ec(i),t}Qu(e){return ji(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(t=>t.Oo().includes(e))}wc(e,t){const n=new Ni(t);if(e!==null){const i=this.$u.indexOf(e);n.Qs(i,{tn:t})}return n}rc(e,t){return t===void 0&&(t=2),this.wc(this.Hn(e),t)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(t=>t.i_().lr().kt())}Bc(e,t){const n=e.N().priceScaleId,i=n!==void 0?n:this.Lc();t.Jl(e,i),Uw(i)||e.hr(e.N())}sc(e){const t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function _T(r){return!ap(r)&&!Ym(r)}function lX(r){return ap(r)}(function(r){r[r.Disabled=0]="Disabled",r[r.Continuous=1]="Continuous",r[r.OnDataUpdate=2]="OnDataUpdate"})(qF||(qF={})),function(r){r[r.LastBar=0]="LastBar",r[r.LastVisible=1]="LastVisible"}(jF||(jF={})),function(r){r.Solid="solid",r.VerticalGradient="gradient"}(VF||(VF={})),function(r){r[r.Year=0]="Year",r[r.Month=1]="Month",r[r.DayOfMonth=2]="DayOfMonth",r[r.Time=3]="Time",r[r.TimeWithSeconds=4]="TimeWithSeconds"}(KF||(KF={}));const HF=r=>r.getUTCFullYear();function eke(r,e,t){return e.replace(/yyyy/g,(n=>ol(HF(n),4))(r)).replace(/yy/g,(n=>ol(HF(n)%100,2))(r)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(r,t)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(r,t)).replace(/MM/g,(n=>ol((i=>i.getUTCMonth()+1)(n),2))(r)).replace(/dd/g,(n=>ol((i=>i.getUTCDate())(n),2))(r))}class uX{constructor(e="yyyy-MM-dd",t="default"){this.qc=e,this.Yc=t}__(e){return eke(e,this.qc,this.Yc)}}class tke{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",ol(e.getUTCHours(),2)).replace("%m",ol(e.getUTCMinutes(),2)).replace("%s",ol(e.getUTCSeconds(),2))}}const rke={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class nke{constructor(e={}){const t={...rke,...e};this.Jc=new uX(t.Kc,t.Gc),this.Qc=new tke(t.Xc),this.td=t.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function Xy(r){return 60*r*60*1e3}function IA(r){return 60*r*1e3}const Zy=[{sd:(WF=1,1e3*WF),nd:10},{sd:IA(1),nd:20},{sd:IA(5),nd:21},{sd:IA(30),nd:22},{sd:Xy(1),nd:30},{sd:Xy(3),nd:31},{sd:Xy(6),nd:32},{sd:Xy(12),nd:33}];var WF;function GF(r,e){if(r.getUTCFullYear()!==e.getUTCFullYear())return 70;if(r.getUTCMonth()!==e.getUTCMonth())return 60;if(r.getUTCDate()!==e.getUTCDate())return 50;for(let t=Zy.length-1;t>=0;--t)if(Math.floor(e.getTime()/Zy[t].sd)!==Math.floor(r.getTime()/Zy[t].sd))return Zy[t].nd;return 0}function CA(r){let e=r;if(Ym(r)&&(e=ik(r)),!_T(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(t.getTime()/1e3),rd:e}}function YF(r){if(!lX(r))throw new Error("time must be of type isUTCTimestamp");return{ed:r}}function ik(r){const e=new Date(r);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${r}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function JF(r){Ym(r.time)&&(r.time=ik(r.time))}class XF{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(JF)}(e):JF(e)}createConverterToInternalObj(e){return ft(function(t){return t.length===0?null:_T(t[0].time)||Ym(t[0].time)?CA:YF}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.rd===void 0?new Date(1e3*t.ed).getTime():new Date(Date.UTC(t.rd.year,t.rd.month-1,t.rd.day)).getTime()}convertHorzItemToInternal(e){return lX(t=e)?YF(t):_T(t)?CA(t):CA(ik(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new nke({Kc:t,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new uX(t,e.locale)}formatHorzItem(e){const t=e;return this.hd.__(new Date(1e3*t.ed))}formatTickmark(e,t){const n=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),i=this.Ps.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,n,t.locale);if(s!==null)return s}return function(s,o,a){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const l=s.rd===void 0?new Date(1e3*s.ed):new Date(Date.UTC(s.rd.year,s.rd.month-1,s.rd.day));return new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()).toLocaleString(a,c)}(e.time,n,t.locale)}maxTickMarkWeight(e){let t=e.reduce(X6e,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(n,i=0){if(n.length===0)return;let s=i===0?null:n[i-1].time.ed,o=s!==null?new Date(1e3*s):null,a=0;for(let c=i;c<n.length;++c){const l=n[c],u=new Date(1e3*l.time.ed);o!==null&&(l.timeWeight=GF(u,o)),a+=l.time.ed-(s||l.time.ed),s=l.time.ed,o=u}if(i===0&&n.length>1){const c=Math.ceil(a/(n.length-1)),l=new Date(1e3*(n[0].time.ed-c));n[0].timeWeight=GF(new Date(1e3*n[0].time.ed),l)}})(e,t)}static ad(e){return Oo({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const lp=typeof window<"u";function ZF(){return!!lp&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function TA(){return!!lp&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ST(r){return r+r%2}function ike(r){lp&&window.chrome!==void 0&&r.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class jw{constructor(e,t,n){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!TA(),this.zd=i=>{this.Ld(i)},this.Od=i=>{if(this.Nd(i)){const s=this.Fd(i);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd(Xa(i),this.fd);o<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}}else{const s=this.Fd(i);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd(Xa(i),this._d);o<5&&!this.Md&&this.jd(s,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=t,this.Ps=n,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const t=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",t)},this.Zd.addEventListener("mousemove",t),this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const t=this.Fd(e);this.jd(t,this.qd.sf),this.Ad=!0}nf(e){const t=RA(e.changedTouches,ft(this.Ed));if(t===null||(this.Bd=Qy(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const n=this.Hd(Xa(t),ft(this.wd)),{ef:i,rf:s,Wd:o}=n;if(this.gd||!(o<5)){if(!this.gd){const a=.5*i,c=s>=a&&!this.Ps.hf(),l=a>s&&!this.Ps.af();c||l||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const a=this.Fd(e,t);this.Ud(a,this.qd.lf),Xd(e)}}}_f(e){if(e.button!==0)return;const t=this.Hd(Xa(e),ft(this.md)),{Wd:n}=t;if(n>=5&&(this.Md=!0,this.Xd()),this.Md){const i=this.Fd(e);this.jd(i,this.qd.uf)}}Hd(e,t){const n=Math.abs(t._t-e._t),i=Math.abs(t.ut-e.ut);return{ef:n,rf:i,Wd:n+i}}cf(e){let t=RA(e.changedTouches,ft(this.Ed));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Ed=null,this.Bd=Qy(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const n=this.Fd(e,t);if(this.Ud(n,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:i}=this.Hd(Xa(t),this.fd);i<30&&!this.bd&&this.Ud(n,this.qd.$d),this.Yd()}else this.bd||(this.Ud(n,this.qd.ff),this.qd.ff&&Xd(e));this.ud===0&&Xd(e),e.touches.length===0&&this.vd&&(this.vd=!1,Xd(e))}Ld(e){if(e.button!==0)return;const t=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),ZF()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(t,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:n}=this.Hd(Xa(e),this._d);n<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}else this.Md||this.jd(t,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const t=e.changedTouches[0];this.Ed=t.identifier,this.Bd=Qy(e);const n=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=Xa(t),this.yd&&(this.yd(),this.yd=null);{const s=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{n.removeEventListener("touchmove",s),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const i=this.Fd(e,t);this.Ud(i,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=Xa(t))}Mf(e){if(e.button!==0)return;const t=this.Zd.ownerDocument.documentElement;ZF()&&t.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=Xa(e),this.kd&&(this.kd(),this.kd=null);{const i=this._f.bind(this),s=this.Ld.bind(this);this.kd=()=>{t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",s)}if(this.Id=!0,this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=Xa(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,t=n=>{this.qd.Sf&&(n.composed&&this.Zd.contains(n.composedPath()[0])||n.target&&this.Zd.contains(n.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",t)},this.Sd=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}TA()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),ike(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const t=QF(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,t),Xd(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const t=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Rd=QF(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const t=this.Fd(e);this.jd(t,this.qd.Vf),this.Ad=!TA()}wf(e){const t=RA(e.touches,ft(this.Ed));if(t===null)return;const n=this.Fd(e,t);this.Ud(n,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Qy(e)<this.Bd+500}Ud(e,t){t&&t.call(this.qd,e)}jd(e,t){t&&t.call(this.qd,e)}Fd(e,t){const n=t||e,i=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:n.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Xd(e)}}}}function QF(r,e){const t=r.clientX-e.clientX,n=r.clientY-e.clientY;return Math.sqrt(t*t+n*n)}function Xd(r){r.cancelable&&r.preventDefault()}function Xa(r){return{_t:r.pageX,ut:r.pageY}}function Qy(r){return r.timeStamp||performance.now()}function RA(r,e){for(let t=0;t<r.length;++t)if(r[t].identifier===e)return r[t];return null}class ske{constructor(e,t,n){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[t],this.$f=e.Uf()[n],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return yn({width:this.Hf.Zf().width,height:1})}Gf(){return yn({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,t,n){const i=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(t,n,i.width,i.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Yf.appendChild(e);const n=document.createElement("div"),i=n.style;i.position="absolute",i.zIndex="50",i.top="-4px",i.height="9px",i.width="100%",i.backgroundColor="",i.cursor="row-resize",this.Yf.appendChild(n);const s={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new jw(n,s,{hf:()=>!1,af:()=>!0}),this.Lf={tp:n,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const t=this.Hf.hp().Io()+this.$f.hp().Io(),n=t/(this.Hf.Zf().height+this.$f.Zf().height),i=30*n;t<=2*i||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:t-i,_p:t,up:n,cp:i},this.Lf.Qf.style.display="block")}ep(e){const t=this.Ff;if(t===null)return;const n=(e.pageY-t.ap)*t.up,i=Bh(t.lp+n,t.cp,t.op);this.Hf.hp().Bo(i),this.$f.hp().Bo(t._p-i),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function kA(r,e){return r.dp-e.dp}function OA(r,e,t){const n=(r.dp-e.dp)/(r.wt-e.wt);return Math.sign(n)*Math.min(Math.abs(n),t)}class oke{constructor(e,t,n,i){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=t,this.xp=n,this.Mn=i}Cp(e,t){if(this.fp!==null){if(this.fp.wt===t)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:t,dp:e}}le(e,t){if(this.fp===null||this.pp===null||t-this.fp.wt>50)return;let n=0;const i=OA(this.fp,this.pp,this.Sp),s=kA(this.fp,this.pp),o=[i],a=[s];if(n+=s,this.vp!==null){const l=OA(this.pp,this.vp,this.Sp);if(Math.sign(l)===Math.sign(i)){const u=kA(this.pp,this.vp);if(o.push(l),a.push(u),n+=u,this.mp!==null){const f=OA(this.vp,this.mp,this.Sp);if(Math.sign(f)===Math.sign(i)){const d=kA(this.vp,this.mp);o.push(f),a.push(d),n+=d}}}}let c=0;for(let l=0;l<o.length;++l)c+=a[l]/n*o[l];Math.abs(c)<this.bp||(this.wp={dp:e,wt:t},this.Mp=c,this.gp=function(l,u){const f=Math.log(u);return Math.log(1*f/-l)/f}(Math.abs(c),this.xp))}Ru(e){const t=ft(this.wp),n=e-t.wt;return t.dp+this.Mp*(Math.pow(this.xp,n)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const t=e-ft(this.wp).wt;return Math.min(t,this.gp)}}class ake{constructor(e,t){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=t,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function nd(r,e){const t=ft(r.ownerDocument).createElement("canvas");r.appendChild(t);const n=G4e(t,{options:{allowResizeObserver:!0},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return n.resizeCanvasElement(e),n}function id(r){r.width=1,r.height=1,r.getContext("2d")?.clearRect(0,0,1,1)}function ET(r,e,t,n){r.ih&&r.ih(e,t,n)}function Uv(r,e,t,n){r.nt(e,t,n)}function AT(r,e,t,n){const i=r(t,n);for(const s of i){const o=s.Tt(n);o!==null&&e(o)}}function PA(r,e){return t=>function(n){return n.Ft!==void 0}(t)?(t.Ft()?.wa()??"")!==e?[]:t.ta?.(r)??[]:[]}function e7(r,e,t,n){if(!r.length)return;let i=0;const s=r[0].$t(n,!0);let o=e===1?t/2-(r[0].Fi()-s/2):r[0].Fi()-s/2-t/2;o=Math.max(0,o);for(let a=1;a<r.length;a++){const c=r[a],l=r[a-1],u=l.$t(n,!1),f=c.Fi(),d=l.Fi();if(e===1?f>d-u:f<d+u){const h=d-u*e;c.Wi(h);const g=h-e*u/2;if((e===1?g<0:g>t)&&o>0){const p=e===1?-1-g:g-t,m=Math.min(p,o);for(let y=i;y<r.length;y++)r[y].Wi(r[y].Fi()+e*m);o-=m}}else i=a,o=e===1?d-u-f:f-(d+u)}}class t7{constructor(e,t,n,i){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Zb(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=t,this.bl=t.layout,this.Gu=n,this.Yp=i==="left",this.jp=PA("normal",i),this.Kp=PA("top",i),this.Xp=PA("bottom",i),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=nd(this.Yf,yn({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=nd(this.Yf,yn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new jw(this.Gp.canvasElement,a,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),id(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),id(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const t=this.iv(),n=ft(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));n.save();const i=this.Yi.Va();n.font=this.nv(),i.length>0&&(e=Math.max(this.Np.Vi(n,i[0].Ga),this.Np.Vi(n,i[i.length-1].Ga)));const s=this.ev();for(let l=s.length;l--;){const u=this.Np.Vi(n,s[l].ri());u>e&&(e=u)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const l=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(n,this.Yi.Zi(Math.floor(Math.min(l,u))+.11111111111111,o)),this.Np.Vi(n,this.Yi.Zi(Math.ceil(Math.max(l,u))-.11111111111111,o)))}var a;n.restore();const c=e||34;return ST(Math.ceil(t.S+t.C+t.I+t.B+5+c))}rv(e){this.Lp!==null&&qf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return ft(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,ft(this.Ft()))}av(e){if(this.Lp===null)return;const t={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const i=td(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)}),this.Pt.uv(i,this.Xp),this.cv(i),this.Pt.uv(i,this.jp),this.dv(i))}this.Gp.applySuggestedBitmapSize();const n=td(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.fv(n),this.Pt.uv(n,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}kt(){this.Yi?.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!0,t.Uo(n,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp(),i=this.Yi;t.$o(n,i,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),t=this.Pt.hp(),n=this.Yi;this.Op&&(this.Op=!1,e.qo(t,n))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!1,t.qo(n,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],t=this.Yi===null?void 0:this.Yi;return(n=>{for(let i=0;i<n.length;++i){const s=n[i].Ws(this.Pt.hp(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:t}){const{width:n,height:i}=t,s=this.Pt.hp().Qt(),o=s.$(),a=s.Fc();o===a?Lw(e,0,0,n,i,o):XJ(e,0,0,n,i,o,a)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const i=Math.max(1,Math.floor(this.iv().S*n));let s;s=this.Yp?t.width-i:0,e.fillRect(s,0,i,t.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Yi.Va(),n=this.Yi.N(),i=this.iv(),s=this.Yp?this.Lp.width-i.C:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:c})=>{o.fillStyle=n.borderColor;const l=Math.max(1,Math.floor(c)),u=Math.floor(.5*c),f=Math.round(i.C*a);o.beginPath();for(const d of t)o.rect(Math.floor(s*a),Math.round(d.ka*c)-u,f,l);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=n.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const a=this.Yp?Math.round(s-i.I):Math.round(s+i.C+i.I),c=t.map(l=>this.Np.Di(o,l.Ga));for(let l=t.length;l--;){const u=t[l];o.fillText(u.Ga,a,u.ka+c[l])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const t=[],n=this.Yi.Dt().slice(),i=this.Pt.hp(),s=this.iv();this.Yi===i.$n()&&this.Pt.hp().Dt().forEach(c=>{i.Un(c)&&n.push(c)});const o=this.Yi.ba()[0],a=this.Yi;n.forEach(c=>{const l=c.Ws(i,a);l.forEach(u=>{u.Wi(null),u.Hi()&&t.push(u)}),o===c&&l.length>0&&(e=l[0].Bi())}),t.forEach(c=>c.Wi(c.Bi())),this.Yi.N().alignLabels&&this.vv(t,s,e)}vv(e,t,n){if(this.Lp===null)return;const i=e.filter(o=>o.Bi()<=n),s=e.filter(o=>o.Bi()>n);i.sort((o,a)=>a.Bi()-o.Bi()),i.length&&s.length&&s.push(i[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(const o of e){const a=Math.floor(o.$t(t)/2),c=o.Bi();c>-a&&c<a&&o.Wi(a),c>this.Lp.height-a&&c<this.Lp.height+a&&o.Wi(this.Lp.height-a)}e7(i,1,this.Lp.height,t),e7(s,-1,this.Lp.height,t)}dv(e){if(this.Lp===null)return;const t=this.ev(),n=this.iv(),i=this.Yp?"right":"left";t.forEach(s=>{s.Ui()&&s.Tt(ft(this.Yi)).nt(e,n,this.Np,i)})}fv(e){if(this.Lp===null||this.Yi===null)return;const t=this.Pt.$p().Qt(),n=[],i=this.Pt.hp(),s=t._c().Ws(i,this.Yi);s.length&&n.push(s);const o=this.iv(),a=this.Yp?"right":"left";n.forEach(c=>{c.forEach(l=>{l.Tt(ft(this.Yi)).nt(e,o,this.Np,a)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Xb(this.bl.fontSize,this.bl.fontFamily)}}function cke(r,e){return r.Jh?.(e)??[]}function r7(r,e){return r.Fs?.(e)??[]}function n7(r,e){return r.us?.(e)??[]}function lke(r,e){return r.Xh?.(e)??[]}class sk{constructor(e,t){this.Lp=yn({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new oi,this.xv=new oi,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=t,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(n),this.Zp=nd(n,yn({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=nd(n,yn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new jw(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),id(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),id(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return ft(this.Dv)}zv(e){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(sk.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new ake(this.Iv,this.Dp),this.gv.kt()):(this.gv?.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(ft(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(ft(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const t={x:e.localX,y:e.localY};this.Yv(t,t,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,t){if(!this.Dp.N().handleScale.pinch)return;const n=5*(t-this.Cv);this.Cv=t,this.ts().Mc(e._t,n)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const t=this.ts()._c();this.kv!==null&&t.Vt()&&(this.Tv={x:t.si(),y:t.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const t=e.localX,n=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const i=ft(this.Tv),s=i.x+(t-this.kv.x),o=i.y+(n-this.kv.y);this.Fv(s,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,t){const n=this.Dv;return n===null?null:cX(n,e,t)}Gv(e,t){ft(t==="left"?this.mv:this.wv).rv(yn({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){qf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=ft(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const t of e.ba())if(e.Un(t)){const n=t.Ft();n!==null&&e.Fo(n),t.Ns()}for(const t of e.s_())t.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const t={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=td(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s)}),this.Dv&&(this.Qv(i,cke),this.tm(i),this.Qv(i,r7),this.Qv(i,n7)))}this.Gp.applySuggestedBitmapSize();const n=td(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.im(n),this.Qv(n,lke),this.Qv(n,n7))}sm(){return this.mv}nm(){return this.wv}uv(e,t){this.Qv(e,t)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,t){const n=t.localX,i=t.localY;e.v()&&e.p(this.ts().Et().uu(n),{x:n,y:i},t)}ov({context:e,bitmapSize:t}){const{width:n,height:i}=t,s=this.ts(),o=s.$(),a=s.Fc();o===a?Lw(e,0,0,n,i,a):XJ(e,0,0,n,i,o,a)}tm(e){const t=ft(this.Dv),n=t.i_().lr().Tt(t);n!==null&&n.nt(e,!1)}im(e){this.rm(e,r7,Uv,this.ts()._c())}Qv(e,t){const n=ft(this.Dv),i=n.Dt(),s=n.s_();for(const o of s)this.rm(e,t,ET,o);for(const o of i)this.rm(e,t,ET,o);for(const o of s)this.rm(e,t,Uv,o);for(const o of i)this.rm(e,t,Uv,o)}rm(e,t,n,i){const s=ft(this.Dv),o=s.Qt().hc(),a=o!==null&&o.n_===i,c=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;AT(t,l=>n(l,e,a,c),i,s)}Lv(){if(this.Dv===null)return;const e=this.Dp,t=this.Dv.Wo().N().visible,n=this.Dv.Ho().N().visible;t||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),n||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const i=e.Qt().Vc();t&&this.mv===null&&(this.mv=new t7(this,e.N(),i,"left"),this.Bv.appendChild(this.mv.Xf())),n&&this.wv===null&&(this.wv=new t7(this,e.N(),i,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,t,n){this.ts().yc(this.am(e),this.lm(t),n,ft(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,t,n){this.kv=e,this.yv=!1,this.Fv(t.x,t.y,n);const i=this.ts()._c();this.Tv={x:i.si(),y:i.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const t=this.ts(),n=this.hp();if(t.Ko(n,n.ys()),this.Mv=null,this.bv=!1,t.Cc(),this.Rv!==null){const i=performance.now(),s=t.Et();this.Rv.le(s.wu(),i),this.Rv.Tu(i)||t._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ft(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const t=this.ts(),n=t.Et();if(n.Ki())return;const i=this.Dp.N(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Bf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Bf))return;const a=this.Dv.ys(),c=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:c,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const l=n.vu();this.Rv=new oke(.2/l,7/l,.997,15/l),this.Rv.Cp(n.wu(),this.Mv.ed)}else this.Rv=null;a.Ki()||t.Yo(this.Dv,a,e.localY),t.Sc(e.localX),this.bv=!0}this.bv&&(a.Ki()||t.jo(this.Dv,a,e.localY),t.xc(e.localX),this.Rv!==null&&this.Rv.Cp(n.wu(),c))}}class i7{constructor(e,t,n,i,s){this.xt=!0,this.Lp=yn({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=n.Vc,this.Ps=t,this.um=i,this.dm=s,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=nd(this.Yf,yn({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),id(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){qf(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const t=td(this.Zp,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(n=>{this.ov(n),this._v(n)})}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const s=Math.floor(this.Gu.N().S*n),o=Math.floor(this.Gu.N().S*i),a=this.Yp?t.width-s:0;e.fillRect(a,0,s,o)}ov({context:e,bitmapSize:t}){Lw(e,0,0,t.width,t.height,this.dm())}}function ok(r){return e=>e.ia?.(r)??[]}const uke=ok("normal"),fke=ok("top"),dke=ok("bottom");class hke{constructor(e,t){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=yn({width:0,height:0}),this.wm=new oi,this.Np=new Zb(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=t,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=nd(this.bm,yn({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const n=this.Zp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gp=nd(this.bm,yn({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new jw(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),id(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),id(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,t,n){qf(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(yn({width:t,height:e.height})),this.pm!==null&&this.pm.rv(yn({width:n,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(e===0)return;const t={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=td(this.Zp,t);i!==null&&(i.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s),this.Dm(i,dke)}),this.cv(i),this.Dm(i,uke)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const n=td(this.Gp,t);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:s})=>{i.clearRect(0,0,s.width,s.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],n),this.Dm(n,fke))}Dm(e,t){const n=this.Dp.Qt().js();for(const i of n)AT(t,s=>ET(s,e,!1,void 0),i,void 0);for(const i of n)AT(t,s=>Uv(s,e,!1,void 0),i,void 0)}ov({context:e,bitmapSize:t}){Lw(e,0,0,t.width,t.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:t,verticalPixelRatio:n}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const i=Math.max(1,Math.floor(this.Tm().S*n));e.fillRect(0,0,t.width,i)}}cv(e){const t=this.Dp.Qt().Et(),n=t.Va();if(!n||n.length===0)return;const i=this.o_.maxTickMarkWeight(n),s=this.Tm(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:c,verticalPixelRatio:l})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();const u=Math.max(1,Math.floor(c)),f=Math.floor(.5*c);a.beginPath();const d=Math.round(s.C*l);for(let h=n.length;h--;){const g=Math.round(n[h].coord*c);a.rect(g-f,0,u,d)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const c=s.S+s.C+s.A+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.nv();for(const l of n)if(l.weight<i){const u=l.needAlignCoordinate?this.Bm(a,l.coord,l.label):l.coord;a.fillText(l.label,u,c)}this.Dp.N().timeScale.allowBoldLabels&&(a.font=this.Em());for(const l of n)if(l.weight>=i){const u=l.needAlignCoordinate?this.Bm(a,l.coord,l.label):l.coord;a.fillText(l.label,u,c)}})}Bm(e,t,n){const i=this.Np.Vi(e,n),s=i/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+i>this.Lp.width&&(t-=Math.abs(this.Lp.width-(o+i))),t}Vm(e,t){const n=this.Tm();for(const i of e)for(const s of i.cs())s.Tt().nt(t,n)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Xb(this.F(),this.Ps.fontFamily)}Em(){return Xb(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Zb,Rm:0});const e=this.M,t=this.nv();if(e.k!==t){const n=this.F();e.P=n,e.k=t,e.A=3*n/12,e.V=3*n/12,e.Ji=9*n/12,e.L=0,e.Rm=4*n/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),t=e.N();t.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),t.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const n={Vc:this.Dp.Qt().Vc()},i=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,s=()=>e.Fc();t.leftPriceScale.visible&&this.fm===null&&(this.fm=new i7("left",t,n,i,s),this.gm.appendChild(this.fm.Xf())),t.rightPriceScale.visible&&this.pm===null&&(this.pm=new i7("right",t,n,i,s),this.Mm.appendChild(this.pm.Xf()))}}const pke=!!lp&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(r=>r.brand.includes("Chromium"))&&!!lp&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class gke{constructor(e,t,n){var i;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new oi,this.xv=new oi,this.Ku=new oi,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=t,this.o_=n,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(i=this.kp).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),$A(this.Ps)&&this.jm(!0),this.ts=new Q6e(this.Zu.bind(this),this.Ps,n),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new hke(this,this.o_),this.$m.appendChild(this.Xm.Xf());const s=t.autoSize&&this.Zm();let o=this.Ps.width,a=this.Ps.height;if(s||o===0||a===0){const c=e.getBoundingClientRect();o=o||c.width,a=a||c.height}this.Gm(o,a),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],ft(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,t,n=!1){if(this.sl===t&&this.Mo===e)return;const i=function(a){const c=Math.floor(a.width),l=Math.floor(a.height);return yn({width:c-c%2,height:l-l%2})}(yn({width:e,height:t}));this.sl=i.height,this.Mo=i.width;const s=this.sl+"px",o=this.Mo+"px";ft(this.kp).style.height=s,ft(this.kp).style.width=o,this.$m.style.height=s,this.$m.style.width=o,n?this.nw(Ni.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=Ni.gn());for(let t=0;t<this.Am.length;t++)this.Am[t].av(e.en(t).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){const t=$A(this.Ps);this.ts.hr(e);const n=$A(this.Ps);n!==t&&this.jm(n),e.layout?.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=ft(t.getContext("2d"));return this.aw(n),t}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:ft(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return io(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let t=0,n=0;const i=this.Am[0],s=(a,c)=>{let l=0;for(let u=0;u<this.Am.length;u++){const f=this.Am[u],d=ft(a==="left"?f.sm():f.nm()),h=d.Gf();if(e!==null&&d.Jf(e,c,l),l+=h.height,u<this.Am.length-1){const g=this.zm[u],p=g.Gf();e!==null&&g.Jf(e,c,l),l+=p.height}}};this.ow()&&(s("left",0),t+=ft(i.sm()).Gf().width);for(let a=0;a<this.Am.length;a++){const c=this.Am[a],l=c.Gf();if(e!==null&&c.Jf(e,t,n),n+=l.height,a<this.Am.length-1){const u=this.zm[a],f=u.Gf();e!==null&&u.Jf(e,t,n),n+=f.height}}t+=i.Gf().width,this._w()&&(s("right",t),t+=ft(i.nm()).Gf().width);const o=(a,c,l)=>{ft(a==="left"?this.Xm.xm():this.Xm.Cm()).Jf(ft(e),c,l)};if(this.Ps.timeScale.visible){const a=this.Xm.Gf();if(e!==null){let c=0;this.ow()&&(o("left",c,n),c=ft(i.sm()).Gf().width),this.Xm.Jf(e,c,n),c+=a.width,this._w()&&o("right",c,n)}n+=a.height}return yn({width:t,height:n})}pw(){let e=0,t=0,n=0;for(const m of this.Am)this.ow()&&(t=Math.max(t,ft(m.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(n=Math.max(n,ft(m.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=m.Io();t=ST(t),n=ST(n);const i=this.Mo,s=this.sl,o=Math.max(i-t-n,0),a=1*this.zm.length,c=this.Ps.timeScale.visible;let l=c?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var u;l=(u=l)+u%2;const f=a+l,d=s<f?0:s-f,h=d/e;let g=0;const p=window.devicePixelRatio||1;for(let m=0;m<this.Am.length;++m){const y=this.Am[m];y.zv(this.ts.$s()[m]);let v=0,w=0;w=m===this.Am.length-1?Math.ceil((d-g)*p)/p:Math.round(y.Io()*h*p)/p,v=Math.max(w,2),g+=v,y.rv(yn({width:o,height:v})),this.ow()&&y.Gv(t,"left"),this._w()&&y.Gv(n,"right"),y.hp()&&this.ts.cc(y.hp(),v)}this.Xm.km(yn({width:c?o:0,height:l}),c?t:0,c?n:0),this.ts.Eo(o),this.Om!==t&&(this.Om=t),this.Nm!==n&&(this.Nm=n)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return pke?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const t=this.mw(e),n=t*e.deltaX/100,i=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.Ps.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,s)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*n)}nw(e,t){const n=e.nn();n===3&&this.ww(),n!==3&&n!==2||(this.gw(e),this.Mw(e,t),this.Xm.kt(),this.Am.forEach(i=>{i.Ov()}),this.Fm?.nn()===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,t),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,t){for(const n of e.pn())this.mn(n,t)}gw(e){const t=this.ts.$s();for(let n=0;n<t.length;n++)e.en(n).sn&&t[n].Go()}mn(e,t){const n=this.ts.Et();switch(e.an){case 0:n.Eu();break;case 1:n.Au(e.Wt);break;case 2:n.dn(e.Wt);break;case 3:n.fn(e.Wt);break;case 4:n.bu();break;case 5:e.Wt.Tu(t)||n.fn(e.Wt.Ru(t))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(t=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const n=this.Fm;this.Fm=null,this.nw(n,t);for(const i of n.pn())if(i.an===5&&!i.Wt.Tu(t)){this.Qt()._n(i.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),t=e.length,n=this.Am.length;for(let i=t;i<n;i++){const s=io(this.Am.pop());this.$m.removeChild(s.Xf()),s.Kv().u(this),s.Xv().u(this),s.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let i=n;i<t;i++){const s=new sk(this,e[i]);if(s.Kv().i(this.bw.bind(this,s),this),s.Xv().i(this.Sw.bind(this,s),this),this.Am.push(s),i>0){const o=new ske(this,i-1,i);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(s.Xf(),this.Xm.Xf())}for(let i=0;i<t;i++){const s=e[i],o=this.Am[i];o.hp()!==s?o.zv(s):o.Av()}this.Qm(),this.pw()}xw(e,t,n,i){const s=new Map;e!==null&&this.ts.js().forEach(f=>{const d=f.Xs().Fr(e);d!==null&&s.set(f,d)});let o;if(e!==null){const f=this.ts.Et().ss(e)?.originalTime;f!==void 0&&(o=f)}const a=this.Qt().hc(),c=a!==null&&a.n_ instanceof qw?a.n_:void 0,l=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Cw(i);return{Pw:o,Re:e??void 0,kw:t??void 0,yw:u!==-1?u:void 0,Tw:c,Rw:s,Dw:l,Vw:n??void 0}}Cw(e){let t=-1;if(e)t=this.Am.indexOf(e);else{const n=this.Qt()._c().Us();n!==null&&(t=this.Qt().$s().indexOf(n))}return t}bw(e,t,n,i){this.Sv.p(()=>this.xw(t,n,i,e))}Sw(e,t,n,i){this.xv.p(()=>this.xw(t,n,i,e))}Km(e,t,n){this.cw(this.Qt().hc()?.h_??null),this.Ku.p(()=>this.xw(e,t,n))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const t=e[e.length-1];t&&this.Gm(t.contentRect.width,t.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function $A(r){return!!(r.handleScroll.mouseWheel||r.handleScale.mouseWheel)}function mke(r){return r.open===void 0&&r.value===void 0}function yke(r){return function(e){return e.open!==void 0}(r)||function(e){return e.value!==void 0}(r)}function s7(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.color!==void 0&&(s.R=t.color),s}function vke(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.lineColor!==void 0&&(s.vt=t.lineColor),t.topColor!==void 0&&(s.mr=t.topColor),t.bottomColor!==void 0&&(s.wr=t.bottomColor),s}function bke(r,e,t,n){const i=t.value,s={Re:e,wt:r,Wt:[i,i,i,i],Pw:n};return t.topLineColor!==void 0&&(s.gr=t.topLineColor),t.bottomLineColor!==void 0&&(s.Mr=t.bottomLineColor),t.topFillColor1!==void 0&&(s.br=t.topFillColor1),t.topFillColor2!==void 0&&(s.Sr=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.Cr=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.Pr=t.bottomFillColor2),s}function wke(r,e,t,n){const i={Re:e,wt:r,Wt:[t.open,t.high,t.low,t.close],Pw:n};return t.color!==void 0&&(i.R=t.color),i}function xke(r,e,t,n){const i={Re:e,wt:r,Wt:[t.open,t.high,t.low,t.close],Pw:n};return t.color!==void 0&&(i.R=t.color),t.borderColor!==void 0&&(i.Ht=t.borderColor),t.wickColor!==void 0&&(i.vr=t.wickColor),i}function _ke(r,e,t,n,i){const s=io(i)(t),o=Math.max(...s),a=Math.min(...s),c=s[s.length-1],l=[c,o,a,c],{time:u,color:f,...d}=t;return{Re:e,wt:r,Wt:l,Pw:n,se:d,R:f}}function $0(r){return r.Wt!==void 0}function o7(r,e){return e.customValues!==void 0&&(r.Iw=e.customValues),r}function df(r){return(e,t,n,i,s,o)=>function(a,c){return c?c(a):mke(a)}(n,o)?o7({wt:e,Re:t,Pw:i},n):o7(r(e,t,n,i,s),n)}function a7(r){return{Candlestick:df(xke),Bar:df(wke),Area:df(vke),Baseline:df(bke),Histogram:df(s7),Line:df(s7),Custom:df(_ke)}[r]}function c7(r){return{Re:0,Bw:new Map,Hh:r}}function l7(r,e){if(r!==void 0&&r.length!==0)return{Ew:e.key(r[0].wt),Aw:e.key(r[r.length-1].wt)}}function u7(r){let e;return r.forEach(t=>{e===void 0&&(e=t.Pw)}),io(e)}class Ske{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,t){let n=this.zw.size!==0,i=!1;const s=this.Lw.get(e);if(s!==void 0)if(this.Lw.size===1)n=!1,i=!0,this.zw.clear();else for(const c of this.Nw)c.pointData.Bw.delete(e)&&(i=!0);let o=[];if(t.length!==0){const c=t.map(h=>h.time),l=this.o_.createConverterToInternalObj(t),u=a7(e.Rr()),f=e.da(),d=e.pa();o=t.map((h,g)=>{const p=l(h.time),m=this.o_.key(p);let y=this.zw.get(m);y===void 0&&(y=c7(p),this.zw.set(m,y),i=!0);const v=u(p,y.Re,h,c[g],f,d);return y.Bw.set(e,v),v})}n&&this.Ww(),this.Hw(e,o);let a=-1;if(i){const c=[];this.zw.forEach(l=>{c.push({timeWeight:0,time:l.Hh,pointData:l,originalTime:u7(l.Bw)})}),c.sort((l,u)=>this.o_.key(l.time)-this.o_.key(u.time)),a=this.Uw(c)}return this.$w(e,a,function(c,l,u){const f=l7(c,u),d=l7(l,u);if(f!==void 0&&d!==void 0)return{qw:!1,zh:f.Aw>=d.Aw&&f.Ew>=d.Ew}}(this.Lw.get(e),s,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,t,n){const i=t;(function(m){m.Pw===void 0&&(m.Pw=m.time)})(i),this.o_.preprocessData(t);const s=this.o_.createConverterToInternalObj([t])(t.time),o=this.Ow.get(e);if(!n&&o!==void 0&&this.o_.key(s)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.zw.get(this.o_.key(s));if(n&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=a===void 0;a===void 0&&(a=c7(s),this.zw.set(this.o_.key(s),a));const l=a7(e.Rr()),u=e.da(),f=e.pa(),d=l(s,a.Re,t,i.Pw,u,f);a.Bw.set(e,d),n?this.jw(e,d,a.Re):this.Kw(e,d);const h={zh:$0(d),qw:n};if(!c)return this.$w(e,-1,h);const g={timeWeight:0,time:a.Hh,pointData:a,originalTime:u7(a.Bw)},p=cp(this.Nw,this.o_.key(g.time),(m,y)=>this.o_.key(m.time)<y);this.Nw.splice(p,0,g);for(let m=p;m<this.Nw.length;++m)DA(this.Nw[m].pointData,m);return this.o_.fillWeightsForPoints(this.Nw,p),this.$w(e,p,h)}Kw(e,t){let n=this.Lw.get(e);n===void 0&&(n=[],this.Lw.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.o_.key(t.wt)>this.o_.key(i.wt)?$0(t)&&n.push(t):$0(t)?n[n.length-1]=t:n.splice(-1,1),this.Ow.set(e,t.wt)}jw(e,t,n){const i=this.Lw.get(e);if(i===void 0)return;const s=cp(i,n,(o,a)=>o.Re<a);$0(t)?i[s]=t:i.splice(s,1)}Hw(e,t){t.length!==0?(this.Lw.set(e,t.filter($0)),this.Ow.set(e,t[t.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let t=-1;for(let n=0;n<this.Nw.length&&n<e.length;++n){const i=this.Nw[n],s=e[n];if(this.o_.key(i.time)!==this.o_.key(s.time)){t=n;break}s.timeWeight=i.timeWeight,DA(s.pointData,n)}if(t===-1&&this.Nw.length!==e.length&&(t=Math.min(this.Nw.length,e.length)),t===-1)return-1;for(let n=t;n<e.length;++n)DA(e[n].pointData,n);return this.o_.fillWeightsForPoints(e,t),this.Nw=e,t}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].Re))}),e}$w(e,t,n){const i={Oo:new Map,Et:{ou:this.Xw()}};if(t!==-1)this.Lw.forEach((s,o)=>{i.Oo.set(o,{se:s,Zw:o===e?n:void 0})}),this.Lw.has(e)||i.Oo.set(e,{se:[],Zw:n}),i.Et.Gw=this.Nw,i.Et.Jw=t;else{const s=this.Lw.get(e);i.Oo.set(e,{se:s||[],Zw:n})}return i}}function DA(r,e){r.Re=e,r.Bw.forEach(t=>{t.Re=e})}function Eke(r,e){return r.wt<e}function Ake(r,e){return e<r.wt}function Ike(r,e,t){const n=e.Uh(),i=e.bi(),s=cp(r,n,Eke),o=iX(r,i,Ake);if(!t)return{from:s,to:o};let a=s,c=o;return s>0&&s<r.length&&r[s].wt>=n&&(a=s-1),o>0&&o<r.length&&r[o-1].wt<=i&&(c=o+1),{from:a,to:c}}class fX{constructor(e,t,n){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=t,this.eg=n}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),t=this.Qn.Et();if(this.lg(),t.Ki()||e.Ki())return;const n=t.Pe();if(n===null||this.Jn.Xs().zr()===0)return;const i=this.Jn.zt();i!==null&&(this.ng=Ike(this.sg,n,this.eg),this.ug(e,t,i.Wt),this.cg())}}class Cke{constructor(e,t){this.dg=e,this.Yi=t}nt(e,t,n){this.dg.draw(e,this.Yi,t,n)}}class Tke extends fX{constructor(e,t,n){super(e,t,!1),this.sh=n,this.hg=new Cke(this.sh.renderer(),i=>{const s=e.zt();return s===null?null:e.Ft().Nt(i,s.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>({wt:t.Re,_t:NaN,...e.Dr(t.Re),fg:t.se}))}ug(e,t){t._u(this.sg,xT(this.ng))}cg(){this.sh.update({bars:this.sg.map(Rke),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function Rke(r){return{x:r._t,time:r.wt,originalData:r.fg,barColor:r.cr}}const kke={color:"#2196f3"},Oke=(r,e,t)=>{const n=yu(t);return new Tke(r,e,n)};function ak(r){const e={value:r.Wt[3],time:r.Pw};return r.Iw!==void 0&&(e.customValues=r.Iw),e}function f7(r){const e=ak(r);return r.R!==void 0&&(e.color=r.R),e}function Pke(r){const e=ak(r);return r.vt!==void 0&&(e.lineColor=r.vt),r.mr!==void 0&&(e.topColor=r.mr),r.wr!==void 0&&(e.bottomColor=r.wr),e}function $ke(r){const e=ak(r);return r.gr!==void 0&&(e.topLineColor=r.gr),r.Mr!==void 0&&(e.bottomLineColor=r.Mr),r.br!==void 0&&(e.topFillColor1=r.br),r.Sr!==void 0&&(e.topFillColor2=r.Sr),r.Cr!==void 0&&(e.bottomFillColor1=r.Cr),r.Pr!==void 0&&(e.bottomFillColor2=r.Pr),e}function dX(r){const e={open:r.Wt[0],high:r.Wt[1],low:r.Wt[2],close:r.Wt[3],time:r.Pw};return r.Iw!==void 0&&(e.customValues=r.Iw),e}function Dke(r){const e=dX(r);return r.R!==void 0&&(e.color=r.R),e}function Mke(r){const e=dX(r),{R:t,Ht:n,vr:i}=r;return t!==void 0&&(e.color=t),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function IT(r){return{Area:Pke,Line:f7,Baseline:$ke,Histogram:f7,Bar:Dke,Candlestick:Mke,Custom:Bke}[r]}function Bke(r){const e=r.Pw;return{...r.se,time:e}}const Nke={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Lke={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Fke={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:YJ,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},MA={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Uke={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function d7(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Fke,crosshair:Nke,grid:Lke,overlayPriceScales:{...MA},leftPriceScale:{...MA,visible:!1},rightPriceScale:{...MA,visible:!0},timeScale:Uke,localization:{locale:lp?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class hX{constructor(e,t,n){this.Wf=e,this.pg=t,this.vg=n??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Uw(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new Bs(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ft(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class zke{constructor(e,t,n,i){this.Wf=e,this.Pt=n,this.mg=t,this.wg=i}getHeight(){return this.Pt.$t()}setHeight(e){const t=this.Wf.Qt(),n=t.Hc(this.Pt);t.fc(n,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const t=this.paneIndex();t!==e&&(ji(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(t,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new hX(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,t={},n=0){return this.wg.addCustomSeries(e,t,n)}addSeries(e,t={}){return this.wg.addSeries(e,t,this.paneIndex())}}const qke={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class h7{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class jke{constructor(e,t,n,i,s,o){this.Mg=new oi,this.Jn=e,this.bg=t,this.Sg=n,this.o_=s,this.wg=i,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.Jn.zt();return t===null?null:this.Jn.Ft().Ts(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;const t=new Nh(new _g(e.from,e.to)).k_(),n=this.Jn.Xs();if(n.Ki())return null;const i=n.Fr(t.Uh(),1),s=n.Fr(t.bi(),-1),o=ft(n.Lr()),a=ft(n.Ks());if(i!==null&&s!==null&&i.Re>s.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};const c={barsBefore:i===null||i.Re===o?e.from-o:i.Re-o,barsAfter:s===null||s.Re===a?a-e.to:a-s.Re};return i!==null&&s!==null&&(c.from=i.Pw,c.to=s.Pw),c}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,t=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,t),this.Pg("update")}dataByIndex(e,t){const n=this.Jn.Xs().Fr(e,t);return n===null?null:IT(this.seriesType())(n)}data(){const e=IT(this.seriesType());return this.Jn.Xs().Hr().map(t=>e(t))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return sl(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const t=Oo(sl(qke),e),n=this.Jn.Oh(t);return new h7(n)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new h7(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,t=ft(this.Jn.Qt().Hn(e));return this.xg(t)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const t=this.Jn.Qt().Hn(this.Jn);t!==null&&t.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class Vke{constructor(e,t,n){this.yg=new oi,this.z_=new oi,this.wm=new oi,this.ts=e,this.uh=e.Et(),this.Xm=t,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=n}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,t){t?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},n=this.uh.hu(t);this.ts.zc(n)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){ji(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const t=this.ts.Et();return t.Ki()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,t){const n=this.o_.convertHorzItemToInternal(e);return this.uh.J_(n,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return t===null?null:this.uh.qt(t)}coordinateToTime(e){const t=this.ts.Et(),n=t.uu(e),i=t.ss(n);return i===null?null:i.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...sl(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function Kke(r){if(r===void 0||r.type==="custom")return;const e=r;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return n;t*=10}return n}(e.minMove))}function p7(r){return function(e){if(Wy(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;Wy(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),Wy(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const t=e.handleScroll;Wy(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(r),r}class Hke{constructor(e,t,n){this.Vg=new Map,this.Ig=new Map,this.Bg=new oi,this.Eg=new oi,this.Ag=new oi,this.$u=new WeakMap,this.zg=new Ske(t);const i=n===void 0?sl(d7()):Oo(sl(d7()),p7(n));this.Lg=t,this.Wf=new gke(e,i,t),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const s=this.Wf.Qt();this.Ng=new Vke(s,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,t,n){this.autoSizeActive()||this.Wf.Gm(e,t,n)}addCustomSeries(e,t={},n=0){const i=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...kke,...s.defaultOptions()},Fg:Oke,Wg:s}))(yu(e));return this.Hg(i,t,n)}addSeries(e,t={},n=0){return this.Hg(e,t,n)}removeSeries(e){const t=io(this.Vg.get(e)),n=this.zg.Ec(t);this.Wf.Qt().Ec(t),this.Ug(n),this.Vg.delete(e),this.Ig.delete(t)}Cg(e,t){this.Ug(this.zg.Fw(e,t))}kg(e,t,n){this.Ug(this.zg.Yw(e,t,n))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,t=0){return new hX(this.Wf,e,t)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(p7(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const t=this.Wf.Qt().Uc();return t.zo(e),this.$g(t)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,t){this.Wf.Qt().vc(e,t)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const t=this.Wf.fw(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,n){const i=this.Vg.get(n);if(i===void 0)return;const s=this.Wf.Qt().Hn(i);s!==null&&this.Wf.Qt().Tc(e,t,s)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,t={},n=0){ji(e.Fg!==void 0),Kke(t.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(t);const i=Oo(sl(WJ),sl(e.defaultOptions),t),s=e.Fg,o=new qw(this.Wf.Qt(),e.type,i,s,e.Wg);this.Wf.Qt().Ic(o,n);const a=new jke(o,this,this,this,this.Lg,c=>this.$g(c));return this.Vg.set(a,o),this.Ig.set(o,a),a}Ug(e){const t=this.Wf.Qt();t.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((n,i)=>i.ht(n.se,n.Zw)),t.Et().j_(),t.pu()}qg(e){return io(this.Ig.get(e))}Og(e){const t=new Map;e.Rw.forEach((i,s)=>{const o=s.Rr(),a=IT(o)(i);if(o!=="Custom")ji(yke(a));else{const c=s.pa();ji(!c||c(a)===!1)}t.set(this.qg(s),a)});const n=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:n,hoveredObjectId:e.Dw,seriesData:t,sourceEvent:e.Vw}}$g(e){let t=this.$u.get(e);return t||(t=new zke(this.Wf,n=>this.qg(n),e,this),this.$u.set(e,t)),t}}function Wke(r){if(Ym(r)){const e=document.getElementById(r);return ji(e!==null,`Cannot find element in DOM with id=${r}`),e}return r}function Gke(r,e,t){const n=Wke(r),i=new Hke(n,e,t);return e.setOptions(i.options()),i}function Yke(r,e){return Gke(r,new XF,XF.ad(e))}class Jke extends fX{constructor(e,t){super(e,t,!0)}ug(e,t,n){t._u(this.sg,xT(this.ng)),e.$l(this.sg,n,xT(this.ng))}Yg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>{const n=t.Wt[3];return this.jg(t.Re,n,e)})}}function pX(r,e,t,n,i,s,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:c,verticalPixelRatio:l}=r,u=e[n.from];let f=s(r,u),d=u;if(n.to-n.from<2){const h=i/2;a.beginPath();const g={_t:u._t-h,ut:u.ut},p={_t:u._t+h,ut:u.ut};a.moveTo(g._t*c,g.ut*l),a.lineTo(p._t*c,p.ut*l),o(r,f,g,p)}else{const h=(p,m)=>{o(r,f,d,m),a.beginPath(),f=p,d=m};let g=d;a.beginPath(),a.moveTo(u._t*c,u.ut*l);for(let p=n.from+1;p<n.to;++p){g=e[p];const m=s(r,g);switch(t){case 0:a.lineTo(g._t*c,g.ut*l);break;case 1:a.lineTo(g._t*c,e[p-1].ut*l),m!==f&&(h(m,g),a.lineTo(g._t*c,e[p-1].ut*l)),a.lineTo(g._t*c,g.ut*l);break;case 2:{const[y,v]=Xke(e,p-1,p);a.bezierCurveTo(y._t*c,y.ut*l,v._t*c,v.ut*l,g._t*c,g.ut*l);break}}t!==1&&m!==f&&(h(m,g),a.moveTo(g._t*c,g.ut*l))}(d!==g||d===g&&t===1)&&o(r,f,d,g)}}const g7=6;function BA(r,e){return{_t:r._t-e._t,ut:r.ut-e.ut}}function m7(r,e){return{_t:r._t/e,ut:r.ut/e}}function Xke(r,e,t){const n=Math.max(0,e-1),i=Math.min(r.length-1,t+1);var s,o;return[(s=r[e],o=m7(BA(r[t],r[n]),g7),{_t:s._t+o._t,ut:s.ut+o.ut}),BA(r[t],m7(BA(r[i],r[e]),g7))]}function Zke(r,e){const t=r.context;t.strokeStyle=e,t.stroke()}class Qke extends Ed{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:t,lt:n,Kg:i,Xg:s,ct:o,Xt:a,Zg:c}=this.rt;if(n===null)return;const l=e.context;l.lineCap="butt",l.lineWidth=o*e.verticalPixelRatio,rd(l,a),l.lineJoin="round";const u=this.Gg.bind(this);s!==void 0&&pX(e,t,s,n,i,u,Zke),c&&function(f,d,h,g,p){if(g.to-g.from<=0)return;const{horizontalPixelRatio:m,verticalPixelRatio:y,context:v}=f;let w=null;const _=Math.max(1,Math.floor(m))%2/2,x=h*y+_;for(let E=g.to-1;E>=g.from;--E){const S=d[E];if(S){const T=p(f,S);T!==w&&(v.beginPath(),w!==null&&v.fill(),v.fillStyle=T,w=T);const C=Math.round(S._t*m)+_,P=S.ut*y;v.moveTo(C,P),v.arc(C,P,x,0,2*Math.PI)}}v.fill()}(e,t,c,n,u)}}class e8e extends Qke{Gg(e,t){return t.vt}}function t8e(r,e,t,n,i){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:a}=e;s.lineTo(i._t*o,r*a),s.lineTo(n._t*o,r*a),s.closePath(),s.fillStyle=t,s.fill()}class r8e extends Ed{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:t,lt:n,Kg:i,ct:s,Xt:o,Xg:a}=this.rt,c=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(n===null)return;const l=e.context;l.lineCap="butt",l.lineJoin="round",l.lineWidth=s,rd(l,o),l.lineWidth=1,pX(e,t,a,n,i,this.hM.bind(this),t8e.bind(null,c))}}class n8e{aM(e,t){const n=this.lM,{oM:i,_M:s,uM:o,cM:a,eM:c,dM:l,fM:u}=t;if(this.pM===void 0||n===void 0||n.oM!==i||n._M!==s||n.uM!==o||n.cM!==a||n.eM!==c||n.dM!==l||n.fM!==u){const{verticalPixelRatio:f}=e,d=c||l>0?f:1,h=l*d,g=u===e.bitmapSize.height?u:u*d,p=(c??0)*d,m=e.context.createLinearGradient(0,h,0,g);if(m.addColorStop(0,i),c!=null){const y=Bh((p-h)/(g-h),0,1);m.addColorStop(y,s),m.addColorStop(y,o)}m.addColorStop(1,a),this.pM=m,this.lM=t}return this.pM}}class i8e extends r8e{constructor(){super(...arguments),this.vM=new n8e}hM(e,t){return this.vM.aM(e,{oM:t.mr,_M:"",uM:"",cM:t.wr,dM:this.rt?.dM??0,fM:e.bitmapSize.height})}}class s8e extends Jke{constructor(e,t){super(e,t),this.hg=new JJ,this.MM=new i8e,this.bM=new e8e,this.hg.st([this.MM,this.bM])}jg(e,t,n){return{...this.Yg(e,t),...n.Dr(e)}}cg(){const e=this.Jn.N();if(this.ng===null||this.sg.length===0)return;let t;if(e.relativeGradient){t=this.sg[this.ng.from].ut;for(let n=this.ng.from;n<this.ng.to;n++){const i=this.sg[n];i.ut<t&&(t=i.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:t,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const o8e={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(r,e)=>new s8e(r,e)};({...WJ});var a8e=le('<div class="absolute z-10 inset-0 bg-zinc-950 w-full h-48 flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin bg-zinc-500">'),c8e=le('<div class="absolute z-10 inset-0 bg-zinc-950 w-full h-48 flex items-center justify-center text-zinc-500 text-sm font-semibold tracking-wider">NO DATA'),l8e=le('<div class="relative mt-2"><div class="w-full h-48"><div class=size-full id=price-chart></div><button class="absolute z-11 top--2 right-0 text-sm py-1 px-2 bg-zinc-800/70 rounded-bl-md text-zinc-300 hover:text-primary-200 transition-100 cursor-pointer flex items-center gap-1"><div>View on Jupiter</div><div class="i-tabler:external-link size-4 mb-0.25"></div></button><div class="absolute z-10 top-0 leading-none text-sm p-2 text-zinc-400 ml-2"><div class="flex items-center gap-1.5"><div>/USD</div><div class="bg-zinc-600 size-1 rounded-full"></div><div></div></div><div></div></div></div><div class="grid grid-cols-6 p-1">'),u8e=le('<button class="text-sm text-gray-500 text-center py-1 font-medium hover:text-zinc-300 cursor-pointer transition-100">');const gX="price-chart",Zd={LOADING:"loading",NO_DATA:"no-data",READY:"ready"};function f8e(){return Yke(document.getElementById(gX),{layout:{background:{color:"#09090b"},attributionLogo:!1,fontFamily:"Inter Variable",fontSize:11},timeScale:{visible:!1},leftPriceScale:{visible:!1},rightPriceScale:{visible:!1},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},crosshair:{horzLine:{visible:!1},vertLine:{labelVisible:!0,color:"#52525b"}},handleScroll:{vertTouchDrag:!1,horzTouchDrag:!1,mouseWheel:!1,pressedMouseMove:!1},handleScale:{mouseWheel:!1,axisDoubleClickReset:!1,axisPressedMouseMove:!1,pinch:!1}})}function d8e(r){return r.addSeries(o8e,{lineColor:"#c7f284",topColor:"#c7f284aa",bottomColor:"#c7f28400",priceLineVisible:!1,lineWidth:2})}function h8e(r){switch(r){case"1H":return{interval:"30_SECOND",candles:120};case"24H":return{interval:"5_MINUTE",candles:288};case"7D":return{interval:"1_HOUR",candles:168};case"1M":return{interval:"4_HOUR",candles:180};case"3M":return{interval:"12_HOUR",candles:180};case"1Y":return{interval:"1_DAY",candles:365}}}const p8e=r=>{const[e,t]=Pe("1H"),[n,i]=Pe(Zd.LOADING),[s,o]=Pe(null),a=HJ(()=>r.mint);let c,l;mr(()=>{c=f8e(),l=d8e(c),c.subscribeCrosshairMove(f=>{const d=document.getElementById(gX),h=f.seriesData.get(l);f.point===void 0||!f.time||f.point.x<0||f.point.x>d.clientWidth||f.point.y<0||f.point.y>d.clientHeight||!h||!("value"in h)?o(null):o({time:new Date(h.time*1e3),value:h.value})})});let u=new AbortController;return ot(Pn([()=>r.mint,e],async([f,d])=>{if(!c||!l||!f)return;i(Zd.LOADING),u.abort(),u=new AbortController;const{candles:h}=await ed.getChart({mint:f,to:new Date().valueOf(),type:"price",...h8e(d)},u.signal);if(h.length===0){i(Zd.NO_DATA);return}const g=h.map(({open:p,close:m,time:y})=>({time:y,value:(p+m)/2}));l.setData(g),c.timeScale().fitContent(),i(Zd.READY)})),(()=>{var f=l8e(),d=f.firstChild,h=d.firstChild,g=h.nextSibling,p=g.nextSibling,m=p.firstChild,y=m.firstChild,v=y.firstChild,w=y.nextSibling,_=w.nextSibling,x=m.nextSibling,E=d.nextSibling;return g.$$click=()=>window.open(Ss.TOKENS(r.mint),"_blank"),Z(y,()=>r.symbol,v),Z(_,(()=>{var S=kr(()=>!!["1H","24H","7D","1M"].includes(e()));return()=>S()?(s()?.time??new Date).toLocaleDateString(void 0,{day:"numeric",month:"short"})+" "+(s()?.time??new Date).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):(s()?.time??new Date).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})})()),Z(x,A(Hr,{get value(){return s()?.value??a.data?.usdPrice??0},prefix:"$"})),Z(d,A(Kt,{get children(){return[A(Re,{get when(){return n()===Zd.LOADING},get children(){return a8e()}}),A(Re,{get when(){return n()===Zd.NO_DATA},get children(){return c8e()}})]}}),null),Z(E,A(pt,{each:["1H","24H","7D","1M","3M","1Y"],children:S=>(()=>{var T=u8e();return T.$$click=()=>t(S),Z(T,S),Ge(C=>nr(T,{"bg-zinc-900 rounded text-zinc-50":S===e()},C)),T})()})),f})()};At(["click"]);const NA=(r,e,t)=>{const n=t(r,e);return mt(()=>clearInterval(n))},g8e=(r,e,t)=>{if(typeof e=="number"){NA(r,e,t);return}let n=!1,i=performance.now(),s=0,o=!1;const a=()=>{Sr(r),i=performance.now(),n=t===setTimeout};ot(c=>{if(n)return;const l=e();if(l===!1)return c&&(s+=(performance.now()-i)/c),l;if(c===!1&&(i=performance.now()),o){if(c&&(s+=(performance.now()-i)/c),i=performance.now(),s>=1)s=0,a();else if(s>0){const[u,f]=Pe(void 0,{equals:!1});return u(),NA(()=>{s=0,o=!1,f(),a()},(1-s)*l,setTimeout),l}}return o=!0,NA(a,l,t),l})};function m8e(r,e,t,n){const i=Te(()=>Pe(r(t),n));return g8e(()=>i()[1](r),e,setInterval),()=>i()[0]()}const mX=6e4,y7=36e5,v7=r=>r instanceof Date?r:new Date(r),y8e=(r,e)=>e.getTime()-r.getTime(),ck=(r,e)=>{let t;const n=()=>clearTimeout(t);return ad()&&mt(n),Object.assign((...s)=>{t!==void 0&&n(),t=setTimeout(()=>r(...s),e)},{clear:n})},v8e=(r,e)=>r.length>0?()=>r(Sr(e)):r;function b8e(r,e){let t=0;const n=r.map((i,s)=>Te(()=>(t=s,i()),void 0,EI));return Te(()=>n.map(i=>i())[t],void 0,e)}function w8e(r,e,t){let n=()=>e;const[i,s]=Pe(e,EI),o=Te(v8e(r,()=>n()),e,EI);return[n=b8e([i,o],t),a=>s(()=>typeof a=="function"?a(Sr(n)):a)]}const b7=r=>{const[e,t]=w8e(()=>v7($g(r)));return[e,i=>t(s=>v7(kte(i,s)))]};function x8e(r=mX/2){const[e,t]=Pe(void 0,{equals:!1});return[m8e(()=>(e(),new Date),r,void 0,{equals:(i,s)=>i.getTime()===s.getTime()}),t]}function _8e(r,e){const[t]=b7(r),[n]=b7(e);return[Te(()=>y8e(t(),n())),{from:t,to:n}]}function S8e(r,e=t=>Math.abs(t)<=y7?mX/2:y7/2){const t=typeof e=="function"?()=>e(s()):e,[n,i]=x8e(t),[s,{to:o}]=_8e(n,r);return[s,{update:i,target:o,now:n}]}var E8e=le("<time> ");const yX=1e3,vX=60*yX,bX=60*vX,A8e=24*bX,wX=r=>{const[e]=S8e(()=>r.date.valueOf(),n=>n>12e4?2e4:1e3),t=Te(()=>{const n=Math.abs(e()),i=Math.round(n/A8e);if(i>120)return`${Math.round(i/30)}mo`;if(i>0)return`${i}d`;const s=Math.round(n/bX);if(s)return`${s}h`;const o=Math.round(n/vX);return o?`${o}m`:`${Math.round(n/yX)}s`});return(()=>{var n=E8e(),i=n.firstChild;return un(n,at({get dateTime(){return r.date.toISOString()}},r),!1,!0),Z(n,t,i),Z(n,A(Oe,{get when(){return!r.withoutSuffix},children:"ago"}),null),n})()};var I8e=le('<tr><td class="w-full h-45 text-center text-zinc-500 text-sm font-semibold tracking-wider"colspan=4>NO TRADES YET'),C8e=le('<div><h3 class="font-medium p-4 underline underline-offset-8 decoration-primary-200">Your Trades</h3><table class=w-full><thead><tr class="border-b border-zinc-800"><th class="font-normal text-zinc-400 flex items-center justify-start px-4 py-2 text-sm gap-0.5">Age</th><th class="font-normal text-zinc-400 text-right py-2 pr-4 text-sm">Price</th><th class="font-normal text-zinc-400 text-right py-2 text-sm">Volume</th><th class="font-normal text-zinc-400 flex items-center justify-end px-4 py-2 text-sm gap-0.5">Tx</th></tr></thead><tbody class="divide-y divide-zinc-900 border-b border-zinc-800">'),T8e=le('<tr><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-start"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 pr-4"><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class=h-15><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-end"><div class="size-4 bg-zinc-800 animate-pulse rounded">'),R8e=le('<tr><td class="h-15 px-4 flex items-center gap-1"><div class="text-sm py-0.5 px-1.5 rounded capitalize font-medium"></div><div class=text-sm></div></td><td class="h-15 pr-4 text-right text-sm"></td><td class="h-15 text-right text-sm space-y--0.25"><div></div><div class="text-xs text-zinc-400"></div></td><td class="h-15 text-right"><button class="p-4 cursor-pointer text-zinc-500 hover:text-primary-200 transition-100"><div class=i-tabler:external-link>');const k8e=()=>{const r=m1(),{selectedAccount:e}=Jr(),{openExplorer:t}=Al(),n=hi(()=>({queryKey:["pnl-activity",e()?.address,r.address],queryFn:async()=>{const i=e()?.address;return i?ws.getPnlActivity(i,r.address):null},enabled:!!e()?.address}));return(()=>{var i=C8e(),s=i.firstChild,o=s.nextSibling,a=o.firstChild,c=a.nextSibling;return Z(c,A(Kt,{get children(){return[A(Re,{get when(){return n.isLoading},get children(){return A(pt,{get each(){return Array.from({length:5})},children:()=>T8e()})}}),A(Re,{get when(){return n.data?.activity.length===0},get children(){return I8e()}}),A(Re,{when:!0,get children(){return A(pt,{get each(){return n.data?.activity},children:l=>(()=>{var u=R8e(),f=u.firstChild,d=f.firstChild,h=d.nextSibling,g=f.nextSibling,p=g.nextSibling,m=p.firstChild,y=m.nextSibling,v=p.nextSibling,w=v.firstChild;return Z(d,()=>l.type),Z(h,A(wX,{get date(){return new Date(l.timestamp)},withoutSuffix:!0})),Z(g,A(Ai,{type:"compact",get value(){return l.price},prefix:"$"})),Z(m,A(Ai,{type:"long",get value(){return l.volume},prefix:"$"})),Z(y,A(Ai,{type:"long",get value(){return l.amount}})),w.$$click=()=>t({type:"tx",value:l.signature}),Ge(_=>{var x={"text-green-400 bg-green-900/15":l.type==="buy","text-red-400 bg-red-900/15":l.type==="sell"},E=l.type==="buy",S=l.type==="sell";return _.e=nr(d,x,_.e),E!==_.t&&h.classList.toggle("text-green-400",_.t=E),S!==_.a&&h.classList.toggle("text-red-400",_.a=S),_},{e:void 0,t:void 0,a:void 0}),u})()})}})]}})),i})()};At(["click"]);var Qd=le('<div class="h-4 w-12 bg-zinc-800 animate-pulse rounded">'),LA=le("<div>"),O8e=le('<div class="size-5 i-tabler:rosette-discount-check text-primary-200">'),P8e=le('<div><div class="flex justify-between items-center gap-2 bg-zinc-900 pt-4 px-4"><button class="cursor-pointer text-zinc-400 hover:text-zinc-100 flex items-center justify-center transition-100 p-1.5 -m-1.5 gap-2"><div class="i-tabler:arrow-left size-5.5"></div></button><div><div class="flex items-center gap-1"><h1 class="font-semibold text-lg leading-5"></h1></div><button class="text-sm text-zinc-400 leading-4 flex gap-1 items-center hover:text-zinc-100 transition-100 cursor-pointer"><div class=size-4></div></button></div><div class=flex-1></div><div class="flex flex-col items-end"></div></div><div class="flex items-center justify-between bg-zinc-900 p-4"></div><div class="border-b border-zinc-800 grid grid-cols-3 gap-4 p-4"></div><div class="border-y border-zinc-800 p-4 grid grid-cols-3 gap-4"></div><div class=p-4><h3 class="font-medium mb-4 underline underline-offset-8 decoration-primary-200">About </h3><p class="leading-tight text-zinc-400 whitespace-pre-line">'),$8e=le('<button class="flex flex-col justify-center items-center gap-2 group cursor-pointer"><div class="bg-zinc-800 rounded-full size-12 flex items-center justify-center ring-1 ring-zinc-800 group-hover:ring-primary-200 group-active:bg-zinc-800/75 transition-100"><div></div></div><div class="text-zinc-400 group-hover:text-zinc-100 transition-100 text-sm font-medium">'),D8e=le('<div><div class="bg-zinc-800 animate-pulse h-3 w-20 mb-1 rounded"></div><div class="bg-zinc-800 animate-pulse h-4.5 w-8 rounded">'),w7=le('<div><div class="text-sm text-zinc-400 leading-none mb-1"></div><div class="leading-none font-medium">');const M8e=()=>{const r=m1(),e=Gn(),t=Fa(),{selectedAccount:n}=Jr(),i=HJ(()=>r.address),s=Cs(),o=hi(()=>({queryKey:["asset_description",r.address],queryFn:async()=>ed.getDescription(r.address)})),a=hi(()=>({queryKey:["pnl",n()?.address,r.address],queryFn:async()=>{const y=n()?.address;if(y)return ws.getPnlPosition(y,r.address)},enabled:!!n()?.address})),{formatLargeNumbers:c}=qo(),{copyToClipboard:l,showCheckmark:u}=yd(),f=Te(()=>s.data?.tokens.find(y=>y.id===r.address)),d=Te(()=>i.data?.symbol||i.data?.id.slice(0,4)||f()?.symbol||f()?.id.slice(0,4)),h=Te(()=>i.data?[{label:"Market Cap",value:c(i.data.mcap??0,"currency")},{label:"FDV",value:c(i.data.fdv??0,"currency")},{label:"Liquidity",value:c(i.data.liquidity??0,"currency")},{label:"Volume (24H)",value:c((i.data.stats24h?.buyVolume??0)+(i.data.stats24h?.sellVolume??0),"currency")},{label:"Traders (24H)",value:c(i.data.stats24h?.numTraders??0,"integer")},{label:"Holders",value:c(i.data.holderCount??0,"integer")}]:null),g=Te(()=>[{label:"Balance",value:A(Oe,{get when(){return!s.isLoading},get fallback(){return Qd()},get children(){return A(Ai,{type:"compact",get value(){return f()?.amount??0}})}})},{label:"Value",value:A(Oe,{get when(){return!s.isLoading},get fallback(){return Qd()},get children(){return A(Ai,{type:"compact",get value(){return f()?.value??0},prefix:"$"})}})},{label:"Avg Entry",value:A(Oe,{get when(){return!a.isLoading},get fallback(){return Qd()},get children(){return A(Ai,{type:"compact",get value(){return a.data?.averageEntry??0},prefix:"$"})}})},{label:"Total PnL",value:A(Oe,{get when(){return!a.isLoading},get fallback(){return Qd()},get children(){var y=LA();return Z(y,()=>c(a.data?.pnlTotal??0,"currency",!0)),Ge(v=>{var w=(a.data?.pnlTotal??0)>=.01,_=(a.data?.pnlTotal??0)<=-.01;return w!==v.e&&y.classList.toggle("text-green-400",v.e=w),_!==v.t&&y.classList.toggle("text-red-400",v.t=_),v},{e:void 0,t:void 0}),y}})},{label:"Unrealised",value:A(Oe,{get when(){return!a.isLoading},get fallback(){return Qd()},get children(){var y=LA();return Z(y,()=>c(a.data?.pnlUnrealised??0,"currency",!0)),Ge(v=>{var w=(a.data?.pnlUnrealised??0)>=.01,_=(a.data?.pnlUnrealised??0)<=-.01;return w!==v.e&&y.classList.toggle("text-green-400",v.e=w),_!==v.t&&y.classList.toggle("text-red-400",v.t=_),v},{e:void 0,t:void 0}),y}})},{label:"Realised",value:A(Oe,{get when(){return!a.isLoading},get fallback(){return Qd()},get children(){var y=LA();return Z(y,()=>c(a.data?.pnlRealised??0,"currency",!0)),Ge(v=>{var w=(a.data?.pnlRealised??0)>=.01,_=(a.data?.pnlRealised??0)<=-.01;return w!==v.e&&y.classList.toggle("text-green-400",v.e=w),_!==v.t&&y.classList.toggle("text-red-400",v.t=_),v},{e:void 0,t:void 0}),y}})}]);function p(y){y.stopImmediatePropagation(),l(i.data?.id||f()?.id||"")}const m=[{icon:"i-tabler:arrows-left-right",label:"Swap",onClick:()=>{const y=r.address===Au.SOL.id?Au.USDC.id:Au.SOL.id,v=r.address;e(`${Qe.SWAP}?sell=${y}&buy=${v}`)}},{icon:"i-tabler:arrow-up-right",label:"Send",onClick:()=>{e(`${Qe.SEND}?mint=${r.address}`)}},{icon:"i-tabler:arrow-down-left",label:"Receive",onClick:()=>{e(Qe.RECEIVE)}},{icon:"i-tabler:credit-card",label:"Buy",onClick:()=>{window.open(Ss.ONBOARD,"_blank")}}];return(()=>{var y=P8e(),v=y.firstChild,w=v.firstChild;w.firstChild;var _=w.nextSibling,x=_.firstChild,E=x.firstChild,S=x.nextSibling,T=S.firstChild,C=_.nextSibling,P=C.nextSibling,V=v.nextSibling,L=V.nextSibling,D=L.nextSibling,b=D.nextSibling,I=b.firstChild;I.firstChild;var B=I.nextSibling;return gl(w,"click",t,!0),Z(w,A(ln,{get src(){return i.data?.icon||f()?.icon},class:"size-9"}),null),Z(E,d),Z(x,A(Oe,{get when(){return i.data?.isVerified},get children(){return O8e()}}),null),S.$$click=p,Z(S,A(Gi,{get address(){return i.data?.id||f()?.id||""}}),T),Z(P,A(Ia,{class:"text-lg leading-5 font-medium",get children(){return A(Ai,{get value(){return i.data?.usdPrice??f()?.price??0},prefix:"$",type:"long"})}}),null),Z(P,A(Ia,{class:"text-sm text-zinc-400 leading-4",get children(){return A(Gm,{get value(){return i.data?.stats24h?.priceChange??f()?.priceChange??0},hideBackground:!0})}}),null),Z(V,A(pt,{each:m,children:({label:F,icon:z,onClick:G})=>(()=>{var Q=$8e(),X=Q.firstChild,O=X.firstChild,R=X.nextSibling;return gl(Q,"click",G,!0),Z(R,F),Ge(()=>tn(O,gr(z,"size-5.5 text-primary-200"))),Q})()})),Z(L,A(Oe,{get when(){return h()},get fallback(){return A(pt,{each:[1,2,3,4,5,6],children:()=>D8e()})},children:F=>A(pt,{get each(){return F()},children:z=>(()=>{var G=w7(),Q=G.firstChild,X=Q.nextSibling;return Z(Q,()=>z.label),Z(X,A(Ia,{get children(){return z.value}})),G})()})})),Z(y,A(p8e,{get mint(){return r.address},get symbol(){return d()??""}}),D),Z(D,A(pt,{get each(){return g()},children:F=>(()=>{var z=w7(),G=z.firstChild,Q=G.nextSibling;return Z(G,()=>F.label),Z(Q,A(Ia,{get children(){return F.value}})),z})()})),Z(y,A(k8e,{}),b),Z(I,d,null),Z(B,()=>o.data?.description??Is.DASH),Ge(F=>nr(T,{"i-tabler:copy-check-filled":u(),"i-tabler:copy":!u()},F)),y})()};At(["click"]);const xX=r=>{const{selectedAccount:e}=Jr();return ZU(()=>({queryKey:["portfolio-activity",e()?.address],queryFn:({pageParam:n})=>ws.getTransactions(e().address,n),initialPageParam:void 0,getNextPageParam:n=>n.next,enabled:r()&&!!e()?.address}))},x7=[],_X=()=>{const{selectedAccount:r}=Jr(),e=Te(()=>r()?.address),t=hi(()=>({queryKey:["portfolio-positions",e()],queryFn:async()=>{const s=`portfolio-positions:${e()}`;if(!x7.includes(s)){x7.push(s);const{value:a}=await qt.getPopupCache({key:s});if(a&&Array.isArray(a.platforms))return requestAnimationFrame(()=>t.refetch()),a}const o=await ws.getPositions(e());return await qt.setPopupCache({key:s,value:o}),o},enabled:!!e(),staleTime:3e4,refetchInterval:3e4})),[n,i]=ud({totalValue:0,platforms:[],airdrops:[]});return ot(Pn(()=>t.data,s=>{s&&(i("totalValue",s.totalValue),i("platforms",gI(s.platforms)),i("airdrops",gI(s.airdrops)))})),{query:t,data:n}},_7=[],SX=()=>{const{selectedAccount:r}=Jr(),e=Te(()=>r()?.address),t=hi(()=>({queryKey:["portfolio-pnl",e()],queryFn:async()=>{const n=`portfolio-pnl:${e()}`;if(!_7.includes(n)){_7.push(n);const{value:s}=await qt.getPopupCache({key:n});if(s)return requestAnimationFrame(()=>t.refetch()),s}const i=await ws.getOverallPnl(e());return await qt.setPopupCache({key:n,value:i}),i},enabled:!!e(),staleTime:3e4,refetchInterval:3e4}));return t};function B8e(r,e=ad()){let t=0,n,i;return()=>(t++,mt(()=>{t--,queueMicrotask(()=>{!t&&i&&(i(),i=n=void 0)})}),i||ll(s=>n=r(i=s),e),n)}function N8e(r){const e=ad(),t=B8e(r,e);return()=>t()}function L8e(r,e,t){const n=ad(),i=Te(r,e,t),s={...Sr(i)},o={};for(const a in s)Object.defineProperty(s,a,{get(){let c=o[a];if(!c){if(!Kv())return i()[a];hm(n,()=>o[a]=c=Te(()=>i()[a]))}return c()},enumerable:!0});return s}const F8e={x:0,y:0};function S7(r){return r?r instanceof Window?{x:r.scrollX,y:r.scrollY}:{x:r.scrollLeft,y:r.scrollTop}:{...F8e}}function U8e(r){r=r||window;const e=typeof r=="function",t=e?()=>S7(r()):()=>S7(r),[n,i]=Pe(t,{equals:!1}),s=()=>i(()=>t),o=L8e(()=>n()());return e&&mr(s),ez(r,"scroll",s,{passive:!0}),o}const EX=N8e(()=>U8e(window));var AX=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,z8e=typeof self=="object"&&self&&self.Object===Object&&self,Dl=AX||z8e||Function("return this")(),ju=Dl.Symbol,IX=Object.prototype,q8e=IX.hasOwnProperty,j8e=IX.toString,D0=ju?ju.toStringTag:void 0;function V8e(r){var e=q8e.call(r,D0),t=r[D0];try{r[D0]=void 0;var n=!0}catch{}var i=j8e.call(r);return n&&(e?r[D0]=t:delete r[D0]),i}var K8e=Object.prototype,H8e=K8e.toString;function W8e(r){return H8e.call(r)}var G8e="[object Null]",Y8e="[object Undefined]",E7=ju?ju.toStringTag:void 0;function Kp(r){return r==null?r===void 0?Y8e:G8e:E7&&E7 in Object(r)?V8e(r):W8e(r)}function up(r){return r!=null&&typeof r=="object"}var J8e="[object Symbol]";function Vw(r){return typeof r=="symbol"||up(r)&&Kp(r)==J8e}function X8e(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var xc=Array.isArray,A7=ju?ju.prototype:void 0,I7=A7?A7.toString:void 0;function CX(r){if(typeof r=="string")return r;if(xc(r))return X8e(r,CX)+"";if(Vw(r))return I7?I7.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var Z8e=/\s/;function Q8e(r){for(var e=r.length;e--&&Z8e.test(r.charAt(e)););return e}var eOe=/^\s+/;function tOe(r){return r&&r.slice(0,Q8e(r)+1).replace(eOe,"")}function am(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var C7=NaN,rOe=/^[-+]0x[0-9a-f]+$/i,nOe=/^0b[01]+$/i,iOe=/^0o[0-7]+$/i,sOe=parseInt;function oOe(r){if(typeof r=="number")return r;if(Vw(r))return C7;if(am(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=am(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=tOe(r);var t=nOe.test(r);return t||iOe.test(r)?sOe(r.slice(2),t?2:8):rOe.test(r)?C7:+r}var aOe=1/0,cOe=17976931348623157e292;function lOe(r){if(!r)return r===0?r:0;if(r=oOe(r),r===aOe||r===-1/0){var e=r<0?-1:1;return e*cOe}return r===r?r:0}function uOe(r){var e=lOe(r),t=e%1;return e===e?t?e-t:e:0}function fOe(r){return r}var dOe="[object AsyncFunction]",hOe="[object Function]",pOe="[object GeneratorFunction]",gOe="[object Proxy]";function TX(r){if(!am(r))return!1;var e=Kp(r);return e==hOe||e==pOe||e==dOe||e==gOe}var FA=Dl["__core-js_shared__"],T7=function(){var r=/[^.]+$/.exec(FA&&FA.keys&&FA.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function mOe(r){return!!T7&&T7 in r}var yOe=Function.prototype,vOe=yOe.toString;function Ad(r){if(r!=null){try{return vOe.call(r)}catch{}try{return r+""}catch{}}return""}var bOe=/[\\^$.*+?()[\]{}|]/g,wOe=/^\[object .+?Constructor\]$/,xOe=Function.prototype,_Oe=Object.prototype,SOe=xOe.toString,EOe=_Oe.hasOwnProperty,AOe=RegExp("^"+SOe.call(EOe).replace(bOe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IOe(r){if(!am(r)||mOe(r))return!1;var e=TX(r)?AOe:wOe;return e.test(Ad(r))}function COe(r,e){return r?.[e]}function Id(r,e){var t=COe(r,e);return IOe(t)?t:void 0}var CT=Id(Dl,"WeakMap"),R7=function(){try{var r=Id(Object,"defineProperty");return r({},"",{}),r}catch{}}(),TOe=9007199254740991,ROe=/^(?:0|[1-9]\d*)$/;function RX(r,e){var t=typeof r;return e=e??TOe,!!e&&(t=="number"||t!="symbol"&&ROe.test(r))&&r>-1&&r%1==0&&r<e}function kOe(r,e,t){e=="__proto__"&&R7?R7(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function kX(r,e){return r===e||r!==r&&e!==e}var OOe=9007199254740991;function lk(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=OOe}function OX(r){return r!=null&&lk(r.length)&&!TX(r)}var POe=Object.prototype;function $Oe(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||POe;return r===t}function DOe(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var MOe="[object Arguments]";function k7(r){return up(r)&&Kp(r)==MOe}var PX=Object.prototype,BOe=PX.hasOwnProperty,NOe=PX.propertyIsEnumerable,$X=k7(function(){return arguments}())?k7:function(r){return up(r)&&BOe.call(r,"callee")&&!NOe.call(r,"callee")};function LOe(){return!1}var DX=typeof cl=="object"&&cl&&!cl.nodeType&&cl,O7=DX&&typeof hc=="object"&&hc&&!hc.nodeType&&hc,FOe=O7&&O7.exports===DX,P7=FOe?Dl.Buffer:void 0,UOe=P7?P7.isBuffer:void 0,TT=UOe||LOe,zOe="[object Arguments]",qOe="[object Array]",jOe="[object Boolean]",VOe="[object Date]",KOe="[object Error]",HOe="[object Function]",WOe="[object Map]",GOe="[object Number]",YOe="[object Object]",JOe="[object RegExp]",XOe="[object Set]",ZOe="[object String]",QOe="[object WeakMap]",ePe="[object ArrayBuffer]",tPe="[object DataView]",rPe="[object Float32Array]",nPe="[object Float64Array]",iPe="[object Int8Array]",sPe="[object Int16Array]",oPe="[object Int32Array]",aPe="[object Uint8Array]",cPe="[object Uint8ClampedArray]",lPe="[object Uint16Array]",uPe="[object Uint32Array]",An={};An[rPe]=An[nPe]=An[iPe]=An[sPe]=An[oPe]=An[aPe]=An[cPe]=An[lPe]=An[uPe]=!0;An[zOe]=An[qOe]=An[ePe]=An[jOe]=An[tPe]=An[VOe]=An[KOe]=An[HOe]=An[WOe]=An[GOe]=An[YOe]=An[JOe]=An[XOe]=An[ZOe]=An[QOe]=!1;function fPe(r){return up(r)&&lk(r.length)&&!!An[Kp(r)]}function dPe(r){return function(e){return r(e)}}var MX=typeof cl=="object"&&cl&&!cl.nodeType&&cl,Sg=MX&&typeof hc=="object"&&hc&&!hc.nodeType&&hc,hPe=Sg&&Sg.exports===MX,UA=hPe&&AX.process,$7=function(){try{var r=Sg&&Sg.require&&Sg.require("util").types;return r||UA&&UA.binding&&UA.binding("util")}catch{}}(),D7=$7&&$7.isTypedArray,BX=D7?dPe(D7):fPe,pPe=Object.prototype,gPe=pPe.hasOwnProperty;function mPe(r,e){var t=xc(r),n=!t&&$X(r),i=!t&&!n&&TT(r),s=!t&&!n&&!i&&BX(r),o=t||n||i||s,a=o?DOe(r.length,String):[],c=a.length;for(var l in r)gPe.call(r,l)&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||RX(l,c)))&&a.push(l);return a}function yPe(r,e){return function(t){return r(e(t))}}var vPe=yPe(Object.keys,Object),bPe=Object.prototype,wPe=bPe.hasOwnProperty;function xPe(r){if(!$Oe(r))return vPe(r);var e=[];for(var t in Object(r))wPe.call(r,t)&&t!="constructor"&&e.push(t);return e}function uk(r){return OX(r)?mPe(r):xPe(r)}var _Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SPe=/^\w*$/;function fk(r,e){if(xc(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Vw(r)?!0:SPe.test(r)||!_Pe.test(r)||e!=null&&r in Object(e)}var cm=Id(Object,"create");function EPe(){this.__data__=cm?cm(null):{},this.size=0}function APe(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var IPe="__lodash_hash_undefined__",CPe=Object.prototype,TPe=CPe.hasOwnProperty;function RPe(r){var e=this.__data__;if(cm){var t=e[r];return t===IPe?void 0:t}return TPe.call(e,r)?e[r]:void 0}var kPe=Object.prototype,OPe=kPe.hasOwnProperty;function PPe(r){var e=this.__data__;return cm?e[r]!==void 0:OPe.call(e,r)}var $Pe="__lodash_hash_undefined__";function DPe(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=cm&&e===void 0?$Pe:e,this}function sd(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}sd.prototype.clear=EPe;sd.prototype.delete=APe;sd.prototype.get=RPe;sd.prototype.has=PPe;sd.prototype.set=DPe;function MPe(){this.__data__=[],this.size=0}function Kw(r,e){for(var t=r.length;t--;)if(kX(r[t][0],e))return t;return-1}var BPe=Array.prototype,NPe=BPe.splice;function LPe(r){var e=this.__data__,t=Kw(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():NPe.call(e,t,1),--this.size,!0}function FPe(r){var e=this.__data__,t=Kw(e,r);return t<0?void 0:e[t][1]}function UPe(r){return Kw(this.__data__,r)>-1}function zPe(r,e){var t=this.__data__,n=Kw(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Ml(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ml.prototype.clear=MPe;Ml.prototype.delete=LPe;Ml.prototype.get=FPe;Ml.prototype.has=UPe;Ml.prototype.set=zPe;var lm=Id(Dl,"Map");function qPe(){this.size=0,this.__data__={hash:new sd,map:new(lm||Ml),string:new sd}}function jPe(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Hw(r,e){var t=r.__data__;return jPe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function VPe(r){var e=Hw(this,r).delete(r);return this.size-=e?1:0,e}function KPe(r){return Hw(this,r).get(r)}function HPe(r){return Hw(this,r).has(r)}function WPe(r,e){var t=Hw(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Bl(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Bl.prototype.clear=qPe;Bl.prototype.delete=VPe;Bl.prototype.get=KPe;Bl.prototype.has=HPe;Bl.prototype.set=WPe;var GPe="Expected a function";function dk(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(GPe);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var o=r.apply(this,n);return t.cache=s.set(i,o)||s,o};return t.cache=new(dk.Cache||Bl),t}dk.Cache=Bl;var YPe=500;function JPe(r){var e=dk(r,function(n){return t.size===YPe&&t.clear(),n}),t=e.cache;return e}var XPe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZPe=/\\(\\)?/g,QPe=JPe(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(XPe,function(t,n,i,s){e.push(i?s.replace(ZPe,"$1"):n||t)}),e});function e5e(r){return r==null?"":CX(r)}function NX(r,e){return xc(r)?r:fk(r,e)?[r]:QPe(e5e(r))}function Ww(r){if(typeof r=="string"||Vw(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function LX(r,e){e=NX(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Ww(e[t++])];return t&&t==n?r:void 0}function t5e(r,e,t){var n=r==null?void 0:LX(r,e);return n===void 0?t:n}function r5e(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function n5e(r,e,t){var n=-1,i=r.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=r[n+e];return s}var i5e=Math.ceil,s5e=Math.max;function o5e(r,e,t){e===void 0?e=1:e=s5e(uOe(e),0);var n=r==null?0:r.length;if(!n||e<1)return[];for(var i=0,s=0,o=Array(i5e(n/e));i<n;)o[s++]=n5e(r,i,i+=e);return o}function a5e(){this.__data__=new Ml,this.size=0}function c5e(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function l5e(r){return this.__data__.get(r)}function u5e(r){return this.__data__.has(r)}var f5e=200;function d5e(r,e){var t=this.__data__;if(t instanceof Ml){var n=t.__data__;if(!lm||n.length<f5e-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Bl(n)}return t.set(r,e),this.size=t.size,this}function hl(r){var e=this.__data__=new Ml(r);this.size=e.size}hl.prototype.clear=a5e;hl.prototype.delete=c5e;hl.prototype.get=l5e;hl.prototype.has=u5e;hl.prototype.set=d5e;function h5e(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var o=r[t];e(o,t,r)&&(s[i++]=o)}return s}function p5e(){return[]}var g5e=Object.prototype,m5e=g5e.propertyIsEnumerable,M7=Object.getOwnPropertySymbols,y5e=M7?function(r){return r==null?[]:(r=Object(r),h5e(M7(r),function(e){return m5e.call(r,e)}))}:p5e;function v5e(r,e,t){var n=e(r);return xc(r)?n:r5e(n,t(r))}function B7(r){return v5e(r,uk,y5e)}var RT=Id(Dl,"DataView"),kT=Id(Dl,"Promise"),OT=Id(Dl,"Set"),N7="[object Map]",b5e="[object Object]",L7="[object Promise]",F7="[object Set]",U7="[object WeakMap]",z7="[object DataView]",w5e=Ad(RT),x5e=Ad(lm),_5e=Ad(kT),S5e=Ad(OT),E5e=Ad(CT),nu=Kp;(RT&&nu(new RT(new ArrayBuffer(1)))!=z7||lm&&nu(new lm)!=N7||kT&&nu(kT.resolve())!=L7||OT&&nu(new OT)!=F7||CT&&nu(new CT)!=U7)&&(nu=function(r){var e=Kp(r),t=e==b5e?r.constructor:void 0,n=t?Ad(t):"";if(n)switch(n){case w5e:return z7;case x5e:return N7;case _5e:return L7;case S5e:return F7;case E5e:return U7}return e});var q7=Dl.Uint8Array,A5e="__lodash_hash_undefined__";function I5e(r){return this.__data__.set(r,A5e),this}function C5e(r){return this.__data__.has(r)}function t1(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Bl;++e<t;)this.add(r[e])}t1.prototype.add=t1.prototype.push=I5e;t1.prototype.has=C5e;function T5e(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function R5e(r,e){return r.has(e)}var k5e=1,O5e=2;function FX(r,e,t,n,i,s){var o=t&k5e,a=r.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(r),u=s.get(e);if(l&&u)return l==e&&u==r;var f=-1,d=!0,h=t&O5e?new t1:void 0;for(s.set(r,e),s.set(e,r);++f<a;){var g=r[f],p=e[f];if(n)var m=o?n(p,g,f,e,r,s):n(g,p,f,r,e,s);if(m!==void 0){if(m)continue;d=!1;break}if(h){if(!T5e(e,function(y,v){if(!R5e(h,v)&&(g===y||i(g,y,t,n,s)))return h.push(v)})){d=!1;break}}else if(!(g===p||i(g,p,t,n,s))){d=!1;break}}return s.delete(r),s.delete(e),d}function P5e(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function $5e(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var D5e=1,M5e=2,B5e="[object Boolean]",N5e="[object Date]",L5e="[object Error]",F5e="[object Map]",U5e="[object Number]",z5e="[object RegExp]",q5e="[object Set]",j5e="[object String]",V5e="[object Symbol]",K5e="[object ArrayBuffer]",H5e="[object DataView]",j7=ju?ju.prototype:void 0,zA=j7?j7.valueOf:void 0;function W5e(r,e,t,n,i,s,o){switch(t){case H5e:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case K5e:return!(r.byteLength!=e.byteLength||!s(new q7(r),new q7(e)));case B5e:case N5e:case U5e:return kX(+r,+e);case L5e:return r.name==e.name&&r.message==e.message;case z5e:case j5e:return r==e+"";case F5e:var a=P5e;case q5e:var c=n&D5e;if(a||(a=$5e),r.size!=e.size&&!c)return!1;var l=o.get(r);if(l)return l==e;n|=M5e,o.set(r,e);var u=FX(a(r),a(e),n,i,s,o);return o.delete(r),u;case V5e:if(zA)return zA.call(r)==zA.call(e)}return!1}var G5e=1,Y5e=Object.prototype,J5e=Y5e.hasOwnProperty;function X5e(r,e,t,n,i,s){var o=t&G5e,a=B7(r),c=a.length,l=B7(e),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var d=a[f];if(!(o?d in e:J5e.call(e,d)))return!1}var h=s.get(r),g=s.get(e);if(h&&g)return h==e&&g==r;var p=!0;s.set(r,e),s.set(e,r);for(var m=o;++f<c;){d=a[f];var y=r[d],v=e[d];if(n)var w=o?n(v,y,d,e,r,s):n(y,v,d,r,e,s);if(!(w===void 0?y===v||i(y,v,t,n,s):w)){p=!1;break}m||(m=d=="constructor")}if(p&&!m){var _=r.constructor,x=e.constructor;_!=x&&"constructor"in r&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(p=!1)}return s.delete(r),s.delete(e),p}var Z5e=1,V7="[object Arguments]",K7="[object Array]",ev="[object Object]",Q5e=Object.prototype,H7=Q5e.hasOwnProperty;function e$e(r,e,t,n,i,s){var o=xc(r),a=xc(e),c=o?K7:nu(r),l=a?K7:nu(e);c=c==V7?ev:c,l=l==V7?ev:l;var u=c==ev,f=l==ev,d=c==l;if(d&&TT(r)){if(!TT(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new hl),o||BX(r)?FX(r,e,t,n,i,s):W5e(r,e,c,t,n,i,s);if(!(t&Z5e)){var h=u&&H7.call(r,"__wrapped__"),g=f&&H7.call(e,"__wrapped__");if(h||g){var p=h?r.value():r,m=g?e.value():e;return s||(s=new hl),i(p,m,t,n,s)}}return d?(s||(s=new hl),X5e(r,e,t,n,i,s)):!1}function hk(r,e,t,n,i){return r===e?!0:r==null||e==null||!up(r)&&!up(e)?r!==r&&e!==e:e$e(r,e,t,n,hk,i)}var t$e=1,r$e=2;function n$e(r,e,t,n){var i=t.length,s=i;if(r==null)return!s;for(r=Object(r);i--;){var o=t[i];if(o[2]?o[1]!==r[o[0]]:!(o[0]in r))return!1}for(;++i<s;){o=t[i];var a=o[0],c=r[a],l=o[1];if(o[2]){if(c===void 0&&!(a in r))return!1}else{var u=new hl,f;if(!(f===void 0?hk(l,c,t$e|r$e,n,u):f))return!1}}return!0}function UX(r){return r===r&&!am(r)}function i$e(r){for(var e=uk(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,UX(i)]}return e}function zX(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function s$e(r){var e=i$e(r);return e.length==1&&e[0][2]?zX(e[0][0],e[0][1]):function(t){return t===r||n$e(t,r,e)}}function o$e(r,e){return r!=null&&e in Object(r)}function a$e(r,e,t){e=NX(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Ww(e[n]);if(!(s=r!=null&&t(r,o)))break;r=r[o]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&lk(i)&&RX(o,i)&&(xc(r)||$X(r)))}function c$e(r,e){return r!=null&&a$e(r,e,o$e)}var l$e=1,u$e=2;function f$e(r,e){return fk(r)&&UX(e)?zX(Ww(r),e):function(t){var n=t5e(t,r);return n===void 0&&n===e?c$e(t,r):hk(e,n,l$e|u$e)}}function d$e(r){return function(e){return e?.[r]}}function h$e(r){return function(e){return LX(e,r)}}function p$e(r){return fk(r)?d$e(Ww(r)):h$e(r)}function g$e(r){return typeof r=="function"?r:r==null?fOe:typeof r=="object"?xc(r)?f$e(r[0],r[1]):s$e(r):p$e(r)}function m$e(r,e,t,n){for(var i=-1,s=r==null?0:r.length;++i<s;){var o=r[i];e(n,o,t(o),r)}return n}function y$e(r){return function(e,t,n){for(var i=-1,s=Object(e),o=n(e),a=o.length;a--;){var c=o[++i];if(t(s[c],c,s)===!1)break}return e}}var v$e=y$e();function b$e(r,e){return r&&v$e(r,e,uk)}function w$e(r,e){return function(t,n){if(t==null)return t;if(!OX(t))return r(t,n);for(var i=t.length,s=-1,o=Object(t);++s<i&&n(o[s],s,o)!==!1;);return t}}var x$e=w$e(b$e);function _$e(r,e,t,n){return x$e(r,function(i,s,o){e(n,i,t(i),o)}),n}function S$e(r,e){return function(t,n){var i=xc(t)?m$e:_$e,s={};return i(t,r,g$e(n),s)}}var E$e=Object.prototype,A$e=E$e.hasOwnProperty,qX=S$e(function(r,e,t){A$e.call(r,t)?r[t].push(e):kOe(r,t,[e])}),I$e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100 group"><div>Jupiter Lend</div><div class="absolute i-tabler:external-link size-5 right-3 top-1/2 -translate-y-1/2 group-hover:rotate-45 transition-100">'),C$e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Swap Now'),T$e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Receive NFT'),R$e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Receive SOL'),k$e=le('<button class="relative cursor-pointer w-full py-2.5 rounded-md text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100"><div>Buy SOL'),O$e=le('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-4 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="size-7 text-zinc-400"></div></div></div><div class="font-medium mb-2"></div><div class="text-sm text-zinc-400 text-center leading-4"></div><div class="mt-8 w-full space-y-2">');const Jm=r=>{const e=Gn(),t=Te(()=>`Your ${r.type==="token"?"tokens":r.type==="defi"?"DeFi positions":r.type==="nft"?"NFTs":r.type==="activity"?"activity":"trades"} will appear here`),n=Te(()=>`${r.type==="pnl"?"Swap or trade any token":r.type==="defi"?"Head to Jupiter Lend":r.type==="nft"?"Deposit or buy NFTs":"Deposit or buy tokens"} to get started`);return(()=>{var i=O$e(),s=i.firstChild,o=s.firstChild,a=o.firstChild,c=s.nextSibling,l=c.nextSibling,u=l.nextSibling;return Z(c,t),Z(l,n),Z(u,A(Kt,{get children(){return[A(Re,{get when(){return r.type==="defi"},get children(){var f=I$e();return f.$$click=()=>window.open(Ss.LEND,"_blank"),f}}),A(Re,{get when(){return r.type==="pnl"},get children(){var f=C$e();return f.$$click=()=>e(Qe.SWAP),f}}),A(Re,{get when(){return r.type==="nft"},get children(){var f=T$e();return f.$$click=()=>e(Qe.RECEIVE),f}}),A(Re,{when:!0,get children(){return[(()=>{var f=R$e();return f.$$click=()=>e(Qe.RECEIVE),f})(),(()=>{var f=k$e();return f.$$click=()=>window.open(Ss.ONBOARD,"_blank"),f})()]}})]}})),Ge(f=>nr(a,{"i-tabler:device-analytics":r.type==="defi","i-tabler:currency-solana":r.type==="token","i-tabler:list-details":r.type==="activity","i-tabler:arrows-left-right":r.type==="pnl","i-tabler:photo-spark":r.type==="nft"},f)),i})()};At(["click"]);var P$e=le('<div class="fixed inset-0 flex items-center justify-center z-101">'),$$e=le('<div class="i-tabler:x size-5">'),D$e=le('<div class="text-2xl font-semibold">'),M$e=le('<div class="text-zinc-400 font-medium">'),B$e=le('<div class="w-full bg-zinc-950 mt-6 rounded-b-xl divide-y divide-zinc-800"><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Date</div><div class=font-medium></div></div><div class="py-3 px-4 space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Balance Changes</div><div class=text-zinc-400></div></div></div><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Status</div><div class=font-medium></div></div><div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center gap-1 text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-5">'),N$e=le('<div class="flex items-center gap-3"><div class=font-semibold></div><div class=flex-1></div><div class="flex flex-col items-end"><div class=font-medium>');const L$e=r=>{const{openExplorer:e}=Al();function t(n){n||r.onClose()}return A(ti,{get open(){return!!r.transaction},onOpenChange:t,get children(){return A(ti.Portal,{get children(){return[A(ti.Overlay,{class:"fixed inset-0 backdrop-blur z-100"}),(()=>{var n=P$e();return Z(n,A(ti.Content,{class:"bg-zinc-900 rounded-xl max-w-95vw w-md ring-1 ring-zinc-700",get children(){return A(Oe,{get when(){return r.transaction},children:i=>A(ti.Description,{class:"relative flex flex-col items-center justify-center",get children(){return[A(ti.CloseButton,{class:"absolute top-0 right-0 m-2 cursor-pointer bg-zinc-900 hover:bg-zinc-800 p-2 rounded-md -m-2 transition-100 text-zinc-500 hover:text-zinc-200",get children(){return $$e()}}),A(ln,{get src(){return i().platformImage},class:"size-16 mt-8 mb-4",hd:!0}),(()=>{var s=D$e();return Z(s,()=>i().platform),s})(),(()=>{var s=M$e();return Z(s,()=>i().type),s})(),(()=>{var s=B$e(),o=s.firstChild,a=o.firstChild,c=a.nextSibling,l=o.nextSibling,u=l.firstChild,f=u.firstChild,d=f.nextSibling,h=l.nextSibling,g=h.firstChild,p=g.nextSibling,m=h.nextSibling,y=m.firstChild,v=y.nextSibling;return v.firstChild,Z(c,()=>new Date(i().timestamp).toLocaleString()),Z(d,A(Oe,{get when(){return i().balanceChanges.length===0},get children(){return Is.DASH}})),Z(l,A(pt,{get each(){return i().balanceChanges},children:({id:w,icon:_,symbol:x,amount:E})=>(()=>{var S=N$e(),T=S.firstChild,C=T.nextSibling,P=C.nextSibling,V=P.firstChild;return Z(S,A(ln,{src:_}),T),Z(T,()=>x||w.slice(0,4)),V.classList.toggle("text-red-400",E<0),V.classList.toggle("text-green-400",E>0),Z(V,A(rk,{value:E,override:{minimumFractionDigits:2,maximumFractionDigits:9}})),S})()}),null),Z(p,A(Oe,{get when(){return i().status==="success"},fallback:"Failed",children:"Successful"})),v.$$click=()=>e({type:"tx",value:i().signature}),Z(v,A(Gi,{get address(){return i().signature}}),null),Ge(w=>{var _=i().status==="success",x=i().status==="revert";return _!==w.e&&p.classList.toggle("text-green-400",w.e=_),x!==w.t&&p.classList.toggle("text-red-400",w.t=x),w},{e:void 0,t:void 0}),s})()]}})})}})),n})()]}})}})};At(["click"]);var F$e=le('<div class="h-12 px-4 flex items-center"><div class="h-5 w-32 bg-zinc-900 animate-pulse rounded">'),U$e=le('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div class="i-tabler:loader-2 animate-spin size-5"></div><div>Loading more...'),z$e=le('<button class="w-full p-3 flex items-center justify-center border-t border-zinc-800 bg-zinc-800 active:bg-zinc-800/75 cursor-pointer font-medium gap-2"><div>Load more'),q$e=le('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div>No more activity'),j$e=le("<div>"),V$e=le('<div class="h-15 items-center flex gap-3 px-4"><div class="size-8 rounded-full bg-zinc-900 animate-pulse rounded ring-1 ring-zinc-800"></div><div class=space-y-1><div class="h-4 w-24 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-16 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="h-4 w-24 bg-zinc-900 animate-pulse rounded">'),K$e=le('<div class="divide-y divide-zinc-800">'),H$e=le('<div class><div class="sticky top-12 h-12 px-4 flex items-center bg-zinc-950 z-9"><div class=text-zinc-400>'),W$e=le('<div class="flex items-center gap-3 px-4 h-15 hover:bg-zinc-900 cursor-pointer"><div class=relative><div class="absolute bottom--0.5 right--1 rounded-full size-4 p-0.5 flex items-center justify-center"><div></div></div></div><div class=space-y-0.5><div class="font-medium leading-none"></div><div class="text-zinc-400 text-sm leading-none"></div></div><div class=flex-1></div><div class="flex flex-col gap-0.5">'),G$e=le('<span class="ml-1 text-xs p-0.75 text-zinc-400 bg-zinc-800 rounded leading-none">+'),Y$e=le('<div class="flex justify-end items-center">');function J$e(r){return new Date(r).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}const X$e=r=>{const e=EX(),t=xX(()=>r.isVisible),n=Te(()=>{if(!t.data)return{};const a=t.data.pages.flatMap(c=>c.transactions);return a.length===0?{}:qX(a,c=>J$e(c.timestamp))}),i=Te(()=>t.data?t.data.pages.every(a=>a.transactions.length===0):!0);ot(Pn(()=>e.y,a=>{a+window.innerHeight+369<document.body.scrollHeight||!r.isVisible||t.isFetching||t.fetchNextPage()}));const[s,o]=Pe(null);return(()=>{var a=j$e();return Z(a,A(L$e,{get transaction(){return s()},onClose:()=>o(null)}),null),Z(a,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){return[F$e(),A(pt,{get each(){return Array.from({length:10})},children:()=>V$e()})]}}),A(Re,{get when(){return i()},get children(){return A(Jm,{type:"activity"})}}),A(Re,{get when(){return kr(()=>!!t.data)()&&Object.entries(n())},children:c=>(()=>{var l=K$e();return Z(l,A(pt,{get each(){return c()},children:([u,f])=>(()=>{var d=H$e(),h=d.firstChild,g=h.firstChild;return Z(g,u),Z(d,A(pt,{each:f,children:p=>(()=>{var m=W$e(),y=m.firstChild,v=y.firstChild,w=v.firstChild,_=y.nextSibling,x=_.firstChild,E=x.nextSibling,S=_.nextSibling,T=S.nextSibling;return m.$$click=()=>o(p),Z(y,A(ln,{get src(){return p.platformImage}}),v),Z(x,()=>p.platform),Z(E,()=>p.type),Z(T,A(pt,{get each(){return p.balanceChanges.slice(0,2)},children:(C,P)=>(()=>{var V=Y$e();return Z(V,A(Ai,{class:"text-sm leading-none",get value(){return C.amount},get prefix(){return C.amount>0?"+":Is.DASH},get suffix(){return` ${C.symbol||C.id.slice(0,4)}`},type:"long",get classList(){return{"text-green-400":C.amount>0,"text-red-400":C.amount<0}}}),null),Z(V,A(Oe,{get when(){return P()===1&&p.balanceChanges.length>2},get children(){var L=G$e();return L.firstChild,Z(L,()=>p.balanceChanges.length-2,null),L}}),null),V})()})),Ge(C=>{var P=p.status==="success",V=p.status==="revert",L={"i-tabler:check text-green-400":p.status==="success","i-tabler:x text-red-400":p.status==="revert"};return P!==C.e&&v.classList.toggle("bg-green-950",C.e=P),V!==C.t&&v.classList.toggle("bg-red-950",C.t=V),C.a=nr(w,L,C.a),C},{e:void 0,t:void 0,a:void 0}),m})()}),null),d})()})),l})()})]}}),null),Z(a,A(Oe,{get when(){return!i()},get children(){return A(Kt,{get children(){return[A(Re,{get when(){return t.isFetching},get children(){return U$e()}}),A(Re,{get when(){return t.hasNextPage},get children(){var c=z$e();return c.$$click=()=>t.fetchNextPage(),c}}),A(Re,{get when(){return!t.hasNextPage},get children(){return q$e()}})]}})}}),null),Ge(()=>a.classList.toggle("hidden",!r.isVisible)),a})()};At(["click"]);var Z$e=le('<div class="space-y-2 -mx-4 -my-4">'),Q$e=le('<div class="text-sm text-zinc-300">'),eDe=le('<button class="w-full py-3 px-4 flex items-center gap-3 transition-100 group"><div class="flex-1 text-left"><div class="font-medium leading-tight"></div></div><div class="flex items-center gap-1"><span class="text-sm font-medium">Claim</span><div class="i-tabler:arrow-up-right size-4">'),tDe=le('<div class="size-0.5 rounded-full bg-zinc-400 mx-1">'),rDe=le('<div class="size-8 flex items-center justify-center ring-1 ring-zinc-600 bg-zinc-700 rounded-full text-sm text-zinc-300 ml--1">+'),nDe=le('<div class="relative w-full"><button class="p-3 rounded-lg flex justify-between items-center bg-zinc-700/50 hover:bg-zinc-700/70 group cursor-pointer w-full transition-100"><div class=text-left><div class="font-medium text-sm"></div><div class="text-zinc-300 flex items-center gap-1 group-hover:text-primary-200 transition-100 text-xs"><span>View All</span><div class="i-tabler:arrow-right group-hover:translate-x-1 transition-100"></div></div></div><div class="flex items-center"></div></button><button class="absolute right--2.75 top--2.75 rounded-full size-6 p-1 bg-zinc-700 text-zinc-300 z-1 hover:bg-zinc-600 hover:text-zinc-50 transition-100 cursor-pointer shadow"><div class=i-tabler:x>');const W7=bm.defineItem("session:dismissed_airdrop_platforms",{fallback:null}),iDe=r=>{const e=ci(),[t,n]=Pe(!1);mr(async()=>{const o=await W7.getValue();if(!o)return;const a=new Set(o),c=r.airdrops.some(l=>!a.has(l.platform.label));n(!c)});const i=Te(()=>r.airdrops.reduce((o,a)=>o+a.value,0));function s(){e.open({title:"Claimable Airdrops",content:(()=>{var o=Z$e();return Z(o,A(pt,{get each(){return r.airdrops},children:a=>(()=>{var c=eDe(),l=c.firstChild,u=l.firstChild,f=l.nextSibling,d=f.firstChild,h=d.nextSibling;return c.$$click=()=>{a.link&&window.open(a.link,"_blank")},Z(c,A(ln,{get src(){return a.platform.image}}),l),Z(u,()=>a.platform.label),Z(l,A(Oe,{get when(){return a.value>0},get children(){var g=Q$e();return Z(g,A(Hr,{get value(){return a.value},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),g}}),null),Ge(g=>{var p={"hover:bg-zinc-800 cursor-pointer":!!a.link},m=!!a.link,y=!a.link,v={"group-hover:translate-x-1 group-hover:translate-y--1 transition-100":!!a.link};return g.e=nr(c,p,g.e),m!==g.t&&f.classList.toggle("text-primary-200",g.t=m),y!==g.a&&f.classList.toggle("text-zinc-500",g.a=y),g.o=nr(h,v,g.o),g},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()})),o})()})}return A(Oe,{get when(){return!t()},get children(){var o=nDe(),a=o.firstChild,c=a.firstChild,l=c.firstChild,u=l.nextSibling,f=u.firstChild,d=c.nextSibling,h=a.nextSibling;return a.$$click=s,Z(l,A(Oe,{get when(){return r.airdrops.length>1},get fallback(){return`You're eligible for the ${r.airdrops.at(0)?.platform.label} airdrop!`},get children(){return["You're eligible to claim ",kr(()=>r.airdrops.length)," airdrops!"]}})),Z(u,A(Oe,{get when(){return i()>0},get children(){return[A(Hr,{get value(){return i()},prefix:"~$",override:{minimumFractionDigits:2,maximumFractionDigits:2}}),tDe()]}}),f),Z(d,A(ln,{get src(){return r.airdrops.at(0)?.platform.image},class:"size-8 ring-zinc-700 z-1"}),null),Z(d,A(Oe,{get when(){return r.airdrops.length>1},get children(){var g=rDe();return g.firstChild,Z(g,()=>r.airdrops.length-1,null),g}}),null),h.$$click=async g=>{g.stopPropagation(),n(!0),await W7.setValue(r.airdrops.map(p=>p.platform.label))},o}})};At(["click"]);var sDe=le('<div class="h-5 w-20 bg-zinc-800 animate-pulse rounded">'),oDe=le("<div class=text-zinc-400>"),aDe=le('<div class="flex justify-between py-3 px-4 text-sm"><div class="text-zinc-400 flex items-center gap-1"><div>Positions:</div></div><button class="flex items-center text-zinc-400 gap-1 hover:text-primary-200 transition-100 cursor-pointer"><div class=i-tabler:external-link></div><div>View Portfolio'),G7=le('<div class="space-y-3 pb-3">'),cDe=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more positions'),lDe=le("<div><div class=px-4>"),uDe=le('<div class="ring-1.5 ring-zinc-900 rounded-xl bg-zinc-900 h-13 flex items-center space-x-3 p-3"><div class="size-7 rounded-full bg-zinc-800 animate-pulse"></div><div class="h-5 w-20 rounded bg-zinc-800 animate-pulse"></div><div class=flex-1></div><div class="h-5 w-16 rounded bg-zinc-800 animate-pulse">'),fDe=le('<div class="font-medium truncate">'),dDe=le('<div class="flex-1 mx--3">'),hDe=le('<div class="flex-none i-tabler:chevron-down size-5 text-zinc-500 group-hover:text-zinc-50 transition-100 ui-expanded:rotate-180">'),pDe=le('<div class="px-3 pt-3 pb-1 space-y-3">'),gDe=le('<button class="p-1.5 ml--3 text-zinc-500 hover:text-primary-200 cursor-pointer transition-100"><div class="i-tabler:external-link size-4.5">'),mDe=le('<div class="font-medium text-zinc-400">'),yDe=le('<div class><div class="text-xs font-semibold tracking-wider uppercase text-zinc-500"></div><div class>'),vDe=le('<div class="text-right space-y-0.5"><div class="font-medium leading-none">'),bDe=le('<div class="flex items-center gap-3 h-11"><div class="flex items-center flex-none"></div><div class="font-medium truncate"></div><div class="flex-1 ml--3">'),wDe=le("<div>"),xDe=le("<div class=text-zinc-500>"),_De=le('<div class="text-sm leading-none text-zinc-400">');const qA=Is.STAR.repeat(4),SDe=r=>{const{selectedAccount:e}=Jr(),{query:t,data:n}=_X(),{settings:i}=xi(),s=Te(()=>n.platforms.length===0);return(()=>{var o=lDe(),a=o.firstChild;return Z(o,A(Oe,{get when(){return!t.isFetched||!s()},get fallback(){return A(Jm,{type:"defi"})},get children(){var c=aDe(),l=c.firstChild;l.firstChild;var u=l.nextSibling;return Z(l,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){return sDe()}}),A(Re,{get when(){return i.showBalances},get children(){return A(Hr,{class:"font-medium text-zinc-50",get value(){return n.totalValue},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})}}),A(Re,{when:!0,get children(){var f=oDe();return Z(f,qA),f}})]}}),null),u.$$click=()=>window.open(Ss.PORTFOLIO(e()?.address??""),"_blank"),c}}),a),Z(a,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){var c=G7();return Z(c,A(pt,{get each(){return Array.from({length:5})},children:(l,u)=>(()=>{var f=uDe();return Ge(d=>(d=(100-u()*20)/100)!=null?f.style.setProperty("opacity",d):f.style.removeProperty("opacity")),f})()})),c}}),A(Re,{get when(){return!s()},get children(){return(()=>{var c=G7();return Z(c,A(pt,{get each(){return n.platforms},children:l=>A($f,{class:"w-full ring-1.5 ring-zinc-900 rounded-xl bg-zinc-900/50",get children(){return[A($f.Trigger,{class:"rounded-xl px-3 h-13 flex items-center gap-x-3 bg-zinc-900 w-full cursor-pointer group",get children(){return[A(ln,{get src(){return l.platform.image},class:"size-7 ring-0"}),(()=>{var u=fDe();return Z(u,()=>l.platform.label),u})(),A(Oe,{get when(){return l.platform.url},children:u=>(()=>{var f=gDe();return f.$$click=d=>{d.stopImmediatePropagation(),window.open(u(),"_blank")},f})()}),dDe(),A(Oe,{get when(){return i.showBalances},get fallback(){return(()=>{var u=mDe();return Z(u,qA),u})()},get children(){return A(Hr,{class:"font-medium",get value(){return l.value},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})}}),hDe()]}}),A($f.Content,{class:"rounded-b-xl animate-[collapsible-slide-up_100ms] ui-expanded:animate-[collapsible-slide-down_100ms] overflow-hidden",get children(){var u=pDe();return Z(u,A(pt,{get each(){return l.positions},children:f=>(()=>{var d=yDe(),h=d.firstChild,g=h.nextSibling;return Z(h,()=>f.category),Z(g,A(pt,{get each(){return f.assets},children:p=>(()=>{var m=bDe(),y=m.firstChild,v=y.nextSibling,w=v.nextSibling;return Z(y,A(pt,{get each(){return p.icons},children:(_,x)=>(()=>{var E=wDe();return Z(E,A(ln,{src:_,class:"size-full"})),Ge(S=>{var T=gr("size-6",{"-ml-1":x()>0}),C=p.icons.length-x();return T!==S.e&&tn(E,S.e=T),C!==S.t&&((S.t=C)!=null?E.style.setProperty("z-index",C):E.style.removeProperty("z-index")),S},{e:void 0,t:void 0}),E})()})),Z(v,()=>p.symbol),Z(m,A(Oe,{get when(){return p.yield},children:_=>A(Gm,{class:"text-xs font-medium ml--2 py-0.5 whitespace-nowrap",get value(){return _()*100},suffix:" APY"})}),w),Z(m,A(Oe,{get when(){return i.showBalances},get fallback(){return(()=>{var _=xDe();return Z(_,qA),_})()},get children(){var _=vDe(),x=_.firstChild;return Z(x,A(Hr,{get value(){return p.value},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),Z(_,A(Oe,{get when(){return p.amount},children:E=>(()=>{var S=_De();return Z(S,A(Ai,{get value(){return E()},type:"long"})),S})()}),null),_}}),null),m})()})),d})()})),u}})]}})})),c})()}})]}})),Z(o,A(Oe,{get when(){return kr(()=>!!t.data)()&&!s()},get children(){return cDe()}}),null),Ge(()=>o.classList.toggle("hidden",!r.isVisible)),o})()};At(["click"]);var EDe=le('<div class="leading-tight text-zinc-300">'),ADe=le('<div class="grid grid-cols-2 gap-4 mt-6">'),IDe=le('<div class=space-y-4><div class="w-full border-b border-zinc-700"></div><div><h3 class="font-medium underline underline-offset-8 decoration-primary-200">Attributes'),CDe=le('<div class="size-full w-full h-40 flex rounded-xl bg-zinc-800 flex items-center justify-center"><div class="i-tabler:question-mark size-24 text-zinc-400">'),TDe=le('<div class="w-full h-32 flex items-center justify-center text-zinc-500 text-sm font-semibold tracking-wider">NO ATTRIBUTES'),RDe=le('<div class><div class="text-xs uppercase text-zinc-400 leading-tight font-medium"></div><div class="font-medium text-sm leading-tight">'),Y7=le('<div class="p-3 grid grid-cols-2 gap-3">'),kDe=le('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div class="i-tabler:loader-2 animate-spin size-5"></div><div>Loading more...'),ODe=le('<button class="w-full p-3 flex items-center justify-center border-t border-zinc-800 bg-zinc-800 active:bg-zinc-800/75 cursor-pointer font-medium gap-2"><div>Load more'),PDe=le('<div class="p-3 flex items-center justify-center border-t border-zinc-800 text-zinc-500 gap-2"><div>No more NFTs'),$De=le("<div>"),DDe=le('<div class="rounded-xl bg-zinc-900 animate-pulse aspect-square">'),MDe=le('<button class="relative cursor-pointer hover:scale-103 transition-100 rounded-xl bg-zinc-800"><div class="absolute bottom-1 left-1 bg-zinc-950/50 backdrop-blur px-2 py-1 rounded-lg text-sm font-semibold whitespace-nowrap truncate max-w-[calc(100%-0.5rem)]">'),BDe=le('<div class="size-full aspect-square flex rounded-xl bg-zinc-800 flex items-center justify-center"><div class="i-tabler:question-mark size-24 text-zinc-400">');const J7=30,NDe=r=>{const{selectedAccount:e}=Jr(),t=ZU(()=>({queryKey:["nfts",e()?.address],queryFn:async({pageParam:o})=>ws.getNfts({address:e().address,page:o,limit:J7}),initialPageParam:1,getNextPageParam:o=>o.items.length===J7?o.page+1:void 0,enabled:!!e()?.address})),n=EX(),i=ci();function s(o){i.open({title:o.name,content:(()=>{var a=IDe(),c=a.firstChild,l=c.nextSibling;return l.firstChild,Z(a,A(ln,{get src(){return o.image},class:"object-cover rounded-xl size-full min-h-40 ring-0",hd:!0,get fallback(){return CDe()}}),c),Z(a,A(Oe,{get when(){return o.description},get children(){var u=EDe();return Z(u,()=>o.description),u}}),c),Z(l,A(Oe,{get when(){return o.attributes.length},get fallback(){return TDe()},get children(){var u=ADe();return Z(u,A(pt,{get each(){return o.attributes},children:({key:f,value:d})=>(()=>{var h=RDe(),g=h.firstChild,p=g.nextSibling;return Z(g,f),Z(p,d),h})()})),u}}),null),a})()})}return ot(Pn(()=>n.y,o=>{o+window.innerHeight+369<document.body.scrollHeight||!r.isVisible||t.isFetching||t.fetchNextPage()})),(()=>{var o=$De();return Z(o,A(Kt,{get children(){return[A(Re,{get when(){return t.isLoading},get children(){var a=Y7();return Z(a,A(pt,{each:[1,2,3,4,5,6],children:()=>DDe()})),a}}),A(Re,{get when(){return!t.data?.pages.at(0)?.items.length},get children(){return A(Jm,{type:"nft"})}}),A(Re,{get when(){return t.data},get children(){return[(()=>{var a=Y7();return Z(a,A(pt,{get each(){return t.data?.pages.flatMap(c=>c.items)},children:c=>(()=>{var l=MDe(),u=l.firstChild;return l.$$click=()=>s(c),Z(l,A(ln,{get src(){return c.image},class:"object-cover aspect-square rounded-xl size-full",hd:!0,get fallback(){return BDe()}}),u),Z(u,()=>c.name),l})()})),a})(),A(Kt,{get children(){return[A(Re,{get when(){return t.isFetching},get children(){return kDe()}}),A(Re,{get when(){return t.hasNextPage},get children(){var a=ODe();return a.$$click=()=>t.fetchNextPage(),a}}),A(Re,{get when(){return!t.hasNextPage},get children(){return PDe()}})]}})]}})]}})),Ge(()=>o.classList.toggle("hidden",!r.isVisible)),o})()};At(["click"]);var LDe=le('<button class="flex items-end text-xs bg-primary-200/7 px-0.75 rounded text-primary-200 font-medium ring-1 hover:ring-primary-200 ring-primary-200/40 cursor-pointer transition-100 leading-none py-0.1 group"><div></div><div class="i-tabler:external-link size-3.5 ml-1 text-primary-200/75 group-hover:text-primary-200 transition-100">');const FDe=r=>A(Oe,{get when(){return r.links?.at(0)},children:e=>(()=>{var t=LDe(),n=t.firstChild;return t.$$click=i=>{i.stopImmediatePropagation(),window.open(e().url,"_blank")},Z(n,()=>e().label),t})()});At(["click"]);var UDe=le('<div class="absolute top-1 right-1 h-3.5 min-w-3.5 px-0.5 flex items-center justify-center bg-primary-200 text-zinc-950 text-xs font-bold rounded">'),zDe=le('<div class="i-tabler:filter-2-cog size-5">'),qDe=le('<div class=p-2.5><div class=text-zinc-300>Minimum Value</div><div class="grid grid-cols-4 bg-zinc-950 rounded-md p-1 gap-1">'),jDe=le('<div class="flex justify-between items-center pl-4 text-sm border-b border-zinc-800"><div class="flex items-center text-zinc-400"><button class="size-11 flex items-center justify-center cursor-pointer hover:text-zinc-50 transition-100 hover:bg-zinc-900/50 border-l border-zinc-800 relative"><div class="i-tabler:recycle size-5">'),VDe=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3"> hidden '),KDe=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more tokens'),HDe=le("<div><div>"),WDe=le('<div class="h-5 w-20 bg-zinc-800 animate-pulse rounded">'),GDe=le("<div class=text-zinc-400>"),YDe=le("<div><div>Holdings:"),JDe=le('<div class="bg-zinc-900 ring-1 ring-zinc-700 rounded-md text-sm max-w-56 py-1.5 px-2.5 mt-1.5">Holdings which also appear in DeFi positions are excluded.'),XDe=le('<button class="py-1 text-zinc-400 text-sm flex justify-center rounded cursor-pointer transition-100">'),ZDe=le('<div class="flex items-center gap-4 px-4 h-15"><div class="rounded-full size-8 bg-zinc-900 animate-pulse ring-1 ring-zinc-800"></div><div class="flex flex-col items-start gap-1"><div class="h-4 w-12 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-24 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-4 w-20 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-900 animate-pulse rounded">'),QDe=le('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),eMe=le('<div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),tMe=le('<button class="w-full text-left cursor-pointer flex items-center gap-3 px-4 h-15 hover:bg-zinc-900"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1>'),rMe=le('<div class="text-zinc-500 text-lg">');const X7=Is.STAR.repeat(4),nMe=[{label:"None",value:0},{label:"$0.01",value:.01},{label:"$1.00",value:1},{label:"$5.00",value:5}],iMe=r=>{const e=Gn(),t=Cs(),{settings:n,updateUserSettings:i}=xi(),[s,o]=Pe(!1),a=Te(()=>t.data?.tokens.filter(u=>u.amount>0&&u.value>=n.holdingsValueFilter)??[]),c=Te(()=>t.data?.tokens.every(u=>u.amount===0)),l=Te(()=>(t.data?.tokens.filter(u=>u.amount>0).length??0)-a().length);return(()=>{var u=HDe(),f=u.firstChild;return Z(f,A(Oe,{get when(){return!c()},get children(){var d=jDe(),h=d.firstChild,g=h.firstChild;return g.firstChild,Z(d,A(Im,{get trigger(){return(()=>{var p=YDe();return p.firstChild,Z(p,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){return WDe()}}),A(Re,{get when(){return n.showBalances},get children(){return A(Hr,{class:"font-medium text-zinc-50",get value(){return t.data?.totalValue??0},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})}}),A(Re,{when:!0,get children(){var m=GDe();return Z(m,X7),m}})]}}),null),Ge(()=>tn(p,gr("flex items-center cursor-pointer text-zinc-400 transition-100 group border-b border-zinc-500 border-dashed gap-1",{"border-zinc-300":s()}))),p})()},get content(){return JDe()},onOpenChange:o}),h),g.$$click=()=>e(Qe.TOKEN_RECLAIM),Z(g,A(Oe,{get when(){return(t.data?.reclaimableCount??0)>0},get children(){var p=UDe();return Z(p,()=>t.data?.reclaimableCount),p}}),null),Z(h,A(Tn.Root,{get children(){return[A(Tn.Trigger,{class:"size-11 flex items-center justify-center cursor-pointer hover:text-zinc-50 transition-100 hover:bg-zinc-900/50 border-l border-zinc-800",get children(){return zDe()}}),A(Tn.Portal,{get children(){return A(Tn.Content,{class:"z-100 text-base bg-zinc-900 rounded ring-1 ring-zinc-700 w-70 shadow",get children(){var p=qDe(),m=p.firstChild,y=m.nextSibling;return Z(y,A(pt,{each:nMe,children:({label:v,value:w})=>(()=>{var _=XDe();return _.$$click=()=>i({type:"setHoldingsValueFilter",value:w}),Z(_,v),Ge(x=>nr(_,{"bg-zinc-800 text-zinc-50":w===n.holdingsValueFilter,"bg-zinc-950 hover:text-zinc-200":w!==n.holdingsValueFilter},x)),_})()})),p}})}})]}}),null),d}}),null),Z(f,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){return A(pt,{get each(){return Array.from({length:20})},children:()=>ZDe()})}}),A(Re,{get when(){return c()},get children(){return A(Jm,{type:"token"})}}),A(Re,{get when(){return t.data},get children(){return A(pt,{get each(){return a()},children:({icon:d,id:h,symbol:g,amount:p,value:m,price:y,priceChange:v,isVerified:w,links:_})=>(()=>{var x=tMe(),E=x.firstChild,S=E.firstChild,T=S.firstChild,C=S.nextSibling,P=C.firstChild,V=P.nextSibling;return E.nextSibling,x.$$click=()=>e(Qe.ASSETS(h)),Z(x,A(ln,{src:d}),E),Z(T,()=>g||h.slice(0,4)),Z(S,A(Oe,{when:w,get children(){return QDe()}}),null),Z(S,A(FDe,{links:_}),null),Z(P,A(Ai,{value:y,prefix:"$",type:"long"})),V.classList.toggle("hidden",!v),Z(V,A(Gm,{value:v})),Z(x,A(Oe,{get when(){return n.showBalances},get fallback(){return(()=>{var L=rMe();return Z(L,X7),L})()},get children(){var L=eMe(),D=L.firstChild,b=D.nextSibling;return Z(D,A(Hr,{value:m,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),Z(b,A(Ai,{value:p,type:"long"})),L}}),null),x})()})}})]}}),null),Z(u,A(Kt,{get children(){return[A(Re,{get when(){return c()},get children(){return[]}}),A(Re,{get when(){return l()},get children(){var d=VDe(),h=d.firstChild;return Z(d,l,h),Z(d,A(Oe,{get when(){return l()===1},fallback:"tokens",children:"token"}),null),d}}),A(Re,{get when(){return t.data},get children(){return KDe()}})]}}),null),Ge(()=>u.classList.toggle("hidden",!r.isVisible)),u})()};At(["click"]);var sMe=le('<div class="bg-zinc-800 h-9 w-44 animate-pulse rounded">'),oMe=le('<div class="i-tabler:loader animate-spin size-4 text-zinc-400">'),aMe=le('<div class="flex items-center gap-1">'),cMe=le('<div class="bg-zinc-800 h-5 w-20 animate-pulse rounded">'),lMe=le(`<div class=relative><div class="space-y-4 px-4 pt-4 pb-2 bg-zinc-900"><div><div class="text-3xl font-semibold transition-100"></div><div class="flex items-center justify-between font-medium"><button class="flex items-center cursor-pointer text-zinc-300 hover:text-zinc-50 transition-100 group border-b border-transparent hover:border-zinc-300 border-dashed"><div class=mr-1.25>Today's PnL:</div> <div class="size-4.5 i-tabler:chevron-right ml-0.75 mr--1"></div></button><div class="flex gap-1"><button class="cursor-pointer rounded hover:text-zinc-100 bg-zinc-900 hover:bg-zinc-800 p-1 text-zinc-400 transition-100"><div class=size-5></div></button><button class="cursor-pointer rounded hover:text-zinc-100 bg-zinc-900 hover:bg-zinc-800 p-1 text-zinc-400 transition-100"><div class="i-tabler:refresh size-5"></div></button></div></div></div><div class="flex items-center justify-between gap-2"></div></div><div class="mx-0.1 bg-zinc-900 sticky top-0 z-10 border-b border-zinc-800 h-12 flex items-center"><div class="flex items-center px-3 gap-2">`),uMe=le('<button class="flex flex-col justify-center items-center gap-2 group cursor-pointer"><div class="bg-zinc-800 rounded-full size-12 flex items-center justify-center ring-1 ring-zinc-800 group-hover:ring-primary-200 group-active:bg-zinc-800/75 transition-100"><div></div></div><div class="text-zinc-400 group-hover:text-zinc-100 transition-100 text-sm font-medium">'),fMe=le('<div class="cursor-pointer text-center font-medium px-2 transition-100 w-18 h-12 flex items-center justify-center border-t-4 border-t-transparent">');const Z7=Is.STAR.repeat(4),dMe=()=>{const r=Gn(),{settings:e,updateUserSettings:t}=xi(),[n,i]=Pe("Tokens");function s(p){n()!==p&&(i(p),window.scrollTo(0,0))}const{query:o,data:a}=_X(),c=Cs(),l=SX(),u=xX(()=>!1),f=Te(()=>o.isFetching||c.isFetching||l.isFetching);function d(){o.refetch(),c.refetch(),l.refetch(),n()==="Activity"&&u.refetch()}const h=[{icon:"i-tabler:arrows-left-right",label:"Swap",onClick:()=>{r(Qe.SWAP)}},{icon:"i-tabler:arrow-up-right",label:"Send",onClick:()=>{r(Qe.SEND)}},{icon:"i-tabler:arrow-down-left",label:"Receive",onClick:()=>{r(Qe.RECEIVE)}},{icon:"i-tabler:credit-card",label:"Buy",onClick:()=>{window.open(Ss.ONBOARD,"_blank")}}];async function g(){await t({type:"setShowBalances",showBalances:!e.showBalances})}return(()=>{var p=lMe(),m=p.firstChild,y=m.firstChild,v=y.firstChild,w=v.nextSibling,_=w.firstChild,x=_.firstChild,E=x.nextSibling,S=E.nextSibling,T=_.nextSibling,C=T.firstChild,P=C.firstChild,V=C.nextSibling,L=V.firstChild,D=y.nextSibling,b=m.nextSibling,I=b.firstChild;return Z(v,A(Kt,{get children(){return[A(Re,{get when(){return c.isLoading&&o.isLoading},get children(){return sMe()}}),A(Re,{get when(){return e.showBalances},get children(){var B=aMe();return Z(B,A(Ia,{get children(){return A(Hr,{get value(){return(c.data?.totalValue??0)+a.totalValue},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2},showZero:!0})}}),null),Z(B,A(Oe,{get when(){return c.isFetching||o.isFetching},get children(){return oMe()}}),null),B}}),A(Re,{when:!0,children:Z7})]}})),_.$$click=()=>r(Qe.PNL),Z(_,A(Kt,{get children(){return[A(Re,{get when(){return l.isLoading},get children(){return cMe()}}),A(Re,{get when(){return e.showBalances&&l.data},children:B=>A(rk,{get value(){return B()["1d"].pnlTotal??0},prefix:"$"})}),A(Re,{when:!0,children:Z7})]}}),S),C.$$click=g,V.$$click=()=>d(),Z(D,A(pt,{each:h,children:({label:B,icon:F,onClick:z})=>(()=>{var G=uMe(),Q=G.firstChild,X=Q.firstChild,O=Q.nextSibling;return gl(G,"click",z,!0),Z(O,B),Ge(()=>tn(X,gr(F,"size-5.5 text-primary-200"))),G})()})),Z(m,A(Oe,{get when(){return a.airdrops.length>0},get children(){return A(iDe,{get airdrops(){return a.airdrops}})}}),null),Z(I,A(pt,{each:["Tokens","DeFi","NFTs","Activity"],children:B=>(()=>{var F=fMe();return F.$$click=()=>s(B),Z(F,B),Ge(z=>nr(F,{"border-b-2 border-b-primary-200":n()===B,"text-zinc-500 hover:text-zinc-300 border-b-2 border-b-transparent":n()!==B},z)),F})()})),Z(p,A(iMe,{get isVisible(){return n()==="Tokens"}}),null),Z(p,A(SDe,{get isVisible(){return n()==="DeFi"}}),null),Z(p,A(NDe,{get isVisible(){return n()==="NFTs"}}),null),Z(p,A(X$e,{get isVisible(){return n()==="Activity"}}),null),Ge(B=>{var F=!e.showBalances,z=!e.showBalances,G={"i-tabler:eye":e.showBalances,"i-tabler:eye-off":!e.showBalances},Q=f(),X={"animate-spin animate-direction-reverse":f()};return F!==B.e&&v.classList.toggle("text-zinc-400",B.e=F),z!==B.t&&_.classList.toggle("text-zinc-400",B.t=z),B.a=nr(P,G,B.a),Q!==B.o&&(V.disabled=B.o=Q),B.i=nr(L,X,B.i),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),p})()};At(["click"]);function Eg(r){let e=r[0],t=r[1],n=r[2];return Math.sqrt(e*e+t*t+n*n)}function PT(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function hMe(r,e,t,n){return r[0]=e,r[1]=t,r[2]=n,r}function Q7(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function e9(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function pMe(r,e,t){return r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}function gMe(r,e,t){return r[0]=e[0]/t[0],r[1]=e[1]/t[1],r[2]=e[2]/t[2],r}function jA(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r}function mMe(r,e){let t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return Math.sqrt(t*t+n*n+i*i)}function yMe(r,e){let t=e[0]-r[0],n=e[1]-r[1],i=e[2]-r[2];return t*t+n*n+i*i}function t9(r){let e=r[0],t=r[1],n=r[2];return e*e+t*t+n*n}function vMe(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function bMe(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function $T(r,e){let t=e[0],n=e[1],i=e[2],s=t*t+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r}function jX(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function r9(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return r[0]=i*c-s*a,r[1]=s*o-n*c,r[2]=n*a-i*o,r}function wMe(r,e,t,n){let i=e[0],s=e[1],o=e[2];return r[0]=i+n*(t[0]-i),r[1]=s+n*(t[1]-s),r[2]=o+n*(t[2]-o),r}function xMe(r,e,t,n,i){const s=Math.exp(-n*i);let o=e[0],a=e[1],c=e[2];return r[0]=t[0]+(o-t[0])*s,r[1]=t[1]+(a-t[1])*s,r[2]=t[2]+(c-t[2])*s,r}function _Me(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s+t[12])/o,r[1]=(t[1]*n+t[5]*i+t[9]*s+t[13])/o,r[2]=(t[2]*n+t[6]*i+t[10]*s+t[14])/o,r}function SMe(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[3]*n+t[7]*i+t[11]*s+t[15];return o=o||1,r[0]=(t[0]*n+t[4]*i+t[8]*s)/o,r[1]=(t[1]*n+t[5]*i+t[9]*s)/o,r[2]=(t[2]*n+t[6]*i+t[10]*s)/o,r}function EMe(r,e,t){let n=e[0],i=e[1],s=e[2];return r[0]=n*t[0]+i*t[3]+s*t[6],r[1]=n*t[1]+i*t[4]+s*t[7],r[2]=n*t[2]+i*t[5]+s*t[8],r}function AMe(r,e,t){let n=e[0],i=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=a*s-c*i,f=c*n-o*s,d=o*i-a*n,h=a*d-c*f,g=c*u-o*d,p=o*f-a*u,m=l*2;return u*=m,f*=m,d*=m,h*=2,g*=2,p*=2,r[0]=n+u+h,r[1]=i+f+g,r[2]=s+d+p,r}const IMe=function(){const r=[0,0,0],e=[0,0,0];return function(t,n){PT(r,t),PT(e,n),$T(r,r),$T(e,e);let i=jX(r,e);return i>1?0:i<-1?Math.PI:Math.acos(i)}}();function CMe(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}class Ca extends Array{constructor(e=0,t=e,n=e){return super(e,t,n),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,n=e){return e.length?this.copy(e):(hMe(this,e,t,n),this)}copy(e){return PT(this,e),this}add(e,t){return t?Q7(this,e,t):Q7(this,this,e),this}sub(e,t){return t?e9(this,e,t):e9(this,this,e),this}multiply(e){return e.length?pMe(this,this,e):jA(this,this,e),this}divide(e){return e.length?gMe(this,this,e):jA(this,this,1/e),this}inverse(e=this){return bMe(this,e),this}len(){return Eg(this)}distance(e){return e?mMe(this,e):Eg(this)}squaredLen(){return t9(this)}squaredDistance(e){return e?yMe(this,e):t9(this)}negate(e=this){return vMe(this,e),this}cross(e,t){return t?r9(this,e,t):r9(this,this,e),this}scale(e){return jA(this,this,e),this}normalize(){return $T(this,this),this}dot(e){return jX(this,e)}equals(e){return CMe(this,e)}applyMatrix3(e){return EMe(this,this,e),this}applyMatrix4(e){return _Me(this,this,e),this}scaleRotateMatrix4(e){return SMe(this,this,e),this}applyQuaternion(e){return AMe(this,this,e),this}angle(e){return IMe(this,e)}lerp(e,t){return wMe(this,this,e,t),this}smoothLerp(e,t,n){return xMe(this,this,e,t,n),this}clone(){return new Ca(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],n=this[1],i=this[2];return this[0]=e[0]*t+e[4]*n+e[8]*i,this[1]=e[1]*t+e[5]*n+e[9]*i,this[2]=e[2]*t+e[6]*n+e[10]*i,this.normalize()}}const n9=new Ca;let TMe=1,RMe=1,i9=!1;class kMe{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=TMe++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let n in t)this.addAttribute(n,t[n])}addAttribute(e,t){if(this.attributes[e]=t,t.id=RMe++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:n,type:i})=>{if(!this.attributes[n]){console.warn(`active attribute ${n} not being supplied`);return}const s=this.attributes[n];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let o=1;i===35674&&(o=2),i===35675&&(o=3),i===35676&&(o=4);const a=s.size/o,c=o===1?0:o*o*4,l=o===1?0:o*4;for(let u=0;u<o;u++)this.gl.vertexAttribPointer(t+u,a,s.type,s.normalized,s.stride+c,s.offset+u*l),this.gl.enableVertexAttribArray(t+u),this.gl.renderer.vertexAttribDivisor(t+u,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((i,{name:s})=>{const o=this.attributes[s];o.needsUpdate&&this.updateAttribute(o)});let n=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(n=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*n):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!i9)return console.warn("No position buffer data found to compute bounds"),i9=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||(this.bounds={min:new Ca,max:new Ca,center:new Ca,scale:new Ca,radius:1/0});const i=this.bounds.min,s=this.bounds.max,o=this.bounds.center,a=this.bounds.scale;i.set(1/0),s.set(-1/0);for(let c=0,l=t.length;c<l;c+=n){const u=t[c],f=t[c+1],d=t[c+2];i.x=Math.min(u,i.x),i.y=Math.min(f,i.y),i.z=Math.min(d,i.z),s.x=Math.max(u,s.x),s.y=Math.max(f,s.y),s.z=Math.max(d,s.z)}a.sub(s,i),o.add(i,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,n=e.size;this.bounds||this.computeBoundingBox(e);let i=0;for(let s=0,o=t.length;s<o;s+=n)n9.fromArray(t,s),i=Math.max(i,this.bounds.center.squaredDistance(n9));this.bounds.radius=Math.sqrt(i)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let OMe=1;const s9={};class PMe{constructor(e,{vertex:t,fragment:n,uniforms:i={},transparent:s=!1,cullFace:o=e.BACK,frontFace:a=e.CCW,depthTest:c=!0,depthWrite:l=!0,depthFunc:u=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=i,this.id=OMe++,t||console.warn("vertex shader not supplied"),n||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=o,this.frontFace=a,this.depthTest=c,this.depthWrite=l,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:n})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${o9(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${o9(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){let a=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(a,this.gl.getUniformLocation(this.program,a.name));const c=a.name.match(/(\w+)/g);a.uniformName=c[0],a.nameComponents=c.slice(1)}this.attributeLocations=new Map;const i=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const a=this.gl.getActiveAttrib(this.program,o),c=this.gl.getAttribLocation(this.program,a.name);c!==-1&&(i[c]=a.name,this.attributeLocations.set(a,c))}this.attributeOrder=i.join("")}setBlendFunc(e,t,n,i){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=n,this.blendFunc.dstAlpha=i,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,n){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=n}setStencilOp(e,t,n){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=n}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((i,s)=>{let o=this.uniforms[s.uniformName];for(const a of s.nameComponents){if(!o)break;if(a in o)o=o[a];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return a9(`Active uniform ${s.name} has not been supplied`);if(o&&o.value===void 0)return a9(`${s.name} uniform is missing a value parameter`);if(o.value.texture)return t=t+1,o.value.update(t),VA(this.gl,s.type,i,t);if(o.value.length&&o.value[0].texture){const a=[];return o.value.forEach(c=>{t=t+1,c.update(t),a.push(t)}),VA(this.gl,s.type,i,a)}VA(this.gl,s.type,i,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function VA(r,e,t,n){n=n.length?$Me(n):n;const i=r.renderer.state.uniformLocations.get(t);if(n.length)if(i===void 0||i.length!==n.length)r.renderer.state.uniformLocations.set(t,n.slice(0));else{if(DMe(i,n))return;i.set?i.set(n):MMe(i,n),r.renderer.state.uniformLocations.set(t,i)}else{if(i===n)return;r.renderer.state.uniformLocations.set(t,n)}switch(e){case 5126:return n.length?r.uniform1fv(t,n):r.uniform1f(t,n);case 35664:return r.uniform2fv(t,n);case 35665:return r.uniform3fv(t,n);case 35666:return r.uniform4fv(t,n);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return n.length?r.uniform1iv(t,n):r.uniform1i(t,n);case 35671:case 35667:return r.uniform2iv(t,n);case 35672:case 35668:return r.uniform3iv(t,n);case 35673:case 35669:return r.uniform4iv(t,n);case 35674:return r.uniformMatrix2fv(t,!1,n);case 35675:return r.uniformMatrix3fv(t,!1,n);case 35676:return r.uniformMatrix4fv(t,!1,n)}}function o9(r){let e=r.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function $Me(r){const e=r.length,t=r[0].length;if(t===void 0)return r;const n=e*t;let i=s9[n];i||(s9[n]=i=new Float32Array(n));for(let s=0;s<e;s++)i.set(r[s],s*t);return i}function DMe(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function MMe(r,e){for(let t=0,n=r.length;t<n;t++)r[t]=e[t]}let KA=0;function a9(r){KA>100||(console.warn(r),KA++,KA>100&&console.warn("More than 100 program warnings - stopping logs."))}const HA=new Ca;let BMe=1;class NMe{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:n=150,dpr:i=1,alpha:s=!1,depth:o=!0,stencil:a=!1,antialias:c=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:u=!1,powerPreference:f="default",autoClear:d=!0,webgl:h=2}={}){const g={alpha:s,depth:o,stencil:a,antialias:c,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f};this.dpr=i,this.alpha=s,this.color=!0,this.depth=o,this.stencil=a,this.premultipliedAlpha=l,this.autoClear=d,this.id=BMe++,h===2&&(this.gl=e.getContext("webgl2",g)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",g)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,n),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,n=0,i=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=n,this.state.viewport.y=i,this.gl.viewport(n,i,e,t))}setScissor(e,t,n=0,i=0){this.gl.scissor(n,i,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,n,i){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===n&&this.state.blendFunc.dstAlpha===i||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=n,this.state.blendFunc.dstAlpha=i,n!==void 0?this.gl.blendFuncSeparate(e,t,n,i):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,n){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===n||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=n||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,n||0))}setStencilOp(e,t,n){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===n||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=n,this.gl.stencilOp(e,t,n))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,n){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][n].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:n,sort:i}){let s=[];if(t&&n&&t.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(n&&o.frustumCulled&&t&&!t.frustumIntersectsMesh(o)||s.push(o))}),i){const o=[],a=[],c=[];s.forEach(l=>{l.program.transparent?l.program.depthTest?a.push(l):c.push(l):o.push(l),l.zDepth=0,!(l.renderOrder!==0||!l.program.depthTest||!t)&&(l.worldMatrix.getTranslation(HA),HA.applyMatrix4(t.projectionViewMatrix),l.zDepth=HA.z)}),o.sort(this.sortOpaque),a.sort(this.sortTransparent),c.sort(this.sortUI),s=o.concat(a,c)}return s}render({scene:e,camera:t,target:n=null,update:i=!0,sort:s=!0,frustumCull:o=!0,clear:a}){n===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(n),this.setViewport(n.width,n.height)),(a||this.autoClear&&a!==!1)&&(this.depth&&(!n||n.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!n||n.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:o,sort:s}).forEach(l=>{l.draw({camera:t})})}}function LMe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function FMe(r,e,t,n,i){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r}function UMe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t*t+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),r[0]=t*o,r[1]=n*o,r[2]=i*o,r[3]=s*o,r}function zMe(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function qMe(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function jMe(r,e,t){t=t*.5;let n=Math.sin(t);return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=Math.cos(t),r}function c9(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return r[0]=n*u+o*a+i*l-s*c,r[1]=i*u+o*c+s*a-n*l,r[2]=s*u+o*l+n*c-i*a,r[3]=o*u-n*a-i*c-s*l,r}function VMe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c+o*a,r[1]=i*c+s*a,r[2]=s*c-i*a,r[3]=o*c-n*a,r}function KMe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c-s*a,r[1]=i*c+o*a,r[2]=s*c+n*a,r[3]=o*c-i*a,r}function HMe(r,e,t){t*=.5;let n=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);return r[0]=n*c+i*a,r[1]=i*c-n*a,r[2]=s*c+o*a,r[3]=o*c-s*a,r}function WMe(r,e,t,n){let i=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],f=t[3],d,h,g,p,m;return h=i*c+s*l+o*u+a*f,h<0&&(h=-h,c=-c,l=-l,u=-u,f=-f),1-h>1e-6?(d=Math.acos(h),g=Math.sin(d),p=Math.sin((1-n)*d)/g,m=Math.sin(n*d)/g):(p=1-n,m=n),r[0]=p*i+m*c,r[1]=p*s+m*l,r[2]=p*o+m*u,r[3]=p*a+m*f,r}function GMe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t*t+n*n+i*i+s*s,a=o?1/o:0;return r[0]=-t*a,r[1]=-n*a,r[2]=-i*a,r[3]=s*a,r}function YMe(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function JMe(r,e){let t=e[0]+e[4]+e[8],n;if(t>0)n=Math.sqrt(t+1),r[3]=.5*n,n=.5/n,r[0]=(e[5]-e[7])*n,r[1]=(e[6]-e[2])*n,r[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);let s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),r[i]=.5*n,n=.5/n,r[3]=(e[s*3+o]-e[o*3+s])*n,r[s]=(e[s*3+i]+e[i*3+s])*n,r[o]=(e[o*3+i]+e[i*3+o])*n}return r}function XMe(r,e,t="YXZ"){let n=Math.sin(e[0]*.5),i=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),a=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return t==="XYZ"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c-n*s*a):t==="YXZ"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c+n*s*a):t==="ZXY"?(r[0]=n*o*c-i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c-n*s*a):t==="ZYX"?(r[0]=n*o*c-i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c+n*s*a):t==="YZX"?(r[0]=n*o*c+i*s*a,r[1]=i*s*c+n*o*a,r[2]=i*o*a-n*s*c,r[3]=i*o*c-n*s*a):t==="XZY"&&(r[0]=n*o*c-i*s*a,r[1]=i*s*c-n*o*a,r[2]=i*o*a+n*s*c,r[3]=i*o*c+n*s*a),r}const ZMe=LMe,QMe=FMe,eBe=zMe,tBe=UMe;class rBe extends Array{constructor(e=0,t=0,n=0,i=1){super(e,t,n,i),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(o,a){const c=Reflect.set(...arguments);return c&&s.includes(a)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return qMe(this._target),this.onChange(),this}set(e,t,n,i){return e.length?this.copy(e):(QMe(this._target,e,t,n,i),this.onChange(),this)}rotateX(e){return VMe(this._target,this._target,e),this.onChange(),this}rotateY(e){return KMe(this._target,this._target,e),this.onChange(),this}rotateZ(e){return HMe(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return GMe(this._target,e),this.onChange(),this}conjugate(e=this._target){return YMe(this._target,e),this.onChange(),this}copy(e){return ZMe(this._target,e),this.onChange(),this}normalize(e=this._target){return tBe(this._target,e),this.onChange(),this}multiply(e,t){return t?c9(this._target,e,t):c9(this._target,this._target,e),this.onChange(),this}dot(e){return eBe(this._target,e)}fromMatrix3(e){return JMe(this._target,e),this.onChange(),this}fromEuler(e,t){return XMe(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return jMe(this._target,e,t),this.onChange(),this}slerp(e,t){return WMe(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const nBe=1e-6;function iBe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function sBe(r,e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=s,r[5]=o,r[6]=a,r[7]=c,r[8]=l,r[9]=u,r[10]=f,r[11]=d,r[12]=h,r[13]=g,r[14]=p,r[15]=m,r}function oBe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function aBe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],g=e[12],p=e[13],m=e[14],y=e[15],v=t*a-n*o,w=t*c-i*o,_=t*l-s*o,x=n*c-i*a,E=n*l-s*a,S=i*l-s*c,T=u*p-f*g,C=u*m-d*g,P=u*y-h*g,V=f*m-d*p,L=f*y-h*p,D=d*y-h*m,b=v*D-w*L+_*V+x*P-E*C+S*T;return b?(b=1/b,r[0]=(a*D-c*L+l*V)*b,r[1]=(i*L-n*D-s*V)*b,r[2]=(p*S-m*E+y*x)*b,r[3]=(d*E-f*S-h*x)*b,r[4]=(c*P-o*D-l*C)*b,r[5]=(t*D-i*P+s*C)*b,r[6]=(m*_-g*S-y*w)*b,r[7]=(u*S-d*_+h*w)*b,r[8]=(o*L-a*P+l*T)*b,r[9]=(n*P-t*L-s*T)*b,r[10]=(g*E-p*_+y*v)*b,r[11]=(f*_-u*E-h*v)*b,r[12]=(a*C-o*V-c*T)*b,r[13]=(t*V-n*C+i*T)*b,r[14]=(p*w-g*x-m*v)*b,r[15]=(u*x-f*w+d*v)*b,r):null}function VX(r){let e=r[0],t=r[1],n=r[2],i=r[3],s=r[4],o=r[5],a=r[6],c=r[7],l=r[8],u=r[9],f=r[10],d=r[11],h=r[12],g=r[13],p=r[14],m=r[15],y=e*o-t*s,v=e*a-n*s,w=e*c-i*s,_=t*a-n*o,x=t*c-i*o,E=n*c-i*a,S=l*g-u*h,T=l*p-f*h,C=l*m-d*h,P=u*p-f*g,V=u*m-d*g,L=f*m-d*p;return y*L-v*V+w*P+_*C-x*T+E*S}function l9(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=e[9],h=e[10],g=e[11],p=e[12],m=e[13],y=e[14],v=e[15],w=t[0],_=t[1],x=t[2],E=t[3];return r[0]=w*n+_*a+x*f+E*p,r[1]=w*i+_*c+x*d+E*m,r[2]=w*s+_*l+x*h+E*y,r[3]=w*o+_*u+x*g+E*v,w=t[4],_=t[5],x=t[6],E=t[7],r[4]=w*n+_*a+x*f+E*p,r[5]=w*i+_*c+x*d+E*m,r[6]=w*s+_*l+x*h+E*y,r[7]=w*o+_*u+x*g+E*v,w=t[8],_=t[9],x=t[10],E=t[11],r[8]=w*n+_*a+x*f+E*p,r[9]=w*i+_*c+x*d+E*m,r[10]=w*s+_*l+x*h+E*y,r[11]=w*o+_*u+x*g+E*v,w=t[12],_=t[13],x=t[14],E=t[15],r[12]=w*n+_*a+x*f+E*p,r[13]=w*i+_*c+x*d+E*m,r[14]=w*s+_*l+x*h+E*y,r[15]=w*o+_*u+x*g+E*v,r}function cBe(r,e,t){let n=t[0],i=t[1],s=t[2],o,a,c,l,u,f,d,h,g,p,m,y;return e===r?(r[12]=e[0]*n+e[4]*i+e[8]*s+e[12],r[13]=e[1]*n+e[5]*i+e[9]*s+e[13],r[14]=e[2]*n+e[6]*i+e[10]*s+e[14],r[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],c=e[2],l=e[3],u=e[4],f=e[5],d=e[6],h=e[7],g=e[8],p=e[9],m=e[10],y=e[11],r[0]=o,r[1]=a,r[2]=c,r[3]=l,r[4]=u,r[5]=f,r[6]=d,r[7]=h,r[8]=g,r[9]=p,r[10]=m,r[11]=y,r[12]=o*n+u*i+g*s+e[12],r[13]=a*n+f*i+p*s+e[13],r[14]=c*n+d*i+m*s+e[14],r[15]=l*n+h*i+y*s+e[15]),r}function lBe(r,e,t){let n=t[0],i=t[1],s=t[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*i,r[5]=e[5]*i,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*s,r[9]=e[9]*s,r[10]=e[10]*s,r[11]=e[11]*s,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function uBe(r,e,t,n){let i=n[0],s=n[1],o=n[2],a=Math.hypot(i,s,o),c,l,u,f,d,h,g,p,m,y,v,w,_,x,E,S,T,C,P,V,L,D,b,I;return Math.abs(a)<nBe?null:(a=1/a,i*=a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),u=1-l,f=e[0],d=e[1],h=e[2],g=e[3],p=e[4],m=e[5],y=e[6],v=e[7],w=e[8],_=e[9],x=e[10],E=e[11],S=i*i*u+l,T=s*i*u+o*c,C=o*i*u-s*c,P=i*s*u-o*c,V=s*s*u+l,L=o*s*u+i*c,D=i*o*u+s*c,b=s*o*u-i*c,I=o*o*u+l,r[0]=f*S+p*T+w*C,r[1]=d*S+m*T+_*C,r[2]=h*S+y*T+x*C,r[3]=g*S+v*T+E*C,r[4]=f*P+p*V+w*L,r[5]=d*P+m*V+_*L,r[6]=h*P+y*V+x*L,r[7]=g*P+v*V+E*L,r[8]=f*D+p*b+w*I,r[9]=d*D+m*b+_*I,r[10]=h*D+y*b+x*I,r[11]=g*D+v*b+E*I,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function fBe(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function KX(r,e){let t=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return r[0]=Math.hypot(t,n,i),r[1]=Math.hypot(s,o,a),r[2]=Math.hypot(c,l,u),r}function dBe(r){let e=r[0],t=r[1],n=r[2],i=r[4],s=r[5],o=r[6],a=r[8],c=r[9],l=r[10];const u=e*e+t*t+n*n,f=i*i+s*s+o*o,d=a*a+c*c+l*l;return Math.sqrt(Math.max(u,f,d))}const HX=function(){const r=[1,1,1];return function(e,t){let n=r;KX(n,t);let i=1/n[0],s=1/n[1],o=1/n[2],a=t[0]*i,c=t[1]*s,l=t[2]*o,u=t[4]*i,f=t[5]*s,d=t[6]*o,h=t[8]*i,g=t[9]*s,p=t[10]*o,m=a+f+p,y=0;return m>0?(y=Math.sqrt(m+1)*2,e[3]=.25*y,e[0]=(d-g)/y,e[1]=(h-l)/y,e[2]=(c-u)/y):a>f&&a>p?(y=Math.sqrt(1+a-f-p)*2,e[3]=(d-g)/y,e[0]=.25*y,e[1]=(c+u)/y,e[2]=(h+l)/y):f>p?(y=Math.sqrt(1+f-a-p)*2,e[3]=(h-l)/y,e[0]=(c+u)/y,e[1]=.25*y,e[2]=(d+g)/y):(y=Math.sqrt(1+p-a-f)*2,e[3]=(c-u)/y,e[0]=(h+l)/y,e[1]=(d+g)/y,e[2]=.25*y),e}}();function hBe(r,e,t,n){let i=Eg([r[0],r[1],r[2]]);const s=Eg([r[4],r[5],r[6]]),o=Eg([r[8],r[9],r[10]]);VX(r)<0&&(i=-i),t[0]=r[12],t[1]=r[13],t[2]=r[14];const c=r.slice(),l=1/i,u=1/s,f=1/o;c[0]*=l,c[1]*=l,c[2]*=l,c[4]*=u,c[5]*=u,c[6]*=u,c[8]*=f,c[9]*=f,c[10]*=f,HX(e,c),n[0]=i,n[1]=s,n[2]=o}function pBe(r,e,t,n){const i=r,s=e[0],o=e[1],a=e[2],c=e[3],l=s+s,u=o+o,f=a+a,d=s*l,h=s*u,g=s*f,p=o*u,m=o*f,y=a*f,v=c*l,w=c*u,_=c*f,x=n[0],E=n[1],S=n[2];return i[0]=(1-(p+y))*x,i[1]=(h+_)*x,i[2]=(g-w)*x,i[3]=0,i[4]=(h-_)*E,i[5]=(1-(d+y))*E,i[6]=(m+v)*E,i[7]=0,i[8]=(g+w)*S,i[9]=(m-v)*S,i[10]=(1-(d+p))*S,i[11]=0,i[12]=t[0],i[13]=t[1],i[14]=t[2],i[15]=1,i}function gBe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t+t,a=n+n,c=i+i,l=t*o,u=n*o,f=n*a,d=i*o,h=i*a,g=i*c,p=s*o,m=s*a,y=s*c;return r[0]=1-f-g,r[1]=u+y,r[2]=d-m,r[3]=0,r[4]=u-y,r[5]=1-l-g,r[6]=h+p,r[7]=0,r[8]=d+m,r[9]=h-p,r[10]=1-l-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mBe(r,e,t,n,i){let s=1/Math.tan(e/2),o=1/(n-i);return r[0]=s/t,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(i+n)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*i*n*o,r[15]=0,r}function yBe(r,e,t,n,i,s,o){let a=1/(e-t),c=1/(n-i),l=1/(s-o);return r[0]=-2*a,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*a,r[13]=(i+n)*c,r[14]=(o+s)*l,r[15]=1,r}function vBe(r,e,t,n){let i=e[0],s=e[1],o=e[2],a=n[0],c=n[1],l=n[2],u=i-t[0],f=s-t[1],d=o-t[2],h=u*u+f*f+d*d;h===0?d=1:(h=1/Math.sqrt(h),u*=h,f*=h,d*=h);let g=c*d-l*f,p=l*u-a*d,m=a*f-c*u;return h=g*g+p*p+m*m,h===0&&(l?a+=1e-6:c?l+=1e-6:c+=1e-6,g=c*d-l*f,p=l*u-a*d,m=a*f-c*u,h=g*g+p*p+m*m),h=1/Math.sqrt(h),g*=h,p*=h,m*=h,r[0]=g,r[1]=p,r[2]=m,r[3]=0,r[4]=f*m-d*p,r[5]=d*g-u*m,r[6]=u*p-f*g,r[7]=0,r[8]=u,r[9]=f,r[10]=d,r[11]=0,r[12]=i,r[13]=s,r[14]=o,r[15]=1,r}function u9(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r}function f9(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r}function bBe(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r}class r1 extends Array{constructor(e=1,t=0,n=0,i=0,s=0,o=1,a=0,c=0,l=0,u=0,f=1,d=0,h=0,g=0,p=0,m=1){return super(e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m){return e.length?this.copy(e):(sBe(this,e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m),this)}translate(e,t=this){return cBe(this,t,e),this}rotate(e,t,n=this){return uBe(this,n,e,t),this}scale(e,t=this){return lBe(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?u9(this,e,t):u9(this,this,e),this}sub(e,t){return t?f9(this,e,t):f9(this,this,e),this}multiply(e,t){return e.length?t?l9(this,e,t):l9(this,this,e):bBe(this,this,e),this}identity(){return oBe(this),this}copy(e){return iBe(this,e),this}fromPerspective({fov:e,aspect:t,near:n,far:i}={}){return mBe(this,e,t,n,i),this}fromOrthogonal({left:e,right:t,bottom:n,top:i,near:s,far:o}){return yBe(this,e,t,n,i,s,o),this}fromQuaternion(e){return gBe(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return aBe(this,e),this}compose(e,t,n){return pBe(this,e,t,n),this}decompose(e,t,n){return hBe(this,e,t,n),this}getRotation(e){return HX(e,this),this}getTranslation(e){return fBe(e,this),this}getScaling(e){return KX(e,this),this}getMaxScaleOnAxis(){return dBe(this)}lookAt(e,t,n){return vBe(this,e,t,n),this}determinant(){return VX(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function wBe(r,e,t="YXZ"){return t==="XYZ"?(r[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(r[0]=Math.atan2(-e[9],e[10]),r[2]=Math.atan2(-e[4],e[0])):(r[0]=Math.atan2(e[6],e[5]),r[2]=0)):t==="YXZ"?(r[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(r[1]=Math.atan2(e[8],e[10]),r[2]=Math.atan2(e[1],e[5])):(r[1]=Math.atan2(-e[2],e[0]),r[2]=0)):t==="ZXY"?(r[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(r[1]=Math.atan2(-e[2],e[10]),r[2]=Math.atan2(-e[4],e[5])):(r[1]=0,r[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(r[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(r[0]=Math.atan2(e[6],e[10]),r[2]=Math.atan2(e[1],e[0])):(r[0]=0,r[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(r[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(r[0]=Math.atan2(-e[9],e[5]),r[1]=Math.atan2(-e[2],e[0])):(r[0]=0,r[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(r[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(r[0]=Math.atan2(e[6],e[5]),r[1]=Math.atan2(e[8],e[0])):(r[0]=Math.atan2(-e[9],e[10]),r[1]=0)),r}const d9=new r1;class xBe extends Array{constructor(e=0,t=e,n=e,i="YXZ"){super(e,t,n),this.order=i,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(o,a){const c=Reflect.set(...arguments);return c&&s.includes(a)&&o.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,n=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=n,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return wBe(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,n){return d9.fromQuaternion(e),this._target.fromRotationMatrix(d9,t),n||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class _Be{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new r1,this.worldMatrix=new r1,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new Ca,this.quaternion=new rBe,this.scale=new Ca(1),this.rotation=new xBe,this.up=new Ca(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,n=this.children.length;t<n;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function SBe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function EBe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=t+t,a=n+n,c=i+i,l=t*o,u=n*o,f=n*a,d=i*o,h=i*a,g=i*c,p=s*o,m=s*a,y=s*c;return r[0]=1-f-g,r[3]=u-y,r[6]=d+m,r[1]=u+y,r[4]=1-l-g,r[7]=h-p,r[2]=d-m,r[5]=h+p,r[8]=1-l-f,r}function ABe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function IBe(r,e,t,n,i,s,o,a,c,l){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=s,r[5]=o,r[6]=a,r[7]=c,r[8]=l,r}function CBe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function TBe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=u*o-a*l,d=-u*s+a*c,h=l*s-o*c,g=t*f+n*d+i*h;return g?(g=1/g,r[0]=f*g,r[1]=(-u*n+i*l)*g,r[2]=(a*n-i*o)*g,r[3]=d*g,r[4]=(u*t-i*c)*g,r[5]=(-a*t+i*s)*g,r[6]=h*g,r[7]=(-l*t+n*c)*g,r[8]=(o*t-n*s)*g,r):null}function h9(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=t[0],h=t[1],g=t[2],p=t[3],m=t[4],y=t[5],v=t[6],w=t[7],_=t[8];return r[0]=d*n+h*o+g*l,r[1]=d*i+h*a+g*u,r[2]=d*s+h*c+g*f,r[3]=p*n+m*o+y*l,r[4]=p*i+m*a+y*u,r[5]=p*s+m*c+y*f,r[6]=v*n+w*o+_*l,r[7]=v*i+w*a+_*u,r[8]=v*s+w*c+_*f,r}function RBe(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=t[0],h=t[1];return r[0]=n,r[1]=i,r[2]=s,r[3]=o,r[4]=a,r[5]=c,r[6]=d*n+h*o+l,r[7]=d*i+h*a+u,r[8]=d*s+h*c+f,r}function kBe(r,e,t){let n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=Math.sin(t),h=Math.cos(t);return r[0]=h*n+d*o,r[1]=h*i+d*a,r[2]=h*s+d*c,r[3]=h*o-d*n,r[4]=h*a-d*i,r[5]=h*c-d*s,r[6]=l,r[7]=u,r[8]=f,r}function OBe(r,e,t){let n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function PBe(r,e){let t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],g=e[12],p=e[13],m=e[14],y=e[15],v=t*a-n*o,w=t*c-i*o,_=t*l-s*o,x=n*c-i*a,E=n*l-s*a,S=i*l-s*c,T=u*p-f*g,C=u*m-d*g,P=u*y-h*g,V=f*m-d*p,L=f*y-h*p,D=d*y-h*m,b=v*D-w*L+_*V+x*P-E*C+S*T;return b?(b=1/b,r[0]=(a*D-c*L+l*V)*b,r[1]=(c*P-o*D-l*C)*b,r[2]=(o*L-a*P+l*T)*b,r[3]=(i*L-n*D-s*V)*b,r[4]=(t*D-i*P+s*C)*b,r[5]=(n*P-t*L-s*T)*b,r[6]=(p*S-m*E+y*x)*b,r[7]=(m*_-g*S-y*w)*b,r[8]=(g*E-p*_+y*v)*b,r):null}class $Be extends Array{constructor(e=1,t=0,n=0,i=0,s=1,o=0,a=0,c=0,l=1){return super(e,t,n,i,s,o,a,c,l),this}set(e,t,n,i,s,o,a,c,l){return e.length?this.copy(e):(IBe(this,e,t,n,i,s,o,a,c,l),this)}translate(e,t=this){return RBe(this,t,e),this}rotate(e,t=this){return kBe(this,t,e),this}scale(e,t=this){return OBe(this,t,e),this}multiply(e,t){return t?h9(this,e,t):h9(this,this,e),this}identity(){return CBe(this),this}copy(e){return ABe(this,e),this}fromMatrix4(e){return SBe(this,e),this}fromQuaternion(e){return EBe(this,e),this}fromBasis(e,t,n){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2]),this}inverse(e=this){return TBe(this,e),this}getNormalMatrix(e){return PBe(this,e),this}}let DBe=0;class MBe extends _Be{constructor(e,{geometry:t,program:n,mode:i=e.TRIANGLES,frustumCulled:s=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=DBe++,this.geometry=t,this.program=n,this.mode=i,this.frustumCulled=s,this.renderOrder=o,this.modelViewMatrix=new r1,this.normalMatrix=new $Be,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(n=>n&&n({mesh:this,camera:e}))}}class BBe extends kMe{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}var WX=le("<div>");const NBe="#ffffff",p9=r=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[1,1,1]},LBe=(r,e,t)=>{switch(r){case"top-left":return{anchor:[0,-.2*t],dir:[0,1]};case"top-right":return{anchor:[e,-.2*t],dir:[0,1]};case"left":return{anchor:[-.2*e,.5*t],dir:[1,0]};case"right":return{anchor:[(1+.2)*e,.5*t],dir:[-1,0]};case"bottom-left":return{anchor:[0,(1+.2)*t],dir:[0,-1]};case"bottom-center":return{anchor:[.5*e,(1+.2)*t],dir:[0,-1]};case"bottom-right":return{anchor:[e,(1+.2)*t],dir:[0,-1]};default:return{anchor:[.5*e,-.2*t],dir:[0,1]}}},FBe=r=>{const e=at({raysOrigin:"top-center",raysColor:NBe,raysSpeed:1,lightSpread:1,rayLength:2,pulsating:!1,fadeDistance:1,saturation:1,followMouse:!0,mouseInfluence:.1,noiseAmount:0,distortion:0,class:""},r);let t,n=null,i=null,s=null,o={x:.5,y:.5},a={x:.5,y:.5};const[c,l]=Pe(!1);return mr(()=>{if(!t)return;const u=new IntersectionObserver(f=>l(f[0].isIntersecting),{threshold:.1});u.observe(t),mt(()=>u.disconnect())}),ot(()=>{if(e.followMouse){const u=f=>{if(!t)return;const d=t.getBoundingClientRect();o.x=(f.clientX-d.left)/d.width,o.y=(f.clientY-d.top)/d.height};window.addEventListener("mousemove",u),mt(()=>window.removeEventListener("mousemove",u))}}),ot(()=>{if(!c()||!t)return;const u=t;i=new NMe({dpr:Math.min(window.devicePixelRatio,2),alpha:!0});const f=i.gl;f.canvas.style.width="100%",f.canvas.style.height="100%",u.appendChild(f.canvas);const d=`
      attribute vec2 position;
      varying vec2 vUv;
      void main() {
        vUv = position * 0.5 + 0.5;
        gl_Position = vec4(position, 0.0, 1.0);
      }`,h=`precision highp float;

      uniform float iTime;
      uniform vec2  iResolution;

      uniform vec2  rayPos;
      uniform vec2  rayDir;
      uniform vec3  raysColor;
      uniform float raysSpeed;
      uniform float lightSpread;
      uniform float rayLength;
      uniform float pulsating;
      uniform float fadeDistance;
      uniform float saturation;
      uniform vec2  mousePos;
      uniform float mouseInfluence;
      uniform float noiseAmount;
      uniform float distortion;

      varying vec2 vUv;

      float noise(vec2 st) {
        return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
      }

      float rayStrength(vec2 raySource, vec2 rayRefDirection, vec2 coord,
                        float seedA, float seedB, float speed) {
        vec2 sourceToCoord = coord - raySource;
        vec2 dirNorm = normalize(sourceToCoord);
        float cosAngle = dot(dirNorm, rayRefDirection);

        float distortedAngle = cosAngle + distortion * sin(iTime * 2.0 + length(sourceToCoord) * 0.01) * 0.2;
        
        float spreadFactor = pow(max(distortedAngle, 0.0), 1.0 / max(lightSpread, 0.001));

        float distance = length(sourceToCoord);
        float maxDistance = iResolution.x * rayLength;
        float lengthFalloff = clamp((maxDistance - distance) / maxDistance, 0.0, 1.0);
        
        float fadeFalloff = clamp((iResolution.x * fadeDistance - distance) / (iResolution.x * fadeDistance), 0.5, 1.0);
        float pulse = pulsating > 0.5 ? (0.8 + 0.2 * sin(iTime * speed * 3.0)) : 1.0;

        float baseStrength = clamp(
          (0.45 + 0.15 * sin(distortedAngle * seedA + iTime * speed)) +
          (0.3 + 0.2 * cos(-distortedAngle * seedB + iTime * speed)),
          0.0, 1.0
        );

        return baseStrength * lengthFalloff * fadeFalloff * spreadFactor * pulse;
      }

      void mainImage(out vec4 fragColor, in vec2 fragCoord) {
        vec2 coord = vec2(fragCoord.x, iResolution.y - fragCoord.y);
        
        vec2 finalRayDir = rayDir;
        if (mouseInfluence > 0.0) {
          vec2 mouseScreenPos = mousePos * iResolution.xy;
          vec2 mouseDirection = normalize(mouseScreenPos - rayPos);
          finalRayDir = normalize(mix(rayDir, mouseDirection, mouseInfluence));
        }

        vec4 rays1 = vec4(1.0) *
                     rayStrength(rayPos, finalRayDir, coord, 36.2214, 21.11349,
                                 1.5 * raysSpeed);
        vec4 rays2 = vec4(1.0) *
                     rayStrength(rayPos, finalRayDir, coord, 22.3991, 18.0234,
                                 1.1 * raysSpeed);

        fragColor = rays1 * 0.5 + rays2 * 0.4;

        if (noiseAmount > 0.0) {
          float n = noise(coord * 0.01 + iTime * 0.1);
          fragColor.rgb *= (1.0 - noiseAmount + noiseAmount * n);
        }

        float brightness = 1.0 - (coord.y / iResolution.y);
        fragColor.x *= 0.1 + brightness * 0.8;
        fragColor.y *= 0.3 + brightness * 0.6;
        fragColor.z *= 0.5 + brightness * 0.5;

        if (saturation != 1.0) {
          float gray = dot(fragColor.rgb, vec3(0.299, 0.587, 0.114));
          fragColor.rgb = mix(vec3(gray), fragColor.rgb, saturation);
        }

        fragColor.rgb *= raysColor;
      }

      void main() {
        vec4 color;
        mainImage(color, gl_FragCoord.xy);
        gl_FragColor  = color;
      }`;s={iTime:{value:0},iResolution:{value:[1,1]},rayPos:{value:[0,0]},rayDir:{value:[0,1]},raysColor:{value:p9(e.raysColor)},raysSpeed:{value:e.raysSpeed},lightSpread:{value:e.lightSpread},rayLength:{value:e.rayLength},pulsating:{value:e.pulsating?1:0},fadeDistance:{value:e.fadeDistance},saturation:{value:e.saturation},mousePos:{value:[.5,.5]},mouseInfluence:{value:e.mouseInfluence},noiseAmount:{value:e.noiseAmount},distortion:{value:e.distortion}};const g=new BBe(f),p=new PMe(f,{vertex:d,fragment:h,uniforms:s}),m=new MBe(f,{geometry:g,program:p});ot(()=>s.raysColor.value=p9(e.raysColor)),ot(()=>s.raysSpeed.value=e.raysSpeed),ot(()=>s.lightSpread.value=e.lightSpread),ot(()=>s.rayLength.value=e.rayLength),ot(()=>s.pulsating.value=e.pulsating?1:0),ot(()=>s.fadeDistance.value=e.fadeDistance),ot(()=>s.saturation.value=e.saturation),ot(()=>s.mouseInfluence.value=e.mouseInfluence),ot(()=>s.noiseAmount.value=e.noiseAmount),ot(()=>s.distortion.value=e.distortion);const y=()=>{if(!u||!i)return;i.dpr=Math.min(window.devicePixelRatio,2);const{clientWidth:w,clientHeight:_}=u;i.setSize(w,_);const x=i.dpr,E=w*x,S=_*x;s.iResolution.value=[E,S];const{anchor:T,dir:C}=LBe(e.raysOrigin,E,S);s.rayPos.value=T,s.rayDir.value=C};window.addEventListener("resize",y),y();const v=w=>{if(!(!i||!s)){s.iTime.value=w*.001,e.followMouse&&e.mouseInfluence>0&&(a.x=a.x*.92+o.x*(1-.92),a.y=a.y*.92+o.y*(1-.92),s.mousePos.value=[a.x,a.y]);try{i.render({scene:m}),n=requestAnimationFrame(v)}catch(_){console.warn("WebGL rendering error:",_)}}};n=requestAnimationFrame(v),mt(()=>{if(n&&cancelAnimationFrame(n),window.removeEventListener("resize",y),i)try{const w=i.gl.canvas,_=i.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),w&&w.parentNode&&w.parentNode.removeChild(w)}catch(w){console.warn("Error during WebGL cleanup:",w)}i=null,s=null})}),(()=>{var u=WX();return cd(f=>t=f,u),Ge(()=>tn(u,gr("w-full h-full pointer-events-none z-[3] overflow-hidden relative",e.class))),u})()},GX=r=>A(hU,{get fallback(){return(()=>{var e=WX();return Ge(()=>tn(e,gr("w-full h-full pointer-events-none z-[3] overflow-hidden relative bg-linear-to-b from-primary-200/15 to-zinc-950",r.class))),e})()},get children(){return A(FBe,r)}});/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pk(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function od(r,e=""){if(!Number.isSafeInteger(r)||r<0){const t=e&&`"${e}" `;throw new Error(`${t}expected integer >= 0, got ${r}`)}}function _n(r,e,t=""){const n=pk(r),i=r?.length,s=e!==void 0;if(!n||s&&i!==e){const o=t&&`"${t}" `,a=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return r}function YX(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash must wrapped by utils.createHasher");od(r.outputLen),od(r.blockLen)}function n1(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function UBe(r,e){_n(r,void 0,"digestInto() output");const t=e.outputLen;if(r.length<t)throw new Error('"digestInto() output" expected to be of length >='+t)}function Vu(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Lh(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Za(r,e){return r<<32-e|r>>>e}function tv(r,e){return r<<e|r>>>32-e>>>0}const JX=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",zBe=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Gw(r){if(_n(r),JX)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=zBe[r[t]];return e}const qc={_0:48,_9:57,A:65,F:70,a:97,f:102};function g9(r){if(r>=qc._0&&r<=qc._9)return r-qc._0;if(r>=qc.A&&r<=qc.F)return r-(qc.A-10);if(r>=qc.a&&r<=qc.f)return r-(qc.a-10)}function i1(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(JX)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=g9(r.charCodeAt(s)),a=g9(r.charCodeAt(s+1));if(o===void 0||a===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function ia(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];_n(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function gk(r,e={}){const t=(i,s)=>r(s).update(i).digest(),n=r(void 0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>r(i),Object.assign(t,e),Object.freeze(t)}function XX(r=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(r))}const ZX=r=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,r])});function qBe(r,e,t){return r&e^~r&t}function jBe(r,e,t){return r&e^r&t^e&t}class mk{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,t,n,i){this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Lh(this.buffer)}update(e){n1(this),_n(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Lh(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){n1(this),UBe(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Vu(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)t[f]=0;n.setBigUint64(i-8,BigInt(this.length*8),s),this.process(n,0);const a=Lh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Gl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),us=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),rv=BigInt(2**32-1),m9=BigInt(32);function VBe(r,e=!1){return e?{h:Number(r&rv),l:Number(r>>m9&rv)}:{h:Number(r>>m9&rv)|0,l:Number(r&rv)|0}}function KBe(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l:a}=VBe(r[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const y9=(r,e,t)=>r>>>t,v9=(r,e,t)=>r<<32-t|e>>>t,eh=(r,e,t)=>r>>>t|e<<32-t,th=(r,e,t)=>r<<32-t|e>>>t,nv=(r,e,t)=>r<<64-t|e>>>t-32,iv=(r,e,t)=>r>>>t-32|e<<64-t;function jc(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const HBe=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),WBe=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,GBe=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),YBe=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,JBe=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),XBe=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,ZBe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yl=new Uint32Array(64);class QBe extends mk{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let f=0;f<16;f++,t+=4)Yl[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=Yl[f-15],h=Yl[f-2],g=Za(d,7)^Za(d,18)^d>>>3,p=Za(h,17)^Za(h,19)^h>>>10;Yl[f]=p+Yl[f-7]+g+Yl[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Za(a,6)^Za(a,11)^Za(a,25),h=u+d+qBe(a,c,l)+ZBe[f]+Yl[f]|0,p=(Za(n,2)^Za(n,13)^Za(n,22))+jBe(n,i,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=i,i=n,n=h+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){Vu(Yl)}destroy(){this.set(0,0,0,0,0,0,0,0),Vu(this.buffer)}}class eNe extends QBe{A=Gl[0]|0;B=Gl[1]|0;C=Gl[2]|0;D=Gl[3]|0;E=Gl[4]|0;F=Gl[5]|0;G=Gl[6]|0;H=Gl[7]|0;constructor(){super(32)}}const QX=KBe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),tNe=QX[0],rNe=QX[1],Jl=new Uint32Array(80),Xl=new Uint32Array(80);class nNe extends mk{constructor(e){super(128,e,16,!1)}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:h,Gl:g,Hh:p,Hl:m}=this;return[e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m]}set(e,t,n,i,s,o,a,c,l,u,f,d,h,g,p,m){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=h|0,this.Gl=g|0,this.Hh=p|0,this.Hl=m|0}process(e,t){for(let w=0;w<16;w++,t+=4)Jl[w]=e.getUint32(t),Xl[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const _=Jl[w-15]|0,x=Xl[w-15]|0,E=eh(_,x,1)^eh(_,x,8)^y9(_,x,7),S=th(_,x,1)^th(_,x,8)^v9(_,x,7),T=Jl[w-2]|0,C=Xl[w-2]|0,P=eh(T,C,19)^nv(T,C,61)^y9(T,C,6),V=th(T,C,19)^iv(T,C,61)^v9(T,C,6),L=GBe(S,V,Xl[w-7],Xl[w-16]),D=YBe(L,E,P,Jl[w-7],Jl[w-16]);Jl[w]=D|0,Xl[w]=L|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:h,Fl:g,Gh:p,Gl:m,Hh:y,Hl:v}=this;for(let w=0;w<80;w++){const _=eh(f,d,14)^eh(f,d,18)^nv(f,d,41),x=th(f,d,14)^th(f,d,18)^iv(f,d,41),E=f&h^~f&p,S=d&g^~d&m,T=JBe(v,x,S,rNe[w],Xl[w]),C=XBe(T,y,_,E,tNe[w],Jl[w]),P=T|0,V=eh(n,i,28)^nv(n,i,34)^nv(n,i,39),L=th(n,i,28)^iv(n,i,34)^iv(n,i,39),D=n&s^n&a^s&a,b=i&o^i&c^o&c;y=p|0,v=m|0,p=h|0,m=g|0,h=f|0,g=d|0,{h:f,l:d}=jc(l|0,u|0,C|0,P|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const I=HBe(P,L,b);n=WBe(I,C,V,D),i=I|0}({h:n,l:i}=jc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=jc(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=jc(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=jc(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=jc(this.Eh|0,this.El|0,f|0,d|0),{h,l:g}=jc(this.Fh|0,this.Fl|0,h|0,g|0),{h:p,l:m}=jc(this.Gh|0,this.Gl|0,p|0,m|0),{h:y,l:v}=jc(this.Hh|0,this.Hl|0,y|0,v|0),this.set(n,i,s,o,a,c,l,u,f,d,h,g,p,m,y,v)}roundClean(){Vu(Jl,Xl)}destroy(){Vu(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class iNe extends nNe{Ah=us[0]|0;Al=us[1]|0;Bh=us[2]|0;Bl=us[3]|0;Ch=us[4]|0;Cl=us[5]|0;Dh=us[6]|0;Dl=us[7]|0;Eh=us[8]|0;El=us[9]|0;Fh=us[10]|0;Fl=us[11]|0;Gh=us[12]|0;Gl=us[13]|0;Hh=us[14]|0;Hl=us[15]|0;constructor(){super(64)}}const yk=gk(()=>new eNe,ZX(1)),b9=gk(()=>new iNe,ZX(3));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vk=BigInt(0),DT=BigInt(1);function s1(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}" `;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function eZ(r){if(typeof r=="bigint"){if(!zv(r))throw new Error("positive bigint expected, got "+r)}else od(r);return r}function sv(r){const e=eZ(r).toString(16);return e.length&1?"0"+e:e}function tZ(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?vk:BigInt("0x"+r)}function Yw(r){return tZ(Gw(r))}function rZ(r){return tZ(Gw(sNe(_n(r)).reverse()))}function bk(r,e){od(e),r=eZ(r);const t=i1(r.toString(16).padStart(e*2,"0"));if(t.length!==e)throw new Error("number too large");return t}function nZ(r,e){return bk(r,e).reverse()}function sNe(r){return Uint8Array.from(r)}const zv=r=>typeof r=="bigint"&&vk<=r;function oNe(r,e,t){return zv(r)&&zv(e)&&zv(t)&&e<=r&&r<t}function aNe(r,e,t,n){if(!oNe(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function cNe(r){let e;for(e=0;r>vk;r>>=DT,e+=1);return e}const wk=r=>(DT<<BigInt(r))-DT;function lNe(r,e,t){if(od(r,"hashLen"),od(e,"qByteLen"),typeof t!="function")throw new Error("hmacFn must be a function");const n=m=>new Uint8Array(m),i=Uint8Array.of(),s=Uint8Array.of(0),o=Uint8Array.of(1),a=1e3;let c=n(r),l=n(r),u=0;const f=()=>{c.fill(1),l.fill(0),u=0},d=(...m)=>t(l,ia(c,...m)),h=(m=i)=>{l=d(s,m),c=d(),m.length!==0&&(l=d(o,m),c=d())},g=()=>{if(u++>=a)throw new Error("drbg: tried max amount of iterations");let m=0;const y=[];for(;m<e;){c=d();const v=c.slice();y.push(v),m+=c.length}return ia(...y)};return(m,y)=>{f(),h(m);let v;for(;!(v=y(g()));)h();return f(),v}}function xk(r,e={},t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,o,a){const c=r[s];if(a&&c===void 0)return;const l=typeof c;if(l!==o||c===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${l}`)}const i=(s,o)=>Object.entries(s).forEach(([a,c])=>n(a,c,o));i(e,!1),i(t,!0)}function w9(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eo=BigInt(0),Ns=BigInt(1),Tf=BigInt(2),iZ=BigInt(3),sZ=BigInt(4),oZ=BigInt(5),uNe=BigInt(7),aZ=BigInt(8),fNe=BigInt(9),cZ=BigInt(16);function va(r,e){const t=r%e;return t>=eo?t:e+t}function Jo(r,e,t){let n=r;for(;e-- >eo;)n*=n,n%=t;return n}function x9(r,e){if(r===eo)throw new Error("invert: expected non-zero number");if(e<=eo)throw new Error("invert: expected positive modulus, got "+e);let t=va(r,e),n=e,i=eo,s=Ns;for(;t!==eo;){const a=n/t,c=n%t,l=i-s*a;n=t,t=c,i=s,s=l}if(n!==Ns)throw new Error("invert: does not exist");return va(i,e)}function _k(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function lZ(r,e){const t=(r.ORDER+Ns)/sZ,n=r.pow(e,t);return _k(r,n,e),n}function dNe(r,e){const t=(r.ORDER-oZ)/aZ,n=r.mul(e,Tf),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,Tf),i),a=r.mul(s,r.sub(o,r.ONE));return _k(r,a,e),a}function hNe(r){const e=Jw(r),t=uZ(r),n=t(e,e.neg(e.ONE)),i=t(e,n),s=t(e,e.neg(n)),o=(r+uNe)/cZ;return(a,c)=>{let l=a.pow(c,o),u=a.mul(l,n);const f=a.mul(l,i),d=a.mul(l,s),h=a.eql(a.sqr(u),c),g=a.eql(a.sqr(f),c);l=a.cmov(l,u,h),u=a.cmov(d,f,g);const p=a.eql(a.sqr(u),c),m=a.cmov(l,u,p);return _k(a,m,c),m}}function uZ(r){if(r<iZ)throw new Error("sqrt is not defined for small field");let e=r-Ns,t=0;for(;e%Tf===eo;)e/=Tf,t++;let n=Tf;const i=Jw(r);for(;_9(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return lZ;let s=i.pow(n,e);const o=(e+Ns)/Tf;return function(c,l){if(c.is0(l))return l;if(_9(c,l)!==1)throw new Error("Cannot find square root");let u=t,f=c.mul(c.ONE,s),d=c.pow(l,e),h=c.pow(l,o);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let g=1,p=c.sqr(d);for(;!c.eql(p,c.ONE);)if(g++,p=c.sqr(p),g===u)throw new Error("Cannot find square root");const m=Ns<<BigInt(u-g-1),y=c.pow(f,m);u=g,f=c.sqr(y),d=c.mul(d,f),h=c.mul(h,y)}return h}}function pNe(r){return r%sZ===iZ?lZ:r%aZ===oZ?dNe:r%cZ===fNe?hNe(r):uZ(r)}const gNe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function mNe(r){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},t=gNe.reduce((n,i)=>(n[i]="function",n),e);return xk(r,t),r}function yNe(r,e,t){if(t<eo)throw new Error("invalid exponent, negatives unsupported");if(t===eo)return r.ONE;if(t===Ns)return e;let n=r.ONE,i=e;for(;t>eo;)t&Ns&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Ns;return n}function fZ(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,a,c)=>r.is0(a)?o:(n[c]=o,r.mul(o,a)),r.ONE),s=r.inv(i);return e.reduceRight((o,a,c)=>r.is0(a)?o:(n[c]=r.mul(o,n[c]),r.mul(o,a)),s),n}function _9(r,e){const t=(r.ORDER-Ns)/Tf,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function vNe(r,e){e!==void 0&&od(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}class bNe{ORDER;BITS;BYTES;isLE;ZERO=eo;ONE=Ns;_lengths;_sqrt;_mod;constructor(e,t={}){if(e<=eo)throw new Error("invalid field: expected ORDER > 0, got "+e);let n;this.isLE=!1,t!=null&&typeof t=="object"&&(typeof t.BITS=="number"&&(n=t.BITS),typeof t.sqrt=="function"&&(this.sqrt=t.sqrt),typeof t.isLE=="boolean"&&(this.isLE=t.isLE),t.allowedLengths&&(this._lengths=t.allowedLengths?.slice()),typeof t.modFromBytes=="boolean"&&(this._mod=t.modFromBytes));const{nBitLength:i,nByteLength:s}=vNe(e,n);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=i,this.BYTES=s,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return va(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return eo<=e&&e<this.ORDER}is0(e){return e===eo}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&Ns)===Ns}neg(e){return va(-e,this.ORDER)}eql(e,t){return e===t}sqr(e){return va(e*e,this.ORDER)}add(e,t){return va(e+t,this.ORDER)}sub(e,t){return va(e-t,this.ORDER)}mul(e,t){return va(e*t,this.ORDER)}pow(e,t){return yNe(this,e,t)}div(e,t){return va(e*x9(t,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,t){return e+t}subN(e,t){return e-t}mulN(e,t){return e*t}inv(e){return x9(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=pNe(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?nZ(e,this.BYTES):bk(e,this.BYTES)}fromBytes(e,t=!1){_n(e);const{_lengths:n,BYTES:i,isLE:s,ORDER:o,_mod:a}=this;if(n){if(!n.includes(e.length)||e.length>i)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+e.length);const l=new Uint8Array(i);l.set(e,s?0:l.length-e.length),e=l}if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);let c=s?rZ(e):Yw(e);if(a&&(c=va(c,o)),!t&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(e){return fZ(this,e)}cmov(e,t,n){return n?t:e}}function Jw(r,e={}){return new bNe(r,e)}function dZ(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function hZ(r){const e=dZ(r);return e+Math.ceil(e/2)}function wNe(r,e,t=!1){_n(r);const n=r.length,i=dZ(e),s=hZ(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?rZ(r):Yw(r),a=va(o,e-Ns)+Ns;return t?nZ(a,i):bk(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fp=BigInt(0),Rf=BigInt(1);function o1(r,e){const t=e.negate();return r?t:e}function S9(r,e){const t=fZ(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function pZ(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function WA(r,e){pZ(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=wk(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function E9(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let a=Number(r&i),c=r>>o;a>n&&(a-=s,c+=Rf);const l=e*n,u=l+Math.abs(a)-1,f=a===0,d=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:h,offsetF:l}}const GA=new WeakMap,gZ=new WeakMap;function YA(r){return gZ.get(r)||1}function A9(r){if(r!==fp)throw new Error("invalid wNAF")}class xNe{BASE;ZERO;Fn;bits;constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>fp;)t&Rf&&(n=n.add(i)),i=i.double(),t>>=Rf;return n}precomputeWindow(e,t){const{windows:n,windowSize:i}=WA(t,this.bits),s=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,s.push(a);for(let l=1;l<i;l++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=WA(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:l,isZero:u,isNeg:f,isNegF:d,offsetF:h}=E9(n,a,o);n=c,u?s=s.add(o1(d,t[h])):i=i.add(o1(f,t[l]))}return A9(n),{p:i,f:s}}wNAFUnsafe(e,t,n,i=this.ZERO){const s=WA(e,this.bits);for(let o=0;o<s.windows&&n!==fp;o++){const{nextN:a,offset:c,isZero:l,isNeg:u}=E9(n,o,s);if(n=a,!l){const f=t[c];i=i.add(u?f.negate():f)}}return A9(n),i}getPrecomputes(e,t,n){let i=GA.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),GA.set(t,i))),i}cached(e,t,n){const i=YA(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){const s=YA(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,i)}createCache(e,t){pZ(t,this.bits),gZ.set(e,t),GA.delete(e)}hasCache(e){return YA(e)!==1}}function _Ne(r,e,t,n){let i=e,s=r.ZERO,o=r.ZERO;for(;t>fp||n>fp;)t&Rf&&(s=s.add(i)),n&Rf&&(o=o.add(i)),i=i.double(),t>>=Rf,n>>=Rf;return{p1:s,p2:o}}function I9(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return mNe(e),e}else return Jw(r,{isLE:t})}function SNe(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>fp))throw new Error(`CURVE.${c} must be positive bigint`)}const i=I9(e.p,t.Fp,n),s=I9(e.n,t.Fn,n),a=["Gx","Gy","a","b"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}function ENe(r,e){return function(n){const i=r(n);return{secretKey:i,publicKey:e(i)}}}class mZ{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,t){if(YX(e),_n(t,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(t.length>n?e.create().update(t).digest():t);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),Vu(i)}update(e){return n1(this),this.iHash.update(e),this}digestInto(e){n1(this),_n(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const a1=(r,e,t)=>new mZ(r,e).update(t).digest();a1.create=(r,e)=>new mZ(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C9=(r,e)=>(r+(r>=0?e:-e)/yZ)/e;function ANe(r,e,t){const[[n,i],[s,o]]=e,a=C9(o*r,t),c=C9(-i*r,t);let l=r-a*n-c*s,u=-a*i-c*o;const f=l<al,d=u<al;f&&(l=-l),d&&(u=-u);const h=wk(Math.ceil(cNe(t)/2))+Fh;if(l<al||l>=h||u<al||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:f,k1:l,k2neg:d,k2:u}}function MT(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function JA(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return s1(t.lowS,"lowS"),s1(t.prehash,"prehash"),t.format!==void 0&&MT(t.format),t}class INe extends Error{constructor(e=""){super(e)}}const iu={Err:INe,_tlv:{encode:(r,e)=>{const{Err:t}=iu;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=sv(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?sv(i.length/2|128):"";return sv(r)+s+i+e},decode(r,e){const{Err:t}=iu;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=iu;if(r<al)throw new e("integer: negative integers are not allowed");let t=sv(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=iu;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Yw(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=iu,i=_n(r,void 0,"signature"),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(l)}},hexFromSig(r){const{_tlv:e,_int:t}=iu,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},al=BigInt(0),Fh=BigInt(1),yZ=BigInt(2),ov=BigInt(3),CNe=BigInt(4);function TNe(r,e={}){const t=SNe("weierstrass",r,e),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:o,n:a}=s;xk(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=bZ(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(L,D,b){const{x:I,y:B}=D.toAffine(),F=n.toBytes(I);if(s1(b,"isCompressed"),b){u();const z=!n.isOdd(B);return ia(vZ(z),F)}else return ia(Uint8Array.of(4),F,n.toBytes(B))}function d(L){_n(L,void 0,"Point");const{publicKey:D,publicKeyUncompressed:b}=l,I=L.length,B=L[0],F=L.subarray(1);if(I===D&&(B===2||B===3)){const z=n.fromBytes(F);if(!n.isValid(z))throw new Error("bad point: is not on curve, wrong x");const G=p(z);let Q;try{Q=n.sqrt(G)}catch(R){const M=R instanceof Error?": "+R.message:"";throw new Error("bad point: is not on curve, sqrt error"+M)}u();const X=n.isOdd(Q);return(B&1)===1!==X&&(Q=n.neg(Q)),{x:z,y:Q}}else if(I===b&&B===4){const z=n.BYTES,G=n.fromBytes(F.subarray(0,z)),Q=n.fromBytes(F.subarray(z,z*2));if(!m(G,Q))throw new Error("bad point: is not on curve");return{x:G,y:Q}}else throw new Error(`bad point: got length ${I}, expected compressed=${D} or uncompressed=${b}`)}const h=e.toBytes||f,g=e.fromBytes||d;function p(L){const D=n.sqr(L),b=n.mul(D,L);return n.add(n.add(b,n.mul(L,s.a)),s.b)}function m(L,D){const b=n.sqr(D),I=p(L);return n.eql(b,I)}if(!m(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const y=n.mul(n.pow(s.a,ov),CNe),v=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(y,v)))throw new Error("bad curve params: a or b");function w(L,D,b=!1){if(!n.isValid(D)||b&&n.is0(D))throw new Error(`bad point coordinate ${L}`);return D}function _(L){if(!(L instanceof C))throw new Error("Weierstrass Point expected")}function x(L){if(!c||!c.basises)throw new Error("no endo");return ANe(L,c.basises,i.ORDER)}const E=w9((L,D)=>{const{X:b,Y:I,Z:B}=L;if(n.eql(B,n.ONE))return{x:b,y:I};const F=L.is0();D==null&&(D=F?n.ONE:n.inv(B));const z=n.mul(b,D),G=n.mul(I,D),Q=n.mul(B,D);if(F)return{x:n.ZERO,y:n.ZERO};if(!n.eql(Q,n.ONE))throw new Error("invZ was invalid");return{x:z,y:G}}),S=w9(L=>{if(L.is0()){if(e.allowInfinityPoint&&!n.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:D,y:b}=L.toAffine();if(!n.isValid(D)||!n.isValid(b))throw new Error("bad point: x or y not field elements");if(!m(D,b))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function T(L,D,b,I,B){return b=new C(n.mul(b.X,L),b.Y,b.Z),D=o1(I,D),b=o1(B,b),D.add(b)}class C{static BASE=new C(s.Gx,s.Gy,n.ONE);static ZERO=new C(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(D,b,I){this.X=w("x",D),this.Y=w("y",b,!0),this.Z=w("z",I),Object.freeze(this)}static CURVE(){return s}static fromAffine(D){const{x:b,y:I}=D||{};if(!D||!n.isValid(b)||!n.isValid(I))throw new Error("invalid affine point");if(D instanceof C)throw new Error("projective point not allowed");return n.is0(b)&&n.is0(I)?C.ZERO:new C(b,I,n.ONE)}static fromBytes(D){const b=C.fromAffine(g(_n(D,void 0,"point")));return b.assertValidity(),b}static fromHex(D){return C.fromBytes(i1(D))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,b=!0){return V.createCache(this,D),b||this.multiply(ov),this}assertValidity(){S(this)}hasEvenY(){const{y:D}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(D)}equals(D){_(D);const{X:b,Y:I,Z:B}=this,{X:F,Y:z,Z:G}=D,Q=n.eql(n.mul(b,G),n.mul(F,B)),X=n.eql(n.mul(I,G),n.mul(z,B));return Q&&X}negate(){return new C(this.X,n.neg(this.Y),this.Z)}double(){const{a:D,b}=s,I=n.mul(b,ov),{X:B,Y:F,Z:z}=this;let G=n.ZERO,Q=n.ZERO,X=n.ZERO,O=n.mul(B,B),R=n.mul(F,F),M=n.mul(z,z),k=n.mul(B,F);return k=n.add(k,k),X=n.mul(B,z),X=n.add(X,X),G=n.mul(D,X),Q=n.mul(I,M),Q=n.add(G,Q),G=n.sub(R,Q),Q=n.add(R,Q),Q=n.mul(G,Q),G=n.mul(k,G),X=n.mul(I,X),M=n.mul(D,M),k=n.sub(O,M),k=n.mul(D,k),k=n.add(k,X),X=n.add(O,O),O=n.add(X,O),O=n.add(O,M),O=n.mul(O,k),Q=n.add(Q,O),M=n.mul(F,z),M=n.add(M,M),O=n.mul(M,k),G=n.sub(G,O),X=n.mul(M,R),X=n.add(X,X),X=n.add(X,X),new C(G,Q,X)}add(D){_(D);const{X:b,Y:I,Z:B}=this,{X:F,Y:z,Z:G}=D;let Q=n.ZERO,X=n.ZERO,O=n.ZERO;const R=s.a,M=n.mul(s.b,ov);let k=n.mul(b,F),j=n.mul(I,z),te=n.mul(B,G),ae=n.add(b,I),he=n.add(F,z);ae=n.mul(ae,he),he=n.add(k,j),ae=n.sub(ae,he),he=n.add(b,B);let re=n.add(F,G);return he=n.mul(he,re),re=n.add(k,te),he=n.sub(he,re),re=n.add(I,B),Q=n.add(z,G),re=n.mul(re,Q),Q=n.add(j,te),re=n.sub(re,Q),O=n.mul(R,he),Q=n.mul(M,te),O=n.add(Q,O),Q=n.sub(j,O),O=n.add(j,O),X=n.mul(Q,O),j=n.add(k,k),j=n.add(j,k),te=n.mul(R,te),he=n.mul(M,he),j=n.add(j,te),te=n.sub(k,te),te=n.mul(R,te),he=n.add(he,te),k=n.mul(j,he),X=n.add(X,k),k=n.mul(re,he),Q=n.mul(ae,Q),Q=n.sub(Q,k),k=n.mul(ae,j),O=n.mul(re,O),O=n.add(O,k),new C(Q,X,O)}subtract(D){return this.add(D.negate())}is0(){return this.equals(C.ZERO)}multiply(D){const{endo:b}=e;if(!i.isValidNot0(D))throw new Error("invalid scalar: out of range");let I,B;const F=z=>V.cached(this,z,G=>S9(C,G));if(b){const{k1neg:z,k1:G,k2neg:Q,k2:X}=x(D),{p:O,f:R}=F(G),{p:M,f:k}=F(X);B=R.add(k),I=T(b.beta,O,M,z,Q)}else{const{p:z,f:G}=F(D);I=z,B=G}return S9(C,[I,B])[0]}multiplyUnsafe(D){const{endo:b}=e,I=this;if(!i.isValid(D))throw new Error("invalid scalar: out of range");if(D===al||I.is0())return C.ZERO;if(D===Fh)return I;if(V.hasCache(this))return this.multiply(D);if(b){const{k1neg:B,k1:F,k2neg:z,k2:G}=x(D),{p1:Q,p2:X}=_Ne(C,I,F,G);return T(b.beta,Q,X,B,z)}else return V.unsafe(I,D)}toAffine(D){return E(this,D)}isTorsionFree(){const{isTorsionFree:D}=e;return o===Fh?!0:D?D(C,this):V.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:D}=e;return o===Fh?this:D?D(C,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(D=!0){return s1(D,"isCompressed"),this.assertValidity(),h(C,this,D)}toHex(D=!0){return Gw(this.toBytes(D))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const P=i.BITS,V=new xNe(C,e.endo?Math.ceil(P/2):P);return C.BASE.precompute(8),C}function vZ(r){return Uint8Array.of(r?2:3)}function bZ(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function RNe(r,e={}){const{Fn:t}=r,n=e.randomBytes||XX,i=Object.assign(bZ(r.Fp,t),{seed:hZ(t.ORDER)});function s(h){try{const g=t.fromBytes(h);return t.isValidNot0(g)}catch{return!1}}function o(h,g){const{publicKey:p,publicKeyUncompressed:m}=i;try{const y=h.length;return g===!0&&y!==p||g===!1&&y!==m?!1:!!r.fromBytes(h)}catch{return!1}}function a(h=n(i.seed)){return wNe(_n(h,i.seed,"seed"),t.ORDER)}function c(h,g=!0){return r.BASE.multiply(t.fromBytes(h)).toBytes(g)}function l(h){const{secretKey:g,publicKey:p,publicKeyUncompressed:m}=i;if(!pk(h)||"_lengths"in t&&t._lengths||g===p)return;const y=_n(h,void 0,"key").length;return y===p||y===m}function u(h,g,p=!0){if(l(h)===!0)throw new Error("first arg must be private key");if(l(g)===!1)throw new Error("second arg must be public key");const m=t.fromBytes(h);return r.fromBytes(g).multiply(m).toBytes(p)}const f={isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a},d=ENe(a,c);return Object.freeze({getPublicKey:c,getSharedSecret:u,keygen:d,Point:r,utils:f,lengths:i})}function kNe(r,e,t={}){YX(e),xk(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),t=Object.assign({},t);const n=t.randomBytes||XX,i=t.hmac||((b,I)=>a1(e,b,I)),{Fp:s,Fn:o}=r,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:f,utils:d,lengths:h}=RNe(r,t),g={prehash:!0,lowS:typeof t.lowS=="boolean"?t.lowS:!0,format:"compact",extraEntropy:!1},p=a*yZ<s.ORDER;function m(b){const I=a>>Fh;return b>I}function y(b,I){if(!o.isValidNot0(I))throw new Error(`invalid signature ${b}: out of range 1..Point.Fn.ORDER`);return I}function v(){if(p)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function w(b,I){MT(I);const B=h.signature,F=I==="compact"?B:I==="recovered"?B+1:void 0;return _n(b,F)}class _{r;s;recovery;constructor(I,B,F){if(this.r=y("r",I),this.s=y("s",B),F!=null){if(v(),![0,1,2,3].includes(F))throw new Error("invalid recovery id");this.recovery=F}Object.freeze(this)}static fromBytes(I,B=g.format){w(I,B);let F;if(B==="der"){const{r:X,s:O}=iu.toSig(_n(I));return new _(X,O)}B==="recovered"&&(F=I[0],B="compact",I=I.subarray(1));const z=h.signature/2,G=I.subarray(0,z),Q=I.subarray(z,z*2);return new _(o.fromBytes(G),o.fromBytes(Q),F)}static fromHex(I,B){return this.fromBytes(i1(I),B)}assertRecovery(){const{recovery:I}=this;if(I==null)throw new Error("invalid recovery id: must be present");return I}addRecoveryBit(I){return new _(this.r,this.s,I)}recoverPublicKey(I){const{r:B,s:F}=this,z=this.assertRecovery(),G=z===2||z===3?B+a:B;if(!s.isValid(G))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const Q=s.toBytes(G),X=r.fromBytes(ia(vZ((z&1)===0),Q)),O=o.inv(G),R=E(_n(I,void 0,"msgHash")),M=o.create(-R*O),k=o.create(F*O),j=r.BASE.multiplyUnsafe(M).add(X.multiplyUnsafe(k));if(j.is0())throw new Error("invalid recovery: point at infinify");return j.assertValidity(),j}hasHighS(){return m(this.s)}toBytes(I=g.format){if(MT(I),I==="der")return i1(iu.hexFromSig(this));const{r:B,s:F}=this,z=o.toBytes(B),G=o.toBytes(F);return I==="recovered"?(v(),ia(Uint8Array.of(this.assertRecovery()),z,G)):ia(z,G)}toHex(I){return Gw(this.toBytes(I))}}const x=t.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const B=Yw(I),F=I.length*8-c;return F>0?B>>BigInt(F):B},E=t.bits2int_modN||function(I){return o.create(x(I))},S=wk(c);function T(b){return aNe("num < 2^"+c,b,al,S),o.toBytes(b)}function C(b,I){return _n(b,void 0,"message"),I?_n(e(b),void 0,"prehashed message"):b}function P(b,I,B){const{lowS:F,prehash:z,extraEntropy:G}=JA(B,g);b=C(b,z);const Q=E(b),X=o.fromBytes(I);if(!o.isValidNot0(X))throw new Error("invalid private key");const O=[T(X),T(Q)];if(G!=null&&G!==!1){const j=G===!0?n(h.secretKey):G;O.push(_n(j,void 0,"extraEntropy"))}const R=ia(...O),M=Q;function k(j){const te=x(j);if(!o.isValidNot0(te))return;const ae=o.inv(te),he=r.BASE.multiply(te).toAffine(),re=o.create(he.x);if(re===al)return;const q=o.create(ae*o.create(M+re*X));if(q===al)return;let J=(he.x===re?0:2)|Number(he.y&Fh),de=q;return F&&m(q)&&(de=o.neg(q),J^=1),new _(re,de,p?void 0:J)}return{seed:R,k2sig:k}}function V(b,I,B={}){const{seed:F,k2sig:z}=P(b,I,B);return lNe(e.outputLen,o.BYTES,i)(F,z).toBytes(B.format)}function L(b,I,B,F={}){const{lowS:z,prehash:G,format:Q}=JA(F,g);if(B=_n(B,void 0,"publicKey"),I=C(I,G),!pk(b)){const X=b instanceof _?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+X)}w(b,Q);try{const X=_.fromBytes(b,Q),O=r.fromBytes(B);if(z&&X.hasHighS())return!1;const{r:R,s:M}=X,k=E(I),j=o.inv(M),te=o.create(k*j),ae=o.create(R*j),he=r.BASE.multiplyUnsafe(te).add(O.multiplyUnsafe(ae));return he.is0()?!1:o.create(he.x)===R}catch{return!1}}function D(b,I,B={}){const{prehash:F}=JA(B,g);return I=C(I,F),_.fromBytes(b,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:f,utils:d,lengths:h,Point:r,sign:V,verify:L,recoverPublicKey:D,Signature:_,hash:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sk={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},ONe={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},T9=BigInt(2);function PNe(r){const e=Sk.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,f=Jo(u,t,e)*u%e,d=Jo(f,t,e)*u%e,h=Jo(d,T9,e)*l%e,g=Jo(h,i,e)*h%e,p=Jo(g,s,e)*g%e,m=Jo(p,a,e)*p%e,y=Jo(m,c,e)*m%e,v=Jo(y,a,e)*p%e,w=Jo(v,t,e)*u%e,_=Jo(w,o,e)*g%e,x=Jo(_,n,e)*l%e,E=Jo(x,T9,e);if(!BT.eql(BT.sqr(E),r))throw new Error("Cannot find square root");return E}const BT=Jw(Sk.p,{sqrt:PNe}),$Ne=TNe(Sk,{Fp:BT,endo:ONe}),uh=kNe($Ne,yk),DNe=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),wZ=Uint8Array.from(new Array(16).fill(0).map((r,e)=>e)),MNe=wZ.map(r=>(9*r+5)%16),xZ=(()=>{const t=[[wZ],[MNe]];for(let n=0;n<4;n++)for(let i of t)i.push(i[n].map(s=>DNe[s]));return t})(),_Z=xZ[0],SZ=xZ[1],EZ=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>Uint8Array.from(r)),BNe=_Z.map((r,e)=>r.map(t=>EZ[e][t])),NNe=SZ.map((r,e)=>r.map(t=>EZ[e][t])),LNe=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),FNe=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function R9(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const av=new Uint32Array(16);class UNe extends mk{h0=1732584193;h1=-271733879;h2=-1732584194;h3=271733878;h4=-1009589776;constructor(){super(64,20,8,!0)}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let h=0;h<16;h++,t+=4)av[h]=e.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,o=s,a=this.h2|0,c=a,l=this.h3|0,u=l,f=this.h4|0,d=f;for(let h=0;h<5;h++){const g=4-h,p=LNe[h],m=FNe[h],y=_Z[h],v=SZ[h],w=BNe[h],_=NNe[h];for(let x=0;x<16;x++){const E=tv(n+R9(h,s,a,l)+av[y[x]]+p,w[x])+f|0;n=f,f=l,l=tv(a,10)|0,a=s,s=E}for(let x=0;x<16;x++){const E=tv(i+R9(g,o,c,u)+av[v[x]]+m,_[x])+d|0;i=d,d=u,u=tv(c,10)|0,c=o,o=E}}this.set(this.h1+a+u|0,this.h2+l+d|0,this.h3+f+i|0,this.h4+n+o|0,this.h0+s+c|0)}roundClean(){Vu(av)}destroy(){this.destroyed=!0,Vu(this.buffer),this.set(0,0,0,0,0)}}const zNe=gk(()=>new UNe);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function NT(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function AZ(r,e){return Array.isArray(e)?e.length===0?!0:r?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function qNe(r){if(typeof r!="function")throw new Error("function expected");return!0}function LT(r,e){if(typeof e!="string")throw new Error(`${r}: string expected`);return!0}function Ek(r){if(!Number.isSafeInteger(r))throw new Error(`invalid integer: ${r}`)}function FT(r){if(!Array.isArray(r))throw new Error("array expected")}function IZ(r,e){if(!AZ(!0,e))throw new Error(`${r}: array of strings expected`)}function jNe(r,e){if(!AZ(!1,e))throw new Error(`${r}: array of numbers expected`)}function CZ(...r){const e=s=>s,t=(s,o)=>a=>s(o(a)),n=r.map(s=>s.encode).reduceRight(t,e),i=r.map(s=>s.decode).reduce(t,e);return{encode:n,decode:i}}function VNe(r){const e=typeof r=="string"?r.split(""):r,t=e.length;IZ("alphabet",e);const n=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(FT(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${r}`);return e[s]})),decode:i=>(FT(i),i.map(s=>{LT("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${r}`);return o}))}}function KNe(r=""){return LT("join",r),{encode:e=>(IZ("join.decode",e),e.join(r)),decode:e=>(LT("join.decode",e),e.split(r))}}function k9(r,e,t){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: invalid to=${t}, base cannot be less than 2`);if(FT(r),!r.length)return[];let n=0;const i=[],s=Array.from(r,a=>{if(Ek(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let l=n;l<o;l++){const u=s[l],f=e*a,d=f+u;if(!Number.isSafeInteger(d)||f/e!==a||d-u!==f)throw new Error("convertRadix: carry overflow");const h=d/t;a=d%t;const g=Math.floor(h);if(s[l]=g,!Number.isSafeInteger(g)||g*t+a!==d)throw new Error("convertRadix: carry overflow");if(c)g?c=!1:n=l;else continue}if(i.push(a),c)break}for(let a=0;a<r.length-1&&r[a]===0;a++)i.push(0);return i.reverse()}function HNe(r){Ek(r);const e=2**8;return{encode:t=>{if(!NT(t))throw new Error("radix.encode input should be Uint8Array");return k9(Array.from(t),e,r)},decode:t=>(jNe("radix.decode",t),Uint8Array.from(k9(t,r,e)))}}function WNe(r,e){return Ek(r),qNe(e),{encode(t){if(!NT(t))throw new Error("checksum.encode: input should be Uint8Array");const n=e(t).slice(0,r),i=new Uint8Array(t.length+r);return i.set(t),i.set(n,t.length),i},decode(t){if(!NT(t))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-r),i=t.slice(-r),s=e(n).slice(0,r);for(let o=0;o<r;o++)if(s[o]!==i[o])throw new Error("Invalid checksum");return n}}}const GNe=r=>CZ(HNe(58),VNe(r),KNe("")),YNe=GNe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),JNe=r=>CZ(WNe(4,e=>r(r(e))),YNe);/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const eg=uh.Point,{Fn:M0}=eg,XA=JNe(yk),XNe=Uint8Array.from("Bitcoin seed".split(""),r=>r.charCodeAt(0)),ZA={private:76066276,public:76067358},QA=2147483648,ZNe=r=>zNe(yk(r)),QNe=r=>Lh(r).getUint32(0,!1),cv=r=>{if(!Number.isSafeInteger(r)||r<0||r>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+r);const e=new Uint8Array(4);return Lh(e).setUint32(0,r,!1),e};let eI=class fh{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return QNe(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this._privateKey||null}get publicKey(){return this._publicKey||null}get privateExtendedKey(){const e=this._privateKey;if(!e)throw new Error("No private key");return XA.encode(this.serialize(this.versions.private,ia(Uint8Array.of(0),e)))}get publicExtendedKey(){if(!this._publicKey)throw new Error("No public key");return XA.encode(this.serialize(this.versions.public,this._publicKey))}static fromMasterSeed(e,t=ZA){if(_n(e),8*e.length<128||8*e.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);const n=a1(b9,XNe,e),i=n.slice(0,32),s=n.slice(32);return new fh({versions:t,chainCode:s,privateKey:i})}static fromExtendedKey(e,t=ZA){const n=XA.decode(e),i=Lh(n),s=i.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),c=a[0]===0;if(s!==t[c?"private":"public"])throw new Error("Version mismatch");return c?new fh({...o,privateKey:a.slice(1)}):new fh({...o,publicKey:a})}static fromJSON(e){return fh.fromExtendedKey(e.xpriv)}versions;depth=0;index=0;chainCode=null;parentFingerprint=0;_privateKey;_publicKey;pubHash;constructor(e){if(!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||ZA,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(this.depth>255)throw new Error("HDKey: depth exceeds the serializable value 255");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!uh.utils.isValidSecretKey(e.privateKey))throw new Error("Invalid private key");this._privateKey=e.privateKey,this._publicKey=uh.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this._publicKey=eg.fromBytes(e.publicKey).toBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=ZNe(this._publicKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const i of t){const s=/^(\d+)('?)$/.exec(i),o=s&&s[1];if(!s||s.length!==3||typeof o!="string")throw new Error("invalid child index: "+i);let a=+o;if(!Number.isSafeInteger(a)||a>=QA)throw new Error("Invalid index");s[2]==="'"&&(a+=QA),n=n.deriveChild(a)}return n}deriveChild(e){if(!this._publicKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=cv(e);if(e>=QA){const c=this._privateKey;if(!c)throw new Error("Could not derive hardened child key");t=ia(Uint8Array.of(0),c,t)}else t=ia(this._publicKey,t);const n=a1(b9,this.chainCode,t),i=n.slice(0,32),s=n.slice(32);if(!uh.utils.isValidSecretKey(i))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e},a=M0.fromBytes(i);try{if(this._privateKey){const c=M0.create(M0.fromBytes(this._privateKey)+a);if(!M0.isValidNot0(c))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=M0.toBytes(c)}else{const c=eg.fromBytes(this._publicKey).add(eg.BASE.multiply(a));if(c.equals(eg.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=c.toBytes(!0)}return new fh(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this._privateKey)throw new Error("No privateKey set!");return _n(e,32),uh.sign(e,this._privateKey,{prehash:!1})}verify(e,t){if(_n(e,32),_n(t,64),!this._publicKey)throw new Error("No publicKey set!");return uh.verify(t,e,this._publicKey,{prehash:!1})}wipePrivateData(){return this._privateKey&&(this._privateKey.fill(0),this._privateKey=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return _n(t,33),ia(cv(e),new Uint8Array([this.depth]),cv(this.parentFingerprint),cv(this.index),this.chainCode,t)}};function eLe(r,e,t,n){Xj(r);const i=Lce({dkLen:32,asyncTick:10},n),{c:s,dkLen:o,asyncTick:a}=i;if(Df(s),Df(o),Df(a),s<1)throw new Error("iterations (c) should be >= 1");const c=cO(e),l=cO(t),u=new Uint8Array(o),f=zg.create(r,c),d=f._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:f,PRFSalt:d}}function tLe(r,e,t,n,i){return r.destroy(),e.destroy(),n&&n.destroy(),yl(i),t}function rLe(r,e,t,n){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:c}=eLe(r,e,t,n);let l;const u=new Uint8Array(4),f=Ah(u),d=new Uint8Array(a.outputLen);for(let h=1,g=0;g<s;h++,g+=a.outputLen){const p=o.subarray(g,g+a.outputLen);f.setInt32(0,h,!1),(l=c._cloneInto(l)).update(u).digestInto(d),p.set(d.subarray(0,p.length));for(let m=1;m<i;m++){a._cloneInto(l).update(d).digestInto(d);for(let y=0;y<p.length;y++)p[y]^=d[y]}}return tLe(a,c,o,l,d)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c1(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function TZ(r,e){return Array.isArray(e)?e.length===0?!0:r?e.every(t=>typeof t=="string"):e.every(t=>Number.isSafeInteger(t)):!1}function nLe(r){if(typeof r!="function")throw new Error("function expected");return!0}function l1(r,e){if(typeof e!="string")throw new Error(`${r}: string expected`);return!0}function Hp(r){if(!Number.isSafeInteger(r))throw new Error(`invalid integer: ${r}`)}function u1(r){if(!Array.isArray(r))throw new Error("array expected")}function f1(r,e){if(!TZ(!0,e))throw new Error(`${r}: array of strings expected`)}function RZ(r,e){if(!TZ(!1,e))throw new Error(`${r}: array of numbers expected`)}function iLe(...r){const e=s=>s,t=(s,o)=>a=>s(o(a)),n=r.map(s=>s.encode).reduceRight(t,e),i=r.map(s=>s.decode).reduce(t,e);return{encode:n,decode:i}}function sLe(r){const e=typeof r=="string"?r.split(""):r,t=e.length;f1("alphabet",e);const n=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(u1(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=t)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${r}`);return e[s]})),decode:i=>(u1(i),i.map(s=>{l1("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${r}`);return o}))}}function oLe(r=""){return l1("join",r),{encode:e=>(f1("join.decode",e),e.join(r)),decode:e=>(l1("join.decode",e),e.split(r))}}function aLe(r,e="="){return Hp(r),l1("padding",e),{encode(t){for(f1("padding.encode",t);t.length*r%8;)t.push(e);return t},decode(t){f1("padding.decode",t);let n=t.length;if(n*r%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&t[n-1]===e;n--)if((n-1)*r%8===0)throw new Error("padding: invalid, string has too much padding");return t.slice(0,n)}}}function UT(r,e,t){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: invalid to=${t}, base cannot be less than 2`);if(u1(r),!r.length)return[];let n=0;const i=[],s=Array.from(r,a=>{if(Hp(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),o=s.length;for(;;){let a=0,c=!0;for(let l=n;l<o;l++){const u=s[l],f=e*a,d=f+u;if(!Number.isSafeInteger(d)||f/e!==a||d-u!==f)throw new Error("convertRadix: carry overflow");const h=d/t;a=d%t;const g=Math.floor(h);if(s[l]=g,!Number.isSafeInteger(g)||g*t+a!==d)throw new Error("convertRadix: carry overflow");if(c)g?c=!1:n=l;else continue}if(i.push(a),c)break}for(let a=0;a<r.length-1&&r[a]===0;a++)i.push(0);return i.reverse()}const kZ=(r,e)=>e===0?r:kZ(e,r%e),d1=(r,e)=>r+(e-kZ(r,e)),tI=(()=>{let r=[];for(let e=0;e<40;e++)r.push(2**e);return r})();function zT(r,e,t,n){if(u1(r),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(d1(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${d1(e,t)}`);let i=0,s=0;const o=tI[e],a=tI[t]-1,c=[];for(const l of r){if(Hp(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)c.push((i>>s-t&a)>>>0);const u=tI[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<t-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&c.push(i>>>0),c}function cLe(r){Hp(r);const e=2**8;return{encode:t=>{if(!c1(t))throw new Error("radix.encode input should be Uint8Array");return UT(Array.from(t),e,r)},decode:t=>(RZ("radix.decode",t),Uint8Array.from(UT(t,r,e)))}}function lLe(r,e=!1){if(Hp(r),r<=0||r>32)throw new Error("radix2: bits should be in (0..32]");if(d1(8,r)>32||d1(r,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!c1(t))throw new Error("radix2.encode input should be Uint8Array");return zT(Array.from(t),8,r,!e)},decode:t=>(RZ("radix2.decode",t),Uint8Array.from(zT(t,r,8,e)))}}function uLe(r,e){return Hp(r),nLe(e),{encode(t){if(!c1(t))throw new Error("checksum.encode: input should be Uint8Array");const n=e(t).slice(0,r),i=new Uint8Array(t.length+r);return i.set(t),i.set(n,t.length),i},decode(t){if(!c1(t))throw new Error("checksum.decode: input should be Uint8Array");const n=t.slice(0,-r),i=t.slice(-r),s=e(n).slice(0,r);for(let o=0;o<r;o++)if(s[o]!==i[o])throw new Error("Invalid checksum");return n}}}const lv={alphabet:sLe,chain:iLe,checksum:uLe,convertRadix:UT,convertRadix2:zT,radix:cLe,radix2:lLe,join:oLe,padding:aLe};/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const fLe=r=>r[0]==="";function OZ(r){if(typeof r!="string")throw new TypeError("invalid mnemonic type: "+typeof r);return r.normalize("NFKD")}function dLe(r){const e=OZ(r),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function hLe(r){$o(r,16,20,24,28,32)}function pLe(r,e=128){if(Df(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return yLe(HR(e/8),r)}const gLe=r=>{const e=8-r.length/4;return new Uint8Array([B1(r)[0]>>e<<e])};function mLe(r){if(!Array.isArray(r)||r.length!==2048||typeof r[0]!="string")throw new Error("Wordlist: expected array of 2048 strings");return r.forEach(e=>{if(typeof e!="string")throw new Error("wordlist: non-string element: "+e)}),lv.chain(lv.checksum(1,gLe),lv.radix2(11,!0),lv.alphabet(r))}function yLe(r,e){return hLe(r),mLe(e).encode(r).join(fLe(e)?"":" ")}const vLe=r=>OZ("mnemonic"+r);function uv(r,e=""){return rLe(cb,dLe(r).nfkd,vLe(e),{c:2048,dkLen:64})}const bLe=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`),qT=$o;/*! micro-key-producer - MIT License (c) 2024 Paul Miller (paulmillr.com) */const wLe=jR("ed25519 seed"),rI=2147483648,O9=new Uint8Array([0]);function P9(r,...e){return typeof r=="string"&&(r=M1(r)),qT(r,...e),r}const xLe=r=>ile(B1(r)),_Le=r=>Ah(r).getUint32(0,!1),nI=r=>{if(!Number.isSafeInteger(r)||r<0||r>2**32-1)throw new Error(`Invalid number=${r}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return Ah(e).setUint32(0,r,!1),e};class Uh{get publicKeyRaw(){return ul.getPublicKey(this.privateKey)}get publicKey(){return _a(O9,this.publicKeyRaw)}get pubHash(){return xLe(this.publicKey)}get fingerprint(){return _Le(this.pubHash)}get fingerprintHex(){return Du(nI(this.fingerprint))}get parentFingerprintHex(){return Du(nI(this.parentFingerprint))}static fromMasterSeed(e){if(e=P9(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=zg(cb,wLe,e);return new Uh({privateKey:t.slice(0,32),chainCode:t.slice(32)})}constructor(e){if(this.depth=0,this.index=0,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(qT(e.privateKey,32),qT(e.chainCode,32),this.depth=e.depth||0,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");this.chainCode=e.chainCode,this.privateKey=e.privateKey}derive(e,t=!1){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let i=this;for(const s of n){const o=/^(\d+)('?)$/.exec(s);if(!o||o.length!==3)throw new Error(`Invalid child index: ${s}`);let a=+o[1];if(!Number.isSafeInteger(a)||a>=rI)throw new Error("Invalid index");(t||o[2]==="'")&&(a+=rI),i=i.deriveChild(a)}return i}deriveChild(e){if(e<rI)throw new Error(`Non-hardened child derivation not possible for Ed25519 (index=${e})`);const t=_a(O9,this.privateKey,nI(e)),n=zg(cb,this.chainCode,t);return new Uh({chainCode:n.slice(32),depth:this.depth+1,parentFingerprint:this.fingerprint,index:e,privateKey:n.slice(0,32)})}sign(e){return ul.sign(e,this.privateKey)}verify(e,t){return t=P9(t,64),ul.verify(t,e,this.publicKeyRaw)}}class um{static async generate(){const{privateKey:e}=await crypto.subtle.generateKey("Ed25519",!0,["sign","verify"]),t=await crypto.subtle.exportKey("pkcs8",e);return new Uint8Array(t.slice(16))}static validate(e){let t;try{const n=JSON.parse(e.startsWith("[")&&e.endsWith("]")?e:`[${e}]`);if(Array.isArray(n)&&n.every(i=>typeof i=="number"&&i>=0&&i<=255)){const i=new Uint8Array(n);(i.length===32||i.length===64)&&(t=i)}}catch{}try{t??=$r.unmarshalHex(e)}catch{}try{t??=$r.unmarshalBase58(e)}catch{}try{t??=$r.unmarshalBase64(e)}catch{}if(t!=null&&!(t.length!==32&&t.length!==64))return $r.marshalBase64(t.slice(0,32))}static format64Bytes(e,t){let n;if(typeof e=="string"){const s=this.validate(e);if(!s)throw new Error("Invalid private key");n=$r.unmarshalBase64(s)}else n=e;if(n.length!==32)throw new Error("Invalid private key");const i=$r.unmarshalBase58(t);return $r.marshalBase64(new Uint8Array([...n,...i]))}}class $s{static VALIDATION_KEY=eI.fromMasterSeed(new Uint8Array(32));static getDerivationPath(e){switch(e.type){case"root":return"m/44'/501'";case"current":return`m/44'/501'/${e.index}'/0'`;case"legacy":return`m/44'/501'/${e.index}'`;case"bip32":case"ledger-live":return`m/44'/501'/${e.index}'/0/0`;case"backpack-legacy":return`m/44'/501'/0'/0/${e.index}`;case"custom":return e.path}}static isValidDerivationPath(e){try{return $s.VALIDATION_KEY.derive(e),!0}catch{return!1}}static generate(e=24){return pLe(bLe,e===12?128:256)}static derive(e,t){const n=uv(e),i=this.getDerivationPath(t),s=t.type==="bip32"?eI.fromMasterSeed(n).derive(i):Uh.fromMasterSeed(n).derive(i,t.type==="ledger-live"||t.type==="backpack-legacy");if(!s.privateKey)throw new Error("Failed to derive private key");return{privateKey:s.privateKey,path:i}}static getFingerprint(e){const t=uv(e);return Uh.fromMasterSeed(t).fingerprintHex}static validate(e){try{return $s.derive(e,{type:"current",index:0}),e}catch{}}static verify(e,t,n){const i=t.split("/").length===6;if(i){const c=uv(e),u=eI.fromMasterSeed(c).derive(t);if(!u.privateKey)return!1;if($r.marshalBase64(u.privateKey)===um.validate(n))return!0}const s=uv(e),a=Uh.fromMasterSeed(s).derive(t,i);return a.privateKey?$r.marshalBase64(a.privateKey)===um.validate(n):!1}static unmarshalBase64(e){return _ne().decode($r.unmarshalBase64(e))}static marshalBase64(e){return $r.marshalBase64(xne().encode(e))}static parseIndex(e){const t=Number(e.split("/").at(3)?.replace("'",""));if(isNaN(t))throw new Error("Invalid derivation path");return t}}const Iu=20,st={MAIN:"main",IMPORT_TYPE:"import-type",IMPORT_SEED_PHRASE:"import-seed-phrase",IMPORT_PRIVATE_KEY:"import-private-key",IMPORT_HARDWARE_WALLET:"import-hardware-wallet",IMPORT_LEDGER:"import-ledger",IMPORT_KEYSTONE:"import-keystone",IMPORT_TREZOR:"import-trezor",IMPORT_READONLY:"import-readonly",CREATE_TYPE:"create-type",CREATE_SEED_PHRASE_WARNING:"create-seed-phrase-warning",CREATE_SEED_PHRASE_VIEW:"create-seed-phrase-view",EXISTING_SEED_PHRASE:"existing-seed-phrase",PRIVY_TYPE:"privy-type",PRIVY_GOOGLE:"privy-google",PRIVY_APPLE:"privy-apple",PRIVY_TWITTER:"privy-twitter",PRIVY_DISCORD:"privy-discord",SHARED_CHOOSE_ADDRESSES:"shared-choose-addresses",SHARED_LABEL_WALLET:"shared-label-wallet",SHARED_RECOMMEMDED_SETTINGS:"shared-recommended-settings",JUPITER_SYNC_TYPE:"jupiter-sync-type",JUPITER_SYNC_EXPORT:"jupiter-sync-export",JUPITER_SYNC_IMPORT:"jupiter-sync-import",FINAL_STEP:"final-step"},ur={READONLY:"Readonly",SEED_PHRASE:"Seed Phrase",EXISTING_SEED_PHRASE:"Existing Seed Phrase",PRIVATE_KEY:"Private Key",LEDGER:"Ledger",KEYSTONE:"Keystone",TREZOR:"Trezor",PRIVY:"Privy",JUPITER_SYNC:"Jupiter Sync"},[SLe,ELe]=El(()=>{const[r,e]=Pe(st.MAIN),[t,n]=Pe({type:"__empty__"}),[i,s]=Na();function o(c){n(l=>({...l,...c}))}function a(){n({type:"__empty__"})}return mr(()=>{i.type==="jupiter-sync"&&(e(st.JUPITER_SYNC_TYPE),s({type:void 0},{replace:!0}))}),{step:r,setStep:e,importForm:t,updateImportForm:o,resetImportForm:a}}),$n=()=>{const r=ELe();if(!r)throw new Error("useOnboard must be used within a OnboardProvider");return r};var ALe=le('<div class="text-zinc-500 group-hover:text-zinc-200 flex items-center justify-center transition-100 p-1.5 -m-1.5 rounded-lg"><div class="i-tabler:arrow-left size-6">'),ILe=le('<button class="flex items-center gap-3 pb-2 cursor-pointer group"><h1 class="font-semibold text-zinc-200 text-lg leading-none">');const pi=r=>{const{setStep:e}=$n();return(()=>{var t=ILe(),n=t.firstChild;return t.$$click=()=>e(r.previousStep),Z(t,A(Oe,{get when(){return r.previousStep},get children(){return ALe()}}),n),Z(n,()=>r.title),t})()};At(["click"]);var CLe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><button class="grid grid-cols-3 gap-2 cursor-pointer select-all w-full"></button><button class="relative cursor-pointer w-full py-2.5 rounded-xl text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100"><div></div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:copy size-5.5"></div></div></button><button class="relative cursor-pointer w-full py-2.5 rounded-xl text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100"><div>Continue</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class=" i-tabler:arrow-right size-5.5">'),TLe=le('<div class="flex items-center bg-zinc-950 rounded px-2 py-1.5 ring-1 ring-zinc-800"><div class="w-6.5 text-zinc-500 select-none tracking-tighter">.</div><div>');const RLe=()=>{const{updateImportForm:r,setStep:e,importForm:t}=$n(),{copyToClipboard:n,showCheckmark:i}=yd(),s=Te(()=>{const c=t();return c.type===ur.SEED_PHRASE&&c.mnemonic?c.mnemonic:$s.generate()});function o(c){c.stopImmediatePropagation(),n(s())}async function a(){const{privateKey:c,path:l}=$s.derive(s(),{type:"current",index:0}),{address:u}=await _h(c);r({type:ur.SEED_PHRASE,mnemonic:s(),accounts:[{address:u,path:l,privateKey:$r.marshalBase64(c)}],isNew:!0}),e(st.SHARED_LABEL_WALLET)}return(()=>{var c=CLe(),l=c.firstChild,u=l.nextSibling,f=u.firstChild,d=f.nextSibling,h=d.firstChild,g=u.nextSibling;return Z(c,A(pi,{title:"Your Seed Phrase",get previousStep(){return st.CREATE_SEED_PHRASE_WARNING}}),l),l.$$click=o,Z(l,A(pt,{get each(){return s().split(" ")},children:(p,m)=>(()=>{var y=TLe(),v=y.firstChild,w=v.firstChild,_=v.nextSibling;return Z(v,()=>m()+1,w),Z(_,p),y})()})),u.$$click=o,Z(f,()=>i()?"Copied":"Copy Seed Phrase"),g.$$click=a,Ge(p=>nr(h,{"i-tabler:copy-check-filled text-zinc-100":i(),"i-tabler:copy":!i()},p)),c})()};At(["click"]);var kLe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class=text-zinc-400>Please read carefully before proceeding!</p><div class="space-y-3 ring-1 p-3 rounded-lg text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/10"><ul class="space-y-3 list-outside list-disc pl-4 leading-tight"><li>If you lose or share your seed phrase, you will lose access to all your assets permanently</li><li>Your seed phrase is only stored on your device, Jupiter can never access it</li><li>If you uninstall this wallet without backing up your seed phrase, it cannot be recovered by Jupiter</li><li>View your seed phrase in a private area and do not let anyone see it</li></ul></div><button class="mt-2 w-full p-2.5 rounded-xl font-semibold transition-100 cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950">Reveal Seed Phrase');const OLe=()=>{const{setStep:r}=$n();return(()=>{var e=kLe(),t=e.firstChild,n=t.nextSibling,i=n.nextSibling;return Z(e,A(pi,{title:"Before You Begin",get previousStep(){return st.CREATE_TYPE}}),t),i.$$click=()=>r(st.CREATE_SEED_PHRASE_VIEW),e})()};At(["click"]);var PLe=le('<div class="size-5 i-tabler:list-letters bg-primary-200">'),$Le=le('<div class="size-5 i-tabler:seedling bg-primary-200">'),DLe=le('<div>Social Login <span class="inline-flex items-center font-normal text-zinc-400 text-sm">(fka <div class="i-tabler:bolt-filled ml-0.5"></div> Quick Account)'),MLe=le('<div class="size-5 i-tabler:brand-google bg-primary-200">'),BLe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),NLe=le('<div class="absolute top-0 right-0 py-0.5 px-2 text-xs font-medium text-primary-200 bg-primary-200/10 rounded-tr-xl rounded-bl-xl">Recommended'),LLe=le('<button class="relative cursor-pointer p-3 bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div></div><div class="flex gap-3 items-center justify-center"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm leading-tight">');const FLe=()=>{const{setStep:r}=$n(),{accounts:e}=Jr(),t=ci(),i=[...Te(()=>e().some(s=>s.type==="mnemonic"))()?[{title:"Existing Seed Phrase",description:"Create a new wallet from an existing seed phrase that you already have.",Icon:()=>PLe(),onClick:()=>r(st.EXISTING_SEED_PHRASE)}]:[],{title:"New Seed Phrase",description:"24 word seed phrase, portable across any wallet. Fastest execution and more secure.",Icon:()=>$Le(),onClick:()=>r(st.CREATE_SEED_PHRASE_WARNING)},{title:DLe(),description:"Simple SSO method, portable across Jupiter interfaces. Limited to 1 account.",Icon:()=>MLe(),onClick:()=>{if(e().some(s=>s.type==="privy"))return t.alert({title:"Jupiter Quick Account Already Exists",content:"Only one active Social Login wallet is allowed. Please delete the existing wallet if you wish to use a new one."});r(st.PRIVY_TYPE)}}];return(()=>{var s=BLe();return Z(s,A(pi,{title:"Create New Wallet",get previousStep(){return st.MAIN}}),null),Z(s,A(pt,{each:i,children:({title:o,description:a,Icon:c,onClick:l},u)=>(()=>{var f=LLe(),d=f.firstChild,h=d.nextSibling,g=h.firstChild,p=g.nextSibling,m=p.firstChild,y=m.nextSibling;return gl(f,"click",l,!0),Z(f,A(Oe,{get when(){return u()===0},get children(){return NLe()}}),d),Z(g,A(c,{})),Z(m,o),Z(y,a),f})()}),null),s})()};At(["click"]);var ULe=le(`<input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100 -mt-1.5"type=text placeholder="eg. m/44'/501'/0'/0'">`),zLe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><button class="flex items-center gap-1 hover:text-zinc-200 cursor-pointer transition-100"><div class="i-tabler:caret-right-filled size-5 -ml-1 transition-100"></div><div>Use a custom derivation path'),qLe=le('<button class="cursor-pointer py-3 px-4 flex gap-2 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="overflow-x-auto flex flex-col text-left gap-0.5 w-full"><h3 class=font-medium>Seed Phrase #</h3><div class="relative flex gap-1"><div class="absolute right-0 bottom-0 h-6 w-4 bg-linear-to-r from-zinc-800/0 to-zinc-800"></div></div></div><div class=flex-1></div><div class="flex-none i-tabler:chevron-right size-5 text-zinc-400">'),jLe=le('<div class="flex gap-1 items-center rounded-full bg-zinc-900 px-1 pr-2"><div class="text-zinc-400 whitespace-nowrap">');const VLe=()=>{const{updateImportForm:r,setStep:e}=$n(),{accounts:t}=Jr(),{alert:n}=ci(),[i,s]=Pe(!1),[o,a]=Pe(""),c=Te(()=>{const u=t().filter(f=>f.type==="mnemonic");return qX(u,f=>f.mfp)});function l(u){const f=i()&&o().trim()||void 0;if(f&&!$s.isValidDerivationPath(f)){n({title:"Invalid Derivation Path",content:"The custom derivation path you have entered is not valid."});return}r({type:ur.EXISTING_SEED_PHRASE,mfp:u,customDerivationPath:f}),e(st.SHARED_LABEL_WALLET)}return(()=>{var u=zLe(),f=u.firstChild,d=f.firstChild;return Z(u,A(pi,{title:"Choose Seed Phrase",get previousStep(){return st.CREATE_TYPE}}),f),Z(u,A(bp,{class:"space-y-3 max-h-50vh p-0.3",get children(){return A(pt,{get each(){return Object.entries(c())},children:([h,g],p)=>(()=>{var m=qLe(),y=m.firstChild,v=y.firstChild;v.firstChild;var w=v.nextSibling,_=w.firstChild;return m.$$click=()=>l(h),Z(v,()=>p()+1,null),Z(w,A(pt,{each:g,children:x=>(()=>{var E=jLe(),S=E.firstChild;return Z(E,A(Tp,{get id(){return x.address},class:"size-4"}),S),Z(S,()=>x.label),E})()}),_),m})()})}}),f),f.$$click=()=>s(!i()),Z(u,A(Oe,{get when(){return i()},get children(){var h=ULe();return h.$$input=g=>a(g.currentTarget.value),Ge(()=>h.value=o()),h}}),null),Ge(h=>{var g=!i(),p=!!i(),m=!!i();return g!==h.e&&f.classList.toggle("text-zinc-400",h.e=g),p!==h.t&&f.classList.toggle("text-zinc-300",h.t=p),m!==h.a&&d.classList.toggle("rotate-90",h.a=m),h},{e:void 0,t:void 0,a:void 0}),u})()};At(["click","input"]);var KLe=le('<div class="w-97vw max-w-7xl relative left-1/2 -translate-x-1/2 flex flex-col items-center"><h1 class="animate-[fadeInUp_0.5s_ease_backwards] font-semibold text-3xl mt-6 mb-2">Jupiter Wallet</h1><p class="text-zinc-50/50 animate-[fadeInUp_0.5s_ease_backwards] text-lg mb-2">Your personal portal into Solana</p><div class="grid grid-cols-2 lg:grid-cols-3 gap-4 w-full mt-6 mb-10"></div><a class="animate-[fadeInUp_0.6s_ease_0.5s_backwards] inline-flex items-center gap-2 bg-primary-200 text-zinc-950 px-7 py-3 rounded-full text-base font-semibold shadow-lg shadow-primary-200/20 group"><div>Continue to jup.ag to start</div><div class="i-tabler-arrow-right size-5 group-hover:translate-x-1.5 transition-100">'),HLe=le('<div class="fixed flex top-0 right-0 m-3 text-zinc-950"><div class="flex items-center mr-2"></div><div class="bg-green-300 py-3 px-4 rounded-xl"><div class=font-bold>Pin the Jupiter Wallet</div><div class="flex items-center opacity-70 font-semibold">First click <div class="i-tabler:puzzle size-5 mx-1"></div> then <div class="i-tabler:pinned size-5 mx-0.5">'),WLe=le('<div class="animate-[fadeInUp_0.5s_ease_backwards] bg-zinc-900 ring ring-1 ring-zinc-800 rounded-2xl p-5"><div class="flex items-center gap-4 mb-2"><div class="size-10 rounded-xl flex items-center justify-center bg-primary-200/10"><div></div></div><h3 class="text-lg font-semibold"></h3></div><p class="text-zinc-400 pl-14">'),GLe=le('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 370.353 370.353"class="fill-zinc-50 h-14 rotate-250"><g><path d="M368.432,166.578c-23.256-19.584-42.84-42.84-63.648-64.872c-11.016-11.628-28.151-34.884-46.512-36.108 c-1.224-1.836-3.06-3.06-7.344-2.448c-2.448,0.612-4.284,2.448-4.896,4.896c-3.672,14.076-3.06,28.764-3.06,43.452 c-53.856-7.344-116.893,19.584-159.732,48.348C36.115,191.057-0.605,243.078,0.007,301.217c0,2.448,1.836,3.672,3.672,4.284 c1.836,1.836,4.284,2.448,6.732,1.224c70.992-50.184,145.044-94.247,235.009-78.947h0.611c-5.508,17.748-6.119,37.943-6.119,56.304 c0,5.508,4.896,7.344,8.567,6.732c1.836,2.447,6.12,4.283,9.18,1.224c40.393-33.66,84.456-71.604,111.385-117.503 C370.88,172.698,370.88,168.414,368.432,166.578z M348.235,183.102c-10.403,15.3-23.868,28.764-37.332,42.228 c-18.359,18.36-39.168,34.272-56.916,53.244c0-16.524-0.611-33.048,0.612-50.185c0-1.836-0.612-3.06-1.836-3.672 c1.836-3.672,1.224-8.567-3.672-9.792c-88.741-18.972-170.749,23.256-239.292,77.112c9.18-53.856,41.004-94.248,86.904-124.848 s93.637-36.72,146.269-42.84v0.612c-0.612,4.896,7.344,5.508,8.568,1.224c0-1.224,0.611-1.836,0.611-3.06 c3.672-1.836,4.896-6.732,1.836-8.568c1.836-9.792,2.448-19.584,3.672-29.376c0-1.836,0.612-4.896,1.225-7.956 c7.956,10.404,21.42,19.584,30.6,28.764c17.748,18.36,34.272,37.944,52.632,56.304 C351.907,170.862,356.191,170.862,348.235,183.102z">');const YLe=[{title:"DeFi Portfolio",description:"Track every single token, NFT, DeFi yield and position you own across all protocols, directly on Jupiter Wallet.",icon:"i-tabler:chart-bar"},{title:"Spot PnL",description:"View detailed performance metrics for all your spot trades, positions, and price movements in real-time.",icon:"i-tabler:trending-up"},{title:"Jupiter Sync",description:"Sync all your wallets and keys with Jupiter Mobile securely and privately, simply by scanning a single QR code.",icon:"i-tabler:device-mobile-bolt"},{title:"Auto Approve",description:"Trade and execute transactions without ever having to approve a single transaction on Jupiter or Meteora.",icon:"i-tabler:checkup-list"},{title:"Ultra Swaps",description:"Enjoy lightning fast swap execution with ultra low slippage and best-in-class MEV protection.",icon:"i-tabler:arrows-left-right"},{title:"10x Lower Fees",description:"Enjoy all of the features mentioned, at up to 10x lower swap fees than any other wallet.",icon:"i-tabler:cash-banknote-plus"}],JLe=()=>{const[r,e]=Pe(!1);return mr(async()=>{const{isOnToolbar:t}=await yi.action.getUserSettings();e(!t)}),[(()=>{var t=KLe(),n=t.firstChild,i=n.nextSibling,s=i.nextSibling,o=s.nextSibling;return Z(t,A(Sp,{class:"animate-[fadeInUp_0.5s_ease_backwards] size-24"}),n),Z(s,A(pt,{each:YLe,children:(a,c)=>(()=>{var l=WLe(),u=l.firstChild,f=u.firstChild,d=f.firstChild,h=f.nextSibling,g=u.nextSibling;return Z(h,()=>a.title),Z(g,()=>a.description),Ge(p=>{var m=`${.1+c()*.05}s`,y=`${a.icon} size-5 text-primary-200`;return m!==p.e&&((p.e=m)!=null?l.style.setProperty("animation-delay",m):l.style.removeProperty("animation-delay")),y!==p.t&&tn(d,p.t=y),p},{e:void 0,t:void 0}),l})()})),Ge(()=>Lr(o,"href",Ss.LANDING)),t})(),A(Oe,{get when(){return r()},get children(){var t=HLe(),n=t.firstChild;return Z(n,A(XLe,{})),t}})]},XLe=()=>GLe();var ZLe=le('<footer class="fixed bottom-0 left-0 flex w-full py-3 px-5 text-xs text-zinc-500 uppercase font-medium gap-6"><div>Jupiter Wallet V</div><div class=flex-1></div><a target=_blank class=hover:text-zinc-50>Terms</a><a target=_blank class=hover:text-zinc-50>Policy</a><a target=_blank class=hover:text-zinc-50>Help Center');const QLe=()=>(()=>{var r=ZLe(),e=r.firstChild;e.firstChild;var t=e.nextSibling,n=t.nextSibling,i=n.nextSibling,s=i.nextSibling;return Z(e,()=>yi.runtime.getManifest().version,null),Ge(o=>{var a=Ss.TERMS,c=Ss.PRIVACY,l=Ss.SUPPORT;return a!==o.e&&Lr(n,"href",o.e=a),c!==o.t&&Lr(i,"href",o.t=c),l!==o.a&&Lr(s,"href",o.a=l),o},{e:void 0,t:void 0,a:void 0}),r})();var eFe=le(`<input class="ring-1 ring-zinc-800 focus:ring-primary-200 resize-none w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100 -mt-1.5"type=text placeholder="eg. m/44'/501'/0'/0'">`),tFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><button class="flex items-center gap-1 hover:text-zinc-200 cursor-pointer transition-100"><div class="i-tabler:caret-right-filled size-5 -ml-1 transition-100"></div><div>Use a custom derivation path'),rFe=le('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100"><div class="size-9 flex items-center justify-center"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium>');const nFe=()=>{const{setStep:r,updateImportForm:e}=$n(),[t,n]=Pe(!1),[i,s]=Pe(""),{alert:o}=ci();function a(l){const u=t()&&i().trim()||void 0;if(u&&!$s.isValidDerivationPath(u)){o({title:"Invalid Derivation Path",content:"The custom derivation path you have entered is not valid."});return}e({customDerivationPath:u}),r(l)}const c=[{title:"Ledger",Icon:()=>A(zR,{class:"size-8 fill-zinc-50 p-1"}),onClick:()=>{a(st.IMPORT_LEDGER)}},{title:"Keystone",Icon:()=>A(UR,{class:"size-9 fill-zinc-50 p-1"}),onClick:()=>{a(st.IMPORT_KEYSTONE)}},{title:"Trezor",Icon:()=>A(y4,{class:"size-9 fill-zinc-50 p-1"}),onClick:()=>{a(st.IMPORT_TREZOR)}}];return(()=>{var l=tFe(),u=l.firstChild,f=u.firstChild;return Z(l,A(pi,{title:"Import Hardware Wallet",get previousStep(){return st.IMPORT_TYPE}}),u),Z(l,A(pt,{each:c,children:({title:d,Icon:h,onClick:g})=>(()=>{var p=rFe(),m=p.firstChild,y=m.nextSibling,v=y.firstChild;return p.$$click=()=>g(),Z(m,A(h,{})),Z(v,d),p})()}),u),u.$$click=()=>n(!t()),Z(l,A(Oe,{get when(){return t()},get children(){var d=eFe();return d.$$input=h=>s(h.currentTarget.value),Ge(()=>d.value=i()),d}}),null),Ge(d=>{var h=!t(),g=!!t(),p=!!t();return h!==d.e&&u.classList.toggle("text-zinc-400",d.e=h),g!==d.t&&u.classList.toggle("text-zinc-300",d.t=g),p!==d.a&&f.classList.toggle("rotate-90",d.a=p),d},{e:void 0,t:void 0,a:void 0}),l})()};At(["click","input"]);Eh.Label;Eh.ValueLabel;const PZ=r=>{const[e,t]=Lt(r,["class","children"]);return A(Eh,at({get class(){return gr("flex w-full flex-col gap-2",e.class)}},t,{get children(){return[kr(()=>e.children),A(Eh.Track,{class:"h-2 overflow-hidden rounded-full bg-zinc-800",get children(){return A(Eh.Fill,{class:"h-full w-[--kb-progress-fill-width] bg-primary-200 transition-all duration-200 ease-linear"})}})]}}))};var iFe=le('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),sFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Unlock your Keystone device and connect to it via a suitable USB cable</li><li>Approve all connection requests on your Keystone device as needed</li><li>Approve all relevant browser permissions</li></ul><div><div class="flex items-center justify-between text-zinc-400"><div>Progress</div><div>%</div></div></div><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const fo={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting",RETRIEVING_ADDRESSES:"retrieving_addresses"},oFe=()=>{const{importForm:r,setStep:e,updateImportForm:t}=$n(),[n,i]=Pe(fo.CONNECTING),[s,o]=Pe(null),[a,c]=Pe(0),l=ci(),{recordError:u}=vm();async function f(){try{i(fo.CONNECTING),await gh.pairDevice(),i(fo.RETRIEVING_ADDRESSES);const h=[],g=r();if("customDerivationPath"in g&&g.customDerivationPath){const{address:p,path:m,mfp:y}=await gh.getAddress({type:"custom",path:g.customDerivationPath});h.push({address:p,path:m,mfp:y})}else{const p=["current","legacy","ledger-live","backpack-legacy"];for(let w=0;w<p.length;w++){const _=p[w];for(let x=0;x<Iu;x++){if(_==="backpack-legacy"&&x===0)continue;const{address:E,path:S,mfp:T}=await gh.getAddress({type:_,index:x});h.push({address:E,path:S,mfp:T}),c((x+1+w*Iu)/(Iu*p.length)*100)}}const{address:m,path:y,mfp:v}=await gh.getAddress({type:"root"});h.push({address:m,path:y,mfp:v})}t({type:ur.KEYSTONE,accounts:h}),e(st.SHARED_CHOOSE_ADDRESSES)}catch(h){console.error(h);const g=typeof h=="string"?h:typeof h=="object"&&h&&"message"in h&&typeof h.message=="string"?h.message:"An unknown error has occured, please try again.";l.alert({title:"Failed to Connect",content:g}),u({type:"keystone:import",err:h}),o(g),c(0),i(fo.FAILED_TO_CONNECT)}}function d(){if(n()!==fo.CONNECTING&&n()===fo.FAILED_TO_CONNECT){o(null),f();return}}return mr(()=>f()),(()=>{var h=sFe(),g=h.firstChild,p=g.nextSibling,m=p.firstChild,y=m.firstChild,v=y.nextSibling,w=v.firstChild,_=p.nextSibling;return Z(h,A(pi,{title:"Connect Keystone",get previousStep(){return st.IMPORT_HARDWARE_WALLET}}),g),Z(v,()=>Math.round(a()),w),Z(p,A(PZ,{get value(){return a()}}),null),_.$$click=d,Z(_,A(Kt,{get children(){return[A(Re,{get when(){return n()===fo.CONNECTING},children:"Connecting..."}),A(Re,{get when(){return n()===fo.RETRIEVING_ADDRESSES},children:"Retrieving addresses..."}),A(Re,{get when(){return n()===fo.FAILED_TO_CONNECT},children:"Reconnect"})]}})),Z(h,A(Oe,{get when(){return s()},get children(){var x=iFe();return x.firstChild,Z(x,s,null),x}}),null),Ge(x=>{var E={"bg-zinc-800 text-zinc-400 cursor-pointer":n()===fo.CONNECTING||n()===fo.RETRIEVING_ADDRESSES,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":n()===fo.FAILED_TO_CONNECT},S=n()===fo.CONNECTING;return x.e=nr(_,E,x.e),S!==x.t&&(_.disabled=x.t=S),x},{e:void 0,t:void 0}),h})()};At(["click"]);var aFe=le('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),cFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Connect and unlock your Ledger device</li><li>Approve all relevant browser permissions</li><li>Open the Solana app on your Ledger device</li><li>Ensure blind signing is enabled</li></ul><div><div class="flex items-center justify-between text-zinc-400"><div>Progress</div><div>%</div></div></div><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const ho={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting",RETRIEVING_ADDRESSES:"retrieving_addresses"},lFe=()=>{const{importForm:r,setStep:e,updateImportForm:t}=$n(),[n,i]=Pe(ho.CONNECTING),[s,o]=Pe(null),[a,c]=Pe(0),l=ci(),{recordError:u}=vm(),[f,d]=Pe(null);async function h(){try{i(ho.CONNECTING),await lc.pairDevice(),await lc.assertAppConfig(y=>{d(y)}),d(null),i(ho.RETRIEVING_ADDRESSES);const p=[],m=r();if("customDerivationPath"in m&&m.customDerivationPath){const{address:y,path:v}=await lc.getAddress({type:"custom",path:m.customDerivationPath.replace("m/","")});p.push({address:y,path:v,mfp:""})}else{const y=["current","legacy","ledger-live","backpack-legacy"];for(let _=0;_<y.length;_++){const x=y[_];for(let E=0;E<Iu;E++){if(x==="backpack-legacy"&&E===0)continue;const{address:S,path:T}=await lc.getAddress({type:x,index:E});p.push({address:S,path:T,mfp:""}),c((E+1+_*Iu)/(Iu*y.length)*100)}}const{address:v,path:w}=await lc.getAddress({type:"root"});p.push({address:v,path:w,mfp:""})}t({type:ur.LEDGER,accounts:p}),e(st.SHARED_CHOOSE_ADDRESSES)}catch(p){console.error(p);const m=lc.extractErrorMessage(p);l.alert({title:"Failed to Connect",content:m}),u({type:"ledger:import",err:p}),o(m),c(0),i(ho.FAILED_TO_CONNECT)}}function g(){if(n()!==ho.CONNECTING&&n()===ho.FAILED_TO_CONNECT){o(null),h();return}}return mr(()=>h()),(()=>{var p=cFe(),m=p.firstChild,y=m.nextSibling,v=y.firstChild,w=v.firstChild,_=w.nextSibling,x=_.firstChild,E=y.nextSibling;return Z(p,A(pi,{title:"Connect Ledger",get previousStep(){return st.IMPORT_HARDWARE_WALLET}}),m),Z(_,()=>Math.round(a()),x),Z(y,A(PZ,{get value(){return a()}}),null),E.$$click=g,Z(E,A(Kt,{get children(){return[A(Re,{get when(){return f()===Yr.UnlockDevice},children:"Unlock Ledger"}),A(Re,{get when(){return f()===Yr.ConfirmOpenApp},children:"Open Solana App on Ledger"}),A(Re,{get when(){return n()===ho.CONNECTING},children:"Connecting..."}),A(Re,{get when(){return n()===ho.RETRIEVING_ADDRESSES},children:"Retrieving addresses..."}),A(Re,{get when(){return n()===ho.FAILED_TO_CONNECT},children:"Reconnect"})]}})),Z(p,A(Oe,{get when(){return s()},get children(){var S=aFe();return S.firstChild,Z(S,s,null),S}}),null),Ge(S=>{var T={"bg-zinc-800 text-zinc-400 cursor-pointer":n()===ho.CONNECTING||n()===ho.RETRIEVING_ADDRESSES,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":n()===ho.FAILED_TO_CONNECT},C=n()===ho.CONNECTING;return S.e=nr(E,T,S.e),C!==S.t&&(E.disabled=S.t=C),S},{e:void 0,t:void 0}),p})()};At(["click"]);var uFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter your private key below (accepts hex, base58, or base64 encoding):</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-48 transition-100 resize-none"placeholder="Enter your private key here"name=textarea-input></textarea><button class="mt-3 cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Next');const fFe="textarea-input",dFe=()=>{const r=ci(),{setStep:e,updateImportForm:t}=$n();async function n(i){i.preventDefault();const o=new FormData(i.target).get(fFe)?.toString().trim()||"",a=um.validate(o);if(!a){r.alert({title:"Invalid Private Key",content:"Please enter a valid private key to continue."});return}In(()=>{t({type:ur.PRIVATE_KEY,privateKey:a}),e(st.SHARED_CHOOSE_ADDRESSES)})}return(()=>{var i=uFe(),s=i.firstChild,o=s.nextSibling;return o.firstChild,Z(i,A(pi,{title:"Import Private Key",get previousStep(){return st.IMPORT_TYPE}}),s),o.addEventListener("submit",a=>n(a)),i})()};var hFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter a valid Solana address to watch:</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-48 transition-100 resize-none"placeholder="Enter an address here"name=textarea-input></textarea><button class="mt-3 cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Next');const pFe="textarea-input",gFe=()=>{const r=ci(),{setStep:e,updateImportForm:t}=$n();async function n(i){i.preventDefault();const o=new FormData(i.target).get(pFe)?.toString().trim()||"";if(!bu(o)){r.alert({title:"Invalid Address",content:"Please enter a valid Solana address to continue."});return}In(()=>{t({type:ur.READONLY,address:o}),e(st.SHARED_LABEL_WALLET)})}return(()=>{var i=hFe(),s=i.firstChild,o=s.nextSibling;return o.firstChild,Z(i,A(pi,{title:"Watch Address",get previousStep(){return st.IMPORT_TYPE}}),s),o.addEventListener("submit",a=>n(a)),i})()};var mFe=le(`<input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100 mb-2 mt--1"type=text placeholder="eg. m/44'/501'/0'/0'">`),yFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Enter your 12 or 24 word seed phrase below:</p><form><textarea class="ring-1 ring-zinc-800 focus:ring-primary-200 resize-none w-full outline-none rounded-xl p-3 bg-zinc-950 min-h-64 transition-100"placeholder="Enter your seed phrase here"name=textarea-input></textarea><button type=button class="flex items-center gap-1 hover:text-zinc-200 cursor-pointer transition-100 mb-3 mt-1"><div class="i-tabler:caret-right-filled size-5 -ml-1 transition-100"></div><div>Use a custom derivation path</div></button><button class="cursor-pointer w-full p-2.5 rounded-xl font-semibold transition-100">');const vFe="textarea-input",bFe=()=>{const{alert:r}=ci(),{setStep:e,updateImportForm:t}=$n(),[n,i]=Pe(!1),[s,o]=Pe(!1),[a,c]=Pe("");async function l(u){u.preventDefault();const d=new FormData(u.target).get(vFe)?.toString().trim()||"",h=$s.validate(d);if(!h){r({title:"Invalid Seed Phrase",content:"Please enter a valid seed phrase to continue."});return}const g=s()&&a().trim()||void 0;if(g&&!$s.isValidDerivationPath(g)){r({title:"Invalid Derivation Path",content:"The custom derivation path you have entered is not valid."});return}i(!0);const p=[];if(g){const{privateKey:m,path:y}=$s.derive(h,{type:"custom",path:g}),{address:v}=await _h(m);p.push({address:v,privateKey:$r.marshalBase64(m),path:y})}else{for(const w of["current","legacy","ledger-live","backpack-legacy","bip32"])for(let _=0;_<Iu;_++){if(w==="backpack-legacy"&&_===0)continue;const{privateKey:x,path:E}=$s.derive(h,{type:w,index:_}),{address:S}=await _h(x);p.push({address:S,privateKey:$r.marshalBase64(x),path:E})}const{privateKey:m,path:y}=$s.derive(h,{type:"root"}),{address:v}=await _h(m);p.push({address:v,privateKey:$r.marshalBase64(m),path:y})}In(()=>{t({type:ur.SEED_PHRASE,mnemonic:h,customDerivationPath:g,accounts:p}),e(st.SHARED_CHOOSE_ADDRESSES)})}return(()=>{var u=yFe(),f=u.firstChild,d=f.nextSibling,h=d.firstChild,g=h.nextSibling,p=g.firstChild,m=g.nextSibling;return Z(u,A(pi,{title:"Import Seed Phrase",get previousStep(){return st.IMPORT_TYPE}}),f),d.addEventListener("submit",y=>l(y)),g.$$click=()=>o(!s()),Z(d,A(Oe,{get when(){return s()},get children(){var y=mFe();return y.$$input=v=>c(v.currentTarget.value),Ge(()=>y.value=a()),y}}),m),Z(m,A(Oe,{get when(){return n()},fallback:"Next",children:"Loading..."})),Ge(y=>{var v=!s(),w=!!s(),_=!!s(),x={"cursor-wait bg-zinc-700 text-zinc-400":n(),"cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950":!n()},E=n();return v!==y.e&&g.classList.toggle("text-zinc-400",y.e=v),w!==y.t&&g.classList.toggle("text-zinc-300",y.t=w),_!==y.a&&p.classList.toggle("rotate-90",y.a=_),y.o=nr(m,x,y.o),E!==y.i&&(m.disabled=y.i=E),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u})()};At(["click","input"]);var wFe=le('<p class="text-red-400 mt-2 text-sm leading-4">Error: '),xFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><ul class="list-decimal list-inside space-y-2"><li>Connect and unlock your Trezor device</li><li>Approve all relevant browser permissions</li><li>Follow all subsequent instructions by Trezor</li></ul><button class="mt-4 w-full h-11 rounded-xl font-semibold transition-100 flex items-center justify-center">');const Qa={FAILED_TO_CONNECT:"failed_to_connect",CONNECTING:"connecting"},_Fe=()=>{const{importForm:r,setStep:e,updateImportForm:t}=$n(),[n,i]=Pe(Qa.CONNECTING),[s,o]=Pe(null),a=ci(),{recordError:c}=vm();async function l(){i(Qa.CONNECTING);try{const f=r(),d="customDerivationPath"in f&&f.customDerivationPath?await qt.trezorGetAddresses({path:f.customDerivationPath}):await qt.trezorGetAddresses({indices:Array.from({length:Iu}).map((h,g)=>g)});t({type:ur.TREZOR,accounts:d.map(h=>({address:lR(h.address),path:h.path,mfp:""}))}),e(st.SHARED_CHOOSE_ADDRESSES)}catch(f){console.error(f);const d=typeof f=="string"?f:typeof f=="object"&&f&&"message"in f&&typeof f.message=="string"?f.message:"An unknown error has occured, please try again.";a.alert({title:"Failed to Connect",content:d}),c({type:"trezor:import",err:f}),o(d),i(Qa.FAILED_TO_CONNECT)}}function u(){if(n()!==Qa.CONNECTING&&n()===Qa.FAILED_TO_CONNECT){o(null),l();return}}return mr(()=>l()),(()=>{var f=xFe(),d=f.firstChild,h=d.nextSibling;return Z(f,A(pi,{title:"Connect Trezor",get previousStep(){return st.IMPORT_HARDWARE_WALLET}}),d),h.$$click=u,Z(h,A(Kt,{get children(){return[A(Re,{get when(){return n()===Qa.CONNECTING},children:"Connecting..."}),A(Re,{get when(){return n()===Qa.FAILED_TO_CONNECT},children:"Reconnect"})]}})),Z(f,A(Oe,{get when(){return s()},get children(){var g=wFe();return g.firstChild,Z(g,s,null),g}}),null),Ge(g=>{var p={"bg-zinc-800 text-zinc-400 cursor-pointer":n()===Qa.CONNECTING,"bg-primary-200 active:bg-primary-200/20 cursor-pointer text-zinc-950":n()!==Qa.CONNECTING},m=n()===Qa.CONNECTING;return g.e=nr(h,p,g.e),m!==g.t&&(h.disabled=g.t=m),g},{e:void 0,t:void 0}),f})()};At(["click"]);var SFe=le('<div class="size-5 i-tabler:device-mobile-bolt bg-primary-200">'),EFe=le('<div class="size-5 i-tabler:seedling bg-primary-200">'),AFe=le('<div class="size-5 i-tabler:key bg-primary-200">'),IFe=le('<div>Social Login <span class="inline-flex items-center font-normal text-zinc-400 text-sm">(fka <div class="i-tabler:bolt-filled ml-0.5"></div> Quick Account)'),CFe=le('<div class="size-5 i-tabler:brand-google bg-primary-200">'),TFe=le('<div class="size-5 i-tabler:device-usb rounded-full bg-primary-200">'),RFe=le('<div class="size-5 i-tabler:spy rounded-full bg-primary-200">'),kFe=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),OFe=le('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:ring-zinc-800"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm">');const PFe=()=>{const{setStep:r}=$n(),{accounts:e}=Jr(),t=ci(),n=navigator.userAgent.includes("Firefox"),i=[{title:"Jupiter Mobile",description:"Import your existing Jupiter Mobile wallet",Icon:()=>SFe(),onClick:()=>r(st.JUPITER_SYNC_IMPORT)},{title:"Seed Phrase",description:"Import your existing seed phrase",Icon:()=>EFe(),onClick:()=>r(st.IMPORT_SEED_PHRASE)},{title:"Private Key",description:"Import your existing private key",Icon:()=>AFe(),onClick:()=>r(st.IMPORT_PRIVATE_KEY)},{title:IFe(),description:"Use social accounts to import your wallet",Icon:()=>CFe(),onClick:()=>{if(e().some(s=>s.type==="privy"))return t.alert({title:"Social Account Already Exists",content:"Only one active Social Account is allowed. Please remove the existing account if you wish to use a new one."});r(st.PRIVY_TYPE)}},{title:"Hardware Wallet",description:n?"Firefox does not support hardware wallets. Please use a Chromium-based browser.":"Connect to your existing hardware wallet",Icon:()=>TFe(),onClick:()=>r(st.IMPORT_HARDWARE_WALLET),disabled:n},{title:"Watch Address",description:"Track any wallet without access to its keys",Icon:()=>RFe(),onClick:()=>r(st.IMPORT_READONLY)}];return(()=>{var s=kFe();return Z(s,A(pi,{title:"Import Existing Wallet",get previousStep(){return st.MAIN}}),null),Z(s,A(pt,{each:i,children:({title:o,description:a,Icon:c,onClick:l,disabled:u})=>(()=>{var f=OFe(),d=f.firstChild,h=d.nextSibling,g=h.firstChild,p=g.nextSibling;return gl(f,"click",l,!0),f.disabled=u,Z(d,A(c,{})),Z(g,o),Z(p,a),f})()}),null),s})()};At(["click"]);/*!
Copyright (c) 2023 Paul Miller (paulmillr.com)
The library paulmillr-qr is dual-licensed under the Apache 2.0 OR MIT license.
You can select a license of your choice.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/const B0={newline:10,reset:27};function $Fe(r){if(!Number.isSafeInteger(r))throw new Error(`integer expected: ${r}`)}function DFe(r){if(!Number.isSafeInteger(r)||r<1||r>40)throw new Error(`Invalid version=${r}. Expected number [1..40]`)}function hf(r,e){return r.toString(2).padStart(e,"0")}function $9(r,e){const t=r%e;return t>=0?t:e+t}function Eo(r,e){return new Array(r).fill(e)}function D9(...r){let e=0;for(const n of r)e=Math.max(e,n.length);const t=[];for(let n=0;n<e;n++)for(const i of r)n>=i.length||t.push(i[n]);return new Uint8Array(t)}function M9(r,e,t){if(t<0||t+e.length>r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[t+n])return!1;return!0}function MFe(){let r,e=1/0;return{add(t,n){t>=e||(r=n,e=t)},get:()=>r,score:()=>e}}function B9(r){return{has:e=>r.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=r.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${r}`);return n})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(t=>{if($Fe(t),t<0||t>=r.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${r.length})`);return r[t]})}}}class yo{static size(e,t){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: invalid height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: invalid width=${e.width} (${typeof e.width})`);return t!==void 0&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){e=e.replace(/^\n+/g,"").replace(/\n+$/g,"");const t=e.split(String.fromCharCode(B0.newline)),n=t.length,i=new Array(n);let s;for(const o of t){const a=o.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(s&&a.length!==s)throw new Error(`Bitmap.fromString different row sizes: width=${s} cur=${a.length}`);s=a.length,i.push(a)}return s||(s=0),new yo({height:n,width:s},i)}data;height;width;constructor(e,t){const{height:n,width:i}=yo.size(e);this.data=t||Array.from({length:n},()=>Eo(i,void 0)),this.height=n,this.width=i}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: invalid x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: invalid y=${e.y}`);return e.x=$9(e.x,this.width),e.y=$9(e.y,this.height),e}rect(e,t,n){const{x:i,y:s}=this.xy(e),{height:o,width:a}=yo.size(t,this.size({x:i,y:s}));for(let c=0;c<o;c++)for(let l=0;l<a;l++)this.data[s+c][i+l]=typeof n=="function"?n({x:l,y:c},this.data[s+c][i+l]):n;return this}rectRead(e,t,n){return this.rect(e,t,(i,s)=>(n(i,s),s))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){const n=this.height+2*e,i=this.width+2*e,s=Eo(e,t),o=Array.from({length:e},()=>Eo(i,t));return new yo({height:n,width:i},[...o,...this.data.map(a=>[...s,...a,...s]),...o])}embed(e,t){return this.rect(e,t.size(),({x:n,y:i})=>t.data[i][n])}rectSlice(e,t=this.size()){const n=new yo(yo.size(t,this.size(this.xy(e))));return this.rect(e,t,({x:i,y:s},o)=>n.data[s][i]=o),n}inverse(){const{height:e,width:t}=this;return new yo({height:t,width:e}).rect({x:0,y:0},1/0,({x:i,y:s})=>this.data[i][s])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`invalid scale factor: ${e}`);const{height:t,width:n}=this;return new yo({height:e*t,width:e*n}).rect({x:0,y:0},1/0,({x:s,y:o})=>this.data[Math.floor(o/e)][Math.floor(s/e)])}clone(){return new yo(this.size()).rect({x:0,y:0},this.size(),({x:t,y:n})=>this.data[n][t])}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if(typeof t!="boolean")throw new Error(`Invalid color type=${typeof t}`)})}toString(){return this.data.map(e=>e.map(t=>t===void 0?"?":t?"X":" ").join("")).join(String.fromCharCode(B0.newline))}toASCII(){const{height:e,width:t,data:n}=this;let i="";for(let s=0;s<e;s+=2){for(let o=0;o<t;o++){const a=n[s][o],c=s+1>=e?!0:n[s+1][o];!a&&!c?i+="":!a&&c?i+="":a&&!c?i+="":a&&c&&(i+=" ")}i+=String.fromCharCode(B0.newline)}return i}toTerm(){const e=String.fromCharCode(B0.reset),t=e+"[0m",n=e+"[1;47m  "+t,i=e+"[40m  "+t;return this.data.map(s=>s.map(o=>o?i:n).join("")).join(String.fromCharCode(B0.newline))}toSVG(e=!0){let t=`<svg viewBox="0 0 ${this.width} ${this.height}" xmlns="http://www.w3.org/2000/svg">`,n="",i;return this.rectRead(0,1/0,(s,o)=>{if(!o)return;const{x:a,y:c}=s;if(!e){t+=`<rect x="${a}" y="${c}" width="1" height="1" />`;return}let l=`M${a} ${c}`;if(i){const f=`m${a-i.x} ${c-i.y}`;f.length<=l.length&&(l=f)}const u=a<10?`H${a}`:"h-1";n+=`${l}h1v1${u}Z`,i=s}),e&&(t+=`<path d="${n}"/>`),t+="</svg>",t}toGIF(){const e=a=>[a&255,a>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,(a,c)=>n.push(+(c===!0)));const i=126,s=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...Eo(3*127,0),44,0,0,0,0,...t,0,7],o=Math.floor(n.length/i);for(let a=0;a<o;a++)s.push(i+1,128,...n.slice(i*a,i*(a+1)).map(c=>+c));return s.push(n.length%i+1,128,...n.slice(o*i).map(a=>+a)),s.push(1,129,0,59),new Uint8Array(s)}toImage(e=!1){const{height:t,width:n}=this.size(),i=new Uint8Array(t*n*(e?3:4));let s=0;for(let o=0;o<t;o++)for(let a=0;a<n;a++){const c=this.data[o][a]?0:255;i[s++]=c,i[s++]=c,i[s++]=c,e||(i[s++]=255)}return{height:t,width:n,data:i}}}const N9=["low","medium","quartile","high"],L9=["numeric","alphanumeric","byte","kanji","eci"],BFe=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],NFe={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},LFe={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},vs={size:{encode:r=>21+4*(r-1),decode:r=>(r-17)/4},sizeType:r=>Math.floor((r+7)/17),alignmentPatterns(r){if(r===1)return[];const e=6,t=vs.size.encode(r)-e-1,n=t-e,i=Math.ceil(n/28);let s=Math.floor(n/i);s%2?s+=1:n%i*2>=i&&(s+=2);const o=[e];for(let a=1;a<i;a++)o.push(t-(i-a)*s);return o.push(t),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(r,e){const t=vs.ECCode[r]<<3|e;let n=t;for(let i=0;i<10;i++)n=n<<1^(n>>9)*1335;return(t<<10|n)^vs.formatMask},versionBits(r){let e=r;for(let t=0;t<12;t++)e=e<<1^(e>>11)*7973;return r<<12|e},alphabet:{numeric:B9("0123456789"),alphanumerc:B9("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits(r,e){return{numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[e][vs.sizeType(r)]},modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(r,e){const t=BFe[r-1],n=NFe[e][r-1],i=LFe[e][r-1],s=Math.floor(t/i)-n,o=i-t%i;return{words:n,numBlocks:i,shortBlocks:o,blockLen:s,capacity:(t-n*i)*8,total:(n+s)*i+i-o}}},Ak=[(r,e)=>(r+e)%2==0,(r,e)=>e%2==0,(r,e)=>r%3==0,(r,e)=>(r+e)%3==0,(r,e)=>(Math.floor(e/2)+Math.floor(r/3))%2==0,(r,e)=>r*e%2+r*e%3==0,(r,e)=>(r*e%2+r*e%3)%2==0,(r,e)=>((r+e)%2+r*e%3)%2==0],Rt={tables:(r=>{const e=Eo(256,0),t=Eo(256,0);for(let n=0,i=1;n<256;n++)e[n]=i,t[i]=n,i<<=1,i&256&&(i^=r);return{exp:e,log:t}})(285),exp:r=>Rt.tables.exp[r],log(r){if(r===0)throw new Error(`GF.log: invalid arg=${r}`);return Rt.tables.log[r]%255},mul(r,e){return r===0||e===0?0:Rt.tables.exp[(Rt.tables.log[r]+Rt.tables.log[e])%255]},add:(r,e)=>r^e,pow:(r,e)=>Rt.tables.exp[Rt.tables.log[r]*e%255],inv(r){if(r===0)throw new Error(`GF.inverse: invalid arg=${r}`);return Rt.tables.exp[255-Rt.tables.log[r]]},polynomial(r){if(r.length==0)throw new Error("GF.polymomial: invalid length");if(r[0]!==0)return r;let e=0;for(;e<r.length-1&&r[e]==0;e++);return r.slice(e)},monomial(r,e){if(r<0)throw new Error(`GF.monomial: invalid degree=${r}`);if(e==0)return[0];let t=Eo(r+1,0);return t[0]=e,Rt.polynomial(t)},degree:r=>r.length-1,coefficient:(r,e)=>r[Rt.degree(r)-e],mulPoly(r,e){if(r[0]===0||e[0]===0)return[0];const t=Eo(r.length+e.length-1,0);for(let n=0;n<r.length;n++)for(let i=0;i<e.length;i++)t[n+i]=Rt.add(t[n+i],Rt.mul(r[n],e[i]));return Rt.polynomial(t)},mulPolyScalar(r,e){if(e==0)return[0];if(e==1)return r;const t=Eo(r.length,0);for(let n=0;n<r.length;n++)t[n]=Rt.mul(r[n],e);return Rt.polynomial(t)},mulPolyMonomial(r,e,t){if(e<0)throw new Error("GF.mulPolyMonomial: invalid degree");if(t==0)return[0];const n=Eo(r.length+e,0);for(let i=0;i<r.length;i++)n[i]=Rt.mul(r[i],t);return Rt.polynomial(n)},addPoly(r,e){if(r[0]===0)return e;if(e[0]===0)return r;let t=r,n=e;t.length>n.length&&([t,n]=[n,t]);let i=Eo(n.length,0),s=n.length-t.length,o=n.slice(0,s);for(let a=0;a<o.length;a++)i[a]=o[a];for(let a=s;a<n.length;a++)i[a]=Rt.add(t[a-s],n[a]);return Rt.polynomial(i)},remainderPoly(r,e){const t=Array.from(r);for(let n=0;n<r.length-e.length+1;n++){const i=t[n];if(i!==0)for(let s=1;s<e.length;s++)e[s]!==0&&(t[n+s]=Rt.add(t[n+s],Rt.mul(e[s],i)))}return t.slice(r.length-e.length+1,t.length)},divisorPoly(r){let e=[1];for(let t=0;t<r;t++)e=Rt.mulPoly(e,[1,Rt.pow(2,t)]);return e},evalPoly(r,e){if(e==0)return Rt.coefficient(r,0);let t=r[0];for(let n=1;n<r.length;n++)t=Rt.add(Rt.mul(e,t),r[n]);return t},euclidian(r,e,t){Rt.degree(r)<Rt.degree(e)&&([r,e]=[e,r]);let n=r,i=e,s=[0],o=[1];for(;2*Rt.degree(i)>=t;){let l=n,u=s;if(n=i,s=o,n[0]===0)throw new Error("rLast[0] === 0");i=l;let f=[0];const d=Rt.inv(n[0]);for(;Rt.degree(i)>=Rt.degree(n)&&i[0]!==0;){const h=Rt.degree(i)-Rt.degree(n),g=Rt.mul(i[0],d);f=Rt.addPoly(f,Rt.monomial(h,g)),i=Rt.addPoly(i,Rt.mulPolyMonomial(n,h,g))}if(f=Rt.mulPoly(f,s),o=Rt.addPoly(f,u),Rt.degree(i)>=Rt.degree(n))throw new Error(`Division failed r: ${i}, rLast: ${n}`)}const a=Rt.coefficient(o,0);if(a==0)throw new Error("sigmaTilde(0) was zero");const c=Rt.inv(a);return[Rt.mulPolyScalar(o,c),Rt.mulPolyScalar(i,c)]}};function FFe(r){return{encode(e){const t=Rt.divisorPoly(r),n=Array.from(e);return n.push(...t.slice(0,-1).fill(0)),Uint8Array.from(Rt.remainderPoly(n,t))},decode(e){const t=e.slice(),n=Rt.polynomial(Array.from(e));let i=Eo(r,0),s=!1;for(let f=0;f<r;f++){const d=Rt.evalPoly(n,Rt.exp(f));i[i.length-1-f]=d,d!==0&&(s=!0)}if(!s)return t;i=Rt.polynomial(i);const o=Rt.monomial(r,1),[a,c]=Rt.euclidian(o,i,r),l=Eo(Rt.degree(a),0);let u=0;for(let f=1;f<256&&u<l.length;f++)Rt.evalPoly(a,f)===0&&(l[u++]=Rt.inv(f));if(u!==l.length)throw new Error("RS.decode: invalid errors number");for(let f=0;f<l.length;f++){const d=t.length-1-Rt.log(l[f]);if(d<0)throw new Error("RS.decode: invalid error location");const h=Rt.inv(l[f]);let g=1;for(let p=0;p<l.length;p++)f!==p&&(g=Rt.mul(g,Rt.add(1,Rt.mul(l[p],h))));t[d]=Rt.add(t[d],Rt.mul(Rt.evalPoly(c,h),Rt.inv(g)))}return t}}}function UFe(r,e){const{words:t,shortBlocks:n,numBlocks:i,blockLen:s,total:o}=vs.capacity(r,e),a=FFe(t);return{encode(c){const l=[],u=[];for(let g=0;g<i;g++){const p=g<n,m=s+(p?0:1);l.push(c.subarray(0,m)),u.push(a.encode(c.subarray(0,m))),c=c.subarray(m)}const f=D9(...l),d=D9(...u),h=new Uint8Array(f.length+d.length);return h.set(f),h.set(d,f.length),h},decode(c){if(c.length!==o)throw new Error(`interleave.decode: len(data)=${c.length}, total=${o}`);const l=[];for(let d=0;d<i;d++){const h=d<n;l.push(new Uint8Array(t+s+(h?0:1)))}let u=0;for(let d=0;d<s;d++)for(let h=0;h<i;h++)l[h][d]=c[u++];for(let d=n;d<i;d++)l[d][s]=c[u++];for(let d=s;d<s+t;d++)for(let h=0;h<i;h++){const g=h<n;l[h][d+(g?0:1)]=c[u++]}const f=[];for(const d of l)f.push(...Array.from(a.decode(d)).slice(0,-t));return Uint8Array.from(f)}}}function zFe(r,e,t,n=!1){const i=vs.size.encode(r);let s=new yo(i+2);const o=new yo(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);s=s.embed(0,o).embed({x:-o.width,y:0},o).embed({x:0,y:-o.height},o),s=s.rectSlice(1,i);const a=new yo(1).rect(0,1,!0).border(1,!1).border(1,!0),c=vs.alignmentPatterns(r);for(const l of c)for(const u of c)s.data[l][u]===void 0&&s.embed({x:u-2,y:l-2},a);s=s.hLine({x:0,y:6},1/0,({x:l},u)=>u===void 0?l%2==0:u).vLine({x:6,y:0},1/0,({y:l},u)=>u===void 0?l%2==0:u);{const l=vs.formatBits(e,t),u=f=>!n&&(l>>f&1)==1;for(let f=0;f<6;f++)s.data[f][8]=u(f);for(let f=6;f<8;f++)s.data[f+1][8]=u(f);for(let f=8;f<15;f++)s.data[i-15+f][8]=u(f);for(let f=0;f<8;f++)s.data[8][i-f-1]=u(f);for(let f=8;f<9;f++)s.data[8][15-f-1+1]=u(f);for(let f=9;f<15;f++)s.data[8][15-f-1]=u(f);s.data[i-8][8]=!n}if(r>=7){const l=vs.versionBits(r);for(let u=0;u<18;u+=1){const f=!n&&(l>>u&1)==1,d=Math.floor(u/3),h=u%3+i-8-3;s.data[d][h]=f,s.data[h][d]=f}}return s}function qFe(r,e,t){const n=r.height,i=Ak[e];let s=-1,o=n-1;for(let a=n-1;a>0;a-=2){for(a==6&&(a=5);;o+=s){for(let c=0;c<2;c+=1){const l=a-c;r.data[o][l]===void 0&&t(l,o,i(l,o))}if(o+s<0||o+s>=n)break}s=-s}}function jFe(r){let e="numeric";for(let t of r)if(!vs.alphabet.numeric.has(t)&&(e="alphanumeric",!vs.alphabet.alphanumerc.has(t)))return"byte";return e}function VFe(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function F9(r,e,t,n){let i="",s=t.length;if(n==="numeric"){const f=vs.alphabet.numeric.decode(t.split("")),d=f.length;for(let h=0;h<d-2;h+=3)i+=hf(f[h]*100+f[h+1]*10+f[h+2],10);d%3===1?i+=hf(f[d-1],4):d%3===2&&(i+=hf(f[d-2]*10+f[d-1],7))}else if(n==="alphanumeric"){const f=vs.alphabet.alphanumerc.decode(t.split("")),d=f.length;for(let h=0;h<d-1;h+=2)i+=hf(f[h]*45+f[h+1],11);d%2==1&&(i+=hf(f[d-1],6))}else if(n==="byte"){const f=VFe(t);s=f.length,i=Array.from(f).map(d=>hf(d,8)).join("")}else throw new Error("encode: unsupported type");const{capacity:o}=vs.capacity(r,e),a=hf(s,vs.lengthBits(r,n));let c=vs.modeBits[n]+a+i;if(c.length>o)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,o-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const l="1110110000010001";for(let f=0;c.length!==o;f++)c+=l[f%l.length];const u=Uint8Array.from(c.match(/(.{8})/g).map(f=>+`0b${f}`));return UFe(r,e).encode(u)}function U9(r,e,t,n,i=!1){const s=zFe(r,e,n,i);let o=0;const a=8*t.length;if(qFe(s,n,(c,l,u)=>{let f=!1;o<a&&(f=(t[o>>>3]>>(7-o&7)&1)!==0,o++),s.data[l][c]=f!==u}),o!==a)throw new Error("QR: bytes left after draw");return s}function KFe(r){const e=r.inverse(),t=h=>{let g=0;for(let p=0,m=1,y=void 0;p<h.length;p++)y===h[p]&&(m++,p!==h.length-1)||(m>=5&&(g+=3+(m-5)),y=h[p],m=1);return g};let n=0;r.data.forEach(h=>n+=t(h)),e.data.forEach(h=>n+=t(h));let i=0,s=r.data;const o=r.width-1,a=r.height-1;for(let h=0;h<o;h++)for(let g=0;g<a;g++){const p=h+1,m=g+1;s[h][g]===s[p][g]&&s[p][g]===s[h][m]&&s[p][g]===s[p][m]&&(i+=3)}const c=h=>{const g=[!0,!1,!0,!0,!0,!1,!0],p=[!1,!1,!1,!1],m=[...g,...p],y=[...p,...g];let v=0;for(let w=0;w<h.length;w++)M9(h,m,w)&&(v+=40),M9(h,y,w)&&(v+=40);return v};let l=0;for(const h of r.data)l+=c(h);for(const h of e.data)l+=c(h);let u=0;r.rectRead(0,1/0,(h,g)=>u+=g?1:0);const f=u/(r.height*r.width)*100,d=10*Math.floor(Math.abs(f-50)/5);return n+i+l+d}function HFe(r,e,t,n){if(n===void 0){const i=MFe();for(let s=0;s<Ak.length;s++)i.add(KFe(U9(r,e,t,s,!0)),s);n=i.get()}if(n===void 0)throw new Error("Cannot find mask");return U9(r,e,t,n)}function WFe(r){if(!N9.includes(r))throw new Error(`Invalid error correction mode=${r}. Expected: ${N9}`)}function GFe(r){if(!L9.includes(r))throw new Error(`Encoding: invalid mode=${r}. Expected: ${L9}`);if(r==="kanji"||r==="eci")throw new Error(`Encoding: ${r} is not supported (yet?).`)}function YFe(r){if(![0,1,2,3,4,5,6,7].includes(r)||!Ak[r])throw new Error(`Invalid mask=${r}. Expected number [0..7]`)}function JFe(r,e="raw",t={}){const n=t.ecc!==void 0?t.ecc:"medium";WFe(n);const i=t.encoding!==void 0?t.encoding:jFe(r);GFe(i),t.mask!==void 0&&YFe(t.mask);let s=t.version,o,a=new Error("Unknown error");if(s!==void 0)DFe(s),o=F9(s,n,r,i);else for(let u=1;u<=40;u++)try{o=F9(u,n,r,i),s=u;break}catch(f){a=f}if(!s||!o)throw a;let c=HFe(s,n,o,t.mask);c.assertDrawn();const l=t.border===void 0?2:t.border;if(!Number.isSafeInteger(l))throw new Error(`invalid border type=${typeof l}`);if(c=c.border(l,!1),t.scale!==void 0&&(c=c.scale(t.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG(t.optimize);if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}var XFe=le("<div>");const Ik=r=>{const e=Te(()=>JFe(r.payload,"svg",{border:0,ecc:r.ecc}));return(()=>{var t=XFe();return un(t,at(r,{get class(){return gr("size-64 p-3 rounded bg-zinc-950 fill-zinc-50",r.class)},get innerHTML(){return e()}}),!1,!1),t})()};var iI={exports:{}},z9;function ZFe(){return z9||(z9=1,function(r){(function(e){var t=function(ce){var me,ye=new Float64Array(16);if(ce)for(me=0;me<ce.length;me++)ye[me]=ce[me];return ye},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=t(),a=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function g(ce,me,ye,Y){ce[me]=ye>>24&255,ce[me+1]=ye>>16&255,ce[me+2]=ye>>8&255,ce[me+3]=ye&255,ce[me+4]=Y>>24&255,ce[me+5]=Y>>16&255,ce[me+6]=Y>>8&255,ce[me+7]=Y&255}function p(ce,me,ye,Y,ve){var $e,ke=0;for($e=0;$e<ve;$e++)ke|=ce[me+$e]^ye[Y+$e];return(1&ke-1>>>8)-1}function m(ce,me,ye,Y){return p(ce,me,ye,Y,16)}function y(ce,me,ye,Y){return p(ce,me,ye,Y,32)}function v(ce,me,ye,Y){for(var ve=Y[0]&255|(Y[1]&255)<<8|(Y[2]&255)<<16|(Y[3]&255)<<24,$e=ye[0]&255|(ye[1]&255)<<8|(ye[2]&255)<<16|(ye[3]&255)<<24,ke=ye[4]&255|(ye[5]&255)<<8|(ye[6]&255)<<16|(ye[7]&255)<<24,qe=ye[8]&255|(ye[9]&255)<<8|(ye[10]&255)<<16|(ye[11]&255)<<24,tt=ye[12]&255|(ye[13]&255)<<8|(ye[14]&255)<<16|(ye[15]&255)<<24,ut=Y[4]&255|(Y[5]&255)<<8|(Y[6]&255)<<16|(Y[7]&255)<<24,it=me[0]&255|(me[1]&255)<<8|(me[2]&255)<<16|(me[3]&255)<<24,cr=me[4]&255|(me[5]&255)<<8|(me[6]&255)<<16|(me[7]&255)<<24,gt=me[8]&255|(me[9]&255)<<8|(me[10]&255)<<16|(me[11]&255)<<24,Ft=me[12]&255|(me[13]&255)<<8|(me[14]&255)<<16|(me[15]&255)<<24,jt=Y[8]&255|(Y[9]&255)<<8|(Y[10]&255)<<16|(Y[11]&255)<<24,Ht=ye[16]&255|(ye[17]&255)<<8|(ye[18]&255)<<16|(ye[19]&255)<<24,ar=ye[20]&255|(ye[21]&255)<<8|(ye[22]&255)<<16|(ye[23]&255)<<24,tr=ye[24]&255|(ye[25]&255)<<8|(ye[26]&255)<<16|(ye[27]&255)<<24,ir=ye[28]&255|(ye[29]&255)<<8|(ye[30]&255)<<16|(ye[31]&255)<<24,rr=Y[12]&255|(Y[13]&255)<<8|(Y[14]&255)<<16|(Y[15]&255)<<24,It=ve,Ut=$e,xt=ke,Tt=qe,Ot=tt,bt=ut,Ue=it,ze=cr,et=gt,Ye=Ft,Je=jt,ct=Ht,Xt=ar,vr=tr,_r=ir,br=rr,Ie,Or=0;Or<20;Or+=2)Ie=It+Xt|0,Ot^=Ie<<7|Ie>>>25,Ie=Ot+It|0,et^=Ie<<9|Ie>>>23,Ie=et+Ot|0,Xt^=Ie<<13|Ie>>>19,Ie=Xt+et|0,It^=Ie<<18|Ie>>>14,Ie=bt+Ut|0,Ye^=Ie<<7|Ie>>>25,Ie=Ye+bt|0,vr^=Ie<<9|Ie>>>23,Ie=vr+Ye|0,Ut^=Ie<<13|Ie>>>19,Ie=Ut+vr|0,bt^=Ie<<18|Ie>>>14,Ie=Je+Ue|0,_r^=Ie<<7|Ie>>>25,Ie=_r+Je|0,xt^=Ie<<9|Ie>>>23,Ie=xt+_r|0,Ue^=Ie<<13|Ie>>>19,Ie=Ue+xt|0,Je^=Ie<<18|Ie>>>14,Ie=br+ct|0,Tt^=Ie<<7|Ie>>>25,Ie=Tt+br|0,ze^=Ie<<9|Ie>>>23,Ie=ze+Tt|0,ct^=Ie<<13|Ie>>>19,Ie=ct+ze|0,br^=Ie<<18|Ie>>>14,Ie=It+Tt|0,Ut^=Ie<<7|Ie>>>25,Ie=Ut+It|0,xt^=Ie<<9|Ie>>>23,Ie=xt+Ut|0,Tt^=Ie<<13|Ie>>>19,Ie=Tt+xt|0,It^=Ie<<18|Ie>>>14,Ie=bt+Ot|0,Ue^=Ie<<7|Ie>>>25,Ie=Ue+bt|0,ze^=Ie<<9|Ie>>>23,Ie=ze+Ue|0,Ot^=Ie<<13|Ie>>>19,Ie=Ot+ze|0,bt^=Ie<<18|Ie>>>14,Ie=Je+Ye|0,ct^=Ie<<7|Ie>>>25,Ie=ct+Je|0,et^=Ie<<9|Ie>>>23,Ie=et+ct|0,Ye^=Ie<<13|Ie>>>19,Ie=Ye+et|0,Je^=Ie<<18|Ie>>>14,Ie=br+_r|0,Xt^=Ie<<7|Ie>>>25,Ie=Xt+br|0,vr^=Ie<<9|Ie>>>23,Ie=vr+Xt|0,_r^=Ie<<13|Ie>>>19,Ie=_r+vr|0,br^=Ie<<18|Ie>>>14;It=It+ve|0,Ut=Ut+$e|0,xt=xt+ke|0,Tt=Tt+qe|0,Ot=Ot+tt|0,bt=bt+ut|0,Ue=Ue+it|0,ze=ze+cr|0,et=et+gt|0,Ye=Ye+Ft|0,Je=Je+jt|0,ct=ct+Ht|0,Xt=Xt+ar|0,vr=vr+tr|0,_r=_r+ir|0,br=br+rr|0,ce[0]=It>>>0&255,ce[1]=It>>>8&255,ce[2]=It>>>16&255,ce[3]=It>>>24&255,ce[4]=Ut>>>0&255,ce[5]=Ut>>>8&255,ce[6]=Ut>>>16&255,ce[7]=Ut>>>24&255,ce[8]=xt>>>0&255,ce[9]=xt>>>8&255,ce[10]=xt>>>16&255,ce[11]=xt>>>24&255,ce[12]=Tt>>>0&255,ce[13]=Tt>>>8&255,ce[14]=Tt>>>16&255,ce[15]=Tt>>>24&255,ce[16]=Ot>>>0&255,ce[17]=Ot>>>8&255,ce[18]=Ot>>>16&255,ce[19]=Ot>>>24&255,ce[20]=bt>>>0&255,ce[21]=bt>>>8&255,ce[22]=bt>>>16&255,ce[23]=bt>>>24&255,ce[24]=Ue>>>0&255,ce[25]=Ue>>>8&255,ce[26]=Ue>>>16&255,ce[27]=Ue>>>24&255,ce[28]=ze>>>0&255,ce[29]=ze>>>8&255,ce[30]=ze>>>16&255,ce[31]=ze>>>24&255,ce[32]=et>>>0&255,ce[33]=et>>>8&255,ce[34]=et>>>16&255,ce[35]=et>>>24&255,ce[36]=Ye>>>0&255,ce[37]=Ye>>>8&255,ce[38]=Ye>>>16&255,ce[39]=Ye>>>24&255,ce[40]=Je>>>0&255,ce[41]=Je>>>8&255,ce[42]=Je>>>16&255,ce[43]=Je>>>24&255,ce[44]=ct>>>0&255,ce[45]=ct>>>8&255,ce[46]=ct>>>16&255,ce[47]=ct>>>24&255,ce[48]=Xt>>>0&255,ce[49]=Xt>>>8&255,ce[50]=Xt>>>16&255,ce[51]=Xt>>>24&255,ce[52]=vr>>>0&255,ce[53]=vr>>>8&255,ce[54]=vr>>>16&255,ce[55]=vr>>>24&255,ce[56]=_r>>>0&255,ce[57]=_r>>>8&255,ce[58]=_r>>>16&255,ce[59]=_r>>>24&255,ce[60]=br>>>0&255,ce[61]=br>>>8&255,ce[62]=br>>>16&255,ce[63]=br>>>24&255}function w(ce,me,ye,Y){for(var ve=Y[0]&255|(Y[1]&255)<<8|(Y[2]&255)<<16|(Y[3]&255)<<24,$e=ye[0]&255|(ye[1]&255)<<8|(ye[2]&255)<<16|(ye[3]&255)<<24,ke=ye[4]&255|(ye[5]&255)<<8|(ye[6]&255)<<16|(ye[7]&255)<<24,qe=ye[8]&255|(ye[9]&255)<<8|(ye[10]&255)<<16|(ye[11]&255)<<24,tt=ye[12]&255|(ye[13]&255)<<8|(ye[14]&255)<<16|(ye[15]&255)<<24,ut=Y[4]&255|(Y[5]&255)<<8|(Y[6]&255)<<16|(Y[7]&255)<<24,it=me[0]&255|(me[1]&255)<<8|(me[2]&255)<<16|(me[3]&255)<<24,cr=me[4]&255|(me[5]&255)<<8|(me[6]&255)<<16|(me[7]&255)<<24,gt=me[8]&255|(me[9]&255)<<8|(me[10]&255)<<16|(me[11]&255)<<24,Ft=me[12]&255|(me[13]&255)<<8|(me[14]&255)<<16|(me[15]&255)<<24,jt=Y[8]&255|(Y[9]&255)<<8|(Y[10]&255)<<16|(Y[11]&255)<<24,Ht=ye[16]&255|(ye[17]&255)<<8|(ye[18]&255)<<16|(ye[19]&255)<<24,ar=ye[20]&255|(ye[21]&255)<<8|(ye[22]&255)<<16|(ye[23]&255)<<24,tr=ye[24]&255|(ye[25]&255)<<8|(ye[26]&255)<<16|(ye[27]&255)<<24,ir=ye[28]&255|(ye[29]&255)<<8|(ye[30]&255)<<16|(ye[31]&255)<<24,rr=Y[12]&255|(Y[13]&255)<<8|(Y[14]&255)<<16|(Y[15]&255)<<24,It=ve,Ut=$e,xt=ke,Tt=qe,Ot=tt,bt=ut,Ue=it,ze=cr,et=gt,Ye=Ft,Je=jt,ct=Ht,Xt=ar,vr=tr,_r=ir,br=rr,Ie,Or=0;Or<20;Or+=2)Ie=It+Xt|0,Ot^=Ie<<7|Ie>>>25,Ie=Ot+It|0,et^=Ie<<9|Ie>>>23,Ie=et+Ot|0,Xt^=Ie<<13|Ie>>>19,Ie=Xt+et|0,It^=Ie<<18|Ie>>>14,Ie=bt+Ut|0,Ye^=Ie<<7|Ie>>>25,Ie=Ye+bt|0,vr^=Ie<<9|Ie>>>23,Ie=vr+Ye|0,Ut^=Ie<<13|Ie>>>19,Ie=Ut+vr|0,bt^=Ie<<18|Ie>>>14,Ie=Je+Ue|0,_r^=Ie<<7|Ie>>>25,Ie=_r+Je|0,xt^=Ie<<9|Ie>>>23,Ie=xt+_r|0,Ue^=Ie<<13|Ie>>>19,Ie=Ue+xt|0,Je^=Ie<<18|Ie>>>14,Ie=br+ct|0,Tt^=Ie<<7|Ie>>>25,Ie=Tt+br|0,ze^=Ie<<9|Ie>>>23,Ie=ze+Tt|0,ct^=Ie<<13|Ie>>>19,Ie=ct+ze|0,br^=Ie<<18|Ie>>>14,Ie=It+Tt|0,Ut^=Ie<<7|Ie>>>25,Ie=Ut+It|0,xt^=Ie<<9|Ie>>>23,Ie=xt+Ut|0,Tt^=Ie<<13|Ie>>>19,Ie=Tt+xt|0,It^=Ie<<18|Ie>>>14,Ie=bt+Ot|0,Ue^=Ie<<7|Ie>>>25,Ie=Ue+bt|0,ze^=Ie<<9|Ie>>>23,Ie=ze+Ue|0,Ot^=Ie<<13|Ie>>>19,Ie=Ot+ze|0,bt^=Ie<<18|Ie>>>14,Ie=Je+Ye|0,ct^=Ie<<7|Ie>>>25,Ie=ct+Je|0,et^=Ie<<9|Ie>>>23,Ie=et+ct|0,Ye^=Ie<<13|Ie>>>19,Ie=Ye+et|0,Je^=Ie<<18|Ie>>>14,Ie=br+_r|0,Xt^=Ie<<7|Ie>>>25,Ie=Xt+br|0,vr^=Ie<<9|Ie>>>23,Ie=vr+Xt|0,_r^=Ie<<13|Ie>>>19,Ie=_r+vr|0,br^=Ie<<18|Ie>>>14;ce[0]=It>>>0&255,ce[1]=It>>>8&255,ce[2]=It>>>16&255,ce[3]=It>>>24&255,ce[4]=bt>>>0&255,ce[5]=bt>>>8&255,ce[6]=bt>>>16&255,ce[7]=bt>>>24&255,ce[8]=Je>>>0&255,ce[9]=Je>>>8&255,ce[10]=Je>>>16&255,ce[11]=Je>>>24&255,ce[12]=br>>>0&255,ce[13]=br>>>8&255,ce[14]=br>>>16&255,ce[15]=br>>>24&255,ce[16]=Ue>>>0&255,ce[17]=Ue>>>8&255,ce[18]=Ue>>>16&255,ce[19]=Ue>>>24&255,ce[20]=ze>>>0&255,ce[21]=ze>>>8&255,ce[22]=ze>>>16&255,ce[23]=ze>>>24&255,ce[24]=et>>>0&255,ce[25]=et>>>8&255,ce[26]=et>>>16&255,ce[27]=et>>>24&255,ce[28]=Ye>>>0&255,ce[29]=Ye>>>8&255,ce[30]=Ye>>>16&255,ce[31]=Ye>>>24&255}function _(ce,me,ye,Y){v(ce,me,ye,Y)}function x(ce,me,ye,Y){w(ce,me,ye,Y)}var E=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(ce,me,ye,Y,ve,$e,ke){var qe=new Uint8Array(16),tt=new Uint8Array(64),ut,it;for(it=0;it<16;it++)qe[it]=0;for(it=0;it<8;it++)qe[it]=$e[it];for(;ve>=64;){for(_(tt,qe,ke,E),it=0;it<64;it++)ce[me+it]=ye[Y+it]^tt[it];for(ut=1,it=8;it<16;it++)ut=ut+(qe[it]&255)|0,qe[it]=ut&255,ut>>>=8;ve-=64,me+=64,Y+=64}if(ve>0)for(_(tt,qe,ke,E),it=0;it<ve;it++)ce[me+it]=ye[Y+it]^tt[it];return 0}function T(ce,me,ye,Y,ve){var $e=new Uint8Array(16),ke=new Uint8Array(64),qe,tt;for(tt=0;tt<16;tt++)$e[tt]=0;for(tt=0;tt<8;tt++)$e[tt]=Y[tt];for(;ye>=64;){for(_(ke,$e,ve,E),tt=0;tt<64;tt++)ce[me+tt]=ke[tt];for(qe=1,tt=8;tt<16;tt++)qe=qe+($e[tt]&255)|0,$e[tt]=qe&255,qe>>>=8;ye-=64,me+=64}if(ye>0)for(_(ke,$e,ve,E),tt=0;tt<ye;tt++)ce[me+tt]=ke[tt];return 0}function C(ce,me,ye,Y,ve){var $e=new Uint8Array(32);x($e,Y,ve,E);for(var ke=new Uint8Array(8),qe=0;qe<8;qe++)ke[qe]=Y[qe+16];return T(ce,me,ye,ke,$e)}function P(ce,me,ye,Y,ve,$e,ke){var qe=new Uint8Array(32);x(qe,$e,ke,E);for(var tt=new Uint8Array(8),ut=0;ut<8;ut++)tt[ut]=$e[ut+16];return S(ce,me,ye,Y,ve,tt,qe)}var V=function(ce){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var me,ye,Y,ve,$e,ke,qe,tt;me=ce[0]&255|(ce[1]&255)<<8,this.r[0]=me&8191,ye=ce[2]&255|(ce[3]&255)<<8,this.r[1]=(me>>>13|ye<<3)&8191,Y=ce[4]&255|(ce[5]&255)<<8,this.r[2]=(ye>>>10|Y<<6)&7939,ve=ce[6]&255|(ce[7]&255)<<8,this.r[3]=(Y>>>7|ve<<9)&8191,$e=ce[8]&255|(ce[9]&255)<<8,this.r[4]=(ve>>>4|$e<<12)&255,this.r[5]=$e>>>1&8190,ke=ce[10]&255|(ce[11]&255)<<8,this.r[6]=($e>>>14|ke<<2)&8191,qe=ce[12]&255|(ce[13]&255)<<8,this.r[7]=(ke>>>11|qe<<5)&8065,tt=ce[14]&255|(ce[15]&255)<<8,this.r[8]=(qe>>>8|tt<<8)&8191,this.r[9]=tt>>>5&127,this.pad[0]=ce[16]&255|(ce[17]&255)<<8,this.pad[1]=ce[18]&255|(ce[19]&255)<<8,this.pad[2]=ce[20]&255|(ce[21]&255)<<8,this.pad[3]=ce[22]&255|(ce[23]&255)<<8,this.pad[4]=ce[24]&255|(ce[25]&255)<<8,this.pad[5]=ce[26]&255|(ce[27]&255)<<8,this.pad[6]=ce[28]&255|(ce[29]&255)<<8,this.pad[7]=ce[30]&255|(ce[31]&255)<<8};V.prototype.blocks=function(ce,me,ye){for(var Y=this.fin?0:2048,ve,$e,ke,qe,tt,ut,it,cr,gt,Ft,jt,Ht,ar,tr,ir,rr,It,Ut,xt,Tt=this.h[0],Ot=this.h[1],bt=this.h[2],Ue=this.h[3],ze=this.h[4],et=this.h[5],Ye=this.h[6],Je=this.h[7],ct=this.h[8],Xt=this.h[9],vr=this.r[0],_r=this.r[1],br=this.r[2],Ie=this.r[3],Or=this.r[4],Wr=this.r[5],Gr=this.r[6],Tr=this.r[7],Vr=this.r[8],Kr=this.r[9];ye>=16;)ve=ce[me+0]&255|(ce[me+1]&255)<<8,Tt+=ve&8191,$e=ce[me+2]&255|(ce[me+3]&255)<<8,Ot+=(ve>>>13|$e<<3)&8191,ke=ce[me+4]&255|(ce[me+5]&255)<<8,bt+=($e>>>10|ke<<6)&8191,qe=ce[me+6]&255|(ce[me+7]&255)<<8,Ue+=(ke>>>7|qe<<9)&8191,tt=ce[me+8]&255|(ce[me+9]&255)<<8,ze+=(qe>>>4|tt<<12)&8191,et+=tt>>>1&8191,ut=ce[me+10]&255|(ce[me+11]&255)<<8,Ye+=(tt>>>14|ut<<2)&8191,it=ce[me+12]&255|(ce[me+13]&255)<<8,Je+=(ut>>>11|it<<5)&8191,cr=ce[me+14]&255|(ce[me+15]&255)<<8,ct+=(it>>>8|cr<<8)&8191,Xt+=cr>>>5|Y,gt=0,Ft=gt,Ft+=Tt*vr,Ft+=Ot*(5*Kr),Ft+=bt*(5*Vr),Ft+=Ue*(5*Tr),Ft+=ze*(5*Gr),gt=Ft>>>13,Ft&=8191,Ft+=et*(5*Wr),Ft+=Ye*(5*Or),Ft+=Je*(5*Ie),Ft+=ct*(5*br),Ft+=Xt*(5*_r),gt+=Ft>>>13,Ft&=8191,jt=gt,jt+=Tt*_r,jt+=Ot*vr,jt+=bt*(5*Kr),jt+=Ue*(5*Vr),jt+=ze*(5*Tr),gt=jt>>>13,jt&=8191,jt+=et*(5*Gr),jt+=Ye*(5*Wr),jt+=Je*(5*Or),jt+=ct*(5*Ie),jt+=Xt*(5*br),gt+=jt>>>13,jt&=8191,Ht=gt,Ht+=Tt*br,Ht+=Ot*_r,Ht+=bt*vr,Ht+=Ue*(5*Kr),Ht+=ze*(5*Vr),gt=Ht>>>13,Ht&=8191,Ht+=et*(5*Tr),Ht+=Ye*(5*Gr),Ht+=Je*(5*Wr),Ht+=ct*(5*Or),Ht+=Xt*(5*Ie),gt+=Ht>>>13,Ht&=8191,ar=gt,ar+=Tt*Ie,ar+=Ot*br,ar+=bt*_r,ar+=Ue*vr,ar+=ze*(5*Kr),gt=ar>>>13,ar&=8191,ar+=et*(5*Vr),ar+=Ye*(5*Tr),ar+=Je*(5*Gr),ar+=ct*(5*Wr),ar+=Xt*(5*Or),gt+=ar>>>13,ar&=8191,tr=gt,tr+=Tt*Or,tr+=Ot*Ie,tr+=bt*br,tr+=Ue*_r,tr+=ze*vr,gt=tr>>>13,tr&=8191,tr+=et*(5*Kr),tr+=Ye*(5*Vr),tr+=Je*(5*Tr),tr+=ct*(5*Gr),tr+=Xt*(5*Wr),gt+=tr>>>13,tr&=8191,ir=gt,ir+=Tt*Wr,ir+=Ot*Or,ir+=bt*Ie,ir+=Ue*br,ir+=ze*_r,gt=ir>>>13,ir&=8191,ir+=et*vr,ir+=Ye*(5*Kr),ir+=Je*(5*Vr),ir+=ct*(5*Tr),ir+=Xt*(5*Gr),gt+=ir>>>13,ir&=8191,rr=gt,rr+=Tt*Gr,rr+=Ot*Wr,rr+=bt*Or,rr+=Ue*Ie,rr+=ze*br,gt=rr>>>13,rr&=8191,rr+=et*_r,rr+=Ye*vr,rr+=Je*(5*Kr),rr+=ct*(5*Vr),rr+=Xt*(5*Tr),gt+=rr>>>13,rr&=8191,It=gt,It+=Tt*Tr,It+=Ot*Gr,It+=bt*Wr,It+=Ue*Or,It+=ze*Ie,gt=It>>>13,It&=8191,It+=et*br,It+=Ye*_r,It+=Je*vr,It+=ct*(5*Kr),It+=Xt*(5*Vr),gt+=It>>>13,It&=8191,Ut=gt,Ut+=Tt*Vr,Ut+=Ot*Tr,Ut+=bt*Gr,Ut+=Ue*Wr,Ut+=ze*Or,gt=Ut>>>13,Ut&=8191,Ut+=et*Ie,Ut+=Ye*br,Ut+=Je*_r,Ut+=ct*vr,Ut+=Xt*(5*Kr),gt+=Ut>>>13,Ut&=8191,xt=gt,xt+=Tt*Kr,xt+=Ot*Vr,xt+=bt*Tr,xt+=Ue*Gr,xt+=ze*Wr,gt=xt>>>13,xt&=8191,xt+=et*Or,xt+=Ye*Ie,xt+=Je*br,xt+=ct*_r,xt+=Xt*vr,gt+=xt>>>13,xt&=8191,gt=(gt<<2)+gt|0,gt=gt+Ft|0,Ft=gt&8191,gt=gt>>>13,jt+=gt,Tt=Ft,Ot=jt,bt=Ht,Ue=ar,ze=tr,et=ir,Ye=rr,Je=It,ct=Ut,Xt=xt,me+=16,ye-=16;this.h[0]=Tt,this.h[1]=Ot,this.h[2]=bt,this.h[3]=Ue,this.h[4]=ze,this.h[5]=et,this.h[6]=Ye,this.h[7]=Je,this.h[8]=ct,this.h[9]=Xt},V.prototype.finish=function(ce,me){var ye=new Uint16Array(10),Y,ve,$e,ke;if(this.leftover){for(ke=this.leftover,this.buffer[ke++]=1;ke<16;ke++)this.buffer[ke]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(Y=this.h[1]>>>13,this.h[1]&=8191,ke=2;ke<10;ke++)this.h[ke]+=Y,Y=this.h[ke]>>>13,this.h[ke]&=8191;for(this.h[0]+=Y*5,Y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=Y,Y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=Y,ye[0]=this.h[0]+5,Y=ye[0]>>>13,ye[0]&=8191,ke=1;ke<10;ke++)ye[ke]=this.h[ke]+Y,Y=ye[ke]>>>13,ye[ke]&=8191;for(ye[9]-=8192,ve=(Y^1)-1,ke=0;ke<10;ke++)ye[ke]&=ve;for(ve=~ve,ke=0;ke<10;ke++)this.h[ke]=this.h[ke]&ve|ye[ke];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,$e=this.h[0]+this.pad[0],this.h[0]=$e&65535,ke=1;ke<8;ke++)$e=(this.h[ke]+this.pad[ke]|0)+($e>>>16)|0,this.h[ke]=$e&65535;ce[me+0]=this.h[0]>>>0&255,ce[me+1]=this.h[0]>>>8&255,ce[me+2]=this.h[1]>>>0&255,ce[me+3]=this.h[1]>>>8&255,ce[me+4]=this.h[2]>>>0&255,ce[me+5]=this.h[2]>>>8&255,ce[me+6]=this.h[3]>>>0&255,ce[me+7]=this.h[3]>>>8&255,ce[me+8]=this.h[4]>>>0&255,ce[me+9]=this.h[4]>>>8&255,ce[me+10]=this.h[5]>>>0&255,ce[me+11]=this.h[5]>>>8&255,ce[me+12]=this.h[6]>>>0&255,ce[me+13]=this.h[6]>>>8&255,ce[me+14]=this.h[7]>>>0&255,ce[me+15]=this.h[7]>>>8&255},V.prototype.update=function(ce,me,ye){var Y,ve;if(this.leftover){for(ve=16-this.leftover,ve>ye&&(ve=ye),Y=0;Y<ve;Y++)this.buffer[this.leftover+Y]=ce[me+Y];if(ye-=ve,me+=ve,this.leftover+=ve,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(ye>=16&&(ve=ye-ye%16,this.blocks(ce,me,ve),me+=ve,ye-=ve),ye){for(Y=0;Y<ye;Y++)this.buffer[this.leftover+Y]=ce[me+Y];this.leftover+=ye}};function L(ce,me,ye,Y,ve,$e){var ke=new V($e);return ke.update(ye,Y,ve),ke.finish(ce,me),0}function D(ce,me,ye,Y,ve,$e){var ke=new Uint8Array(16);return L(ke,0,ye,Y,ve,$e),m(ce,me,ke,0)}function b(ce,me,ye,Y,ve){var $e;if(ye<32)return-1;for(P(ce,0,me,0,ye,Y,ve),L(ce,16,ce,32,ye-32,ce),$e=0;$e<16;$e++)ce[$e]=0;return 0}function I(ce,me,ye,Y,ve){var $e,ke=new Uint8Array(32);if(ye<32||(C(ke,0,32,Y,ve),D(me,16,me,32,ye-32,ke)!==0))return-1;for(P(ce,0,me,0,ye,Y,ve),$e=0;$e<32;$e++)ce[$e]=0;return 0}function B(ce,me){var ye;for(ye=0;ye<16;ye++)ce[ye]=me[ye]|0}function F(ce){var me,ye,Y=1;for(me=0;me<16;me++)ye=ce[me]+Y+65535,Y=Math.floor(ye/65536),ce[me]=ye-Y*65536;ce[0]+=Y-1+37*(Y-1)}function z(ce,me,ye){for(var Y,ve=~(ye-1),$e=0;$e<16;$e++)Y=ve&(ce[$e]^me[$e]),ce[$e]^=Y,me[$e]^=Y}function G(ce,me){var ye,Y,ve,$e=t(),ke=t();for(ye=0;ye<16;ye++)ke[ye]=me[ye];for(F(ke),F(ke),F(ke),Y=0;Y<2;Y++){for($e[0]=ke[0]-65517,ye=1;ye<15;ye++)$e[ye]=ke[ye]-65535-($e[ye-1]>>16&1),$e[ye-1]&=65535;$e[15]=ke[15]-32767-($e[14]>>16&1),ve=$e[15]>>16&1,$e[14]&=65535,z(ke,$e,1-ve)}for(ye=0;ye<16;ye++)ce[2*ye]=ke[ye]&255,ce[2*ye+1]=ke[ye]>>8}function Q(ce,me){var ye=new Uint8Array(32),Y=new Uint8Array(32);return G(ye,ce),G(Y,me),y(ye,0,Y,0)}function X(ce){var me=new Uint8Array(32);return G(me,ce),me[0]&1}function O(ce,me){var ye;for(ye=0;ye<16;ye++)ce[ye]=me[2*ye]+(me[2*ye+1]<<8);ce[15]&=32767}function R(ce,me,ye){for(var Y=0;Y<16;Y++)ce[Y]=me[Y]+ye[Y]}function M(ce,me,ye){for(var Y=0;Y<16;Y++)ce[Y]=me[Y]-ye[Y]}function k(ce,me,ye){var Y,ve,$e=0,ke=0,qe=0,tt=0,ut=0,it=0,cr=0,gt=0,Ft=0,jt=0,Ht=0,ar=0,tr=0,ir=0,rr=0,It=0,Ut=0,xt=0,Tt=0,Ot=0,bt=0,Ue=0,ze=0,et=0,Ye=0,Je=0,ct=0,Xt=0,vr=0,_r=0,br=0,Ie=ye[0],Or=ye[1],Wr=ye[2],Gr=ye[3],Tr=ye[4],Vr=ye[5],Kr=ye[6],Yn=ye[7],nn=ye[8],Fn=ye[9],Un=ye[10],zn=ye[11],gi=ye[12],rs=ye[13],ns=ye[14],is=ye[15];Y=me[0],$e+=Y*Ie,ke+=Y*Or,qe+=Y*Wr,tt+=Y*Gr,ut+=Y*Tr,it+=Y*Vr,cr+=Y*Kr,gt+=Y*Yn,Ft+=Y*nn,jt+=Y*Fn,Ht+=Y*Un,ar+=Y*zn,tr+=Y*gi,ir+=Y*rs,rr+=Y*ns,It+=Y*is,Y=me[1],ke+=Y*Ie,qe+=Y*Or,tt+=Y*Wr,ut+=Y*Gr,it+=Y*Tr,cr+=Y*Vr,gt+=Y*Kr,Ft+=Y*Yn,jt+=Y*nn,Ht+=Y*Fn,ar+=Y*Un,tr+=Y*zn,ir+=Y*gi,rr+=Y*rs,It+=Y*ns,Ut+=Y*is,Y=me[2],qe+=Y*Ie,tt+=Y*Or,ut+=Y*Wr,it+=Y*Gr,cr+=Y*Tr,gt+=Y*Vr,Ft+=Y*Kr,jt+=Y*Yn,Ht+=Y*nn,ar+=Y*Fn,tr+=Y*Un,ir+=Y*zn,rr+=Y*gi,It+=Y*rs,Ut+=Y*ns,xt+=Y*is,Y=me[3],tt+=Y*Ie,ut+=Y*Or,it+=Y*Wr,cr+=Y*Gr,gt+=Y*Tr,Ft+=Y*Vr,jt+=Y*Kr,Ht+=Y*Yn,ar+=Y*nn,tr+=Y*Fn,ir+=Y*Un,rr+=Y*zn,It+=Y*gi,Ut+=Y*rs,xt+=Y*ns,Tt+=Y*is,Y=me[4],ut+=Y*Ie,it+=Y*Or,cr+=Y*Wr,gt+=Y*Gr,Ft+=Y*Tr,jt+=Y*Vr,Ht+=Y*Kr,ar+=Y*Yn,tr+=Y*nn,ir+=Y*Fn,rr+=Y*Un,It+=Y*zn,Ut+=Y*gi,xt+=Y*rs,Tt+=Y*ns,Ot+=Y*is,Y=me[5],it+=Y*Ie,cr+=Y*Or,gt+=Y*Wr,Ft+=Y*Gr,jt+=Y*Tr,Ht+=Y*Vr,ar+=Y*Kr,tr+=Y*Yn,ir+=Y*nn,rr+=Y*Fn,It+=Y*Un,Ut+=Y*zn,xt+=Y*gi,Tt+=Y*rs,Ot+=Y*ns,bt+=Y*is,Y=me[6],cr+=Y*Ie,gt+=Y*Or,Ft+=Y*Wr,jt+=Y*Gr,Ht+=Y*Tr,ar+=Y*Vr,tr+=Y*Kr,ir+=Y*Yn,rr+=Y*nn,It+=Y*Fn,Ut+=Y*Un,xt+=Y*zn,Tt+=Y*gi,Ot+=Y*rs,bt+=Y*ns,Ue+=Y*is,Y=me[7],gt+=Y*Ie,Ft+=Y*Or,jt+=Y*Wr,Ht+=Y*Gr,ar+=Y*Tr,tr+=Y*Vr,ir+=Y*Kr,rr+=Y*Yn,It+=Y*nn,Ut+=Y*Fn,xt+=Y*Un,Tt+=Y*zn,Ot+=Y*gi,bt+=Y*rs,Ue+=Y*ns,ze+=Y*is,Y=me[8],Ft+=Y*Ie,jt+=Y*Or,Ht+=Y*Wr,ar+=Y*Gr,tr+=Y*Tr,ir+=Y*Vr,rr+=Y*Kr,It+=Y*Yn,Ut+=Y*nn,xt+=Y*Fn,Tt+=Y*Un,Ot+=Y*zn,bt+=Y*gi,Ue+=Y*rs,ze+=Y*ns,et+=Y*is,Y=me[9],jt+=Y*Ie,Ht+=Y*Or,ar+=Y*Wr,tr+=Y*Gr,ir+=Y*Tr,rr+=Y*Vr,It+=Y*Kr,Ut+=Y*Yn,xt+=Y*nn,Tt+=Y*Fn,Ot+=Y*Un,bt+=Y*zn,Ue+=Y*gi,ze+=Y*rs,et+=Y*ns,Ye+=Y*is,Y=me[10],Ht+=Y*Ie,ar+=Y*Or,tr+=Y*Wr,ir+=Y*Gr,rr+=Y*Tr,It+=Y*Vr,Ut+=Y*Kr,xt+=Y*Yn,Tt+=Y*nn,Ot+=Y*Fn,bt+=Y*Un,Ue+=Y*zn,ze+=Y*gi,et+=Y*rs,Ye+=Y*ns,Je+=Y*is,Y=me[11],ar+=Y*Ie,tr+=Y*Or,ir+=Y*Wr,rr+=Y*Gr,It+=Y*Tr,Ut+=Y*Vr,xt+=Y*Kr,Tt+=Y*Yn,Ot+=Y*nn,bt+=Y*Fn,Ue+=Y*Un,ze+=Y*zn,et+=Y*gi,Ye+=Y*rs,Je+=Y*ns,ct+=Y*is,Y=me[12],tr+=Y*Ie,ir+=Y*Or,rr+=Y*Wr,It+=Y*Gr,Ut+=Y*Tr,xt+=Y*Vr,Tt+=Y*Kr,Ot+=Y*Yn,bt+=Y*nn,Ue+=Y*Fn,ze+=Y*Un,et+=Y*zn,Ye+=Y*gi,Je+=Y*rs,ct+=Y*ns,Xt+=Y*is,Y=me[13],ir+=Y*Ie,rr+=Y*Or,It+=Y*Wr,Ut+=Y*Gr,xt+=Y*Tr,Tt+=Y*Vr,Ot+=Y*Kr,bt+=Y*Yn,Ue+=Y*nn,ze+=Y*Fn,et+=Y*Un,Ye+=Y*zn,Je+=Y*gi,ct+=Y*rs,Xt+=Y*ns,vr+=Y*is,Y=me[14],rr+=Y*Ie,It+=Y*Or,Ut+=Y*Wr,xt+=Y*Gr,Tt+=Y*Tr,Ot+=Y*Vr,bt+=Y*Kr,Ue+=Y*Yn,ze+=Y*nn,et+=Y*Fn,Ye+=Y*Un,Je+=Y*zn,ct+=Y*gi,Xt+=Y*rs,vr+=Y*ns,_r+=Y*is,Y=me[15],It+=Y*Ie,Ut+=Y*Or,xt+=Y*Wr,Tt+=Y*Gr,Ot+=Y*Tr,bt+=Y*Vr,Ue+=Y*Kr,ze+=Y*Yn,et+=Y*nn,Ye+=Y*Fn,Je+=Y*Un,ct+=Y*zn,Xt+=Y*gi,vr+=Y*rs,_r+=Y*ns,br+=Y*is,$e+=38*Ut,ke+=38*xt,qe+=38*Tt,tt+=38*Ot,ut+=38*bt,it+=38*Ue,cr+=38*ze,gt+=38*et,Ft+=38*Ye,jt+=38*Je,Ht+=38*ct,ar+=38*Xt,tr+=38*vr,ir+=38*_r,rr+=38*br,ve=1,Y=$e+ve+65535,ve=Math.floor(Y/65536),$e=Y-ve*65536,Y=ke+ve+65535,ve=Math.floor(Y/65536),ke=Y-ve*65536,Y=qe+ve+65535,ve=Math.floor(Y/65536),qe=Y-ve*65536,Y=tt+ve+65535,ve=Math.floor(Y/65536),tt=Y-ve*65536,Y=ut+ve+65535,ve=Math.floor(Y/65536),ut=Y-ve*65536,Y=it+ve+65535,ve=Math.floor(Y/65536),it=Y-ve*65536,Y=cr+ve+65535,ve=Math.floor(Y/65536),cr=Y-ve*65536,Y=gt+ve+65535,ve=Math.floor(Y/65536),gt=Y-ve*65536,Y=Ft+ve+65535,ve=Math.floor(Y/65536),Ft=Y-ve*65536,Y=jt+ve+65535,ve=Math.floor(Y/65536),jt=Y-ve*65536,Y=Ht+ve+65535,ve=Math.floor(Y/65536),Ht=Y-ve*65536,Y=ar+ve+65535,ve=Math.floor(Y/65536),ar=Y-ve*65536,Y=tr+ve+65535,ve=Math.floor(Y/65536),tr=Y-ve*65536,Y=ir+ve+65535,ve=Math.floor(Y/65536),ir=Y-ve*65536,Y=rr+ve+65535,ve=Math.floor(Y/65536),rr=Y-ve*65536,Y=It+ve+65535,ve=Math.floor(Y/65536),It=Y-ve*65536,$e+=ve-1+37*(ve-1),ve=1,Y=$e+ve+65535,ve=Math.floor(Y/65536),$e=Y-ve*65536,Y=ke+ve+65535,ve=Math.floor(Y/65536),ke=Y-ve*65536,Y=qe+ve+65535,ve=Math.floor(Y/65536),qe=Y-ve*65536,Y=tt+ve+65535,ve=Math.floor(Y/65536),tt=Y-ve*65536,Y=ut+ve+65535,ve=Math.floor(Y/65536),ut=Y-ve*65536,Y=it+ve+65535,ve=Math.floor(Y/65536),it=Y-ve*65536,Y=cr+ve+65535,ve=Math.floor(Y/65536),cr=Y-ve*65536,Y=gt+ve+65535,ve=Math.floor(Y/65536),gt=Y-ve*65536,Y=Ft+ve+65535,ve=Math.floor(Y/65536),Ft=Y-ve*65536,Y=jt+ve+65535,ve=Math.floor(Y/65536),jt=Y-ve*65536,Y=Ht+ve+65535,ve=Math.floor(Y/65536),Ht=Y-ve*65536,Y=ar+ve+65535,ve=Math.floor(Y/65536),ar=Y-ve*65536,Y=tr+ve+65535,ve=Math.floor(Y/65536),tr=Y-ve*65536,Y=ir+ve+65535,ve=Math.floor(Y/65536),ir=Y-ve*65536,Y=rr+ve+65535,ve=Math.floor(Y/65536),rr=Y-ve*65536,Y=It+ve+65535,ve=Math.floor(Y/65536),It=Y-ve*65536,$e+=ve-1+37*(ve-1),ce[0]=$e,ce[1]=ke,ce[2]=qe,ce[3]=tt,ce[4]=ut,ce[5]=it,ce[6]=cr,ce[7]=gt,ce[8]=Ft,ce[9]=jt,ce[10]=Ht,ce[11]=ar,ce[12]=tr,ce[13]=ir,ce[14]=rr,ce[15]=It}function j(ce,me){k(ce,me,me)}function te(ce,me){var ye=t(),Y;for(Y=0;Y<16;Y++)ye[Y]=me[Y];for(Y=253;Y>=0;Y--)j(ye,ye),Y!==2&&Y!==4&&k(ye,ye,me);for(Y=0;Y<16;Y++)ce[Y]=ye[Y]}function ae(ce,me){var ye=t(),Y;for(Y=0;Y<16;Y++)ye[Y]=me[Y];for(Y=250;Y>=0;Y--)j(ye,ye),Y!==1&&k(ye,ye,me);for(Y=0;Y<16;Y++)ce[Y]=ye[Y]}function he(ce,me,ye){var Y=new Uint8Array(32),ve=new Float64Array(80),$e,ke,qe=t(),tt=t(),ut=t(),it=t(),cr=t(),gt=t();for(ke=0;ke<31;ke++)Y[ke]=me[ke];for(Y[31]=me[31]&127|64,Y[0]&=248,O(ve,ye),ke=0;ke<16;ke++)tt[ke]=ve[ke],it[ke]=qe[ke]=ut[ke]=0;for(qe[0]=it[0]=1,ke=254;ke>=0;--ke)$e=Y[ke>>>3]>>>(ke&7)&1,z(qe,tt,$e),z(ut,it,$e),R(cr,qe,ut),M(qe,qe,ut),R(ut,tt,it),M(tt,tt,it),j(it,cr),j(gt,qe),k(qe,ut,qe),k(ut,tt,cr),R(cr,qe,ut),M(qe,qe,ut),j(tt,qe),M(ut,it,gt),k(qe,ut,c),R(qe,qe,it),k(ut,ut,qe),k(qe,it,gt),k(it,tt,ve),j(tt,cr),z(qe,tt,$e),z(ut,it,$e);for(ke=0;ke<16;ke++)ve[ke+16]=qe[ke],ve[ke+32]=ut[ke],ve[ke+48]=tt[ke],ve[ke+64]=it[ke];var Ft=ve.subarray(32),jt=ve.subarray(16);return te(Ft,Ft),k(jt,jt,Ft),G(ce,jt),0}function re(ce,me){return he(ce,me,s)}function q(ce,me){return n(me,32),re(ce,me)}function J(ce,me,ye){var Y=new Uint8Array(32);return he(Y,ye,me),x(ce,i,Y,E)}var de=b,ue=I;function we(ce,me,ye,Y,ve,$e){var ke=new Uint8Array(32);return J(ke,ve,$e),de(ce,me,ye,Y,ke)}function se(ce,me,ye,Y,ve,$e){var ke=new Uint8Array(32);return J(ke,ve,$e),ue(ce,me,ye,Y,ke)}var U=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function K(ce,me,ye,Y){for(var ve=new Int32Array(16),$e=new Int32Array(16),ke,qe,tt,ut,it,cr,gt,Ft,jt,Ht,ar,tr,ir,rr,It,Ut,xt,Tt,Ot,bt,Ue,ze,et,Ye,Je,ct,Xt=ce[0],vr=ce[1],_r=ce[2],br=ce[3],Ie=ce[4],Or=ce[5],Wr=ce[6],Gr=ce[7],Tr=me[0],Vr=me[1],Kr=me[2],Yn=me[3],nn=me[4],Fn=me[5],Un=me[6],zn=me[7],gi=0;Y>=128;){for(Ot=0;Ot<16;Ot++)bt=8*Ot+gi,ve[Ot]=ye[bt+0]<<24|ye[bt+1]<<16|ye[bt+2]<<8|ye[bt+3],$e[Ot]=ye[bt+4]<<24|ye[bt+5]<<16|ye[bt+6]<<8|ye[bt+7];for(Ot=0;Ot<80;Ot++)if(ke=Xt,qe=vr,tt=_r,ut=br,it=Ie,cr=Or,gt=Wr,Ft=Gr,jt=Tr,Ht=Vr,ar=Kr,tr=Yn,ir=nn,rr=Fn,It=Un,Ut=zn,Ue=Gr,ze=zn,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=(Ie>>>14|nn<<18)^(Ie>>>18|nn<<14)^(nn>>>9|Ie<<23),ze=(nn>>>14|Ie<<18)^(nn>>>18|Ie<<14)^(Ie>>>9|nn<<23),et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ue=Ie&Or^~Ie&Wr,ze=nn&Fn^~nn&Un,et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ue=U[Ot*2],ze=U[Ot*2+1],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ue=ve[Ot%16],ze=$e[Ot%16],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,xt=Je&65535|ct<<16,Tt=et&65535|Ye<<16,Ue=xt,ze=Tt,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=(Xt>>>28|Tr<<4)^(Tr>>>2|Xt<<30)^(Tr>>>7|Xt<<25),ze=(Tr>>>28|Xt<<4)^(Xt>>>2|Tr<<30)^(Xt>>>7|Tr<<25),et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ue=Xt&vr^Xt&_r^vr&_r,ze=Tr&Vr^Tr&Kr^Vr&Kr,et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,Ft=Je&65535|ct<<16,Ut=et&65535|Ye<<16,Ue=ut,ze=tr,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=xt,ze=Tt,et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ut=Je&65535|ct<<16,tr=et&65535|Ye<<16,vr=ke,_r=qe,br=tt,Ie=ut,Or=it,Wr=cr,Gr=gt,Xt=Ft,Vr=jt,Kr=Ht,Yn=ar,nn=tr,Fn=ir,Un=rr,zn=It,Tr=Ut,Ot%16===15)for(bt=0;bt<16;bt++)Ue=ve[bt],ze=$e[bt],et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ve[(bt+9)%16],ze=$e[(bt+9)%16],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,xt=ve[(bt+1)%16],Tt=$e[(bt+1)%16],Ue=(xt>>>1|Tt<<31)^(xt>>>8|Tt<<24)^xt>>>7,ze=(Tt>>>1|xt<<31)^(Tt>>>8|xt<<24)^(Tt>>>7|xt<<25),et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,xt=ve[(bt+14)%16],Tt=$e[(bt+14)%16],Ue=(xt>>>19|Tt<<13)^(Tt>>>29|xt<<3)^xt>>>6,ze=(Tt>>>19|xt<<13)^(xt>>>29|Tt<<3)^(Tt>>>6|xt<<26),et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ve[bt]=Je&65535|ct<<16,$e[bt]=et&65535|Ye<<16;Ue=Xt,ze=Tr,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[0],ze=me[0],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[0]=Xt=Je&65535|ct<<16,me[0]=Tr=et&65535|Ye<<16,Ue=vr,ze=Vr,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[1],ze=me[1],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[1]=vr=Je&65535|ct<<16,me[1]=Vr=et&65535|Ye<<16,Ue=_r,ze=Kr,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[2],ze=me[2],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[2]=_r=Je&65535|ct<<16,me[2]=Kr=et&65535|Ye<<16,Ue=br,ze=Yn,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[3],ze=me[3],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[3]=br=Je&65535|ct<<16,me[3]=Yn=et&65535|Ye<<16,Ue=Ie,ze=nn,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[4],ze=me[4],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[4]=Ie=Je&65535|ct<<16,me[4]=nn=et&65535|Ye<<16,Ue=Or,ze=Fn,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[5],ze=me[5],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[5]=Or=Je&65535|ct<<16,me[5]=Fn=et&65535|Ye<<16,Ue=Wr,ze=Un,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[6],ze=me[6],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[6]=Wr=Je&65535|ct<<16,me[6]=Un=et&65535|Ye<<16,Ue=Gr,ze=zn,et=ze&65535,Ye=ze>>>16,Je=Ue&65535,ct=Ue>>>16,Ue=ce[7],ze=me[7],et+=ze&65535,Ye+=ze>>>16,Je+=Ue&65535,ct+=Ue>>>16,Ye+=et>>>16,Je+=Ye>>>16,ct+=Je>>>16,ce[7]=Gr=Je&65535|ct<<16,me[7]=zn=et&65535|Ye<<16,gi+=128,Y-=128}return Y}function ie(ce,me,ye){var Y=new Int32Array(8),ve=new Int32Array(8),$e=new Uint8Array(256),ke,qe=ye;for(Y[0]=1779033703,Y[1]=3144134277,Y[2]=1013904242,Y[3]=2773480762,Y[4]=1359893119,Y[5]=2600822924,Y[6]=528734635,Y[7]=1541459225,ve[0]=4089235720,ve[1]=2227873595,ve[2]=4271175723,ve[3]=1595750129,ve[4]=2917565137,ve[5]=725511199,ve[6]=4215389547,ve[7]=327033209,K(Y,ve,me,ye),ye%=128,ke=0;ke<ye;ke++)$e[ke]=me[qe-ye+ke];for($e[ye]=128,ye=256-128*(ye<112?1:0),$e[ye-9]=0,g($e,ye-8,qe/536870912|0,qe<<3),K(Y,ve,$e,ye),ke=0;ke<8;ke++)g(ce,8*ke,Y[ke],ve[ke]);return 0}function ge(ce,me){var ye=t(),Y=t(),ve=t(),$e=t(),ke=t(),qe=t(),tt=t(),ut=t(),it=t();M(ye,ce[1],ce[0]),M(it,me[1],me[0]),k(ye,ye,it),R(Y,ce[0],ce[1]),R(it,me[0],me[1]),k(Y,Y,it),k(ve,ce[3],me[3]),k(ve,ve,u),k($e,ce[2],me[2]),R($e,$e,$e),M(ke,Y,ye),M(qe,$e,ve),R(tt,$e,ve),R(ut,Y,ye),k(ce[0],ke,qe),k(ce[1],ut,tt),k(ce[2],tt,qe),k(ce[3],ke,ut)}function _e(ce,me,ye){var Y;for(Y=0;Y<4;Y++)z(ce[Y],me[Y],ye)}function Ce(ce,me){var ye=t(),Y=t(),ve=t();te(ve,me[2]),k(ye,me[0],ve),k(Y,me[1],ve),G(ce,Y),ce[31]^=X(ye)<<7}function Ne(ce,me,ye){var Y,ve;for(B(ce[0],o),B(ce[1],a),B(ce[2],a),B(ce[3],o),ve=255;ve>=0;--ve)Y=ye[ve/8|0]>>(ve&7)&1,_e(ce,me,Y),ge(me,ce),ge(ce,ce),_e(ce,me,Y)}function xe(ce,me){var ye=[t(),t(),t(),t()];B(ye[0],f),B(ye[1],d),B(ye[2],a),k(ye[3],f,d),Ne(ce,ye,me)}function Ae(ce,me,ye){var Y=new Uint8Array(64),ve=[t(),t(),t(),t()],$e;for(ye||n(me,32),ie(Y,me,32),Y[0]&=248,Y[31]&=127,Y[31]|=64,xe(ve,Y),Ce(ce,ve),$e=0;$e<32;$e++)me[$e+32]=ce[$e];return 0}var Me=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(ce,me){var ye,Y,ve,$e;for(Y=63;Y>=32;--Y){for(ye=0,ve=Y-32,$e=Y-12;ve<$e;++ve)me[ve]+=ye-16*me[Y]*Me[ve-(Y-32)],ye=Math.floor((me[ve]+128)/256),me[ve]-=ye*256;me[ve]+=ye,me[Y]=0}for(ye=0,ve=0;ve<32;ve++)me[ve]+=ye-(me[31]>>4)*Me[ve],ye=me[ve]>>8,me[ve]&=255;for(ve=0;ve<32;ve++)me[ve]-=ye*Me[ve];for(Y=0;Y<32;Y++)me[Y+1]+=me[Y]>>8,ce[Y]=me[Y]&255}function H(ce){var me=new Float64Array(64),ye;for(ye=0;ye<64;ye++)me[ye]=ce[ye];for(ye=0;ye<64;ye++)ce[ye]=0;oe(ce,me)}function ee(ce,me,ye,Y){var ve=new Uint8Array(64),$e=new Uint8Array(64),ke=new Uint8Array(64),qe,tt,ut=new Float64Array(64),it=[t(),t(),t(),t()];ie(ve,Y,32),ve[0]&=248,ve[31]&=127,ve[31]|=64;var cr=ye+64;for(qe=0;qe<ye;qe++)ce[64+qe]=me[qe];for(qe=0;qe<32;qe++)ce[32+qe]=ve[32+qe];for(ie(ke,ce.subarray(32),ye+32),H(ke),xe(it,ke),Ce(ce,it),qe=32;qe<64;qe++)ce[qe]=Y[qe];for(ie($e,ce,ye+64),H($e),qe=0;qe<64;qe++)ut[qe]=0;for(qe=0;qe<32;qe++)ut[qe]=ke[qe];for(qe=0;qe<32;qe++)for(tt=0;tt<32;tt++)ut[qe+tt]+=$e[qe]*ve[tt];return oe(ce.subarray(32),ut),cr}function W(ce,me){var ye=t(),Y=t(),ve=t(),$e=t(),ke=t(),qe=t(),tt=t();return B(ce[2],a),O(ce[1],me),j(ve,ce[1]),k($e,ve,l),M(ve,ve,ce[2]),R($e,ce[2],$e),j(ke,$e),j(qe,ke),k(tt,qe,ke),k(ye,tt,ve),k(ye,ye,$e),ae(ye,ye),k(ye,ye,ve),k(ye,ye,$e),k(ye,ye,$e),k(ce[0],ye,$e),j(Y,ce[0]),k(Y,Y,$e),Q(Y,ve)&&k(ce[0],ce[0],h),j(Y,ce[0]),k(Y,Y,$e),Q(Y,ve)?-1:(X(ce[0])===me[31]>>7&&M(ce[0],o,ce[0]),k(ce[3],ce[0],ce[1]),0)}function N(ce,me,ye,Y){var ve,$e=new Uint8Array(32),ke=new Uint8Array(64),qe=[t(),t(),t(),t()],tt=[t(),t(),t(),t()];if(ye<64||W(tt,Y))return-1;for(ve=0;ve<ye;ve++)ce[ve]=me[ve];for(ve=0;ve<32;ve++)ce[ve+32]=Y[ve];if(ie(ke,ce,ye),H(ke),Ne(qe,tt,ke),xe(tt,me.subarray(32)),ge(qe,tt),Ce($e,qe),ye-=64,y(me,0,$e,0)){for(ve=0;ve<ye;ve++)ce[ve]=0;return-1}for(ve=0;ve<ye;ve++)ce[ve]=me[ve+64];return ye}var $=32,ne=24,pe=32,be=16,fe=32,Ee=32,Fe=32,He=32,Ve=32,De=ne,nt=pe,vt=be,dt=64,Ct=32,Cr=64,or=32,fr=64;e.lowlevel={crypto_core_hsalsa20:x,crypto_stream_xor:P,crypto_stream:C,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:T,crypto_onetimeauth:L,crypto_onetimeauth_verify:D,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:b,crypto_secretbox_open:I,crypto_scalarmult:he,crypto_scalarmult_base:re,crypto_box_beforenm:J,crypto_box_afternm:de,crypto_box:we,crypto_box_open:se,crypto_box_keypair:q,crypto_hash:ie,crypto_sign:ee,crypto_sign_keypair:Ae,crypto_sign_open:N,crypto_secretbox_KEYBYTES:$,crypto_secretbox_NONCEBYTES:ne,crypto_secretbox_ZEROBYTES:pe,crypto_secretbox_BOXZEROBYTES:be,crypto_scalarmult_BYTES:fe,crypto_scalarmult_SCALARBYTES:Ee,crypto_box_PUBLICKEYBYTES:Fe,crypto_box_SECRETKEYBYTES:He,crypto_box_BEFORENMBYTES:Ve,crypto_box_NONCEBYTES:De,crypto_box_ZEROBYTES:nt,crypto_box_BOXZEROBYTES:vt,crypto_sign_BYTES:dt,crypto_sign_PUBLICKEYBYTES:Ct,crypto_sign_SECRETKEYBYTES:Cr,crypto_sign_SEEDBYTES:or,crypto_hash_BYTES:fr,gf:t,D:l,L:Me,pack25519:G,unpack25519:O,M:k,A:R,S:j,Z:M,pow2523:ae,add:ge,set25519:B,modL:oe,scalarmult:Ne,scalarbase:xe};function Ts(ce,me){if(ce.length!==$)throw new Error("bad key size");if(me.length!==ne)throw new Error("bad nonce size")}function Xr(ce,me){if(ce.length!==Fe)throw new Error("bad public key size");if(me.length!==He)throw new Error("bad secret key size")}function yr(){for(var ce=0;ce<arguments.length;ce++)if(!(arguments[ce]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ts(ce){for(var me=0;me<ce.length;me++)ce[me]=0}e.randomBytes=function(ce){var me=new Uint8Array(ce);return n(me,ce),me},e.secretbox=function(ce,me,ye){yr(ce,me,ye),Ts(ye,me);for(var Y=new Uint8Array(pe+ce.length),ve=new Uint8Array(Y.length),$e=0;$e<ce.length;$e++)Y[$e+pe]=ce[$e];return b(ve,Y,Y.length,me,ye),ve.subarray(be)},e.secretbox.open=function(ce,me,ye){yr(ce,me,ye),Ts(ye,me);for(var Y=new Uint8Array(be+ce.length),ve=new Uint8Array(Y.length),$e=0;$e<ce.length;$e++)Y[$e+be]=ce[$e];return Y.length<32||I(ve,Y,Y.length,me,ye)!==0?null:ve.subarray(pe)},e.secretbox.keyLength=$,e.secretbox.nonceLength=ne,e.secretbox.overheadLength=be,e.scalarMult=function(ce,me){if(yr(ce,me),ce.length!==Ee)throw new Error("bad n size");if(me.length!==fe)throw new Error("bad p size");var ye=new Uint8Array(fe);return he(ye,ce,me),ye},e.scalarMult.base=function(ce){if(yr(ce),ce.length!==Ee)throw new Error("bad n size");var me=new Uint8Array(fe);return re(me,ce),me},e.scalarMult.scalarLength=Ee,e.scalarMult.groupElementLength=fe,e.box=function(ce,me,ye,Y){var ve=e.box.before(ye,Y);return e.secretbox(ce,me,ve)},e.box.before=function(ce,me){yr(ce,me),Xr(ce,me);var ye=new Uint8Array(Ve);return J(ye,ce,me),ye},e.box.after=e.secretbox,e.box.open=function(ce,me,ye,Y){var ve=e.box.before(ye,Y);return e.secretbox.open(ce,me,ve)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ce=new Uint8Array(Fe),me=new Uint8Array(He);return q(ce,me),{publicKey:ce,secretKey:me}},e.box.keyPair.fromSecretKey=function(ce){if(yr(ce),ce.length!==He)throw new Error("bad secret key size");var me=new Uint8Array(Fe);return re(me,ce),{publicKey:me,secretKey:new Uint8Array(ce)}},e.box.publicKeyLength=Fe,e.box.secretKeyLength=He,e.box.sharedKeyLength=Ve,e.box.nonceLength=De,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ce,me){if(yr(ce,me),me.length!==Cr)throw new Error("bad secret key size");var ye=new Uint8Array(dt+ce.length);return ee(ye,ce,ce.length,me),ye},e.sign.open=function(ce,me){if(yr(ce,me),me.length!==Ct)throw new Error("bad public key size");var ye=new Uint8Array(ce.length),Y=N(ye,ce,ce.length,me);if(Y<0)return null;for(var ve=new Uint8Array(Y),$e=0;$e<ve.length;$e++)ve[$e]=ye[$e];return ve},e.sign.detached=function(ce,me){for(var ye=e.sign(ce,me),Y=new Uint8Array(dt),ve=0;ve<Y.length;ve++)Y[ve]=ye[ve];return Y},e.sign.detached.verify=function(ce,me,ye){if(yr(ce,me,ye),me.length!==dt)throw new Error("bad signature size");if(ye.length!==Ct)throw new Error("bad public key size");var Y=new Uint8Array(dt+ce.length),ve=new Uint8Array(dt+ce.length),$e;for($e=0;$e<dt;$e++)Y[$e]=me[$e];for($e=0;$e<ce.length;$e++)Y[$e+dt]=ce[$e];return N(ve,Y,Y.length,ye)>=0},e.sign.keyPair=function(){var ce=new Uint8Array(Ct),me=new Uint8Array(Cr);return Ae(ce,me),{publicKey:ce,secretKey:me}},e.sign.keyPair.fromSecretKey=function(ce){if(yr(ce),ce.length!==Cr)throw new Error("bad secret key size");for(var me=new Uint8Array(Ct),ye=0;ye<me.length;ye++)me[ye]=ce[32+ye];return{publicKey:me,secretKey:new Uint8Array(ce)}},e.sign.keyPair.fromSeed=function(ce){if(yr(ce),ce.length!==or)throw new Error("bad seed size");for(var me=new Uint8Array(Ct),ye=new Uint8Array(Cr),Y=0;Y<32;Y++)ye[Y]=ce[Y];return Ae(me,ye,!0),{publicKey:me,secretKey:ye}},e.sign.publicKeyLength=Ct,e.sign.secretKeyLength=Cr,e.sign.seedLength=or,e.sign.signatureLength=dt,e.hash=function(ce){yr(ce);var me=new Uint8Array(fr);return ie(me,ce,ce.length),me},e.hash.hashLength=fr,e.verify=function(ce,me){return yr(ce,me),ce.length===0||me.length===0||ce.length!==me.length?!1:p(ce,0,me,0,ce.length)===0},e.setPRNG=function(ce){n=ce},function(){var ce=typeof self<"u"?self.crypto||self.msCrypto:null;if(ce&&ce.getRandomValues){var me=65536;e.setPRNG(function(ye,Y){var ve,$e=new Uint8Array(Y);for(ve=0;ve<Y;ve+=me)ce.getRandomValues($e.subarray(ve,ve+Math.min(Y-ve,me)));for(ve=0;ve<Y;ve++)ye[ve]=$e[ve];ts($e)})}else typeof XY<"u"&&(ce=gd,ce&&ce.randomBytes&&e.setPRNG(function(ye,Y){var ve,$e=ce.randomBytes(Y);for(ve=0;ve<Y;ve++)ye[ve]=$e[ve];ts($e)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})}(iI)),iI.exports}var QFe=ZFe();const dp=zs(QFe),jT=dp.box.nonceLength;function e7e(r,e){return dp.box.before($r.unmarshalBase64(r),e)}function t7e(r,e){const t=dp.randomBytes(jT),n=new TextEncoder().encode(r),i=dp.box.after(n,t,e);return $r.marshalBase64(new Uint8Array([...t,...i]))}function r7e(r,e){const t=$r.unmarshalBase64(r),n=t.slice(0,jT),i=t.slice(jT),s=dp.box.open.after(i,n,e);if(!s)throw new Error("Failed to decrypt message");return new TextDecoder().decode(s)}const $Z=()=>{let r;function e(i){const s=dp.box.keyPair(),o=hz();let a;r=new WebSocket(`wss://wallet-api.jup.ag/v1/relay/${o}/ws`),r.onopen=()=>{const c={publicKey:$r.marshalBase64(s.publicKey),sessionId:o};i.onOpen(JSON.stringify(c))},r.onclose=()=>{},r.onerror=c=>{console.warn(`[JupiterSync] WebSocket error: ${c}`)},r.onmessage=c=>{const l=JSON.parse(c.data);switch(l.type){case"public_key":a=e7e(l.value,s.secretKey),t({type:"public_key_ack"}),i.type==="export"&&i.onReady(f=>{t({type:"encrypted_message",value:t7e(JSON.stringify(f),a)})});break;case"public_key_ack":if(!a){console.warn("[JupiterSync] public_key_ack received but no shared secret yet");return}break;case"encrypted_message":if(!a){console.warn("[JupiterSync] encrypted_message received but no shared secret yet");return}const u=JSON.parse(r7e(l.value,a));i.type==="import"&&i.onDecryptedMessage(u),t({type:"encrypted_message_ack"});break;case"encrypted_message_ack":i.type==="export"&&i.onDone();break}}}function t(i){if(!r||r.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected yet");r.send(JSON.stringify(i))}function n(){r?.close()}return mt(()=>setTimeout(()=>n(),5e3)),{connect:e}};var n7e=le('<p class="text-zinc-400 leading-tight">Choose which wallets to export (Social Login and Hardware Wallets cannot be synced):'),i7e=le('<button class="w-full p-2.5 rounded-xl font-semibold transition-100">Continue'),s7e=le('<div class="flex items-center justify-center"><div class="rounded-2xl bg-zinc-800 size-64 flex items-center justify-center">'),o7e=le('<div class="text-center mt-4 text-zinc-400 leading-tight"><p>On Jupiter Mobile, tap on</p><p><span class="text-zinc-300 font-medium">Your Wallet</span> &#10137; <span class="text-zinc-300 font-medium">Settings</span> &#10137; <span class="text-zinc-300 font-medium">Jupiter Sync</span></p><p>and select <span class="text-zinc-300 font-medium">Desktop to Mobile'),a7e=le("<div class=leading-tight>You are exporting <!> <!> to Jupiter Mobile. Please confirm your password to complete the sync."),c7e=le('<form class=space-y-2><input class="ring-1 ring-zinc-700 focus:ring-primary-200 w-full outline-none rounded-xl py-2.5 px-3.5 bg-zinc-800 transition-100"placeholder="Confirm password to export"type=password id=password-input name=password-input><button class="w-full p-2.5 rounded-xl font-semibold transition-100"type=submit>'),l7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),u7e=le('<div class="flex items-center justify-center h-48 bg-zinc-800 rounded-xl text-zinc-400 font-semibold text-sm tracking-wider">NO VALID WALLETS FOUND'),f7e=le('<button class="h-16 w-full flex items-center px-4 font-medium gap-3 bg-zinc-800 rounded-xl cursor-pointer hover:bg-zinc-700/60"><div class="flex flex-col items-start space-y--0.5"><div class=font-semibold></div></div><div class=flex-1></div><div class=size-6>'),d7e=le('<div class="i-tabler:loader-2 animate-spin size-12 text-zinc-300">');const Hs={CHOOSE_WALLETS:"choose-wallets",QR_CODE:"qr-code",CONFIRMATION:"confirmation",CONFIRMATION_EXPORTING:"confirmation-exporting"},h7e="password-input",p7e=()=>{const{accounts:r}=Jr(),{connect:e}=$Z(),t=ci(),{setStep:n}=$n(),[i,s]=Pe(Hs.CHOOSE_WALLETS),[o,a]=ud(r().flatMap(g=>g.type==="standalone"||g.type==="mnemonic"?{label:g.label,address:g.address,isSelected:!0}:[])),c=Te(()=>o.filter(g=>g.isSelected).length),[l,u]=Pe(void 0);let f=()=>{throw new Error("Connection not initialised yet")};async function d(){c()!==0&&(s(Hs.QR_CODE),e({type:"export",onOpen:g=>{u(g)},onReady:async g=>{f=g,s(Hs.CONFIRMATION)},onDone:()=>{n(st.FINAL_STEP)}}))}async function h(g){if(g.preventDefault(),i()!==Hs.CONFIRMATION)return;const m=new FormData(g.target).get(h7e)?.toString().trim()||"";if(!m){t.alert({title:"Incorrect Password",content:"The password you entered is incorrect."});return}s(Hs.CONFIRMATION_EXPORTING);const y={type:"accounts",accounts:[]};try{for(const v of o){if(!v.isSelected)continue;const w=await qt.export({password:m,address:v.address}),_=um.format64Bytes(w.privateKey,v.address);y.accounts.push(w.type==="standalone"?{type:"private_key",label:v.label,private_key:_}:{type:"seed_phrase",label:v.label,private_key:_,seed_phrase:$s.marshalBase64(w.mnemonic),derivation_path:w.path})}}catch{t.alert({title:"Incorrect Password",content:"The password you entered is incorrect."}),s(Hs.CONFIRMATION);return}f(y)}return(()=>{var g=l7e();return Z(g,A(pi,{title:"Desktop to Mobile",get previousStep(){return st.JUPITER_SYNC_TYPE}}),null),Z(g,A(Kt,{get children(){return[A(Re,{get when(){return i()===Hs.CHOOSE_WALLETS},get children(){return[n7e(),A(bp,{class:"max-h-40vh space-y-2",get children(){return A(Oe,{get when(){return o.length>0},get fallback(){return u7e()},get children(){return A(pt,{each:o,children:(p,m)=>(()=>{var y=f7e(),v=y.firstChild,w=v.firstChild,_=v.nextSibling,x=_.nextSibling;return y.$$click=()=>a(m(),"isSelected",!p.isSelected),Z(y,A(Tp,{get id(){return p.address},class:"size-9"}),v),Z(w,()=>p.label),Z(v,A(Gi,{class:"font-normal text-zinc-400",get address(){return p.address}}),null),Ge(E=>nr(x,{"i-tabler:square-check-filled bg-primary-200":p.isSelected,"i-tabler:square bg-zinc-600":!p.isSelected},E)),y})()})}})}}),(()=>{var p=i7e();return p.$$click=()=>d(),Ge(m=>{var y={"cursor-not-allowed bg-zinc-700 text-zinc-400":c()===0,"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":c()>0},v=c()===0;return m.e=nr(p,y,m.e),v!==m.t&&(p.disabled=m.t=v),m},{e:void 0,t:void 0}),p})()]}}),A(Re,{get when(){return i()===Hs.QR_CODE},get children(){return[(()=>{var p=s7e(),m=p.firstChild;return Z(m,A(Oe,{get when(){return l()},get fallback(){return d7e()},children:y=>A(Ik,{class:"size-full bg-zinc-50 fill-zinc-950 rounded-2xl p-4",get payload(){return y()},ecc:"low"})})),p})(),o7e()]}}),A(Re,{get when(){return i()===Hs.CONFIRMATION||i()===Hs.CONFIRMATION_EXPORTING},get children(){return[(()=>{var p=a7e(),m=p.firstChild,y=m.nextSibling,v=y.nextSibling,w=v.nextSibling;return w.nextSibling,Z(p,c,y),Z(p,()=>c()>1?"wallets":"wallet",w),p})(),(()=>{var p=c7e(),m=p.firstChild,y=m.nextSibling;return p.addEventListener("submit",v=>h(v)),Z(y,A(Oe,{get when(){return i()===Hs.CONFIRMATION},fallback:"Exporting...",children:"Export"})),Ge(v=>{var w={"cursor-wait bg-zinc-700 text-zinc-400":i()===Hs.CONFIRMATION_EXPORTING,"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":i()===Hs.CONFIRMATION},_=i()===Hs.CONFIRMATION_EXPORTING;return v.e=nr(y,w,v.e),_!==v.t&&(y.disabled=v.t=_),v},{e:void 0,t:void 0}),p})()]}})]}}),null),g})()};At(["click"]);class Ck{#e;#t;constructor(e,t){this.#e=e,this.#t=t}static async fromPrivateKey(e){const t=await _h(e);return new Ck(e,t)}static async fromJson({privateKey:e}){return this.fromPrivateKey($r.unmarshalBase64(e))}toJson(){return{privateKey:$r.marshalBase64(this.#e)}}get address(){return this.#t.address}async signTransaction(e){const t=$r.unmarshalBase64(e),n=Nz().decode(t),i=await Lz([this.#t.keyPair],n);return Gne(i)}async signMessage(e){const t=$r.unmarshalBase64(e),i=(await this.#t.signMessages([Xne(t)])).at(0);if(!i)throw new Error("Failed to sign message");return $r.marshalBase64(i[lR(this.#t.address)])}}var g7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><div class="flex items-center justify-center"><div class="rounded-2xl bg-zinc-800 size-64 flex items-center justify-center"></div></div><div class="text-center mt-4 text-zinc-400 leading-tight"><p>On Jupiter Mobile, tap on</p><p><span class="text-zinc-300 font-medium">Your Wallet</span> &#10137; <span class="text-zinc-300 font-medium">Settings</span> &#10137; <span class="text-zinc-300 font-medium">Jupiter Sync</span></p><p>and select <span class="text-zinc-300 font-medium">Mobile to Desktop'),m7e=le('<div class="i-tabler:loader-2 animate-spin size-12 text-zinc-300">');const y7e=()=>{const{updateImportForm:r,setStep:e}=$n(),{connect:t}=$Z(),[n,i]=Pe(void 0),{accounts:s,importWallet:o}=Jr(),{alert:a}=ci();return mr(()=>{t({type:"import",onOpen:c=>{i(c)},onDecryptedMessage:async c=>{if(c.type!=="accounts")return;const l=c.accounts.map(({private_key:u,...f})=>{const d=um.validate(u);if(!d)throw a({title:"Jupiter Sync Failed",content:"Invalid private key detected: "+u}),new Error("invalid private key detected: "+u);return f.type==="private_key"?{...f,private_key:d}:{...f,private_key:d,seed_phrase:$s.unmarshalBase64(f.seed_phrase)}});for(const u of l)if(u.type==="seed_phrase"&&!$s.verify(u.seed_phrase,u.derivation_path,u.private_key))throw a({title:"Jupiter Sync Failed",content:"Invalid seed phrase detected: "+u.seed_phrase}),new Error("invalid seed phrase detected: "+u.seed_phrase);if(s().length===0)r({type:ur.JUPITER_SYNC,accounts:l.map(u=>u.type==="private_key"?{type:ur.PRIVATE_KEY,label:u.label,privateKey:u.private_key}:{type:ur.SEED_PHRASE,label:u.label,privateKey:u.private_key,mnemonic:u.seed_phrase,path:u.derivation_path})}),e(st.SHARED_LABEL_WALLET);else{for(const u of l){const f=await Ck.fromPrivateKey($r.unmarshalBase64(u.private_key));s().some(d=>d.address===f.address)||(u.type==="private_key"?await o({type:"standalone",label:u.label,privateKey:u.private_key}):u.type==="seed_phrase"&&await o({type:"mnemonic",label:u.label,privateKey:u.private_key,mnemonic:u.seed_phrase,path:u.derivation_path}))}e(st.FINAL_STEP)}}})}),(()=>{var c=g7e(),l=c.firstChild,u=l.firstChild;return Z(c,A(pi,{title:"Mobile to Desktop",get previousStep(){return s().length===0?st.IMPORT_TYPE:st.JUPITER_SYNC_TYPE}}),l),Z(u,A(Oe,{get when(){return n()},get fallback(){return m7e()},children:f=>A(Ik,{class:"size-full bg-zinc-50 fill-zinc-950 rounded-2xl p-4",get payload(){return f()},ecc:"low"})})),c})()};var v7e=le('<div class="size-5 i-tabler:device-desktop-plus bg-primary-200">'),b7e=le('<div class="size-5 i-tabler:device-mobile-plus bg-primary-200">'),w7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">Sync your wallets and keys securely with your Jupiter Mobile app.'),x7e=le('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="size-10 flex items-center justify-center bg-primary-200/10 rounded-full"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium></h3><p class="text-zinc-400 text-sm">');const _7e=()=>{const{setStep:r}=$n(),e=[{title:"Mobile to Desktop",description:"Import wallets from Mobile to Desktop",Icon:()=>v7e(),onClick:()=>r(st.JUPITER_SYNC_IMPORT)},{title:"Desktop to Mobile",description:"Export wallets from Desktop to Mobile",Icon:()=>b7e(),onClick:()=>r(st.JUPITER_SYNC_EXPORT)}];return(()=>{var t=w7e(),n=t.firstChild;return Z(t,A(pi,{title:"Jupiter Sync",get previousStep(){return st.IMPORT_TYPE}}),n),Z(t,A(pt,{each:e,children:({title:i,description:s,Icon:o,onClick:a})=>(()=>{var c=x7e(),l=c.firstChild,u=l.nextSibling,f=u.firstChild,d=f.nextSibling;return gl(c,"click",a,!0),Z(l,A(o,{})),Z(f,i),Z(d,s),c})()}),null),t})()};At(["click"]);var S7e=le('<div class="space-y-3 w-full px-3"><div class="w-full py-10 rounded flex flex-col items-center justify-center"><h1 class="font-semibold text-3xl mt-8 mb-2">Welcome to Jupiter Wallet</h1><p class="opacity-60 text-lg">Your personal portal into Solana</p></div><div class=space-y-3><button class="relative cursor-pointer w-full py-3 rounded-xl text-zinc-950 bg-primary-200 font-semibold active:bg-primary-200/80 transition-100 group"><div>Create a new wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:arrow-right size-5.5 group-hover:translate-x-1 transition-200"></div></div></button><button class="relative cursor-pointer w-full py-3 rounded-xl text-zinc-400 font-semibold ring-1 ring-zinc-600 active:ring-zinc-500 transition-100 group"><div>Import an existing wallet</div><div class="absolute right-3 top-0 flex items-center justify-center h-full"><div class="i-tabler:plus size-5.5 group-hover:rotate-90 transition-200"></div></div></button></div><div class="flex justify-between items-center mt-4"><div class="flex space-x--0.5"><img src=https://pbs.twimg.com/profile_images/1914034055273742336/NvaIDKua_400x400.jpg class="size-6 rounded-full z-2"><img src=https://pbs.twimg.com/profile_images/1947596828696055808/yWWLZzgs_400x400.jpg class="size-6 rounded-full z-1"><img src=https://pbs.twimg.com/profile_images/1921122530405863425/wTbPEY2B_400x400.jpg class="size-6 rounded-full"></div><div class="text-zinc-400 text-sm">Join <span class="text-zinc-200 font-medium">1.09M+</span> other users now');const E7e=()=>{const{setStep:r,resetImportForm:e}=$n();return mr(()=>e()),(()=>{var t=S7e(),n=t.firstChild,i=n.firstChild,s=n.nextSibling,o=s.firstChild,a=o.nextSibling;return Z(n,A(Sp,{class:"size-24"}),i),o.$$click=()=>r(st.CREATE_TYPE),a.$$click=()=>r(st.IMPORT_TYPE),t})()};At(["click"]);var A7e=le('<div class="flex flex-col items-center justify-center"><p class="text-zinc-400 p-4">Logging in via <!>...</p><div class="size-12 i-tabler:loader-2 animate-spin mt-10 mb-20 text-zinc-400">'),I7e=le('<p class="p-4 text-red-400">Error: '),C7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><div class="w-full bg-zinc-800 rounded-xl"></div><div class="flex gap-2"><button class="w-full p-2.5 rounded-xl font-semibold transition-100 mt-2">');const Xo={AUTHENTICATING:"authenticating",ERROR:"error"},T7e=()=>{const{step:r,setStep:e,updateImportForm:t}=$n(),n=Te(()=>r()===st.PRIVY_GOOGLE?"Google":r()===st.PRIVY_APPLE?"Apple":r()===st.PRIVY_TWITTER?"Twitter":"Discord"),[i,s]=Pe(Xo.AUTHENTICATING),[o,a]=Pe(null);async function c(){const u=n().toLowerCase();try{await Cp.login(u),t({type:ur.PRIVY}),e(st.SHARED_CHOOSE_ADDRESSES)}catch(f){a(f instanceof Error?f.message:"Unknown error: "+f),s(Xo.ERROR)}}async function l(){if(i()!==Xo.AUTHENTICATING&&i()===Xo.ERROR){s(Xo.AUTHENTICATING),a(null),c();return}}return mr(()=>c()),(()=>{var u=C7e(),f=u.firstChild,d=f.nextSibling,h=d.firstChild;return Z(u,A(pi,{get title(){return`Login via ${n()}`},get previousStep(){return st.PRIVY_TYPE}}),f),Z(f,A(Kt,{get children(){return[A(Re,{get when(){return i()===Xo.AUTHENTICATING},get children(){var g=A7e(),p=g.firstChild,m=p.firstChild,y=m.nextSibling;return y.nextSibling,Z(p,n,y),g}}),A(Re,{get when(){return i()===Xo.ERROR},get children(){var g=I7e();return g.firstChild,Z(g,o,null),g}})]}})),h.$$click=l,Z(h,A(Kt,{get children(){return[A(Re,{get when(){return i()===Xo.AUTHENTICATING},children:"Logging in..."}),A(Re,{get when(){return i()===Xo.ERROR},children:"Retry"})]}})),Ge(g=>{var p={"cursor-wait bg-zinc-700":i()===Xo.AUTHENTICATING,"cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950":i()!==Xo.AUTHENTICATING},m=i()===Xo.AUTHENTICATING;return g.e=nr(h,p,g.e),m!==g.t&&(h.disabled=g.t=m),g},{e:void 0,t:void 0}),u})()};At(["click"]);var R7e=le('<div class="size-6 i-tabler:brand-google">'),k7e=le('<div class="size-6 i-tabler:brand-apple">'),O7e=le('<div class="size-6 i-tabler:brand-x">'),P7e=le('<div class="size-6 i-tabler:brand-discord">'),$7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl">'),D7e=le('<button class="cursor-pointer p-3 flex gap-3 items-center justify-center bg-zinc-800 rounded-xl w-full ring-1 hover:ring-primary-200 ring-zinc-800 transition-100"><div class="size-9 flex items-center justify-center"></div><div class="flex flex-col flex-1 text-left"><h3 class=font-medium>');const M7e=()=>{const{setStep:r}=$n(),e=[{title:"Continue with Google",Icon:()=>R7e(),onClick:()=>r(st.PRIVY_GOOGLE)},{title:"Continue with Apple",Icon:()=>k7e(),onClick:()=>r(st.PRIVY_APPLE)},{title:"Continue with X",Icon:()=>O7e(),onClick:()=>r(st.PRIVY_TWITTER)},{title:"Continue with Discord",Icon:()=>P7e(),onClick:()=>r(st.PRIVY_DISCORD)}];return(()=>{var t=$7e();return Z(t,A(pi,{title:"Social Login",get previousStep(){return st.MAIN}}),null),Z(t,A(pt,{each:e,children:({title:n,Icon:i,onClick:s})=>(()=>{var o=D7e(),a=o.firstChild,c=a.nextSibling,l=c.firstChild;return gl(o,"click",s,!0),Z(a,A(i,{})),Z(l,n),o})()}),null),t})()};At(["click"]);var B7e=le('<div class="h-16 rounded-xl bg-zinc-800 flex items-center justify-center"><div class="size-6 i-tabler:loader-2 animate-spin text-zinc-400">'),N7e=le('<button class="w-full flex items-center justify-center text-zinc-400 text-center mt-2 font-medium gap-1 hover:text-zinc-100 transition-100 cursor-pointer"><div>View <!> More</div><div class="i-tabler:chevron-down size-5.5">'),L7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight">The following addresses will be added:</p><div class="bg-zinc-900 rounded"><button class="mt-4 w-full p-2.5 rounded-xl font-semibold transition-100">Confirm'),F7e=le('<button class="h-16 w-full flex items-center px-4 font-medium gap-3 bg-zinc-800 rounded-xl"><div class="flex flex-col items-start space-y--0.5"></div><div class=flex-1></div><div class=size-6>');const U7e=()=>{const r=ci(),{importForm:e,updateImportForm:t,setStep:n}=$n(),[i,s]=ud([]),o=Te(()=>e().type===ur.PRIVATE_KEY?st.IMPORT_PRIVATE_KEY:e().type===ur.SEED_PHRASE?st.IMPORT_SEED_PHRASE:e().type===ur.LEDGER?st.IMPORT_LEDGER:e().type===ur.KEYSTONE?st.IMPORT_KEYSTONE:e().type===ur.TREZOR?st.IMPORT_TREZOR:e().type===ur.PRIVY?st.PRIVY_TYPE:st.IMPORT_TYPE),[a,c]=Pe(!1),l=Te(()=>i.filter(h=>!h.isActive).length),u=Te(()=>i.some(h=>h.isSelected));function f(){c(!0)}async function d(){if(!u())return;const{accounts:h}=await qt.getAccounts();for(const p of i)if(p.isSelected&&h.some(m=>m.address===p.address)){r.alert({title:"Address Already Exists",content:"Please choose another address to continue."});return}const g=e().type;if(g===ur.SEED_PHRASE){const p=i.flatMap(m=>m.isSelected&&m.type===g?{address:m.address,path:m.path,privateKey:m.privateKey}:[]);t({accounts:p})}if(g===ur.LEDGER||g===ur.KEYSTONE||g===ur.TREZOR){const p=i.flatMap(m=>m.isSelected&&m.type===g?{address:m.address,path:m.path,mfp:m.mfp}:[]);t({accounts:p})}n(st.SHARED_LABEL_WALLET)}return mr(async()=>{const h=e();if(h.type!=="__empty__"){if(h.type===ur.PRIVATE_KEY&&h.privateKey){const g=await _h($r.unmarshalBase64(h.privateKey)),{data:p}=await ws.getAddressesExistence([g.address]),m=p.at(0);s([{type:h.type,address:g.address,balance:m?.sol||0,isSelected:!0,isActive:!0}])}if(h.type===ur.SEED_PHRASE&&h.mnemonic&&h.accounts){const{accounts:g}=await qt.getAccounts(),p=new Set(g.map(_=>_.address)),m=h.accounts.filter(_=>!p.has(_.address));if(m.length===0){r.alert({title:"No New Addresses",content:"Please choose at least one address to import."});return}const{data:y}=await ws.getAddressesExistence(m.map(_=>_.address)),v=m.map((_,x)=>{const E=y.find(S=>S.address===_.address);return{type:h.type,address:_.address,balance:E?.sol||0,isSelected:y.length===0&&x===0?!0:!!E,isActive:y.length===0&&x===0?!0:!!E,path:_.path,privateKey:_.privateKey}}),w=v.findIndex(_=>_.path.endsWith("44'/501'")&&_.isSelected&&_.isActive);if(w!==-1){const[_]=v.splice(w,1);v.unshift(_)}s(v)}if((h.type===ur.LEDGER||h.type===ur.TREZOR||h.type===ur.KEYSTONE)&&h.accounts&&h.accounts.length>0){const{accounts:g}=await qt.getAccounts(),p=new Set(g.map(_=>_.address)),m=h.accounts.filter(_=>!p.has(_.address));if(m.length===0){r.alert({title:"No New Addresses",content:"Please choose at least one address to import."});return}const{data:y}=await ws.getAddressesExistence(m.map(_=>_.address)),v=m.map((_,x)=>{const E=y.find(S=>S.address===_.address);return{type:h.type,address:_.address,balance:E?.sol||0,isSelected:y.length===0&&x===0?!0:!!E,isActive:y.length===0&&x===0?!0:!!E,path:_.path,mfp:_.mfp}}),w=v.findIndex(_=>_.path.endsWith("44'/501'")&&_.isSelected&&_.isActive);if(w!==-1){const[_]=v.splice(w,1);v.unshift(_)}s(v)}if(h.type===ur.PRIVY){const g=await Cp.getSolanaWallet(),{data:p}=await ws.getAddressesExistence([g.address]),m=p.at(0);t({type:ur.PRIVY,address:g.address}),s([{type:h.type,address:g.address,balance:m?.sol||0,isSelected:!0,isActive:!0}])}}}),(()=>{var h=L7e(),g=h.firstChild,p=g.nextSibling,m=p.firstChild;return Z(h,A(pi,{title:"Confirm Addresses",get previousStep(){return o()}}),g),Z(p,A(Oe,{get when(){return i.length===0},get children(){return B7e()}}),m),Z(p,A(Oe,{get when(){return i.length>0},get children(){return A(bp,{class:"max-h-45vh space-y-2",get children(){return A(pt,{each:i,children:(y,v)=>(()=>{var w=F7e(),_=w.firstChild,x=_.nextSibling,E=x.nextSibling;return w.$$click=()=>s(v(),"isSelected",!y.isSelected),Z(w,A(Tp,{get id(){return y.address},class:"size-9"}),_),Z(_,A(Gi,{get address(){return y.address}}),null),Z(_,A(Hr,{class:"font-normal text-zinc-400",get value(){return y.balance},suffix:" SOL",showZero:!0}),null),Ge(S=>{var T={"cursor-pointer hover:bg-zinc-700/60":i.length>1,hidden:!a()&&!y.isActive},C=i.length===1,P={"i-tabler:square-check-filled bg-primary-200":y.isSelected,"i-tabler:square bg-zinc-600":!y.isSelected};return S.e=nr(w,T,S.e),C!==S.t&&(w.disabled=S.t=C),S.a=nr(E,P,S.a),S},{e:void 0,t:void 0,a:void 0}),w})()})}})}}),m),Z(p,A(Oe,{get when(){return kr(()=>l()>0)()&&!a()},get children(){var y=N7e(),v=y.firstChild,w=v.firstChild,_=w.nextSibling;return _.nextSibling,y.$$click=()=>f(),Z(v,l,_),y}}),m),m.$$click=d,Ge(y=>{var v={"cursor-not-allowed bg-zinc-700 text-zinc-400":!u(),"cursor-pointer bg-primary-200 active:bg-primary-200/80 text-zinc-950":u()},w=!u();return y.e=nr(m,v,y.e),w!==y.t&&(m.disabled=y.t=w),y},{e:void 0,t:void 0}),h})()};At(["click"]);var z7e=le("<div class=break-words>"),q7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-tight"></p><form class="bg-zinc-900 rounded space-y-3"><div><label class="uppercase text-xs text-zinc-400 font-medium">Wallet Label</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"placeholder="eg. Trading, Savings, Investments"name=wallet-name-input maxlength=16></div><div><label class="uppercase text-xs text-zinc-400 font-medium">Enter Password</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"type=password name=password-input placeholder="At least 6 characters"minlength=6></div><div><label class="uppercase text-xs text-zinc-400 font-medium">Confirm Password</label><input class="ring-1 ring-zinc-800 focus:ring-primary-200 w-full outline-none rounded-xl p-3 bg-zinc-950 transition-100"type=password name=confirm-password-input placeholder="Re-enter your password"minlength=6></div><button class="w-full p-2.5 rounded-xl font-semibold transition-100 mt-2">');const j7e="wallet-name-input",V7e="password-input",K7e="confirm-password-input",q9=6,ha={LABEL_AND_PASSWORD:"label-and-password",LABEL_ONLY:"label-only",PASSWORD_ONLY:"password-only"},H7e=()=>{const r=ci(),{importWallet:e,accounts:t}=Jr(),{importForm:n,setStep:i}=$n(),[s,o]=Pe(!1),a=Te(()=>n().type==="Jupiter Sync"?ha.PASSWORD_ONLY:t().length===0?ha.LABEL_AND_PASSWORD:ha.LABEL_ONLY),c=Te(()=>t().length>0),l=Te(()=>{const d=n();return d.type===ur.EXISTING_SEED_PHRASE?st.EXISTING_SEED_PHRASE:d.type===ur.JUPITER_SYNC?st.JUPITER_SYNC_IMPORT:d.type===ur.SEED_PHRASE&&d.isNew?st.CREATE_SEED_PHRASE_VIEW:d.type===ur.READONLY?st.IMPORT_READONLY:st.SHARED_CHOOSE_ADDRESSES});async function u(d){d.preventDefault();const h=new FormData(d.target),g=h.get(j7e)?.toString().trim()||"",p=h.get(V7e)?.toString(),m=h.get(K7e)?.toString();if(!g&&a()!==ha.PASSWORD_ONLY)return;const y=!c();if(y){if(!p)return;if(p!==m){r.alert({title:"Passwords Do Not Match",content:"Please ensure that your passwords match."});return}if(p.length<q9){r.alert({title:"Password Too Short",content:`Your password must be at least ${q9} characters long.`});return}}o(!0);const v=n();if(v.type===ur.READONLY&&v.address&&await e({type:"readonly",label:g,password:p,address:v.address}),v.type===ur.PRIVATE_KEY&&v.privateKey&&await e({type:"standalone",label:g,password:p,privateKey:v.privateKey}),v.type===ur.SEED_PHRASE&&v.mnemonic&&v.accounts)for(let w=0;w<v.accounts.length;w++){const _=v.accounts[w];await e({type:"mnemonic",label:w===0?g:g+` (${w})`,password:p,privateKey:_.privateKey,mnemonic:v.mnemonic,path:_.path})}if(v.type===ur.EXISTING_SEED_PHRASE&&v.mfp&&await e({type:"mnemonic_existing",label:g,mfp:v.mfp,customDerivationPath:v.customDerivationPath}),v.type===ur.LEDGER&&v.accounts)for(let w=0;w<v.accounts.length;w++){const _=v.accounts[w];await e({type:"ledger",label:w===0?g:g+` (${w})`,password:p,address:_.address,path:_.path})}if(v.type===ur.KEYSTONE&&v.accounts)for(let w=0;w<v.accounts.length;w++){const _=v.accounts[w];await e({type:"keystone",label:w===0?g:g+` (${w})`,password:p,address:_.address,path:_.path,mfp:_.mfp})}if(v.type===ur.TREZOR&&v.accounts)for(let w=0;w<v.accounts.length;w++){const _=v.accounts[w];await e({type:"trezor",label:w===0?g:g+` (${w})`,password:p,address:_.address,path:_.path})}if(v.type===ur.PRIVY&&v.address&&await e({type:"privy",label:g,password:p,address:v.address}),v.type===ur.JUPITER_SYNC&&v.accounts)for(const w of v.accounts)w.type===ur.PRIVATE_KEY?await e({type:"standalone",label:w.label,privateKey:w.privateKey,password:p}):w.type===ur.SEED_PHRASE&&await e({type:"mnemonic",label:w.label,privateKey:w.privateKey,mnemonic:w.mnemonic,path:w.path,password:p});i(y?st.SHARED_RECOMMEMDED_SETTINGS:st.FINAL_STEP)}async function f(d){try{await u(d)}catch(h){const g=h instanceof Error?h.message:String(h);r.alert({title:"Failed to Add Wallet",content:(()=>{var p=z7e();return Z(p,g),p})()}),o(!1)}}return(()=>{var d=q7e(),h=d.firstChild,g=h.nextSibling,p=g.firstChild,m=p.firstChild;m.nextSibling;var y=p.nextSibling,v=y.firstChild;v.nextSibling;var w=y.nextSibling,_=w.firstChild;_.nextSibling;var x=w.nextSibling;return Z(d,A(pi,{get title(){return a()===ha.PASSWORD_ONLY?"Secure Your Wallet":"Label Your Wallet"},get previousStep(){return l()}}),h),Z(h,A(Kt,{get children(){return[A(Re,{get when(){return a()===ha.LABEL_AND_PASSWORD},children:"Enter a short label for your wallet, and secure it with a strong password."}),A(Re,{get when(){return a()===ha.LABEL_ONLY},children:"Enter a short label for your wallet."}),A(Re,{get when(){return a()===ha.PASSWORD_ONLY},children:"Secure your wallet with a strong password."})]}})),g.addEventListener("submit",E=>f(E)),x.addEventListener("submit",E=>u(E)),Z(x,A(Oe,{get when(){return s()},fallback:"Next",children:"Loading..."})),Ge(E=>{var S=a()===ha.PASSWORD_ONLY,T=a()===ha.LABEL_ONLY,C=a()===ha.LABEL_ONLY,P={"cursor-wait bg-zinc-700":s(),"cursor-pointer active:bg-primary-200/80 bg-primary-200 text-zinc-950":!s()},V=s();return S!==E.e&&p.classList.toggle("hidden",E.e=S),T!==E.t&&y.classList.toggle("hidden",E.t=T),C!==E.a&&w.classList.toggle("hidden",E.a=C),E.o=nr(x,P,E.o),V!==E.i&&(x.disabled=E.i=V),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d})()};$u.Label;const Tk=$u;$u.ErrorMessage;$u.Description;const Rk=r=>{const[e,t]=Lt(r,["class","children"]);return[A($u.Input,{}),A($u.Control,at({get class(){return gr("inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-shadow data-[disabled]:cursor-not-allowed transition-property-[box-shadow,color,background-color] ring-1 ring-zinc-800 bg-zinc-700 data-[checked]:bg-primary-200/20 hover:ring-primary-200 data-[disabled]:hover:ring-zinc-800",e.class)}},t,{get children(){return e.children}}))]},kk=r=>{const[e,t]=Lt(r,["class"]);return A($u.Thumb,at({get class(){return gr("pointer-events-none block h-4 w-4 translate-x-0 rounded-full shadow-lg transition-transform data-[checked]:translate-x-4 bg-zinc-400 data-[checked]:bg-primary-200",e.class)}},t))};var W7e=le('<div><div class="space-y-1 leading-4"><div class="font-medium leading-4"></div><div class="text-sm text-zinc-400 leading-4">');const sI=r=>(()=>{var e=W7e(),t=e.firstChild,n=t.firstChild,i=n.nextSibling;return Z(n,()=>r.title),Z(i,()=>r.description),Z(e,A(Tk,{class:"flex items-center",get checked(){return r.checked},get onChange(){return r.onChange},get children(){return A(Rk,{get children(){return A(kk,{})}})}}),null),Ge(()=>tn(e,gr("p-3 rounded-xl bg-zinc-900 flex items-center justify-between gap-4",r.cardClass))),e})();var G7e=le('<div><div><div class="space-y-1 leading-4"><div class="font-medium leading-4">Auto Approve Notifications</div><div class="text-sm text-zinc-400 leading-4">Receive a notification whenever a transaction is automatically approved');const DZ=r=>{const{settings:e,updateUserSettings:t}=xi();return(()=>{var n=G7e(),i=n.firstChild;return i.firstChild,Z(n,A(sI,{get checked(){return e.jupiterAutoApprove},onChange:s=>{t({type:"setJupiterAutoApprove",value:s})},get cardClass(){return r.cardClass},title:"Jupiter Auto Approve",description:"Automatically approve transactions made on Jupiter's applications (eg. jup.ag)"}),i),Z(n,A(sI,{get checked(){return e.meteoraAutoApprove},onChange:s=>{t({type:"setMeteoraAutoApprove",value:s})},get cardClass(){return r.cardClass},title:"Meteora Auto Approve",description:"Automatically approve transactions made on Meteora's applications (eg. meteora.ag)"}),i),Z(n,A(Oe,{get when(){return r.showOrb},get children(){return A(sI,{get checked(){return e.orbAutoApprove},onChange:s=>{t({type:"setOrbAutoApprove",value:s})},get cardClass(){return r.cardClass},title:"Orb Auto Approve",description:"Automatically approve transactions made on Orb (eg. orb.helius.dev)"})}}),i),Z(i,A(Tk,{class:"flex items-center",get checked(){return e.autoApproveNotifications},onChange:s=>{t({type:"setAutoApproveNotifications",value:s})},get disabled(){return!e.jupiterAutoApprove&&!e.meteoraAutoApprove&&!e.orbAutoApprove},get children(){return A(Rk,{get children(){return A(kk,{})}})}}),null),Ge(s=>{var o=gr("space-y-2",r.class),a=gr("p-3 rounded-xl bg-zinc-900 flex items-center justify-between gap-4 transition-100",{"opacity-50":!e.jupiterAutoApprove&&!e.meteoraAutoApprove&&!e.orbAutoApprove},r.cardClass);return o!==s.e&&tn(n,s.e=o),a!==s.t&&tn(i,s.t=a),s},{e:void 0,t:void 0}),n})()};var Y7e=le('<div class="space-y-3 w-full p-6 bg-zinc-900 rounded-xl"><p class="text-zinc-400 leading-5">Review the recommended settings. You can always change them later in your settings.</p><button class="cursor-pointer w-full p-2.5 rounded-xl bg-primary-200 text-zinc-950 font-semibold active:bg-primary-200/80 transition-100">Get Started');const J7e=()=>{const{setStep:r}=$n();return(()=>{var e=Y7e(),t=e.firstChild,n=t.nextSibling;return Z(e,A(pi,{title:"Recommended Settings"}),t),Z(e,A(DZ,{cardClass:"bg-zinc-800"}),n),n.$$click=()=>r(st.FINAL_STEP),e})()};At(["click"]);var X7e=le('<div class="flex items-center justify-center gap-1.5 mt-3">'),Z7e=le('<div class="w-2 h-2 rounded-full">');const Q7e=()=>{const{step:r}=$n(),e=Te(()=>r()===st.IMPORT_TYPE||r()===st.CREATE_TYPE?1:r().startsWith("import-")||r().startsWith("create-")||r().startsWith("privy-")||r().startsWith("jupiter-sync-")||r()===st.EXISTING_SEED_PHRASE?2:r().startsWith("shared-")?3:0);return A(Oe,{get when(){return e()!==0},get children(){var t=X7e();return Z(t,A(pt,{each:[1,2,3],children:n=>(()=>{var i=Z7e();return Ge(s=>{var o=n===e(),a=n!==e();return o!==s.e&&i.classList.toggle("bg-primary-200",s.e=o),a!==s.t&&i.classList.toggle("bg-zinc-600",s.t=a),s},{e:void 0,t:void 0}),i})()})),t}})};var e9e=le('<div class="flex-1 flex items-center justify-center p-4 gap-3"><div class=w-full>');const t9e=()=>A(SLe,{get children(){return A(r9e,{})}}),r9e=()=>{const{step:r}=$n();return(()=>{var e=e9e(),t=e.firstChild;return Z(e,A(GX,{raysOrigin:"top-center",raysColor:"#C7F284",raysSpeed:.25,lightSpread:.69,rayLength:4.2,followMouse:!1,noiseAmount:.1,distortion:.03,class:"fixed inset-0 pointer-events-none z--1"}),t),Z(t,A(Kt,{get children(){return[A(Re,{get when(){return r()===st.MAIN},get children(){return A(E7e,{})}}),A(Re,{get when(){return r()===st.IMPORT_TYPE},get children(){return A(PFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_READONLY},get children(){return A(gFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_PRIVATE_KEY},get children(){return A(dFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_SEED_PHRASE},get children(){return A(bFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_HARDWARE_WALLET},get children(){return A(nFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_LEDGER},get children(){return A(lFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_KEYSTONE},get children(){return A(oFe,{})}}),A(Re,{get when(){return r()===st.IMPORT_TREZOR},get children(){return A(_Fe,{})}}),A(Re,{get when(){return r()===st.CREATE_TYPE},get children(){return A(FLe,{})}}),A(Re,{get when(){return r()===st.PRIVY_TYPE},get children(){return A(M7e,{})}}),A(Re,{get when(){return r()===st.PRIVY_GOOGLE||r()===st.PRIVY_APPLE||r()===st.PRIVY_TWITTER||r()===st.PRIVY_DISCORD},get children(){return A(T7e,{})}}),A(Re,{get when(){return r()===st.CREATE_SEED_PHRASE_WARNING},get children(){return A(OLe,{})}}),A(Re,{get when(){return r()===st.CREATE_SEED_PHRASE_VIEW},get children(){return A(RLe,{})}}),A(Re,{get when(){return r()===st.EXISTING_SEED_PHRASE},get children(){return A(VLe,{})}}),A(Re,{get when(){return r()===st.JUPITER_SYNC_TYPE},get children(){return A(_7e,{})}}),A(Re,{get when(){return r()===st.JUPITER_SYNC_IMPORT},get children(){return A(y7e,{})}}),A(Re,{get when(){return r()===st.JUPITER_SYNC_EXPORT},get children(){return A(p7e,{})}}),A(Re,{get when(){return r()===st.SHARED_CHOOSE_ADDRESSES},get children(){return A(U7e,{})}}),A(Re,{get when(){return r()===st.SHARED_LABEL_WALLET},get children(){return A(H7e,{})}}),A(Re,{get when(){return r()===st.SHARED_RECOMMEMDED_SETTINGS},get children(){return A(J7e,{})}}),A(Re,{get when(){return r()===st.FINAL_STEP},get children(){return A(JLe,{})}})]}}),null),Z(t,A(Q7e,{}),null),Z(e,A(QLe,{}),null),e})()};var n9e=le('<div class="i-tabler:chevron-down size-4.5 text-zinc-500 group-hover:text-zinc-300 transition-100">'),i9e=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No more trades'),s9e=le('<div class="flex flex-col"><div class="flex items-center h-14 px-4 bg-zinc-900 gap-1"><div class=flex-1></div><button class="text-zinc-300 transition-100 p-2 bg-zinc-800 rounded-md"><div class="i-tabler:refresh size-4"></div></button></div><div class="grid grid-cols-3 gap-4 px-4 pt-2 pb-4 bg-zinc-900"></div><div class><table class=w-full><thead><tr class="border-b border-zinc-800"><th class="font-normal text-zinc-400 flex items-center justify-start px-4 py-2 text-sm gap-0.5 hover:text-zinc-50 transition-100 cursor-pointer"><div>Last Traded</div><div class="i-tabler:arrow-down size-4 text-primary-200"></div></th><th class="font-normal text-zinc-400 text-right py-2 text-sm">Balance</th><th class="font-normal text-zinc-400 flex items-center justify-end px-4 py-2 text-sm gap-0.5 hover:text-zinc-50 transition-100 cursor-pointer"><div class="i-tabler:arrow-down size-4 text-primary-200"></div><div>Total PnL</div></th></tr></thead><tbody class="divide-y divide-zinc-900">'),o9e=le('<div class="leading-none font-medium">'),a9e=le('<div><div class="text-sm text-zinc-400 leading-none mb-1">'),c9e=le('<div class="bg-zinc-800 animate-pulse h-4 w-16 rounded">'),l9e=le('<tr><td class="h-15 px-4 flex items-center gap-2"><div class="bg-zinc-800 animate-pulse size-8 rounded-full"></div><div class=space-y-1><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-16 bg-zinc-800 animate-pulse rounded"></div></div></td><td class=h-15><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-800 animate-pulse rounded"></div></div></td><td class="h-15 px-4"><div class="space-y-1 flex flex-col items-end"><div class="h-4 w-16 bg-zinc-800 animate-pulse rounded">'),u9e=le('<tr class="hover:bg-zinc-900 cursor-pointer"><td class="h-15 px-4 flex items-center"><div><div class="text-sm font-medium"></div><div class="text-xs text-zinc-400"></div></div></td><td class="h-15 text-right text-sm space-y--0.25"><div class=font-medium></div><div class="text-xs text-zinc-400"></div></td><td class="h-15 px-4 text-right text-sm font-medium">');const f9e=()=>{const r=SX(),[e,t]=Pe("1d"),n=Te(()=>{const h=e()==="1d"?"1d":e()==="7d"?"7d":e()==="30d"?"30d":"total";return[{label:"Total PnL",value:r.data?.[h].pnlTotal??0},{label:"Unrealised",value:r.data?.[h].pnlUnrealised??0},{label:"Realised",value:r.data?.[h].pnlRealised??0}]}),{formatLargeNumbers:i}=qo(),{selectedAccount:s}=Jr(),o=Cs(),a=Te(()=>new Map(o.data?.tokens.map(h=>[h.id,h]))),c=Gn(),[l,u]=Pe("recent"),f=hi(()=>({queryKey:["positions",s()?.address,l()],queryFn:async()=>ws.getPnlPositions(s().address,{sort:l()}),enabled:!!s()?.address,refetchInterval:6e4}));function d(){f.isFetching||(r.refetch(),f.refetch())}return(()=>{var h=s9e(),g=h.firstChild,p=g.firstChild,m=p.nextSibling,y=m.firstChild,v=g.nextSibling,w=v.nextSibling,_=w.firstChild,x=_.firstChild,E=x.firstChild,S=E.firstChild,T=S.firstChild,C=T.nextSibling,P=S.nextSibling,V=P.nextSibling,L=V.firstChild,D=x.nextSibling;return Z(g,A(ui,{title:"PnL Analysis"}),p),Z(g,A(ec,{options:["1d","All"],get value(){return e()},onChange:t,disallowEmptySelection:!0,itemComponent:b=>A(ec.Item,{get item(){return b.item},class:"py-2 px-2.5 cursor-pointer hover:bg-zinc-700/50 rounded-md text-sm",get children(){return A(ec.ItemLabel,{get children(){return b.item.rawValue}})}}),get children(){return[A(ec.Trigger,{class:"w-18 flex items-center justify-between py-1.5 pl-2.5 pr-1.5 bg-zinc-800 rounded-md text-zinc-300 hover:ring-1 hover:ring-primary-200 hover:text-zinc-50 transition-100 cursor-pointer group",get children(){return[A(ec.Value,{class:"text-sm",children:b=>b.selectedOption()}),A(ec.Icon,{get children(){return n9e()}})]}}),A(ec.Portal,{get children(){return A(ec.Content,{class:"bg-zinc-800 ring-1 ring-zinc-700 rounded-md",get children(){return A(ec.Listbox,{})}})}})]}}),m),m.$$click=()=>d(),Z(v,A(pt,{get each(){return n()},children:b=>(()=>{var I=a9e(),B=I.firstChild;return Z(B,()=>b.label),Z(I,A(Oe,{get when(){return!r.isLoading},get fallback(){return c9e()},get children(){var F=o9e();return Z(F,A(Ia,{get children(){return i(b.value,"currency",!0)}})),Ge(z=>{var G=b.value>=.01,Q=b.value<=-.01;return G!==z.e&&F.classList.toggle("text-green-400",z.e=G),Q!==z.t&&F.classList.toggle("text-red-400",z.t=Q),z},{e:void 0,t:void 0}),F}}),null),I})()})),S.$$click=()=>u("recent"),V.$$click=()=>u("profit"),Z(D,A(Oe,{get when(){return!f.isLoading},get fallback(){return A(pt,{get each(){return Array.from({length:20})},children:()=>l9e()})},get children(){return A(pt,{get each(){return f.data?.positions},children:b=>(()=>{var I=u9e(),B=I.firstChild,F=B.firstChild,z=F.firstChild,G=z.nextSibling,Q=B.nextSibling,X=Q.firstChild,O=X.nextSibling,R=Q.nextSibling;return I.$$click=()=>c(Qe.ASSETS(b.id)),Z(B,A(ln,{get src(){return b.icon},class:"size-8 mr-2"}),F),Z(z,()=>b.symbol||b.id.slice(0,4)),Z(G,A(wX,{get date(){return new Date(b.lastActiveTime)}})),Z(X,A(Ai,{type:"compact",get value(){return a().get(b.id)?.value??0},prefix:"$"})),Z(O,A(Oe,{get when(){return(a().get(b.id)?.amount??0)>.01},get fallback(){return Is.DASH},get children(){return A(Ai,{type:"compact",get value(){return a().get(b.id)?.amount??0}})}})),Z(R,A(Ai,{type:"compact",get value(){return b.pnlTotal},get prefix(){return b.pnlTotal>0?"+$":`${Is.MINUS}$`}})),Ge(M=>{var k=(a().get(b.id)?.value??0)<.01,j=b.pnlTotal>0,te=b.pnlTotal<0,ae=b.pnlTotal===0;return k!==M.e&&X.classList.toggle("text-zinc-400",M.e=k),j!==M.t&&R.classList.toggle("text-green-400",M.t=j),te!==M.a&&R.classList.toggle("text-red-400",M.a=te),ae!==M.o&&R.classList.toggle("text-zinc-400",M.o=ae),M},{e:void 0,t:void 0,a:void 0,o:void 0}),I})()})}})),Z(w,A(Kt,{get children(){return[A(Re,{get when(){return f.isLoading},get children(){return[]}}),A(Re,{get when(){return f.data&&f.data.positions.length>0},get children(){return i9e()}}),A(Re,{when:!0,get children(){return A(Jm,{type:"pnl"})}})]}}),null),Ge(b=>{var I={"cursor-wait":f.isFetching,"cursor-pointer hover:text-zinc-50 hover:ring-1 hover:ring-primary-200":!f.isFetching},B=f.isFetching,F={"animate-spin animate-direction-reverse":f.isFetching},z=l()!=="recent",G=l()!=="profit";return b.e=nr(m,I,b.e),B!==b.t&&(m.disabled=b.t=B),b.a=nr(y,F,b.a),z!==b.o&&C.classList.toggle("opacity-0",b.o=z),G!==b.i&&L.classList.toggle("opacity-0",b.i=G),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),h})()};At(["click"]);var d9e=le('<div class="flex flex-col p-4 space-y-4"><div class="flex-1 flex flex-col items-center"><div class="mt-8 text-zinc-400">Send only <span class=text-zinc-50>Solana</span> assets to this address</div><div class="break-all max-w-3xs text-center leading-4 mt-4 select-all">');const h9e=()=>{const r=Fa(),{selectedAccount:e}=Jr(),{copyToClipboard:t,showCheckmark:n}=yd();function i(){t(e()?.address??"")}return(()=>{var s=d9e(),o=s.firstChild,a=o.firstChild,c=a.nextSibling;return Z(s,A(ui,{title:"Receive Assets"}),o),Z(o,A(Ik,{get payload(){return e()?.address??""},class:"bg-zinc-50 fill-zinc-950 rounded-2xl size-48 mt-8"}),a),Z(c,()=>e()?.address),Z(s,A(_i,{onApproveClick:()=>i(),onCancelClick:()=>r(),get approveTitle(){return n()?"Copied":"Copy Address"},cancelTitle:"Close"}),null),s})()};class fm{static#e={"x-client-platform":"jupiter.extension"};static#t="https://ultra-api.jup.ag";static async getOrder(e,t){return an.get(`${this.#t}/order`,{searchParams:e,throwHttpErrors:!1,signal:t,headers:this.#e}).json()}static async getRouters(){return an.get(`${this.#t}/order/routers`).json()}static async postExecute(e){return an.post(`${this.#t}/execute`,{json:e,headers:this.#e}).json()}static async getShield(e){return an.get(`${this.#t}/shield`,{searchParams:{mints:e.join(","),isJupiter:!0}}).json()}static async postReclaimCraft(e){return an.post(`${this.#t}/reclaim/craft`,{json:e,throwHttpErrors:!1,headers:this.#e}).json()}static async postReclaimExecute(e){return an.post(`${this.#t}/reclaim/execute`,{json:e,throwHttpErrors:!1,headers:this.#e}).json()}}const dm={SELECT:"select",REVIEW:"review"},p9e=.00203928,[g9e,m9e]=El(()=>{const[r,e]=Pe(dm.SELECT),[t,n]=Pe([]),i=Te(()=>new Set(t())),s=Cs(),o=Te(()=>s.data?.tokens.find(g=>g.id===Au.SOL.id)?.price??0),a=Te(()=>(s.data?.tokens??[]).filter(g=>g.reclaimableLamports!==void 0).sort((g,p)=>g.isVerified!==p.isVerified?g.isVerified?1:-1:(g.symbol??"").localeCompare(p.symbol??""))),c=Te(()=>a().filter(g=>i().has(g.id))),l=Te(()=>t().length*p9e),u=g=>{n(p=>p.includes(g)?p.filter(m=>m!==g):[...p,g])},f=()=>{n(a().map(g=>g.id))},d=()=>{n([])},h=Te(()=>{const g=a();return g.length===0?!1:g.every(p=>i().has(p.id))});return{view:r,setView:e,holdings:s,emptyAccounts:a,selectedTokenIds:t,selectedTokens:c,estimatedReclaimAmount:l,solPrice:o,toggleToken:u,selectAll:f,deselectAll:d,isAllSelected:h}}),Ok=()=>{const r=m9e();if(!r)throw new Error("useReclaim must be used within a ReclaimProvider");return r};var y9e=le("<div> Tokens"),v9e=le('<div class="flex flex-col items-end"><div class="text-zinc-50 leading-4"> SOL'),j9=le('<div class="h-6 w-24 animate-pulse rounded bg-zinc-800">'),b9e=le('<div class="flex items-center gap-1.5"><div class="i-tabler:gas-station size-4.5 text-zinc-400">'),w9e=le('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin text-primary-200">'),x9e=le('<div class="size-16 bg-green-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:check text-green-400">'),_9e=le('<div class="size-16 bg-red-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:x text-red-400">'),S9e=le('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:recycle text-primary-200">'),E9e=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This action cannot be reversed, please check the details carefully before proceeding.'),A9e=le('<div class="flex-1 p-4 flex flex-col pb-8"><div class="flex flex-col items-center justify-center mb-5"><div class=my-6></div><div class="text-2xl font-semibold"></div><div class="text-zinc-400 font-medium mt-2"></div></div><div class="divide-y divide-zinc-800 rounded-xl overflow-hidden bg-zinc-900 mb-4"></div><div class=flex-1>'),I9e=le('<div class="h-13 px-4 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>'),C9e=le('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400></div><button class="font-medium flex items-center text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-4.5 mr-1">');const T9e=200;function R9e(r){const e=n=>r.reduce((i,s)=>i+BigInt(s[n]??"0"),0n).toString(),t=n=>r.reduce((i,s)=>i+(s[n]??0),0);return{transactions:r.flatMap(n=>n.transactions??[]),code:r.every(n=>n.code===0)?0:1,totalLamportsReclaimed:e("totalLamportsReclaimed"),netLamportsReclaimed:e("netLamportsReclaimed"),netReclaimedUsdAmount:t("netReclaimedUsdAmount"),serviceFeeLamports:e("serviceFeeLamports"),serviceFeeUsdAmount:t("serviceFeeUsdAmount"),gasCostLamports:e("gasCostLamports"),gasCostUsdAmount:t("gasCostUsdAmount"),skippedMints:r.flatMap(n=>n.skippedMints??[]),totalTime:Math.max(...r.map(n=>n.totalTime??0)),expireAt:r.map(n=>n.expireAt).sort().at(0)??""}}const k9e=()=>{const{setView:r,holdings:e,selectedTokens:t,estimatedReclaimAmount:n,solPrice:i}=Ok(),{selectedAccount:s}=Jr(),{openExplorer:o}=Al(),a=Te(()=>s()?.address),c=Gn(),l=Cs(),[u,f]=Pe("idle"),[d,h]=Pe([]),[g,p]=Pe(null),[m,y]=Pe(null),[v,w]=Pe(null),_=Te(()=>v()??t()),x=Te(()=>{const C=g();return C?.netLamportsReclaimed?Number(C.netLamportsReclaimed)/1e9:0});async function E(){const C=a();if(!C){In(()=>{f("simulation_error"),y("No wallet address found")});return}if(u()==="tx_sending")return;const P=t().map(I=>I.id),V=o5e(P,T9e);let L;try{L=await Promise.all(V.map(I=>fm.postReclaimCraft({owner:C,mints:I})))}catch(I){In(()=>{f("simulation_error"),y(I instanceof Error?I.message:"Failed to craft transaction")});return}const D=L.find(I=>I.error);if(D){In(()=>{f("simulation_error"),y(D.error??"Failed to craft transaction")});return}const b=R9e(L);if(p(b),b.transactions.length===0){In(()=>{f("simulation_error"),y("Failed to craft transaction")});return}f("simulation_success")}Pf(()=>{u()==="simulation_success"&&E()},1e4,setInterval),mr(E);async function S(){const C=g();if(!C||!C.transactions||C.transactions.length===0){f("tx_error");return}f("tx_sending"),w(t());try{const P=C.transactions.map(D=>D.transaction),{signedTransactions:V}=s()?.type==="privy"?{signedTransactions:await Promise.all(P.map(D=>Cp.signTransaction(D)))}:await qt.signTransactions({origin:window.location.origin,signerAddress:a(),transactions:P,skipApproval:!0,forcePopup:!0}),L=[];for(let D=0;D<C.transactions.length;D++){const b=await fm.postReclaimExecute({requestId:C.transactions[D].requestId,signedTransaction:V[D]});if(b.code!==0){In(()=>{f("tx_error"),h(b.signature?[...L,b.signature]:L),y(b.error??"Transaction failed")});return}L.push(b.signature)}h(L),f("tx_success")}catch(P){console.error(P),In(()=>{f("tx_error"),y(P instanceof Error?P.message:"Transaction failed")})}finally{e.refetch(),l.refetch()}}const T=Te(()=>{const C=g(),P=_().length,V=x(),L=C?.netReclaimedUsdAmount??x()*i(),D=C?C.gasCostUsdAmount??Number(C.gasCostLamports??0)/1e9*i():null;return[{title:"Tokens",value:(()=>{var b=y9e(),I=b.firstChild;return Z(b,P,I),b})()},{title:"Reclaimed",value:A(Kt,{get children(){return[A(Re,{when:D!==null,get children(){var b=v9e(),I=b.firstChild,B=I.firstChild;return Z(I,()=>V.toFixed(6),B),Z(b,A(Hr,{class:"text-sm text-zinc-400 font-normal",value:L,prefix:"$"}),null),b}}),A(Re,{when:!0,get children(){return j9()}})]}})},{title:"Network Fee",value:A(Kt,{get children(){return[A(Re,{when:D!==null,get children(){var b=b9e();return b.firstChild,Z(b,A(Hr,{value:D??0,prefix:"$"}),null),b}}),A(Re,{when:!0,get children(){return j9()}})]}})}]});return(()=>{var C=A9e(),P=C.firstChild,V=P.firstChild,L=V.nextSibling,D=L.nextSibling,b=P.nextSibling;return b.nextSibling,Z(V,A(Kt,{get children(){return[A(Re,{get when(){return u()==="tx_sending"},get children(){return w9e()}}),A(Re,{get when(){return u()==="tx_success"},get children(){return x9e()}}),A(Re,{get when(){return u()==="simulation_error"||u()==="tx_error"},get children(){return _9e()}}),A(Re,{when:!0,get children(){return S9e()}})]}})),Z(L,A(Kt,{get children(){return[A(Re,{get when(){return u()==="tx_sending"},children:"Reclaiming..."}),A(Re,{get when(){return u()==="tx_success"},children:"Successfully Reclaimed"}),A(Re,{get when(){return u()==="simulation_error"||u()==="tx_error"},children:"Failed to Reclaim"}),A(Re,{when:!0,children:"Confirm Reclaim"})]}})),Z(D,A(Kt,{get children(){return[A(Re,{get when(){return u()==="tx_success"},get children(){return[kr(()=>_().length)," ",kr(()=>_().length>1?"tokens":"token")," for"," ",kr(()=>x().toFixed(6))," SOL"]}}),A(Re,{get when(){return u()==="simulation_error"||u()==="tx_error"},get children(){return m()??"An error occurred"}}),A(Re,{when:!0,get children(){return[kr(()=>_().length)," ",kr(()=>_().length>1?"tokens":"token")," for ~",kr(()=>n().toFixed(4))," SOL"]}})]}})),Z(b,A(pt,{get each(){return T()},children:({title:I,value:B})=>(()=>{var F=I9e(),z=F.firstChild,G=z.nextSibling;return Z(z,I),Z(G,B),F})()}),null),Z(b,A(Oe,{get when(){return u()==="tx_success"},get children(){return A(pt,{get each(){return d()},children:(I,B)=>(()=>{var F=C9e(),z=F.firstChild,G=z.nextSibling;return G.firstChild,Z(z,(()=>{var Q=kr(()=>d().length>1);return()=>Q()?`Transaction ${B()+1}`:"Transaction"})()),G.$$click=()=>o({type:"tx",value:I}),Z(G,A(Gi,{address:I}),null),F})()})}}),null),Z(C,A(Oe,{get when(){return kr(()=>u()!=="tx_success")()&&u()!=="tx_error"},get children(){return E9e()}}),null),Z(C,A(_i,{get onCancelClick(){return u()==="tx_success"?()=>c(Qe.HOME):()=>r(dm.SELECT)},onApproveClick:S,get cancelTitle(){return u()==="tx_success"?"Close":"Back"},approveTitle:"Reclaim",get isApproveDisabled(){return u()!=="simulation_success"}}),null),C})()};At(["click"]);var O9e=le('<div class="p-8 flex items-center justify-center"><div class="i-tabler:loader-2 animate-spin size-8 text-zinc-500">'),P9e=le('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-4 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="i-tabler:recycle size-7 text-zinc-400"></div></div></div><div class="font-medium mb-2">Your eligible token accounts will appear here!</div><div class="text-sm text-zinc-400 text-center">No empty or unverified token accounts available to reclaim'),$9e=le('<div class="w-full flex items-center gap-3"><button class="size-5 cursor-pointer"></button><div class=space-y-0.5><div class="font-semibold leading-none text-sm">Empty Accounts</div><div class="text-sm leading-none text-zinc-400"> account<!> to reclaim</div></div><div class=flex-1></div><div class="text-right w-24 space-y-0.5"><div class="font-semibold text-sm"></div></div><div class="size-5 text-zinc-500 transition-transform i-tabler:chevron-down ui-expanded:rotate-180">'),D9e=le('<div class="flex-1 relative bg-zinc-950"><div class="absolute inset-0 flex flex-col"><div class="flex-1 overflow-y-auto min-h-0"><div class=p-4></div><div class="px-4 mb-4 text-zinc-400 text-sm leading-tight">Recover the SOL rent paid for opening your token accounts. Simply close the accounts you no longer use to reclaim your funds.</div><div></div></div><div class="px-4 py-3 space-y-4"><div class="flex justify-between items-center"><div><div class="font-medium leading-none">Reclaim</div><div class="text-zinc-400 text-sm"> account<!> selected</div></div><div><div class="text-right font-medium leading-none"></div><div class="text-right text-zinc-400">'),M9e=le('<div class="size-3.5 i-tabler:rosette-discount-check text-primary-200">'),B9e=le('<button class="w-full text-left cursor-pointer flex items-center pl-8 pr-4 gap-3 h-12 hover:bg-zinc-900"><div class=size-5></div><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold text-sm text-zinc-300"></div></div><div class="text-xs text-zinc-400"></div></div><div class=flex-1></div><div class="text-sm text-zinc-400 font-medium">');const N9e=()=>{const r=Fa(),{setView:e,holdings:t,emptyAccounts:n,selectedTokenIds:i,toggleToken:s,selectAll:o,deselectAll:a,isAllSelected:c,estimatedReclaimAmount:l,solPrice:u}=Ok();return mr(()=>{o()}),(()=>{var f=D9e(),d=f.firstChild,h=d.firstChild,g=h.firstChild,p=g.nextSibling,m=p.nextSibling,y=h.nextSibling,v=y.firstChild,w=v.firstChild,_=w.firstChild,x=_.nextSibling,E=x.firstChild,S=E.nextSibling;S.nextSibling;var T=w.nextSibling,C=T.firstChild,P=C.nextSibling;return Z(g,A(ui,{title:"Reclaim SOL"})),Z(m,A(Kt,{get children(){return[A(Re,{get when(){return!t.data},get children(){return O9e()}}),A(Re,{get when(){return n().length===0},get children(){return P9e()}}),A(Re,{when:!0,get children(){return A($f,{defaultOpen:!0,get children(){return[A($f.Trigger,{class:"flex-1 flex items-center gap-3 cursor-pointer text-left  h-15 hover:bg-zinc-900 w-full px-4",get children(){var V=$9e(),L=V.firstChild,D=L.nextSibling,b=D.firstChild,I=b.nextSibling,B=I.firstChild,F=B.nextSibling;F.nextSibling;var z=D.nextSibling,G=z.nextSibling,Q=G.firstChild;return L.$$click=X=>{X.stopPropagation(),c()?a():o()},Z(I,()=>n().length,B),Z(I,()=>n().length>1?"s":"",F),Z(Q,A(Hr,{get value(){return n().reduce((X,O)=>X+Number(O.reclaimableLamports??0),0)/1e9},suffix:" SOL",showZero:!0,override:{minimumFractionDigits:3,maximumFractionDigits:3}})),Ge(X=>nr(L,{"i-tabler:square-check-filled text-primary-200":c(),"i-tabler:square text-zinc-400":!c()},X)),V}}),A($f.Content,{class:"bg-zinc-900/30 animate-[collapsible-slide-up_100ms] ui-expanded:animate-[collapsible-slide-down_100ms] overflow-hidden",get children(){return A(pt,{get each(){return n()},children:({icon:V,id:L,symbol:D,reclaimableLamports:b,isVerified:I})=>{const B=()=>i().includes(L);return(()=>{var F=B9e(),z=F.firstChild,G=z.nextSibling,Q=G.firstChild,X=Q.firstChild,O=Q.nextSibling,R=G.nextSibling,M=R.nextSibling;return F.$$click=()=>s(L),Z(F,A(ln,{src:V,class:"size-6"}),G),Z(X,()=>D||L.slice(0,4)),Z(Q,A(Oe,{when:I,get children(){return M9e()}}),null),Z(O,A(Gi,{address:L})),Z(M,A(Hr,{get value(){return Number(b??0)/1e9},suffix:" SOL",showZero:!0,override:{minimumFractionDigits:3,maximumFractionDigits:3}})),Ge(k=>nr(z,{"i-tabler:square-check-filled text-primary-200":B(),"i-tabler:square text-zinc-400":!B()},k)),F})()}})}})]}})}})]}})),Z(x,()=>i().length,E),Z(x,()=>i().length>1?"s":"",S),Z(C,A(Hr,{get value(){return l()},suffix:" SOL",showZero:!0,override:{minimumFractionDigits:3,maximumFractionDigits:3}})),Z(P,A(Hr,{class:"text-sm",get value(){return l()*u()},prefix:"$"})),Z(y,A(_i,{onCancelClick:()=>r(),onApproveClick:()=>e(dm.REVIEW),approveTitle:"Review",get isApproveDisabled(){return i().length===0}}),null),f})()};At(["click"]);const L9e=()=>A(g9e,{get children(){return A(F9e,{})}}),F9e=()=>{const{view:r}=Ok();return A(Kt,{get children(){return[A(Re,{get when(){return r()===dm.SELECT},get children(){return A(N9e,{})}}),A(Re,{get when(){return r()===dm.REVIEW},get children(){return A(k9e,{})}})]}})},MZ=()=>{function r(e){const t=new URL(e,Ss.BASE);return t.searchParams.append("connect","jupiter-extension"),t.toString()}return{normaliseJupiterLink:r}};var U9e=le('<span class="text-xs text-zinc-400 truncate text-left">'),z9e=le('<button class="flex items-center gap-4 h-15 w-full px-4 hover:bg-zinc-900 cursor-pointer group"><div class="flex flex-col items-start min-w-0 gap-0.5"><div class="flex items-center gap-1.5"><span class="font-semibold leading-none text-sm truncate"></span><span class="shrink-0 rounded bg-zinc-400/12 px-1.5 py-0.5 text-xs text-zinc-400"></span></div></div><div class=flex-1></div><div class="i-tabler:external-link size-4 text-zinc-400 group-hover:text-primary-200">'),q9e=le('<div class="size-8 rounded-full bg-zinc-800 flex items-center justify-center overflow-hidden">'),j9e=le("<div>");const tg=r=>(()=>{var e=z9e(),t=e.firstChild,n=t.firstChild,i=n.firstChild,s=i.nextSibling,o=t.nextSibling,a=o.nextSibling;return e.$$click=()=>r.onClick(),Z(e,A(Oe,{get when(){return r.avatarContent},get fallback(){return(()=>{var c=q9e();return Z(c,A(Oe,{get when(){return r.icon},get fallback(){return(()=>{var l=j9e();return Ge(()=>tn(l,gr("size-4 text-zinc-200",r.fallbackIcon??"i-tabler:question-mark"))),l})()},get children(){return A(ln,{get src(){return r.icon},class:"size-8 rounded-full"})}})),c})()},get children(){return r.avatarContent}}),t),Z(i,()=>r.title),Z(s,()=>r.category),Z(n,()=>r.extraTags,null),Z(t,A(Oe,{get when(){return r.subtitle},get children(){var c=U9e();return Z(c,()=>r.subtitle),c}}),null),Z(e,()=>r.rightContent,a),e})();At(["click"]);var V9e=le('<div><div class="h-5 px-4 mb-2 text-xs text-zinc-400 font-semibold flex items-center">'),K9e=le("<span>% APY");const fv=r=>A(Oe,{get when(){return r.items.length>0},get children(){var e=V9e(),t=e.firstChild;return Z(t,()=>r.label),Z(e,A(pt,{get each(){return r.items},children:n=>A(tg,{get icon(){return n.icon},fallbackIcon:"i-tabler:percentage",get title(){return n.title},get category(){return r.label},get rightContent(){return A(Oe,{get when(){return n.maxApy??n.minApy},children:i=>(()=>{var s=K9e(),o=s.firstChild;return Z(s,()=>r.apyPrefix,o),Z(s,()=>i().toFixed(2),o),Ge(()=>tn(s,gr("text-xs",r.apyColor))),s})()})},onClick:()=>r.onResultClick({id:n.title,symbol:n.title,icon:n.icon,type:"lend",category:n.category,url:n.url},n.url)})}),null),e}});var H9e=le('<div class="flex items-center gap-1 text-xs text-zinc-500"><div class="i-tabler:rosette-discount-check size-3.5"></div><span>Verified');const V9=r=>(()=>{var e=H9e(),t=e.firstChild;return t.nextSibling,Z(e,A(Tk,{get checked(){return r.checked},get onChange(){return r.onChange},get children(){return A(Rk,{class:"scale-75",get children(){return A(kk,{})}})}}),null),e})();var W9e=le('<div class="px-4 py-2 space-y-2"><div class="flex items-center justify-between"><span class="text-xs text-zinc-400 font-semibold">Recent</span><button class="text-xs text-zinc-400 hover:text-zinc-100 transition-100 cursor-pointer">Clear All</button></div><div class="flex flex-wrap items-center gap-1.5">'),G9e=le('<div class="flex size-4 items-center justify-center rounded-full bg-zinc-700"><div class="i-tabler:wallet size-2.5 text-zinc-200">'),Y9e=le('<div class="flex size-4 items-center justify-center rounded-full bg-zinc-700"><div class="i-tabler:sparkles size-2.5 text-zinc-200">'),J9e=le('<button class="flex shrink-0 items-center gap-1.5 rounded-full ring-1 ring-zinc-800 bg-zinc-900 pl-1 pr-2 py-1 hover:ring-primary-200 transition-100 cursor-pointer"><span class="text-xs font-semibold text-zinc-300"></span><span class="text-xs text-zinc-500">');const X9e=r=>{const e=Gn(),{normaliseJupiterLink:t}=MZ(),n=async()=>{await qt.resetGlobalSearchHistory(),r.refetchSearchHistory()},i=async s=>{const{lastClicked:o,...a}=s;await qt.upsertGlobalSearchHistory(a),r.refetchSearchHistory(),s.type==="token"?e(Qe.ASSETS(s.id)):s.url&&window.open(t(s.url),"_blank","noopener")};return A(Oe,{get when(){return r.items.length>0},get children(){var s=W9e(),o=s.firstChild,a=o.firstChild,c=a.nextSibling,l=o.nextSibling;return c.$$click=()=>n(),Z(l,A(pt,{get each(){return r.items},children:u=>(()=>{var f=J9e(),d=f.firstChild,h=d.nextSibling;return f.$$click=()=>i(u),Z(f,A(Kt,{get children(){return[A(Re,{get when(){return u.type==="wallet"},get children(){return G9e()}}),A(Re,{get when(){return u.icon},get children(){return A(ln,{get src(){return u.icon},class:"size-4 rounded-full"})}}),A(Re,{when:!0,get children(){return Y9e()}})]}}),d),Z(d,()=>u.symbol),Z(h,()=>u.category),f})()})),s}})};At(["click"]);var Z9e=le("<div>"),Q9e=le('<div class="absolute -bottom-0.5 -right-1 flex items-center justify-center rounded-full bg-zinc-950 p-0.5 ring-1"><img class="size-2.5 rounded-full">');const K9=36e5,H9=864e5,eUe=r=>{const e=()=>!!r.token.launchpad,t=()=>r.token.stockData?.id?.toLowerCase(),n=()=>!e()&&!!t(),i=hi(()=>({queryKey:["launchpad_metadata"],queryFn:()=>an.get(Ss.LAUNCHPAD_METADATA).json(),staleTime:K9,gcTime:H9,enabled:e()})),s=hi(()=>({queryKey:["stock_issuer_metadata"],queryFn:()=>an.get(Ss.STOCK_ISSUER_METADATA).json(),staleTime:K9,gcTime:H9,enabled:n()})),o=Te(()=>{if(e()&&i.data)return i.data.launchpadInfo[r.token.launchpad];const a=t();if(a&&s.data?.enabled.includes(a))return s.data.info[a]});return(()=>{var a=Z9e();return Z(a,A(ln,{get src(){return r.token.icon},class:"size-full rounded-full"}),null),Z(a,A(Oe,{get when(){return o()},children:c=>(()=>{var l=Q9e(),u=l.firstChild;return Ge(f=>{var d=c().color,h=`${Ss.BASE}${c().iconUrl}`;return d!==f.e&&((f.e=d)!=null?l.style.setProperty("--un-ring-color",d):l.style.removeProperty("--un-ring-color")),h!==f.t&&Lr(u,"src",f.t=h),f},{e:void 0,t:void 0}),l})()}),null),Ge(()=>tn(a,gr("relative shrink-0",r.class??"size-8"))),a})()};var tUe=le('<div class="i-tabler:rosette-discount-check size-4 text-primary-200">'),rUe=le('<button class="flex items-center gap-4 h-15 w-full px-4 hover:bg-zinc-900 cursor-pointer"><div class="flex-1 overflow-hidden space-y-0.5"><div class="flex items-center gap-1"><span class="truncate font-semibold text-sm leading-none"></span></div><div class="flex items-center gap-1 text-xs text-zinc-400"></div></div><div class="grid w-36 shrink-0 grid-cols-2 gap-1 text-xs"><div class="flex items-center gap-1"><span class=text-zinc-400>MC</span><span class=font-medium></span></div><div class="flex items-center gap-1"><span class=text-zinc-400>VOL</span><span class=font-medium></span></div><div class="flex items-center gap-1"><span class=text-zinc-400>LIQ</span><span class=font-medium></span></div><div class="flex items-center gap-1"><span class=text-zinc-400>ORG</span><span class=font-medium>');const W9=r=>{const{formatLargeNumbers:e}=qo();return(()=>{var t=rUe(),n=t.firstChild,i=n.firstChild,s=i.firstChild,o=i.nextSibling,a=n.nextSibling,c=a.firstChild,l=c.firstChild,u=l.nextSibling,f=c.nextSibling,d=f.firstChild,h=d.nextSibling,g=f.nextSibling,p=g.firstChild,m=p.nextSibling,y=g.nextSibling,v=y.firstChild,w=v.nextSibling;return t.$$click=()=>r.onClick(),Z(t,A(eUe,{get token(){return r.token}}),n),Z(s,()=>r.token.symbol),Z(i,A(Oe,{get when(){return r.token.isVerified},get children(){return tUe()}}),null),Z(o,A(Gi,{get address(){return r.token.id}})),Z(u,()=>e(r.token.mcap??0,"currency")),Z(h,()=>e((r.token.stats24h?.buyVolume??0)+(r.token.stats24h?.sellVolume??0),"currency")),Z(m,()=>e(r.token.liquidity??0,"currency")),Z(w,()=>r.token.organicScore.toFixed(0)),Ge(_=>{var x=r.token.organicScoreLabel==="high",E=r.token.organicScoreLabel!=="high";return x!==_.e&&w.classList.toggle("text-green-400",_.e=x),E!==_.t&&w.classList.toggle("text-zinc-400",_.t=E),_},{e:void 0,t:void 0}),t})()};At(["click"]);var nUe=le('<div class="h-5 px-4 mb-2 flex items-center justify-between"><span class="text-xs text-zinc-400 font-semibold">Trending'),G9=le('<div class="flex items-center justify-center py-10"><div class="i-tabler:loader-2 animate-spin size-8 text-zinc-500">'),iUe=le('<div class="h-5 px-4 mb-2 flex items-center justify-between"><span class="text-xs text-zinc-400 font-semibold">Tokens'),sUe=le('<button class="w-full flex items-center justify-center gap-2 py-2 text-xs text-zinc-400 hover:text-zinc-100 cursor-pointer"><div class="border-b border-zinc-800 border-dashed flex-1"></div><span class="flex items-center gap-1"><div class="i-tabler:chevron-down size-3 transition-transform"></div></span><div class="border-b border-zinc-800 border-dashed flex-1">'),oUe=le('<div><div class="h-5 px-4 mb-2 text-xs text-zinc-400 font-semibold flex items-center">Perps'),aUe=le('<div><div class="h-5 px-4 mb-2 text-xs text-zinc-400 font-semibold flex items-center">Screener'),cUe=le('<div><div class="h-5 px-4 mb-2 text-xs text-zinc-400 font-semibold flex items-center">Features'),lUe=le('<div><div class="h-5 px-4 mb-2 text-xs text-zinc-400 font-semibold flex items-center">Portfolio'),uUe=le('<div class="divide-y divide-zinc-800 divide-dashed space-y-4">'),fUe=le('<div class="text-center text-zinc-500 border-t border-zinc-800 p-3">No results found'),dUe=le('<div class="flex flex-col flex-1"><div class="pb-2 mb-4 border-b border-zinc-700"><div class="px-4 pt-4 pb-2 space-y-4"><div class="flex items-center bg-zinc-900 rounded-xl ring-1 ring-zinc-800 focus-within:ring-primary-200 transition-100"><div class="flex items-center justify-center pl-3.5 pr-2.5"><div class="i-tabler:search size-5.5 text-zinc-500"></div></div><input class="w-full outline-none py-3 pr-3"placeholder="Search token, wallet, or feature"type=search id=search-input maxlength=50 autocomplete=off autocorrect=off></div></div></div><div class="flex-1 overflow-auto">'),hUe=le('<span class="rounded-lg bg-green-400/10 py-0.5 text-xs text-green-400">x'),pUe=le('<div class="flex items-center gap-1 text-xs"><span class=text-zinc-400>VOL</span><span class=font-medium>'),gUe=le('<div class="size-8 rounded-full bg-primary-500 flex items-center justify-center"><span class="text-xs font-bold text-primary">'),mUe=le('<div class="flex items-center gap-1 text-xs"><span class=text-zinc-400>Net Worth</span><span class=font-medium>$');const yUe="search-input",vUe=350,Y9=3,bUe=20,wUe=()=>{const r=Gn(),e=Fa(),{formatLargeNumbers:t}=qo(),{normaliseJupiterLink:n}=MZ(),[i,s]=Pe(""),[o,a]=Pe(!1),[c,l]=Pe(!1),[u,f]=Pe(""),d=ck(f,vUe);ot(()=>{d(i()),a(!1)});const h=async P=>{await qt.upsertGlobalSearchHistory(P),g.refetch()},g=hi(()=>({queryKey:["global_search_history"],queryFn:async()=>{const{items:P}=await qt.listGlobalSearchHistory();return P}})),p=hi(()=>({queryKey:["trending_tokens"],queryFn:()=>ed.getTopCategoryAssets("toptrending","24h")})),m=hi(()=>({queryKey:["global_search",u()],queryFn:()=>ed.getGlobalSearch({query:u().trim(),tokenExactCaseInsensitive:"false"}),enabled:u().trim().length>0})),y=Te(()=>{const P={tokens:[],perps:[],earn:[],lend:[],multiply:[],borrow:[],wallets:[],screener:[],features:[]};for(const V of m.data??[])switch(V.type){case"token":P.tokens.push(V);break;case"perp-token":P.perps.push(V);break;case"lend-token":V.category==="Earn"?P.earn.push(V):V.category==="Lend"?P.lend.push(V):V.category==="Multiply"?P.multiply.push(V):V.category==="Borrow"&&P.borrow.push(V);break;case"wallet":P.wallets.push(V);break;case"link":V.category==="Screener"?P.screener.push(V):V.category==="Feature"&&P.features.push(V);break}return P}),v=Te(()=>c()?y().tokens.filter(P=>P.token.isVerified):y().tokens),w=Te(()=>{if(v().length>0)return!0;const{tokens:P,...V}=y();return Object.values(V).some(L=>L.length>0)}),_=Te(()=>o()?v():v().slice(0,Y9)),x=Te(()=>v().length>Y9),E=Te(()=>(c()?(p.data??[]).filter(V=>V.isVerified):p.data??[]).slice(0,bUe)),S=Te(()=>m.isLoading||u()!==i()),T=Te(()=>i().trim().length>0);mr(()=>{document.getElementById(yUe)?.focus();const P=V=>{V.key==="Escape"&&e()};document.addEventListener("keydown",P),mt(()=>document.removeEventListener("keydown",P))});const C=(P,V)=>{h(P),V?window.open(n(V),"_blank","noopener"):r(Qe.ASSETS(P.id))};return(()=>{var P=dUe(),V=P.firstChild,L=V.firstChild,D=L.firstChild,b=D.firstChild,I=b.nextSibling,B=V.nextSibling;return Z(L,A(ui,{title:"Search"}),D),I.$$input=F=>s(F.currentTarget.value),Z(V,A(X9e,{get items(){return g.data??[]},refetchSearchHistory:()=>g.refetch()}),null),Z(B,A(Oe,{get when(){return!T()},get children(){return[(()=>{var F=nUe();return F.firstChild,Z(F,A(V9,{get checked(){return c()},onChange:l}),null),F})(),A(Oe,{get when(){return!p.isLoading},get children(){return A(pt,{get each(){return E()},children:F=>A(W9,{token:F,onClick:()=>C({id:F.id,symbol:F.symbol,icon:F.icon,type:"token",category:"Spot"})})})}}),A(Oe,{get when(){return p.isLoading},get children(){return G9()}})]}}),null),Z(B,A(Oe,{get when(){return T()},get children(){return[A(Oe,{get when(){return!S()},get children(){return[A(Oe,{get when(){return y().tokens.length>0},get children(){return[(()=>{var F=iUe();return F.firstChild,Z(F,A(V9,{get checked(){return c()},onChange:l}),null),F})(),A(pt,{get each(){return _()},children:F=>A(W9,{get token(){return F.token},onClick:()=>C({id:F.token.id,symbol:F.token.symbol,icon:F.token.icon,type:"token",category:"Spot"})})}),A(Oe,{get when(){return x()},get children(){var F=sUe(),z=F.firstChild,G=z.nextSibling,Q=G.firstChild;return F.$$click=()=>a(!o()),Z(G,()=>o()?"See Less":"See More",Q),Ge(()=>Q.classList.toggle("rotate-180",!!o())),F}})]}}),(()=>{var F=uUe();return Z(F,A(Oe,{get when(){return y().perps.length>0},get children(){var z=oUe();return z.firstChild,Z(z,A(pt,{get each(){return y().perps},children:G=>A(tg,{get icon(){return G.icon},fallbackIcon:"i-tabler:chart-line",get title(){return G.title},category:"Perps",get extraTags(){return A(Oe,{get when(){return G.maxLeverage},get children(){var Q=hUe(),X=Q.firstChild;return Z(Q,()=>G.maxLeverage,X),Q}})},get rightContent(){return A(Oe,{get when(){return G.volume},get children(){var Q=pUe(),X=Q.firstChild,O=X.nextSibling;return Z(O,()=>t(G.volume??0,"currency")),Q}})},onClick:()=>C({id:G.title,symbol:G.title,icon:G.icon,type:"perp",category:"Perps",url:G.url},G.url)})}),null),z}}),null),Z(F,A(fv,{get items(){return y().earn},label:"Earn",apyColor:"text-green-400",apyPrefix:"Earn ",onResultClick:C}),null),Z(F,A(fv,{get items(){return y().lend},label:"Lend",apyColor:"text-green-400",apyPrefix:"Earn ",onResultClick:C}),null),Z(F,A(fv,{get items(){return y().multiply},label:"Multiply",apyColor:"text-green-400",apyPrefix:"Earn ",onResultClick:C}),null),Z(F,A(fv,{get items(){return y().borrow},label:"Borrow",apyColor:"text-red-400",onResultClick:C}),null),Z(F,A(Oe,{get when(){return y().screener.length>0},get children(){var z=aUe();return z.firstChild,Z(z,A(pt,{get each(){return y().screener},children:G=>A(tg,{get icon(){return G.icon},fallbackIcon:"i-tabler:filter",get title(){return G.title},category:"Screener",get subtitle(){return G.description},onClick:()=>C({id:G.url,symbol:G.title,icon:G.icon,type:"link",category:G.category,url:G.url},G.url)})}),null),z}}),null),Z(F,A(Oe,{get when(){return y().features.length>0},get children(){var z=cUe();return z.firstChild,Z(z,A(pt,{get each(){return y().features},children:G=>A(tg,{get icon(){return G.icon},fallbackIcon:"i-tabler:sparkles",get title(){return G.title},category:"Feature",get subtitle(){return G.description},onClick:()=>C({id:G.url,symbol:G.title,icon:G.icon,type:"link",category:G.category,url:G.url},G.url)})}),null),z}}),null),Z(F,A(Oe,{get when(){return y().wallets.length>0},get children(){var z=lUe();return z.firstChild,Z(z,A(pt,{get each(){return y().wallets},children:G=>{const Q=G.domain??`${G.address.slice(0,4)}...${G.address.slice(-4)}`;return A(tg,{get avatarContent(){return(()=>{var X=gUe(),O=X.firstChild;return Z(O,()=>(G.domain??G.address).slice(0,2).toUpperCase()),X})()},title:Q,category:"Wallet",get rightContent(){return A(Oe,{get when(){return G.netWorth},get children(){var X=mUe(),O=X.firstChild,R=O.nextSibling;return R.firstChild,Z(R,()=>(G.netWorth??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),null),X}})},onClick:()=>C({id:G.address,symbol:Q,type:"wallet",category:"Wallet",url:G.url},G.url)})}}),null),z}}),null),F})(),A(Oe,{get when(){return!w()},get children(){return fUe()}})]}}),A(Oe,{get when(){return S()},get children(){return G9()}})]}}),null),Ge(()=>I.value=i()),P})()};At(["input","click"]);const pl={FORM:"form",ASSET:"asset",REVIEW:"review"},oI=Au.SOL,[xUe,_Ue]=El(()=>{const[r,e]=Pe(pl.FORM),[t,n]=Na(),i=Cs(),{toChainAmount:s,bigIntAbs:o}=qo(),a=Te(()=>t.recipient?.trim()??""),c=p=>{n({recipient:p},{replace:!0})},l=Te(()=>t.mint?.trim()??oI.id),u=p=>{n({mint:p},{replace:!0})},f=Te(p=>l()?i.data?.tokens.find(y=>y.id===l())??{...p??oI,amount:0,rawAmount:"0",value:0}:oI),d=Te(()=>t.amount?.trim()??""),h=Te(()=>{if(!d())return"";const p=s(d(),f().decimals,f().scaledUiMultiplier);return f().scaledUiMultiplier&&o(BigInt(p)-BigInt(f().rawAmount))<=1n?f().rawAmount:p});return{view:r,setView:e,recipient:a,setRecipient:c,setMint:u,amount:d,rawAmount:h,setAmount:p=>{n({amount:p},{replace:!0})},selectedAsset:f}}),Xw=()=>{const r=_Ue();if(!r)throw new Error("useSend must be used within a SendProvider");return r};var SUe=le('<div class="text-center text-zinc-600 border-t border-zinc-800 p-3">No more tokens'),EUe=le('<div><div class="px-4 pt-4"></div><div class=p-4><div class="flex items-center bg-zinc-900 rounded-xl ring-1 transition-100"><div class="flex items-center justify-center pl-3.5 pr-2.5"><div class="i-tabler:search size-5.5 text-zinc-500"></div></div><input class="w-full outline-none py-3 pr-3"placeholder="Search token name / symbol / address"type=search id=asset-input autocomplete=off autocorrect=off></div></div><div class>'),AUe=le('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),IUe=le('<button class="w-full text-left cursor-pointer flex items-center gap-4 px-4 h-15 hover:bg-zinc-900 transition-100"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1></div><div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">');const CUe="asset-input",TUe=()=>{const{selectedAsset:r,setMint:e,setView:t}=Xw(),n=Cs(),[i,s]=Pe(""),o=Te(()=>{const u=i().trim().toLowerCase();return n.data?.tokens.filter(f=>f.amount>0&&(f.symbol.toLowerCase().includes(u)||f.id.toLowerCase().includes(u)))??[]}),[a,c]=Pe(!1);function l(u){In(()=>{e(u),t(pl.FORM)})}return mr(()=>document.getElementById(CUe)?.focus()),(()=>{var u=EUe(),f=u.firstChild,d=f.nextSibling,h=d.firstChild,g=h.firstChild,p=g.nextSibling,m=d.nextSibling;return Z(f,A(ui,{title:"Select Asset",onBack:()=>t(pl.FORM)})),p.$$focusout=()=>c(!1),p.$$focusin=()=>c(!0),p.$$input=y=>s(y.currentTarget.value),Z(m,A(pt,{get each(){return o()},children:({icon:y,id:v,symbol:w,amount:_,value:x,price:E,priceChange:S,isVerified:T})=>(()=>{var C=IUe(),P=C.firstChild,V=P.firstChild,L=V.firstChild,D=V.nextSibling,b=D.firstChild,I=b.nextSibling,B=P.nextSibling,F=B.nextSibling,z=F.firstChild,G=z.nextSibling;return C.$$click=()=>l(v),Z(C,A(ln,{src:y}),P),Z(L,()=>w||v.slice(0,4)),Z(V,A(Oe,{when:T,get children(){return AUe()}}),null),Z(b,A(Hr,{value:E,prefix:"$"})),I.classList.toggle("hidden",!S),Z(I,A(Gm,{value:S})),Z(z,A(Hr,{value:x,prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),Z(G,A(Hr,{value:_,showZero:!0})),Ge(()=>C.classList.toggle("bg-zinc-900/75",r().id===v)),C})()}),null),Z(m,A(Oe,{get when(){return n.data},get children(){return SUe()}}),null),Ge(y=>{var v=!a(),w=!!a();return v!==y.e&&h.classList.toggle("ring-zinc-800",y.e=v),w!==y.t&&h.classList.toggle("ring-primary-200",y.t=w),y},{e:void 0,t:void 0}),Ge(()=>p.value=i()),u})()};At(["input","focusin","focusout","click"]);var RUe=le('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2 text-sm"><div><button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Expand View</button> or use the <button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Side Panel Mode</button> to sign transactions with your hardware wallet.');const Pk=()=>{const{selectedAccount:r}=Jr();return{isVisible:Te(()=>pc===Co.POPUP&&["ledger","keystone","trezor"].includes(r()?.type))}},BZ=()=>{const{isVisible:r}=Pk(),{useStandaloneMode:e,useSidepanelMode:t}=KK();return A(Oe,{get when(){return r()},get children(){var n=RUe(),i=n.firstChild,s=i.firstChild,o=s.nextSibling,a=o.nextSibling;return s.$$click=()=>e(),a.$$click=()=>t(),n}})};At(["click"]);var kUe=le('<button class="font-medium underline cursor-pointer underline-offset-2 hover:text-yellow-300 transition-100">Jupiter Lend'),OUe=le('<div class="bg-yellow-900/15 text-yellow-400 ring-1 ring-yellow-800 py-3 px-4 rounded-xl space-y-2 text-sm">');const NZ=r=>({isVisible:Te(()=>r().some(t=>t!=null&&t.tags?.includes("jup-lend-earn")))}),PUe=r=>{const{isVisible:e}=NZ(()=>r.tokens);return A(Oe,{get when(){return e()},get children(){var t=OUe();return Z(t,A(Kt,{get children(){return[A(Re,{get when(){return r.type==="send"},children:"You will not be able to withdraw your Jupiter Lend position if you transfer this token away."}),A(Re,{get when(){return r.type==="swap"},get children(){return["Use"," ",(()=>{var n=kUe();return n.$$click=()=>window.open(Ss.LEND,"_blank"),n})()," ","to open or close your positions for more optimal prices."]}})]}})),t}})};At(["click"]);var $Ue=le("<input>");const DUe=/^\d$/,LZ=r=>{const[e,t]=Lt(r,["class","classList","input","setInput","onValue"]),n=KJ(),i=()=>new RegExp(`^\\d*[\\${n}]?\\d*$`),s=Te(()=>e.input);return ot(Pn(s,o=>{if(!e.onValue)return;const a=",",c=o.replace(new RegExp(`\\${a}`,"g"),"").replace(n,"."),l=c!==""&&i().test(c);e.onValue(l?c:null)},{defer:!0})),(()=>{var o=$Ue();return un(o,at(t,{get value(){return s()},get class(){return gr("focus:outline-none",e.class,e.classList)},type:"text",inputmode:"decimal",autocomplete:"off",spellcheck:!1,onBeforeInput:a=>{const c=a.data?.trim(),l=a.target.value.trim();if(c==null||c.length===0||a.inputType.startsWith("delete")||c.length===1&&(DUe.test(c)||c===n&&!l.includes(n)))return;const u=a.target.selectionStart??0,f=a.target.selectionEnd??0,d=l.substring(0,u)+c+l.substring(f),h=",",g=d.replace(new RegExp(`\\${h}`,"g"),"").replace(n,".");i().test(g)||a.preventDefault()},onInput:a=>{e.setInput(a.target.value.trim())}}),!1,!1),o})()};var MUe=le('<span class="text-xs py-0.5 px-1.5 rounded bg-zinc-800 text-zinc-300">'),BUe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),NUe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">Recipient address is not a valid Solana address.'),LUe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">You are sending to yourself. This will incur network fees, but may not change your asset balances.'),FUe=le('<div class="text-sm text-red-400 ring-1 ring-red-800 bg-red-900/15 py-3 px-4 rounded-xl">Recipient address is a token, sending is blocked as it will incur permanent loss of funds!'),UUe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">Recipient address is not a standard user wallet, please double check the address before sending.'),zUe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl flex items-center gap-3"><div>Skip review is enabled; send will execute immediately.'),qUe=le('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Asset</div><div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5"></div><div class></div><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Half</button><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Max</button></div></div><div class="flex items-center gap-1"><button class="flex flex-none p-1.5 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="font-semibold ml-2 max-w-24 truncate"></div><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button><div class=flex-1><div class="text-zinc-500 text-sm leading-3 text-right"></div></div></div></div><div class=w-full><div class="flex items-center gap-2 mb-1"><label class=text-zinc-400>Recipient</label></div><div class=relative><textarea class="w-full outline-none rounded-xl transition-100 bg-zinc-900 pl-4 py-3 pr-18 resize-none ring-1 ring-zinc-800 focus:ring-primary-200"placeholder="Enter recipient address"rows=2></textarea><div class="absolute top-4 right-4"></div></div></div><div class=flex-1>'),jUe=le('<div class="text-sm mt-1 py-1 px-1.5 bg-zinc-700/50 backdrop-blur rounded ring-1 ring-zinc-700 break-all max-w-[calc(100vw-2rem)] cursor-pointer">Address Book'),VUe=le('<button class="text-zinc-300 hover:text-zinc-50 transition-100 bg-zinc-700/60 hover:bg-zinc-700 size-10 rounded-lg flex items-center justify-center cursor-pointer"><div class="i-tabler:address-book size-6">');const KUe=()=>{const{setView:r,selectedAsset:e,amount:t,setAmount:n,recipient:i,setRecipient:s}=Xw(),{selectedAccount:o,accounts:a}=Jr(),c=Rp(),l=Cs(),{fromChainAmount:u}=qo(),f=Gn(),{settings:d}=xi(),[h,g]=Pe(t()),{isOnCurve:p}=sH(),m=Te(()=>{const T=c.data?.saved.find(P=>P.address===i());return T?T.label:a().find(P=>P.address===i())?.label??null}),{isVisible:y}=Pk(),{isVisible:v}=NZ(()=>[e()]),w=Te(()=>{const T=i();return T?l.data?.tokens.some(C=>C.id===T)??!1:!1}),_=Te(()=>{try{return!!(o()?.type!=="readonly"&&!w()&&!y()&&i()&&bu(i())&&t()&&Number(t())<=e().amount)}catch{return!1}});function x(T){const{rawAmount:C,decimals:P,scaledUiMultiplier:V}=e(),L=T==="half"?(BigInt(C)/2n).toString():C.toString();L.startsWith("-")?g(""):g(u(L,P,V))}function E(){!bu(i())||Number(t())<=0||r(pl.REVIEW)}function S(){const T=new URLSearchParams;h()&&T.set("amount",h()),e()?.id&&T.set("mint",e().id),f(`${Qe.ADDRESS_BOOK}?${T.toString()}`)}return(()=>{var T=qUe(),C=T.firstChild,P=C.firstChild,V=P.firstChild,L=V.nextSibling,D=L.firstChild,b=D.nextSibling,I=b.nextSibling,B=I.nextSibling,F=P.nextSibling,z=F.firstChild,G=z.firstChild,Q=z.nextSibling,X=Q.firstChild,O=C.nextSibling,R=O.firstChild;R.firstChild;var M=R.nextSibling,k=M.firstChild,j=k.nextSibling;return O.nextSibling,Z(T,A(ui,{title:"Send Asset",onBack:()=>f(Qe.HOME)}),C),Z(b,A(Hr,{get value(){return e().amount},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0})),I.$$click=()=>x("half"),B.$$click=()=>x("max"),z.$$click=()=>r(pl.ASSET),Z(z,A(ln,{get src(){return e().icon},class:"size-7.5"}),G),Z(G,()=>e().symbol||e().id.slice(0,4)),Z(Q,A(LZ,{class:"text-right text-2xl font-semibold outline-none w-full",placeholder:"0.00",get input(){return h()},setInput:g,onValue:te=>n(te??"")}),X),Z(X,A(Hr,{get value(){return e().price*(Number(h())||0)},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),Z(R,A(Oe,{get when(){return m()},get children(){var te=MUe();return Z(te,m),te}}),null),k.$$input=te=>s(te.currentTarget.value),Z(j,A(Im,{get content(){return jUe()},get trigger(){return(()=>{var te=VUe();return te.$$click=()=>S(),te})()}})),Z(T,A(Kt,{get children(){return[A(Re,{get when(){return!i()},get children(){return[]}}),A(Re,{get when(){return o()?.type==="readonly"},get children(){return BUe()}}),A(Re,{get when(){return y()},get children(){return A(BZ,{})}}),A(Re,{get when(){return!bu(i())},get children(){return NUe()}}),A(Re,{get when(){return o()?.address===i()},get children(){return LUe()}}),A(Re,{get when(){return w()},get children(){return FUe()}}),A(Re,{get when(){return!p(i())},get children(){return UUe()}}),A(Re,{get when(){return d.skipReviewStep},get children(){return zUe()}}),A(Re,{get when(){return v()},get children(){return A(PUe,{get tokens(){return[e()]},type:"send"})}})]}}),null),Z(T,A(_i,{onCancelClick:()=>f(Qe.HOME),onApproveClick:()=>E(),get approveTitle(){return d.skipReviewStep?"Send":"Review"},get isApproveDisabled(){return!_()}}),null),Ge(()=>k.value=i()),T})()};At(["click","input"]);var HUe=le('<div class="flex items-center gap-1.5"><div> '),J9=le('<div class="flex flex-col items-end"><div class="text-zinc-50 leading-4">'),WUe=le('<div class="h-6 w-24 animate-pulse rounded bg-zinc-800">'),GUe=le('<div class="flex items-center gap-1.5"><div class="i-tabler:gas-station size-4.5 text-zinc-400">'),YUe=le('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin text-primary-200">'),JUe=le('<div class="size-16 bg-green-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:check text-green-400">'),XUe=le('<div class="size-16 bg-red-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:x text-red-400">'),ZUe=le("<span class=text-zinc-50>"),QUe=le('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-4.5 mr-1">'),eze=le('<div class="flex-1 p-4 flex flex-col"><div class="flex flex-col items-center justify-center mb-5"><div class=my-6></div><div class="text-2xl font-semibold"></div><div class="text-zinc-400 font-medium mt-2 inline-flex gap-1"><span class=text-zinc-50> </span><span>to</span></div></div><div class="divide-y divide-zinc-800 rounded-xl bg-zinc-900">'),tze=le('<div class="h-13 px-4 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>');const rze=()=>{const{setView:r,selectedAsset:e,recipient:t,amount:n,rawAmount:i}=Xw(),{selectedAccount:s,accounts:o}=Jr(),a=Rp(),c=Cs(),{openExplorer:l}=Al(),{settings:u}=xi(),f=Te(()=>s()?.address),d=Gn(),[h,g]=Pe("idle"),[p,m]=Pe(null),y=Te(()=>e().id),{removeInsignificantZeros:v}=qo(),w=Te(()=>{const C=a.data?.saved.find(V=>V.address===t());return C?C.label:o().find(V=>V.address===t())?.label??null}),[_,x]=Pe(null);async function E(){const C=f();if(!C)return;const P=await ws.getTransferTx({sender:C,recipient:t(),mint:y(),amount:i()});x(P),"error"in P||!P.transaction?g("simulation_error"):(g("simulation_success"),u.skipReviewStep&&s()?.type!=="readonly"&&await T(P))}mr(E),Pf(()=>{h()==="simulation_success"&&E()},1e4,setInterval);const S=Te(()=>{const C=_(),P=C!=null&&"networkFeeUsd"in C?C.networkFeeUsd:null;return[{title:"Amount",value:(()=>{var V=HUe(),L=V.firstChild,D=L.firstChild;return Z(V,A(ln,{get src(){return e().icon},class:"size-4.5 ring-0"}),L),Z(L,()=>v(n()),D),Z(L,()=>e().symbol,null),V})()},{title:"Sender",value:(()=>{var V=J9(),L=V.firstChild;return Z(L,()=>s()?.label),Z(V,A(Gi,{get address(){return f()},class:"text-sm text-zinc-400 font-normal"}),null),V})()},{title:"Recipient",value:A(Oe,{get when(){return w()},get fallback(){return A(Gi,{get address(){return t()}})},get children(){var V=J9(),L=V.firstChild;return Z(L,w),Z(V,A(Gi,{get address(){return t()},class:"text-sm text-zinc-400 font-normal"}),null),V}})},{title:"Network Fee",value:P==null?WUe():(()=>{var V=GUe();return V.firstChild,Z(V,A(Hr,{value:P,prefix:"$"}),null),V})()}]});async function T(C){if(!C||!("transaction"in C)||!C.transaction)return;g("tx_sending");const{transaction:P,requestId:V}=C,{signedTransactions:L}=s()?.type==="privy"?{signedTransactions:[await Cp.signTransaction(P)]}:await qt.signTransactions({origin:window.location.origin,signerAddress:f(),transactions:[P],skipApproval:!0,forcePopup:!0}),{code:D,signature:b}=await ws.postExecuteTransfer({requestId:V,signedTransaction:L[0]});c.refetch(),await qt.upsertRecentContact({address:t()}),a.refetch(),In(()=>{g(D===0?"tx_success":"tx_error"),m(b)})}return(()=>{var C=eze(),P=C.firstChild,V=P.firstChild,L=V.nextSibling,D=L.nextSibling,b=D.firstChild,I=b.firstChild;b.nextSibling;var B=P.nextSibling;return Z(V,A(Kt,{get children(){return[A(Re,{get when(){return h()==="tx_sending"},get children(){return YUe()}}),A(Re,{get when(){return h()==="tx_success"},get children(){return JUe()}}),A(Re,{get when(){return h()==="simulation_error"||h()==="tx_error"},get children(){return XUe()}}),A(Re,{when:!0,get children(){return A(ln,{hd:!0,class:"size-16",get src(){return e().icon}})}})]}})),Z(L,A(Kt,{get children(){return[A(Re,{get when(){return h()==="tx_sending"},children:"Sending..."}),A(Re,{get when(){return h()==="tx_success"},children:"Successfully Sent"}),A(Re,{get when(){return h()==="simulation_error"||h()==="tx_error"},children:"Failed to Send"}),A(Re,{when:!0,children:"Confirm Send"})]}})),Z(b,()=>v(n()),I),Z(b,()=>e().symbol,null),Z(D,A(Oe,{get when(){return w()},get fallback(){return A(Gi,{get address(){return t()},class:"text-zinc-50"})},get children(){var F=ZUe();return Z(F,w),F}}),null),Z(B,A(pt,{get each(){return S()},children:({title:F,value:z})=>(()=>{var G=tze(),Q=G.firstChild,X=Q.nextSibling;return Z(Q,F),Z(X,z),G})()}),null),Z(B,A(Oe,{get when(){return p()},get children(){var F=QUe(),z=F.firstChild,G=z.nextSibling;return G.firstChild,G.$$click=()=>l({type:"tx",value:p()}),Z(G,A(Gi,{get address(){return p()}}),null),F}}),null),Z(C,A(_i,{get onCancelClick(){return h()==="tx_success"?()=>d(Qe.HOME):()=>r(pl.FORM)},onApproveClick:()=>T(_()),get cancelTitle(){return h()==="tx_success"?"Close":"Back"},approveTitle:"Send",get isApproveDisabled(){return h()!=="simulation_success"}}),null),C})()};At(["click"]);const nze=()=>A(xUe,{get children(){return A(ize,{})}}),ize=()=>{const{view:r}=Xw();return A(Kt,{get children(){return[A(Re,{get when(){return r()===pl.FORM},get children(){return A(KUe,{})}}),A(Re,{get when(){return r()===pl.ASSET},get children(){return A(TUe,{})}}),A(Re,{get when(){return r()===pl.REVIEW},get children(){return A(rze,{})}})]}})};var sze=le('<div class="p-4 space-y-4">');const oze=()=>(()=>{var r=sze();return Z(r,A(ui,{title:"Auto Approve"}),null),Z(r,A(DZ,{showOrb:!0}),null),r})();var aze=le('<div class="p-4 space-y-4"><div class=space-y-2>'),cze=le('<button class="flex items-center justify-between py-4 px-4 gap-4 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div class="size-6 rounded-full bg-primary-200/15 flex items-center justify-center transition-100"><div class="size-4 i-tabler:check text-primary-200">');const FZ=[{label:"1 minute",value:1},{label:"10 minutes",value:10},{label:"1 hour",value:60},{label:"8 hours",value:480},{label:"1 day",value:1440},{label:"1 week",value:10080},{label:"Never",value:-1}],lze=()=>{const{settings:r,updateUserSettings:e}=xi();return(()=>{var t=aze(),n=t.firstChild;return Z(t,A(ui,{title:"Auto Lock Time"}),n),Z(n,A(pt,{each:FZ,children:({label:i,value:s})=>(()=>{var o=cze(),a=o.firstChild,c=a.nextSibling;return o.$$click=()=>e({type:"setLockDelayMinutes",delay:s}),Z(a,i),Ge(l=>{var u={"ring-1 ring-primary-200 text-zinc-50":s===r.lockDelayMinutes,"text-zinc-400":s!==r.lockDelayMinutes},f=s!==r.lockDelayMinutes;return l.e=nr(o,u,l.e),f!==l.t&&c.classList.toggle("opacity-0",l.t=f),l},{e:void 0,t:void 0}),o})()})),t})()};At(["click"]);var uze=le('<div class="p-4 space-y-4"><div class=space-y-2>'),fze=le('<button class="flex items-center py-4 px-4 gap-4 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div class=flex-1></div><div class="size-6 rounded-full bg-primary-200/15 flex items-center justify-center transition-100"><div class="size-4 i-tabler:check text-primary-200">');const dze=()=>{const{selectedExplorer:r,updateExplorer:e}=Al();return(()=>{var t=uze(),n=t.firstChild;return Z(t,A(ui,{title:"Block Explorer"}),n),Z(n,A(pt,{get each(){return Object.values(kI)},children:({id:i,name:s,Icon:o})=>(()=>{var a=fze(),c=a.firstChild,l=c.nextSibling,u=l.nextSibling;return a.$$click=()=>e(i),Z(a,A(HT,{component:o,class:"size-4.5"}),c),Z(c,s),Ge(f=>{var d={"ring-1 ring-primary-200 text-zinc-50":i===r().id,"text-zinc-400":i!==r().id},h=i!==r().id;return f.e=nr(a,d,f.e),h!==f.t&&u.classList.toggle("opacity-0",f.t=h),f},{e:void 0,t:void 0}),a})()})),t})()};At(["click"]);var hze=le('<div class="p-4 space-y-4"><form class=space-y-3><div class="flex flex-col"><label class=text-zinc-400 for=current-input>Current Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Enter your current password"name=current-input minlength=6 type=password></div><div class="flex flex-col"><label class=text-zinc-400 for=new-input>New Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Enter your new password"name=new-input minlength=6 type=password></div><div class="flex flex-col"><label class=text-zinc-400 for=confirm-input>Confirm New Password</label><input class="ring-1 ring-zinc-800 w-full outline-none rounded-xl p-3 bg-zinc-900 transition-100 focus:ring-primary-200"placeholder="Confirm your new password"name=confirm-input minlength=6 type=password>');const pze="current-input",gze="new-input",mze="confirm-input",yze=()=>{const r=ci(),e=Fa();async function t(n){n.preventDefault();const i=new FormData(n.target),s=i.get(pze)?.toString().trim()||"",o=i.get(gze)?.toString().trim()||"",a=i.get(mze)?.toString().trim()||"";if(!(s.length<6||o.length<6||a.length<6)){if(o!==a){r.alert({title:"Failed to Update Password",content:"New passwords do not match."});return}try{await qt.updatePassword({oldPassword:s,newPassword:o}),r.alert({title:"Password Updated",content:"Your password has been updated successfully."}),e()}catch{r.alert({title:"Failed to Update Password",content:"Current password entered is incorrect."})}}}return(()=>{var n=hze(),i=n.firstChild,s=i.firstChild,o=s.firstChild;o.nextSibling;var a=s.nextSibling,c=a.firstChild;c.nextSibling;var l=a.nextSibling,u=l.firstChild;return u.nextSibling,Z(n,A(ui,{title:"Change Password"}),i),i.addEventListener("submit",f=>t(f)),Z(i,A(_i,{onApproveClick:()=>{},onCancelClick:e,approveTitle:"Update"}),null),n})()},UZ=()=>hi(()=>({queryKey:["apps"],queryFn:async()=>qt.getConnectedApps({}),refetchInterval:3e4}));var vze=le('<div class="p-3 flex flex-col items-center"><div class="size-20 rounded-full bg-linear-to-b from-zinc-800 to-zinc-950 my-6 flex items-center justify-center"><div class="size-12 rounded-full bg-zinc-700 flex items-center justify-center"><div class="i-tabler:layers-linked size-7 text-zinc-500"></div></div></div><div class="font-medium mb-2">No connected apps yet</div><div class="text-sm text-zinc-400">Revoke access to connected apps here'),bze=le('<div class="p-4 space-y-4"><div class=space-y-2>'),wze=le('<div class="flex items-center justify-between py-4 px-4 gap-4 text-zinc-300 w-full rounded-xl transition-100 bg-zinc-900 group"><div class="font-medium truncate"></div><div class=flex-1></div><button class="p-2 text-zinc-500 hover:text-red-500 hover:bg-red-300/10 rounded-full transition-100 cursor-pointer m--2"><div class="i-tabler:x size-5">');const xze=()=>{const r=UZ();async function e(t){await qt.removeConnectedApps({domains:t==="__ALL__"?"__ALL__":[t]}),await r.refetch()}return(()=>{var t=bze(),n=t.firstChild;return Z(t,A(ui,{title:"Connected Apps"}),n),Z(t,A(Oe,{get when(){return r?.data?.domains.length===0},get children(){return vze()}}),n),Z(n,A(pt,{get each(){return r.data?.domains??[]},children:i=>(()=>{var s=wze(),o=s.firstChild,a=o.nextSibling,c=a.nextSibling;return Z(s,A(oH,{class:"size-7 my--1 flex-none",domain:i}),o),Z(o,()=>new URL(i).host),c.$$click=()=>e(i),s})()})),t})()};At(["click"]);var _ze=le('<div class="leading-tight text-yellow-400">Please reload the dApps and reconnect to them for the changes to take effect.'),Sze=le('<div class="p-4 space-y-4"><div class="flex items-center gap-1.5"><div class="text-sm py-0.5 px-1.5 rounded bg-zinc-800 text-zinc-300">Experimental</div></div><div class=space-y-2></div><div class="space-y-2 text-zinc-300"><div class=leading-tight>'),Eze=le('<button class="flex items-center py-4 px-4 gap-4 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div></div><div class=flex-1></div><div class="size-6 rounded-full bg-primary-200/15 flex items-center justify-center transition-100"><div class="size-4 i-tabler:check text-primary-200">');const Aze=[{label:"Enable",icon:"i-tabler:check text-green-400",value:!0},{label:"Disable",icon:"i-tabler:x text-red-400",value:!1}],Ize=()=>{const{settings:r,updateUserSettings:e}=xi(),[t,n]=Pe(!1);return(()=>{var i=Sze(),s=i.firstChild,o=s.firstChild,a=s.nextSibling,c=a.nextSibling,l=c.firstChild;return Z(s,A(ui,{title:"Connect as Phantom"}),o),Z(a,A(pt,{each:Aze,children:({label:u,icon:f,value:d})=>(()=>{var h=Eze(),g=h.firstChild,p=g.nextSibling,m=p.nextSibling,y=m.nextSibling;return h.$$click=()=>{n(!0),e({type:"setPhantomCompat",value:d})},Z(p,u),Ge(v=>{var w={"ring-1 ring-primary-200 text-zinc-50":d===r.phantomCompat,"text-zinc-400":d!==r.phantomCompat},_=gr("size-5",f),x=d!==r.phantomCompat;return v.e=nr(h,w,v.e),_!==v.t&&tn(g,v.t=_),x!==v.a&&y.classList.toggle("opacity-0",v.a=x),v},{e:void 0,t:void 0,a:void 0}),h})()})),Z(l,A(Oe,{get when(){return r.phantomCompat},fallback:"Enable to allow connecting to dApps that do not show Jupiter Wallet as an option.",children:"For dApps that do not show Jupiter Wallet as an option, connecting with Phantom will always use Jupiter Wallet instead, even if you have Phantom installed."})),Z(c,A(Oe,{get when(){return t()},get children(){return _ze()}}),null),i})()};At(["click"]);var aI=le('<div class="flex items-center gap-0.5"><div class="size-4 ml--0.5"></div><div>'),Cze=le('<div class="flex items-center gap-1"><div>'),Tze=le('<div class="p-4 space-y-4"><div class=space-y-3>'),Rze=le("<div class=space-y-1><h2 class=text-zinc-400></h2><div class=space-y-2>"),kze=le('<button class="flex items-center h-14 px-4 gap-4 text-zinc-300 w-full rounded-xl transition-100 bg-zinc-900"><div></div><div class=whitespace-nowrap></div><div class="flex-1 mx--4">'),Oze=le('<div class="i-tabler:chevron-right size-5 group-hover:text-zinc-50 text-zinc-600 transition-100 group-hover:translate-x-1">'),Pze=le('<div class="text-sm py-1 px-2 bg-zinc-800 shadow rounded-md group-hover:bg-zinc-700/75 transition-100 group-hover:translate-x-1">');const $ze=()=>{const r=Gn(),{selectedExplorer:e}=Al(),{settings:t}=xi(),n=UZ(),i=Te(()=>[{title:"Preferences",children:[{title:"Auto Approve",icon:"i-tabler:checkup-list",onClick:()=>r(Qe.SETTINGS_AUTO_APPROVE),rhs:(()=>{var s=aI(),o=s.firstChild,a=o.nextSibling;return Z(a,()=>[t.jupiterAutoApprove&&"Jup",t.meteoraAutoApprove&&"Met",t.orbAutoApprove&&"Orb"].filter(Boolean).join("/")||"Disabled"),Ge(c=>nr(o,{"i-tabler:x text-red-400":!t.jupiterAutoApprove&&!t.meteoraAutoApprove&&!t.orbAutoApprove,"i-tabler:check text-green-400":t.jupiterAutoApprove||t.meteoraAutoApprove||t.orbAutoApprove},c)),s})()},{title:"Block Explorer",icon:"i-tabler:blocks",onClick:()=>r(Qe.SETTINGS_BLOCK_EXPLORER),rhs:(()=>{var s=Cze(),o=s.firstChild;return Z(s,A(HT,{get component(){return e().Icon},class:"size-3"}),o),Z(o,()=>e().name),s})()},{title:"Skip Review",icon:"i-tabler:player-skip-forward",onClick:()=>r(Qe.SETTINGS_SKIP_REVIEW),rhs:(()=>{var s=aI(),o=s.firstChild,a=o.nextSibling;return Z(a,A(Oe,{get when(){return t.skipReviewStep},fallback:"Disabled",children:"Enabled"})),Ge(c=>nr(o,{"i-tabler:x text-red-400":!t.skipReviewStep,"i-tabler:check text-green-400":t.skipReviewStep},c)),s})()},{title:"Connect as Phantom",icon:"i-tabler:ghost-3",onClick:()=>r(Qe.SETTINGS_PHANTOM_COMPAT),rhs:(()=>{var s=aI(),o=s.firstChild,a=o.nextSibling;return Z(a,A(Oe,{get when(){return t.phantomCompat},fallback:"Disabled",children:"Enabled"})),Ge(c=>nr(o,{"i-tabler:x text-red-400":!t.phantomCompat,"i-tabler:check text-green-400":t.phantomCompat},c)),s})()}]},{title:"Security",children:[{title:"Change Password",icon:"i-tabler:password-user",onClick:()=>r(Qe.SETTINGS_CHANGE_PASSWORD)},{title:"Auto Lock Time",icon:"i-tabler:lock-cog",onClick:()=>r(Qe.SETTINGS_AUTO_LOCK),rhs:FZ.find(s=>s.value===t.lockDelayMinutes)?.label},{title:"Connected Apps",icon:"i-tabler:layers-linked",onClick:()=>r(Qe.SETTINGS_CONNECTED_APPS),rhs:n.data?.domains.length},{title:"Address Book",icon:"i-tabler:address-book",onClick:()=>r(Qe.ADDRESS_BOOK)}]},{title:"Support",children:[{title:"Feedback",icon:"i-tabler:pencil-heart",onClick:()=>window.open(Ss.FEEDBACK,"_blank")},{title:"App Version",icon:"i-tabler:alpha",rhs:`v${yi.runtime.getManifest().version}`}]}]);return(()=>{var s=Tze(),o=s.firstChild;return Z(s,A(ui,{title:"Manage Settings"}),o),Z(o,A(pt,{get each(){return i()},children:a=>(()=>{var c=Rze(),l=c.firstChild,u=l.nextSibling;return Z(l,()=>a.title),Z(u,A(pt,{get each(){return a.children},children:f=>(()=>{var d=kze(),h=d.firstChild,g=h.nextSibling;return g.nextSibling,gl(d,"click",f.onClick,!0),Z(g,()=>f.title),Z(d,A(Oe,{get when(){return f.rhs},get fallback(){return Oze()},children:p=>(()=>{var m=Pze();return Z(m,p),m})()}),null),Ge(p=>{var m={"group hover:bg-zinc-800/75 hover:text-zinc-50 cursor-pointer":!!f.onClick},y=gr(f.icon,"size-5 flex-none");return p.e=nr(d,m,p.e),y!==p.t&&tn(h,p.t=y),p},{e:void 0,t:void 0}),d})()})),c})()})),s})()};At(["click"]);var Dze=le('<div class="p-4 space-y-4"><div class=space-y-2></div><div class="space-y-2 text-zinc-300"><div class=leading-tight>'),Mze=le('<button class="flex items-center py-4 px-4 gap-4 w-full rounded-xl transition-100 bg-zinc-900 hover:bg-zinc-800/75 hover:text-zinc-50 group cursor-pointer"><div></div><div></div><div class=flex-1></div><div class="size-6 rounded-full bg-primary-200/15 flex items-center justify-center transition-100"><div class="size-4 i-tabler:check text-primary-200">');const Bze=[{label:"Enable",icon:"i-tabler:check text-green-400",value:!0},{label:"Disable",icon:"i-tabler:x text-red-400",value:!1}],Nze=()=>{const{settings:r,updateUserSettings:e}=xi();return(()=>{var t=Dze(),n=t.firstChild,i=n.nextSibling,s=i.firstChild;return Z(t,A(ui,{title:"Skip Review"}),n),Z(n,A(pt,{each:Bze,children:({label:o,icon:a,value:c})=>(()=>{var l=Mze(),u=l.firstChild,f=u.nextSibling,d=f.nextSibling,h=d.nextSibling;return l.$$click=()=>{e({type:"setSkipReviewStep",value:c})},Z(f,o),Ge(g=>{var p={"ring-1 ring-primary-200 text-zinc-50":c===r.skipReviewStep,"text-zinc-400":c!==r.skipReviewStep},m=gr("size-5",a),y=c!==r.skipReviewStep;return g.e=nr(l,p,g.e),m!==g.t&&tn(u,g.t=m),y!==g.a&&h.classList.toggle("opacity-0",g.a=y),g},{e:void 0,t:void 0,a:void 0}),l})()})),Z(s,A(Oe,{get when(){return r.skipReviewStep},fallback:"In-app swap and send transactions will require an additional review step before they can be executed.",children:"In-app swap and send transactions will skip the review step and execute immediately."})),t})()};At(["click"]);const Lze=()=>A(cq,{isVisible:!0}),Vi={FORM:"form",SELL_ASSET:"sell_asset",BUY_ASSET:"buy_asset",REVIEW:"review"},Fze=Au.USDC,Uze=Au.SOL,[zze,qze]=El(()=>{const[r,e]=Pe(Vi.FORM),[t,n]=Na(),i=Cs(),{toChainAmount:s,bigIntAbs:o}=qo(),{selectedAccount:a}=Jr(),[c,l]=Pe(null),u=L=>{l(L),n({sell:L.id},{replace:!0})},f=Te(()=>{const L=c()?.id;return L==null?null:i.data?.tokens.find(b=>b.id===L)?.amount??0}),[d,h]=Pe(null),g=L=>{h(L),n({buy:L.id},{replace:!0})},p=Te(()=>{const L=d()?.id;return L==null?null:i.data?.tokens.find(b=>b.id===L)?.amount??0}),m=Te(()=>t.amount?.trim()??""),y=L=>{n({amount:L},{replace:!0})},[v,w]=Pe(null),[_,x]=Pe(!1);let E=new AbortController;const S=ck(async()=>{const L=m(),D=c()?.id,b=c()?.decimals,I=d()?.id,B=c()?.scaledUiMultiplier;if(!L||!D||!b||!I){E.abort(),w(null);return}E.abort(),E=new AbortController;const F=s(L,b,B);let z=F;if(B){const Q=i.data?.tokens.find(X=>X.id===D)?.rawAmount??"0";o(BigInt(F)-BigInt(Q))<=1n&&(z=Q)}const G=await fm.getOrder({inputMint:D,outputMint:I,amount:z,taker:a()?.address},E.signal);m()===L&&In(()=>{x(!1),w(G)})},369),T=()=>{if(!m()){E.abort(),w(null),x(!1);return}x(!0),S()},[C,P]=Pe(!0),V=()=>{P(!1),E.abort()};return ot(Pn([m,c,d],()=>T())),ot(Pn(r,L=>{L===Vi.FORM&&(P(!0),T())})),gse(S,()=>C()&&1500,setInterval),mr(async()=>{const L=t.sell??Fze.id,D=t.buy??Uze.id,b=i.data?.tokens.find(B=>B.id===L)??null,I=i.data?.tokens.find(B=>B.id===D)??null;if(l(b),h(I),!b||!I){const F=(await ed.search({query:[L,D].sort().join(",")})).map(Q=>({id:Q.id,symbol:Q.symbol,icon:Q.icon,decimals:Q.decimals,price:Q.usdPrice??0,priceChange:Q.stats24h?.priceChange??0,isVerified:Q.isVerified,tags:Q.tags?.includes("jup-lend-earn")?["jup-lend-earn"]:void 0,scaledUiMultiplier:Q.scaledUiConfig?new Date>=new Date(Q.scaledUiConfig.newMultiplierEffectiveAt)?Q.scaledUiConfig.newMultiplier:Q.scaledUiConfig.multiplier:void 0})),z=F.find(Q=>Q.id===L)??null,G=F.find(Q=>Q.id===D)??null;l(z),h(G)}}),{view:r,setView:e,sellAsset:c,setSellAsset:u,sellBalance:f,buyAsset:d,setBuyAsset:g,buyBalance:p,amount:m,setAmount:y,quote:v,isQuoteLoading:_,disableQuoteRefresh:V}}),Xm=()=>{const r=qze();if(!r)throw new Error("useSwap must be used within a SwapProvider");return r};var jze=le('<div class="text-center text-zinc-600 border-t border-zinc-800 p-3">No more tokens'),Vze=le('<div><div class="px-4 pt-4"></div><div class=p-4><div class="flex items-center bg-zinc-900 rounded-xl ring-1 transition-100"><div class="flex items-center justify-center pl-3.5 pr-2.5"><div class="i-tabler:search size-5.5 text-zinc-500"></div></div><input class="w-full outline-none py-3 pr-3"placeholder="Search token name / symbol / address"type=search id=asset-input autocomplete=off autocorrect=off></div></div><div>'),Kze=le('<div class="size-4 i-tabler:rosette-discount-check text-primary-200">'),Hze=le('<button class="w-full text-left cursor-pointer flex items-center gap-4 px-4 h-15 hover:bg-zinc-900"><div class=space-y-0.5><div class="flex items-center gap-1"><div class="font-semibold leading-none"></div></div><div class="flex gap-1"><div class="text-sm leading-none text-zinc-400"></div><div class="text-sm leading-none text-zinc-400"></div></div></div><div class=flex-1>'),Wze=le('<div class="text-right space-y-0.5"><div class="font-medium leading-none"></div><div class="text-sm leading-none text-zinc-400">'),Gze=le('<div class="flex items-center gap-4 px-4 h-15"><div class="rounded-full size-8 bg-zinc-900 animate-pulse ring-1 ring-zinc-800"></div><div class="flex flex-col items-start gap-1"><div class="h-4 w-12 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-24 bg-zinc-900 animate-pulse rounded"></div></div><div class=flex-1></div><div class="flex flex-col items-end gap-1"><div class="h-4 w-20 bg-zinc-900 animate-pulse rounded"></div><div class="h-3 w-12 bg-zinc-900 animate-pulse rounded">');const Yze="asset-input",X9=15,Jze=()=>{const{view:r,setView:e,sellAsset:t,setSellAsset:n,buyAsset:i,setBuyAsset:s}=Xm(),o=Cs(),[a,c]=Pe(""),[l,u]=Pe(!1);function f(w){const _=r()===Vi.SELL_ASSET?w.id===i()?.id:w.id===t()?.id;In(()=>{if(_){const x=i(),E=t();x&&E&&(n(x),s(E))}else(r()===Vi.SELL_ASSET?n:s)(w);e(Vi.FORM)})}const d=Te(()=>{const w={};for(const _ of o.data?.tokens??[])w[_.id]=_.amount;return w}),[h,g]=Pe(""),p=ck(g,369);ot(()=>{p(a())});const m=hi(()=>({queryKey:["asset_search",h()],queryFn:async()=>{const w=h().trim();return(await ed.search({query:w,limit:X9.toString()})).map(x=>({id:x.id,symbol:x.symbol,icon:x.icon,decimals:x.decimals,price:x.usdPrice??0,priceChange:x.stats24h?.priceChange??0,isVerified:x.isVerified,tags:x.tags?.includes("jup-lend-earn")?["jup-lend-earn"]:void 0,scaledUiMultiplier:x.scaledUiConfig?new Date>=new Date(x.scaledUiConfig.newMultiplierEffectiveAt)?x.scaledUiConfig.newMultiplier:x.scaledUiConfig.multiplier:void 0}))}})),y=Te(()=>{if(r()===Vi.BUY_ASSET)return m.data??[];const w=h().trim().toLowerCase(),_=o.data?.tokens.filter(x=>x.amount>0&&(x.symbol.toLowerCase().includes(w)||x.id.toLowerCase().includes(w))).map(x=>({id:x.id,symbol:x.symbol,icon:x.icon,decimals:x.decimals,price:x.price,priceChange:x.priceChange,isVerified:x.isVerified,tags:x.tags,scaledUiMultiplier:x.scaledUiMultiplier}))??[];for(const x of m.data??[]){if(_.length>=X9)break;_.some(E=>E.id===x.id)||_.push(x)}return _}),v=Te(()=>m.isLoading||h()!==a());return mr(()=>document.getElementById(Yze)?.focus()),(()=>{var w=Vze(),_=w.firstChild,x=_.nextSibling,E=x.firstChild,S=E.firstChild,T=S.nextSibling,C=x.nextSibling;return Z(_,A(ui,{get title(){return r()===Vi.BUY_ASSET?"Select Buy Asset":"Select Sell Asset"},onBack:()=>e(Vi.FORM)})),T.$$focusout=()=>u(!1),T.$$focusin=()=>u(!0),T.$$input=P=>c(P.currentTarget.value),Z(C,A(Oe,{get when(){return!v()},get children(){return A(pt,{get each(){return y()},children:({icon:P,id:V,decimals:L,symbol:D,price:b,priceChange:I,isVerified:B,tags:F,scaledUiMultiplier:z})=>(()=>{var G=Hze(),Q=G.firstChild,X=Q.firstChild,O=X.firstChild,R=X.nextSibling,M=R.firstChild,k=M.nextSibling;return Q.nextSibling,G.$$click=()=>f({icon:P,id:V,decimals:L,symbol:D,price:b,priceChange:I,isVerified:B,tags:F,scaledUiMultiplier:z}),Z(G,A(ln,{src:P}),Q),Z(O,()=>D||V.slice(0,4)),Z(X,A(Oe,{when:B,get children(){return Kze()}}),null),Z(M,A(Ai,{value:b,prefix:"$",type:"long"})),k.classList.toggle("hidden",!I),Z(k,A(Gm,{value:I})),Z(G,A(Oe,{get when(){return d()[V]},children:j=>(()=>{var te=Wze(),ae=te.firstChild,he=ae.nextSibling;return Z(ae,A(Ai,{get value(){return j()*b},prefix:"$",type:"long"})),Z(he,A(Hr,{get value(){return j()},showZero:!0})),te})()}),null),Ge(()=>G.classList.toggle("bg-zinc-900/75",r()===Vi.BUY_ASSET?i()?.id===V:t()?.id===V)),G})()})}}),null),Z(C,A(Oe,{get when(){return v()},get children(){return A(pt,{get each(){return Array.from({length:20})},children:()=>Gze()})}}),null),Z(C,A(Oe,{get when(){return!v()&&o.data},get children(){return jze()}}),null),Ge(P=>{var V=!l(),L=!!l();return V!==P.e&&E.classList.toggle("ring-zinc-800",P.e=V),L!==P.t&&E.classList.toggle("ring-primary-200",P.t=L),P},{e:void 0,t:void 0}),Ge(()=>T.value=a()),w})()};At(["input","focusin","focusout","click"]);var Xze=le('<div class="i-tabler:shield-exclamation size-4">'),Zze=le('<div class="text-xs font-medium underline underline-offset-4.5 underline-dashed">'),Qze=le('<h1 class="font-semibold text-red-400"> JupShield '),eqe=le('<div class="p-3 bg-red-700/15 w-full rounded-md space-y-3">'),tqe=le('<div class="px-3 w-full space-y-3">'),Z9=le('<div class="text-xs leading-0 bg-zinc-500/30 text-zinc-100/70 rounded px-1.5 pt-2.25 pb-1.75 font-medium">'),rqe=le('<div class="flex gap-2"><div class="i-tabler:info-circle size-4 text-red-400 flex-none"></div><div><div class="flex items-center gap-1"><div class="text-red-400 font-medium leading-4"></div></div><div class="text-red-200 leading-4 mt-0.5">.'),nqe=le('<div class="flex gap-2"><div class="i-tabler:info-circle size-4 flex-none"></div><div><div class="flex items-center gap-1"><div class="font-medium leading-4"></div></div><div class="text-zinc-400 leading-4 mt-0.5">.');function Q9(r){return r.toLowerCase().split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}const eU=r=>{const e=hi(()=>({queryKey:["ultra-shield",r.asset?.id],queryFn:async()=>{const a=r.asset?.id;if(!a)return[];const{warnings:c}=await fm.getShield([a]);return c[a]??[]},staleTime:6e4})),t=Te(()=>e.data?.length===1?"1 Warning":`${e.data?.length} Warnings`),[n,i]=Pe(!1),s=Te(()=>e.data?.filter(a=>a.severity==="critical"||a.severity==="warning")),o=Te(()=>e.data?.filter(a=>a.severity==="info"));return A(Oe,{get when(){return e.data?.length},get children(){return A(el,{openDelay:0,closeDelay:0,get open(){return n()},onOpenChange:i,get children(){return[A(el.Trigger,{class:"text-red-400 flex items-start gap-1 mt-1 cursor-pointer",onMouseDown:()=>requestAnimationFrame(()=>i(!0)),onMouseUp:()=>requestAnimationFrame(()=>i(!0)),get children(){return[Xze(),(()=>{var a=Zze();return Z(a,t),a})()]}}),A(el.Portal,{get children(){return A(el.Content,{class:"bg-zinc-900 ring-1 ring-zinc-700 rounded-md text-sm w-95vw max-w-sm my-2",get children(){return A(bp,{class:"space-y-3 max-h-50vh p-3",gradientClass:"rounded-md",get children(){return[(()=>{var a=Qze(),c=a.firstChild;return Z(a,()=>t().split(" ")[0],c),Z(a,()=>t().split(" ")[1],null),a})(),(()=>{var a=eqe();return Z(a,A(pt,{get each(){return s()},children:({type:c,message:l,source:u})=>(()=>{var f=rqe(),d=f.firstChild,h=d.nextSibling,g=h.firstChild,p=g.firstChild,m=g.nextSibling,y=m.firstChild;return Z(p,()=>Q9(c)),Z(g,A(Oe,{when:u,get children(){var v=Z9();return Z(v,u),v}}),null),Z(m,l,y),f})()})),Ge(()=>a.classList.toggle("hidden",!s()?.length)),a})(),A(Oe,{get when(){return(o()?.length??0)>0},get children(){var a=tqe();return Z(a,A(pt,{get each(){return o()},children:({type:c,message:l,source:u})=>(()=>{var f=nqe(),d=f.firstChild,h=d.nextSibling,g=h.firstChild,p=g.firstChild,m=g.nextSibling,y=m.firstChild;return Z(p,()=>Q9(c)),Z(g,A(Oe,{when:u,get children(){var v=Z9();return Z(v,u),v}}),null),Z(m,l,y),f})()})),a}})]}})}})}})]}})}})};var iqe=le("<div> "),sqe=le('<div class="h-5 w-32 bg-zinc-800 animate-pulse rounded">');const zZ=r=>{const{buyAsset:e,quote:t}=Xm(),{fromChainAmount:n}=qo(),i=Te(()=>{const s=e()?.decimals,o=t()?.otherAmountThreshold;return!s||!o?Is.MINUS:n(o,s,e()?.scaledUiMultiplier)});return A(Oe,{get when(){return!r.isLoading},get fallback(){return sqe()},get children(){return A(Ia,{class:"flex items-center gap-1.5",get children(){return[A(ln,{get src(){return e()?.icon},class:"size-4.5 ring-0"}),(()=>{var s=iqe(),o=s.firstChild;return Z(s,i,o),Z(s,()=>e()?.symbol||e()?.id.slice(0,4),null),s})()]}})}})};var oqe=le('<div class="h-5 w-24 bg-zinc-800 animate-pulse rounded">'),aqe=le('<div class="flex items-center gap-1.5 text-primary-200 font-medium animate-duration-100"><div class="i-tabler:gas-station-off scale-110"></div><div>Gasless'),cqe=le("<span>"),lqe=le('<div class="i-tabler:gas-station scale-110 text-zinc-400">');const VT=r=>{const e=Cs(),t=Te(()=>e.data?.tokens.find(i=>i.id===Au.SOL.id)?.price||200),n=Te(()=>{if(!r.quote||!r.quote.taker)return;if(r.quote.gasless)return 0;let i=0;return r.quote.prioritizationFeePayer===r.quote.taker&&r.quote.prioritizationFeeLamports&&(i+=r.quote.prioritizationFeeLamports),r.quote.rentFeePayer===r.quote.taker&&r.quote.rentFeeLamports&&(i+=r.quote.rentFeeLamports),r.quote.signatureFeePayer===r.quote.taker&&r.quote.signatureFeeLamports&&(i+=r.quote.signatureFeeLamports),i/1e9*t()});return(()=>{var i=cqe();return Z(i,A(Kt,{get children(){return[A(Re,{get when(){return r.isLoading},get children(){return oqe()}}),A(Re,{get when(){return r.quote?.transaction===""},get children(){return Is.DASH}}),A(Re,{get when(){return n()===0},get children(){return aqe()}}),A(Re,{get when(){return n()},children:s=>A(Ia,{class:"flex items-center gap-1.5",get children(){return[lqe(),A(Ai,{type:"compact",get value(){return s()},prefix:"$"})]}})})]}})),Ge(()=>tn(i,r.class)),i})()};var uqe=le("<span>"),fqe=le('<div class="h-5 w-12 bg-zinc-800 animate-pulse rounded">');const dqe=r=>A(Oe,{get when(){return!r.isLoading&&typeof r.feeBps=="number"},get fallback(){return fqe()},get children(){var e=uqe();return Z(e,()=>r.feeBps/100+"%"),Ge(()=>e.classList.toggle("text-primary-200",r.feeBps===0)),e}});var hqe=le('<div class="h-5 w-12 bg-zinc-800 animate-pulse rounded">'),pqe=le('<div class="bg-zinc-900 ring-1 ring-zinc-700 rounded-md text-sm max-w-72 py-1.5 px-2.5 mt-1.5">Estimated difference between the input USD value and the output USD value.');const qZ=r=>{const[e,t]=Pe(!1);return A(Oe,{get when(){return!r.isLoading},get fallback(){return hqe()},get children(){return A(Im,{onOpenChange:t,get trigger(){return A(Hr,{get class(){return gr("border-b border-dashed border-zinc-500 transition-100",{"text-zinc-50 border-zinc-50":e()},{"text-red-400":(r.priceImpact??0)<=-5,"text-yellow-400":(r.priceImpact??0)<=-1&&(r.priceImpact??0)>-5},r.class,r.classList)},get value(){return r.priceImpact??0},override:{minimumFractionDigits:2,maximumFractionDigits:2},get prefix(){return(r.priceImpact??0)>0?`${r.prefix??""}+`:`${r.prefix??""}`},get suffix(){return`%${r.suffix??""}`}})},get content(){return pqe()}})}})};var gqe=le("<button>1 <!> &asymp; <!> ");const jZ=r=>{const[e,t]=Pe(!1),n=Te(()=>e()?r.buyAsset:r.sellAsset),i=Te(()=>e()?r.sellAsset:r.buyAsset),{fromChainAmount:s}=qo(),o=Te(()=>!r.quote?.inAmount||!r.quote?.outAmount?null:(Number(s(r.quote.outAmount,r.buyAsset.decimals,r.buyAsset.scaledUiMultiplier))/Number(s(r.quote.inAmount,r.sellAsset.decimals,r.sellAsset.scaledUiMultiplier)))**(e()?-1:1));return(()=>{var a=gqe(),c=a.firstChild,l=c.nextSibling,u=l.nextSibling,f=u.nextSibling;return f.nextSibling,un(a,at(r,{onClick:d=>{d.preventDefault(),d.stopPropagation(),t(!e())},get class(){return gr("hover:text-primary-200 cursor-pointer transition-100",r.class,r.classList)}}),!1,!0),Z(a,()=>n().symbol||n().id.slice(0,4),l),Z(a,A(Ai,{get value(){return o()??0},type:"long"}),f),Z(a,()=>i().symbol||i().id.slice(0,4),null),a})()};var mqe=le('<div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5"></div><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Half</button><button class="ml-1 bg-zinc-800 rounded p-1.5 leading-none font-semibold text-xs text-zinc-400 cursor-pointer hover:text-zinc-100 transition-100">Max'),yqe=le('<div class="flex items-center text-zinc-400"><div class="i-tabler:wallet size-4.5 mr-0.5">'),vqe=le('<div class="flex-1 truncate h-14 flex flex-col justify-center gap-1"><div class="text-right truncate text-2xl font-semibold outline-none pl-2 cursor-not-allowed transition-100"></div><div class="text-zinc-500 text-sm leading-3 inline-flex justify-end gap-1"> '),bqe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl">This wallet is read-only and cannot perform any actions.'),wqe=le('<div class="text-sm text-yellow-400 ring-1 ring-yellow-800 bg-yellow-900/15 py-3 px-4 rounded-xl flex items-center gap-3"><div>Skip review is enabled; swap will execute immediately.'),xqe=le('<div class="flex-1 p-4 space-y-4 flex flex-col"><div class=space-y-1><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Selling</div></div><div class="flex items-center gap-1"><div class="flex flex-col items-start justify-center h-14"><button class="flex flex-none p-1 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button></div><div class="flex-1 overflow-x-auto h-14 flex flex-col justify-center gap-1"><div class="text-zinc-500 text-sm text-right truncate leading-3"></div></div></div></div><div class="flex items-center justify-center"><button class="size-9 rounded-full ring-3 ring-zinc-950 bg-zinc-900 -my-6 flex items-center justify-center text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800 transition-100 cursor-pointer"><div class="i-tabler:arrows-left-right size-5 rotate-90"></div></button></div><div class="bg-zinc-900 p-4 rounded-xl space-y-3"><div class="flex items-center justify-between"><div class=text-zinc-400>Buying</div></div><div class="flex items-center gap-1"><div class="flex flex-col items-start justify-center h-14"><button class="flex flex-none p-1 items-center bg-zinc-800 rounded-full ring-1 ring-zinc-800 hover:ring-primary-200 transition-100 cursor-pointer group"><div class="i-tabler:chevron-down size-5 mx-1 text-zinc-500 group-hover:text-zinc-300 transition-100"></div></button></div></div></div></div><div class="rounded-xl bg-zinc-900 group cursor-pointer hover:ring-1 hover:ring-zinc-700 transition-all-100"><div class="py-3 pl-4 pr-3 flex items-center"><div class=flex-1></div><div class="i-tabler:chevron-down size-5 ml-2 text-zinc-400 group-hover:text-zinc-100 transition-100"></div></div></div><div class="flex-1 flex flex-col justify-end">'),_qe=le('<div class="h-5 w-32 rounded bg-zinc-800 animate-pulse">'),tU=le('<div class="size-7 rounded-full bg-zinc-700 animate-pulse">'),rU=le('<div class="ml-2 h-5 w-12 rounded bg-zinc-700 animate-pulse">'),nU=le('<div class="font-semibold ml-2 max-w-24 truncate">'),Sqe=le('<div class="h-5 w-20 rounded bg-zinc-800 animate-pulse">'),Eqe=le('<div class="h-14 flex-1 flex flex-col items-end justify-center gap-2"><div class="h-6 w-36 rounded bg-zinc-800 animate-pulse"></div><div class="h-4 w-26 rounded bg-zinc-800 animate-pulse">'),Aqe=le('<div class="bg-red-900/15 text-red-400 ring-1 ring-red-800 py-3 px-4 rounded-xl space-y-2 text-sm">'),Iqe=le('<div class="h-4 w-32 rounded bg-zinc-800 animate-pulse">'),Cqe=le('<div class="py-2.5 px-4 border-t border-zinc-800 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>');const Tqe=()=>{const r=Fa(),{setView:e,sellBalance:t,sellAsset:n,setSellAsset:i,amount:s,setAmount:o,buyBalance:a,buyAsset:c,setBuyAsset:l,quote:u,isQuoteLoading:f}=Xm(),d=Cs(),{selectedAccount:h}=Jr(),[g,p]=Pe(s()),{fromChainAmount:m}=qo(),[y,v]=Pe(!1),{isVisible:w}=Pk(),{settings:_}=xi(),x=Te(()=>{const C=c()?.decimals,P=u()?.outAmount;return!C||!P?null:m(P,C,c()?.scaledUiMultiplier)}),E=Te(()=>h()?.type!=="readonly"&&!w()&&u()!=null&&!u()?.error&&!!u()?.transaction&&!f());function S(C){const P=d.data?.tokens.find(D=>D.id===n()?.id)?.rawAmount,V=n()?.decimals;if(!P||!V)return;const L=C==="half"?(BigInt(P)/2n).toString():P.toString();L.startsWith("-")?p(""):p(m(L,V,n()?.scaledUiMultiplier))}function T(){const C=n(),P=c(),V=u();In(()=>{P&&i(P),C&&l(C),f()?p(""):V&&P&&(V.outAmount?p(m(V.outAmount,P.decimals,P.scaledUiMultiplier)):p(""))})}return(()=>{var C=xqe(),P=C.firstChild,V=P.firstChild,L=V.firstChild;L.firstChild;var D=L.nextSibling,b=D.firstChild,I=b.firstChild,B=I.firstChild,F=b.nextSibling,z=F.firstChild,G=V.nextSibling,Q=G.firstChild,X=G.nextSibling,O=X.firstChild;O.firstChild;var R=O.nextSibling,M=R.firstChild,k=M.firstChild,j=k.firstChild,te=P.nextSibling,ae=te.firstChild,he=ae.firstChild,re=he.nextSibling,q=te.nextSibling;return Z(C,A(ui,{title:"Swap Assets"}),P),Z(L,A(Oe,{get when(){return d.isFetched},get fallback(){return _qe()},get children(){var J=mqe(),de=J.firstChild,ue=de.nextSibling,we=ue.nextSibling;return Z(J,A(Hr,{get value(){return t()??0},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0}),ue),ue.$$click=()=>S("half"),we.$$click=()=>S("max"),Ge(se=>{var U=!t(),K=!t();return U!==se.e&&(ue.disabled=se.e=U),K!==se.t&&(we.disabled=se.t=K),se},{e:void 0,t:void 0}),J}}),null),I.$$click=()=>e(Vi.SELL_ASSET),Z(I,A(Oe,{get when(){return n()},get fallback(){return[tU(),rU()]},children:J=>[A(ln,{get src(){return J().icon},class:"size-7"}),(()=>{var de=nU();return Z(de,()=>J().symbol||J().id.slice(0,4)),de})()]}),B),Z(b,A(eU,{get asset(){return n()}}),null),Z(F,A(LZ,{class:"pl-2 text-right text-2xl font-semibold outline-none w-full overflow-x-auto",placeholder:"0.00",get input(){return g()},setInput:p,onValue:J=>o(J??"")}),z),Z(z,A(Hr,{get value(){return(n()?.price??0)*(Number(g())||0)},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}})),Q.$$click=()=>T(),Z(O,A(Oe,{get when(){return d.isFetched},get fallback(){return Sqe()},get children(){var J=yqe();return J.firstChild,Z(J,A(Hr,{get value(){return a()??0},override:{minimumFractionDigits:2,maximumFractionDigits:6},showZero:!0}),null),J}}),null),k.$$click=()=>e(Vi.BUY_ASSET),Z(k,A(Oe,{get when(){return c()},get fallback(){return[tU(),rU()]},children:J=>[A(ln,{get src(){return J().icon},class:"size-7"}),(()=>{var de=nU();return Z(de,()=>J().symbol||J().id.slice(0,4)),de})()]}),j),Z(M,A(eU,{get asset(){return c()}}),null),Z(R,A(Oe,{get when(){return!f()},get fallback(){return Eqe()},get children(){var J=vqe(),de=J.firstChild,ue=de.nextSibling,we=ue.firstChild;return Z(de,A(Oe,{get when(){return x()},fallback:"0.00",get children(){return A(Ia,{get children(){return x()}})}})),Z(ue,A(Hr,{get value(){return u()?.outUsdValue??0},prefix:"$",override:{minimumFractionDigits:2,maximumFractionDigits:2}}),we),Z(ue,A(qZ,{get classList(){return{hidden:!u()?.priceImpact}},get priceImpact(){return u()?.priceImpact},prefix:"(",suffix:")"}),null),Ge(()=>de.classList.toggle("text-zinc-500",!x())),J}}),null),Z(C,A(Oe,{get when(){return kr(()=>!f()&&u()?.errorCode!==1)()&&u()?.error},children:J=>(()=>{var de=Aqe();return Z(de,J),de})()}),te),te.$$click=()=>v(!y()),Z(ae,A(Oe,{get when(){return kr(()=>!!c())()&&n()},get fallback(){return Iqe()},get children(){return A(jZ,{class:"text-sm font-medium",get classList(){return{"text-zinc-500":f()||u()==null}},get buyAsset(){return c()},get sellAsset(){return n()},get quote(){return kr(()=>!!f())()?null:u()}})}}),he),Z(ae,A(Oe,{get when(){return kr(()=>!y())()&&u()?.transaction},get children(){return A(VT,{get isLoading(){return f()},get quote(){return u()},class:"text-sm text-zinc-400 font-medium"})}}),re),Z(te,A(Oe,{get when(){return y()},get children(){return A(pt,{get each(){return[{title:"Min Receive",value:A(zZ,{get isLoading(){return f()}})},{title:"Network Fee",value:A(VT,{get isLoading(){return f()},get quote(){return u()}})},{title:"Platform Fee",value:A(dqe,{get isLoading(){return f()},get feeBps(){return u()?.platformFee?.feeBps??0}})}]},children:({title:J,value:de})=>(()=>{var ue=Cqe(),we=ue.firstChild,se=we.nextSibling;return Z(we,J),Z(se,de),ue})()})}}),null),Z(q,A(Kt,{get children(){return[A(Re,{get when(){return h()?.type==="readonly"},get children(){return bqe()}}),A(Re,{get when(){return w()},get children(){return A(BZ,{})}}),A(Re,{get when(){return _.skipReviewStep},get children(){return wqe()}})]}})),Z(C,A(_i,{onCancelClick:()=>r(),onApproveClick:()=>e(Vi.REVIEW),get approveTitle(){return _.skipReviewStep?"Swap":"Review"},get isApproveDisabled(){return!E()}}),null),Ge(()=>re.classList.toggle("rotate-180",!!y())),C})()};At(["click"]);var Rqe=le('<div class="flex items-center gap-1.5"><div> '),kqe=le("<div> "),Oqe=le('<div class="size-16 bg-primary-200/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:loader-2 animate-spin text-primary-200">'),Pqe=le('<div class="size-16 bg-green-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:check text-green-400">'),$qe=le('<div class="size-16 bg-red-400/10 rounded-full flex items-center justify-center"><div class="size-10 i-tabler:x text-red-400">'),Dqe=le('<div class="flex space-x--4">'),Mqe=le('<div class="flex-1 p-4 flex flex-col mb-4"><div class="flex flex-col items-center justify-center mb-5"><div class=my-6></div><div class="text-2xl font-semibold"></div><div class="text-zinc-400 font-medium mt-2"><span class=text-zinc-50> </span> to <span class=text-zinc-50></span></div></div><div class="divide-y divide-zinc-800 rounded-xl bg-zinc-900">'),Bqe=le('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400></div><div class=font-medium>'),Nqe=le('<div class="py-3 px-4 flex items-center justify-between"><div class=text-zinc-400>Transaction</div><button class="font-medium flex items-center text-primary-200 cursor-pointer"><div class="i-tabler:external-link size-4.5 mr-1">');const Lqe=()=>{const{setView:r,sellAsset:e,buyAsset:t,quote:n,disableQuoteRefresh:i}=Xm(),s=Cs(),{selectedAccount:o}=Jr(),{openExplorer:a}=Al(),{settings:c}=xi(),l=Te(()=>o()?.address),[u,f]=Pe("idle"),[d,h]=Pe(null),{fromChainAmount:g}=qo(),p=Te(()=>g(d()?.inputAmountResult??n()?.inAmount??"0",e()?.decimals??0,e()?.scaledUiMultiplier)),m=Te(()=>g(d()?.outputAmountResult??n()?.outAmount??"0",t()?.decimals??0,t()?.scaledUiMultiplier)),y=Te(()=>u()==="idle"&&!!n()?.transaction),v=Te(()=>[{title:u()==="tx_success"?"Sold":"Selling",value:(()=>{var _=Rqe(),x=_.firstChild,E=x.firstChild;return Z(_,A(ln,{get src(){return e()?.icon},class:"size-4.5 ring-0"}),x),Z(x,A(Hr,{get value(){return Number(p())},override:{minimumFractionDigits:0,maximumFractionDigits:9}}),E),Z(x,()=>e()?.symbol||e()?.id.slice(0,4),null),_})()},{title:u()==="tx_success"?"Bought":"Buying",value:A(Ia,{class:"flex items-center gap-1.5",get children(){return[A(ln,{get src(){return t()?.icon},class:"size-4.5 ring-0"}),(()=>{var _=kqe(),x=_.firstChild;return Z(_,A(Hr,{get value(){return Number(m())},override:{minimumFractionDigits:0,maximumFractionDigits:9}}),x),Z(_,()=>t()?.symbol||t()?.id.slice(0,4),null),_})()]}})},...d()?.signature?[]:[{title:"Min Receive",value:A(zZ,{isLoading:!1})},{title:"Price Impact",value:A(qZ,{get priceImpact(){return n()?.priceImpact}})}],{title:"Rate",value:A(jZ,{get buyAsset(){return t()},get sellAsset(){return e()},get quote(){return n()}})},{title:"Network Fee",value:A(VT,{get quote(){return n()},isLoading:!1})}]);async function w(){const{transaction:_,requestId:x}=n()??{};if(!(!_||!x)){i(),f("tx_sending");try{const{signedTransactions:E}=o()?.type==="privy"?{signedTransactions:[await Cp.signTransaction(_)]}:await qt.signTransactions({origin:window.location.origin,signerAddress:l(),transactions:[_],skipApproval:!0,forcePopup:!0}),S=await fm.postExecute({requestId:x,signedTransaction:E[0]});h(S),f(S.code===0?"tx_success":"tx_error")}catch(E){console.error(E),f("tx_error")}finally{s.refetch()}}}return mr(()=>{u()==="idle"&&c.skipReviewStep&&o()?.type!=="readonly"&&w()}),(()=>{var _=Mqe(),x=_.firstChild,E=x.firstChild,S=E.nextSibling,T=S.nextSibling,C=T.firstChild,P=C.firstChild,V=C.nextSibling,L=V.nextSibling,D=x.nextSibling;return Z(E,A(Kt,{get children(){return[A(Re,{get when(){return u()==="tx_sending"},get children(){return Oqe()}}),A(Re,{get when(){return u()==="tx_success"},get children(){return Pqe()}}),A(Re,{get when(){return u()==="tx_error"},get children(){return $qe()}}),A(Re,{when:!0,get children(){var b=Dqe();return Z(b,A(ln,{hd:!0,class:"size-16",get src(){return e()?.icon}}),null),Z(b,A(ln,{hd:!0,class:"size-16",get src(){return t()?.icon}}),null),b}})]}})),Z(S,A(Kt,{get children(){return[A(Re,{get when(){return u()==="tx_sending"},children:"Swapping..."}),A(Re,{get when(){return u()==="tx_success"},children:"Successfully Swapped"}),A(Re,{get when(){return u()==="tx_error"},children:"Failed to Swap"}),A(Re,{when:!0,children:"Confirm Swap"})]}})),Z(C,A(Hr,{get value(){return Number(p())},override:{minimumFractionDigits:0,maximumFractionDigits:6}}),P),Z(C,()=>e()?.symbol||e()?.id.slice(0,4),null),Z(L,A(Ia,{get children(){return[A(Hr,{get value(){return Number(m())},override:{minimumFractionDigits:0,maximumFractionDigits:6}})," ",kr(()=>t()?.symbol||t()?.id.slice(0,4))]}})),Z(D,A(pt,{get each(){return v()},children:({title:b,value:I})=>(()=>{var B=Bqe(),F=B.firstChild,z=F.nextSibling;return Z(F,b),Z(z,I),B})()}),null),Z(D,A(Oe,{get when(){return d()?.signature},children:b=>(()=>{var I=Nqe(),B=I.firstChild,F=B.nextSibling;return F.firstChild,F.$$click=()=>a({type:"tx",value:b()}),Z(F,A(Gi,{get address(){return b()}}),null),I})()}),null),Z(_,A(_i,{onCancelClick:()=>r(Vi.FORM),onApproveClick:()=>w(),get cancelTitle(){return u()==="tx_success"?"Close":"Back"},approveTitle:"Swap",get isApproveDisabled(){return!y()}}),null),_})()};At(["click"]);const Fqe=()=>A(zze,{get children(){return A(Uqe,{})}}),Uqe=()=>{const{view:r}=Xm();return A(Kt,{get children(){return[A(Re,{get when(){return r()===Vi.FORM},get children(){return A(Tqe,{})}}),A(Re,{get when(){return r()===Vi.SELL_ASSET||r()===Vi.BUY_ASSET},get children(){return A(Jze,{})}}),A(Re,{get when(){return r()===Vi.REVIEW},get children(){return A(Lqe,{})}})]}})};var zqe=le(`<div class="p-4 h-600px flex flex-col justify-between gap-3"><button class="p-2 -m-2 text-zinc-400 hover:text-zinc-50 cursor-pointer transition-100"><div class="i-tabler:arrow-left size-6"></div></button><div class="flex-1 flex flex-col items-center justify-center"><h1 class="font-semibold text-3xl mt-8 mb-6">Forgot your password?</h1><p class="opacity-60 text-center leading-5">Unfortunately, we can't retrieve your password since it's stored solely on your device. You can either attempt more passwords, or do a full wipe and reset of your wallet.</p></div><button class="cursor-pointer w-full p-2.5 rounded-md text-lg font-semibold transition-100 bg-zinc-800 active:bg-zinc-800/75 text-zinc-300">Try More Passwords</button><button class="cursor-pointer w-full p-2.5 rounded-md text-lg font-semibold transition-100 bg-red-500 active:bg-red-700">Wipe & Reset Wallet`);const qqe=r=>{const e=ci();function t(){e.confirm({title:"Confirm Reset Wallet",content:"This will permanently wipe your wallet and reset it to the default state and cannot be undone. Ensure that you have backed up your wallet before proceeding!",confirmText:"Reset",confirmStyle:"danger",onConfirm:async()=>{await qt.factoryReset({}),window.open(`/popup.html#${Qe.ONBOARD}`,"_blank"),window.close()}})}return(()=>{var n=zqe(),i=n.firstChild,s=i.nextSibling,o=s.firstChild,a=s.nextSibling,c=a.nextSibling;return i.$$click=()=>r.showUnlockView(),Z(s,A(Sp,{class:"saturate-0 size-20 my-8"}),o),a.$$click=()=>r.showUnlockView(),c.$$click=t,n})()};At(["click"]);var jqe=le('<div class="p-4 h-600px flex flex-col justify-between gap-3"><div class="flex-1 flex flex-col justify-center items-center"><h1 class="font-semibold text-3xl mt-8 mb-2">Welcome Back</h1><p class="opacity-60 text-lg">Your personal portal into Solana</p></div><form><div class=relative><input class="py-2.5 px-3 w-full bg-zinc-900 ring-1 rounded-md text-lg outline-none transition-100"placeholder="Enter password to unlock"id=password-input name=password-input minlength=6><button class="absolute right-0 h-12 px-3.5 text-zinc-500 hover:text-zinc-300 cursor-pointer transition-100"type=button><div class=size-5.5></div></button></div><button class="cursor-pointer w-full p-2.5 mt-4 rounded-md text-lg font-semibold transition-100"type=submit></button></form><div class="flex justify-end"><button class="text-zinc-400 hover:text-zinc-50 font-medium cursor-pointer transition-100">Forgot Password?');const iU="password-input",Vqe=r=>{const{unlock:e}=Jr(),[t,n]=Pe(!0),[i,s]=Pe(""),[o]=Na(),a=Te(()=>typeof o.id!="string"?null:o.id||null);async function c(l){l.preventDefault();const f=new FormData(l.target).get(iU)?.toString()||"";try{a()?(await qt.unlock({password:f}),await qt.approve({id:a()||"",isApproved:!0})):await e({password:f})}catch{s("Incorrect Password")}}return mr(()=>document.getElementById(iU)?.focus()),[A(GX,{raysOrigin:"top-center",raysColor:"#C7F284",raysSpeed:.25,lightSpread:.69,rayLength:4.2,followMouse:!1,noiseAmount:.1,distortion:.03,class:"fixed inset-0 pointer-events-none z--1"}),(()=>{var l=jqe(),u=l.firstChild,f=u.firstChild,d=u.nextSibling,h=d.firstChild,g=h.firstChild,p=g.nextSibling,m=p.firstChild,y=h.nextSibling,v=d.nextSibling,w=v.firstChild;return Z(u,A(Sp,{class:"size-20"}),f),d.addEventListener("submit",_=>c(_)),g.$$input=()=>s(""),p.$$click=_=>{_.preventDefault(),n(!t())},Z(y,A(Oe,{get when(){return i()},fallback:"Unlock",get children(){return i()}})),w.$$click=()=>r.showForgotPasswordView(),Ge(_=>{var x={"ring-red-400":!!i(),"ring-zinc-700 focus:ring-primary-200":!i()},E=t()?"password":"text",S={"i-tabler:eye":!t(),"i-tabler:eye-off":t()},T={"cursor-not-allowed bg-zinc-700 text-zinc-400":!!i(),"bg-primary-200 active:bg-primary-200/80 text-zinc-950":!i()},C=!!i();return _.e=nr(g,x,_.e),E!==_.t&&Lr(g,"type",_.t=E),_.a=nr(m,S,_.a),_.o=nr(y,T,_.o),C!==_.i&&(y.disabled=_.i=C),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()]};At(["input","click"]);const Kqe=()=>{const[r,e]=Pe("unlock");return A(Kt,{get children(){return[A(Re,{get when(){return r()==="unlock"},get children(){return A(Vqe,{showForgotPasswordView:()=>e("forgot-password")})}}),A(Re,{get when(){return r()==="forgot-password"},get children(){return A(qqe,{showUnlockView:()=>e("unlock")})}})]}})},Hqe=()=>{const r=pc===Co.SIDE_PANEL?See:xee;return A(r,{root:Wqe,get children(){return[A(gn,{get path(){return Qe.ROOT},component:Lze}),A(gn,{get path(){return Qe.ONBOARD},component:t9e}),A(gn,{get path(){return Qe.HOME},component:dMe}),A(gn,{get path(){return Qe.SEARCH},component:wUe}),A(gn,{get path(){return Qe.UNLOCK},component:Kqe}),A(gn,{get path(){return Qe.APPROVE_CONNECT},component:rme}),A(gn,{get path(){return Qe.APPROVE_TRANSACTION},component:F4e}),A(gn,{get path(){return Qe.APPROVE_MESSAGE},component:mve}),A(gn,{get path(){return Qe.RECEIVE},component:h9e}),A(gn,{get path(){return Qe.SEND},component:nze}),A(gn,{get path(){return Qe.SWAP},component:Fqe}),A(gn,{get path(){return Qe.ACCOUNTS},component:D0e}),A(gn,{get path(){return Qe.ACCOUNTS_RENAME()},component:h0e}),A(gn,{get path(){return Qe.ACCOUNTS_KEY()},component:c0e}),A(gn,{get path(){return Qe.ASSETS()},component:M8e}),A(gn,{get path(){return Qe.SETTINGS},component:$ze}),A(gn,{get path(){return Qe.SETTINGS_AUTO_APPROVE},component:oze}),A(gn,{get path(){return Qe.SETTINGS_CONNECTED_APPS},component:xze}),A(gn,{get path(){return Qe.SETTINGS_AUTO_LOCK},component:lze}),A(gn,{get path(){return Qe.SETTINGS_CHANGE_PASSWORD},component:yze}),A(gn,{get path(){return Qe.SETTINGS_BLOCK_EXPLORER},component:dze}),A(gn,{get path(){return Qe.SETTINGS_PHANTOM_COMPAT},component:Ize}),A(gn,{get path(){return Qe.SETTINGS_SKIP_REVIEW},component:Nze}),A(gn,{get path(){return Qe.PNL},component:f9e}),A(gn,{get path(){return Qe.ADDRESS_BOOK},component:nge}),A(gn,{get path(){return Qe.ADDRESS_BOOK_SAVE},component:Kge}),A(gn,{get path(){return Qe.TOKEN_RECLAIM},component:L9e})]}})},Wqe=r=>{const e=new ote,t=Gn();return pc===Co.SIDE_PANEL&&(mr(()=>{qt.registerNavigate(n=>t(n))}),mt(()=>{qt.unregisterNavigate()})),A(Ite,{get children(){return A(hU,{fallback:(n,i)=>A(Rte,{error:n,reset:i}),get children(){return A(rte,{client:e,get children(){return A(GQ,{values:[Zne,pse,mse,Pte,eie],get children(){return A(Gpe,{get children(){return r.children}})}})}})}})}})};(async()=>(WQ(),navigator.userAgent.includes("Firefox")&&pc===Co.POPUP&&(document.body.style.width="400px",document.body.style.height="600px"),await qt.init(),yQ(()=>A(Hqe,{}),document.getElementById("root"))))()});export default Gqe();
