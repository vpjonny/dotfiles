(()=>{const a=!!document?.querySelector("script[adblock_use][bis_use]"),G=(()=>{const a=sessionStorage.getItem("bis_data");if(null!==a){return JSON.parse(a)}return null})(),E=G?.config?`${G.id}_t`:null,K=G?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},q=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"",{PARSERS:o=[]}=K;ParserProcessors={XMLHttpRequest:function(G){const E=fetch;fetch=async function(K){let q=K instanceof Request?K.url:K;if("object"==typeof q&&q.href&&(q=q.href),!(a=>{let G=a.replace(/.*\/([gimy]*)$/,"$1"),E=a.replace(new RegExp("^/(.*?)/"+G+"$"),"$1");return new RegExp(E,G)})(G.QUERY).test(q))return E.apply(this,arguments);try{const K=await E.apply(this,arguments);if(K.body instanceof ReadableStream){const E=K.clone(),q=await E.json(),o=q[G.CONTENT_QUERY],j=i(o,G.PATHS_CHECK_AD);if(j?.length&&(D(j,G),a)){q[G.CONTENT_QUERY]=o.filter((a=>!a.isAd));const a=JSON.stringify(q);return new Response(a,{status:K.status,statusText:K.statusText,headers:K.headers})}}return K}catch(a){return E.apply(this,arguments)}}}};const i=(a,G)=>{const E=[];for(let K of a)G.some((a=>a.reduce(((a,G)=>a&&"object"==typeof a?a[G]:a),K)))&&E.push(K);return E},D=(a,G)=>{if(a?.length)for(let q of a){const a=j(q,K.PROPERTIES_FOR_AD_DATA,G.PATHS_GET_PROPERTIES);a&&A(E,a)}},j=function(a,G,E){let K={};for(let q of G){const{NAME:G,PATH_NAME:o,IS_NECESSARY:i}=q,D=E[o];if(K[G]=D?.length?D.reduce(((a,G,E)=>{if(E===D.length-1&&"PATH_TO_PAGE_LINK"===o){return`https://www.tiktok.com/@${a[G]}`}return a&&"object"==typeof a?a?a[G]:null:a??null}),a):null,i&&!K[G])return null}return K},A=(a,G)=>{try{let E={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:a,to:a.substring(0,a.length-2),content:G,dynamicAppId:q};window.postMessage(E)}catch(a){}};for(let a of o)a.USE&&ParserProcessors[a.TYPE](a)})();