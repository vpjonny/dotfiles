(()=>{const a=(G=sessionStorage.getItem("bis_data"),E={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==G&&(E.config=JSON.parse(G)),E);var G,E;const K=a&&a.config?a.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],q=a&&a.config?a.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],o=a&&a.config?`${a.config.id}_i`:null,i=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";!(!a||!a.adOpt)&&a.adOpt;let D=0;const j=function(a,G){return function(){!function(a,G,E){try{let K={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:E,from:a,to:a.substring(0,a.length-2),content:G,dynamicAppId:i};window.postMessage(K)}catch(a){}}(o,a,G)}},A=function(a,G){let E=null,K=null;for(let o of q){const q=o.NAME,i=o.PATH_NAME,D=o.IS_NECESSARY,j=o.DEFAULT_VALUE;if(E||(E={}),"detectionTime"!==q){if(G[i])if("showFullText"!==q){if(E[q]=F(a,G[i],j),D&&!E[q])return null}else K=G[i].some((G=>!!F(a,G,j)))}else E[q]=Date.now()/1e3|0}return E.headlineText?.length&&(E.fullText=E.headlineText+"\n"+E.fullText),delete E.headlineText,!1===K&&(E.fullText=""),E},F=function(a,G,E){let K=a;for(let[a,q]of Object.entries(G)){if("*"===q&&K.length){const E=G.slice(+a+1),q=E.length-1;return K.map((a=>{let G=a;for(let[a,K]of Object.entries(E))if(G[K]&&(G=G[K]),q===+a&&"string"==typeof G)return G}))}if(K[q])K=K[q];else if(!K[q]){K=E;break}}return K},d=function(a,G){if(!a||!a.length)return;let E=null;for(let K of a){let a="";try{if(Q(K,G.PATH_CHECK_PROPERTIES))E=A(K,G.PATHS_GET_PROPERTIES),a=E.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!G.RULES_TO_GET_FULL_TEXT||!Q(K,G.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;E=A(K,G.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),a="INSTAGRAM_FULL_TEXT_DATA"}E&&setTimeout(j(E,a),0)}catch(a){}}},c=function(a,G){if(!a||!a.length)return;let E=[];for(let K of a){if(!Q(K,G.PATH_CHECK_PROPERTIES))continue;let a=A(K,G.PATHS_GET_PROPERTIES);a&&(null===a.videoVersions&&delete a.videoVersions,E.push(a))}E.length&&setTimeout(j(E,"INSTAGRAM_STORY_DATA"),0)},Q=function(a,G){let E=!1;for(let K of G){let G=a,q=K.length-1;for(let[a,o]of Object.entries(K))if(o in G&&G[o]){if(G=G[o],q===+a){E=!0;break}}else{if("*"===o&&G.length&&G.length>1&&!E&&q===+a){E=!0;break}E=!1}if(E)break}return E},J={XMLHttpRequest:function(a){let G=XMLHttpRequest.prototype.open,E=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const a=arguments[0].toLowerCase(),G=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[a]=G,E.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],G.apply(this,arguments)};let K=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let G=this.onreadystatechange;return this.onreadystatechange=function(){const E=function(){const G=a.AD_TYPES_WAYS_TO_PROPERTIES;let E=a.QUERY;for(let a=0;a<G.length;a++){const K="QUERY_AD_TYPE_"+a,q=G[a];E=E.replace(K,q.QUERY_URL_PATH)}return new RegExp(E)}(),K=a.MATCH_HEADERS,q=this.requestHeaders?Object.keys(this.requestHeaders):null;let o=!1;if(q&&(o=q.some((a=>{if(K[a]&&K[a].includes(this.requestHeaders[a]))return!0}))),4===this.readyState&&E.test(this.responseURL))for(let D of a.AD_TYPES_WAYS_TO_PROPERTIES){const j=this.responseURL.includes(D.QUERY_URL_PATH);if(o||j){let A=this.response.length?JSON.parse(this.response):this.response;function i(a,G){let E=G;for(let[G,K]of Object.entries(a))E&&E[K]&&(E=E[K]),"*"===K&&E.length&&(E=E.map((E=>i(a.slice(+G+1),E))));return E}let F=i(D.PATH_TO_POSTS,A);"story"===D.AD_TYPE&&this.responseURL.includes(D.QUERY_URL_PATH)&&F.length?F.forEach((a=>{a&&c(a,D)})):"feed"===D.AD_TYPE&&d(F,D)}}if(G)return G.apply(this,arguments)},K.apply(this,arguments)}},script:function(a){function G(){let G=Array.from(document.querySelectorAll("script"));const E=new RegExp(a.REGEXP_FILTER);let K=G.filter((a=>a.innerHTML.search(E)>-1));return K.length?K[0]:null}if(D++,"complete"!==document.readyState&&D<15){let G=null;return void(G=setTimeout((()=>{G&&clearTimeout(G),J.script(a)}),200))}let E=function(){let a=G();return a?JSON.parse(a.innerHTML):null}();let K=function a(G,E){let K=E;for(let[E,q]of Object.entries(G))K&&K[q]&&(K=K[q]),"*"===q&&K.length&&(K=K.map((K=>a(G.slice(+E+1),K))));return K}(a.PATH_TO_POSTS,E);d(K,a)}};for(let a of K)a.USE&&J[a.TYPE](a)})();