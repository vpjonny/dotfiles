(()=>{const a=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function G(G,E,K,q,o=null){try{document.location.host;let i="detector",D=K;!D&&o&&(D=o[0]?.type?o[0].type:null);let j={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:i,to:i.substring(0,i.length-2),content:{requestMethod:G,url:E,type:D,content:q},dynamicAppId:a};if(o&&o instanceof Promise)return void o.then((a=>{j.content.encodedPostBody=a,j.type="VIDEO_TWITCH_INSTREAM_DATA",window.postMessage(j,"*")}));q?.includes("streamPlaybackAccessToken")&&(j.type="VIDEO_TWITCH_INSTREAM_DATA"),window.postMessage(j,"*")}catch(a){}}let E=XMLHttpRequest.prototype.open,K=XMLHttpRequest.prototype.send,q=fetch;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],E.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){const a=Object.assign(arguments,{});let E=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(a){const G=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!G&&G.some((G=>a.includes(G)))}(this.responseURL)||G(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,a),E)return E.apply(this,arguments)},K.apply(this,arguments)},fetch=function(){const a=arguments;let E=arguments[0]instanceof Request?arguments[0].url:arguments[0];const K=arguments[0]instanceof Request?arguments[0].method:arguments[1]?.method?arguments[1].method:"GET",o="POST"===K?arguments[1].body:null;return"object"==typeof E&&E.href&&(E=E.href),new Promise(((i,D)=>{q.apply(this,a).then((function(a){if(a.body instanceof ReadableStream){const q=a.headers.get("content-type"),i=a.json;a.json=function(){return new Promise(((D,j)=>{i.apply(this,arguments).then((function(i){0!==a.url.search(/data:application\/json;base64/)&&G(K,E,q,JSON.stringify(i),o),D(i)})).catch((function(a){j(a)}))}))};const D=a.text;a.text=function(){return new Promise(((i,j)=>{D.apply(this,arguments).then((function(D){0!==a.url.search(/data:application\/json;base64/)&&G(K,E,q,D,o),i(D)})).catch((function(a){j(a)}))}))},new RegExp("video-edge.*.ts$").test(E)&&"POST"===K&&o?.arrayBuffer&&G(K,E,o.type,null,o.text())}i.apply(this,arguments)})).catch((function(a){D.apply(this,arguments)}))}))}})();