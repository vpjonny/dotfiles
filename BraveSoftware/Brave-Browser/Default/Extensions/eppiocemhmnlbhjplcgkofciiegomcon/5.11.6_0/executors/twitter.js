(()=>{function a(){const a=function(){let a=sessionStorage.getItem("bis_data");if(null!==a)return JSON.parse(a);try{let a={posdMessageId:"PANELOS_MESSAGE",posdHash:GenerateQuickId(),type:"CONFIG_NOT_FOUND",from:"",to:"",content:"configuration not found",dynamicAppId:K};window.postMessage(a)}catch(a){}return null}(),G=a?a.config.twitterConfig.TRAFFIC_DETECTOR:null,E=a?a.id+"_w":null,K=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";if(null!==G){var q=this&&this.__extends||function(a,G){for(var E in G)G.hasOwnProperty(E)&&(a[E]=G[E]);function K(){this.constructor=a}K.prototype=G.prototype,a.prototype=new K},o=function(){function a(){}return a.isWhiteSpace=function(a){return/\s/g.test(a)},a.isLetter=function(a){return a.match(/[a-z]/i)},a.isNumber=function(a){return!isNaN(parseFloat(a))&&!isNaN(a-0)},a.capitalizeFirst=function(a){return"string"!=typeof a?"":a.charAt(0).toUpperCase()+a.slice(1)},a.isLookLikeLogicalOperator=function(a){return[">","<","=","!"].includes(a)},a}(),i=function(){function a(){this.reset()}return a.prototype.reset=function(){this._prop="",this._alias=null},a.prototype.hasProp=function(){return this._prop.length>0},a.prototype.build=function(){if(!this.hasProp())return[];var a={prop:this._prop,alias:this._alias};return this.reset(),a},a.prototype.addCharToAlias=function(a){this._alias=this._alias?this._alias+a:a},a.prototype.addCharToProp=function(a){this._prop=this._prop?this._prop+a:a},a}(),D={OPERATOR:"OPERATOR",OPERAND_CONST_STRING_VALUE:"OPERAND_CONST_STRING_VALUE",OPERAND_CONST_NUMBER_VALUE:"OPERAND_CONST_NUMBER_VALUE",OPERAND_PROPERTY:"OPERAND_PROPERTY"},j=function(){function a(){this.reset()}return a.prototype.reset=function(){this._value=null,this._type=null},a.prototype.build=function(){if(!this._type)return[];var a=this._type===D.OPERAND_CONST_NUMBER_VALUE?parseFloat(this._value):this._value,G={type:{OPERATOR:"OPERATOR",OPERAND_CONST_STRING_VALUE:"CONST_VALUE",OPERAND_CONST_NUMBER_VALUE:"CONST_VALUE",OPERAND_PROPERTY:"PROPERTY"}[this._type],value:a};return this.reset(),G},a.prototype.markAsOperator=function(){return this._type=D.OPERATOR,this},a.prototype.markAsConstStringValueOperand=function(){return this._type=D.OPERAND_CONST_STRING_VALUE,this},a.prototype.markAsConstNumberValueOperand=function(){return this._type=D.OPERAND_CONST_NUMBER_VALUE,this},a.prototype.markAsPropertyOperand=function(){return this._type=D.OPERAND_PROPERTY,this},a.prototype.addCharToValue=function(a){return this._value=this._value?this._value+a:a,this},a.prototype.withValue=function(a){return this._value=a,this},a}(),A=new(function(){function a(){this._selectBuilder=new i,this._filterBuilder=new j,this.reset()}return a.prototype.reset=function(){return this.filterBuilder().reset(),this.selectBuilder().reset(),this._element="",this._select=[],this._filter=[],this._limit=null,this},a.prototype.filterBuilder=function(){return this._filterBuilder},a.prototype.selectBuilder=function(){return this._selectBuilder},a.prototype.build=function(){var a={element:this._element,select:this._select,filter:this._filter,limit:this._limit};return this.reset(),a},a.prototype.addCharToElementName=function(a){return this._element+=a,this},a.prototype.hasElementName=function(){return this._element.length>0},a.prototype.addConditionToFilter=function(a){return this._filter.push(a),this},a.prototype.addPropertyToSelect=function(a){return this._select.push(a),this},a.prototype.hasPropertiesInSelect=function(){return this._select.length>0},a}()),F=function(){function a(){}return a.query=function(a,G){let E=new $(a).parse(0),K=[{data:G,parents:[]}],q=0,o=[];for(let a=0;a<E.length;a++){let G=E[a],i=[];for(let a=0;a<K.length;a++){let E=K[a];if(!E.data.hasOwnProperty(G.element))continue;let D={data:E.data[G.element],parents:E.parents.slice()};if("*"===G.limit){let a=D.data;D.data.length||(a=Object.keys(D.data));for(let K of a){const a="string"==typeof K?K:D.data.indexOf(K);let j=D.data[a],A={data:j,parents:E.parents.slice()};if(G.select.length>0){let a={element:G.element,data:{}};G.select.forEach((function(G){if(G.prop.includes(".")){let E,K=G.prop.split(".");const q=K.length-1;K.forEach(((K,o)=>{if(E||(E=j[K]),E&&E.hasOwnProperty(K)&&o!==q&&E[K]&&(E=E[K]),E&&E.hasOwnProperty(K)&&o===q&&E[K]){let q=G.alias?G.alias:K;a.data[q]=E[K]}}))}if(j.hasOwnProperty(G.prop)&&!a.data[column]){let E=G.alias?G.alias:G.prop;a.data[E]=j[G.prop]}})),o.push(a),A.parents.push(q),q+=1}i.push(A)}}else i.push(D)}if(K=i,G.filter.length>0){let a=G.filter[0],E=G.filter[1],q=G.filter[2],o=function(a,G){return"CONST_VALUE"===G.type?G.value:a.data[G.value]};K=K.filter((function(G){let K=o(G,a),i=o(G,q);return"=="===E.value?K==i:"==="===E.value?K===i:"!="===E.value?K!=i:"!=="===E.value?K!==i:">="===E.value?K>=i:"<="===E.value?K<=i:">"===E.value?K>i:"<"===E.value?K<i:void 0}))}}let i=E[E.length-1],D=[];return K.forEach((function(a){a.parents.length&&a.parents.forEach((function(G){var E=o[G];D.hasOwnProperty(G)||(D[G]={},D[G][E.element]=E.data),D[G][i.element]=D[G][i.element]?D[G][i.element].concat(a.data):[a.data]}))})),D.filter((function(a){return a}))},a}(),d={FILTER:"filter",SELECT:"select"},c=function(){function a(a){if("string"!=typeof a)throw new TypeError('Param "query" must be string type');if(0===a.trim().length)throw new TypeError('Param "query" must be not empty type');this._query=a,this._process=null,this._pos=null}return a.prototype.switchProcess=function(a){this._process=a},a.prototype.isRunningProcess=function(a){return this._process===a},a.prototype.parse=function(){throw new Error("A child must implement this method")},a.prototype.name=function(){throw new Error("A child must implement this method")},a.prototype.throwSyntaxError=function(a){throw new SyntaxError("JsonQuery: "+a)},a.prototype.throwSyntaxErrorWithTrace=function(a){var G=this._query.substr(0,this._pos+1);this.throwSyntaxError(a+' "'+G+'"')},a.prototype.throwSyntaxErrorUnexpectedChar=function(){var a=this._query[this._pos];this.throwSyntaxErrorWithTrace('Unexpected symbol "'+a+'" in')},a}(),Q={LOOKING_FOR_PROPERTY:"LOOKING_FOR_PROPERTY",LOOKING_FOR_SEPARATOR_OR_ALIAS:"LOOKING_FOR_SEPARATOR_OR_ALIAS",LOOKING_FOR_ALIAS_NAME:"LOOKING_FOR_ALIAS_NAME",SELECT_OPERATION_SUCCESS:"SELECT_OPERATION_SUCCESS",SELECT_OPERATION_BEFORE_FINISH:"SELECT_OPERATION_BEFORE_FINISH",SELECT_RECORDING_PROPERTY_NAME:"SELECT_RECORDING_PROPERTY_NAME",SELECT_PARSING_ALIAS_KEYWORD:"SELECT_PARSING_ALIAS_KEYWORD",SELECT_RECORDING_ALIAS_NAME:"SELECT_RECORDING_ALIAS_NAME"},J=function(a){function G(){a.apply(this,arguments)}return q(G,a),G.prototype.parse=function(a){var G=A.selectBuilder();for(this._runLookingForPropertyProcess(),this._pos=a;this._pos<this._query.length;this._pos++){var E=this._query[this._pos];if(this._isLookingForProperty()){if(" "===E)continue;")"===E?(this._pos=this._pos-1,this._finishParsing()):(this._pos=this._pos-1,this._runRecordingPropertyNameProcess())}else if(this._isRecordingPropertyName())if(" "===E)this._runLookingForSeparatorOrAlias();else if(","===E){var K=G.build();A.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else")"===E?(this._pos=this._pos-1,this._finishParsing()):G.addCharToProp(E);else if(this._isLookingForSeparatorOrAlias()){if(" "===E)continue;if(")"===E)this._pos=this._pos-1,this._finishParsing();else if(","===E){K=G.build();A.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else"a"===E?(this._pos=this._pos-1,this._runParsingAlias()):this.throwSyntaxErrorUnexpectedChar()}else if(this._isParsingAliasKeyword()){if(this._query.substr(this._pos).toLowerCase().startsWith("as ")){this._pos=this._pos+3-1,this._runLookingForAliasName();continue}this.throwSyntaxErrorUnexpectedChar()}else if(this._isLookingForAliasName()){if(" "===E)continue;this._pos=this._pos-1,this._runRecordingAliasName()}else if(this._isRecordingAliasName())if(" "===E){K=G.build();A.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else if(","===E){K=G.build();A.addPropertyToSelect(K),this._runLookingForPropertyProcess()}else")"===E?(this._pos=this._pos-1,this._finishParsing()):G.addCharToAlias(E);else if(this._isFinishOperation()){if(G.hasProp()){K=G.build();A.addPropertyToSelect(K)}this._markAsSuccessParsing();break}}return this._isSuccessParsed()?A.hasPropertiesInSelect()||this.throwSyntaxErrorWithTrace("select operation requires at least one property"):this.throwSyntaxErrorWithTrace("unexpected end of select operation"),this._pos},G.prototype.name=function(){return d.SELECT},G.prototype._runLookingForPropertyProcess=function(){this.switchProcess(Q.LOOKING_FOR_PROPERTY)},G.prototype._runRecordingPropertyNameProcess=function(){this.switchProcess(Q.SELECT_RECORDING_PROPERTY_NAME)},G.prototype._runLookingForSeparatorOrAlias=function(){this.switchProcess(Q.LOOKING_FOR_SEPARATOR_OR_ALIAS)},G.prototype._runParsingAlias=function(){this.switchProcess(Q.SELECT_PARSING_ALIAS_KEYWORD)},G.prototype._runLookingForAliasName=function(){this.switchProcess(Q.LOOKING_FOR_ALIAS_NAME)},G.prototype._runRecordingAliasName=function(){this.switchProcess(Q.SELECT_RECORDING_ALIAS_NAME)},G.prototype._finishParsing=function(){this.switchProcess(Q.SELECT_OPERATION_BEFORE_FINISH)},G.prototype._markAsSuccessParsing=function(){this.switchProcess(Q.SELECT_OPERATION_SUCCESS)},G.prototype._isLookingForProperty=function(){return this.isRunningProcess(Q.LOOKING_FOR_PROPERTY)},G.prototype._isLookingForAliasName=function(){return this.isRunningProcess(Q.LOOKING_FOR_ALIAS_NAME)},G.prototype._isRecordingPropertyName=function(){return this.isRunningProcess(Q.SELECT_RECORDING_PROPERTY_NAME)},G.prototype._isSuccessParsed=function(){return this.isRunningProcess(Q.SELECT_OPERATION_SUCCESS)},G.prototype._isLookingForSeparatorOrAlias=function(){return this.isRunningProcess(Q.LOOKING_FOR_SEPARATOR_OR_ALIAS)},G.prototype._isParsingAliasKeyword=function(){return this.isRunningProcess(Q.SELECT_PARSING_ALIAS_KEYWORD)},G.prototype._isRecordingAliasName=function(){return this.isRunningProcess(Q.SELECT_RECORDING_ALIAS_NAME)},G.prototype._isFinishOperation=function(){return this.isRunningProcess(Q.SELECT_OPERATION_BEFORE_FINISH)},G}(c),N={FILTER_LOOKING_FOR_OPERAND:"FILTER_LOOKING_FOR_OPERAND",FILTER_LOOKING_FOR_OPERATOR:"FILTER_LOOKING_FOR_OPERATOR",FILTER_RECORDING_PROPERTY_NAME:"FILTER_RECORDING_PROPERTY_NAME",FILTER_RECORDING_STRING_VALUE:"FILTER_RECORDING_STRING_VALUE",FILTER_RECORDING_NUMBER_VALUE:"FILTER_RECORDING_NUMBER_VALUE",FILTER_PARSING_OPERATOR:"FILTER_PARSING_OPERATOR",FILTER_FINISH_PROCESS:"FILTER_FINISH_PROCESS",FILTER_SUCCESS:"FILTER_SUCCESS"},u=function(a){function G(){a.apply(this,arguments)}return q(G,a),G.prototype.parse=function(a){var G=A.filterBuilder();for(this.switchProcess(N.FILTER_LOOKING_FOR_OPERAND),this._pos=a;this._pos<this._query.length;this._pos++){var E=this._query[this._pos];if(this.isRunningProcess(N.FILTER_LOOKING_FOR_OPERAND)){if(" "===E)continue;"@"===E?(G.markAsPropertyOperand(),this.switchProcess(N.FILTER_RECORDING_PROPERTY_NAME)):"'"===E?(G.markAsConstStringValueOperand(),this.switchProcess(N.FILTER_RECORDING_STRING_VALUE)):o.isNumber(E)?(this._pos=this._pos-1,G.markAsConstNumberValueOperand(),this.switchProcess(N.FILTER_RECORDING_NUMBER_VALUE)):")"===E?(this._pos=this._pos-1,this.switchProcess(N.FILTER_FINISH_PROCESS)):this.throwSyntaxErrorUnexpectedChar()}else if(this.isRunningProcess(N.FILTER_RECORDING_PROPERTY_NAME))if(" "===E){var K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_LOOKING_FOR_OPERATOR)}else if(")"===E){this._pos=this._pos-1;K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_FINISH_PROCESS)}else if(o.isLookLikeLogicalOperator(E)){this._pos=this._pos-1;K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_LOOKING_FOR_OPERATOR)}else G.addCharToValue(E);else if(this.isRunningProcess(N.FILTER_LOOKING_FOR_OPERATOR)){if(" "===E)continue;")"===E?(this._pos=this._pos-1,this.switchProcess(N.FILTER_FINISH_PROCESS)):o.isLookLikeLogicalOperator(E)&&(this._pos=this._pos-1,this.switchProcess(N.FILTER_PARSING_OPERATOR))}else if(this.isRunningProcess(N.FILTER_RECORDING_STRING_VALUE))if("'"===E){K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_LOOKING_FOR_OPERATOR)}else G.addCharToValue(E);else if(this.isRunningProcess(N.FILTER_RECORDING_NUMBER_VALUE))if(" "===E){K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_LOOKING_FOR_OPERATOR)}else if(o.isLookLikeLogicalOperator(E))this._pos=this._pos-1,this.switchProcess(N.FILTER_PARSING_OPERATOR);else if(")"===E){this._pos=this._pos-1;K=G.build();A.addConditionToFilter(K),this.switchProcess(N.FILTER_FINISH_PROCESS)}else o.isNumber(E)||"."===E?G.addCharToValue(E):this.throwSyntaxErrorUnexpectedChar();else if(this.isRunningProcess(N.FILTER_PARSING_OPERATOR)){var q=this.parseLogicalOperation(this._query.substr(this._pos));G.markAsOperator().withValue(q);K=G.build();A.addConditionToFilter(K),this._pos=this._pos+q.length-1,this.switchProcess(N.FILTER_LOOKING_FOR_OPERAND)}else if(this.isRunningProcess(N.FILTER_FINISH_PROCESS)){this.switchProcess(N.FILTER_SUCCESS);break}}return this.isRunningProcess(N.FILTER_SUCCESS)||this.throwSyntaxErrorWithTrace("unexpected end of filter operation"),this._pos},G.prototype.name=function(){return d.FILTER},G.prototype.parseLogicalOperation=function(a){for(var G=a.substr(0,3),E=[["!==","==="],["!=","==","<=",">="],["<",">"]],K=0;K<E.length;K++){var q=E[K].find((function(a){return G.startsWith(a)}));if(q)return q}throw new Error("JsonQuery: could not find operator")},G}(c),s={LOOKING_FOR_ELEMENT_NAME:"LOOKING_FOR_ELEMENT_NAME",RECORDING_ELEMENT_NAME:"RECORDING_ELEMENT_NAME",BLOCK_PARSING:"BLOCK_PARSING",LIMIT_PARSING:"LIMIT_PARSING",LOOKING_FOR_OPERATION:"LOOKING_FOR_OPERATION",RECORDING_OPERATION_NAME:"RECORDING_OPERATION_NAME"},$=function(a){function G(G){a.call(this,G),this._operations=[new u(G),new J(G)]}return q(G,a),G.prototype.parse=function(a){A.reset();var G="",E=[];for(this._runLookingForElementNameProcess(),this._pos=a;this._pos<this._query.length;this._pos++){var K=this._query[this._pos];if(this._isLookingForElementNameProcess()){if(" "===K)continue;"."===K||(this._pos=this._pos-1),this._runRecordingElementNameProcess()}else if(this.isRunningProcess(s.RECORDING_ELEMENT_NAME))if(this._isElementSeparator(K)){var q=A.build();E.push(q)}else this._needStartParseBlock(K)?this._runParsingBlockProcess():this._isNotAllowedCharForElementName(K)?this.throwSyntaxErrorWithTrace('symbol "'+K+'" is not allowed as part of element name'):A.addCharToElementName(K);else if(this._isRunningBlockParsingProcess()){if(" "===K)continue;this._isLooksLikeLimitOperation(K)?(A._limit="*",this._runLookingForOperation()):"#"===K?this._runRecordingOperationName():this.throwSyntaxErrorUnexpectedChar()}else if(this._isRunningLookingForOperation()){if(" "===K)continue;if("#"===K)this._runRecordingOperationName();else if("]"===K){q=A.build();E.push(q),this._runLookingForElementNameProcess()}else this.throwSyntaxErrorUnexpectedChar()}else if(this._isRunningRecordingOperationName())if("("===K){var o=this._findParserForOperatorOrThrowException(G);G="",this._pos=this._pos+1,this._pos=o.parse(this._pos),this._runLookingForOperation()}else this._isNotAllowedCharForOperationName(K)?this.throwSyntaxErrorUnexpectedChar():G+=K}if(A.hasElementName()){q=A.build();E.push(q)}return E},G.prototype._runLookingForElementNameProcess=function(){this.switchProcess(s.LOOKING_FOR_ELEMENT_NAME)},G.prototype._runRecordingElementNameProcess=function(){this.switchProcess(s.RECORDING_ELEMENT_NAME)},G.prototype._runParsingBlockProcess=function(){this.switchProcess(s.BLOCK_PARSING)},G.prototype._runLookingForOperation=function(){this.switchProcess(s.LOOKING_FOR_OPERATION)},G.prototype._runRecordingOperationName=function(){this.switchProcess(s.RECORDING_OPERATION_NAME)},G.prototype._isLookingForElementNameProcess=function(){return this.isRunningProcess(s.LOOKING_FOR_ELEMENT_NAME)},G.prototype._isRunningBlockParsingProcess=function(){return this.isRunningProcess(s.BLOCK_PARSING)},G.prototype._isRunningLookingForOperation=function(){return this.isRunningProcess(s.LOOKING_FOR_OPERATION)},G.prototype._isRunningRecordingOperationName=function(){return this.isRunningProcess(s.RECORDING_OPERATION_NAME)},G.prototype._isElementSeparator=function(a){return"."===a},G.prototype._isNotAllowedCharForElementName=function(a){return o.isWhiteSpace(a)||["#","@","!","[","]","%","-","+","^","*","(",")","?",":","{","}"].includes(a)},G.prototype._isNotAllowedCharForOperationName=function(a){return o.isWhiteSpace(a)||["#","@","!","[","]","%","-","+","^","*","(",")","?",":","{","}"].includes(a)},G.prototype._isLooksLikeLimitOperation=function(a){return"*"===a},G.prototype._needStartParseBlock=function(a){return"["===a},G.prototype._findParserForOperatorOrThrowException=function(a){let G=this._operations.find((function(G){return G.name()===a}));return G||this.throwSyntaxErrorWithTrace('unknown operation "'+a+'"'),G},G}(c);const x={parseJSON:function(a){try{if(a&&"string"==typeof a)return JSON.parse(a)}catch(a){}},jsonQuery:function(a,G){let E=[],K=G.queries.map((function(K,q){let o=Object.assign({},a);return E.push(o),F.query(K,E[q]).map((a=>{if(G.props)for(let E of G.props){let G=E[0],K=E[1];a[G]&&(a[G]=a[G][0].map((a=>{let G={};return a.key&&K.includes(a.key)?a.value:a.key?void 0:(K.forEach((E=>{a[E]&&!G[E]&&(a[E].length&&"string"!=typeof a[E]?G[E]=a[E][0]:G[E]=a[E])})),Object.keys(G).length?G:void 0)})).filter((a=>a)))}else!a.hasOwnProperty(G.prop)&&a.media&&(a[G.prop]=[JSON.stringify(a.media[0])],delete a.media);return a}))})),q=[];return K.forEach((function(a){q=q.concat(a)})),q},forEach:function(a,G){let E=[];return a.forEach((function(a){const K=G.prop?a[G.prop]:a,q=x[G.pipe](K);E.push(q)})),E},filterContains:function(a,G){return a.filter((a=>{let E=!1;return G.props&&G.props.length&&(E=G.props.some((G=>a.hasOwnProperty(G)))),!(!a.hasOwnProperty(G.prop)&&!E)&&G.types.some((K=>{let q=!1;if(a[G.prop]&&(q=a[G.prop].includes(`"${K}"`)),E)for(let E of G.props){if("string"==typeof a[E]&&a[E].includes(`"${K}"`)){q=!0;break}if(a.hasOwnProperty("type")&&a.type===K){q=!0;break}}return q}))}))},arrToVal:function(a,G){return a.map((a=>{let E={};return G.prop&&a[G.prop]&&!G.props&&(a[G.prop]=a[G.prop][0],E=a),G.props&&G.props.forEach((G=>{const K=G[0];G[1].forEach((G=>{a[K]&&(a[K].length&&(a[K]=a[K][0]),a[K][G]&&(E[G]=a[K][G]))}))})),E}))},sendVideoData:function(a){!function(a){a.detectionTime=Date.now()/1e3|0;let G={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TWITTER_VIDEO_DATA",from:E,to:E.substring(0,E.length-2),content:a,dynamicAppId:K};try{window.postMessage(G)}catch(a){}}(a)},sendCarouselData:function(a){!function(a){a.detectionTime=Date.now()/1e3|0;let G={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TWITTER_CAROUSEL_DATA",from:E,to:E.substring(0,E.length-2),content:a,dynamicAppId:K};try{window.postMessage(G)}catch(a){}}(a)},mapParseJsonToObj:function(a,G){return a.map((a=>(a[G.prop]&&"string"==typeof a[G.prop]&&(a[G.prop]=JSON.parse(a[G.prop])),a[G.prop]&&1===a[G.prop].length&&(a[G.prop]=a[G.prop][0]),a)))},mapVideoData:function(a,G){return a.map((a=>{const E=a.tweets?a.tweets:{};G&&G.props&&G.props.forEach((G=>{if("string"==typeof G)a[G]&&(E[G]=a[G]);else if("object"==typeof G&&G.length){let K=a;G.forEach(((a,G,q)=>{K[a]&&G!==q.length-1?K=K[a]:G===q.length-1&&(E[a]=K[a])}))}}));let K={tweets:E};if(a.string_value){if(a.string_value.media_entities){const G=Object.keys(a.string_value.media_entities);return K.variants=a.string_value.media_entities[G[0]].video_info?.variants,K}if(a.string_value.video_info&&a.string_value.video_info?.variants)return K.variants=a.string_value.video_info?.variants,K}else if(a.video_info&&a.video_info.variants)return K.variants=a.video_info.variants,K})).filter((a=>void 0!==a))},mapCarouselData:function(a,G){return a.map((a=>{const E=a.tweets?a.tweets:{};G&&G.props&&G.props.forEach((G=>{if("string"==typeof G)a[G]&&(E[G]=a[G]);else if("object"==typeof G&&G.length)for(let K of G){let G=a;for(let a=0;a<K.length;a++){let q=K[a];if("*"===q){let q=Object.keys(G),o=K.slice(a+1,K.length),i=[];for(let a of q){let E=G[a];if(!E)break;for(let a=0;a<o.length;a++){let G=o[a];E[G]&&a!==o.length-1?E=E[G]:a===o.length-1&&i.push(E[G])}}E.slides=i;break}G[q]&&a!==K.length-1?G=G[q]:a===K.length-1&&(E[q]=G[q])}}}));let K={tweets:E};if(a.string_value&&a.string_value.type&&G.types&&G.types.includes(a.string_value.type))return K})).filter((a=>void 0!==a))}};const p="WATCH_EVENT";const X=new(function(){function a(){this.listeners={}}return a.prototype.on=function(a,G){this.listeners[a]=G},a.prototype.emit=function(a,G){let E=this;setTimeout((function(){return E.listeners[a](G)}),0)},a}());function R(a){return(G.parsers||[]).filter((G=>new RegExp(G.watch).test(a)))}X.on(p,(function(a){R(a.url).forEach((G=>setTimeout((()=>function(a,G){for(const E of a.pipes){const a=x[E.name];a&&(G=a(G,E.arguments))}}(G,a.content)),0)))}));let w=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],w.apply(this,arguments)};let l=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let a=this.onreadystatechange;var E=this;let K=!1;for(let a of G.parsers){if(K=new RegExp(a.watch,"i").test(E.url),K)break}return K?(this.onreadystatechange=function(){if(4===this.readyState&&R(this.url).length>0){const a={url:this.url,content:""===E.responseType||"text"===E.responseType?E.responseText:""};X.emit(p,a)}if(a)return a.apply(this,arguments)},l.apply(this,arguments)):l.apply(this,arguments)}}}a(),window.addEventListener("message",(G=>{"CONFIG_UPDATED_IN_STORAGE"!==G.data?.type||a()}))})();