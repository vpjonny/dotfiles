(()=>{const a=null!==(G=sessionStorage.getItem("bis_data"))?JSON.parse(G):null;var G;const E=document.querySelector("script[bis_id]");window.bisData={id:E?E.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:a?a.config.html5TargetUrlDetectionConfig:null};const K=window.bisData.html5TargetUrlDetectionConfig,q=window.bisData.id,o=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function i(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function D(a,G,E,K){if(!window.bisData)return;let q=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var D=document.querySelectorAll(q);if(D.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var j=function(q){if(window.bisData.clickTargetUrl.some((a=>a.href===q)))return null;if(window.bisData.clickTargetUrl.push({href:q,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let q="GET_WINDOW_TARGET_URL"===K.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:K.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},D={posdMessageId:"PANELOS_MESSAGE",posdHash:i(),type:`${K.type}_RESPOND`,from:a,to:a.substring(0,a.length-2),content:q,dynamicAppId:o};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(D)),G.postMessage&&G.postMessage(D,E)}return null};window.open=j;for(var A=0;A<D.length&&0===window.bisData.clickTargetUrl.length;A++)try{if(D[A]&&D[A].click&&D[A].getBoundingClientRect){let a=D[A].getBoundingClientRect();a.width>40&&a.height>40&&(window.bisData.elementSquare=a.width*a.height,window.open==j&&D[A].click())}}catch(a){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(a){try{var G=q,E=a.data;let A=a.source,F=a.origin;if(void 0!==(j=E)&&j?.dynamicAppId===o&&void 0!==j.posdMessageId&&void 0!==j.from&&void 0!==j.to&&void 0!==j.type&&void 0!==j.content&&"PANELOS_MESSAGE"===j.posdMessageId&&E.to===G)if("GET_WINDOW_TARGET_URL"===E.type){let q=function(a,G,E){let K=d(G,[q,o,i,D,j,A],E);K&&K.length;return K;function q(a){if(void 0!==a.clickTag&&F(a.clickTag))return{href:a.clickTag,square:1000001}}function o(a){if(void 0!==a.adData){if(void 0!==a.adData.destination_url&&F(a.adData.destination_url))return{href:a.adData.destination_url,square:1000001};if(void 0!==a.adData.redirect_url&&F(a.adData.redirect_url))return{href:a.adData.redirect_url,square:1000001}}}function i(a){if(void 0!==a.BF&&void 0!==a.BF.Parameters&&void 0!==a.BF.Parameters.targeturl&&F(a.BF.Parameters.targeturl))return{href:a.BF.Parameters.targeturl,square:1000001}}function D(a){if(void 0!==a.ADAPT&&void 0!==a.ADAPT.symbols&&void 0!==a.ADAPT.symbols.stage&&void 0!==a.ADAPT.symbols.stage.clickUrl&&F(a.ADAPT.symbols.stage.clickUrl))return{href:a.ADAPT.symbols.stage.clickUrl,square:1000001}}function j(a){if(void 0!==a.admixAPI&&void 0!==a.admixAPI.ownerBanner&&void 0!==a.admixAPI.ownerBanner.clickUrl&&F(a.admixAPI.ownerBanner.clickUrl))return{href:a.admixAPI.ownerBanner.clickUrl,square:1000001}}function A(G,E){let K=c(a,G,E);if(F(K))return{href:K,square:999999}}function F(a){return"string"==typeof a&&a.length>0&&(-1!==a.indexOf("http")||-1!==a.indexOf("//"))}function d(a,G,E){let K=[];for(let q of G)try{let G=q(a,E);G&&G.href&&K.push(G)}catch(a){}return K}function c(a,G,E){let K=u(G,E);return K&&0!==K.length?Q(G,K,E):null}function Q(a,G,E,K=[]){let q=E.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(K.length>q)return null;for(let q of G)try{let G=a[q];if(!G)return null;let o=K.concat(q);if("object"==typeof G){let a=Q(G,Object.getOwnPropertyNames(G),E,o);if(a)return a}else if("string"==typeof G&&J(q,E)&&F(G))return G}catch(a){}return null}function J(a,G){let E=N(a),K=G.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let a of K){if(E===a)return!0}return!1}function N(a){return a.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function u(a,G){let E=Object.getOwnPropertyNames(a);const K=G.WINDOW_PROPERTY_NAMES;return E.filter((a=>K.indexOf(a)<0))}}(G,window,K);if(q.length){let E={posdMessageId:"PANELOS_MESSAGE",posdHash:i(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:G,to:G.substring(0,G.length-2),content:{targetUrlList:q},dynamicAppId:o};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(E)),a.source.postMessage&&a.source.postMessage(E,a.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;D(G,A,F,E)}}else if("GET_WINDOW_CLICK_TARGET_URL"===E.type){if(window.bisData.clickTargetUrlProcessed)return;D(G,A,F,E)}}catch(a){}var j}),!1)})();