(()=>{const a=document.head.querySelector("script[bis_use][data-dynamic-id]")?.getAttribute("data-dynamic-id")||"";function G(G,E,K,q,o=null){try{let i=document.location.host,D="detector",j={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:D,to:D.substring(0,D.length-2),content:{requestMethod:G,url:E,type:K,content:q},dynamicAppId:a};i.includes("youtube.com")&&o&&o[0]&&o[0].length&&(j.content.encodedPostBody=o[0]),window.postMessage(j,"*")}catch(a){}}let E=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],E.apply(this,arguments)};let K=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const a=Object.assign(arguments,{});let E=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(a){const G=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!G&&G.some((G=>a.includes(G)))}(this.responseURL)||G(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,a),E)return E.apply(this,arguments)},K.apply(this,arguments)};let q=fetch;fetch=function(){const a=arguments;let E=arguments[0]instanceof Request?arguments[0].url:arguments[0];const K=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof E&&E.href&&(E=E.href),new Promise(((o,i)=>{q.apply(this,a).then((function(a){if(a.body instanceof ReadableStream){const q=a.json;a.json=function(){return new Promise(((o,i)=>{q.apply(this,arguments).then((function(q){0!==a.url.search(/data:application\/json;base64/)&&G(K,E,a.headers.get("content-type"),JSON.stringify(q)),o(q)})).catch((function(a){i(a)}))}))};const o=a.text;a.text=function(){return new Promise(((q,i)=>{o.apply(this,arguments).then((function(o){0!==a.url.search(/data:application\/json;base64/)&&G(K,E,a.headers.get("content-type"),o),q(o)})).catch((function(a){i(a)}))}))}}o.apply(this,arguments)})).catch((function(a){i.apply(this,arguments)}))}))}})();