import{D as b,C as O,a as z}from"./useSwapStore.CnKXQn04.js";import{at as N,au as M,m as U,p as P,av as F,W as _,w as E,B as x,aw as $}from"./windowUtils.Ut7JS-rc.js";const T=s=>typeof s=="object"&&s!==null,A=s=>T(s)&&!(s instanceof RegExp)&&!(s instanceof Error)&&!(s instanceof Date),V=Symbol("mapObjectSkip"),g=(s,e,t,r=new WeakMap)=>{if(t={deep:!1,target:{},...t},r.has(s))return r.get(s);r.set(s,t.target);const{target:a}=t;delete t.target;const i=l=>l.map(o=>A(o)?g(o,e,t,r):o);if(Array.isArray(s))return i(s);for(const[l,o]of Object.entries(s)){const c=e(l,o,s);if(c===V)continue;let[h,n,{shouldRecurse:d=!0}={}]=c;h!=="__proto__"&&(t.deep&&d&&A(n)&&(n=Array.isArray(n)?i(n):g(n,e,t,r)),a[h]=n)}return a};function C(s,e,t){if(!T(s))throw new TypeError(`Expected an object, got \`${s}\` (${typeof s})`);return g(s,e,t)}const j=/[\p{Lu}]/u,B=/[\p{Ll}]/u,I=/^[\p{Lu}](?![\p{Lu}])/gu,R=/([\p{Alpha}\p{N}_]|$)/u,p=/[_.\- ]+/,W=new RegExp("^"+p.source),y=new RegExp(p.source+R.source,"gu"),v=new RegExp("\\d+"+R.source,"gu"),K=(s,e,t,r)=>{let a=!1,i=!1,l=!1,o=!1;for(let c=0;c<s.length;c++){const h=s[c];o=c>2?s[c-3]==="-":!0,a&&j.test(h)?(s=s.slice(0,c)+"-"+s.slice(c),a=!1,l=i,i=!0,c++):i&&l&&B.test(h)&&(!o||r)?(s=s.slice(0,c-1)+"-"+s.slice(c-1),l=i,i=!1,a=!0):(a=e(h)===h&&t(h)!==h,l=i,i=t(h)===h&&e(h)!==h)}return s},G=(s,e)=>(I.lastIndex=0,s.replaceAll(I,t=>e(t))),Y=(s,e)=>(y.lastIndex=0,v.lastIndex=0,s.replaceAll(v,(t,r,a)=>["_","-"].includes(s.charAt(a+t.length))?t:e(t)).replaceAll(y,(t,r)=>e(r)));function q(s,e){if(!(typeof s=="string"||Array.isArray(s)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(s)?s=s.map(i=>i.trim()).filter(i=>i.length).join("-"):s=s.trim(),s.length===0)return"";const t=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),r=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return s.length===1?p.test(s)?"":e.pascalCase?r(s):t(s):(s!==t(s)&&(s=K(s,t,r,e.preserveConsecutiveUppercase)),s=s.replace(W,""),s=e.preserveConsecutiveUppercase?G(s,t):t(s),e.pascalCase&&(s=r(s.charAt(0))+s.slice(1)),Y(s,r))}class H extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const a=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:a}):this._set(e,{value:t,expiry:a}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[a,i]=r;this._deleteIfExpired(a,i)===!1&&(yield[a,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[a,i]=r;this.cache.has(a)||this._deleteIfExpired(a,i)===!1&&(yield[a,i.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,a]of this.entriesAscending())e.call(t,a,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const J=(s,e)=>s.some(t=>typeof t=="string"?t===e:(t.lastIndex=0,t.test(e))),u=new H({maxSize:1e5}),w=s=>typeof s=="object"&&s!==null&&!(s instanceof RegExp)&&!(s instanceof Error)&&!(s instanceof Date),S=(s,e={})=>{if(!w(s))return s;const{exclude:t,pascalCase:r=!1,stopPaths:a,deep:i=!1,preserveConsecutiveUppercase:l=!1}=e,o=new Set(a),c=h=>(n,d)=>{if(i&&w(d)){const f=h===void 0?n:`${h}.${n}`;o.has(f)||(d=C(d,c(f)))}if(!(t&&J(t,n))){const f=r?`${n}_`:n;if(u.has(f))n=u.get(f);else{const m=q(n,{pascalCase:r,locale:!1,preserveConsecutiveUppercase:l});n.length<100&&u.set(f,m),n=m}}return[n,d]};return C(s,c(void 0))};function Q(s,e){return Array.isArray(s)?Object.keys(s).map(t=>S(s[t],e)):S(s,e)}const X=async(s,e)=>{const t=await F.get(),r=Object.values(t==null?void 0:t.wallets).flatMap(c=>Object.values(c==null?void 0:c.accounts)).filter(c=>!e||c.type!==_.ADDRESS),a=r.find(c=>c.address===s),i=E.getAccountByAddress(a.address);if((a==null?void 0:a.blockchain)===x.SOLANA||(a==null?void 0:a.type)!==_.SEED_PHRASE)return[i];const l=r.find(c=>(c==null?void 0:c.walletId)===(a==null?void 0:a.walletId)&&(c==null?void 0:c.blockchain)===x.SOLANA&&(c==null?void 0:c.index)===(a==null?void 0:a.index)),o=l?E.getAccountByAddress(l.address):null;return[i,o].filter(Boolean)},L=new b(new O({apiUrl:U.walletManagerUrl,providerManager:M,debug:!1,getAccounts:X,getSignerForAddress:N.getSignerForAddress})),Z=async s=>{var o;const{chainId:e,query:t,page:r=1,pageSize:a=25}=s,i={chainId:e,pageSize:a,query:t,page:r},l=await P.walletManagerV3ProxyPublicApi.get("/swap/tokens",{params:i});return Q((o=l==null?void 0:l.data)==null?void 0:o.data,{deep:!0})},se=Object.assign(L,{getDexTokenList:Z}),re=(s,e)=>D(s)===D(e),ae=(s,e)=>{var a;const t=(a=$(e,s.decimals))==null?void 0:a.toString(),r=k(s);return z.fromRawAmount(r,t)},k=s=>L.createDexCurrency({chainId:s.chainId,address:s.address,decimals:s.decimals,symbol:s.symbol,name:s.name,logoUrl:s.logoUrl}),D=s=>{var e;return s?`${s==null?void 0:s.chainId}@${(e=s==null?void 0:s.address)==null?void 0:e.toLowerCase()}`:""},ie=s=>{const[e,t]=s.split("@");return!e||!t?null:{chainId:Number(e),address:t}};export{se as D,ae as a,ie as b,k as c,D as g,re as i};
