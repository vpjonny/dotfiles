import{j as ce}from"./useTriggerLoadNext.KJIKMCqU.js";import{c7 as we,c8 as Ge,c9 as pn,ca as It,cb as gn,cc as B,cd as mn,ce as z,cf as kt,cg as yn,ch as bn,ci as En,cj as kr,ck as _n,cl as Tn,cm as Be,cn as Xe,co as ye,cp as wn,cq as Sn,cr as In,cs as kn,ct as An,cu as Pn,cv as Rn,cw as Cn,r as On,B as Lt,R as Ln,x as Nn,P as Dn,a as Nt,C as xn,l as Un,Q as Mn,d as Fn}from"./windowUtils.Ut7JS-rc.js";import{k as jn,l as qn,L as ot,m as Vn,n as $n,H as Gn}from"./PopupLoading.D-LitESe.js";import{e as Bn,u as Wn,d as Kn,W as Hn}from"./useActiveTimeStore.C3Wei7Oz.js";import{u as zn,a as Yn}from"./useTempStore.C8dvVNTz.js";import{L as Dt}from"./enum.CGJbW6Yf.js";import{r as xt}from"./index.CxJLds0B.js";import{T as Xn,F as Qn}from"./TransferTitle.DcO0V0Yy.js";import{u as Jn}from"./useTransferAdapter.DBEESo_0.js";import{u as Zn}from"./useEstimateFee.mvOlF2u1.js";import"./useDebouncedValue.BgjK-DBz.js";import{i as ei}from"./solana.CGFphaJI.js";import{u as ti,a as ri}from"./useNormalizeToken.CRab6WQg.js";import{I as ni}from"./PasswordLevelLabel.rhWNhrqO.js";import"./tiny-invariant.BHpmfUqq.js";import"./preload-helper.2LWRYvkK.js";import"./useDebouncedEffect.CslCnlPq.js";import"./token.types.DkObBlUj.js";import"./associatedTokenAccount.Cs_dSOLN.js";import"./useNormalizeToken.C6igk56m.js";import"./useNftCollectionItems.DtJWVrNT.js";import"./useNftCollectionList.0TiOOKoB.js";import"./useSearchErc20Tokens.D0zoSI7L.js";var mt=function(t,e){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},mt(t,e)};function ii(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var O=function(){return O=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},O.apply(this,arguments)};function oi(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function A(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function k(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function fe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function be(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var ke;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(ke||(ke={}));var ve;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(ve||(ve={}));var Ut="-",Qe="AMP",ai="".concat(Qe,"_unsent"),Ar="$default_instance",Pr="https://api2.amplitude.com/2/httpapi",si="https://api.eu.amplitude.com/2/httpapi",ui="https://api2.amplitude.com/batch",ci="https://api.eu.amplitude.com/batch",li="utm_campaign",di="utm_content",fi="utm_id",vi="utm_medium",hi="utm_source",pi="utm_term",Mt="dclid",Ft="fbclid",jt="gbraid",qt="gclid",Vt="ko_click_id",$t="li_fat_id",Gt="msclkid",Bt="rtd_cid",Wt="ttclid",Kt="twclid",Ht="wbraid",At={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},gi=1e3,yt=function(t){if(Object.keys(t).length>gi)return!1;for(var e in t){var r=t[e];if(!Rr(e,r))return!1}return!0},Rr=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var o=!0;try{for(var i=fe(e),s=i.next();!s.done;s=i.next()){var u=s.value;if(Array.isArray(u))return!1;if(typeof u=="object")o=o&&yt(u);else if(!["number","string"].includes(typeof u))return!1;if(!o)return!1}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return yt(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},We=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return O({},this._properties)},t.prototype.set=function(e,r){return this._safeSet(R.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet(R.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet(R.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet(R.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet(R.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet(R.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet(R.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet(R.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet(R.UNSET,e,Ut),this},t.prototype.clearAll=function(){return this._properties={},this._properties[R.CLEAR_ALL]=Ut,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var o=this._properties[e];return o===void 0&&(o={},this._properties[e]=o),o[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[R.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===R.ADD?typeof n=="number":e!==R.UNSET&&e!==R.REMOVE?Rr(r,n):!0},t}(),R;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(R||(R={}));var mi=[R.CLEAR_ALL,R.UNSET,R.SET,R.SET_ONCE,R.ADD,R.APPEND,R.PREPEND,R.PREINSERT,R.POSTINSERT,R.REMOVE],yi="Event tracked successfully",bi="Unexpected error occurred",Ei="Event rejected due to exceeded retry count",_i="Event skipped due to optOut config",Ti="Event rejected due to missing API key",wi="Invalid API key",Si="Client not initialized",Pe=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=we.Unknown),{event:t,code:e,message:r}},q=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof Ge<"u")return Ge},Ii=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,he)},zt=be([],G(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),he=function(t){var e,r=q();if(!(!((e=r==null?void 0:r.crypto)===null||e===void 0)&&e.getRandomValues))return Ii(t);var n=r.crypto.getRandomValues(new Uint8Array(16));return n[6]=n[6]&15|64,n[8]=n[8]&63|128,be([],G(n.entries()),!1).map(function(o){var i=G(o,2),s=i[0],u=i[1];return[4,6,8,10].includes(s)?"-".concat(zt[u]):zt[u]}).join("")},ki=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,o;return A(this,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return this.plugins.some(function(s){return s.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=he(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(n=e.type)!==null&&n!==void 0?n:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,r,this.client)]);case 1:return i.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,r){var n;return A(this,void 0,void 0,function(){var o,i;return k(this,function(s){switch(s.label){case 0:return o=this.plugins.findIndex(function(u){return u.name===e}),o===-1?(r.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(i=this.plugins[o],this.plugins.splice(o,1),[4,(n=i.teardown)===null||n===void 0?void 0:n.call(i)]);case 1:return s.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var o;return(o=n.teardown)===null||o===void 0?void 0:o.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return A(this,void 0,void 0,function(){var r,n,o,i,s,u,l,h,v,a,c,d,f,h,v,y,b,p,g,m,T,w;return k(this,function(P){switch(P.label){case 0:if(!e)return[2];r=G(e,1),n=r[0],o=G(e,2),i=o[1],this.loggerProvider.log("Timeline.apply: Initial event",n),s=this.plugins.filter(function(E){return E.type==="before"}),P.label=1;case 1:P.trys.push([1,6,7,8]),u=fe(s),l=u.next(),P.label=2;case 2:return l.done?[3,5]:(h=l.value,h.execute?[4,h.execute(O({},n))]:[3,4]);case 3:if(v=P.sent(),v===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(h.name),"', event: ").concat(JSON.stringify(n))),i({event:n,code:0,message:""}),[2];n=v,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(h.name),"', event: ").concat(JSON.stringify(n))),P.label=4;case 4:return l=u.next(),[3,2];case 5:return[3,8];case 6:return a=P.sent(),g={error:a},[3,8];case 7:try{l&&!l.done&&(m=u.return)&&m.call(u)}finally{if(g)throw g.error}return[7];case 8:c=this.plugins.filter(function(E){return E.type==="enrichment"||E.type===void 0}),P.label=9;case 9:P.trys.push([9,14,15,16]),d=fe(c),f=d.next(),P.label=10;case 10:return f.done?[3,13]:(h=f.value,h.execute?[4,h.execute(O({},n))]:[3,12]);case 11:if(v=P.sent(),v===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(h.name),"', event: ").concat(JSON.stringify(n))),i({event:n,code:0,message:""}),[2];n=v,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(h.name),"', event: ").concat(JSON.stringify(n))),P.label=12;case 12:return f=d.next(),[3,10];case 13:return[3,16];case 14:return y=P.sent(),T={error:y},[3,16];case 15:try{f&&!f.done&&(w=d.return)&&w.call(d)}finally{if(T)throw T.error}return[7];case 16:return b=this.plugins.filter(function(E){return E.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(n))),p=b.map(function(E){var S=O({},n);return E.execute(S).catch(function(I){return Pe(S,0,String(I))})}),Promise.all(p).then(function(E){var S=G(E,1),I=S[0],U=I||Pe(n,100,"Event not tracked, no destination plugins on the instance");i(U)}),[2]}})})},t.prototype.flush=function(){return A(this,void 0,void 0,function(){var e,r,n,o=this;return k(this,function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(s){return o.apply(s)}))];case 1:return i.sent(),r=this.plugins.filter(function(s){return s.type==="destination"}),n=r.map(function(s){return s.flush&&s.flush()}),[4,Promise.all(n)];case 2:return i.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onIdentityChanged)===null||n===void 0||n.call(r,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onSessionIdChanged)===null||n===void 0||n.call(r,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onOptOutChanged)===null||n===void 0||n.call(r,e)})},t}(),Ai=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return O(O(O({},n),r),e&&{event_properties:e})},Cr=function(t,e){var r=O(O({},e),{event_type:ve.IDENTIFY,user_properties:t.getUserProperties()});return r},Pi=function(t,e,r,n){var o,i=O(O({},n),{event_type:ve.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(o={},o[t]=e,o)});return i},Ri=function(t,e,r){var n,o=new We;o.set(t,e);var i=O(O({},r),{event_type:ve.IDENTIFY,user_properties:o.getUserProperties(),groups:(n={},n[t]=e,n)});return i},Ci=function(t,e){return O(O({},e),{event_type:ve.REVENUE,event_properties:t.getEventProperties()})},W=function(t){return{promise:t||Promise.resolve()}},Oi=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new ki(this),this.name=e}return t.prototype._init=function(e){return A(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return r.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return A(this,void 0,void 0,function(){var r,n,o,i,s,u,l,a;return k(this,function(c){switch(c.label){case 0:r=this[e],this[e]=[],c.label=1;case 1:c.trys.push([1,8,9,10]),n=fe(r),o=n.next(),c.label=2;case 2:return o.done?[3,7]:(i=o.value,s=i(),s&&"promise"in s?[4,s.promise]:[3,4]);case 3:return c.sent(),[3,6];case 4:return[4,s];case 5:c.sent(),c.label=6;case 6:return o=n.next(),[3,2];case 7:return[3,10];case 8:return u=c.sent(),l={error:u},[3,10];case 9:try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(l)throw l.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:c.sent(),c.label=12;case 12:return[2]}})})},t.prototype.track=function(e,r,n){var o=Ai(e,r,n);return W(this.dispatch(o))},t.prototype.identify=function(e,r){var n=Cr(e,r);return W(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,o){var i=Pi(e,r,n,o);return W(this.dispatch(i))},t.prototype.setGroup=function(e,r,n){var o=Ri(e,r,n);return W(this.dispatch(o))},t.prototype.revenue=function(e,r){var n=Ci(e,r);return W(this.dispatch(n))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),W())},t.prototype._addPlugin=function(e){return W(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),W())},t.prototype._removePlugin=function(e){return W(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,r){if(!this.isReady)return r(Pe(e,0,Si));this.process(e).then(r)},t.prototype.dispatch=function(e){return A(this,void 0,void 0,function(){var r=this;return k(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(o){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,o))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var r={};if(e===void 0)return r;var n={};return Object.keys(e).forEach(function(o){Object.values(ke).includes(o)||(n[o]=e[o])}),mi.forEach(function(o){if(Object.keys(e).includes(o)){var i=e[o];switch(o){case ke.CLEAR_ALL:Object.keys(r).forEach(function(s){delete r[s]});break;case ke.UNSET:Object.keys(i).forEach(function(s){delete r[s]});break;case ke.SET:Object.assign(r,i);break}}}),Object.assign(r,n),r},t.prototype.process=function(e){return A(this,void 0,void 0,function(){var r,i,n,o,i;return k(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.config.optOut?[2,Pe(e,0,_i)]:(e.event_type===ve.IDENTIFY&&(r=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:r})),[4,this.timeline.push(e)]);case 1:return i=s.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return n=s.sent(),o=String(n),this.config.loggerProvider.error(o),i=Pe(e,0,o),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return W(this.timeline.flush())},t.prototype.plugin=function(e){var r=this.timeline.plugins.find(function(n){return n.name===e});if(r===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return r},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(r){return r instanceof e})},t}(),Li=function(){function t(e,r){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=r}return t.prototype.fetchConfig=function(){var e=null,r={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(o){return this.logger.debug("Remote config localstorage failed to access: ",o),Promise.resolve(r)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(r);try{var n=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(n))),Promise.resolve({remoteConfig:n.remoteConfig,lastFetch:new Date(n.lastFetch)})}catch(o){return this.logger.debug("Remote config localstorage failed to parse: ",o),localStorage.removeItem(this.key),Promise.resolve(r)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(r){this.logger.debug("Remote config localstorage failed to set: ",r)}return Promise.resolve(!1)},t}(),Ni="https://sr-client-cfg.amplitude.com/config",Di="https://sr-client-cfg.eu.amplitude.com/config",xi=3,Ui=1e3,Mi=function(){function t(e,r,n){n===void 0&&(n="US"),this.callbackInfos=[],this.apiKey=e,this.serverUrl=n==="US"?Ni:Di,this.logger=r,this.storage=new Li(e,r)}return t.prototype.subscribe=function(e,r,n){var o=he(),i={id:o,key:e,deliveryMode:r,callback:n};return this.callbackInfos.push(i),r==="all"?this.subscribeAll(i):this.subscribeWaitForRemote(i,r.timeout),o},t.prototype.unsubscribe=function(e){var r=this.callbackInfos.findIndex(function(n){return n.id===e});return r===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(r,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return A(this,void 0,void 0,function(){var e,r=this;return k(this,function(n){switch(n.label){case 0:return[4,this.fetch()];case 1:return e=n.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(o){r.sendCallback(o,e,"remote")}),[2]}})})},t.prototype.subscribeAll=function(e){return A(this,void 0,void 0,function(){var r,n,o,i=this;return k(this,function(s){switch(s.label){case 0:return r=this.fetch().then(function(u){i.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(u))),i.sendCallback(e,u,"remote"),i.storage.setConfig(u)}),n=this.storage.fetchConfig().then(function(u){return u}),[4,Promise.race([r,n])];case 1:return o=s.sent(),o!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(o))),this.sendCallback(e,o,"cache")),[4,r];case 2:return s.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,r){return A(this,void 0,void 0,function(){var n,o,o;return k(this,function(i){switch(i.label){case 0:n=new Promise(function(s,u){setTimeout(function(){u("Timeout exceeded")},r)}),i.label=1;case 1:return i.trys.push([1,3,,5]),[4,Promise.race([this.fetch(),n])];case 2:return o=i.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,o,"remote"),this.storage.setConfig(o),[3,5];case 3:return i.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return o=i.sent(),o.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,o,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,o,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,r,n){e.lastCallback=new Date;var o;e.key?o=e.key.split(".").reduce(function(i,s){return i===null?i:s in i?i[s]:null},r.remoteConfig):o=r.remoteConfig,e.callback(o,n,r.lastFetch)},t.prototype.fetch=function(e,r){return e===void 0&&(e=xi),r===void 0&&(r=Ui),A(this,void 0,void 0,function(){var n,o,i,s,u,l,a=this;return k(this,function(c){switch(c.label){case 0:n=r/e,o={remoteConfig:null,lastFetch:new Date},i=function(d){var f,h,v,y,b,p;return k(this,function(g){switch(g.label){case 0:f=new AbortController,h=setTimeout(function(){return f.abort()},r),g.label=1;case 1:return g.trys.push([1,7,8,9]),[4,fetch(s.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:f.signal})];case 2:return v=g.sent(),v.ok?[3,4]:[4,v.text()];case 3:return y=g.sent(),s.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(v.status,": ").concat(y)),[3,6];case 4:return[4,v.json()];case 5:return b=g.sent(),[2,{value:{remoteConfig:b,lastFetch:new Date}}];case 6:return[3,9];case 7:return p=g.sent(),p instanceof Error&&p.name==="AbortError"?s.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(r,"ms")):s.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),p),[3,9];case 8:return clearTimeout(h),[7];case 9:return d<e-1?[4,new Promise(function(m){return setTimeout(m,a.getJitterDelay(n))})]:[3,11];case 10:g.sent(),g.label=11;case 11:return[2]}})},s=this,u=0,c.label=1;case 1:return u<e?[5,i(u)]:[3,4];case 2:if(l=c.sent(),typeof l=="object")return[2,l.value];c.label=3;case 3:return u++,[3,1];case 4:return[2,o]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),r=new URLSearchParams;return r.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(r.toString())},t.CONFIG_GROUP="browser",t}(),Y;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Y||(Y={}));var Ue="Amplitude Logger ",Or=function(){function t(){this.logLevel=Y.None}return t.prototype.disable=function(){this.logLevel=Y.None},t.prototype.enable=function(e){e===void 0&&(e=Y.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Y.Verbose||console.log("".concat(Ue,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Y.Warn||console.warn("".concat(Ue,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Y.Error||console.error("".concat(Ue,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<Y.Debug||console.log("".concat(Ue,"[Debug]: ").concat(e.join(" ")))},t}(),Fi=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return yt(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?O({},this.properties):{};return e[oe.REVENUE_PRODUCT_ID]=this.productId,e[oe.REVENUE_QUANTITY]=this.quantity,e[oe.REVENUE_PRICE]=this.price,e[oe.REVENUE_TYPE]=this.revenueType,e[oe.REVENUE_CURRENCY]=this.currency,e[oe.REVENUE]=this.revenue,e[oe.RECEIPT]=this.receipt,e[oe.RECEIPT_SIG]=this.receiptSig,e},t}(),oe;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(oe||(oe={}));var ji=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,o,i){var s=Math.floor(i/r);return n[s]||(n[s]=[]),n[s].push(o),n},[])},je=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:Ar,logLevel:Y.Warn,loggerProvider:new Or,offline:!1,optOut:!1,serverUrl:Pr,serverZone:"US",useBatch:!1}},qi=function(){function t(e){var r,n,o,i;this._optOut=!1;var s=je();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:s.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||s.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||s.flushQueueSize,this.instanceName=e.instanceName||s.instanceName,this.loggerProvider=e.loggerProvider||s.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:s.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:s.offline,this.optOut=(o=e.optOut)!==null&&o!==void 0?o:s.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||s.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(i=e.useBatch)!==null&&i!==void 0?i:s.useBatch,this.loggerProvider.enable(this.logLevel);var u=Lr(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=u.serverZone,this.serverUrl=u.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),Vi=function(t,e){return t==="EU"?e?ci:si:e?ui:Pr},Lr=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=je().serverZone),r===void 0&&(r=je().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:je().serverZone;return{serverZone:n,serverUrl:Vi(n,r)}},$i=function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,r){this.sdk.metrics.histogram[e]=r},t}();function Gi(t){return t instanceof Error?t.message:String(t)}function Me(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var Bi=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[]}return t.prototype.setup=function(e){var r;return A(this,void 0,void 0,function(){var n,o=this;return k(this,function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat(ai,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=i.sent(),n&&n.length>0&&Promise.all(n.map(function(s){return o.execute(s)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return e.insert_id||(e.insert_id=he()),new Promise(function(n){var o={event:e,attempts:0,callback:function(i){return n(i)},timeout:0};r.queue.push(o),r.schedule(r.config.flushIntervalMillis),r.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var r=this;return e.filter(function(n){return n.attempts+=1,n.attempts<r.config.flushMaxRetries?!0:(r.fulfillRequest([n],500,Ei),!1)})},t.prototype.scheduleEvents=function(e){var r=this;e.forEach(function(n){r.schedule(n.timeout===0?r.config.flushIntervalMillis:n.timeout)})},t.prototype.schedule=function(e){var r=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){r.queue=r.queue.map(function(n){return n.timeout=0,n}),r.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),A(this,void 0,void 0,function(){var r,n,o,i=this;return k(this,function(s){switch(s.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),r=[],n=[],this.queue.forEach(function(u){return u.timeout===0?r.push(u):n.push(u)}),o=ji(r,this.config.flushQueueSize),[4,o.reduce(function(u,l){return A(i,void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:return[4,u];case 1:return a.sent(),[4,this.send(l,e)];case 2:return[2,a.sent()]}})})},Promise.resolve())]);case 1:return s.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),A(this,void 0,void 0,function(){var n,o,i,s,u;return k(this,function(l){switch(l.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,Ti)];n={api_key:this.config.apiKey,events:e.map(function(a){var c=a.event;c.extra;var d=oi(c,["extra"]);return d}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new $i,l.label=1;case 1:return l.trys.push([1,3,,4]),o=Lr(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(o,n)];case 2:return i=l.sent(),i===null?(this.fulfillRequest(e,0,bi),[2]):r?(this.handleResponse(i,e),[3,4]):("body"in i?this.fulfillRequest(e,i.statusCode,"".concat(i.status,": ").concat(Me(i))):this.fulfillRequest(e,i.statusCode,i.status),[2]);case 3:return s=l.sent(),u=Gi(s),this.config.loggerProvider.error(u),this.handleResponse({status:we.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case we.Success:{this.handleSuccessResponse(e,r);break}case we.Invalid:{this.handleInvalidResponse(e,r);break}case we.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case we.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,yi)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(wi)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var o=be(be(be(be([],G(Object.values(e.body.eventsWithInvalidFields)),!1),G(Object.values(e.body.eventsWithMissingFields)),!1),G(Object.values(e.body.eventsWithInvalidIdLengths)),!1),G(e.body.silencedEvents),!1).flat(),i=new Set(o),s=r.filter(function(l,a){if(i.has(a)){n.fulfillRequest([l],e.statusCode,e.body.error);return}return!0});s.length>0&&this.config.loggerProvider.warn(Me(e));var u=this.removeEventsExceedFlushMaxRetries(s);this.scheduleEvents(u)},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Me(e)),this.config.flushQueueSize/=2;var n=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(n)},t.prototype.handleRateLimitResponse=function(e,r){var n=this,o=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),s=e.body.throttledEvents,u=new Set(o),l=new Set(i),a=new Set(s),c=r.filter(function(f,h){if(f.event.user_id&&u.has(f.event.user_id)||f.event.device_id&&l.has(f.event.device_id)){n.fulfillRequest([f],e.statusCode,e.body.error);return}return a.has(h)&&(f.timeout=n.throttleTimeout),!0});c.length>0&&this.config.loggerProvider.warn(Me(e));var d=this.removeEventsExceedFlushMaxRetries(c);this.scheduleEvents(d)},t.prototype.handleOtherResponse=function(e){var r=this,n=e.map(function(i){return i.timeout=i.attempts*r.retryTimeout,i}),o=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(o)},t.prototype.fulfillRequest=function(e,r,n){this.removeEvents(e),e.forEach(function(o){return o.callback(Pe(o.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(r){return r.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(r){return!e.some(function(n){return n.event.insert_id===r.event.insert_id})}),this.saveEvents()},t}(),Le=function(t){return t===void 0&&(t=Ar),pn.getInstance(t)},Wi=function(t,e){Le(e).identityStore.editIdentity().setUserId(t).commit()},Ki=function(t,e){Le(e).identityStore.editIdentity().setDeviceId(t).commit()},Hi=function(){function t(){this.name="identity",this.type="before",this.identityStore=Le().identityStore}return t.prototype.execute=function(e){return A(this,void 0,void 0,function(){var r;return k(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return A(this,void 0,void 0,function(){return k(this,function(r){return e.instanceName&&(this.identityStore=Le(e.instanceName).identityStore),[2]})})},t}(),Nr=function(t,e){e===void 0&&(e=Date.now());var r=Date.now(),n=r-e;return n>t},Dr=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[Qe,e,t.substring(0,r)].filter(Boolean).join("_")},zi=function(t){return"".concat(Qe.toLowerCase(),"_").concat(t.substring(0,6))},Yi=function(){var t,e,r,n;if(typeof navigator>"u")return"";var o=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:o)!==null&&n!==void 0?n:""},Ke=function(){var t,e=q();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(o,i){var s=i.split("=",2),u=Yt(s[0]),l=Yt(s[1]);return l&&(o[u]=l),o},{});return n},Yt=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},Xi=function(t){var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},N=function(t){return function(){var e=O({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}},Qi=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var o=fe(e.split(".")),i=o.next();!i.done;i=o.next()){var s=i.value;if(s in t)t=t[s];else return}}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t},D=function(t,e){return function(){var r,n,o={};try{for(var i=fe(e),s=i.next();!s.done;s=i.next()){var u=s.value;o[u]=Qi(t,u)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}},x=function(t,e,r,n,o){return o===void 0&&(o=null),function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u=r(),l=u.logger,a=u.logLevel;if(a&&a<Y.Debug||!a||!l)return t.apply(o,i);var c={type:"invoke public method",name:e,args:i,stacktrace:Xi(1),time:{start:new Date().toISOString()},states:{}};n&&c.states&&(c.states.before=n());var d=t.apply(o,i);return d&&d.promise?d.promise.then(function(){n&&c.states&&(c.states.after=n()),c.time&&(c.time.end=new Date().toISOString()),l.debug(JSON.stringify(c,null,2))}):(n&&c.states&&(c.states.after=n()),c.time&&(c.time.end=new Date().toISOString()),l.debug(JSON.stringify(c,null,2))),d}},Pt=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return A(this,void 0,void 0,function(){return k(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return A(this,void 0,void 0,function(){return k(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return A(this,void 0,void 0,function(){var r;return k(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return A(this,void 0,void 0,function(){return k(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return A(this,void 0,void 0,function(){return k(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return A(this,void 0,void 0,function(){return k(this,function(e){return this.memoryStorage.clear(),[2]})})},t}(),bt=function(){function t(e){this.options=O({},e)}return t.prototype.isEnabled=function(){return A(this,void 0,void 0,function(){var e,r,n;return k(this,function(o){switch(o.label){case 0:if(!q())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return o.sent(),[4,e.get(r)];case 3:return n=o.sent(),[2,n===t.testValue];case 4:return o.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){var r;return A(this,void 0,void 0,function(){var n,o;return k(this,function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(n=i.sent(),!n)return[2,void 0];try{return o=(r=Ji(n))!==null&&r!==void 0?r:Zi(n),o===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(o)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return A(this,void 0,void 0,function(){var o,i,s;return k(this,function(u){return o=q(),i=(n=(r=o==null?void 0:o.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],s=i.find(function(l){return l.indexOf(e+"=")===0}),s?[2,s.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return A(this,void 0,void 0,function(){var o,i,s,u,l,a,c;return k(this,function(d){try{o=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,i=r!==null?o:-1,s=void 0,i&&(u=new Date,u.setTime(u.getTime()+i*24*60*60*1e3),s=u),l="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),s&&(l+="; expires=".concat(s.toUTCString())),l+="; path=/",this.options.domain&&(l+="; domain=".concat(this.options.domain)),this.options.secure&&(l+="; Secure"),this.options.sameSite&&(l+="; SameSite=".concat(this.options.sameSite)),a=q(),a&&(a.document.cookie=l)}catch(f){c=f instanceof Error?f.message:String(f),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(c))}return[2]})})},t.prototype.remove=function(e){return A(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return A(this,void 0,void 0,function(){return k(this,function(e){return[2]})})},t}(),Ji=function(t){try{return decodeURIComponent(atob(t))}catch{return}},Zi=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},eo=function(t,e,r){return r===void 0&&(r=10),[Qe,e,t.substring(0,r)].filter(Boolean).join("_")},xr=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return A(this,void 0,void 0,function(){var e,r,n,o;return k(this,function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return i.sent(),[4,r.get(n)];case 3:return o=i.sent(),[2,o===e];case 4:return i.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return A(this,void 0,void 0,function(){var r;return k(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=n.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return A(this,void 0,void 0,function(){return k(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return A(this,void 0,void 0,function(){return k(this,function(o){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return A(this,void 0,void 0,function(){return k(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return A(this,void 0,void 0,function(){return k(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}(),to=function(t){ii(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return A(this,void 0,void 0,function(){var o,i,s;return k(this,function(u){switch(u.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return o={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,o)];case 1:return i=u.sent(),[4,i.text()];case 2:s=u.sent();try{return[2,this.buildResponse(JSON.parse(s))]}catch{return[2,this.buildResponse({code:i.status})]}return[2]}})})},e}(It),ro=null,no=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],Ur="data-amp-track-",io=["div","span","h1","h2","h3","h4","h5","h6"],oo=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],ao=be(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],G(oo),!1),so=["*"],uo=1e3,co=4,Mr=100,lo=function(){function t(e){this.request=e}return Object.defineProperty(t.prototype,"headers",{get:function(){if(this._headers)return this._headers;var e=this.request.headers;if(Array.isArray(e)){var r=e;this._headers=r.reduce(function(i,s){var u=G(s,2),l=u[0],a=u[1];return i[l]=a,i},{})}else if(e instanceof Headers){var n=e,o={};n.forEach(function(i,s){o[s]=i}),this._headers=o}else typeof e=="object"&&(this._headers=e);return this._headers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=q();if(e!=null&&e.TextEncoder){var r=this.request.body;return this._bodySize=Fr(r,Mr),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t}(),fo=function(){function t(e){this.body=e}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return Fr(this.body,Mr)},enumerable:!1,configurable:!0}),t}();function Fr(t,e){var r,n,o,i=q(),s=i==null?void 0:i.TextEncoder;if(s){var u;if(typeof t=="string")u=t,o=new s().encode(u).length;else if(t instanceof Blob)u=t,o=u.size;else if(t instanceof URLSearchParams)u=t,o=new s().encode(u.toString()).length;else if(ArrayBuffer.isView(t))u=t,o=u.byteLength;else if(t instanceof ArrayBuffer)u=t,o=u.byteLength;else if(t instanceof FormData){var l=t,a=0,c=0;try{for(var d=fe(l.entries()),f=d.next();!f.done;f=d.next()){var h=G(f.value,2),v=h[0],y=h[1];if(a+=v.length,typeof y=="string")a+=new s().encode(y).length;else if(y instanceof Blob)a+=y.size;else return;if(++c>=e)return}}catch(b){r={error:b}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}o=a}else if(t instanceof ReadableStream){u=t;return}return o}}var vo=function(){function t(e){this.response=e}return Object.defineProperty(t.prototype,"headers",{get:function(){var e;if(this._headers)return this._headers;if(this.response.headers instanceof Headers){var r=this.response.headers,n={};return(e=r==null?void 0:r.forEach)===null||e===void 0||e.call(r,function(o,i){n[i]=o}),this._headers=n,n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,r;if(this._bodySize!==void 0)return this._bodySize;var n=(r=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||r===void 0?void 0:r.call(e,"content-length"),o=n?parseInt(n,10):void 0;return this._bodySize=o,o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t}(),ho=function(){function t(e,r,n){this.statusCode=e,this.headersString=r,this.size=n}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){var e,r;if(this.headersString){var n={},o=this.headersString.split(`\r
`);try{for(var i=fe(o),s=i.next();!s.done;s=i.next()){var u=s.value,l=G(u.split(": "),2),a=l[0],c=l[1];a&&c&&(n[a]=c)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}},enumerable:!1,configurable:!0}),t}(),po=function(){function t(e,r,n,o,i,s,u,l,a,c,d){u===void 0&&(u=0),this.type=e,this.method=r,this.timestamp=n,this.startTime=o,this.url=i,this.requestWrapper=s,this.status=u,this.duration=l,this.responseWrapper=a,this.error=c,this.endTime=d}return t.prototype.toSerializable=function(){var e,r,n,o,i={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers,requestBodySize:(r=this.requestWrapper)===null||r===void 0?void 0:r.bodySize,responseHeaders:(n=this.responseWrapper)===null||n===void 0?void 0:n.headers,responseBodySize:(o=this.responseWrapper)===null||o===void 0?void 0:o.bodySize};return Object.fromEntries(Object.entries(i).filter(function(s){var u=G(s,2);u[0];var l=u[1];return l!==void 0}))},t}();function go(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var mo=function(){function t(e,r){r===void 0&&(r=he()),this.callback=e,this.id=r}return t}(),yo=function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var r=q();t.isSupported()&&(this.globalScope=r)}return t.isSupported=function(){var e=q();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,r){var n,o,i,s,u,l,a;if(this.logger||(this.logger=r),this.eventCallbacks.set(e.id,e),!this.isObserving){var c=(i=(o=(n=this.globalScope)===null||n===void 0?void 0:n.XMLHttpRequest)===null||o===void 0?void 0:o.prototype)===null||i===void 0?void 0:i.open,d=(l=(u=(s=this.globalScope)===null||s===void 0?void 0:s.XMLHttpRequest)===null||u===void 0?void 0:u.prototype)===null||l===void 0?void 0:l.send;c&&d&&this.observeXhr(c,d);var f=(a=this.globalScope)===null||a===void 0?void 0:a.fetch;f&&this.observeFetch(f),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var r=this;this.eventCallbacks.forEach(function(n){var o;try{n.callback(e)}catch(i){(o=r.logger)===null||o===void 0||o.debug("an unexpected error occurred while triggering event callbacks",i)}})},t.prototype.handleNetworkRequestEvent=function(e,r,n,o,i,s,u){var l;if(!(s===void 0||u===void 0)){var a,c="GET";go(r)?(a=r.url,c=r.method):a=(l=r==null?void 0:r.toString)===null||l===void 0?void 0:l.call(r),c=(n==null?void 0:n.method)||c;var d,f;o&&(d=o.status),i&&(f={name:i.name||"UnknownError",message:i.message||"An unknown error occurred"},d=0);var h=Math.floor(performance.now()-u),v=Math.floor(s+h),y=new po(e,c,s,s,a,n,d,h,o,f,v);this.triggerEventCallbacks(y)}},t.prototype.getTimestamps=function(){var e,r;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(r=performance==null?void 0:performance.now)===null||r===void 0?void 0:r.call(performance)}},t.prototype.observeFetch=function(e){var r=this;!this.globalScope||!e||(this.globalScope.fetch=function(n,o){return A(r,void 0,void 0,function(){var i,s,u,l,a,c;return k(this,function(d){switch(d.label){case 0:try{i=this.getTimestamps()}catch(f){(a=this.logger)===null||a===void 0||a.debug("an unexpected error occurred while retrieving timestamps",f)}d.label=1;case 1:return d.trys.push([1,3,,4]),[4,e(n,o)];case 2:return s=d.sent(),[3,4];case 3:return l=d.sent(),u=l,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",n,o?new lo(o):void 0,s?new vo(s):void 0,u,i==null?void 0:i.startTime,i==null?void 0:i.durationStart)}catch(f){(c=this.logger)===null||c===void 0||c.debug("an unexpected error occurred while handling fetch",f)}if(s)return[2,s];throw u}})})})},t.prototype.observeXhr=function(e,r){if(!(!this.globalScope||!e||!r)){var n=this.globalScope.XMLHttpRequest.prototype,o=this;n.open=function(){for(var i,s,u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var a=this,c=G(u,2),d=c[0],f=c[1];try{a.$$AmplitudeAnalyticsEvent=O({method:d,url:(i=f==null?void 0:f.toString)===null||i===void 0?void 0:i.call(f)},o.getTimestamps())}catch(h){(s=o.logger)===null||s===void 0||s.debug("an unexpected error occurred while calling xhr open",h)}return e.apply(a,u)},n.send=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u=this,l=i[0],a=u.$$AmplitudeAnalyticsEvent;return u.addEventListener("loadend",function(){var c;try{var d=u.getAllResponseHeaders(),f=u.getResponseHeader("content-length"),h=new ho(u.status,d,f?parseInt(f,10):void 0),v=new fo(l);a.status=u.status,o.handleNetworkRequestEvent("xhr",{url:a.url,method:a.method},v,h,void 0,a.startTime,a.durationStart)}catch(y){(c=o.logger)===null||c===void 0||c.debug("an unexpected error occurred while handling xhr send",y)}}),r.apply(u,i)}}},t}(),Xt=new yo,bo=function(){function t(){}return t.prototype.parse=function(){return A(this,void 0,void 0,function(){return k(this,function(e){return[2,O(O(O(O({},At),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=Ke(),r=e[li],n=e[di],o=e[fi],i=e[vi],s=e[hi],u=e[pi];return{utm_campaign:r,utm_content:n,utm_id:o,utm_medium:i,utm_source:s,utm_term:u}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=Ke();return e={},e[Mt]=r[Mt],e[Ft]=r[Ft],e[jt]=r[jt],e[qt]=r[qt],e[Vt]=r[Vt],e[$t]=r[$t],e[Gt]=r[Gt],e[Bt]=r[Bt],e[Wt]=r[Wt],e[Kt]=r[Kt],e[Ht]=r[Ht],e},t}(),He;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(He||(He={}));var Qt;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue"})(Qt||(Qt={}));var Jt;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(Jt||(Jt={}));var Et=function(t,e){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Et(t,e)};function Re(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Et(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C=function(){return C=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},C.apply(this,arguments)};function Zt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function F(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function j(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function jr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}var De=function(t,e){return typeof t=="boolean"?t:(t==null?void 0:t[e])!==!1},qr=function(t){return De(t,"attribution")},Eo=function(t){return De(t,"fileDownloads")},_o=function(t){return De(t,"formInteractions")},Vr=function(t){return De(t,"pageViews")},er=function(t){return De(t,"sessions")},$r=function(t){return typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},Gr=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},To=function(t){return typeof t=="object"&&t.webVitals===!0},Br=function(t){return typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},wo=function(t){if(Gr(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},So=function(t){if(Br(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},Io=function(t){if($r(t.autocapture)){if(typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object")return t.autocapture.networkTracking;if(t.networkTrackingOptions)return t.networkTrackingOptions}},ko=function(t){var e=function(){return!1},r=void 0,n,o=t.pageCounter,i=Vr(t.defaultTracking);return i&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n,pageCounter:o}},Ao=function(t){return qr(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?C({},t.defaultTracking.attribution):{}},at=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],o=n.name,i=n.args,s=n.resolve,u=t&&t[o];if(typeof u=="function"){var l=u.apply(t,i);typeof s=="function"&&s(l==null?void 0:l.promise)}}return t},st=function(t){var e=t;return e&&e._q!==void 0},Wr="2.22.1",Po="amplitude-ts",Ro="Web",Co="$remote",Oo=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(Po,"/").concat(Wr),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return F(this,void 0,void 0,function(){var o,i,s,u;return j(this,function(l){return o=new Date().getTime(),i=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,s=(n=e.event_id)!==null&&n!==void 0?n:i+1,this.config.lastEventId=s,e.time||(this.config.lastEventTime=o),u=C(C(C(C(C(C(C(C({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:o},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:Ro}),this.config.trackingOptions.language&&{language:Yi()}),this.config.trackingOptions.ipAddress&&{ip:Co}),{insert_id:he(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:s,library:this.library,user_agent:this.userAgent}),[2,u]})})},t}(),Fe=1e3,Kr=function(t){Re(e,t);function e(r){var n=this,o,i,s;try{s=(o=q())===null||o===void 0?void 0:o.localStorage}catch(u){(i=r==null?void 0:r.loggerProvider)===null||i===void 0||i.debug("Failed to access localStorage. error=".concat(JSON.stringify(u))),s=void 0}return n=t.call(this,s)||this,n.loggerProvider=r==null?void 0:r.loggerProvider,n}return e.prototype.set=function(r,n){var o;return F(this,void 0,void 0,function(){var i;return j(this,function(s){switch(s.label){case 0:return Array.isArray(n)&&n.length>Fe?(i=n.length-Fe,[4,t.prototype.set.call(this,r,n.slice(0,Fe))]):[3,2];case 1:return s.sent(),(o=this.loggerProvider)===null||o===void 0||o.error("Failed to save ".concat(i," events because the queue length exceeded ").concat(Fe,".")),[3,4];case 2:return[4,t.prototype.set.call(this,r,n)];case 3:s.sent(),s.label=4;case 4:return[2]}})})},e}(xr),Lo=function(t){Re(e,t);function e(){var r;return t.call(this,(r=q())===null||r===void 0?void 0:r.sessionStorage)||this}return e}(xr),No=function(t){Re(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return F(this,void 0,void 0,function(){var o=this;return j(this,function(i){return[2,new Promise(function(s,u){typeof XMLHttpRequest>"u"&&u(new Error("XHRTransport is not supported."));var l=new XMLHttpRequest;l.open("POST",r,!0),l.onreadystatechange=function(){if(l.readyState===o.state.done){var a=l.responseText;try{s(o.buildResponse(JSON.parse(a)))}catch{s(o.buildResponse({code:l.status}))}}},l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Accept","*/*"),l.send(JSON.stringify(n))})]})})},e}(It),Do=function(t){Re(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return F(this,void 0,void 0,function(){var o=this;return j(this,function(i){return[2,new Promise(function(s,u){var l=q();if(!(l!=null&&l.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var a=JSON.stringify(n),c=l.navigator.sendBeacon(r,JSON.stringify(n));return s(c?o.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:a.length,server_upload_time:Date.now()}):o.buildResponse({code:500}))}catch(d){u(d)}})]})})},e}(It),xo=function(t,e,r){return r===void 0&&(r=!0),F(void 0,void 0,void 0,function(){var n,o,i,s,u,l,a,c,d;return j(this,function(f){switch(f.label){case 0:return n=zi(t),[4,e.getRaw(n)];case 1:return o=f.sent(),o?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:f.sent(),f.label=3;case 3:return i=Rt(o.split("."),6),s=i[0],u=i[1],l=i[2],a=i[3],c=i[4],d=i[5],[2,{deviceId:s,userId:Uo(u),sessionId:ut(a),lastEventId:ut(d),lastEventTime:ut(c),optOut:!!l}]}})})},ut=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},Uo=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},ie="[Amplitude]",tr="".concat(ie," Form Started"),Mo="".concat(ie," Form Submitted"),Fo="".concat(ie," File Downloaded"),rr="session_start",nr="session_end",jo="".concat(ie," File Extension"),qo="".concat(ie," File Name"),Vo="".concat(ie," Link ID"),$o="".concat(ie," Link Text"),Go="".concat(ie," Link URL"),ct="".concat(ie," Form ID"),lt="".concat(ie," Form Name"),dt="".concat(ie," Form Destination"),ze="cookie",Bo="US",Wo=function(t){Re(e,t);function e(r,n,o,i,s,u,l,a,c,d,f,h,v,y,b,p,g,m,T,w,P,E,S,I,U,M,L,X,Z,ee,te,se,ue,pe,V){o===void 0&&(o=new Pt),i===void 0&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),a===void 0&&(a=1e3),c===void 0&&(c=5),d===void 0&&(d=30),f===void 0&&(f=ze),p===void 0&&(p=new Or),g===void 0&&(g=Y.Warn),T===void 0&&(T=!1),w===void 0&&(w=!1),S===void 0&&(S=""),I===void 0&&(I=Bo),M===void 0&&(M=30*60*1e3),L===void 0&&(L=new Kr({loggerProvider:p})),X===void 0&&(X={ipAddress:!0,language:!0,platform:!0}),Z===void 0&&(Z="fetch"),ee===void 0&&(ee=!1),te===void 0&&(te=!0);var _=t.call(this,{apiKey:r,storageProvider:L,transportProvider:Hr(Z)})||this;return _.apiKey=r,_.appVersion=n,_.cookieOptions=i,_.defaultTracking=s,_.autocapture=u,_.flushIntervalMillis=a,_.flushMaxRetries=c,_.flushQueueSize=d,_.identityStorage=f,_.ingestionMetadata=h,_.instanceName=v,_.loggerProvider=p,_.logLevel=g,_.minIdLength=m,_.offline=T,_.partnerId=P,_.plan=E,_.serverUrl=S,_.serverZone=I,_.sessionTimeout=M,_.storageProvider=L,_.trackingOptions=X,_.transport=Z,_.useBatch=ee,_.fetchRemoteConfig=te,_.networkTrackingOptions=V,_.version=Wr,_._optOut=!1,_._cookieStorage=o,_.deviceId=l,_.lastEventId=y,_.lastEventTime=b,_.optOut=w,_.sessionId=U,_.pageCounter=ue,_.userId=se,_.debugLogsEnabled=pe,_.loggerProvider.enable(pe?Y.Debug:_.logLevel),_.networkTrackingOptions=V,_}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(r){this._pageCounter!==r&&(this._pageCounter=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(r){this._debugLogsEnabled!==r&&(this._debugLogsEnabled=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(Dr(this.apiKey),r)},e}(qi),Ko=function(t,e,r){return e===void 0&&(e={}),F(void 0,void 0,void 0,function(){var n,o,i,s,u,l,a,c,d,f,h,v,y,b,p,g,m,T,w,P,E,S,I,U,M,L,X,Z,ee,te,se,ue,pe,V,_,_e,ge,le,Je,Ze,et,tt,rt,nt,it;return j(this,function(me){switch(me.label){case 0:return n=e.identityStorage||ze,E={},n===ze?[3,1]:(i="",[3,5]);case 1:return(I=(S=e.cookieOptions)===null||S===void 0?void 0:S.domain)!==null&&I!==void 0?(s=I,[3,4]):[3,2];case 2:return[4,zo()];case 3:s=me.sent(),me.label=4;case 4:i=s,me.label=5;case 5:return o=C.apply(void 0,[(E.domain=i,E.expiration=365,E.sameSite="Lax",E.secure=!1,E.upgrade=!0,E),e.cookieOptions]),u=Ho(e.identityStorage,o),[4,xo(t,u,(M=(U=e.cookieOptions)===null||U===void 0?void 0:U.upgrade)!==null&&M!==void 0?M:!0)];case 6:return l=me.sent(),[4,u.get(Dr(t))];case 7:return a=me.sent(),c=Ke(),d=c.ampTimestamp?Number(c.ampTimestamp):void 0,f=d?Date.now()<d:!0,h=(te=(ee=(Z=(L=e.deviceId)!==null&&L!==void 0?L:f?(X=c.ampDeviceId)!==null&&X!==void 0?X:c.deviceId:void 0)!==null&&Z!==void 0?Z:a==null?void 0:a.deviceId)!==null&&ee!==void 0?ee:l.deviceId)!==null&&te!==void 0?te:he(),v=(se=a==null?void 0:a.lastEventId)!==null&&se!==void 0?se:l.lastEventId,y=(ue=a==null?void 0:a.lastEventTime)!==null&&ue!==void 0?ue:l.lastEventTime,b=(V=(pe=e.optOut)!==null&&pe!==void 0?pe:a==null?void 0:a.optOut)!==null&&V!==void 0?V:l.optOut,p=(_=a==null?void 0:a.sessionId)!==null&&_!==void 0?_:l.sessionId,g=(ge=(_e=e.userId)!==null&&_e!==void 0?_e:a==null?void 0:a.userId)!==null&&ge!==void 0?ge:l.userId,r.previousSessionDeviceId=(le=a==null?void 0:a.deviceId)!==null&&le!==void 0?le:l.deviceId,r.previousSessionUserId=(Je=a==null?void 0:a.userId)!==null&&Je!==void 0?Je:l.userId,m={ipAddress:(et=(Ze=e.trackingOptions)===null||Ze===void 0?void 0:Ze.ipAddress)!==null&&et!==void 0?et:!0,language:(rt=(tt=e.trackingOptions)===null||tt===void 0?void 0:tt.language)!==null&&rt!==void 0?rt:!0,platform:(it=(nt=e.trackingOptions)===null||nt===void 0?void 0:nt.platform)!==null&&it!==void 0?it:!0},T=a==null?void 0:a.pageCounter,w=a==null?void 0:a.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),P=new Wo(t,e.appVersion,u,o,e.defaultTracking,e.autocapture,h,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,v,y,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,b,e.partnerId,e.plan,e.serverUrl,e.serverZone,p,e.sessionTimeout,e.storageProvider,m,e.transport,e.useBatch,e.fetchRemoteConfig,g,T,w,e.networkTrackingOptions),[4,P.storageProvider.isEnabled()];case 8:return me.sent()||(P.loggerProvider.warn("Storage provider ".concat(P.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),P.storageProvider=new Pt),[2,P]}})})},Ho=function(t,e){switch(t===void 0&&(t=ze),e===void 0&&(e={}),t){case"localStorage":return new Kr;case"sessionStorage":return new Lo;case"none":return new Pt;case"cookie":default:return new bt(C(C({},e),{expirationDays:e.expiration}))}},Hr=function(t){return t==="xhr"?new No:t==="beacon"?new Do:new to},zo=function(t){return F(void 0,void 0,void 0,function(){var e,r,n,o,i,i,s,u,l,a;return j(this,function(c){switch(c.label){case 0:return[4,new bt().isEnabled()];case 1:if(!c.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,r=e.split("."),n=[],o="AMP_TLDTEST",i=r.length-2;i>=0;--i)n.push(r.slice(i).join("."));i=0,c.label=2;case 2:return i<n.length?(s=n[i],u={domain:"."+s},l=new bt(u),[4,l.set(o,1)]):[3,7];case 3:return c.sent(),[4,l.get(o)];case 4:return a=c.sent(),a?[4,l.remove(o)]:[3,6];case 5:return c.sent(),[2,"."+s];case 6:return i++,[3,2];case 7:return[2,""]}})})},de=function(){return de=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},de.apply(this,arguments)};function Se(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function Ie(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function _t(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function ir(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Ae=function(){return Ae=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ae.apply(this,arguments)};function Yo(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function Xo(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var zr=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof Ge<"u")return Ge},or=function(){var t,e=zr();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(o,i){var s=i.split("=",2),u=ar(s[0]),l=ar(s[1]);return l&&(o[u]=l),o},{});return n},ar=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},Qo="utm_campaign",Jo="utm_content",Zo="utm_id",ea="utm_medium",ta="utm_source",ra="utm_term",sr="dclid",ur="fbclid",cr="gbraid",lr="gclid",dr="ko_click_id",fr="li_fat_id",vr="msclkid",hr="rtd_cid",pr="ttclid",gr="twclid",mr="wbraid",Yr={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},na=function(){function t(){}return t.prototype.parse=function(){return Yo(this,void 0,void 0,function(){return Xo(this,function(e){return[2,Ae(Ae(Ae(Ae({},Yr),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=or(),r=e[Qo],n=e[Jo],o=e[Zo],i=e[ea],s=e[ta],u=e[ra];return{utm_campaign:r,utm_content:n,utm_id:o,utm_medium:i,utm_source:s,utm_term:u}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=or();return e={},e[sr]=r[sr],e[ur]=r[ur],e[cr]=r[cr],e[lr]=r[lr],e[dr]=r[dr],e[fr]=r[fr],e[vr]=r[vr],e[hr]=r[hr],e[pr]=r[pr],e[gr]=r[gr],e[mr]=r[mr],e},t}(),ia=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e},oa="[Amplitude] Page Viewed",aa=function(t){t===void 0&&(t={});var e,r=zr(),n=void 0,o=!1,i,s=t.trackOn,u=t.trackHistoryChanges,l=t.eventType,a=l===void 0?oa:l,c=function(p){var g=p;try{g=decodeURI(p)}catch(m){n==null||n.error("Malformed URI sequence: ",m)}return g},d=function(){return Se(void 0,void 0,void 0,function(){var p,g,m;return Ie(this,function(T){switch(T.label){case 0:return p=c(typeof location<"u"&&location.href||""),m={event_type:a},g=[{}],[4,sa()];case 1:return[2,(m.event_properties=de.apply(void 0,[de.apply(void 0,g.concat([T.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":p,"[Amplitude] Page Path":typeof location<"u"&&c(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":p.split("?")[0]}]),m)]}})})},f=function(){return typeof s>"u"||typeof s=="function"&&s()},h=typeof location<"u"?location.href:null,v=function(){return Se(void 0,void 0,void 0,function(){var p,g,m,T;return Ie(this,function(w){switch(w.label){case 0:return p=location.href,g=ca(u,p,h||"")&&f(),h=p,g?(n==null||n.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return T=(m=e).track,[4,d()];case 2:T.apply(m,[w.sent()]),w.label=3;case 3:w.label=4;case 4:return[2]}})})},y=function(){v()},b={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(p,g){return Se(void 0,void 0,void 0,function(){var m,T;return Ie(this,function(w){switch(w.label){case 0:return e=g,i=p,n=p.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),o=!0,r&&(r.addEventListener("popstate",y),r.history.pushState=new Proxy(r.history.pushState,{apply:function(P,E,S){var I=_t(S,3),U=I[0],M=I[1],L=I[2];P.apply(E,[U,M,L]),o&&v()}})),f()?(n.log("Tracking page view event"),T=(m=e).track,[4,d()]):[3,2];case 1:T.apply(m,[w.sent()]),w.label=2;case 2:return[2]}})})},execute:function(p){return Se(void 0,void 0,void 0,function(){var g;return Ie(this,function(m){switch(m.label){case 0:return s==="attribution"&&ua(p)?(n==null||n.log("Enriching campaign event to page view event with campaign parameters"),[4,d()]):[3,2];case 1:g=m.sent(),p.event_type=g.event_type,p.event_properties=de(de({},p.event_properties),g.event_properties),m.label=2;case 2:return i&&p.event_type===a&&(i.pageCounter=i.pageCounter?i.pageCounter+1:1,p.event_properties=de(de({},p.event_properties),{"[Amplitude] Page Counter":i.pageCounter})),[2,p]}})})},teardown:function(){return Se(void 0,void 0,void 0,function(){return Ie(this,function(p){return r&&(r.removeEventListener("popstate",y),o=!1),[2]})})}};return b},sa=function(){return Se(void 0,void 0,void 0,function(){var t;return Ie(this,function(e){switch(e.label){case 0:return t=ia,[4,new na().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},ua=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[He.SET]||{},n=e[He.UNSET]||{},o=ir(ir([],_t(Object.keys(r)),!1),_t(Object.keys(n)),!1);return Object.keys(Yr).every(function(i){return o.includes(i)})}return!1},ca=function(t,e,r){switch(t){case"pathOnly":{if(r=="")return!0;var n=new URL(e),o=new URL(r),i=n.origin+n.pathname,s=o.origin+o.pathname;return i!==s}default:return e!==r}},la=function(){var t,e=[],r=function(a,c,d){a.addEventListener(c,d),e.push({element:a,type:c,handler:d})},n=function(){e.forEach(function(a){var c=a.element,d=a.type,f=a.handler;c==null||c.removeEventListener(d,f)}),e=[]},o="@amplitude/plugin-form-interaction-tracking-browser",i="enrichment",s=function(a,c){return F(void 0,void 0,void 0,function(){var d,f;return j(this,function(h){return d=function(){if(!c){a.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var v=function(b){var p=!1;r(b,"change",function(){var g,m=yr(b);p||c.track(tr,(g={},g[ct]=Te(b.id),g[lt]=Te(b.name),g[dt]=m,g)),p=!0}),r(b,"submit",function(){var g,m,T=yr(b);p||c.track(tr,(g={},g[ct]=Te(b.id),g[lt]=Te(b.name),g[dt]=T,g)),c.track(Mo,(m={},m[ct]=Te(b.id),m[lt]=Te(b.name),m[dt]=T,m)),p=!1})},y=Array.from(document.getElementsByTagName("form"));y.forEach(v),typeof MutationObserver<"u"&&(t=new MutationObserver(function(b){b.forEach(function(p){p.addedNodes.forEach(function(g){g.nodeName==="FORM"&&v(g),"querySelectorAll"in g&&typeof g.querySelectorAll=="function"&&Array.from(g.querySelectorAll("form")).map(v)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?d():(f=q(),f?f.addEventListener("load",d):a.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},u=function(a){return F(void 0,void 0,void 0,function(){return j(this,function(c){return[2,a]})})},l=function(){return F(void 0,void 0,void 0,function(){return j(this,function(a){return t==null||t.disconnect(),n(),[2]})})};return{name:o,type:i,setup:s,execute:u,teardown:l}},Te=function(t){if(typeof t=="string")return t},yr=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},da=function(){var t,e=[],r=function(a,c,d){a.addEventListener(c,d),e.push({element:a,type:c,handler:d})},n=function(){e.forEach(function(a){var c=a.element,d=a.type,f=a.handler;c==null||c.removeEventListener(d,f)}),e=[]},o="@amplitude/plugin-file-download-tracking-browser",i="enrichment",s=function(a,c){return F(void 0,void 0,void 0,function(){var d,f;return j(this,function(h){return d=function(){if(!c){a.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var v=function(p){var g;try{g=new URL(p.href,window.location.href)}catch{return}var m=y.exec(g.href),T=m==null?void 0:m[1];T&&r(p,"click",function(){var w;T&&c.track(Fo,(w={},w[jo]=T,w[qo]=g.pathname,w[Vo]=p.id,w[$o]=p.text,w[Go]=p.href,w))})},y=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,b=Array.from(document.getElementsByTagName("a"));b.forEach(v),typeof MutationObserver<"u"&&(t=new MutationObserver(function(p){p.forEach(function(g){g.addedNodes.forEach(function(m){m.nodeName==="A"&&v(m),"querySelectorAll"in m&&typeof m.querySelectorAll=="function"&&Array.from(m.querySelectorAll("a")).map(v)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?d():(f=q(),f?f.addEventListener("load",d):a.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},u=function(a){return F(void 0,void 0,void 0,function(){return j(this,function(c){return[2,a]})})},l=function(){return F(void 0,void 0,void 0,function(){return j(this,function(a){return t==null||t.disconnect(),n(),[2]})})};return{name:o,type:i,setup:s,execute:u,teardown:l}},br=!1,fa=function(t){if(!(br||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),br=!0}},va=function(){var t="@amplitude/plugin-network-checker-browser",e="before",r=q(),n=[],o=function(l,a){r!=null&&r.addEventListener&&(r==null||r.addEventListener(l,a),n.push({type:l,handler:a}))},i=function(){n.forEach(function(l){var a=l.type,c=l.handler;r==null||r.removeEventListener(a,c)}),n=[]},s=function(l,a){return F(void 0,void 0,void 0,function(){return j(this,function(c){return typeof navigator>"u"?(l.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),l.offline=!1,[2]):(l.offline=!navigator.onLine,o("online",function(){l.loggerProvider.debug("Network connectivity changed to online."),l.offline=!1,setTimeout(function(){a.flush()},l.flushIntervalMillis)}),o("offline",function(){l.loggerProvider.debug("Network connectivity changed to offline."),l.offline=!0}),[2])})})},u=function(){return F(void 0,void 0,void 0,function(){return j(this,function(l){return i(),[2]})})};return{name:t,type:e,setup:s,teardown:u}};function Xr(t){var e,r;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var n=Object.keys(t);try{for(var o=jr(n),i=o.next();!i.done;i=o.next()){var s=i.value;try{var u=t[s];typeof(u==null?void 0:u.enabled)=="boolean"&&(u.enabled?(delete u.enabled,Object.keys(u).length===0&&(t[s]=!0)):t[s]=!1),Xr(u)}catch{}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}}function ha(t,e){var r,n,o,i;if(t){Xr(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var s=t;if(s&&"autocapture"in s){if(typeof s.autocapture=="boolean"&&(e.autocapture=s.autocapture),typeof s.autocapture=="object"&&s.autocapture!==null){var u=C({},s.autocapture);if(e.autocapture===void 0&&(e.autocapture=s.autocapture),typeof s.autocapture.elementInteractions=="object"&&s.autocapture.elementInteractions!==null&&(!((o=s.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||o===void 0)&&o.length)){u.elementInteractions=C({},s.autocapture.elementInteractions);var l=u.elementInteractions,a=(i=l.pageUrlAllowlist)!==null&&i!==void 0?i:[],c=[];try{for(var d=jr(s.autocapture.elementInteractions.pageUrlAllowlistRegex),f=d.next();!f.done;f=d.next()){var h=f.value;try{c.push(new RegExp(h))}catch(y){e.loggerProvider.warn("Invalid regex pattern: ".concat(h),y)}}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var v=a.concat(c);l.pageUrlAllowlist=v,delete l.pageUrlAllowlistRegex}typeof e.autocapture=="boolean"&&(e.autocapture=C({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},u)),typeof e.autocapture=="object"&&(e.autocapture=C(C({},e.autocapture),u))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(y){e.loggerProvider.error("Failed to apply remote configuration because of error: ",y)}}}var ne=function(){return ne=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ne.apply(this,arguments)};function K(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function H(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function J(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function re(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Ye;(function(t){t.US="US",t.EU="EU",t.STAGING="STAGING"})(Ye||(Ye={}));var $;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})($||($={}));var pa=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,o,i,s,u,l,a,c,d,f,h,v,y,b,p,g,m,T,w,P,E;if(typeof e!="object")return null;var S=e.code||0,I=this.buildStatus(S);switch(I){case $.Success:return{status:I,statusCode:S,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(o=e.server_upload_time)!==null&&o!==void 0?o:0}};case $.Invalid:return{status:I,statusCode:S,body:{error:(i=e.error)!==null&&i!==void 0?i:"",missingField:(s=e.missing_field)!==null&&s!==void 0?s:"",eventsWithInvalidFields:(u=e.events_with_invalid_fields)!==null&&u!==void 0?u:{},eventsWithMissingFields:(l=e.events_with_missing_fields)!==null&&l!==void 0?l:{},eventsWithInvalidIdLengths:(a=e.events_with_invalid_id_lengths)!==null&&a!==void 0?a:{},epsThreshold:(c=e.eps_threshold)!==null&&c!==void 0?c:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(f=e.silenced_devices)!==null&&f!==void 0?f:[],silencedEvents:(h=e.silenced_events)!==null&&h!==void 0?h:[],throttledDevices:(v=e.throttled_devices)!==null&&v!==void 0?v:{},throttledEvents:(y=e.throttled_events)!==null&&y!==void 0?y:[]}};case $.PayloadTooLarge:return{status:I,statusCode:S,body:{error:(b=e.error)!==null&&b!==void 0?b:""}};case $.RateLimit:return{status:I,statusCode:S,body:{error:(p=e.error)!==null&&p!==void 0?p:"",epsThreshold:(g=e.eps_threshold)!==null&&g!==void 0?g:0,throttledDevices:(m=e.throttled_devices)!==null&&m!==void 0?m:{},throttledUsers:(T=e.throttled_users)!==null&&T!==void 0?T:{},exceededDailyQuotaDevices:(w=e.exceeded_daily_quota_devices)!==null&&w!==void 0?w:{},exceededDailyQuotaUsers:(P=e.exceeded_daily_quota_users)!==null&&P!==void 0?P:{},throttledEvents:(E=e.throttled_events)!==null&&E!==void 0?E:[]}};case $.Timeout:default:return{status:I,statusCode:S}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?$.Success:e===429?$.RateLimit:e===413?$.PayloadTooLarge:e===408?$.Timeout:e>=400&&e<500?$.Invalid:e>=500?$.Failed:$.Unknown},t}(),ga="Network error occurred, remote config fetch failed",ma="Remote config successfully fetched",ya="Remote config fetch rejected due to exceeded retry count",Er="Remote config fetch rejected due to timeout after 5 seconds",_r="Unexpected error occurred",ba="https://sr-client-cfg.amplitude.com/config",Ea="https://sr-client-cfg.stag2.amplitude.com/config",_a="https://sr-client-cfg.eu.amplitude.com/config",Ta=function(){function t(e){var r=e.localConfig,n=e.configKeys,o=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteNamespaceConfig=function(i,s){return K(o,void 0,void 0,function(){var u,l,a;return H(this,function(c){switch(c.label){case 0:return u=Date.now(),[4,this.fetchWithTimeout(s)];case 1:return l=c.sent(),l&&(a=l.configs&&l.configs[i],a)?(this.metrics.fetchTimeAPISuccess=Date.now()-u,[2,a]):(this.metrics.fetchTimeAPIFail=Date.now()-u,[2,void 0])}})})},this.getRemoteConfig=function(i,s,u){return K(o,void 0,void 0,function(){var l;return H(this,function(a){switch(a.label){case 0:return[4,this.getRemoteNamespaceConfig(i,u)];case 1:return l=a.sent(),[2,l==null?void 0:l[s]]}})})},this.fetchWithTimeout=function(i){return K(o,void 0,void 0,function(){var s,u,l;return H(this,function(a){switch(a.label){case 0:return s=new AbortController,u=setTimeout(function(){return s.abort()},5e3),[4,this.fetchRemoteConfig(s.signal,i)];case 1:return l=a.sent(),clearTimeout(u),[2,l]}})})},this.fetchRemoteConfig=function(i,s){return K(o,void 0,void 0,function(){var u,l,a,c,d,f,h,v,y,b,p,g,m;return H(this,function(T){switch(T.label){case 0:if(s===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:ya})];if(i.aborted)return[2,this.completeRequest({err:Er})];s!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=s,this.attempts=0),T.label=1;case 1:T.trys.push([1,3,,4]),u=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(l=J(this.configKeys),a=l.next();!a.done;a=l.next())c=a.value,u.append("config_keys",c)}catch(w){p={error:w}}finally{try{a&&!a.done&&(g=l.return)&&g.call(l)}finally{if(p)throw p.error}}return s&&u.set("session_id",String(s)),d={headers:{Accept:"*/*"},method:"GET"},f="".concat(this.getServerUrl(),"?").concat(u.toString()),this.attempts+=1,[4,fetch(f,ne(ne({},d),{signal:i}))];case 2:if(h=T.sent(),h===null)return[2,this.completeRequest({err:_r})];switch(v=new pa().buildStatus(h.status),v){case $.Success:return this.attempts=0,[2,this.parseAndStoreConfig(h)];case $.Failed:return[2,this.retryFetch(i,s)];default:return[2,this.completeRequest({err:ga})]}case 3:return y=T.sent(),b=y,i.aborted?[2,this.completeRequest({err:Er})]:[2,this.completeRequest({err:(m=b.message)!==null&&m!==void 0?m:_r})];case 4:return[2]}})})},this.retryFetch=function(i,s){return K(o,void 0,void 0,function(){var u=this;return H(this,function(l){switch(l.label){case 0:return[4,new Promise(function(a){return setTimeout(a,u.attempts*u.retryTimeout)})];case 1:return l.sent(),[2,this.fetchRemoteConfig(i,s)]}})})},this.parseAndStoreConfig=function(i){return K(o,void 0,void 0,function(){var s;return H(this,function(u){switch(u.label){case 0:return[4,i.json()];case 1:return s=u.sent(),this.completeRequest({success:ma}),[2,s]}})})},this.localConfig=r,this.configKeys=n}return t.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===Ye.STAGING?Ea:this.localConfig.serverZone===Ye.EU?_a:ba},t.prototype.completeRequest=function(e){var r=e.err,n=e.success;if(r)throw new Error(r);n&&this.localConfig.loggerProvider.log(n)},t}(),wa=function(t){var e=t.localConfig,r=t.configKeys;return K(void 0,void 0,void 0,function(){return H(this,function(n){return[2,new Ta({localConfig:e,configKeys:r})]})})},Sa=wa,Ia="@amplitude/plugin-autocapture-browser",ka="@amplitude/plugin-frustration-browser",Tt="[Amplitude] Element Clicked",Aa="[Amplitude] Dead Click",Pa="[Amplitude] Rage Click",Ra="[Amplitude] Element Changed",Ca="[Amplitude] Element ID",Oa="[Amplitude] Element Class",Qr="[Amplitude] Element Tag",Jr="[Amplitude] Element Text",La="[Amplitude] Element Hierarchy",Na="[Amplitude] Element Href",Da="[Amplitude] Element Position Left",xa="[Amplitude] Element Position Top",Ua="[Amplitude] Element Aria Label",Ma="[Amplitude] Element Attributes",Fa="[Amplitude] Element Parent Label",Zr="[Amplitude] Page URL",ja="[Amplitude] Page Title",qa="[Amplitude] Viewport Height",Va="[Amplitude] Viewport Width",qe="https://app.amplitude.com",$a="https://app.eu.amplitude.com",Ga="https://apps.stag2.amplitude.com",Ba={US:qe,EU:$a,STAGING:Ga},Wa="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",Ka="amp-visual-tagging-selector-highlight",Ha=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],za=["type"],Ya=["svg","path","g"],Xa=["password","hidden"],Qa=128,Ja=1024;function Za(t){var e,r,n,o,i,s;if(t===null)return null;var u=String(t.tagName).toLowerCase(),l={tag:u},a=Array.from((o=(n=t.parentElement)===null||n===void 0?void 0:n.children)!==null&&o!==void 0?o:[]);a.length&&(l.index=a.indexOf(t),l.indexOfType=a.filter(function(T){return T.tagName===t.tagName}).indexOf(t));var c=(s=(i=t.previousElementSibling)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase();c&&(l.prevSib=String(c));var d=t.getAttribute("id");d&&(l.id=String(d));var f=Array.from(t.classList);f.length&&(l.classes=f);var h={},v=Array.from(t.attributes),y=v.filter(function(T){return!Ha.includes(T.name)}),b=!rn(t);if(!Xa.includes(String(t.getAttribute("type")))&&!Ya.includes(u))try{for(var p=J(y),g=p.next();!g.done;g=p.next()){var m=g.value;b&&!za.includes(m.name)||(h[m.name]=String(m.value).substring(0,Qa))}}catch(T){e={error:T}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}return Object.keys(h).length&&(l.attrs=h),l}function es(t){var e=[];if(!t)return e;e.push(t);for(var r=t.parentElement;r&&r.tagName!=="HTML";)e.push(r),r=r.parentElement;return e}var ts=function(t){var e=[];if(!t)return[];var r=es(t);return e=rs(r.map(function(n){return Za(n)}),Ja),e};function rs(t,e){for(var r=0,n=0;n<t.length;n++){var o=t[n];if(o===null)r+=4;else{var i=Ve(o);r+=i?Array.from(i).length:4}if(r>e)return t.slice(0,n)}return t}function Ve(t,e){e===void 0&&(e=!1);try{if(t==null)return e?"None":null;if(typeof t=="string")return e?(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r"),t.includes('"')?"'".concat(t,"'"):t.includes("'")?'"'.concat(t.replace(/'/g,"\\'"),'"'):"'".concat(t,"'")):t;if(typeof t=="boolean")return t?"True":"False";if(Array.isArray(t)){var r=t.map(function(i){return Ve(i,!0)});return"[".concat(r.join(", "),"]")}else if(typeof t=="object"){var n=Object.entries(t).filter(function(i){var s=Q(i,1),u=s[0];return u!=null}).map(function(i){var s=Q(i,2),u=s[0],l=s[1];return"".concat(String(Ve(u,!0)),": ").concat(String(Ve(l,!0)))}),o="{".concat(n.join(", "),"}");return o.includes("\\'")&&(o=o.replace(/'/g,"'").replace(/'/g,"\\'")),o}return t.toString()}catch{return null}}var ns=["input","select","textarea"],en=function(t,e){var r,n=(r=window==null?void 0:window.getComputedStyle)===null||r===void 0?void 0:r.call(window,t);return(n==null?void 0:n.getPropertyValue("cursor"))==="pointer"&&e==="click"},Oe=function(t,e,r){return r===void 0&&(r=!1),function(n,o){var i,s,u=t.pageUrlAllowlist,l=t.shouldTrackEventResolver,a=(s=(i=o==null?void 0:o.tagName)===null||i===void 0?void 0:i.toLowerCase)===null||s===void 0?void 0:s.call(i);if(!a)return!1;if(l)return l(n,o);if(!os(window.location.href,u))return!1;var c=String(o==null?void 0:o.getAttribute("type"))||"";if(typeof c=="string")switch(c.toLowerCase()){case"hidden":return!1;case"password":return!1}var d=en(o,n);if(r&&d)return!0;if(e){var f=e.some(function(h){var v;return!!(!((v=o==null?void 0:o.matches)===null||v===void 0)&&v.call(o,h))});if(!f)return!1}switch(a){case"input":case"select":case"textarea":return n==="change"||n==="click";default:return d?!0:n==="click"}}},tn=function(t){if(t==null)return!1;if(typeof t=="string"){var e=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(e.test((t||"").replace(/[- ]/g,"")))return!1;var r=/(^\d{3}-?\d{2}-?\d{4}$)/;if(r.test(t))return!1}return!0},is=function(t){return!!t&&t.nodeType===3},rn=function(t){var e,r,n,o=(r=(e=t==null?void 0:t.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||r===void 0?void 0:r.call(e),i=t instanceof HTMLElement?((n=t.getAttribute("contenteditable"))===null||n===void 0?void 0:n.toLowerCase())==="true":!1;return!ns.includes(o)&&!i},Ct=function(t){var e="";return rn(t)&&t.childNodes&&t.childNodes.length&&t.childNodes.forEach(function(r){var n="";is(r)?r.textContent&&(n=r.textContent):n=Ct(r),e+=n.split(/(\s+)/).filter(tn).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}),e},os=function(t,e){return!e||!e.length?!0:e.some(function(r){return typeof r=="string"?t===r:t.match(r)})},as=function(t,e){return t.getAttributeNames().reduce(function(r,n){if(n.startsWith(e)){var o=n.replace(e,""),i=t.getAttribute(n);o&&(r[o]=i||"")}return r},{})},ss=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},nn=function(t){return Object.keys(t).reduce(function(e,r){var n=t[r];return ss(n)||(e[r]=n),e},{})},on=function(t){var e=t.parentElement;if(!e)return"";var r;try{r=e.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{r=null}if(r){var n=r.textContent||"";return tn(n)?n:""}return on(e)},Ot=function(t,e){return t?e.some(function(r){var n;return(n=t==null?void 0:t.matches)===null||n===void 0?void 0:n.call(t,r)})?t:Ot(t==null?void 0:t.parentElement,e):null},us=function(t){var e,r,n;if(!t)return{};var o=(n=(r=t==null?void 0:t.tagName)===null||r===void 0?void 0:r.toLowerCase)===null||n===void 0?void 0:n.call(r),i=(e={},e[Qr]=o,e[Jr]=Ct(t),e[Zr]=window.location.href.split("?")[0],e);return nn(i)},cs=function(t){return new Promise(function(e,r){var n;try{var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.addEventListener("load",function(){e({status:!0})},{once:!0}),o.addEventListener("error",function(){r({status:!1,message:"Failed to load the script ".concat(t)})}),(n=document.head)===null||n===void 0||n.appendChild(o)}catch(i){r(i)}})};function ls(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var xe=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)},Ne=function(t,e,r){var n,o,i,s=(i=(o=e==null?void 0:e.tagName)===null||o===void 0?void 0:o.toLowerCase)===null||i===void 0?void 0:i.call(o),u=typeof e.getBoundingClientRect=="function"?e.getBoundingClientRect():{left:null,top:null},l=e.getAttribute("aria-label"),a=as(e,r),c=on(e),d=(n={},n[Ca]=e.getAttribute("id")||"",n[Oa]=e.getAttribute("class"),n[La]=ts(e),n[Qr]=s,n[Jr]=Ct(e),n[Da]=u.left==null?null:Math.round(u.left),n[xa]=u.top==null?null:Math.round(u.top),n[Ua]=l,n[Ma]=a,n[Fa]=c,n[Zr]=window.location.href.split("?")[0],n[ja]=typeof document<"u"&&document.title||"",n[qa]=window.innerHeight,n[Va]=window.innerWidth,n);return s==="a"&&t==="click"&&e instanceof HTMLAnchorElement&&(d[Na]=e.href),nn(d)},Ee=function(t,e,r,n,o){o===void 0&&(o=!1);var i={event:t,timestamp:Date.now(),type:e};if(ds(i)&&i.event.target!==null){if(o){var s=en(i.event.target,i.type);if(s)return i.closestTrackedAncestor=i.event.target,i.targetElementProperties=Ne(i.type,i.closestTrackedAncestor,n),i}var u=Ot(i.event.target,r);return u&&(i.closestTrackedAncestor=u,i.targetElementProperties=Ne(i.type,u,n)),i}return i};function ds(t){return t.type==="click"||t.type==="change"}var fs=function(t,e){if(t.sourceType==="DOM_ELEMENT"){var r=document.documentElement;return t.scope&&e&&(r=e.closest(t.scope)),r&&t.selector?r.querySelector(t.selector):r}},an=function(t,e){if(t.sourceType==="DOM_ELEMENT"){var r=fs(t,e);return r?t.elementExtractType==="TEXT"?r.textContent:t.elementExtractType==="ATTRIBUTE"&&t.attribute?r.getAttribute(t.attribute):void 0:void 0}},vs=function(t,e){t.forEach(function(r){if(typeof r!="string"&&r.actionType==="ATTACH_EVENT_PROPERTY"){var n=an(r.dataSource,e.closestTrackedAncestor);e.targetElementProperties[r.destinationKey]=n}})},hs=function(){function t(e){var r=e===void 0?{}:e,n=r.origin,o=n===void 0?qe:n,i=this;this.endpoint=qe,this.requestCallbacks={},this.onSelect=function(s){i.notify({action:"element-selected",data:s})},this.onTrack=function(s,u){s==="selector-mode-changed"?i.notify({action:"track-selector-mode-changed",data:u}):s==="selector-moved"&&i.notify({action:"track-selector-moved",data:u})},this.endpoint=o}return t.prototype.notify=function(e){var r,n,o,i;(n=(r=this.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,"Message sent: ",JSON.stringify(e)),(i=(o=window.opener)===null||o===void 0?void 0:o.postMessage)===null||i===void 0||i.call(o,e,this.endpoint)},t.prototype.sendRequest=function(e,r,n){var o=this;n===void 0&&(n={timeout:15e3});var i=ls(),s={id:i,action:e,args:r},u=new Promise(function(l,a){o.requestCallbacks[i]={resolve:l,reject:a},o.notify(s),(n==null?void 0:n.timeout)>0&&setTimeout(function(){a(new Error("".concat(e," timed out (id: ").concat(i,")"))),delete o.requestCallbacks[i]},n.timeout)});return u},t.prototype.handleResponse=function(e){var r;if(!this.requestCallbacks[e.id]){(r=this.logger)===null||r===void 0||r.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var r=this,n=e===void 0?{}:e,o=n.logger,i=n.endpoint,s=n.isElementSelectable,u=n.cssSelectorAllowlist,l=n.actionClickAllowlist;this.logger=o,i&&this.endpoint===qe&&(this.endpoint=i);var a=null;window.addEventListener("message",function(c){var d,f,h,v,y;if((f=(d=r.logger)===null||d===void 0?void 0:d.debug)===null||f===void 0||f.call(d,"Message received: ",JSON.stringify(c)),r.endpoint===c.origin){var b=c==null?void 0:c.data,p=b==null?void 0:b.action;if(p)if("id"in b)(v=(h=r.logger)===null||h===void 0?void 0:h.debug)===null||v===void 0||v.call(h,"Received Response to previous request: ",JSON.stringify(c)),r.handleResponse(b);else if(p==="ping")r.notify({action:"pong"});else if(p==="initialize-visual-tagging-selector"){var g=b==null?void 0:b.data;cs(Wa).then(function(){var m;a=(m=window==null?void 0:window.amplitudeVisualTaggingSelector)===null||m===void 0?void 0:m.call(window,{getEventTagProps:us,isElementSelectable:function(T){return s?s((g==null?void 0:g.actionType)||"click",T):!0},onTrack:r.onTrack,onSelect:r.onSelect,visualHighlightClass:Ka,messenger:r,cssSelectorAllowlist:u,actionClickAllowlist:l,extractDataFromDataSource:an}),r.notify({action:"selector-loaded"})}).catch(function(){var m;(m=r.logger)===null||m===void 0||m.warn("Failed to initialize visual tagging selector")})}else p==="close-visual-tagging-selector"&&((y=a==null?void 0:a.close)===null||y===void 0||y.call(a))}}),this.notify({action:"page-loaded"})},t}(),ps=5;function gs(t){var e=t.amplitude,r=t.allObservables,n=t.options,o=t.shouldTrackEvent,i=t.evaluateTriggers,s=r.clickObservable,u=s.pipe(gn(),B(function(d){var f=Q(d,2),h=f[0],v=f[1],y=h.event.target!==v.event.target,b=Math.abs(v.event.screenX-h.event.screenX)<=20&&Math.abs(v.event.screenY-h.event.screenY)<=20;return y&&!b})),l=s.pipe(mn(n.debounceTime),z(function(){return"timeout"})),a=kt(u,l),c=s.pipe(yn(0),B(xe),B(function(d){return o("click",d.closestTrackedAncestor)}),z(function(d){return i(d)}),bn(a));return c.subscribe(function(d){var f,h,v=(d.length>=ps,Tt);try{for(var y=J(d),b=y.next();!b.done;b=y.next()){var p=b.value;e==null||e.track(v,p.targetElementProperties)}}catch(g){f={error:g}}finally{try{b&&!b.done&&(h=y.return)&&h.call(y)}finally{if(f)throw f.error}}})}function ms(t){var e=t.amplitude,r=t.allObservables,n=t.getEventProperties,o=t.shouldTrackEvent,i=t.evaluateTriggers,s=r.changeObservable,u=s.pipe(B(xe),B(function(l){return o("change",l.closestTrackedAncestor)}),z(function(l){return i(l)}));return u.subscribe(function(l){e==null||e.track(Ra,n("change",l.closestTrackedAncestor))})}function ys(t){var e=t.amplitude,r=t.allObservables,n=t.options,o=t.getEventProperties,i=t.shouldTrackEvent,s=t.shouldTrackActionClick,u=r.clickObservable,l=r.mutationObservable,a=r.navigateObservable,c=u.pipe(B(function(v){return!i("click",v.closestTrackedAncestor)}),z(function(v){var y=Ot(v.event.target,n.actionClickAllowlist);return v.closestTrackedAncestor=y,v.closestTrackedAncestor!==null&&(v.targetElementProperties=o(v.type,v.closestTrackedAncestor)),v}),B(xe),B(function(v){return s("click",v.closestTrackedAncestor)})),d=[l];a&&d.push(a);var f=kt.apply(void 0,re([],Q(d),!1)),h=c.pipe(En(function(v){return f.pipe(kr(1),_n({first:500,with:function(){return Tn}}),z(function(){return v}))}));return h.subscribe(function(v){e==null||e.track(Tt,o("click",v.closestTrackedAncestor))})}var sn=function(){return new Xe(function(t){var e=new MutationObserver(function(r){t.next(r)});return e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},un=function(t){return t===void 0&&(t="click"),Be(document,t,{capture:!0})},bs=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(r){return console.error("Error matching event to filter",r),!1}return!1},wt={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},Tr=function(t){var e,r,n,o,i=Object.values(wt).reduce(function(h,v){return h[v]=new Set,h},{});if(!t)return i;try{for(var s=J(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{try{for(var a=(n=void 0,J(l.definition)),c=a.next();!c.done;c=a.next()){var d=c.value,f=wt[d.event_type];f&&i[f].add(l.id)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}catch(h){console.warn("Skipping Labeled Event due to malformed definition",l==null?void 0:l.id,h)}}}catch(h){e={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},wr=function(t){var e,r,n,o,i=new Map;try{for(var s=J(t),u=s.next();!u.done;u=s.next()){var l=u.value;try{for(var a=(n=void 0,J(l.conditions)),c=a.next();!c.done;c=a.next()){var d=c.value;if(d.type==="LABELED_EVENT"){var f=d.match.eventId,h=i.get(f);h||(h=[],i.set(f,h)),h.push(l)}}}catch(v){n={error:v}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}}catch(v){e={error:v}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},Es=function(t,e){return e.filter(function(r){return r.definition.some(function(n){return wt[n.event_type]===t.type&&n.filters.every(function(o){return bs(t,o)})})})},_s=function(t,e){var r,n,o,i,s=new Set;try{for(var u=J(t),l=u.next();!l.done;l=u.next()){var a=l.value,c=e.get(a.id);if(c)try{for(var d=(o=void 0,J(c)),f=d.next();!f.done;f=d.next()){var h=f.value;s.add(h)}}catch(v){o={error:v}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return Array.from(s)},Ts=function(){function t(e,r,n){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=r,this.options=n}return t.prototype.evaluate=function(e){var r,n,o=this.options.pageActions;if(!o)return e;var i=Es(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(c){return o.labeledEvents[c]})),s=_s(i,this.labeledEventToTriggerMap);try{for(var u=J(s),l=u.next();!l.done;l=u.next()){var a=l.value;vs(a.actions,e)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return e},t.prototype.update=function(e,r,n){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=r,this.options=n},t}(),ws=function(t,e,r){return new Ts(t,e,r)},ae;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable"})(ae||(ae={}));var Ss=function(t){var e,r,n,o,i,s,u;t===void 0&&(t={});var l=t.dataAttributePrefix,a=l===void 0?Ur:l,c=t.visualTaggingOptions,d=c===void 0?{enabled:!0,messenger:new hs}:c;t.cssSelectorAllowlist=(e=t.cssSelectorAllowlist)!==null&&e!==void 0?e:no,t.actionClickAllowlist=(r=t.actionClickAllowlist)!==null&&r!==void 0?r:io,t.debounceTime=(n=t.debounceTime)!==null&&n!==void 0?n:0;var f=Ia,h="enrichment",v=[],y=function(){var E,S=un().pipe(z(function(L){return Ee(L,"click",t.cssSelectorAllowlist,a)}),ye()),I=Be(document,"change",{capture:!0}).pipe(z(function(L){return Ee(L,"change",t.cssSelectorAllowlist,a)}),ye()),U;window.navigation&&(U=Be(window.navigation,"navigate").pipe(z(function(L){return Ee(L,"navigate",t.cssSelectorAllowlist,a)}),ye()));var M=sn().pipe(z(function(L){return Ee(L,"mutation",t.cssSelectorAllowlist,a)}),ye());return E={},E[ae.ClickObservable]=S,E[ae.ChangeObservable]=I,E[ae.NavigateObservable]=U,E[ae.MutationObservable]=M,E},b=Tr(Object.values((i=(o=t.pageActions)===null||o===void 0?void 0:o.labeledEvents)!==null&&i!==void 0?i:{})),p=wr((u=(s=t.pageActions)===null||s===void 0?void 0:s.triggers)!==null&&u!==void 0?u:[]),g=ws(b,p,t),m=function(E){var S,I;E&&(t.pageActions=ne(ne({},t.pageActions),E),b=Tr(Object.values((S=t.pageActions.labeledEvents)!==null&&S!==void 0?S:{})),p=wr((I=t.pageActions.triggers)!==null&&I!==void 0?I:[]),g.update(b,p,t))},T=function(E,S){return K(void 0,void 0,void 0,function(){var I,U,M,L,X,Z,ee,te,se,ue;return H(this,function(pe){return typeof document>"u"?[2]:(E.fetchRemoteConfig&&Sa({localConfig:E,configKeys:["analyticsSDK.pageActions"]}).then(function(V){return K(void 0,void 0,void 0,function(){var _,_e,ge;return H(this,function(le){switch(le.label){case 0:return le.trys.push([0,2,,3]),[4,V.getRemoteConfig("analyticsSDK","pageActions")];case 1:return _=le.sent(),m(_),[3,3];case 2:return _e=le.sent(),(ge=E==null?void 0:E.loggerProvider)===null||ge===void 0||ge.error("Failed to fetch remote config: ".concat(String(_e))),[3,3];case 3:return[2]}})})}).catch(function(V){var _;(_=E==null?void 0:E.loggerProvider)===null||_===void 0||_.error("Failed to create remote config fetch: ".concat(String(V)))}),I=Oe(t,t.cssSelectorAllowlist),U=Oe(t,t.actionClickAllowlist),M=y(),L=gs({allObservables:M,options:t,amplitude:S,shouldTrackEvent:I,evaluateTriggers:g.evaluate.bind(g)}),v.push(L),X=ms({allObservables:M,getEventProperties:function(){for(var V=[],_=0;_<arguments.length;_++)V[_]=arguments[_];return Ne.apply(void 0,re(re([],Q(V),!1),[a],!1))},amplitude:S,shouldTrackEvent:I,evaluateTriggers:g.evaluate.bind(g)}),v.push(X),Z=ys({allObservables:M,options:t,getEventProperties:function(){for(var V=[],_=0;_<arguments.length;_++)V[_]=arguments[_];return Ne.apply(void 0,re(re([],Q(V),!1),[a],!1))},amplitude:S,shouldTrackEvent:I,shouldTrackActionClick:U}),v.push(Z),(se=E==null?void 0:E.loggerProvider)===null||se===void 0||se.log("".concat(f," has been successfully added.")),window.opener&&d.enabled&&(ee=t.cssSelectorAllowlist,te=t.actionClickAllowlist,(ue=d.messenger)===null||ue===void 0||ue.setup(ne(ne({logger:E==null?void 0:E.loggerProvider},(E==null?void 0:E.serverZone)&&{endpoint:Ba[E.serverZone]}),{isElementSelectable:Oe(t,re(re([],Q(ee),!1),Q(te),!1)),cssSelectorAllowlist:ee,actionClickAllowlist:te}))),[2])})})},w=function(E){return K(void 0,void 0,void 0,function(){return H(this,function(S){return[2,E]})})},P=function(){return K(void 0,void 0,void 0,function(){var E,S,I,U,M;return H(this,function(L){try{for(E=J(v),S=E.next();!S.done;S=E.next())I=S.value,I.unsubscribe()}catch(X){U={error:X}}finally{try{S&&!S.done&&(M=E.return)&&M.call(E)}finally{if(U)throw U.error}}return[2]})})};return{name:f,type:h,setup:T,execute:w,teardown:P}},Sr=3e3;function Is(t){var e=t.amplitude,r=t.allObservables,n=t.getEventProperties,o=t.shouldTrackDeadClick,i=r.clickObservable,s=r.mutationObservable,u=r.navigateObservable,l=i.pipe(B(xe),B(function(f){return o("click",f.closestTrackedAncestor)})),a=[s];u&&a.push(u);var c=kt.apply(void 0,re([],Q(a),!1)),d=l.pipe(wn(function(f){var h,v=new Xe(function(y){return h=setTimeout(function(){return y.next(f)},Sr),function(){clearTimeout(h)}});return Sn(v,c.pipe(kr(1),z(function(){return null}))).pipe(B(function(y){return y!==null}))}),In(Sr));return d.subscribe(function(f){var h={"[Amplitude] X":f.event.clientX,"[Amplitude] Y":f.event.clientY};e.track(Aa,ne(ne({},n("click",f.closestTrackedAncestor)),h),{time:f.timestamp})})}var ks=co,As=uo;function Ps(t){var e=t.amplitude,r=t.allObservables,n=t.shouldTrackRageClick,o=r.clickObservable,i=[];return o.pipe(B(xe),B(function(s){return n("click",s.closestTrackedAncestor)}),z(function(s){var u=s.timestamp;i.length>0&&i[i.length-1].closestTrackedAncestor!==s.closestTrackedAncestor&&i.splice(0,i.length);for(var l=0;l<i.length&&!(u-i[l].timestamp<As);l++);if(i.splice(0,l),i.push(s),i.length<ks)return null;var a=i[0],c=i[i.length-1],d=ne({"[Amplitude] Begin Time":new Date(a.timestamp).toISOString(),"[Amplitude] End Time":new Date(c.timestamp).toISOString(),"[Amplitude] Duration":c.timestamp-a.timestamp,"[Amplitude] Clicks":i.map(function(f){return{X:f.event.clientX,Y:f.event.clientY,Time:f.timestamp}}),"[Amplitude] Click Count":i.length},a.targetElementProperties);return i.splice(0,i.length),{rageClickEvent:d,time:a.timestamp}}),B(function(s){return s!==null})).subscribe(function(s){s!==null&&e.track(Pa,s.rageClickEvent,{time:s.time})})}var Rs=function(t){var e,r,n,o,i;t===void 0&&(t={});var s=ka,u="enrichment",l=[],a=(r=(e=t.rageClicks)===null||e===void 0?void 0:e.cssSelectorAllowlist)!==null&&r!==void 0?r:so,c=(o=(n=t.deadClicks)===null||n===void 0?void 0:n.cssSelectorAllowlist)!==null&&o!==void 0?o:ao,d=(i=t.dataAttributePrefix)!==null&&i!==void 0?i:Ur,f=re([],Q(new Set(re(re([],Q(a),!1),Q(c),!1))),!1),h=function(){var p,g=un("pointerdown").pipe(z(function(w){return Ee(w,"click",f,d,!0)}),ye()),m;window.navigation&&(m=Be(window.navigation,"navigate").pipe(z(function(w){return Ee(w,"navigate",f,d)}),ye()));var T=sn().pipe(z(function(w){return Ee(w,"mutation",f,d)}),ye());return p={},p[ae.ClickObservable]=g,p[ae.ChangeObservable]=new Xe,p[ae.NavigateObservable]=m,p[ae.MutationObservable]=T,p},v=function(p,g){return K(void 0,void 0,void 0,function(){var m,T,w,P,E,S;return H(this,function(I){return typeof document>"u"?[2]:(m=Oe(t,a),T=Oe(t,c),w=h(),P=Ps({allObservables:w,amplitude:g,shouldTrackRageClick:m}),l.push(P),E=Is({amplitude:g,allObservables:w,getEventProperties:function(U,M){return Ne(U,M,d)},shouldTrackDeadClick:T}),l.push(E),(S=p==null?void 0:p.loggerProvider)===null||S===void 0||S.log("".concat(s," has been successfully added.")),[2])})})},y=function(p){return K(void 0,void 0,void 0,function(){return H(this,function(g){return[2,p]})})},b=function(){return K(void 0,void 0,void 0,function(){var p,g,m,T,w;return H(this,function(P){try{for(p=J(l),g=p.next();!g.done;g=p.next())m=g.value,m.unsubscribe()}catch(E){T={error:E}}finally{try{g&&!g.done&&(w=p.return)&&w.call(p)}finally{if(T)throw T.error}}return[2]})})};return{name:s,type:u,setup:v,execute:y,teardown:b}};function ft(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function vt(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function cn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ln(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function Cs(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Os="@amplitude/plugin-network-capture-browser",dn="[Amplitude] Network Request",fn="500-599";function $e(t,e){var r=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),n="^"+r.replace(/\*/g,".*")+"$",o=new RegExp(n);return o.test(t)}function vn(t,e){var r,n,o=e.split(",");try{for(var i=cn(o),s=i.next();!s.done;s=i.next()){var u=s.value,l=ln(u.split("-").map(Number),2),a=l[0],c=l[1];if(t===a&&c===void 0||t>=a&&t<=c)return!0}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}function Ls(t,e,r){if(!(t.hosts&&!t.hosts.find(function(o){return $e(e,o)}))){if(r||r===0){var n=t.statusCodeRange||fn;if(!vn(r,n))return!1}return!0}}function hn(t){var e;if(t)try{var r=(e=q())===null||e===void 0?void 0:e.location.href,n=new URL(t,r),o=n.searchParams.toString(),i=n.hash.replace("#",""),s=n.href,u=n.host;n.hash="",n.search="";var l=n.href;return{query:o,fragment:i,href:s,hrefWithoutQueryOrHash:l,host:u}}catch{return}}function Ns(t,e){if(t.includes("amplitude.com"))try{var r=e.body;if(typeof r!="string")return!1;var n=JSON.parse(r),o=n.events;if(o.find(function(i){return i.event_type===dn}))return!0}catch{}return!1}function Ds(t,e){var r;e===void 0&&(e={});var n=hn(t.url);if(!n)return!1;var o=n.host;if(e.ignoreAmplitudeRequests!==!1&&($e(o,"*.amplitude.com")||$e(o,"amplitude.com"))||!((r=e.ignoreHosts)===null||r===void 0)&&r.find(function(s){return $e(o,s)})||!e.captureRules&&t.status!==void 0&&!vn(t.status,fn))return!1;if(e.captureRules){var i;if(Cs([],ln(e.captureRules),!1).reverse().find(function(s){return i=Ls(s,o,t.status),i!==void 0}),!i)return!1}return!(t.requestWrapper&&Ns(o,t.requestWrapper))}function xs(t){var e=t.allObservables,r=t.networkTrackingOptions,n=t.amplitude,o=e.networkObservable,i=o.pipe(B(function(s){return Ds(s.event,r)}));return i.subscribe(function(s){var u,l,a,c=s.event,d=hn(c.url);if(d){var f=(l=c.responseWrapper)===null||l===void 0?void 0:l.bodySize,h=(a=c.requestWrapper)===null||a===void 0?void 0:a.bodySize,v=(u={},u["[Amplitude] URL"]=d.hrefWithoutQueryOrHash,u["[Amplitude] URL Query"]=d.query,u["[Amplitude] URL Fragment"]=d.fragment,u["[Amplitude] Request Method"]=c.method,u["[Amplitude] Status Code"]=c.status,u["[Amplitude] Start Time"]=c.startTime,u["[Amplitude] Completion Time"]=c.endTime,u["[Amplitude] Duration"]=c.duration,u["[Amplitude] Request Body Size"]=h,u["[Amplitude] Response Body Size"]=f,u["[Amplitude] Request Type"]=c.type,u);n==null||n.track(dn,v)}})}var St;(function(t){t.NetworkObservable="networkObservable"})(St||(St={}));var Us=function(t){t===void 0&&(t={});var e=Os,r="enrichment",n,o=[],i=function(c,d){var f={event:c,timestamp:Date.now(),type:d};return f},s=function(){var c,d=new Xe(function(f){var h=new mo(function(v){var y=i(v,"network");f.next(y)});return Xt.subscribe(h,n),function(){Xt.unsubscribe(h)}});return c={},c[St.NetworkObservable]=d,c},u=function(c,d){return ft(void 0,void 0,void 0,function(){var f,h;return vt(this,function(v){return typeof document>"u"?[2]:(f=s(),h=xs({allObservables:f,networkTrackingOptions:t,amplitude:d}),o.push(h),n=c==null?void 0:c.loggerProvider,n==null||n.log("".concat(e," has been successfully added.")),[2])})})},l=function(c){return ft(void 0,void 0,void 0,function(){return vt(this,function(d){return[2,c]})})},a=function(){return ft(void 0,void 0,void 0,function(){var c,d,f,h,v;return vt(this,function(y){try{for(c=cn(o),d=c.next();!d.done;d=c.next())f=d.value,f.unsubscribe()}catch(b){h={error:b}}finally{try{d&&!d.done&&(v=c.return)&&v.call(c)}finally{if(h)throw h.error}}return[2]})})};return{name:e,type:r,setup:u,execute:l,teardown:a}};function ht(t,e,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function u(c){try{a(n.next(c))}catch(d){s(d)}}function l(c){try{a(n.throw(c))}catch(d){s(d)}}function a(c){c.done?i(c.value):o(c.value).then(u,l)}a((n=n.apply(t,e||[])).next())})}function pt(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(n=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(a[0]===6&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(c){a=[6,c],o=0}finally{n=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}var Ms="web-vitals-browser",Fs="[Amplitude] Web Vitals";function js(t){var e,r=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+r}function Ce(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(js(t)),navigationStart:Math.floor(performance.timeOrigin)}}var qs=function(){var t=null,e=q(),r=e==null?void 0:e.document,n=e==null?void 0:e.location,o=function(u,l){return ht(void 0,void 0,void 0,function(){var a,c,d;return pt(this,function(f){return a=function(h){var v;if(!h)return"";var y=h;try{y=decodeURI(h)}catch(b){(v=u.loggerProvider)===null||v===void 0||v.error("Malformed URI sequence: ",b)}return y},r===void 0?[2]:(c=a(n==null?void 0:n.href),d={"[Amplitude] Page Domain":(n==null?void 0:n.hostname)||"","[Amplitude] Page Location":c,"[Amplitude] Page Path":a(n==null?void 0:n.pathname),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":c.split("?")[0]},kn(function(h){d["[Amplitude] LCP"]=Ce(h)}),An(function(h){d["[Amplitude] FCP"]=Ce(h)}),Pn(function(h){d["[Amplitude] INP"]=Ce(h)}),Rn(function(h){d["[Amplitude] CLS"]=Ce(h)}),Cn(function(h){d["[Amplitude] TTFB"]=Ce(h)}),t=function(){r.visibilityState==="hidden"&&t&&(l.track(Fs,d),r.removeEventListener("visibilitychange",t),t=null)},r.addEventListener("visibilitychange",t),[2])})})},i=function(u){return ht(void 0,void 0,void 0,function(){return pt(this,function(l){return[2,u]})})},s=function(){return ht(void 0,void 0,void 0,function(){return pt(this,function(u){return t&&(r==null||r.removeEventListener("visibilitychange",t)),[2]})})};return{name:Ms,type:"enrichment",setup:o,execute:i,teardown:s}},Ir=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Vs=function(t){return Object.values(t).every(function(e){return!e})},$s=function(t,e,r,n,o){o===void 0&&(o=!0),t.referrer;var i=t.referring_domain,s=Zt(t,["referrer","referring_domain"]),u=e||{};u.referrer;var l=u.referring_domain,a=Zt(u,["referrer","referring_domain"]);if(Gs(r.excludeReferrers,t.referring_domain))return n.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!o&&Vs(t)&&e)return n.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var c=JSON.stringify(s)!==JSON.stringify(a),d=Ir(i||"")!==Ir(l||""),f=!e||c||d;return f?n.debug("This is a new campaign. An $identify event will be sent."):n.debug("This is not a new campaign because it's the same as the previous one."),f},Gs=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})},Bs=function(t,e){var r=C(C({},At),t),n=Object.entries(r).reduce(function(o,i){var s,u=Rt(i,2),l=u[0],a=u[1];return o.setOnce("initial_".concat(l),(s=a??e.initialEmptyValue)!==null&&s!==void 0?s:"EMPTY"),a?o.set(l,a):o.unset(l)},new We);return Cr(n)},Ws=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},Ks=function(){function t(e,r){var n;this.shouldTrackNewCampaign=!1,this.options=C({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:Ws((n=r.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=r.cookieStorage,this.storageKey=eo(r.apiKey,"MKTG"),this.currentCampaign=At,this.sessionTimeout=r.sessionTimeout,this.lastEventTime=r.lastEventTime,this.logger=r.loggerProvider,r.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return F(this,void 0,void 0,function(){var e,r;return j(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return r=Rt.apply(void 0,[n.sent(),2]),this.currentCampaign=r[0],this.previousCampaign=r[1],e=this.lastEventTime?Nr(this.sessionTimeout,this.lastEventTime):!0,$s(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return F(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,Promise.all([new bo().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var r=Bs(this.currentCampaign,this.options);return e&&(r.event_id=e),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}(),Hs=function(t){Re(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,o){r===void 0&&(r="");var i,s;return arguments.length>2?(i=n,s=o):typeof n=="string"?(i=n,s=void 0):(i=n==null?void 0:n.userId,s=n),W(this._init(C(C({},s),{userId:i,apiKey:r})))},e.prototype._init=function(r){var n,o,i;return F(this,void 0,void 0,function(){var s,u,l,a,c,d,f,h=this;return j(this,function(v){switch(v.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Ko(r.apiKey,r,this)]);case 1:return s=v.sent(),s.fetchRemoteConfig?(this.remoteConfigClient=new Mi(s.apiKey,s.loggerProvider,s.serverZone),[4,new Promise(function(y){var b;(b=h.remoteConfigClient)===null||b===void 0||b.subscribe("configs.analyticsSDK.browserSDK","all",function(p,g,m){s.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:p,source:g,lastFetch:m},null,2)),p&&ha(p,s),y()})})]):[3,3];case 2:v.sent(),v.label=3;case 3:return[4,t.prototype._init.call(this,s)];case 4:return v.sent(),this.logBrowserOptions(s),qr(this.config.defaultTracking)?(u=Ao(this.config),this.webAttribution=new Ks(u,this.config),[4,this.webAttribution.init()]):[3,6];case 5:v.sent(),v.label=6;case 6:return l=Ke(),a=l.ampTimestamp?Number(l.ampTimestamp):void 0,c=a?Date.now()<a:!0,d=c&&!Number.isNaN(Number(l.ampSessionId))?Number(l.ampSessionId):void 0,this.setSessionId((i=(o=(n=r.sessionId)!==null&&n!==void 0?n:d)!==null&&o!==void 0?o:this.config.sessionId)!==null&&i!==void 0?i:Date.now()),f=Le(r.instanceName),f.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===ro?[3,8]:[4,this.add(va()).promise];case 7:v.sent(),v.label=8;case 8:return[4,this.add(new Bi).promise];case 9:return v.sent(),[4,this.add(new Oo).promise];case 10:return v.sent(),[4,this.add(new Hi).promise];case 11:return v.sent(),fa(this.config),Eo(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(da()).promise]):[3,13];case 12:v.sent(),v.label=13;case 13:return _o(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(la()).promise]):[3,15];case 14:v.sent(),v.label=15;case 15:return Vr(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(aa(ko(this.config))).promise]):[3,17];case 16:v.sent(),v.label=17;case 17:return Gr(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(Ss(wo(this.config))).promise]):[3,19];case 18:v.sent(),v.label=19;case 19:return Br(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(Rs(So(this.config))).promise]):[3,21];case 20:v.sent(),v.label=21;case 21:return $r(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(Us(Io(this.config))).promise]):[3,23];case 22:v.sent(),v.label=23;case 23:return To(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(qs()).promise]):[3,25];case 24:v.sent(),v.label=25;case 25:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 26:return v.sent(),f.eventBridge.setEventReceiver(function(y){h.track(y.eventType,y.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}this.config.loggerProvider.debug("function setUserId: ",r),(r!==this.config.userId||r===void 0)&&(this.config.userId=r,this.timeline.onIdentityChanged({userId:r}),Wi(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.loggerProvider.debug("function setDeviceId: ",r),r!==this.config.deviceId&&(this.config.deviceId=r,this.timeline.onIdentityChanged({deviceId:r}),Ki(r,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(he()),this.setUserId(void 0)},e.prototype.getIdentity=function(){var r,n;return{deviceId:(r=this.config)===null||r===void 0?void 0:r.deviceId,userId:(n=this.config)===null||n===void 0?void 0:n.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.optOut},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n,o=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,r)),W(Promise.resolve());if(r===this.config.sessionId)return W(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",r);var i=this.getSessionId();i!==r&&this.timeline.onSessionIdChanged(r);var s=this.config.lastEventTime,u=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,this.config.pageCounter=0,er(this.config.defaultTracking)&&(i&&s&&o.push(this.track(nr,void 0,{device_id:this.previousSessionDeviceId,event_id:++u,session_id:i,time:s+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var l=this.trackCampaignEventIfNeeded(++u,o);return er(this.config.defaultTracking)&&o.push(this.track(rr,void 0,{event_id:l?++u:u,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,W(Promise.all(o))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=Hr(r)},e.prototype.identify=function(r,n){if(st(r)){var o=r._q;r._q=[],r=at(new We,o)}return n!=null&&n.user_id&&this.setUserId(n.user_id),n!=null&&n.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,o,i){if(st(o)){var s=o._q;o._q=[],o=at(new We,s)}return t.prototype.groupIdentify.call(this,r,n,o,i)},e.prototype.revenue=function(r,n){if(st(r)){var o=r._q;r._q=[],r=at(new Fi,o)}return t.prototype.revenue.call(this,r,n)},e.prototype.trackCampaignEventIfNeeded=function(r,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var o=this.webAttribution.generateCampaignEvent(r);return n?n.push(this.track(o).promise):this.track(o),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(r){return F(this,void 0,void 0,function(){var n,o,i;return j(this,function(s){return n=Date.now(),o=Nr(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),r.event_type!==rr&&r.event_type!==nr&&(!r.session_id||r.session_id===this.getSessionId())&&(o||i?(this.setSessionId(n),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):o||this.trackCampaignEventIfNeeded()),r.event_type===ve.IDENTIFY&&r.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(r.user_properties)),[2,t.prototype.process.call(this,r)]})})},e.prototype.logBrowserOptions=function(r){try{var n=C(C({},r),{apiKey:r.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(n))}catch(o){this.config.loggerProvider.error("Error logging browser config",o)}},e}(Oi),zs=function(){var t=new Hs;return{init:x(t.init.bind(t),"init",N(t),D(t,["config"])),add:x(t.add.bind(t),"add",N(t),D(t,["config.apiKey","timeline.plugins"])),remove:x(t.remove.bind(t),"remove",N(t),D(t,["config.apiKey","timeline.plugins"])),track:x(t.track.bind(t),"track",N(t),D(t,["config.apiKey","timeline.queue.length"])),logEvent:x(t.logEvent.bind(t),"logEvent",N(t),D(t,["config.apiKey","timeline.queue.length"])),identify:x(t.identify.bind(t),"identify",N(t),D(t,["config.apiKey","timeline.queue.length"])),groupIdentify:x(t.groupIdentify.bind(t),"groupIdentify",N(t),D(t,["config.apiKey","timeline.queue.length"])),setGroup:x(t.setGroup.bind(t),"setGroup",N(t),D(t,["config.apiKey","timeline.queue.length"])),revenue:x(t.revenue.bind(t),"revenue",N(t),D(t,["config.apiKey","timeline.queue.length"])),flush:x(t.flush.bind(t),"flush",N(t),D(t,["config.apiKey","timeline.queue.length"])),getUserId:x(t.getUserId.bind(t),"getUserId",N(t),D(t,["config","config.userId"])),setUserId:x(t.setUserId.bind(t),"setUserId",N(t),D(t,["config","config.userId"])),getDeviceId:x(t.getDeviceId.bind(t),"getDeviceId",N(t),D(t,["config","config.deviceId"])),setDeviceId:x(t.setDeviceId.bind(t),"setDeviceId",N(t),D(t,["config","config.deviceId"])),reset:x(t.reset.bind(t),"reset",N(t),D(t,["config","config.userId","config.deviceId"])),getSessionId:x(t.getSessionId.bind(t),"getSessionId",N(t),D(t,["config"])),setSessionId:x(t.setSessionId.bind(t),"setSessionId",N(t),D(t,["config"])),extendSession:x(t.extendSession.bind(t),"extendSession",N(t),D(t,["config"])),setOptOut:x(t.setOptOut.bind(t),"setOptOut",N(t),D(t,["config"])),setTransport:x(t.setTransport.bind(t),"setTransport",N(t),D(t,["config"])),getIdentity:x(t.getIdentity.bind(t),"getIdentity",N(t),D(t,["config"])),getOptOut:x(t.getOptOut.bind(t),"getOptOut",N(t),D(t,["config"]))}};const Ys=zs();var Xs=Ys.reset;const Qs="_container_pdjdc_1",gt={container:Qs},_u=()=>{var E,S;const t=On(),e=Bn(),r=(S=(E=e==null?void 0:e.chains)==null?void 0:E.solana)==null?void 0:S.address,{chainId:n,recipient:o,collectionAddress:i,tokenId:s,mintAddress:u}=ti(),l=Jn(Lt.SOLANA,n),a=ri({collectionAddress:i,chainId:n,tokenId:s,mintAddress:u}),{addCurrentReceiver:c,setActivityChainConfigId:d}=Wn(),[f,h]=xt.useState(),{isFetching:v}=Zn({transferType:"nft"}),{setPendingSignTx:y}=jn(),{setActivityChanged:b}=zn(),{reloadActivity:p}=Yn(),{data:g,isLoading:m}=Kn({queryKey:[Ln.TRANSFER_TRANSACTION,n,o,r,a==null?void 0:a.address,s],queryFn:async()=>{try{return await l.buildTransferTx({from:r,to:o,token:a,amount:"1",chainId:n})}catch(I){throw Dt.error("[SolNftConfirmPage] Failed to build transaction:",I),I}}}),T=qn({transaction:g,chainId:n,enabled:ei(g),sender:r}),w=xt.useCallback(async(I=!1)=>{await c(o),a!=null&&a.chainId&&await d(a==null?void 0:a.chainId),I||(await y(void 0),await p(),await b(),t(`${Nn.HOME}${Dn.ACTIVITY}`))},[c,o,d,a==null?void 0:a.chainId,t,p,y,b]),P=async()=>{try{await y({status:"pending",payload:{txRequest:Mn(g),receiverAddress:o,token:a,rawAmount:"1",blockchain:Lt.SOLANA,chainId:n}}),await Fn(300),await w()}catch(I){Dt.error("[handleConfirm] error: ",I)}};return ce.jsxs(ot,{noBackground:!0,noFooter:!0,children:[ce.jsx(ot.BackableNavbar,{title:Nt.signing.previewTransaction,callback:()=>{t(-1),Xs()}}),ce.jsxs(ot.Content,{className:gt.container,children:[ce.jsx(Xn,{title:Nt.transfer.transferTitle,logoUrl:xn.RoninLogoIcon,className:gt.transferTitle}),ce.jsx(Vn,{chainId:n,simulateResult:T,isBlockAid:!1}),ce.jsx($n,{transaction:g,chainId:n,sender:r,recipient:o,setErrorMessage:h}),ce.jsx(Hn,{when:!Un.isEmpty(f),children:ce.jsx(Gn,{intent:ni.Danger,className:gt.errMsg,children:f})}),ce.jsx(Qn,{isLoading:v||m,shouldDisableConfirm:!1,onClickConfirm:P})]})]})};export{_u as default};
