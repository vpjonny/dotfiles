import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{l as _,az as x,a as E,ay as R,aQ as re,a_ as U,z as X,a$ as ae,b as Y,T as J,e as ee,X as ie,af as ce,aA as F,b0 as de,aE as le,o as pe,f as xe}from"./windowUtils.Ut7JS-rc.js";import{Q as O,W as M,ak as he,al as ue,a as ve,L as H,B as me}from"./PopupLoading.D-LitESe.js";import{b as u,C as D,W as v,r as je,a7 as _e,g as ne,a as se,A as Se,k as fe,N as ge,P as ye,u as Te,T as Ce}from"./useActiveTimeStore.C3Wei7Oz.js";import{g as Q,a as te,t as G,b as q,u as Ne,c as Ae,d as be,S as Ie}from"./useTxStatus.C8QHcxiJ.js";import{T as p,I as m,B as Ee,S as ke}from"./PasswordLevelLabel.rhWNhrqO.js";import"./enum.CGJbW6Yf.js";import"./index.CxJLds0B.js";import"./preload-helper.2LWRYvkK.js";import"./useDebouncedEffect.CslCnlPq.js";import{t as oe}from"./Copy.ztp0JTbo.js";import"./tiny-invariant.BHpmfUqq.js";import"./solana.CGFphaJI.js";import"./token.types.DkObBlUj.js";import"./useTempStore.C8dvVNTz.js";const we="_container_6hrka_1",ze="_header_6hrka_7",Re="_receiptInfoContainer_6hrka_13",W={container:we,header:ze,receiptInfoContainer:Re},Pe="_swapBadgeContainer_1twkx_1",Le="_rightSwapLogo_1twkx_5",Oe="_iconAvatar_1twkx_10",B={swapBadgeContainer:Pe,rightSwapLogo:Le,iconAvatar:Oe},De=n=>{var k,S,b,f,N,g,C,j,P,L,A,y,T,V;const{data:s,chainInfo:t}=n,{type:o,balanceDiffs:a,activities:i}=s,{outAssets:c,inAssets:r}=Q(a),{validSwapTokenPair:h}=te({inAssets:r,outAssets:c}),d=e.jsx(he,{size:48});let l=d;switch(o){case x.SEND:return l=(c==null?void 0:c.length)===1?c[0].token.logo:d,e.jsx(O,{backAvtSrc:l,backAvtPlaceholder:q((S=(k=c[0])==null?void 0:k.token)==null?void 0:S.standard,48),frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64});case x.RECEIVE:return l=(r==null?void 0:r.length)===1?r[0].token.logo:d,e.jsx(O,{backAvtSrc:l,backAvtPlaceholder:q((f=(b=r[0])==null?void 0:b.token)==null?void 0:f.standard,48),frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64});case x.SWAP:return e.jsxs(e.Fragment,{children:[e.jsx(v,{when:h,children:e.jsxs("div",{className:B.swapBadgeContainer,children:[e.jsx(M,{size:u.Size64,img:(g=(N=c[0])==null?void 0:N.token)==null?void 0:g.logo,placeholderImage:e.jsx(G,{size:48}),className:B.iconAvatar}),e.jsx(O,{backAvtSrc:(j=(C=r[0])==null?void 0:C.token)==null?void 0:j.logo,backAvtPlaceholder:e.jsx(G,{size:48}),frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64,className:B.rightSwapLogo})]})}),e.jsx(v,{when:!h,children:e.jsx(O,{backAvtSrc:l,frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64})})]});case x.APPROVAL:case x.SELF:return l=((L=(P=i==null?void 0:i[0])==null?void 0:P.token)==null?void 0:L.logo)??d,e.jsx(O,{backAvtSrc:l,frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64,frontSquared:!0});default:return!_.isEmpty(c)||!_.isEmpty(r)?e.jsx(O,{backAvtSrc:((y=(A=c[0])==null?void 0:A.token)==null?void 0:y.logo)??((V=(T=r[0])==null?void 0:T.token)==null?void 0:V.logo),frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64,frontSquared:!0}):e.jsx(O,{backAvtSrc:l,frontAvtSrc:e.jsx(D,{chainConfig:t,size:u.Size24}),size:u.Size64,frontSquared:!0})}},$e="_container_17dvb_1",Ve="_swapTextContainer_17dvb_9",Fe="_statusContainer_17dvb_16",He="_dropped_17dvb_23",We="_successIcon_17dvb_27",Be="_errorIcon_17dvb_31",Ue="_actionName_17dvb_35",w={container:$e,swapTextContainer:Ve,statusContainer:Fe,dropped:He,successIcon:We,errorIcon:Be,actionName:Ue},Ge=(n,s)=>{const t=E.activity.status,o=s===R.PENDING||s===R.IN_QUEUE,a=s===R.DROPPED,i=s===R.SUCCESS;switch(n){case x.APPROVAL:return i?t.approval:o?t.approving:a?t.droppedTx:t.approveFailed;case x.SWAP:return i?t.swap:o?t.swapping:a?t.droppedTx:t.swapFailed;case x.SEND:return i?t.sent:o?t.sending:a?t.droppedTx:t.sendFailed;case x.RECEIVE:return i?t.received:t.genericFailed;default:return i?t.generic:o?t.genericInProgress:a?t.droppedTx:t.genericFailed}},Me=({asset:n})=>{var i;const{isTokenAsset:s,txInDirection:t,displayedAmount:o}=be(n),a=((i=n==null?void 0:n.token)==null?void 0:i.symbol)||(s?re:"items");return e.jsx("div",{className:w.detailContainer,children:e.jsx(p.Heading,{level:"4",children:`${t?"+":"-"} ${o??"--"} ${a}`})})},Qe=n=>{const{data:s}=n,{decoded:t,timestamp:o}=s,{type:a,balanceDiffs:i,actionName:c}=t,{data:r}=Ne(s.from,s),{inAssets:h,outAssets:d}=Q(t==null?void 0:t.balanceDiffs),{inTokenSymbols:l,outTokenSymbols:k}=te({inAssets:h,outAssets:d}),S=E.activity.status,b=Ge(a,r),f=r===R.SUCCESS,N=r===R.IN_QUEUE,g=r===R.PENDING||N,C=r===R.DROPPED,j=()=>{var A;return a===x.SWAP?e.jsxs("div",{className:w.swapTextContainer,children:[e.jsx(p.Heading,{level:"4",children:k}),e.jsx(ue,{size:20,color:"gray"}),e.jsx(p.Heading,{level:"4",children:l})]}):[x.SEND,x.RECEIVE].includes(a)&&!_.isEmpty(i)?e.jsx("div",{children:(A=i==null?void 0:i.filter(y=>Number(y==null?void 0:y.value)!==0))==null?void 0:A.map((y,T)=>e.jsx(Me,{asset:y},T))}):a===x.APPROVAL?e.jsx(p.Heading,{level:"4",children:S.approval}):e.jsx(p.Heading,{level:"4",className:w.actionName,children:c})},P=()=>{if(_.isNil(o))return e.jsx("div",{children:"--"});const A=new Date(o),y=A.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),T=A.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),V=()=>g?S.pending:f?S.succeeded:C?S.dropped:S.failed;return e.jsxs("div",{className:w.statusContainer,children:[e.jsx(v,{when:g,children:e.jsx(M,{img:e.jsx(Ae,{}),size:u.Size16})}),e.jsxs(v,{when:!g,children:[e.jsx(v,{when:f,children:e.jsx(je,{className:w.successIcon})}),e.jsx(v,{when:!f,children:e.jsx(_e,{className:C?w.dropped:w.errorIcon})})]}),e.jsx(p.Text,{level:"3",intent:g?m.Secondary:f?m.Success:m.Danger,className:(C||N)&&w.dropped,children:V()}),e.jsx(p.Text,{level:"3",intent:m.Secondary,children:` â€¢ ${y} ${E.activity.details.timeAt} ${T}`})]})},L=()=>[x.APPROVAL,x.GENERIC].includes(a)?S.generic:b;return e.jsxs("div",{className:w.container,children:[e.jsx(p.Text,{level:"2",intent:m.Secondary,children:L()}),j(),P()]})},qe="_container_1ro7i_1",Ke="_addressInfo_1ro7i_9",Ze="_contractInfo_1ro7i_16",Xe="_addressContainer_1ro7i_22",Ye="_address_1ro7i_9",$={container:qe,addressInfo:Ke,contractInfo:Ze,addressContainer:Xe,address:Ye},Je="_container_1p540_1",en="_addressWrapper_1p540_9",nn="_address_1p540_9",sn="_addressStringContainer_1p540_24",tn="_title_1p540_30",on="_popoverContent_1p540_36",rn="_popoverText_1p540_40",an="_dashLine_1p540_48",z={container:Je,addressWrapper:en,address:nn,addressStringContainer:sn,title:tn,popoverContent:on,popoverText:rn,dashLine:an},cn=({address:n,title:s,allowCopyAddress:t,nameResolverProps:o,chainId:a,canOpenExplorer:i=!1})=>{var d;const{toastSuccess:c}=ne(),r=(d=se(a))==null?void 0:d.chainConfig,h=()=>{navigator.clipboard.writeText(U(n)),c({title:"",content:E.common.copiedToClipboard}),Y.sendEvent(J.Click,ee.Transactions,ie.CopyAddress)};return e.jsxs("div",{className:z.container,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:s}),e.jsxs("div",{className:z.addressWrapper,children:[e.jsx(Se,{size:fe.M,seed:n}),e.jsxs("div",{className:z.address,children:[e.jsx(v,{when:!_.isEmpty(o),children:e.jsx(ge,{...o,address:n,level:"3",className:z.title,color:"gray"})}),e.jsx(ye,{triggerElement:e.jsxs("div",{className:z.addressStringContainer,onClick:()=>{i&&ae(r==null?void 0:r.explorerUrl,n)},children:[e.jsxs(p.Text,{intent:m.Default,level:"3",mono:!0,children:[X(n,{boldDot:!0,numberStart:10,numberEnd:8}),e.jsx("div",{className:z.dashLine})]}),e.jsx(v,{when:t,children:e.jsx(oe,{type:"button",size:16,onClick:l=>{l.preventDefault(),l.stopPropagation(),h()}})})]}),hoverToShow:!0,placement:"bottom-start",isOpen:!0,overflowContainer:!1,children:e.jsx("div",{className:z.popoverContent,children:e.jsx(p.Text,{intent:m.Secondary,className:z.popoverText,level:"3",mono:!0,children:U(n)})})})]})]})]})},dn=({data:n})=>{const{toastSuccess:s}=ne(),t=o=>{const a=U(o);navigator.clipboard.writeText(a),s({title:E.common.copiedToClipboard})};return e.jsxs("div",{className:$.container,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:E.activity.details.approvedToken}),n.map((o,a)=>{var i,c,r,h;return e.jsxs("div",{className:$.addressInfo,children:[e.jsx(M,{size:u.Size32,img:(i=o==null?void 0:o.token)==null?void 0:i.logo,placeholderImage:e.jsx(G,{size:16})}),e.jsxs("div",{className:$.contractInfo,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:((c=o==null?void 0:o.token)==null?void 0:c.name)??"--"}),e.jsxs("div",{className:$.addressContainer,children:[e.jsx(p.Text,{level:"3",mono:!0,className:$.address,children:X(((r=o==null?void 0:o.token)==null?void 0:r.address)||"",{boldDot:!0,numberStart:10,numberEnd:8})}),e.jsx(oe,{type:"button",size:16,onClick:d=>{var l;d.preventDefault(),d.stopPropagation(),t(((l=o==null?void 0:o.token)==null?void 0:l.address)||"")}})]})]})]},((h=o==null?void 0:o.token)==null?void 0:h.address)||a)})]})},K=({label:n,data:s,chainId:t})=>e.jsx("div",{className:$.container,children:e.jsx(cn,{nameResolverProps:{address:s,noFallback:!0,includeWalletName:!0},title:n,address:s,allowCopyAddress:!0,chainId:t,canOpenExplorer:!0})}),ln="_container_b1kx7_1",pn="_detailInfoContainer_b1kx7_6",xn="_detailRow_b1kx7_12",hn="_detailValue_b1kx7_18",un="_amountContainer_b1kx7_22",vn="_label_b1kx7_25",mn="_txHash_b1kx7_33",I={container:ln,detailInfoContainer:pn,detailRow:xn,detailValue:hn,amountContainer:un,label:vn,txHash:mn},Z=({txDirection:n,assets:s,chainId:t,currency:o})=>{var i;const a=n===F.RECEIVE;return e.jsxs("div",{className:I.detailRow,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,className:I.label,children:a?E.activity.details.youReceived:E.activity.details.youSent}),e.jsx("div",{className:I.detailValue,children:(i=s==null?void 0:s.filter(c=>Number(c==null?void 0:c.value)!==0))==null?void 0:i.map((c,r)=>e.jsx(Ie,{asset:c,showSubInfoOption:!0,chainId:t,amountTextOptions:{intent:a?m.Success:m.Danger},currency:o,className:I.amountContainer},r))})]})},jn=n=>{var f,N,g,C;const{data:s,networkInfo:t}=n,{data:o}=Te(),a=o==null?void 0:o.currency,i=_.isEmpty((f=s==null?void 0:s.decoded)==null?void 0:f.balanceDiffs)?(N=s==null?void 0:s.decoded)==null?void 0:N.activities:(g=s==null?void 0:s.decoded)==null?void 0:g.balanceDiffs,{inAssets:c,outAssets:r}=Q(i),h=s!=null&&s.txFee?ce(s.txFee):"--",d=c==null?void 0:c.filter(j=>Number(j==null?void 0:j.value)!==0),l=r==null?void 0:r.filter(j=>Number(j==null?void 0:j.value)!==0),k=((C=t==null?void 0:t.nativeToken)==null?void 0:C.symbol)??"--",S=t==null?void 0:t.displayName,b=E.activity.details;return e.jsx("div",{className:I.container,children:e.jsxs("div",{className:I.detailInfoContainer,children:[e.jsx(v,{when:!_.isEmpty(l),children:e.jsx(Z,{txDirection:F.SEND,assets:r,chainId:s==null?void 0:s.chainId,currency:a})}),e.jsx(v,{when:!_.isEmpty(d),children:e.jsx(Z,{txDirection:F.RECEIVE,assets:c,chainId:s==null?void 0:s.chainId,currency:a})}),e.jsx(v,{when:!_.isEmpty(s==null?void 0:s.txHash),children:e.jsxs("div",{className:I.detailRow,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:b.txHash}),e.jsx(Ce,{chainId:s==null?void 0:s.chainId,address:(s==null?void 0:s.txHash)||"",formatAddressOption:{boldDot:!0,numberStart:10,numberEnd:8},type:"tx",level:"3",className:I.txHash})]})}),e.jsx(v,{when:!_.isNil(s==null?void 0:s.chainId),children:e.jsxs("div",{className:I.detailRow,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:b.network}),e.jsx(p.Text,{level:"3",children:S})]})}),e.jsx(v,{when:!_.isNil(s==null?void 0:s.txFee),children:e.jsxs("div",{className:I.detailRow,children:[e.jsx(p.Text,{level:"3",intent:m.Secondary,children:b.gasFee}),e.jsxs(p.Text,{level:"3",children:[h," ",k]})]})})]})})},Rn=()=>{var f,N,g,C,j,P,L,A,y;const n=ve(T=>T.currentTx),s=(f=n==null?void 0:n.decoded)==null?void 0:f.type,t=s===x.APPROVAL,o=s===x.RECEIVE,a=s===x.SEND,i=s===x.SELF,c=a&&((C=(g=(N=n==null?void 0:n.decoded)==null?void 0:N.activities)==null?void 0:g.filter(T=>T.type===F.SEND))==null?void 0:C.length)>1,r=a||t||o||i,h=E.activity,d=((j=se(n==null?void 0:n.chainId))==null?void 0:j.chainConfig)??de,l=n==null?void 0:n.from,k=r?(A=(L=(P=n==null?void 0:n.decoded)==null?void 0:P.activities)==null?void 0:L[0])==null?void 0:A.to:c?h.multipleRecipients:n==null?void 0:n.to,S=a||o||i?h.to:t?h.for:h.details.interactedWith;if(!n)return null;const b=()=>{const T=le("tx",d==null?void 0:d.explorerUrl,n==null?void 0:n.txHash);pe(T),Y.sendEvent(J.Click,ee.Activity,xe.ViewActivityExplorer,{action_properties:{chain:n==null?void 0:n.chainId,url:T}})};return e.jsxs(H,{noBackground:!0,noFooter:!0,children:[e.jsx(H.BackableNavbar,{title:""}),e.jsxs(H.Content,{className:W.container,children:[e.jsxs("div",{className:W.header,children:[e.jsx(De,{data:n==null?void 0:n.decoded,chainInfo:d}),e.jsx(Qe,{data:n})]}),e.jsxs("div",{className:W.receiptInfoContainer,children:[e.jsx(v,{when:t,children:e.jsx(dn,{data:(y=n==null?void 0:n.decoded)==null?void 0:y.activities})}),e.jsx(v,{when:!_.isEmpty(n.from),children:e.jsx(K,{label:h.from,data:l,chainId:n==null?void 0:n.chainId})}),e.jsx(v,{when:!_.isEmpty(k),children:e.jsx(K,{label:S,data:k,chainId:n==null?void 0:n.chainId})})]}),e.jsx(jn,{data:n,networkInfo:d}),e.jsx(v,{when:!_.isEmpty(d==null?void 0:d.explorerUrl)&&!_.isEmpty(n==null?void 0:n.txHash),children:e.jsx(me,{children:e.jsx(Ee,{intent:m.Default,shape:ke.Rounded,onClick:b,fullWidth:!0,text:h.details.viewOnExplorer})})})]})]})};export{Rn as default};
