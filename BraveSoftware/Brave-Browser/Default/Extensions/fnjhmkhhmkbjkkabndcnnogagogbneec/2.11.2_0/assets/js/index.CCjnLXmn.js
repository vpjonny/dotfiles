import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{a as x,ab as me,N as ue,B as q,r as Q,ak as he,x as Z,b as K,T as Y,e as G,f as J,l as C,ae as _e,q as xe,W as Ne,al as je,ag as ge,i as ve,ad as Ce}from"./windowUtils.Ut7JS-rc.js";import{R as N,e as ye,c as Te}from"./marketplace.Dm1XWxjP.js";import{W as be,L as b,B as Se}from"./PopupLoading.D-LitESe.js";import{a as X,T as fe,W as I,C as Ee,b as ee,e as ke,m as Ae,i as Le}from"./useActiveTimeStore.C3Wei7Oz.js";import{b as Re}from"./enum.CGJbW6Yf.js";import{b as ze}from"./useNftCollectionList.0TiOOKoB.js";import{u as We}from"./useNormalizeToken.CRab6WQg.js";import{T as u,I as g,L as E,c as $e,B as P,S as V}from"./PasswordLevelLabel.rhWNhrqO.js";import{t as De}from"./Newspaper.DTSmZH_z.js";import{t as U}from"./PokerChip.BO86YiO6.js";import{t as Be,D as we}from"./DefaultNftImg.D-qRFvZ2.js";import{r as Fe}from"./index.CxJLds0B.js";import{u as Oe}from"./useNftCollectionItems.DtJWVrNT.js";import"./tiny-invariant.BHpmfUqq.js";import"./preload-helper.2LWRYvkK.js";import"./solana.CGFphaJI.js";import"./useDebouncedEffect.CslCnlPq.js";import"./token.types.DkObBlUj.js";import"./useSearchErc20Tokens.D0zoSI7L.js";const He="_container_1y8li_1",Me="_record_1y8li_7",S={container:He,record:Me},Pe=({contractAddress:i,tokenId:c,tokenStandard:a,balance:s,chainId:n})=>{var h;const t=(h=X(n))==null?void 0:h.chainConfig,r=x.home.nftDetails,p=me(a,ue.ERC1155);return e.jsxs("div",{className:S.container,children:[e.jsx(u.Label,{level:E.Medium,intent:g.Secondary,children:"DETAILS"}),e.jsx(N,{icon:De,title:r.contractAddress,children:e.jsx(fe,{address:i,className:S.record,chainId:n,level:"3"})}),e.jsx(N,{icon:U,title:r.tokenId,children:c}),e.jsx(I,{when:(t==null?void 0:t.blockchain)===q.EVM,children:e.jsx(N,{icon:U,title:r.tokenStandard,children:a==null?void 0:a.toUpperCase()})}),p?e.jsx(N,{icon:ye,title:r.ownedQuantity,children:s?`${s} ${r.items}`:r.unknownQuantity}):null,e.jsx(N,{icon:Be,title:r.network,children:e.jsxs("div",{className:S.record,children:[e.jsx(Ee,{chainConfig:t,size:ee.Size20}),t==null?void 0:t.displayName]})})]})},Ve="_container_1atkc_1",Ue="_collectionName_1atkc_10",qe="_text_1atkc_21",v={container:Ve,collectionName:Ue,text:qe},Qe=({collectionName:i,tokenName:c,collectionImg:a,className:s,chainId:n,collectionAddress:t,collectionBalance:r})=>{const p=Q();return e.jsxs("div",{className:$e(v.container,s),children:[e.jsxs("div",{className:v.collectionName,tabIndex:0,role:"button",onClick:()=>{p(`${Z.COLLECTION}/${n}/${t}`),K.sendEvent(Y.Click,G.Home,J.CollectionInfo,{action_properties:{chain_id:n,contract_address:t,collection_name:i,balance:r}})},children:[e.jsx(be,{img:a,size:ee.Size24}),e.jsx(u.Text,{level:"3",children:i||he})]}),e.jsx("div",{className:v.text,children:e.jsx(u.Heading,{level:"5",className:v.text,children:c})})]})},Ze="_container_tzhez_1",Ke="_propContainer_tzhez_4",Ye="_propWrapper_tzhez_7",Ge="_prop_tzhez_4",Je="_value_tzhez_27",m={container:Ze,propContainer:Ke,propWrapper:Ye,prop:Ge,value:Je},Xe=({propertyList:i})=>{if(C.isNil(i)||C.isEmpty(i))return e.jsxs("div",{className:m.container,children:[e.jsx(u.Label,{level:E.Medium,children:x.home.nftDetails.properties}),e.jsx("div",{className:m.propContainer,children:e.jsx("div",{className:m.propWrapper,children:e.jsx(u.Text,{level:"3",intent:g.Secondary,children:x.home.nftDetails.noProperty})})})]});const c=Object==null?void 0:Object.entries(i);return e.jsxs("div",{className:m.container,children:[e.jsx(u.Label,{level:E.Medium,children:x.home.nftDetails.properties}),e.jsx("div",{className:m.propContainer,children:e.jsx("div",{className:m.propWrapper,children:c==null?void 0:c.map(([a,s],n)=>{var t;return typeof s=="object"||s=="0"||!s?e.jsx(e.Fragment,{}):e.jsxs("div",{className:m.prop,children:[e.jsx(u.Text,{level:"3",bold:!0,className:m.value,children:(t=a==null?void 0:a.split(/(?=[A-Z])/))==null?void 0:t.join(" ")}),e.jsx(u.Text,{level:"3",intent:g.Secondary,className:m.value,children:s==null?void 0:s.toString()})]},n+a)})})})]})},Ie="_container_tytju_1",es="_img_tytju_16",f={container:Ie,img:es},ss=({imgSrc:i})=>{const[c,a]=Fe.useState(null),s=c||C.isEmpty(i);return e.jsxs("div",{className:f.container,children:[e.jsx("img",{src:i,className:f.img,width:"100%",alt:"collection_thumbnail",onLoad:()=>a(!1),onError:()=>a(!0),hidden:s}),e.jsx(I,{when:s,children:e.jsx(we,{width:200,height:200,className:f.img})})]})},ts="_container_neozt_1",as="_styledHr_neozt_5",ns="_metadata_neozt_11",rs="_footerWrapper_neozt_14",j={container:ts,styledHr:as,metadata:ns,footerWrapper:rs},os=({contractAddress:i,owners:c,chainId:a,tokenId:s})=>{var r,p,h;const{data:n}=Oe({contractAddress:i,owners:c,chainId:a}),t=(p=(r=n==null?void 0:n.pages)==null?void 0:r.map(l=>{var y;return(y=l==null?void 0:l.data)==null?void 0:y.data}))==null?void 0:p.flat();if(s)return(h=t==null?void 0:t.find(l=>(l==null?void 0:l.tokenId)===s))==null?void 0:h.quantity},ks=()=>{var A,L,R,z,W,$,D,B,w,F;const i=Q(),{state:c}=_e(),a=ke(),s=c==null?void 0:c.nftInfo,{chainId:n,address:t,tokenId:r}=xe(),{accountInfo:p}=Ae(),h=((L=(A=p==null?void 0:p.data)==null?void 0:A.currentAccount)==null?void 0:L.type)===Ne.ADDRESS,l=X(Number(n)),k=Le(Number(n))===q.SOLANA,{collection:o,isLoading:se}=ze(t,a==null?void 0:a.addresses),{setChainId:te,setCollectionInfo:ae,setMintAddress:ne}=We(),re=!o&&!se,oe=os({contractAddress:t,owners:a==null?void 0:a.addresses,chainId:parseInt(n),tokenId:r||""}),ie=((R=s==null?void 0:s.metadata)==null?void 0:R.tokenImage)||((z=s==null?void 0:s.metadata)==null?void 0:z.tokenVideo),ce=(W=s==null?void 0:s.metadata)==null?void 0:W.name;if(re)return null;const le=()=>{const d=Te({contractAddress:t,tokenId:r,chainId:parseInt(n)});Re.tabs.create({url:d})},de=()=>{ae(t,r),te(parseInt(n)),s!=null&&s.mintAddress&&ne(s==null?void 0:s.mintAddress),i(`${Z.TRANSFER_NFT}/${Ce.SELECT_RECIPIENT}`),K.sendEvent(Y.Click,G.Home,J.TransferNft,{action_properties:{type:o==null?void 0:o.standard,token_id:k?t:r,nft_info:o,blockchain:k?"solana":"evm"}})};let T;return($=l==null?void 0:l.chainConfig)!=null&&$.isCustom||(D=s==null?void 0:s.metadata)!=null&&D.traits&&((B=s==null?void 0:s.metadata)==null||B.traits.forEach(d=>{var O,H;const pe=T||{};if(d.trait_type!==null&&d.value!==null){let _=d.value;if((d.trait_type==="Renewal Fee"||d.trait_type==="Domain Price")&&t.toLowerCase()===je&&typeof Number(d.value)=="number"){const M=ge(d.value,18);_="$"+(C.isNil(M)?"--":(H=(O=parseFloat(M))==null?void 0:O.toFixed(2))==null?void 0:H.toString())}d.display_type==="bool"&&(_=d.value==="true"?"Yes":"No"),d.display_type==="date"&&(_=new Date(d.value).toLocaleDateString()),T={...pe,[d.trait_type.toString()]:_==null?void 0:_.toString()}}})),e.jsxs(b,{className:j.container,noFooter:!0,noBackground:!0,children:[e.jsx(b.BackableNavbar,{noBackground:!0,title:""}),e.jsxs(b.Content,{children:[e.jsx(ss,{imgSrc:ie}),e.jsx(Qe,{collectionAddress:t,chainId:n,collectionName:o==null?void 0:o.name,tokenName:ce,collectionImg:o==null?void 0:o.logo,className:j.metadata,collectionBalance:(w=o==null?void 0:o.itemAmount)==null?void 0:w.toString()}),e.jsx("div",{className:j.styledHr}),e.jsx(Pe,{contractAddress:t,tokenId:r||"",tokenStandard:o==null?void 0:o.standard,balance:oe,chainId:Number(n)}),e.jsx("div",{className:j.styledHr}),!((F=l==null?void 0:l.chainConfig)!=null&&F.isCustom)&&e.jsx(Xe,{propertyList:T}),e.jsxs(Se,{className:j.footerWrapper,children:[!h&&e.jsx(P,{text:x.common.send,fullWidth:!0,shape:V.Rounded,intent:g.Primary,onClick:de}),ve(parseInt(n))&&e.jsx(P,{text:x.home.collectionList.viewOnMarketplace,fullWidth:!0,shape:V.Rounded,intent:g.Secondary,onClick:le})]})]})]})};export{ks as default};
