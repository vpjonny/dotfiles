import{as as E,aF as m,aG as N,aH as R,aI as v}from"./useActiveTimeStore.C3Wei7Oz.js";import{R as b,l}from"./windowUtils.Ut7JS-rc.js";import{aK as p,aL as F}from"./PopupLoading.D-LitESe.js";var k=class extends E{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,r){super.setOptions({...e,behavior:m()},r)}getOptimisticResult(e){return e.behavior=m(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,r){var n,x;const{state:i}=e,h=super.createResult(e,r),{isFetching:u,isRefetching:P,isError:f,isRefetchError:g}=h,a=(x=(n=i.fetchMeta)==null?void 0:n.fetchMore)==null?void 0:x.direction,c=f&&a==="forward",t=u&&a==="forward",s=f&&a==="backward",o=u&&a==="backward";return{...h,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:R(r,i.data),hasPreviousPage:N(r,i.data),isFetchNextPageError:c,isFetchingNextPage:t,isFetchPreviousPageError:s,isFetchingPreviousPage:o,isRefetchError:g&&!c&&!s,isRefetching:P&&!t&&!o}}};function w(e,r){return v(e,k)}const O=(e,r)=>{var c;const{data:i,isLoading:h,isFetching:u,fetchNextPage:P,hasNextPage:f,isFetchingNextPage:g}=w({queryKey:[b.ERC20_TOKEN_SEARCH,r,e],staleTime:0,queryFn:async({pageParam:t})=>{var o,d,n;const s=l.isEmpty(r)?await p({chainId:e,cursor:t}):await F({query:r,chainId:e,cursor:t});return{items:((o=s==null?void 0:s.data)==null?void 0:o.items)??[],nextCursor:(n=(d=s==null?void 0:s.data)==null?void 0:d.paging)==null?void 0:n.cursor}},initialPageParam:"",getNextPageParam:t=>t==null?void 0:t.nextCursor});return{searchTokenList:((c=i==null?void 0:i.pages)==null?void 0:c.flatMap(t=>t==null?void 0:t.items))||[],isLoading:h,isFetching:u,fetchNextPage:P,hasNextPage:f,isFetchingNextPage:g}};export{O as a,w as u};
