import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{L as D,i as K,O as P,Q as W}from"./PopupLoading.D-LitESe.js";import{r as v}from"./index.CxJLds0B.js";import{L as z,e as F,I as Q,K as V,B as Z,p as $,u as q,W as y,a as G,b as w,C as J}from"./useActiveTimeStore.C3Wei7Oz.js";import{u as X}from"./useNftCollectionList.0TiOOKoB.js";import{u as Y}from"./useNftCollectionItems.DtJWVrNT.js";import{r as O,a as f,x as B,l as M,z as c}from"./windowUtils.Ut7JS-rc.js";import{t as l,U as ss,C as es}from"./ConfirmRemoveToken.jRKaKLZd.js";import{E as as}from"./EmptyState.B5_-rwyr.js";import{T as I,I as H,S as ns}from"./PasswordLevelLabel.rhWNhrqO.js";import{a as ts}from"./Erc20SelectTokenOnRampPage.CZiohm3T.js";import{a as rs}from"./SummaryRow.DvX50DLf.js";import{S as ds}from"./index.C702uFBM.js";import"./solana.CGFphaJI.js";import"./enum.CGJbW6Yf.js";import"./tiny-invariant.BHpmfUqq.js";import"./preload-helper.2LWRYvkK.js";import"./useDebouncedEffect.CslCnlPq.js";import"./useSearchErc20Tokens.D0zoSI7L.js";import"./Network.CvcxyDcT.js";const os="_recordContainer_14etp_1",ms="_titleContainer_14etp_9",is="_tokenName_14etp_13",ps="_tokenRecord_14etp_27",hs="_container_14etp_36",us="_searchInput_14etp_51",fs="_tokenList_14etp_57",Cs="_emptyState_14etp_64",xs="_addTokenContainer_14etp_71",ks="_addToken_14etp_71",r={recordContainer:os,titleContainer:ms,tokenName:is,tokenRecord:ps,container:hs,searchInput:us,tokenList:fs,emptyState:Cs,addTokenContainer:xs,addToken:ks},U=s=>{var o;return((o=(s==null?void 0:s.name)??(s==null?void 0:s.collectionAddress))==null?void 0:o.toLowerCase())+(s==null?void 0:s.chainId)},_s=({collection:s,handleNext:o,checked:t,owners:x,editing:n,onDelete:k})=>{var g,i,N;const h=(g=G(s==null?void 0:s.chainId))==null?void 0:g.chainConfig,[C,m]=v.useState(!1),[A,j]=v.useState(!1),L=()=>{s!=null&&s.isCustom?j(!0):m(!0)},{data:_,isLoading:b}=Y({owners:x,contractAddress:s==null?void 0:s.collectionAddress,chainId:s==null?void 0:s.chainId,limit:4,balance:s==null?void 0:s.itemAmount}),S=(N=(i=_==null?void 0:_.pages)==null?void 0:i.map(p=>{var a;return(a=p==null?void 0:p.data)==null?void 0:a.data}))==null?void 0:N.flat();return!(S!=null&&S.length)&&!b?null:e.jsxs("div",{className:r.tokenRecord,children:[e.jsxs("div",{className:r.recordContainer,children:[e.jsx(W,{backAvtSrc:s==null?void 0:s.logo,frontAvtSrc:e.jsx(J,{chainConfig:h,size:w.Size20}),size:w.Size36}),e.jsx("div",{className:r.titleContainer,children:e.jsx(I.Text,{level:"3",intent:H.Secondary,className:r.tokenName,children:(s==null?void 0:s.name)??c(s==null?void 0:s.collectionAddress)})})]}),e.jsx(y,{when:!n,children:e.jsx(ds,{checked:t,onChange:()=>o(s)})}),e.jsx(y,{when:n,children:e.jsx(l,{color:"#f6515e",opacity:s!=null&&s.isCustom?1:.35,onClick:L})}),e.jsx(ss,{visible:C,onClose:()=>m(!1),isNft:!0}),e.jsx(es,{visible:A,isNft:!0,onClose:p=>{j(!1),p&&k(s)}})]})},Ss=({filter:s,editing:o,owners:t})=>{var p;const x=O(),n=F(),k=$(),{data:h,setHiddenTokens:C}=q(),{data:m,isLoading:A,refetchNftListOnly:j}=X(t),{removeCustomNft:L}=K(),{onlySupportSolana:_,onlyActiveSolana:b}=z(),S=a=>{var u,T,E,R;const d=U(a);(a==null?void 0:a.chainId)===k?C((T=(u=n==null?void 0:n.chains)==null?void 0:u.solana)==null?void 0:T.address,d):C((R=(E=n==null?void 0:n.chains)==null?void 0:E.evm)==null?void 0:R.address,d)},g=async a=>{t.forEach(async d=>{await L(d,a.collectionAddress,a.chainId)}),await j()};if(A)return e.jsx(P,{});const i=(p=m==null?void 0:m.data)==null?void 0:p.filter(a=>{var d,u;return!s||((u=(d=a==null?void 0:a.name)==null?void 0:d.toLowerCase())==null?void 0:u.includes(s==null?void 0:s.toLowerCase()))}),N=a=>{const d=U(a);return t.some(u=>{var T;return(T=h==null?void 0:h.hiddenTokensList[u])==null?void 0:T.includes(d)})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{when:!M.isEmpty(i),children:i==null?void 0:i.map(a=>e.jsx(_s,{collection:a,checked:!N(a),owners:t,handleNext:S,editing:o,onDelete:g},(a==null?void 0:a.collectionAddress)+(a==null?void 0:a.name)))}),e.jsxs(y,{when:M.isEmpty(i),children:[e.jsx(as,{message:f.common.noResultFound,icon:"ðŸ¥²",className:r.emptyState}),e.jsxs(I.Text,{level:"3",className:r.addTokenContainer,hidden:_||b,children:[f.manageTokens.addNftHint,e.jsx(I.Text,{level:"3",className:r.addToken,onClick:()=>x(B.ADD_CUSTOM_NFT),children:f.manageTokens.addNft})]})]})]})},Hs=()=>{const[s,o]=v.useState(""),[t,x]=v.useState(!1),{onlySupportSolana:n,onlyActiveSolana:k}=z(),h=O(),C=F();return e.jsxs(D,{noBackground:!0,noFooter:!0,children:[e.jsx(D.BackableNavbar,{title:f.manageTokens.btnManageNfts,suffixComponent:e.jsx(I.Text,{level:"2",bold:!0,intent:H.Info,onClick:()=>{x(!t)},children:t?f.common.done:f.common.edit})}),e.jsx(D.Content,{noPadding:!0,children:e.jsxs("div",{className:r.container,children:[e.jsxs("div",{className:r.searchInput,children:[e.jsx(Q,{placeholder:f.common.search,prefixIcon:e.jsx(ts,{}),onChange:m=>o(m.target.value)}),e.jsx(V,{icon:rs,size:Z.Default,shape:ns.Rounded,onClick:()=>h(B.ADD_CUSTOM_NFT),hidden:n||k})]}),e.jsx("div",{className:r.tokenList,children:e.jsx(Ss,{filter:s,editing:t,owners:C.addresses})})]})})]})};export{Hs as default,U as generateCollectionKey};
