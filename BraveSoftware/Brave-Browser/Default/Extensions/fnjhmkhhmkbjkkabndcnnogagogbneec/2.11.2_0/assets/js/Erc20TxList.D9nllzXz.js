import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{R as I}from"./index.CxJLds0B.js";import{B,l as u,R as F,q as O,a as Q}from"./windowUtils.Ut7JS-rc.js";import{u as W,s as Y,a as q,L as $,E as z,A as K}from"./LocalActivityWarning.Bm0tREdz.js";import{u as M}from"./useTempStore.C8dvVNTz.js";import{u as S,$ as U,e as V,a as G,W as L}from"./useActiveTimeStore.C3Wei7Oz.js";import{u as H}from"./useDebouncedEffect.CslCnlPq.js";import{L as d}from"./PopupLoading.D-LitESe.js";const J=({tokenAddress:o,chainId:i,emptyStateClassName:E})=>{var y,g,x,p,m,A;const{tempStoreData:t,setActivityChanged:C}=M(),{data:c}=S(),k=U(),a=V(),l=(y=G(i))==null?void 0:y.chainConfig,f=(l==null?void 0:l.blockchain)===B.SOLANA?(g=a==null?void 0:a.chains.solana)==null?void 0:g.address:(x=a==null?void 0:a.chains.evm)==null?void 0:x.address,R=c==null?void 0:c.currency,{data:s,fetchNextPage:b,hasNextPage:P,isFetchingNextPage:T,isFetching:w,refetch:N}=W({address:f,chainId:i,tokenAddress:o??""}),r=((m=(p=s==null?void 0:s.pages)==null?void 0:p.map(n=>n==null?void 0:n.result))==null?void 0:m.flat())??[],h=(A=s==null?void 0:s.pages)==null?void 0:A.find(n=>n==null?void 0:n.havePending),_=w&&!T&&!(h!=null&&h.havePending)&&(!(t!=null&&t.lastActivityChanged)||u.isEmpty(r));return H(()=>{(async()=>{var j,v;(t==null?void 0:t.lastActivityChanged)>0&&(window.scrollTo({top:0,left:0,behavior:"instant"}),k.setQueryData([F.ALL_ACTIVITY,f,o??"",i],{pages:((j=s==null?void 0:s.pages)==null?void 0:j.slice(0,1))??[],pageParams:((v=s==null?void 0:s.pageParams)==null?void 0:v.slice(0,1))??[]}),await N(),await C(0))})()},[t==null?void 0:t.lastActivityChanged],50),_?e.jsx("div",{className:Y.txList,children:e.jsx(q,{})}):e.jsxs(I.Fragment,{children:[e.jsx($,{chainId:i}),e.jsx(L,{when:u.isEmpty(r),children:e.jsx(z,{className:E})}),e.jsx(L,{when:!u.isEmpty(r),children:e.jsx(K,{txList:r,hasNextPage:P,fetchNextPage:b,currency:R})})]})},X=()=>{const{chainId:o,address:i}=O();return e.jsxs(d,{noBackground:!0,noFooter:!0,children:[e.jsx(d.BackableNavbar,{title:Q.tokenDetails.activity,noBackground:!0}),e.jsx(d.Content,{children:e.jsx(J,{chainId:parseInt(o),tokenAddress:i})})]})},os=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{J as A,os as E};
