import{j as t}from"./useTriggerLoadNext.KJIKMCqU.js";import{d as se,a as ne,ah as ae,S as F,P as ie,e as J,c as le,L as U,ai as oe}from"./PopupLoading.D-LitESe.js";import{r as T}from"./index.CxJLds0B.js";import{a as d,r as Q,x as j,z as ee,m as re,q as de,W as y,b as L,T as K,e as G,f as H,X as M}from"./windowUtils.Ut7JS-rc.js";import{G as ce}from"./GroupFooterDialog.DIG6SS89.js";import{m as ge,B as X,a2 as q,W as P,t as _e,a3 as me,a4 as he,a5 as ve,N as xe,A as ue,k as be}from"./useActiveTimeStore.C3Wei7Oz.js";import{u as pe,R as je}from"./RenameDialog.BME1WkSm.js";import{C as te}from"./CopyAddress.D-4exf3T.js";import{T as n,L as fe,B as R,f as Z,S as C,I as z}from"./PasswordLevelLabel.rhWNhrqO.js";import"./enum.CGJbW6Yf.js";import"./preload-helper.2LWRYvkK.js";import"./useDebouncedEffect.CslCnlPq.js";import"./solana.CGFphaJI.js";import"./tiny-invariant.BHpmfUqq.js";import"./CustomPopover.BEpkv9NF.js";import"./Copy.ztp0JTbo.js";const Ee="_body_1hdi7_1",Ae="_avatar_1hdi7_7",Re="_settingGroup_1hdi7_15",Ce="_settingItem_1hdi7_19",we="_addressContainer_1hdi7_28",A={body:Ee,avatar:Ae,settingGroup:Re,settingItem:Ce,addressContainer:we},We="_container_vva5g_1",Ne="_nicknameWrapper_vva5g_5",ye="_manageWallet_vva5g_11",Se="_manageWalletText_vva5g_17",Ie="_newVersionContainer_vva5g_20",Te="_newVersionIcon_vva5g_29",Pe="_boxContainer_vva5g_39",ke="_title_vva5g_44",Ve="_content_vva5g_47",De="_dashboard_vva5g_51",Oe="_signoutText_vva5g_55",$e="_signOutButton_vva5g_58",Be="_dialog_vva5g_62",Le="_title_container_vva5g_66",Ke="_container_icon_warning_vva5g_75",Ge="_icon_warning_vva5g_85",He="_dialog_content_vva5g_88",Me="_footer_vva5g_92",Ye="_btn_vva5g_98",ze="_addressContainer_vva5g_102",s={container:We,nicknameWrapper:Ne,manageWallet:ye,manageWalletText:Se,newVersionContainer:Ie,newVersionIcon:Te,boxContainer:Pe,title:ke,content:Ve,dashboard:De,signoutText:Oe,signOutButton:$e,dialog:Be,title_container:Le,container_icon_warning:Ke,icon_warning:Ge,dialog_content:He,footer:Me,btn:Ye,addressContainer:ze},Ue=!1,Fe=l=>{var $;const{account:a,walletId:c}=l,{editAddress:r,signOutMPCAccount:f,signOutPasswordlessAccount:i}=d,[w,o]=T.useState(!1),{removeWallet:u,accountInfo:E,setCurrentAccount:S}=ge(),{theOnlyWallet:e}=pe(c),b=Q(),p=($=E==null?void 0:E.data)==null?void 0:$.currentAccount,{allWalletSortedArray:k}=se({includeViewOnly:!0}),{setIsLoading:V}=ne(h=>h),{keylessWallet:_}=ae(),W=!(_!=null&&_.isPasswordless()),m=W?f:i,I=()=>{b(j.CONFIRM_RESET)},D=async()=>{var h;if(e){I();return}if(c){if(V(!0),await u(c),(p==null?void 0:p.walletId)===c){const N=Object.values(k).find(g=>(g==null?void 0:g.walletId)!==c),v=(h=Object.values((N==null?void 0:N.accounts)??{}).sort((g,B)=>(g.sortedIndex??0)-(B.sortedIndex??0)).filter(g=>g.address!==(p==null?void 0:p.address)))==null?void 0:h[0];await S(v)}setTimeout(()=>{V(!1)},500),o(!1),b(j.HOME)}},O=()=>{open(`${re.ssoUrl}/dashboard/wallet`)};return t.jsxs("div",{className:s.container,children:[t.jsxs("div",{className:s.nicknameWrapper,children:[t.jsx(n.Label,{level:fe.Small,children:r.createdWith.toUpperCase()}),t.jsx(n.Text,{level:"2",bold:!0,children:(a==null?void 0:a.nickname)??""})]}),t.jsx(R,{className:s.manageWallet,rightIcon:()=>t.jsx(q,{className:s.manageWalletText}),text:t.jsx(n.Text,{level:"3",bold:!0,className:s.manageWalletText,children:r.manageAccount}),size:X.Small,shape:C.Rounded,variant:Z.Plain,onClick:O}),t.jsx(P,{when:Ue,children:t.jsxs("div",{className:s.newVersionContainer,children:[t.jsx("div",{className:s.newVersionIcon,children:"ðŸŽ‰"}),t.jsxs("div",{className:s.boxContainer,children:[t.jsx(n.Text,{level:"3",bold:!0,className:s.title,children:r.newVersion.title}),t.jsx(n.Text,{level:"3",className:s.content,children:r.newVersion.description}),t.jsx(R,{className:s.dashboard,rightIcon:q,text:t.jsx(n.Text,{level:"3",bold:!0,children:r.newVersion.action}),size:X.Small,shape:C.Rounded,onClick:O})]})]})}),t.jsx(F,{settingList:[{title:r.walletAddress,extraInfo:t.jsxs("div",{className:s.addressContainer,children:[t.jsx(n.Text,{level:"3",color:"gray",bold:!0,children:ee(a==null?void 0:a.address,{boldDot:!0})}),t.jsx(te,{content:a==null?void 0:a.address})]}),noIndicator:!0},W?{title:r.showRecoveryPassword,href:`${j.REVEAL_RECOVERY_PASSWORD}/${c}`}:null].filter(h=>!!h)}),t.jsx(R,{shape:C.Rounded,variant:Z.Plain,onClick:()=>o(!0),fullWidth:!0,className:s.signOutButton,text:t.jsx(n.Text,{level:"2",bold:!0,className:s.signoutText,children:r.signoutAccount})}),t.jsx(ie,{className:s.dialog,visible:w,title:t.jsxs("div",{className:s.title_container,children:[t.jsx(P,{when:W,children:t.jsx("div",{className:s.container_icon_warning,children:t.jsx(_e,{size:48,className:s.icon_warning})})}),t.jsx(n.Heading,{level:"5",children:m.title})]}),content:t.jsx(n.Text,{level:"3",className:s.dialog_content,children:m.content}),footer:W?t.jsx(ce,{primaryBtn:{title:m.backupBtn,handleClick:()=>b(`${j.REVEAL_RECOVERY_PASSWORD}/${c}`)},secondaryBtn:{title:m.signNow,handleClick:D}}):t.jsxs("div",{className:s.footer,children:[t.jsx(R,{className:s.btn,text:m.backupBtn,shape:C.Rounded,intent:z.Secondary,onClick:()=>o(!1)}),t.jsx(R,{className:s.btn,text:m.signNow,shape:C.Rounded,intent:z.Primary,onClick:D})]}),onClose:()=>{o(!1)}})]})},Xe="_bottomSheet_u0j57_1",qe="_icon_u0j57_5",Ze="_content_u0j57_21",Je="_warnings_u0j57_25",Qe="_buttons_u0j57_30",et="_btn_u0j57_35",x={bottomSheet:Xe,icon:qe,content:Ze,warnings:Je,buttons:Qe,btn:et};var Y=(l=>(l[l.PRIVATE_KEY=0]="PRIVATE_KEY",l[l.SEED_PHRASE=1]="SEED_PHRASE",l))(Y||{});const tt=l=>{const{type:a,onVerified:c,open:r,onClose:f}=l,{reveal:i}=d,w=()=>a===1?{title:i.recoveryPhrase.title,content:i.recoveryPhrase.pleaseRead,firstWarning:i.recoveryPhrase.firstWarning,secondWarning:i.recoveryPhrase.secondWarning,thirdWarning:i.recoveryPhrase.thirdWarning}:{title:i.privateKey.title,content:i.privateKey.pleaseRead,firstWarning:i.privateKey.firstWarning,secondWarning:i.privateKey.secondWarning,thirdWarning:i.privateKey.thirdWarning},o=w();return t.jsxs(J,{open:r,onClose:f,className:x.bottomSheet,footer:t.jsxs("div",{className:x.buttons,children:[t.jsx(R,{className:x.btn,text:d.common.cancel,shape:C.Rounded,intent:z.Default,onClick:f,fullWidth:!0}),t.jsx(R,{className:x.btn,text:d.common.proceed,shape:C.Rounded,intent:z.Primary,onClick:c,fullWidth:!0})]}),children:[t.jsx("div",{className:x.icon,children:t.jsx(me,{size:36})}),t.jsx(n.Heading,{level:"5",className:x.title,children:o.title}),t.jsx(n.Text,{level:"3",className:x.content,color:"gray",children:w().content}),t.jsx("div",{className:x.warnings,children:[o.firstWarning,o.secondWarning,o.thirdWarning].map((u,E)=>t.jsx(n.Text,{level:"2",className:x.warningText,children:u},E))})]})},bt=()=>{var h,N;const{accountId:l}=de(),a=le(),c=he(),[r,f]=T.useState(!1),[i,w]=T.useState(!1),[o,u]=T.useState(null),[E,S]=T.useState(!1),e=ve(l),b=Q(),p=v=>{w(v)},k=(e==null?void 0:e.walletType)===y.MPC,V=(e==null?void 0:e.walletType)===y.PRIVATE_KEY,_=(e==null?void 0:e.walletType)===y.ADDRESS,W=(e==null?void 0:e.walletType)===y.SEED_PHRASE,m=(e==null?void 0:e.walletType)===y.LEDGER||(e==null?void 0:e.walletType)===y.TREZOR,I=a==null?void 0:a.filter(v=>{var g,B;return(B=(g=e==null?void 0:e.chains)==null?void 0:g[v.chainConfig.blockchain])==null?void 0:B.address}).length,D=v=>{f(v),L.sendEvent(K.Click,G.Wallet,H.EditWallet+" - "+M.RenameAddress)},O=[{title:d.editAddress.accountName,extraInfo:t.jsx(xe,{address:e==null?void 0:e.baseAddress,handleSetIsRNSName:p,fallbackName:e==null?void 0:e.nickname,color:"gray",level:"3"}),callback:()=>{i||(f(!0),L.sendEvent(K.Click,G.Wallet,H.EditWallet+" - "+M.RenameAddress))},noIndicator:i},{title:d.editAddress.addresses,extraInfo:t.jsx(n.Text,{level:"3",color:"gray",children:I}),callback:()=>b(`${j.RECEIVE}/${l}`),hidden:_?!0:I===1},{title:d.editAddress.address,extraInfo:t.jsxs("div",{className:A.addressContainer,children:[t.jsx(n.Text,{level:"3",color:"gray",children:ee(e==null?void 0:e.baseAddress,{boldDot:!0})}),t.jsx(te,{content:e==null?void 0:e.baseAddress})]}),noIndicator:!0,hidden:!_&&I>1},{title:d.editAddress.addressIndex,extraInfo:t.jsxs(n.Text,{level:"3",color:"gray",children:["#",e==null?void 0:e.baseAccount.index]}),noIndicator:!0,hidden:_||V}],$=[{title:(h=c(e==null?void 0:e.baseAccount.walletId))==null?void 0:h.nickname,noIndicator:!0},{title:d.editAddress.showPrivateKey,callback:()=>{u(Y.PRIVATE_KEY),L.sendEvent(K.Click,G.Wallet,H.EditWallet+" - "+M.RevealPrivateKey)},hidden:m&&_},{title:d.editAddress.showSeedPhrase,callback:()=>{u(Y.SEED_PHRASE),L.sendEvent(K.Click,G.Wallet,H.EditWallet+" - "+M.RevealSeedPhrase)},hidden:!W}];return e?t.jsxs(U,{className:"",noFooter:!0,noBackground:!0,children:[t.jsx(U.BackableNavbar,{noBackground:!0,title:d.editAddress.title}),t.jsxs(U.Content,{className:A.body,children:[t.jsx(ue,{className:A.avatar,size:be.XXL,seed:e==null?void 0:e.baseAddress}),t.jsx(P,{when:k,children:t.jsx(Fe,{account:e==null?void 0:e.baseAccount,walletId:(N=e==null?void 0:e.baseAccount)==null?void 0:N.walletId})}),t.jsxs(P,{when:!k,children:[t.jsx(F,{className:A.settingGroup,settingList:O,itemClassName:A.settingItem,hideDivider:!0}),t.jsx(P,{when:!m&&!_,children:t.jsx(F,{className:A.settingGroup,settingList:$,itemClassName:A.settingItem,hideDivider:!0})})]}),t.jsx(je,{account:e==null?void 0:e.baseAccount,visible:r,handleDialogVisible:D}),t.jsx(J,{visible:E,title:d.editAddress.selectAccount,onClose:()=>S(!1),children:t.jsx(oe,{accountId:l,canCopy:!1,qrcode:!1,onClickItem:v=>{S(!1),b(`${j.REVEAL_PRIVATE_KEY}/${v.blockchain}/${l}`)}})}),t.jsx(tt,{type:o,onClose:()=>u(null),open:o!==null,onVerified:()=>{u(null),o===Y.PRIVATE_KEY?(e==null?void 0:e.blockchains.length)>1?S(!0):b(`${j.REVEAL_PRIVATE_KEY}/${e==null?void 0:e.baseAccount.blockchain}/${e==null?void 0:e.id}`):b(`${j.REVEAL_RECOVERY_SEEDPHRASE}/${e==null?void 0:e.baseAccount.walletId}`)}})]})]}):null};export{bt as default};
