import{j as a,u as U}from"./useTriggerLoadNext.KJIKMCqU.js";import{W as $,a as W,C as P,b as V,e as q,O as z,Q as D}from"./useActiveTimeStore.C3Wei7Oz.js";import{a as M,z as Q,B as K,r as v,l as A,b as N,T as m,e as y,f as L,x as O,i as Y,q as Z,ae as G}from"./windowUtils.Ut7JS-rc.js";import{T as J,B as X,L as k}from"./PopupLoading.D-LitESe.js";import{D as R,t as I}from"./DefaultNftImg.D-qRFvZ2.js";import{r as aa}from"./index.CxJLds0B.js";import{c as p,T as sa,L as ra,d as F,B as ta,I as na}from"./PasswordLevelLabel.rhWNhrqO.js";import{R as b,e as ea,c as oa}from"./marketplace.Dm1XWxjP.js";import{t as ca}from"./PokerChip.BO86YiO6.js";import{u as da}from"./useNftCollectionItems.DtJWVrNT.js";import{b as ia}from"./enum.CGJbW6Yf.js";import"./tiny-invariant.BHpmfUqq.js";import"./preload-helper.2LWRYvkK.js";import"./useDebouncedEffect.CslCnlPq.js";import"./solana.CGFphaJI.js";import"./useNftCollectionList.0TiOOKoB.js";import"./useSearchErc20Tokens.D0zoSI7L.js";const la="_container_1gv60_1",ua="_background_1gv60_9",ga="_bgWrapper_1gv60_14",pa="_avatar_1gv60_21",_={container:la,background:ua,bgWrapper:ga,avatar:pa},_a=({collectionInfo:r})=>{const[t,o]=aa.useState(null),e=a.jsx(R,{width:72,height:72}),d=t===!0;return a.jsxs("div",{className:_.container,children:[a.jsx("div",{className:_.background}),a.jsx("div",{className:_.bgWrapper,children:a.jsx("img",{src:r==null?void 0:r.banner,alt:r==null?void 0:r.banner,width:"100%",height:400})}),a.jsxs("div",{className:_.avatar,children:[a.jsx("img",{src:r==null?void 0:r.logo,alt:r==null?void 0:r.logo,width:96,onLoad:()=>o(!1),onError:()=>o(!0),hidden:d}),a.jsx($,{when:d,children:e})]})]})},ha="_container_19va7_1",xa="_network_19va7_7",B={container:ha,network:xa},ka=({className:r,collectionName:t,balance:o,tokenStandard:e,chainId:d,collectionAddress:n})=>{var u;const i=o||0,c=(u=W(d))==null?void 0:u.chainConfig,l=M.home.collectionList;return a.jsxs("div",{className:p(B.container,r),children:[a.jsxs(sa.Label,{level:ra.Medium,children:[(t==null?void 0:t.toUpperCase())||Q(n)," "]}),a.jsxs(b,{title:l.owned,icon:ea,children:[o?i:"--"," ",parseInt(i)>1?l.items:l.item]}),a.jsx($,{when:(c==null?void 0:c.blockchain)===K.EVM,children:a.jsx(b,{title:l.tokenStandard,icon:ca,children:e==null?void 0:e.toUpperCase()})}),a.jsx(b,{title:l.network,icon:I,children:a.jsxs("div",{className:B.network,children:[a.jsx(P,{chainConfig:c,size:V.Size20}),c==null?void 0:c.displayName]})})]})},ba="_card_xxvsp_1",ja="_quantity_xxvsp_15",S={card:ba,quantity:ja},va=({imgUrl:r,children:t,href:o,className:e,tokenId:d,callback:n,nftAddress:i,quantity:c})=>{const l=v(),u=()=>{N.sendEvent(m.Click,y.Home,L.SelectNFTDetail,{action_properties:{token_id:d}}),A.isUndefined(i)&&n?n():o&&l(o)};return a.jsxs("div",{role:"button",tabIndex:0,className:p(S.card,e),onClick:u,children:[a.jsxs("div",{className:S.quantity,hidden:A.isNil(c),children:["x",c]}),t||a.jsx(J,{src:r,alt:"",width:"100%",style:{objectFit:"contain"},placeholderImage:a.jsx(R,{})})]})},Na="_container_1enit_1",j={container:Na},ma=12,ya=()=>a.jsx("div",{className:p(j.container),children:[...Array(ma)].map((r,t)=>a.jsx(F.Skeleton,{height:160,width:160,borderRadius:12},t))}),La=({owners:r,contractAddress:t,chainId:o,className:e})=>{var C,T;const{data:d,hasNextPage:n,isLoading:i,isError:c,fetchNextPage:l}=da({owners:r,contractAddress:t,chainId:o}),u=v(),x=(T=(C=d==null?void 0:d.pages)==null?void 0:C.map(s=>{var g;return(g=s==null?void 0:s.data)==null?void 0:g.data}))==null?void 0:T.flat(),{endOfListRef:H}=U(()=>{n&&l(),N.sendEvent(m.Scroll,y.Home,L.ScrollNft,{action_properties:{chain_id:o,contract_address:t}})});return i?a.jsx(ya,{}):c?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:p(j.container,e),children:x==null?void 0:x.map(s=>{var g,f,E,w;return a.jsx(va,{imgUrl:((g=s==null?void 0:s.metadata)==null?void 0:g.image)||((f=s==null?void 0:s.metadata)==null?void 0:f.tokenImage),nftId:((E=s==null?void 0:s.metadata)==null?void 0:E.id)||Number(s==null?void 0:s.tokenId),tokenId:s==null?void 0:s.tokenId,quantity:s.tokenStandard==="erc1155"?s.quantity:void 0,callback:()=>{u(`${O.COLLECTION}/${o}/${t}/${(s==null?void 0:s.tokenId)??s.contractAddress}`,{state:{nftInfo:s}})}},((w=s==null?void 0:s.metadata)==null?void 0:w.id)||(s==null?void 0:s.tokenId))})}),n&&a.jsx("div",{ref:H,className:p(j.container,e),children:a.jsx(F.Skeleton,{height:160,width:160,borderRadius:12})})]})},Ca=({collectionAddress:r,chainId:t})=>{const o=()=>{const e=oa({contractAddress:r,chainId:t});ia.tabs.create({url:e}),N.sendEvent(m.Click,y.Home,L.ViewNftMarket,{action_properties:{url:e}})};return Y(t)?a.jsx(X,{children:a.jsx(ta,{text:M.home.collectionList.viewOnMarketplace,intent:na.Primary,fullWidth:!0,onClick:o})}):null},Ta="_container_ygikb_1",fa="_body_ygikb_4",Ea="_metadata_ygikb_8",wa="_nftList_ygikb_11",h={container:Ta,body:fa,metadata:Ea,nftList:wa},Ka=()=>{var i,c;const{chainId:r,address:t}=Z(),o=q(),{state:e}=G(),d=v(),n=(e==null?void 0:e.collectionInfo)??{};return n?a.jsxs(k,{className:h.container,noFooter:!0,noBackground:!0,children:[a.jsx(k.BackableNavbar,{noBackground:!0,title:"",callback:()=>{d(`${O.HOME}?${z.ACTIVE_TAB}=${D.NFT}`)}}),a.jsxs(k.Content,{className:h.body,children:[a.jsx(_a,{collectionInfo:n}),a.jsx(ka,{collectionName:n==null?void 0:n.name,tokenStandard:(i=n==null?void 0:n.standard)==null?void 0:i.toUpperCase(),chainId:Number(r),balance:(c=n==null?void 0:n.itemAmount)==null?void 0:c.toString(),className:h.metadata,collectionAddress:t}),a.jsx(La,{chainId:Number(r),owners:o.addresses,contractAddress:t,className:h.nftList}),a.jsx(Ca,{collectionAddress:t,chainId:Number(r)})]})]}):null};export{Ka as default};
