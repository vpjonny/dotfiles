import{i as y,e as b,d as A}from"./useActiveTimeStore.C3Wei7Oz.js";import{R as k,B as P}from"./windowUtils.Ut7JS-rc.js";import{u as h}from"./useTransferAdapter.DBEESo_0.js";import{u as x,a as G}from"./useDebouncedValue.BgjK-DBz.js";import{u as N}from"./useNormalizeToken.C6igk56m.js";import{b as R}from"./PopupLoading.D-LitESe.js";import{u as I,a as _}from"./useNormalizeToken.CRab6WQg.js";const q=a=>{var c;const{enabled:n=!0}=a??{},{recipient:r,chainId:s,tokenAddress:m}=x(),o=y(s),{data:e,isLoading:u}=R(s),i=b(),t=N(m,s,o),d=(c=i==null?void 0:i.chains[o])==null?void 0:c.address,T=h(o,s),f=r||"0x1";return A({queryKey:[k.TRANSFER_FEE_ESTIMATE,o,d,r,t==null?void 0:t.address,s],queryFn:async()=>{var l,F,p;const E={gasPrice:(l=e==null?void 0:e.medium)==null?void 0:l.gasPrice,maxFeePerGas:(F=e==null?void 0:e.medium)==null?void 0:F.maxFeePerGas,maxPriorityFeePerGas:(p=e==null?void 0:e.medium)==null?void 0:p.maxPriorityFeePerGas};return T.estimateFee({from:d,token:t,chainId:s,amount:t.balance,to:f,feeData:o===P.EVM?E:void 0})},enabled:n&&!!d&&!!t&&!!r&&!u,staleTime:1e4,gcTime:3e4,retry:1})},v=a=>{var E;const{enabled:n=!0}=a??{},{recipient:r,collectionAddress:s,tokenId:m,rawAmount:o,chainId:e}=I(),u=y(e),i=b(),t=_({collectionAddress:s,chainId:e,tokenId:m}),d=h(u,e),T=r||"0x1",f=G(o||"1",100),c=(E=i==null?void 0:i.chains[u])==null?void 0:E.address;return A({queryKey:[k.TRANSFER_FEE_ESTIMATE,u,c,r,t==null?void 0:t.address,m,e,f],queryFn:async()=>d.estimateFee({from:c,to:T,token:t,chainId:e,amount:f,tokenId:m}),enabled:n&&!!c&&!!t&&!!r,staleTime:1e4,gcTime:3e4,retry:0})},L=a=>{const{transferType:n}=a??{},r=q({...a,enabled:n==="token"}),s=v({...a,enabled:n==="nft"});return n==="nft"?s:r};export{L as u};
