import{cV as U,E as z,B as C}from"./windowUtils.Ut7JS-rc.js";import{u as T}from"./useNftCollectionItems.DtJWVrNT.js";import{i as h,e as B}from"./useActiveTimeStore.C3Wei7Oz.js";import{r as w}from"./index.CxJLds0B.js";import{S as E}from"./token.types.DkObBlUj.js";const N={recipient:"",tokenAddress:"",rawAmount:void 0,chainId:z.RONIN,collectionAddress:"",tokenId:"",mintAddress:""},P=U(d=>({...N,setRecipient:n=>d(r=>({...r,recipient:n})),setRawAmount:n=>d(r=>({...r,rawAmount:n})),setChainId:n=>d(r=>({...r,chainId:n})),setCollectionInfo:(n,r)=>d({...N,collectionAddress:n,tokenId:r}),reset:()=>d(n=>({...n,initialState:N})),setMintAddress:n=>d(r=>({...r,mintAddress:n}))})),O=({chainId:d,contractAddress:n,tokenID:r,owners:p,mintAddress:t})=>{var k,A;const u=h(d)===C.SOLANA,{data:o}=T({contractAddress:n,chainId:d,owners:p}),c=(A=(k=o==null?void 0:o.pages)==null?void 0:k.map(s=>{var l;return(l=s==null?void 0:s.data)==null?void 0:l.data}))==null?void 0:A.flat(),a=u?c==null?void 0:c.find(s=>(s==null?void 0:s.mintAddress)===t||(s==null?void 0:s.contractAddress)===r):c==null?void 0:c.find(s=>(s==null?void 0:s.tokenId)===r);return w.useMemo(()=>{var s,l,e;return{metadata:{image:((s=a==null?void 0:a.metadata)==null?void 0:s.tokenVideo)||((l=a==null?void 0:a.metadata)==null?void 0:l.tokenImage),name:(e=a==null?void 0:a.metadata)==null?void 0:e.name,description:"",properties:{}},tokenStandard:a==null?void 0:a.tokenStandard,contractAddress:a==null?void 0:a.contractAddress,tokenId:a==null?void 0:a.tokenId,tokenUri:a==null?void 0:a.tokenUri,tokenName:a==null?void 0:a.tokenName,tokenSymbol:a==null?void 0:a.tokenSymbol}},[a])},q=({collectionAddress:d,mintAddress:n,chainId:r,tokenId:p})=>{var k,A,s,l;const t=B(),S=h(r),u=S===C.SOLANA,o=O({contractAddress:d,chainId:r,tokenID:p,owners:t==null?void 0:t.addresses,mintAddress:n}),{data:c}=T({contractAddress:d,owners:t==null?void 0:t.addresses,chainId:r}),a=u?1:(l=(s=(A=(k=c==null?void 0:c.pages)==null?void 0:k.map(e=>{var i;return(i=e==null?void 0:e.data)==null?void 0:i.data}))==null?void 0:A.flat())==null?void 0:s.find(e=>(e==null?void 0:e.tokenId)===p))==null?void 0:l.quantity;return w.useMemo(()=>{var b,g,y;if(!o)return null;const e=u?E.SPL_NFT:(b=o==null?void 0:o.tokenStandard)==null?void 0:b.toUpperCase();return{logoUrl:(g=o==null?void 0:o.metadata)==null?void 0:g.image,name:(y=o==null?void 0:o.metadata)==null?void 0:y.name,chainId:r,id:p,balance:`${a??1}`,standard:e,address:o==null?void 0:o.contractAddress,blockchain:S,mintAddress:n,symbol:o==null?void 0:o.tokenSymbol}},[o,u,p,r,a,S,n])};export{q as a,P as u};
