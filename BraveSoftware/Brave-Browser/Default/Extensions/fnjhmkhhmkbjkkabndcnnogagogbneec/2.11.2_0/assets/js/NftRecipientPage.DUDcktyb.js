import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{a as l,V as W,b as y,T as g,e as k,f as V,X as Z,r as q,B as p,c as w,N as U,x as E,ad as I}from"./windowUtils.Ut7JS-rc.js";import{L as T,Q as X,H as B,B as Q,k as G}from"./PopupLoading.D-LitESe.js";import{R,r as u}from"./index.CxJLds0B.js";import{M as J,a as K,C as Y,b as ee,I as te,B as M,i as se}from"./useActiveTimeStore.C3Wei7Oz.js";import{t as ne,R as ae,M as re}from"./RecentAddress.Dz-2Qi8G.js";import{R as oe}from"./RecipientResolver.Du8varQg.js";import{u as ie}from"./useTransferAdapter.DBEESo_0.js";import{t as ce}from"./useTxStatus.C8QHcxiJ.js";import{T as P,I as d,S as F,B as j}from"./PasswordLevelLabel.rhWNhrqO.js";import{a as le}from"./XCircleFill.DU4rF_sO.js";import{u as de,a as ue}from"./useNormalizeToken.CRab6WQg.js";import"./tiny-invariant.BHpmfUqq.js";import"./enum.CGJbW6Yf.js";import"./preload-helper.2LWRYvkK.js";import"./solana.CGFphaJI.js";import"./useDebouncedEffect.CslCnlPq.js";import"./SectionWallet.D4GJGuVx.js";import"./EmptyState.B5_-rwyr.js";import"./token.types.DkObBlUj.js";import"./associatedTokenAccount.Cs_dSOLN.js";import"./useTempStore.C8dvVNTz.js";import"./useNftCollectionItems.DtJWVrNT.js";import"./useNftCollectionList.0TiOOKoB.js";import"./useSearchErc20Tokens.D0zoSI7L.js";const me=J(R.createElement(R.Fragment,null,R.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2h4a2 2 0 1 1 0 4h-4a2 2 0 1 1 0-4ZM6.507 4.03A3.25 3.25 0 0 0 9.75 7.5h4.5a3.25 3.25 0 0 0 3.243-3.47A4 4 0 0 1 21 8v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8a4 4 0 0 1 3.507-3.97ZM7.25 10A.75.75 0 0 1 8 9.25h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75ZM8 13.25a.75.75 0 0 0 0 1.5h8a.75.75 0 0 0 0-1.5H8ZM7.25 18a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",fill:"currentColor"})),"Clipboard01Icon"),pe="_container_1duk1_1",fe="_infoDisplay_1duk1_4",he="_tokenInfoWrapper_1duk1_7",xe="_title_1duk1_12",Ae="_name_1duk1_16",Se="_myAddressBtn_1duk1_21",ve="_input_1duk1_25",i={container:pe,infoDisplay:fe,tokenInfoWrapper:he,title:xe,name:Ae,myAddressBtn:Se,input:ve},Ce=({handleNext:f,token:s,isNft:c,initialValue:A,blockchain:m})=>{var b;const[a,o]=u.useState(A),[h,S]=u.useState(!1),x=(b=K(s.chainId))==null?void 0:b.chainConfig,r=ie(m,s.chainId),t=u.useRef(null),v=async n=>{n.preventDefault();const L=await navigator.clipboard.readText();o(L),y.sendEvent(g.Click,k.Send,Z.PasteAddress)},C=()=>o(""),N=()=>{S(!1)},D=n=>o(n.target.value),O=n=>{o(n),t!=null&&t.current&&t.current.focus()},H=n=>{o(n),t!=null&&t.current&&t.current.focus()},$=n=>{o(n),N(),t!=null&&t.current&&t.current.focus()};u.useEffect(()=>{t!=null&&t.current&&t.current.focus()},[]);const _=u.useMemo(()=>r.validateRecipient(a),[a,r]),z=n=>{n.preventDefault(),_&&f(a)};return e.jsxs(T,{noBackground:!0,noFooter:!0,children:[e.jsx(T.BackableNavbar,{title:l.transfer.selectRecipient}),e.jsxs(T.Content,{noPadding:!0,children:[e.jsxs("form",{className:i.container,onSubmit:z,children:[e.jsxs("div",{className:i.infoDisplay,children:[e.jsxs("div",{className:i.tokenInfoWrapper,children:[e.jsx(X,{backAvtSrc:s==null?void 0:s.logoUrl,backAvtPlaceholder:e.jsx(ce,{size:16}),frontAvtSrc:e.jsx(Y,{chainConfig:x,size:ee.Size16,squarePlain:!0}),squared:c,frontSquared:c}),e.jsxs("div",{className:i.title,children:[e.jsx(P.Text,{level:"3",intent:d.Secondary,children:"Sending"}),e.jsx(P.Text,{level:"3",bold:!0,className:i.name,children:c?s.name:`${s.name} (${s.symbol})`})]})]}),e.jsx("div",{children:e.jsx(te,{ref:t,placeholder:l.transfer.inputAddressPlaceholder,shape:F.Rounded,value:a,onChange:D,suffixIcon:a?e.jsx(le,{role:"button",size:20,onClick:C}):e.jsx(j,{onClick:v,text:l.common.paste,icon:me,intent:d.Secondary,size:M.XSmall,type:"button"}),className:i.input})}),e.jsx("div",{children:a?_?e.jsx(B,{intent:d.Success,children:"Valid address format"}):W(a)?e.jsx(oe,{name:a,handleOnClick:O}):e.jsx(B,{intent:d.Danger,children:"Invalid address format"}):null}),e.jsx(j,{className:i.myAddressBtn,type:"button",text:l.transfer.myAddress,icon:ne,size:M.XSmall,intent:d.Secondary,onClick:()=>{S(!0),y.sendEvent(g.Click,k.Send,V.SelectFromContracts)}})]}),e.jsx(ae,{setReceiver:H,blockchain:m}),e.jsx(Q,{children:e.jsx(j,{type:"submit",text:c?l.transfer.review:l.transfer.enterAmount,shape:F.Rounded,disabled:!_,fullWidth:!0,intent:d.Primary})})]}),e.jsx(re,{isVisible:h,onClose:N,handleSelectAddress:$,blockchain:m})]})]})},we=()=>{const f=q(),{chainId:s,collectionAddress:c,tokenId:A,setRecipient:m,recipient:a,mintAddress:o}=de(),{reset:h}=G(),x=se(s)===p.SOLANA,r=ue({collectionAddress:c,chainId:s,tokenId:A,mintAddress:o});if(u.useEffect(()=>{h()},[h]),!r)return null;const t=w(r==null?void 0:r.standard,U.ERC1155),v=C=>{m(C),f(t?`${E.TRANSFER_NFT}/${I.ENTER_AMOUNT}`:`${E.TRANSFER_NFT}/${x?p.SOLANA:p.EVM}/${I.CONFIRM}`),y.sendEvent(g.Click,k.Send,V.SelectRecentRecipient,{action_properties:{token_type:r.standard,next_screen:t?"EnterAmount":"PreviewTransaction"}})};return e.jsx(Ce,{initialValue:a,handleNext:v,token:r,isNft:!0,blockchain:x?p.SOLANA:p.EVM})};export{we as default};
