import{j as s}from"./useTriggerLoadNext.KJIKMCqU.js";import{r as o}from"./index.CxJLds0B.js";import{U as G}from"./Unlock.BESn9bxh.js";import{S as b}from"./ShowPasswordToggler.eaRYVsWD.js";import{a as S,Y as w,Z as f,w as L,r as Y,x as z}from"./windowUtils.Ut7JS-rc.js";import{L as x,B as A}from"./PopupLoading.D-LitESe.js";import{g as H,I}from"./useActiveTimeStore.C3Wei7Oz.js";import{I as E,S as R,B as M}from"./PasswordLevelLabel.rhWNhrqO.js";import"./tiny-invariant.BHpmfUqq.js";import"./enum.CGJbW6Yf.js";import"./preload-helper.2LWRYvkK.js";import"./solana.CGFphaJI.js";import"./useDebouncedEffect.CslCnlPq.js";const O="_input_dj2qb_5",W="_button_dj2qb_17",j={input:O,button:W},Z=r=>{const{onSuccess:n,onBack:i,oldPasscode:u}=r,[c,p]=o.useState(!1),[C,B]=o.useState(!1),[l,T]=o.useState(),[t,k]=o.useState(),[m,v]=o.useState(),[P,g]=o.useState(),{toastError:N}=H(),h=S.settings.security,y=e=>{k(e.target.value);const a=w(e.target.value),d=f(e.target.value,l);g(d),v(a)},_=e=>{T(e.target.value);const a=f(t,e.target.value);g(a)},F=async e=>{e.preventDefault();const a=w(t),d=f(t,l);if(w(a),g(d),!a&&!d&&t)try{await L.changePasscode(u,t),n()}catch(q){N({title:S.common.error,content:q.message});return}},U=m?E.Danger:void 0,D=P?E.Danger:void 0;return s.jsxs(x,{noBackground:!0,noFooter:!0,children:[s.jsx(x.BackableNavbar,{title:h.newPasscodeTitle,callback:i}),s.jsx(x.Content,{children:s.jsxs("form",{onSubmit:F,children:[s.jsx(I,{autoFocus:!0,type:c?"text":"password",onChange:y,intent:U,caption:m,className:j.input,shape:R.Rounded,suffixIcon:s.jsx(b,{isShow:c,onToggleShow:p}),withBackground:!0,placeholder:h.enterNewPasscode}),s.jsx(I,{type:C?"text":"password",onChange:_,intent:D,caption:P,className:j.input,shape:R.Rounded,suffixIcon:s.jsx(b,{isShow:C,onToggleShow:B}),withBackground:!0,placeholder:h.confirmNewPasscode}),s.jsx(A,{children:s.jsx(M,{className:j.button,disabled:!!m||!!P||!t||!l,intent:E.Primary,text:S.common.confirm})})]})})]})},cs=()=>{const[r,n]=o.useState(0),[i,u]=o.useState(""),c=Y();return s.jsxs(s.Fragment,{children:[r===0&&s.jsx(G,{onSuccess:p=>{u(p),n(1)}}),r===1&&s.jsx(Z,{oldPasscode:i,onSuccess:()=>c(z.SETTING_SECURITY),onBack:()=>n(0)})]})};export{cs as default};
