import{j as e}from"./useTriggerLoadNext.KJIKMCqU.js";import{r as M,q as P,a as i,x as w}from"./windowUtils.Ut7JS-rc.js";import{d as D,f as O,L as h,S as z,A as G}from"./PopupLoading.D-LitESe.js";import{r as x}from"./index.CxJLds0B.js";import{L as H}from"./enum.CGJbW6Yf.js";import{G as U,H as V,e as q,J as F,r as J,A as W,k as $}from"./useActiveTimeStore.C3Wei7Oz.js";import{T as A,L as K,B as p,I as d,f as _,S as Q}from"./PasswordLevelLabel.rhWNhrqO.js";import{a as X}from"./SummaryRow.DvX50DLf.js";import"./tiny-invariant.BHpmfUqq.js";import"./preload-helper.2LWRYvkK.js";import"./solana.CGFphaJI.js";import"./useDebouncedEffect.CslCnlPq.js";const Y="_content_13ing_6",Z="_headingText_13ing_11",tt="_section_13ing_1",st="_addText_13ing_23",et="_footer_13ing_27",nt="_all_13ing_35",ot="_btn_13ing_42",at="_btn2_13ing_47",ct="_footerContainer_13ing_52",c={content:Y,headingText:Z,section:tt,addText:st,footer:et,all:nt,btn:ot,btn2:at,footerContainer:ct},_t=()=>{const b=M(),{hostname:v}=P(),u=U(),I=V(),f=q(),{allSections:g}=D({includeViewOnly:!1}),{sessions:m,deleteSession:j,removeAccountsInSession:S,addAccountsInSession:k,updateSession:T}=O(v??""),[r,l]=x.useState([]);x.useEffect(()=>{const n=m.flatMap(t=>t.getAccounts()??[]).map(t=>{var o;return(o=u.find(a=>a.addresses.includes(t)))==null?void 0:o.id});l(n)},[]);const C=s=>s.map(n=>{const t=I(n.walletId,n.address),o=r.includes(t.id);return{customLeftIcon:o?e.jsx(J,{size:24,color:"#52e08d"}):e.jsx(W,{size:$.S,seed:t.baseAddress}),title:e.jsx(G,{account:t,nameResolverProps:{fallbackName:t.nickname}}),noIndicator:!0,customRightIcon:e.jsx(A.Text,{level:"3",bold:!0,intent:o?d.Danger:d.Info,className:c.addText,onClick:()=>{o?(l(r.filter(a=>a!==t.id)),S([t])):(l([...r,t.id]),k([t]))},children:o?i.common.remove:i.common.add})}}),L=async()=>{if(r.length===0)try{await j()}catch(s){H.error("ConnectAddress",s)}else m.forEach(async s=>{await T(s.id,{accounts:r.map(n=>{var t,o;return(o=(t=u.find(a=>a.id===n))==null?void 0:t.chains[s.blockchain])==null?void 0:o.address}),chainIds:s.getChainIds()})});b(w.HOME)},N=()=>{const s=f==null?void 0:f.id,n=m.map(a=>a.blockchain),t=u.filter(a=>a.blockchains.some(E=>n.includes(E))).map(a=>a.id),o=s?[s,...t.filter(a=>a!==s)]:t;l(o)},y=async()=>{l([])},R=s=>{const n=m.map(t=>t.blockchain);return s.filter(t=>n.every(o=>t.blockchains.includes(o)))},B=g.map(s=>({...s,data:R(s.data)}));return e.jsxs(h,{noFooter:!0,noBackground:!0,children:[e.jsx(h.BackableNavbar,{title:i.session.addresses.title}),e.jsxs(h.Content,{children:[e.jsx("div",{className:c.content,children:B.filter(s=>s.data.length>0).map((s,n)=>e.jsxs("div",{className:n!==g.length-1&&c.section,children:[e.jsx(A.Label,{level:K.Medium,className:c.headingText,children:s.headingText.toUpperCase()}),e.jsx(z,{settingList:C(s.data.map(t=>t.baseAccount))},n)]},n))}),e.jsxs("div",{className:c.footer,children:[e.jsxs("div",{className:c.all,children:[e.jsx(p,{text:i.session.addresses.btnAddAll,variant:_.Plain,onClick:N,intent:d.Info,className:c.btn,icon:X}),e.jsx(p,{text:i.session.addresses.btnRemoveAll,variant:_.Plain,onClick:y,intent:d.Danger,className:c.btn2,icon:F})]}),e.jsx("div",{className:c.footerContainer,children:e.jsx(p,{className:c.btn,fullWidth:!0,text:i.common.done,shape:Q.Rounded,intent:d.Primary,onClick:L})})]})]})]})};export{_t as default};
