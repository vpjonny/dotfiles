import{r as N,cv as P,i as y,j as t,cw as u,cx as f,cy as M,cz as T,cA as j,cB as k,cC as w,a7 as m,cD as p,cE as x,cF as A,cG as I,cH as _,aK as U,bn as q,aG as G,cI as g,bi as S,bj as l,bX as h,b$ as v,cJ as $,cK as C,cL as z,cM as E,cN as V,cO as X,bG as O,cP as R,bK as B,ct as Y,cQ as D,bF as K,cR as Q,cS as Z,cT as tt,cU as st,e as et,cV as J,cW as nt,cX as it,cY as at,cZ as ct,c_ as rt,c$ as ot,d0 as dt,d1 as ut,d2 as lt,a8 as mt,d3 as xt,d4 as jt,d5 as ft,d6 as At,d7 as ht,d8 as yt,d9 as St,da as vt,db as Tt,dc as kt,dd as wt}from"./main.D-W_HyrW.js";const zt=(s,n,e,a,i)=>{const[c,r]=N.useState(a?i?.current:window);return N.useEffect(()=>{if(!s)return;const o=c??i?.current;if(!o)return;const d=P(()=>{if(!n&&document.documentElement.className!=="is-locked")if(o===window)window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&e();else{const b=o;b.scrollTop>=b.scrollHeight-window.innerHeight-500&&e()}},50);return o.addEventListener("scroll",d),d(),()=>{o.removeEventListener("scroll",d)}},[s,a,c]),r},Dt=({tonTransfer:s,timestamp:n,event:e,isScam:a,status:i})=>{const c=O(),{data:r}=S(l.TON),{fiatAmount:o}=h(r,v(s.amount)),d=s.recipient.address===c.rawAddress?"received":"send";return t.jsxs(f,{event:e,children:[t.jsx(E,{isScam:a,amount:s.amount,symbol:l.TON,total:o,timestamp:n,kind:d,status:i}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(C,{sender:s.sender}),d==="send"&&t.jsx(p,{recipient:s.recipient}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra}),t.jsx(I,{comment:a?void 0:s.comment})]})]})},bt=({action:s,timestamp:n,event:e,isScam:a})=>{const{tonTransfer:i}=s;return i?t.jsx(Dt,{tonTransfer:i,event:e,isScam:a,timestamp:n,status:s.status}):t.jsx(u,{event:e})},Nt=({action:s,timestamp:n,event:e})=>{const{t:a}=y(),{auctionBid:i}=s,c=g(),{data:r}=S(l.TON),{fiatAmount:o}=h(r,v(i?.amount.value??0));return i?t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a("transaction_type_bid")}),t.jsxs(j,{children:[c(i.amount.value)," ",i.amount.tokenName]}),o&&t.jsxs(j,{children:["≈ ",o]}),t.jsx(k,{kind:"send",timestamp:n}),t.jsx(w,{status:s.status})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(z,{beneficiary:i.auction}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra})]})]}):t.jsx(u,{event:e})},pt=({action:s,timestamp:n,event:e})=>{const{domainRenew:a}=s;return a?t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:a.domain}),t.jsx(k,{kind:"send",timestamp:n}),t.jsx(w,{status:s.status})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(C,{sender:a.renewer,bounced:!0}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra})]})]}):t.jsx(u,{event:e})},gt=({action:s,timestamp:n,event:e})=>{const{smartContractExec:a}=s,i=g(),{data:c}=S(l.TON),{fiatAmount:r}=h(c,v(a?.tonAttached??0));return a?t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsxs(T,{children:["- ",i(a.tonAttached)," ",l.TON]}),r&&t.jsxs(j,{children:["≈ ",r]}),t.jsx(k,{kind:"call",timestamp:n}),t.jsx(w,{status:s.status})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(p,{recipient:a.contract,bounced:!0}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra}),t.jsx($,{operation:a.operation})]})]}):t.jsx(u,{event:e})},It=({extraCurrencyTransfer:s,timestamp:n,event:e,isScam:a,status:i})=>{const c=O(),{data:r}=S(s.currency.symbol),{fiatAmount:o}=h(r,v(s.amount,s.currency.decimals)),d=s.recipient.address===c.rawAddress?"received":"send";return t.jsxs(f,{event:e,children:[t.jsx(E,{isScam:a,amount:s.amount,decimals:s.currency.decimals,symbol:s.currency.symbol,total:o,timestamp:n,kind:d,status:i}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[d==="received"&&t.jsx(C,{sender:s.sender}),d==="send"&&t.jsx(p,{recipient:s.recipient}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra}),t.jsx(I,{comment:a?void 0:s.comment})]})]})},Et=({action:s,timestamp:n,event:e,isScam:a})=>{const{extraCurrencyTransfer:i}=s;return i?t.jsx(It,{extraCurrencyTransfer:i,event:e,isScam:a,timestamp:n,status:s.status}):t.jsx(u,{event:e})},F=({action:s,timestamp:n,event:e,isScam:a})=>{const{t:i}=y(),{simplePreview:c}=s;if(!c)return t.jsx(u,{event:e});const r=c.accounts[0];return t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[a&&t.jsx(M,{children:i("spam_action")}),t.jsx(T,{children:c.name}),c.value&&!a&&t.jsx(j,{children:c.value}),t.jsx(k,{kind:"call",timestamp:n}),t.jsx(w,{status:s.status})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[r&&t.jsx(p,{recipient:r,customLabel:i("simple_preview_account")}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra}),t.jsx(I,{comment:a?void 0:c.description})]})]})},Ct=({purchase:s,timestamp:n,event:e,isScam:a,status:i,currencyId:c})=>{const{t:r}=y(),{data:o}=S(c),{fiatAmount:d}=h(o,v(s.amount.value,s.amount.decimals));return t.jsxs(f,{event:e,children:[t.jsx(E,{isScam:a,amount:s.amount.value,decimals:s.amount.decimals,symbol:V(s.amount.tokenName,s.amount.verification===X.Blacklist),total:d,timestamp:n,kind:"send",status:i,children:r("transaction_type_purchase")}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(p,{recipient:s.destination}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra}),t.jsx(I,{comment:r("transaction_type_purchase_description",{invoice:s.invoiceId})})]})]})},Rt=({action:s,timestamp:n,event:e,isScam:a})=>{const{purchase:i}=s;if(!i)return t.jsx(u,{event:e});let c;if(i.amount.currencyType===_.Jetton)try{c=U.Address.parse(i.amount.jetton).toRawString()}catch(r){console.error(r)}else i.amount.currencyType===_.Native&&(c=q(G.address));return c?t.jsx(Ct,{purchase:i,event:e,isScam:a,timestamp:n,status:s.status,currencyId:c}):t.jsx(u,{event:e})},Wt=({depositStake:s,timestamp:n,event:e,status:a})=>{const{t:i}=y(),{data:c}=S(l.TON),r=g(),{fiatAmount:o}=h(c,v(s.amount));return t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i("staking_deposit")}),t.jsxs(j,{children:["- ",r(s.amount)," ",l.TON]}),t.jsxs(j,{children:["≈ ",o]}),t.jsx(k,{kind:"send",timestamp:n}),t.jsx(w,{status:a})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(R,{pool:s.pool}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra})]})]})},_t=({action:s,timestamp:n,event:e,isScam:a})=>{const{depositStake:i}=s;return i?t.jsx(Wt,{depositStake:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(u,{event:e})},Ft=({withdrawStake:s,timestamp:n,event:e,status:a})=>{const{t:i}=y(),{data:c}=S(l.TON),r=g(),{fiatAmount:o}=h(c,v(s.amount));return t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i("staking_withdraw")}),t.jsxs(j,{children:["+ ",r(s.amount)," ",l.TON]}),t.jsxs(j,{children:["≈ ",o]}),t.jsx(k,{kind:"send",timestamp:n}),t.jsx(w,{status:a})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(R,{pool:s.pool}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra})]})]})},Ot=({action:s,timestamp:n,event:e,isScam:a})=>{const{withdrawStake:i}=s;return i?t.jsx(Ft,{withdrawStake:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(u,{event:e})},Bt=({withdrawStakeRequest:s,timestamp:n,event:e,status:a})=>{const{t:i}=y(),{data:c}=S(l.TON),r=g(),{fiatAmount:o}=h(c,v(s.amount??0));return t.jsxs(f,{event:e,children:[t.jsxs("div",{children:[t.jsx(T,{children:i("activityActionModal_withdrawal_request")}),s.amount&&t.jsxs(t.Fragment,{children:[t.jsxs(j,{children:["+ ",r(s.amount)," ",l.TON]}),t.jsxs(j,{children:["≈ ",o]})]}),t.jsx(k,{kind:"send",timestamp:n}),t.jsx(w,{status:a})]}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[t.jsx(R,{pool:s.pool}),t.jsx(x,{eventId:e.eventId}),t.jsx(A,{extra:e.extra})]})]})},Jt=({action:s,timestamp:n,event:e,isScam:a})=>{const{withdrawStakeRequest:i}=s;return i?t.jsx(Bt,{withdrawStakeRequest:i,timestamp:n,event:e,isScam:a,status:s.status}):t.jsx(u,{event:e})},Ht=({transactionHash:s,children:n})=>t.jsx(st,{url:"https://tronscan.org/#/transaction/%s",eventId:s,children:n}),Lt=({timestamp:s,event:n})=>{const e=B(),{data:a}=Y(),{fiatAmount:i}=h(a,n.assetAmount.relativeAmount),c=n.isScam,r=n.to===e.address?"received":"send";return t.jsxs(Ht,{transactionHash:n.transactionHash,children:[t.jsx(E,{isScam:c,decimals:n.assetAmount.asset.decimals,amount:n.assetAmount.weiAmount.toFixed(0),symbol:n.assetAmount.asset.symbol,total:n.assetAmount.asset.address===K.address?i:void 0,timestamp:s,kind:r,status:n.isFailed?D.Failed:D.Ok}),t.jsxs(m,{margin:!1,fullWidth:!0,children:[r==="received"&&t.jsx(Q,{address:n.from}),r==="send"&&t.jsx(Z,{address:n.to}),t.jsx(x,{eventId:n.transactionHash}),!!n.fee&&t.jsx(tt,{fee:n.fee})]})]})},Pt=s=>{switch(s.action.type){case"TonTransfer":return t.jsx(bt,{...s});case"NftItemTransfer":return t.jsx(lt,{...s});case"ContractDeploy":return t.jsx(ut,{...s});case"UnSubscribe":return t.jsx(dt,{...s});case"Subscribe":return t.jsx(ot,{...s});case"AuctionBid":return t.jsx(Nt,{...s});case"DomainRenew":return t.jsx(pt,{...s});case"SmartContractExec":return t.jsx(gt,{...s});case"JettonTransfer":return t.jsx(rt,{...s});case"JettonSwap":return t.jsx(ct,{...s});case"JettonMint":return t.jsx(at,{...s});case"JettonBurn":return t.jsx(it,{...s});case"DepositStake":return t.jsx(_t,{...s});case"WithdrawStake":return t.jsx(Ot,{...s});case"WithdrawStakeRequest":return t.jsx(Jt,{...s});case"NftPurchase":return t.jsx(nt,{...s});case"ExtraCurrencyTransfer":return t.jsx(Et,{...s});case"Purchase":return t.jsx(Rt,{...s});case"Unknown":return t.jsx(u,{event:s.event});case"ElectionsDepositStake":case"ElectionsRecoverStake":case"AddExtension":case"RemoveExtension":case"SetSignatureAllowedAction":case"GasRelay":case"DepositTokenStake":case"WithdrawTokenStakeRequest":case"LiquidityDeposit":return t.jsx(F,{...s});default:return J(s.action.type),t.jsx(F,{...s})}},Mt=s=>{const{t:n}=y();switch(s.event.type){case"asset-transfer":return t.jsx(Lt,{...s});default:return J(s.event.type),t.jsx(t.Fragment,{children:n("txActions_signRaw_types_unknownTransaction")})}},Ut=({value:s,handleClose:n})=>{const e=N.useCallback(()=>{if(s)return s.type==="tron"?t.jsx(Mt,{...s}):t.jsx(Pt,{...s})},[s,n]);return t.jsx(et,{isOpen:!!s,handleClose:n,children:e})},qt=({event:s,onClick:n,formattedDate:e})=>t.jsx(t.Fragment,{children:t.jsxs(mt,{onClick:n,children:[t.jsx(Gt,{event:s,formattedDate:e}),s.inProgress&&t.jsx(xt,{})]})}),Gt=({event:s,formattedDate:n})=>{const e=B();return e?s.to===e?.address?t.jsx(ft,{amount:s.assetAmount.stringRelativeAmount,sender:s.from,symbol:s.assetAmount.asset.symbol,date:n,isScam:s.isScam,status:s.isFailed?D.Failed:D.Ok}):t.jsx(At,{amount:s.assetAmount.stringRelativeAmount,symbol:s.assetAmount.asset.symbol,recipient:s.to,date:n,isScam:s.isScam,status:s.isFailed?D.Failed:D.Ok}):t.jsx(jt,{})},Vt=({items:s})=>{const[n,e]=N.useState(void 0),{i18n:a}=y(),i=N.useMemo(()=>ht(s),[s]);return t.jsxs(t.Fragment,{children:[i.map(([c,r])=>t.jsxs(yt,{children:[t.jsx(St,{children:vt(a.language,c,r[0].timestamp)}),r.map(({timestamp:o,event:d,type:b,key:H})=>{const W=Tt(a.language,c,o);return t.jsx(kt,{children:b==="tron"?t.jsx(qt,{event:d,formattedDate:W,onClick:()=>e({type:"tron",event:d,timestamp:d.timestamp})}):b==="ton"?t.jsx(wt,{event:d,date:W,timestamp:o,setActivity:L=>e({type:"ton",...L})}):null},H)})]},c)),t.jsx(Ut,{value:n,handleClose:()=>e(void 0)})]})};export{Vt as M,zt as u};
