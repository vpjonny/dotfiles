"use strict";(self.webpackChunktemple_wallet=self.webpackChunktemple_wallet||[]).push([[149],{22149:(t,e,r)=>{r.r(e),r.d(e,{TransportBridge:()=>i});var a=r(61150),s=r(45192),n=r(29737),c=r(37287),o=r(48287).Buffer;class i{transport;async requestExchange(t){try{return await this.exchange(t.apdu,t.transportType,t.scrambleKey,t.exchangeTimeout)}catch(t){if(t&&t instanceof Error)throw new Error(t.message??"Unexpected error")}throw new Error("Unknown error")}async close(){if(null!=this.transport){try{await this.transport.close()}catch(t){}delete this.transport}}async exchange(t,e,r,a){const s=await this.getOrCreateTransport(e);a&&s.setExchangeTimeout(a),r&&s.setScrambleKey(r);return(await s.exchange(o.from(t,"hex"))).toString("hex")}async getOrCreateTransport(t){const e=this.transport;if(null==e)return await this.createTransport(t);if(t===c.Y.WEBHID&&e instanceof n.A){const t=e.device,r=t&&t.constructor.name,a=t&&t.opened;if("HIDDevice"===r&&a)return e;const s=await n.A.openConnected();s&&(this.transport=s)}return this.transport}async createTransport(t){switch(t){case c.Y.WEBHID:this.transport=await n.A.create();break;case c.Y.WEBAUTHN:this.transport=await s.A.create();break;default:this.transport=await a.A.create()}return this.transport}}}}]);