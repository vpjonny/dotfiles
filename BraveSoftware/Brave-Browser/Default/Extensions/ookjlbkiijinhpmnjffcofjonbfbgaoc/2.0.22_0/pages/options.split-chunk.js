/*! For license information please see options.split-chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktemple_wallet=self.webpackChunktemple_wallet||[]).push([[761],{36743:(t,e,r)=>{r.d(e,{FA:()=>h,Uj:()=>o,eX:()=>c,g:()=>u,zW:()=>a});r(65606);const i=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296===(64512&n)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++i)),e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128)}return e},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const n=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=n>>2,h=(3&n)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(l=64)),i.push(r[u],r[h],r[l],r[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let r=0,i=0;for(;r<t.length;){const n=t[r++];if(n<128)e[i++]=String.fromCharCode(n);else if(n>191&&n<224){const s=t[r++];e[i++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){const s=((7&n)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[r++],o=t[r++];e[i++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const n=r[t.charAt(e++)],o=e<t.length?r[t.charAt(e)]:0;++e;const a=e<t.length?r[t.charAt(e)]:64;++e;const c=e<t.length?r[t.charAt(e)]:64;if(++e,null==n||null==o||null==a||null==c)throw new s;const u=n<<2|o>>4;if(i.push(u),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==c){const t=a<<6&192|c;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=i(t);return n.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function a(){try{return"object"===typeof indexedDB}catch(t){return!1}}function c(){return new Promise(((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(i);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var t;e((null===(t=n.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class u extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,n=this.errors[t],s=n?function(t,e){return t.replace(l,((t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`}))}(n,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new u(i,o,r)}}const l=/\{\$([^}]+)}/g},19444:(t,e,r)=>{var i=r(30972),n=r(76228);e.cS=128,e.On=64,e.J4=64,e.Cc=16,e.wU=16,e.wm=Math.pow(2,32)-1,e.np=255,e._n=255;var s=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],a=function(){function t(t,r){if(void 0===t&&(t=64),this.digestLength=t,this.blockSize=e.cS,this._state=new Int32Array(s),this._buffer=new Uint8Array(e.cS),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),t<1||t>e.On)throw new Error("blake2b: wrong digest length");r&&this.validateConfig(r);var n=0;r&&r.key&&(n=r.key.length);var o=1,a=1;r&&r.tree&&(o=r.tree.fanout,a=r.tree.maxDepth),this._state[0]^=t|n<<8|o<<16|a<<24,r&&r.tree&&(this._state[1]^=r.tree.leafSize,this._state[2]^=r.tree.nodeOffsetLowBits,this._state[3]^=r.tree.nodeOffsetHighBits,this._state[4]^=r.tree.nodeDepth|r.tree.innerDigestLength<<8,this._lastNode=r.tree.lastNode),r&&r.salt&&(this._state[8]^=i.readUint32LE(r.salt,0),this._state[9]^=i.readUint32LE(r.salt,4),this._state[10]^=i.readUint32LE(r.salt,8),this._state[11]^=i.readUint32LE(r.salt,12)),r&&r.personalization&&(this._state[12]^=i.readUint32LE(r.personalization,0),this._state[13]^=i.readUint32LE(r.personalization,4),this._state[14]^=i.readUint32LE(r.personalization,8),this._state[15]^=i.readUint32LE(r.personalization,12)),this._initialState=new Uint32Array(this._state),r&&r.key&&n>0&&(this._paddedKey=new Uint8Array(e.cS),this._paddedKey.set(r.key),this._buffer.set(this._paddedKey),this._bufferLength=e.cS)}return t.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=e.cS):this._bufferLength=0,n.wipe(this._ctr),n.wipe(this._flag),this._finished=!1,this},t.prototype.validateConfig=function(t){if(t.key&&t.key.length>e.J4)throw new Error("blake2b: wrong key length");if(t.salt&&t.salt.length!==e.wU)throw new Error("blake2b: wrong salt length");if(t.personalization&&t.personalization.length!==e.Cc)throw new Error("blake2b: wrong personalization length");if(t.tree){if(t.tree.fanout<0||t.tree.fanout>e.np)throw new Error("blake2b: wrong tree fanout");if(t.tree.maxDepth<0||t.tree.maxDepth>e._n)throw new Error("blake2b: wrong tree depth");if(t.tree.leafSize<0||t.tree.leafSize>e.wm)throw new Error("blake2b: wrong leaf size");if(t.tree.innerDigestLength<0||t.tree.innerDigestLength>e.On)throw new Error("blake2b: wrong tree inner digest length")}},t.prototype.update=function(t,r){if(void 0===r&&(r=t.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var i=e.cS-this._bufferLength,n=0;if(0===r)return this;if(r>i){for(var s=0;s<i;s++)this._buffer[this._bufferLength+s]=t[n+s];this._processBlock(e.cS),n+=i,r-=i,this._bufferLength=0}for(;r>e.cS;){for(s=0;s<e.cS;s++)this._buffer[s]=t[n+s];this._processBlock(e.cS),n+=e.cS,r-=e.cS,this._bufferLength=0}for(s=0;s<r;s++)this._buffer[this._bufferLength+s]=t[n+s];return this._bufferLength+=r,this},t.prototype.finish=function(t){if(!this._finished){for(var r=this._bufferLength;r<e.cS;r++)this._buffer[r]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}var n=this._buffer.subarray(0,64);for(r=0;r<16;r++)i.writeUint32LE(this._state[r],n,4*r);return t.set(n.subarray(0,t.length)),this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.clean=function(){n.wipe(this._vtmp),n.wipe(this._mtmp),n.wipe(this._state),n.wipe(this._buffer),n.wipe(this._initialState),this._paddedKey&&n.wipe(this._paddedKey),this._bufferLength=0,n.wipe(this._ctr),n.wipe(this._flag),this._lastNode=!1,this._finished=!1},t.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._buffer.set(t.buffer),this._bufferLength=t.bufferLength,this._ctr.set(t.ctr),this._flag.set(t.flag),this._lastNode=t.lastNode,this._paddedKey&&n.wipe(this._paddedKey),this._paddedKey=t.paddedKey?new Uint8Array(t.paddedKey):void 0,this._initialState.set(t.initialState),this},t.prototype.cleanSavedState=function(t){n.wipe(t.state),n.wipe(t.buffer),n.wipe(t.initialState),t.paddedKey&&n.wipe(t.paddedKey),t.bufferLength=0,n.wipe(t.ctr),n.wipe(t.flag),t.lastNode=!1},t.prototype._G=function(t,e,r,i,n,s,o,a,c,u,h,l,d){var p=t[e],f=t[s],g=t[r],m=t[o],y=t[i],_=t[a],v=t[n],w=t[c],A=65535&p,b=p>>>16,E=65535&f,O=f>>>16;b+=g>>>16,E+=65535&m,O+=m>>>16,E+=(b+=(A+=65535&g)>>>16)>>>16,A=65535&(p=65535&A|b<<16),b=p>>>16,E=65535&(f=65535&E|(O+=E>>>16)<<16),O=f>>>16,b+=u>>>16,E+=65535&h,O+=h>>>16,p=65535&(A+=65535&u)|(b+=A>>>16)<<16,A=w^=f=65535&(E+=b>>>16)|(O+=E>>>16)<<16,w=v^=p,v=A,A=65535&y,b=y>>>16,E=65535&_,O=_>>>16,b+=v>>>16,E+=65535&w,O+=w>>>16,A=(g^=y=65535&(A+=65535&v)|(b+=A>>>16)<<16)<<8|(m^=_=65535&(E+=b>>>16)|(O+=E>>>16)<<16)>>>24,g=m<<8|g>>>24,m=A,A=65535&p,b=p>>>16,E=65535&f,O=f>>>16,b+=g>>>16,E+=65535&m,O+=m>>>16,E+=(b+=(A+=65535&g)>>>16)>>>16,A=65535&(p=65535&A|b<<16),b=p>>>16,E=65535&(f=65535&E|(O+=E>>>16)<<16),O=f>>>16,b+=l>>>16,E+=65535&d,O+=d>>>16,A=(v^=p=65535&(A+=65535&l)|(b+=A>>>16)<<16)<<16|(w^=f=65535&(E+=b>>>16)|(O+=E>>>16)<<16)>>>16,v=w<<16|v>>>16,w=A,A=65535&y,b=y>>>16,E=65535&_,O=_>>>16,b+=v>>>16,E+=65535&w,O+=w>>>16,A=(m^=_=65535&(E+=(b+=(A+=65535&v)>>>16)>>>16)|(O+=E>>>16)<<16)<<1|(g^=y=65535&A|b<<16)>>>31,g=g<<1|m>>>31,m=A,t[e]=p,t[s]=f,t[r]=g,t[o]=m,t[i]=y,t[a]=_,t[n]=v,t[c]=w},t.prototype._incrementCounter=function(t){for(var e=0;e<3;e++){var r=this._ctr[e]+t;if(this._ctr[e]=r>>>0,this._ctr[e]===r)return;t=1}},t.prototype._processBlock=function(t){this._incrementCounter(t);var e=this._vtmp;e.set(this._state),e.set(s,16),e[24]^=this._ctr[0],e[25]^=this._ctr[1],e[26]^=this._ctr[2],e[27]^=this._ctr[3],e[28]^=this._flag[0],e[29]^=this._flag[1],e[30]^=this._flag[2],e[31]^=this._flag[3];for(var r=this._mtmp,n=0;n<32;n++)r[n]=i.readUint32LE(this._buffer,4*n);for(var a=0;a<12;a++)this._G(e,0,8,16,24,1,9,17,25,r[o[a][0]],r[o[a][0]+1],r[o[a][1]],r[o[a][1]+1]),this._G(e,2,10,18,26,3,11,19,27,r[o[a][2]],r[o[a][2]+1],r[o[a][3]],r[o[a][3]+1]),this._G(e,4,12,20,28,5,13,21,29,r[o[a][4]],r[o[a][4]+1],r[o[a][5]],r[o[a][5]+1]),this._G(e,6,14,22,30,7,15,23,31,r[o[a][6]],r[o[a][6]+1],r[o[a][7]],r[o[a][7]+1]),this._G(e,0,10,20,30,1,11,21,31,r[o[a][8]],r[o[a][8]+1],r[o[a][9]],r[o[a][9]+1]),this._G(e,2,12,22,24,3,13,23,25,r[o[a][10]],r[o[a][10]+1],r[o[a][11]],r[o[a][11]+1]),this._G(e,4,14,16,26,5,15,17,27,r[o[a][12]],r[o[a][12]+1],r[o[a][13]],r[o[a][13]+1]),this._G(e,6,8,18,28,7,9,19,29,r[o[a][14]],r[o[a][14]+1],r[o[a][15]],r[o[a][15]+1]);for(n=0;n<16;n++)this._state[n]^=e[n]^e[n+16]},t}();e.tW=function(t,r,i){void 0===r&&(r=e.On);var n=new a(r,i);n.update(t);var s=n.digest();return n.clean(),s}},34904:(t,e,r)=>{e.K=e.TP=e.wE=e.Ee=void 0;const i=r(37052),n=r(64974),s=r(76228);function o(t){const e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}e.Ee=64,e.wE=64,e.TP=32;new Uint8Array(32)[0]=9;const a=o(),c=o([1]),u=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(t,e){for(let r=0;r<16;r++)t[r]=0|e[r]}function g(t){let e=1;for(let r=0;r<16;r++){let i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-65536*e}t[0]+=e-1+37*(e-1)}function m(t,e,r){const i=~(r-1);for(let r=0;r<16;r++){const n=i&(t[r]^e[r]);t[r]^=n,e[r]^=n}}function y(t,e){const r=o(),i=o();for(let t=0;t<16;t++)i[t]=e[t];g(i),g(i),g(i);for(let t=0;t<2;t++){r[0]=i[0]-65517;for(let t=1;t<15;t++)r[t]=i[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535,m(i,r,1-t)}for(let e=0;e<16;e++)t[2*e]=255&i[e],t[2*e+1]=i[e]>>8}function _(t,e){let r=0;for(let i=0;i<32;i++)r|=t[i]^e[i];return(1&r-1>>>8)-1}function v(t,e){const r=new Uint8Array(32),i=new Uint8Array(32);return y(r,t),y(i,e),_(r,i)}function w(t){const e=new Uint8Array(32);return y(e,t),1&e[0]}function A(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]+r[i]}function b(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]-r[i]}function E(t,e,r){let i,n,s=0,o=0,a=0,c=0,u=0,h=0,l=0,d=0,p=0,f=0,g=0,m=0,y=0,_=0,v=0,w=0,A=0,b=0,E=0,O=0,P=0,S=0,T=0,R=0,L=0,I=0,k=0,N=0,C=0,D=0,x=0,H=r[0],M=r[1],U=r[2],B=r[3],K=r[4],j=r[5],G=r[6],F=r[7],V=r[8],$=r[9],z=r[10],W=r[11],Y=r[12],Z=r[13],X=r[14],Q=r[15];i=e[0],s+=i*H,o+=i*M,a+=i*U,c+=i*B,u+=i*K,h+=i*j,l+=i*G,d+=i*F,p+=i*V,f+=i*$,g+=i*z,m+=i*W,y+=i*Y,_+=i*Z,v+=i*X,w+=i*Q,i=e[1],o+=i*H,a+=i*M,c+=i*U,u+=i*B,h+=i*K,l+=i*j,d+=i*G,p+=i*F,f+=i*V,g+=i*$,m+=i*z,y+=i*W,_+=i*Y,v+=i*Z,w+=i*X,A+=i*Q,i=e[2],a+=i*H,c+=i*M,u+=i*U,h+=i*B,l+=i*K,d+=i*j,p+=i*G,f+=i*F,g+=i*V,m+=i*$,y+=i*z,_+=i*W,v+=i*Y,w+=i*Z,A+=i*X,b+=i*Q,i=e[3],c+=i*H,u+=i*M,h+=i*U,l+=i*B,d+=i*K,p+=i*j,f+=i*G,g+=i*F,m+=i*V,y+=i*$,_+=i*z,v+=i*W,w+=i*Y,A+=i*Z,b+=i*X,E+=i*Q,i=e[4],u+=i*H,h+=i*M,l+=i*U,d+=i*B,p+=i*K,f+=i*j,g+=i*G,m+=i*F,y+=i*V,_+=i*$,v+=i*z,w+=i*W,A+=i*Y,b+=i*Z,E+=i*X,O+=i*Q,i=e[5],h+=i*H,l+=i*M,d+=i*U,p+=i*B,f+=i*K,g+=i*j,m+=i*G,y+=i*F,_+=i*V,v+=i*$,w+=i*z,A+=i*W,b+=i*Y,E+=i*Z,O+=i*X,P+=i*Q,i=e[6],l+=i*H,d+=i*M,p+=i*U,f+=i*B,g+=i*K,m+=i*j,y+=i*G,_+=i*F,v+=i*V,w+=i*$,A+=i*z,b+=i*W,E+=i*Y,O+=i*Z,P+=i*X,S+=i*Q,i=e[7],d+=i*H,p+=i*M,f+=i*U,g+=i*B,m+=i*K,y+=i*j,_+=i*G,v+=i*F,w+=i*V,A+=i*$,b+=i*z,E+=i*W,O+=i*Y,P+=i*Z,S+=i*X,T+=i*Q,i=e[8],p+=i*H,f+=i*M,g+=i*U,m+=i*B,y+=i*K,_+=i*j,v+=i*G,w+=i*F,A+=i*V,b+=i*$,E+=i*z,O+=i*W,P+=i*Y,S+=i*Z,T+=i*X,R+=i*Q,i=e[9],f+=i*H,g+=i*M,m+=i*U,y+=i*B,_+=i*K,v+=i*j,w+=i*G,A+=i*F,b+=i*V,E+=i*$,O+=i*z,P+=i*W,S+=i*Y,T+=i*Z,R+=i*X,L+=i*Q,i=e[10],g+=i*H,m+=i*M,y+=i*U,_+=i*B,v+=i*K,w+=i*j,A+=i*G,b+=i*F,E+=i*V,O+=i*$,P+=i*z,S+=i*W,T+=i*Y,R+=i*Z,L+=i*X,I+=i*Q,i=e[11],m+=i*H,y+=i*M,_+=i*U,v+=i*B,w+=i*K,A+=i*j,b+=i*G,E+=i*F,O+=i*V,P+=i*$,S+=i*z,T+=i*W,R+=i*Y,L+=i*Z,I+=i*X,k+=i*Q,i=e[12],y+=i*H,_+=i*M,v+=i*U,w+=i*B,A+=i*K,b+=i*j,E+=i*G,O+=i*F,P+=i*V,S+=i*$,T+=i*z,R+=i*W,L+=i*Y,I+=i*Z,k+=i*X,N+=i*Q,i=e[13],_+=i*H,v+=i*M,w+=i*U,A+=i*B,b+=i*K,E+=i*j,O+=i*G,P+=i*F,S+=i*V,T+=i*$,R+=i*z,L+=i*W,I+=i*Y,k+=i*Z,N+=i*X,C+=i*Q,i=e[14],v+=i*H,w+=i*M,A+=i*U,b+=i*B,E+=i*K,O+=i*j,P+=i*G,S+=i*F,T+=i*V,R+=i*$,L+=i*z,I+=i*W,k+=i*Y,N+=i*Z,C+=i*X,D+=i*Q,i=e[15],w+=i*H,A+=i*M,b+=i*U,E+=i*B,O+=i*K,P+=i*j,S+=i*G,T+=i*F,R+=i*V,L+=i*$,I+=i*z,k+=i*W,N+=i*Y,C+=i*Z,D+=i*X,x+=i*Q,s+=38*A,o+=38*b,a+=38*E,c+=38*O,u+=38*P,h+=38*S,l+=38*T,d+=38*R,p+=38*L,f+=38*I,g+=38*k,m+=38*N,y+=38*C,_+=38*D,v+=38*x,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-65536*n,i=o+n+65535,n=Math.floor(i/65536),o=i-65536*n,i=a+n+65535,n=Math.floor(i/65536),a=i-65536*n,i=c+n+65535,n=Math.floor(i/65536),c=i-65536*n,i=u+n+65535,n=Math.floor(i/65536),u=i-65536*n,i=h+n+65535,n=Math.floor(i/65536),h=i-65536*n,i=l+n+65535,n=Math.floor(i/65536),l=i-65536*n,i=d+n+65535,n=Math.floor(i/65536),d=i-65536*n,i=p+n+65535,n=Math.floor(i/65536),p=i-65536*n,i=f+n+65535,n=Math.floor(i/65536),f=i-65536*n,i=g+n+65535,n=Math.floor(i/65536),g=i-65536*n,i=m+n+65535,n=Math.floor(i/65536),m=i-65536*n,i=y+n+65535,n=Math.floor(i/65536),y=i-65536*n,i=_+n+65535,n=Math.floor(i/65536),_=i-65536*n,i=v+n+65535,n=Math.floor(i/65536),v=i-65536*n,i=w+n+65535,n=Math.floor(i/65536),w=i-65536*n,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-65536*n,i=o+n+65535,n=Math.floor(i/65536),o=i-65536*n,i=a+n+65535,n=Math.floor(i/65536),a=i-65536*n,i=c+n+65535,n=Math.floor(i/65536),c=i-65536*n,i=u+n+65535,n=Math.floor(i/65536),u=i-65536*n,i=h+n+65535,n=Math.floor(i/65536),h=i-65536*n,i=l+n+65535,n=Math.floor(i/65536),l=i-65536*n,i=d+n+65535,n=Math.floor(i/65536),d=i-65536*n,i=p+n+65535,n=Math.floor(i/65536),p=i-65536*n,i=f+n+65535,n=Math.floor(i/65536),f=i-65536*n,i=g+n+65535,n=Math.floor(i/65536),g=i-65536*n,i=m+n+65535,n=Math.floor(i/65536),m=i-65536*n,i=y+n+65535,n=Math.floor(i/65536),y=i-65536*n,i=_+n+65535,n=Math.floor(i/65536),_=i-65536*n,i=v+n+65535,n=Math.floor(i/65536),v=i-65536*n,i=w+n+65535,n=Math.floor(i/65536),w=i-65536*n,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=h,t[6]=l,t[7]=d,t[8]=p,t[9]=f,t[10]=g,t[11]=m,t[12]=y,t[13]=_,t[14]=v,t[15]=w}function O(t,e){E(t,e,e)}function P(t,e){const r=o();let i;for(i=0;i<16;i++)r[i]=e[i];for(i=253;i>=0;i--)O(r,r),2!==i&&4!==i&&E(r,r,e);for(i=0;i<16;i++)t[i]=r[i]}function S(t,e){const r=o(),i=o(),n=o(),s=o(),a=o(),c=o(),u=o(),l=o(),d=o();b(r,t[1],t[0]),b(d,e[1],e[0]),E(r,r,d),A(i,t[0],t[1]),A(d,e[0],e[1]),E(i,i,d),E(n,t[3],e[3]),E(n,n,h),E(s,t[2],e[2]),A(s,s,s),b(a,i,r),b(c,s,n),A(u,s,n),A(l,i,r),E(t[0],a,c),E(t[1],l,u),E(t[2],u,c),E(t[3],a,l)}function T(t,e,r){for(let i=0;i<4;i++)m(t[i],e[i],r)}function R(t,e){const r=o(),i=o(),n=o();P(n,e[2]),E(r,e[0],n),E(i,e[1],n),y(t,i),t[31]^=w(r)<<7}function L(t,e,r){f(t[0],a),f(t[1],c),f(t[2],c),f(t[3],a);for(let i=255;i>=0;--i){const n=r[i/8|0]>>(7&i)&1;T(t,e,n),S(e,t),S(t,t),T(t,e,n)}}function I(t,e){const r=[o(),o(),o(),o()];f(r[0],l),f(r[1],d),f(r[2],c),E(r[3],l,d),L(t,r,e)}function k(t){if(t.length!==e.TP)throw new Error(`ed25519: seed must be ${e.TP} bytes`);const r=(0,n.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;const i=new Uint8Array(32),s=[o(),o(),o(),o()];I(s,r),R(i,s);const a=new Uint8Array(64);return a.set(t),a.set(i,32),{publicKey:i,secretKey:a}}e.K=k;const N=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function C(t,e){let r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*N[n-(i-32)],r=Math.floor((e[n]+128)/256),e[n]-=256*r;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;n++)e[n]+=r-(e[31]>>4)*N[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=r*N[n];for(i=0;i<32;i++)e[i+1]+=e[i]>>8,t[i]=255&e[i]}function D(t){const e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let e=0;e<64;e++)t[e]=0;C(t,e)}function x(t,e){const r=o(),i=o(),n=o(),s=o(),h=o(),l=o(),d=o();return f(t[2],c),function(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),O(n,t[1]),E(s,n,u),b(n,n,t[2]),A(s,t[2],s),O(h,s),O(l,h),E(d,l,h),E(r,d,n),E(r,r,s),function(t,e){const r=o();let i;for(i=0;i<16;i++)r[i]=e[i];for(i=250;i>=0;i--)O(r,r),1!==i&&E(r,r,e);for(i=0;i<16;i++)t[i]=r[i]}(r,r),E(r,r,n),E(r,r,s),E(r,r,s),E(t[0],r,s),O(i,t[0]),E(i,i,s),v(i,n)&&E(t[0],t[0],p),O(i,t[0]),E(i,i,s),v(i,n)?-1:(w(t[0])===e[31]>>7&&b(t[0],a,t[0]),E(t[3],t[0],t[1]),0)}},93664:(t,e,r)=>{r.d(e,{JV:()=>f,O:()=>c,lg:()=>i});var i,n=r(17432),s=r(65606);function o(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;class a extends n.Dr{constructor(t,e,r){super(),this.method=t,this.url=e,this.cause=r,this.name="HttpRequestFailed",this.message=`${t} ${e} ${String(r)}`}}class c extends n.Dr{constructor(t,e,r,i,n){super(),this.message=t,this.status=e,this.statusText=r,this.body=i,this.url=n,this.name="HttpResponseError"}}class u extends n.Dr{constructor(t,e){super(),this.timeout=t,this.url=e,this.name="HttpTimeoutError",this.message=`HTTP request timeout of ${t}ms exceeded`}}!function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(i||(i={}));var h;let l,d=null===globalThis||void 0===globalThis?void 0:globalThis.fetch;const p="undefined"!==typeof s&&!!(null===(h=null===s||void 0===s?void 0:s.versions)||void 0===h?void 0:h.node);if(p){const t=r(73727),e=r(57923),i=r(17832);d=t.default||t,Number(s.versions.node.split(".")[0])>=19&&(l=t=>t.startsWith("https")?new e.Agent({keepAlive:!1}):new i.Agent({keepAlive:!1}))}class f{constructor(t=3e4){this.timeout=t}serialize(t){if(!t)return"";const e=[];for(const r in t)if(t.hasOwnProperty(r)&&"undefined"!==typeof t[r]){const i="function"===typeof t[r].toJSON?t[r].toJSON():t[r];if(null===i){e.push(encodeURIComponent(r));continue}if(Array.isArray(i)){i.forEach((t=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(t))}));continue}e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}const r=e.join("&");return r?`?${r}`:""}createRequest(t,e){return o(this,arguments,void 0,(function*({url:t,method:e,timeout:r=this.timeout,query:i,headers:n={},json:s=!0},o){const h=t+this.serialize(i);n["Content-Type"]||(n["Content-Type"]="application/json");const f=new AbortController,g=setTimeout((()=>f.abort()),r);try{const t=yield d(h,Object.assign({keepalive:!1,method:e,headers:n,body:JSON.stringify(o),signal:f.signal},p&&l?{agent:l(h)}:{}));if("undefined"===typeof t)throw new Error("Response is undefined");if(t.status>=400){const e=yield t.text();throw new c(`Http error response: (${t.status}) ${e}`,t.status,t.statusText,e,h)}return s?t.json():t.text()}catch(t){throw t instanceof Error&&"AbortError"===t.name?new u(r,h):t instanceof c?t:new a(String(e),h,t)}finally{clearTimeout(g)}}))}}},46576:(t,e,r)=>{r.d(e,{B3:()=>Kt});r(29160);var i=r(48110),n=r(17432),s=r(60346),o=r(48287).Buffer;const a=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),c=(t,e=8)=>t.toString(16).padStart(e,"0");var u;!function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.PKH_ARR="pkhArr",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_FAILING_NOOP="failing_noop",t.OP_ATTESTATION="attestation",t.OP_ATTESTATION_WITH_DAL="attestation_with_dal",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.BURN_LIMIT="burn_limit",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_UPDATE_COMPANION_KEY="update_companion_key",t.SIGNATURE_PROOF="signature_proof",t.OP_DRAIN_DELEGATE="drain_delegate",t.DEPOSITS_LIMIT="deposits_limit",t.OP_SET_DEPOSITS_LIMIT="set_deposits_limit",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message",t.OP_DAL_PUBLISH_COMMITMENT="dal_publish_commitment",t.SLOT_HEADER="slot_header"}(u||(u={}));const h={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT","9d":"Ticket","9e":"IS_IMPLICIT_ACCOUNT","9f":"INDEX_ADDRESS",a0:"GET_ADDRESS_INDEX"},l=(()=>{const t={};return Object.keys(h).forEach((e=>{t[h[e]]=e})),t})(),d={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"attestation",23:"attestation_with_dal",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",158:"transfer_ticket",112:"set_deposits_limit",113:"increase_paid_storage",114:"update_consensus_key",115:"update_companion_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message",230:"dal_publish_commitment",17:"failing_noop"},p=(()=>{const t={};return Object.keys(d).forEach((e=>{const r="string"===typeof e?parseInt(e,10):e;t[d[r]]=c(r,2)})),t})(),f={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit","06":"stake","07":"unstake","08":"finalize_unstake","09":"set_delegate_parameters"},g=(()=>{const t={};return Object.keys(f).forEach((e=>{t[f[e]]=e})),t})();class m extends n.Xi{constructor(t,e){super(),this.operation=t,this.errorDetail=e,this.name="InvalidOperationSchemaError",this.message="Invalid operation content recevied",e&&(this.message+=` ${e}.`)}}class y extends n.Xi{constructor(t){super(),this.entrypoint=t,this.name="OversizedEntryPointError",this.message=`Invalid entrypoint length "${t.length}", maximum length is "31".`}}class _ extends n.Xi{constructor(t){super(),this.ballotValue=t,this.name="InvalidBallotValueError",this.message=`Invalid ballot value "${t}" expecting one of the following: "yay", "nay", "pass".`}}class v extends n.Xi{constructor(t){super(),this.ballotValue=t,this.name="DecodeBallotValueError",this.message=`Invalid ballot value "${t}", cannot be decoded.`}}class w extends n.Xi{constructor(t){super(),this.value=t,this.name="UnexpectedMichelsonValueError",this.message=`Invalid Michelson value "${t}", unalbe to encode.`}}class A extends n.Xi{constructor(t){super(),this.message=t,this.name="OperationDecodingError"}}class b extends n.Xi{constructor(t){super(),this.message=t,this.name="OperationEncodingError"}}class E extends n.Xi{constructor(t){super(),this.op=t,this.name="UnsupportedOperationError",this.message=`Unsupported operation "${t}", can submit an issue on our github for feature request.`}}class O extends n.Xi{constructor(t){super(),this.pvm=t,this.name="UnsupportedPvmKindError",this.message=`Invalid Pvm kind "${t}" expecting either "arith" or "wasm_2_0_0".`}}class P extends n.Xi{constructor(t){super(),this.pvm=t,this.name="DecodePvmKindError",this.message=`Invalid Pvm kind "${t}", cannot be decoded.`}}class S extends n.Xi{constructor(t,e){super(),this.address=t,this.errorDetail=e,this.name="InvalidSmartRollupAddress",this.message=`Invalid smart rollup address "${t}"`,e&&(this.message+=` ${e}.`)}}class T extends n.Xi{constructor(t,e){super(),this.hash=t,this.errorDetail=e,this.name="InvalidSmartRollupCommitmentHashError",this.message=`Invalid smart rollup commitment hash "${t}"`,e&&(this.message+=` ${e}.`)}}class R extends n.Xi{constructor(t,e){super(),this.commitment=t,this.errorDetail=e,this.name="InvalidDalCommitmentError",this.message=`Invalid dal commitment "${t}"`,e&&(this.message+=` ${e}.`)}}class L{static fromHexString(t){const e=t.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(e)){const t=new Uint8Array((e.match(/([a-z]|\d){2}/g)||[]).map((t=>parseInt(t,16))));return new L(t)}throw new n.Sj(e)}constructor(t,e=0){this.arr=t,this.offset=e}consume(t){const e=this.arr.subarray(this.offset,this.offset+t);return this.offset+=t,e}get(t){return this.arr[this.offset+t]}length(){return this.arr.length-this.offset}slice(t,e){return new L(this.arr.slice(t,e))}}const I=t=>{if(Array.isArray(t)){const e=t.map((t=>I(t))).join(""),r=e.length/2;return`02${c(r)}${e}`}if((t=>"prim"in t)(t))return B(t);if((t=>"bytes"in t&&"string"===typeof t.bytes)(t))return C(t);if((t=>"string"in t&&"string"===typeof t.string)(t))return x(t);if((t=>"int"in t&&"string"===typeof t.int)(t))return M(t);throw new w(JSON.stringify(t))},k=t=>{const e=t.consume(1);switch(e[0]){case 10:return D(t);case 1:return H(t);case 0:return U(t);case 2:{const e=new L(N(t)),r=[];for(;e.length()>0;)r.push(k(e));return r}default:return K(t,e)}},N=(t,e=4)=>{const r=t.consume(e),i=parseInt(o.from(r).toString("hex"),16);return t.consume(i)},C=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new n.Sj(t.bytes);const e=t.bytes.length/2;return`0a${c(e)}${t.bytes}`},D=t=>{const e=N(t);return{bytes:o.from(e).toString("hex")}},x=t=>{const e=o.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${c(r)}${e}`},H=t=>{const e=N(t);return{string:o.from(e).toString("utf8")}},M=({int:t})=>{const e=new s.g(t,10),r="-"===e.toString(2)[0]?"1":"0",i=e.toString(2).replace(/-/g,""),n=i.length<=6?6:(i.length-6)%7?i.length+7-(i.length-6)%7:i.length,o=i.padStart(n,"0").match(/\d{6,7}/g).reverse();o[0]=r+o[0];return`00${o.map(((t,e)=>parseInt((e===o.length-1?"0":"1")+t,2).toString(16).padStart(2,"0"))).join("")}`},U=t=>{let e=t.consume(1)[0];const r=[];for(;128&e;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(64&r[0]);r[0]=127&r[0];const n=r.map(((t,e)=>t.toString(2).slice(0===e?-6:-7).padStart(0===e?6:7,"0"))).reverse();let o=new s.g(n.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},B=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,i=c(Math.min(2*r+e+3,9),2),n=l[t.prim];let s=(t.args||[]).map((t=>I(t))).join("");const o=Array.isArray(t.annots)?F(t.annots):"";return"LAMBDA"!==t.prim&&"LAMBDA_REC"!==t.prim||!r||(s=c(s.length/2)+s+c(0)),("pair"===t.prim||"Pair"===t.prim)&&r>2&&(s=""===o?c(s.length/2)+s+c(0):c(s.length/2)+s),"view"===t.prim&&t.args&&(s=c(s.length/2)+s+c(0)),`${i}${n}${s}${o}`},K=(t,e)=>{const r=(e[0]-3)%2===1;let i=Math.floor((e[0]-3)/2);const n=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:h[n]};if("LAMBDA"!==h[n]&&"LAMBDA_REC"!==h[n]||t.consume(4),"view"===h[n])return 0!=i?j(t,s):s;let o,a;("pair"===h[n]||"Pair"===h[n])&&i>2&&(o=G(t),i=0,a=V(t));const c=new Array(i).fill(0).map((()=>k(t)));return"LAMBDA"!==h[n]&&"LAMBDA_REC"!==h[n]||t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&""!==a[0]?s.annots=a:r&&(s.annots=V(t)),s},j=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map((()=>k(t))),t.consume(4),e),G=t=>{const e=new L(N(t)),r=[];for(;e.length()>0;)r.push(k(e));return r},F=t=>{const e=t.map((t=>o.from(t,"utf8").toString("hex"))).join("20"),r=e.length/2;return`${c(r)}${e}`},V=t=>{const e=t.consume(4),r=parseInt(o.from(e).toString("hex"),16),i=t.consume(r);return o.from(i).toString("hex").split("20").map((t=>o.from(t,"hex").toString("utf8")))},$=t=>e=>{const[r]=(0,i.$9)(e,[t]);return(0,i.hi)(r)},z=t=>e=>{const r=e.consume(i.Ne[t]);return(0,i.aP)(r,t)},W=z(i.Rk.Ed25519PublicKeyHash),Y=z(i.Rk.BlockHash),Z=t=>{const e=t.consume(1);return 0===e[0]?z(i.Rk.Ed25519PublicKeyHash)(t):1===e[0]?z(i.Rk.Secp256k1PublicKeyHash)(t):2===e[0]?z(i.Rk.P256PublicKeyHash)(t):3===e[0]?z(i.Rk.BLS12_381PublicKeyHash)(t):void 0},X=$(i.Rk.BlockHash),Q=$(i.Rk.Ed25519PublicKeyHash),J=t=>t?"ff":"00",q=t=>$(i.Rk.ProtocolHash)(t),tt=t=>z(i.Rk.ProtocolHash)(t),et=t=>255===t.consume(1)[0],rt=t=>{try{return(0,i.Ye)(t)}catch(e){throw new n.$u(t,e instanceof n.Xi?e.result:void 0)}},it=t=>{const e=[];let r=new s.A(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;){if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}{let t=r.mod(128);r=r.minus(t),r=r.dividedBy(128),t=t.plus(128),e.push(t.toString(16))}}return e.join("")},nt=t=>{let e=0;for(;e<t.length()&&0!==(128&t.get(e));)e+=1;let r=new s.A(0);for(let i=e;i>=0;i-=1){const e=127&t.get(i);r=r.multipliedBy(128),r=r.plus(e)}return t.consume(e+1),new s.A(r).toString()},st=$(i.Rk.ValueHash),ot=z(i.Rk.ValueHash),at=(t,e=8)=>`${c(t.length/2,e)}${t}`,ct=t=>z(i.Rk.SlotHeader)(t),ut={branch:u.BRANCH,contents:[u.OPERATION]},ht={pkh:u.TZ1,secret:u.SECRET},lt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,public_key:u.PUBLIC_KEY,proof:u.SIGNATURE_PROOF},dt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,delegate:u.DELEGATE},pt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,amount:u.ZARITH,destination:u.ADDRESS,parameters:u.PARAMETERS},ft={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,balance:u.ZARITH,delegate:u.DELEGATE,script:u.SCRIPT},gt={source:u.PKH,period:u.INT32,proposal:u.PROPOSAL,ballot:u.BALLOT_STATEMENT},mt={slot:u.INT16,level:u.INT32,round:u.INT32,block_payload_hash:u.BLOCK_PAYLOAD_HASH},yt={slot:u.INT16,level:u.INT32,round:u.INT32,block_payload_hash:u.BLOCK_PAYLOAD_HASH,dal_attestation:u.ZARITH},_t={level:u.INT32,nonce:u.RAW},vt={source:u.PKH,period:u.INT32,proposals:u.PROPOSAL_ARR},wt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,value:u.VALUE},At={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,ticket_contents:u.VALUE,ticket_ty:u.VALUE,ticket_ticketer:u.ADDRESS,ticket_amount:u.ZARITH,destination:u.ADDRESS,entrypoint:u.ENTRYPOINT},bt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,amount:u.ZARITH,destination:u.SMART_CONTRACT_ADDRESS},Et={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,pk:u.PUBLIC_KEY,proof:u.SIGNATURE_PROOF},Ot={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,pk:u.PUBLIC_KEY,proof:u.SIGNATURE_PROOF},Pt={consensus_key:u.PKH,delegate:u.PKH,destination:u.PKH},St={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,limit:u.DEPOSITS_LIMIT},Tt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,pvm_kind:u.PVM_KIND,kernel:u.PADDED_BYTES,parameters_ty:u.VALUE,whitelist:u.PKH_ARR},Rt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,message:u.SMART_ROLLUP_MESSAGE},Lt={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,rollup:u.SMART_ROLLUP_ADDRESS,cemented_commitment:u.SMART_ROLLUP_COMMITMENT_HASH,output_proof:u.PADDED_BYTES},It={source:u.PKH,fee:u.ZARITH,counter:u.ZARITH,gas_limit:u.ZARITH,storage_limit:u.ZARITH,slot_header:u.SLOT_HEADER},kt={arbitrary:u.PADDED_BYTES},Nt=t=>e=>r=>Object.keys(e).reduce(((i,n)=>{const s=e[n];if(r&&Array.isArray(s)){const e=t[s[0]],o=r[n];if(!Array.isArray(o))throw new b(`Invalid operation value "${JSON.stringify(o)}" of key "${n}, expected value to be Array.`);return i+o.reduce(((t,r)=>t+e(r)),"")}return i+(0,t[s])(r[n])}),""),Ct=t=>e=>r=>Object.keys(e).reduce(((i,n)=>{const s=e[n];if(Array.isArray(s)){const e=t[s[0]],o=[],a=r.length();for(;r.length()>0;)if(o.push(e(r)),a===r.length())throw new A("Unable to decode value");return Object.assign(Object.assign({},i),{[n]:o})}{const e=(0,t[s])(r);return"undefined"!==typeof e?Object.assign(Object.assign({},i),{[n]:e}):Object.assign({},i)}}),{}),Dt={[u.SECRET]:t=>a(t.consume(20)),[u.RAW]:t=>a(t.consume(32)),[u.TZ1]:W,[u.BRANCH]:Y,[u.ZARITH]:nt,[u.PUBLIC_KEY]:t=>{switch(t.consume(1)[0]){case 0:return z(i.Rk.Ed25519PublicKey)(t);case 1:return z(i.Rk.Secp256k1PublicKey)(t);case 2:return z(i.Rk.P256PublicKey)(t);case 3:return z(i.Rk.BLS12_381PublicKey)(t);default:throw new i.O7(void 0,i.nA.NO_PREFIX_MATCHED)}},[u.PKH]:Z,[u.PKH_ARR]:t=>{if(!et(t))return;const e=[];for(t.consume(4);t.length()>0;)e.push(Z(t));return e},[u.DELEGATE]:t=>{if(et(t))return Z(t)},[u.INT32]:t=>{const e=t.consume(4);let r=0;for(let t=0;t<e.length;t++)r|=e[t]<<8*(e.length-(t+1));return r},[u.SCRIPT]:t=>{const e=N(t),r=N(t);return{code:k(new L(e)),storage:k(new L(r))}},[u.BALLOT_STATEMENT]:t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new v(e[0].toString())}},[u.PROPOSAL]:tt,[u.PROPOSAL_ARR]:t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(tt(t));return e},[u.PARAMETERS]:t=>{if(0!==t.consume(1)[0]){const e=(t=>{const e=c(t.consume(1)[0],2);if(e in f)return f[e];{const e=N(t,1),r=o.from(e).toString("utf8");if(r.length>31)throw new y(r);return r}})(t),r=N(t);return{entrypoint:e,value:k(new L(r))}}},[u.ADDRESS]:t=>{switch(t.consume(1)[0]){case 0:return Z(t);case 1:{const e=z(i.Rk.ContractHash)(t);return t.consume(1),e}default:throw new n.Ms(t.toString(),": Unable to decode.")}},[u.SMART_ROLLUP_ADDRESS]:t=>z(i.Rk.SmartRollupHash)(t),[u.SMART_CONTRACT_ADDRESS]:t=>{if(1===t.consume(1)[0]){const e=z(i.Rk.ContractHash)(t);return t.consume(1),e}throw new n.mC(t.toString(),i.nA.NO_PREFIX_MATCHED)},[u.SMART_ROLLUP_COMMITMENT_HASH]:t=>z(i.Rk.SmartRollupCommitmentHash)(t),[u.VALUE]:t=>{const e=N(t);return k(new L(e))},[u.INT16]:t=>{const e=t.consume(2);let r=0;for(let t=0;t<e.length;t++)r|=e[t]<<8*(e.length-(t+1));return r},[u.BLOCK_PAYLOAD_HASH]:ot,[u.ENTRYPOINT]:t=>{const e=N(t);return o.from(e).toString("utf8")},[u.BURN_LIMIT]:t=>{const e=t.consume(1);if("00"!==o.from(e).toString("hex"))return nt(t)},[u.DEPOSITS_LIMIT]:t=>{const e=t.consume(1);if("00"!==o.from(e).toString("hex"))return nt(t)},[u.SIGNATURE_PROOF]:t=>{if(et(t))return(t=>{if(t.consume(4),"96"===t.length().toString())return z(i.Rk.BLS12_381Signature)(t);throw new n.vz("we only support decoding of BLSIG signatures")})(t)},[u.PVM_KIND]:t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";case 2:return"riscv";default:throw new P(e[0].toString())}},[u.PADDED_BYTES]:t=>{const e=N(t);return o.from(e).toString("hex")},[u.SMART_ROLLUP_MESSAGE]:t=>{const e=N(t);return((t,e=4)=>{const r=[];let i=t;for(;i.length();){const t=i.consume(e),n=parseInt(o.from(t).toString("hex"),16);r.push(i.consume(n)),i=i.slice(n+e)}return r})(new L(e)).map((t=>o.from(t).toString("hex")))},[u.SLOT_HEADER]:t=>{const e=t.consume(1);return{slot_index:Number(e[0].toString(10)),commitment:ct(t),commitment_proof:a(t.consume(96))}}};Dt[u.OPERATION]=(t=>e=>{const r=e.consume(1),i=d[r[0]];if(void 0===i)throw new E(r[0].toString());const n=t[i](e);if("object"!==typeof n)throw new A("Invalid operation, cannot be decoded.");return Object.assign({kind:i},n)})(Dt),Dt[u.OP_ACTIVATE_ACCOUNT]=t=>Ct(Dt)(ht)(t),Dt[u.OP_FAILING_NOOP]=t=>Ct(Dt)(kt)(t),Dt[u.OP_DELEGATION]=t=>Ct(Dt)(dt)(t),Dt[u.OP_TRANSACTION]=t=>Ct(Dt)(pt)(t),Dt[u.OP_ORIGINATION]=t=>Ct(Dt)(ft)(t),Dt[u.OP_BALLOT]=t=>Ct(Dt)(gt)(t),Dt[u.OP_ATTESTATION]=t=>Ct(Dt)(mt)(t),Dt[u.OP_ATTESTATION_WITH_DAL]=t=>Ct(Dt)(yt)(t),Dt[u.OP_SEED_NONCE_REVELATION]=t=>Ct(Dt)(_t)(t),Dt[u.OP_PROPOSALS]=t=>Ct(Dt)(vt)(t),Dt[u.OP_REVEAL]=t=>Ct(Dt)(lt)(t),Dt[u.OP_REGISTER_GLOBAL_CONSTANT]=t=>Ct(Dt)(wt)(t),Dt[u.OP_TRANSFER_TICKET]=t=>Ct(Dt)(At)(t),Dt[u.OP_INCREASE_PAID_STORAGE]=t=>Ct(Dt)(bt)(t),Dt[u.OP_UPDATE_CONSENSUS_KEY]=t=>Ct(Dt)(Et)(t),Dt[u.OP_UPDATE_COMPANION_KEY]=t=>Ct(Dt)(Ot)(t),Dt[u.OP_DRAIN_DELEGATE]=t=>Ct(Dt)(Pt)(t),Dt[u.OP_SMART_ROLLUP_ORIGINATE]=t=>Ct(Dt)(Tt)(t),Dt[u.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Ct(Dt)(Rt)(t),Dt[u.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Ct(Dt)(Lt)(t),Dt[u.OP_DAL_PUBLISH_COMMITMENT]=t=>Ct(Dt)(It)(t),Dt[u.MANAGER]=Ct(Dt)(ut),Dt[u.OP_SET_DEPOSITS_LIMIT]=t=>Ct(Dt)(St)(t);const xt={[u.SECRET]:t=>t,[u.RAW]:t=>t,[u.TZ1]:Q,[u.BRANCH]:X,[u.ZARITH]:it,[u.PUBLIC_KEY]:t=>{try{return(0,i.yr)(t)}catch(e){throw new i.O7(t,e instanceof n.Xi?e.result:void 0)}},[u.PKH]:rt,[u.PKH_ARR]:t=>{if(!t)return J(!1);if(0===t.length)return J(!0)+c(0);const e=t.reduce(((t,e)=>t+rt(e)),"");return J(!0)+c(e.length/2)+e},[u.DELEGATE]:t=>t?J(!0)+rt(t):J(!1),[u.SCRIPT]:t=>{const e=I(t.code),r=I(t.storage);return`${c(e.length/2,8)}${e}${c(r.length/2,8)}${r}`},[u.BALLOT_STATEMENT]:t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new _(t)}},[u.PROPOSAL]:q,[u.PROPOSAL_ARR]:t=>c(32*t.length)+t.map((t=>q(t))).join(""),[u.INT32]:t=>{const e=parseInt(String(t),10),r=[];for(let t=0;t<4;t++){const i=8*(4-(t+1));r.push((e&255<<i)>>i)}return o.from(r).toString("hex")},[u.PARAMETERS]:t=>{if(!t||"default"===t.entrypoint&&"prim"in t.value&&"Unit"===t.value.prim)return"00";const e=(t=>{if(t in g)return`${g[t]}`;if(t.length>31)throw new y(t);return`ff${I({string:t}).slice(8)}`})(t.entrypoint),r=I(t.value);return`ff${e}${c(r.length/2)}${r}`},[u.ADDRESS]:t=>(0,i.Qk)(t),[u.SMART_ROLLUP_ADDRESS]:t=>{try{return $(i.Rk.SmartRollupHash)(t)}catch(e){throw e instanceof n.Xi?new S(t):e}},[u.SMART_CONTRACT_ADDRESS]:t=>(0,i.Qk)(t),[u.SMART_ROLLUP_COMMITMENT_HASH]:t=>{try{return $(i.Rk.SmartRollupCommitmentHash)(t)}catch(e){throw e instanceof n.Xi?new T(t):e}},[u.VALUE]:t=>{const e=I(t);return`${c(e.length/2)}${e}`},[u.INT16]:t=>{const e=parseInt(String(t),10),r=[];for(let t=0;t<2;t++){const i=8*(2-(t+1));r.push((e&255<<i)>>i)}return o.from(r).toString("hex")},[u.BLOCK_PAYLOAD_HASH]:st,[u.ENTRYPOINT]:t=>`${I({string:t}).slice(2)}`,[u.BURN_LIMIT]:t=>t?`ff${it(t)}`:"00",[u.DEPOSITS_LIMIT]:t=>t?`ff${it(t)}`:"00",[u.SIGNATURE_PROOF]:t=>t?J(!0)+(t=>{try{const[e,r]=(0,i.$9)(t,i.RY);if(r===i.Rk.BLS12_381Signature)return at((0,i.hi)(e));throw new n.vz("we only support encoding of BLSIG signatures from protocol Seoul")}catch(e){throw e instanceof n.Xi?new n.s7(t,e.result):e}})(t):J(!1),[u.PVM_KIND]:t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";case"riscv":return"02";default:throw new O(t)}},[u.PADDED_BYTES]:at,[u.SMART_ROLLUP_MESSAGE]:t=>{const e=t.reduce(((t,e)=>t+`${c(e.length/2)}${e}`),"");return`${c(e.length/2)}${e}`},[u.SLOT_HEADER]:t=>c(t.slot_index,2)+(t=>{try{return $(i.Rk.SlotHeader)(t)}catch(e){throw e instanceof n.Xi?new R(t):e}})(t.commitment)+t.commitment_proof};xt[u.OPERATION]=(t=>e=>{if(!(e.kind in t)||!(e.kind in p))throw new n.$W(e.kind);return p[e.kind]+t[e.kind](e)})(xt),xt[u.OP_ACTIVATE_ACCOUNT]=t=>Nt(xt)(ht)(t),xt[u.OP_DELEGATION]=t=>Nt(xt)(dt)(t),xt[u.OP_TRANSACTION]=t=>Nt(xt)(pt)(t),xt[u.OP_ORIGINATION]=t=>Nt(xt)(ft)(t),xt[u.OP_BALLOT]=t=>Nt(xt)(gt)(t),xt[u.OP_ATTESTATION]=t=>Nt(xt)(mt)(t),xt[u.OP_ATTESTATION_WITH_DAL]=t=>Nt(xt)(yt)(t),xt[u.OP_SEED_NONCE_REVELATION]=t=>Nt(xt)(_t)(t),xt[u.OP_PROPOSALS]=t=>Nt(xt)(vt)(t),xt[u.OP_REVEAL]=t=>Nt(xt)(lt)(t),xt[u.OP_REGISTER_GLOBAL_CONSTANT]=t=>Nt(xt)(wt)(t),xt[u.OP_TRANSFER_TICKET]=t=>Nt(xt)(At)(t),xt[u.OP_INCREASE_PAID_STORAGE]=t=>Nt(xt)(bt)(t),xt[u.OP_UPDATE_CONSENSUS_KEY]=t=>Nt(xt)(Et)(t),xt[u.OP_UPDATE_COMPANION_KEY]=t=>Nt(xt)(Ot)(t),xt[u.OP_DRAIN_DELEGATE]=t=>Nt(xt)(Pt)(t),xt[u.OP_SMART_ROLLUP_ORIGINATE]=t=>Nt(xt)(Tt)(t),xt[u.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Nt(xt)(Rt)(t),xt[u.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Nt(xt)(Lt)(t),xt[u.OP_DAL_PUBLISH_COMMITMENT]=t=>Nt(xt)(It)(t),xt[u.MANAGER]=Nt(xt)(ut),xt[u.OP_SET_DEPOSITS_LIMIT]=t=>Nt(xt)(St)(t),xt[u.OP_FAILING_NOOP]=t=>Nt(xt)(kt)(t);const Ht={activate_account:ht,reveal:lt,delegation:dt,transaction:pt,origination:ft,ballot:gt,attestation:mt,attestation_with_dal:yt,seed_nonce_revelation:_t,proposals:vt,register_global_constant:wt,transfer_ticket:At,increase_paid_storage:bt,update_consensus_key:Et,update_companion_key:Ot,drain_delegate:Pt,set_deposits_limit:St,smart_rollup_originate:Tt,smart_rollup_add_messages:Rt,smart_rollup_execute_outbox_message:Lt,dal_publish_commitment:It,failing_noop:kt},Mt=t=>{const e=t.kind,r=Object.keys(t),i=(n="kind",r.filter((t=>t!==n)));var n;const s=Object.keys(Ht[e]);return o=i,s.filter((t=>!o.includes(t)));var o};var Ut;!function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",t.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",t.PtParisBx="PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ",t.PsParisCZ="PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi",t.PsQuebecn="PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg",t.PsRiotuma="PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7",t.PtSeouLou="PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh",t.PtTALLiNt="PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"}(Ut||(Ut={}));"undefined"===typeof globalThis.TextEncoder&&(globalThis.TextEncoder=TextEncoder),"undefined"===typeof globalThis.TextDecoder&&(globalThis.TextDecoder=TextDecoder);const Bt=Ut.PtTALLiNt;class Kt{constructor(t=Bt){var e;this.protocolHash=t,this.codec=(e=u.MANAGER,this.protocolHash,{encoder:xt[e],decoder:t=>{const r=L.fromHexString(t);return Dt[e](r)}})}forge(t){const e=(0,i.YV)(t.branch);if(e!==i.nA.VALID)throw new n.DL(t.branch,e);for(const e of t.contents){if(r=e.kind,!Object.keys(Ht).includes(r))throw new n.$W(e.kind);const t=Mt(e);if(1===t.length){if("delegation"===e.kind&&"delegate"===t[0])continue;if("origination"===e.kind&&"delegate"===t[0])continue;if("transaction"===e.kind&&"parameters"===t[0])continue;if("set_deposits_limit"===e.kind&&"limit"===t[0])continue;if("smart_rollup_originate"===e.kind&&"whitelist"===t[0])continue;if("update_consensus_key"===e.kind&&"proof"===t[0])continue;if("update_companion_key"===e.kind&&"proof"===t[0])continue;if("reveal"===e.kind&&"proof"===t[0])continue;throw new m(e,`missing properties "${t.join(", ")}"`)}if(t.length>1)throw new m(e,`missing properties "${t.join(", ")}"`)}var r;const s=this.codec.encoder(t).toLowerCase();return Promise.resolve(s)}parse(t){return Promise.resolve(this.codec.decoder(t))}}new Kt},35056:(t,e,r)=>{r.d(e,{OF:()=>v});r(71474);var i,n,s=r(48110),o=(r(64527),r(19444)),a=(r(34904),r(94329)),c=r(67379),u=r(17432),h=(r(78396),r(90749),r(22412),r(64974),r(39404),r(56133));function l(t,e,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)}function d(t,e,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,r):n?n.value=r:e.set(t,r),r}"function"===typeof SuppressedError&&SuppressedError;new WeakMap;class p{constructor(t){if(i.set(this,void 0),"string"===typeof t){const[e,r]=(0,s.$9)(t,[s.Rk.Ed25519PublicKey]);d(this,i,e,"f")}else d(this,i,t,"f")}compare(t){if(t instanceof p)return(0,s.ww)(this.bytes(),t.bytes());throw new s.O7("EdDSA key expected")}hash(){return(0,s.aP)((0,o.tW)(l(this,i,"f"),20),s.Rk.Ed25519PublicKeyHash)}bytes(){return l(this,i,"f")}toProtocol(){const t=new Uint8Array(l(this,i,"f").length+1);return t[0]=0,t.set(l(this,i,"f"),1),t}toString(){return(0,s.aP)(l(this,i,"f"),s.Rk.Ed25519PublicKey)}}i=new WeakMap;u.Xi;u.Xi;class f extends u.Xi{constructor(t){super(),this.message=t,this.name="InvalidCurveError"}}u.Xi;u.ic;u.Xi;const g={p256:{pk:s.Rk.P256PublicKey,sk:s.Rk.P256SecretKey,pkh:s.Rk.P256PublicKeyHash,sig:s.Rk.P256Signature,tag:2},secp256k1:{pk:s.Rk.Secp256k1PublicKey,sk:s.Rk.Secp256k1SecretKey,pkh:s.Rk.Secp256k1PublicKeyHash,sig:s.Rk.Secp256k1Signature,tag:1}};new WeakMap;class m{constructor(t,e){n.set(this,void 0);const[r,i]=(()=>{if("string"===typeof t){const[e,r]=(0,s.$9)(t,[s.Rk.Secp256k1PublicKey,s.Rk.P256PublicKey]);return[e,r===s.Rk.Secp256k1PublicKey?"secp256k1":"p256"]}if(void 0!==e)return[t,e];throw new f("missing curve type")})();d(this,n,r,"f"),this.curve=i}compare(t){if(t instanceof m){if(this.curve===t.curve){const e="secp256k1"===this.curve;return(0,s.ww)(this.bytes(e),t.bytes(e))}return"secp256k1"===this.curve?-1:1}throw new s.O7("ECDSA key expected")}hash(){const t=this.bytes();return(0,s.aP)((0,o.tW)(t,20),g[this.curve].pkh)}bytes(t=!0){if("secp256k1"===this.curve){return a.secp256k1.Point.fromHex(l(this,n,"f")).toBytes(t)}return c.s9.Point.fromHex(l(this,n,"f")).toBytes(t)}toProtocol(){const t=this.bytes(),e=new Uint8Array(t.length+1);return e[0]=g[this.curve].tag,e.set(t,1),e}toString(){const t=this.bytes();return(0,s.aP)(t,g[this.curve].pk)}}n=new WeakMap;var y;h.A.longSignatures;new WeakMap,new WeakMap;class _{constructor(t){if(y.set(this,void 0),"string"===typeof t){const[e,r]=(0,s.$9)(t,[s.Rk.BLS12_381PublicKey]);d(this,y,e,"f")}else d(this,y,t,"f")}compare(t){if(t instanceof _)return(0,s.ww)(this.bytes(),t.bytes());throw new s.O7("BLS key expected")}hash(){return(0,s.aP)((0,o.tW)(l(this,y,"f"),20),s.Rk.BLS12_381PublicKeyHash)}bytes(){return l(this,y,"f")}toProtocol(){const t=new Uint8Array(l(this,y,"f").length+1);return t[0]=3,t.set(l(this,y,"f"),1),t}toString(){return(0,s.aP)(l(this,y,"f"),s.Rk.BLS12_381PublicKey)}}y=new WeakMap;function v(t){const[e,r]=(0,s.$9)(t,[s.Rk.Ed25519PublicKey,s.Rk.Secp256k1PublicKey,s.Rk.P256PublicKey,s.Rk.BLS12_381PublicKey]);switch(r){case s.Rk.Ed25519PublicKey:return new p(e);case s.Rk.Secp256k1PublicKey:return new m(e,"secp256k1");case s.Rk.P256PublicKey:return new m(e,"p256");case s.Rk.BLS12_381PublicKey:return new _(e)}}new WeakMap},59710:(t,e,r)=>{r.d(e,{De:()=>vt,JJ:()=>we,L6:()=>mr,PE:()=>K.PE,U$:()=>ie,V4:()=>qt,Vc:()=>Wt,WJ:()=>zt,Zp:()=>ne,Zz:()=>_e,bf:()=>se,cv:()=>yr,hS:()=>ee,jq:()=>te,ob:()=>fr});var i=r(77766),n=r(93664),s=r(17432),o=r(93776),a=r(39741),c=r(51585),u=r(62467),h=r(49510),l=r(33315),d=r(49426),p=r(13288),f=r(72316),g=r(35079),m=r(61701),y=r(27291),_=r(11150),v=r(39697),w=r(52665),A=r(63720),b=r(95864),E=r(69111),O=r(59099),P=r(1005),S=r(81160),T=r(16126),R=r(66847),L=r(41900),I=r(46662),k=r(90593),N=r(28452),C=r(96222),D=r(87718),x=r(33160),H=r(67791),M=r(91283),U=r(60346),B=r(48110),K=r(630),j=r(67088),G=r(46576);r(35056);function F(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function V(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function $(t,e,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(t):i?i.value:e.get(t)}function z(t,e,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,r):n?n.value=r:e.set(t,r),r}"function"===typeof SuppressedError&&SuppressedError;class W{constructor(t){this.context=t}inject(t){return V(this,void 0,void 0,(function*(){let e;try{e=yield this.context.rpc.injectOperation(t)}catch(t){const e=". You may want to use --replace to provide adequate fee and replace it";throw t instanceof n.O&&t.message.includes(e)?function(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const i=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new n.O(`Http error response: (${t.status}) ${i}`,t.status,t.statusText,i,t.url)}return t}(t,e):t}return e}))}}class Y extends s.Q1{constructor(){super(),this.name="UnconfiguredSignerError",this.message="No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."}}class Z{publicKey(){return V(this,void 0,void 0,(function*(){throw new Y}))}publicKeyHash(){return V(this,void 0,void 0,(function*(){throw new Y}))}secretKey(){return V(this,void 0,void 0,(function*(){throw new Y}))}sign(t,e){return V(this,void 0,void 0,(function*(){throw new Y}))}}function X(t){return new o.c((e=>(t.on("data",(t=>{e.next(t)})),t.on("error",(t=>{e.error(t)})),t.on("close",(()=>{e.complete()})),()=>{t.close()})))}const Q=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),J=(t,e)=>{if(Array.isArray(t)){const r=t.find((t=>t.kind===e));if(r&&q(r,e))return r}},q=(t,e)=>t.kind===e,tt=t=>{var e;return!(t.kind!==i.w9.TRANSACTION||!(null===(e=t.destination)||void 0===e?void 0:e.startsWith("KT1")))||-1!==["origination","register_global_constant","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate"].indexOf(t.kind)},et=t=>-1!==["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate","smart_rollup_execute_outbox_message"].indexOf(t.kind),rt=t=>-1!==["transaction","delegation","origination","register_global_constant","increase_paid_storage","transfer_ticket","update_consensus_key","update_companion_key","smart_rollup_add_messages","smart_rollup_originate","smart_rollup_execute_outbox_message"].indexOf(t.kind),it=t=>"metadata"in t,nt=t=>it(t)&&"operation_result"in t.metadata,st=171,ot=157,at=447,ct=3252,ut=278,ht=277,lt=306,dt=736;var pt;!function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.PtNairobi="PtNairobiyssHuh87hEhfVBGCVrK3WnS8Z2FT4ymB5tAa4r1nQf",t.ProxfordY="ProxfordYmVfjWnRcgjWH36fW6PArwqykTFzotUxRs6gmTcZDuH",t.PtParisBx="PtParisBxoLz5gzMmn3d9WBQNoPSZakgnkMC2VNuQ3KXfUtUQeZ",t.PsParisCZ="PsParisCZo7KAh1Z1smVd9ZMZ1HHn5gkzbM94V3PLCpknFWhUAi",t.PsQuebecn="PsQuebecnLByd3JwTiGadoG4nGWi3HYiLXUjkibeFV8dCFeVMUg",t.PsRiotuma="PsRiotumaAMotcRoDWW1bysEhQy2n1M5fy8JgRp8jjRfHGmfeA7",t.PtSeouLou="PtSeouLouXkxhg39oWzjxDWaCydNfR3RxCUrNe4Q9Ro8BTehcbh",t.PtTALLiNt="PtTALLiNtPec7mE7yY4m3k26J8Qukef3E3ehzhfXgFZKGtDdAXu",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"}(pt||(pt={}));pt.Pt24m4xi,pt.PsBABY5H,pt.PsBabyM1,pt.PsCARTHA,pt.PsDELPH1,pt.PtEdo2Zk,pt.PsFLorena,pt.PtGRANADs,pt.PtHangz2,pt.PsiThaCa,pt.Psithaca2,pt.PtJakart2,pt.PtKathman,pt.PtLimaPtL,pt.PtMumbai2,pt.PtNairobi,pt.ProxfordY,pt.PtParisBx,pt.PsParisCZ,pt.PsQuebecn,pt.PsRiotuma,pt.PtSeouLou,pt.PtTALLiNt,pt.ProtoALpha;var ft;!function(t){t.MAINNET="NetXdQprcVkpaWU",t.GHOSTNET="NetXnHfVqm9iesp",t.SHADOWNET="NetXsqzbfFenSTS",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA",t.NAIROBINET="NetXyuzvDo2Ugzb",t.OXFORDNET2="NetXxWsskGahzQB",t.PARISBNET="NetXo8SqH1c38SS",t.PARISCNET="NetXXWAHLEvre9b",t.QUEBECNET="NetXuTeGinLEqxp",t.RIONET="NetXPdgaoabtBth",t.SEOULNET="NetXd56aBs1aeW3",t.TALLINNNET="NetXe8DbhW9A1eS"}(ft||(ft={}));const gt=t=>Math.round(37*mt(t)/10),mt=t=>{switch(t.substring(0,3)){case"tz1":return st;case"tz2":return ot;case"tz3":return at;case"tz4":return ct;default:throw new Error(`Cannot estimate reveal gas limit for ${t}`)}},yt=t=>Math.round(12*_t(t)/10),_t=t=>{switch(t.substring(0,3)){case"tz1":return ut;case"tz2":return ht;case"tz3":return lt;case"tz4":return 1.7*dt;default:throw new Error(`Cannot estimate reveal fee for ${t}`)}};class vt extends s.Qc{constructor(t,e,r){super(),this.errors=t,this.errorDetails=e,this.operationsWithResults=r,this.name="TezosOperationError",this.lastError=t[t.length-1],this.message=`(${this.kind}) ${this.id}`,"with"in this.lastError&&(this.lastError.with.string?this.message=this.lastError.with.string:this.lastError.with.int?this.message=this.lastError.with.int:this.message=JSON.stringify(this.lastError.with))}get id(){return this.lastError.id}get kind(){return this.lastError.kind}}class wt extends Error{constructor(t){super(),this.result=t,this.name="TezosPreapplyFailureError",this.message="Preapply returned an unexpected result"}}const At=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let t=0;t<e.length;t++)for(let i=0;i<e[t].contents.length;i++){const n=e[t].contents[i];nt(n)&&"fee"in n&&(r.push(Object.assign({fee:n.fee},n.metadata.operation_result)),Array.isArray(n.metadata.internal_operation_results)&&n.metadata.internal_operation_results.forEach((t=>r.push(t.result))))}return r},bt=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let i=[];for(let t=0;t<r.length;t++)for(let s=0;s<r[t].contents.length;s++){const o=r[t].contents[s];if(it(o)&&(nt(o)&&o.metadata.operation_result.status===e&&(i=i.concat(o.metadata.operation_result.errors||[])),it(n=o)&&"internal_operation_results"in n.metadata&&Array.isArray(o.metadata.internal_operation_results)))for(const t of o.metadata.internal_operation_results)"result"in t&&t.result.status===e&&(i=i.concat(t.result.errors||[]))}var n;return i};class Et extends s.IT{constructor(t){super(),this.message=t,this.name="OriginationOperationError"}}class Ot extends s.Xi{constructor(t){super(),this.message=t,this.name="InvalidEstimateValueError"}}class Pt extends s.Xi{constructor(t){super(),this.invalidConfirmations=t,this.name="InvalidConfirmationCountError",this.message=`Invalid confirmation count ${t} expecting at least 1`}}class St extends s.Dr{constructor(t){super(),this.message=t,this.name="ConfirmationTimeoutError"}}class Tt extends s.Qc{constructor(t,e){super(),this.message=t,this.cause=e,this.name="RPCResponseError"}}class Rt extends s.Q1{constructor(){super(),this.name="ConfirmationUndefinedError",this.message="Default confirmation count can not be undefined"}}class Lt extends s.Dr{constructor(t){super(),this.message=t,this.name="ObservableError"}}class It{operationResults(){return V(this,void 0,void 0,(function*(){return this._operationResult.pipe((0,w.$)()).toPromise()}))}receipt(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("Unable to get operation results");return((t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{U.A.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.A.ROUND_UP});const i=At({contents:t});let n=new U.A(0),s=new U.A(0),o=new U.A(0),a=new U.A(0),c=new U.A(0),u=new U.A(0);return i.forEach((t=>{o=o.plus(t.fee||0),a=a.plus(Array.isArray(t.originated_contracts)?t.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in t?e:0),n=n.plus(t.consumed_milligas||0),u=u.plus("paid_storage_size_diff"in t&&Number(t.paid_storage_size_diff)||0)})),s=s.plus(c).plus(a).plus(u),{totalFee:o,totalMilliGas:n,totalGas:n.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:u,totalStorageBurn:new U.A(s.multipliedBy(250))}})(t)}))}constructor(t,e,r){if(this.opHash=t,this.context=e,this._newHead$=r,this._operationResult=new a.m(1),this._includedInBlock=new a.m(1),this._included=!1,this.newHead$=this._newHead$.pipe((0,A.n)((t=>{var e,r;const i=null!==(r=null===(e=this.lastHead)||void 0===e?void 0:e.header.level)&&void 0!==r?r:t.header.level-1;return(0,c.y)(i+1,t.header.level-i-1).pipe((0,b.H)((t=>this.context.readProvider.getBlock(t))),(0,E.q)(t))})),(0,O.M)((t=>this.lastHead=t)),(0,P.u)({connector:()=>new a.m(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0})),this.confirmed$=this.newHead$.pipe((0,S.T)((t=>{for(const e of t.operations)for(const r of e)if(r.hash===this.opHash)return this._included=!0,this._includedInBlock.next(t),this._operationResult.next(r.contents),t})),(0,T.p)((t=>"undefined"!==typeof t)),(0,w.$)(),(0,P.u)({connector:()=>new a.m(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0})),(0,B.KE)(this.opHash)!==B.nA.VALID)throw new s.xs(this.opHash);this.confirmed$.pipe((0,w.$)(),(0,R.W)((()=>(0,u.of)(void 0)))).subscribe()}getCurrentConfirmation(){return V(this,void 0,void 0,(function*(){return this._included?(0,h.z)([this._includedInBlock,(0,l.H)(this.context.readProvider.getBlock("head"))]).pipe((0,S.T)((([t,e])=>e.header.level-t.header.level+1)),(0,w.$)()).toPromise():0}))}isInCurrentBranch(){return V(this,arguments,void 0,(function*(t="head"){if(!this._included)return!0;const e=yield this.context.readProvider.getBlockLevel(t),r=yield this._includedInBlock.pipe((0,w.$)()).toPromise();if(!r)throw new Lt("Inclusion block is undefined");const i=e-r.header.level;if(i<=0)return!0;const n=Math.min(r.header.level+i,r.header.level+60);return new Set(yield this.context.readProvider.getLiveBlocks(n)).has(r.hash)}))}confirmationObservable(t){if("undefined"!==typeof t&&t<1)throw new Pt(t);const{defaultConfirmationCount:e}=this.context.config,r=void 0!==t?t:e;if(void 0===r)throw new Rt;return(0,h.z)([this._includedInBlock,this.newHead$]).pipe((0,L.F)((([,t],[,e])=>t.hash===e.hash)),(0,S.T)((([t,e])=>({block:e,expectedConfirmation:r,currentConfirmation:e.header.level-t.header.level+1,completed:e.header.level-t.header.level>=r-1,isInCurrentBranch:()=>this.isInCurrentBranch(e.hash)}))),(0,I.v)((({completed:t})=>!t),!0))}confirmation(t){return this.confirmationObservable(t).toPromise()}}const kt=[i.w9.REVEAL,i.w9.ORIGINATION,i.w9.TRANSACTION,i.w9.DELEGATION,i.w9.REGISTER_GLOBAL_CONSTANT,i.w9.INCREASE_PAID_STORAGE,i.w9.TRANSFER_TICKET];class Nt extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e,this.getOriginatedContractAddresses=()=>V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t){const e=t.filter((t=>"origination"===t.kind));let r=[];for(const t of e)t.metadata.operation_result.originated_contracts&&(r=[...r,...t.metadata.operation_result.originated_contracts]);return r}throw new Lt("Unable to fetch operation results")}))}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return t.find((t=>t.kind===i.w9.REVEAL));throw new Lt("Unable to fetch operation results")}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.operationResults();if(t)return t.filter((t=>-1!==kt.indexOf(t.kind))).map((t=>{if(nt(t)){return t.metadata.operation_result.status}return"unknown"}))[0]||"unknown";throw new Lt("Unable to fetch operation results")}))}}class Ct extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return t.find((t=>t.kind===i.w9.REVEAL));throw new Lt("Unable to fetch operation result")}))}delegationOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return t.find((t=>t.kind===i.w9.DELEGATION));throw new Lt("Unable to fetch operation result")}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.delegationOperation();return t?t.metadata.operation_result.status:"unknown"}))}}class Dt extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return t.find((t=>t.kind===i.w9.REVEAL));throw new Lt("Unable to fetch operation result")}))}increasePaidStorageOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return t.find((t=>t.kind===i.w9.INCREASE_PAID_STORAGE));throw new Lt("Unable to fetch operation result")}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.increasePaidStorageOperation();return t?t.metadata.operation_result.status:"unknown"}))}}class xt extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}originationOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return J(t,i.w9.ORIGINATION);throw new Lt("Unable to fetch operation result")}))}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return J(t,i.w9.REVEAL);throw new Lt("Unable to fetch operation result")}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.originationOperation();return t?t.metadata.operation_result.status:"unknown"}))}contract(){return V(this,void 0,void 0,(function*(){const t=yield this.originationOperation(),e=((null===t||void 0===t?void 0:t.metadata.operation_result.originated_contracts)||[])[0];return this.context.wallet.at(e)}))}}class Ht extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("operationResult returned undefined");return t.find((t=>t.kind===i.w9.REVEAL))}))}transactionOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("operationResult returned undefined");return t.find((t=>t.kind===i.w9.TRANSACTION))}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.transactionOperation();return t?t.metadata.operation_result.status:"unknown"}))}}class Mt extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("operationResult returned undefined");return t.find((t=>t.kind===i.w9.REVEAL))}))}transferTicketOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("operationResult returned undefined");return t.find((t=>t.kind===i.w9.TRANSFER_TICKET))}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.transferTicketOperation();return t?t.metadata.operation_result.status:"unknown"}))}}class Ut extends It{constructor(t,e,r){super(t,e,r),this.opHash=t,this.context=e}revealOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(!t)throw new Lt("operationResult returned undefined");return t.find((t=>t.kind===i.w9.REVEAL))}))}registerGlobalConstantOperation(){return V(this,void 0,void 0,(function*(){const t=yield this.operationResults();if(t)return J(t,i.w9.REGISTER_GLOBAL_CONSTANT);throw new Lt("Unable to fetch operation result")}))}status(){return V(this,void 0,void 0,(function*(){if(!this._included)return"pending";const t=yield this.registerGlobalConstantOperation();return t?t.metadata.operation_result.status:"unknown"}))}globalConstantHash(){return V(this,void 0,void 0,(function*(){const t=yield this.registerGlobalConstantOperation();return null===t||void 0===t?void 0:t.metadata.operation_result.global_address}))}}const Bt=(t,e,r)=>{return t.pipe((i=1e3*e.config.confirmationPollingTimeoutSecond,function(t){return new d.t(null).pipe((0,k.w)({each:i,with:()=>(0,p.$)((()=>new St("Confirmation polling timed out")))}),(0,N.Z)((()=>t)))}),(0,P.u)({connector:()=>new a.m(1),resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}));var i};class Kt{constructor(t){this.context=t,this.sharedHeadObs=(0,f.v)((()=>X(this.context.stream.subscribeBlock("head"))))}createNewHeadObservable(){return V(this,void 0,void 0,(function*(){return Bt(this.sharedHeadObs,this.context)}))}createPastBlockWalker(t,e=1){return(0,l.H)(this.context.readProvider.getBlock(t)).pipe((0,A.n)((t=>1===e?(0,u.of)(t):(0,c.y)(t.header.level,e-1).pipe((0,C.Z)(t),(0,b.H)((t=>V(this,void 0,void 0,(function*(){return this.context.readProvider.getBlock("number"===typeof t?t:t.header.level)}))))))))}createHeadObservableFromConfig(t){return V(this,arguments,void 0,(function*({blockIdentifier:t}){const e=[];return t&&e.push(this.createPastBlockWalker(t)),e.push(yield this.createNewHeadObservable()),(0,g.x)(...e)}))}createOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new It(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createBatchOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Nt(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createTransactionOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Ht(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createTransferTicketOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Mt(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createDelegationOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Ct(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createOriginationOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new xt(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createIncreasePaidStorageOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Dt(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}createRegisterGlobalConstantOperation(t){return V(this,arguments,void 0,(function*(t,e={}){return new Ut(t,this.context.clone(),yield this.createHeadObservableFromConfig(e))}))}}class jt{get includedInBlock(){return this._foundAt}constructor(t,e,r,i){if(this.hash=t,this.raw=e,this.results=r,this.context=i,this._pollingConfig$=new a.m(1),this.currentHead$=this._pollingConfig$.pipe((0,A.n)((t=>new d.t(t).pipe((0,k.w)({each:1e3*t.timeout,with:()=>(0,p.$)((()=>new St("Confirmation polling timed out")))})))),(0,A.n)((()=>(0,f.v)((()=>X(this.context.stream.subscribeBlock("head")))).pipe((0,A.n)((t=>{var e,r;const i=null!==(r=null===(e=this.lastHead)||void 0===e?void 0:e.header.level)&&void 0!==r?r:t.header.level-1;return(0,c.y)(i+1,t.header.level-i-1).pipe((0,b.H)((t=>this.context.readProvider.getBlock(t))),(0,E.q)(t))})),(0,O.M)((t=>this.lastHead=t))))),(0,D.t)({refCount:!0})),this.confirmed$=this.currentHead$.pipe((0,S.T)((t=>{for(let e=3;e>=0;e--)t.operations[e].forEach((e=>{e.hash===this.hash&&(this._foundAt=t.header.level)}));if(t.header.level-this._foundAt>=0)return this._foundAt})),(0,T.p)((t=>void 0!==t)),(0,w.$)(),(0,D.t)()),this._foundAt=Number.POSITIVE_INFINITY,(0,B.KE)(this.hash)!==B.nA.VALID)throw new s.xs(this.hash);this.confirmed$.pipe((0,w.$)(),(0,R.W)((()=>(0,u.of)(m.w)))).subscribe()}get revealOperation(){return Array.isArray(this.results)&&this.results.find((t=>"reveal"===t.kind))}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map((t=>nt(t)?t.metadata.operation_result.status:"unknown"))[0]||"unknown"}confirmation(t,e){return V(this,void 0,void 0,(function*(){if("undefined"!==typeof t&&t<1)throw new Pt(t);const{defaultConfirmationCount:r,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:e||i});const n=void 0!==t?t:r;return new Promise(((t,e)=>{this.confirmed$.pipe((0,A.n)((()=>this.currentHead$)),(0,T.p)((t=>t.header.level-this._foundAt>=n-1)),(0,w.$)()).subscribe({error:t=>e(t),complete:()=>t(this._foundAt+(n-1))})}))}))}}class Gt extends s.Xi{constructor(t,e,r){super(),this.smartContractMethodName=t,this.sigs=e,this.invalidParams=r,this.name="InvalidParameterError",this.message=`${t} Received ${r.length} arguments while expecting one of the following signatures (${JSON.stringify(e)})`}}class Ft extends s.Xi{constructor(t){super(),this.source=t,this.name="InvalidDelegationSource",this.message=`Since Babylon delegation source can no longer be a contract address ${t}. Please use the smart contract abstraction to set your delegate.`}}class Vt extends s.Xi{constructor(t,e){super(),this.message=t,this.data=e,this.name="InvalidCodeParameter"}}class $t extends s.Xi{constructor(t,e){super(),this.message=t,this.data=e,this.name="InvalidInitParameter"}}class zt extends s.Qc{constructor(t,e,r,i){super(),this.message=t,this.viewName=e,this.failWith=r,this.cause=i,this.name="ViewSimulationError"}}const Wt=t=>{if(Yt(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},Yt=t=>{try{JSON.parse(t)}catch(t){return!1}return!0};class Zt extends s.Xi{constructor(t){super(),this.info=t,this.name="InvalidViewSimulationContext",this.message=`${t} Please configure the context of the view execution in the executeView method.`}}class Xt extends s.Qc{constructor(t){super(),this.message=t,this.name="RevealOperationError"}}class Qt extends s.Xi{constructor(t){super(),this.message=t,this.name}}class Jt extends s.Xi{constructor(t){super(),this.message=t,this.name="InvalidBalanceError"}}const qt=t=>V(void 0,[t],void 0,(function*({code:t,init:e,balance:r="0",delegate:n,storage:s,fee:o,gasLimit:a,storageLimit:c,mutez:u=!1}){if(void 0!==s&&void 0!==e)throw new Qt("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new Vt("Wrong code parameter type, expected an array",t);let h;if(void 0!==s){const e=t.find((t=>"prim"in t&&"storage"===t.prim));if(void 0===(null===e||void 0===e?void 0:e.args))throw new Vt("The storage section is missing from the script",t);h=new K.Sj(e.args[0]).Encode(s)}else{if(void 0===e||"object"!==typeof e)throw new $t("Wrong init parameter type, expected JSON Michelson",e);h=e}const l={code:t,storage:h};if(isNaN(Number(r)))throw new Jt(`Invalid Balance "${r}", cannot be converted to a number`);const d={kind:i.w9.ORIGINATION,fee:o,gas_limit:a,storage_limit:c,balance:u?r.toString():(0,B.GP)("tz","mutez",r).toString(),script:l};return n&&(d.delegate=n),d})),te=t=>V(void 0,[t],void 0,(function*({to:t,amount:e,parameter:r,fee:n,gasLimit:s,storageLimit:o,mutez:a=!1}){return{kind:i.w9.TRANSACTION,fee:n,gas_limit:s,storage_limit:o,amount:a?e.toString():(0,B.GP)("tz","mutez",e).toString(),destination:t,parameters:r}})),ee=t=>V(void 0,[t],void 0,(function*({delegate:t,source:e,fee:r,gasLimit:n,storageLimit:s}){return{kind:i.w9.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:s,delegate:t}})),re=(t,e,r)=>V(void 0,[t,e,r],void 0,(function*({fee:t,gasLimit:e,storageLimit:r,proof:n},s,o){return{kind:i.w9.REVEAL,fee:t,public_key:o,source:s,gas_limit:null!==e&&void 0!==e?e:gt(s),storage_limit:r,proof:n}})),ie=t=>V(void 0,[t],void 0,(function*({value:t,source:e,fee:r,gasLimit:n,storageLimit:s}){return{kind:i.w9.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:s,source:e}})),ne=t=>V(void 0,[t],void 0,(function*({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:s,entrypoint:o,source:a,fee:c,gasLimit:u,storageLimit:h}){return{kind:i.w9.TRANSFER_TICKET,fee:c,gas_limit:u,storage_limit:h,source:a,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:s,entrypoint:o}})),se=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,amount:s,destination:o}){return{kind:i.w9.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:s,destination:o}})),oe=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,pk:s,proof:o}){return{kind:i.w9.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:s,proof:o}})),ae=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,pk:s,proof:o}){return{kind:i.w9.UPDATE_COMPANION_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:s,proof:o}})),ce=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,message:s}){return{kind:i.w9.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:n,message:s}})),ue=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,pvmKind:s,kernel:o,parametersType:a}){return{kind:i.w9.SMART_ROLLUP_ORIGINATE,source:t,fee:e,gas_limit:r,storage_limit:n,pvm_kind:s,kernel:o,parameters_ty:a}})),he=t=>V(void 0,[t],void 0,(function*({source:t,fee:e,gasLimit:r,storageLimit:n,rollup:s,cementedCommitment:o,outputProof:a}){return{kind:i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE,source:t,fee:e,gas_limit:r,storage_limit:n,rollup:s,cemented_commitment:o,output_proof:a}}));class le{get rpc(){return this.context.rpc}get signer(){return this.context.signer}constructor(t){this.context=t}forge(t){return V(this,arguments,void 0,(function*({opOb:{branch:t,contents:e,protocol:r},counter:i}){return{opbytes:yield this.context.forger.forge({branch:t,contents:e}),opOb:{branch:t,contents:e,protocol:r},counter:i}}))}estimate(t,e){return V(this,void 0,void 0,(function*(){var{fee:r,gasLimit:i,storageLimit:n}=t,s=F(t,["fee","gasLimit","storageLimit"]);let o=r,a=i,c=n;if(o&&o%1!==0)throw new Ot(`Fee value must not be a decimal: ${o}`);if(a&&a%1!==0)throw new Ot(`Gas Limit value must not be a decimal: ${a}`);if(c&&c%1!==0)throw new Ot(`Storage Limit value must not be a decimal: ${c}`);if(void 0===r||void 0===i||void 0===n){const t=yield e(Object.assign({fee:r,gasLimit:i,storageLimit:n},s));null!==o&&void 0!==o||(o=t.suggestedFeeMutez),null!==a&&void 0!==a||(a=t.gasLimit),null!==c&&void 0!==c||(c=t.storageLimit)}return{fee:o,gasLimit:a,storageLimit:c}}))}getRPCOp(t){return V(this,void 0,void 0,(function*(){switch(t.kind){case i.w9.TRANSACTION:return te(Object.assign({},t));case i.w9.ORIGINATION:return qt(yield this.context.parser.prepareCodeOrigination(Object.assign({},t)));case i.w9.DELEGATION:return ee(Object.assign({},t));case i.w9.REGISTER_GLOBAL_CONSTANT:return ie(Object.assign({},t));case i.w9.INCREASE_PAID_STORAGE:return se(Object.assign({},t));case i.w9.UPDATE_CONSENSUS_KEY:return oe(Object.assign({},t));case i.w9.UPDATE_COMPANION_KEY:return ae(Object.assign({},t));case i.w9.TRANSFER_TICKET:return ne(Object.assign({},t));case i.w9.SMART_ROLLUP_ADD_MESSAGES:return ce(Object.assign({},t));case i.w9.SMART_ROLLUP_ORIGINATE:return ue(Object.assign({},t));case i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return he(Object.assign({},t));default:throw new B.$W(t.kind)}}))}simulate(t){return V(this,void 0,void 0,(function*(){return{opResponse:yield this.rpc.simulateOperation(t),op:t,context:this.context.clone()}}))}isRevealOpNeeded(t,e){return V(this,void 0,void 0,(function*(){return!(!(yield this.isAccountRevealRequired(e))||!this.isRevealRequiredForOpType(t))}))}isAccountRevealRequired(t){return V(this,void 0,void 0,(function*(){return!(yield this.context.readProvider.isAccountRevealed(t,"head"))}))}isRevealRequiredForOpType(t){let e=!1;for(const r of t)rt(r)&&(e=!0);return e}signAndInject(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.sign(t.opbytes,new Uint8Array([3]));t.opbytes=e.sbytes,t.opOb.signature=e.prefixSig;const r=[],i=yield this.rpc.preapplyOperations([t.opOb]);if(!Array.isArray(i))throw new wt(i);for(let t=0;t<i.length;t++)for(let e=0;e<i[t].contents.length;e++)r.push(i[t].contents[e]);const n=bt(i);if(n.length)throw new vt(n,"Error occurred during validation simulation of operation",r);return{hash:yield this.context.injector.inject(t.opbytes),forgedBytes:t,opResponse:r,context:this.context.clone()}}))}}const de="default";class pe{constructor(t,e,r,i,n="unit",s=!0,o=!1){this.provider=t,this.address=e,this.parameterSchema=r,this.name=i,this.args=n,this.isMultipleEntrypoint=s,this.isAnonymous=o}getSignature(){const t=this.parameterSchema.generateSchema();if(this.isAnonymous){const e=t.schema;return null===e||void 0===e?void 0:e[this.name]}return t}send(t={}){return this.provider&&"pkh"in this.provider?this.provider.transfer(this.toTransferParams(t)).send():this.provider.transfer(this.toTransferParams(t))}toTransferParams({fee:t,gasLimit:e,storageLimit:r,source:i,amount:n=0,mutez:s=!1}={}){return{to:this.address,amount:n,fee:t,mutez:s,source:i,gasLimit:e,storageLimit:r,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:de,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class fe{constructor(t,e,r,i,n,s="Unit"){this._rpc=t,this._readProvider=e,this._contractAddress=r,this._smartContractViewSchema=i,this._contractStorageType=n,this._args=s}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(t){return V(this,void 0,void 0,(function*(){this.verifyContextExecution(t);const e=yield this._readProvider.getChainId(),r=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:r,chain_id:e,source:t.viewCaller};return t.source&&(i.payer=t.source),this.executeViewAndDecodeResult(i)}))}verifyContextExecution(t){if(t.source&&(0,B.jl)(t.source)!==B.nA.VALID)throw new Zt(`The source account who initialized the view execution is invalid: ${t.source}.`);if(!t.viewCaller||(0,B.jl)(t.viewCaller)!==B.nA.VALID)throw new Zt(`The contract which is the caller of view is invalid: ${t.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(t){throw new s.mx(this._smartContractViewSchema.viewName,this.getSignature(),this._args,t)}}adaptViewCodeToContext(t,e,r){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:r}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:e}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return t.forEach(((n,s)=>{n.prim in i&&(t[s]=Object(i)[n.prim]),n.args&&0!==n.args.length?this.adaptViewCodeToContext(n.args,e,r):Array.isArray(n)&&this.adaptViewCodeToContext(n,e,r)})),t}executeViewAndDecodeResult(t){return V(this,void 0,void 0,(function*(){let e;try{e=(yield this._rpc.runScriptView(t)).data}catch(t){const e=Wt(t);throw e?new zt(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(e)}`,this._smartContractViewSchema.viewName,e,t):t}return this._smartContractViewSchema.decodeViewResult(e)}))}}class ge{constructor(t,e){this.provider=t,this.contractAddress=e}createContractMethodObjectParam(t,e,r,i=!0,n=!1){return new pe(this.provider,this.contractAddress,t,e,r,i,n)}createContractViewObjectParam(t,e,r,i,n){return new fe(t,e,this.contractAddress,r,i,n)}}class me{constructor(t,e,r,i,n,s,o){this.currentContract=t,this.name=e,this.callbackParametersSchema=r,this.parameterSchema=i,this.args=n,this.rpc=s,this.readProvider=o}read(t){return V(this,void 0,void 0,(function*(){const e=(0,B.yC)(null!==t&&void 0!==t?t:"");if((0,B.Lg)(null!==t&&void 0!==t?t:"")==B.nA.VALID)throw new s.dy("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(t&&e!==B.nA.VALID)throw new s.qD(t,e);const r=this.parameterSchema.Encode(...this.args),i=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:t||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(i.data)}))}}class ye{constructor(t,e,r,i,n,s,o){this.address=t,this.script=e,this.storageProvider=i,this.entrypoints=n,this.rpc=s,this.readProvider=o,this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new ge(r,t),this.schema=K.Sj.fromRPCResponse({script:this.script}),this.parameterSchema=K.Pe.fromRPCResponse({script:this.script}),this.viewSchema=K.X8.fromRPCResponse({script:this.script}),0!==this.viewSchema.length&&this._initializeOnChainViews(this,s,this.readProvider,this.viewSchema),this.eventSchema=K.g$.fromRPCResponse({script:this.script}),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(t,e,r,i){const n=this.parameterSchema,s=Object.keys(e);if(n.isMultipleEntryPoint){s.forEach((n=>{const s=new K.Pe(e[n]);if(this.methodsObject[n]=function(e){return t.contractMethodFactory.createContractMethodObjectParam(s,n,e)},(t=>{let e=!1;if("prim"in t&&"pair"===t.prim&&t.args){const r=t.args[t.args.length-1];"prim"in r&&"contract"===r.prim&&(e=!0)}return e})(e[n])){const s=function(...s){const o=e[n].args[0],a=new K.Pe(o),c=e[n].args[1].args[0],u=new K.Pe(c);return((t,e,r)=>{const i=e.ExtractSignatures();if(!i.find((e=>e.length===t.length)))throw new Gt(r,i,t)})(s,a,n),new me(t,n,u,a,s,r,i)};this.views[n]=s}}));const o=n.generateSchema();(o.schema&&"object"===typeof o.schema?Object.keys(o.schema):[]).filter((t=>-1===Object.keys(e).indexOf(t))).forEach((e=>{this.methodsObject[e]=function(r){return t.contractMethodFactory.createContractMethodObjectParam(n,e,r,!1,!0)}}))}else{const e=this.parameterSchema;this.methodsObject[de]=function(r){return t.contractMethodFactory.createContractMethodObjectParam(e,de,r,!1)}}}_initializeOnChainViews(t,e,r,i){const n=this.schema.val;i.forEach((i=>{this.contractViews[i.viewName]=function(s){return t.contractMethodFactory.createContractViewObjectParam(e,r,i,n,s)}}))}storage(){return this.storageProvider.getStorage(this.address,this.schema)}}function _e(t,e){return(r,i)=>e(t(r,i),i)}class ve{constructor(t,e){this.id=t,this.provider=e}getSaplingDiff(t){return V(this,void 0,void 0,(function*(){return this.provider.getSaplingDiffByID(this.id.toString(),t)}))}getId(){return this.id.toString()}}class we{constructor(t,e,r){this.id=t,this.schema=e,this.provider=r}get(t,e){return V(this,void 0,void 0,(function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),t,this.schema,e)}catch(t){if(t instanceof n.O&&t.status===n.lg.NOT_FOUND)return;throw t}}))}getMultipleValues(t,e){return V(this,arguments,void 0,(function*(t,e,r=5){return this.provider.getBigMapKeysByID(this.id.toString(),t,this.schema,e,r)}))}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const Ae=t=>({big_map:(e,r)=>{if(e&&"int"in e&&void 0!==e.int){const i=new K.Sj(r);return new we(new U.A(e.int),i,t)}return{}},sapling_state:e=>e&&"int"in e&&void 0!==e.int?new ve(new U.A(e.int),t):{}});var be;const Ee=(t,e)=>{var r,i,n;return{fee:null!==(r=t.fee)&&void 0!==r?r:e.fee,gasLimit:null!==(i=t.gasLimit)&&void 0!==i?i:e.gasLimit,storageLimit:null!==(n=t.storageLimit)&&void 0!==n?n:e.storageLimit}};class Oe extends le{constructor(t){super(t),this.context=t,be.set(this,void 0),z(this,be,{},"f")}getBlockHash(t){return V(this,void 0,void 0,(function*(){return this.context.readProvider.getBlockHash(null!==t&&void 0!==t?t:"head~2")}))}getProtocolHash(){return V(this,void 0,void 0,(function*(){return this.context.readProvider.getNextProtocol("head")}))}getHeadCounter(t){return V(this,void 0,void 0,(function*(){var e;return null!==(e=this.context.readProvider.getCounter(t,"head"))&&void 0!==e?e:"0"}))}adjustGasForBatchOperation(t,e,r){return U.A.min(e,t.div(r+1))}getOperationLimits(t,e){return V(this,void 0,void 0,(function*(){const{hard_gas_limit_per_operation:r,hard_gas_limit_per_block:i,hard_storage_limit_per_operation:n}=t;return{fee:0,gasLimit:e?Math.floor(this.adjustGasForBatchOperation(i,r,e).toNumber()):r.toNumber(),storageLimit:n.toNumber()}}))}getFee(t,e,r){(!$(this,be,"f")[e]||$(this,be,"f")[e]<r)&&($(this,be,"f")[e]=r);return{counter:`${++$(this,be,"f")[e]}`,fee:"undefined"===typeof t.fee?"0":`${t.fee}`,gas_limit:"undefined"===typeof t.gas_limit?"0":`${t.gas_limit}`,storage_limit:"undefined"===typeof t.storage_limit?"0":`${t.storage_limit}`}}getSource(t,e,r){return{source:"undefined"===typeof t.source?r||e:t.source}}addRevealOperationIfNeeded(t,e){return V(this,void 0,void 0,(function*(){if(rt(t)){const r=[t],{publicKey:i,pkh:n}=yield this.getKeys();if(yield this.isAccountRevealRequired(e)){if(!i)throw new s._d(n);const[,t]=(0,B.$9)(n,B.Rv);return r.unshift(yield re({fee:yt(n),storageLimit:0,gasLimit:gt(n),proof:t===B.Rk.BLS12_381PublicKeyHash?(yield this.signer.provePossession()).prefixSig:void 0},e,i)),r}}return t}))}getKeys(){return V(this,void 0,void 0,(function*(){const t=this.context.isAnySignerConfigured();return{pkh:t?yield this.signer.publicKeyHash():yield this.context.wallet.pkh(),publicKey:t?yield this.signer.publicKey():yield this.context.wallet.pk()}}))}convertIntoArray(t){return Array.isArray(t)?[...t]:[t]}constructOpContents(t,e,r,n,o){return t.map((t=>{switch(t.kind){case i.w9.ACTIVATION:case i.w9.DRAIN_DELEGATE:return Object.assign({},t);case i.w9.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},t),{balance:"undefined"!==typeof t.balance?`${t.balance}`:"0"}),this.getSource(t,r,n)),this.getFee(t,r,e));case i.w9.TRANSACTION:{const i=Object.assign(Object.assign(Object.assign(Object.assign({},t),{amount:"undefined"!==typeof t.amount?`${t.amount}`:"0"}),this.getSource(t,r,n)),this.getFee(t,r,e));if(i.source.toLowerCase().startsWith("kt1"))throw new s.dy(`KT1 addresses are not supported as source since ${pt.PsBabyM1}`);return i}case i.w9.REVEAL:case i.w9.DELEGATION:case i.w9.REGISTER_GLOBAL_CONSTANT:case i.w9.UPDATE_CONSENSUS_KEY:case i.w9.UPDATE_COMPANION_KEY:case i.w9.SMART_ROLLUP_ADD_MESSAGES:case i.w9.SMART_ROLLUP_ORIGINATE:case i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return Object.assign(Object.assign(Object.assign({},t),this.getSource(t,r,n)),this.getFee(t,r,e));case i.w9.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},t),{ticket_amount:`${t.ticket_amount}`}),this.getSource(t,r,n)),this.getFee(t,r,e));case i.w9.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},t),{amount:`${t.amount}`}),this.getSource(t,r,n)),this.getFee(t,r,e));case i.w9.BALLOT:case i.w9.PROPOSALS:if(void 0===o)throw new Tt("Failed to get the current voting period index");return Object.assign(Object.assign(Object.assign({},t),{period:null===o||void 0===o?void 0:o.voting_period.index}),this.getSource(t,r,n));default:throw new s.$W(t.kind)}}))}activate(t){return V(this,arguments,void 0,(function*({pkh:t,secret:e}){const r=yield(t=>V(void 0,[t],void 0,(function*({pkh:t,secret:e}){return{kind:i.w9.ACTIVATION,pkh:t,secret:e}})))({pkh:t,secret:e}),n=this.convertIntoArray(r),s=yield this.getBlockHash(),o=yield this.getProtocolHash();z(this,be,{},"f");const a=parseInt(yield this.getHeadCounter(t),10);return{opOb:{branch:s,contents:this.constructOpContents(n,a,t),protocol:o},counter:a}}))}reveal(t){return V(this,arguments,void 0,(function*({fee:t,gasLimit:e,storageLimit:r,proof:i}){const{pkh:n,publicKey:o}=yield this.getKeys();if(!o)throw new s._d(n);const[,a]=(0,B.$9)(n,B.Rv);if(a===B.Rk.BLS12_381PublicKeyHash)if(i)(0,B.$9)(i,[B.Rk.BLS12_381Signature]);else{const{prefixSig:t}=yield this.signer.provePossession();i=t}else if(i)throw new s.vz("Proof field is only allowed to reveal a bls account ");const c=yield this.context.readProvider.getProtocolConstants("head"),u=yield this.getOperationLimits(c),h=Ee({fee:t,storageLimit:r,gasLimit:e},u),l=yield re({fee:h.fee,gasLimit:h.gasLimit,storageLimit:h.storageLimit,proof:i},n,o),d=this.convertIntoArray(l),p=yield this.getBlockHash(),f=yield this.getProtocolHash();z(this,be,{},"f");const g=parseInt(yield this.getHeadCounter(n),10);return{opOb:{branch:p,contents:this.constructOpContents(d,g,n),protocol:f},counter:g}}))}originate(t,e){return V(this,void 0,void 0,(function*(){var{fee:r,storageLimit:i,gasLimit:n}=t,s=F(t,["fee","storageLimit","gasLimit"]);const{pkh:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(a),u=yield qt(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),Ee({fee:r,storageLimit:i,gasLimit:n},c)))),h=yield this.addRevealOperationIfNeeded(u,o),l=this.convertIntoArray(h),d=yield this.getBlockHash(),p=yield this.getProtocolHash();z(this,be,{},"f");const f=parseInt(yield this.getHeadCounter(o),10);return{opOb:{branch:d,contents:this.constructOpContents(l,f,o,e),protocol:p},counter:f}}))}transaction(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield te(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}stake(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield te(Object.assign(Object.assign(Object.assign(Object.assign({},n),{to:s}),Ee({fee:e,storageLimit:r,gasLimit:i},a)),{parameter:{entrypoint:"stake",value:{prim:"Unit"}}})),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}unstake(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield te(Object.assign(Object.assign(Object.assign(Object.assign({},n),{to:s}),Ee({fee:e,storageLimit:r,gasLimit:i},a)),{parameter:{entrypoint:"unstake",value:{prim:"Unit"}}})),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}finalizeUnstake(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i,to:n}=t,s=F(t,["fee","storageLimit","gasLimit","to"]);const{pkh:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getOperationLimits(a),u=yield te(Object.assign(Object.assign(Object.assign(Object.assign({},s),{to:n||o,amount:0}),Ee({fee:e,storageLimit:r,gasLimit:i},c)),{parameter:{entrypoint:"finalize_unstake",value:{prim:"Unit"}}})),h=yield this.addRevealOperationIfNeeded(u,o),l=this.convertIntoArray(h),d=yield this.getBlockHash(),p=yield this.getProtocolHash();z(this,be,{},"f");const f=parseInt(yield this.getHeadCounter(o),10);return{opOb:{branch:d,contents:this.constructOpContents(l,f,o,s.source),protocol:p},counter:f}}))}delegation(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield ee(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}registerDelegate(t,e){return V(this,arguments,void 0,(function*({fee:t,storageLimit:e,gasLimit:r},n){const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=Ee({fee:t,storageLimit:e,gasLimit:r},a),u=yield((t,e)=>V(void 0,[t,e],void 0,(function*({fee:t,gasLimit:e,storageLimit:r},n){return{kind:i.w9.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}})))({fee:c.fee,storageLimit:c.storageLimit,gasLimit:c.gasLimit},s),h=yield this.addRevealOperationIfNeeded(u,s),l=this.convertIntoArray(h),d=yield this.getBlockHash(),p=yield this.getProtocolHash();z(this,be,{},"f");const f=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:d,contents:this.constructOpContents(l,f,s,n),protocol:p},counter:f}}))}registerGlobalConstant(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield ie(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}updateConsensusKey(t,e){return V(this,void 0,void 0,(function*(){var{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),[,c]=(0,B.$9)(o.pk,B.PW);if(c===B.Rk.BLS12_381PublicKey){if(!o.proof)throw new s.Ck("Proof is required to set a bls account as consensus key ")}else if(o.proof)throw new s.vz("Proof field is only allowed for a bls account as consensus key");const u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.getOperationLimits(u),l=yield oe(Object.assign(Object.assign({},o),Ee({fee:r,storageLimit:i,gasLimit:n},h))),d=yield this.addRevealOperationIfNeeded(l,a),p=this.convertIntoArray(d),f=yield this.getBlockHash(),g=yield this.getProtocolHash();z(this,be,{},"f");const m=parseInt(yield this.getHeadCounter(a),10);return{opOb:{branch:f,contents:this.constructOpContents(p,m,a,e),protocol:g},counter:m}}))}updateCompanionKey(t,e){return V(this,void 0,void 0,(function*(){var{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const{pkh:a}=yield this.getKeys(),[,c]=(0,B.$9)(o.pk,B.PW);if(c!==B.Rk.BLS12_381PublicKey)throw new s.vz("companion key must be a bls account");if(!o.proof)throw new s.Ck("Proof is required to set a bls account as companion key ");const u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.getOperationLimits(u),l=yield ae(Object.assign(Object.assign({},o),Ee({fee:r,storageLimit:i,gasLimit:n},h))),d=yield this.addRevealOperationIfNeeded(l,a),p=this.convertIntoArray(d),f=yield this.getBlockHash(),g=yield this.getProtocolHash();z(this,be,{},"f");const m=parseInt(yield this.getHeadCounter(a),10);return{opOb:{branch:f,contents:this.constructOpContents(p,m,a,e),protocol:g},counter:m}}))}increasePaidStorage(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield se(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}ballot(t){return V(this,void 0,void 0,(function*(){const{pkh:e}=yield this.getKeys(),r=yield(n=Object.assign({},t),V(void 0,[n],void 0,(function*({source:t,proposal:e,ballot:r}){return{kind:i.w9.BALLOT,source:t,proposal:e,ballot:r}})));var n;const s=this.convertIntoArray(r),o=yield this.getBlockHash(),a=yield this.getProtocolHash();z(this,be,{},"f");const c=parseInt(yield this.getHeadCounter(e),10);let u;try{u=yield this.rpc.getCurrentPeriod()}catch(t){throw new Tt("Failed to get the current voting period index")}return{opOb:{branch:o,contents:this.constructOpContents(s,c,e,t.source,u),protocol:a},counter:c}}))}proposals(t){return V(this,void 0,void 0,(function*(){const{pkh:e}=yield this.getKeys(),r=yield(n=Object.assign({},t),V(void 0,[n],void 0,(function*({source:t,proposals:e}){return{kind:i.w9.PROPOSALS,source:t,proposals:e}})));var n;const s=this.convertIntoArray(r),o=yield this.getBlockHash(),a=yield this.getProtocolHash();z(this,be,{},"f");const c=parseInt(yield this.getHeadCounter(e),10);let u;try{u=yield this.rpc.getCurrentPeriod()}catch(t){throw new Tt("Failed to get the current voting period index")}return{opOb:{branch:o,contents:this.constructOpContents(s,c,e,t.source,u),protocol:a},counter:c}}))}drainDelegate(t,e){return V(this,void 0,void 0,(function*(){const{pkh:r}=yield this.getKeys(),n=yield(s=Object.assign({},t),V(void 0,[s],void 0,(function*({consensus_key:t,delegate:e,destination:r}){return{kind:i.w9.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}})));var s;const o=this.convertIntoArray(n),a=yield this.getBlockHash(),c=yield this.getProtocolHash();z(this,be,{},"f");const u=parseInt(yield this.getHeadCounter(r),10);return{opOb:{branch:a,contents:this.constructOpContents(o,u,r,e),protocol:c},counter:u}}))}transferTicket(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield ne(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}smartRollupAddMessages(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield ce(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}smartRollupOriginate(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield ue(Object.assign(Object.assign({},Ee({fee:e,storageLimit:r,gasLimit:i},a)),n)),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}smartRollupExecuteOutboxMessage(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const{pkh:s}=yield this.getKeys(),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.getOperationLimits(o),c=yield he(Object.assign(Object.assign({},n),Ee({fee:e,storageLimit:r,gasLimit:i},a))),u=yield this.addRevealOperationIfNeeded(c,s),h=this.convertIntoArray(u),l=yield this.getBlockHash(),d=yield this.getProtocolHash();z(this,be,{},"f");const p=parseInt(yield this.getHeadCounter(s),10);return{opOb:{branch:l,contents:this.constructOpContents(h,p,s,n.source),protocol:d},counter:p}}))}batch(t,e){return V(this,void 0,void 0,(function*(){const{pkh:r,publicKey:i}=yield this.getKeys(),n=yield this.context.readProvider.getProtocolConstants("head"),o=yield this.getOperationLimits(n,t.length),a=yield this.isRevealOpNeeded(t,r),c=[];if(e)for(const r of t)if(et(r)){const t=e.shift(),i=Ee(r,{fee:t.suggestedFeeMutez,storageLimit:t.storageLimit,gasLimit:t.gasLimit});c.push(yield this.getRPCOp(Object.assign(Object.assign({},r),i)))}else c.push(Object.assign({},r));else for(const e of t)if(et(e)){const t=Ee(e,o);c.push(yield this.getRPCOp(Object.assign(Object.assign({},e),t)))}else c.push(Object.assign({},e));if(a){if(!i)throw new s._d(r);const[,t]=(0,B.$9)(r,B.Rv);c.unshift(yield re({fee:yt(r),storageLimit:0,gasLimit:gt(r),proof:t===B.Rk.BLS12_381PublicKeyHash?(yield this.signer.provePossession()).prefixSig:void 0},r,i))}const u=yield this.getBlockHash(),h=yield this.getProtocolHash();z(this,be,{},"f");const l=parseInt(yield this.getHeadCounter(r),10);return{opOb:{branch:u,contents:this.constructOpContents(c,l,r),protocol:h},counter:l}}))}contractCall(t){return V(this,void 0,void 0,(function*(){var e,r,n;const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),{pkh:a}=yield this.getKeys();z(this,be,{},"f");const c=parseInt(yield this.getHeadCounter(a),10),u=t.toTransferParams(),h=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getOperationLimits(h),d=Ee({fee:u.fee,storageLimit:u.storageLimit,gasLimit:u.gasLimit},l),p={kind:i.w9.TRANSACTION,fee:null!==(e=u.fee)&&void 0!==e?e:d.fee,gas_limit:null!==(r=u.gasLimit)&&void 0!==r?r:d.gasLimit,storage_limit:null!==(n=u.storageLimit)&&void 0!==n?n:d.storageLimit,amount:String(u.amount),destination:u.to,parameters:u.parameter},f=yield this.addRevealOperationIfNeeded(p,a),g=this.convertIntoArray(f);return{opOb:{branch:s,contents:this.constructOpContents(g,c,a),protocol:o},counter:c}}))}toPreapply(t){return V(this,void 0,void 0,(function*(){const{opOb:{contents:e,branch:r,protocol:i}}=t,n=this.toForge(t),s=yield this.context.forger.forge(n);return[{contents:e,branch:r,protocol:i,signature:(yield this.context.signer.sign(s,new Uint8Array([3]))).prefixSig}]}))}toForge({opOb:{contents:t,branch:e}}){return{branch:e,contents:t}}}be=new WeakMap;class Pe extends le{constructor(t){super(t),this.prepare=new Oe(this.context)}getBalance(t){return V(this,void 0,void 0,(function*(){const e=(0,B.jl)(t);if(e!==B.nA.VALID)throw new s.Ms(t,e);return this.context.readProvider.getBalance(t,"head")}))}getSpendable(t){return V(this,void 0,void 0,(function*(){const e=(0,B.jl)(t);if(e!==B.nA.VALID)throw new s.Ms(t,e);return this.context.readProvider.getSpendable(t,"head")}))}getDelegate(t){return V(this,void 0,void 0,(function*(){const e=(0,B.jl)(t);if(e!==B.nA.VALID)throw new s.Ms(t,e);return this.context.readProvider.getDelegate(t,"head")}))}activate(t,e){return V(this,void 0,void 0,(function*(){const r=(0,B._f)(t);if(r!==B.nA.VALID)throw new B.$u(t,r);const i=yield this.prepare.activate({pkh:t,secret:e}),n=yield this.forge(i),s=`${n.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new jt(yield this.rpc.injectOperation(s),Object.assign(Object.assign({},n),{opbytes:s}),[],this.context.clone())}))}}const Se=100;class Te{constructor(t,e,r,i,n=100){this._milligasLimit=t,this._storageLimit=e,this.opSize=r,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=n}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){return Math.max(Number(this._storageLimit),0)}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3)}get operationFeeMutez(){return.1*this.gasLimit+1*Number(this.opSize)}roundUp(t){return Math.ceil(Number(t))}get minimalFeeMutez(){return this.roundUp(this.operationFeeMutez+Se)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+120)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),Se)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(t){let e,r=0,i=0,n=0,s=0;return t.forEach((t=>{r+=t.milligasLimit,i+=t.storageLimit,n+=t.opSize,s=Math.max(t.minimalFeePerStorageByteMutez,s),t.baseFeeMutez&&(e=e?e+t.baseFeeMutez:t.baseFeeMutez)})),new Te(r,i,n,s,e)}static createArrayEstimateInstancesFromProperties(t){return t.map((t=>new Te(t.milligasLimit,t.storageLimit,t.opSize,t.minimalFeePerStorageByteMutez,t.baseFeeMutez)))}}class Re extends s.IT{constructor(){super(),this.name="RevealEstimateError",this.message="Public key is unknown, unable to estimate the reveal operation in Wallet API."}}class Le extends le{constructor(){super(...arguments),this.REVEAL_LENGTH=324,this.REVEAL_LENGTH_TZ4=622,this.MILLIGAS_BUFFER=1e5,this.STORAGE_BUFFER=20,this.prepare=new Oe(this.context)}getKeys(){return V(this,void 0,void 0,(function*(){const t=this.context.isAnySignerConfigured();return{publicKeyHash:t?yield this.signer.publicKeyHash():yield this.context.wallet.pkh(),publicKey:t?yield this.signer.publicKey():yield this.context.wallet.pk()}}))}getEstimationPropertiesFromOperationContent(t,e,r,i){const n=At({contents:[t]});let s=0,o=0;return n.forEach((t=>{s+=Number(t.consumed_milligas)||0,o+="allocated_destination_contract"in t?i:0,o+="originated_contracts"in t&&Array.isArray(t.originated_contracts)?t.originated_contracts.length*i:0,o+="storage_size"in t&&"global_address"in t&&Number(t.storage_size)||0,o+="paid_storage_size_diff"in t&&Number(t.paid_storage_size_diff)||0,o+="genesis_commitment_hash"in t&&Number(t.size)||0})),et(t)?{milligasLimit:tt(t)?s+Number(this.MILLIGAS_BUFFER):s,storageLimit:o>0?o+this.STORAGE_BUFFER:0,opSize:e,minimalFeePerStorageByteMutez:r.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:e,minimalFeePerStorageByteMutez:r.toNumber(),baseFeeMutez:0}}calculateEstimates(t,e){return V(this,void 0,void 0,(function*(){const{opbytes:r,opOb:{branch:i,contents:n}}=yield this.forge(t),s={operation:{branch:i,contents:n,signature:"edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg"},chain_id:yield this.context.readProvider.getChainId()},{opResponse:o}=yield this.simulate(s),{cost_per_byte:a,origination_size:c}=e,u=[...bt(o,"backtracked"),...bt(o)];if(u.length)throw new vt(u,"Error occurred during estimation",o.contents);let h=1;return Array.isArray(t.opOb.contents)&&t.opOb.contents.length>1&&(h="reveal"===o.contents[0].kind?t.opOb.contents.length-1:t.opOb.contents.length),o.contents.map((t=>{const e=t;let i,n;return e.source=e.source||"",e.source.startsWith(B.Rk.BLS12_381PublicKeyHash)?(i=this.REVEAL_LENGTH_TZ4/2,n=(r.length/2+B.Ne[B.Rk.BLS12_381Signature])/h):(i=this.REVEAL_LENGTH/2,n=(r.length/2+B.Ne[B.Rk.Ed25519Signature])/h),this.getEstimationPropertiesFromOperationContent(t,"reveal"===t.kind?i:n,a,null!==c&&void 0!==c?c:257)}))}))}originate(t){return V(this,void 0,void 0,(function*(){const e=yield this.prepare.originate(t),r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.calculateEstimates(e,r);if("reveal"===e.opOb.contents[0].kind){const t=e.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;i.shift(),i[0].opSize-=t}return Te.createEstimateInstanceFromProperties(i)}))}transfer(t){return V(this,void 0,void 0,(function*(){var e,{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const a=(0,B.jl)(o.to);if(a!==B.nA.VALID)throw new s.Ms(o.to,a);const c=(0,B.jl)(null!==(e=o.source)&&void 0!==e?e:"");if(o.source&&c!==B.nA.VALID)throw new s.Ms(o.source,c);if(o.amount<0)throw new s.IA(o.amount.toString());const u=yield this.prepare.transaction(Object.assign({fee:r,storageLimit:i,gasLimit:n},o)),h=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.calculateEstimates(u,h);if("reveal"===u.opOb.contents[0].kind){const t=u.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;l.shift(),l[0].opSize-=t}return Te.createEstimateInstanceFromProperties(l)}))}stake(t){return V(this,void 0,void 0,(function*(){var e,{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const a=(0,B.jl)(null!==(e=o.source)&&void 0!==e?e:"");if(o.source&&a!==B.nA.VALID)throw new s.Ms(o.source,a);if(o.to||(o.to=o.source),o.to&&o.to!==o.source)throw new s.dr(o.to);if(o.amount<0)throw new s.IA(o.amount.toString());const c=yield this.prepare.stake(Object.assign({fee:r,storageLimit:i,gasLimit:n},o)),u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.calculateEstimates(c,u);if("reveal"===c.opOb.contents[0].kind){h.shift();const t=c.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;h[0].opSize-=t}return Te.createEstimateInstanceFromProperties(h)}))}unstake(t){return V(this,void 0,void 0,(function*(){var e,{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const a=(0,B.jl)(null!==(e=o.source)&&void 0!==e?e:"");if(o.source&&a!==B.nA.VALID)throw new s.Ms(o.source,a);if(o.to||(o.to=o.source),o.to&&o.to!==o.source)throw new s.dr(o.to);if(o.amount<0)throw new s.IA(o.amount.toString());const c=yield this.prepare.unstake(Object.assign({fee:r,storageLimit:i,gasLimit:n},o)),u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.calculateEstimates(c,u);if("reveal"===c.opOb.contents[0].kind){h.shift();const t=c.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;h[0].opSize-=t}return Te.createEstimateInstanceFromProperties(h)}))}finalizeUnstake(t){return V(this,void 0,void 0,(function*(){var e,{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const a=(0,B.jl)(null!==(e=o.source)&&void 0!==e?e:"");if(o.source&&a!==B.nA.VALID)throw new s.Ms(o.source,a);if(o.to||(o.to=o.source),o.amount||(o.amount=0),void 0!==o.amount&&0!==o.amount)throw new Error("Amount must be 0 for finalize_unstake operation");const c=yield this.prepare.finalizeUnstake(Object.assign({fee:r,storageLimit:i,gasLimit:n},o)),u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.calculateEstimates(c,u);if("reveal"===c.opOb.contents[0].kind){h.shift();const t=c.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;h[0].opSize-=t}return Te.createEstimateInstanceFromProperties(h)}))}transferTicket(t){return V(this,void 0,void 0,(function*(){var e,{fee:r,storageLimit:i,gasLimit:n}=t,o=F(t,["fee","storageLimit","gasLimit"]);const a=(0,B.jl)(o.destination);if(a!==B.nA.VALID)throw new s.Ms(o.destination,a);const c=(0,B.jl)(null!==(e=o.source)&&void 0!==e?e:"");if(o.source&&c!==B.nA.VALID)throw new s.Ms(o.source,c);const u=yield this.context.readProvider.getProtocolConstants("head"),h=yield this.prepare.transferTicket(Object.assign({fee:r,storageLimit:i,gasLimit:n},o)),l=yield this.calculateEstimates(h,u);if("reveal"===h.opOb.contents[0].kind){l.shift();const t=h.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;l[0].opSize-=t}return Te.createEstimateInstanceFromProperties(l)}))}setDelegate(t){return V(this,void 0,void 0,(function*(){var e,r,{fee:i,gasLimit:n,storageLimit:o}=t,a=F(t,["fee","gasLimit","storageLimit"]);const c=(0,B.jl)(null!==(e=a.source)&&void 0!==e?e:"");if(a.source&&c!==B.nA.VALID)throw new s.Ms(a.source,c);const u=(0,B.jl)(null!==(r=a.delegate)&&void 0!==r?r:"");if(a.delegate&&u!==B.nA.VALID)throw new s.Ms(a.delegate,u);const h=yield this.prepare.delegation(Object.assign({fee:i,storageLimit:o,gasLimit:n},a)),l=yield this.context.readProvider.getProtocolConstants("head"),d=yield this.calculateEstimates(h,l);if("reveal"===h.opOb.contents[0].kind){d.shift();const t=h.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;d[0].opSize-=t}return Te.createEstimateInstanceFromProperties(d)}))}batch(t){return V(this,void 0,void 0,(function*(){const e=yield this.context.readProvider.getProtocolConstants("head"),r=yield this.prepare.batch(t),i=yield this.calculateEstimates(r,e);return Te.createArrayEstimateInstancesFromProperties(i)}))}registerDelegate(t,e){return V(this,void 0,void 0,(function*(){var{fee:r,storageLimit:i,gasLimit:n}=t,s=F(t,["fee","storageLimit","gasLimit"]);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=e||o,u=yield this.prepare.registerDelegate(Object.assign({fee:r,storageLimit:i,gasLimit:n},s),c),h=yield this.calculateEstimates(u,a);if("reveal"===u.opOb.contents[0].kind){h.shift();const t=u.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;h[0].opSize-=t}return Te.createEstimateInstanceFromProperties(h)}))}reveal(t){return V(this,void 0,void 0,(function*(){const{publicKeyHash:e,publicKey:r}=yield this.getKeys();if(!r)throw new Re;if(yield this.isAccountRevealRequired(e)){const[,r]=(0,B.$9)(e,B.Rv);if(r===B.Rk.BLS12_381PublicKeyHash)if(t&&t.proof)(0,B.$9)(t.proof,[B.Rk.BLS12_381Signature]);else{const{prefixSig:e}=yield this.signer.provePossession();t=Object.assign(Object.assign({},t),{proof:e})}else if(t&&t.proof)throw new s.vz("Proof field is only allowed to reveal a bls account ");const i=yield this.context.readProvider.getProtocolConstants("head"),n=t?yield this.prepare.reveal(t):yield this.prepare.reveal({}),o=yield this.calculateEstimates(n,i);return Te.createEstimateInstanceFromProperties(o)}}))}registerGlobalConstant(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);const s=yield this.prepare.registerGlobalConstant(Object.assign({fee:e,storageLimit:r,gasLimit:i},n)),o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.calculateEstimates(s,o);if("reveal"===s.opOb.contents[0].kind){a.shift();const t=s.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;a[0].opSize-=t}return Te.createEstimateInstanceFromProperties(a)}))}increasePaidStorage(t){return V(this,void 0,void 0,(function*(){var{fee:e,storageLimit:r,gasLimit:i}=t,n=F(t,["fee","storageLimit","gasLimit"]);if(n.amount<=0)throw new s.IA(n.amount.toString());const o=yield this.context.readProvider.getProtocolConstants("head"),a=yield this.prepare.increasePaidStorage(Object.assign({fee:e,storageLimit:r,gasLimit:i},n)),c=yield this.calculateEstimates(a,o);if("reveal"===a.opOb.contents[0].kind){c.shift();const t=a.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;c[0].opSize-=t}return Te.createEstimateInstanceFromProperties(c)}))}updateConsensusKey(t){return V(this,void 0,void 0,(function*(){const[,e]=(0,B.$9)(t.pk,B.PW);if(e===B.Rk.BLS12_381PublicKey){if(!t.proof)throw new s.Ck("Proof is required to set a bls account as consensus key ")}else if(t.proof)throw new s.vz("Proof field is only allowed for a bls account as consensus key");const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.updateConsensusKey(t),n=yield this.calculateEstimates(i,r);if("reveal"===i.opOb.contents[0].kind){n.shift();const t=i.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n[0].opSize-=t}return Te.createEstimateInstanceFromProperties(n)}))}updateCompanionKey(t){return V(this,void 0,void 0,(function*(){const[,e]=(0,B.$9)(t.pk,B.PW);if(e!==B.Rk.BLS12_381PublicKey)throw new s.vz("companion key must be a bls account");if(!t.proof)throw new s.Ck("Proof is required to set a bls account as companion key ");const r=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.prepare.updateCompanionKey(t),n=yield this.calculateEstimates(i,r);if("reveal"===i.opOb.contents[0].kind){n.shift();const t=i.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;n[0].opSize-=t}return Te.createEstimateInstanceFromProperties(n)}))}smartRollupAddMessages(t){return V(this,void 0,void 0,(function*(){const e=yield this.context.readProvider.getProtocolConstants("head"),r=yield this.prepare.smartRollupAddMessages(t),i=yield this.calculateEstimates(r,e);if("reveal"===r.opOb.contents[0].kind){i.shift();const t=r.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;i[0].opSize-=t}return Te.createEstimateInstanceFromProperties(i)}))}smartRollupOriginate(t){return V(this,void 0,void 0,(function*(){const e=yield this.context.readProvider.getProtocolConstants("head"),r=yield this.prepare.smartRollupOriginate(t),i=yield this.calculateEstimates(r,e);if("reveal"===r.opOb.contents[0].kind){i.shift();const t=r.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;i[0].opSize-=t}return Te.createEstimateInstanceFromProperties(i)}))}smartRollupExecuteOutboxMessage(t){return V(this,void 0,void 0,(function*(){const e=yield this.context.readProvider.getProtocolConstants("head"),r=yield this.prepare.smartRollupExecuteOutboxMessage(t),i=yield this.calculateEstimates(r,e);return"reveal"===r.opOb.contents[0].kind&&i.shift(),Te.createEstimateInstanceFromProperties(i)}))}contractCall(t){return V(this,void 0,void 0,(function*(){const e=yield this.context.readProvider.getProtocolConstants("head"),r=yield this.prepare.contractCall(t),i=yield this.calculateEstimates(r,e);if("reveal"===r.opOb.contents[0].kind){i.shift();const t=r.opOb.contents[0].source.startsWith(B.Rk.BLS12_381PublicKeyHash)?this.REVEAL_LENGTH_TZ4/2:this.REVEAL_LENGTH/2;i[0].opSize-=t}return Te.createEstimateInstanceFromProperties(i)}))}}const Ie=[i.w9.ACTIVATION,i.w9.ORIGINATION,i.w9.TRANSACTION,i.w9.DELEGATION,i.w9.REGISTER_GLOBAL_CONSTANT,i.w9.INCREASE_PAID_STORAGE,i.w9.TRANSFER_TICKET,i.w9.SMART_ROLLUP_ADD_MESSAGES,i.w9.SMART_ROLLUP_ORIGINATE,i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE];class ke extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}sumProp(t,e){return t.reduce(((t,r)=>e in r?Number(r[e])+t:t),0)}getOriginatedContractAddresses(){const t=this.results.filter((t=>"origination"===t.kind));let e=[];for(const r of t)r.metadata.operation_result.originated_contracts&&(e=[...e,...r.metadata.operation_result.originated_contracts]);return e}get status(){return this.results.filter((t=>-1!==Ie.indexOf(t.kind))).map((t=>{if(nt(t)){return t.metadata.operation_result.status}return"unknown"}))[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return U.A.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.A.ROUND_UP}),new U.A(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(At({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(At({contents:this.results}),"paid_storage_size_diff"))}get errors(){return bt({contents:this.results})}}class Ne extends le{constructor(t,e){super(t),this.estimator=e,this.operations=[],this.prepare=new Oe(this.context)}withTransfer(t){const e=(0,B.jl)(t.to);if(t.amount<0)throw new s.IA(t.amount.toString());if(e!==B.nA.VALID)throw new s.Ms(t.to,e);return this.operations.push(Object.assign({kind:i.w9.TRANSACTION},t)),this}withTransferTicket(t){const e=(0,B.jl)(t.destination);if(e!==B.nA.VALID)throw new s.Ms(t.destination,e);return this.operations.push(Object.assign({kind:i.w9.TRANSFER_TICKET},t)),this}withContractCall(t,e={}){return this.withTransfer(t.toTransferParams(e))}withDelegation(t){var e,r;const n=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&n!==B.nA.VALID)throw new s.Ms(t.source,n);const o=(0,B.jl)(null!==(r=t.delegate)&&void 0!==r?r:"");if(t.delegate&&o!==B.nA.VALID)throw new s.Ms(t.delegate,o);return this.operations.push(Object.assign({kind:i.w9.DELEGATION},t)),this}withActivation({pkh:t,secret:e}){const r=(0,B._f)(t);if(r!==B.nA.VALID)throw new s.$u(t,r);return this.operations.push({kind:i.w9.ACTIVATION,pkh:t,secret:e}),this}withOrigination(t){return this.operations.push(Object.assign({kind:i.w9.ORIGINATION},t)),this}withRegisterGlobalConstant(t){return this.operations.push(Object.assign({kind:i.w9.REGISTER_GLOBAL_CONSTANT},t)),this}withIncreasePaidStorage(t){return this.operations.push(Object.assign({kind:i.w9.INCREASE_PAID_STORAGE},t)),this}withUpdateConsensusKey(t){const[,e]=(0,B.$9)(t.pk,B.PW);if(e===B.Rk.BLS12_381PublicKey){if(!t.proof)throw new s.Ck("Proof is required to set a bls account as consensus key ")}else if(t.proof)throw new s.vz("Proof field is only allowed for a bls account as consensus key");return this.operations.push(Object.assign({kind:i.w9.UPDATE_CONSENSUS_KEY},t)),this}withUpdateCompanionKey(t){const[,e]=(0,B.$9)(t.pk,B.PW);if(e!==B.Rk.BLS12_381PublicKey)throw new s.vz("companion key must be a bls account");if(!t.proof)throw new s.Ck("Proof is required to set a bls account as companion key ");return this.operations.push(Object.assign({kind:i.w9.UPDATE_COMPANION_KEY},t)),this}withSmartRollupAddMessages(t){return this.operations.push(Object.assign({kind:i.w9.SMART_ROLLUP_ADD_MESSAGES},t)),this}withSmartRollupOriginate(t){return this.operations.push(Object.assign({kind:i.w9.SMART_ROLLUP_ORIGINATE},t)),this}withSmartRollupExecuteOutboxMessage(t){return this.operations.push(Object.assign({kind:i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE},t)),this}getRPCOp(t){return V(this,void 0,void 0,(function*(){switch(t.kind){case i.w9.TRANSACTION:return te(Object.assign({},t));case i.w9.ORIGINATION:return qt(yield this.context.parser.prepareCodeOrigination(Object.assign({},t)));case i.w9.DELEGATION:return ee(Object.assign({},t));case i.w9.REGISTER_GLOBAL_CONSTANT:return ie(Object.assign({},t));case i.w9.INCREASE_PAID_STORAGE:return se(Object.assign({},t));case i.w9.UPDATE_CONSENSUS_KEY:return oe(Object.assign({},t));case i.w9.UPDATE_COMPANION_KEY:return ae(Object.assign({},t));case i.w9.TRANSFER_TICKET:return ne(Object.assign({},t));case i.w9.SMART_ROLLUP_ADD_MESSAGES:return ce(Object.assign({},t));case i.w9.SMART_ROLLUP_ORIGINATE:return ue(Object.assign({},t));case i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:return he(Object.assign({},t));default:throw new s.$W(JSON.stringify(t.kind))}}))}with(t){for(const e of t)switch(e.kind){case i.w9.TRANSACTION:this.withTransfer(e);break;case i.w9.ORIGINATION:this.withOrigination(e);break;case i.w9.DELEGATION:this.withDelegation(e);break;case i.w9.ACTIVATION:this.withActivation(e);break;case i.w9.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(e);break;case i.w9.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(e);break;case i.w9.TRANSFER_TICKET:this.withTransferTicket(e);break;case i.w9.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(e);break;case i.w9.SMART_ROLLUP_ORIGINATE:this.withSmartRollupOriginate(e);break;case i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE:this.withSmartRollupExecuteOutboxMessage(e);break;default:throw new s.$W(JSON.stringify(e.kind))}return this}send(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),r=t&&t.source||e,i=yield this.estimator.batch(this.operations);i.length!==this.operations.length&&i.shift();const n=yield this.prepare.batch(this.operations,i),s=yield this.forge(n),{hash:o,context:a,forgedBytes:c,opResponse:u}=yield this.signAndInject(s);return new ke(o,n.opOb.contents,r,c,u,a)}))}}class Ce{constructor(t,e){this.context=t,this.estimator=e}batch(t){const e=new Ne(this.context,this.estimator);return Array.isArray(t)&&e.with(t),e}}class De extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"delegation"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return U.g.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.g.ROUND_UP}),this.consumedMilliGas?new U.g(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class xe extends jt{constructor(t,e,r,i,n,s){super(t,r,i,n),this.params=e,this.contractProvider=s;const o=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(o)&&(this.contractAddress=o[0])}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"origination"===t.kind)),e=t&&nt(t)&&t.metadata.operation_result;return e||void 0}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return U.g.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.g.ROUND_UP}),this.consumedMilliGas?new U.g(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get storageDiff(){const t=this.operationResults&&this.operationResults.paid_storage_size_diff;return t||void 0}get storageSize(){const t=this.operationResults&&this.operationResults.storage_size;return t||void 0}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}contract(t,e){return V(this,void 0,void 0,(function*(){if(!this.contractAddress)throw new Et("No contract was originated in this operation");return yield this.confirmation(t,e),this.contractProvider.at(this.contractAddress)}))}}class He extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"register_global_constant"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get registeredExpression(){return this.params.value}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}get consumedGas(){return U.g.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.g.ROUND_UP}),this.consumedMilliGas?new U.g(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}}class Me extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"reveal"===t.kind));return t?[t]:[]}get status(){const t=this.operationResults[0];return t?t.metadata.operation_result.status:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get publicKey(){return this.params.public_key}get proof(){if(this.params.proof)return this.params.proof;throw new s.vz("Only BLS key has proof")}sumProp(t,e){return t.reduce(((t,r)=>e in r?Number(r[e])+t:t),0)}get consumedGas(){return U.g.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.g.ROUND_UP}),new U.g(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(At({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(At({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(At({contents:this.operationResults}),"storage_size"))}get errors(){return bt({contents:this.operationResults})}}class Ue extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"transaction"===t.kind));return t?[t]:[]}get status(){const t=this.operationResults[0];return t?t.metadata.operation_result.status:"unknown"}get amount(){return new U.A(this.params.amount)}get destination(){return this.params.destination}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}sumProp(t,e){return t.reduce(((t,r)=>e in r?Number(r[e])+t:t),0)}get consumedGas(){return U.A.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.A.ROUND_UP}),new U.A(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(At({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(At({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(At({contents:this.operationResults}),"storage_size"))}get errors(){return bt({contents:this.operationResults})}}class Be extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>t.kind===i.w9.TRANSFER_TICKET)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedGas(){return U.g.config({DECIMAL_PLACES:0,ROUNDING_MODE:U.g.ROUND_UP}),this.consumedMilliGas?new U.g(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}}class Ke extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"increase_paid_storage"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class je extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"ballot"===t.kind));return t||void 0}get period(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class Ge extends jt{constructor(t,e,r,i,n){super(t,r,i,n),this.params=e}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"drain_delegate"===t.kind)),e=t&&t.metadata&&t.metadata.balance_updates;return e||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class Fe extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"proposals"===t.kind));return t||void 0}get proposals(){return this.params.proposals}get period(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.period}}class Ve extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"update_consensus_key"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get pk(){return this.params.pk}get proof(){if(this.params.proof)return this.params.proof;throw new s.vz("Only updating consensus key to a BLS account has proof")}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class $e extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"update_companion_key"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get pk(){return this.params.pk}get proof(){if(this.params.proof)return this.params.proof;throw new s.vz("Only updating companion key to a BLS account has proof")}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class ze extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>"smart_rollup_add_messages"===t.kind)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get message(){return this.params.message}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class We extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>t.kind===i.w9.SMART_ROLLUP_ORIGINATE)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get pvmKind(){return this.params.pvm_kind}get kernel(){return this.params.kernel}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class Ye extends jt{constructor(t,e,r,i,n,s){super(t,i,n,s),this.params=e,this.source=r}get operationResults(){const t=Array.isArray(this.results)&&this.results.find((t=>t.kind===i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE)),e=t&&t.metadata&&t.metadata.operation_result;return e||void 0}get status(){var t,e;return null!==(e=null===(t=this.operationResults)||void 0===t?void 0:t.status)&&void 0!==e?e:"unknown"}get rollup(){return this.params.rollup}get cementedCommitment(){return this.params.cemented_commitment}get outputProof(){return this.params.output_proof}get fee(){return Number(this.params.fee)}get gasLimit(){return Number(this.params.gas_limit)}get storageLimit(){return Number(this.params.storage_limit)}get consumedMilliGas(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.consumed_milligas}get errors(){var t;return null===(t=this.operationResults)||void 0===t?void 0:t.errors}}class Ze extends le{constructor(t,e){super(t),this.estimator=e,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol"),this.prepare=new Oe(this.context)}getStorage(t,e){return V(this,void 0,void 0,(function*(){const r=(0,B.Lg)(t);if(r!==B.nA.VALID)throw new s.mC(t,r);const i=yield this.context.readProvider.getScript(t,"head");let n;return e||(e=i),n=K.Sj.isSchema(e)?e:K.Sj.fromRPCResponse({script:e}),n.Execute(i.storage,Ae(this))}))}getBigMapKeyByID(t,e,r,i){return V(this,void 0,void 0,(function*(){const{key:n,type:s}=r.EncodeBigMapKey(e),{packed:o}=yield this.context.packer.packData({data:n,type:s}),a=(0,B.Ad)(o),c=i?yield this.context.readProvider.getBigMapValue({id:t.toString(),expr:a},i):yield this.context.readProvider.getBigMapValue({id:t.toString(),expr:a},"head");return r.ExecuteOnBigMapValue(c,Ae(this))}))}getBigMapKeysByID(t,e,r,i){return V(this,arguments,void 0,(function*(t,e,r,i,n=5){const s=yield this.getBlockForRequest(e,i),o=new K.PE;let a=0,c=[];for(;a<e.length;){const i=e.slice(a,a+n).map((e=>this.getBigMapValueOrUndefined(e,t,r,s)));c=[...c,...yield Promise.all(i)],a+=n}for(let t=0;t<c.length;t++)o.set(e[t],c[t]);return o}))}getBlockForRequest(t,e){return V(this,void 0,void 0,(function*(){return 1===t.length||"undefined"!==typeof e?e:yield this.context.readProvider.getBlockLevel("head")}))}getBigMapValueOrUndefined(t,e,r,i){return V(this,void 0,void 0,(function*(){try{return yield this.getBigMapKeyByID(e,t,r,i)}catch(t){if(t instanceof n.O&&t.status===n.lg.NOT_FOUND)return;throw t}}))}getSaplingDiffByID(t,e){return V(this,void 0,void 0,(function*(){return e?yield this.context.readProvider.getSaplingDiffById({id:t.toString()},e):yield this.context.readProvider.getSaplingDiffById({id:t.toString()},"head")}))}originate(t){return V(this,void 0,void 0,(function*(){const e=yield this.estimate(t,this.estimator.originate.bind(this.estimator)),r=yield this.prepare.originate(Object.assign(Object.assign({},t),e)),n=r.opOb.contents.find((t=>t.kind===i.w9.ORIGINATION)),s=yield this.forge(r),{hash:o,context:a,forgedBytes:c,opResponse:u}=yield this.signAndInject(s);return new xe(o,n,c,u,a,this)}))}setDelegate(t){return V(this,void 0,void 0,(function*(){var e,r,n,o;const a=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&a!==B.nA.VALID)throw new s.Ms(t.source,a);const c=(0,B.jl)(null!==(r=t.delegate)&&void 0!==r?r:"");if(t.delegate&&c!==B.nA.VALID)throw new s.Ms(t.delegate,c);if(/^kt1/i.test(null!==(n=t.source)&&void 0!==n?n:""))throw new Ft(null!==(o=t.source)&&void 0!==o?o:"");const u=yield this.signer.publicKeyHash(),h=t.source||u,l=yield this.estimate(t,this.estimator.setDelegate.bind(this.estimator)),d=yield this.prepare.delegation(Object.assign(Object.assign({},t),l)),p=d.opOb.contents.find((t=>t.kind===i.w9.DELEGATION)),f=yield this.forge(d),{hash:g,context:m,forgedBytes:y,opResponse:_}=yield this.signAndInject(f);return new De(g,p,h,y,_,m)}))}registerDelegate(t){return V(this,void 0,void 0,(function*(){const e=yield this.estimate(t,this.estimator.registerDelegate.bind(this.estimator)),r=yield this.signer.publicKeyHash(),n=yield this.prepare.registerDelegate(Object.assign(Object.assign({},t),e)),s=n.opOb.contents.find((t=>t.kind===i.w9.DELEGATION)),o=yield this.forge(n),{hash:a,context:c,forgedBytes:u,opResponse:h}=yield this.signAndInject(o);return new De(a,s,r,u,h,c)}))}transfer(t){return V(this,void 0,void 0,(function*(){var e;const r=(0,B.jl)(t.to);if(r!==B.nA.VALID)throw new s.Ms(t.to,r);const n=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&n!==B.nA.VALID)throw new s.Ms(t.source,n);if(t.amount<0)throw new s.IA(t.amount.toString());const o=yield this.signer.publicKeyHash(),a=yield this.estimate(t,this.estimator.transfer.bind(this.estimator)),c=t.source||o,u=yield this.prepare.transaction(Object.assign(Object.assign({},t),a)),h=u.opOb.contents.find((t=>t.kind===i.w9.TRANSACTION)),l=yield this.forge(u),{hash:d,context:p,forgedBytes:f,opResponse:g}=yield this.signAndInject(l);return new Ue(d,h,c,f,g,p)}))}stake(t){return V(this,void 0,void 0,(function*(){var e;const r=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&r!==B.nA.VALID)throw new s.Ms(t.source,r);if(t.to||(t.to=t.source),t.to&&t.to!==t.source)throw new s.dr(t.to);if(t.amount<0)throw new s.IA(t.amount.toString());const n=yield this.signer.publicKeyHash(),o=yield this.estimate(t,this.estimator.stake.bind(this.estimator)),a=t.source||n,c=yield this.prepare.stake(Object.assign(Object.assign({},t),o)),u=c.opOb.contents.find((t=>t.kind===i.w9.TRANSACTION)),h=yield this.forge(c),{hash:l,context:d,forgedBytes:p,opResponse:f}=yield this.signAndInject(h);return new Ue(l,u,a,p,f,d)}))}unstake(t){return V(this,void 0,void 0,(function*(){var e;const r=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&r!==B.nA.VALID)throw new s.Ms(t.source,r);if(t.to||(t.to=t.source),t.to&&t.to!==t.source)throw new s.dr(t.to);if(t.amount<0)throw new s.IA(t.amount.toString());const n=yield this.signer.publicKeyHash(),o=yield this.estimate(t,this.estimator.unstake.bind(this.estimator)),a=t.source||n,c=yield this.prepare.unstake(Object.assign(Object.assign({},t),o)),u=c.opOb.contents.find((t=>t.kind===i.w9.TRANSACTION)),h=yield this.forge(c),{hash:l,context:d,forgedBytes:p,opResponse:f}=yield this.signAndInject(h);return new Ue(l,u,a,p,f,d)}))}finalizeUnstake(t){return V(this,void 0,void 0,(function*(){var e;const r=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&r!==B.nA.VALID)throw new s.Ms(t.source,r);if(t.to||(t.to=t.source),t.amount||(t.amount=0),void 0!==t.amount&&t.amount>0)throw new s.LJ("Amount must be 0 to finalize unstake.");const n=yield this.signer.publicKeyHash(),o=yield this.estimate(t,this.estimator.finalizeUnstake.bind(this.estimator)),a=t.source||n,c=yield this.prepare.finalizeUnstake(Object.assign(Object.assign({},t),o)),u=c.opOb.contents.find((t=>t.kind===i.w9.TRANSACTION)),h=yield this.forge(c),{hash:l,context:d,forgedBytes:p,opResponse:f}=yield this.signAndInject(h);return new Ue(l,u,a,p,f,d)}))}transferTicket(t){return V(this,void 0,void 0,(function*(){var e,r;const n=(0,B.jl)(t.destination);if(n!==B.nA.VALID)throw new s.Ms(t.destination,n);const o=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&o!==B.nA.VALID)throw new s.Ms(t.source,o);const a=yield this.signer.publicKeyHash(),c=null!==(r=t.source)&&void 0!==r?r:a,u=yield this.estimate(t,this.estimator.transferTicket.bind(this.estimator)),h=yield this.prepare.transferTicket(Object.assign(Object.assign({},t),u)),l=h.opOb.contents.find((t=>t.kind===i.w9.TRANSFER_TICKET)),d=yield this.forge(h),{hash:p,context:f,forgedBytes:g,opResponse:m}=yield this.signAndInject(d);return new Be(p,l,c,g,m,f)}))}reveal(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),[,r]=(0,B.$9)(e,B.Rv);if(r===B.Rk.BLS12_381PublicKeyHash)if(t.proof)(0,B.$9)(t.proof,[B.Rk.BLS12_381Signature]);else{const{prefixSig:e}=yield this.signer.provePossession();t.proof=e}else if(t.proof)throw new s.vz("Proof field is only allowed to reveal a bls account ");const n=yield this.estimator.reveal(t);if(n){const r=yield this.estimate(t,(()=>V(this,void 0,void 0,(function*(){return n})))),s=yield this.prepare.reveal(Object.assign(Object.assign({},t),r)),o=s.opOb.contents.find((t=>t.kind===i.w9.REVEAL)),a=yield this.forge(s),{hash:c,context:u,forgedBytes:h,opResponse:l}=yield this.signAndInject(a);return new Me(c,o,e,h,l,u)}throw new Xt(`The publicKeyHash '${e}' has already been revealed.`)}))}registerGlobalConstant(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),r=yield this.estimate(t,this.estimator.registerGlobalConstant.bind(this.estimator)),n=yield this.prepare.registerGlobalConstant(Object.assign(Object.assign({},t),r)),s=n.opOb.contents.find((t=>t.kind===i.w9.REGISTER_GLOBAL_CONSTANT)),o=yield this.forge(n),{hash:a,context:c,forgedBytes:u,opResponse:h}=yield this.signAndInject(o);return new He(a,s,e,u,h,c)}))}increasePaidStorage(t){return V(this,void 0,void 0,(function*(){if(t.amount<=0)throw new s.IA(t.amount.toString());const e=yield this.signer.publicKeyHash(),r=yield this.estimate(t,this.estimator.increasePaidStorage.bind(this.estimator)),n=yield this.prepare.increasePaidStorage(Object.assign(Object.assign({},t),r)),o=n.opOb.contents.find((t=>t.kind===i.w9.INCREASE_PAID_STORAGE)),a=yield this.forge(n),{hash:c,context:u,forgedBytes:h,opResponse:l}=yield this.signAndInject(a);return new Ke(c,o,e,h,l,u)}))}drainDelegate(t){return V(this,void 0,void 0,(function*(){const e=yield this.prepare.drainDelegate(t),r=e.opOb.contents.find((t=>t.kind===i.w9.DRAIN_DELEGATE)),n=yield this.forge(e),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(n);return new Ge(s,r,a,c,o)}))}ballot(t){return V(this,void 0,void 0,(function*(){var e,r;const n=yield this.signer.publicKeyHash(),o=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&o!==B.nA.VALID)throw new s.Ms(t.source,o);const a=null!==(r=t.source)&&void 0!==r?r:n,c=yield this.prepare.ballot(Object.assign(Object.assign({},t),{source:a})),u=c.opOb.contents.find((t=>t.kind===i.w9.BALLOT)),h=yield this.forge(c),{hash:l,context:d,forgedBytes:p,opResponse:f}=yield this.signAndInject(h);return new je(l,u,n,p,f,d)}))}proposals(t){return V(this,void 0,void 0,(function*(){var e,r;const n=yield this.signer.publicKeyHash(),o=(0,B.jl)(null!==(e=t.source)&&void 0!==e?e:"");if(t.source&&o!==B.nA.VALID)throw new s.Ms(t.source,o);const a=null!==(r=t.source)&&void 0!==r?r:n,c=yield this.prepare.proposals(Object.assign(Object.assign({},t),{source:a})),u=c.opOb.contents.find((t=>t.kind===i.w9.PROPOSALS)),h=yield this.forge(c),{hash:l,context:d,forgedBytes:p,opResponse:f}=yield this.signAndInject(h);return new Fe(l,u,n,p,f,d)}))}updateConsensusKey(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),[,r]=(0,B.$9)(t.pk,B.PW);if(r===B.Rk.BLS12_381PublicKey){if(!t.proof)throw new s.Ck("Proof is required to set a bls account as consensus key ")}else if(t.proof)throw new s.vz("Proof field is only allowed for a bls account as consensus key");const n=yield this.estimate(t,this.estimator.updateConsensusKey.bind(this.estimator)),o=yield this.prepare.updateConsensusKey(Object.assign(Object.assign({},t),n)),a=o.opOb.contents.find((t=>t.kind===i.w9.UPDATE_CONSENSUS_KEY)),c=yield this.forge(o),{hash:u,context:h,forgedBytes:l,opResponse:d}=yield this.signAndInject(c);return new Ve(u,a,e,l,d,h)}))}updateCompanionKey(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),[,r]=(0,B.$9)(t.pk,B.PW);if(r!==B.Rk.BLS12_381PublicKey)throw new s.vz("Proof field is only allowed for a bls account as companion key");if(!t.proof)throw new s.Ck("Proof is required to set a bls account as companion key ");const n=yield this.estimate(t,this.estimator.updateCompanionKey.bind(this.estimator)),o=yield this.prepare.updateCompanionKey(Object.assign(Object.assign({},t),n)),a=o.opOb.contents.find((t=>t.kind===i.w9.UPDATE_COMPANION_KEY)),c=yield this.forge(o),{hash:u,context:h,forgedBytes:l,opResponse:d}=yield this.signAndInject(c);return new $e(u,a,e,l,d,h)}))}smartRollupAddMessages(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),r=yield this.estimate(t,this.estimator.smartRollupAddMessages.bind(this.estimator)),n=yield this.prepare.smartRollupAddMessages(Object.assign(Object.assign({},t),r)),s=n.opOb.contents.find((t=>t.kind===i.w9.SMART_ROLLUP_ADD_MESSAGES)),o=yield this.forge(n),{hash:a,context:c,forgedBytes:u,opResponse:h}=yield this.signAndInject(o);return new ze(a,s,e,u,h,c)}))}smartRollupOriginate(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),r=yield this.estimate(t,this.estimator.smartRollupOriginate.bind(this.estimator)),n=yield this.prepare.smartRollupOriginate(Object.assign(Object.assign({},t),r)),s=n.opOb.contents.find((t=>t.kind===i.w9.SMART_ROLLUP_ORIGINATE)),o=yield this.forge(n),{hash:a,context:c,forgedBytes:u,opResponse:h}=yield this.signAndInject(o);return new We(a,s,e,u,h,c)}))}smartRollupExecuteOutboxMessage(t){return V(this,void 0,void 0,(function*(){const e=yield this.signer.publicKeyHash(),r=yield this.estimate(t,this.estimator.smartRollupExecuteOutboxMessage.bind(this.estimator)),n=yield this.prepare.smartRollupExecuteOutboxMessage(Object.assign(Object.assign({},t),r)),s=n.opOb.contents.find((t=>t.kind===i.w9.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE)),o=yield this.forge(n),{hash:a,context:c,forgedBytes:u,opResponse:h}=yield this.signAndInject(o);return new Ye(a,s,e,u,h,c)}))}failingNoop(t){return V(this,void 0,void 0,(function*(){const e={kind:i.w9.FAILING_NOOP,arbitrary:t.arbitrary},r=yield this.context.readProvider.getBlockHash(t.basedOnBlock),n=yield this.context.forger.forge({branch:r,contents:[e]}),{prefixSig:s}=yield this.signer.sign(n,new Uint8Array([3]));return{signature:s,bytes:n,signedContent:{branch:r,contents:[{kind:i.w9.FAILING_NOOP,arbitrary:t.arbitrary}]}}}))}at(t){return V(this,arguments,void 0,(function*(t,e=(t=>t)){const r=(0,B.Lg)(t);if(r!==B.nA.VALID)throw new s.mC(t,r);const i=this.context.withExtensions().rpc,n=this.context.withExtensions().readProvider,o=yield n.getScript(t,"head"),a=yield n.getEntrypoints(t);return e(new ye(t,o,this,this,a,i,n),this.context)}))}batch(t){const e=new Ne(this.context,this.estimator);return Array.isArray(t)&&e.with(t),e}}class Xe{constructor(t,e){this.walletProvider=t,this.context=e,this.operations=[]}withTransfer(t){const e=(0,B.jl)(t.to);if(e!==B.nA.VALID)throw new s.Ms(t.to,e);return this.operations.push(Object.assign({kind:i.w9.TRANSACTION},t)),this}withContractCall(t,e={}){return this.withTransfer(t.toTransferParams(e))}withDelegation(t){var e;const r=(0,B.jl)(null!==(e=t.delegate)&&void 0!==e?e:"");if(t.delegate&&r!==B.nA.VALID)throw new s.Ms(t.delegate,r);return this.operations.push(Object.assign({kind:i.w9.DELEGATION},t)),this}withOrigination(t){return this.operations.push(Object.assign({kind:i.w9.ORIGINATION},t)),this}withIncreasePaidStorage(t){const e=(0,B.jl)(t.destination);if(e!==B.nA.VALID)throw new s.Ms(t.destination,e);return this.operations.push(Object.assign({kind:i.w9.INCREASE_PAID_STORAGE},t)),this}withTransferTicket(t){const e=(0,B.jl)(t.destination);if(e!==B.nA.VALID)throw new s.Ms(t.destination,e);return this.operations.push(Object.assign({kind:i.w9.TRANSFER_TICKET},t)),this}withRegisterGlobalConstant(t){return this.operations.push(Object.assign({kind:i.w9.REGISTER_GLOBAL_CONSTANT},t)),this}mapOperation(t){return V(this,void 0,void 0,(function*(){switch(t.kind){case i.w9.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t}))));case i.w9.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},t))}))));case i.w9.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t}))));case i.w9.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams((()=>V(this,void 0,void 0,(function*(){return t}))));case i.w9.REGISTER_GLOBAL_CONSTANT:return this.walletProvider.mapRegisterGlobalConstantParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t}))));case i.w9.TRANSFER_TICKET:return this.walletProvider.mapTransferTicketParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t}))));default:throw new s.$W(JSON.stringify(t.kind))}}))}with(t){for(const e of t)switch(e.kind){case i.w9.TRANSACTION:this.withTransfer(e);break;case i.w9.ORIGINATION:this.withOrigination(e);break;case i.w9.DELEGATION:this.withDelegation(e);break;case i.w9.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(e);break;case i.w9.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(e);break;case i.w9.TRANSFER_TICKET:this.withTransferTicket(e);break;default:throw new s.$W(JSON.stringify(e.kind))}return this}send(){return V(this,void 0,void 0,(function*(){const t=[];for(const e of this.operations)t.push(yield this.mapOperation(e));const e=yield this.walletProvider.sendOperations(t);return this.context.operationFactory.createBatchOperation(e)}))}}class Qe{constructor(t){this.context=t,this.walletCommand=t=>({send:t})}get walletProvider(){return this.context.walletProvider}pkh(){return V(this,arguments,void 0,(function*({forceRefetch:t}={}){return this._pkh&&!t||(this._pkh=yield this.walletProvider.getPKH()),this._pkh}))}pk(){return V(this,arguments,void 0,(function*({forceRefetch:t}={}){return this._pk&&!t||(this._pk=yield this.walletProvider.getPK()),this._pk}))}originate(t){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapOriginateParamsToWalletParams((()=>this.context.parser.prepareCodeOrigination(Object.assign({},t)))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createOriginationOperation(r)}))))}setDelegate(t){var e;const r=(0,B.jl)(null!==(e=t.delegate)&&void 0!==e?e:"");if(t.delegate&&r!==B.nA.VALID)throw new s.Ms(t.delegate,r);return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))))}signFailingNoop(t){return V(this,void 0,void 0,(function*(){const e={kind:i.w9.FAILING_NOOP,arbitrary:t.arbitrary},r=yield this.context.readProvider.getBlockHash(t.basedOnBlock),n=yield this.context.forger.forge({branch:r,contents:[e]});return{signature:yield this.walletProvider.sign(n,Uint8Array.from([3])),bytes:n,signedContent:{branch:r,contents:[{kind:i.w9.FAILING_NOOP,arbitrary:t.arbitrary}]}}}))}registerDelegate(){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const t=yield this.walletProvider.mapDelegateParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return{delegate:yield this.pkh()}})))),e=yield this.walletProvider.sendOperations([t]);return this.context.operationFactory.createDelegationOperation(e)}))))}transfer(t){const e=(0,B.jl)(t.to);if(e!==B.nA.VALID)throw new s.Ms(t.to,e);return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapTransferParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createTransactionOperation(r)}))))}transferTicket(t){const e=(0,B.jl)(t.destination);if(e!==B.nA.VALID)throw new s.Ms(t.destination,e);return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapTransferTicketParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createTransferTicketOperation(r)}))))}stake(t){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapStakeParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){const e=yield this.pkh();if(t.to||(t.to=e),t.to!==e)throw new s.dr(t.to);return t.parameter={entrypoint:"stake",value:{prim:"Unit"}},t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createTransactionOperation(r)}))))}unstake(t){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapUnstakeParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){const e=yield this.pkh();if(t.to||(t.to=e),t.to!==e)throw new s.dr(t.to);return t.parameter={entrypoint:"unstake",value:{prim:"Unit"}},t})))),r=yield this.walletProvider.sendOperations([e]);return yield this.context.operationFactory.createTransactionOperation(r)}))))}finalizeUnstake(t){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapFinalizeUnstakeParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){const e=yield this.pkh();if(t.to||(t.to=e),t.amount||(t.amount=0),0!==t.amount)throw new s.LJ("Amount must be 0 to finalize unstake.");return t.parameter={entrypoint:"finalize_unstake",value:{prim:"Unit"}},t})))),r=yield this.walletProvider.sendOperations([e]);return yield this.context.operationFactory.createTransactionOperation(r)}))))}increasePaidStorage(t){const e=(0,B.jl)(t.destination);if(e!==B.nA.VALID)throw new s.Ms(t.destination,e);return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapIncreasePaidStorageWalletParams((()=>V(this,void 0,void 0,(function*(){return t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createIncreasePaidStorageOperation(r)}))))}registerGlobalConstant(t){return this.walletCommand((()=>V(this,void 0,void 0,(function*(){const e=yield this.walletProvider.mapRegisterGlobalConstantParamsToWalletParams((()=>V(this,void 0,void 0,(function*(){return t})))),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createRegisterGlobalConstantOperation(r)}))))}batch(t){const e=new Xe(this.walletProvider,this.context);return Array.isArray(t)&&e.with(t),e}at(t){return V(this,arguments,void 0,(function*(t,e=(t=>t)){const r=(0,B.Lg)(t);if(r!==B.nA.VALID)throw new s.mC(t,r);const i=this.context.withExtensions().rpc,n=this.context.withExtensions().readProvider,o=yield n.getScript(t,"head"),a=yield n.getEntrypoints(t);return e(new ye(t,o,this,this.context.contract,a,i,n),this.context)}))}}class Je{constructor(t){this.context=t}getPKH(){return V(this,void 0,void 0,(function*(){return this.context.signer.publicKeyHash()}))}getPK(){return V(this,void 0,void 0,(function*(){return this.context.signer.publicKey()}))}mapTransferParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.TRANSACTION)}))}mapStakeParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.TRANSACTION)}))}mapUnstakeParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.TRANSACTION)}))}mapFinalizeUnstakeParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.TRANSACTION)}))}mapOriginateParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.ORIGINATION)}))}mapDelegateParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.DELEGATION)}))}mapIncreasePaidStorageWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.INCREASE_PAID_STORAGE)}))}mapTransferTicketParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.TRANSFER_TICKET)}))}mapRegisterGlobalConstantParamsToWalletParams(t){return V(this,void 0,void 0,(function*(){return Q(yield t(),i.w9.REGISTER_GLOBAL_CONSTANT)}))}sendOperations(t){return V(this,void 0,void 0,(function*(){return(yield this.context.batch.batch(t).send()).hash}))}sign(t,e){return V(this,void 0,void 0,(function*(){const{prefixSig:r}=yield this.context.signer.sign(t,e);return r}))}}class qe{constructor(t){this.context=t}getNextProto(){return V(this,void 0,void 0,(function*(){if(!this.context.proto){const t=yield this.context.readProvider.getNextProtocol("head");this.context.proto=t}return this.context.proto}))}parseScript(t){return V(this,void 0,void 0,(function*(){return new j.iX({protocol:yield this.getNextProto()}).parseScript(t)}))}parseMichelineExpression(t){return V(this,void 0,void 0,(function*(){return new j.iX({protocol:yield this.getNextProto()}).parseMichelineExpression(t)}))}parseJSON(t){return V(this,void 0,void 0,(function*(){return new j.iX({protocol:yield this.getNextProto()}).parseJSON(t)}))}prepareCodeOrigination(t){return V(this,void 0,void 0,(function*(){const e=t;if(e.code=yield this.formatCodeParam(t.code),t.init)e.init=yield this.formatInitParam(t.init);else if(t.storage){const r=e.code.find((t=>"prim"in t&&"storage"===t.prim));if(!(null===r||void 0===r?void 0:r.args))throw new Vt("The storage section is missing from the script",t.code);const i=new K.Sj(r.args[0]),n=yield this.findGlobalConstantsHashAndValue(i);if(0!==Object.keys(n).length){const i=new j.iX({expandGlobalConstant:n}).parseJSON(r.args[0]),s=new K.Sj(i);e.init=s.Encode(t.storage)}else e.init=i.Encode(t.storage);delete e.storage}return e}))}formatCodeParam(t){return V(this,void 0,void 0,(function*(){let e;if("string"===typeof t){const r=yield this.parseScript(t);if(null===r)throw new Vt("Unable to parse",t);e=r}else{const r=yield this.parseJSON(t),i=["parameter","storage","code"];e=r.sort(((t,e)=>i.indexOf(t.prim)-i.indexOf(e.prim)))}return e}))}formatInitParam(t){return V(this,void 0,void 0,(function*(){let e;if("string"===typeof t){const r=yield this.parseMichelineExpression(t);if(null===r)throw new $t("Invalid init parameter",t);e=r}else e=yield this.parseJSON(t);return e}))}findGlobalConstantsHashAndValue(t){return V(this,void 0,void 0,(function*(){const e=t.findToken("constant"),r={};if(0!==e.length)for(const t of e){const e=t.tokenVal.args;if(e){const t=e[0];if(t.string){const e=t.string,i=yield this.context.globalConstantsProvider.getGlobalConstantByHash(e);Object.assign(r,{[e]:i})}}}return r}))}}class tr{constructor(t){this.context=t}packData(t){return V(this,void 0,void 0,(function*(){return this.context.rpc.packData(t)}))}}s.IT;class er extends s.Q1{constructor(){super(),this.name="UnconfiguredGlobalConstantsProviderError",this.message="No global constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."}}class rr{getGlobalConstantByHash(t){return V(this,void 0,void 0,(function*(){throw new er}))}}class ir{constructor(t){this.rpc=t}getBalance(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getBalance(t,{block:String(e)})}))}getSpendable(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getSpendable(t,{block:String(e)})}))}getDelegate(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getDelegate(t,{block:String(e)})}))}getNextProtocol(t){return V(this,void 0,void 0,(function*(){return(yield this.rpc.getProtocols({block:String(t)})).next_protocol}))}getProtocolConstants(t){return V(this,void 0,void 0,(function*(){const{time_between_blocks:e,minimal_block_delay:r,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:n,hard_storage_limit_per_operation:s,cost_per_byte:o,smart_rollup_origination_size:a}=yield this.rpc.getConstants({block:String(t)});return{time_between_blocks:e,minimal_block_delay:r,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:n,hard_storage_limit_per_operation:s,cost_per_byte:o,smart_rollup_origination_size:a}}))}getScript(t,e){return V(this,void 0,void 0,(function*(){const{script:r}=yield this.rpc.getContract(t,{block:String(e)});return r}))}getStorage(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getStorage(t,{block:String(e)})}))}getBlockHash(t){return V(this,void 0,void 0,(function*(){const{hash:e}=yield this.rpc.getBlockHeader({block:String(t)});return e}))}getBlockLevel(t){return V(this,void 0,void 0,(function*(){const{level:e}=yield this.rpc.getBlockHeader({block:String(t)});return e}))}getCounter(t,e){return V(this,void 0,void 0,(function*(){const{counter:r}=yield this.rpc.getContract(t,{block:String(e)});return r||"0"}))}getBlockTimestamp(t){return V(this,void 0,void 0,(function*(){const{timestamp:e}=yield this.rpc.getBlockHeader({block:String(t)});return e}))}getBigMapValue(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getBigMapExpr(t.id,t.expr,{block:String(e)})}))}getSaplingDiffById(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getSaplingDiffById(t.id,{block:String(e)})}))}getSaplingDiffByContract(t,e){return V(this,void 0,void 0,(function*(){return this.rpc.getSaplingDiffByContract(t,{block:String(e)})}))}getEntrypoints(t){return V(this,void 0,void 0,(function*(){return this.rpc.getEntrypoints(t)}))}getChainId(){return V(this,void 0,void 0,(function*(){return this.rpc.getChainId()}))}isAccountRevealed(t,e){return V(this,void 0,void 0,(function*(){const r=yield this.rpc.getManagerKey(t,{block:String(e)});return r&&"object"===typeof r?!!r.key:!!r}))}getBlock(t){return V(this,void 0,void 0,(function*(){return this.rpc.getBlock({block:String(t)})}))}getLiveBlocks(t){return this.rpc.getLiveBlocks({block:String(t)})}getAdaptiveIssuanceLaunchCycle(t){return this.rpc.getAdaptiveIssuanceLaunchCycle({block:String(t)})}}class nr extends s.Xi{constructor(t){super(),this.type=t,this.name="UnsupportedEventError",this.message=`Unsupported event type "${t}" expecting one of the "data", "error", or "close".`}}class sr extends s.Xi{constructor(t){super(),this.invalidExpression=t,this.name="InvalidFilterExpressionError",this.message="Invalid filter expression expecting the object to contain either and/or property"}}const or=(t,e)=>"opHash"in e?((t,e)=>t.hash===e.opHash)(t,e):"source"in e?((t,e)=>{switch(t.kind){case"attestation":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}})(t,e):"kind"in e?((t,e)=>"kind"in t&&t.kind===e.kind)(t,e):"destination"in e&&((t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some((t=>t===e.destination));break;case"transaction":return t.destination===e.destination;default:return!1}})(t,e),ar=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every((e=>"and"in e||"or"in e?((t,e)=>{if(Array.isArray(e.and))return e.and.every((e=>ar(t,e)));if(Array.isArray(e.or))return e.or.some((e=>ar(t,e)));throw new sr(e)})(t,e):or(t,e)))};class cr{constructor(t,e=!1,r=(0,x.L)()){this.shouldRetry=e,this.operatorFunction=r,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new y.B,t.pipe((0,H.Q)(this.completed$),(0,O.M)((t=>{this.call(this.messageListeners,t)}),(t=>{this.call(this.errorListeners,t)}),(()=>{this.call(this.closeListeners)})),this.shouldRetry?r:(0,O.M)(),(0,R.W)((()=>_.t))).subscribe()}call(t,e){for(const r of t)try{r(e)}catch(t){}}remove(t,e){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}on(t,e){switch(t){case"data":this.messageListeners.push(e);break;case"error":this.errorListeners.push(e);break;case"close":this.closeListeners.push(e);break;default:throw new nr(t)}}off(t,e){switch(t){case"data":this.remove(this.messageListeners,e);break;case"error":this.remove(this.errorListeners,e);break;case"close":this.remove(this.closeListeners,e);break;default:throw new nr(t)}}close(){this.completed$.next()}}const ur={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:(0,x.L)()},hr=t=>(0,b.H)((e=>new o.c((r=>{for(const a of e.operations)for(const c of a)for(const a of c.contents){const u=a.metadata.internal_operation_results;if(u)for(const a of u)i=a,n=null===t||void 0===t?void 0:t.address,s=null===t||void 0===t?void 0:t.tag,o=null===t||void 0===t?void 0:t.excludeFailedOperations,"event"!==i.kind||s&&i.tag!==s||n&&i.source!==n||o&&"applied"!==i.result.status||r.next(Object.assign({opHash:c.hash,blockHash:e.hash,level:e.header.level},a))}var i,n,s,o;r.complete()}))));class lr{constructor(t,e={}){this.context=t,this._config$=new d.t(Object.assign(Object.assign({},ur),e)),this.timer$=this._config$.pipe((0,S.T)((t=>null===t||void 0===t?void 0:t.pollingIntervalMilliseconds)),(0,A.n)((t=>t?(0,v.O)(0,t):(0,l.H)(this.getConfirmationPollingInterval()).pipe((0,A.n)((t=>(0,v.O)(0,t))))))),this.newBlock$=this.timer$.pipe((0,A.n)((()=>(t=>(0,l.H)(t.rpc.getBlock()).pipe((0,w.$)()))(this.context))),(0,M.w)("hash"),(0,P.u)({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!0}))}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return V(this,void 0,void 0,(function*(){if(!this.config.pollingIntervalMilliseconds){const t=5e3,e=700;try{const r=yield this.context.readProvider.getProtocolConstants("head"),i=(r.minimal_block_delay?r.minimal_block_delay.multipliedBy(1e3):new U.A(t)).dividedBy(3);this.config.pollingIntervalMilliseconds=0===i.toNumber()?e:Math.max(i.toNumber(),e)}catch(e){return t}}return this.config.pollingIntervalMilliseconds}))}subscribeBlock(t){return new cr(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(t){return new cr(this.newBlock$.pipe((0,S.T)((t=>null===t||void 0===t?void 0:t.hash))),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(t){return new cr(this.newBlock$.pipe((t=>(0,b.H)((e=>new o.c((r=>{for(const i of e.operations)for(const e of i)for(const i of e.contents)ar(Object.assign({hash:e.hash},i),t)&&r.next(Object.assign({hash:e.hash},i));r.complete()})))))(t)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(t){return new cr(this.newBlock$.pipe(hr(t)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class dr{constructor(t){this.context=t}getNextProto(){return V(this,void 0,void 0,(function*(){if(!this.context.proto){const t=yield this.context.readProvider.getNextProtocol("head");this.context.proto=t}return this.context.proto}))}forge(t){return V(this,arguments,void 0,(function*({branch:t,contents:e}){return new G.B3(yield this.getNextProto()).forge({branch:t,contents:e})}))}}const pr={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class fr{constructor(t,e=new Z,r,n=new d.t(Object.assign({},pr)),s,o,a,c,u,h,l,p){this._rpc=t,this._signer=e,this._proto=r,this._config=n,this.providerDecorator=[],this.tz=new Pe(this),this.estimate=new Le(this),this.contract=new Ze(this,this.estimate),this.prepare=new Oe(this),this.batch=new Ce(this,this.estimate),this.wallet=new Qe(this),this.withExtensions=()=>{let t=this.clone();return this.providerDecorator.forEach((e=>{t=e(t)})),t},"string"===typeof this._rpc?this._rpcClient=new i.XK(this._rpc):this._rpcClient=this._rpc,this._forger=s||new dr(this),this._injector=o||new W(this),this.operationFactory=new Kt(this),this._walletProvider=c||new Je(this),this._parser=u||new qe(this),this._packer=a||new tr(this),this._globalConstantsProvider=h||new rr,this._readProvider=l||new ir(this._rpcClient),this._stream=p||new lr(this)}get config(){return this._config.getValue()}set config(t){this._config.next(Object.assign({},t))}setPartialConfig(t){this._config.next(Object.assign(Object.assign({},this._config.getValue()),t))}get rpc(){return this._rpcClient}set rpc(t){this._rpcClient=t}get injector(){return this._injector}set injector(t){this._injector=t}get forger(){return this._forger}set forger(t){this._forger=t}get signer(){return this._signer}set signer(t){this._signer=t}get walletProvider(){return this._walletProvider}set walletProvider(t){this._walletProvider=t}set proto(t){this._proto=t}get proto(){return this._proto}get parser(){return this._parser}set parser(t){this._parser=t}get packer(){return this._packer}set packer(t){this._packer=t}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(t){this._globalConstantsProvider=t}get readProvider(){return this._readProvider}set readProvider(t){this._readProvider=t}get stream(){return this._stream}set stream(t){this._stream=t}isAnyProtocolActive(){return V(this,arguments,void 0,(function*(t=[]){if(this._proto)return t.includes(this._proto);{const e=yield this.readProvider.getNextProtocol("head");return t.includes(e)}}))}isAnySignerConfigured(){return!(this.signer instanceof Z)}clone(){return new fr(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(t){this.providerDecorator.push(t)}}const gr={commitHash:"ff502b6457efd5502635c8d6fe796fe156ef82b7",version:"24.0.1"};s.IT;s.Q1;class mr{packData(t){return V(this,void 0,void 0,(function*(){const{bytes:e}=(0,j.R1)(t.data,t.type);return{packed:e}}))}}class yr{constructor(t){this._rpc=t,this._options={},this.format=B.GP,"string"===typeof this._rpc?this._rpcClient=new i.XK(this._rpc):this._rpcClient=this._rpc,this._context=new fr(t),this._wallet=new Qe(this._context),this.setProvider({rpc:this._rpcClient})}setProvider({rpc:t,stream:e,signer:r,protocol:i,config:n,forger:s,wallet:o,packer:a,globalConstantsProvider:c,readProvider:u,parserProvider:h,injectorProvider:l}){this.setRpcProvider(t),this.setStreamProvider(e),this.setSignerProvider(r),this.setForgerProvider(s),this.setWalletProvider(o),this.setPackerProvider(a),this.setGlobalConstantsProvider(c),this.setReadProvider(u),this.setParserProvider(h),this.setInjectorProvider(l),this._context.proto=i,n&&this._context.setPartialConfig(n)}setSignerProvider(t){this._options.signer||"undefined"!==typeof t?"undefined"!==typeof t&&(this._context.signer=t,this._options.signer=t):(this._context.signer=new Z,this._options.signer=t)}setRpcProvider(t){"string"===typeof t?this._rpcClient=new i.XK(t):void 0===t||(this._rpcClient=t),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(t){if("undefined"!==typeof t)this._options.forger=t,this._context.forger=t;else if(void 0===this._options.forger){const t=this.getFactory(dr)();this._options.forger=t,this._context.forger=t}}setStreamProvider(t){if("string"===typeof t){const e=new lr(new fr(new i.XK(t)));this._options.stream=e,this._context.stream=e}else if("undefined"!==typeof t)this._options.stream=t,this._context.stream=t;else if(void 0===this._options.stream){const t=this.getFactory(lr)();this._options.stream=t,this._context.stream=t}}setWalletProvider(t){if(this._options.wallet||"undefined"!==typeof t)"undefined"!==typeof t&&(this._options.wallet=t,this._context.walletProvider=t);else{const t=this.getFactory(Je)();this._options.wallet=t,this._context.walletProvider=t}}setPackerProvider(t){if(this._options.packer||"undefined"!==typeof t)"undefined"!==typeof t&&(this._context.packer=t,this._options.packer=t);else{const t=this.getFactory(tr)();this._context.packer=t,this._options.packer=t}}setGlobalConstantsProvider(t){if(this._options.globalConstantsProvider||"undefined"!==typeof t)"undefined"!==typeof t&&(this._context.globalConstantsProvider=t,this._options.globalConstantsProvider=t);else{const t=new rr;this._context.globalConstantsProvider=t,this._options.globalConstantsProvider=t}}setReadProvider(t){const e=t||new ir(this._context.rpc);this._options.readProvider=e,this._context.readProvider=e}setParserProvider(t){if(this._options.parserProvider||"undefined"!==typeof t)"undefined"!==typeof t&&(this._context.parser=t,this._options.parserProvider=t);else{const t=new qe(this._context);this._context.parser=t,this._options.parserProvider=t}}setInjectorProvider(t){if(this._options.injectorProvider||"undefined"!==typeof t)"undefined"!==typeof t&&(this._context.injector=t,this._options.injectorProvider=t);else{const t=new W(this._context);this._context.injector=t,this._options.injectorProvider=t}}setFieldNumberingStrategy(t){K.ou.fieldNumberingStrategy=t}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(t){Array.isArray(t)?t.forEach((t=>t.configureContext(this._context))):t.configureContext(this._context)}getFactory(t){return(...e)=>new t(this._context,...e)}getVersionInfo(){return gr}}},48110:(t,e,r)=>{r.d(e,{$$:()=>Pt,$9:()=>mt,$W:()=>u.$W,$u:()=>u.$u,Ad:()=>Ot,Ag:()=>Lt,Ar:()=>Rt,GP:()=>zt,JF:()=>Kt,KE:()=>Bt,Lg:()=>xt,Ne:()=>lt,O7:()=>u.O7,PW:()=>pt,Qk:()=>vt,RY:()=>gt,Rk:()=>it,Rv:()=>ft,WP:()=>bt,YV:()=>jt,Ye:()=>_t,Z_:()=>Ut,_f:()=>Ht,aP:()=>wt,fK:()=>Mt,g2:()=>At,hi:()=>Tt,jX:()=>Et,jl:()=>Ct,lS:()=>It,m6:()=>St,nA:()=>u.nA,qr:()=>Gt,vz:()=>u.vz,ww:()=>kt,yC:()=>Dt,yr:()=>yt});var i=r(19444),n=r(91889),s=r.n(n),o=r(60346),a=r(64527),c=r.n(a),u=r(17432),h=(r(34904),r(56133)),l="undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d=[],p=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array,g=!1;function m(){g=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)d[e]=t[e],p[t.charCodeAt(e)]=e;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63}function y(t,e,r){for(var i,n,s=[],o=e;o<r;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(d[(n=i)>>18&63]+d[n>>12&63]+d[n>>6&63]+d[63&n]);return s.join("")}function _(t){var e;g||m();for(var r=t.length,i=r%3,n="",s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(y(t,a,a+o>c?c:a+o));return 1===i?(e=t[r-1],n+=d[e>>2],n+=d[e<<4&63],n+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],n+=d[e>>10],n+=d[e>>4&63],n+=d[e<<2&63],n+="="),s.push(n),s.join("")}function v(t,e,r,i,n){var s,o,a=8*n-i-1,c=(1<<a)-1,u=c>>1,h=-7,l=r?n-1:0,d=r?-1:1,p=t[e+l];for(l+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+t[e+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+t[e+l],l+=d,h-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=u}return(p?-1:1)*o*Math.pow(2,s-i)}function w(t,e,r,i,n,s){var o,a,c,u=8*s-n-1,h=(1<<u)-1,l=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,f=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(e*c-1)*Math.pow(2,n),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,n),o=0));n>=8;t[r+p]=255&a,p+=f,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;t[r+p]=255&o,p+=f,o/=256,u-=8);t[r+p-f]|=128*g}var A={}.toString,b=Array.isArray||function(t){return"[object Array]"==A.call(t)};function E(){return P.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function O(t,e){if(E()<e)throw new RangeError("Invalid typed array length");return P.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=P.prototype:(null===t&&(t=new P(e)),t.length=e),t}function P(t,e,r){if(!P.TYPED_ARRAY_SUPPORT&&!(this instanceof P))return new P(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return R(this,t)}return S(this,t,e,r)}function S(t,e,r,i){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);P.TYPED_ARRAY_SUPPORT?(t=e).__proto__=P.prototype:t=L(t,e);return t}(t,e,r,i):"string"===typeof e?function(t,e,r){"string"===typeof r&&""!==r||(r="utf8");if(!P.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|N(e,r);t=O(t,i);var n=t.write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(k(e)){var r=0|I(e.length);return 0===(t=O(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(i=e.length)!==i?O(t,0):L(t,e);if("Buffer"===e.type&&b(e.data))return L(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function T(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function R(t,e){if(T(e),t=O(t,e<0?0:0|I(e)),!P.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function L(t,e){var r=e.length<0?0:0|I(e.length);t=O(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function I(t){if(t>=E())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E().toString(16)+" bytes");return 0|t}function k(t){return!(null==t||!t._isBuffer)}function N(t,e){if(k(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ot(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return at(t).length;default:if(i)return ot(t).length;e=(""+e).toLowerCase(),i=!0}}function C(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,e,r);case"utf8":case"utf-8":return V(this,e,r);case"ascii":return z(this,e,r);case"latin1":case"binary":return W(this,e,r);case"base64":return F(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function D(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function x(t,e,r,i,n){if(0===t.length)return-1;if("string"===typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"===typeof e&&(e=P.from(e,i)),k(e))return 0===e.length?-1:H(t,e,r,i,n);if("number"===typeof e)return e&=255,P.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):H(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function H(t,e,r,i,n){var s,o=1,a=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var h=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*o}else-1!==h&&(s-=s-h),h=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var l=!0,d=0;d<c;d++)if(u(t,s+d)!==u(e,d)){l=!1;break}if(l)return s}return-1}function M(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[r+o]=a}return o}function U(t,e,r,i){return ct(ot(e,t.length-r),t,r,i)}function B(t,e,r,i){return ct(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function K(t,e,r,i){return B(t,e,r,i)}function j(t,e,r,i){return ct(at(e),t,r,i)}function G(t,e,r,i){return ct(function(t,e){for(var r,i,n,s=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(r=t.charCodeAt(o))>>8,n=r%256,s.push(n),s.push(i);return s}(e,t.length-r),t,r,i)}function F(t,e,r){return 0===e&&r===t.length?_(t):_(t.slice(e,r))}function V(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var s,o,a,c,u=t[n],h=null,l=u>239?4:u>223?3:u>191?2:1;if(n+l<=r)switch(l){case 1:u<128&&(h=u);break;case 2:128===(192&(s=t[n+1]))&&(c=(31&u)<<6|63&s)>127&&(h=c);break;case 3:s=t[n+1],o=t[n+2],128===(192&s)&&128===(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:s=t[n+1],o=t[n+2],a=t[n+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,l=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=l}return function(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=$));return r}(i)}P.TYPED_ARRAY_SUPPORT=void 0===l.TYPED_ARRAY_SUPPORT||l.TYPED_ARRAY_SUPPORT,E(),P.poolSize=8192,P._augment=function(t){return t.__proto__=P.prototype,t},P.from=function(t,e,r){return S(null,t,e,r)},P.TYPED_ARRAY_SUPPORT&&(P.prototype.__proto__=Uint8Array.prototype,P.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&P[Symbol.species]),P.alloc=function(t,e,r){return function(t,e,r,i){return T(e),e<=0?O(t,e):void 0!==r?"string"===typeof i?O(t,e).fill(r,i):O(t,e).fill(r):O(t,e)}(null,t,e,r)},P.allocUnsafe=function(t){return R(null,t)},P.allocUnsafeSlow=function(t){return R(null,t)},P.isBuffer=function(t){return null!=t&&(!!t._isBuffer||ut(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&ut(t.slice(0,0))}(t))},P.compare=function(t,e){if(!k(t)||!k(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,s=Math.min(r,i);n<s;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},P.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(t,e){if(!b(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return P.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=P.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!k(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},P.byteLength=N,P.prototype._isBuffer=!0,P.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)D(this,e,e+1);return this},P.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)D(this,e,e+3),D(this,e+1,e+2);return this},P.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)D(this,e,e+7),D(this,e+1,e+6),D(this,e+2,e+5),D(this,e+3,e+4);return this},P.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?V(this,0,t):C.apply(this,arguments)},P.prototype.equals=function(t){if(!k(t))throw new TypeError("Argument must be a Buffer");return this===t||0===P.compare(this,t)},P.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},P.prototype.compare=function(t,e,r,i,n){if(!k(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(n>>>=0)-(i>>>=0),o=(r>>>=0)-(e>>>=0),a=Math.min(s,o),c=this.slice(i,n),u=t.slice(e,r),h=0;h<a;++h)if(c[h]!==u[h]){s=c[h],o=u[h];break}return s<o?-1:o<s?1:0},P.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},P.prototype.indexOf=function(t,e,r){return x(this,t,e,r,!0)},P.prototype.lastIndexOf=function(t,e,r){return x(this,t,e,r,!1)},P.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return M(this,t,e,r);case"utf8":case"utf-8":return U(this,t,e,r);case"ascii":return B(this,t,e,r);case"latin1":case"binary":return K(this,t,e,r);case"base64":return j(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function z(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function W(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Y(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=e;s<r;++s)n+=st(t[s]);return n}function Z(t,e,r){for(var i=t.slice(e,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function X(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function Q(t,e,r,i,n,s){if(!k(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function J(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(t.length-r,2);n<s;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function q(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(t.length-r,4);n<s;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function tt(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function et(t,e,r,i,n){return n||tt(t,0,r,4),w(t,e,r,i,23,4),r+4}function rt(t,e,r,i,n){return n||tt(t,0,r,8),w(t,e,r,i,52,8),r+8}P.prototype.slice=function(t,e){var r,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),P.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=P.prototype;else{var n=e-t;r=new P(n,void 0);for(var s=0;s<n;++s)r[s]=this[s+t]}return r},P.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||X(t,e,this.length);for(var i=this[t],n=1,s=0;++s<e&&(n*=256);)i+=this[t+s]*n;return i},P.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||X(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},P.prototype.readUInt8=function(t,e){return e||X(t,1,this.length),this[t]},P.prototype.readUInt16LE=function(t,e){return e||X(t,2,this.length),this[t]|this[t+1]<<8},P.prototype.readUInt16BE=function(t,e){return e||X(t,2,this.length),this[t]<<8|this[t+1]},P.prototype.readUInt32LE=function(t,e){return e||X(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},P.prototype.readUInt32BE=function(t,e){return e||X(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},P.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||X(t,e,this.length);for(var i=this[t],n=1,s=0;++s<e&&(n*=256);)i+=this[t+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},P.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||X(t,e,this.length);for(var i=e,n=1,s=this[t+--i];i>0&&(n*=256);)s+=this[t+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},P.prototype.readInt8=function(t,e){return e||X(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},P.prototype.readInt16LE=function(t,e){e||X(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},P.prototype.readInt16BE=function(t,e){e||X(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},P.prototype.readInt32LE=function(t,e){return e||X(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},P.prototype.readInt32BE=function(t,e){return e||X(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},P.prototype.readFloatLE=function(t,e){return e||X(t,4,this.length),v(this,t,!0,23,4)},P.prototype.readFloatBE=function(t,e){return e||X(t,4,this.length),v(this,t,!1,23,4)},P.prototype.readDoubleLE=function(t,e){return e||X(t,8,this.length),v(this,t,!0,52,8)},P.prototype.readDoubleBE=function(t,e){return e||X(t,8,this.length),v(this,t,!1,52,8)},P.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Q(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[e]=255&t;++s<r&&(n*=256);)this[e+s]=t/n&255;return e+r},P.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||Q(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+r},P.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,1,255,0),P.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},P.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,2,65535,0),P.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},P.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,2,65535,0),P.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},P.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,4,4294967295,0),P.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):q(this,t,e,!0),e+4},P.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,4,4294967295,0),P.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},P.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Q(this,t,e,r,n-1,-n)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o|0)-a&255;return e+r},P.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);Q(this,t,e,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o|0)-a&255;return e+r},P.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,1,127,-128),P.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},P.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,2,32767,-32768),P.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},P.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,2,32767,-32768),P.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},P.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,4,2147483647,-2147483648),P.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):q(this,t,e,!0),e+4},P.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||Q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),P.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):q(this,t,e,!1),e+4},P.prototype.writeFloatLE=function(t,e,r){return et(this,t,e,!0,r)},P.prototype.writeFloatBE=function(t,e,r){return et(this,t,e,!1,r)},P.prototype.writeDoubleLE=function(t,e,r){return rt(this,t,e,!0,r)},P.prototype.writeDoubleBE=function(t,e,r){return rt(this,t,e,!1,r)},P.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,s=i-r;if(this===t&&r<e&&e<i)for(n=s-1;n>=0;--n)t[n+e]=this[n+r];else if(s<1e3||!P.TYPED_ARRAY_SUPPORT)for(n=0;n<s;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},P.prototype.fill=function(t,e,r,i){if("string"===typeof t){if("string"===typeof e?(i=e,e=0,r=this.length):"string"===typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!P.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(s=e;s<r;++s)this[s]=t;else{var o=k(t)?t:ot(new P(t,i).toString()),a=o.length;for(s=0;s<r-e;++s)this[s+e]=o[s%a]}return this};var it,nt=/[^+\/0-9A-Za-z-_]/g;function st(t){return t<16?"0"+t.toString(16):t.toString(16)}function ot(t,e){var r;e=e||1/0;for(var i=t.length,n=null,s=[],o=0;o<i;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function at(t){return function(t){var e,r,i,n,s,o;g||m();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s="="===t[a-2]?2:"="===t[a-1]?1:0,o=new f(3*a/4-s),i=s>0?a-4:a;var c=0;for(e=0,r=0;e<i;e+=4,r+=3)n=p[t.charCodeAt(e)]<<18|p[t.charCodeAt(e+1)]<<12|p[t.charCodeAt(e+2)]<<6|p[t.charCodeAt(e+3)],o[c++]=n>>16&255,o[c++]=n>>8&255,o[c++]=255&n;return 2===s?(n=p[t.charCodeAt(e)]<<2|p[t.charCodeAt(e+1)]>>4,o[c++]=255&n):1===s&&(n=p[t.charCodeAt(e)]<<10|p[t.charCodeAt(e+1)]<<4|p[t.charCodeAt(e+2)]>>2,o[c++]=n>>8&255,o[c++]=255&n),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(nt,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function ct(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function ut(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(t){t.BlockHash="B",t.OperationHash="o",t.OperationListHash="Lo",t.OperationListListHash="LLo",t.ProtocolHash="P",t.ContextHash="Co",t.BlockMetadataHash="bm",t.OperationMetadataHash="r",t.OperationMetadataListHash="Lr",t.OperationMetadataListListHash="LLr",t.Ed25519PublicKeyHash="tz1",t.Secp256k1PublicKeyHash="tz2",t.P256PublicKeyHash="tz3",t.ContractHash="KT1",t.BlindedPublicKeyHash="btz1",t.BLS12_381PublicKeyHash="tz4",t.TXRollupAddress="txr1",t.ZkRollupHash="epx1",t.ScRollupHash="scr1",t.SmartRollupHash="sr1",t.CryptoboxPublicKeyHash="id",t.Ed25519Seed="edsk",t.Ed25519PublicKey="edpk",t.Secp256k1SecretKey="spsk",t.P256SecretKey="p2sk",t.BLS12_381SecretKey="BLsk",t.ValueHash="vh",t.CycleNonce="nce",t.ScriptExpr="expr",t.InboxHash="txi",t.MessageHash="txm",t.CommitmentHash="txc",t.MessageResultHash="txmr",t.MessageResultListHash="txM",t.WithdrawListHash="txw",t.ScRollupStateHash="scs1",t.ScRollupCommitmentHash="scc1",t.SmartRollupStateHash="srs1",t.SmartRollupCommitmentHash="src1",t.Ed25519EncryptedSeed="edesk",t.Secp256k1EncryptedSecretKey="spesk",t.P256EncryptedSecretKey="p2esk",t.BLS12_381EncryptedSecretKey="BLesk",t.Secp256k1EncryptedScalar="seesk",t.Secp256k1PublicKey="sppk",t.P256PublicKey="p2pk",t.Secp256k1Scalar="SSp",t.Secp256k1Element="GSp",t.Ed25519SecretKey="_edsk",t.Ed25519Signature="edsig",t.Secp256k1Signature="spsig1",t.P256Signature="p2sig",t.GenericSignature="sig",t.ChainID="Net",t.SaplingSpendingKey="sask",t.EncryptedSaplingSpendingKey="_sask",t.SaplingAddress="zet1",t.GenericAggregateSignature="asig",t.BLS12_381Signature="BLsig",t.BLS12_381PublicKey="BLpk",t.SlotHeader="sh"}(it||(it={}));const ht={[it.BlockHash]:new Uint8Array([1,52]),[it.OperationHash]:new Uint8Array([5,116]),[it.OperationListHash]:new Uint8Array([133,233]),[it.OperationListListHash]:new Uint8Array([29,159,109]),[it.ProtocolHash]:new Uint8Array([2,170]),[it.ContextHash]:new Uint8Array([79,199]),[it.BlockMetadataHash]:new Uint8Array([234,249]),[it.OperationMetadataHash]:new Uint8Array([5,183]),[it.OperationMetadataListHash]:new Uint8Array([134,39]),[it.OperationMetadataListListHash]:new Uint8Array([29,159,182]),[it.Ed25519PublicKeyHash]:new Uint8Array([6,161,159]),[it.Secp256k1PublicKeyHash]:new Uint8Array([6,161,161]),[it.P256PublicKeyHash]:new Uint8Array([6,161,164]),[it.ContractHash]:new Uint8Array([2,90,121]),[it.BlindedPublicKeyHash]:new Uint8Array([1,2,49,223]),[it.BLS12_381PublicKeyHash]:new Uint8Array([6,161,166]),[it.TXRollupAddress]:new Uint8Array([1,128,120,31]),[it.ZkRollupHash]:new Uint8Array([1,23,224,125]),[it.ScRollupHash]:new Uint8Array([1,118,132,217]),[it.SmartRollupHash]:new Uint8Array([6,124,117]),[it.CryptoboxPublicKeyHash]:new Uint8Array([153,103]),[it.Ed25519Seed]:new Uint8Array([13,15,58,7]),[it.Ed25519PublicKey]:new Uint8Array([13,15,37,217]),[it.Secp256k1SecretKey]:new Uint8Array([17,162,224,201]),[it.P256SecretKey]:new Uint8Array([16,81,238,189]),[it.BLS12_381SecretKey]:new Uint8Array([3,150,192,40]),[it.ValueHash]:new Uint8Array([1,106,242]),[it.CycleNonce]:new Uint8Array([69,220,169]),[it.ScriptExpr]:new Uint8Array([13,44,64,27]),[it.InboxHash]:new Uint8Array([79,148,196]),[it.MessageHash]:new Uint8Array([79,149,30]),[it.CommitmentHash]:new Uint8Array([79,148,17]),[it.MessageResultHash]:new Uint8Array([18,7,206,87]),[it.MessageResultListHash]:new Uint8Array([79,146,82]),[it.WithdrawListHash]:new Uint8Array([79,150,72]),[it.ScRollupStateHash]:new Uint8Array([17,144,122,202]),[it.ScRollupCommitmentHash]:new Uint8Array([17,144,21,100]),[it.SmartRollupStateHash]:new Uint8Array([17,165,235,240]),[it.SmartRollupCommitmentHash]:new Uint8Array([17,165,134,138]),[it.Ed25519EncryptedSeed]:new Uint8Array([7,90,60,179,41]),[it.Secp256k1EncryptedSecretKey]:new Uint8Array([9,237,241,174,150]),[it.P256EncryptedSecretKey]:new Uint8Array([9,48,57,115,171]),[it.BLS12_381EncryptedSecretKey]:new Uint8Array([2,5,30,53,25]),[it.Secp256k1EncryptedScalar]:new Uint8Array([1,131,36,86,248]),[it.Secp256k1PublicKey]:new Uint8Array([3,254,226,86]),[it.P256PublicKey]:new Uint8Array([3,178,139,127]),[it.Secp256k1Scalar]:new Uint8Array([38,248,136]),[it.Secp256k1Element]:new Uint8Array([5,92,0]),[it.Ed25519SecretKey]:new Uint8Array([43,246,78,7]),[it.Ed25519Signature]:new Uint8Array([9,245,205,134,18]),[it.Secp256k1Signature]:new Uint8Array([13,115,101,19,63]),[it.P256Signature]:new Uint8Array([54,240,44,52]),[it.GenericSignature]:new Uint8Array([4,130,43]),[it.ChainID]:new Uint8Array([87,82,0]),[it.SaplingSpendingKey]:new Uint8Array([11,237,20,92]),[it.EncryptedSaplingSpendingKey]:new Uint8Array([11,237,20,92]),[it.SaplingAddress]:new Uint8Array([18,71,40,223]),[it.GenericAggregateSignature]:new Uint8Array([2,75,234,101]),[it.BLS12_381Signature]:new Uint8Array([40,171,64,207]),[it.BLS12_381PublicKey]:new Uint8Array([6,149,135,204]),[it.SlotHeader]:new Uint8Array([2,116,180])},lt={[it.BlockHash]:32,[it.OperationHash]:32,[it.OperationListHash]:32,[it.OperationListListHash]:32,[it.ProtocolHash]:32,[it.ContextHash]:32,[it.BlockMetadataHash]:32,[it.OperationMetadataHash]:32,[it.OperationMetadataListHash]:32,[it.OperationMetadataListListHash]:32,[it.Ed25519PublicKeyHash]:20,[it.Secp256k1PublicKeyHash]:20,[it.P256PublicKeyHash]:20,[it.ContractHash]:20,[it.BlindedPublicKeyHash]:20,[it.BLS12_381PublicKeyHash]:20,[it.TXRollupAddress]:20,[it.ZkRollupHash]:20,[it.ScRollupHash]:20,[it.SmartRollupHash]:20,[it.CryptoboxPublicKeyHash]:16,[it.Ed25519Seed]:32,[it.Ed25519PublicKey]:32,[it.Secp256k1SecretKey]:32,[it.P256SecretKey]:32,[it.BLS12_381SecretKey]:32,[it.ValueHash]:32,[it.CycleNonce]:32,[it.ScriptExpr]:32,[it.InboxHash]:32,[it.MessageHash]:32,[it.CommitmentHash]:32,[it.MessageResultHash]:32,[it.MessageResultListHash]:32,[it.WithdrawListHash]:32,[it.ScRollupStateHash]:32,[it.ScRollupCommitmentHash]:32,[it.SmartRollupStateHash]:32,[it.SmartRollupCommitmentHash]:32,[it.Ed25519EncryptedSeed]:56,[it.Secp256k1EncryptedSecretKey]:56,[it.P256EncryptedSecretKey]:56,[it.BLS12_381EncryptedSecretKey]:56,[it.Secp256k1EncryptedScalar]:60,[it.Secp256k1PublicKey]:33,[it.P256PublicKey]:33,[it.Secp256k1Scalar]:33,[it.Secp256k1Element]:33,[it.Ed25519SecretKey]:64,[it.Ed25519Signature]:64,[it.Secp256k1Signature]:64,[it.P256Signature]:64,[it.GenericSignature]:64,[it.ChainID]:4,[it.SaplingSpendingKey]:169,[it.EncryptedSaplingSpendingKey]:193,[it.SaplingAddress]:43,[it.GenericAggregateSignature]:96,[it.BLS12_381Signature]:96,[it.BLS12_381PublicKey]:48,[it.SlotHeader]:48},dt=[it.P256PublicKeyHash,it.Secp256k1PublicKeyHash,it.Ed25519PublicKeyHash,it.BLS12_381PublicKeyHash,it.ContractHash,it.SmartRollupHash],pt=[it.P256PublicKey,it.Secp256k1PublicKey,it.Ed25519PublicKey,it.BLS12_381PublicKey],ft=[it.P256PublicKeyHash,it.Secp256k1PublicKeyHash,it.Ed25519PublicKeyHash,it.BLS12_381PublicKeyHash],gt=[it.P256Signature,it.Secp256k1Signature,it.Ed25519Signature,it.BLS12_381Signature,it.GenericSignature];function mt(t,e,r){const i=(()=>{try{return s().decode(t)}catch(t){throw t instanceof Error?t.message.includes("checksum")?new u.Xi(u.nA.INVALID_CHECKSUM):new u.Xi(u.nA.INVALID_ENCODING):t}})();let n;for(n in it){const t=it[n],s=ht[t];if(i.length===s.length+lt[t]&&i.slice(0,s.length).every(((t,e)=>t==s[e]))){if(void 0!==e&&e.indexOf(t)<0)throw new u.Xi(u.nA.PREFIX_NOT_ALLOWED);return r?i.slice(s.length):[i.slice(s.length),t]}}throw new u.Xi(u.nA.NO_PREFIX_MATCHED)}function yt(t,e){const[r,i]=mt(t,pt);let n;switch(i){case it.Ed25519PublicKey:n=0;break;case it.Secp256k1PublicKey:n=1;break;case it.P256PublicKey:n=2;break;case it.BLS12_381PublicKey:n=3;break;default:throw new u.jo(u.nA.NO_PREFIX_MATCHED)}const s=new Uint8Array(r.length+1);return s[0]=n,s.set(r,1),void 0!==e&&"array"===e?s:Tt(s)}function _t(t,e){const[r,i]=mt(t,ft),n=new Uint8Array(21);let s;switch(i){case it.Ed25519PublicKeyHash:s=0;break;case it.Secp256k1PublicKeyHash:s=1;break;case it.P256PublicKeyHash:s=2;break;case it.BLS12_381PublicKeyHash:s=3;break;default:throw new u.Ms(t,u.nA.NO_PREFIX_MATCHED)}return n[0]=s,n.set(r,1),void 0!==e&&"array"===e?n:Tt(n)}function vt(t,e){const r=t.indexOf("%");r>=0&&(t=t.slice(0,r));const[i,n]=mt(t,dt),s=new Uint8Array(22);if(n===it.ContractHash||n===it.SmartRollupHash||n===it.ZkRollupHash){let t;switch(n){case it.ContractHash:t=1;break;case it.SmartRollupHash:t=3;break;case it.ZkRollupHash:t=4}s[0]=t,s.set(i,1)}else{let e;switch(n){case it.Ed25519PublicKeyHash:e=0;break;case it.Secp256k1PublicKeyHash:e=1;break;case it.P256PublicKeyHash:e=2;break;case it.BLS12_381PublicKeyHash:e=3;break;default:throw new u.Ms(t,u.nA.NO_PREFIX_MATCHED)}s[0]=0,s[1]=e,s.set(i,2)}return void 0!==e&&"array"===e?s:Tt(s)}function wt(t,e){const r="string"===typeof t?Pt(t):t,i=ht[e],n=new Uint8Array(i.length+r.length);return n.set(i),n.set(r,i.length),s().encode(c()(n))}function At(t){let e,r;switch(e="string"===typeof t?Pt(t):t,e[0]){case 0:r=it.Ed25519PublicKey;break;case 1:r=it.Secp256k1PublicKey;break;case 2:r=it.P256PublicKey;break;case 3:r=it.BLS12_381PublicKey;break;default:throw new Error("invalid address format")}return wt(e.slice(1),r)}function bt(t){let e,r;switch(e="string"===typeof t?Pt(t):t,e[0]){case 0:r=it.Ed25519PublicKeyHash;break;case 1:r=it.Secp256k1PublicKeyHash;break;case 2:r=it.P256PublicKeyHash;break;case 3:r=it.BLS12_381PublicKeyHash;break;default:throw new Error("invalid address format")}return wt(e.slice(1,21),r)}function Et(t){let e;switch(e="string"===typeof t?Pt(t):t,e[0]){case 0:return bt(e.slice(1));case 1:return wt(e.slice(1,21),it.ContractHash);case 3:return wt(e.slice(1,21),it.SmartRollupHash);case 4:return wt(e.slice(1,21),it.ZkRollupHash);default:throw new Error("invalid address format")}}function Ot(t){return wt((0,i.tW)(Pt(t),32),it.ScriptExpr)}function Pt(t){if((t=t.startsWith("0x")?t.slice(2):t).length%2!==0)throw new u.Sj(t,"Expecting even number of characters");if(!t.match(/^([\da-f]{2})*$/gi))throw new u.Sj(t,"Only characters 0-9, a-f and A-F are expected. Optionally, it can be prefixed with '0x'");const e=new Uint8Array(t.length/2);let r=0;for(let i=0;i<t.length;i+=2){const n=t.slice(i,i+2),s=parseInt(n,16);if(Number.isNaN(s))throw new u.Sj(t,"Only characters 0-9, a-f and A-F are expected. Optionally, it can be prefixed with '0x'");e[r++]=s}return e}function St(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Tt(t){return Array.from(t).map((t=>(t>>4&15).toString(16)+(15&t).toString(16))).join("")}function Rt(t){return P.from(Pt(t)).toString("utf8")}function Lt(t){return t.startsWith("0x")?t.slice(2):t}function It(t){const e=t.indexOf("%");return e>=0?[t.slice(0,e),t.slice(e)]:[t,null]}function kt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;const i=r<t.length?t[r]:0,n=r<e.length?e[r]:0;return i<n?-1:i>n?1:0}function Nt(t,e){try{mt(t,e)}catch(t){return t instanceof u.Xi&&void 0!==t.result?t.result:u.nA.OTHER}return u.nA.VALID}function Ct(t){const[e]=It(null!==t&&void 0!==t?t:"");return Nt(e,dt)}function Dt(t){return Nt(t,[it.ChainID])}function xt(t){return Nt(t,[it.ContractHash])}function Ht(t){return Nt(t,ft)}function Mt(t){return Nt(t,gt)}function Ut(t){return Nt(t,pt)}function Bt(t){return Nt(t,[it.OperationHash])}function Kt(t){return Nt(t,[it.ProtocolHash])}function jt(t){return Nt(t,[it.BlockHash])}h.A.longSignatures;class Gt extends u.Xi{constructor(t,e){super(`The protocol hash '${t}' is invalid`,e),this.protocolHash=t,this.name="InvalidProtocolHashError",this.name=this.constructor.name}}u.ic;const Ft=6,Vt=3;function $t(t){switch(t){case"tz":return Ft;case"mtz":return Vt;default:return 0}}function zt(t="mutez",e="mutez",r){const i=new o.A(r);return i.isNaN()?r:i.multipliedBy(Math.pow(10,$t(t))).dividedBy(Math.pow(10,$t(e)))}},90749:(t,e,r)=>{var i=r(48287).Buffer;const n=r(47108),s=r(78396),o=r(53209),a=r(96907);let c=a._default;const u="Invalid mnemonic",h="Invalid entropy",l="Invalid mnemonic checksum",d="A wordlist is required but a default could not be found.\nPlease pass a 2048 word array explicitly.";function p(t){return(t||"").normalize("NFKD")}function f(t,e,r){for(;t.length<r;)t=e+t;return t}function g(t){return parseInt(t,2)}function m(t){return t.map((t=>f(t.toString(2),"0",8))).join("")}function y(t){const e=8*t.length/32,r=n("sha256").update(t).digest();return m(Array.from(r)).slice(0,e)}function _(t){return"mnemonic"+(t||"")}function v(t,e){if(!(e=e||c))throw new Error(d);const r=p(t).split(" ");if(r.length%3!==0)throw new Error(u);const n=r.map((t=>{const r=e.indexOf(t);if(-1===r)throw new Error(u);return f(r.toString(2),"0",11)})).join(""),s=32*Math.floor(n.length/33),o=n.slice(0,s),a=n.slice(s),m=o.match(/(.{1,8})/g).map(g);if(m.length<16)throw new Error(h);if(m.length>32)throw new Error(h);if(m.length%4!==0)throw new Error(h);const _=i.from(m);if(y(_)!==a)throw new Error(l);return _.toString("hex")}function w(t,e){if(i.isBuffer(t)||(t=i.from(t,"hex")),!(e=e||c))throw new Error(d);if(t.length<16)throw new TypeError(h);if(t.length>32)throw new TypeError(h);if(t.length%4!==0)throw new TypeError(h);const r=(m(Array.from(t))+y(t)).match(/(.{1,11})/g).map((t=>{const r=g(t);return e[r]}));return"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0]?r.join("\u3000"):r.join(" ")}r(96907).wordlists},11655:(t,e,r)=>{r.d(e,{Kq:()=>u.A,d4:()=>a.d4});var i=r(19888),n=r(69242),s=r(42724),o=r(38298),a=r(83715),c=r(50451),u=r(59904);r(41458),r(96540),r(3769);(0,a.ld)(n.useSyncExternalStoreWithSelector),(0,c.T)(i.useSyncExternalStore),(0,o.d)(s.r)},96540:(t,e,r)=>{t.exports=r(15287)},81591:(t,e,r)=>{r.d(e,{d7:()=>a});var i=r(96540);function n(t,e,r){var n=this,s=(0,i.useRef)(null),o=(0,i.useRef)(0),a=(0,i.useRef)(null),c=(0,i.useRef)([]),u=(0,i.useRef)(),h=(0,i.useRef)(),l=(0,i.useRef)(t),d=(0,i.useRef)(!0);l.current=t;var p="undefined"!=typeof window,f=!e&&0!==e&&p;if("function"!=typeof t)throw new TypeError("Expected a function");e=+e||0;var g=!!(r=r||{}).leading,m=!("trailing"in r)||!!r.trailing,y="maxWait"in r,_="debounceOnServer"in r&&!!r.debounceOnServer,v=y?Math.max(+r.maxWait||0,e):null;(0,i.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]);var w=(0,i.useMemo)((function(){var t=function(t){var e=c.current,r=u.current;return c.current=u.current=null,o.current=t,h.current=l.current.apply(r,e)},r=function(t,e){f&&cancelAnimationFrame(a.current),a.current=f?requestAnimationFrame(t):setTimeout(t,e)},i=function(t){if(!d.current)return!1;var r=t-s.current;return!s.current||r>=e||r<0||y&&t-o.current>=v},w=function(e){return a.current=null,m&&c.current?t(e):(c.current=u.current=null,h.current)},A=function t(){var n=Date.now();if(i(n))return w(n);if(d.current){var a=e-(n-s.current),c=y?Math.min(a,v-(n-o.current)):a;r(t,c)}},b=function(){if(p||_){var l=Date.now(),f=i(l);if(c.current=[].slice.call(arguments),u.current=n,s.current=l,f){if(!a.current&&d.current)return o.current=s.current,r(A,e),g?t(s.current):h.current;if(y)return r(A,e),t(s.current)}return a.current||r(A,e),h.current}};return b.cancel=function(){a.current&&(f?cancelAnimationFrame(a.current):clearTimeout(a.current)),o.current=0,c.current=s.current=u.current=a.current=null},b.isPending=function(){return!!a.current},b.flush=function(){return a.current?w(Date.now()):h.current},b}),[g,y,e,v,m,f,p,_]);return w}function s(t,e){return t===e}function o(t,e){return e}function a(t,e,r){var a=r&&r.equalityFn||s,c=(0,i.useReducer)(o,t),u=c[0],h=c[1],l=n((0,i.useCallback)((function(t){return h(t)}),[h]),e,r),d=(0,i.useRef)(t);return a(d.current,t)||(l(t),d.current=t),a(u,t)&&l.cancel(),[u,l]}},78461:(t,e,r)=>{r.d(e,{KO:()=>w,j6:()=>y,om:()=>m});var i=r(5125),n=r(63424),s=r(36743),o=r(96148);class a{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const c="@firebase/app",u="0.10.1",h=new n.Vy("@firebase/app"),l={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map,f=new Map;function g(t,e){try{t.container.addComponent(e)}catch(r){h.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function m(t){const e=t.name;if(f.has(e))return h.debug(`There were multiple attempts to register component ${e}.`),!1;f.set(e,t);for(const e of d.values())g(e,t);for(const e of p.values())g(e,t);return!0}function y(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}const _={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},v=new s.FA("app","Firebase",_);function w(t,e,r){var n;let s=null!==(n=l[t])&&void 0!==n?n:t;r&&(s+=`-${r}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void h.warn(t.join(" "))}m(new i.uA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const A="firebase-heartbeat-database",b=1,E="firebase-heartbeat-store";let O=null;function P(){return O||(O=(0,o.P2)(A,b,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(E)}catch(t){}}}).catch((t=>{throw v.create("idb-open",{originalErrorMessage:t.message})}))),O}async function S(t,e){try{const r=(await P()).transaction(E,"readwrite"),i=r.objectStore(E);await i.put(e,T(t)),await r.done}catch(t){if(t instanceof s.g)h.warn(t.message);else{const e=v.create("idb-set",{originalErrorMessage:null===t||void 0===t?void 0:t.message});h.warn(e.message)}}}function T(t){return`${t.name}!${t.options.appId}`}class R{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new I(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=L(),{heartbeatsToSend:r,unsentEntries:i}=function(t,e=1024){const r=[];let i=t.slice();for(const n of t){const t=r.find((t=>t.agent===n.agent));if(t){if(t.dates.push(n.date),k(r)>e){t.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),k(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}(this._heartbeatsCache.heartbeats),n=(0,s.Uj)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function L(){return(new Date).toISOString().substring(0,10)}class I{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await P()).transaction(E),r=await e.objectStore(E).get(T(t));return await e.done,r}catch(t){if(t instanceof s.g)h.warn(t.message);else{const e=v.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});h.warn(e.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return S(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return S(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}}}function k(t){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:t})).length}var N;N="",m(new i.uA("platform-logger",(t=>new a(t)),"PRIVATE")),m(new i.uA("heartbeat",(t=>new R(t)),"PRIVATE")),w(c,u,N),w(c,u,"esm2017"),w("fire-js","")},5125:(t,e,r)=>{r.d(e,{uA:()=>i});r(36743);class i{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}},9364:(t,e,r)=>{r(69559);var i=r(5125),n=r(96148),s=r(36743),o=r(78461);const a="/firebase-messaging-sw.js",c="/firebase-cloud-messaging-push-scope",u="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",h="https://fcmregistrations.googleapis.com/v1",l="google.c.a.c_id",d="google.c.a.c_l",p="google.c.a.ts";var f,g;function m(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(e),i=new Uint8Array(r.length);for(let t=0;t<r.length;++t)i[t]=r.charCodeAt(t);return i}!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(f||(f={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(g||(g={}));const _="fcm_token_details_db",v=5,w="fcm_token_object_Store";const A="firebase-messaging-database",b=1,E="firebase-messaging-store";let O=null;function P(){return O||(O=(0,n.P2)(A,b,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(E)}})),O}async function S(t){const e=R(t),r=await P(),i=await r.transaction(E).objectStore(E).get(e);if(i)return i;{const e=await async function(t){if("databases"in indexedDB){const t=(await indexedDB.databases()).map((t=>t.name));if(!t.includes(_))return null}let e=null;return(await(0,n.P2)(_,v,{upgrade:async(r,i,n,s)=>{var o;if(i<2)return;if(!r.objectStoreNames.contains(w))return;const a=s.objectStore(w),c=await a.index("fcmSenderId").get(t);if(await a.clear(),c)if(2===i){const t=c;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(o=t.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"===typeof t.vapidKey?t.vapidKey:m(t.vapidKey)}}}else if(3===i){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:m(t.auth),p256dh:m(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:m(t.vapidKey)}}}else if(4===i){const t=c;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:m(t.auth),p256dh:m(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:m(t.vapidKey)}}}}})).close(),await(0,n.MR)(_),await(0,n.MR)("fcm_vapid_details_db"),await(0,n.MR)("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null}(t.appConfig.senderId);if(e)return await T(t,e),e}}async function T(t,e){const r=R(t),i=(await P()).transaction(E,"readwrite");return await i.objectStore(E).put(e,r),await i.done,e}function R({appConfig:t}){return t.appId}const L={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},I=new s.FA("messaging","Messaging",L);async function k(t,e){const r={method:"DELETE",headers:await C(t)};try{const i=await fetch(`${N(t.appConfig)}/${e}`,r),n=await i.json();if(n.error){const t=n.error.message;throw I.create("token-unsubscribe-failed",{errorInfo:t})}}catch(t){throw I.create("token-unsubscribe-failed",{errorInfo:null===t||void 0===t?void 0:t.toString()})}}function N({projectId:t}){return`${h}/projects/${t}/registrations`}async function C({appConfig:t,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function D({p256dh:t,auth:e,endpoint:r,vapidKey:i}){const n={web:{endpoint:r,auth:e,p256dh:t}};return i!==u&&(n.web.applicationPubKey=i),n}const x=6048e5;async function H(t){const e=await async function(t,e){const r=await t.pushManager.getSubscription();if(r)return r;return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y(e)})}(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:m(e.getKey("auth")),p256dh:m(e.getKey("p256dh"))},i=await S(t.firebaseDependencies);if(i){if(function(t,e){const r=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,n=e.auth===t.auth,s=e.p256dh===t.p256dh;return r&&i&&n&&s}(i.subscriptionOptions,r))return Date.now()>=i.createTime+x?async function(t,e){try{const r=await async function(t,e){const r=await C(t),i=D(e.subscriptionOptions),n={method:"PATCH",headers:r,body:JSON.stringify(i)};let s;try{const r=await fetch(`${N(t.appConfig)}/${e.token}`,n);s=await r.json()}catch(t){throw I.create("token-update-failed",{errorInfo:null===t||void 0===t?void 0:t.toString()})}if(s.error){const t=s.error.message;throw I.create("token-update-failed",{errorInfo:t})}if(!s.token)throw I.create("token-update-no-token");return s.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return await T(t.firebaseDependencies,i),r}catch(t){throw t}}(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token;try{await k(t.firebaseDependencies,i.token)}catch(t){}return M(t.firebaseDependencies,r)}return M(t.firebaseDependencies,r)}async function M(t,e){const r=await async function(t,e){const r=await C(t),i=D(e),n={method:"POST",headers:r,body:JSON.stringify(i)};let s;try{const e=await fetch(N(t.appConfig),n);s=await e.json()}catch(t){throw I.create("token-subscribe-failed",{errorInfo:null===t||void 0===t?void 0:t.toString()})}if(s.error){const t=s.error.message;throw I.create("token-subscribe-failed",{errorInfo:t})}if(!s.token)throw I.create("token-subscribe-no-token");return s.token}(t,e),i={token:r,createTime:Date.now(),subscriptionOptions:e};return await T(t,i),i.token}function U(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const i=e.notification.body;i&&(t.notification.body=i);const n=e.notification.image;n&&(t.notification.image=n);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){var r,i,n,s,o;if(!e.fcmOptions&&!(null===(r=e.notification)||void 0===r?void 0:r.click_action))return;t.fcmOptions={};const a=null!==(n=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==n?n:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const c=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}(e,t),e}function B(t,e){const r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),i<e.length&&r.push(e.charAt(i));return r.join("")}function K(t){return I.create("missing-app-config-values",{valueName:t})}B("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),B("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class j{constructor(t,e,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(t){if(!t||!t.options)throw K("App Configuration Object");if(!t.name)throw K("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const t of e)if(!r[t])throw K(t);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:e,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function G(t){try{t.swRegistration=await navigator.serviceWorker.register(a,{scope:c}),t.swRegistration.update().catch((()=>{}))}catch(t){throw I.create("failed-service-worker-registration",{browserErrorMessage:null===t||void 0===t?void 0:t.message})}}async function F(t,e){if(!navigator)throw I.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw I.create("permission-blocked");return await async function(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=u)}(t,null===e||void 0===e?void 0:e.vapidKey),await async function(t,e){if(e||t.swRegistration||await G(t),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw I.create("invalid-sw-registration");t.swRegistration=e}}(t,null===e||void 0===e?void 0:e.serviceWorkerRegistration),H(t)}async function V(t,e,r){const i=function(t){switch(t){case g.NOTIFICATION_CLICKED:return"notification_open";case g.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:r[l],message_name:r[d],message_time:r[p],message_device_time:Math.floor(Date.now()/1e3)})}async function $(t,e){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===g.PUSH_RECEIVED&&("function"===typeof t.onMessageHandler?t.onMessageHandler(U(r)):t.onMessageHandler.next(U(r)));const i=r.data;var n;"object"===typeof(n=i)&&n&&l in n&&"1"===i["google.c.a.e"]&&await V(t,r.messageType,i)}const z="@firebase/messaging",W="0.12.8",Y=t=>{const e=new j(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(t=>$(e,t))),e},Z=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>F(e,t)}};(0,o.om)(new i.uA("messaging",Y,"PUBLIC")),(0,o.om)(new i.uA("messaging-internal",Z,"PRIVATE")),(0,o.KO)(z,W),(0,o.KO)(z,W,"esm2017")},4976:(t,e,r)=>{r.d(e,{AI:()=>E,CC:()=>c,DH:()=>h,DO:()=>o,Fe:()=>s,Ht:()=>u,Id:()=>P,My:()=>v,O8:()=>d,Ow:()=>p,Vw:()=>S,ZJ:()=>O,aT:()=>b,aY:()=>n,fd:()=>m,po:()=>R,qj:()=>T,sd:()=>a,uH:()=>l});var i=r(88160);function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function o(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function a(t){if("function"!==typeof t||"function"!==typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)}function c(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function u(t,e){o(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function h(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function l(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function d(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function p(t,e){return t<<32-e|t>>>e}const f=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function g(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const m=f?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=g(t[e]);return t},y=(()=>"function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex)(),_=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function v(t){if(o(t),y)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=_[t[r]];return e}const w={_0:48,_9:57,A:65,F:70,a:97,f:102};function A(t){return t>=w._0&&t<=w._9?t-w._0:t>=w.A&&t<=w.F?t-(w.A-10):t>=w.a&&t<=w.f?t-(w.a-10):void 0}function b(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);if(y)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let e=0,n=0;e<r;e++,n+=2){const r=A(t.charCodeAt(n)),s=A(t.charCodeAt(n+1));if(void 0===r||void 0===s){const e=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+n)}i[e]=16*r+s}return i}function E(t){if("string"!==typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function O(t){return"string"===typeof t&&(t=E(t)),o(t),t}function P(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];o(i),e+=i.length}const r=new Uint8Array(e);for(let e=0,i=0;e<t.length;e++){const n=t[e];r.set(n,i),i+=n.length}return r}class S{}function T(t){const e=e=>t().update(O(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function R(t=32){if(i.E&&"function"===typeof i.E.getRandomValues)return i.E.getRandomValues(new Uint8Array(t));if(i.E&&"function"===typeof i.E.randomBytes)return Uint8Array.from(i.E.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}},86151:(t,e,r)=>{r.d(e,{My:()=>s});var i=r(60346),n=(r(26557),r(22427),r(98503),r(29873),r(31277),r(48990),r(87135),Error,BigInt(22e4),BigInt(22e4),new i.A("100000000000000000"),"");function s(t){n=t}var o=(t,e,r)=>async(...r)=>{try{const i=await fetch(...t(...r));if(!i.ok)throw new Error(`Error: ${i.statusText}`);const n=await i.text();try{return e(JSON.parse(n))}catch{return e(n)}}catch(t){throw t}};o((t=>[`${n}/everstake-wallet/token/check/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}]),(t=>t.result)),o((({token:t,action:e,amount:r,address:i,chain:s})=>[`${n}/everstake-wallet/stats/set`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,action:e,amount:r,address:i,chain:s})}]),(()=>{})),o(((t,e)=>[`${n}/everstake-wallet/token/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,type:e})}]),(t=>t)),o((t=>[`${n}/everstake-dashboard/chain?name=${t.toLowerCase()}`,{method:"GET"}]),(t=>t)),o((()=>[`${n}/everstake-eth-api/validators/queue`,{method:"GET"}]),(t=>t)),o((({account:t,...e})=>{const r=new URL(`${n}/everstake-eth-api/transactions/${t}`);for(const t in e){const i=t;null!=e[i]&&r.searchParams.set(i,e[i].toString())}return[r,{method:"GET"}]}),(t=>t)),new i.A("1000000000000000000")},8660:(t,e,r)=>{r.d(e,{Ay:()=>q});var i=r(96540),n=r(19888);const s=()=>{},o=s(),a=Object,c=t=>t===o,u=t=>"function"==typeof t,h=(t,e)=>({...t,...e}),l=new WeakMap;let d=0;const p=t=>{const e=typeof t,r=t&&t.constructor,i=r==Date;let n,s;if(a(t)!==t||i||r==RegExp)n=i?t.toJSON():"symbol"==e?t.toString():"string"==e?JSON.stringify(t):""+t;else{if(n=l.get(t),n)return n;if(n=++d+"~",l.set(t,n),r==Array){for(n="@",s=0;s<t.length;s++)n+=p(t[s])+",";l.set(t,n)}if(r==a){n="#";const e=a.keys(t).sort();for(;!c(s=e.pop());)c(t[s])||(n+=s+":"+p(t[s])+",");l.set(t,n)}}return n},f=new WeakMap,g={},m={},y="undefined",_=typeof window!=y,v=typeof document!=y,w=(t,e)=>{const r=f.get(t);return[()=>!c(e)&&t.get(e)||g,i=>{if(!c(e)){const n=t.get(e);e in m||(m[e]=n),r[5](e,h(n,i),n||g)}},r[6],()=>!c(e)&&e in m?m[e]:!c(e)&&t.get(e)||g]};let A=!0;const[b,E]=_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[s,s],O={isOnline:()=>A,isVisible:()=>{const t=v&&document.visibilityState;return c(t)||"hidden"!==t}},P={initFocus:t=>(v&&document.addEventListener("visibilitychange",t),b("focus",t),()=>{v&&document.removeEventListener("visibilitychange",t),E("focus",t)}),initReconnect:t=>{const e=()=>{A=!0,t()},r=()=>{A=!1};return b("online",e),b("offline",r),()=>{E("online",e),E("offline",r)}}},S=!i.useId,T=!_||"Deno"in window,R=t=>_&&typeof window.requestAnimationFrame!=y?window.requestAnimationFrame(t):setTimeout(t,1),L=T?i.useEffect:i.useLayoutEffect,I="undefined"!==typeof navigator&&navigator.connection,k=!T&&I&&(["slow-2g","2g"].includes(I.effectiveType)||I.saveData),N=t=>{if(u(t))try{t=t()}catch(e){t=""}const e=t;return[t="string"==typeof t?t:(Array.isArray(t)?t.length:t)?p(t):"",e]};let C=0;const D=()=>++C;var x=3,H=0,M=2,U=1;async function B(...t){const[e,r,i,n]=t,s=h({populateCache:!0,throwOnError:!0},"boolean"===typeof n?{revalidate:n}:n||{});let a=s.populateCache;const l=s.rollbackOnError;let d=s.optimisticData;const p=!1!==s.revalidate,g=s.throwOnError;if(u(r)){const t=r,i=[],n=e.keys();for(const r of n)!/^\$(inf|sub)\$/.test(r)&&t(e.get(r)._k)&&i.push(r);return Promise.all(i.map(m))}return m(r);async function m(r){const[n]=N(r);if(!n)return;const[s,h]=w(e,n),[m,y,_,v]=f.get(e),A=()=>{const t=m[n];return p&&(delete _[n],delete v[n],t&&t[0])?t[0](2).then((()=>s().data)):s().data};if(t.length<3)return A();let b,E=i;const O=D();y[n]=[O,0];const P=!c(d),S=s(),T=S.data,R=S._c,L=c(R)?T:R;if(P&&(d=u(d)?d(L,T):d,h({data:d,_c:L})),u(E))try{E=E(L)}catch(t){b=t}if(E&&u(E.then)){if(E=await E.catch((t=>{b=t})),O!==y[n][0]){if(b)throw b;return E}b&&P&&(t=>"function"===typeof l?l(t):!1!==l)(b)&&(a=!0,h({data:L,_c:o}))}if(a&&!b)if(u(a)){const t=a(E,L);h({data:t,error:o,_c:o})}else h({data:E,error:o,_c:o});if(y[n][1]=D(),Promise.resolve(A()).then((()=>{h({_c:o})})),!b)return E;if(g)throw b}}const K=(t,e)=>{for(const r in t)t[r][0]&&t[r][0](e)},j=(t,e)=>{if(!f.has(t)){const r=h(P,e),i={},n=B.bind(o,t);let a=s;const c={},u=(t,e)=>{const r=c[t]||[];return c[t]=r,r.push(e),()=>r.splice(r.indexOf(e),1)},l=(e,r,i)=>{t.set(e,r);const n=c[e];if(n)for(const t of n)t(r,i)},d=()=>{if(!f.has(t)&&(f.set(t,[i,{},{},{},n,l,u]),!T)){const e=r.initFocus(setTimeout.bind(o,K.bind(o,i,0))),n=r.initReconnect(setTimeout.bind(o,K.bind(o,i,1)));a=()=>{e&&e(),n&&n(),f.delete(t)}}};return d(),[t,n,d,a]}return[t,f.get(t)[4]]},[G,F]=j(new Map),V=h({onLoadingSlow:s,onSuccess:s,onError:s,onErrorRetry:(t,e,r,i,n)=>{const s=r.errorRetryCount,o=n.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;!c(s)&&o>s||setTimeout(i,a,n)},onDiscarded:s,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:k?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:k?5e3:3e3,compare:(t,e)=>p(t)==p(e),isPaused:()=>!1,cache:G,mutate:F,fallback:{}},O),$=(t,e)=>{const r=h(t,e);if(e){const{use:i,fallback:n}=t,{use:s,fallback:o}=e;i&&s&&(r.use=i.concat(s)),n&&o&&(r.fallback=h(n,o))}return r},z=(0,i.createContext)({}),W=_&&window.__SWR_DEVTOOLS_USE__,Y=W?window.__SWR_DEVTOOLS_USE__:[],Z=t=>u(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(null===t[1]?t[2]:t[1])||{}],X=Y.concat((t=>(e,r,i)=>t(e,r&&((...t)=>{const[i]=N(e),[,,,n]=f.get(G);if(i.startsWith("$inf$"))return r(...t);const s=n[i];return c(s)?r(...t):(delete n[i],s)}),i)));W&&(window.__SWR_DEVTOOLS_REACT__=i);const Q=i.use||(t=>{if("pending"===t.status)throw t;if("fulfilled"===t.status)return t.value;throw"rejected"===t.status?t.reason:(t.status="pending",t.then((e=>{t.status="fulfilled",t.value=e}),(e=>{t.status="rejected",t.reason=e})),t)}),J={dedupe:!0},q=(a.defineProperty((t=>{const{value:e}=t,r=(0,i.useContext)(z),n=u(e),s=(0,i.useMemo)((()=>n?e(r):e),[n,r,e]),a=(0,i.useMemo)((()=>n?s:$(r,s)),[n,r,s]),c=s&&s.provider,l=(0,i.useRef)(o);c&&!l.current&&(l.current=j(c(a.cache||G),s));const d=l.current;return d&&(a.cache=d[0],a.mutate=d[1]),L((()=>{if(d)return d[2]&&d[2](),d[3]}),[]),(0,i.createElement)(z.Provider,h(t,{value:a}))}),"defaultValue",{value:V}),tt=(t,e,r)=>{const{cache:s,compare:a,suspense:l,fallbackData:d,revalidateOnMount:p,revalidateIfStale:g,refreshInterval:m,refreshWhenHidden:y,refreshWhenOffline:_,keepPreviousData:v}=r,[A,b,E,O]=f.get(s),[P,I]=N(t),k=(0,i.useRef)(!1),C=(0,i.useRef)(!1),K=(0,i.useRef)(P),j=(0,i.useRef)(e),G=(0,i.useRef)(r),F=()=>G.current,V=()=>F().isVisible()&&F().isOnline(),[$,z,W,Y]=w(s,P),Z=(0,i.useRef)({}).current,X=c(d)?r.fallback[P]:d,q=(t,e)=>{for(const r in Z){const i=r;if("data"===i){if(!a(t[i],e[i])){if(!c(t[i]))return!1;if(!a(ct,e[i]))return!1}}else if(e[i]!==t[i])return!1}return!0},tt=(0,i.useMemo)((()=>{const t=!!P&&!!e&&(c(p)?!F().isPaused()&&!l&&(!!c(g)||g):p),r=e=>{const r=h(e);return delete r._k,t?{isValidating:!0,isLoading:!0,...r}:r},i=$(),n=Y(),s=r(i),o=i===n?s:r(n);let a=s;return[()=>{const t=r($());return q(t,a)?(a.data=t.data,a.isLoading=t.isLoading,a.isValidating=t.isValidating,a.error=t.error,a):(a=t,t)},()=>o]}),[s,P]),et=(0,n.useSyncExternalStore)((0,i.useCallback)((t=>W(P,((e,r)=>{q(r,e)||t()}))),[s,P]),tt[0],tt[1]),rt=!k.current,it=A[P]&&A[P].length>0,nt=et.data,st=c(nt)?X:nt,ot=et.error,at=(0,i.useRef)(st),ct=v?c(nt)?at.current:nt:st,ut=!(it&&!c(ot))&&(rt&&!c(p)?p:!F().isPaused()&&(l?!c(st)&&g:c(st)||g)),ht=!!(P&&e&&rt&&ut),lt=c(et.isValidating)?ht:et.isValidating,dt=c(et.isLoading)?ht:et.isLoading,pt=(0,i.useCallback)((async t=>{const e=j.current;if(!P||!e||C.current||F().isPaused())return!1;let i,n,s=!0;const h=t||{},l=!E[P]||!h.dedupe,d=()=>S?!C.current&&P===K.current&&k.current:P===K.current,p={isValidating:!1,isLoading:!1},f=()=>{z(p)},g=()=>{const t=E[P];t&&t[1]===n&&delete E[P]},m={isValidating:!0};c($().data)&&(m.isLoading=!0);try{if(l&&(z(m),r.loadingTimeout&&c($().data)&&setTimeout((()=>{s&&d()&&F().onLoadingSlow(P,r)}),r.loadingTimeout),E[P]=[e(I),D()]),[i,n]=E[P],i=await i,l&&setTimeout(g,r.dedupingInterval),!E[P]||E[P][1]!==n)return l&&d()&&F().onDiscarded(P),!1;p.error=o;const t=b[P];if(!c(t)&&(n<=t[0]||n<=t[1]||0===t[1]))return f(),l&&d()&&F().onDiscarded(P),!1;const u=$().data;p.data=a(u,i)?u:i,l&&d()&&F().onSuccess(i,P,r)}catch(t){g();const e=F(),{shouldRetryOnError:r}=e;e.isPaused()||(p.error=t,l&&d()&&(e.onError(t,P,e),(!0===r||u(r)&&r(t))&&V()&&e.onErrorRetry(t,P,e,(t=>{const e=A[P];e&&e[0]&&e[0](x,t)}),{retryCount:(h.retryCount||0)+1,dedupe:!0})))}return s=!1,f(),!0}),[P,s]),ft=(0,i.useCallback)(((...t)=>B(s,K.current,...t)),[]);if(L((()=>{j.current=e,G.current=r,c(nt)||(at.current=nt)})),L((()=>{if(!P)return;const t=pt.bind(o,J);let e=0;const r=((t,e,r)=>{const i=e[t]||(e[t]=[]);return i.push(r),()=>{const t=i.indexOf(r);t>=0&&(i[t]=i[i.length-1],i.pop())}})(P,A,((r,i={})=>{if(r==H){const r=Date.now();F().revalidateOnFocus&&r>e&&V()&&(e=r+F().focusThrottleInterval,t())}else if(r==U)F().revalidateOnReconnect&&V()&&t();else{if(r==M)return pt();if(r==x)return pt(i)}}));return C.current=!1,K.current=P,k.current=!0,z({_k:I}),ut&&(c(st)||T?t():R(t)),()=>{C.current=!0,r()}}),[P]),L((()=>{let t;function e(){const e=u(m)?m($().data):m;e&&-1!==t&&(t=setTimeout(r,e))}function r(){$().error||!y&&!F().isVisible()||!_&&!F().isOnline()?e():pt(J).then(e)}return e(),()=>{t&&(clearTimeout(t),t=-1)}}),[m,y,_,P]),(0,i.useDebugValue)(ct),l&&c(st)&&P){if(!S&&T)throw new Error("Fallback data is required when using suspense in SSR.");j.current=e,G.current=r,C.current=!1;const t=O[P];if(!c(t)){const e=ft(t);Q(e)}if(!c(ot))throw ot;{const t=pt(J);c(ct)||(t.status="fulfilled",t.value=!0),Q(t)}}return{mutate:ft,get data(){return Z.data=!0,ct},get error(){return Z.error=!0,ot},get isValidating(){return Z.isValidating=!0,lt},get isLoading(){return Z.isLoading=!0,dt}}},function(...t){const e=h(V,(0,i.useContext)(z)),[r,n,s]=Z(t),o=$(e,s);let a=tt;const{use:c}=o,u=(c||[]).concat(X);for(let t=u.length;t--;)a=u[t](a);return a(r,n||o.fetcher||null,o)});var tt},48990:(t,e,r)=>{r.d(e,{Kc:()=>h,Kz:()=>u,Vg:()=>a,WA:()=>l,aO:()=>n,fZ:()=>c,n3:()=>s,zW:()=>o});r(49436),r(79670);var i=r(51344);function n(t){const e=Object.entries(t).map((([t,e])=>void 0===e||!1===e?null:[t,e])).filter(Boolean),r=e.reduce(((t,[e])=>Math.max(t,e.length)),0);return e.map((([t,e])=>`  ${`${t}:`.padEnd(r+1)}  ${e}`)).join("\n")}class s extends i.C{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}class o extends i.C{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class a extends i.C{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",n(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}i.C;i.C;class c extends i.C{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}i.C;class u extends i.C{constructor({blockHash:t,blockNumber:e,blockTag:r,hash:i,index:n}){let s="Transaction";r&&void 0!==n&&(s=`Transaction at block time "${r}" at index "${n}"`),t&&void 0!==n&&(s=`Transaction at block hash "${t}" at index "${n}"`),e&&void 0!==n&&(s=`Transaction at block number "${e}" at index "${n}"`),i&&(s=`Transaction with hash "${i}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}}class h extends i.C{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class l extends i.C{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}}}]);