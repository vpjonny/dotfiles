var Wu=Object.defineProperty;var ps=o=>{throw TypeError(o)};var zu=(o,e,t)=>e in o?Wu(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var ht=(o,e,t)=>zu(o,typeof e!="symbol"?e+"":e,t),Vo=(o,e,t)=>e.has(o)||ps("Cannot "+t);var xt=(o,e,t)=>(Vo(o,e,"read from private field"),t?t.call(o):e.get(o)),Vt=(o,e,t)=>e.has(o)?ps("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),Tt=(o,e,t,r)=>(Vo(o,e,"write to private field"),r?r.call(o,t):e.set(o,t),t),be=(o,e,t)=>(Vo(o,e,"access private method"),t);var Yu={153:(o,e,t)=>{t.d(e,{Ey:()=>f,D_:()=>u.D_,w9:()=>d}),t(770);function r(v){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},r(v)}function i(v,E){for(var T=0;T<E.length;T++){var D=E[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,a(D.key),D)}}function a(v){var E=function(T,D){if(r(T)!="object"||!T)return T;var S=T[Symbol.toPrimitive];if(S!==void 0){var w=S.call(T,D);if(r(w)!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}(v,"string");return r(E)=="symbol"?E:E+""}var f=Object.freeze({BACKGROUND:"background",CONTENT:"content",POPUP:"popup",INIT:"init",VERIFICATION:"verification",FETCH:"fetch",PROVIDER:"provider",CLAIM:"claim",PROOF:"proof",OFFSCREEN:"offscreen",POLYFILLS:"polyfills",SESSION_TIMER:"session-timer"}),d=new(function(){function v(){(function(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")})(this,v),this.enabled=!0,this.allowedTypes=new Set}return E=v,T=[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"setTypes",value:function(S){Array.isArray(S)&&(this.allowedTypes=new Set(S))}},{key:"clearTypes",value:function(){this.allowedTypes.clear()}},{key:"log",value:function(S){var w;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(S))){for(var O=v.typeColor(S),k=arguments.length,x=new Array(k>1?k-1:0),L=1;L<k;L++)x[L-1]=arguments[L];(w=console).log.apply(w,["%c[".concat(S,"][INFO]"),"color: ".concat(O,"; font-weight: bold;")].concat(x))}}},{key:"info",value:function(S){var w;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(S))){for(var O=v.typeColor(S),k=arguments.length,x=new Array(k>1?k-1:0),L=1;L<k;L++)x[L-1]=arguments[L];(w=console).info.apply(w,["%c[".concat(S,"][INFO]"),"color: ".concat(O,"; font-weight: bold;")].concat(x))}}},{key:"warn",value:function(S){var w;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(S))){for(var O=v.typeColor(S,"warn"),k=arguments.length,x=new Array(k>1?k-1:0),L=1;L<k;L++)x[L-1]=arguments[L];(w=console).warn.apply(w,["%c[".concat(S,"][WARN]"),"color: ".concat(O,"; font-weight: bold;")].concat(x))}}},{key:"error",value:function(S){var w;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(S))){for(var O=v.typeColor(S,"error"),k=arguments.length,x=new Array(k>1?k-1:0),L=1;L<k;L++)x[L-1]=arguments[L];(w=console).error.apply(w,["%c[".concat(S,"][ERROR]"),"color: ".concat(O,"; font-weight: bold;")].concat(x))}}}],D=[{key:"typeColor",value:function(S){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"info",O={background:"#0074D9",content:"#2ECC40",popup:"#FF851B",init:"#B10DC9",verification:"#FF4136",fetch:"#39CCCC",provider:"#FFDC00",claim:"#7FDBFF",proof:"#85144b",offscreen:"#AAAAAA",polyfills:"#0074D9","session-timer":"#2ECC40"},k=O[Object.keys(O).find(function(x){return S.toLowerCase().includes(x)})]||"#888888";return w!=="info"&&(k={info:"",warn:"#FFA500",error:"#FF0000"}[w]||k),k}}],T&&i(E.prototype,T),D&&i(E,D),Object.defineProperty(E,"prototype",{writable:!1}),E;var E,T,D}()),u=t(859),b=t(606);b!==void 0&&b.env?d.disable():d.enable()},251:(o,e)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,r,i,a,f){var d,u,b=8*f-a-1,v=(1<<b)-1,E=v>>1,T=-7,D=i?f-1:0,S=i?-1:1,w=t[r+D];for(D+=S,d=w&(1<<-T)-1,w>>=-T,T+=b;T>0;d=256*d+t[r+D],D+=S,T-=8);for(u=d&(1<<-T)-1,d>>=-T,T+=a;T>0;u=256*u+t[r+D],D+=S,T-=8);if(d===0)d=1-E;else{if(d===v)return u?NaN:1/0*(w?-1:1);u+=Math.pow(2,a),d-=E}return(w?-1:1)*u*Math.pow(2,d-a)},e.write=function(t,r,i,a,f,d){var u,b,v,E=8*d-f-1,T=(1<<E)-1,D=T>>1,S=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=a?0:d-1,O=a?1:-1,k=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,u=T):(u=Math.floor(Math.log(r)/Math.LN2),r*(v=Math.pow(2,-u))<1&&(u--,v*=2),(r+=u+D>=1?S/v:S*Math.pow(2,1-D))*v>=2&&(u++,v/=2),u+D>=T?(b=0,u=T):u+D>=1?(b=(r*v-1)*Math.pow(2,f),u+=D):(b=r*Math.pow(2,D-1)*Math.pow(2,f),u=0));f>=8;t[i+w]=255&b,w+=O,b/=256,f-=8);for(u=u<<f|b,E+=f;E>0;t[i+w]=255&u,w+=O,u/=256,E-=8);t[i+w-O]|=128*k}},287:(o,e,t)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const r=t(526),i=t(251),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=u,e.IS=50;const f=2147483647;function d(c){if(c>f)throw new RangeError('The value "'+c+'" is invalid for option "size"');const g=new Uint8Array(c);return Object.setPrototypeOf(g,u.prototype),g}function u(c,g,m){if(typeof c=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(c)}return b(c,g,m)}function b(c,g,m){if(typeof c=="string")return function(W,ct){if(typeof ct=="string"&&ct!==""||(ct="utf8"),!u.isEncoding(ct))throw new TypeError("Unknown encoding: "+ct);const Bt=0|w(W,ct);let $t=d(Bt);const se=$t.write(W,ct);return se!==Bt&&($t=$t.slice(0,se)),$t}(c,g);if(ArrayBuffer.isView(c))return function(W){if(Ht(W,Uint8Array)){const ct=new Uint8Array(W);return D(ct.buffer,ct.byteOffset,ct.byteLength)}return T(W)}(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(Ht(c,ArrayBuffer)||c&&Ht(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ht(c,SharedArrayBuffer)||c&&Ht(c.buffer,SharedArrayBuffer)))return D(c,g,m);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=c.valueOf&&c.valueOf();if(B!=null&&B!==c)return u.from(B,g,m);const K=function(W){if(u.isBuffer(W)){const ct=0|S(W.length),Bt=d(ct);return Bt.length===0||W.copy(Bt,0,0,ct),Bt}if(W.length!==void 0)return typeof W.length!="number"||Rt(W.length)?d(0):T(W);if(W.type==="Buffer"&&Array.isArray(W.data))return T(W.data)}(c);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return u.from(c[Symbol.toPrimitive]("string"),g,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}function v(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function E(c){return v(c),d(c<0?0:0|S(c))}function T(c){const g=c.length<0?0:0|S(c.length),m=d(g);for(let B=0;B<g;B+=1)m[B]=255&c[B];return m}function D(c,g,m){if(g<0||c.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<g+(m||0))throw new RangeError('"length" is outside of buffer bounds');let B;return B=g===void 0&&m===void 0?new Uint8Array(c):m===void 0?new Uint8Array(c,g):new Uint8Array(c,g,m),Object.setPrototypeOf(B,u.prototype),B}function S(c){if(c>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|c}function w(c,g){if(u.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||Ht(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const m=c.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&m===0)return 0;let K=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Et(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*m;case"hex":return m>>>1;case"base64":return Wt(c).length;default:if(K)return B?-1:Et(c).length;g=(""+g).toLowerCase(),K=!0}}function O(c,g,m){let B=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0)<=(g>>>=0))return"";for(c||(c="utf8");;)switch(c){case"hex":return Y(this,g,m);case"utf8":case"utf-8":return q(this,g,m);case"ascii":return J(this,g,m);case"latin1":case"binary":return X(this,g,m);case"base64":return j(this,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,g,m);default:if(B)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),B=!0}}function k(c,g,m){const B=c[g];c[g]=c[m],c[m]=B}function x(c,g,m,B,K){if(c.length===0)return-1;if(typeof m=="string"?(B=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),Rt(m=+m)&&(m=K?0:c.length-1),m<0&&(m=c.length+m),m>=c.length){if(K)return-1;m=c.length-1}else if(m<0){if(!K)return-1;m=0}if(typeof g=="string"&&(g=u.from(g,B)),u.isBuffer(g))return g.length===0?-1:L(c,g,m,B,K);if(typeof g=="number")return g&=255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(c,g,m):Uint8Array.prototype.lastIndexOf.call(c,g,m):L(c,[g],m,B,K);throw new TypeError("val must be string, number or Buffer")}function L(c,g,m,B,K){let W,ct=1,Bt=c.length,$t=g.length;if(B!==void 0&&((B=String(B).toLowerCase())==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(c.length<2||g.length<2)return-1;ct=2,Bt/=2,$t/=2,m/=2}function se(kt,pt){return ct===1?kt[pt]:kt.readUInt16BE(pt*ct)}if(K){let kt=-1;for(W=m;W<Bt;W++)if(se(c,W)===se(g,kt===-1?0:W-kt)){if(kt===-1&&(kt=W),W-kt+1===$t)return kt*ct}else kt!==-1&&(W-=W-kt),kt=-1}else for(m+$t>Bt&&(m=Bt-$t),W=m;W>=0;W--){let kt=!0;for(let pt=0;pt<$t;pt++)if(se(c,W+pt)!==se(g,pt)){kt=!1;break}if(kt)return W}return-1}function z(c,g,m,B){m=Number(m)||0;const K=c.length-m;B?(B=Number(B))>K&&(B=K):B=K;const W=g.length;let ct;for(B>W/2&&(B=W/2),ct=0;ct<B;++ct){const Bt=parseInt(g.substr(2*ct,2),16);if(Rt(Bt))return ct;c[m+ct]=Bt}return ct}function _(c,g,m,B){return ue(Et(g,c.length-m),c,m,B)}function N(c,g,m,B){return ue(function(K){const W=[];for(let ct=0;ct<K.length;++ct)W.push(255&K.charCodeAt(ct));return W}(g),c,m,B)}function C(c,g,m,B){return ue(Wt(g),c,m,B)}function F(c,g,m,B){return ue(function(K,W){let ct,Bt,$t;const se=[];for(let kt=0;kt<K.length&&!((W-=2)<0);++kt)ct=K.charCodeAt(kt),Bt=ct>>8,$t=ct%256,se.push($t),se.push(Bt);return se}(g,c.length-m),c,m,B)}function j(c,g,m){return g===0&&m===c.length?r.fromByteArray(c):r.fromByteArray(c.slice(g,m))}function q(c,g,m){m=Math.min(c.length,m);const B=[];let K=g;for(;K<m;){const W=c[K];let ct=null,Bt=W>239?4:W>223?3:W>191?2:1;if(K+Bt<=m){let $t,se,kt,pt;switch(Bt){case 1:W<128&&(ct=W);break;case 2:$t=c[K+1],(192&$t)==128&&(pt=(31&W)<<6|63&$t,pt>127&&(ct=pt));break;case 3:$t=c[K+1],se=c[K+2],(192&$t)==128&&(192&se)==128&&(pt=(15&W)<<12|(63&$t)<<6|63&se,pt>2047&&(pt<55296||pt>57343)&&(ct=pt));break;case 4:$t=c[K+1],se=c[K+2],kt=c[K+3],(192&$t)==128&&(192&se)==128&&(192&kt)==128&&(pt=(15&W)<<18|(63&$t)<<12|(63&se)<<6|63&kt,pt>65535&&pt<1114112&&(ct=pt))}}ct===null?(ct=65533,Bt=1):ct>65535&&(ct-=65536,B.push(ct>>>10&1023|55296),ct=56320|1023&ct),B.push(ct),K+=Bt}return function(W){const ct=W.length;if(ct<=Q)return String.fromCharCode.apply(String,W);let Bt="",$t=0;for(;$t<ct;)Bt+=String.fromCharCode.apply(String,W.slice($t,$t+=Q));return Bt}(B)}u.TYPED_ARRAY_SUPPORT=function(){try{const c=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(c,g),c.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(c,g,m){return b(c,g,m)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(c,g,m){return function(B,K,W){return v(B),B<=0?d(B):K!==void 0?typeof W=="string"?d(B).fill(K,W):d(B).fill(K):d(B)}(c,g,m)},u.allocUnsafe=function(c){return E(c)},u.allocUnsafeSlow=function(c){return E(c)},u.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==u.prototype},u.compare=function(c,g){if(Ht(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),Ht(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(c)||!u.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===g)return 0;let m=c.length,B=g.length;for(let K=0,W=Math.min(m,B);K<W;++K)if(c[K]!==g[K]){m=c[K],B=g[K];break}return m<B?-1:B<m?1:0},u.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(c,g){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return u.alloc(0);let m;if(g===void 0)for(g=0,m=0;m<c.length;++m)g+=c[m].length;const B=u.allocUnsafe(g);let K=0;for(m=0;m<c.length;++m){let W=c[m];if(Ht(W,Uint8Array))K+W.length>B.length?(u.isBuffer(W)||(W=u.from(W)),W.copy(B,K)):Uint8Array.prototype.set.call(B,W,K);else{if(!u.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(B,K)}K+=W.length}return B},u.byteLength=w,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const c=this.length;if(c%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<c;g+=2)k(this,g,g+1);return this},u.prototype.swap32=function(){const c=this.length;if(c%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<c;g+=4)k(this,g,g+3),k(this,g+1,g+2);return this},u.prototype.swap64=function(){const c=this.length;if(c%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<c;g+=8)k(this,g,g+7),k(this,g+1,g+6),k(this,g+2,g+5),k(this,g+3,g+4);return this},u.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?q(this,0,c):O.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(c){if(!u.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c||u.compare(this,c)===0},u.prototype.inspect=function(){let c="";const g=e.IS;return c=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(c+=" ... "),"<Buffer "+c+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(c,g,m,B,K){if(Ht(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(g===void 0&&(g=0),m===void 0&&(m=c?c.length:0),B===void 0&&(B=0),K===void 0&&(K=this.length),g<0||m>c.length||B<0||K>this.length)throw new RangeError("out of range index");if(B>=K&&g>=m)return 0;if(B>=K)return-1;if(g>=m)return 1;if(this===c)return 0;let W=(K>>>=0)-(B>>>=0),ct=(m>>>=0)-(g>>>=0);const Bt=Math.min(W,ct),$t=this.slice(B,K),se=c.slice(g,m);for(let kt=0;kt<Bt;++kt)if($t[kt]!==se[kt]){W=$t[kt],ct=se[kt];break}return W<ct?-1:ct<W?1:0},u.prototype.includes=function(c,g,m){return this.indexOf(c,g,m)!==-1},u.prototype.indexOf=function(c,g,m){return x(this,c,g,m,!0)},u.prototype.lastIndexOf=function(c,g,m){return x(this,c,g,m,!1)},u.prototype.write=function(c,g,m,B){if(g===void 0)B="utf8",m=this.length,g=0;else if(m===void 0&&typeof g=="string")B=g,m=this.length,g=0;else{if(!isFinite(g))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");g>>>=0,isFinite(m)?(m>>>=0,B===void 0&&(B="utf8")):(B=m,m=void 0)}const K=this.length-g;if((m===void 0||m>K)&&(m=K),c.length>0&&(m<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let W=!1;for(;;)switch(B){case"hex":return z(this,c,g,m);case"utf8":case"utf-8":return _(this,c,g,m);case"ascii":case"latin1":case"binary":return N(this,c,g,m);case"base64":return C(this,c,g,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,c,g,m);default:if(W)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),W=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Q=4096;function J(c,g,m){let B="";m=Math.min(c.length,m);for(let K=g;K<m;++K)B+=String.fromCharCode(127&c[K]);return B}function X(c,g,m){let B="";m=Math.min(c.length,m);for(let K=g;K<m;++K)B+=String.fromCharCode(c[K]);return B}function Y(c,g,m){const B=c.length;(!g||g<0)&&(g=0),(!m||m<0||m>B)&&(m=B);let K="";for(let W=g;W<m;++W)K+=le[c[W]];return K}function M(c,g,m){const B=c.slice(g,m);let K="";for(let W=0;W<B.length-1;W+=2)K+=String.fromCharCode(B[W]+256*B[W+1]);return K}function ut(c,g,m){if(c%1!=0||c<0)throw new RangeError("offset is not uint");if(c+g>m)throw new RangeError("Trying to access beyond buffer length")}function lt(c,g,m,B,K,W){if(!u.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>K||g<W)throw new RangeError('"value" argument is out of bounds');if(m+B>c.length)throw new RangeError("Index out of range")}function At(c,g,m,B,K){Gt(g,B,K,c,m,7);let W=Number(g&BigInt(4294967295));c[m++]=W,W>>=8,c[m++]=W,W>>=8,c[m++]=W,W>>=8,c[m++]=W;let ct=Number(g>>BigInt(32)&BigInt(4294967295));return c[m++]=ct,ct>>=8,c[m++]=ct,ct>>=8,c[m++]=ct,ct>>=8,c[m++]=ct,m}function wt(c,g,m,B,K){Gt(g,B,K,c,m,7);let W=Number(g&BigInt(4294967295));c[m+7]=W,W>>=8,c[m+6]=W,W>>=8,c[m+5]=W,W>>=8,c[m+4]=W;let ct=Number(g>>BigInt(32)&BigInt(4294967295));return c[m+3]=ct,ct>>=8,c[m+2]=ct,ct>>=8,c[m+1]=ct,ct>>=8,c[m]=ct,m+8}function Ct(c,g,m,B,K,W){if(m+B>c.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function gt(c,g,m,B,K){return g=+g,m>>>=0,K||Ct(c,0,m,4),i.write(c,g,m,B,23,4),m+4}function G(c,g,m,B,K){return g=+g,m>>>=0,K||Ct(c,0,m,8),i.write(c,g,m,B,52,8),m+8}u.prototype.slice=function(c,g){const m=this.length;(c=~~c)<0?(c+=m)<0&&(c=0):c>m&&(c=m),(g=g===void 0?m:~~g)<0?(g+=m)<0&&(g=0):g>m&&(g=m),g<c&&(g=c);const B=this.subarray(c,g);return Object.setPrototypeOf(B,u.prototype),B},u.prototype.readUintLE=u.prototype.readUIntLE=function(c,g,m){c>>>=0,g>>>=0,m||ut(c,g,this.length);let B=this[c],K=1,W=0;for(;++W<g&&(K*=256);)B+=this[c+W]*K;return B},u.prototype.readUintBE=u.prototype.readUIntBE=function(c,g,m){c>>>=0,g>>>=0,m||ut(c,g,this.length);let B=this[c+--g],K=1;for(;g>0&&(K*=256);)B+=this[c+--g]*K;return B},u.prototype.readUint8=u.prototype.readUInt8=function(c,g){return c>>>=0,g||ut(c,1,this.length),this[c]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(c,g){return c>>>=0,g||ut(c,2,this.length),this[c]|this[c+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(c,g){return c>>>=0,g||ut(c,2,this.length),this[c]<<8|this[c+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(c,g){return c>>>=0,g||ut(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(c,g){return c>>>=0,g||ut(c,4,this.length),16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])},u.prototype.readBigUInt64LE=qt(function(c){Mt(c>>>=0,"offset");const g=this[c],m=this[c+7];g!==void 0&&m!==void 0||It(c,this.length-8);const B=g+256*this[++c]+65536*this[++c]+this[++c]*2**24,K=this[++c]+256*this[++c]+65536*this[++c]+m*2**24;return BigInt(B)+(BigInt(K)<<BigInt(32))}),u.prototype.readBigUInt64BE=qt(function(c){Mt(c>>>=0,"offset");const g=this[c],m=this[c+7];g!==void 0&&m!==void 0||It(c,this.length-8);const B=g*2**24+65536*this[++c]+256*this[++c]+this[++c],K=this[++c]*2**24+65536*this[++c]+256*this[++c]+m;return(BigInt(B)<<BigInt(32))+BigInt(K)}),u.prototype.readIntLE=function(c,g,m){c>>>=0,g>>>=0,m||ut(c,g,this.length);let B=this[c],K=1,W=0;for(;++W<g&&(K*=256);)B+=this[c+W]*K;return K*=128,B>=K&&(B-=Math.pow(2,8*g)),B},u.prototype.readIntBE=function(c,g,m){c>>>=0,g>>>=0,m||ut(c,g,this.length);let B=g,K=1,W=this[c+--B];for(;B>0&&(K*=256);)W+=this[c+--B]*K;return K*=128,W>=K&&(W-=Math.pow(2,8*g)),W},u.prototype.readInt8=function(c,g){return c>>>=0,g||ut(c,1,this.length),128&this[c]?-1*(255-this[c]+1):this[c]},u.prototype.readInt16LE=function(c,g){c>>>=0,g||ut(c,2,this.length);const m=this[c]|this[c+1]<<8;return 32768&m?4294901760|m:m},u.prototype.readInt16BE=function(c,g){c>>>=0,g||ut(c,2,this.length);const m=this[c+1]|this[c]<<8;return 32768&m?4294901760|m:m},u.prototype.readInt32LE=function(c,g){return c>>>=0,g||ut(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},u.prototype.readInt32BE=function(c,g){return c>>>=0,g||ut(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},u.prototype.readBigInt64LE=qt(function(c){Mt(c>>>=0,"offset");const g=this[c],m=this[c+7];g!==void 0&&m!==void 0||It(c,this.length-8);const B=this[c+4]+256*this[c+5]+65536*this[c+6]+(m<<24);return(BigInt(B)<<BigInt(32))+BigInt(g+256*this[++c]+65536*this[++c]+this[++c]*16777216)}),u.prototype.readBigInt64BE=qt(function(c){Mt(c>>>=0,"offset");const g=this[c],m=this[c+7];g!==void 0&&m!==void 0||It(c,this.length-8);const B=(g<<24)+65536*this[++c]+256*this[++c]+this[++c];return(BigInt(B)<<BigInt(32))+BigInt(this[++c]*16777216+65536*this[++c]+256*this[++c]+m)}),u.prototype.readFloatLE=function(c,g){return c>>>=0,g||ut(c,4,this.length),i.read(this,c,!0,23,4)},u.prototype.readFloatBE=function(c,g){return c>>>=0,g||ut(c,4,this.length),i.read(this,c,!1,23,4)},u.prototype.readDoubleLE=function(c,g){return c>>>=0,g||ut(c,8,this.length),i.read(this,c,!0,52,8)},u.prototype.readDoubleBE=function(c,g){return c>>>=0,g||ut(c,8,this.length),i.read(this,c,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(c,g,m,B){c=+c,g>>>=0,m>>>=0,!B&&lt(this,c,g,m,Math.pow(2,8*m)-1,0);let K=1,W=0;for(this[g]=255&c;++W<m&&(K*=256);)this[g+W]=c/K&255;return g+m},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(c,g,m,B){c=+c,g>>>=0,m>>>=0,!B&&lt(this,c,g,m,Math.pow(2,8*m)-1,0);let K=m-1,W=1;for(this[g+K]=255&c;--K>=0&&(W*=256);)this[g+K]=c/W&255;return g+m},u.prototype.writeUint8=u.prototype.writeUInt8=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,1,255,0),this[g]=255&c,g+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,2,65535,0),this[g]=255&c,this[g+1]=c>>>8,g+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,2,65535,0),this[g]=c>>>8,this[g+1]=255&c,g+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,4,4294967295,0),this[g+3]=c>>>24,this[g+2]=c>>>16,this[g+1]=c>>>8,this[g]=255&c,g+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,4,4294967295,0),this[g]=c>>>24,this[g+1]=c>>>16,this[g+2]=c>>>8,this[g+3]=255&c,g+4},u.prototype.writeBigUInt64LE=qt(function(c,g=0){return At(this,c,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=qt(function(c,g=0){return wt(this,c,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(c,g,m,B){if(c=+c,g>>>=0,!B){const Bt=Math.pow(2,8*m-1);lt(this,c,g,m,Bt-1,-Bt)}let K=0,W=1,ct=0;for(this[g]=255&c;++K<m&&(W*=256);)c<0&&ct===0&&this[g+K-1]!==0&&(ct=1),this[g+K]=(c/W|0)-ct&255;return g+m},u.prototype.writeIntBE=function(c,g,m,B){if(c=+c,g>>>=0,!B){const Bt=Math.pow(2,8*m-1);lt(this,c,g,m,Bt-1,-Bt)}let K=m-1,W=1,ct=0;for(this[g+K]=255&c;--K>=0&&(W*=256);)c<0&&ct===0&&this[g+K+1]!==0&&(ct=1),this[g+K]=(c/W|0)-ct&255;return g+m},u.prototype.writeInt8=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,1,127,-128),c<0&&(c=255+c+1),this[g]=255&c,g+1},u.prototype.writeInt16LE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,2,32767,-32768),this[g]=255&c,this[g+1]=c>>>8,g+2},u.prototype.writeInt16BE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,2,32767,-32768),this[g]=c>>>8,this[g+1]=255&c,g+2},u.prototype.writeInt32LE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,4,2147483647,-2147483648),this[g]=255&c,this[g+1]=c>>>8,this[g+2]=c>>>16,this[g+3]=c>>>24,g+4},u.prototype.writeInt32BE=function(c,g,m){return c=+c,g>>>=0,m||lt(this,c,g,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[g]=c>>>24,this[g+1]=c>>>16,this[g+2]=c>>>8,this[g+3]=255&c,g+4},u.prototype.writeBigInt64LE=qt(function(c,g=0){return At(this,c,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=qt(function(c,g=0){return wt(this,c,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(c,g,m){return gt(this,c,g,!0,m)},u.prototype.writeFloatBE=function(c,g,m){return gt(this,c,g,!1,m)},u.prototype.writeDoubleLE=function(c,g,m){return G(this,c,g,!0,m)},u.prototype.writeDoubleBE=function(c,g,m){return G(this,c,g,!1,m)},u.prototype.copy=function(c,g,m,B){if(!u.isBuffer(c))throw new TypeError("argument should be a Buffer");if(m||(m=0),B||B===0||(B=this.length),g>=c.length&&(g=c.length),g||(g=0),B>0&&B<m&&(B=m),B===m||c.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),c.length-g<B-m&&(B=c.length-g+m);const K=B-m;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,m,B):Uint8Array.prototype.set.call(c,this.subarray(m,B),g),K},u.prototype.fill=function(c,g,m,B){if(typeof c=="string"){if(typeof g=="string"?(B=g,g=0,m=this.length):typeof m=="string"&&(B=m,m=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!u.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(c.length===1){const W=c.charCodeAt(0);(B==="utf8"&&W<128||B==="latin1")&&(c=W)}}else typeof c=="number"?c&=255:typeof c=="boolean"&&(c=Number(c));if(g<0||this.length<g||this.length<m)throw new RangeError("Out of range index");if(m<=g)return this;let K;if(g>>>=0,m=m===void 0?this.length:m>>>0,c||(c=0),typeof c=="number")for(K=g;K<m;++K)this[K]=c;else{const W=u.isBuffer(c)?c:u.from(c,B),ct=W.length;if(ct===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(K=0;K<m-g;++K)this[K+g]=W[K%ct]}return this};const jt={};function Lt(c,g,m){jt[c]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}function te(c){let g="",m=c.length;const B=c[0]==="-"?1:0;for(;m>=B+4;m-=3)g=`_${c.slice(m-3,m)}${g}`;return`${c.slice(0,m)}${g}`}function Gt(c,g,m,B,K,W){if(c>m||c<g){const ct=typeof g=="bigint"?"n":"";let Bt;throw Bt=g===0||g===BigInt(0)?`>= 0${ct} and < 2${ct} ** ${8*(W+1)}${ct}`:`>= -(2${ct} ** ${8*(W+1)-1}${ct}) and < 2 ** ${8*(W+1)-1}${ct}`,new jt.ERR_OUT_OF_RANGE("value",Bt,c)}(function(ct,Bt,$t){Mt(Bt,"offset"),ct[Bt]!==void 0&&ct[Bt+$t]!==void 0||It(Bt,ct.length-($t+1))})(B,K,W)}function Mt(c,g){if(typeof c!="number")throw new jt.ERR_INVALID_ARG_TYPE(g,"number",c)}function It(c,g,m){throw Math.floor(c)!==c?(Mt(c,m),new jt.ERR_OUT_OF_RANGE("offset","an integer",c)):g<0?new jt.ERR_BUFFER_OUT_OF_BOUNDS:new jt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,c)}Lt("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Lt("ERR_INVALID_ARG_TYPE",function(c,g){return`The "${c}" argument must be of type number. Received type ${typeof g}`},TypeError),Lt("ERR_OUT_OF_RANGE",function(c,g,m){let B=`The value of "${c}" is out of range.`,K=m;return Number.isInteger(m)&&Math.abs(m)>4294967296?K=te(String(m)):typeof m=="bigint"&&(K=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(K=te(K)),K+="n"),B+=` It must be ${g}. Received ${K}`,B},RangeError);const Pt=/[^+/0-9A-Za-z-_]/g;function Et(c,g){let m;g=g||1/0;const B=c.length;let K=null;const W=[];for(let ct=0;ct<B;++ct){if(m=c.charCodeAt(ct),m>55295&&m<57344){if(!K){if(m>56319){(g-=3)>-1&&W.push(239,191,189);continue}if(ct+1===B){(g-=3)>-1&&W.push(239,191,189);continue}K=m;continue}if(m<56320){(g-=3)>-1&&W.push(239,191,189),K=m;continue}m=65536+(K-55296<<10|m-56320)}else K&&(g-=3)>-1&&W.push(239,191,189);if(K=null,m<128){if((g-=1)<0)break;W.push(m)}else if(m<2048){if((g-=2)<0)break;W.push(m>>6|192,63&m|128)}else if(m<65536){if((g-=3)<0)break;W.push(m>>12|224,m>>6&63|128,63&m|128)}else{if(!(m<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;W.push(m>>18|240,m>>12&63|128,m>>6&63|128,63&m|128)}}return W}function Wt(c){return r.toByteArray(function(g){if((g=(g=g.split("=")[0]).trim().replace(Pt,"")).length<2)return"";for(;g.length%4!=0;)g+="=";return g}(c))}function ue(c,g,m,B){let K;for(K=0;K<B&&!(K+m>=g.length||K>=c.length);++K)g[K+m]=c[K];return K}function Ht(c,g){return c instanceof g||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===g.name}function Rt(c){return c!=c}const le=function(){const c="0123456789abcdef",g=new Array(256);for(let m=0;m<16;++m){const B=16*m;for(let K=0;K<16;++K)g[B+K]=c[m]+c[K]}return g}();function qt(c){return typeof BigInt>"u"?ne:c}function ne(){throw new Error("BigInt not supported")}},296:(o,e,t)=>{t.r(e),t.d(e,{WebSocket:()=>S,default:()=>w});var r,i=t(153);function a(O){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(O)}function f(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function d(O,k){for(var x=0;x<k.length;x++){var L=k[x];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(O,b(L.key),L)}}function u(O,k,x){return k&&d(O.prototype,k),Object.defineProperty(O,"prototype",{writable:!1}),O}function b(O){var k=function(x,L){if(a(x)!="object"||!x)return x;var z=x[Symbol.toPrimitive];if(z!==void 0){var _=z.call(x,L);if(a(_)!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(O,"string");return a(k)=="symbol"?k:k+""}function v(O,k,x){return k=T(k),function(L,z){if(z&&(a(z)=="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(L)}(O,E()?Reflect.construct(k,x||[],T(O).constructor):k.apply(O,x))}function E(){try{var O=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E=function(){return!!O})()}function T(O){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},T(O)}function D(O,k){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,L){return x.__proto__=L,x},D(O,k)}o=t.hmd(o),typeof window>"u"?(r=function(){return u(function O(k,x){var L=this;f(this,O),i.w9.info(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Creating mock WebSocket for background context"),this.url=k,this.protocols=x,this.readyState=3,setTimeout(function(){typeof L.onclose=="function"&&L.onclose({code:1e3,reason:"WebSockets not supported in background context"})},0)},[{key:"send",value:function(){throw i.w9.warn(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Cannot use WebSockets in background context"),new Error("WebSockets are not available in background context")}},{key:"close",value:function(){}},{key:"sendPromise",value:function(){return Promise.reject(new Error("WebSockets are not available in background context"))}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}}])}(),i.w9.info(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Using mock WebSocket implementation for background context")):(r=function(O){function k(x,L){var z;return f(this,k),i.w9.info(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Creating WebSocket with URL:",x),(z=v(this,k,[x,L])).addEventListener("error",function(_){typeof z.onerror=="function"&&z.onerror(_)}),z.addEventListener("open",function(_){typeof z.onopen=="function"&&z.onopen(_)}),z.addEventListener("close",function(_){typeof z.onclose=="function"&&z.onclose(_)}),z.addEventListener("message",function(_){typeof z.onmessage=="function"&&z.onmessage(_)}),z}return function(x,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(L&&L.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),L&&D(x,L)}(k,O),u(k,[{key:"sendPromise",value:function(x){var L=this;return new Promise(function(z,_){try{L.send(x),z()}catch(N){_(N)}})}}])}(window.WebSocket),i.w9.info(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Using browser WebSocket implementation"));var S=r;const w=r;o.exports&&(o.exports=r,o.exports.WebSocket=r,o.exports.default=r),i.w9.info(i.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] WebSocket polyfill initialized")},329:(o,e,t)=>{t.d(e,{A:()=>$u});var r={};t.r(r),t.d(r,{cancelSession:()=>rs,failSession:()=>Qi,startVerification:()=>Yi,submitProofs:()=>ts,submitProofs2:()=>ju}),t(997);var i=t(952),a=t(770),f=t(859);function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return u(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(u(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,u(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,u(U,"constructor",R),u(R,"constructor",P),P.displayName="GeneratorFunction",u(R,p,"GeneratorFunction"),u(U),u(U,p,"Generator"),u(U,h,function(){return this}),u(U,"toString",function(){return"[object Generator]"}),(d=function(){return{w:y,m:et}})()}function u(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}u=function(y,I,A,P){function R(H,U){u(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},u(l,n,s,h)}function b(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function v(l){return function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){b(y,h,p,I,A,"next",P)}function A(P){b(y,h,p,I,A,"throw",P)}I(void 0)})}}a.Ow.setConfig({consoleEnabled:!0,backendEnabled:!0,consoleLevel:f.E$.INFO,backendLevel:f.E$.INFO,includeSensitiveToBackend:!1,debugMode:!1});var E=function(){var l=v(d().m(function n(s,h,p){var y,I,A,P;return d().w(function(R){for(;;)switch(R.p=R.n){case 0:return y=(0,a.y8)({sessionId:h||"unknown",providerId:s||"unknown",appId:p||"unknown",source:"reclaim-extension-sdk",type:f.D_.FETCH_DATA}),R.p=1,R.n=2,fetch("".concat(i.Sn.PROVIDER_URL(s)));case 2:if((I=R.v).ok){R.n=3;break}throw new Error("Failed to fetch provider data");case 3:return y.info("Successfully fetched provider data from the backend: "+JSON.stringify(I)),R.n=4,I.json();case 4:return A=R.v,R.a(2,A==null?void 0:A.providers);case 5:throw R.p=5,P=R.v,y.error("[FETCH-CALLS] Error fetching provider data: "+P.toString()),P;case 6:return R.a(2)}},n,null,[[1,5]])}));return function(n,s,h){return l.apply(this,arguments)}}(),T=function(){var l=v(d().m(function n(s,h,p,y){var I,A,P,R;return d().w(function(H){for(;;)switch(H.p=H.n){case 0:return I=(0,a.y8)({sessionId:s||"unknown",providerId:p||"unknown",appId:y||"unknown",source:"reclaim-extension-sdk",type:f.D_.FETCH_DATA}),H.p=1,H.n=2,fetch("".concat(i.Sn.UPDATE_SESSION_STATUS()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:s,status:h})});case 2:if((A=H.v).ok){H.n=3;break}throw new Error("Failed to update session status");case 3:return I.info("Successfully updated session status: "+h),H.n=4,A.json();case 4:return P=H.v,H.a(2,P);case 5:throw H.p=5,R=H.v,I.error("Error updating session status: "+R.toString()),R;case 6:return H.a(2)}},n,null,[[1,5]])}));return function(n,s,h,p){return l.apply(this,arguments)}}(),D=function(){var l=v(d().m(function n(s,h,p,y,I){var A,P,R,H,U,et;return d().w(function(V){for(;;)switch(V.p=V.n){case 0:return A=(0,a.y8)({sessionId:p||"unknown",providerId:y||"unknown",appId:I||"unknown",source:"reclaim-extension-sdk",type:f.D_.FETCH_DATA}),V.p=1,P=JSON.stringify(s),R=encodeURIComponent(P),V.n=2,fetch(h,{method:"POST",headers:{"Content-Type":"text/plain"},body:R});case 2:return H=V.v,V.n=3,H.text();case 3:if(U=V.v,H.ok){V.n=5;break}return V.n=4,T(p,i.Ew.PROOF_SUBMISSION_FAILED);case 4:throw new Error("Failed to submit proof to Callback and update session status");case 5:return A.info("Successfully submitted proof to Callback and updated session status"),V.n=6,T(p,i.Ew.PROOF_SUBMITTED);case 6:return V.a(2,U);case 7:throw V.p=7,et=V.v,A.error("[FETCH-CALLS] Error submitting proof to Callback: "+et.toString()),et;case 8:return V.a(2)}},n,null,[[1,7]])}));return function(n,s,h,p,y){return l.apply(this,arguments)}}();function S(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return w(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(w(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,w(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,w(U,"constructor",R),w(R,"constructor",P),P.displayName="GeneratorFunction",w(R,p,"GeneratorFunction"),w(U),w(U,p,"Generator"),w(U,h,function(){return this}),w(U,"toString",function(){return"[object Generator]"}),(S=function(){return{w:y,m:et}})()}function w(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}w=function(y,I,A,P){function R(H,U){w(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},w(l,n,s,h)}function O(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function k(l){return function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){O(y,h,p,I,A,"next",P)}function A(P){O(y,h,p,I,A,"throw",P)}I(void 0)})}}a.Ow.setConfig({consoleEnabled:!0,backendEnabled:!0,consoleLevel:f.E$.INFO,backendLevel:f.E$.INFO,includeSensitiveToBackend:!1,debugMode:!1});var x=(0,a.y8)({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:"reclaim-extension-sdk",type:f.D_.OFFSCREEN}),L=!1,z=null,_=null,N=function(l){(l==null?void 0:l.action)===i.wx.OFFSCREEN_DOCUMENT_READY&&(l==null?void 0:l.source)===i.J_.OFFSCREEN&&(l==null?void 0:l.target)===i.J_.BACKGROUND&&(x.info("[OFFSCREEN-MANAGER] Received offscreen ready signal (global listener)."),L=!0,z&&(clearTimeout(z),z=null))},C=function(){typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener&&chrome.runtime.onMessage.hasListener&&(chrome.runtime.onMessage.hasListener(N)||chrome.runtime.onMessage.addListener(N))},F=function(){typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener&&chrome.runtime.onMessage.hasListener&&(chrome.runtime.onMessage.hasListener(N)||chrome.runtime.onMessage.addListener(N))};function j(){return q.apply(this,arguments)}function q(){return(q=k(S().m(function l(){var n,s;return S().w(function(h){for(;;)switch(h.p=h.n){case 0:return n=chrome.runtime.getURL("reclaim-browser-extension-sdk/offscreen/offscreen.html"),x.info("[OFFSCREEN-MANAGER] Attempting to create offscreen document with URL:",n),h.p=1,h.n=2,chrome.offscreen.createDocument({url:n,reasons:["DOM_PARSER","IFRAME_SCRIPTING","BLOBS"],justification:"Manages DOM-dependent operations like crypto and ZK proof generation for the extension."});case 2:x.info("[OFFSCREEN-MANAGER] Offscreen document creation initiated."),h.n=5;break;case 3:if(h.p=3,!(s=h.v).message||!s.message.includes("Only a single offscreen document may be created.")){h.n=4;break}x.warn("[OFFSCREEN-MANAGER] Offscreen document already exists or creation was attempted by another part."),h.n=5;break;case 4:throw x.error("[OFFSCREEN-MANAGER] Error creating offscreen document:",s),s;case 5:return h.a(2)}},l,null,[[1,3]])}))).apply(this,arguments)}function Q(){return J.apply(this,arguments)}function J(){return J=k(S().m(function l(){var n,s=arguments;return S().w(function(h){for(;;)switch(h.n){case 0:if(n=s.length>0&&s[0]!==void 0?s[0]:15e3,!L){h.n=1;break}return x.info("[OFFSCREEN-MANAGER] Already ready (waitForOffscreenReadyInternal check)"),h.a(2,!0);case 1:x.info("[OFFSCREEN-MANAGER] Waiting for offscreen document to be ready (timeout:- ${timeoutMs}ms)...");try{chrome.runtime.sendMessage({action:i.wx.PING_OFFSCREEN,source:i.J_.BACKGROUND,target:i.J_.OFFSCREEN})}catch(p){x.warn("[OFFSCREEN-MANAGER] Synchronous error sending ping:"+(p==null?void 0:p.message))}return h.a(2,new Promise(function(p){if(L)return x.info("[OFFSCREEN-MANAGER] Became ready while setting up promise."),void p(!0);var y=function(A){A.action===i.wx.OFFSCREEN_DOCUMENT_READY&&A.source===i.J_.OFFSCREEN&&A.target===i.J_.BACKGROUND&&(L=!0,clearTimeout(I),chrome.runtime.onMessage.removeListener(y),z===I&&(z=null),p(!0))};chrome.runtime.onMessage.addListener(y),z&&clearTimeout(z);var I=setTimeout(function(){chrome.runtime.onMessage.removeListener(y),x.error("[OFFSCREEN-MANAGER] Timed out waiting for offscreen document after "+n+" ms."),z===I&&(z=null),p(!1)},n);z=I}))}},l)})),J.apply(this,arguments)}function X(){return Y.apply(this,arguments)}function Y(){return(Y=k(S().m(function l(){return S().w(function(n){for(;;)switch(n.n){case 0:if(!L){n.n=1;break}return x.info("[OFFSCREEN-MANAGER] Document already confirmed ready."),n.a(2,!0);case 1:if(!_){n.n=2;break}return x.info("[OFFSCREEN-MANAGER] Creation already in progress, awaiting..."),n.n=2,_;case 2:if(!chrome.runtime.getContexts){n.n=6;break}return n.n=3,chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"]});case 3:if(!(n.v.length>0)){n.n=6;break}if(x.info("[OFFSCREEN-MANAGER] Offscreen document context found."),!L){n.n=4;break}return n.a(2,!0);case 4:return x.info("[OFFSCREEN-MANAGER] Context exists, but not marked ready. Waiting for signal..."),n.n=5,Q(5e3);case 5:return n.a(2,n.v);case 6:if(_){n.n=7;break}return x.info("[OFFSCREEN-MANAGER] No existing context/promise, initiating creation."),_=j().finally(function(){_=null}),n.n=7,_;case 7:return n.n=8,Q(5e4);case 8:if(n.v){n.n=9;break}throw new Error("Failed to initialize or confirm offscreen document readiness.");case 9:return x.info("[OFFSCREEN-MANAGER] Offscreen document ensured to be ready."),n.a(2,!0)}},l)}))).apply(this,arguments)}typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&F(),F();var M=t(153);function ut(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return lt(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(lt(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,lt(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,lt(U,"constructor",R),lt(R,"constructor",P),P.displayName="GeneratorFunction",lt(R,p,"GeneratorFunction"),lt(U),lt(U,p,"Generator"),lt(U,h,function(){return this}),lt(U,"toString",function(){return"[object Generator]"}),(ut=function(){return{w:y,m:et}})()}function lt(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}lt=function(y,I,A,P){function R(H,U){lt(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},lt(l,n,s,h)}function At(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}a.Ow.setConfig({consoleEnabled:!0,backendEnabled:!0,consoleLevel:f.E$.INFO,backendLevel:f.E$.INFO,includeSensitiveToBackend:!1,debugMode:!1});var wt=(0,a.y8)({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:"reclaim-extension-sdk",type:f.D_.PROOF}),Ct=function(){var l,n=(l=ut().m(function s(h){var p;return ut().w(function(y){for(;;)switch(y.p=y.n){case 0:if(wt.setContext({sessionId:h.sessionId||"unknown",providerId:h.providerId||"unknown",appId:h.applicationId||"unknown",type:f.D_.PROOF}),y.p=1,wt.info("[PROOF-GENERATOR] Starting proof generation with data: ".concat(JSON.stringify(h))),h){y.n=2;break}throw wt.error("[PROOF-GENERATOR] No claim data provided for proof generation"),new Error("No claim data provided for proof generation");case 2:return y.n=3,X();case 3:return y.a(2,new Promise(function(I,A){var P=setTimeout(function(){wt.error("[PROOF-GENERATOR] Timeout waiting for offscreen document to generate proof"),A({success:!1,error:"Timeout waiting for offscreen document to generate proof"})},6e4),R=function(H){if(H.action===i.wx.GENERATE_PROOF_RESPONSE&&H.source===i.J_.OFFSCREEN&&H.target===i.J_.BACKGROUND){var U,et;if(clearTimeout(P),chrome.runtime.onMessage.removeListener(R),console.log("response",H),!H.success)return wt.error("[PROOF-GENERATOR] Proof generation failed:",H.error),void I({success:!1,error:H.error||"Unknown error in proof generation"});var V=(H==null||(U=H.proof)===null||U===void 0||(U=U.error)===null||U===void 0?void 0:U.message)||(typeof(H==null||(et=H.proof)===null||et===void 0?void 0:et.error)=="string"?H.proof.error:null);if(V)return wt.error("[PROOF-GENERATOR] Proof contains embedded error:",V),void I({success:!1,error:V});wt.info("[PROOF-GENERATOR] Proof generation successful"),I(H)}};chrome.runtime.onMessage.addListener(R),chrome.runtime.sendMessage({action:i.wx.GENERATE_PROOF,source:i.J_.BACKGROUND,target:i.J_.OFFSCREEN,data:h},function(){chrome.runtime.lastError&&(clearTimeout(P),chrome.runtime.onMessage.removeListener(R),wt.error("[PROOF-GENERATOR] Error sending message to offscreen document: ".concat(chrome.runtime.lastError.message)),A({success:!1,error:chrome.runtime.lastError.message||"Error communicating with offscreen document"}))})}));case 4:return y.p=4,p=y.v,wt.error("[PROOF-GENERATOR] Error in proof generation process: ".concat(p.message)),y.a(2,{success:!1,error:p.message||"Unknown error in proof generation process"})}},s,null,[[1,4]])}),function(){var s=this,h=arguments;return new Promise(function(p,y){var I=l.apply(s,h);function A(R){At(I,p,y,A,P,"next",R)}function P(R){At(I,p,y,A,P,"throw",R)}A(void 0)})});return function(s){return n.apply(this,arguments)}}(),gt=t(573);class G{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+G.version}static addUnaryOp(n){return G.max_unop_len=Math.max(n.length,G.max_unop_len),G.unary_ops[n]=1,G}static addBinaryOp(n,s,h){return G.max_binop_len=Math.max(n.length,G.max_binop_len),G.binary_ops[n]=s,h?G.right_associative.add(n):G.right_associative.delete(n),G}static addIdentifierChar(n){return G.additional_identifier_chars.add(n),G}static addLiteral(n,s){return G.literals[n]=s,G}static removeUnaryOp(n){return delete G.unary_ops[n],n.length===G.max_unop_len&&(G.max_unop_len=G.getMaxKeyLen(G.unary_ops)),G}static removeAllUnaryOps(){return G.unary_ops={},G.max_unop_len=0,G}static removeIdentifierChar(n){return G.additional_identifier_chars.delete(n),G}static removeBinaryOp(n){return delete G.binary_ops[n],n.length===G.max_binop_len&&(G.max_binop_len=G.getMaxKeyLen(G.binary_ops)),G.right_associative.delete(n),G}static removeAllBinaryOps(){return G.binary_ops={},G.max_binop_len=0,G}static removeLiteral(n){return delete G.literals[n],G}static removeAllLiterals(){return G.literals={},G}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(n){this.expr=n,this.index=0}static parse(n){return new G(n).parse()}static getMaxKeyLen(n){return Math.max(0,...Object.keys(n).map(s=>s.length))}static isDecimalDigit(n){return n>=48&&n<=57}static binaryPrecedence(n){return G.binary_ops[n]||0}static isIdentifierStart(n){return n>=65&&n<=90||n>=97&&n<=122||n>=128&&!G.binary_ops[String.fromCharCode(n)]||G.additional_identifier_chars.has(String.fromCharCode(n))}static isIdentifierPart(n){return G.isIdentifierStart(n)||G.isDecimalDigit(n)}throwError(n){const s=new Error(n+" at character "+this.index);throw s.index=this.index,s.description=n,s}runHook(n,s){if(G.hooks[n]){const h={context:this,node:s};return G.hooks.run(n,h),h.node}return s}searchHook(n){if(G.hooks[n]){const s={context:this};return G.hooks[n].find(function(h){return h.call(s.context,s),s.node}),s.node}}gobbleSpaces(){let n=this.code;for(;n===G.SPACE_CODE||n===G.TAB_CODE||n===G.LF_CODE||n===G.CR_CODE;)n=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const n=this.gobbleExpressions(),s=n.length===1?n[0]:{type:G.COMPOUND,body:n};return this.runHook("after-all",s)}gobbleExpressions(n){let s,h,p=[];for(;this.index<this.expr.length;)if(s=this.code,s===G.SEMCOL_CODE||s===G.COMMA_CODE)this.index++;else if(h=this.gobbleExpression())p.push(h);else if(this.index<this.expr.length){if(s===n)break;this.throwError('Unexpected "'+this.char+'"')}return p}gobbleExpression(){const n=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",n)}gobbleBinaryOp(){this.gobbleSpaces();let n=this.expr.substr(this.index,G.max_binop_len),s=n.length;for(;s>0;){if(G.binary_ops.hasOwnProperty(n)&&(!G.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!G.isIdentifierPart(this.expr.charCodeAt(this.index+n.length))))return this.index+=s,n;n=n.substr(0,--s)}return!1}gobbleBinaryExpression(){let n,s,h,p,y,I,A,P,R;if(I=this.gobbleToken(),!I||(s=this.gobbleBinaryOp(),!s))return I;for(y={value:s,prec:G.binaryPrecedence(s),right_a:G.right_associative.has(s)},A=this.gobbleToken(),A||this.throwError("Expected expression after "+s),p=[I,y,A];s=this.gobbleBinaryOp();){if(h=G.binaryPrecedence(s),h===0){this.index-=s.length;break}y={value:s,prec:h,right_a:G.right_associative.has(s)},R=s;const H=U=>y.right_a&&U.right_a?h>U.prec:h<=U.prec;for(;p.length>2&&H(p[p.length-2]);)A=p.pop(),s=p.pop().value,I=p.pop(),n={type:G.BINARY_EXP,operator:s,left:I,right:A},p.push(n);n=this.gobbleToken(),n||this.throwError("Expected expression after "+R),p.push(y,n)}for(P=p.length-1,n=p[P];P>1;)n={type:G.BINARY_EXP,operator:p[P-1].value,left:p[P-2],right:n},P-=2;return n}gobbleToken(){let n,s,h,p;if(this.gobbleSpaces(),p=this.searchHook("gobble-token"),p)return this.runHook("after-token",p);if(n=this.code,G.isDecimalDigit(n)||n===G.PERIOD_CODE)return this.gobbleNumericLiteral();if(n===G.SQUOTE_CODE||n===G.DQUOTE_CODE)p=this.gobbleStringLiteral();else if(n===G.OBRACK_CODE)p=this.gobbleArray();else{for(s=this.expr.substr(this.index,G.max_unop_len),h=s.length;h>0;){if(G.unary_ops.hasOwnProperty(s)&&(!G.isIdentifierStart(this.code)||this.index+s.length<this.expr.length&&!G.isIdentifierPart(this.expr.charCodeAt(this.index+s.length)))){this.index+=h;const y=this.gobbleToken();return y||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:G.UNARY_EXP,operator:s,argument:y,prefix:!0})}s=s.substr(0,--h)}G.isIdentifierStart(n)?(p=this.gobbleIdentifier(),G.literals.hasOwnProperty(p.name)?p={type:G.LITERAL,value:G.literals[p.name],raw:p.name}:p.name===G.this_str&&(p={type:G.THIS_EXP})):n===G.OPAREN_CODE&&(p=this.gobbleGroup())}return p?(p=this.gobbleTokenProperty(p),this.runHook("after-token",p)):this.runHook("after-token",!1)}gobbleTokenProperty(n){this.gobbleSpaces();let s=this.code;for(;s===G.PERIOD_CODE||s===G.OBRACK_CODE||s===G.OPAREN_CODE||s===G.QUMARK_CODE;){let h;if(s===G.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==G.PERIOD_CODE)break;h=!0,this.index+=2,this.gobbleSpaces(),s=this.code}this.index++,s===G.OBRACK_CODE?((n={type:G.MEMBER_EXP,computed:!0,object:n,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),s=this.code,s!==G.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):s===G.OPAREN_CODE?n={type:G.CALL_EXP,arguments:this.gobbleArguments(G.CPAREN_CODE),callee:n}:(s===G.PERIOD_CODE||h)&&(h&&this.index--,this.gobbleSpaces(),n={type:G.MEMBER_EXP,computed:!1,object:n,property:this.gobbleIdentifier()}),h&&(n.optional=!0),this.gobbleSpaces(),s=this.code}return n}gobbleNumericLiteral(){let n,s,h="";for(;G.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);if(this.code===G.PERIOD_CODE)for(h+=this.expr.charAt(this.index++);G.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(h+=this.expr.charAt(this.index++),n=this.char,n!=="+"&&n!=="-"||(h+=this.expr.charAt(this.index++));G.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);G.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+h+this.char+")")}return s=this.code,G.isIdentifierStart(s)?this.throwError("Variable names cannot start with a number ("+h+this.char+")"):(s===G.PERIOD_CODE||h.length===1&&h.charCodeAt(0)===G.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:G.LITERAL,value:parseFloat(h),raw:h}}gobbleStringLiteral(){let n="";const s=this.index,h=this.expr.charAt(this.index++);let p=!1;for(;this.index<this.expr.length;){let y=this.expr.charAt(this.index++);if(y===h){p=!0;break}if(y==="\\")switch(y=this.expr.charAt(this.index++),y){case"n":n+=`
`;break;case"r":n+="\r";break;case"t":n+="	";break;case"b":n+="\b";break;case"f":n+="\f";break;case"v":n+="\v";break;default:n+=y}else n+=y}return p||this.throwError('Unclosed quote after "'+n+'"'),{type:G.LITERAL,value:n,raw:this.expr.substring(s,this.index)}}gobbleIdentifier(){let n=this.code,s=this.index;for(G.isIdentifierStart(n)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(n=this.code,G.isIdentifierPart(n));)this.index++;return{type:G.IDENTIFIER,name:this.expr.slice(s,this.index)}}gobbleArguments(n){const s=[];let h=!1,p=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let y=this.code;if(y===n){h=!0,this.index++,n===G.CPAREN_CODE&&p&&p>=s.length&&this.throwError("Unexpected token "+String.fromCharCode(n));break}if(y===G.COMMA_CODE){if(this.index++,p++,p!==s.length){if(n===G.CPAREN_CODE)this.throwError("Unexpected token ,");else if(n===G.CBRACK_CODE)for(let I=s.length;I<p;I++)s.push(null)}}else if(s.length!==p&&p!==0)this.throwError("Expected comma");else{const I=this.gobbleExpression();I&&I.type!==G.COMPOUND||this.throwError("Expected comma"),s.push(I)}}return h||this.throwError("Expected "+String.fromCharCode(n)),s}gobbleGroup(){this.index++;let n=this.gobbleExpressions(G.CPAREN_CODE);if(this.code===G.CPAREN_CODE)return this.index++,n.length===1?n[0]:!!n.length&&{type:G.SEQUENCE_EXP,expressions:n};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:G.ARRAY_EXP,elements:this.gobbleArguments(G.CBRACK_CODE)}}}const jt=new class{add(l,n,s){if(typeof arguments[0]!="string")for(let h in arguments[0])this.add(h,arguments[0][h],arguments[1]);else(Array.isArray(l)?l:[l]).forEach(function(h){this[h]=this[h]||[],n&&this[h][s?"unshift":"push"](n)},this)}run(l,n){this[l]=this[l]||[],this[l].forEach(function(s){s.call(n&&n.context?n.context:n,n)})}};Object.assign(G,{hooks:jt,plugins:new class{constructor(l){this.jsep=l,this.registered={}}register(){for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];n.forEach(h=>{if(typeof h!="object"||!h.name||!h.init)throw new Error("Invalid JSEP plugin format");this.registered[h.name]||(h.init(this.jsep),this.registered[h.name]=h)})}}(G),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),G.max_unop_len=G.getMaxKeyLen(G.unary_ops),G.max_binop_len=G.getMaxKeyLen(G.binary_ops);const Lt=l=>new G(l).parse(),te=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(G).filter(l=>!te.includes(l)&&Lt[l]===void 0).forEach(l=>{Lt[l]=G[l]}),Lt.Jsep=G;var Gt={name:"ternary",init(l){l.hooks.add("after-expression",function(n){if(n.node&&this.code===l.QUMARK_CODE){this.index++;const s=n.node,h=this.gobbleExpression();if(h||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===l.COLON_CODE){this.index++;const p=this.gobbleExpression();if(p||this.throwError("Expected expression"),n.node={type:"ConditionalExpression",test:s,consequent:h,alternate:p},s.operator&&l.binary_ops[s.operator]<=.9){let y=s;for(;y.right.operator&&l.binary_ops[y.right.operator]<=.9;)y=y.right;n.node.test=y.right,y.right=n.node,n.node=s}}else this.throwError("Expected :")}})}};Lt.plugins.register(Gt);var Mt={name:"regex",init(l){l.hooks.add("gobble-token",function(n){if(this.code===47){const s=++this.index;let h=!1;for(;this.index<this.expr.length;){if(this.code===47&&!h){const p=this.expr.slice(s,this.index);let y,I="";for(;++this.index<this.expr.length;){const A=this.code;if(!(A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57))break;I+=this.char}try{y=new RegExp(p,I)}catch(A){this.throwError(A.message)}return n.node={type:l.LITERAL,value:y,raw:this.expr.slice(s-1,this.index)},n.node=this.gobbleTokenProperty(n.node),n.node}this.code===l.OBRACK_CODE?h=!0:h&&this.code===l.CBRACK_CODE&&(h=!1),this.index+=this.code===92?2:1}this.throwError("Unclosed Regex")}})}};const It={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[43,45],assignmentPrecedence:.9,init(l){const n=[l.IDENTIFIER,l.MEMBER_EXP];function s(h){It.assignmentOperators.has(h.operator)?(h.type="AssignmentExpression",s(h.left),s(h.right)):h.operator||Object.values(h).forEach(p=>{p&&typeof p=="object"&&s(p)})}It.assignmentOperators.forEach(h=>l.addBinaryOp(h,It.assignmentPrecedence,!0)),l.hooks.add("gobble-token",function(h){const p=this.code;It.updateOperators.some(y=>y===p&&y===this.expr.charCodeAt(this.index+1))&&(this.index+=2,h.node={type:"UpdateExpression",operator:p===43?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},h.node.argument&&n.includes(h.node.argument.type)||this.throwError(`Unexpected ${h.node.operator}`))}),l.hooks.add("after-token",function(h){if(h.node){const p=this.code;It.updateOperators.some(y=>y===p&&y===this.expr.charCodeAt(this.index+1))&&(n.includes(h.node.type)||this.throwError(`Unexpected ${h.node.operator}`),this.index+=2,h.node={type:"UpdateExpression",operator:p===43?"++":"--",argument:h.node,prefix:!1})}}),l.hooks.add("after-expression",function(h){h.node&&s(h.node)})}};Lt.plugins.register(Mt,It),Lt.addUnaryOp("typeof"),Lt.addLiteral("null",null),Lt.addLiteral("undefined",void 0);const Pt=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),Et={evalAst(l,n){switch(l.type){case"BinaryExpression":case"LogicalExpression":return Et.evalBinaryExpression(l,n);case"Compound":return Et.evalCompound(l,n);case"ConditionalExpression":return Et.evalConditionalExpression(l,n);case"Identifier":return Et.evalIdentifier(l,n);case"Literal":return Et.evalLiteral(l,n);case"MemberExpression":return Et.evalMemberExpression(l,n);case"UnaryExpression":return Et.evalUnaryExpression(l,n);case"ArrayExpression":return Et.evalArrayExpression(l,n);case"CallExpression":return Et.evalCallExpression(l,n);case"AssignmentExpression":return Et.evalAssignmentExpression(l,n);default:throw SyntaxError("Unexpected expression",l)}},evalBinaryExpression:(l,n)=>({"||":(s,h)=>s||h(),"&&":(s,h)=>s&&h(),"|":(s,h)=>s|h(),"^":(s,h)=>s^h(),"&":(s,h)=>s&h(),"==":(s,h)=>s==h(),"!=":(s,h)=>s!=h(),"===":(s,h)=>s===h(),"!==":(s,h)=>s!==h(),"<":(s,h)=>s<h(),">":(s,h)=>s>h(),"<=":(s,h)=>s<=h(),">=":(s,h)=>s>=h(),"<<":(s,h)=>s<<h(),">>":(s,h)=>s>>h(),">>>":(s,h)=>s>>>h(),"+":(s,h)=>s+h(),"-":(s,h)=>s-h(),"*":(s,h)=>s*h(),"/":(s,h)=>s/h(),"%":(s,h)=>s%h()})[l.operator](Et.evalAst(l.left,n),()=>Et.evalAst(l.right,n)),evalCompound(l,n){let s;for(let h=0;h<l.body.length;h++){l.body[h].type==="Identifier"&&["var","let","const"].includes(l.body[h].name)&&l.body[h+1]&&l.body[h+1].type==="AssignmentExpression"&&(h+=1);const p=l.body[h];s=Et.evalAst(p,n)}return s},evalConditionalExpression:(l,n)=>Et.evalAst(l.test,n)?Et.evalAst(l.consequent,n):Et.evalAst(l.alternate,n),evalIdentifier(l,n){if(Object.hasOwn(n,l.name))return n[l.name];throw ReferenceError(`${l.name} is not defined`)},evalLiteral:l=>l.value,evalMemberExpression(l,n){const s=String(l.computed?Et.evalAst(l.property):l.property.name),h=Et.evalAst(l.object,n);if(h==null)throw TypeError(`Cannot read properties of ${h} (reading '${s}')`);if(!Object.hasOwn(h,s)&&Pt.has(s))throw TypeError(`Cannot read properties of ${h} (reading '${s}')`);const p=h[s];return typeof p=="function"?p.bind(h):p},evalUnaryExpression:(l,n)=>({"-":s=>-Et.evalAst(s,n),"!":s=>!Et.evalAst(s,n),"~":s=>~Et.evalAst(s,n),"+":s=>+Et.evalAst(s,n),typeof:s=>typeof Et.evalAst(s,n)})[l.operator](l.argument),evalArrayExpression:(l,n)=>l.elements.map(s=>Et.evalAst(s,n)),evalCallExpression(l,n){const s=l.arguments.map(h=>Et.evalAst(h,n));return Et.evalAst(l.callee,n)(...s)},evalAssignmentExpression(l,n){if(l.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const s=l.left.name,h=Et.evalAst(l.right,n);return n[s]=h,n[s]}};function Wt(l,n){return(l=l.slice()).push(n),l}function ue(l,n){return(n=n.slice()).unshift(l),n}class Ht extends Error{constructor(n){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=n,this.name="NewError"}}function Rt(l,n,s,h,p){if(!(this instanceof Rt))try{return new Rt(l,n,s,h,p)}catch(I){if(!I.avoidNew)throw I;return I.value}typeof l=="string"&&(p=h,h=s,s=n,n=l,l=null);const y=l&&typeof l=="object";if(l=l||{},this.json=l.json||s,this.path=l.path||n,this.resultType=l.resultType||"value",this.flatten=l.flatten||!1,this.wrap=!Object.hasOwn(l,"wrap")||l.wrap,this.sandbox=l.sandbox||{},this.eval=l.eval===void 0?"safe":l.eval,this.ignoreEvalErrors=l.ignoreEvalErrors!==void 0&&l.ignoreEvalErrors,this.parent=l.parent||null,this.parentProperty=l.parentProperty||null,this.callback=l.callback||h||null,this.otherTypeCallback=l.otherTypeCallback||p||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},l.autostart!==!1){const I={path:y?l.path:n};y?"json"in l&&(I.json=l.json):I.json=s;const A=this.evaluate(I);if(!A||typeof A!="object")throw new Ht(A);return A}}Rt.prototype.evaluate=function(l,n,s,h){let p=this.parent,y=this.parentProperty,{flatten:I,wrap:A}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,s=s||this.callback,this.currOtherTypeCallback=h||this.otherTypeCallback,n=n||this.json,(l=l||this.path)&&typeof l=="object"&&!Array.isArray(l)){if(!l.path&&l.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(l,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:n}=l),I=Object.hasOwn(l,"flatten")?l.flatten:I,this.currResultType=Object.hasOwn(l,"resultType")?l.resultType:this.currResultType,this.currSandbox=Object.hasOwn(l,"sandbox")?l.sandbox:this.currSandbox,A=Object.hasOwn(l,"wrap")?l.wrap:A,this.currEval=Object.hasOwn(l,"eval")?l.eval:this.currEval,s=Object.hasOwn(l,"callback")?l.callback:s,this.currOtherTypeCallback=Object.hasOwn(l,"otherTypeCallback")?l.otherTypeCallback:this.currOtherTypeCallback,p=Object.hasOwn(l,"parent")?l.parent:p,y=Object.hasOwn(l,"parentProperty")?l.parentProperty:y,l=l.path}if(p=p||null,y=y||null,Array.isArray(l)&&(l=Rt.toPathString(l)),!l&&l!==""||!n)return;const P=Rt.toPathArray(l);P[0]==="$"&&P.length>1&&P.shift(),this._hasParentSelector=null;const R=this._trace(P,n,["$"],p,y,s).filter(function(H){return H&&!H.isParentSelector});return R.length?A||R.length!==1||R[0].hasArrExpr?R.reduce((H,U)=>{const et=this._getPreferredOutput(U);return I&&Array.isArray(et)?H=H.concat(et):H.push(et),H},[]):this._getPreferredOutput(R[0]):A?[]:void 0},Rt.prototype._getPreferredOutput=function(l){const n=this.currResultType;switch(n){case"all":{const s=Array.isArray(l.path)?l.path:Rt.toPathArray(l.path);return l.pointer=Rt.toPointer(s),l.path=typeof l.path=="string"?l.path:Rt.toPathString(l.path),l}case"value":case"parent":case"parentProperty":return l[n];case"path":return Rt.toPathString(l[n]);case"pointer":return Rt.toPointer(l.path);default:throw new TypeError("Unknown result type")}},Rt.prototype._handleCallback=function(l,n,s){if(n){const h=this._getPreferredOutput(l);l.path=typeof l.path=="string"?l.path:Rt.toPathString(l.path),n(h,s,l)}},Rt.prototype._trace=function(l,n,s,h,p,y,I,A){let P;if(!l.length)return P={path:s,value:n,parent:h,parentProperty:p,hasArrExpr:I},this._handleCallback(P,y,"value"),P;const R=l[0],H=l.slice(1),U=[];function et(V){Array.isArray(V)?V.forEach(mt=>{U.push(mt)}):U.push(V)}if((typeof R!="string"||A)&&n&&Object.hasOwn(n,R))et(this._trace(H,n[R],Wt(s,R),n,R,y,I));else if(R==="*")this._walk(n,V=>{et(this._trace(H,n[V],Wt(s,V),n,V,y,!0,!0))});else if(R==="..")et(this._trace(H,n,s,h,p,y,I)),this._walk(n,V=>{typeof n[V]=="object"&&et(this._trace(l.slice(),n[V],Wt(s,V),n,V,y,!0))});else{if(R==="^")return this._hasParentSelector=!0,{path:s.slice(0,-1),expr:H,isParentSelector:!0};if(R==="~")return P={path:Wt(s,R),value:p,parent:h,parentProperty:null},this._handleCallback(P,y,"property"),P;if(R==="$")et(this._trace(H,n,s,null,null,y,I));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(R))et(this._slice(R,H,n,s,h,p,y));else if(R.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const V=R.replace(/^\?\((.*?)\)$/u,"$1"),mt=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(V);mt?this._walk(n,nt=>{const _t=[mt[2]],Ut=mt[1]?n[nt][mt[1]]:n[nt];this._trace(_t,Ut,s,h,p,y,!0).length>0&&et(this._trace(H,n[nt],Wt(s,nt),n,nt,y,!0))}):this._walk(n,nt=>{this._eval(V,n[nt],nt,s,h,p)&&et(this._trace(H,n[nt],Wt(s,nt),n,nt,y,!0))})}else if(R[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");et(this._trace(ue(this._eval(R,n,s.at(-1),s.slice(0,-1),h,p),H),n,s,h,p,y,I))}else if(R[0]==="@"){let V=!1;const mt=R.slice(1,-2);switch(mt){case"scalar":n&&["object","function"].includes(typeof n)||(V=!0);break;case"boolean":case"string":case"undefined":case"function":typeof n===mt&&(V=!0);break;case"integer":!Number.isFinite(n)||n%1||(V=!0);break;case"number":Number.isFinite(n)&&(V=!0);break;case"nonFinite":typeof n!="number"||Number.isFinite(n)||(V=!0);break;case"object":n&&typeof n===mt&&(V=!0);break;case"array":Array.isArray(n)&&(V=!0);break;case"other":V=this.currOtherTypeCallback(n,s,h,p);break;case"null":n===null&&(V=!0);break;default:throw new TypeError("Unknown value type "+mt)}if(V)return P={path:s,value:n,parent:h,parentProperty:p},this._handleCallback(P,y,"value"),P}else if(R[0]==="`"&&n&&Object.hasOwn(n,R.slice(1))){const V=R.slice(1);et(this._trace(H,n[V],Wt(s,V),n,V,y,I,!0))}else if(R.includes(",")){const V=R.split(",");for(const mt of V)et(this._trace(ue(mt,H),n,s,h,p,y,!0))}else!A&&n&&Object.hasOwn(n,R)&&et(this._trace(H,n[R],Wt(s,R),n,R,y,I,!0))}if(this._hasParentSelector)for(let V=0;V<U.length;V++){const mt=U[V];if(mt&&mt.isParentSelector){const nt=this._trace(mt.expr,n,mt.path,h,p,y,I);if(Array.isArray(nt)){U[V]=nt[0];const _t=nt.length;for(let Ut=1;Ut<_t;Ut++)V++,U.splice(V,0,nt[Ut])}else U[V]=nt}}return U},Rt.prototype._walk=function(l,n){if(Array.isArray(l)){const s=l.length;for(let h=0;h<s;h++)n(h)}else l&&typeof l=="object"&&Object.keys(l).forEach(s=>{n(s)})},Rt.prototype._slice=function(l,n,s,h,p,y,I){if(!Array.isArray(s))return;const A=s.length,P=l.split(":"),R=P[2]&&Number.parseInt(P[2])||1;let H=P[0]&&Number.parseInt(P[0])||0,U=P[1]&&Number.parseInt(P[1])||A;H=H<0?Math.max(0,H+A):Math.min(A,H),U=U<0?Math.max(0,U+A):Math.min(A,U);const et=[];for(let V=H;V<U;V+=R)this._trace(ue(V,n),s,h,p,y,I,!0).forEach(mt=>{et.push(mt)});return et},Rt.prototype._eval=function(l,n,s,h,p,y){this.currSandbox._$_parentProperty=y,this.currSandbox._$_parent=p,this.currSandbox._$_property=s,this.currSandbox._$_root=this.json,this.currSandbox._$_v=n;const I=l.includes("@path");I&&(this.currSandbox._$_path=Rt.toPathString(h.concat([s])));const A=this.currEval+"Script:"+l;if(!Rt.cache[A]){let P=l.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(I&&(P=P.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)Rt.cache[A]=new this.safeVm.Script(P);else if(this.currEval==="native")Rt.cache[A]=new this.vm.Script(P);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const R=this.currEval;Rt.cache[A]=new R(P)}else{if(typeof this.currEval!="function")throw new TypeError(`Unknown "eval" property "${this.currEval}"`);Rt.cache[A]={runInNewContext:R=>this.currEval(P,R)}}}try{return Rt.cache[A].runInNewContext(this.currSandbox)}catch(P){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+P.message+": "+l)}},Rt.cache={},Rt.toPathString=function(l){const n=l,s=n.length;let h="$";for(let p=1;p<s;p++)/^(~|\^|@.*?\(\))$/u.test(n[p])||(h+=/^[0-9*]+$/u.test(n[p])?"["+n[p]+"]":"['"+n[p]+"']");return h},Rt.toPointer=function(l){const n=l,s=n.length;let h="";for(let p=1;p<s;p++)/^(~|\^|@.*?\(\))$/u.test(n[p])||(h+="/"+n[p].toString().replaceAll("~","~0").replaceAll("/","~1"));return h},Rt.toPathArray=function(l){const{cache:n}=Rt;if(n[l])return n[l].concat();const s=[],h=l.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(p,y){return"[#"+(s.push(y)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(p,y){return"['"+y.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(p,y){return";"+y.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(p){const y=p.match(/#(\d+)/u);return y&&y[1]?s[y[1]]:p});return n[l]=h,n[l].concat()},Rt.prototype.safeVm={Script:class{constructor(l){this.code=l,this.ast=Lt(this.code)}runInNewContext(l){const n=Object.assign(Object.create(null),l);return Et.evalAst(this.ast,n)}}},Rt.prototype.vm={Script:class{constructor(l){this.code=l}runInNewContext(l){let n=this.code;const s=Object.keys(l),h=[];(function(A,P,R){const H=A.length;for(let U=0;U<H;U++)R(A[U])&&P.push(A.splice(U--,1)[0])})(s,h,A=>typeof l[A]=="function");const p=s.map(A=>l[A]);n=h.reduce((A,P)=>{let R=l[P].toString();return/function/u.test(R)||(R="function "+R),"var "+P+"="+R+";"+A},"")+n,/(['"])use strict\1/u.test(n)||s.includes("arguments")||(n="var arguments = undefined;"+n),n=n.replace(/;\s*$/u,"");const y=n.lastIndexOf(";"),I=y!==-1?n.slice(0,y+1)+" return "+n.slice(y+1):" return "+n;return new Function(...s,I)(...p)}}};var le=function(l,n){try{var s=Rt({path:n,json:l}),h=s==null?void 0:s[0];return h===void 0?void 0:h===null?"null":h}catch(p){return void M.w9.error(M.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Error extracting JSON value with path ".concat(n,":"),p)}},qt=function(l,n){try{var s=n.replace(/^\/\//,"").replace(/\/@/," ").split("/"),h=s[s.length-1],p=new RegExp("<".concat(h,"[^>]*>(.*?)</").concat(h,">"),"i"),y=l.match(p);return y?y[1]:void 0}catch(I){return void M.w9.error(M.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Error extracting HTML value with XPath ".concat(n,":"),I)}};function ne(l,n){var s=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!s){if(Array.isArray(l)||(s=function(P,R){if(P){if(typeof P=="string")return c(P,R);var H={}.toString.call(P).slice(8,-1);return H==="Object"&&P.constructor&&(H=P.constructor.name),H==="Map"||H==="Set"?Array.from(P):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?c(P,R):void 0}}(l))||n){s&&(l=s);var h=0,p=function(){};return{s:p,n:function(){return h>=l.length?{done:!0}:{done:!1,value:l[h++]}},e:function(P){throw P},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,I=!0,A=!1;return{s:function(){s=s.call(l)},n:function(){var P=s.next();return I=P.done,P},e:function(P){A=!0,y=P},f:function(){try{I||s.return==null||s.return()}finally{if(A)throw y}}}}function c(l,n){(n==null||n>l.length)&&(n=l.length);for(var s=0,h=Array(n);s<n;s++)h[s]=l[s];return h}function g(l){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.replace(/[[\]()*+?.,\\^$|#]/g,"\\$&"),p=function(R){for(var H,U=/{{(\w+)}}/g,et=[];(H=U.exec(R))!==null;)et.push(H[1]);return et}(l),y=[],I=ne(p);try{for(I.s();!(n=I.n()).done;){var A=n.value;if(s[A])h=h.replace("{{".concat(A,"}}"),s[A]);else{y.push(A);var P=A.endsWith("GRD")?"(.*)":"(.*?)";h=h.replace("{{".concat(A,"}}"),P)}}}catch(R){I.e(R)}finally{I.f()}return{pattern:h,allVars:p,unsubstitutedVars:y}}function m(l,n){return function(s){if(Array.isArray(s))return s}(l)||function(s,h){var p=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(p!=null){var y,I,A,P,R=[],H=!0,U=!1;try{if(A=(p=p.call(s)).next,h!==0)for(;!(H=(y=A.call(p)).done)&&(R.push(y.value),R.length!==h);H=!0);}catch(et){U=!0,I=et}finally{try{if(!H&&p.return!=null&&(P=p.return(),Object(P)!==P))return}finally{if(U)throw I}}return R}}(l,n)||function(s,h){if(s){if(typeof s=="string")return B(s,h);var p={}.toString.call(s).slice(8,-1);return p==="Object"&&s.constructor&&(p=s.constructor.name),p==="Map"||p==="Set"?Array.from(s):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?B(s,h):void 0}}(l,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(l,n){(n==null||n>l.length)&&(n=l.length);for(var s=0,h=Array(n);s<n;s++)h[s]=l[s];return h}function K(l){return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},K(l)}var W=function(l){return l?(l.match(/{{([^}]+)}}/g)||[]).map(function(n){return n.substring(2,n.length-2)}):[]},ct=function(l,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!l||!n)return s;var h=W(l),p=g(l,h).pattern,y=n.match(p);if(y&&y.length>1)for(var I=0;I<h.length;I++)y[I+1]&&(s[h[I]]=y[I+1]);return s},Bt=function(l,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!l||!n)return s;var h=W(l),p=g(l,{}).pattern,y=new RegExp(p),I=n.match(y);if(I&&I.length>1)for(var A=0;A<h.length;A++)I[A+1]&&(s[h[A]]=I[A+1]);return s},$t=function(l,n,s){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!l)return h;try{var p=null,y=function(V){if(!V||typeof V!="string")return!1;var mt=V.trim();return mt.startsWith("{")||mt.startsWith("[")}(l);if(y&&(p=function(V){try{return JSON.parse(V)}catch{return M.w9.warn(M.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Response looks like JSON but couldn't be parsed"),null}}(l)),n&&n.length>0&&s&&s.length>0)for(var I=0;I<n.length;I++){var A=n[I],P=s[I];if(!A.value)return;var R=W(A.value);if(R.length===0)return;var H=P;if(H){var U=null;if(H.jsonPath&&p)U=le(p,H.jsonPath);else if(H.xPath&&!y)U=qt(l,H.xPath);else if(H.regex){var et=l.match(new RegExp(H.regex));et&&et.length>1&&(U=et[1])}U!==void 0&&(K(U)==="object"&&U!==null?h[R[0]]=JSON.stringify(U):h[R[0]]=U===null?null:String(U))}}}catch(V){M.w9.error(M.Ey.CLAIM,"[PARAM-EXTRACTOR] Error extracting params from response:",V)}return h},se=function(l){var n={},s={};return Object.entries(l||{}).forEach(function(h){var p=m(h,2),y=p[0],I=p[1];y.toLowerCase().includes("secret")?s[y]=I:n[y]=I}),{publicParams:n,secretParams:s}},kt=t(379);function pt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return Nt(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(Nt(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,Nt(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,Nt(U,"constructor",R),Nt(R,"constructor",P),P.displayName="GeneratorFunction",Nt(R,p,"GeneratorFunction"),Nt(U),Nt(U,p,"Generator"),Nt(U,h,function(){return this}),Nt(U,"toString",function(){return"[object Generator]"}),(pt=function(){return{w:y,m:et}})()}function Nt(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Nt=function(y,I,A,P){function R(H,U){Nt(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},Nt(l,n,s,h)}function Xt(l,n){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);n&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),s.push.apply(s,h)}return s}function Jt(l){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Xt(Object(s),!0).forEach(function(h){Pe(l,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):Xt(Object(s)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(s,h))})}return l}function Pe(l,n,s){return(n=function(h){var p=function(y,I){if(pe(y)!="object"||!y)return y;var A=y[Symbol.toPrimitive];if(A!==void 0){var P=A.call(y,I);if(pe(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(y)}(h,"string");return pe(p)=="symbol"?p:p+""}(n))in l?Object.defineProperty(l,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[n]=s,l}function pe(l){return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pe(l)}function Nn(l,n){return function(s){if(Array.isArray(s))return s}(l)||function(s,h){var p=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(p!=null){var y,I,A,P,R=[],H=!0,U=!1;try{if(A=(p=p.call(s)).next,h!==0)for(;!(H=(y=A.call(p)).done)&&(R.push(y.value),R.length!==h);H=!0);}catch(et){U=!0,I=et}finally{try{if(!H&&p.return!=null&&(P=p.return(),Object(P)!==P))return}finally{if(U)throw I}}return R}}(l,n)||function(s,h){if(s){if(typeof s=="string")return kn(s,h);var p={}.toString.call(s).slice(8,-1);return p==="Object"&&s.constructor&&(p=s.constructor.name),p==="Map"||p==="Set"?Array.from(s):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?kn(s,h):void 0}}(l,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kn(l,n){(n==null||n>l.length)&&(n=l.length);for(var s=0,h=Array(n);s<n;s++)h[s]=l[s];return h}function xn(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}var oo=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:135,n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];l<=0&&(l=135);var s="Chrome/".concat(l,".0.0.0"),h=n?" Mobile":"";return"Mozilla/5.0 ".concat("(Linux; Android 10; K)"," ").concat("AppleWebKit/537.36 (KHTML, like Gecko)"," ").concat(s).concat(h," ").concat("Safari/537.36")},xu=function(){return new Promise(function(l,n){var s=setTimeout(function(){chrome.runtime.onMessage.removeListener(h),n(new Error("Timeout: No response from offscreen document for private key request."))},1e4),h=function(p,y){return p.action!==i.wx.GET_PRIVATE_KEY_RESPONSE||p.source!==i.J_.OFFSCREEN||p.target!==i.J_.BACKGROUND||(clearTimeout(s),chrome.runtime.onMessage.removeListener(h),p.success&&p.privateKey?(M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Received private key from offscreen document"),l(p.privateKey)):(M.w9.error(M.Ey.CLAIM,"[CLAIM-CREATOR] Failed to get private key from offscreen:",p.error),n(new Error(p.error||"Unknown error getting private key from offscreen document."))),!1)};chrome.runtime.onMessage.addListener(h),M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Requesting private key from offscreen document"),chrome.runtime.sendMessage({action:i.wx.GET_PRIVATE_KEY,source:i.J_.BACKGROUND,target:i.J_.OFFSCREEN},function(p){chrome.runtime.lastError&&(clearTimeout(s),chrome.runtime.onMessage.removeListener(h),M.w9.error(M.Ey.CLAIM,"[CLAIM-CREATOR] Error sending GET_PRIVATE_KEY message:",chrome.runtime.lastError.message),n(new Error("Error sending message to offscreen document: ".concat(chrome.runtime.lastError.message))))})})},_u=function(){var l,n=(l=pt().m(function s(h,p,y,I){var A,P,R,H,U,et,V,mt,nt,_t,Ut,zt,ce,re,oe,ft,$,tt;return pt().w(function(St){for(;;)switch(St.p=St.n){case 0:return M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Creating claim object from request data"),St.p=1,M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Ensuring offscreen document is ready..."),St.n=2,X();case 2:M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Offscreen document is ready."),St.n=4;break;case 3:throw St.p=3,$=St.v,M.w9.error(M.Ey.CLAIM,"[CLAIM-CREATOR] Failed to ensure offscreen document:",$),new Error("Failed to initialize offscreen document: ".concat($.message));case 4:return R=typeof navigator<"u"&&navigator.userAgent||oo(),H=["user-agent","accept","accept-language","accept-encoding","sec-fetch-mode","sec-fetch-site","sec-fetch-user","origin","x-requested-with","sec-ch-ua","sec-ch-ua-mobile"],et={},(U={}).url=p.urlType==="TEMPLATE"?p.url:h.url,U.method=h.method||"GET",h.headers&&(M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] request.headers: ",h.headers),V={"Sec-Fetch-Mode":"same-origin","Sec-Fetch-Site":"same-origin","User-Agent":R},mt={Referer:h.referer&&String(h.referer)||I||origin||""},Object.entries(h.headers).forEach(function(at){var dt=Nn(at,2),st=dt[0],Dt=dt[1],it=st.toLowerCase();H.includes(it)?V[st]=Dt:mt[st]=Dt}),Object.keys(V).length>0&&(U.headers=V),Object.keys(mt).length>0&&(et.headers=mt)),h.body&&(p!=null&&(nt=p.bodySniff)!==null&&nt!==void 0&&nt.enabled?U.body=p.bodySniff.template:U.body=h.body),console.log(h.cookieStr,"request.cookieStr"),h.cookieStr&&(et.cookieStr=h.cookieStr),_t={},h!=null&&h.extractedParams&&pe(h.extractedParams)==="object"&&(_t=Jt(Jt({},_t),h.extractedParams)),p.urlType==="TEMPLATE"&&h.url&&(_t=Jt(Jt({},_t),ct(p.url,h.url))),p!=null&&(A=p.bodySniff)!==null&&A!==void 0&&A.enabled&&h.body&&(_t=Jt(Jt({},_t),Bt(p.bodySniff.template,h.body))),h.responseText&&p.responseMatches&&(_t=Jt(Jt({},_t),$t(h.responseText,p.responseMatches,p.responseRedactions||[]))),Ut=se(_t),zt=Ut.publicParams,ce=Ut.secretParams,Object.keys(zt).length>0&&(U.paramValues=zt),Object.keys(ce).length>0&&(et.paramValues=ce),p.responseMatches&&(U.responseMatches=p.responseMatches.map(function(at){return{value:at.value,type:at.type||"contains",invert:at.invert||!1}})),p.responseRedactions&&(U.responseRedactions=p.responseRedactions.map(function(at){var dt={};return Object.entries(at).forEach(function(st){var Dt=Nn(st,2),it=Dt[0],rt=Dt[1];it!=="hash"&&(it!=="jsonPath"&&it!=="xPath"||rt&&rt!=="")&&(dt[it]=rt)}),dt})),p.responseSelections&&(U.responseSelections=p.responseSelections.map(function(at){var dt={};return"value"in at&&(dt.value=at.value),"type"in at&&(dt.type=at.type),"invert"in at&&(dt.invert=at.invert),dt})),p.additionalClientOptions&&(U.additionalClientOptions=p.additionalClientOptions),St.p=5,St.n=6,xu();case 6:re=St.v,St.n=8;break;case 7:throw St.p=7,tt=St.v,M.w9.error(M.Ey.CLAIM,"[CLAIM-CREATOR] Could not obtain private key:",tt),new Error("Could not obtain owner private key: ".concat(tt.message));case 8:if(oe=(P=p==null?void 0:p.geoLocation)!==null&&P!==void 0?P:"",console.log(oe,"geoLocation",p),oe!=="{{DYNAMIC_GEO}}"){St.n=10;break}return St.n=9,(0,kt.C)();case 9:oe=St.v;case 10:return U.geoLocation=oe,ft={name:"http",sessionId:y,params:U,secretParams:et,ownerPrivateKey:re,client:{url:"wss://attestor.reclaimprotocol.org/ws"}},console.log(JSON.stringify(ft,null,2)),M.w9.info(M.Ey.CLAIM,"[CLAIM-CREATOR] Claim object created successfully"),St.a(2,ft)}},s,null,[[5,7],[1,3]])}),function(){var s=this,h=arguments;return new Promise(function(p,y){var I=l.apply(s,h);function A(R){xn(I,p,y,A,P,"next",R)}function P(R){xn(I,p,y,A,P,"throw",R)}A(void 0)})});return function(s,h,p,y){return n.apply(this,arguments)}}();function _n(l){return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_n(l)}function $i(l,n){for(var s=0;s<n.length;s++){var h=n[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,Lu(h.key),h)}}function Lu(l){var n=function(s,h){if(_n(s)!="object"||!s)return s;var p=s[Symbol.toPrimitive];if(p!==void 0){var y=p.call(s,h);if(_n(y)!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}(l,"string");return _n(n)=="symbol"?n:n+""}var Uu=function(){return l=function h(){(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,h),this.sessionTimer=null,this.sessionTimerDuration=3e4,this.sessionTimerPaused=!1,this.sessionTimerRemainingTime=0,this.sessionTimerStartTime=0,this.onSessionTimeout=null},(n=[{key:"setCallbacks",value:function(h){this.onSessionTimeout=h}},{key:"startSessionTimer",value:function(){var h=this;M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Starting session timer"),this.clearSessionTimer(),this.sessionTimerStartTime=Date.now(),this.sessionTimer=setTimeout(function(){h.sessionTimer!==null?(M.w9.error(M.Ey.SESSION_TIMER,"[SESSION TIMER] Session timer expired"),h.onSessionTimeout&&h.onSessionTimeout("Session timeout: No proofs generated within time limit")):M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Timer was already cleared, ignoring timeout")},this.sessionTimerDuration)}},{key:"resetSessionTimer",value:function(){M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Resetting session timer"),this.clearSessionTimer(),this.startSessionTimer()}},{key:"clearSessionTimer",value:function(){this.sessionTimer&&(clearTimeout(this.sessionTimer),this.sessionTimer=null)}},{key:"pauseSessionTimer",value:function(){if(this.sessionTimer&&!this.sessionTimerPaused){M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Pausing session timer");var h=Date.now()-this.sessionTimerStartTime;this.sessionTimerRemainingTime=Math.max(0,this.sessionTimerDuration-h),this.clearSessionTimer(),this.sessionTimerPaused=!0}}},{key:"resumeSessionTimer",value:function(){var h=this;this.sessionTimerPaused&&(M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Resuming session timer with remaining time:",this.sessionTimerRemainingTime),this.sessionTimer=setTimeout(function(){M.w9.error(M.Ey.SESSION_TIMER,"[SESSION TIMER] Session timer expired"),h.onSessionTimeout&&h.onSessionTimeout("Session timeout: No proofs generated within time limit")},this.sessionTimerRemainingTime),this.sessionTimerStartTime=Date.now()-(this.sessionTimerDuration-this.sessionTimerRemainingTime),this.sessionTimerPaused=!1)}},{key:"clearAllTimers",value:function(){M.w9.info(M.Ey.SESSION_TIMER,"[SESSION TIMER] Clearing all timers"),this.clearSessionTimer(),this.sessionTimerPaused=!1,this.sessionTimerRemainingTime=0,this.sessionTimerStartTime=0}},{key:"setTimerDuration",value:function(h){h&&typeof h=="number"&&(this.sessionTimerDuration=h)}}])&&$i(l.prototype,n),s&&$i(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,n,s}();function Ln(l){return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ln(l)}function Du(l,n){return function(s){if(Array.isArray(s))return s}(l)||function(s,h){var p=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(p!=null){var y,I,A,P,R=[],H=!0,U=!1;try{if(A=(p=p.call(s)).next,h!==0)for(;!(H=(y=A.call(p)).done)&&(R.push(y.value),R.length!==h);H=!0);}catch(et){U=!0,I=et}finally{try{if(!H&&p.return!=null&&(P=p.return(),Object(P)!==P))return}finally{if(U)throw I}}return R}}(l,n)||Vi(l,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hi(l,n){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);n&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),s.push.apply(s,h)}return s}function io(l){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Hi(Object(s),!0).forEach(function(h){Bu(l,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):Hi(Object(s)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(s,h))})}return l}function Bu(l,n,s){return(n=function(h){var p=function(y,I){if(Ln(y)!="object"||!y)return y;var A=y[Symbol.toPrimitive];if(A!==void 0){var P=A.call(y,I);if(Ln(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(y)}(h,"string");return Ln(p)=="symbol"?p:p+""}(n))in l?Object.defineProperty(l,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[n]=s,l}function jo(l,n){var s=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!s){if(Array.isArray(l)||(s=Vi(l))||n){s&&(l=s);var h=0,p=function(){};return{s:p,n:function(){return h>=l.length?{done:!0}:{done:!1,value:l[h++]}},e:function(P){throw P},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,I=!0,A=!1;return{s:function(){s=s.call(l)},n:function(){var P=s.next();return I=P.done,P},e:function(P){A=!0,y=P},f:function(){try{I||s.return==null||s.return()}finally{if(A)throw y}}}}function Vi(l,n){if(l){if(typeof l=="string")return Wi(l,n);var s={}.toString.call(l).slice(8,-1);return s==="Object"&&l.constructor&&(s=l.constructor.name),s==="Map"||s==="Set"?Array.from(l):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Wi(l,n):void 0}}function Wi(l,n){(n==null||n>l.length)&&(n=l.length);for(var s=0,h=Array(n);s<n;s++)h[s]=l[s];return h}function fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return Ce(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(Ce(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,Ce(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,Ce(U,"constructor",R),Ce(R,"constructor",P),P.displayName="GeneratorFunction",Ce(R,p,"GeneratorFunction"),Ce(U),Ce(U,p,"Generator"),Ce(U,h,function(){return this}),Ce(U,"toString",function(){return"[object Generator]"}),(fe=function(){return{w:y,m:et}})()}function Ce(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Ce=function(y,I,A,P){function R(H,U){Ce(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},Ce(l,n,s,h)}function zi(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function Xe(l){return function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){zi(y,h,p,I,A,"next",P)}function A(P){zi(y,h,p,I,A,"throw",P)}I(void 0)})}}function Yi(l,n){return Ji.apply(this,arguments)}function Ji(){return(Ji=Xe(fe().m(function l(n,s){var h,p,y;return fe().w(function(I){for(;;)switch(I.p=I.n){case 0:if(I.p=0,n.providerData=null,n.parameters={},n.providerId=null,n.appId=null,n.sessionId=null,n.callbackUrl=null,n.generatedProofs=new Map,n.filteredRequests=new Map,n.initPopupMessage=new Map,n.providerDataMessage=new Map,n.providerRequestsByHash=new Map,n.aborted=!1,n.sessionTimerManager.clearAllTimers(),n.firstRequestReceived=!1,s.providerId){I.n=1;break}throw new Error("Provider ID not found");case 1:return n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:s.sessionId||n.sessionId||"unknown",providerId:s.providerId||n.providerId||"unknown",appId:s.applicationId||n.appId||"unknown"}),n.bgLogger.info("[BACKGROUND] Fetching provider data from the backend for provider Id ".concat(s.providerId)),I.n=2,n.fetchProviderData(s.providerId,s.sessionId,s.applicationId);case 2:if(h=I.v,n.providerData=h,n.providerId=s.providerId,s.parameters&&(n.parameters=s.parameters),typeof s.callbackUrl=="string"&&(n.callbackUrl=s.callbackUrl),s.sessionId&&(n.sessionId=s.sessionId),s.applicationId&&(n.appId=s.applicationId),h){I.n=3;break}throw new Error("Provider data not found");case 3:return p=h.loginUrl,chrome.tabs.create({url:p},function(A){var P,R,H;n.activeTabId=A.id,n.bgLogger.info("[BACKGROUND] New tab created for provider ".concat(s.providerId," with tab id ").concat(A.id)),n.managedTabs.add(A.id);var U=((P=n.providerData)===null||P===void 0?void 0:P.name)||"Default Provider",et=((R=n.providerData)===null||R===void 0?void 0:R.description)||"Default Description",V=((H=n.providerData)===null||H===void 0||(H=H.verificationConfig)===null||H===void 0?void 0:H.dataRequired)||"Default Data",mt=n.sessionId||"unknown";if(A.id){var nt={action:n.MESSAGE_ACTIONS.SHOW_PROVIDER_VERIFICATION_POPUP,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{providerName:U,description:et,dataRequired:V,sessionId:mt}},_t={action:n.MESSAGE_ACTIONS.PROVIDER_DATA_READY,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{providerData:n.providerData,parameters:n.parameters,sessionId:n.sessionId,callbackUrl:n.callbackUrl,providerId:n.providerId,appId:n.appId}};n.initPopupMessage||(n.initPopupMessage=new Map),n.initPopupMessage.set(A.id,{message:nt}),n.providerDataMessage.set(A.id,{message:_t})}else n.bgLogger.error("[BACKGROUND] New tab does not have an ID, cannot queue message for popup.");n.updateSessionStatus(s.sessionId,n.RECLAIM_SESSION_STATUS.USER_STARTED_VERIFICATION,s.providerId,s.applicationId).catch(function(Ut){n.bgLogger.error("[BACKGROUND] Error updating session status: ".concat(Ut==null?void 0:Ut.message))})}),I.a(2,{success:!0,message:"Verification started, redirecting to provider login page"});case 4:throw I.p=4,y=I.v,n.bgLogger.error("[BACKGROUND] Error starting verification: ".concat(y==null?void 0:y.message)),n.activeSessionId=null,y;case 5:return I.a(2)}},l,null,[[0,4]])}))).apply(this,arguments)}function Qi(l,n,s){return Xi.apply(this,arguments)}function Xi(){return(Xi=Xe(fe().m(function l(n,s,h){var p;return fe().w(function(y){for(;;)switch(y.p=y.n){case 0:if(n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),n.bgLogger.error("[BACKGROUND] Failing session: ".concat(s)),n.sessionTimerManager.clearAllTimers(),n.aborted=!0,!n.sessionId){y.n=4;break}return y.p=1,y.n=2,n.updateSessionStatus(n.sessionId,n.RECLAIM_SESSION_STATUS.PROOF_GENERATION_FAILED,n.providerId,n.appId);case 2:n.bgLogger.info("[BACKGROUND] Updated session status to failed: ".concat(n.sessionId)),y.n=4;break;case 3:y.p=3,p=y.v,n.bgLogger.error("[BACKGROUND] Error updating session status to failed: ".concat(p==null?void 0:p.message));case 4:if(n.activeTabId&&chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:h,sessionId:n.sessionId}}).catch(function(I){n.bgLogger.error("[BACKGROUND] Error notifying content script of session failure: ".concat(I==null?void 0:I.message))}),!n.originalTabId){y.n=8;break}return y.p=5,y.n=6,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:s,sessionId:n.sessionId}});case 6:y.n=8;break;case 7:y.p=7,y.v;case 8:return y.p=8,n.bgLogger.info("[BACKGROUND] Proof generation failed, Broadcasting to popup/options pages: ".concat(s)),y.n=9,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,data:{error:s,sessionId:n.sessionId}});case 9:y.n=11;break;case 10:y.p=10,y.v;case 11:n.proofGenerationQueue=[],n.isProcessingQueue=!1,n.activeSessionId=null;case 12:return y.a(2)}},l,null,[[8,10],[5,7],[1,3]])}))).apply(this,arguments)}function ju(l){return Zi.apply(this,arguments)}function Zi(){return(Zi=Xe(fe().m(function l(n){var s,h,p,y,I,A,P,R,H,U,et,V,mt;return fe().w(function(nt){for(;;)switch(nt.p=nt.n){case 0:if(nt.p=0,n.generatedProofs.size!==0){nt.n=1;break}return nt.a(2);case 1:if(n.generatedProofs.size===n.providerData.requestData.length){nt.n=2;break}return nt.a(2);case 2:if(!n.expectManyClaims){nt.n=3;break}return nt.a(2);case 3:n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),n.bgLogger.info("[BACKGROUND] Submitting proofs..."),n.sessionTimerManager.clearAllTimers(),s=[],h=jo(n.providerData.requestData);try{for(h.s();!(p=h.n()).done;)y=p.value,n.generatedProofs.has(y.requestHash)&&(I=n.generatedProofs.get(y.requestHash),A=n.formatProof(I,y),s.push(A))}catch(_t){h.e(_t)}finally{h.f()}if(s=s.map(function(_t){var Ut;return io(io({},_t),{},{publicData:(Ut=n.publicData)!==null&&Ut!==void 0?Ut:null})}),P=!1,!(n.callbackUrl&&typeof n.callbackUrl=="string"&&n.callbackUrl.length>0)){nt.n=16;break}return nt.p=4,n.bgLogger.info("[BACKGROUND] Submitting proofs to callback URL: ".concat(n.callbackUrl)),nt.n=5,n.submitProofOnCallback(s,n.callbackUrl,n.sessionId,n.providerId,n.appId);case 5:P=!0,nt.n=15;break;case 6:return nt.p=6,R=nt.v,nt.p=7,n.bgLogger.info("[BACKGROUND] Notifying original tab of proof submission failure: ".concat(R.message)),nt.n=8,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:R.message,sessionId:n.sessionId}});case 8:nt.n=10;break;case 9:nt.p=9,nt.v;case 10:return n.bgLogger.info("[BACKGROUND] Notifying active tab of proof submission failure: ".concat(R.message)),chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:R.message,sessionId:n.sessionId}}),nt.p=11,n.bgLogger.info("[BACKGROUND] Broadcasting to runtime of proof submission failure: ".concat(R.message)),nt.n=12,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,data:{error:R.message,sessionId:n.sessionId}});case 12:nt.n=14;break;case 13:nt.p=13,nt.v;case 14:throw n.bgLogger.error("[BACKGROUND] Error submitting my poor proofs: ".concat(R.message)),R;case 15:nt.n=20;break;case 16:if(!n.sessionId){nt.n=20;break}return nt.p=17,n.bgLogger.info("[BACKGROUND] Updating status to PROOF_GENERATION_SUCCESS"),nt.n=18,n.updateSessionStatus(n.sessionId,n.RECLAIM_SESSION_STATUS.PROOF_GENERATION_SUCCESS,n.providerId,n.appId);case 18:nt.n=20;break;case 19:nt.p=19,H=nt.v,n.bgLogger.error("[BACKGROUND] Error updating status to PROOF_GENERATION_SUCCESS: ".concat(H==null?void 0:H.message));case 20:if(!n.activeTabId){nt.n=24;break}return nt.p=21,n.bgLogger.info("[BACKGROUND] Proof submitted, Notifying content script with proofs"),nt.n=22,chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:s,submitted:P,sessionId:n.sessionId}});case 22:nt.n=24;break;case 23:nt.p=23,U=nt.v,n.bgLogger.error("[BACKGROUND] Error notifying content script: ".concat(U==null?void 0:U.message));case 24:if(!n.originalTabId){nt.n=28;break}return nt.p=25,n.bgLogger.info("[BACKGROUND] Proof submitted, Notifying original tab with proofs"),nt.n=26,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:s,submitted:P,sessionId:n.sessionId}});case 26:nt.n=28;break;case 27:nt.p=27,et=nt.v,n.bgLogger.error("[BACKGROUND] Error notifying original tab: ".concat(et==null?void 0:et.message));case 28:return nt.p=28,n.bgLogger.info("[BACKGROUND] Proof submitted, Broadcasting to runtime"),nt.n=29,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,data:{formattedProofs:s,submitted:P,sessionId:n.sessionId}});case 29:nt.n=31;break;case 30:nt.p=30,V=nt.v,n.bgLogger.error("[BACKGROUND] Error broadcasting to runtime: ".concat(V==null?void 0:V.message));case 31:if(n.originalTabId)try{setTimeout(Xe(fe().m(function _t(){return fe().w(function(Ut){for(;;)switch(Ut.n){case 0:return Ut.n=1,chrome.tabs.update(n.originalTabId,{active:!0});case 1:if(!n.activeTabId){Ut.n=3;break}return Ut.n=2,chrome.tabs.remove(n.activeTabId);case 2:n.activeTabId=null;case 3:n.originalTabId=null;case 4:return Ut.a(2)}},_t)})),3e3)}catch(_t){n.bgLogger.error("[BACKGROUND] Error navigating back or closing tab: ".concat(_t==null?void 0:_t.message))}else if(n.activeTabId)try{setTimeout(Xe(fe().m(function _t(){return fe().w(function(Ut){for(;;)switch(Ut.n){case 0:return Ut.n=1,chrome.tabs.remove(n.activeTabId);case 1:n.activeTabId=null;case 2:return Ut.a(2)}},_t)})),3e3)}catch{}return n.activeSessionId=null,nt.a(2,{success:!0});case 32:throw nt.p=32,mt=nt.v,n.bgLogger.error("[BACKGROUND] Error submitting proof: ".concat(mt==null?void 0:mt.message)),n.activeSessionId=null,mt;case 33:return nt.a(2)}},l,null,[[28,30],[25,27],[21,23],[17,19],[11,13],[7,9],[4,6],[0,32]])}))).apply(this,arguments)}function ts(l){return es.apply(this,arguments)}function es(){return(es=Xe(fe().m(function l(n){var s,h,p,y,I,A,P,R,H,U,et,V,mt,nt,_t,Ut,zt,ce,re,oe,ft,$,tt,St;return fe().w(function(at){for(;;)switch(at.p=at.n){case 0:if(at.p=0,!n.expectManyClaims){at.n=1;break}return at.a(2);case 1:if(n.sessionTimerManager.clearAllTimers(),n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),n.bgLogger.info("[BACKGROUND] Submitting proofs!!!"),n.generatedProofs.size!==0){at.n=2;break}return at.a(2);case 2:if(!(h=Array.isArray((s=n.providerData)===null||s===void 0?void 0:s.requestData)&&n.providerData.requestData.length>0)){at.n=3;break}if(p=n.providerData.requestData.filter(function(dt){return n.generatedProofs.has(dt.requestHash)}).length,p===n.providerData.requestData.length){at.n=3;break}return at.a(2);case 3:if(y=[],I=new Set,h){A=jo(n.providerData.requestData);try{for(A.s();!(P=A.n()).done;)R=P.value,n.generatedProofs.has(R.requestHash)&&(H=n.generatedProofs.get(R.requestHash),y.push(n.formatProof(H,R)),I.add(R.requestHash))}catch(dt){A.e(dt)}finally{A.f()}}U=jo(n.generatedProofs.entries()),at.p=4,U.s();case 5:if((et=U.n()).done){at.n=8;break}if(V=Du(et.value,2),mt=V[0],nt=V[1],!I.has(mt)){at.n=6;break}return at.a(3,7);case 6:_t=n.providerRequestsByHash.get(mt)||{url:"",expectedPageUrl:"",urlType:"EXACT",method:"GET",responseMatches:[],responseRedactions:[],requestHash:mt},y.push(n.formatProof(nt,_t));case 7:at.n=5;break;case 8:at.n=10;break;case 9:at.p=9,ce=at.v,U.e(ce);case 10:return at.p=10,U.f(),at.f(10);case 11:if(Ut=y.map(function(dt){var st;return io(io({},dt),{},{publicData:(st=n.publicData)!==null&&st!==void 0?st:null})}),console.log("finalProofs",{finalProofs:Ut}),zt=!1,!(n.callbackUrl&&typeof n.callbackUrl=="string"&&n.callbackUrl.length>0)){at.n=24;break}return at.p=12,n.bgLogger.info("[BACKGROUND] Submitting proofs to callback URL: ".concat(n.callbackUrl)),at.n=13,n.submitProofOnCallback(Ut,n.callbackUrl,n.sessionId,n.providerId,n.appId);case 13:zt=!0,at.n=23;break;case 14:return at.p=14,re=at.v,at.p=15,n.bgLogger.info("[BACKGROUND] Notifying original tab of proof submission failure: ".concat(re.message)),at.n=16,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:re.message,sessionId:n.sessionId}});case 16:at.n=18;break;case 17:at.p=17,oe=at.v,n.bgLogger.error("[BACKGROUND] Error notifying original tab of proof submission failure: ".concat(oe==null?void 0:oe.message));case 18:return n.bgLogger.info("[BACKGROUND] Notifying active tab of proof submission failure: ".concat(re.message)),chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:re.message,sessionId:n.sessionId}}),at.p=19,n.bgLogger.info("[BACKGROUND] Broadcasting to runtime of proof submission failure: ".concat(re.message)),at.n=20,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,data:{error:re.message,sessionId:n.sessionId}});case 20:at.n=22;break;case 21:at.p=21,at.v;case 22:throw n.bgLogger.error("[BACKGROUND] Error submitting my poor proofs: ".concat(re.message)),re;case 23:at.n=28;break;case 24:if(!n.sessionId){at.n=28;break}return at.p=25,n.bgLogger.info("[BACKGROUND] Updating status to PROOF_GENERATION_SUCCESS"),at.n=26,n.updateSessionStatus(n.sessionId,n.RECLAIM_SESSION_STATUS.PROOF_GENERATION_SUCCESS,n.providerId,n.appId);case 26:at.n=28;break;case 27:at.p=27,ft=at.v,n.bgLogger.error("[BACKGROUND] Error updating status to PROOF_GENERATION_SUCCESS: ".concat(ft==null?void 0:ft.message));case 28:if(!n.activeTabId){at.n=32;break}return at.p=29,n.bgLogger.info("[BACKGROUND] Proof submitted, Notifying content script with proofs"),at.n=30,chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:y,submitted:zt,sessionId:n.sessionId}});case 30:at.n=32;break;case 31:at.p=31,$=at.v,n.bgLogger.error("[BACKGROUND] Error notifying content script: ".concat($==null?void 0:$.message));case 32:if(!n.originalTabId){at.n=36;break}return at.p=33,n.bgLogger.info("[BACKGROUND] Proof submitted, Notifying original tab with proofs"),at.n=34,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:y,submitted:zt,sessionId:n.sessionId}});case 34:at.n=36;break;case 35:at.p=35,tt=at.v,n.bgLogger.error("[BACKGROUND] Error notifying original tab: ".concat(tt==null?void 0:tt.message));case 36:return at.p=36,n.bgLogger.info("[BACKGROUND] Proof submitted, Broadcasting to runtime"),at.n=37,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_SUBMITTED,data:{formattedProofs:y,submitted:zt,sessionId:n.sessionId}});case 37:at.n=39;break;case 38:at.p=38,at.v;case 39:if(n.originalTabId)try{setTimeout(Xe(fe().m(function dt(){return fe().w(function(st){for(;;)switch(st.n){case 0:return st.n=1,chrome.tabs.update(n.originalTabId,{active:!0});case 1:if(!n.activeTabId){st.n=3;break}return st.n=2,chrome.tabs.remove(n.activeTabId);case 2:n.activeTabId=null;case 3:n.originalTabId=null;case 4:return st.a(2)}},dt)})),3e3)}catch(dt){n.bgLogger.error("[BACKGROUND] Error navigating back or closing tab: ".concat(dt==null?void 0:dt.message))}else if(n.activeTabId)try{setTimeout(Xe(fe().m(function dt(){return fe().w(function(st){for(;;)switch(st.n){case 0:return st.n=1,chrome.tabs.remove(n.activeTabId);case 1:n.activeTabId=null;case 2:return st.a(2)}},dt)})),3e3)}catch{}return n.activeSessionId=null,at.a(2,{success:!0});case 40:throw at.p=40,St=at.v,console.log(St),n.bgLogger.error("[BACKGROUND] Error submitting proof: ".concat(St==null?void 0:St.message)),n.activeSessionId=null,St;case 41:return at.a(2)}},l,null,[[36,38],[33,35],[29,31],[25,27],[19,21],[15,17],[12,14],[4,9,10,11],[0,40]])}))).apply(this,arguments)}function rs(l,n){return ns.apply(this,arguments)}function ns(){return(ns=Xe(fe().m(function l(n,s){var h,p,y,I;return fe().w(function(A){for(;;)switch(A.p=A.n){case 0:if(A.p=0,n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),n.bgLogger.info("[BACKGROUND] Cancelling session"),n.sessionTimerManager.clearAllTimers(),n.aborted=!0,!n.sessionId){A.n=4;break}return A.p=1,n.bgLogger.info("[BACKGROUND] Proof generation failed, Updating status on cancel"),A.n=2,n.updateSessionStatus(n.sessionId,n.RECLAIM_SESSION_STATUS.PROOF_GENERATION_FAILED,n.providerId,n.appId);case 2:A.n=4;break;case 3:A.p=3,h=A.v,n.bgLogger.error("[BACKGROUND] Error updating status on cancel: ".concat(h==null?void 0:h.message));case 4:if(!n.activeTabId){A.n=8;break}return A.p=5,n.bgLogger.info("[BACKGROUND] Proof generation failed, Notifying content on cancel"),A.n=6,chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:"Cancelled by user",sessionId:n.sessionId}});case 6:A.n=8;break;case 7:A.p=7,p=A.v,n.bgLogger.error("[BACKGROUND] Error notifying content on cancel: ".concat(p==null?void 0:p.message));case 8:if(!n.originalTabId){A.n=12;break}return A.p=9,n.bgLogger.info("[BACKGROUND] Proof generation failed, Notifying original tab on cancel"),A.n=10,chrome.tabs.sendMessage(n.originalTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:"Cancelled by user",sessionId:n.sessionId}});case 10:A.n=12;break;case 11:A.p=11,A.v;case 12:return A.p=12,n.bgLogger.info("[BACKGROUND] Proof generation failed, Broadcasting to runtime on cancel"),A.n=13,chrome.runtime.sendMessage({action:n.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,data:{error:"Cancelled by user",sessionId:n.sessionId}});case 13:A.n=15;break;case 14:A.p=14,A.v;case 15:if(!n.originalTabId){A.n=16;break}try{setTimeout(Xe(fe().m(function P(){return fe().w(function(R){for(;;)switch(R.n){case 0:return R.n=1,chrome.tabs.update(n.originalTabId,{active:!0});case 1:if(!n.activeTabId){R.n=3;break}return R.n=2,chrome.tabs.remove(n.activeTabId);case 2:n.activeTabId=null;case 3:n.originalTabId=null;case 4:return R.a(2)}},P)})),200)}catch(P){n.bgLogger.error("[BACKGROUND] Error closing tab on cancel: ".concat(P==null?void 0:P.message))}A.n=20;break;case 16:if(!n.activeTabId){A.n=20;break}return A.p=17,A.n=18,chrome.tabs.remove(n.activeTabId);case 18:n.activeTabId=null,A.n=20;break;case 19:A.p=19,y=A.v,n.bgLogger.error("[BACKGROUND] Error closing active tab on cancel: ".concat(y==null?void 0:y.message));case 20:n.proofGenerationQueue=[],n.isProcessingQueue=!1,n.providerData=null,n.parameters={},n.providerId=null,n.appId=null,n.sessionId=null,n.callbackUrl=null,n.providerRequestsByHash=new Map,n.managedTabs.clear(),n.activeSessionId=null,A.n=22;break;case 21:A.p=21,I=A.v,n.activeSessionId=null,n.bgLogger.error("[BACKGROUND] Error during cancelSession: ".concat(I==null?void 0:I.message));case 22:return A.a(2)}},l,null,[[17,19],[12,14],[9,11],[5,7],[1,3],[0,21]])}))).apply(this,arguments)}function Go(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return Ne(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(Ne(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,Ne(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,Ne(U,"constructor",R),Ne(R,"constructor",P),P.displayName="GeneratorFunction",Ne(R,p,"GeneratorFunction"),Ne(U),Ne(U,p,"Generator"),Ne(U,h,function(){return this}),Ne(U,"toString",function(){return"[object Generator]"}),(Go=function(){return{w:y,m:et}})()}function Ne(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Ne=function(y,I,A,P){function R(H,U){Ne(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},Ne(l,n,s,h)}function os(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function Fo(){var l;return l=Go().m(function n(s,h,p,y){var I,A,P,R,H,U,et,V,mt,nt,_t,Ut,zt,ce,re,oe,ft,$,tt,St,at,dt,st,Dt,it,rt,bt,ot,Zt,Ft,qo,Ko,Se,qr,Kr,so;return Go().w(function(yt){for(;;)switch(yt.p=yt.n){case 0:P=h.action,R=h.source,H=h.target,U=h.data,yt.p=1,Se=P,yt.n=Se===s.MESSAGE_ACTIONS.CONTENT_SCRIPT_LOADED?2:Se===s.MESSAGE_ACTIONS.REQUEST_PROVIDER_DATA?4:Se===s.MESSAGE_ACTIONS.CHECK_IF_MANAGED_TAB?5:Se===s.MESSAGE_ACTIONS.START_VERIFICATION?6:Se===s.MESSAGE_ACTIONS.CANCEL_VERIFICATION?12:Se===s.MESSAGE_ACTIONS.OFFSCREEN_DOCUMENT_READY?16:Se===s.MESSAGE_ACTIONS.CLOSE_CURRENT_TAB?17:Se===s.MESSAGE_ACTIONS.FILTERED_REQUEST_FOUND?18:Se===s.MESSAGE_ACTIONS.GET_CURRENT_TAB_ID?24:Se===s.MESSAGE_ACTIONS.UPDATE_PUBLIC_DATA?25:Se===s.MESSAGE_ACTIONS.UPDATE_EXPECT_MANY_CLAIMS?26:Se===s.MESSAGE_ACTIONS.GET_PARAMETERS?33:Se===s.MESSAGE_ACTIONS.REPORT_PROVIDER_ERROR?34:Se===s.MESSAGE_ACTIONS.REQUEST_CLAIM?38:Se===s.MESSAGE_ACTIONS.INJECT_VIA_SCRIPTING?46:56;break;case 2:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND){yt.n=3;break}return s!=null&&s.sessionId&&s.bgLogger.setContext({sessionId:s.sessionId||"unknown",providerId:s.providerId||"unknown",appId:s.appId||"unknown"}),V=((et=p.tab)===null||et===void 0?void 0:et.id)&&s.managedTabs.has(p.tab.id),chrome.tabs.sendMessage(p.tab.id,{action:s.MESSAGE_ACTIONS.SHOULD_INITIALIZE,source:s.MESSAGE_SOURCES.BACKGROUND,target:s.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{shouldInitialize:V}}).catch(function(Ae){return s.bgLogger.error("[BACKGROUND] Error sending initialization status: ".concat(Ae==null?void 0:Ae.message))}),V&&s.initPopupMessage&&s.initPopupMessage.has(p.tab.id)&&(mt=s.initPopupMessage.get(p.tab.id),chrome.tabs.sendMessage(p.tab.id,mt.message).then(function(){chrome.runtime.lastError&&s.bgLogger.error("[BACKGROUND] Error sending (pending) SHOW_PROVIDER_VERIFICATION_POPUP to tab ".concat(p.tab.id,": ").concat(chrome.runtime.lastError.message))}).catch(function(Ae){return s.bgLogger.error("[BACKGROUND] Error sending (pending) SHOW_PROVIDER_VERIFICATION_POPUP to tab ".concat(p.tab.id," (promise catch): ").concat(Ae==null?void 0:Ae.message))})),V&&s.providerDataMessage&&s.providerDataMessage.has(p.tab.id)&&(nt=s.providerDataMessage.get(p.tab.id),chrome.tabs.sendMessage(p.tab.id,nt.message).then(function(){chrome.runtime.lastError&&s.bgLogger.error("[BACKGROUND] Error sending (pending) PROVIDER_DATA_READY to tab ".concat(p.tab.id,": ").concat(chrome.runtime.lastError.message))}).catch(function(Ae){return s.bgLogger.error("[BACKGROUND] Error sending (pending) PROVIDER_DATA_READY to tab ".concat(p.tab.id," (promise catch): ").concat(Ae==null?void 0:Ae.message))}),s.providerDataMessage.delete(p.tab.id)),y({success:!0}),yt.a(3,57);case 3:return yt.a(3,57);case 4:return R===s.MESSAGE_SOURCES.CONTENT_SCRIPT&&H===s.MESSAGE_SOURCES.BACKGROUND&&(s.bgLogger.setContext({sessionId:s.sessionId||"unknown",providerId:s.providerId||"unknown",appId:s.appId||"unknown",type:M.D_.BACKGROUND}),s.bgLogger.info("[BACKGROUND] Content script requested provider data"),(_t=p.tab)!==null&&_t!==void 0&&_t.id&&s.managedTabs.has(p.tab.id)&&s.providerData&&s.parameters&&s.sessionId&&s.callbackUrl!==void 0?(s.bgLogger.info("[BACKGROUND] Sending the following provider data to content script: "+JSON.stringify(s.providerData)),y({success:!0,data:{providerData:s.providerData,parameters:s.parameters||{},sessionId:s.sessionId,callbackUrl:s.callbackUrl,providerId:s.providerId,appId:s.appId}})):y({success:!1,error:"Provider data not available or tab not managed"})),yt.a(3,57);case 5:return R===s.MESSAGE_SOURCES.CONTENT_SCRIPT&&H===s.MESSAGE_SOURCES.BACKGROUND&&(zt=((Ut=p.tab)===null||Ut===void 0?void 0:Ut.id)&&s.managedTabs.has(p.tab.id),y({success:!0,isManaged:zt})),yt.a(3,57);case 6:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND){yt.n=10;break}if(s.bgLogger.setContext({sessionId:U.sessionId||s.sessionId||"unknown",providerId:U.providerId||s.providerId||"unknown",appId:U.applicationId||s.appId||"unknown",type:M.D_.BACKGROUND}),s.bgLogger.info("[BACKGROUND] Starting a new verification with data: "+JSON.stringify(U)),s.loggerService.startFlushInterval(),!s.activeSessionId||s.activeSessionId===U.sessionId){yt.n=8;break}if(s.managedTabs.size!==0){yt.n=7;break}s.activeSessionId=null,yt.n=8;break;case 7:return s.bgLogger.error("[BACKGROUND] Another verification is in progress"),y({success:!1,error:"Another verification is in progress"}),yt.a(3,57);case 8:return s.activeSessionId=U.sessionId||s.activeSessionId,p.tab&&p.tab.id&&(s.originalTabId=p.tab.id),s.bgLogger.info("[BACKGROUND] Starting verification with session id: ".concat(U.sessionId)),yt.n=9,Yi(s,U);case 9:ce=yt.v,s.bgLogger.info("[BACKGROUND] Verification started with session id: ".concat(U.sessionId)),y({success:!0,result:ce}),yt.n=11;break;case 10:y({success:!1,error:"Action not supported"});case 11:return yt.a(3,57);case 12:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND){yt.n=14;break}return s.bgLogger.info("[BACKGROUND] Cancelling verification with session id: ".concat(U==null?void 0:U.sessionId)),yt.n=13,rs(s,U==null?void 0:U.sessionId);case 13:y({success:!0}),yt.n=15;break;case 14:s.bgLogger.error("[BACKGROUND] CANCEL_VERIFICATION: Action not supported"),y({success:!1,error:"Action not supported"});case 15:return yt.a(3,57);case 16:return R===s.MESSAGE_SOURCES.OFFSCREEN&&H===s.MESSAGE_SOURCES.BACKGROUND?(s.bgLogger.info("[BACKGROUND] Offscreen document ready"),y({success:!0})):(s.bgLogger.error("[BACKGROUND] OFFSCREEN_DOCUMENT_READY: Action not supported"),y({success:!1,error:"Action not supported"})),yt.a(3,57);case 17:return R===s.MESSAGE_SOURCES.CONTENT_SCRIPT&&H===s.MESSAGE_SOURCES.BACKGROUND?p.tab&&p.tab.id?chrome.tabs.remove(p.tab.id,function(){chrome.runtime.lastError?(s.bgLogger.error("[BACKGROUND] Error closing tab: ".concat(chrome.runtime.lastError.message)),y({success:!1,error:chrome.runtime.lastError.message})):(s.managedTabs.has(p.tab.id)&&s.managedTabs.delete(p.tab.id),y({success:!0}))}):(s.bgLogger.error("[BACKGROUND] CLOSE_CURRENT_TAB: No tab ID provided by sender."),y({success:!1,error:"No tab ID found to close."})):y({success:!1,error:"Action not supported"}),yt.a(2,!0);case 18:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND){yt.n=22;break}if(!s.filteredRequests.has(U.criteria.requestHash)){yt.n=19;break}s.bgLogger.info("[BACKGROUND] Filtered request found with hash: ".concat(U.criteria.requestHash)),y({success:!0,result:s.filteredRequests.get(U.criteria.requestHash)}),yt.n=21;break;case 19:return s.filteredRequests.set(U.criteria.requestHash,U.request),yt.n=20,s.processFilteredRequest(U.request,U.criteria,U.sessionId,U.loginUrl);case 20:re=yt.v,y({success:!0,result:re});case 21:yt.n=23;break;case 22:y({success:!1,error:"Action not supported"});case 23:return yt.a(3,57);case 24:return R===s.MESSAGE_SOURCES.CONTENT_SCRIPT&&H===s.MESSAGE_SOURCES.BACKGROUND?(s.bgLogger.info("[BACKGROUND] Getting current tab id: ".concat((oe=p.tab)===null||oe===void 0?void 0:oe.id)),y({success:!0,tabId:(ft=p.tab)===null||ft===void 0?void 0:ft.id})):(s.bgLogger.error("[BACKGROUND] GET_CURRENT_TAB_ID: Action not supported"),y({success:!1,error:"Action not supported"})),yt.a(3,57);case 25:return(I=p.tab)!==null&&I!==void 0&&I.id&&s.managedTabs.has(p.tab.id)?(s.bgLogger.info("[BACKGROUND] Updating public data: ".concat(U==null?void 0:U.publicData)),s.publicData=typeof(U==null?void 0:U.publicData)=="string"?U.publicData:null,y({success:!0})):(s.bgLogger.error("[BACKGROUND] UPDATE_PUBLIC_DATA: Tab is not managed by extension"),y({success:!1,error:"Tab is not managed by extension"})),yt.a(3,57);case 26:if(($=p.tab)===null||$===void 0||!$.id||!s.managedTabs.has(p.tab.id)){yt.n=31;break}if(tt=s.expectManyClaims&&!(U!=null&&U.expectMany),s.expectManyClaims=!(U==null||!U.expectMany),s.bgLogger.info("[BACKGROUND] Updating expect many claims: ".concat(U==null?void 0:U.expectMany)),!(tt&&s.generatedProofs.size>0)){yt.n=30;break}return yt.p=27,s.bgLogger.info("[BACKGROUND] Turning off expect many claims, Submitting proofs"),yt.n=28,s.submitProofs();case 28:yt.n=30;break;case 29:yt.p=29,yt.v;case 30:y({success:!0}),yt.n=32;break;case 31:s.bgLogger.error("[BACKGROUND] UPDATE_EXPECT_MANY_CLAIMS: Tab is not managed by extension"),y({success:!1,error:"Tab is not managed by extension"});case 32:return yt.a(3,57);case 33:return(A=p.tab)!==null&&A!==void 0&&A.id&&s.managedTabs.has(p.tab.id)?(s.bgLogger.info("[BACKGROUND] Getting parameters: ".concat(s.parameters)),y({success:!0,parameters:s.parameters||{}})):(s.bgLogger.error("[BACKGROUND] UPDATE_EXPECT_MANY_CLAIMS: Tab is not managed by extension"),y({success:!1,error:"Tab is not managed by extension"})),yt.a(3,57);case 34:if((St=p.tab)===null||St===void 0||!St.id||!s.managedTabs.has(p.tab.id)){yt.n=36;break}return s.aborted=!0,yt.n=35,s.failSession((U==null?void 0:U.message)||"Provider error");case 35:s.bgLogger.info("[BACKGROUND] Provider error reported: ".concat(U==null?void 0:U.message)),y({success:!0}),yt.n=37;break;case 36:s.bgLogger.error("[BACKGROUND] REPORT_PROVIDER_ERROR: Tab is not managed by extension"),y({success:!1,error:"Tab is not managed by extension"});case 37:return yt.a(3,57);case 38:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND||(at=p.tab)===null||at===void 0||!at.id||!s.managedTabs.has(p.tab.id)){yt.n=44;break}if(yt.p=39,s.sessionId||U.sessionId){yt.n=40;break}return y({success:!1,error:"Session not initialized"}),yt.a(3,57);case 40:return yt.n=41,s.processFilteredRequest(U.request,U.criteria,U.sessionId,U.loginUrl||"");case 41:dt=yt.v,s.bgLogger.info("[BACKGROUND] Request claim processed: ".concat(U.requestHash)),y({success:!0,result:dt}),yt.n=43;break;case 42:yt.p=42,qr=yt.v,s.bgLogger.error("[BACKGROUND] Request claim processing failed: ".concat(qr==null?void 0:qr.message)),y({success:!1,error:(qr==null?void 0:qr.message)||String(qr)});case 43:yt.n=45;break;case 44:s.bgLogger.error("[BACKGROUND] REQUEST_CLAIM: Tab is not managed by extension"),y({success:!1,error:"Tab is not managed by extension"});case 45:return yt.a(3,57);case 46:if(R!==s.MESSAGE_SOURCES.CONTENT_SCRIPT||H!==s.MESSAGE_SOURCES.BACKGROUND||(st=p.tab)===null||st===void 0||!st.id){yt.n=54;break}if(Dt=p.tab.id,it=U==null?void 0:U.op,yt.p=47,it!=="REPLAY_PAGE_FETCH"){yt.n=49;break}return yt.n=48,chrome.scripting.executeScript({target:{tabId:Dt},world:"MAIN",func:function(Ae){try{Ae!=null&&Ae.showAlert&&(console.log("Fetching initial page"),alert("Fetching initial page")),fetch(window.location.href,{method:"GET",headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","accept-language":"en-GB,en;q=0.5"},credentials:"include",cache:"no-store"}).catch(function(){})}catch($r){console.error("REPLAY_PAGE_FETCH failed",$r)}},args:[{showAlert:!(U==null||!U.showAlert)}]});case 48:return(rt=s.bgLogger)===null||rt===void 0||rt.info("INJECT_VIA_SCRIPTING: REPLAY_PAGE_FETCH executed in MAIN world"),y({success:!0}),yt.a(3,57);case 49:if(it!=="RUN_CUSTOM_INJECTION"){yt.n=51;break}return Zt=String((U==null?void 0:U.code)||""),yt.n=50,chrome.scripting.executeScript({target:{tabId:p.tab.id},world:"MAIN",func:function(Ae){try{var $r=String((Ae==null?void 0:Ae.code)||"");return $r?window.__reclaimCustomInjectionDone__?{status:"skipped",reason:"already_injected"}:function(){try{var _e=(document.querySelector("script[nonce]")||{}).nonce;if(!_e)return!1;var ar=document.createElement("script");return ar.setAttribute("nonce",_e),ar.textContent=$r,(document.documentElement||document.head||document).appendChild(ar),ar.remove(),!0}catch{return!1}}()||function(){try{if(!window.trustedTypes)return!1;for(var _e=(document.querySelector("script[nonce]")||{}).nonce||"",ar=0,$o=["reclaim-extension-sdk","reclaim","default","policy","app"];ar<$o.length;ar++){var Hu=$o[ar];try{var Vu=trustedTypes.createPolicy(Hu,{createScript:function(Ho){return Ho}}),ao=document.createElement("script");return _e&&ao.setAttribute("nonce",_e),ao.text=Vu.createScript($r),(document.documentElement||document.head||document).appendChild(ao),ao.remove(),!0}catch{}}return!1}catch{return!1}}()||function(){try{var _e=document.createElement("script");return _e.textContent=$r,(document.documentElement||document.head||document).appendChild(_e),_e.remove(),!0}catch{return!1}}()?(window.__reclaimCustomInjectionDone__=!0,{status:"executed"}):{status:"error",reason:"all_strategies_failed"}:{status:"skipped",reason:"no_code"}}catch(_e){return{status:"error",reason:String((_e==null?void 0:_e.message)||_e)}}},args:[{code:Zt}]});case 50:return Ft=yt.v,qo=Ft==null||(bt=Ft[0])===null||bt===void 0?void 0:bt.result,(ot=s.bgLogger)===null||ot===void 0||ot.info("INJECT_VIA_SCRIPTING: RUN_CUSTOM_INJECTION result: ".concat(JSON.stringify(qo))),y({success:!0,result:qo}),yt.a(3,57);case 51:yt.n=53;break;case 52:yt.p=52,Kr=yt.v,(Ko=s.bgLogger)===null||Ko===void 0||Ko.error("INJECT_VIA_SCRIPTING failed: ".concat(Kr==null?void 0:Kr.message)),y({success:!1,error:(Kr==null?void 0:Kr.message)||String(Kr)});case 53:yt.n=55;break;case 54:y({success:!1,error:"Action not supported"});case 55:return yt.a(3,57);case 56:s.bgLogger.error("[BACKGROUND] DEFAULT: Action not supported"),y({success:!1,error:"Action not supported"});case 57:yt.n=59;break;case 58:yt.p=58,so=yt.v,s.bgLogger.error("[BACKGROUND] Error handling ".concat(P,": ").concat(so==null?void 0:so.message)),y({success:!1,error:so.message});case 59:return yt.a(2,!0)}},n,null,[[47,52],[39,42],[27,29],[1,58]])}),Fo=function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){os(y,h,p,I,A,"next",P)}function A(P){os(y,h,p,I,A,"throw",P)}I(void 0)})},Fo.apply(this,arguments)}function Un(l){return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Un(l)}function Mo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return ke(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(ke(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,ke(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,ke(U,"constructor",R),ke(R,"constructor",P),P.displayName="GeneratorFunction",ke(R,p,"GeneratorFunction"),ke(U),ke(U,p,"Generator"),ke(U,h,function(){return this}),ke(U,"toString",function(){return"[object Generator]"}),(Mo=function(){return{w:y,m:et}})()}function ke(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}ke=function(y,I,A,P){function R(H,U){ke(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},ke(l,n,s,h)}function is(l,n){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);n&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),s.push.apply(s,h)}return s}function ss(l){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?is(Object(s),!0).forEach(function(h){Gu(l,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):is(Object(s)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(s,h))})}return l}function Gu(l,n,s){return(n=function(h){var p=function(y,I){if(Un(y)!="object"||!y)return y;var A=y[Symbol.toPrimitive];if(A!==void 0){var P=A.call(y,I);if(Un(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(y)}(h,"string");return Un(p)=="symbol"?p:p+""}(n))in l?Object.defineProperty(l,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[n]=s,l}function as(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function Fu(l){return function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){as(y,h,p,I,A,"next",P)}function A(P){as(y,h,p,I,A,"throw",P)}I(void 0)})}}function Mu(l,n,s){l.proofGenerationQueue.push({claimData:n,requestHash:s}),l.isProcessingQueue||(l.sessionTimerManager.pauseSessionTimer(),us(l))}function us(l){return cs.apply(this,arguments)}function cs(){return(cs=Fu(Mo().m(function l(n){var s,h,p,y,I,A,P,R,H,U;return Mo().w(function(et){for(;;)switch(et.p=et.n){case 0:if(!n.aborted){et.n=1;break}return et.a(2);case 1:if(!n.isProcessingQueue&&n.proofGenerationQueue.length!==0){et.n=3;break}if(n.proofGenerationQueue.length!==0){et.n=2;break}return(h=Array.isArray((s=n.providerData)===null||s===void 0?void 0:s.requestData)?n.providerData.requestData.length:0)>0?n.providerData.requestData.filter(function(V){return n.generatedProofs.has(V.requestHash)}).length===h?(n.sessionTimerManager.clearAllTimers(),n.expectManyClaims||setTimeout(function(){return n.submitProofs()},0)):n.sessionTimerManager.resumeSessionTimer():(n.sessionTimerManager.clearAllTimers(),n.expectManyClaims||setTimeout(function(){return n.submitProofs()},0)),et.a(2);case 2:n.sessionTimerManager.resumeSessionTimer();case 3:if(n.isProcessingQueue=!0,p=n.proofGenerationQueue.shift(),et.p=4,!n.aborted){et.n=5;break}return et.a(2);case 5:return chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_STARTED,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),n.bgLogger.info("[BACKGROUND] Queued proof generation request for request hash: "+p.requestHash,{type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),et.n=6,n.generateProof(ss(ss({},p.claimData),{},{publicData:(y=n.publicData)!==null&&y!==void 0?y:null}));case 6:if(I=et.v,!n.aborted){et.n=7;break}return et.a(2);case 7:if(I.success){et.n=8;break}return n.failSession("Proof generation failed: "+I.error,p.requestHash),et.a(2);case 8:(A=I.proof)&&(n.generatedProofs.has(p.requestHash)||n.generatedProofs.set(p.requestHash,A),n.bgLogger.info("[BACKGROUND] Proof generation successful for request hash: "+p.requestHash,{type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),chrome.tabs.sendMessage(n.activeTabId,{action:n.MESSAGE_ACTIONS.PROOF_GENERATION_SUCCESS,source:n.MESSAGE_SOURCES.BACKGROUND,target:n.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),n.sessionTimerManager.resetSessionTimer()),et.n=10;break;case 9:return et.p=9,U=et.v,n.bgLogger.setContext({type:M.D_.BACKGROUND,sessionId:n.sessionId||"unknown",providerId:n.providerId||"unknown",appId:n.appId||"unknown"}),n.bgLogger.error("[BACKGROUND] Proof generation failed for request hash: ".concat(p.requestHash,": ").concat(U==null?void 0:U.message)),n.failSession("Proof generation failed: "+U.message,p.requestHash),et.a(2);case 10:if(et.p=10,n.isProcessingQueue=!1,!n.aborted){et.n=11;break}return et.a(2);case 11:return n.proofGenerationQueue.length>0?us(n):(R=Array.isArray((P=n.providerData)===null||P===void 0?void 0:P.requestData)?n.providerData.requestData.length:0)>0?(H=n.providerData.requestData.filter(function(V){return n.generatedProofs.has(V.requestHash)}).length,n.sessionTimerManager.clearAllTimers(),H===R?n.expectManyClaims||setTimeout(function(){return n.submitProofs()},0):n.sessionTimerManager.resumeSessionTimer()):(n.sessionTimerManager.clearAllTimers(),n.expectManyClaims||setTimeout(function(){return n.submitProofs()},0)),et.f(10);case 12:return et.a(2)}},l,null,[[4,9,10,12]])}))).apply(this,arguments)}var qu=t(887);function Dn(l){return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dn(l)}function Bn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,s=typeof Symbol=="function"?Symbol:{},h=s.iterator||"@@iterator",p=s.toStringTag||"@@toStringTag";function y(V,mt,nt,_t){var Ut=mt&&mt.prototype instanceof A?mt:A,zt=Object.create(Ut.prototype);return xe(zt,"_invoke",function(ce,re,oe){var ft,$,tt,St=0,at=oe||[],dt=!1,st={p:0,n:0,v:l,a:Dt,f:Dt.bind(l,4),d:function(it,rt){return ft=it,$=0,tt=l,st.n=rt,I}};function Dt(it,rt){for($=it,tt=rt,n=0;!dt&&St&&!bt&&n<at.length;n++){var bt,ot=at[n],Zt=st.p,Ft=ot[2];it>3?(bt=Ft===rt)&&(tt=ot[($=ot[4])?5:($=3,3)],ot[4]=ot[5]=l):ot[0]<=Zt&&((bt=it<2&&Zt<ot[1])?($=0,st.v=rt,st.n=ot[1]):Zt<Ft&&(bt=it<3||ot[0]>rt||rt>Ft)&&(ot[4]=it,ot[5]=rt,st.n=Ft,$=0))}if(bt||it>1)return I;throw dt=!0,rt}return function(it,rt,bt){if(St>1)throw TypeError("Generator is already running");for(dt&&rt===1&&Dt(rt,bt),$=rt,tt=bt;(n=$<2?l:tt)||!dt;){ft||($?$<3?($>1&&(st.n=-1),Dt($,tt)):st.n=tt:st.v=tt);try{if(St=2,ft){if($||(it="next"),n=ft[it]){if(!(n=n.call(ft,tt)))throw TypeError("iterator result is not an object");if(!n.done)return n;tt=n.value,$<2&&($=0)}else $===1&&(n=ft.return)&&n.call(ft),$<2&&(tt=TypeError("The iterator does not provide a '"+it+"' method"),$=1);ft=l}else if((n=(dt=st.n<0)?tt:ce.call(re,st))!==I)break}catch(ot){ft=l,$=1,tt=ot}finally{St=1}}return{value:n,done:dt}}}(V,nt,_t),!0),zt}var I={};function A(){}function P(){}function R(){}n=Object.getPrototypeOf;var H=[][h]?n(n([][h]())):(xe(n={},h,function(){return this}),n),U=R.prototype=A.prototype=Object.create(H);function et(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,R):(V.__proto__=R,xe(V,p,"GeneratorFunction")),V.prototype=Object.create(U),V}return P.prototype=R,xe(U,"constructor",R),xe(R,"constructor",P),P.displayName="GeneratorFunction",xe(R,p,"GeneratorFunction"),xe(U),xe(U,p,"Generator"),xe(U,h,function(){return this}),xe(U,"toString",function(){return"[object Generator]"}),(Bn=function(){return{w:y,m:et}})()}function xe(l,n,s,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}xe=function(y,I,A,P){function R(H,U){xe(y,H,function(et){return this._invoke(H,U,et)})}I?p?p(y,I,{value:A,enumerable:!P,configurable:!P,writable:!P}):y[I]=A:(R("next",0),R("throw",1),R("return",2))},xe(l,n,s,h)}function ls(l,n){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);n&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable})),s.push.apply(s,h)}return s}function fs(l){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?ls(Object(s),!0).forEach(function(h){Ku(l,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):ls(Object(s)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(s,h))})}return l}function Ku(l,n,s){return(n=function(h){var p=function(y,I){if(Dn(y)!="object"||!y)return y;var A=y[Symbol.toPrimitive];if(A!==void 0){var P=A.call(y,I);if(Dn(P)!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(y)}(h,"string");return Dn(p)=="symbol"?p:p+""}(n))in l?Object.defineProperty(l,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[n]=s,l}function hs(l,n,s,h,p,y,I){try{var A=l[y](I),P=A.value}catch(R){return void s(R)}A.done?n(P):Promise.resolve(P).then(h,p)}function ds(l){return function(){var n=this,s=arguments;return new Promise(function(h,p){var y=l.apply(n,s);function I(P){hs(y,h,p,I,A,"next",P)}function A(P){hs(y,h,p,I,A,"throw",P)}I(void 0)})}}a.Ow.setConfig({consoleEnabled:!0,backendEnabled:!0,consoleLevel:f.E$.INFO,backendLevel:f.E$.INFO,includeSensitiveToBackend:!1,debugMode:!1});var Ze=(0,a.y8)({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:"reclaim-extension-sdk"});function $u(){C();var l={activeTabId:null,providerData:null,parameters:{},providerId:null,appId:null,sessionId:null,callbackUrl:null,publicData:null,aborted:!1,expectManyClaims:!1,originalTabId:null,managedTabs:new Set,providerRequestsByHash:new Map,generatedProofs:new Map,filteredRequests:new Map,proofGenerationQueue:[],isProcessingQueue:!1,firstRequestReceived:!1,initPopupMessage:new Map,providerDataMessage:new Map,activeSessionId:null,sessionTimerManager:new Uu,fetchProviderData:E,updateSessionStatus:T,submitProofOnCallback:D,RECLAIM_SESSION_STATUS:i.Ew,MESSAGE_ACTIONS:i.wx,MESSAGE_SOURCES:i.J_,generateProof:Ct,formatProof:gt.c,createClaimObject:_u,loggerService:a.Ow,bgLogger:Ze,debugLogger:M.w9,DebugLogType:M.Ey,processFilteredRequest:null,failSession:null,submitProofs:null};return Ze.setContext({sessionId:l.sessionId||"unknown",providerId:l.providerId||"unknown",appId:l.appId||"unknown",type:f.D_.BACKGROUND}),Ze.info("Background initialized",{type:"BACKGROUND"}),l.failSession=function(){for(var n=arguments.length,s=new Array(n),h=0;h<n;h++)s[h]=arguments[h];return Qi.apply(r,[l].concat(s))},l.submitProofs=function(){for(var n=arguments.length,s=new Array(n),h=0;h<n;h++)s[h]=arguments[h];return ts.apply(r,[l].concat(s))},l.processFilteredRequest=function(){var n=ds(Bn().m(function s(h,p,y,I){var A,P,R,H,U,et,V,mt;return Bn().w(function(nt){for(;;)switch(nt.p=nt.n){case 0:if(nt.p=0,y=l.sessionId||y){nt.n=1;break}return l.failSession("Session not initialized for claim request",p==null?void 0:p.requestHash),nt.a(2,{success:!1,error:"Session not initialized"});case 1:return l.firstRequestReceived||(l.firstRequestReceived=!0,l.sessionTimerManager.startSessionTimer()),Ze.setContext({sessionId:l.sessionId||"unknown",providerId:l.providerId||"unknown",appId:l.appId||"unknown",type:f.D_.BACKGROUND}),l.bgLogger.info("[BACKGROUND] Received filtered request ".concat(h.url," from content script for request hash: ").concat(p.requestHash)),nt.n=2,qu.W3(h.url,l.debugLogger,l.DebugLogType);case 2:return(A=nt.v)&&(h.cookieStr=A),chrome.tabs.sendMessage(l.activeTabId,{action:l.MESSAGE_ACTIONS.CLAIM_CREATION_REQUESTED,source:l.MESSAGE_SOURCES.BACKGROUND,target:l.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),P=null,nt.p=3,U=fs(fs({},p),{},{geoLocation:(R=(H=l.providerData)===null||H===void 0?void 0:H.geoLocation)!==null&&R!==void 0?R:""}),nt.n=4,l.createClaimObject(h,U,y,I);case 4:P=nt.v,Ze.info("[BACKGROUND] Claim Object creation successful for request hash: "+p.requestHash),nt.n=6;break;case 5:return nt.p=5,V=nt.v,Ze.error("[BACKGROUND] Error creating claim object: ".concat(V.message)),chrome.tabs.sendMessage(l.activeTabId,{action:l.MESSAGE_ACTIONS.CLAIM_CREATION_FAILED,source:l.MESSAGE_SOURCES.BACKGROUND,target:l.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),l.failSession("Claim creation failed: "+V.message,p.requestHash),nt.a(2,{success:!1,error:V.message});case 6:return P&&(chrome.tabs.sendMessage(l.activeTabId,{action:l.MESSAGE_ACTIONS.CLAIM_CREATION_SUCCESS,source:l.MESSAGE_SOURCES.BACKGROUND,target:l.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),l.bgLogger.info("[BACKGROUND] Claim Object creation successful for request hash: ".concat(p.requestHash))),(et={url:(p==null?void 0:p.url)||(h==null?void 0:h.url)||"",expectedPageUrl:(p==null?void 0:p.expectedPageUrl)||"",urlType:(p==null?void 0:p.urlType)||"EXACT",method:(p==null?void 0:p.method)||(h==null?void 0:h.method)||"GET",responseMatches:Array.isArray(p==null?void 0:p.responseMatches)?p.responseMatches:[],responseRedactions:Array.isArray(p==null?void 0:p.responseRedactions)?p.responseRedactions:[],requestHash:p==null?void 0:p.requestHash}).requestHash&&l.providerRequestsByHash.set(et.requestHash,et),Mu(l,P,p.requestHash),Ze.info("[BACKGROUND] Proof generation queued for request hash: "+p.requestHash),nt.a(2,{success:!0,message:"Proof generation queued"});case 7:return nt.p=7,mt=nt.v,Ze.error("[BACKGROUND] Error processing filtered request: "+mt.message),l.failSession("Error processing request: "+mt.message,p.requestHash),nt.a(2,{success:!1,error:mt.message})}},s,null,[[3,5],[0,7]])}));return function(s,h,p,y){return n.apply(this,arguments)}}(),l.sessionTimerManager.setCallbacks(l.failSession),l.sessionTimerManager.setTimerDuration(3e4),chrome.runtime.onMessage.addListener(function(n,s,h){return function(p,y,I,A){Fo.apply(this,arguments)}(l,n,s,h),!0}),chrome.tabs.onRemoved.addListener(function(){var n=ds(Bn().m(function s(h){var p,y;return Bn().w(function(I){for(;;)switch(I.p=I.n){case 0:if(l.managedTabs.has(h)&&l.managedTabs.delete(h),p=h===l.activeTabId,y=l.managedTabs.size===0,!l.activeSessionId||!p&&!y||l.aborted){I.n=4;break}return l.aborted=!0,I.p=1,Ze.error("[BACKGROUND] Verification tab closed by user"),I.n=2,l.failSession("Verification tab closed by user");case 2:I.n=4;break;case 3:I.p=3,I.v;case 4:p&&(l.activeTabId=null),y&&(l.originalTabId=null,l.activeSessionId=null);case 5:return I.a(2)}},s,null,[[1,3]])}));return function(s){return n.apply(this,arguments)}}()),Ze.info("[BACKGROUND]  Background initialization complete"),l}},379:(o,e,t)=>{function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var d,u,b=typeof Symbol=="function"?Symbol:{},v=b.iterator||"@@iterator",E=b.toStringTag||"@@toStringTag";function T(z,_,N,C){var F=_&&_.prototype instanceof S?_:S,j=Object.create(F.prototype);return i(j,"_invoke",function(q,Q,J){var X,Y,M,ut=0,lt=J||[],At=!1,wt={p:0,n:0,v:d,a:Ct,f:Ct.bind(d,4),d:function(gt,G){return X=gt,Y=0,M=d,wt.n=G,D}};function Ct(gt,G){for(Y=gt,M=G,u=0;!At&&ut&&!jt&&u<lt.length;u++){var jt,Lt=lt[u],te=wt.p,Gt=Lt[2];gt>3?(jt=Gt===G)&&(M=Lt[(Y=Lt[4])?5:(Y=3,3)],Lt[4]=Lt[5]=d):Lt[0]<=te&&((jt=gt<2&&te<Lt[1])?(Y=0,wt.v=G,wt.n=Lt[1]):te<Gt&&(jt=gt<3||Lt[0]>G||G>Gt)&&(Lt[4]=gt,Lt[5]=G,wt.n=Gt,Y=0))}if(jt||gt>1)return D;throw At=!0,G}return function(gt,G,jt){if(ut>1)throw TypeError("Generator is already running");for(At&&G===1&&Ct(G,jt),Y=G,M=jt;(u=Y<2?d:M)||!At;){X||(Y?Y<3?(Y>1&&(wt.n=-1),Ct(Y,M)):wt.n=M:wt.v=M);try{if(ut=2,X){if(Y||(gt="next"),u=X[gt]){if(!(u=u.call(X,M)))throw TypeError("iterator result is not an object");if(!u.done)return u;M=u.value,Y<2&&(Y=0)}else Y===1&&(u=X.return)&&u.call(X),Y<2&&(M=TypeError("The iterator does not provide a '"+gt+"' method"),Y=1);X=d}else if((u=(At=wt.n<0)?M:q.call(Q,wt))!==D)break}catch(Lt){X=d,Y=1,M=Lt}finally{ut=1}}return{value:u,done:At}}}(z,N,C),!0),j}var D={};function S(){}function w(){}function O(){}u=Object.getPrototypeOf;var k=[][v]?u(u([][v]())):(i(u={},v,function(){return this}),u),x=O.prototype=S.prototype=Object.create(k);function L(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,O):(z.__proto__=O,i(z,E,"GeneratorFunction")),z.prototype=Object.create(x),z}return w.prototype=O,i(x,"constructor",O),i(O,"constructor",w),w.displayName="GeneratorFunction",i(O,E,"GeneratorFunction"),i(x),i(x,E,"Generator"),i(x,v,function(){return this}),i(x,"toString",function(){return"[object Generator]"}),(r=function(){return{w:T,m:L}})()}function i(d,u,b,v){var E=Object.defineProperty;try{E({},"",{})}catch{E=0}i=function(T,D,S,w){function O(k,x){i(T,k,function(L){return this._invoke(k,x,L)})}D?E?E(T,D,{value:S,enumerable:!w,configurable:!w,writable:!w}):T[D]=S:(O("next",0),O("throw",1),O("return",2))},i(d,u,b,v)}function a(d,u,b,v,E,T,D){try{var S=d[T](D),w=S.value}catch(O){return void b(O)}S.done?u(w):Promise.resolve(w).then(v,E)}t.d(e,{C:()=>f});var f=function(){var d,u=(d=r().m(function b(){var v,E,T,D,S;return r().w(function(w){for(;;)switch(w.p=w.n){case 0:return w.p=0,w.n=1,fetch("https://ipapi.co/json/");case 1:return E=w.v,w.n=2,E.json();case 2:if(T=w.v,(E==null?void 0:E.status)===200){w.n=3;break}throw new Error("Failed to get user location based on IP");case 3:return D=(v=T==null?void 0:T.country_code)!==null&&v!==void 0?v:"US",w.a(2,D);case 4:return w.p=4,S=w.v,console.error("Error getting user location based on IP:",S),w.a(2,"US")}},b,null,[[0,4]])}),function(){var b=this,v=arguments;return new Promise(function(E,T){var D=d.apply(b,v);function S(O){a(D,E,T,S,w,"next",O)}function w(O){a(D,E,T,S,w,"throw",O)}S(void 0)})});return function(){return u.apply(this,arguments)}}()},526:(o,e)=>{e.byteLength=function(v){var E=d(v),T=E[0],D=E[1];return 3*(T+D)/4-D},e.toByteArray=function(v){var E,T,D=d(v),S=D[0],w=D[1],O=new i(function(L,z,_){return 3*(z+_)/4-_}(0,S,w)),k=0,x=w>0?S-4:S;for(T=0;T<x;T+=4)E=r[v.charCodeAt(T)]<<18|r[v.charCodeAt(T+1)]<<12|r[v.charCodeAt(T+2)]<<6|r[v.charCodeAt(T+3)],O[k++]=E>>16&255,O[k++]=E>>8&255,O[k++]=255&E;return w===2&&(E=r[v.charCodeAt(T)]<<2|r[v.charCodeAt(T+1)]>>4,O[k++]=255&E),w===1&&(E=r[v.charCodeAt(T)]<<10|r[v.charCodeAt(T+1)]<<4|r[v.charCodeAt(T+2)]>>2,O[k++]=E>>8&255,O[k++]=255&E),O},e.fromByteArray=function(v){for(var E,T=v.length,D=T%3,S=[],w=16383,O=0,k=T-D;O<k;O+=w)S.push(b(v,O,O+w>k?k:O+w));return D===1?(E=v[T-1],S.push(t[E>>2]+t[E<<4&63]+"==")):D===2&&(E=(v[T-2]<<8)+v[T-1],S.push(t[E>>10]+t[E>>4&63]+t[E<<2&63]+"=")),S.join("")};for(var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0;f<64;++f)t[f]=a[f],r[a.charCodeAt(f)]=f;function d(v){var E=v.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=v.indexOf("=");return T===-1&&(T=E),[T,T===E?0:4-T%4]}function u(v){return t[v>>18&63]+t[v>>12&63]+t[v>>6&63]+t[63&v]}function b(v,E,T){for(var D,S=[],w=E;w<T;w+=3)D=(v[w]<<16&16711680)+(v[w+1]<<8&65280)+(255&v[w+2]),S.push(u(D));return S.join("")}r[45]=62,r[95]=63},573:(o,e,t)=>{t.d(e,{c:()=>r});var r=function(a,f){var d;return{identifier:a.claim.identifier,claimData:a.claim,signatures:[i(a.signatures.claimSignature)],witnesses:[{id:a.signatures.attestorAddress,url:"wss://attestor.reclaimprotocol.org/ws"}],taskId:null,publicData:(d=a.publicData)!==null&&d!==void 0?d:null,providerRequest:f}},i=function(a){if(!a)return"";var f=Object.values(a).map(function(d){return d.toString(16).padStart(2,"0")}).join("");return"0x".concat(f)}},606:o=>{var e,t,r=o.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function f(w){if(e===setTimeout)return setTimeout(w,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch{try{return e.call(null,w,0)}catch{return e.call(this,w,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:i}catch{e=i}try{t=typeof clearTimeout=="function"?clearTimeout:a}catch{t=a}})();var d,u=[],b=!1,v=-1;function E(){b&&d&&(b=!1,d.length?u=d.concat(u):v=-1,u.length&&T())}function T(){if(!b){var w=f(E);b=!0;for(var O=u.length;O;){for(d=u,u=[];++v<O;)d&&d[v].run();v=-1,O=u.length}d=null,b=!1,function(k){if(t===clearTimeout)return clearTimeout(k);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(k);try{return t(k)}catch{try{return t.call(null,k)}catch{return t.call(this,k)}}}(w)}}function D(w,O){this.fun=w,this.array=O}function S(){}r.nextTick=function(w){var O=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)O[k-1]=arguments[k];u.push(new D(w,O)),u.length!==1||b||f(T)},D.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=S,r.addListener=S,r.once=S,r.off=S,r.removeListener=S,r.removeAllListeners=S,r.emit=S,r.prependListener=S,r.prependOnceListener=S,r.listeners=function(w){return[]},r.binding=function(w){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(w){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},770:(o,e,t)=>{t.d(e,{y8:()=>_,Ow:()=>z});var r=t(859);function i(N){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},i(N)}function a(N,C){for(var F=0;F<C.length;F++){var j=C[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(N,f(j.key),j)}}function f(N){var C=function(F,j){if(i(F)!="object"||!F)return F;var q=F[Symbol.toPrimitive];if(q!==void 0){var Q=q.call(F,j);if(i(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}(N,"string");return i(C)=="symbol"?C:C+""}var d=function(){function N(q){var Q=q.sessionId,J=q.providerId,X=q.appId,Y=q.logLine,M=q.type,ut=q.level,lt=q.sensitive,At=lt!==void 0&&lt,wt=q.source,Ct=q.tabId,gt=q.url,G=q.meta,jt=q.time,Lt=jt===void 0?null:jt,te=q.deviceId;(function(Gt,Mt){if(!(Gt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,N),this.sessionId=Q,this.providerId=J,this.appId=X,this.logLine=Y,this.type=M,this.level=ut,this.sensitive=At,this.source=wt,this.tabId=Ct,this.url=gt,this.meta=G||void 0,this.time=Lt||new Date,this.deviceId=te}return C=N,j=[{key:"fromDateTimeToTimeStamp",value:function(q){return(1e6*q.getTime()).toString()}}],(F=[{key:"toJson",value:function(){return{logLine:this.logLine,ts:N.fromDateTimeToTimeStamp(this.time),type:this.type,sessionId:this.sessionId,providerId:this.providerId,appId:this.appId,level:this.level,sensitive:this.sensitive,source:this.source,tabId:this.tabId,url:this.url,meta:this.meta,deviceId:this.deviceId}}}])&&a(C.prototype,F),j&&a(C,j),Object.defineProperty(C,"prototype",{writable:!1}),C;var C,F,j}();function u(N){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(N)}function b(N){return function(C){if(Array.isArray(C))return v(C)}(N)||function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)}(N)||function(C,F){if(C){if(typeof C=="string")return v(C,F);var j={}.toString.call(C).slice(8,-1);return j==="Object"&&C.constructor&&(j=C.constructor.name),j==="Map"||j==="Set"?Array.from(C):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?v(C,F):void 0}}(N)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v(N,C){(C==null||C>N.length)&&(C=N.length);for(var F=0,j=Array(C);F<C;F++)j[F]=N[F];return j}function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var N,C,F=typeof Symbol=="function"?Symbol:{},j=F.iterator||"@@iterator",q=F.toStringTag||"@@toStringTag";function Q(wt,Ct,gt,G){var jt=Ct&&Ct.prototype instanceof X?Ct:X,Lt=Object.create(jt.prototype);return T(Lt,"_invoke",function(te,Gt,Mt){var It,Pt,Et,Wt=0,ue=Mt||[],Ht=!1,Rt={p:0,n:0,v:N,a:le,f:le.bind(N,4),d:function(qt,ne){return It=qt,Pt=0,Et=N,Rt.n=ne,J}};function le(qt,ne){for(Pt=qt,Et=ne,C=0;!Ht&&Wt&&!c&&C<ue.length;C++){var c,g=ue[C],m=Rt.p,B=g[2];qt>3?(c=B===ne)&&(Et=g[(Pt=g[4])?5:(Pt=3,3)],g[4]=g[5]=N):g[0]<=m&&((c=qt<2&&m<g[1])?(Pt=0,Rt.v=ne,Rt.n=g[1]):m<B&&(c=qt<3||g[0]>ne||ne>B)&&(g[4]=qt,g[5]=ne,Rt.n=B,Pt=0))}if(c||qt>1)return J;throw Ht=!0,ne}return function(qt,ne,c){if(Wt>1)throw TypeError("Generator is already running");for(Ht&&ne===1&&le(ne,c),Pt=ne,Et=c;(C=Pt<2?N:Et)||!Ht;){It||(Pt?Pt<3?(Pt>1&&(Rt.n=-1),le(Pt,Et)):Rt.n=Et:Rt.v=Et);try{if(Wt=2,It){if(Pt||(qt="next"),C=It[qt]){if(!(C=C.call(It,Et)))throw TypeError("iterator result is not an object");if(!C.done)return C;Et=C.value,Pt<2&&(Pt=0)}else Pt===1&&(C=It.return)&&C.call(It),Pt<2&&(Et=TypeError("The iterator does not provide a '"+qt+"' method"),Pt=1);It=N}else if((C=(Ht=Rt.n<0)?Et:te.call(Gt,Rt))!==J)break}catch(g){It=N,Pt=1,Et=g}finally{Wt=1}}return{value:C,done:Ht}}}(wt,gt,G),!0),Lt}var J={};function X(){}function Y(){}function M(){}C=Object.getPrototypeOf;var ut=[][j]?C(C([][j]())):(T(C={},j,function(){return this}),C),lt=M.prototype=X.prototype=Object.create(ut);function At(wt){return Object.setPrototypeOf?Object.setPrototypeOf(wt,M):(wt.__proto__=M,T(wt,q,"GeneratorFunction")),wt.prototype=Object.create(lt),wt}return Y.prototype=M,T(lt,"constructor",M),T(M,"constructor",Y),Y.displayName="GeneratorFunction",T(M,q,"GeneratorFunction"),T(lt),T(lt,q,"Generator"),T(lt,j,function(){return this}),T(lt,"toString",function(){return"[object Generator]"}),(E=function(){return{w:Q,m:At}})()}function T(N,C,F,j){var q=Object.defineProperty;try{q({},"",{})}catch{q=0}T=function(Q,J,X,Y){function M(ut,lt){T(Q,ut,function(At){return this._invoke(ut,lt,At)})}J?q?q(Q,J,{value:X,enumerable:!Y,configurable:!Y,writable:!Y}):Q[J]=X:(M("next",0),M("throw",1),M("return",2))},T(N,C,F,j)}function D(N,C,F,j,q,Q,J){try{var X=N[Q](J),Y=X.value}catch(M){return void F(M)}X.done?C(Y):Promise.resolve(Y).then(j,q)}function S(N){return function(){var C=this,F=arguments;return new Promise(function(j,q){var Q=N.apply(C,F);function J(Y){D(Q,j,q,J,X,"next",Y)}function X(Y){D(Q,j,q,J,X,"throw",Y)}J(void 0)})}}function w(N,C){var F=Object.keys(N);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(N);C&&(j=j.filter(function(q){return Object.getOwnPropertyDescriptor(N,q).enumerable})),F.push.apply(F,j)}return F}function O(N){for(var C=1;C<arguments.length;C++){var F=arguments[C]!=null?arguments[C]:{};C%2?w(Object(F),!0).forEach(function(j){k(N,j,F[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(F)):w(Object(F)).forEach(function(j){Object.defineProperty(N,j,Object.getOwnPropertyDescriptor(F,j))})}return N}function k(N,C,F){return(C=L(C))in N?Object.defineProperty(N,C,{value:F,enumerable:!0,configurable:!0,writable:!0}):N[C]=F,N}function x(N,C){for(var F=0;F<C.length;F++){var j=C[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(N,L(j.key),j)}}function L(N){var C=function(F,j){if(u(F)!="object"||!F)return F;var q=F[Symbol.toPrimitive];if(q!==void 0){var Q=q.call(F,j);if(u(Q)!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(F)}(N,"string");return u(C)=="symbol"?C:C+""}var z=new(function(){return N=function J(){(function(X,Y){if(!(X instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,J),this.logs=[],this.isSending=!1,this.maxBatchSize=20,this.flushInterval=5e3,this.flushIntervalId=null,this.config=O({},r.KB),this.deviceId=null,this.startFlushInterval()},C=[{key:"setConfig",value:function(J){this.config=O(O({},this.config),J)}},{key:"startFlushInterval",value:function(){var J=this;this.flushIntervalId&&clearInterval(this.flushIntervalId),this.flushIntervalId=setInterval(function(){return J.flush()},this.flushInterval)}},{key:"stopFlushInterval",value:function(){this.flushIntervalId&&(clearInterval(this.flushIntervalId),this.flushIntervalId=null)}},{key:"getDeviceLoggingId",value:(Q=S(E().m(function J(){var X;return E().w(function(Y){for(;;)switch(Y.p=Y.n){case 0:if(!this.deviceId){Y.n=1;break}return Y.a(2,this.deviceId);case 1:if(Y.p=1,typeof chrome>"u"||!chrome.storage){Y.n=3;break}return Y.n=2,chrome.storage.local.get(["reclaim_device_id"]);case 2:if(!(X=Y.v).reclaim_device_id){Y.n=3;break}return this.deviceId=X.reclaim_device_id,Y.a(2,this.deviceId);case 3:Y.n=5;break;case 4:Y.p=4,Y.v;case 5:if(this.deviceId=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():String(Date.now()),Y.p=6,typeof chrome>"u"||!chrome.storage){Y.n=7;break}return Y.n=7,chrome.storage.local.set({reclaim_device_id:this.deviceId});case 7:Y.n=9;break;case 8:Y.p=8,Y.v;case 9:return Y.a(2,this.deviceId)}},J,this,[[6,8],[1,4]])})),function(){return Q.apply(this,arguments)})},{key:"addLog",value:function(J){this.logs.push(J),this.logs.length>=this.maxBatchSize&&this.flush()}},{key:"shouldLogToConsole",value:function(J,X){return!!this.config.consoleEnabled&&(!!this.config.debugMode||!(X&&!this.config.includeSensitiveToConsole)&&J>=this.config.consoleLevel)}},{key:"shouldSendToBackend",value:function(J,X){return!!this.config.backendEnabled&&!(X&&!this.config.includeSensitiveToBackend)&&J>=this.config.backendLevel}},{key:"emitToConsole",value:function(J,X,Y){var M=Y?"".concat(X," ").concat(JSON.stringify(Y)):X;switch(J){case r.E$.ERROR:console.error(M);break;case r.E$.WARN:console.warn(M);break;case r.E$.INFO:console.info(M);break;default:console.log(M)}}},{key:"logWithLevel",value:function(J,X){var Y=X.sessionId,M=X.providerId,ut=X.appId,lt=X.message,At=X.type,wt=X.sensitive,Ct=wt!==void 0&&wt,gt=X.meta,G=X.source,jt=X.tabId,Lt=X.url,te=G||this.config.source;if(this.shouldLogToConsole(J,Ct)&&this.emitToConsole(J,lt,gt),this.shouldSendToBackend(J,Ct)){var Gt=new d({sessionId:Y,providerId:M,appId:ut,logLine:lt,type:At,level:J,sensitive:Ct,source:te,tabId:jt,url:Lt,meta:gt,time:new Date});this.addLog(Gt)}}},{key:"debug",value:function(J){this.logWithLevel(r.E$.DEBUG,J)}},{key:"info",value:function(J){this.logWithLevel(r.E$.INFO,J)}},{key:"warn",value:function(J){this.logWithLevel(r.E$.WARN,J)}},{key:"error",value:function(J){this.logWithLevel(r.E$.ERROR,J)}},{key:"flush",value:(q=S(E().m(function J(){var X,Y;return E().w(function(M){for(;;)switch(M.p=M.n){case 0:if(this.logs.length!==0&&!this.isSending){M.n=1;break}return M.a(2);case 1:return X=b(this.logs),this.logs=[],M.p=2,this.isSending=!0,M.n=3,this.sendLogs(X);case 3:M.n=5;break;case 4:M.p=4,Y=M.v,console.error("Error flushing logs:",Y),this.logs=[].concat(b(this.logs),b(X));case 5:return M.p=5,this.isSending=!1,M.f(5);case 6:return M.a(2)}},J,this,[[2,4,5,6]])})),function(){return q.apply(this,arguments)})},{key:"sendLogs",value:(j=S(E().m(function J(X){var Y,M,ut,lt,At,wt,Ct;return E().w(function(gt){for(;;)switch(gt.n){case 0:if(X!=null&&X.length){gt.n=1;break}return gt.a(2);case 1:return gt.n=2,this.getDeviceLoggingId();case 2:return Y=gt.v,M=X.map(function(G){var jt=G.toJson();return jt.deviceId=jt.deviceId||Y,jt}),ut=JSON.stringify({logs:M,source:this.config.source,deviceId:Y}),gt.n=3,fetch(r.bQ.DIAGNOSTIC_LOGGING,{method:"POST",headers:{"Content-Type":"application/json"},body:ut});case 3:if((lt=gt.v).ok){gt.n=5;break}return At=console,wt="Failed to send ".concat(X.length," logs"),gt.n=4,lt.text();case 4:Ct=gt.v,At.error.call(At,wt,Ct);case 5:return gt.a(2)}},J,this)})),function(J){return j.apply(this,arguments)})}],C&&x(N.prototype,C),F&&x(N,F),Object.defineProperty(N,"prototype",{writable:!1}),N;var N,C,F,j,q,Q}()),_=function(){var N,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=O({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:((N=z.config)===null||N===void 0?void 0:N.source)||"reclaim-extension-sdk"},C);return{get context(){return O({},F)},setContext:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(F,j)},debug:function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.debug(O(O({},F),{},{message:j},q))},info:function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.info(O(O({},F),{},{message:j},q))},warn:function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.warn(O(O({},F),{},{message:j},q))},error:function(j){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};z.error(O(O({},F),{},{message:j},q))}}}},859:(o,e,t)=>{t.d(e,{D_:()=>i,E$:()=>a,KB:()=>f,bQ:()=>r});var r={DIAGNOSTIC_LOGGING:"https://logs.reclaimprotocol.org/api/business-logs/logDump"},i={BACKGROUND:"reclaim_browser_extension.BackgroundProcess",CONTENT:"reclaim_browser_extension.ContentScript",POPUP:"reclaim_browser_extension.Popup",INIT:"reclaim_browser_extension.Initialization",VERIFICATION:"reclaim_browser_extension.Verification",FETCH_DATA:"reclaim_browser_extension.FetchData",PROVIDER_DATA:"reclaim_browser_extension.ProviderData",CLAIM_CREATION:"reclaim_browser_extension.ClaimCreation",PROOF_GENERATION:"reclaim_browser_extension.ProofGeneration",PROOF_SUBMISSION:"reclaim_browser_extension.ProofSubmission",PROOF_VERIFICATION:"reclaim_browser_extension.ProofVerification",OFFSCREEN:"reclaim_browser_extension.Offscreen"},a={DEBUG:10,INFO:20,WARN:30,ERROR:40},f={consoleEnabled:!0,consoleLevel:a.INFO,includeSensitiveToConsole:!0,backendEnabled:!0,backendLevel:a.INFO,includeSensitiveToBackend:!1,debugMode:!1,source:"reclaim-extension-sdk"}},887:(o,e,t)=>{function r(S,w){var O=typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(!O){if(Array.isArray(S)||(O=d(S))||w){O&&(S=O);var k=0,x=function(){};return{s:x,n:function(){return k>=S.length?{done:!0}:{done:!1,value:S[k++]}},e:function(N){throw N},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,z=!0,_=!1;return{s:function(){O=O.call(S)},n:function(){var N=O.next();return z=N.done,N},e:function(N){_=!0,L=N},f:function(){try{z||O.return==null||O.return()}finally{if(_)throw L}}}}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var S,w,O=typeof Symbol=="function"?Symbol:{},k=O.iterator||"@@iterator",x=O.toStringTag||"@@toStringTag";function L(Q,J,X,Y){var M=J&&J.prototype instanceof _?J:_,ut=Object.create(M.prototype);return a(ut,"_invoke",function(lt,At,wt){var Ct,gt,G,jt=0,Lt=wt||[],te=!1,Gt={p:0,n:0,v:S,a:Mt,f:Mt.bind(S,4),d:function(It,Pt){return Ct=It,gt=0,G=S,Gt.n=Pt,z}};function Mt(It,Pt){for(gt=It,G=Pt,w=0;!te&&jt&&!Et&&w<Lt.length;w++){var Et,Wt=Lt[w],ue=Gt.p,Ht=Wt[2];It>3?(Et=Ht===Pt)&&(G=Wt[(gt=Wt[4])?5:(gt=3,3)],Wt[4]=Wt[5]=S):Wt[0]<=ue&&((Et=It<2&&ue<Wt[1])?(gt=0,Gt.v=Pt,Gt.n=Wt[1]):ue<Ht&&(Et=It<3||Wt[0]>Pt||Pt>Ht)&&(Wt[4]=It,Wt[5]=Pt,Gt.n=Ht,gt=0))}if(Et||It>1)return z;throw te=!0,Pt}return function(It,Pt,Et){if(jt>1)throw TypeError("Generator is already running");for(te&&Pt===1&&Mt(Pt,Et),gt=Pt,G=Et;(w=gt<2?S:G)||!te;){Ct||(gt?gt<3?(gt>1&&(Gt.n=-1),Mt(gt,G)):Gt.n=G:Gt.v=G);try{if(jt=2,Ct){if(gt||(It="next"),w=Ct[It]){if(!(w=w.call(Ct,G)))throw TypeError("iterator result is not an object");if(!w.done)return w;G=w.value,gt<2&&(gt=0)}else gt===1&&(w=Ct.return)&&w.call(Ct),gt<2&&(G=TypeError("The iterator does not provide a '"+It+"' method"),gt=1);Ct=S}else if((w=(te=Gt.n<0)?G:lt.call(At,Gt))!==z)break}catch(Wt){Ct=S,gt=1,G=Wt}finally{jt=1}}return{value:w,done:te}}}(Q,X,Y),!0),ut}var z={};function _(){}function N(){}function C(){}w=Object.getPrototypeOf;var F=[][k]?w(w([][k]())):(a(w={},k,function(){return this}),w),j=C.prototype=_.prototype=Object.create(F);function q(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,C):(Q.__proto__=C,a(Q,x,"GeneratorFunction")),Q.prototype=Object.create(j),Q}return N.prototype=C,a(j,"constructor",C),a(C,"constructor",N),N.displayName="GeneratorFunction",a(C,x,"GeneratorFunction"),a(j),a(j,x,"Generator"),a(j,k,function(){return this}),a(j,"toString",function(){return"[object Generator]"}),(i=function(){return{w:L,m:q}})()}function a(S,w,O,k){var x=Object.defineProperty;try{x({},"",{})}catch{x=0}a=function(L,z,_,N){function C(F,j){a(L,F,function(q){return this._invoke(F,j,q)})}z?x?x(L,z,{value:_,enumerable:!N,configurable:!N,writable:!N}):L[z]=_:(C("next",0),C("throw",1),C("return",2))},a(S,w,O,k)}function f(S){return function(w){if(Array.isArray(w))return u(w)}(S)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(S)||d(S)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(S,w){if(S){if(typeof S=="string")return u(S,w);var O={}.toString.call(S).slice(8,-1);return O==="Object"&&S.constructor&&(O=S.constructor.name),O==="Map"||O==="Set"?Array.from(S):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?u(S,w):void 0}}function u(S,w){(w==null||w>S.length)&&(w=S.length);for(var O=0,k=Array(w);O<w;O++)k[O]=S[O];return k}function b(S,w,O,k,x,L,z){try{var _=S[L](z),N=_.value}catch(C){return void O(C)}_.done?w(N):Promise.resolve(N).then(k,x)}function v(S){return function(){var w=this,O=arguments;return new Promise(function(k,x){var L=S.apply(w,O);function z(N){b(L,k,x,z,_,"next",N)}function _(N){b(L,k,x,z,_,"throw",N)}z(void 0)})}}function E(S,w,O){return T.apply(this,arguments)}function T(){return T=v(i().m(function S(w,O,k){var x,L,z,_,N,C,F,j,q,Q,J,X,Y,M,ut,lt,At,wt,Ct,gt,G,jt,Lt,te,Gt,Mt,It,Pt,Et,Wt,ue,Ht,Rt,le,qt,ne,c,g,m,B,K,W,ct,Bt,$t,se;return i().w(function(kt){for(;;)switch(kt.p=kt.n){case 0:if(kt.p=0,chrome.cookies&&chrome.cookies.getAll){kt.n=1;break}return O==null||(x=O.warn)===null||x===void 0||x.call(O,k==null?void 0:k.BACKGROUND,"[BACKGROUND] Chrome cookies API not available"),kt.a(2,null);case 1:return L=new URL(w),z=L.hostname,L.protocol,_=function(pt){var Nt=pt.split(".");if(Nt.length<=2)return pt;var Xt=new Set(["co.uk","ac.uk","gov.uk","co.in","com.au","com.br","com.mx","com.sg"]),Jt=Nt.slice(-2).join("."),Pe=Nt.slice(-3).join(".");return Xt.has(Jt)?Nt.slice(-3).join("."):Xt.has(Pe)?Nt.slice(-4).join("."):Nt.slice(-2).join(".")},N=function(pt){var Nt=_(pt),Xt=new Set;return Xt.add("https://".concat(pt)),Xt.add("https://".concat(Nt)),Xt.add("https://www.".concat(Nt)),f(Xt)},C=function(pt){var Nt=pt.split("."),Xt=new Set;Xt.add(pt);for(var Jt=1;Jt<Nt.length;Jt++)Xt.add(Nt.slice(Jt).join(".")),Xt.add("."+Nt.slice(Jt).join("."));return f(Xt)},F=function(){var pt=v(i().m(function Nt(){var Xt;return i().w(function(Jt){for(;;)switch(Jt.p=Jt.n){case 0:return Jt.p=0,Jt.n=1,chrome.cookies.getAllCookieStores();case 1:return Xt=Jt.v,Jt.a(2,Array.isArray(Xt)&&Xt.length?Xt:[{id:void 0}]);case 2:return Jt.p=2,Jt.v,Jt.a(2,[{id:void 0}])}},Nt,null,[[0,2]])}));return function(){return pt.apply(this,arguments)}}(),j=function(){var pt=v(i().m(function Nt(Xt){var Jt,Pe;return i().w(function(pe){for(;;)switch(pe.p=pe.n){case 0:return pe.p=0,pe.n=1,chrome.cookies.getAll(Xt);case 1:return pe.a(2,pe.v);case 2:return pe.p=2,Pe=pe.v,O==null||(Jt=O.warn)===null||Jt===void 0||Jt.call(O,k==null?void 0:k.BACKGROUND,"[BACKGROUND] cookies.getAll failed for",Xt,Pe),pe.a(2,[])}},Nt,null,[[0,2]])}));return function(Nt){return pt.apply(this,arguments)}}(),q=function(pt){return D(pt,L,O,k)},Q=function(pt,Nt){var Xt,Jt,Pe,pe;if(!!pt.hostOnly!=!!Nt.hostOnly)return pt.hostOnly?pt:Nt;if((((Xt=pt.path)===null||Xt===void 0?void 0:Xt.length)||0)!==(((Jt=Nt.path)===null||Jt===void 0?void 0:Jt.length)||0))return(((Pe=pt.path)===null||Pe===void 0?void 0:Pe.length)||0)>(((pe=Nt.path)===null||pe===void 0?void 0:pe.length)||0)?pt:Nt;var Nn=pt.expirationDate||0,kn=Nt.expirationDate||0;if(Nn!==kn)return Nn>kn?pt:Nt;var xn=pt.lastAccessed||0,oo=Nt.lastAccessed||0;return xn!==oo?xn>oo?pt:Nt:pt},J=[],kt.n=2,F();case 2:X=kt.v,Y=[],M=function(pt){var Nt=JSON.stringify(pt);Y.some(function(Xt){return JSON.stringify(Xt)===Nt})||Y.push(pt)},ut=C(z),lt=N(z),At=r(X);try{for(At.s();!(wt=At.n()).done;){Ct=wt.value.id,gt=r(ut);try{for(gt.s();!(G=gt.n()).done;)jt=G.value,M({domain:jt,storeId:Ct})}catch(pt){gt.e(pt)}finally{gt.f()}M({url:w,storeId:Ct}),Lt=r(ut);try{for(Lt.s();!(te=Lt.n()).done;){Gt=te.value,Mt=r(lt);try{for(Mt.s();!(It=Mt.n()).done;)Pt=It.value,M({domain:Gt,partitionKey:{topLevelSite:Pt},storeId:Ct})}catch(pt){Mt.e(pt)}finally{Mt.f()}}}catch(pt){Lt.e(pt)}finally{Lt.f()}Et=r(lt);try{for(Et.s();!(Wt=Et.n()).done;)ue=Wt.value,M({url:w,partitionKey:{topLevelSite:ue},storeId:Ct})}catch(pt){Et.e(pt)}finally{Et.f()}}}catch(pt){At.e(pt)}finally{At.f()}return kt.n=3,Promise.all(Y.map(function(pt){return j(pt)}));case 3:Ht=kt.v,Rt=r(Ht);try{for(Rt.s();!(le=Rt.n()).done;)qt=le.value,J.push.apply(J,f(qt))}catch(pt){Rt.e(pt)}finally{Rt.f()}ne=function(pt){var Nt;return[pt.name,pt.domain||"",pt.path||"",((Nt=pt.partitionKey)===null||Nt===void 0?void 0:Nt.topLevelSite)||""].join("|")},c=new Map,g=0,m=J;case 4:if(!(g<m.length)){kt.n=7;break}if(B=m[g],q(B)){kt.n=5;break}return kt.a(3,6);case 5:K=ne(B),W=c.get(K),c.set(K,W?Q(W,B):B);case 6:g++,kt.n=4;break;case 7:if((ct=f(c.values())).length!==0){kt.n=8;break}return kt.a(2,null);case 8:return ct.sort(function(pt,Nt){var Xt=function(Pe){return Pe?Pe.length:0};if(Xt(pt.path)!==Xt(Nt.path))return Xt(Nt.path)-Xt(pt.path);if(!!pt.hostOnly!=!!Nt.hostOnly)return pt.hostOnly?-1:1;var Jt=pt.expirationDate||0;return(Nt.expirationDate||0)-Jt}),Bt=ct.map(function(pt){return"".concat(pt.name,"=").concat(pt.value)}).join("; "),kt.a(2,Bt||null);case 9:return kt.p=9,se=kt.v,O==null||($t=O.error)===null||$t===void 0||$t.call(O,k==null?void 0:k.BACKGROUND,"[BACKGROUND] Error getting cookies for URL:",se),kt.a(2,null)}},S,null,[[0,9]])})),T.apply(this,arguments)}function D(S,w,O,k){try{var x=S.domain.startsWith(".")?S.domain.substring(1):S.domain,L=w.hostname;if(!(L===x||L.endsWith("."+x)||S.domain.startsWith(".")&&L.endsWith(S.domain.substring(1))))return!1;var z=S.path||"/";if(!w.pathname.startsWith(z))return!1;var _=w.protocol==="https:";return!(S.secure&&!_)&&!(S.expirationDate&&S.expirationDate<Date.now()/1e3)}catch(N){return O.warn(k.BACKGROUND,"[BACKGROUND] Error checking cookie inclusion:",N),!1}}t.d(e,{W3:()=>E})},952:(o,e,t)=>{t.d(e,{Sn:()=>i,fn:()=>r,wx:()=>u,J_:()=>d,vQ:()=>a,Ew:()=>f});var r="https://api.reclaimprotocol.org",i={PROVIDER_URL:function(b){return"".concat(r,"/api/providers/").concat(b)},SUBMIT_PROOF:function(b){return"".concat(r,"/session/").concat(b,"/proof")},UPDATE_SESSION_STATUS:function(){return"".concat(r,"/api/sdk/update/session/")},STATUS_URL:function(b){return"".concat(r,"/api/sdk/status/").concat(b)}},a={CHECK_EXTENSION:"RECLAIM_EXTENSION_CHECK",EXTENSION_RESPONSE:"RECLAIM_EXTENSION_RESPONSE",START_VERIFICATION:"RECLAIM_START_VERIFICATION",VERIFICATION_STARTED:"RECLAIM_VERIFICATION_STARTED",VERIFICATION_COMPLETED:"RECLAIM_VERIFICATION_COMPLETED",VERIFICATION_FAILED:"RECLAIM_VERIFICATION_FAILED",CANCEL_VERIFICATION:"RECLAIM_CANCEL_VERIFICATION",SET_PUBLIC_DATA:"RECLAIM_SET_PUBLIC_DATA",PARAMETERS_UPDATE:"RECLAIM_PARAMETERS_UPDATE",PARAMETERS_GET:"RECLAIM_PARAMETERS_GET",REPORT_PROVIDER_ERROR:"RECLAIM_REPORT_PROVIDER_ERROR",SET_EXPECT_MANY_CLAIMS:"RECLAIM_SET_EXPECT_MANY_CLAIMS",REQUEST_CLAIM:"RECLAIM_REQUEST_CLAIM"},f={SESSION_INIT:"SESSION_INIT",SESSION_STARTED:"SESSION_STARTED",USER_INIT_VERIFICATION:"USER_INIT_VERIFICATION",USER_STARTED_VERIFICATION:"USER_STARTED_VERIFICATION",PROOF_GENERATION_STARTED:"PROOF_GENERATION_STARTED",PROOF_GENERATION_SUCCESS:"PROOF_GENERATION_SUCCESS",PROOF_GENERATION_FAILED:"PROOF_GENERATION_FAILED",PROOF_SUBMITTED:"PROOF_SUBMITTED",PROOF_SUBMISSION_FAILED:"PROOF_SUBMISSION_FAILED",PROOF_MANUAL_VERIFICATION_SUBMITED:"PROOF_MANUAL_VERIFICATION_SUBMITED"},d={CONTENT_SCRIPT:"content-script",BACKGROUND:"background",OFFSCREEN:"offscreen"},u={START_VERIFICATION:"START_VERIFICATION",CANCEL_VERIFICATION:"CANCEL_VERIFICATION",GENERATE_PROOF_REQUEST:"GENERATE_PROOF_REQUEST",CLAIM_CREATION_REQUESTED:"CLAIM_CREATION_REQUESTED",CLAIM_CREATION_SUCCESS:"CLAIM_CREATION_SUCCESS",CLAIM_CREATION_FAILED:"CLAIM_CREATION_FAILED",PROOF_GENERATION_STARTED:"PROOF_GENERATION_STARTED",PROOF_GENERATION_SUCCESS:"PROOF_GENERATION_SUCCESS",PROOF_GENERATION_FAILED:"PROOF_GENERATION_FAILED",PROOF_SUBMITTED:"PROOF_SUBMITTED",PROOF_SUBMISSION_FAILED:"PROOF_SUBMISSION_FAILED",GENERATE_PROOF:"GENERATE_PROOF",GENERATED_PROOF_RESPONSE:"GENERATED_PROOF_RESPONSE",GENERATE_CLAIM_ON_ATTESTOR:"GENERATE_CLAIM_ON_ATTESTOR",GET_PRIVATE_KEY:"GET_PRIVATE_KEY",GET_PRIVATE_KEY_RESPONSE:"GET_PRIVATE_KEY_RESPONSE",SHOW_PROVIDER_VERIFICATION_POPUP:"SHOW_PROVIDER_VERIFICATION_POPUP",OFFSCREEN_DOCUMENT_READY:"OFFSCREEN_DOCUMENT_READY",GENERATE_PROOF_RESPONSE:"GENERATE_PROOF_RESPONSE",PING_OFFSCREEN:"PING_OFFSCREEN",CLOSE_CURRENT_TAB:"CLOSE_CURRENT_TAB",GET_CURRENT_TAB_ID:"GET_CURRENT_TAB_ID",REQUEST_PROVIDER_DATA:"REQUEST_PROVIDER_DATA",PROVIDER_DATA_READY:"PROVIDER_DATA_READY",CONTENT_SCRIPT_LOADED:"CONTENT_SCRIPT_LOADED",SHOULD_INITIALIZE:"SHOULD_INITIALIZE",CHECK_IF_MANAGED_TAB:"CHECK_IF_MANAGED_TAB",FILTERED_REQUEST_FOUND:"FILTERED_REQUEST_FOUND",INTERCEPTED_REQUEST_AND_RESPONSE:"INTERCEPTED_REQUEST_AND_RESPONSE",UPDATE_PUBLIC_DATA:"UPDATE_PUBLIC_DATA",UPDATE_EXPECT_MANY_CLAIMS:"UPDATE_EXPECT_MANY_CLAIMS",GET_PARAMETERS:"GET_PARAMETERS",REPORT_PROVIDER_ERROR:"REPORT_PROVIDER_ERROR",REQUEST_CLAIM:"REQUEST_CLAIM",INJECT_VIA_SCRIPTING:"INJECT_VIA_SCRIPTING"}},997:(o,e,t)=>{var r=t(287),i=t(606),a=t.n(i),f=t(153);function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var _,N,C=typeof Symbol=="function"?Symbol:{},F=C.iterator||"@@iterator",j=C.toStringTag||"@@toStringTag";function q(At,wt,Ct,gt){var G=wt&&wt.prototype instanceof J?wt:J,jt=Object.create(G.prototype);return u(jt,"_invoke",function(Lt,te,Gt){var Mt,It,Pt,Et=0,Wt=Gt||[],ue=!1,Ht={p:0,n:0,v:_,a:Rt,f:Rt.bind(_,4),d:function(le,qt){return Mt=le,It=0,Pt=_,Ht.n=qt,Q}};function Rt(le,qt){for(It=le,Pt=qt,N=0;!ue&&Et&&!ne&&N<Wt.length;N++){var ne,c=Wt[N],g=Ht.p,m=c[2];le>3?(ne=m===qt)&&(Pt=c[(It=c[4])?5:(It=3,3)],c[4]=c[5]=_):c[0]<=g&&((ne=le<2&&g<c[1])?(It=0,Ht.v=qt,Ht.n=c[1]):g<m&&(ne=le<3||c[0]>qt||qt>m)&&(c[4]=le,c[5]=qt,Ht.n=m,It=0))}if(ne||le>1)return Q;throw ue=!0,qt}return function(le,qt,ne){if(Et>1)throw TypeError("Generator is already running");for(ue&&qt===1&&Rt(qt,ne),It=qt,Pt=ne;(N=It<2?_:Pt)||!ue;){Mt||(It?It<3?(It>1&&(Ht.n=-1),Rt(It,Pt)):Ht.n=Pt:Ht.v=Pt);try{if(Et=2,Mt){if(It||(le="next"),N=Mt[le]){if(!(N=N.call(Mt,Pt)))throw TypeError("iterator result is not an object");if(!N.done)return N;Pt=N.value,It<2&&(It=0)}else It===1&&(N=Mt.return)&&N.call(Mt),It<2&&(Pt=TypeError("The iterator does not provide a '"+le+"' method"),It=1);Mt=_}else if((N=(ue=Ht.n<0)?Pt:Lt.call(te,Ht))!==Q)break}catch(c){Mt=_,It=1,Pt=c}finally{Et=1}}return{value:N,done:ue}}}(At,Ct,gt),!0),jt}var Q={};function J(){}function X(){}function Y(){}N=Object.getPrototypeOf;var M=[][F]?N(N([][F]())):(u(N={},F,function(){return this}),N),ut=Y.prototype=J.prototype=Object.create(M);function lt(At){return Object.setPrototypeOf?Object.setPrototypeOf(At,Y):(At.__proto__=Y,u(At,j,"GeneratorFunction")),At.prototype=Object.create(ut),At}return X.prototype=Y,u(ut,"constructor",Y),u(Y,"constructor",X),X.displayName="GeneratorFunction",u(Y,j,"GeneratorFunction"),u(ut),u(ut,j,"Generator"),u(ut,F,function(){return this}),u(ut,"toString",function(){return"[object Generator]"}),(d=function(){return{w:q,m:lt}})()}function u(_,N,C,F){var j=Object.defineProperty;try{j({},"",{})}catch{j=0}u=function(q,Q,J,X){function Y(M,ut){u(q,M,function(lt){return this._invoke(M,ut,lt)})}Q?j?j(q,Q,{value:J,enumerable:!X,configurable:!X,writable:!X}):q[Q]=J:(Y("next",0),Y("throw",1),Y("return",2))},u(_,N,C,F)}function b(_,N,C,F,j,q,Q){try{var J=_[q](Q),X=J.value}catch(Y){return void C(Y)}J.done?N(X):Promise.resolve(X).then(F,j)}function v(_){return function(){var N=this,C=arguments;return new Promise(function(F,j){var q=_.apply(N,C);function Q(X){b(q,F,j,Q,J,"next",X)}function J(X){b(q,F,j,Q,J,"throw",X)}Q(void 0)})}}var E,T,D,S=typeof window<"u"?window:typeof self<"u"?self:S!==void 0?S:Function("return this")(),w=typeof window>"u",O=typeof document<"u"&&document.contentType!==void 0;if(S.Buffer=S.Buffer||r.hp,S.process=S.process||a(),S.WebSocket!==void 0||O)O?f.w9.info(f.Ey.POLYFILLS,"Skipping WebSocket in content script context"):f.w9.info(f.Ey.POLYFILLS,"Using native WebSocket implementation");else try{var k=t(296).WebSocket;S.WebSocket=k,f.w9.info(f.Ey.POLYFILLS,"WebSocket polyfill added to global")}catch(_){f.w9.warn(f.Ey.POLYFILLS,"Failed to load WebSocket polyfill:",_)}if(S.process&&(S.process.browser=!0),typeof S.require!="function")S.require=function(_){switch(_){case"ws":if(O)return f.w9.info(f.Ey.POLYFILLS,"Blocking ws module in content script"),{};try{return{WebSocket:t(296).WebSocket}}catch(N){return f.w9.warn(f.Ey.POLYFILLS,"Failed to load WebSocket for ws module:",N),{}}case"fs":return S.fs;case"path":return S.path;case"os":return S.os;case"crypto":return S.crypto;case"worker_threads":case"koffi":case"re2":return{};default:return console.warn("Mock require called for module: ".concat(_)),{}}};else{var x=S.require;S.require=function(_){if(_==="ws"){if(O)return f.w9.info(f.Ey.POLYFILLS,"Blocking ws module in content script"),{};try{return{WebSocket:t(296).WebSocket}}catch(N){return f.w9.warn(f.Ey.POLYFILLS,"Failed to load WebSocket for ws module:",N),{}}}try{return x(_)}catch{return f.w9.warn(f.Ey.POLYFILLS,"Failed to require module: ".concat(_)),{}}}}if(a()!==void 0&&(a().browser=!0,a().version||(a().version="v16.0.0"),a().cwd||(a().cwd=function(){return"/"})),S.global===void 0&&(S.global=S),S.crypto===void 0&&(S.crypto={}),S.crypto.getRandomValues===void 0&&(S.crypto.getRandomValues=function(_){for(var N=new Uint8Array(_.length),C=0;C<N.length;C++)N[C]=Math.floor(256*Math.random());return N}),S.crypto.subtle===void 0&&(f.w9.warn(f.Ey.POLYFILLS,"WebCrypto subtle API not available. Some functionality may not work."),S.crypto.subtle={digest:(E=v(d().m(function _(N,C){var F,j,q;return d().w(function(Q){for(;;)if(Q.n===0){for(f.w9.warn(f.Ey.POLYFILLS,"Crypto subtle digest (".concat(N,") called with browser fallback")),F=Array.from(new Uint8Array(C)).reduce(function(J,X){return 31*J+X&4294967295},0),j=new Uint8Array(32),q=0;q<32;q++)j[q]=F>>8*q&255;return Q.a(2,j.buffer)}},_)})),function(_,N){return E.apply(this,arguments)})}),!w){var L=function(_,N){return typeof _=="string"&&_.startsWith("node:")&&(_=_.replace(/^node:/,"")),new z(_,N)};S.domain===void 0&&(S.domain={create:function(){return{run:function(_){return _()},on:function(){},bind:function(_){return _}}}});var z=S.URL;L.prototype=z.prototype;try{Object.getOwnPropertyNames(z).forEach(function(_){if(_!=="prototype"&&_!=="constructor")try{L[_]=z[_]}catch{}})}catch(_){f.w9.warn(f.Ey.POLYFILLS,"Could not copy all URL static properties:",_)}try{S.URL=L}catch(_){f.w9.warn(f.Ey.POLYFILLS,"Could not override URL constructor:",_)}}S.module===void 0&&(S.module={exports:{}}),S.fs=S.fs||{readFileSync:function(_){throw f.w9.warn(f.Ey.POLYFILLS,"Attempted to readFileSync: ".concat(_)),new Error("fs.readFileSync is not available in this environment")},writeFileSync:function(_,N){f.w9.warn(f.Ey.POLYFILLS,"Attempted to writeFileSync: ".concat(_))},existsSync:function(_){return f.w9.warn(f.Ey.POLYFILLS,"Attempted to check if file exists: ".concat(_)),!1},promises:{readFile:(D=v(d().m(function _(N){return d().w(function(C){for(;;)switch(C.n){case 0:throw f.w9.warn(f.Ey.POLYFILLS,"Attempted to readFile: ".concat(N)),new Error("fs.promises.readFile is not available in this environment");case 1:return C.a(2)}},_)})),function(_){return D.apply(this,arguments)}),writeFile:(T=v(d().m(function _(N,C){return d().w(function(F){for(;;)switch(F.n){case 0:f.w9.warn(f.Ey.POLYFILLS,"Attempted to writeFile: ".concat(N));case 1:return F.a(2)}},_)})),function(_,N){return T.apply(this,arguments)})}},S.os=S.os||{tmpdir:function(){return"/tmp"},homedir:function(){return"/home/user"},platform:function(){return"browser"},type:function(){return"Browser"},cpus:function(){return[{model:"Browser CPU",speed:1e3}]},totalmem:function(){return 8589934592},freemem:function(){return 4294967296}},S.path=S.path||{join:function(){for(var _=arguments.length,N=new Array(_),C=0;C<_;C++)N[C]=arguments[C];return N.join("/").replace(/\/+/g,"/")},resolve:function(){for(var _=arguments.length,N=new Array(_),C=0;C<_;C++)N[C]=arguments[C];return N.join("/").replace(/\/+/g,"/")},dirname:function(_){return _.split("/").slice(0,-1).join("/")||"."},basename:function(_,N){var C=_.split("/").pop()||"";return N&&C.endsWith(N)&&(C=C.slice(0,-N.length)),C},extname:function(_){var N=_.split("/").pop()||"",C=N.lastIndexOf(".");return C<0?"":N.slice(C)},sep:"/"},r.hp,a()}},gs={};function Ie(o){var e=gs[o];if(e!==void 0)return e.exports;var t=gs[o]={id:o,loaded:!1,exports:{}};return Yu[o](t,t.exports,Ie),t.loaded=!0,t.exports}Ie.n=o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return Ie.d(e,{a:e}),e},Ie.d=(o,e)=>{for(var t in e)Ie.o(e,t)&&!Ie.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:e[t]})},Ie.hmd=o=>((o=Object.create(o)).children||(o.children=[]),Object.defineProperty(o,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+o.id)}}),o),Ie.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e),Ie.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var li={};Ie.r(li),Ie.d(li,{OG:()=>xi,My:()=>In,Ph:()=>_r,lX:()=>Ni,Id:()=>zn,fg:()=>Da,qj:()=>Ye,aT:()=>Wn,lq:()=>tn,z:()=>ki,Q5:()=>Yn});Ie(997);var Ju=Ie(329),Le=Ie(952);function De(o){if(!Number.isSafeInteger(o)||o<0)throw new Error(`Wrong positive integer: ${o}`)}function Ai(o,...e){if(!(o instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(o.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${o.length}`)}function ya(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");De(o.outputLen),De(o.blockLen)}function On(o,e=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(e&&o.finished)throw new Error("Hash#digest() has already been called")}function ba(o,e){Ai(o);const t=e.outputLen;if(o.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const uo=BigInt(2**32-1),fi=BigInt(32);function va(o,e=!1){return e?{h:Number(o&uo),l:Number(o>>fi&uo)}:{h:0|Number(o>>fi&uo),l:0|Number(o&uo)}}function Ea(o,e=!1){let t=new Uint32Array(o.length),r=new Uint32Array(o.length);for(let i=0;i<o.length;i++){const{h:a,l:f}=va(o[i],e);[t[i],r[i]]=[a,f]}return[t,r]}const wa=(o,e,t)=>o<<t|e>>>32-t,Sa=(o,e,t)=>e<<t|o>>>32-t,Oa=(o,e,t)=>e<<t-32|o>>>64-t,Aa=(o,e,t)=>o<<t-32|e>>>64-t,Kt={fromBig:va,split:Ea,toBig:(o,e)=>BigInt(o>>>0)<<fi|BigInt(e>>>0),shrSH:(o,e,t)=>o>>>t,shrSL:(o,e,t)=>o<<32-t|e>>>t,rotrSH:(o,e,t)=>o>>>t|e<<32-t,rotrSL:(o,e,t)=>o<<32-t|e>>>t,rotrBH:(o,e,t)=>o<<64-t|e>>>t-32,rotrBL:(o,e,t)=>o>>>t-32|e<<64-t,rotr32H:(o,e)=>e,rotr32L:(o,e)=>o,rotlSH:wa,rotlSL:Sa,rotlBH:Oa,rotlBL:Aa,add:function(o,e,t,r){const i=(e>>>0)+(r>>>0);return{h:o+t+(i/2**32|0)|0,l:0|i}},add3L:(o,e,t)=>(o>>>0)+(e>>>0)+(t>>>0),add3H:(o,e,t,r)=>e+t+r+(o/2**32|0)|0,add4L:(o,e,t,r)=>(o>>>0)+(e>>>0)+(t>>>0)+(r>>>0),add4H:(o,e,t,r,i)=>e+t+r+i+(o/2**32|0)|0,add5H:(o,e,t,r,i,a)=>e+t+r+i+a+(o/2**32|0)|0,add5L:(o,e,t,r,i)=>(o>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)},Wo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Ia=o=>o instanceof Uint8Array,wo=o=>new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)),So=o=>new DataView(o.buffer,o.byteOffset,o.byteLength),tr=(o,e)=>o<<32-e|o>>>e;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const Qu=async()=>{};async function ms(o,e,t){let r=Date.now();for(let i=0;i<o;i++){t(i);const a=Date.now()-r;a>=0&&a<e||(await Qu(),r+=a)}}function An(o){if(typeof o=="string"&&(o=function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(o)),!Ia(o))throw new Error("expected Uint8Array, got "+typeof o);return o}class Ii{clone(){return this._cloneInto()}}const Xu={}.toString;function Ta(o,e){if(e!==void 0&&Xu.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(o,e)}function ko(o){const e=r=>o().update(An(r)).digest(),t=o();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>o(),e}function Zu(o=32){if(Wo&&typeof Wo.getRandomValues=="function")return Wo.getRandomValues(new Uint8Array(o));throw new Error("crypto.getRandomValues must be defined")}const[Ra,Pa,Ca]=[[],[],[]],tc=BigInt(0),jn=BigInt(1),ec=BigInt(2),rc=BigInt(7),nc=BigInt(256),oc=BigInt(113);for(let o=0,e=jn,t=1,r=0;o<24;o++){[t,r]=[r,(2*t+3*r)%5],Ra.push(2*(5*r+t)),Pa.push((o+1)*(o+2)/2%64);let i=tc;for(let a=0;a<7;a++)e=(e<<jn^(e>>rc)*oc)%nc,e&ec&&(i^=jn<<(jn<<BigInt(a))-jn);Ca.push(i)}const[ic,sc]=Ea(Ca,!0),ys=(o,e,t)=>t>32?Oa(o,e,t):wa(o,e,t),bs=(o,e,t)=>t>32?Aa(o,e,t):Sa(o,e,t);class Ti extends Ii{constructor(e,t,r,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,De(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wo(this.state)}keccak(){(function(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let d=0;d<10;d++)r[d]=e[d]^e[d+10]^e[d+20]^e[d+30]^e[d+40];for(let d=0;d<10;d+=2){const u=(d+8)%10,b=(d+2)%10,v=r[b],E=r[b+1],T=ys(v,E,1)^r[u],D=bs(v,E,1)^r[u+1];for(let S=0;S<50;S+=10)e[d+S]^=T,e[d+S+1]^=D}let a=e[2],f=e[3];for(let d=0;d<24;d++){const u=Pa[d],b=ys(a,f,u),v=bs(a,f,u),E=Ra[d];a=e[E],f=e[E+1],e[E]=b,e[E+1]=v}for(let d=0;d<50;d+=10){for(let u=0;u<10;u++)r[u]=e[d+u];for(let u=0;u<10;u++)e[d+u]^=~r[(u+2)%10]&r[(u+4)%10]}e[0]^=ic[i],e[1]^=sc[i]}r.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){On(this);const{blockLen:t,state:r}=this,i=(e=An(e)).length;for(let a=0;a<i;){const f=Math.min(t-this.pos,i-a);for(let d=0;d<f;d++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,128&t&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){On(this,!1),Ai(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,a=e.length;i<a;){this.posOut>=r&&this.keccak();const f=Math.min(r-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+f),i),this.posOut+=f,i+=f}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return De(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ba(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:a,enableXOF:f}=this;return e||(e=new Ti(t,r,i,f,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=f,e.destroyed=this.destroyed,e}}const ac=(o,e,t)=>ko(()=>new Ti(e,o,t)),uc=ac(1,136,32),Na="6.15.0";async function Ri(o){const e=Object.keys(o);return(await Promise.all(e.map(t=>Promise.resolve(o[t])))).reduce((t,r,i)=>(t[e[i]]=r,t),{})}function Be(o,e,t){for(let r in e){let i=e[r];Object.defineProperty(o,r,{enumerable:!0,value:i,writable:!1})}}function Yr(o,e){if(o==null)return"null";if(e==null&&(e=new Set),typeof o=="object"){if(e.has(o))return"[Circular]";e.add(o)}if(Array.isArray(o))return"[ "+o.map(t=>Yr(t,e)).join(", ")+" ]";if(o instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let i=0;i<o.length;i++)r+=t[o[i]>>4],r+=t[15&o[i]];return r}if(typeof o=="object"&&typeof o.toJSON=="function")return Yr(o.toJSON(),e);switch(typeof o){case"boolean":case"number":case"symbol":return o.toString();case"bigint":return BigInt(o).toString();case"string":return JSON.stringify(o);case"object":{const t=Object.keys(o);return t.sort(),"{ "+t.map(r=>`${Yr(r,e)}: ${Yr(o[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function cc(o,e,t){let r,i=o;{const a=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Yr(t)}`);for(const f in t){if(f==="shortMessage")continue;const d=t[f];a.push(f+"="+Yr(d))}}a.push(`code=${e}`),a.push(`version=${Na}`),a.length&&(o+=" ("+a.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":r=new TypeError(o);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(o);break;default:r=new Error(o)}return Be(r,{code:e}),t&&Object.assign(r,t),r.shortMessage==null&&Be(r,{shortMessage:i}),r}function Yt(o,e,t,r){if(!o)throw cc(e,t,r)}function Z(o,e,t,r){Yt(o,e,"INVALID_ARGUMENT",{argument:t,value:r})}const lc=["NFD","NFC","NFKD","NFKC"].reduce((o,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");o.push(e)}catch{}return o},[]);function ka(o){Yt(lc.indexOf(o)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:o}})}function xo(o,e,t){if(t==null&&(t=""),o!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),Yt(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function xa(o,e,t){if(o instanceof Uint8Array)return t?new Uint8Array(o):o;if(typeof o=="string"&&o.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((o.length-2)/2);let i=2;for(let a=0;a<r.length;a++)r[a]=parseInt(o.substring(i,i+2),16),i+=2;return r}Z(!1,"invalid BytesLike value",e||"value",o)}function Ot(o,e){return xa(o,e,!1)}function Pr(o,e){return xa(o,e,!0)}function sr(o,e){return!(typeof o!="string"||!o.match(/^0x[0-9A-Fa-f]*$/))&&(typeof e!="number"||o.length===2+2*e)&&(e!==!0||o.length%2==0)}function _o(o){return sr(o,!0)||o instanceof Uint8Array}const vs="0123456789abcdef";function vt(o){const e=Ot(o);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=vs[(240&i)>>4]+vs[15&i]}return t}function me(o){return"0x"+o.map(e=>vt(e).substring(2)).join("")}function $n(o){return sr(o,!0)?(o.length-2)/2:Ot(o).length}function Pi(o,e,t){const r=Ot(o);return t>r.length&&Yt(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),vt(r.slice(e,t))}function fc(o,e,t){const r=Ot(o);Yt(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),i.set(r,e-r.length),vt(i)}function Or(o,e){return fc(o,e)}let Es=!1;const _a=function(o){return uc(o)};let La=_a;function ye(o){const e=Ot(o,"data");return vt(La(e))}ye._=_a,ye.lock=function(){Es=!0},ye.register=function(o){if(Es)throw new TypeError("keccak256 is locked");La=o},Object.freeze(ye);class Ci extends Ii{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=So(this.buffer)}update(e){On(this);const{view:t,buffer:r,blockLen:i}=this,a=(e=An(e)).length;for(let f=0;f<a;){const d=Math.min(i-this.pos,a-f);if(d===i){const u=So(e);for(;i<=a-f;f+=i)this.process(u,f);continue}r.set(e.subarray(f,f+d),this.pos),this.pos+=d,f+=d,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){On(this),ba(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:a}=this;let{pos:f}=this;t[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>i-f&&(this.process(r,0),f=0);for(let E=f;E<i;E++)t[E]=0;(function(E,T,D,S){if(typeof E.setBigUint64=="function")return E.setBigUint64(T,D,S);const w=BigInt(32),O=BigInt(4294967295),k=Number(D>>w&O),x=Number(D&O),L=S?4:0,z=S?0:4;E.setUint32(T+L,k,S),E.setUint32(T+z,x,S)})(r,i-8,BigInt(8*this.length),a),this.process(r,0);const d=So(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=u/4,v=this.get();if(b>v.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<b;E++)d.setUint32(4*E,v[E],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:a,destroyed:f,pos:d}=this;return e.length=i,e.pos=d,e.finished=a,e.destroyed=f,i%t&&e.buffer.set(r),e}}const hc=(o,e,t)=>o&e^~o&t,dc=(o,e,t)=>o&e^o&t^e&t,pc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gr=new Uint32Array(64);class gc extends Ci{constructor(){super(64,32,8,!1),this.A=0|pr[0],this.B=0|pr[1],this.C=0|pr[2],this.D=0|pr[3],this.E=0|pr[4],this.F=0|pr[5],this.G=0|pr[6],this.H=0|pr[7]}get(){const{A:e,B:t,C:r,D:i,E:a,F:f,G:d,H:u}=this;return[e,t,r,i,a,f,d,u]}set(e,t,r,i,a,f,d,u){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|a,this.F=0|f,this.G=0|d,this.H=0|u}process(e,t){for(let E=0;E<16;E++,t+=4)gr[E]=e.getUint32(t,!1);for(let E=16;E<64;E++){const T=gr[E-15],D=gr[E-2],S=tr(T,7)^tr(T,18)^T>>>3,w=tr(D,17)^tr(D,19)^D>>>10;gr[E]=w+gr[E-7]+S+gr[E-16]|0}let{A:r,B:i,C:a,D:f,E:d,F:u,G:b,H:v}=this;for(let E=0;E<64;E++){const T=v+(tr(d,6)^tr(d,11)^tr(d,25))+hc(d,u,b)+pc[E]+gr[E]|0,D=(tr(r,2)^tr(r,13)^tr(r,22))+dc(r,i,a)|0;v=b,b=u,u=d,d=f+T|0,f=a,a=i,i=r,r=T+D|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,f=f+this.D|0,d=d+this.E|0,u=u+this.F|0,b=b+this.G|0,v=v+this.H|0,this.set(r,i,a,f,d,u,b,v)}roundClean(){gr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Cn=ko(()=>new gc),mc=(BigInt(0),BigInt(1)),yc=BigInt(2),Lo=o=>o instanceof Uint8Array,bc=Array.from({length:256},(o,e)=>e.toString(16).padStart(2,"0"));function In(o){if(!Lo(o))throw new Error("Uint8Array expected");let e="";for(let t=0;t<o.length;t++)e+=bc[o[t]];return e}function Ua(o){if(typeof o!="string")throw new Error("hex string expected, got "+typeof o);return BigInt(o===""?"0":`0x${o}`)}function Wn(o){if(typeof o!="string")throw new Error("hex string expected, got "+typeof o);const e=o.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=2*r,a=o.slice(i,i+2),f=Number.parseInt(a,16);if(Number.isNaN(f)||f<0)throw new Error("Invalid byte sequence");t[r]=f}return t}function _r(o){return Ua(In(o))}function Ni(o){if(!Lo(o))throw new Error("Uint8Array expected");return Ua(In(Uint8Array.from(o).reverse()))}function tn(o,e){return Wn(o.toString(16).padStart(2*e,"0"))}function ki(o,e){return tn(o,e).reverse()}function Ye(o,e,t){let r;if(typeof e=="string")try{r=Wn(e)}catch(a){throw new Error(`${o} must be valid hex string, got "${e}". Cause: ${a}`)}else{if(!Lo(e))throw new Error(`${o} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${o} expected ${t} bytes, got ${i}`);return r}function zn(...o){const e=new Uint8Array(o.reduce((r,i)=>r+i.length,0));let t=0;return o.forEach(r=>{if(!Lo(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}const xi=o=>(yc<<BigInt(o-1))-mc,zo=o=>new Uint8Array(o),ws=o=>Uint8Array.from(o);function Da(o,e,t){if(typeof o!="number"||o<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=zo(o),i=zo(o),a=0;const f=()=>{r.fill(1),i.fill(0),a=0},d=(...v)=>t(i,r,...v),u=(v=zo())=>{i=d(ws([0]),v),r=d(),v.length!==0&&(i=d(ws([1]),v),r=d())},b=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const E=[];for(;v<e;){r=d();const T=r.slice();E.push(T),v+=r.length}return zn(...E)};return(v,E)=>{let T;for(f(),u(v);!(T=E(b()));)u();return f(),T}}const vc={bigint:o=>typeof o=="bigint",function:o=>typeof o=="function",boolean:o=>typeof o=="boolean",string:o=>typeof o=="string",stringOrUint8Array:o=>typeof o=="string"||o instanceof Uint8Array,isSafeInteger:o=>Number.isSafeInteger(o),array:o=>Array.isArray(o),field:(o,e)=>e.Fp.isValid(o),hash:o=>typeof o=="function"&&Number.isSafeInteger(o.outputLen)};function Yn(o,e,t={}){const r=(i,a,f)=>{const d=vc[a];if(typeof d!="function")throw new Error(`Invalid validator "${a}", expected function`);const u=o[i];if(!(f&&u===void 0||d(u,o)))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${a}`)};for(const[i,a]of Object.entries(e))r(i,a,!1);for(const[i,a]of Object.entries(t))r(i,a,!0);return o}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ee=BigInt(0),de=BigInt(1),Ar=BigInt(2),Ec=BigInt(3),Yo=BigInt(4),Ss=BigInt(5),Os=BigInt(8);BigInt(9),BigInt(16);function Te(o,e){const t=o%e;return t>=Ee?t:e+t}function wc(o,e,t){if(t<=Ee||e<Ee)throw new Error("Expected power/modulo > 0");if(t===de)return Ee;let r=de;for(;e>Ee;)e&de&&(r=r*o%t),o=o*o%t,e>>=de;return r}function je(o,e,t){let r=o;for(;e-- >Ee;)r*=r,r%=t;return r}function hi(o,e){if(o===Ee||e<=Ee)throw new Error(`invert: expected positive integers, got n=${o} mod=${e}`);let t=Te(o,e),r=e,i=Ee,a=de;for(;t!==Ee;){const f=r/t,d=r%t,u=i-a*f;r=t,t=d,i=a,a=u}if(r!==de)throw new Error("invert: does not exist");return Te(i,e)}function Sc(o){if(o%Yo===Ec){const e=(o+de)/Yo;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(o%Os===Ss){const e=(o-Ss)/Os;return function(t,r){const i=t.mul(r,Ar),a=t.pow(i,e),f=t.mul(r,a),d=t.mul(t.mul(f,Ar),a),u=t.mul(f,t.sub(d,t.ONE));if(!t.eql(t.sqr(u),r))throw new Error("Cannot find square root");return u}}return function(e){const t=(e-de)/Ar;let r,i,a;for(r=e-de,i=0;r%Ar===Ee;r/=Ar,i++);for(a=Ar;a<e&&wc(a,t,e)!==e-de;a++);if(i===1){const d=(e+de)/Yo;return function(u,b){const v=u.pow(b,d);if(!u.eql(u.sqr(v),b))throw new Error("Cannot find square root");return v}}const f=(r+de)/Ar;return function(d,u){if(d.pow(u,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let b=i,v=d.pow(d.mul(d.ONE,a),r),E=d.pow(u,f),T=d.pow(u,r);for(;!d.eql(T,d.ONE);){if(d.eql(T,d.ZERO))return d.ZERO;let D=1;for(let w=d.sqr(T);D<b&&!d.eql(w,d.ONE);D++)w=d.sqr(w);const S=d.pow(v,de<<BigInt(b-D-1));v=d.sqr(S),E=d.mul(E,S),T=d.mul(T,v),b=D}return E}}(o)}const Oc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ba(o,e){const t=e!==void 0?e:o.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function ja(o){if(typeof o!="bigint")throw new Error("field order must be bigint");const e=o.toString(2).length;return Math.ceil(e/8)}function As(o){const e=ja(o);return e+Math.ceil(e/2)}class Ga extends Ii{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ya(e);const r=An(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?e.create().update(r).digest():r);for(let f=0;f<a.length;f++)a[f]^=54;this.iHash.update(a),this.oHash=e.create();for(let f=0;f<a.length;f++)a[f]^=106;this.oHash.update(a),a.fill(0)}update(e){return On(this),this.iHash.update(e),this}digestInto(e){On(this),Ai(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:a,blockLen:f,outputLen:d}=this;return e.finished=i,e.destroyed=a,e.blockLen=f,e.outputLen=d,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Uo=(o,e,t)=>new Ga(o,e).update(t).digest();Uo.create=(o,e)=>new Ga(o,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ac=BigInt(0),Jo=BigInt(1);function Fa(o){return Yn(o.Fp,Oc.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Yn(o,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ba(o.n,o.nBitLength),...o,p:o.Fp.ORDER})}const{Ph:Ic,aT:Tc}=li,Lr={Err:class extends Error{constructor(o=""){super(o)}},_parseInt(o){const{Err:e}=Lr;if(o.length<2||o[0]!==2)throw new e("Invalid signature integer tag");const t=o[1],r=o.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(r[0]===0&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Ic(r),l:o.subarray(t+2)}},toSig(o){const{Err:e}=Lr,t=typeof o=="string"?Tc(o):o;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=Lr._parseInt(t.subarray(2)),{d:f,l:d}=Lr._parseInt(a);if(d.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:f}},hexFromSig(o){const e=b=>8&Number.parseInt(b[0],16)?"00"+b:b,t=b=>{const v=b.toString(16);return 1&v.length?`0${v}`:v},r=e(t(o.s)),i=e(t(o.r)),a=r.length/2,f=i.length/2,d=t(a),u=t(f);return`30${t(f+a+4)}02${u}${i}02${d}${r}`}},hr=BigInt(0),$e=BigInt(1),Is=(BigInt(2),BigInt(3));BigInt(4);function Rc(o){const e=function(S){const w=Fa(S);Yn(w,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:O,Fp:k,a:x}=w;if(O){if(!k.eql(x,k.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof O!="object"||typeof O.beta!="bigint"||typeof O.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...w})}(o),{Fp:t}=e,r=e.toBytes||((S,w,O)=>{const k=w.toAffine();return zn(Uint8Array.from([4]),t.toBytes(k.x),t.toBytes(k.y))}),i=e.fromBytes||(S=>{const w=S.subarray(1);return{x:t.fromBytes(w.subarray(0,t.BYTES)),y:t.fromBytes(w.subarray(t.BYTES,2*t.BYTES))}});function a(S){const{a:w,b:O}=e,k=t.sqr(S),x=t.mul(k,S);return t.add(t.add(x,t.mul(S,w)),O)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function f(S){return typeof S=="bigint"&&hr<S&&S<e.n}function d(S){if(!f(S))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(S){const{allowedPrivateKeyLengths:w,nByteLength:O,wrapPrivateKey:k,n:x}=e;if(w&&typeof S!="bigint"){if(S instanceof Uint8Array&&(S=In(S)),typeof S!="string"||!w.includes(S.length))throw new Error("Invalid key");S=S.padStart(2*O,"0")}let L;try{L=typeof S=="bigint"?S:_r(Ye("private key",S,O))}catch{throw new Error(`private key must be ${O} bytes, hex or bigint, not ${typeof S}`)}return k&&(L=Te(L,x)),d(L),L}const b=new Map;function v(S){if(!(S instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(w,O,k){if(this.px=w,this.py=O,this.pz=k,w==null||!t.isValid(w))throw new Error("x required");if(O==null||!t.isValid(O))throw new Error("y required");if(k==null||!t.isValid(k))throw new Error("z required")}static fromAffine(w){const{x:O,y:k}=w||{};if(!w||!t.isValid(O)||!t.isValid(k))throw new Error("invalid affine point");if(w instanceof E)throw new Error("projective point not allowed");const x=L=>t.eql(L,t.ZERO);return x(O)&&x(k)?E.ZERO:new E(O,k,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const O=t.invertBatch(w.map(k=>k.pz));return w.map((k,x)=>k.toAffine(O[x])).map(E.fromAffine)}static fromHex(w){const O=E.fromAffine(i(Ye("pointHex",w)));return O.assertValidity(),O}static fromPrivateKey(w){return E.BASE.multiply(u(w))}_setWindowSize(w){this._WINDOW_SIZE=w,b.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:w,y:O}=this.toAffine();if(!t.isValid(w)||!t.isValid(O))throw new Error("bad point: x or y not FE");const k=t.sqr(O),x=a(w);if(!t.eql(k,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:w}=this.toAffine();if(t.isOdd)return!t.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){v(w);const{px:O,py:k,pz:x}=this,{px:L,py:z,pz:_}=w,N=t.eql(t.mul(O,_),t.mul(L,x)),C=t.eql(t.mul(k,_),t.mul(z,x));return N&&C}negate(){return new E(this.px,t.neg(this.py),this.pz)}double(){const{a:w,b:O}=e,k=t.mul(O,Is),{px:x,py:L,pz:z}=this;let _=t.ZERO,N=t.ZERO,C=t.ZERO,F=t.mul(x,x),j=t.mul(L,L),q=t.mul(z,z),Q=t.mul(x,L);return Q=t.add(Q,Q),C=t.mul(x,z),C=t.add(C,C),_=t.mul(w,C),N=t.mul(k,q),N=t.add(_,N),_=t.sub(j,N),N=t.add(j,N),N=t.mul(_,N),_=t.mul(Q,_),C=t.mul(k,C),q=t.mul(w,q),Q=t.sub(F,q),Q=t.mul(w,Q),Q=t.add(Q,C),C=t.add(F,F),F=t.add(C,F),F=t.add(F,q),F=t.mul(F,Q),N=t.add(N,F),q=t.mul(L,z),q=t.add(q,q),F=t.mul(q,Q),_=t.sub(_,F),C=t.mul(q,j),C=t.add(C,C),C=t.add(C,C),new E(_,N,C)}add(w){v(w);const{px:O,py:k,pz:x}=this,{px:L,py:z,pz:_}=w;let N=t.ZERO,C=t.ZERO,F=t.ZERO;const j=e.a,q=t.mul(e.b,Is);let Q=t.mul(O,L),J=t.mul(k,z),X=t.mul(x,_),Y=t.add(O,k),M=t.add(L,z);Y=t.mul(Y,M),M=t.add(Q,J),Y=t.sub(Y,M),M=t.add(O,x);let ut=t.add(L,_);return M=t.mul(M,ut),ut=t.add(Q,X),M=t.sub(M,ut),ut=t.add(k,x),N=t.add(z,_),ut=t.mul(ut,N),N=t.add(J,X),ut=t.sub(ut,N),F=t.mul(j,M),N=t.mul(q,X),F=t.add(N,F),N=t.sub(J,F),F=t.add(J,F),C=t.mul(N,F),J=t.add(Q,Q),J=t.add(J,Q),X=t.mul(j,X),M=t.mul(q,M),J=t.add(J,X),X=t.sub(Q,X),X=t.mul(j,X),M=t.add(M,X),Q=t.mul(J,M),C=t.add(C,Q),Q=t.mul(ut,M),N=t.mul(Y,N),N=t.sub(N,Q),Q=t.mul(Y,J),F=t.mul(ut,F),F=t.add(F,Q),new E(N,C,F)}subtract(w){return this.add(w.negate())}is0(){return this.equals(E.ZERO)}wNAF(w){return D.wNAFCached(this,b,w,O=>{const k=t.invertBatch(O.map(x=>x.pz));return O.map((x,L)=>x.toAffine(k[L])).map(E.fromAffine)})}multiplyUnsafe(w){const O=E.ZERO;if(w===hr)return O;if(d(w),w===$e)return this;const{endo:k}=e;if(!k)return D.unsafeLadder(this,w);let{k1neg:x,k1:L,k2neg:z,k2:_}=k.splitScalar(w),N=O,C=O,F=this;for(;L>hr||_>hr;)L&$e&&(N=N.add(F)),_&$e&&(C=C.add(F)),F=F.double(),L>>=$e,_>>=$e;return x&&(N=N.negate()),z&&(C=C.negate()),C=new E(t.mul(C.px,k.beta),C.py,C.pz),N.add(C)}multiply(w){d(w);let O,k,x=w;const{endo:L}=e;if(L){const{k1neg:z,k1:_,k2neg:N,k2:C}=L.splitScalar(x);let{p:F,f:j}=this.wNAF(_),{p:q,f:Q}=this.wNAF(C);F=D.constTimeNegate(z,F),q=D.constTimeNegate(N,q),q=new E(t.mul(q.px,L.beta),q.py,q.pz),O=F.add(q),k=j.add(Q)}else{const{p:z,f:_}=this.wNAF(x);O=z,k=_}return E.normalizeZ([O,k])[0]}multiplyAndAddUnsafe(w,O,k){const x=E.BASE,L=(_,N)=>N!==hr&&N!==$e&&_.equals(x)?_.multiply(N):_.multiplyUnsafe(N),z=L(this,O).add(L(w,k));return z.is0()?void 0:z}toAffine(w){const{px:O,py:k,pz:x}=this,L=this.is0();w==null&&(w=L?t.ONE:t.inv(x));const z=t.mul(O,w),_=t.mul(k,w),N=t.mul(x,w);if(L)return{x:t.ZERO,y:t.ZERO};if(!t.eql(N,t.ONE))throw new Error("invZ was invalid");return{x:z,y:_}}isTorsionFree(){const{h:w,isTorsionFree:O}=e;if(w===$e)return!0;if(O)return O(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:O}=e;return w===$e?this:O?O(E,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return this.assertValidity(),r(E,this,w)}toHex(w=!0){return In(this.toRawBytes(w))}}E.BASE=new E(e.Gx,e.Gy,t.ONE),E.ZERO=new E(t.ZERO,t.ONE,t.ZERO);const T=e.nBitLength,D=function(S,w){const O=(x,L)=>{const z=L.negate();return x?z:L},k=x=>({windows:Math.ceil(w/x)+1,windowSize:2**(x-1)});return{constTimeNegate:O,unsafeLadder(x,L){let z=S.ZERO,_=x;for(;L>Ac;)L&Jo&&(z=z.add(_)),_=_.double(),L>>=Jo;return z},precomputeWindow(x,L){const{windows:z,windowSize:_}=k(L),N=[];let C=x,F=C;for(let j=0;j<z;j++){F=C,N.push(F);for(let q=1;q<_;q++)F=F.add(C),N.push(F);C=F.double()}return N},wNAF(x,L,z){const{windows:_,windowSize:N}=k(x);let C=S.ZERO,F=S.BASE;const j=BigInt(2**x-1),q=2**x,Q=BigInt(x);for(let J=0;J<_;J++){const X=J*N;let Y=Number(z&j);z>>=Q,Y>N&&(Y-=q,z+=Jo);const M=X,ut=X+Math.abs(Y)-1,lt=J%2!=0,At=Y<0;Y===0?F=F.add(O(lt,L[M])):C=C.add(O(At,L[ut]))}return{p:C,f:F}},wNAFCached(x,L,z,_){const N=x._WINDOW_SIZE||1;let C=L.get(x);return C||(C=this.precomputeWindow(x,N),N!==1&&L.set(x,_(C))),this.wNAF(N,C,z)}}}(E,e.endo?Math.ceil(T/2):T);return{CURVE:e,ProjectivePoint:E,normPrivateKeyToScalar:u,weierstrassEquation:a,isWithinCurveOrder:f}}function Pc(o){const e=function(j){const q=Fa(j);return Yn(q,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...q})}(o),{Fp:t,n:r}=e,i=t.BYTES+1,a=2*t.BYTES+1;function f(j){return Te(j,r)}function d(j){return hi(j,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:b,weierstrassEquation:v,isWithinCurveOrder:E}=Rc({...e,toBytes(j,q,Q){const J=q.toAffine(),X=t.toBytes(J.x),Y=zn;return Q?Y(Uint8Array.from([q.hasEvenY()?2:3]),X):Y(Uint8Array.from([4]),X,t.toBytes(J.y))},fromBytes(j){const q=j.length,Q=j[0],J=j.subarray(1);if(q!==i||Q!==2&&Q!==3){if(q===a&&Q===4)return{x:t.fromBytes(J.subarray(0,t.BYTES)),y:t.fromBytes(J.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${q} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}{const Y=_r(J);if(!(hr<(X=Y)&&X<t.ORDER))throw new Error("Point is not on curve");const M=v(Y);let ut=t.sqrt(M);return!(1&~Q)!=((ut&$e)===$e)&&(ut=t.neg(ut)),{x:Y,y:ut}}var X}}),T=j=>In(tn(j,e.nByteLength));function D(j){return j>r>>$e}const S=(j,q,Q)=>_r(j.slice(q,Q));class w{constructor(q,Q,J){this.r=q,this.s=Q,this.recovery=J,this.assertValidity()}static fromCompact(q){const Q=e.nByteLength;return q=Ye("compactSignature",q,2*Q),new w(S(q,0,Q),S(q,Q,2*Q))}static fromDER(q){const{r:Q,s:J}=Lr.toSig(Ye("DER",q));return new w(Q,J)}assertValidity(){if(!E(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!E(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(q){return new w(this.r,this.s,q)}recoverPublicKey(q){const{r:Q,s:J,recovery:X}=this,Y=L(Ye("msgHash",q));if(X==null||![0,1,2,3].includes(X))throw new Error("recovery id invalid");const M=X===2||X===3?Q+e.n:Q;if(M>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const ut=1&X?"03":"02",lt=u.fromHex(ut+T(M)),At=d(M),wt=f(-Y*At),Ct=f(J*At),gt=u.BASE.multiplyAndAddUnsafe(lt,wt,Ct);if(!gt)throw new Error("point at infinify");return gt.assertValidity(),gt}hasHighS(){return D(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return Wn(this.toDERHex())}toDERHex(){return Lr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wn(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}const O={isValidPrivateKey(j){try{return b(j),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const j=As(e.n);return function(q,Q,J=!1){const X=q.length,Y=ja(Q),M=As(Q);if(X<16||X<M||X>1024)throw new Error(`expected ${M}-1024 bytes of input, got ${X}`);const ut=Te(J?_r(q):Ni(q),Q-de)+de;return J?ki(ut,Y):tn(ut,Y)}(e.randomBytes(j),e.n)},precompute:(j=8,q=u.BASE)=>(q._setWindowSize(j),q.multiply(BigInt(3)),q)};function k(j){const q=j instanceof Uint8Array,Q=typeof j=="string",J=(q||Q)&&j.length;return q?J===i||J===a:Q?J===2*i||J===2*a:j instanceof u}const x=e.bits2int||function(j){const q=_r(j),Q=8*j.length-e.nBitLength;return Q>0?q>>BigInt(Q):q},L=e.bits2int_modN||function(j){return f(x(j))},z=xi(e.nBitLength);function _(j){if(typeof j!="bigint")throw new Error("bigint expected");if(!(hr<=j&&j<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return tn(j,e.nByteLength)}function N(j,q,Q=C){if(["recovered","canonical"].some(G=>G in Q))throw new Error("sign() legacy options not supported");const{hash:J,randomBytes:X}=e;let{lowS:Y,prehash:M,extraEntropy:ut}=Q;Y==null&&(Y=!0),j=Ye("msgHash",j),M&&(j=Ye("prehashed msgHash",J(j)));const lt=L(j),At=b(q),wt=[_(At),_(lt)];if(ut!=null){const G=ut===!0?X(t.BYTES):ut;wt.push(Ye("extraEntropy",G))}const Ct=zn(...wt),gt=lt;return{seed:Ct,k2sig:function(G){const jt=x(G);if(!E(jt))return;const Lt=d(jt),te=u.BASE.multiply(jt).toAffine(),Gt=f(te.x);if(Gt===hr)return;const Mt=f(Lt*f(gt+Gt*At));if(Mt===hr)return;let It=(te.x===Gt?0:2)|Number(te.y&$e),Pt=Mt;return Y&&D(Mt)&&(Pt=function(Et){return D(Et)?f(-Et):Et}(Mt),It^=1),new w(Gt,Pt,It)}}}const C={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(j,q=!0){return u.fromPrivateKey(j).toRawBytes(q)},getSharedSecret:function(j,q,Q=!0){if(k(j))throw new Error("first arg must be private key");if(!k(q))throw new Error("second arg must be public key");return u.fromHex(q).multiply(b(j)).toRawBytes(Q)},sign:function(j,q,Q=C){const{seed:J,k2sig:X}=N(j,q,Q),Y=e;return Da(Y.hash.outputLen,Y.nByteLength,Y.hmac)(J,X)},verify:function(j,q,Q,J=F){var te;const X=j;if(q=Ye("msgHash",q),Q=Ye("publicKey",Q),"strict"in J)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:M}=J;let ut,lt;try{if(typeof X=="string"||X instanceof Uint8Array)try{ut=w.fromDER(X)}catch(Gt){if(!(Gt instanceof Lr.Err))throw Gt;ut=w.fromCompact(X)}else{if(typeof X!="object"||typeof X.r!="bigint"||typeof X.s!="bigint")throw new Error("PARSE");{const{r:Gt,s:Mt}=X;ut=new w(Gt,Mt)}}lt=u.fromHex(Q)}catch(Gt){if(Gt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&ut.hasHighS())return!1;M&&(q=e.hash(q));const{r:At,s:wt}=ut,Ct=L(q),gt=d(wt),G=f(Ct*gt),jt=f(At*gt),Lt=(te=u.BASE.multiplyAndAddUnsafe(lt,G,jt))==null?void 0:te.toAffine();return!!Lt&&f(Lt.x)===At},ProjectivePoint:u,Signature:w,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Cc(o){return{hash:o,hmac:(e,...t)=>Uo(o,e,function(...r){const i=new Uint8Array(r.reduce((f,d)=>f+d.length,0));let a=0;return r.forEach(f=>{if(!Ia(f))throw new Error("Uint8Array expected");i.set(f,a),a+=f.length}),i}(...t)),randomBytes:Zu}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ma=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ts=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nc=BigInt(1),di=BigInt(2),Rs=(o,e)=>(o+e/di)/e;function kc(o){const e=Ma,t=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),f=BigInt(23),d=BigInt(44),u=BigInt(88),b=o*o*o%e,v=b*b*o%e,E=je(v,t,e)*v%e,T=je(E,t,e)*v%e,D=je(T,di,e)*b%e,S=je(D,i,e)*D%e,w=je(S,a,e)*S%e,O=je(w,d,e)*w%e,k=je(O,u,e)*O%e,x=je(k,d,e)*w%e,L=je(x,t,e)*v%e,z=je(L,f,e)*S%e,_=je(z,r,e)*b%e,N=je(_,di,e);if(!pi.eql(pi.sqr(N),o))throw new Error("Cannot find square root");return N}const pi=function(o,e,t=!1,r={}){if(o<=Ee)throw new Error(`Expected Field ORDER > 0, got ${o}`);const{nBitLength:i,nByteLength:a}=Ba(o,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const f=Sc(o),d=Object.freeze({ORDER:o,BITS:i,BYTES:a,MASK:xi(i),ZERO:Ee,ONE:de,create:u=>Te(u,o),isValid:u=>{if(typeof u!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof u);return Ee<=u&&u<o},is0:u=>u===Ee,isOdd:u=>(u&de)===de,neg:u=>Te(-u,o),eql:(u,b)=>u===b,sqr:u=>Te(u*u,o),add:(u,b)=>Te(u+b,o),sub:(u,b)=>Te(u-b,o),mul:(u,b)=>Te(u*b,o),pow:(u,b)=>function(v,E,T){if(T<Ee)throw new Error("Expected power > 0");if(T===Ee)return v.ONE;if(T===de)return E;let D=v.ONE,S=E;for(;T>Ee;)T&de&&(D=v.mul(D,S)),S=v.sqr(S),T>>=de;return D}(d,u,b),div:(u,b)=>Te(u*hi(b,o),o),sqrN:u=>u*u,addN:(u,b)=>u+b,subN:(u,b)=>u-b,mulN:(u,b)=>u*b,inv:u=>hi(u,o),sqrt:r.sqrt||(u=>f(d,u)),invertBatch:u=>function(b,v){const E=new Array(v.length),T=v.reduce((S,w,O)=>b.is0(w)?S:(E[O]=S,b.mul(S,w)),b.ONE),D=b.inv(T);return v.reduceRight((S,w,O)=>b.is0(w)?S:(E[O]=b.mul(S,E[O]),b.mul(S,w)),D),E}(d,u),cmov:(u,b,v)=>v?b:u,toBytes:u=>t?ki(u,a):tn(u,a),fromBytes:u=>{if(u.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${u.length}`);return t?Ni(u):_r(u)}});return Object.freeze(d)}(Ma,void 0,void 0,{sqrt:kc}),br=function(o,e){const t=r=>Pc({...o,...Cc(r)});return Object.freeze({...t(e),create:t})}({a:BigInt(0),b:BigInt(7),Fp:pi,n:Ts,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:o=>{const e=Ts,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Nc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,f=BigInt("0x100000000000000000000000000000000"),d=Rs(a*o,e),u=Rs(-r*o,e);let b=Te(o-d*t-u*i,e),v=Te(-d*r-u*a,e);const E=b>f,T=v>f;if(E&&(b=e-b),T&&(v=e-v),b>f||v>f)throw new Error("splitScalar: Endomorphism failed, k="+o);return{k1neg:E,k1:b,k2neg:T,k2:v}}}},Cn);BigInt(0);br.ProjectivePoint;const _i=BigInt(0),Ir=BigInt(1),gi=9007199254740991;function ae(o,e){switch(typeof o){case"bigint":return o;case"number":return Z(Number.isInteger(o),"underflow",e||"value",o),Z(o>=-9007199254740991&&o<=gi,"overflow",e||"value",o),BigInt(o);case"string":try{if(o==="")throw new Error("empty string");return o[0]==="-"&&o[1]!=="-"?-BigInt(o.substring(1)):BigInt(o)}catch(t){Z(!1,`invalid BigNumberish string: ${t.message}`,e||"value",o)}}Z(!1,"invalid BigNumberish value",e||"value",o)}function Li(o,e){const t=ae(o,e);return Yt(t>=_i,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:o}),t}const Ps="0123456789abcdef";function qa(o){if(o instanceof Uint8Array){let e="0x0";for(const t of o)e+=Ps[t>>4],e+=Ps[15&t];return BigInt(e)}return ae(o)}function Ve(o,e){switch(typeof o){case"bigint":return Z(o>=-9007199254740991&&o<=gi,"overflow",e||"value",o),Number(o);case"number":return Z(Number.isInteger(o),"underflow",e||"value",o),Z(o>=-9007199254740991&&o<=gi,"overflow",e||"value",o),o;case"string":try{if(o==="")throw new Error("empty string");return Ve(BigInt(o),e)}catch(t){Z(!1,`invalid numeric string: ${t.message}`,e||"value",o)}}Z(!1,"invalid numeric value",e||"value",o)}function Tn(o,e){let t=Li(o,"value").toString(16);{const r=Ve(e,"width");for(Yt(2*r>=t.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:o});t.length<2*r;)t="0"+t}return"0x"+t}function ge(o){const e=Li(o,"value");if(e===_i)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const a=2*i;r[i]=parseInt(t.substring(a,a+2),16)}return r}const Cs="0x0000000000000000000000000000000000000000000000000000000000000000",Ns=BigInt(0),ks=BigInt(1),xs=BigInt(2),_s=BigInt(27),Ls=BigInt(28),co=BigInt(35),Hr={};function Us(o){return Or(ge(o),32)}var nn,or,on,Ur;const We=class We{constructor(e,t,r,i){Vt(this,nn);Vt(this,or);Vt(this,on);Vt(this,Ur);xo(e,Hr,"Signature"),Tt(this,nn,t),Tt(this,or,r),Tt(this,on,i),Tt(this,Ur,null)}get r(){return xt(this,nn)}set r(e){Z($n(e)===32,"invalid r","value",e),Tt(this,nn,vt(e))}get s(){return Z(parseInt(xt(this,or).substring(0,3))<8,"non-canonical s; use ._s","s",xt(this,or)),xt(this,or)}set s(e){Z($n(e)===32,"invalid s","value",e),Tt(this,or,vt(e))}get _s(){return xt(this,or)}isValid(){return parseInt(xt(this,or).substring(0,3))<8}get v(){return xt(this,on)}set v(e){const t=Ve(e,"value");Z(t===27||t===28,"invalid v","v",e),Tt(this,on,t)}get networkV(){return xt(this,Ur)}get legacyChainId(){const e=this.networkV;return e==null?null:We.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ot(this.s);return this.yParity&&(e[0]|=128),vt(e)}get compactSerialized(){return me([this.r,this.yParityAndS])}get serialized(){return me([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new We(Hr,this.r,this._s,this.v);return this.networkV&&Tt(e,Ur,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=ae(e,"v");return t==_s||t==Ls?Ns:(Z(t>=co,"invalid EIP-155 v","v",e),(t-co)/xs)}static getChainIdV(e,t){return ae(e)*xs+BigInt(35+t-27)}static getNormalizedV(e){const t=ae(e);return t===Ns||t===_s?27:t===ks||t===Ls?28:(Z(t>=co,"invalid v","v",e),t&ks?27:28)}static from(e){function t(b,v){Z(b,v,"signature",e)}if(e==null)return new We(Hr,Cs,Cs,27);if(typeof e=="string"){const b=Ot(e,"signature");if(b.length===64){const v=vt(b.slice(0,32)),E=b.slice(32,64),T=128&E[0]?28:27;return E[0]&=127,new We(Hr,v,vt(E),T)}if(b.length===65){const v=vt(b.slice(0,32)),E=vt(b.slice(32,64)),T=We.getNormalizedV(b[64]);return new We(Hr,v,E,T)}t(!1,"invalid raw signature length")}if(e instanceof We)return e.clone();const r=e.r;t(r!=null,"missing r");const i=Us(r),a=function(b,v){if(b!=null)return Us(b);if(v!=null){t(sr(v,32),"invalid yParityAndS");const E=Ot(v);return E[0]&=127,vt(E)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:f,v:d}=function(b,v,E){if(b!=null){const T=ae(b);return{networkV:T>=co?T:void 0,v:We.getNormalizedV(T)}}if(v!=null)return t(sr(v,32),"invalid yParityAndS"),{v:128&Ot(v)[0]?28:27};if(E!=null){switch(Ve(E,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),u=new We(Hr,i,a,d);return f&&Tt(u,Ur,f),t(e.yParity==null||Ve(e.yParity,"sig.yParity")===u.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===u.yParityAndS,"yParityAndS mismatch"),u}};nn=new WeakMap,or=new WeakMap,on=new WeakMap,Ur=new WeakMap;let Qe=We;var cr;const kr=class kr{constructor(e){Vt(this,cr);Z($n(e)===32,"invalid private key","privateKey","[REDACTED]"),Tt(this,cr,vt(e))}get privateKey(){return xt(this,cr)}get publicKey(){return kr.computePublicKey(xt(this,cr))}get compressedPublicKey(){return kr.computePublicKey(xt(this,cr),!0)}sign(e){Z($n(e)===32,"invalid digest length","digest",e);const t=br.sign(Pr(e),Pr(xt(this,cr)),{lowS:!0});return Qe.from({r:Tn(t.r,32),s:Tn(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=kr.computePublicKey(e);return vt(br.getSharedSecret(Pr(xt(this,cr)),Ot(t),!1))}static computePublicKey(e,t){let r=Ot(e,"key");if(r.length===32)return vt(br.getPublicKey(r,!!t));if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}return vt(br.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){Z($n(e)===32,"invalid digest length","digest",e);const r=Qe.from(t);let i=br.Signature.fromCompact(Pr(me([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const a=i.recoverPublicKey(Pr(e));return Z(a!=null,"invalid signature for digest","signature",t),"0x"+a.toHex(!1)}static addPoints(e,t,r){const i=br.ProjectivePoint.fromHex(kr.computePublicKey(e).substring(2)),a=br.ProjectivePoint.fromHex(kr.computePublicKey(t).substring(2));return"0x"+i.add(a).toHex(!!r)}};cr=new WeakMap;let ir=kr;const xc=BigInt(0),_c=BigInt(36);function Ds(o){const e=(o=o.toLowerCase()).substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=Ot(ye(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(15&r[i>>1])>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Ui={};for(let o=0;o<10;o++)Ui[String(o)]=String(o);for(let o=0;o<26;o++)Ui[String.fromCharCode(65+o)]=String(10+o);function Lc(o){let e=(o=(o=o.toUpperCase()).substring(4)+o.substring(0,2)+"00").split("").map(r=>Ui[r]).join("");for(;e.length>=15;){let r=e.substring(0,15);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const Uc=function(){const o={};for(let e=0;e<36;e++)o["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return o}();function Re(o){if(Z(typeof o=="string","invalid address","address",o),o.match(/^(0x)?[0-9a-fA-F]{40}$/)){o.startsWith("0x")||(o="0x"+o);const e=Ds(o);return Z(!o.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===o,"bad address checksum","address",o),e}if(o.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(o.substring(2,4)===Lc(o),"bad icap checksum","address",o);let e=function(t){t=t.toLowerCase();let r=xc;for(let i=0;i<t.length;i++)r=r*_c+Uc[t[i]];return r}(o.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Ds("0x"+e)}Z(!1,"invalid address","address",o)}async function Qo(o,e){const t=await e;return t!=null&&t!=="0x0000000000000000000000000000000000000000"||(Yt(typeof o!="string","unconfigured name","UNCONFIGURED_NAME",{value:o}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",o)),Re(t)}function Hn(o,e){return typeof o=="string"?o.match(/^0x[0-9a-f]{40}$/i)?Re(o):(Yt(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Qo(o,e.resolveName(o))):(t=o)&&typeof t.getAddress=="function"?Qo(o,o.getAddress()):o&&typeof o.then=="function"?Qo(o,o):void Z(!1,"unsupported addressable value","target",o);var t}function Gr(o,e){Z(typeof o=="string","invalid string value","str",o),e!=null&&(ka(e),o=o.normalize(e));let t=[];for(let r=0;r<o.length;r++){const i=o.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(63&i|128);else if((64512&i)==55296){r++;const a=o.charCodeAt(r);Z(r<o.length&&(64512&a)==56320,"invalid surrogate pair","str",o);const f=65536+((1023&i)<<10)+(1023&a);t.push(f>>18|240),t.push(f>>12&63|128),t.push(f>>6&63|128),t.push(63&f|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(63&i|128)}return new Uint8Array(t)}function Dc(o){return typeof o=="string"&&(o=Gr(o)),ye(me([Gr(`Ethereum Signed Message:
`),Gr(String(o.length)),o]))}function Bs(o){const e=[];for(;o;)e.unshift(255&o),o>>=8;return e}function Ka(o){if(Array.isArray(o)){let r=[];if(o.forEach(function(a){r=r.concat(Ka(a))}),r.length<=55)return r.unshift(192+r.length),r;const i=Bs(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Ot(o,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Bs(e.length);return t.unshift(183+t.length),t.concat(e)}const js="0123456789abcdef";function vr(o){let e="0x";for(const t of Ka(o))e+=js[t>>4],e+=js[15&t];return e}function Bc(o){return Z(typeof o.address=="string","invalid address for hashAuthorization","auth.address",o),ye(me(["0x05",vr([o.chainId!=null?ge(o.chainId):"0x",Re(o.address),o.nonce!=null?ge(o.nonce):"0x"])]))}function Do(o){return ye(Gr(o))}const $a=new Uint8Array(32);$a.fill(0);const jc=BigInt(-1),Ha=BigInt(0),Va=BigInt(1),Gc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Fc=Tn(Va,32),Mc=Tn(Ha,32),Gs={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Xo=["name","version","chainId","verifyingContract","salt"];function Fs(o){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(o)}`,`domain.${o}`,e),e}}const qc={name:Fs("name"),version:Fs("version"),chainId:function(o){const e=ae(o,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",o),Number.isSafeInteger(e)?Number(e):function(t){let r=vt(_o(t)?t:ge(t)).substring(2);for(;r.startsWith("0");)r=r.substring(1);return r===""&&(r="0"),"0x"+r}(e)},verifyingContract:function(o){try{return Re(o).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",o)},salt:function(o){const e=Ot(o,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",o),vt(e)}};function Zo(o){{const e=o.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);Z(r%8==0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",o);const i=function(f,d){const u=Li(f,"value"),b=BigInt(Ve(d,"bits"));return u&(Ir<<b)-Ir}(Gc,t?r-1:r),a=t?(i+Va)*jc:Ha;return function(f){const d=ae(f,"value");return Z(d>=a&&d<=i,`value out-of-bounds for ${o}`,"value",d),Tn(t?function(u,b){let v=ae(u,"value");const E=BigInt(Ve(b,"width")),T=Ir<<E-Ir;return v<_i?(v=-v,Yt(v<=T,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:u}),(~v&(Ir<<E)-Ir)+Ir):(Yt(v<T,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:u}),v)}(d,256):d,32)}}}{const e=o.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Z(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",o),function(r){return Z(Ot(r).length===t,`invalid length for ${o}`,"value",r),function(i){const a=Ot(i),f=a.length%32;return f?me([a,$a.slice(f)]):vt(a)}(r)}}}switch(o){case"address":return function(e){return Or(Re(e),32)};case"bool":return function(e){return e?Fc:Mc};case"bytes":return function(e){return ye(e)};case"string":return function(e){return Do(e)}}return null}function Ms(o,e){return`${o}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function lo(o){const e=o.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:o}}var Xn,lr,sn,No,Wa;const Ke=class Ke{constructor(e){Vt(this,No);ht(this,"primaryType");Vt(this,Xn);Vt(this,lr);Vt(this,sn);Tt(this,lr,new Map),Tt(this,sn,new Map);const t=new Map,r=new Map,i=new Map,a={};Object.keys(e).forEach(d=>{a[d]=e[d].map(({name:u,type:b})=>{let{base:v,index:E}=lo(b);return v!=="int"||e.int||(v="int256"),v!=="uint"||e.uint||(v="uint256"),{name:u,type:v+(E||"")}}),t.set(d,new Set),r.set(d,[]),i.set(d,new Set)}),Tt(this,Xn,JSON.stringify(a));for(const d in a){const u=new Set;for(const b of a[d]){Z(!u.has(b.name),`duplicate variable name ${JSON.stringify(b.name)} in ${JSON.stringify(d)}`,"types",e),u.add(b.name);const v=lo(b.type).base;Z(v!==d,`circular type reference to ${JSON.stringify(v)}`,"types",e),Zo(v)||(Z(r.has(v),`unknown type ${JSON.stringify(v)}`,"types",e),r.get(v).push(d),t.get(d).add(v))}}const f=Array.from(r.keys()).filter(d=>r.get(d).length===0);Z(f.length!==0,"missing primary type","types",e),Z(f.length===1,`ambiguous primary types or unused types: ${f.map(d=>JSON.stringify(d)).join(", ")}`,"types",e),Be(this,{primaryType:f[0]}),function d(u,b){Z(!b.has(u),`circular type reference to ${JSON.stringify(u)}`,"types",e),b.add(u);for(const v of t.get(u))if(r.has(v)){d(v,b);for(const E of b)i.get(E).add(v)}b.delete(u)}(this.primaryType,new Set);for(const[d,u]of i){const b=Array.from(u);b.sort(),xt(this,lr).set(d,Ms(d,a[d])+b.map(v=>Ms(v,a[v])).join(""))}}get types(){return JSON.parse(xt(this,Xn))}getEncoder(e){let t=xt(this,sn).get(e);return t||(t=be(this,No,Wa).call(this,e),xt(this,sn).set(e,t)),t}encodeType(e){const t=xt(this,lr).get(e);return Z(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ye(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Zo(e))return r(e,t);const i=lo(e).array;if(i)return Z(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(f=>this._visit(i.prefix,f,r));const a=this.types[e];if(a)return a.reduce((f,{name:d,type:u})=>(f[d]=this._visit(u,t[d],r),f),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ke(e)}static getPrimaryType(e){return Ke.from(e).primaryType}static hashStruct(e,t,r){return Ke.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=Gs[r];Z(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Xo.indexOf(r.name)-Xo.indexOf(i.name)),Ke.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return me(["0x1901",Ke.hashDomain(e),Ke.from(t).hash(r)])}static hash(e,t,r){return ye(Ke.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const d in e)e[d]==null&&delete e[d];const a={};e.verifyingContract&&!sr(e.verifyingContract,20)&&(a[e.verifyingContract]="0x");const f=Ke.from(t);f.visit(r,(d,u)=>(d!=="address"||sr(u,20)||(a[u]="0x"),u));for(const d in a)a[d]=await i(d);return e.verifyingContract&&a[e.verifyingContract]&&(e.verifyingContract=a[e.verifyingContract]),{domain:e,value:r=f.visit(r,(d,u)=>d==="address"&&a[u]?a[u]:u)}}static getPayload(e,t,r){Ke.hashDomain(e);const i={},a=[];Xo.forEach(u=>{const b=e[u];b!=null&&(i[u]=qc[u](b),a.push({name:u,type:Gs[u]}))});const f=Ke.from(t);t=f.types;const d=Object.assign({},t);return Z(d.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),d.EIP712Domain=a,f.encode(r),{types:d,domain:i,primaryType:f.primaryType,message:f.visit(r,(u,b)=>{if(u.match(/^bytes(\d*)/))return vt(Ot(b));if(u.match(/^u?int/))return ae(b).toString();switch(u){case"address":return b.toLowerCase();case"bool":return!!b;case"string":return Z(typeof b=="string","invalid string","value",b),b}Z(!1,"unsupported type","type",u)})}}};Xn=new WeakMap,lr=new WeakMap,sn=new WeakMap,No=new WeakSet,Wa=function(e){{const i=Zo(e);if(i)return i}const t=lo(e).array;if(t){const i=t.prefix,a=this.getEncoder(i);return f=>{Z(t.count===-1||t.count===f.length,`array length mismatch; expected length ${t.count}`,"value",f);let d=f.map(a);return xt(this,lr).has(i)&&(d=d.map(ye)),ye(me(d))}}const r=this.types[e];if(r){const i=Do(xt(this,lr).get(e));return a=>{const f=r.map(({name:d,type:u})=>{const b=this.getEncoder(u)(a[d]);return xt(this,lr).has(u)?ye(b):b});return f.unshift(i),me(f)}}Z(!1,`unknown type: ${e}`,"type",e)};let To=Ke;const qs="0x0000000000000000000000000000000000000000";function Kc(o,e,t,r){ya(o);const i=Ta({dkLen:32,asyncTick:10},r),{c:a,dkLen:f,asyncTick:d}=i;if(De(a),De(f),De(d),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=An(e),b=An(t),v=new Uint8Array(f),E=Uo.create(o,u),T=E._cloneInto().update(b);return{c:a,dkLen:f,asyncTick:d,DK:v,PRF:E,PRFSalt:T}}function $c(o,e,t,r,i){return o.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),t}function Di(o,e,t,r){const{c:i,dkLen:a,DK:f,PRF:d,PRFSalt:u}=Kc(o,e,t,r);let b;const v=new Uint8Array(4),E=So(v),T=new Uint8Array(d.outputLen);for(let D=1,S=0;S<a;D++,S+=d.outputLen){const w=f.subarray(S,S+d.outputLen);E.setInt32(0,D,!1),(b=u._cloneInto(b)).update(v).digestInto(T),w.set(T.subarray(0,w.length));for(let O=1;O<i;O++){d._cloneInto(b).update(T).digestInto(T);for(let k=0;k<w.length;k++)w[k]^=T[k]}}return $c(d,u,f,b,T)}const[Hc,Vc]=Kt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(o=>BigInt(o))),mr=new Uint32Array(80),yr=new Uint32Array(80);class Wc extends Ci{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:a,Cl:f,Dh:d,Dl:u,Eh:b,El:v,Fh:E,Fl:T,Gh:D,Gl:S,Hh:w,Hl:O}=this;return[e,t,r,i,a,f,d,u,b,v,E,T,D,S,w,O]}set(e,t,r,i,a,f,d,u,b,v,E,T,D,S,w,O){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|a,this.Cl=0|f,this.Dh=0|d,this.Dl=0|u,this.Eh=0|b,this.El=0|v,this.Fh=0|E,this.Fl=0|T,this.Gh=0|D,this.Gl=0|S,this.Hh=0|w,this.Hl=0|O}process(e,t){for(let L=0;L<16;L++,t+=4)mr[L]=e.getUint32(t),yr[L]=e.getUint32(t+=4);for(let L=16;L<80;L++){const z=0|mr[L-15],_=0|yr[L-15],N=Kt.rotrSH(z,_,1)^Kt.rotrSH(z,_,8)^Kt.shrSH(z,_,7),C=Kt.rotrSL(z,_,1)^Kt.rotrSL(z,_,8)^Kt.shrSL(z,_,7),F=0|mr[L-2],j=0|yr[L-2],q=Kt.rotrSH(F,j,19)^Kt.rotrBH(F,j,61)^Kt.shrSH(F,j,6),Q=Kt.rotrSL(F,j,19)^Kt.rotrBL(F,j,61)^Kt.shrSL(F,j,6),J=Kt.add4L(C,Q,yr[L-7],yr[L-16]),X=Kt.add4H(J,N,q,mr[L-7],mr[L-16]);mr[L]=0|X,yr[L]=0|J}let{Ah:r,Al:i,Bh:a,Bl:f,Ch:d,Cl:u,Dh:b,Dl:v,Eh:E,El:T,Fh:D,Fl:S,Gh:w,Gl:O,Hh:k,Hl:x}=this;for(let L=0;L<80;L++){const z=Kt.rotrSH(E,T,14)^Kt.rotrSH(E,T,18)^Kt.rotrBH(E,T,41),_=Kt.rotrSL(E,T,14)^Kt.rotrSL(E,T,18)^Kt.rotrBL(E,T,41),N=E&D^~E&w,C=T&S^~T&O,F=Kt.add5L(x,_,C,Vc[L],yr[L]),j=Kt.add5H(F,k,z,N,Hc[L],mr[L]),q=0|F,Q=Kt.rotrSH(r,i,28)^Kt.rotrBH(r,i,34)^Kt.rotrBH(r,i,39),J=Kt.rotrSL(r,i,28)^Kt.rotrBL(r,i,34)^Kt.rotrBL(r,i,39),X=r&a^r&d^a&d,Y=i&f^i&u^f&u;k=0|w,x=0|O,w=0|D,O=0|S,D=0|E,S=0|T,{h:E,l:T}=Kt.add(0|b,0|v,0|j,0|q),b=0|d,v=0|u,d=0|a,u=0|f,a=0|r,f=0|i;const M=Kt.add3L(q,J,Y);r=Kt.add3H(M,j,Q,X),i=0|M}({h:r,l:i}=Kt.add(0|this.Ah,0|this.Al,0|r,0|i)),{h:a,l:f}=Kt.add(0|this.Bh,0|this.Bl,0|a,0|f),{h:d,l:u}=Kt.add(0|this.Ch,0|this.Cl,0|d,0|u),{h:b,l:v}=Kt.add(0|this.Dh,0|this.Dl,0|b,0|v),{h:E,l:T}=Kt.add(0|this.Eh,0|this.El,0|E,0|T),{h:D,l:S}=Kt.add(0|this.Fh,0|this.Fl,0|D,0|S),{h:w,l:O}=Kt.add(0|this.Gh,0|this.Gl,0|w,0|O),{h:k,l:x}=Kt.add(0|this.Hh,0|this.Hl,0|k,0|x),this.set(r,i,a,f,d,u,b,v,E,T,D,S,w,O,k,x)}roundClean(){mr.fill(0),yr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bi=ko(()=>new Wc),Ks=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),$s=Ks.crypto||Ks.msCrypto;function zc(o){switch(o){case"sha256":return Cn.create();case"sha512":return Bi.create()}Z(!1,"invalid hashing algorithm name","algorithm",o)}const za=function(o){return zc("sha256").update(o).digest()};let Ya=za,Hs=!1;function He(o){const e=Ot(o,"data");return vt(Ya(e))}function Yc(o){let e=o.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Vs(o,e,t){let r=0;for(let i=0;i<t;i++)r=256*r+o[e+i];return r}function Ws(o,e,t,r){const i=[];for(;t<e+1+r;){const a=Ja(o,t);i.push(a.result),Yt((t+=a.consumed)<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:o,length:r,offset:e})}return{consumed:1+r,result:i}}function Ja(o,e){Yt(o.length!==0,"data too short","BUFFER_OVERRUN",{buffer:o,length:0,offset:1});const t=r=>{Yt(r<=o.length,"data short segment too short","BUFFER_OVERRUN",{buffer:o,length:o.length,offset:r})};if(o[e]>=248){const r=o[e]-247;t(e+1+r);const i=Vs(o,e+1,r);return t(e+1+r+i),Ws(o,e,e+1+r,r+i)}if(o[e]>=192){const r=o[e]-192;return t(e+1+r),Ws(o,e,e+1,r)}if(o[e]>=184){const r=o[e]-183;t(e+1+r);const i=Vs(o,e+1,r);return t(e+1+r+i),{consumed:1+r+i,result:vt(o.slice(e+1+r,e+1+r+i))}}if(o[e]>=128){const r=o[e]-128;return t(e+1+r),{consumed:1+r,result:vt(o.slice(e+1,e+1+r))}}return{consumed:1,result:Yc(o[e])}}function Gn(o){const e=Ot(o,"data"),t=Ja(e,0);return Z(t.consumed===e.length,"unexpected junk after rlp payload","data",o),t.result}function ti(o,e){return{address:Re(o),storageKeys:e.map((t,r)=>(Z(sr(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function Bo(o){if(Array.isArray(o))return o.map((t,r)=>Array.isArray(t)?(Z(t.length===2,"invalid slot set",`value[${r}]`,t),ti(t[0],t[1])):(Z(t!=null&&typeof t=="object","invalid address-slot set","value",o),ti(t.address,t.storageKeys)));Z(o!=null&&typeof o=="object","invalid access list","value",o);const e=Object.keys(o).map(t=>{const r=o[t].reduce((i,a)=>(i[a]=!0,i),{});return ti(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function no(o){let e;return e=typeof o=="string"?ir.computePublicKey(o,!1):o.publicKey,Re(ye("0x"+e.substring(4)).substring(26))}He._=za,He.lock=function(){Hs=!0},He.register=function(o){if(Hs)throw new Error("sha256 is locked");Ya=o},Object.freeze(He),Object.freeze(He);const ve=BigInt(0),Jc=BigInt(2),Qc=BigInt(27),Xc=BigInt(28),Zc=BigInt(35),tl=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ei=131072;function zs(o,e){let t=o.toString(16);for(;t.length<2;)t="0"+t;return t+=He(e).substring(4),"0x"+t}function zr(o){return o==="0x"?null:Re(o)}function fo(o,e){try{return Bo(o)}catch(t){Z(!1,t.message,e,o)}}function el(o,e){try{if(!Array.isArray(o))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<o.length;r++){const i=o[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:zr(i[1]),nonce:ie(i[2],"nonce"),chainId:ie(i[0],"chainId"),signature:Qe.from({yParity:Cr(i[3],"yParity"),r:Or(i[4],32),s:Or(i[5],32)})})}return t}catch(t){Z(!1,t.message,e,o)}}function Cr(o,e){return o==="0x"?0:Ve(o,e)}function ie(o,e){if(o==="0x")return ve;const t=ae(o,e);return Z(t<=tl,"value exceeds uint size",e,t),t}function Qt(o,e){const t=ae(o,"value"),r=ge(t);return Z(r.length<=32,"value too large",`tx.${e}`,t),r}function ho(o){return Bo(o).map(e=>[e.address,e.storageKeys])}function rl(o,e){Z(Array.isArray(o),`invalid ${e}`,"value",o);for(let t=0;t<o.length;t++)Z(sr(o[t],32),"invalid ${ param } hash",`value[${t}]`,o[t]);return o}function po(o,e){let t;try{if(t=Cr(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=Or(e[1],32),i=Or(e[2],32),a=Qe.from({r,s:i,yParity:t});o.signature=a}var Je,an,un,cn,ln,fn,hn,dn,pn,gn,mn,yn,Dr,Er,fr,wr,bn,vn,Oo;const rr=class rr{constructor(){Vt(this,vn);Vt(this,Je);Vt(this,an);Vt(this,un);Vt(this,cn);Vt(this,ln);Vt(this,fn);Vt(this,hn);Vt(this,dn);Vt(this,pn);Vt(this,gn);Vt(this,mn);Vt(this,yn);Vt(this,Dr);Vt(this,Er);Vt(this,fr);Vt(this,wr);Vt(this,bn);Tt(this,Je,null),Tt(this,an,null),Tt(this,cn,0),Tt(this,ln,ve),Tt(this,fn,null),Tt(this,hn,null),Tt(this,dn,null),Tt(this,un,"0x"),Tt(this,pn,ve),Tt(this,gn,ve),Tt(this,mn,null),Tt(this,yn,null),Tt(this,Dr,null),Tt(this,Er,null),Tt(this,fr,null),Tt(this,wr,null),Tt(this,bn,null)}get type(){return xt(this,Je)}set type(e){switch(e){case null:Tt(this,Je,null);break;case 0:case"legacy":Tt(this,Je,0);break;case 1:case"berlin":case"eip-2930":Tt(this,Je,1);break;case 2:case"london":case"eip-1559":Tt(this,Je,2);break;case 3:case"cancun":case"eip-4844":Tt(this,Je,3);break;case 4:case"pectra":case"eip-7702":Tt(this,Je,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=xt(this,an);return e==null&&this.type===3?qs:e}set to(e){Tt(this,an,e==null?null:Re(e))}get nonce(){return xt(this,cn)}set nonce(e){Tt(this,cn,Ve(e,"value"))}get gasLimit(){return xt(this,ln)}set gasLimit(e){Tt(this,ln,ae(e))}get gasPrice(){const e=xt(this,fn);return e!=null||this.type!==0&&this.type!==1?e:ve}set gasPrice(e){Tt(this,fn,e==null?null:ae(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=xt(this,hn);return e??(this.type===2||this.type===3?ve:null)}set maxPriorityFeePerGas(e){Tt(this,hn,e==null?null:ae(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=xt(this,dn);return e??(this.type===2||this.type===3?ve:null)}set maxFeePerGas(e){Tt(this,dn,e==null?null:ae(e,"maxFeePerGas"))}get data(){return xt(this,un)}set data(e){Tt(this,un,vt(e))}get value(){return xt(this,pn)}set value(e){Tt(this,pn,ae(e,"value"))}get chainId(){return xt(this,gn)}set chainId(e){Tt(this,gn,ae(e))}get signature(){return xt(this,mn)||null}set signature(e){Tt(this,mn,e==null?null:Qe.from(e))}get accessList(){const e=xt(this,yn)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Tt(this,yn,e==null?null:Bo(e))}get authorizationList(){const e=xt(this,bn)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Tt(this,bn,e==null?null:e.map(t=>{return{address:Re((r=t).address),nonce:ae(r.nonce!=null?r.nonce:0),chainId:ae(r.chainId!=null?r.chainId:0),signature:Qe.from(r.signature)};var r}))}get maxFeePerBlobGas(){const e=xt(this,Dr);return e==null&&this.type===3?ve:e}set maxFeePerBlobGas(e){Tt(this,Dr,e==null?null:ae(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=xt(this,Er);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Z(sr(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}Tt(this,Er,e)}get blobs(){return xt(this,wr)==null?null:xt(this,wr).map(e=>Object.assign({},e))}set blobs(e){if(e==null)return void Tt(this,wr,null);const t=[],r=[];for(let i=0;i<e.length;i++){const a=e[i];if(_o(a)){Yt(xt(this,fr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let f=Ot(a);if(Z(f.length<=ei,"blob is too large",`blobs[${i}]`,a),f.length!==ei){const b=new Uint8Array(ei);b.set(f),f=b}const d=xt(this,fr).blobToKzgCommitment(f),u=vt(xt(this,fr).computeBlobKzgProof(f,d));t.push({data:vt(f),commitment:vt(d),proof:u}),r.push(zs(1,d))}else{const f=vt(a.commitment);t.push({data:vt(a.data),commitment:f,proof:vt(a.proof)}),r.push(zs(1,f))}}Tt(this,wr,t),Tt(this,Er,r)}get kzg(){return xt(this,fr)}set kzg(e){Tt(this,fr,e==null?null:function(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ot(t.blobToKzgCommitment(vt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ot(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Ot(t.blobToKZGCommitment(vt(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>"computeBlobProof"in t&&typeof t.computeBlobProof=="function"?Ot(t.computeBlobProof(vt(r),vt(i))):"computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function"?t.computeBlobKzgProof(r,i):"computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function"?Ot(t.computeBlobKZGProof(vt(r),vt(i))):void Z(!1,"unsupported KZG library","kzg",t)}}(e))}get hash(){return this.signature==null?null:ye(be(this,vn,Oo).call(this,!0,!1))}get unsignedHash(){return ye(this.unsignedSerialized)}get from(){return this.signature==null?null:(e=this.unsignedHash,t=this.signature,no(ir.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return this.signature==null?null:ir.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return be(this,vn,Oo).call(this,!0,!0)}get unsignedSerialized(){return be(this,vn,Oo).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=xt(this,Dr)!=null||xt(this,Er);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Yt(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Yt(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Yt(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const a=[];return this.type!=null?a.push(this.type):this.authorizationList&&this.authorizationList.length?a.push(4):t?a.push(2):e?(a.push(1),r||a.push(0)):r?(a.push(1),a.push(2)):(i&&this.to||(a.push(0),a.push(1),a.push(2)),a.push(3)),a.sort(),a}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return rr.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new rr;if(typeof e=="string"){const r=Ot(e);if(r[0]>=127)return rr.from(function(i){const a=Gn(i);Z(Array.isArray(a)&&(a.length===9||a.length===6),"invalid field count for legacy transaction","data",i);const f={type:0,nonce:Cr(a[0],"nonce"),gasPrice:ie(a[1],"gasPrice"),gasLimit:ie(a[2],"gasLimit"),to:zr(a[3]),value:ie(a[4],"value"),data:vt(a[5]),chainId:ve};if(a.length===6)return f;const d=ie(a[6],"v"),u=ie(a[7],"r"),b=ie(a[8],"s");if(u===ve&&b===ve)f.chainId=d;else{let v=(d-Zc)/Jc;v<ve&&(v=ve),f.chainId=v,Z(v!==ve||d===Qc||d===Xc,"non-canonical legacy v","v",a[6]),f.signature=Qe.from({r:Or(a[7],32),s:Or(a[8],32),v:d})}return f}(r));switch(r[0]){case 1:return rr.from(function(i){const a=Gn(Ot(i).slice(1));Z(Array.isArray(a)&&(a.length===8||a.length===11),"invalid field count for transaction type: 1","data",vt(i));const f={type:1,chainId:ie(a[0],"chainId"),nonce:Cr(a[1],"nonce"),gasPrice:ie(a[2],"gasPrice"),gasLimit:ie(a[3],"gasLimit"),to:zr(a[4]),value:ie(a[5],"value"),data:vt(a[6]),accessList:fo(a[7],"accessList")};return a.length===8||po(f,a.slice(8)),f}(r));case 2:return rr.from(function(i){const a=Gn(Ot(i).slice(1));Z(Array.isArray(a)&&(a.length===9||a.length===12),"invalid field count for transaction type: 2","data",vt(i));const f={type:2,chainId:ie(a[0],"chainId"),nonce:Cr(a[1],"nonce"),maxPriorityFeePerGas:ie(a[2],"maxPriorityFeePerGas"),maxFeePerGas:ie(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:ie(a[4],"gasLimit"),to:zr(a[5]),value:ie(a[6],"value"),data:vt(a[7]),accessList:fo(a[8],"accessList")};return a.length===9||po(f,a.slice(9)),f}(r));case 3:return rr.from(function(i){let a=Gn(Ot(i).slice(1)),f="3",d=null;if(a.length===4&&Array.isArray(a[0])){f="3 (network format)";const b=a[1],v=a[2],E=a[3];Z(Array.isArray(b),"invalid network format: blobs not an array","fields[1]",b),Z(Array.isArray(v),"invalid network format: commitments not an array","fields[2]",v),Z(Array.isArray(E),"invalid network format: proofs not an array","fields[3]",E),Z(b.length===v.length,"invalid network format: blobs/commitments length mismatch","fields",a),Z(b.length===E.length,"invalid network format: blobs/proofs length mismatch","fields",a),d=[];for(let T=0;T<a[1].length;T++)d.push({data:b[T],commitment:v[T],proof:E[T]});a=a[0]}Z(Array.isArray(a)&&(a.length===11||a.length===14),`invalid field count for transaction type: ${f}`,"data",vt(i));const u={type:3,chainId:ie(a[0],"chainId"),nonce:Cr(a[1],"nonce"),maxPriorityFeePerGas:ie(a[2],"maxPriorityFeePerGas"),maxFeePerGas:ie(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:ie(a[4],"gasLimit"),to:zr(a[5]),value:ie(a[6],"value"),data:vt(a[7]),accessList:fo(a[8],"accessList"),maxFeePerBlobGas:ie(a[9],"maxFeePerBlobGas"),blobVersionedHashes:a[10]};d&&(u.blobs=d),Z(u.to!=null,`invalid address for transaction type: ${f}`,"data",i),Z(Array.isArray(u.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",i);for(let b=0;b<u.blobVersionedHashes.length;b++)Z(sr(u.blobVersionedHashes[b],32),`invalid blobVersionedHash at index ${b}: must be length 32`,"data",i);return a.length===11||po(u,a.slice(11)),u}(r));case 4:return rr.from(function(i){const a=Gn(Ot(i).slice(1));Z(Array.isArray(a)&&(a.length===10||a.length===13),"invalid field count for transaction type: 4","data",vt(i));const f={type:4,chainId:ie(a[0],"chainId"),nonce:Cr(a[1],"nonce"),maxPriorityFeePerGas:ie(a[2],"maxPriorityFeePerGas"),maxFeePerGas:ie(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:ie(a[4],"gasLimit"),to:zr(a[5]),value:ie(a[6],"value"),data:vt(a[7]),accessList:fo(a[8],"accessList"),authorizationList:el(a[9],"authorizationList")};return a.length===10||po(f,a.slice(10)),f}(r))}Yt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new rr;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Qe.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Z(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Je=new WeakMap,an=new WeakMap,un=new WeakMap,cn=new WeakMap,ln=new WeakMap,fn=new WeakMap,hn=new WeakMap,dn=new WeakMap,pn=new WeakMap,gn=new WeakMap,mn=new WeakMap,yn=new WeakMap,Dr=new WeakMap,Er=new WeakMap,fr=new WeakMap,wr=new WeakMap,bn=new WeakMap,vn=new WeakSet,Oo=function(e,t){Yt(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return function(i,a){const f=[Qt(i.nonce,"nonce"),Qt(i.gasPrice||0,"gasPrice"),Qt(i.gasLimit,"gasLimit"),i.to||"0x",Qt(i.value,"value"),i.data];let d=ve;if(i.chainId!=ve)d=ae(i.chainId,"tx.chainId"),Z(!a||a.networkV==null||a.legacyChainId===d,"tx.chainId/sig.v mismatch","sig",a);else if(i.signature){const b=i.signature.legacyChainId;b!=null&&(d=b)}if(!a)return d!==ve&&(f.push(ge(d)),f.push("0x"),f.push("0x")),vr(f);let u=BigInt(27+a.yParity);return d!==ve?u=Qe.getChainIdV(d,a.v):BigInt(a.v)!==u&&Z(!1,"tx.chainId/sig.v mismatch","sig",a),f.push(ge(u)),f.push(ge(a.r)),f.push(ge(a.s)),vr(f)}(this,r);case 1:return function(i,a){const f=[Qt(i.chainId,"chainId"),Qt(i.nonce,"nonce"),Qt(i.gasPrice||0,"gasPrice"),Qt(i.gasLimit,"gasLimit"),i.to||"0x",Qt(i.value,"value"),i.data,ho(i.accessList||[])];return a&&(f.push(Qt(a.yParity,"recoveryParam")),f.push(ge(a.r)),f.push(ge(a.s))),me(["0x01",vr(f)])}(this,r);case 2:return function(i,a){const f=[Qt(i.chainId,"chainId"),Qt(i.nonce,"nonce"),Qt(i.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(i.maxFeePerGas||0,"maxFeePerGas"),Qt(i.gasLimit,"gasLimit"),i.to||"0x",Qt(i.value,"value"),i.data,ho(i.accessList||[])];return a&&(f.push(Qt(a.yParity,"yParity")),f.push(ge(a.r)),f.push(ge(a.s))),me(["0x02",vr(f)])}(this,r);case 3:return function(i,a,f){const d=[Qt(i.chainId,"chainId"),Qt(i.nonce,"nonce"),Qt(i.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(i.maxFeePerGas||0,"maxFeePerGas"),Qt(i.gasLimit,"gasLimit"),i.to||qs,Qt(i.value,"value"),i.data,ho(i.accessList||[]),Qt(i.maxFeePerBlobGas||0,"maxFeePerBlobGas"),rl(i.blobVersionedHashes||[],"blobVersionedHashes")];return a&&(d.push(Qt(a.yParity,"yParity")),d.push(ge(a.r)),d.push(ge(a.s)),f)?me(["0x03",vr([d,f.map(u=>u.data),f.map(u=>u.commitment),f.map(u=>u.proof)])]):me(["0x03",vr(d)])}(this,r,t?this.blobs:null);case 4:return function(i,a){const f=[Qt(i.chainId,"chainId"),Qt(i.nonce,"nonce"),Qt(i.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(i.maxFeePerGas||0,"maxFeePerGas"),Qt(i.gasLimit,"gasLimit"),i.to||"0x",Qt(i.value,"value"),i.data,ho(i.accessList||[]),(d=i.authorizationList||[],d.map(u=>[Qt(u.chainId,"chainId"),u.address,Qt(u.nonce,"nonce"),Qt(u.signature.yParity,"yParity"),ge(u.signature.r),ge(u.signature.s)]))];var d;return a&&(f.push(Qt(a.yParity,"yParity")),f.push(ge(a.r)),f.push(ge(a.s))),me(["0x04",vr(f)])}(this,r)}Yt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Ro=rr;BigInt(0);function Qa(o){const e={};o.to&&(e.to=o.to),o.from&&(e.from=o.from),o.data&&(e.data=vt(o.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)i in o&&o[i]!=null&&(e[i]=ae(o[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)i in o&&o[i]!=null&&(e[i]=Ve(o[i],`request.${i}`));return o.accessList&&(e.accessList=Bo(o.accessList)),o.authorizationList&&(e.authorizationList=o.authorizationList.slice()),"blockTag"in o&&(e.blockTag=o.blockTag),"enableCcipRead"in o&&(e.enableCcipRead=!!o.enableCcipRead),"customData"in o&&(e.customData=o.customData),"blobVersionedHashes"in o&&o.blobVersionedHashes&&(e.blobVersionedHashes=o.blobVersionedHashes.slice()),"kzg"in o&&(e.kzg=o.kzg),"blobs"in o&&o.blobs&&(e.blobs=o.blobs.map(i=>_o(i)?vt(i):Object.assign({},i))),e}function Tr(o,e){if(o.provider)return o.provider;Yt(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Ys(o,e){let t=Qa(e);if(t.to!=null&&(t.to=Hn(t.to,o)),t.from!=null){const r=t.from;t.from=Promise.all([o.getAddress(),Hn(r,o)]).then(([i,a])=>(Z(i.toLowerCase()===a.toLowerCase(),"transaction from mismatch","tx.from",a),i))}else t.from=o.getAddress();return await Ri(t)}class Xa{constructor(e){ht(this,"provider");Be(this,{provider:e||null})}async getNonce(e){return Tr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Ys(this,e)}async populateTransaction(e){const t=Tr(this,"populateTransaction"),r=await Ys(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();r.chainId!=null?Z(ae(r.chainId)===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):r.chainId=i.chainId;const a=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice==null||r.type!==2&&!a?r.type!==0&&r.type!==1||!a||Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):Z(!1,"eip-1559 transaction do not support gasPrice","tx",e),r.type!==2&&r.type!=null||r.maxFeePerGas==null||r.maxPriorityFeePerGas==null)if(r.type===0||r.type===1){const f=await t.getFeeData();Yt(f.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=f.gasPrice)}else{const f=await t.getFeeData();if(r.type==null)if(f.maxFeePerGas!=null&&f.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const d=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=d,r.maxPriorityFeePerGas=d}else r.maxFeePerGas==null&&(r.maxFeePerGas=f.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=f.maxPriorityFeePerGas);else f.gasPrice!=null?(Yt(!a,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=f.gasPrice),r.type=0):Yt(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else r.type!==2&&r.type!==3&&r.type!==4||(r.maxFeePerGas==null&&(r.maxFeePerGas=f.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=f.maxPriorityFeePerGas))}else r.type=2;return await Ri(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Tr(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Tr(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Tr(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Tr(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Tr(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=Ro.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){Yt(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var En,Ao;const qi=class qi extends Xa{constructor(t,r){super(r);Vt(this,En);ht(this,"address");Be(this,{address:t})}async getAddress(){return this.address}connect(t){return new qi(this.address,t)}async signTransaction(t){be(this,En,Ao).call(this,"transactions","signTransaction")}async signMessage(t){be(this,En,Ao).call(this,"messages","signMessage")}async signTypedData(t,r,i){be(this,En,Ao).call(this,"typed-data","signTypedData")}};En=new WeakSet,Ao=function(t,r){Yt(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:r})};let mi=qi;var wn;const Ki=class Ki extends Xa{constructor(t,r){super(r);ht(this,"address");Vt(this,wn);Z(t&&typeof t.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Tt(this,wn,t),Be(this,{address:no(this.signingKey.publicKey)})}get signingKey(){return xt(this,wn)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new Ki(xt(this,wn),t)}async signTransaction(t){t=Qa(t);const{to:r,from:i}=await Ri({to:t.to?Hn(t.to,this):void 0,from:t.from?Hn(t.from,this):void 0});r!=null&&(t.to=r),i!=null&&(t.from=i),t.from!=null&&(Z(Re(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const a=Ro.from(t);return a.signature=this.signingKey.sign(a.unsignedHash),a.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(Dc(t)).serialized}authorizeSync(t){Z(typeof t.address=="string","invalid address for authorizeSync","auth.address",t);const r=this.signingKey.sign(Bc(t));return Object.assign({},{address:Re(t.address),nonce:ae(t.nonce||0),chainId:ae(t.chainId||0)},{signature:r})}async authorize(t){return t=Object.assign({},t,{address:await Hn(t.address,this)}),this.authorizeSync(await this.populateAuthorization(t))}async signTypedData(t,r,i){const a=await To.resolveNames(t,r,i,async f=>{Yt(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:f}});const d=await this.provider.resolveName(f);return Yt(d!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:f}),d});return this.signingKey.sign(To.hash(a.domain,r,a.value)).serialized}};wn=new WeakMap;let Po=Ki,Js=!1;const Za=function(o,e,t){return function(r,i){const a={sha256:Cn,sha512:Bi}[r];return Z(a!=null,"invalid hmac algorithm","algorithm",r),Uo.create(a,i)}(o,e).update(t).digest()};let tu=Za;function Jr(o,e,t){const r=Ot(e,"key"),i=Ot(t,"data");return vt(tu(o,r,i))}Jr._=Za,Jr.lock=function(){Js=!0},Jr.register=function(o){if(Js)throw new Error("computeHmac is locked");tu=o},Object.freeze(Jr);const nl=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),eu=Uint8Array.from({length:16},(o,e)=>e);let ji=[eu],Gi=[eu.map(o=>(9*o+5)%16)];for(let o=0;o<4;o++)for(let e of[ji,Gi])e.push(e[o].map(t=>nl[t]));const ru=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(o=>new Uint8Array(o)),ol=ji.map((o,e)=>o.map(t=>ru[e][t])),il=Gi.map((o,e)=>o.map(t=>ru[e][t])),sl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),al=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),go=(o,e)=>o<<e|o>>>32-e;function Qs(o,e,t,r){return o===0?e^t^r:o===1?e&t|~e&r:o===2?(e|~t)^r:o===3?e&r|t&~r:e^(t|~r)}const mo=new Uint32Array(16);class ul extends Ci{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:i,h4:a}=this;return[e,t,r,i,a]}set(e,t,r,i,a){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|i,this.h4=0|a}process(e,t){for(let D=0;D<16;D++,t+=4)mo[D]=e.getUint32(t,!0);let r=0|this.h0,i=r,a=0|this.h1,f=a,d=0|this.h2,u=d,b=0|this.h3,v=b,E=0|this.h4,T=E;for(let D=0;D<5;D++){const S=4-D,w=sl[D],O=al[D],k=ji[D],x=Gi[D],L=ol[D],z=il[D];for(let _=0;_<16;_++){const N=go(r+Qs(D,a,d,b)+mo[k[_]]+w,L[_])+E|0;r=E,E=b,b=0|go(d,10),d=a,a=N}for(let _=0;_<16;_++){const N=go(i+Qs(S,f,u,v)+mo[x[_]]+O,z[_])+T|0;i=T,T=v,v=0|go(u,10),u=f,f=N}}this.set(this.h1+d+v|0,this.h2+b+T|0,this.h3+E+i|0,this.h4+r+f|0,this.h0+a+u|0)}roundClean(){mo.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const cl=ko(()=>new ul);let Xs=!1;const nu=function(o){return cl(o)};let ou=nu;function Qr(o){const e=Ot(o,"data");return vt(ou(e))}Qr._=nu,Qr.lock=function(){Xs=!0},Qr.register=function(o){if(Xs)throw new TypeError("ripemd160 is locked");ou=o},Object.freeze(Qr);let Zs=!1;const iu=function(o){return new Uint8Array(function(e){Yt($s!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Z(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);const t=new Uint8Array(e);return $s.getRandomValues(t),t}(o))};let su=iu;function dr(o){return su(o)}dr._=iu,dr.lock=function(){Zs=!0},dr.register=function(o){if(Zs)throw new Error("randomBytes is locked");su=o},Object.freeze(dr);const yi="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let yo=null;function ll(o){if(yo==null){yo={};for(let t=0;t<58;t++)yo[yi[t]]=BigInt(t)}const e=yo[o];return Z(e!=null,"invalid base58 value","letter",o),e}const fl=BigInt(0),bi=BigInt(58),hl=" !#$%&'()*+,-./<=>?@[]^_`{|}~",dl=/^[a-z]*$/i;function ta(o,e){let t=97;return o.reduce((r,i)=>(i===e?t++:i.match(dl)?r.push(String.fromCharCode(t)+i):(t=97,r.push(i)),r),[])}function pl(o){return Z(o[0]==="0","unsupported auwl data","data",o),function(e,t){for(let a=28;a>=0;a--)e=e.split(hl[a]).join(t.substring(2*a,2*a+2));const r=[],i=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(a,f,d,u)=>{if(d)for(let b=parseInt(d);b>=0;b--)r.push(";");else r.push(f.toLowerCase());return""});if(i)throw new Error(`leftovers: ${JSON.stringify(i)}`);return ta(ta(r,";"),":")}(o.substring(59),o.substring(1,59))}class gl{constructor(e){ht(this,"locale");Be(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Sn,Zn,Br,to,vi;class ml extends gl{constructor(t,r,i){super(t);Vt(this,to);Vt(this,Sn);Vt(this,Zn);Vt(this,Br);Tt(this,Sn,r),Tt(this,Zn,i),Tt(this,Br,null)}get _data(){return xt(this,Sn)}_decodeWords(){return pl(xt(this,Sn))}getWord(t){const r=be(this,to,vi).call(this);return Z(t>=0&&t<r.length,`invalid word index: ${t}`,"index",t),r[t]}getWordIndex(t){return be(this,to,vi).call(this).indexOf(t)}}Sn=new WeakMap,Zn=new WeakMap,Br=new WeakMap,to=new WeakSet,vi=function(){if(xt(this,Br)==null){const t=this._decodeWords();if(Do(t.join(`
`)+`
`)!==xt(this,Zn))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Tt(this,Br,t)}return xt(this,Br)};let ri=null;class Mr extends ml{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return ri==null&&(ri=new Mr),ri}}let ea=!1;const au=function(o,e,t,r,i){return function(a,f,d,u,b){const v={sha256:Cn,sha512:Bi}[b];return Z(v!=null,"invalid pbkdf2 algorithm","algorithm",b),Di(v,a,f,{c:d,dkLen:u})}(o,e,t,r,i)};let uu=au;function Sr(o,e,t,r,i){const a=Ot(o,"password"),f=Ot(e,"salt");return vt(uu(a,f,t,r,i))}function cu(o){return(1<<o)-1<<8-o&255}function yl(o){return(1<<o)-1&255}function ni(o,e){ka("NFKD"),e==null&&(e=Mr.wordlist());const t=e.split(o);Z(t.length%3==0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*t.length/8));let i=0;for(let d=0;d<t.length;d++){let u=e.getWordIndex(t[d].normalize("NFKD"));Z(u>=0,`invalid mnemonic word at index ${d}`,"mnemonic","[ REDACTED ]");for(let b=0;b<11;b++)u&1<<10-b&&(r[i>>3]|=1<<7-i%8),i++}const a=32*t.length/3,f=cu(t.length/3);return Z((Ot(He(r.slice(0,a/8)))[0]&f)===(r[r.length-1]&f),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),vt(r.slice(0,a/8))}function oi(o,e){Z(o.length%4==0&&o.length>=16&&o.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Mr.wordlist());const t=[0];let r=11;for(let f=0;f<o.length;f++)r>8?(t[t.length-1]<<=8,t[t.length-1]|=o[f],r-=8):(t[t.length-1]<<=r,t[t.length-1]|=o[f]>>8-r,t.push(o[f]&yl(8-r)),r+=3);const i=o.length/4,a=parseInt(He(o).substring(2,4),16)&cu(i);return t[t.length-1]<<=i,t[t.length-1]|=a>>8-i,e.join(t.map(f=>e.getWord(f)))}Sr._=au,Sr.lock=function(){ea=!0},Sr.register=function(o){if(ea)throw new Error("pbkdf2 is locked");uu=o},Object.freeze(Sr);const ii={};class Rn{constructor(e,t,r,i,a){ht(this,"phrase");ht(this,"password");ht(this,"wordlist");ht(this,"entropy");i==null&&(i=""),a==null&&(a=Mr.wordlist()),xo(e,ii,"Mnemonic"),Be(this,{phrase:r,password:i,wordlist:a,entropy:t})}computeSeed(){const e=Gr("mnemonic"+this.password,"NFKD");return Sr(Gr(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){const i=ni(e,r);return e=oi(Ot(i),r),new Rn(ii,i,e,t,r)}static fromEntropy(e,t,r){const i=Ot(e,"entropy"),a=oi(i,r);return new Rn(ii,vt(i),a,t,r)}static entropyToPhrase(e,t){return oi(Ot(e,"entropy"),t)}static phraseToEntropy(e,t){return ni(e,t)}static isValidMnemonic(e,t){try{return ni(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Io,Me,er,we=function(o,e,t,r){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(o):r?r.value:e.get(o)},si=function(o,e,t,r,i){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,t),t};const bl={16:10,24:12,32:14},vl=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Ge=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],bo=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],El=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],wl=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Sl=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Ol=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Al=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Il=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Tl=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Rl=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Pl=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Cl=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Nl=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],kl=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function ai(o){const e=[];for(let t=0;t<o.length;t+=4)e.push(o[t]<<24|o[t+1]<<16|o[t+2]<<8|o[t+3]);return e}class Fi{get key(){return we(this,Io,"f").slice()}constructor(e){if(Io.set(this,void 0),Me.set(this,void 0),er.set(this,void 0),!(this instanceof Fi))throw Error("AES must be instanitated with `new`");si(this,Io,new Uint8Array(e));const t=bl[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");si(this,er,[]),si(this,Me,[]);for(let v=0;v<=t;v++)we(this,er,"f").push([0,0,0,0]),we(this,Me,"f").push([0,0,0,0]);const r=4*(t+1),i=this.key.length/4,a=ai(this.key);let f;for(let v=0;v<i;v++)f=v>>2,we(this,er,"f")[f][v%4]=a[v],we(this,Me,"f")[t-f][v%4]=a[v];let d,u=0,b=i;for(;b<r;){if(d=a[i-1],a[0]^=Ge[d>>16&255]<<24^Ge[d>>8&255]<<16^Ge[255&d]<<8^Ge[d>>24&255]^vl[u]<<24,u+=1,i!=8)for(let D=1;D<i;D++)a[D]^=a[D-1];else{for(let D=1;D<i/2;D++)a[D]^=a[D-1];d=a[i/2-1],a[i/2]^=Ge[255&d]^Ge[d>>8&255]<<8^Ge[d>>16&255]<<16^Ge[d>>24&255]<<24;for(let D=i/2+1;D<i;D++)a[D]^=a[D-1]}let v,E,T=0;for(;T<i&&b<r;)v=b>>2,E=b%4,we(this,er,"f")[v][E]=a[T],we(this,Me,"f")[t-v][E]=a[T++],b++}for(let v=1;v<t;v++)for(let E=0;E<4;E++)d=we(this,Me,"f")[v][E],we(this,Me,"f")[v][E]=Pl[d>>24&255]^Cl[d>>16&255]^Nl[d>>8&255]^kl[255&d]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=we(this,er,"f").length-1,r=[0,0,0,0];let i=ai(e);for(let d=0;d<4;d++)i[d]^=we(this,er,"f")[0][d];for(let d=1;d<t;d++){for(let u=0;u<4;u++)r[u]=El[i[u]>>24&255]^wl[i[(u+1)%4]>>16&255]^Sl[i[(u+2)%4]>>8&255]^Ol[255&i[(u+3)%4]]^we(this,er,"f")[d][u];i=r.slice()}const a=new Uint8Array(16);let f=0;for(let d=0;d<4;d++)f=we(this,er,"f")[t][d],a[4*d]=255&(Ge[i[d]>>24&255]^f>>24),a[4*d+1]=255&(Ge[i[(d+1)%4]>>16&255]^f>>16),a[4*d+2]=255&(Ge[i[(d+2)%4]>>8&255]^f>>8),a[4*d+3]=255&(Ge[255&i[(d+3)%4]]^f);return a}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=we(this,Me,"f").length-1,r=[0,0,0,0];let i=ai(e);for(let d=0;d<4;d++)i[d]^=we(this,Me,"f")[0][d];for(let d=1;d<t;d++){for(let u=0;u<4;u++)r[u]=Al[i[u]>>24&255]^Il[i[(u+3)%4]>>16&255]^Tl[i[(u+2)%4]>>8&255]^Rl[255&i[(u+1)%4]]^we(this,Me,"f")[d][u];i=r.slice()}const a=new Uint8Array(16);let f=0;for(let d=0;d<4;d++)f=we(this,Me,"f")[t][d],a[4*d]=255&(bo[i[d]>>24&255]^f>>24),a[4*d+1]=255&(bo[i[(d+3)%4]>>16&255]^f>>16),a[4*d+2]=255&(bo[i[(d+2)%4]>>8&255]^f>>8),a[4*d+3]=255&(bo[255&i[(d+1)%4]]^f);return a}}Io=new WeakMap,Me=new WeakMap,er=new WeakMap;class lu{constructor(e,t,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new Fi(t)},name:{enumerable:!0,value:e}})}}var Mn,ur,vo=function(o,e,t,r,i){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,t),t},Vr=function(o,e,t,r){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(o)};class Mi extends lu{constructor(e,t){if(super("ECC",e,Mi),Mn.set(this,void 0),ur.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");vo(this,Mn,new Uint8Array(t))}else vo(this,Mn,new Uint8Array(16));vo(this,ur,this.iv)}get iv(){return new Uint8Array(Vr(this,Mn))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)Vr(this,ur)[i]^=e[r+i];vo(this,ur,this.aes.encrypt(Vr(this,ur))),t.set(Vr(this,ur),r)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let a=0;a<16;a++)t[r+a]=i[a]^Vr(this,ur)[a],Vr(this,ur)[a]=e[r+a]}return t}}Mn=new WeakMap,ur=new WeakMap;var qn,Rr,qe,Wr=function(o,e,t,r,i){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(o,t),t},Fe=function(o,e,t,r){if(typeof e=="function"?o!==e||!0:!e.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(o):r?r.value:e.get(o)};class Pn extends lu{constructor(e,t){super("CTR",e,Pn),qn.set(this,void 0),Rr.set(this,void 0),qe.set(this,void 0),Wr(this,qe,new Uint8Array(16)),Fe(this,qe,"f").fill(0),Wr(this,qn,Fe(this,qe,"f")),Wr(this,Rr,16),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(Fe(this,qe,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)Fe(this,qe,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Fe(this,qe,"f").set(e)}increment(){for(let e=15;e>=0;e--){if(Fe(this,qe,"f")[e]!==255){Fe(this,qe,"f")[e]++;break}Fe(this,qe,"f")[e]=0}}encrypt(e){var t,r;const i=new Uint8Array(e);for(let a=0;a<i.length;a++)Fe(this,Rr,"f")===16&&(Wr(this,qn,this.aes.encrypt(Fe(this,qe,"f"))),Wr(this,Rr,0),this.increment()),i[a]^=Fe(this,qn,"f")[Wr(this,Rr,(r=Fe(this,Rr,"f"),t=r++,r)),t];return i}decrypt(e){return this.encrypt(e)}}qn=new WeakMap,Rr=new WeakMap,qe=new WeakMap;const ee=(o,e)=>o<<e|o>>>32-e;function ra(o,e,t,r,i,a){let f=o[e++]^t[r++],d=o[e++]^t[r++],u=o[e++]^t[r++],b=o[e++]^t[r++],v=o[e++]^t[r++],E=o[e++]^t[r++],T=o[e++]^t[r++],D=o[e++]^t[r++],S=o[e++]^t[r++],w=o[e++]^t[r++],O=o[e++]^t[r++],k=o[e++]^t[r++],x=o[e++]^t[r++],L=o[e++]^t[r++],z=o[e++]^t[r++],_=o[e++]^t[r++],N=f,C=d,F=u,j=b,q=v,Q=E,J=T,X=D,Y=S,M=w,ut=O,lt=k,At=x,wt=L,Ct=z,gt=_;for(let G=0;G<8;G+=2)q^=ee(N+At|0,7),Y^=ee(q+N|0,9),At^=ee(Y+q|0,13),N^=ee(At+Y|0,18),M^=ee(Q+C|0,7),wt^=ee(M+Q|0,9),C^=ee(wt+M|0,13),Q^=ee(C+wt|0,18),Ct^=ee(ut+J|0,7),F^=ee(Ct+ut|0,9),J^=ee(F+Ct|0,13),ut^=ee(J+F|0,18),j^=ee(gt+lt|0,7),X^=ee(j+gt|0,9),lt^=ee(X+j|0,13),gt^=ee(lt+X|0,18),C^=ee(N+j|0,7),F^=ee(C+N|0,9),j^=ee(F+C|0,13),N^=ee(j+F|0,18),J^=ee(Q+q|0,7),X^=ee(J+Q|0,9),q^=ee(X+J|0,13),Q^=ee(q+X|0,18),lt^=ee(ut+M|0,7),Y^=ee(lt+ut|0,9),M^=ee(Y+lt|0,13),ut^=ee(M+Y|0,18),At^=ee(gt+Ct|0,7),wt^=ee(At+gt|0,9),Ct^=ee(wt+At|0,13),gt^=ee(Ct+wt|0,18);i[a++]=f+N|0,i[a++]=d+C|0,i[a++]=u+F|0,i[a++]=b+j|0,i[a++]=v+q|0,i[a++]=E+Q|0,i[a++]=T+J|0,i[a++]=D+X|0,i[a++]=S+Y|0,i[a++]=w+M|0,i[a++]=O+ut|0,i[a++]=k+lt|0,i[a++]=x+At|0,i[a++]=L+wt|0,i[a++]=z+Ct|0,i[a++]=_+gt|0}function en(o,e,t,r,i){let a=r+0,f=r+16*i;for(let d=0;d<16;d++)t[f+d]=o[e+16*(2*i-1)+d];for(let d=0;d<i;d++,a+=16,e+=16)ra(t,f,o,e,t,a),d>0&&(f+=16),ra(t,a,o,e+=16,t,f)}function fu(o,e,t){const r=Ta({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:a,p:f,dkLen:d,asyncTick:u,maxmem:b,onProgress:v}=r;if(De(i),De(a),De(f),De(d),De(u),De(b),v!==void 0&&typeof v!="function")throw new Error("progressCb should be function");const E=128*a,T=E/4;if(i<=1||i&i-1||i>=2**(E/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(f<0||f>137438953440/E)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(d<0||d>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const D=E*(i+f);if(D>b)throw new Error(`Scrypt: parameters too large, ${D} (128 * r * (N + p)) > ${b} (maxmem)`);const S=Di(Cn,o,e,{c:1,dkLen:E*f}),w=wo(S),O=wo(new Uint8Array(E*i)),k=wo(new Uint8Array(E));let x=()=>{};if(v){const L=2*i*f,z=Math.max(Math.floor(L/1e4),1);let _=0;x=()=>{_++,!v||_%z&&_!==L||v(_/L)}}return{N:i,r:a,p:f,dkLen:d,blockSize32:T,V:O,B32:w,B:S,tmp:k,blockMixCb:x,asyncTick:u}}function hu(o,e,t,r,i){const a=Di(Cn,o,t,{c:1,dkLen:e});return t.fill(0),r.fill(0),i.fill(0),a}let na=!1,oa=!1;const du=async function(o,e,t,r,i,a,f){return await async function(d,u,b){const{N:v,r:E,p:T,dkLen:D,blockSize32:S,V:w,B32:O,B:k,tmp:x,blockMixCb:L,asyncTick:z}=fu(d,u,b);for(let _=0;_<T;_++){const N=S*_;for(let F=0;F<S;F++)w[F]=O[N+F];let C=0;await ms(v-1,z,()=>{en(w,C,w,C+=S,E),L()}),en(w,(v-1)*S,O,N,E),L(),await ms(v,z,()=>{const F=O[N+S-16]%v;for(let j=0;j<S;j++)x[j]=O[N+j]^w[F*S+j];en(x,0,O,N,E),L()})}return hu(d,D,k,w,x)}(o,e,{N:t,r,p:i,dkLen:a,onProgress:f})},pu=function(o,e,t,r,i,a){return function(f,d,u){const{N:b,r:v,p:E,dkLen:T,blockSize32:D,V:S,B32:w,B:O,tmp:k,blockMixCb:x}=fu(f,d,u);for(let L=0;L<E;L++){const z=D*L;for(let _=0;_<D;_++)S[_]=w[z+_];for(let _=0,N=0;_<b-1;_++)en(S,N,S,N+=D,v),x();en(S,(b-1)*D,w,z,v),x();for(let _=0;_<b;_++){const N=w[z+D-16]%b;for(let C=0;C<D;C++)k[C]=w[z+C]^S[N*D+C];en(k,0,w,z,v),x()}}return hu(f,T,O,S,k)}(o,e,{N:t,r,p:i,dkLen:a})};let gu=du,mu=pu;async function Xr(o,e,t,r,i,a,f){const d=Ot(o,"passwd"),u=Ot(e,"salt");return vt(await gu(d,u,t,r,i,a,f))}function Zr(o,e,t,r,i,a){const f=Ot(o,"passwd"),d=Ot(e,"salt");return vt(mu(f,d,t,r,i,a))}function xl(o){const e=Ot(o,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=vt(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}function yu(o){return typeof o!="string"||o.startsWith("0x")||(o="0x"+o),Pr(o)}function Fn(o,e){for(o=String(o);o.length<e;)o="0"+o;return o}function Jn(o){return typeof o=="string"?Gr(o,"NFKC"):Pr(o)}function he(o,e){const t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);Z(t!=null,"invalid path","path",e);const r=t[1],i=t[3],a=t[4]==="!";let f=o;for(const d of r.toLowerCase().split(".")){if(Array.isArray(f)){if(!d.match(/^[0-9]+$/))break;f=f[parseInt(d)]}else if(typeof f=="object"){let u=null;for(const b in f)if(b.toLowerCase()===d){u=f[b];break}f=u}else f=null;if(f==null)break}if(Z(!a||f!=null,"missing required value","path",r),i&&f!=null){if(i==="int"){if(typeof f=="string"&&f.match(/^-?[0-9]+$/))return parseInt(f);if(Number.isSafeInteger(f))return f}if(i==="number"&&typeof f=="string"&&f.match(/^-?[0-9.]*$/))return parseFloat(f);if(i==="data"&&typeof f=="string")return yu(f);if(i==="array"&&Array.isArray(f)||i===typeof f)return f;Z(!1,`wrong type found for ${i} `,"path",r)}return f}Xr._=du,Xr.lock=function(){oa=!0},Xr.register=function(o){if(oa)throw new Error("scrypt is locked");gu=o},Object.freeze(Xr),Zr._=pu,Zr.lock=function(){na=!0},Zr.register=function(o){if(na)throw new Error("scryptSync is locked");mu=o},Object.freeze(Zr);const bu="m/44'/60'/0'/0/0";function ia(o){try{const e=JSON.parse(o);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function Eo(o,e){const t=Ot(e),r=he(o,"crypto.ciphertext:data!");Z(vt(ye(me([t.slice(16,32),r]))).substring(2)===he(o,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const i=function(d,u,b){if(he(d,"crypto.cipher:string")==="aes-128-ctr"){const v=he(d,"crypto.cipherparams.iv:data!");return vt(new Pn(u,v).decrypt(b))}Yt(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(o,t.slice(0,16),r),a=no(i);if(o.address){let d=o.address.toLowerCase();d.startsWith("0x")||(d="0x"+d),Z(Re(d)===a,"keystore address/privateKey mismatch","address",o.address)}const f={address:a,privateKey:i};if(he(o,"x-ethers.version:string")==="0.1"){const d=t.slice(32,64),u=he(o,"x-ethers.mnemonicCiphertext:data!"),b=he(o,"x-ethers.mnemonicCounter:data!"),v=new Pn(d,b);f.mnemonic={path:he(o,"x-ethers.path:string")||bu,locale:he(o,"x-ethers.locale:string")||"en",entropy:vt(Ot(v.decrypt(u)))}}return f}function sa(o){const e=he(o,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const t=he(o,"crypto.kdfparams.salt:data!"),r=he(o,"crypto.kdfparams.n:int!"),i=he(o,"crypto.kdfparams.r:int!"),a=he(o,"crypto.kdfparams.p:int!");Z(r>0&&!(r&r-1),"invalid kdf.N","kdf.N",r),Z(i>0&&a>0,"invalid kdf","kdf",e);const f=he(o,"crypto.kdfparams.dklen:int!");return Z(f===32,"invalid kdf.dklen","kdf.dflen",f),{name:"scrypt",salt:t,N:r,r:i,p:a,dkLen:64}}if(e.toLowerCase()==="pbkdf2"){const t=he(o,"crypto.kdfparams.salt:data!"),r=he(o,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();Z(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const a=he(o,"crypto.kdfparams.c:int!"),f=he(o,"crypto.kdfparams.dklen:int!");return Z(f===32,"invalid kdf.dklen","kdf.dklen",f),{name:"pbkdf2",salt:t,count:a,dkLen:f,algorithm:i}}}Z(!1,"unsupported key-derivation function","kdf",e)}function aa(o){return new Promise(e=>{setTimeout(()=>{e()},o)})}function vu(o){const e=o.salt!=null?Ot(o.salt,"options.salt"):dr(32);let t=1<<17,r=8,i=1;return o.scrypt&&(o.scrypt.N&&(t=o.scrypt.N),o.scrypt.r&&(r=o.scrypt.r),o.scrypt.p&&(i=o.scrypt.p)),Z(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),Z(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),Z(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:t,r,p:i}}function Eu(o,e,t,r){const i=Ot(t.privateKey,"privateKey"),a=r.iv!=null?Ot(r.iv,"options.iv"):dr(16);Z(a.length===16,"invalid options.iv length","options.iv",r.iv);const f=r.uuid!=null?Ot(r.uuid,"options.uuid"):dr(16);Z(f.length===16,"invalid options.uuid length","options.uuid",r.iv);const d=o.slice(0,16),u=o.slice(16,32),b=Ot(new Pn(d,a).encrypt(i)),v=ye(me([u,b])),E={address:t.address.substring(2).toLowerCase(),id:xl(f),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:vt(a).substring(2)},ciphertext:vt(b).substring(2),kdf:"scrypt",kdfparams:{salt:vt(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:v.substring(2)}};if(t.mnemonic){const T=r.client!=null?r.client:`ethers/${Na}`,D=t.mnemonic.path||bu,S=t.mnemonic.locale||"en",w=o.slice(32,64),O=Ot(t.mnemonic.entropy,"account.mnemonic.entropy"),k=dr(16),x=Ot(new Pn(w,k).encrypt(O)),L=new Date,z="UTC--"+(L.getUTCFullYear()+"-"+Fn(L.getUTCMonth()+1,2)+"-"+Fn(L.getUTCDate(),2)+"T"+Fn(L.getUTCHours(),2)+"-"+Fn(L.getUTCMinutes(),2)+"-"+Fn(L.getUTCSeconds(),2)+".0Z")+"--"+E.address;E["x-ethers"]={client:T,gethFilename:z,path:D,locale:S,mnemonicCounter:vt(k).substring(2),mnemonicCiphertext:vt(x).substring(2),version:"0.1"}}return JSON.stringify(E)}function wu(o,e,t){t==null&&(t={});const r=Jn(e),i=vu(t);return Eu(Ot(Zr(r,i.salt,i.N,i.r,i.p,64)),i,o,t)}async function Su(o,e,t){t==null&&(t={});const r=Jn(e),i=vu(t);return Eu(Ot(await Xr(r,i.salt,i.N,i.r,i.p,64,t.progressCallback)),i,o,t)}const ui="m/44'/60'/0'/0/0",_l=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),rn=2147483648,Ll=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Co(o,e){let t="";for(;o;)t="0123456789abcdef"[o%16]+t,o=Math.trunc(o/16);for(;t.length<2*e;)t="0"+t;return"0x"+t}function Ei(o){const e=Ot(o);return function(t){const r=Ot(t);let i=qa(r),a="";for(;i;)a=yi[Number(i%bi)]+a,i/=bi;for(let f=0;f<r.length&&!r[f];f++)a=yi[0]+a;return a}(me([e,Pi(He(He(e)),0,4)]))}const nr={};function Ou(o,e,t,r){const i=new Uint8Array(37);o&rn?(Yt(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(Ot(r),1)):i.set(Ot(t));for(let f=24;f>=0;f-=8)i[33+(f>>3)]=o>>24-f&255;const a=Ot(Jr("sha512",e,i));return{IL:a.slice(0,32),IR:a.slice(32)}}function Au(o,e){const t=e.split("/");Z(t.length>0,"invalid path","path",e),t[0]==="m"&&(Z(o.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${o.depth}`,"path",e),t.shift());let r=o;for(let i=0;i<t.length;i++){const a=t[i];if(a.match(/^[0-9]+'$/)){const f=parseInt(a.substring(0,a.length-1));Z(f<rn,"invalid path index",`path[${i}]`,a),r=r.deriveChild(rn+f)}else if(a.match(/^[0-9]+$/)){const f=parseInt(a);Z(f<rn,"invalid path index",`path[${i}]`,a),r=r.deriveChild(f)}else Z(!1,"invalid path component",`path[${i}]`,a)}return r}var eo,wi,jr,Kn;const ze=class ze extends Po{constructor(t,r,i,a,f,d,u,b,v){super(r,v);Vt(this,eo);ht(this,"publicKey");ht(this,"fingerprint");ht(this,"parentFingerprint");ht(this,"mnemonic");ht(this,"chainCode");ht(this,"path");ht(this,"index");ht(this,"depth");xo(t,nr,"HDNodeWallet"),Be(this,{publicKey:r.compressedPublicKey}),Be(this,{parentFingerprint:i,fingerprint:Pi(Qr(He(this.publicKey)),0,4),chainCode:a,path:f,index:d,depth:u}),Be(this,{mnemonic:b})}connect(t){return new ze(nr,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}async encrypt(t,r){return await Su(be(this,eo,wi).call(this),t,{progressCallback:r})}encryptSync(t){return wu(be(this,eo,wi).call(this),t)}get extendedKey(){return Yt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Ei(me(["0x0488ADE4",Co(this.depth,1),this.parentFingerprint,Co(this.index,4),this.chainCode,me(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Qn(nr,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const r=Ve(t,"index");Z(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(2147483647&r),r&rn&&(i+="'"));const{IR:a,IL:f}=Ou(r,this.chainCode,this.publicKey,this.privateKey),d=new ir(Tn((qa(f)+BigInt(this.privateKey))%Ll,32));return new ze(nr,d,this.fingerprint,vt(a),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return Au(this,t)}static fromExtendedKey(t){const r=ge(function(b){let v=fl;for(let E=0;E<b.length;E++)v*=bi,v+=ll(b[E]);return v}(t));Z(r.length===82||Ei(r.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],a=vt(r.slice(5,9)),f=parseInt(vt(r.slice(9,13)).substring(2),16),d=vt(r.slice(13,45)),u=r.slice(45,78);switch(vt(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const b=vt(u);return new Qn(nr,no(b),b,a,d,null,f,i,null)}case"0x0488ade4":case"0x04358394 ":if(u[0]!==0)break;return new ze(nr,new ir(u.slice(1)),a,d,null,f,i,null,null)}Z(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,r,i){var f;t==null&&(t=""),r==null&&(r=ui),i==null&&(i=Mr.wordlist());const a=Rn.fromEntropy(dr(16),t,i);return be(f=ze,jr,Kn).call(f,a.computeSeed(),a).derivePath(r)}static fromMnemonic(t,r){var i;return r||(r=ui),be(i=ze,jr,Kn).call(i,t.computeSeed(),t).derivePath(r)}static fromPhrase(t,r,i,a){var d;r==null&&(r=""),i==null&&(i=ui),a==null&&(a=Mr.wordlist());const f=Rn.fromPhrase(t,r,a);return be(d=ze,jr,Kn).call(d,f.computeSeed(),f).derivePath(i)}static fromSeed(t){var r;return be(r=ze,jr,Kn).call(r,t,null)}};eo=new WeakSet,wi=function(){const t={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(t.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),t},jr=new WeakSet,Kn=function(t,r){Z(_o(t),"invalid seed","seed","[REDACTED]");const i=Ot(t,"seed");Z(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const a=Ot(Jr("sha512",_l,i)),f=new ir(vt(a.slice(0,32)));return new ze(nr,f,"0x00000000",vt(a.slice(32)),"m",0,0,r,null)},Vt(ze,jr);let Vn=ze;class Qn extends mi{constructor(t,r,i,a,f,d,u,b,v){super(r,v);ht(this,"publicKey");ht(this,"fingerprint");ht(this,"parentFingerprint");ht(this,"chainCode");ht(this,"path");ht(this,"index");ht(this,"depth");xo(t,nr,"HDNodeVoidWallet"),Be(this,{publicKey:i}),Be(this,{publicKey:i,fingerprint:Pi(Qr(He(i)),0,4),parentFingerprint:a,chainCode:f,path:d,index:u,depth:b})}connect(t){return new Qn(nr,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return Yt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Ei(me(["0x0488B21E",Co(this.depth,1),this.parentFingerprint,Co(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(t){const r=Ve(t,"index");Z(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(2147483647&r),r&rn&&(i+="'"));const{IR:a,IL:f}=Ou(r,this.chainCode,this.publicKey,null),d=ir.addPoints(f,this.publicKey,!0),u=no(d);return new Qn(nr,u,d,this.fingerprint,vt(a),i,r,this.depth+1,this.provider)}derivePath(t){return Au(this,t)}}function ua(o){try{if(JSON.parse(o).encseed)return!0}catch{}return!1}function ca(o,e){const t=JSON.parse(o),r=Jn(e),i=Re(he(t,"ethaddr:string!")),a=yu(he(t,"encseed:string!"));Z(a&&a.length%16==0,"invalid encseed","json",o);const f=Ot(Sr(r,r,2e3,32,"sha256")).slice(0,16),d=a.slice(0,16),u=a.slice(16),b=function(E){if(E.length<16)throw new TypeError("PKCS#7 invalid length");const T=E[E.length-1];if(T>16)throw new TypeError("PKCS#7 padding byte out of range");const D=E.length-T;for(let S=0;S<T;S++)if(E[D+S]!==T)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(E.subarray(0,D))}(Ot(new Mi(f,d).decrypt(u)));let v="";for(let E=0;E<b.length;E++)v+=String.fromCharCode(b[E]);return{address:i,privateKey:Do(v)}}function la(o){return new Promise(e=>{setTimeout(()=>{e()},o)})}var ro,Oi;const xr=class xr extends Po{constructor(e,t){typeof e!="string"||e.startsWith("0x")||(e="0x"+e),super(typeof e=="string"?new ir(e):e,t)}connect(e){return new xr(this.signingKey,e)}async encrypt(e,t){const r={address:this.address,privateKey:this.privateKey};return await Su(r,e,{progressCallback:t})}encryptSync(e){return wu({address:this.address,privateKey:this.privateKey},e)}static async fromEncryptedJson(e,t,r){var a;let i=null;return ia(e)?i=await async function(f,d,u){const b=JSON.parse(f),v=Jn(d),E=sa(b);if(E.name==="pbkdf2"){u&&(u(0),await aa(0));const{salt:k,count:x,dkLen:L,algorithm:z}=E,_=Sr(v,k,x,L,z);return u&&(u(1),await aa(0)),Eo(b,_)}Yt(E.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:E});const{salt:T,N:D,r:S,p:w,dkLen:O}=E;return Eo(b,await Xr(v,T,D,S,w,O,u))}(e,t,r):ua(e)&&(r&&(r(0),await la(0)),i=ca(e,t),r&&(r(1),await la(0))),be(a=xr,ro,Oi).call(a,i)}static fromEncryptedJsonSync(e,t){var i;let r=null;return ia(e)?r=function(a,f){const d=JSON.parse(a),u=Jn(f),b=sa(d);if(b.name==="pbkdf2"){const{salt:w,count:O,dkLen:k,algorithm:x}=b;return Eo(d,Sr(u,w,O,k,x))}Yt(b.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:b});const{salt:v,N:E,r:T,p:D,dkLen:S}=b;return Eo(d,Zr(u,v,E,T,D,S))}(e,t):ua(e)?r=ca(e,t):Z(!1,"invalid JSON wallet","json","[ REDACTED ]"),be(i=xr,ro,Oi).call(i,r)}static createRandom(e){const t=Vn.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const r=Vn.fromPhrase(e);return t?r.connect(t):r}};ro=new WeakSet,Oi=function(e){if(Z(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=Rn.fromEntropy(e.mnemonic.entropy),i=Vn.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new xr(e.privateKey);return Z(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t},Vt(xr,ro);let Si=xr;function Ul(o,e){var t=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!t){if(Array.isArray(o)||(t=function(u,b){if(u){if(typeof u=="string")return fa(u,b);var v={}.toString.call(u).slice(8,-1);return v==="Object"&&u.constructor&&(v=u.constructor.name),v==="Map"||v==="Set"?Array.from(u):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?fa(u,b):void 0}}(o))||e){t&&(o=t);var r=0,i=function(){};return{s:i,n:function(){return r>=o.length?{done:!0}:{done:!1,value:o[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,f=!0,d=!1;return{s:function(){t=t.call(o)},n:function(){var u=t.next();return f=u.done,u},e:function(u){d=!0,a=u},f:function(){try{f||t.return==null||t.return()}finally{if(d)throw a}}}}function fa(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,r=Array(e);t<e;t++)r[t]=o[t];return r}function Oe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var o,e,t=typeof Symbol=="function"?Symbol:{},r=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(D,S,w,O){var k=S&&S.prototype instanceof d?S:d,x=Object.create(k.prototype);return Ue(x,"_invoke",function(L,z,_){var N,C,F,j=0,q=_||[],Q=!1,J={p:0,n:0,v:o,a:X,f:X.bind(o,4),d:function(Y,M){return N=Y,C=0,F=o,J.n=M,f}};function X(Y,M){for(C=Y,F=M,e=0;!Q&&j&&!ut&&e<q.length;e++){var ut,lt=q[e],At=J.p,wt=lt[2];Y>3?(ut=wt===M)&&(F=lt[(C=lt[4])?5:(C=3,3)],lt[4]=lt[5]=o):lt[0]<=At&&((ut=Y<2&&At<lt[1])?(C=0,J.v=M,J.n=lt[1]):At<wt&&(ut=Y<3||lt[0]>M||M>wt)&&(lt[4]=Y,lt[5]=M,J.n=wt,C=0))}if(ut||Y>1)return f;throw Q=!0,M}return function(Y,M,ut){if(j>1)throw TypeError("Generator is already running");for(Q&&M===1&&X(M,ut),C=M,F=ut;(e=C<2?o:F)||!Q;){N||(C?C<3?(C>1&&(J.n=-1),X(C,F)):J.n=F:J.v=F);try{if(j=2,N){if(C||(Y="next"),e=N[Y]){if(!(e=e.call(N,F)))throw TypeError("iterator result is not an object");if(!e.done)return e;F=e.value,C<2&&(C=0)}else C===1&&(e=N.return)&&e.call(N),C<2&&(F=TypeError("The iterator does not provide a '"+Y+"' method"),C=1);N=o}else if((e=(Q=J.n<0)?F:L.call(z,J))!==f)break}catch(lt){N=o,C=1,F=lt}finally{j=1}}return{value:e,done:Q}}}(D,w,O),!0),x}var f={};function d(){}function u(){}function b(){}e=Object.getPrototypeOf;var v=[][r]?e(e([][r]())):(Ue(e={},r,function(){return this}),e),E=b.prototype=d.prototype=Object.create(v);function T(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,b):(D.__proto__=b,Ue(D,i,"GeneratorFunction")),D.prototype=Object.create(E),D}return u.prototype=b,Ue(E,"constructor",b),Ue(b,"constructor",u),u.displayName="GeneratorFunction",Ue(b,i,"GeneratorFunction"),Ue(E),Ue(E,i,"Generator"),Ue(E,r,function(){return this}),Ue(E,"toString",function(){return"[object Generator]"}),(Oe=function(){return{w:a,m:T}})()}function Ue(o,e,t,r){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Ue=function(a,f,d,u){function b(v,E){Ue(a,v,function(T){return this._invoke(v,E,T)})}f?i?i(a,f,{value:d,enumerable:!u,configurable:!u,writable:!u}):a[f]=d:(b("next",0),b("throw",1),b("return",2))},Ue(o,e,t,r)}function ha(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),t.push.apply(t,r)}return t}function da(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ha(Object(t),!0).forEach(function(r){Dl(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ha(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function Dl(o,e,t){return(e=Ru(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Fr(o){return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(o)}function Iu(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function pa(o,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,Ru(r.key),r)}}function Tu(o,e,t){return e&&pa(o.prototype,e),t&&pa(o,t),Object.defineProperty(o,"prototype",{writable:!1}),o}function Ru(o){var e=function(t,r){if(Fr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var a=i.call(t,r);if(Fr(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}(o,"string");return Fr(e)=="symbol"?e:e+""}function ga(o,e,t,r,i,a,f){try{var d=o[a](f),u=d.value}catch(b){return void t(b)}d.done?e(u):Promise.resolve(u).then(r,i)}function Nr(o){return function(){var e=this,t=arguments;return new Promise(function(r,i){var a=o.apply(e,t);function f(u){ga(a,r,i,f,d,"next",u)}function d(u){ga(a,r,i,f,d,"throw",u)}f(void 0)})}}var Pu=[],ci=!1,Cu="0.0.1";function Bl(o){return new Promise(function(e,t){Pu.push({task:o,resolve:e,reject:t}),Nu()})}function Nu(){return ku.apply(this,arguments)}function ku(){return(ku=Nr(Oe().m(function o(){var e,t,r;return Oe().w(function(i){for(;;)switch(i.p=i.n){case 0:if(!ci){i.n=1;break}return i.a(2);case 1:if(e=Pu.shift()){i.n=2;break}return i.a(2);case 2:return ci=!0,i.p=3,i.n=4,e.task();case 4:t=i.v,e.resolve(t),i.n=6;break;case 5:i.p=5,r=i.v,e.reject(r);case 6:return i.p=6,ci=!1,Nu(),i.f(6);case 7:return i.a(2)}},o,null,[[3,5,6,7]])}))).apply(this,arguments)}var ma=function(){function o(f,d){var u,b=this,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Iu(this,o),this.applicationId=f,this.providerId=d,this.sessionId="",this.signature="",this.timestamp=Date.now().toString(),this.parameters={},this.context={contextAddress:"0x0",contextMessage:"sample context"},this.redirectUrl="",this.sdkVersion="ext-".concat(Cu),this.resolvedProviderVersion="",this.jsonProofResponse=!1,this.extensionID=v.extensionID||"",this.providerVersion=v.providerVersion||"",this.acceptAiProviders=!!v.acceptAiProviders,this.callbackUrl=v.callbackUrl||"",this._backgroundInitialized=!1,this._ctx=null,this._listeners={started:new Set,completed:new Set,error:new Set,progress:new Set},this._boundWindowListener=this._handleWindowMessage.bind(this),window.addEventListener("message",this._boundWindowListener),this._mode=typeof chrome<"u"&&chrome.runtime&&((u=location)===null||u===void 0?void 0:u.protocol)==="chrome-extension:"?"extension":"web",this._mode==="extension"){this._boundChromeHandler=function(E){var T=E||{},D=T.action,S=T.data,w=T.error,O=S==null?void 0:S.sessionId;if(!b.sessionId||b.sessionId===O)if(D==="PROOF_SUBMITTED"){var k=(S==null?void 0:S.formattedProofs)||(S==null?void 0:S.proof)||S;b._emit("completed",k)}else D!=="PROOF_SUBMISSION_FAILED"&&D!=="PROOF_GENERATION_FAILED"||b._emit("error",w||new Error("Verification failed"))};try{chrome.runtime.onMessage.addListener(this._boundChromeHandler)}catch{}}}return Tu(o,[{key:"setAppCallbackUrl",value:function(f){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!f||typeof f!="string")throw new Error("callbackUrl must be a non-empty string");this.callbackUrl=f,this.jsonProofResponse=!!d}},{key:"setRedirectUrl",value:function(f){if(!f||typeof f!="string")throw new Error("redirectUrl must be a non-empty string");this.redirectUrl=f}},{key:"addContext",value:function(f,d){if(!f||!d)throw new Error("Both address and message are required");this.context={contextAddress:String(f),contextMessage:String(d)}}},{key:"setParams",value:function(f){if(!f||Fr(f)!=="object")throw new Error("params must be an object");this.parameters=da(da({},this.parameters),f)}},{key:"getStatusUrl",value:function(){if(!this.sessionId)throw new Error("Session not initialized");return Le.Sn!==null&&Le.Sn!==void 0&&Le.Sn.STATUS_URL?Le.Sn.STATUS_URL(this.sessionId):"".concat(Le.fn,"/api/sdk/status/").concat(this.sessionId)}},{key:"on",value:function(f,d){var u=this;if(!this._listeners[f])throw new Error("Unknown event: ".concat(f));return this._listeners[f].add(d),function(){return u.off(f,d)}}},{key:"off",value:function(f,d){this._listeners[f]&&this._listeners[f].delete(d)}},{key:"startVerification",value:(a=Nr(Oe().m(function f(){var d=this;return Oe().w(function(u){for(;;)if(u.n===0)return u.a(2,Bl(function(){return d._startVerificationInternal()}))},f)})),function(){return a.apply(this,arguments)})},{key:"cancel",value:(i=Nr(Oe().m(function f(){var d,u=this,b=arguments;return Oe().w(function(v){for(;;)switch(v.n){case 0:if(d=b.length>0&&b[0]!==void 0?b[0]:5e3,this.sessionId){v.n=1;break}return v.a(2);case 1:return v.a(2,new Promise(function(E){var T=!1,D=u.on("error",function(){T||(T=!0,D(),E(!0))});window.postMessage({action:Le.vQ.CANCEL_VERIFICATION,messageId:u.sessionId,extensionID:u.extensionID},"*"),setTimeout(function(){T||(D(),E(!1))},d)}))}},f,this)})),function(){return i.apply(this,arguments)})},{key:"_startVerificationInternal",value:(r=Nr(Oe().m(function f(){var d,u,b=this;return Oe().w(function(v){for(;;)switch(v.n){case 0:if(this.sessionId){v.n=1;break}throw new Error("Session not initialized");case 1:if(this.signature){v.n=2;break}throw new Error("Signature not set");case 2:return d={sessionId:this.sessionId,providerId:this.providerId,applicationId:this.applicationId,signature:this.signature,timestamp:this.timestamp,callbackUrl:this.callbackUrl||"",context:JSON.stringify(this.context||{}),parameters:this.parameters||{},redirectUrl:this.redirectUrl||"",acceptAiProviders:!!this.acceptAiProviders,sdkVersion:this.sdkVersion,providerVersion:this.providerVersion||"",resolvedProviderVersion:this.resolvedProviderVersion||"",jsonProofResponse:!!this.jsonProofResponse},u=this.sessionId,v.a(2,new Promise(function(E,T){var D=b.on("started",function(){}),S=b.on("completed",function(k){O(),E(k)}),w=b.on("error",function(k){O(),T(k)}),O=function(){D&&D(),S&&S(),w&&w()};if(b._mode==="extension")try{chrome.runtime.sendMessage({action:"START_VERIFICATION",source:"content-script",target:"background",data:d},function(k){k&&k.success&&b._emit("started",{sessionId:b.sessionId,messageId:u})})}catch(k){b._emit("error",k instanceof Error?k:new Error(String(k)))}else{if(!b.extensionID)return void b._emit("error",new Error("extensionID is required when running on a web page"));window.postMessage({action:Le.vQ.START_VERIFICATION,messageId:u,data:d,extensionID:b.extensionID},"*")}}))}},f,this)})),function(){return r.apply(this,arguments)})},{key:"dispose",value:function(){var f;if(window.removeEventListener("message",this._boundWindowListener),this._boundChromeHandler&&(f=chrome)!==null&&f!==void 0&&(f=f.runtime)!==null&&f!==void 0&&(f=f.onMessage)!==null&&f!==void 0&&f.removeListener)try{chrome.runtime.onMessage.removeListener(this._boundChromeHandler)}catch{}this._listeners.started.clear(),this._listeners.completed.clear(),this._listeners.error.clear(),this._listeners.progress.clear()}},{key:"_initSession",value:(t=Nr(Oe().m(function f(d){var u,b;return Oe().w(function(v){for(;;)switch(v.n){case 0:return v.n=1,fetch("".concat(Le.fn,"/api/sdk/init/session/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});case 1:return u=v.v,v.n=2,u.json().catch(function(){return{}});case 2:if(b=v.v,u.ok){v.n=3;break}throw new Error((b==null?void 0:b.message)||"Failed to initialize session");case 3:return v.a(2,b)}},f)})),function(f){return t.apply(this,arguments)})},{key:"_emit",value:function(f,d){if(this._listeners[f]){var u,b=Ul(this._listeners[f]);try{for(b.s();!(u=b.n()).done;){var v=u.value;try{v(d)}catch{}}}catch(E){b.e(E)}finally{b.f()}}}},{key:"_handleWindowMessage",value:function(f){if(f.source===window){var d=f.data||{},u=d.action,b=d.messageId,v=d.data,E=d.error;if(!this.sessionId||this.sessionId===b)if(u!==Le.vQ.VERIFICATION_COMPLETED)u!==Le.vQ.VERIFICATION_FAILED?u!==Le.vQ.VERIFICATION_STARTED||this._emit("started",{sessionId:this.sessionId,messageId:b}):this._emit("error",E||new Error("Verification failed"));else{var T=(v==null?void 0:v.proofs)||(v==null?void 0:v.formattedProofs)||v;this._emit("completed",T)}}}}],[{key:"init",value:(e=Nr(Oe().m(function f(d,u,b){var v,E,T,D,S,w,O,k=arguments;return Oe().w(function(x){for(;;)switch(x.n){case 0:if(v=k.length>3&&k[3]!==void 0?k[3]:{},d&&typeof d=="string"){x.n=1;break}throw new Error("applicationId must be a non-empty string");case 1:if(u&&typeof u=="string"){x.n=2;break}throw new Error("appSecret must be a non-empty string");case 2:if(b&&typeof b=="string"){x.n=3;break}throw new Error("providerId must be a non-empty string");case 3:return E=new o(d,b,v),T='{"providerId":"'.concat(b,'","timestamp":"').concat(E.timestamp,'"}'),D=ye(new TextEncoder().encode(T)),S=new Si(u),x.n=4,S.signMessage(Ot(D));case 4:return w=x.v,E.signature=w,x.n=5,E._initSession({providerId:b,appId:d,timestamp:E.timestamp,signature:w,versionNumber:E.providerVersion||""});case 5:return O=x.v,E.sessionId=O.sessionId||"",E.resolvedProviderVersion=O.resolvedProviderVersion||"",console.log("instance from init",E),x.a(2,E)}},f)})),function(f,d,u){return e.apply(this,arguments)})},{key:"fromJsonString",value:function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=typeof f=="string"?JSON.parse(f):f;return this.fromConfig(u,d)}},{key:"fromConfig",value:function(f){var d,u,b,v,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!f||Fr(f)!=="object")throw new Error("invalid config");var T=new o(String(f.applicationId||""),String(f.providerId||""),E||{});return T.sessionId=String(f.sessionId||""),T.signature=String(f.signature||""),T.timestamp=String(f.timeStamp||f.timestamp||Date.now()),T.parameters=f.parameters||{},T.context=f.context||T.context,T.callbackUrl=String(f.appCallbackUrl||f.callbackUrl||""),T.jsonProofResponse=!!((d=f.jsonProofResponse)!==null&&d!==void 0?d:T.jsonProofResponse),T.resolvedProviderVersion=String(f.resolvedProviderVersion||""),T.providerVersion=String(f.providerVersion||""),T.redirectUrl=String(f.redirectUrl||""),T.acceptAiProviders=!!((u=(b=f.acceptAiProviders)!==null&&b!==void 0?b:(v=f.options)===null||v===void 0?void 0:v.acceptAiProviders)!==null&&u!==void 0?u:T.acceptAiProviders),E!=null&&E.extensionID&&(T.extensionID=String(E.extensionID)),console.log("instance from fromConfig",T),T}}]);var e,t,r,i,a}(),jl=function(){return Tu(function e(){var t;Iu(this,e),this._backgroundInitialized=!1,this._ctx=null,this._mode=typeof chrome<"u"&&chrome.runtime&&((t=location)===null||t===void 0?void 0:t.protocol)==="chrome-extension:"?"extension":"web"},[{key:"initializeBackground",value:function(){if(this._backgroundInitialized)return this._ctx;try{var e=(0,Ju.A)();return this._backgroundInitialized=!0,this._ctx=e,e}catch(t){throw t}}},{key:"isExtensionInstalled",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.extensionID,r=e.timeout,i=r===void 0?500:r;return new Promise(function(a){var f="reclaim-check-".concat(Date.now()),d=function(u){var b,v;u.source===window&&((b=u.data)===null||b===void 0?void 0:b.action)===Le.vQ.EXTENSION_RESPONSE&&((v=u.data)===null||v===void 0?void 0:v.messageId)===f&&(window.removeEventListener("message",d),a(!!u.data.installed))};window.addEventListener("message",d),window.postMessage({action:Le.vQ.CHECK_EXTENSION,extensionID:t,messageId:f},"*"),setTimeout(function(){window.removeEventListener("message",d),a(!1)},i)})}},{key:"getVersion",value:function(){return Cu}},{key:"init",value:(o=Nr(Oe().m(function e(t,r,i){var a,f=arguments;return Oe().w(function(d){for(;;)switch(d.n){case 0:return a=f.length>3&&f[3]!==void 0?f[3]:{},d.n=1,ma.init(t,r,i,a);case 1:return d.a(2,d.v)}},e)})),function(e,t,r){return o.apply(this,arguments)})},{key:"fromJsonString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ma.fromJsonString(e,t)}}]);var o}(),Kl=new jl;let Gl=class{constructor(e={}){ht(this,"baseUrl","https://api.trex.dev.dipbit.xyz");ht(this,"securityData",null);ht(this,"securityWorker");ht(this,"abortControllers",new Map);ht(this,"customFetch",(...e)=>fetch(...e));ht(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});ht(this,"setSecurityData",e=>{this.securityData=e});ht(this,"contentFormatters",{"application/json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"application/vnd.api+json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"text/plain":e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,"multipart/form-data":e=>Object.keys(e||{}).reduce((t,r)=>{const i=e[r];return t.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),t},new FormData),"application/x-www-form-urlencoded":e=>this.toQueryString(e)});ht(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal});ht(this,"abortRequest",e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))});ht(this,"request",async({body:e,secure:t,path:r,type:i,query:a,format:f,baseUrl:d,cancelToken:u,...b})=>{const v=(typeof t=="boolean"?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},E=this.mergeRequestParams(b,v),T=a&&this.toQueryString(a),D=this.contentFormatters[i||"application/json"],S=f||E.format;return this.customFetch(`${d||this.baseUrl||""}${r}${T?`?${T}`:""}`,{...E,headers:{...E.headers||{},...i&&i!=="multipart/form-data"?{"Content-Type":i}:{}},signal:(u?this.createAbortSignal(u):E.signal)||null,body:typeof e>"u"||e===null?null:D(e)}).then(async w=>{const O=w.clone();O.data=null,O.error=null;const k=S?await w[S]().then(x=>(O.ok?O.data=x:O.error=x,O)).catch(x=>(O.error=x,O)):O;if(u&&this.abortControllers.delete(u),!w.ok)throw k;return k})});Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}},Hl=class extends Gl{constructor(){super(...arguments);ht(this,"v1",{initVideoSession:(t,r={})=>this.request({path:"/v1/video/session/init",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),reportEvents:(t,r={})=>this.request({path:"/v1/video/events/report",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),createTeam:(t,r={})=>this.request({path:"/v1/teams",method:"POST",body:t,type:"application/json",format:"json",...r}),updateTeamType:(t,r={})=>this.request({path:"/v1/teams/update/type",method:"POST",query:t,format:"json",...r}),joinTeam:(t,r={})=>this.request({path:"/v1/teams/join",method:"POST",body:t,type:"application/json",format:"json",...r}),taskSocialEvent:(t,r={})=>this.request({path:"/v1/task/socialEvent",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),syncPersonaQuestsStatus:(t,r={})=>this.request({path:"/v1/s2s/personas/quests/status",method:"POST",body:t,type:"application/json",format:"json",...r}),unbindSocialInfo:(t,r={})=>this.request({path:"/v1/s2s/customers/unbindSocialInfo",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),bindSocialInfo:(t,r={})=>this.request({path:"/v1/s2s/customers/bindSocialInfo",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),joinCampaign:(t,r,i={})=>this.request({path:`/v1/s2s/campaigns/advertisers/${t}/join/${r}`,method:"POST",secure:!0,format:"json",...i}),rexyRewardCollect:(t,r={})=>this.request({path:"/v1/rexys/reward/collect",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),rexyClaim:(t,r={})=>this.request({path:"/v1/rexys/claim",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),rexyClaimBuild:(t,r,i={})=>this.request({path:`/v1/rexys/claim/build/${t}`,method:"POST",query:r,secure:!0,format:"json",...i}),bindWallet:(t,r={})=>this.request({path:"/v1/passport/wallet/bind",method:"POST",body:t,type:"application/json",format:"json",...r}),setHandleName:(t,r={})=>this.request({path:"/v1/passport/setHandleName",method:"POST",query:t,format:"json",...r}),eligibleGet:(t={})=>this.request({path:"/v1/passport/nft/eligible",method:"GET",secure:!0,format:"json",...t}),eligiblePost:(t,r={})=>this.request({path:"/v1/passport/nft/eligible",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),platformSocialUpload:(t,r={})=>this.request({path:"/v1/customers/social/upload",method:"POST",body:t,type:"application/json",format:"json",...r}),reversePrivacyAuth:(t,r={})=>this.request({path:"/v1/customers/privacy/reverseAuth",method:"POST",body:t,type:"application/json",format:"json",...r}),queryNotifySwitch:(t={})=>this.request({path:"/v1/customers/notify/switch",method:"GET",format:"json",...t}),updateNotifySwitch:(t,r={})=>this.request({path:"/v1/customers/notify/switch",method:"POST",body:t,type:"application/json",format:"json",...r}),bindInvite:(t,r={})=>this.request({path:"/v1/customers/invites/bind",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),fcmBind:(t,r={})=>this.request({path:"/v1/customers/fcm/bind",method:"POST",body:t,type:"application/json",format:"json",...r}),addWaitList:(t,r={})=>this.request({path:"/v1/customers/addWaitList",method:"POST",body:t,type:"application/json",format:"json",...r}),addWaitDeveloperList:(t,r={})=>this.request({path:"/v1/customers/addDeveloperWaitList",method:"POST",body:t,type:"application/json",format:"json",...r}),addWaitListUpload:(t,r={})=>this.request({path:"/v1/customers/addDeveloperWaitList/upload",method:"POST",body:t,type:"multipart/form-data",format:"json",...r}),addWaitCreatorList:(t,r={})=>this.request({path:"/v1/customers/addCreateWaitList",method:"POST",body:t,type:"application/json",format:"json",...r}),thirdAuthorize:(t,r={})=>this.request({path:"/v1/auth/third/authorize",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...r}),refreshAccessToken:(t,r={})=>this.request({path:"/v1/auth/refresh",method:"POST",query:t,format:"json",...r}),qrAuthLogin:(t,r={})=>this.request({path:"/v1/auth/qr/login",method:"POST",body:t,type:"application/json",format:"json",...r}),logout:(t={})=>this.request({path:"/v1/auth/logout",method:"POST",secure:!0,format:"json",...t}),authLogin:(t,r={})=>this.request({path:"/v1/auth/login",method:"POST",body:t,type:"application/json",format:"json",...r}),nftHold:(t,r={})=>this.request({path:"/v1/tx/nft/hold",method:"GET",query:t,secure:!0,format:"json",...r}),faucetDrip:(t,r={})=>this.request({path:"/v1/tx/faucet",method:"GET",query:t,format:"json",...r}),getPassportTeamCode:(t,r={})=>this.request({path:"/v1/teams/team/code",method:"GET",query:t,format:"json",...r}),getTeamDetail:(t,r={})=>this.request({path:`/v1/s2s/teams/detail/${t}`,method:"GET",format:"json",...r}),queryBySocialInfo:(t,r={})=>this.request({path:"/v1/s2s/customers/queryBySocialInfo",method:"GET",query:t,secure:!0,format:"json",...r}),inviteByCid:(t,r={})=>this.request({path:"/v1/s2s/customers/invites/me",method:"GET",query:t,secure:!0,format:"json",...r}),getAssetToken:(t,r,i={})=>this.request({path:`/v1/s2s/asset/token/${t}`,method:"GET",query:r,format:"json",...i}),getAssetTokenDexPair:(t,r,i={})=>this.request({path:`/v1/s2s/asset/token/dexpair/${t}`,method:"GET",query:r,format:"json",...i}),getAssetNft:(t,r,i={})=>this.request({path:`/v1/s2s/asset/nft/${t}`,method:"GET",query:r,format:"json",...i}),getAssetNftSummary:(t,r,i={})=>this.request({path:`/v1/s2s/asset/nft/summary/${t}`,method:"GET",query:r,format:"json",...i}),getAssetBadge:(t,r,i={})=>this.request({path:`/v1/s2s/asset/badge/${t}`,method:"GET",query:r,format:"json",...i}),rexyRewardLast:(t,r={})=>this.request({path:"/v1/rexys/reward/last",method:"GET",query:t,secure:!0,format:"json",...r}),rexy:(t={})=>this.request({path:"/v1/rexys/me",method:"GET",secure:!0,format:"json",...t}),rexys:(t={})=>this.request({path:"/v1/rexys/avatar",method:"GET",secure:!0,format:"json",...t}),queryPersonas:(t,r={})=>this.request({path:"/v1/personas",method:"GET",query:t,format:"json",...r}),personaStats:(t={})=>this.request({path:"/v1/personas/stats",method:"GET",format:"json",...t}),getPassportInfo:(t={})=>this.request({path:"/v1/passport/me",method:"GET",format:"json",...t}),getPassportConnect:(t,r={})=>this.request({path:"/v1/passport/connect",method:"GET",query:t,format:"json",...r}),getNotices:(t,r={})=>this.request({path:"/v1/notice",method:"GET",query:t,secure:!0,format:"json",...r}),news:(t,r={})=>this.request({path:"/v1/news",method:"GET",query:t,secure:!0,format:"json",...r}),discoveryEvents:(t,r={})=>this.request({path:"/v1/news/discovery/events",method:"GET",query:t,format:"json",...r}),discoveryBlog:(t,r={})=>this.request({path:"/v1/news/dicovery/blog",method:"GET",query:t,format:"json",...r}),banner:(t={})=>this.request({path:"/v1/news/banner",method:"GET",secure:!0,format:"json",...t}),privacyAuth:(t={})=>this.request({path:"/v1/customers/privacy/auth",method:"GET",format:"json",...t}),invite:(t={})=>this.request({path:"/v1/customers/invites/me",method:"GET",secure:!0,format:"json",...t}),getCampaigns:(t={})=>this.request({path:"/v1/campaigns",method:"GET",format:"json",...t}),getAdvertiserDetail:(t,r={})=>this.request({path:`/v1/campaigns/advertisers/${t}`,method:"GET",format:"json",...r}),getCampaignTasks:(t,r,i={})=>this.request({path:`/v1/campaigns/advertisers/${t}/tasks/${r}`,method:"GET",format:"json",...i}),sign:(t,r={})=>this.request({path:`/v1/auth/${t}/sign`,method:"GET",format:"json",...r}),thirdBindings:(t={})=>this.request({path:"/v1/auth/third/bindings",method:"GET",secure:!0,format:"json",...t}),challenge:(t,r={})=>this.request({path:"/v1/auth/challenge",method:"GET",query:t,secure:!0,format:"json",...r}),removeTeamMember:(t,r={})=>this.request({path:`/v1/teams/remove/${t}`,method:"DELETE",format:"json",...r}),leaveTeam:(t={})=>this.request({path:"/v1/teams/leave",method:"DELETE",format:"json",...t})});ht(this,"tgWebhook",{onReceiveUpdate:(t,r={})=>this.request({path:"/tg-webhook/callback",method:"POST",body:t,type:"application/json",...r}),hello:(t={})=>this.request({path:"/tg-webhook/hello",method:"GET",...t}),hello3:(t={})=>this.request({path:"/tg-webhook/hello",method:"PUT",...t}),hello2:(t={})=>this.request({path:"/tg-webhook/hello",method:"POST",...t}),hello5:(t={})=>this.request({path:"/tg-webhook/hello",method:"DELETE",...t}),hello6:(t={})=>this.request({path:"/tg-webhook/hello",method:"OPTIONS",...t}),hello1:(t={})=>this.request({path:"/tg-webhook/hello",method:"HEAD",...t}),hello4:(t={})=>this.request({path:"/tg-webhook/hello",method:"PATCH",...t})})}},Fl=class{constructor(e={}){ht(this,"baseUrl","https://api.quests.dev.dipbit.xyz");ht(this,"securityData",null);ht(this,"securityWorker");ht(this,"abortControllers",new Map);ht(this,"customFetch",(...e)=>fetch(...e));ht(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});ht(this,"setSecurityData",e=>{this.securityData=e});ht(this,"contentFormatters",{"application/json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"application/vnd.api+json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"text/plain":e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,"multipart/form-data":e=>e instanceof FormData?e:Object.keys(e||{}).reduce((t,r)=>{const i=e[r];return t.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),t},new FormData),"application/x-www-form-urlencoded":e=>this.toQueryString(e)});ht(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal});ht(this,"abortRequest",e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))});ht(this,"request",async({body:e,secure:t,path:r,type:i,query:a,format:f,baseUrl:d,cancelToken:u,...b})=>{const v=(typeof t=="boolean"?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},E=this.mergeRequestParams(b,v),T=a&&this.toQueryString(a),D=this.contentFormatters[i||"application/json"],S=f||E.format;return this.customFetch(`${d||this.baseUrl||""}${r}${T?`?${T}`:""}`,{...E,headers:{...E.headers||{},...i&&i!=="multipart/form-data"?{"Content-Type":i}:{}},signal:(u?this.createAbortSignal(u):E.signal)||null,body:typeof e>"u"||e===null?null:D(e)}).then(async w=>{const O=w;O.data=null,O.error=null;const k=S?w.clone():w,x=S?await k[S]().then(L=>(O.ok?O.data=L:O.error=L,O)).catch(L=>(O.error=L,O)):O;if(u&&this.abortControllers.delete(u),!w.ok)throw x;return x})});Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}};/**
 * @title Kweb API
 * @version 1.0
 * @license Apache 2.0 (https://www.apache.org/licenses/LICENSE-2.0)
 * @baseUrl https://api.quests.dev.dipbit.xyz
 *
 * The Kweb API v1.0
 */let zl=class extends Fl{constructor(){super(...arguments);ht(this,"v2",{v2TasksSyncDoquestsPost:(t,r={})=>this.request({path:"/v2/tasks/sync/doquests",method:"POST",query:t,format:"json",...r}),v2TasksLadderRewardGet:(t={})=>this.request({path:"/v2/tasks/ladder/reward",method:"GET",format:"json",...t}),popup:(t,r={})=>this.request({path:"/v2/customer/popup",method:"GET",query:t,format:"json",...r}),v2QuestionMeGet:(t={})=>this.request({path:"/v2/question/me",method:"GET",format:"json",...t}),lotteryWinners:(t,r={})=>this.request({path:"/v2/lottery/winners",method:"GET",query:t,format:"json",...r}),v2TasksDoquestsPost:(t,r={})=>this.request({path:"/v2/tasks/doquests",method:"POST",query:t,format:"json",...r}),v2VoteCastPost:(t,r={})=>this.request({path:"/v2/vote/cast",method:"POST",query:t,format:"json",...r}),lotteryInfo:(t,r={})=>this.request({path:"/v2/lottery/info",method:"GET",query:t,format:"json",...r}),v2GoodsDetailGet:(t,r={})=>this.request({path:"/v2/goods/detail",method:"GET",query:t,format:"json",...r}),v2RewardGrantPost:(t,r={})=>this.request({path:"/v2/reward/grant",method:"POST",query:t,format:"json",...r}),membership:(t={})=>this.request({path:"/v2/member/membership",method:"GET",format:"json",...t}),v2QuestionAcquireGet:(t={})=>this.request({path:"/v2/question/acquire",method:"GET",format:"json",...t}),v2GoodsRedeemPost:(t,r={})=>this.request({path:"/v2/goods/redeem",method:"POST",query:t,format:"json",...r}),v2TasksVerifyPost:(t,r={})=>this.request({path:"/v2/tasks/verify",method:"POST",query:t,format:"json",...r}),globalLadder1:(t,r={})=>this.request({path:"/v2/member/ladder",method:"GET",query:t,format:"json",...r}),taskList:(t,r={})=>this.request({path:"/v2/tasks/list_new",method:"GET",query:t,format:"json",...r}),v2TasksCodeCodeGet:(t,r={})=>this.request({path:`/v2/tasks/code/${t}`,method:"GET",format:"json",...r}),v2MemberCodeHarvestPost:(t,r={})=>this.request({path:`/v2/member/${t}/harvest`,method:"POST",format:"json",...r}),v2TasksTwitterTweetsTaskIdGet:(t,r={})=>this.request({path:`/v2/tasks/twitter/tweets/${t}`,method:"GET",format:"json",...r}),v2TasksDotaskPost:(t,r={})=>this.request({path:"/v2/tasks/dotask",method:"POST",query:t,format:"json",...r}),v2QuestionSubmitPost:(t,r={})=>this.request({path:"/v2/question/submit",method:"POST",body:t,type:"application/json",format:"json",...r}),memberBusinessOrder:(t,r={})=>this.request({path:"/v2/member/order",method:"GET",query:t,format:"json",...r}),pointLedgers:(t,r,i={})=>this.request({path:`/v2/member/points/ledgers/${t}`,method:"GET",query:r,format:"json",...i}),v2VoteListGet:(t,r={})=>this.request({path:"/v2/vote/list",method:"GET",query:t,format:"json",...r}),v2MemberCodeExpansionPost:(t,r={})=>this.request({path:`/v2/member/${t}/expansion`,method:"POST",format:"json",...r}),v2SeasonGet:(t={})=>this.request({path:"/v2/season",method:"GET",format:"json",...t}),v2GoodsListGet:(t,r={})=>this.request({path:"/v2/goods/list",method:"GET",query:t,format:"json",...r}),sendVerifyCode:(t,r={})=>this.request({path:"/v2/customer/sendVerifyCode",method:"POST",body:t,type:"application/json",format:"json",...r}),v2TasksDetailGet:(t,r={})=>this.request({path:"/v2/tasks/detail",method:"GET",query:t,format:"json",...r}),v2TasksListGet:(t,r={})=>this.request({path:"/v2/tasks/list",method:"GET",query:t,format:"json",...r}),memberAsset:(t,r={})=>this.request({path:`/v2/member/asset/${t}`,method:"GET",format:"json",...r}),claim:(t,r,i={})=>this.request({path:`/v2/reward/claim/${t}`,method:"POST",query:r,format:"json",...i}),me2:(t,r={})=>this.request({path:"/v2/customer/me",method:"GET",query:t,format:"json",...r}),refreshVerified:(t={})=>this.request({path:"/v2/customer/refreshVerified",method:"POST",format:"json",...t}),drew:(t,r={})=>this.request({path:`/v2/lottery/${t}/open`,method:"POST",format:"json",...r}),transferOut:(t,r={})=>this.request({path:"/v2/member/transferout",method:"POST",body:t,type:"application/json",format:"json",...r}),v2TasksRewardByCodeGet:(t,r={})=>this.request({path:"/v2/tasks/reward/by/code",method:"GET",query:t,format:"json",...r}),upgrade:(t={})=>this.request({path:"/v2/member/upgrade",method:"POST",format:"json",...t}),checkIn:(t={})=>this.request({path:"/v2/tasks/checkin",method:"POST",format:"json",...t}),v2TasksEarlyPopGet:(t={})=>this.request({path:"/v2/tasks/early/pop",method:"GET",format:"json",...t}),checkInStatus:(t={})=>this.request({path:"/v2/tasks/checkin/status",method:"GET",format:"json",...t}),authToken:(t,r={})=>this.request({path:"/v2/customer/oauth/social/token",method:"POST",query:t,format:"json",...r}),rewardsByCode:(t,r={})=>this.request({path:"/v2/tasks/rewards/by/code",method:"GET",query:t,format:"json",...r}),allowClaim:(t,r={})=>this.request({path:`/v2/reward/allow/claim/${t}`,method:"GET",format:"json",...r}),oauthLogin:(t,r={})=>this.request({path:"/v2/customer/login/oauth",method:"POST",query:t,format:"json",...r}),v2RewardReceivePost:(t,r={})=>this.request({path:"/v2/reward/receive",method:"POST",query:t,format:"json",...r}),v2TasksProgressGet:(t,r={})=>this.request({path:"/v2/tasks/progress",method:"GET",query:t,format:"json",...r}),historyLadder1:(t,r={})=>this.request({path:"/v2/member/ladder/history",method:"GET",query:t,format:"json",...r})});ht(this,"telegram",{onReceiveUpdate:(t,r,i={})=>this.request({path:`/telegram/webhook/${t}/callback`,method:"POST",body:r,type:"application/json",...i}),globalHealth:(t={})=>this.request({path:"/telegram/webhook/health",method:"GET",...t}),getAllBotsStatus:(t={})=>this.request({path:"/telegram/webhook/status",method:"GET",...t}),getBotInfo:(t,r={})=>this.request({path:`/telegram/webhook/${t}/info`,method:"GET",...r})});ht(this,"s2",{s2TasksFulfillStatusGet:(t,r={})=>this.request({path:"/s2/tasks/fulfill/status",method:"GET",query:t,format:"json",...r}),twitterInfos:(t,r={})=>this.request({path:`/s2/customer/twitters/${t}`,method:"GET",format:"json",...r}),orderPaid:(t,r={})=>this.request({path:"/s2/member/order/paid",method:"GET",query:t,format:"json",...r}),customerEvent:(t,r={})=>this.request({path:"/s2/customer/event",method:"POST",query:t,format:"json",...r}),topLadder1:(t,r={})=>this.request({path:"/s2/member/top/ladder",method:"GET",query:t,format:"json",...r}),historyLadder2:(t,r={})=>this.request({path:"/s2/member/ladder/history",method:"GET",query:t,format:"json",...r}),authToken1:(t,r={})=>this.request({path:"/s2/customer/oauth/social/token",method:"POST",query:t,format:"json",...r}),campaignYieldUpdate:(t,r,i={})=>this.request({path:`/s2/activity/campaign/yield/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),twitterInfo:(t,r={})=>this.request({path:`/s2/customer/twitter/${t}`,method:"GET",format:"json",...r}),transferOut1:(t,r={})=>this.request({path:"/s2/member/transferout",method:"POST",body:t,type:"application/json",format:"json",...r}),fulfillTask:(t,r={})=>this.request({path:"/s2/tasks/fulfill",method:"POST",query:t,format:"json",...r}),customerInfo:(t,r,i={})=>this.request({path:`/s2/customer/${t}`,method:"GET",query:r,format:"json",...i}),s2RewardReceivePost:(t,r={})=>this.request({path:"/s2/reward/receive",method:"POST",query:t,format:"json",...r}),s2RewardGrantPost:(t,r={})=>this.request({path:"/s2/reward/grant",method:"POST",query:t,format:"json",...r}),globalLadder2:(t,r={})=>this.request({path:"/s2/member/ladder",method:"GET",query:t,format:"json",...r}),s2TasksVerifyGet:(t,r={})=>this.request({path:"/s2/tasks/verify",method:"GET",query:t,format:"json",...r}),transferIn:(t,r={})=>this.request({path:"/s2/member/transferin",method:"POST",body:t,type:"application/json",format:"json",...r})});ht(this,"v3",{globalLadder:(t,r={})=>this.request({path:"/v3/member/bread/ladder",method:"GET",query:t,format:"json",...r}),topLadder:(t,r={})=>this.request({path:"/v3/member/top/ladder",method:"GET",query:t,format:"json",...r}),pointDaily:(t,r={})=>this.request({path:"/v3/member/points/daily",method:"GET",query:t,format:"json",...r}),allianceContributorsList:(t,r={})=>this.request({path:"/v3/member/alliance/contributors/list",method:"GET",query:t,format:"json",...r}),queryInvitedRewards:(t,r={})=>this.request({path:"/v3/member/invited/rewards",method:"GET",query:t,format:"json",...r}),pointLedgersV3:(t,r,i={})=>this.request({path:`/v3/member/points/ledgers/${t}`,method:"GET",query:r,format:"json",...i}),allianceSanctuaryDetail:(t,r={})=>this.request({path:"/v3/member/alliance/sanctuary/detail",method:"GET",query:t,format:"json",...r}),allianceGlobalLadder:(t,r={})=>this.request({path:"/v3/member/alliance/ladder",method:"GET",query:t,format:"json",...r}),historyLadder:(t,r={})=>this.request({path:"/v3/member/bread/ladder/history",method:"GET",query:t,format:"json",...r}),topRank:(t,r={})=>this.request({path:"/v3/member/top/rank",method:"GET",query:t,format:"json",...r}),extensionPoints:(t,r={})=>this.request({path:"/v3/member/points/extension",method:"GET",query:t,format:"json",...r})});ht(this,"v4",{taskVerify:(t,r={})=>this.request({path:"/v4/tasks/verify",method:"POST",query:t,format:"json",...r}),taskSubmit:(t,r={})=>this.request({path:"/v4/s2s/tasks/submit",method:"POST",body:t,type:"application/json",format:"json",...r}),me1:(t,r={})=>this.request({path:"/v4/customer/me",method:"GET",query:t,format:"json",...r}),taskDetails:(t,r={})=>this.request({path:"/v4/tasks/details",method:"GET",query:t,format:"json",...r}),me:(t,r={})=>this.request({path:"/v4/s2s/customer/me",method:"GET",query:t,secure:!0,format:"json",...r}),taskStatus:(t,r={})=>this.request({path:"/v4/s2s/tasks/status",method:"GET",query:t,format:"json",...r}),assetDetail:(t,r={})=>this.request({path:"/v4/asset/detail",method:"GET",query:t,format:"json",...r})});ht(this,"v1",{dingTalkNotify:(t,r={})=>this.request({path:"/v1/dingtalk/webhook/notify",method:"POST",query:t,...r}),pointLedgersV1:(t,r,i={})=>this.request({path:`/v1/member/points/ledgers/${t}`,method:"GET",query:r,format:"json",...i})})}};class Ml{constructor(e={}){ht(this,"baseUrl","https://anchordev.dipbit.xyz/");ht(this,"securityData",null);ht(this,"securityWorker");ht(this,"abortControllers",new Map);ht(this,"customFetch",(...e)=>fetch(...e));ht(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});ht(this,"setSecurityData",e=>{this.securityData=e});ht(this,"contentFormatters",{"application/json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"application/vnd.api+json":e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,"text/plain":e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,"multipart/form-data":e=>e instanceof FormData?e:Object.keys(e||{}).reduce((t,r)=>{const i=e[r];return t.append(r,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),t},new FormData),"application/x-www-form-urlencoded":e=>this.toQueryString(e)});ht(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const r=this.abortControllers.get(e);return r?r.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal});ht(this,"abortRequest",e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))});ht(this,"request",async({body:e,secure:t,path:r,type:i,query:a,format:f,baseUrl:d,cancelToken:u,...b})=>{const v=(typeof t=="boolean"?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},E=this.mergeRequestParams(b,v),T=a&&this.toQueryString(a),D=this.contentFormatters[i||"application/json"],S=f||E.format;return this.customFetch(`${d||this.baseUrl||""}${r}${T?`?${T}`:""}`,{...E,headers:{...E.headers||{},...i&&i!=="multipart/form-data"?{"Content-Type":i}:{}},signal:(u?this.createAbortSignal(u):E.signal)||null,body:typeof e>"u"||e===null?null:D(e)}).then(async w=>{const O=w;O.data=null,O.error=null;const k=S?w.clone():w,x=S?await k[S]().then(L=>(O.ok?O.data=L:O.error=L,O)).catch(L=>(O.error=L,O)):O;if(u&&this.abortControllers.delete(u),!w.ok)throw x;return x})});Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}/**
 * @title Anchor OpenApi
 * @version V1.0
 * @license Apache 2.0 (http://springdoc.org)
 * @baseUrl https://anchordev.dipbit.xyz/
 */class Jl extends Ml{constructor(){super(...arguments);ht(this,"v1",{getNftSeriesById:(t,r,i,a={})=>this.request({path:`/v1/series/${t}/${r}`,method:"GET",query:i,format:"json",...a}),getTeamLeaderboard:(t,r={})=>this.request({path:"/v1/teams/leaderboard",method:"GET",query:t,format:"json",...r}),check:(t,r={})=>this.request({path:`/v1/check/${t}`,method:"POST",format:"json",...r}),getCheckResult:(t,r={})=>this.request({path:`/v1/check/${t}`,method:"GET",format:"json",...r}),getTeamDetail:(t,r={})=>this.request({path:`/v1/teams/${t}/detail`,method:"GET",format:"json",...r}),markNotificationRead:(t,r={})=>this.request({path:`/v1/notifications/${t}/read`,method:"POST",format:"json",...r}),listSeasonConfig:(t={})=>this.request({path:"/v1/seasons",method:"GET",format:"json",...t}),getBadgeContributors:(t,r={})=>this.request({path:`/v1/teams/badges/${t}/contributors`,method:"GET",format:"json",...r}),badgeAssets:(t,r={})=>this.request({path:"/v1/badges",method:"GET",query:t,format:"json",...r}),getTeamMemberRanking:(t,r,i={})=>this.request({path:`/v1/teams/${t}/members/ranking`,method:"GET",query:r,format:"json",...i}),userOpHashProcess:(t,r={})=>this.request({path:"/v1/transaction/process/userOpHash",method:"POST",body:t,type:"application/json",format:"json",...r}),getTeamBadges:(t,r={})=>this.request({path:"/v1/teams/badges",method:"GET",query:t,format:"json",...r}),nftSeries:(t,r={})=>this.request({path:`/v1/series/${t}`,method:"GET",format:"json",...r}),getMyTeamProfile:(t={})=>this.request({path:"/v1/teams/members/me",method:"GET",format:"json",...t}),getNotifications:(t,r={})=>this.request({path:"/v1/notifications",method:"GET",query:t,format:"json",...r}),transactionHashProcess:(t,r={})=>this.request({path:`/v1/transaction/process/${t}`,method:"POST",format:"json",...r})});ht(this,"v2",{getUserClaimableBadges:(t,r={})=>this.request({path:"/v2/badges/claimable",method:"GET",query:t,format:"json",...r}),getBadgeSeriesDetail:(t,r,i={})=>this.request({path:`/v2/badges/series/${t}`,method:"GET",query:r,format:"json",...i}),categoriesList:(t,r={})=>this.request({path:"/v2/badges/categories",method:"GET",query:t,format:"json",...r}),getUserBadgeAssets:(t,r={})=>this.request({path:"/v2/badges/assets",method:"GET",query:t,format:"json",...r}),getBadgeVerifiers:(t,r={})=>this.request({path:"/v2/badges/verifiers",method:"GET",query:t,format:"json",...r}),checkUserClaimableBadges:(t,r={})=>this.request({path:"/v2/badges",method:"POST",body:t,type:"application/json",format:"json",...r}),queryBadges:(t,r={})=>this.request({path:"/v2/badges",method:"GET",query:t,format:"json",...r}),categoriesDetail:(t,r,i={})=>this.request({path:`/v2/badges/categories/${t}`,method:"GET",query:r,format:"json",...i}),getBadgeSeries:(t,r={})=>this.request({path:"/v2/badges/series",method:"GET",query:t,format:"json",...r}),mint:(t,r,i={})=>this.request({path:`/v2/mint/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),batchMint:(t,r,i={})=>this.request({path:`/v2/batch/mint/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),getBadgeClaimSignatures:(t,r={})=>this.request({path:"/v2/badges/signatures",method:"POST",body:t,type:"application/json",format:"json",...r}),checkSingleBadgeClaimable:(t,r,i={})=>this.request({path:`/v2/badges/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),getBadgeDetail:(t,r={})=>this.request({path:`/v2/badges/${t}`,method:"GET",format:"json",...r})});ht(this,"s1",{queryBadgesHolders:(t,r={})=>this.request({path:"/s1/badges/holders",method:"GET",query:t,format:"json",...r}),leaveTeam:(t,r={})=>this.request({path:`/s1/teams/leave/${t}`,method:"DELETE",format:"json",...r}),teamDetail:(t,r={})=>this.request({path:`/s1/teams/detail/${t}`,method:"GET",format:"json",...r}),joinTeam:(t,r={})=>this.request({path:"/s1/teams/join",method:"POST",body:t,type:"application/json",format:"json",...r}),getTokenBalances:(t,r={})=>this.request({path:"/s1/token/balances",method:"POST",body:t,type:"application/json",format:"json",...r}),getNftSeriesDetail:(t,r,i,a={})=>this.request({path:`/s1/series/${t}/${r}`,method:"GET",query:i,format:"json",...a}),removeTeamMember:(t,r,i={})=>this.request({path:`/s1/teams/remove/${t}/${r}`,method:"DELETE",format:"json",...i}),intervalReset:(t,r={})=>this.request({path:"/s1/interval/reset",method:"POST",body:t,type:"application/json",format:"json",...r}),grantBadge:(t,r={})=>this.request({path:"/s1/badges",method:"POST",body:t,type:"application/json",format:"json",...r}),purchaseMint:(t,r,i={})=>this.request({path:`/s1/purchase/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),queryAssets:(t,r,i={})=>this.request({path:`/s1/assets/${t}`,method:"POST",body:r,type:"application/json",format:"json",...i}),updateTeamType:(t,r,i={})=>this.request({path:`/s1/teams/update/type/${t}`,method:"POST",query:r,format:"json",...i}),createTeam:(t,r={})=>this.request({path:"/s1/teams",method:"POST",body:t,type:"application/json",format:"json",...r}),checkByEvent:(t,r={})=>this.request({path:"/s1/check/event",method:"POST",body:t,type:"application/json",format:"json",...r}),getUserNftHoldingByDuration:(t,r={})=>this.request({path:"/s1/nft/holding-by-duration",method:"POST",body:t,type:"application/json",format:"json",...r}),badgesCheck:(t,r={})=>this.request({path:"/s1/badges/check",method:"POST",body:t,type:"application/json",format:"json",...r})})}}class Ql{constructor(e,t,r){ht(this,"client");ht(this,"token",null);ht(this,"refreshToken",null);ht(this,"isRefreshing",!1);ht(this,"refreshPromise",null);ht(this,"osDeviceId",null);ht(this,"trexProxy",null);this.client=e,t&&(this.client.baseUrl=t),this.osDeviceId=this.getOrCreateOsDeviceId(),this.trexProxy=r||null}getOrCreateOsDeviceId(){if(typeof window>"u")return"";const e=window.localStorage.getItem("os_device_id");if(e)return e;const t="trex_"+Math.random().toString(36).substring(2)+Date.now().toString(36);return window.localStorage.setItem("os_device_id",t),t}getHeaders(e){return this.osDeviceId&&this.osDeviceId,{...e.headers,JWT_TOKEN:this.token?`Bearer ${this.token}`:void 0,saas_id:"trex"}}setToken(e){this.token=e}setRefreshToken(e){this.refreshToken=e}clearToken(){this.token=null,this.refreshToken=null}async refreshAccessToken(){return this.isRefreshing?this.refreshPromise:(this.isRefreshing=!0,this.refreshPromise=(async()=>{try{if(!this.trexProxy)throw new Error("No PortalTrexApiProxy instance for token refresh");await this.trexProxy.refreshAccessToken();const e=this.trexProxy.token||"",t=this.trexProxy.refreshToken||"";this.setToken(e),this.setRefreshToken(t)}catch(e){throw this.clearToken(),e}finally{this.isRefreshing=!1,this.refreshPromise=null}})(),this.refreshPromise)}async requestWithAuth(e){var t,r;if(!this.token)throw new Error("No token available");try{const i=await e();return((t=i.data)==null?void 0:t.code)==="9101"||((r=i.data)==null?void 0:r.code)==="1105"?(await this.refreshAccessToken(),await e()):i}catch(i){if((i==null?void 0:i.status)===401&&this.refreshToken)return await this.refreshAccessToken(),e();throw i}}async requestWithoutAuth(e){return e()}get v1(){return{...this.client.v1}}get v2(){return{...this.client.v2,v2TasksListGet:(e,t={})=>this.requestWithAuth(()=>this.client.v2.v2TasksListGet({channel:"pc",...e},{...t,headers:this.getHeaders(t)})),v2TasksList:(e,t={})=>this.requestWithAuth(()=>this.client.v2.taskList({channel:"pc",...e},{...t,headers:this.getHeaders(t)})),v2TasksVerifyPost:(e,t={},r)=>this.requestWithAuth(()=>this.client.v2.v2TasksVerifyPost({taskId:e,ext:r},{...t,headers:this.getHeaders(t)})),v2SendVerifyCode:(e,t,r={},i)=>this.requestWithAuth(()=>this.client.v2.sendVerifyCode({receiver:e,channel:"email",customerName:t,sceneCode:i||"social_bind_email"},{...r,headers:this.getHeaders(r)})),v2VerifyCode:(e,t,r,i={})=>this.requestWithAuth(()=>this.client.v2.authToken({app:e,platform:e,code:t,redirectUri:r},{...i,headers:this.getHeaders(i)})),v2TasksDetailGet:(e,t={})=>this.requestWithAuth(()=>this.client.v2.v2TasksDetailGet({taskId:e},{...t,headers:this.getHeaders(t)})),v2DailyCheckInStatus:(e={})=>this.requestWithAuth(()=>this.client.v2.checkInStatus({...e,headers:this.getHeaders(e)})),v2DailyCheckIn:(e={})=>this.requestWithAuth(()=>this.client.v2.checkIn({...e,headers:this.getHeaders(e)})),v4customer:(e,t={})=>this.requestWithAuth(()=>this.client.v4.me1({...e},{...t,headers:this.getHeaders(t)}))}}get v3(){return{...this.client.v3,topRank:e=>this.requestWithAuth(()=>this.client.v3.topRank({assetBusinessType:[e],assetType:"POINT"},{headers:this.getHeaders({})})),topLadder:(e,t={})=>this.requestWithoutAuth(()=>this.client.v3.topLadder(e,{...t,headers:this.getHeaders(t)}))}}get v4(){return{...this.client.v4,taskDetails:(e,t={})=>this.requestWithoutAuth(()=>this.client.v4.taskDetails({...e},{...t,headers:this.getHeaders(t)})),assetDetail:(e,t={})=>this.requestWithAuth(()=>this.client.v4.assetDetail(e,{...t,headers:this.getHeaders(t)}))}}get s2(){return{...this.client.s2}}}class Xl{constructor(e,t){ht(this,"client");ht(this,"token",null);ht(this,"refreshToken",null);ht(this,"isRefreshing",!1);ht(this,"refreshPromise",null);ht(this,"osDeviceId",null);ht(this,"onTokenRefreshFailed");this.client=e,t&&(this.client.baseUrl=t),this.osDeviceId=this.getOrCreateOsDeviceId()}getOrCreateOsDeviceId(){if(typeof window>"u")return"";const e=window.localStorage.getItem("os_device_id");if(e)return e;const t="trex_"+Math.random().toString(36).substring(2)+Date.now().toString(36);return window.localStorage.setItem("os_device_id",t),t}getHeaders(e){const t=this.osDeviceId?{os_device_id:this.osDeviceId}:{},r=this.token?{Authorization:`Bearer ${this.token}`}:{};return{...e.headers,...r,...t}}setToken(e){this.token=e}setRefreshToken(e){this.refreshToken=e}clearToken(){this.token=null,this.refreshToken=null}setOnTokenRefreshFailed(e){this.onTokenRefreshFailed=e}async refreshAccessToken(){return this.isRefreshing?this.refreshPromise:(this.isRefreshing=!0,this.refreshPromise=(async()=>{var e,t;try{const r=await this.client.v1.refreshAccessToken({accessToken:this.token||"",refreshToken:this.refreshToken||""});(t=(e=r.data)==null?void 0:e.obj)!=null&&t.accessToken?(this.setToken(r.data.obj.accessToken),r.data.obj.refreshToken&&this.setRefreshToken(r.data.obj.refreshToken),typeof window<"u"&&window.localStorage.setItem("trex_portal_login_data",JSON.stringify(r.data.obj))):(this.clearToken(),this.onTokenRefreshFailed&&this.onTokenRefreshFailed())}catch(r){throw this.clearToken(),this.onTokenRefreshFailed&&this.onTokenRefreshFailed(),r}finally{this.isRefreshing=!1,this.refreshPromise=null}})(),this.refreshPromise)}async requestWithAuth(e){if(!this.token)throw new Error("No token available");try{return await e()}catch(t){if((t==null?void 0:t.status)===401&&this.refreshToken)return await this.refreshAccessToken(),e();throw t}}async requestWithoutAuth(e){return e()}get v1(){return{...this.client.v1,bindInvite:(e,t={})=>this.requestWithAuth(()=>this.client.v1.bindInvite(e,{...t,headers:this.getHeaders(t)})),thirdAuthorize:(e,t={})=>this.requestWithAuth(()=>this.client.v1.thirdAuthorize(e,{...t,headers:this.getHeaders(t)})),logout:(e={})=>this.requestWithAuth(()=>this.client.v1.logout({...e,headers:this.getHeaders(e)})),taskList:(e={})=>this.requestWithAuth(()=>this.client.v1.queryBySocialInfo({...e,headers:this.getHeaders(e)})),getPassportInfo:(e={})=>this.requestWithAuth(()=>this.client.v1.getPassportInfo({...e,headers:this.getHeaders(e)})),thirdBindings:(e={})=>this.requestWithAuth(()=>this.client.v1.thirdBindings({...e,headers:this.getHeaders(e)})),getPassportConnect:(e={},t={})=>this.requestWithAuth(()=>this.client.v1.getPassportConnect(e,{...t,headers:this.getHeaders(t)})),invite:(e={})=>this.requestWithAuth(()=>this.client.v1.invite({...e,headers:this.getHeaders(e)})),bindWallet:e=>this.requestWithAuth(()=>this.client.v1.bindWallet(e.query,{...e.params,headers:this.getHeaders(e.params||{})})),setHandleName:(e,t={})=>this.requestWithAuth(()=>this.client.v1.setHandleName(e,{...t,headers:this.getHeaders(t)})),privacyAuth:(e={})=>this.requestWithAuth(()=>this.client.v1.privacyAuth({...e,headers:this.getHeaders(e)})),reversePrivacyAuth:(e,t={})=>this.requestWithAuth(()=>this.client.v1.reversePrivacyAuth(e,{...t,headers:this.getHeaders(t)})),eligiblePost:(e,t={})=>this.requestWithAuth(()=>this.client.v1.eligiblePost(e,{...t,headers:this.getHeaders(t)})),eligibleGet:(e={})=>this.requestWithAuth(()=>this.client.v1.eligibleGet({...e,headers:this.getHeaders(e)})),sign:(e,t={})=>this.requestWithoutAuth(()=>this.client.v1.sign(e,{...t,headers:this.getHeaders(t)})),createTeam:(e,t={})=>this.requestWithAuth(()=>this.client.v1.createTeam(e,{...t,headers:this.getHeaders(t)})),joinTeam:(e,t={})=>this.requestWithAuth(()=>this.client.v1.joinTeam(e,{...t,headers:this.getHeaders(t)})),removeTeamMember:(e,t={})=>this.requestWithAuth(()=>this.client.v1.removeTeamMember(e,{...t,headers:this.getHeaders(t)})),leaveTeam:(e={})=>this.requestWithAuth(()=>this.client.v1.leaveTeam({...e,headers:this.getHeaders(e)})),getPassportTeamCode:(e,t={})=>this.requestWithAuth(()=>this.client.v1.getPassportTeamCode(e,{...t,headers:this.getHeaders(t)})),queryPersonas:(e,t={})=>this.requestWithAuth(()=>this.client.v1.queryPersonas(e,{...t,headers:this.getHeaders(t)})),getPersonasStats:(e={})=>this.requestWithAuth(()=>this.client.v1.personaStats({...e,headers:this.getHeaders(e)})),updateTeamType:({targetType:e})=>this.requestWithAuth(()=>this.client.v1.updateTeamType({targetType:e},{headers:this.getHeaders({})})),getCampaigns:(e={})=>this.requestWithoutAuth(()=>this.client.v1.getCampaigns({...e,headers:this.getHeaders(e)})),getAdvertiserDetail:(e,t={})=>this.requestWithoutAuth(()=>this.client.v1.getAdvertiserDetail(e,{...t,headers:this.getHeaders(t)})),fcmBind:(e,t={})=>this.requestWithAuth(()=>this.client.v1.fcmBind(e,{...t,headers:this.getHeaders(t)})),queryNotifySwitch:(e={})=>this.requestWithAuth(()=>this.client.v1.queryNotifySwitch({...e,headers:this.getHeaders(e)})),updateNotifySwitch:(e,t={})=>this.requestWithAuth(()=>this.client.v1.updateNotifySwitch(e,{...t,headers:this.getHeaders(t)}))}}}class Zl{constructor(e,t,r,i){ht(this,"client");ht(this,"token",null);ht(this,"refreshToken",null);ht(this,"isRefreshing",!1);ht(this,"refreshPromise",null);ht(this,"trexProxy",null);ht(this,"chain_id","");this.client=e,r&&(this.client.baseUrl=r),this.trexProxy=i||null,this.chain_id=t||""}getHeaders(e){return{...e.headers,client_id:"t-rex",chain_id:this.chain_id,jwt_token:this.token}}getV2Headers(e){return{...e.headers,client_id:"t-rex",chain_id:this.chain_id,jwt_token:this.token,"X-Project-Id":"t-rex","X-Chain-Id":this.chain_id,Authorization:`Bearer ${this.token}`}}setToken(e){this.token=e}setRefreshToken(e){this.refreshToken=e}clearToken(){this.token=null,this.refreshToken=null}async refreshAccessToken(){return this.isRefreshing?this.refreshPromise:(this.isRefreshing=!0,this.refreshPromise=(async()=>{try{if(!this.trexProxy)throw new Error("No PortalTrexApiProxy instance for token refresh");await this.trexProxy.refreshAccessToken();const e=this.trexProxy.token||"",t=this.trexProxy.refreshToken||"";this.setToken(e),this.setRefreshToken(t)}catch(e){throw this.clearToken(),e}finally{this.isRefreshing=!1,this.refreshPromise=null}})(),this.refreshPromise)}async requestWithAuth(e){var t;if(!this.token)throw new Error("No token available");try{const r=await e();return((t=r.data)==null?void 0:t.code)==="9101"?(await this.refreshAccessToken(),await e()):r}catch(r){if((r==null?void 0:r.status)===401&&this.refreshToken)return await this.refreshAccessToken(),e();throw r}}async requestWithoutAuth(e){return e()}get v1(){return{...this.client.v1,getNftSeriesById:(e,t,r,i={})=>this.requestWithAuth(()=>this.client.v1.getNftSeriesById(e,t,r,{...i,headers:this.getHeaders(i)})),getNftSeries:e=>this.requestWithAuth(()=>this.client.v1.nftSeries(e,{headers:this.getHeaders({})})),checkGet:()=>this.requestWithAuth(()=>this.client.v1.getCheckResult("badge",{headers:this.getHeaders({})})),checkPost:()=>this.requestWithAuth(()=>this.client.v1.check("badge",{headers:this.getHeaders({})})),getBadgeByType:e=>this.requestWithAuth(()=>this.client.v1.getNftSeriesById("badge",e,{},{headers:this.getHeaders({})})),getBadgeAssets:e=>this.requestWithAuth(()=>this.client.v1.badgeAssets(e,{headers:this.getHeaders({})})),getTeamLeaderboard:e=>this.requestWithAuth(()=>this.client.v1.getTeamLeaderboard(e,{headers:this.getV2Headers({})})),getTeamMemberRanking:(e,t)=>this.requestWithAuth(()=>this.client.v1.getTeamMemberRanking(e,t,{headers:this.getV2Headers({})})),getBadgeContributors:e=>this.requestWithAuth(()=>this.client.v1.getBadgeContributors(e,{headers:this.getV2Headers({})})),getTeamBadges:e=>this.requestWithAuth(()=>this.client.v1.getTeamBadges(e,{headers:this.getV2Headers({})})),getMyTeamProfile:()=>this.requestWithAuth(()=>this.client.v1.getMyTeamProfile({headers:this.getV2Headers({})})),getNotifications:e=>this.requestWithAuth(()=>this.client.v1.getNotifications(e,{headers:this.getV2Headers({})})),getTeamDetail:e=>this.requestWithAuth(()=>this.client.v1.getTeamDetail(e,{headers:this.getV2Headers({})})),markNotificationRead:e=>this.requestWithAuth(()=>this.client.v1.markNotificationRead(e,{headers:this.getV2Headers({})}))}}get v2(){return{...this.client.v2,getBadgeVerifiers:(e,t)=>this.requestWithAuth(()=>this.client.v2.getBadgeVerifiers({platform:e,type:t},{headers:this.getV2Headers({})})),getUserClaimableBadges:e=>this.requestWithAuth(()=>this.client.v2.getUserClaimableBadges(e,{headers:this.getV2Headers({})})),getUserBadgeAssets:e=>this.requestWithAuth(()=>this.client.v2.getUserBadgeAssets(e,{headers:this.getV2Headers({})})),getBadgeSeries:e=>this.requestWithAuth(()=>this.client.v2.getBadgeSeries(e,{headers:this.getV2Headers({})})),getBadgeDetail:e=>this.requestWithAuth(()=>this.client.v2.getBadgeDetail(e,{headers:this.getV2Headers({})}))}}get s1(){return{...this.client.s1}}}export{Hl as A,ma as E,Kl as S,Xl as T,zl as a,Ql as b,Jl as c,Zl as d};
