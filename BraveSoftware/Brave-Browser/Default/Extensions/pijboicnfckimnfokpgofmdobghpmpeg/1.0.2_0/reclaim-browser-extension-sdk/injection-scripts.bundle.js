(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function a(t,o,c,i){var a=o&&o.prototype instanceof s?o:s,l=Object.create(a.prototype);return r(l,"_invoke",function(t,r,o){var c,i,a,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return c=t,i=0,a=e,p.n=r,u}};function d(t,r){for(i=t,a=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,c=l[n],d=p.p,m=c[2];t>3?(o=m===r)&&(a=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=d&&((o=t<2&&d<c[1])?(i=0,p.v=r,p.n=c[1]):d<m&&(o=t<3||c[0]>r||r>m)&&(c[4]=t,c[5]=r,p.n=m,i=0))}if(o||t>1)return u;throw f=!0,r}return function(o,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,m),i=l,a=m;(n=i<2?e:a)||!f;){c||(i?i<3?(i>1&&(p.n=-1),d(i,a)):p.n=a:p.v=a);try{if(s=2,c){if(i||(o="next"),n=c[o]){if(!(n=n.call(c,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,i<2&&(i=0)}else 1===i&&(n=c.return)&&n.call(c),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=e}else if((n=(f=p.n<0)?a:t.call(r,p))!==u)break}catch(t){c=e,i=1,a=t}finally{s=1}}return{value:n,done:f}}}(t,c,i),!0),l}var u={};function s(){}function l(){}function f(){}n=Object.getPrototypeOf;var p=[][c]?n(n([][c]())):(r(n={},c,function(){return this}),n),d=f.prototype=s.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=f,r(d,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(d),r(d,i,"Generator"),r(d,c,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m}})()}function r(e,t,n,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}r=function(e,t,n,o){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?c?c(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,o)}function n(e,t,r,n,o,c,i){try{var a=e[c](i),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var i=e.apply(t,r);function a(e){n(i,o,c,a,u,"next",e)}function u(e){n(i,o,c,a,u,"throw",e)}a(void 0)})}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}window.Reclaim=window.Reclaim||{};var a={};try{var u=localStorage.getItem("reclaimBrowserExtensionParameters");u&&(a=JSON.parse(u)||{})}catch(e){}Object.defineProperty(window.Reclaim,"parameters",{get:function(){if(Object.keys(a).length>0)return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a);try{var e=localStorage.getItem("reclaimBrowserExtensionParameters");return e?JSON.parse(e):{}}catch(e){return{}}},set:function(){},enumerable:!0,configurable:!1}),window.Reclaim.updatePublicData=function(e){try{var t=JSON.stringify(null!=e?e:{});window.postMessage({action:"RECLAIM_SET_PUBLIC_DATA",data:{publicData:t}},"*")}catch(e){console.error("Reclaim.updatePublicData error:",e)}},window.Reclaim.canExpectManyClaims=function(e){try{window.postMessage({action:"RECLAIM_SET_EXPECT_MANY_CLAIMS",data:{expectMany:!!e}},"*")}catch(e){}},window.Reclaim.reportProviderError=function(e){try{window.postMessage({action:"RECLAIM_REPORT_PROVIDER_ERROR",data:{message:String(e||"Provider error")}},"*")}catch(e){console.error("Reclaim.reportProviderError error:",e)}},window.Reclaim.requestClaim=function(e){try{window.postMessage({action:"RECLAIM_REQUEST_CLAIM",data:{rdObject:e}},"*")}catch(e){console.error("Reclaim.requestClaim error:",e)}},window.Reclaim.getParametersSync=function(){try{var e=localStorage.getItem("reclaimBrowserExtensionParameters");return e?JSON.parse(e):{}}catch(e){return{}}},window.addEventListener("message",function(e){if(e.source===window){var t=e.data||{},r=t.action,n=t.data;if("RECLAIM_PARAMETERS_UPDATE"===r&&null!=n&&n.parameters){var o=n.parameters||{};if(0===Object.keys(o).length&&Object.keys(a).length>0)return;a=o;try{localStorage.setItem("reclaimBrowserExtensionParameters",JSON.stringify(a))}catch(e){}}}});try{window.postMessage({action:"RECLAIM_PARAMETERS_GET"},"*")}catch(e){}!function(){var e=function(e){return"".concat("https://api.reclaimprotocol.org","/api/providers/").concat(e,"/custom-injection")},r=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).error.apply(e,["❌ [Injection Script Error]:"].concat(r))},n=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).info.apply(e,["ℹ️ [Injection Script Info]:"].concat(r))};function c(){try{var e="reclaimBrowserExtensionProviderId",t=localStorage.getItem(e);return t?(n("Found provider ID in localStorage[".concat(e,"]: ").concat(t)),t):(r("Provider ID not found in local storage"),null)}catch(e){return r("Error accessing localStorage:",e),null}}function i(){return new Promise(function(e){var t=function(r){r.source===window&&"RECLAIM_PROVIDER_ID_RESPONSE"===r.data.action&&(window.removeEventListener("message",t),e(r.data.providerId))};window.addEventListener("message",t),window.postMessage({action:"RECLAIM_GET_PROVIDER_ID",source:"injection-script"},"*"),setTimeout(function(){window.removeEventListener("message",t),e(null)},5e3)})}function a(){return(a=o(t().m(function o(c){var i,a,u;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n("Fetching injection script for provider: ".concat(c)),t.n=1,fetch(e(c),{method:"GET",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"}});case 1:if((i=t.v).ok){t.n=2;break}throw new Error("HTTP error! status: ".concat(i.status));case 2:return t.n=3,i.text();case 3:if((a=t.v)&&""!==a.trim()){t.n=4;break}return n("No injection script content found for provider: ".concat(c)),t.a(2,null);case 4:return n("Successfully fetched injection script for provider: ".concat(c)),t.a(2,{script:a,providerData:{providerId:c,name:"Unknown Provider"}});case 5:return t.p=5,u=t.v,r("Failed to fetch injection script for provider ".concat(c,":"),u),t.a(2,null)}},o,null,[[0,5]])}))).apply(this,arguments)}function u(e,t){return s.apply(this,arguments)}function s(){return(s=o(t().m(function e(o,c){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l(o);case 1:if(!e.v){e.n=2;break}return e.a(2);case 2:return e.n=3,f(o);case 3:if(!e.v){e.n=4;break}return e.a(2);case 4:try{n("Injected via chrome.scripting")}catch(e){r("All injection strategies failed",e)}case 5:return e.a(2)}},e)}))).apply(this,arguments)}function l(e){return new Promise(function(t){try{var r,n=new Blob([e],{type:"text/javascript"}),o=URL.createObjectURL(n),c=document.createElement("script");c.src=o,c.async=!1;var i=document.querySelector("script[nonce]"),a=(null==i?void 0:i.nonce)||(null==i||null===(r=i.getAttribute)||void 0===r?void 0:r.call(i,"nonce"))||"";a&&c.setAttribute("nonce",a),c.onload=function(){URL.revokeObjectURL(o),t(!0)},c.onerror=function(){URL.revokeObjectURL(o),t(!1)},(document.head||document.documentElement).appendChild(c)}catch(e){t(!1)}})}function f(e){return new Promise(function(t){try{var r,n=document.querySelector("script[nonce]"),o=(null==n?void 0:n.nonce)||(null==n||null===(r=n.getAttribute)||void 0===r?void 0:r.call(n,"nonce"))||"";if(!o)return t(!1);var c=document.createElement("script");c.setAttribute("nonce",o),c.textContent=String(e),(document.head||document.documentElement).appendChild(c),setTimeout(function(){return t(!0)},0)}catch(e){t(!1)}})}function p(){return d.apply(this,arguments)}function d(){return(d=o(t().m(function e(){var o,a,s;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,o=c()){e.n=2;break}return n("Provider ID not found in localStorage, requesting from extension..."),e.n=1,i();case 1:o=e.v;case 2:if(o){e.n=3;break}return r("Cannot load injection script: Provider ID not found"),e.a(2);case 3:if(a=localStorage.getItem("reclaimBrowserExtensionInjectionScript:".concat(o))){e.n=4;break}return n("No injection script to execute"),e.a(2);case 4:u(a,{providerId:o,name:"Unknown Provider"}),e.n=6;break;case 5:e.p=5,s=e.v,r("Error in loadAndExecuteInjectionScript:",s);case 6:return e.a(2)}},e,null,[[0,5]])}))).apply(this,arguments)}window.reclaimInjectionLoader={loadAndExecuteInjectionScript:p,getProviderIdFromStorage:c,getProviderIdFromExtension:i,fetchProviderInjectionScript:function(e){return a.apply(this,arguments)},executeInjectionScriptNoEval:u},n("Reclaim Injection Script Loader initialized and injected successfully"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p()}()})();
//# sourceMappingURL=injection-scripts.bundle.js.map