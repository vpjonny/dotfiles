{"version":3,"file":"interceptor/network-interceptor.bundle.js","mappings":"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","sources":["webpack://@reclaimprotocol/browser-extension-sdk/./src/interceptor/network-interceptor.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-this-alias */\n\n(function () {\n  const injectionFunction = function () {\n    /**\n     * Debug utility for consistent logging across the interceptor\n     * @type {Object}\n     */\n    const debug = {\n      log: (...args) => console.log(\"ðŸ” [Debug]:\", ...args),\n      error: (...args) => console.error(\"âŒ [Error]:\", ...args),\n      info: (...args) => console.info(\"â„¹ï¸ [Info]:\", ...args),\n      // log: (...args) => undefined, // Disabled console.log(\"ðŸ” [Debug]:\", ...args),\n      // error: (...args) => undefined, // Disabled console.error(\"âŒ [Error]:\", ...args),\n      // info: (...args) => undefined, // Disabled console.info(\"â„¹ï¸ [Info]:\", ...args),\n    };\n\n    /**\n     * RequestInterceptor class\n     * Provides middleware-based interception for both Fetch and XMLHttpRequest\n     * Allows monitoring and modification of HTTP requests and responses\n     */\n    class RequestInterceptor {\n      /**\n       * Initialize the interceptor with empty middleware arrays and store original methods\n       */\n      constructor() {\n        this.requestMiddlewares = [];\n        this.responseMiddlewares = [];\n\n        // Store original methods before overriding\n        this.originalFetch = window.fetch?.bind(window);\n        this.originalXHR = window.XMLHttpRequest;\n\n        // Verify browser environment and required APIs\n        if (typeof window === \"undefined\" || !this.originalFetch || !this.originalXHR) {\n          debug.error(\"Not in a browser environment or required APIs not available\");\n          return;\n        }\n\n        this.setupInterceptor();\n        debug.info(\"RequestInterceptor initialized\");\n      }\n\n      /**\n       * Process all request middlewares in parallel\n       * @param {Object} requestData - Contains url and options for the request\n       * @returns {Promise} - Resolves when all middlewares complete\n       */\n      async processRequestMiddlewares(requestData) {\n        try {\n          // Run all request middlewares in parallel\n          await Promise.all(this.requestMiddlewares.map((middleware) => middleware(requestData)));\n        } catch (error) {\n          debug.error(\"Error in request middleware:\", error);\n        }\n      }\n\n      /**\n       * Process response middlewares without blocking the main thread\n       * @param {Response} response - The response object\n       * @param {Object} requestData - The original request data\n       */\n      async processResponseMiddlewares(response, requestData) {\n        const parsedResponse = await this.parseResponse(response);\n\n        for (const middleware of this.responseMiddlewares) {\n          try {\n            await middleware(parsedResponse, requestData);\n          } catch (error) {\n            debug.error(\"Error in response middleware:\", error);\n          }\n        }\n      }\n\n      /**\n       * Parse response data into a consistent string format\n       * @param {Response} response - The response object to parse\n       * @returns {Object} - Parsed response with standardized format\n       */\n      async parseResponse2(response) {\n        let responseBody;\n        let contentType = response.headers.get(\"content-type\") || \"\";\n\n        if (response?.url?.includes(\"operationName=getProfileOracle\")) {\n          const copy = response.clone(); // tee the stream\n          const contentType = copy.headers.get(\"content-type\") || \"\";\n\n          console.log(\"contentType\", contentType);\n          console.log(\"copyresponse\", copy);\n\n          try {\n            const data = await copy.json(); // read the clone, not the original\n            console.log(\"responseBody\", data);\n          } catch (e) {\n            console.log(\"json read error\", e);\n          }\n        }\n\n        try {\n          // Check if the response body is already consumed\n          if (response.bodyUsed) {\n            responseBody = \"[Response body already consumed]\";\n          } else {\n            // Try to parse based on content type using the provided response directly\n            if (contentType.includes(\"text/\") || contentType.includes(\"application/json\")) {\n              try {\n                responseBody = await response.text();\n              } catch (textError) {\n                // If response body parsing fails, the body is consumed, we can't read it again\n                responseBody = \"[Invalid response format]\";\n              }\n            } else {\n              // For binary data, get as text but mark it as binary\n              const text = await response.text();\n              responseBody = text === \"\" ? \"[Binary Data]\" : text;\n            }\n          }\n        } catch (error) {\n          debug.error(\"Error parsing response:\", error);\n          responseBody = `[Error reading response: ${error.message}]`;\n        }\n\n        return {\n          id: response.id || null,\n          url: response.url,\n          status: response.status,\n          statusText: response.statusText,\n          headers: Object.fromEntries(response.headers.entries()),\n          body: responseBody,\n          originalResponse: response,\n          timestamp: Date.now(),\n        };\n      }\n\n      async parseResponse(response) {\n        let responseBody;\n        const url = response.url || \"\";\n        const headersObj = Object.fromEntries(response.headers.entries());\n\n        try {\n          // Read ONCE from the audit copy we got.\n          const raw = await response.text(); // don't do copy.json(); avoid double read\n          responseBody = raw;\n        } catch (e) {\n          // Rescue path (below)\n          responseBody = `[Error reading response: ${e?.name || e}]`;\n        }\n\n        return {\n          id: response.id || null,\n          url,\n          status: response.status,\n          statusText: response.statusText,\n          headers: headersObj,\n          body: responseBody,\n          originalResponse: response,\n          timestamp: Date.now(),\n        };\n      }\n\n      /**\n       * Set up interception for both Fetch and XMLHttpRequest\n       * This method overrides the global fetch and XMLHttpRequest objects\n       */\n      setupInterceptor() {\n        // Setup Fetch interceptor using a Proxy\n        const originalFetch = this.originalFetch;\n        const self = this;\n\n        // Create a proxy for the fetch function\n        window.fetch = new Proxy(originalFetch, {\n          apply: async function (target, thisArg, argumentsList) {\n            const [url, options = {}] = argumentsList;\n\n            if (!url) {\n              return Reflect.apply(target, thisArg, argumentsList);\n            }\n\n            const requestData = {\n              url,\n              options: {\n                ...options,\n                method: options.method || \"GET\",\n                headers: options.headers || {},\n              },\n            };\n\n            // Add a marker property to the request\n            Object.defineProperty(requestData, \"_rc\", {\n              value: true,\n              enumerable: false,\n              configurable: false,\n              writable: false,\n            });\n\n            try {\n              // Process request middlewares\n              await Promise.all(\n                self.requestMiddlewares.map((middleware) => middleware(requestData)),\n              );\n            } catch (error) {\n              debug.error(\"Error in request middleware:\", error);\n            }\n\n            // Make the actual fetch call with potentially modified data\n            const response = await Reflect.apply(target, thisArg, [\n              requestData.url,\n              requestData.options,\n            ]);\n\n            const { status, statusText } = response;\n            const headers = new Headers(response.headers);\n\n            // If there's no body (204, etc.), just pass-through\n            if (!response.body) {\n              self.processResponseMiddlewares(response.clone(), requestData).catch(debug.error);\n              return response;\n            }\n\n            const [forAppStream, forAuditStream] = response.body.tee();\n            const forApp = new Response(forAppStream, { status, statusText, headers });\n            const forAudit = new Response(forAuditStream, { status, statusText, headers });\n\n            // Start parsing ASAP; don't clone forAudit again\n            self.processResponseMiddlewares(forAudit, requestData).catch(debug.error);\n\n            // Return the app's branch\n            return forApp;\n\n            // FIX: Don't create a prototype-chained response, use the original\n            // Just mark it non-destructively\n            // if (!response._rc) {\n            //   // Only mark it if not already marked\n            //   try {\n            //     Object.defineProperty(response, \"_rc\", {\n            //       value: true,\n            //       enumerable: false,\n            //       configurable: false,\n            //       writable: false,\n            //     });\n            //   } catch (e) {\n            //     // In case the response is immutable, don't break the app\n            //     debug.error(\"Could not mark response:\", e);\n            //   }\n            // }\n\n            // // Process response middlewares without blocking\n            // self.processResponseMiddlewares(response.clone(), requestData).catch((error) => {\n            //   debug.error(\"Error in response middleware:\", error);\n            // });\n            // return response; // Return the original response object\n          },\n        });\n\n        // Setup XHR interceptor by modifying the prototype\n        const originalOpen = XMLHttpRequest.prototype.open;\n        const originalSend = XMLHttpRequest.prototype.send;\n        const originalSetRequestHeader = XMLHttpRequest.prototype.setRequestHeader;\n\n        // Create a WeakMap to store request info for each XHR instance\n        const requestInfoMap = new WeakMap();\n\n        // Modify open method on prototype\n        XMLHttpRequest.prototype.open = function (...args) {\n          // Mark this instance as intercepted\n          Object.defineProperty(this, \"_rc\", {\n            value: true,\n            enumerable: false,\n            configurable: false,\n            writable: false,\n          });\n\n          const [method = \"GET\", url = \"\"] = args;\n          const requestInfo = {\n            url,\n            options: {\n              method,\n              headers: {},\n              body: null,\n            },\n          };\n\n          // Store request info in WeakMap\n          requestInfoMap.set(this, requestInfo);\n\n          // Call original method\n          return originalOpen.apply(this, args);\n        };\n\n        // Modify setRequestHeader method on prototype\n        XMLHttpRequest.prototype.setRequestHeader = function (header, value) {\n          const requestInfo = requestInfoMap.get(this);\n          if (requestInfo && header && value) {\n            requestInfo.options.headers[header] = value;\n          }\n          return originalSetRequestHeader.apply(this, arguments);\n        };\n\n        // Modify send method on prototype\n        XMLHttpRequest.prototype.send = function (data) {\n          const requestInfo = requestInfoMap.get(this);\n          if (requestInfo) {\n            requestInfo.options.body = data;\n\n            // Process request middlewares\n            const runRequestMiddlewares = async () => {\n              try {\n                await Promise.all(\n                  self.requestMiddlewares.map((middleware) => middleware(requestInfo)),\n                );\n              } catch (error) {\n                debug.error(\"Error in request middleware:\", error);\n              }\n            };\n\n            // Store original onreadystatechange\n            const originalHandler = this.onreadystatechange;\n\n            // Override onreadystatechange\n            this.onreadystatechange = function (event) {\n              if (typeof originalHandler === \"function\") {\n                originalHandler.apply(this, arguments);\n              }\n\n              if (this.readyState === 4) {\n                const status = this.status || 500;\n                const statusText = this.statusText || \"Request Failed\";\n\n                try {\n                  /**\n                   * Helper function to convert any response type to string\n                   * @param {*} response - The XHR response which could be:\n                   * - string (for responseType '' or 'text')\n                   * - object (for responseType 'json')\n                   * - Blob (for responseType 'blob')\n                   * - ArrayBuffer (for responseType 'arraybuffer')\n                   * - Document (for responseType 'document')\n                   * @returns {string} The response as a string\n                   */\n                  const getResponseString = (response) => {\n                    if (response === null || response === undefined) {\n                      return \"\";\n                    }\n\n                    // Handle different response types\n                    switch (typeof response) {\n                      case \"string\":\n                        return response;\n                      case \"object\":\n                        // Handle special response types\n                        if (response instanceof Blob || response instanceof ArrayBuffer) {\n                          return \"[Binary Data]\";\n                        }\n                        if (response instanceof Document) {\n                          return response.documentElement.outerHTML;\n                        }\n                        // For plain objects or arrays\n                        try {\n                          return JSON.stringify(response);\n                        } catch (e) {\n                          debug.error(\"Failed to stringify object response:\", e);\n                          return String(response);\n                        }\n                      default:\n                        return String(response);\n                    }\n                  };\n\n                  const responseObj = new Response(getResponseString(this.response), {\n                    status: status,\n                    statusText: statusText,\n                    headers: new Headers(\n                      Object.fromEntries(\n                        (this.getAllResponseHeaders() || \"\")\n                          .split(\"\\r\\n\")\n                          .filter(Boolean)\n                          .map((line) => line.split(\": \")),\n                      ),\n                    ),\n                  });\n\n                  Object.defineProperty(responseObj, \"url\", {\n                    value: requestInfo.url,\n                    writable: false,\n                  });\n\n                  // Process response middlewares\n                  // console.log(\"responseObj\", responseObj, requestInfo);\n                  self\n                    .processResponseMiddlewares(responseObj, requestInfo)\n                    .catch((error) => debug.error(\"Error in response middleware:\", error));\n                } catch (error) {\n                  console.log(\"error\", error);\n                  debug.error(\"Error processing XHR response:\", error);\n                }\n              }\n            };\n\n            // Run middlewares then send\n            runRequestMiddlewares().then(() => {\n              originalSend.call(this, requestInfo.options.body);\n            });\n          } else {\n            // Handle case where open wasn't called first\n            originalSend.apply(this, arguments);\n          }\n        };\n\n        // Reset functionality to restore original methods if needed\n        this.resetXHRInterceptor = function () {\n          XMLHttpRequest.prototype.open = originalOpen;\n          XMLHttpRequest.prototype.send = originalSend;\n          XMLHttpRequest.prototype.setRequestHeader = originalSetRequestHeader;\n        };\n      }\n\n      /**\n       * Add a middleware function to process requests before they are sent\n       * @param {Function} middleware - Function to process request data\n       */\n      addRequestMiddleware(middleware) {\n        if (typeof middleware === \"function\") {\n          this.requestMiddlewares.push(middleware);\n        }\n      }\n\n      /**\n       * Add a middleware function to process responses after they are received\n       * @param {Function} middleware - Function to process response data\n       */\n      addResponseMiddleware(middleware) {\n        if (typeof middleware === \"function\") {\n          this.responseMiddlewares.push(middleware);\n        }\n      }\n    }\n\n    // Create instance of the interceptor\n    const interceptor = new RequestInterceptor();\n\n    interceptor.addResponseMiddleware(async (response, request) => {\n      try {\n        // Helper function to safely extract headers\n        const extractHeaders = (headers) => {\n          let headersObj = {};\n          try {\n            if (headers) {\n              if (headers instanceof Headers) {\n                headersObj = Object.fromEntries(headers.entries());\n              } else if (typeof headers === \"object\") {\n                Object.keys(headers).forEach((key) => {\n                  const val = headers[key];\n                  if (typeof val === \"string\" || typeof val === \"number\") {\n                    headersObj[key] = String(val);\n                  }\n                });\n              }\n            }\n          } catch (e) {\n            debug.error(\"Error extracting headers:\", e);\n          }\n          return headersObj;\n        };\n\n        // Helper function to safely extract body\n        const extractBody = (body) => {\n          let bodyStr = null;\n          try {\n            if (body) {\n              if (typeof body === \"string\") {\n                bodyStr = body;\n              } else if (typeof body === \"object\") {\n                bodyStr = JSON.stringify(body);\n              }\n            }\n          } catch (e) {\n            debug.error(\"Error extracting body:\", e);\n          }\n          return bodyStr;\n        };\n\n        // Helper function to safely extract URL\n        const extractUrl = (url) => {\n          let urlStr = \"\";\n          try {\n            if (typeof url === \"string\") {\n              urlStr = url.startsWith(\"http\") ? url : new URL(url, window.location.origin).href;\n            } else if (url && typeof url === \"object\" && url.url) {\n              urlStr = url.url;\n            } else if (url && typeof url === \"object\" && url.href) {\n              urlStr = url.href;\n            } else {\n              urlStr = String(url);\n              if (!urlStr.startsWith(\"http\")) {\n                urlStr = new URL(urlStr, window.location.origin).href;\n              }\n            }\n          } catch (e) {\n            debug.error(\"Error extracting URL:\", e);\n            urlStr = window.location.href;\n          }\n          return urlStr;\n        };\n\n        // Extract URL once for both request and response\n        const url = extractUrl(request.url);\n\n        // Create combined request/response object\n        const combinedData = {\n          request: {\n            url: url,\n            method: typeof request.options.method === \"string\" ? request.options.method : \"GET\",\n            headers: extractHeaders(request.options.headers),\n            body: extractBody(request.options.body),\n          },\n          response: {\n            url: url,\n            status: response.status,\n            headers: extractHeaders(response.headers),\n            body: extractBody(response.body),\n          },\n          timestamp: Date.now(),\n        };\n\n        // Send the combined data\n        window.postMessage(\n          {\n            action: \"INTERCEPTED_REQUEST_AND_RESPONSE\",\n            data: combinedData,\n          },\n          \"*\",\n        );\n      } catch (error) {\n        debug.error(\"Error processing request/response:\", error);\n\n        // Fallback with minimal data\n        window.postMessage(\n          {\n            action: \"INTERCEPTED_REQUEST_AND_RESPONSE\",\n            data: {\n              url: window.location.href,\n              request: {\n                method: \"GET\",\n                headers: {},\n                body: null,\n              },\n              response: {\n                status: response.status || 0,\n                headers: {},\n                body: null,\n              },\n              timestamp: Date.now(),\n              error: error.message,\n            },\n          },\n          \"*\",\n        );\n      }\n    });\n\n    /**\n     * Expose the interceptor instance globally\n     * This allows adding more middlewares from other scripts or the console\n     *\n     * Usage examples:\n     *\n     * // Add a request middleware\n     * window.reclaimInterceptor.addRequestMiddleware(async (request) => {\n     *   console.log('New request:', request.url);\n     * });\n     *\n     * // Add a response middleware\n     * window.reclaimInterceptor.addResponseMiddleware(async (response, request) => {\n     *   console.log('New response:', response.body);\n     * });\n     */\n    window.reclaimInterceptor = interceptor;\n\n    debug.info(\"Userscript initialized and ready - Access via window.reclaimInterceptor\");\n  };\n\n  injectionFunction();\n})();\n"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_defineProperties","_toPropertyKey","key","_typeof","toPrimitive","String","Number","_toPrimitive","debug","interceptor","_console2","_len2","args","Array","_key2","console","error","concat","_console3","_len3","_key3","info","RequestInterceptor","_window$fetch","_classCallCheck","this","requestMiddlewares","responseMiddlewares","originalFetch","window","fetch","originalXHR","XMLHttpRequest","setupInterceptor","_processRequestMiddlewares","_callee","requestData","_t","_context","all","map","middleware","_x","_processResponseMiddlewares","_callee2","response","parsedResponse","_iterator","_step","_t2","_t3","_context2","parseResponse","_createForOfIteratorHelper","s","_x2","_x3","_parseResponse","_callee3","_response$url","responseBody","contentType","copy","_contentType","data","text","_t4","_t6","_context3","headers","get","url","includes","clone","log","json","bodyUsed","message","id","status","statusText","fromEntries","entries","body","originalResponse","timestamp","Date","now","_x4","_parseResponse2","_callee4","headersObj","raw","_t7","_context4","name","_x5","_apply","self","Proxy","_callee5","target","thisArg","argumentsList","_argumentsList","_argumentsList$","options","_response$body$tee","_response$body$tee2","forAppStream","forAuditStream","forApp","forAudit","_t8","_context5","_slicedToArray","Reflect","_objectSpread","method","Headers","processResponseMiddlewares","tee","Response","_x6","_x7","_x8","originalOpen","open","originalSend","send","originalSetRequestHeader","setRequestHeader","requestInfoMap","WeakMap","_len4","_key4","_args$","_args$2","requestInfo","set","header","_this","runRequestMiddlewares","_ref","_callee6","_t9","_context6","originalHandler","onreadystatechange","event","readyState","responseObj","Blob","ArrayBuffer","Document","documentElement","outerHTML","JSON","stringify","getResponseString","getAllResponseHeaders","split","filter","Boolean","line","resetXHRInterceptor","push","addResponseMiddleware","_ref2","_callee7","request","extractHeaders","extractBody","extractUrl","combinedData","_context7","keys","forEach","val","bodyStr","urlStr","startsWith","URL","location","origin","href","postMessage","action","_x9","_x0","reclaimInterceptor"],"sourceRoot":""}