import{b as Dt,c as Ot,d as wt,f as yt,g as Nt}from"./chunk-OWPVBYY3.js";import{h as q}from"./chunk-GTBNRR37.js";import{a as Pt}from"./chunk-HSSW2VTC.js";import{a as Q,c as S}from"./chunk-RZETZIQO.js";import{Ea as At,n as v}from"./chunk-P5GHREX3.js";import{a as C,j as St,l as xt,r as gt,s as y,z as Ct}from"./chunk-AP4E6GDF.js";import{Ac as Lt,F as ft,K as dt,Ke as kt,M as lt,N as ht,Sc as Et,Ta as _t,Tc as T,b as ut,g as mt,j as ct,mb as w,nb as J,pb as tt,q as pt,qb as et,rb as ot,sb as Tt,se as It,tb as Rt}from"./chunk-RPH2MNBW.js";import{a as at}from"./chunk-DOSBJ3L3.js";import{R as V}from"./chunk-URGJ6D4O.js";import{b as H}from"./chunk-FLSAETOH.js";import{Aa as O,H as j,M as I,a as g,ja as D,l as i}from"./chunk-4C5HF6J2.js";import{f as k,h as l,o as n,q as s}from"./chunk-UWURTNRY.js";n();s();var X=k(H());n();s();var bt=k(H());n();s();var Mt=k(H());function Ut(){let e=(0,Mt.useRef)(!0);return e.current?(e.current=!1,!0):e.current}var Ft=(e,t)=>{let o=Ut();(0,bt.useEffect)(()=>o?()=>{}:e(),t)};function Xt(){let{accountStore:e,fromToStore:t}=S(),{computedAccountId:o,address:r,setFromChainId:a,computedMultiAddresses:m}=e,{from:c,to:u,setBalanceState:p,getSwapTokenBalance:d,computedIsToAddressEqualsCurrentToAddress:L}=t,{amount:E,chainId:_}=c;(0,X.useEffect)(()=>{Ct(_)&&a(_)},[_,a]),(0,X.useEffect)(()=>{d()},[o,d]),(0,X.useEffect)(()=>{p({amount:E,address:r,from:c,to:u})},[E,r,c,u,p,L]),Ft(()=>{d()},[m?.targetWalletAddress])}var pe=Xt;n();s();n();s();n();s();O();n();s();var N=(e,t)=>({networkFeeAmount:e,networkFeeTokenSymbol:t,formattedNetworkFeeAmount:e?`${xt(e)} ${t}`:"--"}),P=e=>{let{commonStore:t}=Q(),{computedNowCurrencySymbol:o,currencyConversion:r}=t;return{networkFeeUsd:e,formattedNetworkFeeUsd:e?St(r(e).toString(),o):"--"}},rt=e=>{let{estimateGasFeeAmount:t,fromNativeTokenSymbol:o,estimateGasFeeAmountUsd:r,bridge:a,fromToken:m,toToken:c,crossChainFee:u,bridgeFeeUsd:p,toSwapFee:d,toNativeTokenSymbol:L,toSwapFeeUsd:E}=e||{},{estimateBridgeFeeAmountUsd:_,estimateBridgeFeeAmount:W,bridgeName:G,bridgeLogoUrl:qt,estimateClaimFeeAmount:st,estimateClaimFeeAmountUsd:Qt}=a||{},z=N(u,a?.crossToToken?.tokenSymbol),it=P(p);return{from:{chainName:m?.chainName,chainLogo:m?.chainLogoUrl,...N(t,o),...P(r)},bridge:{bridgeName:G,bridgeLogo:qt,...N(W,o),...P(_),bridgeFeeAmount:z.networkFeeAmount,bridgeFeeTokenSymbol:z.networkFeeTokenSymbol,formattedBridgeFeeAmount:z.formattedNetworkFeeAmount,bridgeFeeUsd:it.networkFeeUsd,formattedBridgeFeeUsd:it.formattedNetworkFeeUsd},to:{chainName:c?.chainName,chainLogo:c?.chainLogoUrl,...N(d,L),...P(E)},claim:C.gt(st,0)?{chainName:kt("swaptrade_bridge_reminder_token_claim_fee"),chainLogo:c?.chainLogoUrl,...N(st,L),...P(Qt)}:null}},Yt=()=>{let{quoteStore:e}=S(),{quote:t}=e;return rt(t?.bestRoute)},Se=Yt;n();s();O();n();s();O();n();s();O();n();s();var M=class{constructor(t,o){l(this,"percent","");l(this,"exactPercent","");l(this,"dexRouterPercent","");Object.assign(this,o),this.dexRouterPercent=t}get computedPercent(){return this.percent?y(this.percent,{needZero:!1}):""}get computedExactPercent(){let t=C.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100);return t.isNaN()?"":y(t.toNumber(),{needZero:!1})}};var U=class{constructor(t,o,r){l(this,"fromToken",{});l(this,"toToken",{});l(this,"dexQuoteInfoList",[]);let{fromToken:a={},toToken:m={},dexQuoteInfoList:c}=o||{};this.fromToken=a,this.toToken=m,this.dialogHeaderText=r?q(this.toToken?.tokenSymbol):`${q(this.fromToken?.tokenSymbol)}/${q(this.toToken?.tokenSymbol)}`,g(c)&&(this.dexQuoteInfoList=c.map(u=>new M(t,u)))}};var b=class{constructor(t,o){l(this,"percent","");l(this,"router","");l(this,"subRouterList",[]);l(this,"flag","");let{percent:r="",router:a="",flag:m="",subRouterList:c}=t||{};this.percent=r,this.router=a,this.flag=m,g(c)&&(this.subRouterList=c.map(u=>new U(r,u,o)))}get computedPercent(){return this.percent?y(this.percent,{needZero:!1}):""}};var x=class{constructor(t,o=!1){l(this,"data",[]);g(t)&&(this.data=t.map(r=>new b(r,o)))}};n();s();var h={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},R={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},F={IN_CHAIN:"0",CROSS_CHAIN:"1"},A={NORMAL_PERCENT:0,EXACT_PERCENT:1};var B=class{constructor(){this.fromToData={};this.setFromToData=t=>{this.fromToData=t};this.reloadQuote=null;this.setReloadQuote=t=>{this.reloadQuote=t};this.updateSmartRouterData=({isFetchQuoting:t,bestRoute:o,quoteError:r,quoteNull:a,shouldPauseQuote:m})=>{let c=o?ct(o):{},u=c.commonDexInfo||{},p=m?{}:{...u,...c};this.setStatusByQuote({isFetchQuoting:t,quoteError:r,bestRoute:p,quoteNull:a,shouldPauseQuote:m}),this.updateData(p||{}),this.updateAllGasFee(p||{})};this.showEntryForPc=!1;this.setShowEntryForPc=t=>{this.showEntryForPc=t};this.isShowShowAll=!0;this.updateIsShowShowAll=(t=!1)=>{this.isShowShowAll=t};this.status=h.LOADING;this.setStatus=t=>{let r=j(h).some(a=>a===t);this.status=r?t:h.DEFAULT};this.setStatusByQuote=({isFetchQuoting:t,quoteError:o,bestRoute:r,quoteNull:a,shouldPauseQuote:m})=>{if(m){this.setStatus(h.NO_DATA);return}let{fromToStore:c}=Q();if(!o&&!r&&!a&&C.BigNumber(c?.computedTypedValue).gt(0)){this.setStatus(h.LOADING);return}if(t&&this.status!==h.SHOW_DATA&&this.status!==h.NO_DATA){this.setStatus(h.LOADING);return}if(o){this.setStatus(h.DISCONNECTION);return}if(a&&I(r?.dexRouterList)&&I(r?.fromDexRouterList)&&I(r?.bridge)&&I(r?.toDexRouterToList)){this.setStatus(h.NO_DATA);return}if(!I(r?.dexRouterList)||!I(r?.fromDexRouterList)||!I(r?.bridge)||!I(r?.toDexRouterToList)){this.setStatus(h.SHOW_DATA);return}this.setStatus(h.DEFAULT)};this.percentType=A.NORMAL_PERCENT;this.switchPercentType=()=>{this.percentType=this.percentType===A.NORMAL_PERCENT?A.EXACT_PERCENT:A.NORMAL_PERCENT};this.swapType=F.IN_CHAIN;this.setSwapType=t=>{this.swapType=t};this.tokenInfo={dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}};this.updateTokenInfo=t=>{D(this.tokenInfo,"dexRouter",{token0:this.fromToData.from||{},token1:this.fromToData.to||{}}),D(this.tokenInfo,"fromDexRouter",{token0:{...i(t,"fromToken",{}),amountIn:i(t,"fromTokenAmount","")},token1:{...i(t,"fromSwapToTokenInfo",{}),amountOut:i(t,"bridge.bridgeAmountIn","")}}),D(this.tokenInfo,"bridge",{token0:this.isCrossBridgeOnly?{...i(t,"fromToken",{}),amountIn:i(t,"bridge.bridgeAmountIn","")}:{...i(t,"bridge.crossFromToken",{}),amountIn:i(t,"bridge.bridgeAmountIn","")},token1:this.isCrossBridgeOnly?{...i(t,"toToken",{}),amountOut:i(t,"bridge.bridgeAmountOut","")}:{...i(t,"bridge.crossToToken",{}),amountOut:i(t,"bridge.bridgeAmountOut","")}}),D(this.tokenInfo,"toDexRouter",{token0:{...i(t,"toSwapFromTokenInfo",{}),amountIn:i(t,"bridge.bridgeAmountOut","")},token1:{...i(t,"toToken",{}),amountOut:i(t,"receiveAmount","")}})};this.dexRouterList=[];this.checkDagRouter=t=>!t||!t.length?!1:t?.filter?.(o=>!o.subRouterList).length;this.setDexRouterList=t=>{let o=this.checkDagRouter(t);this.dexRouterList=o?t:new x(t).data};this.fromDexRouterList=[];this.setFromDexRouterList=t=>{this.fromDexRouterList=new x(t).data};this.toDexRouterToList=[];this.setToDexRouterToList=t=>{this.toDexRouterToList=new x(t).data};this.bridgeRouterList=[];this.setBridgeRouterList=(t,o)=>{let r=(a={},m)=>({...a,tokenSymbol:m,fromBridge:!0});this.bridgeRouterList=new x([{percent:i(o,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:i(o,"bridgeName"),percent:"100",okLinkUrl:i(o,"fromPoolAddress")}],fromToken:{},toToken:r(i(o,"crossFromToken"),i(o,"fromPoolName"))},{dexQuoteInfoList:[{dexName:i(o,"bridgeName"),percent:"100",okLinkUrl:i(o,"toPoolAddress")}],fromToken:{},toToken:r(i(o,"crossToToken"),i(o,"toPoolName"))}]}],!0).data};this.checkIsManyQuote=t=>{if(t.length>1)return!1;let o=t.length>0?i(t,[0,"subRouterList"],[]):[];return o.length>1?!1:i(o,[0,"dexQuoteInfoList","length"])>5};this.checkIsFewRouter=t=>t.length===1&&i(t,[0,"subRouterList","length"])<3;this.getInfoByMenuType=t=>{if(this.swapType===F.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(t){case R.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case R.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case R.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}};this.currentMenu=R.DISMISS;this.setCurrentMenu=t=>{let r=j(R).some(a=>a===t);this.currentMenu=r?t:R.DISMISS};this.menuList=[];this.showMenuList=!0;this.isCrossBridgeOnly=!1;this.setMenuListAndCurrentMenu=(t,o,r)=>{if(!Array.isArray(t)||I(t))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(R.DISMISS);else{this.menuList=t.map(m=>({...m,bridge:{...r}}));let a=i(t,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===R.DISMISS||!t.some(m=>i(m,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(a),this.isCrossBridgeOnly=t.length===1&&a===R.BRIDGE&&o===F.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}};this.updateData=t=>{let{swapType:o,smartRoutingMenuVoList:r,dexRouterList:a,fromDexRouterList:m,bridge:c,toDexRouterToList:u}=t;this.setSwapType(o),this.setMenuListAndCurrentMenu(r,o,c),this.setDexRouterList(a),this.setFromDexRouterList(m),this.setBridgeRouterList(t,c),this.setToDexRouterToList(u),this.updateTokenInfo(t)};this.showXRouteModal=Et.SWAP;this.setXRouteModal=t=>{this.showXRouteModal=t};this.subRouterData=null;this.setSubRouterData=t=>{this.subRouterData=t};this.subRouterModal=!1;this.setSubRouterModal=t=>{this.subRouterModal=t};this.dexQuoteInfoListData=[];this.setDexQuoteInfoListData=t=>{this.dexQuoteInfoListData=t};this.oldRouterModal=!1;this.setOldRouterModal=t=>{this.oldRouterModal=t};this.allGasFee={};this.updateAllGasFee=t=>{this.allGasFee=rt(t)}}get computedIsFewRouter(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsFewRouter(t)}get computedIsManyQuoteInfo(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsManyQuote(t)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}};var nt=class extends B{constructor({quoteStore:o,fromToStore:r,swapDappStore:a}){super();this.fromToStore=r||{},this.quoteStore=o||{},this.swapDappStore=a||{},Pt(this,{},{autoBind:!0}),mt(()=>({isFetchQuoting:this.quoteStore.quote?.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:this.quoteStore.quote?.quoteError,quoteNull:this.quoteStore.quote?.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to,shouldPauseQuote:this.swapDappStore.computedSupportDappTradeByChain}),({isFetchQuoting:m,bestRoute:c,quoteError:u,quoteNull:p,shouldPauseQuote:d})=>{this.setReloadQuote(this.quoteStore.fetchQuote),this.setFromToData({from:this.fromToStore.from,to:this.fromToStore.to}),this.updateSmartRouterData({isFetchQuoting:m,bestRoute:c,quoteError:u,quoteNull:p,shouldPauseQuote:d})},{equals:ut.shallow})}};n();s();n();s();var $=k(at());function $t(){let e=(0,$.useLocation)(),t=(0,$.useHistory)(),o=u=>{t.replace(u)},r=u=>{t.push(u)},a=u=>{let d=`${u.pathname||e.pathname}${u.search||""}${u.hash||""}`;lt(d,"_self")};return{replace:(u,p)=>{([w.WALLET_DASHBOARD,w.MARKET].includes(u)?a:o)(p)},pushFn:(u,p)=>{([w.WALLET_DASHBOARD,w.MARKET].includes(u)?a:r)(p)}}}var Bt=$t;n();s();var Z=k(H()),Wt=k(at());var Zt=()=>{let{hash:e,search:t}=(0,Wt.useLocation)(),o=e&&e.indexOf("#")>-1?e.slice(1):e;return(0,Z.useMemo)(()=>new URLSearchParams(t||o),[t,o])},Kt=()=>{let e=new ht().stringify(),t=new dt().stringify();return(0,Z.useMemo)(()=>new URLSearchParams(e||t),[e,t])};function zt(){let e=Zt(),t=Kt();return(0,Z.useMemo)(()=>J()?e:t,[e,t])}var Gt=zt;function jt(){let{commonStore:e}=S(),{portal:t,computedCurrentTabIsLimit:o}=e,r=Gt(),a=Bt(),m=({pathname:u,params:p}={})=>{let d=Nt(t,u),L=v()?wt(p):Dt(p),E=Ot(L),_={};d&&(_.pathname=d),E&&(_.search=`?${E}`),a.replace(t,_)};return{params:yt(r,o),replace:m}}var Ht=jt;n();s();var Ho=()=>{let{fromToStore:e,accountStore:t,commonStore:o}=S(),{updateFrom:r,updateTo:a,setField:m,advanceSetTypedValue:c}=e,{setCurrentTab:u}=o;return(p,d,L,E)=>{let _=t.isConnectedWallet,W=[];if(u(E,!0),p&&(r({...p,amount:""}),W.push(p.chainId),L)){let G=L===_t?"":gt(L,p.decimals);m(Lt.FROM),c(G,!1,E),r({amount:G})}d&&(a(d),W.push(d.chainId)),_&&e.getSwapTokenBalance()}},vo=()=>(e,t)=>{let o={from:{chainId:e?.chainId,tokenContractAddress:e?.tokenContractAddress,chainLogoUrl:e?.chainLogoUrl,tokenLogoUrl:e?.tokenLogoUrl,chainName:e?.chainName,tokenSymbol:e?.tokenSymbol},to:{chainId:t?.chainId,tokenContractAddress:t?.tokenContractAddress,chainLogoUrl:t?.chainLogoUrl,tokenLogoUrl:t?.tokenLogoUrl,chainName:t?.chainName,tokenSymbol:t?.tokenSymbol}};return o.from.tokenContractAddress&&o.to.tokenContractAddress?o:null},Vt=e=>{let t=v();return e===T.SWAP?t?Tt:tt:e===T.BRIDGE?t?Rt:et:e===T.LIMIT_ORDER?ot:""},qo=()=>{let{replace:e}=Ht();return o=>{let r=Vt(o);if(r){e({pathname:r});return}pt.error("useReplaceLocationByTab: unknown tab type")}};n();s();O();var Jt=e=>Number(e)===1,zo=async()=>{let[,e]=await ft(At.get(It,{}));return{loaded:!0,state:i(e,"data.state"),isLimitRegion:Jt(i(e,"data.isLimitRegion")),maintenanceChains:i(e,"data.maintenanceChains")}};n();s();n();s();var K=()=>[T.SWAP,T.BRIDGE];n();s();var te=[T.SWAP,T.BRIDGE,T.LIMIT_ORDER];var vt=()=>{let e=K();return e.length===1&&te.includes(e[0])},Tr=e=>{let t=K();return vt()?{tabsSetting:{show:!1,size:V.SIZE.xxl,textShow:e}}:{tabsSetting:{show:!e,size:V.SIZE.xxl,textShow:e},supportBusinessLines:t}},Rr=e=>{let t=K();return vt()?{tabsSetting:{show:!1,textShow:!e},isFullTab:e,supportBusinessLines:t}:{tabsSetting:{show:e,textShow:!e},isFullTab:e,supportBusinessLines:t}};n();s();export{Ht as a,Ho as b,vo as c,Vt as d,qo as e,pe as f,P as g,rt as h,Se as i,h as j,R as k,F as l,A as m,nt as n,zo as o,Tr as p,Rr as q};
//# sourceMappingURL=chunk-RTZBHH6D.js.map
