import{a as H,b as J}from"./chunk-66RCYZEO.js";import{b as C}from"./chunk-VSNCKUAC.js";import{a as v,c as j}from"./chunk-GVYIP5Q5.js";import{a as z}from"./chunk-6GJ4TEPK.js";import{e as $}from"./chunk-IPVHRCDK.js";import{D as L,ra as T}from"./chunk-MJDO2VHF.js";import{d as k,g as U}from"./chunk-F3ILJHGP.js";import{n as g}from"./chunk-3F7OC7N7.js";import{$ as B,Z as b,aa as S,ba as W,ca as w,da as E,db as K,eb as M,ga as X,ha as R,vb as D}from"./chunk-EQ34WRCJ.js";import{p as N}from"./chunk-DSNMNSMD.js";import{J as G}from"./chunk-URGJ6D4O.js";import{b as te}from"./chunk-FLSAETOH.js";import{Aa as x,F as _,U as h,pa as l}from"./chunk-4C5HF6J2.js";import{f as re,o as I,q as y}from"./chunk-UWURTNRY.js";I();y();var p=re(te());x();I();y();var q=[b,B,E,R];I();y();x();var ne=[B,X,S,W,w];function oe(e){return!!e&&ne.includes(e)}function de(e,s,r,t){let n=M(s),o=e.accountsMap?.[n];if(!o)return!1;let d=Object.values(o).map(a=>a.address),i=!!d.find(a=>l(a)===r),u=!!d.find(a=>l(a)===t);return i&&u}function F(e,s){return!s||!e||!e.length?null:e.find(n=>l(n.address)===l(s))||null}function Q(e,s,r){let t,n=F(e,r);return n&&s&&n.networks.indexOf(s)!==-1&&(t=n.name),t}function V(e,s,r,t){let n,o=D({localType:s});if(o){let d=e.find(i=>{let u=i.account[o.chain],a=l(r),f=l(t?t({address:u,localType:s}):u),c=!1;return oe(s)&&(c=de(i,s,f,a)),f===a||c});d&&(n=`${d.keyringName} - ${d.walletName}`)}return n}function Z(e){let s=T(H);return(0,p.useMemo)(()=>s.map(({address:r,isXKOAddress:t,...n})=>({...n,address:t?U(r):r,isXKOAddress:t})).filter(r=>!r.isXKOAddress||!e&&k()),[s,e])}function O(e){let s=Z(e),r=v();return(0,p.useMemo)(()=>s.map(({networks:t,...n})=>({...n,networks:t.map(o=>q.includes(o)?r.filter(d=>d.baseChain===o).map(({chain:d})=>d):o).flat()})),[s,r])}function ie(e){let{baseCoinId:s,network:r,name:t,ignoreXKOAddress:n}=e||{},o=j({coinId:s}),d=O(n),i=z(),u=r||o?.localType;return(0,p.useMemo)(()=>{let a=d||[];t&&(a=a.filter(({name:c,address:A})=>c.indexOf(t)!==-1||A.indexOf(t)!==-1)),u&&(a=a.filter(({networks:c})=>c.indexOf(u)!==-1));let f=h(i,"localType");return a.map(c=>({...c,networks:c.networks.map(A=>{let m=f[A];return{name:A,iconUrl:m?.image}})}))},[d,i,t,u])}function ee(e){let s=O();return(0,p.useCallback)((r,t)=>Q(s,t??e,r),[s,e])}function se(e){let s=T(L),r=C();return(0,p.useCallback)((t,n,o)=>V(s,n??e,t,o?r:void 0),[s,r,e])}function ae(e){let s=ee(e),r=se(e);return(0,p.useCallback)((t,n,o)=>{let d=s(t,n);return d?{name:d,address:t,type:g.ADDRESS_BOOK}:(d=r(t,n,o),d?{name:d,address:t,type:g.WALLET_ACCOUNT}:null)},[s,r])}function ue(e){return T(J)[e]||[]}function $e(e){let s=Z();return(0,p.useMemo)(()=>F(s,e),[s,e])}var le=({type:e,name:s,address:r},t)=>{let{addressToNameFn:n,addressInBookToNameFn:o,addressInWalletToNameFn:d}=t,i=s;if(e===g.ADDRESS_BOOK)i=o(r);else if(e===g.WALLET_ACCOUNT)i=d(r,void 0,!0);else if(e===g.DIRECT){let u=n(r,void 0,!0);u&&(i=u.name)}return{type:e,address:r,name:i}};function Y(e,s){return e.filter(({address:r})=>l(r)!==l(s))}function ce(e,s,r){return e.filter(({isXKOAddress:t})=>!t||k()).map(({type:t,name:n,address:o,isXKOAddress:d})=>{let i=d?s({address:o,mode:"XKO"}):o;return{...le({type:t,name:n,address:i},r),address:i,isXKOAddress:d}})}function me(e,s,r,t,n){let o=[];return e.forEach(d=>{t(s,d.walletId)?.forEach((i,u)=>{l(i.address)!==l(r)&&o.push({address:n({address:i.address}),group:d.keyringName,name:d.walletName,type:g.WALLET_ACCOUNT,addressType:i.addressType,hideName:u!==0,walletId:d.walletId})})}),o}function pe(e,s,r,t){let n=e.filter(o=>{let d=o.needBackup!==1,i=l(o.account[s]),u=l(r);return d&&i!==u&&!!i});return n?.length?n.map(o=>({address:t({address:o.account[s]}),group:o.keyringName,name:o.walletName,type:g.WALLET_ACCOUNT,walletId:o.walletId})):[]}function fe(e){return e.map(({address:s,name:r})=>({address:s,name:r,type:g.ADDRESS_BOOK}))}function ge(e,s){Object.entries(_(e,"group")).forEach(([t,n])=>{s.push({group:t,type:"account",list:n})})}function ze(e,s){let r=ae(e),t=ee(e),n=se(e),o=ue(e),d=ie({network:e}),i=T(L),u=$(),a=C({localType:e});return(0,p.useMemo)(()=>{let f=[],c={addressToNameFn:r,addressInBookToNameFn:t,addressInWalletToNameFn:n};if(o?.length){let m=ce(o,a,c);m=Y(m,s),m?.length&&f.push({group:N("wallet_extension_send_dropdown_recent_address"),type:"recently",list:m})}let A;if(K.includes(e)?A=me(i,e,s,u,a):A=pe(i,e,s,a),ge(A,f),d?.length){let m=fe(d);m=Y(m,s),m?.length&&f.push({group:N("wallet_extension_send_dropdown_address_book"),type:"book",list:m})}return f},[s,o,d,i,t,n,r,a,e])}function He(e){let s=O();return()=>{s&&s?.length>=200?G.error({title:N("wallet_extension_addressbook_toast_address_limit_reached")}):e&&e()}}export{q as a,ie as b,ae as c,$e as d,ze as e,He as f};
//# sourceMappingURL=chunk-X4IU7NMU.js.map
