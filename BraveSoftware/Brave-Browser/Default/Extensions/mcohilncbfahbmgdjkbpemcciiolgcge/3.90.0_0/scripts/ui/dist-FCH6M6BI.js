import{a as He}from"./chunk-W2ZIP7RZ.js";import{a as vt}from"./chunk-QI2KSP5Y.js";import{k as Ct}from"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{c as y,o as u,q as d}from"./chunk-UWURTNRY.js";var V=y(b=>{u();d();Object.defineProperty(b,"__esModule",{value:!0});b.decode=b.encode=b.unescape=b.escape=b.pad=void 0;var Me=He();function ye(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}b.pad=ye;function Le(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}b.escape=Le;function Ue(e){return ye(e).replace(/-/g,"+").replace(/_/g,"/")}b.unescape=Ue;function St(e){return Le((0,Me.fromByteArray)(new TextEncoder().encode(e)))}b.encode=St;function Et(e){return new TextDecoder().decode((0,Me.toByteArray)(ye(Ue(e))))}b.decode=Et});var Y=y(g=>{u();d();Object.defineProperty(g,"__esModule",{value:!0});g.output=g.exists=g.hash=g.bytes=g.bool=g.number=g.isBytes=void 0;function Q(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}g.number=Q;function ke(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}g.bool=ke;function Ie(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}g.isBytes=Ie;function _e(e,...t){if(!Ie(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}g.bytes=_e;function De(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Q(e.outputLen),Q(e.blockLen)}g.hash=De;function Ne(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}g.exists=Ne;function $e(e,t){_e(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}g.output=$e;var Pt={number:Q,bool:ke,bytes:_e,hash:De,exists:Ne,output:$e};g.default=Pt});var Fe=y(z=>{u();d();Object.defineProperty(z,"__esModule",{value:!0});z.crypto=void 0;z.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var W=y(a=>{u();d();Object.defineProperty(a,"__esModule",{value:!0});a.randomBytes=a.wrapXOFConstructorWithOpts=a.wrapConstructorWithOpts=a.wrapConstructor=a.checkOpts=a.Hash=a.concatBytes=a.toBytes=a.utf8ToBytes=a.asyncLoop=a.nextTick=a.hexToBytes=a.bytesToHex=a.byteSwap32=a.byteSwapIfBE=a.byteSwap=a.isLE=a.rotl=a.rotr=a.createView=a.u32=a.u8=a.isBytes=void 0;var ge=Fe(),we=Y();function Ot(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}a.isBytes=Ot;var jt=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);a.u8=jt;var Tt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));a.u32=Tt;var qt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);a.createView=qt;var At=(e,t)=>e<<32-t|e>>>t;a.rotr=At;var Bt=(e,t)=>e<<t|e>>>32-t>>>0;a.rotl=Bt;a.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var Ht=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;a.byteSwap=Ht;a.byteSwapIfBE=a.isLE?e=>e:e=>(0,a.byteSwap)(e);function Mt(e){for(let t=0;t<e.length;t++)e[t]=(0,a.byteSwap)(e[t])}a.byteSwap32=Mt;var Lt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ut(e){(0,we.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=Lt[e[r]];return t}a.bytesToHex=Ut;var S={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ve(e){if(e>=S._0&&e<=S._9)return e-S._0;if(e>=S._A&&e<=S._F)return e-(S._A-10);if(e>=S._a&&e<=S._f)return e-(S._a-10)}function kt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=Ve(e.charCodeAt(i)),h=Ve(e.charCodeAt(i+1));if(o===void 0||h===void 0){let l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}n[s]=o*16+h}return n}a.hexToBytes=kt;var It=async()=>{};a.nextTick=It;async function Dt(e,t,r){let n=Date.now();for(let s=0;s<e;s++){r(s);let i=Date.now()-n;i>=0&&i<t||(await(0,a.nextTick)(),n+=i)}}a.asyncLoop=Dt;function We(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}a.utf8ToBytes=We;function Z(e){return typeof e=="string"&&(e=We(e)),(0,we.bytes)(e),e}a.toBytes=Z;function Nt(...e){let t=0;for(let n=0;n<e.length;n++){let s=e[n];(0,we.bytes)(s),t+=s.length}let r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){let i=e[n];r.set(i,s),s+=i.length}return r}a.concatBytes=Nt;var be=class{clone(){return this._cloneInto()}};a.Hash=be;var $t={}.toString;function Ft(e,t){if(t!==void 0&&$t.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}a.checkOpts=Ft;function Vt(e){let t=n=>e().update(Z(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}a.wrapConstructor=Vt;function Wt(e){let t=(n,s)=>e(s).update(Z(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}a.wrapConstructorWithOpts=Wt;function Jt(e){let t=(n,s)=>e(s).update(Z(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}a.wrapXOFConstructorWithOpts=Jt;function Gt(e=32){if(ge.crypto&&typeof ge.crypto.getRandomValues=="function")return ge.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}a.randomBytes=Gt});var Ge=y(H=>{u();d();Object.defineProperty(H,"__esModule",{value:!0});H.hmac=H.HMAC=void 0;var ee=Y(),Je=W(),J=class extends Je.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,(0,ee.hash)(t);let n=(0,Je.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return(0,ee.exists)(this),this.iHash.update(t),this}digestInto(t){(0,ee.exists)(this),(0,ee.bytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:h}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=h,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};H.HMAC=J;var Rt=(e,t,r)=>new J(e,t).update(r).digest();H.hmac=Rt;H.hmac.create=(e,t)=>new J(e,t)});var Re=y(j=>{u();d();Object.defineProperty(j,"__esModule",{value:!0});j.HashMD=j.Maj=j.Chi=void 0;var xe=Y(),G=W();function Kt(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),h=Number(r&i),l=n?4:0,p=n?0:4;e.setUint32(t+l,o,n),e.setUint32(t+p,h,n)}var Xt=(e,t,r)=>e&t^~e&r;j.Chi=Xt;var Qt=(e,t,r)=>e&t^e&r^t&r;j.Maj=Qt;var me=class extends G.Hash{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,G.createView)(this.buffer)}update(t){(0,xe.exists)(this);let{view:r,buffer:n,blockLen:s}=this;t=(0,G.toBytes)(t);let i=t.length;for(let o=0;o<i;){let h=Math.min(s-this.pos,i-o);if(h===s){let l=(0,G.createView)(t);for(;s<=i-o;o+=s)this.process(l,o);continue}n.set(t.subarray(o,o+h),this.pos),this.pos+=h,o+=h,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,xe.exists)(this),(0,xe.output)(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let c=o;c<s;c++)r[c]=0;Kt(n,s-8,BigInt(this.length*8),i),this.process(n,0);let h=(0,G.createView)(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=l/4,f=this.get();if(p>f.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<p;c++)h.setUint32(4*c,f[c],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:h}=this;return t.length=s,t.pos=h,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}};j.HashMD=me});var Se=y(U=>{u();d();Object.defineProperty(U,"__esModule",{value:!0});U.sha224=U.sha256=void 0;var Ce=Re(),w=W(),Yt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),T=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),q=new Uint32Array(64),te=class extends Ce.HashMD{constructor(){super(64,32,8,!1),this.A=T[0]|0,this.B=T[1]|0,this.C=T[2]|0,this.D=T[3]|0,this.E=T[4]|0,this.F=T[5]|0,this.G=T[6]|0,this.H=T[7]|0}get(){let{A:t,B:r,C:n,D:s,E:i,F:o,G:h,H:l}=this;return[t,r,n,s,i,o,h,l]}set(t,r,n,s,i,o,h,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=h|0,this.H=l|0}process(t,r){for(let c=0;c<16;c++,r+=4)q[c]=t.getUint32(r,!1);for(let c=16;c<64;c++){let v=q[c-15],C=q[c-2],O=(0,w.rotr)(v,7)^(0,w.rotr)(v,18)^v>>>3,F=(0,w.rotr)(C,17)^(0,w.rotr)(C,19)^C>>>10;q[c]=F+q[c-7]+O+q[c-16]|0}let{A:n,B:s,C:i,D:o,E:h,F:l,G:p,H:f}=this;for(let c=0;c<64;c++){let v=(0,w.rotr)(h,6)^(0,w.rotr)(h,11)^(0,w.rotr)(h,25),C=f+v+(0,Ce.Chi)(h,l,p)+Yt[c]+q[c]|0,F=((0,w.rotr)(n,2)^(0,w.rotr)(n,13)^(0,w.rotr)(n,22))+(0,Ce.Maj)(n,s,i)|0;f=p,p=l,l=h,h=o+C|0,o=i,i=s,s=n,n=C+F|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,h=h+this.E|0,l=l+this.F|0,p=p+this.G|0,f=f+this.H|0,this.set(n,s,i,o,h,l,p,f)}roundClean(){q.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ve=class extends te{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};U.sha256=(0,w.wrapConstructor)(()=>new te);U.sha224=(0,w.wrapConstructor)(()=>new ve)});var tt=y(k=>{u();d();Object.defineProperty(k,"__esModule",{value:!0});k.joseToDer=k.derToJose=void 0;var Xe=He(),Qe=V();function Ee(e){return(e/8|0)+(e%8===0?0:1)}var zt={ES256:Ee(256),ES384:Ee(384),ES512:Ee(521)};function Ye(e){let t=zt[e];if(t)return t;throw new Error(`Unknown algorithm "${e}"`)}var re=128,ze=0,Zt=32,er=16,tr=2,Ze=er|Zt|ze<<6,ne=tr|ze<<6;function et(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,Xe.toByteArray)((0,Qe.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function rr(e,t){let r=et(e),n=Ye(t),s=n+1,i=r.length,o=0;if(r[o++]!==Ze)throw new Error('Could not find expected "seq"');let h=r[o++];if(h===(re|1)&&(h=r[o++]),i-o<h)throw new Error(`"seq" specified length of "${h}", only "${i-o}" remaining`);if(r[o++]!==ne)throw new Error('Could not find expected "int" for "r"');let l=r[o++];if(i-o-2<l)throw new Error(`"r" specified length of "${l}", only "${i-o-2}" available`);if(s<l)throw new Error(`"r" specified length of "${l}", max of "${s}" is acceptable`);let p=o;if(o+=l,r[o++]!==ne)throw new Error('Could not find expected "int" for "s"');let f=r[o++];if(i-o!==f)throw new Error(`"s" specified length of "${f}", expected "${i-o}"`);if(s<f)throw new Error(`"s" specified length of "${f}", max of "${s}" is acceptable`);let c=o;if(o+=f,o!==i)throw new Error(`Expected to consume entire array, but "${i-o}" bytes remain`);let v=n-l,C=n-f,O=new Uint8Array(v+l+C+f);for(o=0;o<v;++o)O[o]=0;O.set(r.subarray(p+Math.max(-v,0),p+l),o),o=n;for(let F=o;o<F+C;++o)O[o]=0;return O.set(r.subarray(c+Math.max(-C,0),c+f),o),(0,Qe.escape)((0,Xe.fromByteArray)(O))}k.derToJose=rr;function Ke(e,t,r){let n=0;for(;t+n<r&&e[t+n]===0;)++n;return e[t+n]>=re&&--n,n}function nr(e,t){e=et(e);let r=Ye(t),n=e.length;if(n!==r*2)throw new TypeError(`"${t}" signatures must be "${r*2}" bytes, saw "${n}"`);let s=Ke(e,0,r),i=Ke(e,r,e.length),o=r-s,h=r-i,l=1+1+o+1+1+h,p=l<re,f=new Uint8Array((p?2:3)+l),c=0;return f[c++]=Ze,p?f[c++]=l:(f[c++]=re|1,f[c++]=l&255),f[c++]=ne,f[c++]=o,s<0?(f[c++]=0,f.set(e.subarray(0,r),c),c+=r):(f.set(e.subarray(s,r),c),c+=r-s),f[c++]=ne,f[c++]=h,i<0?(f[c++]=0,f.set(e.subarray(r),c)):f.set(e.subarray(r+i),c),f}k.joseToDer=nr});var R=y(I=>{u();d();Object.defineProperty(I,"__esModule",{value:!0});I.InvalidTokenError=I.MissingParametersError=void 0;var Pe=class extends Error{constructor(t){super(),this.name="MissingParametersError",this.message=t||""}};I.MissingParametersError=Pe;var Oe=class extends Error{constructor(t){super(),this.name="InvalidTokenError",this.message=t||""}};I.InvalidTokenError=Oe});var ot=y(ie=>{u();d();Object.defineProperty(ie,"__esModule",{value:!0});ie.SECP256K1Client=void 0;var sr=Ge(),or=Se(),se=vt(),rt=tt(),nt=R(),st=W();se.utils.hmacSha256Sync=(e,...t)=>{let r=sr.hmac.create(or.sha256,e);return t.forEach(n=>r.update(n)),r.digest()};var oe=class{static derivePublicKey(t,r=!0){return t.length===66&&(t=t.slice(0,64)),t.length<64&&(t=t.padStart(64,"0")),(0,st.bytesToHex)(se.getPublicKey(t,r))}static signHash(t,r,n="jose"){if(!t||!r)throw new nt.MissingParametersError("a signing input hash and private key are all required");let s=se.signSync(t,r.slice(0,64),{der:!0,canonical:!1});if(n==="der")return(0,st.bytesToHex)(s);if(n==="jose")return(0,rt.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(t){return(0,rt.joseToDer)(t,"ES256")}static verifyHash(t,r,n){if(!t||!r||!n)throw new nt.MissingParametersError("a signing input hash, der signature, and public key are all required");return se.verify(r,t,n,{strict:!1})}};ie.SECP256K1Client=oe;oe.algorithmName="ES256K"});var ce=y(D=>{u();d();Object.defineProperty(D,"__esModule",{value:!0});D.cryptoClients=D.SECP256K1Client=void 0;var it=ot();Object.defineProperty(D,"SECP256K1Client",{enumerable:!0,get:function(){return it.SECP256K1Client}});var ir={ES256K:it.SECP256K1Client};D.cryptoClients=ir});var je=y(A=>{u();d();var cr=A&&A.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function h(f){try{p(n.next(f))}catch(c){o(c)}}function l(f){try{p(n.throw(f))}catch(c){o(c)}}function p(f){f.done?i(f.value):s(f.value).then(h,l)}p((n=n.apply(e,t||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.hashSha256Async=A.hashSha256=void 0;var ar=Se();function ct(e){return(0,ar.sha256)(e)}A.hashSha256=ct;function ur(e){return cr(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){let r=typeof e=="string"?new TextEncoder().encode(e):e,n=yield crypto.subtle.digest("SHA-256",r);return new Uint8Array(n)}else{let r=Ct();if(!r.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(r.createHash("sha256").update(e).digest())}}catch(t){return console.log(t),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(ct(e))}})}A.hashSha256Async=ur});var dt=y(B=>{u();d();var dr=B&&B.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function h(f){try{p(n.next(f))}catch(c){o(c)}}function l(f){try{p(n.throw(f))}catch(c){o(c)}}function p(f){f.done?i(f.value):s(f.value).then(h,l)}p((n=n.apply(e,t||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0});B.TokenSigner=B.createUnsecuredToken=void 0;var Te=V(),at=ce(),fr=R(),ut=je();function qe(e,t){let r=[],n=Te.encode(JSON.stringify(t));r.push(n);let s=Te.encode(JSON.stringify(e));return r.push(s),r.join(".")}function hr(e){return qe(e,{typ:"JWT",alg:"none"})+"."}B.createUnsecuredToken=hr;var Ae=class{constructor(t,r){if(!(t&&r))throw new fr.MissingParametersError("a signing algorithm and private key are required");if(typeof t!="string")throw new Error("signing algorithm parameter must be a string");if(t=t.toUpperCase(),!at.cryptoClients.hasOwnProperty(t))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=at.cryptoClients[t],this.rawPrivateKey=r}header(t={}){let r={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},r,t)}sign(t,r=!1,n={}){let s=this.header(n),i=qe(t,s),o=(0,ut.hashSha256)(i);return this.createWithSignedHash(t,r,s,i,o)}signAsync(t,r=!1,n={}){return dr(this,void 0,void 0,function*(){let s=this.header(n),i=qe(t,s),o=yield(0,ut.hashSha256Async)(i);return this.createWithSignedHash(t,r,s,i,o)})}createWithSignedHash(t,r,n,s,i){let o=this.cryptoClient.signHash(i,this.rawPrivateKey);return r?{header:[Te.encode(JSON.stringify(n))],payload:JSON.stringify(t),signature:[o]}:[s,o].join(".")}};B.TokenSigner=Ae});var ht=y(ue=>{u();d();Object.defineProperty(ue,"__esModule",{value:!0});ue.TokenVerifier=void 0;var lr=V(),ft=ce(),pr=R(),ae=je(),Be=class{constructor(t,r){if(!(t&&r))throw new pr.MissingParametersError("a signing algorithm and public key are required");if(typeof t!="string")throw"signing algorithm parameter must be a string";if(t=t.toUpperCase(),!ft.cryptoClients.hasOwnProperty(t))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=ft.cryptoClients[t],this.rawPublicKey=r}verify(t){return typeof t=="string"?this.verifyCompact(t,!1):typeof t=="object"?this.verifyExpanded(t,!1):!1}verifyAsync(t){return typeof t=="string"?this.verifyCompact(t,!0):typeof t=="object"?this.verifyExpanded(t,!0):Promise.resolve(!1)}verifyCompact(t,r){let n=t.split("."),s=n[0]+"."+n[1],i=o=>{let h=this.cryptoClient.loadSignature(n[2]);return this.cryptoClient.verifyHash(o,h,this.rawPublicKey)};if(r)return(0,ae.hashSha256Async)(s).then(o=>i(o));{let o=(0,ae.hashSha256)(s);return i(o)}}verifyExpanded(t,r){let n=[t.header.join("."),lr.encode(t.payload)].join("."),s=!0,i=o=>(t.signature.map(h=>{let l=this.cryptoClient.loadSignature(h);this.cryptoClient.verifyHash(o,l,this.rawPublicKey)||(s=!1)}),s);if(r)return(0,ae.hashSha256Async)(n).then(o=>i(o));{let o=(0,ae.hashSha256)(n);return i(o)}}};ue.TokenVerifier=Be});var lt=y(fe=>{u();d();Object.defineProperty(fe,"__esModule",{value:!0});fe.decodeToken=void 0;var de=V();function yr(e){if(typeof e=="string"){let t=e.split("."),r=JSON.parse(de.decode(t[0])),n=JSON.parse(de.decode(t[1])),s=t[2];return{header:r,payload:n,signature:s}}else if(typeof e=="object"){if(typeof e.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let t=e.payload;e.payload[0]!=="{"&&(t=de.decode(t));let r=[];return e.header.map(n=>{let s=JSON.parse(de.decode(n));r.push(s)}),{header:r,payload:JSON.parse(t),signature:e.signature}}}fe.decodeToken=yr});var N=y(m=>{u();d();var _r=m&&m.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),K=m&&m.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&_r(t,e,r)};Object.defineProperty(m,"__esModule",{value:!0});K(dt(),m);K(ht(),m);K(lt(),m);K(R(),m);K(ce(),m)});var M=y(he=>{u();d();Object.defineProperty(he,"__esModule",{value:!0});he.getDefaultProvider=void 0;async function gr(){return window.BitcoinProvider}he.getDefaultProvider=gr});var pt=y(X=>{u();d();Object.defineProperty(X,"__esModule",{value:!0});X.AddressPurposes=void 0;var br;(function(e){e.PAYMENT="payment",e.ORDINALS="ordinals"})(br=X.AddressPurposes||(X.AddressPurposes={}))});var yt=y(E=>{u();d();var wr=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xr=E&&E.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&wr(t,e,r)};Object.defineProperty(E,"__esModule",{value:!0});E.getAddress=void 0;var mr=N(),Cr=M(),vr=async e=>{let{getProvider:t=Cr.getDefaultProvider}=e,r=await t();if(!r)throw new Error("No Bitcoin wallet installed");let{purposes:n}=e.payload;if(!n)throw new Error("Address purposes are required");try{let s=(0,mr.createUnsecuredToken)(e.payload),i=await r.connect(s);e.onFinish?.(i)}catch(s){console.error("[Connect] Error during address request",s),e.onCancel?.()}};E.getAddress=vr;xr(pt(),E)});var _t=y(L=>{u();d();Object.defineProperty(L,"__esModule",{value:!0});L.callWalletPopup=L.CallMethod=void 0;var Sr=N(),Er=M(),Pr;(function(e){e.SIGN_TRANSACTION="signTransaction",e.GET_ADDRESS="getAddress"})(Pr=L.CallMethod||(L.CallMethod={}));var Or=async e=>{let{getProvider:t=Er.getDefaultProvider}=e,r=await t();if(!r)throw new Error("No Bitcoin wallet installed");let{method:n}=e.payload;if(!n)throw new Error("A wallet method is required");let s=(0,Sr.createUnsecuredToken)(e.payload);try{let i=await r.call(s);e.onFinish?.(i)}catch(i){console.error("[Connect] Error during call request",i),e.onCancel?.()}};L.callWalletPopup=Or});var bt=y(gt=>{u();d();Object.defineProperty(gt,"__esModule",{value:!0})});var wt=y(P=>{u();d();var jr=P&&P.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Tr=P&&P.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jr(t,e,r)};Object.defineProperty(P,"__esModule",{value:!0});P.signMessage=void 0;var qr=N(),Ar=M(),Br=async e=>{let{getProvider:t=Ar.getDefaultProvider}=e,r=await t();if(!r)throw new Error("No Bitcoin wallet installed");let{address:n,message:s}=e.payload;if(!n)throw new Error("An address is required to sign a message");if(!s)throw new Error("A message to be signed is required");try{let i=(0,qr.createUnsecuredToken)(e.payload),o=await r.signMessage(i);e.onFinish?.(o)}catch(i){console.error("[Connect] Error during sign message request",i),e.onCancel?.()}};P.signMessage=Br;Tr(bt(),P)});var xt=y(le=>{u();d();Object.defineProperty(le,"__esModule",{value:!0});le.sendBtcTransaction=void 0;var Hr=N(),Mr=M(),Lr=async e=>{let{getProvider:t=Mr.getDefaultProvider}=e,r=await t();if(!r)throw new Error("No Bitcoin wallet installed");let{recipients:n,senderAddress:s}=e.payload;if(!n||n.length===0)throw new Error("At least one recipient is required");if(!s)throw new Error("The sender address is required");try{let i=(0,Hr.createUnsecuredToken)(e.payload),o=await r.sendBtcTransaction(i);e.onFinish?.(o)}catch(i){console.error("[Connect] Error during send BTC transaction request",i),e.onCancel?.()}};le.sendBtcTransaction=Lr});var mt=y(pe=>{u();d();Object.defineProperty(pe,"__esModule",{value:!0});pe.signTransaction=void 0;var Ur=N(),kr=M(),Ir=async e=>{let{getProvider:t=kr.getDefaultProvider}=e,r=await t();if(!r)throw new Error("No Bitcoin wallet installed");let{psbtBase64:n,inputsToSign:s}=e.payload;if(!n)throw new Error("A value for psbtBase64 representing the tx hash is required");if(!s)throw new Error("An array specifying the inputs to be signed by the wallet is required");try{let i=(0,Ur.createUnsecuredToken)(e.payload),o=await r.signTransaction(i);e.onFinish?.(o)}catch(i){console.error("[Connect] Error during sign transaction request",i),e.onCancel?.()}};pe.signTransaction=Ir});var Nr=y(x=>{u();d();var Dr=x&&x.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$=x&&x.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Dr(t,e,r)};Object.defineProperty(x,"__esModule",{value:!0});$(yt(),x);$(_t(),x);$(M(),x);$(wt(),x);$(xt(),x);$(mt(),x)});export default Nr();
//# sourceMappingURL=dist-FCH6M6BI.js.map
