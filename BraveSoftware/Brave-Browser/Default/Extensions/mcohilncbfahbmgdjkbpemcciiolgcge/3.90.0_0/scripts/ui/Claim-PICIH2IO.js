import{b as mo}from"./chunk-CWNI35TN.js";import{a as co,e as uo,f as fo,j as po,k as Co,l as _o,m as go,o as k}from"./chunk-NCGTNSM4.js";import"./chunk-CERSDYPT.js";import{c as d}from"./chunk-RZETZIQO.js";import{Ea as no,Va as lo,pa as ao,va as io}from"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import{f as so}from"./chunk-CTJAEFLV.js";import{a as eo,p as ro}from"./chunk-AP4E6GDF.js";import{$c as to,F as O,Ke as p,Tc as oo,ha as L,l as R,m as b}from"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import{a as Mo}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{d as q}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as h,w as z}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as X}from"./chunk-FB3ILH2L.js";import{b as w}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import"./chunk-4C5HF6J2.js";import"./chunk-BY6XCDJZ.js";import"./chunk-WQGQVXPA.js";import"./chunk-EI7BJC6V.js";import"./chunk-WZALYVUQ.js";import"./chunk-4ARIYUS3.js";import{f as u,o as a,q as i}from"./chunk-UWURTNRY.js";a();i();var t=u(w()),B=u(Mo()),j=u(X());a();i();var V={list:"list",coin:"coin",orderDetail:"orderDetail"};a();i();var D=u(w());a();i();var ho=u(w());var N=()=>{let{walletContractStore:e}=d(),{gasFee:o,nativeCoin:r}=e,{coinAmountInt:n,decimals:s}=r??{};return(0,ho.useMemo)(()=>{let m=ro(n,s);return eo.gte(m,o||"0")},[o,n,s])};var Bo=()=>{let{HeaderTip:e}=L.components,{walletContractStore:o}=d(),{gasInfo:r,gasLimitError:n,nativeCoin:s,compuletedGetNativeCoinError:m,compuletedGetNativeCoinLoading:l,computedTipsBtnProps:S}=o,{symbol:y}=s??{},f={type:q.TYPE.error,renderGasStation:!1},g=N(),T=()=>D.default.createElement(e,{type:q.TYPE.warn,message:p("swaptrade_extension_cinteraction_insufficient_networkfee",{symbol:y}),actions:[S],renderGasStation:!1}),x=()=>D.default.createElement(e,{...f,message:p("swaptrade_extension_cinteraction_might_error")}),I=()=>D.default.createElement(e,{...f,message:n});return l?null:m?D.default.createElement(e,{...f,message:p("swaptrade_history_error_retrieve_balance_error")}):n?I():g&&r?.gasLimitInfo?.queryGasLimitErrorUseDefault?x():g?null:T()},So=b(Bo);a();i();var yo=u(w());var Fo=({chainId:e,tokenContractAddress:o,amount:r,isNativeToken:n})=>{let s=go({chainId:e,tokenContractAddress:o,isNativeToken:n}),{coinId:m,decimals:l}=s||{};return(0,yo.useMemo)(()=>[{coinId:m,assetChange:_o("+",r,l),useMinPrecision:!1}],[r,m,l])},To=Fo;a();i();var _=u(w()),Lo=u(X());a();i();var wo=u(w());var Wo=()=>{let{walletContractStore:e}=d(),o=N(),{gasInfo:r,gasLimitError:n,compuletedGetNativeCoinError:s,compuletedGetNativeCoinLoading:m,gasFeeLoading:l}=e;return(0,wo.useMemo)(()=>l||n||s||m||r?.isGasLimitLoading||r?.gasLimitInfo?.queryGasLimitErrorUseDefault||!o,[s,m,l,r?.gasLimitInfo?.queryGasLimitErrorUseDefault,r?.isGasLimitLoading,n,o])},Eo=Wo;a();i();var Io=u(w());a();i();var Z=class{constructor(){this.isLoading=!1;this.setLoading=o=>{this.isLoading=o};this.orderDetail=null;this.setOrderDetail=o=>{this.orderDetail=o};this.fetchOrderDetail=async o=>{this.setLoading(!0);let[r,n]=await O(no.get(to,{params:{orderId:o}}));if(r){this.setError(r),this.setLoading(!1);return}let s=n.data;this.setOrderDetail(s)};this.payload=null;this.setPayload=o=>{this.payload=o};this.sourceClaimPayload=null;this.setSourceClaimPayload=o=>{this.sourceClaimPayload=o};this.error=null;this.reset=()=>{this.setLoading(!1),this.setOrderDetail(null),this.setPayload(null),this.setSourceClaimPayload(null),this.clearError()};R(this,{},{autoBind:!0})}setError(o){this.error=o}clearError(){this.error=null}},E=new Z;var Ho=e=>{let{walletContractStore:o,swapStore:r}=d(),{toChainId:n,orderId:s}=e||{};return(0,Io.useCallback)(async()=>{let{history:m}=L,{payload:l}=E;io.info(ao.CLAIM_PAYLOAD,{payload:l,tags:{orderId:s}});let[S,y]=await O(lo({chainId:n,walletSendParams:o.walletSendParams},l[0]));if(S){r.onWalletFail(S,s,!0);return}let{result:f,nonce:g}=y;await r.updateClaimOrder({mainOrderId:s,redeemTxHash:f,nonce:g}),m?.goBack()},[n,o.walletSendParams,r,s])},bo=Ho;a();i();var M={footer:"_footer_18rul_1","button-style":"_button-style_18rul_8",buttonStyle:"_button-style_18rul_8"};var Uo=({onChangeHeight:e,trade:o})=>{let r=(0,_.useRef)(null),[n,s]=(0,_.useState)(!1),{walletContractStore:m}=d(),{computedCancelBtnProps:l}=m;(0,_.useEffect)(()=>{let f=T=>{e&&e(T.offsetHeight)},g=new MutationObserver(T=>{f(T[0]?.target)});return r.current&&(f(r.current),g.observe(r.current,{childList:!0})),()=>{g.disconnect()}},[e]);let S=Eo(),y=bo(o);return _.default.createElement("div",{className:(0,Lo.default)(M.footer)},_.default.createElement(h,{block:!0,circle:!1,className:M.buttonStyle,size:h.SIZE.lg,category:h.CATEGORY.outline,type:h.TYPE.primary,loading:l.loading,loadingText:l.btnText,disabled:l.disabled,onClick:l.onClick},l.btnText),_.default.createElement(h,{block:!0,circle:!1,className:M.buttonStyle,size:h.SIZE.lg,type:h.TYPE.highlight,category:h.CATEGORY.fill,disabled:S,loading:n,loadingText:p("swaptrade_common_btn_confirm"),onClick:async()=>{s(!0),await y(),s(!1)}},p("swaptrade_common_btn_confirm")))},ko=b(Uo);a();i();var $=u(w());var Yo=({chainId:e,transactionPayload:o})=>{let{fromToStore:r}=d(),{isEvmChain:n}=r;return fo(e),n(e)?$.default.createElement(Co,{chainId:e,transactionPayload:o,isClaim:!0,needGasChange:!0}):$.default.createElement(po,{chainId:e,transactionPayload:o,isClaim:!0})},xo=Yo;var qo=()=>{let[e,o]=(0,t.useState)(""),{components:{MultipleChangeSummary:r,TxTypeWithTools:n,SectionWrap:s,InteractiveAddress:m,ModuleWrap:l,ViewData:S}}=L,y=(0,B.useHistory)(),[f,g]=(0,t.useState)(80),{search:T}=(0,B.useLocation)(),{orderId:x,source:I}=(0,t.useMemo)(()=>so(T),[T]),{swapStore:v,accountStore:F,fromToStore:vo,walletContractStore:Po}=d(),{computedAccountId:Do}=F,{isEvmChain:Go}=vo,{gasInfo:W}=Po,{orderDetail:c,setPayload:P,payload:J,setLoading:H,setSourceClaimPayload:K,sourceClaimPayload:U}=E;(0,t.useEffect)(()=>{I&&(I===V.list||I===V.coin)&&e&&mo("bridge_claim_click","history_main",e)},[I,e]),(0,t.useEffect)(()=>{x&&E.fetchOrderDetail(x)},[x]),(0,t.useEffect)(()=>()=>{E.reset()},[]),co(),(0,t.useEffect)(()=>{if(c){let G=F.getAddressByChainId(c.toChainId);o(G),v.fetchClaimCalldata(c,G).then(A=>{if(H(!1),!A){y.goBack();return}let{payload:Y,sourceClaimPayload:No}=A;P(Y),K(No)}).catch(()=>{H(!1)})}},[v,c,F,P,H,K,y]);let Q=(0,t.useCallback)(async(G,A)=>{let Y=await v.formatClaimPayload(G,A);P(Y)},[P,v]);(0,t.useEffect)(()=>{c&&U&&W&&Q(U,c)},[W.networkFee,c,U,P,v,W,Q]);let Ao=uo(oo.CLAIM),Oo=To({chainId:c?.toChainId,tokenContractAddress:c?.toTokenAddress,isNativeToken:c?.isNativeToken==="1",amount:c?.bridgeChildOrderDetailVo?.toAmountOut});return E.isLoading?t.default.createElement("div",{className:(0,j.default)(k.container,k.loading)},t.default.createElement(z,{size:z.SIZE.lg})):t.default.createElement("div",{className:k.container},t.default.createElement("div",{style:{height:`calc(100% - ${f}px)`},className:(0,j.default)(k.wrap)},t.default.createElement("div",{className:k.scroll,id:"wallet_scroll"},t.default.createElement(So,null),t.default.createElement(n,{txTypeInfo:{baseInfo:Ao}},t.default.createElement(r,{title:p("swaptrade_orders_label_receive"),summaryList:Oo})),t.default.createElement(xo,{chainId:c?.toChainId,transactionPayload:J?.[0]}),t.default.createElement(s,null,t.default.createElement(m,{title:p("swaptrade_transfer_textarea_wallet_used"),address:e,walletId:Do})),t.default.createElement(s,{bordered:!1},Go(c?.toChainId)&&t.default.createElement(S,{copyable:{hideDesc:!0},data:J?.[0]?.data})))),t.default.createElement(ko,{onChangeHeight:g,trade:c}))},Se=b(qo);export{Se as default};
//# sourceMappingURL=Claim-PICIH2IO.js.map
