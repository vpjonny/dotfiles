import{a as Cr}from"./chunk-TPU7RDOH.js";import{a as Ir,b as Jt}from"./chunk-7SMKZHJ4.js";import"./chunk-ZFZWOU6F.js";import"./chunk-OFZ5ADZF.js";import"./chunk-KHLJBXWP.js";import"./chunk-ZTAEYDNS.js";import{a as xr}from"./chunk-IWYRUFZN.js";import"./chunk-452JEOHF.js";import{a as wr}from"./chunk-UOZ5BXPF.js";import{b as mr,c as Qt,d as dr,e as pr,f as ur,g as _r,h as ho}from"./chunk-EDLQW4CA.js";import{b as kn,e as Zt}from"./chunk-OB3TCQZN.js";import"./chunk-NDXB46PK.js";import{b as fr}from"./chunk-LQYOENAF.js";import"./chunk-TO4NOIO7.js";import"./chunk-B65TWR5I.js";import{a as gr}from"./chunk-EF6FTTLT.js";import{a as hr}from"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-OS6U6P6N.js";import"./chunk-XUGHAFHG.js";import{a as N}from"./chunk-B5L26Z2J.js";import{d as V}from"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import{a as yr}from"./chunk-OB65JCC3.js";import"./chunk-A2QCZBSN.js";import"./chunk-6HZZC7IQ.js";import"./chunk-W2ZIP7RZ.js";import"./chunk-WK2UVA5P.js";import"./chunk-L33HNSY3.js";import{b as qt}from"./chunk-5RWZJZ73.js";import"./chunk-2QLWTTFC.js";import"./chunk-4C6TSQMS.js";import"./chunk-OYIB3B2O.js";import{a as cr}from"./chunk-GVYIP5Q5.js";import{B as Mt,Pa as Zo,m as Qo}from"./chunk-VHMBEOFX.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as ve}from"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import{h as pt}from"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import{c as Kt,e as Ht}from"./chunk-6C7RJCTT.js";import{o as B}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{a as go,b as lr,e as Je,g as Xt}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{g as yo}from"./chunk-MJSLAJV6.js";import{e as Dt,i as Wt,n as Jo,u as Ve}from"./chunk-KC2XLVFC.js";import{$ as mt,A as vt,C as Pt,E as Ot,F as Ro,ea as Xo,qa as ie,ra as P}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import{h as Ye}from"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{a as oe,la as er,pb as jt,q as Ut,r as Xe,s as ue,t as Gt,u as zt}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import{p as Lt,q as Nt}from"./chunk-KGMP5AO5.js";import{c as dt}from"./chunk-EAE2NUFS.js";import{d as Ft}from"./chunk-OLICTWCW.js";import{a as Be}from"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import{a as Re}from"./chunk-OKGWI7CU.js";import{B as jo,h as Tt}from"./chunk-EPDR6VAQ.js";import{a as zo}from"./chunk-RFTC6RNT.js";import{a as Vt,b as Rt,f as ir,g as ft}from"./chunk-I6UBKGB5.js";import{h as _t}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import{c as C,d as ne,e as te,g as or,h as rr,j as nr,k as sr,n as ar}from"./chunk-WN3TRBGI.js";import{c as r}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import{t as be,v as St}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{$ as $e,Fb as Vo,Jb as ct,Z as Q,da as bt,fa as Et,gb as Ee,hb as qo,ib as Bt,j as Uo,pb as $o,rb as Yo,v as Go}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{k as Ho,p as l}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as re}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{A as Ne,E as Yt,I as O,e as le,f as Le,o as Ze,r as tr,x as $t}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import{a as ut}from"./chunk-IQUFNLVG.js";import{C as k,t as Z,w as Qe}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as xe}from"./chunk-FB3ILH2L.js";import{b as I}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import{Aa as he,M as fo,da as Ko,fa as At,g as qe,r as Fo}from"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as _,o as n,q as s}from"./chunk-UWURTNRY.js";n();s();var pe=_(I()),ae=_(re());n();s();var K=_(I());var Nr=_(re());he();n();s();var we=_(I()),kr=_(xe());he();n();s();var gt=_(I());n();s();var eo={root:"_root_v9tdu_1",importedRoot:"_importedRoot_v9tdu_9",tag:"_tag_v9tdu_13"};var q="SELECTED",D="IMPORTED",An=({selectType:e})=>e===D?gt.default.createElement(r.FlexBox,{className:eo.importedRoot,align:r.ALIGN.center},gt.default.createElement(r.Box,{className:eo.tag},l("wallet_extension_card_label_added"))):gt.default.createElement(r.FlexBox,{className:eo.root,align:r.ALIGN.center},gt.default.createElement(tr,{checked:e===q,circle:!0})),ce=An;n();s();var Pe={root:"_root_gwbd5_1",SELECTED:"_SELECTED_gwbd5_10",selected:"_SELECTED_gwbd5_10",IMPORTED:"_IMPORTED_gwbd5_13",imported:"_IMPORTED_gwbd5_13",selector:"_selector_gwbd5_16",main:"_main_gwbd5_19",name:"_name_gwbd5_23",assets:"_assets_gwbd5_29"};var Tn=e=>{let{account:t,children:o,setSelected:a,selectType:i,badgeSlot:c=null}=e,m=Xt()?.length;return we.default.createElement(r.Box,{className:(0,kr.default)(Pe.root,Pe[i]),onClick:()=>{i!==D&&a(d=>i===q?d.filter(f=>f.index!==t.index):m+d.length>=1e3?(O.error({title:l("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),d):[...d,t])}},we.default.createElement(r.FlexBox,{className:Pe.selector,align:r.ALIGN.center},we.default.createElement(r.FlexBox,{justify:r.ALIGN.center,direction:r.DIRECTION.vertical,className:Pe.main},we.default.createElement(r.FlexBox,{align:r.ALIGN.center},we.default.createElement(r.Box,{className:Pe.name},l("wallet_extension_card_title_account",{value:`${Ko(`${t.index+1}`,2,"0")}`})),c),!!t.balance&&we.default.createElement(B.DisplayAmount,{ellipsis:!0,symbol:"$",mode:B.LEGAL,useApproximate:!1,className:Pe.assets},t.balance)),we.default.createElement(ce,{selectType:i})),o)},et=Tn;n();s();var L=_(I()),xo=_(xe());n();s();var F={root:"_root_7hr89_1",tip:"_tip_7hr89_8",icon:"_icon_7hr89_13",info:"_info_7hr89_19",desc:"_desc_7hr89_23",entry:"_entry_7hr89_28",dialogRoot:"_dialogRoot_7hr89_34",title:"_title_7hr89_37",listWrap:"_listWrap_7hr89_42",pathItem:"_pathItem_7hr89_42",recommendItem:"_recommendItem_7hr89_51",SELECTED:"_SELECTED_7hr89_54",selected:"_SELECTED_7hr89_54",recommend:"_recommend_7hr89_51",detail:"_detail_7hr89_69",path:"_path_7hr89_42",address:"_address_7hr89_80",balance:"_balance_7hr89_88"};var Sn=(0,L.memo)(({account:e,selectType:t,updateAddressType:o})=>{let{mainnet:a,addressType:i,addressTypeUpdated:c}=e,m=i[Q],[d,f]=(0,L.useState)(!1),y=Object.values(a).filter(({balance:h})=>Ho.gt(h,0)),g=h=>{f(!1),o(e,h,Q)},w=(0,L.useMemo)(()=>t===D||c?l("wallet_extension_hardware_wallet_notif_current_address",{network:"EVM",address:yo(a[m].address)}):l("wallet_extension_card_alert_default_option",{network:"EVM",address:yo(a[m].address)}),[c,t,m,a]);return y.length<=1||y.length===2&&y[0].address===y[1].address?null:L.default.createElement(r.Box,{className:F.root,onClick:h=>{h.stopPropagation()}},L.default.createElement(r.FlexBox,{className:F.tip},L.default.createElement(Z,{className:(0,xo.default)("okx-wallet-plugin-information-circle",F.icon)}),L.default.createElement(r.Box,{className:F.info},L.default.createElement(r.Box,{className:F.desc},w),L.default.createElement(r.Box,{className:F.entry,onClick:()=>{f(!0)}},l("wallet_extension_card_textbtn_change_network",{network:"EVM"})))),L.default.createElement(Ze.Action,{noContentPadding:!0,visible:d,alignBottom:!0,onClose:()=>{f(!1)}},L.default.createElement(r.Box,{className:F.dialogRoot},L.default.createElement(r.Box,{className:F.title},l("wallet_extension_top_title_change_evm",{network:"EVM"})),L.default.createElement(r.Box,{className:F.listWrap},Qt(e.index).map(h=>{let S=m===h.type;return L.default.createElement(r.FlexBox,{key:h.type,className:(0,xo.default)(F.pathItem,{[F.recommendItem]:h.recommend,[F.SELECTED]:S}),onClick:()=>{S||g(h.type)},align:r.ALIGN.center},!!h.recommend&&L.default.createElement(r.Box,{className:F.recommend},l("wallet_extension_top_tag_recommended")),L.default.createElement(r.Box,{className:F.detail},L.default.createElement(r.Box,{className:F.path},h.pathName),L.default.createElement(r.Box,{className:F.address},a[h.type].address),L.default.createElement(B.DisplayAmount,{ellipsis:!0,symbol:"$",mode:B.LEGAL,useApproximate:!1,className:F.balance},a[h.type].balance)),L.default.createElement(ce,{selectType:S?q:""}))})))))}),Ar=Sn;n();s();var Tr=_(I());var bn=(e,t)=>{let o=e.index;return o!==void 0&&o===t.index},En=(e,t)=>{let o=t?.[Ee]?.address;return!!o&&e?.account?.[Ee]===o},Bn=(e,t)=>(0,Tr.useCallback)(o=>{let a=e.some(c=>c.index===o.index);return t.some(c=>bn(c,o)||En(c,o))?D:a?q:""},[e,t]),tt=Bn;n();s();var Sr=_(I());he();n();s();var wo={freeze:"_freeze_1ivas_1"};function _e(){(0,Sr.useEffect)(()=>{let e=document.getElementsByClassName("main-container-wrapper")[0];return e&&e.classList?(e.classList.add(wo.freeze),()=>{e.classList.remove(wo.freeze)}):qe},[])}n();s();var oo=_(I());var br=_(re());n();s();var to=Ir({getBackground:dt});var Ln=(e,t={})=>{let o={[C.onekey](){let{onekeyInfo:a}=t,i=a?.deviceType;return i?`${e}_${i}`:e},[C.keystone](){let{keystoneInfo:a}=t;return a?.device||e},[C.trezor](){return ne[C.trezor]}};return o[e]?o[e]():"unknown"},Nn=({hardware:e,selected:t,walletId:o,walletInfo:a={}})=>{let[i,c]=(0,oo.useState)(!1),m=(0,br.useHistory)(),d=ie(),f=N(),u=P(Ot),y=P(vt),g=(0,oo.useCallback)(async()=>{try{let w={hardware:e,walletId:o,accounts:t,...a};if(o&&(w.type=te.addAccount),!u){d(qt(w)),m.push(`${jt}?from=${Jt.HARDWARE}`);return}if(!y){O.error({title:l("wallet_extension_hardware_wallet_notif_please_unlock")});return}c(!0),Mt({hardwarewallet_brand:e,device_name:Ln(e,a)}),await d(to(w)),await Ye(d),c(!1),te.addAccount===f.get("type")?(O.success({title:l("wallet_addacount_toast_account_created")}),d(pt()),e===C.trezor?globalThis.platform.openExtensionInPopup(oe):m.go(-1)):globalThis.platform.openExtensionInPopup(oe)}catch(w){c(!1);let h=w;h.message===Nt&&O.error(l("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),h.message===Lt&&O.error(l("wallet_home_toast_network_error"))}},[f,m,t,e,o,d,a,y,u]);return[i,g]},ot=Nn;n();s();var Co=_(I());n();s();var Er={root:"_root_14fge_1"};var vn=({selected:e,isSubmiting:t,handleSubmit:o})=>Co.default.createElement(r.Box,{className:Er.root},Co.default.createElement(k,{block:!0,loading:t,category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.lg,disabled:!e.length,onClick:o},e.length?l("wallet_extension_footer_btn_connecting",{value:e.length}):l("wallet_extension_footer_btn_connect"))),rt=vn;n();s();var ee=_(I());he();n();s();var J={"retina-border-basic":"_retina-border-basic_1f1rt_1",retinaBorderBasic:"_retina-border-basic_1f1rt_1",root:"_root_1f1rt_29",header:"_header_1f1rt_38",back:"_back_1f1rt_75",close:"_close_1f1rt_76",title:"_title_1f1rt_80",content:"_content_1f1rt_84",selectorTitle:"_selectorTitle_1f1rt_87",selector:"_selector_1f1rt_87",item:"_item_1f1rt_97",lock:"_lock_1f1rt_101",button:"_button_1f1rt_106"};var Pn=({handleClick:e=qe,visible:t=!0})=>t?ee.default.createElement(r.Box,{className:J.root,onClick:e},ee.default.createElement(r.FlexBox,{justify:"space-between",className:J.header},ee.default.createElement(le.Input,{active:!0,className:J.back}),ee.default.createElement(le.Input,{active:!0,className:J.title}),ee.default.createElement(le.Input,{active:!0,className:J.close})),ee.default.createElement(r.Box,{className:J.content},ee.default.createElement(le.Input,{active:!0,className:J.selectorTitle}),ee.default.createElement(le.Input,{active:!0,className:J.selector}),ee.default.createElement(le.Input,{active:!0,className:J.selectorTitle}),ee.default.createElement(le.Input,{active:!0,className:J.item}),ee.default.createElement(le.Input,{active:!0,className:J.lock})),ee.default.createElement(le.Input,{active:!0,className:J.button})):null,Ce=Pn;n();s();var Oe={wrap:"_wrap_i44ji_1",root:"_root_i44ji_6",navigator:"_navigator_i44ji_11",title:"_title_i44ji_20",desc:"_desc_i44ji_26"};n();s();var Ie=_(I());he();var On=e=>{let o=N().get("walletId"),a=P(Pt),[i,c]=(0,Ie.useState)(()=>o?a.find(y=>(y.walletIdentities||[]).some(w=>w.walletId===o))||{}:{});(0,Ie.useEffect)(()=>{if(e&&fo(i)){let y=a.find(g=>g.masterFingerprint===e);y&&!fo(y)&&c(y)}},[a,e,i]);let[m,d]=(0,Ie.useState)([]);(0,Ie.useEffect)(()=>{let y=i&&"walletIdentities"in i?i.walletIdentities||[]:[];d(y)},[i]);let[f,u]=(0,Ie.useState)(o);return(0,Ie.useEffect)(()=>{let y=m?.[0];u(y?.walletId||"")},[m]),{targetKeyringIdentity:i,targetWalletIdentities:m,targetWalletId:f}},Br=On;n();s();var Me=_(I());he();var Mn=e=>{let t=(0,Me.useRef)(null),o=(0,Me.useRef)(null),[a,i]=(0,Me.useState)("");return(0,Me.useEffect)(()=>{if(!(t.current&&o.current))return qe;let c=new IntersectionObserver(([m])=>{m.isIntersecting?i(""):i(l("wallet_extension_top_title_select_account"))},{root:t.current});return c.observe(o.current),()=>{c.disconnect()}},[e]),{title:a,wrapRef:t,titleRef:o}},Lr=Mn;var vr=()=>{let e=(0,Nr.useHistory)(),[t,o]=(0,K.useState)(""),a=P(Xo),i=a[t]||{},{targetKeyringIdentity:c,targetWalletIdentities:m,targetWalletId:d}=Br(t),[f,u]=(0,K.useState)([]),y=ie(),g=(0,K.useCallback)(async b=>{await dt().setScanedKeyStone(b),await Ye(y)},[y]),{hasDangerKeystoneScaned:w}=wr(),h=(0,K.useCallback)(async b=>{o(b.masterFingerprint);let $=await ur(b),Y=await mr($);await g({...b,accountsWithBalance:Y});let{device:Se,deviceVersion:ze}=b;Se===dr&&(!ze||pr(ze,"1.0.4")===-1)&&(w||(y(Kt("hasDangerKeystoneScaned",!0)),ho.showUpdateModal()))},[g]),S=b=>{let $=a[b];h($)},T=async()=>{let b=await ho.openModal(_r.getAccounts,{onBackBtnClick(){e.goBack()}}),$=a[b.masterFingerprint];$&&(b.accountsWithBalance=$.accountsWithBalance),h(b)};Wt(()=>{c?.masterFingerprint?S(c?.masterFingerprint):T()});let v=i?.accountsWithBalance,{title:j,wrapRef:A,titleRef:M}=Lr(v),Te=tt(f,m),[lt,kt]=ot({walletInfo:{keystoneInfo:At(i,["device","deviceId","masterFingerprint"])},selected:f,walletId:d,hardware:C.keystone}),Wo=async(b,$,Y=Q)=>{let Se=m.find(je=>je.index===b.index);Se&&await dt().updateWalletAddress(Se.walletId,{[Y]:$});let{accountsWithBalance:ze}=i,Cn=ze.map(je=>{if(b.index===je.index){let{addressType:In}=je;return{...je,addressType:{...In,[Y]:$},addressTypeUpdated:!0}}return je});g({...i,accountsWithBalance:Cn})},wn=((b={})=>$=>{let Y=$?.addressType?.[Q];if(b[Y])return b[Y];let Se=Qt(0).find(ze=>ze.type===Y)?.pathName||"";return Se?b[Y]=Se.split("|")?.[0]?.trim():b[Y]="",b[Y]})();return _e(),K.default.createElement(r.Box,{className:Oe.wrap},v?.length?K.default.createElement(r.FlexBox,{className:Oe.root,align:r.ALIGN.unset,direction:r.DIRECTION.vertical},K.default.createElement(V,{closeable:!1,bordered:!1,title:j,className:Oe.navigator}),K.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:Oe.wrap,ref:A},K.default.createElement(r.Box,{className:Oe.title,ref:M},l("wallet_extension_top_title_select_account")),K.default.createElement(r.Box,{className:Oe.desc},l("extension_wallet_hardware_wallet_text_multi_net")),v.map(b=>{let $=Te(b),Y=wn(b);return K.default.createElement(et,{account:b,selectType:$,setSelected:u,badgeSlot:Y?K.default.createElement(Le,{type:Le.TYPE.rect},Y):null},K.default.createElement(Ar,{account:b,selectType:$,updateAddressType:Wo}))})),K.default.createElement(rt,{selected:f,isSubmiting:lt,handleSubmit:kt})):K.default.createElement(Ce,null))};n();s();var x=_(I());var Or=_(re());n();s();var De=_(I()),Io=_(xe());n();s();var ke={root:"_root_14nif_1",closeWrap:"_closeWrap_14nif_5",closeIcon:"_closeIcon_14nif_13",closeText:"_closeText_14nif_17",stepWrap:"_stepWrap_14nif_23",stepItem:"_stepItem_14nif_30",active:"_active_14nif_37"};var Dn=({currentStep:e,handleClose:t})=>De.default.createElement(r.Box,{className:ke.root},De.default.createElement(r.Box,{className:ke.closeWrap},De.default.createElement(Z,{onClick:t,className:(0,Io.default)("okx-wallet-plugin-close",ke.closeIcon)}),e!==3?De.default.createElement(r.Box,{onClick:t,className:ke.closeText},l("wallet_extension_top_textbtn_skip")):null),De.default.createElement(r.Box,{className:ke.stepWrap},Array(4).fill(" ").map((o,a)=>De.default.createElement(r.Box,{key:a,className:(0,Io.default)(ke.stepItem,{[ke.active]:e===a})})))),yt=Dn;n();s();var ko=_(I());n();s();var Pr={root:"_root_6z8ot_1"};var Wn=({handleNext:e})=>ko.default.createElement(r.FlexBox,{className:Pr.root,align:r.ALIGN.center,justify:r.ALIGN.center,onClick:e},ko.default.createElement(Z,{className:"okx-wallet-plugin-to"})),ro=Wn;n();s();var W={root:"_root_15mve_1",wrap:"_wrap_15mve_9",title:"_title_15mve_13",titleColorfulGreen:"_titleColorfulGreen_15mve_22",titleColorfulYellow:"_titleColorfulYellow_15mve_25",desc:"_desc_15mve_28",firstScreenImg:"_firstScreenImg_15mve_36",secondAndFourthScreenImg:"_secondAndFourthScreenImg_15mve_42",thirdScreenImg:"_thirdScreenImg_15mve_45",footerWrap:"_footerWrap_15mve_48"};var Fn=({handleNext:e,handleClose:t})=>{let o=_t({light:"/cdn/assets/imgs/245/AB118B1F7E00FCCF.png",dark:"/cdn/assets/imgs/245/46D15BEDF89AD94E.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(yt,{currentStep:0,handleClose:t}),x.default.createElement(r.Box,{className:W.wrap},x.default.createElement(r.Box,{className:W.title},x.default.createElement("span",null,l("wallet_extension_top_title_added_seed_phrase1",{seedPhrase:l("wallet_extension_top_title_added_seed_phrase2")}))),x.default.createElement(B.Text,{className:W.desc},l("wallet_extension_top_maintitle_added_seed_phrase")),x.default.createElement(ut,{className:W.firstScreenImg,src:o})),x.default.createElement(ro,{handleNext:e}))},Kn=({handleNext:e,handleClose:t})=>{let o=_t({light:"/cdn/assets/imgs/245/4A7B68AABB586801.png",dark:"/cdn/assets/imgs/245/46C68B7C7B93F25B.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(yt,{currentStep:1,handleClose:t}),x.default.createElement(r.Box,{className:W.wrap},x.default.createElement(r.Box,{className:W.title},l("wallet_extension_top_title_unlock_hardware")),x.default.createElement(B.Text,{className:W.desc},l("wallet_extension_top_subtitle_confirm_unlock")),x.default.createElement(ut,{src:o,className:W.secondAndFourthScreenImg})),x.default.createElement(ro,{handleNext:e}))},Hn=({handleNext:e,handleClose:t})=>{let o=_t({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(yt,{currentStep:2,handleClose:t}),x.default.createElement(r.Box,{className:W.wrap},x.default.createElement(r.Box,{className:W.title},l("wallet_extension_top_title_usb_connected")),x.default.createElement(B.Text,{className:W.desc},l("wallet_extension_top_subtitle_after_connected")),x.default.createElement(ut,{src:o,className:W.thirdScreenImg})),x.default.createElement(ro,{handleNext:e}))},Un=({handleClose:e})=>{let t=_t({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return x.default.createElement(x.default.Fragment,null,x.default.createElement(yt,{currentStep:3,handleClose:e}),x.default.createElement(r.Box,{className:W.wrap},x.default.createElement(r.Box,{className:W.title},l("wallet_extension_top_title_asset_allocation1",{app:l("wallet_extension_top_title_asset_allocation2")})),x.default.createElement(B.Text,{className:W.desc},l("wallet_extension_top_subtitle_turnon_ledger")),x.default.createElement(ut,{src:t,className:W.secondAndFourthScreenImg})),x.default.createElement(r.Box,{className:W.footerWrap},x.default.createElement(k,{category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.lg,className:"wallet-management__button",onClick:e},l("wallet_extension_footer_btn_connect1"))))},Gn=[Fn,Kn,Hn,Un],zn=()=>{let e=ie(),t=(0,Or.useHistory)(),[o,a]=(0,x.useState)(0),i=Gn[o],c=(0,x.useCallback)(()=>{a(d=>d+1)},[]),m=(0,x.useCallback)(()=>{t.replace(Xe)},[t]);return(0,x.useEffect)(()=>{e(Kt("isLedgerImported",!0))},[e]),x.default.createElement(r.Container,{className:W.root},x.default.createElement(i,{handleNext:c,handleClose:m}))},Mr=zn;n();s();var X=_(I()),xt=_(re());n();s();var de=_(I());n();s();var Ae=_(I()),Dr=_(xe());n();s();var fe={root:"_root_f2f0f_1",SELECTED:"_SELECTED_f2f0f_8",selected:"_SELECTED_f2f0f_8",IMPORTED:"_IMPORTED_f2f0f_11",imported:"_IMPORTED_f2f0f_11",addressBox:"_addressBox_f2f0f_14",block:"_block_f2f0f_18",tag:"_tag_f2f0f_29",assets:"_assets_f2f0f_40",address:"_address_f2f0f_14"};var Ao=({account:e,onSelect:t,selectType:o,baseCoin:a})=>Ae.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,Dr.default)(fe.root,{[fe.SELECTED]:o===q,[fe.IMPORTED]:o===D}),onClick:()=>{o!==D&&t(e)}},Ae.default.createElement(r.Box,{className:fe.addressBox},ct.map((i,c)=>{let m=c;return Ae.default.createElement(r.Box,{className:fe.block,key:m},Ae.default.createElement(r.Box,{className:fe.tag},l(Vo[i])),Ae.default.createElement(B.DisplayAmount,{className:fe.assets,mode:B.CRYPTO,symbol:a.symbol,decimals:a.decimals,ellipsis:{tooltip:!0},precision:a.displayPrecision,isStableCoin:a.stableCoin},e[i]?.coinAmount),Ae.default.createElement(r.Box,{className:fe.address},e[i]?.address))})),Ae.default.createElement(ce,{selectType:o}));Ao.pickAssetAccounts=e=>{let t=[];return be(e)&&e.forEach(o=>{o?.hasAsset&&t.push(o)}),t};Ao.getSelectType=({account:e,selected:t,selectedAddressesInTargetIdentity:o,baseChain:a})=>{let i=c=>c.some(m=>{St(m)&&(m=m?.address);let d=!1;return ct.forEach(f=>{Be(e?.[f]?.address,m,{localType:a})&&(d=!0)}),d});return i(o)?D:i(t)?q:""};var Wr=Ao;n();s();var nt=_(I()),Fr=_(xe());n();s();var no=({account:e,selected:t,selectedAddressesInTargetIdentity:o=[],baseChain:a})=>{let i=c=>c.some(m=>(St(m)&&(m=m?.address),Be(m,e.address,{localType:a})));return i(o)?D:i(t)?q:""};n();s();var We={root:"_root_h2by8_1",SELECTED:"_SELECTED_h2by8_9",selected:"_SELECTED_h2by8_9",IMPORTED:"_IMPORTED_h2by8_12",imported:"_IMPORTED_h2by8_12",main:"_main_h2by8_15",asset:"_asset_h2by8_19",address:"_address_h2by8_26"};var To=({account:e,onSelect:t,selectType:o,baseCoin:a})=>{let{symbol:i,decimals:c}=a,{address:m}=e,d=e?.coinAmount;return nt.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,Fr.default)(We.root,{[We.SELECTED]:o===q,[We.IMPORTED]:o===D}),key:m,onClick:()=>{o!==D&&t(e)}},nt.default.createElement(r.Box,{className:We.main},nt.default.createElement(B.DisplayAmount,{className:We.asset,mode:B.CRYPTO,symbol:i,decimals:c,ellipsis:{tooltip:!0},precision:a?.displayPrecision,isStableCoin:a?.stableCoin},d),nt.default.createElement(r.Box,{className:We.address},e.address)),nt.default.createElement(ce,{selectType:o}))};To.pickAssetAccounts=e=>{let t=[];return be(e)&&e.forEach(o=>{Tt(o?.coinAmount,0)&&t.push(o)}),t};To.getSelectType=no;var So=To;n();s();var E=_(I());var bo=_(xe());he();n();s();var H={"retina-border-basic":"_retina-border-basic_t9fhu_1",retinaBorderBasic:"_retina-border-basic_t9fhu_1",root:"_root_t9fhu_29",SELECTED:"_SELECTED_t9fhu_37",selected:"_SELECTED_t9fhu_37",IMPORTED:"_IMPORTED_t9fhu_40",imported:"_IMPORTED_t9fhu_40",main:"_main_t9fhu_43",address:"_address_t9fhu_46",asset:"_asset_t9fhu_52",dontHaveAsset:"_dontHaveAsset_t9fhu_53",assetArrow:"_assetArrow_t9fhu_64",assetModal:"_assetModal_t9fhu_72",assetList:"_assetList_t9fhu_72",chainImage:"_chainImage_t9fhu_116",chainName:"_chainName_t9fhu_121",coinAmountDisplay:"_coinAmountDisplay_t9fhu_126",coinAmountDisplayText:"_coinAmountDisplayText_t9fhu_131",commonFooter:"_commonFooter_t9fhu_137"};var Eo=({account:e,onSelect:t,selectType:o})=>{let[a,i]=(0,E.useState)(!1),c=P(mt),m=yr(),d=c.filter(g=>g.baseChain===Q),{assetList:f=[]}=e,u=(0,E.useMemo)(()=>d.map(g=>{let{coinId:w}=g,h=Fo(g),S=f.find(v=>v.coinId===w);h.coinAmount=S?.coinAmount||"0";let T=m[w];return T&&(h.decimals=T.decimals,h.symbol=T.symbol,h.displayPrecision=T.displayPrecision,h.stableCoin=T.stableCoin),h}).sort((g,w)=>w.coinAmount-g.coinAmount),[d,f,m]),{address:y}=e;return E.default.createElement(E.default.Fragment,null,E.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,bo.default)(H.root,{[H.SELECTED]:o===q,[H.IMPORTED]:o===D}),key:y,onClick:()=>{o!==D&&t(e)}},E.default.createElement(r.Box,{className:H.main},E.default.createElement(r.Box,{className:H.address},e.address),e.hasAsset?E.default.createElement(r.Box,{className:H.asset,onClick:g=>{g.stopPropagation(),i(!0)}},E.default.createElement("span",null,l("wallet_extension_card_btn_view_assets")),E.default.createElement(Z,{className:(0,bo.default)("okx-wallet-plugin-right",H.assetArrow)})):E.default.createElement(r.Box,{className:H.dontHaveAsset},E.default.createElement("span",null,l("wallet_extension_card_btn_noearnings_yet")))),E.default.createElement(ce,{selectType:o})),E.default.createElement(Ze.Action,{onClose:()=>{i(!1)},className:H.assetModal,visible:a,hideCloseBtn:!0,alignBottom:!0,whiteboard:!0,title:null},E.default.createElement(r.Box,{className:H.assetList},u.map((g,w)=>{let h=w;return E.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:H.asset,key:h},E.default.createElement(Yt,{className:H.chainImage,src:g.image||Re}),E.default.createElement(r.Box,{className:H.chainName},E.default.createElement(xr,{maxWidth:"192px",text:g.chainName})),E.default.createElement(r.Box,{className:H.coinAmountDisplay},E.default.createElement(B.DisplayAmount,{className:H.coinAmountDisplayText,mode:B.CRYPTO,symbol:g.symbol,decimals:g.decimals,precision:g.displayPrecision,isStableCoin:g.stableCoin,ellipsis:{tooltip:!0}},g?.coinAmount)))})),E.default.createElement(r.Box,{className:H.commonFooter},E.default.createElement(k,{category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.lg,onClick:()=>i(!1),block:!0},l("wallet_extension_footer_btn_same_device_ok")))))};Eo.pickAssetAccounts=e=>{let t=[];return be(e)&&e.forEach(o=>{let{assetList:a=[]}=o||{};be(a)&&a.some(i=>Tt(i?.coinAmount,0))&&(o.hasAsset=!0,t.push(o))}),t};Eo.getSelectType=no;var Kr=Eo;n();s();var st=_(I());n();s();var Bo={showAll:"_showAll_dqqdk_1",showAllText:"_showAllText_dqqdk_11"};var jn=({hasAssetAccounts:e,renderList:t,handleUnFold:o})=>st.default.createElement(st.default.Fragment,null,t(e),st.default.createElement(r.Box,{className:Bo.showAll,onClick:o},st.default.createElement("span",{className:Bo.showAllText},l("wallet_extension_top_dropdown_show_assets")),st.default.createElement(Z,{className:"okx-wallet-plugin-arrow-small-down"}))),Hr=jn;n();s();var Fe=_(I()),Ur=_(re());n();s();var Lo={title:"_title_1nhzx_1",selector:"_selector_1nhzx_7"};var qn=({basePath:e,setBasePath:t})=>{let{hardware:o}=(0,Ur.useParams)(),i=N().get("baseChain"),c=(0,Fe.useMemo)(()=>ar?.[o]?.[i],[i,o]);return c?Fe.default.createElement(Fe.default.Fragment,null,Fe.default.createElement(B.Text,{className:Lo.title},l("wallet_addwallet_subtitle_hardware_wallet_select_a_hd_path")),Fe.default.createElement($t,{value:e,className:Lo.selector,type:$t.TYPE.input,options:c,onChange:({value:m})=>{t(m)},align:$t.DIRECTION.right})):null},Gr=qn;n();s();var me=_(I());n();s();var No={loadMore:"_loadMore_15zyi_1",loadMoreText:"_loadMoreText_15zyi_9"};var zr=8,$n=({renderList:e,scrollWrapRef:t,fetchAddress:o,firstPageAccounts:a})=>{let i=(0,me.useRef)(void 0),[c,m]=(0,me.useState)(zr),d=()=>{clearInterval(i.current),m(zr),i.current=setInterval(()=>{m(g=>Math.max(g-1,0))},1e3)};Dt(()=>{clearInterval(i.current)});let{data:f,noMore:u}=Ve(async g=>{d();let w=g?.pageNo||1,h=await o(w);return w===1&&(h=[...a,...h]),{list:h,pageNo:w+1}},{target:t,isNoMore:g=>g?.list?.length>=1e3}),y=f?.list||a;return me.default.createElement(me.default.Fragment,null,e(y),u?null:me.default.createElement(r.Box,{className:No.loadMore},me.default.createElement(Qe,null),me.default.createElement("span",{className:No.loadMoreText},c>0?l("wallet_extension_footer_loading_est_loading",{value:c}):l("wallet_extension_footer_loading_wait_amoment"))))},jr=$n;n();s();var so={root:"_root_yoqwy_1",title:"_title_yoqwy_7",icon:"_icon_yoqwy_13"};var vo={[Q]:Kr,[$e]:Wr,[bt]:So,[Et]:So},Yn=({baseChain:e,fetchAddress:t,basePath:o,setBasePath:a,firstPageAccounts:i,coinId:c,selected:m,selectedAddressesInTargetIdentity:d,...f})=>{let u=(0,de.useRef)(null),y=vo[e],g=y.pickAssetAccounts(i),w=g.length,[h,{setFalse:S}]=Jo(!!(w&&w!==i.length)),{baseCoin:T}=hr(c,!0),v=j=>j.map(A=>{let M=y.getSelectType({account:A,selected:m,selectedAddressesInTargetIdentity:d,baseChain:e});return de.default.createElement(y,{account:A,baseCoin:T,selectType:M,...f})});return de.default.createElement(r.FlexBox,{ref:u,className:so.root,align:r.ALIGN.unset,direction:r.DIRECTION.vertical},de.default.createElement(Gr,{basePath:o,setBasePath:a}),de.default.createElement(B.Text,{className:so.title},l("wallet_extension_top_title_select"),e===Q?de.default.createElement(ve,{className:so.icon,icon:"okx-wallet-plugin-information-circle",tooltip:{title:l("wallet_extension_toast_tooltip_try_switch"),placement:Ne.DIRECTION.bottom},size:ve.SIZE.xs}):null),h?de.default.createElement(Hr,{renderList:v,handleUnFold:S,hasAssetAccounts:g}):de.default.createElement(jr,{renderList:v,fetchAddress:t,scrollWrapRef:u,firstPageAccounts:i}))},qr=Yn;n();s();var at=_(I());var ht=_(re());var $r=()=>{let e=N(),{hardware:t}=(0,ht.useParams)(),o=e.get("baseChain"),[a,i]=(0,at.useState)(()=>t===C.ledger?o===bt?sr:rr:nr);return[a,i]},Yr=()=>{let e=[],t=N(),o=t.get("walletId"),a=t.get("baseChain");return(P(Pt).find(d=>(d.walletIdentities||[]).some(u=>u.walletId===o))?.walletIdentities||[]).forEach(d=>{let f=d?.account?.[a];f&&e.push(f)}),e},Vr=()=>{let e=N(),t=e.get("type"),o=e.get("baseChain"),a=Xt()?.length,[i,c]=(0,at.useState)([]);return[i,d=>{c(f=>t===te.addChain?[d]:f.some(u=>Be(u.address,d.address,{localType:o}))?f.filter(u=>!Be(u.address,d.address,{localType:o})):a+f.length>=1e3?(O.error({title:l("wallet_extension_hardware_wallet_notif_max_account",{num:1e3})}),f):[...f,d])}]},Vn=({isPopup:e,history:t,nextPage:o})=>{e?t.replace(o):globalThis.platform.openExtensionInPopup(o)},Rr=e=>{let[t,o]=(0,at.useState)(!1),{hardware:a}=(0,ht.useParams)(),i=N(),c=i.get("type"),m=i.get("baseChain"),d=i.get("walletId"),f=(0,ht.useHistory)(),u=ie(),y=P(Ot),g=P(vt),w=(0,at.useMemo)(()=>e.map(S=>{let T={};return T.path=S.path,T.address=S.address,m===$e&&ct.forEach(v=>{let{address:j,path:A,publicKey:M}=S[v];T[v]={address:j,path:A,publicKey:M}}),T}),[e,m]);return[t,async()=>{try{let S={accounts:w,hardware:a,baseChain:m,walletId:d,type:c},T=or[C.ledger],v=await ir()||{};if(v?.productName&&(T=`${ne[C.ledger]} ${v.productName}`),S.ledgerInfo={productName:T},!y){u(qt(S)),f.push(`${jt}?from=${Jt.HARDWARE}`);return}if(!g){O.error({title:l("wallet_extension_hardware_wallet_notif_please_unlock")});return}Mt({hardwarewallet_brand:a,device_name:T}),o(!0),await u(to(S)),await Ye(u);let j=oe;[te.addAccount,te.addChain].includes(c)&&(j=`${er}?from=seedVerify`);let A=jo()===Uo;if(c===te.addChain&&A){u(pt()),f.go(-2);return}if(c===te.addAccount&&A){u(pt()),f.go(-2);return}Vn({isPopup:A,history:f,nextPage:j}),o(!1)}catch(S){o(!1);let T=S;T.message===Nt&&O.error(l("extension_wallet_addwallet_toast_wallets_added",{amount:1e3})),T.message===Lt&&O.error(l("wallet_home_toast_network_error"))}},u]};n();s();var ao={wrap:"_wrap_jx54d_1",root:"_root_jx54d_6",footerWrap:"_footerWrap_jx54d_10",accountList:"_accountList_jx54d_15",account:"_account_jx54d_15",accountLeft:"_accountLeft_jx54d_28",address:"_address_jx54d_31",path:"_path_jx54d_38",assets:"_assets_jx54d_44",accountRight:"_accountRight_jx54d_49"};var Rn=()=>{let{hardware:e}=(0,xt.useParams)(),t=N(),o=t.get("hideBack"),a=t.get("baseChain"),i=Yr(),[c,m]=$r(),[d,f]=Vr(),u=cr({baseChain:a})||[],{coinId:y}=u?.[0]||{},g=(0,xt.useHistory)(),[w,h]=(0,X.useState)([]),S=async Te=>{if(!e)return[];try{return await gr({hardware:e,page:Te,basePath:c,baseChain:a,coinId:y})}catch(lt){let kt=lt;switch(kt.name){case"LockedDeviceError":Rt.openModal(Vt.lockedDevice,{baseChain:a,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{g.goBack()}});break;case"InvalidStateError":case"TransportStatusError":Rt.openModal(Vt.wrongAppToGetAddress,{baseChain:a,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{g.goBack()}});break;case"TransportError":break;default:Rt.openModal(Vt.connectError,{onButtonClick:async()=>{if(kt.name==="TransportOpenUserCancelled"&&(await ft.requestLedgerDevice()).length){j();return}window.location.reload()},onCloseBtnClick:()=>{g.goBack()}});break}throw lt}},[T,v]=(0,X.useState)(!0),j=async()=>{v(!0);let Te=await S(0);h(Te),v(!1)};(0,X.useEffect)(()=>{y&&j()},[c,y]);let[A,M]=Rr(d);return _e(),X.default.createElement(r.Box,{className:ao.wrap},T?X.default.createElement(Ce,null):X.default.createElement(r.FlexBox,{className:ao.root,align:r.ALIGN.unset,direction:r.DIRECTION.vertical},X.default.createElement(V,{closeable:!1,backable:!o,title:l("wallet_extension_top_maintitle_select_address")}),X.default.createElement(qr,{basePath:c,setBasePath:m,firstPageAccounts:w,selected:d,selectedAddressesInTargetIdentity:i,baseChain:a,onSelect:f,coinId:y,fetchAddress:S}),X.default.createElement(r.Box,{className:ao.footerWrap},X.default.createElement(k,{category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.lg,className:"wallet-management__button",disabled:!d.length,loading:A,onClick:M},d.length?l("wallet_extension_footer_btn_connecting",{value:d.length}):l("wallet_extension_footer_btn_connect")))))},Xn=e=>{let t=(0,xt.useHistory)(),a=N().get("baseChain");return Object.keys(vo).includes(a)?X.default.createElement(Rn,{...e}):(O.error(l("wallet_extension_top_error_parameters")),t.replace(oe),null)},Xr=Xn;n();s();var se=_(I());n();s();var it=_(I()),Qr=_(xe());n();s();var Ke={disabledButton:"_disabledButton_9hbfa_1",disabledButtonEvm:"_disabledButtonEvm_9hbfa_9",imported:"_imported_9hbfa_18",logo:"_logo_9hbfa_27",circle:"_circle_9hbfa_30"};function io({children:e,image:t,chainName:o,selected:a,handleClick:i,imported:c}){let m=(0,Qr.default)({[Ke.imported]:c},{"chains-choose-network-modal__chains-list-card":!0},{"chains-choose-network-modal__chains-list-card__selected":a});return it.default.createElement("div",{className:m,onClick:i},e||it.default.createElement("div",{className:"chains-choose-network-modal__chains-list-card__custom-wrap"},it.default.createElement(Yt,{alt:"image",className:"chains-choose-network-modal__chains-list-card__chain-icon",src:t||Re}),it.default.createElement("span",{className:"chains-choose-network-modal__chains-list-card__chain-name"},o),c&&it.default.createElement(k,{type:"grey",size:"small",disabled:!0,className:Ke.disabledButton},l("extension_wallet_import_active_wallet"))))}n();s();var U=_(I());var Qn=({chainsList:e=[],description:t=""})=>{let o=(0,U.useMemo)(()=>e.length?e.slice(0,5):[],[e]);return U.default.createElement("div",{className:"choose-network-list-card__logos-wrap"},U.default.createElement(Ne,{title:t,maxWidth:260,placement:Ne.DIRECTION.bottomLeft},o.map((a,i)=>U.default.createElement("img",{className:Ke.logo,alt:"",key:i,style:{zIndex:i},src:a.image||Re})),U.default.createElement(Z,{className:"okx-wallet-plugin-more choose-network-list-card__more",style:{zIndex:o.length}})))};function Po({chainsList:e,imported:t,titleKey:o="wallet_extension_select_network_title_evm_network",remindKey:a="wallet_extension_select_network_toast_desc",descriptionKey:i,networkCountKey:c,hideRightIcon:m=!1}){let d=(0,U.useMemo)(()=>l(i,{network:e.map(u=>u.chainName).join(l("extension_wallet_text_punctuation_mark"))}),[e,i,l]),f;return c?typeof c=="function"?f=c(e):f=l(c,{number:e.length}):f=l("wallet_extension_select_network_text_support_network",{number:e.length}),U.default.createElement("div",{className:"choose-network-list-card__EVM-wrap"},U.default.createElement("div",{className:"choose-network-list-card__title"},U.default.createElement("span",null," ",l(o)),m?null:U.default.createElement(Ne,{title:l(a),maxWidth:224,placement:Ne.DIRECTION.bottom},U.default.createElement(Z,{className:`okx-wallet-plugin-information-circle ${Ke.circle}`}))),U.default.createElement("p",{className:"choose-network-list-card__explain"},f),U.default.createElement("p",{className:"choose-network-list-card__logos-wrap"},U.default.createElement(Qn,{chainsList:e,description:d})),t&&U.default.createElement(k,{type:"grey",size:"small",disabled:!0,className:Ke.disabledButtonEvm},l("extension_wallet_import_active_wallet")))}n();s();var wt=_(I());var Mo=_(re()),Oo=_(go());n();s();var Zn={[Ee]:{titleKey:"wallet_extension_select_network_title_evm_network",remindKey:"wallet_extension_select_network_toast_desc",networkCountKey:e=>l("wallet_extension_select_network_text_support_network",{number:e.length}),importPrivateKeyConfig:{supportNetworksKey:"wallet_extension_select_network_toast_desc2"},importLedgerConfig:{supportNetworksKey:"wallet_extension_hardware_tooltip_support_range"}},[$o]:{titleKey:"wallet_extension_aptos_tab_title_compatible_network",remindKey:"wallet_extension_aptos_tooltip_desc_compatible_network",networkCountKey:e=>l("wallet_extension_aptos_tab_desc_compatible_network",{num:e.length}),importPrivateKeyConfig:{supportNetworksKey:"wallet_extension_transaction_aptos_title_available_network"},importLedgerConfig:{supportNetworksKey:"wallet_extension_hardware_tooltip_support_range"}},[Bt]:{titleKey:"wallet_extension_solana_tab_title_network",remindKey:"wallet_extension_solana_tooltip_svm_network_address",networkCountKey:e=>l("wallet_extension_solana_tab_desc_network",{number:e.length}),importPrivateKeyConfig:{supportNetworksKey:"wallet_extension_solana_tooltip_support_networks"},importLedgerConfig:{supportNetworksKey:"wallet_extension_hardware_tooltip_support_range"}},[qo]:{titleKey:"wallet_extension_btc_tab_title_network",remindKey:"wallet_extension_btc_tooltip_svm_network_address",networkCountKey:e=>l("wallet_extension_btc_tab_desc_network",{number:e.length}),importPrivateKeyConfig:{supportNetworksKey:"wallet_extension_btc_tooltip_support_networks"},importLedgerConfig:{supportNetworksKey:"wallet_extension_hardware_tooltip_support_range"}},[Yo]:{titleKey:"wallet_extension_select_network_tab_cosmos",remindKey:"wallet_extension_select_network_toast_desc_cosmos",networkCountKey:e=>l("wallet_extension_select_network_text_support_cosmos",{num:e.length}),importPrivateKeyConfig:{supportNetworksKey:"wallet_extension_select_network_toast_cosmos_support"},importLedgerConfig:{supportNetworksKey:"wallet_extension_hardware_tooltip_support_range"}}},Zr=Cr.map(e=>{let t=Zn[e];return t?{chain:e,...t}:null}).filter(e=>Boolean(e));var Jr=(e=!1)=>{let t=N(),o=(0,Mo.useHistory)(),a=t.get("type"),i=t.get("walletId"),c=P(Ro),m=[];if(a==="addChain")if(i&&c[i]){let{account:d}=c[i];m=Object.keys(d||{})}else e&&(O.error(l("wallet_extension_top_error_parameters")),o.replace(oe));return m},en=()=>{let e=Jr(!0),t=P(mt);return(0,wt.useMemo)(()=>Zr.map(({chain:o,...a})=>({chain:o,config:a,allChains:t.filter(i=>i.baseChain===o),imported:e.includes(o)})),[e,t])},tn=()=>{let e=Jr(),t=P(mt);return(0,wt.useMemo)(()=>[$e,Et].map(a=>{let i=t.find(c=>c.baseChain===a);return{imported:e.includes(a),...i}}),[e,t])},on=e=>{let t=(0,Mo.useHistory)(),o=N(),a=o.get("type"),i=o.get("walletId");return(0,wt.useCallback)(async()=>{let c=await ft.hasConnectedLedger(),m=!1;if(c||(m=(await ft.requestLedgerDevice()).length===0),m){(a===te.addAccount||a===te.addChain)&&t.goBack();return}let d=`${ue}/${C.ledger}?${Oo.default.stringify({baseChain:e})}`;a&&i&&(d+=`&${Oo.default.stringify({type:a,walletId:i})}`),t.push(d)},[t,a,i,e])};n();s();var Ct={root:"_root_f8vjo_1",chainList:"_chainList_f8vjo_6",footerWrap:"_footerWrap_f8vjo_10"};var Jn=[Ee,Bt],es=()=>{let e=N(),t=e.get("type"),o=e.get("hideBack"),[a,i]=(0,se.useState)(""),c=en(),m=tn(),d=on(a),f=c?.filter(({chain:u})=>Jn.includes(u))||[];return se.default.createElement(r.FlexBox,{className:Ct.root,align:r.ALIGN.unset,direction:r.DIRECTION.vertical},se.default.createElement(V,{closeable:!1,backable:!o,className:Ct.navigator,title:l("wallet_extension_top_maintitle_select_network")}),se.default.createElement(r.Box,{className:Ct.chainList},f.map(({chain:u,config:y,allChains:g,imported:w})=>{let{titleKey:h,networkCountKey:S,importLedgerConfig:{supportNetworksKey:T}}=y;return se.default.createElement(io,{imported:w,selected:u===a,handleClick:()=>{w||i(u)}},se.default.createElement(Po,{titleKey:h,networkCountKey:S,descriptionKey:T,chainsList:g,imported:w,hideRightIcon:!0}))}),m.map(u=>se.default.createElement(io,{imported:u.imported,key:u.chainName,selected:u.baseChain===a,handleClick:()=>{u.imported||i(u.baseChain)},...u}))),se.default.createElement(r.Box,{className:Ct.footerWrap},se.default.createElement(k,{category:k.CATEGORY.fill,type:k.TYPE.highlight,size:k.SIZE.lg,onClick:d,className:"wallet-management__button",disabled:!a},t==="addChain"?l("wallet_extension_footer_btn_add_network"):l("wallet_addwallet_btn_conncet_hardware_wallet"))))},rn=es;n();s();var ye=_(I());var an=_(go());n();s();var lo=(e,t)=>`${e}${t}`,nn=(e,t)=>!!(e?.connectId&&e.connectId===t.connectId&&e.firstEvmAddress===t.firstEvmAddress);n();s();var ge=_(I()),Do=_(xe());n();s();var He={root:"_root_r4apb_1",recommend:"_recommend_r4apb_21",brandInfo:"_brandInfo_r4apb_24",icon:"_icon_r4apb_29",name:"_name_r4apb_34",arrow:"_arrow_r4apb_39"};var ts=e=>{let{icon:t,wallet:o,onClick:a}=e,i=(0,ge.useCallback)(()=>{a(o)},[o,a]);return ge.default.createElement(r.Box,{onClick:i,className:He.root},ge.default.createElement(r.Box,{className:He.brandInfo},ge.default.createElement(ve,{className:(0,Do.default)(t,He.icon)}),ge.default.createElement(r.Box,{className:He.name},o.name),o.recommend?ge.default.createElement(Le,{className:He.recommend,type:Le.TYPE.rect,color:Le.COLOR.green},l("wallet_onekey_tag_new")):null),ge.default.createElement(ve,{size:ve.SIZE.xs,className:(0,Do.default)("okx-wallet-plugin-right",He.arrow)}))},co=ts;n();s();var mo={root:"_root_pxrbs_1",navigator:"_navigator_pxrbs_4",list:"_list_pxrbs_7"};var sn=new Zt,os=({history:e})=>{let[t,o]=(0,ye.useState)([]),a=(0,ye.useRef)(void 0),i=async()=>{try{let u=await sn.searchDevices();u.length?(o(u),a.current=null):a.current=setTimeout(()=>{i()},3e3)}catch{e.goBack()}};Wt(i),Dt(()=>{a.current&&clearTimeout(a.current)});let c=Je(),m=(u,y)=>c.some(g=>{if(Ft(g.initialType)){let{onekeyInfo:w}=g;return nn(w,{connectId:u,firstEvmAddress:y})}return!1}),d=ie(),f=async({connectId:u,deviceId:y,deviceType:g})=>{try{let w=await sn.getFirstEvmAddress({dispatch:d,connectId:u,deviceId:y,deviceType:g});if(m(u,w)){O.success({title:l("wallet_extension_hardware_wallet_notif_hardware_connected")});return}e.push(`${ue}/${C.onekey}?${an.default.stringify({firstEvmAddress:w,connectId:u})}`)}catch{}};return ye.default.createElement(r.Container,{className:mo.root,loading:t.length?!1:{loadingText:l("wallet_onekey_text_searching_for_equipment")}},ye.default.createElement(V,{stickyStyle:{zIndex:3},className:mo.navigator,closeable:!1,bordered:!1,title:l("wallet_onekey_title_connect_device")}),ye.default.createElement(r.Box,{className:mo.list},t.map(u=>ye.default.createElement(co,{key:u.connectId,wallet:u,onClick:f,icon:"okx-wallet-plugin-equipment"}))))},ln=os;n();s();var G=_(I());var mn=_(re());he();n();s();var po=_(I());var cn=e=>{let t=Je(),o=(0,po.useMemo)(()=>t?.find(c=>{if(Ft(c.initialType)){let{firstEvmAddress:m,connectId:d}=c?.onekeyInfo||{};return lo(d,m)===e}return!1})||{},[t,e]),a=(0,po.useMemo)(()=>o.walletIdentities||[],[o]),i=(0,po.useMemo)(()=>a.length?a[0].walletId:"",[a]);return{targetKeyringIdentity:o,targetWalletIdentities:a,targetWalletId:i}};n();s();var Ue={wrap:"_wrap_19eua_1",root:"_root_19eua_6",list:"_list_19eua_10",desc:"_desc_19eua_16",loadMore:"_loadMore_19eua_22"};var rs=new Zt,ns=()=>{let e=N(),t=e.get("connectId"),o=e.get("firstEvmAddress"),a=lo(t,o),{connectedOnekey:i}=P(Ht),c=i?.[a],m=(0,G.useRef)(null),{data:d,noMore:f}=Ve(async A=>{if(!c)return{list:[]};let M=A?.pageNo??0;return{list:await rs.getAccounts({page:M,onekeyInfo:c}),pageNo:M+1}},{target:m,isNoMore:A=>A?.list?.length>=1e3}),u=d?.list||c?.accountsWithBalance||[],[y,g]=(0,G.useState)([]),{targetWalletIdentities:w,targetWalletId:h}=cn(a),S=tt(y,w),[T,v]=ot({walletInfo:{onekeyInfo:At(c,["connectId","deviceId","deviceType","firstEvmAddress"])},selected:y,walletId:h,hardware:C.onekey}),j=(0,mn.useHistory)();return(0,G.useEffect)(()=>{c||(O.error(l("wallet_extension_top_error_parameters")),j.replace(oe))},[c,j,a]),_e(),G.default.createElement(r.Box,{className:Ue.wrap},G.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:Ue.root},G.default.createElement(V,{bordered:!1,closeable:!1,className:Ue.navigator,title:l("wallet_extension_onekey_title_import_account")}),G.default.createElement(r.Box,{ref:m,className:Ue.list},G.default.createElement(r.Box,{className:Ue.desc},l("extension_wallet_hardware_wallet_text_multi_net")),u?.map(A=>{let M=S(A);return G.default.createElement(et,{key:A.index,account:A,selectType:M,setSelected:g})}),f?null:G.default.createElement(r.Box,{className:Ue.loadMore},G.default.createElement(Qe,null))),G.default.createElement(rt,{selected:y,isSubmiting:T,handleSubmit:v})),G.default.createElement(Ce,{visible:!u?.length}))},dn=ns;n();s();var It=_(I());n();s();n();s();var uo=_(I());var pn=_(re()),un=_(kn()),_n=_(go());var fn=()=>{let e=(0,pn.useHistory)(),{isLedgerImported:t}=P(Ht),o=(0,uo.useMemo)(()=>({[C.ledger](){t?e.push(Xe):e.push(Gt)},[C.trezor](){e.push(`${ue}/${C.trezor}?${_n.default.stringify({baseChain:Q})}`)},async[C.onekey](){try{await navigator.usb.requestDevice({filters:un.ONEKEY_WEBUSB_FILTER}),e.push(zt)}catch{}},[C.keystone](){e.push(`${ue}/${C.keystone}`)}}),[t,e]);return(0,uo.useCallback)(({brand:i})=>{Qo({hardwarewallet_brand:i}),Zo(),o[i]()},[o])};n();s();var _o={root:"_root_gtfj8_1",navigator:"_navigator_gtfj8_4",wrap:"_wrap_gtfj8_7"};var gn=zo()===Go,ss=[{name:ne[C.keystone],icon:"okx-wallet-plugin-keystone",brand:C.keystone,recommend:!0},lr()?{name:ne[C.ledger],icon:"okx-wallet-plugin-ledger",brand:C.ledger,recommend:!1}:null,gn?null:{name:ne[C.onekey],icon:"okx-wallet-plugin-onekey",brand:C.onekey,recommend:!1},gn?null:{name:ne[C.trezor],icon:"okx-wallet-plugin-trezor",brand:C.trezor,recommend:!1}].filter(e=>Boolean(e)),as=()=>{let e=fn();return It.default.createElement(r.Container,{className:_o.root},It.default.createElement(V,{closeable:!1,backable:!1,bordered:!1,className:_o.navigator,title:l("wallet_addwallet_maintitle_connect_hareware_wallet")}),It.default.createElement(r.Box,{className:_o.wrap},ss.map(t=>It.default.createElement(co,{key:t.brand,wallet:t,icon:t.icon,onClick:e}))))},yn=as;n();s();var z=_(I()),hn=_(re());n();s();var Ge={wrap:"_wrap_174i9_1",root:"_root_174i9_6",list:"_list_174i9_10",desc:"_desc_174i9_16",loadMore:"_loadMore_174i9_22"};var is=new fr,ls=()=>{let t=N().get("walletId"),[o,a]=(0,z.useState)(!1),i=async A=>{let M=A?.nextPage||0;return{list:await is.getAccounts({page:M}),nextPage:M+1}},c=(0,z.useRef)(null),{data:m,loading:d,noMore:f}=Ve(i,{target:c,isNoMore:A=>A?.list?.length>=1e3,onError:()=>{a(!0)}}),u=Je(),[y,g]=(0,z.useState)([]),w=u?.find(({walletIdentities:A})=>A.some(M=>M.walletId===t)),{walletIdentities:h=[]}=w||{},S=tt(y,h),[T,v]=ot({selected:y,walletId:t,hardware:C.trezor}),j=(0,hn.useHistory)();return _e(),z.default.createElement(r.Box,{className:Ge.wrap},z.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:Ge.root},z.default.createElement(V,{bordered:!1,closeable:!1,className:Ge.navigator,title:l("wallet_extension_onekey_title_import_account")}),z.default.createElement(r.Box,{ref:c,className:Ge.list},z.default.createElement(r.Box,{className:Ge.desc},l("extensions_hardware_support_text_evm_only",{brand:ne[C.trezor]})),m?.list?.map(A=>{let M=S(A);return z.default.createElement(et,{key:A.index,account:A,selectType:M,setSelected:g})}),f?null:z.default.createElement(r.Box,{className:Ge.loadMore},z.default.createElement(Qe,null))),z.default.createElement(rt,{selected:y,isSubmiting:T,handleSubmit:v})),z.default.createElement(Ze.Prompt,{btnFull:!0,visible:o,infoType:!1,alignBottom:!1,hideCloseBtn:!!t,title:l("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed"),text:l("wallet_add_wallet_modal_hardware_wallet_conncet_failed_tip"),onConfirm:()=>{window.location.reload()},confirmBtnProps:{type:k.TYPE.highlight,size:k.SIZE.lg},confirmText:l("wallet_manage_wallet_btn_reconncet_hardware_wallet"),onClose:()=>{j.goBack()}}),z.default.createElement(Ce,{visible:d||o}))},xn=ls;var cs={[C.keystone]:vr,[C.ledger]:Xr,[C.onekey]:dn,[C.trezor]:xn},ms=()=>pe.default.createElement(ae.Switch,null,pe.default.createElement(ae.Route,{path:Ut,component:yn,exact:!0}),pe.default.createElement(ae.Route,{path:Gt,component:Mr,exact:!0}),pe.default.createElement(ae.Route,{path:Xe,component:rn,exact:!0}),pe.default.createElement(ae.Route,{path:zt,component:ln,exact:!0}),pe.default.createElement(ae.Route,{path:`${ue}/:hardware`,render:e=>{let t=e?.match?.params?.hardware,o=cs[t];return o?pe.default.createElement(o,null):pe.default.createElement(ae.Redirect,{to:Ut})},exact:!0}),pe.default.createElement(ae.Redirect,{to:Ut})),mg=ms;export{mg as default};
//# sourceMappingURL=ConnectHardware-D23XNOEG.js.map
