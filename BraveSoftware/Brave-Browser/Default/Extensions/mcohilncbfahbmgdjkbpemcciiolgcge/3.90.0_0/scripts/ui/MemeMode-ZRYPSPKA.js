import{a as It,b as oe,c as Mt,d as Pt,e as yt}from"./chunk-X2R527OY.js";import{a as at,b as ct,d as gt,f as St,k as Tt,l as _t,m as Ct}from"./chunk-YLPOVMK6.js";import{a as vt,d as Bt,e as Nt}from"./chunk-GF5ARTFE.js";import{b as bt}from"./chunk-BFLVJJ2Z.js";import{a as xt,b as Rt}from"./chunk-LB5XQY7F.js";import{a as wt}from"./chunk-TRICLBVU.js";import{a as Dt,b as d}from"./chunk-FS336U6P.js";import{a as Et}from"./chunk-5ALT5IWS.js";import{a as At}from"./chunk-SGITHY4U.js";import{a as Lt}from"./chunk-BMAGLTJ7.js";import{b as K}from"./chunk-RQ4NNINW.js";import"./chunk-5DQKP6TK.js";import{j as H}from"./chunk-H5RNSDSN.js";import"./chunk-OWPVBYY3.js";import{a as lt,b as dt,c as ht,d as Me,e as Le}from"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import{c as ft,e as pt}from"./chunk-E6SXR3B6.js";import{d as z,e as it}from"./chunk-A7FGCMOW.js";import{c as Ie,d as kt}from"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import{d as F}from"./chunk-CJAFGYQK.js";import{a as te}from"./chunk-HSSW2VTC.js";import{m as Z,p as ee,w as mt,x as ut}from"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import{Ba as D,Da as x,Ea as M,Sa as st,ab as nt,ka as rt,pa as Q,va as _}from"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import{a as ot}from"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import{a as I,g as J,l as Ce}from"./chunk-AP4E6GDF.js";import{$,Eb as qe,F as k,J as ve,Ke as tt,M as Be,N as we,_ as q,aa as Ne,ba as Qe,ca as Fe,da as Ve,dc as Ge,ea as Oe,ec as We,fc as He,gc as Ke,ha as G,ic as Ye,ie as je,kd as Xe,l as A,m as y,me as $e,nb as Ue,ne as Je,oe as ze,pe as Ze,q as Re,qe as et,s as be,yc as W}from"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-UIZGYUZK.js";import{a as j}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{H as xe,J as _e}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as po}from"./chunk-FB3ILH2L.js";import{b as S}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as v,M as ke,d as ye,l as u,u as De}from"./chunk-4C5HF6J2.js";import"./chunk-BY6XCDJZ.js";import"./chunk-WQGQVXPA.js";import"./chunk-EI7BJC6V.js";import"./chunk-WZALYVUQ.js";import"./chunk-4ARIYUS3.js";import{f as h,o as n,q as i}from"./chunk-UWURTNRY.js";n();i();var Te=h(S());n();i();var P=h(S()),co=h(j());n();i();var B=h(S());n();i();var Ee=h(S());v();var Qt=()=>{let{buyStore:s,sellStore:e}=d(),{currentBuyPreset:t,setBuyValue:o,buyValue:r}=s,{currentSellPreset:a,setSellValue:m,sellValue:c}=e,{amountList:f=[]}=t,{amountList:p=[]}=a;(0,Ee.useEffect)(()=>{ke(f)||r.type==="custom"||o({value:f[r.index]||"0",type:"select",index:r.index})},[o,f]),(0,Ee.useEffect)(()=>{if(ke(p)||c.type==="custom")return;let g=p[c.index]||"0";m({value:g,type:"select",index:c.index})},[m,p])};var ho=({inputAmount:s,custom:e,defaultBuyAmountList:t,buyStore:o,setAmountUsed:r,setCustomUsed:a})=>{e==="1"?(o.setBuyValue({value:"",type:"custom",index:3}),a(!0),H("custom")):s&&(t.includes(s)?(o.setBuyValue({value:s,type:"select",index:t.findIndex(m=>m===s)}),r(!0),H("inputAmount")):o.setBuyValue({value:t[0]||"0",type:"select",index:0}))},go=({inputPercent:s,custom:e,defaultSellPercentList:t,sellStore:o,setPercentUsed:r,setCustomUsed:a})=>{e==="1"?(o.setSellValue({value:"",type:"custom",index:3}),o.setIsPercentMode(!0),a(!0),H("custom")):s&&(o.setIsPercentMode(!0),t.includes(s)?(o.setSellValue({value:s,type:"custom",index:3}),r(!0),H("inputPercent")):o.setSellValue({value:t[0]||"0",type:"select",index:0}))},Ft=()=>{let{queryParams:s}=Rt(),{buyStore:e,sellStore:t,configStore:o}=d(),{currentMode:r}=o,{currentBuyPreset:a}=e,{currentSellPreset:m}=t,{amountList:c}=a,{amountList:f}=m,p=s?.get?.("inputAmount"),g=s?.get?.("inputPercent"),C=s?.get?.("custom"),[L,E]=(0,B.useState)(!1),[w,U]=(0,B.useState)(!1),[N,Pe]=(0,B.useState)(!1);(0,B.useEffect)(()=>{r==="buy"&&!L&&!N&&ho({inputAmount:p,custom:C,defaultBuyAmountList:c||[],buyStore:e,setAmountUsed:E,setCustomUsed:Pe})},[p,C,r,c,L,N]),(0,B.useEffect)(()=>{r==="sell"&&!w&&!N&&go({inputPercent:g,custom:C,defaultSellPercentList:f||[],sellStore:t,setPercentUsed:U,setCustomUsed:Pe})},[p,g,C,r,f,w,N]),Qt()};n();i();var Ut=h(S());n();i();var Vt=h(S());n();i();var re=h(S());var So=()=>{let{buyStore:s,sellStore:e,configStore:t}=d(),{currentMode:o}=t,r=(0,re.useCallback)(f=>{let p=f.coinAmountOriginalDec||f.amountNum,g={...f,amountNum:p};e.onSocketUpdateFromTokenBalance(g),s.onSocketUpdateFromTokenBalance(g)},[e,s]),a=e.fromToken?.tokenContractAddress,m=s.fromToken?.tokenContractAddress,c=(0,re.useMemo)(()=>o==="sell"?a:m,[a,m,o]);return{updateTokenBalance:r,currentTokenAddress:c}},se=So;var To=()=>{let{updateTokenBalance:s,currentTokenAddress:e}=se(),t=wt(),{chainId:o,accountId:r,userUniqueId:a,walletId:m,userWalletAddress:c,businessType:f}=t;return(0,Vt.useCallback)(async()=>{if(e&&o&&r&&a&&m&&c){let p=await Bt({tokenAddress:e,chainId:o,accountId:r,userUniqueId:a,walletId:m,userWalletAddress:c,businessType:f});p&&s(p)}},[o,e,r,a,m,c,f,s])},Ot=To;var ko=()=>{let{accountStore:s,memePositionStore:e,configStore:t,commonStore:o}=d(),{computedAccountId:r}=s,{userUniqueId:a}=o,{computedNativeTokenInfo:m}=t,{chainId:c}=m||{},{fetchPositionList:f}=e,p=vt(f,300),{updateTokenBalance:g}=se(),C=Ot();(0,Ut.useEffect)(()=>{let L=z({isPri:!0,needLogin:!0,subscribeParams:[{channel:dt.WALLET_ASSET}],onListenData:E=>{!E||(p({chainId:c,accountId:r,userUniqueId:a}),g(E))},onListenError:C,onListenReconnected:C});return()=>{L()}},[c,r,a,p,g,C])},qt=ko;n();i();var Gt=h(S());function Wt(){let{accountStore:s}=d(),{computedAccountWalletAddresses:e}=s;(0,Gt.useEffect)(()=>{let t=()=>{};return e&&(t=it(e)),()=>{t?.()}},[e])}n();i();n();i();var Yt=h(S());n();i();function ne(){let{buyStore:s,sellStore:e,configStore:t}=d(),{currentMode:o}=t;return(o==="sell"?e.fromToken:s.toToken)||{}}n();i();var Ht=(s,e)=>{let t={userUniqueId:s,tokenDetailList:[{chainId:e.chainId,contractAddress:e.tokenContractAddress,tokenSymbol:e.tokenSymbol,precision:e.decimals}]};return M.post(Xe,t)},Kt=s=>(Array.isArray(s)?s:[s]).map(t=>({channel:lt.DEX_MARKET_TX_CHANNEL,chainId:String(t?.chainId),tokenAddress:t?.tokenContractAddress}));var _o=()=>{let s=ne(),{commonStore:e}=d();(0,Yt.useEffect)(()=>{!s.tokenContractAddress||!s.chainId||!e.userUniqueId||Ht(e.userUniqueId,s)},[e.userUniqueId,s.tokenContractAddress,s.chainId])},Xt=_o;n();i();var Zt=h(S());n();i();var Jt=h(S());n();i();var jt=async({tokenContractAddress:s,accountId:e=void 0,chainId:t,walletAddress:o=void 0})=>{let r=performance.now(),[a,m]=await k(M.get(je,{params:{tokenContractAddress:s,accountId:e,chainId:t,walletAddress:o}})),c=performance.now()-r;return Re.info(`[Market-API]: fetchLatestInfo: ${c?.toFixed?.(2)}ms`),!a&&m?m.data:{error:a}};n();i();var $t=h(S());var Co=()=>{let{buyStore:s,sellStore:e,configStore:t}=d(),{currentMode:o}=t;return(0,$t.useCallback)(r=>{let a={...r,chainId:Number(r.chainId)};o==="sell"?e.onSocketUpdateFromToken(a):s.onSocketUpdateToToken(a)},[o,e,s])},ie=Co;var Io=()=>{let{accountStore:s}=d(),{computedAccountId:e,computedSignWalletAddress:t}=s,o=ie();return(0,Jt.useCallback)(async r=>{let a=await jt({tokenContractAddress:r.tokenContractAddress,chainId:r.chainId,accountId:e,walletAddress:t});if(a?.error)return;let m={...r,price:a.price,marketCap:a.marketCap};o(m)},[o,e])},zt=Io;var Mo=()=>{let s=ne(),e=ie(),t=zt();(0,Zt.useEffect)(()=>{if(!s.tokenContractAddress||!s.chainId)return()=>{};let o=Kt(s),r=z({subscribeParams:o,onListenData:a=>{e(a[0])},onListenError:()=>{t(s)},onListenReconnected:()=>{t(s)}});return()=>{r()}},[s.tokenContractAddress,s.chainId,e])},eo=Mo;var Lo=()=>{Xt(),eo()},to=Lo;n();i();var Y=h(S()),oo=h(j());var Eo=({currency:s,currentWallet:e,walletInfo:t,keyringIdentityTypeEnum:o,t:r,dispatch:a,onBack:m})=>{let{commonStore:c,accountStore:f,reset:p}=d();at();let g=(0,oo.useHistory)();(0,Y.useEffect)(()=>{G.setRuntimeContext({history:g,toLocale:r,dispatch:a,walletInfo:t,onBack:m})},[r,g,a,t,m]),(0,Y.useEffect)(()=>{e&&f.setWalletConfig(e)},[e]),(0,Y.useEffect)(()=>(c.getUserUnit(s),()=>{p()}),[]),(0,Y.useEffect)(()=>{f.setKeyringIdentityTypeEnum(o)},[o])},ro=Eo;n();i();var T=h(S()),O=h(j());n();i();var R=h(S()),me=h(j()),io=h(po());n();i();var Ae=h(S());var Ao=()=>Ae.default.createElement("div",{className:"mt-50"},Ae.default.createElement(xe,{pastDelay:!1,error:!0,delayTime:1e4,alt:"dexGenericError",retry:()=>{Be(ve().pathname,"_self")}})),so=Ao;n();i();var ae=h(S());var Po=()=>{let{commonStore:s,configStore:e}=d(),{currentMode:t}=e,{fromToken:o}=Nt(),{chainId:r,isNativeToken:a,tokenContractAddress:m}=o,{visibleAddFunds:c,setAddFundsVisible:f}=s,p=ot(),g=(0,ae.useMemo)(()=>p?!0:t==="sell",[p,t]);return ae.default.createElement(It,{visible:c,params:{chainId:r,tokenContractAddress:a?"":m,receiveOnly:g},onBack:()=>{f(!1)}})},no=y(Po);var yo=[q,$],Do=({children:s,onBack:e})=>{let{commonStore:t,configStore:o,buyStore:r,sellStore:a}=d(),{showNavigator:m,title:c,closeable:f}=Mt({configStore:o,buyStore:r,sellStore:a}),p=(0,me.useLocation)(),g=(0,me.useHistory)(),{isTelegramMiniApp:C}=G.global,{Navigator:L}=G.components,{setAddFundsVisible:E}=t;(0,R.useEffect)(()=>{E(!1)},[]),At();let w=()=>{e?e(g.goBack,yo.includes(p.pathname)):g.goBack()};return R.default.createElement(ct,{fallbackComponent:so},R.default.createElement("div",{className:(0,io.default)("universe-swap background-base-primary",oe.wrapper)},m?R.default.createElement(L,{title:c,onBack:w,closeable:f}):null,R.default.createElement("div",{id:"meme-swap-container",className:C?oe.memeTelegramContainer:oe.extensionContainer},s)),R.default.createElement(no,null))},ao=y(Do);var mo=(0,T.lazy)(()=>import("./Buy-DLHFE4EQ.js")),xo=(0,T.lazy)(()=>import("./Sell-7ITPYL7C.js")),Ro=(0,T.lazy)(()=>import("./Configure-FHMQCWOI.js")),bo=(0,T.lazy)(()=>import("./TokenList-G4MYBHCZ.js")),vo=(0,T.lazy)(()=>import("./HighRisk-3CTVGY4X.js")),Bo=(0,T.lazy)(()=>import("./Presets-3MX3MNSD.js")),wo=(0,T.lazy)(()=>import("./PresetEdit-IYTXLDEV.js")),No=({onBack:s})=>T.default.createElement(ao,{onBack:s},T.default.createElement(T.Suspense,null,T.default.createElement(O.Switch,null,[{path:q,component:mo,exact:!0},{path:$,component:xo,exact:!0},{path:Qe,component:Ro,exact:!0},{path:Ne,component:bo,exact:!0},{path:Fe,component:vo,exact:!0},{path:Ve,component:Bo,extract:!0},{path:Oe,component:wo,extract:!0}].map(t=>T.default.createElement(O.Route,{key:t.path,path:t.path,component:t.component,exact:t.exact})),T.default.createElement(O.Redirect,{from:q,to:{pathname:mo,search:new we().getAll()},strict:!0,exact:!0})))),uo=No;var Qo=({currency:s,currentWallet:e,keyringIdentityTypeEnum:t,walletInfo:o,onBack:r,t:a,dispatch:m})=>{ro({currency:s,currentWallet:e,walletInfo:o,keyringIdentityTypeEnum:t,t:a,dispatch:m,onBack:r}),Wt(),qt(),to();let{accountStore:{address:c,setFromChainId:f,getAddressByChainId:p},configStore:{fetchConfig:g,computedConfig:C,setCurrentMode:L}}=d();(0,P.useEffect)(()=>{let U=p(W.SOLANA_MAINNET);Et.tradePreCheck({chainId:W.SOLANA_MAINNET,userWalletAddress:U})},[]),(0,P.useEffect)(()=>{_.setTags({address:c})},[c]),(0,P.useEffect)(()=>{g()},[]);let E=(0,co.useLocation)();(0,P.useEffect)(()=>{if(E){let{isBuyMode:U,isSellMode:N}=xt(E);U?L("buy"):N&&L("sell")}},[E,L]),(0,P.useEffect)(()=>{C&&f(C?.nativeTokenInfo?.chainId)},[C]),bt(),Ft();let{initialized:w}=Ct();return w?P.default.createElement(uo,{onBack:r}):null},lo=(0,P.memo)(y(Qo));n();i();n();i();v();var ue=class{constructor(){this.loading=!0;this.setLoading=e=>{this.loading=e};this.fromToken=null;this.setFromToken=e=>{this.fromToken=e};this.toToken=null;this.setToToken=e=>{this.toToken=e};this.onSocketUpdateToToken=e=>{F(e,this.toToken)&&this.setToToken({...this.toToken,...e})};this.onSocketUpdateFromTokenBalance=e=>{F(e,this.fromToken)&&this.setFromToken({...this.fromToken,amountNum:e.amountNum})};this.buyValue={value:"0",index:0,type:"select"};this.setBuyValue=e=>{this.buyValue=e};this.buyPresetList=[];this.setBuyPresetList=e=>{this.buyPresetList=e};this.currentBuyPresetId="";this.setCurrentBuyPresetId=e=>{this.currentBuyPresetId=e};this.updateCurrentPresetAmountList=e=>{let t=this.buyPresetList.map(o=>o.id===this.currentBuyPresetId?{...o,amountList:e}:o);this.setBuyPresetList(t)};this.buyPresetPageEditState=!1;this.setBuyPresetPageEditState=e=>{this.buyPresetPageEditState=e};this.editBuyPreset={isEdit:!0,value:{}};this.setEditBuyPreset=e=>{this.editBuyPreset=e};this.memeBtnStatus=Z;this.setMemeBtnStatus=e=>{this.memeBtnStatus=e};A(this)}get computedBuyNumber(){if(this.buyValue.type==="custom"){let e=this.buyValue.value||"0";return J(e)?"0":new I.BigNumber(e).toString(10)}return this.currentBuyPreset?.amountList?.[this.buyValue.index]}get computedBuyTokenSymbol(){return u(this,"toToken.tokenSymbol")}get computedBuyNumberIsValid(){return new I.BigNumber(this.computedBuyNumber).gt(0)}get currentBuyPreset(){return this.buyPresetList.find(e=>e.id===this.currentBuyPresetId)||{}}};n();i();var ce=class{constructor(){this.initState=!1;this.setInitState=e=>{this.initState=e};this.positionList=[];this.setPositionList=e=>{this.positionList=K.filterHiddenTokenList(e)};this.fetchPositionLoading=!0;this.setFetchPositionLoading=e=>{this.fetchPositionLoading=e};this.cancelFetchRef=null;this.fetchPositionList=async({accountId:e,userUniqueId:t,chainId:o,minAmountThreshold:r})=>{if(!e||!t||!o)return;this.cancelFetchRef&&this.cancelFetchRef.abort(),this.setFetchPositionLoading(!0),this.cancelFetchRef=D();let[a,m]=await k(M.get($e,{params:{accountId:e,userUniqueId:t,chainId:o,minAmountThreshold:r},signal:this.cancelFetchRef?.signal}));a&&_.stuff(a),m&&m.data&&this.setPositionList(m?.data),this.setFetchPositionLoading(!1),this.setInitState(!0)};A(this)}isCancel(e){return x(e)}};n();i();v();var le=class{constructor(){this.loading=!0;this.setLoading=e=>{this.loading=e};this.fromToken=null;this.setFromToken=e=>{this.fromToken=e};this.onSocketUpdateFromToken=e=>{F(e,this.fromToken)&&this.setFromToken({...this.fromToken,...e})};this.onSocketUpdateFromTokenBalance=e=>{F(e,this.fromToken)&&this.setFromToken({...this.fromToken,amountNum:e.amountNum})};this.toToken=null;this.setToToken=e=>{this.toToken=e};this.sellValue={value:"",type:"custom",index:0};this.setSellValue=e=>{this.sellValue=e};this.isPercentMode=!0;this.setIsPercentMode=e=>{this.isPercentMode=e};this.sellPresetList=[];this.setSellPresetList=e=>{this.sellPresetList=e};this.currentSellPresetId="";this.setCurrentSellPresetId=e=>{this.currentSellPresetId=e};this.updateCurrentPresetAmountList=e=>{let t=this.sellPresetList.map(o=>o.id===this.currentSellPresetId?{...o,amountList:e}:o);this.setSellPresetList(t)};this.sellPresetPageEditState=!1;this.setSellPresetPageEditState=e=>{this.sellPresetPageEditState=e};this.editSellPreset={isEdit:!0,value:{}};this.setEditSellPreset=e=>{this.editSellPreset=e};this.memeBtnStatus=Z;this.setMemeBtnStatus=e=>{this.memeBtnStatus=e};A(this)}get computedSellNumber(){try{let e=Math.min(this.fromToken?.decimals||0,12);if(this.sellValue.type==="custom"&&!this.isPercentMode){let r=this.sellValue.value||"0";return J(r)?"0":new I.BigNumber(r).toString(10)}let t=this.fromToken?.amountNum||"0";if(this.sellValue.type==="custom"&&this.isPercentMode)return I.floorMul(I.div(this.sellValue.value||"0",100),t,e);let o=this.currentSellPreset?.amountList?.[this.sellValue.index];return I.floorMul(o,t,e)}catch(e){return _.stuff(e),"0"}}get computedSellTokenSymbol(){return u(this,"fromToken.tokenSymbol")}get computedSellTokenBalanceLessAmount(){return u(this,"fromToken.computedSellNumber")>u(this,"fromToken.amountNum")}get computedSellNumberIsValid(){return new I.BigNumber(this.computedSellNumber).gt(0)}get currentSellPreset(){return this.sellPresetList.find(e=>e.id===this.currentSellPresetId)||{}}};n();i();var de=class{constructor(){this.searchValue="";this.setSearchValue=e=>{this.searchValue=e};this.defaultSearchLoading=!0;this.setDefaultSearchLoading=e=>{this.defaultSearchLoading=e};this.searchLoading=!1;this.setSearchLoading=e=>{this.searchLoading=e};this.commonSearchState=!1;this.setCommonSearchState=e=>{this.commonSearchState=e};this.normalTokenList=[];this.unsupportedTokenList=[];this.fetchDefaultTokenList=async({chainId:e,computedAccountId:t,userUniqueId:o})=>{this.setDefaultSearchLoading(!0),this.setCommonSearchState(!1);let r={chainId:e,accountId:t,userUniqueId:o,minAmountThreshold:K.getMinAmountThresholdParam()},[a,m]=await k(M.get(Je,{params:r}));if(this.searchValue){this.setDefaultSearchLoading(!1);return}a&&(_.stuff(a),this.normalTokenList=[],this.unsupportedTokenList=[]),m&&m.data&&(this.normalTokenList=K.filterHiddenTokenList(m?.data),this.unsupportedTokenList=[]),this.setDefaultSearchLoading(!1)};this.cancelSearchRef=null;this.fetchSearchTokenList=async({chainId:e,computedAccountId:t,userUniqueId:o})=>{if(!this.searchValue)return;this.cancelSearchRef&&this.cancelSearchRef.abort(),this.setSearchLoading(!0),this.setCommonSearchState(!0),this.cancelSearchRef=D();let[r,a]=await k(M.get(ze,{params:{chainId:e,accountId:t,userUniqueId:o,inputContent:this.searchValue},signal:this.cancelSearchRef?.signal}));if(!this.searchValue){this.setSearchLoading(!1);return}r&&!this.isCancel(r)&&(_.stuff(r),this.normalTokenList=[],this.unsupportedTokenList=[]),a&&a.data&&(this.normalTokenList=a?.data?.memeList,a?.data?.memeUnsupportList?this.unsupportedTokenList=a?.data?.memeUnsupportList.map(m=>{let c=m;return c.unSupportedMeme=!0,c}):this.unsupportedTokenList=[]),this.setSearchLoading(!1)};this.highRiskToken=null;this.setHighRiskToken=e=>{this.highRiskToken=e};this.highRiskCallBack=()=>{};this.setHighRiskCallBack=e=>{this.highRiskCallBack=e};A(this)}isCancel(e){return x(e)}};n();i();v();n();i();var fe=class{constructor(){this.currentMode="buy";this.setCurrentMode=e=>{this.currentMode=e};this.presetStorageKey=ee;this.currentChainID=W.SOLANA_MAINNET;this.initLoading=!0;this.setInitLoading=e=>{this.initLoading=e}}get computedIsBuy(){return this.currentMode==="buy"}get computedIsSell(){return this.currentMode==="sell"}};var pe=class extends fe{constructor(){super();this.configList=[];this.setConfigList=t=>{this.configList=t};this.fetchConfig=async()=>{let[t,o]=await k(Lt({sceneType:0}));if(t){_.error(Q.MEME_SWAP_PRE_EXECUTE_ERR,{error:t});return}o&&o.data&&(this.setConfigList(o.data),this.setInitLoading(!1))};te(this),this.presetStorageKey=ee}get computedConfig(){return this.configList.find(t=>ye(t.chainId)===this.currentChainID&&t.sceneType===0)}get computedNativeTokenInfo(){return u(this.computedConfig,"nativeTokenInfo",{})}};n();i();v();n();i();v();var he=class{constructor(){this.QUOTE_TIMEOUT=5e3;this.quoteLoading=!1;this.quoteData=he.INIT_QUOTE_DATA;this.resetQuote=()=>{this.cleanQuoteTimer(),this.cacheParams=null,this.setQuoteData(he.INIT_QUOTE_DATA)};this.isAutoQuote=!1;this.cancelRef=null;this.cleanQuoteTimer=()=>{this.cancelRef&&(this.cancelRef.abort(),this.cancelRef=null),this.timerRef&&clearTimeout(this.timerRef)};this.initLoading=!0;this.timerRef=null;this.cacheParams=null;this.startingPoll=async(e,t)=>{if(this.cacheParams=e,this.timerRef&&clearTimeout(this.timerRef),!this.isQuoteImmediate(this.cacheParams||{})){this.setIsInitLoading(!1),this.resetQuote();return}await this.fetchQuoteAction(this.cacheParams,t),clearTimeout(this.timerRef),this.timerRef=setTimeout(async()=>{this.setIsAutoQuote(!0),await this.startingPoll(this.cacheParams,t)},this.QUOTE_TIMEOUT)};this.fetchQuote=De(this.startingPoll,qe)}setQuoteLoading(e){this.quoteLoading=e}setQuoteData(e){this.quoteData=e}setIsAutoQuote(e){this.isAutoQuote=e}setIsInitLoading(e){this.initLoading=e}quoteStart(){this.setQuoteLoading(!0),this.cleanQuoteTimer()}quoteEnd(){this.setIsInitLoading(!1),this.setQuoteLoading(!1),this.setIsAutoQuote(!1)}getQuoteUrl(){return et}async fetchQuoteAction(e,t){this.quoteStart(),this.cancelRef=D();let[o,r]=await k(M.post(this.getQuoteUrl(),e,{signal:this.cancelRef.signal}));if(!x(o)&&o){let a=o||{};Le.isOpen&&Le?.close(),this.setQuoteData(a)}else this.setQuoteData(r||{}),t?.(r);this.quoteEnd()}isQuoteImmediate(e){return!!e?.chainId&&!!e?.fromTokenAddress&&!!e?.toTokenAddress&&new I.BigNumber(e?.amount).gt(0)}get computedQuoteCompleted(){return this.quoteData.error_code}get computedQuoteSuccuss(){return this.quoteData.error_code==="0"}get computedQuoteIsError(){return this.computedQuoteCompleted&&this.computedQuoteCompleted!=="0"&&this.computedQuoteCompleted!==Ye}get computedQuoteErrorMsg(){return u(this.quoteData,"error_message","")}get computedCustomQuoteLoading(){return!this.isAutoQuote&&this.quoteLoading}get computedQuoteNetworkError(){return this.quoteData.status==="ERR_NETWORK"}get computedQuoteIsBuyHoneypot(){return this.computedQuoteCompleted&&u(this.quoteData,"error_code")===Ke}get computedQuoteIsBlackAddress(){return this.computedQuoteCompleted&&u(this.quoteData,"error_code")===Ge}get computedQuoteIsNewAddress(){return this.computedQuoteCompleted&&u(this.quoteData,"error_code")===We}},X=he;X.INIT_QUOTE_DATA={data:null,detailMsg:"",error_code:"",error_message:"",msg:"",status:""};var ge=class extends X{constructor(){super(),te(this)}getQuoteUrl(){return Ze}async fetchQuoteAction(e,t){this.quoteStart(),this.cancelRef=D();let[o,r]=await k(pt(e,{signal:this.cancelRef.signal}));if(x(o)){this.quoteEnd();return}if(o){let a=o||{};this.setQuoteData(a)}else this.setQuoteData(r||{}),t?.(r);this.quoteEnd()}get jitoIsSuccess(){return u(this.computedCurrentDefiPlatformInfo,"isEnableMev")==="1"}get computedPriorityFeeInfo(){let e=u(this.quoteData,"data.networkFeeInfo.normal")??{},t=u(this.quoteData,"data.networkFeeInfo.mev[0]")??{},o=Me(e);return{mevPriorityFeeInfo:Me(t),nonMevPriorityFeeInfo:o}}get computedFromTokenValue(){return u(this.quoteData,"data.commonDexInfo.fromTokenValue","0")}get computedToTokenAmount(){return u(this.computedCurrentDefiPlatformInfo,"receiveAmount","0")}get computedToTokenValue(){return u(this.computedCurrentDefiPlatformInfo,"toTokenValue","0")}get computedNativeTokenPrice(){return u(this.quoteData,"data.commonDexInfo.nativeTokenPrice",0)}get quoteNetWorkFeeOfMoney(){return u(this.computedCurrentDefiPlatformInfo,"quoteNetWorkFeeOfMoney","")}get computedQuoteLiquidityError(){return this.computedQuoteCompleted&&!u(this.quoteData,"data.defiPlatformInfoList[0]")}get computedCurrentDefiPlatformInfo(){return u(this.quoteData,"data.defiPlatformInfoList[0]",{})}get computedSwapOnOtherDapp(){let e=String(u(this.quoteData,"isSupportDappTrade"))==="1";return this.computedQuoteCompleted&&e}get computedQuoteSafemoon(){if(this.computedQuoteCompleted){let e=u(this.quoteData,"data.commonDexInfo.fromToken",{}),t=u(this.quoteData,"data.commonDexInfo.toToken",{});if(Ie(e))return e?.tokenSymbol;if(Ie(t))return t?.tokenSymbol}return""}get computedGetRouterList(){return u(this.computedCurrentDefiPlatformInfo,"dexRouterList")}get computedGetEstimateGasFee(){return u(this.computedCurrentDefiPlatformInfo,"estimateGasFee")}get computedGetQuoteFrom(){return u(this.quoteData,"data.commonDexInfo.fromToken",{})||{}}get computedGetQuoteTo(){return u(this.quoteData,"data.commonDexInfo.toToken",{})||{}}get computedGetQuoteFromAmount(){return u(this.quoteData,"data.commonDexInfo.fromTokenAmount")}get computedGetQuoteFromPrice(){return u(this.quoteData,"data.commonDexInfo.fromTokenValue")}get computedGetQuoteToAmount(){return u(this.computedCurrentDefiPlatformInfo,"receiveAmount")}get computedGetQuoteToPrice(){return u(this.computedCurrentDefiPlatformInfo,"toTokenValue")}get computedQuoteId(){return u(this.computedCurrentDefiPlatformInfo,"quoteId","")}get computedQuoteIsInvalid(){return this.computedQuoteIsError||this.computedQuoteNetworkError||this.computedQuoteLiquidityError}get computedServiceFeeInfo(){return u(this.computedCurrentDefiPlatformInfo,"serviceFeeInfo",{})}get computedAutoSlippage(){return u(this.computedCurrentDefiPlatformInfo,"autoSlippageInfo.referenceSlippage","")||u(this.computedCurrentDefiPlatformInfo,"autoSlippageInfo.autoSlippage","")}get mevUnstableShowLevel(){return u(this.computedCurrentDefiPlatformInfo,"mevUnstableShowLevel",-1)}get solPrice(){return u(this.quoteData,"data.commonDexInfo.nativeTokenPrice",0)}get quoteDiffValThreshold(){return u(this.computedCurrentDefiPlatformInfo,"quoteDiffValThreshold")}get quoteDiffPercentThreshold(){return u(this.computedCurrentDefiPlatformInfo,"quoteDiffPercentThreshold")}get computedValueDifference(){return kt({pay:this.computedFromTokenValue,receive:this.computedToTokenValue,quoteDiffValThreshold:this.quoteDiffValThreshold,quoteDiffPercentThreshold:this.quoteDiffPercentThreshold})}get computedQuoteIsSellHoneypot(){return this.computedQuoteCompleted&&u(this.quoteData,"data.commonDexInfo.code")===He}get computedRate(){let e=this.computedGetQuoteFromAmount,t=this.computedGetQuoteToAmount;return e&&t?Ce(new I.BigNumber(t).div(e).toString(10),{needBillionMillionUnit:!1}):""}get computedToFromRate(){let e=this.computedGetQuoteFromAmount,t=this.computedGetQuoteToAmount;return e&&t?Ce(new I.BigNumber(e).div(t).toString(10),{needBillionMillionUnit:!1}):""}};n();i();v();var Se=class{constructor(){this.isSwapLoading=!1;this.cacheVerifyCallDataResult=null;this.setCacheVerifyCallDataResult=e=>{this.cacheVerifyCallDataResult=e};this.checkCallData=async({chainId:e,responseData:t,requestParams:o,accountId:r,signWalletAddress:a})=>{let m=await nt({callData:t?.callData?.data,chainId:e,hasReferralCommission:t?.hasReferralCommission,address:a});return m.success||this.setCacheVerifyCallDataResult({...m,walletId:r,requestCommissionAddress:o?.serviceFeeInfo?.referralCommissionAddress}),m};this.logVerifyCallDataResult=({txHash:e,orderId:t})=>{this.cacheVerifyCallDataResult&&!this.cacheVerifyCallDataResult.success&&(st({...this.cacheVerifyCallDataResult,txHash:e,orderId:t}),this.setCacheVerifyCallDataResult(null))};A(this,{},{autoBind:!0})}setIsSwapLoading(e){this.isSwapLoading=e}getSolanaUnsignedTx(e){let t=u(e,"originData.mevConfig.enableMev"),o=e?.unsignedTx||"{}";try{return t?JSON.parse(o).array:[JSON.parse(o)]}catch(r){throw new Error(r)}}getJitoTxData(e){let t=new ht,o=this.getSolanaUnsignedTx(e);return Promise.all(o.map(t.txData))}async onSolanaSwap({data:e,signedTransactions:t,txArray:o}){try{let r=await yt({walletId:e.walletId,swapParams:e.calldataParams,signedTransactions:t,isMemeMode:!0,orderData:e?.originData});if(_.info(Q.MEME_SWAP_BROADCAST_PARAMS,{data:{...e,solanaBroadcastParams:r,unsignedTxArray:o,signedTransactions:t}}),!Ue()){let c=r?.dexMultiMetaSaveOrderParam?.chainId;rt({chain_id:c,chain_name:be.chainInfo?.[c]||"",tx_hash:r?.updateMultiOrderInfo?.transactionHash,trade_mode:mt.MEME,terminal:ut.WEB})}let[a,m]=await k(ft(r));if(a){this.broadcastError(a,{...e,solanaBroadcastParams:r,unsignedTxArray:o,signedTransactions:t,broadcastRes:m,tags:{userWalletAddress:e.userWalletAddress}});return}return _.info(Q.MEME_SWAP_BROADCAST_SUCCESS,{data:{...e,solanaBroadcastParams:r,unsignedTxArray:o,signedTransactions:t,broadcastRes:m}}),this.logVerifyCallDataResult({txHash:m?.data?.broadcastResult?.data?.transactionHash,orderId:m?.data?.broadcastResult?.data?.orderId}),m}catch(r){throw this.broadcastError(r,{...e,unsignedTxArray:o,signedTransactions:t}),new Error(r?.error_message)}}broadcastError(e,t){_e.error({title:e?.error_message||tt("swaptrade_home_toast_broadcast_failed"),placement:_e.DIRECTION.top}),_.error(Q.MEME_SWAP_BROADCAST_ERROR,{error:e,...t})}};var b=class{constructor(){this.reset=()=>{this.commonStore=new Tt(this),this.accountStore=new St(this),this.sendTransactionStore=new _t,this.configStore=new pe,this.buyStore=new ue,this.sellStore=new le,this.memePositionStore=new ce,this.quoteStore=new ge,this.memeTokenListStore=new de,this.memeSwapStore=new Se};this.reset()}static getInstance(){return b.instance||(b.instance=new b),b.instance}},fo=b;var Fo=({localeData:s,...e})=>(Pt(),Te.default.createElement(gt,{localeData:s,isDev:!0,noRemoteData:!0,customRender:t=>t},Te.default.createElement(Dt.Provider,{value:fo.getInstance()},Te.default.createElement(lo,{...e})))),Na=y(Fo);export{Na as default};
//# sourceMappingURL=MemeMode-ZRYPSPKA.js.map
