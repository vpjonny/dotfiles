import{b as In}from"./chunk-DE2ULVLJ.js";import{b as Cn,f as kn,g as hn,h as yn}from"./chunk-NUCRH2OY.js";import{a as xn}from"./chunk-H2BYDG3J.js";import{b as mn,c as cn}from"./chunk-27ZRRZY4.js";import"./chunk-SNOTXOHI.js";import{a as fn,b as _n,d as kt,e as Tn}from"./chunk-AB2IWCIA.js";import{k as un}from"./chunk-RS5XCICJ.js";import"./chunk-C7TFGGMX.js";import{a as ln}from"./chunk-MNWYUYGW.js";import{a as gn}from"./chunk-CLIHNSYH.js";import{a as pn}from"./chunk-KDZWFWCG.js";import"./chunk-PEKFKA6I.js";import{a as dn}from"./chunk-2KBIS3G2.js";import{a as z}from"./chunk-RCXPUQYC.js";import{a as an}from"./chunk-ASMDBF47.js";import{a as sn}from"./chunk-VFWATNQY.js";import{a as Ft}from"./chunk-MRB6SSKA.js";import{a as rn}from"./chunk-52JFFT56.js";import{a as nn}from"./chunk-VIGV7LK4.js";import"./chunk-NP6SC5QM.js";import{a as Xo,b as Zo,d as en}from"./chunk-Z3CN3PP7.js";import{e as Jo}from"./chunk-JCVVB72F.js";import"./chunk-6CJRBF2P.js";import"./chunk-3KJMTMXK.js";import"./chunk-IWYRUFZN.js";import{a as on}from"./chunk-ARYCEY4U.js";import{a as tn}from"./chunk-7SVXGEVR.js";import"./chunk-CVLOEZ64.js";import"./chunk-ZBCYRIHC.js";import{a as $o}from"./chunk-XI5NMQGM.js";import"./chunk-FLQKBEJO.js";import"./chunk-5TBKSXR4.js";import{a as Yo}from"./chunk-STNL5AMR.js";import"./chunk-X2JMOXWP.js";import"./chunk-T2UFMQPE.js";import{a as Ct}from"./chunk-X7JU5VY4.js";import"./chunk-ITLSSVGE.js";import{a as Je}from"./chunk-M2YFVDKX.js";import"./chunk-PWVBSLOL.js";import{c as Vo}from"./chunk-DZPLORMY.js";import"./chunk-5WI3NR4H.js";import{a as me,e as qo}from"./chunk-AOZHPYH5.js";import"./chunk-W25M53MS.js";import"./chunk-HLTJYEGI.js";import"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import"./chunk-3MLYZLAT.js";import{a as zo}from"./chunk-LHFDZX73.js";import{a as Qo,b as Ko}from"./chunk-VUWWQCMX.js";import{g as jo}from"./chunk-OHHYJNZI.js";import{a as fe}from"./chunk-5EFGCLI4.js";import{a as ge}from"./chunk-B4MQLH4C.js";import"./chunk-VWVRJUMU.js";import{d as we,e as Wo,f as Ho}from"./chunk-EUAAIPZO.js";import{a as Mo,b as Do}from"./chunk-GCJ2PJNQ.js";import"./chunk-A4R53AVX.js";import{a as Oo}from"./chunk-TJ3NTWVS.js";import"./chunk-634WRNGH.js";import{a as Go}from"./chunk-ZFAUEPQW.js";import{a as _t}from"./chunk-RN5VSY2K.js";import"./chunk-YPWPNJRG.js";import"./chunk-GMVPA3MX.js";import"./chunk-P355XBV4.js";import{d as Ro}from"./chunk-C4TBDTQO.js";import"./chunk-6AUQLYPZ.js";import{a as Tt}from"./chunk-UPIYMC4Q.js";import{c as de,e as Uo,f as Ke}from"./chunk-ZUO5BDO3.js";import"./chunk-A7EUFORV.js";import{a as se}from"./chunk-QEPQGEPL.js";import{P as Bo}from"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import"./chunk-75EAYNWR.js";import"./chunk-D6LKASPV.js";import"./chunk-DKVOSSSH.js";import"./chunk-FWL474H4.js";import{A as Lo,a as bo,l as L}from"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import{l as So,m as Eo,t as No}from"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import{j as Fo}from"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import{a as Nt}from"./chunk-XUGHAFHG.js";import"./chunk-B5L26Z2J.js";import{d as gt}from"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import{a as Po}from"./chunk-A2QCZBSN.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-DL6F7SAI.js";import"./chunk-QU7KCAT2.js";import"./chunk-CQHSO2TF.js";import"./chunk-6HJJJE2I.js";import"./chunk-T5XGANNY.js";import"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import{a as xo,b as yo}from"./chunk-LZL7SWT5.js";import"./chunk-OYIB3B2O.js";import"./chunk-OBLKTTHP.js";import"./chunk-LQJXR5XX.js";import"./chunk-NQGIYDUG.js";import"./chunk-QTCVWDVR.js";import{a as Ao,b as vo}from"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import{c as co,d as mt,f as ct,h as po,i as lo,l as bt,m as pt,n as uo}from"./chunk-JYCBCMDP.js";import{m as ao}from"./chunk-CBZ2RV36.js";import"./chunk-QMHGGMPE.js";import{a as wo}from"./chunk-GVYIP5Q5.js";import{Y as so,e as io}from"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import{g as go,v as ko}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import{a as Io}from"./chunk-BD5XO4WL.js";import{d as st}from"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{d as oo,j as no}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import{b as Ee}from"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{h as oe,m as ho,o as Et}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import{a as ft}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{j as Co,o as dt}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{a as O,i as at,n as it}from"./chunk-KC2XLVFC.js";import{qa as Se,ra as je}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import{h as ue}from"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{a as fo}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import{b as ot}from"./chunk-KGMP5AO5.js";import{c as ro}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-U5DGHXS4.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import{a as W,b as Ie}from"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{D as vt,S as nt,X as rt,Z as eo,ca as Pt,e as Xt,ea as to,m as Ve,y as Zt,z as $t}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import{c as mo,f as ze}from"./chunk-OKGWI7CU.js";import{C as zt,a as Yt,c as ye,d as tt,f as qt,h as ie,i as He,j as Ye,p as Vt}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as h}from"./chunk-3FMJDUGT.js";import{c as jt}from"./chunk-2O5TMJZM.js";import{O as Qt}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{E as Kt,Nb as Jt,Z as qe,gb as At,y as le}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{k as We,p as c}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as rr}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as H,d as te,o as To,q as St,r as ut}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as Qe,t as lt}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as _o}from"./chunk-FB3ILH2L.js";import{b as E}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as Oe,Q as Ue,a as Ut,b as Ot,g as Wt,r as Ht}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as v,o as i,q as s}from"./chunk-UWURTNRY.js";i();s();var ne=v(E());i();s();var Ze=v(E());var Pn=v(rr());i();s();Oe();var ar=e=>{let t=z(e?.chainId),n=e?.image;return Ut(n)?e.image=n[0]:Ot(n)&&(e.image=null),{token:e,baseCoin:t}},wn=ar;i();s();var ir=(e={},t={},n=!0,o=!1)=>{let a=Se(),l=e.address,p=ft(),m=_n(),u=ge(p||""),r=O(async()=>{u({all_confirmation:"cancel",trade:"add_token"}),await m(l,!1),await ue(a)}),{loading:d,onClick:_}=se(r),f={actionType:L.ACTION_TYPE.CANCEL,btnText:c("wallet_dapp_connection_btn_reject"),onClick:_,loading:d},g=O(async()=>{try{u({all_confirmation:"confirm",trade:"add_token"});let y=await ct(t.localType,p),I={...e,contractAddress:l,blockChain:y.shortName,localType:t.localType,chainId:t.chainId};await yo(I),await m(l,!0),await ue(a)}catch(y){let I=y;H.error(I?.data?.originalError?.msg||c("wallet_extenshion_toast_add_failed"))}}),{loading:T,onClick:C}=se(g),w={actionType:L.ACTION_TYPE.CONFIRM,disabled:!n||o,onClick:C,loading:T};return[f,w]},An=ir;i();s();var Xe=v(E());var sr=({contractAddress:e,chainInfo:t})=>{let[n,o]=(0,Xe.useState)({}),[a,l]=(0,Xe.useState)(!0),p=async()=>{try{l(!0);let m=await xo({contractAddress:e,chainInfo:t});o(m),l(!1)}catch{H.error({title:c("wallet_extension_loading_toast_retrieve_tokeninfo_fail")})}};return(0,Xe.useEffect)(()=>{p()},[]),{coinInfo:n,loading:a}},vn=sr;var mr=({unapproved:e})=>{let t=je(vo),{token:n,baseCoin:o}=wn(e),[a,l]=(0,Ze.useState)(!0),p=ft();at(async()=>{let f=await ct(o.localType,p);l(!!f)});let{coinInfo:m,loading:u}=vn({contractAddress:n?.address,chainInfo:{coinId:o?.coinId}}),r=An(n,o,a,u);if(!n||t!==Ao.addToken)return Ze.default.createElement(Pn.Redirect,{to:fo});let d=m,_={...n,symbol:d?.symbol,decimals:d?.decimals};return Ze.default.createElement(gn,{token:_,supported:a,buttonGroup:r,networkName:o.chainName,loading:u})},bn=mr;i();s();var Lt=v(E());var cr=e=>{let{params:t,origin:n,walletId:o,id:a,localType:l,method:p}=e.unapproved,m=fe({origin:n}),u=Co(o),r=Qo({id:a,walletId:o,origin:n,localType:l}),d=Ko({id:a});return Lt.default.createElement(Yo,{txId:a,params:t,method:p,walletId:o,dappInfo:m,onConfirm:d,onCancel:r,slot:{bottom:!!t?.[0]?.extParams?.isSilentSign&&Lt.default.createElement($o,{walletAccount:u})}})},Sn=cr;i();s();var N=v(E());i();s();var En=v(E());Oe();var pr=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:o}=e,{walletId:a}=t,l=z(),{coinId:p}=l,m=Go(p,a)?.coinAmountInt,{gasType:u,isNetworkFeeLoading:r,networkFee:d,getLimit:_}=n,{minGasFee:f}=So(n),g=Eo(n),T=(0,En.useMemo)(()=>{if(Ue(m))return o;let b=m,A=[];return o.forEach(S=>{b=tt(b,d),ie(b,0)&&A.push(S)}),A},[m,o,d]),C=r&&Ye(_,0),w={level:u||eo.STANDARD,loading:r,coinId:l?.coinId,networkFee:C?void 0:f,estimateFailed:g},y=r||T.length&&T.length===o.length,I=Ue(m)||He(m,d);return{isNetworkFeeLoading:r,estimateFailed:g,networkFeeProps:w,canApproveTxs:T,isSufficientGas:I,canApproveAll:y}},Nn=pr;i();s();var Ln=v(E());var Fn=100,lr=e=>e.msg||c("wallet_home_toast_network_error"),ur=({txParams:e,gasLimit:t,supportEip1559:n})=>({...e,value:W(e.value),gas:t,gasPrice:W(n?e.maxFeePerGas:e.gasPrice),priorityFee:W(n?e.maxPriorityFeePerGas:0),nonce:W(e.nonce),repeatTxType:Xt.CONFIRMING,oldTxHash:"",inscriptionType:1}),dr=({ext:e,signature:t,coinId:n,txParams:o,fromAdr:a,toAdr:l,networkFee:p,txHash:m,walletId:u,walletAccount:r})=>({extJson:JSON.stringify(e),signedTx:t,coinId:n,coinAmount:W(o.value||0),fromAdr:a,toAdr:l,serviceCharge:p,txHash:m,txSource:Jt.DAPP,inputData:o.data,accountId:u,txType:1,walletType:r?.serverWalletType}),fr=({isHardwareWallet:e,isNetworkFeeLoading:t})=>e||t,gr=e=>e||0,_r=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:o,customGasInfo:a,isNetworkFeeLoading:l})=>{let{id:p}=e,{walletId:m,address:u}=t,r=dt(m),d=ge(m),{coinId:_}=z(),f=ln(),g=pn(),T=(0,Ln.useCallback)(async()=>{d({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:p})},[f,d,p]),{loading:C,onClick:w}=se(T),y={loading:C,onClick:w,actionType:L.ACTION_TYPE.CANCEL,btnText:c("wallet_dapp_connection_btn_reject")},I=fr({isHardwareWallet:r,isNetworkFeeLoading:l}),{gasPrice:b,supportEip1559:A,gasLimitInfo:S={},gasLimit:B,maxFeePerGas:U,maxPriorityFeePerGas:Y,networkFee:G}=a,re=Lo({fromAddr:o[0]?.txParams?.from,walletId:m,localType:At}),R=async()=>{try{let q=o.length,Le=o[0],{from:Ce,to:Be,value:Me}=Le.txParams;d({trade:"sendEvmInscriptions",all_confirmation:"confirm"});let{data:ce}=await oo({checkTypes:[Pt.OVERWRITTEN],coinId:_,from:Ce,to:Be,amount:W(gr(Me)),gasPrice:b}),ke=ce.find(({checkType:V})=>V===Pt.OVERWRITTEN)||{},{newNonce:ve,toastType:Pe,pendingNum:De}=ke;if(Pe===to.FAILED){H.error(c("wallet_extension_function_toast_failed_single")),await Nt(1500),await f({id:p});return}let be=ye(De,q);if(ie(be,Fn)){H.error(c("wallet_extension_function_toast_pending",{TotalNum:be,ExceededNum:Fn}));return}let ae=[],$=[];for(let V=0;V<o.length;V++){let pe=o[V],{txParams:M}=pe,{from:ee,to:he}=M;M.nonce=zt(Ie(ye(ve,V))),A?(delete pe.gasPrice,M.maxFeePerGas=Ie(U),M.maxPriorityFeePerGas=Ie(Y),M.type=Ve.FEE_MARKET):(delete M.maxFeePerGas,delete M.maxPriorityFeePerGas,delete M.type,M.gasPrice=Ie(b)),M.gas=Ie(B),M.gasLimit=Ie(B),M.gasLimitInfo=S,M.gasType=a.gasType;let It=Po(pe.txParams),Ge=await re({params:It}),xe=await bo(At,Ge),wt=ur({txParams:M,gasLimit:B,supportEip1559:A}),Re=dr({ext:wt,signature:Ge,coinId:_,txParams:M,fromAdr:ee,toAdr:he,networkFee:G,txHash:xe,walletId:m,walletAccount:t});$.push(Re),ae.push({id:pe.id,txHash:xe})}await Qt(jt.postSendEvmInscriptions,{txList:$},{walletSignParams:{needXClientSign:!0,walletId:m}}),await g({id:p,result:ae})}catch(q){H.error(lr(q)),await Nt(1500),await g({id:p,error:"Failed"})}},{loading:J,onClick:X}=se(R),Z={loading:J,disabled:I,actionType:L.ACTION_TYPE.CONFIRM,onClick:X};return I?[y,Z]:(n||(Z={actionType:L.ACTION_TYPE.FILL_UP,txId:p,coinId:_,walletId:m,address:u,receiveOnly:n}),[y,Z])},Bn=_r;i();s();var Tr=e=>{for(let t=0;t<e.length;t++){let n=e[t],o=n();if(o)return o}return null},Cr=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:o})=>{let a=dt(e.walletId),l=()=>a?{type:te.TYPE.error,message:c("wallet_extension_function_alert_wallet_unsupported")}:null,p=z(),m=jo({baseCoin:p,isSufficientGas:o});return Tr([l,m,()=>n?null:{type:te.TYPE.warn,message:c("wallet_extension_function_alert_available_balance",{gasToken:p.symbol,num:t.length})}])},Mn=Cr;var kr=({unapproved:e})=>{let{coinId:t}=z(),{txParams:n={}}=e?.params?.[0],{from:o,to:a,data:l,value:p}=n,{walletId:m}=e,u=zo(e),r=ge(m),d=fe(e),[_,f]=(0,N.useState)({}),g=(0,N.useCallback)(Y=>{f(Y)},[]),{networkFeeProps:T,canApproveTxs:C,canApproveAll:w,isSufficientGas:y,isNetworkFeeLoading:I}=Nn({unapproved:e,walletAccount:u,customGasInfo:_}),b=Bn({unapproved:e,walletAccount:u,canApproveTxs:C,customGasInfo:_,isSufficientGas:y,isNetworkFeeLoading:I}),A=Mn({walletAccount:u,canApproveTxs:C,canApproveAll:w,isSufficientGas:y}),[S,{setTrue:B,setFalse:U}]=it(!1);return N.default.createElement(h.Container,null,N.default.createElement(gt,{closeable:!1,backable:!1}),N.default.createElement(de,{injectInfo:{title:c("wallet_extension_function_title_bulk_signing"),identify:!0}}),N.default.createElement(oe,{compact:!0}),N.default.createElement(Ct,null,N.default.createElement(dn,{...d})),N.default.createElement(Ct,null,N.default.createElement(Tt,{onClick:B,...T})),N.default.createElement(Ct,{bordered:!1},N.default.createElement(Ke,{title:c("wallet_extension_network_address_title_walletused"),address:u.address,walletId:u.walletId,onCopyCallback:()=>{r({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),N.default.createElement(Ee,{placeholder:!0,offsetBottom:0,borderTop:!0},N.default.createElement(Je,{...A}),N.default.createElement(L,{buttonGroup:b})),N.default.createElement(Jo,{visible:S,coinId:t,address:o,inputData:l,tokenAddress:a,value:W(p),onBack:U,onClose:null,onGasChange:g}))},Dn=kr;i();s();var K=v(E());Oe();i();s();var Vn=v(E());i();s();var qn=v(E());i();s();var j=v(E());i();s();var Ne=()=>(0,j.useCallback)(async(t,n)=>{await ro().updateReportTimestamp(t,n)},[]);var hr=()=>{let e=Ne();return(0,j.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},Gn=(e,t)=>{let n=hr(),o=(0,j.useRef)(!1);(0,j.useEffect)(()=>{!t&&!o.current&&(o.current=!0,n(e))},[e,t,n])},Rn=()=>{let e=Ne();return(0,j.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},Un=()=>{let e=Ne();return(0,j.useCallback)(async t=>{await e(t,"SIGN")},[e])},On=()=>{let e=Ne();return(0,j.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},Wn=()=>{let e=Ne();return(0,j.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},Hn=()=>{let e=Ne();return(0,j.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};i();s();Oe();var Yn=({isMev:e,mevInfo:t,unapproved:n,modifiedData:o,customGasInfo:a,updateData:l,gasReturnActivity:p})=>{let{nonce:m,updateGasInfo:u}=l,r=Ht(n),{method:d}=r;r.txParams=r.params,delete r.params;let{supportEip1559:_,gasLimitInfo:f={},gasLimit:g,maxFeePerGas:T,gasPrice:C,maxPriorityFeePerGas:w}=a,{authorizationList:y}=r.txParams||{},I=y&&y.length>0;if(o&&r.txParams&&(r.txParams.data=o),r.txParams.supportEip1559=_,_?(delete r?.txParams.gasPrice,r.txParams.maxFeePerGas=me(T),r.txParams.maxPriorityFeePerGas=me(w),r.txParams.type=Ve.FEE_MARKET):(delete r?.txParams.maxFeePerGas,delete r?.txParams.maxPriorityFeePerGas,delete r?.txParams.type,r.txParams.gasPrice=me(C)),I&&(r.txParams.type=Ve.AUTH_7702,r.txParams.authorizationList=y),u){let b={},A=Object.entries(u).reduce((S,[B,U])=>(S[B]=me(U),S),b);r.txParams={...r.txParams,...A}}return r.txParams.gas=me(g),r.txParams.gasLimit=me(g),r.txParams.nonce=me(m),r.txParams.chainId=me(r.chainId),r.gasLimitInfo=f||{},r.mevSuppliers=e?t?.mevSuppliers:[],r.activityId=p?.activityId,r.gasType=a.gasType,r?.txParams?.data||(r.isBaseCoinTransfer=!0),d===vt.KAIA_SIGN_TRANSACTION&&(r.txParams.signFn=vt.KAIA_SIGN_TRANSACTION,r.txParams.kaiaTxType=r.txParams.typeInt),r};var xr=(e,t)=>{let n=je(a=>lo(a,e)),o=je(a=>po(a,e)??t);return{mevInfo:n,isMev:o}},yr=({walletId:e,from:t,to:n})=>O(o=>{let a=o;o===Zt&&(a="sdk-error"),ot(`evm_tx_failed-${a}`,{to:n},{tags:{walletId:e,from:t}})}),Ir=({unapproved:e,needMev:t=!0,gasLimitParams:n,onBeforeSign:o,create5792DataParams:a,txToastCheckParams:l,preExecParams:p,extraParams:m,confirmBtnText:u="",cancelBtnText:r="",showApproveAddressAtPopup:d,onDataChange:_,reserveValue:f="0"})=>{let{id:g,params:T={},extParams:C={},chainId:w,method:y}=e,I=Se(),b=z(w),A=fe(e),{from:S,to:B,value:U,authorizationList:Y}=T,{coinId:G,chainName:re}=b,{walletId:R}=kt(e.origin,S)||{},{isMev:J,mevInfo:X}=xr(g,C?.isMev),Z=Rn(),q=Un(),Le=On(),Ce=Wn(),Be=Hn(),Me=O((ae,$)=>{I(bt.setIsMev({isMev:ae,id:g})),I(bt.setMevInfo({mevInfo:$,id:g}))});Gn();let ce=ge(R),ke=qo({walletId:R,fromAddr:S,coinId:G}),ve=O(async()=>{ce({trade:"contract_interaction",all_confirmation:"cancel",network:re,dapp_url:e.origin}),so(),await I(pt(g)),await ue(I)}),Pe=Vo(),De=yr({extParams:C,walletId:R,from:S,to:B}),be=O(async({modifiedData:ae,customGasInfo:$,gasReturnActivity:V,preExecInfo:pe,reportGasReturnActivityDataInConfirm:M})=>{try{let{gasPrice:ee}=$;Z(g);let he=W(U||0),It=await Pe({to:B,from:S,coinId:G,gasPrice:ee,userGasInfo:$,amount:he,baseCoinAmountUse:he,authorizationList:Y,...l||{}});M();let Ge=Yn({isMev:J,mevInfo:X,unapproved:e,updateData:It,modifiedData:ae,customGasInfo:$,gasReturnActivity:V}),xe=Ge.txParams;o&&(xe=o(xe)),q(g);let wt=await ke(xe);Le(g);let Re=await I(uo(g,{...Ge,txParams:xe,signedTx:wt,walletId:R,coinId:G,preExecInfo:pe,...m||{}},{failTxWhenError:!1}));Ce(g),Ft(Re?.code)?(V?.clear(),H.error({title:Re?.msg||c("wallet_home_toast_network_error"),duration:3})):(ao({tx_id:Re?.serverTxId}),Be(g))}catch(ee){let he=ee?.data?.originalError;Ft(he?.code)?(V?.clear(),H.error({title:he?.msg||c("wallet_home_toast_network_error"),duration:3})):ee?.message===$t?H.error(c("wallet_extension_tg_error_network")):ee?.message!==Bo&&ee?.message!==No&&H.error(ee?.message||c("wallet_home_toast_network_error")),De(ee?.message)}await ue(I)});return qn.default.createElement(en,{showApproveAddressAtPopup:d,confirmBtnText:u,cancelBtnText:r,preExecParams:p,txToastCheckParams:l,create5792DataParams:a,needMev:t,coinId:G,openMev:J,onConfirmReplace:!0,dappInfo:A,gasLimitParams:n||{},txParams:T,txType:e?.type,walletId:R,isShowBlockSwapMevTooltip:C?.isShowBlockSwapMevTooltip,onMevChange:Me,onCancel:ve,onConfirm:be,onDataChange:_,reserveValue:f,method:y})},ht=Ir;function wr({unapproved:e}){return Vn.default.createElement(ht,{unapproved:e})}var Bt=wr;i();s();var P=v(E());i();s();var _e=v(E()),xt=v(_o());Oe();i();s();var Ae={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_r2ocf_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_r2ocf_1",content:"_content_r2ocf_1",inner:"_inner_r2ocf_1","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_r2ocf_1",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_r2ocf_1",warningText:"_warningText_r2ocf_5",icon:"_icon_r2ocf_12",input:"_input_r2ocf_16"};function Ar({nonce:e,suggestedNonce:t,setNonce:n}){let o=l=>{n(l)},a;return e&&(ie(e,t)?a=c("developer_mode_send_tooltip_higher",{num:t}):qt(e,t)&&(a=c("developer_mode_send_tooltip_lower",{num:t}))),_e.default.createElement(an.Row,{className:Ae.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},_e.default.createElement("div",{className:(0,xt.default)(Ae.content)},_e.default.createElement("div",{className:Ae.inner},_e.default.createElement(Uo,{label:c("developer_mode_send_maintitle_nonce"),vertical:!0}),_e.default.createElement(St.Number,{className:Ae.input,innerClassName:(0,xt.default)({"rpc-evm-send-edit-nonce__warning-input":!!a}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,placeholder:`${Ue(t)?"":We.thousandFormat(t)}`,size:St.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(o(ye(t,1)),!1):!0,onSub:()=>!e&&ie(t,0)?(o(tt(t-1)),!1):!0,onChange:o})),a&&_e.default.createElement("div",{className:Ae.warningText},_e.default.createElement(lt,{className:(0,xt.default)(Ae.icon,"okx-wallet-plugin-warning-circle")}),a)))}var zn=Ar;i();s();var Q=v(E());i();s();var x=v(E());var Mt=v(_o());i();s();var F={root:"_root_v8msw_1",icon:"_icon_v8msw_1",drawIcon:"_drawIcon_v8msw_6",editApproveAmountModal:"_editApproveAmountModal_v8msw_11",content:"_content_v8msw_23",header:"_header_v8msw_30",editArea:"_editArea_v8msw_33",unlimitedText:"_unlimitedText_v8msw_37",unlimitedSymbol:"_unlimitedSymbol_v8msw_46",symbolClassName:"_symbolClassName_v8msw_52",quickHandler:"_quickHandler_v8msw_55",balanceWrap:"_balanceWrap_v8msw_61",balance:"_balance_v8msw_61",maxBalance:"_maxBalance_v8msw_74",maxDisabled:"_maxDisabled_v8msw_82",unlimited:"_unlimited_v8msw_37",text:"_text_v8msw_90",authQuantityWarnTip:"_authQuantityWarnTip_v8msw_97",danger:"_danger_v8msw_102",info:"_info_v8msw_105",approveTip:"_approveTip_v8msw_108",footerActions:"_footerActions_v8msw_116"};var vr=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Pr=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:o,amount:a}=t||{},{decimals:l,symbol:p}=o,m=we(p,12),[u,r]=(0,x.useState)(!1),[d,{toggle:_,setFalse:f,setTrue:g}]=it(!1),[T,C]=(0,x.useState)(0),w=(0,x.useMemo)(()=>d?{type:F.danger,text:c("wallet_extension_approve_alert_high_risk_unlimited")}:!d&&We.eq(T||0,0)?{type:F.info,text:c("wallet_extension_approve_cannot_zero")}:{type:F.info,text:c("wallet_extension_approve_desc_dapp_right")},[d,T]),y=O((A=a)=>{mt(A)?(C(0),g()):(C(Mo(A,l)),f()),r(!0)}),I=(0,x.useMemo)(()=>d?!1:!We.gt(`${T||0}`,0),[d,T]),b=O(()=>{r(!1);let A=d?co:Do(T,l);n(A)});return x.default.createElement(h.Box,{className:F.root},x.default.createElement(h.Box,{className:F.icon,onClick:()=>{y()}},x.default.createElement(lt,{className:(0,Mt.default)("okx-wallet-plugin-draw-filled",F.drawIcon)})),x.default.createElement(To.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:u},x.default.createElement(h.Box,{className:F.editApproveAmountModal},x.default.createElement(h.Box,{className:F.content},x.default.createElement(de,{className:F.header,injectInfo:e}),x.default.createElement(oe.Thin,null),x.default.createElement(h.Box,null,x.default.createElement(h.Box,{className:F.editArea},d?x.default.createElement(Et.Text,{className:F.unlimitedText},c("wallet_extension_transfer_title_unlimited_amount",{token:x.default.createElement(Et.Text,{className:F.unlimitedSymbol},m)})):x.default.createElement(Fo,{symbol:m,autoSize:vr,placeholder:"0",decimals:l,value:T,onChange:C,style:{fontWeight:700,height:"42px"},symbolClassName:F.symbolClassName})),x.default.createElement(h.Box,{className:F.quickHandler},x.default.createElement(h.Box,{onClick:_,className:F.unlimited},x.default.createElement(h.Box,{className:F.text},c("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),x.default.createElement(ut,{checked:d})))),x.default.createElement(oe.Thin,null),!!w&&x.default.createElement(h.Box,{className:(0,Mt.default)(F.authQuantityWarnTip,w.type)},w.text)),x.default.createElement(Ee,{affixStyle:{position:"none"},placeholder:!1,className:F.footerActions},x.default.createElement(Qe,{block:!0,disabled:I,category:Qe.CATEGORY.fill,type:Qe.TYPE.primary,size:Qe.SIZE.lg,onClick:b},c("wallet_extension_approve_btn_amount_confirmation"))))))},jn=Pr;i();s();var $e={approveContainer:"_approveContainer_1bf8g_1",header:"_header_1bf8g_7"};var br=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:o,title:a})=>{let{isApprove:l,isRevoke:p,address:m,customApproveAmount:u=0,symbol:r=ze,decimals:d=0,icon:_=mo}=o,f=we(r,12);if(n)return Q.default.createElement(_t.Header,{withImage:l});if(l){let g={title:a,identify:!0,subTitle:t.host};if(p){let C={topImage:{light:"/cdn/assets/imgs/645/5D4A0C4852C9490CACC9BFBE1DEC04B9.png",dark:"/cdn/assets/imgs/050/2FBCCDEEB7DA444DB6713F25796D8915.png"},...g};return Q.default.createElement(h.Box,{className:$e.approveContainer},Q.default.createElement(de,{className:$e.header,injectInfo:C}),Q.default.createElement(oe.Thin,null),Q.default.createElement(Wo,{imageUrl:_,text:f}))}let T={topImage:{light:"/cdn/assets/imgs/248/9025B50E164F475A929319FA0B9C80E7.png",dark:"/cdn/assets/imgs/712/04BAC56B85B94F5A99301E54DC706A5E.png"},...g};return Q.default.createElement(h.Box,{className:$e.approveContainer},Q.default.createElement(de,{className:$e.header,injectInfo:T,noHorizontalPadding:!0}),Q.default.createElement(oe.Thin,null),Q.default.createElement(Ho,{approveInfoList:[{amount:u,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:m,decimals:d,symbol:r}}],renderEditApproveAmount:C=>Q.default.createElement(jn,{txTypeInfo:T,approve:C,onUpdateAuthAmount:e})}))}return Q.default.createElement(de,{injectInfo:{title:c("wallet_extension_transaction_page_title_unknown_transaction"),identify:!1,subTitle:t.host}})},Qn=br;i();s();var Sr=({chainGasLoadFailed:e,isSufficientBalance:t,isSufficientGas:n,transaction:o,actions:a,modifiedDataError:l,walletInfo:p,params:m,rpcInfo:u,addressCheckRet:r})=>{let{addressCheckLoading:d,addressCheckError:_}=r,f=t&&n,{chain:g,nonce:T,loading:C,gas:w}=o,{sign:y,cancel:I}=a,{chainGasLoading:b}=w,{loading:A,onClick:S}=se(I),B={actionType:L.ACTION_TYPE.CANCEL,onClick:S,loading:A},U=async()=>{let X=Z=>{let q=go[p?.keyringIdentityType];io({tx_source:"dapp",from_addr:m.from,to_addr:m.to,main_token_symbol:u?.symbol,token_symbol:Z?.extraParams?.coinSymbol||"",contract_address:m?.to,volume_token:m?.value,volume_usdt:"",tx_hash_unique:Z?.txHash,wallet_type:q,chain_id:parseInt(g.chainId,16)})};y(p?.walletId,X,u)},Y=()=>{globalThis.open(u.faucetUrl)},G=b||e||!f&&!u?.faucetUrl||T.pending||C.sign||C.token||l||_||d,{loading:re,onClick:R}=se(U),J={disabled:G,actionType:L.ACTION_TYPE.CONFIRM,onClick:R,loading:re};return!f&&u?.faucetUrl&&(J.actionType=L.ACTION_TYPE.FILL_UP,J.onClick=Y,J.btnText=c("wallet_extension_transfer_btn_via_faucet")),[B,J]},Kn=Sr;i();s();var Er=({customGasInfo:e})=>()=>e?.isSupportEip1559&&e?.baseFeePerGas==="0"?{type:te.TYPE.warn,message:c("wallet_extension_transaction_error_base_zero")}:null,Nr=({modifiedDataError:e})=>()=>e?{}:null,Fr=({isSufficientBalance:e})=>()=>e?null:{type:te.TYPE.warn,message:c("wallet_extension_popup_dapp_insufficient_balance")},Lr=({isSufficientGas:e,chain:t})=>()=>e?null:{type:te.TYPE.warn,message:c("wallet_extension_popup_insufficient_network_fee",{token:t.symbol})},Br=({chainGasLoadFailed:e,chainGasError:t})=>()=>e?{type:Je.TIP_TYPE.FEE_ERROR_WITH_MESSAGE,errorMsg:t}:null,Mr=({auth:e,contract:t,asset:n})=>()=>mt(e.customApproveAmount)?{type:te.TYPE.warn,message:c("wallet_extension_popup_unlimited_transfer",{contract:t,asset:n})}:ie(e.customApproveAmount,0)?{type:te.TYPE.warn,message:c("extension_approve_alert_authorized_tips",{contract:t,asset:n})}:null,Dr=e=>()=>e?{type:Je.TIP_TYPE.COMMON_ERROR,message:e}:null,Gr=({customGasInfo:e,chainGasError:t,chainGasLoadFailed:n,modifiedDataError:o,isSufficientBalance:a,isSufficientGas:l,isRevokeTx:p,transaction:m,loading:u,addressCheckRet:r})=>{let{auth:d,chain:_}=m,{addressCheckLoading:f,addressCheckError:g}=r,T=we(d.name||ze),C=we(d.symbol||ze),w=Er({customGasInfo:e}),y=Nr({modifiedDataError:o}),I=Fr({isSufficientBalance:a}),b=Lr({isSufficientGas:l,chain:_}),A=Br({chainGasLoadFailed:n,chainGasError:t}),S=()=>p?{type:te.TYPE.info,message:c("extension_revoke_approval_alert_evoke_authorization",{contract:T,asset:C})}:null,B=Dr(g),U=Mr({auth:d,contract:T,asset:C});if(u||f)return null;let Y=[y,B,b,I,S,U,A,w];for(let G=0;G<Y.length;G++){let re=Y[G],R=re();if(R)return R}return null},Jn=Gr;i();s();var Dt={"action-buttons":"_action-buttons_19zfj_1",actionButtons:"_action-buttons_19zfj_1",advanced:"_advanced_19zfj_10"};var Rr=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:o,method:a,chainId:l}=e,{from:p,value:m,to:u,typeInt:r}=o,[d,_]=(0,P.useState)(""),[f,g]=(0,P.useState)(!1),T=Zo(d),C=kt(n,p),[w,y]=un({...o,...e,walletId:C?.walletId},t),I=(0,P.useMemo)(()=>[rt.FeeDelegatedValueTransfer,rt.FeeDelegatedValueTransferMemo,rt.FeeDelegatedSmartContractExecution].includes(r),[r]),{title:b,auth:A,meta:S,nonce:B,gas:U,loading:Y,data:G}=w,{setNonce:re,setAuthAmount:R}=y,{setGasType:J,currentGasInfo:X,chainGasLevels:Z,chainGasLoading:q,chainGasError:Le,chainGasLoadFailed:Ce,setCustomGasOption:Be,chainGasLimitLoadFailed:Me}=U,ce=ko(void 0,void 0,t),ke=Cn(X);nn(t),kn(p,t),yn();let ve=He(ce?.balance,ye(ke,Vt(m||0))),Pe=He(ce?.balance,ke),{cancel:De}=y,be=fe(e),ae=rn({from:p,to:u,method:a,dappData:JSON.stringify({from:p,to:u,data:G,value:m}),dappInfo:be,chainIndex:W(l),isRpcChain:!0,handleCancel:De},no),$=Jn({customGasInfo:X,chainGasError:Le,chainGasLoadFailed:Ce,isSufficientGas:Pe,isSufficientBalance:ve,isRevokeTx:A.isRevoke,modifiedDataError:T,transaction:w,loading:q,addressCheckRet:ae}),V=Kn({chainGasLoadFailed:Ce,isSufficientBalance:ve,isSufficientGas:Pe,transaction:w,actions:y,modifiedDataError:T,walletInfo:C,params:o,rpcInfo:t,addressCheckRet:ae});return P.default.createElement(h.Container,null,!T&&P.default.createElement(Ro,{...$}),P.default.createElement(Qn,{title:b,confirmBuryPointFn:()=>{},onUpdateAuthAmount:pe=>{R(pe)},dappInfo:S.originInfo,loading:Y.token,approveToken:A}),P.default.createElement(sn,null,P.default.createElement(oe.Thin,null),P.default.createElement(Tt,{isFree:I,onClick:()=>{g(!0)},level:X?.typeKey,injectCoin:ce,loading:q,estimateFailed:Ce,networkFee:q?void 0:Yt(ke,10**ce?.decimals)}),P.default.createElement(Ke,{title:c("wallet_extension_network_address_title_walletused"),address:C.address,walletId:C.walletId}),!!u&&P.default.createElement(Ke,{title:c("wallet_extension_popup_text_interact_with"),address:u}),P.default.createElement(Oo,{defaultExpanded:!0},P.default.createElement(h.Space,{direction:h.DIRECTION.vertical,space:24,className:Dt.advanced},P.default.createElement(zn,{nonce:B.custom,suggestedNonce:B.suggested,setNonce:re,contentClassName:Dt.nonceContent}),G?P.default.createElement(xn,{data:G,copyable:{hideDesc:!0}}):P.default.createElement(Xo,{value:d,error:T,onChange:_})))),P.default.createElement(Ee,{placeholder:!0,offsetBottom:0,borderTop:!0,style:{zIndex:10}},P.default.createElement(L,{buttonGroup:V})),q?null:P.default.createElement(hn,{onBack:()=>{g(!1)},visible:f,rpcInfo:t,setGasType:J,chainGasLevels:Z,setCustomGasOption:Be,currentGasInfo:X,chainGasLimitLoadFailed:Me}))},Gt=Rr;i();s();var D=v(E());i();s();var Te={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var Xn={uniqueId:qe,rpcUrl:c("wallet_extension_rpc_title_official")},Ur=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[o,a]=(0,D.useState)({}),l=[...e],p=!!t.length;p&&l.unshift(Xn);let[m,u]=(0,D.useState)(!1),{updateRpcNetwork:r}=st(),d=(0,D.useCallback)(async()=>{try{u(!0);let f=e.find(g=>!!g.isDefaultRpc);if(o.isDefaultRpc||o.uniqueId===qe&&!f)return;f&&await r({...f,isDefaultRpc:!1}),await r({...o,isDefaultRpc:!0})}catch(f){console.log(f)}finally{u(!1)}},[o,e,r]),_=(0,D.useCallback)(async()=>{await d(),n(o)},[o,n,d]);return at(()=>{let f=e.find(g=>g.isDefaultRpc);f?a(f):p&&a(Xn)}),D.default.createElement(h.FlexBox,{className:Te.root,direction:h.DIRECTION.vertical},D.default.createElement(gt,{backable:!1,closeable:!1,title:c("wallet_extension_rpc_title_select_rpc")}),D.default.createElement(h.Box,{className:Te.main},D.default.createElement(h.Box,{className:Te.tips},c("wallet_extension_rpc_desc_select_rpc_current")),D.default.createElement(h.Box,{className:Te.list},l.map(f=>D.default.createElement(h.Box,{key:f.uniqueId,className:Te.item,onClick:()=>{a(f)}},D.default.createElement(ho,{ellipsis:!0,className:Te.title},f.rpcUrl),D.default.createElement(ut.Circle,{checked:f.uniqueId===o.uniqueId}))))),D.default.createElement(h.Box,{className:Te.footer},D.default.createElement(L,{buttonGroup:[{loading:m,disabled:!o.uniqueId,actionType:L.ACTION_TYPE.CONFIRM,onClick:_,"data-testid":Io.DAPP_ENTRY_PAGE.RPC_SELECTOR_CONFIRM_BUTTON}]})))},Zn=Ur;var Rt=(e,t)=>{(0,K.useEffect)(()=>{if(!t)return Wt;let n=setTimeout(()=>{ot(`evm-dapp-loading-exceeds-5s-${e}`)},5e3);return()=>{clearTimeout(n)}},[e,t])},Or=({status:e,evmMainNetworks:t,chainNotifyModalLoading:n})=>(Rt("status",e==="loading"),Rt("evmMainNetworks",!t?.length),Rt("chainNotifyModalLoading",n),K.default.createElement(tn,null)),Wr=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:o}=st(),a=wo({appBaseChain:"ethereum"})||[],l=a.filter(_=>Ye(_.realChainIdHex,t.chainId)),p=n.filter(_=>Ye(_.chainId,t.chainId)),[m,u]=(0,K.useState)(null),r=l?.[0]?.chainName||p?.[0]?.name,{loading:d}=on({unapproved:t,network:r,providerType:Kt});return o==="loading"||!a?.length||d?K.default.createElement(Or,{status:o,evmMainNetworks:a,chainNotifyModalLoading:d}):l.length+p.length>1?m?m.uniqueId===qe?K.default.createElement(Bt,{...e}):K.default.createElement(Gt,{...e,rpcInfo:m}):K.default.createElement(Zn,{networkType:t.networkType,targetRpcChain:p,targetMainChain:l,handleSelect:u}):l.length?K.default.createElement(Bt,{...e}):K.default.createElement(Gt,{...e,rpcInfo:p[0]})},$n=Wr;i();s();var Fe=v(E());i();s();var yt=v(E());i();s();var et=v(E());i();s();var er={root:"_root_1r48s_1"};function Hr({onCancel:e}){return et.default.createElement(h.Container,{className:er.root},et.default.createElement(_t,{confirmBtnText:c("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:c("wallet_extension_transfer_btn_reject_all"),handleCancel:e}))}var tr=(0,et.memo)(Hr);function qr({txParams:e,unapproved:t,onCancel:n,modifiedCalls:o}){let{reserveValue:a,onBeforeSign:l,isAuth7702:p,eip5792Params:m,gasLimitParams:u,setModifiedData:r,contractAddress:d,from:_,status:f,currentContractAddress:g}=mn({unapproved:t,txParams:e,modifiedCalls:o});return!e||p&&!u?yt.default.createElement(tr,{onCancel:n}):yt.default.createElement(ht,{reserveValue:a,showApproveAddressAtPopup:!0,needMev:!0,confirmBtnText:c("wallet_extension_transfer_btn_confirm_all"),cancelBtnText:c("wallet_extension_transfer_btn_reject_all"),txToastCheckParams:m,preExecParams:m,gasLimitParams:u,create5792DataParams:{address:_,contractAddress:f===3?g:d},unapproved:{...t,params:e},onBeforeSign:l,extraParams:{eip7702UpgradeAddress:p?d:void 0,modifiedCalls:o},onDataChange:r})}function Vr({unapproved:e,shouldUpgrade7702:t,onCancel:n}){let{txParams:o,modifiedCalls:a}=cn({unapproved:e,shouldUpgrade7702:t});return yt.default.createElement(qr,{unapproved:e,txParams:o,modifiedCalls:a,onCancel:n})}var or=Vr;function zr({unapproved:e}){let{id:t,extParams:n,chainId:o}=e,{chain7702Data:{status:a}}=n,l=Se(),[p,m]=(0,Fe.useState)(a!==3),[u,r]=(0,Fe.useState)(!1),d=O(async()=>{await l(pt(t)),await ue(l)});return p?Fe.default.createElement(In,{status:a,walletId:e.walletId,chainIndex:o,onCancel:d,onClose:_=>{m(!1),r(_)}}):Fe.default.createElement(or,{unapproved:e,shouldUpgrade7702:u,onCancel:d})}var nr=zr;var wl=(0,ne.memo)(({unapproved:e})=>{switch(e.method){case nt.SEND_EVM_INSCRIPTIONS:return ne.default.createElement(Dn,{unapproved:e});case nt.WALLET_SEND_CALLS:return ne.default.createElement(nr,{unapproved:e});case nt.ETH_APPROVEANDSWAP:return ne.default.createElement(Sn,{unapproved:e});default:break}switch(e.type){case le.ETH_SIGN:case le.PERSONAL_SIGN:case le.ETH_SIGN_TYPED_DATA:case le.ETH_GET_ENCRYPTION_PUBLIC_KEY:case le.ETH_DECRYPT:return ne.default.createElement(Tn,{unapproved:e});case le.WATCH_ASSET:return ne.default.createElement(bn,{unapproved:e});case le.ADD_ETHEREUM_CHAIN:return ne.default.createElement(fn,{unapproved:e});default:return ne.default.createElement($n,{unapproved:e})}});export{wl as default};
//# sourceMappingURL=Ethereum-ECBWTL4F.js.map
