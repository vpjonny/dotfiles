import{a as I,b as W,c as ue,d as pe,e as fe,g as ge,h as Ce}from"./chunk-FTV5O542.js";import{a as ce}from"./chunk-PIGFXZIL.js";import{b as O}from"./chunk-B2LIUW7J.js";import{a as me}from"./chunk-2KVSCBMV.js";import{b as le}from"./chunk-RDR2UL3Q.js";import"./chunk-XEUEKI2J.js";import"./chunk-7UYU4UAT.js";import{a as de}from"./chunk-T475WHHH.js";import"./chunk-OSD5TZNZ.js";import{a as _e}from"./chunk-4VVKOCP5.js";import"./chunk-PDAPPSN7.js";import{a as x}from"./chunk-K4DJNG3I.js";import"./chunk-J5B5KBXF.js";import"./chunk-4AIWJOGE.js";import{a as se}from"./chunk-W25M53MS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-U44ZBWPF.js";import"./chunk-XHRUTTJG.js";import"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import"./chunk-OB65JCC3.js";import{d as ae}from"./chunk-LZL7SWT5.js";import{c as ie}from"./chunk-GVYIP5Q5.js";import{Fa as V}from"./chunk-VHMBEOFX.js";import{e as C}from"./chunk-M43NTBTB.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import{a as U}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import{f as J}from"./chunk-6C7RJCTT.js";import{o as S}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{c as g,q as $,x as j}from"./chunk-KC2XLVFC.js";import{ra as Q}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{J as R,K as oe,a as ee}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import{l as X}from"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as A}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{p as c}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as te}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{y as ne}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{w as re}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as Ue}from"./chunk-FB3ILH2L.js";import{b as w}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as l,o as r,q as n}from"./chunk-UWURTNRY.js";r();n();var i=l(w()),Ie=l(te()),be=l(Ue());r();n();var D=l(w());var he=({renderCoin:e,list:o})=>o?.length?D.default.createElement(A.Box,null,D.default.createElement(S.Text,{className:I.listTitle,size:S.SIZE.xs,type:S.TYPE.secondary},c("wallet_manage_crypto_list_added_crypto")),D.default.createElement(C,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:o})):null;r();n();var Y=l(w());r();n();var Le=l(w()),ye=l(te());var we=()=>{let e=(0,ye.useHistory)();return Le.default.createElement(ne.State,{className:I["empty-box"],title:c("wallet_search_text_search_no_results"),buttonText:c("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(R)}})};var Ae=({loadingMore:e,searchCoins:o,renderCoin:t,spinLoading:a})=>Y.default.createElement(C,{itemKey:"coinId",dataSource:o,renderItem:t,loadingMore:e,renderEmpty:()=>a?null:Y.default.createElement(we,null)});r();n();var b=l(w());var Se=(0,b.forwardRef)(({unAddedLoadingMore:e,renderCoin:o,unAddedList:t})=>t.length===0?null:b.default.createElement(A.Box,null,b.default.createElement(S.Text,{className:I.listTitle,size:S.SIZE.xs,type:S.TYPE.secondary},c("wallet_manage_crypto_subtitle_popular_crypto")),b.default.createElement(C,{itemKey:"coinId",renderEmpty:!1,renderItem:o,dataSource:t,loadingMore:e})));r();n();var F=()=>{let e=se(),o=x();return g(()=>X(e,o).map(d=>({...d,added:!0})),[e])},H=(e=[])=>g(()=>new Set(e.map(o=>o.aggregation?o.symbol:o.coinId)),[e]),ve=()=>{let e=me();return ue(async o=>{let t=pe(o,e);await ae(t)},500)};r();n();var Ne=l(w());var Ee=()=>{let{currentNetworkUniqueId:e}=Q(J),o=ie({netWorkId:e?String(e):void 0}),{supportNetworkList:t,loading:a,run:d}=le(),L=(0,Ne.useMemo)(()=>{if(!t||t.length===0)return!1;let _=o?.coinId;return _?t.some(f=>f.coinId===_):!0},[t,o?.coinId]),m="";if(e!==""){let _=o?.coinId;m=(t||[]).find(f=>f.coinId===_)?.name||""}let u=`${R}?network=${m}`;return{supportCustomCoin:L,customCryptoPath:u,supportNetworkListLoading:a,reloadSupportNetworkData:d}};r();n();var E=l(w());var ke=()=>{let e=x(),[o,t]=(0,E.useState)(""),a=$(o,{wait:500}),d=(0,E.useCallback)(p=>{t(p.target.value)},[]),L=F(),[m,u]=(0,E.useState)(!0),_=g(()=>a?L.filter(p=>p.symbol?.toLowerCase().includes(a.toLowerCase())||p.address?.toLowerCase()===a.toLowerCase()):[],[L,a]),f=H(_);(0,E.useEffect)(()=>{u(!!o)},[o]);let{data:k,loadingMore:T,listRef:s}=O({symbolLike:a,aggregation:!0,chainIds:e?[Number(e)]:void 0},{reloadDeps:[a],enableEmptyAccountCoins:!0,beforeRequest:async()=>{if(!a)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){u(!1)}}),v=g(()=>{let P=(k?.list??[]).filter(y=>!f.has(y.aggregation?y.symbol:y.coinId));return[..._,...P]},[k?.list,_]);return{searchListRef:s,search:o,searchCoins:v,searchLoading:m,searchLoadingMore:T,onSearch:d,setSearch:t}};r();n();var B=l(w());var xe=(e=[],o)=>{let t=x(),a=de(),d=H(e),L=g(()=>Array.from(new Set(ce(e).map(y=>y.coinId))),[e]),{data:m,loading:u,loadingMore:_,listRef:f,reload:k}=O({aggregation:!0,chainIds:t?[Number(t)]:void 0,excludeCoinIds:L},{enable:!a,reloadDeps:[t],enableEmptyAccountCoins:!0}),T=j(d.size),s=d.size<T;(0,B.useEffect)(()=>{!o&&s&&k()},[s,d.size,o]);let v=g(()=>m?.list?.filter(N=>!d.has(N.aggregation?N.symbol:N.coinId))??[],[m?.list,e])??[],[p,P]=(0,B.useState)(!0);return(0,B.useEffect)(()=>{u||P(!1)},[u]),{unAddedList:v,unAddedListRef:f,unAddedLoading:p,unAddedLoadingMore:_}};r();n();var M={"wallet-coin__manage":"_wallet-coin__manage_1csh0_1",walletCoinManage:"_wallet-coin__manage_1csh0_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1csh0_4",walletCoinManageSearch:"_wallet-coin__manage__search_1csh0_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1csh0_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1csh0_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1csh0_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1csh0_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1csh0_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1csh0_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1csh0_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1csh0_17","wallet-coin__manage__divider":"_wallet-coin__manage__divider_1csh0_21",walletCoinManageDivider:"_wallet-coin__manage__divider_1csh0_21","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1csh0_25",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1csh0_25","fade-enter":"_fade-enter_1csh0_29",fadeEnter:"_fade-enter_1csh0_29","fade-added-enter":"_fade-added-enter_1csh0_30",fadeAddedEnter:"_fade-added-enter_1csh0_30","fade-enter-active":"_fade-enter-active_1csh0_34",fadeEnterActive:"_fade-enter-active_1csh0_34","fade-added-enter-active":"_fade-added-enter-active_1csh0_35",fadeAddedEnterActive:"_fade-added-enter-active_1csh0_35",fade:"_fade_1csh0_29","fade-added":"_fade-added_1csh0_30",fadeAdded:"_fade-added_1csh0_30","fade-leave-active":"_fade-leave-active_1csh0_45",fadeLeaveActive:"_fade-leave-active_1csh0_45","fade-added-leave-active":"_fade-added-leave-active_1csh0_46",fadeAddedLeaveActive:"_fade-added-leave-active_1csh0_46"};var Oe=()=>{let e=(0,Ie.useHistory)(),{customCryptoPath:o,supportCustomCoin:t,supportNetworkListLoading:a,reloadSupportNetworkData:d}=Ee(),{searchListRef:L,search:m,searchCoins:u,onSearch:_,searchLoading:f,searchLoadingMore:k,setSearch:T}=ke(),s=!!m,v=F(),p=ge(),{unAddedList:P,unAddedListRef:y,unAddedLoading:N,unAddedLoadingMore:Me}=xe(v,s),Te=ve(),G=v?.length>1,Pe=fe({source_page:"manage_crypto"});(0,i.useEffect)(()=>{d()},[]);let Be=z=>i.default.createElement(W,{isSearchStatus:s,coin:z,onAction:Te,deleteAddedCoinAbled:G}),q=z=>i.default.createElement(W,{isSearchStatus:s,coin:z,deleteAddedCoinAbled:G,onAction:Pe}),K=m?f:N,Re=c("wallet_manage_crypto_placeholder_search_coin"),Z=_e();return i.default.createElement(A.Container,{className:"wallet-coin__manage"},i.default.createElement(Ce,{search:m,setSearch:T,spinLoading:K,placeholderText:Re,onSearch:_,onBack:()=>{e.push(ee)},title:c("wallet_manage_crypto_maintitle_manage_crypto"),dataTestId:U.COIN_MANAGEMENT_PAGE.SEARCH_INPUT}),i.default.createElement(A.Spin,{ref:s?L:y,className:(0,be.default)(M["wallet-coin__manage__spin"],M["wallet-coin__manage__spin__auto"]),loading:!1,size:re.SIZE.lg},!s&&p&&i.default.createElement(C.Cell,{"data-testid":U.COIN_MANAGEMENT_PAGE.RECENTLY_REMOVED_ENTRY,isLink:!0,className:M["wallet-coin__manage__spin__custom"],onClick:()=>{V({network_selection:Z?.id===""?"allnetwork":Z?.symbol}),e.push(oe)},icon:"okx-wallet-plugin-browse-history",title:c("wallet_extension_assets_tab_recently_removed")}),!s&&!!t&&i.default.createElement(A.Spin,{loading:a&&!N},i.default.createElement(C.Cell,{"data-testid":U.COIN_MANAGEMENT_PAGE.CUSTOM_COIN,className:M["wallet-coin__manage__spin__custom"],isLink:!0,to:o,icon:"okx-wallet-plugin-buy-crypto",title:c("wallet_manage_crypto_text_custom_crypto")})),!s&&(p||!!t)&&i.default.createElement("div",{className:M["wallet-coin__manage__divider"]}),s&&i.default.createElement(Ae,{searchCoins:u,renderCoin:q,spinLoading:K,loadingMore:k}),!s&&i.default.createElement(he,{list:v,renderCoin:Be}),!s&&i.default.createElement(Se,{unAddedList:P,unAddedLoading:N,unAddedLoadingMore:Me,renderCoin:q})))},wt=i.default.memo(Oe);export{wt as default};
//# sourceMappingURL=CoinManage-LU7DA5EI.js.map
