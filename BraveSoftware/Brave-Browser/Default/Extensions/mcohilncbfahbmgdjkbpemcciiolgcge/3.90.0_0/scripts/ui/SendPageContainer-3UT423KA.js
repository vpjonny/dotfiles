import{a as Ks,b as $d,c as Ia,d as Qd}from"./chunk-VX27HIAO.js";import{a as Md}from"./chunk-4JFXRHPF.js";import{a as Gn,b as Vn}from"./chunk-RS2FYAL7.js";import{a as Jo,b as Vd,c as Wd,d as De}from"./chunk-5FPC2YLZ.js";import{a as Gd}from"./chunk-Q66GA6I6.js";import{a as Zd}from"./chunk-XFTLA7PH.js";import{a as Vs,b as Dd,c as Ud,d as Pt,e as Aa,f as J,g as Hs,h as Xd,i as Kd,m as Jd,n as Yd,o as Pe}from"./chunk-UZL4Z4Q6.js";import{a as Xs,b as Hd}from"./chunk-6JRCGATI.js";import{a as zd}from"./chunk-FICWWUP2.js";import{a as jd}from"./chunk-CF54UNK2.js";import"./chunk-5Q2KUGY5.js";import{a as Ws}from"./chunk-L5IAYR5L.js";import{a as qd}from"./chunk-BHUBJAUL.js";import{a as yt}from"./chunk-ASMDBF47.js";import{a as Od}from"./chunk-VFWATNQY.js";import{a as Nd}from"./chunk-S32HDRQT.js";import"./chunk-HNGW4YGJ.js";import"./chunk-JK2V6PQY.js";import{a as ht,b as Ld}from"./chunk-JTHNZXFX.js";import{a as vd,b as Bd}from"./chunk-EC2OS2MX.js";import{a as Rd}from"./chunk-MRB6SSKA.js";import"./chunk-52JFFT56.js";import"./chunk-772ZJYXN.js";import{b as Gs,d as Fd}from"./chunk-Z3CN3PP7.js";import{a as Os,b as bd,c as kd,d as Ed}from"./chunk-JCVVB72F.js";import"./chunk-6CJRBF2P.js";import{a as yd,b as Pd}from"./chunk-3KJMTMXK.js";import{a as Sa}from"./chunk-IWYRUFZN.js";import{a as wd}from"./chunk-GVO5XBXE.js";import"./chunk-XI5NMQGM.js";import"./chunk-FLQKBEJO.js";import"./chunk-5TBKSXR4.js";import"./chunk-X7JU5VY4.js";import{a as qe}from"./chunk-YKQL2NOR.js";import{a as Sd}from"./chunk-7LMS53CN.js";import{a as cr,b as Us}from"./chunk-6BWJUZYL.js";import{b as je,c as Ls,d as nd,f as rd,h as sd,i as Ht,j as Rs,k as mr,m as Dn,p as id,q as Ds,r as ad,s as md}from"./chunk-ITLSSVGE.js";import{a as Ad}from"./chunk-M2YFVDKX.js";import"./chunk-PWVBSLOL.js";import{c as xd}from"./chunk-DZPLORMY.js";import"./chunk-5WI3NR4H.js";import{e as Id,f as Td}from"./chunk-AOZHPYH5.js";import"./chunk-W25M53MS.js";import"./chunk-HLTJYEGI.js";import{c as ge}from"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import{a as go}from"./chunk-3MLYZLAT.js";import{a as hd}from"./chunk-B4MQLH4C.js";import"./chunk-VWVRJUMU.js";import"./chunk-EUAAIPZO.js";import"./chunk-GCJ2PJNQ.js";import"./chunk-A4R53AVX.js";import"./chunk-TJ3NTWVS.js";import{a as gd}from"./chunk-634WRNGH.js";import"./chunk-ZFAUEPQW.js";import"./chunk-RN5VSY2K.js";import{a as ld}from"./chunk-YPWPNJRG.js";import"./chunk-GMVPA3MX.js";import"./chunk-P355XBV4.js";import{a as Mn,d as ud}from"./chunk-C4TBDTQO.js";import{a as On}from"./chunk-6AUQLYPZ.js";import{a as Ms}from"./chunk-UPIYMC4Q.js";import{c as cd,e as Un,f as _a}from"./chunk-ZUO5BDO3.js";import{a as Ca}from"./chunk-A7EUFORV.js";import"./chunk-QEPQGEPL.js";import{$ as ie,A as wn,B as qo,C as qu,D as Ju,E as Fs,F as Nn,G as Yu,H as Q,I as Wt,J as Zu,K as ws,L as Ns,M as zu,N as ju,O as te,P as vn,Q as vs,S as Bn,T as xt,V as Bs,X as ze,Y as Ln,Z as Rn,_ as ed,aa as od,b as Mu,ba as td,c as Ee,d as C,e as Ho,f as Xo,g as Uu,h as K,i as Ke,j as Y,k as Ou,l as Gu,m as ys,n as Be,o as Ko,p as Ps,q as En,r as Vu,s as Wu,t as b,u as F,v as Hu,w as Xu,x as bs,y as Fn,z as ks}from"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import{a as Tt,e as Es,f as Ku}from"./chunk-75EAYNWR.js";import"./chunk-D6LKASPV.js";import{d as $u,e as Qu}from"./chunk-DKVOSSSH.js";import{a as Cd,d as _d}from"./chunk-FWL474H4.js";import{A as Ae,B as _e,C as Ru,D as Du,a as Te,k as wu,l as hs,t as Nu,u as vu,v as Bu,w as Lu,x as Se}from"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import{c as dd,e as fd,f as pd}from"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import{b as Tu,k as xu,l as hu,n as yu,o as Pu,t as ku}from"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import{b as bu}from"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import{a as bn}from"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import{a as _u}from"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import{f as Fu}from"./chunk-PLVYKYSQ.js";import{a as Eu}from"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import"./chunk-XUGHAFHG.js";import{a as Xe}from"./chunk-B5L26Z2J.js";import{d as Cu}from"./chunk-AVG63QW4.js";import{d as fo,f as He,g as Au,j as Iu}from"./chunk-YLT6ZRGE.js";import{b as kn}from"./chunk-VSNCKUAC.js";import{a as Su}from"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import{a as OS}from"./chunk-ZQJ3JIQ3.js";import{$ as Dc,A as yc,B as $r,D as _n,E as Sn,F as Qr,G as An,H as St,I as ho,J as Pc,K as In,L as bc,M as es,N as kc,O as Ec,P as Fc,Q as wc,R as Nc,S as os,T as vc,U as ts,V as ra,W as Gt,X as Bc,Y as Lc,Z as ns,_ as Rc,aa as Mc,b as fc,ba as Vt,c as gt,ca as sa,d as pc,da as rs,e as lc,ea as rr,f as gc,fa as ss,g as ln,ga as ia,h as Ct,ha as Uc,i as gn,ia as Oc,j as Cn,ja as No,k as Cc,l as io,la as is,m as _c,ma as aa,n as Zr,na as as,o as Sc,oa as Gc,p as zr,pa as ms,q as Ac,qa as ma,r as Ic,ra as ca,s as Vo,sa as ua,t as Tc,ta as Vc,u as _t,ua as Wc,v as nr,va as Hc,w as xc,wa as Xc,x as jr,xa as da,y as hc,ya as Kc,z as xo}from"./chunk-PIORNFOX.js";import"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import"./chunk-LZL7SWT5.js";import"./chunk-OYIB3B2O.js";import{a as Ot}from"./chunk-OBLKTTHP.js";import"./chunk-LQJXR5XX.js";import"./chunk-NQGIYDUG.js";import{B as Qc,C as eu,D as fs,E as sr,F as ou,G as tu,J as At,K as V,L,M as re,N as ps,P as nu,R as le,S as mo,T as It,U as fa,V as ls,b as cs,c as qc,g as us,h as ds,k as Jc,l as Yc,m as ao,n as Zc,o as Tn,p as Wo,q as zc,s as jc,y as $c,z as xn}from"./chunk-QTCVWDVR.js";import"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import{g as Vr}from"./chunk-CBZ2RV36.js";import"./chunk-QMHGGMPE.js";import{a as Ts,c as xs}from"./chunk-GVYIP5Q5.js";import{Ra as qm,U as na}from"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import{b as un,i as cc,q as uc}from"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import{e as ar}from"./chunk-M43NTBTB.js";import{p as st}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as Po}from"./chunk-PMG6IXOR.js";import{a as As}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import{g as Qm,o as qr}from"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{A as Wm,B as Hm,L as Xm,S as Km,a as sn,b as an,c as Gr,k as ft,r as Gm,s as Vm}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import{c as fu}from"./chunk-XBUPORYF.js";import{b as Is}from"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{f as pu,h as ga,o as $}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import{a as uo,b as lu,k as gu}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{a as ru,e as du,h as ee,j as Pn,n as Ss}from"./chunk-WYX7GFOD.js";import{a as To}from"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as fe,g as la}from"./chunk-MJSLAJV6.js";import{A as Zm,C as zm,a as ne,c as mn,d as Wr,e as Jm,f as Hr,i as Go,k as Ut,m as Ym,n as de,p as so,q as pt,r as Xr,x as lt}from"./chunk-KC2XLVFC.js";import{B as ct,p as Rr,qa as k,ra as S}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{Aa as dc,a as Jr,g as Ve,ib as Yr,wa as dn,xa as fn,ya as pn}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import{c as Ne}from"./chunk-EAE2NUFS.js";import{c as jm,f as $m}from"./chunk-OLICTWCW.js";import{a as tr}from"./chunk-SDBZJWGW.js";import{b as wo,h as mc}from"./chunk-F3ILJHGP.js";import{a as cn,b as Io}from"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{$ as Mm,Z as me,aa as Um,ba as oa,c as ke,ca as nt,da as Om,e as Dr,ga as ta,ha as oe,ja as rn,k as Mr,m as Rm,n as ea,p as Dm,r as Ur,s as ut,t as dt,u as tn,v as nn,w as Or}from"./chunk-3F7OC7N7.js";import{b as ec,d as oc,f as tc,g as nc,h as rc,i as sc,j as ic,n as ac}from"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import{c as Kr}from"./chunk-OKGWI7CU.js";import{C as mm,E as cm,a as Ye,b as ro,c as ce,d as Ze,e as on,f as Ge,g as Dt,h as Re,j as Pr,k as zi,v as am}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{h as uu}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import{a as cu}from"./chunk-WN3TRBGI.js";import{c as B}from"./chunk-3FMJDUGT.js";import{c as Ao}from"./chunk-2O5TMJZM.js";import{K as dm,O as Uo,f as US,g as br,h as Mt,u as um}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{$ as kr,Bb as vr,Fb as Bm,Hb as Br,La as _m,Ma as Sm,Mb as Lm,Nb as Oo,Oa as Am,Pa as Im,Pb as G,Qa as Tm,Ra as xm,Rb as lo,Sa as hm,Ta as ym,Ua as Pm,Va as Nr,Vb as Lr,Wa as bm,Xa as km,Ya as Em,Za as Fm,da as Er,fa as fm,ha as pm,ib as wm,jb as $i,ka as lm,la as gm,ma as ji,pb as Qi,ta as Cm,ua as Fr,vb as Nm,xb as vm,y as im,za as wr}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{k as O,o as en,p as P}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as ve}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{$ as mu,E as Cs,I as We,J as au,R as ir,_ as _s,d as pa,f as gs,o as co,q as yo,r as iu,y as rt}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import{a as su}from"./chunk-IQUFNLVG.js";import{C as Ce,t as hn,w as yn}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as vo}from"./chunk-FB3ILH2L.js";import{b as h}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import{f as sm}from"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as Le,F as Yi,M as Qt,N as Zi,Q as Fo,e as om,f as Ji,g as er,l as tm,na as rm,pa as or,w as nm}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as A,o as r,p as d,q as s}from"./chunk-UWURTNRY.js";r();s();var to=A(h()),Rt=A(ve());Le();r();s();var Wn=A(h());var ef=A(ve());var GS=()=>{let e=(0,ef.useHistory)(),o=k(),t=S(qc),n=(0,Wn.useRef)(t);return n.current=t,(0,Wn.useEffect)(()=>{let{fromPage:i}=e.location?.state||{};return i&&o($c(i)),o(xn(!0)),()=>{n.current&&(o(ls()),o(ms()))}},[]),null},of=(0,Wn.memo)(GS);r();s();r();s();r();s();var ka=A(h());r();s();var Js=A(h());r();s();var qs={root:"_root_qw4qh_1",desc:"_desc_qw4qh_5",text:"_text_qw4qh_8"};var VS=()=>{let{coin:e}=C();return Js.default.createElement(pa,{closable:!1,type:pa.TYPE.info,className:qs.root},Js.default.createElement(B.Box,{className:qs.desc},P("wallet_extension_transfer_alertbanner_desc_sui_aptos_warning",{netaddress:Js.default.createElement("span",{className:qs.text},P("wallet_extension_transfer_alertbanner_placeholder_network_address",{network:e?.chainName}))})))},Ys=VS;r();s();var Kt=A(h()),gf=A(vo());r();s();var tf=A(h());var WS=()=>{let[e,o]=(0,tf.useState)(!1);return[ne(async n=>{try{o(!0);let{data:i}=await Km({txSource:1,coinId:n}),a="";if(i?.canRecharge||(a=i.rechargeMsg),i?.canWithdraw||(a=i.withdrawMsg),a){let m=co.warn({text:a,confirmText:P("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{m.destroy()}});return!1}return!0}catch{return We.error(P("wallet_home_toast_network_error")),!1}finally{o(!1)}}),e]},nf=WS;r();s();r();s();var bt=A(h());function HS({loading:e,tag:o,customRender:t,focus:n,noMargin:i,noPadding:a,onChange:m,onRef:c,...u}){let p=(0,bt.useRef)(null);(0,bt.useLayoutEffect)(()=>{n&&p.current?.focus?.()},[]);let l=P("wallet_extension_transaction_placeholder_input_address");return bt.default.createElement(yt.Row,{noMargin:i,noPadding:a},bt.default.createElement(yo.TextArea,{placeholder:l,errorType:yo.TIP_TYPE.always,size:yo.SIZE.xl,autoResize:!0,...u,onRef:f=>{p.current=f,c&&c(f)},onChange:f=>{m&&m(f.target.value)},customRender:({inputComponent:f})=>{let g=bt.default.createElement(yt.InputCustomRender,{inputComponent:f,loading:e,tag:o});return t?t({inputComponent:f,customInputComponent:g}):g}}))}var Ta=HS;r();s();var Me=A(h());var pf=A(vo());Le();r();s();var it=A(h());Le();r();s();var Zs=A(h()),rf=A(ve());r();s();var Bo=A(h());r();s();var kt={root:"_root_18lnh_1",content:"_content_18lnh_16",name:"_name_18lnh_24",text:"_text_18lnh_32",badge:"_badge_18lnh_39",address:"_address_18lnh_45",mainAddress:"_mainAddress_18lnh_51"};var XS=e=>{let{addressInfo:o,onSelect:t}=e,{address:n,name:i,addressType:a}=o;return Bo.default.createElement(B.Box,{className:kt.root,"data-testid":As.QUICK_ADDRESS,onClick:()=>{t(o)}},Bo.default.createElement(Md,{seed:n}),Bo.default.createElement(B.Box,{className:kt.content},i?Bo.default.createElement(Bo.default.Fragment,null,Bo.default.createElement(B.Box,{className:kt.name},Bo.default.createElement(B.Box,{className:kt.text},i),a?Bo.default.createElement(mu,{className:kt.badge},P(Bm[a])):null),Bo.default.createElement(B.Box,{className:kt.address},n)):Bo.default.createElement($.Text,{forceWrap:!0,className:kt.mainAddress},n)))},Hn=XS;r();s();var xa={empty:"_empty_8k5we_1",root:"_root_8k5we_4"};var KS=({list:e,onSelect:o})=>{let t=(0,rf.useHistory)();return e?.length?Zs.default.createElement("div",{className:xa.root},e.map(n=>n.list?.map(i=>Zs.default.createElement(Hn,{key:i.address,addressInfo:i,onSelect:o})))):Zs.default.createElement(rt.State,{className:xa.empty,type:rt.State.TYPE.noRecord,buttonText:P("wallet_extension_addressbook_btn_add_address"),onButtonClick:()=>{t.push(dc)}})},sf=KS;r();s();var bo=A(h()),af=A(vo());r();s();var Et={root:"_root_ajxpg_1",empty:"_empty_ajxpg_5",group:"_group_ajxpg_8",title:"_title_ajxpg_8",text:"_text_ajxpg_20",icon:"_icon_ajxpg_26",flip:"_flip_ajxpg_31"};var qS=({list:e,group:o,onSelect:t})=>{let[n,i]=(0,bo.useState)(!1);return bo.default.createElement(B.Box,{className:Et.group},bo.default.createElement(B.Box,{className:Et.title,onClick:()=>{i(a=>!a)}},bo.default.createElement("span",{className:Et.text},o),bo.default.createElement(pu,{className:(0,af.default)(Et.icon,"okx-wallet-plugin-arrow-small-down",{[Et.flip]:n})})),!n&&bo.default.createElement(B.Box,null,e.map(a=>bo.default.createElement(Hn,{key:a.address,addressInfo:a,onSelect:t}))))},JS=({list:e,onSelect:o})=>e?.length?bo.default.createElement("div",{className:Et.root},e.map(t=>t?.list&&t.list?.length&&bo.default.createElement(qS,{...t,onSelect:o}))):bo.default.createElement(rt.State,{className:Et.empty,type:rt.State.TYPE.noRecord}),mf=JS;r();s();var zs=A(h());r();s();var ha={empty:"_empty_8k5we_1",root:"_root_8k5we_4"};var YS=({list:e,onSelect:o})=>e?.length?zs.default.createElement("div",{className:ha.root},e.map(t=>t.list?.map(n=>zs.default.createElement(Hn,{key:n.address,onSelect:o,addressInfo:n})))):zs.default.createElement(rt.State,{className:ha.empty,type:rt.State.TYPE.noRecord}),cf=YS;r();s();var Xt={root:"_root_1tj3c_1",panelListClassName:"_panelListClassName_1tj3c_6",headerClassName:"_headerClassName_1tj3c_9",innerClassName:"_innerClassName_1tj3c_12"};var ZS=({addressList:e,onSelect:o,rawAddressList:t})=>{let n=Yi(t,"type"),i=Yi(e,"type"),{recently:a,account:m,book:c}=i;return it.default.createElement(B.Box,{className:Xt.root},it.default.createElement(ir.Underline,{noLine:!0,noPadding:!0,noActiveBorder:!0,headerClassName:Xt.headerClassName,panelListClassName:Xt.panelListClassName},n?.recently?.length?it.default.createElement(ir.TabPane,{innerClassName:Xt.innerClassName,tab:P("wallet_extension_books_tab_recent_addresses"),id:"wallet_extension_books_tab_recent_addresses"},it.default.createElement(cf,{list:a,onSelect:o})):null,n?.account?.length?it.default.createElement(ir.TabPane,{innerClassName:Xt.innerClassName,tab:P("wallet_extension_books_tab_my_wallets"),id:"wallet_extension_books_tab_my_wallets"},it.default.createElement(mf,{list:m,onSelect:o})):null,it.default.createElement(ir.TabPane,{innerClassName:Xt.innerClassName,tab:P("wallet_extension_books_tab_address_book"),id:"wallet_extension_books_tab_address_book"},it.default.createElement(sf,{list:c,onSelect:o}))))},uf=ZS;r();s();r();s();var zS=()=>84,df=zS;var ff=df;r();s();var ya={selected:"_selected_pqfgm_1",pt20:"_pt20_pqfgm_11"};function $S({value:e,network:o}){let t=k(),[n,i]=(0,Me.useState)(!1),[a,m]=(0,Me.useState)({}),[c,u]=(0,Me.useState)(""),p=pd(()=>{u(Ws.TYPE.ADD),m({address:e,network:o}),i(!0)}),l=(g={name:""})=>{i(!1),m({}),u(""),g.name&&t(sr({name:g.name,type:ea.ADDRESS_BOOK}))},f=g=>{i(!1),setTimeout(()=>{u(Ws.TYPE.EDIT),m({...g,network:o}),i(!0)})};return Me.default.createElement(Me.default.Fragment,null,Me.default.createElement(yt.InputBottomBar,{title:P("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:P("wallet_extension_send_anchor_add_now"),buttonClick:p}),Me.default.createElement(Ws,{visible:n,type:c,data:a,onClose:l,onChangeToEdit:f}))}function QS(e,o,t){let n=t?.matchAddress||((i,a)=>or(a.address).includes(or(i))||a.name&&or(a.name).includes(or(i)));return(0,Me.useMemo)(()=>{if(!e?.length)return[];if(!o)return e;let i=[];return e.forEach(({group:a,type:m,list:c})=>{let u=[];c.forEach(p=>{n(o,p)&&u.push(p)}),u.length&&i.push({group:a,type:m,list:u})}),i},[e,o])}function eA({value:e,error:o,onChange:t,isCheckingError:n,extraProps:i,onBlur:a,onFocus:m,addressTextAreaSlot:c,...u}){let p=k(),l=Ee(),{coin:f}=C(),{localType:g}=f,_=S(ds),x=b(),T=kn({localType:g}),I=T({address:e,mode:"HEX"}),{filterAddress:y,disableRequestDomain:E}=i||{},N=!I,w=!!I&&!o&&!_?.name&&!n,v=fd(g,x),R=(0,Me.useMemo)(()=>y?y(v):v,[v,y]),D=QS(R,e,i),M=dd(g),U=q=>{t(q);let pe=M(q,void 0,!0),ye=Boolean(q&&pe);p(sr(ye?pe:null))},{loading:H,abort:W}=Wu({domainInputValue:I,coinId:l},({address:q,domain:pe})=>{p(fs({key:"",args:{}})),t(T({address:q})),p(sr({name:pe,type:ea.ENS}))},E),X=pt(!!H||!!u.loading||!!n,{wait:200}),ae=ff(),se=q=>{let{walletId:pe,address:ye,name:be,type:Je,group:no,addressType:et}=q;if(W(),t(ye),be){let ot=no?`${no} - ${be}`:be;p(sr({name:ot,type:Je,extra:{walletId:pe,group:no,name:be,addressType:et}}))}};return Me.default.createElement("div",{className:(0,pf.default)(ya.selected,{[ya.pt20]:!c?.top}),style:{bottom:ae}},c?.top,Me.default.createElement(yt.Row,{noMargin:!0},Me.default.createElement(Ta,{...u,noMargin:!0,noPadding:!0,loading:X,tag:_?.name,focus:N,value:e,error:!X&&o,onChange:U,onBlur:q=>{a&&a(q)},onFocus:q=>{m&&m(q)}}),w&&Me.default.createElement($S,{network:g,value:e})),Me.default.createElement(uf,{addressList:D,rawAddressList:v,onSelect:se}))}var Pa=eA;r();s();var ur=A(h());function tA({Component:e=Pa,loading:o=!1,extraProps:t,addressTextAreaSlot:n={},errorFns:i={fns:[],override:!1}}){let a=k(),c=Xe().get("address"),u=F("raw"),p=S(us),{baseCoin:l}=C(),f=kn({localType:l.localType}),g=Ju(),{isCheckingError:_,runErrorFns:x}=wn(g,i),T=E=>{x(E,N=>{a(fs(N))})},I=E=>{a(eu(E))},y=E=>{T(f({address:E,mode:"HEX"})),I(E)};return(0,ur.useEffect)(()=>{c&&I(c)},[]),(0,ur.useEffect)(()=>{a(Qc(_))},[_]),ur.default.createElement(e,{value:u,onChange:y,loading:o,isCheckingError:_,addressTextAreaSlot:n,error:p?.key?P(p?.key,p?.args):null,extraProps:t||{}})}var ba=tA;r();s();var lf={pt20:"_pt20_bcidn_1"};var nA=({headerProps:e={},addressProps:o={},confirmButtonProps:t={}})=>{let n=Ee(),i=bs(),a=Xu(),m=Fn(),[c,u]=nf(),p=(0,Kt.useMemo)(()=>{let{disabled:l,loading:f,onClick:g,..._}=t||{},x=l||i,T=async()=>{let I=g||m;await c(n)&&await I()};return[{disabled:x,size:Ce.SIZE.lg,type:Ce.TYPE.highlight,category:Ce.CATEGORY.fill,btnText:P("wallet_extension_send_btn_next_step"),loading:!x&&(f||a||u),onClick:T,..._}]},[t,i,a,m,c,u,n]);return Kt.default.createElement(Vs,{footerActions:p,slot:{header:Kt.default.createElement(Dd,{...e,title:P("wallet_extension_send_title_recipient_address"),pageIndex:1})}},Kt.default.createElement("div",{className:(0,gf.default)({[lf.pt20]:!o?.addressTextAreaSlot?.top})},Kt.default.createElement(ba,{...o})))},Z=nA;var rA=()=>ka.default.createElement(Z,{addressProps:{addressTextAreaSlot:{top:ka.default.createElement(Ys,null)}}}),Cf=rA;r();s();var If=A(h());r();s();var Sf=A(h());r();s();var _f=A(h());function sA({transferType:e,fungibleAssetTransferType:o,tokenTransferType:t}){let{coin:n}=C(),i=F(),a=ie(),{baseCoinId:m,protocolType:c,address:u}=n||{};return(0,_f.useCallback)(p=>{let{sequenceNumber:l,chainId:f,expirationTimestampSecs:g,tyArg:_,maxGasAmount:x,gasUnitPrice:T}=p||{},I={recipientAddress:i,amount:a},y={base:{sequenceNumber:l,chainId:f,maxGasAmount:x,gasUnitPrice:T,expirationTimestampSecs:g}};return m===0&&(y.type=e,y.data={...I}),m!==0&&c===lo.APTOS_FUNGIBLE_TOKEN&&(y.type=o,y.data={...I,fungibleAssetMetadataAddress:u}),m!==0&&c===lo.APTOS_TOKEN&&(y.type=t,y.data={...I,tyArg:_}),y},[i,a,m,c,u])}var js=sA;var iA=()=>{let[e,{setFalse:o}]=de(!0),t=F(),{coin:n}=C(),i=b(),a=k(),m=js({transferType:dt.SIMULATE_TRANSFER,fungibleAssetTransferType:dt.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:dt.SIMULATE_TOKEN_TRANSFER_V2}),{chainId:c,coinId:u}=n,p=uo();return(0,Sf.useEffect)(()=>{c&&i&&t&&(async()=>{try{let{data:f={}}=await sn({coinId:u,fromAddr:i,scenario:Mr.SCENARIO_SEND_COIN}),g=await Ne().getPublicKey(i,pm,p),_=m(f.info),{gasFee:{fee:x,gasLimit:T,gasPrice:I},popupInfoList:y,preExeStatus:E}=await ft({dappData:JSON.stringify({transaction:{..._.data,..._.base,to:t,publicKey:g},data:{}}),dappInfo:{},to:t,method:"wallet_inner_transfer",from:i,chainIndex:c});a(V(x)),a(wc({maxGasAmount:T,gasUnitPrice:I})),y?.length&&a(It(y)),a(L(E===!1))}catch{a(L(!0))}finally{o()}})()},[c,i,t]),e},Af=iA;function aA(){let e=Af();return Q(),If.default.createElement(J,{confirmButtonProps:{loading:e},totalAmountProps:{type:"amount"}})}var Tf=aA;r();s();var Nf=A(h());r();s();var $e=A(h());Le();r();s();var xf=A(h());function hf(){let e=k(),o=Ke(),t=ze();(0,xf.useEffect)(()=>{if(o){let n=t;Ge(n,0)&&(n="0"),e(ou(n))}},[o,t])}r();s();r();s();var Ea=A(h()),yf=A(ve());var mA=({disabled:e,onSubmit:o,feeLoading:t,loading:n,onClick:i,networkFee:a,renderActions:m,...c},u)=>{let p=(0,yf.useHistory)(),l=Ho(),{coin:f}=C(),g=b(),{loading:_,onClick:x}=td(o),T=od(),I=mn(()=>{if(m&&typeof m=="function"){let y=m(u);if(y)return y}return[{actionType:hs.ACTION_TYPE.CANCEL,onClick:()=>{p.goBack()}},{loading:n||_,disabled:e||T||t,actionType:hs.ACTION_TYPE.CONFIRM,onClick:i||x,"data-testid":As.SEND_PAGE.SEND_CONFIRM_BUTTON,...c}]},[t,n,f?.coinId,T,x,e,u,l?.coinId,g,_,i,c]);return Ea.default.createElement(Is,{usePortal:!0,offsetBottom:0,placeholder:!0},Ea.default.createElement(hs,{buttonGroup:I}))},Pf=mA;var bf=Pf;r();s();var kf=A(h());var cA=({loading:e,chainName:o,feeLevel:t,onClick:n,...i},a)=>{let m=Y(),c=Ko(),u=Be(),p=Gu(),l=ys(),f=ht(),g=n?()=>{n(),a({trade:"send",network:o,all_confirmation:"network_fee"})}:void 0,_=(0,kf.useMemo)(()=>t!==void 0?t:me?.STANDARD,[t]);return{gasReturn:f,currencyId:u,networkFee:p&&m==="0"?void 0:m,loading:e||p,level:_,coinId:c,estimateFailed:!!l,onClick:g,...i}},Ef=cA;r();s();var uA=()=>{let e=Ke(),o=C(),t=S(zc),n=Be(),i=o?.coin?.coinId,a=K(),m=Iu(i,a,{currencyId:n}),c=S(Jc);return mn(()=>{let u=0,p=0;return t===Fu?e?(p=O.mul(m,-1),u=O.mul(a,-1)):(u=void 0,p=O.mul(c,-1)):(u=O.mul(a,-1),p=void 0),{currencyId:n,coinId:i,assetChange:u,useMinPrecision:!0,currencyAssetChange:p,isSend:!0}},[t,n,i,e,m,c,a])},Ff=uA;function dA({loading:e,networkFeeProps:o={},confirmButtonProps:t={},containerProps:n={},tipMessageProps:i={},slot:a={},checkEmpty:m=!0,addressType:c,renderMessage:u,renderTipActions:p,defaultMessage:l,canTransferAmount:f,tipActions:g=[]}){let{coin:_,baseCoin:x}=C(),T=F("raw"),I=S(ds),y=uo(),E=hd(y),N=kn({localType:x.localType}),w=S(jc),v=S(pc),R=b(),D=Ff(),M=Ef({...o,chainName:_?.chainName},E),{loading:U,estimateFailed:H}=M,X=M?.gasReturn?.activity?.errorCode,{bottom:ae,networkFee:se,footer:q}=a,pe=[$e.default.createElement(On,{key:"network-new",coinId:M.coinId}),$e.default.createElement(Ms,{key:"network-fee-enter",...M})];se&&Ji(se)&&(pe=se(M)),se&&!Ji(se)&&(pe=se),Ud(m),hf(),(0,$e.useEffect)(()=>{X===0&&qm({wallet_address:R,chain_id:x.chainId,transaction_type:"transfer"})},[X]);let ye=bf({...t,feeLoading:U},w?.type||v),be,Je,no=()=>w?.text||!!w?.key&&P(w.key,w?.args);return w?.type===oe.PREFERRED_MESSAGE?(be=w?.type,Je=no()):H?be=Ad.TIP_TYPE.FEE_ERROR:(be=w?.type||v,Je=no()||l),$e.default.createElement(Vs,{...n,loading:e,slot:{header:$e.default.createElement(ud,{...i,address:R,coinId:_?.coinId,actions:g,renderActions:p,renderMessage:u,type:be,message:Je,addressType:c}),footer:q||ye}},$e.default.createElement(cd,{txType:ke.TRANS_OUT}),$e.default.createElement(Od,null,$e.default.createElement(ga.Thin,null),$e.default.createElement(gd,{...D}),$e.default.createElement(ga.Thin,null),pe,$e.default.createElement(_a,{address:N({address:R}),addressType:c,title:P("extension_send_mid_text_from"),walletId:y,onCopyCallback:()=>{E({trade:"send",network:_?.chainName,all_confirmation:"wallet_used_address"})}}),$e.default.createElement(_a,{tags:I?.name?[I?.name]:null,address:T,title:P("extension_send_mid_text_to"),onCopyCallback:()=>{E({trade:"send",all_confirmation:"to_address",network:_?.chainName})}}),!!f&&$e.default.createElement(vd,{coinBalance:f,coinId:x.coinId}),ae))}var z=dA;r();s();r();s();var MF={[rn.NEW]:"seed_phrase",[rn.IMPORT]:"seed_phrase",[rn.HARD_WALLET]:"hardware",[rn.MPC_WALLET]:"mpc",[rn.PRIVATE_KEY]:"private_key"},j={SEND:"send",SEND_X402:"send_x402",SWAP:"swap",DAPP:"dapp"};var wf=()=>{let{coin:e}=C(),o=b(),t=ie(),n=F(),i=S(fc),a=ee(),{gasUnitPrice:m,maxGasAmount:c}=i,u=js({transferType:dt.TRANSFER,fungibleAssetTransferType:dt.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:dt.TOKEN_TRANSFER_V2}),p=Se(),l=Ae({fromAddr:o,walletId:a,localType:Qi}),f=_e({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:n,networkFee:Ye(m,c),localType:Qi,businessType:j.SEND});return ge(async()=>await p({coinId:e.coinId,address:o,fromAddr:o,toAddr:n}),async(I={})=>{let y=u({...I,gasUnitPrice:m,maxGasAmount:c}),E=await l({params:y});return{signInfo:I,signedTx:E}},async({signInfo:I,signedTx:y})=>{let{sequenceNumber:E}=I,N={nonce:E},w={extJson:JSON.stringify(N)};return await f(y,w)})};function fA(){let e=wf(),o=async()=>{await e()};return te(),Nf.default.createElement(z,{confirmButtonProps:{onSubmit:o}})}var vf=fA;r();s();r();s();var Bf=A(h());var pA=()=>{let e=k(),{coin:o,baseCoin:t}=C(),{baseCoinId:n}=o,i=Y(),a=ee(),m=Gd({accountId:a,chainIndex:t?.chainId}),c=He(o.coinId,a),u=m?.coinAmountInt,p=c?.coinAmountInt;(0,Bf.useEffect)(()=>{if(!!u){if(n===0){let l=on([0,Ze(u,i)]);e(le(l))}else e(le(p));e(mo(u))}},[e,n,u,p,i])},Lf=pA;var lA=({children:e})=>(Lf(),e),Rf=lA;var gA={match:e=>rc(e),SubContainer:Rf,pages:{AddressPage:Cf,AmountPage:Tf,ConfirmPage:vf}},Df=gA;r();s();r();s();var Gf=A(h());r();s();var dr=A(h()),Mf=A(ve());var CA=()=>{let{coinId:e}=(0,Mf.useParams)(),t=fo(e)?.protocolId,n=Object.values(G),i=du(),a=i.filter(({keyringIdentityType:f})=>$m(f)),m=i.filter(({keyringIdentityType:f})=>f===Lm.MPC),c=(f,g)=>!f.some(({walletIdentities:_})=>_.some(({addressType:x={}})=>{let T=x[kr];return T?T.some(({address:I})=>g.address===I):!1})),u=(0,dr.useCallback)(f=>n.includes(t)?c(a,f):!0,[a,t,n]),p=(0,dr.useCallback)(f=>[G.BRC_20,G.FRACTAL_BRC20].includes(t)?!0:n.includes(t)?c(m,f):!0,[m,t,n]),l=(0,dr.useCallback)((f=[])=>f.filter(g=>u(g)&&p(g)),[u,p]);return(0,dr.useCallback)(f=>f.map(g=>({...g,list:l(g?.list)})).filter(g=>g?.list?.length),[l])},Xn=CA;r();s();function _A(){let e=qo(),o=qu();return[e,o]}var Uf=_A;r();s();var $s=A(ve());r();s();function Yo(){return Xe().get("type")||Jo.SEND}var SA=()=>{let[e,{setTrue:o,setFalse:t}]=de(!1),n=b(),i=F(),{coin:a,baseCoin:m}=C(),c=Vn(),{coinId:u}=(0,$s.useParams)(),p=(0,$s.useHistory)(),l=Yo();return{onClick:async()=>{try{o(),await c({from:n,to:i,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId}),p.push(`${Ve}/${u}${pn}?type=${l}&from=${n}`)}catch{}finally{t()}},loading:e}},Of=SA;function AA(){let e=Uf(),o=Xn(),{onClick:t,loading:n}=Of();return Gf.default.createElement(Z,{confirmButtonProps:{onClick:t,loading:n},addressProps:{errorFns:{fns:e,override:!0},extraProps:{filterAddress:o}}})}var Vf=AA;r();s();var mp=A(h());r();s();var Co=A(h());var np=A(ve()),rp=A(vo());r();s();var ue=A(h()),qt=A(vo());r();s();var ko={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var IA=({lockedAmount:e,lockedAmountDisplay:o,catTotalAmount:t,catTotalAmountDisplay:n,pendingXrc:i,pendingXrcDisplay:a,availableWithoutSpending:m,availableWithoutSpendingDisplay:c,availableReceiving:u,availableReceivingDisplay:p,goToInscribe:l,addressType:f="",coinId:g})=>{let{handleClick:_}=Vd(f,Number(g));return ue.default.createElement(B.Box,{className:(0,qt.default)(ko.container)},Number(e)>0&&ue.default.createElement(B.FlexBox,{justify:"space-between"},ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{type:$.TYPE.secondary,size:$.SIZE.xs},P("extension_wallet_btc_in_use"))),ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{className:ko.amount},o),ue.default.createElement($.Text,{size:$.SIZE.xs,className:(0,qt.default)(ko.link),onClick:_},P("extension_wallet_btc_btn_unlock_use")))),Number(i)>0&&ue.default.createElement(B.FlexBox,{justify:"space-between",className:(0,qt.default)(ko.pendingAssets)},ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{type:$.TYPE.secondary,size:$.SIZE.xs},P("extension_wallet_btc_select_receiving"))),ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{className:ko.amount},a))),Number(m)>0&&ue.default.createElement(B.FlexBox,{justify:"space-between"},ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{className:ko.amount},P("extension_wallet_btc_to_be_inscribed"))),ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{type:$.TYPE.secondary,size:$.SIZE.xs},c),ue.default.createElement($.Text,{size:$.SIZE.xs,className:(0,qt.default)(ko.link),onClick:l},P("extension_wallet_btc_btn_inscribe")))),Number(u)>0&&ue.default.createElement(B.FlexBox,{justify:"space-between",className:(0,qt.default)(ko.pendingAssets)},ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{type:$.TYPE.secondary,size:$.SIZE.xs},P("extension_wallet_btc_select_receiving"))),ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{className:ko.amount},p))),Number(t)>0&&ue.default.createElement(B.FlexBox,{justify:"space-between",className:(0,qt.default)(ko.pendingAssets)},ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{type:$.TYPE.secondary,size:$.SIZE.xs},P("wallet_extension_cat_desc_total_amount"))),ue.default.createElement(B.Box,null,ue.default.createElement($.Text,{className:ko.amount},n))))},Kn=IA;r();s();function TA(){let e=b(),{coin:o}=C();return Wd(o,e)}var Ft=TA;r();s();var xe=A(h());var Xf=A(vo());r();s();var Lo=A(h()),Fa=A(vo());r();s();var xA="md",hA="lg",Wf=e=>{let{className:o,size:t,disabled:n,checked:i,coinImage:a,coinAmountText:m,inscriptionId:c,onChange:u}=e,p=`inscription-select-container-${t}`,l=n?"inscription-select-disabled":null;return Lo.default.createElement("div",{className:(0,Fa.default)("inscription-select-container",p),onClick:u},n?Lo.default.createElement("div",{className:"inscription-select-confirm"},P("extension_wallet_send_tag_confirming")):null,Lo.default.createElement("div",{className:(0,Fa.default)("inscription-select",l,o)},n?null:Lo.default.createElement("div",{className:"inscription-select-radio-container"},Lo.default.createElement(iu.Circle,{checked:i})),Lo.default.createElement("div",{className:"inscription-select-coin"},Lo.default.createElement(Cs,{className:"inscription-select-coin-image",src:a,errorImg:Kr,width:14,height:14}),Lo.default.createElement(Sa,{text:m,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),Lo.default.createElement("div",{className:"inscription-select-id"},Lo.default.createElement(Sa,{text:c,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Wf.size={md:xA,lg:hA};var qn=Wf;r();s();var Ue=A(h());r();s();var wt={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function yA(){let{coin:e}=C(),o=Ft();return Ue.default.createElement("div",{className:wt.header},Ue.default.createElement("div",{className:wt.amount},Ue.default.createElement(Cs,{className:wt.logo,src:e.image,errorImg:Kr,width:20,height:20}),o?.transferableWithoutSpendingDisplay))}function PA({loading:e,list:o,visible:t,onClose:n,value:i,onSelected:a,request:m}){let{coin:c}=C(),[u,p]=(0,Ue.useState)({}),{run:l}=zm(f=>{e||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&m&&m()},{wait:300});return(0,Ue.useEffect)(()=>{t&&p(i)},[t]),Ue.default.createElement(co,{isFull:!0,topContent:Ue.default.createElement(yA,null),footer:Ue.default.createElement(yt.ConfirmButton,{onClick:()=>{a(u)}},P("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:t,onClose:n,renderContent:()=>Ue.default.createElement("div",{className:wt.scrollContent,onScroll:l},Ue.default.createElement("div",{className:wt.content},o.map((f,g)=>Ue.default.createElement("div",{className:wt.cell},Ue.default.createElement(qn,{key:g,size:qn.size.lg,coinImage:c.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:u[f.inscriptionId],onChange:()=>{p(_=>({..._,[f.inscriptionId]:!_[f.inscriptionId]}))}})))),e&&Ue.default.createElement("div",{className:wt.loading},Ue.default.createElement(yn.Circle,{size:yn.SIZE.sm})))})}var Hf=PA;r();s();var Jn={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function bA({loading:e,list:o,request:t,onSelected:n},i){let{coin:a}=C(),[m,c]=(0,xe.useState)(!1),u=S(xo),[p,l]=(0,xe.useState)(u.reduce((_,x)=>({..._,[x.inscriptionId]:!0}),{})),{selected:f,showed:g}=(0,xe.useMemo)(()=>{let _=o.filter(T=>!!p[T.inscriptionId]),x=o.filter(T=>!p[T.inscriptionId]);return{selected:_,unselected:x,showed:o.map(T=>_.includes(T)?{...T,checked:!0}:T)}},[o,p]);return(0,xe.useEffect)(()=>{n(f)},[f]),(0,xe.useImperativeHandle)(i,()=>({onMax:()=>{l(o.reduce((_,x)=>({..._,[x.inscriptionId]:!0}),{}))}})),xe.default.createElement(xe.default.Fragment,null,xe.default.createElement("div",{className:Jn.root},xe.default.createElement("div",{className:Jn.title,onClick:()=>{c(!0)}},P("extension_wallet_send_text_select_transferable"),xe.default.createElement(hn,{className:(0,Xf.default)(Jn.arrow,"okx-wallet-plugin-right")})),xe.default.createElement("div",{className:Jn.content},g.map(_=>xe.default.createElement("div",{className:Jn.cell,key:_.key},xe.default.createElement(qn,{coinImage:a.image,size:qn.size.md,coinAmountText:`${_.tokenAmount} ${_.tick}`,inscriptionId:_.inscriptionId,checked:_.checked,onChange:x=>{x.stopPropagation(),l(T=>({...T,[_.inscriptionId]:!T[_.inscriptionId]}))}}))))),xe.default.createElement(Hf,{visible:m,value:p,loading:e,list:o,request:t,onSelected:_=>{l(_),c(!1)},onClose:()=>{c(!1)}}))}var Kf=(0,xe.forwardRef)(bA);r();s();var Nt=A(h());function kA(e){let{coin:o}=C();return(0,Nt.useCallback)(()=>e.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:o.symbol},type:"inscribe"}:null,[e])}function qf(){let e=Ho();return o=>{let t="";return o.key&&(t=P(o?.key,o?.args)),o?.type===oe.FEE_BALANCE_INSUFFICIENT?Nt.default.createElement(Nt.default.Fragment,null,t," ",Nt.default.createElement(Pt,{coin:e})):o?.type==="inscribe"?Nt.default.createElement(Nt.default.Fragment,null,t):t}}function EA(e,o){let t=k(),n=Fs(),i=kA(o),a=[n,i],{runErrorFns:m}=wn(a,[]);ks(m,c=>{t(tu(c))},e)}var Jf=EA;r();s();var Yf=A(ve());function FA(){let e=k(),o=(0,Yf.useHistory)(),{coin:t}=C(),n=b();return()=>{e(ms()),e(ls()),o.push(`${Ve}/${t.coinId}${dn}?type=${Jo.INSCRIBE}&from=${n}`)}}var Zf=FA;r();s();var jf=A(h());r();s();var fr=A(h());function wa(){let{baseCoin:e}=C(),o=b(),[,t]=go({coinId:e.coinId,address:o,chainId:e.chainId},{pollingInterval:20*1e3});return t||{}}function wA(e,o){let i=(()=>255)(),a=e||o?.normal||"0",[m,c]=(0,fr.useState)("0");return(0,fr.useEffect)(()=>{if(i&&a){let u=Ye(i,a);c(u)}},[i,a]),{fee:m,satBytes:a,bytes:i}}function NA(e){let o=k(),t=wa(),n=wA(e,t);return(0,fr.useEffect)(()=>{o(No({name:"signInfo",value:t}))},[t]),{...n,signInfo:t}}var zf=NA;function vA(){let e=k(),{fee:o}=zf();(0,jf.useEffect)(()=>{e(V(o))},[o])}var $f=vA;r();s();var ep=A(h());r();s();var Qs=A(h());r();s();function BA(){let{selectedSat:e,signInfo:o}=S($r),t;return e.type===me.CUSTOM?t=e.satBytes:t=o?.[Um[e.type]],t||0}var Zo=BA;function LA({coinId:e}){let[o,t]=(0,Qs.useState)(!0),n=k(),i=b(),a=Hs({coinId:e}),m=Zo();return(0,Qs.useEffect)(()=>{(async()=>{let u;try{u=(await a({from:i,coinAmount:0,serviceCharge:0,feeRate:m})).canTransferAmount||"0"}catch{u="0"}t(!1),n(mo(u))})()},[i,m]),o}var Qf=LA;function RA({coinId:e}){let o=k(),t=Ft(),n=Qf({coinId:e});return(0,ep.useEffect)(()=>{o(le(t?.transferableWithoutSpending))},[t?.transferableWithoutSpending]),n}var op=RA;r();s();var Yn=A(h());function DA(){let{coin:e,baseCoin:o}=C(),t=b(),n=ee(),[i,a]=(0,Yn.useState)({from:1,size:10});return async()=>{let m={utxoType:je.BRC20_CONVERTIBLE,address:t,tick:e.symbol,protocolId:Lr(e.chainId)},c={coinId:o.coinId,utxoRequests:[{...m,...i}],accountId:n},{data:u}=await Uo(Ao.getBTCUTXO,c),p=(u?.[0]?.utxoList||[]).map(f=>({...f,tokenAmountInt:f.tokenAmount,tokenAmount:ro(f.tokenAmount,10**e.decimals)})),l=p.length===i.size;return l&&a(f=>({...f,from:f.from+1})),{list:p,more:l}}}function MA(){let e=(0,Yn.useRef)(!0),[o,t]=(0,Yn.useState)(!0),[n,i]=(0,Yn.useState)([]),a=DA(),m=async()=>{if(!!e.current){t(!0);try{let{more:c,list:u}=await a();i(p=>[...p,...u]),e.current=c}finally{t(!1)}}};return Go(()=>{m()}),{list:n,loading:o,request:m}}var tp=MA;r();s();var ei={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function UA(){let e=(0,np.useHistory)(),o=k(),{coin:t,baseCoin:n}=C(),i=S(xo),a=Zf(),m=qf(),c=Yo(),u=b(),p=(0,Co.useMemo)(()=>i.reduce((v,{tokenAmount:R})=>ce(v,R),0),[i]),{loading:l,list:f,request:g}=tp(),_=op({coinId:n.coinId}),x=f.length>0,T=l||_;$f(),Jf(T,f);let{availableWithoutSpending:I,availableWithoutSpendingDisplay:y,availableReceiving:E,availableReceivingDisplay:N}=Ft();if(f.length===0&&T)return Co.default.createElement("div",{className:ei.loading},Co.default.createElement(yn.Circle,{size:yn.SIZE.xl}));let w=Co.default.createElement(Is.FooterActions,{usePortal:!0,className:(0,rp.default)(ei.inscribeFooter)},Co.default.createElement(Ce,{block:!0,type:Ce.TYPE.highlight,size:Ce.SIZE.lg,onClick:a},P("extension_wallet_btc_btn_inscribe")),Co.default.createElement(Ce,{block:!0,type:Ce.TYPE.highlight,size:Ce.SIZE.lg,disabled:!0},P("wallet_extension_send_btn_continue")));return Co.default.createElement(J,{checkEmpty:!1,inputAmount:p,renderError:m,classes:{content:x?ei.content:""},slot:{bottom:x?Co.default.createElement(Kf,{loading:T,list:f,request:g,onSelected:v=>{o(No({name:"brc20UtxoList",value:v}))}}):null,footer:f.length===0&&Number(I)>0?w:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:i.length===0,onClick:()=>{e.push(`${Ve}/${t.coinId}${fn}?type=${c}&from=${u}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:P("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:Co.default.createElement(Co.default.Fragment,null,(Number(I)>0||Number(E)>0)&&Co.default.createElement(Kn,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:I,availableWithoutSpendingDisplay:y,availableReceiving:E,availableReceivingDisplay:N,goToInscribe:a}))}}})}var sp=UA;r();s();var ip=A(h()),oi=A(ve());function OA(){let{coinId:e}=(0,oi.useParams)(),o=(0,oi.useHistory)(),t=Yo(),n=b();return ip.default.createElement(Jd,{onConfirm:()=>{o.push(`${Ve}/${e}${pn}?type=${t}&from=${n}`)}})}var ap=OA;var GA={[Jo.SEND]:sp,[Jo.INSCRIBE]:ap};function VA(){let e=Yo(),o=GA[e];return o?mp.default.createElement(o,null):null}var cp=VA;r();s();var yp=A(h());r();s();var Fe=A(h());var Ip=A(ve());r();s();var pr=A(h());r();s();var zo=A(h()),up=A(vo());r();s();var Jt={"retina-border-basic":"_retina-border-basic_1kv1l_1",retinaBorderBasic:"_retina-border-basic_1kv1l_1",utxoTextWrap:"_utxoTextWrap_1kv1l_29",utxoText:"_utxoText_1kv1l_29",utxoTextSymbol:"_utxoTextSymbol_1kv1l_72",utxoTextAmount:"_utxoTextAmount_1kv1l_75",badge:"_badge_1kv1l_79"};var WA=e=>{let{address:o,isNeedToSign:t,coinAmount:n,symbol:i}=e;return zo.default.createElement(B.FlexBox,{justify:"space-between",align:B.ALIGN.center,className:Jt.utxoTextWrap},zo.default.createElement(B.FlexBox,{align:B.ALIGN.center},zo.default.createElement($.Text,{className:Jt.utxoText,ellipsis:{tooltip:!0}},o),t&&zo.default.createElement(gs,{className:Jt.badge,color:gs.COLOR.green,type:gs.TYPE.rect},P("extension_wallet_transaction_label_signature"))),zo.default.createElement(B.FlexBox,{align:B.ALIGN.center,className:(0,up.default)(Jt.utxoText,Jt.utxoTextAmount)},zo.default.createElement($.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),zo.default.createElement($.Text,{inherit:!0,strong:!0,className:Jt.utxoTextSymbol},i)))},dp=(0,zo.memo)(WA);r();s();var fp={"retina-border-basic":"_retina-border-basic_ba0cj_1",retinaBorderBasic:"_retina-border-basic_ba0cj_1",utxosBlock:"_utxosBlock_ba0cj_29",utxoBorder:"_utxoBorder_ba0cj_33"};var HA=({utxos:e})=>pr.default.createElement(B.Box,{className:fp.utxosBlock},e.map((o,t)=>{let{address:n,coinAmount:i,isNeedToSign:a,symbol:m}=o||{};return pr.default.createElement(dp,{key:t,address:n,coinAmount:i,isNeedToSign:a,symbol:m})})),Na=(0,pr.memo)(HA);r();s();Le();r();s();var pp=A(h());function XA(e){let o=S(ct),t=b(),n=S(xo),i=Zo(),a=F(),m=Ss(o);return(0,pp.useCallback)(async c=>{if(!c.length)return null;let u={address:t,feePerB:i,inputs:[...n.map(({txHash:l,vout:f,coinAmount:g})=>({vOut:f,txId:l,amount:g})),...c.map(({txHash:l,vout:f,coinAmount:g})=>({vOut:f,txId:l,amount:g}))],outputs:n?.map(({coinAmount:l})=>({amount:l,address:a}))||[]};return await bu(u,t,kr,o,{fake:e===Ls.CAL_FEE&&m})},[n,i])}var lp=XA;function KA(){let e=k(),{coin:o,baseCoin:t}=C(),n=S(xo),i=b(),a=F(),m=Y(),c=K(),u=S(ct),p=gu(u),l=Be(),g=Qm(o)?ke.BRC20_SEND:ke.BRC30_SEND,_=lp(Ls.CONFIRM),x=Hs({walletId:u,coinId:t?.coinId}),T=Zo(),I=Dn({address:i,coinId:o.coinId,currencyId:l,txType:g,protocolId:Lr(o.chainId)}),y=_e({businessType:j.SEND}),E=Du(u,er),N=async v=>{try{await E();let R=await _(v.utxoList||[]),D=await Te(o.localType,R),M=p?.serverWalletType,U={txSource:Oo.NORMAL,toAdr:a,coinId:o.coinId,txHash:D,signedTx:R,walletId:u,serviceCharge:m,fromAdr:i,coinAmount:c,walletType:M,txType:g,extJson:JSON.stringify({nftIds:n.reduce((H,W)=>[...H,...(W.nftLocaltionVOs||[]).map(({nftId:X})=>X)],[])})};await y(R,U)}catch(R){let D=R;D?.error_message&&We.error(D.error_message)}};return async()=>{let v=await x({from:i,coinAmount:0,serviceCharge:m,feeRate:T}),R=v.utxoList||[];return e(No({name:"feeUtxoList",value:R||[]})),await I([...n||[],...R||[]],er),await N(v)}}var gp=KA;r();s();function qA(){let e=k(),t=[ws()],{runErrorFns:n}=wn(t,[]);ks(n,i=>{e(nu(i))})}var Cp=qA;r();s();var _p=A(h());function Sp(){let e=k(),o=wa();(0,_p.useEffect)(()=>{e(No({name:"signInfo",value:o}))},[o])}function Ap(){let e=Ee(),o=k(),t=b(),n=F(),i=ee(),a=Zo(),m=S(xo),[c,u,p]=Ds({coinId:e,toAddr:n,walletId:i,fromAddr:t,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:m},{onSuccess:(l,f)=>{o(V(l)),o(No({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:c,fee:u,feeError:p}}r();s();var va={network:"_network_xahj5_1",data:"_data_xahj5_6",dataTitle:"_dataTitle_xahj5_12",title:"_title_xahj5_19"};function JA(){let e=b(),o=F(),t=Y(),n=S(xo),i=S(hc),{baseCoin:a}=C(),m=(p,l)=>p.map(({coinAmount:f})=>({address:la(l),coinAmount:fe(f,{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol})),c=(0,Fe.useMemo)(()=>m([...n,...i],e),[n,i]),u=(0,Fe.useMemo)(()=>{let p=m(n,o),l=i.reduce((f,{coinAmount:g})=>ce(f,g),"0");return Re(l,t)&&p.push({address:la(e),coinAmount:fe(Ze(l,t),{useContractPrecision:!0,contractPrecision:{decimals:a.decimals},precision:a.decimals}).value,symbol:a.symbol}),p},[n,i,t]);return Fe.default.createElement(ld,{label:P("wallet_extension_asset_btn_transaction_details")},Fe.default.createElement(B.Space,{space:32,direction:B.DIRECTION.vertical},Fe.default.createElement(Ca,{title:Fe.default.createElement("span",{className:va.title},P("extension_wallet_transaction_text_input"))},Fe.default.createElement(Na,{utxos:c})),Fe.default.createElement(Ca,{title:Fe.default.createElement("span",{className:va.title},P("extension_wallet_transaction_text_input"))},Fe.default.createElement(Na,{utxos:u}))))}function YA(){let e=k(),[o,t]=(0,Fe.useState)(!1),{coinId:n}=(0,Ip.useParams)(),i=Be(),a=S(yc),m=gp(),{signInfo:c}=S($r),u=En(),p=Zo(),{feeLoading:l,fee:f,feeError:g}=Ap(),_=ro(f,p),x=I=>{e(No({name:"selectedSat",value:I}))};Sp(),Cp();let T=c?.transferReminder;return Fe.default.createElement(Fe.default.Fragment,null,Fe.default.createElement(z,{slot:{bottom:Fe.default.createElement(JA,null)},defaultMessage:T,networkFeeProps:{loading:l,estimateFailed:g,feeLevel:a.type,onClick:()=>{t(!0)}},confirmButtonProps:{onSubmit:m},canTransferAmount:u}),Fe.default.createElement(Kd,{currencyId:i,bytes:_,value:a,coinId:n,signInfo:c,onChange:x,visible:o,onClose:()=>{t(!1)},supportDecimal:!0}))}var Tp=YA;r();s();var ti=A(h()),xp=A(ve());function ZA(){let e=(0,xp.useHistory)(),o=Xo();return(0,ti.useEffect)(()=>{Pr(o,"0")&&e.go(-1)},[o]),ti.default.createElement(Yd,{onConfirm:()=>{e.replace(Jr)}})}var hp=ZA;var zA={[Jo.SEND]:Tp,[Jo.INSCRIBE]:hp};function jA(){let e=Yo(),o=zA[e];return o?yp.default.createElement(o,null):null}var Pp=jA;r();s();var bp=A(h());function $A({children:e}){let t=Xe().get("from");return bp.default.createElement(Pe,{fromAddress:t},e)}var kp=$A;var QA={match:(e,o,t)=>To({coinId:e})&&[G.BRC_20,G.FRACTAL_BRC20].includes(t),Container:kp,pages:{AddressPage:cp,AmountPage:Vf,ConfirmPage:Pp}},Ep=QA;r();s();r();s();var wp=A(h());r();s();var eI=()=>{let{initialType:e}=lu();return async o=>{let{isValid:t}=await Es(o);return t&&jm(e)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},oI=()=>[eI()],ni=oI;r();s();var tI=()=>{let[e,{setTrue:o,setFalse:t}]=de(!1),n=b(),i=F(),{coin:a,baseCoin:m}=C(),c=Fn(),u=Vn();return{onClick:async()=>{try{o(),await u({from:n,to:i,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId}),c()}catch{}finally{t()}},loading:e}},Fp=tI;var nI=()=>{let e=ni(),o=Xn(),{onClick:t,loading:n}=Fp();return wp.default.createElement(Z,{confirmButtonProps:{onClick:t,loading:n},addressProps:{errorFns:e,extraProps:{filterAddress:o}}})},Np=nI;r();s();var vt=A(h());r();s();var Up=A(h());r();s();var Dp=A(h());r();s();r();s();var vp=()=>S(ln).transferOutputs;r();s();var Bp=(e,o)=>!e||!e.length?"0":e.reduce((n,i)=>{let m=(i.nftLocaltionVOs||[]).reduce((c,u)=>u.nftId===o?ce(c,u.value):c,"0");return ce(n,m)},"0"),Ba=({address:e,amount:o="0",satAmount:t="0",tokenType:n="FT",atomicalId:i},a=546)=>{let m=Re(t,0)?t:o;return{address:e,amount:Dt(m,a)?a:Number(m),data:[{atomicalId:i,type:n,amount:Number(o)}]}},Lp=(e,o=546)=>!e||e.length===0?!1:e.some(t=>{let n=t?.data?.[0]?.amount;return n===void 0?!1:Ge(n,o)}),Rp=(e,o=546)=>!e||e.length===0?!1:e.every(t=>{let n=t?.data?.[0]?.amount;return n===void 0?!1:Ge(n,o)});var Mp=({isArc20Token:e,sendCoinBalance:o,doubleMinOutput:t,minOutput:n,coin:i})=>{let a=vp();return(0,Dp.useCallback)(m=>e?O.lte(o,t)&&m!==o?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:o,token:i?.symbol},type:oe.COMMON_ERROR}:Rp(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:oe.COMMON_ERROR}:Lp(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:oe.COMMON_TIP}:null:null,[e,o,t,n,i,a])};var Op=e=>{let o=Ee(),t=fo(o),n=t?.baseCoinId===0,a=t?.protocolId===G.ARC_20,m=O.div(e,10**t?.decimals),c=ze(),u=O.mul(m,2),p=Mp({isArc20Token:a,sendCoinBalance:c,doubleMinOutput:u,minOutputFloat:m,minOutput:e,coin:t});return(0,Up.useCallback)(l=>{if(!e)return null;let f=p(l);return f||(n&&O.lt(l,m)?{key:"wallet_extension_send_transfer_at_least",args:{amount:fe(m,{precision:t.displayPrecision,useLargeNumberPrecision:!0,isStableCoin:t.stableCoin,roundingMode:"CEIL",symbol:t?.symbol}).value},type:oe.COMMON_ERROR}:null)},[e,p,n,m,t?.symbol])},si=e=>{let o=Op(e);Q([o])},ii=e=>{let o=Op(e);te([o])};r();s();var Qe=A(h());Le();r();s();var sI=()=>{let e=k(),o=S(ln),t=(0,Qe.useCallback)(n=>{e(ts({selectedNetworkFeeLevel:n}))},[]);return[o?.selectedNetworkFeeLevel,t]},iI=({fromAddr:e,toAddr:o,protocolId:t,minOutput:n,sendAmountInt:i,transferInputs:a})=>{let m=k();return(0,Qe.useMemo)(()=>{if(G.ARC_20!==t)return null;if(!a||a.length===0||O.eq(i,0))return m(ra([])),null;let c=a[0]?.nftLocaltionVOs[0]?.tokenType,u=a[0]?.nftLocaltionVOs[0]?.nftId,p=Ba({address:o,amount:i,tokenType:c,atomicalId:u},n),l=Bp(a,u),f=O.sub(l,i),g=Ba({address:e,amount:f,tokenType:c,atomicalId:u},n),_=[];return O.lte(f,0)?_.push(p):O.lt(f,n)?_.push(p,g):O.gte(f,n)&&_.push(g,p),m(ra(_)),_},[t,a,i,o,n,e,m])},aI=({fromAddr:e,toAddr:o,coinTick:t,transferInputs:n,minOutput:i,isXrc20Token:a,protocolId:m,sendAmountInt:c})=>{let u=iI({fromAddr:e,minOutput:i,protocolId:m,sendAmountInt:c,toAddr:o,transferInputs:n});return(0,Qe.useMemo)(()=>!a||G.SRC_20===m||!n?.length?null:G.ARC_20===m&&u?u:G.RUNES===m?[{address:o,amount:i,data:{id:t,amount:c}}]:G.RUNEMAIN===m||G.FRACTAL_RUNES?[{address:o,amount:i,data:{id:t,amount:c}}]:[{address:o,amount:Number(c),...rd(n[0],m)}],[t,a,i,m,c,o,n,u])},mI=({coin:e,coinId:o,walletId:t,protocolId:n,tick:i,address:a,coinAmount:m,isXrc20Token:c})=>{let[,u]=Rs({coinId:o,walletId:t,protocolId:n,tick:i,address:a,coinAmount:m,utxoType:je.BRC20_CONVERTIBLE},{ready:e&&c&&n!==G.SRC_20});return[null,u]},cI=({coinId:e,isXrc20Token:o,sendAmountInt:t,protocolId:n,inscriptionOutput:i})=>(0,Qe.useMemo)(()=>e===22?546:o?n===G.SRC_20?i||790:"0":t,[e,o,t,n,i]),uI=({coin:e,isXrc20Token:o,protocolId:t,satBytes:n,transferInputs:i})=>(0,Qe.useMemo)(()=>!e||!n?!1:!(t&&o&&t!==G.SRC_20&&!i?.length),[e,o,t,n,i?.length]),dI=({coin:e,protocolId:o})=>(0,Qe.useMemo)(()=>{if(e?.address&&[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(o))return nm(e?.address?.split("-"))},[e?.address,o]),fI=({coin:e,isXrc20Token:o,protocolId:t,sendAmount:n})=>(0,Qe.useMemo)(()=>{if(o&&t===G.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:e?.name,amt:n})}},[e?.name,o,t,n]),pI=({coinId:e,walletId:o,satBytes:t,address:n,isXrc20Token:i,coinBalance:a})=>{let m=k(),[c,u]=mr({coinId:e,walletId:o,satBytes:t,address:n},{onSuccess:p=>{m(e!==22&&!i?le(p):le(a?.coinAmountInt)),m(mo(p))}});return[c,u]},lI=({coinId:e,walletId:o,protocolId:t,tick:n,address:i})=>{let a=k(),[m,c]=mr({coinId:e,walletId:o,protocolId:t,tick:n,address:i,coinAmount:"0",utxoType:je.BRC20_CONVERTIBLE},{ready:[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(t),onSuccess:u=>{a(le(u))}});return[m,c]},gI=({coinId:e,toAddr:o,walletId:t,fromAddr:n,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:u,coinAmount:p,utxoParams:l,inscriptionData:f,isXrc20Token:g,availableFeeCoinAmountInt:_,availableSendCoinAmountInt:x,sendAmountInt:T},{ready:I,networkFeeInt:y})=>{let E=k(),[N,w,v]=Ds({coinId:e,toAddr:o,walletId:t,fromAddr:n,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:u,coinAmount:p,utxoParams:l,inscriptionData:f,canTransferAmount:e===22||g?_:x,...e===22?{omni:{coinType:31,amount:T}}:{}},{ready:I,onSuccess:R=>{Math.abs(Number(O.sub(R,y)))!==parseInt(i,10)&&(E(V(R)),E(L(!1)))},onError:R=>{E(L(R))}});return[N,w,v]},CI=()=>{let e=Ee(),o=b(),t=F(),n=ee(),i=fo(e),a=i?.protocolId,m=sd(a),c=i?.baseCoinId||e,u=st(o,n,i?.localType),p=Xo(),l=Y(),f=K(),g=En(),_=ze(),x=Ps(),[,T]=go({protocolId:a,coinId:e,address:o,chainId:i?.chainId}),{inscriptionOutput:I,minOutput:y}=T||{},[E,N]=sI(),w=E?.satBytes;(0,Qe.useEffect)(()=>{if(!w&&T?.normal&&N({level:me.STANDARD,satBytes:T?.normal}),w&&E?.level!==me.CUSTOM){let ot=T[cr[E?.level]?.satBytes];N({...E,satBytes:ot})}},[T]);let v=He(e,void 0,{addressType:u}),R=cI({coinId:e,isXrc20Token:m,sendAmountInt:f,protocolId:a,inscriptionOutput:I}),D=dI({coin:i,protocolId:a}),[,M]=mI({coin:i,coinId:e,walletId:n,protocolId:a,tick:D,address:o,coinAmount:f,isXrc20Token:m}),U=aI({fromAddr:o,toAddr:t,coinTick:D,transferInputs:M,minOutput:y,isXrc20Token:m,protocolId:a,sendAmountInt:f}),H=(0,Qe.useMemo)(()=>{if(M?.length)return M.map(({txHash:ot,vout:Qn})=>`${ot}-${Qn}`)},[M]),W=uI({coin:i,isXrc20Token:m,protocolId:a,satBytes:w,transferInputs:M}),X=fI({coin:i,isXrc20Token:m,protocolId:a,sendAmount:p}),ae=(0,Qe.useMemo)(()=>a===G.SRC_20?{protocolId:a,utxoType:je.BRC20_CONVERTIBLE}:{utxoType:je.TRANSFER,needFilteredUtxo:[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(a)?H:void 0},[H,a]),[se,q]=pI({coinId:e,walletId:n,satBytes:w,address:o,isXrc20Token:m,coinBalance:v}),[pe,ye]=lI({coinId:e,walletId:n,protocolId:a,tick:D,address:o}),[be,,Je]=gI({coinId:e,toAddr:t,walletId:n,fromAddr:o,satBytes:w,inputs:M,outputs:U,networkFee:l,revealOutValue:I,coinAmount:R,utxoParams:ae,inscriptionData:X,isXrc20Token:m,availableFeeCoinAmountInt:g,availableSendCoinAmountInt:x,sendAmountInt:f},{ready:W,networkFeeInt:l}),no=(0,Qe.useMemo)(()=>[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(a)?q===void 0||ye===void 0:q===void 0,[q,a,ye]),et=(0,Qe.useMemo)(()=>i?.chainId!==Em&&i?.chainId!==Fm||e===22?!1:i&&!a?!0:G.RUNEMAIN===a,[i,e,a]);return{coin:i,toAddr:t,coinId:e,walletId:n,signInfo:T,feeError:Je,fromAddr:o,protocolId:a,baseCoinId:c,feeLoading:be,addressType:u,sendAmountInt:f,networkFeeInt:l,transferInputs:M,transferOutputs:U,isXrc20Token:m,utxoParams:ae,initLoading:no,mergedCoinAmount:R,src20InscriptionData:X,sendCoinAvailableAmount:_,availableSendCoinAmountInt:x,availableFeeCoinAmountInt:g,selectedNetworkFeeLevel:E,setSelectedNetworkFeeLevel:N,loading:se||be||pe,supportDecimal:et}},ai=CI;r();s();var _o=A(h());var _I=()=>{let e=Ho(),{coin:o}=C();return(0,_o.useCallback)(n=>{let i="";return n.key&&(i=P(n?.key,n?.args)),n?.type===oe.BALANCE_INSUFFICIENT?_o.default.createElement(_o.default.Fragment,null,_o.default.createElement(B.Box,{className:De.wrap},i),_o.default.createElement(B.Box,{className:De.wrap},_o.default.createElement(Pt,{coin:o,receiveOnly:!0}))):n?.type===oe.FEE_BALANCE_INSUFFICIENT?_o.default.createElement(_o.default.Fragment,null,_o.default.createElement(B.Box,{className:De.wrap},i),_o.default.createElement(B.Box,{className:De.wrap},_o.default.createElement(Pt,{coin:e}))):i},[o,e])},mi=_I;r();s();var Gp={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function SI(){let{coin:e,coinId:o,signInfo:t,initLoading:n,addressType:i,fromAddr:a}=ai(),{receivedPendingBalance:m,receivedPendingBalanceDisplay:c}=Ft(),{lockedAmount:u}=Hd(a,e),p=fe(u,{useContractPrecision:!0,contractPrecision:{decimals:e.decimals},useLargeNumberPrecision:!0,precision:e.displayPrecision,isStableCoin:e.stableCoin}).value;si(t?.minOutput);let l=mi(),f=(0,vt.useMemo)(()=>To({coinId:o})?P("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:e?.symbol}):e?.protocolId===G.SRC_20?P("extension_defi_tooltip_text_balance_udpate"):e?.protocolId===G.ARC_20?P("extension_defi_tooltip_text_utxo_exclude"):e?.protocolId===G.RUNEMAIN||e?.protocolId===G.FRACTAL_RUNES?P("extension_defi_hover_text_avail_balance"):null,[e?.protocolId,e?.symbol,o]);return vt.default.createElement(J,{isGlobalLoading:n,renderError:l,totalAmountProps:{type:"amount",title:vt.default.createElement(vt.default.Fragment,null,P("extension_defi_text_available_balance"),!!f&&vt.default.createElement(Po,{size:Po.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:Gp["amount-page__available_balance__icon"]})),slot:{bottom:Number(u)>0||Number(m)>0?vt.default.createElement(Kn,{lockedAmount:u,lockedAmountDisplay:p,pendingXrc:m,pendingXrcDisplay:c,addressType:i,coinId:o}):void 0}}})}var Vp=SI;r();s();var Eo=A(h());var Wp=A(ve());var Hp=A(ru());var AI=546;function II(){let e=(0,Wp.useHistory)(),o=k(),[t,{toggle:n}]=de(!1),{coin:i,coinId:a,toAddr:m,loading:c,walletId:u,fromAddr:p,signInfo:l,utxoParams:f,protocolId:g,baseCoinId:_,feeLoading:x,addressType:T,isXrc20Token:I,networkFeeInt:y,sendAmountInt:E,transferInputs:N,transferOutputs:w,mergedCoinAmount:v,availableFeeCoinAmountInt:R,selectedNetworkFeeLevel:D,setSelectedNetworkFeeLevel:M,src20InscriptionData:U,supportDecimal:H}=ai(),W=Be(),X=S(cs),ae=Br[i?.localType]?.[T],{showManageUTXO:se}=Xs(i,ae,!0);ii(l?.minOutput,a);let q=Ss(u),[pe,ye]=(0,Eo.useState)(!1),be=ne(tt=>se&&[Mn.BALANCE_INSUFFICIENT,Mn.FEE_BALANCE_INSUFFICIENT].includes(tt)?[{onClick:async()=>{await o(xn(!1));let yr=Hp.default.stringify({addressType:T,coinId:_},{skipEmptyString:!0,skipNull:!0}),Ki=yr?`?${yr}`:"";e.push(Yr+Ki)},btnText:P("wallet_extension_mid_textbtn_manage_utxo")}]:[]),Je=Ht({coinId:a,walletId:u,address:p,utxoType:je.TRANSFER,satBytes:D?.satBytes,...f}),no=md({coinId:a,toAddr:m,walletId:u,fromAddr:p,protocolId:g,networkFee:y,localType:i?.localType,outputs:w,inscriptionData:U,dustSize:I?void 0:l?.minOutput,satBytes:D?.satBytes,coinAmount:a===22?AI:E,...a===22?{omni:{coinType:31,amount:E}}:{},extraPublishParams:{coinAmount:E,txType:I?ke.BRC20_SEND:ke.TRANS_OUT},businessType:j.SEND}),et=Dn({coinId:a,currencyId:W,txType:I?ke.BRC20_SEND:ke.TRANS_OUT,protocolId:g,address:p}),ot=(0,Eo.useCallback)(async()=>{let tt=[];return tt=await Je(v,y),tt=[...N||[],...tt],await et(tt,()=>{e.goBack()}),ye(!0),await no({utxoList:tt})},[Je,v,y,N,et,no,e,X]),Qn=(0,Eo.useMemo)(()=>[G.RUNES,G.ARC_20,G.RUNEMAIN,G.FRACTAL_RUNES].includes(g)&&!N?.length?!0:c,[c,g,N?.length]);return Eo.default.createElement(Eo.default.Fragment,null,Eo.default.createElement(z,{addressType:T,confirmButtonProps:{disabled:Qn,onSubmit:ot},networkFeeProps:{onClick:n,loading:x,feeLevel:D?.level},renderTipActions:be,defaultMessage:To({coinId:_})&&l?.transferReminder,canTransferAmount:To({coinId:_})&&R}),Eo.default.createElement(Us,{visible:t,coinId:_,signInfo:l,currencyId:W,estimatedFee:y,value:D,onChange:M,onToggleVisible:n,supportDecimal:H}),Eo.default.createElement(Bd,{visible:q&&pe}))}var Xp=II;r();s();var Kp=A(h());function TI({children:e}){let t=Xe().get("from");return Kp.default.createElement(Pe,{fromAddress:t},e)}var qp=TI;var xI={match:e=>tc(e),Container:qp,pages:{AddressPage:Np,AmountPage:Vp,ConfirmPage:Xp}},Jp=xI;r();s();r();s();var jp=A(h());r();s();var Yp=A(h());var hI=()=>{let e=Xn(),o=t=>t.filter(i=>/^(bc1p)/.test(i.address));return(0,Yp.useCallback)(t=>e(t).map(a=>({...a,list:o(a?.list)})).filter(a=>a?.list?.length),[e])},Zp=hI;r();s();var ci=A(ve());var yI=()=>{let[e,{setTrue:o,setFalse:t}]=de(!1),n=b(),i=F(),{coin:a,baseCoin:m}=C(),c=Vn(),{coinId:u}=(0,ci.useParams)(),p=(0,ci.useHistory)();return{onClick:async()=>{try{o(),await c({from:n,to:i,method:"wallet_inner_transfer",chainIndex:m?.chainId??a.chainId});let{isValid:f}=await Es(i);if(f)p.push(`${Ve}/${u}${fn}?from=${n}`);else{let g=co.warn({alignBottom:!1,title:P("wallet_extension_cat_dialog_title_risk_non_taproot"),text:P("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:P("wallet_extension_cat_icu_taproot")}),confirmText:P("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{g.destroy()}})}}catch{}finally{t()}},loading:e}},zp=yI;var PI=()=>{let{onClick:e,loading:o}=zp(),t=Zp(),n=ni();return jp.default.createElement(Z,{addressProps:{errorFns:n,extraProps:{filterAddress:t}},confirmButtonProps:{onClick:e,loading:o}})},$p=PI;r();s();var Ro=A(h());var La=A(vo());r();s();var Qp=A(h());var bI=e=>{let o=Ee(),t=fo(o),n=Xo();return(0,Qp.useCallback)(()=>O.gt(n,e)?{key:"wallet_extension_cat_max_send_utxo",args:{num:fe(e,{useLargeNumberPrecision:!0,precision:t.displayPrecision,isStableCoin:t.stableCoin}).value,token:t?.symbol},type:oe.COMMON_ERROR}:null,[t?.symbol,e,n])},el=e=>{let o=bI(e);Q([o])},ol=()=>{te()};r();s();var po=A(h());var tl=()=>{let e=k(),o=S(ln),t=(0,po.useCallback)(n=>{e(ts({selectedNetworkFeeLevel:n}))},[]);return[o?.selectedNetworkFeeLevel,t]},nl=({coin:e,coinId:o,walletId:t,protocolId:n,tick:i,address:a})=>{let[,m]=Rs({coinId:o,walletId:t,protocolId:n,tick:i,address:a,coinAmount:"0",utxoType:je.BRC20_CONVERTIBLE},{ready:e?.coinId});return[null,m]},rl=({coin:e})=>(0,po.useMemo)(()=>{if(!e?.address)return;let o=e.address.indexOf("_"),t=e.address.indexOf("_",o+1);return e.address.slice(t+1)},[e?.address]),sl=({coinId:e,walletId:o,satBytes:t,address:n,coinBalance:i})=>{let a=k(),[m,c]=mr({coinId:e,walletId:o,satBytes:t,address:n},{onSuccess:u=>{a(le(i?.coinAmountInt)),a(mo(u))}});return[m,c]},il=({UTXOList:e,coin:o})=>{if(!e||e.length===0)return"0";let t=e.slice(0,4).reduce((n,i)=>{let a=i?.tokenAmount;return O.add(n,a)},"0");return O.div(t,10**o?.decimals)},kI=({sendAmountInt:e,UTXOList:o})=>(0,po.useMemo)(()=>{if(!o||!Number(e))return[];let t=[],n="0";for(let i=0;i<o.length;i++){let a=o[i],m=a?.tokenAmount;if(n=O.add(n,m),t.push(a),O.gte(n,e))break}return t},[o,e]),EI=({selectedUtxo:e,signInfo:o,chainIndex:t,walletId:n})=>{let i=o?.extInfo?.tokenAddr,a=o?.extInfo?.minterAddr,m=k(),{error:c,loading:u,data:p}=Ut(async()=>{if(!e||e.length===0)return[];if(!i||!a)return[];let l=e.map(_=>({txHash:_.txHash,tokenAddress:i,minterAddress:a,chainIndex:t})),g=(await Uo(Ao.getCat20GrandFatherRawTx,{rawTxRequestList:l},{walletSignParams:{needXClientSign:!0,walletId:n}}))?.data;if(g&&!g.find(_=>_.txStatus!==0))return g;throw m(L(!0)),au.error({title:P("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[e]});return[c,u,p]},FI=({signInfo:e,selectedUtxo:o,grandFatherRawTxs:t,address:n})=>(0,po.useMemo)(()=>{if(!e||!t||!t.length)return null;let i=e?.extInfo,a={minterAddr:i?.minterAddr,tokenAddr:i?.tokenAddr,info:{max:i?.max,name:i?.name,limit:i?.limit,symbol:i?.symbol,premine:"0",decimals:i?.decimals,minterMd5:i?.minterMd5},tokenId:i?.tokenId,revealTxid:i?.revealTxid,revealHeight:i?.revealHeight,genesisTxid:i?.genesisTxid,name:i?.name,symbol:i?.symbol,decimals:i?.decimals,minterPubKey:i?.minterPubKey,tokenPubKey:i?.tokenPubKey},m=o.map(u=>({utxo:{txId:u.txHash,outputIndex:u.vout,script:i?.script,satoshis:String(u.coinAmount)},txoStateHashes:u.stateHashArray,state:{address:n,amount:u.tokenAmount}})),c=t.map(u=>({prevTx:u?.rawTx,prevPrevTx:u?.parentRawTx}));return{tokenMetadata:a,tokens:m,tokenPrevTxs:c}},[e,t,o,n]),wI=({coinId:e,fromAddr:o,toAddr:t,satBytes:n,coinAmount:i,protocolId:a,CAT20TxParam:m,networkFeeInt:c,walletId:u,...p})=>{let l=k(),f=id({coinId:e,fromAddr:o,toAddr:t,satBytes:n,coinAmount:i,protocolId:a,...p}),g=Ht({coinId:e,address:o,walletId:u,utxoType:je.TRANSFER}),_=async()=>{l(re(!0));let I=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],y=JSON.stringify(m?.tokenMetadata),E=JSON.stringify(m?.tokens),N=m?.tokenPrevTxs,{commitTx:w,revealTx:v}=await f({feeInputs:I,tokenMetadata:y,tokens:E,tokenPrevTxs:N}),R=O.add(w,v);if(I=await g(R),I=I.map(W=>({txId:W.txHash,vOut:W.vout,amount:W.coinAmount})),I.length===1)return l(re(!1)),{mergeTx:"0",commitTx:w,revealTx:v};let D=await f({feeInputs:I,tokenMetadata:y,tokens:E,tokenPrevTxs:N}),M=D.mergeTx,U=O.add(M,R),H=I.reduce((W,X)=>{let ae=X?.amount;return O.add(W,ae)},"0");for(;O.lt(H,U);)I=await g(U),I=I.map(W=>({txId:W.txHash,vOut:W.vout,amount:W.coinAmount})),H=I.reduce((W,X)=>{let ae=X?.amount;return O.add(W,ae)},"0"),D=await f({feeInputs:I,tokenMetadata:y,tokens:E,tokenPrevTxs:N}),M=D.mergeTx,U=O.add(M,R);return l(re(!1)),{mergeTx:M,commitTx:w,revealTx:v}},{error:x,data:T}=Ut(async()=>await _(),{debounceWait:500,ready:!!n&&!!m,refreshDeps:[n],onSuccess:I=>{let y=O.add(O.add(I.mergeTx,I.commitTx),I.revealTx);Math.abs(Number(O.sub(y,c)))!==parseInt(n,10)&&(l(V(y)),l(L(!1)))},onError:I=>{l(L(I))}});return[x,T]},al=()=>{let e=Ee(),o=b(),t=ee(),n=fo(e),i=n?.protocolId,a=st(o,t,n?.localType),m=K(),c=ze(),u=(0,po.useMemo)(()=>fe(c,{precision:n?.decimals}).value,[c,n?.decimals]),[,p]=go({protocolId:i,coinId:e,address:o,chainId:n?.chainId}),[l,f]=tl(),g=l?.satBytes;(0,po.useEffect)(()=>{if(!g&&p?.normal&&f({level:me.STANDARD,satBytes:p?.normal}),g&&l?.level!==me.CUSTOM){let w=p[cr[l?.level]?.satBytes];f({...l,satBytes:w})}},[p]);let _=He(e,void 0,{addressType:a}),x=rl({coin:n}),[,T]=nl({coin:n,coinId:e,walletId:t,protocolId:i,tick:x,address:o,coinAmount:m}),I=il({coin:n,UTXOList:T}),[y,E]=sl({coinId:e,walletId:t,satBytes:g,address:o,coinBalance:_}),N=(0,po.useMemo)(()=>E===void 0,[E]);return{initLoading:N,loading:y||N,sendCoinAvailableAmount:c,CAT20CanTransferAmount:I,displaySendCoinAvailableAmount:u}},ml=()=>{let e=Ee(),o=b(),t=F(),n=ee(),i=fo(e),a=i?.protocolId,m=i?.baseCoinId||e,c=st(o,n,i?.localType),u=Xo(),p=Y(),l=K(),f=En(),g=ze(),_=Ps(),[,x]=go({protocolId:a,coinId:e,address:o,chainId:i?.chainId}),[T,I]=tl(),y=T?.satBytes,E=k();(0,po.useEffect)(()=>{E(re(!0))},[E]),(0,po.useEffect)(()=>{if(!y&&x?.normal&&I({level:me.STANDARD,satBytes:x?.normal}),y&&T?.level!==me.CUSTOM){let pe=x[cr[T?.level]?.satBytes];I({...T,satBytes:pe})}},[x]);let N=He(e,void 0,{addressType:c}),w=rl({coin:i}),[,v]=nl({coin:i,coinId:e,walletId:n,protocolId:a,tick:w,address:o,coinAmount:l}),R=il({coin:i,UTXOList:v}),D=kI({sendAmountInt:l,UTXOList:v}),[M,U,H]=EI({selectedUtxo:D,signInfo:x,chainIndex:i?.chainId,walletId:n}),W=FI({signInfo:x,selectedUtxo:D,grandFatherRawTxs:H,address:o}),[,X]=wI({coinId:e,fromAddr:o,toAddr:t,satBytes:y,coinAmount:l,protocolId:a,CAT20TxParam:W,networkFeeInt:p,walletId:n}),[ae,se]=sl({coinId:e,walletId:n,satBytes:y,address:o,coinBalance:N}),q=(0,po.useMemo)(()=>se===void 0,[se]);return{coin:i,toAddr:t,coinId:e,walletId:n,signInfo:x,satBytes:y,fromAddr:o,protocolId:a,baseCoinId:m,addressType:c,sendAmount:u,sendAmountInt:l,networkFeeInt:p,feeData:X,selectedUtxo:D,initLoading:q,rawTxError:M,sendCoinAvailableAmount:g,availableSendCoinAmountInt:_,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:T,setSelectedNetworkFeeLevel:I,CAT20CanTransferAmount:R,CAT20GrandFatherRawTxs:H,CAT20TxParam:W,loading:ae||U}},cl=({coinId:e,toAddr:o,fromAddr:t,satBytes:n,walletId:i,localType:a,networkFee:m,coinAmount:c,coinAmountInt:u,protocolId:p,dustSize:l=nd,feeData:f,CAT20TxParam:g,history:_,...x})=>{let T=fo(e),I=Be(),y=ee(),E=i||y,N=ec(a),w=Ht({coinId:e,address:t,utxoType:je.TRANSFER,walletId:E}),v=Dn({coinId:e,currencyId:I,txType:ke.BRC20_SEND,protocolId:p,address:t}),R=ad({coinId:e,toAddr:o,walletId:i,fromAddr:t,satBytes:n,localType:N,coinAmount:u,networkFee:m,dustSize:l,protocolId:p,...x}),D=Ru({walletId:E});return(0,po.useCallback)(async()=>{let M=await w(m),U=M.map(qi=>({txId:qi.txHash,vOut:qi.vout,amount:qi.coinAmount}));await v(M,()=>{_.goBack()});let H=JSON.stringify(g?.tokenMetadata),W=JSON.stringify(g?.tokens),X=g?.tokenPrevTxs,ae=await R({feeInputs:U,tokenMetadata:H,tokens:W,tokenPrevTxs:X}),{mergeTx:se,commitTx:q,revealTx:pe}=ae,ye=[],be=JSON.stringify({protocolId:G.CAT20,broadcastType:1,nftIds:[]}),Je,no=await Te(a,q),et=await Te(a,pe);se&&(Je=await Te(a,se));let ot={signedTx:se,fromAdr:t,toAdr:t,serviceCharge:f.mergeTx,coinAmount:"0",coinId:T?.baseCoinId,txHash:Je,txType:ke.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:be},Qn={signedTx:q,fromAdr:t,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:T?.baseCoinId,txHash:no,txType:ke.CAT20_NOT_SHOWN,dependTx:Je?[Je]:[],itemId:"commitTx",extJson:be},tt={signedTx:pe,fromAdr:t,toAdr:o,serviceCharge:f.revealTx,coinAmount:u,coinId:e,txHash:et,txType:ke.BRC20_SEND,dependTx:[no],itemId:"revealTx0",extJson:be};se&&ye.push(ot),ye.push(Qn,tt);let Ki=(await D(ye))[et];Vr({tx_id:Ki})},[w,m,v,g?.tokenMetadata,g?.tokens,g?.tokenPrevTxs,R,a,t,f,T?.baseCoinId,o,u,e,D,_])};r();s();var Ie=A(h()),ul=A(vo());var NI=()=>{let e=Ho(),{coin:o}=C();return(0,Ie.useCallback)(n=>{let i="";if(n.key&&(i=P(n?.key,n?.args)),n?.type===oe.BALANCE_INSUFFICIENT)return Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement(B.Box,{className:De.wrap},i),Ie.default.createElement(B.Box,{className:De.wrap},Ie.default.createElement(Pt,{coin:o,receiveOnly:!0})));if(n?.type===oe.FEE_BALANCE_INSUFFICIENT)return Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement(B.Box,{className:De.wrap},i),Ie.default.createElement(B.Box,{className:De.wrap},Ie.default.createElement(Pt,{coin:e})));let a=()=>{co.action({title:" ",children:Ie.default.createElement("div",{className:De.dlgContainer},Ie.default.createElement("div",{className:De.dlgTitle},P("wallet_extension_cat_drawer_title_utxo_meaning")),Ie.default.createElement("div",{className:De.dlgContent},P("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Ie.default.createElement("div",{className:(0,ul.default)(De.dlgTitle,De.dlgGap)},P("wallet_extension_cat_drawer_title_cat_contract")),Ie.default.createElement("div",{className:De.dlgContent},P("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:P("commonall_button_text_next"),onConfirm:m=>{m.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement(B.Box,{className:De.wrap},i,Ie.default.createElement(hn,{className:"okx-wallet-plugin-information-circle",onClick:a}))):i},[o,e])},dl=NI;r();s();var jo={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function vI(){let{initLoading:e,loading:o,sendCoinAvailableAmount:t,CAT20CanTransferAmount:n,displaySendCoinAvailableAmount:i}=al();el(n);let a=dl(),m=k(),c=Bn(),u=()=>{m(ps(!1)),c()},p=()=>{co.action({title:" ",children:Ro.default.createElement("div",{className:jo.dlgContainer},Ro.default.createElement("div",{className:jo.dlgTitle},P("wallet_extension_cat_drawer_title_utxo_meaning")),Ro.default.createElement("div",{className:jo.dlgContent},P("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Ro.default.createElement("div",{className:(0,La.default)(jo.dlgTitle,jo.dlgGap)},P("wallet_extension_cat_drawer_title_cat_contract")),Ro.default.createElement("div",{className:jo.dlgContent},P("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:P("commonall_button_text_next"),onConfirm:l=>{l.destroy()}})};return Ro.default.createElement(J,{isGlobalLoading:e,renderError:a,customMaxAmount:n,confirmButtonProps:{loading:o,onClick:u},totalAmountProps:{maxAmount:n,type:"amount",title:Ro.default.createElement("div",{className:jo.canTransferContainer},Ro.default.createElement("div",{className:jo.canTransferText},P("wallet_extension_cat_desc_available_utxo")),Ro.default.createElement(hn,{className:(0,La.default)(jo.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:p})),slot:{bottom:Ro.default.createElement(Kn,{catTotalAmount:t,catTotalAmountDisplay:i})}}})}var fl=vI;r();s();var at=A(h());var pl=A(ve());var ll=A(ru());function BI(){let e=(0,pl.useHistory)(),o=k(),[t,{toggle:n}]=de(!1),{coin:i,coinId:a,toAddr:m,loading:c,walletId:u,fromAddr:p,signInfo:l,satBytes:f,sendAmount:g,sendAmountInt:_,protocolId:x,baseCoinId:T,addressType:I,networkFeeInt:y,feeData:E,selectedUtxo:N,availableFeeCoinAmountInt:w,selectedNetworkFeeLevel:v,setSelectedNetworkFeeLevel:R,CAT20TxParam:D}=ml(),M=cl({coinId:a,toAddr:m,fromAddr:p,satBytes:f,walletId:u,feeData:E,localType:i?.localType,networkFee:y,coinAmount:g,coinAmountInt:_,protocolId:x,CAT20TxParam:D,history:e}),U=Be(),H=Br[i?.localType]?.[I],{showManageUTXO:W}=Xs(i,H,!0);ol();let X=ne(q=>W&&[Mn.BALANCE_INSUFFICIENT,Mn.FEE_BALANCE_INSUFFICIENT].includes(q)?[{onClick:async()=>{await o(xn(!1));let pe=ll.default.stringify({addressType:I,coinId:T},{skipEmptyString:!0,skipNull:!0}),ye=pe?`?${pe}`:"";e.push(Yr+ye)},btnText:P("wallet_extension_mid_textbtn_manage_utxo")}]:[]),ae=(0,at.useCallback)(async()=>{await M()},[M]),se=(0,at.useMemo)(()=>!N?.length||c,[c,N?.length]);return at.default.createElement(at.default.Fragment,null,at.default.createElement(z,{addressType:I,confirmButtonProps:{disabled:se,onSubmit:ae},networkFeeProps:{onClick:n,feeLevel:v?.level},renderTipActions:X,defaultMessage:To({coinId:T})&&l?.transferReminder,canTransferAmount:To({coinId:T})&&w}),at.default.createElement(Us,{visible:t,coinId:T,signInfo:l,currencyId:U,estimatedFee:y,value:v,onChange:R,onToggleVisible:n}))}var gl=BI;r();s();var Cl=A(h());function LI({children:e}){let t=Xe().get("from");return Cl.default.createElement(Pe,{fromAddress:t},e)}var _l=LI;var RI={match:(e,o,t)=>To({coinId:e})&&[G.CAT_20].includes(t),Container:_l,pages:{AddressPage:$p,AmountPage:fl,ConfirmPage:gl}},Sl=RI;r();s();r();s();var pi=A(h());r();s();var Al=(e,o)=>{let[t,n]=e?.split("-");return[{policyId:t,assets:[{amount:o,assetName:n}]}]},ui=async({toAddr:e,baseCoinId:o,sendAmountInt:t,contractAddress:n})=>{let i=await Mt(),{AdaWallet:a}=i,m;return o!==0&&(m=Al(n,t)),a.minAda(e,m)},di=async e=>{let o=await Mt(),{AdaWallet:t}=o;return t.minFee(e)},DI="transfer",Zn=({toAddr:e,utxoList:o,fromAddr:t,sendAmount:n,baseCoinId:i,contractAddress:a,minTransferAmountInt:m,max:c=!1})=>{let u={address:e,inputs:o,type:DI,changeAddress:t};return i===0?u={...u,amount:n,max:c}:u={...u,amount:m,multiAsset:Al(a,n)},u};r();s();var Il=A(ve());var MI=()=>{let{coinId:e}=(0,Il.useParams)(),o=b(),t=ee(),[n,i]=Au(e);return{address:o,walletId:t,coin:n||{},coinId:Number(e),baseCoin:i||{},baseCoinId:n?.baseCoinId}},Bt=MI;r();s();var UI=()=>{let{coin:e,coinId:o,address:t}=Bt(),n=e?.baseCoinId;return ne(async(i,a,m)=>{let c=a;n!==0&&(c=O.add(c,m));let u={coinId:o,address:t,fee:c,amount:i},{data:p}=await Uo(Ao.getSpecialUtxoList,u);return p})},fi=UI;r();s();var OI=()=>{let e=xt(),o=F(),t=k(),n=S(Ct),{baseCoinId:i,address:a,coin:m}=Bt(),c=n?.minTransferInt||"0",u=fi(),p={},l=async()=>{let f=[];try{f=await u("0","0","0")}catch{We.error(P("wallet_home_toast_network_error"));return}let g=await ui({contractAddress:m?.address,baseCoinId:i,utxoList:f,toAddr:o,sendAmountInt:"0"});t(Gt({minTransferInt:g}));try{let _=Zn({utxoList:f,toAddr:o,sendAmount:"0",fromAddr:a,max:!0,baseCoinId:i,minTransferAmountInt:c,contractAddress:""}),x=await di({data:_}),{fee:T,change:I}=x,y=zi.sub(e,I,{returnString:!0});t(le(zi.max(y,"0"))),t(V(T)),t(Gt({change:I,utxoList:f})),t(ps(!0))}catch{}};return i===0&&(p.onMax=l),{totalAmountProps:p}},Tl=OI;r();s();var Ra=A(h());var GI=e=>{let o=C(),{coin:{symbol:t,baseCoinId:n,decimals:i,stableCoin:a,displayPrecision:m}}=o,c=O.div(e,10**i);return(0,Ra.useCallback)(u=>n===0&&O.gt(c,0)&&O.lt(u,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:fe(c,{useLargeNumberPrecision:!0,precision:m,isStableCoin:a,roundingMode:"CEIL",symbol:t}).value},type:oe.COMMON_ERROR}:null,[e])},VI=e=>{let o=Ho(),{coin:t}=C(),n=Y(),i=Ln(),m=S(Ct)?.change||"0",{baseCoinId:c}=t;return(0,Ra.useCallback)(u=>{let p=O.mul(u,10**t?.decimals),l;return c===0?l=O.add(p,O.add(n,m)):l=O.add(O.add(n,m),e),O.lt(i,l)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:fe(l,{roundingMode:"CEIL",useLargeNumberPrecision:!0,precision:o?.displayPrecision,isStableCoin:o?.stableCoin,useContractPrecision:!0,contractPrecision:{decimals:o?.decimals}}).value},type:oe.COMMON_ERROR}:null},[n,e])},WI=e=>{let o=GI(e),t=VI(e);Q([o,t])},xl=WI;var HI=({isMax:e,baseCoinId:o,sendAmountInt:t})=>!(o===0&&e||O.eq(t,"0"));function XI(){let e=k(),t=S(Ct)?.minTransferInt||"0",n=K(),i=F(),{coin:a,baseCoinId:m,address:c,coinId:u}=Bt(),p=Ke(),l=fi();Xr(()=>{(async()=>{if(!HI({baseCoinId:m,isMax:p,sendAmountInt:n}))return;e(le(null)),e(re(!0)),e(L(!1)),e(V("0")),e(Gt({change:"0",utxoList:[]}));let g=!1,_="0",x="0",T="0";for(;!g;)try{let I=[];try{I=await l(n,O.add(_,T,{returnString:!0}),x)}catch{e(L(!0));break}x==="0"&&(x=await ui({contractAddress:a?.address,baseCoinId:m,utxoList:I,toAddr:i,sendAmountInt:n}),e(Gt({minTransferInt:x})));let y=Zn({toAddr:i,fromAddr:c,utxoList:I,contractAddress:a?.address,baseCoinId:a?.baseCoinId,sendAmount:n,minTransferAmountInt:x}),E=await di({data:y});_=E.fee,T=E.change,g=E.valid,e(V(_)),e(Gt({change:T,minTransferInt:x,utxoList:I}))}catch{e(L(!0));break}e(re(!1))})()},[n,u,p],{wait:100}),(0,pi.useEffect)(()=>{Mt()},[]),xl(t);let f=Tl();return pi.default.createElement(J,{...f})}var hl=XI;r();s();var Pl=A(h());r();s();var KI=()=>{let e=S(Ct),{coin:o,coinId:t,address:n,walletId:i}=Bt(),a=Pn(i),m=Ke(),c=K(),u=F(),p=Y(),l=_e({coinId:t,businessType:j.SEND}),f=Ae({fromAddr:n,walletId:i,localType:o?.localType});return ne(async()=>{try{let _=e?.utxoList||[],x=e?.minTransferInt||"",T=Zn({toAddr:u,fromAddr:n,utxoList:_,minTransferAmountInt:x,sendAmount:c,baseCoinId:o?.baseCoinId,contractAddress:o?.address,max:m}),I=await f({params:T}),y=await Te(o?.localType,I),E={coinId:t,txHash:y,signedTx:I,walletId:i,toAdr:u,serviceCharge:p,fromAdr:n,coinAmount:c,walletType:a?.serverWalletType};await l(I,E)}catch(_){let x=_;We.error(x?.error_message||P("wallet_home_toast_network_error"))}})},yl=KI;function qI(){let e=yl();return te(),Pl.default.createElement(z,{confirmButtonProps:{onSubmit:e}})}var bl=qI;var JI={match:e=>e===xm,pages:{AmountPage:hl,ConfirmPage:bl,AddressPage:Z}},kl=JI;r();s();r();s();var Fl=A(h());r();s();Le();var YI=()=>{let e=qo(),o=sc(),t=Ts({factionType:wr});return[e,async n=>(await Promise.all(o.map(m=>{let c=Rr(t,m);return Tt(n,m,c)}))).some(om)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},El=YI;var ZI=()=>{let e=El();return Fl.default.createElement(Z,{addressProps:{errorFns:{fns:e,override:!0}}})},wl=ZI;r();s();var Bl=A(h());r();s();r();s();var zI=async({memo:e,fromAddress:o,toAddress:t,amountInt:n,isIBCTransfer:i,chain:a,signInfo:m,walletId:c})=>{let{chainId:u,sequence:p,accountNumber:l,feeDemon:f,demon:g,sourceChannel:_,normal:x,gasLimit:T}=m,I={chainId:u,sequence:p,accountNumber:l,feeDemon:f,feeAmount:Ye(x,T),gasLimit:T,memo:e,fake:!0},y={fromAddress:o,toAddress:t,demon:g,amount:n},E;if(i){let w=ce(Math.round(Date.now()/1e3),300);E={...I,type:tn.IBC_TRANSFER,data:{...y,sourcePort:"transfer",sourceChannel:_,ibcTimeoutTimestamp:w}}}else E={...I,type:tn.TRANSFER,data:{...y}};return await Ne().signTransaction(E,o,a?.baseChain,c,{chain:a.localType})},Nl=zI;r();s();var li=A(h());function Da(){let{baseCoin:e}=C(),o=F(),[t,n]=(0,li.useState)(!1),i=Ts({factionType:wr});return(0,li.useEffect)(()=>{(async()=>{let m=Rr(i,e.coinId),c=await Tt(o,e?.coinId,m);n(!c)})()},[e,o]),t}var jI=()=>{let e=k(),[o,{setFalse:t}]=de(!0),{coin:n}=C(),{coinId:i}=n,a=b(),m=F(),c=ie(),u=Da(),p=xs({localType:n?.localType}),l=ee(),f=Ke();return Xr(()=>{i&&m&&c!=="0"&&p?.localType&&(async()=>{try{let _=await Wm({coinId:i,from:a,to:m}),x=await Nl({memo:"",fromAddress:a,toAddress:m,amountInt:f?"0":c,isIBCTransfer:u,chain:p,signInfo:_,walletId:l}),T=await Hm({coinId:i,from:a,inputData:x}),I=Math.ceil(Ye(_.normal,T));e(V(I)),e(as({inputData:x,signInfo:_,gasLimit:T,isIBCTransfer:u})),e(L(!1))}catch{e(L(!0))}finally{t()}})()},[i,a,m,c,u,p?.localType,f]),o},vl=jI;function $I(){let e=vl();return Q(),Bl.default.createElement(J,{confirmButtonProps:{loading:e}})}var Ll=$I;r();s();var Do=A(h());r();s();var lr=A(h());r();s();var gi={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var QI=({value:e,onChange:o,placeholder:t,title:n=P("wallet_extension_title_memo_optional"),underline:i=!0,error:a,errorType:m,maxLength:c=256})=>{let u=_u();return lr.default.createElement(Un,{label:n,labelLink:{href:u?.sendMemoInput,underline:i},vertical:!0,value:lr.default.createElement(yo.TextArea,{placeholder:t||P("wallet_extension_input_memoinfro"),size:yo.SIZE.xl,autoResize:!0,value:e,onChange:o,maxLength:c,error:a,errorType:m,className:gi["memo-input"],inputClassName:gi["memo-input-core"],innerClassName:gi["memo-input-box"]})})},$o=(0,lr.memo)(QI);r();s();var eT=e=>{let{coin:o}=C(),t=b(),n=ie(),i=F(),a=S(ao),{gasLimit:m,signInfo:c,isIBCTransfer:u,gasPrice:p}=S(Qr),l=xs({localType:o.localType}),f=qe({businessType:j.SEND}),g=ee();return ge(async()=>{let{chainId:I,sequence:y,accountNumber:E,feeDemon:N,demon:w,sourceChannel:v}=c,R={chainId:I,sequence:y,accountNumber:E,feeDemon:N,feeAmount:a,gasLimit:m,memo:e},D={fromAddress:t,toAddress:i,demon:w,amount:n},M;if(u){let H=ce(Math.round(Date.now()/1e3),300);M={...R,type:tn.IBC_TRANSFER,data:{...D,sourcePort:"transfer",sourceChannel:v,ibcTimeoutTimestamp:H}}}else M={...R,type:tn.TRANSFER,data:{...D}};return await Ne().signTransaction(M,t,l?.baseChain,g,{chain:l.localType})},async I=>{let y={memo:e,gasPrice:p,gasLimit:m},E=await Te(o.localType,I),N={signedTx:I,coinAmount:n,coinId:o.coinId,fromAdr:t,toAdr:i,serviceCharge:a,extJson:JSON.stringify(y),txHash:E};return await f(N)})},Rl=eT;r();s();function Ma({feeInfo:e,callback:o}){let t=ys();return{level:e.gasType,loading:!t&&e.initLoading,networkFee:!t&&e.initLoading?void 0:e.gasFee,estimateFailed:t||e.error,onClick:()=>{o()}}}function oT(){let e=k(),[o,t]=(0,Do.useState)({}),[n,{toggle:i}]=Ym(!1),{coin:a}=C(),{coinId:m}=a,c=b(),u=F(),p=ie(),l=S(Qr),f=Ma({feeInfo:o,callback:i}),[g,_]=(0,Do.useState)(""),x=Rl(g),T=async()=>{await x()},I=E=>{_(E.target.value)},y=E=>{t(E),e(V(E.gasFee)),e(L(f.estimateFailed)),e(as({...l,gasLimit:E.gasAmount,gasPrice:E.gasPriceStep}))};return te(),Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(z,{confirmButtonProps:{onSubmit:T},slot:{bottom:Do.default.createElement(Do.default.Fragment,null,Do.default.createElement($o,{value:g,onChange:I}),Do.default.createElement(Zd,{visible:n,coinId:String(m),address:c,inputData:l.inputData,to:u,value:p,onBack:i,onClose:i,onChange:y}))},networkFeeProps:f}))}var Dl=oT;var tT={match:e=>nc(e),pages:{AddressPage:wl,AmountPage:Ll,ConfirmPage:Dl}},Ml=tT;r();s();r();s();var Ol=A(h());r();s();var nT=()=>{let{baseCoin:e}=C();return ne(async o=>{let t=wo(o,e.localType);return await Tt(t,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},rT=()=>{let e=qo(),o=nT();return[e,o]},Ul=rT;var sT=()=>{let e=Ul();return Ol.default.createElement(Z,{addressProps:{errorFns:{fns:e,override:!0}}})},Gl=sT;r();s();var gr=A(h());Le();r();s();r();s();var Hl=A(h());r();s();var Wl=A(h());r();s();var Vl=({contractAddress:e,toAddress:o,amount:t})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${e}","function":"transfer","args":{"to":"${o}","amount":"${t}"}}}`;return d.Buffer.from(n).toString("hex")}catch{return""}};var iT=()=>{let{coin:e}=C(),o=wo(F(),e.localType),t=ie(),n=S(gn),{isFacet:i,facetContractAddress:a}=n||{};return(0,Wl.useMemo)(()=>!e.address||!Ku(o)?"":i?Vl({contractAddress:a,toAddress:o,amount:t}):Ot(o,t),[e,o,t,i,a])},zn=iT;function aT(){let{coin:e}=C(),o=b(),t=F(),n=wo(o,e.localType),i=wo(t,e.localType),a=zn(),m=S(io),c=e.baseCoinId===0?m:a,u=K(),p=S(gn),{isFacet:l,facetBlackHoleAddress:f}=p||{},g=(0,Hl.useMemo)(()=>l?f:e.baseCoinId===0?i:e.address,[e.baseCoinId,e.address,i,l,f]),_=e.address?"0":u;return{coin:e,from:n,to:i,inputData:c,value:_,tokenAddress:g}}var Ci=aT;r();s();Le();r();s();function mT(e,o){let t=e,{defaultMsg:n,force:i}=o||{};if((t?.message===cu||t?.message===vn)&&!i)return;let m=t?.data?.msg||t?.msg||t?.data?.originalError?.msg||t?.message||n||P("wallet_extension_general_error_extension_code_error");We.error({title:m})}var Xl=mT;var cT=10;function uT({onRequest:e}){let o=k(),t=vs(),[n,{setTrue:i,setFalse:a}]=de(!1),m=Bn();return{onClick:async()=>{try{i();let p=(await e())?.popupInfoList||{};p?.length&&await t(p);let l=tm(p,"0.templeteId");o(Rc(l===cT)),m()}catch(u){Xl(u)}finally{a()}},loading:n}}var _i=uT;function dT(){let e=k(),{coin:o,from:t,inputData:n,value:i,tokenAddress:a}=Ci(),m=Os({preExecParams:{from:t,to:a,chainIndex:o.chainId,inputData:n,amount:i,method:cc}});return _i({onRequest:async()=>{let c=await m();return e(Mc(c?.x402Message)),c}})}var Kl=dT;r();s();r();s();var eo=A(h());Le();var ql=(0,eo.createContext)({requestGasLimitFn:er});function Yt(){return(0,eo.useContext)(ql)}function fT({preExecParams:e,extraParams:o}){let t=Os({preExecParams:e,...o}),n=(0,eo.useRef)(0),[i,a]=(0,eo.useState)(!1),[m,c]=(0,eo.useState)(null),[u,p]=(0,eo.useState)(null),l=ne(async(f={})=>{let g=++n.current;a(!0);try{let _=await t(f);return c(_?.gasFee||{}),p(_||{}),_}finally{g===n.current&&a(!1)}});return{loadingGasLimit:i,gasLimitInfo:m,preExecResult:u,requestGasLimitFn:l}}function Jl({children:e,preExecParams:o,initialGasData:t,coinId:n,from:i,to:a,value:m,data:c,typeInt:u,onlyGasLimit:p,method:l,dappInfo:f,authorizationList:g,stateOverrideList:_}){let x=(0,eo.useMemo)(()=>({initialGasData:t,coinId:n,from:i,to:a,value:m,data:c,typeInt:u,onlyGasLimit:p,method:l,dappInfo:f,authorizationList:g,stateOverrideList:_}),[t,n,i,a,m,c,u,p,l,g,_]),{isSignInfoInitLoading:T,signInfo:I}=bd({coinId:n,address:i}),{loadingGasLimit:y,gasLimitInfo:E,preExecResult:N,requestGasLimitFn:w}=fT({preExecParams:o,extraParams:x}),{finalInitialGasData:v,renderNetworkFee:R}=kd({coinId:n,initialGasData:t,signInfo:I,gasLimitInfo:E}),D=(0,eo.useMemo)(()=>({isSignInfoInitLoading:T,signInfo:I,isGasLimitInfoLoading:y,gasLimitInfo:E,preExecResult:N,requestGasLimitFn:w,initialGasData:v,renderNetworkFee:R,extraParams:x}),[T,I,y,N,E,w,v,R,x]);return eo.default.createElement(ql,{value:D},e)}function pT(){let{requestGasLimitFn:e}=Yt();return _i({onRequest:e})}var Yl=pT;r();s();r();s();var Si="SEND_EVM_REQUEST_GAS_LIMIT";function lT(){let{coin:e}=C(),{requestGasLimitFn:o}=Yt();Ut(()=>o({onlyGasLimit:!0}),{manual:e.baseCoinId!==0,cacheKey:Si,cacheTime:-1,staleTime:-1})}var Zl=lT;r();s();var zl=A(h());function gT(){let e=k(),{coin:o}=C();(0,zl.useEffect)(()=>{o.systemToken&&e(At(o.coinId))},[o.coinId])}var Ua=gT;var jl=()=>{let e=Xo();return!!Uu().key||Fo(e)||e===""},CT=()=>{let e=jl(),{onClick:o,loading:t}=Yl(),n=Aa({disabled:e,loading:t,onClick:o});return Q(),Ua(),Zl(),gr.default.createElement(J,{footerActions:n})},_T=()=>{let e=jl(),{onClick:o,loading:t}=Kl(),n=Aa({disabled:e,loading:t,onClick:o});return Q(),Ua(),gr.default.createElement(J,{footerActions:n})};function ST(){let{coin:e}=C();return e?.protocolType===lo.GAS_FREE_COIN?gr.default.createElement(_T,null):gr.default.createElement(CT,null)}var $l=ST;r();s();var Qo=A(h());r();s();var Ql=A(h());var eg=A(ve());function AT(){let e=(0,eg.useHistory)(),{baseCoin:o}=C(),t=uo(),n=b(),i=F(),a=K(),m=S(io),c=Hu(),u=qr({from:n,to:i,value:Io(a),data:m}),p=()=>{e.go(-3)};return Ql.default.createElement(Fd,{needMev:!0,chainId:o.chainId,walletId:t,txParams:u,showDappInfo:!1,coinId:o.coinId,onConfirm:c,onCancel:p})}var og=AT;r();s();var mt=A(h());r();s();var jn={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function IT({visible:e,onClose:o,onConfirm:t}){let n=uu({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return mt.default.createElement(co.Confirmation,{visible:e,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:o},mt.default.createElement("div",{className:jn.content},mt.default.createElement(su,{src:n,className:jn.img}),mt.default.createElement("div",{className:jn.title},P("wallet_extension_transaction_dialog_title_change_type")),mt.default.createElement("div",{className:jn.tip},P("wallet_extension_transaction_dialog_desc_change_type")),mt.default.createElement("div",{className:jn.btns},mt.default.createElement(Ce,{category:Ce.CATEGORY.fill,type:Ce.TYPE.highlight,size:Ce.SIZE.lg,onClick:o},P("commonall_text_btn_cancel")),mt.default.createElement(Ce,{category:Ce.CATEGORY.outline,type:Ce.TYPE.primary,size:Ce.SIZE.lg,onClick:t},P("commonall_modal_btn_continue")))))}var tg=IT;r();s();var Cr=A(h());function TT(){let e=Ko();return Cr.default.createElement(B.Space,{direction:B.DIRECTION.vertical,space:24},Cr.default.createElement(On,{coinId:e}),Cr.default.createElement(Un,{label:P("wallet_extension_transaction_title_network_fee"),value:Cr.default.createElement(_s,{category:_s.CATEGORY.fill,color:_s.COLOR.lime},P("wallet_extension_transfer_tag_gasfree"))}))}var ng=TT;r();s();function xT(){let{coin:e}=C(),o=S(_c),t=S(io);return e.baseCoinId===0&&o&&t}var rg=xT;r();s();var sg=A(h());function hT(){let e=ws(),{coin:o}=C(),t=o?.protocolType===lo.GAS_FREE_COIN;return(0,sg.useCallback)(()=>t?null:e(),[e,t])}function yT(){let e=hT(),o=Ns(),t=zu(),n=Zu();te({fns:[e,n,o,t],override:!0})}var ig=yT;r();s();function PT(){let e=S(Cn),{coin:o}=C(),t=ie(),n=b(),i=F();return{fetchParams:{coinId:o.coinId,from:n,to:i,amount:t,gasPrice:e.gasPrice},userGasInfo:e,baseCoinAmountUse:o.baseCoinId===0?t:"0"}}var ag=PT;r();s();var bT=()=>{let{coin:e}=C(),o=Bs(),t=Rn(),n=K(),i=Ke(),a=b(),m=F(),c=wo(a,e.localType),u=wo(m,e.localType),p=uo(),{activityId:l,activity:f,status:g,tip:_}=ht(),x=zn(),T=S(io),I=S(gn),y=Id({walletId:p,fromAddr:c,coinId:e.coinId}),E=_e({coinId:e.coinId,fromAddr:c,toAddr:u,localType:e.localType,businessType:j.SEND}),N=(U,H)=>{let{userGasInfo:W}=H,{updateGasInfo:X}=U;return X?{...X,gasLimit:W.gasLimit,supportEip1559:W.supportEip1559,networkFee:W.networkFee}:{...W}},w=U=>{let H=U.supportEip1559?U.maxFeePerGas:U.gasPrice,W=U?.networkFee||Ye(H,U.gasLimit),X=Ze(t,W);if(Ge(X,0))return[!1,n];if(e.baseCoinId===0)return i?[Re(X,0),X]:[Dt(n,X),n];let ae=o;e.systemToken&&(ae=Ze(ae,W));let se=i?ae:n;return[Dt(se,ae),se]},v=({updateData:U,finallyGasInfo:H,publishAmountInt:W})=>{let{nonce:X}=U,ae=W,se=vm(e.localType)?.realChainIdHex,q={from:c,gasLimit:Io(H.gasLimit),nonce:Io(X),chainId:se};return H.supportEip1559?(q.maxFeePerGas=Io(H.maxFeePerGas),q.maxPriorityFeePerGas=Io(H.maxPriorityFeePerGas),q.type=Rm.FEE_MARKET):q.gasPrice=Io(H.gasPrice),I?.isFacet?(q.value="0",q.to=I?.facetBlackHoleAddress,q.data=x):e.address?(q.value="0",q.to=wo(e.address,e.localType),q.data=x):(q.value=Io(ae),q.to=u,T&&(q.data=T)),qr(q)},R=({txParams:U,publishAmountInt:H,finallyGasInfo:W})=>{let X={...U};return e.systemToken&&(X.value=mm(Io(H))),X.walletId=p,X.supportEip1559=W.supportEip1559,X},D=({txParams:U,publishAmountInt:H,dataForCheck:W={}})=>{let{userGasInfo:X={}}=W,ae=cn(U.value),se=cn(U.gasLimit),q=cn(X.supportEip1559?U.maxFeePerGas:U.gasPrice),pe=Ye(se,q),ye={...U,value:ae,sendCoinAmountInt:o,from:a,to:m,gas:se,gasPrice:q,priorityFee:cn(X.supportEip1559?U.maxPriorityFeePerGas:0),nonce:cn(U.nonce),repeatTxType:Dr.CONFIRMING,oldTxHash:"",gasType:X?.gasType};return{coinId:e.coinId,coinAmount:H,fromAdr:a,toAdr:m,serviceCharge:pe,extJson:JSON.stringify(ye),txSource:Oo.NORMAL,inputData:U.data||"",activityId:l||void 0}};return async(U,H={})=>{let W=N(U,H),[X,ae]=w(W);if(!X)throw new Error("balance check error");let se=v({updateData:U,finallyGasInfo:W,publishAmountInt:ae}),q=R({txParams:se,publishAmountInt:ae,finallyGasInfo:W}),pe=D({txParams:se,publishAmountInt:ae,dataForCheck:H});cm({activityId:l,activity:f,status:g,tip:_,walletId:p,address:c});let ye=await y(q);await E(ye,pe)}},mg=bT;r();s();r();s();var Oa={ETH_SIGN:0,PERSONAL_SIGN:1,SIGN_TYPED_DATA_V1:2,SIGN_TYPED_DATA_V3:3,SIGN_TYPED_DATA_V4:4},DK={V1:Oa.SIGN_TYPED_DATA_V1,V3:Oa.SIGN_TYPED_DATA_V3,V4:Oa.SIGN_TYPED_DATA_V4};var cg={V1:"V1",V3:"V3",V4:"V4"};function kT(){let e=uo(),o=Td({walletId:e}),t=S(Sc),{coin:n}=C(),i=K(),a=Bs(),m=Ke(),c=b(),u=F(),p=zn(),l=S(io),f=_e({coinId:n.coinId,localType:n.localType,businessType:j.SEND_X402});return async()=>{let _=m?a:i,x={value:n.address?"0":Io(_),sendCoinAmountInt:a,from:c,to:u,repeatTxType:Dr.CONFIRMING,oldTxHash:"",data:n.address?p:l},T=await o({msgParams:{data:JSON.stringify(t),from:c,version:cg.V4},baseChain:mc(n?.localType),type:im.ETH_SIGN_TYPED_DATA});await f({signature:T,authorization:t?.message},{extJson:JSON.stringify(x),serviceCharge:"0",ignoreTxHash:!0,toAdr:u,coinAmount:_,fromAdr:c,x402transfer:!0})}}var ug=kT;r();s();var dg=A(h());function ET(){let e=k(),o=S(Cn),t=Ln(),n=Y(),{gasLimit:i,gasPrice:a,maxPriorityFeePerGas:m,maxFeePerGas:c,supportEip1559:u,extFee:p,gasPriceInfo:l,gasLimitInfo:f,gasType:g}=o,{minGasFee:_}=hu({gasLimit:i,gasPrice:a,maxPriorityFeePerGas:m,maxFeePerGas:c,supportEip1559:u,extFee:p,gasPriceInfo:l,gasLimitInfo:f,gasType:g}),x=(0,dg.useMemo)(()=>{if(O.lt(t,n))return n},[t,n]);return{feeLevel:g,networkFee:_,onClick:()=>{e(ns(!0))},maxNetworkFee:x}}var fg=ET;var FT=()=>{let e=k(),o=fg(),t=ag(),n=Vu(),i=xd(),a=mg(),m=ug(),{clear:c}=ht(),u=S(io),p=Gs(u),l=rg(),{coin:f}=C(),g=f?.protocolType===lo.GAS_FREE_COIN,[_,x]=(0,Qo.useState)(!1),T={networkFee:g?Qo.default.createElement(ng,null):null},I=async()=>{if(l)return x(!0),{pause:!0};try{if(g)return await m(),null;let E=await i({...t.fetchParams,userGasInfo:t.userGasInfo,baseCoinAmountUse:t.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(E,t),null}catch(E){let N=E;if(N?.message===ku)throw new Error(vn);{let w=N?.data?.originalError;throw Rd(w?.code)&&c?(c(),w):E}}},y=S(St);return ig(),Qo.default.createElement(Qo.default.Fragment,null,Qo.default.createElement(z,{slot:T,networkFeeProps:o,confirmButtonProps:{disabled:!!p,onSubmit:I},tipMessageProps:{blockAddressInfo:y,maxNetworkFee:o.maxNetworkFee}}),Qo.default.createElement(tg,{visible:_,onClose:()=>{x(!1),na({action_after_pop_up:"cancel"})},onConfirm:()=>{e(Dc(!0)),x(!1),na({action_after_pop_up:"confirm"})}}))};function wT(e){return S(Zr)?Qo.default.createElement(og,null):Qo.default.createElement(FT,{...e||{}})}var pg=wT;r();s();var Oe=A(h());r();s();function NT(){Jm(()=>{Hr([Si])})}var lg=NT;r();s();function vT(){let{coin:e}=C(),o=b(),t=Ou(),n=S(Cn);return Cd({txType:_d.transfer,coinId:e.coinId,fromAddress:o,unavailable:n.gasType===me.CUSTOM,fee:t})}var gg=vT;function BT(){let{coin:e}=C(),o=S(io),t=bs(),n=S(Wo);return(0,Oe.useMemo)(()=>{let i=null,a=e.baseCoinId===0&&Gs(o);return n&&(e.baseCoinId!==0||!a)&&(i=+new Date),{disabled:a||t,fetchOnce:i}},[e.baseCoinId,o,t,n])}function LT(){let e=k(),{preExecResult:o}=Yt(),t=(0,Oe.useRef)(!1),n=(0,Oe.useRef)(!1),i=()=>{if(n.current||t.current?e(L(!0)):e(L(!1)),t.current){let m=o?.tipMessageInfo?.tipMessage;e(fa({text:m||P("wallet_extension_transfer_alert_execution_failure")}))}else e(fa(null))};return ne(m=>{e(Lc(m)),e(re(m?.isNetworkFeeLoading));let c=m.supportEip1559?m.maxFeePerGas:m.gasPrice,u=m.networkFee;c==="0"?n.current=!0:n.current=!1,m?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,e(V(u)),i()})}var RT=(0,Oe.memo)(()=>{let e=k(),o=S(Cc),{coin:t}=C(),{initialGasData:n,isSignInfoInitLoading:i,signInfo:a,gasLimitInfo:m,isGasLimitInfoLoading:c,renderNetworkFee:u,extraParams:p}=Yt(),{from:l,data:f,to:g,value:_}=p||{},x=Be(),T=ht(),{disabled:I,fetchOnce:y}=BT(),E=LT(),N=()=>{e(ns(!1))};return(0,Oe.useEffect)(()=>{e(Bc(a||{}))},[a]),u?Oe.default.createElement(Ed,{currencyId:x,visible:o,coinId:t.coinId,address:l,inputData:f,tokenAddress:g,value:_,estimatedL1FeeOptions:{fetchOnce:y,disabled:I},onBack:N,onGasChange:E,gasReturn:T,initialGasData:n,isSignInfoLoading:i,signInfo:a,initialGasLimitInfo:m,isGasLimitLoading:c}):null}),DT=({children:e})=>{let o=gg(),t=S(Zr),{coin:n,from:i,inputData:a,value:m,tokenAddress:c}=Ci();return lg(),Oe.default.createElement(Jl,{coinId:n.coinId,from:i,to:c,value:m,data:a,method:Gn},Oe.default.createElement(Ld,{gasReturn:o},e,!t&&Oe.default.createElement(RT,null)))};function MT({children:e}){let{coin:o}=C();if(!o)return null;let t=o?.protocolType===lo.GAS_FREE_COIN;return Oe.default.createElement(Oe.default.Fragment,null,t?e:Oe.default.createElement(DT,null,e))}var Cg=MT;var UT={match:e=>oc(e),SubContainer:Cg,pages:{AddressPage:Gl,AmountPage:$l,ConfirmPage:pg}},_g=UT;r();s();r();s();var Sg=A(h());var OT=()=>(Q(),Sg.default.createElement(J,null)),Ag=OT;r();s();var Tg=A(h());r();s();var GT=()=>{let{coin:e}=C(),o=b(),t=ie(),n=Y(),i=ee(),a=F(),m=Ae({fromAddr:o,localType:e.localType,walletId:i}),c=_e({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:a,networkFee:n,localType:e.localType,businessType:j.SEND});return ge(async()=>{let _={coinId:e.coinId,address:o,amount:t,fee:n,accountId:i},{data:x}=await Uo(Ao.getSpecialUtxoList,_);return x},_=>({inputs:_.map(y=>({txId:y.txId,vOut:y.index,address:y.address,amount:y.amount})),outputs:[{address:a,amount:t}],address:o,fee:n}),async _=>await m({params:_}),async _=>await c(_))},Ig=GT;var VT=()=>{let e=Ig();return te(),Tg.default.createElement(z,{confirmButtonProps:{onSubmit:e}})},xg=VT;r();s();r();s();var Ai=A(h());var WT=()=>{let e=k(),{coin:o}=C(),t=b(),n=(0,Ai.useCallback)(async()=>{try{let{data:a={}}=await sn({coinId:o.coinId,fromAddr:t});a?.info?.normal?e(V(a.info.normal)):e(L(!0))}catch{e(L(!0))}finally{e(re(!1))}},[e,t,o.coinId]),{run:i}=so(n,{wait:500});(0,Ai.useEffect)(()=>{e(re(!0)),i()},[t,o.coinId,i,e])},hg=WT;var HT=({children:e})=>(hg(),e),yg=HT;var XT={match:e=>e===hm,SubContainer:yg,pages:{AddressPage:Z,AmountPage:Ag,ConfirmPage:xg}},Pg=XT;r();s();r();s();var wg=A(h());r();s();var Ii=A(h());var KT=()=>{let e=k(),{coin:o}=C(),t=b(),n=F(),i=Se(),a=(0,Ii.useCallback)(async()=>{try{let c=await i({coinId:o.coinId,address:t,fromAddr:t,toAddr:n});e(Gc({name:"signInfo",value:c}));let u=[],{fee:p,depositMinAmount:l,minTransferTokenValue:f,depositGasFee:g,toAddressCheck:_}=c;o.baseCoinId===0?u.push(p):_===0?u.push(p,f,l,g):u.push(p,f);let x=u.reduce((T,I)=>ce(T,I),0);e(V(x))}catch{e(L(!0))}finally{e(re(!1))}},[e,i,o.coinId,o.baseCoinId,t,n]),{run:m}=so(a,{wait:500});(0,Ii.useEffect)(()=>{e(re(!0)),e(L(!1)),m()},[e,a,m])},bg=KT;r();s();var kg=A(h());var qT=()=>{let e=k(),{coin:o,baseCoin:t}=C(),{baseCoinId:n}=o,i=b(),a=ee(),m=st(i,a,Cm),u=He(t.coinId,a,{addressType:m})?.coinAmountInt,f=S(An)?.signInfo?.storageUsedAmount;(0,kg.useEffect)(()=>{if(!u||!f)return;let g=Ze(u,f);e(n===0?le(g):mo(g))},[e,n,f,u])},Eg=qT;r();s();var JT=()=>{let{baseCoin:e}=C();return ne(async o=>{let t={address:o,coinId:e.coinId};try{let{data:i}=await Uo(Ao.postCheckAddress,t);if(i?.res)return null}catch{}return await Tt(o,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},Fg=()=>{let e=qo(),o=JT();return[e,o]};var YT=()=>{bg(),Eg();let e=Fg();return wg.default.createElement(Z,{addressProps:{errorFns:{override:!0,fns:e},extraProps:{disableRequestDomain:!0}}})},Ng=YT;r();s();var Rg=A(h());r();s();var vg=()=>{let e=ze(),o=ed(),t=S(An),{coin:n,baseCoin:i}=C(),a=Y();return ne(m=>{let c=ce(t?.signInfo?.storageUsedAmount,a);return(n.baseCoinId===0?Ge(e,m):Ge(o,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:fe(c,{useContractPrecision:!0,contractPrecision:{decimals:i.decimals},useLargeNumberPrecision:!0,precision:i.displayPrecision,isStableCoin:i.stableCoin,roundingMode:"CEIL"}).value},type:oe.FEE_BALANCE_INSUFFICIENT}:null})},Bg=()=>{let e=Nn(),o=vg();Q({fns:[e,o],override:!0})},ZT=()=>{let e=vg();return ne(o=>{let t=e(o);return t?{...t,highlight:Wt.AMOUNT}:null})},Lg=()=>{let e=Ns(),o=ZT();te({fns:[e,o],override:!0})};var zT=()=>(Bg(),Rg.default.createElement(J,{totalAmountProps:{type:"amount"}})),Dg=zT;r();s();var Ug=A(h());r();s();var Ga=A(OS());var jT=()=>{let{coin:e}=C(),o=b(),t=F(),n=ie(),i=Y(),a=ee(),m=S(An),c=Se(),u=Ae({fromAddr:o,localType:e.localType,walletId:a}),p=_e({coinId:e.coinId,coinAmount:n,fromAddr:o,toAddr:t,localType:e.localType,networkFee:i,walletId:a,businessType:j.SEND}),l=async()=>await c({coinId:e.coinId,address:o,fromAddr:o,toAddr:t}),f=T=>{let{blockHash:I,nonce:y}=T;return{from:o,blockHash:I,type:Ga.NearTypes.TransferNear,nonce:y,receiverId:t,amount:n}},g=T=>{let{blockHash:I,nonce:y}=T,{signInfo:E}=m,{toAddressCheck:N,minTransferTokenValue:w,depositGasFee:v,fee:R,depositMinAmount:D}=E;return{from:o,blockHash:I,type:Ga.NearTypes.TransferToken,nonce:y,receiverId:t,amount:n,contract:e.address,depositGas:v,transferGas:R,depositValue:D,minTransferTokenValue:w,shouldDeposit:Boolean(N===0)}};return ge(l,T=>e.baseCoinId===0?{params:f(T)}:{params:g(T)},u,p)},Mg=jT;var $T=()=>{let e=Mg();return Lg(),Ug.default.createElement(z,{confirmButtonProps:{onSubmit:e}})},Og=$T;r();s();var Gg=A(h());var QT=({children:e})=>{let t=Xe().get("from");return Gg.default.createElement(Pe,{fromAddress:t},e)},Vg=QT;var ex={match:e=>e===ym,Container:Vg,pages:{AddressPage:Ng,AmountPage:Dg,ConfirmPage:Og}},Wg=ex;r();s();r();s();var Xg=A(h());r();s();var ox=()=>{let{coin:e}=C();return ne(async o=>{let t={address:o,chainId:e?.chainId},n=!1;try{let{status:i}=await Eu(t);n=i===Dm.COMPLETED}catch{n=!1}return n?null:{key:"wallet_extension_transfer_input_error_add_unregistered",args:{}}})};function tx(){return[ox()]}var Hg=tx;var nx=()=>{let o={errorFns:{override:!1,fns:Hg()},extraProps:{disableRequestDomain:!0}};return Xg.default.createElement(Z,{addressProps:o})},Kg=nx;r();s();var _r=A(h());r();s();var Ti=A(h());var qg=A(ve());function rx(e){return t=>{let n=(0,qg.useHistory)(),i=S(cs),a=Ee(),{coin:m}=C(),c=F(),u=Mu(),[p,l]=(0,Ti.useState)(!1);return Go(()=>{if(um(m))n.replace(i||Jr),l(!1);else if(c)l(!0);else{let f={pathname:`${Ve}/${a}${dn}`};u&&(f.search=`?from=${u}`),n.replace(f),l(!1)}}),p?Ti.default.createElement(e,{...t}):null}}var xi=rx;r();s();var Jg=A(h());var sx=({coinId:e,address:o})=>{let t=k(),[n,i]=go({coinId:e,address:o});return(0,Jg.useEffect)(()=>{i.normal&&t(V(i.normal)),i.maxTransferAmount&&t(e===Nr?le(i.maxTransferAmount):mo(i.maxTransferAmount))},[e,t,i.maxTransferAmount,i.normal]),[n,i]},hi=sx;r();s();var Yg=A(h());var ix=e=>{let{coin:o}=C(),t=Ln(),n=$u(t,o?.decimals),i=ze();return(0,Yg.useCallback)(a=>o?.baseCoinId===0&&Re(a,i)&&Dt(a,n)?{key:"wallet_extension_transfer_input_error_pi_minimum",args:{amount:fe(e,{useContractPrecision:!0,contractPrecision:{decimals:o.decimals},precision:o.displayPrecision,isStableCoin:o.stableCoin,useLargeNumberPrecision:!0}).value},type:oe.BALANCE_INSUFFICIENT}:null,[n,e,i,o])},ax=e=>{let o=Fs(),t=Nn(),n=Yu(),i=ix(e);Q({fns:[o,i,t,n],override:!0})},Zg=ax;function mx(){let{coin:e}=C(),o=b(),[t,n]=hi({coinId:e?.coinId,address:o});return Zg(n?.maxTransferAmount),_r.default.createElement(J,{isGlobalLoading:t,totalAmountProps:{type:"amount",title:_r.default.createElement(_r.default.Fragment,null,P("extension_wallet_send_text_transfer_available"),_r.default.createElement(Po,{size:Po.SIZE.xxs,style:{marginLeft:"4px"},tooltip:P("wallet_extension_transfer_input_error_pi_available_balance"),icon:"okx-wallet-plugin-information-circle"}))}})}var zg=xi(mx);r();s();var Sr=A(h());r();s();var jg=A(h());var cx="transfer",ux=(e,o)=>{let{coin:t}=C(),n=b(),i=ee(),a=ie(),m=Y(),c=F(),u=Ae({walletId:i,fromAddr:n,localType:t.localType}),p=_e({walletId:i,coinId:t.coinId,coinAmount:a,fromAddr:n,toAddr:c,networkFee:m,localType:t.localType,businessType:j.SEND});return(0,jg.useCallback)(async()=>{let l={memo:e,amount:a,source:n,fee:o?.normal,sequence:o?.nonce,type:cx,decimals:t?.decimals,toAddress:c,networkPassphrase:o?.networkPassphrase},f=await u({params:l}),g=await Te(t?.localType,{tx:f,networkPassphrase:o?.networkPassphrase});await p(f,{txHash:g})},[e,a,n,o?.normal,o?.nonce,o?.networkPassphrase,t?.decimals,t?.localType,c,u,p])},$g=ux;var Qg=28;function dx(){let{coin:e}=C(),o=b(),[t,n]=(0,Sr.useState)(""),[i,a]=hi({coinId:e?.coinId,address:o}),m=$g(t,a),c=u=>{let p=u.target.value;new TextEncoder().encode(p).length<=Qg&&n(u.target.value)};return te(),Sr.default.createElement(z,{slot:{bottom:Sr.default.createElement($o,{value:t,placeholder:P("extension_wallet_transaction_input_entermemo_max",{num:Qg}),onChange:c})},confirmButtonProps:{loading:i,onSubmit:m}})}var eC=dx;var fx={match:e=>e===Nr,pages:{AddressPage:Kg,AmountPage:zg,ConfirmPage:eC}},oC=fx;r();s();r();s();var iC=A(h());r();s();var Ar=A(h());var tC=()=>{let{toRent:e}=S(nr),{coin:o,baseCoin:t}=C(),n=ze();return(0,Ar.useCallback)(i=>{if(o.baseCoinId!==0)return null;let a=ro(e,10**o.decimals);return Ge(i,a)?{key:"wallet_extension_toast_minimum_rent_fee",args:{num:fe(a,{useLargeNumberPrecision:!0,precision:t.displayPrecision,isStableCoin:t.stableCoin,roundingMode:"CEIL"}).value,token:t.symbol},type:oe.COMMON_ERROR}:null},[n,e,t.symbol])},nC=()=>{let{selfRent:e,toRent:o}=S(nr),{coin:t,baseCoin:n}=C(),i=S(ao),a=Rn();return(0,Ar.useCallback)(()=>{if(t.baseCoinId===0)return null;let m=ce(i,e);if(Ge(a,m)){let c=fe(ro(m,10**n.decimals),{useLargeNumberPrecision:!0,precision:n.displayPrecision,isStableCoin:n.stableCoin,roundingMode:"CEIL"}).value;return{key:"wallet_extension_toast_insufficient_balance_initiate_txn",args:{token:n.symbol,num:c},type:oe.FEE_BALANCE_INSUFFICIENT}}else if(Ge(a,ce(m,o)))return{key:"wallet_extension_loading_text_minimum_reserve_rent",args:{num:fe(ro(ce(m,o),10**n.decimals),{useLargeNumberPrecision:!0,precision:n.displayPrecision,isStableCoin:n.stableCoin,roundingMode:"CEIL"}).value,token:n.symbol},type:oe.FEE_BALANCE_INSUFFICIENT};return null},[a,i,e])},rC=()=>{let e=tC(),o=nC();Q([e,o])},px=()=>{let e=tC();return(0,Ar.useCallback)(o=>{let t=e(o);return t?{...t,highlight:Wt.AMOUNT}:null},[e])},lx=()=>{let e=nC();return(0,Ar.useCallback)(()=>{let o=e();return o?{...o,highlight:Wt.AMOUNT}:null},[e])},sC=()=>{let e=px(),o=lx();te([e,o])};function gx(){let e=S(zr),o=S(Ac);return rC(),iC.default.createElement(J,{totalAmountProps:{title:P("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:e||o}})}var aC=gx;r();s();var Lt=A(h());r();s();var he={JITO:"jito",PRIORITY_FEE:"priorityFee"},Va="speedUpMode";function mC(e){let o=en.get(Va);return o?typeof o=="string"&&(o={[wm]:o}):o={},o[e]||he.PRIORITY_FEE}function cC(e,o){let t=en.get(Va);en.set(Va,{...t||{},[e]:o})}var uC="jitoGuide";function dC(){return!!en.get(uC)}function fC(){en.set(uC,"1")}r();s();var we=A(h());r();s();var yi={title:"_title_1sy1j_1",tip:"_tip_1sy1j_4",container:"_container_1sy1j_11",tipDetail:"_tipDetail_1sy1j_14"};var Cx=we.default.memo(({onClose:e})=>{let o=k(),n=S(a=>Vo(a))===he.JITO?he.JITO:he.PRIORITY_FEE,i=(0,we.useMemo)(()=>[{type:P("wallet_extension_transfer_tab_standard"),typeIcon:oa[me.STANDARD],typeKey:he.PRIORITY_FEE,isSelected:n===he.PRIORITY_FEE},{type:P("wallet_extension_transfer_tab_express"),typeIcon:oa[me.FAST],typeKey:he.JITO,isSelected:n===he.JITO}],[n]);return we.default.createElement("div",{className:yi.container},we.default.createElement(ar,{dataSource:i,renderItem:a=>we.default.createElement(yd,{...a,onClick:()=>{o(rr(a.typeKey)),e()}})}),we.default.createElement("div",{className:yi.tipDetail},P("wallet_extension_transfer_tooltips_desc_express_mode")))});function _x({jitoGuide:e,...o}){let n=S(_t)?.supportJito,[i,a]=(0,we.useState)(!1),m=(0,we.useCallback)(()=>{a(!1)},[]);return we.default.createElement(we.default.Fragment,null,we.default.createElement(B.Space,{direction:B.DIRECTION.vertical,space:24},we.default.createElement(On,{...o}),we.default.createElement(Ms,{...o,titleClassName:yi.title,onClick:n?()=>{a(!0)}:void 0,title:P("wallet_extension_transaction_title_network_fee")})),n&&we.default.createElement(co.Action,{visible:i,onClose:m,title:P("wallet_transfer_subtitle_network_fee"),maskClosable:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"},alignBottom:!0,noContentPadding:!0},we.default.createElement(Cx,{onClose:m})))}var pC=_x;r();s();var Sx=()=>{let e=qe({businessType:j.SEND}),{coin:o}=C(),t=b(),n=S(ct),i=F(),a=ie(),m=S(ao),{computeUnitPrice:c,computeUnitLimit:u}=S(Ic),p=S(Vo),l=S(Tc),f=Ae({fromAddr:t,localType:Er,walletId:n}),g=Se(),{coinId:_}=o,x=async()=>{let w=await g({coinId:_,toAddr:i,address:t,fromAddr:t,scenario:Mr.SCENARIO_SEND_COIN}),{recentBlockhash:v,toAddressLegal:R,tokenAccountToAddress:D}=w||{};return{recentBlockHash:v,haveTokenAccountAddress:R===!0,tokenAccountAddress:D||""}},T=async w=>{let{recentBlockHash:v,haveTokenAccountAddress:R}=w,D={from:t,to:i,amount:a,blockHash:v,payer:t};p===he.PRIORITY_FEE&&(D={...D,computeUnitPrice:c,computeUnitLimit:u});let M;return o.baseCoinId===0?M={...D,type:Ur.TRANSFER}:M={...D,type:Ur.TOKEN_TRANSFER,createAssociatedAddress:!R,mint:o.address},o.protocolType===lo.SPL_TOKEN_2022&&(M.token2022=!0,M.decimal=o.decimals),await f({params:M})},I=async w=>{if(p!==he.JITO||!l)return null;let{recentBlockHash:v}=w,{tipAccountAddress:R,clientGasPrice:D}=l,M={from:t,to:R,amount:D,blockHash:v,payer:t,type:Ur.TRANSFER};return await f({params:M})};return ge(x,async(w={})=>{let v=await T(w),R=await I(w);return{rawSignedTx:v,jitoSignedTx:R}},async({rawSignedTx:w,jitoSignedTx:v})=>{let R=await Te(Er,w),D=w,M;p===he.JITO&&v&&(D=JSON.stringify([w,v]),M=JSON.stringify({mev:"Jito",jitoHash:await Te(Er,v)}));let U={signedTx:D,coinAmount:a,coinId:o.coinId,fromAdr:t,toAdr:i,serviceCharge:m,txHash:R,extJson:M},H=await e(U);return cC(o.localType,p),H})},lC=Sx;r();s();var Wa={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function Ax(){let e=S(zr),o=pt(e,{wait:200}),t=S(_t),[n,i]=(0,Lt.useState)(!0),a=lC(),m=async()=>{e||await a()};return sC(),(0,Lt.useEffect)(()=>{if(t?.supportJito){let c=dC();i(c),c||fC()}},[t?.supportJito]),Lt.default.createElement("div",{className:Wa.root,onClick:()=>{i(!0)}},Lt.default.createElement(z,{tipMessageProps:{hidden:e},containerProps:{contentClassName:n?"":Wa.contentJitoGuide},slot:{networkFee:c=>Lt.default.createElement(pC,{...c,jitoGuide:n})},confirmButtonProps:{disabled:o,onSubmit:m}}))}var gC=Ax;r();s();r();s();var CC=A(h());r();s();var Pi="send-solana-priority-gas-limit",bi="send-solana-pre-check";function Ix(){(0,CC.useEffect)(()=>()=>{Hr([Pi,bi])},[])}var _C=Ix;r();s();var IC=A(h());Le();r();s();var ki=A(h());function Tx(){let e=k(),[o,t]=(0,ki.useState)(!1),{coin:n}=C(),i=b(),a=F(),{coinId:m}=n,[,c,u]=go({coinId:m,address:i,chainId:n?.chainId,toAddr:a},{ready:!!m&&!!i&&!!a});return(0,ki.useEffect)(()=>{u?(e(L(!0)),e(ia(null)),t(!0)):(e(L(!c?.fee)),e(ia(c)),t(!1))},[c,u]),{baseFee:c?.fee||"0",signInfoError:o}}var SC=Tx;r();s();var Mo=A(h());Le();function xx(){let e=k(),o=b(),{baseCoin:t}=C(),n=(0,Mo.useRef)(void 0),i=(0,Mo.useRef)(!1),[a,m]=(0,Mo.useState)(void 0),c=async l=>{if(!i.current){try{let f=await Gm({from:o,chainId:t.chainId}),{clientGasPrice:g}=f||{},_=ce(g||"0",l?.fee||"0");m(_),e(ss({...f,totalJitoFee:_})),e(L(!1))}catch{m("0"),e(ss(null)),e(L(!0))}finally{e(Vt(!1))}n.current=setTimeout(()=>{c(l)},7e3)}};return[a,l=>{i.current=!1,c(l)},()=>{clearTimeout(n.current),i.current=!0,n.current=void 0,m(void 0),e(ss(null))}]}function hx(){let e=k(),o=wd({cacheKey:Pi,staleTime:-1}),t=b(),n=F(),{baseCoin:i}=C(),[a,m]=(0,Mo.useState)(void 0),c=()=>{m("0"),e(rs({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),e(L(!0))};return[a,async l=>{try{let{firstUnitLimit:f,preExecInfo:g}=await o({from:t,to:n,chainId:i.chainId,method:Gn});if(Fo(f)){c();return}let{computeUnitPrice:_,feelimit:x}=l,{priorityFee:T,priorityGasPrice:I,priorityGasLimit:y}=uc(x,_,f);m(T),e(rs({priorityFee:T,computeUnitPrice:I||"",computeUnitLimit:y||""})),e(L(!1)),e(It(g?.popupInfoList))}catch{c()}finally{e(Vt(!1))}},()=>{m(void 0),e(rs({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function yx({signInfo:e,signInfoError:o,speedUpMode:t,stopJitoFee:n,startPriorityFee:i}){let a=k(),{computeUnitPrice:m,feelimit:c}=e||{};(0,Mo.useEffect)(()=>{if(o){a(Vt(!1));return}Fo(m)||Fo(c)||!t||t===he.PRIORITY_FEE&&(n(),i({computeUnitPrice:m,feelimit:c}))},[o,t,m,c])}function Px({signInfo:e,signInfoError:o,speedUpMode:t,stopPriorityFee:n,startJitoFee:i}){let a=k(),{fee:m}=e||{};(0,Mo.useEffect)(()=>{if(o){a(Vt(!1));return}Fo(m)||!t||t===he.JITO&&(n(),i({fee:m}))},[o,t,m])}function bx({signInfoError:e}){let o=k(),t=S(Vo),n=S(_t),i=S(Zc),a=Wr(i),[m,c,u]=xx(),[p,l,f]=hx();return yx({signInfo:n,signInfoError:e,speedUpMode:t,stopJitoFee:u,startPriorityFee:l}),Px({signInfo:n,signInfoError:e,speedUpMode:t,stopPriorityFee:f,startJitoFee:c}),(0,Mo.useEffect)(()=>{a.current?o(Vt(!1)):o(Vt(!0))},[t]),(0,Mo.useEffect)(()=>()=>{u(),f()},[]),{speedUpFee:t===he.PRIORITY_FEE?p:m}}var AC=bx;function kx(){let e=k(),{baseFee:o,signInfoError:t}=SC(),{speedUpFee:n}=AC({signInfoError:t});(0,IC.useEffect)(()=>{Fo(n)||e(V(ce(o,n)))},[o,n])}var TC=kx;r();s();var xC=A(h());function Ex(){let e=k(),{coin:o}=C(),{selfRent:t}=S(nr),n=xt();(0,xC.useEffect)(()=>{(()=>{if(!!o)if(o.baseCoinId===0){let i=Ze(n||"0",t||"0");e(le(Re(i,"0")?i:"0"))}else e(le(null))})()},[o,t,n])}var hC=Ex;r();s();var yC=A(h());function Fx(){let e=k(),{coin:o}=C(),t=S(_t),n=Wr(S(Vo));(0,yC.useEffect)(()=>{!t||!("supportJito"in t)||!!n.current||(t.supportJito?e(rr(mC(o.localType))):e(rr(he.PRIORITY_FEE)))},[t,o.localType])}var PC=Fx;r();s();var bC=A(h());function wx(){let e=k(),o=S(Vo),{baseCoin:t}=C(),n=b(),i=F(),{runAsync:a}=Ut(ft,{manual:!0,cacheKey:bi,staleTime:-1});(0,bC.useEffect)(()=>{!o||(async()=>{if(o===he.JITO){e(sa(!0));try{let m=await a({from:n,to:i,method:Gn,chainIndex:t?.chainId});e(It(m.popupInfoList))}catch{We.error(P("wallet_extension_transaction_error_general_check_network"))}finally{e(sa(!1))}}})()},[o,n,i,t?.chainId])}var kC=wx;function Nx({children:e}){return PC(),TC(),hC(),kC(),_C(),e}var EC=Nx;var vx={match:e=>ac(e),SubContainer:EC,pages:{AddressPage:Z,AmountPage:aC,ConfirmPage:gC}},FC=vx;r();s();r();s();var wC=A(h());var Bx=()=>(Q(),wC.default.createElement(J,null)),NC=Bx;r();s();var Ha=A(h());r();s();var Lx=()=>{let{coin:e,baseCoin:o}=C(),t=b(),n=F(),i=K(),a=S(ao),{memo:m}=S(_n),c=Se(),u=Ae({fromAddr:t,localType:o.localType}),p=_e({coinAmount:i,coinId:e.coinId,fromAddr:t,toAddr:n,networkFee:a,businessType:j.SEND}),l=async()=>await c({coinId:e.coinId,address:t,fromAddr:t,toAddr:n,value:i}),f=y=>{let{nonce:E}=y;return{type:nn.TRANSFER,data:{to:n,amount:i,nonce:E,fee:a,memo:m}}},g=y=>{let{nonce:E,contractAddress:N,contractName:w,tokenName:v}=y;return{type:nn.TOKEN_TRANSFER,data:{from:t,to:n,amount:i,nonce:E,fee:a,memo:m,contract:N,contractName:w,functionName:Or.TRANSFER,tokenName:v}}};return ge(l,y=>e.baseCoinId===0?f(y):g(y),async y=>{let{data:E}=y,{nonce:N}=E,{txId:w,txSerializedHexString:v}=await u({params:y,needCapture:!0});return{txId:w,txSerializedHexString:v,nonce:N}},async({txId:y,txSerializedHexString:E,nonce:N})=>{let w={nonce:N},v=JSON.stringify(w);return await p(E,{txHash:y,memo:m,extJson:v})})},vC=Lx;var BC=34,Rx=()=>{let e=k(),{memo:o}=S(_n),t=vC(),n=i=>{let a=i.target.value;new TextEncoder().encode(a).length<=BC&&e(is({name:"memo",value:i.target.value}))};return te(),Ha.default.createElement(z,{confirmButtonProps:{onSubmit:t},slot:{bottom:Ha.default.createElement($o,{value:o,placeholder:P("extension_wallet_transaction_input_entermemo_max",{num:BC}),onChange:n})}})},LC=Rx;r();s();r();s();var Xa=A(h());Le();r();s();var Dx=async({coin:e,fromAddress:o,toAddress:t,value:n,memo:i="",signInfo:a={}})=>{let{getRawTransaction:m}=await br(),c={};if(e.baseCoinId===0)c={data:{type:nn.TRANSFER,data:{to:t,amount:n,memo:i}}};else{let{info:p={}}=a,{contractAddress:l,contractName:f,tokenName:g}=p;c={data:{type:nn.TOKEN_TRANSFER,data:{from:o,to:t,memo:i,contract:l,contractName:f,functionName:Or.TRANSFER,tokenName:g,amount:n}}}}return await m(sm.Stx,c)},RC=async({coin:e,fromAddress:o,toAddress:t,value:n,memo:i="",signInfo:a={}})=>{let m=await Dx({coin:e,fromAddress:o,toAddress:t,value:n,memo:i,signInfo:a});return(await yu({coinId:e.coinId,fromAddress:o,value:n,inputData:m}))?.gasLimit||"0"};var Mx=()=>{let e=k(),o=b(),t=F(),n=S(Wo),i=K(),a=lt(i),{coin:m,baseCoin:c}=C(),{signInfo:u,memo:p}=S(_n),l=async()=>{try{e(L(!1));let g;m.baseCoinId!==0&&Qt(u)?(g=await Pu({coinId:m.coinId,fromAddress:o,toAddress:t,value:i}),e(is({name:"signInfo",value:g}))):g=u;let _=await RC({coin:m,baseCoin:c,fromAddress:o,toAddress:t,value:i,signInfo:g,memo:p});e(V(_))}catch{e(L(!0))}finally{e(re(!1))}},{run:f}=so(l,{wait:500});(0,Xa.useEffect)(()=>{n&&(e(re(!0)),f())},[n]),(0,Xa.useEffect)(()=>{n&&i!==a||(e(re(!0)),f())},[i,t,n,p])},DC=Mx;var Ux=({children:e})=>(DC(),e),MC=Ux;var Ox={match:e=>e===Am,SubContainer:MC,pages:{AddressPage:Z,AmountPage:NC,ConfirmPage:LC}},UC=Ox;r();s();r();s();var OC=A(h());var Gx=()=>(Q(),OC.default.createElement(J,null)),GC=Gx;r();s();var WC=A(h());r();s();var Vx=({coin:e,baseCoin:o,fromAddress:t,toAddress:n,amountInt:i,nonce:a,contractAddress:m})=>{let c=qe({businessType:j.SEND}),{gasFee:u}=S(Sn);return ge(async()=>{let g={type:"transfer",nonce:a,transferData:{contractAddress:m,from:t,to:n,amount:i},resourceBounds:u?.resourceBounds},{txId:_,signature:x}=await Ne().signTransaction(g,t,o.localType);return{txId:_,signature:x}},async({txId:g,signature:_})=>{let x={serviceChargeCoinId:o.coinId,nonce:a},T=JSON.stringify(x),I={signedTx:_,coinAmount:i,coinId:e.coinId,fromAdr:t,toAdr:n,serviceCharge:u?.overallFee,txType:ke.TRANS_OUT,txHash:g,extJson:T};return await c(I)})},VC=Vx;var Wx=()=>{let e=b(),o=F(),t=ie(),{coin:n,baseCoin:i}=C(),{signInfo:a}=S(Sn),m=VC({coin:n,baseCoin:i,fromAddress:e,toAddress:o,amountInt:t,nonce:a?.info?.nonce,contractAddress:a?.info?.contractAddress});return te(),WC.default.createElement(z,{confirmButtonProps:{onSubmit:m}})},HC=Wx;r();s();r();s();var Ka=A(h());Le();var Hx=({fromAddress:e,toAddress:o,amountInputValueInt:t,sendCoinBalanceInt:n,coin:i,isMax:a})=>{let m=k(),{signInfo:c}=S(Sn),u=lt(t),p=async()=>{let x=await an({coinId:i.coinId,fromAddr:e,toAddr:o});return m(aa({name:"signInfo",value:x})),x},l=async x=>{let T={type:"transfer",nonce:x?.info?.nonce,transferData:{contractAddress:x?.info?.contractAddress,from:e,to:o,amount:t}};return(await Ne().signTransaction(T,e,i.localType))?.signature},f=async x=>{let{data:T}=await Gr({coinId:i.coinId,address:e,inputData:x});if(T?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return T},g=async()=>{try{let x;Qt(c)?x=await p():x=c;let T=await l(x),I=await f(T);m(V(I?.overallFee)),m(aa({name:"gasFee",value:{...I,resourceBounds:Sd(I)}})),m(L(!1))}catch{m(L(!0))}finally{m(re(!1))}},{run:_}=so(g,{wait:500});(0,Ka.useEffect)(()=>{a&&(m(re(!0)),_())},[a,n]),(0,Ka.useEffect)(()=>{!o||a&&t!==u||(m(re(!0)),_())},[o,t,a])},XC=Hx;var Xx=({children:e})=>{let o=b(),t=F(),n=K(),i=xt(),a=Y(),{coin:m}=C(),c=Ke();return XC({fromAddress:o,toAddress:t,amountInputValueInt:n,sendCoinBalanceInt:i,feeInt:a,coin:m,isMax:c}),e},KC=Xx;var Kx={match:e=>e===Tm,SubContainer:KC,pages:{AddressPage:Z,AmountPage:GC,ConfirmPage:HC}},qC=Kx;r();s();r();s();var qa=A(h());var qx=()=>qa.default.createElement(Z,{addressProps:{addressTextAreaSlot:{top:qa.default.createElement(Ys,null)}}}),JC=qx;r();s();var jC=A(h());r();s();var Zt=A(h());r();s();function Jx(){let{coin:e}=C(),o=b(),t=zd();return async({value:n,to:i,signInfo:a})=>{try{let{gasPrice:m,inputCoins:c=[],tokenInputCoins:u=[],budget:p}=a||{},l=c.map(_=>{let{digest:x,version:T,objectId:I}=_;return{digest:x,version:T,objectId:I}}),f=new xu;if(m&&f.setGasPrice(BigInt(m)),f.setGasPayment(l||[]),f.setSender(o),p&&f.setGasBudget(BigInt(p)),e.baseCoinId===0){let _=f.splitCoins(f.gas,[n]);f.transferObjects([_],f.pure.address(i))}else if(u.length>1){let _=u.slice(1).map(I=>f.object(I.objectId)),x=f.object(u[0].objectId);f.mergeCoins(x,_);let T=f.splitCoins(x,[n]);f.transferObjects([T],f.pure.address(i))}else{let _=f.splitCoins(f.object(u[0].objectId),[n]);f.transferObjects([_],f.pure.address(i))}let g=Tu(await f.build({client:jd}));return{tx:f,txBytes:g}}catch(m){throw t({from:o,error:m,to:i,coinId:e?.coinId}),m}}}var Ei=Jx;r();s();function Yx(){let{coin:e}=C(),o=b(),t=e.coinId;return async({to:n,value:i})=>(await an({coinId:t,fromAddr:o,toAddr:n,value:i})).info||{}}var YC=Yx;r();s();function Zx(){let e=k(),{baseCoin:o}=C(),t=b();return ne(async n=>{try{let i={dappData:JSON.stringify({to:"",from:t,value:0,data:n}),from:t,dappInfo:{},chainIndex:o?.chainId,method:"sui_normal_transfer"},a=await ft(i);e(It(a.popupInfoList))}catch{We.error(P("wallet_extension_transaction_error_general_check_network"))}})}var ZC=Zx;function zC(){let e=k(),o=S(Wo),{coin:t}=C(),n=b(),i=K(),a=F(),{coinId:m}=t,[c,u]=(0,Zt.useState)(!1),p=(0,Zt.useRef)(0),l=YC(),f=Ei(),g=lt(i),_=ZC(),{run:x}=so(async()=>{p.current++;try{e(L(!1));let T={value:String(i),to:a},I=await l(T),y=await f({...T,signInfo:I}),E=y?.tx?.blockData?.gasConfig?.budget||"0";await _(y?.txBytes),e(Oc(I)),e(V(E))}catch{e(L(!0))}finally{p.current--,p.current===0&&u(!1)}},{wait:300});return(0,Zt.useEffect)(()=>{o&&(u(!0),x())},[o]),(0,Zt.useEffect)(()=>{o&&i!==g||(u(!0),x())},[m,n,a,i,o]),c}function zx(){let e=zC();return Q(),jC.default.createElement(J,{confirmButtonProps:{loading:e}})}var $C=xi(zx);r();s();var t_=A(h());r();s();var QC=()=>{let{coin:e}=C(),o=b(),t=ie(),n=F(),i=S(jr),a=Y(),m=Ae({fromAddr:o,localType:ji}),c=_e({coinAmount:t,coinId:e.coinId,fromAddr:o,toAddr:n,localType:ji,businessType:j.SEND}),u=Ei();return ge(async()=>await u({value:t,to:n,signInfo:{...i||{},budget:a}}),async({txBytes:_})=>{let T=await m({params:{type:"raw",data:_}});return{txBytes:_,signedTx:T}},async({txBytes:_,signedTx:x})=>{let{signature:T,hash:I}=x||{};return await c({request_type:"WaitForEffectsCert",tx_bytes:_,signatures:[T]},{txHash:I,serviceCharge:String(a||"0")})})};r();s();var e_=A(h());var jx=()=>{let e=S(jr),{maxObjectLimit:o=250,inputCoins:t,tokenInputCoins:n}=e||{};return(0,e_.useCallback)(()=>Re(t?.length||0,o)||Re(n?.length||0,o)?{key:"wallet_extension_transfer_error_sui_excess_object"}:null,[o,t,n])},o_=()=>{let o=[jx()];te(o)};function $x(){let e=QC(),o=async()=>{await e()};o_();let t=S(St),n=S(Tn);return t_.default.createElement(z,{tipMessageProps:{hidden:n,blockAddressInfo:t},confirmButtonProps:{onSubmit:o}})}var n_=$x;var Qx={match:e=>e===Sm,pages:{AddressPage:JC,AmountPage:$C,ConfirmPage:n_}},r_=Qx;r();s();r();s();var a_=A(h());r();s();r();s();var eh=()=>{let e=Nu(),o=Bu(),t=vu(),n=Lu();return async({coinId:a,from:m,to:c,amount:u,inputData:p,localType:l,chainId:f})=>{let g=[nt.SAFE_ADDRESS,nt.CONTRACT_ADDRESS];l===fm&&(g.push(nt.TRON_PERMISSTION),g.push(nt.KYS));let _=await e({checkTypes:g,coinId:a,from:m,to:c,amount:u,txType:Om.TRANSFER,inputData:p||"0x",chainId:f}),{result:x,msg:T}=_[nt.TRON_PERMISSTION]||{},I=_[nt.SAFE_ADDRESS],y=_[nt.KYS]?.causeRiskItem||[],E={...I,..._[nt.CONTRACT_ADDRESS],causeRiskItem:y,tronPermission:{msg:T,wrongPermission:!x},address:c};return await n(E),await t({...I,...I?.blackAddressWarning}),await o(E),E}},s_=eh;r();s();var Ni=A(h());r();s();var Fi=A(h());function oh({messageAttachedTons:e,invokeNotificationFee:o}={}){let{coin:t}=C(),n=F(),i=xt(),a=K(),m=S(ho),c=b(),u=S(In),p=S(Wo),g=(Pn()?.addressType?.[Fr]||[]).find(y=>y.address===c),_=!!m,{fromJettonAccount:x,nonce:T}=m||{},I=(0,Fi.useCallback)((y,E)=>{if(!_)return null;let N={to:n,seqno:T,decimal:t.decimals,amount:y,memo:u,walletVersion:g?.addressType};if(t.baseCoinId===0)return{...N,type:Ia.TRANSFER,sendMode:E};let w={...N,type:Ia.JETTON_TRANSFER,fromJettonAccount:x,messageAttachedTons:e,invokeNotificationFee:o,sendMode:un.PAY_GAS_SEPARATELY+un.IGNORE_ERRORS};return m.customPayload&&(w.customPayload=m.customPayload,w.stateInit=m.stateInit),w},[n,_,x,u,e,o]);return(0,Fi.useMemo)(()=>p?I(i,un.CARRY_ALL_REMAINING_BALANCE):I(a,un.PAY_GAS_SEPARATELY+un.IGNORE_ERRORS),[p,i,a,I])}var wi=oh;function th({messageAttachedTons:e,invokeNotificationFee:o}={}){let t=k(),n=uo(),i=b(),a=S(ho),{ttl:m}=a||{},c=wi({messageAttachedTons:e,invokeNotificationFee:o}),[u,p]=(0,Ni.useState)(null);return(0,Ni.useEffect)(()=>{(async()=>{if(!!c)try{c.expireAt=Ks(m);let l=await $d({fromAddress:i,body:c,walletId:n});p(JSON.stringify(l))}catch{p(null),t(L(!0)),t(re(!1))}})()},[c,m]),u}var vi=th;var nh=()=>{let e=k(),[o,{setTrue:t,setFalse:n}]=de(!1),{coin:i}=C(),a=b(),m=F(),c=K(),u=vi(),{coinId:p,localType:l,chainId:f}=i,g=Fn(),_=s_();return{onClick:async()=>{try{t();let T=await _({coinId:p,from:a,to:m,amount:c,inputData:u,localType:l,chainId:f}),{isDefraud:I,isSimilar:y,blackAddressWarning:E}=T;I?(e(os(ta.DEFRAUD)),e(ma(E))):y?(e(os(ta.SIMILAR)),e(ma(E))):e(os("")),g()}catch(T){console.log(T)}finally{n()}},loading:o}},i_=nh;var rh=()=>{let{onClick:e,loading:o}=i_();return a_.default.createElement(Z,{confirmButtonProps:{onClick:e,loading:o}})},m_=rh;r();s();var d_=A(h());r();s();var c_=A(h());function Ja(){let{coin:e,baseCoin:o}=C(),t=S(ho),n=Y(),i=t?.minTonLimit,a=ce(i||"0",n||"0"),m=Rn();return(0,c_.useCallback)(()=>e.baseCoinId!==0&&Re(a,m)?{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:fe(ro(a,10**o.decimals),{precision:o.decimals,isStableCoin:o.stableCoin,useLargeNumberPrecision:!0,roundingMode:"CEIL"}).value}}:null,[a,m,e.baseCoinId,o.decimals])}function sh(){let e=Ja();Q([e])}var u_=sh;function ih(){return u_(),d_.default.createElement(J,{totalAmountProps:{type:"amount"}})}var f_=ih;r();s();var Ir=A(h());r();s();var l_=A(h());var p_=250;function ah({error:e,onChange:o}){let t=k(),n=S(ho),i=S(In),m=n?.checkMemo?P("wallet_extension_import_desc_comment_required"):P("wallet_extension_import_desc_comment_optional");return l_.default.createElement($o,{value:i,placeholder:P("wallet_extension_ton_placeholder_comment_max_character2",{amount:p_}),underline:!1,title:m,error:e,errorType:yo.TIP_TYPE.always,maxLength:p_,onChange:c=>{let u=c.target.value;t(Vc(u)),o()}})}var g_=ah;r();s();function mh(){let e=ee(),o=Pn(e),t=Se(),{coin:n,baseCoin:i}=C(),a=b(),m=F(),c=S(ao),u=S(ho),p=S(Pc),l=K(),f=wi({messageAttachedTons:u?.minTonLimit,invokeNotificationFee:p?.invokeNotificationFee}),g=qe({businessType:j.SEND});return ge(async()=>(await t({coinId:n.coinId,address:a,fromAddr:a,toAddr:m,value:"0"}))?.nonce,async y=>(f.seqno=y,f.expireAt=Ks(u?.ttl),(await Ne().signTransaction(f,a,i.localType))?.boc),async y=>{let E=await Te(i.localType,y),N={signedTx:y,coinId:n.coinId,coinAmount:l,fromAdr:a,toAdr:f.to,serviceCharge:c,txHash:E,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:Oo.NORMAL,accountId:e,walletType:o?.serverWalletType,memo:f.memo};return await g(N)})}var C_=mh;r();s();var Bi=A(h());function ch(e){return(0,Bi.useCallback)(()=>e?{key:"wallet_extension_import_alert_fillin_comment",type:oe.COMMON_ERROR}:null,[e])}function uh(e){return(0,Bi.useCallback)(()=>e?{key:"wallet_extension_multisender_notice_failed_try_again",type:oe.COMMON_ERROR}:null,[e])}function dh(){let e=Ja();return(0,Bi.useCallback)(()=>{let o=e();return o?{...o,highlight:oe.FEE_BALANCE_INSUFFICIENT}:null},[e])}function fh(e,o){let t=ch(e),n=uh(o),i=dh();te([n,t,i])}var __=fh;function ph(){let e=S(ho),o=e?.checkMemo,t=e?.getCustomPayloadInfoRpcError,n=S(In),i=S(Tn),[a,m]=(0,Ir.useState)(!1),c=C_(),u=async()=>o&&(!n||n.trim()==="")?(m(!0),{pause:!0}):(await c(),null);__(a,t);let p=S(St);return Ir.default.createElement(z,{tipMessageProps:{hidden:i,blockAddressInfo:p},slot:{bottom:Ir.default.createElement(g_,{error:a,onChange:()=>{m(!1)}})},confirmButtonProps:{onSubmit:u}})}var S_=ph;r();s();var Ya=A(h());r();s();var A_=A(h());var lh=()=>{let e=k(),{coin:o,baseCoin:t}=C(),{baseCoinId:n}=o,i=b(),a=Y(),m=ee(),c=st(i,m,Fr),u=He(t.coinId,m,{addressType:c}),p=He(o.coinId,m,{addressType:c}),l=u?.coinAmountInt,f=p?.coinAmountInt;(0,A_.useEffect)(()=>{if(!!l){if(n===0){let g=on([0,Ze(l,a)]);e(le(g))}else e(le(f));e(mo(l))}},[e,n,l,f,a])},I_=lh;r();s();var Li=A(h());function gh(){let e=k(),o=b(),{coin:t,baseCoin:n}=C(),i=(0,Li.useRef)(null),a=pt(vi(),{wait:500});Go(()=>{e(re(!0))}),(0,Li.useEffect)(()=>{let m=()=>{e(L(!0)),e(ua(null)),e(V("0"))},c=async()=>{try{let{code:p,data:l}=await Gr({address:o,tokenAddress:t.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(p!==0||!l||l?.queryGasLimitErrorUseDefault)m();else{e(L(!1)),e(ua(l));let{invokeNotificationFee:f="0",gasLimit:g="0"}=l;e(V(t.baseCoinId===0?g:ce(g,f)))}}catch{m()}finally{e(re(!1))}};return(()=>{!a||(i.current=setInterval(c,7e3),c())})(),()=>{i.current&&clearInterval(i.current)}},[a])}var T_=gh;r();s();var x_=A(h());function Ch(){let e=k(),o=Se(),t=Qd(),{coin:n}=C(),i=b(),a=pt(F(),{wait:500}),{coinId:m,baseCoinId:c}=n;(0,x_.useEffect)(()=>{m&&i&&a&&(async()=>{try{let p=await o({coinId:m,address:i,fromAddr:i,toAddr:a,value:"0"}),l=await t(p,c);e(L(!l)),e(ca(l))}catch{e(L(!0)),e(ca(null)),e(re(!1))}})()},[a])}var h_=Ch;var _h=({children:e})=>(h_(),T_(),I_(),e);function Sh({children:e}){let t=Xe().get("from");return Ya.default.createElement(Pe,{fromAddress:t},Ya.default.createElement(_h,null,e))}var y_=Sh;var Ah={match:e=>e===Pm,Container:y_,pages:{AddressPage:m_,AmountPage:f_,ConfirmPage:S_}},P_=Ah;r();s();r();s();var w_=A(h());r();s();var b_=A(h());Le();var Ih=()=>{let[e,{setFalse:o}]=de(!0),{coin:t}=C(),n=b(),i=k(),{coinId:a}=t;return(0,b_.useEffect)(()=>{(async()=>{if(!Fo(a)&&Number(a)!==vr){let u=await Vm({coinId:a,fromAddr:n});i(Nc(u))}o()})()},[a,n]),e},k_=Ih;r();s();var E_=A(h());function Th(){let e=b();return(0,E_.useCallback)(o=>o===e?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[e])}function xh(){return[Th()]}var F_=xh;var hh=()=>{let e=k_(),o=F_();return w_.default.createElement(Z,{addressProps:{errorFns:o},confirmButtonProps:{loading:e}})},N_=hh;r();s();var L_=A(h());r();s();r();s();var Ri=A(h());var yh=()=>{let e=S(gt),o=F(),t=K(),n=S(us),i=!o||!!n.key,[a,m]=(0,Ri.useState)("");return(0,Ri.useEffect)(()=>{(async()=>{if(!i)try{let u=await tr(o);m(e?Ot(u,t):"")}catch(u){console.log(u)}})()},[e,i,o,t]),a},Di=yh;function Ph(){let e=F(),{coin:o}=C(),{chainId:t,address:n}=o,i=b(),a=vs(),m=Di(),c=S(gt),u=K(),p=c?"0":u,l=c?n:e,[f,{setTrue:g,setFalse:_}]=de(!1),x=Bn();return{onClick:async()=>{try{g();let{popupInfoList:I}=await ft({dappInfo:{},to:l,method:"wallet_inner_transfer",from:i,chainIndex:t,inputData:m,amount:p});if(I?.length)try{await a(I),x()}catch{}else x()}catch{We.error(P("wallet_extension_transaction_error_general_check_network"))}finally{_()}},loading:f}}var v_=Ph;r();s();var Za=A(h());var bh=()=>{let[e,{setTrue:o,setFalse:t}]=de(!1),n=k(),i=Se(),a=F(),m=S(gt),c=S(Wo),u=K(),p=lt(u),l=fu(),{coin:f}=C(),g=Di(),{coinId:_}=f,x=async()=>{let y={coinId:_,address:l,fromAddr:l,value:m?"0":u,toAddr:a,inputData:g};try{let{fee:E}=await i(y);n(V(E)),n(L(!1))}catch{n(L(!0))}finally{t()}},{run:T}=so(x,{wait:500});return(0,Za.useEffect)(()=>{c&&(o(),T())},[c]),(0,Za.useEffect)(()=>{c&&u!==p||(o(),T())},[u,g,c]),e},B_=bh;var kh=()=>{let e=B_(),{loading:o,onClick:t}=v_();return Q(),L_.default.createElement(J,{confirmButtonProps:{loading:e||o,onClick:t}})},R_=kh;r();s();var O_=A(h());r();s();var D_=A(US());var Eh=()=>{let e=qe({businessType:j.SEND}),{coin:o}=C(),t=b(),n=F(),i=S(ao),a=S(gt),m=K(),c=S(ct),u=Ae({fromAddr:t,localType:$i,walletId:c}),p=Se();return ge(async()=>{let x=a?"0":m,T=await tr(n),I=a?Ot(T,m):"",y={coinId:o.coinId,address:t,fromAddr:t,toAddr:n,value:x,inputData:I};return await p(y)},async x=>{let{timestamp:T,expiration:I,ref_block_bytes:y,ref_block_hash:E,feelimit:N,contractAddress:w,asset:v}=x,R={fromAddress:t,toAddress:n,amount:m,timestamp:T,expiration:I,refBlockBytes:y,refBlockHash:E},D={};return o.baseCoinId===0?D={type:ut.TRANSFER,data:R}:a?D={type:ut.TOKEN_TRANSFER,data:{...R,feeLimit:N,contractAddress:w}}:D={type:ut.ASSET_TRANSFER,data:{...R,assetName:(0,D_.bufferToHex)(d.Buffer.from(v))}},await u({params:D})},async x=>{let T=await Te($i,x),I=await tr(n),y=a?Ot(I,m):"",E={signedTx:x,coinAmount:m,coinId:o.coinId,fromAdr:t,toAdr:n,serviceCharge:i,txHash:T,inputData:y};return await e(E)})},M_=Eh;r();s();var U_=A(h());function Fh(e,o){return(0,U_.useCallback)(()=>e?{text:o,type:oe.COMMON_ERROR}:null,[e,o])}function za(){let e=ju(),o=S(lc),t=Fh(o.wrongPermission,o.msg);te({fns:[t,...e],override:!0})}var wh=()=>{let e=M_(),o=async()=>{await e()},t=S(St);return za(),O_.default.createElement(z,{confirmButtonProps:{onSubmit:o},tipMessageProps:{blockAddressInfo:t}})},G_=wh;var Nh={match:e=>e===vr,pages:{AddressPage:N_,AmountPage:R_,ConfirmPage:G_}},V_=Nh;r();s();r();s();var H_=A(h());r();s();var vh=()=>{let{baseCoin:e}=C();return ne(async o=>{let t={account:o,coinId:e.coinId},n;try{n=await dm(Ao.queryAccountExist,t)}catch(i){console.log(i)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function Bh(){let e=qo(),o=vh();return[e,o]}var W_=Bh;var Lh=()=>{let e=W_();return H_.default.createElement(Z,{addressProps:{errorFns:{override:!0,fns:e},extraProps:{disableRequestDomain:!0}}})},X_=Lh;r();s();var K_=A(h());function Rh(){return Q(),K_.default.createElement(J,null)}var q_=Rh;r();s();var Tr=A(h());r();s();var Dh=e=>{let{coin:o,baseCoin:t}=C(),n=b(),i=F(),a=ie(),m=qe({businessType:j.SEND});return ge(async()=>await an({coinId:o.coinId,fromAddr:n,toAddr:i}),async f=>{let{info:g}=f,{chainid:_,compression:x,refBlockNumber:T,refBlockId:I,refBlockTimestamp:y,expireSeconds:E,precision:N,symbol:w,contract:v}=g,R={type:0,from:n,to:i,amount:a,memo:e,precision:N,symbol:w,contract:v,common:{chainId:_,compression:x,refBlockNumber:T,refBlockId:I,refBlockTimestamp:y,expireSeconds:E}};return await Ne().signTransaction(R,n,t.localType)},async f=>{let g={memo:e},_=await Te(o.localType,f),x={signedTx:f,coinAmount:a,coinId:o.coinId,fromAdr:n,toAdr:i,serviceCharge:"0",extJson:JSON.stringify(g),txHash:_};return await m(x)})},J_=Dh;var Y_=256;function Mh(){let[e,o]=(0,Tr.useState)(""),t=J_(e),n=async()=>{await t()},i=a=>{let m=a.target.value;new TextEncoder().encode(m).length<=Y_&&o(a.target.value)};return te(),Tr.default.createElement(z,{slot:{bottom:Tr.default.createElement($o,{value:e,placeholder:P("extension_wallet_transaction_input_entermemo_max",{num:Y_}),onChange:i})},confirmButtonProps:{onSubmit:n}})}var Z_=Mh;var Uh={match:e=>e===Im,pages:{AddressPage:X_,AmountPage:q_,ConfirmPage:Z_}},z_=Uh;r();s();r();s();var xr=A(h());r();s();var Oh=1,Gh=()=>{let e=S(Fc);return ne(()=>e?{key:e}:null)},Vh=()=>{let e=S(kc),{coin:o}=C();return ne(t=>o.baseCoinId!==0||e?null:Ge(t,Oh)?{key:"wallet_extension_transfer_alert_unregistered_ripple_send"}:null)},j_=()=>{let e=Gh(),o=Nn(),t=Vh();Q({fns:[e,o,t],override:!0})};r();s();var Mi={title:"_title_12117_1",text:"_text_12117_5",icon:"_icon_12117_9"};var Wh=()=>{j_();let e=S(Ec),o=S(Tn);return xr.default.createElement(J,{totalAmountProps:{loading:o||e,title:xr.default.createElement(B.Box,{className:Mi.title},xr.default.createElement("div",{className:Mi.text},P("extension_wallet_send_text_transfer_available")),xr.default.createElement(Po,{size:Po.SIZE.xxs,tooltip:P("wallet_extension_transfer_tooltips_ripple_balance"),icon:"okx-wallet-plugin-information-circle",className:Mi.icon})),type:"amount"},confirmButtonProps:{loading:o||e}})},$_=Wh;r();s();var ja=A(h());r();s();var zt=A(h());r();s();var hr={input:"_input_1q8en_1",wrapper:"_wrapper_1q8en_1",inner:"_inner_1q8en_4",extra:"_extra_1q8en_7"};var Hh=4294967295,Xh=()=>{let e=k(),o=S(es),t=P("wallet_extension_transfer_input_placeholder_optional");return zt.default.createElement(Un,{label:P("wallet_extension_transfer_input_label_tag"),vertical:!0,value:zt.default.createElement("div",null,zt.default.createElement(yo.Number,{max:Hh,min:0,precision:0,placeholder:t,size:yo.SIZE.xl,autoResize:!0,value:o,onChange:n=>{e(Wc(n))},className:hr.input,inputClassName:hr.wrapper,innerClassName:hr.inner}),zt.default.createElement($.Text,{className:hr.extra},P("wallet_extension_transfer_input_tips_ripple_exchange")))})},Q_=(0,zt.memo)(Xh);r();s();var Kh=()=>{let{coin:e}=C(),o=b(),t=F(),n=ie(),i=Y(),a=ee(),m=Se(),c=S(es),u=Ae({fromAddr:o,localType:e.localType,walletId:a}),p=_e({coinId:e.coinId,coinAmount:n,fromAddr:o,toAddr:t,localType:e.localType,networkFee:i,walletId:a,businessType:j.SEND}),l=async()=>await m({coinId:e.coinId,address:o,fromAddr:o,toAddr:t}),f=I=>{let{sequence:y,lastLedgerSequence:E}=I;return{type:"transfer",base:{account:o,flags:0,fee:i,sequence:y,lastLedgerSequence:E},data:{transactionType:"Payment",amount:n,destination:t,...c?{destinationTag:Number(c)}:{}}}};return ge(l,I=>({params:f(I)}),async I=>{let{hash:y,tx_blob:E}=await u(I);return{signedTx:E,txHash:y,extJson:JSON.stringify(I.params)}},async({signedTx:I,txHash:y,extJson:E})=>{await p(I,{extJson:E,txHash:y})})},eS=Kh;var qh=()=>{let e=eS();return ja.default.createElement(z,{confirmButtonProps:{onSubmit:e},slot:{bottom:ja.default.createElement(Q_,null)}})},oS=qh;r();s();r();s();var tS=A(h());var Jh=()=>{let{baseCoin:e}=C(),o=F(),t=k(),n=ne(async i=>{if(!!i)try{t(da(!0));let{register:a}=await Xm({chainId:e?.chainId,address:i});t(Xc(a))}catch{t(Kc("wallet_extension_transfer_error_address_info_unknown"))}finally{t(da(!1))}});(0,tS.useEffect)(()=>{n(o)},[o,n])},nS=Jh;r();s();var Ui=A(h());var Yh=()=>{let e=k(),{coin:o}=C(),t=b(),n=F(),i=Se(),a=(0,Ui.useCallback)(async()=>{try{let c=await i({coinId:o.coinId,address:t,fromAddr:t,toAddr:n});e(Hc(c));let{fee:u}=c;e(V(u))}catch{e(L(!0))}finally{e(re(!1))}},[i,o.coinId,t,n,e]),{run:m}=so(a,{wait:500});(0,Ui.useEffect)(()=>{e(re(!0)),e(L(!1)),m()},[e,a,m])},rS=Yh;r();s();var sS=A(h());var Zh=()=>{let e=k(),{coin:o,baseCoin:t}=C(),{baseCoinId:n}=o,i=ee(),m=He(t.coinId,i)?.coinAmountInt,u=S(bc)?.needRemainedAmount,p=S(ao);(0,sS.useEffect)(()=>{if(!m||!u||!p)return;let l=on([Ze(m,ce(u,p)),0]);e(le(l))},[e,n,u,m,p])},iS=Zh;var zh=({children:e})=>(rS(),nS(),iS(),e),aS=zh;var jh={match:e=>e===bm,SubContainer:aS,pages:{AddressPage:Z,AmountPage:$_,ConfirmPage:oS}},mS=jh;r();s();r();s();var Vi=A(h());r();s();var uS=A(h());Le();r();s();function $h(){let e=Su();return(o,t,n)=>{let i=t||0,a=Re(n,0)?ro(i,n):"0",m=e[o];return am(Ye(a,10**(m?.decimals||0)),0)}}var Oi=$h;r();s();var cS=A(ve());function Qh(){let{coinId:e}=(0,cS.useParams)(),o=b(),t=F();return ne(async()=>(await sn({coinId:e,fromAddr:o,toAddr:t,value:"0"}))?.data)}var Gi=Qh;function ey(){let e=k(),[o,t]=(0,uS.useState)(!1),n=S(Yc),i=Gi(),a=Qu(),m=Oi();return Go(()=>{t(!0),(async()=>{try{let p=(await i())?.info||{},l={};if(n!==-1)l=(p?.coinFeeList||[]).find(({coinId:g})=>g===n)||{};else{let g=rm(p?.coinFeeList||[],_=>a(_.coinId||0).currencyAmount||0);g&&(l=g.pop()||{})}let f=m(l?.coinId,p?.methodFeeList?.transfer,l?.rate);e(At(l?.coinId)),e(V(f)),e(vc(p))}finally{t(!1)}})()}),o}var dS=ey;function oy(){let e=dS();return Q(),Vi.default.createElement(J,{confirmButtonProps:{loading:e}})}function ty(){let{coin:e}=C();return Vi.default.createElement(Pe,{fixed:!!e.vdecimalNum},Vi.default.createElement(oy,null))}var fS=ty;r();s();var jt=A(h());r();s();var oo=A(h());var pS=A(vo());r();s();var $n={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var ny=({coinId:e,feeCoinAmountInt:o,selectedCoinId:t,onSelect:n,setSupplyGas:i,...a})=>{let m=He(e),c=m?.coinAmountInt,u=O.gte(c,o);return oo.default.createElement(ar.Card,{hovered:u,onClick:()=>{u&&n?.({coinId:e,feeCoinAmountInt:o})},selected:e===t},oo.default.createElement(B.Space,{space:12,className:(0,pS.default)($n["select-networkFee-card-content"],{[$n["select-networkFee-card-content-disable"]]:!u})},oo.default.createElement(Po,{size:Po.SIZE.lg,src:m?.image,text:m?.text}),oo.default.createElement(B.Space,{space:2,direction:B.DIRECTION.vertical,...a},oo.default.createElement($.Text,{strong:!0},m?.symbol),oo.default.createElement($.Text,{size:$.SIZE.xs,type:$.TYPE.secondary},u?P("developer_mode_send_text_balanceprice",{balance:fe(c,{useContractPrecision:!0,contractPrecision:{decimals:m?.decimals},precision:m?.decimals,useLargeNumberPrecision:!0}).value}):P("wallet_extension_placeorder_tooltips_insufficient",{token:m?.symbol})))),!u&&oo.default.createElement(Ce,{category:Ce.CATEGORY.fill,type:Ce.TYPE.gray,size:Ce.SIZE.xxs,onClick:p=>{p?.stopPropagation(),i({supplyGasVisible:!0,supplyGasCoinId:e})}},P("extension_send_btn_fill_up_token",{token:m?.symbol})))},ry=({visible:e,onToggle:o})=>{let t=Ko(),n=k(),i=b(),a=uo(),m=Oi(),[{supplyGasVisible:c,supplyGasCoinId:u},p]=Zm({supplyGasVisible:!1,supplyGasCoinId:null}),l=S(gc),f=l?.coinFeeList||[],g=l?.methodFeeList?.transfer,_=mn(()=>f.map(({rate:I,coinId:y})=>{let E=m(y,g,I);return{coinId:y,feeCoinAmountInt:E}}),[f,g]),x=({coinId:I,feeCoinAmountInt:y})=>{o?.(),n(At(I)),n(V(y))},T=({coinId:I,feeCoinAmountInt:y})=>oo.default.createElement(ny,{coinId:I,selectedCoinId:t,feeCoinAmountInt:y,onSelect:x,setSupplyGas:p});return e?oo.default.createElement(B.Portal,{component:B.Container,className:$n["select-networkFee"]},oo.default.createElement(Cu,{onBack:o,onClose:o,title:P("wallet_transfer_subtitle_network_fee")}),oo.default.createElement(B.Box,{className:$n["select-networkFee-content"]},oo.default.createElement($.Text,{className:$n["select-networkFee-title"]},P("wallet_extension_send_alert_choose_token")),oo.default.createElement(ar,{space:16,dataSource:_,renderItem:T})),oo.default.createElement(wu,{walletId:a,address:i,visible:c,closeCallback:()=>{p({supplyGasVisible:!1})},coinId:u,receiveOnly:!0})):null},lS=ry;r();s();function sy(){let e=qe({businessType:j.SEND}),{coin:o}=C(),t=b(),n=F(),i=Y(),a=Ko(),m=ie(),c=Gi(),{coin:u}=bn(a,!1);return ge(c,async(f={})=>{let{info:g={}}=f,{chainId:_,accountId:x,nonce:T,tokenId:I,coinFeeList:y=[]}=g,E=y.find(({coinId:v})=>v===a)||{},N={type:ut.TRANSFER,accountId:parseInt(x,10),nonce:T,from:t,chainId:_,to:n,tokenId:parseInt(I,10),tokenSymbol:o.symbol,decimals:o.decimals,feeTokenId:parseInt(E.tokenId,10),feeTokenSymbol:u.symbol,feeDecimals:u.decimals,fee:i,amounts:m};return await Ne().signTransaction(N,t,lm)},async f=>{let{signature:g,tx:_}=f||{},{txHash:x,...T}=_||{},I={txSource:Oo.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:g,tx:T}),fromAdr:t,coinAmount:m,coinId:o.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:x,extJson:JSON.stringify({serviceChargeCoinId:a})};return await e(I)})}var gS=sy;function iy(){let[e,{toggle:o}]=de(!1),t=gS(),n=async()=>{await t()};return te(),jt.default.createElement(jt.default.Fragment,null,jt.default.createElement(z,{networkFeeProps:{onClick:o,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),jt.default.createElement(lS,{visible:e,onToggle:o}))}function ay(){let{coin:e}=C();return jt.default.createElement(Pe,{fixed:!!e.vdecimalNum},jt.default.createElement(iy,null))}var CS=ay;var my={match:e=>ic(e),pages:{AddressPage:Z,AmountPage:fS,ConfirmPage:CS}},_S=my;r();s();r();s();var Wi=A(h());r();s();var SS=A(h());function cy(){let e=k(),{coin:o}=C(),t=b(),n=F(),i=Nd(),[a,m]=(0,SS.useState)(!1);return Go(()=>{m(!0),(async()=>{let u={coinId:o.coinId,fromAddr:t,toAddr:n,value:"0"};try{let p=await i("Transfer",u);if(p){let{info:l,feeCoin:f,fee:g}=p;e(Uc({info:l,feeCoin:f})),e(At(f.coinId)),e(V(g)),e(L(!1))}}catch{e(L(!0))}finally{m(!1)}})()}),a}var AS=cy;r();s();var IS=A(h());function $a(){let{coin:e}=C();return(0,IS.useCallback)(async o=>{let{ZksyncWallet:t}=await Mt(),n=Ye(o,10**e.decimals),i=await t.getCloseAmounts(n);return Pr(i,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:fe(ro(i,10**e.decimals),{precision:e.displayPrecision,useLargeNumberPrecision:!0,isStableCoin:e.stableCoin}).value,symbol:e.symbol},type:oe.COMMON_ERROR}},[])}function uy(){let o=[$a()];Q(o)}var TS=uy;function dy(){let e=AS();return TS(),Wi.default.createElement(J,{confirmButtonProps:{loading:e}})}function fy(){let{coin:e}=C();return Wi.default.createElement(Pe,{fixed:!!e.vdecimalNum},Wi.default.createElement(dy,null))}var xS=fy;r();s();var Hi=A(h());r();s();function py(){let e=qe({businessType:j.SEND}),{coin:o}=C(),t=b(),n=F(),i=Y(),a=Ko(),m=K(),c=S(xc),u=async()=>{let{info:l,feeCoin:f}=c||{},{accountId:g,nonce:_}=l||{},x={type:ut.TRANSFER,from:t,to:n,accountId:parseInt(g,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:m,fees:i,decimals:o.decimals,nonce:parseInt(_,10)};return await Ne().signTransaction(x,t,gm)},p=async l=>{if(l?.code)throw new Error(vn);let{signature:f,tx:g}=l||{},{txHash:_,...x}=g||{},T={txSource:Oo.NORMAL,signedTx:JSON.stringify({signature:f,tx:x}),fromAdr:t,serviceCharge:g?.fee,toAdr:g?.to,coinAmount:m,coinId:o.coinId,txHash:_,extJson:JSON.stringify({serviceChargeCoinId:a})};return await e(T)};return async()=>{let l=await u();return p(l)}}var hS=py;r();s();var yS=A(h());function ly(){let e=$a();return(0,yS.useCallback)(async o=>{let t=await e(o);return t?{...t,highlight:Wt.AMOUNT}:null},[e])}function gy(){let o=[ly()];te(o)}var PS=gy;function Cy(){let e=hS(),o=async()=>{await e()};return PS(),Hi.default.createElement(z,{confirmButtonProps:{onSubmit:o}})}function _y(){let{coin:e}=C();return Hi.default.createElement(Pe,{fixed:!!e.vdecimalNum},Hi.default.createElement(Cy,null))}var bS=_y;var Sy={match:e=>e===_m,pages:{AddressPage:Z,AmountPage:xS,ConfirmPage:bS}},kS=Sy;r();s();r();s();var ES=A(h());r();s();var So=A(h());Le();var Ay={[me.SLOW]:1,[me.STANDARD]:2,[me.FAST]:4};var Iy=()=>{let[e,o]=(0,So.useState)({type:me.STANDARD,feeRate:Ay[me.STANDARD]});return[e,o]},Ty=({toAddr:e,sendAmountInt:o})=>(0,So.useMemo)(()=>[{address:e,amount:Number(o)}],[o,e]),xy=()=>{let e=Ee(),o=b(),t=F(),n=ee(),i=fo(e),a=k(),m=i?.baseCoinId||e,c=Y(),u=K(),[p,l]=Iy(),f=p.feeRate,[,g]=go({coinId:e,address:o,chainId:i?.chainId}),_=Ty({toAddr:t,sendAmountInt:u}),[x,T]=(0,So.useState)(!0),[I,y]=(0,So.useState)([]),E=Ht({coinId:e,walletId:n,address:o,utxoType:je.TRANSFER}),N=(0,So.useCallback)(async()=>{T(!0);try{let U=(await E(u,c)).map(H=>({address:o,txId:H.txHash,vOut:H.vout,amount:H.coinAmount}));if(Zi(U,I))return;y(U)}catch(M){if(M?.code===qd.ZCASH_BALANCE_NOT_ENOUGH)return;L(!0)}finally{T(!1)}},[E,u,c,I]);(0,So.useEffect)(()=>{N()},[u,c]);let w=(0,So.useCallback)(async()=>{if(!I.length){T(!0),a(L(!1));return}let{estimateFee:M}=await br(),U={address:o,inputs:[...I],outputs:[{address:t,amount:0}],feeRate:f},W=Nm({coinId:+m})?.coinType;try{let X=await M(W,{data:U,privateKey:""});if(Zi(X,c)){a(L(!1)),T(!1);return}a(V(X)),a(L(!1)),T(!1)}catch{a(L(!0)),T(!1)}},[I,f]);(0,So.useEffect)(()=>{T(!0),w()},[I,f]);let v=Ae({fromAddr:o,localType:i?.localType,walletId:n}),R=_e({coinId:e,fromAddr:o,toAddr:t,networkFee:c,localType:i?.localType,walletId:n,coinAmount:u,txType:ke.TRANS_OUT}),D=(0,So.useCallback)(async()=>{if(!I.length)return null;let M={address:o,inputs:[...I],outputs:[..._],feeRate:f,version:5,height:0,dust:546},U=await v({params:M});return await R(U)},[I,_,v,R,o,f]);return{loading:x,signInfo:g,baseCoinId:m,networkFeeInt:c,signAndPublishTransactionFn:D,selectedNetworkFeeLevel:p,setSelectedNetworkFeeLevel:l}},Xi=xy;function hy(){let{signInfo:e,loading:o}=Xi(!0);si(e?.minOutput);let t=mi();return ES.default.createElement(J,{isGlobalLoading:o,renderError:t,totalAmountProps:{type:"amount",title:P("extension_defi_text_available_balance")}})}var FS=hy;r();s();var $t=A(h());r();s();var em=A(h());r();s();var Qa=A(h());var wS={[me.SLOW]:1,[me.STANDARD]:2,[me.FAST]:4};var NS=({value:e,coinId:o,currencyId:t,networkFeeInt:n})=>{let{baseCoin:i}=bn(o,!0),a=Xd(i,t),m=(0,Qa.useMemo)(()=>{let c=e?.feeRate||wS[me.SLOW];return!n||c===0?"0":O.div(n,c)},[n,e?.feeRate]);return(0,Qa.useMemo)(()=>[me.SLOW,me.STANDARD,me.FAST].map(c=>{let u=wS[c],p=O.mul(m,u);return{data:{type:c,feeRate:u},unitPrice:`${p} ${P("wallet_extension_transfer_unit_zat")}`,totalPrice:a(p,t),type:P(Mm[c]),typeKey:c,estimatedTime:""}}),[m,t,a])};var yy=({value:e,coinId:o,currencyId:t,networkFeeInt:n,visible:i,onChange:a,onClose:m})=>{let c=NS({value:e,coinId:o,currencyId:t,networkFeeInt:n});return em.default.createElement(Pd,{feeType:e?.type,feeDataList:c?.slice(0,3),onBack:m,visible:i,custom:!1,onChange:u=>{a?.(u.data)}})},vS=em.default.memo(yy);function Py(){let[e,{toggle:o}]=de(!1),t=Be(),{loading:n,signInfo:i,baseCoinId:a,networkFeeInt:m,signAndPublishTransactionFn:c,selectedNetworkFeeLevel:u,setSelectedNetworkFeeLevel:p}=Xi();ii(i?.minOutput);let l=(0,$t.useCallback)(async()=>{let f=await c();return Vr({tx_id:f}),f},[c]);return $t.default.createElement($t.default.Fragment,null,$t.default.createElement(z,{confirmButtonProps:{disabled:n,onSubmit:l},networkFeeProps:{onClick:o,loading:n,feeLevel:u?.type}}),$t.default.createElement(vS,{coinId:a,value:u,visible:e,currencyId:t,networkFeeInt:m,onChange:p,onClose:o}))}var BS=Py;r();s();var LS=A(h());function by({children:e}){let t=Xe().get("from");return LS.default.createElement(Pe,{fromAddress:t},e)}var RS=by;var ky={match:e=>e===km,Container:RS,pages:{AddressPage:Z,AmountPage:FS,ConfirmPage:BS}},DS=ky;var Ey=[Sl,Ep,Df,Jp,Ml,_g,FC,V_,_S,kS,r_,UC,z_,qC,kl,Pg,Wg,P_,oC,mS,DS],MS=Ey;var Fy=({coinId:e,protocolId:o,baseCoinId:t})=>{let n={},i=MS.find(({match:l})=>l(t,e,o))||n,{Container:a=({children:l})=>to.default.createElement(to.default.Fragment,null,l),SubContainer:m=({children:l})=>to.default.createElement(to.default.Fragment,null,l)}=i,{AddressPage:c,AmountPage:u,ConfirmPage:p}=i.pages||{};return Qt(i)?null:to.default.createElement(a,null,to.default.createElement(Rt.Switch,null,to.default.createElement(Rt.Route,{exact:!0,path:`${Ve}/:coinId?${dn}`,component:c}),to.default.createElement(m,null,to.default.createElement(Rt.Route,{exact:!0,path:`${Ve}/:coinId?${fn}`,component:u}),to.default.createElement(Rt.Route,{exact:!0,path:`${Ve}/:coinId?${pn}`,component:p}))),to.default.createElement(of,null))},wy=(0,to.memo)(Fy),Ny=()=>{let{coinId:e}=(0,Rt.useParams)(),{coin:o,baseCoin:t}=bn(e,!0);return to.default.createElement(wy,{coinId:o?.coinId,baseCoinId:t?.coinId,protocolId:o?.protocolId})},wme=Ny;export{wme as default};
//# sourceMappingURL=SendPageContainer-3UT423KA.js.map
