import{a as Ye}from"./chunk-SV3QD4SY.js";import{a as Le}from"./chunk-BFLVJJ2Z.js";import{a as ze}from"./chunk-JFZYV7O3.js";import{a as q}from"./chunk-DQD6P25P.js";import{a as we,b as Ie,c as Oe,d as ke}from"./chunk-WTH5WZEF.js";import"./chunk-LB5XQY7F.js";import{a as Ae}from"./chunk-TRICLBVU.js";import{b as z}from"./chunk-FS336U6P.js";import{d as Ue,e as be,f as De}from"./chunk-QTPS5BDP.js";import{a as Ne}from"./chunk-KOQXCGQ5.js";import{a as he}from"./chunk-P7NYIGUS.js";import"./chunk-H5RNSDSN.js";import"./chunk-OWPVBYY3.js";import"./chunk-CJAFGYQK.js";import{f as n,g as ie}from"./chunk-2LQJ3JX6.js";import{b as se,f as A,q as Ee,s as Ce}from"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import{E as Te,pa as xe,va as Pe}from"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import{a as k,g as ve}from"./chunk-AP4E6GDF.js";import{D as H,Ke as L,m as Fe}from"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import{a as Uo}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as M}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as bo}from"./chunk-FB3ILH2L.js";import{b as ye}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{$ as ge,Aa as Se,N as p,P as Me,Q as _e,Z as G,l as re}from"./chunk-4C5HF6J2.js";import"./chunk-BY6XCDJZ.js";import"./chunk-WQGQVXPA.js";import"./chunk-EI7BJC6V.js";import"./chunk-WZALYVUQ.js";import"./chunk-4ARIYUS3.js";import{f as B,o as N,q as D}from"./chunk-UWURTNRY.js";N();D();var e=B(ye()),We=B(bo());Se();N();D();var v=B(ye()),Ve=B(Uo());Se();function Be({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,v.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function Ge({computedQuoteSafemoon:t}){return{safeMoonToken:(0,v.useMemo)(()=>t,[t])}}function He(){let{getUsd:t}=q(z);return{formatUSD:s=>_e(s)||Me(s)?"--":t(s)}}function qe({priorityFeeState:t,priorityFee:r,computedNativeTokenPrice:s}){let[m,f]=(0,v.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),l=(0,v.useMemo)(()=>{let c=r||"0";return ve(c)?"0":new k.BigNumber(c).toString(10)},[r]),[d,T]=(0,v.useMemo)(()=>{let c=k.add(l,m),_=k.mul(s||0,c);return[k.mul(s||0,l),_]},[l,m,s]);return{baseFeeValue:m,baseFeeUsd:f,priorityFeeForShow:l,priorityFeeUSD:d,totalFeeUSD:T}}function je({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:m,setPriorityFeeType:f,setPriorityFeeError:l,slippage:d,setSlippage:T,setSlippageError:c,slippageType:_,setSlippageType:x,feeMap:w,slippageMode:P,setSlippageMode:I,customMax:o,setCustomMax:E,setCustomMaxError:g,priorityMode:S,setPriorityMode:C,setManualType:Y}){let i=(0,v.useMemo)(()=>t.find(F=>F.id===r)||null,[t,r]);return{resetDisabled:(0,v.useMemo)(()=>i?p(n(i.slippage.value),d)&&p(i.slippage.type,_)&&p(i.priorityFee.type,m)&&p(i.slippage.mode,P)&&p(n(i.slippage.customMax),o)&&p(i.priorityMode,S):!0,[i,d,_,m,P,o,S]),handleReset:()=>{f(i.priorityFee.type),T(n(i.slippage.value)),x(i.slippage.type),s(w[i.priorityFee.type].amount),I(i.slippage.mode),E(n(i.slippage.customMax)),C(i.priorityMode),Y(i.manualType),c(!1),l(!1),g(!1)}}}var No=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function Qe({slippageType:t,initState:r,slippage:s,priorityFee:m,priorityFeeType:f,slippageMode:l,customMax:d,currentPreset:T,slippageState:c,presetPriorityFee:_,currentPresetList:x,currentPresetId:w,setCurrentPresetList:P,currentMode:I,onClose:o,priorityMode:E,manualType:g}){let S=(0,Ve.useHistory)(),C=ze(Te);return{handleConfirm:()=>{if(C({custom_or_auto:t}),!(p(r.mode,l)&&p(r.slippage,s)&&p(r.slippageType,t)&&p(r.priorityFee,m)&&p(r.priorityFeeType,f)&&p(r.customMax,d)&&No({priorityMode:E,manualType:g},r))){let U=G({},T,{slippage:G({},c,{value:s?ie(s):"",type:t,mode:l,customMax:d?ie(d):""}),priorityFee:G({},_,{value:f===A.CUSTOM?m:"",type:f}),priorityMode:E,manualType:g}),h=x.map(F=>F.id===w?U:F);P(h),Pe.info(xe.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:U,currentMode:I}})}o?o():S.goBack()}}}N();D();var y={root:"_root_y7yz0_1",name:"_name_y7yz0_8",mev:"_mev_y7yz0_9",slippage:"_slippage_y7yz0_10",priority:"_priority_y7yz0_11",btns:"_btns_y7yz0_14",notice:"_notice_y7yz0_23","notice-title":"_notice-title_y7yz0_29",noticeTitle:"_notice-title_y7yz0_29","notice-text":"_notice-text_y7yz0_32",noticeText:"_notice-text_y7yz0_32"};var Do=Fe(({onClose:t})=>{let{quoteStore:r,configStore:s}=z(),{currentMode:m,computedConfig:f}=s,l=re(f,"mevPriceThreshold"),d=re(f,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:T,jitoIsSuccess:c,computedAutoSlippage:_,mevUnstableShowLevel:x}=r,{chainSymbol:w}=Ae(),{currentPreset:P}=we(),I=ge(Ce,["name","amountList"]),{slippage:o,priorityFee:E,id:g,priorityMode:S,manualType:C}={...I,...P},Y=(0,e.useMemo)(()=>g?.includes(Ee),[g]),[i,U]=(0,e.useState)("auto"),[h,F]=(0,e.useState)(0);(0,e.useEffect)(()=>{U(S),F(C)},[S,C]);let ne=he({priorityMode:i,manualType:h,jitoIsSuccess:c,mevUnstableShowLevel:x}),Xe=Ne(ne),{formatPriorityFee:a}=Ie({priorityFee:E,isEnableMev:Xe}),[O,j]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{j(o.mode)},[o.mode]);let[Q,W]=(0,e.useState)(n(o.customMax));(0,e.useEffect)(()=>{W(n(o.customMax))},[o.customMax]);let[Ze,ae]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(n(o.value)),[R,J]=(0,e.useState)(o.type),[Je,me]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Z(n(o.value)),J(o.type)},[o.value,o.type]);let[K,$]=(0,e.useState)(a.value),[ee,ue]=(0,e.useState)(a.type),pe=(0,e.useRef)(a.type),[Ke,le]=(0,e.useState)(!1),[$e,eo]=(0,e.useState)(a.type!==A.CUSTOM?a.type:A.MARKET);(0,e.useEffect)(()=>{let u=pe.current;if(u===A.CUSTOM)return;let b=a.config[u]?.amount;$(b)},[a.config]);let oo=O==="fixed"&&Je||O==="dynamic"&&Ze||Ke||ne===6,to={mode:o.mode,customMax:n(o.customMax),slippage:n(o.value),slippageType:o.type,priorityFee:a.value,priorityFeeType:a.type,priorityMode:S,manualType:C},ro={low:n(o.config.low),medium:n(o.config.medium),high:n(o.config.high)},ce=n(o.min),fe=n(o.max),oe=n(_),so=n(o.dynamicMax),io=n(o.dynamicMin),no=n(o.recommendMax),ao=n(o.recommendMin),{computeBuyDefaultPresetList:mo,computedSellDefaultPresetList:uo}=Le(),{defaultPresetList:po}=Be({currentMode:m,computeBuyDefaultPresetList:mo,computedSellDefaultPresetList:uo}),{setCurrentPresetList:lo,currentPresetId:co,currentPresetList:fo}=ke(),{handleReset:yo,resetDisabled:Mo}=je({defaultPresetList:po,id:g,setPriorityFee:$,priorityFeeType:ee,setPriorityFeeType:ue,slippage:X,setSlippage:Z,slippageType:R,setSlippageType:J,slippageMode:O,setSlippageMode:j,customMax:Q,setCustomMax:W,setPriorityFeeError:le,setSlippageError:me,setCustomMaxError:ae,feeMap:a.config,priorityMode:i,setPriorityMode:U,setManualType:F}),{handleConfirm:_o}=Qe({slippageType:R,initState:to,slippage:X,priorityFee:K,priorityFeeType:ee,slippageMode:O,customMax:Q,currentPreset:P,slippageState:o,presetPriorityFee:E,currentPresetList:fo,currentPresetId:co,setCurrentPresetList:lo,currentMode:m,onClose:t,priorityMode:i,manualType:h}),{computedNativeTokenPrice:go}=Oe(),{baseFeeValue:So,baseFeeUsd:Fo,totalFeeUSD:vo,priorityFeeUSD:To,priorityFeeForShow:xo}=qe({priorityFeeState:a,priorityFee:K,computedNativeTokenPrice:go}),{formatUSD:te}=He(),{safeMoonToken:de}=Ge({computedQuoteSafemoon:T}),Po=u=>Ye({value:u,min:ce,max:fe,level:R,auto:oe,safemoon:de}),{getTokenAmount:Eo,getUsd:Co}=q(z);return e.default.createElement("div",{className:y.root},e.default.createElement(De,{className:y.mev,setMode:U,priorityMode:i,setManualType:F,manualType:h,mevUnstableShowLevel:x,jitoIsSuccess:c,mevPriceThreshold:l,chainName:d}),e.default.createElement(be,{className:y.slippage,mode:O,fixedData:{value:X,level:R,levelMap:ro,min:ce,max:fe,validator:Po,auto:oe},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:oe,supportCustomMax:o.supportCustomMax,customMax:Q,dynamicMax:so,dynamicMin:io,recommendMax:no,recommendMin:ao,safemoon:de},onChange:({mode:u,fixedData:b,dynamicData:V})=>{j(u),u===se.FIXED&&(Z(b.value),J(b.level),me(b.error)),u===se.DYNAMIC&&(W(V.customMax),ae(V.error))}}),e.default.createElement(Ue.DetailMode,{className:y.priority,fee:K,type:ee,latestSelectType:$e,feeMap:a.config,max:a.max,recommendMaxValue:a?.recommendMaxValue,recommendMinValue:a?.recommendMinValue,currency:w,onChange:(u,b,V)=>{$(b),ue(u),pe.current=u,le(V),u!=="custom"&&eo(u)},getTokenAmount:Eo,getUsd:Co}),e.default.createElement("div",{className:y.notice},e.default.createElement("div",{className:y.noticeTitle},H(L("swaptrade_trade_label_total_fees",{price:te(vo)}))),e.default.createElement("div",{className:y.noticeText},H(L("swaptrade_trade_label_base_fee_value",{value:So,price:te(Fo)}))),e.default.createElement("div",{className:y.noticeText},H(L("swaptrade_trade_label_priority_fee_value",{value:xo,price:te(To)})))),e.default.createElement("div",{className:(0,We.default)("flex justify-between",y.btns)},Y&&e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.outline,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,onClick:yo,disabled:Mo},L("swaptrade_general_btn_reset")),e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.fill,type:M.TYPE.primary,disabled:oo,size:M.SIZE.lg,block:!0,onClick:_o},L("swaptrade_dialog_btn_confirm"))))}),Pt=Do;export{Pt as default};
//# sourceMappingURL=Configure-FHMQCWOI.js.map
