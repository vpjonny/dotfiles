import{a as Qe}from"./chunk-BMAGLTJ7.js";import{b as ue}from"./chunk-RQ4NNINW.js";import{g as q,h as ie}from"./chunk-H5RNSDSN.js";import{a as Ze,d as Je}from"./chunk-V2CZ7DY4.js";import{a as qe}from"./chunk-3PLVXUNW.js";import{a as eo}from"./chunk-IGYVCHMC.js";import{a as S}from"./chunk-PPNQSDGF.js";import{h as $e}from"./chunk-UY2DPNBT.js";import{l as Ge}from"./chunk-V5J3A5L5.js";import{A as Ye,G as He,f as ne,ga as Xe,n as Ue,o as ze,w as Ke,za as je}from"./chunk-P5GHREX3.js";import{b as We}from"./chunk-RK4OLGCC.js";import{a as W}from"./chunk-VL2JCPJS.js";import{a as _e,l as Le,s as Oe,t as Ve}from"./chunk-AP4E6GDF.js";import{$ as Ae,$b as A,B as pe,Cb as j,D as De,F as Ie,Ke as l,Le as re,S as oe,Tc as te,_ as Ne,_b as G,m as ee,pb as Me,qb as Be,ub as Fe,vb as Re,yc as fe}from"./chunk-RPH2MNBW.js";import{a as vo}from"./chunk-DOSBJ3L3.js";import{A as N,_ as Pe,aa as Ee,b as L,o as V,r as ye}from"./chunk-URGJ6D4O.js";import{a as ve}from"./chunk-IQUFNLVG.js";import{C as E,t as O}from"./chunk-XYWWXNVK.js";import{a as R}from"./chunk-FB3ILH2L.js";import{b as g}from"./chunk-FLSAETOH.js";import{Aa as me,d as Se,g as b,l as F}from"./chunk-4C5HF6J2.js";import{f as p,o as r,q as n}from"./chunk-UWURTNRY.js";r();n();var f=p(g()),oo=p(vo()),ge=p(R());me();r();n();var M={root:"_root_tldcp_1",select:"_select_tldcp_11",body:"_body_tldcp_14",item:"_item_tldcp_17",icon:"_icon_tldcp_34",name:"_name_tldcp_38",check:"_check_tldcp_47"};var yo=({key:o,icon:e,name:t,onClick:i,checked:a})=>f.default.createElement(L,{key:o,className:M.item,onClick:i},f.default.createElement(O,{className:`${e} ${M.icon}`,style:{fontSize:32}}),f.default.createElement("span",{className:M.name},t),a?f.default.createElement(ye.Circle,{checked:!0,className:M.check}):null),Po=async()=>{let[o,e]=await Ie(Qe({sceneType:0}));if(o)return null;let t=e.data.find(s=>Se(s.chainId)===fe.SOLANA_MAINNET)||{},i=F(t,"nativeTokenInfo.chainId",""),a=F(t,"nativeTokenInfo.tokenContractAddress","");return{chainId:i,address:a}},Eo=o=>{let[e,t]=(0,f.useState)(null);return(0,f.useEffect)(()=>{e||o||Po().then(i=>{t(i)}).catch(b)},[e,o]),e},Do=({className:o,swapClick:e,bridgeClick:t,memeClick:i})=>{let{isSm:a}=We(),s=(0,oo.useHistory)(),[c,d]=(0,f.useState)(!1),{pathname:_,search:k}=s.location,y=_===Ne,h=_===Ae,P=y||h,T=_===Me,x=_===Be,D=Eo(P),I=j(Re),H=j(Fe),X=j(""),_o=j("/bridge");(0,f.useEffect)(()=>{let u=A.SWAP;x&&(u=A.BRIDGE),y&&(u=A.MEME_BUY),h&&(u=A.MEME_SELL),W.set(G,u)},[]);let uo=()=>{if(W.set(G,A.MEME_BUY),P&&(i&&i(),d(!1)),T){let u=q(k),ho=F(u,"from.chainId",0),wo=F(u,"from.tokenContractAddress",""),To=F(u,"to.chainId",0),xo=F(u,"to.tokenContractAddress",""),bo=ho===D?.chainId&&wo===D?.address,So=To===D?.chainId&&xo===D?.address;bo?s.replace(I+ie(q(k))):So?s.replace(H+ie(q(k))):s.replace(I)}x&&s.replace(I)},go=()=>{W.set(G,A.SWAP),e&&e(),T&&d(!1),P&&s.replace(X+ie(q(k))),x&&s.replace(X)},Co=()=>{W.set(G,A.BRIDGE),t&&t(),x&&d(!1),(P||T)&&s.replace(_o)},be=[{tab:te.MEME_SWAP,icon:"okx-defi-dex-meme-mode",name:l("swaptrade_trade_bttmsheet_option_meme"),onClick:()=>{uo()},checked:P},{tab:te.SWAP,icon:"okx-defi-dex-advanced",name:l("swaptrade_trade_bttmsheet_option_advanced"),onClick:()=>{go()},checked:T},{tab:te.BRIDGE,icon:"okx-defi-dex-bridge",name:l("swaptrade_trade_bttmsheet_option_bridge"),onClick:()=>{Co()},checked:x}],ko=be.find(u=>u.checked);return f.default.createElement(f.default.Fragment,null,f.default.createElement(L,{className:(0,ge.default)(o,M.root),onClick:()=>{d(!0)}},f.default.createElement("span",null,ko?.name||"--"),f.default.createElement(O,{className:(0,ge.default)("okx-defi-dex-arrow-down-sincere",M.select),style:{fontSize:12,height:32,width:32}})),f.default.createElement(V.Action,{onClose:()=>{d(!1)},visible:c,title:l("swaptrade_trade_bttmsheet_header_select_mode"),windowStyle:{borderTopLeftRadius:a?16:6,borderTopRightRadius:a?16:6}},f.default.createElement("div",{className:M.body},be.map(u=>f.default.createElement(yo,{key:u.tab,...u})))))},nt=ee(Do);r();n();var U=p(g());me();function dt(o){let{computedAccountId:e,walletConfig:t}=o,[i,a]=(0,U.useState)(!1),s=(0,U.useCallback)(async()=>{if(!e)return;let d=t.address?.join(",")??void 0;await ue.loadHiddenTokenConfig(e,d)},[e,t.address]),c=(0,U.useCallback)(async()=>{await ue.loadSmallAssetConfig()},[]);return(0,U.useEffect)(()=>{Promise.allSettled([c(),s()]).then(b).catch(b).finally(()=>{a(!0)})},[e]),{loaded:i}}r();n();var z=p(g()),Ce=p(R());r();n();var ae={wrapper:"_wrapper_1k1o5_1",desc:"_desc_1k1o5_11"};var Io=({token:o,className:e,iconClassName:t,showTooltip:i,showDesc:a,iconSize:s=12})=>{let c=Number(o?.riskLevel)===4,d=(0,z.useMemo)(()=>z.default.createElement("div",{className:(0,Ce.default)(ae.wrapper,e)},z.default.createElement(qe,{className:(0,Ce.default)("okx-defi-dex-risky-svg",ae.icon,t),size:s}),a?z.default.createElement("span",{className:ae.desc},l("swaptrade_cefimode_alert_desc_unsafe_token")):null),[a,e,t,s]);return c?i?z.default.createElement(N,{title:l("swaptrade_cefimode_textarea_unsafe_and_malicious")},d):d:null},St=Io;r();n();var w=p(g()),se=p(R());r();n();var B={box:"_box_1sjse_1",content:"_content_1sjse_5",price:"_price_1sjse_8","medium-font-size":"_medium-font-size_1sjse_12",mediumFontSize:"_medium-font-size_1sjse_12","normal-font-size":"_normal-font-size_1sjse_15",normalFontSize:"_normal-font-size_1sjse_15"};var Vt=({fromTokenSymbol:o,toTokenSymbol:e,fromToExchangeRate:t,toFromExchangeRate:i,fromTokenPriceWithSymbol:a,fromTokenPriceWithBillionUnit:s,toTokenPriceWithSymbol:c,toTokenPriceWithBillionUnit:d,contentClassName:_="",boxClassName:k="",isMediumFontSize:y=!1})=>{let[h,P]=(0,w.useState)(!0),T=(0,w.useMemo)(()=>h?{leftSymbol:o,rightSymbol:e,exchangeRate:t}:{leftSymbol:e,rightSymbol:o,exchangeRate:i},[h,o,e,t,i]),[x,D]=(0,w.useMemo)(()=>h?[a,s]:[c,d],[h,a,s,c,d]),I=oe.formatRange({leftNumber:oe.formatCurrency(1,{code:T.leftSymbol,isSymbol:!1}),sign:" \u2248 ",rightNumber:oe.formatCurrency(T.exchangeRate,{code:T.rightSymbol,isSymbol:!1})});return w.default.createElement("div",{className:(0,se.default)("flex",B.box,k)},w.default.createElement(eo,{value:I},w.default.createElement(L,{className:(0,se.default)("font-bold ellipsis",B.content,_,y?B.mediumFontSize:B.normalFontSize),onClick:H=>{H.stopPropagation(),P(!h)}},I)),x&&w.default.createElement(N,{title:`${x}`,noWrapper:!0,maxWidth:300},w.default.createElement("span",{className:(0,se.default)(y?B.mediumFontSize:B.normalFontSize,B.price)},`(${D})`)))};r();n();var to=p(g());var Yt=({fromUsdPrice:o,fromAmount:e,toUsdPrice:t,toAmount:i,currencyConversionWithSymbol:a})=>(0,to.useMemo)(()=>{let s=new _e.BigNumber(o).div(e).toString(),c=new _e.BigNumber(t).div(i).toString(),d=s?a(s,{needBillionMillionUnit:!1}):"",_=c?a(c,{needBillionMillionUnit:!1}):"",k=s?a(s,{needBillionMillionUnit:!0}):"",y=c?a(c,{needBillionMillionUnit:!0}):"";return{fromTokenPrice:s,toTokenPrice:c,fromTokenPriceWithSymbol:d,toTokenPriceWithSymbol:_,fromTokenPriceWithBillionUnit:k,toTokenPriceWithBillionUnit:y}},[o,e,t,i,a]);r();n();var K=p(g()),ao=p(R());r();n();var C=p(g()),no=p(R());r();n();var ro={"button-container":"_button-container_wmrwa_1",buttonContainer:"_button-container_wmrwa_1",base:"_base_wmrwa_12","tips-container":"_tips-container_wmrwa_21",tipsContainer:"_tips-container_wmrwa_21",footer:"_footer_wmrwa_30"};var No=({dialogShow:o,tipsModuleShow:e,isSwapChain:t,swapChainValueDifferenceTooltip:i,crossValueDifferenceTooltipProps:a})=>{let{gasFlag:s,feeUsd:c,quote:d,computedIsFreeNetworkFee:_}=a||{},{crossChainFee:k,toToken:y,bridge:h}=d?.bestRoute||{},P=$e(d?.bestRoute),T=()=>{if(t)return C.default.createElement(C.default.Fragment,null,C.default.createElement("p",null,l("swaptrade_card_modal_value_difference_tips")),C.default.createElement("p",null,i));let I=C.default.createElement("p",null,l(s?"swaptrade_card_modal_value_difference_details1":"swaptrade_card_modal_value_difference_tips"));if(_)return C.default.createElement(C.default.Fragment,null,I,C.default.createElement("p",null,l("swaptrade_pop_dialog_desc_value_diff_bridgeprovider")));let H=Le(k,{needPlaceholder:!0}),X=h?.crossToToken?.tokenSymbol;return Ue()||!P?C.default.createElement("p",null,De(l("swaptrade_servicefee_dialog_value_differ",{bridge:h?.bridgeName,value:c,amount:H,symbol:X}))):C.default.createElement("p",null,l("swaptrade_servicefee_dialog_value_diff",{bridge:h?.bridgeName,value:c,amount:H,symbol:X,toChain:y?.chainName}))},x={title:l("swaptrade_modal_title_value_diff"),mobileWidth:"328",visible:e,confirmText:l("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{o(!1)},onClose:()=>{o(!1)}},D=C.default.createElement("div",{className:(0,no.default)(ro.tipsContainer)},T());return C.default.createElement(V.Tip,{...x},D)},io=No;r();n();var le={default:"_default_hmm0n_1",down:"_down_hmm0n_9",up:"_up_hmm0n_13"};var Ao=({valueDifference:o,isSwapChain:e,crossValueDifferenceTooltipProps:t,swapChainValueDifferenceTooltip:i})=>{let[a,s]=(0,K.useState)(!1),{diffPercent:c,diffValueType:d}=o;return K.default.createElement("div",{className:"flex align-items-center"},d!=="hidden"&&K.default.createElement(N,{title:i,disabled:!e||!i},K.default.createElement(L,{"data-testid":"diff-input",className:(0,ao.default)("ml-4","content-contrast","keep-ltr",le.default,{[le.up]:d==="up",[le.down]:d==="down"}),onClick:()=>{Ye({button_name:"value_difference"}),s(!0)}},`(${c})`)),K.default.createElement(io,{dialogShow:_=>{s(_)},tipsModuleShow:a,isSwapChain:e,swapChainValueDifferenceTooltip:i,crossValueDifferenceTooltipProps:t}))},Sr=Ao;r();n();var $=p(g()),so=p(R());r();n();var ke={"tag-container":"_tag-container_hkskz_1",tagContainer:"_tag-container_hkskz_1","icon-container":"_icon-container_hkskz_15",iconContainer:"_icon-container_hkskz_15",icon:"_icon_hkskz_15","tag-gap":"_tag-gap_hkskz_28",tagGap:"_tag-gap_hkskz_28"};var zr=ee(({gapLeft:o=!1,isHasSaving:e,savingValueUSD:t,skipFormat:i=!1})=>{let a=e===1,{getUsd:s}=Je(),c=(0,$.useMemo)(()=>i?t:s(t??"--"),[t,i,s]);return a?$.default.createElement(N,{title:pe("swaptrade_order_mid_popup_info_card_agg_body",{value:c})},$.default.createElement(Ee,{className:(0,so.default)(ke["tag-container"],o&&ke["tag-gap"]),size:Pe.SIZE.sm},pe("swaptrade_order_mid_aggregator_save_amount_node",{value:c}))):null});r();n();var Z=p(g()),we=p(R());r();n();r();n();var Mo=async()=>await ne.getWalletType()===ne.walletTypeEnum.OKX_WALLET;var ce=async()=>{try{return await Mo()?(await(await ne.getWalletProvider())?.requestWallets()??{})[0]?.targetWalletId??null:null}catch{return null}};var lo=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i})=>{let a=await ce();He({wallet_id:a,referral_code:S.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i})},co=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i})=>{let a=await ce();Xe({wallet_id:a,referral_code:S.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i})};var mo=async({dexMode:o,tokenPair:e,originalServiceFeeRate:t,discountedServiceFeeRate:i,btnName:a})=>{let s=await ce();Ke({wallet_id:s,referral_code:S.refCode,dex_mode:o,token_pair:e,fee_rate_before_code:t,invitee_discount:i,button_name:a})};r();n();var he={referralTag:"_referralTag_wkv6n_1",icon:"_icon_wkv6n_13"};var Bo=({className:o,dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})=>((0,Z.useEffect)(()=>{lo({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})},[]),Z.default.createElement("div",{className:(0,we.default)(he.referralTag,o)},Z.default.createElement(O,{className:(0,we.default)(he.icon,"okx-defi-referral")}),l("swaptrade_placeorder_tag_referral"))),kn=Bo;r();n();var xe=p(g());me();r();n();var po=o=>{if(!o)return;let t={[o.toUpperCase()]:!0};W.set(je,t)};r();n();var v=p(g());r();n();var Y={dialogContent:"_dialogContent_1vyih_1",dialogTitle:"_dialogTitle_1vyih_7",dialogDesc:"_dialogDesc_1vyih_14",btnWrapper:"_btnWrapper_1vyih_20",refCode:"_refCode_1vyih_27"};var Fo=({titleKey:o,descKey:e,refCode:t,refInfo:i,confirmTextKey:a,cancelTextKey:s,onConfirm:c,onCancel:d})=>v.default.createElement("div",{className:Y.dialogContent},v.default.createElement(ve,{width:128,height:128,src:Ge(Ze()?"/cdn/assets/imgs/259/71D5A4042455ED22.png":"/cdn/assets/imgs/259/ABA5EC26AEF4A0F2.png"),alt:"ref-code-stop"}),v.default.createElement("div",{className:Y.dialogTitle},l(o)),v.default.createElement("div",{className:Y.dialogDesc},re(e,{code:v.default.createElement("span",{className:Y.refCode},t),discountNum:v.default.createElement("span",{className:Y.discountNum},Ve(i?.discountRate))})),v.default.createElement("div",{className:Y.btnWrapper},v.default.createElement(E,{category:E.CATEGORY.fill,type:E.TYPE.highlight,size:E.SIZE.xl,block:!0,onClick:c},l(a)),v.default.createElement(E,{category:E.CATEGORY.outline,type:E.TYPE.primary,size:E.SIZE.xl,block:!0,onClick:d},l(s)))),Te=Fo;var Ro=({onStop:o,onBtnClick:e})=>{if(!S.refInfo)return;let{refInfo:t,refCode:i}=S,a=V.show({children:xe.default.createElement(Te,{titleKey:"swaptrade_placeorder_modaltitle_code_removed",descKey:"swaptrade_placeorder_modaldesc_code_removed_from_tnx",refCode:i,refInfo:t,confirmTextKey:"swaptrade_placeorder_modalbtn_no_keep_using",cancelTextKey:"swaptrade_placeorder_modalbtn_yes_stop_using",onConfirm:()=>{e("keep_using"),a.destroy()},onCancel:()=>{e("stop_using"),o?.(t),po(i),S.clearRefInfo(i),a.destroy()}}),onClose:()=>{e("exit"),a.destroy()},width:420})},$n=({onStop:o,dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a})=>{if(!S.refInfo)return;co({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a}).then(b).catch(b);let s=k=>{mo({dexMode:e,tokenPair:t,originalServiceFeeRate:i,discountedServiceFeeRate:a,btnName:k}).then(b).catch(b)},{refCode:c,refInfo:d}=S,_=V.show({children:xe.default.createElement(Te,{titleKey:"swaptrade_placeorder_modaltitle_code_applied",descKey:"swaptrade_placeorder_modaldesc_code_transaction_auto",refCode:c,refInfo:d,confirmTextKey:"commonall_text_btn_ok_active",cancelTextKey:"swaptrade_placeorder_modalbtn_dont_use",onConfirm:()=>{s("ok"),_.destroy()},onCancel:()=>{s("do_not_use_code"),_.destroy(),Ro({onStop:o,onBtnClick:s})}}),onClose:()=>{s("exit"),_.destroy()},width:420})};r();n();var ri=({specialValueRangePrompt:o,isOfflineType:e,isReferredFee:t,extendFeeConfig:i})=>{let a=o?l("swaptrade_intro_dialog_desc_single_value_diff"):l("swaptrade_card_modal_value_difference_tips1");return e?l("swaptrade_pop_dialog_desc_value_diff_cover"):t?l("swaptrade_card_dialog_price_diff",{thirdParty:ze().iframe_referrer,value:Oe(i?.feePercent,{needZero:!1})}):a};r();n();var Q=p(g());r();n();var de=p(g());var fo=({isUp:o=!1,children:e,customClassName:t="",isZero:i=!1})=>{let a=(0,de.useMemo)(()=>i?{}:{color:o?"var(--color-up-text)":"var(--color-down-text)"},[i,o]);return de.default.createElement("span",{className:t,style:a},e)};r();n();var J={container:"_container_17xnn_1",icon:"_icon_17xnn_10",error:"_error_17xnn_15","error-color":"_error-color_17xnn_18",errorColor:"_error-color_17xnn_18"};var wi=({loseDiffValueTxt:o,isUp:e})=>Q.default.createElement("div",{className:J.container},Q.default.createElement(O,{fontSize:"28px",iconName:"okds-warning-circle-fill",className:J.icon}),Q.default.createElement("span",{className:J.error},re("swaptrade_valuediff_select_title_one_value",{value:Q.default.createElement(fo,{customClassName:J.errorColor,isUp:e},o)})));export{Sr as a,ri as b,St as c,wi as d,zr as e,nt as f,Vt as g,Yt as h,kn as i,$n as j,dt as k};
//# sourceMappingURL=chunk-YG6DAN6E.js.map
