;
window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";


import{N as Nf}from"./chunk-3KP46YJE.js";import{e as Pf}from"./chunk-75HHDYID.js";import{h as Lf,i as Bd}from"./chunk-YLE6EDMM.js";import"./chunk-KNLCXBGN.js";import{j as xf}from"./chunk-OFBSODL2.js";import{a as QS,b as Id,g as Md}from"./chunk-273QOT6X.js";import{a as Od,v as Dd}from"./chunk-QNPUBQYD.js";import{c as Wf}from"./chunk-B6ZJJVQC.js";import{a as Nd}from"./chunk-VX6OVCCX.js";import{a as Xn}from"./chunk-6YUADOZL.js";import{d as up}from"./chunk-XE7E2P4R.js";import"./chunk-DL6F7SAI.js";import{a as Td,y as kd}from"./chunk-QU7KCAT2.js";import{a as Tp}from"./chunk-CQHSO2TF.js";import"./chunk-6HJJJE2I.js";import{a as mi}from"./chunk-PIORNFOX.js";import{a as _p}from"./chunk-HE577UXH.js";import{a as Ed,d as Pd}from"./chunk-T5XGANNY.js";import{d as Bf}from"./chunk-ZYCW6CWH.js";import{a as Hu,b as Ku,c as Gu,d as Vu,e as $u,f as Yu,g as zu,h as Ju}from"./chunk-HZSYR5HL.js";import{a as vp}from"./chunk-ZYRXDVPT.js";import{a as Ef}from"./chunk-RYVYRLUT.js";import{a as dp}from"./chunk-WFEAOEXJ.js";import{a as cp}from"./chunk-UHFKAHJQ.js";import{a as wp,b as yp,c as bp,d as Sp,e as Cp,f as kp,h as Ip,i as Mp}from"./chunk-K5KNPOMB.js";import{b as vf}from"./chunk-JGDE735D.js";import{c as qd}from"./chunk-QZITJOI6.js";import"./chunk-B4CRE6WK.js";import"./chunk-VY2OGUH2.js";import{a as aC}from"./chunk-7KWAOX6S.js";import{c as sp}from"./chunk-Z4PAXUWP.js";import"./chunk-JHL2WJA4.js";import"./chunk-RQUKPC6Z.js";import{a as gd}from"./chunk-5RWZJZ73.js";import{i as Cf}from"./chunk-2QLWTTFC.js";import{a as Qd,b as ep,c as tp,d as rp,e as np,f as op,g as ip}from"./chunk-4C6TSQMS.js";import"./chunk-O6ODITJY.js";import{c as bl}from"./chunk-U2J7OKK3.js";import{a as Ap}from"./chunk-7XMX77LA.js";import{c as Qn}from"./chunk-ROWADX4K.js";import"./chunk-K4WQYYBB.js";import{a as h}from"./chunk-LIF3EEZV.js";import{h as yf}from"./chunk-GHRGCPR7.js";import"./chunk-2XOPB27K.js";import{e as lp}from"./chunk-LZL7SWT5.js";import{c as ap}from"./chunk-NCGPJXQK.js";import{a as he}from"./chunk-VGYB2PVD.js";import{a as Vn}from"./chunk-JNWSF6O6.js";import{b as Ld,c as Wd,d as Ud}from"./chunk-OYIB3B2O.js";import"./chunk-OBLKTTHP.js";import{a as xd}from"./chunk-HZ3JMDUS.js";import{n as vd}from"./chunk-NVBOE3PE.js";import"./chunk-TXIKSV43.js";import"./chunk-LQJXR5XX.js";import{a as Zn,b as ge}from"./chunk-NQGIYDUG.js";import{a as fp}from"./chunk-ARRY6F45.js";import{W as Rp,a as gi}from"./chunk-QTCVWDVR.js";import{b as mp,c as gp}from"./chunk-4NXISG4T.js";import{f as pp,g as hp}from"./chunk-MLF4IONJ.js";import{a as Pp}from"./chunk-4ITEJ5A6.js";import{k as qf}from"./chunk-JYCBCMDP.js";import{a as ku,b as Ru,h as Au,i as An}from"./chunk-CBZ2RV36.js";import"./chunk-QMHGGMPE.js";import"./chunk-GVYIP5Q5.js";import{Ka as Wu,T as Ou,Ta as Uu,Wa as qu,Z as Du,Za as Bu,a as Iu,bb as Fu,gb as ju,ka as Nu,ma as Lu,r as Mu}from"./chunk-VHMBEOFX.js";import{a as _d,b as wd,c as yd}from"./chunk-L3AMAP6V.js";import"./chunk-W3VW6MYS.js";import{a as Ep}from"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import{a as Se}from"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import{e as Cr}from"./chunk-M43NTBTB.js";import{G as Zd,a as bf,b as Sf,h as Rd,l as Ad}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as me}from"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import{b as Uf}from"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import{b as Cu,d as vu,h as Bt,i as Tu}from"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import{a as _i}from"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import{b as Of}from"./chunk-6C7RJCTT.js";import{a as iC}from"./chunk-N6PI3XTA.js";import{b as bd,c as Sd,d as Cd,e as Gn}from"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import{a as qt,c as Eu,d as Pu}from"./chunk-MT4YWUUK.js";import{b as xp}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{j as Jn}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as Ft}from"./chunk-MJSLAJV6.js";import{B as If,d as Tf,i as kf,j as Rf,x as Af}from"./chunk-KC2XLVFC.js";import{A as Ut,B as Rn,C as gu,E as st,M as _u,R as wu,T as yu,W as bu,X as Su,ma as hi,pa as Df,q as cu,qa as lt,ra as k,s as du,t as pu,u as hu,x as mu}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import{a as pf,b as wr,c as hf,f as mf,g as pi,h as gf,j as _f,l as wf}from"./chunk-TBQGFYU3.js";import{a as Ae}from"./chunk-L5AZICLM.js";import{d as df}from"./chunk-WLEQHCLB.js";import{$ as Sc,$a as Fn,A as Ht,Ab as hd,B as ec,Ba as Fc,Bb as md,C as tc,Ca as jc,D as rc,Da as Hc,E as On,Ea as Kc,F as Dn,Fa as Gc,G as Nn,Ga as Vc,H as nc,Ha as $c,I as oc,J as ic,K as ac,L as sc,M as lc,N as uc,O as fc,P as cc,Q as dc,R as Ln,S as Wn,T as pc,Ta as Yc,U as hc,V as mc,W as gc,X as _c,Y as wc,Ya as zc,Z as yc,_ as bc,a as be,aa as Cc,ab as jn,b as ut,ba as vc,bb as Jc,c as jt,ca as xc,d as Ff,da as Ec,e as In,ea as Pc,eb as Hn,f as jf,fa as Tc,g as Hf,ga as kc,gb as Xc,h as Kf,ha as Rc,hb as Zc,i as Gf,ia as Un,ib as Qc,j as Vf,ja as Ac,jb as ed,ka as Ic,kb as td,l as $f,la as Mc,lb as rd,m as Yf,ma as Oc,mb as nd,n as zf,na as Dc,nb as od,oa as Nc,ob as id,pa as Lc,pb as Kn,qa as qn,ra as Bn,sa as yr,sb as ad,ta as Wc,tb as sd,ua as Uc,ub as ld,v as Jf,va as qc,vb as ud,w as Xf,wb as fd,x as Zf,xb as cd,y as Qf,yb as dd,z as Mn,za as Bc,zb as pd}from"./chunk-QF42JCDG.js";import{F as lf,G as uf,R as ff,S as cf,b as Xu,d as Zu,e as Qu,f as ef,g as tf,h as rf,i as nf,j as of,m as af,n as sf}from"./chunk-DRCTWZQB.js";import{d as gr,i as au,j as su,l as lu,n as uu,o as kn}from"./chunk-KGMP5AO5.js";import{a as Ml,b as xu,c as vt}from"./chunk-EAE2NUFS.js";import{b as Mf}from"./chunk-OLICTWCW.js";import"./chunk-U5DGHXS4.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import{B as ye,F as Ll,G as Wl}from"./chunk-EPDR6VAQ.js";import{a as Wt}from"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{b as $d,c as Yd,d as zd,f as Jd,h as Xd}from"./chunk-ZIR6OOXX.js";import{b as zn}from"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as Si}from"./chunk-3FMJDUGT.js";import{b as ql,c as Bl}from"./chunk-2O5TMJZM.js";import{A as Kl,B as Gl,C as Vl,D as $l,E as Yl,F as zl,G as Jl,I as Xl,K as Tn,L as Zl,M as Ql,N as eu,O as tu,P as ru,Q as nu,R as ou,S as iu,d as Ul,x as jl,y as _r,z as Hl}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import{a as nC}from"./chunk-FXRKHQFW.js";import{a as Yn}from"./chunk-YTHL7242.js";import{a as gl,b as _l,d as wl,e as yl,f as St}from"./chunk-XOHZCMW2.js";import{D as Fl,a as j,b as Ue,c as Ee,d as bt,e as qe,j as xn,k as En,l as Ol,m as di,n as Pn,r as Dl,sb as fu,u as Nl}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{b as fi,i as xl,k as El,l as Ct,p as D,r as Pl,s as ee}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as Pe}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as Vd,J as Me,U as Sr,a as rC,b as wi,c as Kd,d as Gd,g as yi,k as $n,o as Fe,r as bi,y as Ie}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as de}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import{L as br,c as oC,h as jd,i as Hd}from"./chunk-5CHTOVVG.js";import{a as Fd}from"./chunk-FB3ILH2L.js";import{b as T}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import{a as Tl,b as kl,c as Rl,d as Al,e as Il}from"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{$ as ui,Aa as it,M as Cl,Q as li,fa as vl,g as ot,l as mr,q as Sl,u as si}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import{b as ci}from"./chunk-MZLDJQ3H.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import{a as tC}from"./chunk-XRMFHS2C.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import{a as eC}from"./chunk-PDIVTGDM.js";import{a as at,b as $,c as Y,p as Be,q as vn}from"./chunk-UL6IEE2K.js";import{d as Cn}from"./chunk-4ARIYUS3.js";import{c as x,f as _,n as process,o as a,p as u,q as s}from"./chunk-UWURTNRY.js";var vr=x((yR,Ci)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Ci.exports={nextTick:sC}:Ci.exports=process;function sC(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Dp=x((CR,Op)=>{a();s();var lC={}.toString;Op.exports=Array.isArray||function(e){return lC.call(e)=="[object Array]"}});var vi=x((ER,Np)=>{a();s();Np.exports=at().EventEmitter});var xr=x((xi,Wp)=>{a();s();var eo=Cn(),je=eo.Buffer;function Lp(e,t){for(var r in e)t[r]=e[r]}je.from&&je.alloc&&je.allocUnsafe&&je.allocUnsafeSlow?Wp.exports=eo:(Lp(eo,xi),xi.Buffer=Kt);function Kt(e,t,r){return je(e,t,r)}Lp(je,Kt);Kt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return je(e,t,r)};Kt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=je(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Kt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return je(e)};Kt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return eo.SlowBuffer(e)}});var qp=x((AR,Ei)=>{a();s();function uC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Up=xr().Buffer,Er=Be();function fC(e,t,r){e.copy(t,r)}Ei.exports=function(){function e(){uC(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Up.alloc(0);if(this.length===1)return this.head.data;for(var n=Up.allocUnsafe(r>>>0),o=this.head,i=0;o;)fC(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();Er&&Er.inspect&&Er.inspect.custom&&(Ei.exports.prototype[Er.inspect.custom]=function(){var e=Er.inspect({length:this.length});return this.constructor.name+" "+e})});var Pi=x((OR,jp)=>{a();s();var Bp=vr();function cC(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Bp.nextTick(Fp,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Bp.nextTick(Fp,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function dC(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Fp(e,t){e.emit("error",t)}jp.exports={destroy:cC,undestroy:dC}});var ki=x((LR,Jp)=>{a();s();var xt=vr();Jp.exports=z;function Kp(e){var t=this;this.next=null,this.entry=null,this.finish=function(){AC(t,e)}}var pC=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:xt.nextTick,Gt;z.WritableState=Tr;var Gp=Object.create($());Gp.inherits=Y();var hC={deprecate:vn()},Vp=vi(),ro=xr().Buffer,mC=globalThis.Uint8Array||function(){};function gC(e){return ro.from(e)}function _C(e){return ro.isBuffer(e)||e instanceof mC}var $p=Pi();Gp.inherits(z,Vp);function wC(){}function Tr(e,t){Gt=Gt||Et(),e=e||{};var r=t instanceof Gt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){EC(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Kp(this)}Tr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Tr.prototype,"buffer",{get:hC.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var to;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(to=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(e){return to.call(this,e)?!0:this!==z?!1:e&&e._writableState instanceof Tr}})):to=function(e){return e instanceof this};function z(e){if(Gt=Gt||Et(),!to.call(z,this)&&!(this instanceof Gt))return new z(e);this._writableState=new Tr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Vp.call(this)}z.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function yC(e,t){var r=new Error("write after end");e.emit("error",r),xt.nextTick(t,r)}function bC(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),xt.nextTick(n,i),o=!1),o}z.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&_C(e);return i&&!ro.isBuffer(e)&&(e=gC(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=wC),n.ended?yC(this,r):(i||bC(this,n,e,r))&&(n.pendingcb++,o=CC(this,n,i,e,t,r)),o};z.prototype.cork=function(){var e=this._writableState;e.corked++};z.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Yp(this,e))};z.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function SC(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=ro.from(t,r)),t}Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function CC(e,t,r,n,o,i){if(!r){var l=SC(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ti(e,t,!1,f,n,o,i);return c}function Ti(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function vC(e,t,r,n,o){--t.pendingcb,r?(xt.nextTick(o,n),xt.nextTick(Pr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Pr(e,t))}function xC(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function EC(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(xC(r),t)vC(e,r,n,t,o);else{var i=zp(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Yp(e,r),n?pC(Hp,e,r,i,o):Hp(e,r,i,o)}}function Hp(e,t,r,n){r||PC(e,t),t.pendingcb--,n(),Pr(e,t)}function PC(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Yp(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,f=!0;r;)o[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;o.allBuffers=f,Ti(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Kp(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,S=r.callback,b=t.objectMode?1:c.length;if(Ti(e,t,!1,b,c,d,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}z.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};z.prototype._writev=null;z.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&RC(this,n,r)};function zp(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function TC(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Pr(e,t)})}function kC(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,xt.nextTick(TC,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Pr(e,t){var r=zp(t);return r&&(kC(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function RC(e,t,r){t.ending=!0,Pr(e,t),r&&(t.finished?xt.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function AC(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(z.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});z.prototype.destroy=$p.destroy;z.prototype._undestroy=$p.undestroy;z.prototype._destroy=function(e,t){this.end(),t(e)}});var Et=x((qR,eh)=>{a();s();var Xp=vr(),IC=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};eh.exports=He;var Zp=Object.create($());Zp.inherits=Y();var Qp=Ii(),Ai=ki();Zp.inherits(He,Qp);for(Ri=IC(Ai.prototype),no=0;no<Ri.length;no++)oo=Ri[no],He.prototype[oo]||(He.prototype[oo]=Ai.prototype[oo]);var Ri,oo,no;function He(e){if(!(this instanceof He))return new He(e);Qp.call(this,e),Ai.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",MC)}Object.defineProperty(He.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function MC(){this.allowHalfOpen||this._writableState.ended||Xp.nextTick(OC,this)}function OC(e){e.end()}Object.defineProperty(He.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});He.prototype._destroy=function(e,t){this.push(null),this.end(),Xp.nextTick(t,e)}});var Di=x(rh=>{a();s();var Oi=xr().Buffer,th=Oi.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function DC(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function NC(e){var t=DC(e);if(typeof t!="string"&&(Oi.isEncoding===th||!th(e)))throw new Error("Unknown encoding: "+e);return t||e}rh.StringDecoder=kr;function kr(e){this.encoding=NC(e);var t;switch(this.encoding){case"utf16le":this.text=FC,this.end=jC,t=4;break;case"utf8":this.fillLast=UC,t=4;break;case"base64":this.text=HC,this.end=KC,t=3;break;default:this.write=GC,this.end=VC;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Oi.allocUnsafe(t)}kr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};kr.prototype.end=BC;kr.prototype.text=qC;kr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Mi(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function LC(e,t,r){var n=t.length-1;if(n<r)return 0;var o=Mi(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=Mi(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=Mi(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function WC(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function UC(e){var t=this.lastTotal-this.lastNeed,r=WC(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function qC(e,t){var r=LC(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function BC(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function FC(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function jC(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function HC(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function KC(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function GC(e){return e.toString(this.encoding)}function VC(e){return e&&e.length?this.write(e):""}});var Ii=x((VR,hh)=>{a();s();var $t=vr();hh.exports=L;var $C=Dp(),Rr;L.ReadableState=uh;var GR=at().EventEmitter,ah=function(e,t){return e.listeners(t).length},qi=vi(),Ar=xr().Buffer,YC=globalThis.Uint8Array||function(){};function zC(e){return Ar.from(e)}function JC(e){return Ar.isBuffer(e)||e instanceof YC}var sh=Object.create($());sh.inherits=Y();var Ni=Be(),R=void 0;Ni&&Ni.debuglog?R=Ni.debuglog("stream"):R=function(){};var XC=qp(),lh=Pi(),Vt;sh.inherits(L,qi);var Li=["error","close","destroy","pause","resume"];function ZC(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):$C(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function uh(e,t){Rr=Rr||Et(),e=e||{};var r=t instanceof Rr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new XC,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Vt||(Vt=Di().StringDecoder),this.decoder=new Vt(e.encoding),this.encoding=e.encoding)}function L(e){if(Rr=Rr||Et(),!(this instanceof L))return new L(e);this._readableState=new uh(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),qi.call(this)}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});L.prototype.destroy=lh.destroy;L.prototype._undestroy=lh.undestroy;L.prototype._destroy=function(e,t){this.push(null),t(e)};L.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Ar.from(e,t),t=""),n=!0),fh(this,e,t,!1,n)};L.prototype.unshift=function(e){return fh(this,e,null,!0,!1)};function fh(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,rv(e,i);else{var l;o||(l=QC(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==Ar.prototype&&(t=zC(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Wi(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?Wi(e,i,t,!1):ch(e,i)):Wi(e,i,t,!1))):n||(i.reading=!1)}return ev(i)}function Wi(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&io(e)),ch(e,t)}function QC(e,t){var r;return!JC(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function ev(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}L.prototype.isPaused=function(){return this._readableState.flowing===!1};L.prototype.setEncoding=function(e){return Vt||(Vt=Di().StringDecoder),this._readableState.decoder=new Vt(e),this._readableState.encoding=e,this};var nh=8388608;function tv(e){return e>=nh?e=nh:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function oh(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=tv(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}L.prototype.read=function(e){R("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ui(this):io(this),null;if(e=oh(e,t),e===0&&t.ended)return t.length===0&&Ui(this),null;var n=t.needReadable;R("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,R("length less than watermark",n)),t.ended||t.reading?(n=!1,R("reading or ended",n)):n&&(R("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=oh(r,t)));var o;return e>0?o=dh(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ui(this)),o!==null&&this.emit("data",o),o};function rv(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,io(e)}}function io(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?$t.nextTick(ih,e):ih(e))}function ih(e){R("emit readable"),e.emit("readable"),Bi(e)}function ch(e,t){t.readingMore||(t.readingMore=!0,$t.nextTick(nv,e,t))}function nv(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}L.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};L.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,R("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?f:g;n.endEmitted?$t.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(y,E){R("onunpipe"),y===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,S())}function f(){R("onend"),e.end()}var c=ov(r);e.on("drain",c);var d=!1;function S(){R("cleanup"),e.removeListener("close",P),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",g),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var b=!1;r.on("data",C);function C(y){R("ondata"),b=!1;var E=e.write(y);E===!1&&!b&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&ph(n.pipes,e)!==-1)&&!d&&(R("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,b=!0),r.pause())}function v(y){R("onerror",y),g(),e.removeListener("error",v),ah(e,"error")===0&&e.emit("error",y)}ZC(e,"error",v);function P(){e.removeListener("finish",m),g()}e.once("close",P);function m(){R("onfinish"),e.removeListener("close",P),g()}e.once("finish",m);function g(){R("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(R("pipe resume"),r.resume()),e};function ov(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&ah(e,"data")&&(t.flowing=!0,Bi(e))}}L.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=ph(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};L.prototype.on=function(e,t){var r=qi.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&io(this):$t.nextTick(iv,this))}return r};L.prototype.addListener=L.prototype.on;function iv(e){R("readable nexttick read 0"),e.read(0)}L.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,av(this,e)),this};function av(e,t){t.resumeScheduled||(t.resumeScheduled=!0,$t.nextTick(sv,e,t))}function sv(e,t){t.reading||(R("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Bi(e),t.flowing&&!t.reading&&e.read(0)}L.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Bi(e){var t=e._readableState;for(R("flow",t.flowing);t.flowing&&e.read()!==null;);}L.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(R("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(R("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<Li.length;i++)e.on(Li[i],this.emit.bind(this,Li[i]));return this._read=function(l){R("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});L._fromList=dh;function dh(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=lv(e,t.buffer,t.decoder),r}function lv(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?uv(e,t):fv(e,t),n}function uv(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function fv(e,t){var r=Ar.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function Ui(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,$t.nextTick(cv,t,e))}function cv(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function ph(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Fi=x((zR,_h)=>{a();s();_h.exports=Ke;var ao=Et(),gh=Object.create($());gh.inherits=Y();gh.inherits(Ke,ao);function dv(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Ke(e){if(!(this instanceof Ke))return new Ke(e);ao.call(this,e),this._transformState={afterTransform:dv.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",pv)}function pv(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){mh(e,t,r)}):mh(this,null,null)}Ke.prototype.push=function(e,t){return this._transformState.needTransform=!1,ao.prototype.push.call(this,e,t)};Ke.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Ke.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Ke.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ke.prototype._destroy=function(e,t){var r=this;ao.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function mh(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Sh=x((ZR,bh)=>{a();s();bh.exports=Ir;var wh=Fi(),yh=Object.create($());yh.inherits=Y();yh.inherits(Ir,wh);function Ir(e){if(!(this instanceof Ir))return new Ir(e);wh.call(this,e)}Ir.prototype._transform=function(e,t,r){r(null,e)}});var vh=x((Oe,Ch)=>{a();s();Oe=Ch.exports=Ii();Oe.Stream=Oe;Oe.Readable=Oe;Oe.Writable=ki();Oe.Duplex=Et();Oe.Transform=Fi();Oe.PassThrough=Sh()});var ji=x((nA,Eh)=>{a();s();var xh=vh().Duplex,hv=Be().inherits;Eh.exports=Mr;hv(Mr,xh);function Mr(e){xh.call(this,{objectMode:!0}),this._name=e.name,this._target=e.target,this._targetWindow=e.targetWindow||window,this._origin=e.targetWindow?"*":location.origin,this._init=!1,this._haveSyn=!1,window.addEventListener("message",this._onMessage.bind(this),!1),this._write("SYN",null,so),this.cork()}Mr.prototype._onMessage=function(e){var t=e.data;if(!(this._origin!=="*"&&e.origin!==this._origin)&&e.source===this._targetWindow&&typeof t=="object"&&t.target===this._name&&!!t.data)if(!this._init)t.data==="SYN"?(this._haveSyn=!0,this._write("ACK",null,so)):t.data==="ACK"&&(this._init=!0,this._haveSyn||this._write("ACK",null,so),this.uncork());else try{this.push(t.data)}catch(r){this.emit("error",r)}};Mr.prototype._read=so;Mr.prototype._write=function(e,t,r){var n={target:this._target,data:e};this._targetWindow.postMessage(n,this._origin),r()};function so(){}});var Or=x((aA,Hi)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Hi.exports={nextTick:mv}:Hi.exports=process;function mv(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Th=x((uA,Ph)=>{a();s();var gv={}.toString;Ph.exports=Array.isArray||function(e){return gv.call(e)=="[object Array]"}});var Ki=x((dA,kh)=>{a();s();kh.exports=at().EventEmitter});var Dr=x((Gi,Ah)=>{a();s();var lo=Cn(),Ge=lo.Buffer;function Rh(e,t){for(var r in e)t[r]=e[r]}Ge.from&&Ge.alloc&&Ge.allocUnsafe&&Ge.allocUnsafeSlow?Ah.exports=lo:(Rh(lo,Gi),Gi.Buffer=Yt);function Yt(e,t,r){return Ge(e,t,r)}Rh(Ge,Yt);Yt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ge(e,t,r)};Yt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Ge(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Yt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ge(e)};Yt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return lo.SlowBuffer(e)}});var Mh=x((_A,Vi)=>{a();s();function _v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ih=Dr().Buffer,Nr=Be();function wv(e,t,r){e.copy(t,r)}Vi.exports=function(){function e(){_v(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Ih.alloc(0);if(this.length===1)return this.head.data;for(var n=Ih.allocUnsafe(r>>>0),o=this.head,i=0;o;)wv(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();Nr&&Nr.inspect&&Nr.inspect.custom&&(Vi.exports.prototype[Nr.inspect.custom]=function(){var e=Nr.inspect({length:this.length});return this.constructor.name+" "+e})});var $i=x((bA,Nh)=>{a();s();var Oh=Or();function yv(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Oh.nextTick(Dh,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Oh.nextTick(Dh,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function bv(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Dh(e,t){e.emit("error",t)}Nh.exports={destroy:yv,undestroy:bv}});var zi=x((vA,Hh)=>{a();s();var Pt=Or();Hh.exports=J;function Wh(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Uv(t,e)}}var Sv=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Pt.nextTick,zt;J.WritableState=Wr;var Uh=Object.create($());Uh.inherits=Y();var Cv={deprecate:vn()},qh=Ki(),fo=Dr().Buffer,vv=globalThis.Uint8Array||function(){};function xv(e){return fo.from(e)}function Ev(e){return fo.isBuffer(e)||e instanceof vv}var Bh=$i();Uh.inherits(J,qh);function Pv(){}function Wr(e,t){zt=zt||Tt(),e=e||{};var r=t instanceof zt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){Ov(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Wh(this)}Wr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Wr.prototype,"buffer",{get:Cv.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var uo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(uo=Function.prototype[Symbol.hasInstance],Object.defineProperty(J,Symbol.hasInstance,{value:function(e){return uo.call(this,e)?!0:this!==J?!1:e&&e._writableState instanceof Wr}})):uo=function(e){return e instanceof this};function J(e){if(zt=zt||Tt(),!uo.call(J,this)&&!(this instanceof zt))return new J(e);this._writableState=new Wr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),qh.call(this)}J.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Tv(e,t){var r=new Error("write after end");e.emit("error",r),Pt.nextTick(t,r)}function kv(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),Pt.nextTick(n,i),o=!1),o}J.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&Ev(e);return i&&!fo.isBuffer(e)&&(e=xv(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Pv),n.ended?Tv(this,r):(i||kv(this,n,e,r))&&(n.pendingcb++,o=Av(this,n,i,e,t,r)),o};J.prototype.cork=function(){var e=this._writableState;e.corked++};J.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Fh(this,e))};J.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Rv(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=fo.from(t,r)),t}Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Av(e,t,r,n,o,i){if(!r){var l=Rv(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Yi(e,t,!1,f,n,o,i);return c}function Yi(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function Iv(e,t,r,n,o){--t.pendingcb,r?(Pt.nextTick(o,n),Pt.nextTick(Lr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Lr(e,t))}function Mv(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Ov(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(Mv(r),t)Iv(e,r,n,t,o);else{var i=jh(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Fh(e,r),n?Sv(Lh,e,r,i,o):Lh(e,r,i,o)}}function Lh(e,t,r,n){r||Dv(e,t),t.pendingcb--,n(),Lr(e,t)}function Dv(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Fh(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,f=!0;r;)o[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;o.allBuffers=f,Yi(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Wh(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,S=r.callback,b=t.objectMode?1:c.length;if(Yi(e,t,!1,b,c,d,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}J.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};J.prototype._writev=null;J.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Wv(this,n,r)};function jh(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Nv(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Lr(e,t)})}function Lv(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Pt.nextTick(Nv,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Lr(e,t){var r=jh(t);return r&&(Lv(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function Wv(e,t,r){t.ending=!0,Lr(e,t),r&&(t.finished?Pt.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Uv(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(J.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});J.prototype.destroy=Bh.destroy;J.prototype._undestroy=Bh.undestroy;J.prototype._destroy=function(e,t){this.end(),t(e)}});var Tt=x((PA,$h)=>{a();s();var Kh=Or(),qv=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};$h.exports=Ve;var Gh=Object.create($());Gh.inherits=Y();var Vh=Zi(),Xi=zi();Gh.inherits(Ve,Vh);for(Ji=qv(Xi.prototype),co=0;co<Ji.length;co++)po=Ji[co],Ve.prototype[po]||(Ve.prototype[po]=Xi.prototype[po]);var Ji,po,co;function Ve(e){if(!(this instanceof Ve))return new Ve(e);Vh.call(this,e),Xi.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Bv)}Object.defineProperty(Ve.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Bv(){this.allowHalfOpen||this._writableState.ended||Kh.nextTick(Fv,this)}function Fv(e){e.end()}Object.defineProperty(Ve.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Ve.prototype._destroy=function(e,t){this.push(null),this.end(),Kh.nextTick(t,e)}});var ta=x(zh=>{a();s();var ea=Dr().Buffer,Yh=ea.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function jv(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Hv(e){var t=jv(e);if(typeof t!="string"&&(ea.isEncoding===Yh||!Yh(e)))throw new Error("Unknown encoding: "+e);return t||e}zh.StringDecoder=Ur;function Ur(e){this.encoding=Hv(e);var t;switch(this.encoding){case"utf16le":this.text=zv,this.end=Jv,t=4;break;case"utf8":this.fillLast=Vv,t=4;break;case"base64":this.text=Xv,this.end=Zv,t=3;break;default:this.write=Qv,this.end=ex;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ea.allocUnsafe(t)}Ur.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Ur.prototype.end=Yv;Ur.prototype.text=$v;Ur.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Qi(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Kv(e,t,r){var n=t.length-1;if(n<r)return 0;var o=Qi(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=Qi(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=Qi(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function Gv(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Vv(e){var t=this.lastTotal-this.lastNeed,r=Gv(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function $v(e,t){var r=Kv(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Yv(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function zv(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Jv(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Xv(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Zv(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Qv(e){return e.toString(this.encoding)}function ex(e){return e&&e.length?this.write(e):""}});var Zi=x((OA,sm)=>{a();s();var Xt=Or();sm.exports=W;var tx=Th(),qr;W.ReadableState=rm;var MA=at().EventEmitter,Qh=function(e,t){return e.listeners(t).length},aa=Ki(),Br=Dr().Buffer,rx=globalThis.Uint8Array||function(){};function nx(e){return Br.from(e)}function ox(e){return Br.isBuffer(e)||e instanceof rx}var em=Object.create($());em.inherits=Y();var ra=Be(),A=void 0;ra&&ra.debuglog?A=ra.debuglog("stream"):A=function(){};var ix=Mh(),tm=$i(),Jt;em.inherits(W,aa);var na=["error","close","destroy","pause","resume"];function ax(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):tx(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function rm(e,t){qr=qr||Tt(),e=e||{};var r=t instanceof qr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new ix,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Jt||(Jt=ta().StringDecoder),this.decoder=new Jt(e.encoding),this.encoding=e.encoding)}function W(e){if(qr=qr||Tt(),!(this instanceof W))return new W(e);this._readableState=new rm(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),aa.call(this)}Object.defineProperty(W.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});W.prototype.destroy=tm.destroy;W.prototype._undestroy=tm.undestroy;W.prototype._destroy=function(e,t){this.push(null),t(e)};W.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Br.from(e,t),t=""),n=!0),nm(this,e,t,!1,n)};W.prototype.unshift=function(e){return nm(this,e,null,!0,!1)};function nm(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,fx(e,i);else{var l;o||(l=sx(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==Br.prototype&&(t=nx(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):oa(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?oa(e,i,t,!1):om(e,i)):oa(e,i,t,!1))):n||(i.reading=!1)}return lx(i)}function oa(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&ho(e)),om(e,t)}function sx(e,t){var r;return!ox(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function lx(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}W.prototype.isPaused=function(){return this._readableState.flowing===!1};W.prototype.setEncoding=function(e){return Jt||(Jt=ta().StringDecoder),this._readableState.decoder=new Jt(e),this._readableState.encoding=e,this};var Jh=8388608;function ux(e){return e>=Jh?e=Jh:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Xh(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=ux(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}W.prototype.read=function(e){A("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return A("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?ia(this):ho(this),null;if(e=Xh(e,t),e===0&&t.ended)return t.length===0&&ia(this),null;var n=t.needReadable;A("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,A("length less than watermark",n)),t.ended||t.reading?(n=!1,A("reading or ended",n)):n&&(A("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Xh(r,t)));var o;return e>0?o=im(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ia(this)),o!==null&&this.emit("data",o),o};function fx(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,ho(e)}}function ho(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(A("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Xt.nextTick(Zh,e):Zh(e))}function Zh(e){A("emit readable"),e.emit("readable"),sa(e)}function om(e,t){t.readingMore||(t.readingMore=!0,Xt.nextTick(cx,e,t))}function cx(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(A("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}W.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};W.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,A("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?f:g;n.endEmitted?Xt.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(y,E){A("onunpipe"),y===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,S())}function f(){A("onend"),e.end()}var c=dx(r);e.on("drain",c);var d=!1;function S(){A("cleanup"),e.removeListener("close",P),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",g),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var b=!1;r.on("data",C);function C(y){A("ondata"),b=!1;var E=e.write(y);E===!1&&!b&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&am(n.pipes,e)!==-1)&&!d&&(A("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,b=!0),r.pause())}function v(y){A("onerror",y),g(),e.removeListener("error",v),Qh(e,"error")===0&&e.emit("error",y)}ax(e,"error",v);function P(){e.removeListener("finish",m),g()}e.once("close",P);function m(){A("onfinish"),e.removeListener("close",P),g()}e.once("finish",m);function g(){A("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(A("pipe resume"),r.resume()),e};function dx(e){return function(){var t=e._readableState;A("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Qh(e,"data")&&(t.flowing=!0,sa(e))}}W.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=am(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};W.prototype.on=function(e,t){var r=aa.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ho(this):Xt.nextTick(px,this))}return r};W.prototype.addListener=W.prototype.on;function px(e){A("readable nexttick read 0"),e.read(0)}W.prototype.resume=function(){var e=this._readableState;return e.flowing||(A("resume"),e.flowing=!0,hx(this,e)),this};function hx(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Xt.nextTick(mx,e,t))}function mx(e,t){t.reading||(A("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),sa(e),t.flowing&&!t.reading&&e.read(0)}W.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function sa(e){var t=e._readableState;for(A("flow",t.flowing);t.flowing&&e.read()!==null;);}W.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(A("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(A("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<na.length;i++)e.on(na[i],this.emit.bind(this,na[i]));return this._read=function(l){A("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});W._fromList=im;function im(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=gx(e,t.buffer,t.decoder),r}function gx(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?_x(e,t):wx(e,t),n}function _x(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function wx(e,t){var r=Br.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function ia(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Xt.nextTick(yx,t,e))}function yx(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function am(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var la=x((LA,fm)=>{a();s();fm.exports=$e;var mo=Tt(),um=Object.create($());um.inherits=Y();um.inherits($e,mo);function bx(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function $e(e){if(!(this instanceof $e))return new $e(e);mo.call(this,e),this._transformState={afterTransform:bx.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Sx)}function Sx(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){lm(e,t,r)}):lm(this,null,null)}$e.prototype.push=function(e,t){return this._transformState.needTransform=!1,mo.prototype.push.call(this,e,t)};$e.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};$e.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};$e.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};$e.prototype._destroy=function(e,t){var r=this;mo.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function lm(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var hm=x((qA,pm)=>{a();s();pm.exports=Fr;var cm=la(),dm=Object.create($());dm.inherits=Y();dm.inherits(Fr,cm);function Fr(e){if(!(this instanceof Fr))return new Fr(e);cm.call(this,e)}Fr.prototype._transform=function(e,t,r){r(null,e)}});var gm=x((De,mm)=>{a();s();De=mm.exports=Zi();De.Stream=De;De.Readable=De;De.Writable=zi();De.Duplex=Tt();De.Transform=la();De.PassThrough=hm()});var wm=x((KA,ca)=>{a();s();var _m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);_m?(ua=new Uint8Array(16),ca.exports=function(){return _m(ua),ua}):(fa=new Array(16),ca.exports=function(){for(var t=0,r;t<16;t++)(t&3)===0&&(r=Math.random()*4294967296),fa[t]=r>>>((t&3)<<3)&255;return fa});var ua,fa});var Sm=x(($A,bm)=>{a();s();var ym=[];for(jr=0;jr<256;++jr)ym[jr]=(jr+256).toString(16).substr(1);var jr;function Cx(e,t){var r=t||0,n=ym;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}bm.exports=Cx});var vm=x((JA,Cm)=>{a();s();var vx=wm(),xx=Sm();function Ex(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||vx)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||xx(o)}Cm.exports=Ex});var Pm=x((QA,Em)=>{a();s();var xm=gm().Duplex,Px=Be().inherits,Tx=vm();Em.exports=ft;Px(ft,xm);function ft(){xm.call(this,{objectMode:!0}),this._payloads={}}ft.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};ft.prototype.sendAsync=function(e,t){let r=e.id,n=Tx();if(e.id=n,Array.isArray(e)&&e.length===0)return t(null,[]);this._payloads[n]=[t,r],this.push(e)};ft.prototype.isConnected=function(){return!0};ft.prototype._onResponse=function(e){let t=e.id,r=this._payloads[t];if(!r)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[t];let n=r[0];e.id=r[1],setTimeout(function(){n(null,e)})};ft.prototype._read=kx;ft.prototype._write=function(e,t,r){this._onResponse(e),r()};function kx(){}});var Hr=x((r0,da)=>{a();s();!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?da.exports=Rx:da.exports=process.nextTick;function Rx(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var km=x((i0,Tm)=>{a();s();var Ax={}.toString;Tm.exports=Array.isArray||function(e){return Ax.call(e)=="[object Array]"}});var pa=x((l0,Rm)=>{a();s();Rm.exports=at().EventEmitter});var Kr=x((ha,Im)=>{a();s();var go=Cn(),Ye=go.Buffer;function Am(e,t){for(var r in e)t[r]=e[r]}Ye.from&&Ye.alloc&&Ye.allocUnsafe&&Ye.allocUnsafeSlow?Im.exports=go:(Am(go,ha),ha.Buffer=Zt);function Zt(e,t,r){return Ye(e,t,r)}Am(Ye,Zt);Zt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ye(e,t,r)};Zt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Ye(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Zt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ye(e)};Zt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return go.SlowBuffer(e)}});var Dm=x((p0,Om)=>{a();s();function Ix(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mm=Kr().Buffer;function Mx(e,t,r){e.copy(t,r)}Om.exports=function(){function e(){Ix(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Mm.alloc(0);if(this.length===1)return this.head.data;for(var n=Mm.allocUnsafe(r>>>0),o=this.head,i=0;o;)Mx(o.data,n,i),i+=o.data.length,o=o.next;return n},e}()});var ma=x((g0,Wm)=>{a();s();var Nm=Hr();function Ox(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;if(n||o){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Nm(Lm,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Nm(Lm,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)})}function Dx(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Lm(e,t){e.emit("error",t)}Wm.exports={destroy:Ox,undestroy:Dx}});var _a=x((y0,Gm)=>{a();s();var kt=Hr();Gm.exports=te;function qm(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Zx(t,e)}}var Nx=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:kt,Qt;te.WritableState=Vr;var Bm=$();Bm.inherits=Y();var Lx={deprecate:vn()},Fm=pa(),wo=Kr().Buffer,Wx=globalThis.Uint8Array||function(){};function Ux(e){return wo.from(e)}function qx(e){return wo.isBuffer(e)||e instanceof Wx}var jm=ma();Bm.inherits(te,Fm);function Bx(){}function Vr(e,t){Qt=Qt||Rt(),e=e||{},this.objectMode=!!e.objectMode,t instanceof Qt&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){$x(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new qm(this)}Vr.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Vr.prototype,"buffer",{get:Lx.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _o;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_o=Function.prototype[Symbol.hasInstance],Object.defineProperty(te,Symbol.hasInstance,{value:function(e){return _o.call(this,e)?!0:e&&e._writableState instanceof Vr}})):_o=function(e){return e instanceof this};function te(e){if(Qt=Qt||Rt(),!_o.call(te,this)&&!(this instanceof Qt))return new te(e);this._writableState=new Vr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Fm.call(this)}te.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Fx(e,t){var r=new Error("write after end");e.emit("error",r),kt(t,r)}function jx(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),kt(n,i),o=!1),o}te.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=qx(e)&&!n.objectMode;return i&&!wo.isBuffer(e)&&(e=Ux(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Bx),n.ended?Fx(this,r):(i||jx(this,n,e,r))&&(n.pendingcb++,o=Kx(this,n,i,e,t,r)),o};te.prototype.cork=function(){var e=this._writableState;e.corked++};te.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Hm(this,e))};te.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Hx(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=wo.from(t,r)),t}function Kx(e,t,r,n,o,i){if(!r){var l=Hx(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ga(e,t,!1,f,n,o,i);return c}function ga(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function Gx(e,t,r,n,o){--t.pendingcb,r?(kt(o,n),kt(Gr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),Gr(e,t))}function Vx(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function $x(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(Vx(r),t)Gx(e,r,n,t,o);else{var i=Km(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Hm(e,r),n?Nx(Um,e,r,i,o):Um(e,r,i,o)}}function Um(e,t,r,n){r||Yx(e,t),t.pendingcb--,n(),Gr(e,t)}function Yx(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Hm(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,f=!0;r;)o[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;o.allBuffers=f,ga(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new qm(t)}else{for(;r;){var c=r.chunk,d=r.encoding,S=r.callback,b=t.objectMode?1:c.length;if(ga(e,t,!1,b,c,d,S),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}te.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};te.prototype._writev=null;te.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Xx(this,n,r)};function Km(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function zx(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Gr(e,t)})}function Jx(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,kt(zx,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Gr(e,t){var r=Km(t);return r&&(Jx(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function Xx(e,t,r){t.ending=!0,Gr(e,t),r&&(t.finished?kt(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Zx(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(te.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});te.prototype.destroy=jm.destroy;te.prototype._undestroy=jm.undestroy;te.prototype._destroy=function(e,t){this.end(),t(e)}});var Rt=x((C0,Jm)=>{a();s();var $m=Hr(),Qx=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Jm.exports=ct;var Ym=$();Ym.inherits=Y();var zm=ya(),wa=_a();Ym.inherits(ct,zm);var Vm=Qx(wa.prototype);for(yo=0;yo<Vm.length;yo++)bo=Vm[yo],ct.prototype[bo]||(ct.prototype[bo]=wa.prototype[bo]);var bo,yo;function ct(e){if(!(this instanceof ct))return new ct(e);zm.call(this,e),wa.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",eE)}function eE(){this.allowHalfOpen||this._writableState.ended||$m(tE,this)}function tE(e){e.end()}Object.defineProperty(ct.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});ct.prototype._destroy=function(e,t){this.push(null),this.end(),$m(t,e)}});var Ca=x(Zm=>{a();s();var Sa=Kr().Buffer,Xm=Sa.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rE(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function nE(e){var t=rE(e);if(typeof t!="string"&&(Sa.isEncoding===Xm||!Xm(e)))throw new Error("Unknown encoding: "+e);return t||e}Zm.StringDecoder=$r;function $r(e){this.encoding=nE(e);var t;switch(this.encoding){case"utf16le":this.text=uE,this.end=fE,t=4;break;case"utf8":this.fillLast=aE,t=4;break;case"base64":this.text=cE,this.end=dE,t=3;break;default:this.write=pE,this.end=hE;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Sa.allocUnsafe(t)}$r.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};$r.prototype.end=lE;$r.prototype.text=sE;$r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function ba(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function oE(e,t,r){var n=t.length-1;if(n<r)return 0;var o=ba(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r?0:(o=ba(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r?0:(o=ba(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function iE(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD".repeat(r);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD".repeat(r+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD".repeat(r+2)}}function aE(e){var t=this.lastTotal-this.lastNeed,r=iE(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function sE(e,t){var r=oE(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function lE(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD".repeat(this.lastTotal-this.lastNeed):t}function uE(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function fE(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function cE(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function dE(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function pE(e){return e.toString(this.encoding)}function hE(e){return e&&e.length?this.write(e):""}});var ya=x((R0,fg)=>{a();s();var tr=Hr();fg.exports=q;var mE=km(),Yr;q.ReadableState=ig;var k0=at().EventEmitter,rg=function(e,t){return e.listeners(t).length},Ta=pa(),zr=Kr().Buffer,gE=globalThis.Uint8Array||function(){};function _E(e){return zr.from(e)}function wE(e){return zr.isBuffer(e)||e instanceof gE}var ng=$();ng.inherits=Y();var va=Be(),I=void 0;va&&va.debuglog?I=va.debuglog("stream"):I=function(){};var yE=Dm(),og=ma(),er;ng.inherits(q,Ta);var xa=["error","close","destroy","pause","resume"];function bE(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):mE(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function ig(e,t){Yr=Yr||Rt(),e=e||{},this.objectMode=!!e.objectMode,t instanceof Yr&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new yE,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(er||(er=Ca().StringDecoder),this.decoder=new er(e.encoding),this.encoding=e.encoding)}function q(e){if(Yr=Yr||Rt(),!(this instanceof q))return new q(e);this._readableState=new ig(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ta.call(this)}Object.defineProperty(q.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});q.prototype.destroy=og.destroy;q.prototype._undestroy=og.undestroy;q.prototype._destroy=function(e,t){this.push(null),t(e)};q.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=zr.from(e,t),t=""),n=!0),ag(this,e,t,!1,n)};q.prototype.unshift=function(e){return ag(this,e,null,!0,!1)};function ag(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,xE(e,i);else{var l;o||(l=SE(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==zr.prototype&&(t=_E(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Ea(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?Ea(e,i,t,!1):sg(e,i)):Ea(e,i,t,!1))):n||(i.reading=!1)}return CE(i)}function Ea(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&So(e)),sg(e,t)}function SE(e,t){var r;return!wE(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function CE(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}q.prototype.isPaused=function(){return this._readableState.flowing===!1};q.prototype.setEncoding=function(e){return er||(er=Ca().StringDecoder),this._readableState.decoder=new er(e),this._readableState.encoding=e,this};var Qm=8388608;function vE(e){return e>=Qm?e=Qm:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function eg(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=vE(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}q.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Pa(this):So(this),null;if(e=eg(e,t),e===0&&t.ended)return t.length===0&&Pa(this),null;var n=t.needReadable;I("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,I("length less than watermark",n)),t.ended||t.reading?(n=!1,I("reading or ended",n)):n&&(I("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=eg(r,t)));var o;return e>0?o=lg(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Pa(this)),o!==null&&this.emit("data",o),o};function xE(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,So(e)}}function So(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?tr(tg,e):tg(e))}function tg(e){I("emit readable"),e.emit("readable"),ka(e)}function sg(e,t){t.readingMore||(t.readingMore=!0,tr(EE,e,t))}function EE(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}q.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};q.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,I("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?f:g;n.endEmitted?tr(i):r.once("end",i),e.on("unpipe",l);function l(y,E){I("onunpipe"),y===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,S())}function f(){I("onend"),e.end()}var c=PE(r);e.on("drain",c);var d=!1;function S(){I("cleanup"),e.removeListener("close",P),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",g),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var b=!1;r.on("data",C);function C(y){I("ondata"),b=!1;var E=e.write(y);E===!1&&!b&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&ug(n.pipes,e)!==-1)&&!d&&(I("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,b=!0),r.pause())}function v(y){I("onerror",y),g(),e.removeListener("error",v),rg(e,"error")===0&&e.emit("error",y)}bE(e,"error",v);function P(){e.removeListener("finish",m),g()}e.once("close",P);function m(){I("onfinish"),e.removeListener("close",P),g()}e.once("finish",m);function g(){I("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(I("pipe resume"),r.resume()),e};function PE(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&rg(e,"data")&&(t.flowing=!0,ka(e))}}q.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=ug(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};q.prototype.on=function(e,t){var r=Ta.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&So(this):tr(TE,this))}return r};q.prototype.addListener=q.prototype.on;function TE(e){I("readable nexttick read 0"),e.read(0)}q.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,kE(this,e)),this};function kE(e,t){t.resumeScheduled||(t.resumeScheduled=!0,tr(RE,e,t))}function RE(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ka(e),t.flowing&&!t.reading&&e.read(0)}q.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ka(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&e.read()!==null;);}q.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(I("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&n.push(l)}n.push(null)}),e.on("data",function(l){if(I("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var f=n.push(l);f||(r=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<xa.length;i++)e.on(xa[i],n.emit.bind(n,xa[i]));return n._read=function(l){I("wrapped _read",l),r&&(r=!1,e.resume())},n};q._fromList=lg;function lg(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=AE(e,t.buffer,t.decoder),r}function AE(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?IE(e,t):ME(e,t),n}function IE(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function ME(e,t){var r=zr.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function Pa(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,tr(OE,t,e))}function OE(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function ug(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Ra=x((M0,pg)=>{a();s();pg.exports=ze;var Co=Rt(),dg=$();dg.inherits=Y();dg.inherits(ze,Co);function DE(e){this.afterTransform=function(t,r){return NE(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function NE(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function ze(e){if(!(this instanceof ze))return new ze(e);Co.call(this,e),this._transformState=new DE(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r,n){cg(t,r,n)}):cg(t)})}ze.prototype.push=function(e,t){return this._transformState.needTransform=!1,Co.prototype.push.call(this,e,t)};ze.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};ze.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ze.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ze.prototype._destroy=function(e,t){var r=this;Co.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function cg(e,t,r){if(t)return e.emit("error",t);r!=null&&e.push(r);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var _g=x((N0,gg)=>{a();s();gg.exports=Jr;var hg=Ra(),mg=$();mg.inherits=Y();mg.inherits(Jr,hg);function Jr(e){if(!(this instanceof Jr))return new Jr(e);hg.call(this,e)}Jr.prototype._transform=function(e,t,r){r(null,e)}});var yg=x((Ne,wg)=>{a();s();Ne=wg.exports=ya();Ne.Stream=Ne;Ne.Readable=Ne;Ne.Writable=_a();Ne.Duplex=Rt();Ne.Transform=Ra();Ne.PassThrough=_g()});var Eg=x((H0,xg)=>{a();s();xg.exports=Zr;Zr.default=Zr;Zr.stable=Cg;Zr.stableStringify=Cg;var Je=[],dt=[];function Zr(e,t,r){Aa(e,"",[],void 0);var n;for(dt.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,vg(t),r);Je.length!==0;){var o=Je.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return n}function Aa(e,t,r,n){var o;if(typeof e=="object"&&e!==null){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Je.push([n,t,e,i])):dt.push([e,t]):(n[t]="[Circular]",Je.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Aa(e[o],o,r,e);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var f=l[o];Aa(e[f],f,r,e)}}r.pop()}}function LE(e,t){return e<t?-1:e>t?1:0}function Cg(e,t,r){var n=Ia(e,"",[],void 0)||e,o;for(dt.length===0?o=JSON.stringify(n,t,r):o=JSON.stringify(n,vg(t),r);Je.length!==0;){var i=Je.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return o}function Ia(e,t,r,n){var o;if(typeof e=="object"&&e!==null){for(o=0;o<r.length;o++)if(r[o]===e){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),Je.push([n,t,e,i])):dt.push([e,t]):(n[t]="[Circular]",Je.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Ia(e[o],o,r,e);else{var l={},f=Object.keys(e).sort(LE);for(o=0;o<f.length;o++){var c=f[o];Ia(e[c],c,r,e),l[c]=e[c]}if(n!==void 0)Je.push([n,t,e]),n[t]=l;else return l}r.pop()}}function vg(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(dt.length>0)for(var n=0;n<dt.length;n++){var o=dt[n];if(o[1]===t&&o[0]===r){r="[Circular]",dt.splice(n,1);break}}return e.call(this,t,r)}}});var xo=x(rr=>{a();s();Object.defineProperty(rr,"__esModule",{value:!0});rr.EthereumProviderError=rr.EthereumRpcError=void 0;var WE=Eg(),vo=class extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return WE.default(this.serialize(),qE,2)}};rr.EthereumRpcError=vo;var Ma=class extends vo{constructor(t,r,n){if(!UE(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}};rr.EthereumProviderError=Ma;function UE(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function qE(e,t){if(t!=="[Circular]")return t}});var Eo=x(nr=>{a();s();Object.defineProperty(nr,"__esModule",{value:!0});nr.errorValues=nr.errorCodes=void 0;nr.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};nr.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Na=x(Te=>{a();s();Object.defineProperty(Te,"__esModule",{value:!0});Te.serializeError=Te.isValidCode=Te.getMessageFromCode=Te.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var Po=Eo(),BE=xo(),Pg=Po.errorCodes.rpc.internal,FE="Unspecified error message. This is a bug, please report it.",jE={code:Pg,message:Da(Pg)};Te.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Da(e,t=FE){if(Number.isInteger(e)){let r=e.toString();if(Oa(Po.errorValues,r))return Po.errorValues[r].message;if(Rg(e))return Te.JSON_RPC_SERVER_ERROR_MESSAGE}return t}Te.getMessageFromCode=Da;function kg(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(Po.errorValues[t]||Rg(e))}Te.isValidCode=kg;function HE(e,{fallbackError:t=jE,shouldIncludeStack:r=!1}={}){var n,o;if(!t||!Number.isInteger(t.code)||typeof t.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof BE.EthereumRpcError)return e.serialize();let i={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Oa(e,"code")&&kg(e.code)){let f=e;i.code=f.code,f.message&&typeof f.message=="string"?(i.message=f.message,Oa(f,"data")&&(i.data=f.data)):(i.message=Da(i.code),i.data={originalError:Tg(e)})}else{i.code=t.code;let f=(n=e)===null||n===void 0?void 0:n.message;i.message=f&&typeof f=="string"?f:t.message,i.data={originalError:Tg(e)}}let l=(o=e)===null||o===void 0?void 0:o.stack;return r&&e&&l&&typeof l=="string"&&(i.stack=l),i}Te.serializeError=HE;function Rg(e){return e>=-32099&&e<=-32e3}function Tg(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Oa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}});var Mg=x(To=>{a();s();Object.defineProperty(To,"__esModule",{value:!0});To.ethErrors=void 0;var La=xo(),Ag=Na(),ie=Eo();To.ethErrors={rpc:{parse:e=>Ce(ie.errorCodes.rpc.parse,e),invalidRequest:e=>Ce(ie.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Ce(ie.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Ce(ie.errorCodes.rpc.methodNotFound,e),internal:e=>Ce(ie.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ce(t,e)},invalidInput:e=>Ce(ie.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Ce(ie.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Ce(ie.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Ce(ie.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Ce(ie.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Ce(ie.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Qr(ie.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Qr(ie.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Qr(ie.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Qr(ie.errorCodes.provider.disconnected,e),chainDisconnected:e=>Qr(ie.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new La.EthereumProviderError(t,r,n)}}};function Ce(e,t){let[r,n]=Ig(t);return new La.EthereumRpcError(e,r||Ag.getMessageFromCode(e),n)}function Qr(e,t){let[r,n]=Ig(t);return new La.EthereumProviderError(e,r||Ag.getMessageFromCode(e),n)}function Ig(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}});var Wa=x(pe=>{a();s();Object.defineProperty(pe,"__esModule",{value:!0});pe.getMessageFromCode=pe.serializeError=pe.EthereumProviderError=pe.EthereumRpcError=pe.ethErrors=pe.errorCodes=void 0;var Og=xo();Object.defineProperty(pe,"EthereumRpcError",{enumerable:!0,get:function(){return Og.EthereumRpcError}});Object.defineProperty(pe,"EthereumProviderError",{enumerable:!0,get:function(){return Og.EthereumProviderError}});var Dg=Na();Object.defineProperty(pe,"serializeError",{enumerable:!0,get:function(){return Dg.serializeError}});Object.defineProperty(pe,"getMessageFromCode",{enumerable:!0,get:function(){return Dg.getMessageFromCode}});var KE=Mg();Object.defineProperty(pe,"ethErrors",{enumerable:!0,get:function(){return KE.ethErrors}});var GE=Eo();Object.defineProperty(pe,"errorCodes",{enumerable:!0,get:function(){return GE.errorCodes}})});var en=x((gI,ja)=>{a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ja.exports={nextTick:JE}:ja.exports=process;function JE(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,i,l;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(o-1),l=0;l<i.length;)i[l++]=arguments[l];return process.nextTick(function(){e.apply(null,i)})}}});var Bg=x((yI,qg)=>{a();s();var XE={}.toString;qg.exports=Array.isArray||function(e){return XE.call(e)=="[object Array]"}});var Ha=x((CI,Fg)=>{a();s();Fg.exports=at().EventEmitter});var tn=x((Ka,Hg)=>{a();s();var Oo=Cn(),Xe=Oo.Buffer;function jg(e,t){for(var r in e)t[r]=e[r]}Xe.from&&Xe.alloc&&Xe.allocUnsafe&&Xe.allocUnsafeSlow?Hg.exports=Oo:(jg(Oo,Ka),Ka.Buffer=or);function or(e,t,r){return Xe(e,t,r)}jg(Xe,or);or.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Xe(e,t,r)};or.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Xe(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};or.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Xe(e)};or.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Oo.SlowBuffer(e)}});var Gg=x((TI,Ga)=>{a();s();function ZE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Kg=tn().Buffer,rn=Be();function QE(e,t,r){e.copy(t,r)}Ga.exports=function(){function e(){ZE(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,o=""+n.data;n=n.next;)o+=r+n.data;return o},e.prototype.concat=function(r){if(this.length===0)return Kg.alloc(0);if(this.length===1)return this.head.data;for(var n=Kg.allocUnsafe(r>>>0),o=this.head,i=0;o;)QE(o.data,n,i),i+=o.data.length,o=o.next;return n},e}();rn&&rn.inspect&&rn.inspect.custom&&(Ga.exports.prototype[rn.inspect.custom]=function(){var e=rn.inspect({length:this.length});return this.constructor.name+" "+e})});var Va=x((AI,Yg)=>{a();s();var Vg=en();function eP(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Vg.nextTick($g,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(i){!t&&i?(Vg.nextTick($g,r,i),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(i)}),this)}function tP(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function $g(e,t){e.emit("error",t)}Yg.exports={destroy:eP,undestroy:tP}});var Ya=x((OI,r_)=>{a();s();var At=en();r_.exports=X;function Jg(e){var t=this;this.next=null,this.entry=null,this.finish=function(){yP(t,e)}}var rP=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:At.nextTick,ir;X.WritableState=on;var Xg=Object.create($());Xg.inherits=Y();var nP={deprecate:vn()},Zg=Ha(),No=tn().Buffer,oP=globalThis.Uint8Array||function(){};function iP(e){return No.from(e)}function aP(e){return No.isBuffer(e)||e instanceof oP}var Qg=Va();Xg.inherits(X,Zg);function sP(){}function on(e,t){ir=ir||It(),e=e||{};var r=t instanceof ir;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){hP(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Jg(this)}on.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(on.prototype,"buffer",{get:nP.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Do;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Do=Function.prototype[Symbol.hasInstance],Object.defineProperty(X,Symbol.hasInstance,{value:function(e){return Do.call(this,e)?!0:this!==X?!1:e&&e._writableState instanceof on}})):Do=function(e){return e instanceof this};function X(e){if(ir=ir||It(),!Do.call(X,this)&&!(this instanceof ir))return new X(e);this._writableState=new on(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Zg.call(this)}X.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function lP(e,t){var r=new Error("write after end");e.emit("error",r),At.nextTick(t,r)}function uP(e,t,r,n){var o=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),At.nextTick(n,i),o=!1),o}X.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&aP(e);return i&&!No.isBuffer(e)&&(e=iP(e)),typeof t=="function"&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=sP),n.ended?lP(this,r):(i||uP(this,n,e,r))&&(n.pendingcb++,o=cP(this,n,i,e,t,r)),o};X.prototype.cork=function(){var e=this._writableState;e.corked++};X.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&e_(this,e))};X.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function fP(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=No.from(t,r)),t}Object.defineProperty(X.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function cP(e,t,r,n,o,i){if(!r){var l=fP(t,n,o);n!==l&&(r=!0,o="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else $a(e,t,!1,f,n,o,i);return c}function $a(e,t,r,n,o,i,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function dP(e,t,r,n,o){--t.pendingcb,r?(At.nextTick(o,n),At.nextTick(nn,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),nn(e,t))}function pP(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function hP(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(pP(r),t)dP(e,r,n,t,o);else{var i=t_(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&e_(e,r),n?rP(zg,e,r,i,o):zg(e,r,i,o)}}function zg(e,t,r,n){r||mP(e,t),t.pendingcb--,n(),nn(e,t)}function mP(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function e_(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var l=0,f=!0;r;)o[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;o.allBuffers=f,$a(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new Jg(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,S=r.callback,b=t.objectMode?1:c.length;if($a(e,t,!1,b,c,d,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}X.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};X.prototype._writev=null;X.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&wP(this,n,r)};function t_(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function gP(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),nn(e,t)})}function _P(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,At.nextTick(gP,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function nn(e,t){var r=t_(t);return r&&(_P(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function wP(e,t,r){t.ending=!0,nn(e,t),r&&(t.finished?At.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function yP(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(X.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});X.prototype.destroy=Qg.destroy;X.prototype._undestroy=Qg.undestroy;X.prototype._destroy=function(e,t){this.end(),t(e)}});var It=x((LI,a_)=>{a();s();var n_=en(),bP=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};a_.exports=Ze;var o_=Object.create($());o_.inherits=Y();var i_=Xa(),Ja=Ya();o_.inherits(Ze,i_);for(za=bP(Ja.prototype),Lo=0;Lo<za.length;Lo++)Wo=za[Lo],Ze.prototype[Wo]||(Ze.prototype[Wo]=Ja.prototype[Wo]);var za,Wo,Lo;function Ze(e){if(!(this instanceof Ze))return new Ze(e);i_.call(this,e),Ja.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",SP)}Object.defineProperty(Ze.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function SP(){this.allowHalfOpen||this._writableState.ended||n_.nextTick(CP,this)}function CP(e){e.end()}Object.defineProperty(Ze.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Ze.prototype._destroy=function(e,t){this.push(null),this.end(),n_.nextTick(t,e)}});var es=x(l_=>{a();s();var Qa=tn().Buffer,s_=Qa.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function vP(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function xP(e){var t=vP(e);if(typeof t!="string"&&(Qa.isEncoding===s_||!s_(e)))throw new Error("Unknown encoding: "+e);return t||e}l_.StringDecoder=an;function an(e){this.encoding=xP(e);var t;switch(this.encoding){case"utf16le":this.text=AP,this.end=IP,t=4;break;case"utf8":this.fillLast=TP,t=4;break;case"base64":this.text=MP,this.end=OP,t=3;break;default:this.write=DP,this.end=NP;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Qa.allocUnsafe(t)}an.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};an.prototype.end=RP;an.prototype.text=kP;an.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Za(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function EP(e,t,r){var n=t.length-1;if(n<r)return 0;var o=Za(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||o===-2?0:(o=Za(t[n]),o>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||o===-2?0:(o=Za(t[n]),o>=0?(o>0&&(o===2?o=0:e.lastNeed=o-3),o):0))}function PP(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function TP(e){var t=this.lastTotal-this.lastNeed,r=PP(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function kP(e,t){var r=EP(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function RP(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function AP(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function IP(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function MP(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function OP(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function DP(e){return e.toString(this.encoding)}function NP(e){return e&&e.length?this.write(e):""}});var Xa=x((HI,b_)=>{a();s();var sr=en();b_.exports=U;var LP=Bg(),sn;U.ReadableState=m_;var jI=at().EventEmitter,d_=function(e,t){return e.listeners(t).length},is=Ha(),ln=tn().Buffer,WP=globalThis.Uint8Array||function(){};function UP(e){return ln.from(e)}function qP(e){return ln.isBuffer(e)||e instanceof WP}var p_=Object.create($());p_.inherits=Y();var ts=Be(),M=void 0;ts&&ts.debuglog?M=ts.debuglog("stream"):M=function(){};var BP=Gg(),h_=Va(),ar;p_.inherits(U,is);var rs=["error","close","destroy","pause","resume"];function FP(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):LP(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function m_(e,t){sn=sn||It(),e=e||{};var r=t instanceof sn;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(o||o===0)?this.highWaterMark=o:this.highWaterMark=i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BP,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ar||(ar=es().StringDecoder),this.decoder=new ar(e.encoding),this.encoding=e.encoding)}function U(e){if(sn=sn||It(),!(this instanceof U))return new U(e);this._readableState=new m_(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),is.call(this)}Object.defineProperty(U.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});U.prototype.destroy=h_.destroy;U.prototype._undestroy=h_.undestroy;U.prototype._destroy=function(e,t){this.push(null),t(e)};U.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=ln.from(e,t),t=""),n=!0),g_(this,e,t,!1,n)};U.prototype.unshift=function(e){return g_(this,e,null,!0,!1)};function g_(e,t,r,n,o){var i=e._readableState;if(t===null)i.reading=!1,GP(e,i);else{var l;o||(l=jP(i,t)),l?e.emit("error",l):i.objectMode||t&&t.length>0?(typeof t!="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==ln.prototype&&(t=UP(t)),n?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):ns(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?ns(e,i,t,!1):__(e,i)):ns(e,i,t,!1))):n||(i.reading=!1)}return HP(i)}function ns(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Uo(e)),__(e,t)}function jP(e,t){var r;return!qP(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function HP(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}U.prototype.isPaused=function(){return this._readableState.flowing===!1};U.prototype.setEncoding=function(e){return ar||(ar=es().StringDecoder),this._readableState.decoder=new ar(e),this._readableState.encoding=e,this};var u_=8388608;function KP(e){return e>=u_?e=u_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f_(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=KP(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}U.prototype.read=function(e){M("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return M("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?os(this):Uo(this),null;if(e=f_(e,t),e===0&&t.ended)return t.length===0&&os(this),null;var n=t.needReadable;M("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,M("length less than watermark",n)),t.ended||t.reading?(n=!1,M("reading or ended",n)):n&&(M("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=f_(r,t)));var o;return e>0?o=w_(e,t):o=null,o===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&os(this)),o!==null&&this.emit("data",o),o};function GP(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Uo(e)}}function Uo(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?sr.nextTick(c_,e):c_(e))}function c_(e){M("emit readable"),e.emit("readable"),as(e)}function __(e,t){t.readingMore||(t.readingMore=!0,sr.nextTick(VP,e,t))}function VP(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(M("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}U.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};U.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,M("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,i=o?f:g;n.endEmitted?sr.nextTick(i):r.once("end",i),e.on("unpipe",l);function l(y,E){M("onunpipe"),y===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,S())}function f(){M("onend"),e.end()}var c=$P(r);e.on("drain",c);var d=!1;function S(){M("cleanup"),e.removeListener("close",P),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",v),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",g),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}var b=!1;r.on("data",C);function C(y){M("ondata"),b=!1;var E=e.write(y);E===!1&&!b&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&y_(n.pipes,e)!==-1)&&!d&&(M("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,b=!0),r.pause())}function v(y){M("onerror",y),g(),e.removeListener("error",v),d_(e,"error")===0&&e.emit("error",y)}FP(e,"error",v);function P(){e.removeListener("finish",m),g()}e.once("close",P);function m(){M("onfinish"),e.removeListener("close",P),g()}e.once("finish",m);function g(){M("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(M("pipe resume"),r.resume()),e};function $P(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&d_(e,"data")&&(t.flowing=!0,as(e))}}U.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var l=y_(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};U.prototype.on=function(e,t){var r=is.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Uo(this):sr.nextTick(YP,this))}return r};U.prototype.addListener=U.prototype.on;function YP(e){M("readable nexttick read 0"),e.read(0)}U.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!0,zP(this,e)),this};function zP(e,t){t.resumeScheduled||(t.resumeScheduled=!0,sr.nextTick(JP,e,t))}function JP(e,t){t.reading||(M("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),as(e),t.flowing&&!t.reading&&e.read(0)}U.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function as(e){var t=e._readableState;for(M("flow",t.flowing);t.flowing&&e.read()!==null;);}U.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(M("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(M("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var o in e)this[o]===void 0&&typeof e[o]=="function"&&(this[o]=function(l){return function(){return e[l].apply(e,arguments)}}(o));for(var i=0;i<rs.length;i++)e.on(rs[i],this.emit.bind(this,rs[i]));return this._read=function(l){M("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});U._fromList=w_;function w_(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=XP(e,t.buffer,t.decoder),r}function XP(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?ZP(e,t):QP(e,t),n}function ZP(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,l=e>i.length?i.length:e;if(l===i.length?o+=i:o+=i.slice(0,e),e-=l,e===0){l===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(l));break}++n}return t.length-=n,o}function QP(e,t){var r=ln.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,l=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,l),e-=l,e===0){l===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(l));break}++o}return t.length-=o,r}function os(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,sr.nextTick(eT,t,e))}function eT(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function y_(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var ss=x((VI,v_)=>{a();s();v_.exports=Qe;var qo=It(),C_=Object.create($());C_.inherits=Y();C_.inherits(Qe,qo);function tT(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Qe(e){if(!(this instanceof Qe))return new Qe(e);qo.call(this,e),this._transformState={afterTransform:tT.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",rT)}function rT(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){S_(e,t,r)}):S_(this,null,null)}Qe.prototype.push=function(e,t){return this._transformState.needTransform=!1,qo.prototype.push.call(this,e,t)};Qe.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Qe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Qe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Qe.prototype._destroy=function(e,t){var r=this;qo.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function S_(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var T_=x((zI,P_)=>{a();s();P_.exports=un;var x_=ss(),E_=Object.create($());E_.inherits=Y();E_.inherits(un,x_);function un(e){if(!(this instanceof un))return new un(e);x_.call(this,e)}un.prototype._transform=function(e,t,r){r(null,e)}});var R_=x((Le,k_)=>{a();s();Le=k_.exports=Xa();Le.Stream=Le;Le.Readable=Le;Le.Writable=Ya();Le.Duplex=It();Le.Transform=ss();Le.PassThrough=T_()});var ls=x((eM,I_)=>{a();s();var nT=ci(),oT=function(){},iT=function(e){return e.setHeader&&typeof e.abort=="function"},aT=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},A_=function(e,t,r){if(typeof t=="function")return A_(e,null,t);t||(t={}),r=nT(r||oT);var n=e._writableState,o=e._readableState,i=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,f=!1,c=function(){e.writable||d()},d=function(){l=!1,i||r.call(e)},S=function(){i=!1,l||r.call(e)},b=function(g){r.call(e,g?new Error("exited with error code: "+g):null)},C=function(g){r.call(e,g)},v=function(){process.nextTick(P)},P=function(){if(!f){if(i&&!(o&&o.ended&&!o.destroyed))return r.call(e,new Error("premature close"));if(l&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},m=function(){e.req.on("finish",d)};return iT(e)?(e.on("complete",d),e.on("abort",v),e.req?m():e.on("request",m)):l&&!n&&(e.on("end",c),e.on("close",c)),aT(e)&&e.on("exit",b),e.on("end",S),e.on("finish",d),t.error!==!1&&e.on("error",C),e.on("close",v),function(){f=!0,e.removeListener("complete",d),e.removeListener("abort",v),e.removeListener("request",m),e.req&&e.req.removeListener("finish",d),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("exit",b),e.removeListener("end",S),e.removeListener("error",C),e.removeListener("close",v)}};I_.exports=A_});var L_=x((nM,N_)=>{a();s();var{Duplex:D_}=R_(),M_=ls(),sT=ci(),O_={},us=class extends D_{constructor(t={}){let r=Object.assign({},t,{objectMode:!0});super(r),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let r=new fs({parent:this,name:t});return this._substreams[t]=r,lT(this,n=>{r.destroy(n)}),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[t]=O_}_read(){}_write(t,r,n){let o=t.name,i=t.data;if(!o)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();let l=this._substreams[o];if(!l)return console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n();l!==O_&&l.push(i),n()}},fs=class extends D_{constructor({parent:t,name:r}){super({objectMode:!0}),this._parent=t,this._name=r}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}};N_.exports=us;function lT(e,t){let r=sT(t);M_(e,{readable:!1},r),M_(e,{writable:!1},r)}});var ds=x((aM,U_)=>{a();s();var uT=ci(),fT=ls(),cs=tC(),fn=function(){},cT=/^v?\.0/.test(process.version),Bo=function(e){return typeof e=="function"},dT=function(e){return!cT||!cs?!1:(e instanceof(cs.ReadStream||fn)||e instanceof(cs.WriteStream||fn))&&Bo(e.close)},pT=function(e){return e.setHeader&&Bo(e.abort)},hT=function(e,t,r,n){n=uT(n);var o=!1;e.on("close",function(){o=!0}),fT(e,{readable:t,writable:r},function(l){if(l)return n(l);o=!0,n()});var i=!1;return function(l){if(!o&&!i){if(i=!0,dT(e))return e.close(fn);if(pT(e))return e.abort();if(Bo(e.destroy))return e.destroy();n(l||new Error("stream was destroyed"))}}},W_=function(e){e()},mT=function(e,t){return e.pipe(t)},gT=function(){var e=Array.prototype.slice.call(arguments),t=Bo(e[e.length-1]||fn)&&e.pop()||fn;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(o,i){var l=i<e.length-1,f=i>0;return hT(o,l,f,function(c){r||(r=c),c&&n.forEach(W_),!l&&(n.forEach(W_),t(r))})});return e.reduce(mT)};U_.exports=gT});var hw=x((XD,pw)=>{a();s();var HT=Object.prototype.toString;pw.exports=function(e){return HT.call(e)==="[object Function]"}});var gw=x((eN,mw)=>{a();s();mw.exports=typeof setImmediate=="function"?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}});var yw=x((nN,ww)=>{a();s();var KT=hw(),_w=gw();ww.exports=function(e){if(!KT(e.then))throw new TypeError("Expected a promise");return function(t){e.then(function(r){_w(t,null,r)},function(r){_w(t,r)})}}});a();s();a();s();globalThis.setupSentry=async()=>await bl();globalThis.sentry=j;globalThis.Sentry=j;globalThis.setupSentry();a();s();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function t(m,g){for(var y=0;y<g.length;y++){var E=g[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}function r(m,g,y){return g&&t(m.prototype,g),y&&t(m,y),m}function n(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),g&&i(m,g)}function o(m){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},o(m)}function i(m,g){return i=Object.setPrototypeOf||function(E,Z){return E.__proto__=Z,E},i(m,g)}function l(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function f(m,g){return g&&(typeof g=="object"||typeof g=="function")?g:l(m)}function c(m,g){for(;!Object.prototype.hasOwnProperty.call(m,g)&&(m=o(m),m!==null););return m}function d(m,g,y){return typeof Reflect<"u"&&Reflect.get?d=Reflect.get:d=function(Z,Q,oe){var Re=c(Z,Q);if(!!Re){var se=Object.getOwnPropertyDescriptor(Re,Q);return se.get?se.get.call(oe):se.value}},d(m,g,y||m)}var S=function(){function m(){e(this,m),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(m,[{key:"addEventListener",value:function(y,E){y in this.listeners||(this.listeners[y]=[]),this.listeners[y].push(E)}},{key:"removeEventListener",value:function(y,E){if(y in this.listeners){for(var Z=this.listeners[y],Q=0,oe=Z.length;Q<oe;Q++)if(Z[Q]===E){Z.splice(Q,1);return}}}},{key:"dispatchEvent",value:function(y){var E=this;if(y.type in this.listeners){for(var Z=function(wt){setTimeout(function(){return wt.call(E,y)})},Q=this.listeners[y.type],oe=0,Re=Q.length;oe<Re;oe++)Z(Q[oe]);return!y.defaultPrevented}}}]),m}(),b=function(m){n(g,m);function g(){var y;return e(this,g),y=f(this,o(g).call(this)),y.listeners||S.call(l(y)),Object.defineProperty(l(y),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(y),"onabort",{value:null,writable:!0,configurable:!0}),y}return r(g,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(E){E.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,E)),d(o(g.prototype),"dispatchEvent",this).call(this,E)}}]),g}(S),C=function(){function m(){e(this,m),Object.defineProperty(this,"signal",{value:new b,writable:!0,configurable:!0})}return r(m,[{key:"abort",value:function(){var y;try{y=new Event("abort")}catch{typeof document<"u"?document.createEvent?(y=document.createEvent("Event"),y.initEvent("abort",!1,!1)):(y=document.createEventObject(),y.type="abort"):y={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(y)}},{key:"toString",value:function(){return"[object AbortController]"}}]),m}();typeof Symbol<"u"&&Symbol.toStringTag&&(C.prototype[Symbol.toStringTag]="AbortController",b.prototype[Symbol.toStringTag]="AbortSignal");function v(m){return m.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof m.Request=="function"&&!m.Request.prototype.hasOwnProperty("signal")||!m.AbortController}function P(m){typeof m=="function"&&(m={fetch:m});var g=m,y=g.fetch,E=g.Request,Z=E===void 0?y.Request:E,Q=g.AbortController,oe=g.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,Re=oe===void 0?!1:oe;if(!v({fetch:y,Request:Z,AbortController:Q,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:Re}))return{fetch:y,Request:se};var se=Z;(se&&!se.prototype.hasOwnProperty("signal")||Re)&&(se=function(K,F){var xe;F&&F.signal&&(xe=F.signal,delete F.signal);var we=new Z(K,F);return xe&&Object.defineProperty(we,"signal",{writable:!1,enumerable:!1,configurable:!0,value:xe}),we},se.prototype=Z.prototype);var wt=y,ii=function(K,F){var xe=se&&se.prototype.isPrototypeOf(K)?K.signal:F?F.signal:void 0;if(xe){var we;try{we=new DOMException("Aborted","AbortError")}catch{we=new Error("Aborted"),we.name="AbortError"}if(xe.aborted)return Promise.reject(we);var pr=new Promise(function(yt,hr){xe.addEventListener("abort",function(){return hr(we)},{once:!0})});return F&&F.signal&&delete F.signal,Promise.race([pr,wt(K,F)])}return wt(K,F)};return{fetch:ii,Request:se}}(function(m){if(!!v(m)){if(!m.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var g=P(m),y=g.fetch,E=g.Request;m.fetch=y,m.Request=E,Object.defineProperty(m,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:C}),Object.defineProperty(m,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:b})}})(typeof self<"u"?self:globalThis)});it();a();s();var _t=_(Ae()),YS=_(ji()),zS=_(Pm()),cl=_(Ue());a();s();var bg=_(yg()),Sg=_(Ue());var Xr=class extends bg.Duplex{constructor(r){super({objectMode:!0});this.onMessage=r=>{if(u.Buffer.isBuffer(r)){let n=u.Buffer.from(r);this.push(n)}else this.push(r)};this.onDisconnect=()=>{let{lastError:r}=Sg.default.runtime;r&&typeof this.opts.port=="function"?this.init():this.destroy()};this.opts={port:r},this.init()}init(){this.removePortListener(),this.port=typeof this.opts.port=="function"?this.opts.port():this.opts.port,this.port.onMessage.addListener(this.onMessage),this.port.onDisconnect.addListener(this.onDisconnect)}removePortListener(){this.port&&(this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.onDisconnect))}_read(){}_write(r,n,o){try{if(u.Buffer.isBuffer(r)){let i=r.toJSON();i._isBuffer=!0,this.port.postMessage(i)}else this.port.postMessage(r)}catch{return o(new Error("PortDuplexStream - disconnected"))}return o()}};a();s();var Lg=_(Wa()),Wg=_(Ml()),Ug=_(QS());a();s();var VE=_(eC());var Ng=Number.MAX_SAFE_INTEGER,ko=null;function Ro(){return ko===null&&(ko=Math.round(xl.mathRandom()*Ng)),ko%=Ng,ko++}var qa,Ao,Io=!1,Fa,Ua,Ba=class{constructor(t){this.connectionStream=t,this.notificationChannel=new Ug.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(t){this.notificationChannel.removeAllListeners();let r=t instanceof Error?t:new Error(t||"Connection closed");this.requests.forEach(n=>{try{n.callback(r)}catch{}}),this.requests.clear()}async handleResponse(t){let{id:r,result:n,error:o,method:i,params:l}=t,{callback:f}=this.requests.get(r)??{};if(!(i&&l&&r)){if(i&&l&&!r){this.notificationChannel.emit("notification",t);return}if(!!f){if(o){let c=new Lg.EthereumRpcError(o.code,o.message,o.data);c.stack=o.stack,this.requests.delete(r),f(c);return}if(this.requests.delete(r),typeof f=="function")if(typeof n=="object"&&n?.__encryptedData__&&Io){let{__encryptedData__:c,...d}=n,S=await Il(c.text,Ao.privateKey,Fa);f(null,{...d,...JSON.parse(S)})}else f(null,n)}}}};async function $E(e){qa=Ro(),Ao=await Tl();let t=(0,Wg.default)(e),r=await t.syncPubKey({msg:"SYN"});Fa=await kl(r),await t.syncPubKey({msg:"ACK",sourceId:qa,pubKey:await Rl(Ao.publicKey)}),Io=!0}async function YE(e){Io||(Ua||(Ua=$E(e)),await Ua)}var zE=e=>{let t=new Ba(e),r=new Proxy(t,{get:(n,o)=>{if(o!=="then")return n[o]?n[o]:async(...i)=>{let l=i[0];l&&typeof l=="object"&&l.__secretData__&&(Io||await YE(r),l.__encryptedData__={sourceId:qa,text:await Al(JSON.stringify(l.__secretData__),Ao.privateKey,Fa)},delete l.__secretData__);let f=i[i.length-1],c=i.slice(0,-1),d=Ro();n.requests.set(d,{callback:f}),n.connectionStream.write({jsonrpc:"2.0",method:o,params:c,id:d})}}});return r},Mo=zE;a();s();it();var q_=_(L_()),B_=_(ds());function Fo(e){let t=new q_.default;return(0,B_.default)(e,t,e,r=>{r&&ot()}),t}a();s();a();s();a();s();var F_=360;it();var H=_(Ue());a();s();var ps=_(Ue());async function j_(e){return"getContexts"in ps.default.runtime?(await ps.default.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"],documentUrls:[e]})).length>0:(await clients.matchAll()).some(r=>r.url.includes(chrome.runtime.id))}var dn=class{reload(){H.default.runtime.reload()}openTab(t){return new Promise((r,n)=>{H.default.tabs.create(t).then(o=>{let i=Ee();return i?n(i):r(o)}).catch(o=>{n(o)})})}openWindow(t){return new Promise((r,n)=>{H.default.windows.create(t).then(o=>{let i=Ee();return i?n(i):(this.lastOkPopupId=o.id,r(o))}).catch(o=>{n(o)})})}closeWindow(t){return new Promise((r,n)=>{H.default.windows.remove(t).then(()=>{let o=Ee();return o?n(o):r()}).catch(o=>{n(o)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(t=>{t.some(r=>r.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(()=>{})}async focusCurrentWindow(){let r=(await this.currentTab())?.windowId;await this.focusWindow(r)}focusWindow(t){return new Promise((r,n)=>{H.default.windows.update(t,{focused:!0}).then(()=>{let o=Ee();return o?n(o):r()}).catch(o=>{n(o)})})}updateWindowPosition(t,r,n){return new Promise((o,i)=>{H.default.windows.update(t,{left:r,top:n}).then(()=>{let l=Ee();return l?i(l):o()}).catch(l=>{i(l)})})}getLastFocusedWindow(t){return new Promise((r,n)=>{H.default.windows.getLastFocused(t).then(o=>{let i=Ee();return i?n(i):r(o)}).catch(o=>{n(o)})})}closeCurrentWindow(){return H.default?.windows?.getCurrent?H.default.windows.getCurrent().then(t=>H.default.windows.remove(t.id)):Promise.resolve()}getVersion(){return H.default.runtime.getManifest().version}openExtensionInBrowser(t=null,r=null){let n=H.default.runtime.getURL("/home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`),this.openTab({url:n}),ye()!==di&&window.close()}async openExtensionInPopup(t=null,r=null,n=!0){let o=H.default.runtime.getURL("/notification.html");r&&(o+=`?${r}`),t&&(o+=`#${t}`);let i=0,l=0,c=(await Wl())?.width||F_,d=120;try{let S=await this.getLastFocusedWindow();l=S.top,i=Math.max(S.left+(S.width-c)-d,0)}catch{let{screenX:b,screenY:C,outerWidth:v}=window;l=Math.max(C,0),i=Math.max(b+(v-c)-d,0)}this.openWindow({url:o,type:"popup",width:c,height:700,top:l,left:i}),ye()!==di&&n&&window.close()}getPlatformInfo(){return new Promise((t,r)=>{try{H.default.runtime.getPlatformInfo().then(n=>{t(n)}).catch(n=>{r(n)})}catch(n){r(n)}})}getAllWindows(){return new Promise((t,r)=>{H.default.windows.getAll().then(n=>{let o=Ee();return o?r(o):t(n)}).catch(n=>{r(n)})})}getActiveTabs(){return new Promise((t,r)=>{H.default.tabs.query({active:!0}).then(n=>{let o=Ee();return o?r(o):t(n)}).catch(n=>{r(n)})})}currentTab(){return new Promise((t,r)=>{H.default.tabs.getCurrent().then(n=>{let o=Ee();o?r(o):t(n)}).catch(n=>{r(n)})})}closeTab(t){return new Promise((r,n)=>{H.default.tabs.remove(t).then(()=>{let o=Ee();o?n(o):r()}).catch(o=>{n(o)})})}getCpuInfoName(){return new Promise((t,r)=>{try{H.default.system.cpu.getInfo(n=>{t(n.modelName)})}catch(n){r(n)}})}setPanelBehavior(t){return new Promise((r,n)=>{try{chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:t}),r()}catch(o){n(o)}})}setSidepanelPath(t){return new Promise((r,n)=>{t?chrome.sidePanel.setOptions({path:t},()=>{r()}):n()})}openSidepanelWithWindowId(t){return new Promise((r,n)=>{t?chrome.sidePanel.open({windowId:t},()=>{r()}):n()})}async openSidepanel(t){let n=(await this.getLastFocusedWindow())?.id;t&&await this.setSidepanelPath(`sidepanel.html#${t}`),await this.openSidepanelWithWindowId(n),t&&await this.setSidepanelPath("sidepanel-init.html")}async createOffscreen(t=!1){let r="offscreen.html",n=chrome.runtime.getURL(r);if(!(await j_(n)&&!t))if(this.creatingOffscreen)await this.creatingOffscreen;else{try{await H.default.offscreen.closeDocument()}catch{ot()}this.creatingOffscreen=H.default.offscreen.createDocument({url:r,reasons:["DOM_SCRAPING"],justification:""}),await this.creatingOffscreen,this.creatingOffscreen=null}}};var cn=dn;a();s();var V_=_(Ue());a();s();var H_="okx_bg_alive",jo={SILENT:5e3,COUNTDOWN:10};var pn=!1,Mt=null,et=null,hn=null,mn=null;function hs(){if(!!et){try{hn&&et.removeEventListener(Ct.Event.UPDATE,hn),mn&&et.removeEventListener(Ct.Event.FINISH,mn),et.end()}catch{}et=null,hn=null,mn=null}}function _T(){hs(),Mt&&(clearTimeout(Mt),Mt=null);let e=document.getElementById("loading-text");e&&(e.style.display="none");let t=document.getElementById("restart-btn");t&&(t.style.display="none")}function K_(e){return`Loading (${e}s)`}function wT(){return"Reopen OKX Wallet"}function yT(){return"Taking longer than expected to load. You can wait longer or reopen the extension."}function bT(){let e=document.getElementById("loading-text");if(!e)return;e.textContent=yT();let t=document.getElementById("restart-btn");!t||(t.textContent=wT(),t.addEventListener("click",()=>{try{gr({type:"reload_extension_by_user",message:"reload_extension_by_user",error:{}}),setTimeout(()=>{V_.default.runtime.reload()},300)}catch{}}),e.style.display="block",t.style.display="block",gr({type:"backgroundLivenessTimeout",message:"background_sw_heartbeat_timeout_15s",error:{}}))}function ST(){hs();let e=document.getElementById("loading-text");!e||(e.textContent=K_(jo.COUNTDOWN),e.style.display="block",et=new Ct.Relative(jo.COUNTDOWN,Ct.Unit.SECOND),hn=t=>{e.textContent=K_(t.total)},mn=()=>{hs(),pn||bT()},et.addEventListener(Ct.Event.UPDATE,hn),et.addEventListener(Ct.Event.FINISH,mn),et.start())}function $_(){Mt&&(clearTimeout(Mt),Mt=null),Mt=setTimeout(()=>{pn||ST()},jo.SILENT)}function Y_(e){if(pn)return;let t=r=>{r?.method===H_&&(pn||(pn=!0,_T()),e.removeListener("data",t))};e.on("data",t)}a();s();a();s();var GS=_(T());it();var VS=_(rC()),nt=_(Ue());a();s();var z_="SET_ACTIVE_TAB";function ms(e,t){let r={...e??{}};return t.type===z_?t.value:r}function J_(e){return{type:z_,value:e}}a();s();it();var X_=async()=>{try{let{authMap:e,data:t,devid:r,"web-deviceId":n}=await bt.get(["authMap","data","devid","web-deviceId"]),o=mr(t,"TransactionController.transactions");return{authMap:e,evmTransactions:o,devid:r,"web-deviceId":n,firstTimeInfo:t.firstTimeInfo}}catch{return{}}};a();s();a();s();a();s();function Z_(e){return typeof e=="string"?e:typeof e>"u"?"Undefined error":e instanceof DOMException?`Error Name: ${e.name}, Message: ${e.message}, Code: ${e.code}`:`Error Object: ${JSON.stringify(e,["message","arguments","type","name"])}`}var CT=kn({name:"coins",initialState:{coinsMap:{},ready:!1},reducers:{updateCoinsMap(e,t){e.coinsMap=t.payload,e.ready=!0}}}),{actions:vT,reducer:xT}=CT,{updateCoinsMap:ET}=vT;var Q_=()=>async e=>{(await Fl.common_coins).liveQuery().subscribe(async(r,n)=>{if(n)j.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:`subscribe coins error, ${Z_(n)}`}]},level:"error"}),vt().fallbackToAllCoinsMap();else{r.sort((i,l)=>i.rank-l.rank);let o=r.reduce((i,l)=>(i[String(l.coinId)]=l,i),{});e(ET(o))}})},ew=xT;a();s();a();s();function gs(e={},t){let r={shouldClose:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{transitionName:"",type:"",props:{}},accountDetail:{subview:"transactions"},isLoading:!1,warning:null,requestAccountTabs:{},currentWindowTab:{},...e};switch(t?.type){case Xu:return{...r,forgottenPassword:t.value};case ef:return{...r,warning:null};case nf:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case of:return{...r,txId:t.id,warning:null,isLoading:!1};case af:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case sf:return{...r};case Zu:return{...r,warning:t.value||"Incorrect password. Try again."};case Qu:return{...r,warning:""};case lf:return{...r,isLoading:!0,loadingMessage:t.value};case uf:return{...r,isLoading:!1};case tf:return{...r,warning:t.value,isLoading:!1};case rf:return{...r,warning:void 0};case ff:return{...r,requestAccountTabs:t.value};case cf:return{...r,currentWindowTab:t.value};default:return r}}a();s();var PT={mostRecentOverviewPage:be},TT="history",kT=kn({name:TT,initialState:PT,reducers:{pageChanged:(e,t)=>{let r=t.payload;(r===be||r.startsWith(In))&&(e.mostRecentOverviewPage=r)}}}),{actions:RT,reducer:AT}=kT,tw=AT;var{pageChanged:rw}=RT;a();s();a();s();var nw={[Ed]:Pd,[Rd]:Ad,[Td]:kd,[Id]:Md};a();s();var ow={[Od]:Dd};var iw={...ow,...nw};a();s();var IT="metamask/send/OPEN_TO_DROPDOWN",MT="metamask/send/CLOSE_TO_DROPDOWN",OT="metamask/send/UPDATE_SEND_ERRORS",DT="metamask/send/RESET_SEND_STATE",NT="metamask/send/SHOW_GAS_BUTTON_GROUP",LT="metamask/send/HIDE_GAS_BUTTON_GROUP",aw={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function _s(e=aw,t){switch(t.type){case IT:return{...e,toDropdownOpen:!0};case MT:return{...e,toDropdownOpen:!1};case OT:return{...e,errors:{...e.errors,...t.value}};case NT:return{...e,gasButtonGroupShown:!0};case LT:return{...e,gasButtonGroupShown:!1};case DT:return{...aw};default:return e}}a();s();var sw=su({activeTab:ms,metamask:Cd,appState:gs,history:tw,send:_s,nftSend:xd,newDapp:qf,localeMessages:_d,importAccount:gd,coinDetail:Wf,txHistory:qd,approve:Ef,txConfirm:Nd,balanceSlice:vu,currencySlice:Uf,providerSlice:pu,coins:ew,assetsSlice:Sf,Nft:vd,addressBookState:xf,batchTransfer:Nf,batchAddAccount:Pf,batchImportPrivateKey:Cf,bulkRename:Lf,commonSend:gi,walletConfig:Of,businessSend:mi,...iw,activityBanners:vf,keyring:pf,dialog:Bf});function ws(e){return au(sw,e,lu(uu))}var lw=()=>e=>{e(du()),e(Q_()),e(Cu()),e(bf())};a();s();if((process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"||process.env.ASSETS_BUILD_TYPE==="prepub")&&localStorage.getItem("speedUp")){let t=window.setInterval;window.setInterval=function(r,n,...o){let i=n!==void 0&&n>=1e3?n/100:n;return t(r,i,...o)}}a();s();a();s();var lr=window.history,WT=lr.pushState,UT=lr.replaceState,ys=new Event("locationChange");lr.pushState=(...e)=>{let t=WT.apply(lr,e);return window.dispatchEvent(ys),t};lr.replaceState=(...e)=>{let t=UT.apply(lr,e);return window.dispatchEvent(ys),t};window.addEventListener("popstate",()=>{window.dispatchEvent(ys)});function bs(e=""){return e.replace(/^#/,"")}function uw(e){window.addEventListener("locationChange",()=>{e(bs(window.location.hash))})}a();s();var qT=[/^(\/wallet-add\/import-with-seed-phrase-and-private-key)/,/^(\/batch-import-private-key\/edit)/,/^(\/wallet\/mnemonic\/backup)/,/^(\/wallet\/mnemonic-privateKey)/,/^(\/wallet\/account\/privateKey)/,/^(\/reset-password)/];function Ho(e,t=qT){for(let n=0;n<t.length;n++){let o=t[n];if(typeof o=="string"&&e.endsWith(o)||typeof o!="string"&&o.test(e))return!0}return!1}function BT(){let e=ye();return e===En?1:e===Ol?2:e===Pn?3:0}var cw=BT(),Ss="lastPageDetentionTimeParams",dw=Bd(),pt,tt,Cs="";async function FT(){let e=window.localStorage.getItem(Ss);if(window.localStorage.removeItem(Ss),e)try{await _r(JSON.parse(e))}catch{console.log("Failed to report last page detention time")}let t=window.location.hash;t&&t!==be&&(pt=new Date,tt=bs(t))}function fw(){if(!pt||!tt||!Ho(tt))return;let e=new Date,t={s:dw,u:tt,r:Cs,d:e.getTime()-pt.getTime(),p:cw,e:pt.toLocaleString(),l:e.toLocaleString()};window.localStorage.setItem(Ss,JSON.stringify(t))}function jT(e){if(e===be)return;let t=new Date;tt&&pt&&Ho(tt)&&_r({s:dw,u:tt,r:Cs,d:t.getTime()-pt.getTime(),p:cw,e:pt.toLocaleString(),l:t.toLocaleString()}),pt=t,Cs=tt||"",tt=e}uw(jT),FT(),window.addEventListener("beforeunload",fw),window.onblur=fw;a();s();var ce=_(T());var qS=_(Pe());a();s();var le=_(T());var jw=_(Pe()),Hw=_(Ae());a();s();a();s();var bw=_(yw());var GT=e=>{if(e)throw e};function vs(e,t){return(...r)=>{let n=r[r.length-1],o=typeof n=="function",i=o?n:GT;o&&r.pop();let l;try{l=Promise.resolve(e.apply(t,r))}catch(f){l=Promise.reject(f)}(0,bw.default)(l)(i)}}a();s();a();s();var re=_(Ae());function xs(){return{FetchSimpleGet:async(e,t={},r={})=>{try{let n=await Tn(e,t,r);return re.default.debug("[Fetch API] simpleGet success:",{url:e,params:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] simpleGet failed:",{url:e,params:t,config:r,error:n}),n}},FetchSimplePost:async(e,t={},r={})=>{try{let n=await tu(e,t,r);return re.default.debug("[Fetch API] simplePost success:",{url:e,data:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] simplePost failed:",{url:e,data:t,config:r,error:n}),n}},FetchSimpleDelete:async(e,t={},r={})=>{try{let n=await eu(e,t,r);return re.default.debug("[Fetch API] simpleDelete success:",{url:e,params:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] simpleDelete failed:",{url:e,params:t,config:r,error:n}),n}},FetchGet:async(e,t={},r={})=>{try{let n=await Zl(e,t,r);return re.default.debug("[Fetch API] get success:",{url:e,params:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] get failed:",{url:e,params:t,config:r,error:n}),n}},FetchPost:async(e,t={},r={})=>{try{let n=await Ql(e,t,r);return re.default.debug("[Fetch API] post success:",{url:e,data:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] post failed:",{url:e,data:t,config:r,error:n}),n}},FetchUniqGet:async(e,t={},r={})=>{try{let n=await nu(e,t,r);return re.default.debug("[Fetch API] uniqGet success:",{url:e,params:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] uniqGet failed:",{url:e,params:t,config:r,error:n}),n}},FetchUniqPost:async(e,t={},r={})=>{try{let n=await ou(e,t,r);return re.default.debug("[Fetch API] uniqPost success:",{url:e,data:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] uniqPost failed:",{url:e,data:t,config:r,error:n}),n}},FetchGetWithCache:async(e,t={},r={})=>{try{let n=await iu(e,t,r);return re.default.debug("[Fetch API] getWithCache success:",{url:e,params:t,config:r}),n}catch(n){throw re.default.error("[Fetch API] getWithCache failed:",{url:e,params:t,config:r,error:n}),n}}}}a();s();var B=new cn;function Es(){return{platformReload:async()=>B.reload(),platformOpenTab:async e=>B.openTab(e),platformOpenWindow:async e=>B.openWindow(e),platformCloseWindow:async e=>B.closeWindow(e),platformFocusLastOkPopup:async()=>B.focusLastOkPopup(),platformFocusCurrentWindow:async()=>B.focusCurrentWindow(),platformFocusWindow:async e=>B.focusWindow(e),platformUpdateWindowPosition:async(e,t,r)=>B.updateWindowPosition(e,t,r),platformGetLastFocusedWindow:async e=>B.getLastFocusedWindow(e),platformCloseCurrentWindow:async()=>B.closeCurrentWindow(),platformGetVersion:async()=>B.getVersion(),platformOpenExtensionInBrowser:async(e=null,t=null)=>B.openExtensionInBrowser(e,t),platformOpenExtensionInPopup:async(e=null,t=null,r=!0)=>B.openExtensionInPopup(e,t,r),platformGetPlatformInfo:async()=>B.getPlatformInfo(),platformGetAllWindows:async()=>B.getAllWindows(),platformGetActiveTabs:async()=>B.getActiveTabs(),platformCurrentTab:async()=>B.currentTab(),platformCloseTab:async e=>B.closeTab(e),platformGetCpuInfoName:async()=>B.getCpuInfoName(),platformSetPanelBehavior:async e=>B.setPanelBehavior(e),platformSetSidepanelPath:async e=>B.setSidepanelPath(e),platformOpenSidepanelWithWindowId:async e=>B.openSidepanelWithWindowId(e),platformOpenSidepanel:async e=>B.openSidepanel(e),platformCreateOffscreen:async()=>B.createOffscreen()}}a();s();function Ps(){return{windowOpen:async(e,t,r)=>{window.open(e,t,r)},windowClose:async()=>{window.close()}}}a();s();function Ts(){return{passkeyIsSupportPasskey:async()=>ep(),passkeyIsSupportModernAuth:async()=>tp(),passkeyCreatePasskey:async()=>rp(),passkeyVerifyPasskey:async({credential:e,password:t})=>np({credential:e,password:t}),passkeyGetPassword:async e=>op(e),passkeyGetAuthToken:async()=>ip(),passkeyRandomBytes:async(e=64)=>Qd(e)}}a();s();function ks({history:e}){if(!e)throw new Error("history is required for router API");return{routerPush:t=>(e.push(t),!0),routerReplace:t=>(e.replace(t),!0),routerBack:()=>(e.goBack(),!0),routerForward:()=>(e.goForward(),!0)}}a();s();it();a();s();var Sw=["metamask","appState","localeMessages","importAccount","assetsSlice","keyring","dialog"],Cw=["currencies","domainMetadata","createdMap"];function Rs({store:e}){if(!e)throw new Error("store is required for store API");return{getStoreState:()=>e.getState(),getStoreSlice:t=>e.getState()[t],forceUpdateMetamaskState:()=>gf(e.dispatch),ActionCompleteOnboarding:()=>e.dispatch(df())}}function Ko(e){let t=e.getState(),r=vl(t,Sw);return r.metamask&&(r.metamask=ui(r.metamask,Cw)),r.localeMessages=ui(r.localeMessages,["dexCurrent"]),r}a();s();var kw=_(Ae());a();s();var As=class{constructor(){this.callbacks=new Map,this.iframe=null,this.interval=null,this.isConnected=!1,this.initConnection()}initConnection(){let t=document.getElementById("sandbox");!t||(this.setupConnectionListener(),this.startConnectionPolling(t))}setupConnectionListener(){let t=r=>{r.data.status===201&&(window.removeEventListener("message",t),this.interval&&(clearInterval(this.interval),this.interval=null),this.iframe=document.getElementById("sandbox"),this.isConnected=!0)};window.addEventListener("message",t)}startConnectionPolling(t){if(this.interval||this.isConnected||process.env.PLATFORM_SES)return;let r=Wt();this.interval=setInterval(()=>{t.contentWindow&&t.contentWindow.postMessage({status:200,buildType:process.env.ASSETS_BUILD_TYPE,cdn:St(),browser:r},"*")},1e3)}async requestData(t,r={}){return new Promise((n,o)=>{if(!this.isConnected||!this.iframe){o(new Error("[HotCode] Connection not established"));return}let i=l=>{l.data.chanel===t&&(window.removeEventListener("message",i),this.callbacks.delete(t),n(l.data))};this.callbacks.set(t,i),setTimeout(()=>{this.callbacks.has(t)&&(window.removeEventListener("message",i),this.callbacks.delete(t),o(new Error(`[HotCode] Request timeout for channel: ${t}`)))},1e4),window.addEventListener("message",i),this.iframe.contentWindow?.postMessage({chanel:t,data:r},"*")})}destroy(){this.interval&&(clearInterval(this.interval),this.interval=null),this.callbacks.forEach(t=>{window.removeEventListener("message",t)}),this.callbacks.clear(),this.isConnected=!1,this.iframe=null}},ur=new As;async function vw(){try{return(await ur.requestData("passwordSecurity",{...he,location:window.location.href}))?.data}catch{return}}async function xw(e={}){try{let t=await ur.requestData("link",e);if(!t){let r=window.localStorage.getItem("okxWebLink");return r?JSON.parse(r):{}}return window.localStorage.setItem("okxWebLink",JSON.stringify(t.data)),t.data}catch{let r=window.localStorage.getItem("okxWebLink");return r?JSON.parse(r):{}}}async function Ew(e={}){try{return(await ur.requestData("host",e))?.data??D("wallet_common_okx_link")}catch{return D("wallet_common_okx_link")}}async function Pw(e={}){try{return(await ur.requestData("staticDomain",e))?.data??null}catch{return null}}async function Tw(e,t={}){try{return await ur.requestData(e,t)}catch{return null}}window.addEventListener("beforeunload",()=>{ur.destroy()});function Is(){return{requestHotCodeData:async(e,t={})=>{try{switch(e){case"passwordSecurity":return await vw();case"link":return await xw(t);case"host":return await Ew(t);case"staticDomain":return await Pw(t);default:return await Tw(e,t)}}catch(r){return kw.default.error(`Failed to request hotcode data for channel ${e}:`,r),null}}}}a();s();var G=_(Ae());function Ms(){return{webMetaxExtensionOpenShow:e=>{try{return An(e),!0}catch(t){return G.default.error("Failed to call webMetaxExtensionOpenShow:",t),!1}},BiometricsVerificationSecondFailurePopupView:e=>{try{return $u(e),!0}catch(t){return G.default.error("Failed to call BiometricsVerificationSecondFailurePopupView:",t),!1}},BiometricsVerificationSecondFailurePopupButtonClick:e=>{try{return zu(e),!0}catch(t){return G.default.error("Failed to call BiometricsVerificationSecondFailurePopupButtonClick:",t),!1}},webMetaxSettingsWalletSecurityResetPasswordClick:()=>{try{return Ru(),!0}catch(e){return G.default.error("Failed to call webMetaxSettingsWalletSecurityResetPasswordClick:",e),!1}},UnlockWalletTopBiometricsClick:()=>{try{return Wu(),!0}catch(e){return G.default.error("Failed to call UnlockWalletTopBiometricsClick:",e),!1}},UnlockWalletTopPasswordClick:()=>{try{return Ou(),!0}catch(e){return G.default.error("Failed to call UnlockWalletTopPasswordClick:",e),!1}},WalletBiometricsExtensionButtonClick:e=>{try{return Mu(e),!0}catch(t){return G.default.error("Failed to call WalletBiometricsExtensionButtonClick:",t),!1}},PrivateKeyPageMidCompleteCopyClick:()=>{try{return Du(),!0}catch(e){return G.default.error("Failed to call PrivateKeyPageMidCompleteCopyClick:",e),!1}},PrivateKeyPageMidSecureCopyClick:()=>{try{return Lu(),!0}catch(e){return G.default.error("Failed to call PrivateKeyPageMidSecureCopyClick:",e),!1}},PrivateKeyPageMidCompleteCopyCancelClick:()=>{try{return qu(),!0}catch(e){return G.default.error("Failed to call PrivateKeyPageMidCompleteCopyCancelClick:",e),!1}},Web3ExtensionPasswordBtmConfirmClick:()=>{try{return ju(),!0}catch(e){return G.default.error("Failed to call Web3ExtensionPasswordBtmConfirmClick:",e),!1}},webMetaxSettingsWalletSecurityResetWalletClick:()=>{try{return Au(),!0}catch(e){return G.default.error("Failed to call webMetaxSettingsWalletSecurityResetWalletClick:",e),!1}},Web3NewOnboardingSetupPasswordConfirmButtonClick:e=>{try{return Yu(e),!0}catch(t){return G.default.error("Failed to call Web3NewOnboardingSetupPasswordConfirmButtonClick:",t),!1}},Web3NewOnboardingSetupPasswordFullPageView:e=>{try{return Ju(e),!0}catch(t){return G.default.error("Failed to call Web3NewOnboardingSetupPasswordFullPageView:",t),!1}},Web3SettingsBiometricsToggleSwipe:e=>{try{return Vu(e),!0}catch(t){return G.default.error("Failed to call Web3SettingsBiometricsToggleSwipe:",t),!1}},Web3ExtensionOnboardBtmButtonClick:e=>{try{return Bu(e),!0}catch(t){return G.default.error("Failed to call Web3ExtensionOnboardBtmButtonClick:",t),!1}},Web3OnboardingFullPageView:e=>{try{return Fu(e),!0}catch(t){return G.default.error("Failed to call Web3OnboardingFullPageView:",t),!1}},ExtensionSafetySettingFullButtonClick:e=>{try{return Nu(e),!0}catch(t){return G.default.error("Failed to call ExtensionSafetySettingFullButtonClick:",t),!1}},Web3NewOnboardingFirstLandingPageView:e=>{try{return Ku(e),!0}catch(t){return G.default.error("Failed to call Web3NewOnboardingFirstLandingPageView:",t),!1}},Web3NewOnboardingFirstLandingPageButtonClick:e=>{try{return Gu(e),!0}catch(t){return G.default.error("Failed to call Web3NewOnboardingFirstLandingPageButtonClick:",t),!1}}}}a();s();function Os({hooksData:e={}}={}){return{getWalletAsset:()=>e.walletAsset||0,getMoonCatData:()=>({loadingMoonCatData:e.moonCat?.loadingMoonCatData||!1,isMoonCat:e.moonCat?.isMoonCat||!1}),getMoonCatLoading:()=>e.moonCat?.loadingMoonCatData||!1,getIsMoonCat:()=>e.moonCat?.isMoonCat||!1,enableMoonCat:async t=>{if(e.moonCat?.enableMoonCat)return e.moonCat.enableMoonCat(t);throw new Error("enableMoonCat function not available")},disableMoonCat:async t=>{if(e.moonCat?.disableMoonCat)return e.moonCat.disableMoonCat(t);throw new Error("disableMoonCat function not available")},getHooksData:()=>e}}a();s();var Ds=_(Ae());var Rw=new Proxy(globalThis.chrome||globalThis.browser,{get(e,t,r){return t==="storage"?typeof __okxCustomChromeStorage__>"u"?void 0:__okxCustomChromeStorage__:e[t]}});function Ns(){let e={};for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);r&&(e[r]=localStorage.getItem(r))}return e}function VT(){let e={};for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(e[r]=sessionStorage.getItem(r))}return e}function Ls({store:e,history:t}){if(!e)throw new Error("store is required for sync API");return{getInitialSyncData:async()=>{Ds.default.info("getInitialSyncData");let r={};try{Rw?.storage?.local&&(r=await Rw.storage.local.get(["defaultAppDomains","referralCode"]))}catch(o){Ds.default.warn("Failed to get chrome.storage.local data:",o),r={}}return{location:t.location,storeState:Ko(e),localStorage:Ns(),sessionStorage:VT(),chromeStorage:r,cookies:document.cookie,environmentInfo:{userAgent:navigator.userAgent,language:navigator.language,cookieEnabled:navigator.cookieEnabled,url:window.location.href,origin:window.location.origin},timestamp:Date.now()}}}}a();s();var We=_(Ae());function Ws(){return{logPageView:async e=>{try{return await _r(e),!0}catch(t){return We.default.error("Failed to call logPageView:",t),!1}},logPrivateKeyOrMnemonicShow:async e=>{try{return await Hl(e),!0}catch(t){return We.default.error("Failed to call logPrivateKeyOrMnemonicShow:",t),!1}},logPrivateKeyCopy:async e=>{try{return await Kl(e),!0}catch(t){return We.default.error("Failed to call logPrivateKeyCopy:",t),!1}},logDappConnectedHistory:async e=>{try{return await Gl(e),!0}catch(t){return We.default.error("Failed to call logDappConnectedHistory:",t),!1}},logInstalledWalletExtensions:async e=>{try{return await Vl(e),!0}catch(t){return We.default.error("Failed to call logInstalledWalletExtensions:",t),!1}},logPostRate:async e=>{try{return await $l(e),!0}catch(t){return We.default.error("Failed to call logPostRate:",t),!1}},logDappTxHistory:async e=>{try{return await Yl(e),!0}catch(t){return We.default.error("Failed to call logDappTxHistory:",t),!1}},logDappGetChain:async e=>{try{return await zl(e),!0}catch(t){return We.default.error("Failed to call logDappGetChain:",t),!1}},logDappSwitchChain:async e=>{try{return await Jl(e),!0}catch(t){return We.default.error("Failed to call logDappSwitchChain:",t),!1}}}}a();s();var ne=_(Ae());function Us(){return{async captureException(e,t){try{let r=j.captureException(e,t);ne.default.debug("[SentryAPI] captureException called:",{exception:e,captureContext:t,eventId:r})}catch(r){ne.default.error("[SentryAPI] captureException failed:",r)}},async captureEvent(e,t,r){try{let n=j.captureEvent(e,t,r);ne.default.debug("[SentryAPI] captureEvent called:",{event:e,eventHint:t,config:r,eventId:n})}catch(n){ne.default.error("[SentryAPI] captureEvent failed:",n)}},async captureMessage(e,t){try{let r=j.captureMessage(e,t);return ne.default.debug("[SentryAPI] captureMessage called:",{message:e,captureContext:t,eventId:r}),r}catch(r){return ne.default.error("[SentryAPI] captureMessage failed:",r),null}},async setUser(e){try{return j.setUser(e),ne.default.debug("[SentryAPI] setUser called:",e),!0}catch(t){return ne.default.error("[SentryAPI] setUser failed:",t),!1}},async setTag(e,t){try{return j.setTag(e,t),ne.default.debug("[SentryAPI] setTag called:",{key:e,value:t}),!0}catch(r){return ne.default.error("[SentryAPI] setTag failed:",r),!1}},async setTags(e){try{return j.setTags(e),ne.default.debug("[SentryAPI] setTags called:",e),!0}catch(t){return ne.default.error("[SentryAPI] setTags failed:",t),!1}},async setExtra(e,t){try{return j.setExtra(e,t),ne.default.debug("[SentryAPI] setExtra called:",{key:e,extra:t}),!0}catch(r){return ne.default.error("[SentryAPI] setExtra failed:",r),!1}},async init(e,t){try{return j.init(e,t||{}),ne.default.debug("[SentryAPI] init called:",{config:e,configOptions:t}),!0}catch(r){return ne.default.error("[SentryAPI] init failed:",r),!1}}}}a();s();function qs(){return{getLocalStorage:e=>Wd(e),setLocalStorage:(e,t)=>(Ld(e,t),!0),removeLocalStorage:e=>(Ud(e),!0),getLocalStorageKeys:()=>Object.keys(localStorage),getAllLocalStorageData:()=>{let e={};for(let t=0;t<localStorage.length;t++){let r=localStorage.key(t);r&&(e[r]=localStorage.getItem(r))}return e},syncLocalStorage:e=>(Object.entries(e).forEach(([t,r])=>{r===null?localStorage.removeItem(t):localStorage.setItem(t,r)}),!0),getSessionStorage:e=>sessionStorage.getItem(e),setSessionStorage:(e,t)=>(sessionStorage.setItem(e,t),!0),removeSessionStorage:e=>(sessionStorage.removeItem(e),!0),clearSessionStorage:()=>(sessionStorage.clear(),!0),getSessionStorageKeys:()=>Object.keys(sessionStorage),getAllSessionStorageData:()=>{let e={};for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(e[r]=sessionStorage.getItem(r))}return e},syncSessionStorage:e=>(Object.entries(e).forEach(([t,r])=>{r===null?sessionStorage.removeItem(t):sessionStorage.setItem(t,r)}),!0),getChromeStorageLocal:async e=>window.chrome?.storage?.local?window.chrome.storage.local.get(e):{},setChromeStorageLocal:async e=>window.chrome?.storage?.local?(await window.chrome.storage.local.set(e),!0):!1,removeChromeStorageLocal:async e=>window.chrome?.storage?.local?(await window.chrome.storage.local.remove(e),!0):!1,clearChromeStorageLocal:async()=>window.chrome?.storage?.local?(await window.chrome.storage.local.clear(),!0):!1,getAllChromeStorageLocalData:async()=>window.chrome?.storage?.local?window.chrome.storage.local.get(null):{},getCookies:()=>document.cookie,setCookie:e=>(document.cookie=e,!0),syncCookies:e=>Array.isArray(e)?(e.forEach(t=>{t&&typeof t=="string"&&(document.cookie=t)}),!0):!1}}a();s();a();s();var Aw=_(iC());async function Iw(e=""){try{await(0,Aw.default)(e)}catch{}}function Bs(){return{clipboardCopyText:async e=>{await Iw(e||"")}}}function Mw({history:e,store:t,hooksData:r={}}){if(!e)throw new Error("history is required for SES API");if(!t)throw new Error("store is required for SES API");let n=ks({history:e}),o=Rs({store:t}),i=Is(),l=Ms(),f=Os({hooksData:r}),c=Ls({store:t,history:e}),d=Ws(),S=Us(),b=Es(),C=Ps(),v=Ts(),P=xs(),m=qs(),g=Bs(),y={...n,...o,...i,...l,...f,...c,...d,...S,...b,...C,...v,...P,...m,...g};return Object.entries(y).reduce((E,[Z,Q])=>({...E,[Z]:vs(Q,null)}),{})}a();s();var Uw=_(Ae());a();s();var Fs=_(Ae()),Dw=_(Ml()),js=_(ji()),Nw=_(ds());a();s();var gn=_(Wa());var $T=(e,t)=>r=>{if(!t._writableState.ended&&!!r?.method){if(!e[r.method]){let n={jsonrpc:"2.0",error:(0,gn.serializeError)(gn.ethErrors.rpc.methodNotFound({message:`${r.method} not found`}),{shouldIncludeStack:!0}),id:r.id};t.write(n);return}e[r.method](...r.params,(n,o)=>{if(!t._writableState.ended)if(n){let i={jsonrpc:"2.0",error:(0,gn.serializeError)(n,{shouldIncludeStack:!0}),id:r.id};t.write(i)}else{let i={jsonrpc:"2.0",result:o,id:r.id};t.write(i)}})}},Ow=$T;var Hs=null;function Lw(){return Hs}function Ww(e,t){let r=new js.default({name:"ui-ses-iframe",target:"ui-ses",targetWindow:e.contentWindow}),n=Fo(r),o=n.createStream("uiSes-iframe-to-parent"),i=n.createStream("parent-to-uiSes-iframe"),l=n.createStream("controller"),f=Mo(i);Hs=(0,Dw.default)(f),o.on("data",Ow(t,o));let c=new js.default({name:"ui-ses-iframe-component",target:"ui-entry",targetWindow:window});return(0,Nw.default)(c,l,c,S=>{S&&Fs.default.error("Error in iframe postMessage stream",S)}),()=>{try{r.destroy(),c.destroy(),l.destroy(),o.removeAllListeners(),o.destroy(),i.removeAllListeners(),i.destroy(),Hs=null}catch(S){Fs.default.error("Error in cleanup",S)}}}var qw=async(e,t)=>{let r=Lw();if(!r){Uw.default.warn("uiConnection not available");return}await r.routeUpdated({location:e.location,store:Ko(t),localStorage:{...Ns(),theme:Yd()}})};a();s();var Bw=e=>{let t=e.hash||"",r=e.pathname||"",n=e.search||"";return`#${r}${n}${t}`};a();s();var YT=[Wn,Ln,jt,Kn,On,Bn,Dn,yr,Mn,qn,Nn,Un,Fn,jn],Fw=YT;var Kw=()=>{let e=(0,le.useRef)(null),t=(0,le.useRef)(!1),[r,n]=(0,le.useState)(!1),o=(0,le.useRef)({}),i=Df(),l=(0,jw.useHistory)();(0,le.useEffect)(()=>{Hw.default.debug("Update iframe src: ",Bw(l.location)," ===> update SES route and data"),qw(l,i)},[l.location.pathname]);let[{walletAsset:f=0}]=Zd(),{loadingMoonCatData:c,isMoonCat:d,enableMoonCat:S,disableMoonCat:b}=Vn();(0,le.useEffect)(()=>{o.current.walletAsset=f,o.current.moonCat={loadingMoonCatData:c,isMoonCat:d,enableMoonCat:S,disableMoonCat:b}},[f,c,d,S,b]);let C=(0,le.useMemo)(()=>{let{pathname:v}=l.location;return Fw.includes(v)},[l.location.pathname]);return(0,le.useEffect)(()=>{if(C&&!r)return;let v=document.querySelectorAll(".app-loading");v.length>0&&document.getElementById("app").removeChild(v[0]);let P=document.getElementById("ui-ses-iframe-container");P&&(P.style.zIndex=C?"2000":"-2000",P.style.opacity=C?"1":"0")},[C,r]),(0,le.useEffect)(()=>{let v=document.getElementById("ui-ses-iframe");if(!v)return;let P=()=>{n(!0);let g=Mw({history:l,store:i,hooksData:o.current}),y=Ww(v,g);e.current=y,t.current=!0;let E=()=>{v.contentWindow.postMessage({type:"backgroundReady"},"*")};window.addEventListener("backgroundReady",E)},m=g=>{g?.data?.type==="uiSesDOMLoaded"&&P()};return window.SESIframeLoaded?P():window.addEventListener("message",m),()=>{e.current?.(),window.removeEventListener("message",m)}},[]),null};Kw.displayName="IframeRoute";var Gw=(0,le.memo)(Kw);a();s();var $w=_(T());a();s();var _n=_(T());a();s();var Ks={"error-page":"_error-page_1qj8r_1",errorPage:"_error-page_1qj8r_1","error-page-details":"_error-page-details_1qj8r_13",errorPageDetails:"_error-page-details_1qj8r_13"};var zT=({onRetry:e})=>{let t=$n(),r=Ie.State.getImgMap(t),n=`${Yn()}${r[Ie.State.TYPE.noNetwork]}`;return _n.default.createElement("div",{className:Ks.errorPage},_n.default.createElement("div",{className:Ks.errorPageDetails},_n.default.createElement(Ie.State,{type:Ie.State.TYPE.noNetwork,title:D("wallet_extension_tg_empty_title_load_failed"),description:D("wallet_extension_tg_empty_desc_load_failed"),imgSrc:n,renderButton:()=>_n.default.createElement(de,{category:de.CATEGORY.fill,type:de.TYPE.primary,size:de.SIZE.s,onClick:e},D("wallet_extension_tg_empty_btn_load_failed"))})))},Vw=zT;var JT=()=>$w.default.createElement(Vw,{onRetry:()=>{window.location.href=window.location.pathname}}),Yw=JT;a();s();var ke=_(T());var Gs={fetchConfig:{project:"okx_extension_wallet",site:"okx"}};var Vs=0,ZT=1,$s=null;function Jw(){return e=>(Gs.fetchConfig.locale=e.locale,ke.default.createElement(Pl,{localeData:e.localeData,isDev:!0,noRemoteData:!0,fetchConfig:Gs.fetchConfig},e.children))}var QT=Jw(),ek=Jw(),tk=process.env.ASSETS_BUILD_TYPE===qe.DEV||process.env.ASSETS_BUILD_TYPE===qe.DAILY,zw=(0,ke.createContext)(e=>`[${e}]`),Ys=e=>{let t=window.localStorage.getItem("languageKeyMode"),r=tk&&t==="multilingualMode",n=k(Gn),o=bd(n),i=k(wd),l=k(yd),f=(0,ke.useMemo)(()=>(Sd(n,window),$s=$s===Vs?ZT:Vs,Object.keys(i).reduce((c,d)=>{let S=i[d].message;return c[d]=r?`${S}${S}${S}`:S,c},{})),[o,i,r]);return(0,ke.useMemo)(()=>{br.setConfig({frozenScroll:!1,localeProviderProps:{fetchConfig:{noFetch:!0},isDev:!0,localeData:l}})},[n,l]),$s===Vs?ke.default.createElement(QT,{localeData:f,locale:o},ke.default.createElement(zw.Provider,{value:ee},e.children)):ke.default.createElement(ek,{localeData:f,locale:o},ke.default.createElement(zw.Provider,{value:ee},e.children))};a();s();a();s();var Zw=_(T());a();s();function rk(){return{default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"}}function Xw(e){window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${St()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${St()}`,window.okGlobal.cdnDomainMap=rk())}var Qw=()=>{let e=Se("staticDomain");(0,Zw.useLayoutEffect)(()=>{Xw(e)},[e])};function nk(){return Qw(),null}var ey=nk;a();s();a();s();var oy=_(T());a();s();var V=_(T());var ty=_(Fd()),ry=_(Ue());a();s();var ok=e=>V.default.createElement(me,{icon:"okx-wallet-plugin-arrow-small-down",size:me.SIZE.xs,className:(0,ty.default)("error-page__icon",{"okui-accordion-header-icon-expanded":e})}),zs=class extends V.PureComponent{constructor(){super(...arguments);this.state={downloadUrl:!1}}renderErrorDetail(r){return V.default.createElement("li",null,V.default.createElement("p",null,r))}renderErrorStack(r,n){return V.default.createElement("li",null,V.default.createElement("span",null,r),V.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){let{simpleGet:r}=this.props;r(ql.getExtensionVersion).then(({data:n})=>{let o=Wt(),i=ry.default.runtime.getManifest().version;if(o===Dl&&n.edge!==i){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}n.chrome!==i&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(()=>{})}render(){let{error:r,clearDappData:n}=this.props,{downloadUrl:o}=this.state,l=ye()===xn?D("wallet_home_subtitle_errortip_error_popup_message"):D("wallet_home_subtitle_errortip_errorpage_message"),f=$n(),c=Ie.State.getImgMap(f),d=`${Yn()}${c[Ie.State.TYPE.systemError]}`;return V.default.createElement("div",{className:"error-page"},V.default.createElement("div",{className:"error-page__header"},D("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&V.default.createElement(me,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await n(),window.location.href=window.location.pathname}})),V.default.createElement("div",{className:"error-page__details"},V.default.createElement(Ie.State,{type:Ie.State.TYPE.systemError,title:o?D("extension_wallet_mid_text_update_latest_version"):l,imgSrc:d,renderButton:()=>V.default.createElement(V.default.Fragment,null,V.default.createElement("div",null,V.default.createElement(de,{category:de.CATEGORY.fill,type:de.TYPE.primary,size:de.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:o})}},D("extension_wallet_mid_btn_goto_store")," "),V.default.createElement(de,{className:"error-page_button_left",category:de.CATEGORY.fill,type:de.TYPE.primary,size:de.SIZE.s,onClick:()=>{chrome.runtime.reload()}},D("wallet_extension_settings_item_clear_cache")," ")))}),V.default.createElement(Kd,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:ok,title:D("wallet_home_subtitle_errortip_errordetail"),onToggle:S=>{this.setState({expand:S})}}),this.state.expand?V.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(D("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(D("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(D("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(D("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}},ny=zs;var ik=e=>oy.default.createElement(ny,{...e,simpleGet:Tn,clearDappData:()=>vt().clearDappData()}),Js=ik;a();s();var dr=_(T());var LS=_(Pe());var WS=_(Fd());a();s();var ak=document.documentElement,sk={en:"en",zh_CN:"zh-hans",zh_TW:"zh-hant",fr:"fr",ru:"ru",vi:"vi",id:"id",tr:"tr",de:"de",it:"it",pl:"pl",en_IN:"en-in",pt_BR:"pt",pt_PT:"pt-pt",es:"es-es",es_419:"es",cs:"cs",ro:"ro",uk:"uk",ar_EH:"ar"},lk=e=>{ak.setAttribute("lang",sk[e])},iy=lk;a();s();function ay(){Jd(),up()}a();s();var N=_(T());a();s();var Xs=_(T());a();s();var sy=e=>Se("allowShowComponent",{...he,componentName:e,location:window.location.href})?.data;var Go=({children:e,componentName:t})=>sy(t)?Xs.default.createElement(Xs.default.Fragment,null,e):null;a();s();var fr=(e=!1)=>{e?(window.sessionStorage.setItem("showKey","777"),window.sessionStorage.setItem("showKeyMode","2")):(window.sessionStorage.setItem("showKey",null),window.sessionStorage.setItem("showKeyMode",null))};var _e=_(aC());a();s();var Zs={"wallet-helper":"_wallet-helper_4h5lm_1",walletHelper:"_wallet-helper_4h5lm_1","wallet-helper-enter":"_wallet-helper-enter_4h5lm_11",walletHelperEnter:"_wallet-helper-enter_4h5lm_11"};var uk=[{label:_e.default.development_environment,value:"http://forked-test2-cat20.defi.swim.env"},{label:_e.default.pre_environment,value:"https://beta.okex.org"},{label:_e.default.prod_environment,value:"https://wallet.okex.org"}],fk=[{label:_e.default.normalMode,value:"normalMode"},{label:_e.default.keyMode,value:"keyMode"},{label:_e.default.multilingualMode,value:"multilingualMode"}],ck=()=>{let{width:e}=If(document.querySelector("body"))||{},[t,r]=(0,N.useState)("https://beta.okex.org");(0,N.useEffect)(()=>{(async()=>{let P=(await bt.get("envApiDomain"))?.envApiDomain;typeof P=="string"&&r(P)})()},[]);let n=()=>{window.location.reload()},o=window.localStorage,i=o.getItem("languageKeyMode")||"normalMode",l=(0,N.useCallback)(v=>{v==="normalMode"?(o.removeItem("languageKeyMode"),fr(!1)):v==="keyMode"?(o.setItem("languageKeyMode",v),fr(!0)):(o.setItem("languageKeyMode",v),fr(!1)),n()},[i]),f=Rf(),c=()=>{let v=$d()===zn.LIGHT?zn.DARK:zn.LIGHT;zd(v),f()},d=o.getItem("speedUp"),[S,b]=(0,N.useState)(!!d);(0,N.useEffect)(()=>{b(!!d)},[d]);let C=(0,N.useCallback)(()=>{d?(o.removeItem("speedUp"),b(!1)):(o.setItem("speedUp","true"),b(!0)),chrome.runtime.reload()},[d]);return N.default.createElement(Go,{componentName:"walletHelper"},N.default.createElement(Si.Box,{className:Zs["wallet-helper"]},N.default.createElement(Sr,{description:N.default.createElement(Si.Space,{space:"8px"},N.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-slow",tooltip:_e.default.select_language_mode,onClick:()=>{Fe.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:N.default.createElement(Cr,{dataSource:fk,renderItem:({label:v,value:P})=>N.default.createElement(Cr.Cell,{title:v,onClick:()=>{l(P)}},i===P&&N.default.createElement(bi.Circle,{checked:!0}))})})}}),N.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-fast",tooltip:`${_e.default.current_api_environment}${t}`,onClick:()=>{Fe.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:N.default.createElement(Cr,{dataSource:uk,renderItem:({label:v,value:P})=>N.default.createElement(Cr.Cell,{title:v,onClick:async()=>{await bt.set({envApiDomain:P}),n()}},t===P&&N.default.createElement(bi.Circle,{checked:!0}))})})}}),N.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-swap",tooltip:_e.default.switchRtl,onClick:()=>{let P=document.documentElement.getAttribute("dir");Xn(P==="rtl"?"ltr":"rtl")}}),e&&e>360&&N.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-switch",tooltip:_e.default.fullscreenMode,onClick:()=>{let v=document.querySelector("#app");v&&["notification","popup"].includes(v.className)?v.className="fullscreen":v&&(v.className="popup")}}),N.default.createElement(me.IconButton,{style:{color:S?"orange":"unset"},icon:"okx-wallet-plugin-coin-quick-withdraw",tooltip:_e.default.accelerateSetInterval,onClick:C}),N.default.createElement(me.IconButton,{icon:"okx-wallet-plugin-swap-1",tooltip:_e.default.theme,onClick:()=>{c()}})),trigger:Sr.TRIGGER.click,placement:document.documentElement.getAttribute("dir")==="rtl"?Sr.DIRECTION.topLeft:Sr.DIRECTION.topRight,autoHeight:{marginBottom:50},smartMode:!1},N.default.createElement(me,{bordered:!0,size:me.SIZE.lg,className:Zs["wallet-helper-enter"],icon:"okx-wallet-plugin-wrenches"}))))},ly=ck;a();s();var kS=_(T());a();s();var mt=_(T());a();s();var wn=_(T());a();s();var Qs={url:"https://beta.okex.org/pisces",name:"pisces>>"};a();s();var el={noRadius:"_noRadius_e5d59_1",scale:"_scale_e5d59_15"};var uy=()=>wn.default.createElement(Go,{componentName:"EnvAlert"},wn.default.createElement(Gd,{className:el.noRadius,type:"warn",showIcon:!1,title:wn.default.createElement("div",{className:el.scale},`${process.env.ASSETS_BUILD_TYPE}-${process.env.COMMIT_HASH}, API: ${_l()} WSS: ${yl()} STATIC: ${St()}`,wn.default.createElement("a",{href:Qs.url},Qs.name)),closable:!1}));a();s();var Ot=_(T());var Vo=_(Pe());function dk(e){return e}var fy=()=>{let e=k(dk),t=Tf(e),r=(0,Vo.useHistory)(),n=k(Ut),o=k(st),i=k(gp),l=(0,Ot.useRef)(i),c=(0,Vo.useLocation)()?.pathname,d=cp(),S=dp(),b=(0,Ot.useCallback)(()=>{if(n&&o&&![be,ut].includes(c)){let C=t.current,v={permissionsRequestId:hp(C),isNotBackup:fp(Su(C)).isNotBackupWallet,lastOptType:mp(C),unapprovedRequests:d},P=S(v);P&&r.replace(P)}},[c,i,n,o,S]);return(0,Ot.useEffect)(()=>{i!==l.current&&(b(),l.current=i)},[i,b]),(0,Ot.useEffect)(()=>{i&&b()},[]),null};a();s();a();s();var p=_(T());a();s();var py=_(T()),ae=_(oC());var pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hk=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},mk=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),gk=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_k=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},tl=(typeof window>"u"||typeof window>"u"?"undefined":pk(window))==="object",wk=tl?document:{},yk=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],rl=function(e){function t(r){hk(this,t);var n=_k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));if(n.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},n.tId=null,n._handleEvent=function(o){var i=n.state,l=i.remaining,f=i.pageX,c=i.pageY,d=i.idle,S=n.props,b=S.timeout,C=S.onAction,v=S.debounce,P=S.throttle,m=S.stopOnIdle;if(v>0?n.debouncedAction(o):P>0?n.throttledAction(o):C(o),!l){if(o.type==="mousemove"&&(o.pageX===f&&o.pageY===c||o.pageX===void 0&&o.pageY===void 0||n.getElapsedTime()<200))return;clearTimeout(n.tId),n.tId=null,d&&!m&&n.toggleIdleState(o),n.setState({lastActive:+new Date,pageX:o.pageX,pageY:o.pageY}),d&&m||(n.tId=setTimeout(n.toggleIdleState,b))}},r.debounce>0&&r.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return r.debounce>0&&(n.debouncedAction=cy(r.onAction,r.debounce)),r.throttle>0&&(n.throttledAction=dy(r.onAction,r.throttle)),r.startOnMount||(n.state.idle=!0),n.toggleIdleState=n._toggleIdleState.bind(n),n.reset=n._reset.bind(n),n.pause=n._pause.bind(n),n.resume=n._resume.bind(n),n.getRemainingTime=n._getRemainingTime.bind(n),n.getElapsedTime=n._getElapsedTime.bind(n),n.getLastActiveTime=n._getLastActiveTime.bind(n),n.isIdle=n._isIdle.bind(n),n}return gk(t,py.Component),mk(t,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(r){r.debounce!==this.props.debounce&&(this.debouncedAction=cy(this.props.onAction,this.props.debounce)),r.throttle!==this.props.throttle&&(this.throttledAction=dy(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var r=this;if(tl){var n=this.state.eventsBound,o=this.props,i=o.element,l=o.events,f=o.passive,c=o.capture;n||(l.forEach(function(d){i.addEventListener(d,r._handleEvent,{capture:c,passive:f})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var r=this;if(tl){var n=this.props,o=n.element,i=n.events,l=n.passive,f=n.capture;this.state.eventsBound&&(i.forEach(function(c){o.removeEventListener(c,r._handleEvent,{capture:f,passive:l})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(r){var n=this,o=this.state.idle,i=this.props,l=i.onActive,f=i.onIdle,c=i.stopOnIdle;this.setState({idle:!o},function(){o?c||(n._bindEvents(),l(r)):(c&&(clearTimeout(n.tId),n.tId=null,n._unbindEvents()),f(r))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var r=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,r)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var r=this.state,n=r.remaining,o=r.idle;n!==null&&(this._bindEvents(),o||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,n)))}},{key:"_getRemainingTime",value:function(){var r=this.state,n=r.remaining,o=r.idle,i=r.lastActive;if(o)return 0;if(n!==null)return n;var l=this.props.timeout-(+new Date-i);return l<0&&(l=0),l}},{key:"_getElapsedTime",value:function(){var r=this.state.oldDate;return+new Date-r}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),t}();function cy(e,t){var r=void 0;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,o),r=null},t)}}function dy(e,t){var r=0;return function(){var n=new Date().getTime();if(!(n-r<t))return r=n,e.apply(void 0,arguments)}}rl.propTypes={timeout:ae.default.number,events:ae.default.arrayOf(ae.default.string),onIdle:ae.default.func,onActive:ae.default.func,onAction:ae.default.func,debounce:ae.default.number,throttle:ae.default.number,element:ae.default.oneOfType([ae.default.object,ae.default.element]),startOnMount:ae.default.bool,stopOnIdle:ae.default.bool,passive:ae.default.bool,capture:ae.default.bool},rl.defaultProps={timeout:12e5,element:wk,events:yk,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var hy=rl;var fe=_(Pe());a();s();var O=_(T());var ht=_(Pe()),nl=_(Ue());a();s();var my=()=>{let e=Se("lockPage",{...he,location:window.location.href});return e?e.data:null};a();s();var gy=_(T());var _y=()=>{let e=Se("changeLocalStorage",{...he,location:window.location.href});(0,gy.useEffect)(()=>{e&&(e?.data?.windowLocalStorage&&Object.keys(e?.data.windowLocalStorage).forEach(t=>{window.localStorage.setItem(t,e?.data?.windowLocalStorage[t])}),e?.data?.localStorage&&Object.keys(e?.data.localStorage).forEach(t=>{t==="data"||t==="apiDomain"||t==="envApiDomain"||t==="staticDomain"||bt.set({[t]:e?.data?.localStorage[t]})}))},[e])};a();s();var wy=_(T());var yy=()=>{let e=Se("resetExtension",{...he,location:window.location.href});return(0,wy.useMemo)(()=>{if(e){if(!e.data?.needReload)return!1;let r=window.localStorage.getItem("extensionReload");return!r||r!=e?.data.time?e.data.time:!1}return!1},[e])};a();s();var by=_(T());var Sy=()=>{let e=Se("versionExtensionUpdate",{...he,location:window.location.href});return(0,by.useMemo)(()=>{if(e){if(!e.data?.needUpdate)return!1;let r=window.localStorage.getItem("versionExtensionUpdate");if(r&&r===e?.data.version&&!e.data?.repeat)return!1;if(he.version!==e.data.version)return{version:e?.data.version,repeat:e.data?.repeat}}return!1},[e])};a();s();var Cy=_(T()),$o=_(Pe()),Dt=_(Ue());var bk=()=>{let e=(0,$o.useHistory)(),{search:t}=(0,$o.useLocation)(),r=Cp();(0,Cy.useEffect)(()=>{let n=(o,i,l)=>{if(!(o.type===wp&&o.method===yp.notifyRedirect))return;let{redirectSearchParams:c}=o.params,{redirectPathname:d,redirectSearchParams:S}=Sp(c);d&&r(d,{overrideCurrentPath:ut,removeExistingSearchKeys:["redirect_pathname","redirect_search_params"],preserveState:!0,newSearchParams:bp(S)}),l({success:!0,redirected:!0})};return typeof Dt.default<"u"&&Dt.default.runtime?.onMessage?Dt.default.runtime.onMessage.addListener(n):typeof chrome<"u"&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.addListener(n),()=>{typeof Dt.default<"u"&&Dt.default.runtime?.onMessage?Dt.default.runtime.onMessage.removeListener(n):typeof chrome<"u"&&chrome.runtime?.onMessage&&chrome.runtime.onMessage.removeListener(n)}},[e,r,t])},vy=bk;a();s();var xy=[];a();s();it();a();s();var Sk=e=>{if(!Array.isArray(e))return 1;for(let t=0;t<e.length;t++){let r=e[t];if(r.status===3)return 3;if(r.status===2)return 2}return 1},Ck=({supportChainList:e=[],account:t})=>{let r=!1,n={...t?.status7702?.chains||{}},o={},i=Object.keys(n).length,l=e?.length||0;return i!==l&&(r=!0),e?.forEach(({chainIndex:d,status:S})=>{o[d]=S,!r&&n?.[d]!==S&&(r=!0)}),{chainStatusChanged:r,chains:r?o:n}};var vk=(e,t)=>{if(Cl(t)||!Array.isArray(e))return{needUpdate:!1};let{chainStatusChanged:r,chains:n}=Ck({supportChainList:e,account:t}),o=t?.status7702?.status||1;return r&&(o=Sk(e)),{needUpdate:r,status7702:{status:o,chains:n}}},Ey=async e=>{let{address:t,data:r}=e,{chainIndex:n,status:o}=r||{};if(!t||li(n)||li(o))return;let i=await vt().getAccountsByAddressAndChainIndex(t,n);if(Array.isArray(i)&&!i.length)return;let l=i.map(async f=>{let c={...f?.status7702?.chains||{}};c[n]=o;let d=[];Object.keys(c).forEach(C=>{d.push({chainIndex:Number(C),status:c[C],address:t})});let{needUpdate:S,status7702:b}=vk(d,f);if(S){let C=f.walletId;C&&await vt().updateAccountIdentityData(C,{status7702:b})}});await Promise.allSettled(l)};a();s();var Ty=_(T());a();s();var Yo=_(T()),Py=_(Pe());var xk=(e,t=2e3)=>"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:t}):window.setTimeout(e,50),Ek=e=>{"requestIdleCallback"in window?window.cancelIdleCallback(e):window.clearTimeout(e)},zo=({preload:e=[],...t})=>((0,Yo.useEffect)(()=>{if(e.length===0)return;let r=xk(()=>{e.forEach(n=>{typeof n=="function"&&n()})});return()=>{Ek(r)}},[e]),Yo.default.createElement(Py.Route,{...t}));function ky(){return!k(Ut)}var Ry=e=>Ty.default.createElement(zo,{...e});a();s();var Ay=_(T());it();function Jo(e,t){let r=ge(t),n=lt();(0,Ay.useEffect)(()=>{!r||e.includes(r.data.address||mr(r.data,"data.address")||mr(r.data,"data.content.address"))&&n(Bt({data:r.data,channel:t}))},[r,n,e,t])}a();s();var rt=_(T()),My=_(Pe());a();s();var Pk=20,Xo=[];var Tk=(e,t)=>{let r=`${e}_${t}`;Xo.unshift(r),Xo=Xo.slice(0,Pk)},kk=(e,t)=>{let r=`${e}_${t}`;return Xo.includes(r)};function Rk(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toTokenSymbol:i,toAmount:l,isMemeTimeOut:f,chainId:c,fromTokenAddress:d,toTokenAddress:S,exploreUrl:b}=e,C=`/dex-swap/meme/${o==="SOL"?"buy":"sell"}?inputChain=${c}&inputCurrency=${d}&outputChain=${c}&outputCurrency=${S}`;if(f)return{result:{type:"warn",titleKey:"wallet_extension_toast_likely_fail",titleParams:{num:n,token1:o,token2:i},id:`toast-${r}-${t}`,url:C,urlText:"wallet_extension_cta_trade_again"},needHistory:!0};let P={["0"]:{type:"success",titleKey:"wallet_extension_toast_swap_submitted",id:`toast-${r}-${t}`,orderId:r},["1"]:{type:"success",titleKey:"wallet_extension_toast_swap_success",titleParams:{fromCount:n,fromToken:o,toCount:i,toToken:l},id:`toast-${r}-${t}`,url:b,urlText:"wallet_extension_cta_check_details",orderId:r},["-1"]:{type:"error",titleKey:"wallet_extension_toast_swap_failed",titleParams:{num:n,token1:o,token2:i},id:`toast-${r}-${t}`,url:C,urlText:"wallet_extension_cta_trade_again",orderId:r}}[t];return P?{result:P,needHistory:t!=="1"}:null}function Ak(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toAmount:i,toTokenSymbol:l}=e,f={["0"]:{type:"success",titleKey:"swaptrade_extension_feedback_toast_transaction_submitted",id:`toast-${r}-${t}`},["-1"]:{type:"error",titleKey:"swaptrade_extension_feedback_toast_fillup_gas_failed",titleParams:{nativeToken:l},id:`toast-${r}-${t}`},["1"]:{type:"success",titleKey:"swaptrade_extension_feedback_toast_swapped_successfully",titleParams:{payValue:n,paySymbol:o,receiveValue:Rp(i,{fixed:6,wipeTailZero:!0}),receiveSymbol:l},id:`toast-${r}-${t}`}},c=t in f?f[t]:null;return c?{result:c,needHistory:!1}:null}function Ik(e){let{status:t,orderId:r,fromTokenSymbol:n,exploreUrl:o,solanaToast:i}=e,l={["1"]:{type:"success",titleKey:"swaptrade_extension_notif_desc_token_approved",titleParams:{tokenSymbol:n},url:o,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`},["-1"]:{type:"error",titleKey:"swaptrade_extension_notif_desc_token_not_approved",titleParams:{tokenSymbol:n},url:o,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`}},f=t in l?l[t]:null;return f?{result:f,needHistory:!1}:i==="1"?{result:{type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${i}`},needHistory:!1}:null}function Mk(e){let{status:t,orderId:r,fromAmount:n,fromTokenSymbol:o,toAmount:i,toTokenSymbol:l,exploreUrl:f,fromChildOrder:c={},toChainName:d,willNeedManualClaim:S}=e;if(kk(r,t))return null;let b=c?.receiveTokenStatus!=="3",C=null;return t==="0"&&c?.status=="0"?C={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${t}-${r}`,orderId:r}:t==="200"?C={type:"success",titleKey:"wallet_extension_bridge_alert_title_ready_to_claim",id:`toast-${t}-${r}`,orderId:r,hasClaimButton:!0,chainName:d,tokenSymbol:l,buttonText:"commonall_modal_btn_claim",buttonAction:"claim"}:t==="202"?C={type:"error",titleKey:"wallet_extension_bridge_alert_failed_to_claim_please",id:`toast-${t}-${r}`,orderId:r}:t==="1"&&b?S==="1"?C={type:"success",titleKey:"wallet_extension_bridge_alert_youve_successfully_claimed_amt",titleParams:{amt:i,token:l},id:`toast-${t}-${r}`,orderId:r}:C={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_info",titleParams:{fromTokenAmount:n,fromTokenSymbol:o,toTokenAmount:i,toTokenSymbol:l},url:f,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}:t==="-1"&&b?C={type:"error",titleKey:"swaptrade_extension_notif_desc_swap_fail",url:f,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}:t==="-2"&&b&&(C={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_canceled",url:f,urlText:"wallet_transfer_notif_view_on_explorer",id:`toast-${t}-${r}`,orderId:r}),C?(Tk(r,t),{result:C,needHistory:!1}):null}var Iy=e=>{let{dexData:t,type:r}=e;if(!t)return null;let n=null,{type:o,swapTradeType:i,solanaToast:l}=t;return i==="7"?n=Rk(t):o==="gasStation"&&l==="1"?n=Ak(t):o==="approve"&&r==="1"?n=Ik(t):!["approve","register","gasStation"].includes(o)&&(r==="1"||r==="3")&&(n=Mk(t)),n};var Ok=(e,t)=>{let r={...e?.result};return r.desc=null,r.hasClaimButton&&r.chainName&&r.tokenSymbol&&(r.desc=rt.default.createElement(rt.default.Fragment,null,rt.default.createElement("p",{style:{color:"var(--okd-color-content-secondary)"}},D("swaptrade_bridge_alert_desc_successfully_bridged_to_chainname",{chainName:r.chainName,tokenSymbol:r.tokenSymbol})),rt.default.createElement(wi,{style:{marginTop:"8px",fontSize:"12px",lineHeight:"16px",color:"var(--okd-color-content-primary)"},onClick:()=>{t.push(`${Xc}?orderId=${r.orderId}`)}},D("commonall_modal_btn_claim")))),r.url&&r.urlText&&(r.desc=rt.default.createElement(wi,{style:{cursor:"pointer",color:"var(--okd-color-content-primary)",textDecoration:"none",border:"none",background:"none",padding:0},onClick:()=>{if(e?.needHistory){t.push(r.url);return}r.url&&globalThis.platform.openTab({url:r.url})}},rt.default.createElement("span",null,D(r.urlText)))),r},Dk=e=>{let t=e.type;Me[t]({title:D(e.titleKey,e.titleParams),key:e.id,desc:e.desc})};function Oy(){let e=ge("dex-across-order-info"),t=(0,My.useHistory)();(0,rt.useEffect)(()=>{if(!e?.data)return;let r=e.data,n=Iy(r);if(n){let o=Ok(n,t);Dk(o)}},[e,t])}a();s();var Dy=_(T());function Ny(){let e=ge("wallet-nft");(0,Dy.useEffect)(()=>{!e||Me.success({title:D("wallet_transfer_notif_nft_transaction_success"),key:"toast8"})},[e])}a();s();var Ly=_(T());function Wy(){let e=ge("wallet-coin"),t=lt();(0,Ly.useEffect)(()=>{!e||t(Bt())},[e,t])}a();s();var cr={link:"_link_ywwad_1",updateCotainer:"_updateCotainer_ywwad_11",centerImage:"_centerImage_ywwad_14",titleUpdate:"_titleUpdate_ywwad_23",textUpdate:"_textUpdate_ywwad_27",updateMb32:"_updateMb32_ywwad_32"};a();s();a();s();var Uy=(e,t)=>{if(t&&t.includes("{")&&!t.includes("first")){let n=/\{(.+?)\}/gi,o={},i=t.match(n);return i&&i.forEach((l,f)=>{let c=l.replace("{","").replace("}","");o[`${c}`]=e[f]}),o}let r=["first","second","third","fourth"];return e.filter((n,o)=>o in r).reduce((n,o,i)=>(n[r[i]]=o,n),{})};a();s();var ve={first:"first",second:"second",third:"third",fourth:"fourth"},qy={paramNames:[ve.first,ve.second],transform:([e,t])=>({[ve.first]:Ft(e).value,[ve.second]:t})},By={paramNames:["amount","crypto"],transform:([e,t])=>({amount:Ft(e).value,crypto:t})},Nk={paramNames:["num","symbol"],transform:([e,t])=>({num:Ft(e).value,symbol:t})},Fy={paramNames:[ve.first,ve.second,ve.third,ve.fourth],transform:([e,t,r,n])=>({[ve.first]:Ft(e).value,[ve.second]:t,[ve.third]:Ft(r).value,[ve.fourth]:n})},Nt={SEND_SUCCESS:3,SEND_FAILED:9,INSCRIBE_SUCCESS:20,INSCRIBE_FAILED:21,GAS_RETURN:23,SWAP_SUCCESS:7,SWAP_FAILED:11},jy={[Nt.SEND_SUCCESS]:qy,[Nt.SEND_FAILED]:qy,[Nt.INSCRIBE_SUCCESS]:By,[Nt.INSCRIBE_FAILED]:By,[Nt.GAS_RETURN]:Nk,[Nt.SWAP_SUCCESS]:Fy,[Nt.SWAP_FAILED]:Fy};var Lk=(e,t,r)=>{let n=jy[e];return n?n.transform?n.transform(t):n.paramNames.reduce((i,l,f)=>(i[l]=t[f]||"",i),{}):Uy(t,r)},Hy=(e,t)=>{if(!e)return null;let{pushToastCode:r,pushToastParams:n=[]}=e,o=Pu[r];if(!o)return null;let i=Lk(r,n,o);return{title:(t?.translate??ee)(o,i),args:i,messageKey:o}};function Wk({walletId:e,keyringIdentities:t}){let r;if(t.find(l=>(r=l.walletIdentities.find(f=>f.walletId===e),r)),!r)return[];let n=Object.values(r.account),o=r.accountsMap,i=[];return o&&Object.keys(o).forEach(l=>{let f=o[l];Object.keys(f).forEach(c=>{let d=f[c];d.address&&i.push(d.address)})}),[...new Set([...n,...i])]}var Uk=1;function w(e){let{openMoonCat:t=!1}=e,r=k(Ut),n=k(st),o=k(Rn),i=k(gu),l=ge("login"),f=ge("wallet-tx-status-toast"),c=ge("nft-operate"),d=ge("wallet-inform"),S=(0,ht.useHistory)(),b=(0,ht.useLocation)(),[C,v]=(0,O.useState)(null),P=xp(),m=ky();vy();let g=(0,O.useMemo)(()=>Wk({walletId:o,keyringIdentities:i}),[o,i]),{isMoonCat:y,loadingMoonCatData:E}=Vn();(0,O.useEffect)(()=>{if(P){let{initialType:K}=P,{path:F}=e;if(Ep()&&Mf(K)&&!xy.includes(F)){let{location:xe}=e||{},{pathname:we,search:pr=""}=xe||{};setTimeout(()=>{globalThis.platform.openExtensionInPopup(we+pr||"")},200)}}},[P?.initialType]);let Z=my(),Q=yy(),oe=Sy();_y(),(0,O.useEffect)(()=>{Q&&Fe.warn({alignBottom:!1,title:ee("wallet_extension_home_popup_title_update_now"),text:ee("wallet_extension_home_popup_text_update_now"),confirmText:ee("wallet_extension_home_popup_btn_update"),maskClosable:!1,onConfirm:()=>{window.localStorage.setItem("extensionReload",Q),nl.default.runtime.reload()}})},[Q]);let[Re,se]=(0,O.useState)(!1),[wt]=(0,O.useState)(nl.default.runtime.getManifest().version),ii=vp(),ai=Xd({dark:"/cdn/assets/imgs/246/F624BDAD9E2C018D.png",light:"/cdn/assets/imgs/246/234578340DAE2A80.png"});return(0,O.useEffect)(()=>{wt!==oe.version&&!Re&&oe&&Fe.action({mobileWidth:"77.777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,children:O.default.createElement("div",{className:cr.updateMb32},O.default.createElement("div",{className:cr.centerImage},O.default.createElement("img",{src:ai,alt:""})),O.default.createElement("div",{className:cr.titleUpdate},ee("wallet_extension_home_popup_title_update_available")),O.default.createElement("div",{className:cr.textUpdate},ee("wallet_extension_home_popup_text_update_available")),O.default.createElement(yi,{size:yi.SIZE.sm,className:cr.link,onClick:()=>{globalThis.platform.openTab({url:`https://${ii}/help/how-do-i-update-my-okx-wallet-extension-on-google-chrome`})}},ee("wallet_extension_home_popup_link_update_available"))),confirmText:ee("wallet_extension_home_popup_text_ok"),maskClosable:!1,onConfirm:K=>{oe.repeat?se(!0):window.localStorage.setItem("versionExtensionUpdate",oe.version),K.destroy()}})},[Re,oe,wt]),(0,O.useEffect)(()=>{Z&&Fe.warn({alignBottom:!1,maskClosable:!1,title:ee("wallet_extension_clearcache_modaltitle_step_locked"),text:ee("wallet_extension_clearcache_modaldesc_step_locked"),confirmText:ee("wallet_extension_btn_general_gotit"),onConfirm:K=>{K.destroy(),S.go(-1)}})},[Z]),(0,O.useEffect)(()=>{if(r&&n){C&&Array.isArray(C)&&Zn.sendChannel({op:"logout",args:C});let K=g.map(F=>({token:F}));Zn.sendChannel({op:"login",args:K}),v(K)}},[r,n,o]),(0,O.useEffect)(()=>{if(c){let{scene:K,status:F}=c.data;K===21&&F===2&&Me.success({title:ee("extension_home_toast_receivecompleted")})}},[c]),(0,O.useEffect)(()=>{(async()=>{d&&d?.data&&d?.data?.type===Uk&&await Ey(d.data)})()},[d]),(0,O.useEffect)(()=>{if(l){let K=Object.keys(qt).map(F=>({channel:qt[F]}));Zn.sendChannel({op:"subscribe",args:K})}},[l]),(0,O.useEffect)(()=>{let F=S.location.pathname.match(Hn);if(f&&!F){let{data:xe}=f,{pushToastCode:we,pushToastParams:pr=[],txStatus:yt,url:hr,chainIndex:JS,txId:XS,txHash:ZS}=xe,ml=Hy({pushToastCode:we,pushToastParams:pr,txStatus:yt,url:hr});if(!ml)return;Me[Eu[yt]]({title:ml?.title||"",desc:hr?O.default.createElement(Tp,{url:hr,urlText:ee("wallet_transfer_notif_view_on_explorer")}):null}),(yt===3||yt===4)&&Pp({chainId:JS,txId:XS,txHash:ZS,isSuccess:yt===4})}},[f]),Oy(),Jo(g,"wallet-asset"),Jo(g,"invest-DeFi"),Jo(g,"wallet-nft"),Ny(),Wy(),kp(),t&&E?O.default.createElement(O.default.Fragment,null):t&&!E&&y?O.default.createElement(ht.Redirect,{to:{pathname:ut}}):n?m?O.default.createElement(ht.Redirect,{to:{pathname:jt,search:fi(b.search)}}):O.default.createElement(Ry,{...e}):O.default.createElement(ht.Redirect,{to:{pathname:Ht,search:fi(b.search)}})}a();s();var ol=_(T()),Gy=_(Pe());a();s();function Ky(){return!k(st)}function Zo(e){return Ky()?ol.default.createElement(Gy.Redirect,{to:{pathname:Ht}}):ol.default.createElement(zo,{...e})}a();s();var il=_(T());var Qo=_(Pe());function yn(e){return k(st)?il.default.createElement(Qo.Redirect,{to:{pathname:be}}):il.default.createElement(Qo.Route,{...e})}a();s();var al=_(T());a();s();var Vy=()=>import("./dex-42MQ4N3H.js"),$y=h(()=>import("./dex-42MQ4N3H.js"),"Dex"),Ij=h(()=>import("./common-PCACQA4G.js"),"HomePage"),Yy=h(()=>import("./new-home-page-UJU7EX5B.js"),"NewHomePage"),zy=h(()=>import("./wallet-aggregate-ITMCARZZ.js"),"WalletAggregate"),Jy=h(()=>import("./ConnectHardware-D23XNOEG.js"),"ConnectHardware"),Xy=h(()=>import("./WalletMnemonicBackupLandingPage-RBGJIFQI.js"),"WalletMnemonicBackupLandingPage"),Zy=h(()=>import("./WalletList-X4R3VCSQ.js"),"WalletList"),Qy=h(()=>import("./WalletEdit-TMM55QSP.js"),"WalletEdit"),eb=h(()=>import("./WalletBackUp-QP5V54UI.js"),"WalletBackUp"),tb=h(()=>import("./WalletAccountAddress-YDXPH7KG.js"),"WalletAccountAddress"),rb=h(()=>import("./LedgerNetworkManage-ZAKVNZGW.js"),"WalletLedgerNetworkManage"),nb=h(()=>import("./WalletDetail-KLSUAQOI.js"),"WalletDetail"),ob=h(()=>import("./WalletAccountDetail-T5IC2Q5Z.js"),"WalletAccountDetail"),ib=h(()=>import("./Onboard-BGV4635Q.js"),"WelcomePage"),ab=h(()=>import("./InitialCreate-74CKKP7X.js"),"InitialCreateWalletPage"),sb=h(()=>import("./InitialImport-FYX7E6RY.js"),"InitialImportWalletPage"),lb=h(()=>import("./wallet-add-page-OSX4FFM2.js"),"AddWalletSelectTypePage"),ub=h(()=>import("./walletAddImport-JVWBWL5Z.js"),"AddWalletImportWalletPage"),fb=h(()=>import("./Login-3CPKHLXV.js"),"MPCLogin"),cb=h(()=>import("./Import-AZ6IEC4X.js"),"MPCImport"),db=h(()=>import("./show-supported-chains-GGIMZJDH.js"),"ShowSupportedChains"),pb=h(()=>import("./Receive-FWD2UMGW.js"),"Receive"),hb=h(()=>import("./Lock-GJ2UYDWQ.js"),"Lock"),mb=h(()=>import("./ForgetPassword-IVUQLDNG.js"),"OkForgetPassword"),gb=h(()=>import("./select-network-ME3GJDNP.js"),"SelectNetwork"),_b=h(()=>import("./select-coin-DHDIN22H.js"),"SelectCoin"),wb=h(()=>import("./SelectNetwork-V2BM25XI.js"),"SelectNetworkFromCoinCustom"),yb=h(()=>import("./SelectProtocol-XTAE5EXF.js"),"SelectProtocolFromCoinCustom"),bb=h(()=>import("./SendNft-K6WTYRSL.js"),"SendNFT"),Sb=h(()=>import("./SendPageContainer-3UT423KA.js"),"SendPageContainer"),Cb=h(()=>import("./CoinManage-LU7DA5EI.js"),"ManageCoin"),vb=h(()=>import("./CustomCrypto-K2K6BBKH.js"),"CustomCrypto"),xb=h(()=>import("./RecentlyRemovedCoin-L6TEIPPU.js"),"RecentlyRemovedCoin"),Eb=h(()=>import("./Setting-4PEUWK3V.js"),"NewSettings"),Pb=h(()=>import("./Preference-PZNSDQ3A.js"),"NewSettingsGeneral"),Tb=h(()=>import("./WalletSafely-GKXBOSQB.js"),"NewSettingsSecurity"),kb=h(()=>import("./DefaultWallet-Q6BPDV7X.js"),"NewSettingsDefaultWallet"),Rb=h(()=>import("./SwitchRandomPassword-NTMP5JEQ.js"),"SwitchRandomPassword"),Ab=h(()=>import("./AboutWallet-7QG65LJT.js"),"NewSettingsAboutWallet"),Ib=h(()=>import("./WalletHistory-SN3LQOS6.js"),"TxHistory"),Mj=h(()=>import("./coinSearch-NHA2FXWT.js"),"TxHistoryCoinSearch"),Mb=h(()=>import("./TxConfirmEntry-MJAHUQMX.js"),"TxConfirmEntry"),Ob=h(()=>import("./Selector-VX42ZMSG.js"),"ListPanel"),Db=h(()=>import("./ColorPreference-EKYM2RRN.js"),"ColorPreference"),Nb=h(()=>import("./WalletLock-YHGVTEBC.js"),"WalletLock"),Lb=h(()=>import("./RpcMode-3BQOTTPH.js"),"EvmDapp"),Wb=h(()=>import("./DappEntry-4YKZ5PSM.js"),"DappEntry"),Ub=h(()=>import("./DappReady-IS4XCP2B.js"),"DappReady"),qb=h(()=>import("./NetworkManagement-D7RP7HNB.js"),"NetworkManagement"),Bb=h(()=>import("./Form-5AZO6XET.js"),"CustomNetworkForm"),Fb=h(()=>import("./PermissionsConnect-4AFIO2LS.js"),"PermissionsConnect"),jb=h(()=>import("./Detail-JDPUOQD3.js"),"NftInfo"),Hb=h(()=>import("./NftFilter-FHWDHGOF.js"),"NftFilter"),Kb=h(()=>import("./DAppNetworkManage-AALZKNRV.js"),"ConnectSite"),Gb=h(()=>import("./CoinDetail-E6RKHD4P.js"),"CoinDetail"),Vb=h(()=>import("./SelectApyCoin-MPFF5XV4.js"),"SelectApyCoin"),$b=h(()=>import("./address-26JRZ36J.js"),"AddressBook"),Yb=h(()=>import("./ZKSpace-JYP7CV6F.js"),"ZKSpaceRegister"),zb=h(()=>import("./Pi-6TT476XN.js"),"PiRegister"),Jb=h(()=>import("./ZKSyncLite-JKWB5N36.js"),"ZKSyncLiteRegister"),Xb=h(()=>import("./Starknet-KIEWDETU.js"),"StarknetRegister"),Zb=h(()=>import("./CreateAccount-PMLQGTXU.js"),"WaxCreateAccount"),Qb=h(()=>import("./ConfirmPay-BK5ZMHJ3.js"),"WaxCreateAccountConfirm"),eS=h(()=>import("./rpc-mode-RXOLOQLZ.js"),"RpcMode"),tS=h(()=>import("./RiskApprovePage-6GRNNH47.js"),"RiskApprove"),rS=h(()=>import("./ApproveDetailPage-DDS2RTLC.js"),"ApproveDetail"),nS=h(()=>import("./BatchTransfer-IO6BGQKR.js"),"BatchTransfer"),oS=h(()=>import("./Bitcoin-GKZ6AA42.js"),"BtcNft"),iS=h(()=>import("./BatchAddAccount-L6HCCJBQ.js"),"BatchAddAccount"),aS=h(()=>import("./BulkRename-6F533BMQ.js"),"BulkRename"),sS=h(()=>import("./ManageUtxo-OWE7G5UP.js"),"ManageUTXO"),lS=h(()=>import("./CoinInfo-4DCXVW2C.js"),"CoinInfo"),uS=h(()=>import("./DownloadAddresses-HPHWKW4N.js"),"DownloadAddresses"),fS=h(()=>import("./GasTracker-GBE33JTX.js"),"GasTracker"),cS=h(()=>import("./Advanced-MSC2FD5P.js"),"Advanced"),dS=h(()=>import("./WebWidget-ZBPKEQBY.js"),"WebWidget"),pS=h(()=>import("./FeaturePanel-2MENF6SO.js"),"WebWidgetFeaturePanel"),hS=h(()=>import("./RiskExtension-ABEQHN77.js"),"RiskExtension"),mS=h(()=>import("./Upgrade7702Entry-BHVZLR77.js"),"Upgrade7702Entry"),gS=h(()=>import("./Upgrade7702SelectWallet-ZPR66ZG4.js"),"Upgrade7702SelectWalletPage"),_S=h(()=>import("./7702Revoke-GQRLJ6SP.js"),"Revoke7702Approve"),wS=h(()=>import("./route-N6C7EMKJ.js"),"SmartAccountLanding"),yS=h(()=>import("./selectWallet-NS2UY44E.js"),"SmartAccountSelectWalletPage"),bS=h(()=>import("./ReportPage-6ZHTXIX3.js"),"CoinReport"),SS=h(()=>import("./GeneralDapp-G4ZA6TK6.js"),"GeneralDapp"),CS=h(()=>import("./Referral-OFYPHV7T.js"),"Referral"),vS=h(()=>import("./SelectWallet-72NY2H2K.js"),"ReferralSelectWalletPage"),xS=h(()=>import("./MoonCat-XS45G2TA.js"),"MoonCat");var ue=()=>al.default.createElement(al.default.Fragment,null);var ES=({autoLockTimeLimit:e,setLastActiveTime:t})=>{let n=(0,fe.useHistory)().location?.state?.noGuard||{},o=p.default.createElement(p.Suspense,null,p.default.createElement(fe.Switch,null,p.default.createElement(fe.Route,{path:zf,component:Jy}),p.default.createElement(w,{path:Un,component:ue,exact:!0}),p.default.createElement(fe.Route,{path:Fn,component:ue,exact:!0}),p.default.createElement(fe.Route,{path:jn,component:ue,exact:!0}),p.default.createElement(w,{path:yr,guard:!n[yr],component:ue,openMoonCat:!0,exact:!0}),p.default.createElement(w,{path:Wc,component:Xy,exact:!0}),p.default.createElement(w,{path:Mc,component:Zy,exact:!0}),p.default.createElement(w,{path:Oc,component:Qy,exact:!0}),p.default.createElement(w,{path:lc,component:eb,exact:!0,openMoonCat:!0}),p.default.createElement(w,{path:ud,component:Mb,exact:!0}),p.default.createElement(w,{path:Bn,guard:!0,component:ue,exact:!0,openMoonCat:!0}),p.default.createElement(fe.Route,{path:Kn,component:ue,exact:!0}),p.default.createElement(fe.Route,{path:On,component:ue,exact:!0}),p.default.createElement(w,{path:Dn,component:ue}),p.default.createElement(yn,{path:Nn,component:ue,exact:!0}),p.default.createElement(fe.Route,{path:`${nc}/:type`,component:db}),p.default.createElement(w,{path:Dc,component:nb}),p.default.createElement(w,{path:Uc,component:rb}),p.default.createElement(w,{path:Nc,component:ob}),p.default.createElement(w,{path:Lc,component:tb}),p.default.createElement(w,{path:qn,guard:!0,component:ue,openMoonCat:!0}),p.default.createElement(fe.Route,{path:Zc,component:zy}),p.default.createElement(w,{path:Zf,component:pb,exact:!0}),p.default.createElement(fe.Route,{path:Ff,component:hb,exact:!0}),p.default.createElement(yn,{path:Ht,component:ib}),p.default.createElement(yn,{path:tc,component:ab,exact:!0}),p.default.createElement(yn,{path:ec,component:sb,exact:!0}),p.default.createElement(w,{path:Ac,component:lb,exact:!0}),p.default.createElement(w,{path:Ic,component:ub,exact:!0}),p.default.createElement(fe.Route,{path:ed,component:fb,exact:!0}),p.default.createElement(fe.Route,{path:td,component:cb,exact:!0}),p.default.createElement(Zo,{path:jt,exact:!0,component:ue}),p.default.createElement(Zo,{path:Qf,component:mb}),p.default.createElement(w,{path:Mn,component:ue}),p.default.createElement(w,{path:$c,component:eS}),p.default.createElement(w,{path:Yc,component:nS}),p.default.createElement(w,{path:rc,component:gS}),p.default.createElement(w,{path:zc,component:iS}),p.default.createElement(w,{path:Jc,component:aS}),p.default.createElement(w,{path:Yf,component:yb}),p.default.createElement(w,{path:$f,component:wb}),p.default.createElement(w,{path:kc,component:gb}),p.default.createElement(w,{path:Tc,component:_b}),p.default.createElement(w,{path:`${Kf}/:nftPath`,component:bb,exact:!0}),p.default.createElement(w,{path:`${Hf}/:coinId?`,component:Sb}),p.default.createElement(w,{path:oc,component:Cb}),p.default.createElement(w,{path:ic,component:vb}),p.default.createElement(w,{path:ac,component:xb,exact:!0}),p.default.createElement(w,{path:sc,component:Eb}),p.default.createElement(w,{path:uc,component:Pb}),p.default.createElement(w,{path:fc,component:Tb}),p.default.createElement(w,{path:cc,component:kb}),p.default.createElement(w,{path:_c,component:Rb}),p.default.createElement(w,{path:pc,component:Ab}),p.default.createElement(w,{path:dc,component:xS}),p.default.createElement(w,{path:Wn,component:ue}),p.default.createElement(w,{path:Ln,component:ue}),p.default.createElement(w,{path:wc,component:dS}),p.default.createElement(w,{path:yc,component:pS}),p.default.createElement(w,{path:qc,component:Ib,exact:!0}),p.default.createElement(w,{path:hc,component:Ob}),p.default.createElement(w,{path:mc,component:Db}),p.default.createElement(w,{path:gc,component:Nb}),p.default.createElement(w,{path:bc,component:Lb}),p.default.createElement(w,{path:Ec,component:Ub}),p.default.createElement(w,{path:vc,component:Wb}),p.default.createElement(w,{path:xc,component:SS}),p.default.createElement(w,{path:Sc,component:qb}),p.default.createElement(w,{path:Cc,component:Bb}),p.default.createElement(w,{path:`${Gf}/:id`,component:Fb}),p.default.createElement(w,{path:`${Jf}`,component:jb,exact:!0}),p.default.createElement(w,{path:Xf,component:Hb,exact:!0}),p.default.createElement(w,{path:`${Vf}`,component:Kb}),p.default.createElement(w,{path:In,component:Gb,exact:!0}),p.default.createElement(w,{path:Rc,component:Vb,exact:!0}),p.default.createElement(w,{path:rd,component:lS}),p.default.createElement(w,{path:nd,component:uS}),p.default.createElement(w,{path:Bc,component:$b}),p.default.createElement(w,{path:Fc,component:Yb}),p.default.createElement(w,{path:jc,component:zb}),p.default.createElement(w,{path:Hc,component:Jb}),p.default.createElement(w,{path:Kc,component:Xb}),p.default.createElement(w,{path:Gc,component:Zb}),p.default.createElement(w,{path:Vc,component:Qb}),p.default.createElement(w,{path:Pc,component:oS}),p.default.createElement(w,{path:Hn,component:$y}),p.default.createElement(w,{path:Qc,component:sS}),p.default.createElement(w,{path:od,component:fS}),p.default.createElement(w,{path:id,component:cS}),p.default.createElement(w,{path:ad,component:mS}),p.default.createElement(w,{path:sd,component:tS}),p.default.createElement(w,{path:ld,component:rS}),p.default.createElement(w,{path:fd,component:hS}),p.default.createElement(w,{path:cd,component:_S}),p.default.createElement(w,{path:dd,component:wS}),p.default.createElement(w,{path:pd,component:yS}),p.default.createElement(w,{path:jf,component:bS}),p.default.createElement(w,{path:hd,component:CS,exact:!0}),p.default.createElement(w,{path:md,component:vS}),p.default.createElement(w,{path:[be,ut],component:Yy,preload:[Vy]})));return e>0?p.default.createElement(hy,{onAction:t,throttle:1e3},o):o};var PS=ES;var TS=({isLoading:e})=>{let{autoLockTimeLimit:t=0}=k(yu),r=lt();return mt.default.createElement(mt.default.Fragment,null,mt.default.createElement(uy,null),mt.default.createElement(fy,null),mt.default.createElement("div",{className:"main-container-wrapper"},e&&mt.default.createElement(_p,null),mt.default.createElement(PS,{autoLockTimeLimit:t,setLastActiveTime:()=>{r(wf())}})))};var qk=({isLoading:e})=>kS.default.createElement(TS,{isLoading:e}),RS=qk;a();s();var AS=_(T());var IS=()=>{ap(Bl.getCheckCountryLimit,{},{onSuccess(e){if(!e?.data)return;let{limit:t,displayCountryName:r}=e.data.web3??{};t&&Fe.warn({maskClosable:!1,renderFooter:()=>AS.default.createElement("div",null),alignBottom:!1,title:D("wallet_extension_login_title_access_restricted"),text:D("wallet_extension_login_toast_unavailable_inyourregion",{area:r})})}})};a();s();var ei=_(T());var Bk=()=>{let e=(0,ei.useRef)(!1),{walletId:t,platformAssetUSD:r,nftBalanceUSD:n,defiBalanceUSD:o,tokenBalanceUSD:i}=k(Mp),l=Af(t,()=>!0),f=Jn(t);(0,ei.useEffect)(()=>{(async()=>{if(l!==t&&(e.current=!1),r!==Ip&&e.current===!1){let c="";try{c=(await Qn({keyringIdentityType:f?.keyringIdentityType,account:f?.account,serverWalletType:f?.serverWalletType}))?.refCode||""}catch{}Uu({wallet_id:t,coin_balance:i,nft_balance:n,defi_balance:o,platform_coin_balance:r,web3_c_ref:c}),e.current=!0}})()},[t,l,r,n,i,o])},MS=Bk;a();s();var DS=_(T());a();s();var OS=e=>{let t="";try{let r=mu(e),n=hu(e),o=wu(e);t=pp(e)?.metadata?.origin||n[n.length-1]?.origin||n[n.length-1]?.msgParams?.origin||o[o.length-1]?.origin||r[r.length-1]?.origin}catch{}return t};var Fk=()=>{let e=k(Rn),t=k(OS),n=ye()===En,o=Jn(e);(0,DS.useEffect)(()=>{(async()=>{if(e){let i="";try{i=(await Qn({keyringIdentityType:o?.keyringIdentityType,account:o?.account,serverWalletType:o?.serverWalletType}))?.refCode||""}catch{}An({islogin:"yes",isbydapp:n?"yes":"no",dapp_url:Ll?"web3.okx.com/pc":t,wallet_id:e,web3_c_ref:i,smart_account_status:null,web3_ref:await Ap("web_extension_storage_refCode")})}})()},[e])},NS=Fk;Me.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:Me.DIRECTION.top,isInline:!0});var US=()=>{let e=(0,LS.useHistory)(),t=lt();IS(),NS(),MS(),sp();let r=k(b=>b.appState.isLoading),{os:n,browser:o}=k(b=>b.metamask.browserEnvironment)||{},i=k(bu),l=k(_u)?.isoCode||"usd",f=k(Gn),c=process.env.ASSETS_BUILD_TYPE===qe.DEV||process.env.ASSETS_BUILD_TYPE===qe.DAILY,d=()=>{e.listen((b,C)=>{C==="PUSH"&&rw(b.pathname)})},S=()=>{l||t(lp("usd"))};return kf(()=>{d(),ay(),Xn(i),S(),iy(f)}),dr.default.createElement(dr.default.Fragment,null,dr.default.createElement("div",{className:(0,WS.default)("app-content",{[`os-${n}`]:n,[`browser-${o}`]:o})},dr.default.createElement(RS,{isLoading:r})),!!c&&dr.default.createElement(ly,null))};a();s();var sl=class extends ce.PureComponent{constructor(){super(...arguments);this.state={};this.isNetworkError=()=>{let{error:r}=this.state;return r instanceof TypeError&&r.message?.toLocaleLowerCase().match(/failed to fetch/)}}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){j.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;if(r){let o=r&&this.isNetworkError();return ce.default.createElement(hi,{store:n},ce.default.createElement(Ys,null,o?ce.default.createElement(Yw,null):ce.default.createElement(Js,{error:r})))}return ce.default.createElement(hi,{store:n},ce.default.createElement(ey,null),ce.default.createElement(qS.HashRouter,null,ce.default.createElement(_i,null,ce.default.createElement(Gw,null)),ce.default.createElement(Ys,null,ce.default.createElement(_i,null,ce.default.createElement(US,null)))))}},BS=sl;var ri=_(nC());a();s();function FS(){if(Vd.config({top:16}),El.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]}),br.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[br.componentNames.Select]:{bottomSafeSpace:0}}),process.env.ASSETS_BUILD_TYPE===qe.DEV||process.env.ASSETS_BUILD_TYPE===qe.DAILY){let e=window.localStorage.getItem("languageKeyMode");fr(e==="keyMode")}}a();s();function jS(e){let t={accountIdentities:e.accountIdentities,keyringIdentities:e.keyringIdentities,selectedWallet:e.selectedWallet,multiAddressBaseChainsMap:e.multiAddressBaseChainsMap};return delete e.accountIdentities,delete e.keyringIdentities,delete e.selectedWallet,delete e.multiAddressBaseChainsMap,t}a();s();a();s();function jk(){try{document.body.classList.add(jd.WEB3,Hd.CLASSIC)}catch{}}var HS=jk;var ti=null,ni=null,KS=!1,bn=null,ll={current:{},okdCurrent:{},dexCurrent:{},defiCurrent:{}};function Hk(){KS||(FS(),KS=!0)}function Kk(e){window.getCleanAppState=function(){let t=Sl(e.getState());return t.version=globalThis.platform.getVersion(),t.browser=window.navigator.userAgent,t}}async function Gk(){return await wl.setUrlFromLocalAsync(),await gl.setUrlFromLocalAsync(),Promise.allSettled([ku(),Iu(),Hu()])}async function Vk(e){async function t(r){let n=await nt.default.tabs.get(r),{active:o,id:i,title:l,url:f}=n;if(o===!1)return;let{origin:c,protocol:d}=f?new URL(f):{};!c||c==="null"||e.dispatch(J_({id:i,title:l,origin:c,protocol:d,url:f}))}nt.default.tabs.onActivated.addListener(async({tabId:r})=>{await t(r)}),nt.default.tabs.onUpdated.addListener(async(r,n,o)=>{o.windowId===bn&&await t(r)}),nt.default.windows.onFocusChanged.addListener(async r=>{if(r!==nt.default.windows.WINDOW_ID_NONE){bn=r;let n=await nt.default.tabs.query({active:!0,windowId:bn});n?.[0]&&t(n[0].id)}}),nt.default.windows.onCreated.addListener(r=>{bn=r.id}),bn=(await nt.default.windows.getCurrent()).id}async function $k(e){return new Promise((t,r)=>{e.getStateByDomain((n,o)=>{if(n){r(n);return}t(o)})})}async function Yk({metamaskState:e,backgroundConnection:t,opts:r,isFirstRun:n}){let o;if(n){ru(e.currentLocale);let C=await Promise.allSettled([wr(e.currentLocale),wr(e.currentLocale,ri.LOCALE_TYPE.okd),wr(e.currentLocale,ri.LOCALE_TYPE.dex),wr(e.currentLocale,ri.LOCALE_TYPE.defi)]);ll={current:C[0].value,okdCurrent:C[1].value,dexCurrent:C[2].value,defiCurrent:C[3].value},hf(e.currentLocale),o=ll}else o=ll;let i=jS(e),f={...{activeTab:r.activeTab,metamask:e,appState:{},localeMessages:o}},c;n?(c=ws(f),ni=c,Vk(c),c.dispatch(lw())):(c=ni,c.dispatch(pi(e)));let d=cu(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);d.length>0&&c.dispatch(yf({id:d[0].id})),t.onNotification(C=>{switch(C.method){case"sendUpdate":{let v=C.params[0];c.dispatch(pi(v))}break;case"sendPartialUpdate":{let v=C.params[0];c.dispatch(_f(v))}break;case"sendUpdateBalance":{let v=C.params[0];c.dispatch(v?Tu(v):Bt())}break;default:throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(C)}`)}}),mf(i,c.dispatch.bind(c),!1);let b;return ti||(b=document.createElement("div"),b.style.height="100%",b.style.width="100%",b.style.display="flex",b.style.justifyContent="center",b.style.alignItems="center",b.style.overflow="hidden",b.style.position="absolute",r.container.prepend(b)),HS(),ti=ti||(0,VS.createRoot)(b),ti.render(GS.default.createElement(BS,{store:c})),c}async function ul(e,t){try{Hk();let{backgroundConnection:r}=e;xu(r),Xl(r.refreshHttpDNS);let n=await $k(r);fu(n.chainList);let o=!ni;o&&await Gk();let i=await Yk({metamaskState:n,backgroundConnection:r,opts:e,isFirstRun:o});o&&Kk(i),window.dispatchEvent(new CustomEvent("backgroundReady")),t(null,i)}catch(r){ni=null,t(r)}}window.logStateString=async function(e){let t=window.getCleanAppState();try{let r=await globalThis.platform.getPlatformInfo();t.platform=r,delete t.localeMessages;try{t.log=await jl()}catch{t.log=[]}let n=await X_();Object.keys(n).forEach(i=>{t[i]=n[i]});let o=JSON.stringify(t,null,2);e(null,o)}catch(r){e(r)}};a();s();var zk=["popup.html","notification.html","home.html"];navigator.userAgent.includes("Android")&&zk.forEach(e=>{window.location.href.includes(e)&&(window.location.href=window.location.href.replace(e,"fullscreen.html"))});var oi=null,gt=null,Lt=null,dl=!1,$S=0,Sn=null,Jk=si(e=>{j.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!1}}),_t.default.error("initializeUiWithTab error",e)},500),Xk=si(()=>{gr({type:"uiBgConnectionError",message:"uiBgConnectionError",error:{}})},1e3);function Zk(e,t){if(t){j.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!0}}),_t.default.error("initializeUiWithTab error",e);return}Jk(e)}function Qk(e){let t=new zS.default;t.pipe(e).pipe(t),e.on("error",ot),t.on("error",ot)}function eR(e,t){let r=Mo(e);t(null,r)}function fl(){Lt&&gt&&(Lt.removeAllListeners("data"),gt.removeAllListeners("data"),Lt=null)}function tR(e){fl(),gt||(gt=new YS.default({name:"ui-entry",target:"ui-ses-iframe-component",targetWindow:window})),Lt=e;let t=n=>{Lt&&!Lt.destroyed&&Lt.write(n)},r=n=>{gt&&!gt.destroyed&&gt.write(n)};gt.on("data",t),e.on("data",r),e.on("error",ot),e.on("end",()=>{fl()}),e.on("close",()=>{fl()})}function rR(e,t){let r=Fo(e),n=r.createStream("controller");Y_(n),eR(n,t),Qk(r.createStream("provider")),tR(n)}function nR(e,t,r,n){rR(r,(o,i)=>{if(o){n(o);return}ul({activeTab:e,container:t,backgroundConnection:i},n)})}async function oR(e){return new Promise(t=>{if(e!==xn&&e!==Pn){t({});return}cl.default.tabs.query({active:!0,currentWindow:!0}).then(r=>{let[n]=r,{id:o,title:i,url:l}=n,{origin:f,protocol:c}=l?new URL(l):{};if(!f||f==="null"){t({});return}t({id:o,title:i,origin:f,protocol:c,url:l})}).catch(r=>{j.captureException(r,{extra:{PERFORMANCE_ERROR_INIT_UI_QUERY_CURRENT_ACTIVE_TAB:!0}}),_t.default.error("queryCurrentActiveTab error",r),t({})})})}async function pl(e,t,r=!1){let n=await oR(e);Wt()===Nl&&(n.origin="https://web3.okx.com");let o=document.getElementById("app");nR(n,o,t,i=>{if(i){Zk(i,r);return}r&&(_t.default.error("PERFORMANCE_ERROR_INIT_UI_RETRY Retry"),j.captureException("PERFORMANCE_ERROR_INIT_UI_RETRY",{extra:{PERFORMANCE_ERROR_INIT_UI:!0,initFromUI:!0}})),dl=!0})}function iR(){try{globalThis.platform=new cn,oi=ye(),Ul()}catch(e){j.captureException(e,{extra:{PERFORMANCE_ERROR_INIT_UI_INITIALIZE_GLOBAL:!0}}),_t.default.error("initializeGlobal error",e)}}function hl(){try{let e=cl.default.runtime.connect({name:ye()}),t=new Xr(e);return t.once("end",()=>{dl&&Xk();let r=hl();pl(oi,r)}),t}catch(e){throw _t.default.error("setupConnection error",e),e}}function aR(){Sn&&clearInterval(Sn),Sn=setInterval(()=>{if(dl){clearInterval(Sn);return}if($S++,$S>3){clearInterval(Sn);return}let e=hl();pl(oi,e,!0)},30*1e3)}async function sR(){iR(),$_();let e=hl();pl(oi,e),aR()}sR().catch(_t.default.error);
//# sourceMappingURL=ui.js.map


