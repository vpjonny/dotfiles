import{b as ue}from"./chunk-3KJMTMXK.js";import{a as le}from"./chunk-IWYRUFZN.js";import{a as h}from"./chunk-U44ZBWPF.js";import{k as ce}from"./chunk-YLT6ZRGE.js";import{A as ne,B as ie}from"./chunk-NS5EW6UN.js";import{a as I}from"./chunk-MJSLAJV6.js";import{a as me,s as w}from"./chunk-KC2XLVFC.js";import{M as ae,ra as pe}from"./chunk-MJDO2VHF.js";import{Z as l}from"./chunk-3F7OC7N7.js";import{a as te,f as se,g as oe,i as re}from"./chunk-EPDR6VAQ.js";import{k as ee,p as D}from"./chunk-DSNMNSMD.js";import{q as F}from"./chunk-URGJ6D4O.js";import{b}from"./chunk-FLSAETOH.js";import{Aa as R,Q as H,V as Q,g as q}from"./chunk-4C5HF6J2.js";import{f as k,o as m,q as p}from"./chunk-UWURTNRY.js";m();p();var c=k(b());R();m();p();var L=k(b());m();p();R();var M=e=>H(e)||Q(e,0),S=(e,t)=>String(Math.ceil(te(e,t))),d=(e,t)=>re(e,1)?`${ee.ceilShort(e||0,0,!1,0,!1)} ${t}`:I(e||0,{symbol:t}).value;function U({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:a,customGasFee:n,canConfirm:u,onClick:r,onConfirm:i}){return(0,L.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:L.default.createElement(le,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:u,onConfirm:()=>{i({gasType:l.CUSTOM,gasPriceStep:o,gasAmount:a,gasFee:n})}}),[o,a])}m();p();var ge=k(b());function O({feeInfo:e,feeDisplay:t,onClick:o}){return(0,ge.useMemo)(()=>[{typeKey:l.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:l.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:l.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:l.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:l.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:l.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}m();p();function v({coinId:e,symbol:t,decimals:o,currencyId:a,fee:n,displayPrecision:u}){let r=I(n,{symbol:t,useContractPrecision:!0,contractPrecision:{decimals:o},precision:u,useLargeNumberPrecision:!0}).value,i=ce(e,n,{currencyId:a,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${r} ${i}`}function V({coinId:e,fee:t}){let{baseCoin:o}=h(Number(e),!0),a=pe(ae),{currencyId:n}=a,{symbol:u,decimals:r,displayPrecision:i}=o,f=v({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.slow,displayPrecision:i}),g=v({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.fast,displayPrecision:i}),P=v({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.standard,displayPrecision:i}),y=v({coinId:e,symbol:u,decimals:r,currencyId:n,fee:t.custom,displayPrecision:i});return{slow:f,fast:g,standard:P,custom:y}}m();p();var fe=k(b());var Ae={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},$=0,ke=7e3;function z({coinId:e,address:t,value:o="0",inputData:a="",to:n=""}){let[u,r]=(0,fe.useState)(Ae);async function i(){try{if(!e||!t||!a)return;r(G=>({...G,loading:!0,error:!1}));let[f,g]=await Promise.all([ne({coinId:e,from:t,value:o??"0",to:n??""}),ie({coinId:e,from:t,value:o??"0",inputData:a})]),{min:P,normal:y,max:_,feeDemon:s}=f,N={denom:s,gasAmount:g,gasPriceStep:{slow:P,fast:_,standard:y},gasFee:{slow:S(P,g),fast:S(_,g),standard:S(y,g)},error:!1,initLoading:!1,loading:!1};r(N)}catch{r(g=>({...g,error:!0,initLoading:!1,loading:!1}))}}return w(()=>(clearInterval($),i(),$=setInterval(i,ke),()=>{clearInterval($)}),[n,o,a]),u}m();p();var B={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function be({coinId:e,address:t,to:o,inputData:a,visible:n,gasType:u=l.STANDARD,gasPriceStep:r,gasAmount:i,onConfirm:f,onBack:g,onClose:P,onChange:y}){let{baseCoin:_}=h(Number(e),!0),s=z({coinId:e,address:t,to:o,inputData:a}),[N,G]=(0,c.useState)(u),[T,de]=(0,c.useState)(u),[K,ye]=(0,c.useState)(),Fe=(M(r)?void 0:r)||s.gasPriceStep.standard,x=typeof K=="string"?K:Fe,[W,Pe]=(0,c.useState)(),Ce=(M(i)?void 0:i)||s.gasAmount,A=typeof W=="string"?W:Ce,J=se(x,s.gasPriceStep.slow)?D("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",X=oe(A,0)?D("wallet_extension_cosmos_alert_limitmorethan"):"",Se=!J&&!X,Y=S(x,A),Z=V({coinId:e,fee:{...s.gasFee,custom:Y}}),j=me(({gasType:E,gasAmount:_e,gasPriceStep:Ge,gasFee:xe})=>{G(E),de(E),y({gasType:E,gasPriceStep:Ge,gasAmount:_e,gasFee:xe,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),Te=O({feeInfo:s,feeDisplay:Z,onClick:j}),De=U({feeInfo:s,feeDisplay:Z,customGasPriceStep:x,customGasAmount:A,customGasFee:Y,canConfirm:Se,onClick:()=>{G(l.CUSTOM)},onConfirm:j});return w(()=>{T!==l.CUSTOM&&y({gasType:T,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[T],gasFee:s.gasFee[T],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[T,s,o,a]),c.default.createElement(ue,{feeType:N,feeDataList:Te,onBack:g,onClose:P,onChange:q,visible:n,custom:{...De,components:()=>c.default.createElement(c.default.Fragment,null,c.default.createElement(F.Number,{className:B.customGasPriceStep,size:F.SIZE.sm,title:c.default.createElement(c.default.Fragment,null,D("wallet_extension_cosmos_title_gasfee")),value:x,onChange:ye,errorType:F.TIP_TYPE.always,error:J,enableMinus:!1,min:0,precision:_?.decimals??6,suffix:c.default.createElement("span",{className:B.customGasPriceStepDenom},s.denom)}),c.default.createElement(F.Number,{size:F.SIZE.sm,title:D("wallet_extension_cosmos_title_gasamount",{},{useBr:!1}),value:A,onChange:Pe,errorType:F.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:0}))}})}export{be as a};
//# sourceMappingURL=chunk-XFTLA7PH.js.map
