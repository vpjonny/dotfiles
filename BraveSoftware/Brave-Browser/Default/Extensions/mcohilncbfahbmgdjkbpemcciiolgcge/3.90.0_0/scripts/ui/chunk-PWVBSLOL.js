import{D as u}from"./chunk-EPDR6VAQ.js";import{b as p}from"./chunk-EQ34WRCJ.js";import{f as h,o as a,q as g}from"./chunk-UWURTNRY.js";a();g();var d=h(p());var k={},c=class{constructor(r){this.worker=null,this.processing={},this.url=r,this.setUpWorker()}onMessage(r){let{id:s,payload:o,error:n}=r.data,t=this.processing[s];delete this.processing[s];let{resolve:i,reject:w}=t;n?w(n):i(o)}onError(){}setUpWorker(){this.worker||(this.worker=new Worker(this.url),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=this.onError.bind(this))}exec(r,s=void 0){let o=s?.id||u(),n=new Promise((t,i)=>{this.processing[o]={resolve:t,reject:i}});return this.worker?.postMessage({id:o,method:r,args:s}),n}},f=()=>{let e=d.default.runtime.getURL("/worker.js");if(k[e])return k[e];let r=new c(e);return k[e]=r,r};export{f as a};
//# sourceMappingURL=chunk-PWVBSLOL.js.map
