import{a as Xo}from"./chunk-5X4RL4NS.js";import{a as Go}from"./chunk-6RO77YCF.js";import{a as Qo}from"./chunk-DEUTH4MR.js";import{a as Yo}from"./chunk-FH3SFWRL.js";import{a as Ko}from"./chunk-45Q3QYJV.js";import{a as Vo}from"./chunk-5SRO437B.js";import{d as Bo}from"./chunk-DGIOI3MN.js";import{a as Mo,b as Ho,c as _n,d as ie,e as Ro,f as Uo,g as En,h as jo,i as zo,j as Ht}from"./chunk-A7A6G6EG.js";import{a as Lo,c as Fo,d as Oo,g as Wo}from"./chunk-HUZIRVCJ.js";import{a as qo,b as dn}from"./chunk-BDXN3GYH.js";import{f as Do}from"./chunk-AOZHPYH5.js";import{a as Se}from"./chunk-UX2JFEX5.js";import{g as No,i as Eo,j as To}from"./chunk-XHRUTTJG.js";import{d as Co}from"./chunk-AVG63QW4.js";import{a as re,b as xo}from"./chunk-Z4PAXUWP.js";import{a as we}from"./chunk-JHL2WJA4.js";import{a as Ee,c as B}from"./chunk-RQUKPC6Z.js";import{e as rn,f as _o}from"./chunk-GHRGCPR7.js";import{b as yo,c as Me}from"./chunk-NCGPJXQK.js";import{h as Io}from"./chunk-MLF4IONJ.js";import{l as cn}from"./chunk-JYCBCMDP.js";import{b as vo}from"./chunk-GVYIP5Q5.js";import{$a as co,D as ro,K as ao,ba as io,d as to,ea as so,fb as lo,h as no,l as oo}from"./chunk-VHMBEOFX.js";import{a as ko}from"./chunk-GWHLETPD.js";import{G as ln}from"./chunk-CKHT4PIF.js";import{a as he}from"./chunk-YVLQLIW6.js";import{g as po}from"./chunk-7DW2ZPOD.js";import{c as Po}from"./chunk-IPVHRCDK.js";import{d as wo,f as ho,h as Ao,r as So}from"./chunk-WYX7GFOD.js";import{f as uo}from"./chunk-MJSLAJV6.js";import{a as p,d as Nn,f as an,i as We}from"./chunk-KC2XLVFC.js";import{M as eo,qa as sn,ra as wt}from"./chunk-MJDO2VHF.js";import{a as mo}from"./chunk-QF42JCDG.js";import{c as lt}from"./chunk-EAE2NUFS.js";import{B as Jn,a as Xn}from"./chunk-EPDR6VAQ.js";import{h as Ze}from"./chunk-ZIR6OOXX.js";import{c as bo}from"./chunk-3FMJDUGT.js";import{c as be}from"./chunk-2O5TMJZM.js";import{C as on,Lb as $n,Mb as Zn,k as Yn}from"./chunk-EQ34WRCJ.js";import{C as Xe,g as Ye,k as Qn,p as i,w as Bt}from"./chunk-DSNMNSMD.js";import{a as fo}from"./chunk-DOSBJ3L3.js";import{C as go,I as Ne,J as Mt,e as $e,o as ht}from"./chunk-URGJ6D4O.js";import{a as Je}from"./chunk-FVHZWNUE.js";import{C as E,t as te}from"./chunk-XYWWXNVK.js";import{a as Be}from"./chunk-FB3ILH2L.js";import{b as L}from"./chunk-FLSAETOH.js";import{$ as nn,Aa as ge,G as Vn,O as Wt,Q as qn,T as tn,Y as Kn,da as Gn,f as Ce,g as zn}from"./chunk-4C5HF6J2.js";import{f as x,o as l,q as _}from"./chunk-UWURTNRY.js";l();_();var R=x(L());ge();l();_();var Ve=x(L());l();_();var ze={root:"_root_3vjsw_1",topRow:"_topRow_3vjsw_8",avatar:"_avatar_3vjsw_13",title:"_title_3vjsw_20",mainContent:"_mainContent_3vjsw_24",textRows:"_textRows_3vjsw_28",textLine1:"_textLine1_3vjsw_33",textLine2:"_textLine2_3vjsw_37"};l();_();var At=x(L());ge();var Jo=o=>{let[e,t]=(0,At.useState)(!1),n=(0,At.useRef)(null);return(0,At.useEffect)(()=>(n.current=setTimeout(()=>{t(!0)},o),()=>{Wt(n.current)&&clearTimeout(n.current)}),[]),e};var $o=()=>Jo(50)?Ve.default.createElement("div",{className:ze.root},Ve.default.createElement($e.Avatar,{active:!0,size:$e.SIZE.md,className:ze.avatar,shape:"square"}),Ve.default.createElement($e.Input,{active:!0,className:ze.title}),Ve.default.createElement($e.Input,{active:!0,className:ze.mainContent}),Ve.default.createElement("div",{className:ze.textRows},Ve.default.createElement($e.Input,{active:!0,className:ze.textLine1}),Ve.default.createElement($e.Input,{active:!0,className:ze.textLine1}),Ve.default.createElement($e.Input,{active:!0,className:ze.textLine2}))):null;l();_();var O=x(L());var yt=x(Be());ge();l();_();var Zo=x(L());var ye=({fn:o,disabled:e})=>{let[t,n]=(0,Zo.useState)(!1),a=p(async(...s)=>{if(t||e)return null;try{return n(!0),await o(...s)}finally{n(!1)}});return{loading:t,fn:a}};l();_();var un=x(L());l();_();function er(o,e=1){if(!o||typeof o!="number")return!1;let t=Date.now(),n=24*60*60*1e3*e,a=o-t;return a>0&&a<n}var St=({teeStatus:o})=>{let{isCreated:e,isActive:t,expiredTimestamp:n}=o,a=e&&!t,s=(0,un.useMemo)(()=>n?er(n,1):!1,[n]),c=(0,un.useMemo)(()=>n?er(n,2):!1,[n]);return{avatarStatus:(0,un.useMemo)(()=>t?c?1:0:2,[c,t]),withinOneDay:s,withinExpiringDays:c,isOutdated:a,isCreated:e,expiredTimestamp:n}};l();_();var mn=x(L()),tr=x(Be());l();_();var j={"period-sheet":"_period-sheet_1bu04_1",periodSheet:"_period-sheet_1bu04_1",contents:"_contents_1bu04_7",title:"_title_1bu04_10",subtitle:"_subtitle_1bu04_16","options-container":"_options-container_1bu04_23",optionsContainer:"_options-container_1bu04_23","option-row":"_option-row_1bu04_29",optionRow:"_option-row_1bu04_29","option-title":"_option-title_1bu04_39",optionTitle:"_option-title_1bu04_39","enable-util":"_enable-util_1bu04_45",enableUtil:"_enable-util_1bu04_45","enable-util-title":"_enable-util-title_1bu04_51",enableUtilTitle:"_enable-util-title_1bu04_51","enable-util-value":"_enable-util-value_1bu04_57",enableUtilValue:"_enable-util-value_1bu04_57","confirm-btn":"_confirm-btn_1bu04_63",confirmBtn:"_confirm-btn_1bu04_63","active-btn":"_active-btn_1bu04_68",activeBtn:"_active-btn_1bu04_68",cardContainer:"_cardContainer_1bu04_80",selectedIcon:"_selectedIcon_1bu04_85",autoRenewalContainer:"_autoRenewalContainer_1bu04_88",autoRenewalTitle:"_autoRenewalTitle_1bu04_94",infoIcon:"_infoIcon_1bu04_103"};var nr=({label:o,selected:e,value:t,onClick:n})=>mn.default.createElement("div",{className:j["option-row"],onClick:n,"data-testid":`${B.PERIOD_OPTION}-${t}`},mn.default.createElement("p",{className:j["option-title"]},o),e?mn.default.createElement(te,{className:(0,tr.default)("okx-wallet-plugin-check",j.selectedIcon),fontSize:"24px"}):null);var Tn=({visible:o,enableValue:e,expirePeriodOptions:t,shouldShowUpgrade:n,teeStatus:a,needSelectPeriodFirst:s,setEnableValue:c,setVisible:d,onRefresh:m,onEnable:g,onUpgrade:C})=>{let[u,v]=(0,O.useState)(e.expirePeriodDay),[y,N]=(0,O.useState)(null),A=Nn(u),D=Nn(y);(0,O.useEffect)(()=>{!A.current&&e&&v(e.expirePeriodDay),e&&qn(D.current)&&N(e.autoRenew)},[e]),(0,O.useEffect)(()=>{o&&(v(e.expirePeriodDay),N(e.autoRenew))},[o]);let M=(0,O.useMemo)(()=>u?y?i("wallet_extension_account_bttmsheet_desc_auto_renew_days",{num:u}):Xe.formatDateTime(new Date(Date.now()+u*24*60*60*1e3),{format:Ye.SimpleDate}):"",[u,y]),H=p(()=>{u&&c({expirePeriodDay:u,autoRenew:!!y})}),{isOutdated:T}=St({teeStatus:a}),K=p(V=>{oo({web3wallet_smartaccount_renew_days:V})}),{loading:Z,fn:ce}=ye({fn:p(async()=>{if(!!u){if(H(),!s){d(!1);return}K(u),await g({expirePeriodDay:u,autoRenew:!!y}),d(!1)}})}),{loading:Y,fn:U}=ye({fn:p(async()=>{if(!!u){if(H(),!s){d(!1);return}K(u),await m({expirePeriodDay:u,autoRenew:!!y}),d(!1)}})}),{loading:X,fn:$}=ye({fn:p(async()=>{if(!!u){if(H(),!s){d(!1);return}K(u),await C({expirePeriodDay:u,autoRenew:!!y}),d(!1)}})}),ee;n||T?ee=O.default.createElement(E,{className:(0,yt.default)({[j["confirm-btn"]]:!0,[j["active-btn"]]:u}),onClick:$,loading:X,type:E.TYPE.primary,"data-testid":B.PERIOD_CONFIRM_BTN,disabled:!u},i("wallet_extension_btn_general_confirm")):a.isCreated?ee=O.default.createElement(E,{className:(0,yt.default)({[j["confirm-btn"]]:!0,[j["active-btn"]]:u}),onClick:U,type:E.TYPE.primary,loading:Y,"data-testid":B.PERIOD_CONFIRM_BTN,disabled:!u},i("wallet_extension_account_bttmsheet_btn_renew")):ee=O.default.createElement(E,{className:(0,yt.default)({[j["confirm-btn"]]:!0,[j["active-btn"]]:u}),onClick:ce,loading:Z,type:E.TYPE.primary,"data-testid":B.PERIOD_CONFIRM_BTN,disabled:!u},i("wallet_extension_btn_general_confirm"));let G,le;return a.isActive?(G=i("wallet_extension_account_bttmsheet_header_renew_sa"),le=i("wallet_extension_account_bttmsheet_label_renew_to")):(G=i("wallet_extension_account_bttmsheet_header_enable_period"),le=i("wallet_extension_account_bttmsheet_label_enable_until")),O.default.createElement(ht.Action,{visible:o,onClose:()=>{d(!1)},showBackBtn:!1,hideCloseBtn:!1,mobileMode:!0},O.default.createElement("div",{className:j["period-sheet"]},O.default.createElement("div",{className:j.contents},O.default.createElement("p",{className:j.title},G),O.default.createElement("div",{className:(0,yt.default)(j["options-container"],j.cardContainer)},t.map(V=>O.default.createElement(nr,{key:V.value,label:V.label,value:V.value,selected:V.value===u,onClick:()=>{v(V.value)}}))),O.default.createElement("div",{className:(0,yt.default)(j.autoRenewalContainer,j.cardContainer)},O.default.createElement("div",{className:j.autoRenewalTitle},i("wallet_extension_account_bttmsheet_toggle_auto_renewal"),O.default.createElement("div",{className:j.infoIcon,onClick:()=>{let V=ht.tip({infoType:ht.Tip.INFO_TYPE.default,title:i("wallet_extension_account_dialog_title_auto_renewal"),children:O.default.createElement("div",null,i("wallet_extension_account_dialog_desc_auto_renewal")),confirmText:i("wallet_extension_btn_general_ok"),onConfirm:()=>{V.destroy()}})}},O.default.createElement(te,{className:"okx-wallet-plugin-information-circle"}))),O.default.createElement(go,{checked:!!y,onChange:N})),O.default.createElement("div",{className:j["enable-util"]},O.default.createElement("span",{className:j["enable-util-title"]},le),O.default.createElement("span",{className:j["enable-util-value"]},M))),ee))};l();_();var or=({accountId:o,teeId:e})=>(Bo({teeId:e,accountId:o}),null);l();_();var qe=x(L());var rr=(o,e,t)=>{let n=(0,qe.useRef)(!1),a=(0,qe.useMemo)(()=>o?Mo(o):[],[o]),[s,c]=(0,qe.useState)({expirePeriodDay:null,autoRenew:!1});(0,qe.useEffect)(()=>{if(!!o?.defaultExpirePeriodDay){if(!e){c({expirePeriodDay:null,autoRenew:t??o?.defaultAutoRenew??!1});return}n.current||c({expirePeriodDay:e.extendExpirePeriodDay||o.defaultExpirePeriodDay||o.expirePeriodDayList?.[0],autoRenew:t??e.autoRenew??o?.defaultAutoRenew??!1})}},[o,e,t]);let d=(0,qe.useMemo)(()=>{if(!s.expirePeriodDay)return null;let m=e?.teeServiceVersion!==e?.teeNewestVersion;return s.autoRenew&&!m?i("wallet_extension_account_option_auto_renew_days",{num:s.expirePeriodDay}):a.find(g=>g.value===s.expirePeriodDay)?.label??null},[a,s,e]);return{expirePeriodOptions:a,enableValue:s,displayEnableLabel:d,setEnableValue:m=>{n.current=!0,c(m)}}};l();_();var ar=x(fo());var ir=({isFromDex:o,showDelConfirm:e,showWelcome:t,isCreated:n,isCreating:a,isShowPageLoading:s,showUpgradeConfirm:c,upgradeLoading:d,showSelectAccount:m,onUpgradeConfirmBack:g,onDelConfirmBack:C,onSelectAccountBack:u,onClose:v,onBack:y})=>{let D=(0,ar.useHistory)().length>1||e;return{navigatorProps:(()=>{let T;return m?T={closeable:!1,backable:!0,onBack:u}:e?T={closeable:!1,backable:!0,onBack:C}:c?T={closeable:!1,backable:!0,onBack:g}:o||!D?T={backable:!1,closeable:!0,onClose:v,style:{flexDirection:"row-reverse"}}:t||!n?T={backable:!1,closeable:!0,onClose:y,style:{flexDirection:"row-reverse"}}:T={closeable:!1,backable:!0,onBack:y},t||c?{...T,sticky:!0,stickyStyle:{...T.style||{},position:"fixed",backgroundColor:"transparent",zIndex:10},style:{...T.style||{},backgroundColor:"transparent"}}:T})(),hideNavigator:a||s||d}};l();_();var sr=({from:o,actionType:e})=>{let t=o===1 .toString(),n=o===2 .toString(),a=o===4 .toString(),s=t&&e==="enable";return{isFromBanner:a,isFromDex:t,isFromWalletManageCreate:n,isDexEnableAction:s}};l();_();var cr=x(fo());ge();var sa=Jn()===Yn,lr=({isFromDex:o,...e})=>{let t=(0,cr.useHistory)(),n=p(()=>{t.replace({search:Yo(nn(e,"from"))})}),a=p(()=>{t.replace({pathname:mo})}),s=p(()=>{t.goBack()}),c=p(()=>{if(o&&sa){globalThis.platform.closeCurrentWindow();return}s()});return{removeQueryFrom:n,handleExtensionClose:a,handleExtensionBack:s,handlePlatformBack:c}};l();_();var Ke=x(L());ge();l();_();var ca=o=>new Promise(e=>{setTimeout(()=>{e()},o)}),pn=ca;l();_();l();_();var tt=x(L());l();_();var et={"info-dialog":"_info-dialog_wocv6_1",infoDialog:"_info-dialog_wocv6_1","body-content":"_body-content_wocv6_4",bodyContent:"_body-content_wocv6_4",title:"_title_wocv6_7",subtitle:"_subtitle_wocv6_13",footer:"_footer_wocv6_19","confirm-btn":"_confirm-btn_wocv6_24",confirmBtn:"_confirm-btn_wocv6_24","cancel-btn":"_cancel-btn_wocv6_36",cancelBtn:"_cancel-btn_wocv6_36"};var nt=({title:o,subTitle:e,confirmText:t,cancelText:n,onConfirm:a,onCancel:s,...c})=>{let d=ht.show({hideCloseBtn:!0,...c,title:null,subTitle:null,footer:null,isShowHeader:!1,noContentPadding:!0,windowStyle:{backgroundColor:"var(--okd-color-background-surface-primary)"},maskClosable:!1,children:tt.default.createElement("div",{className:et["info-dialog"]},tt.default.createElement("div",{className:et["body-content"]},tt.default.createElement("p",{className:et.title},o),tt.default.createElement("p",{className:et.subtitle},e)),tt.default.createElement("div",{className:et.footer},n?tt.default.createElement("div",{className:et["cancel-btn"],onClick:s},n):null,tt.default.createElement("div",{className:et["confirm-btn"],onClick:()=>{a?.(d)}},t)))});return d};l();_();var _r=x(L());var dr=({accountId:o,supportedChainIndexList:e=[]})=>{let t=Po(o),n=vo({chainId:e},o),{accountMap:a}=t;return(0,_r.useMemo)(()=>n.map(c=>({address:a[c.chain],chainId:c.chainId})).filter(Boolean),[a,n])};l();_();ge();l();_();ge();l();_();var r;function Rt(o){let e=r.__externref_table_alloc();return r.__wbindgen_export_2.set(e,o),e}function xt(o,e){try{return o.apply(this,e)}catch(t){let n=Rt(t);r.__wbindgen_exn_store(n)}}var wr=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&wr.decode();var Ut=null;function jt(){return(Ut===null||Ut.byteLength===0)&&(Ut=new Uint8Array(r.memory.buffer)),Ut}function z(o,e){return o=o>>>0,wr.decode(jt().subarray(o,o+e))}function la(o,e){return o=o>>>0,jt().subarray(o/1,o/1+e)}var h=0,fn=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},_a=typeof fn.encodeInto=="function"?function(o,e){return fn.encodeInto(o,e)}:function(o,e){let t=fn.encode(o);return e.set(t),{read:o.length,written:t.length}};function S(o,e,t){if(t===void 0){let d=fn.encode(o),m=e(d.length,1)>>>0;return jt().subarray(m,m+d.length).set(d),h=d.length,m}let n=o.length,a=e(n,1)>>>0,s=jt(),c=0;for(;c<n;c++){let d=o.charCodeAt(c);if(d>127)break;s[a+c]=d}if(c!==n){c!==0&&(o=o.slice(c)),a=t(a,n,n=c+o.length*3,1)>>>0;let d=jt().subarray(a+c,a+n),m=_a(o,d);c+=m.written,a=t(a,n,c,1)>>>0}return h=c,a}var _t=null;function ur(){return(_t===null||_t.buffer.detached===!0||_t.buffer.detached===void 0&&_t.buffer!==r.memory.buffer)&&(_t=new DataView(r.memory.buffer)),_t}function xe(o){return o==null}function hr(o,e){let t=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h,a=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),s=h,c=r.newHpkeKeyPairFromSeedExtract(t,n,a,s);return qt.__wrap(c)}function Ar(o,e,t,n){let a=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),s=h,c=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),d=h,m=S(t,r.__wbindgen_malloc,r.__wbindgen_realloc),g=h,C=S(n,r.__wbindgen_malloc,r.__wbindgen_realloc),u=h,v=r.hpkeSeal(a,s,c,d,m,g,C,u);return Gt.__wrap(v)}function Sr(o,e,t,n,a){let s=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),c=h,d=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),m=h,g=S(t,r.__wbindgen_malloc,r.__wbindgen_realloc),C=h,u=S(n,r.__wbindgen_malloc,r.__wbindgen_realloc),v=h,y=S(a,r.__wbindgen_malloc,r.__wbindgen_realloc),N=h,A=r.hpkeOpen(s,c,d,m,g,C,u,v,y,N);return Kt.__wrap(A)}function yr(o,e){let t,n;try{let a=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),s=h,c=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),d=h,m=r.rsaPemEncryptChunks(a,s,c,d);return t=m[0],n=m[1],z(m[0],m[1])}finally{r.__wbindgen_free(t,n,1)}}function xr(o,e,t){let n=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=h,s=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=h,d=S(t,r.__wbindgen_malloc,r.__wbindgen_realloc),m=h;return r.rsaPemVerify(n,a,s,c,d,m)!==0}function da(o,e){if(!(o instanceof e))throw new Error(`expected instance of ${e.name}`)}function vr(o,e){let t=S(o,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;da(e,ot);var a=e.__destroy_into_raw();let s=r.parseAndValidateAttestationDoc(t,n,a);return Vt.__wrap(s)}function Ir(o,e,t,n,a,s,c,d){let m=S(n,r.__wbindgen_malloc,r.__wbindgen_realloc),g=h,C=S(a,r.__wbindgen_malloc,r.__wbindgen_realloc),u=h,v=S(s,r.__wbindgen_malloc,r.__wbindgen_realloc),y=h,N=S(c,r.__wbindgen_malloc,r.__wbindgen_realloc),A=h,D=r.argon2id_hash(o,e,t,m,g,C,u,v,y,N,A,d);return zt.__wrap(D)}var mr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_argon2idresult_free(o>>>0,1)),zt=class{static __wrap(e){e=e>>>0;let t=Object.create(zt.prototype);return t.__wbg_ptr=e,mr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,mr.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_argon2idresult_free(e,0)}get succ(){return r.__wbg_get_argon2idresult_succ(this.__wbg_ptr)!==0}set succ(e){r.__wbg_set_argon2idresult_succ(this.__wbg_ptr,e)}get errMsg(){let e,t;try{let n=r.__wbg_get_argon2idresult_errMsg(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set errMsg(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_argon2idresult_errMsg(this.__wbg_ptr,t,n)}get hashHex(){let e,t;try{let n=r.__wbg_get_argon2idresult_hashHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set hashHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_argon2idresult_hashHex(this.__wbg_ptr,t,n)}},pr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_docparsingresult_free(o>>>0,1)),Vt=class{static __wrap(e){e=e>>>0;let t=Object.create(Vt.prototype);return t.__wbg_ptr=e,pr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,pr.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_docparsingresult_free(e,0)}get valid(){return r.__wbg_get_docparsingresult_valid(this.__wbg_ptr)!==0}set valid(e){r.__wbg_set_docparsingresult_valid(this.__wbg_ptr,e)}get pubkeyHex(){let e,t;try{let n=r.__wbg_get_docparsingresult_pubkeyHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set pubkeyHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_docparsingresult_pubkeyHex(this.__wbg_ptr,t,n)}get userDataHex(){let e,t;try{let n=r.__wbg_get_docparsingresult_userDataHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set userDataHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_docparsingresult_userDataHex(this.__wbg_ptr,t,n)}get nonceHex(){let e,t;try{let n=r.__wbg_get_docparsingresult_nonceHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set nonceHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_docparsingresult_nonceHex(this.__wbg_ptr,t,n)}get pcr0Hex(){let e,t;try{let n=r.__wbg_get_docparsingresult_pcr0Hex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set pcr0Hex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_docparsingresult_pcr0Hex(this.__wbg_ptr,t,n)}},fr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_hpkekeypair_free(o>>>0,1)),qt=class{static __wrap(e){e=e>>>0;let t=Object.create(qt.prototype);return t.__wbg_ptr=e,fr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,fr.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_hpkekeypair_free(e,0)}get pkHex(){let e,t;try{let n=r.__wbg_get_hpkekeypair_pkHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set pkHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_pkHex(this.__wbg_ptr,t,n)}get skHex(){let e,t;try{let n=r.__wbg_get_hpkekeypair_skHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set skHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_skHex(this.__wbg_ptr,t,n)}},gr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_hpkeopenresult_free(o>>>0,1)),Kt=class{static __wrap(e){e=e>>>0;let t=Object.create(Kt.prototype);return t.__wbg_ptr=e,gr.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,gr.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_hpkeopenresult_free(e,0)}get succ(){return r.__wbg_get_hpkeopenresult_succ(this.__wbg_ptr)!==0}set succ(e){r.__wbg_set_hpkeopenresult_succ(this.__wbg_ptr,e)}get errMsg(){let e,t;try{let n=r.__wbg_get_hpkeopenresult_errMsg(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set errMsg(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_pkHex(this.__wbg_ptr,t,n)}get plaintextHex(){let e,t;try{let n=r.__wbg_get_hpkeopenresult_plaintextHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set plaintextHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_skHex(this.__wbg_ptr,t,n)}},vs=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_hpkepkresult_free(o>>>0,1));var br=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_hpkesealresult_free(o>>>0,1)),Gt=class{static __wrap(e){e=e>>>0;let t=Object.create(Gt.prototype);return t.__wbg_ptr=e,br.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,br.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_hpkesealresult_free(e,0)}get succ(){return r.__wbg_get_hpkesealresult_succ(this.__wbg_ptr)!==0}set succ(e){r.__wbg_set_hpkesealresult_succ(this.__wbg_ptr,e)}get errMsg(){let e,t;try{let n=r.__wbg_get_hpkesealresult_errMsg(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set errMsg(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_pkHex(this.__wbg_ptr,t,n)}get ciphertextHex(){let e,t;try{let n=r.__wbg_get_hpkesealresult_ciphertextHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set ciphertextHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkekeypair_skHex(this.__wbg_ptr,t,n)}get encapKeyHex(){let e,t;try{let n=r.__wbg_get_hpkesealresult_encapKeyHex(this.__wbg_ptr);return e=n[0],t=n[1],z(n[0],n[1])}finally{r.__wbindgen_free(e,t,1)}}set encapKeyHex(e){let t=S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_hpkesealresult_encapKeyHex(this.__wbg_ptr,t,n)}},Dn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(o=>r.__wbg_jspcrhexes_free(o>>>0,1)),ot=class{static __wrap(e){e=e>>>0;let t=Object.create(ot.prototype);return t.__wbg_ptr=e,Dn.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,Dn.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_jspcrhexes_free(e,0)}get pcr0Hex(){let e=r.__wbg_get_jspcrhexes_pcr0Hex(this.__wbg_ptr),t;return e[0]!==0&&(t=z(e[0],e[1]).slice(),r.__wbindgen_free(e[0],e[1]*1,1)),t}set pcr0Hex(e){var t=xe(e)?0:S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_jspcrhexes_pcr0Hex(this.__wbg_ptr,t,n)}get pcr1Hex(){let e=r.__wbg_get_jspcrhexes_pcr1Hex(this.__wbg_ptr),t;return e[0]!==0&&(t=z(e[0],e[1]).slice(),r.__wbindgen_free(e[0],e[1]*1,1)),t}set pcr1Hex(e){var t=xe(e)?0:S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_jspcrhexes_pcr1Hex(this.__wbg_ptr,t,n)}get pcr2Hex(){let e=r.__wbg_get_jspcrhexes_pcr2Hex(this.__wbg_ptr),t;return e[0]!==0&&(t=z(e[0],e[1]).slice(),r.__wbindgen_free(e[0],e[1]*1,1)),t}set pcr2Hex(e){var t=xe(e)?0:S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_jspcrhexes_pcr2Hex(this.__wbg_ptr,t,n)}get pcr8Hex(){let e=r.__wbg_get_jspcrhexes_pcr8Hex(this.__wbg_ptr),t;return e[0]!==0&&(t=z(e[0],e[1]).slice(),r.__wbindgen_free(e[0],e[1]*1,1)),t}set pcr8Hex(e){var t=xe(e)?0:S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=h;r.__wbg_set_jspcrhexes_pcr8Hex(this.__wbg_ptr,t,n)}constructor(e,t,n,a){var s=xe(e)?0:S(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=h,d=xe(t)?0:S(t,r.__wbindgen_malloc,r.__wbindgen_realloc),m=h,g=xe(n)?0:S(n,r.__wbindgen_malloc,r.__wbindgen_realloc),C=h,u=xe(a)?0:S(a,r.__wbindgen_malloc,r.__wbindgen_realloc),v=h;let y=r.jspcrhexes_new(s,c,d,m,g,C,u,v);return this.__wbg_ptr=y>>>0,Dn.register(this,this.__wbg_ptr,this),this}static empty(){let e=r.jspcrhexes_empty();return ot.__wrap(e)}};async function ua(o,e){if(typeof Response=="function"&&o instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(o,e)}catch(n){if(o.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}let t=await o.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{let t=await WebAssembly.instantiate(o,e);return t instanceof WebAssembly.Instance?{instance:t,module:o}:t}}function Pr(){let o={};return o.wbg={},o.wbg.__wbg_buffer_609cc3eee51ed158=function(e){return e.buffer},o.wbg.__wbg_call_672a4d21634d4a24=function(){return xt(function(e,t){return e.call(t)},arguments)},o.wbg.__wbg_call_7cccdd69e0791ae2=function(){return xt(function(e,t,n){return e.call(t,n)},arguments)},o.wbg.__wbg_crypto_574e78ad8b13b65f=function(e){return e.crypto},o.wbg.__wbg_error_2668c8a93bdcea89=function(e,t){console.error(z(e,t))},o.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let n,a;try{n=e,a=t,console.error(z(e,t))}finally{r.__wbindgen_free(n,a,1)}},o.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return xt(function(e,t){globalThis.crypto.getRandomValues(la(e,t))},arguments)},o.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return xt(function(e,t){e.getRandomValues(t)},arguments)},o.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(e){return e.msCrypto},o.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},o.wbg.__wbg_new_a12002a7f91c75be=function(e){return new Uint8Array(e)},o.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,t){return new Function(z(e,t))},o.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(e,t,n){return new Uint8Array(e,t>>>0,n>>>0)},o.wbg.__wbg_newwithlength_a381634e90c276d4=function(e){return new Uint8Array(e>>>0)},o.wbg.__wbg_node_905d3e251edff8a2=function(e){return e.node},o.wbg.__wbg_now_d2e63c3e978c7ede=function(){return Date.now()},o.wbg.__wbg_process_dc0fbacc7c1c06f7=function(e){return e.process},o.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return xt(function(e,t){e.randomFillSync(t)},arguments)},o.wbg.__wbg_require_60cc747a6bc5215a=function(){return xt(function(){return module.require},arguments)},o.wbg.__wbg_set_65595bdd868b3009=function(e,t,n){e.set(t,n>>>0)},o.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){let n=t.stack,a=S(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=h;ur().setInt32(e+4*1,s,!0),ur().setInt32(e+4*0,a,!0)},o.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let e=typeof globalThis>"u"?null:globalThis;return xe(e)?0:Rt(e)},o.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let e=typeof globalThis>"u"?null:globalThis;return xe(e)?0:Rt(e)},o.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let e=typeof self>"u"?null:self;return xe(e)?0:Rt(e)},o.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let e=typeof window>"u"?null:window;return xe(e)?0:Rt(e)},o.wbg.__wbg_subarray_aa9065fa9dc5df96=function(e,t,n){return e.subarray(t>>>0,n>>>0)},o.wbg.__wbg_versions_c01dfd4722a88165=function(e){return e.versions},o.wbg.__wbindgen_init_externref_table=function(){let e=r.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},o.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},o.wbg.__wbindgen_is_object=function(e){let t=e;return typeof t=="object"&&t!==null},o.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},o.wbg.__wbindgen_is_undefined=function(e){return e===void 0},o.wbg.__wbindgen_memory=function(){return r.memory},o.wbg.__wbindgen_string_new=function(e,t){return z(e,t)},o.wbg.__wbindgen_throw=function(e,t){throw new Error(z(e,t))},o}function kr(o,e){return r=o.exports,ma.__wbindgen_wasm_module=e,_t=null,Ut=null,r.__wbindgen_start(),r}function Cr(o){if(r!==void 0)return r;typeof o<"u"&&(Object.getPrototypeOf(o)===Object.prototype?{module:o}=o:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));let e=Pr();o instanceof WebAssembly.Module||(o=new WebAssembly.Module(o));let t=new WebAssembly.Instance(o,e);return kr(t,o)}async function ma(o){if(r!==void 0)return r;typeof o<"u"&&(Object.getPrototypeOf(o)===Object.prototype?{module_or_path:o}=o:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof o>"u"&&(o=new URL("index_bg.wasm",import.meta.url));let e=Pr();(typeof o=="string"||typeof Request=="function"&&o instanceof Request||typeof URL=="function"&&o instanceof URL)&&(o=fetch(o));let{instance:t,module:n}=await ua(await o,e);return kr(t,n)}l();_();var gn=()=>({v1:`-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlYEjT/0eL0aqRBPfwjDi
GDJSRqljSV+f7cawC8czRuJRaRS32sab6JRb/7cNpkID1zuI68g9xQ+4khy6v/iA
7kFqPhsafOXzJO31lJe9+eU7BR6QA1emwsrWsLvhv+UST+0E4kf72OzHhoowe7eI
bcuy3D7Mh8ORbc6bQSZyHYfdfQng0sZ7Ovx3DUKnVHnL65ghOq7sz5lIPOoyRLVt
/aWDV9deGqg+K4zBdQaVlSRSX2dpGXXc2GJ2bIOa/vaxLorX9T7k/aMiK9eIB5Pu
Do6820ZA3BgMlsIRPzazFImt/mO9DnVLfiVl40K34YqOl80RnqsMIfnwyWJX5n/S
lQIDAQAB
-----END PUBLIC KEY-----`,v2:`-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoKEJQAzgV+XbBLvQqlVj
yqci4h/Qlp2+Lfi/RfVoFmaURcuJDArN6GBMQl6z033K3AxVzLtn7hx00UzlJC1b
g49nDVd+filR57uxB3OVoBN7nA6rewbkF2WOYboSTQwojiJbIdcIdkhRjiPnEy1I
7c0JZqfZ8PFFaagHcgxUcVzGe930kTK36X/6ofXw0Qqq81W4xhKNBQd2xQ33TgQX
TW5NCtmDloYmOrpaj1RvEevVGgBR5uhG1pntnsoGWc11NoIvczmDzYMCrICyb8Bu
bUbtLgPGvPuYgW3SbAF5yIO3LRqMZRScd1sTn/QL4PVzySglcMgqFNSVQ6LYzEpR
wQIDAQAB
-----END PUBLIC KEY-----`});l();_();ge();var Nr="0x",Er=()=>fetch("/static/tee-sdk.wasm").then(e=>e.arrayBuffer()),Tr=async()=>yo(be.postSAAttestation,{method:"POST",params:{frontendPubkeyVersionList:Object.keys(gn()).join(Oo)}}),Dr=o=>{let e=Vn(o)?o:JSON.stringify(o);if(e.startsWith(Nr))return e;let n=new TextEncoder().encode(e),a="";for(let s=0;s<n.length;s++){let c=n[s].toString(16).padStart(2,"0");a+=c}return`${Nr}${a}`};var Ln,Fn=gn(),vt=class{constructor(e){this.ARGON_2_ID_VARIABLES={mem_cost_kb:32,iteration:4,parallism:1,assoc_data_key_of_passcode:"tee-wallet-passcode-hash",assoc_data_key_of_hype_pair:"tee-wallet-hpke-pair-hash",app_public_salt:"tee-wallet-argon-2-id",hash_len:32};this.SmartAccountSalt="OKX-TEE-WALLET-IDENTITY";this.ready=!1;this.receiverPk="";this.publickeyVersion="v2";this.initPromise=this.initialize(),e?.attestation&&this.parseAndValidateAttestationDoc(e.attestation).then(t=>{this.receiverPk=t}).catch(()=>{})}static getInstance(e){return tn(Ln)&&(Ln=new vt(e)),Ln}async initialize(){try{if(this.initPromise)return await this.initPromise;let e=await Er();return Cr({module:e})}catch{throw new Error(Ee.INITIALIZE_FAILED)}finally{this.ready=!0}}async parseAndValidateAttestationDoc(e){this.ready||await this.initPromise;let t=e.trim(),{valid:n,userDataHex:a}=vr(t,ot.empty());if(!n)throw new Error(Ee.PARSE_ATTESTATION_FAILED);return a}toHex(e){return Dr(e)}async rawIntoHashHex(e,t,n){return this.ready||await this.initPromise,Ir(this.ARGON_2_ID_VARIABLES.mem_cost_kb,this.ARGON_2_ID_VARIABLES.iteration,this.ARGON_2_ID_VARIABLES.parallism,this.toHex(n),this.toHex(e),this.toHex(t),this.toHex(this.ARGON_2_ID_VARIABLES.app_public_salt),this.ARGON_2_ID_VARIABLES.hash_len).hashHex}async generateHpkeKeyPairByPrivateKey(e){return this.ready||await this.initPromise,hr(e,this.SmartAccountSalt)}async hpkeSeal({cipherHex:e,adHex:t,receiverHpkePk:n,senderSk:a}){return this.ready||await this.initPromise,Ar(e,t,n,a??"")}async hpkeOpen(...e){return this.ready||await this.initPromise,Sr(...e)}async encryptWithRSA(e){this.ready||await this.initPromise;let t=Fn[this.publickeyVersion];return yr(t,e)}async initializeAttestationDoc(e){if(!this.receiverPk){let t,n,a;if(e&&e.signData&&e.backendSignature&&e.frontendPubkeyVersionSelected)t=e.signData,n=e.backendSignature,a=e.frontendPubkeyVersionSelected;else{let d=await Tr();if(!d?.data)throw new Error(Ee.FETCH_ATTESTATION_FAILED);t=d.data.signData,n=d.data.backendSignature,a=d.data.frontendPubkeyVersionSelected}if(!Fn[a])throw new Error(Ee.RSA_PEM_VERSION_NOT_SUPPORTED);let s=Fn[a];if(!xr(s,t,n))throw new Error(Ee.RSA_PEM_VERIFY_FAILED);this.receiverPk=await this.parseAndValidateAttestationDoc(t),this.publickeyVersion=a}return this.receiverPk}async sealData(e){let t=await this.initializeAttestationDoc(),n=this.toHex(e.adData),a=await this.hpkeSeal({cipherHex:this.toHex(e.cipherData),adHex:n,receiverHpkePk:t});return{ciphertextHex:a.ciphertextHex,encapKeyHex:a.encapKeyHex,adHex:n}}async openData(e){return this.hpkeOpen(e.cipherHex,e.associatedDataHex,e.encapKeyHex,e.receiver_sk_hex,e.hpkeSk)}};var On,It=class{constructor(){this.hpkeService=vt.getInstance()}static getInstance(){return tn(On)&&(On=new It),On}async reverifyWalletPublicKeyStatus(e){let t=await lt().getServerWalletTypeByWalletId(e),[n,a]=await Bt(lt().verifyWalletPublicKeyStatus({walletId:e,walletType:t}));if(n||!a?.success){re("_REVERIFY_WALLET_PUBLIC_KEY_STATUS_FAILED",{error:n,params:{accountId:e,walletType:t}});let s=a?.err?.msg||a?.err?.error_message;if(s)return Mt.error({key:s,title:s,duration:we,placement:Mt.DIRECTION.top}),{success:!1,hideToast:!0}}return{success:Boolean(a?.success),hideToast:!1}}async prepareEnableSARequest(e,t,n,a){let{accountId:s,teeId:c,expirePeriodDay:d,currentExpiredTimestamp:m}=e,g=a.supportChainIndexList,[C,u]=await Bt(lt().getSAKeyPair(e.accountId,g));if(C)throw re("_GET_PRIVATE_KEY_LIST_FAILED",{error:u,params:{accountId:s}}),C;if(!u)throw new Error(Ee.NO_PRIVATE_KEY_FOUND);if(!e.forceUpgrade){let U=t.filter(X=>!n.includes(X));if(U.length){re("_UPLOAD_LESS_CHAIN_INDEX_LIST",{params:{uploadedChainIndexList:t,currentChainIndexList:n,accountId:s,teeId:c}});let X=U.map(G=>a.chainNameMapping[G]),$;X.length<=5?$=X.join(","):$=`${X.slice(0,5).join(",")}...`;let ee=new Error($);throw ee.name=Ee.CHAIN_INDEX_NOT_SUPPORTED,ee}}let v=u.pair,y=await this.hpkeService.initializeAttestationDoc(),N=Date.now(),A;d===null&&m?A=m:A=N+(d??15)*24*60*60*1e3;let D={teeId:c,teeType:1,identityPKHex:v.pkHex,expiredTimestamp:A,timestamp:N,command:"upgradeTee"},M=u.privateKeyListHex,H=this.hpkeService.toHex(D),T,K,Z;try{let U=await this.hpkeService.hpkeSeal({cipherHex:M,adHex:H,receiverHpkePk:y,senderSk:v.skHex});T=U.encapKeyHex,K=U.ciphertextHex,Z=await this.hpkeService.encryptWithRSA(K)}catch(U){throw re("_HPKE_SEAL_FAILED",{error:U,params:{accountId:s,teeId:c}}),U}return{reqParams:{teeId:c,accountId:s,timestamp:N,expireTimestamp:A,chainIndexList:g,hpkeInfo:{AD:H,encapsulatedKey:T,ciphertext:Z}},openData:async({ciphertext:U,encapsulatedKey:X,ad:$})=>this.hpkeService.hpkeOpen(U,$,X,v.skHex,y)}}async prepareEnableSASignature(e,t,n){let a={accountId:e.accountId,teeId:e.teeId,timestamp:e.timestamp,command:"upgradeTee",chainIndexList:e.chainIndexList,hpkeInfoHash:Ho(e.hpkeInfo)},[s,c]=await Bt(_n(t,a,n));if(s)throw re("_SIGN_TEE_FAILED",{error:s,params:nn(a,"hpkeInfoHash")}),s;return{signatureBase64:c,signatureMetaData:a}}async prepareRemoveSARequest(e,t){let{walletId:n,teeId:a}=t,s=Date.now(),c={teeId:a,timestamp:s,command:"removeTee"},d=JSON.stringify(c),[m,g]=await Bt(_n(e,d,t));if(m)throw re("_SIGN_TEE_DISABLE_FAILED",{error:m,params:c}),m;return{accountId:n,teeRequest:{payload:d,signature:g}}}async prepareExtendSARequest(e,t,n,a){let{walletId:s,teeId:c}=t,d=Date.now(),m={teeId:c,timestamp:d,command:"extendTee",expiredTimestamp:d+n*24*60*60*1e3,autoRenew:a},g=await _n(e,m,t);return{requestList:[{accountId:s,payload:JSON.stringify(m),signature:g}]}}async notifyAccountsChanged(e){let{walletIdentity:t}=e,n=lt(),a=await n.getState(),s=No({metamask:a},t.walletId).filter(c=>!(!c.isOkx||Eo({metamask:a},c.origin)!==t.walletId));!s.length||s.forEach(c=>{n.notifyAccountsChanged(c.origin,[t.walletId])})}};var rt=It.getInstance(),Lr=({isFromDex:o,isSmartAccountActivatedOnce:e,walletIdentity:t,showWelcome:n,isValidating:a,walletCreated:s,createWalletName:c,requestUpgrade:d,showUpgradeConfirm:m,markActivated:g,setShowWelcome:C,setIsCreating:u,setIsValidating:v,handlePlatformBack:y,handleToastTeeNetError:N,setShowEnableDone:A,handleToastReEnableSuccess:D,handleToastReactivateOrderAndStrategyOrders:M,onReenableSuccess:H,onDisableSuccess:T,handleToastExtendSuccess:K,onExtendSuccess:Z,handleToastAccountAddedAndEnabled:ce,handleToastSAEnableFailed:Y,handleToastReEnableFailed:U,handleToastExtendFailed:X,handleToastTeeMaintenance:$,handleAutoConnectDapp:ee})=>{let{data:G,runAsync:le}=Me(be.getSATeeMetadata,{catchMode:"toastAll"},{cacheKey:xo,staleTime:1e3,cacheTime:-1,onError(f){re("_GET_SA_METADATA_FAILED",{error:f,params:{teeId:t?.teeId,accountId:t?.walletId}})},manual:!0,refreshOnWindowFocus:!1}),V=G?.data??null,{data:_e,runAsync:De}=Me(be.getSATeeStatus,{catchMode:"toastAll"},{cacheKey:zo(t?.walletId),staleTime:1e3,cacheTime:-1,manual:!0,refreshOnWindowFocus:!1,ready:Boolean(t?.teeId&&t.walletId),onError(f,[I]){re("_GET_TEE_STATUS_FAILED",{params:{teeId:I.teeId,accountId:I.accountId},error:f})},onSuccess(f){!f?.data||(f.data.teeStatus.isCreated&&(e||setTimeout(()=>{g()}),n&&C(!1)),a&&s&&f?.data?.teeStatus.isCreated&&(ce(c,f.data.teeStatus.isActive),y()))}}),it=p(()=>{if(!t)return null;let{teeId:f,walletId:I}=t;return De({teeId:f,accountId:I,eip7702Status:!1,needChainList:!0})}),oe=(0,Ke.useMemo)(()=>_e?.data&&_e.data.accountId&&_e.data.accountId===t?.walletId?_e.data.teeStatus:null,[_e?.data,t?.walletId]),Ue=(0,Ke.useMemo)(()=>_e?.data?.chainIndexList??[],[_e?.data?.chainIndexList]),Le=_e?.data?.addressVerifyStatus??null,Fe=oe?.isCreated??!1,{data:me,runAsync:st}=Me(be.getSAUpgradeStatus,{catchMode:"toastAll"},{cacheKey:Ht(t?.teeId),staleTime:1e3,cacheTime:-1,manual:!0,refreshOnWindowFocus:!1,onError(f){re("_GET_TEE_UPGRADE_STATUS_FAILED",{params:{teeId:t?.teeId,accountId:t?.walletId},error:f})}}),Ie=me?.data?.upgradeStatus??null,pe=p(async()=>t?.teeId?st({teeId:t.teeId}):null),Pe=p(async f=>{let[I,q,fe]=await Promise.allSettled([le(),it(),f?.skipUpgradeStatus?null:pe()]);if(q.status==="fulfilled"&&q?.value){let Oe=q.value.data?.teeStatus;if(t?.walletId&&q.value.data?.accountId===t.walletId)try{await lt().updateAccountTeeStatus(t.walletId,Oe)}catch{}}if(!f?.silent){if(I.status==="fulfilled"&&I.value?.data?.isTeeServiceMaintenance){$();return}if(I.status==="fulfilled"&&I?.value&&q.status==="fulfilled"&&q?.value&&fe.status==="fulfilled"&&fe?.value){v(!1),u(!1);return}N()}}),ut=p(async()=>{!t||rt.notifyAccountsChanged({walletIdentity:t})}),{data:xn,runAsync:mt}=Me(be.postSAActivate,{method:"POST",catchMode:"toastAll",config:{walletSignParams:{needXClientSign:!0,walletId:t?.walletId}}},{manual:!0,async onError(f,[I]){re("_TEE_ACTIVATE_FAILED",{params:{teeId:I.teeId,accountId:I.accountId},error:f}),await Pe({silent:!0})},async onSuccess(f){!f?.data||(g(),A(!0),await Pe({silent:!0,skipUpgradeStatus:!0}),an(Ht(t?.teeId)),ut())}}),Ct=Do({walletId:t?.walletId}),pt=dr({accountId:t?.walletId,supportedChainIndexList:V?.supportChainIndexList??[]}),Nt=(0,Ke.useMemo)(()=>pt.map(f=>f.address),[pt]),ft=(0,Ke.useMemo)(()=>pt.map(f=>f.chainId),[pt]),Yt=(0,Ke.useMemo)(()=>!oe||ft.length===0?!1:ft.some(f=>!Ue.includes(f)),[Ue,ft,oe]),[Xt,Et]=(0,Ke.useState)(!1),Tt=(0,Ke.useMemo)(()=>!V?.supportChainIndexList?.length||!oe?.isActive||Xt?!1:!!(Ie===0||d&&Yt),[Xt,d,Ie,V?.supportChainIndexList,Yt,oe?.isActive]),{data:ct,runAsync:vn}=Me(be.postDexStrategyOrderNum,{method:"POST",catchMode:"noToast"},{onError(f,[I]){re("_POST_DEX_STRATEGY_ORDER_NUM_FAILED",{params:{accountId:I.accountId,walletAddressList:Nt,orderStatusList:[4]},error:f})},manual:!0}),In=p(async()=>{if(ct?.data)return{orderNum:Wt(ct?.data?.orderNum)?ct?.data?.orderNum:0,strategyNum:Wt(ct?.data?.strategyNum)?ct?.data?.strategyNum:0};let f=await vn({accountId:t?.walletId,walletAddressList:Nt,orderStatusList:[4]});return{orderNum:f?.data?.orderNum??0,strategyNum:f?.data?.strategyNum??0}}),{data:Jt,runAsync:je}=Me(be.postDexStrategyOrderNum,{method:"POST",catchMode:"noToast"},{manual:!0}),de=p(async()=>{await je({accountId:t?.walletId,walletAddressList:Nt,orderStatusList:[-3,0,2,3,4]})}),gt=p(async f=>{if(!V||!oe||!t)throw new Error("impossible to reach");if(Le?.isVerify===!1){let{success:Qe,hideToast:Ot}=await rt.reverifyWalletPublicKeyStatus(t.walletId);if(!Qe){if(Ot)return null;throw new Error("reverifyWalletPublicKeyStatus failed")}}let I=await rt.prepareEnableSARequest({accountId:t.walletId,teeId:t.teeId,expirePeriodDay:f.expirePeriodDay,forceUpgrade:f.forceUpgrade,currentExpiredTimestamp:oe.expiredTimestamp},Ue,ft,V).catch(async Qe=>{if(Qe instanceof Error&&Qe.name===Ee.CHAIN_INDEX_NOT_SUPPORTED){ao();let Ot=i("wallet_extension_account_dialog_desc_sa_networkfail_update",{chain:Qe.message}),en=nt({subTitle:Ot,confirmText:i("wallet_extension_account_dialog_btn_continue_anyway"),cancelText:i("wallet_extension_btn_general_cancel"),onCancel:()=>{en.destroy()},onConfirm:()=>{Dt({...f,forceUpgrade:!0}),en.destroy()}});return null}throw Qe});if(!I)return null;let{reqParams:q,openData:fe}=I,{signatureBase64:Oe,signatureMetaData:Zt}=await rt.prepareEnableSASignature(q,Ct,t);return{openData:fe,reqParams:q,signatureBase64:Oe,signatureMetaData:Zt}}),{runAsync:$t}=Me(be.postSABatchAuthorize,{method:"POST",catchMode:"toastAllExceptBizErr",config:{walletSignParams:{needXClientSign:!0,walletId:t?.walletId}}},{manual:!0,async onError(f,[I]){re("_TEE_BATCH_AUTH_FAILED",{params:{teeId:I.accountList?.[0].teeId,accountId:I.accountList?.[0].accountId},error:f}),U(),await Pe({silent:!0})},async onSuccess(f){if(!f?.data)return;Et(!0),!o&&!Tt?D():o&&await ee(),g(),ut();let I=oe?.isActive??!1,q=async()=>{m||(Ce(H)?await H():o&&y())};an(Ht(t?.teeId)),await Pe({silent:!0,skipUpgradeStatus:!0});let[fe]=await Promise.all([In()]);!I&&(fe.orderNum>0||fe.strategyNum>0)?M({onConfirm:q}):await q()}}),Dt=p(async f=>{let I=await gt(f).catch(()=>(U(),null));if(!I)return null;let{reqParams:q,signatureBase64:fe,signatureMetaData:Oe}=I;return $t({accountList:[{...q,autoRenew:f.autoRenew,signature:fe,signMsg:JSON.stringify(Oe)}],frontendPubkeyVersionSelected:rt.hpkeService.publickeyVersion})}),Lt=p(async f=>{let I=await gt(f).catch(()=>(Y(),null));if(!I)return null;let{reqParams:q,signatureBase64:fe,signatureMetaData:Oe}=I;return mt({...q,autoRenew:f.autoRenew,signature:fe,signMsg:JSON.stringify(Oe),frontendPubkeyVersionSelected:rt.hpkeService.publickeyVersion})}),{runAsync:Pn}=Me(be.postSARemove,{method:"POST",config:{walletSignParams:{needXClientSign:!0,walletId:t?.walletId}},catchMode:"toastAllExceptBizErr"},{manual:!0,async onError(f,[I]){re("_TEE_DISABLE_FAILED",{params:{teeId:I.accountId,accountId:I.accountId},error:f}),await Pe({silent:!0}),Ne.error(i("wallet_extension_notifications_desc_sa_disable_fail"))},async onSuccess(f){!f?.data||(Ne.success({title:i("wallet_extension_account_notifications_desc_sa_disabled"),desc:i("wallet_extension_notifications_desc_sa_disabled_order_update"),duration:we}),ut(),await Pe({silent:!0,skipUpgradeStatus:!0}),an(Ht(t?.teeId)),Ce(T)?await T():y())}}),kn=p(async()=>{if(!t)return null;let f=await rt.prepareRemoveSARequest(Ct,t);return Pn(f)}),{runAsync:bt}=Me(be.postSABatchExtend,{method:"POST",config:{walletSignParams:{needXClientSign:!0,walletId:t?.walletId}},catchMode:"toastAllExceptBizErr"},{manual:!0,async onError(f){X(),re("_POST_SA_BATCH_EXTEND_FAILED",{params:{teeId:t?.teeId,accountId:t?.walletId},error:f}),await Pe({silent:!0})},async onSuccess(f){if(!f?.data)return;let{expireTimestamp:I,autoRenew:q}=f?.data?.teeResultList[0]||{};K(I,q),g(),ut(),await Promise.all([Pe({silent:!0}),pn(we*1e3)]),Ce(Z)?await Z():o&&y()}}),Ft=p(async f=>{if(!t||!f.expirePeriodDay)return null;if(Tt)return Dt(f);let I=await rt.prepareExtendSARequest(Ct,t,f.expirePeriodDay,f.autoRenew).catch(()=>(X(),null));return I?bt(I):null});return{metadata:V,teeStatus:oe,isCreated:Fe,upgradeStatusResponse:me,saActivateRes:xn,shouldShowUpgrade:Tt,orderCount:Jt?.data?.orderNum??0,strategyCount:Jt?.data?.strategyNum??0,handleEnable:Lt,handleReEnable:Dt,handleDel:kn,handleDisable:de,handleFetchSAData:Pe,handleRefresh:Ft}};l();_();var Wn=x(L());l();_();var Pt=x(L());ge();var Fr=o=>{let{runAsync:e}=Wo(),{displayMaintenanceNotificationList:t,markDisplayed:n}=Fo(),a=o?.maintenanceEventList,s=(0,Pt.useMemo)(()=>{if(!a?.length)return null;let g=a.filter(C=>{let u=En(C);return Uo(C.eventTimestamp)&&C.eventType===2&&!t.includes(u)});return Kn(g,"eventTimestamp")??null},[a,t]),c=p(async()=>{let g=await e();return jo(g)}),d=(0,Pt.useRef)(!1),m=Se();(0,Pt.useEffect)(()=>{s&&!d.current&&c().then(g=>{g&&(Ko(s.eventType,m.smartAccountWhatAreServiceUpgradesMaintenance),d.current=!0,n(En(s)))}).catch(()=>{})},[s])};var Or=({metadata:o,isValidating:e,isCreating:t,newlyCreatedWalletId:n,handleCreateWallet:a,handleFetchSAData:s})=>{(0,Wn.useEffect)(()=>{!t||a()},[t]),(0,Wn.useEffect)(()=>{t&&!n||!e||s()},[e,t,n]),Fr(o)};l();_();var Te=x(L());var fa=({isFromDex:o,isSmartAccountActivatedOnce:e,isFromWalletManageCreate:t,showFeature:n})=>{let a;e?a=!1:o?a=Boolean(n):a=!0;let s;t&&!a?s=!0:s=!1;let c;return t?c=!1:c=!0,{showWelcome:a,isCreating:s,isValidating:c}},Wr=({isSmartAccountActivatedOnce:o,isFromDex:e,isFromWalletManageCreate:t,showFeature:n})=>{let a=(0,Te.useRef)();a.current||(a.current=fa({isFromDex:e,isSmartAccountActivatedOnce:o,isFromWalletManageCreate:t,showFeature:n}));let[s,c]=(0,Te.useState)(!1),[d,m]=(0,Te.useState)(a.current.showWelcome),[g,C]=(0,Te.useState)(a.current.isCreating),[u,v]=(0,Te.useState)(!1),[y,N]=(0,Te.useState)(!1),[A,D]=(0,Te.useState)(!1),[M,H]=(0,Te.useState)(!1),[T,K]=(0,Te.useState)(a.current.isValidating);return{isFromDex:e,isFromWalletManageCreate:t,showWelcome:d,isCreating:g,isValidating:T,showDelConfirm:u,showEnableDone:y,showPeriodSheet:s,showUpgradeConfirm:A,showSelectAccount:M,setIsCreating:C,setShowWelcome:m,setIsValidating:K,setShowDelConfirm:v,setShowEnableDone:N,setShowPeriodSheet:c,setShowUpgradeConfirm:D,setShowSelectAccount:H}};l();_();var Br=({walletCreated:o,createWalletName:e,handlePlatformBack:t,onExit:n})=>{let a=p(A=>{Ne.success({title:i("wallet_extension_account_notification_title_account_added",{account:A}),desc:i("wallet_extension_account_notification_subtitle_account_only"),duration:we})}),s=Se(),c=p(()=>{let A=nt({subTitle:i("wallet_extension_home_dialog_desc_sa_network_issue"),confirmText:i("wallet_extension_btn_general_gotit"),onConfirm:async()=>{await n?.(),A.destroy(),t(),o&&a(e)}})}),d=p(()=>{nt({title:i("wallet_extension_account_dialog_title_sa_maintenance"),subTitle:i("wallet_extension_account_dialog_desc_sa_maintenance"),confirmText:i("wallet_extension_btn_general_gotit"),cancelText:s.smartAccountWhatAreServiceUpgradesMaintenance?i("wallet_extension_home_link_learn_more"):void 0,onCancel:()=>{!s.smartAccountWhatAreServiceUpgradesMaintenance||ie(s.smartAccountWhatAreServiceUpgradesMaintenance)},onConfirm:async A=>{await n?.(),A.destroy(),t(),o&&a(e)}})}),m=p(()=>{Ne.error({title:i("wallet_extension_account_dialog_title_sa_enable_fail"),desc:i("wallet_extension_account_notifications_desc_try_again"),duration:we})}),g=p(()=>{Ne.error({title:i("wallet_account_notifications_title_reactivation_fail"),desc:i("wallet_extension_account_notifications_desc_try_again"),duration:we})}),C=p(()=>{Ne.error({title:i("wallet_extension_account_notifications_title_sa_renew_fail"),desc:i("wallet_extension_account_notifications_desc_try_again"),duration:we})}),u=p(()=>{Ne.success({title:i("wallet_extension_account_notification_title_sa_enabled"),duration:we})}),v=p((A,D)=>{let M;D?M=i("wallet_extension_account_notifications_desc_auto_renewing"):A&&(M=i("wallet_extension_account_notifications_desc_sa_renewed",{date:Xe.formatDateTime(new Date(A),{format:Ye.SimpleDate})})),Ne.success({title:i("wallet_extension_account_notifications_sa_renewed"),desc:M,duration:we})}),y=p(async A=>{nt({title:i("wallet_extension_account_dialog_title_reactivate_orders"),subTitle:i("wallet_extension_account_dialog_desc_reactivate_orders_sa"),confirmText:i("wallet_extension_btn_general_ok"),onConfirm:async D=>{D.destroy(),await A.onConfirm()}})}),N=p((A,D=!0)=>{Ne.success({title:i("wallet_extension_account_notification_title_account_added",{account:A}),desc:D?i("wallet_extension_account_notification_subtitle_smart_enabled"):i("wallet_extension_account_notification_subtitle_enable_again"),duration:we})});return{handleToastTeeNetError:c,handleToastReEnableSuccess:u,handleToastExtendSuccess:v,handleToastReactivateOrderAndStrategyOrders:y,handleToastAccountAddedButNotEnable:a,handleToastAccountAddedAndEnabled:N,handleToastSAEnableFailed:m,handleToastReEnableFailed:g,handleToastExtendFailed:C,handleToastTeeMaintenance:d}};l();_();var He=x(L());ge();l();_();var Mr=x(L());var Hr=o=>{let[,e]=ln(null),t=Ao(),n=o||t;return(0,Mr.useMemo)(()=>{let a=null,s=null;for(let c=0;c<e.length;c++){let d=e[c];for(let m=0;m<d.walletIdentities.length;m++){let g=d.walletIdentities[m];if(g.walletId===n){a=d,s=g;break}}if(a&&s)break}return{keyringIdentity:a,walletIdentity:s}},[e,n])};var Rr=({walletId:o,origin:e,isFromDex:t,keyringId:n,setIsValidating:a,removeQueryFrom:s,handlePlatformBack:c})=>{let[d,m]=(0,He.useState)(null),[g,C]=(0,He.useState)(""),[u,v]=(0,He.useState)(),N=wt(Io).origin||e,{latestAccountId:A,approvedAccountList:D}=wt(G=>To(G,N)),M=o||d||u||(t?A:void 0),{walletIdentity:H,keyringIdentity:T}=Hr(M);(0,He.useEffect)(()=>{H&&a(!0)},[H?.walletId]);let K=ho(T?.keyringId??""),Z=wt(po),ce=So(),Y=(0,He.useRef)(!1),U=(0,He.useMemo)(()=>{let G=Number(H?.walletAsset);return!Number.isNaN(G)},[H?.walletAsset]),X=p(async()=>{if(Z||!T?.keyringId)return;let G=K?.walletIdentities.length??0;C(`${i("wallet_manage_wallet_top_account_default_name")} ${Gn((G+1).toString(),2,"0")}`),ce(n??T.keyringId,{hideToast:!0}).then(le=>{m(le),Y.current=!0,s()}).catch(le=>{le.message===wo&&Mt.error({title:i("wallet_extension_error_reminder_system_busy")}),c()})}),$=sn(),ee=p(async()=>{if(!t||!N||!D.length||!u)return;let G=D.includes(u);$(cn.setSelectAccounts([u])),await $(rn(u,!0)),G||await $(_o(N,u))});return{isFundReady:U,createWalletName:g,walletIdentity:H,keyringIdentity:T,walletCreated:Y.current,newlyCreatedWalletId:d,selectedWalletId:u,setSelectedWalletId:v,handleCreateWallet:X,handleAutoConnectDapp:ee}};l();_();var J=x(L());l();_();var Bn=x(L()),Mn=x(Be());l();_();var at={"bot-avatar":"_bot-avatar_oue8c_1",botAvatar:"_bot-avatar_oue8c_1","bot-icon":"_bot-icon_oue8c_6",botIcon:"_bot-icon_oue8c_6","content-enabled":"_content-enabled_oue8c_9",contentEnabled:"_content-enabled_oue8c_9","content-expiring":"_content-expiring_oue8c_12",contentExpiring:"_content-expiring_oue8c_12","content-expired":"_content-expired_oue8c_15",contentExpired:"_content-expired_oue8c_15","bg-enabled":"_bg-enabled_oue8c_18",bgEnabled:"_bg-enabled_oue8c_18","bg-expiring":"_bg-expiring_oue8c_21",bgExpiring:"_bg-expiring_oue8c_21","bg-expired":"_bg-expired_oue8c_24",bgExpired:"_bg-expired_oue8c_24",center:"_center_oue8c_27"};var bn=({status:o})=>Bn.default.createElement("div",{className:(0,Mn.default)(at.center,at["bot-avatar"],{[at["bg-enabled"]]:o===0||o===1,[at["bg-expired"]]:o===2}),"data-testid":B.LARGE_BOT_AVATAR},Bn.default.createElement(te,{className:(0,Mn.default)("okx-wallet-plugin-bot-filled",at["bot-icon"],{[at["content-enabled"]]:o===0||o===1,[at["content-expired"]]:o===2})}));l();_();var ue={container:"_container_rx1jx_1","page-title":"_page-title_rx1jx_7",pageTitle:"_page-title_rx1jx_7","page-description":"_page-description_rx1jx_14",pageDescription:"_page-description_rx1jx_14","page-description-link":"_page-description-link_rx1jx_21",pageDescriptionLink:"_page-description-link_rx1jx_21","order-container":"_order-container_rx1jx_28",orderContainer:"_order-container_rx1jx_28","order-container-box":"_order-container-box_rx1jx_35",orderContainerBox:"_order-container-box_rx1jx_35","order-title":"_order-title_rx1jx_44",orderTitle:"_order-title_rx1jx_44","order-count":"_order-count_rx1jx_50",orderCount:"_order-count_rx1jx_50","arr-icon":"_arr-icon_rx1jx_56",arrIcon:"_arr-icon_rx1jx_56",footer:"_footer_rx1jx_60","confirm-btn":"_confirm-btn_rx1jx_60",confirmBtn:"_confirm-btn_rx1jx_60"};var Ur=({orderCount:o,strategyCount:e,teeStatus:t,onDel:n})=>{let[a,s]=(0,J.useState)(!1),c=p(async()=>{if(!a)try{s(!0),await n()}finally{s(!1)}}),{avatarStatus:d}=St({teeStatus:t});We(()=>{io()});let m=Se();return J.default.createElement("div",{className:ue.container},J.default.createElement(bn,{status:d}),J.default.createElement("div",{className:ue["page-title"]},i("wallet_extension_account_details_header_disable_sa")),J.default.createElement("div",{className:ue["page-description"]},i("wallet_extension_account_sa_text_disable_orders",{learn:m.smartAccountActivationAndDisableGuide?J.default.createElement("span",{className:ue["page-description-link"],onClick:ie.bind(null,m.smartAccountActivationAndDisableGuide)},i("wallet_extension_home_link_learn_more")):""})),o||e?J.default.createElement("div",{className:ue["order-container"]},o?J.default.createElement("div",{className:ue["order-container-box"]},J.default.createElement("div",{className:ue["order-title"]},i("wallet_extension_account_details_label_open_orders")),J.default.createElement("div",null,J.default.createElement("span",{className:ue["order-count"]},o))):null,e?J.default.createElement("div",{className:ue["order-container-box"]},J.default.createElement("div",{className:ue["order-title"]},i("wallet_extension_account_details_label_strategies")),J.default.createElement("div",null,J.default.createElement("span",{className:ue["order-count"]},e))):null):null,J.default.createElement(he,{className:ue.footer},J.default.createElement(E,{type:E.TYPE.red,onClick:c,loading:a,className:ue["confirm-btn"],"data-testid":B.DEL_CONFIRM_BTN},i("wallet_extension_account_details_btn_cancel_all"))))};l();_();var W=x(L());var jr=x(Be());l();_();var ne={"enable-done-container":"_enable-done-container_os8zm_1",enableDoneContainer:"_enable-done-container_os8zm_1","avatar-container":"_avatar-container_os8zm_8",avatarContainer:"_avatar-container_os8zm_8","avatar-animation":"_avatar-animation_os8zm_16",avatarAnimation:"_avatar-animation_os8zm_16",avatar:"_avatar_os8zm_8","account-row":"_account-row_os8zm_30",accountRow:"_account-row_os8zm_30","account-name":"_account-name_os8zm_38",accountName:"_account-name_os8zm_38","account-icon":"_account-icon_os8zm_43",accountIcon:"_account-icon_os8zm_43","page-title":"_page-title_os8zm_47",pageTitle:"_page-title_os8zm_47","page-subtitle":"_page-subtitle_os8zm_55",pageSubtitle:"_page-subtitle_os8zm_55","footer-container":"_footer-container_os8zm_63",footerContainer:"_footer-container_os8zm_63","border-wrapper":"_border-wrapper_os8zm_63",borderWrapper:"_border-wrapper_os8zm_63","top-border-container":"_top-border-container_os8zm_67",topBorderContainer:"_top-border-container_os8zm_67","top-border":"_top-border_os8zm_67",topBorder:"_top-border_os8zm_67","footer-contents":"_footer-contents_os8zm_76",footerContents:"_footer-contents_os8zm_76","tos-container":"_tos-container_os8zm_82",tosContainer:"_tos-container_os8zm_82","tos-content":"_tos-content_os8zm_89",tosContent:"_tos-content_os8zm_89","confirm-btn":"_confirm-btn_os8zm_96",confirmBtn:"_confirm-btn_os8zm_96"};var zr=({onConfirm:o,walletIdentity:e,activateRes:t,handleAutoConnectDapp:n})=>{let a=(0,W.useMemo)(()=>t?.expireTimestamp?Xe.formatDateTime(new Date(t.expireTimestamp),{format:Ye.SimpleDate}):"",[t?.expireTimestamp]),s=Ze({light:"/static/images/__animation__/smart-account/enable-sa-succ-light.json",dark:"/static/images/__animation__/smart-account/enable-sa-succ-dark.json"}),[c,d]=(0,W.useState)(!1);We(()=>{no(),n().catch(()=>{}).finally(()=>{d(!0)})});let m=(0,W.useRef)(null),g=p(async()=>{let v=m.current;if(!v)return;let y=v.getDuration(),N=v.getDuration(!0);if(!y||!N)return;let A=y*1e3,D=Math.floor(1e3/A*N),M=Math.floor(2817/A*N);v.play(),await pn(1e3),v.pause(),v.playSegments([D,M],!0)}),{fn:C}=ye({fn:o,disabled:!c}),u="";return t?.autoRenew?u=i("wallet_extension_intro_subheader_auto_renew_days",{num:t.extendExpirePeriodDay}):a&&(u=i("wallet_extension_account_subtitle_enabled_until",{date:a})),W.default.createElement(W.default.Fragment,null,W.default.createElement("div",{className:ne["enable-done-container"]},W.default.createElement("div",{className:ne["avatar-container"]},W.default.createElement("div",{className:ne["avatar-animation"]},W.default.createElement(Je,{path:s,autoplay:!1,animationRef:m,onDOMLoaded:g})),W.default.createElement(dn,{walletIdentity:e,className:ne.avatar})),W.default.createElement("div",{className:ne["account-row"]},W.default.createElement("div",{className:ne["account-name"]},e.walletName),W.default.createElement(te,{className:(0,jr.default)("okx-wallet-plugin-bot-filled",ne["account-icon"])})),W.default.createElement("div",{className:ne["page-title"]},i("wallet_extension_account_title_account_enabled")),a?W.default.createElement("div",{className:ne["page-subtitle"],"data-testid":B.DONE_EXPIRE_DATE},u):null),W.default.createElement(he,{className:ne["footer-container"]},W.default.createElement("div",null,W.default.createElement("div",{className:ne["top-border-container"]},W.default.createElement("div",{className:ne["top-border"]})),W.default.createElement("div",{className:ne["footer-contents"]},W.default.createElement("div",{className:ne["tos-container"]},W.default.createElement("div",{className:ne["tos-content"]},i("wallet_extension_account_bot_text_renew_account"))),W.default.createElement(E,{className:ne["confirm-btn"],onClick:C,type:E.TYPE.primary,"data-testid":B.DONE_BTN},i("wallet_extension_complete_btn_done"))))))};l();_();var P=x(L());var Ge=x(Be());ge();l();_();var ga=1e4,Vr=(o,e)=>{let t=o?.initialType===$n.HD_KEYRING,n=o?.needBackup===0,a=Number(o?.walletAsset??"0"),s=!Number.isNaN(a),c=e.upgradeAssetThreshold||ga,d=s&&a>c;return{isAvailable:Boolean(s&&t&&n&&!d),isAssetValid:s,isAssetOverLimit:d,isMnemonicWallet:t,hasBackup:n}};l();_();var k={enable:"_enable_piytr_1","page-title":"_page-title_piytr_7",pageTitle:"_page-title_piytr_7","page-description":"_page-description_piytr_13",pageDescription:"_page-description_piytr_13","alert-row":"_alert-row_piytr_20",alertRow:"_alert-row_piytr_20","alert-text":"_alert-text_piytr_30",alertText:"_alert-text_piytr_30",pointer:"_pointer_piytr_35","primary-text":"_primary-text_piytr_38",primaryText:"_primary-text_piytr_38","underline-tip-text":"_underline-tip-text_piytr_41",underlineTipText:"_underline-tip-text_piytr_41",card:"_card_piytr_48","select-another-row":"_select-another-row_piytr_56",selectAnotherRow:"_select-another-row_piytr_56","select-another-row-icon":"_select-another-row-icon_piytr_62",selectAnotherRowIcon:"_select-another-row-icon_piytr_62","select-another-row-text":"_select-another-row-text_piytr_65",selectAnotherRowText:"_select-another-row-text_piytr_65","info-block":"_info-block_piytr_71",infoBlock:"_info-block_piytr_71","info-block-avatar":"_info-block-avatar_piytr_77",infoBlockAvatar:"_info-block-avatar_piytr_77","info-block-right":"_info-block-right_piytr_81",infoBlockRight:"_info-block-right_piytr_81","account-name-container":"_account-name-container_piytr_87",accountNameContainer:"_account-name-container_piytr_87","account-name":"_account-name_piytr_87",accountName:"_account-name_piytr_87","account-name-active":"_account-name-active_piytr_97",accountNameActive:"_account-name-active_piytr_97","account-name-expiring":"_account-name-expiring_piytr_100",accountNameExpiring:"_account-name-expiring_piytr_100","account-bot-icon":"_account-bot-icon_piytr_103",accountBotIcon:"_account-bot-icon_piytr_103","account-bot-icon-active":"_account-bot-icon-active_piytr_107",accountBotIconActive:"_account-bot-icon-active_piytr_107","account-bot-icon-expiring":"_account-bot-icon-expiring_piytr_110",accountBotIconExpiring:"_account-bot-icon-expiring_piytr_110","account-bot-icon-disabled":"_account-bot-icon-disabled_piytr_113",accountBotIconDisabled:"_account-bot-icon-disabled_piytr_113","account-balance":"_account-balance_piytr_116",accountBalance:"_account-balance_piytr_116","gap-container":"_gap-container_piytr_122",gapContainer:"_gap-container_piytr_122","gap-line":"_gap-line_piytr_126",gapLine:"_gap-line_piytr_126","enable-container":"_enable-container_piytr_131",enableContainer:"_enable-container_piytr_131","enable-label":"_enable-label_piytr_138",enableLabel:"_enable-label_piytr_138","select-enable-row":"_select-enable-row_piytr_144",selectEnableRow:"_select-enable-row_piytr_144","footer-container":"_footer-container_piytr_152",footerContainer:"_footer-container_piytr_152","footer-contents":"_footer-contents_piytr_152",footerContents:"_footer-contents_piytr_152","confirm-btn":"_confirm-btn_piytr_158",confirmBtn:"_confirm-btn_piytr_158","ok-btn":"_ok-btn_piytr_163",okBtn:"_ok-btn_piytr_163","active-btn":"_active-btn_piytr_166",activeBtn:"_active-btn_piytr_166"};var qr=({walletIdentity:o,metadata:e,teeStatus:t,isFromDex:n,isFromBanner:a,displayEnableLabel:s,enableValue:c,setShowSelectAccount:d,setShowPeriodSheet:m,onEnableSuccess:g,onExit:C,handleExtensionBack:u,handleEnable:v,handleReEnable:y,handleAutoConnectDapp:N})=>{let{isAvailable:A,isAssetValid:D,isAssetOverLimit:M,isMnemonicWallet:H,hasBackup:T}=Vr(o,e),K=wt(eo),Z=n||a,ce=t.isCreated,Y=t.isActive,U=(0,P.useMemo)(()=>{let Fe="";if(M){let me=!K||K.isoCode.toUpperCase()===on,st,Ie=Qn.showTruncation(e.upgradeAssetThreshold,0);if(me)st=`${Ie} ${on}`;else{let pe=uo(Xn(e.upgradeAssetThreshold,K.usdToThisRate),{currencySign:K.symbol}).value;st=`${Ie} ${on} (${pe})`}Fe=i("wallet_extension_account_mid_tips_enable_value_limit",{num:st})}else H?T||(Fe=i("wallet_extension_account_mid_tips_enable_back_up_first")):Fe=i("wallet_extension_account_mid_tips_enable_seed_phrase");return Fe},[M,H,T,e]),X=p(async()=>{m(!0)}),$=p(()=>{d(!0),to()});We(()=>{co({button:A?"Enable":"Ok"})});let ee=p(()=>{let Fe=nt({title:i("wallet_extension_account_dialog_title_enable_period"),subTitle:i("wallet_extension_account_dialog_desc_enable_period"),confirmText:i("wallet_extension_btn_general_ok"),onConfirm:()=>{Fe.destroy()}})}),{fn:G,loading:le}=ye({fn:p(async()=>ce?y({expirePeriodDay:c.expirePeriodDay,autoRenew:c.autoRenew}):v({expirePeriodDay:c.expirePeriodDay,autoRenew:c.autoRenew}))}),V=D&&!A,_e=!D,De=Se(),it=sn(),{fn:oe}=ye({fn:p(async()=>{n?await N():a&&(it(cn.setSelectAccounts([o.walletId])),it(rn(o.walletId,!0))),Ce(g)?g():u()})}),{fn:Ue}=ye({fn:p(async()=>{Ce(C)?await C():u()})}),Le="";return Y||(ce?Le=De.smartAccountHowToTradeWithSmartAccount?P.default.createElement("span",{className:k["primary-text"],onClick:ie.bind(null,De.smartAccountHowToTradeWithSmartAccount)},i("wallet_extension_home_link_learn_more")):"":A?Le=De.smartAccountWhatIsSmartAccount?P.default.createElement("span",{className:k["primary-text"],onClick:ie.bind(null,De.smartAccountWhatIsSmartAccount)},i("wallet_extension_home_link_learn_more")):"":Le=De.smartAccountHowToTradeWithSmartAccount?P.default.createElement("span",{className:k["primary-text"],onClick:ie.bind(null,De.smartAccountHowToTradeWithSmartAccount)},i("wallet_extension_home_link_learn_more")):""),P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:k.enable},P.default.createElement("div",{className:k["page-title"]},i(Y?"wallet_extension_account_header_sa_enabled":"wallet_extension_account_header_enable_smart_account")),P.default.createElement("div",{className:k["page-description"]},Y?i("wallet_extension_account_subheader_sa_enabled"):i("wallet_extension_account_subheader_enable_sa_faq",{learn:Le})),P.default.createElement("div",{className:k.card},P.default.createElement("div",{className:k["info-block"]},P.default.createElement(dn,{size:qo.md,walletIdentity:o,className:k["info-block-avatar"]}),P.default.createElement("div",{className:k["info-block-right"]},P.default.createElement("div",{className:k["account-name-container"]},P.default.createElement("div",{className:(0,Ge.default)({[k["account-name"]]:!0,[k["account-name-active"]]:Y})},o.walletName),ce?P.default.createElement(te,{className:(0,Ge.default)({"okx-wallet-plugin-bot-filled":!0,[k["account-bot-icon-active"]]:Y,[k["account-bot-icon-disabled"]]:!Y,[k["account-bot-icon"]]:!0})}):null),P.default.createElement(Qo,{walletAsset:o.walletAsset}))),A&&!Y?P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:k["gap-container"]},P.default.createElement("div",{className:k["gap-line"]})),P.default.createElement("div",{className:k["enable-container"]},P.default.createElement("div",{className:(0,Ge.default)(k["enable-label"],k["underline-tip-text"]),onClick:ee},i("wallet_extension_account_mid_label_enable_for")),P.default.createElement("div",{className:(0,Ge.default)(k["select-enable-row"],k.pointer),onClick:X,"data-testid":B.PERIOD_SELECT_BTN},P.default.createElement("span",null,s),P.default.createElement(te,{className:"okx-wallet-plugin-down-1"})))):null,U?P.default.createElement("div",{className:k["alert-row"]},P.default.createElement("div",{className:k["alert-text"]},U)):null),Z?P.default.createElement("div",{className:(0,Ge.default)(k.card,k.pointer),onClick:$},P.default.createElement("div",{className:k["select-another-row"]},P.default.createElement(te,{className:(0,Ge.default)("okx-wallet-plugin-wire-transfer",k["select-another-row-icon"])}),P.default.createElement("div",{className:k["select-another-row-text"]},i("wallet_extension_account_mid_textbtn_select_another_account")))):null),P.default.createElement(he,{className:k["footer-container"]},P.default.createElement("div",{className:k["footer-contents"]},V?P.default.createElement(E,{type:E.TYPE.primary,onClick:Ue,className:k["ok-btn"]},i("wallet_extension_btn_cancel")):Y?P.default.createElement(E,{type:E.TYPE.primary,onClick:oe,className:(0,Ge.default)(k["confirm-btn"],k["active-btn"])},i("wallet_extension_footer_btn_continue")):P.default.createElement(E,{className:(0,Ge.default)({[k["confirm-btn"]]:!0,[k["active-btn"]]:!_e}),loading:le,onClick:G,disabled:_e,type:E.TYPE.primary,"data-testid":B.ENABLE_BTN},i("wallet_extension_account_smart_btn_enable")))))};l();_();var dt=x(L());l();_();var kt={"loading-container":"_loading-container_1imw9_1",loadingContainer:"_loading-container_1imw9_1","circle-container":"_circle-container_1imw9_9",circleContainer:"_circle-container_1imw9_9","abs-container":"_abs-container_1imw9_17",absContainer:"_abs-container_1imw9_17","wallet-icon":"_wallet-icon_1imw9_24",walletIcon:"_wallet-icon_1imw9_24","add-title":"_add-title_1imw9_27",addTitle:"_add-title_1imw9_27",description:"_description_1imw9_35"};var Kr=({title:o,description:e})=>{let t=Ze({light:"/static/images/__animation__/smart-account/create-account-loading-light.json",dark:"/static/images/__animation__/smart-account/create-account-loading-dark.json"});return dt.default.createElement("div",{className:kt["loading-container"]},dt.default.createElement("div",{className:kt["circle-container"]},dt.default.createElement("div",{className:kt["abs-container"]},dt.default.createElement(Je,{path:t}))),dt.default.createElement("div",{className:kt["add-title"]},o),dt.default.createElement("div",{className:kt.description},e))};l();_();var Gr=x(L());ge();var Qr=({accountId:o,setShowSelectAccount:e,setSelectedWalletId:t})=>{let[,n]=ln({keyringType:Zn.MNEMONIC}),{keyringIdentitiesWithSA:a}=Go(n),s=p(async c=>{t(c.walletId),e(!1)});return Gr.default.createElement(Xo,{keyringIdentities:a,currentWalletId:o,onSelectAccount:s,onAccountCreation:zn})};l();_();var F=x(L());var An=x(Be());l();_();var wn=x(L()),hn=x(Be());l();_();var w={status:"_status_88ayl_1",center:"_center_88ayl_9","page-title":"_page-title_88ayl_14",pageTitle:"_page-title_88ayl_14","gap-top-sm":"_gap-top-sm_88ayl_21",gapTopSm:"_gap-top-sm_88ayl_21","gap-top-lg":"_gap-top-lg_88ayl_24",gapTopLg:"_gap-top-lg_88ayl_24","info-card":"_info-card_88ayl_27",infoCard:"_info-card_88ayl_27","info-card-row":"_info-card-row_88ayl_32",infoCardRow:"_info-card-row_88ayl_32","info-card-row-label":"_info-card-row-label_88ayl_39",infoCardRowLabel:"_info-card-row-label_88ayl_39","info-card-row-primary":"_info-card-row-primary_88ayl_45",infoCardRowPrimary:"_info-card-row-primary_88ayl_45","info-card-row-value":"_info-card-row-value_88ayl_51",infoCardRowValue:"_info-card-row-value_88ayl_51","info-card-row-content":"_info-card-row-content_88ayl_59",infoCardRowContent:"_info-card-row-content_88ayl_59","info-card-row-disable":"_info-card-row-disable_88ayl_66",infoCardRowDisable:"_info-card-row-disable_88ayl_66","info-card-divider":"_info-card-divider_88ayl_69",infoCardDivider:"_info-card-divider_88ayl_69","underline-tip-text":"_underline-tip-text_88ayl_74",underlineTipText:"_underline-tip-text_88ayl_74","tip-contents":"_tip-contents_88ayl_81",tipContents:"_tip-contents_88ayl_81","tip-link":"_tip-link_88ayl_88",tipLink:"_tip-link_88ayl_88","gap-line-container":"_gap-line-container_88ayl_95",gapLineContainer:"_gap-line-container_88ayl_95","gap-line":"_gap-line_88ayl_95",gapLine:"_gap-line_88ayl_95","disable-now":"_disable-now_88ayl_103",disableNow:"_disable-now_88ayl_103","disable-button":"_disable-button_88ayl_106",disableButton:"_disable-button_88ayl_106",footer:"_footer_88ayl_113","confirm-btn":"_confirm-btn_88ayl_113",confirmBtn:"_confirm-btn_88ayl_113",pointer:"_pointer_88ayl_126","expiring-container":"_expiring-container_88ayl_129",expiringContainer:"_expiring-container_88ayl_129","expiring-text":"_expiring-text_88ayl_134",expiringText:"_expiring-text_88ayl_134","expiring-tip":"_expiring-tip_88ayl_137",expiringTip:"_expiring-tip_88ayl_137","new-label":"_new-label_88ayl_143",newLabel:"_new-label_88ayl_143"};var Yr=({onClick:o})=>wn.default.createElement("div",{className:(0,hn.default)(w["info-card"],w["gap-top-sm"],w.pointer),onClick:o,"data-testid":B.STATUS_DISABLE_BTN},wn.default.createElement("div",{className:(0,hn.default)(w["info-card-row"])},wn.default.createElement("div",{className:(0,hn.default)(w["info-card-row-label"],w["info-card-row-disable"])},i("wallet_extension_account_regularcell_textbtn_disable"))));l();_();var Qt=x(L());var Xr=({shouldShowUpgrade:o,teeStatus:e,links:t,withinExpiringDays:n})=>o?i("wallet_extension_account_reminder_text_sa_upgrading",{learn:t.smartAccountWhatAreServiceUpgradesMaintenance?Qt.default.createElement("span",{className:w["tip-link"],onClick:ie.bind(null,t.smartAccountWhatAreServiceUpgradesMaintenance)},i("wallet_extension_home_link_learn_more")):""}):e.isActive?n?i("wallet_extension_account_reminder_text_renew_in_time",{learn:t.smartAccountActivationAndDisableGuide?Qt.default.createElement("span",{className:w["tip-link"],onClick:ie.bind(null,t.smartAccountActivationAndDisableGuide)},i("wallet_extension_home_link_learn_more")):""}):e.isActive?i("wallet_extension_account_reminder_text_always_renew",{learn:t.smartAccountHowToTradeWithSmartAccount?Qt.default.createElement("span",{className:w["tip-link"],onClick:ie.bind(null,t.smartAccountHowToTradeWithSmartAccount)},i("wallet_extension_home_link_learn_more")):""}):null:i("wallet_extension_account_reminder_text_sa_disabled",{learn:t.smartAccountHowToTradeWithSmartAccount?Qt.default.createElement("span",{className:w["tip-link"],onClick:ie.bind(null,t.smartAccountHowToTradeWithSmartAccount)},i("wallet_extension_home_link_learn_more")):""});l();_();var Re=x(L()),Hn=x(Be());var Jr=({onClick:o,shouldShowUpgrade:e})=>Re.default.createElement("div",{className:(0,Hn.default)(w["info-card"],w["gap-top-lg"],w.pointer),onClick:o,"data-testid":B.RENEW_BTN},Re.default.createElement("div",{className:(0,Hn.default)(w["info-card-row"])},Re.default.createElement("div",{className:w["info-card-row-main"]},i(e?"wallet_extension_account_regularcell_textbtn_service_upgrade_required":"wallet_extension_account_regularcell_textbtn_renew")),Re.default.createElement("div",{className:w["info-card-row-content"]},e?Re.default.createElement(Re.default.Fragment,null,Re.default.createElement("span",{className:w["new-label"]},i("wallet_extension_tag_expand_new")),Re.default.createElement(te,{className:"okx-wallet-plugin-chevron-right",fontSize:"12px",style:{color:"var(--okd-color-content-contrast)"}})):Re.default.createElement(te,{className:"okx-wallet-plugin-chevron-right"}))));l();_();var ve=x(L());var $r=({isOutdated:o,withinExpiringDays:e,withinOneDay:t,expiredTimestamp:n,autoRenew:a,onCountdownFinish:s})=>{let c=(0,ve.useMemo)(()=>Xe.formatDateTime(new Date(n),{format:Ye.SimpleDate}),[n]);return a?i("wallet_extension_account_regularcell_label_auto_renewing"):o?ve.default.createElement("span",{className:w["info-card-row-disable"]},i("wallet_extension_account_details_status_disabled")):t?ve.default.createElement("div",{className:w["expiring-container"]},ve.default.createElement("div",{className:w["expiring-text"]},ve.default.createElement("span",null,ve.default.createElement(Vo,{remainingTime:n-Date.now(),expiredTimestamp:n,style:{fontWeight:400,lineHeight:"20px"},timeOnly:!0,onFinish:s}))),ve.default.createElement("div",{className:w["expiring-tip"]},i("wallet_extension_account_tag_expiring_soon"))):e?ve.default.createElement("div",{className:w["expiring-container"]},ve.default.createElement("div",{className:w["expiring-text"]},c),ve.default.createElement("div",{className:w["expiring-tip"]},i("wallet_extension_account_tag_expiring_soon"))):c};var Zr=({walletIdentity:o,teeStatus:e,shouldShowUpgrade:t,setShowDelConfirm:n,setShowPeriodSheet:a,setShowUpgradeConfirm:s,handleFetchSAData:c,handleDisable:d})=>{let{isOutdated:m,withinExpiringDays:g,avatarStatus:C,expiredTimestamp:u,withinOneDay:v}=St({teeStatus:e});We(()=>{so({tee_status:Ro(m,g)})});let y=Se(),N=p(()=>{t?s(!0):a(!0)}),A=p(()=>{d(),n(!0)}),D=p(()=>{c({silent:!0})});return F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:w.status},F.default.createElement(bn,{status:C}),F.default.createElement("div",{className:w["page-title"]},i("wallet_extension_account_header_smart_account_status")),F.default.createElement("div",{className:(0,An.default)(w["info-card"],w["gap-top-sm"])},F.default.createElement("div",{className:w["info-card-row"]},F.default.createElement("div",{className:w["info-card-row-label"]},i("wallet_extension_account_details_label_account")),F.default.createElement("div",{className:w["info-card-row-content"]},o.walletName)),F.default.createElement("div",{className:w["info-card-divider"]}),F.default.createElement("div",{className:w["info-card-row"]},F.default.createElement("div",{className:(0,An.default)(w["info-card-row-label"])},i("wallet_extension_account_details_label_status")),F.default.createElement("div",{className:(0,An.default)({[w["info-card-row-content"]]:!0,[w["info-card-row-disable"]]:!e.isActive})},i(e.isActive?"wallet_extension_account_details_status_enabled":"wallet_extension_account_details_status_disabled"))),e.isActive?F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:w["info-card-divider"]}),F.default.createElement("div",{className:w["info-card-row"]},F.default.createElement("div",{className:w["info-card-row-label"]},i(v?"wallet_extension_account_regularcell_label_renew_in":"wallet_extension_account_regularcell_label_enabled_until")),F.default.createElement("div",{className:w["info-card-row-content"],"data-testid":B.STATUS_EXPIRE_LABEL},F.default.createElement($r,{isOutdated:m,withinExpiringDays:g,expiredTimestamp:u,withinOneDay:v,onCountdownFinish:D,autoRenew:e.autoRenew&&e.teeServiceVersion===e.teeNewestVersion})))):null),e.isActive?F.default.createElement(F.default.Fragment,null,F.default.createElement(Jr,{shouldShowUpgrade:t,onClick:N}),F.default.createElement(Yr,{onClick:A})):null,F.default.createElement("div",{className:w["tip-contents"]},F.default.createElement(Xr,{shouldShowUpgrade:t,teeStatus:e,links:y,withinExpiringDays:g}))),e.isActive?null:F.default.createElement(he,{className:w.footer},F.default.createElement(E,{className:w["confirm-btn"],onClick:()=>{a(!0)},type:E.TYPE.primary,"data-testid":B.STATUS_ENABLE_BTN},i("wallet_extension_account_smart_btn_enable"))))};l();_();var Ae=x(L());var Sn=x(Be());ge();l();_();var se={"upgrade-confirm":"_upgrade-confirm_1a0jo_1",upgradeConfirm:"_upgrade-confirm_1a0jo_1","page-title":"_page-title_1a0jo_7",pageTitle:"_page-title_1a0jo_7","page-subtitle":"_page-subtitle_1a0jo_12",pageSubtitle:"_page-subtitle_1a0jo_12","gap-top-sm":"_gap-top-sm_1a0jo_18",gapTopSm:"_gap-top-sm_1a0jo_18","upgrade-success":"_upgrade-success_1a0jo_21",upgradeSuccess:"_upgrade-success_1a0jo_21",animation:"_animation_1a0jo_29","success-title":"_success-title_1a0jo_33",successTitle:"_success-title_1a0jo_33","footer-container":"_footer-container_1a0jo_38",footerContainer:"_footer-container_1a0jo_38","confirm-btn":"_confirm-btn_1a0jo_38",confirmBtn:"_confirm-btn_1a0jo_38","loading-btn":"_loading-btn_1a0jo_41",loadingBtn:"_loading-btn_1a0jo_41","active-btn":"_active-btn_1a0jo_47",activeBtn:"_active-btn_1a0jo_47"};var ea=({handleReEnable:o,setShowUpgradeConfirm:e,onReenableSuccess:t,upgradeLoading:n})=>{let[a,s]=(0,Ae.useState)(!1),c=Ze({dark:"/static/images/__animation__/dapp/success-dark.json",light:"/static/images/__animation__/dapp/success-light.json"}),d=p(()=>{Ce(t)?t():e(!1)}),m=p(async()=>{if(n)return;(await o({expirePeriodDay:null}))?.data&&s(!0)});return a?Ae.default.createElement("div",{className:se["upgrade-success"]},Ae.default.createElement(Je,{className:se.animation,path:c,loop:!1}),Ae.default.createElement("div",{className:se["success-title"]},i("wallet_extension_function_toast_upgrade_success")),Ae.default.createElement(he,{className:se["footer-container"]},Ae.default.createElement(E,{className:(0,Sn.default)(se["confirm-btn"],se["active-btn"]),onClick:d,loadingText:i("wallet_extension_function_btn_upgrading"),type:E.TYPE.primary},i("wallet_extension_complete_btn_done")))):Ae.default.createElement("div",{className:se["upgrade-confirm"]},Ae.default.createElement("div",{className:se["page-title"]},i("wallet_extension_account_header_sa_service_upgrade_required")),Ae.default.createElement("div",{className:(0,Sn.default)(se["page-subtitle"],se["gap-top-sm"])},i("wallet_extension_account_text_sa_service_upgrade")),Ae.default.createElement(he,{className:se["footer-container"]},Ae.default.createElement(E,{className:(0,Sn.default)({[se["confirm-btn"]]:!0,[se["active-btn"]]:!n,[se["loading-btn"]]:n}),loaderProps:{color:"var(--okd-color-content-disabled)"},onClick:m,loading:n,loadingText:i("wallet_extension_function_btn_upgrading"),type:n?E.TYPE.gray:E.TYPE.primary},i("wallet_extension_function_btn_upgrade"))))};l();_();var Q=x(L());var yn=x(Be());l();_();var ae={welcome:"_welcome_1mhs3_1","header-container":"_header-container_1mhs3_9",headerContainer:"_header-container_1mhs3_9",contents:"_contents_1mhs3_14",title:"_title_1mhs3_18","des-item":"_des-item_1mhs3_24",desItem:"_des-item_1mhs3_24","des-icon":"_des-icon_1mhs3_30",desIcon:"_des-icon_1mhs3_30","des-content":"_des-content_1mhs3_40",desContent:"_des-content_1mhs3_40","des-title":"_des-title_1mhs3_45",desTitle:"_des-title_1mhs3_45","des-text":"_des-text_1mhs3_51",desText:"_des-text_1mhs3_51","underline-link":"_underline-link_1mhs3_57",underlineLink:"_underline-link_1mhs3_57",footer:"_footer_1mhs3_63","confirm-btn":"_confirm-btn_1mhs3_63",confirmBtn:"_confirm-btn_1mhs3_63","popup-header":"_popup-header_1mhs3_76",popupHeader:"_popup-header_1mhs3_76","popup-contents":"_popup-contents_1mhs3_83",popupContents:"_popup-contents_1mhs3_83"};var ba=({onConfirm:o})=>{We(()=>{ro()});let e=p(()=>{o(),lo()}),t=Ze({light:"/static/images/__animation__/smart-account/welcome-light.json",dark:"/static/images/__animation__/smart-account/welcome-dark.json"}),n=(0,Q.useMemo)(()=>ko(),[]),a=Se(),s=[{icon:"okx-wallet-plugin-rade-simple",title:i("wallet_extension_popup_title_advanced_strat"),description:i("wallet_extension_popup_subtitle_advanced_strat")},{icon:"okx-wallet-plugin-security-completed-filled",title:i("wallet_extension_popup_title_maintain_selfcustody"),description:i("wallet_extension_popup_subtitle_tee_selfcustody",{learn:a.smartAccountWhatIsSmartAccount?Q.default.createElement("span",{className:ae["underline-link"],onClick:ie.bind(null,a.smartAccountWhatIsSmartAccount)},i("wallet_extension_home_link_learn_more")):""})}];return Q.default.createElement(Q.default.Fragment,null,Q.default.createElement("div",{className:ae.welcome},Q.default.createElement("div",{className:(0,yn.default)({[ae["header-container"]]:!0,[ae["popup-header"]]:n})},Q.default.createElement(Je,{path:t,loop:!1})),Q.default.createElement("div",{className:(0,yn.default)({[ae.contents]:!0,[ae["popup-contents"]]:n})},Q.default.createElement("div",{className:ae.title},i("wallet_extension_popup_header_smart_account")),Q.default.createElement("div",{className:ae.des},s.map(c=>Q.default.createElement("div",{className:ae.desItem,key:c.title},Q.default.createElement("div",{className:ae["des-icon"]},Q.default.createElement(te,{className:(0,yn.default)(c.icon)})),Q.default.createElement("div",{className:ae["des-content"]},Q.default.createElement("div",{className:ae.desTitle},c.title),Q.default.createElement("div",{className:ae["des-text"]},c.description))))))),Q.default.createElement(he,{className:ae.footer},Q.default.createElement(E,{className:ae["confirm-btn"],onClick:e,type:E.TYPE.primary,"data-testid":B.WELCOME_BTN},i("wallet_extension_popup_btn_get_started"))))},ta=ba;var wa=({onEnableSuccess:o,onExtendSuccess:e,onReenableSuccess:t,onDisableSuccess:n,onExit:a,...s})=>{let{from:c,actionType:d,requestUpgrade:m,showFeature:g,autoRenew:C}=s,{isFromDex:u,isFromBanner:v,isFromWalletManageCreate:y,isDexEnableAction:N}=sr({from:c,actionType:d}),{isSmartAccountActivatedOnce:A,markActivated:D}=Lo(),{handlePlatformBack:M,handleExtensionClose:H,removeQueryFrom:T,handleExtensionBack:K}=lr({isFromDex:u,...s}),{showWelcome:Z,isCreating:ce,isValidating:Y,showDelConfirm:U,showEnableDone:X,showPeriodSheet:$,showUpgradeConfirm:ee,showSelectAccount:G,setIsValidating:le,setShowWelcome:V,setIsCreating:_e,setShowEnableDone:De,setShowDelConfirm:it,setShowPeriodSheet:oe,setShowUpgradeConfirm:Ue,setShowSelectAccount:Le}=Wr({isSmartAccountActivatedOnce:A,isFromDex:u,isFromWalletManageCreate:y,showFeature:g}),{isFundReady:Fe,walletIdentity:me,keyringIdentity:st,walletCreated:Ie,createWalletName:pe,newlyCreatedWalletId:Pe,selectedWalletId:ut,handleCreateWallet:xn,handleAutoConnectDapp:mt,setSelectedWalletId:Ct}=Rr({...s,isFromDex:u,setIsValidating:le,removeQueryFrom:T,handlePlatformBack:M}),{handleToastTeeNetError:pt,handleToastReEnableSuccess:Nt,handleToastExtendSuccess:ft,handleToastReactivateOrderAndStrategyOrders:Yt,handleToastAccountAddedButNotEnable:Xt,handleToastAccountAddedAndEnabled:Et,handleToastSAEnableFailed:Tt,handleToastReEnableFailed:ct,handleToastExtendFailed:vn,handleToastTeeMaintenance:In}=Br({isFromDex:u,walletCreated:Ie,createWalletName:pe,handlePlatformBack:M,onExit:a}),Jt=Boolean(m),{metadata:je,teeStatus:de,saActivateRes:gt,isCreated:$t,upgradeStatusResponse:Dt,shouldShowUpgrade:Lt,orderCount:Pn,strategyCount:kn,handleReEnable:bt,handleEnable:Ft,handleDel:f,handleFetchSAData:I,handleRefresh:q,handleDisable:fe}=Lr({isFromDex:u,isSmartAccountActivatedOnce:A,walletIdentity:me,showWelcome:Z,isValidating:Y,walletCreated:Ie,createWalletName:pe,requestUpgrade:Jt,showUpgradeConfirm:ee,setIsCreating:_e,setIsValidating:le,markActivated:D,setShowWelcome:V,handlePlatformBack:M,setShowEnableDone:De,handleExtensionClose:H,handleToastTeeNetError:pt,handleToastReEnableSuccess:Nt,handleToastReactivateOrderAndStrategyOrders:Yt,handleToastExtendSuccess:ft,handleToastAccountAddedAndEnabled:Et,handleToastSAEnableFailed:Tt,handleToastReEnableFailed:ct,handleToastExtendFailed:vn,handleToastTeeMaintenance:In,onDisableSuccess:n,onExtendSuccess:e,onReenableSuccess:t,handleAutoConnectDapp:mt});Or({metadata:je,isCreating:ce,isValidating:Y,newlyCreatedWalletId:Pe,handleCreateWallet:xn,handleFetchSAData:I});let Oe=de===null||je===null||!Dt||!de.isCreated&&!Fe,{loading:Zt,fn:Qe}=ye({fn:bt}),{hideNavigator:Ot,navigatorProps:en}=ir({isFromDex:u,showWelcome:Z,isCreated:$t,showDelConfirm:U,isCreating:ce,isShowPageLoading:Oe,showUpgradeConfirm:ee,upgradeLoading:Zt,showSelectAccount:G,onDelConfirmBack:it.bind(null,!1),onUpgradeConfirmBack:Ue.bind(null,!1),onSelectAccountBack:Le.bind(null,!1),onClose:async()=>{await a?.(),H()},onBack:async()=>{let jn=gt?.data?.isActive??!1;Ie&&pe&&jn&&X?Et(pe):Ie&&pe&&!jn&&Xt(pe),await a?.(),K()}}),na=p(()=>{y?(V(!1),_e(!0)):V(!1)}),{expirePeriodOptions:Rn,enableValue:Cn,displayEnableLabel:oa,setEnableValue:Un}=rr(je,de,C),ra=p(async()=>{await mt(),Ce(o)?o():(Ie&&pe&&Et(pe),M())}),aa=(0,R.useMemo)(()=>y||Z?!1:u?!0:de&&de.isCreated===!1,[Z,y,de,u]),ke;return!me||!st?null:(ce?ke=R.default.createElement(Kr,{title:i("wallet_extension_account_cell_nav_title_adding_account",{account:pe}),description:i("wallet_extension_account_cell_nav_subtitle_stay_on_page")}):G?ke=R.default.createElement(Qr,{accountId:me.walletId,setShowSelectAccount:Le,setSelectedWalletId:Ct}):Oe?ke=R.default.createElement($o,null):X&&gt?.data?ke=R.default.createElement(zr,{onConfirm:ra,walletIdentity:me,activateRes:gt.data,handleAutoConnectDapp:mt}):Z?ke=R.default.createElement(ta,{onConfirm:na}):ee?ke=R.default.createElement(ea,{handleReEnable:Qe,setShowUpgradeConfirm:Ue,upgradeLoading:Zt,onReenableSuccess:t}):!je||!de?ke=null:U?ke=R.default.createElement(Ur,{orderCount:Pn,strategyCount:kn,teeStatus:de,onDel:f}):$t&&!N&&!ut?ke=R.default.createElement(R.default.Fragment,null,R.default.createElement(Zr,{walletIdentity:me,teeStatus:de,shouldShowUpgrade:Lt,setShowPeriodSheet:oe,setShowUpgradeConfirm:Ue,setShowDelConfirm:it,handleFetchSAData:I,handleDisable:fe}),R.default.createElement(Tn,{needSelectPeriodFirst:!0,visible:$,enableValue:Cn,expirePeriodOptions:Rn,setEnableValue:Un,setVisible:oe,metadata:je,teeStatus:de,onRefresh:q,onEnable:Ft,onUpgrade:bt,shouldShowUpgrade:Lt})):ke=R.default.createElement(R.default.Fragment,null,R.default.createElement(qr,{walletIdentity:me,metadata:je,teeStatus:de,onEnableSuccess:o,onExit:a,handleExtensionBack:K,isFromBanner:v,isFromDex:u,setShowSelectAccount:Le,setShowPeriodSheet:oe,displayEnableLabel:oa,handleAutoConnectDapp:mt,handleEnable:Ft,handleReEnable:bt,enableValue:Cn}),R.default.createElement(Tn,{needSelectPeriodFirst:!1,visible:$,enableValue:Cn,expirePeriodOptions:Rn,setEnableValue:Un,setVisible:oe,metadata:je,teeStatus:de,onRefresh:q,onEnable:Ft,onUpgrade:bt,shouldShowUpgrade:Lt})),R.default.createElement(R.default.Fragment,null,R.default.createElement(bo.Container,{style:{display:"flex",flexDirection:"column"}},Ot?null:R.default.createElement(Co,{bordered:!1,...en}),R.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},ke)),aa?R.default.createElement(or,{accountId:me.walletId,teeId:me.teeId}):null))},ap=wa;export{ap as a};
//# sourceMappingURL=chunk-76424Q4M.js.map
