import{a as oe,b as ae,c as Fe,d as le,e as ne}from"./chunk-SSSSIORX.js";import{a as Be,b as De}from"./chunk-BDXN3GYH.js";import"./chunk-772ZJYXN.js";import{a as Ne}from"./chunk-MNRE2RWN.js";import{a as Le}from"./chunk-UX2JFEX5.js";import{d as ke}from"./chunk-AVG63QW4.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import{Aa as Ae,Ka as Se,Ma as Ee}from"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import{a as We,b as Me}from"./chunk-7XMX77LA.js";import"./chunk-K4WQYYBB.js";import{c as D}from"./chunk-NCGPJXQK.js";import"./chunk-VGYB2PVD.js";import"./chunk-BYDDPVAA.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as Te}from"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-VUBIYSGX.js";import"./chunk-FHFRBSOO.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{a as tr,o as z}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-ARDRUD4P.js";import{h as Ie,j as be}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{a as ge}from"./chunk-KC2XLVFC.js";import"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{Bb as xe,b as Ce}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import{c as ce}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{ja as B}from"./chunk-3F7OC7N7.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{h as te}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as E}from"./chunk-3FMJDUGT.js";import{c as M}from"./chunk-2O5TMJZM.js";import{J as pe,c as _e}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import{b as ue}from"./chunk-XOHZCMW2.js";import{Z as U,da as j,gb as P,ib as Q}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{C as W,k as L,p as d,q as H}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as ee}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{J as we,aa as Re,b as he,o as ve,q as fe,r as ye}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import{a as rr}from"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import{a as re}from"./chunk-IQUFNLVG.js";import{C as T,t as K}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import"./chunk-FB3ILH2L.js";import{b as N}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import"./chunk-4C5HF6J2.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import{a as er}from"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as I,o as i,q as s}from"./chunk-UWURTNRY.js";i();s();var Y=I(N()),Qe=I(ee());i();s();var m=I(N()),Ge=I(ee());i();s();var C=I(N());i();s();var V=I(N());i();s();var X=I(N());var or=e=>{let r=Le(),o=(0,X.useMemo)(()=>`${r.origin}/referral`,[r.origin]),a=(0,X.useMemo)(()=>`${r.origin}/referral/dashboard`,[r.origin]),l=(0,X.useMemo)(()=>e?`${r.origin}${Ee(e)}`:"",[r.origin,e]),t=(0,X.useMemo)(()=>`${r.origin}/token`,[r.origin]);return{toCreateUrl:o,createDashboardUrl:a,inviteUrl:l,toTradeUrl:t}},G=or;i();s();var me=I(rr());var O=()=>async(r,o,a,l)=>{if(!a)return"";if(a===501){let p=me.default.encode(new TextEncoder().encode(o)),_=await ce().signCommonMessage(r.walletId,l,p,Q),u=me.default.decode(_);return Array.prototype.map.call(u,f=>`00${f.toString(16)}`.slice(-2)).join("")}let n={from:l,data:o,isSilentSign:!0};return await ce().signPersonalMessage(n,P,r.walletId)};i();s();i();s();var ar=async({key:e})=>{try{return await We(e)}catch{return null}},lr=async({key:e,value:r})=>{try{return await Me(e,r)}catch{return!1}},nr=new Ne({ont:_e,getApiHostname:ue,interceptorHeaders:pe,getDappStorage:ar,setDappStorage:lr}),q=nr;var ir=async({code:e,currentAddress:r,allAddressMap:o,type:a,signMessage:l,walletAccount:t,chainId:n,restore:v})=>{let p=await q.verifyInvitee({code:e,currentAddress:r,allAddressMap:o,type:a});if(p.error)throw p.error;let{discountRate:_,inviterAddresses:u}=p,R=Ae(e,u);if(!R)throw new Error("No sign message");let f=await l(t,R,n,r),g=await q.processReferralBinding({code:e,sign:f,commissionAddress:u,discountRate:_,currentAddress:r,source:4,restore:v,walletId:t.walletId,chainId:n,type:t.serverWalletType});if(g?.error)throw g.error;return{code:e,discountRate:_}},ie=ir;i();s();var se=async(e,r,o,a)=>{let l=await q.getSignSignatureMessage(),t=await a(e,l,r,o);return t?btoa(`msg=${l}&signature=${t}&chainId=${r}`):""};var sr=({walletAccount:e,chainId:r,walletAddress:o,loading:a,allAddressMap:l,getLocalReferralCodeInfo:t})=>{let[n,v]=(0,V.useState)([]),[p,_]=(0,V.useState)(!1),[u,R]=(0,V.useState)(!1),f=O(),{runAsync:g}=D(M.getBackendReferralCode,{method:"GET",catchMode:"noToast"},{manual:!0}),{toTradeUrl:y}=G(),h=async()=>{if(!e||a||!r)return;let k=await se(e,r,o,f),F=await g({address:o,walletType:Se(e.serverWalletType)},{config:{headers:{"X-Web3-AuthSign":k}}});F?.data?.list?.length&&(v(F?.data?.list),_(!0))},Z=async k=>{if(!(!e||!k||!r))try{R(!0);let{discountRate:F}=await ie({code:k.code,currentAddress:o,allAddressMap:l,type:e.serverWalletType,signMessage:f,walletAccount:e,chainId:r,restore:!0});R(!1),_(!1),oe({referralCodeInput:k.code,discountRate:F,toTradeUrl:y}),t()}catch(F){ae(F),R(!1)}};return(0,V.useEffect)(()=>{h()},[e,a]),{restoreReferralList:n,showRestoreDialog:p,setShowRestoreDialog:_,handleRestoreReferral:Z,restoreReferralCodeLoading:u}},Pe=sr;i();s();var A={"dialog-container":"_dialog-container_1bhmh_1",dialogContainer:"_dialog-container_1bhmh_1","dialog-title":"_dialog-title_1bhmh_8",dialogTitle:"_dialog-title_1bhmh_8","dialog-image":"_dialog-image_1bhmh_16",dialogImage:"_dialog-image_1bhmh_16","dialog-text":"_dialog-text_1bhmh_21",dialogText:"_dialog-text_1bhmh_21","dialog-code":"_dialog-code_1bhmh_27",dialogCode:"_dialog-code_1bhmh_27","dialog-list":"_dialog-list_1bhmh_32",dialogList:"_dialog-list_1bhmh_32","dialog-list-item":"_dialog-list-item_1bhmh_42",dialogListItem:"_dialog-list-item_1bhmh_42","dialog-list-item-code":"_dialog-list-item-code_1bhmh_50",dialogListItemCode:"_dialog-list-item-code_1bhmh_50","dialog-list-item-discount":"_dialog-list-item-discount_1bhmh_59",dialogListItemDiscount:"_dialog-list-item-discount_1bhmh_59"};var dr=({walletAccount:e,chainId:r,walletAddress:o,loading:a,allAddressMap:l,getLocalReferralCodeInfo:t})=>{let{restoreReferralList:n,showRestoreDialog:v,setShowRestoreDialog:p,handleRestoreReferral:_}=Pe({walletAccount:e,chainId:r,walletAddress:o,loading:a,allAddressMap:l,getLocalReferralCodeInfo:t}),[u,R]=(0,C.useState)(null);(0,C.useEffect)(()=>{R(n[0])},[n]);let f=h=>{R(h)},g=te({light:"/cdn/assets/imgs/590/BA8787353445423DA798DE6BDBE1D431.png",dark:"/cdn/assets/imgs/039/2ACCAFBD3E9D4619B0CB2E64E9A444F3.png"}),y=()=>n.length===1?C.default.createElement("div",{className:A.dialogContainer},C.default.createElement(re,{src:g,className:A.dialogImage}),C.default.createElement("div",{className:A.dialogTitle},d("wallet_extension_dexreferral_title_restore_referral_code")),C.default.createElement("div",{className:A.dialogText},H("wallet_extension_dexreferral_desc_referral_code_used",{code:C.default.createElement("span",{className:A.dialogCode},n[0].code),num:W.percent(L.mul(n[0].discountRate,100))}))):C.default.createElement("div",{className:A.dialogContainer},C.default.createElement("div",{className:A.dialogTitle},d("wallet_extension_dexreferral_title_restore_referral_code")),C.default.createElement("div",{className:A.dialogText},d("wallet_extension_restore_desc_codes_been_applied")),C.default.createElement("div",{className:A.dialogList},n.map((h,Z)=>C.default.createElement(he,{key:h.code,onClick:()=>f(h),className:A.dialogListItem},C.default.createElement("div",null,C.default.createElement("div",{className:A.dialogListItemCode},C.default.createElement("div",null,h.code),Z===0&&C.default.createElement(Re,null,d("wallet_extension_restore_tag_recommended"))),C.default.createElement("div",{className:A.dialogListItemDiscount},d("wallet_extension_restore_label_num_discount",{num:W.percent(L.mul(h.discountRate,100))}))),C.default.createElement(ye.Circle,{checked:u?.code===h.code})))));return C.default.createElement(ve.Action,{title:" ",visible:v,onClose:()=>p(!1),cancelText:d("wallet_extension_dexreferral_btn_skip"),onCancel:()=>p(!1),confirmText:d("wallet_extension_dexreferral_btn_restore"),onConfirm:async()=>{await _(u)},confirmBtnProps:{disabled:!u}},y())},qe=dr;i();s();var J=I(N());var cr=(e,r)=>{let{walletAddress:o,chainId:a,allAddressMap:l}=(0,J.useMemo)(()=>{if(!e)return{walletAddress:"",chainId:null,allAddressMap:{}};let{account:f,serverWalletType:g}=e,y=f;if(g===B.IMPORT||g===B.NEW)return{walletAddress:y?.[U],chainId:1,allAddressMap:{1:y?.[U],501:y?.[j]}};if(g===B.PRIVATE_KEY){if(y?.[U])return{walletAddress:y?.[U],chainId:1,allAddressMap:{1:y?.[U],501:y?.[j]}};if(y?.[j])return{walletAddress:y?.[j],chainId:501,allAddressMap:{501:y?.[j]}}}return{walletAddress:"",chainId:null,allAddressMap:{}}},[e]),t=O(),[n,v]=(0,J.useState)(""),[p,_]=(0,J.useState)(!1),{toTradeUrl:u}=G();return{referralCodeInput:n,setReferralCodeInput:v,handleBindReferralCode:async()=>{if(!(!e||!a))try{_(!0);let{discountRate:f}=await ie({code:n,currentAddress:o,allAddressMap:l,type:e.serverWalletType,signMessage:t,walletAccount:e,chainId:a,restore:!1});_(!1),r(),oe({referralCodeInput:n,discountRate:f,toTradeUrl:u})}catch(f){ae(f),_(!1)}},bindReferralCodeLoading:p,toTradeUrl:u,walletAddress:o,chainId:a,allAddressMap:l}},He=cr;i();s();var $=I(N()),je=I(er());var Ue={12004:"wallet_extension_dexreferral_join_error_invalid_code",12013:"wallet_extension_dexreferral_error_code_frozen",12007:"wallet_extension_dexreferral_error_code_frozen"},fr=({setReferralCodeInput:e,walletAddress:r,chainId:o})=>{let[a,l]=(0,$.useState)(null),[t,n]=(0,$.useState)(null),[v,p]=(0,$.useState)(!1),_=(0,$.useRef)(""),{runAsync:u}=D(M.checkReferralCode,{method:"GET",catchMode:"noToast"},{manual:!0,debounceWait:300,onSuccess:f=>{f?.data?.refCode===_.current&&n(f?.data)},onError:f=>{f.code&&Ue[f.code]?l(d(Ue[f.code])):l(d("wallet_extension_dexreferral_join_error_invalid_code"))}});return{referralInputError:a,onChangeReferralCode:async f=>{let g=f.target.value.toUpperCase();e(g),_.current=g,n(null),p(!0);let y=/^[a-zA-Z0-9]{5,15}$/;try{g&&!y.test(g)?l(d("wallet_extension_dexreferral_join_error_invalid_code")):(l(null),g&&r&&o&&await u({code:g,address:r,chainId:o}))}catch{(0,je.noop)()}finally{p(!1)}},referralCodeCheckResult:t,checkReferralCodeLoading:v}},ze=fr;i();s();var w={content:"_content_xvquc_1",title:"_title_xvquc_4","form-area":"_form-area_xvquc_11",formArea:"_form-area_xvquc_11","input-area":"_input-area_xvquc_20",inputArea:"_input-area_xvquc_20","input-tips-box":"_input-tips-box_xvquc_23",inputTipsBox:"_input-tips-box_xvquc_23","select-wallet":"_select-wallet_xvquc_27",selectWallet:"_select-wallet_xvquc_27","wallet-info":"_wallet-info_xvquc_37",walletInfo:"_wallet-info_xvquc_37","wallet-avatar":"_wallet-avatar_xvquc_41",walletAvatar:"_wallet-avatar_xvquc_41","wallet-details":"_wallet-details_xvquc_44",walletDetails:"_wallet-details_xvquc_44","wallet-primary":"_wallet-primary_xvquc_50",walletPrimary:"_wallet-primary_xvquc_50","wallet-primary-text":"_wallet-primary-text_xvquc_54",walletPrimaryText:"_wallet-primary-text_xvquc_54","wallet-dropdown-icon":"_wallet-dropdown-icon_xvquc_57",walletDropdownIcon:"_wallet-dropdown-icon_xvquc_57","wallet-secondary":"_wallet-secondary_xvquc_60",walletSecondary:"_wallet-secondary_xvquc_60","wallet-keyring":"_wallet-keyring_xvquc_67",walletKeyring:"_wallet-keyring_xvquc_67","arrow-icon":"_arrow-icon_xvquc_70",arrowIcon:"_arrow-icon_xvquc_70","referral-code-info":"_referral-code-info_xvquc_74",referralCodeInfo:"_referral-code-info_xvquc_74","referral-code-label":"_referral-code-label_xvquc_82",referralCodeLabel:"_referral-code-label_xvquc_82","referral-code-value":"_referral-code-value_xvquc_87",referralCodeValue:"_referral-code-value_xvquc_87","referral-code-icon":"_referral-code-icon_xvquc_92",referralCodeIcon:"_referral-code-icon_xvquc_92"};var mr=({walletAccount:e,loading:r,getLocalReferralCodeInfo:o})=>{let{referralCodeInput:a,walletAddress:l,chainId:t,allAddressMap:n,setReferralCodeInput:v,handleBindReferralCode:p,bindReferralCodeLoading:_}=He(e,o),{referralInputError:u,onChangeReferralCode:R,referralCodeCheckResult:f,checkReferralCodeLoading:g}=ze({referralCodeInput:a,setReferralCodeInput:v,walletAddress:l,chainId:t}),y=g||_,h=r||!!u||!a;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:w.title},d("wallet_extension_dexreferral_join_title_with_referral")),m.default.createElement("div",{className:w.formArea},m.default.createElement("div",{className:w.inputArea},m.default.createElement(fe,{label:d("wallet_extension_dexreferral_join_label_referral_code"),tipInnerClassName:w.inputTipsBox,value:a,onChange:R,error:u,errorType:fe.TIP_TYPE.always,tips:f?.discountRate||f?.discountRate===0?d("wallet_extension_dexreferral_text_your_discount_rate",{discount:W.percent(L.mul(f.discountRate,100))}):void 0})),m.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.primary,block:!0,size:T.SIZE.lg,onClick:()=>p(),loading:y,disabled:h},d("commonall_text_btn_confirm"))),m.default.createElement(qe,{walletAccount:e,chainId:t,walletAddress:l,loading:r,allAddressMap:n,getLocalReferralCodeInfo:o}))},_r=({localReferralCodeInfo:e})=>{let r=e.refCode,o=e.discountRate;return m.default.createElement("div",{className:w.referralCodeInfo},m.default.createElement(K,{fontSize:"20px",iconName:"okds-success-circle-fill",className:w.referralCodeIcon}),m.default.createElement("span",{className:w.referralCodeLabel},H("wallet_extension_dexreferral_referral_code",{code:m.default.createElement("span",{className:w.referralCodeValue},r," (",W.percent(L.mul(o,100)),")")})))},ur=({localReferralCodeInfo:e,walletAccount:r,loading:o,getLocalReferralCodeInfo:a})=>{let l=(0,Ge.useHistory)(),t=()=>{let n=xe;l.push(n)};return m.default.createElement("div",{className:w.content},m.default.createElement("button",{type:"button",className:w.selectWallet,onClick:t},r?m.default.createElement(E.FlexBox,{align:E.ALIGN.center,className:w.walletInfo},m.default.createElement(De,{size:Be.sm,walletIdentity:{account:r.account,walletId:r.walletId},className:w.walletAvatar}),m.default.createElement(E.FlexBox,{direction:E.DIRECTION.vertical,className:w.walletDetails},m.default.createElement(E.FlexBox,{align:E.ALIGN.center,className:w.walletPrimary},m.default.createElement(z.Text,{strong:500,ellipsis:!0,size:z.SIZE.sm,className:w.walletPrimaryText},r.keyringName),m.default.createElement(Te,{size:"16px",fontSize:"16px",className:w.walletDropdownIcon,icon:"okx-wallet-plugin-down-1"})),m.default.createElement(E.FlexBox,{align:E.ALIGN.center,className:w.walletSecondary},r.walletName?m.default.createElement(z.Text,{size:z.SIZE.xs,type:z.TYPE.secondary,ellipsis:!0},r.walletName):null))):null),e?m.default.createElement(_r,{localReferralCodeInfo:e}):m.default.createElement(mr,{walletAccount:r,loading:o,getLocalReferralCodeInfo:a}))},Oe=ur;i();s();var c=I(N()),$e=I(ee()),Ye=I(tr());i();s();var de=I(N());var pr=e=>{let r=(0,de.useMemo)(()=>{if(!e)return"";let{account:n}=e;return n?.[P]||""},[e]),o=O(),{data:a,runAsync:l}=D(M.getCreatedReferralCode,{method:"GET",params:{inviter:r},catchMode:"noToast"},{refreshDeps:[r],manual:!0}),t=ge(async()=>{if(!e||!r)return;let n=await se(e,1,r,o);l({inviter:r},{config:{headers:{"X-Web3-AuthSign":n}}})});return(0,de.useEffect)(()=>{t()},[e]),a?.data??null},Ve=pr;i();s();var x={"create-referral-entry":"_create-referral-entry_17sbe_1",createReferralEntry:"_create-referral-entry_17sbe_1","create-referral-entry-img":"_create-referral-entry-img_17sbe_9",createReferralEntryImg:"_create-referral-entry-img_17sbe_9","create-referral-entry-title":"_create-referral-entry-title_17sbe_14",createReferralEntryTitle:"_create-referral-entry-title_17sbe_14","create-referral-entry-title-msg":"_create-referral-entry-title-msg_17sbe_23",createReferralEntryTitleMsg:"_create-referral-entry-title-msg_17sbe_23","create-referral-info":"_create-referral-info_17sbe_29",createReferralInfo:"_create-referral-info_17sbe_29","create-referral-info-title":"_create-referral-info-title_17sbe_37",createReferralInfoTitle:"_create-referral-info-title_17sbe_37",rate:"_rate_17sbe_42",rateTitle:"_rateTitle_17sbe_47",rateValue:"_rateValue_17sbe_52",divide:"_divide_17sbe_57",referralContent:"_referralContent_17sbe_63",referralContentItemLeft:"_referralContentItemLeft_17sbe_73",referralContentItemRight:"_referralContentItemRight_17sbe_80",referralContentCopyIcon:"_referralContentCopyIcon_17sbe_86",referralContentTitle:"_referralContentTitle_17sbe_90",referralContentValue:"_referralContentValue_17sbe_95"};var gr=({url:e,walletAccount:r})=>{let o=te({light:"/cdn/assets/imgs/2511/7A512A589409154D.png",dark:"/cdn/assets/imgs/2511/D306989E054E3C68.png"}),a=ne("create"),l=(0,$e.useHistory)(),t=(0,c.useCallback)(()=>{!le(r,l,a.filteredKeyringIdentities,"create")||globalThis.platform.openTab({url:e})},[r,e,l,a.filteredKeyringIdentities]);return c.default.createElement("div",{className:x.createReferralEntry},c.default.createElement(re,{src:o,className:x.createReferralEntryImg}),c.default.createElement("div",{className:x.createReferralEntryTitle},H("wallet_extension_dexreferral_join_bannertext_invite_friends_and_earn",{msg:c.default.createElement("span",{className:x.createReferralEntryTitleMsg},d("wallet_extension_dexreferral_banner_earn_up_to"))})),c.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.primary,block:!0,size:T.SIZE.lg,onClick:()=>{t()}},d("wallet_extension_dexreferral_join_btn_create_code")))},Cr=({url:e,discountRate:r,commissionRate:o,defaultCode:a,inviteUrl:l})=>{let t=(0,c.useCallback)((n,v)=>{(0,Ye.default)(n),v&&we.success({title:v})},[]);return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:x.createReferralInfo},c.default.createElement("div",{className:x.rate},c.default.createElement("div",{className:x.rateTitle},d("wallet_extension_dexreferral_join_label_rate_you_invitee")),c.default.createElement("div",{className:x.rateValue},`${W.percent(L.mul(o,100))} / ${W.percent(L.mul(r,100))}`)),c.default.createElement("div",{className:x.divide}),c.default.createElement("div",{className:x.referralContent},c.default.createElement("div",{className:x.referralContentItemLeft},c.default.createElement("div",{className:x.referralContentTitle},d("wallet_extension_dexreferral_join_label_default_referral_code")),c.default.createElement("div",{className:x.referralContentValue},a)),c.default.createElement("div",{className:x.referralContentItemRight},c.default.createElement(K,{fontSize:"24px",iconName:"okx-wallet-plugin-copy",className:x.referralContentCopyIcon,onClick:()=>{t(a??"",d("wallet_extension_dexreferral_join_alert_referral_code_copied"))},a11yText:d("wallet_extension_dexreferral_join_alert_referral_code_copied")}))),c.default.createElement("div",{className:x.referralContent},c.default.createElement("div",{className:x.referralContentItemLeft},c.default.createElement("div",{className:x.referralContentTitle},d("wallet_extension_dexreferral_join_label_referral_link")),c.default.createElement("div",{className:x.referralContentValue},l)),c.default.createElement("div",{className:x.referralContentItemRight},c.default.createElement(K,{fontSize:"24px",iconName:"okx-wallet-plugin-copy",className:x.referralContentCopyIcon,onClick:()=>{t(l??"",d("wallet_extension_dexreferral_join_alert_referral_link_copied"))},a11yText:d("wallet_extension_dexreferral_join_alert_referral_link_copied")})))),c.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.primary,block:!0,size:T.SIZE.lg,onClick:()=>{globalThis.platform.openTab({url:e})}},d("wallet_extension_dexreferral_join_btn_view_in_browswer")))},xr=({walletAccount:e})=>{let r=Ve(e),{hasCodes:o,defaultCode:a,inviterStatus:l,defaultCodeStatus:t,discountRate:n,commissionRate:v}=r??{},{toCreateUrl:p,createDashboardUrl:_,inviteUrl:u}=G(a);return c.default.createElement(c.default.Fragment,null,o&&l===0&&t===0?c.default.createElement(Cr,{url:_,discountRate:n,commissionRate:v,defaultCode:a,inviteUrl:u}):c.default.createElement(gr,{url:p,walletAccount:e}))},Ze=xr;i();s();var S=I(N()),Ke=I(ee());var hr=()=>{let e=(0,Ke.useHistory)(),r=Ie(),[o,a]=(0,S.useState)(!1),t=be(r),{loading:n}=D(M.getIpCheck,{method:"GET"},{onSuccess:h=>{a(h?.data?.allowed??!1),h?.data?.allowed||Fe({type:"walletNotSupport",title:d("wallet_extension_dexreferral_join_title_region_restricted"),content:d("wallet_extension_dexreferral_join_modaldesc_due_to_cant_join"),onConfirm:()=>{e.goBack()},confirmText:d("commonall_text_btn_ok_active")})},onError:()=>{a(!1)}}),v=ne("bind");(0,S.useEffect)(()=>{!t||le(t,e,v.filteredKeyringIdentities,"bind")},[t]);let p=(0,S.useMemo)(()=>{if(!t)return"";let{serverWalletType:h,account:Z}=t,k=Z;return h===B.IMPORT||h===B.NEW?k?.[P]||"":h===B.PRIVATE_KEY&&(k?.[P]||k?.[Q])||""},[t]),[_,u]=(0,S.useState)(!0),[R,f]=(0,S.useState)(null),g=(0,S.useCallback)(async()=>{if(!t)return;let h=await q.getReferralsByAddress(p,t.serverWalletType);f(h),u(!1)},[t]);(0,S.useEffect)(()=>{u(!0),g()},[t]);let y=(0,S.useMemo)(()=>!!(n||_),[n,_]);return{getLocalReferralCodeInfo:g,localReferralCodeInfo:R,walletAccount:t,walletAddress:p,ipCheckAllowed:o,loading:y}},Xe=hr;i();s();var Je={content:"_content_12sdn_1"};var vr=()=>{let e=(0,Qe.useHistory)(),r=()=>{e.push(Ce)},{walletAccount:o,localReferralCodeInfo:a,loading:l,getLocalReferralCodeInfo:t}=Xe();return Y.default.createElement(E.Container,null,Y.default.createElement(ke,{title:d("wallet_extension_dexreferral_header_referral"),onBack:r,closeable:!1}),Y.default.createElement("div",{className:Je.content},Y.default.createElement(Oe,{localReferralCodeInfo:a,walletAccount:o,loading:l,getLocalReferralCodeInfo:t}),Y.default.createElement(Ze,{walletAccount:o})))},Qo=vr;export{Qo as default};
//# sourceMappingURL=Referral-OFYPHV7T.js.map
