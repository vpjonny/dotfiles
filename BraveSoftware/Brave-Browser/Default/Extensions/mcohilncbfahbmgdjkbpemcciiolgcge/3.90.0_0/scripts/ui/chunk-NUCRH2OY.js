import{g as ke}from"./chunk-RS5XCICJ.js";import{b as Ge}from"./chunk-3KJMTMXK.js";import{a as ge,d as he}from"./chunk-4YPL7LEO.js";import{b as ne,c as oe,g as te,j as se,v as ie}from"./chunk-QU7KCAT2.js";import{f as X}from"./chunk-6HJJJE2I.js";import{b as ee}from"./chunk-T5XGANNY.js";import{b as J}from"./chunk-O6ODITJY.js";import{A as pe,B as fe,D as de,d as Q,k as ae,m as re,t as ce,v as ue,x as le}from"./chunk-CKHT4PIF.js";import{a as Z}from"./chunk-JMNZU6WB.js";import{d as Y}from"./chunk-7U7FORYL.js";import{b as me}from"./chunk-XBUPORYF.js";import{a as z,b as V}from"./chunk-KC2XLVFC.js";import{M as j,qa as L,ra as h}from"./chunk-MJDO2VHF.js";import{Z as q}from"./chunk-3F7OC7N7.js";import{a as W,c as B,m as I,o as w,p as H,s as O,u as K,z as $}from"./chunk-EPDR6VAQ.js";import{k as U,p as T}from"./chunk-DSNMNSMD.js";import{q as y}from"./chunk-URGJ6D4O.js";import{b as _}from"./chunk-FLSAETOH.js";import{Aa as Ie,N as M}from"./chunk-4C5HF6J2.js";import{f as F,o as u,q as l}from"./chunk-UWURTNRY.js";u();l();var Te=F(_());u();l();function Ce(o,{symbol:e,decimals:s}={}){let i,t=$(K(o,s||18));return t==="0"?i="0":i=U.thousandFormat(t),e&&(i+=` ${e}`),i}function Ve(o){let e=o?.isSupportEip1559?o?.maxFeePerGas||0:o?.gasPrice||0,s=o?.gasLimit||0;return ge(O,H)(e,s)}function Ye(o){let e=ue(),{symbol:s,usdToThisRate:i}=h(j),t=W(e?.price,i),a=Ce(o,{symbol:e?.symbol,decimals:e?.decimals}),m=he({amount:o,rate:t,symbol:s},{useApproximate:!0});return`${a} ${m}`}function Ze(){let o=me(),e=h(oe),s=h(te),i=h(se),t=h(ne),{setGasType:a,chainGasLevels:m,currentGasInfo:p,setCustomGasOption:c,chainGasLoading:f,chainGasLoadFailed:G,chainGasPriceLoading:b,chainGasLimitLoading:k,chainGasPriceLoadFailed:C,chainGasLimitLoadFailed:d}=X({to:e,from:o,value:s,data:i,tokenAddress:t});return{setGasType:a,chainGasLevels:m,currentGasInfo:p,setCustomGasOption:c,chainGasLoading:f,chainGasLoadFailed:G,chainGasPriceLoading:b,chainGasLimitLoading:k,chainGasPriceLoadFailed:C,chainGasLimitLoadFailed:d}}function Je(){let o=L(),e=Z(),{loadingNonce:s,nonce:i,suggestedNonce:t}=ke(void 0,e);return(0,Te.useEffect)(()=>{o(ie(t))},[t]),{loadingNonce:s,nonce:i,suggestedNonce:t}}u();l();var N=F(_());var we={mainTokens:[],chainTokens:[]},Le=(o,e)=>{let s=(0,N.useRef)(we),i=L(),t=h(ee),a=pe(e),m=le(e),p=re(),c=o||p,f=()=>{let{chainTokens:G}=s.current;G.forEach(async({rpcUrl:b,chainId:k,account:C,address:d})=>{if(c!==C)return;let x=await m(d,C,d?null:await Q(b));i(ae({chainId:k,account:C,address:d,balance:x}))})};(0,N.useEffect)(()=>{s.current=a},[a]),V(()=>{t!==0&&f()},[t])},mn=Le;u();l();var n=F(_());u();l();var v={customInput:"_customInput_1jr5r_1"};var Ne=({isSupportEip1559:o,baseFeePerGas:e,setBaseFeePerGas:s,maxPriorityFeePerGas:i,setMaxPriorityFeePerGas:t,gasLimit:a,setGasLimit:m,gasPrice:p,setGasPrice:c,chainGasLimitLoadFailed:f})=>n.default.createElement(n.default.Fragment,null,o?n.default.createElement(n.default.Fragment,null,n.default.createElement(y.Number,{title:T("extension_wallet_transaction_text_maxbase_fee"),enableMinus:!1,precision:9,value:e,onChange:s,className:v.customInput}),n.default.createElement(y.Number,{title:T("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:i,onChange:t,className:v.customInput})):n.default.createElement(y.Number,{title:T("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:p,onChange:c,className:v.customInput}),n.default.createElement(y.Number,{title:T("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:y.TIP_TYPE.always,error:f&&T("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:a,onChange:m}));function ve({onBack:o,rpcInfo:e={},setGasType:s,visible:i,currentGasInfo:t={},chainGasLevels:a=[],setCustomGasOption:m,chainGasLimitLoadFailed:p=!1}){let c=(0,n.useMemo)(()=>a.find(({typeKey:r})=>r===q.CUSTOM)||{},[a]),{isSupportEip1559:f}=c,[G,b]=(0,n.useState)(c.gasLimit),[k,C]=(0,n.useState)(w(c.gasPrice)),[d,x]=(0,n.useState)(w(c.maxPriorityFeePerGas)),[E,be]=(0,n.useState)(w(c.baseFeePerGas)),g=(0,n.useMemo)(()=>{let r={gasLimit:G};return f?(r.baseFeePerGas=I(E),r.maxPriorityFeePerGas=I(d),r.maxFeePerGas=B(r.baseFeePerGas,r.maxPriorityFeePerGas)):r.gasPrice=I(k),{...c,...r}},[G,k,E,c,f,d]),[R,Pe,Fe]=J(e.chainId),S=(0,n.useMemo)(()=>{let r=!Number(g.gasPrice);return g.isSupportEip1559&&(r=!Number(g.maxPriorityFeePerGas)),r||!Number(g.gasLimit)},[g]),A=z(async r=>{let D={...g};delete D.getLimit,m(g),s(g.typeKey),r?await Pe(D):Fe(e?.chainId)}),_e=(0,n.useMemo)(()=>({useDefaultGas:!!R,...c,estimatedTime:"",canConfirm:!S,onConfirm:A,chainName:e.name}),[R,e.name,S,c,A]);return n.default.createElement(Ge,{onBack:o,visible:i,supportDefaultGas:!0,feeDataList:a,feeType:t?.typeKey,onChange:r=>{s(r.typeKey)},custom:{..._e,components:n.default.createElement(Ne,{isSupportEip1559:f,baseFeePerGas:E,setBaseFeePerGas:be,maxPriorityFeePerGas:d,setMaxPriorityFeePerGas:x,gasLimit:G,setGasLimit:b,gasPrice:k,setGasPrice:C,chainGasLimitLoadFailed:p})}})}var wn=n.default.memo(ve);u();l();var ye=F(_());Ie();var An=()=>{let o=fe(),e=de(),{rpcNetworks:s=[]}=Y(),i=ce(()=>s,s,(t,a)=>!M(t,a));ye.default.useEffect(()=>{let t=e?.reduce((a,{walletIdentities:m})=>[...a,...m.map(({account:{mainnet:p}})=>p)],[]);i.forEach(async a=>{t.forEach(m=>{let p=a.chainId;o(p,void 0,{...a,account:m})})})},[e,i])};export{Ce as a,Ve as b,Ye as c,Ze as d,Je as e,mn as f,wn as g,An as h};
//# sourceMappingURL=chunk-NUCRH2OY.js.map
