import{a as We}from"./chunk-PAQO5RV4.js";import{a as Ze}from"./chunk-6AOLLEIE.js";import{a as Je,b as U}from"./chunk-TYOKJU23.js";import"./chunk-LOWDVO7P.js";import"./chunk-S32HDRQT.js";import"./chunk-HNGW4YGJ.js";import{a as He}from"./chunk-JK2V6PQY.js";import{a as Re}from"./chunk-PIGFXZIL.js";import{b as je}from"./chunk-B2LIUW7J.js";import"./chunk-2KVSCBMV.js";import{a as Ke}from"./chunk-T475WHHH.js";import{a as Me}from"./chunk-K4DJNG3I.js";import{a as Ge}from"./chunk-4JAEPDXN.js";import{a as oe}from"./chunk-LLOOJQVQ.js";import"./chunk-YKQL2NOR.js";import"./chunk-7LMS53CN.js";import{a as te,b as Ve}from"./chunk-W25M53MS.js";import"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import"./chunk-U44ZBWPF.js";import{a as Ue,b as W}from"./chunk-YPTISS47.js";import"./chunk-XHRUTTJG.js";import"./chunk-MEZ72IGZ.js";import"./chunk-B5L26Z2J.js";import{d as ee}from"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import"./chunk-OB65JCC3.js";import"./chunk-4ITEJ5A6.js";import"./chunk-CBZ2RV36.js";import"./chunk-VHMBEOFX.js";import"./chunk-GWHLETPD.js";import"./chunk-M43NTBTB.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import{q,r as z,s as Y,v as De}from"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{Q as Ie}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import{a as j}from"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import{i as Oe,j as Fe}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as be,f as Ee,g as $e}from"./chunk-MJSLAJV6.js";import{a as Ae,c as pe,q as xe}from"./chunk-KC2XLVFC.js";import{K as ve,M as Ne,ra as R}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{g as O,ga as Q,wa as F,x as M}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import{f as ke}from"./chunk-OLICTWCW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import{m as Le}from"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import{c as Z,j as ue}from"./chunk-OKGWI7CU.js";import{h as G}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as Pe}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{$ as K,$a as he,Ea as Ce,Fb as Se,Ib as Te,Rb as _e}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{p as c}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as fe}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{A as ge,E as X,_ as ye,o as H,y as J}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as Be,t as we}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as ct}from"./chunk-FB3ILH2L.js";import{b as $}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as w,o as r,q as s}from"./chunk-UWURTNRY.js";r();s();var st=w($());r();s();var T=w($()),Qe=w(fe());r();s();function at(){let o=We(),a=Ze(),t=Ge();return async i=>{let n=await o(i),_=await a({coinId:i.coinId}),C=await t({coinId:i.coinId});return!n||!_||!C?Promise.reject():Promise.resolve()}}var ie=at;r();s();var S=w($());r();s();var qe=w(fe());var dt=(o,a)=>{let t=(0,qe.useHistory)(),{address:i}=He();return n=>{let _={from:o[n.addressType]};i&&(_.address=i);let C=W(_),A=W({coinId:n.coinId,addressType:n.addressType}),g=a==="send"?`${O}/${n.coinId}${F}${C}`:`${M}${A}`;t.push(g)}},re=dt;r();s();var _t=(o,a,t)=>{let i=R(Ne);return n=>{let _=Te?.[a]?.[n.addressType],C=$e(o[_]),A=c(Se[_]),g=be(n.coinAmount,{precision:t?.displayPrecision,isStableCoin:t?.stableCoin}).value,u=Ee(n.currencyAmount,{currencySign:i.symbol}).value;return{addressDisplay:C,addressTypeDisplay:A,amountDisplay:g,currencyAmountDisplay:u}}},se=_t;r();s();var E={container:"_container_onsr7_1",body:"_body_onsr7_6",item:"_item_onsr7_9","item-left":"_item-left_onsr7_20",itemLeft:"_item-left_onsr7_20","item-right":"_item-right_onsr7_23",itemRight:"_item-right_onsr7_23","item-right-top":"_item-right-top_onsr7_26",itemRightTop:"_item-right-top_onsr7_26","item-right-bottom":"_item-right-bottom_onsr7_31",itemRightBottom:"_item-right-bottom_onsr7_31","item-icon":"_item-icon_onsr7_36",itemIcon:"_item-icon_onsr7_36","item-address":"_item-address_onsr7_40",itemAddress:"_item-address_onsr7_40","item-address-type":"_item-address-type_onsr7_47",itemAddressType:"_item-address-type_onsr7_47","item-currency-amount":"_item-currency-amount_onsr7_59",itemCurrencyAmount:"_item-currency-amount_onsr7_59","item-amount":"_item-amount_onsr7_70",itemAmount:"_item-amount_onsr7_70"};var pt=({visible:o,onClose:a,coin:t,type:i})=>{let n=Fe(t?.localType),_=oe(t),C=i==="send"?_.filter(u=>u.coinAmount>0):_,A=se(n,t?.localType,t),g=re(n,i);return S.default.createElement("div",null,S.default.createElement(H.Action,{isFull:!0,noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:a,visible:o},S.default.createElement("div",{className:E.container},S.default.createElement(ee,{className:"setting-nav",title:c("extension_defi_top_header_title_select_address_type"),onBack:a,closeable:!1}),S.default.createElement("div",{className:E.body},S.default.createElement("div",{className:E.list},C.map(u=>{let{addressDisplay:v,addressTypeDisplay:x,amountDisplay:b,currencyAmountDisplay:L}=A(u);return S.default.createElement("div",{key:u.userAddress,className:E.item,onClick:()=>{g(u)}},S.default.createElement("div",{className:E.itemLeft},S.default.createElement(X,{width:32,height:32,alt:x,src:u.image,errorImg:Z,className:E.itemIcon})),S.default.createElement("div",{className:E.itemRight},S.default.createElement("div",{className:E.itemRightBottom},S.default.createElement("div",{className:E.itemAddressType},x),S.default.createElement("div",{className:E.itemAmount},b)),S.default.createElement("div",{className:E.itemRightTop},S.default.createElement("div",{className:E.itemAddress},v),S.default.createElement("div",{className:E.itemCurrencyAmount},L))))}))))))},ne=pt;r();s();var m=w($()),Ye=w(ct());r();s();var y={container:"_container_dxmc1_1","setting-nav":"_setting-nav_dxmc1_6",settingNav:"_setting-nav_dxmc1_6",body:"_body_dxmc1_9",item:"_item_dxmc1_12","item-left":"_item-left_dxmc1_23",itemLeft:"_item-left_dxmc1_23","item-right":"_item-right_dxmc1_26",itemRight:"_item-right_dxmc1_26","item-right-top":"_item-right-top_dxmc1_29",itemRightTop:"_item-right-top_dxmc1_29","item-right-bottom":"_item-right-bottom_dxmc1_34",itemRightBottom:"_item-right-bottom_dxmc1_34","item-icon":"_item-icon_dxmc1_39",itemIcon:"_item-icon_dxmc1_39","item-address":"_item-address_dxmc1_43",itemAddress:"_item-address_dxmc1_43","item-address-type":"_item-address-type_dxmc1_50",itemAddressType:"_item-address-type_dxmc1_50","item-currency-amount":"_item-currency-amount_dxmc1_62",itemCurrencyAmount:"_item-currency-amount_dxmc1_62","item-amount":"_item-amount_dxmc1_73",itemAmount:"_item-amount_dxmc1_73",infoIcon:"_infoIcon_dxmc1_84",title:"_title_dxmc1_89",tip:"_tip_dxmc1_97",subTitle:"_subTitle_dxmc1_98"};var ze="SelectBTCAddress_has_opened_tip_on_dlg",ut=({visible:o,onClose:a,coin:t,type:i})=>{let n=localStorage.getItem(ze),_=Oe(K),[C,A]=(0,m.useState)(!n),g=oe(t),u=i==="send"?g.filter(p=>p.coinAmount>0):g,v=se(_,K,t),x=re(_,i),b=()=>{A(!1),localStorage.setItem(ze,!0)},L=()=>i==="send"?c("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:t?.chainName}):c("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:t?.chainName}),h=m.default.createElement(m.default.Fragment,null,c("extension_defi_top_header_title_select_address_type"),m.default.createElement(ge,{width:310,placement:ge.DIRECTION.bottomRight,title:L()},m.default.createElement(we,{"data-testid":"top-header-info-icon",className:(0,Ye.default)("okx-wallet-plugin-information-circle",y.infoIcon)})));return m.default.createElement(m.default.Fragment,null,m.default.createElement(H.Action,{isFull:!0,title:h,onClose:a,visible:o,noContentPadding:!0},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.body},m.default.createElement("div",{className:y.list},u.map(p=>{let{addressDisplay:e,addressTypeDisplay:f,amountDisplay:l,currencyAmountDisplay:N}=v(p);return m.default.createElement("div",{"data-testid":"select-btc-address-item",className:y.item,onClick:()=>{x(p)}},m.default.createElement("div",{className:y.itemLeft},m.default.createElement(X,{width:32,height:32,alt:f,src:p.image,errorImg:Z,className:y.itemIcon})),m.default.createElement("div",{className:y.itemRight},m.default.createElement("div",{className:y.itemRightBottom},m.default.createElement("div",{className:y.itemAddressType},f),m.default.createElement("div",{className:y.itemAmount},l)),m.default.createElement("div",{className:y.itemRightTop},m.default.createElement("div",{className:y.itemAddress},e),m.default.createElement("div",{className:y.itemCurrencyAmount},N))))}))))),m.default.createElement(H.Confirmation,{visible:o&&C,confirmText:c("wallet_extension_btn_general_gotit"),onConfirm:b,onClose:b,confirmBtnProps:{size:Be.SIZE.lg}},m.default.createElement("div",{className:y.container},m.default.createElement("div",{className:y.title},c("extension_defi_popup_title_btc_address_type_icu",{chainName:t?.chainName})),m.default.createElement("div",{className:y.tip},c("extension_defi_popup_desc_btc_address_type_icu",{chainName:t?.chainName})))))},me=ut;r();s();var V=w($());function ft({list:o,pageType:a,isVirtualList:t,onSearch:i,renderEmpty:n,getItemProps:_,loading:C,loadingMore:A,...g},u){let{currentNetworkUniqueId:v}=j(),x=(0,V.useMemo)(()=>{let h=o.map(e=>({...e,symbolName:e.symbol}));return Le(h,v,a==="send")},[v,o]),b=(h,p)=>{let{baseCoinId:e,childrenCoin:f,tokenType:l,aggregation:N}=p,B=(f||[]).filter(I=>I.currencyAmount>0);N&&B.length>1?h.push(c("wallet_manage_crypto_labels_crypto_multichain")):h.push(e===0?"":l)},L=h=>{let p=[],{childrenCoin:e,tokenType:f,aggregation:l,protocolType:N}=h,B=N===_e.GAS_FREE_COIN,I=(e||[]).some(d=>d?.protocolType===_e.GAS_FREE_COIN&&G(d?.currencyAmount,0));a==="send"?b(p,h):p.push(l?c("wallet_manage_crypto_labels_crypto_multichain"):f),(B||I)&&a==="send"&&(p=[{category:ye.CATEGORY.fill,color:ye.COLOR.lime,title:c("wallet_extension_assets_select_tag_gasfree")}]);let P=_?_(h):{};return{name:h.name,tag:p,...P}};return V.default.createElement(Je,{headerProps:{closeable:!1,title:c("wallet_transfer_send_select_coin_maintitle_select_coin")},...g,searchPlaceholder:c("wallet_transfer_send_select_coin_placeholder_input_name"),list:x,onSearch:i,getItemProps:L,renderEmpty:n,isVirtualList:t,loadingMore:A,loading:C,ref:u})}var le=(0,V.forwardRef)(ft);r();s();var ce={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function gt(){let o=(0,Qe.useHistory)(),a=U(),{address:t,coinIds:i}=Ue(o&&o.location.search.slice(1)),n=te(),_=(0,T.useMemo)(()=>(n||[]).filter(e=>{let f=l=>{if(i){let N=i.split(",").map(B=>Number(B));return N.includes(l.coinId)||N.includes(l.baseCoinId)}return!0};return G(e.coinAmount,0)&&f(e)}),[n,i]),C=ie(),[A,g]=(0,T.useState)(!1),[u,v]=(0,T.useState)(!1),[x,b]=(0,T.useState)(null),L=e=>{let f=e.childrenCoin.filter(l=>l.coinId===e.coinId&&G(l.coinAmount,0));if(f.length===1){let l=f[0].userAddress;if(l){let N=`?from=${l}`;t&&(N+=`&address=${t}`),o.push({pathname:`${O}/${e.coinId}${F}`,search:N})}}return null},h=async e=>{if(q(e)){L(e),b(e),g(!0);return}if(z(e)||Y(e)){L(e),b(e),v(!0);return}await C(e);let f,l,B=(e.childrenCoin||[]).filter(I=>I.currencyAmount>0);B.length>1&&e.aggregation?(f=Q,l=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${a}&stableCoin=${Boolean(e.stableCoin)}`):B.length===1&&e.aggregation?f=`${O}/${B[0].coinId}${F}`:f=`${O}/${e.coinId}${F}`,t&&(l?l+=`&address=${t}`:l=`address=${t}`),o.push({pathname:f,search:l})};return _.length===0?T.default.createElement(Pe.Container,null,T.default.createElement(ee,{closeable:!1,title:c("wallet_transfer_send_select_coin_maintitle_select_coin")}),T.default.createElement(J.State,{className:ce.empty,title:c("wallet_transfer_maintitle_not_any_token")})):T.default.createElement(T.default.Fragment,null,T.default.createElement(le,{list:_,renderEmpty:e=>T.default.createElement(J.State,{className:ce.emptyResult,title:c("wallet_extension_send_toast_unfoundcrypto",{crypto:T.default.createElement("span",{className:ce.emptyText},e)})}),onClick:h,pageType:"send",isVirtualList:!1}),T.default.createElement(me,{visible:A,onClose:()=>{g(!1)},coin:x,type:"send"}),T.default.createElement(ne,{visible:u,onClose:()=>{v(!1)},coin:x,type:"send"}))}var Xe=gt;r();s();var D=w($());var it=w(fe());r();s();var et=w($());function tt(){let[o,a]=(0,et.useState)(""),t=!!o,i=te(),n=Ve(),_=pe(()=>Array.from(new Set(Re(t?n:i).map(p=>p.coinId))),[i,n,t]),C=Ke(),A=Ae(p=>{a(p)}),g=xe(o,{wait:500}),u=Me(),{data:v,loading:x,loadingMore:b,listRef:L}=je({aggregation:!0,symbolLike:g,chainIds:u!==""?[Number(u)]:void 0,excludeCoinIds:_},{reloadDeps:[g],enable:!C});return{list:pe(()=>{let p=v?.list??[];return[...o?n.filter(l=>l.symbol?.toLowerCase().includes(o.toLowerCase())):i,...p].filter(({coinId:l,baseCoinId:N})=>!he(l,N))},[i,n,v?.list]),listRef:L,search:o,onSearch:A,loading:x,loadingMore:b,isSearching:x&&!!o}}r();s();var ot={empty:"_empty_1umri_1"};function yt(){let o=(0,it.useHistory)(),{keyringIdentityType:a}=R(ve),{currentNetworkUniqueId:t}=j(),i=U(),n=ie(),{list:_,listRef:C,onSearch:A,loading:g,loadingMore:u,isSearching:v}=tt(),[x,b]=(0,D.useState)(!1),[L,h]=(0,D.useState)(!1),[p,e]=(0,D.useState)(null),f=I=>{if(I?.childrenCoin?.length===1){let{addressType:P}=I.childrenCoin[0]||{},d=W({coinId:I.coinId,addressType:P});o.push(`${M}${d}`)}},l=async I=>{let P=De(I),d;if(P){if(d=await Ie(I),t!==""&&d?.aggregation&&(d=d.childrenCoin?.find(lt=>lt.chainId===Number(t))??null),!d)return}else d=I;if(q(d)){e(d),b(!0);return}if(z(d)||Y(d)){f(d),e(d),h(!0);return}await n(d);let ae,de,nt=d.aggregation,mt=d.childrenCoin??[];nt&&mt.length>0?(ae=Q,de=`coinKey=${encodeURIComponent(d.key)}&aggregationSymbol=${d.symbol}&type=${i}&stableCoin=${Boolean(d.stableCoin)}`):(ae=M,de=`coinId=${d.coinId}`),o.push({pathname:ae,search:de})},N=(0,D.useCallback)(I=>{let P={};return I.localType===K&&I.coinId===Ce&&ke(a)&&(P.tag=c("extension_wallet_footer_alert_asset_notsupported")),P},[a]);return D.default.createElement(D.default.Fragment,null,D.default.createElement(le,{list:v?[]:_,onClick:l,getItemProps:N,isVirtualList:!1,onSearch:A,ref:C,renderEmpty:()=>D.default.createElement(J.State,{className:ot.empty,title:c("commonall_emptystate_text_no_results")}),loadingMore:u||g&&!v,loading:v}),D.default.createElement(me,{visible:x,onClose:()=>{b(!1)},coin:p,type:"receive"}),D.default.createElement(ne,{visible:L,onClose:()=>{h(!1)},coin:p,type:"receive"}))}var rt=yt;var Ct={[ue.SEND]:Xe,[ue.RECEIVE]:rt};function ht(){let o=U(),a=Ct[o];return a?st.default.createElement(a,null):null}var Zi=ht;export{Zi as default};
//# sourceMappingURL=select-coin-DHDIN22H.js.map
