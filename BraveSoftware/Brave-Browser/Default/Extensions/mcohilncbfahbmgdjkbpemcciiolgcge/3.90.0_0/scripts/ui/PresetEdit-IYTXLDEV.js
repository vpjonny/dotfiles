import{b as Te,d as be,e as Ee}from"./chunk-G6OLRINJ.js";import{a as xe}from"./chunk-SV3QD4SY.js";import{a as he}from"./chunk-BFLVJJ2Z.js";import{a as Se}from"./chunk-DQD6P25P.js";import"./chunk-WTH5WZEF.js";import{a as Me}from"./chunk-TRICLBVU.js";import{b as G}from"./chunk-FS336U6P.js";import{d as de,e as ge,f as ye}from"./chunk-QTPS5BDP.js";import{a as ve}from"./chunk-P7NYIGUS.js";import"./chunk-H5RNSDSN.js";import"./chunk-OWPVBYY3.js";import"./chunk-CJAFGYQK.js";import{f as d,g as B}from"./chunk-2LQJ3JX6.js";import{b as Z,f as j,q as _e,s as fe}from"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import{a as ce}from"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import{b as pe}from"./chunk-RK4OLGCC.js";import{a as z}from"./chunk-VL2JCPJS.js";import{a as D}from"./chunk-AP4E6GDF.js";import{Ke as S,bc as le,cc as ue,m as me}from"./chunk-RPH2MNBW.js";import{a as Nt}from"./chunk-DOSBJ3L3.js";import{q as k}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as q}from"./chunk-FB3ILH2L.js";import{b as O}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import{Aa as ae,N as I,l as H}from"./chunk-4C5HF6J2.js";import"./chunk-EI7BJC6V.js";import{f as w,o as y,q as h}from"./chunk-UWURTNRY.js";y();h();var a=w(O()),R=w(q());ae();y();h();var E=w(O()),F=w(q());y();h();var b={root:"_root_1fcv2_1",title:"_title_1fcv2_12","input-container":"_input-container_1fcv2_19",inputContainer:"_input-container_1fcv2_19",input:"_input_1fcv2_19","input-tag":"_input-tag_1fcv2_25",inputTag:"_input-tag_1fcv2_25","custom-input":"_custom-input_1fcv2_28",customInput:"_custom-input_1fcv2_28","inner-input":"_inner-input_1fcv2_28",innerInput:"_inner-input_1fcv2_28","error-input":"_error-input_1fcv2_36",errorInput:"_error-input_1fcv2_36","err-text":"_err-text_1fcv2_39",errText:"_err-text_1fcv2_39"};var Lt=({className:e,amountList:o,setAmountList:n,currentMode:t,currency:i,decimals:u,placeholderRef:m})=>{let p=(0,E.useMemo)(()=>t==="sell"?S("swaptrade_meme_input_label_sell_amount"):S("swaptrade_meme_input_label_pay_amount",{token:i}),[t,i]),[_,v]=(0,E.useMemo)(()=>t==="sell"?[!0,2]:[!1,u],[t,u]),r=(s,c)=>{if(_&&D.gt(s,100))return;let l=o.map((g,U)=>U===c?s:g);n(l)},M=(0,E.useMemo)(()=>o.some(s=>D.eq(s,0)),[o]),f=()=>{m.current?.scrollIntoView({behavior:"smooth",block:"center"})};return E.default.createElement("div",{className:(0,F.default)(e,b.root)},E.default.createElement("div",{className:(0,F.default)(b.title)},p),E.default.createElement("div",{className:(0,F.default)("flex items-center",b.inputContainer)},o.map((s,c)=>E.default.createElement(k.Number,{key:c,value:s,size:k.SIZE.sm,symbol:_?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:v,enableMinus:!1,min:0,className:b.input,inputClassName:b.inputTag,innerClassName:(0,F.default)(b.customInput,b.innerInput,{[b.errorInput]:D.eq(s,0)}),onChange:l=>{r(l,c)},onFocus:f}))),M&&E.default.createElement("div",{className:(0,F.default)(b.errText)},S("swaptrade_meme_input_error_no_zero")))},Ne=Lt;y();h();var N=w(O()),Y=w(q());y();h();var A={root:"_root_1vg59_1",title:"_title_1vg59_12",tips:"_tips_1vg59_19",input:"_input_1vg59_26","custom-input":"_custom-input_1vg59_26",customInput:"_custom-input_1vg59_26"};var wt=({className:e,name:o,setName:n,disabled:t})=>{let i=v=>{let r=v.target.value;r.length>12&&(r=r.substring(0,12)),n(r)},[u,m]=(0,N.useState)(!1),p=(0,N.useMemo)(()=>String(o).length>=1&&u,[o,u]),{isSm:_}=pe();return N.default.createElement("div",{className:(0,Y.default)(e,A.root)},N.default.createElement("div",{className:(0,Y.default)(A.title)},S("swaptrade_meme_input_label_preset_name")),N.default.createElement(k,{value:o,size:_?k.SIZE.lg:k.SIZE.sm,error:()=>String(o).length<1?S("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,Y.default)(A.input,A.customInput),disabled:t,errorType:k.TIP_TYPE.always,onChange:i,onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),p&&N.default.createElement("div",{className:A.tips},`${o.length}/12`))},Le=wt;y();h();var x=w(O()),we=w(Nt());ae();function ke({currentMode:e,computeBuyDefaultPresetList:o,computedSellDefaultPresetList:n}){return(0,x.useMemo)(()=>e==="buy"?o:n,[e,o,n])}function Ie({isEdit:e,currentMode:o,savePresetFn:n,onClose:t,setConfirmText:i,setConfirmVisible:u}){let m=(0,we.useHistory)(),p=(0,x.useCallback)(()=>{n(),t?t():m.goBack()},[m,t,n]),_=(0,x.useCallback)(()=>{if(!e){let r=o==="buy",M=r?le:ue,f=r?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!z.get(M)){i(S(f)),u(!0),z.set(M,"1");return}}n(),t?t():m.goBack()},[e,o,t,n,i,u,m]);return[p,_]}function De({slippage:e,setSlippageMode:o,setSlippageUse:n,setSlippageError:t,setCustomMaxUse:i,setCustomMaxError:u,editPresetValue:m,setEditPreset:p,isEdit:_}){return(0,x.useCallback)(({mode:r,fixedData:M,dynamicData:f})=>{if(o(r),r===Z.FIXED){let{value:s,level:c,error:l}=M;n(s),t(l),p({isEdit:_,value:{...m,slippage:{...e,mode:r,value:s?B(s):"",type:c}}})}if(r===Z.DYNAMIC){let{customMax:s,error:c}=f;i(s),u(c),p({isEdit:_,value:{...m,slippage:{...e,mode:r,customMax:s?B(s):""}}})}},[m,_,u,i,t,o,n,e,p])}function Pe({setEditPreset:e,isEdit:o,editPresetValue:n,priorityFee:t,setPriorityFeeError:i,setLatestSelectFeeType:u}){return(0,x.useCallback)((p,_,v)=>{e({isEdit:o,value:{...n,priorityFee:{...t,value:_,type:p}}}),i(v),p!=="custom"&&u(p)},[n,o,t,e,u,i])}function Fe({setAmountListUsed:e,setEditPreset:o,isEdit:n,editPresetValue:t,currentMode:i}){return(0,x.useCallback)(m=>{e(m),o({isEdit:n,value:{...t,amountList:m.map(p=>i==="sell"?B(p):p)}})},[e,o,n,t,i])}function Ae({defaultPresetList:e,id:o,slippage:n,priorityFee:t,amountList:i,slippageError:u,priorityFeeError:m,customMaxError:p,name:_,mevModeStatus:v}){let r=(0,x.useMemo)(()=>e.find(c=>c.id===o)||null,[e,o]),M=(0,x.useMemo)(()=>r?I(r.slippage.value,n.value)&&I(r.slippage.type,n.type)&&I(r.priorityFee.type,t.type)&&I(r.amountList,i)&&I(r.slippage.mode,n.mode)&&I(r.slippage.customMax,n.customMax):!0,[r,n,t,i]),f=(0,x.useMemo)(()=>u||m||p||_.length===0||i.some(c=>D.eq(c,0))||v===6,[u,m,p,_,i,v]),s=(0,x.useMemo)(()=>o?.includes(_e),[o]);return[r,M,f,s]}function Ue({newPreset:e,setSlippageUse:o,setSlippageMode:n,setCustomMaxUse:t,setPriorityFeeError:i,setSlippageError:u,setCustomMaxError:m,currentMode:p,setAmountListUsed:_,setEditPreset:v,isEdit:r,editPresetValue:M,slippage:f,priorityFee:s}){return(0,x.useCallback)(()=>{if(e){o(d(e.slippage.value)),n(e.slippage.mode),t(d(e.slippage.customMax)),i(!1),u(!1),m(!1);let l=e.amountList.map(g=>p==="sell"?d(g):g);_(l),v({isEdit:r,value:{...M,slippage:{...f,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...s,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,o,n,t,i,u,m,p,_,v,r,M,f,s])}y();h();var L={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var kt=me(({onClose:e})=>{let{configStore:o,quoteStore:n}=G(),{currentMode:t,computedConfig:i}=o,{mevUnstableShowLevel:u,jitoIsSuccess:m}=n,p=H(i,"nativeTokenInfo.decimals",0),_=H(i,"mevPriceThreshold"),v=H(i,"nativeTokenInfo.chainName"),{chainSymbol:r}=Me(),{editPreset:M,setEditPreset:f}=Te(),{value:s,isEdit:c}=M,{slippage:l,priorityFee:g,name:U,amountList:K,id:Oe,priorityMode:He,manualType:Be}={...fe,...s},{savePresetFn:Ye}=be(),[Re,X]=(0,a.useState)(!1),[qe,V]=(0,a.useState)(!1),[ze,W]=(0,a.useState)(!1),[$,Ze]=(0,a.useState)(He),[J,je]=(0,a.useState)(Be),Ge=ve({priorityMode:$,manualType:J,jitoIsSuccess:m,mevUnstableShowLevel:u}),Ke={low:d(l.config.low),medium:d(l.config.medium),high:d(l.config.high)},Q=d(l.min),ee=d(l.max),Xe=d(l.dynamicMax),Ve=d(l.dynamicMin),We=d(l.recommendMax),$e=d(l.recommendMin),Je=T=>xe({value:T,min:Q,max:ee,level:l.type}),[Qe,te]=(0,a.useState)(d(l?.value)),[et,oe]=(0,a.useState)(l.mode),[tt,ne]=(0,a.useState)(d(l.customMax)),[ot,nt]=(0,a.useState)(g.type!==j.CUSTOM?g.type:j.MARKET),{getTokenAmount:rt,getUsd:st}=Se(G),{computeBuyDefaultPresetList:it,computedSellDefaultPresetList:at}=he(),mt=ke({currentMode:t,computeBuyDefaultPresetList:it,computedSellDefaultPresetList:at}),[lt,ut]=(0,a.useState)(!1),[pt,ct]=(0,a.useState)(""),[_t,ft]=Ie({isEdit:c,currentMode:t,savePresetFn:Ye,onClose:e,setConfirmText:ct,setConfirmVisible:ut}),dt=T=>{f({isEdit:c,value:{...s,name:T}})},gt=T=>{Ze(T),f({isEdit:c,value:{...s,priorityMode:T}})},vt=T=>{je(T),f({isEdit:c,value:{...s,manualType:T}})},yt=De({slippage:l,setSlippageMode:oe,setSlippageUse:te,setSlippageError:X,setCustomMaxUse:ne,setCustomMaxError:W,editPresetValue:s,setEditPreset:f,isEdit:c}),ht=Pe({setEditPreset:f,editPresetValue:s,isEdit:c,setPriorityFeeError:V,setLatestSelectFeeType:nt,priorityFee:g}),[Mt,re]=(0,a.useState)(K.map(T=>t==="sell"?Number(d(T)):T)),St=Fe({setAmountListUsed:re,setEditPreset:f,isEdit:c,editPresetValue:s,currentMode:t}),[xt,Tt,bt,se]=Ae({defaultPresetList:mt,id:Oe,slippage:l,priorityFee:g,amountList:K,slippageError:Re,priorityFeeError:qe,customMaxError:ze,name:U,mevModeStatus:Ge}),Et=Ue({newPreset:xt,setSlippageUse:te,setSlippageMode:oe,setCustomMaxUse:ne,setPriorityFeeError:V,setSlippageError:X,setCustomMaxError:W,currentMode:t,setAmountListUsed:re,setEditPreset:f,isEdit:c,editPresetValue:s,slippage:l,priorityFee:g}),ie=(0,a.useRef)(null),Ct=ce();return a.default.createElement("div",{className:(0,R.default)(L.root)},a.default.createElement(Le,{className:L.name,name:U,setName:dt,disabled:se}),a.default.createElement(ye,{className:L.mev,priorityMode:$,setMode:gt,manualType:J,setManualType:vt,mevUnstableShowLevel:u,jitoIsSuccess:m,mevPriceThreshold:_,chainName:v}),a.default.createElement(ge,{className:L.slippage,mode:et,fixedData:{value:Qe,level:l.type,levelMap:Ke,min:Q,max:ee,validator:Je},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:l.supportCustomMax,customMax:tt,dynamicMax:Xe,dynamicMin:Ve,recommendMax:We,recommendMin:$e},onChange:yt}),a.default.createElement(de.SelectMode,{className:L.priority,fee:g?.value,type:g?.type,feeMap:g.config,max:g?.max,currency:r,onChange:ht,recommendMaxValue:g?.recommendMaxValue,recommendMinValue:g?.recommendMinValue,latestSelectType:ot,getTokenAmount:rt,getUsd:st}),a.default.createElement(Ne,{className:L.amount,amountList:Mt,setAmountList:St,currency:r,currentMode:t,decimals:p,placeholderRef:ie}),a.default.createElement("div",{className:(0,R.default)({[L.placeholderTg]:Ct}),ref:ie}),a.default.createElement("div",{className:(0,R.default)("flex justify-between",L.btns)},se&&a.default.createElement(C,{className:"flex-1",category:C.CATEGORY.outline,type:C.TYPE.primary,size:C.SIZE.lg,block:!0,disabled:Tt,onClick:Et},S("swaptrade_general_btn_reset")),a.default.createElement(C,{className:"flex-1",category:C.CATEGORY.fill,type:C.TYPE.primary,disabled:bt,size:C.SIZE.lg,block:!0,onClick:ft},S("swaptrade_dialog_btn_confirm"))),a.default.createElement(Ee,{onConfirm:_t,visible:lt,showChecked:!1,text:pt,confirmText:S("commonall_text_btn_ok_active")}))}),Go=kt;export{Go as default};
//# sourceMappingURL=PresetEdit-IYTXLDEV.js.map
