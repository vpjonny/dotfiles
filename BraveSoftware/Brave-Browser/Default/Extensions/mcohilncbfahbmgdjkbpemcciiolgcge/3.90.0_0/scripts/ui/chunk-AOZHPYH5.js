import{f as J}from"./chunk-75EAYNWR.js";import{A as V}from"./chunk-V7YATDMZ.js";import{w as K}from"./chunk-BIUKJDG5.js";import{b as j,c as M}from"./chunk-EF6FTTLT.js";import{d as Y}from"./chunk-YLT6ZRGE.js";import{a as H}from"./chunk-2XOPB27K.js";import{a as W}from"./chunk-OBLKTTHP.js";import{b as B}from"./chunk-GWHLETPD.js";import{g as D}from"./chunk-NS5EW6UN.js";import{j as U}from"./chunk-WYX7GFOD.js";import{a as u}from"./chunk-KC2XLVFC.js";import{c}from"./chunk-EAE2NUFS.js";import{b as S,c as v,h as C}from"./chunk-F3ILJHGP.js";import{b as O}from"./chunk-6M37VPK2.js";import{m as E}from"./chunk-3F7OC7N7.js";import{C as R}from"./chunk-EPDR6VAQ.js";import{xb as z,y as b}from"./chunk-EQ34WRCJ.js";import{Aa as Q,fa as N}from"./chunk-4C5HF6J2.js";import{o as w,q as I}from"./chunk-UWURTNRY.js";w();I();var P=n=>H(n)?n:R(O(n)),Z=({value:n,toAddr:e,contractAddress:r})=>!r||!J(e)?"":W(e,n),$="0x0",_=({data:n,value:e,nonce:r,walletId:t,gasPrice:s,gasLimit:o,localType:i,to:p,maxFeePerGas:l,from:g,supportEip1559:y,authorizationList:d,signFn:f,kaiaTxType:T,maxPriorityFeePerGas:h,chainId:G,contractAddress:F,systemToken:A})=>{let L=g&&S(g,i),m=p&&S(p,i),k=G||z(i)?.realChainIdHex,x=n||Z({value:e,toAddr:m,contractAddress:F}),q=d&&d.length>0,a={from:L,walletId:t,data:x,nonce:P(r),chainId:P(k),gasLimit:P(o)};return f&&T&&(a.signFn=f,a.kaiaTxType=T),y?Object.assign(a,{type:E.FEE_MARKET,maxFeePerGas:P(l),maxPriorityFeePerGas:P(h)}):Object.assign(a,{type:E.LEGACY,gasPrice:P(s)}),q&&Object.assign(a,{type:E.AUTH_7702,authorizationList:d}),F?Object.assign(a,{data:x,value:$,to:S(F,i)}):Object.assign(a,{to:m,value:P(e)}),A&&Object.assign(a,{value:P(e)}),a};var nn=["low","medium","high"],en=(n={})=>nn.map(e=>e==="low"?{level:e,gasPrice:n?.min,maxFeePerGas:n?.min,baseFeePerGas:n?.baseFee,maxPriorityFeePerGas:n?.safePriorityFee}:e==="medium"?{level:e,gasPrice:n?.normal,maxFeePerGas:n?.normal,baseFeePerGas:n?.baseFee,maxPriorityFeePerGas:n?.proposePriorityFee}:{level:e,gasPrice:n?.max,maxFeePerGas:n?.max,baseFeePerGas:n?.baseFee,maxPriorityFeePerGas:n?.fastPriorityFee});w();I();Q();var Cn=()=>u(async n=>{let{coinId:e}=n,r=_(n),s=await K(N(r,["to","data","from","value","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas"]));return await D({coinId:e},{inputData:s})}),rn=()=>u(async n=>{let{authorizationList:e}=n,r=(e||[]).map(t=>{let{address:s,chainId:o,nonce:i,fromAddress:p,walletId:l,localType:g,yParity:y,r:d,s:f}=t||{};return y&&d&&f?t:c().signAuthorizationListItem({fromAddress:v(p,g),walletId:l,baseChain:C(g),signParams:{address:s,chainId:o,nonce:i}})});return{...n,authorizationList:await Promise.all(r)}}),Mn=({coinId:n,fromAddr:e,walletId:r})=>{let t=Y(n),s=t?.localType,o=t?.systemToken,i=V({fromAddr:v(e,s),walletId:r,localType:C(s)}),p=rn();return u(async({data:l,from:g,to:y,value:d,gasPrice:f,maxFeePerGas:T,maxPriorityFeePerGas:h,authorizationList:G,needCapture:F,withSignParams:A=!1,...L})=>{let m=_({to:y,data:l,from:g,value:d,gasPrice:f,coinId:n,walletId:r,localType:s,systemToken:o,maxFeePerGas:T,maxPriorityFeePerGas:h,authorizationList:G,contractAddress:t?.address,...L});m.authorizationList&&(m=await p(m));let k=await i({needCapture:F,params:m}),x=k.rawTxResult||k;return A?{signedTx:x,signParams:m}:x})},_n=({walletId:n})=>{let e=U(n),r={[b.ETH_SIGN]:[M,c().signMessage],[b.PERSONAL_SIGN]:[M,c().signPersonalMessage],[b.ETH_SIGN_TYPED_DATA]:[j,c().signTypedMessage]};return u(async({msgParams:t,baseChain:s,type:o})=>{let i=r[o];if(i)return B(e?.initialType)?i[0]({walletId:n,msgParams:t,baseChain:s}):i[1](t,s,n);throw new Error("Not Supported")})},Nn=()=>u(async(n,e)=>c().encryptionPublicKey(n,e)),Rn=()=>u(async(n,e)=>c().decryptMessageInline(n,e)),zn=()=>u(async(n,e)=>c().decryptMessage(n,e));export{P as a,_ as b,en as c,Cn as d,Mn as e,_n as f,Nn as g,Rn as h,zn as i};
//# sourceMappingURL=chunk-AOZHPYH5.js.map
