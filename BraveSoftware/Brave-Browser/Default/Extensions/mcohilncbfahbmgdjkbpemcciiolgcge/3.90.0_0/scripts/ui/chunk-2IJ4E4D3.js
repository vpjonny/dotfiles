import{g as K,q as V,s as L}from"./chunk-XJ2EVWVX.js";import{g as D,h as A,j as P}from"./chunk-JMM35KIH.js";import{b as S}from"./chunk-PNOOVDMP.js";import{a as M}from"./chunk-5C7AUJM4.js";import{a as k}from"./chunk-IPVHRCDK.js";import{a as E,c as O,k as G}from"./chunk-KC2XLVFC.js";import{M as F,O as _,a as q,qa as U,ra as C}from"./chunk-MJDO2VHF.js";import{a as w}from"./chunk-EPDR6VAQ.js";import{b}from"./chunk-FLSAETOH.js";import{Aa as v,va as W}from"./chunk-4C5HF6J2.js";import{f as R,o as g,q as T}from"./chunk-UWURTNRY.js";g();T();var f=R(b());v();g();T();function H(e,n){return async t=>(await t(D({walletIds:e,chainId:n}))).map(r=>({walletId:r?.walletId,balanceData:r?.balanceData,coinsMap:r?.coins.reduce((a,s)=>(a[s.coinId]=s,a),{})}))}async function j(e,n){return(await n(H([e]))).find(o=>o.walletId===e)}function Y({walletIds:e,chainId:n,coinId:t,flatten:o=!1}){return async r=>{let a=await r(P({walletIds:e,chainId:n,coinId:t})),s={};return a.forEach(u=>{let i=u.coins.reduce((c,p)=>(c[p.coinId]=p,c),{}),h=u.balanceCoins,l=[],d=["walletId","default"];h.forEach(c=>{if(c.childrenCoin){let p=c.childrenCoin.map(m=>({...m,...i[m.coinId]}));o?(p.forEach(m=>{d.forEach(B=>{m[B]=c[B]})}),l.push(...p)):l.push({...c,...i[c.coinId],childrenCoin:p})}else l.push({...c,...i[c.coinId]})}),s[u.walletId]=l}),s}}function z(e,n,{defaultValue:t,forceRequest:o}={}){let r=U(),a=k(),{data:s,error:u,loading:i,run:h}=G(j,{manual:!0,cacheKey:n}),l=!!u,d=n!==a||o;(0,f.useEffect)(()=>{n&&d&&h(n,r)},[n,d,r]);let c=E(async()=>{n&&d?h(n,r):await r(A())});return(0,f.useMemo)(()=>m=>{if(n&&d)return{data:s?e(m,n,s):t,loading:i,error:l,request:c};let B=e(m,a);return{data:B??t,loading:!B?.[a],error:!!B?.[a]?.error,request:c}},[e,n,a,s,t,l,i,d])}var I=(e,n={})=>{let t=(0,f.useRef)({}),o=n.withBalanceStatus,r=z(V,e,{defaultValue:t.current,forceRequest:o}),{data:a,loading:s,error:u,request:i}=C(r);return O(()=>o?{loading:s,error:u,request:i,balance:a[e]}:a[e],[a,e,o,s,u,i])},de=e=>{let n=I(e),o=(C(q)[e]??[]).map(r=>K(r));return W([...n?.coins??[],...o],r=>`${r.coinId}_${"addressType"in r?r.addressType:0}`)},J=()=>{let e=k();return I(e)},pe=()=>J()?.coins??[];function me(e){let n=(0,f.useRef)([]),t=z(L,e,{defaultValue:n.current});return C(t).data}g();T();var y=R(b());var Se=e=>C(_).find(({currencyId:o})=>o===e)||{},N={},x=()=>{let{data:e,loading:n}=S(M.coinTickers);return(0,y.useMemo)(()=>({coinTickersMap:e||N,loading:n}),[e])},ke=()=>{let{coinTickersMap:e}=x();return e},Q=()=>{let{coinTickersMap:e}=x(),t=C(F)?.usdToThisRate;return(0,y.useCallback)(o=>{let r=e?.[o]?.coinToUSDRate;return w(r,t)},[e,t])},xe=e=>{let n=Q();return(0,y.useMemo)(()=>n(e),[n,e])},Re=e=>{let{coinTickersMap:n}=x();return n?.[e]?.coinToUSDRate},be=e=>{let{data:n}=S(M.coinTickers);return n?.[e]?.coinPriceChangePercent24h};export{Y as a,I as b,de as c,pe as d,me as e,Se as f,x as g,ke as h,Q as i,xe as j,Re as k,be as l};
//# sourceMappingURL=chunk-2IJ4E4D3.js.map
