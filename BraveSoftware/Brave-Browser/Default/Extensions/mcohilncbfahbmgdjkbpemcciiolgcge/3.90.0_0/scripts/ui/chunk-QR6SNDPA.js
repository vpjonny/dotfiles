import{a as P}from"./chunk-DB7NVRTE.js";import{H as R,K as S,T as O,Z as h}from"./chunk-MJDO2VHF.js";import{m as w}from"./chunk-KGMP5AO5.js";import{d as x,g as E}from"./chunk-F3ILJHGP.js";import{$ as u,Eb as m,Gb as b,ca as g,ta as p,ua as A,wa as C}from"./chunk-EQ34WRCJ.js";import{Aa as X,ca as T}from"./chunk-4C5HF6J2.js";import{o as k,q as N}from"./chunk-UWURTNRY.js";k();N();X();function ae(t,s={enableEmptyAccount:!1}){let n=h(t),e=R(t),o={enableEmptyAccount:s.enableEmptyAccount??!1},{account:i={}}=e;return n.filter(r=>o.enableEmptyAccount?typeof i[r.localType]=="string":Boolean(i[r.localType]))}var F=(t,s,n)=>t?b[s].reduce((o,i)=>(t[i]&&o.push({...n,address:t[i].address,addressType:i}),o),[]):[],_=(t,s,n)=>{let e=[];return e.push({...t,address:E(s),addressType:"XKO"}),e.push({...t,address:s,addressType:"HEX"}),n?e:[e[1],e[0]]},W=(t,s,n,e)=>{n.length!==0&&(t.push(...n),e&&s.unshift({...n[0],moreAddress:n.slice(1)}))},K=(t,s,n,e)=>{let o=n[u]===m.SEGWIT_NESTED?m.SEGWIT_NESTED_49:m.SEGWIT_NESTED,a=b[u].reduce((r,d)=>(o!==d&&t[d]&&r.unshift({...s,address:t[d].address||s.address||"",addressType:d}),r),[]);return a.reverse(),s?.isHotNetwork&&e.unshift({...a[0],moreAddress:a.slice(1)}),a},H=(t,s,n)=>{let{localType:e,chainName:o,image:i,chainId:a,symbol:r,isHotNetwork:d,networkRank:c}=t;return e===u||e===g?{type:"bitcoin",localType:e,data:{chainName:o,chainId:a,image:i,symbol:r,isHotNetwork:d,networkRank:c,localType:e}}:e===p?{type:"near",data:t}:e===A?{type:"ton",data:t}:n&&e===C?{type:"xlayer",data:t}:s[e]?{type:"address",data:{address:s[e],chainName:o,chainId:a,image:i,symbol:r,isHotNetwork:d,networkRank:c,localType:e}}:{type:"skip"}},v=(t,s,n,e)=>{let o=[];return[g,u].forEach(a=>{let r=t[u],d=n[a];r&&d&&(o=[...K(r,d,s,e),...o])}),o};function D(t,s,n){let{accountMap:e,accountsMap:o,segwitAddressType:i}=t,a=x(),r={bitcoinInfo:{},nearInfo:{},tonInfo:{},xlayerInfo:{}},d=[];s.forEach(y=>{let l=H(y,e,a);switch(l.type){case"bitcoin":r.bitcoinInfo[l.localType]=l.data;break;case"near":r.nearInfo=l.data;break;case"ton":r.tonInfo=l.data;break;case"xlayer":r.xlayerInfo=l.data;break;case"address":d.push(l.data);break;default:break}});let[,c]=P(d),f=[...v(o,i,r.bitcoinInfo,c),...d];if(a){let y=_(r.xlayerInfo,e[C],n);W(f,c,y,r.xlayerInfo.isHotNetwork)}let M=F(o[p],p,r.nearInfo);W(f,c,M,r.nearInfo.isHotNetwork);let B=F(o[A],A,r.tonInfo);return W(f,c,B,r.tonInfo.isHotNetwork),{addresses:f,hotAddresses:T(c,"networkRank")}}var ce=w([S,h,O,(t,s)=>s],(t,s,n,e)=>{let o=n.xlayerAddressType==="XKO",i=D(t,s,o);if(!e)return i;let{isFactionPKAccount:a,chain:r,currentNetworkUniqueId:d}=e,c=I=>a&&r?I.localType===r:!d||d===""?!0:I.chainId===Number(d);return{addresses:i.addresses.filter(c),hotAddresses:i.hotAddresses.filter(c)}});function le(t){let s=R(t);return`${s.keyringName} - ${s.walletName}`}export{ae as a,ce as b,le as c};
//# sourceMappingURL=chunk-QR6SNDPA.js.map
