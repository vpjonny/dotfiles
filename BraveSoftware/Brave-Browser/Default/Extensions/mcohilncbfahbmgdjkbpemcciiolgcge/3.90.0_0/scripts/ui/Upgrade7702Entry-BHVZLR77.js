import{a as et}from"./chunk-DE2ULVLJ.js";import"./chunk-SNOTXOHI.js";import{a as tt}from"./chunk-B5L26Z2J.js";import{d as J}from"./chunk-AVG63QW4.js";import{c as M}from"./chunk-VX6OVCCX.js";import{a as j}from"./chunk-DL6F7SAI.js";import{b as Q}from"./chunk-NQGIYDUG.js";import{La as B,db as G,o as W}from"./chunk-VHMBEOFX.js";import{e as U}from"./chunk-M43NTBTB.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import{a as _}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-MT4YWUUK.js";import{a as Z}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{j as z}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import"./chunk-KC2XLVFC.js";import{qa as q}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{D as Y,a as K,vb as R}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{vb as L}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{p as o}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as F}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as $,o as X}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as l,t as I,w as V}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as H}from"./chunk-FB3ILH2L.js";import{b}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import{Aa as ft,M as A}from"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as E,o as a,q as r}from"./chunk-UWURTNRY.js";a();r();var e=E(b()),rt=E(F()),D=E(H());ft();a();r();a();r();var i=E(b());var it=E(F());a();r();var w=E(b()),ot=E(H());a();r();var g={content:"_content_vcvw7_1",title:"_title_vcvw7_4",desc:"_desc_vcvw7_10",btn:"_btn_vcvw7_17",applyOkxBtn:"_applyOkxBtn_vcvw7_31"};function gt({visible:s,onSwitch:v,onRevoke:y,onCancel:d}){return w.default.createElement(X,{whiteboard:!0,visible:s},w.default.createElement("div",{className:g.content},w.default.createElement("div",{className:g.title},o("wallet_extension_function_dialog_title_upgrade_3rd_7702")),w.default.createElement("div",{className:g.desc},o("wallet_extension_function_dialog_desc_upgrade_3rd_7702"))),w.default.createElement("div",{className:(0,ot.default)(g.btn,g.applyOkxBtn),onClick:v,"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.APPLY_OKX_DIALOG_BUTTON},o("wallet_extension_function_dialog_btn_apply_okx7702")),w.default.createElement("div",{className:g.btn,onClick:y,"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.REVOKE_DIALOG_BUTTON},o("wallet_extension_function_dialog_btn_revoke_existing")),w.default.createElement("div",{className:g.btn,onClick:d},o("wallet_extension_general_dialog_btn_maybe_later")))}var nt=gt;a();r();var T={root:"_root_6624y_1",emptyClassName:"_emptyClassName_6624y_5",notSupportTitle:"_notSupportTitle_6624y_8",notSupportDesc:"_notSupportDesc_6624y_15",notSupportButton:"_notSupportButton_6624y_23",btnGroup:"_btnGroup_6624y_26"};function P(s,v){B({button7702:s,network_filter:v,terminal:"extension"})}function wt({onSwitch:s}){return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:T.notSupportTitle},o("wallet_extension_function_emptystate_title_no_wallets_available")),i.default.createElement("div",{className:T.notSupportDesc},o("wallet_extension_function_emptystate_desc_switch_evm7702")),i.default.createElement("div",{className:T.notSupportButton},i.default.createElement(l,{category:l.CATEGORY.outline,type:l.TYPE.primary,size:l.SIZE.md,onClick:s},o("wallet_extension_general_btn_switch_wallet"))))}function vt(s){let v=q(),y=(0,it.useHistory)(),[d,S]=i.default.useState(),N=t=>{let n="upgrade7702";v(M({type:n,data:[t]})),y.push({pathname:R,search:`?type=${n}`})},k=t=>{let{baseCoinId:n,revokeContractAddress:u,revokeContractData:c}=t;N({walletId:s.walletId,baseCoinId:n,upgradeAddress:u,inputData:c,isUpgrade:!1})},f=t=>{let{baseCoinId:n,contractAddress:u,contractData:c}=t;N({walletId:s.walletId,baseCoinId:n,upgradeAddress:u,inputData:c,isUpgrade:!0})};return i.default.createElement(i.default.Fragment,null,i.default.createElement(U,{emptyClassName:T.emptyClassName,emptyText:i.default.createElement(wt,{onSwitch:s.onSwitch}),dataSource:s.supportedNetworks,renderItem:t=>{let n=[],u={children:o("wallet_extension_function_btn_upgrade"),type:l.TYPE.highlight,onClick:()=>{f(t),P("upgrade",t.chainIndex)},"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.UPGRADE_BUTTON,key:1};return t.status===5?n.push({loadingText:o("wallet_extension_function_btn_revoking"),type:l.TYPE.gray,loading:!0,"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.REVOKING_BUTTON,key:5}):t.status===2?n.push({loadingText:o("wallet_extension_function_btn_upgrading"),type:l.TYPE.highlight,loading:!0,"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.UPGRADING_BUTTON,key:2}):t.status===3?(n.push({children:o("wallet_extension_function_btn_revoke"),type:l.TYPE.gray,onClick:()=>{k(t),P("revokeokx7702",t.chainIndex)},"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.REVOKE_BUTTON,key:3}),t.needUpdate&&n.push(u)):t.status===4?n.push({children:o("wallet_extension_function_btn_apply_okx"),type:l.TYPE.gray,onClick:()=>{S(t)},"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.APPLY_OKX_BUTTON,key:4}):n.push(u),i.default.createElement(U.Coin,{className:T.root,disabledCursor:!0,symbol:t.chainName,name:t.needUpdate?o("wallet_extension_approvals_label_new_version"):void 0,icon:t.imageUrl,"data-testid":_.UPGRADE_7702_SUPPORTED_NETWORKS.NETWORK_ITEM},i.default.createElement("div",{className:T.btnGroup},n.map(c=>i.default.createElement(l,{category:l.CATEGORY.fill,size:l.SIZE.xs,...c,key:c.key}))))}}),i.default.createElement(nt,{visible:!!d,onSwitch:()=>{d&&(f(d),S(void 0),P("applyokx7702",d.chainIndex))},onRevoke:()=>{d&&(k(d),S(void 0),P("revokeothers",d.chainIndex))},onCancel:()=>{S(void 0)}}))}var at=vt;a();r();var p={content:"_content_dqvuo_1",title:"_title_dqvuo_4",subTitle:"_subTitle_dqvuo_10",walletWrapper:"_walletWrapper_dqvuo_17",wallet:"_wallet_dqvuo_17",walletIcon:"_walletIcon_dqvuo_34",questionIcon:"_questionIcon_dqvuo_37",supportNetworks:"_supportNetworks_dqvuo_42",loading:"_loading_dqvuo_50"};function Tt(){let s=(0,rt.useHistory)(),v=tt(),[y,d]=(0,e.useState)(!0),[S,N]=(0,e.useState)([]),k=Z(),f=v.get("walletId")||k,t=z(f),n=(0,e.useMemo)(()=>{let m="";return A(t)||t.keyringName&&(m+=t.keyringName,t.walletName&&(m+="-",m+=t.walletName)),m},[t]),u=()=>{s.push(`${Y}?walletId=${f}`),W({terminal:"extension"})},c=async()=>{try{let st=((await j(f))?.chainList||[]).map(({contractAddress:lt,contractData:_t,revokeContractAddress:dt,revokeContractData:pt,chainIndex:O,address:mt,status:ut,needUpdate:ct})=>{let C=L({chainId:O});return{chainName:C.chainName,baseCoinId:C.coinId,imageUrl:C.imageUrl,contractAddress:lt,contractData:_t,revokeContractAddress:dt,revokeContractData:pt,chainIndex:O,address:mt,status:ut,needUpdate:ct}});N(st)}catch(m){let x=m;$.error({title:x?.msg||o("wallet_home_toast_network_error")})}finally{d(!1)}};return(0,e.useEffect)(()=>{c()},[f]),Q("wallet-inform",{onSuccess:async m=>{if(!m?.data)return;m.data.type===1&&await c()}}),e.default.createElement(e.default.Fragment,null,e.default.createElement(J,{onBack:()=>{s.push(K)},className:p.nav,bordered:!1,closeable:!1}),e.default.createElement("div",{className:p.content},e.default.createElement("div",{className:p.title},o("wallet_extension_function_header_upgrade_evm_wallets")),e.default.createElement("div",{className:p.subTitle},o("wallet_extension_function_header_7702_gives")),e.default.createElement("div",{className:p.walletWrapper},e.default.createElement("div",{className:p.wallet,onClick:u,"data-testid":_.UPGRADE_7702_ENTRY_PAGE.WALLET_SELECTOR},e.default.createElement(I,{className:(0,D.default)("okx-wallet-plugin-wallet",p.walletIcon)}),n),e.default.createElement(I,{className:(0,D.default)("okx-wallet-plugin-question-mark",p.questionIcon),onClick:()=>{globalThis.platform.openTab({url:o("wallet_extension_dialog_hyperlink_eip7702")}),G({terminal:"extension"})}})),e.default.createElement(et,null),e.default.createElement("div",{className:p.supportNetworks},o("wallet_extension_function_select_title_supported_wallets")),y?e.default.createElement("div",{className:p.loading},e.default.createElement(V.Circle,null)):e.default.createElement(at,{walletId:f,supportedNetworks:S,onSwitch:u})))}var Ie=Tt;export{Ie as default};
//# sourceMappingURL=Upgrade7702Entry-BHVZLR77.js.map
