import{b as d}from"./chunk-F3ILJHGP.js";import{n as T,o as l}from"./chunk-UI4IZNSB.js";import{vb as v}from"./chunk-EQ34WRCJ.js";import{a as w}from"./chunk-DNGRHKLV.js";import{f as u}from"./chunk-LRIABBHT.js";import{f as k,o as c,q as m}from"./chunk-UWURTNRY.js";c();m();c();m();var x=k(w());var P=[{inputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"spender",type:"address"}],internalType:"struct IAllowanceTransfer.TokenSpenderPair[]",name:"approvals",type:"tuple[]"}],name:"lockdown",outputs:[],stateMutability:"nonpayable",type:"function"}],y=async({tokenAddress:o,approvalAddress:r,permit2Address:t,localType:e})=>{let{ethers:n}=await T();return t?new n.Contract(d(t,e),P).interface.encodeFunctionData("lockdown",[[{token:o,spender:r}]]):new n.Contract(d(o,e),x.default).interface.encodeFunctionData("approve",[d(r,e),0])},g=async({tokenAddress:o,approvalAddress:r,userAddress:t})=>{let e="approve(address,uint256)",n=[{type:"address",value:r},{type:"uint256",value:0}],p=await l(),a=new p({fullHost:"https://api.trongrid.io",headers:{}});return await a.transactionBuilder.triggerSmartContract(a.address.toHex(o),e,{},n,a.address.toHex(t))};var W=async({address:o,chainId:r,tokenAddress:t,approvalAddress:e,permit2Address:n,coinId:p,approvalNum:a})=>{let s;try{if(Number(r)===Number(u.TRX))s=(await g({tokenAddress:t,approvalAddress:e,userAddress:o})).transaction;else{let i=v({chainId:r}),f=await y({tokenAddress:t,approvalAddress:e,permit2Address:n,localType:i?.localType});s={from:o,to:n||t,value:"0x0",data:f}}return{chainId:r,approvalAddress:e,tokenAddress:t,coinId:p,txParams:s,approvalNum:a}}catch{return{}}};export{W as a};
//# sourceMappingURL=chunk-VD2FZ6U7.js.map
