import{a as Ne,b as Fe,d as Be,f as we}from"./chunk-5WI3NR4H.js";import{c as X,e as $}from"./chunk-HLTJYEGI.js";import{a as B,b as r}from"./chunk-4YPL7LEO.js";import{b as Ge}from"./chunk-DKVOSSSH.js";import{c as x}from"./chunk-T2AAZNU7.js";import{s as S}from"./chunk-BIUKJDG5.js";import{a as Ie}from"./chunk-U44ZBWPF.js";import{a as De,d as Te}from"./chunk-NS5EW6UN.js";import{n as F}from"./chunk-KC2XLVFC.js";import{ca as p}from"./chunk-3F7OC7N7.js";import{a as Q,d as xe}from"./chunk-EPDR6VAQ.js";import{p as e}from"./chunk-DSNMNSMD.js";import{J as ye,o as T}from"./chunk-URGJ6D4O.js";import{C as i}from"./chunk-XYWWXNVK.js";import{b as v}from"./chunk-FLSAETOH.js";import{Aa as xo,e as K}from"./chunk-4C5HF6J2.js";import{f as b,o,q as n}from"./chunk-UWURTNRY.js";o();n();var c=b(v());xo();o();n();o();n();var ee=b(v());o();n();var y=b(v());var Do=({title:a,text:m,...l})=>y.default.createElement(T.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:u=>y.default.createElement(u,null,y.default.createElement("div",{className:"tx-check-dialog__content"},y.default.createElement("div",{className:"tx-check-dialog__content-title"},a),y.default.createElement("div",{className:"tx-check-dialog__content-text"},m))),cancelBtnProps:{category:i.CATEGORY.outline,size:i.SIZE.lg},confirmBtnProps:{type:i.TYPE.highlight,size:i.SIZE.lg},...l}),w=y.default.memo(Do);var To=({visible:a,onConfirm:m,onCancel:l,txCheckData:u})=>{let C=u?.find(g=>g?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:d,primaryButtonName:_,secondaryButtonName:k}=C||{};return ee.default.createElement(w,{visible:a,title:h||e("wallet_extension_transaction_popup_failed_transaction"),text:d||e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:_||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_skip"),onConfirm:m,onCancel:l})},oe=ee.default.memo(To);o();n();var s=b(v());function yo({visible:a,onConfirm:m,onCancel:l,data:u}){let{userGasInfo:C,updateGasInfo:h,baseCoin:d}=u,{gasPrice:_,maxFeePerGas:k}=h,{supportEip1559:g,gasLimit:I,gasPrice:W,maxFeePerGas:Y}=C,A=g?Y:W,z=X(A,I,d),G=$(A,I),O=g?k:_,L=X(O,I,d),V=$(O,I);return s.default.createElement(T.Prompt,{visible:a,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:m,onClose:l,confirmText:e("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:i.TYPE.highlight,size:i.SIZE.lg},renderContent:E=>s.default.createElement(E,null,s.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},e("extension_toast_title_transaction_replace")),s.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},e("extension_toast_subtitle_gasincrease")),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_current_transaction")),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},z),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},G)),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_gasprice")),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},L),s.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},V)))})}var ne=(0,s.memo)(yo);o();n();var te=b(v());var Io=({visible:a,onConfirm:m,onCancel:l,txCheckData:u})=>{let C=u?.find(g=>g?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:d,primaryButtonName:_,secondaryButtonName:k}=C||{};return te.default.createElement(w,{visible:a,title:h,text:d,confirmText:_,cancelText:k,onConfirm:m,onCancel:l,hideCloseBtn:!0})},ie=te.default.memo(Io);o();n();var re=b(v());var Go=({visible:a,onConfirm:m,onCancel:l,txCheckData:u})=>{let C=u?.find(g=>g?.checkType===p.OVERWRITTEN)||{},{popUpTitle:h,popUpDesc:d,primaryButtonName:_,secondaryButtonName:k}=C||{};return re.default.createElement(w,{visible:a,title:h||e("wallet_extension_transaction_popup_pending_transaction"),text:d||e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:_||e("wallet_extension_transaction_popup_btn_replace"),cancelText:k||e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:m,onCancel:l,hideCloseBtn:!0})},ae=re.default.memo(Go);o();n();var ce=b(v());o();n();var se=b(v());var No=({...a})=>se.default.createElement(T.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:T.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:i.TYPE.highlight,size:i.SIZE.lg},cancelBtnProps:{category:i.CATEGORY.outline,size:i.SIZE.lg},...a}),Ee=se.default.memo(No);var Fo=({visible:a,onConfirm:m,onCancel:l})=>ce.default.createElement(Ee,{visible:a,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:l?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:m,onCancel:l||(()=>{})}),le=ce.default.memo(Fo);var Bo=({children:a=null,btnProps:m={},dataForCheck:l={},whetherCheckRepeat:u=!1,whetherCheckGas:C=!0,onFailedCancel:h=()=>{},onFailedConfirm:d=()=>{},onPendingCancel:_=()=>{},onPendingConfirm:k=()=>{},onRepeatCancel:g=()=>{},onRepeatConfirm:I=()=>{},onPending7702Cancel:W=()=>{},onPending7702Confirm:Y=()=>{},onClick:A=()=>{},beforeClick:z=()=>{},afterClick:G=()=>{},onGasReplaceCancel:O,onGasReplaceConfirm:L})=>{let{fetchParams:V,userGasInfo:E,baseCoinAmountUse:Ue}=l,N=(0,c.useRef)([]),Z=(0,c.useRef)(S.NEW),me=(0,c.useRef)({}),D=(0,c.useRef)({}),pe=(0,c.useRef)(!1),[Re,{setTrue:Se,setFalse:ue}]=F(!1),[Ae,{setTrue:Oe,setFalse:de}]=F(!1),[We,{setTrue:Ye,setFalse:ge}]=F(!1),[ze,{setTrue:Le,setFalse:fe}]=F(!1),[Ve,{setTrue:Ze,setFalse:Ce}]=F(!1),{coinId:H,from:he,to:He,amount:Me,gasPrice:je}=V,{baseCoin:_e}=Ie(H,!0),{coinAmountInt:qe}=Ge(_e.coinId),Je=async()=>{let t={checkTypes:[p.REPEAT,p.OVERWRITTEN],coinId:H,from:he,to:He,amount:Me,gasPrice:je},[{data:f=[]},{data:R}]=await Promise.all([Te(t),De({coinId:H,fromAddr:he})]);N.current=f;let J=R?.info?.gasPrice||{};return me.current=J,f},U=()=>N.current,Ke=()=>me.current,ke=()=>D.current,Qe=()=>{let f=U().find(vo=>vo?.checkType===p.OVERWRITTEN)||{},{gasPrice:R,priorityFee:J}=f;return{originGasPrice:Q(R,1.1),originPriorityFee:Q(J,1.1)}},Xe=()=>{Z.current=S.ON_CHAIN},$e=()=>{Z.current=S.NEW},eo=t=>(D.current={...D.current,...t},D.current),oo=()=>{pe.current=!0},no=()=>{ye.error({title:e("extension_toast_text_insufficient_balance")})},M=r(()=>{let t={nonce:0,updateGasInfo:null},f=N.current.find(R=>R?.checkType===p.OVERWRITTEN)||{};return Z.current===S.NEW?t.nonce=f.newNonce:t.nonce=f.nonce,pe.current&&(D.current.gasPrice||D.current.maxFeePerGas)&&(t.updateGasInfo=D.current),t},A),to=B(Se,x),io=B(Oe,x),ro=B(Ye,x),ao=t=>Fe(t,to,io,ro),so=B(eo,Ze,x),Pe=C?t=>Be(t,{userGasInfo:E,serverGasInfo:Ke(),originTxGasInfo:Qe()},so):K,co=B(no,G,x),lo=t=>{let f=xe(qe,Ue);return we(t,{userGasInfo:E,updateGasInfo:ke(),baseCoinAmountAvailable:f},co)},be=u?t=>(Ne(t,p.REPEAT)&&(Le(),x()),t):K,ve=r(U,be,M),j=r(Xe,ve),q=r($e,ve),mo=r(h,ue,q),po=r(d,ue,U,Pe,j),uo=r(_,de,q),go=r(k,de,U,Pe,j),fo=r(W,ge),Co=r(Y,ge,q),ho=r(g,fe,G),_o=r(I,fe,M),ko=r(O,Ce,G,x),Po=r(oo,L,Ce,U,lo,j),bo=r(z,Je,ao,be,M,G);return c.default.createElement(c.default.Fragment,null,c.default.createElement(i,{category:i.CATEGORY.fill,type:i.TYPE.highlight,size:i.SIZE.lg,block:!0,...m,onClick:bo},a),c.default.createElement(oe,{visible:Re,txCheckData:N.current,onCancel:mo,onConfirm:po}),c.default.createElement(ae,{visible:Ae,txCheckData:N.current,onCancel:uo,onConfirm:go}),c.default.createElement(ie,{visible:We,txCheckData:N.current,onCancel:fo,onConfirm:Co}),c.default.createElement(le,{visible:ze,onCancel:ho,onConfirm:_o}),c.default.createElement(ne,{visible:Ve,onCancel:ko,onConfirm:Po,data:{baseCoin:_e,userGasInfo:E,updateGasInfo:ke()}}))},wo=Bo;o();n();export{wo as a};
//# sourceMappingURL=chunk-CO7E2WII.js.map
