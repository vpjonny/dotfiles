import{x as h,z as v}from"./chunk-V7YATDMZ.js";import{a as k,b as E}from"./chunk-NQGIYDUG.js";import{k as C,s as U}from"./chunk-KC2XLVFC.js";import{b as _}from"./chunk-FLSAETOH.js";import{Aa as P,M as b,Z as w}from"./chunk-4C5HF6J2.js";import{f as y,o as u,q as a}from"./chunk-UWURTNRY.js";u();a();var f=y(_());P();u();a();var T=(n,l)=>{let{coinId:e,address:c}=n||{},p=h(),{ready:m=!0,...r}=l||{},i={retryCount:3,ready:!!m&&!!e&&!!c,...r},{data:t,loading:S,error:s}=C(async()=>await p(n),i);return[S,t,s]},x=T;u();a();var D=y(_());P();u();a();var W=(n={})=>n?JSON.parse(JSON.stringify(n)):{};var F=7e3,R="wallet-gas-price",L=(n,l)=>{let{chainId:e,coinId:c,address:p,...m}=n||{},{onError:r,onSuccess:i,pollingInterval:t,ready:S=!0}=l||{},s=e!==void 0&&S,I=h(),d=E(R,{ready:s,pollingInterval:t||F,onError:async()=>{let o=await I({coinId:c,address:p,chainId:e,...m});i?.(o),r?.()}});U(()=>{let o=d?.data?.[0]||{},g=W(o);!b(g)&&Number(g?.chainIndex)===Number(e)&&i?.(g)},[d]),(0,D.useEffect)(()=>{if(s)return k.sendChannel({op:"subscribe",args:[{chainId:e,channel:R}]}),()=>{k.sendChannel({op:"unsubscribe",args:[{chainId:e,channel:R}]})}},[s])},N=L;var B=(n,l)=>{let[e,c]=(0,f.useState)({}),[p,m]=(0,f.useState)(!1),r=(0,f.useRef)(null),{onSuccess:i,pollingInterval:t=7e3,...S}=l||{},[s,,I]=x(n,{onSuccess:o=>{c(o),i?.(o)},...S}),d=e?.supportPush;return(0,f.useEffect)(()=>(d===!1&&!s&&t?(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{m(!0)},t)):m(!1),()=>{r.current&&clearTimeout(r.current)}),[d,s,t]),v(n,{pollingInterval:t,ready:d===!1&&p,onSuccess:o=>{c(o),i?.(o)}}),N(n,{pollingInterval:t,ready:d===!0,onSuccess:(o={})=>{let g=w({},e,o);c(g),i?.(g)}}),[s,e,I]},fn=B;export{fn as a};
//# sourceMappingURL=chunk-3MLYZLAT.js.map
