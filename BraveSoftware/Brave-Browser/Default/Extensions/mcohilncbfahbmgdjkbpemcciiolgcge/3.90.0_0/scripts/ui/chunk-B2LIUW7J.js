import{a as q}from"./chunk-2KVSCBMV.js";import{a as S}from"./chunk-QR6SNDPA.js";import{N as b}from"./chunk-NS5EW6UN.js";import{a as R,u as g}from"./chunk-KC2XLVFC.js";import{ga as M,ra as a}from"./chunk-MJDO2VHF.js";import{b as v}from"./chunk-FLSAETOH.js";import{f as P,o as y,q as I}from"./chunk-UWURTNRY.js";y();I();var s=P(v());var z=n=>{let c=(0,s.useMemo)(()=>f=>S(f,{enableEmptyAccount:n}),[n]);return a(c)},Q=(n,{beforeRequest:c,onFinally:f,reloadDeps:d,enableEmptyAccountCoins:w=!1,enable:i,filter:B=!0}={})=>{let W=z(w),_=a(M),m=(0,s.useRef)(null),k=q(),t=(0,s.useRef)({}),x=R(async(e=0)=>{if(i===!1)return{list:[],pageNo:e,isNoMore:!0};let C=await c?.();if(C)return C;let h=0,o=null,r=null,p=e;n?.chainIds||(n.chainIds=W.map(u=>u.chainId));do{t.current[e]=t.current[e]||0;let u=++t.current[e];if(r=await b({...n,userUniqueId:_,pageNo:e}),u<t.current[e]||typeof t.current[e]>"u")return{list:[],pageNo:e};t.current[e]===u&&delete t.current[e],B?o=k(r):o=r,p++,h++}while(r&&r.length>0&&o?.length===0&&h<5);return{list:o,pageNo:p,isNoMore:o.length===0}}),l;typeof i=="boolean"?d?l=[...d,i]:l=[i]:l=d;let{data:F,loading:L,loadingMore:U,reload:D}=g(e=>x(e?.pageNo??0),{target:m,isNoMore:e=>e?.isNoMore,onFinally:f,reloadDeps:l});return{data:F,loading:L,loadingMore:U,listRef:m,reload:D}};export{z as a,Q as b};
//# sourceMappingURL=chunk-B2LIUW7J.js.map
