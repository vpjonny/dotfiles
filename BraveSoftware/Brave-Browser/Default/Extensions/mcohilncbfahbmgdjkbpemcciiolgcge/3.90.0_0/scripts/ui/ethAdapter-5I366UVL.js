import{a as K,c as s,d as f,e as _}from"./chunk-OB3TCQZN.js";import"./chunk-NDXB46PK.js";import{a as C}from"./chunk-VRC73BUB.js";import"./chunk-TO4NOIO7.js";import"./chunk-B65TWR5I.js";import{a as O}from"./chunk-A2QCZBSN.js";import"./chunk-6HZZC7IQ.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import{a as M,b as H}from"./chunk-U5DGHXS4.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import{a as w}from"./chunk-WN3TRBGI.js";import"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import{f as D}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Z as g}from"./chunk-EQ34WRCJ.js";import"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import"./chunk-3O2IEAHF.js";import"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import"./chunk-FB3ILH2L.js";import"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-PESQD55U.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-ZVKCRT3D.js";import"./chunk-O5NUB7LT.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as x,o as E,q as I}from"./chunk-UWURTNRY.js";E();I();var v=x(K()),P=x(C()),i=x(D());var T=v.default.HardwareWebSdk,S=class extends _{async signTransaction(y,a,u){return new Promise((e,r)=>{(async()=>{let{onekeyInfo:d,hdPathMap:o,keyringName:n}=y,c;try{c=await this.initOneKey({onekeyInfo:d,onUiCancel(){r(new Error(w))}})}catch(p){return r(this.handleErrors(p,s.deal,{keyringName:n}))}a=O(a);let m=await M(a),h=o[g],{success:l,payload:t}=await T.evmSignTransaction(d?.connectId,c,{path:h,transaction:{...m.toJSON(),to:(0,i.bufferToHex)(m.to).toString(),chainId:a.chainId}});if(f.closeModal(),l){let p=await H(m,t);return e(u?p:{rawTxResult:p})}return r(this.handleErrors(t,s.deal,{keyringName:n}))})()})}async signPersonalMessage(y,a={}){return new Promise((u,e)=>{(async()=>{let{onekeyInfo:r,hdPathMap:d,keyringName:o}=y,n;try{n=await this.initOneKey({onekeyInfo:r,onUiCancel(){e(new Error(w))}})}catch(t){return e(this.handleErrors(t,s.deal,{keyringName:o}))}let{data:c=""}=a||{},m=d[g],{success:h,payload:l}=await T.evmSignMessage(r?.connectId,n,{path:m,messageHex:(0,i.stripHexPrefix)(c)});if(f.closeModal(),h){let{signature:t=""}=l||{};return u((0,i.addHexPrefix)(t))}return e(this.handleErrors(l,s.deal,{keyringName:o}))})()})}async signTypedData(y,a={}){return new Promise((u,e)=>{(async()=>{let{onekeyInfo:r,hdPathMap:d,keyringName:o}=y,n;try{n=await this.initOneKey({onekeyInfo:r,onUiCancel(){e(new Error(w))}})}catch(N){return e(this.handleErrors(N,s.deal,{keyringName:o}))}let c=d[g];if(!(a.version==="V4"))return f.closeModal(),e(new Error("OneKey: Only version 4 of typed data signing is supported"));let h=JSON.parse(a.data),{domain_separator_hash:l,message_hash:t}=(0,P.default)(h,!0),{success:p,payload:k}=await T.evmSignTypedData(r?.connectId,n,{path:c,data:h,metamask_v4_compat:!0,domainHash:l,messageHash:t});return f.closeModal(),p?u((0,i.addHexPrefix)(k?.signature)):e(this.handleErrors(k,s.deal,{keyringName:o}))})()})}},q=new S;export{q as default};
//# sourceMappingURL=ethAdapter-5I366UVL.js.map
