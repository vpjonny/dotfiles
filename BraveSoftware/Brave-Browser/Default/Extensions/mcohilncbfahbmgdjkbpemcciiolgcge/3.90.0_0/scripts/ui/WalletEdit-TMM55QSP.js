import{a as Te}from"./chunk-6RO77YCF.js";import{a as Z}from"./chunk-DEUTH4MR.js";import{a as ke}from"./chunk-NOL3AM4I.js";import{a as B,b as Ce,d as j}from"./chunk-VU36HZ2Q.js";import{a as X}from"./chunk-4VVKOCP5.js";import"./chunk-PDAPPSN7.js";import"./chunk-K4DJNG3I.js";import{a as De}from"./chunk-IUZFRS2D.js";import"./chunk-HUZIRVCJ.js";import"./chunk-LMVZDUFT.js";import{b as Le}from"./chunk-O652XWZZ.js";import{b as ie}from"./chunk-BDXN3GYH.js";import"./chunk-772ZJYXN.js";import"./chunk-J5B5KBXF.js";import"./chunk-4AIWJOGE.js";import"./chunk-OFZ5ADZF.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-YPTISS47.js";import"./chunk-XHRUTTJG.js";import{d as Ae}from"./chunk-AVG63QW4.js";import{b as pe}from"./chunk-ZYCW6CWH.js";import"./chunk-RQUKPC6Z.js";import"./chunk-OYIB3B2O.js";import{G as Ee}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import{a as q}from"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as T}from"./chunk-PMG6IXOR.js";import{a as F}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import{b as xe}from"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import{f as H}from"./chunk-6C7RJCTT.js";import{o as V}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-ARDRUD4P.js";import{h as ye,t as fe,u as Ne,v as Ie}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{a as me}from"./chunk-KC2XLVFC.js";import{qa as ge,ra as Y}from"./chunk-MJDO2VHF.js";import{a as $}from"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{la as ce,na as ue,oa as _e}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import{f as de}from"./chunk-OLICTWCW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as r}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Mb as D}from"./chunk-EQ34WRCJ.js";import{p as O}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as Ge}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as G,u as U}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as P}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as ne}from"./chunk-FB3ILH2L.js";import{b}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import{Aa as oe,N as le,g as z,r as se}from"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as L,o as n,q as i}from"./chunk-UWURTNRY.js";n();i();var I=L(b()),Me=L(Ge());oe();n();i();var ae=L(b());var Fe=({isLoading:t,onDone:l})=>ae.default.createElement(xe.FooterActions,{placeholder:!0},ae.default.createElement(P,{onClick:l,category:P.CATEGORY.fill,type:P.TYPE.primary,size:P.SIZE.lg,block:!0,disabled:t},O("wallet_manage_btn_edit_done"))),we=Fe;n();i();var o=L(b());var ee=L(ne());n();i();var J=L(b()),he=L(ne());n();i();var M={handler:"_handler_18xte_1",disabled:"_disabled_18xte_4",keyring:"_keyring_18xte_7",wallet:"_wallet_18xte_11",icon:"_icon_18xte_16",noHandler:"_noHandler_18xte_23"};var ve=({type:t,canDrag:l,listeners:m,disabled:x,getHandlerRef:f})=>l?J.default.createElement(r.Box,{ref:f,...m,className:(0,he.default)(M.handler,M[t],{[M.disabled]:x})},J.default.createElement(T.IconButton,{className:M.icon,icon:"okx-wallet-plugin-hamburger","data-testid":F.WALLET_MANAGEMENT_PAGE.DRAG_AREA_ICON})):J.default.createElement(r.Box,{ref:f,...m,className:M.noHandler}),Q=ve;n();i();var s=L(b());var R=L(ne());oe();n();i();var _={item:"_item_kxzo4_1",dragging:"_dragging_kxzo4_9",children:"_children_kxzo4_13",wrapper:"_wrapper_kxzo4_16",wallet:"_wallet_kxzo4_20",canDrag:"_canDrag_kxzo4_23",delete:"_delete_kxzo4_26",avatar:"_avatar_kxzo4_34",name:"_name_kxzo4_38",draw:"_draw_kxzo4_44",text:"_text_kxzo4_47","text--enabled":"_text--enabled_kxzo4_53",textEnabled:"_text--enabled_kxzo4_53","text--expiring":"_text--expiring_kxzo4_56",textExpiring:"_text--expiring_kxzo4_56",drawIcon:"_drawIcon_kxzo4_67",more:"_more_kxzo4_70"};var ze=({keyringIdentity:t,editIdentityName:l,onDragWalletStart:m,onDragWalletEnd:x,editKeyringIdentities:f})=>{let p=t?.walletIdentities||[],N=ge(),d=ye(),{isRpcMode:g}=Y(H),c=X(),[w]=q(),C=(0,s.useCallback)(()=>{m(t.keyringId)},[m,t]),h=(0,s.useCallback)(a=>{let u=se(f),A=u.find(({keyringId:E})=>E===t.keyringId);A.walletIdentities=a,x(u)},[f,t,x]),W=j(),S=p.length>1;return s.default.createElement(U.Sortable,{uniqueKey:"walletId",itemClassName:_.item,onDragStart:C,itemChildrenClassName:_.children,itemDraggingClassName:_.dragging,itemWrapperClassName:_.wrapper,onDragEnd:h,dataSource:p,withOverlay:!1,renderHandler:({getHandlerRef:a,listeners:u})=>s.default.createElement(Q,{type:"wallet",canDrag:S,listeners:u,getHandlerRef:a})},p.map(a=>{let u=Le(a?.teeStatus);return s.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,R.default)(_.wallet,{[_.canDrag]:S}),key:a.walletId,"data-selected":a.walletId===d},s.default.createElement(r.Box,{className:_.delete},s.default.createElement(T,{className:"okx-wallet-plugin-delete",onClick:()=>{let A=u==="enabled"||u==="expiring";if([D.MNEMONIC,D.HARDWARE].includes(t.keyringIdentityType)&&p.length>1){N(pe({type:"REMOVE_ACCOUNT",accountId:a.walletId,keyringType:t.keyringIdentityType,isSA:A}));return}W({saAccountLen:A?1:void 0,groupId:a.groupId,keyringType:t.keyringIdentityType,keyringId:t.keyringId})}})),s.default.createElement(ie,{size:ie.SIZE.sm,className:_.avatar,walletIdentity:a}),s.default.createElement(r.FlexBox,{align:r.ALIGN.center,direction:r.DIRECTION.vertical,className:_.name,onClick:()=>{l({type:B.WALLETACCOUNT,identity:a,initialName:a.walletName,otherNames:p.map(({walletName:A,walletId:E})=>a.keyringId===E?"":A).filter(Boolean)})}},s.default.createElement(r.FlexBox,{align:r.ALIGN.center,style:{width:"100%"}},s.default.createElement(V.Text,{ellipsis:!0,className:(0,R.default)(_.text,{[_["text--enabled"]]:u==="enabled"||u==="expiring"})},a.walletName),u!=="not_enabled"?s.default.createElement(De,{status:u}):null,s.default.createElement(r.Box,{className:_.draw},s.default.createElement(T,{className:(0,R.default)("okx-wallet-plugin-draw",_.drawIcon)}))),s.default.createElement(Z,{isRpcMode:g,currentRpcNetwork:c,hiddenAssets:w,walletAsset:a?.walletAsset,unsopportCurrentNetwork:a?.unsupported})),s.default.createElement($,{className:_.more,to:`${_e}?walletId=${a?.walletId}`},s.default.createElement(T.IconButton,{icon:"okx-wallet-plugin-more"})))}))},We=ze;n();i();var Ke=L(b());var Se=()=>{(0,Ke.useLayoutEffect)(()=>{let t=document.querySelector('[data-selected="true"]');setTimeout(()=>{t.scrollIntoView({behavior:"auto",block:"center"})},100)},[])};n();i();var y={item:"_item_1os1d_1",children:"_children_1os1d_8",dragging:"_dragging_1os1d_11",wrap:"_wrap_1os1d_15",disabled:"_disabled_1os1d_22",showBottomLine:"_showBottomLine_1os1d_25",keyring:"_keyring_1os1d_35",canDrag:"_canDrag_1os1d_38",delete:"_delete_1os1d_41",name:"_name_1os1d_49",canEdit:"_canEdit_1os1d_53",draw:"_draw_1os1d_56",text:"_text_1os1d_59",more:"_more_1os1d_74"};var He=({editIdentityName:t,editKeyringIdentities:l,setEditKeyringIdentities:m})=>{let{isRpcMode:x}=Y(H),f=X(),[p]=q(),N=j(),d=(0,o.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||e===D.MPC||e===D.TON_MNEMONIC,[]),g=(0,o.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||de(e)||e===D.MPC||e===D.TON_MNEMONIC,[]),[c,w]=(0,o.useState)(""),C=(0,o.useCallback)(({id:e})=>{w(e)},[]),h=(0,o.useCallback)(e=>{w(""),m(e)},[m]),[W,S]=(0,o.useState)(""),a=(0,o.useCallback)(e=>{S(e)},[]),u=(0,o.useCallback)(e=>{S(""),m(e)},[m]),A=l.length>1;Se();let{keyringIdentitiesWithSA:E}=Te(l),Pe=me(e=>E.find(K=>K.keyringId===e)?.walletIdentities.filter(K=>K.teeStatus?.isActive).length);return o.default.createElement(U.Sortable,{uniqueKey:"keyringId",itemClassName:y.item,itemChildrenClassName:y.children,itemDraggingClassName:y.dragging,onDragStart:C,onDragEnd:h,dataSource:E,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:v})=>o.default.createElement(Q,{type:"keyring",canDrag:A,listeners:v,disabled:W,getHandlerRef:e})},E.map((e,v)=>o.default.createElement(r.Box,{className:(0,ee.default)(y.wrap,{[y.disabled]:W&&W!==e.keyringId,[y.showBottomLine]:v!==E.length-1}),key:e.keyringId},o.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:(0,ee.default)(y.keyring,{[y.canDrag]:A})},d(e)?o.default.createElement(r.Box,{className:y.delete},o.default.createElement(T,{icon:"okx-wallet-plugin-delete",onClick:()=>{let K=e?.walletIdentities?.[0]?.groupId;if(!K)return;let re=Pe(e.keyringId);N({saAccountLen:re,groupId:K,keyringType:e.keyringIdentityType,keyringId:e.keyringId})}})):null,o.default.createElement(r.FlexBox,{align:r.ALIGN.center,direction:r.DIRECTION.vertical,className:(0,ee.default)(y.name,{[y.canEdit]:g(e)}),onClick:()=>{g(e)&&t({type:B.WALLET,identity:e,initialName:e.keyringName,otherNames:E.map(({keyringName:K,keyringId:re})=>e.keyringId===re?"":K).filter(Boolean)})}},o.default.createElement(r.FlexBox,{align:r.ALIGN.center,style:{width:"100%"}},o.default.createElement(V.Text,{ellipsis:!0,className:y.text,"data-testid":F.WALLET_MANAGEMENT_PAGE.WALLET_ACCOUNT_NAME},e.keyringName),g(e)?o.default.createElement(r.Box,{className:y.draw},o.default.createElement(T,{icon:"okx-wallet-plugin-draw"})):null),o.default.createElement(Z,{isRpcMode:x,currentRpcNetwork:f,hiddenAssets:p,walletAsset:e?.walletAsset})),[D.PRIVATE_KEY].includes(e.keyringIdentityType)?null:o.default.createElement($,{className:y.more,to:`${ue}?keyringId=${e?.keyringId}`,testId:F.WALLET_MANAGEMENT_PAGE.KEYRING_MORE_BUTTON},o.default.createElement(T.IconButton,{icon:"okx-wallet-plugin-more"}))),c===e.keyringId?null:o.default.createElement(We,{keyringIdentity:e,editIdentityName:t,onDragWalletStart:a,onDragWalletEnd:u,editKeyringIdentities:E}))))},be=He;n();i();var te=L(b());oe();var Ye=t=>{let l=Ce(),m=fe(),x=Ne(),f=(0,te.useMemo)(()=>({async[B.WALLET](p,N){let d=p?.keyringId;if(d)try{await m(d,N),t(g=>g.map(c=>c.keyringId===d?{...c,keyringName:N}:c)),G.success(O("wallet_edit_wallet_toast_renamed_success"))}catch{z()}},async[B.WALLETACCOUNT](p,N){let d=p?.walletId;if(d)try{await x(d,N),t(g=>g.map(c=>{let w=c?.walletIdentities??[];return{...c,walletIdentities:w.map(C=>C.walletId===d?{...C,walletName:N}:C)}})),G.success(O("wallet_edit_wallet_toast_renamed_success"))}catch{z()}}}),[x,m,t]);return(0,te.useCallback)(({identity:p,...N})=>{l(N).then(d=>{let{type:g}=N,c=f[g];c&&c(p,d)}).catch(z)},[f,l])},Oe=Ye;n();i();var Be={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var Ue=()=>{let[,t]=Ee(null),[l,m]=(0,I.useState)(t),x=Oe(m),[f,p]=(0,I.useState)(!1),N=h=>{m(h),p(!0)},d=(0,Me.useHistory)(),g=Ie(),[c,w]=(0,I.useState)(!1),C=(0,I.useCallback)(async()=>{if(f){w(!0);try{let h={},W={};l.forEach(({keyringId:S,walletIdentities:a},u)=>{h[S]=u,a.forEach(({walletId:A},E)=>{W[A]=E})}),await g(h,W)}catch{G.error({title:O("extension_wallet_toast_sorting_failure")})}}d.push(`${ce}?from=seedVerify`)},[d,g,l,f]);return(0,I.useEffect)(()=>{!le(t,l)&&!f&&m(t)},[t,l]),I.default.createElement(r.Container,{className:Be.root},I.default.createElement(Ae,{backable:{icon:"okx-wallet-plugin-close"},bordered:!1,closeable:!1}),I.default.createElement(be,{editIdentityName:x,editKeyringIdentities:l,setEditKeyringIdentities:N}),I.default.createElement(we,{isLoading:c,onDone:C}),I.default.createElement(ke,null))},Jr=Ue;export{Jr as default};
//# sourceMappingURL=WalletEdit-TMM55QSP.js.map
