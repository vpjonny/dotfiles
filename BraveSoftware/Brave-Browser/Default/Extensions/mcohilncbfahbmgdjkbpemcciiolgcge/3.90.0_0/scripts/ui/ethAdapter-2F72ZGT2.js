import{a as J,b as H}from"./chunk-LQYOENAF.js";import{a as F}from"./chunk-VRC73BUB.js";import"./chunk-TO4NOIO7.js";import"./chunk-B65TWR5I.js";import"./chunk-OS6U6P6N.js";import{a as k}from"./chunk-C7RV3QFR.js";import{a as S}from"./chunk-A2QCZBSN.js";import"./chunk-55VRIXXR.js";import"./chunk-W6Z3G5IP.js";import{c as D}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import{a as I,b}from"./chunk-U5DGHXS4.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import{h as v}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import{a as N}from"./chunk-WN3TRBGI.js";import{c as w}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import{f as V}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Z as _}from"./chunk-EQ34WRCJ.js";import{p as l}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import"./chunk-3O2IEAHF.js";import{I as L,o as P}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import{a as B}from"./chunk-IQUFNLVG.js";import"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import"./chunk-FB3ILH2L.js";import{b as W}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import{Aa as A,u as M}from"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-EL77VG5Z.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as g,o as s,q as n}from"./chunk-UWURTNRY.js";s();n();var O=g(F()),T=g(J()),c=g(V());s();n();var a=g(W());A();s();n();var r={root:"_root_1sw4i_1",title:"_title_1sw4i_8",confirmTitle:"_confirmTitle_1sw4i_15 _title_1sw4i_8",confirmTitleHighLight:"_confirmTitleHighLight_1sw4i_21 _title_1sw4i_8",confirmDesc:"_confirmDesc_1sw4i_26",newImage:"_newImage_1sw4i_39",newImageTag:"_newImageTag_1sw4i_44"};var m={confirm:"CONFIRM"},R=()=>{let x=v({light:"/cdn/assets/imgs/787/trezor-light.png",dark:"/cdn/assets/imgs/287/trezor-dark.png"});return a.default.createElement(w.Box,{className:r.root},a.default.createElement(w.Box,{className:r.confirmTitle},l("extension_wallet_conncecthardware_check_ledgerwallet",{transaction:a.default.createElement("span",{className:r.confirmTitleHighLight},l("extension_wallet_conncecthardware_transaction_details"))})),a.default.createElement(w.Box,{className:r.confirmDesc},l("extension_wallet_conncecthardware_transaction_sent")),a.default.createElement(B,{src:x,className:r.newImageTag,pictureClassName:r.newImage}))},j={[m.confirm]:R},y=class{constructor(){this.renderContent=()=>{let o=j[this.type];return o?a.default.createElement(o,null):null};this.renderModalDom=()=>{this.modalDom=P.action({onClose:()=>{this.closeModal()},className:"hardware-wallet-tip-dialog",maskClosable:!1,alignBottom:!0,noTopRadius:!1,noContentPadding:!0,hideCloseBtn:!1,children:this.renderContent()})};this.openModal=M(o=>{this.closeModal(),this.visible=!0,this.type=o,this.renderModalDom()},300);this.closeModal=()=>{this.visible=!1,this.modalDom&&(this.modalDom.destroy(),this.modalDom=null)};this.visible=!1,this.type=m.confirm,this.modalDom=null}},i=new y;var C=class extends H{async signTransaction(o,t,p){i.openModal(m.confirm);let u=o.hdPathMap[_];t=S(t);let e=await I(t),{payload:d,success:f}=await T.default.ethereumSignTransaction({path:u,transaction:{...e.toJSON(),to:(0,c.bufferToHex)(e.to).toString(),chainId:t.chainId}});if(i.closeModal(),f){globalThis.platform.focusCurrentWindow();let h=await b(e,{...d});return k(h,t.from)?p?h:{rawTxResult:h}:this.throwInvalidPassPhraseTip()}return this.throwTxCancelTip()}async signPersonalMessage(o,t={}){i.openModal(m.confirm);let p=o.hdPathMap[_],{data:u=""}=t||{},{success:e,payload:d}=await T.default.ethereumSignMessage({path:p,message:(0,c.stripHexPrefix)(u),hex:!0});if(i.closeModal(),e){globalThis.platform.focusCurrentWindow();let{signature:f=""}=d||{};return(0,c.addHexPrefix)(f)}return this.throwTxCancelTip()}async signTypedData(o,t={}){i.openModal(m.confirm);let p=o.hdPathMap[_];if(!(t.version==="V4"))throw new Error("Trezor: Only version 4 of typed data signing is supported");let e=JSON.parse(t.data),{domain_separator_hash:d,message_hash:f}=(0,O.default)(e,!0),{success:h,payload:z}=await T.default.ethereumSignTypedData({path:p,data:e,metamask_v4_compat:!0,domain_separator_hash:d,message_hash:f});return i.closeModal(),h?(D().focusLastOkPopupWithCache(),z?.signature):this.throwTxCancelTip()}throwInvalidPassPhraseTip(){throw L.error(l("wallet_extension_transaction_toast_trezor")),new Error(N)}},wo=new C;export{wo as default};
//# sourceMappingURL=ethAdapter-2F72ZGT2.js.map
