import{a as q}from"./chunk-A7FGCMOW.js";import{c as Q}from"./chunk-V2CZ7DY4.js";import{Ba as me,Da as z,Ea as pe,f as y,pa as _,qa as fe,va as C}from"./chunk-P5GHREX3.js";import{a as B}from"./chunk-AP4E6GDF.js";import{Oc as N,Qc as j,c as m,d as G,e as p,k as M,l as le,n as L,yc as Se}from"./chunk-RPH2MNBW.js";import{A as k,y as E}from"./chunk-URGJ6D4O.js";import{a as Pe}from"./chunk-FB3ILH2L.js";import{b as D}from"./chunk-FLSAETOH.js";import{Aa as Y,M as ue,T as ce,l as K,ua as de}from"./chunk-4C5HF6J2.js";import{f as P,h as g,o as n,q as a}from"./chunk-UWURTNRY.js";n();a();var X=P(D()),Ee=P(Pe());var Ye=({...r})=>{let e=Q();return X.default.createElement(E.State,{type:E.State.TYPE.noResult,themeName:e,...r})},Ge=({...r})=>{let e=Q();return X.default.createElement(E.State,{type:E.State.TYPE.noNetwork,themeName:e,...r})};n();a();var he=P(D());function Le({text:r,equation:e,children:t}){return he.default.createElement(k,{title:r,disabled:r===(e||r),maxWidth:300},t||e||r)}n();a();Y();n();a();n();a();n();a();var Z=class{constructor(){g(this,"handlers",[])}rawSub(){}rawUnSub(){}onSub(){}sub(e){return this.handlers.push(e),this.handlers.length===1&&this.rawSub(),()=>{let o=this.handlers.indexOf(e);o>-1&&(this.handlers.splice(o,1),this.handlers.length===0&&this.rawUnSub())}}},W=Z;var J=class extends W{constructor(){super(...arguments);g(this,"lastChainId");g(this,"onSub",t=>{let o=Number(t),s=o!==this.lastChainId;C.info(_.ON_CHAIN_CHANGE,{chainId:t,userTrigger:s,evtType:fe}),this.handlers.forEach(c=>{c(o,s)}),this.lastChainId=o})}rawSub(){y.onChainChange(this.onSub)}rawUnSub(){y.offChainChange(this.onSub),this.lastChainId=void 0}},ge=J;n();a();Y();function Be(){return y.getWalletStorage().then(r=>r.getConnectedConfig())}var V=class extends W{constructor(){super(...arguments);g(this,"rawSubId");g(this,"lastWalletInfoPromise",null);g(this,"isWeb3Ready",!1);g(this,"onSub",t=>{let o=ue(K(t,"connectedAccount.chainIdAddressMap")),s=["add_connected_wallet","init_wallet"].includes(K(t,"actionType"));o&&s&&C.error(_.CHAIN_ID_ADDRESS_MAP_IS_EMPTY,{walletInfo:t}),this.isWeb3Ready=!0,this.lastWalletInfoPromise=Promise.resolve(t),this.handlers.forEach(c=>{c?.(t)}),C.info(_.WALLET_INFO,{evtType:"onWalletChange"})})}async ensureWeb3Ready(){if(this.isWeb3Ready)return;if((await y.getProviderData()).web3Provider.web3Provider){this.isWeb3Ready=!0;return}throw Error("web3.js is not ready")}rawSub(){this.rawSubId=y.onWalletChange(this.onSub)}rawUnSub(){y.offWalletChange(this.rawSubId),this.lastWalletInfoPromise=null}sub(t,{needFirstPush:o=!1,needWeb3Checker:s=!1}={}){if(o){this.lastWalletInfoPromise||(this.lastWalletInfoPromise=Be().then(i=>i.currentAccount.walletId?y.createAdapter().then(()=>s?this.ensureWeb3Ready():null).then(()=>i):i));let c=this.lastWalletInfoPromise;c.then(i=>{this.handlers.includes(t)&&this.lastWalletInfoPromise===c&&(t(i),C.info(_.WALLET_INFO,{evtType:"first_push_success"}))}).catch(i=>{C.info(_.WALLET_INFO,{evtType:"first_push_failed",error:i})})}return super.sub(t)}},ye=V,ht=new V;var Ae=new ge,De=new ye;function Ie(r){return L()?()=>{}:Ae.sub(r)}function ve(r,e){return L()?()=>{}:De.sub(r,e)}var w=class{constructor(){this.hasInitWalletInfo=!1;this.walletInfo=N;this.chainId=0;this.referralInfo={refCode:"",referralCommissionAddress:""};this.walletChange=(e=N)=>{this.hasInitWalletInfo||(this.hasInitWalletInfo=!0);let{currentAccount:t,...o}=e,s={...N,...t,...o};this.setWalletInfo(s)};this.chainChange=e=>{this.setChainId(e)};this.getAddressByChainId=e=>this.walletInfo?.chainIdAddressMap?.[e]||q;le(this),this.init()}setWalletInfo(e){e.walletId!==this.walletInfo.walletId&&this.setReferralInfo({refCode:"",referralCommissionAddress:""}),this.walletInfo=e}setReferralInfo(e){this.referralInfo=e}setChainId(e){this.chainId=e}init(){ve(this.walletChange,{needFirstPush:!0,needWeb3Checker:!0}),Ie(this.chainChange)}get computedIsOKXWallet(){return this.walletInfo.isOkxWallet}get computedTeeInfo(){return this.walletInfo.tee}get computedTargetWalletId(){return this.walletInfo?.targetWalletId||q}get isConnectedWallet(){return!!this.walletInfo?.walletId}get computedAccountId(){return this.walletInfo?.walletId||q}get computedAccountWalletAddressesArray(){let e=this.walletInfo?.address;return e?Array.isArray(e)?de(e):[e]:[]}get computedSignWalletAddress(){let e=this.computedAccountWalletAddressesArray;return e?.length===1?e[0]:this.getAddressByChainId(Se.ETHEREUM_MAINNET)}};w.storeId="newAccountStore",w.storeName="NewAccountStore";var ke=w,ee=ke,At=()=>new w;n();a();var f=P(D());n();a();var I=class{constructor(){this.storeInstances=new Map}static getFactory(){return I.instance||(I.instance=new I),I.instance}getInstance(e){if(!this.storeInstances.has(e)||L()){let t=new e;this.storeInstances.set(e,t)}return this.storeInstances.get(e)}clearInstance(e){this.storeInstances.delete(e)}clearAll(){this.storeInstances.clear()}};function _e(r){return I.getFactory().getInstance(r)}var te=(0,f.createContext)(null);function Me(r,e,t){let o=new Map,s=new Map,c=new Set,i=new Set,h=u=>typeof u=="function"&&typeof u.storeId=="string",Re=u=>typeof u=="function"&&typeof u.serviceId=="string";e?.forEach(u=>{if(h(u)){let x=u;if(r?.getStore(x)){console.warn(`[LayeredStoreProvider] Store conflict: "${x.storeId}" (${x.storeName}) already exists, please check if you really need it, and skip registration`);return}let v=_e(x);o.set(x.storeId,v);return}let d=u(),l=d.constructor;if(!r?.getStore(l)){o.set(l.storeId,d),c.add(d);return}throw new Error(`[LayeredStoreProvider] Store conflict: "${l.storeId}" (${l.storeName}) already exists in parent context. Duplicate injection is forbidden.`)});let ae={getStore:u=>{let d=u.storeId,l=o.get(d);return l||r?.getStore(u)},getService:u=>{let d=u.serviceId,l=s.get(d);return l||r?.getService(u)},getAllStores:()=>{let u=new Map;return r?.getAllStores().forEach((d,l)=>{u.set(l,d)}),o.forEach((d,l)=>{u.set(l,d)}),u},getAllServices:()=>{let u=new Map;return r?.getAllServices().forEach((d,l)=>{u.set(l,d)}),s.forEach((d,l)=>{u.set(l,d)}),u}};t?.forEach(u=>{if(Re(u)){let v=u;if(r?.getService(v))throw new Error(`[LayeredStoreProvider] Service conflict: "${v.serviceId}" (${v.serviceName}) already exists in parent context. Duplicate injection is forbidden.`);let ie=new v(ae);s.set(v.serviceId,ie),i.add(ie);return}let d=u(ae),l=d.constructor;if(!r?.getService(l)){s.set(l.serviceId,d),i.add(d);return}throw new Error(`[LayeredStoreProvider] Service conflict: "${l.serviceId}" (${l.serviceName}) already exists in parent context. Duplicate injection is forbidden.`)});let U=new Map;r?.getAllStores().forEach((u,d)=>{U.set(d,u)}),o.forEach((u,d)=>{U.set(d,u)});let $=new Map;return r?.getAllServices().forEach((u,d)=>{$.set(d,u)}),s.forEach((u,d)=>{$.set(d,u)}),{contextValue:{getStore:u=>{let d=u.storeId,l=o.get(d);return l||r?.getStore(u)},getService:u=>{let d=u.serviceId,l=s.get(d);return l||r?.getService(u)},getAllStores:()=>U,getAllServices:()=>$},currentStores:o,currentServices:s,destroyStores:c,destroyServices:i}}function Ne({children:r,stores:e,services:t}){let o=(0,f.useContext)(te),[s]=(0,f.useState)(()=>({parentContext:o,stores:e,services:t})),[c]=(0,f.useState)(()=>Me(o,e,t));return(0,f.useEffect)(()=>()=>{c.destroyServices.forEach(i=>{i.destroy?.()}),c.destroyStores.forEach(i=>{i.destroy?.()})},[]),f.default.createElement(te.Provider,{value:c.contextValue},r)}function re(){let r=(0,f.useContext)(te);if(!r)throw new Error("useLayeredStoreContext must be used within a LayeredStoreProvider");return r}function qe(r){let e=re(),t=!1;if(Array.isArray(r)){let s=r.map(c=>e.getStore(c));if(t){let c=r.filter((i,h)=>!s[h]).map(i=>`"${i.storeId}" (${i.storeName??i.name??"UnknownStore"})`);if(c.length)throw new Error(`[useLayeredStore] Missing store(s) in LayeredStoreProvider context: ${c.join(", ")}. Did you forget to register them in an ancestor <LayeredStoreProvider stores={[...]} />?`)}return s}let o=e.getStore(r);if(!o&&t){let s=r;throw new Error(`[useLayeredStore] Store not found in LayeredStoreProvider context: "${s.storeId}" (${s.storeName??s.name??"UnknownStore"}). Did you forget to register it in an ancestor <LayeredStoreProvider stores={[...]} />?`)}return o}function oe(r){let e=re(),t=!1;if(Array.isArray(r)){let s=r.map(c=>e.getService(c));if(t){let c=r.filter((i,h)=>!s[h]).map(i=>`"${i.serviceId}" (${i.serviceName??i.name??"UnknownService"})`);if(c.length)throw new Error(`[useLayeredService] Missing service(s) in LayeredStoreProvider context: ${c.join(", ")}. Did you forget to register them in an ancestor <LayeredStoreProvider services={[...]} />?`)}return s}let o=e.getService(r);if(!o&&t){let s=r;throw new Error(`[useLayeredService] Service not found in LayeredStoreProvider context: "${s.serviceId}" (${s.serviceName??s.name??"UnknownService"}). Did you forget to register it in an ancestor <LayeredStoreProvider services={[...]} />?`)}return o}n();a();n();a();var A=class{constructor(e){this.context=e}getStore(e){return this.context.getStore(e)}getService(e){return this.context.getService(e)}};n();a();var Ce=(r="")=>{let e=r.substring(0,10);return r.length>10?`${e}...`:r};n();a();n();a();n();a();n();a();async function xe(r,e){return await pe.get("/priapi/v6/dx/trade/multi/saving/summary",{params:r,...e})}n();a();n();a();Y();n();a();var we="Aborted";n();a();var O=class{constructor(){this.pendingPromises=new Map}schedule(e,t){let o=this.pendingPromises.get(e);if(o)return o;let s=t();return this.pendingPromises.set(e,s),s.finally(()=>{this.onRequestComplete(e)})}onRequestComplete(e){this.pendingPromises.delete(e)}dispose(){this.pendingPromises.clear()}};var F=class{constructor(e){this.UNIQ_DATA_KEY="use_this_key_when_multiple_copies_of_data_dont_coexist";this.data=new Map;this.error=new Map;this.loading=new Map;this.strategy=new O;e?.strategy&&(this.strategy=e.strategy)}getRequestKey(e){return e??this.UNIQ_DATA_KEY}setError(e,t){z(t)||this.error.set(e,t)}setLoading(e,t){this.loading.set(e,t)}setData(e,t){ce(t)?this.data.delete(e):this.data.set(e,t)}onPreRequest(...[e,t]){}formatConfig(...[e,t]){return e}formatResponse(e){return e}onError(e){throw e}onSuccess(e,...[t,o]){}scheduleRequest(e,t,o){return this.strategy.schedule(e,()=>this.doRequest(t,o),o)}async startRequest(e,t){let o=this.getRequestKey(t?.key);try{this.setLoading(o,!0),this.onPreRequest(e,t);let s=this.formatConfig(e,t),c=me(),i=await this.scheduleRequest(o,s,c),h=this.formatResponse(i);return this.setData(o,h),this.onSuccess(h,e,t),h}catch(s){if(s?.message===we||z(s))throw s;return this.setError(o,s),this.onError(s)}finally{this.setLoading(o,!1)}}dispose(){this.strategy.dispose?.(),this.data.clear(),this.error.clear(),this.loading.clear()}};var b=class extends F{fetch(e,t){return this.startRequest(e,t)}getData(e){return this.data.get(this.getRequestKey(e))}getError(e){return this.error.get(this.getRequestKey(e))}getLoading(e){return this.loading.get(this.getRequestKey(e))??!1}};b.mobxAnnotations={data:m,error:m,loading:m,setError:p,setLoading:p,setData:p};var be="mySurplusHistory",T=class extends b{constructor(){super();this.storeId=be;this.storeName=be;M(this,b.mobxAnnotations)}doRequest(t){return xe(t.params,t)}};var Te="mySurplusHistoryService",R=class extends A{constructor(t){super(t);this.orderSurplusModalVisible=!1;this.mySurplusHistoryModalVisible=!1;this.mySurplusShareModalVisible=!1;this.orderSurplusShareModalVisible=!1;this.surplusOrderSnapshot=null;this.surplusFaqModalVisible=!1;M(this,{surplusHistoryData:G,surplusHistoryLoading:G,orderSurplusModalVisible:m,mySurplusHistoryModalVisible:m,mySurplusShareModalVisible:m,orderSurplusShareModalVisible:m,surplusOrderSnapshot:m,surplusFaqModalVisible:m,setOrderSurplusModalVisible:p,setMySurplusHistoryModalVisible:p,setMySurplusShareModalVisible:p,setOrderSurplusShareModalVisible:p,setSurplusOrderSnapshot:p,setSurplusFaqModalVisible:p})}get surplusHistoryData(){let t=this.getStore(ee).computedAccountId;return this.getStore(T).getData(t)?.data}get surplusHistoryLoading(){let t=this.getStore(ee).computedAccountId,o=this.getStore(T);return o.getData(t)?!1:o.getLoading(t)}async fetchSurplusHistory(t){if(!t)return;this.getStore(T).fetch({params:{accountId:t}},{key:t})}setOrderSurplusModalVisible(t){this.orderSurplusModalVisible=t}setMySurplusHistoryModalVisible(t){this.mySurplusHistoryModalVisible=t}setMySurplusShareModalVisible(t){this.mySurplusShareModalVisible=t}setOrderSurplusShareModalVisible(t){this.orderSurplusShareModalVisible=t}setSurplusOrderSnapshot(t){this.surplusOrderSnapshot=t}setSurplusFaqModalVisible(t){this.surplusFaqModalVisible=t}};R.serviceId=Te,R.serviceName=Te;var Fr=()=>oe(R);n();a();var se=P(D());var We=({tokenSymbol:r="",tokenName:e="",className:t="",disableTooltip:o=!1})=>{let s=Ce(r),c=e||r;return se.default.createElement(k,{title:c,textOverflow:{text:c},disabled:o},se.default.createElement("span",{className:t},s))},Gr=We;n();a();var H=(r,e)=>`${B.thousandFormat(r.toFixed(2),{style:"percent",...e})}`;function Ve(r,e){return`${B.BigNumber(r).gt(0)?"+":""}${H(r,e)}`}var ne=99999,Oe=({bigValue:r,needShowMaxText:e,options:t,formatFunction:o})=>r.gt(.01)&&r.lte(ne)||!e?o(r,t):r.gt(ne)&&e?`>${H(ne,{...t,needZero:!1})}`:j;function Jr(r=0,{needSign:e=!0,smallThanMinNumber:t=!1,needShowMaxText:o=!0,...s}={}){let c=e?Ve:H,i=B.BigNumber(r);return i.isNaN()?j:t&&i.lt(.01)&&i.gt(0)?`<${c(.01,s)}`:i.lt(-99.99)?`<${H(-99.99,s)}`:i.gte(-99.99)&&i.lt(-.01)?c(i,s):i.gte(-.01)&&i.lt(0)?c(-.01,s):i.eq(0)?B.thousandFormat("0.00",{style:"percent",...s}):i.gt(0)&&i.lte(.01)?c(.01,s):Oe({bigValue:i,needShowMaxText:o,options:s,formatFunction:c})}export{ht as a,ee as b,At as c,Ne as d,qe as e,oe as f,A as g,Ce as h,Ye as i,Ge as j,we as k,b as l,Fr as m,Le as n,Jr as o,Gr as p};
//# sourceMappingURL=chunk-GTBNRR37.js.map
