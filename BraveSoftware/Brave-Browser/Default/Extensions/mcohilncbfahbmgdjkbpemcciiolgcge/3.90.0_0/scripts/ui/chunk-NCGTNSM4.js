import{c}from"./chunk-RZETZIQO.js";import{Oa as xe,la as ke}from"./chunk-P5GHREX3.js";import{f as Ie}from"./chunk-CTJAEFLV.js";import{a as M,j as ge,l as Te,p as ee,z as Ce}from"./chunk-AP4E6GDF.js";import{Ke as I,Tc as H,Ya as ce,Za as ue,ha as d,m as b,qc as le,rc as de,sc as pe,tc as fe,uc as _e,vc as Se,z as Z}from"./chunk-RPH2MNBW.js";import{a as Le}from"./chunk-DOSBJ3L3.js";import{A as J}from"./chunk-URGJ6D4O.js";import{a as Oe}from"./chunk-FB3ILH2L.js";import{b as k}from"./chunk-FLSAETOH.js";import{Aa as me,l as ie,pa as j}from"./chunk-4C5HF6J2.js";import{f as g,o as r,q as s}from"./chunk-UWURTNRY.js";r();s();var we=g(k());var Ve=()=>{let{useCheckTxBeforePublishFn:e}=d.hooks,o=d.global.currentWallet,t=d.global.dexSignAndSubmitTransaction,n=e();(0,we.useEffect)(()=>{d.updateGlobal({signAndSubmitTransaction:async(a,i,m)=>await t({networkId:a,tx:i,hardwareExtParams:m,checkTxBeforePublish:n,currentWallet:o})})},[])};r();s();var y=g(k()),he=g(Le());var ro=()=>{let e=(0,he.useLocation)(),{search:o}=e,{needUpdate:t,type:n}=Ie(o);return(0,y.useMemo)(()=>({needUpdate:t===ce.on,type:n}),[t,n])},Y=()=>{let{quoteStore:e}=c(),o=e?.quote?.bestRoute||{},{fromToken:t,toToken:n,fromTokenAmount:a,receiveAmount:i}=o;return(0,y.useMemo)(()=>({fromToken:{...t,amount:a},toToken:{...n,amount:i}}),[t,a,n,i])},We=()=>{let{fromToken:e,toToken:o}=Y();return(0,y.useMemo)(()=>e.chainId!==o.chainId?[e,o]:[e],[e,o])},so=e=>{let{quoteStore:o,fromToStore:t,walletContractStore:n,accountStore:{walletConfig:a,address:i},slippageStore:m}=c(),u=e===ue.INTENT_SWAP,{fromToken:p,toToken:l}=Y(),S=We(),T=a?.walletId,{data:C}=n?.transactionPayload||{},{quote:x,computedIsUsingCentralizedBridge:E,enableQuoteAggregates:w}=o,h=x?.bestRoute?.bridge,G=o?.computedIsOfflineType,{name:P,logo:v,estimatedTime:N}=o?.quote?.bestRoute||{},{computedRate:L,computedToFromRate:O,computedIsBridge:F,computedIsEvmChain:W,computedIsFromBtcCoin:B,computedIsCrossChain:R}=t,{computedMinimumReceived:q}=m;return(0,y.useMemo)(()=>{let V={walletId:T,address:i,networks:S,data:C,fromToken:p,toToken:l};return{estimatedTime:(parseInt(N||0,10)/60).toFixed(0)??"--",isIntentBridge:G,computedIsCrossChain:R,rate:L,toFromRate:O,minimumReceived:q,isFromBtcCoin:B,hideExchangeBtn:F||E,isEvmChain:W,isIntentSwap:u,bridge:h,enableQuoteAggregates:w,name:P,logo:v,...V}},[T,i,S,C,L,O,q,B,F,W,E,h,p,l,u,w,P,v,N,G,R])};function Be(){return{[H.SWAP]:{image:{light:le(),dark:de()},title:{text:I("swaptrade_top_segmentedctl_swap")}},[H.BRIDGE]:{image:{light:pe(),dark:fe()},title:{text:I("swaptrade_top_segmentedctl_bridge")}},[H.CLAIM]:{image:{light:_e(),dark:Se()},title:{text:I("commonall_modal_btn_claim")}}}}var ao=(e="")=>{let{commonStore:o}=c(),{currentTab:t}=o,n=e||t;return(0,y.useMemo)(()=>Be()[n],[n])};r();s();var ne=g(k());var oe=(e,o,t)=>`${e}${Z.mul(o||0,Z.pow(10,t||0))}`,te=e=>{let{useCoin:o}=d.hooks;return o(e?.chainId,e.isNativeToken?"":e.tokenContractAddress)},Re=()=>{let{fromToStore:e,gasDropStore:o}=c(),{to:t}=e,n=te({chainId:t.chainId}),{computedGasDropSelected:a,gasDropConfig:i}=o||{},{gasDrop:m}=i||{};return(0,ne.useMemo)(()=>a?{coinId:n?.coinId,assetChange:oe("+",m,n?.decimals),useMinPrecision:!1,displayEstimate:!1,desc:I("swaptrade_transfer_text_for_gas")}:null,[a,m,n])};function qe(){let{fromToken:e,toToken:o}=Y(),t=Re(),n=te(e),a=te(o);return(0,ne.useMemo)(()=>({fromList:[{coinId:n?.coinId,assetChange:oe("-",e?.amount,n?.decimals),useMinPrecision:!1}],toList:[{coinId:a?.coinId,assetChange:oe("+",o?.amount,a?.decimals),useMinPrecision:!1},t].filter(Boolean)}),[n?.coinId,n?.decimals,e?.amount,a?.coinId,a?.decimals,o?.amount,t])}r();s();var ko={container:"_container_wvaui_1",loading:"_loading_wvaui_5",wrap:"_wrap_wvaui_10",scroll:"_scroll_wvaui_13"};r();s();var Fe=g(k());var Ue=e=>{let{walletContractStore:o}=c(),t=xe(e);return(0,Fe.useEffect)(()=>{Ce(e)&&o.setNativeCoin(t)},[t,e]),{coin:t}},vo=Ue;r();s();var Q=g(k());r();s();var re=g(k());r();s();var $=g(k());me();var X=({estimatedGasFeeInt:e,maxGasFeeInt:o,decimals:t,isClaim:n=!1})=>{let{quoteStore:a}=c(),i=ie(a,"quote.bestRoute.bridge.estimateBridgeFeeAmount");return(0,$.useMemo)(()=>{let m=ee(o,t),u=ee(e,t);return i&&!n&&(u=M.add(u,i,{returnString:!0}),m=M.add(m,i,{returnString:!0})),{maxGasFee:m,estimatedGasFee:u}},[o,t,e,i,n])},z=e=>{let{walletContractStore:o}=c();(0,$.useEffect)(()=>{o.setGasFee(e)},[e])};var He=(e,o,t=!1)=>{let{useFeeDisplay:n}=d.hooks,{walletContractStore:a}=c(),{coinAmount:i,coinSymbol:m,estimatedGasFeeInt:u,maxGasFeeInt:p,decimals:l,loading:S}=n(e,{calldata:o}),{maxGasFee:T,estimatedGasFee:C}=X({maxGasFeeInt:p,estimatedGasFeeInt:u,decimals:l,isClaim:t});return z(T),(0,re.useEffect)(()=>{a.setMaxGasFeeInt(p)},[p,a]),(0,re.useEffect)(()=>{a.setGasFeeLoading(S)},[S,a]),{maxGasFee:T,estimatedGasFee:C,coinAmount:i,coinSymbol:m,feeLoading:S}},Ee=He;r();s();var D=g(k()),Ge=g(Oe());r();s();var Ae={"network-fee-title":"_network-fee-title_16onq_1",networkFeeTitle:"_network-fee-title_16onq_1","tooltip-icon":"_tooltip-icon_16onq_4",tooltipIcon:"_tooltip-icon_16onq_4","gas-type":"_gas-type_16onq_8",gasType:"_gas-type_16onq_8"};var Ye=({chainName:e,coinSymbol:o,isClaim:t=!1})=>{let{quoteStore:n,commonStore:a,fromToStore:i}=c(),{currencyConversion:m,computedNowCurrencySymbol:u}=a,{computedIsCrossChain:p}=i,{estimateBridgeFeeAmount:l,estimateBridgeFeeAmountUsd:S}=n?.quote?.bestRoute?.bridge||{},T=(0,D.useMemo)(()=>p?I("swaptrade_intro_dialog_desc_cross_fee_notice",{value:I("swaptrade_modal_desc_crosschain_valuediff_variavle",{price:l?ge(m(S).toString(),u):"--",fee:l?`${Te(l)} ${o}`:"--"})}):I("swaptrade_extension_tooltip_mining_fee"),[o,p,u,m,l,S]),C=(0,D.useMemo)(()=>D.default.createElement("span",{className:(0,Ge.default)("font-12 content-contrast",{[Ae.networkFeeTitle]:!t})},I("swaptrade_history_card_text_destination_chain_fee",{chainName:e})),[e]);return t?C:D.default.createElement(J,{rebirthPopper:!0,popupProps:{className:"text-center"},maxWidth:200,placement:J.DIRECTION.topRight,title:T},C)},K=b(Ye);var $e=({chainId:e,transactionPayload:o,isClaim:t=!1})=>{let{NetworkFeeEnter:n,SectionWrap:a}=d.components,{estimatedGasFee:i,feeLoading:m,coinSymbol:u}=Ee(e,o,t),{walletContractStore:p}=c(),{nativeCoin:l}=p;return Q.default.createElement(a,null,Q.default.createElement(n,{title:Q.default.createElement(K,{chainName:l?.chainName,coinSymbol:u,isClaim:t}),coinId:l?.coinId,loading:m,networkFee:i,useMinPrecision:!1}))},dt=b($e);r();s();var f=g(k());me();r();s();var ae=g(k());r();s();r();s();var A={SLOW:"SLOW",MODERATE:"MODERATE",FAST:"FAST",CUSTOM:"CUSTOM"},se={[A.SLOW]:"slow",[A.MODERATE]:"standard",[A.FAST]:"fast",[A.CUSTOM]:"custom"};var Xe=(e,o=!0)=>{if(o)return{initialGasType:se[A.MODERATE]};let{maxPriorityFeePerGas:t,gas:n}=e||{};return{initialGasType:se[A.CUSTOM],initialCustomMaxPriorityFee:t,initialCustomGasLimit:n,initialCustomMaxBaseFee:t}},ve=Xe;var ze=(e,o,t,n=!1)=>{let{useFeeDisplay:a}=d.hooks,{walletContractStore:i,fromToStore:m}=c(),u=ve(t,m.computedIsCrossChain),p=a(o,{gasInfo:e,calldata:t}),{coinAmount:l,coinSymbol:S,estimatedGasFeeInt:T,maxGasFeeInt:C,decimals:x,loading:E,error:w}=p,{maxGasFee:h,estimatedGasFee:G}=X({maxGasFeeInt:C,estimatedGasFeeInt:T,decimals:x,isClaim:n});return z(h),(0,ae.useEffect)(()=>{i.setGasFeeLoading(E)},[E,i]),(0,ae.useEffect)(()=>{i.setGasLimitError(w)},[w,i]),{txInitGasInfo:u,coinAmount:l,coinSymbol:S,maxGasFee:h,estimatedGasFee:G,gasType:e.gasType,feeLoading:p.loading,error:w}},Ne=ze;r();s();var be=e=>M.div(e,10**18).toString();var Ke=({chainId:e,transactionPayload:o,isClaim:t=!1,needGasChange:n=!1})=>{let{EthereumNetworkFee:a,NetworkFeeEnter:i,SectionWrap:m}=d.components,{useGasReturnActivity:u}=d.hooks,[p,l]=(0,f.useState)(!1),{walletContractStore:S,accountStore:T,mevStore:C}=c(),{gasInfo:x,setGasInfo:E,nativeCoin:w,setActivityId:h}=S,{computedIsMevOpen:G,mevInfo:P}=C,{to:v,from:N,data:L,value:O}=o||{},{coinId:F,chainName:W}=w||{},{txInitGasInfo:B,coinSymbol:R,gasType:q,estimatedGasFee:V,maxGasFee:ye,feeLoading:De,error:Me}=Ne(x,e,o,t),U=u({coinId:F,fromAddress:j(N),toAddress:j(v),unavailable:x.gasType==="custom",disabled:!v||!N||!F,gasInfo:x,txType:2,fee:be(x.networkFee||0)}),Pe=()=>{l(!1)};return(0,f.useEffect)(()=>{h(U?.activityId)},[U,h]),f.default.createElement(f.default.Fragment,null,f.default.createElement(m,null,f.default.createElement(i,{level:q,title:f.default.createElement(K,{chainName:W,coinSymbol:R,isClaim:t}),coinId:F,loading:De,networkFee:V,maxNetworkFee:ye,gasReturn:U,estimateFailed:Me,onClick:n?()=>{ke({wallet_address:T.address,button_name:"network_fee"}),l(!0)}:void 0,useMinPrecision:!1})),F&&f.default.createElement(f.Suspense,{fallback:f.default.createElement("div",null)},f.default.createElement(a,{visible:p,coinId:F,address:N,inputData:L,tokenAddress:v,value:O,onBack:Pe,onClose:d.goHome,onGasChange:E,initialGasData:B,gasReturn:U,isMev:G,mevInfo:P})))},Ut=b(Ke);export{Ve as a,ro as b,Y as c,so as d,ao as e,vo as f,K as g,X as h,z as i,dt as j,Ut as k,oe as l,te as m,qe as n,ko as o};
//# sourceMappingURL=chunk-NCGTNSM4.js.map
