import{a as Pe}from"./chunk-TM6U6DRJ.js";import{a as Ue}from"./chunk-NP6SC5QM.js";import{a as Ae}from"./chunk-B5L26Z2J.js";import{d as De}from"./chunk-AVG63QW4.js";import{b as ue,c as H,d as B,e as _e,f as he,g as ge,h as ye,i as ke,j as we,k as be,l as A,m as W,n as q,o as ve,p as Z,q as Y,r as xe,s as Ie,t as Ne,u as Ce}from"./chunk-QNPUBQYD.js";import{F as Se}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as J}from"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import{a as me,b as F,d as D}from"./chunk-7U7FORYL.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import{b as Re}from"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-ARDRUD4P.js";import"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{e as ae,r as pe}from"./chunk-KC2XLVFC.js";import{qa as x,ra as v}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{$ as de,Ja as fe,a as ce}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import{b as z}from"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{g as le}from"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import"./chunk-3FMJDUGT.js";import{c as oe}from"./chunk-2O5TMJZM.js";import{K as ne,M as ie}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{wb as se}from"./chunk-EQ34WRCJ.js";import{p as r}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as Te}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{A as X,d as K,q as k}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as E,t as Ee,w as T}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as Ke}from"./chunk-FB3ILH2L.js";import{b as L}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{c as Ve,f as N,o as g,p as I,q as y}from"./chunk-UWURTNRY.js";var Q=Ve((at,$e)=>{g();y();(function(o){"use strict";o.exports.is_uri=c,o.exports.is_http_uri=t,o.exports.is_https_uri=n,o.exports.is_web_uri=h,o.exports.isUri=c,o.exports.isHttpUri=t,o.exports.isHttpsUri=n,o.exports.isWebUri=h;var p=function(a){var e=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return e};function c(a){if(!!a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var e=[],i="",u="",l="",m="",d="",f="";if(e=p(a),i=e[1],u=e[2],l=e[3],m=e[4],d=e[5],!!(i&&i.length&&l.length>=0)){if(u&&u.length){if(!(l.length===0||/^\//.test(l)))return}else if(/^\/\//.test(l))return;if(!!/^[a-z][a-z0-9\+\-\.]*$/.test(i.toLowerCase()))return f+=i+":",u&&u.length&&(f+="//"+u),f+=l,m&&m.length&&(f+="?"+m),d&&d.length&&(f+="#"+d),f}}}function t(a,e){if(!!c(a)){var i=[],u="",l="",m="",d="",f="",w="",s="";if(i=p(a),u=i[1],l=i[2],m=i[3],f=i[4],w=i[5],!!u){if(e){if(u.toLowerCase()!="https")return}else if(u.toLowerCase()!="http")return;if(!!l)return/:(\d+)$/.test(l)&&(d=l.match(/:(\d+)$/)[0],l=l.replace(/:\d+$/,"")),s+=u+":",s+="//"+l,d&&(s+=d),s+=m,f&&f.length&&(s+="?"+f),w&&w.length&&(s+="#"+w),s}}}function n(a){return t(a,!0)}function h(a){return t(a)||n(a)}})($e)});g();y();var _=N(L());var Oe=N(Te());var Ge=N(Ke());g();y();var j=N(L());var Le=j.default.memo(o=>{let{disabled:p}=o,c=x(),t=({target:{value:i}})=>{c(ke(i))},{name:n,nameErr:h}=v(ue),a=()=>{c(we(r(n?"":"developer_mode_network_errortip_cannotspace")))},e=r("extension_wallet_addnetwork_placeholder_network");return j.default.createElement("div",{className:"net-form__wrap-input"},j.default.createElement(k,{value:n,onBlur:a,disabled:p,size:k.SIZE.xl,errorType:k.TIP_TYPE.always,error:h,onChange:t,placeholder:e,label:r("wallet_transaction_history_subtitle_network_name")}))});g();y();var $=N(L());var Me=N(Q());g();y();g();y();async function Be(o,p,c=[]){let t=o,n={"Content-Type":"application/json"},{origin:h,pathname:a,username:e,password:i,search:u}=new URL(o);if(e&&i){let w=I.Buffer.from(`${e}:${i}`).toString("base64");n.Authorization=`Basic ${w}`,t=`${h}${a}${u}`}let l=await ie(t,{id:Date.now().toString(),jsonrpc:"2.0",method:p,params:c},{timeout:3e4,cache:"default",headers:n}),m=l?.data;try{m||(m=await l.clone().json())}catch{}if(!m||Array.isArray(m)||typeof m!="object")throw new Error(`RPC endpoint ${o} returned non-object response.`);let{error:d,result:f}=m;if(d)throw new Error(d?.message||d);return f}var O=o=>{try{let p=new URL(o);return p.protocol==="http:"||p.protocol==="https:"}catch{return!1}},G=((o={})=>p=>new Promise((c,t)=>o[p]?c(o[p]):Be(p,"eth_chainId").then(n=>{o[p]=n,c(n)}).catch(n=>{t(n)})))();var ze=$.default.memo(o=>{let{disabled:p,modify:c}=o,t=x(),[n,h]=(0,$.useState)(!1),a=({target:{value:f}})=>{t(be(f.trim()))},{rpcUrl:e,rpcUrlErr:i}=v(H),{rpcNetworks:u}=D(),{chainId:l}=v(B),m=()=>{if(!e){t(A(r("developer_mode_network_errortip_cannotspace")));return}if(!O(e)){t(A(r("developer_mode_infor_errortip_https")));return}if(!Me.default.isWebUri(e)){t(A(r("developer_mode_infor_errortip_rpcurl")));return}let w=u.find(s=>s.rpcUrl===e);if(w&&!c){t(A(r("developer_mode_infor_errortip_used_network",{network:w.name})));return}h(!0),G(e).then(s=>{try{if(s=parseInt(s,16).toString(10),Number.isNaN(+s)){h(!1),t(A(""));return}c?s!==l&&t(q({err:r("developer_mode_infor_errortip_chainid",{chainID:s}),validChainId:l})):t(W(s))}catch{}h(!1),t(A(""))}).catch(()=>{t(A(r("developer_mode_infor_errortip_rpcurl"))),h(!1)})},d=r("extension_wallet_addnetwork_placeholder_prcurl");return $.default.createElement("div",{className:"net-form__wrap-input"},$.default.createElement(k,{value:e,onBlur:m,disabled:p,size:k.SIZE.xl,errorType:k.TIP_TYPE.always,error:i,onChange:a,placeholder:d,label:r("developer_mode_network_title_rpcurl"),suffix:n&&$.default.createElement(T.Circle,{size:T.SIZE.sm})}))});g();y();var U=N(L());var Xe=async o=>{let{data:p}=await ne(oe.getRpcNetworkByChainId,{chainIds:[o]});return p?.[0]?.nativeCurrency?.symbol},Fe=U.default.memo(o=>{let{disabled:p,modify:c}=o,t=x(),n=({target:{value:s}})=>{t(Z(s.trim()))},{symbol:h,symbolErr:a,symbolTip:e}=v(_e),[i,u]=(0,U.useState)(!1),{chainId:l}=v(B),[m,d]=(0,U.useState)(!0),f=()=>{let s="";if(!l){t(Y(s));return}h||(s=r("developer_mode_network_errortip_cannotspace"),t(Y(s))),t(Y(s))};pe(()=>{(async()=>{if(!l||c)return;let s;u(!0);try{t(Z("")),s=await Xe(l),t(Z(s))}catch{}finally{d(!!s),u(!1)}})()},[l],{wait:500});let w=r("extension_wallet_addnetwork_placeholder_symbol");return U.default.createElement("div",{className:"net-form__wrap-input"},U.default.createElement(k,{value:h,disabled:p||c||m,onBlur:f,size:k.SIZE.xl,errorType:k.TIP_TYPE.always,error:a,tips:e,onChange:n,suffix:i&&U.default.createElement(T.Circle,{size:T.SIZE.sm}),placeholder:w,label:r("developer_mode_network_title_tokenname")}))});g();y();var C=N(L());g();y();function He(o){return Number.isSafeInteger(o)&&o>0&&o<=se}var We=C.default.memo(o=>{let{disabled:p,modify:c}=o,t=x(),n=({target:{value:b}})=>{t(W(b.trim()))},[h,a]=(0,C.useState)(!1),{chainId:e,chainIdErr:i,chainIdTip:u,fieldUpdated:l}=v(B),{rpcUrl:m}=v(H),{rpcNetworks:d}=D(),f=(b,S,R=e)=>{t(q({err:b,validChainId:R})),t(ve({tip:S,validChainId:R}))},w=()=>{let b="",S="";if(!e)return b=r("developer_mode_network_errortip_cannotspace"),f(b,S);let R=e,ee=10;if(!R.startsWith("0x"))try{R=`0x${z(R)}`}catch{b=r("developer_mode_infor_errortip_errorchainid")}let[te]=d.filter(P=>P.chainId===R&&P.rpcUrl!==m);if(te?S=r("developer_mode_infor_errortip_network",{network:te.name}):e.startsWith("0x")?(ee=16,/^0x[0-9a-f]+$/iu.test(e)||(b=r("developer_mode_infor_errortip_errornum"))):/^[0-9]+$/u.test(e)?e.startsWith("0")?b=r("developer_mode_infor_errortip_errornum"):He(parseInt(e,ee))||(b=r("developer_mode_infor_errortip_errorchainid")):b=r("developer_mode_infor_errortip_errornum"),!m||h||b)return f(b,S);a(!0),G(m).then(P=>{let re=P;if(R!==P){if(!e.startsWith("0x"))try{re=parseInt(P,16).toString(10)}catch{}b=r("developer_mode_infor_errortip_chainid",{chainID:re})}f(b,S,e),a(!1)}).catch(()=>{S=r("developer_mode_infor_errortip_rpcurl_confirm"),a(!1),f(b,S,e)})},s=r("extension_wallet_addnetwork_placeholder_chainid");return C.default.createElement("div",{className:"net-form__wrap-input"},C.default.createElement(k,{value:e,disabled:p||!!c,size:k.SIZE.xl,errorType:k.TIP_TYPE.always,error:i,onBlur:w,tips:u,onChange:n,suffix:h&&l&&C.default.createElement(T.Circle,{size:T.SIZE.sm}),placeholder:s,label:C.default.createElement(C.default.Fragment,null,r("developer_mode_network_title_chainid"),C.default.createElement(X,{title:r("developer_mode_network_tooltip_display_decimal"),placement:X.DIRECTION.topRight},C.default.createElement(Ee,{className:"okx-wallet-plugin-information-circle"})))}))});g();y();var M=N(L());var qe=N(Te());g();y();var Je=o=>{let{modify:p,uniqueId:c,onDeleteNet:t}=o,n=(0,qe.useHistory)(),h=v(ye),a=Se(),{rpcNetworks:e,updateRpcNetwork:i,addRpcNetwork:u}=D(),l=x(),m=v(ge),d=e.find(s=>F(s,{uniqueId:c}))||{},f=(0,M.useRef)(!1),w=async()=>{if(!f.current){if(f.current=!0,p){await i({...d,...m});let s={...m,chainId:`0x${z(m.chainId)}`};a(s),n.replace(`${de}?tab=2`)}else{let s=await u(m);await l(Ue({isRpcMode:!0,currentNetworkUniqueId:s?.uniqueId})),n.replace(fe)}f.current=!1}};return M.default.createElement(Re.FooterActions,{usePortal:!0},p&&M.default.createElement(E,{category:E.CATEGORY.outline,type:E.TYPE.primary,size:E.SIZE.lg,onClick:t,className:"net-form__footer-delete-btn",contentClassName:"net-form__footer-delete-btn__text"},r("commonall_resultpage_btn_delete")),M.default.createElement(E,{disabled:h,category:E.CATEGORY.fill,type:E.TYPE.highlight,size:E.SIZE.lg,onClick:w},r("developer_mode_bot_btn_save")))},Ze=Je;g();y();var V=N(L());var Ye=N(Q());var je=V.default.memo(o=>{let{disabled:p}=o,c=x(),t=({target:{value:i}})=>{c(xe(i.trim()))},{explorerUrl:n,explorerUrlErr:h}=v(he),a=()=>{let i="";n&&(Ye.default.isWebUri(n)||(O(n)?i=r("developer_mode_infor_errortip_invalidurl"):i=r("developer_mode_infor_errortip_https1"))),c(Ie(i))},e=r("extension_wallet_addnetwork_placeholder_blockchain");return V.default.createElement("div",{className:"net-form__wrap-input"},V.default.createElement(k,{value:n,onBlur:a,disabled:p,size:k.SIZE.xl,errorType:k.TIP_TYPE.always,error:h,onChange:t,placeholder:e,label:r("developer_mode_network_title_blockchain_explorer")}))});var jr=()=>{let o=x(),p=(0,Oe.useHistory)(),c=Ae(),t=c.get("modify"),n=t===me.CANT,h=decodeURIComponent(c.get("id")),{rpcNetworks:a}=D(),e=(0,_.useMemo)(()=>a.find(d=>F(d,{uniqueId:h}))||{},[a]);(0,_.useEffect)(()=>{let d={...e};d.chainId&&(d.chainId=`${Number.parseInt(d.chainId,16)}`),o(Ne(d))},[e]),ae(()=>{o(Ce())});let i=(0,_.useCallback)(()=>{p.action==="POP"?p.replace(ce):p.goBack()},[p]),u=Pe(),l=(0,_.useCallback)(()=>{u({editRpcInfo:e,onDeleted:i})},[u,i,e]),m=(0,_.useMemo)(()=>_.default.createElement("div",{className:"net-form__title"},e.name?_.default.createElement(_.default.Fragment,null,_.default.createElement(J,{size:J.SIZE.md,src:e.icon,text:e.name,className:"net-form__title-icon",defaultIcon:le}),_.default.createElement("div",{className:"net-form__title-text net-form__title-text-top"},e.name)):_.default.createElement("div",{className:"net-form__title-text"},r("wallet_extension_settings_header_custom_network"))),[e]);return _.default.createElement("div",{className:(0,Ge.default)("net-form",{disabled:n})},_.default.createElement(De,{onBack:i,closeable:!1}),n||t?null:_.default.createElement(K,{className:"net-form__warn",desc:r("developer_mode_network_errortip_trust_network"),type:K.TYPE.warn,closable:!1}),m,_.default.createElement("div",{className:"net-form__wrap"},_.default.createElement(Le,{disabled:n}),_.default.createElement(ze,{disabled:n,modify:t}),_.default.createElement(We,{disabled:n,modify:t}),_.default.createElement(Fe,{disabled:n,modify:t}),_.default.createElement(je,{disabled:n}),!n&&_.default.createElement(Ze,{modify:t,uniqueId:h,onDeleteNet:l})))};export{jr as default};
//# sourceMappingURL=Form-5AZO6XET.js.map
