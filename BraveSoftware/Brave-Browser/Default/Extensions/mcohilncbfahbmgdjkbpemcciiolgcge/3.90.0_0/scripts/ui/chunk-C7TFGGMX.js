import{b as I}from"./chunk-2XOPB27K.js";import{a as m}from"./chunk-JMNZU6WB.js";import{b as N}from"./chunk-XBUPORYF.js";import{a as y}from"./chunk-KC2XLVFC.js";import{fa as h,na as E,ra as g}from"./chunk-MJDO2VHF.js";import{a as A}from"./chunk-6M37VPK2.js";import{g as D,h as _,i as C}from"./chunk-EPDR6VAQ.js";import{b as P}from"./chunk-FLSAETOH.js";import{Aa as w,na as R,pa as p}from"./chunk-4C5HF6J2.js";import{f as S,o as T,q as l}from"./chunk-UWURTNRY.js";T();l();var c={UNAPPROVED:"unapproved",APPROVED:"approved",REJECTED:"rejected",SIGNED:"signed",SUBMITTED:"submitted",FAILED:"failed",DROPPED:"dropped",SUCCEED:"succeed",PENDING:"pending"},a={TRANS_OUT:1,AUTHORIZATION:2,CONTRACT_CALL:3,CANCEL_AUTHORIZATION:4,CONTRACT_DEPLOY:5},$={[a.TRANS_OUT]:"wallet_extension_history_list_send",[a.CONTRACT_CALL]:"wallet_extension_history_list_contract_interaction",[a.AUTHORIZATION]:"wallet_extension_history_list_approval",[a.CANCEL_AUTHORIZATION]:"wallet_extension_history_list_revoke_approval",[a.CONTRACT_DEPLOY]:"developer_mode_history_title_contract_eployment"};T();l();var u=S(P());w();function M(){return g(h,E)}function x(e,n){let o=M(),s=N(),r=m(),t=n||r;return(0,u.useMemo)(()=>Object.values(o).filter(i=>{if(!i.txParams)return!1;let{from:d,chainId:f}=i.txParams;return s===d&&f===t.chainId&&e(i)}),[o,s,t.chainId])}function X(e){return x(n=>n.status===c.FAILED||n.status===c.SUCCEED,e)}function O(e){let[n,o]=e,s=+n,r=+o;return t=>C(t,s)&&D(t,r)}function U(e={},n=null){let{dates:o}=e,s=x(r=>r.status===c.FAILED||r.status===c.SUCCEED||r.status===c.DROPPED,n);return(0,u.useMemo)(()=>{let r=s;if(o){let t=O(o);r=r.filter(({finishTime:i})=>t(i))}return r.sort((t,i)=>i.finishTime-t.finishTime).map(t=>({...t,isShowPending:!1}))},[s,o])}function v(e={},n=null){let o=x(r=>r.status===c.PENDING,n),{dates:s}=e;return(0,u.useMemo)(()=>{let r=R(o,[t=>I(t.txParams.nonce)]).map((t,i)=>({...t,isShowPending:i===0}));if(s){let t=O(s);r=r.filter(({sendTime:i})=>t(i))}return r},[o,s])}function k(){let e=v(),n=U();return(0,u.useMemo)(()=>[...e,...n],[e,n])}function ee(e){let n=k();return(0,u.useMemo)(()=>e?n.find(({id:o})=>e===o):null,[e,n])}function te({tokenAddress:e}){let n=v(),o=U();return(0,u.useMemo)(()=>[...n,...o].filter(({type:s,txParams:r,extraParams:t})=>{if(s===a.TRANS_OUT)return!e&&!t?.tokenAddress||p(e)===p(t?.tokenAddress);if(s===a.AUTHORIZATION||s===a.CANCEL_AUTHORIZATION)return p(e)===p(t?.tokenAddress);if(s===a.CONTRACT_CALL){let{value:i}=r||{};return!e&&_(A(i),0)}return!1}),[n,o,e])}var b=(e,n,o)=>{let{protocol:s,host:r,pathname:t,search:i,hash:d}=new URL(e),f=t.endsWith("/")?`${t}${n}/${o}`:`${t}/${n}/${o}`;return new URL(`${s}//${r}${f}${i}${d}`).toString()};function ne(){let e=m();return y(n=>e?.explorerUrl?b(e?.explorerUrl,"tx",n):null)}export{c as a,a as b,$ as c,X as d,U as e,v as f,k as g,ee as h,te as i,b as j,ne as k};
//# sourceMappingURL=chunk-C7TFGGMX.js.map
