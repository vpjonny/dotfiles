import{a as Tn}from"./chunk-Q66GA6I6.js";import{a as An}from"./chunk-ARYCEY4U.js";import{a as xn}from"./chunk-7SVXGEVR.js";import"./chunk-CVLOEZ64.js";import"./chunk-ZBCYRIHC.js";import{a as X}from"./chunk-XI5NMQGM.js";import"./chunk-FLQKBEJO.js";import"./chunk-5TBKSXR4.js";import"./chunk-ITLSSVGE.js";import"./chunk-PWVBSLOL.js";import"./chunk-452JEOHF.js";import"./chunk-3MLYZLAT.js";import{a as J}from"./chunk-IY6TM6RL.js";import{a as V,b as Y}from"./chunk-VUWWQCMX.js";import{a as q}from"./chunk-5EFGCLI4.js";import"./chunk-B4MQLH4C.js";import{j as Sn,k as H}from"./chunk-EUAAIPZO.js";import"./chunk-GCJ2PJNQ.js";import"./chunk-A4R53AVX.js";import"./chunk-TJ3NTWVS.js";import"./chunk-634WRNGH.js";import"./chunk-RN5VSY2K.js";import"./chunk-YPWPNJRG.js";import"./chunk-GMVPA3MX.js";import"./chunk-P355XBV4.js";import"./chunk-C4TBDTQO.js";import"./chunk-6AUQLYPZ.js";import"./chunk-UPIYMC4Q.js";import"./chunk-ZUO5BDO3.js";import"./chunk-A7EUFORV.js";import"./chunk-QEPQGEPL.js";import"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import"./chunk-75EAYNWR.js";import"./chunk-D6LKASPV.js";import"./chunk-DKVOSSSH.js";import"./chunk-FWL474H4.js";import{x as kn}from"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import"./chunk-XUGHAFHG.js";import"./chunk-B5L26Z2J.js";import"./chunk-AVG63QW4.js";import{d as L}from"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-OYIB3B2O.js";import"./chunk-NQGIYDUG.js";import"./chunk-QTCVWDVR.js";import"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import"./chunk-CBZ2RV36.js";import{b as U}from"./chunk-QMHGGMPE.js";import{c as Cn}from"./chunk-GVYIP5Q5.js";import"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import{m as K}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{j as M}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{a as wn,l as on}from"./chunk-KC2XLVFC.js";import"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import{c as D}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{B as N,I as S}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import{i as yn}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{H as k,Ja as Pn,Yb as In,ha as F}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import{a as zn}from"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import"./chunk-FB3ILH2L.js";import{b as B}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{$ as W,Aa as tn,Q as gn,g as en}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as E,o as i,p as d,q as s}from"./chunk-UWURTNRY.js";i();s();var Rn=E(B());i();s();var rn=E(B());i();s();var G=E(B());i();s();function $n({walletId:n,method:e,params:o,onConfirm:t}){return async()=>{let r=await D().handleTxBySigner({walletId:n,localType:F,method:e,params:o});return t(r.result)}}var bn=$n;var jn=n=>{let{id:e,walletId:o,method:t,params:r,source:c,origin:x,onConfirm:g,onCancel:y}=n,P=c==="dapp",A=q(n),I=L(Pn)||{},T=I?.localType,z=U(k),b=M(o),w=K(T,o),m=r?.message,$=r?.isSilentSign,u=V({id:e,walletId:o,origin:x,localType:T}),R=Y({id:e}),j=bn({walletId:o,method:t,params:r,onConfirm:g}),p,h;P?(p=u,h=R):(p=y,h=j);let Q=(0,G.useMemo)(()=>({method:t,dappData:JSON.stringify({message:m}),dappInfo:P?A:{},from:w,message:m,chainIndex:I?.chainId}),[w]),{buttonGroup:l}=J({onCancel:p,onConfirm:h});return G.default.createElement(H,{needPreExecFn:()=>!1,preExecParams:Q,buttonGroup:l,txType:Sn.signMessage,walletAccount:b,localType:T,networkFeeProps:{coinId:z?.coinId},slot:{bottom:!!$&&G.default.createElement(X,{walletAccount:b})}})},hn=jn;i();s();var a=E(B());tn();i();s();var _n=E(zn());tn();var Qn=n=>{let e=n?.extParams?.dataType,o=n?.transaction;if(N.SCRIPT_PAYLOAD===e){let t=o;return{argTypes:t.typeArguments,args:t.functionArguments,code:t.bytecode}}if(N.HEX_STRING===e){let t=o;return{hex:`0x${d.Buffer.from(_n.default.decode(t)).toString("hex")}`}}return W(o,["extParams"])},En=Qn;i();s();var Zn=n=>{let e={};return n?.secondarySignerAddresses&&(e.additionalSigners=n.secondarySignerAddresses),n?.feePayerAddress&&(e.feePayer=n.feePayerAddress,e.withFeePayer=!!n.feePayerAddress,e.feePayerPublicKey=n.feePayerAddress),e},Fn=Zn;i();s();tn();var ne=({walletId:n,baseCoin:e,preExecInfo:o,finalCoinId:t})=>{let r=o?.gasFee||{},c=r.fee,x=Cn({coinId:e?.coinId}),g=Tn({accountId:n,chainIndex:e?.chainId}),{coinAmountInt:y}=g,P=gn(y)||yn(y,c||""),A=o?.preExeStatus===!1,I={coinId:t,estimateFailed:A,networkFee:c,network:x};return{networkFee:{fee:c,gasUnitPrice:r.gasPrice,maxGasAmount:r.gasLimit},networkFeeProps:I,isSufficientGas:P,coinWithBalance:g}},Nn=ne;var ee=({unapprovedCoinId:n,baseCoin:e,currentNetwork:o,outCoinId:t})=>{let r=n||e?.coinId||o?.coinId;return t||r},te=async({from:n,walletId:e})=>n?await D().getPublicKey(n,F,e):null,oe=({signInfo:n,signInfoFailed:e})=>!n&&!e,re=({signInfo:n,publicKey:e,baseCoin:o})=>!n||!e?null:o?.chainId||null,ae=n=>n?.extParams?.showSwitchNetwork??!0,ie=(0,a.memo)(n=>{let{id:e,method:o,params:t,walletId:r,origin:c,providerType:x=k,source:g,coinId:y,onCancel:P=en,onConfirm:A=en}=n,I=g==="dapp",{providerType:T=x,isSilentSign:z}=t,b=ae(t),w=U(k),m=L(w?.coinId)||{},$=t?.extParams?.coinId,u=ee({unapprovedCoinId:$,baseCoin:m,currentNetwork:w,outCoinId:y}),R=M(r),j=q(n),[p,h]=(0,a.useState)({}),Q=m.localType,l=K(F,r),[Z,On]=(0,a.useState)();on(async()=>{let f=await te({from:l,walletId:r});On(f)},[l]);let vn=kn(),[an,Bn]=(0,a.useState)({}),[sn,Wn]=(0,a.useState)({});on(async()=>{let f=C=>{Wn(_=>({..._,[u]:C}))};if(u)try{let C=await vn({coinId:u,address:l,fromAddr:l});Bn(_=>({..._,[u]:C})),f(!1)}catch{f(!0)}},[u]);let O=(0,a.useMemo)(()=>an[u],[u,an]),v=(0,a.useMemo)(()=>sn[u],[u,sn]),cn=oe({signInfo:O,signInfoFailed:v}),{networkFee:nn,networkFeeProps:Mn,isSufficientGas:un,coinWithBalance:mn}=Nn({walletId:r,baseCoin:m,preExecInfo:p,finalCoinId:u}),Kn=V({id:e,walletId:r,origin:c,localType:Q}),Un=Y({id:e,extraParams:{serviceCharge:nn.fee,maxGasAmount:nn.maxGasAmount,gasUnitPrice:nn.gasUnitPrice,contractAddress:p?.analysisData?.interactiveAddress}}),dn=A,pn=P;I&&(dn=Un,pn=Kn);let{buttonGroup:Ln,handleCancel:Hn}=J({feeLoading:cn,estimateFailed:v,isSufficientGas:un,onCancel:pn,onConfirm:dn,coinWithBalance:mn,preExecInfo:p}),qn={txId:e,baseCoin:m,isSufficientGas:un,coinWithBalance:mn},ln=(0,a.useMemo)(()=>En(t),[t]),Vn=(0,a.useMemo)(()=>{let f=t?.options,C=t?.extParams?.dataType,_=t?.extParams?.isRawType,Xn=Fn(f);return{dappData:JSON.stringify({transaction:{...W(O,["maxGasAmount"]),publicKey:Z,...Xn},data:{payload:C===N.HEX_STRING?ln.hex:ln,options:f,isRawType:_}}),from:l,dappInfo:j,chainIndex:re({signInfo:O,publicKey:Z,baseCoin:m}),method:o,forceLoading:!0,preStepFailed:v}},[O,Z,m?.chainId,v]),fn=wn(async()=>{await D().recordChainIdHandler({method:S.CHANGE_NETWORK,origin:c,isFocusWindowActiveTab:!0},In.AVM)}),{loading:Yn}=An({unapproved:{origin:c,id:e},network:w?.chainName,providerType:T}),Jn=(0,a.useMemo)(()=>({showSwitchNetwork:b,origin:c,providerType:k,onNetworkChange:fn}),[c,fn,b]);return Yn?a.default.createElement(xn,null):a.default.createElement(H,{loading:!!cn,txType:"signTransaction",preExecParams:Vn,slot:{bottom:!!z&&a.default.createElement(X,{walletAccount:R})},networkProps:Jn,handleCancel:Hn,buttonGroup:Ln,txState:qn,localType:m?.localType,networkFeeProps:Mn,walletAccount:R,onUpdatePreExecInfo:h})}),Dn=ie;function se(n){switch(n.method){case S.SIGN_TRANSACTION:case S.SIGN_AND_SUBMIT_TRANSACTION:return rn.default.createElement(Dn,{...n});case S.SIGN_MESSAGE:return rn.default.createElement(hn,{...n});default:return""}}var Gn=se;var St=({unapproved:n})=>Rn.default.createElement(Gn,{...n,source:"dapp"});export{St as default};
//# sourceMappingURL=Aptos-P2OHZC2M.js.map
