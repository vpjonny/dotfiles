import{b as l,d as f,e as g}from"./chunk-RYVYRLUT.js";import{b as A}from"./chunk-NQGIYDUG.js";import{qa as _,ra as h}from"./chunk-MJDO2VHF.js";import{c as d}from"./chunk-EAE2NUFS.js";import{c as i}from"./chunk-3F7OC7N7.js";import{c as m}from"./chunk-2O5TMJZM.js";import{O as u}from"./chunk-UI4IZNSB.js";import{s as p}from"./chunk-DSNMNSMD.js";import{J as c}from"./chunk-URGJ6D4O.js";import{b as y}from"./chunk-FLSAETOH.js";import{f as v,o as s,q as n}from"./chunk-UWURTNRY.js";s();n();var w=v(y());s();n();var I=async()=>({walletId:await d().getSelectedWallet()});async function T(){let{walletId:t}=await I();try{let e={needXClientSign:!0,walletId:t},{data:o}=await u(m.postApprovedProjectList,{accountIds:[t]},{walletSignParams:e});return o||{}}catch(e){throw new Error(e)}}var C=()=>{let t=_(),e=h(l);return(0,w.useCallback)(async o=>{try{let r=(await T())?.approvalProjectList||[];return typeof o=="function"&&e.length!==r.length&&o(),t(g(!0)),t(f(r)),r}catch(a){let r=a;throw c.error({title:r?.msg||r?.error_message||p("wallet_extension_approval_toast_list_retrieve_fail"),duration:2,placement:c.DIRECTION.top,showClose:!0}),a}},[e])};s();n();var K=()=>{let t=C();A("wallet-transaction",{onSuccess:async e=>{let o=e?.data?.txType,a=o!==void 0&&[i.AUTHORIZATION,i.CANCEL_AUTHORIZATION,i.UPGRADE_7702,i.REVOKE_7702].includes(o),P=(e?.data?.txAttributeList||[]).includes(i.CANCEL_AUTHORIZATION);(a||P)&&await t()},onError:t,pollingInterval:10*1e3})};export{C as a,K as b};
//# sourceMappingURL=chunk-T2BANNCO.js.map
