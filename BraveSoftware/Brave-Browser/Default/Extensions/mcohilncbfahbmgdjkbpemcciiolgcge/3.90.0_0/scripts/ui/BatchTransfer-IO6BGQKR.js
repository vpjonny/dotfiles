import{a as qu,b as Vu}from"./chunk-RVEZ3WTX.js";import{a as ne,j as Yu}from"./chunk-C7TFGGMX.js";import{a as Uu,b as Gu,c as Gs,d as Hu}from"./chunk-VX27HIAO.js";import{a as Wu}from"./chunk-CF54UNK2.js";import{a as ju}from"./chunk-HNGW4YGJ.js";import{b as zu}from"./chunk-B2LIUW7J.js";import"./chunk-2KVSCBMV.js";import"./chunk-ZBCYRIHC.js";import"./chunk-ITLSSVGE.js";import"./chunk-PWVBSLOL.js";import{b as Fo,c as Us,d as Pu}from"./chunk-AOZHPYH5.js";import{a as Ou}from"./chunk-W25M53MS.js";import{a as No,b as Iu}from"./chunk-HLTJYEGI.js";import"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import{a as ku}from"./chunk-3MLYZLAT.js";import{a as ko,b as fr,c as qr,d as yt,e as lt,f as Mu,g as Oo,h as Ru}from"./chunk-G5ZRIKIM.js";import{a as Lu}from"./chunk-OU7P2VBZ.js";import"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import{a as Fu,f as Nu}from"./chunk-75EAYNWR.js";import"./chunk-DKVOSSSH.js";import{A as gn,B as Yr,a as zn,t as bu,x as Dt}from"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import{b as wu,k as yu,x as Su}from"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import{b as To}from"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import{g as bo}from"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import{a as Tu}from"./chunk-XUGHAFHG.js";import"./chunk-B5L26Z2J.js";import"./chunk-AVG63QW4.js";import{d as Sr,e as xu}from"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import{b as Ue}from"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import{A as Qi,B as eu,C as tu,D as ru,E as xo,F as nu,G as wt,H as ou,I as su,J as au,K as iu,L as uu,M as lu,a as Je,b as Ur,c as pe,d as He,e as Pi,f as Ii,g as Li,h as Mi,i as Ri,j as ji,k as zi,l as Wi,m as Ui,n as Gi,o as Hi,p as dn,q as it,r as Yi,s as qi,t as Vi,u as $i,v as Ki,w as Zi,x as Xi,y as Rs,z as Ji}from"./chunk-3KP46YJE.js";import{a as Fi,b as Ni,d as ki,e as Oi}from"./chunk-6HJJJE2I.js";import{b as Eo}from"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import"./chunk-OBLKTTHP.js";import"./chunk-NQGIYDUG.js";import"./chunk-QTCVWDVR.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import"./chunk-CBZ2RV36.js";import"./chunk-GVYIP5Q5.js";import{$ as Di,I as Ci,Sa as Ai,i as gi,n as hi,z as vi}from"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import{b as wr,q as du}from"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import{a as _u}from"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import{c as _o,d as Ti,i as mu,m as mn,o as Au,x as Eu}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as Ye}from"./chunk-PMG6IXOR.js";import{a as pn}from"./chunk-BD5XO4WL.js";import{d as yi}from"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import{g as Bu}from"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{Q as pi,c as fi,l as mi}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import{f as Si}from"./chunk-6C7RJCTT.js";import{a as um,o as Ae}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{j as Cu,m as Du}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as er,g as So}from"./chunk-MJSLAJV6.js";import{a as H,c as Ao,g as sm,h as am,k as Ei,l as xr,o as _i,q as Bi,r as xi,s as wi}from"./chunk-KC2XLVFC.js";import{M as vo,qa as Nt,ra as we}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{J as fu,Ua as Gr,Va as In,Wa as Ln,Xa as Mn}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import{e as ui,f as mo,g as Ns,h as ks}from"./chunk-KGMP5AO5.js";import{c as Ms}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-U5DGHXS4.js";import"./chunk-SDBZJWGW.js";import{b as Qe,c as Bo,h as bi}from"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{ca as Ls,ha as Qt,k as Co,m as Ps,r as Is,t as Do}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import{b as si,c as co,d as ln,j as ai,m as kn,o as ii,u as Fs}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{h as yo}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as y}from"./chunk-3FMJDUGT.js";import{c as Xt}from"./chunk-2O5TMJZM.js";import{O as Jt,h as fo,n as On}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import{a as vu}from"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Da as Os,Fb as ci,Ga as dr,Ja as po,La as cn,Ma as go,Nb as di,Rb as Pn,Ua as ho,a as Ya,da as Be,gb as li,ha as Te,la as fe,ma as We,ua as xe}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{k as U,p as S,q as oi}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as js}from"./chunk-DOSBJ3L3.js";import{a as cu}from"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{$ as wo,A as Ct,J as Ws,Z as hu,c as pu,d as Rn,g as jn,o as Hr,q as be,r as yr,w as zs,x as fn,z as gu}from"./chunk-URGJ6D4O.js";import{a as im}from"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as re,t as ut,w as Ut}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as Ve}from"./chunk-FB3ILH2L.js";import{b as te}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as ze,D as Fn,I as Ka,M as Za,Q as io,X as Wr,Z as uo,_ as Xa,ba as Ja,fa as Qa,g as Zt,ga as ei,ia as ti,n as qa,na as ri,p as Va,ra as lo,ua as ni,va as Nn,z as $a}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{c as Ha,f as G,o as v,q as C}from"./chunk-UWURTNRY.js";var Zl=Ha((xE,Kl)=>{v();C();Kl.exports=Mg;var Vl="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",$l="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",Ig=new RegExp("^[^"+$l+"]*["+Vl+"]"),Lg=new RegExp("^[^"+Vl+"]*["+$l+"]");function Mg(t){return t=String(t||""),Ig.test(t)?"rtl":Lg.test(t)?"ltr":"neutral"}});var _c=Ha(rr=>{v();C();Object.defineProperty(rr,"__esModule",{value:!0});var Kg=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ia={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Zg={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Kg?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Cc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(qn=1;qn<20;qn++)Cc["f"+qn]=111+qn;var qn;function Qo(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var n=t.map(function(a){return Dc(a,e)}),o=function(i){return n.some(function(c){return Ac(c,i)})},s=r==null?o:o(r);return s}function Xg(t,e){return Qo(t,e)}function Jg(t,e){return Qo(t,{byKey:!0},e)}function Dc(t,e){var r=e&&e.byKey,n={};t=t.replace("++","+add");var o=t.split("+"),s=o.length;for(var a in ia)n[ia[a]]=!1;var i=!0,c=!1,l=void 0;try{for(var d=o[Symbol.iterator](),h;!(i=(h=d.next()).done);i=!0){var g=h.value,m=g.endsWith("?")&&g.length>1;m&&(g=g.slice(0,-1));var p=ua(g),u=ia[p];(s===1||!u)&&(r?n.key=p:n.which=Ec(g)),u&&(n[u]=m?null:!0)}}catch(D){c=!0,l=D}finally{try{!i&&d.return&&d.return()}finally{if(c)throw l}}return n}function Ac(t,e){for(var r in t){var n=t[r],o=void 0;if(n!=null&&(r==="key"&&e.key!=null?o=e.key.toLowerCase():r==="which"?o=n===91&&e.which===93?91:e.which:o=e[r],!(o==null&&n===!1)&&o!==n))return!1}return!0}function Ec(t){t=ua(t);var e=Cc[t]||t.toUpperCase().charCodeAt(0);return e}function ua(t){return t=t.toLowerCase(),t=Zg[t]||t,t}rr.default=Qo;rr.isHotkey=Qo;rr.isCodeHotkey=Xg;rr.isKeyHotkey=Jg;rr.parseHotkey=Dc;rr.compareHotkey=Ac;rr.toKeyCode=Ec;rr.toKeyName=ua});v();C();var Rr=G(te());var an=G(js());v();C();v();C();var $u=G(te());var kt=(t,e)=>r=>{let n=we(t),o=Nt(),s=i=>{e&&o(e(i))},a=H(s);return(0,$u.useEffect)(()=>{if(r===void 0)return;let i=typeof r=="function"?r():r;a(i)},[r,a]),[n,s]},Ku=t=>()=>{let e=Nt();return(...n)=>{t&&e(t(...n))}};var qe=kt(Mi,Xi),le=kt(Ri,Zi),Zu=kt(ji,xo),hn=kt(zi,nu),at=kt(Ii,Ki),Po=kt(Vi,tu),gD=kt($i,ru),Ce=kt(Wi,Ji),Xu=Ku(su),ct=kt(Gi,Qi),dt=kt(Hi,eu),vn=kt(Li,ou);v();C();var nl=G(te());v();C();var lm="8000",Io=()=>{let t=Dt();return H(async({coinId:e,address:r,inputData:n})=>{let o=await t({coinId:e,address:r,fromAddr:r,scenario:Co.SCENARIO_SEND_COIN}),s=o,{gasUnitPrice:a}=o;if(n){let{data:{gasLimit:c}}=await Jt(Xt.getAptosGasLimit,{inputData:n});s=c}else s=lm;let i=U.mul(a,s);return{...o,networkFee:i,maxGasAmount:s,gasUnitPrice:a}})},Ju=()=>{let t=gn({localType:Te});return H(async({to:e,from:r,amount:n,baseCoinId:o,metaAddress:s,sequenceNumber:a,maxGasAmount:i,gasUnitPrice:c,protocolType:l,chainId:d,expirationTimestampSecs:h,tyArg:g})=>{let p={base:{sequenceNumber:a,chainId:d,maxGasAmount:i,gasUnitPrice:c,expirationTimestampSecs:h}},u={amount:n,recipientAddress:e};return o===0&&(p.type=Do.TRANSFER,p.data=u),o!==0&&l===Pn.APTOS_FUNGIBLE_TOKEN&&(p.type=Do.FUNGIBLE_ASSET_TRANSFER,p.data={...u,fungibleAssetMetadataAddress:s}),o!==0&&l===Pn.APTOS_TOKEN&&(p.type=Do.TOKEN_TRANSFER,p.data={...u,tyArg:g}),await t({params:p,fromAddr:r})})};v();C();var Qu=()=>H(async({to:t,toes:e,from:r,value:n,values:o,budget:s,gasPrice:a,inputCoins:i,tokenInputCoins:c,baseCoinId:l})=>{let d=e?.length?e:[t],h=o?.length?o:[n],g=i.map(u=>{let{digest:D,version:A,objectId:E}=u??{};return{digest:D,version:A,objectId:E}}),m=new yu;if(m.setGasPrice(a),m.setGasPayment(g||[]),m.setSender(r),s&&m.setGasBudget(s),l===0){let u=m.splitCoins(m.gas,h);d.forEach((D,A)=>{m.transferObjects([u[A]],m.pure.address(D))})}else if(c&&c.length>1){let u=c.slice(1).map(E=>m.object(E.objectId)),D=m.object(c[0].objectId);m.mergeCoins(D,u);let A=m.splitCoins(D,[n]);m.transferObjects([A],m.pure.address(t))}else{let u=m.splitCoins(m.object(c[0].objectId),[n]);m.transferObjects([u],m.pure.address(t))}let p=wu(await m.build({client:Wu}));return{tx:m,txBytes:p}}),Lo=()=>{let t=Dt(),e=Qu();return H(async({to:r,from:n,value:o,values:s,toes:a,coinId:i,baseCoinId:c})=>{let l=s?.length?s?.reduce((m,p)=>U.add(m,p),0):o,d=await t({coinId:i,address:n,value:l,toAddr:a?.[0]||r});return(await e({...d,to:r,toes:a,from:n,value:o,coinId:i,values:s,baseCoinId:c}))?.tx?.blockData?.gasConfig?.budget||"0"})},el=()=>{let t=Qu(),e=Dt(),r=gn({localType:We});return H(async({to:n,toes:o,values:s,from:a,coinId:i,value:c,baseCoinId:l})=>{let d=s?.length?s?.reduce((D,A)=>U.add(D,A),0):c,h=await e({value:d,coinId:i,address:a,toAddr:o?.[0]||n}),{tx:g,txBytes:m}=await t({...h,value:c,coinId:i,to:n,toes:o,from:a,values:s,baseCoinId:l}),u=await r({params:{type:"raw",data:m},fromAddr:a});return{tx:g,txBytes:m,signedTx:u}})},tl=t=>{let e=Du(),r=Cu(),n=Yr({coinId:t,txSource:di.NORMAL});return H(async({tx:o,to:s,from:a,txBytes:i,coinAmount:c,signedTx:l,walletId:d})=>{let{signature:h,hash:g}=l||{},m=e(d)||r;return await n({tx_bytes:i,signatures:[h],request_type:"WaitForEffectsCert"},{txHash:g,coinAmount:c,accountId:d,fromAdr:a,toAdr:s,walletType:m?.serverWalletType,serviceCharge:o?.blockData?.gasConfig?.budget||"0"})})};v();C();var rl=G(te());var Vr=t=>{let[e]=qe(),r=t||e?.rpcUrl;return(0,rl.useCallback)(async()=>r?await Ti(r):{},[r])};var Mo=t=>{let[e]=qe(),r=t||e?.rpcUrl||"";return Fi(r)};var cm=(t,e)=>{let[r]=le(),{ready:n=!0,onSuccess:o}=e||{},s=Ni(t);Ei(async()=>{let a=await s(r?.chainId);return{isSupportEip1559:a?.[0]?.isSupportEip1559||!1,gasPriceLevels:a}},{onSuccess:o,pollingInterval:7e3,ready:!!r?.chainId&&!!n})},ol=()=>{let[t]=le(),[e]=qe(),r=Nt(),[n]=Po(),[o,s]=(0,nl.useState)([]),[,a]=vn(),i=mn(t?.localType),c=i&&Qe(i,t?.localType),l=we(dn);return cm(e?.rpcUrl||"",{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:d,gasPriceLevels:h})=>{let g=Oi({chainGasLevels:h,chainGasRate:l});a(d),r(Rs(g)),s(g)}}),ku({coinId:t?.coinId,chainId:t?.chainId,address:c},{ready:!!t?.coinId&&![Te,Be,We,fe,xe].includes(t?.localType)&&n===Ur.CONFIRM,onSuccess:d=>{let{gasPrice:h,needExtFee:g}=d;r(iu(g)),a(h?.supportEip1559||!1),s(Us(h)),r(Rs(Us(h)))}}),o};var Ro=()=>{let t=Sr(dr,{withPrice:!0}),e=Dt(),r=bu();return H(async({from:n,to:o,coinId:s,chainId:a})=>{let i=await e({coinId:s,toAddr:o,address:n,fromAddr:n,scenario:Co.SCENARIO_SEND_COIN})||{},c=await r({from:n,chainId:a,coinId:s,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[Ls.TX_ANALYZE]}),{simulateTransactionResultList:l}=c?.[Ls.TX_ANALYZE]||{},{unitGasLimit:d}=l[0]||{},{fee:h,feelimit:g,computeUnitPrice:m,rent:p,solRent:u,toAddressLegal:D,tokenAccountToAddress:A}=i;if(h){let{priorityFee:E,priorityGasPrice:x,priorityGasLimit:w}=du(g,m,d),b=U.add(h,E),k=U.div(b,10**t?.decimals);return{rent:p,solRent:u,networkFee:k,networkFeeInt:b,computeUnitLimit:w,computeUnitPrice:x,networkFeeMarket:U.mul(k,t?.currencyPrice),toAddressLegal:D,tokenAccountToAddress:A}}return{estimateFailed:!0}})},sl=()=>{let t=Sr(go,{withPrice:!0}),e=Lo();return H(async({coinId:r,from:n,to:o,value:s,baseCoinId:a})=>{let i=await e({to:o,from:n,value:s,coinId:r,baseCoinId:a}),c=U.div(i,10**t?.decimals);return{networkFee:c,networkFeeInt:i,networkFeeMarket:U.mul(c,t?.currencyPrice)}})},jo=t=>{let e=Sr(t||cn,{withPrice:!0});return H(async({to:r,chainId:n,contractAddress:o})=>{let s={address:r,type:"Transfer",contractAddress:o,chainId:n||e?.chainId},i=(await ju(s))?.data?.fee||"0",c=U.div(i,10**(e?.decimals||0));return{networkFee:c,networkFeeInt:i,networkFeeMarket:U.mul(c,e?.currencyPrice)}})},al=()=>{let t=Sr(po,{withPrice:!0}),e=Io();return H(async({coinId:r,address:n,inputData:o})=>{let{networkFee:s}=await e({coinId:r,address:n,inputData:o}),a=U.div(s,10**t?.decimals);return{networkFee:a,networkFeeInt:s,networkFeeMarket:U.mul(a,t?.currencyPrice)}})},zo=()=>{let e=Oo(!1,xe).flatMap(i=>i.options),r=Nt(),n=Hu(),o=Sr(ho,{withPrice:!0}),[s]=le(),a=Dt();return H(async({baseCoinId:i,coinId:c,chainId:l,from:d,to:h,tokenAddress:g,decimals:m,amount:p,sendMode:u=wr.CARRY_ALL_REMAINING_BALANCE,memo:D})=>{let E=e?.find(W=>W.address===d)?.walletId||await Ms().getWalletIdByAddress(d,xe),x=await Ms().getWalletIdentityByWalletId(E),w=Su(x,d),b=await a({coinId:c,address:d,fromAddr:d,toAddr:h,value:"0"}),k=await n(b,s?.baseCoinId);if(r(uu(k)),k.getCustomPayloadInfoRpcError)return{networkFee:0,networkFeeInt:0,networkFeeMarket:0,signInfo:k,gasLimitInfo:null,bodyParams:null};let P={to:h,seqno:k?.nonce,decimal:m,amount:p,memo:D,expireAt:Uu(k?.ttl),walletVersion:w};i===0?P={...P,type:Gs.TRANSFER,sendMode:u}:(P={...P,type:Gs.JETTON_TRANSFER,fromJettonAccount:k?.fromJettonAccount,sendMode:wr.PAY_GAS_SEPARATELY+wr.IGNORE_ERRORS},k?.customPayload&&(P={...P,customPayload:k?.customPayload,stateInit:k?.stateInit}));let I=await Gu({fromAddress:d,body:P,walletId:E}),{data:T}=await fi({address:d,tokenAddress:g,chainId:l,coinId:c,value:"0",inputData:JSON.stringify(I)}),{invokeNotificationFee:z="0",gasLimit:K="0"}=T,j=i===0?K:co(K,z),Y=U.div(j,10**(o?.decimals||0));return{networkFee:Y,networkFeeInt:j,networkFeeMarket:U.mul(Y,o?.currencyPrice),signInfo:k,gasLimitInfo:T,bodyParams:P}})};v();C();var Yt=G(te());v();C();var dm={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},Q=dm;v();C();var mr=G(te()),Wo=G(Ve());v();C();v();C();var Wn=G(te());v();C();var il=G(js());function fm(){let t=(0,il.useHistory)(),[e,r]=Po(),n=(m,p)=>(u=!0)=>{e!==p&&r(p),u?t.replace(m):t.push(m)},o=m=>t.location.pathname===m,s=n(Gr,Ur.SELECT_TYPE),a=n(In,Ur.ADD_ADDRESS),i=n(Ln,Ur.CONFIRM),c=n(Mn,Ur.SEND),l=o(Gr),d=o(In),h=o(Ln),g=o(Mn);return{isConfirmPage:h,isHomePage:l,isSendPage:g,isAddressPage:d,gotoAddressPage:a,gotoConfirmPage:i,gotoSendPage:c,gotoHomePage:s}}var At=fm;function mm(){let[t]=qe(),[e]=le(),[r]=Ce(),{gotoHomePage:n,gotoAddressPage:o,isConfirmPage:s,isSendPage:a,isAddressPage:i,isHomePage:c}=At(),l=(0,Wn.useCallback)(()=>{!t&&!e?.symbol&&!c&&n()},[t,e,c,n]),d=(0,Wn.useCallback)(()=>{r.length<=0&&!i&&o()},[r,i,o]);(0,Wn.useLayoutEffect)(()=>{i?l():(s||a)&&(l(),d())},[l,d,i,s,a])}var ul=mm;function pm(){return ul(),null}var ll=pm;v();C();var $r={root:"_root_189ao_1",container:"_container_189ao_6",okgLayout:"_okgLayout_189ao_10",headerBox:"_headerBox_189ao_32",header:"_header_189ao_32",footer:"_footer_189ao_125"};function gm({children:t}){return mr.default.createElement(y.Box,{className:$r.footer},t)}function hm({children:t,footer:e,useOkg:r=!0,headerProps:n={}}){let o=r?mr.default.Fragment:y.Box;return mr.default.createElement(y.FlexBox,{className:$r.root,direction:y.DIRECTION.vertical},mr.default.createElement(y.Container,{className:(0,Wo.default)($r.container,r&&$r.okgLayout)},mr.default.createElement(o,{className:(0,Wo.default)(!r&&$r.headerBox)},mr.default.createElement(qu,{...n,className:(0,Wo.default)($r.header,n.className)})),t),mr.default.createElement(gm,null,e),mr.default.createElement(ll,null))}var Tr=hm;v();C();var Dr=G(te()),vd=G(Ve());v();C();var Ne=G(te());ze();v();C();v();C();function cl(t){return Object.prototype.toString.call(t)==="[object Object]"}function et(t){var e,r;return cl(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(cl(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}var vm={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=_.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},Cm={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=ge.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},Dm={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var o=N.transform(r,e,{affinity:n});t.current=o,o==null&&t.unref()}}},Go=new WeakMap,Ho=new WeakMap,Gn=new WeakMap,Ul=new WeakMap,dl=new WeakMap,fl=new WeakMap,ml=new WeakMap,_={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=_.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var o=t[n],s=e[n];if(o!==s)break;r.push(o)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),s=t[r],a=e[r];return _.equals(n,o)&&s>a},endsAt(t,e){var r=t.length,n=t.slice(0,r),o=e.slice(0,r);return _.equals(n,o)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),o=e.slice(0,r),s=t[r],a=e[r];return _.equals(n,o)&&s<a},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return _.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&_.compare(t,e)===0},isBefore(t,e){return _.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&_.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&_.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&_.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&_.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),o=t[t.length-1],s=e[e.length-1];return o!==s&&_.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],o=0;o<=t.length;o++)n.push(t.slice(0,o));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!_.isAncestor(e,t)&&!_.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:o="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:s}=e;(_.equals(s,n)||_.endsBefore(s,n)||_.isAncestor(s,n))&&(n[s.length-1]+=1);break}case"remove_node":{var{path:a}=e;if(_.equals(a,n)||_.isAncestor(a,n))return null;_.endsBefore(a,n)&&(n[a.length-1]-=1);break}case"merge_node":{var{path:i,position:c}=e;_.equals(i,n)||_.endsBefore(i,n)?n[i.length-1]-=1:_.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=c);break}case"split_node":{var{path:l,position:d}=e;if(_.equals(l,n)){if(o==="forward")n[n.length-1]+=1;else if(o!=="backward")return null}else _.endsBefore(l,n)?n[l.length-1]+=1:_.isAncestor(l,n)&&t[l.length]>=d&&(n[l.length-1]+=1,n[l.length]-=d);break}case"move_node":{var{path:h,newPath:g}=e;if(_.equals(h,g))return n;if(_.isAncestor(h,n)||_.equals(h,n)){var m=g.slice();return _.endsBefore(h,g)&&h.length<g.length&&(m[h.length-1]-=1),m.concat(n.slice(h.length))}else _.isSibling(h,g)&&(_.isAncestor(g,n)||_.equals(g,n))?_.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:_.endsBefore(g,n)||_.equals(g,n)||_.isAncestor(g,n)?(_.endsBefore(h,n)&&(n[h.length-1]-=1),n[g.length-1]+=1):_.endsBefore(h,n)&&(_.equals(g,n)&&(n[g.length-1]+=1),n[h.length-1]-=1);break}}return n}};function pt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Am=(t,e,r)=>{switch(r.type){case"insert_node":{var{path:n,node:o}=r,s=$.parent(t,n),a=n[n.length-1];if(a>s.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(s.children.splice(a,0,o),e)for(var[i,c]of N.points(e))e[c]=ge.transform(i,r);break}case"insert_text":{var{path:l,offset:d,text:h}=r;if(h.length===0)break;var g=$.leaf(t,l),m=g.text.slice(0,d),p=g.text.slice(d);if(g.text=m+h+p,e)for(var[u,D]of N.points(e))e[D]=ge.transform(u,r);break}case"merge_node":{var{path:A}=r,E=$.get(t,A),x=_.previous(A),w=$.get(t,x),b=$.parent(t,A),k=A[A.length-1];if(ee.isText(E)&&ee.isText(w))w.text+=E.text;else if(!ee.isText(E)&&!ee.isText(w))w.children.push(...E.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(tt.stringify(E)," ").concat(tt.stringify(w)));if(b.children.splice(k,1),e)for(var[P,I]of N.points(e))e[I]=ge.transform(P,r);break}case"move_node":{var{path:T,newPath:z}=r;if(_.isAncestor(T,z))throw new Error("Cannot move a path [".concat(T,"] to new path [").concat(z,"] because the destination is inside itself."));var K=$.get(t,T),j=$.parent(t,T),Y=T[T.length-1];j.children.splice(Y,1);var W=_.transform(T,r),V=$.get(t,_.parent(W)),oe=W[W.length-1];if(V.children.splice(oe,0,K),e)for(var[se,me]of N.points(e))e[me]=ge.transform(se,r);break}case"remove_node":{var{path:J}=r,ae=J[J.length-1],_e=$.parent(t,J);if(_e.children.splice(ae,1),e)for(var[ve,Ze]of N.points(e)){var B=ge.transform(ve,r);if(e!=null&&B!=null)e[Ze]=B;else{var q=void 0,M=void 0;for(var[Z,de]of $.texts(t))if(_.compare(de,J)===-1)q=[Z,de];else{M=[Z,de];break}var ie=!1;q&&M&&(_.equals(M[1],J)?ie=!_.hasPrevious(M[1]):ie=_.common(q[1],J).length<_.common(M[1],J).length),q&&!ie?(ve.path=q[1],ve.offset=q[0].text.length):M?(ve.path=M[1],ve.offset=0):e=null}}break}case"remove_text":{var{path:he,offset:Pe,text:Oe}=r;if(Oe.length===0)break;var Ie=$.leaf(t,he),Fe=Ie.text.slice(0,Pe),st=Ie.text.slice(Pe+Oe.length);if(Ie.text=Fe+st,e)for(var[ft,Xe]of N.points(e))e[Xe]=ge.transform(ft,r);break}case"set_node":{var{path:bt,properties:jt,newProperties:mt}=r;if(bt.length===0)throw new Error("Cannot set properties on the root node!");var Ft=$.get(t,bt);for(var De in mt){if(De==="children"||De==="text")throw new Error('Cannot set the "'.concat(De,'" property of nodes!'));var cr=mt[De];cr==null?delete Ft[De]:Ft[De]=cr}for(var un in jt)mt.hasOwnProperty(un)||delete Ft[un];break}case"set_selection":{var{newProperties:ot}=r;if(ot==null)e=ot;else{if(e==null){if(!N.isRange(ot))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(tt.stringify(ot)," when there is no current selection."));e=Un({},ot)}for(var zt in ot){var so=ot[zt];if(so==null){if(zt==="anchor"||zt==="focus")throw new Error('Cannot remove the "'.concat(zt,'" selection property'));delete e[zt]}else e[zt]=so}}break}case"split_node":{var{path:Wt,position:jr,properties:ao}=r;if(Wt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Wt,"] because the root node cannot be split."));var zr=$.get(t,Wt),Xf=$.parent(t,Wt),Jf=Wt[Wt.length-1],bs;if(ee.isText(zr)){var Qf=zr.text.slice(0,jr),em=zr.text.slice(jr);zr.text=Qf,bs=Un(Un({},ao),{},{text:em})}else{var tm=zr.children.slice(0,jr),rm=zr.children.slice(jr);zr.children=tm,bs=Un(Un({},ao),{},{children:rm})}if(Xf.children.splice(Jf+1,0,bs),e)for(var[nm,om]of N.points(e))e[om]=ge.transform(nm,r);break}}return e},Em={transform(t,e){t.children=Ns(t.children);var r=t.selection&&Ns(t.selection);try{r=Am(t,r,e)}finally{t.children=ks(t.children),r?t.selection=ui(r)?ks(r):r:t.selection=null}}},_m={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},Bm={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},Gl=(t,e)=>{for(var r in t){var n=t[r],o=e[r];if(et(n)&&et(o)){if(!Gl(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var s=0;s<n.length;s++)if(n[s]!==o[s])return!1}else if(n!==o)return!1}for(var a in e)if(t[a]===void 0&&e[a]!==void 0)return!1;return!0};function xm(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function hr(t,e){if(t==null)return{};var r=xm(t,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var wm=["anchor","focus"];function gl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ym(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var N={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:o}=t;return N.isBackward(t)===r?[n,o]:[o,n]},end(t){var[,e]=N.edges(t);return e},equals(t,e){return ge.equals(t.anchor,e.anchor)&&ge.equals(t.focus,e.focus)},includes(t,e){if(N.isRange(e)){if(N.includes(t,e.anchor)||N.includes(t,e.focus))return!0;var[r,n]=N.edges(t),[o,s]=N.edges(e);return ge.isBefore(r,o)&&ge.isAfter(n,s)}var[a,i]=N.edges(t),c=!1,l=!1;return ge.isPoint(e)?(c=ge.compare(e,a)>=0,l=ge.compare(e,i)<=0):(c=_.compare(e,a.path)>=0,l=_.compare(e,i.path)<=0),c&&l},intersection(t,e){var r=hr(t,wm),[n,o]=N.edges(t),[s,a]=N.edges(e),i=ge.isBefore(n,s)?s:n,c=ge.isBefore(o,a)?o:a;return ge.isBefore(c,i)?null:ym({anchor:i,focus:c},r)},isBackward(t){var{anchor:e,focus:r}=t;return ge.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return ge.equals(e,r)},isExpanded(t){return!N.isCollapsed(t)},isForward(t){return!N.isBackward(t)},isRange(t){return et(t)&&ge.isPoint(t.anchor)&&ge.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=N.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return mo(t,n=>{if(n===null)return null;var{affinity:o="inward"}=r,s,a;if(o==="inward"){var i=N.isCollapsed(n);N.isForward(n)?(s="forward",a=i?s:"backward"):(s="backward",a=i?s:"forward")}else o==="outward"?N.isForward(n)?(s="backward",a="forward"):(s="forward",a="backward"):(s=o,a=o);var c=ge.transform(n.anchor,e,{affinity:s}),l=ge.transform(n.focus,e,{affinity:a});if(!c||!l)return null;n.anchor=c,n.focus=l})}},hl=t=>et(t)&&$.isNodeList(t.children)&&!f.isEditor(t),X={isAncestor(t){return et(t)&&$.isNodeList(t.children)},isElement:hl,isElementList(t){return Array.isArray(t)&&t.every(e=>X.isElement(e))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return hl(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},Sm=["children"],Tm=["text"],vl=new WeakMap,$={ancestor(t,e){var r=$.get(t,e);if(ee.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(tt.stringify(r)));return r},*ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of _.ancestors(e,r)){var o=$.ancestor(t,n),s=[o,n];yield s}},child(t,e){if(ee.isText(t))throw new Error("Cannot get the child of a text node: ".concat(tt.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(tt.stringify(t)));return r},*children(t,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=r,o=$.ancestor(t,e),{children:s}=o,a=n?s.length-1:0;n?a>=0:a<s.length;){var i=$.child(o,a),c=e.concat(a);yield[i,c],a=n?a-1:a+1}},common(t,e,r){var n=_.common(e,r),o=$.get(t,n);return[o,n]},descendant(t,e){var r=$.get(t,e);if(f.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(tt.stringify(r)));return r},*descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))n.length!==0&&(yield[r,n])},*elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))X.isElement(r)&&(yield[r,n])},extractProps(t){if(X.isAncestor(t)){var e=hr(t,Sm);return e}else{var e=hr(t,Tm);return e}},first(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(ee.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){if(ee.isText(t))throw new Error("Cannot get a fragment starting from a root text node: ".concat(tt.stringify(t)));var r=mo({children:t.children},n=>{var[o,s]=N.edges(e),a=$.nodes(n,{reverse:!0,pass:g=>{var[,m]=g;return!N.includes(e,m)}});for(var[,i]of a){if(!N.includes(e,i)){var c=$.parent(n,i),l=i[i.length-1];c.children.splice(l,1)}if(_.equals(i,s.path)){var d=$.leaf(n,i);d.text=d.text.slice(0,s.offset)}if(_.equals(i,o.path)){var h=$.leaf(n,i);h.text=h.text.slice(o.offset)}}f.isEditor(n)&&(n.selection=null)});return r.children},get(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(ee.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(tt.stringify(t)));r=r.children[o]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var o=e[n];if(ee.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(t){return ee.isText(t)||X.isElement(t)||f.isEditor(t)},isNodeList(t){if(!Array.isArray(t))return!1;var e=vl.get(t);if(e!==void 0)return e;var r=t.every(n=>$.isNode(n));return vl.set(t,r),r},last(t,e){for(var r=e.slice(),n=$.get(t,r);n&&!(ee.isText(n)||n.children.length===0);){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(t,e){var r=$.get(t,e);if(!ee.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(tt.stringify(r)));return r},*levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of _.levels(e,r)){var o=$.get(t,n);yield[o,n]}},matches(t,e){return X.isElement(t)&&X.isElementProps(e)&&X.matches(t,e)||ee.isText(t)&&ee.isTextProps(e)&&ee.matches(t,e)},*nodes(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:r,reverse:n=!1}=e,{from:o=[],to:s}=e,a=new Set,i=[],c=t;!(s&&(n?_.isBefore(i,s):_.isAfter(i,s)));){if(a.has(c)||(yield[c,i]),!a.has(c)&&!ee.isText(c)&&c.children.length!==0&&(r==null||r([c,i])===!1)){a.add(c);var l=n?c.children.length-1:0;_.isAncestor(i,o)&&(l=o[i.length]),i=i.concat(l),c=$.get(t,i);continue}if(i.length===0)break;if(!n){var d=_.next(i);if($.has(t,d)){i=d,c=$.get(t,i);continue}}if(n&&i[i.length-1]!==0){var h=_.previous(i);i=h,c=$.get(t,i);continue}i=_.parent(i),c=$.get(t,i),a.add(c)}},parent(t,e){var r=_.parent(e),n=$.get(t,r);if(ee.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return ee.isText(t)?t.text:t.children.map($.string).join("")},*texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[r,n]of $.nodes(t,e))ee.isText(r)&&(yield[r,n])}};function Cl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var gr={isNodeOperation(t){return gr.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!et(t))return!1;switch(t.type){case"insert_node":return _.isPath(t.path)&&$.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&_.isPath(t.path);case"merge_node":return typeof t.position=="number"&&_.isPath(t.path)&&et(t.properties);case"move_node":return _.isPath(t.path)&&_.isPath(t.newPath);case"remove_node":return _.isPath(t.path)&&$.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&_.isPath(t.path);case"set_node":return _.isPath(t.path)&&et(t.properties)&&et(t.newProperties);case"set_selection":return t.properties===null&&N.isRange(t.newProperties)||t.newProperties===null&&N.isRange(t.properties)||et(t.properties)&&et(t.newProperties);case"split_node":return _.isPath(t.path)&&typeof t.position=="number"&&et(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>gr.isOperation(e))},isSelectionOperation(t){return gr.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return gr.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return Le(Le({},t),{},{type:"remove_node"});case"insert_text":return Le(Le({},t),{},{type:"remove_text"});case"merge_node":return Le(Le({},t),{},{type:"split_node",path:_.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(_.equals(e,r))return t;if(_.isSibling(r,e))return Le(Le({},t),{},{path:e,newPath:r});var n=_.transform(r,t),o=_.transform(_.next(r),t);return Le(Le({},t),{},{path:n,newPath:o})}case"remove_node":return Le(Le({},t),{},{type:"insert_node"});case"remove_text":return Le(Le({},t),{},{type:"insert_text"});case"set_node":{var{properties:s,newProperties:a}=t;return Le(Le({},t),{},{properties:a,newProperties:s})}case"set_selection":{var{properties:i,newProperties:c}=t;return i==null?Le(Le({},t),{},{properties:c,newProperties:null}):c==null?Le(Le({},t),{},{properties:null,newProperties:i}):Le(Le({},t),{},{properties:c,newProperties:i})}case"split_node":return Le(Le({},t),{},{type:"merge_node",path:_.next(t.path)})}}},Dl=new WeakMap,bm=t=>{var e=Dl.get(t);if(e!==void 0)return e;if(!et(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||et(t.marks))&&(t.selection===null||N.isRange(t.selection))&&$.isNodeList(t.children)&&gr.isOperationList(t.operations);return Dl.set(t,r),r},f={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return bm(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)}};var Fm={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(_.isPath)}};function Al(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function El(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Al(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Al(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ge={compare(t,e){var r=_.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return ge.compare(t,e)===1},isBefore(t,e){return ge.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&_.equals(t.path,e.path)},isPoint(t){return et(t)&&typeof t.offset=="number"&&_.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return mo(t,n=>{if(n===null)return null;var{affinity:o="forward"}=r,{path:s,offset:a}=n;switch(e.type){case"insert_node":case"move_node":{n.path=_.transform(s,e,r);break}case"insert_text":{_.equals(e.path,s)&&(e.offset<a||e.offset===a&&o==="forward")&&(n.offset+=e.text.length);break}case"merge_node":{_.equals(e.path,s)&&(n.offset+=e.position),n.path=_.transform(s,e,r);break}case"remove_text":{_.equals(e.path,s)&&e.offset<=a&&(n.offset-=Math.min(a-e.offset,e.text.length));break}case"remove_node":{if(_.equals(e.path,s)||_.isAncestor(e.path,s))return null;n.path=_.transform(s,e,r);break}case"split_node":{if(_.equals(e.path,s)){if(e.position===a&&o==null)return null;(e.position<a||e.position===a&&o==="forward")&&(n.offset-=e.position,n.path=_.transform(s,e,El(El({},r),{},{affinity:"forward"})))}else n.path=_.transform(s,e,r);break}}})}},_l=void 0,tt={setScrubber(t){_l=t},stringify(t){return JSON.stringify(t,_l)}},Nm=["text"],km=["anchor","focus"];function Bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ee={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function o(s){var a=hr(s,Nm);return a}return Gl(n?o(t):t,n?o(e):e)},isText(t){return et(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>ee.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[pr({},t)];for(var n of e){var o=hr(n,km),[s,a]=N.edges(n),i=[],c=0,l=s.offset,d=a.offset;for(var h of r){var{length:g}=h.text,m=c;if(c+=g,l<=m&&c<=d){Object.assign(h,o),i.push(h);continue}if(l!==d&&(l===c||d===m)||l>c||d<m||d===m&&m!==0){i.push(h);continue}var p=h,u=void 0,D=void 0;if(d<c){var A=d-m;D=pr(pr({},p),{},{text:p.text.slice(A)}),p=pr(pr({},p),{},{text:p.text.slice(0,A)})}if(l>m){var E=l-m;u=pr(pr({},p),{},{text:p.text.slice(0,E)}),p=pr(pr({},p),{},{text:p.text.slice(E)})}Object.assign(p,o),u&&i.push(u),i.push(p),D&&i.push(D)}r=i}return r}},Hs=t=>t.selection?t.selection:t.children.length>0?f.end(t,[]):[0],Dn=(t,e)=>{var[r]=f.node(t,e);return n=>n===r},Ys=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,o=r?Rm(e):e,s=ce.None,a=ce.None,i=0,c=null,l=null;for(var d of o){var h=d.codePointAt(0);if(!h)break;var g=Zm(d,h);if([s,a]=n?[a,g]:[g,s],Cn(s,ce.ZWJ)&&Cn(a,ce.ExtPict)&&(n?c=xl(e.substring(0,i)):c=xl(e.substring(0,e.length-i)),!c)||Cn(s,ce.RI)&&Cn(a,ce.RI)&&(l!==null?l=!l:n?l=!0:l=tp(e.substring(0,e.length-i)),!l)||s!==ce.None&&a!==ce.None&&Jm(s,a))break;i+=d.length}return i||1},Om=/\s/,Pm=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Im=/['\u2018\u2019]/,Lm=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,o=!1;e.length>0;){var s=Ys(e,r),[a,i]=qs(e,s,r);if(Mm(a,i,r))o=!0,n+=s;else if(!o)n+=s;else break;e=i}return n},qs=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},Mm=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Om.test(e))return!1;if(Im.test(e)){var o=Ys(r,n),[s,a]=qs(r,o,n);if(t(s,a,n))return!0}return!Pm.test(e)},Rm=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var o=e.charAt(r-n);if(zm(o.charCodeAt(0))){var s=e.charAt(r-n-1);if(jm(s.charCodeAt(0))){yield s+o,n++;continue}}yield o}},jm=t=>t>=55296&&t<=56319,zm=t=>t>=56320&&t<=57343,ce;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(ce||(ce={}));var Wm=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Um=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Gm=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Hm=/^[\u1100-\u115F\uA960-\uA97C]$/,Ym=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,qm=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Vm=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,$m=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Km=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Zm=(t,e)=>{var r=ce.Any;return t.search(Wm)!==-1&&(r|=ce.Extend),e===8205&&(r|=ce.ZWJ),e>=127462&&e<=127487&&(r|=ce.RI),t.search(Um)!==-1&&(r|=ce.Prepend),t.search(Gm)!==-1&&(r|=ce.SpacingMark),t.search(Hm)!==-1&&(r|=ce.L),t.search(Ym)!==-1&&(r|=ce.V),t.search(qm)!==-1&&(r|=ce.T),t.search(Vm)!==-1&&(r|=ce.LV),t.search($m)!==-1&&(r|=ce.LVT),t.search(Km)!==-1&&(r|=ce.ExtPict),r};function Cn(t,e){return(t&e)!==0}var Xm=[[ce.L,ce.L|ce.V|ce.LV|ce.LVT],[ce.LV|ce.V,ce.V|ce.T],[ce.LVT|ce.T,ce.T],[ce.Any,ce.Extend|ce.ZWJ],[ce.Any,ce.SpacingMark],[ce.Prepend,ce.Any],[ce.ZWJ,ce.ExtPict],[ce.RI,ce.RI]];function Jm(t,e){return Xm.findIndex(r=>Cn(t,r[0])&&Cn(e,r[1]))===-1}var Qm=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,xl=t=>t.search(Qm)!==-1,ep=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,tp=t=>{var e=t.match(ep);if(e===null)return!1;var r=e[0].length/2;return r%2===1},rp={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:o=Hs(t)}=r;if(_.isPath(o)&&(o=f.range(t,o)),N.isRange(o))if(N.isCollapsed(o))o=o.anchor;else{var s=N.end(o);if(!n&&f.void(t,{at:s}))return;var a=N.start(o),i=f.pointRef(t,a),c=f.pointRef(t,s);R.delete(t,{at:o,voids:n});var l=i.unref(),d=c.unref();o=l||d,R.setSelection(t,{anchor:o,focus:o})}if(!(!n&&f.void(t,{at:o})||f.elementReadOnly(t,{at:o}))){var{path:h,offset:g}=o;e.length>0&&t.apply({type:"insert_text",path:h,offset:g,text:e})}})}};function wl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var R=Uo(Uo(Uo(Uo({},Em),_m),Bm),rp),np=(t,e)=>{for(var r of f.pathRefs(t))vm.transform(r,e);for(var n of f.pointRefs(t))Cm.transform(n,e);for(var o of f.rangeRefs(t))Dm.transform(o,e);var s=Go.get(t)||[],a=Ho.get(t)||new Set,i,c,l=p=>{if(p){var u=p.join(",");c.has(u)||(c.add(u),i.push(p))}};if(_.operationCanTransformPath(e)){i=[],c=new Set;for(var d of s){var h=_.transform(d,e);l(h)}}else i=s,c=a;var g=t.getDirtyPaths(e);for(var m of g)l(m);Go.set(t,i),Ho.set(t,c),R.transform(t,e),t.operations.push(e),f.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),Gn.get(t)||(Gn.set(t,!0),Promise.resolve().then(()=>{Gn.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},op=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return _.levels(r)}case"insert_node":{var{node:n,path:o}=e,s=_.levels(o),a=ee.isText(n)?[]:Array.from($.nodes(n),z=>{var[,K]=z;return o.concat(K)});return[...s,...a]}case"merge_node":{var{path:i}=e,c=_.ancestors(i),l=_.previous(i);return[...c,l]}case"move_node":{var{path:d,newPath:h}=e;if(_.equals(d,h))return[];var g=[],m=[];for(var p of _.ancestors(d)){var u=_.transform(p,e);g.push(u)}for(var D of _.ancestors(h)){var A=_.transform(D,e);m.push(A)}var E=m[m.length-1],x=h[h.length-1],w=E.concat(x);return[...g,...m,w]}case"remove_node":{var{path:b}=e,k=_.ancestors(b);return[...k]}case"split_node":{var{path:P}=e,I=_.levels(P),T=_.next(P);return[...I,T]}default:return[]}},sp=t=>{var{selection:e}=t;return e?$.fragment(t,e):[]},ap=(t,e)=>{var[r,n]=e;if(!ee.isText(r)){if(X.isElement(r)&&r.children.length===0){var o={text:""};R.insertNodes(t,o,{at:n.concat(0),voids:!0});return}for(var s=f.isEditor(r)?!1:X.isElement(r)&&(t.isInline(r)||r.children.length===0||ee.isText(r.children[0])||t.isInline(r.children[0])),a=0,i=0;i<r.children.length;i++,a++){var c=$.get(t,n);if(!ee.isText(c)){var l=c.children[a],d=c.children[a-1],h=i===r.children.length-1,g=ee.isText(l)||X.isElement(l)&&t.isInline(l);if(g!==s)R.removeNodes(t,{at:n.concat(a),voids:!0}),a--;else if(X.isElement(l)){if(t.isInline(l)){if(d==null||!ee.isText(d)){var m={text:""};R.insertNodes(t,m,{at:n.concat(a),voids:!0}),a++}else if(h){var p={text:""};R.insertNodes(t,p,{at:n.concat(a+1),voids:!0}),a++}}}else d!=null&&ee.isText(d)&&(ee.equals(l,d,{loose:!0})?(R.mergeNodes(t,{at:n.concat(a),voids:!0}),a--):d.text===""?(R.removeNodes(t,{at:n.concat(a-1),voids:!0}),a--):l.text===""&&(R.removeNodes(t,{at:n.concat(a),voids:!0}),a--))}}}},ip=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,o=n*42;if(r>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},up=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:o="lowest",at:s=e.selection,match:a}=r;if(!!s){var i=f.path(e,s),c=o==="lowest";for(var[l,d]of f.levels(e,{at:i,voids:n,match:a,reverse:c}))if(!ee.isText(l)){if(N.isRange(s)){if(_.isAncestor(d,s.anchor.path)&&_.isAncestor(d,s.focus.path))return[l,d]}else if(!_.equals(i,d))return[l,d]}}};function yl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Sl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var lp=(t,e,r)=>{var{selection:n}=t;if(n){var o=(h,g)=>{if(!ee.isText(h))return!1;var[m,p]=f.parent(t,g);return!t.isVoid(m)||t.markableVoid(m)},s=N.isExpanded(n),a=!1;if(!s){var[i,c]=f.node(t,n);if(i&&o(i,c)){var[l]=f.parent(t,c);a=l&&t.markableVoid(l)}}if(s||a)R.setNodes(t,{[e]:r},{match:o,split:!0,voids:!0});else{var d=Sl(Sl({},f.marks(t)||{}),{},{[e]:r});t.marks=d,Gn.get(t)||t.onChange()}}};function Tl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function bl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var cp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=f.point(e,r,{edge:"end"}),s=f.end(e,[]),a={anchor:o,focus:s},{distance:i=1}=n,c=0,l;for(var d of f.positions(e,bl(bl({},n),{},{at:a}))){if(c>i)break;c!==0&&(l=d),c++}return l};function Fl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Nl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var dp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=f.start(e,[]),s=f.point(e,r,{edge:"start"}),a={anchor:o,focus:s},{distance:i=1}=n,c=0,l;for(var d of f.positions(e,Nl(Nl({},n),{},{at:a,reverse:!0}))){if(c>i)break;c!==0&&(l=d),c++}return l},fp=(t,e)=>{var{selection:r}=t;r&&N.isCollapsed(r)&&R.delete(t,{unit:e,reverse:!0})},mp=(t,e)=>{var{selection:r}=t;r&&N.isCollapsed(r)&&R.delete(t,{unit:e})},pp=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&N.isExpanded(n)&&R.delete(e,{reverse:r==="backward"})},gp=(t,e)=>[f.start(t,e),f.end(t,e)];function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ol(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var hp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.above(e,Ol(Ol({},r),{},{match:n=>X.isElement(n)&&f.isElementReadOnly(e,n)}))},vp=(t,e)=>f.point(t,e,{edge:"end"}),Cp=(t,e)=>{var r=f.path(t,e,{edge:"start"});return f.node(t,r)},Dp=(t,e)=>{var r=f.range(t,e);return $.fragment(t,r)};function Pl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ap=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.above(e,Il(Il({},r),{},{match:n=>X.isElement(n)&&f.isVoid(e,n)}))},Ep=(t,e)=>e.children.some(r=>X.isElement(r)&&f.isBlock(t,r)),_p=(t,e)=>e.children.some(r=>ee.isText(r)||f.isInline(t,r)),Bp=(t,e)=>$.has(t,e),xp=(t,e)=>e.children.every(r=>ee.isText(r)),wp=t=>{R.splitNodes(t,{always:!0})},yp=(t,e,r)=>{R.insertNodes(t,e,r)},Sp=t=>{R.splitNodes(t,{always:!0})};function Ll(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Tp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ll(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ll(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var bp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:s}=e;if(o){if(s){var a=Tp({text:r},s);R.insertNodes(e,a,{at:n.at,voids:n.voids})}else R.insertText(e,r,n);e.marks=null}},Fp=(t,e)=>!t.isInline(e),Np=(t,e,r)=>f.isStart(t,e,r)||f.isEnd(t,e,r),kp=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&ee.isText(n)&&n.text===""&&!t.isVoid(e)},Op=(t,e,r)=>{var n=f.end(t,r);return ge.equals(e,n)},Pp=t=>{var e=Ul.get(t);return e===void 0?!0:e},Ip=(t,e,r)=>{if(e.offset!==0)return!1;var n=f.start(t,r);return ge.equals(e,n)},Lp=(t,e)=>{var r=f.path(t,e,{edge:"end"});return f.node(t,r)},Mp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=f.path(e,r,n),s=$.leaf(e,o);return[s,o]};function*Rp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,reverse:n=!1,voids:o=!1}=e,{match:s}=e;if(s==null&&(s=()=>!0),!!r){var a=[],i=f.path(t,r);for(var[c,l]of $.levels(t,i))if(!!s(c,l)&&(a.push([c,l]),!o&&X.isElement(c)&&f.isVoid(t,c)))break;n&&a.reverse(),yield*a}}var jp=["text"],zp=["text"],Wp=function(e){var{marks:r,selection:n}=e;if(!n)return null;if(r)return r;if(N.isExpanded(n)){var[o]=f.nodes(e,{match:ee.isText});if(o){var[s]=o,a=hr(s,jp);return a}else return{}}var{anchor:i}=n,{path:c}=i,[l]=f.leaf(e,c);if(i.offset===0){var d=f.previous(e,{at:c,match:ee.isText}),h=f.above(e,{match:A=>X.isElement(A)&&f.isVoid(e,A)&&e.markableVoid(A)});if(!h){var g=f.above(e,{match:A=>X.isElement(A)&&f.isBlock(e,A)});if(d&&g){var[m,p]=d,[,u]=g;_.isAncestor(u,p)&&(l=m)}}}var D=hr(l,zp);return D},Up=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:s,at:a=e.selection}=r;if(!!a){var i=f.after(e,a,{voids:o});if(!!i){var[,c]=f.last(e,[]),l=[i.path,c];if(_.isPath(a)&&a.length===0)throw new Error("Cannot get the next node from the root node!");if(s==null)if(_.isPath(a)){var[d]=f.parent(e,a);s=g=>d.children.includes(g)}else s=()=>!0;var[h]=f.nodes(e,{at:l,match:s,mode:n,voids:o});return h}}},Gp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=f.path(e,r,n),s=$.get(e,o);return[s,o]};function*Hp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,mode:n="all",universal:o=!1,reverse:s=!1,voids:a=!1,ignoreNonSelectable:i=!1}=e,{match:c}=e;if(c||(c=()=>!0),!!r){var l,d;if(Fm.isSpan(r))l=r[0],d=r[1];else{var h=f.path(t,r,{edge:"start"}),g=f.path(t,r,{edge:"end"});l=s?g:h,d=s?h:g}var m=$.nodes(t,{reverse:s,from:l,to:d,pass:w=>{var[b]=w;return X.isElement(b)?!!(!a&&(f.isVoid(t,b)||f.isElementReadOnly(t,b))||i&&!f.isSelectable(t,b)):!1}}),p=[],u;for(var[D,A]of m)if(!(i&&X.isElement(D)&&!f.isSelectable(t,D))){var E=u&&_.compare(A,u[1])===0;if(!(n==="highest"&&E)){if(!c(D,A)){if(o&&!E&&ee.isText(D))return;continue}if(n==="lowest"&&E){u=[D,A];continue}var x=n==="lowest"?u:[D,A];x&&(o?p.push(x):yield x),u=[D,A]}}n==="lowest"&&u&&(o?p.push(u):yield u),o&&(yield*p)}}var Yp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:o}=r,s=d=>Go.get(d)||[],a=d=>Ho.get(d)||new Set,i=d=>{var h=s(d).pop(),g=h.join(",");return a(d).delete(g),h};if(!!f.isNormalizing(e)){if(n){var c=Array.from($.nodes(e),d=>{var[,h]=d;return h}),l=new Set(c.map(d=>d.join(",")));Go.set(e,c),Ho.set(e,l)}s(e).length!==0&&f.withoutNormalizing(e,()=>{for(var d of s(e))if($.has(e,d)){var h=f.node(e,d),[g,m]=h;X.isElement(g)&&g.children.length===0&&e.normalizeNode(h,{operation:o})}for(var p=s(e),u=p.length,D=0;p.length!==0;){if(!e.shouldNormalize({dirtyPaths:p,iteration:D,initialDirtyPathsLength:u,operation:o}))return;var A=i(e);if($.has(e,A)){var E=f.node(e,A);e.normalizeNode(E,{operation:o})}D++,p=s(e)}})}},qp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=f.path(e,r,n),s=_.parent(o),a=f.node(e,s);return a},Vp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,s={current:r,affinity:o,unref(){var{current:i}=s,c=f.pathRefs(e);return c.delete(s),s.current=null,i}},a=f.pathRefs(e);return a.add(s),s},$p=t=>{var e=dl.get(t);return e||(e=new Set,dl.set(t,e)),e},Kp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:s}=n;if(_.isPath(r)){if(s==="start"){var[,a]=$.first(e,r);r=a}else if(s==="end"){var[,i]=$.last(e,r);r=i}}return N.isRange(r)&&(s==="start"?r=N.start(r):s==="end"?r=N.end(r):r=_.common(r.anchor.path,r.focus.path)),ge.isPoint(r)&&(r=r.path),o!=null&&(r=r.slice(0,o)),r},Zp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,s={current:r,affinity:o,unref(){var{current:i}=s,c=f.pointRefs(e);return c.delete(s),s.current=null,i}},a=f.pointRefs(e);return a.add(s),s},Xp=t=>{var e=fl.get(t);return e||(e=new Set,fl.set(t,e)),e},Jp=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=n;if(_.isPath(r)){var s;if(o==="end"){var[,a]=$.last(e,r);s=a}else{var[,i]=$.first(e,r);s=i}var c=$.get(e,s);if(!ee.isText(c))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(r,"] because it has no ").concat(o," text node."));return{path:s,offset:o==="end"?c.text.length:0}}if(N.isRange(r)){var[l,d]=N.edges(r);return o==="start"?l:d}return r};function*Qp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:r=t.selection,unit:n="offset",reverse:o=!1,voids:s=!1,ignoreNonSelectable:a=!1}=e;if(!r)return;var i=f.range(t,r),[c,l]=N.edges(i),d=o?l:c,h=!1,g="",m=0,p=0,u=0;for(var[D,A]of f.nodes(t,{at:r,reverse:o,voids:s,ignoreNonSelectable:a})){if(X.isElement(D)){if(!s&&(t.isVoid(D)||t.isElementReadOnly(D))){yield f.start(t,A);continue}if(t.isInline(D))continue;if(f.hasInlines(t,D)){var E=_.isAncestor(A,l.path)?l:f.end(t,A),x=_.isAncestor(A,c.path)?c:f.start(t,A);g=f.string(t,{anchor:x,focus:E},{voids:s}),h=!0}}if(ee.isText(D)){var w=_.equals(A,d.path);for(w?(p=o?d.offset:D.text.length-d.offset,u=d.offset):(p=D.text.length,u=o?p:0),(w||h||n==="offset")&&(yield{path:A,offset:u},h=!1);;){if(m===0){if(g==="")break;m=b(g,n,o),g=qs(g,m,o)[1]}if(u=o?u-m:u+m,p=p-m,p<0){m=-p;break}m=0,yield{path:A,offset:u}}}}function b(k,P,I){return P==="character"?Ys(k,I):P==="word"?Lm(k,I):P==="line"||P==="block"?k.length:1}}var eg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:o=!1}=r,{match:s,at:a=e.selection}=r;if(!!a){var i=f.before(e,a,{voids:o});if(!!i){var[,c]=f.first(e,[]),l=[i.path,c];if(_.isPath(a)&&a.length===0)throw new Error("Cannot get the previous node from the root node!");if(s==null)if(_.isPath(a)){var[d]=f.parent(e,a);s=g=>d.children.includes(g)}else s=()=>!0;var[h]=f.nodes(e,{reverse:!0,at:l,match:s,mode:n,voids:o});return h}}},tg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=n,s={current:r,affinity:o,unref(){var{current:i}=s,c=f.rangeRefs(e);return c.delete(s),s.current=null,i}},a=f.rangeRefs(e);return a.add(s),s},rg=t=>{var e=ml.get(t);return e||(e=new Set,ml.set(t,e)),e},ng=(t,e,r)=>{if(N.isRange(e)&&!r)return e;var n=f.start(t,e),o=f.end(t,r||e);return{anchor:n,focus:o}};function Ml(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function og(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ml(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ml(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sg=(t,e)=>{var{selection:r}=t;if(r){var n=(d,h)=>{if(!ee.isText(d))return!1;var[g,m]=f.parent(t,h);return!t.isVoid(g)||t.markableVoid(g)},o=N.isExpanded(r),s=!1;if(!o){var[a,i]=f.node(t,r);if(a&&n(a,i)){var[c]=f.parent(t,i);s=c&&t.markableVoid(c)}}if(o||s)R.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var l=og({},f.marks(t)||{});delete l[e],t.marks=l,Gn.get(t)||t.onChange()}}},ag=(t,e)=>{Ul.set(t,e)},ig=(t,e)=>f.point(t,e,{edge:"start"}),ug=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,s=f.range(e,r),[a,i]=N.edges(s),c="";for(var[l,d]of f.nodes(e,{at:s,match:ee.isText,voids:o})){var h=l.text;_.equals(d,i.path)&&(h=h.slice(0,i.offset)),_.equals(d,a.path)&&(h=h.slice(a.offset)),c+=h}return c},lg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=n,[s,a]=N.edges(r);if(s.offset!==0||a.offset!==0||N.isCollapsed(r)||_.hasPrevious(a.path))return r;var i=f.above(e,{at:a,match:p=>X.isElement(p)&&f.isBlock(e,p),voids:o}),c=i?i[1]:[],l=f.start(e,s),d={anchor:l,focus:a},h=!0;for(var[g,m]of f.nodes(e,{at:d,match:ee.isText,reverse:!0,voids:o})){if(h){h=!1;continue}if(g.text!==""||_.isBefore(m,c)){a={path:m,offset:g.text.length};break}}return{anchor:s,focus:a}},cg=(t,e)=>{var r=f.isNormalizing(t);f.setNormalizing(t,!1);try{e()}finally{f.setNormalizing(t,r)}f.normalize(t)},dg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var n,o,{reverse:s=!1,unit:a="character",distance:i=1,voids:c=!1}=r,{at:l=e.selection,hanging:d=!1}=r;if(!!l){var h=!1;if(N.isRange(l)&&N.isCollapsed(l)&&(h=!0,l=l.anchor),ge.isPoint(l)){var g=f.void(e,{at:l,mode:"highest"});if(!c&&g){var[,m]=g;l=m}else{var p={unit:a,distance:i},u=s?f.before(e,l,p)||f.start(e,[]):f.after(e,l,p)||f.end(e,[]);l={anchor:l,focus:u},d=!0}}if(_.isPath(l)){R.removeNodes(e,{at:l,voids:c});return}if(!N.isCollapsed(l)){if(!d){var[,D]=N.edges(l),A=f.end(e,[]);ge.equals(D,A)||(l=f.unhangRange(e,l,{voids:c}))}var[E,x]=N.edges(l),w=f.above(e,{match:Fe=>X.isElement(Fe)&&f.isBlock(e,Fe),at:E,voids:c}),b=f.above(e,{match:Fe=>X.isElement(Fe)&&f.isBlock(e,Fe),at:x,voids:c}),k=w&&b&&!_.equals(w[1],b[1]),P=_.equals(E.path,x.path),I=c?null:(n=f.void(e,{at:E,mode:"highest"}))!==null&&n!==void 0?n:f.elementReadOnly(e,{at:E,mode:"highest"}),T=c?null:(o=f.void(e,{at:x,mode:"highest"}))!==null&&o!==void 0?o:f.elementReadOnly(e,{at:x,mode:"highest"});if(I){var z=f.before(e,E);z&&w&&_.isAncestor(w[1],z.path)&&(E=z)}if(T){var K=f.after(e,x);K&&b&&_.isAncestor(b[1],K.path)&&(x=K)}var j=[],Y;for(var W of f.nodes(e,{at:l,voids:c})){var[V,oe]=W;Y&&_.compare(oe,Y)===0||(!c&&X.isElement(V)&&(f.isVoid(e,V)||f.isElementReadOnly(e,V))||!_.isCommon(oe,E.path)&&!_.isCommon(oe,x.path))&&(j.push(W),Y=oe)}var se=Array.from(j,Fe=>{var[,st]=Fe;return f.pathRef(e,st)}),me=f.pointRef(e,E),J=f.pointRef(e,x),ae="";if(!P&&!I){var _e=me.current,[ve]=f.leaf(e,_e),{path:Ze}=_e,{offset:B}=E,q=ve.text.slice(B);q.length>0&&(e.apply({type:"remove_text",path:Ze,offset:B,text:q}),ae=q)}if(se.reverse().map(Fe=>Fe.unref()).filter(Fe=>Fe!==null).forEach(Fe=>R.removeNodes(e,{at:Fe,voids:c})),!T){var M=J.current,[Z]=f.leaf(e,M),{path:de}=M,ie=P?E.offset:0,he=Z.text.slice(ie,x.offset);he.length>0&&(e.apply({type:"remove_text",path:de,offset:ie,text:he}),ae=he)}!P&&k&&J.current&&me.current&&R.mergeNodes(e,{at:J.current,hanging:!0,voids:c}),h&&s&&a==="character"&&ae.length>1&&ae.match(/[\u0E00-\u0E7F]+/)&&R.insertText(e,ae.slice(0,ae.length-i));var Pe=me.unref(),Oe=J.unref(),Ie=s?Pe||Oe:Oe||Pe;r.at==null&&Ie&&R.select(e,Ie)}}})},fg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:s=!1}=n,{at:a=Hs(e)}=n;if(!!r.length){if(N.isRange(a))if(o||(a=f.unhangRange(e,a,{voids:s})),N.isCollapsed(a))a=a.anchor;else{var[,i]=N.edges(a);if(!s&&f.void(e,{at:i}))return;var c=f.pointRef(e,i);R.delete(e,{at:a}),a=c.unref()}else _.isPath(a)&&(a=f.start(e,a));if(!(!s&&f.void(e,{at:a}))){var l=f.above(e,{at:a,match:B=>X.isElement(B)&&f.isInline(e,B),mode:"highest",voids:s});if(l){var[,d]=l;if(f.isEnd(e,a,d)){var h=f.after(e,d);a=h}else if(f.isStart(e,a,d)){var g=f.before(e,d);a=g}}var m=f.above(e,{match:B=>X.isElement(B)&&f.isBlock(e,B),at:a,voids:s}),[,p]=m,u=f.isStart(e,a,p),D=f.isEnd(e,a,p),A=u&&D,E=!u||u&&D,x=!D,[,w]=$.first({children:r},[]),[,b]=$.last({children:r},[]),k=[],P=B=>{var[q,M]=B,Z=M.length===0;return Z?!1:A?!0:!(E&&_.isAncestor(M,w)&&X.isElement(q)&&!e.isVoid(q)&&!e.isInline(q)||x&&_.isAncestor(M,b)&&X.isElement(q)&&!e.isVoid(q)&&!e.isInline(q))};for(var I of $.nodes({children:r},{pass:P}))P(I)&&k.push(I);var T=[],z=[],K=[],j=!0,Y=!1;for(var[W]of k)X.isElement(W)&&!e.isInline(W)?(j=!1,Y=!0,z.push(W)):j?T.push(W):K.push(W);var[V]=f.nodes(e,{at:a,match:B=>ee.isText(B)||f.isInline(e,B),mode:"highest",voids:s}),[,oe]=V,se=f.isStart(e,a,oe),me=f.isEnd(e,a,oe),J=f.pathRef(e,D&&!K.length?_.next(p):p),ae=f.pathRef(e,me?_.next(oe):oe);R.splitNodes(e,{at:a,match:B=>Y?X.isElement(B)&&f.isBlock(e,B):ee.isText(B)||f.isInline(e,B),mode:Y?"lowest":"highest",always:Y&&(!u||T.length>0)&&(!D||K.length>0),voids:s});var _e=f.pathRef(e,!se||se&&me?_.next(oe):oe);if(R.insertNodes(e,T,{at:_e.current,match:B=>ee.isText(B)||f.isInline(e,B),mode:"highest",voids:s}),A&&!T.length&&z.length&&!K.length&&R.delete(e,{at:p,voids:s}),R.insertNodes(e,z,{at:J.current,match:B=>X.isElement(B)&&f.isBlock(e,B),mode:"lowest",voids:s}),R.insertNodes(e,K,{at:ae.current,match:B=>ee.isText(B)||f.isInline(e,B),mode:"highest",voids:s}),!n.at){var ve;if(K.length>0&&ae.current?ve=_.previous(ae.current):z.length>0&&J.current?ve=_.previous(J.current):_e.current&&(ve=_.previous(_e.current)),ve){var Ze=f.end(e,ve);R.select(e,Ze)}}_e.unref(),J.unref(),ae.unref()}}})},mg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:o}=e;if(o){if(n==="anchor")R.select(e,o.anchor);else if(n==="focus")R.select(e,o.focus);else if(n==="start"){var[s]=N.edges(o);R.select(e,s)}else if(n==="end"){var[,a]=N.edges(o);R.select(e,a)}}else return},pg=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},gg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:o=1,unit:s="character",reverse:a=!1}=r,{edge:i=null}=r;if(!!n){i==="start"&&(i=N.isBackward(n)?"focus":"anchor"),i==="end"&&(i=N.isBackward(n)?"anchor":"focus");var{anchor:c,focus:l}=n,d={distance:o,unit:s,ignoreNonSelectable:!0},h={};if(i==null||i==="anchor"){var g=a?f.before(e,c,d):f.after(e,c,d);g&&(h.anchor=g)}if(i==null||i==="focus"){var m=a?f.before(e,l,d):f.after(e,l,d);m&&(h.focus=m)}R.setSelection(e,h)}},hg=(t,e)=>{var{selection:r}=t;if(e=f.range(t,e),r){R.setSelection(t,e);return}if(!N.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(tt.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function Rl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function jl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var vg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=e,{edge:s="both"}=n;if(!!o){s==="start"&&(s=N.isBackward(o)?"focus":"anchor"),s==="end"&&(s=N.isBackward(o)?"anchor":"focus");var{anchor:a,focus:i}=o,c=s==="anchor"?a:i;R.setSelection(e,{[s==="anchor"?"anchor":"focus"]:jl(jl({},c),r)})}},Cg=(t,e)=>{var{selection:r}=t,n={},o={};if(!!r){for(var s in e)(s==="anchor"&&e.anchor!=null&&!ge.equals(e.anchor,r.anchor)||s==="focus"&&e.focus!=null&&!ge.equals(e.focus,r.focus)||s!=="anchor"&&s!=="focus"&&e[s]!==r[s])&&(n[s]=r[s],o[s]=e[s]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:o})}},Dg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{hanging:o=!1,voids:s=!1,mode:a="lowest"}=n,{at:i,match:c,select:l}=n;if($.isNode(r)&&(r=[r]),r.length!==0){var[d]=r;if(i||(i=Hs(e),l=!0),l==null&&(l=!1),N.isRange(i))if(o||(i=f.unhangRange(e,i,{voids:s})),N.isCollapsed(i))i=i.anchor;else{var[,h]=N.edges(i),g=f.pointRef(e,h);R.delete(e,{at:i}),i=g.unref()}if(ge.isPoint(i)){c==null&&(ee.isText(d)?c=P=>ee.isText(P):e.isInline(d)?c=P=>ee.isText(P)||f.isInline(e,P):c=P=>X.isElement(P)&&f.isBlock(e,P));var[m]=f.nodes(e,{at:i.path,match:c,mode:a,voids:s});if(m){var[,p]=m,u=f.pathRef(e,p),D=f.isEnd(e,i,p);R.splitNodes(e,{at:i,match:c,mode:a,voids:s});var A=u.unref();i=D?_.next(A):A}else return}var E=_.parent(i),x=i[i.length-1];if(!(!s&&f.void(e,{at:E}))){for(var w of r){var b=E.concat(x);x++,e.apply({type:"insert_node",path:b,node:w}),i=_.next(i)}if(i=_.previous(i),l){var k=f.end(e,i);k&&R.select(e,k)}}}})},Ag=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:o="lowest",voids:s=!1}=r,{match:a}=r;if(a==null&&(a=_.isPath(n)?Dn(e,n):w=>X.isElement(w)&&f.isBlock(e,w)),!!n){var i=f.nodes(e,{at:n,match:a,mode:o,voids:s}),c=Array.from(i,w=>{var[,b]=w;return f.pathRef(e,b)});for(var l of c){var d=l.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var h=f.node(e,_.parent(d)),[g,m]=h,p=d[d.length-1],{length:u}=g.children;if(u===1){var D=_.next(m);R.moveNodes(e,{at:d,to:D,voids:s}),R.removeNodes(e,{at:m,voids:s})}else if(p===0)R.moveNodes(e,{at:d,to:m,voids:s});else if(p===u-1){var A=_.next(m);R.moveNodes(e,{at:d,to:A,voids:s})}else{var E=_.next(d),x=_.next(m);R.splitNodes(e,{at:E,voids:s}),R.moveNodes(e,{at:d,to:x,voids:s})}}}})},Eg=["text"],_g=["children"],Hl=(t,e)=>{if(X.isElement(e)){var r=e;return f.isVoid(t,e)?!0:r.children.length===1?Hl(t,r.children[0]):!1}else return!f.isEditor(e)},Bg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:s=!1,voids:a=!1,mode:i="lowest"}=r;if(!!o){if(n==null)if(_.isPath(o)){var[c]=f.parent(e,o);n=z=>c.children.includes(z)}else n=z=>X.isElement(z)&&f.isBlock(e,z);if(!s&&N.isRange(o)&&(o=f.unhangRange(e,o,{voids:a})),N.isRange(o))if(N.isCollapsed(o))o=o.anchor;else{var[,l]=N.edges(o),d=f.pointRef(e,l);R.delete(e,{at:o}),o=d.unref(),r.at==null&&R.select(e,o)}var[h]=f.nodes(e,{at:o,match:n,voids:a,mode:i}),g=f.previous(e,{at:o,match:n,voids:a,mode:i});if(!(!h||!g)){var[m,p]=h,[u,D]=g;if(!(p.length===0||D.length===0)){var A=_.next(D),E=_.common(p,D),x=_.isSibling(p,D),w=Array.from(f.levels(e,{at:p}),z=>{var[K]=z;return K}).slice(E.length).slice(0,-1),b=f.above(e,{at:p,mode:"highest",match:z=>w.includes(z)&&Hl(e,z)}),k=b&&f.pathRef(e,b[1]),P,I;if(ee.isText(m)&&ee.isText(u)){var T=hr(m,Eg);I=u.text.length,P=T}else if(X.isElement(m)&&X.isElement(u)){var T=hr(m,_g);I=u.children.length,P=T}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(tt.stringify(m)," ").concat(tt.stringify(u)));x||R.moveNodes(e,{at:p,to:A,voids:a}),k&&R.removeNodes(e,{at:k.current,voids:a}),X.isElement(u)&&f.isEmpty(e,u)||ee.isText(u)&&u.text===""&&D[D.length-1]!==0?R.removeNodes(e,{at:D,voids:a}):e.apply({type:"merge_node",path:A,position:I,properties:P}),k&&k.unref()}}}})},xg=(t,e)=>{f.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:o="lowest",voids:s=!1}=e,{match:a}=e;if(!!n){a==null&&(a=_.isPath(n)?Dn(t,n):m=>X.isElement(m)&&f.isBlock(t,m));var i=f.pathRef(t,r),c=f.nodes(t,{at:n,match:a,mode:o,voids:s}),l=Array.from(c,m=>{var[,p]=m;return f.pathRef(t,p)});for(var d of l){var h=d.unref(),g=i.current;h.length!==0&&t.apply({type:"move_node",path:h,newPath:g}),i.current&&_.isSibling(g,h)&&_.isAfter(g,h)&&(i.current=_.next(i.current))}i.unref()}})},wg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:s="lowest"}=r,{at:a=e.selection,match:i}=r;if(!!a){i==null&&(i=_.isPath(a)?Dn(e,a):m=>X.isElement(m)&&f.isBlock(e,m)),!n&&N.isRange(a)&&(a=f.unhangRange(e,a,{voids:o}));var c=f.nodes(e,{at:a,match:i,mode:s,voids:o}),l=Array.from(c,m=>{var[,p]=m;return f.pathRef(e,p)});for(var d of l){var h=d.unref();if(h){var[g]=f.node(e,h);e.apply({type:"remove_node",path:h,node:g})}}}})},yg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{match:o,at:s=e.selection,compare:a,merge:i}=n,{hanging:c=!1,mode:l="lowest",split:d=!1,voids:h=!1}=n;if(!!s){if(o==null&&(o=_.isPath(s)?Dn(e,s):I=>X.isElement(I)&&f.isBlock(e,I)),!c&&N.isRange(s)&&(s=f.unhangRange(e,s,{voids:h})),d&&N.isRange(s)){if(N.isCollapsed(s)&&f.leaf(e,s.anchor)[0].text.length>0)return;var g=f.rangeRef(e,s,{affinity:"inward"}),[m,p]=N.edges(s),u=l==="lowest"?"lowest":"highest",D=f.isEnd(e,p,p.path);R.splitNodes(e,{at:p,match:o,mode:u,voids:h,always:!D});var A=f.isStart(e,m,m.path);R.splitNodes(e,{at:m,match:o,mode:u,voids:h,always:!A}),s=g.unref(),n.at==null&&R.select(e,s)}a||(a=(I,T)=>I!==T);for(var[E,x]of f.nodes(e,{at:s,match:o,mode:l,voids:h})){var w={},b={};if(x.length!==0){var k=!1;for(var P in r)P==="children"||P==="text"||a(r[P],E[P])&&(k=!0,E.hasOwnProperty(P)&&(w[P]=E[P]),i?r[P]!=null&&(b[P]=i(E[P],r[P])):r[P]!=null&&(b[P]=r[P]));k&&e.apply({type:"set_node",path:x,properties:w,newProperties:b})}}}})},Sg=(t,e)=>{if(N.isCollapsed(e))return e.anchor;var[,r]=N.edges(e),n=f.pointRef(t,r);return R.delete(t,{at:e}),n.unref()},Tg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:o=!1}=r,{match:s,at:a=e.selection,height:i=0,always:c=!1}=r;if(s==null&&(s=J=>X.isElement(J)&&f.isBlock(e,J)),N.isRange(a)&&(a=Sg(e,a)),_.isPath(a)){var l=a,d=f.point(e,l),[h]=f.parent(e,l);s=J=>J===h,i=d.path.length-l.length+1,a=d,c=!0}if(!!a){var g=f.pointRef(e,a,{affinity:"backward"}),m;try{var[p]=f.nodes(e,{at:a,match:s,mode:n,voids:o});if(!p)return;var u=f.void(e,{at:a,mode:"highest"}),D=0;if(!o&&u){var[A,E]=u;if(X.isElement(A)&&e.isInline(A)){var x=f.after(e,E);if(!x){var w={text:""},b=_.next(E);R.insertNodes(e,w,{at:b,voids:o}),x=f.point(e,b)}a=x,c=!0}var k=a.path.length-E.length;i=k+1,c=!0}m=f.pointRef(e,a);var P=a.path.length-i,[,I]=p,T=a.path.slice(0,P),z=i===0?a.offset:a.path[P]+D;for(var[K,j]of f.levels(e,{at:T,reverse:!0,voids:o})){var Y=!1;if(j.length<I.length||j.length===0||!o&&X.isElement(K)&&f.isVoid(e,K))break;var W=g.current,V=f.isEnd(e,W,j);if(c||!g||!f.isEdge(e,W,j)){Y=!0;var oe=$.extractProps(K);e.apply({type:"split_node",path:j,position:z,properties:oe})}z=j[j.length-1]+(Y||V?1:0)}if(r.at==null){var se=m.current||f.end(e,[]);R.select(e,se)}}finally{var me;g.unref(),(me=m)===null||me===void 0||me.unref()}}})},bg=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var o={};for(var s of r)o[s]=null;R.setNodes(e,o,n)},Fg=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:s=!1}=r,{at:a=e.selection,match:i}=r;if(!!a){i==null&&(i=_.isPath(a)?Dn(e,a):m=>X.isElement(m)&&f.isBlock(e,m)),_.isPath(a)&&(a=f.range(e,a));var c=N.isRange(a)?f.rangeRef(e,a):null,l=f.nodes(e,{at:a,match:i,mode:n,voids:s}),d=Array.from(l,m=>{var[,p]=m;return f.pathRef(e,p)}).reverse(),h=function(p){var u=p.unref(),[D]=f.node(e,u),A=f.range(e,u);o&&c&&(A=N.intersection(c.current,A)),R.liftNodes(e,{at:A,match:E=>X.isAncestor(D)&&D.children.includes(E),voids:s})};for(var g of d)h(g);c&&c.unref()}})};function zl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Wl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zl(Object(r),!0).forEach(function(n){pt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ng=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f.withoutNormalizing(e,()=>{var{mode:o="lowest",split:s=!1,voids:a=!1}=n,{match:i,at:c=e.selection}=n;if(!!c){if(i==null&&(_.isPath(c)?i=Dn(e,c):e.isInline(r)?i=A=>X.isElement(A)&&f.isInline(e,A)||ee.isText(A):i=A=>X.isElement(A)&&f.isBlock(e,A)),s&&N.isRange(c)){var[l,d]=N.edges(c),h=f.rangeRef(e,c,{affinity:"inward"});R.splitNodes(e,{at:d,match:i,voids:a}),R.splitNodes(e,{at:l,match:i,voids:a}),c=h.unref(),n.at==null&&R.select(e,c)}var g=Array.from(f.nodes(e,{at:c,match:e.isInline(r)?A=>X.isElement(A)&&f.isBlock(e,A):A=>f.isEditor(A),mode:"lowest",voids:a}));for(var[,m]of g){var p=N.isRange(c)?N.intersection(c,f.range(e,m)):c;if(!!p){var u=Array.from(f.nodes(e,{at:p,match:i,mode:o,voids:a}));if(u.length>0){var D=function(){var[A]=u,E=u[u.length-1],[,x]=A,[,w]=E;if(x.length===0&&w.length===0)return"continue";var b=_.equals(x,w)?_.parent(x):_.common(x,w),k=f.range(e,x,w),P=f.node(e,b),[I]=P,T=b.length+1,z=_.next(w.slice(0,T)),K=Wl(Wl({},r),{},{children:[]});R.insertNodes(e,K,{at:z,voids:a}),R.moveNodes(e,{at:k,match:j=>X.isAncestor(I)&&I.children.includes(j),to:z.concat(0),voids:a})}();if(D==="continue")continue}}}}})},Yl=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return np(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lp(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fp(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mp(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pp(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sp(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wp(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Sp(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return fg(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yp(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bp(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ap(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return sg(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return op(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ip(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return up(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cp(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dp(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return mg(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return dg(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pg(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gp(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hp(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vp(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Cp(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dp(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Wp(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ep(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _p(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bp(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xp(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Dg(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fp(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Np(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return kp(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Op(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Pp(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ip(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Lp(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Mp(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rp(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ag(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bg(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return gg(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return xg(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Up(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Gp(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Hp(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Yp(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qp(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Kp(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Vp(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $p(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Jp(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Zp(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xp(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Qp(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return eg(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ng(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return tg(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return rg(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return wg(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return hg(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yg(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ag(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return vg(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Cg(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Tg(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ig(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ug(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return lg(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bg(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fg(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ap(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cg(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ng(t,...n)}};return t};v();C();var kg={isHistory(t){return et(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||gr.isOperationList(t.redos[0].operations))&&(t.undos.length===0||gr.isOperationList(t.undos[0].operations))}};var Vs=new WeakMap,$s=new WeakMap,An={isHistoryEditor(t){return kg.isHistory(t.history)&&f.isEditor(t)},isMerging(t){return $s.get(t)},isSaving(t){return Vs.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=An.isMerging(t);$s.set(t,!1),e(),$s.set(t,r)},withoutSaving(t,e){var r=An.isSaving(t);Vs.set(t,!1),e(),Vs.set(t,r)}},ql=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:o}=n;if(o.length>0){var s=o[o.length-1];s.selectionBefore&&R.setSelection(e,s.selectionBefore),An.withoutSaving(e,()=>{f.withoutNormalizing(e,()=>{for(var a of s.operations)e.apply(a)})}),n.redos.pop(),e.writeHistory("undos",s)}},e.undo=()=>{var{history:n}=e,{undos:o}=n;if(o.length>0){var s=o[o.length-1];An.withoutSaving(e,()=>{f.withoutNormalizing(e,()=>{var a=s.operations.map(gr.inverse).reverse();for(var i of a)e.apply(i);s.selectionBefore&&R.setSelection(e,s.selectionBefore)})}),e.writeHistory("redos",s),n.undos.pop()}},e.apply=n=>{var{operations:o,history:s}=e,{undos:a}=s,i=a[a.length-1],c=i&&i.operations[i.operations.length-1],l=An.isSaving(e),d=An.isMerging(e);if(l==null&&(l=Pg(n)),l){if(d==null&&(i==null?d=!1:o.length!==0?d=!0:d=Og(n,c)),i&&d)i.operations.push(n);else{var h={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",h)}for(;a.length>100;)a.shift();s.redos=[]}r(n)},e.writeHistory=(n,o)=>{e.history[n].push(o)},e},Og=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&_.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&_.equals(t.path,e.path)),Pg=(t,e)=>t.type!=="set_selection";v();C();var Ca=G(Zl()),Lc=G(sm()),Mc=G(am()),O=G(te());v();C();v();C();function Xl(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Jl(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function Ks(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return Jl(r.overflowY,e)||Jl(r.overflowX,e)||function(n){var o=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(t)}return!1}function Yo(t,e,r,n,o,s,a,i){return s<t&&a>e||s>t&&a<e?0:s<=t&&i<=r||a>=e&&i>=r?s-t-n:a>e&&i<r||s<t&&i>r?a-e+o:0}var Zs=function(t,e){var r=window,n=e.scrollMode,o=e.block,s=e.inline,a=e.boundary,i=e.skipOverflowHiddenElements,c=typeof a=="function"?a:function(Fe){return Fe!==a};if(!Xl(t))throw new TypeError("Invalid target");for(var l,d,h=document.scrollingElement||document.documentElement,g=[],m=t;Xl(m)&&c(m);){if((m=(d=(l=m).parentElement)==null?l.getRootNode().host||null:d)===h){g.push(m);break}m!=null&&m===document.body&&Ks(m)&&!Ks(document.documentElement)||m!=null&&Ks(m,i)&&g.push(m)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,u=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,A=window.scrollY||pageYOffset,E=t.getBoundingClientRect(),x=E.height,w=E.width,b=E.top,k=E.right,P=E.bottom,I=E.left,T=o==="start"||o==="nearest"?b:o==="end"?P:b+x/2,z=s==="center"?I+w/2:s==="end"?k:I,K=[],j=0;j<g.length;j++){var Y=g[j],W=Y.getBoundingClientRect(),V=W.height,oe=W.width,se=W.top,me=W.right,J=W.bottom,ae=W.left;if(n==="if-needed"&&b>=0&&I>=0&&P<=u&&k<=p&&b>=se&&P<=J&&I>=ae&&k<=me)return K;var _e=getComputedStyle(Y),ve=parseInt(_e.borderLeftWidth,10),Ze=parseInt(_e.borderTopWidth,10),B=parseInt(_e.borderRightWidth,10),q=parseInt(_e.borderBottomWidth,10),M=0,Z=0,de="offsetWidth"in Y?Y.offsetWidth-Y.clientWidth-ve-B:0,ie="offsetHeight"in Y?Y.offsetHeight-Y.clientHeight-Ze-q:0,he="offsetWidth"in Y?Y.offsetWidth===0?0:oe/Y.offsetWidth:0,Pe="offsetHeight"in Y?Y.offsetHeight===0?0:V/Y.offsetHeight:0;if(h===Y)M=o==="start"?T:o==="end"?T-u:o==="nearest"?Yo(A,A+u,u,Ze,q,A+T,A+T+x,x):T-u/2,Z=s==="start"?z:s==="center"?z-p/2:s==="end"?z-p:Yo(D,D+p,p,ve,B,D+z,D+z+w,w),M=Math.max(0,M+A),Z=Math.max(0,Z+D);else{M=o==="start"?T-se-Ze:o==="end"?T-J+q+ie:o==="nearest"?Yo(se,J,V,Ze,q+ie,T,T+x,x):T-(se+V/2)+ie/2,Z=s==="start"?z-ae-ve:s==="center"?z-(ae+oe/2)+de/2:s==="end"?z-me+B+de:Yo(ae,me,oe,ve,B+de,z,z+w,w);var Oe=Y.scrollLeft,Ie=Y.scrollTop;T+=Ie-(M=Math.max(0,Math.min(Ie+M/Pe,Y.scrollHeight-V/Pe+ie))),z+=Oe-(Z=Math.max(0,Math.min(Oe+Z/he,Y.scrollWidth-oe/he+de)))}K.push({el:Y,top:M,left:Z})}return K};function Ql(t){return t===Object(t)&&Object.keys(t).length!==0}function Rg(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(n){var o=n.el,s=n.top,a=n.left;o.scroll&&r?o.scroll({top:s,left:a,behavior:e}):(o.scrollTop=s,o.scrollLeft=a)})}function jg(t){return t===!1?{block:"end",inline:"nearest"}:Ql(t)?t:{block:"start",inline:"nearest"}}function zg(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Ql(e)&&typeof e.behavior=="function")return e.behavior(r?Zs(t,e):[]);if(!!r){var n=jg(e);return Rg(Zs(t,n),n.behavior)}}var ec=zg;v();C();v();C();v();C();v();C();v();C();v();C();v();C();var Ot=[];var tc=function(){return Ot.some(function(t){return t.activeTargets.length>0})};v();C();var rc=function(){return Ot.some(function(t){return t.skippedTargets.length>0})};v();C();var nc="ResizeObserver loop completed with undelivered notifications.",oc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:nc}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=nc),window.dispatchEvent(t)};v();C();v();C();v();C();v();C();var Kr;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Kr||(Kr={}));v();C();v();C();var Gt=function(t){return Object.freeze(t)};var Xs=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Gt(this)}return t}();v();C();var Js=function(){function t(e,r,n,o){return this.x=e,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Gt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,o=e.top,s=e.right,a=e.bottom,i=e.left,c=e.width,l=e.height;return{x:r,y:n,top:o,right:s,bottom:a,left:i,width:c,height:l}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();v();C();var Hn=function(t){return t instanceof SVGElement&&"getBBox"in t},qo=function(t){if(Hn(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var o=t,s=o.offsetWidth,a=o.offsetHeight;return!(s||a||t.getClientRects().length)},Qs=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},sc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};v();C();var Zr=typeof window<"u"?window:{};var Vo=new WeakMap,ac=/auto|scroll/,Wg=/^tb|vertical/,Ug=/msie|trident/i.test(Zr.navigator&&Zr.navigator.userAgent),tr=function(t){return parseFloat(t||"0")},En=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new Xs((r?e:t)||0,(r?t:e)||0)},ic=Gt({devicePixelContentBoxSize:En(),borderBoxSize:En(),contentBoxSize:En(),contentRect:new Js(0,0,0,0)}),ea=function(t,e){if(e===void 0&&(e=!1),Vo.has(t)&&!e)return Vo.get(t);if(qo(t))return Vo.set(t,ic),ic;var r=getComputedStyle(t),n=Hn(t)&&t.ownerSVGElement&&t.getBBox(),o=!Ug&&r.boxSizing==="border-box",s=Wg.test(r.writingMode||""),a=!n&&ac.test(r.overflowY||""),i=!n&&ac.test(r.overflowX||""),c=n?0:tr(r.paddingTop),l=n?0:tr(r.paddingRight),d=n?0:tr(r.paddingBottom),h=n?0:tr(r.paddingLeft),g=n?0:tr(r.borderTopWidth),m=n?0:tr(r.borderRightWidth),p=n?0:tr(r.borderBottomWidth),u=n?0:tr(r.borderLeftWidth),D=h+l,A=c+d,E=u+m,x=g+p,w=i?t.offsetHeight-x-t.clientHeight:0,b=a?t.offsetWidth-E-t.clientWidth:0,k=o?D+E:0,P=o?A+x:0,I=n?n.width:tr(r.width)-k-b,T=n?n.height:tr(r.height)-P-w,z=I+D+b+E,K=T+A+w+x,j=Gt({devicePixelContentBoxSize:En(Math.round(I*devicePixelRatio),Math.round(T*devicePixelRatio),s),borderBoxSize:En(z,K,s),contentBoxSize:En(I,T,s),contentRect:new Js(h,c,I,T)});return Vo.set(t,j),j},$o=function(t,e,r){var n=ea(t,r),o=n.borderBoxSize,s=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(e){case Kr.DEVICE_PIXEL_CONTENT_BOX:return a;case Kr.BORDER_BOX:return o;default:return s}};var ta=function(){function t(e){var r=ea(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Gt([r.borderBoxSize]),this.contentBoxSize=Gt([r.contentBoxSize]),this.devicePixelContentBoxSize=Gt([r.devicePixelContentBoxSize])}return t}();v();C();var Ko=function(t){if(qo(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var uc=function(){var t=1/0,e=[];Ot.forEach(function(a){if(a.activeTargets.length!==0){var i=[];a.activeTargets.forEach(function(l){var d=new ta(l.target),h=Ko(l.target);i.push(d),l.lastReportedSize=$o(l.target,l.observedBox),h<t&&(t=h)}),e.push(function(){a.callback.call(a.observer,i,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var o=n[r];o()}return t};v();C();var ra=function(t){Ot.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(Ko(o.target)>t?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var lc=function(){var t=0;for(ra(t);tc();)t=uc(),ra(t);return rc()&&oc(),t>0};v();C();v();C();var na,cc=[],Gg=function(){return cc.splice(0).forEach(function(t){return t()})},dc=function(t){if(!na){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Gg()}).observe(r,n),na=function(){r.textContent="".concat(e?e--:e++)}}cc.push(t),na()};var fc=function(t){dc(function(){requestAnimationFrame(t)})};var Zo=0,Hg=function(){return!!Zo},Yg=250,qg={attributes:!0,characterData:!0,childList:!0,subtree:!0},mc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],pc=function(t){return t===void 0&&(t=0),Date.now()+t},oa=!1,Vg=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Yg),!oa){oa=!0;var n=pc(e);fc(function(){var o=!1;try{o=lc()}finally{if(oa=!1,e=n-pc(),!Hg())return;o?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,qg)};document.body?r():Zr.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),mc.forEach(function(r){return Zr.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),mc.forEach(function(r){return Zr.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),Xo=new Vg,sa=function(t){!Zo&&t>0&&Xo.start(),Zo+=t,!Zo&&Xo.stop()};v();C();var $g=function(t){return!Hn(t)&&!sc(t)&&getComputedStyle(t).display==="inline"},gc=function(){function t(e,r){this.target=e,this.observedBox=r||Kr.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=$o(this.target,this.observedBox,!0);return $g(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();v();C();var hc=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var Jo=new WeakMap,vc=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Yn=function(){function t(){}return t.connect=function(e,r){var n=new hc(e,r);Jo.set(e,n)},t.observe=function(e,r,n){var o=Jo.get(e),s=o.observationTargets.length===0;vc(o.observationTargets,r)<0&&(s&&Ot.push(o),o.observationTargets.push(new gc(r,n&&n.box)),sa(1),Xo.schedule())},t.unobserve=function(e,r){var n=Jo.get(e),o=vc(n.observationTargets,r),s=n.observationTargets.length===1;o>=0&&(s&&Ot.splice(Ot.indexOf(n),1),n.observationTargets.splice(o,1),sa(-1))},t.disconnect=function(e){var r=this,n=Jo.get(e);n.observationTargets.slice().forEach(function(o){return r.unobserve(e,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t}();var aa=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Yn.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Qs(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Yn.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Qs(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Yn.unobserve(this,e)},t.prototype.disconnect=function(){Yn.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var rs=G(_c()),Rc=G(im());function is(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qg(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Bn(t,e){if(t==null)return{};var r=Qg(t,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(r[n]=t[n]))}return r}var Da=(0,O.createContext)(null),Or=()=>{var t=(0,O.useContext)(Da);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},eh=parseInt(O.default.version.split(".")[0],10)>=17,th=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Bc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),St=typeof navigator<"u"&&/Android/.test(navigator.userAgent),ss=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Vn=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),rh=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),jc=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),nh=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),oh=St&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),sh=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),ah=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),ih=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),ns=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",br=(!nh||!oh)&&!rh&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Aa=new WeakMap,Ea=new WeakMap,zc=new WeakMap,os=new WeakMap,ca=new WeakMap,Kn=new WeakMap,Qr=new WeakMap,da=new WeakMap,us=new WeakMap,fa=new WeakMap,Xr=new WeakMap,Jr=new WeakMap,$n=new WeakMap,ma=new WeakMap,_a=new WeakMap,Ht=new WeakMap,vr=new WeakMap,Et=new WeakMap,Fr=new WeakMap,Nr=new WeakMap,Wc=new WeakMap,xn=Symbol("placeholder"),Uc=Symbol("mark-placeholder"),uh=globalThis.Text,Ba=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,lh=t=>kr(t)&&t.nodeType===8,Pt=t=>kr(t)&&t.nodeType===1,kr=t=>{var e=Ba(t);return!!e&&t instanceof e.Node},pa=t=>{var e=t&&t.anchorNode&&Ba(t.anchorNode);return!!e&&t instanceof e.Selection},Gc=t=>kr(t)&&t.nodeType===3,ch=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,dh=t=>{var[e,r]=t;if(Pt(e)&&e.childNodes.length){var n=r===e.childNodes.length,o=n?r-1:r;for([e,o]=Hc(e,o,n?"backward":"forward"),n=o<r;Pt(e)&&e.childNodes.length;){var s=n?e.childNodes.length-1:0;e=mh(e,s,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},fh=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Hc=(t,e,r)=>{for(var{childNodes:n}=t,o=n[e],s=e,a=!1,i=!1;(lh(o)||Pt(o)&&o.childNodes.length===0||Pt(o)&&o.getAttribute("contenteditable")==="false")&&!(a&&i);){if(s>=n.length){a=!0,s=e-1,r="backward";continue}if(s<0){i=!0,s=e+1,r="forward";continue}o=n[s],e=s,s+=r==="forward"?1:-1}return[o,e]},mh=(t,e,r)=>{var[n]=Hc(t,e,r);return n},Yc=t=>{var e="";if(Gc(t)&&t.nodeValue)return t.nodeValue;if(Pt(t)){for(var r of Array.from(t.childNodes))e+=Yc(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},ph=/data-slate-fragment="(.+?)"/m,gh=t=>{var e=t.getData("text/html"),[,r]=e.match(ph)||[];return r},xa=(t,e,r)=>{var{target:n}=e;if(Pt(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:o}=L.getWindow(t);if(o.contains(n))return L.hasDOMNode(t,n,{editable:!0});var s=r.find(a=>{var{addedNodes:i,removedNodes:c}=a;for(var l of i)if(l===n||l.contains(n))return!0;for(var d of c)if(d===n||d.contains(n))return!0});return!s||s===e?!1:xa(t,s,r)},hh=0,ga=class{constructor(){this.id="".concat(hh++)}},L={androidPendingDiffs:t=>Et.get(t),androidScheduleFlush:t=>{var e;(e=_a.get(t))===null||e===void 0||e()},blur:t=>{var e=L.toDOMNode(t,t),r=L.findDocumentOrShadowRoot(t);Xr.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=L.findDocumentOrShadowRoot(t),n=r.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),e&&R.deselect(t)},findDocumentOrShadowRoot:t=>{var e=L.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:o}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=L.toSlateNode(t,e.target),a=L.findPath(t,s);if(X.isElement(s)&&f.isVoid(t,s)){var i=o.getBoundingClientRect(),c=t.isInline(s)?r-i.left<i.left+i.width-r:n-i.top<i.top+i.height-n,l=f.point(t,a,{edge:c?"start":"end"}),d=c?f.before(t,l):f.after(t,l);if(d){var h=f.range(t,d);return h}}var g,{document:m}=L.getWindow(t);if(m.caretRangeFromPoint)g=m.caretRangeFromPoint(r,n);else{var p=m.caretPositionFromPoint(r,n);p&&(g=m.createRange(),g.setStart(p.offsetNode,p.offset),g.setEnd(p.offsetNode,p.offset))}if(!g)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=L.toSlateRange(t,g,{exactMatch:!1,suppressThrow:!1});return u},findKey:(t,e)=>{var r=da.get(e);return r||(r=new ga,da.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var o=Ea.get(n);if(o==null){if(f.isEditor(n))return r;break}var s=Aa.get(n);if(s==null)break;r.unshift(s),n=o}throw new Error("Unable to find the path for Slate node: ".concat(tt.stringify(e)))},focus:t=>{var e=L.toDOMNode(t,t),r=L.findDocumentOrShadowRoot(t);Xr.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=zc.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=n,s=L.toDOMNode(e,e),a;try{a=Pt(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return a?a.closest("[data-slate-editor]")===s&&(!o||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===s||!!a.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>kr(e)&&L.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return f.hasPath(t,r.path)&&f.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>L.hasEditableTarget(t,e)||L.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>kr(e)&&L.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Jr.get(t),isFocused:t=>!!Xr.get(t),isReadOnly:t=>!!fa.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(fa.get(t))return!1;var r=L.hasTarget(t,e)&&L.toSlateNode(t,e);return X.isElement(r)&&f.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=us.get(t),n=f.isEditor(e)?os.get(t):r?.get(L.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(tt.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=f.node(t,e.path),n=L.toDOMNode(t,r),o;f.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",a=Array.from(n.querySelectorAll(s)),i=0,c=0;c<a.length;c++){var l=a[c],d=l.childNodes[0];if(!(d==null||d.textContent==null)){var{length:h}=d.textContent,g=l.getAttribute("data-slate-length"),m=g==null?h:parseInt(g,10),p=i+m,u=a[c+1];if(e.offset===p&&u!==null&&u!==void 0&&u.hasAttribute("data-slate-mark-placeholder")){var D,A=u.childNodes[0];o=[A instanceof uh?A:u,(D=u.textContent)!==null&&D!==void 0&&D.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var E=Math.min(h,Math.max(0,e.offset-i));o=[d,E];break}i=p}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(tt.stringify(e)));return o},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,o=N.isBackward(e),s=L.toDOMPoint(t,r),a=N.isCollapsed(e)?s:L.toDOMPoint(t,n),i=L.getWindow(t),c=i.document.createRange(),[l,d]=o?a:s,[h,g]=o?s:a,m=Pt(l)?l:l.parentElement,p=!!m.getAttribute("data-slate-zero-width"),u=Pt(h)?h:h.parentElement,D=!!u.getAttribute("data-slate-zero-width");return c.setStart(l,p?1:d),c.setEnd(h,D?1:g),c},toSlateNode:(t,e)=>{var r=Pt(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?Kn.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,[s,a]=n?e:dh(e),i=s.parentNode,c=null,l=0;if(i){var d,h,g=L.toDOMNode(t,t),m=i.closest('[data-slate-void="true"]'),p=m&&g.contains(m)?m:null,u=i.closest("[data-slate-leaf]"),D=null;if(u){if(c=u.closest('[data-slate-node="text"]'),c){var A=L.getWindow(t),E=A.document.createRange();E.setStart(c,0),E.setEnd(s,a);var x=E.cloneContents(),w=[...Array.prototype.slice.call(x.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(x.querySelectorAll("[contenteditable=false]"))];w.forEach(W=>{if(St&&!n&&W.hasAttribute("data-slate-zero-width")&&W.textContent.length>0&&W.textContext!=="\uFEFF"){W.textContent.startsWith("\uFEFF")&&(W.textContent=W.textContent.slice(1));return}W.parentNode.removeChild(W)}),l=x.textContent.length,D=c}}else if(p){for(var b=p.querySelectorAll("[data-slate-leaf]"),k=0;k<b.length;k++){var P=b[k];if(L.hasDOMNode(t,P)){u=P;break}}u?(c=u.closest('[data-slate-node="text"]'),D=u,l=D.textContent.length,D.querySelectorAll("[data-slate-zero-width]").forEach(W=>{l-=W.textContent.length})):l=1}D&&l===D.textContent.length&&St&&D.getAttribute("data-slate-zero-width")==="z"&&(d=D.textContent)!==null&&d!==void 0&&d.startsWith("\uFEFF")&&(i.hasAttribute("data-slate-zero-width")||ss&&(h=D.textContent)!==null&&h!==void 0&&h.endsWith(`

`))&&l--}if(St&&!c&&!n){var I=i.hasAttribute("data-slate-node")?i:i.closest("[data-slate-node]");if(I&&L.hasDOMNode(t,I,{editable:!0})){var T=L.toSlateNode(t,I),{path:z,offset:K}=f.start(t,L.findPath(t,T));return I.querySelector("[data-slate-leaf]")||(K=a),{path:z,offset:K}}}if(!c){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var j=L.toSlateNode(t,c),Y=L.findPath(t,j);return{path:Y,offset:l}},toSlateRange:(t,e,r)=>{var{exactMatch:n,suppressThrow:o}=r,s=pa(e)?e.anchorNode:e.startContainer,a,i,c,l,d;if(s&&(pa(e)?(a=e.anchorNode,i=e.anchorOffset,c=e.focusNode,l=e.focusOffset,jc&&fh(a)?d=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:d=e.isCollapsed):(a=e.startContainer,i=e.startOffset,c=e.endContainer,l=e.endOffset,d=e.collapsed)),a==null||c==null||i==null||l==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in c&&c.getAttribute("contenteditable")==="false"){var h;c=a,l=((h=a.textContent)===null||h===void 0?void 0:h.length)||0}var g=L.toSlatePoint(t,[a,i],{exactMatch:n,suppressThrow:o});if(!g)return null;var m=d?g:L.toSlatePoint(t,[c,l],{exactMatch:n,suppressThrow:o});if(!m)return null;if(ss&&!d&&a!==c){var p=f.isEnd(t,g,g.path),u=f.isStart(t,m,m.path);if(p){var D=f.after(t,g);g=D||g}if(u){var A=f.before(t,m);m=A||m}}var E={anchor:g,focus:m};return N.isExpanded(E)&&N.isForward(E)&&Pt(c)&&f.void(t,{at:E.focus,mode:"highest"})&&(E=f.unhangRange(t,E,{voids:!0})),E}};function vh(t,e){var{path:r,diff:n}=e;if(!f.hasPath(t,r))return!1;var o=$.get(t,r);if(!ee.isText(o))return!1;if(n.start!==o.text.length||n.text.length===0)return o.text.slice(n.start,n.start+n.text.length)===n.text;var s=_.next(r);if(!f.hasPath(t,s))return!1;var a=$.get(t,s);return ee.isText(a)&&a.text.startsWith(n.text)}function qc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((o,s)=>o.slice(0,s.start)+s.text+o.slice(s.end),t)}function Ch(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function Dh(t,e,r){for(var n=Math.min(t.length,e.length,r),o=0;o<n;o++)if(t.charAt(t.length-o-1)!==e.charAt(e.length-o-1))return o;return n}function Vc(t,e){var{start:r,end:n,text:o}=e,s=t.slice(r,n),a=Ch(s,o),i=Math.min(s.length-a,o.length-a),c=Dh(s,o,i),l={start:r+a,end:n-c,text:o.slice(a,o.length-c)};return l.start===l.end&&l.text.length===0?null:l}function Ah(t,e,r){var n=Math.min(e.start,r.start),o=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=qc(t,e,r),a=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-o),i=s.slice(n,a),c=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return Vc(t,{start:n,end:c,text:i})}function Eh(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function ha(t,e){var{path:r,offset:n}=e;if(!f.hasPath(t,r))return null;var o=$.get(t,r);if(!ee.isText(o))return null;var s=f.above(t,{match:i=>X.isElement(i)&&f.isBlock(t,i),at:r});if(!s)return null;for(;n>o.text.length;){var a=f.next(t,{at:r,match:ee.isText});if(!a||!_.isDescendant(a[1],s[1]))return null;n-=o.text.length,o=a[0],r=a[1]}return{path:r,offset:n}}function xc(t,e){var r=ha(t,e.anchor);if(!r)return null;if(N.isCollapsed(e))return{anchor:r,focus:r};var n=ha(t,e.focus);return n?{anchor:r,focus:n}:null}function va(t,e,r){var n=Et.get(t),o=n?.find(d=>{var{path:h}=d;return _.equals(h,e.path)});if(!o||e.offset<=o.diff.start)return ge.transform(e,r,{affinity:"backward"});var{diff:s}=o;if(e.offset<=s.start+s.text.length){var a={path:e.path,offset:s.start},i=ge.transform(a,r,{affinity:"backward"});return i?{path:i.path,offset:i.offset+e.offset-s.start}:null}var c={path:e.path,offset:e.offset-s.text.length+s.end-s.start},l=ge.transform(c,r,{affinity:"backward"});return l?r.type==="split_node"&&_.equals(r.path,e.path)&&c.offset<r.position&&s.start<r.position?l:{path:l.path,offset:l.offset+s.text.length-s.end+s.start}:null}function wc(t,e,r){var n=va(t,e.anchor,r);if(!n)return null;if(N.isCollapsed(e))return{anchor:n,focus:n};var o=va(t,e.focus,r);return o?{anchor:n,focus:o}:null}function _h(t,e){var{path:r,diff:n,id:o}=t;switch(e.type){case"insert_text":return!_.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:o,path:r};case"remove_text":return!_.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:o,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:o,path:r};case"split_node":return!_.equals(e.path,r)||e.position>=n.end?{diff:n,id:o,path:_.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:o,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:o,path:_.transform(r,e,{affinity:"forward"})};case"merge_node":return _.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:o,path:_.transform(r,e)}:{diff:n,id:o,path:_.transform(r,e)}}var s=_.transform(r,e);return s?{diff:n,path:s,id:o}:null}function yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yc(Object(r),!0).forEach(function(n){is(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Bh=25,xh=200,wh=function(){},yh=t=>t?.constructor.name==="DataTransfer";function Sh(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,o=!1,s=null,a=null,i=null,c=0,l=!1,d=()=>{var j=Nr.get(e);if(Nr.delete(e),j){var{selection:Y}=e,W=xc(e,j);W&&(!Y||!N.equals(W,Y))&&R.select(e,W)}},h=()=>{var j=Fr.get(e);if(Fr.delete(e),!!j){if(j.at){var Y=ge.isPoint(j.at)?ha(e,j.at):xc(e,j.at);if(!Y)return;var W=f.range(e,Y);(!e.selection||!N.equals(e.selection,W))&&R.select(e,Y)}j.run()}},g=()=>{if(a&&(clearTimeout(a),a=null),i&&(clearTimeout(i),i=null),!w()&&!x()){d();return}o||(o=!0,setTimeout(()=>o=!1)),x()&&(o="action");var j=e.selection&&f.rangeRef(e,e.selection,{affinity:"forward"});vr.set(e,e.marks),wh("flush",Fr.get(e),Et.get(e));for(var Y=w(),W;W=(V=Et.get(e))===null||V===void 0?void 0:V[0];){var V,oe,se=Ht.get(e);se!==void 0&&(Ht.delete(e),e.marks=se),se&&l===!1&&(l=null);var me=Eh(W);(!e.selection||!N.equals(e.selection,me))&&R.select(e,me),W.diff.text?f.insertText(e,W.diff.text):f.deleteFragment(e),Et.set(e,(oe=Et.get(e))===null||oe===void 0?void 0:oe.filter(_e=>{var{id:ve}=_e;return ve!==W.id})),vh(e,W)||(Y=!1,Fr.delete(e),vr.delete(e),o="action",Nr.delete(e),r.cancel(),n.cancel(),j?.unref())}var J=j?.unref();if(J&&!Nr.get(e)&&(!e.selection||!N.equals(J,e.selection))&&R.select(e,J),x()){h();return}Y&&r(),r.flush(),n.flush(),d();var ae=vr.get(e);vr.delete(e),ae!==void 0&&(e.marks=ae,e.onChange())},m=j=>{s&&clearTimeout(s),s=setTimeout(()=>{Jr.set(e,!1),g()},Bh)},p=j=>{Jr.set(e,!0),s&&(clearTimeout(s),s=null)},u=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,W=ca.get(e);if(!!W){if(w()||Y){W.style.display="none";return}W.style.removeProperty("display")}},D=(j,Y)=>{var W,V=(W=Et.get(e))!==null&&W!==void 0?W:[];Et.set(e,V);var oe=$.leaf(e,j),se=V.findIndex(ae=>_.equals(ae.path,j));if(se<0){var me=Vc(oe.text,Y);me&&V.push({path:j,diff:Y,id:c++}),u();return}var J=Ah(oe.text,V[se].diff,Y);if(!J){V.splice(se,1),u();return}V[se]=es(es({},V[se]),{},{diff:J})},A=function(Y){var{at:W}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l=!1,Nr.delete(e),r.cancel(),n.cancel(),x()&&g(),Fr.set(e,{at:W,run:Y}),i=setTimeout(g)},E=j=>{var Y;a&&(clearTimeout(a),a=null);var{inputType:W}=j,V=null,oe=j.dataTransfer||j.data||void 0;l!==!1&&W!=="insertText"&&W!=="insertCompositionText"&&(l=!1);var[se]=j.getTargetRanges();se&&(V=L.toSlateRange(e,se,{exactMatch:!1,suppressThrow:!0}));var me=L.getWindow(e),J=me.getSelection();if(!V&&J&&(se=J,V=L.toSlateRange(e,J,{exactMatch:!1,suppressThrow:!0})),V=(Y=V)!==null&&Y!==void 0?Y:e.selection,!!V){var ae=!0;if(W.startsWith("delete")){if(N.isExpanded(V)){var[_e,ve]=N.edges(V),Ze=$.leaf(e,_e.path);if(Ze.text.length===_e.offset&&ve.offset===0){var B=f.next(e,{at:_e.path,match:ee.isText});B&&_.equals(B[1],ve.path)&&(V={anchor:ve,focus:ve})}}var q=W.endsWith("Backward")?"backward":"forward",[M,Z]=N.edges(V),[de,ie]=f.leaf(e,M.path),he={text:"",start:M.offset,end:Z.offset},Pe=Et.get(e),Oe=Pe?.find(Wt=>_.equals(Wt.path,ie)),Ie=Oe?[Oe.diff,he]:[he],Fe=qc(de.text,...Ie);if(Fe.length===0&&(ae=!1),N.isExpanded(V)){if(ae&&_.equals(V.anchor.path,V.focus.path)){var st={path:V.anchor.path,offset:M.offset},ft=f.range(e,st,st);return P(ft),D(V.anchor.path,{text:"",end:Z.offset,start:M.offset})}return A(()=>f.deleteFragment(e,{direction:q}),{at:V})}}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return A(()=>f.deleteFragment(e),{at:V});case"deleteContent":case"deleteContentForward":{var{anchor:Xe}=V;if(ae&&N.isCollapsed(V)){var bt=$.leaf(e,Xe.path);if(Xe.offset<bt.text.length)return D(Xe.path,{text:"",start:Xe.offset,end:Xe.offset+1})}return A(()=>f.deleteForward(e),{at:V})}case"deleteContentBackward":{var jt,{anchor:mt}=V,Ft=pa(se)?se.isCollapsed:!!((jt=se)!==null&&jt!==void 0&&jt.collapsed);return ae&&Ft&&N.isCollapsed(V)&&mt.offset>0?D(mt.path,{text:"",start:mt.offset-1,end:mt.offset}):A(()=>f.deleteBackward(e),{at:V})}case"deleteEntireSoftLine":return A(()=>{f.deleteBackward(e,{unit:"line"}),f.deleteForward(e,{unit:"line"})},{at:V});case"deleteHardLineBackward":return A(()=>f.deleteBackward(e,{unit:"block"}),{at:V});case"deleteSoftLineBackward":return A(()=>f.deleteBackward(e,{unit:"line"}),{at:V});case"deleteHardLineForward":return A(()=>f.deleteForward(e,{unit:"block"}),{at:V});case"deleteSoftLineForward":return A(()=>f.deleteForward(e,{unit:"line"}),{at:V});case"deleteWordBackward":return A(()=>f.deleteBackward(e,{unit:"word"}),{at:V});case"deleteWordForward":return A(()=>f.deleteForward(e,{unit:"word"}),{at:V});case"insertLineBreak":return A(()=>f.insertSoftBreak(e),{at:V});case"insertParagraph":return A(()=>f.insertBreak(e),{at:V});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(yh(oe))return A(()=>L.insertData(e,oe),{at:V});var De=oe??"";if(Ht.get(e)&&(De=De.replace("\uFEFF","")),W==="insertText"&&/.*\n.*\n$/.test(De)&&(De=De.slice(0,-1)),De.includes(`
`))return A(()=>{var Wt=De.split(`
`);Wt.forEach((jr,ao)=>{jr&&f.insertText(e,jr),ao!==Wt.length-1&&f.insertSoftBreak(e)})},{at:V});if(_.equals(V.anchor.path,V.focus.path)){var[cr,un]=N.edges(V),ot={start:cr.offset,end:un.offset,text:De};if(De&&l&&W==="insertCompositionText"){var zt=l.start+l.text.search(/\S|$/),so=ot.start+ot.text.search(/\S|$/);so===zt+1&&ot.end===l.start+l.text.length?(ot.start-=1,l=null,z()):l=!1}else W==="insertText"?l===null?l=ot:l&&N.isCollapsed(V)&&l.end+l.text.length===cr.offset?l=es(es({},l),{},{text:l.text+De}):l=!1:l=!1;if(ae){D(cr.path,ot);return}}return A(()=>f.insertText(e,De),{at:V})}}}},x=()=>!!Fr.get(e),w=()=>{var j;return!!((j=Et.get(e))!==null&&j!==void 0&&j.length)},b=()=>x()||w(),k=()=>o,P=j=>{Nr.set(e,j),a&&(clearTimeout(a),a=null);var{selection:Y}=e;if(!!j){var W=!Y||!_.equals(Y.anchor.path,j.anchor.path),V=!Y||!_.equals(Y.anchor.path.slice(0,-1),j.anchor.path.slice(0,-1));(W&&l||V)&&(l=!1),(W||w())&&(a=setTimeout(g,xh))}},I=()=>{(x()||!w())&&g()},T=j=>{w()||(u(!0),setTimeout(u))},z=()=>{x()||(i=setTimeout(g))},K=j=>{if(!(w()||x())&&j.some(W=>xa(e,W,j))){var Y;(Y=Wc.get(e))===null||Y===void 0||Y()}};return{flush:g,scheduleFlush:z,hasPendingDiffs:w,hasPendingAction:x,hasPendingChanges:b,isFlushing:k,handleUserSelect:P,handleCompositionEnd:m,handleCompositionStart:p,handleDOMBeforeInput:E,handleKeyDown:T,handleDomMutations:K,handleInput:I}}function Th(){var t=(0,O.useRef)(!1);return(0,O.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var Zn=ns?O.useLayoutEffect:O.useEffect;function bh(t,e,r){var[n]=(0,O.useState)(()=>new MutationObserver(e));Zn(()=>{n.takeRecords()}),(0,O.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var Fh=["node"];function Sc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Nh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sc(Object(r),!0).forEach(function(n){is(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var kh={subtree:!0,childList:!0,characterData:!0},Oh=St?t=>{var{node:e}=t,r=Bn(t,Fh);if(!St)return null;var n=Or(),o=Th(),[s]=(0,O.useState)(()=>Sh(Nh({editor:n},r)));return bh(e,s.handleDomMutations,kh),_a.set(n,s.scheduleFlush),o&&s.flush(),s}:()=>null,Ph=["anchor","focus"],Ih=["anchor","focus"],Lh=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),$c=(t,e)=>{var r=Bn(t,Ph),n=Bn(e,Ih);return t[xn]===e[xn]&&Lh(r,n)},Mh=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!N.equals(n,o)||!$c(n,o))return!1}return!0},Rh=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.anchor.offset!==o.anchor.offset||n.focus.offset!==o.focus.offset||!$c(n,o))return!1}return!0},jh=t=>{var{isLast:e,leaf:r,parent:n,text:o}=t,s=Or(),a=L.findPath(s,o),i=_.parent(a),c=r[Uc]===!0;return s.isVoid(n)?O.default.createElement(la,{length:$.string(n).length}):r.text===""&&n.children[n.children.length-1]===o&&!s.isInline(n)&&f.string(s,i)===""?O.default.createElement(la,{isLineBreak:!0,isMarkPlaceholder:c}):r.text===""?O.default.createElement(la,{isMarkPlaceholder:c}):e&&r.text.slice(-1)===`
`?O.default.createElement(Tc,{isTrailing:!0,text:r.text}):O.default.createElement(Tc,{text:r.text})},Tc=t=>{var{text:e,isTrailing:r=!1}=t,n=(0,O.useRef)(null),o=()=>"".concat(e??"").concat(r?`
`:""),[s]=(0,O.useState)(o);return Zn(()=>{var a=o();n.current&&n.current.textContent!==a&&(n.current.textContent=a)}),O.default.createElement(zh,{ref:n},s)},zh=(0,O.memo)((0,O.forwardRef)((t,e)=>O.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),la=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,o={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(o["data-slate-mark-placeholder"]=!0),O.default.createElement("span",Object.assign({},o),!St||!r?"\uFEFF":null,r?O.default.createElement("br",null):null)};function Wh(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function bc(t){t.current&&(clearTimeout(t.current),t.current=null)}var Uh=t=>{var{leaf:e,isLast:r,text:n,parent:o,renderPlaceholder:s,renderLeaf:a=E=>O.default.createElement(Hh,Object.assign({},E))}=t,i=Or(),c=(0,O.useRef)(null),l=(0,O.useRef)(null),[d,h]=(0,O.useState)(!1),g=(0,O.useRef)(null),m=(0,O.useCallback)(E=>{if(Wh(c,E==null),E==null){var x;ca.delete(i),(x=e.onPlaceholderResize)===null||x===void 0||x.call(e,null)}else{if(ca.set(i,E),!c.current){var w=window.ResizeObserver||aa;c.current=new w(()=>{var b;(b=e.onPlaceholderResize)===null||b===void 0||b.call(e,E)})}c.current.observe(E),l.current=E}},[l,e,i]),p=O.default.createElement(jh,{isLast:r,leaf:e,parent:o,text:n}),u=e[xn];if((0,O.useEffect)(()=>(u?g.current||(g.current=setTimeout(()=>{h(!0),g.current=null},300)):(bc(g),h(!1)),()=>bc(g)),[u,h]),u&&d){var D={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Vn?"inherit":void 0},contentEditable:!1,ref:m}};p=O.default.createElement(O.default.Fragment,null,s(D),p)}var A={"data-slate-leaf":!0};return a({attributes:A,children:p,leaf:e,text:n})},Gh=O.default.memo(Uh,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&ee.equals(e.leaf,t.leaf)&&e.leaf[xn]===t.leaf[xn]),Hh=t=>{var{attributes:e,children:r}=t;return O.default.createElement("span",Object.assign({},e),r)},Yh=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:o,renderLeaf:s,text:a}=t,i=Or(),c=(0,O.useRef)(null),l=ee.decorations(a,e),d=L.findKey(i,a),h=[],g=0;g<l.length;g++){var m=l[g];h.push(O.default.createElement(Gh,{isLast:r&&g===l.length-1,key:"".concat(d.id,"-").concat(g),renderPlaceholder:o,leaf:m,text:a,parent:n,renderLeaf:s}))}var p=(0,O.useCallback)(u=>{var D=us.get(i);u?(D?.set(d,u),Qr.set(a,u),Kn.set(u,a)):(D?.delete(d),Qr.delete(a),c.current&&Kn.delete(c.current)),c.current=u},[c,i,d,a]);return O.default.createElement("span",{"data-slate-node":"text",ref:p},h)},Kc=O.default.memo(Yh,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Rh(e.decorations,t.decorations)),qh=t=>{var{decorations:e,element:r,renderElement:n=E=>O.default.createElement($h,Object.assign({},E)),renderPlaceholder:o,renderLeaf:s,selection:a}=t,i=Or(),c=Xh(),l=i.isInline(r),d=L.findKey(i,r),h=(0,O.useCallback)(E=>{var x=us.get(i);E?(x?.set(d,E),Qr.set(r,E),Kn.set(E,r)):(x?.delete(d),Qr.delete(r))},[i,d,r]),g=Xc({decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:s,selection:a}),m={"data-slate-node":"element",ref:h};if(l&&(m["data-slate-inline"]=!0),!l&&f.hasInlines(i,r)){var p=$.string(r),u=(0,Ca.default)(p);u==="rtl"&&(m.dir=u)}if(f.isVoid(i,r)){m["data-slate-void"]=!0,!c&&l&&(m.contentEditable=!1);var D=l?"span":"div",[[A]]=$.texts(r);g=O.default.createElement(D,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},O.default.createElement(Kc,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:A})),Aa.set(A,0),Ea.set(A,r)}return n({attributes:m,children:g,element:r})},Vh=O.default.memo(qh,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&Mh(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&N.equals(t.selection,e.selection))),$h=t=>{var{attributes:e,children:r,element:n}=t,o=Or(),s=o.isInline(n)?"span":"div";return O.default.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},Zc=(0,O.createContext)(()=>[]),Kh=()=>(0,O.useContext)(Zc),Zh=(0,O.createContext)(!1);var Xc=t=>{for(var{decorations:e,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:s,selection:a}=t,i=Kh(),c=Or(),l=L.findPath(c,r),d=[],h=X.isElement(r)&&!c.isInline(r)&&f.hasInlines(c,r),g=0;g<r.children.length;g++){var m=l.concat(g),p=r.children[g],u=L.findKey(c,p),D=f.range(c,m),A=a&&N.intersection(D,a),E=i([p,m]);for(var x of e){var w=N.intersection(x,D);w&&E.push(w)}X.isElement(p)?d.push(O.default.createElement(Zh.Provider,{key:"provider-".concat(u.id),value:!!A},O.default.createElement(Vh,{decorations:E,element:p,key:u.id,renderElement:n,renderPlaceholder:o,renderLeaf:s,selection:A}))):d.push(O.default.createElement(Kc,{decorations:E,key:u.id,isLast:h&&g===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:s,text:p})),Aa.set(p,g),Ea.set(p,r)}return d},Jc=(0,O.createContext)(!1),Xh=()=>(0,O.useContext)(Jc),Qc=(0,O.createContext)(null),Jh=()=>{var t=(0,O.useContext)(Qc);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function Qh(){var t=Or(),e=(0,O.useRef)(!1),r=(0,O.useRef)(0),n=(0,O.useCallback)(()=>{if(!e.current){e.current=!0;var o=L.getWindow(t);o.cancelAnimationFrame(r.current),r.current=o.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,O.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var ev=3,tv={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},rv={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},nv={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Me=t=>{var e=tv[t],r=rv[t],n=nv[t],o=e&&(0,rs.isKeyHotkey)(e),s=r&&(0,rs.isKeyHotkey)(r),a=n&&(0,rs.isKeyHotkey)(n);return i=>!!(o&&o(i)||Bc&&s&&s(i)||!Bc&&a&&a(i))},je={isBold:Me("bold"),isCompose:Me("compose"),isMoveBackward:Me("moveBackward"),isMoveForward:Me("moveForward"),isDeleteBackward:Me("deleteBackward"),isDeleteForward:Me("deleteForward"),isDeleteLineBackward:Me("deleteLineBackward"),isDeleteLineForward:Me("deleteLineForward"),isDeleteWordBackward:Me("deleteWordBackward"),isDeleteWordForward:Me("deleteWordForward"),isExtendBackward:Me("extendBackward"),isExtendForward:Me("extendForward"),isExtendLineBackward:Me("extendLineBackward"),isExtendLineForward:Me("extendLineForward"),isItalic:Me("italic"),isMoveLineBackward:Me("moveLineBackward"),isMoveLineForward:Me("moveLineForward"),isMoveWordBackward:Me("moveWordBackward"),isMoveWordForward:Me("moveWordForward"),isRedo:Me("redo"),isSoftBreak:Me("insertSoftBreak"),isSplitBlock:Me("splitBlock"),isTransposeCharacter:Me("transposeCharacter"),isUndo:Me("undo")},ov=(t,e)=>{var r=[],n=()=>{r=[]},o=a=>{if(!!e.current){var i=a.filter(c=>xa(t,c,a));r.push(...i)}};function s(){r.length>0&&(r.reverse().forEach(a=>{a.type!=="characterData"&&(a.removedNodes.forEach(i=>{a.target.insertBefore(i,a.nextSibling)}),a.addedNodes.forEach(i=>{a.target.removeChild(i)}))}),n())}return{registerMutations:o,restoreDOM:s,clear:n}},sv={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},as=class extends O.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,sv)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=ov(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,o=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(o!=null&&o.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(o)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};as.contextType=Da;var av=St?as:t=>{var{children:e}=t;return O.default.createElement(O.default.Fragment,null,e)},iv=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],uv=["text"];function Fc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function _n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fc(Object(r),!0).forEach(function(n){is(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var lv=t=>O.default.createElement(O.default.Fragment,null,Xc(t)),ed=t=>{var e=(0,O.useCallback)(B=>O.default.createElement(cv,Object.assign({},B)),[]),{autoFocus:r,decorate:n=dv,onDOMBeforeInput:o,placeholder:s,readOnly:a=!1,renderElement:i,renderLeaf:c,renderPlaceholder:l=e,scrollSelectionIntoView:d=fv,style:h={},as:g="div",disableDefaultStyles:m=!1}=t,p=Bn(t,iv),u=Jh(),[D,A]=(0,O.useState)(!1),E=(0,O.useRef)(null),x=(0,O.useRef)([]),[w,b]=(0,O.useState)(),{onUserInput:k,receivedUserInput:P}=Qh(),[,I]=(0,O.useReducer)(B=>B+1,0);Wc.set(u,I),fa.set(u,a);var T=(0,O.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,O.useEffect)(()=>{E.current&&r&&E.current.focus()},[r]);var z=(0,O.useRef)(),K=(0,O.useMemo)(()=>(0,Mc.default)(()=>{var B=z.current;if((St||!L.isComposing(u))&&(!T.isUpdatingSelection||B!=null&&B.isFlushing())&&!T.isDraggingInternally){var q=L.findDocumentOrShadowRoot(u),{activeElement:M}=q,Z=L.toDOMNode(u,u),de=q.getSelection();if(M===Z?(T.latestElement=M,Xr.set(u,!0)):Xr.delete(u),!de)return R.deselect(u);var{anchorNode:ie,focusNode:he}=de,Pe=L.hasEditableTarget(u,ie)||L.isTargetInsideNonReadonlyVoid(u,ie),Oe=L.hasEditableTarget(u,he)||L.isTargetInsideNonReadonlyVoid(u,he);if(Pe&&Oe){var Ie=L.toSlateRange(u,de,{exactMatch:!1,suppressThrow:!0});Ie&&(!L.isComposing(u)&&!(B!=null&&B.hasPendingChanges())&&!(B!=null&&B.isFlushing())?R.select(u,Ie):B?.handleUserSelect(Ie))}a&&(!Pe||!Oe)&&R.deselect(u)}},100),[u,a,T]),j=(0,O.useMemo)(()=>(0,Lc.default)(K,0),[K]);z.current=Oh({node:E,onDOMSelectionChange:K,scheduleOnDOMSelectionChange:j}),Zn(()=>{var B,q,M;E.current&&(M=Ba(E.current))?(zc.set(u,M),os.set(u,E.current),Qr.set(u,E.current),Kn.set(E.current,u)):Qr.delete(u);var{selection:Z}=u,de=L.findDocumentOrShadowRoot(u),ie=de.getSelection();if(!(!ie||!L.isFocused(u)||(B=z.current)!==null&&B!==void 0&&B.hasPendingAction())){var he=st=>{var ft=ie.type!=="None";if(!(!Z&&!ft)){var Xe=os.get(u),bt=!1;if(Xe.contains(ie.anchorNode)&&Xe.contains(ie.focusNode)&&(bt=!0),ft&&bt&&Z&&!st){var jt=L.toSlateRange(u,ie,{exactMatch:!0,suppressThrow:!0});if(jt&&N.equals(jt,Z)){var mt;if(!T.hasMarkPlaceholder)return;var{anchorNode:Ft}=ie;if(Ft!=null&&(mt=Ft.parentElement)!==null&&mt!==void 0&&mt.hasAttribute("data-slate-mark-placeholder"))return}}if(Z&&!L.hasRange(u,Z)){u.selection=L.toSlateRange(u,ie,{exactMatch:!1,suppressThrow:!0});return}T.isUpdatingSelection=!0;var De=Z&&L.toDOMRange(u,Z);return De?(N.isBackward(Z)?ie.setBaseAndExtent(De.endContainer,De.endOffset,De.startContainer,De.startOffset):ie.setBaseAndExtent(De.startContainer,De.startOffset,De.endContainer,De.endOffset),d(u,De)):ie.removeAllRanges(),De}},Pe=he(),Oe=((q=z.current)===null||q===void 0?void 0:q.isFlushing())==="action";if(!St||!Oe){setTimeout(()=>{if(Pe&&ss){var st=L.toDOMNode(u,u);st.focus()}T.isUpdatingSelection=!1});return}var Ie=null,Fe=requestAnimationFrame(()=>{if(Oe){var st=ft=>{try{var Xe=L.toDOMNode(u,u);Xe.focus(),he(ft)}catch{}};st(),Ie=setTimeout(()=>{st(!0),T.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Fe),Ie&&clearTimeout(Ie)}}});var Y=(0,O.useCallback)(B=>{if(k(),!a&&L.hasEditableTarget(u,B.target)&&!mv(B,o)){var q;if(z.current)return z.current.handleDOMBeforeInput(B);j.flush(),K.flush();var{selection:M}=u,{inputType:Z}=B,de=B.dataTransfer||B.data||void 0,ie=Z==="insertCompositionText"||Z==="deleteCompositionText";if(ie&&L.isComposing(u))return;var he=!1;if(Z==="insertText"&&M&&N.isCollapsed(M)&&B.data&&B.data.length===1&&/[a-z ]/i.test(B.data)&&M.anchor.offset!==0){var Pe,Oe;he=!0,u.marks&&(he=!1);var{anchor:Ie}=M,[Fe,st]=L.toDOMPoint(u,Ie),ft=(Pe=Fe.parentElement)===null||Pe===void 0?void 0:Pe.closest("a"),Xe=L.getWindow(u);if(he&&ft&&L.hasDOMNode(u,ft)){var bt,jt=Xe?.document.createTreeWalker(ft,NodeFilter.SHOW_TEXT).lastChild();jt===Fe&&((bt=jt.textContent)===null||bt===void 0?void 0:bt.length)===st&&(he=!1)}if(he&&Fe.parentElement&&(Xe==null||(Oe=Xe.getComputedStyle(Fe.parentElement))===null||Oe===void 0?void 0:Oe.whiteSpace)==="pre"){var mt=f.above(u,{at:Ie.path,match:zt=>X.isElement(zt)&&f.isBlock(u,zt)});mt&&$.string(mt[0]).includes("	")&&(he=!1)}}if(!Z.startsWith("delete")||Z.startsWith("deleteBy")){var[Ft]=B.getTargetRanges();if(Ft){var De=L.toSlateRange(u,Ft,{exactMatch:!1,suppressThrow:!1});if(!M||!N.equals(M,De)){he=!1;var cr=!ie&&u.selection&&f.rangeRef(u,u.selection);R.select(u,De),cr&&$n.set(u,cr)}}}if(ie)return;if(he||B.preventDefault(),M&&N.isExpanded(M)&&Z.startsWith("delete")){var un=Z.endsWith("Backward")?"backward":"forward";f.deleteFragment(u,{direction:un});return}switch(Z){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{f.deleteFragment(u);break}case"deleteContent":case"deleteContentForward":{f.deleteForward(u);break}case"deleteContentBackward":{f.deleteBackward(u);break}case"deleteEntireSoftLine":{f.deleteBackward(u,{unit:"line"}),f.deleteForward(u,{unit:"line"});break}case"deleteHardLineBackward":{f.deleteBackward(u,{unit:"block"});break}case"deleteSoftLineBackward":{f.deleteBackward(u,{unit:"line"});break}case"deleteHardLineForward":{f.deleteForward(u,{unit:"block"});break}case"deleteSoftLineForward":{f.deleteForward(u,{unit:"line"});break}case"deleteWordBackward":{f.deleteBackward(u,{unit:"word"});break}case"deleteWordForward":{f.deleteForward(u,{unit:"word"});break}case"insertLineBreak":f.insertSoftBreak(u);break;case"insertParagraph":{f.insertBreak(u);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Z==="insertFromComposition"&&L.isComposing(u)&&(A(!1),Jr.set(u,!1)),de?.constructor.name==="DataTransfer"?L.insertData(u,de):typeof de=="string"&&(he?x.current.push(()=>f.insertText(u,de)):f.insertText(u,de));break}}var ot=(q=$n.get(u))===null||q===void 0?void 0:q.unref();$n.delete(u),ot&&(!u.selection||!N.equals(u.selection,ot))&&R.select(u,ot)}},[u,K,k,o,a,j]),W=(0,O.useCallback)(B=>{B==null?(K.cancel(),j.cancel(),os.delete(u),Qr.delete(u),E.current&&br&&E.current.removeEventListener("beforeinput",Y)):br&&B.addEventListener("beforeinput",Y),E.current=B},[K,j,u,Y]);Zn(()=>{var B=L.getWindow(u);return B.document.addEventListener("selectionchange",j),()=>{B.document.removeEventListener("selectionchange",j)}},[j]);var V=n([u,[]]),oe=s&&u.children.length===1&&Array.from($.texts(u)).length===1&&$.string(u)===""&&!D,se=(0,O.useCallback)(B=>{if(B&&oe){var q;b((q=B.getBoundingClientRect())===null||q===void 0?void 0:q.height)}else b(void 0)},[oe]);if(oe){var me=f.start(u,[]);V.push({[xn]:!0,placeholder:s,onPlaceholderResize:se,anchor:me,focus:me})}var{marks:J}=u;if(T.hasMarkPlaceholder=!1,u.selection&&N.isCollapsed(u.selection)&&J){var{anchor:ae}=u.selection,_e=$.leaf(u,ae.path),ve=Bn(_e,uv);if(!ee.equals(_e,J,{loose:!0})){T.hasMarkPlaceholder=!0;var Ze=Object.fromEntries(Object.keys(ve).map(B=>[B,null]));V.push(_n(_n(_n({[Uc]:!0},Ze),J),{},{anchor:ae,focus:ae}))}}return(0,O.useEffect)(()=>{setTimeout(()=>{var{selection:B}=u;if(B){var{anchor:q}=B,M=$.leaf(u,q.path);if(J&&!ee.equals(M,J,{loose:!0})){Ht.set(u,J);return}}Ht.delete(u)})}),O.default.createElement(Jc.Provider,{value:a},O.default.createElement(Zc.Provider,{value:n},O.default.createElement(av,{node:E,receivedUserInput:P},O.default.createElement(g,Object.assign({role:a?void 0:"textbox","aria-multiline":a?void 0:!0},p,{spellCheck:br||!ns?p.spellCheck:!1,autoCorrect:br||!ns?p.autoCorrect:"false",autoCapitalize:br||!ns?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:W,style:_n(_n({},m?{}:_n({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},w?{minHeight:w}:{})),h),onBeforeInput:(0,O.useCallback)(B=>{if(!br&&!a&&!gt(B,p.onBeforeInput)&&L.hasSelectableTarget(u,B.target)&&(B.preventDefault(),!L.isComposing(u))){var q=B.data;f.insertText(u,q)}},[p.onBeforeInput,u,a]),onInput:(0,O.useCallback)(B=>{if(!gt(B,p.onInput)){if(z.current){z.current.handleInput();return}for(var q of x.current)q();x.current=[]}},[p.onInput]),onBlur:(0,O.useCallback)(B=>{if(!(a||T.isUpdatingSelection||!L.hasSelectableTarget(u,B.target)||gt(B,p.onBlur))){var q=L.findDocumentOrShadowRoot(u);if(T.latestElement!==q.activeElement){var{relatedTarget:M}=B,Z=L.toDOMNode(u,u);if(M!==Z&&!(Pt(M)&&M.hasAttribute("data-slate-spacer"))){if(M!=null&&kr(M)&&L.hasDOMNode(u,M)){var de=L.toSlateNode(u,M);if(X.isElement(de)&&!u.isVoid(de))return}if(Vn){var ie=q.getSelection();ie?.removeAllRanges()}Xr.delete(u)}}}},[a,T.isUpdatingSelection,T.latestElement,u,p.onBlur]),onClick:(0,O.useCallback)(B=>{if(L.hasTarget(u,B.target)&&!gt(B,p.onClick)&&kr(B.target)){var q=L.toSlateNode(u,B.target),M=L.findPath(u,q);if(!f.hasPath(u,M)||$.get(u,M)!==q)return;if(B.detail===ev&&M.length>=1){var Z=M;if(!(X.isElement(q)&&f.isBlock(u,q))){var de,ie=f.above(u,{match:ft=>X.isElement(ft)&&f.isBlock(u,ft),at:M});Z=(de=ie?.[1])!==null&&de!==void 0?de:M.slice(0,1)}var he=f.range(u,Z);R.select(u,he);return}if(a)return;var Pe=f.start(u,M),Oe=f.end(u,M),Ie=f.void(u,{at:Pe}),Fe=f.void(u,{at:Oe});if(Ie&&Fe&&_.equals(Ie[1],Fe[1])){var st=f.range(u,Pe);R.select(u,st)}}},[u,p.onClick,a]),onCompositionEnd:(0,O.useCallback)(B=>{if(L.hasSelectableTarget(u,B.target)){var q;if(L.isComposing(u)&&(A(!1),Jr.set(u,!1)),(q=z.current)===null||q===void 0||q.handleCompositionEnd(B),gt(B,p.onCompositionEnd)||St)return;if(!Vn&&!sh&&!th&&!ih&&!ah&&B.data){var M=Ht.get(u);Ht.delete(u),M!==void 0&&(vr.set(u,u.marks),u.marks=M),f.insertText(u,B.data);var Z=vr.get(u);vr.delete(u),Z!==void 0&&(u.marks=Z)}}},[p.onCompositionEnd,u]),onCompositionUpdate:(0,O.useCallback)(B=>{L.hasSelectableTarget(u,B.target)&&!gt(B,p.onCompositionUpdate)&&(L.isComposing(u)||(A(!0),Jr.set(u,!0)))},[p.onCompositionUpdate,u]),onCompositionStart:(0,O.useCallback)(B=>{if(L.hasSelectableTarget(u,B.target)){var q;if((q=z.current)===null||q===void 0||q.handleCompositionStart(B),gt(B,p.onCompositionStart)||St)return;A(!0);var{selection:M}=u;if(M){if(N.isExpanded(M)){f.deleteFragment(u);return}var Z=f.above(u,{match:he=>X.isElement(he)&&f.isInline(u,he),mode:"highest"});if(Z){var[,de]=Z;if(f.isEnd(u,M.anchor,de)){var ie=f.after(u,de);R.setSelection(u,{anchor:ie,focus:ie})}}}}},[p.onCompositionStart,u]),onCopy:(0,O.useCallback)(B=>{L.hasSelectableTarget(u,B.target)&&!gt(B,p.onCopy)&&!Nc(B)&&(B.preventDefault(),L.setFragmentData(u,B.clipboardData,"copy"))},[p.onCopy,u]),onCut:(0,O.useCallback)(B=>{if(!a&&L.hasSelectableTarget(u,B.target)&&!gt(B,p.onCut)&&!Nc(B)){B.preventDefault(),L.setFragmentData(u,B.clipboardData,"cut");var{selection:q}=u;if(q)if(N.isExpanded(q))f.deleteFragment(u);else{var M=$.parent(u,q.anchor.path);f.isVoid(u,M)&&R.delete(u)}}},[a,u,p.onCut]),onDragOver:(0,O.useCallback)(B=>{if(L.hasTarget(u,B.target)&&!gt(B,p.onDragOver)){var q=L.toSlateNode(u,B.target);X.isElement(q)&&f.isVoid(u,q)&&B.preventDefault()}},[p.onDragOver,u]),onDragStart:(0,O.useCallback)(B=>{if(!a&&L.hasTarget(u,B.target)&&!gt(B,p.onDragStart)){var q=L.toSlateNode(u,B.target),M=L.findPath(u,q),Z=X.isElement(q)&&f.isVoid(u,q)||f.void(u,{at:M,voids:!0});if(Z){var de=f.range(u,M);R.select(u,de)}T.isDraggingInternally=!0,L.setFragmentData(u,B.dataTransfer,"drag")}},[a,u,p.onDragStart,T]),onDrop:(0,O.useCallback)(B=>{if(!a&&L.hasTarget(u,B.target)&&!gt(B,p.onDrop)){B.preventDefault();var q=u.selection,M=L.findEventRange(u,B),Z=B.dataTransfer;R.select(u,M),T.isDraggingInternally&&q&&!N.equals(q,M)&&!f.void(u,{at:M,voids:!0})&&R.delete(u,{at:q}),L.insertData(u,Z),L.isFocused(u)||L.focus(u)}T.isDraggingInternally=!1},[a,u,p.onDrop,T]),onDragEnd:(0,O.useCallback)(B=>{!a&&T.isDraggingInternally&&p.onDragEnd&&L.hasTarget(u,B.target)&&p.onDragEnd(B),T.isDraggingInternally=!1},[a,T,p,u]),onFocus:(0,O.useCallback)(B=>{if(!a&&!T.isUpdatingSelection&&L.hasEditableTarget(u,B.target)&&!gt(B,p.onFocus)){var q=L.toDOMNode(u,u),M=L.findDocumentOrShadowRoot(u);if(T.latestElement=M.activeElement,ss&&B.target!==q){q.focus();return}Xr.set(u,!0)}},[a,T,u,p.onFocus]),onKeyDown:(0,O.useCallback)(B=>{if(!a&&L.hasEditableTarget(u,B.target)){var q;(q=z.current)===null||q===void 0||q.handleKeyDown(B);var{nativeEvent:M}=B;if(L.isComposing(u)&&M.isComposing===!1&&(Jr.set(u,!1),A(!1)),gt(B,p.onKeyDown)||L.isComposing(u))return;var{selection:Z}=u,de=u.children[Z!==null?Z.focus.path[0]:0],ie=(0,Ca.default)($.string(de))==="rtl";if(je.isRedo(M)){B.preventDefault();var he=u;typeof he.redo=="function"&&he.redo();return}if(je.isUndo(M)){B.preventDefault();var Pe=u;typeof Pe.undo=="function"&&Pe.undo();return}if(je.isMoveLineBackward(M)){B.preventDefault(),R.move(u,{unit:"line",reverse:!0});return}if(je.isMoveLineForward(M)){B.preventDefault(),R.move(u,{unit:"line"});return}if(je.isExtendLineBackward(M)){B.preventDefault(),R.move(u,{unit:"line",edge:"focus",reverse:!0});return}if(je.isExtendLineForward(M)){B.preventDefault(),R.move(u,{unit:"line",edge:"focus"});return}if(je.isMoveBackward(M)){B.preventDefault(),Z&&N.isCollapsed(Z)?R.move(u,{reverse:!ie}):R.collapse(u,{edge:"start"});return}if(je.isMoveForward(M)){B.preventDefault(),Z&&N.isCollapsed(Z)?R.move(u,{reverse:ie}):R.collapse(u,{edge:"end"});return}if(je.isMoveWordBackward(M)){B.preventDefault(),Z&&N.isExpanded(Z)&&R.collapse(u,{edge:"focus"}),R.move(u,{unit:"word",reverse:!ie});return}if(je.isMoveWordForward(M)){B.preventDefault(),Z&&N.isExpanded(Z)&&R.collapse(u,{edge:"focus"}),R.move(u,{unit:"word",reverse:ie});return}if(br){if((jc||Vn)&&Z&&(je.isDeleteBackward(M)||je.isDeleteForward(M))&&N.isCollapsed(Z)){var Oe=$.parent(u,Z.anchor.path);if(X.isElement(Oe)&&f.isVoid(u,Oe)&&(f.isInline(u,Oe)||f.isBlock(u,Oe))){B.preventDefault(),f.deleteBackward(u,{unit:"block"});return}}}else{if(je.isBold(M)||je.isItalic(M)||je.isTransposeCharacter(M)){B.preventDefault();return}if(je.isSoftBreak(M)){B.preventDefault(),f.insertSoftBreak(u);return}if(je.isSplitBlock(M)){B.preventDefault(),f.insertBreak(u);return}if(je.isDeleteBackward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"backward"}):f.deleteBackward(u);return}if(je.isDeleteForward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"forward"}):f.deleteForward(u);return}if(je.isDeleteLineBackward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"backward"}):f.deleteBackward(u,{unit:"line"});return}if(je.isDeleteLineForward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"forward"}):f.deleteForward(u,{unit:"line"});return}if(je.isDeleteWordBackward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"backward"}):f.deleteBackward(u,{unit:"word"});return}if(je.isDeleteWordForward(M)){B.preventDefault(),Z&&N.isExpanded(Z)?f.deleteFragment(u,{direction:"forward"}):f.deleteForward(u,{unit:"word"});return}}}},[a,u,p.onKeyDown]),onPaste:(0,O.useCallback)(B=>{!a&&L.hasEditableTarget(u,B.target)&&!gt(B,p.onPaste)&&(!br||ch(B.nativeEvent)||Vn)&&(B.preventDefault(),L.insertData(u,B.clipboardData))},[a,u,p.onPaste])}),O.default.createElement(lv,{decorations:V,node:u,renderElement:i,renderPlaceholder:l,renderLeaf:c,selection:u.selection})))))},cv=t=>{var{attributes:e,children:r}=t;return O.default.createElement("span",Object.assign({},e),r,St&&O.default.createElement("br",null))},dv=()=>[],fv=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&N.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),ec(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},gt=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Nc=t=>kr(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),mv=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},pv=(0,O.createContext)(!1);var gv=(0,O.createContext)({});function hv(t){var e=(0,O.useRef)([]).current,r=(0,O.useRef)({editor:t}).current,n=(0,O.useCallback)(s=>{r.editor=s,e.forEach(a=>a(s))},[e,r]),o=(0,O.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:o,onChange:n}}var vv=["editor","children","onChange","value"],td=t=>{var{editor:e,children:r,onChange:n,value:o}=t,s=Bn(t,vv),a=(0,O.useRef)(!1),[i,c]=O.default.useState(()=>{if(!$.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(tt.stringify(o)));if(!f.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(tt.stringify(e)));return e.children=o,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:l,onChange:d}=hv(e),h=(0,O.useCallback)(()=>{n&&n(e.children),c(p=>({v:p.v+1,editor:e})),d(e)},[e,d,n]);(0,O.useEffect)(()=>(ma.set(e,h),()=>{ma.set(e,()=>{}),a.current=!0}),[e,h]);var[g,m]=(0,O.useState)(L.isFocused(e));return(0,O.useEffect)(()=>{m(L.isFocused(e))},[e]),Zn(()=>{var p=()=>m(L.isFocused(e));return eh?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),O.default.createElement(gv.Provider,{value:l},O.default.createElement(Qc.Provider,{value:i},O.default.createElement(Da.Provider,{value:i.editor},O.default.createElement(pv.Provider,{value:g},r))))};var kc=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Oc=(t,e,r)=>{var n=L.toDOMRange(t,e).getBoundingClientRect(),o=L.toDOMRange(t,r).getBoundingClientRect();return kc(n,o)&&kc(o,n)},Cv=(t,e)=>{var r=f.range(t,N.end(e)),n=Array.from(f.positions(t,{at:e})),o=0,s=n.length,a=Math.floor(s/2);if(Oc(t,f.range(t,n[o]),r))return f.range(t,n[o],r);if(n.length<2)return f.range(t,n[n.length-1],r);for(;a!==n.length&&a!==o;)Oc(t,f.range(t,n[a]),r)?s=a:o=a,a=Math.floor((o+s)/2);return f.range(t,n[s],r)};function Pc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ic(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pc(Object(r),!0).forEach(function(n){is(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:o,onChange:s,deleteBackward:a,addMark:i,removeMark:c}=n;return us.set(n,new WeakMap),n.addMark=(l,d)=>{var h,g;(h=_a.get(n))===null||h===void 0||h(),!Ht.get(n)&&(g=Et.get(n))!==null&&g!==void 0&&g.length&&Ht.set(n,null),vr.delete(n),i(l,d)},n.removeMark=l=>{var d;!Ht.get(n)&&(d=Et.get(n))!==null&&d!==void 0&&d.length&&Ht.set(n,null),vr.delete(n),c(l)},n.deleteBackward=l=>{if(l!=="line")return a(l);if(n.selection&&N.isCollapsed(n.selection)){var d=f.above(n,{match:p=>X.isElement(p)&&f.isBlock(n,p),at:n.selection});if(d){var[,h]=d,g=f.range(n,h,n.selection.anchor),m=Cv(n,g);N.isCollapsed(m)||R.delete(n,{at:m})}}},n.apply=l=>{var d=[],h=Et.get(n);if(h!=null&&h.length){var g=h.map(k=>_h(k,l)).filter(Boolean);Et.set(n,g)}var m=Nr.get(n);m&&Nr.set(n,wc(n,m,l));var p=Fr.get(n);if(p!=null&&p.at){var u=ge.isPoint(p?.at)?va(n,p.at,l):wc(n,p.at,l);Fr.set(n,u?Ic(Ic({},p),{},{at:u}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...ts(n,l.path));break}case"set_selection":{var D;(D=$n.get(n))===null||D===void 0||D.unref(),$n.delete(n);break}case"insert_node":case"remove_node":{d.push(...ts(n,_.parent(l.path)));break}case"merge_node":{var A=_.previous(l.path);d.push(...ts(n,A));break}case"move_node":{var E=_.common(_.parent(l.path),_.parent(l.newPath));d.push(...ts(n,E));break}}o(l);for(var[x,w]of d){var[b]=f.node(n,x);da.set(b,w)}},n.setFragmentData=l=>{var{selection:d}=n;if(!!d){var[h,g]=N.edges(d),m=f.void(n,{at:h.path}),p=f.void(n,{at:g.path});if(!(N.isCollapsed(d)&&!m)){var u=L.toDOMRange(n,d),D=u.cloneContents(),A=D.childNodes[0];if(D.childNodes.forEach(z=>{z.textContent&&z.textContent.trim()!==""&&(A=z)}),p){var[E]=p,x=u.cloneRange(),w=L.toDOMNode(n,E);x.setEndAfter(w),D=x.cloneContents()}if(m&&(A=D.querySelector("[data-slate-spacer]")),Array.from(D.querySelectorAll("[data-slate-zero-width]")).forEach(z=>{var K=z.getAttribute("data-slate-zero-width")==="n";z.textContent=K?`
`:""}),Gc(A)){var b=A.ownerDocument.createElement("span");b.style.whiteSpace="pre",b.appendChild(A),D.appendChild(b),A=b}var k=n.getFragment(),P=JSON.stringify(k),I=window.btoa(encodeURIComponent(P));A.setAttribute("data-slate-fragment",I),l.setData("application/".concat(r),I);var T=D.ownerDocument.createElement("div");return T.appendChild(D),T.setAttribute("hidden","true"),D.ownerDocument.body.appendChild(T),l.setData("text/html",T.innerHTML),l.setData("text/plain",Yc(T)),D.ownerDocument.body.removeChild(T),l}}},n.insertData=l=>{n.insertFragmentData(l)||n.insertTextData(l)},n.insertFragmentData=l=>{var d=l.getData("application/".concat(r))||gh(l);if(d){var h=decodeURIComponent(window.atob(d)),g=JSON.parse(h);return n.insertFragment(g),!0}return!1},n.insertTextData=l=>{var d=l.getData("text/plain");if(d){var h=d.split(/\r\n|\r|\n/),g=!1;for(var m of h)g&&R.splitNodes(n,{always:!0}),n.insertText(m),g=!0;return!0}return!1},n.onChange=l=>{Rc.default.unstable_batchedUpdates(()=>{var d=ma.get(n);d&&d(),s(l)})},n},ts=(t,e)=>{var r=[];for(var[n,o]of f.levels(t,{at:e})){var s=L.findKey(t,n);r.push([o,s])}return r};v();C();var It=G(te());ze();v();C();var Re={"retina-border-basic":"_retina-border-basic_1taj3_1",retinaBorderBasic:"_retina-border-basic_1taj3_1","batch-send-address":"_batch-send-address_1taj3_29",batchSendAddress:"_batch-send-address_1taj3_29","batch-send-address-dialog-core":"_batch-send-address-dialog-core_1taj3_58",batchSendAddressDialogCore:"_batch-send-address-dialog-core_1taj3_58","batch-send-address-input":"_batch-send-address-input_1taj3_63",batchSendAddressInput:"_batch-send-address-input_1taj3_63","batch-send-address-accordion":"_batch-send-address-accordion_1taj3_76",batchSendAddressAccordion:"_batch-send-address-accordion_1taj3_76","batch-send-address-accordion-header":"_batch-send-address-accordion-header_1taj3_79",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_1taj3_79","batch-send-address-accordion-content":"_batch-send-address-accordion-content_1taj3_83",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_1taj3_83","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_1taj3_87",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_1taj3_87","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_1taj3_92",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_1taj3_92",upload:"_upload_1taj3_132",uploadIcon:"_uploadIcon_1taj3_147",uploadText:"_uploadText_1taj3_150",addressPre:"_addressPre_1taj3_153",selectAddress:"_selectAddress_1taj3_157",selectedAddressInfo:"_selectedAddressInfo_1taj3_162",addBtn:"_addBtn_1taj3_170","circle-icon":"_circle-icon_1taj3_174",circleIcon:"_circle-icon_1taj3_174",accountTitle:"_accountTitle_1taj3_181",accountTag:"_accountTag_1taj3_185"};var Dv=({type:t,title:e,children:r,dropError:n,actionTitle:o,addressErrors:s,onSelectWalletAddress:a})=>{let i=(0,It.useMemo)(()=>{if(n)return n;if(!s?.length)return null;let c=Nn(s,"error");if(c?.length>1)return S("wallet_extension_sending_text_address_error");let l=c[0];return l?.errorText?l?.errorText:S(l?.error,l?.args)},[n,s]);return It.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"12px"},It.default.createElement(y.FlexBox,{justify:"space-between",align:y.ALIGN.center},It.default.createElement(Ae.Text,{strong:700,size:Ae.SIZE.lg,style:{lineHeight:"24px"}},e,It.default.createElement(Ye,{className:Re.circleIcon,icon:"okx-wallet-plugin-question-mark",size:Ye.SIZE.xs,tooltip:{maxWidth:"300px",placement:Ct?.DIRECTION.topRight,title:It.default.createElement("pre",{className:Re.addressPre},S("wallet_extension_sending_tooltip_address_condition"))}})),It.default.createElement(y.Space,{direction:y.DIRECTION.horizontal,space:"6px",align:y.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{a(t)}},It.default.createElement(Ye,{icon:"okx-wallet-plugin-tier-guide",size:Ye.SIZE.md}),It.default.createElement(Ae.Text,{strong:!0,size:Ae.SIZE.sm,style:{lineHeight:"16px"}},o))),r,i&&It.default.createElement(Ae.Text,{size:Ae.SIZE.xs,type:Ae.TYPE.danger},i))},ls=Dv;v();C();var wn=G(te()),ud=G(Ve());v();C();var cs=G(te());v();C();var nd=G(Lu());var Av=(t,e={})=>new Promise((r,n)=>{nd.default.parse(t,{complete:o=>{r(o)},error:o=>{n(o)},...e})}),Ev=(t,e={})=>Av(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),od=Ev;v();C();var sd=G(te());function _v(t,{onDrop:e,onDragLeave:r,onDragEnter:n,onDragOver:o}){(0,sd.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",n),t.addEventListener("dragover",o)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",n),t.removeEventListener("dragover",o))}),[e,r,n,o,t])}var wa=_v;function Bv(t){let e=t.scrollHeight;t.scrollTo(0,e)}var xv=1024,wv=1024*xv,ad=1,yv=wv*ad;function Sv(t,{onChange:e,slateRef:r,onError:n}={}){let[o,s]=(0,cs.useState)(!1),a=h=>{r?.current&&(r.current.style.pointerEvents=h?"none":"auto")},i=H(h=>{h.preventDefault()});wa(document,{onDrop:i,onDragEnter:i,onDragLeave:i,onDragOver:i});let c=H(h=>{a(!1),s(!1);let g=h.dataTransfer?.files?.[0];if(!!g){if(g.type!=="text/csv"){n?.(S("wallet_extension_reminder_text_wrong_format"));return}if(g.size>yv){n?.(S("wallet_extension_reminder_text_large_doc",{num:ad}));return}od(g).then(m=>{e?.(m)}).catch(()=>{e?.([])})}});(0,cs.useEffect)(()=>{o&&t.current&&Bv(t.current)},[o,t]);let l=H(()=>{a(!0),s(!0)}),d=H(()=>{a(!1),s(!1)});return wa(t.current,{onDrop:c,onDragEnter:l,onDragLeave:d}),{show:o}}var id=Sv;function Tv(t){let{onChange:e,dropRef:r,slateRef:n,onError:o}=t,s=(0,wn.useRef)(null),{show:a}=id(r,{onChange:e,slateRef:n,onError:o});return a?wn.default.createElement(y.Box,{ref:s,className:Re.upload},wn.default.createElement(ut,{className:(0,ud.default)("okx-wallet-plugin-add",Re.uploadIcon)}),wn.default.createElement(y.Box,{className:Re.uploadText},S("wallet_extension_reminder_dropzone_input_address"))):void 0}var ld=Tv;v();C();ze();var bv=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],cd=(t=[])=>!t||!t?.length?bv:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],dd=t=>{let[{children:e}]=t;return e.map(({children:r})=>lo(r?.[0]?.text))},fd=(t=[],e=[])=>!e.some(r=>!t.includes(r)),md=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[n,o]=r;if(X.isElement(n)&&n.type==="numbered-list"){for(let[s,a]of $.children(t,o))if(X.isElement(s)&&s.type==="numbered-list"){R.unwrapNodes(t,{at:a});return}}e(r)},t};var Fv="Enter",Nv=({attributes:t,children:e,element:r})=>{let{error:n}=r;switch(r.type){case"list-item":return Ne.default.createElement("li",{style:{color:n?"red":void 0},...t},e);case"numbered-list":return Ne.default.createElement("ol",{...t},e);default:return Ne.default.createElement("p",{...t},e)}},kv=({attributes:t,children:e,leaf:r})=>{let{error:n}=r;return Ne.default.createElement("span",{style:{color:n?"red":void 0},...t},e)},Ov=(0,Ne.forwardRef)(({type:t,title:e,dropError:r,actionTitle:n,placeholder:o,value:s=[],onChange:a,addressErrors:i,onSelectWalletAddress:c,onDrop:l,onDropError:d},h)=>{let g=(0,Ne.useRef)(0),m=(0,Ne.useCallback)(w=>Ne.default.createElement(Nv,{...w}),[]),p=(0,Ne.useCallback)(w=>Ne.default.createElement(kv,{...w}),[]),u=(0,Ne.useMemo)(()=>md(ql(rd(Yl()))),[]),D=(0,Ne.useRef)(null),A=(0,Ne.useRef)(null);(0,Ne.useEffect)(()=>{u?.selection?.focus&&(g.current=u?.selection?.focus?.path?.[1])},[u.selection]),(0,Ne.useEffect)(()=>{s.forEach((w,b)=>{R.setNodes(u,{error:!1},{at:[0,b,0]})}),i?.forEach(({at:w})=>{io(w)||R.setNodes(u,{error:!0},{at:[0,w,0]})})},[i]);let E=H(w=>{let{path:b}=u.selection?.focus??{path:null},k=i?.find(I=>I.at===b?.[1])?.address,P=w?.[0]?.children?.[b?.[1]]?.children?.[0]?.text;(k&&P!==k||!P)&&R.setNodes(u,{error:!1},{at:[0,b?.[1],0]}),a?.(w,t)}),x=H(async w=>{let{path:b,offset:k}=u.selection?.focus||{};if(!b||!k)return!1;let P=b?.[1];if(w.key===Fv){s?.[P]?.length>k&&R.setNodes(u,{error:!1},{at:[0,P,0]}),await Tu(10);let I=b[1]+1;R.setNodes(u,{error:!1},{at:[0,I,0]})}return!0});return(0,Ne.useImperativeHandle)(h,()=>({insertNodes:(w=[])=>{let b=w.map(P=>({type:"list-item",children:[{text:P}]}));R.insertNodes(u,b);let k=g.current;s?.[k]||R.removeNodes(u,{at:[0,k]})}})),Ne.default.createElement(ls,{type:t,title:e,dropError:r,actionTitle:n,addressErrors:i,onSelectWalletAddress:c},Ne.default.createElement(y.Box,{className:Re["batch-send-address-input"],ref:D},Ne.default.createElement(y.Box,{ref:A},Ne.default.createElement(td,{editor:u,value:cd(s),onChange:E},Ne.default.createElement(ed,{autoFocus:!0,spellCheck:!0,renderLeaf:p,renderElement:m,placeholder:o,onKeyDown:x}))),Ne.default.createElement(ld,{dropRef:D,onChange:l,slateRef:A,onError:d})))}),ya=Ov;v();C();var ye=G(te());v();C();var $e={SEND:"SEND",RECEIVE:"RECEIVE"};var pd=t=>Array.isArray(t)?t.map(({name:e,address:r,label:n,options:o})=>r&&!o?{value:r,style:{display:"flex",alignItems:"center"},label:ye.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"2px"},ye.default.createElement(y.Box,{className:Re.accountTitle},e&&ye.default.createElement(Ae.Text,{strong:!0,size:Ae.SIZE.xs},e),!!n&&ye.default.createElement(wo,{className:Re.accountTag,category:wo.CATEGORY.fill,size:wo.SIZE.sm},S(ci[n]))),r&&ye.default.createElement(Ae.Text,{size:Ae.SIZE.xs,type:Ae.TYPE.secondary},r))}:{value:e,label:ye.default.createElement(Ae.Text,{size:Ae.SIZE.md},e),options:pd(o||[])}):[],Pv=t=>{let[e,r]=(0,ye.useState)([]),[n,o]=(0,ye.useState)(!1),s=(0,ye.useMemo)(()=>pd(t.options),[t.options]),a=(0,ye.useMemo)(()=>s?.map(m=>m.options?.map(({value:p})=>p))?.flat(),[s]),{mode:i,type:c}=t,l=(0,ye.useMemo)(()=>i===Q.ONE_TO_MANY&&c===$e.SEND||i===Q.MANY_TO_ONE&&c===$e.RECEIVE,[i,c]),d=H((m,p,u)=>{if(l){r([p]);return}let D=[...e];m&&p?D=[...e,p]:!m&&p?D=D.filter(A=>A!==p):m&&u&&u.length?D=[...e,...u]:!m&&u&&u.length&&(D=D.filter(A=>!u.includes(A))),r([...new Set(D)])}),h=(0,ye.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),g=m=>{let p=m.target.checked;r(p?a:[])};return(0,ye.useEffect)(()=>{o(e.length===a.length)},[e,a]),ye.default.createElement(y.Box,{className:Re.selectAddress},ye.default.createElement(y.Box,{className:Re["batch-send-address-dialog-core"]},s.map(({label:m,options:p})=>Array.isArray(p)&&p?.length?ye.default.createElement(pu,{defaultExpanded:!0,className:Re["batch-send-address-accordion"],headerClassName:Re["batch-send-address-accordion-header"],contentClassName:Re["batch-send-address-accordion-content"],title:l?m:ye.default.createElement(yr,{clickStopPropagation:!0,checked:fd(e,p.map(({value:u})=>u)),onChange:({target:{checked:u}})=>{d(u,void 0,p.map(({value:D})=>D))}},m)},p.map(({value:u,label:D})=>l?ye.default.createElement(gu,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:A}})=>{d(A,u)}},D):ye.default.createElement(yr,{checked:e?.includes(u),className:Re["batch-send-address-accordion-checkbox"],onChange:({target:{checked:A}})=>{d(A,u)}},D))):ye.default.createElement(ye.default.Fragment,null))),ye.default.createElement(y.Box,{className:Re["batch-send-address-select-address-actions"]},!l&&ye.default.createElement(y.Box,{className:Re.selectedAddressInfo},ye.default.createElement(yr,{checked:n,onChange:g},S("wallet_extension_addressbook_text_select_all")),ye.default.createElement(Ae.Text,{type:Ae.TYPE.secondary,size:Ae.SIZE.sm},S("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),ye.default.createElement(y.Box,{className:Re.addBtn},ye.default.createElement(re,{category:re.CATEGORY.fill,type:re.TYPE.highlight,size:re.SIZE.lg,onClick:h,disabled:e.length<=0,block:!0},S("wallet_extension_addressbook_btn_add")))))},gd=Pv;v();C();var Sa=G(te());ze();var Iv=({type:t,title:e,value:r,onChange:n,actionTitle:o,placeholder:s,addressErrors:a,onSelectWalletAddress:i})=>Sa.default.createElement(ls,{type:t,title:e,actionTitle:o,addressErrors:a,onSelectWalletAddress:i},Sa.default.createElement(be,{size:be.SIZE.xl,value:r?.[0],placeholder:s,onChange:({target:{value:c}})=>{n?.([lo(c)],t,!0)}})),Ta=Iv;v();C();var Cr=G(te());var hd=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:n})=>{let o=(0,Cr.useRef)(null),s=(0,Cr.useRef)(null),[a,i]=(0,Cr.useState)(null),[c,l]=(0,Cr.useState)(!1),[d,h]=(0,Cr.useState)([]),[g,m]=(0,Cr.useState)(""),[p,u]=(0,Cr.useState)(""),D=H(()=>{l(!1)}),A=H((I,T)=>{T===$e.SEND&&t===Q.ONE_TO_MANY||T===$e.RECEIVE&&t===Q.MANY_TO_ONE?n?.(I,T):(T===$e.SEND?o:s)?.current?.insertNodes(I),D()}),E=H(I=>{let T=I===$e.SEND?e:r;l(!0),i(I),h(T)}),x=H((I=[])=>{o.current?.insertNodes(I),m("")}),w=H((I=[])=>{s.current?.insertNodes(I),u("")}),b=H((I,T,z=!1)=>{n?.(z?I:dd(I),T),m(""),u("")}),k=H(I=>{u(I)}),P=H(I=>{m(I)});return{visible:c,sendRef:o,receiveRef:s,addressType:a,addressOptions:d,onCloseDialog:D,onInsertAddresses:A,onSelectWalletAddress:E,onSendDrop:x,onReceiveDrop:w,onAddressInputChange:b,onReceiveDropError:k,onSendDropError:P,sendError:g,receiveError:p}};var Lv=t=>{let{mode:e,className:r,style:n,toAddresses:o,fromAddresses:s,addressErrors:a,walletAccounts:i,walletAccountsWithAddressBook:c,onChange:l}=t,{visible:d,sendRef:h,receiveRef:g,addressType:m,addressOptions:p,onCloseDialog:u,onInsertAddresses:D,onSelectWalletAddress:A,onSendDrop:E,onReceiveDrop:x,onAddressInputChange:w,onReceiveDropError:b,onSendDropError:k,sendError:P,receiveError:I}=hd({mode:e,walletAccounts:i,walletAccountsWithAddressBook:c,onChange:l}),{isSm:T}=Ue();return Dr.default.createElement(y.FlexBox,{style:n,direction:T?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:(0,vd.default)(Re["batch-send-address"],r)},e===Q.ONE_TO_MANY?Dr.default.createElement(Ta,{value:s,type:$e.SEND,addressErrors:a?.from,placeholder:S("wallet_extension_address_input_input_address"),title:S("wallet_extension_sending_title_send_address"),actionTitle:S("wallet_extension_address_anchor_address_book"),onChange:w,onSelectWalletAddress:A}):Dr.default.createElement(ya,{ref:h,value:s,addressErrors:a?.from,type:$e.SEND,placeholder:S("wallet_extension_address_input_input_address"),title:S("wallet_extension_sending_title_send_address"),actionTitle:S("wallet_extension_address_anchor_address_book"),onChange:w,onSelectWalletAddress:A,onDrop:E,onDropError:k,dropError:P}),e===Q.MANY_TO_ONE?Dr.default.createElement(Ta,{value:o,type:$e.RECEIVE,addressErrors:a?.to,placeholder:S("wallet_extension_address_input_input_address"),title:S("wallet_extension_receive_title_receive_address"),actionTitle:S("wallet_extension_address_anchor_address_book"),onChange:w,onSelectWalletAddress:A}):Dr.default.createElement(ya,{ref:g,value:o,type:$e.RECEIVE,addressErrors:a?.to,placeholder:S("wallet_extension_address_input_input_address"),title:S("wallet_extension_receive_title_receive_address"),actionTitle:S("wallet_extension_address_anchor_address_book"),onChange:w,onSelectWalletAddress:A,onDrop:x,onDropError:b,dropError:I}),Dr.default.createElement(Hr,{visible:d,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:S("wallet_extension_addressbook_title_address_book"),onClose:u},Dr.default.createElement(gd,{mode:e,type:m,options:p,onChange:D})))},Cd=Dr.default.memo(Lv);v();C();var nr=G(te()),ba=G(Ve());v();C();var en={root:"_root_1uwjx_1",icon:"_icon_1uwjx_69",title:"_title_1uwjx_88",subtitle:"_subtitle_1uwjx_108",tip:"_tip_1uwjx_136",tipIcon:"_tipIcon_1uwjx_140"};function Mv(t){let{icon:e,title:r,subtitle:n,tip:o,className:s,titleClassName:a,subtitleClassName:i}=t;return nr.default.createElement(y.Box,{className:(0,ba.default)(en.root,s)},e&&nr.default.createElement(y.Box,{className:en.icon},e),nr.default.createElement(y.Box,null,nr.default.createElement(y.Box,{className:(0,ba.default)(en.title,a)},r),nr.default.createElement(y.Box,{className:en.subtitle},nr.default.createElement(y.Box,{className:i},n),o&&nr.default.createElement(Ct,{title:o,placement:Ct.DIRECTION.bottom,maxWidth:240},nr.default.createElement(y.Box,{className:en.tip},nr.default.createElement(ut,{className:`okx-wallet-plugin-question-mark ${en.tipIcon}`}))))))}var yn=Mv;v();C();var tn=G(te());ze();v();C();var Rv=()=>H(async t=>{let{data:e}=await Jt(Xt.getSolRentBatch,{coinId:dr,addresses:t});return e}),Dd=Rv;v();C();ze();var Fa=(t,e)=>t?e===$e.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r):[],jv=t=>{let e=Os;return t===Be?e=dr:t===We?e=go:t===fe?e=cn:t===Te?e=po:t===xe&&(e=ho),e},zv=({localType:t,addressRegisterStatusMap:e,fromAddressErrors:r,toAddressErrors:n,fromAddress:o,toAddress:s,i:a,tokenSymbol:i})=>{if(t===fe&&o||t===Te&&s){let c=!0;t===fe?c=e[o]??!0:c=e[s]??!0,c===!1&&t===fe&&r.push({address:o,error:"wallet_extension_sending_error_address_no_register",at:a}),c===!1&&t===Te&&n.push({address:s,error:"wallet_extension_sending_error_token_no_register",at:a,args:{token:i}})}},Wv=async({mode:t,baseCoinId:e,isRpcMode:r,fromAddresses:n,toAddresses:o,chainIndex:s})=>{let a=[],i=[],c=typeof s=="string"&&s.startsWith("0x")?ko(s):s,l=[];if(t===Q.ONE_TO_MANY?l=o.map(d=>({chainIndex:c,to:d,from:n[0]})):t===Q.MANY_TO_ONE?l=n.map(d=>({chainIndex:c,from:d,to:o[0]})):l=n.map((d,h)=>({chainIndex:c,from:d,to:o[h]})),[Os,dr].includes(e))try{let d=await mi({txList:l,rpcChain:!!r}),{txTagList:h}=d;h.forEach((g,m)=>{g?.causeRiskItem?.includes("from_risk_reject")&&a.push({address:l[m].from,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:m}),g?.causeRiskItem?.includes("black_tag")&&i.push({address:l[m].to,error:"wallet_extension_mid_subtitle_risky_transaction_account",at:m})})}catch(d){a.push({address:n[0],errorText:d?.msg||S("wallet_extension_transaction_error_general_check_network")})}return{fromAddressErrors:a,toAddressErrors:i}},Ad=async({mode:t,localType:e,isRpcMode:r,chainIndex:n,tokenSymbol:o,toAddresses:s,fromAddresses:a,walletAccounts:i,addressRegisterStatusMap:c})=>{let l=[],d=[],h=Wr([s?.length,a?.length])??0,g=a[0],m,p=jv(e);for(let D=0;D<h;D++){(t===Q.MANY_TO_MANY||t===Q.MANY_TO_ONE)&&(g=a[D]),m=s[D],g&&!i?.includes(g)?d.push({address:g,error:"wallet_extension_sending_text_address_wallet_extension",at:D}):t!==Q.ONE_TO_MANY&&g&&a.slice(0,D).includes(g)&&d.push({address:g,error:"wallet_extension_sending_text_address_duplicated",at:D});let A=m&&Qe(m,e),E=await Fu(A,p);m&&!E&&l.push({address:m,error:"wallet_extension_sending_text_address_illegal",at:D}),zv({localType:e,addressRegisterStatusMap:c,fromAddressErrors:d,toAddressErrors:l,fromAddress:g,toAddress:m,i:D,tokenSymbol:o})}let u=await Wv({mode:t,baseCoinId:p,isRpcMode:r,fromAddresses:a,toAddresses:s,chainIndex:n});return d=d.concat(u.fromAddressErrors),l=l.concat(u.toAddressErrors),{to:l,from:d}};v();C();ze();v();C();var Ed=G(cu());ze();var Uv=10,Gv=async({contract:t,addresses:e})=>{let r=e.map(async o=>{let s=await t.balanceOf(o);return{from:o,balance:s.toString()}});return await Promise.all(r)},Hv=async({provider:t,addresses:e})=>{let r=e.map(async o=>{let s=await t.getBalance(o);return{from:o,balance:s.toString(),baseCoinBalance:s.toString()}});return await Promise.all(r)},Yv=async({provider:t,addressList:e,contractAddress:r})=>{let{ethers:n}=await On(),o=[];if(!e?.length)return[];if(r){let s=new n.Contract(r,Ed.default,t);return o=await Gv({contract:s,addresses:e}),o}return o=await Hv({provider:t,addresses:e}),o},_d=t=>{let e=Vr(t);return H(async(r,n)=>{let o=await e(),s=ni(r),a=Va(s,Uv),i=await Promise.all(a.map(l=>Yv({provider:o,addressList:l,contractAddress:n}))),c=qa(i);return r?.length!==c?.length?r.map(l=>c.find(({from:h})=>h===l)):c})};var qv=()=>{let[t]=le(),e=Au(void 0,t?.localType),r=xu();return H(async n=>{let o=yt(t),s=n?.length,a=[];for(let i=0;i<s;i++){let c=n[i],{walletId:l}=e.find(h=>h.address===c)||{},{coinAmountInt:d}=await r(t?.coinId,l)||{};if(o)a.push({from:c,balance:d,baseCoinBalance:d});else{let{coinAmountInt:h}=await r(t?.baseCoinId,l)||{};a.push({from:c,balance:d,baseCoinBalance:h})}}return a})},Vv=()=>{let[t]=qe(),[e]=le(),r=_d(t?.rpcUrl);return H(async n=>{let o=!e?.address,s=[],a=n.map(c=>c&&Qe(c,e?.localType)),i=await r(a,void 0);return o||(s=await r(a,Qe(e?.address,e?.localType))),uo(i,s)})},$v=()=>{let[t]=le(),e=Vv(),r=qv();return[Te,Be,We,fe,xe].includes(t?.localType)?r:e},Bd=$v;var Kv=(t,e)=>{let[r]=le(),[n,o]=(0,tn.useState)(!1),{gotoConfirmPage:s}=At(),a=Oo(!0,e),[,i]=hn(),c=lt(),l=Bd(),d=Dd(),[h,g]=Ce(),[m,p]=(0,tn.useState)(Fa(h,$e.SEND)),[u,D]=(0,tn.useState)(Fa(h,$e.RECEIVE)),[A,E]=(0,tn.useState)({}),x=H((P,I)=>{I===$e.SEND?p(P):D(P)}),w=(0,tn.useMemo)(()=>{let P=[];if(t===Q.MANY_TO_MANY){let I=Xa(m.length,u.length),T=u.slice(0,I);m.slice(0,I).forEach((K,j)=>{let Y=T[j];K&&Y&&P.push({to:Y,from:K})})}else if(t===Q.MANY_TO_ONE){let I=u.find(T=>!!T);m.forEach(T=>{T&&I&&P.push({to:I,from:T})})}else if(t===Q.ONE_TO_MANY){let I=m.find(T=>!!T);u.forEach(T=>{I&&T&&P.push({to:T,from:I})})}return P},[m,t,u]),b=!w?.length,k=H(async()=>{try{o(!0);let P=[];r?.localType===fe?P=m:r?.localType===Te&&(P=u);let I={};if([Te,fe].includes(r?.localType))try{let{data:K}=await Jt(Xt.batchQueryAddressRegister,{chainId:r?.chainId,addresses:P,contractAddress:r?.localType===Te?r?.address:void 0});I=K}catch{}let T=await Ad({isRpcMode:c,localType:e,toAddresses:u,fromAddresses:m,walletAccounts:a,mode:t,chainIndex:r?.chainId,addressRegisterStatusMap:I,tokenSymbol:r?.symbol});if(T?.from?.length||T?.to?.length)return o(!1),E(T);let z=await l(Fn(w,"from"));if(r?.localType===Be&&r?.baseCoinId!==0){let K=await d(Fn(w,"to"));i(K)}return z=z?.map((K,j)=>({...K,from:Bo(K?.from,r?.localType),id:j})),g(uo([],w,z)),o(!1),s()}catch(P){let I={from:[],to:[]};return I?.from.push({address:m[0],errorText:P?.msg||P?.message||S("wallet_extension_transaction_error_general_check_network")}),o(!1),E(I)}});return{loading:n,addressErrors:A,sendAddresses:h,fromAddresses:m,toAddresses:u,nextDisabled:b,onNext:k,onAddressChange:x}},xd=Kv;v();C();var Na={root:"_root_a3p43_2",footer:"_footer_a3p43_67"};var Zv=()=>{let{isSm:t}=Ue(),[e]=le(),[r]=at(),{loading:n,fromAddresses:o,toAddresses:s,addressErrors:a,nextDisabled:i,onNext:c,onAddressChange:l}=xd(r,e?.localType),[d,h]=Ru(e?.localType),{gotoHomePage:g}=At(),[m,p]=(0,Yt.useMemo)(()=>r===Q.MANY_TO_MANY?[S("wallet_extension_multitomulti_subtitle_many_transfer"),S("wallet_extension_reminder_tooltips_portfolio_trading")]:r===Q.ONE_TO_MANY?[S("wallet_extension_onetomulti_subtitle_one_to_many"),S("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[S("wallet_extension_multitoone_subtitle_many_to_one"),S("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,S]);return Yt.default.createElement(Tr,{footer:Yt.default.createElement(y.Box,{className:Na.footer},Yt.default.createElement(re,{block:t,category:re.CATEGORY.outline,type:re.TYPE.primary,size:t?re.SIZE.lg:re.SIZE.xl,onClick:()=>{g()}},S("wallet_extension_footer_btn_back")),Yt.default.createElement(re,{block:t,loading:n,disabled:i,category:re.CATEGORY.fill,type:re.TYPE.highlight,size:t?re.SIZE.lg:re.SIZE.xl,onClick:c},S("wallet_extension_footer_btn_next")))},Yt.default.createElement(yn,{tip:p,subtitle:m,title:S("wallet_extension_address_maintitle_add_address")}),Yt.default.createElement(y.Box,{className:Na.root},Yt.default.createElement(Cd,{mode:r,toAddresses:s,fromAddresses:o,addressErrors:a,walletAccounts:d,walletAccountsWithAddressBook:h,onChange:l})))},wd=Yt.default.memo(Zv);v();C();var rt=G(te());var eo=G(Ve());ze();v();C();var Ar=G(te());ze();v();C();var Pr=G(te());ze();var Xv=()=>{let t=we(mu);return(0,Pr.useCallback)(e=>{let r=t.filter(n=>n.chainId===e&&!n.isDeleted);return Nn(r,"address")},[t])},Jv=(t,e)=>{let r=lt(),{data:n,reload:o,loadingMore:s,listRef:a}=zu({aggregation:!1,chainIds:t?[t]:[],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){if(r||!t)return{list:[],pageNo:0,isNoMore:!0}}});return{list:Ao(()=>n?.list??[],[n?.list]),listRef:a,loadingMore:s,refreshDom:o,data:n}},yd=(t,e)=>{let{chainId:r,localType:n,chainIndex:o}=t||{},[s,a]=(0,Pr.useState)([]),i=lt(),c=Bi(e,{wait:300}),{list:l,listRef:d,refreshDom:h,loadingMore:g,data:m}=Jv(o,c),p=Xv(),u=Dt(),D=mn(fe),A=Ou(),E=(0,Pr.useMemo)(()=>m?.isNoMore&&!g,[m?.isNoMore,g]),x=(0,Pr.useMemo)(()=>{if(i)return[];if(!o)return[];let k=c.toLowerCase().trim();return A.filter(P=>{if(P.chainId!==o)return!1;let I=P.symbol?.toLowerCase().includes(k),T=P.address?.toLowerCase()===k;return I||T})},[i,c,A,o]);xr(async()=>{if(n===fe){let{coinFeeList:k}=await u({coinId:cn,address:D,fromAddr:D,toAddr:D,value:"0"});a(k)}},[n]);let w=(0,Pr.useMemo)(()=>{let k=l;return!i&&E&&x.length>0&&(k=[...k,...x]),Nn(k,"address")},[l,i,E,x]),b=Ao(()=>{let k=w;if(n===fe&&s?.length){let P=s.map(({coinId:T})=>T);k=l.filter(({coinId:T})=>Ka(P,T)).map(T=>{let z=s.find(K=>K?.coinId===T?.coinId);return{...T,tokenId:z?.tokenId,originSymbol:z?.originSymbol}})}return k},[n,w,s,i,E,x]);return Ao(()=>i?{list:r?p(r)??[]:[],listRef:null,refreshDom:null,loadingMore:!1}:{list:b,listRef:d,refreshDom:h,loadingMore:g},[r,b,l,d,g,i,p])},ds=()=>{let t=lt(),{coinTickersMap:e}=Bu();return H(async({coinId:r})=>t?0:e?.[r]?.coinToUSDRate||"0")};var Qv=(t,e)=>t?.localType===Be&&!e,ka=t=>t??"",Sd=t=>t??{},eC=t=>t??0,tC=(t,e)=>e?t:t?.baseCoin,fs=()=>{let[t]=le(),[e]=qe(),[r,n]=(0,Ar.useState)(0),[o,s]=(0,Ar.useState)(0),a=we(vo),{usdToThisRate:i}=a,c=yt(t),l=ds(),d=Qv(t,c),[h]=hn(),g=async()=>{if(c){let w=await l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});n(w),s(w)}else{let[w,b]=await Promise.all([l({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),l({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);s(w),n(b)}};(0,Ar.useEffect)(()=>{g()},[]);let[m]=Ce(),p=we(it),u=m?.length,D=tC(t,c),A=(0,Ar.useMemo)(()=>m[0]?.realNetworkFee?m.reduce((b,{realNetworkFee:k})=>U.add(b,k),0):U.mul(eC(p?.networkFee),u),[t,p]),E=(0,Ar.useMemo)(()=>{let w=m.reduce((b,{txAmount:k})=>U.add(b,k),0);return U.div(w,10**(t?.decimals??18))},[m]);return(0,Ar.useMemo)(()=>{let w=U.mul(i,U.mul(o,A)),b=U.mul(i,U.mul(r,E)),k=[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:U.thousandFormat(u)},{title:"wallet_extension_info_title_transfer_amount",value:er(Wr([E,0]),{symbol:ka(t?.symbol),precision:t?.signTokenPrecision??U.digitLength(Wr([E,0])),isStableCoin:t?.stableCoin}).value,market:b},{title:"wallet_extension_info_title_internet_fee",value:er(A,{symbol:ka(D?.symbol),precision:D?.displayPrecision,isStableCoin:D?.stableCoin,useLargeNumberPrecision:!0}).value,market:w}];if(d){let P=Object.values(Sd(h)).filter(z=>!U.eq(z,0)).length,I=U.div(Object.values(Sd(h)).reduce((z,K)=>U.add(z,K),0),10**(D?.decimals??9)),T=U.mul(i,U.mul(o,I));k.push({title:"wallet_extension_info_title_rent_accounts",value:U.thousandFormat(P)}),k.push({title:"wallet_extension_info_title_rent_value",value:er(I,{symbol:ka(D?.symbol),precision:D?.displayPrecision??U.digitLength(I),isStableCoin:D?.stableCoin}).value,market:T})}return k},[t,e,A,r,o,E,u,d,D?.displayPrecision,D?.signTokenPrecision,D?.stableCoin])};v();C();var or=G(te()),Oa=G(Ve());v();C();var Ir={root:"_root_16t0a_2",row:"_row_16t0a_65",nextRow:"_nextRow_16t0a_86",title:"_title_16t0a_113",subtitle:"_subtitle_16t0a_137",value:"_value_16t0a_163",icon:"_icon_16t0a_166"};function rC(t){let{icon:e,title:r,value:n,showIcon:o=!1,market:s}=t;return or.default.createElement(y.Box,null,or.default.createElement(y.Box,{className:Ir.title},S(r)),or.default.createElement(y.Box,{className:(0,Oa.default)(Ir.subtitle)},o&&(e||n)&&or.default.createElement(Ye,{src:e,className:Ir.icon,text:n,size:Ye.SIZE.md}),or.default.createElement(y.Box,{className:Ir.value},n)),s!==void 0&&or.default.createElement(Ae.DisplayAmount,{wrap:!0,useApproximate:!0,amount:s,mode:Ae.LEGAL,type:Ae.TYPE.secondary,size:Ae.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function nC({className:t,statistics:e}){let{isSm:r,isMd:n,isLg:o}=Ue(),a=(()=>r?[2,3,e.length-5]:n?[4,e.length-4]:o?[5,e.length-5]:[e.length])(),i=c=>{let l=0;for(let h=0;h<c;h+=1)l+=a[h]||0;let d=l+(a[c]||0);return e.slice(l,d).filter(Boolean)};return or.default.createElement(y.Box,{className:(0,Oa.default)(Ir.root,t)},a.map((c,l)=>{if(c<=0)return null;let d=i(l);if(d.length===0)return null;let h=l===0?Ir.row:Ir.nextRow;return or.default.createElement(y.Box,{key:l,className:h},d.map((g,m)=>or.default.createElement(rC,{...g,key:`${l}-${m}`})))}))}var ms=nC;v();C();var Pa=G(te());v();C();var Se={root:"_root_1iryo_2",table:"_table_1iryo_38",row:"_row_1iryo_47",order:"_order_1iryo_52",addressError:"_addressError_1iryo_78",fromError:"_fromError_1iryo_81",text:"_text_1iryo_84",oneLineText:"_oneLineText_1iryo_106",moreLineText:"_moreLineText_1iryo_109",remove:"_remove_1iryo_112",success:"_success_1iryo_117",error:"_error_1iryo_130",open:"_open_1iryo_143",receiveError:"_receiveError_1iryo_146",errorIcon:"_errorIcon_1iryo_149",hash:"_hash_1iryo_154",hashText:"_hashText_1iryo_166",loader:"_loader_1iryo_179"};function oC({dataSource:t,columns:e,scroll:r}){let n=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return Pa.default.createElement(y.Box,{className:Se.root},Pa.default.createElement(hu,{columns:e,dataSource:t,className:Se.table,onHeaderCell:n,scroll:r}))}var ps=oC;v();C();ze();function sC(){let[t]=at(),[e]=le(),[r]=qe(),[n]=ct(),[o]=dt(),[s]=Ce(),a=we(it);return()=>{let i={[Q.ONE_TO_MANY]:"one_to_many",[Q.MANY_TO_MANY]:"many_to_many",[Q.MANY_TO_ONE]:"many_to_one"},c={[pe.ALL]:"max",[pe.RANDOM]:"range",[pe.CUSTOM]:"specific_amount"},l={[He.NONE]:"no_interval",[He.RANDOM]:"range"},d={[Je.LOW]:"slow",[Je.MEDIUM]:"average",[Je.HIGH]:"fast",[Je.CUSTOM]:"custom"},h,g;return t===Q.ONE_TO_MANY?(h=1,g=s.length):t===Q.MANY_TO_ONE?(h=s.length,g=1):(h=s.length,g=s.length),{transaction_type:i[t],token:e?.symbol,chain:r?.chainId?parseInt(r?.chainId,16):null,sending_address_count:h,receiving_address_count:g,sending_amount_type:c[n?.type],interval_setting:l[o?.type],gas_level:d[a?.level],transactions:s.map(({from:m,to:p,txAmount:u,txHash:D,txStatus:A})=>{let E;return A===ne.SUCCEED?E="succeed":A===ne.FAILED&&(E="fail"),Ja({from:m,to:p,sending_amount:si(u,10**e?.decimals),transaction_id:D,succeed_fail:E},io)})}}}var gs=sC;v();C();var ke=G(te()),ja=G(Ve());ze();v();C();v();C();v();C();var hs=G(te()),La=G(Ve());v();C();var Ia=G(te()),Td=G(Ve());var aC=({children:t,className:e,...r})=>Ia.default.createElement(y.Box,{className:(0,Td.default)(Se.row,e),...r},Ia.default.createElement(y.Box,null),t),sr=aC;function iC(t){let[e,r]=Ce(),{gotoAddressPage:n}=At(),{index:o}=t,s=()=>{let a=[...e.slice(0,o),...e.slice(o+1)];r(a),a.length<=0&&n()};return hs.default.createElement(sr,null,hs.default.createElement(y.Box,{className:(0,La.default)(Se.text),onClick:s},hs.default.createElement(ut,{className:(0,La.default)("okx-wallet-plugin-trash",Se.remove)})))}var bd=iC;v();C();var ar=G(te()),vs=G(Ve());function uC(t){let{error:e,showShortAddress:r=!1,from:n,order:o,to:s,isFromAddress:a=!1,showTextOneLine:i=!1,showOrder:c=!1,showError:l=!1,baseCoinBalance:d}=t,[h]=le(),m=yt(h)?h:h?.baseCoin,p=e===Qt.BALANCE_INSUFFICIENT,u=!!e,D=p?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",A=(0,ar.useMemo)(()=>e===Qt.BALANCE_INSUFFICIENT?S("wallet_extension_list_tooltips_scarce_balance"):e===Qt.FEE_BALANCE_INSUFFICIENT?S("wallet_extension_toast_insufficient_balance_amt_netfee",{token:m?.symbol,amount:er(d,{symbol:m?.symbol??"",precision:m?.displayPrecision,useContractPrecision:!0,contractPrecision:{decimals:m?.decimals??0}}).value}):e,[e]),E=a?n:s,x=r?ar.default.createElement(Ct,{title:E},So(E)):E;return ar.default.createElement(sr,null,c&&ar.default.createElement(y.Box,{className:Se.order},o,"."),ar.default.createElement(y.Box,{className:(0,vs.default)(Se.text,{[Se.oneLineText]:i,[Se.moreLineText]:!i,[Se.receiveError]:l&&u})},x),l&&u&&ar.default.createElement(y.Box,{className:(0,vs.default)(Se.addressError)},ar.default.createElement(Ct,{title:A},ar.default.createElement(ut,{className:(0,vs.default)(D,Se.errorIcon)}))))}var Fd=uC;v();C();var Cs=G(te()),Nd=G(Ve());ze();function lC(t){let{txAmount:e,showTextOneLine:r,coin:n}=t,o=Cs.default.useMemo(()=>{let s=Wr([e||0,0]);return er(s,{precision:n?.signTokenPrecision??U.digitLength(s),isStableCoin:n?.stableCoin}).value},[e,n]);return Cs.default.createElement(sr,null,Cs.default.createElement(y.Box,{className:(0,Nd.default)(Se.text,{[Se.oneLineText]:r,[Se.moreLineText]:!r})},o))}var kd=lC;v();C();var Lr=G(te()),Ma=G(Ve()),Od=G(um());function cC(t){let{txHash:e}=t,[r]=qe(),n="",o=r.blockExplorerUrl||r.explorerUrl;o&&(n=Yu(o,"tx",e));let s=()=>{e&&(n?globalThis.platform.openTab({url:n}):((0,Od.default)(e),Ws.success({desc:Lr.default.createElement(Ae.Text,{inherit:!0,forceWrap:!0},e),placement:Ws.DIRECTION.top,title:S("wallet_receive_toast_address_copied")})))};return Lr.default.createElement(sr,{className:Se.hash,onClick:s},e?Lr.default.createElement(Lr.default.Fragment,null,Lr.default.createElement(y.Box,{className:(0,Ma.default)(Se.text,Se.hashText)},So(e)),Lr.default.createElement(y.Box,null,Lr.default.createElement(ut,{className:(0,Ma.default)(Se.open,{"okx-wallet-plugin-open-link":n,"okx-wallet-plugin-copy":!n})}))):"-")}var Pd=cC;v();C();var rn=G(te()),Id=G(Ve());v();C();var Xn={inputRoot:"_inputRoot_rigrr_1",input:"_input_rigrr_1",errorIcon:"_errorIcon_rigrr_8",textRoot:"_textRoot_rigrr_12"};function dC({editable:t,memo:e,index:r}){let[n,o]=Ce();if(t){let s=a=>{let i=a.target.value,c=[...n];c[r]={...c[r],memo:i,tonMemoError:i.length>200},o(c)};return rn.default.createElement("div",{className:Xn.inputRoot},rn.default.createElement(be,{className:Xn.input,style:{width:"320px"},size:be.SIZE.xs,value:n[r]?.memo||"",onChange:s}),n[r]?.tonMemoError&&rn.default.createElement(Ct,{title:S("wallet_extension_ton_tooltip_character_limit"),placement:Ct.DIRECTION.bottomRight},rn.default.createElement(ut,{className:(0,Id.default)("okx-wallet-plugin-warning-circle-fill",Xn.errorIcon)})))}return rn.default.createElement("div",{className:Xn.textRoot},rn.default.createElement("div",{className:Se.text},e))}var Ld=dC;v();C();var qt=G(te()),Ds=G(Ve());v();C();var Ra={"error-icon":"_error-icon_nevzf_1",errorIcon:"_error-icon_nevzf_1","error-text":"_error-text_nevzf_4",errorText:"_error-text_nevzf_4"};function fC(t){let{isMobile:e}=Ue(),{txStatus:r,errorMsg:n}=t;return qt.default.createElement(sr,null,(()=>{switch(r){case ne.SUCCEED:return qt.default.createElement(ut,{className:(0,Ds.default)("okx-wallet-plugin-completed",Se.success)});case ne.FAILED:return e?qt.default.createElement(Ct,{title:n},qt.default.createElement(ut,{className:(0,Ds.default)("okx-wallet-plugin-warning-circle",Se.error,Ra.errorIcon)})):qt.default.createElement(Ct,{title:n,textOverflow:{text:n}},qt.default.createElement("div",{className:Ra.errorText},qt.default.createElement("span",null,n)));case ne.DROPPED:return qt.default.createElement(ut,{className:(0,Ds.default)("okx-wallet-plugin-warning-circle",Se.error)});case ne.PENDING:return qt.default.createElement(Ut,{size:Ut.SIZE.md,loaderClassName:Se.loader});default:return qt.default.createElement("div",null,"-")}})())}var Md=fC;var Ke={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status",MEMO:"memo"},As={[Ke.ADDRESS]:Fd,[Ke.AMOUNT]:kd,[Ke.ACTION]:bd,[Ke.HASH]:Pd,[Ke.STATUS]:Md,[Ke.MEMO]:Ld};var ir={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action",MEMO:"memo"},Rd=[{title:"wallet_extension_list_title_send_address",key:ir.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:ir.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:ir.TX_AMOUNT,type:Ke.AMOUNT},{title:"wallet_extension_list_title_operation",key:ir.ACTION,type:Ke.ACTION,width:50}];var Jn={[Je.HIGH]:"wallet_extension_gas_select_fast",[Je.MEDIUM]:"wallet_extension_gas_select_average",[Je.LOW]:"wallet_extension_gas_select_slow",[Je.CUSTOM]:"commonall_filter_dropdown_custom"},jd=[{value:pe.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:pe.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:pe.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];v();C();var _t={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};function zd(){return ke.default.createElement("div",{className:_t.gweiText},S("extension_wallet_transaction_input_gwei"))}var mC=()=>new Promise((t,e)=>{let r=Hr.tip({children:S("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:S("wallet_extension_btn_general_confirm"),cancelText:S("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){t(),r.destroy()},onCancel(){e(),r.destroy()}})});function pC({custom:t,onClose:e,network:r,onConfirm:n,isSupportEip1559:o}){let{gasPrice:s,gasLimit:a,baseFeePerGas:i,maxFeePerGas:c,maxPriorityFeePerGas:l}=t,[d,h,g]=Eo(r?.realChainIdHex||r?.chainId),m=No(i),p=o?`${S("extension_wallet_transaction_text_maxbase_fee")} (${S("extension_wallet_transaction_text_current",{number:m})})`:S("wallet_extension_cosmos_title_gasfee"),u=No(o?ln(c,l):s),[D,A]=(0,ke.useState)(u),E=No(l),[x,w]=(0,ke.useState)(E),[b,k]=(0,ke.useState)(!!d),P=z=>{let K=z.target.checked;k(K),K&&Ai()};(0,ke.useEffect)(()=>{k(!!d)},[d]);let[I]=(0,ke.useState)(a),T=(0,ke.useMemo)(()=>{let z=!Number(D);return o&&(z=z||!Number(x)),z},[D,x,o]);return ke.default.createElement(Hr.Confirmation,{maskClosable:!1,visible:!0,title:S("commonall_filter_dropdown_custom"),confirmText:S("commonall_text_btn_confirm"),cancelText:S("commonall_text_btn_cancel"),confirmDisabled:T,onConfirm:async()=>{let{price:z,usdToThisRate:K}=t,j=kn(o?co(D,x):D),{networkFee:Y,networkFeeInt:W,networkFeeMarket:V}=fr({gasPrice:j,gasLimit:I,price:z,usdToThisRate:K}),oe={...t,isDefault:b,networkFee:Y,networkFeeInt:W,networkFeeMarket:V,gasPrice:j,maxFeePerGas:j,maxPriorityFeePerGas:kn(x),gasLimit:I};!Za(d)&&!b?(await mC(),g()):h({isDefault:!0,isSupportEip1559:o,gasPrice:j,maxFeePerGas:j,maxPriorityFeePerGas:kn(x),baseFeePerGas:ln(j,kn(x))}),n(oe)},onCancel:e,onClose:e},ke.default.createElement(y.Box,null,ke.default.createElement(be.Number,{className:_t.customInput,size:be.SIZE.sm,title:p,placeholder:u,value:D,precision:9,enableMinus:!1,min:0,onChange:A,suffix:ke.default.createElement(zd,null),"data-testid":pn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_INPUT}),o&&ke.default.createElement(be.Number,{className:_t.customInput,size:be.SIZE.sm,placeholder:E,title:S("extension_wallet_transaction_text_priority_fee"),value:x,precision:9,enableMinus:!1,min:0,onChange:w,suffix:ke.default.createElement(zd,null),"data-testid":pn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_MAX_PRIORITY_FEE_PER_GAS_INPUT})),ke.default.createElement(y.Box,{className:_t.defaultTip},S("wallet_extension_mid_checkbox_setting_default")),ke.default.createElement(yr,{checked:b,onChange:P,className:_t.defaultChecker},S("wallet_extension_bot_alert_default_gas",{networkName:r.name})))}function gC({loading:t,value:e,network:r,className:n,options:o,onChange:s=()=>{},onCustomChange:a=()=>{}}){let[i]=vn(),[c,l]=(0,ke.useState)(!1);return ke.default.createElement(y.Spin,{loading:t&&!o?.length,className:(0,ja.default)(_t.root,n)},ke.default.createElement(y.Box,{className:_t.title},S("wallet_extension_gas_title_internet_fee")),ke.default.createElement(y.Box,{className:_t.setting},o.map(d=>{let{level:h,unitPriceDisplay:g}=d,m=S(Jn[h]);return ke.default.createElement(y.Box,{className:(0,ja.default)(_t.item,e?.level===h?_t.active:_t.inactive),key:h,"data-testid":`${pn.BATCH_TRANSFER_PAGE.GAS_FEE_SETTING_ITEM}-${h}`,onClick:()=>{d.level===Je.CUSTOM?l(!0):s?.(d)}},ke.default.createElement(y.Box,{className:_t.label},m),ke.default.createElement(y.Box,{className:_t.fee},ke.default.createElement(Ae.Text,{type:Ae.TYPE.secondary,size:Ae.SIZE.xs,ellipsis:{tooltip:!0}},g),ke.default.createElement(y.Box,null,S("extension_wallet_transaction_input_gwei"))))})),c&&ke.default.createElement(pC,{network:r,isSupportEip1559:i,custom:o[o.length-1],onConfirm:d=>{a(d),l(!1)},onClose:()=>{l(!1)}}))}var Wd=gC;v();C();var ur=G(te()),Ud=G(Ve());v();C();var za=G(te());function hC(){let[t,e]=(0,za.useState)(!1),[r,n]=(0,za.useState)(!1),o=(c,l)=>c&&l&&Number(c)>Number(l);return{hasMinError:t,hasMaxError:r,checkMaxError:(c,l)=>{e(!1),n(o(c,l))},checkMinError:(c,l)=>{n(!1),e(o(c,l))},clearError:()=>{n(!1),e(!1)}}}var Es=hC;v();C();var Mr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function vC({value:t,className:e,onChange:r}){let{type:o,min:s,max:a}=t,{hasMinError:i,hasMaxError:c,checkMaxError:l,checkMinError:d,clearError:h}=Es(),g=b=>{let k={...t,...b};r?.(k)},m=b=>{let k=b;g({min:k}),d(k,a)},p=b=>{g({max:b}),l(s,b)},u=S("wallet_extension_interval_title_send_interval"),D=[{value:He.NONE,label:S("wallet_extension_interval_select_no_interval")},{value:He.RANDOM,label:S("wallet_extension_interval_dropdown_random_interval")}],A=S("wallet_extension_interval_subtitle_lowest"),E=S("wallet_extension_interval_subtitle_highest"),x=b=>{let k=b.value;k!==o&&(g({type:k,min:"",max:""}),h())},w=o===He.NONE;return ur.default.createElement(y.Box,{className:(0,Ud.default)(Mr.root,e)},ur.default.createElement(y.Box,{className:Mr.type},ur.default.createElement(y.Box,{className:Mr.title},u),ur.default.createElement(y.Box,null,ur.default.createElement(fn,{options:D,value:o,onChange:x,align:fn.DIRECTION.right}))),ur.default.createElement(y.Box,{className:Mr.setting},ur.default.createElement(y.Box,{className:Mr.random},ur.default.createElement(be.Number,{className:Mr.input,title:A,value:s,onChange:m,size:be.SIZE.lg,placeholder:"0",min:0,max:600,disabled:w,error:i,errorType:be.TIP_TYPE.always}),ur.default.createElement(be.Number,{className:Mr.input,title:E,value:a,onChange:p,size:be.SIZE.lg,placeholder:"0",disabled:w,min:0,max:600,error:c,errorType:be.TIP_TYPE.always}))))}var Gd=vC;v();C();var Lt=G(te());var Hd=G(Ve());v();C();var Er={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};function CC({value:t,className:e,options:r,onChange:n}){let[o]=le(),s=bo(o),{hasMinError:a,hasMaxError:i,checkMaxError:c,checkMinError:l,clearError:d}=Es(),h=D=>{n?.({min:D}),l(D,t.max)},g=D=>{n?.({max:D}),c(t.min,D)},m=D=>{n?.({amount:D})},p=H(D=>{D?.value!==t.type&&(n?.({type:D?.value,amount:"",min:"",max:""}),d())},[t]),u=U.thousandFormat("0.00");return Lt.default.createElement(y.Box,{className:(0,Hd.default)(Er.root,e)},Lt.default.createElement(y.Box,{className:Er.type},Lt.default.createElement(y.Box,{className:Er.title},S("wallet_extension_amount_title_transfer_amount")),Lt.default.createElement(y.Box,null,Lt.default.createElement(fn,{options:r,value:t?.type,onChange:p,align:fn.DIRECTION.right}))),Lt.default.createElement(y.Box,{className:Er.setting},t?.type===pe.RANDOM?Lt.default.createElement(y.Box,{className:Er.random},Lt.default.createElement(be.Number,{enableMinus:!1,className:Er.input,suffix:o?.symbol,title:S("wallet_extension_amount_input_lowest",{},{useBr:!1}),value:t?.min,onChange:h,size:be.SIZE.lg,precision:s,placeholder:u,error:a,errorType:be.TIP_TYPE.always}),Lt.default.createElement(be.Number,{suffix:o?.symbol,className:Er.input,title:S("wallet_extension_amount_input_highest",{},{useBr:!1}),value:t?.max,onChange:g,precision:s,size:be.SIZE.lg,placeholder:u,error:i,errorType:be.TIP_TYPE.always})):Lt.default.createElement(y.Box,{className:Er.custom},Lt.default.createElement(be.Number,{enableMinus:!1,suffix:o?.symbol,title:S("wallet_extension_amount_subtitle_send_amount",{},{useBr:!1}),value:t?.amount,size:be.SIZE.lg,onChange:m,disabled:t?.type===pe.ALL,precision:s,placeholder:t?.type===pe.ALL?S("wallet_extension_amount_dropdown_all_balance"):u}))))}var Yd=CC;v();C();var ws=G(te());v();C();var qd=G(te());var _s=(t,e={})=>(r,n)=>qd.default.createElement(t,{...n,...e});v();C();ze();var DC=(t,e,r=0)=>+ei(t,e,!0).toFixed(r),Bt=DC;v();C();var Bs=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:n,usedFeeCoinBalance:o})=>{if(U.lt(r,o))return Qt.FEE_BALANCE_INSUFFICIENT;if(e){if(U.lt(t,U.add(n,o)))return Qt.BALANCE_INSUFFICIENT}else if(U.lt(t,n))return Qt.BALANCE_INSUFFICIENT;return null},Vd=({balance:t,solRent:e,usedRent:r,txAmount:n,isBaseCoin:o,formattedSolRent:s,baseCoinBalance:a,usedCoinBalance:i,usedFeeCoinBalance:c})=>{let l,d=!0;if(U.lt(a,c))return Qt.FEE_BALANCE_INSUFFICIENT;if(o){if(U.lt(t,U.add(i,c))&&(d=!1),U.lt(n,e))return S("walletextension_toast_text_minimum_rent_fee",{number:s});l=U.sub(a,U.add(c,i))}return U.lt(a,U.add(c,r))?S("extension_wallet_transfer_alert_insufficient"):(o||(l=U.sub(a,U.add(c,r)),U.lt(t,i)&&(d=!1)),d?Number(l)!==1&&U.lt(l,e)&&U.gt(l,0)?S("walletextension_toast_text_reserve_rent_exempt",{number:s}):null:Qt.BALANCE_INSUFFICIENT)},$d=async({coin:t,balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:s,usedFeeCoinBalance:a})=>{let i=Bs({balance:e,txAmount:r,isBaseCoin:n,baseCoinBalance:o,usedCoinBalance:s,usedFeeCoinBalance:a});if(i)return i;let{ZksyncWallet:c}=await fo(),l=r&&await c.getCloseAmounts(r);return l&&!U.eq(l,r)?S("wallet_extension_placeholder_zksync_max_num",{amount:U.showFloorTruncation(U.div(l,10**t?.decimals),t?.decimals,!1)}):null};function Kd({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:s,tonSignInfo:a,baseCoinDecimals:i,index:c,mode:l,amountSetting:d}){if(a?.getCustomPayloadInfoRpcError)return S("wallet_extension_multisender_notice_failed_try_again");let h=Bs({balance:t,txAmount:e,isBaseCoin:r,baseCoinBalance:n,usedCoinBalance:o,usedFeeCoinBalance:s});if(h)return h;if(d.type!==pe.CUSTOM&&ai(e,0))return S("wallet_extension_ton_error_cannot_be_zeror");if(!r&&a){let g=a?.minTonLimit||"0",m=U.add(g||"0",s||"0");if(l===Q.ONE_TO_MANY&&(m=U.add(m,U.mul(g,c))),U.gt(m,n)){let p=U.div(m,10**i);return S("wallet_extension_ton_errormessage_insufficient_balance_gas2",{amount:p})}}return null}var Zd=9,xs=t=>t===xe,AC=({amountSetting:t,token:e,sendAddresses:r,setSendAddresses:n})=>{xr(async()=>{if(!t)return;let o=e?.decimals,{type:s,amount:a,min:i,max:c}=t;s===pe.CUSTOM&&n(r?.map(l=>({...l,txAmount:U.mul(a,10**o)}))),s===pe.RANDOM&&n(r?.map(l=>{let d=i&&c&&Number(i)<=Number(c)?Bt(i,c,bo(e)):0;return{...l,txAmount:U.mul(d,10**o)}}))},[t,r?.length,e?.decimals])},EC=({amountSetting:t,token:e,networkFee:r,sendAddresses:n,setSendAddresses:o,selectMode:s,isBaseCoin:a,formatZKSyncLiteSendAddresses:i})=>{xr(async()=>{if(!t)return;let{type:c}=t;if(c===pe.ALL&&s===Q.ONE_TO_MANY){let[{balance:l}]=n,d=n?.length,h=a?ln(l,U.mul(r?.networkFeeInt,d)):l,g=Fs(U.div(h,n?.length),0),m=Fs(U.div(l,d),0);o(n.map((p,u)=>(u===d-1&&(m=U.sub(l,U.mul(m,d-1)),g=a?U.sub(m,r?.networkFeeInt):m),{...p,txAmount:g,usedBalance:m})))}if(c===pe.ALL&&s!==Q.ONE_TO_MANY){let l=n.map(d=>{let{balance:h}=d,g=a?ln(h,r?.networkFeeInt):h;return{...d,txAmount:g}});o(e?.localType===fe?await i(l):l)}},[t.type,n?.length,e?.decimals,r?.networkFeeInt])},_C=t=>Sr(t?.baseCoinId===0?t.coinId:t?.baseCoinId),BC=({isSm:t,solRent:e,solRentMap:r,selectMode:n,isBaseCoin:o,sendAddresses:s,token:a,baseCoin:i,networkFee:c,tonSignInfo:l,amountSetting:d,setDataSource:h})=>{xr(async()=>{h(await(async()=>{let m=0,p=0,u=0,D=c?.networkFeeInt,A=Bs;return a?.localType===Be?A=Vd:a?.localType===fe?A=$d:xs(a?.localType)&&(A=x=>Kd({...x,tonSignInfo:l,baseCoinDecimals:i?.decimals,mode:n,amountSetting:d})),await Promise.all(s.map(async(x,w)=>{let{to:b,txAmount:k,balance:P,baseCoinBalance:I}=x,T=r[b]||"0";n===Q.ONE_TO_MANY?(u=U.add(u,T),m=U.add(m,k),p=U.add(p,D)):(u=T,m=k,p=D);let z=a?.decimals,K=U.div(k,10**z);return{...x,txAmount:K,index:w,showShortAddress:t,showTextOneLine:!1,order:w+1,error:await A({index:w,balance:P,needRent:T,usedRent:u,solRent:e,txAmount:k,isBaseCoin:o,formattedSolRent:er(e,{useContractPrecision:!0,contractPrecision:{decimals:Zd},precision:Zd}).value,baseCoinBalance:I,usedCoinBalance:m,usedFeeCoinBalance:p})}}))})())},[t,e,r,n,o,s,a?.decimals,i?.decimals,c?.networkFeeInt,l,d])},Xd=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:n}=Ue(),[o]=at(),[s]=Zu(),[a]=hn(),[i,c]=(0,ws.useState)([]),[l,d]=Ce(),h=we(qi),g=_C(t),m=yt(t);AC({amountSetting:r,token:t,sendAddresses:l,setSendAddresses:d}),EC({amountSetting:r,token:t,networkFee:e,sendAddresses:l,setSendAddresses:d,selectMode:o,isBaseCoin:m,formatZKSyncLiteSendAddresses:async E=>{let{ZksyncWallet:x}=await fo();return await Promise.all(E.map(async b=>({...b,txAmount:b?.txAmount&&await x.getCloseAmounts(b?.txAmount)})))}}),BC({isSm:n,solRent:s,solRentMap:a,selectMode:o,isBaseCoin:m,sendAddresses:l,token:t,baseCoin:g,networkFee:e,tonSignInfo:h,amountSetting:r,setDataSource:c});let u=(0,ws.useMemo)(()=>({[ir.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0,showShortAddress:xs(t?.localType)},[ir.TO]:{showShortAddress:xs(t?.localType)},[ir.MEMO]:{editable:!0},[ir.TX_AMOUNT]:{coin:{displayPrecision:t?.displayPrecision,stableCoin:t?.stableCoin}}}),[t?.localType,t?.displayPrecision,t?.stableCoin]),D=[...Rd];xs(t?.localType)&&D.splice(2,0,{title:"wallet_extension_ton_header_comment",key:ir.MEMO,type:Ke.MEMO,width:380});let A=D.map(E=>{let{title:x,key:w,type:b,...k}=E;return{title:S(x),dataIndex:w,key:w,render:_s(As[b],{...u[w],address:w}),...k}});return{dataSource:i,columns:A}};v();C();var _r=G(te());var xC=21e3,Jd=({from:t,to:e,token:r,network:n,txAmount:o=0})=>{let s=Nt(),a=we(vo),[i]=Eo(n?.realChainIdHex||n?.chainId),c=we(Yi),[l]=(0,_r.useState)(!1),[d,h]=(0,_r.useState)([]),[g,m]=(0,_r.useState)(0),[p,u]=(0,_r.useState)(xC),D=Iu(),A=Ro(),E=sl(),x=al(),w=jo(r?.coinId),b=zo(),k=we(it),P=Mo(n?.rpcUrl),I=ds(),T=H(W=>{s(wt(W))}),z=H(W=>{s(wt(W)),h(V=>{let oe=[...V],se=oe.pop();return oe.push({...se,...W,unitPriceDisplay:D(W.gasPrice)}),oe})}),K=lt(),j=we(dn);xi(()=>{[Te,Be,We,fe,xe].includes(r?.localType)||(async()=>{let W=await P({value:o,to:Qe(e,r?.localType),from:Qe(t,r?.localType)},Qe(r?.address,r.localType));K&&(W=U.ceilMul(W,j?.gasLimit,0)),u(W)})()},[o],{wait:500}),(0,_r.useEffect)(()=>{(async()=>{let W=await I({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});m(W)})()},[]);let{rpcNetworks:Y}=yi();return(0,_r.useEffect)(()=>{if(!(!Y?.length&&K)&&![Te,Be,We,fe,xe].includes(r?.localType)){let W,V=c.map(ae=>{let{level:_e,gasPrice:ve}=ae,{networkFee:Ze,networkFeeInt:B,networkFeeMarket:q}=fr({gasPrice:ve,gasLimit:p,price:g,usdToThisRate:a?.usdToThisRate}),M={...ae,gasLimit:p,tokenPrice:g,networkFee:Ze,networkFeeInt:B,networkFeeMarket:q,currencySymbol:a?.symbol,label:S(Jn[_e]),usdToThisRate:a?.usdToThisRate,unitPriceDisplay:D(ve)};return _e===Je.MEDIUM&&(W=M),M}),oe={...W},se=!1,me=k?.level;i?(oe={...i,...fr({gasLimit:p,price:g,gasPrice:i.gasPrice,usdToThisRate:a?.usdToThisRate})},se=!0):me===Je.CUSTOM&&(oe=[...d].pop()||W);let J={...oe,level:Je.CUSTOM,unitPriceDisplay:D(oe.gasPrice),label:S(Jn[Je.CUSTOM])};if(V.push(J),h(V),me){let ae=V.find(_e=>_e.level===me);s(wt(ae||W))}else s(se?wt(J):wt(W))}},[p,c,Y,K]),(0,_r.useEffect)(()=>{let W=async()=>{let J=await A({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:ae}=J||{};s(xo(ae)),s(wt(J))},V=async()=>{let J=await E({to:e,from:t,value:o,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});s(wt(J))},oe=async()=>{let J=await w({to:e,chainId:r?.chainId,contractAddress:r?.address});s(wt(J))},se=async()=>{let J=await x({coinId:r?.coinId,address:t});s(wt(J))},me=async()=>{let J=await b({baseCoinId:r?.baseCoinId,coinId:r?.coinId,chainId:r?.chainId,from:t,to:e,tokenAddress:r?.address,decimals:r?.decimals,amount:o});s(wt(J))};r?.localType===fe?oe():r?.localType===Be?W():r?.localType===We?V():r?.localType===Te?se():r?.localType===xe&&me()},[]),[l,d,T,z]};v();C();var Qd=G(te());var ef=t=>{let[e,r]=ct(),o=jd.filter(({value:a})=>!(t===fe&&a===pe.RANDOM)).map(({label:a,value:i})=>({value:i,label:S(a)})),s=H((a={})=>{r({...e,...a})});return(0,Qd.useLayoutEffect)(()=>{t===fe&&e?.type===pe.RANDOM&&r({type:pe.CUSTOM})},[t]),[e,o,s]};v();C();var Qn=G(te());var wC=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:n}=At(),o=(0,Qn.useMemo)(()=>{if(!e)return!0;if(e.type===pe.CUSTOM)return!e.amount&&e.amount!==0;if(e.type===pe.RANDOM){let{min:l,max:d}=e;return!l||!d||Number(l)>Number(d)||Number(d)===0}return!1},[e]),s=(0,Qn.useMemo)(()=>{if(!r)return!0;if(r.type===He.RANDOM){let{min:l,max:d}=r;return!l||!d||Number(l)>Number(d)}return!1},[r]),a=(0,Qn.useMemo)(()=>t?.some(({error:l,tonMemoError:d})=>!!l||!!d),[t]),i=(0,Qn.useMemo)(()=>o||s||a,[o,s,a]),c=H(()=>{Di?.(),n()});return[i,c]},tf=wC;v();C();var Mt={root:"_root_1mpnv_1",statistics:"_statistics_1mpnv_24",setting:"_setting_1mpnv_45",amount:"_amount_1mpnv_64",no_gas:"_no_gas_1mpnv_167",noGas:"_no_gas_1mpnv_167",interval:"_interval_1mpnv_257",gas:"_gas_1mpnv_440",address:"_address_1mpnv_531",footer:"_footer_1mpnv_611",alert:"_alert_1mpnv_682"};var yC=()=>{let{gotoAddressPage:t}=At(),{isSm:e}=Ue(),[r]=le(),[n]=qe(),[o]=Ce(),s=we(it),a=gs(),i=ti(ri(o,"balance"))[0],c=![Te,Be,We,fe,xe].includes(r?.localType),[l,d,h,g]=Jd({...i,network:n,token:r,isEvmTransaction:c}),[m,p,u]=ef(r?.localType),{dataSource:D,columns:A}=Xd({token:r,network:n,amountSetting:m,networkFee:s}),[E={},x]=dt(),[w,b]=tf({dataSource:D,amountSetting:m,intervalSetting:E}),k=fs();return rt.default.createElement(Tr,{footer:rt.default.createElement(y.Box,{className:Mt.footer},rt.default.createElement(re,{block:e,category:re.CATEGORY.outline,type:re.TYPE.primary,size:e?re.SIZE.lg:re.SIZE.xl,onClick:()=>{t()}},S("wallet_extension_footer_btn_back")),rt.default.createElement(re,{block:e,category:re.CATEGORY.fill,type:re.TYPE.highlight,size:e?re.SIZE.lg:re.SIZE.xl,onClick:()=>{b(),vi(a())},disabled:w||!s},S("wallet_extension_footer_btn_confirm"))),useOkg:!1},rt.default.createElement(y.Box,{className:(0,eo.default)(Mt.root)},rt.default.createElement(yn,{title:S("wallet_extension_amount_title_input_amount"),subtitle:S("wallet_extension_amount_subtitle_input_number")}),rt.default.createElement(ms,{className:Mt.statistics,statistics:k}),rt.default.createElement(y.Box,{className:Mt.setting},rt.default.createElement(y.Box,{className:(0,eo.default)(Mt.amount,{[Mt.no_gas]:!c})},rt.default.createElement(Yd,{value:m,options:p,onChange:u})),rt.default.createElement(y.Box,{className:(0,eo.default)(Mt.interval,{[Mt.no_gas]:!c})},rt.default.createElement(Gd,{value:E,onChange:x})),c&&rt.default.createElement(y.Box,{className:Mt.gas},rt.default.createElement(Wd,{loading:l,network:n,options:d,onChange:h,value:s,onCustomChange:g})))),rt.default.createElement(y.Box,{className:(0,eo.default)(Mt.address)},r?.localType===fe&&m.type===pe.ALL&&rt.default.createElement(Rn,{closable:!1,className:Mt.alert,title:S("wallet_extension_toast_zksync_max_num")}),rt.default.createElement(ps,{dataSource:D,columns:A})))},rf=rt.default.memo(yC);v();C();var vt=G(te());v();C();var nn=G(te());v();C();var Sn=G(te());v();C();var SC=t=>`${vu()}${t}`,nf=SC;var of=()=>{let t=nf("/cdn/assets/files/235/C7BA61E964654AF6.csv");return{questions:[{question:S("wallet_extension_faq_title_distinction"),answer:Sn.default.createElement("pre",null,S("wallet_extension_faq_text_one_to_many"))},{question:S("wallet_extension_sending_title_multisender_network"),answer:Sn.default.createElement("pre",null,S("wallet_extension_sending_subtitle_multisender_evm"))},{question:S("wallet_extension_faq_title_what_transfer"),answer:Sn.default.createElement("pre",null,S("wallet_extension_faq_text_transfer_definition"))},{question:S("wallet_extension_faq_title_how_transfer"),answer:Sn.default.createElement("pre",null,S("wallet_extension_faq_text_transfer_method",{btn:Sn.default.createElement(jn,{type:jn.TYPE.primary,href:t,weight:jn.WEIGHT.muted,size:jn.SIZE.sm},S("wallet_extension_multisender_btn_download"))}))}]}};v();C();var Tn={"retina-border-basic":"_retina-border-basic_1vvj9_1",retinaBorderBasic:"_retina-border-basic_1vvj9_1",root:"_root_1vvj9_30",title:"_title_1vvj9_95",item:"_item_1vvj9_118",question:"_question_1vvj9_194",answer:"_answer_1vvj9_211"};function TC(){let t=S("wallet_extension_faq_maintitle_question"),{questions:e}=of();return nn.default.createElement(y.Box,{className:Tn.root},nn.default.createElement(y.Box,{className:Tn.title},t),nn.default.createElement(y.Box,null,e.map((r,n)=>nn.default.createElement(y.Box,{key:n,className:Tn.item},nn.default.createElement(y.Box,{className:Tn.question},r.question),nn.default.createElement(y.Box,{className:Tn.answer},r.answer)))))}var sf=TC;v();C();var Tt=G(te()),to=G(Ve());v();C();var ht={root:"_root_a40u5_2",select:"_select_a40u5_67",titleBox:"_titleBox_a40u5_88",title:"_title_a40u5_88",tip:"_tip_a40u5_115",card:"_card_a40u5_131",icon:"_icon_a40u5_188",checkBox:"_checkBox_a40u5_204",check:"_check_a40u5_204",disabled:"_disabled_a40u5_220",active:"_active_a40u5_224",disabledContent:"_disabledContent_a40u5_227",name:"_name_a40u5_230",subtitle:"_subtitle_a40u5_237"};function bC(t){let{icon:e,name:r,mode:n,disable:o,active:s,onSelected:a,subtitle:i}=t,c=()=>{a(n);let l={[Q.ONE_TO_MANY]:"1tomany",[Q.MANY_TO_MANY]:"manytomany",[Q.MANY_TO_ONE]:"manyto1"};hi({button_name:l[n]})};return Tt.default.createElement(y.Box,{className:(0,to.default)(ht.card,{[ht.active]:s,[ht.disabled]:o}),onClick:c},Tt.default.createElement("img",{src:e,height:72,alt:"",className:(0,to.default)(ht.icon,{[ht.disabledContent]:o})}),Tt.default.createElement(y.Box,{className:(0,to.default)(ht.name,{[ht.disabledContent]:o})},r),i&&Tt.default.createElement(y.Box,{className:(0,to.default)(ht.subtitle,{[ht.disabledContent]:o})},i),s&&Tt.default.createElement(y.Box,{className:ht.checkBox},Tt.default.createElement(yr.Circle,{checked:!0})))}function FC(){let t=S("wallet_extension_type_title_transaction_method");return Tt.default.createElement(y.FlexBox,{className:ht.titleBox,align:y.ALIGN.center},Tt.default.createElement(y.Box,{className:ht.title},t))}function NC(t){let{mode:e,onSelected:r,selectedNetwork:n}=t,o=yo({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),s=yo({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),a=yo({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),i={[Q.ONE_TO_MANY]:{mode:Q.ONE_TO_MANY,icon:o,disable:n?.localType===fe,name:S("wallet_extension_type_pic_one_to_many")},[Q.MANY_TO_ONE]:{mode:Q.MANY_TO_ONE,icon:s,name:S("wallet_extension_type_pic_many_to_one")},[Q.MANY_TO_MANY]:{mode:Q.MANY_TO_MANY,icon:a,name:S("wallet_extension_type_pic_many_to_many")}};return Tt.default.createElement(y.Box,{className:ht.root},Tt.default.createElement(FC,null),Tt.default.createElement(y.Box,{className:ht.select},Object.values(i).map((c,l)=>Tt.default.createElement(bC,{key:l,onSelected:r,active:c.mode===e,...c}))))}var af=NC;v();C();var Ee=G(te());var Wa=G(Ve()),cf=G(cu());v();C();var uf=G(te());var kC=t=>(0,uf.useCallback)(()=>{globalThis.platform.openExtensionInPopup(`${fu}?network=${t}&close=true`,"",!1)},[t]),lf=kC;v();C();var Vt={root:"_root_1ggs6_1",title:"_title_1ggs6_4",inputWrap:"_inputWrap_1ggs6_22",option:"_option_1ggs6_25",inputPopup:"_inputPopup_1ggs6_37",show:"_show_1ggs6_53",loadingWrap:"_loadingWrap_1ggs6_56","select-up-active":"_select-up-active_1ggs6_62",selectUpActive:"_select-up-active_1ggs6_62","item-image":"_item-image_1ggs6_66",itemImage:"_item-image_1ggs6_66","arrow-down-icon":"_arrow-down-icon_1ggs6_70",arrowDownIcon:"_arrow-down-icon_1ggs6_70","add-custom-coin":"_add-custom-coin_1ggs6_74",addCustomCoin:"_add-custom-coin_1ggs6_74"};var OC="0x",PC=async(t,e)=>{try{return!Nu(e)||await t.getCode(e)===OC}catch{return!0}},IC=async(t,e)=>{let{ethers:r}=await On(),n=new r.Contract(t,cf.default,e),[o,s,a]=await Promise.all([n.symbol(),(await n.decimals()).toString(),n.name()]);return{name:a,symbol:o,decimals:s}};function LC(t,e){let{value:r,options:n,disabled:o,selectedNetwork:s,onSelect:a,onInputChange:i,onCustomContractChange:c,refreshInfiniteScrollRef:l,tokensLoadingMore:d}=t,h=(0,Ee.useRef)(),g=(0,Ee.useRef)(!1),[m,p]=(0,Ee.useState)(!1),[u,D]=(0,Ee.useState)(!1),[A,E]=(0,Ee.useState)(!1),[x,w]=(0,Ee.useState)(r?.address||""),[b,k]=(0,Ee.useState)(!1),P=(0,Ee.useMemo)(()=>![Te,Be,We,fe,xe].includes(s?.localType),[s?.localType]),I=(0,Ee.useMemo)(()=>!P&&!n?.length&&x&&s?.localType!==fe,[P,n?.length,x,s?.localType]),T=se=>(E(!1),w(""),a(se?{...se,custom:!1}:null)),z=H(async({target:se})=>{w(se?.value)},[s?.rpcUrl]);(0,Ee.useEffect)(()=>{i?.(x)},[x,i]);let K=async()=>{if(g.current)return;let se=n.find(({address:me})=>!!x&&me===x);if(se)T(se);else if(x&&P){let me=await _o(s?.rpcUrl);if(await PC(me,x)===!1){let ae=await IC(x,me);c?.({...ae,address:x,custom:!0}),E(!1)}else E(!0),c?.(null)}};(0,Ee.useEffect)(()=>{w(""),E(!1)},[s?.chainId]);let j=lt();(0,Ee.useEffect)(()=>{w(""),E(!1)},[j]);let Y=x&&A,W=!!n?.length;(0,Ee.useEffect)(()=>{!m||(W?W&&D(!0):D(!1))},[n]),(0,Ee.useLayoutEffect)(()=>{u&&l?.()},[u,l]),_i(()=>{if(b){k(!1);return}m&&p(!1),u&&D(!1)},h);let V=S("wallet_extension_type_placeholder_select_crypto"),oe=Ee.default.createElement("span",null,oi("wallet_extension_multisender_search_tips_no_results_add",{add:Ee.default.createElement("span",{onClick:lf(s?.name),className:Vt.addCustomCoin,"data-testid":pn.BATCH_TRANSFER_PAGE.ADD_CUSTOM_COIN},S("wallet_extension_multisender_search_tips_textbtn_add_custom"))}));return Ee.default.createElement(y.Box,{className:Vt.root},Ee.default.createElement(y.Box,{className:Vt.title},S("wallet_extension_type_title_select_coin")),Ee.default.createElement("div",{className:Vt.inputWrap},Ee.default.createElement(be,{getBoxRef:se=>{h.current=se},style:{width:"100%"},error:Y&&S("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),tips:I?oe:"",placeholder:V,value:r&&r?.custom===!1?r?.symbol:x||r?.address,onChange:z,onBlur:()=>{K()},onFocus:()=>{p(!0),W&&D(!0)},size:be.SIZE.xl,disabled:o,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:Ee.default.createElement(Ye,{className:(0,Wa.default)({[Vt["select-up-active"]]:u}),icon:"okx-wallet-plugin-arrow-small-down",size:Ye.SIZE.xs}),onClear:()=>(k(!0),g.current=!1,T(null))}),!!u&&Ee.default.createElement("div",{ref:e,className:(0,Wa.default)(Vt.inputPopup,{[Vt.show]:u})},n.map(se=>{let{image:me,imageUrl:J,symbol:ae,address:_e}=se;return Ee.default.createElement("div",{className:Vt.option,key:_e||ae,onMouseDown:()=>{g.current=!0},onClick:()=>{T(se)}},Ee.default.createElement(Ye,{className:Vt.itemImage,src:me||J,text:ae,size:Ye.SIZE.md}),ae)}),!!d&&Ee.default.createElement("div",{className:Vt.loadingWrap},Ee.default.createElement(Ut.Circle,{size:Ut.SIZE.md})))))}var df=Ee.default.forwardRef(LC);v();C();var xt=G(te());v();C();var $t={root:"_root_1jex4_2",footer:"_footer_1jex4_11",network:"_network_1jex4_80",networkTitle:"_networkTitle_1jex4_156",networkSelectBox:"_networkSelectBox_1jex4_175",networkSelect:"_networkSelect_1jex4_175",tokenSelect:"_tokenSelect_1jex4_221",icon:"_icon_1jex4_262",loader:"_loader_1jex4_265","network-icon":"_network-icon_1jex4_268",networkIcon:"_network-icon_1jex4_268"};var MC=(t,e)=>t;function RC(t){let e=(0,xt.useRef)(t);return wi(()=>{e.current=t},[t]),e.current}var jC=()=>{let[t,e]=(0,xt.useState)(!1),r=Mu(),[,n]=le(),[,o]=Ce(),{isRpcMode:s,currentNetworkUniqueId:a}=we(Si),i=(0,xt.useMemo)(()=>r.find(p=>MC(s,p)?p.uniqueId===a:p.netWorkId===a),[r,s,a]),c=RC(i),[l,d]=qe(c),h=(0,xt.useMemo)(()=>r.map(p=>{let{chainId:u,icon:D,chainName:A,rpcUrl:E}=p;return{network:p,value:u,searchKeyword:A,label:xt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{height:"20px",width:"100%"}},xt.default.createElement(y.FlexBox,{align:y.ALIGN.center,style:{flex:1}},l?.rpcUrl===E&&t?xt.default.createElement(Ut,{className:$t.loader,size:Ut.SIZE.md}):xt.default.createElement(Ye,{className:$t.networkIcon,src:D,text:A,size:Ye.SIZE.md}),A))}}),[r,l?.rpcUrl,t]),g=async p=>{try{e(!0),await(await _o(p)).getFeeData()}catch{let D=Hr.warn({title:S("developer_mode_network_toast_connect_failed"),text:S("developer_mode_network_toast_changenetwork"),cancelText:S("wallet_extension_sending_btn_cancel"),confirmText:S("developer_mode_network_btn_retry"),confirmBtnProps:{type:re.TYPE.highlight,size:re.SIZE.lg},onCancel:()=>{D.destroy(),d(null)},onConfirm:()=>{D.destroy(),g(p)}})}finally{e(!1)}},m=H(({network:p={},label:u,...D})=>{d({...p,...D}),p?.appBaseChain==="ethereum"?g(p.rpcUrl).then(()=>{n(null)}).catch(()=>{}):n(null),gi(),o([])},[]);return(0,xt.useEffect)(()=>{n(null)},[s]),[t,l,h,m]},ff=jC;v();C();var mf=G(te());var zC=t=>{let[e,r]=le(),[n,o]=(0,mf.useState)(""),s=lt(),a=_u(),i=t||{},{list:c,listRef:l,refreshDom:d,loadingMore:h}=yd(i,n),g=async A=>{if(!A){r(null);return}let E=!A?.address,x=await pi({coinId:A.coinId}),w;E?w=x:w=a.find(({coinId:k})=>k===A.baseCoinId);let{chainId:b}=i;x===null||!E&&w===null||r({chainId:b,...A,...x,baseCoin:E?void 0:w})},m=A=>{let E=!A.address,{chainId:x}=i,w=a.find(({chainId:b})=>b===ko(x));r({chainId:x,...A,baseCoin:E?void 0:w})},p=H(A=>{g(A)}),u=H(A=>{o(A)}),D=H(A=>{m(A)});return[e,c,l,d,h,{onBatchTokenChange:s?D:p,onBatchCustomTokenChange:D,onInputChange:u}]},pf=zC;var WC=()=>{let{isSm:t}=Ue(),{gotoAddressPage:e}=At(),[r,n]=at(),[o,s,a,i]=ff(),[c,l,d,h,g,{onBatchTokenChange:m,onBatchCustomTokenChange:p,onInputChange:u}]=pf(s);return vt.default.createElement(Tr,{footer:vt.default.createElement(y.FlexBox,{justify:"flex-end",className:$t.footer},vt.default.createElement(re,{block:t,category:re.CATEGORY.fill,type:re.TYPE.highlight,size:t?re.SIZE.lg:re.SIZE.xl,disabled:!s?.chainId||!r||!c?.symbol,onClick:e},S("wallet_extension_footer_btn_next")))},vt.default.createElement(y.Box,{className:$t.root},vt.default.createElement(yn,{title:S("wallet_extension_type_title_select_type"),subtitle:S("wallet_extension_type_subtitle_select")}),vt.default.createElement(y.Box,{className:$t.network},vt.default.createElement(y.Box,{className:$t.networkSelectBox},vt.default.createElement(y.Box,{className:$t.networkTitle},S("wallet_extension_type_title_select_internet")),vt.default.createElement(zs,{block:!0,placeholder:S("wallet_extension_type_placeholder_ethereum"),size:zs.SIZE.xl,onChange:i,value:s?.chainId,options:a,className:$t.networkSelect,disabled:o,searchFocus:!1,searchPlaceholder:S("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),vt.default.createElement(y.Box,{className:$t.tokenSelect},vt.default.createElement(df,{ref:d,disabled:!s?.chainId,value:c,options:l,onSelect:m,onInputChange:u,onCustomContractChange:p,selectedNetwork:s,tokensLoadingMore:g,refreshInfiniteScrollRef:h}))),vt.default.createElement(af,{mode:r,selectedNetwork:s,onSelected:n}),vt.default.createElement(sf,null)))},gf=vt.default.memo(WC);v();C();var nt=G(te()),Kf=G(Ve());ze();v();C();var Br={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash",MEMO:"memo"},ys=[{title:"wallet_extension_list_title_send_address",key:Br.FROM,type:Ke.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Br.TO,type:Ke.ADDRESS},{title:"wallet_extension_list_title_amount",key:Br.TX_AMOUNT,type:Ke.AMOUNT},{title:"wallet_extension_list_colheader_state",key:Br.STATUS,type:Ke.STATUS},{title:"wallet_extension_list_colheader_hash",key:Br.HASH,type:Ke.HASH,align:"center",width:"200px"}],Ss={title:"wallet_extension_ton_header_comment",key:Br.MEMO,type:Ke.MEMO};var ue={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},hf={[ue.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:re.CATEGORY.outline,type:re.TYPE.primary},actionType:ue.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:re.CATEGORY.outline,type:re.TYPE.primary},actionType:ue.PAUSE}],[ue.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:re.CATEGORY.outline,type:re.TYPE.primary},actionType:ue.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:re.CATEGORY.fill,type:re.TYPE.highlight},actionType:ue.SENDING}],[ue.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:re.CATEGORY.fill,type:re.TYPE.highlight},actionType:ue.DONE}],[ue.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:re.CATEGORY.outline,type:re.TYPE.primary},actionType:ue.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:re.CATEGORY.fill,type:re.TYPE.highlight},actionType:ue.DONE}],[ue.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:re.CATEGORY.outline,type:re.TYPE.primary},actionType:ue.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:re.CATEGORY.fill,type:re.TYPE.highlight},actionType:ue.FAILED}]},vf={[ue.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[ue.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[ue.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[ue.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};v();C();var on=G(te());v();C();var ro=G(te());v();C();var Ge={root:"_root_edfdl_1",header:"_header_edfdl_24",content:"_content_edfdl_24",alert:"_alert_edfdl_28",statistics:"_statistics_edfdl_57",address:"_address_edfdl_73",footer:"_footer_edfdl_100",loadingIcon:"_loadingIcon_edfdl_171",pauseLoadingIcon:"_pauseLoadingIcon_edfdl_186",finished:"_finished_edfdl_190",finishedIcon:"_finishedIcon_edfdl_193",failed:"_failed_edfdl_197",failedIcon:"_failedIcon_edfdl_200",sendError:"_sendError_edfdl_204",warning:"_warning_edfdl_207",export:"_export_edfdl_214",exportIcon:"_exportIcon_edfdl_239",finishedConfirm:"_finishedConfirm_edfdl_243","status-icon":"_status-icon_edfdl_285",statusIcon:"_status-icon_edfdl_285","status-icon-pause":"_status-icon-pause_edfdl_298",statusIconPause:"_status-icon-pause_edfdl_298","status-title":"_status-title_edfdl_301",statusTitle:"_status-title_edfdl_301","status-desc-text":"_status-desc-text_edfdl_310",statusDescText:"_status-desc-text_edfdl_310","status-desc-container":"_status-desc-container_edfdl_326",statusDescContainer:"_status-desc-container_edfdl_326","result-main":"_result-main_edfdl_335",resultMain:"_result-main_edfdl_335"};var Cf=({onExport:t,isFinished:e,isSm:r})=>ro.default.createElement(y.Box,{className:Ge.warning},e&&ro.default.createElement(y.Box,{className:Ge.export,onClick:t},ro.default.createElement(Ye,{size:Ye.SIZE.sm,icon:"okx-wallet-plugin-export"}),ro.default.createElement(y.Box,null,S("wallet_extension_complete_btn_export_transaction"))),!e&&!r&&S("wallet_extension_sending_text_no_close_page"));var UC=({onExport:t,onSendStatusChange:e,sendStatus:r=ue.SENDING})=>{let{isSm:n}=Ue(),o=hf[r],s=r===ue.FINISHED,a=s?y.Box:on.default.Fragment;return on.default.createElement(y.FlexBox,{align:y.ALIGN.center,className:Ge.footer},on.default.createElement(Cf,{onExport:t,isFinished:s,isSm:n}),o.map(({actionProps:{children:i,...c},actionType:l})=>on.default.createElement(a,{className:n&&Ge.finishedConfirm},on.default.createElement(re,{block:n,...c,size:n?re.SIZE.lg:re.SIZE.xl,onClick:()=>{e?.(l)}},S(i)))))},Df=on.default.memo(UC);v();C();var Kt=G(te()),Af=G(Ve());var GC=({sendStatus:t})=>{if([ue.SENDING,ue.PAUSE].includes(t))return Kt.default.createElement(Ut,{loaderClassName:(0,Af.default)(Ge.loadingIcon,{[Ge.pauseLoadingIcon]:t===ue.PAUSE})});let e={className:Ge["status-icon"]};return t===ue.FAILED?e=Object.assign(e,{icon:"okx-wallet-plugin-clear",style:{color:"var(--okd-color-semantic-negative)"}}):t===ue.FINISHED&&(e=Object.assign(e,{icon:"okx-wallet-plugin-completed",style:{color:"var(--okd-color-semantic-positive)"}})),Kt.default.createElement(Ye,{...e})},HC=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=Ue(),{title:n,style:o}=vf[t],s=S(n),a=(0,Kt.useMemo)(()=>Kt.default.createElement(Ae.Text,{strong:700,style:o,className:Ge["status-title"]},s),[o,s]);return Kt.default.createElement(y.Space,{className:Ge["result-main"],space:r?"16px":"22px",align:y.ALIGN.center,direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal},Kt.default.createElement(GC,{sendStatus:t}),Kt.default.createElement(y.Space,{direction:y.DIRECTION.vertical,space:"8px"},a,Kt.default.createElement(y.Space,{space:r?"4px":"8px",direction:r?y.DIRECTION.vertical:y.DIRECTION.horizontal,className:Ge["status-desc-container"]},e.map(({title:i,args:c,style:l})=>Kt.default.createElement(Ae.Text,{key:i,style:l,className:Ge["status-desc-text"]},S(i,c))))))},Ef=HC;v();C();var no=G(te());function YC({sendStatus:t}){let{isSm:e}=Ue(),[r,n]=(0,no.useState)(!0),o=Pi.FINISHED===t,s=S("wallet_extension_sending_text_no_close_page"),a=e&&r&&!o;return no.default.createElement(y.Box,{className:Ge.alert},a?no.default.createElement(Rn,{desc:s,type:Rn.TYPE.info,onClose:()=>{n(!1)}}):null)}var _f=YC;v();C();var Bf=G(te());var qC=()=>{let[t]=le(),[e=[]]=Ce(),r=e.map((a,i)=>({...a,showShortAddress:!0,showTextOneLine:!0,order:i+1,index:i,txAmount:U.div(a?.txAmount,10**t?.decimals)})),n=(0,Bf.useMemo)(()=>({[Br.FROM]:{showOrder:!0,isFromAddress:!0},[Br.TX_AMOUNT]:{coin:{signTokenPrecision:t?.signTokenPrecision,stableCoin:t?.stableCoin}}}),[t?.signTokenPrecision,t?.stableCoin]),o=[...ys];t?.localType===xe&&o.splice(2,0,Ss);let s=o.map(a=>{let{title:i,key:c,type:l,...d}=a;return{title:S(i),dataIndex:c,key:c,render:_s(As[l],n[c]),...d}});return{dataSource:r,columns:s}},xf=qC;v();C();var Ua=G(te());var wf=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,Ua.useMemo)(()=>{let n=0,o=0,s=0,a=e?.length;return e.forEach(({txStatus:i})=>{i===ne.FAILED&&n++,i===ne.SUCCEED&&o++,i===ne.PENDING&&s++}),{total:a,failed:n,success:o,notExecuted:a-n-s-o}},[e]);return(0,Ua.useMemo)(()=>{if(t===ue.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:n,failed:o,success:s,notExecuted:a}=r,i=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:U.thousandFormat(s)}}];return o>0&&i.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:U.thousandFormat(o)},style:{color:"var(--okd-color-semantic-negative)"}}),t===ue.FINISHED?a>0&&i.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:U.thousandFormat(a)}}):i.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:U.thousandFormat(n)}}),i},[t,r])};v();C();var sn=G(te());var Hf=G(js());ze();v();C();v();C();var bn=G(te());v();C();var VC=async(t,e,r)=>{let n;try{if(n=await t.getTransactionReceipt(e),n?.status===0)throw new Error("Transaction failed")}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}for(;!n?.blockNumber&&r?.current&&!r.current.isCancelled;)try{await new Promise(o=>setTimeout(o,5e3)),n=await t.getTransactionReceipt(e)}catch(o){if(o?.error?.data!=="transaction indexing is in progress")throw o}return n},yf=VC;v();C();ze();var Sf=({address:t,localType:e,contractAddress:r,symbol:n,errorMsg:o,txParams:s})=>{try{Ya.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:n,txParams:s,errorMsg:o})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{Zt()}};v();C();var Tf=G(te());var $C=()=>{let t=(0,Tf.useRef)(null);return H(e=>new Promise(r=>{let n=async()=>{let{data:o}=await Jt(Xt.batchGetTxStatus,{txHashList:[e]}),s=o[e];["SUCCESS","ERROR"].includes(s)&&(r(s),t.current&&clearInterval(t.current))};t.current=setInterval(()=>{n()},2e3)}))},Ts=$C;v();C();var KC=t=>{let e=Vr(t);return H(async r=>await(await e()).getTransactionCount(r,"latest"))},bf=KC;v();C();var ZC=()=>{let t=Dt(),e=mn(Be);return H(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:dr,address:e});return r})},Ff=ZC;var XC=({selectedNetworkFee:t,injectGasPrice:e})=>{let r=e?.gasPrice||t?.gasPrice,n=e?.maxFeePerGas||t?.maxFeePerGas,o=e?.maxPriorityFeePerGas||t?.maxPriorityFeePerGas;return{gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:o}},Nf=t=>{let e=Vr(t),[r]=at(),n=(0,bn.useRef)(!1),o=(0,bn.useRef)({}),[s]=le(),[a]=qe(),i=bf(t),c=Mo(t),l=(0,bn.useRef)({isCancelled:!1});(0,bn.useEffect)(()=>()=>{l.current={isCancelled:!0}},[]);let d=Pu(),[h]=vn(),g=we(it),m=Eu(),p=we(Ui);n.current=p,o.current=g;let u=lt(),D=we(dn);return H(async({to:A,from:E,value:x,usedBalance:w,balance:b,baseCoinBalance:k,transferAmountType:P,gasPrice:I})=>{let T=null,z=n.current||!1,K=null;try{let j=x,Y=await e(),{chainId:W}=a,V=yt(s),oe=E&&Qe(E,s?.localType),se=A&&Qe(A,s?.localType),me=await m(Qe(s?.address,s?.localType),oe,Y)||b,J=await c({to:se,from:oe,value:x},Qe(s?.address,s?.localType));u&&(J=U.ceilMul(J,D?.gasLimit,0));let ae=await i(oe),_e=o.current,{gasPrice:ve,maxFeePerGas:Ze,maxPriorityFeePerGas:B}=XC({selectedNetworkFee:_e,injectGasPrice:I}),{networkFeeInt:q}=fr({gasPrice:ve,gasLimit:J}),M={to:A,from:E,value:x,nonce:ae,chainId:W,gasLimit:J,supportEip1559:h,contractAddress:Qe(s?.address,s?.localType),localType:s?.localType};if(h?M={...M,maxFeePerGas:Ze,maxPriorityFeePerGas:B,type:Ps.FEE_MARKET}:M={...M,gasPrice:ve,type:Ps.LEGACY},K=Fo({to:A,from:E,value:x,nonce:ae,chainId:W,gasLimit:J,gasPrice:ve,maxFeePerGas:Ze,supportEip1559:h,maxPriorityFeePerGas:B,contractAddress:Qe(s?.address,s?.localType),localType:s?.localType}),z){let ie=await d({...K,coinId:s?.coinId});q=U.add(q,ie)}if(V&&r!==Q.ONE_TO_MANY&&P===pe.ALL&&(j=U.sub(me,q),K=Fo(Object.assign(M,{value:j}))),V&&r===Q.ONE_TO_MANY&&P===pe.ALL&&(j=U.sub(w,q),K=Fo(Object.assign(M,{value:j}))),!qr({isBaseCoin:V,balance:me,baseCoinBalance:k,txAmount:M?.value,networkFee:q}))return{to:A,from:E,txStatus:ne?.FAILED};T=await To(K,Bo(K?.from,s.localType),bi(s.localType));let de=await zn(li,T);return await Y.send("eth_sendRawTransaction",[T]),await yf(Y,de,l),{to:A,from:E,txHash:de,txAmount:j,txStatus:ne?.SUCCEED}}catch(j){let Y=j;return Sf({address:E,localType:a?.localType,contractAddress:Qe(s?.address,s?.localType),symbol:s?.symbol,errorMsg:Y?.message,txParams:K}),{to:A,from:E,txStatus:ne?.FAILED,errorMsg:Y.message}}})},kf=()=>{let[t]=le(),[e]=at(),r=Yr({localType:Be,coinId:t?.coinId}),n=Ff(),o=Ro(),s=we(it);return H(async({to:a,from:i,amount:c,balance:l,usedBalance:d,baseCoinBalance:h,transferAmountType:g})=>{try{let m=c,p=yt(t),u=await n(),D=await o({coinId:t?.coinId,chainId:t?.chainId,to:a,from:i}),{toAddressLegal:A}=D,E=!A,x=D||s||{},{computeUnitLimit:w,computeUnitPrice:b,networkFeeInt:k}=x;g===pe.ALL&&p&&e!==Q.ONE_TO_MANY&&(m=U.sub(l,k)),g===pe.ALL&&p&&e===Q.ONE_TO_MANY&&(m=U.sub(d,k));let P={to:a,from:i,blockHash:u,payer:i,computeUnitLimit:w,computeUnitPrice:b,amount:m,type:p?Is.TRANSFER:Is.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(P,{mint:t.address,createAssociatedAddress:E}),t?.protocolType===Pn.SPL_TOKEN_2022&&Object.assign(P,{token2022:!0,decimal:t?.decimals}),!qr({isBaseCoin:p,balance:l,baseCoinBalance:h,txAmount:m,networkFee:k}))return{to:a,from:i,txStatus:ne?.FAILED};let T=await To(P,i,Be),z=await zn(Be,T);return await r(T,{txHash:z,signedTx:T,toAdr:a,fromAdr:i,coinAmount:m,serviceCharge:k,walletId:void 0}),{to:a,from:i,txHash:z,txAmount:m,startTime:Date.now(),txStatus:ne?.PENDING}}catch{return{to:a,from:i,txStatus:ne?.FAILED}}})},Of=()=>{let[t]=le(),[e]=at(),r=el(t?.coinId),n=tl(t?.coinId),o=Lo(),s=Ts();return H(async({to:a,from:i,amount:c,balance:l,usedBalance:d,baseCoinBalance:h,transferAmountType:g})=>{try{let m=c,p=yt(t),u=await o({to:a,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(g===pe.ALL&&p&&e!==Q.ONE_TO_MANY&&(m=U.sub(l,u)),g===pe.ALL&&p&&e===Q.ONE_TO_MANY&&(m=U.sub(d,u)),!qr({isBaseCoin:p,balance:l,baseCoinBalance:h,txAmount:m,networkFee:u}))return{to:a,from:i,txStatus:ne?.FAILED};let{tx:A,txBytes:E,signedTx:x}=await r({to:a,from:i,value:c,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:w}=x||{};return await n({tx:A,txBytes:E,to:a,from:i,coinAmount:c,signedTx:x}),e===Q.ONE_TO_MANY&&await s(w)==="ERROR"?{to:a,from:i,txStatus:ne?.FAILED}:{to:a,from:i,txHash:w,txAmount:m,startTime:Date.now(),txStatus:ne?.PENDING}}catch{return{to:a,from:i,txStatus:ne?.FAILED}}})},Pf=()=>{let[t]=le(),[e]=at(),r=Dt(),n=Yr({localType:fe,coinId:t?.coinId}),o=we(it),s=jo(t?.coinId);return H(async({to:a,from:i,amount:c,balance:l,baseCoinBalance:d,transferAmountType:h})=>{try{let g=c,m=yt(t),p=await r({value:"0",toAddr:a,address:i,fromAddr:i,coinId:t?.coinId}),{accountId:u,nonce:D}=p||{},E=await s({to:a,chainId:t?.chainId,contractAddress:t?.address})||o||{},{networkFeeInt:x}=E;h===pe.ALL&&m&&e!==Q.ONE_TO_MANY&&(g=U.sub(l,x));let w={to:a,from:i,type:"transfer",fees:x,amounts:g,decimals:t?.decimals,nonce:Number.parseInt(D,10),accountId:Number.parseInt(u,10),tokenSymbol:t?.originSymbol,tokenId:Number.parseInt(t?.tokenId,10)};if(!qr({isBaseCoin:m,balance:l,baseCoinBalance:d,txAmount:g,networkFee:x}))return{to:a,from:i,txStatus:ne?.FAILED};let k=await To(w,i,fe);if(k?.code)return{to:a,from:i,txStatus:ne?.FAILED};let{signature:P,tx:I}=k,{txHash:T,...z}=I||{};return await n(JSON.stringify({signature:P,tx:z}),{txHash:T,signedTx:k,toAdr:I?.to,fromAdr:i,coinAmount:g,serviceCharge:I?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:a,from:i,txHash:T,txAmount:g,startTime:Date.now(),txStatus:ne?.PENDING}}catch{return{to:a,from:i,txStatus:ne?.FAILED}}})},If=()=>{let[t]=le(),[e]=at(),r=Ju(),n=Yr({localType:Te,coinId:t?.coinId}),o=Io(),s=Ts();return H(async({to:a,from:i,amount:c,balance:l,usedBalance:d,baseCoinBalance:h,transferAmountType:g})=>{try{let m=c,p=t?.baseCoinId===0,u=await o({address:i,coinId:t?.coinId}),{tyArg:D,chainId:A,networkFee:E,sequenceNumber:x,maxGasAmount:w,gasUnitPrice:b,expirationTimestampSecs:k}=u;if(g===pe.ALL&&p&&e!==Q.ONE_TO_MANY&&(m=U.sub(l,E)),g===pe.ALL&&p&&e===Q.ONE_TO_MANY&&(m=U.sub(d,E)),!qr({isBaseCoin:p,balance:l,baseCoinBalance:h,txAmount:m,networkFee:E}))return{to:a,from:i,txStatus:ne?.FAILED};let I=await r({to:a,from:i,tyArg:D,chainId:A,gasUnitPrice:b,maxGasAmount:w,sequenceNumber:x,amount:m,coinId:t?.coinId,expirationTimestampSecs:k,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),T=await zn(Te,I);return await n(I,{txHash:T,signedTx:I,toAdr:a,fromAdr:i,coinAmount:m,serviceCharge:E,walletId:void 0,extJson:JSON.stringify({nonce:x})}),e===Q.ONE_TO_MANY?(await s(T),{to:a,from:i,txHash:T,txAmount:m,txStatus:ne?.SUCCEED}):{to:a,from:i,txHash:T,txAmount:m,startTime:Date.now(),txStatus:ne?.PENDING}}catch{return{to:a,from:i,txStatus:ne?.FAILED}}})},JC=(t,e,r)=>(t===Q.MANY_TO_MANY||t===Q.MANY_TO_ONE||t===Q.ONE_TO_MANY&&r)&&e===pe.ALL?wr.CARRY_ALL_REMAINING_BALANCE:wr.PAY_GAS_SEPARATELY+wr.IGNORE_ERRORS,QC=({amount:t,balance:e,usedBalance:r,networkFeeInt:n,transferAmountType:o,isBaseCoin:s,mode:a,isLast:i})=>{let c=t,l;return o===pe.ALL&&s&&a!==Q.ONE_TO_MANY&&(c=U.sub(e,n)),o===pe.ALL&&s&&a===Q.ONE_TO_MANY&&(c=U.sub(r,n),i&&(l="0")),{realTxAmount:c,serverCountAmount:l}};function Lf(){let[t]=le(),[e]=at(),r=zo(),n=gn({localType:xe}),o=Yr({coinId:t?.coinId,localType:xe}),s=Ts();return H(async({to:a,from:i,amount:c,balance:l,usedBalance:d,baseCoinBalance:h,transferAmountType:g,memo:m,isLast:p})=>{try{let u=t?.baseCoinId===0,D=JC(e,g,p),{signInfo:A,gasLimitInfo:E,bodyParams:x,networkFeeInt:w}=await r({baseCoinId:t.baseCoinId,coinId:t.coinId,chainId:t.chainId,from:i,to:a,tokenAddress:t.address,decimals:t.decimals,amount:c,sendMode:D,memo:m}),{realTxAmount:b,serverCountAmount:k}=QC({amount:c,balance:l,usedBalance:d,networkFeeInt:w,transferAmountType:g,isBaseCoin:u,mode:e,isLast:p}),{minTonLimit:P}=A||{},I=x||{};if(u?I={...I,amount:b}:(I={...I,messageAttachedTons:P,invokeNotificationFee:E?.invokeNotificationFee},A?.customPayload&&(I={...I,customPayload:A?.customPayload,stateInit:A?.stateInit})),!qr({isBaseCoin:u,balance:l,baseCoinBalance:h,txAmount:b,networkFee:w}))return{to:a,from:i,txStatus:ne?.FAILED};let K=(await n({params:I,fromAddr:i}))?.boc,j=await zn(xe,K);return await o(K,{coinAmount:k||b,fromAdr:i,toAdr:a,serviceCharge:w,txHash:j,extJson:JSON.stringify({nonce:I.seqno,isClaim:!!I.customPayload}),walletId:void 0,memo:I.memo}),e===Q.ONE_TO_MANY?(await s(j),{to:a,from:i,txHash:j,txAmount:b,txStatus:ne?.SUCCEED}):{to:a,from:i,txHash:j,txAmount:b,startTime:Date.now(),txStatus:ne?.PENDING}}catch{return{to:a,from:i,txStatus:ne?.FAILED}}})}v();C();v();C();var lr={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},oo=class{constructor(e){this.status=lr.uninitialized;this.nextInfo=null;this.cb=null;this.args=[];this.generator=null;this.next=(...e)=>{[lr.waiting,lr.canceled,lr.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=lr.waiting,this.nextInfo.execute())};this.execute=()=>{this.status=lr.working,this.cb?.(this.next)};this.cancel=()=>{this.status=lr.canceled,this.nextInfo?.cancel?.(),this.cb=void 0};this.pause=()=>{this.status=lr.paused,this.nextInfo?.pause?.()};this.start=(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()};this.continue=()=>{this.status=lr.initialized,this.next()};this.generator=e,this.status=lr.initialized,this.nextInfo=null,this.cb=null}};function eD(t){let e=(r,n)=>{let o;return{execute:()=>{o=setTimeout(r,n??t??0)},cancel:()=>{clearTimeout(o)},pause:()=>{clearTimeout(o)}}};return new oo(e)}var Rt=eD;var Mf=()=>{let[t]=dt(),[e]=ct(),[r,n]=Ce(),o=If();return H(async()=>{let s=0,{type:a,min:i,max:c}=t,l=r.map(h=>{let{to:g,from:m,txAmount:p,id:u}=h;return{to:g,from:m,interval:a===He.NONE?100:Bt(i,c,0)*1e3,request:async()=>o({...h,amount:p,transferAmountType:e.type}),id:u}}),d=Rt();return d.start(async h=>{let g=l[s];if(g)try{n({to:g?.to,from:g?.from,txStatus:ne.PENDING,id:g?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:A}=await g.request();n({from:u,startTime:D,to:g?.to,txStatus:m,txAmount:A,txHash:p,id:g?.id})}catch(m){console.log(m)}finally{s++,h(g.interval)}}),d})};v();C();var Rf=()=>{let[t]=dt(),[e]=ct(),[r,n]=Ce(),o=Nf(),s=we(it),a=s?.level===Je.CUSTOM;return H(async()=>{let i=0,{type:c,min:l,max:d}=t,h=r.map(m=>{let{to:p,from:u,txAmount:D,id:A}=m;return{to:p,from:u,interval:c===He.NONE?100:Bt(l,d,0)*1e3,request:async()=>o({...m,from:u,value:D,transferAmountType:e.type,gasPrice:a?s:{}}),id:A}}),g=Rt();return g.start(async m=>{let p=h[i];if(p)try{n({to:p?.to,from:p?.from,txStatus:ne.PENDING,id:p?.id});let{txStatus:u,txHash:D,from:A,txAmount:E,errorMsg:x}=await p.request();n({from:A,to:p?.to,txStatus:u,txHash:D,txAmount:E,id:p?.id,errorMsg:x})}finally{i++,m(p.interval)}}),g})};v();C();ze();var jf=()=>{let[t]=dt(),[e]=ct(),[r,n]=Ce(),o=kf();return H(async()=>{let s=0,{type:a,min:i,max:c}=t,l=r.map(h=>{let{to:g,from:m,txAmount:p,id:u}=h;return{to:g,from:m,interval:a===He.NONE?100:Bt(i,c,0)*1e3,request:async()=>o({...h,amount:p,transferAmountType:e.type}),id:u}}),d=Rt();return d.start(async h=>{let g=l[s];if(g)try{n({to:g?.to,from:g?.from,txStatus:ne.PENDING,id:g?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:A}=await g.request();n({from:u,startTime:D,to:g?.to,txStatus:m,txAmount:A,txHash:p,id:g?.id})}catch{Zt()}finally{s++,h(g.interval)}}),d})};v();C();ze();var zf=()=>{let[t]=dt(),[e]=ct(),[r,n]=Ce(),o=Of();return H(async()=>{let s=0,{type:a,min:i,max:c}=t,l=r.map(h=>{let{to:g,from:m,txAmount:p,id:u}=h;return{to:g,from:m,interval:a===He.NONE?100:Bt(i,c,0)*1e3,request:async()=>o({...h,amount:p,transferAmountType:e.type}),id:u}}),d=Rt();return d.start(async h=>{let g=l[s];if(g)try{n({to:g?.to,from:g?.from,txStatus:ne.PENDING,id:g?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:A}=await g.request();n({from:u,startTime:D,to:g?.to,txStatus:m,txAmount:A,txHash:p,id:g?.id})}catch{Zt()}finally{s++,h(g.interval)}}),d})};v();C();var Wf=G(te());ze();function Uf(){let[t]=at(),[e]=dt(),[r]=ct(),[n,o]=Ce(),s=Lf(),a=(0,Wf.useRef)(-1);return H(async()=>{let i=0,{type:c,min:l,max:d}=e,h=n.map((m,p)=>{let{to:u,from:D,txAmount:A,id:E}=m;return{to:u,from:D,interval:c===He.NONE?100:Bt(l,d,0)*1e3,request:async()=>s({...m,amount:A,transferAmountType:r.type,isLast:p===n.length-1}),id:E}}),g=Rt();return g.start(async m=>{let p=h[i];if(p){if(t===Q.ONE_TO_MANY&&a.current===i)return;a.current=i;try{o({to:p?.to,from:p?.from,txStatus:ne.PENDING,id:p?.id});let{txStatus:u,txHash:D,from:A,startTime:E,txAmount:x}=await p.request();o({from:A,startTime:E,to:p?.to,txStatus:u,txAmount:x,txHash:D,id:p?.id})}catch{Zt()}finally{a.current=-1,i++,m(p.interval)}}}),g})}v();C();var Gf=()=>{let[t]=dt(),[e]=ct(),[r,n]=Ce(),o=Pf();return H(async()=>{let s=0,{type:a,min:i,max:c}=t,l=r.map(h=>{let{to:g,from:m,txAmount:p,id:u}=h;return{to:g,from:m,interval:a===He.NONE?100:Bt(i,c,0)*1e3,request:async()=>o({...h,amount:p,transferAmountType:e.type}),id:u}}),d=Rt();return d.start(async h=>{let g=l[s];if(g)try{n({to:g?.to,from:g?.from,txStatus:ne.PENDING,id:g?.id});let{txStatus:m,txHash:p,from:u,startTime:D,txAmount:A}=await g.request();n({from:u,startTime:D,to:g?.to,txStatus:m,txAmount:A,txHash:p,id:g?.id})}catch(m){console.log(m)}finally{s++,h(g.interval)}}),d},[])};var tD=()=>{let[t]=le(),e=Rf(),r=jf(),n=zf(),o=Gf(),s=Mf(),a=Uf(),i=e;return t?.localType===Be?i=r:t?.localType===We?i=n:t?.localType===fe?i=o:t?.localType===Te?i=s:t?.localType===xe&&(i=a),i},Yf=t=>{let e=(0,Hf.useHistory)(),r=Nt(),n=Vu(),o=(0,sn.useRef)(null),[s,a]=(0,sn.useState)(ue.SENDING),i=Xu(),c=tD();(0,sn.useEffect)(()=>{let h=!t.some(({txStatus:m})=>m!==ne.FAILED),g=!t.some(({txStatus:m})=>m===ne.PENDING||!m);h?a(ue.FAILED):g&&a(ue.FINISHED)},[t]);let l=()=>{c().then(h=>{o.current=h}).catch(()=>{Zt()})};(0,sn.useEffect)(()=>{l()},[]);let d=H(async h=>{h===ue.DONE?n():h===ue.PAUSE?(o?.current?.pause(),a(ue.PAUSE)):h===ue.CANCELED?(o?.current?.cancel(),a(ue.FINISHED)):h===ue.SENDING?(o?.current?.continue(),a(ue.SENDING)):h===ue.FINISHED?a(ue.FINISHED):h===ue.FAILED?(o?.current?.cancel(),i(),a(ue.SENDING),l()):h===ue.BACK_TO_HOME&&(e.replace(Gr),r(au()))});return[s,d]};v();C();var Ga=G(te());ze();v();C();var qf=G(Lu());var rD=(t,e)=>{let r=window.URL||window.webkitURL||window,n=r.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e,o.click(),r.revokeObjectURL(n)},nD=(t=[],e="result.csv",r=void 0)=>{let n=qf.default.unparse(t,r),o="\uFEFF",s=new Blob([`${o}${n}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});rD(s,e)},Vf=nD;function oD(t=[]){let[e]=le(),r=(0,Ga.useMemo)(()=>{let a=[...ys];return e?.localType===xe&&a.splice(2,0,Ss),a},[e?.localType]),n=(0,Ga.useMemo)(()=>r.map(({key:a})=>a),[]),o=H(a=>{let i=S("wallet_extension_multisender_colbody_success"),c=S("wallet_extension_multisender_colbody_fail");switch(a){case ne.SUCCEED:return i;case ne.FAILED:case ne.DROPPED:return c;default:return"-"}});return()=>{let a=`${S("wallet_extension_multisender_colheader_history")}.csv`,i=t.map(d=>{let h={...d,txAmount:U.thousandFormat(d.txAmount??0),txStatus:o(d.txStatus),memo:d.memo||""};return Object.values(Qa(h,n))}),l={fields:r.map(d=>S(d.title)),data:i};Vf(l,a)}}var $f=oD;var sD={ERROR:ne.FAILED,SUCCESS:ne.SUCCEED},aD=()=>{let t=(0,nt.useRef)(void 0),e=(0,nt.useRef)(void 0),[r]=le(),[n=[],o]=Ce(),{dataSource:s,columns:a}=xf(),{isSm:i}=Ue(),[c,l]=Yf(s),d=$f(s),h=wf({sendStatus:c,sendAddress:s}),g=fs(),m=gs(),p=(0,nt.useMemo)(()=>Fn($a(n,({txStatus:D,txHash:A})=>A&&D===ne.PENDING),"txHash"),[n]),u=async()=>{let{data:D}=await Jt(Xt.batchGetTxStatus,{txHashList:e.current});D&&Object.keys(D).forEach(A=>{let E=D[A];["SUCCESS","ERROR"].includes(E)&&o({txHash:A,txStatus:sD[E]})})};return(0,nt.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&u()},2e3),()=>{clearInterval(t.current)}),[]),(0,nt.useEffect)(()=>{[Te,Be,We,fe,xe].includes(r?.localType)&&(e.current=p)},[r?.localType,p]),(0,nt.useEffect)(()=>{(c===ue.FINISHED||c===ue.FAILED)&&Ci(m())},[c]),nt.default.createElement(Tr,{footer:nt.default.createElement(Df,{sendStatus:c,onSendStatusChange:l,onExport:d}),useOkg:!1,headerProps:{className:(0,Kf.default)(Ge.header,Ge.content)}},nt.default.createElement(y.Box,{className:Ge.root},nt.default.createElement(_f,{sendStatus:c}),nt.default.createElement(Ef,{sendStatus:c,sendResult:h}),nt.default.createElement(ms,{className:Ge.statistics,statistics:g})),nt.default.createElement(y.Box,{className:Ge.address},nt.default.createElement(ps,{dataSource:s,columns:a,scroll:{x:i}})))},Zf=nt.default.memo(aD);var iD=()=>{let[t]=le(),e=Nt(),r=ol(),n=we(it),o=lt(),s=ki(),a=t?.chainId;return xr(async()=>{if(o&&a){let i=await s(a);e(lu(i))}},[a,o]),(0,Rr.useEffect)(()=>{if(![Te,Be,We,fe,xe].includes(t?.localType)&&r?.length&&n?.level){let{gasLimit:i,tokenPrice:c,usdToThisRate:l}=n,d=r.find(({level:h})=>h===n?.level);if(d){let{gasPrice:h}=d,{networkFee:g,networkFeeInt:m,networkFeeMarket:p}=fr({gasPrice:h,gasLimit:i,price:c,usdToThisRate:l});e(wt({...n,...d,networkFee:g,networkFeeInt:m,networkFeeMarket:p,unitPriceDisplay:ii(h)}))}}},[e,r,t?.localType]),Rr.default.createElement(an.Switch,null,Rr.default.createElement(an.Route,{path:Gr,component:gf,exact:!0}),Rr.default.createElement(an.Route,{path:In,component:wd,exact:!0}),Rr.default.createElement(an.Route,{path:Ln,component:rf,exact:!0}),Rr.default.createElement(an.Route,{path:Mn,component:Zf,exact:!0}))},R3=iD;export{R3 as default};
//# sourceMappingURL=BatchTransfer-IO6BGQKR.js.map
