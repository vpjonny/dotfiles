import{a as xn}from"./chunk-CO7E2WII.js";import{a as un}from"./chunk-QPHMIRPW.js";import{a as _n}from"./chunk-LOWDVO7P.js";import{a as gn,b as pn}from"./chunk-JTHNZXFX.js";import"./chunk-EC2OS2MX.js";import{a as An}from"./chunk-MRB6SSKA.js";import"./chunk-52JFFT56.js";import{e as fn}from"./chunk-JCVVB72F.js";import"./chunk-6CJRBF2P.js";import"./chunk-3KJMTMXK.js";import"./chunk-IWYRUFZN.js";import{a as ln}from"./chunk-GVO5XBXE.js";import"./chunk-T2UFMQPE.js";import"./chunk-6BWJUZYL.js";import"./chunk-ITLSSVGE.js";import"./chunk-M2YFVDKX.js";import"./chunk-PWVBSLOL.js";import"./chunk-5WI3NR4H.js";import{e as dn}from"./chunk-AOZHPYH5.js";import"./chunk-HLTJYEGI.js";import"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import"./chunk-3MLYZLAT.js";import{a as Nt}from"./chunk-TVBTJSJ6.js";import"./chunk-VWVRJUMU.js";import"./chunk-P355XBV4.js";import{a as an,d as Jt}from"./chunk-C4TBDTQO.js";import{a as It}from"./chunk-6AUQLYPZ.js";import{a as wt}from"./chunk-UPIYMC4Q.js";import{c as St,e as mn,f as Y}from"./chunk-ZUO5BDO3.js";import"./chunk-A7EUFORV.js";import"./chunk-QEPQGEPL.js";import"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import{b as nn,c as rn,d as on,f as sn}from"./chunk-75EAYNWR.js";import"./chunk-DKVOSSSH.js";import{a as cn}from"./chunk-FWL474H4.js";import{B as Vt,a as Yt}from"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-66RCYZEO.js";import{q as en}from"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import{c as tn}from"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import{a as Qe}from"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import"./chunk-XUGHAFHG.js";import"./chunk-B5L26Z2J.js";import{d as Ke}from"./chunk-AVG63QW4.js";import{d as Xe,f as qt,g as Ze}from"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import"./chunk-OBLKTTHP.js";import{b as kt,c as Ve,d as Je,e as M,f as b,g as X,h as At,i as Ut,j as ze,k as Ot,l as Rt,m as je}from"./chunk-HZ3JMDUS.js";import{a as st,c as Ye}from"./chunk-TXIKSV43.js";import"./chunk-LQJXR5XX.js";import"./chunk-NQGIYDUG.js";import"./chunk-QTCVWDVR.js";import"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import{l as ut}from"./chunk-CBZ2RV36.js";import"./chunk-GVYIP5Q5.js";import{Ra as Ue}from"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import{q as We}from"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import{o as He}from"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{b as ve,n as Ee,o as De,p as Ge,u as Be,y as re}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import{b as Z}from"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{h as mt}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import{a as $e}from"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import"./chunk-WYX7GFOD.js";import{a as Bt}from"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import{a as Oe,i as gt,k as Re,n as pt,p as oe}from"./chunk-KC2XLVFC.js";import{B as lt,H as Pe,oa as Me,qa as D,ra as l}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{a as R,o as qe,p as Lt}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import{c as Le}from"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import{a as xt,b as j}from"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{c as _t,e as be,m as Ce,r as Fe,t as ot}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import{a as rt,b as le,c as ee,g as ne,h as _e,i as ue,l as ge,r as pe}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{h as ht}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import{a as Wt}from"./chunk-WN3TRBGI.js";import{c as H}from"./chunk-3FMJDUGT.js";import{c as yt}from"./chunk-2O5TMJZM.js";import{L as Ae,M as he,O as Se,p as xe}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Ab as ft,Cb as z,Fa as Ie,Nb as K,Za as Ne,da as we,pb as Gt,vb as Te,xb as ye,zb as ke}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{k as fe,p as f}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as at}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{J as q,d as Ht,q as it}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as w}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as Mt}from"./chunk-FB3ILH2L.js";import{b as C}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as pr,r as de}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as S,o as a,q as i}from"./chunk-UWURTNRY.js";a();i();var $t=S(C());var ct=S(at());a();i();var vt=S(C());a();i();var bt=S(C());a();i();var Pt={"metax-send-nft-page":"_metax-send-nft-page_1fw24_1",metaxSendNftPage:"_metax-send-nft-page_1fw24_1","metax-send-nft-page-content":"_metax-send-nft-page-content_1fw24_9",metaxSendNftPageContent:"_metax-send-nft-page-content_1fw24_9","metax-send-nft-page-content-main":"_metax-send-nft-page-content-main_1fw24_17",metaxSendNftPageContentMain:"_metax-send-nft-page-content-main_1fw24_17"};var xr=({title:t="",children:r,onBack:e=null,onClose:n=null,nav:o=null,loading:m,pageName:s})=>{let c=l(b);return bt.default.createElement(H.Container,{loading:m,className:`${Pt.metaxSendNftPage} main-container ${s==="confirmDetail"&&c?.chain==0?"metax-send-btc-page":""}`},!o&&bt.default.createElement(Ke,{title:t,onClose:n??void 0,onBack:e??void 0,closeable:!!n,className:s==="confirmDetail"&&c?.chain==0?"metax-send-btc-page-nav":""}),o,bt.default.createElement("div",{className:`${Pt.metaxSendNftPageContent} ${s==="confirmDetail"&&c?.chain==0?Pt.metaxSendBtcContent:""}`},c&&bt.default.createElement("div",{className:Pt.metaxSendNftPageContentMain},r)))},zt=xr;a();i();var Ft=S(C());a();i();var k=S(C());var bn=S(at()),Cn=S(Mt());a();i();var Ar=t=>{let r=lt(t),o=(Pe(t)?.account||{})[Gt]||"";return{walletId:r,address:o}},hr=async t=>{let r={coinId:z,fromAddr:t.fromAddress,toAddr:t.toAddress},{info:e={}}=await ve(r),{sequenceNumber:n,chainId:o,expirationTimestampSecs:m,gasUnitPrice:s}=e;return{sequenceNumber:n,chainId:o,expirationTimestampSecs:m,gasUnitPrice:s,maxGasAmount:8e3}},Sr=t=>async r=>{let{signedTx:e,sequenceNumber:n,fromAddress:o,toAddress:m,gasUnitPrice:s,maxGasAmount:c,amount:d}=t,u={nonce:n},x=rt(s,c),g={signedTx:e,coinId:z,fromAdr:o,toAdr:m,serviceCharge:x,extJson:JSON.stringify(u),coinAmount:ge(d),txSource:K.NFT};return await r(_n(g))},se=t=>async(r,e)=>{let n=e(),{address:o}=Ar(n),{type:m,maxGasAmount:s,gasUnitPrice:c,fromAddress:d,toAddress:u,receiver:x,sender:g,creator:N,collectionName:p,tokenName:I,version:v,amount:P}=t,_=await hr({fromAddress:d,toAddress:u,address:o});s&&(_.maxGasAmount=s),c&&(_.gasUnitPrice=c);let F={};m===ot.OFFER_NFT||m===ot.OFFER_NFT_SIMULATE?(F.receiver=x,F.amount=P):F.sender=g;let B={type:m,base:_,data:{...F,creator:N,collectionName:p,tokenName:I,version:v}},L=await Le().signTransaction(B,o,Gt);return{base:_,signedTx:L}},hn=t=>async r=>{let{fromAddress:e,toAddress:n,amount:o}=t,{base:m,signedTx:s}=await r(se(t)),c=await Yt(Gt,s);return{txId:await r(Sr({...m,signedTx:s,fromAddress:e,toAddress:n,amount:o})),txHash:c}},Sn=async(t,r)=>{let e;try{e=await Be(r)}catch{e=t?.maxGasAmount||2e3}let{gasUnitPrice:n}=t,o=rt(n,e);return{gasUnitPrice:n,maxGasAmount:e,fee:o}},wn=t=>async r=>{let{base:e,signedTx:n}=await r(se({...t,type:ot.OFFER_NFT_SIMULATE}));return Sn(e,n)},In=t=>async r=>{let{base:e,signedTx:n}=await r(se({...t,type:ot.CLAIM_NFT_SIMULATE}));return Sn(e,n)},Nn=t=>async r=>r(hn({...t,type:ot.OFFER_NFT})),Tn=t=>async r=>r(hn({...t,type:ot.CLAIM_NFT})),yn=async(t,r,e,n)=>{let o=Te({coinId:n})||{},m=yt.getAptosResourceType.replace("{rpcUrl}",o.rpcUrl),s=yt.getAptosTable.replace("{rpcUrl}",o.rpcUrl),{data:{data:{token_data:{handle:c}}}}=await Ae(m.replace("{creator}",t)),{data:d}=await he(s.replace("{handle}",c),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:r,name:e}});return d.largest_property_version};a();i();var y={"retina-border-basic":"_retina-border-basic_c8qas_1",retinaBorderBasic:"_retina-border-basic_c8qas_1","metax-send-nft-detail__base--container":"_metax-send-nft-detail__base--container_c8qas_29",metaxSendNftDetailBaseContainer:"_metax-send-nft-detail__base--container_c8qas_29","metax-send-nft-detail__name-container":"_metax-send-nft-detail__name-container_c8qas_35",metaxSendNftDetailNameContainer:"_metax-send-nft-detail__name-container_c8qas_35","metax-send-nft-detail__name":"_metax-send-nft-detail__name_c8qas_35",metaxSendNftDetailName:"_metax-send-nft-detail__name_c8qas_35","metax-send-nft-detail__hr":"_metax-send-nft-detail__hr_c8qas_54",metaxSendNftDetailHr:"_metax-send-nft-detail__hr_c8qas_54","metax-send-nft-detail__error":"_metax-send-nft-detail__error_c8qas_89",metaxSendNftDetailError:"_metax-send-nft-detail__error_c8qas_89","add-weight":"_add-weight_c8qas_102",addWeight:"_add-weight_c8qas_102","metax-send-nft-detail__icon":"_metax-send-nft-detail__icon_c8qas_102",metaxSendNftDetailIcon:"_metax-send-nft-detail__icon_c8qas_102","metax-send-nft-confirm":"_metax-send-nft-confirm_c8qas_109",metaxSendNftConfirm:"_metax-send-nft-confirm_c8qas_109","metax-send-nft-confirm__label":"_metax-send-nft-confirm__label_c8qas_118",metaxSendNftConfirmLabel:"_metax-send-nft-confirm__label_c8qas_118","metax-send-nft-confirm__value":"_metax-send-nft-confirm__value_c8qas_122",metaxSendNftConfirmValue:"_metax-send-nft-confirm__value_c8qas_122","metax-send-nft-confirm__value__content-wrapper":"_metax-send-nft-confirm__value__content-wrapper_c8qas_127",metaxSendNftConfirmValueContentWrapper:"_metax-send-nft-confirm__value__content-wrapper_c8qas_127","metax-send-nft-confirm__value__title":"_metax-send-nft-confirm__value__title_c8qas_132",metaxSendNftConfirmValueTitle:"_metax-send-nft-confirm__value__title_c8qas_132","metax-send-nft-confirm__value__content":"_metax-send-nft-confirm__value__content_c8qas_127",metaxSendNftConfirmValueContent:"_metax-send-nft-confirm__value__content_c8qas_127"};a();i();var kn=S(C());pr();var Pn=(t,r)=>{let e=D(),[n,o]=(0,kn.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return gt(()=>{(async()=>{let s=de(t);o({...n,loading:!0}),s.version=await yn(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:c,maxGasAmount:d,fee:u}=r?await e(In(s)):await e(wn(s));o({aptosFee:u,gasUnitPrice:c,maxGasAmount:d,loading:!1,version:s.version??0})})()}),n};var wr=()=>{let t=D(),{creatorAddress:r,name:e,projectName:n,accountAddress:o,baseCoinId:m,image:s,claim:c}=l(b),d=(0,bn.useHistory)(),{toAddress:u,amount:x=1}=l(X),{coin:g}=Qe(m,!0),N=c?{fromAddress:o,toAddress:u,sender:o,creator:r,collectionName:n,tokenName:e,amount:x,coinId:g?.coinId}:{fromAddress:o,toAddress:u,receiver:u,creator:r,collectionName:n,tokenName:e,amount:x,coinId:g?.coinId},{aptosFee:p,gasUnitPrice:I,maxGasAmount:v,loading:P,version:_}=Pn(N,c),[F,B]=(0,k.useState)(!1),L=en(),U=_e(L,pe(p)),dt=ht({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{className:y["metax-send-nft-detail"]},k.default.createElement(H.Space,{direction:H.DIRECTION.vertical,space:24},k.default.createElement(St,{txType:_t.TRANS_OUT,noPadding:!0}),k.default.createElement(mt,{compact:!0}),k.default.createElement("div",{className:y["metax-send-nft-detail__base--container"]},k.default.createElement(Nt,{src:s,startStatus:!0,alt:"nft",backupImage:dt,classnames:(0,Cn.default)(y.addWeight,y["metax-send-nft-detail__icon"])}),k.default.createElement("div",{className:y["metax-send-nft-detail__name-container"]},k.default.createElement("div",{className:y["metax-send-nft-detail__name"]},e))),k.default.createElement(Y,{title:f("wallet_transfer_subtitle_send_address"),address:o}),k.default.createElement(Y,{title:f("wallet_transfer_subtitle_receive_address"),address:u}),k.default.createElement(mt,{compact:!0}),k.default.createElement(It,{coinId:m}),k.default.createElement(wt,{coinId:m,networkFee:p}),!U&&!P&&k.default.createElement("div",{className:y["metax-send-nft-detail__error"]},f("wallet_dapp_connection_errortip_insufficient_tip")))),k.default.createElement(Z.FooterActions,null,k.default.createElement(w,{category:w.CATEGORY.outline,type:w.TYPE.secondary,size:w.SIZE.lg,width:160,onClick:()=>{t(M()),U?d.goBack():d.replace(R)}},f("wallet_dapp_connection_btn_reject")),k.default.createElement(w,{category:w.CATEGORY.fill,type:w.TYPE.highlight,size:w.SIZE.lg,width:160,loading:F,disabled:!U||P,onClick:async()=>{try{B(!0);let V={...N,gasUnitPrice:I,maxGasAmount:v,version:_},Q=c?await t(Tn(V)):await t(Nn(V)),{txId:O,txHash:J}=Q;c?await re(21,J,u):await re(20,J,o),ut({tx_id:O}),t(M()),q.success({title:f("wallet_transfer_notif_transaction_submit")}),d.replace(R)}catch{q.error({title:f("wallet_home_toast_network_error")})}finally{B(!1)}}},f("wallet_set_password_btn_confirm"))))},Fn=wr;a();i();var vn=S(C());var Ir=()=>{let{accountAddress:t,inscriptionIdProtocol:r,localType:e}=l(b),{toAddress:n}=l(X),o=l(lt);return vn.default.createElement(un,{unapproved:{walletId:o,params:{transfer:{from:t,to:n,data:r}},localType:e}})},En=Ir;a();i();var h=S(C());var On=S(at()),Rn=S(Mt());a();i();function Dn(){let{baseCoinKey:t}=l(b),e=qt(void 0,void 0,{key:t})?.coinAmountInt,n=l(At),{gasLimit:o,gasPrice:m,supportEip1559:s,maxFeePerGas:c,maxPriorityFeePerGas:d}=n;if(o==="0"||s&&(c==="0"||d==="0")||!s&&m==="0")return!1;let x=rt(`${(s?c:m)||0}`,`${o||0}`);return ue(`${e||0}`,x)}a();i();function Gn(){let{contractAddress:t,accountAddress:r,baseCoinId:e,localType:n}=l(b),{gasLimit:o,gasPrice:m,maxFeePerGas:s,maxPriorityFeePerGas:c,supportEip1559:d}=l(ze),u=l(Ut),x=$e(),g=dn({walletId:x,fromAddr:r,coinId:e}),N=Vt({coinId:e,fromAddr:r,toAddr:t,localType:n});return{send:async({nonce:p,updateGasInfo:I,activityId:v})=>{let P=ye(n)?.realChainIdHex,_={from:r,to:t,nonce:j(p),data:u,chainId:P,value:"0",gasLimit:j(o)};d?(_.type=Ce.FEE_MARKET,_.maxFeePerGas=j(s),_.maxPriorityFeePerGas=j(c)):_.gasPrice=j(m),I&&(_.maxFeePerGas?(_.maxFeePerGas=j(I.maxFeePerGas),_.maxPriorityFeePerGas=j(I.maxPriorityFeePerGas)):_.gasPrice=j(I.gasPrice));let B={...He(_),walletId:x,supportEip1559:d},L=xt(d?_.maxFeePerGas:_.gasPrice),U=xt(_.gasLimit),dt={..._,value:xt(_.value),from:_.from,to:_.to,gas:U,gasPrice:L,priorityFee:xt(d&&_.maxPriorityFeePerGas||"0"),nonce:xt(_.nonce),repeatTxType:be.CONFIRMING,oldTxHash:""},V={coinId:e,coinAmount:"0",fromAdr:_.from,toAdr:_.to,serviceCharge:rt(U,L),extJson:JSON.stringify(dt),txSource:K.NFT,inputData:_.data?_.data:"",activityId:v},Q=await g(B);return{serverTxId:await N(Q,V)}}}}a();i();var Ct=S(C());var Ln=S(at());a();i();var Bn=()=>{let t=l(At),{networkFee:r}=t;return{networkFee:r}};var Un=()=>{let t=D(),r=(0,Ln.useHistory)(),{accountAddress:e,contractAddress:n}=l(b),o=l(Ot),m=l(Ut),[s,{setTrue:c,setFalse:d}]=pt(!1),{networkFee:u}=Bn(),x=gn(),g=Oe(p=>{t(Ve(p))});return Ct.default.createElement(Ct.default.Fragment,null,Ct.default.createElement(wt,{coinId:o,networkFee:u,gasReturn:x,onClick:c}),Ct.default.createElement(fn,{visible:s,coinId:o,address:e,inputData:m,tokenAddress:n,value:"0",onBack:d,onClose:()=>{t(M()),r.push(R)},onGasChange:g,gasReturn:x}))};var Nr=()=>{let t=D(),r=l(je),{accountAddress:e,baseCoinId:n,image:o,name:m}=l(b),s=Dn(),c=(0,On.useHistory)(),d=l(At),u=l(Ot),[,x]=Ze(u),{toAddress:g,amount:N}=l(X),p=l(Rt),[I,v]=(0,h.useState)(!1),{send:P}=Gn(),_=cn(),F=_?.errorCode,B=()=>{v(!0)},L=()=>{v(!1)},{gasPrice:U}=d,V={fetchParams:{coinId:u,from:e,to:g,amount:N,gasPrice:U},userGasInfo:d,baseCoinAmountUse:"0"},Q=(0,h.useMemo)(()=>p?fe.thousandFormat(N):"",[N,p]),O=(0,h.useCallback)(()=>{t(M()),s?c.goBack():c.replace(R)},[s]),J=(0,h.useCallback)(async Xt=>{let{nonce:Zt,updateGasInfo:Qt}=Xt;try{let Tt=await P({nonce:Zt,updateGasInfo:Qt,activityId:_.activityId}),{serverTxId:tt}=Tt||{};ut({tx_id:tt}),q.success({title:f("wallet_transfer_notif_transaction_submit")}),t(M()),c.replace("/")}catch(Tt){let tt=Tt,et=tt?.data?.originalError?.code;An(et)?(q.error({title:tt?.data?.originalError?.msg||f("wallet_home_toast_network_error")}),_.clear()):tt.message!==Wt&&q.error({title:f("wallet_home_toast_network_error")})}},[n,e,P]);(0,h.useEffect)(()=>{F===0&&typeof x?.chainId<"u"&&Ue({wallet_address:e,interactive_address:g,chain_id:x?.chainId,transaction_type:"send_nft"})},[F,x?.chainId]);let Kt=ht({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return h.default.createElement(pn,{gasReturn:_},!r&&!s&&h.default.createElement(Jt,{type:an.FEE_BALANCE_INSUFFICIENT,title:f("wallet_dapp_connection_errortip_insufficient_tip")}),h.default.createElement("div",{className:y["metax-send-nft-detail"]},h.default.createElement(H.Space,{direction:H.DIRECTION.vertical,space:24},h.default.createElement(St,{txType:_t.TRANS_OUT,noPadding:!0}),h.default.createElement(mt.Thin,{compact:!0}),h.default.createElement("div",{className:y["metax-send-nft-detail__base--container"]},h.default.createElement(Nt,{src:o,alt:"nft",startStatus:!0,backupImage:Kt,classnames:(0,Rn.default)(y.addWeight,y["metax-send-nft-detail__icon"])}),h.default.createElement("div",{className:y["metax-send-nft-detail__name-container"]},h.default.createElement("div",{className:y["metax-send-nft-detail__name"]},m))),h.default.createElement(It,{coinId:n}),h.default.createElement(Un,null),h.default.createElement(Y,{title:f("wallet_transfer_confirmation_subtitle_wallet"),address:e}),h.default.createElement(Y,{title:f("wallet_transfer_subtitle_send_address"),address:e}),h.default.createElement(Y,{title:f("wallet_transfer_subtitle_receive_address"),address:g}),p&&h.default.createElement(mn,{label:f("wallet_extension_transaction_module_input_label_amount"),value:Q}))),h.default.createElement(Z.FooterActions,null,h.default.createElement(w,{category:w.CATEGORY.outline,type:w.TYPE.secondary,size:w.SIZE.lg,width:160,onClick:O},f("wallet_dapp_connection_btn_reject")),h.default.createElement(xn,{dataForCheck:V,onClick:J,beforeClick:B,afterClick:L,btnProps:{loading:I,width:160,disabled:r||!s}},f("wallet_set_password_btn_confirm"))))},Mn=Nr;a();i();var A=S(C());var Yn=S(at());var Vn=S(Mt());a();i();var jt=S(C());var Hn=(t={},r=!1,e=!1)=>{let[n,o]=(0,jt.useState)({}),[m,s]=(0,jt.useState)(!0),[c,d]=(0,jt.useState)(!1),u=n.fee;return gt(()=>{(async()=>{try{let g=await Ee(t);g?.fee&&o(g),s(!1)}catch{e&&(d(!0),s(!1))}})()}),r?{solanaFee:u,solanaFeeInfo:n,loading:m,error:c}:u};a();i();var Wn=S(C());var ae=({type:t,from:r,to:e,blockHash:n,coinAmount:o,mint:m,createAssociatedAddress:s,computeUnitPrice:c,computeUnitLimit:d,tokenStandard:u})=>{let x={type:t,payer:r,blockHash:n,from:r,to:e,amount:o,computeUnitPrice:c,computeUnitLimit:d},g;return t===Fe.TRANSFER?g={...x}:g={...x,mint:m,createAssociatedAddress:s},u&&(g.tokenStandard=u),g},qn=()=>{let t=Vt({});return(0,Wn.useCallback)(async(r,{type:e,from:n,to:o,coinId:m,blockHash:s,coinAmount:c,mint:d=null,createAssociatedAddress:u,serviceCharge:x,computeUnitPrice:g,computeUnitLimit:N,txSource:p=K.NORMAL,extJson:I=JSON.stringify({}),walletId:v,tokenStandard:P})=>{let _=ae({type:e,from:n,to:o,blockHash:s,coinAmount:c,mint:d,createAssociatedAddress:u,computeUnitPrice:g,computeUnitLimit:N,tokenStandard:P}),F=await r(tn(_,n,v)),B=await Yt(we,F);return await t(F,{signedTx:F,coinAmount:c,coinId:m,fromAdr:n,toAdr:o,serviceCharge:x,txSource:p,extJson:I,txHash:B})},[t])};var Tr={solNft:0,solCompressNft:1,solToken2022Nft:2,solCoreNft:3},yr=()=>{let t=D(),r=l(b),{tokenId:e,accountAddress:n,baseCoinId:o,image:m,name:s,extendProperty:c}=r,d=qt(o),{chainId:u}=d,{solNftType:x,tokenStandard:g}=c||{},N=ln(),p=(0,Yn.useHistory)(),I=(0,A.useRef)(!1),v=(0,A.useRef)(),{toAddress:P}=l(X),[_,{setTrue:F,setFalse:B}]=pt(!0),[L,U]=(0,A.useState)(""),[dt,V]=(0,A.useState)("0"),{loading:Q,solanaFeeInfo:O}=Hn({coinId:o,fromAddr:n},!0),J=Q||_,{fee:Kt,computeUnitPrice:Xt,feelimit:Zt}=O,{priorityFee:Qt,priorityGasPrice:Tt,priorityGasLimit:tt}=We(Zt,Xt,dt),et=ee(Kt,Qt),ar=l(lt),[ir,me]=(0,A.useState)(!1),mr=ht({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Dt=(0,A.useMemo)(()=>x!==Tr.solNft?{msg:f("wallet_extension_transfer_error_unsupported_nft_transfer"),isEnough:!0}:J?{msg:"",isEnough:!1}:L?{msg:L,isEnough:!0}:ne(d.coinAmountInt,et)?{msg:f("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:ne(d.coinAmountInt,ee(et,O.selfRent))?{msg:f("walletextension_toast_text_reserve_rent_exempt",{number:le(O.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[J,d.coinAmountInt,d.decimals,et,O.selfRent]),ce=()=>{let $={from:n,to:P,coinId:o,serviceCharge:et,computeUnitPrice:Tt,computeUnitLimit:tt,txSource:K.NFT,coinAmount:1,mint:e,createAssociatedAddress:!v.current,walletId:ar,type:"tokenTransfer"};return g===4&&($.type="mplTransfer",$.tokenStandard=4),$},cr=qn();return(0,A.useEffect)(()=>{e&&P&&u&&O.recentBlockhash&&(F(),U(""),(async()=>{try{let nt=ce();nt.blockHash=O.recentBlockhash;let te=ae(nt),dr=Ge({mint:e,address:P}),{SolWallet:fr}=await xe(),lr=await new fr().getSerializedTransaction({privateKey:"",data:te}),_r=N({from:n,chainId:u,transactions:[lr],method:"signTransaction",dappInfo:{}}),[ur,gr]=await Promise.all([dr,_r]);v.current=ur?.data?.legal,V(gr.firstUnitLimit)}catch(nt){U(nt?.message||f("wallet_extension_alert_estimate_unavailable"))}finally{B()}})())},[e,n,P,u,O.recentBlockhash]),A.default.createElement(A.default.Fragment,null,A.default.createElement("div",{className:y["metax-send-nft-detail"]},A.default.createElement(H.Space,{direction:H.DIRECTION.vertical,space:24},!J&&Dt.msg&&A.default.createElement(Jt,{title:Dt.msg}),A.default.createElement(St,{txType:_t.TRANS_OUT,noPadding:!0}),A.default.createElement(mt.Thin,{compact:!0}),A.default.createElement("div",{className:y["metax-send-nft-detail__base--container"]},A.default.createElement(Nt,{src:m,startStatus:!0,alt:"",backupImage:mr,classnames:(0,Vn.default)(y.addWeight,y["metax-send-nft-detail__icon"])}),A.default.createElement("div",{className:y["metax-send-nft-detail__name-container"]},A.default.createElement("div",{className:y["metax-send-nft-detail__name"]},s))),A.default.createElement(It,{coinId:o}),A.default.createElement(wt,{coinId:o,networkFee:et}),A.default.createElement(Y,{title:f("wallet_transfer_subtitle_send_address"),address:n}),A.default.createElement(Y,{title:f("wallet_transfer_subtitle_receive_address"),address:P}))),A.default.createElement(Z.FooterActions,null,A.default.createElement(w,{category:w.CATEGORY.outline,type:w.TYPE.secondary,size:w.SIZE.lg,width:160,onClick:()=>{t(M()),Dt.isEnough?p.goBack():p.replace(R)}},f("wallet_dapp_connection_btn_reject")),A.default.createElement(w,{category:w.CATEGORY.fill,type:w.TYPE.highlight,size:w.SIZE.lg,width:160,loading:J||ir,disabled:Dt.msg,onClick:async()=>{if(!I.current){I.current=!0,me(!0);try{let $=await De({coinId:o,fromAddr:n,toAddr:P}),nt=ce();nt.blockHash=$;let te=await cr(t,nt);ut({tx_id:te}),t(M()),q.success({title:f("wallet_transfer_notif_transaction_submit")}),p.replace(R)}catch($){$.message!==Wt&&q.error({title:f("wallet_home_toast_network_error")})}I.current=!1,me(!1)}}},f("wallet_set_password_btn_confirm"))))},Jn=yr;var kr=()=>{switch(l(b)?.baseCoinId){case ke:case Ie:return Ft.default.createElement(En,null);case ft:return Ft.default.createElement(Jn,null);case z:return Ft.default.createElement(Fn,null);default:return Ft.default.createElement(Mn,null)}},zn=kr;var Pr=()=>vt.default.createElement(zt,{nav:vt.default.createElement(vt.default.Fragment,null)},vt.default.createElement(zn,null)),jn=Pr;a();i();var Et=S(C());var or=S(at());a();i();var W=S(C());a();i();var $n=async(t,r,e)=>{let n="",{coinId:o,baseCoinId:m}=e;return t?((o===ft||m===ft)&&!await rn(t)||(Bt({coinId:o})||Bt({coinId:m}))&&!(await on(t)).isValid||(o===z||m===z)&&!await nn(t)||e.coinId!==ft&&e.coinId!==z&&!Bt(e)&&!sn(t,{allowNonPrefixed:!1}))&&(n="wallet_manage_crypto_errortip_invalid_address_tips"):n="wallet_transfer_errortip_receive_address_empty",n},Kn=({amount:t,balance:r,t:e})=>t==="0"?e("wallet_extension_nft_toast_input_amount_no0"):t?t>r?e("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:r}):"":e("wallet_extension_nft_toast_input_transfer_amount");a();i();var E=S(C()),tr=S(at()),er=S(Mt());a();i();var ie=S(C());var br=({disabled:t=!1,buttonText:r,nextJump:e=()=>{}})=>{let n=()=>{t||e&&e()};return ie.default.createElement(Z.FooterActions,{usePortal:!0},ie.default.createElement(w,{block:!0,category:w.CATEGORY.fill,type:w.TYPE.highlight,size:w.SIZE.lg,onClick:n,disabled:t},r))},Xn=br;a();i();var G={"metax-send-nft-form--hidden":"_metax-send-nft-form--hidden_od7wm_1",metaxSendNftFormHidden:"_metax-send-nft-form--hidden_od7wm_1","metax-send-nft-form__alert":"_metax-send-nft-form__alert_od7wm_4",metaxSendNftFormAlert:"_metax-send-nft-form__alert_od7wm_4","metax-send-nft-form__row":"_metax-send-nft-form__row_od7wm_7",metaxSendNftFormRow:"_metax-send-nft-form__row_od7wm_7","metax-send-nft-form__row__max":"_metax-send-nft-form__row__max_od7wm_10",metaxSendNftFormRowMax:"_metax-send-nft-form__row__max_od7wm_10","metax-send-nft-form__row__tip":"_metax-send-nft-form__row__tip_od7wm_16",metaxSendNftFormRowTip:"_metax-send-nft-form__row__tip_od7wm_16","metax-send-nft-form__row__max-amount":"_metax-send-nft-form__row__max-amount_od7wm_23",metaxSendNftFormRowMaxAmount:"_metax-send-nft-form__row__max-amount_od7wm_23","metax-send-nft-form__row__btn-max":"_metax-send-nft-form__row__btn-max_od7wm_29",metaxSendNftFormRowBtnMax:"_metax-send-nft-form__row__btn-max_od7wm_29","metax-send-nft-form__row__content":"_metax-send-nft-form__row__content_od7wm_42",metaxSendNftFormRowContent:"_metax-send-nft-form__row__content_od7wm_42","metax-send-nft-form__row__content--pointer":"_metax-send-nft-form__row__content--pointer_od7wm_51",metaxSendNftFormRowContentPointer:"_metax-send-nft-form__row__content--pointer_od7wm_51","metax-send-nft-form__row__content__title":"_metax-send-nft-form__row__content__title_od7wm_55",metaxSendNftFormRowContentTitle:"_metax-send-nft-form__row__content__title_od7wm_55","metax-send-nft-form__row__content__center":"_metax-send-nft-form__row__content__center_od7wm_60",metaxSendNftFormRowContentCenter:"_metax-send-nft-form__row__content__center_od7wm_60","metax-send-nft-form__row__content__narrow":"_metax-send-nft-form__row__content__narrow_od7wm_70",metaxSendNftFormRowContentNarrow:"_metax-send-nft-form__row__content__narrow_od7wm_70","metax-send-nft-form__waring__tips":"_metax-send-nft-form__waring__tips_od7wm_75",metaxSendNftFormWaringTips:"_metax-send-nft-form__waring__tips_od7wm_75"};a();i();var Zn=S(C());var Cr=0,Fr=()=>{let{chain:t,tokenId:r,accountAddress:e,tokenStandard:n}=l(b),{loading:o,data:m,error:s}=Re(async()=>{let d={chain:t,walletAddress:e,inscriptionIds:[r],tokenStandard:Ye[n]},{data:u}=await Se(yt.postBtcNftStatus,d);return u?.assetStatusList||[]},{ready:t===Cr&&[st.Ordinals,st.ATOMICAL].includes(n)||t===Ne&&[st.FractalOrdinals].includes(n)}),c=(0,Zn.useMemo)(()=>[st.ATOMICAL,st.Ordinals,st.FractalOrdinals].includes(n)&&m?.some(({unavailable:d})=>Number(d)===1)?1:0,[m,n]);return[o,c,s]},Qn=Fr;var vr=({nftBalance:t,nftInfo:r,amount:e,toAddress:n="",toError:o,amountError:m,onAmountChange:s,onToAddressChange:c,showAmount:d,onLoadingChange:u,tipMessage:x})=>{let[g,N,p]=Qn(),I=(0,tr.useHistory)(),v=()=>{I.replace(Lt)};(0,E.useEffect)(()=>{u?.(g)},[g]);let P=(0,E.useMemo)(()=>p?f("extension_wallet_header_alert_nft_check_error"):N===1?f("extension_wallet_header_alert_utxo_limit_arc"):null,[p,N]);return E.default.createElement("div",{className:(0,er.default)(G["metax-send-nft-form"])},(N||p)&&E.default.createElement(Ht,{closable:!1,type:p?Ht.TYPE.error:Ht.TYPE.warn,className:G["metax-send-nft-form__alert"],title:P}),E.default.createElement("div",{className:G["metax-send-nft-form__row"]},E.default.createElement(it.TextArea,{className:G["metax-send-nft-form__address"],inputClassName:G["metax-send-nft-form__address-input"],placeholder:f("wallet_extension_transaction_placeholder_input_address",{},{useBr:!1}),label:f("wallet_transfer_subtitle_receive_address"),value:n,error:o?f(o):"",disabled:!!N||g,size:it.SIZE.xl,errorType:it.TIP_TYPE.always,onChange:c,tips:x||f("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),d&&E.default.createElement("div",{className:G["metax-send-nft-form__row"]},E.default.createElement(it.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:f("wallet_contract_interactiom_subtitle_amount"),size:it.SIZE.xl,precision:0,enableMinus:!1,value:e,error:m||"",errorType:it.TIP_TYPE.always,onChange:s}),E.default.createElement("div",{className:G["metax-send-nft-form__row__max"]},E.default.createElement("span",{className:G["metax-send-nft-form__row__max-amount"]},f("wallet_extension_nft_toast_owned"),":",t),E.default.createElement("span",{onClick:()=>{s(`${r.totalBalance||0}`)},className:G["metax-send-nft-form__row__btn-max"]},f("wallet_transfer_btn_max_balance_amount")))),E.default.createElement(Xn,{nextJump:v,buttonText:f("wallet_transfer_btn_next"),disabled:!n||o||N||d&&(!e||m)}))},nr=vr;function Er(t){let r=Xe(void 0,void 0,{key:t.nftInfo.baseCoinKey}),e=l(Rt),[n,o]=(0,W.useState)(null),[m,s]=(0,W.useState)(null),{run:c}=oe(async(p,I)=>{!r||(p.toLowerCase()===I.toLowerCase()&&s(W.default.createElement("div",{className:G["metax-send-nft-form__waring"]},W.default.createElement("span",{className:G["metax-send-nft-form__waring__tips"]},f("wallet_extension_mid_textarea_same_address")))),o(await $n(p,I,r)))},{wait:200}),[d,u]=(0,W.useState)(null),{run:x}=oe((p,I)=>{u(Kn({amount:p,balance:I,t:f}))},{wait:200}),g=(0,W.useCallback)(p=>{t.setToAddress(p.target.value),c(p.target.value,t.fromAddress)},[t.fromAddress,c]),N=(0,W.useCallback)(p=>{let I=p.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(I),x(I,t.nftBalance)},[t.nftBalance,x]);return W.default.createElement(nr,{...t,toError:n,tipMessage:m,amountError:d,showAmount:e,onToAddressChange:g,onAmountChange:N})}function Dr(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Gr(t){return{setToAddress:r=>t(kt.setToAddress(r)),setAmount:r=>t(kt.setAmount(r))}}var rr=Me(Dr,Gr)(Er);var Br=()=>{let t=D(),r=(0,or.useHistory)(),[e,{set:n}]=pt(!1),o=(0,Et.useCallback)(()=>{t(kt.resetSend()),r.goBack()},[r]);return Et.default.createElement(zt,{onBack:o,loading:e,title:f("wallet_home_btn_send")},Et.default.createElement(rr,{onLoadingChange:n}))},sr=Br;var Lr=()=>{let t=(0,ct.useHistory)(),r=D();return gt(()=>{t.location.state?r(Je(t.location.state?.nftInfo)):t.replace(R)}),$t.default.createElement(ct.Switch,null,$t.default.createElement(ct.Route,{exact:!0,path:qe,component:sr}),$t.default.createElement(ct.Route,{exact:!0,path:Lt,component:jn}))},Rm=Lr;export{Rm as default};
//# sourceMappingURL=SendNft-K6WTYRSL.js.map
