import{a as _o}from"./chunk-VD2FZ6U7.js";import{a as po,b as lo}from"./chunk-RDYVJHBN.js";import{a as io}from"./chunk-NYWY25X4.js";import{a as no,b as so}from"./chunk-T2BANNCO.js";import"./chunk-RE74DUYA.js";import{a as ao}from"./chunk-B5L26Z2J.js";import{d as to}from"./chunk-AVG63QW4.js";import{d as ro}from"./chunk-YLT6ZRGE.js";import"./chunk-OB65JCC3.js";import{c as Q}from"./chunk-VX6OVCCX.js";import{b as H,c as $}from"./chunk-RYVYRLUT.js";import"./chunk-NQGIYDUG.js";import"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{a as xo,o as _}from"./chunk-N6PI3XTA.js";import{f as Z}from"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as J}from"./chunk-MJSLAJV6.js";import{k as z}from"./chunk-KC2XLVFC.js";import{qa as X,ra as b}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import{vb as Y}from"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import{m as E,n as O}from"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as r}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import"./chunk-EQ34WRCJ.js";import{B as W,k as P,s as a}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as oo}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{J as y,d as M}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import{a as eo}from"./chunk-IQUFNLVG.js";import{t as S}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as To}from"./chunk-FB3ILH2L.js";import{b as K}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import{Aa as U,M as q}from"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as k,o as T,q as x}from"./chunk-UWURTNRY.js";T();x();var o=k(K());var fo=k(oo());var D=k(To()),ko=k(xo());U();T();x();var C=k(K());var mo=k(oo());U();var yo=({approvalNum:s,symbol:c,decimalNum:m,coinId:p})=>{let d=ro(p),N=P.safeCeilDiv(s,10**Number(m));return s===E||Number(N)>O?a("wallet_extension_transfer_title_unlimited_amount",{token:c}):J(s,{symbol:c,useContractPrecision:!0,contractPrecision:{decimals:m},isStableCoin:d?.stableCoin,precision:d?.displayPrecision}).value},No={[2]:"wallet_extension_approval_btn_revoking",[3]:"wallet_extension_approval_btn_approving"},uo=({tokenList:s,chainId:c})=>{let m=b(Z),p=X(),d=(0,mo.useHistory)();return C.default.createElement(C.default.Fragment,null,s.map(N=>{let{symbol:I,imageUrl:v,approvalNum:u,decimalNum:h,approvalTime:t,status:l,coinId:f,tokenAddress:A,approvalAddress:j,permit2Address:L,address:B}=N,w=W(new Date(t),{format:"yyyyMMdd",locale:m}),F=async()=>{let i=await _o({address:B,chainId:c,tokenAddress:A,approvalAddress:j,permit2Address:L,coinId:f,approvalNum:u});if(q(i)){y.error({title:a("wallet_extension_approval_toast_initiate_fail"),duration:3,showClose:!0,placement:y.DIRECTION.top});return}p(Q({type:"approve",data:[i]})),d.push(`${Y}?type=approve`)};return C.default.createElement(po,{icon:v,key:`${I}-${f}-${A}`,title:C.default.createElement(yo,{approvalNum:u,symbol:I,decimalNum:h,coinId:f}),desc:w,btnText:a("wallet_extension_approval_btn_revoke"),btnLoadingText:a(No[l]),btnLoading:[3,2].includes(l),btnClick:F})}))};T();x();var e={"retina-border-basic":"_retina-border-basic_k43oq_1",retinaBorderBasic:"_retina-border-basic_k43oq_1",alert:"_alert_k43oq_29",logo:"_logo_k43oq_32",img:"_img_k43oq_37","text-info":"_text-info_k43oq_42",textInfo:"_text-info_k43oq_42",text:"_text_k43oq_42",project:"_project_k43oq_48","project-name":"_project-name_k43oq_51",projectName:"_project-name_k43oq_51",network:"_network_k43oq_59","address-wrapper":"_address-wrapper_k43oq_67",addressWrapper:"_address-wrapper_k43oq_67",title:"_title_k43oq_131","address-info":"_address-info_k43oq_137",addressInfo:"_address-info_k43oq_137",address:"_address_k43oq_67",icon:"_icon_k43oq_149","copy-icon":"_copy-icon_k43oq_149",copyIcon:"_copy-icon_k43oq_149","add-weight":"_add-weight_k43oq_154",addWeight:"_add-weight_k43oq_154","link-icon":"_link-icon_k43oq_154",linkIcon:"_link-icon_k43oq_154","list-title":"_list-title_k43oq_158",listTitle:"_list-title_k43oq_158","security-icon":"_security-icon_k43oq_166",securityIcon:"_security-icon_k43oq_166","alert-title":"_alert-title_k43oq_171",alertTitle:"_alert-title_k43oq_171"};var Io={[3]:"wallet_extension_approval_alertbanner_dapp_risky_approvals",[2]:"wallet_extension_alertbanner_deprecated_adddress",[1]:"wallet_extension_approve_alertbanner_desc_mal_approval"},vo=()=>{let s=(0,fo.useHistory)(),c=no(),{loading:m,run:p,error:d}=z(async()=>await c(),{manual:!0}),N=b(H),I=ao(),v=I.get("projectAddr"),u=I.get("chainId"),h=io(N),t=(0,o.useMemo)(()=>(h||[]).find(n=>n.approvalAddress===v&&Number(n.chainId)===Number(u))||{},[h,v,u]),l=b($);(0,o.useEffect)(()=>{l&&q(t)&&s.goBack()},[l,t]),(0,o.useEffect)(()=>{!l&&p()},[l,p]);let f=(0,o.useMemo)(()=>t?.tokens?.length?(t.tokens||[]).findIndex(n=>{let g=P.safeCeilDiv(n.approvalNum,10**n.decimalNum);return n.approvalNum===E||Number(g)>O})!==-1:!1,[t.tokens]),A=(0,o.useMemo)(()=>{let i=t.blackTagType,n=!1,g,G,R;if((i||f)&&(n=!0),i){G=M.TYPE.error,R="okx-wallet-plugin-security-1";let V=Io[i];g=i===3?a(V,{num:t.blackTagLongTimeDayLimit}):a(V)}else g=a("wallet_extension_alertbanner_unlimited_approval");return{show:n,props:{title:o.default.createElement("span",{className:e.alertTitle},g),type:G,icon:R}}},[t.blackTagLongTimeDayLimit,t.blackTagType,f]),{projectIcon:j,projectName:L,network:B,approvalAddress:w,linkApprovalAddress:F}=t;return so(),o.default.createElement(r.Container,null,o.default.createElement(to,{bordered:!1,closeable:!1}),o.default.createElement(lo,{isError:!!d,isLoading:m,reload:p},A.show&&o.default.createElement(r.Box,{className:e.alert},o.default.createElement(M,{...A.props,closable:!1})),o.default.createElement(r.FlexBox,{className:e.project},o.default.createElement(eo,{pictureClassName:e.logo,className:e.img,src:j,alt:L}),o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,justify:"space-between",className:e.textInfo},o.default.createElement(r.FlexBox,{direction:r.DIRECTION.vertical,className:e.text},o.default.createElement(_.Text,{className:e.projectName,ellipsis:{tooltip:!0},strong:!0},L)),o.default.createElement(_.Text,{type:_.TYPE.secondary,size:_.SIZE.xs,ellipsis:{tooltip:!0},className:e.network},B))),o.default.createElement(r.Box,{className:e.addressWrapper},o.default.createElement(r.Box,{className:e.title},a("wallet_extension_approval_subtitle_contract_address")),o.default.createElement(r.FlexBox,{className:e.addressInfo,justify:"space-between"},o.default.createElement(_.Text,{size:_.SIZE.md,className:e.address},w),o.default.createElement(r.FlexBox,null,o.default.createElement(S,{className:(0,D.default)("okx-wallet-plugin-copy-3",e.icon,e.copyIcon),onClick:()=>{(0,ko.default)(w),y.success({title:a("wallet_transaction_history_toast_address_copied"),duration:3,showClose:!0,placement:y.DIRECTION.top})}}),o.default.createElement(S,{onClick:()=>{globalThis.open(F)},className:(0,D.default)("okx-wallet-plugin-open-link",e.addWeight,e.linkIcon)})))),o.default.createElement(r.Box,{className:(0,D.default)(e.listTitle)},a("wallet_extension_mid_text_approved_amount")),o.default.createElement(uo,{projectAddr:v,chainId:u,tokenList:t?.tokens||[]})))},ce=vo;export{Io as RISK_ALERT_TITLE_MAP,ce as default};
//# sourceMappingURL=ApproveDetailPage-DDS2RTLC.js.map
