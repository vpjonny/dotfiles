import{a as ne,b as re,c as ie,d as me,e as se,f as ae,g as le,h as de,i as ce,j as pe,k as fe,l as _e,m as ke,n as ge,o as ye,p as H,q as Te,r as Me,s as be,t as ve}from"./chunk-ZTYOI7YR.js";import"./chunk-CAWXATKV.js";import"./chunk-QH3W6YX3.js";import"./chunk-GF5ARTFE.js";import"./chunk-GIKT3XNH.js";import{a as ue}from"./chunk-JFZYV7O3.js";import{a as Se}from"./chunk-DQD6P25P.js";import"./chunk-WTH5WZEF.js";import"./chunk-LB5XQY7F.js";import"./chunk-TRICLBVU.js";import{b as d}from"./chunk-FS336U6P.js";import"./chunk-QCFNCXVK.js";import"./chunk-HRY333JY.js";import{a as oe}from"./chunk-F43OFDEC.js";import{f as te}from"./chunk-YG6DAN6E.js";import"./chunk-XAUZ4FZE.js";import"./chunk-RRKGBNVH.js";import"./chunk-JHB77Y3J.js";import"./chunk-RZGUDMHY.js";import"./chunk-5JVWMQI2.js";import"./chunk-BMAGLTJ7.js";import"./chunk-OILTVSLX.js";import"./chunk-KLS3SJXA.js";import"./chunk-RQ4NNINW.js";import"./chunk-5DQKP6TK.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-H5RNSDSN.js";import"./chunk-OWPVBYY3.js";import"./chunk-E6SXR3B6.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-IGYVCHMC.js";import"./chunk-PPNQSDGF.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import{A as ee,pa as w,va as I}from"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import{a as R}from"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import{a as E,l as Z}from"./chunk-AP4E6GDF.js";import{Dc as h,Ke as V,m as J,xa as K}from"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-U2IAA473.js";import"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{b as F}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{t as D,w as j}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as $}from"./chunk-FB3ILH2L.js";import{b as N}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as q,T as X,Z as Y,f as W,l as P}from"./chunk-4C5HF6J2.js";import"./chunk-BY6XCDJZ.js";import"./chunk-WQGQVXPA.js";import"./chunk-EI7BJC6V.js";import"./chunk-WZALYVUQ.js";import"./chunk-4ARIYUS3.js";import{f as T,o as a,q as u}from"./chunk-UWURTNRY.js";a();u();var m=T(N()),G=T($());a();u();var A=T(N());q();var xe=()=>{let{buyStore:o,quoteStore:e}=d(),{tokenPair:f,setTokenPair:n}=ne("buy"),r=ie(o?.toToken,f?.to);(0,A.useEffect)(()=>{r&&r?.tokenContractAddress&&o.setToToken(r)},[r?.tokenContractAddress]);let t=se(),s=ae(t?.tokenContractAddress);(0,A.useEffect)(()=>{t&&t?.tokenContractAddress&&o.setFromToken(t),t&&s&&t?.tokenContractAddress===s?.tokenContractAddress&&o.setFromToken(Y(t,s))},[t?.tokenContractAddress,s?.amountNum]),(0,A.useEffect)(()=>{n({from:o.fromToken,to:o.toToken})},[o?.toToken?.tokenContractAddress]),re(),me(),(0,A.useEffect)(()=>{e.quoteData?.data&&o.setLoading(!1)},[e.quoteData?.data])};a();u();var Ce=T(N());a();u();var i=T(N()),v=T($());q();a();u();var z={"input-container":"_input-container_fyhvp_1",inputContainer:"_input-container_fyhvp_1",suffix:"_suffix_fyhvp_4","mode-text":"_mode-text_fyhvp_7",modeText:"_mode-text_fyhvp_7"};var Ne=()=>{let{buyStore:o,sellStore:e,configStore:f}=d(),{currentMode:n}=f,{buyValue:r,setBuyValue:t,toToken:s}=o,{sellValue:l,setSellValue:S,fromToken:_,isPercentMode:k}=e,[M,x,c]=(0,i.useMemo)(()=>n==="buy"?[r.value,t,r.type]:[l.value,S,l.type],[n,r,t,l,S]),g=L=>{n==="sell"&&l.type==="custom"&&k&&E.gt(L,100)||(x({value:L,type:"custom",index:3}),I.info(w.MEME_SWAP_AMOUNT_INPUT,{data:{value:L,type:"custom",index:3,currentMode:n}}))},[,y]=(0,i.useTransition)(),U=L=>{y(()=>{!X(L)&&g(L)})},[O,C]=(0,i.useState)(!1),[Pe,Ee]=(0,i.useMemo)(()=>n==="buy"?[null,Math.min(h,Number(s?.decimals))]:l.type==="custom"&&k?[i.default.createElement("div",{key:"meme-swap-percentage-suffix",className:(0,v.default)("flex items-center",z.suffix)},i.default.createElement("span",{className:(0,v.default)(z.modeText)},V("swaptrade_meme_order_option_percentage")),i.default.createElement(F,{onClick:()=>C(!0)},i.default.createElement(D,{className:(0,v.default)("okx-defi-dex-market-sort-down","content-primary"),style:{fontSize:12,cursor:"pointer"}}))),2]:[i.default.createElement("div",{key:"meme-swap-default-suffix",className:(0,v.default)("flex items-center",z.suffix)},i.default.createElement("span",{className:(0,v.default)(z.modeText)},_?.tokenSymbol||""),i.default.createElement(F,{onClick:()=>C(!0)},i.default.createElement(D,{className:(0,v.default)("okx-defi-dex-market-sort-down"),style:{fontSize:12,cursor:"pointer"}}))),Math.min(h,Number(_?.decimals)),Number.MAX_SAFE_INTEGER],[n,l.type,_,s,k]),[Q,Ve]=(0,i.useState)(null);return(0,i.useEffect)(()=>{W(P(Q,"focus"))&&Q.focus()},[l.type,Q]),{setInputRef:Ve,suffix:Pe,precision:Ee,inputModeSwitchVisible:O,setVisible:C,changeHandle:U,value:M,valueType:c}};var he=()=>{let{quoteStore:o,configStore:e,buyStore:f,sellStore:n}=d(),{precision:r,changeHandle:t,value:s,valueType:l}=Ne(),{getUsd:S}=Se(d),_=e.currentMode==="buy",k=e.currentMode==="sell",M=(0,Ce.useMemo)(()=>k&&l==="select"?E.mul(s,n.fromToken?.amountNum):s,[s,l,n.fromToken?.amountNum,k]),x=_?f:n,{amountNum:c,tokenSymbol:g,chainId:y}=x?.fromToken||{},U=be(),O=c&&g?"":K.BALANCE_NOT_SHOW,C=o.computedFromTokenValue>0?S(o.computedFromTokenValue):"";return{precision:r,changeHandle:t,costValue:C,inputValue:M,inputLabel:U,balanceState:O,amountNum:c,tokenSymbol:g,chainId:y}};a();u();var B=T(N());q();var we=()=>{let{configStore:o,buyStore:e,quoteStore:f}=d(),{currentMode:n,initLoading:r}=o,{setBuyValue:t,currentBuyPreset:s,fromToken:l,updateCurrentPresetAmountList:S}=e,_=s?.amountList||[],k=(0,B.useCallback)(c=>{t({value:c.value,type:"select",index:c.index}),I.info(w.MEME_SWAP_AMOUNT_SELECT,{data:{type:"select",item:c,currentMode:n}})},[n,t]),M=(0,B.useCallback)(c=>{let g=c.map(y=>String(y));S(g)},[S]);return{quickSelectOptions:(0,B.useMemo)(()=>{if(r||!_?.length)return Array.from({length:3},(g,y)=>({label:"",value:"",key:`meme_loading_${y}`}));let c=P(l,"decimals",0);return _.map((g,y)=>({label:Z(g,{sigFigs:c}),value:g,precision:c,onClick:k,type:"select",index:y,key:`meme_select${y+1}`}))},[_,k,l,r]),handleUpdateQuickSelectOptions:M,initLoading:r||f?.initLoading}},Ae=we;a();u();var ze=T(N());var Ie=()=>{let{configStore:o,quoteStore:e,buyStore:f}=d(),{computedToTokenValue:n,computedToTokenAmount:r}=e,{toToken:t}=f,{currentMode:s}=o;return(0,ze.useMemo)(()=>s==="buy"?oe({realTimeTokenPrice:t?.price,amount:r,nonRealTimeTokenValue:n}):n,[r,n,s,t?.price])},Be=Ie;a();u();var p={root:"_root_z8yvd_1","tg-root":"_tg-root_z8yvd_4",tgRoot:"_tg-root_z8yvd_4",content:"_content_z8yvd_7",loading:"_loading_z8yvd_10","loading-mask":"_loading-mask_z8yvd_13",loadingMask:"_loading-mask_z8yvd_13","extension-mask":"_extension-mask_z8yvd_13",extensionMask:"_extension-mask_z8yvd_13","tg-mask":"_tg-mask_z8yvd_18",tgMask:"_tg-mask_z8yvd_18",switch:"_switch_z8yvd_23",tab:"_tab_z8yvd_26",token:"_token_z8yvd_29",balance:"_balance_z8yvd_33",input:"_input_z8yvd_36",quote:"_quote_z8yvd_39","input-box":"_input-box_z8yvd_42",inputBox:"_input-box_z8yvd_42","select-token-symbol":"_select-token-symbol_z8yvd_48",selectTokenSymbol:"_select-token-symbol_z8yvd_48",btn:"_btn_z8yvd_55","error-tips":"_error-tips_z8yvd_64",errorTips:"_error-tips_z8yvd_64",divide:"_divide_z8yvd_67"};var Ue=J(()=>{let{buyStore:o,quoteStore:e,memeSwapStore:f}=d();xe();let n=ve(),r=Be(),t=R(),s=ue(ee),{changeHandle:l,inputValue:S,inputLabel:_,tokenSymbol:k}=he(),{quickSelectOptions:M,handleUpdateQuickSelectOptions:x}=Ae();return m.default.createElement("div",{className:(0,G.default)(p.root,{[p.tgRoot]:t})},m.default.createElement(j,{hasMask:!0,loading:f?.isSwapLoading,loaderClassName:p.loading,zIndex:11,maskClassName:(0,G.default)(p.loadingMask,t?p.tgMask:p.extensionMask)},m.default.createElement("div",{className:p.content},m.default.createElement(_e,null,m.default.createElement(te,{className:p.switch,memeClick:()=>{s({button_name:"to_meme",tab_name:"to_meme"})}}),m.default.createElement(fe,{className:p.tab,loading:e?.initLoading,mode:"buy"})),m.default.createElement(Te,{className:p.token,loading:e?.initLoading,item:o?.toToken,mode:"buy"}),m.default.createElement(pe,{className:p.balance,loading:e?.initLoading,amount:o?.fromToken?.amountNum,currency:o?.fromToken?.tokenSymbol}),m.default.createElement(Me,{className:p.input,value:S,unit:k,precision:o?.fromToken?.decimals??h,onChange:l,label:_,placeholder:V("swaptrade_general_placeholder_amount",{},{useBr:!1}),quickSelectOptions:M,handleUpdateQuickSelectOptions:x,selectedIndex:o?.buyValue?.index}),n&&m.default.createElement(m.default.Fragment,null,m.default.createElement(H.Quote,{className:"mb-16",initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,circleLoading:e.quoteLoading,tokenAmount:e?.computedToTokenAmount,price:r,tokenSymbol:o?.toToken?.tokenSymbol}),m.default.createElement(ke,{initLoading:e.initLoading,className:"mb-16"}),m.default.createElement(ce,{initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,className:"mb-16"}),m.default.createElement(H.ServiceFeeInfo,{className:"mb-24",initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,useBussinessStore:d})),m.default.createElement(de,{isSkeleton:f?.isSwapLoading}),m.default.createElement(ge,{loading:e.initLoading,useMemeSwapBtnProps:le}))),m.default.createElement(ye,null))}),_t=Ue;export{_t as default};
//# sourceMappingURL=Buy-DLHFE4EQ.js.map
