import{a as D,b as c}from"./chunk-B4CRE6WK.js";import{c as _}from"./chunk-VY2OGUH2.js";import{C as P,E as w}from"./chunk-NS5EW6UN.js";import{o as b}from"./chunk-KGMP5AO5.js";import{Aa as v,M as F}from"./chunk-4C5HF6J2.js";import{o as i,q as n}from"./chunk-UWURTNRY.js";i();n();v();i();n();var A=({scrollLoad:t,lastRowId:o,scrollLoading:e,initLoading:s,scrollLoadLimitReached:l})=>!t||Boolean(o)&&!e&&!s&&!l;i();n();i();n();function J(t){return async(o,e)=>{await o(H({...t,dates:c().dates})),await o(m(!0));let s=e();o(p(G(s)))}}var K=49,r=b({name:"txHistory",initialState:{filters:{dates:c().dates,chainId:"",groupType:0,coinId:void 0},txList:[],txGroupList:[],initLoading:!0,scrollLoading:!1,filterLoading:!1,lastRowId:"",historyPageSearchValue:"",scrollLoadCount:0,scrollLoadLimitReached:!1},reducers:{setHistoryPageSearchValue:(t,o)=>{t.historyPageSearchValue=o.payload},setInitLoading:(t,o)=>{t.initLoading=o.payload},setScrollLoading:(t,o)=>{t.scrollLoading=o.payload},setFilterLoading:(t,o)=>{t.filterLoading=o.payload},setFilters:(t,o)=>{t.filters={...t.filters,...o.payload,init:!1}},setLastRowId:(t,o)=>{t.lastRowId=o.payload},setTxList:(t,o)=>{t.txList=o.payload},setTxGroupList:(t,o)=>{t.txGroupList=o.payload},mergeTxList:(t,o)=>{t.txList=[...t.txList,...o.payload]},resetFilters(t){t.scrollLoadCount=0,t.scrollLoadLimitReached=!1,t.filters={dates:c().dates,chainId:"",groupType:0,coinId:void 0}},resetTxHistory:t=>{t.txList=[],t.initLoading=!1,t.scrollLoading=!1,t.filterLoading=!1,t.lastRowId="",t.historyPageSearchValue="",t.scrollLoadCount=0,t.scrollLoadLimitReached=!1},incrementScrollLoadCount:t=>{t.scrollLoadCount+=1,t.scrollLoadCount>=K&&(t.scrollLoadLimitReached=!0)},resetScrollLoadCount:t=>{t.scrollLoadCount=0,t.scrollLoadLimitReached=!1}}}),{actions:Q,reducer:Y}=r,ft=Y,xt=t=>t[r.name].txList,Z=t=>t[r.name].filters,pt=t=>t[r.name].txGroupList,G=t=>{let o=Z(t),{dates:e,chainId:s,groupType:l,coinId:d}=o,{startTime:a,endTime:g}=D(e).timestamps;return{startTime:a,endTime:g,chainId:s,groupType:l,coinId:d}},k=t=>t[r.name].initLoading,q=t=>t[r.name].scrollLoading,M=t=>t[r.name].lastRowId,yt=t=>t[r.name].filterLoading,Tt=t=>t[r.name].historyPageSearchValue;var V=t=>t[r.name].scrollLoadLimitReached,{setFilters:H,setTxList:y,mergeTxList:T,setInitLoading:S,setScrollLoading:R,setFilterLoading:m,resetTxHistory:St,setLastRowId:h,resetFilters:Rt,setTxGroupList:ht,setHistoryPageSearchValue:It,incrementScrollLoadCount:O,resetScrollLoadCount:E}=Q;var $=t=>t?w:P,tt=t=>F(t),ot=t=>tt(t)?[]:t,p=(t,o={initLoad:!1,scrollLoad:!1,autoRefresh:!1,fromCoinDetail:!1,hasMoreData:!0,hasInitData:!0})=>async(e,s)=>{let l={...t},{initLoad:d,scrollLoad:a,fromCoinDetail:g,hasMoreData:W,hasInitData:z}=o,B=$(g),L=s(),I=M(L),C=V(L),N=k(L),U=q(L);if(!(a&&C||!W&&z||!A({scrollLoad:a,lastRowId:I,scrollLoading:U,initLoading:N,scrollLoadLimitReached:C}))){d&&(e(S(!0)),e(h("")),e(E())),a&&(e(R(!0)),l.lastRowId=I),l.hideRisk=_();try{let f=await B(l),u=ot(f?.content);a?(e(O()),e(T(u))):e(y(u));let X=u.length,j=f.hasViewMore?u[X-1]?.rowId:"";e(h(j))}catch{e(a?T([]):y([]))}d&&e(S(!1)),a&&e(R(!1)),e(m(!1))}};export{p as a,J as b,ft as c,xt as d,Z as e,pt as f,G as g,k as h,q as i,M as j,yt as k,Tt as l,V as m,H as n,y as o,S as p,St as q,h as r,Rt as s,ht as t,It as u,E as v};
//# sourceMappingURL=chunk-QZITJOI6.js.map
