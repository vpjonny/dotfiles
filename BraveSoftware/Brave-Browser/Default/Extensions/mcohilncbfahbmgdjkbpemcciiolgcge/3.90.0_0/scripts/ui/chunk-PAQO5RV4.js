import{a as x}from"./chunk-LOWDVO7P.js";import{b as S}from"./chunk-S63SUKPS.js";import{b as d}from"./chunk-NS5EW6UN.js";import{b as C}from"./chunk-IPVHRCDK.js";import{qa as y}from"./chunk-MJDO2VHF.js";import{Ba as l}from"./chunk-QF42JCDG.js";import{Ka as c,ka as a}from"./chunk-EQ34WRCJ.js";import{a as T}from"./chunk-DOSBJ3L3.js";import{b as N}from"./chunk-FLSAETOH.js";import{Aa as Z,g as h}from"./chunk-4C5HF6J2.js";import{f as p,o as f,q as g}from"./chunk-UWURTNRY.js";f();g();var b=p(N());var u=p(T());Z();var _=()=>{let{accountMap:t}=C();return t[a]},G=()=>{let t=(0,u.useHistory)(),r=_(),i=async o=>{let n={fromAddr:r,coinId:o},{info:e}=await d(n);return e||{}};return async({coinId:o,baseCoinId:n})=>{if([Number(n),Number(o)].includes(c)){let{accountId:e,nonce:s}=await i(o);if(s===0)return t.push(`${l}?coinId=${o}&nonce=${s}&accountId=${e}`),!1}return!0}},M=({nonce:t=0,address:r,accountId:i})=>{let o=(0,u.useHistory)(),n=y();return(0,b.useCallback)(async()=>{let s=Number(t),A={nonce:t,accountId:i,type:"changePubkey",from:r},{txHash:P,...m}=await S(A,r,a),{type:I}=m,K={txHash:P,signedTx:JSON.stringify({fastProcessing:null,tx:{nonce:s,...m},signature:null}),toAdr:"",txSource:2,coinAmount:"0",fromAdr:r,serviceCharge:"0",coinId:c,extJson:JSON.stringify({type:I||"ChangePubKey",serviceChargeCoinId:c})};try{await n(x(K)),o.go(-1)}catch{h()}},[])};export{G as a,M as b};
//# sourceMappingURL=chunk-PAQO5RV4.js.map
