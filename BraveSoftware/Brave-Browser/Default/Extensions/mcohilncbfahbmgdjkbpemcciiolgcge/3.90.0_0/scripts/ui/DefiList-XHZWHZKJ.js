import{b as Qt}from"./chunk-57J76VLB.js";import{d as Yt}from"./chunk-Z3CN3PP7.js";import"./chunk-JCVVB72F.js";import"./chunk-6CJRBF2P.js";import"./chunk-3KJMTMXK.js";import"./chunk-IWYRUFZN.js";import{a as Kt}from"./chunk-C54N67Q6.js";import"./chunk-VRCAHYHW.js";import"./chunk-BDLFPOJT.js";import"./chunk-N6NP4323.js";import"./chunk-ARYCEY4U.js";import"./chunk-7SVXGEVR.js";import"./chunk-GVO5XBXE.js";import"./chunk-CVLOEZ64.js";import"./chunk-ZBCYRIHC.js";import"./chunk-XI5NMQGM.js";import"./chunk-FLQKBEJO.js";import"./chunk-5TBKSXR4.js";import"./chunk-DZPLORMY.js";import"./chunk-5WI3NR4H.js";import"./chunk-AOZHPYH5.js";import"./chunk-W25M53MS.js";import"./chunk-HLTJYEGI.js";import"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import"./chunk-3MLYZLAT.js";import{b as Xt}from"./chunk-JHFDXQQS.js";import"./chunk-5YK6XLJ4.js";import"./chunk-5HKBJUHN.js";import"./chunk-IY6TM6RL.js";import"./chunk-VUWWQCMX.js";import"./chunk-OHHYJNZI.js";import"./chunk-5EFGCLI4.js";import"./chunk-B4MQLH4C.js";import"./chunk-VWVRJUMU.js";import"./chunk-EUAAIPZO.js";import{b as bt}from"./chunk-GCJ2PJNQ.js";import"./chunk-A4R53AVX.js";import"./chunk-TJ3NTWVS.js";import"./chunk-634WRNGH.js";import"./chunk-ZFAUEPQW.js";import"./chunk-RN5VSY2K.js";import"./chunk-YPWPNJRG.js";import"./chunk-GMVPA3MX.js";import"./chunk-P355XBV4.js";import"./chunk-C4TBDTQO.js";import"./chunk-6AUQLYPZ.js";import"./chunk-UPIYMC4Q.js";import"./chunk-ZUO5BDO3.js";import"./chunk-A7EUFORV.js";import"./chunk-QEPQGEPL.js";import"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import"./chunk-75EAYNWR.js";import"./chunk-D6LKASPV.js";import"./chunk-DKVOSSSH.js";import"./chunk-FWL474H4.js";import"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import{a as ft}from"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import"./chunk-XUGHAFHG.js";import"./chunk-B5L26Z2J.js";import"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import"./chunk-LZL7SWT5.js";import{c as Ie}from"./chunk-NCGPJXQK.js";import"./chunk-VGYB2PVD.js";import"./chunk-OYIB3B2O.js";import"./chunk-OBLKTTHP.js";import"./chunk-LQJXR5XX.js";import"./chunk-NQGIYDUG.js";import"./chunk-ARRY6F45.js";import"./chunk-QTCVWDVR.js";import"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import"./chunk-CBZ2RV36.js";import"./chunk-QMHGGMPE.js";import"./chunk-GVYIP5Q5.js";import"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import{m as Zt}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import{a as b}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import{a as qt}from"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import{o as m}from"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{h as Re}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{a as Wt,f as j}from"./chunk-MJSLAJV6.js";import{i as Vt,k as jt}from"./chunk-KC2XLVFC.js";import{M as q,ra as $}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{E as Ut}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import{a as B,c as Se,h as Ot,l as Gt,t as Mt}from"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import{h as Jt}from"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as n}from"./chunk-3FMJDUGT.js";import{c as pe}from"./chunk-2O5TMJZM.js";import{O as zt}from"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Z as mt,da as dt,vb as ct}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{C as Rt,k as Ft,p as g,x as Bt}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{$ as ut,A as pt,E as fe,I as Dt,_ as Z,aa as $t,ba as Ht,c as kt,e as Pe,o as le,y as ke}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as R,t as z,w as et}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as Te}from"./chunk-FB3ILH2L.js";import{b as M}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as sn,l as lt}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as k,o as i,q as s}from"./chunk-UWURTNRY.js";i();s();var ee=k(M()),tn=k(Te());i();s();var we=k(M());i();s();var eo=({analysisPlatformId:e,chainId:o})=>{let t=Re(),{data:r,loading:a}=Ie(pe.getDefiDetail,{method:"GET",params:{accountId:t||"",platformList:JSON.stringify([{analysisPlatformId:e,chainId:o}])}},{refreshDeps:[e,o,t],ready:!!t});return{defiDetail:r?(()=>{let l=r?.data?.[0]?.platformDetailListByAccountId?.[0]??{},c=r?.data?.[0]??{};return{...l,...c}})():null,loading:a}};i();s();var U=k(M());i();s();i();s();var gt={DEFAULT:"default",PROTOCOL:"protocol"};var to={[1]:2,[2]:4,[3]:5,[4]:6,[5]:16};i();s();var ve=k(M());i();s();var oo=k(M());var Ce=()=>{let e=ft();return{navigateToInvestment:(0,oo.useCallback)(t=>{let{detailPath:r,platformInfo:a,isInvestTypeSupport:d=!1,source:l="positionpage"}=t,c=a.platformUrl;d&&r&&a?.detailPrePath&&(c=`${e?.origin}${a?.detailPrePath}${r}#source=${l}`),c&&Bt(c)},[e?.origin])}};i();s();var tt=k(M()),no=k(Te());i();s();var He={container:"_container_15yph_1",logoGroup:"_logoGroup_15yph_6",tokenLogo:"_tokenLogo_15yph_10",small:"_small_15yph_19",moreLogo:"_moreLogo_15yph_23"};var Je=({investLogo:e,size:o=20,type:t})=>{let{middleLogoList:r=[],topRightLogoList:a=[]}=e,d=o===16,l=()=>(t===gt.PROTOCOL?r:r.slice(0,2)).map(p=>tt.default.createElement(fe,{key:p?.tokenLogo,src:p?.tokenLogo,className:(0,no.default)(He.tokenLogo,{[He.small]:d})})),c=()=>a.length===0?null:tt.default.createElement(fe,{src:a[0]?.tokenLogo,className:He.moreLogo});return r.length===0?null:tt.default.createElement(n.Box,{className:He.container},tt.default.createElement("div",{className:He.logoGroup},l()),c())};i();s();var ge=k(M()),ot=k(Te());i();s();var se={container:"_container_vjjz5_1","padding-none":"_padding-none_vjjz5_5",paddingNone:"_padding-none_vjjz5_5","padding-sm":"_padding-sm_vjjz5_8",paddingSm:"_padding-sm_vjjz5_8","padding-md":"_padding-md_vjjz5_11",paddingMd:"_padding-md_vjjz5_11","padding-lg":"_padding-lg_vjjz5_14",paddingLg:"_padding-lg_vjjz5_14","radius-none":"_radius-none_vjjz5_17",radiusNone:"_radius-none_vjjz5_17","radius-sm":"_radius-sm_vjjz5_20",radiusSm:"_radius-sm_vjjz5_20","radius-md":"_radius-md_vjjz5_23",radiusMd:"_radius-md_vjjz5_23",divider:"_divider_vjjz5_26",content:"_content_vjjz5_35",left:"_left_vjjz5_38",right:"_right_vjjz5_42",textEllipsis:"_textEllipsis_vjjz5_46","price-row__content":"_price-row__content_vjjz5_53",priceRowContent:"_price-row__content_vjjz5_53","price-row__content--gap-xs":"_price-row__content--gap-xs_vjjz5_56",priceRowContentGapXs:"_price-row__content--gap-xs_vjjz5_56","price-row__content--gap-sm":"_price-row__content--gap-sm_vjjz5_59",priceRowContentGapSm:"_price-row__content--gap-sm_vjjz5_59","price-row__content--gap-md":"_price-row__content--gap-md_vjjz5_62",priceRowContentGapMd:"_price-row__content--gap-md_vjjz5_62","price-row__content--gap-lg":"_price-row__content--gap-lg_vjjz5_65",priceRowContentGapLg:"_price-row__content--gap-lg_vjjz5_65","price-row__left":"_price-row__left_vjjz5_68",priceRowLeft:"_price-row__left_vjjz5_68","price-row__right":"_price-row__right_vjjz5_73",priceRowRight:"_price-row__right_vjjz5_73","price-row__right--clickable":"_price-row__right--clickable_vjjz5_79",priceRowRightClickable:"_price-row__right--clickable_vjjz5_79","price-row__right--default":"_price-row__right--default_vjjz5_82",priceRowRightDefault:"_price-row__right--default_vjjz5_82","price-content__container":"_price-content__container_vjjz5_85",priceContentContainer:"_price-content__container_vjjz5_85","price-content__values":"_price-content__values_vjjz5_88",priceContentValues:"_price-content__values_vjjz5_88","price-content__logo":"_price-content__logo_vjjz5_91",priceContentLogo:"_price-content__logo_vjjz5_91"};var ro=(e,o=!1)=>{let t=o?se.textEllipsis:"";if(typeof e=="string")return ge.default.createElement(m.Text,{size:m.SIZE.sm,className:t},e);let{text:r,size:a="sm",type:d="default",strong:l}=e;return ge.default.createElement(m.Text,{size:m.SIZE[a],type:m.TYPE[d],strong:l,className:t},r)},ln=e=>{let{primary:o,secondary:t,hiddenAssets:r=!1,hiddenString:a="****",showArrow:d=!1,primarySize:l="sm",secondarySize:c="xs",primaryColor:u,logo:p}=e;return ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:se["price-content__container"]},ge.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.end,className:se["price-content__values"]},ge.default.createElement(m.Text,{size:m.SIZE[l],strong:500,style:u?{color:u}:{}},r?a:o),t&&ge.default.createElement(m.Text,{size:m.SIZE[c],type:m.TYPE.secondary},r?a:t)),p&&ge.default.createElement(n.FlexBox,{className:se["price-content__logo"]},p),d&&ge.default.createElement(z,{iconName:"okds-arrow-chevron-right-centered-md","data-testid":b.DEFI_PAGE.FLEX_ROW_ARROW}))},K=({left:e,leftText:o,right:t,rightText:r,priceConfig:a,gap:d="sm",onClick:l,className:c="",padding:u="none","data-testid":p})=>{let I=(0,ot.default)(se.container,se[`padding-${u}`],c),f=(0,ot.default)(se.content,se["price-row__content"],se[`price-row__content--gap-${d}`]),C=(0,ot.default)(se.left,se["price-row__left"]),A=l&&a?.showArrow,L=(0,ot.default)(se.right,se["price-row__right"],{[se["price-row__right--clickable"]]:A,[se["price-row__right--default"]]:!A}),h=o?ro(o,!0):e,S;return a?S=ln(a):r?S=ro(r):S=t,ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:I,"data-testid":p},ge.default.createElement(n.FlexBox,{className:f,align:n.ALIGN.center},h&&ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:C,"data-testid":b.DEFI_PAGE.FLEX_ROW_LEFT},h),S&&ge.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"flex-end",className:L,onClick:a?.showArrow?l:void 0,role:l&&a?.showArrow?"button":void 0,tabIndex:l&&a?.showArrow?0:void 0,"data-testid":b.DEFI_PAGE.FLEX_ROW_RIGHT},S)))};i();s();var Me={main:"_main_na6wu_1",content:"_content_na6wu_4",nameSection:"_nameSection_na6wu_8",feeRate:"_feeRate_na6wu_11",omission:"_omission_na6wu_14"};var ao=({investName:e="",investmentName:o="",investLogo:t={middleLogoList:[]},feeRate:r="",totalValue:a="",hiddenAssets:d=!1,detailPath:l,platformInfo:c,isInvestTypeSupport:u})=>{let{symbol:p,usdToThisRate:I}=$(q),{navigateToInvestment:f}=Ce(),C=d?W:j(B(a,I),{currencySign:p}).value,A=()=>{f({detailPath:l,platformInfo:c,isInvestTypeSupport:u})},L=Rt.percent(Mt(B(r,"100"),2));return ve.default.createElement(K,{className:Me.main,left:ve.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Me.leftContent},ve.default.createElement(Je,{investLogo:t}),ve.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Me.content},ve.default.createElement(n.FlexBox,{align:n.ALIGN.end,className:Me.nameSection},ve.default.createElement(m.Text,{className:Me.omission,size:m.SIZE.sm,strong:500},o),r&&ve.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.xs,className:Me.feeRate},`/${L}`)),ve.default.createElement(ut,{size:Z.SIZE.sm},e))),priceConfig:{primary:C,hiddenAssets:d,hiddenString:W,showArrow:!0},onClick:A,"data-testid":b.DEFI_PAGE.CARD_HEADER})};i();s();var nt=k(M());i();s();var ze=k(M()),_t=k(Te());i();s();var Ze={"risk-tag":"_risk-tag_9k4hg_1",riskTag:"_risk-tag_9k4hg_1","risk-icon":"_risk-icon_9k4hg_11",riskIcon:"_risk-icon_9k4hg_11","risk-text":"_risk-text_9k4hg_19",riskText:"_risk-text_9k4hg_19","risk-safe":"_risk-safe_9k4hg_22",riskSafe:"_risk-safe_9k4hg_22","risk-warning":"_risk-warning_9k4hg_29",riskWarning:"_risk-warning_9k4hg_29","risk-danger":"_risk-danger_9k4hg_36",riskDanger:"_risk-danger_9k4hg_36","risk-unknown":"_risk-unknown_9k4hg_43",riskUnknown:"_risk-unknown_9k4hg_43"};function mn({healthLevel:e,showLevel:o=!0,levelConfig:t={},className:r}){let a={[1]:"safe",[2]:"warning",[3]:"danger",[0]:"unknown"},d={safe:{icon:"okx-wallet-plugin-security-fill",textIcon:"okx-wallet-plugin-illimited"},warning:{icon:"okx-wallet-plugin-security-1",text:"--"},danger:{icon:"okx-wallet-plugin-security-filled",text:"--"},unknown:{icon:"okx-wallet-plugin-security-1",text:"--"}},l=a[e]||a[0],c=t?.text||d[l]?.text,u=t?.textIcon||d[l]?.textIcon,p=t?.icon||d[l]?.icon;return ze.default.createElement("div",{className:(0,_t.default)(Ze.riskTag,Ze[`risk-${l}`],r)},ze.default.createElement(z,{fontSize:"16px",className:(0,_t.default)(p,Ze.riskIcon)}),o&&ze.default.createElement(ze.default.Fragment,null,c?ze.default.createElement(m.Text,{size:m.SIZE.xs,strong:400,className:Ze["risk-text"]},c):ze.default.createElement(z,{fontSize:"16px",className:(0,_t.default)(u,Ze["risk-text"])})))}var yt=mn;i();s();var io={leftContent:"_leftContent_1pm16_1"};var dn=e=>{let{totalValue:o,investTypeName:t,healthRate:r,hiddenAssets:a=!1,detailPath:d,isInvestTypeSupport:l,platformInfo:c,showArrow:u=!0}=e,{symbol:p,usdToThisRate:I}=$(q),{navigateToInvestment:f}=Ce(),C=()=>{f({detailPath:d,platformInfo:c,isInvestTypeSupport:l})},A=nt.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:io.leftContent},t&&nt.default.createElement(Z,{size:Z.SIZE.md,category:Z.CATEGORY.fill,color:Z.COLOR.grey},t),r&&nt.default.createElement(yt,{healthLevel:r.level,levelConfig:{text:r.rate}}));return nt.default.createElement(K,{left:A,onClick:C,priceConfig:{primary:a?W:j(B(o||"0",I),{currencySign:p}).value,showArrow:u,hiddenAssets:a,hiddenString:W},gap:"md","data-testid":b.DEFI_PAGE.CARD_MAIN})},so=dn;i();s();var he=k(M());i();s();var Ue=e=>e===4||e===5,lo=e=>e.some(o=>o?Ue(o.rewardType):!1);i();s();var cn=e=>!e||!Array.isArray(e)?"0":e.reduce((o,t)=>Se(o,t.currencyAmount||"0"),"0"),pn=e=>e===4||e===5,mo=(e,o,t)=>({...o,items:[...o.items,e],totalCurrencyAmount:Se(o.totalCurrencyAmount,t,{returnString:!0})}),un=(e,o)=>{let t=[];if(e.items.length>0){let r={...e,chainId:e.items[0]?.chainId};t.push(r)}if(o.items.length>0){let r={...o,chainId:o.items[0]?.chainId};t.push(r)}return t};function xt(e){if(!e||e.length===0)return[];let o={rewardType:1,totalCurrencyAmount:"0",items:[],displayName:"wallet_extension_defiposition_title_rewards"},t={rewardType:4,totalCurrencyAmount:"0",items:[],displayName:"wallet_extension_defiposition_title_okx_bonus"};return e.forEach(r=>{if(!r||typeof r!="object")return;let{rewardType:a,baseDefiTokenInfos:d}=r,l=cn(d);a===1?o=mo(r,o,l):pn(a)&&(t=mo(r,t,l))}),un(t,o)}i();s();var po=(e,o)=>Ue(e)?e===4?g("wallet_extension_defiposition_title_okx_bonus"):g("wallet_extension_bonus_mid_title_merkl_bonus"):o?g(o):"",fn=e=>"callDataRewardType"in e&&"claimIndex"in e,gn=(e,o)=>{let t={};return e?.callDataRewardType===2&&(t.claimOverdue=1),e?.claimIndex&&(t.claimIndex=[e.claimIndex]),o?.canClaimAll===!0&&(t.claimAll=1),t},_n=(e,o)=>{let t={...o};return e&&(t.callDataExtJson=JSON.parse(e)),JSON.stringify(t)},yn=(e,o)=>{let t=e.callDataExtJson||"",r=fn(e)?gn(e,o):{};return _n(t,r)},xn=(e,o)=>{if(e!==void 0)return e;if(o&&"chainId"in o)return o.chainId},uo=(e,o={})=>{let{chainId:t,isOpenLink:r=!1,buttonType:a,claimInfo:d}=o,l=yn(e,d),c=xn(t,e);return{investLogo:{middleLogoList:[{tokenLogo:e.tokenLogo,tokenName:e.tokenSymbol}]},tokenSymbol:e.tokenSymbol,tokenLogo:e.tokenLogo,coinAmount:e.coinAmount,currencyAmount:e.currencyAmount,isOpenLink:r,buttonType:a??e.buttonType,callDataExtJson:l,tokenAddress:e.tokenAddress,chainId:c,tokenPrecision:e.tokenPrecision}},rt=(e,o={})=>(e||[]).map(t=>uo(t,o)),fo=(e,o,t)=>{let{availableRewards:r=[]}=e||{};if(!r||r.length===0)return[];let a={redeemCalldataExtInfo:[],rewardAddress:"",chainId:o};return t&&(a.analysisPlatformId=t),r.filter(l=>!!l?.baseDefiTokenInfos?.length).map(l=>{let c={...a};return l.callDataExtJson&&(c.callDataExtJson=JSON.parse(l.callDataExtJson)),{title:"",rewardType:1,list:rt(l?.baseDefiTokenInfos||[],{chainId:o}),buttonType:l?.buttonType,callDataExtJson:JSON.stringify(c),chainId:o,hideArrow:!0}})},go=(e,o)=>!e.items||e.items.length===0?[]:e.items.map(t=>{let r=t.rewardType||e.rewardType;return{title:po(r),list:rt(t?.baseDefiTokenInfos||[],{chainId:o}),claimMode:t.claimMode,buttonType:t?.buttonType,hideArrow:!0,chainId:o,rewardType:r,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")})}}),_o=(e,o)=>e.map(t=>({title:g(t.displayName),hideArrow:!0,rewardType:1,list:rt(t.items,{chainId:o,isOpenLink:!1}),chainId:o,buttonType:t.buttonType,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")})})),yo=(e,o)=>{let{chainId:t,mainAsset:r}=o,a=[{title:r.title,list:[{investLogo:r.investLogo,tokenSymbol:r.tokenSymbol,tokenLogo:"",coinAmount:r.coinAmount,currencyAmount:r.currencyAmount,isOpenLink:!0,detailPath:r?.detailPath,isInvestTypeSupport:r?.isInvestTypeSupport}]}];return e.forEach(d=>{let l=po(d.rewardType,d.displayName);a.push({...d,title:l,hideArrow:!0,list:d.items.flatMap(c=>rt(c.baseDefiTokenInfos||[],{chainId:d.chainId??t,isOpenLink:!1})),chainId:d.chainId??t,buttonType:d.items[0]?.buttonType,callDataExtJson:"",rewardType:d.rewardType})}),a},xo=(e,o)=>!e||e.length===0?[]:e.map(t=>({title:"",list:rt(t.baseDefiTokenInfos||[],{chainId:o,isOpenLink:!1}),buttonType:t.buttonType,callDataExtJson:JSON.stringify({callDataExtJson:JSON.parse(t.callDataExtJson||"{}")}),rewardType:1,hideArrow:!0,chainId:o})),To=(e,o,t)=>!e||e.length===0?[]:[{list:e.map(r=>uo(r,{chainId:o,claimInfo:t})),buttonType:0,chainId:o,rewardType:1,hideArrow:!0}];i();s();var E=k(M());i();s();function Tn(e){let o=ct({chainId:e}),t=Zt(o?.localType);return o?t:null}var Tt=Tn;i();s();var ne=k(M());var St=k(Te());i();s();var y={dialogContent:"_dialogContent_7daqu_1",headerContainer:"_headerContainer_7daqu_5",tokenSection:"_tokenSection_7daqu_10",itemContainer:"_itemContainer_7daqu_14",claimButtonContainer:"_claimButtonContainer_7daqu_18",claimButton:"_claimButton_7daqu_18",specialRewardIcon:"_specialRewardIcon_7daqu_25",questionMarkIcon:"_questionMarkIcon_7daqu_30",bonusWarningIcon:"_bonusWarningIcon_7daqu_35",bonusTitle:"_bonusTitle_7daqu_38",bonusDescription:"_bonusDescription_7daqu_43",bonusContainer:"_bonusContainer_7daqu_47",bonusLabel:"_bonusLabel_7daqu_53",bonusValue:"_bonusValue_7daqu_54",bonusDivider:"_bonusDivider_7daqu_57",bonusActionButton:"_bonusActionButton_7daqu_62",bonusConfirmButton:"_bonusConfirmButton_7daqu_67",bonusCancelButton:"_bonusCancelButton_7daqu_72",bonusDialogContainer:"_bonusDialogContainer_7daqu_77",bonusHeaderContainer:"_bonusHeaderContainer_7daqu_81",bonusRewardsList:"_bonusRewardsList_7daqu_84",bonusRewardItem:"_bonusRewardItem_7daqu_87",bonusTotalRow:"_bonusTotalRow_7daqu_91",bonusNetworkFeeRow:"_bonusNetworkFeeRow_7daqu_95",bonusButtonContainer:"_bonusButtonContainer_7daqu_99",gasFeeDialogWindow:"_gasFeeDialogWindow_7daqu_103",gasFeeDragHandle:"_gasFeeDragHandle_7daqu_108",gasFeeTitle:"_gasFeeTitle_7daqu_115",gasFeeDescription:"_gasFeeDescription_7daqu_121",gasFeeContinueButton:"_gasFeeContinueButton_7daqu_125",gasFeeCancelButton:"_gasFeeCancelButton_7daqu_126",gasFeeMainContainer:"_gasFeeMainContainer_7daqu_132",gasFeeHeaderPadding:"_gasFeeHeaderPadding_7daqu_137",gasFeeContentPadding:"_gasFeeContentPadding_7daqu_141",gasFeeHeaderSection:"_gasFeeHeaderSection_7daqu_146",gasFeeIconWrapper:"_gasFeeIconWrapper_7daqu_150",gasFeeButtonSectionLayout:"_gasFeeButtonSectionLayout_7daqu_155",gasFeeButtonGroupLayout:"_gasFeeButtonGroupLayout_7daqu_159",titleContainer:"_titleContainer_7daqu_164",tipDialogContent:"_tipDialogContent_7daqu_167",loadingContainer:"_loadingContainer_7daqu_170",sectionTitleContainer:"_sectionTitleContainer_7daqu_176",emptyContainer:"_emptyContainer_7daqu_179"};var Io=({visible:e,onClose:o,onConfirm:t,bonusData:r,platformInfo:a})=>{let d=$(q),l=d?.usdToThisRate,c=d?.symbol,u=r.reduce((p,I)=>{let f=I.currencyAmount||"0";return Se(p,f)},"0");return ne.default.createElement(le.Action,{visible:e,onClose:o,hideCloseBtn:!1,maskClosable:!0},ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusDialogContainer,"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG},ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:y.bonusHeaderContainer},ne.default.createElement(z,{iconName:"okds-warning-circle",fontSize:"56px",className:y.bonusWarningIcon}),ne.default.createElement(m.Text,{size:m.SIZE.xl,strong:700,align:"center",className:y.bonusTitle,style:{fontSize:"24px"}},g("wallet_extension_defi_bonus_reminder_title"))),ne.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusDescription,align:"center"},g("wallet_extension_defiposition_bttmsheet_desc_claim_all_rewards")),ne.default.createElement("div",{className:y.bonusContainer},ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusRewardsList},r.map(p=>ne.default.createElement("div",{key:`${p.tokenAddress}-${p.tokenSymbol}-${p.coinAmount}-${p.currencyAmount}`,className:y.bonusRewardItem},ne.default.createElement(Oe,{logo:p.tokenLogo,tokenSymbol:p.tokenSymbol,coinAmount:p.coinAmount,currencyAmount:p.currencyAmount,title:p.tokenSymbol,hideArrow:!0,platformInfo:a}))),r.length>0&&ne.default.createElement("div",{className:y.bonusDivider}),ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusTotalRow},ne.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_defiposition_common_label_total_rewards")),ne.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},j(B(u,l||1),{currencySign:c||"$"}).value)))),ne.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusButtonContainer},ne.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.xl,onClick:t,className:(0,St.default)(y.bonusActionButton,y.bonusConfirmButton),"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG_CONTINUE_BUTTON},g("wallet_extension_defiposition_bttmsheet_btn_continue_claim")),ne.default.createElement(R,{category:R.CATEGORY.outline,type:R.TYPE.default,size:R.SIZE.xl,onClick:o,className:(0,St.default)(y.bonusActionButton,y.bonusCancelButton),"data-testid":b.DEFI_PAGE.BONUS_WINDOW_DIALOG_CANCEL_BUTTON},g("commonall_text_btn_cancel")))))};i();s();var me=k(M());i();s();var Co={fullscreenDialog:"_fullscreenDialog_1ckr4_1"};i();s();var It=k(M());var wo=()=>{let{runAsync:e}=Ie(pe.postInvestTransactionSaveOrder,{method:"POST",catchMode:"noToast"},{manual:!0});return{handleSaveOrderWithFetch:(0,It.useCallback)(async t=>{let{walletId:r,chainId:a,txParams:d,defiDetail:l}=t,c=d?.from||"",u=d?.to||"",p=d?.data||"",I=l?.analysisPlatformId,f=l?.investmentId,C=l?.list||[],A=l?.orderType||2,L={coinAmount:0,fromAdr:c,inputData:p,toAdr:u,accountId:r,walletPlug:5,tokenInfo:C,totalValue:l?.totalValue,orderType:A,analysisPlatformId:I,chainId:a,investmentId:f,extJson:JSON.stringify({})},h=await e(L);return h&&h.code==0&&h.data?{orderId:h.data.orderId,orderTxInfoId:h.data.orderTxInfoId,fromAddress:c}:null},[e])}},Ao=()=>{let{runAsync:e}=Ie(pe.postInvestTransactionBindOrderAndTx,{catchMode:"noToast",method:"POST"},{manual:!0});return{handleTransactionSuccessWithFetch:(0,It.useCallback)(async t=>{let{txResult:r,orderInfo:a,txParams:d,signedTxParams:l}=t,{orderId:c,orderTxInfoId:u,fromAddress:p}=a,I=r?.txHash;if(!I)return;let f={txHash:I,orderId:c,orderTxInfoId:u,fromAddress:p,inputData:d?.data||""};l&&(f.nonce=l.nonce),await e(f)},[e])}},ko=()=>{let{runAsync:e}=Ie(pe.postInvestTransactionSyncOrderStatus,{method:"POST",catchMode:"noToast"},{manual:!0});return{handleTransactionFailureWithFetch:(0,It.useCallback)(async t=>{let{reason:r,status:a=2,orderInfo:d}=t,{orderId:l,orderTxInfoId:c}=d;await e({orderId:l,orderTxInfoId:c,status:a,failedReason:r})},[e])}};var Cn=({unapproved:e,onClose:o,visible:t})=>{let{chainId:r,baseChain:a,txParams:d,orderInfo:l,defiDetail:c}=e,u=Re(),p=(0,me.useRef)(!1),I=(0,me.useRef)(null),[f,C]=(0,me.useState)(null),{handleSaveOrderWithFetch:A}=wo(),{handleTransactionSuccessWithFetch:L}=Ao(),{handleTransactionFailureWithFetch:h}=ko();Vt(()=>{(async()=>{if(l||!d||f)return;let O=await A({walletId:u,chainId:r,txParams:d,defiDetail:c});O&&C(O)})()});let S=(0,me.useCallback)(async w=>{let O=f||l;!O||p.current||(p.current=!0,await L({txResult:w,orderInfo:O,txParams:d,signedTxParams:I.current}))},[f,l,d,L]),V=(0,me.useCallback)(async(w,O=2)=>{let X=f||l;!X||await h({reason:w,status:O,orderInfo:X})},[f,l,h]),P=async w=>{if(w?.error){await V(w.error?.message||w.error?.msg||"",2);return}w&&(await S(w),o&&o())},D=async()=>{try{await V("User cancelled transaction",1)}catch{}finally{o&&o()}},x=()=>{switch(a){case dt:if(!d.serializedData)throw new Error("Missing serializedData for Solana transaction");return me.default.createElement(Kt,{id:`defi-claim-${u}-${r}`,walletId:u,method:Ut.SIGN_AND_SEND_TRANSACTION,params:{message:[{serializedMessage:d.serializedData}]},onConfirm:P,onCancel:D,addPriorityFee:!1});case mt:default:return me.default.createElement(Yt,{walletId:u,chainId:r,txParams:d,onCancel:D,onConfirm:P,onBeforeSign:w=>(I.current=w,w)})}};return me.default.createElement(le,{visible:t,hideCloseBtn:!1,maskClosable:!1,noContentPadding:!0,onClose:o,windowClass:Co.fullscreenDialog},me.default.createElement("div",{"data-testid":b.DEFI_PAGE.CLAIM_CONFIRM_DIALOG},x()))},Do=(0,me.memo)(Cn);i();s();var F=k(M());var Ve=k(Te());var bo=({visible:e,gasFeeAmount:o="0",rewardAmount:t="0",onConfirm:r,onCancel:a})=>{let{symbol:d,usdToThisRate:l}=$(q),c=(0,F.useMemo)(()=>j(B(o,l),{currencySign:d,useApproximate:!1}).value,[o,l,d]),u=(0,F.useCallback)(()=>{r?.()},[r]),p=(0,F.useCallback)(()=>{a?.()},[a]);return F.default.createElement(le,{visible:e,maskClosable:!1,onClose:p,alignBottom:!0,noMargin:!0,noContentPadding:!0,hideCloseBtn:!0,className:y.gasDialog,windowClass:y.gasFeeDialogWindow},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG,align:n.ALIGN.center,className:(0,Ve.default)(y.gasFeeContainer,y.gasFeeMainContainer)},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,Ve.default)(y.gasFeeSheetHeader,y.gasFeeHeaderPadding)},F.default.createElement("div",{className:y.gasFeeDragHandle})),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,Ve.default)(y.gasFeeSheetContent,y.gasFeeContentPadding)},F.default.createElement(n.FlexBox,{className:(0,Ve.default)(y.bonusHeaderContainer,y.gasFeeHeaderSection),direction:n.DIRECTION.vertical,align:n.ALIGN.center},F.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.gasFeeIconWrapper},F.default.createElement(z,{iconName:"okds-warning-circle",fontSize:"56px"})),F.default.createElement(m.Text,{size:m.SIZE.xl,strong:700,align:"center",className:y.gasFeeTitle,style:{fontSize:"24px"}},g("wallet_extension_defiposition_dialog_title_reminder")),F.default.createElement(m.Text,{size:m.SIZE.sm,align:"center",className:y.gasFeeDescription},g("wallet_extension_defiposition_bttmsheet_desc_pay_to_claim",{value:F.default.createElement("span",{style:{color:"var(--okd-color-semantic-notice)"}},c)}))),F.default.createElement("div",{className:y.bonusContainer},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.bonusRewardsList},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusNetworkFeeRow},F.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_fb_header_network_fee")),F.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},c)),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.horizontal,justify:"space-between",align:n.ALIGN.center,className:y.bonusTotalRow},F.default.createElement(m.Text,{size:m.SIZE.sm,className:y.bonusLabel,type:m.TYPE.secondary},g("wallet_extension_defiposition_title_rewards")),F.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:y.bonusValue},j(B(t,l),{currencySign:d,useApproximate:!1}).value))))),F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,Ve.default)(y.gasFeeButtonSection,y.gasFeeButtonSectionLayout)},F.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.center,className:(0,Ve.default)(y.gasFeeButtonGroup,y.gasFeeButtonGroupLayout)},F.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.primary,size:R.SIZE.xl,onClick:u,className:y.gasFeeContinueButton,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG_CONTINUE_BUTTON},g("wallet_extension_defiposition_bttmsheet_btn_continue_claim")),F.default.createElement(R,{category:R.CATEGORY.outline,type:R.TYPE.secondary,size:R.SIZE.xl,onClick:p,className:y.gasFeeCancelButton,"data-testid":b.DEFI_PAGE.GAS_FEE_DIALOG_CANCEL_BUTTON},g("commonall_text_btn_cancel"))))))};i();s();var je=k(M());i();s();var _e=k(M());sn();var Ct=()=>{let[e,o]=(0,_e.useState)(!1),[t,r]=(0,_e.useState)(!1),[a,d]=(0,_e.useState)(null),[l,c]=(0,_e.useState)(null),{runAsync:u}=Ie(pe.postInvestTransactionCallData,{method:"POST"},{manual:!0}),{runAsync:p}=Ie(pe.postInvestTransactionClaimValidate,{method:"POST"},{manual:!0}),{runAsync:I}=Ie(pe.getUserClaimInfo,{method:"POST"},{manual:!0}),f=(0,_e.useCallback)(async P=>{o(!0);try{let D=await u(P);return lt(D,"data",null)}finally{o(!1)}},[u]),C=(0,_e.useCallback)(async P=>{let D=await p(P);return lt(D,"data",null)},[p]),A=(0,_e.useCallback)(async P=>{let D=await I(P);return lt(D,"data",null)},[I]),L=(0,_e.useCallback)(async(P,D)=>{let x=await C(P);if(!x)return!0;let{allGasFee:w,claimableBalance:O}=x,X=w?.allGasFeeAmount||"0",N=O?.insufficientRewardList||[],de=Ot(X,D),ie=N.length>0;return de||ie?(d({shouldShowDialog:!0,gasFeeAmount:X,rewardAmount:D,insufficientRewardList:N}),r(!0),new Promise(Q=>{c(()=>Q)})):!0},[C]),h=(0,_e.useCallback)(()=>{r(!1),c(null)},[]),S=(0,_e.useCallback)(()=>{l&&l(!0),h()},[l,h]),V=(0,_e.useCallback)(()=>{l&&l(!1),h()},[l,h]);return{claimRewards:f,validateClaim:C,getUserClaimInfo:A,checkClaimGasFee:L,loading:e,gasFeeDialogVisible:t,gasFeeCheckResult:a,closeGasFeeDialog:h,confirmGasFeeDialog:S,cancelGasFeeDialog:V}};i();s();i();s();var So={[4]:6,[5]:16};var Ke={CALLDATA:"calldata",SAVE_ORDER:"saveOrder"},Lt=(e,o,t=Ke.CALLDATA)=>{let r=(l,c)=>{let u=bt(l.coinAmount,l.tokenPrecision),I={chainId:l.chainId||c,coinAmount:u,tokenAddress:l.tokenAddress||""};return t===Ke.SAVE_ORDER?{...I,currencyAmount:l.currencyAmount||"0",expectTokenAddress:l.tokenAddress||""}:{...I}},a=e.chainId||0,d=e.list.map(l=>r(l,a));if(t===Ke.SAVE_ORDER){let l=d.reduce((p,I)=>{let f=I.currencyAmount,C=Gt(f)||"0";return Se(p,C)},"0"),c=e.rewardType,u=(c&&So[c])??2;return{totalValue:l,rewardType:c,orderType:u,list:d}}return d},Lo=e=>{let o=e.chainId||0;return e.list.map(t=>{let r=bt(t.coinAmount||"0",t.tokenPrecision);return{chainId:t.chainId||o,coinAmount:r,tokenAddress:t.tokenAddress||"",currencyAmount:t.currencyAmount||"0",tokenSymbol:t.tokenSymbol,tokenPrecision:t.tokenPrecision}})},No=e=>{let{data:o,address:t,investmentId:r}=e,a=Lt(o,[],Ke.CALLDATA);return{address:t,expectOutputList:a,extra:o.callDataExtJson||"",investmentIdList:r?[r]:[],type:to[o.rewardType],userInputList:[]}},Eo=(e,o,t,r)=>({chainId:e[0]?.chainId||1,contractAddress:o.to||"",address:t,inputData:o.data||"",investmentId:r,userClaimTokenAndAmounts:e.map(d=>({rewardTokenAddress:d.tokenAddress,rewardCoinAmount:d.coinAmount}))}),Po=(e,o)=>e.list.reduce((r,a,d)=>o[d]?Se(r,a.currencyAmount||"0"):r,"0"),vo=e=>{let t=ct({chainId:e})?.baseChain;return{isSupported:t===dt||t===mt,baseChain:t}};var hn=(e,o,t,r)=>t!==void 0&&r!==void 0?{buttonType:t.buttonType,chainId:t.chainId||e.chainId,callDataExtJson:t.callDataExtJson&&t.callDataExtJson!=="{}"?t.callDataExtJson:e.callDataExtJson,rewardType:e.rewardType,list:[t],sectionIndex:o,claimKey:`${o}-${r}`,title:e.title}:{buttonType:e.buttonType,chainId:e.chainId,callDataExtJson:e.callDataExtJson,rewardType:e.rewardType,list:e.list,sectionIndex:o,claimKey:`section-${o}`,title:e.title},Fo=({modalData:e,address:o,investmentId:t,platformInfo:r,onCloseParentDialog:a})=>{let{claimRewards:d,checkClaimGasFee:l,loading:c,gasFeeDialogVisible:u,gasFeeCheckResult:p,confirmGasFeeDialog:I,cancelGasFeeDialog:f}=Ct(),{navigateToInvestment:C}=Ce(),{runAsync:A}=Ie(pe.getBonusWindowDetail,{method:"POST"},{manual:!0}),[L,h]=(0,je.useState)(new Set),[S,V]=(0,je.useState)(!1),[P,D]=(0,je.useState)([]),[x,w]=(0,je.useState)(null),[O,X]=(0,je.useState)(!1),[N,de]=(0,je.useState)(null),ie=async(v,_,Y,Fe)=>{let Be=await A({investmentId:v,chainId:_,userAddress:Y,unclaimedTokenAddress:Fe});if(Be&&Be.code===0&&Be.data)return Be.data;throw new Error(Be&&Be.error_message||"Failed to fetch bonus window data")},J=v=>v.rewardType===5,Q=v=>v.list.map(_=>_.tokenAddress).filter(_=>Boolean(_)),xe=async v=>{let _=No({data:v,modalData:e,address:o,investmentId:t}),Y=_.expectOutputList[0]?.chainId;if(!Y)return;let Fe=vo(Y);if(!Fe.isSupported){r.platformUrl&&C({platformInfo:r,isInvestTypeSupport:!1});return}let ce=await d(_);if(!ce)return;let Be=Po(v,_.expectOutputList),on=Eo(_.expectOutputList,ce,o,t);try{if(!await l(on,Be.toString()))return;let rn=Lo(v),st=Lt(v,e,Ke.SAVE_ORDER),an={defiDetail:{investmentId:t,analysisPlatformId:r.analysisPlatformId,totalValue:st.totalValue,rewardType:st.rewardType,orderType:st.orderType,list:st.list},baseChain:Fe.baseChain,txParams:ce,expectedTokensWithCurrency:rn,chainId:Y};de(an),X(!0)}catch{}};return{handleClaim:async v=>{try{if(h(_=>new Set(_).add(v.claimKey)),J(v)&&t){let _=Q(v);if(_.length>0)try{let Y=v.chainId||e[v.sectionIndex]?.chainId||0,Fe=await ie(t,Y,o,_);w(v),D(Fe),V(!0);return}catch{}}await xe(v)}catch{}finally{h(_=>{let Y=new Set(_);return Y.delete(v.claimKey),Y})}},claimingItems:L,loading:c,gasFeeDialogVisible:u,gasFeeCheckResult:p,confirmGasFeeDialog:I,cancelGasFeeDialog:f,bonusWindowVisible:S,bonusWindowData:P,handleBonusWindowConfirm:async()=>{if(V(!1),x)try{await xe(x)}finally{h(v=>{let _=new Set(v);return _.delete(x.claimKey),_}),w(null)}},handleBonusWindowCancel:()=>{V(!1),x&&h(v=>{let _=new Set(v);return _.delete(x.claimKey),_}),w(null)},txConfirmVisible:O,txConfirmData:N,handleTxConfirmClose:()=>{X(!1),de(null),a&&a()},createUnifiedClaimData:hn}};var Le=({visible:e,platformInfo:o,modalData:t=[],investmentId:r,title:a,onClose:d,headerComponent:l,loading:c=!1,popUpData:u})=>{let{platformUrl:p,chainId:I}=o,[f,C]=(0,E.useState)(null),A=t.length>0&&t.some(G=>G.list.length>0),L=Tt(I),{handleClaim:h,claimingItems:S,gasFeeDialogVisible:V,gasFeeCheckResult:P,confirmGasFeeDialog:D,cancelGasFeeDialog:x,bonusWindowVisible:w,bonusWindowData:O,handleBonusWindowConfirm:X,handleBonusWindowCancel:N,txConfirmVisible:de,txConfirmData:ie,handleTxConfirmClose:J,createUnifiedClaimData:Q}=Fo({platformInfo:o,modalData:t,address:L||"",investmentId:r,platformUrl:p||"",onCloseParentDialog:d});(0,E.useEffect)(()=>{!e&&f&&(f.destroy(),C(null))},[e,f]);let xe=(G,be,te)=>!G||G!==2&&G!==3?null:E.default.createElement(n.FlexBox,{justify:"flex-end",className:y.claimButtonContainer},E.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.xs,className:y.claimButton,disabled:G===2||S.has(be),loading:S.has(be),onClick:()=>{if(G===3){let v=te();h(v)}}},g("commonall_modal_btn_claim"))),$e=u?E.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.titleContainer},E.default.createElement(m.Text,null,a),E.default.createElement(z,{iconName:"okds-question-mark-circle",className:y.questionMarkIcon,a11yText:"Help_information",onClick:()=>{f&&f.destroy();let G=le.tip({title:null,children:E.default.createElement(n.FlexBox,{className:y.tipDialogContent},u.content),confirmText:u?.actions?.[0]?.actionName||"",onConfirm:()=>{G.destroy(),C(null)},onClose:()=>{C(null)}});C(G)}})):a;return E.default.createElement(le.Action,{visible:e,title:$e||E.default.createElement(E.default.Fragment,null),hideCloseBtn:!1,maskClosable:!0,noContentPadding:!1,onClose:d},E.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.dialogContent},l&&E.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:y.headerContainer},typeof l=="function"?E.default.createElement(l,null):l),c&&E.default.createElement(n.FlexBox,{justify:"center",align:n.ALIGN.center,className:y.loadingContainer},E.default.createElement(et,null)),!c&&E.default.createElement(E.default.Fragment,null,A?t.map((G,be)=>G.list.length>0&&E.default.createElement(n.FlexBox,{key:`${G.rewardType}-${G.title}-${G.list.length}-${G.callDataExtJson}`,direction:n.DIRECTION.vertical,className:y.tokenSection},E.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:y.sectionTitleContainer},E.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary},G.title),Ue(G.rewardType)&&E.default.createElement(z,{iconName:"okds-fire-flame_filled",className:y.specialRewardIcon})),G.list.map((te,v)=>E.default.createElement(n.FlexBox,{key:`${te.tokenSymbol}-${te.coinAmount}-${te.currencyAmount}-${te.tokenAddress}-${te.callDataExtJson}`,direction:n.DIRECTION.vertical,className:y.itemContainer},E.default.createElement(Oe,{title:G.title||"",platformInfo:o,investLogo:te.investLogo,tokenSymbol:te.tokenSymbol,coinAmount:te.coinAmount,currencyAmount:te.currencyAmount,hideArrow:G.hideArrow??!1,hiddenAssets:te.hiddenAssets,detailPath:te.detailPath,isInvestTypeSupport:te.isInvestTypeSupport}),xe(te.buttonType,`${be}-${v}`,()=>Q(G,be,te,v)))),xe(G.buttonType,`section-${be}`,()=>Q(G,be)))):E.default.createElement(n.FlexBox,{justify:"center",align:n.ALIGN.center,className:y.emptyContainer},E.default.createElement(ke.State,{type:ke.State.TYPE.noRecord}))),E.default.createElement(bo,{visible:V&&!!P,gasFeeAmount:P?.gasFeeAmount||"0",rewardAmount:P?.rewardAmount||"0",onConfirm:D,onCancel:x}),E.default.createElement(Io,{visible:w,onClose:N,onConfirm:X,bonusData:O,platformInfo:o}),ie&&E.default.createElement(Do,{unapproved:ie,visible:de,onClose:J})))};i();s();var at={specialRewardIcon:"_specialRewardIcon_1vwsp_1",leftContent:"_leftContent_1vwsp_4",tokenInfo:"_tokenInfo_1vwsp_7",tokenSymbol:"_tokenSymbol_1vwsp_10"};var wn=e=>{let{detailPath:o,isInvestTypeSupport:t,logo:r,tokenSymbol:a,coinAmount:d,currencyAmount:l,lendingAssetItem:c,investLogo:u,platformInfo:p,title:I,hideArrow:f=!1,hiddenAssets:C=!1,hiddenString:A}=e,[L,h]=(0,he.useState)(!1),{symbol:S,usdToThisRate:V}=$(q),{platformUrl:P}=p,{navigateToInvestment:D}=Ce(),x=u||{middleLogoList:[{tokenLogo:r||"",tokenName:a}]},{supplied:w,rewards:O=[]}=c||{},X=xt(O),N=lo(O),de=yo(X,{chainId:c?.extraData?.chainId??p.chainId,mainAsset:{investLogo:x,tokenSymbol:w?.[0].tokenSymbol||a,coinAmount:d,currencyAmount:l,title:I,detailPath:c?.detailPath,isInvestTypeSupport:c?.isInvestTypeSupport}}),ie=()=>{h(!0)},J=()=>{if(!f){if(O.length>0){ie();return}D({detailPath:o||c?.detailPath,isInvestTypeSupport:t||c?.isInvestTypeSupport,platformInfo:p})}},Q=he.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:at.leftContent},he.default.createElement(Je,{investLogo:x}),he.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:at.tokenInfo},he.default.createElement(m.Text,{size:m.SIZE.xs,strong:500,className:at.tokenSymbol},a),N&&he.default.createElement(z,{iconName:"okds-fire-flame_filled",fontSize:"16px",className:at.specialRewardIcon})));return he.default.createElement(he.default.Fragment,null,he.default.createElement(K,{left:Q,priceConfig:{primary:Wt(d).value,secondary:j(B(l,V),{currencySign:S}).value,hiddenAssets:C,hiddenString:A,showArrow:!!(P&&!f)},onClick:P?J:void 0,gap:"md","data-testid":b.DEFI_PAGE.CARD_PRICE}),he.default.createElement(Le,{investmentId:c?.investmentId,visible:L,platformInfo:p,modalData:de,onClose:()=>h(!1)}))},Oe=wn;i();s();var ye=k(M());i();s();var Bo={main:"_main_1fabw_1"};var An=e=>e.reduce((o,t)=>Se(o,t.currencyAmount||"0"),"0"),Ro=g("wallet_extension_defidashboard_bttmsheet_header_mkt_rewards"),kn=({platformInfo:e,marketRewards:o,hiddenAssets:t=!1})=>{let{symbol:r,usdToThisRate:a}=$(q),[d,l]=(0,ye.useState)(!1),[c,u]=(0,ye.useState)([]),p=(0,ye.useMemo)(()=>!o||o.length===0?"0":An(o),[o]);if(!o||o.length===0)return null;let I=()=>{l(!0);let f=xo(o,e.chainId);u(f)};return ye.default.createElement(ye.default.Fragment,null,ye.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Bo.main,"data-testid":b.DEFI_PAGE.MARKET_REWARDS},ye.default.createElement(K,{left:ye.default.createElement(n.FlexBox,{align:n.ALIGN.center,style:{gap:"4px"}},ye.default.createElement(m.Text,{size:m.SIZE.xs,color:"primary"},Ro)),priceConfig:{primary:t?W:j(B(p,a),{currencySign:r}).value,showArrow:!0,hiddenAssets:t,hiddenString:W},onClick:I})),ye.default.createElement(Le,{visible:d,platformInfo:e,modalData:c,title:Ro,loading:!1,popUpData:null,onClose:()=>{l(!1)}}))},Oo=kn;i();s();var We=k(M());var Go=k(Te());i();s();var Xe={tagsContainer:"_tagsContainer_1purc_1",primaryTag:"_primaryTag_1purc_6",secondaryTag:"_secondaryTag_1purc_10",tagContent:"_tagContent_1purc_14",infoIcon:"_infoIcon_1purc_17"};var Dn=({investToken:e,hiddenAssets:o=!1,platformInfo:t})=>{let{symbol:r,usdToThisRate:a}=$(q),{navigateToInvestment:d}=Ce(),l=()=>{d({detailPath:e.detailPath,isInvestTypeSupport:e.isInvestTypeSupport,platformInfo:t})},c=I=>{I.stopPropagation();let f=e?.extraData?.investmentNameTip?.popUpData;if(!f)return;let C=le.tip({infoType:le.Tip.INFO_TYPE.default,title:e?.extraData?.investmentNameTip?.tipContent,children:f.content,confirmText:f.actions[0].actionName,onConfirm:()=>{C.destroy()},onClose:()=>{C.destroy()}})},u=We.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Xe.tagsContainer},We.default.createElement(Z,{className:Xe.primaryTag,category:Z.CATEGORY.fill,color:Z.COLOR.grey,size:Z.SIZE.md},e.investName),e?.extraData?.investmentNameTip?.tipContent&&We.default.createElement(Z,{className:Xe.secondaryTag,category:Z.CATEGORY.fill,color:Z.COLOR.grey,size:Z.SIZE.md},We.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Xe.tagContent,onClick:e?.extraData?.investmentNameTip?.popUpData?c:void 0,style:{cursor:e?.extraData?.investmentNameTip?.popUpData?"pointer":"default"}},e?.extraData?.investmentNameTip?.tipContent,e?.extraData?.investmentNameTip?.popUpData&&We.default.createElement(z,{fontSize:"16px",className:(0,Go.default)("okx-wallet-plugin-information",Xe.infoIcon)})))),p={primary:j(B(e.totalValue,a),{currencySign:r}).value,showArrow:!!l,hiddenAssets:o,primarySize:"sm"};return We.default.createElement(K,{left:u,priceConfig:p,onClick:l,"data-testid":b.DEFI_PAGE.PERPETUAL_CARD})},Mo=Dn;i();s();var re=k(M());i();s();var Nt={main:"_main_12ii3_1",specialRewardIcon:"_specialRewardIcon_12ii3_6"};var bn=({platformInfo:e,rewards:o,hiddenAssets:t=!1,investmentId:r,hideRewardCommon:a=!1})=>{let{chainId:d}=e,{symbol:l,usdToThisRate:c}=$(q),u=Tt(d),{getUserClaimInfo:p}=Ct(),[I,f]=(0,re.useState)(!1),[C,A]=(0,re.useState)([]),[L,h]=(0,re.useState)(""),[S,V]=(0,re.useState)(!1),[P,D]=(0,re.useState)(null),x=(0,re.useMemo)(()=>xt(o),[o]),w=(0,re.useMemo)(()=>x.filter(N=>a?N.rewardType!==1:!0),[x,a]),O=N=>N===1?g("wallet_extension_defiposition_item_claimable_rewards"):g("wallet_extension_defiposition_tag_bonus"),X=async N=>{let de=O(N.rewardType);if(h(de),f(!0),D(null),N.items.some(J=>J.claimMode===1&&J.rewardType===1)&&r&&u){V(!0),A([]);try{let J=await p({investmentId:r,userAddress:u,pageType:1});if(J?.rewardTokenInfos){let Q=J.extraData?.claimTipInfo?.popUpData;D(Q||null);let xe=J.extraData?.claimTipInfo?.tipContent;xe&&h(xe);let $e=To(J.rewardTokenInfos,N?.chainId??d,J);A($e)}else{Dt.error({title:g("wallet_extension_toast_asset_error_try_again")}),f(!1);return}}catch{Dt.error({title:g("wallet_extension_toast_asset_error_try_again")}),f(!1);return}finally{V(!1)}}else{let J=go(N,N?.chainId??d);A(J)}};return w.length===0?null:re.default.createElement(re.default.Fragment,null,re.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Nt.main,"data-testid":b.DEFI_PAGE.REWARDS_AND_BONUS},w.map(N=>re.default.createElement(K,{key:`${N.rewardType}-${N.totalCurrencyAmount}-${N.displayName}-${N.chainId}`,left:re.default.createElement(n.FlexBox,{align:n.ALIGN.center,style:{gap:"4px"}},re.default.createElement(m.Text,{size:m.SIZE.xs,color:"primary"},O(N.rewardType)),Ue(N.rewardType)&&re.default.createElement(z,{iconName:"okds-fire-flame_filled",fontSize:"16px",className:Nt.specialRewardIcon})),priceConfig:{primary:t?W:j(B(N.totalCurrencyAmount,c),{currencySign:l}).value,showArrow:!!r,hiddenAssets:t,hiddenString:W},onClick:()=>{X(N)}}))),re.default.createElement(Le,{investmentId:r,visible:I,platformInfo:e,modalData:C,title:L,loading:S,popUpData:P,onClose:()=>{f(!1)}}))},Et=bn;i();s();var H=k(M());var Uo=k(Te());i();s();function zo(e,o,t){let r=[];return e&&e.length>0&&r.push({type:"supplied",items:e,displayName:"wallet_extension_defiposition_title_assets"}),o&&o.length>0&&o.forEach(a=>{a&&a.baseDefiTokenInfos&&Array.isArray(a.baseDefiTokenInfos)&&a.baseDefiTokenInfos.length>0&&r.push({type:"rewards",items:a.baseDefiTokenInfos,displayName:"wallet_extension_defiposition_item_claimable_rewards",buttonType:a.buttonType,callDataExtJson:a.callDataExtJson})}),t&&t.length>0&&t.forEach(a=>{a&&a.baseDefiTokenInfos&&Array.isArray(a.baseDefiTokenInfos)&&a.baseDefiTokenInfos.length>0&&r.push({type:"unclaimedFees",items:a.baseDefiTokenInfos,displayName:"wallet_extension_defiposition_item_unclaimed_fee_income",buttonType:a.buttonType,callDataExtJson:a.callDataExtJson})}),r}i();s();var Qe={container:"_container_18zof_1",leftSection:"_leftSection_18zof_8",statusRow:"_statusRow_18zof_12",statusTag:"_statusTag_18zof_16",rightSection:"_rightSection_18zof_19",chevronIcon:"_chevronIcon_18zof_24",v3Container:"_v3Container_18zof_30",v3Header:"_v3Header_18zof_33",warningContainer:"_warningContainer_18zof_36",warningIcon:"_warningIcon_18zof_42",warningText:"_warningText_18zof_45"};var Sn=({positionInfo:e,hiddenAssets:o=!1,platformInfo:t,detailPath:r,isInvestTypeSupport:a,investmentId:d})=>{let{positionStatus:l,tokenId:c,range:u,totalValue:p,supplied:I,rewardDefiTokenInfo:f,unclaimFeesDefiTokenInfo:C}=e,A=l==="ACTIVE",{symbol:L,usdToThisRate:h}=$(q),[S,V]=(0,H.useState)(!1),{navigateToInvestment:P}=Ce(),{platformUrl:D,chainId:x}=t,w=(0,H.useMemo)(()=>zo(I,f,C),[I,f,C]),O=(0,H.useMemo)(()=>_o(w,x),[w,x]),X=()=>{if(D&&r){P({detailPath:r,isInvestTypeSupport:a,platformInfo:t});return}w.length>0&&V(!0)},N=(0,H.useMemo)(()=>{let Q=A?$t:Ht,xe=l==="ACTIVE"?g("wallet_extension_investredeem_top_tag_active"):g("wallet_extension_investredeem_top_tag_inactive");return H.default.createElement(Q,{size:Z.SIZE.md},xe)},[A,l]),de=(0,H.useMemo)(()=>{let Q=c.toString();return Q.length>6?Q.slice(-6):Q},[c]),ie=(0,H.useMemo)(()=>{let Q=p&&!Number.isNaN(Number(p))?p:"0";return{primary:o?W:j(B(Q,h),{currencySign:L}).value,showArrow:!!(D||w.length>0),hiddenAssets:o,hiddenString:W}},[o,p,h,L,D,w.length]),J=H.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Qe.v3Container},H.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Qe.v3Header},N,H.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary},"#",de)),H.default.createElement(m.Text,{size:m.SIZE.xs},u));return H.default.createElement(H.default.Fragment,null,H.default.createElement(K,{left:J,priceConfig:ie,onClick:D||w.length>0?X:void 0,padding:"sm",gap:"md","data-testid":b.DEFI_PAGE.POSITION_INFO_ITEM}),H.default.createElement(Le,{visible:S,platformInfo:t,modalData:O,investmentId:d,title:"",headerComponent:H.default.createElement(H.default.Fragment,null,H.default.createElement(K,{left:J,priceConfig:{...ie,showArrow:!1},onClick:D||w.length>0?X:void 0,gap:"md"}),!A&&H.default.createElement("div",{className:Qe.warningContainer},H.default.createElement(z,{fontSize:"16px",className:(0,Uo.default)("okds-warning-circle-fill",Qe.warningIcon)}),H.default.createElement(m.Text,{size:m.SIZE.xs,className:Qe.warningText},g("wallet_extension_defiposition_hover_alert_desc_no_income")))),onClose:()=>V(!1)}))},Vo=Sn;i();s();var it={main:"_main_7ty37_1",tips:"_tips_7ty37_9",tipText:"_tipText_7ty37_16",tipIcon:"_tipIcon_7ty37_21",leftAlignText:"_leftAlignText_7ty37_27"};var W="****",Ln=e=>[{data:e?.supply??[],title:g("wallet_extension_defiposition_title_supplied"),keyPrefix:"supply"},{data:e?.borrow??[],title:g("wallet_extension_defiposition_title_borrowed"),keyPrefix:"borrow"}],Pt=({platformInfo:e,investToken:o,isLending:t,hiddenAssets:r,accountId:a})=>{let d=$(q),{symbol:l,usdToThisRate:c}=d,{investLogo:u,investName:p,investmentName:I,totalValue:f,supplied:C,rewards:A,investTypeName:L,healthRate:h,investType:S,assetMap:V,feeRate:P,positionInfoList:D,perpetual:x,investmentId:w,detailPath:O,isInvestTypeSupport:X,marketRewards:N}=o,de=[{title:g("wallet_extension_defiposition_title_positions"),key:"positions",data:x?.position||[]},{title:g("wallet_extension_defiposition_title_margin"),key:"margin",data:x?.margin}],ie=!!D?.length,J=[2,3].includes(S)&&ie,Q=()=>S===18?null:J?U.default.createElement(ao,{investName:p,investmentName:I,investLogo:u,feeRate:P||"",totalValue:f,hiddenAssets:r,detailPath:O,platformInfo:e,isInvestTypeSupport:X}):U.default.createElement(so,{showArrow:!t,type:1,investTypeName:L||p,healthRate:h,totalValue:f,hiddenAssets:r,detailPath:O,isInvestTypeSupport:X,platformInfo:e}),xe=()=>N&&U.default.createElement(Oo,{platformInfo:e,investmentId:w,marketRewards:N,hiddenAssets:r,accountId:a}),$e=()=>t&&U.default.createElement(U.default.Fragment,null,Ln(V).map(({data:_,title:Y,keyPrefix:Fe})=>_.length>0&&U.default.createElement(U.default.Fragment,{key:`${Fe}-${Y}-${_.length}`},U.default.createElement(m.Text,{size:m.SIZE.xs,strong:400,className:it.leftAlignText},Y),_.map(ce=>U.default.createElement(Oe,{key:`${ce.investmentName}-${ce.tokenSymbol}-${ce.investmentId}-${ce.tokenLogo}`,title:Y,platformInfo:e,lendingAssetItem:ce,investLogo:ce.investLogo,hiddenAssets:r,hiddenString:W,tokenSymbol:ce.investmentName,coinAmount:ce.supplied[0].coinAmount,currencyAmount:ce.supplied[0].currencyAmount}))))),G=()=>U.default.createElement(Et,{platformInfo:e,investmentId:w,rewards:A?.map(_=>({..._,buttonType:_.buttonType||0,rewardType:_.rewardType||1})),hiddenAssets:r,hideRewardCommon:ie}),be=()=>S!==18&&C?.length>0&&U.default.createElement(U.default.Fragment,null,U.default.createElement(m.Text,{size:m.SIZE.xs,className:it.leftAlignText},g("wallet_extension_defiposition_title_assets")),C.map(_=>U.default.createElement(Oe,{key:`${_.tokenSymbol}-${_.coinAmount}-${_.currencyAmount}--${_.tokenAddress}`,hiddenAssets:r,hiddenString:W,investLogo:{middleLogoList:[{tokenLogo:_.tokenLogo,tokenName:_.tokenSymbol}]},tokenSymbol:_.tokenSymbol,coinAmount:_.coinAmount,currencyAmount:_.currencyAmount,title:"",platformInfo:e,hideArrow:!0}))),te=()=>D?.map(_=>U.default.createElement(Vo,{investmentId:w,key:`position-info-${_.tokenId}-${_.positionName}--${_.totalValue}`,positionInfo:_,hiddenAssets:r,platformInfo:e})),v=()=>S===18&&U.default.createElement(U.default.Fragment,null,U.default.createElement(Mo,{investToken:o,hiddenAssets:r,platformInfo:e}),x?.tradePair&&U.default.createElement(K,{leftText:{text:g("wallet_extension_defidashboard_card_title_trading_pair"),type:m.TYPE.secondary},rightText:x?.tradePair,"data-testid":b.DEFI_PAGE.PERPETUAL_TRADING_PAIR}),x?.pnl&&U.default.createElement(K,{leftText:{text:g("wallet_extension_defiposition_title_pnl"),type:m.TYPE.secondary},priceConfig:{primary:j(B(x.pnl,c),{currencySign:l}).value,hiddenAssets:r,showArrow:!1,primaryColor:Number(x.pnl)<0?"var(--okd-color-preference-loss)":"var(--okd-color-preference-profit)"},"data-testid":b.DEFI_PAGE.PERPETUAL_PNL}),U.default.createElement(Et,{platformInfo:e,investmentId:w,rewards:A?.map(_=>({..._,buttonType:_.buttonType||0,rewardType:_.rewardType||1})),hiddenAssets:r,hideRewardCommon:ie}),de.map(_=>_?.data&&_.data.length>0&&U.default.createElement(U.default.Fragment,{key:`perpetual-${_.title}-${_.key}`},U.default.createElement(m.Text,{size:m.SIZE.xs,strong:500,className:it.leftAlignText,type:m.TYPE.secondary},_.title),_.data.map(Y=>U.default.createElement(Oe,{key:`${_.title}-${_.key}-${Y.tokenSymbol}-${Y.tokenAddress}`,title:_.title,platformInfo:e,tokenSymbol:Y.tokenSymbol,coinAmount:Y.coinAmount,currencyAmount:Y.currencyAmount,logo:Y.tokenLogo,hiddenAssets:r,hiddenString:W,hideArrow:!0})))));return U.default.createElement(n.FlexBox,{align:n.ALIGN.center,direction:n.DIRECTION.vertical,className:it.main,"data-testid":b.DEFI_PAGE.CARD_CONTAINER},Q(),xe(),$e(),G(),be(),te(),v())};i();s();var ht=k(M());i();s();var Ge={main:"_main_8f3tk_1",skeleton:"_skeleton_8f3tk_4",skeletonItem:"_skeletonItem_8f3tk_7",clickableTitle:"_clickableTitle_8f3tk_10",infoContainer:"_infoContainer_8f3tk_16"};var jo=({healthRate:e})=>{let o=t=>{t.stopPropagation();let r=le.tip({infoType:le.Tip.INFO_TYPE.default,title:g("wallet_extension_defiposition_mid_title_health_factor"),children:g("wallet_extension_defiposition_toast_dialog_desc_health_factor"),confirmText:g("wallet_extension_btn_general_ok"),onConfirm:()=>{r.destroy()},onClose:()=>{r.destroy()}})};return ht.default.createElement(K,{left:ht.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,className:Ge.clickableTitle,onClick:o},g("wallet_extension_defiposition_mid_title_health_factor")),right:ht.default.createElement(yt,{healthLevel:e.level,levelConfig:{text:e.rate}})})};i();s();var De=k(M()),Wo=k(Te());i();s();var qe={main:"_main_1mr9q_1",logo:"_logo_1mr9q_6",number:"_number_1mr9q_12",link:"_link_1mr9q_15",title:"_title_1mr9q_20",content:"_content_1mr9q_26"};var qo=({points:e,hiddenAssets:o})=>{let{value:t,logo:r,pointListData:a}=e||{},d=()=>{globalThis.open(a?.url)};return De.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"space-between",className:qe.main},De.default.createElement(pt,{title:g("wallet_extension_defiposition_toast_dialog_desc_points")},De.default.createElement(m.Text,{size:m.SIZE.sm,type:m.TYPE.secondary,className:qe.title},g("wallet_extension_defiposition_mid_title_points"))),De.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:qe.content},o?W:De.default.createElement(De.default.Fragment,null,De.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,ellipsis:!0},t),De.default.createElement(fe,{src:r,className:qe.logo}),a?.pointList?.length>0&&De.default.createElement(ut,{className:qe.number},`+${a?.pointList?.length}`),De.default.createElement(z,{className:(0,Wo.default)("okx-wallet-plugin-right",qe.link),onClick:d}))))};i();s();var Ne=k(M());i();s();var $o={title:"_title_ue62x_1"};var Ho=({platformInfo:e,protocolRewards:o,hiddenAssets:t})=>{let{analysisPlatformId:r,chainId:a,platformName:d}=e,l=$(q),{symbol:c,usdToThisRate:u}=l,{totalReward:p,tokenLogoList:I=[]}=o||{},[f,C]=(0,Ne.useState)(!1),A=fo(o,a,r),L=()=>{C(!0)},h={middleLogoList:I.length>0?I.map(S=>({tokenLogo:S,tokenName:""})):[]};return Ne.default.createElement(Ne.default.Fragment,null,Ne.default.createElement(K,{left:Ne.default.createElement(pt,{title:g("wallet_extension_defiposition_toast_dialog_desc_protocol_rewards",{protocol:d})},Ne.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,className:$o.title},g("wallet_extension_defiposition_mid_title_protocol_rewards"))),priceConfig:{primary:t?W:j(B(p,u),{currencySign:c,useApproximate:!1}).value,hiddenAssets:t,hiddenString:W,showArrow:!!A.length,primarySize:"sm",logo:I.length>0?Ne.default.createElement(Je,{investLogo:h,size:16,type:gt.PROTOCOL}):void 0},onClick:L}),Ne.default.createElement(Le,{title:g("wallet_extension_defiposition_mid_title_protocol_rewards"),visible:f,platformInfo:e,modalData:A,onClose:()=>C(!1)}))};var Jo=({analysisPlatformId:e,chainId:o,hiddenAssets:t})=>{let r=Re(),{defiDetail:a,loading:d}=eo({analysisPlatformId:e,chainId:o}),{protocolExtraData:l,investMarketTokenBalanceVoList:c,platformName:u,investTokenBalanceVoList:p,platformUrl:I,platformLogo:f,accountId:C,network:A,detailPrePath:L}=a||{},h={detailPrePath:L,analysisPlatformId:e,chainId:o,network:A,platformLogo:f,platformName:u,platformUrl:I||""},{points:S,protocolRewards:V,healthRate:P}=l||{};if(d)return we.default.createElement(n.Box,{className:Ge.skeleton},we.default.createElement(Pe.Input,{size:Pe.SIZE.sm}),we.default.createElement(Pe.Input,{className:Ge.skeletonItem,size:Pe.SIZE.md}),we.default.createElement(Pe.Input,{className:Ge.skeletonItem,size:Pe.SIZE.md}));let D=P&&!c?.length;return we.default.createElement(n.FlexBox,{className:Ge.main,align:n.ALIGN.center,direction:n.DIRECTION.vertical,"data-testid":`${b.DEFI_PAGE.CARD_CONTAINER}-${o}-${e}`},S&&we.default.createElement(qo,{points:S,hiddenAssets:t}),(D||V)&&we.default.createElement("div",{className:Ge.infoContainer},D&&we.default.createElement(jo,{healthRate:P}),V&&we.default.createElement(Ho,{platformInfo:h,protocolRewards:V,hiddenAssets:t})),c&&c.length>0&&c.map(x=>we.default.createElement(Pt,{platformInfo:h,key:`market-${x.investmentId}-${x.investType}-${x.investmentName}-${x.totalValue}-${x.marketId}`,investToken:x,isLending:!0,hiddenAssets:t,accountId:C||r})),p&&p.length>0&&p.map(x=>we.default.createElement(Pt,{platformInfo:h,key:`token-${x.investmentId}-${x.investType}-${x.investmentName}-${x.totalValue}-${x.marketId}`,investToken:x,isLending:!1,hiddenAssets:t,accountId:C||r})))};i();s();var oe=k(M()),Yo=k(Te());i();s();var Zo=()=>{let e=Re(),{loading:o,run:t,error:r,data:a}=jt(async()=>(await zt(pe.getDefiBanner,{walletId:e}))?.data?.defiBoardInvestmentVos||[],{refreshDeps:[e]});return{loading:o,run:t,error:r,bannerList:a}};i();s();var ae={main:"_main_wh5tq_1",backgroundImage:"_backgroundImage_wh5tq_9",content:"_content_wh5tq_18",header:"_header_wh5tq_28",investmentName:"_investmentName_wh5tq_31",rate:"_rate_wh5tq_34",tokenSingle:"_tokenSingle_wh5tq_39",tokenDoubleLeft:"_tokenDoubleLeft_wh5tq_49",tokenDoubleRight:"_tokenDoubleRight_wh5tq_59",linkWrapper:"_linkWrapper_wh5tq_69",link:"_link_wh5tq_69",icon:"_icon_wh5tq_76",empty:"_empty_wh5tq_79",error:"_error_wh5tq_82",skeleton:"_skeleton_wh5tq_85",errorImg:"_errorImg_wh5tq_91",emptyImg:"_emptyImg_wh5tq_95"};var Ko=()=>{let e=ft(),o=Jt({light:"/cdn/assets/imgs/249/82CFBD93C928950F.png",dark:"/cdn/assets/imgs/249/9F574C0EC619D615.png"}),{loading:t,run:r,error:a,bannerList:d}=Zo();if(a)return oe.default.createElement(ke.State,{className:ae.error,type:ke.State.TYPE.noNetwork,imgClassName:ae.errorImg,title:g("wallet_extension_nft_text_loading_failed"),buttonText:g("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{r()}});if(t)return oe.default.createElement(Pe.Input,{active:!0,className:ae.skeleton});if(d.length===0)return oe.default.createElement(ke.State,{className:ae.empty,type:ke.State.TYPE.noResult,imgClassName:ae.emptyImg,title:g("wallet_extension_text_enjoy_massive_defi"),buttonText:g("wallet_extension_btn_explore_dapps"),onButtonClick:()=>{globalThis.platform.openTab({url:g("extension_btn_link_okxweb3yield")})}});let{investmentName:l="",platformName:c="",middleLogoList:u=[],rate:p="",rateTypeDesc:I="",investmentId:f=""}=d[0]||{},C=()=>{globalThis.open(`${e?.defiDetail}/${f}#source=extension`)},A=()=>{let L=u?.length||0;switch(!0){case L===1:return oe.default.createElement(fe,{src:u[0]?.tokenLogo,className:ae.tokenSingle});case L>=2:return oe.default.createElement(oe.default.Fragment,null,oe.default.createElement(fe,{src:u[0]?.tokenLogo,className:ae.tokenDoubleLeft}),oe.default.createElement(fe,{src:u[1]?.tokenLogo,className:ae.tokenDoubleRight}));default:return null}};return oe.default.createElement(n.FlexBox,{className:ae.main,align:n.ALIGN.center},oe.default.createElement(fe,{src:o,className:ae.backgroundImage}),oe.default.createElement(n.FlexBox,{className:ae.content,direction:n.DIRECTION.vertical},oe.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:ae.header},oe.default.createElement(m.Text,{size:m.SIZE.sm,strong:500,className:ae.investmentName},l),oe.default.createElement(Z,{category:Z.CATEGORY.fill,color:Z.COLOR.grey,size:Z.SIZE.sm},c)),oe.default.createElement(m.Text,{className:ae.rate,strong:700},`${Ft.truncate(B(+p,100),2)}% ${I}`),oe.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:ae.linkWrapper,onClick:C},oe.default.createElement(m.Text,{size:m.SIZE.xs,className:ae.link,strong:700},g("wallet_extension_card_textbtn_stake_now")),oe.default.createElement(z,{className:(0,Yo.default)("okx-wallet-plugin-right",ae.icon)})),A()))};i();s();var ue=k(M());var vt=k(Te());i();s();var At=k(M()),Xo=k(Te());i();s();var wt={main:"_main_15eo7_1",rightBottom:"_rightBottom_15eo7_9"};var Qo=({mainLogoUrl:e,secondaryLogoUrl:o,className:t})=>At.default.createElement(n.Box,{className:(0,Xo.default)(wt.main,t)},At.default.createElement(fe,{src:e,className:wt.main}),At.default.createElement(fe,{src:o,className:wt.rightBottom}));i();s();var Ee={main:"_main_ln2cc_1",logo:"_logo_ln2cc_5",content:"_content_ln2cc_8",leftContent:"_leftContent_ln2cc_11",platformName:"_platformName_ln2cc_14",link:"_link_ln2cc_17",tipIcon:"_tipIcon_ln2cc_24",warnInfo:"_warnInfo_ln2cc_28",amount:"_amount_ln2cc_32"};var en=({defi:e,hiddenAssets:o})=>{let{platformUrl:t,networkLogo:r,platformName:a,currencyAmount:d,network:l,platformLogo:c,warnInfo:u}=e,p=A=>{A.stopPropagation(),globalThis.open(t)},I=$(q),{symbol:f,usdToThisRate:C}=I;return ue.default.createElement(n.FlexBox,{className:Ee.main,align:n.ALIGN.center},ue.default.createElement(Qo,{mainLogoUrl:c,secondaryLogoUrl:r,className:Ee.logo}),ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:"space-between",className:Ee.content},ue.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,className:Ee.leftContent},ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Ee.platformName},ue.default.createElement(m.Text,{size:m.SIZE.md,ellipsis:!0},a),ue.default.createElement(z,{className:(0,vt.default)("okx-wallet-plugin-open-link",Ee.link),onClick:p})),ue.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.xs,ellipsis:!0},l)),ue.default.createElement(n.FlexBox,{direction:n.DIRECTION.vertical,align:n.ALIGN.end,className:Ee.amount},ue.default.createElement(m.Text,{strong:500,size:m.SIZE.md,ellipsis:!0},o?W:j(B(d,C),{currencySign:f,useApproximate:!1}).value),u&&ue.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:Ee.warnInfo},ue.default.createElement(z,{className:(0,vt.default)("okx-wallet-plugin-warning-circle-fill",Ee.tipIcon)}),ue.default.createElement(m.Text,{size:m.SIZE.xs,type:m.TYPE.secondary,ellipsis:!0},u)))))};i();s();var Ae={accordion:"_accordion_176px_1",header:"_header_176px_5",title:"_title_176px_9",content:"_content_176px_12",button:"_button_176px_15",showButton:"_showButton_176px_19",error:"_error_176px_27",errorImg:"_errorImg_176px_31",loader:"_loader_176px_35",bannerWrapper:"_bannerWrapper_176px_39",container:"_container_176px_42"};var Nn=190,En=({hiddenAssets:e,isWalletCreated:o,scrollTop:t,backupHeight:r})=>{let{currentNetworkUniqueId:a}=qt(),{data:d=[],loading:l,error:c,run:u}=Qt(),[p,I]=(0,ee.useState)(null);(0,ee.useEffect)(()=>{o&&u()},[o,u]);let f=(0,ee.useMemo)(()=>{let x=d||[];return a!==""?x.filter(w=>w.chainId===+a):x},[d,a]),C=(x,w,O)=>{I(O)},A=x=>`${x.analysisPlatformId}-${x.chainId}`,L=()=>ee.default.createElement(n.FlexBox,{align:n.ALIGN.center,justify:n.ALIGN.center,className:Ae.loader},ee.default.createElement(et,{size:et.SIZE.lg})),h=()=>ee.default.createElement(ke.State,{type:ke.State.TYPE.noNetwork,className:Ae.error,imgClassName:Ae.errorImg,title:g("wallet_extension_nft_text_loading_failed"),buttonText:g("wallet_extension_nft_btn_refresh"),onButtonClick:()=>{u()}}),S=(0,ee.useMemo)(()=>f.length>8&&t>Nn,[f.length,t]),{paddingBottom:V,buttonPaddingBottom:P,absoluteBottom:D}=Xt({isButtonAbsolute:S,backupHeight:r});return c?h():f.length?ee.default.createElement("div",{className:Ae.container,style:{paddingBottom:V}},ee.default.createElement(kt.Group,{onChange:C,expandedIds:p},f.map(x=>ee.default.createElement(kt.Item,{key:A(x),className:Ae.accordion,headerClassName:Ae.header,contentClassName:Ae.content,titleClass:Ae.title,title:ee.default.createElement(en,{defi:x,hiddenAssets:e}),id:A(x)},p?.includes(A(x))&&ee.default.createElement(Jo,{analysisPlatformId:x.analysisPlatformId,chainId:x.chainId,hiddenAssets:e})))),ee.default.createElement("div",{className:(0,tn.default)(Ae.button,{[Ae.showButton]:S}),style:{bottom:D,paddingBottom:P}},ee.default.createElement(R,{circle:!0,category:R.CATEGORY.outline,type:R.TYPE.secondary,size:R.SIZE.md,onClick:()=>{globalThis.platform.openTab({url:g("extension_btn_link_okxweb3yield")})}},g("wallet_extension_bot_btn_go_to_defi")))):l?L():ee.default.createElement(n.FlexBox,{className:Ae.bannerWrapper,style:{paddingBottom:D}},ee.default.createElement(Ko,null))},Ku=En;export{Ku as default};
//# sourceMappingURL=DefiList-XHZWHZKJ.js.map
