import{a as Jt}from"./chunk-6CJRBF2P.js";import{b as Qt}from"./chunk-3KJMTMXK.js";import{a as ei}from"./chunk-IWYRUFZN.js";import{a as _}from"./chunk-HLTJYEGI.js";import{a as jt}from"./chunk-3MLYZLAT.js";import{b as Xt}from"./chunk-FWL474H4.js";import{j as ge}from"./chunk-V7YATDMZ.js";import{l as qt,w as Zt}from"./chunk-BIUKJDG5.js";import{d as we,g as Yt,k as Je}from"./chunk-YLT6ZRGE.js";import{a as Ht,b as zt}from"./chunk-O6ODITJY.js";import{a as Xe}from"./chunk-LQJXR5XX.js";import{c as _e}from"./chunk-GVYIP5Q5.js";import{h as Kt}from"./chunk-W3VW6MYS.js";import{o as $t}from"./chunk-MT3ANHCR.js";import{g as At,k as Ot}from"./chunk-NS5EW6UN.js";import{a as je}from"./chunk-MJSLAJV6.js";import{a as Wt,l as Rt,n as Bt,p as Ut,r as Vt}from"./chunk-KC2XLVFC.js";import{b as ee}from"./chunk-6M37VPK2.js";import{D as Ce,Z as i}from"./chunk-3F7OC7N7.js";import{a as U,c as k,d as fe,e as Nt,f as N,g as qe,h as V,i as ht,l as be,m as B,o as Te,p as Ze,u as vt}from"./chunk-EPDR6VAQ.js";import{f as fs}from"./chunk-UI4IZNSB.js";import{a as Et}from"./chunk-EQ34WRCJ.js";import{k as R,p as x}from"./chunk-DSNMNSMD.js";import{d as Qe,q as h}from"./chunk-URGJ6D4O.js";import{b as Ie}from"./chunk-FLSAETOH.js";import{Aa as Ye,M as Mt,Q as kt,f as Ke,g as Dt}from"./chunk-4C5HF6J2.js";import{f as le,o as I,q as b}from"./chunk-UWURTNRY.js";I();b();var r=le(Ie());I();b();var ti=()=>t=>vt(t,0),ii=({gasPrice:e,gasLimit:t,extFee:s,baseCoin:n={},currencyId:a})=>{let u=k(U(e,t),s),c=Ze(u),G=je(c,{symbol:n?.symbol,precision:n?.displayPrecision}).value,o=Je(n?.coinId,u,{currencyId:a,useApproximate:!0});return{gasFeeDisplay:`${G}${o}`,gasFee:c}},Se=({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:s,maxFeePerGas:n,supportEip1559:a,extFee:u,gasPriceInfo:c,gasLimitInfo:G,gasType:o,baseCoin:l={},currencyId:p})=>{let{minGasFee:m,minGasPrice:F}=qt({gasLimit:t,gasPrice:e,maxPriorityFeePerGas:s,maxFeePerGas:n,supportEip1559:a,extFee:u,gasPriceInfo:c,gasLimitInfo:G,gasType:o}),d=Ze(m),g=je(d,{symbol:l?.symbol,precision:l?.displayPrecision,isStableCoin:l?.stableCoin,useLargeNumberPrecision:!0}).value,D=Je(l?.coinId,m,{currencyId:p,useApproximate:!0});return{minGasPrice:F,minGasFee:d,minGasFeeDisplay:`${g}${D}`}};I();b();var Ee=le(Ie());Ye();I();b();var si=le(fs());function gs({preExecParams:e,coinId:t,from:s,to:n,value:a="0",data:u,typeInt:c,onlyGasLimit:G,method:o,dappInfo:l,authorizationList:p,stateOverrideList:m}){let F=we(t);return Wt(async(d={})=>{let g;if(e)g=e;else if(o===Kt)g={chainIndex:F?.chainId,method:o,from:s,to:n,amount:a,inputData:u,onlyGasLimit:G};else{let f=`${a||"0"}`;g={dappData:JSON.stringify({to:n,from:s,value:f.startsWith("0x")?f:(0,si.addHexPrefix)(ee(f)),data:u,typeInt:c}),from:s,authorizationList:p,dappInfo:l||{},chainIndex:F?.chainId,method:o===Ce.ONLY_SIGN_TRANSACTION?Ce.ONLY_SIGN_TRANSACTION:Ce.SIGN_TRANSACTION,stateOverrideList:m,onlyGasLimit:G}}return await Ot({...g,...d})})}var ni=gs;function Gs(e,t={}){let{wait:s=200,disabled:n=!1,forceUpdate:a=null,onFetchSuccess:u=()=>{},onFetchError:c=()=>{}}=t,[G,o]=(0,Ee.useState)(null),[l,{setTrue:p,setFalse:m}]=Bt(!0),{from:F,to:d,value:g="0x0",data:D,typeInt:f,coinId:T,method:v,authorizationList:A,stateOverrideList:P,onlyGasLimit:y}=e,K=ni(e),w=async()=>{try{let J=await K();o(J?.gasFee||{}),Ke(u)&&u()}catch{o(he=>({...he,queryGasLimitErrorUseDefault:!0})),Ke(c)&&c()}finally{m()}},{run:Q}=Ut(()=>{if(n){m();return}w()},{wait:s});return(0,Ee.useEffect)(()=>{p(),Q()},[F,d,g,D,f,T,v,A,P,a,y,n]),{isGasLimitLoading:l,gasLimitInfo:G}}var ai=Gs;I();b();function ps({coinId:e,address:t}){let s=we(e),[n,a]=jt({coinId:e,address:t,chainId:s?.chainId});return{isSignInfoInitLoading:n,signInfo:n?null:a}}var ri=ps;I();b();var Ge=le(Ie());Ye();function ds({signInfo:e,gasLimitInfo:t}){let{min:s,safePriorityFee:n,supportEip1559:a}=e?.gasPrice||ge,{gasLimit:u}=t||{};return{min:s,safePriorityFee:n,supportEip1559:a,gasLimit:u}}function Fs({initialCustomGasLimit:e,gasLimit:t}){return N(e||"0",t||"0")}function Ps({supportEip1559:e,initialCustomMaxPriorityFee:t,safePriorityFee:s,initialCustomMaxBaseFee:n,min:a}){return e&&(N(t||"0",s)||N(k(n||"0",t||"0"),a))}function xs({gasLimitLessBase:e,eip1559GasPriceLessMin:t,gasPriceLessMin:s}){return e||t||s}function ys({supportEip1559:e,initialCustomGasPrice:t,min:s}){return!e&&N(t||"0",s)}function Ls({coinId:e,initialGasData:t={initialGasType:i.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},signInfo:s,gasLimitInfo:n}){let a=(0,Ge.useRef)(!1),[u,c]=(0,Ge.useState)(t),[G,o]=(0,Ge.useState)(!1),l=_e({coinId:e}),p=Ht();return Rt(async()=>{if(!s||!n||a.current)return;if(l?.realChainIdHex)try{let y=await p(l?.realChainIdHex);if(!Mt(y)){c({initialGasType:i.CUSTOM,initialCustomGasPrice:y?.gasPrice,initialCustomMaxPriorityFee:y?.maxPriorityFeePerGas,initialCustomMaxBaseFee:R.sub(y?.maxFeePerGas||"0",y?.maxPriorityFeePerGas||"0")}),o(!0);return}}catch(y){Dt(y)}let m={...t},{initialGasType:F,initialCustomMaxBaseFee:d,initialCustomMaxPriorityFee:g,initialCustomGasPrice:D,initialCustomGasLimit:f}=m,{min:T,safePriorityFee:v,supportEip1559:A,gasLimit:P}=ds({signInfo:s,gasLimitInfo:n});if(F===i.CUSTOM){let y=Fs({initialCustomGasLimit:f,gasLimit:P});y&&(m.initialCustomGasLimit=P);let K=Ps({supportEip1559:A,initialCustomMaxPriorityFee:g,safePriorityFee:v,initialCustomMaxBaseFee:d,min:T}),w=ys({supportEip1559:A,initialCustomGasPrice:D,min:T});xs({gasLimitLessBase:y,eip1559GasPriceLessMin:K,gasPriceLessMin:w})&&(m.initialCustomMaxPriorityFee=null,m.initialCustomMaxBaseFee=null,m.initialCustomGasPrice=null,m.initialGasType=i.STANDARD),c(m)}o(!0),a.current=!0},[s,n]),{finalInitialGasData:u,renderNetworkFee:G}}var oi=Ls;I();b();var $={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};I();b();var X=le(Ie());var Is=(e={},t={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:s,disabled:n,fetchOnce:a,signInfo:u={}}=t,{coinId:c,supportEip1559:G,tx:o,needExtFee:l=!1}=e,[p,m]=(0,X.useState)(null),[F,d]=(0,X.useState)({data:"",loading:!1,error:""});(0,X.useEffect)(()=>{!l||n||d(f=>({...f,loading:!0,error:""}))},[o,l,n]);let g=()=>{try{if(!c){let f=u;Et.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window&&window.location&&window.location.href,rawData:f})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}},D=f=>{let T=V(f?.gasPrice,"0")&&V(f?.gasLimit,"0"),v=V(f?.maxFeePerGas,"0")&&V(f?.maxPriorityFeePerGas,"0")&&V(f?.gasLimit,"0");return{isValidLegacyGas:T,isValid1559Gas:v}};return Vt(()=>{if(!l||n){d(P=>({...P,loading:!1,error:""}));return}if(a===p&&a!==null){d(P=>({...P,loading:!1,error:""}));return}let{isValidLegacyGas:f,isValid1559Gas:T}=D(o);if(!(G?T:f)||!o){d(P=>({...P,loading:!1,error:""}));return}(async()=>{try{let P={...o,value:ee(o.value),gasLimit:ee(o.gasLimit)},y=G?{...P,maxFeePerGas:ee(o.maxFeePerGas),maxPriorityFeePerGas:ee(o.maxPriorityFeePerGas)}:{...P,gasPrice:ee(o.gasPrice)},K=$t(y),w=await Zt(K);g();let Q=await At({inputData:w,coinId:c});d(J=>({...J,data:Q,loading:!1,error:""}))}catch(P){d(y=>({...y,loading:!1,error:P.error_message||"Network error"}))}finally{a&&m(a)}})()},[c,o,a,l],{wait:s}),F},bs=({commonTx:e,gasPrice:t,maxFeePerGas:s,priorityFee:n,supportEip1559:a})=>(0,X.useMemo)(()=>a?{...e,maxFeePerGas:s,maxPriorityFeePerGas:n}:{...e,gasPrice:t},[e,s,t,n,a]),mi=({coinId:e,from:t,to:s,value:n,inputData:a,supportEip1559:u,needExtFee:c,estimatedL1FeeOptions:G,selectedGasInfo:o})=>{let l=(0,X.useMemo)(()=>({from:t,to:s,value:n,data:a,gasLimit:o.gasLimit}),[t,s,n,a,o.gasLimit]),p=bs({commonTx:l,gasPrice:o.gasPrice,maxFeePerGas:o.maxFeePerGas,priorityFee:o.maxPriorityFeePerGas,supportEip1559:u}),m=Is({coinId:e,tx:p,supportEip1559:u,needExtFee:c},G);return(0,X.useMemo)(()=>{let F=m.loading,d=m.error,g={[i.SLOW]:m.data,[i.STANDARD]:m.data,[i.FAST]:m.data,[i.CUSTOM]:m.data};return{loading:F,error:d,data:g}},[m])};I();b();Ye();var De=e=>kt(e)||qe(e,0),Me=e=>De(e)?void 0:Te(e),ke=(e,t,s)=>typeof e=="string"?e:t||s,ui=(e,t)=>{let s=ht(e?.minGasLimit,t)?e?.minGasLimit:t,n={...e||{},minGasLimit:s};return N(n?.gasLimit,n?.minGasLimit)&&(n.gasLimit=n?.minGasLimit),n},ci=(e,t)=>{let s=`${e?.gasLimit||0}`,n=t||s,a=`${e?.minGasLimit||s}`,u=`${e?.maxGasLimit||1500*1e4}`;return{defaultGasLimit:n,minGasLimit:a,maxGasLimit:u}},Ne=(e,t)=>De(e)?t:e,li=e=>{let{confirmGasType:t,slowGasPrice:s,standardGasPrice:n,fastGasPrice:a,safePriorityFee:u,proposePriorityFee:c,fastPriorityFee:G,defaultGasLimit:o,customGasPrice:l,customMaxFee:p,customMaxPriorityFee:m,customGasLimit:F}=e;return t===i.SLOW?{gasPrice:s,maxFeePerGas:s,maxPriorityFeePerGas:u,gasLimit:o}:t===i.STANDARD?{gasPrice:n,maxFeePerGas:n,maxPriorityFeePerGas:c,gasLimit:o}:t===i.FAST?{gasPrice:a,maxFeePerGas:a,maxPriorityFeePerGas:G,gasLimit:o}:{gasPrice:B(l),maxFeePerGas:B(p),maxPriorityFeePerGas:B(m),gasLimit:F}},fi=e=>{let{customMaxBaseFee:t,customMaxPriorityFee:s,customGasPrice:n,customGasLimit:a,suggestBaseFeeGWei:u,minGasPriceGWei:c,minGasLimit:G,maxGasLimit:o}=e,l=N(t,0)?x("extension_wallet_transaction_errortip_basefeelimit"):"",p=N(t,u)&&V(t,0)?x("extension_wallet_transaction_errortip_notsuccess",{baseFee:u}):"",m=qe(s,0)?x("extension_wallet_transaction_errortip_priorityfeelimit"):"",F=N(n,c)?x("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:c}):"",d=N(a,G)||V(a,o)?x("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:Xe(G,0),maxGasLimit:Xe(o)}):"";return{customMaxBaseFeeError:l,customMaxBaseFeeWarning:p,customMaxPriorityFeeError:m,customGasPriceError:F,customGasLimitError:d}},gi=(e,t,s,n,a)=>!e&&(!t&&!s||t&&!n&&!a),Gi=(e,t,s)=>(e?t:s)||0,pi=e=>{let{confirmGasType:t,slowGasPrice:s,standardGasPrice:n,fastGasPrice:a,safePriorityFee:u,proposePriorityFee:c,fastPriorityFee:G,slowNetworkFee:o,standardNetworkFee:l,fastNetworkFee:p,extFeeResults:m}=e;return t===i.SLOW?{finalGasPrice:s,finalMaxFeePerGas:s,finalMaxPriorityFeePerGas:u,finalNetworkFee:o,finalExtFee:m?.data?.[i.SLOW]}:t===i.STANDARD?{finalGasPrice:n,finalMaxFeePerGas:n,finalMaxPriorityFeePerGas:c,finalNetworkFee:l,finalExtFee:m?.data?.[i.STANDARD]}:t===i.FAST?{finalGasPrice:a,finalMaxFeePerGas:a,finalMaxPriorityFeePerGas:G,finalNetworkFee:p,finalExtFee:m?.data?.[i.FAST]}:{finalGasPrice:void 0,finalMaxFeePerGas:void 0,finalMaxPriorityFeePerGas:void 0,finalNetworkFee:void 0,finalExtFee:void 0}},di=e=>e&&e?.status!==1&&(!e?.tip?.error||e?.tip?.key===Xt.exceedGasLimit),Fi=(e,t,s)=>t?.typeKey!==i.CUSTOM&&R.lte(R.mul(t?.gasFee,s),e?.activity?.gas);function Pi({className:e}){return r.default.createElement(Qe,{className:e,desc:x("wallet_extension_transfer_text_higher_than_necessary"),type:Qe.TYPE.warn,closable:!1})}var Ts=({visible:e=!1,address:t="",inputData:s="",tokenAddress:n="",coinId:a="",value:u="0",initialGasData:c={initialGasType:i.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},estimatedL1FeeOptions:G={},onBack:o=()=>{},onClose:l=()=>{},onGasChange:p=()=>{},onServerDataChange:m=()=>{},minimumGasLimit:F="0",isSignInfoLoading:d,signInfo:g,initialGasLimitInfo:D,isGasLimitLoading:f,currencyId:T,gasReturn:v,onGasTypeManualChange:A,isMev:P,mevInfo:y})=>{let K=(0,r.useRef)(!1),[,w]=Yt(a,{withPrice:!0}),Q=_e({coinId:w?.coinId}),[J,he,xi]=zt(Q?.realChainIdHex),pe=Jt(),ve=ti(),{initialGasType:et=i.STANDARD,initialCustomMaxBaseFee:yi,initialCustomMaxPriorityFee:Li,initialCustomGasPrice:Ii,initialCustomGasLimit:tt}=c||{},it=Me(yi),st=Me(Li),nt=Me(Ii),bi=De(tt)?void 0:tt,[Ti,Ci]=(0,r.useState)(),[_i,wi]=(0,r.useState)(),[Si,Ei]=(0,r.useState)(),[at,rt]=(0,r.useState)(),[de,ot]=(0,r.useState)(et),[S,Fe]=(0,r.useState)(et),Di=L=>{let{priorityRate:C}=y||{},j=$e=>U($e,C),z=($e,cs)=>{let ls=Nt([0,U(cs,fe(C,1))]);return k($e,ls)},{supportEip1559:re,max:oe,min:ze,normal:_t,fastPriorityFee:Le,proposePriorityFee:wt,safePriorityFee:St}=L,se={};return re&&C&&(se.fastPriorityFee=j(Le),se.safePriorityFee=j(St),se.proposePriorityFee=j(wt),se.max=z(oe,Le),se.normal=z(_t,wt),se.min=z(ze,St)),{...L,...se}},O=(0,r.useMemo)(()=>P?g?.gasPrice?Di(g?.gasPrice):ge:g?.gasPrice||ge,[g?.gasPrice,P]),Mi=g?.needExtFee,{min:ki,normal:Ni,max:hi,minGasPrice:vi,supportEip1559:W,suggestBaseFee:Ai,safePriorityFee:me,proposePriorityFee:ue,fastPriorityFee:ce}=O,Y=ve(ki),q=ve(Ni),Z=ve(hi),M=(0,r.useMemo)(()=>ui(D,F),[D,F]),{defaultGasLimit:H,minGasLimit:mt,maxGasLimit:ut}=ci(M,bi),Oi=_(Y),ct=_(q),Wi=_(Z),Ri=Te(vi),lt=_(Ai),Bi=_(fe(Y,me)),ft=_(fe(q,ue)),Ui=_(fe(Z,ce)),Vi=_(me),gt=_(ue),Hi=_(ce),Ae=(0,r.useRef)(void 0),Oe=(0,r.useRef)(void 0),We=(0,r.useRef)(void 0),Re=(0,r.useRef)(void 0),Gt={[i.SLOW]:Oi,[i.STANDARD]:ct,[i.FAST]:Wi,[i.CUSTOM]:Ne(Ae.current,ct)},pt={[i.SLOW]:Bi,[i.STANDARD]:ft,[i.FAST]:Ui,[i.CUSTOM]:Ne(Oe.current,ft)},dt={[i.SLOW]:Vi,[i.STANDARD]:gt,[i.FAST]:Hi,[i.CUSTOM]:Ne(We.current,gt)},ne=ke(Si,nt,Gt[S]),Pe=ke(Ti,it,pt[S]),ae=ke(_i,st,dt[S]),ie=typeof at=="string"?at:H,Be=k(Pe,ae),zi=li({confirmGasType:S,slowGasPrice:Y,standardGasPrice:q,fastGasPrice:Z,safePriorityFee:me,proposePriorityFee:ue,fastPriorityFee:ce,defaultGasLimit:H,customGasPrice:ne,customMaxFee:Be,customMaxPriorityFee:ae,customGasLimit:ie}),E=mi({coinId:a,from:t,to:n,value:u,inputData:s,supportEip1559:W,needExtFee:Mi,estimatedL1FeeOptions:{wait:200,...G,signInfo:g},selectedGasInfo:zi}),xe=d||f||E.loading,{minGasFeeDisplay:$i,minGasFee:Ki,minGasPrice:Yi}=Se({gasPrice:Y,gasLimit:H,maxPriorityFeePerGas:me,maxFeePerGas:Y,supportEip1559:W,extFee:E?.data?.[i.SLOW],gasPriceInfo:O,gasLimitInfo:M,gasType:de,baseCoin:w,currencyId:T}),qi=_(Yi),{minGasFeeDisplay:Zi,minGasFee:ji,minGasPrice:Xi}=Se({gasPrice:q,gasLimit:H,maxPriorityFeePerGas:ue,maxFeePerGas:q,supportEip1559:W,extFee:E?.data?.[i.STANDARD],gasPriceInfo:O,gasLimitInfo:M,gasType:de,baseCoin:w,currencyId:T}),Qi=_(Xi),{minGasFeeDisplay:Ji,minGasFee:es,minGasPrice:ts}=Se({gasPrice:Z,gasLimit:H,maxPriorityFeePerGas:ce,maxFeePerGas:Z,supportEip1559:W,extFee:E?.data?.[i.FAST],gasPriceInfo:O,gasLimitInfo:M,gasType:de,baseCoin:w,currencyId:T}),is=_(ts),{customMaxBaseFeeError:Ft,customMaxBaseFeeWarning:Pt,customMaxPriorityFeeError:xt,customGasPriceError:yt,customGasLimitError:Lt}=fi({customMaxBaseFee:Pe,customMaxPriorityFee:ae,customGasPrice:ne,customGasLimit:ie,suggestBaseFeeGWei:lt,minGasPriceGWei:Ri,minGasLimit:mt,maxGasLimit:ut}),It=gi(Lt,W,yt,Ft,xt),ss=Gi(W,Be,ne),ye=B(be(ss)),ns=_(ye),{gasFeeDisplay:bt}=ii({gasPrice:be(ye),gasLimit:be(ie),extFee:E?.data?.[i.CUSTOM],baseCoin:w,currencyId:T}),as=k(U(Y,H),E?.data?.[i.SLOW]),rs=k(U(q,H),E?.data?.[i.STANDARD]),Tt=k(U(Z,H),E?.data?.[i.FAST]),Ct=k(U(ye,ie),E?.data?.[i.CUSTOM]),Ue=V(Ct,U(Tt,2)),Ve=[{typeKey:i.SLOW,gasFee:Ki,unitPrice:`${R.ceilShort(qi,2)} ${x("extension_wallet_transaction_input_gwei")}`,totalPrice:$i,estimatedTime:pe(O,Y),onClick:()=>(A?.(),Fe(i.SLOW))},{typeKey:i.STANDARD,gasFee:ji,unitPrice:`${R.ceilShort(Qi,2)} ${x("extension_wallet_transaction_input_gwei")}`,totalPrice:Zi,estimatedTime:pe(O,q),onClick:()=>(A?.(),Fe(i.STANDARD))},{typeKey:i.FAST,gasFee:es,unitPrice:`${R.ceilShort(is,2)} ${x("extension_wallet_transaction_input_gwei")}`,totalPrice:Ji,estimatedTime:pe(O,Z),onClick:()=>(A?.(),Fe(i.FAST))}],os=(0,r.useMemo)(()=>di(v)?Ve.map(L=>Fi(v,L,w?.usdPrice)?{supportGasReturn:!0,...L}:L):Ve,[v,Ve,w?.usdPrice]),ms=pe(O,ye,!It),us={unitPricePrefix:R.ceilShort(ns,2),unitPriceSuffix:x("extension_wallet_transaction_input_gwei"),totalPrice:bt?r.default.createElement(ei,{style:{color:Ue?"var(--okd-color-semantic-notice)":null},text:bt,maxWidth:"120px"}):"",renderWarning:L=>!L&&Ue?r.default.createElement(Pi,{className:$.customGasFeeWarningFold}):null,estimatedTime:ms,onClick:()=>{ot(i.CUSTOM)},canConfirm:It,onConfirm:L=>{Fe(i.CUSTOM),A?.();let C=B(ne),j=B(Be),z=B(ae),re=ie,oe=E?.data?.[i.CUSTOM];K.current=!0,p({gasType:i.CUSTOM,maxFeePerGas:j,maxPriorityFeePerGas:z,gasPrice:C,gasLimit:re,isGasLimitLoading:f,isNetworkFeeLoading:xe,networkFee:Ct,supportEip1559:W,gasLimitInfo:M,gasPriceInfo:O,extFee:oe,customConfirmed:K.current}),Ae.current=ne,Oe.current=Pe,We.current=ae,Re.current=ie,L?he({gasPrice:C,isDefault:!0,maxFeePerGas:j,isSupportEip1559:W,maxPriorityFeePerGas:z,baseFeePerGas:R.sub(j,z)}):xi(Q?.realChainIdHex)}};(0,r.useEffect)(()=>{ot(S)},[e]),(0,r.useEffect)(()=>{if(S===i.CUSTOM)return;let L=H,C=pi({confirmGasType:S,slowGasPrice:Y,standardGasPrice:q,fastGasPrice:Z,safePriorityFee:me,proposePriorityFee:ue,fastPriorityFee:ce,slowNetworkFee:as,standardNetworkFee:rs,fastNetworkFee:Tt,extFeeResults:E});p({gasType:S,maxFeePerGas:C.finalMaxFeePerGas,maxPriorityFeePerGas:C.finalMaxPriorityFeePerGas,gasPrice:C.finalGasPrice,gasLimit:L,isGasLimitLoading:f,isNetworkFeeLoading:xe,networkFee:C.finalNetworkFee,supportEip1559:W,gasLimitInfo:M,gasPriceInfo:O,extFee:C.finalExtFee})},[S,Y,q,Z,M,f,xe,p]),(0,r.useEffect)(()=>{if(S===i.CUSTOM&&!e){let L=Re.current;typeof L=="string"&&N(L,M?.minGasLimit)&&(L=M?.minGasLimit,rt(M?.minGasLimit),Re.current=M?.minGasLimit);let C=B(Ae.current||nt||Gt[S]),j=B(Oe.current||it||pt[S]),z=B(We.current||st||dt[S]),re=k(j,z),oe=typeof L=="string"?L:H,ze=E?.data?.[i.CUSTOM],Le=k(U((W?re:C)||0,oe),E?.data?.[i.CUSTOM]);p({gasType:S,maxFeePerGas:re,maxPriorityFeePerGas:z,gasPrice:C,gasLimit:oe,isGasLimitLoading:f,isNetworkFeeLoading:xe,networkFee:Le,supportEip1559:W,gasLimitInfo:M,gasPriceInfo:O,extFee:ze,useDefaultGas:!!J,customConfirmed:K.current})}},[J,M,O,E]),(0,r.useEffect)(()=>{typeof m=="function"&&g&&m({signInfo:g})},[g]);let He=()=>r.default.createElement("span",{className:$.customGWei},x("extension_wallet_transaction_input_gwei"));return r.default.createElement(Qt,{feeType:de,baseCoinId:w?.coinId,feeDataList:os,onBack:o,onClose:l,visible:e,supportDefaultGas:!0,custom:{useDefaultGas:!!J,chainName:Q?.chainName,...us,components:()=>r.default.createElement(r.default.Fragment,null,W?r.default.createElement(r.default.Fragment,null,r.default.createElement(h.Number,{className:$.customInput,size:h.SIZE.sm,title:r.default.createElement("div",{className:"network-fee--refresh-animation"},x("extension_wallet_transaction_text_maxbase_fee"),r.default.createElement("span",{className:$.customInputSubTitle},x("extension_wallet_transaction_text_current",{number:R.ceilShort(lt,2)}))),value:Pe,error:Ft,errorType:h.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ci,max:1e7,tips:Pt&&r.default.createElement("div",{className:$.maxBaseFeeWarning},Pt),suffix:He()}),r.default.createElement(h.Number,{className:$.customInput,size:h.SIZE.sm,title:x("extension_wallet_transaction_text_priority_fee"),value:ae,error:xt,errorType:h.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:wi,max:1e7,suffix:He()})):r.default.createElement(h.Number,{className:$.customInput,size:h.SIZE.sm,title:r.default.createElement(r.default.Fragment,null,x("wallet_transfer_gasfee_subtitle_gas_price"),r.default.createElement("span",{className:$.customInputSubTitle},x("extension_wallet_transaction_input_gwei"))),value:ne,error:yt,errorType:h.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ei,max:1e7,suffix:He()}),r.default.createElement(h.Number,{size:h.SIZE.sm,title:x("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:ie,error:Lt,errorType:h.TIP_TYPE.always,enableMinus:!1,onChange:rt,max:ut,min:mt,precision:0}),Ue&&r.default.createElement(Pi,{className:$.customGasFeeWarning}))}})};function Cs(e){let{coinId:t="",address:s="",inputData:n="",typeInt:a,tokenAddress:u="",value:c="0",method:G,dappInfo:o,gasLimitOptions:l={},gasLimitParams:p={},initialGasData:m,gasLimitInfo:F}=e,{isSignInfoInitLoading:d,signInfo:g}=ri({coinId:t,address:s}),{isGasLimitLoading:D,gasLimitInfo:f}=ai({from:s,to:u,value:c,data:n,typeInt:a,coinId:t,method:G,dappInfo:o,onlyGasLimit:!0,...p},{wait:200,...l}),T=F?.data||f,v=F?.loading||D,{finalInitialGasData:A,renderNetworkFee:P}=oi({coinId:t,initialGasData:m,signInfo:g,gasLimitInfo:T});return P?r.default.createElement(Ts,{...e,initialGasData:A,isSignInfoLoading:d,signInfo:g,initialGasLimitInfo:T,isGasLimitLoading:v}):null}var oa=(0,r.memo)(Cs);export{ni as a,ri as b,oi as c,Ts as d,oa as e};
//# sourceMappingURL=chunk-JCVVB72F.js.map
