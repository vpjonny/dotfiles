import{a as uo}from"./chunk-TG3CJXPF.js";import{a as po,b as co,c as fo}from"./chunk-27ZRRZY4.js";import"./chunk-SNOTXOHI.js";import"./chunk-RCXPUQYC.js";import"./chunk-RE74DUYA.js";import{d as I}from"./chunk-Z3CN3PP7.js";import"./chunk-JCVVB72F.js";import"./chunk-6CJRBF2P.js";import"./chunk-3KJMTMXK.js";import"./chunk-IWYRUFZN.js";import"./chunk-XI5NMQGM.js";import"./chunk-FLQKBEJO.js";import"./chunk-5TBKSXR4.js";import"./chunk-DZPLORMY.js";import"./chunk-5WI3NR4H.js";import{a as U}from"./chunk-AOZHPYH5.js";import"./chunk-W25M53MS.js";import"./chunk-HLTJYEGI.js";import"./chunk-4YPL7LEO.js";import"./chunk-452JEOHF.js";import"./chunk-3MLYZLAT.js";import{a as mo}from"./chunk-HXZJVWJD.js";import"./chunk-EZVXHXRV.js";import"./chunk-LHFDZX73.js";import"./chunk-IY6TM6RL.js";import"./chunk-VUWWQCMX.js";import"./chunk-OHHYJNZI.js";import"./chunk-5EFGCLI4.js";import"./chunk-B4MQLH4C.js";import"./chunk-VWVRJUMU.js";import"./chunk-EUAAIPZO.js";import"./chunk-GCJ2PJNQ.js";import"./chunk-A4R53AVX.js";import"./chunk-TJ3NTWVS.js";import"./chunk-634WRNGH.js";import"./chunk-ZFAUEPQW.js";import"./chunk-RN5VSY2K.js";import"./chunk-YPWPNJRG.js";import"./chunk-GMVPA3MX.js";import"./chunk-P355XBV4.js";import"./chunk-C4TBDTQO.js";import"./chunk-6AUQLYPZ.js";import"./chunk-UPIYMC4Q.js";import"./chunk-ZUO5BDO3.js";import"./chunk-A7EUFORV.js";import"./chunk-QEPQGEPL.js";import"./chunk-RZOHZNJG.js";import"./chunk-RQTEHFJ2.js";import"./chunk-75EAYNWR.js";import"./chunk-D6LKASPV.js";import"./chunk-DKVOSSSH.js";import"./chunk-FWL474H4.js";import"./chunk-V7YATDMZ.js";import"./chunk-YRQLRR65.js";import"./chunk-T2AAZNU7.js";import"./chunk-E4CKCWHV.js";import"./chunk-X4IU7NMU.js";import"./chunk-66RCYZEO.js";import"./chunk-BIUKJDG5.js";import"./chunk-MNRE2RWN.js";import"./chunk-S63SUKPS.js";import"./chunk-QR6SNDPA.js";import"./chunk-DB7NVRTE.js";import"./chunk-EF6FTTLT.js";import{a as so}from"./chunk-U44ZBWPF.js";import"./chunk-YPTISS47.js";import"./chunk-UX2JFEX5.js";import"./chunk-XHRUTTJG.js";import"./chunk-OS6U6P6N.js";import"./chunk-PLVYKYSQ.js";import"./chunk-MEZ72IGZ.js";import"./chunk-ZLTTBRML.js";import"./chunk-XUGHAFHG.js";import{a as io}from"./chunk-B5L26Z2J.js";import"./chunk-AVG63QW4.js";import{g as w}from"./chunk-YLT6ZRGE.js";import"./chunk-VSNCKUAC.js";import"./chunk-OB65JCC3.js";import"./chunk-ZWKYYPCG.js";import"./chunk-YLPOVMK6.js";import"./chunk-CAWXATKV.js";import"./chunk-GIKT3XNH.js";import"./chunk-4VAKOKZO.js";import"./chunk-F43OFDEC.js";import"./chunk-XAUZ4FZE.js";import"./chunk-5JVWMQI2.js";import"./chunk-KLS3SJXA.js";import"./chunk-5DQKP6TK.js";import"./chunk-QTPS5BDP.js";import"./chunk-KOQXCGQ5.js";import"./chunk-P7NYIGUS.js";import"./chunk-OWPVBYY3.js";import"./chunk-ZNFTIF43.js";import"./chunk-D52EE5TC.js";import"./chunk-FEU7MNAN.js";import"./chunk-CWNI35TN.js";import"./chunk-E6SXR3B6.js";import"./chunk-GTBNRR37.js";import"./chunk-UUOZSCBD.js";import"./chunk-A7FGCMOW.js";import"./chunk-V2CZ7DY4.js";import"./chunk-3PLVXUNW.js";import"./chunk-HIUQCAJS.js";import"./chunk-S6FHNOIH.js";import"./chunk-RKCZ2ONP.js";import"./chunk-RER2JAFZ.js";import"./chunk-CJAFGYQK.js";import"./chunk-QED56456.js";import"./chunk-HSSW2VTC.js";import"./chunk-PYCB247J.js";import"./chunk-2LQJ3JX6.js";import"./chunk-KF7FMIRD.js";import"./chunk-N4IYN7DD.js";import"./chunk-UY2DPNBT.js";import"./chunk-SZZZVLQW.js";import"./chunk-V5J3A5L5.js";import"./chunk-CERSDYPT.js";import"./chunk-RZETZIQO.js";import"./chunk-P5GHREX3.js";import"./chunk-HUG2KBCE.js";import"./chunk-6XMXPOUW.js";import"./chunk-3WKBEXBH.js";import"./chunk-RK4OLGCC.js";import"./chunk-NNPT43SF.js";import"./chunk-VL2JCPJS.js";import"./chunk-CTJAEFLV.js";import"./chunk-AP4E6GDF.js";import"./chunk-RPH2MNBW.js";import"./chunk-SKUQ6ZA4.js";import"./chunk-P3FTJE4X.js";import"./chunk-ACIP3YF7.js";import"./chunk-W6ZDZJCJ.js";import"./chunk-PGGBOJAH.js";import"./chunk-JDCCMYBK.js";import"./chunk-554VFFSY.js";import"./chunk-4ADHM5NM.js";import"./chunk-JBOOQ7HO.js";import"./chunk-RKPJE2LG.js";import"./chunk-6YSMHFNA.js";import"./chunk-56GFQPT2.js";import"./chunk-F7OEW67Y.js";import"./chunk-MZZCJYQ2.js";import{b as J,c as oo,d as ro}from"./chunk-VX6OVCCX.js";import{b,d as B}from"./chunk-RYVYRLUT.js";import"./chunk-O6ODITJY.js";import"./chunk-2XOPB27K.js";import"./chunk-LZL7SWT5.js";import"./chunk-OYIB3B2O.js";import"./chunk-OBLKTTHP.js";import"./chunk-LQJXR5XX.js";import"./chunk-NQGIYDUG.js";import"./chunk-QTCVWDVR.js";import"./chunk-4NXISG4T.js";import"./chunk-MLF4IONJ.js";import"./chunk-4ITEJ5A6.js";import"./chunk-JYCBCMDP.js";import"./chunk-CBZ2RV36.js";import"./chunk-QMHGGMPE.js";import"./chunk-GVYIP5Q5.js";import"./chunk-VHMBEOFX.js";import"./chunk-L3AMAP6V.js";import"./chunk-W3VW6MYS.js";import"./chunk-GWHLETPD.js";import"./chunk-6GJ4TEPK.js";import"./chunk-BYDDPVAA.js";import"./chunk-CSTKCSUP.js";import"./chunk-M43NTBTB.js";import{m as ao}from"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import"./chunk-PMG6IXOR.js";import"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-MT3ANHCR.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{h as no}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import"./chunk-MJSLAJV6.js";import"./chunk-KC2XLVFC.js";import{qa as k,ra as P}from"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-SDBZJWGW.js";import"./chunk-F3ILJHGP.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import{S as X,Y as Z,c as M}from"./chunk-3F7OC7N7.js";import"./chunk-HZOYPVSA.js";import"./chunk-Z4GX4TH2.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import{Bb as q,Nb as Q,vb as Y}from"./chunk-EQ34WRCJ.js";import"./chunk-UIZGYUZK.js";import{p as K}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as eo}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as to}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-I2AEM4CA.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{w as N}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import"./chunk-FB3ILH2L.js";import{b as x}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-KZ2ZLD6V.js";import"./chunk-NEASQB35.js";import"./chunk-5BYM6SMZ.js";import"./chunk-TR37MFB4.js";import"./chunk-PNECIDQW.js";import"./chunk-BVDMVGLD.js";import{Aa as H,F as G,M as z,r as $}from"./chunk-4C5HF6J2.js";import"./chunk-4HSSECLD.js";import"./chunk-BY6XCDJZ.js";import"./chunk-U6W3TK77.js";import"./chunk-6GYKGMWB.js";import"./chunk-WJI4CIAQ.js";import"./chunk-PESQD55U.js";import"./chunk-WQGQVXPA.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-UY3WU5XU.js";import"./chunk-ALECRBLY.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-QM6LXDU7.js";import"./chunk-LUD2GISD.js";import"./chunk-WZALYVUQ.js";import"./chunk-F5YUOHHL.js";import"./chunk-26KHACOU.js";import"./chunk-VONUGAVN.js";import"./chunk-ZVKCRT3D.js";import"./chunk-MSOW5GDX.js";import"./chunk-O5NUB7LT.js";import"./chunk-QI2KSP5Y.js";import"./chunk-EL77VG5Z.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f as h,o as m,q as p}from"./chunk-UWURTNRY.js";m();p();var y=h(x());var yo=h(eo());H();m();p();var L=h(x());m();p();var lo=h(x());H();var vo=()=>{let o=k(),r=P(b);return(0,lo.useCallback)(e=>{let n=Array.isArray(e)?e:[e],a=G(n,t=>`${t.chainId}-${t.projectAddr}`),s=r.map(t=>{let d=a[`${t.chainId}-${t.approvalAddress}`];if(!d)return t;let f=new Set(d.map(c=>c.revokedTokenAddress)),i=t.tokens.map(c=>f.has(c.tokenAddress)?{...c,status:2}:c);return{...t,tokens:i}});o(B(s))},[r])};m();p();var O=h(x());var Lo=X.WALLET_SEND_CALLS,Do=({walletId:o,txConfirmData:r,onCancel:e,onConfirm:n})=>{let{chainId:a,data:s,chain7702Data:t,coinId:d}=r,f=s[0]?.txParams?.from,i=U(a),c=(0,O.useMemo)(()=>({params:{calls:s.map(v=>({to:v.txParams.to,value:v.txParams.value,data:v.txParams.data})),chainId:i,from:f},extParams:{chain7702Data:t},chainId:a,walletId:o}),[s,i,f,t,a,o]),[,D]=w(d,{}),{txParams:l,modifiedCalls:C}=fo({unapproved:c,shouldUpgrade7702:r.shouldUpgrade7702}),T=()=>{n(s.map(v=>({revokedTokenAddress:v.tokenAddress,projectAddr:v.approvalAddress,chainId:v.chainId})))},{onBeforeSign:A,eip5792Params:S,gasLimitParams:R,setModifiedData:E,reserveValue:j,isAuth7702:u}=co({unapproved:c,txParams:l,modifiedCalls:C});return!l||u&&!R?null:O.default.createElement(I,{walletId:o,chainId:a,coinId:D?.coinId,txParams:l,onCancel:e,onConfirm:T,reserveValue:j,showApproveAddressAtPopup:!0,txToastCheckParams:S,preExecParams:S,gasLimitParams:R,params:l,onBeforeSign:A,onDataChange:E,method:Lo})},ho=Do;m();p();var V=h(x());var Ro=({walletId:o,onCancel:r,onConfirm:e,txConfirmData:n})=>{let{chainId:a,approvalAddress:s,tokenAddress:t,coinId:d,txParams:f}=n,[,i]=w(d),c=i?.coinId===q,D=async({preExecInfo:C})=>{let T={},A=C?.approveInfoList?.[0];return A?.spender?.approvalType===Z&&(T.approvalAddress=A?.spender?.address),{publishParams:T}},l=()=>{e({revokedTokenAddress:t,projectAddr:s,chainId:a})};return i?c?V.default.createElement(mo,{walletId:o,txParams:f,onConfirm:l,onCancel:r}):V.default.createElement(I,{walletId:o,chainId:a,coinId:i?.coinId,txParams:f,onBeforePublish:D,onCancel:r,onConfirm:l}):null},Co=Ro;var F=o=>"data"in o&&Array.isArray(o.data),Eo=(o,r)=>{let e=F(o),n=F(r);return e&&n?o.chainId===r.chainId:e||n?!1:r.tokenAddress===o.tokenAddress&&r.approvalAddress===o.approvalAddress&&r.chainId===o.chainId},bo=({unapproved:o,unapprovedRequests:r})=>{let e=F(o),n=no(),a=k(),s=vo(),t=()=>{if(r.length===1){a(ro({type:"approve"}));return}let i=r.filter(c=>!Eo(o,c));a(oo({type:"approve",data:i}))},d=async i=>{s(i),t()},f=()=>{t()};return e?L.default.createElement(ho,{walletId:n,txConfirmData:o,onCancel:f,onConfirm:d}):L.default.createElement(Co,{walletId:n,onCancel:f,onConfirm:d,txConfirmData:o})},xo=(0,L.memo)(bo);m();p();var _=h(x()),Io=h(eo());m();p();var go=h(x());H();var Ao=()=>{let o=k(),r=P(b);return(0,go.useCallback)(e=>{let n=$(r||[]),a=n.find(s=>s.type===1);if(a?.chainList?.length){let s=(a?.chainList||[]).map(t=>Number(t.chainIndex)===Number(e)?{...t,status:5}:t);a.chainList=s,o(B(n))}},[r])};m();p();var To=h(x());function Bo({chainId:o,fromAddress:r,inputData:e,upgradeAddress:n}){return(0,To.useMemo)(()=>({from:r,to:r,value:"0x0",data:e,authorizationList:[{chainId:o,address:n}]}),[r,e,o,n])}var ko=Bo;m();p();var Po={loading:"_loading_6vxdb_1"};function wo({walletId:o,baseCoinId:r,upgradeAddress:e,inputData:n,needConfirmCallback:a,isUpgrade:s,chainIndex:t}){let d=(0,Io.useHistory)(),f=Ao(),{coin:i}=so(r),c=ao(i.localType,o),l=Y({localType:i.localType})?.realChainIdHex,{gasLimitParams:C}=po({isUpgrade7702:s,fromAddress:c,localType:i.localType,inputData:n,upgradeAddress:e}),T=ko({chainId:l,upgradeAddress:e,inputData:n,fromAddress:c}),A=(0,_.useMemo)(()=>C?.stateOverrideList?{stateOverrideList:C.stateOverrideList}:{},[C]),S=u=>{let{authorizationList:v,nonce:W,...So}=u;return{...So,nonce:W,authorizationList:[{chainId:l,address:e,nonce:U(W+1),fromAddress:c,walletId:o,localType:i.localType}]}},R=()=>{let u={txType:s?M.UPGRADE_7702:M.REVOKE_7702,txSource:Q.NORMAL};return s&&(u.approvalAddress=e),{publishParams:u}},E=()=>{d.goBack()},j=async({error:u})=>{if(u){let v=u.msg||u.message||u.originalError?.message||K("wallet_extension_general_error_extension_code_error");to.error({title:v})}else a&&f(t),E()};return C?_.default.createElement(I,{chainId:i.chainId,walletId:o,interactAddress:s?e:!1,gasLimitParams:C,txParams:T,txToastCheckParams:A,preExecParams:A,showDappInfo:!1,coinId:r,onBeforeSign:S,onBeforePublish:R,onConfirm:j,onCancel:E}):_.default.createElement("div",{className:Po.loading},_.default.createElement(N.Circle,{size:N.SIZE.lg}))}var _o=wo;var Uo=()=>{let r=io().get("type"),e=P(J),n=(0,yo.useHistory)(),a=e[r],t={upgrade7702:_o,approve:xo}[r]||null,d=z(a)||!t;return(0,y.useEffect)(()=>{d&&n.goBack()},[d]),z(a)?null:y.default.createElement(uo,{unapprovedRequests:a,ConfirmComp:t})},ae=(0,y.memo)(Uo);export{ae as default};
//# sourceMappingURL=TxConfirmEntry-MJAHUQMX.js.map
