import{a as O,k}from"./chunk-KC2XLVFC.js";import{n as I}from"./chunk-UI4IZNSB.js";import{b as y,p as R}from"./chunk-DSNMNSMD.js";import{o as f}from"./chunk-URGJ6D4O.js";import{C as i}from"./chunk-XYWWXNVK.js";import{b as A}from"./chunk-FLSAETOH.js";import{f as g,o as n,q as s}from"./chunk-UWURTNRY.js";n();s();var S=g(A());n();s();n();s();n();s();var L=["UNKNOWN_ERROR","NOT_IMPLEMENTED","UNSUPPORTED_OPERATION","NETWORK_ERROR","SERVER_ERROR","TIMEOUT","BAD_DATA","CANCELLED","BUFFER_OVERRUN","NUMERIC_FAULT","INVALID_ARGUMENT","MISSING_ARGUMENT","UNEXPECTED_ARGUMENT","VALUE_MISMATCH","CALL_EXCEPTION","INSUFFICIENT_FUNDS","NONCE_EXPIRED","REPLACEMENT_UNDERPRICED","TRANSACTION_REPLACED","UNCONFIGURED_NAME","OFFCHAIN_FAULT","ACTION_REJECTED"];function w(e){return typeof e=="string"&&L.includes(e)}function U(e){return typeof e=="object"&&e!==null}function h(e,r){let o=e[r];return typeof o=="string"?o:void 0}function P(e,r){let o=e[r];return typeof o=="number"?o:void 0}var v={NETWORK_ERROR:"EthersNetworkError",TIMEOUT:"Timeout",SERVER_ERROR:"ServerError",BAD_DATA:"BadData",INVALID_ARGUMENT:"InvalidArgument",CALL_EXCEPTION:"CallException",ACTION_REJECTED:"UserRejected"};function B(e){if(!U(e.error))return{nestedCode:void 0,nestedStatus:void 0,nestedRpcCode:void 0,nestedMessage:void 0};let r=e.error;return{nestedCode:r.code,nestedStatus:P(r,"status"),nestedRpcCode:typeof r.code=="number"?r.code:void 0,nestedMessage:h(r,"message")}}function b(e){let r=e.code,o=h(e,"message"),E=P(e,"status"),{nestedCode:d,nestedStatus:t,nestedRpcCode:a,nestedMessage:C}=B(e),c=r??d,_=C||o||"RPC Error",m=E??t;return w(c)?{type:v[c]??"OtherEthersError",message:_,ethersCode:c,statusCode:m,rpcCode:a,raw:e}:typeof c=="number"?{type:"JsonRpcError",message:_,rpcCode:c,raw:e}:null}function M(e){if(e instanceof TypeError)return{type:"BrowserNetworkError",message:e.message??"Failed to fetch.",raw:e};if(U(e)){let r=b(e);if(r)return r}return{type:"UnknownError",message:"Unknown error",raw:e}}var D=async e=>{let{ethers:r}=await I();return new Promise((o,E)=>{new r.JsonRpcProvider(e).getNetwork().then(t=>{t?.chainId?o(t):E({type:"BadData",message:"RPC did not return a valid chainId",raw:t})}).catch(t=>{E(M(t))})})};var G=(e={})=>{let{onSuccess:r,onError:o,onFinally:E}=e,[d,t]=(0,S.useState)(void 0),{loading:a,cancel:C,data:c,run:_,runAsync:m,refresh:T,refreshAsync:x}=k(async N=>await D(N),{onBefore:()=>{t(void 0)},manual:!0,onSuccess:r,onError:N=>{t(N),o?.(N)},onFinally:E}),F=O(()=>{C(),t(void 0)});return{loading:a,error:d,data:c,tryRpc:_,tryRpcAsync:m,retryTryRpc:T,retryTryRpcAsync:x,cancelTryRpc:F}},ne=G;n();s();var u=g(A());n();s();var l={changeNetButton:"_changeNetButton_1pxls_1",exitRpcModeButton:"_exitRpcModeButton_1pxls_4",text:"_text_1pxls_14","font-logout":"_font-logout_1pxls_19",fontLogout:"_font-logout_1pxls_19",errorMessage:"_errorMessage_1pxls_22"};var V=e=>{let{onRetry:r,onChangeNet:o,visible:E,error:d}=e;if(!E)return null;let t=()=>{let a=R("developer_mode_network_toast_changenetwork");return(d?.message||d?.type)&&y(d.message||d.type)||a};return u.default.createElement(f.Prompt,{visible:E,infoType:f.Prompt.INFO_TYPE.warn,title:R("developer_mode_network_toast_connect_failed"),text:u.default.createElement("div",{className:l.errorMessage},t()),hideCloseBtn:!0,alignBottom:!1,renderFooter:()=>u.default.createElement(u.default.Fragment,null,u.default.createElement(i,{block:!0,category:i.CATEGORY.fill,type:i.TYPE.highlight,onClick:r,size:i.SIZE.lg},R("developer_mode_network_btn_retry")),u.default.createElement(i,{block:!0,category:i.CATEGORY.outline,type:i.TYPE.primary,onClick:o,size:i.SIZE.lg,className:l.changeNetButton},R("developer_mode_network_btn_changenetwork")))})},me=V;export{ne as a,me as b};
//# sourceMappingURL=chunk-SCCWM4HB.js.map
