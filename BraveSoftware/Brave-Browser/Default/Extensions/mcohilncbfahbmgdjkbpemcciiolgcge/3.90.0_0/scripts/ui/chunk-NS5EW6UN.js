import{h as j,i as V}from"./chunk-MJDO2VHF.js";import{c as B}from"./chunk-EAE2NUFS.js";import{ca as F,i as J,k as T,l as z}from"./chunk-3F7OC7N7.js";import{D as R,a as q}from"./chunk-EPDR6VAQ.js";import{c as s}from"./chunk-2O5TMJZM.js";import{K as h,L as W,M as A,O as a}from"./chunk-UI4IZNSB.js";import{$ as C,Eb as w,Gb as E,Hb as v,ca as D,ta as _,ua as N,ub as H}from"./chunk-EQ34WRCJ.js";import{Aa as Q,M,l as O}from"./chunk-4C5HF6J2.js";import{o as c,q as m}from"./chunk-UWURTNRY.js";c();m();var k=(n={},e={})=>a(s.getGasSignInfo,n,e),X=async n=>{let e={scenario:T.SCENARIO_SEND_COIN,...n},{data:t={}}=await k(e);return t},K=(n={})=>a(s.postGasLimit,n),Z=(n={})=>a(s.postTxToastCheckUrl,n),cn=async(n,e)=>{let t=s.postTx,{data:r}=await a(t,n,e);return r},mn=n=>a(s.getDomainAddress,n),un=async(n={})=>{try{let{data:e}=await a(s.postExtFee,n);return e?.extFee}catch{return"0"}},dn=async(n,e)=>{let t=s.postBatchTx,{data:r}=await a(t,n,e);return r};var gn=async(n,e)=>{let t=s.postUTXOInfoFromTxs;return a(t,n,e)};var ln=async n=>{let{data:e}=await a(s.preExecTransaction,n),{txInfo:t,...r}=e;return{...r,...t}},pn=async n=>{let{data:e}=await a(s.preExecTransactionV2,n),{txInfo:t,...r}=e;return{...r,...t}},fn=async n=>{let{data:e}=await a(s.batchTransferAddressCheck,n);return e},xn=async(n,e)=>{let{data:t=[]}=await Z({checkTypes:[F.OVERWRITTEN],coinId:n,from:e});return t.find(o=>o.checkType===F.OVERWRITTEN)};c();m();var G=async()=>({walletId:await B().getSelectedWallet()}),wn=async(n={...J},e)=>{let{walletId:t}=await G(),r=s.getAllTxListUrl,o={lastRowId:"",limit:20,accountId:t,...n};try{let{data:u={}}=await h(r,o,e);return u}catch(u){throw new Error(u)}},Sn=async(n,e)=>{let{walletId:t}=await G(),{coinId:r}=n,o=s.postTxDetailInfoUrl,u={accountId:t,...n,coinId:r};try{let{data:g={}}=await a(o,u,e);return g}catch(g){throw new Error(g)}},Pn=async(n,e)=>{let{walletId:t}=await G(),r=s.postCoinTxListUrl,o={lastRowId:"",limit:20,accountIds:[t],...n};try{let{data:u={}}=await a(r,o,e);return u}catch(u){throw new Error(u)}},Rn=async(n,e)=>{let{coinId:t}=n,r=s.postBtcAccelerationFeeInfo,o={...n,coinId:t},{data:u={}}=await a(r,o,e);return u},An=async()=>{try{let{data:n={}}=await h(s.getTxTypeOfTxHistory);return n?.content||[]}catch(n){throw new Error(n)}},_n=async(n,e)=>{let{walletId:t}=await G(),r=await B().getUserUniqueId(),o={...n,aggregation:!1,accountId:t,userUniqueId:r,excludeCoinIds:[]};try{let{data:u={}}=await a(s.postCoinSearchOfTxHistory,o,e);return u}catch(u){throw new Error(u)}};c();m();Q();c();m();var S=class{constructor(e=50){this.cache=new Map;this.keysIndex=0;this.keys=Array.from(new Array(e))}delete(e){this.keys=this.keys.map(t=>t===e?void 0:t),this.keysIndex=(this.keysIndex-1)%this.keys.length,this.cache.delete(e)}clear(){this.cache.clear(),this.keys.fill(void 0),this.keysIndex=0}get(e){return this.cache.get(e)}set(e,t){if(!this.keys.includes(e)){let r=this.keys[this.keysIndex];r!==void 0&&this.cache.delete(r),this.keys[this.keysIndex]=e,this.keysIndex=(this.keysIndex+1)%this.keys.length}this.cache.set(e,t)}};c();m();function P(n){return/^\d+$/.test(String(n))}var L=null,Y=[],Xn=async n=>{let{data:e={}}=await a(s.postAddressRegisterStatus,n);return e},Kn=async n=>{let{data:e={}}=await a(s.postCheckTransfer,n);return e},Yn=async n=>{try{let{data:e=[]}=await a(s.getCoinList,n);return e.length?e.map(t=>V(t)):[]}catch{return[]}},$n=(n={})=>Object.keys(n).some(e=>["coinId","chainId","address","aggregation","coinType","symbol"].includes(e)),Qn=async n=>{try{let e={coinIds:[n]},{data:t=[]}=await a(s.postMarketUrl,e,{headers:{currency:"usd"}});return t[0]??null}catch{return null}},Zn=async n=>{if(!n||M(n))return null;L||(L=new S(50));let{address:e,aggregation:t,symbol:r,coinId:o,chainId:u,coinType:g}=n,d={};if(t)d.aggregationSymbol=r;else if(P(o)){d.coinId=+o;let i=L.get(o);if(i)return i}else(r||e)&&(r&&(d.symbol=r),e&&(d.contractAddress=e),P(u)&&(d.chainId=+u),P(g)&&(d.coinType=+g));try{let{data:i={}}=await a(s.getCoinDetail,d);if(i.length){let x=new Map,l=null;return i.forEach(p=>{let I=j(p);if(L.set(I.coinId,I),p.aggregation){let b=x.get(p.symbol);b?b.childrenCoin.push(I):(l={...I,childrenCoin:[I]},x.set(p.symbol,l))}else l=I}),l}return null}catch{return null}},nn=({account:n,chainList:e})=>{let t={},r={},o={};return{result:e.reduce((g,d)=>{let{localType:i,chainName:x,chainId:l,baseChain:p}=d;return i===C||i===D?(t[i]={chainName:x,baseChain:p,chainId:l,localType:i},g):i===_?(r.chainName=x,r.chainId=l,r.localType=i,r.baseChain=p,g):i===N?(o.chainName=x,o.chainId=l,o.localType=i,o.baseChain=p,g):(n[i]&&g.push({address:n[i],chainName:x,chainId:l,localType:i,baseChain:p}),g)},[]),bitcoin:t,near:r,ton:o}},en=({accountsMap:n,bitcoin:e,segwitAddressType:t})=>{let r=[D,C],o=[];return r.forEach(u=>{let g=n[C],d=e[u];if(g&&d){let i=t[C]===w.SEGWIT_NESTED?w.SEGWIT_NESTED_49:w.SEGWIT_NESTED,x=E[C].reduce((l,p)=>(i!==p&&g[p]&&l.unshift({...d,address:g[p].address?g[p].address:d.address,addressType:p}),l),[]);o=[...o,...x]}}),o},$=(n,e,t)=>E[t].reduce((r,o)=>(n[o]&&r.unshift({...e,address:n[o].address,addressType:o}),r),[]),tn=(n,e,t)=>{t&&Y.filter(y=>y.chainId===e.chainId);let{account:r,segwitAddressType:o,accountsMap:u}=n,g=H(),d=nn({account:r,chainList:g}),{result:i}=d,{bitcoin:x,near:l,ton:p}=d;i=[...en({accountsMap:u,bitcoin:x,segwitAddressType:o}),...i];let b=u[_];b&&(i=[...$(b,l,_),...i]);let U=u[N];return U&&(i=[...$(U,p,N),...i]),Y=i,i.filter(y=>y.chainId===e.chainId)},ne=async(n,e,t,r)=>{try{let{data:o={}}=await a(s.getCoinDetail,n);if(o.length){let u={coins:o||[],token:{walletId:t,accountId:t,coinAmount:"0",coinAmountOrigin:"0",currencyAmount:"0",default:o[0].isDefault,imageUrl:e?.logo,name:e.name,symbol:e.symbol,rank:o[0]?.rank,subBalanceType:e.subBalanceType,voucherToken:e.voucherToken,coinBalanceDetails:[]}},g=v[C][w.LEGACY];return o.forEach((d,i)=>{let x=tn(r,d,i),l=x.length===1?O(x,"[0]",{}):x[i],p=v?.[l.baseChain]?.[l?.addressType]||g;u.coins[i].addressType=p,u.coins[i].userAddress=l.address,u.token.coinBalanceDetails.push({address:d.address??e.tokenAddress,chainId:d.chainId,coinAmount:"0",coinAmountOrigin:"0",coinId:d.coinId,currencyAmount:"0",pluginCoinType:d.coinType,addressType:p,userAddress:l.address||e.address,voucherToken:Boolean(d.voucherToken??e.voucherToken),displayPrecision:d.displayPrecision,stableCoin:d.stableCoin})}),u}return null}catch{return null}},ee=async(n={})=>h(s.getCoinAvailable,n);async function te(n,e){return a(s.reportMaliciousToken,n,e)}async function re(n,e){return h(s.reportTokenReasonList,n,e)}c();m();c();m();c();m();var de=async(n={})=>{let{data:e={}}=await k(n),{info:t={}}=e;return t},ge=async(n={})=>{let{data:e={}}=await k(n),{info:t={}}=e,{recentBlockhash:r}=t;return r},le=(n={})=>{let{mint:e,address:t}=n,r=s.getSolanaTokenAccountAddressWithMint.replace("{mint}",e).replace("{address}",t);return h(r)};async function pe(n,e){let t=await A(s.requestSolanaMethodUrlToFullnode,{jsonrpc:"2.0",id:R(),method:n,params:e});return t.status===200?t.data:Promise.reject(t)}async function fe(n){let{data:e={}}=await a(s.getSolanaJitoSignInfo,n);return e}c();m();var Te=async n=>{let e={...n,scenario:T.SCENARIO_SEND_COIN},{data:t={}}=await k(e),{info:r={}}=t,{trc:o}=r;return o===z.TRC20},be=async(n,e)=>{let r={...{scenario:T.SCENARIO_SEND_COIN,...e},coinId:n?.coinId,fromAddr:n?.address},{data:o={}}=await k(r);return o};c();m();var Ge=async n=>{let{data:e}=await a(s.getAptosGasLimit,{inputData:n}),{gasLimit:t}=e;return t},Le=async(n,e,t)=>{let r={...n,scenario:T.SCENARIO_SEND_COIN},{data:o={}}=await k(r),{info:u={}}=o,{maxGasAmount:g="0"}=u,{gasUnitPrice:d="0"}=u,i=e;if(i)try{typeof i=="function"&&(i=await i(o));let{data:{gasLimit:l}}=await a(s.getAptosGasLimit,{inputData:i,chainIndex:t});g=l}catch{g="8000"}let x=q(d,g);return{gasUnitPrice:d,maxGasAmount:g,fee:x}},De=async(n={})=>{let{address:e,chainIndex:t=""}=n,r=s.getAptosABI.replace("{moduleAddress}",e).replace("{chainIndex}",t),{data:o}=await W(r);return o},Ee=async n=>{let e=s.postAptosNftClaim,{data:t}=await a(e,{address:n,pageNo:1,pageSize:1e3});return t},ve=async(n,e,t)=>{let r=s.saveAptosNftSaveOrder,{data:o}=await a(r,{scene:n,chain:637,txHash:e,walletAddress:t,source:4,appVersion:"2.23.9"});return o};c();m();c();m();async function rn(n){let e=await A(s.requestSuiMethodUrlToFullnode,{jsonrpc:"2.0",id:R(),...n||{}});return e.status===200?e.data:Promise.reject(new Error)}c();m();var Ye=async(n={})=>{let{coinId:e,from:t,to:r}=n,o={coinId:e,fromAddr:t,value:"0",toAddr:r},{info:u={}}=await X(o);return u},$e=async(n={})=>{let{coinId:e,from:t,inputData:r}=n,o={coinId:e,address:t,value:"0",inputData:r},{data:u={}}=await K(o);return u.gasLimit};c();m();var rt=async n=>{let e=s.postPendingBalanceDetail;return(await a(e,n)).data||{}},ot=async n=>{let e=s.getBrcJson;return(await h(e,n)).data||{}};c();m();c();m();c();m();c();m();c();m();var Ft=n=>a(s.getGasStationSupportChainListUrl,n),Bt=n=>h(s.getGasStationSupportCoinListUrl,n);var Ht=n=>a(s.checkAndGetCallDataUrl,n),jt=n=>a(s.orderSaveUrl,n);export{k as a,X as b,K as c,Z as d,cn as e,mn as f,un as g,dn as h,gn as i,ln as j,pn as k,fn as l,xn as m,de as n,ge as o,le as p,pe as q,fe as r,Te as s,be as t,Ge as u,Le as v,De as w,Ee as x,ve as y,rn as z,Ye as A,$e as B,wn as C,Sn as D,Pn as E,Rn as F,An as G,_n as H,rt as I,ot as J,P as K,Xn as L,Kn as M,Yn as N,$n as O,Qn as P,Zn as Q,ne as R,ee as S,te as T,re as U,Ft as V,Bt as W,Ht as X,jt as Y};
//# sourceMappingURL=chunk-NS5EW6UN.js.map
