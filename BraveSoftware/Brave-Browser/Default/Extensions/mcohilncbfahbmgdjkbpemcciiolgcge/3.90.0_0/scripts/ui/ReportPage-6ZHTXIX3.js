import{a as D}from"./chunk-U44ZBWPF.js";import{a as K}from"./chunk-B5L26Z2J.js";import{d as q}from"./chunk-AVG63QW4.js";import"./chunk-YLT6ZRGE.js";import"./chunk-OB65JCC3.js";import{a as y}from"./chunk-OYIB3B2O.js";import"./chunk-CKHT4PIF.js";import"./chunk-JMNZU6WB.js";import"./chunk-WXD7TULU.js";import"./chunk-JQHLKZPQ.js";import"./chunk-ZZBUS7GI.js";import{c as U}from"./chunk-PMG6IXOR.js";import{a as u}from"./chunk-BD5XO4WL.js";import"./chunk-7U7FORYL.js";import"./chunk-2IJ4E4D3.js";import"./chunk-XJ2EVWVX.js";import"./chunk-DD6IGY5O.js";import"./chunk-JMM35KIH.js";import"./chunk-5E7YC7OF.js";import"./chunk-LYGOKEAJ.js";import{T as L,U as B}from"./chunk-NS5EW6UN.js";import"./chunk-VUBIYSGX.js";import"./chunk-PNOOVDMP.js";import"./chunk-FHFRBSOO.js";import"./chunk-DU4RS7AX.js";import{a as T}from"./chunk-5C7AUJM4.js";import"./chunk-FLXVXXZH.js";import"./chunk-XBUPORYF.js";import"./chunk-YVLQLIW6.js";import"./chunk-HBXZ3GPM.js";import"./chunk-6C7RJCTT.js";import"./chunk-N6PI3XTA.js";import"./chunk-7DW2ZPOD.js";import"./chunk-SI5WJURV.js";import"./chunk-MT4YWUUK.js";import"./chunk-IPVHRCDK.js";import"./chunk-JW2AVC2H.js";import"./chunk-AKOAGCJX.js";import"./chunk-ARDRUD4P.js";import{h as F}from"./chunk-WYX7GFOD.js";import"./chunk-G6PA2JD3.js";import"./chunk-N2N44VBE.js";import"./chunk-ZDJRNLYZ.js";import"./chunk-RV5WZKGQ.js";import{g as Y}from"./chunk-MJSLAJV6.js";import{k as R}from"./chunk-KC2XLVFC.js";import"./chunk-MJDO2VHF.js";import"./chunk-TFTCL6XD.js";import"./chunk-TBQGFYU3.js";import"./chunk-L5AZICLM.js";import"./chunk-WLEQHCLB.js";import"./chunk-QF42JCDG.js";import"./chunk-DRCTWZQB.js";import"./chunk-KGMP5AO5.js";import"./chunk-EAE2NUFS.js";import"./chunk-OLICTWCW.js";import"./chunk-6M37VPK2.js";import"./chunk-WOJGOC63.js";import"./chunk-3F7OC7N7.js";import"./chunk-OKGWI7CU.js";import"./chunk-EPDR6VAQ.js";import"./chunk-RFTC6RNT.js";import"./chunk-I6UBKGB5.js";import"./chunk-ZIR6OOXX.js";import"./chunk-KYVX6VSI.js";import"./chunk-WN3TRBGI.js";import{c as r}from"./chunk-3FMJDUGT.js";import"./chunk-2O5TMJZM.js";import"./chunk-UI4IZNSB.js";import"./chunk-FCGPU67F.js";import"./chunk-FXRKHQFW.js";import"./chunk-YTHL7242.js";import"./chunk-XOHZCMW2.js";import"./chunk-EQ34WRCJ.js";import{s as n,w as N}from"./chunk-DSNMNSMD.js";import"./chunk-U2IAA473.js";import{a as ae}from"./chunk-DOSBJ3L3.js";import"./chunk-DNGRHKLV.js";import"./chunk-3O2IEAHF.js";import{I as v,_ as M,q as S,r as G,y as I}from"./chunk-URGJ6D4O.js";import"./chunk-WC6GCIBJ.js";import"./chunk-JRC3ZUKA.js";import"./chunk-4U5VOZ7H.js";import"./chunk-FVHZWNUE.js";import"./chunk-IQUFNLVG.js";import{C as p,w as H}from"./chunk-XYWWXNVK.js";import"./chunk-VYWNZTTM.js";import"./chunk-5CHTOVVG.js";import{a as re}from"./chunk-FB3ILH2L.js";import{b as ie}from"./chunk-FLSAETOH.js";import"./chunk-TGW66MRK.js";import"./chunk-LRIABBHT.js";import"./chunk-NEASQB35.js";import"./chunk-4C5HF6J2.js";import"./chunk-U6W3TK77.js";import"./chunk-WJI4CIAQ.js";import"./chunk-GTDBOF5Q.js";import"./chunk-EI7BJC6V.js";import"./chunk-B3EOGJ3Y.js";import"./chunk-YL2RBVBZ.js";import"./chunk-4HAPQ4J7.js";import"./chunk-F5YUOHHL.js";import"./chunk-LWG66QL2.js";import"./chunk-26XSB24L.js";import"./chunk-IFKSF5TW.js";import"./chunk-PDIVTGDM.js";import"./chunk-UL6IEE2K.js";import"./chunk-4ARIYUS3.js";import{f,o as m,q as b}from"./chunk-UWURTNRY.js";m();b();var e=f(ie()),j=f(ae());var _=f(re());m();b();var o={"retina-border-basic":"_retina-border-basic_1b1w3_1",retinaBorderBasic:"_retina-border-basic_1b1w3_1","report-page":"_report-page_1b1w3_29",reportPage:"_report-page_1b1w3_29",content:"_content_1b1w3_34",label:"_label_1b1w3_40","coin-info":"_coin-info_1b1w3_46",coinInfo:"_coin-info_1b1w3_46","coin-header":"_coin-header_1b1w3_80",coinHeader:"_coin-header_1b1w3_80","coin-left":"_coin-left_1b1w3_84",coinLeft:"_coin-left_1b1w3_84","coin-icon":"_coin-icon_1b1w3_90",coinIcon:"_coin-icon_1b1w3_90","coin-symbol":"_coin-symbol_1b1w3_96",coinSymbol:"_coin-symbol_1b1w3_96","chain-tag":"_chain-tag_1b1w3_104",chainTag:"_chain-tag_1b1w3_104","chain-name":"_chain-name_1b1w3_107",chainName:"_chain-name_1b1w3_107","coin-right":"_coin-right_1b1w3_114",coinRight:"_coin-right_1b1w3_114","contract-address":"_contract-address_1b1w3_117",contractAddress:"_contract-address_1b1w3_117","reasons-section":"_reasons-section_1b1w3_123",reasonsSection:"_reasons-section_1b1w3_123",loading:"_loading_1b1w3_126","section-title":"_section-title_1b1w3_133",sectionTitle:"_section-title_1b1w3_133","reasons-list":"_reasons-list_1b1w3_139",reasonsList:"_reasons-list_1b1w3_139","reason-item":"_reason-item_1b1w3_143",reasonItem:"_reason-item_1b1w3_143","reason-label":"_reason-label_1b1w3_156",reasonLabel:"_reason-label_1b1w3_156","other-reason-section":"_other-reason-section_1b1w3_163",otherReasonSection:"_other-reason-section_1b1w3_163","submit-section":"_submit-section_1b1w3_167",submitSection:"_submit-section_1b1w3_167"};var W=300,X=5,le=1;function ce(){let C=(0,j.useHistory)(),E=K(),z=E.get("coinId"),x=E.get("address"),O=F(),{coin:s}=D(Number(z),!0),[Q,P]=(0,e.useState)(!1),{data:Z=[],loading:J,run:V}=R(async()=>{P(!1);let[t,i]=await N(B());return!t&&Array.isArray(i?.data?.tokenReasons)?i.data.tokenReasons||[]:(P(!0),[])}),[a,$]=(0,e.useState)([]),[l,k]=(0,e.useState)(""),[g,A]=(0,e.useState)(!1),c=a.includes(X),h=a.length>0&&(!c||l.length>0),ee=(0,e.useCallback)((t,i)=>{$(d=>i?[...d,t]:(t===X&&k(""),d.filter(w=>w!==t)))},[]),oe=(0,e.useCallback)(t=>{t.length<=W&&k(t)},[]),te=(0,e.useCallback)(async()=>{if(!h||g)return;A(!0);let t={reportedAddress:s?.address,chainIndex:s?.chainId,reportType:le,reasonTypes:a,address:x,comment:c?l:""},i={walletSignParams:{needXClientSign:!0,walletId:O}},[d,w]=await N(L(t,i));if(!d&&w?.data?.reportStatus){v.success({title:e.default.createElement("span",{"data-testid":u.REPORT_COIN_PAGE.REPORT_COIN_SUCCESS_TOAST},n("wallet_extension_top_toast_report_success"))});let ne=y.get(T.reportedCoins)||[];y.set(T.reportedCoins,ne.concat(s?.coinId)),C.goBack()}else v.error(n("wallet_extension_assets_notification_desc_report_fail"));A(!1)},[h,g,s?.address,s?.chainId,s?.coinId,a,x,c,l,O,C]),se=()=>J?e.default.createElement("div",{className:o.loading},e.default.createElement(H.Circle,null)):Q?e.default.createElement("div",{className:o.loading},e.default.createElement(I.State,{type:I.State.TYPE.noNetwork,title:n("wallet_extension_general_empty_title_loading_failed"),description:n("wallet_extension_general_empty_subtitle_data_retrive_fail"),onButtonClick:()=>{V()},buttonText:n("wallet_extension_general_empty_btn_reload")})):e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{className:o.sectionTitle},n("wallet_extension_assets_chips_label_report_issue")),e.default.createElement("div",{className:o.reasonsList},Z.map(t=>e.default.createElement("div",{"data-testid":u.REPORT_COIN_PAGE.REPORT_COIN_REASON_ITEM,key:t.reasonType,className:o.reasonItem,onClick:()=>{let i=a.includes(t.reasonType);ee(t.reasonType,!i)}},e.default.createElement("div",{className:(0,_.default)("ellipsis",o.reasonLabel)},t.content),e.default.createElement(G,{circle:!0,checked:a.includes(t.reasonType)})))),c&&e.default.createElement("div",{className:o.otherReasonSection},e.default.createElement(S.TextArea,{style:{height:124},showCount:!0,cleanable:!0,errorType:S.TIP_TYPE.always,value:l,onChange:t=>oe(t?.target?.value),placeholder:n("wallet_extension_assets_textarea_placeholder_enter_issue",{},{useBr:!1}),maxLength:W})));return e.default.createElement(r.Container,{loading:!1,className:o.reportPage},e.default.createElement(q,{bordered:!1,title:n("wallet_extension_assets_header_report_token"),className:o.navigator,closeable:!1}),e.default.createElement("div",{className:o.content},e.default.createElement("span",{className:o.label},n("wallet_extension_assets_cell_label_token")),s&&e.default.createElement("div",{className:o.coinInfo},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,justify:"space-between",className:o.coinHeader},e.default.createElement(r.FlexBox,{align:r.ALIGN.center,className:o.coinLeft},e.default.createElement(U,{src:s?.image,text:s?.symbol,className:o.coinIcon}),e.default.createElement("div",{className:(0,_.default)(o.coinSymbol,"ellipsis")},s?.symbol),e.default.createElement(M,{className:(0,_.default)(o.chainTag)},e.default.createElement("div",{className:(0,_.default)(o.chainName,"ellipsis")},s?.chainName))),e.default.createElement("div",{className:o.coinRight},s?.address&&e.default.createElement("div",{className:o.contractAddress},Y(s?.address))))),e.default.createElement("div",{className:o.reasonsSection},se()),e.default.createElement("div",{className:o.submitSection},e.default.createElement(p,{"data-testid":u.REPORT_COIN_PAGE.REPORT_COIN_SUBMIT_BUTTON,type:p.TYPE.highlight,size:p.SIZE.lg,loading:g,disabled:!h,onClick:te,block:!0},n("wallet_extension_btn_general_confirm")))))}export{ce as default};
//# sourceMappingURL=ReportPage-6ZHTXIX3.js.map
