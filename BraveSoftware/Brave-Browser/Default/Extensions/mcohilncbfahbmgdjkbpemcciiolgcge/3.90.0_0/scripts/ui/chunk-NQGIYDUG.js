import{a as He}from"./chunk-MT4YWUUK.js";import{d as We}from"./chunk-KC2XLVFC.js";import{c as Ze}from"./chunk-2O5TMJZM.js";import{H as Fe}from"./chunk-UI4IZNSB.js";import{c as Be}from"./chunk-XOHZCMW2.js";import{i as Ue}from"./chunk-DSNMNSMD.js";import{b as tn}from"./chunk-FLSAETOH.js";import{c as W,f as Ae,n as process,o as m,q as w}from"./chunk-UWURTNRY.js";var ae=W(U=>{m();w();var nn=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function rn(t,n){return Object.prototype.hasOwnProperty.call(t,n)}U.assign=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var e=n.shift();if(!!e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(var r in e)rn(e,r)&&(t[r]=e[r])}}return t};U.shrinkBuf=function(t,n){return t.length===n?t:t.subarray?t.subarray(0,n):(t.length=n,t)};var an={arraySet:function(t,n,e,r,f){if(n.subarray&&t.subarray){t.set(n.subarray(e,e+r),f);return}for(var i=0;i<r;i++)t[f+i]=n[e+i]},flattenChunks:function(t){var n,e,r,f,i,c;for(r=0,n=0,e=t.length;n<e;n++)r+=t[n].length;for(c=new Uint8Array(r),f=0,n=0,e=t.length;n<e;n++)i=t[n],c.set(i,f),f+=i.length;return c}},on={arraySet:function(t,n,e,r,f){for(var i=0;i<r;i++)t[f+i]=n[e+i]},flattenChunks:function(t){return[].concat.apply([],t)}};U.setTyped=function(t){t?(U.Buf8=Uint8Array,U.Buf16=Uint16Array,U.Buf32=Int32Array,U.assign(U,an)):(U.Buf8=Array,U.Buf16=Array,U.Buf32=Array,U.assign(U,on))};U.setTyped(nn)});var Me=W((Kn,Ge)=>{m();w();function sn(t,n,e,r){for(var f=t&65535|0,i=t>>>16&65535|0,c=0;e!==0;){c=e>2e3?2e3:e,e-=c;do f=f+n[r++]|0,i=i+f|0;while(--c);f%=65521,i%=65521}return f|i<<16|0}Ge.exports=sn});var ze=W((Xn,Ke)=>{m();w();function fn(){for(var t,n=[],e=0;e<256;e++){t=e;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n}var cn=fn();function ln(t,n,e,r){var f=cn,i=r+e;t^=-1;for(var c=r;c<i;c++)t=t>>>8^f[(t^n[c])&255];return t^-1}Ke.exports=ln});var Xe=W(($n,je)=>{m();w();var le=30,un=12;je.exports=function(n,e){var r,f,i,c,s,v,o,a,E,h,l,b,_,S,g,I,N,p,u,R,C,x,T,y,k;r=n.state,f=n.next_in,y=n.input,i=f+(n.avail_in-5),c=n.next_out,k=n.output,s=c-(e-n.avail_out),v=c+(n.avail_out-257),o=r.dmax,a=r.wsize,E=r.whave,h=r.wnext,l=r.window,b=r.hold,_=r.bits,S=r.lencode,g=r.distcode,I=(1<<r.lenbits)-1,N=(1<<r.distbits)-1;e:do{_<15&&(b+=y[f++]<<_,_+=8,b+=y[f++]<<_,_+=8),p=S[b&I];t:for(;;){if(u=p>>>24,b>>>=u,_-=u,u=p>>>16&255,u===0)k[c++]=p&65535;else if(u&16){R=p&65535,u&=15,u&&(_<u&&(b+=y[f++]<<_,_+=8),R+=b&(1<<u)-1,b>>>=u,_-=u),_<15&&(b+=y[f++]<<_,_+=8,b+=y[f++]<<_,_+=8),p=g[b&N];n:for(;;){if(u=p>>>24,b>>>=u,_-=u,u=p>>>16&255,u&16){if(C=p&65535,u&=15,_<u&&(b+=y[f++]<<_,_+=8,_<u&&(b+=y[f++]<<_,_+=8)),C+=b&(1<<u)-1,C>o){n.msg="invalid distance too far back",r.mode=le;break e}if(b>>>=u,_-=u,u=c-s,C>u){if(u=C-u,u>E&&r.sane){n.msg="invalid distance too far back",r.mode=le;break e}if(x=0,T=l,h===0){if(x+=a-u,u<R){R-=u;do k[c++]=l[x++];while(--u);x=c-C,T=k}}else if(h<u){if(x+=a+h-u,u-=h,u<R){R-=u;do k[c++]=l[x++];while(--u);if(x=0,h<R){u=h,R-=u;do k[c++]=l[x++];while(--u);x=c-C,T=k}}}else if(x+=h-u,u<R){R-=u;do k[c++]=l[x++];while(--u);x=c-C,T=k}for(;R>2;)k[c++]=T[x++],k[c++]=T[x++],k[c++]=T[x++],R-=3;R&&(k[c++]=T[x++],R>1&&(k[c++]=T[x++]))}else{x=c-C;do k[c++]=k[x++],k[c++]=k[x++],k[c++]=k[x++],R-=3;while(R>2);R&&(k[c++]=k[x++],R>1&&(k[c++]=k[x++]))}}else if((u&64)===0){p=g[(p&65535)+(b&(1<<u)-1)];continue n}else{n.msg="invalid distance code",r.mode=le;break e}break}}else if((u&64)===0){p=S[(p&65535)+(b&(1<<u)-1)];continue t}else if(u&32){r.mode=un;break e}else{n.msg="invalid literal/length code",r.mode=le;break e}break}}while(f<i&&c<v);R=_>>3,f-=R,_-=R<<3,b&=(1<<_)-1,n.next_in=f,n.next_out=c,n.avail_in=f<i?5+(i-f):5-(f-i),n.avail_out=c<v?257+(v-c):257-(c-v),r.hold=b,r.bits=_}});var et=W((Qn,Qe)=>{m();w();var Ye=ae(),ee=15,Je=852,$e=592,Ve=0,we=1,qe=2,dn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],hn=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],vn=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],gn=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Qe.exports=function(n,e,r,f,i,c,s,v){var o=v.bits,a=0,E=0,h=0,l=0,b=0,_=0,S=0,g=0,I=0,N=0,p,u,R,C,x,T=null,y=0,k,Z=new Ye.Buf16(ee+1),d=new Ye.Buf16(ee+1),A=null,H=0,J,$,Q;for(a=0;a<=ee;a++)Z[a]=0;for(E=0;E<f;E++)Z[e[r+E]]++;for(b=o,l=ee;l>=1&&Z[l]===0;l--);if(b>l&&(b=l),l===0)return i[c++]=1<<24|64<<16|0,i[c++]=1<<24|64<<16|0,v.bits=1,0;for(h=1;h<l&&Z[h]===0;h++);for(b<h&&(b=h),g=1,a=1;a<=ee;a++)if(g<<=1,g-=Z[a],g<0)return-1;if(g>0&&(n===Ve||l!==1))return-1;for(d[1]=0,a=1;a<ee;a++)d[a+1]=d[a]+Z[a];for(E=0;E<f;E++)e[r+E]!==0&&(s[d[e[r+E]]++]=E);if(n===Ve?(T=A=s,k=19):n===we?(T=dn,y-=257,A=hn,H-=257,k=256):(T=vn,A=gn,k=-1),N=0,E=0,a=h,x=c,_=b,S=0,R=-1,I=1<<b,C=I-1,n===we&&I>Je||n===qe&&I>$e)return 1;for(;;){J=a-S,s[E]<k?($=0,Q=s[E]):s[E]>k?($=A[H+s[E]],Q=T[y+s[E]]):($=32+64,Q=0),p=1<<a-S,u=1<<_,h=u;do u-=p,i[x+(N>>S)+u]=J<<24|$<<16|Q|0;while(u!==0);for(p=1<<a-1;N&p;)p>>=1;if(p!==0?(N&=p-1,N+=p):N=0,E++,--Z[a]===0){if(a===l)break;a=e[r+s[E]]}if(a>b&&(N&C)!==R){for(S===0&&(S=b),x+=h,_=a-S,g=1<<_;_+S<l&&(g-=Z[_+S],!(g<=0));)_++,g<<=1;if(I+=1<<_,n===we&&I>Je||n===qe&&I>$e)return 1;R=N&C,i[R]=b<<24|_<<16|x-c|0}}return N!==0&&(i[x+N]=a-S<<24|64<<16|0),v.bits=b,0}});var At=W(M=>{m();w();var F=ae(),Te=Me(),K=ze(),_n=Xe(),oe=et(),xn=0,Tt=1,Rt=2,tt=4,kn=5,ue=6,V=0,mn=1,wn=2,G=-2,Nt=-3,Re=-4,bn=-5,nt=8,Ot=1,it=2,rt=3,at=4,ot=5,st=6,ft=7,ct=8,lt=9,ut=10,ve=11,j=12,be=13,dt=14,Se=15,ht=16,vt=17,gt=18,_t=19,de=20,he=21,xt=22,kt=23,mt=24,wt=25,bt=26,pe=27,St=28,pt=29,D=30,Ne=31,Sn=32,pn=852,Cn=592,En=15,Tn=En;function Ct(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function Rn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new F.Buf16(320),this.work=new F.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function It(t){var n;return!t||!t.state?G:(n=t.state,t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=n.wrap&1),n.mode=Ot,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new F.Buf32(pn),n.distcode=n.distdyn=new F.Buf32(Cn),n.sane=1,n.back=-1,V)}function Dt(t){var n;return!t||!t.state?G:(n=t.state,n.wsize=0,n.whave=0,n.wnext=0,It(t))}function yt(t,n){var e,r;return!t||!t.state||(r=t.state,n<0?(e=0,n=-n):(e=(n>>4)+1,n<48&&(n&=15)),n&&(n<8||n>15))?G:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=e,r.wbits=n,Dt(t))}function Pt(t,n){var e,r;return t?(r=new Rn,t.state=r,r.window=null,e=yt(t,n),e!==V&&(t.state=null),e):G}function Nn(t){return Pt(t,Tn)}var Et=!0,Ce,Ee;function On(t){if(Et){var n;for(Ce=new F.Buf32(512),Ee=new F.Buf32(32),n=0;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(oe(Tt,t.lens,0,288,Ce,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;oe(Rt,t.lens,0,32,Ee,0,t.work,{bits:5}),Et=!1}t.lencode=Ce,t.lenbits=9,t.distcode=Ee,t.distbits=5}function Lt(t,n,e,r){var f,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new F.Buf8(i.wsize)),r>=i.wsize?(F.arraySet(i.window,n,e-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(f=i.wsize-i.wnext,f>r&&(f=r),F.arraySet(i.window,n,e-r,f,i.wnext),r-=f,r?(F.arraySet(i.window,n,e-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=f,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=f))),0}function In(t,n){var e,r,f,i,c,s,v,o,a,E,h,l,b,_,S=0,g,I,N,p,u,R,C,x,T=new F.Buf8(4),y,k,Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return G;e=t.state,e.mode===j&&(e.mode=be),c=t.next_out,f=t.output,v=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,o=e.hold,a=e.bits,E=s,h=v,x=V;e:for(;;)switch(e.mode){case Ot:if(e.wrap===0){e.mode=be;break}for(;a<16;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(e.wrap&2&&o===35615){e.check=0,T[0]=o&255,T[1]=o>>>8&255,e.check=K(e.check,T,2,0),o=0,a=0,e.mode=it;break}if(e.flags=0,e.head&&(e.head.done=!1),!(e.wrap&1)||(((o&255)<<8)+(o>>8))%31){t.msg="incorrect header check",e.mode=D;break}if((o&15)!==nt){t.msg="unknown compression method",e.mode=D;break}if(o>>>=4,a-=4,C=(o&15)+8,e.wbits===0)e.wbits=C;else if(C>e.wbits){t.msg="invalid window size",e.mode=D;break}e.dmax=1<<C,t.adler=e.check=1,e.mode=o&512?ut:j,o=0,a=0;break;case it:for(;a<16;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(e.flags=o,(e.flags&255)!==nt){t.msg="unknown compression method",e.mode=D;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=D;break}e.head&&(e.head.text=o>>8&1),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=K(e.check,T,2,0)),o=0,a=0,e.mode=rt;case rt:for(;a<32;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.head&&(e.head.time=o),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,T[2]=o>>>16&255,T[3]=o>>>24&255,e.check=K(e.check,T,4,0)),o=0,a=0,e.mode=at;case at:for(;a<16;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.head&&(e.head.xflags=o&255,e.head.os=o>>8),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=K(e.check,T,2,0)),o=0,a=0,e.mode=ot;case ot:if(e.flags&1024){for(;a<16;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.length=o,e.head&&(e.head.extra_len=o),e.flags&512&&(T[0]=o&255,T[1]=o>>>8&255,e.check=K(e.check,T,2,0)),o=0,a=0}else e.head&&(e.head.extra=null);e.mode=st;case st:if(e.flags&1024&&(l=e.length,l>s&&(l=s),l&&(e.head&&(C=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),F.arraySet(e.head.extra,r,i,l,C)),e.flags&512&&(e.check=K(e.check,r,l,i)),s-=l,i+=l,e.length-=l),e.length))break e;e.length=0,e.mode=ft;case ft:if(e.flags&2048){if(s===0)break e;l=0;do C=r[i+l++],e.head&&C&&e.length<65536&&(e.head.name+=String.fromCharCode(C));while(C&&l<s);if(e.flags&512&&(e.check=K(e.check,r,l,i)),s-=l,i+=l,C)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=ct;case ct:if(e.flags&4096){if(s===0)break e;l=0;do C=r[i+l++],e.head&&C&&e.length<65536&&(e.head.comment+=String.fromCharCode(C));while(C&&l<s);if(e.flags&512&&(e.check=K(e.check,r,l,i)),s-=l,i+=l,C)break e}else e.head&&(e.head.comment=null);e.mode=lt;case lt:if(e.flags&512){for(;a<16;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(o!==(e.check&65535)){t.msg="header crc mismatch",e.mode=D;break}o=0,a=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=j;break;case ut:for(;a<32;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}t.adler=e.check=Ct(o),o=0,a=0,e.mode=ve;case ve:if(e.havedict===0)return t.next_out=c,t.avail_out=v,t.next_in=i,t.avail_in=s,e.hold=o,e.bits=a,wn;t.adler=e.check=1,e.mode=j;case j:if(n===kn||n===ue)break e;case be:if(e.last){o>>>=a&7,a-=a&7,e.mode=pe;break}for(;a<3;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}switch(e.last=o&1,o>>>=1,a-=1,o&3){case 0:e.mode=dt;break;case 1:if(On(e),e.mode=de,n===ue){o>>>=2,a-=2;break e}break;case 2:e.mode=vt;break;case 3:t.msg="invalid block type",e.mode=D}o>>>=2,a-=2;break;case dt:for(o>>>=a&7,a-=a&7;a<32;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if((o&65535)!==(o>>>16^65535)){t.msg="invalid stored block lengths",e.mode=D;break}if(e.length=o&65535,o=0,a=0,e.mode=Se,n===ue)break e;case Se:e.mode=ht;case ht:if(l=e.length,l){if(l>s&&(l=s),l>v&&(l=v),l===0)break e;F.arraySet(f,r,i,l,c),s-=l,i+=l,v-=l,c+=l,e.length-=l;break}e.mode=j;break;case vt:for(;a<14;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(e.nlen=(o&31)+257,o>>>=5,a-=5,e.ndist=(o&31)+1,o>>>=5,a-=5,e.ncode=(o&15)+4,o>>>=4,a-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=D;break}e.have=0,e.mode=gt;case gt:for(;e.have<e.ncode;){for(;a<3;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.lens[Z[e.have++]]=o&7,o>>>=3,a-=3}for(;e.have<19;)e.lens[Z[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,y={bits:e.lenbits},x=oe(xn,e.lens,0,19,e.lencode,0,e.work,y),e.lenbits=y.bits,x){t.msg="invalid code lengths set",e.mode=D;break}e.have=0,e.mode=_t;case _t:for(;e.have<e.nlen+e.ndist;){for(;S=e.lencode[o&(1<<e.lenbits)-1],g=S>>>24,I=S>>>16&255,N=S&65535,!(g<=a);){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(N<16)o>>>=g,a-=g,e.lens[e.have++]=N;else{if(N===16){for(k=g+2;a<k;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(o>>>=g,a-=g,e.have===0){t.msg="invalid bit length repeat",e.mode=D;break}C=e.lens[e.have-1],l=3+(o&3),o>>>=2,a-=2}else if(N===17){for(k=g+3;a<k;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}o>>>=g,a-=g,C=0,l=3+(o&7),o>>>=3,a-=3}else{for(k=g+7;a<k;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}o>>>=g,a-=g,C=0,l=11+(o&127),o>>>=7,a-=7}if(e.have+l>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=D;break}for(;l--;)e.lens[e.have++]=C}}if(e.mode===D)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=D;break}if(e.lenbits=9,y={bits:e.lenbits},x=oe(Tt,e.lens,0,e.nlen,e.lencode,0,e.work,y),e.lenbits=y.bits,x){t.msg="invalid literal/lengths set",e.mode=D;break}if(e.distbits=6,e.distcode=e.distdyn,y={bits:e.distbits},x=oe(Rt,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,y),e.distbits=y.bits,x){t.msg="invalid distances set",e.mode=D;break}if(e.mode=de,n===ue)break e;case de:e.mode=he;case he:if(s>=6&&v>=258){t.next_out=c,t.avail_out=v,t.next_in=i,t.avail_in=s,e.hold=o,e.bits=a,_n(t,h),c=t.next_out,f=t.output,v=t.avail_out,i=t.next_in,r=t.input,s=t.avail_in,o=e.hold,a=e.bits,e.mode===j&&(e.back=-1);break}for(e.back=0;S=e.lencode[o&(1<<e.lenbits)-1],g=S>>>24,I=S>>>16&255,N=S&65535,!(g<=a);){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(I&&(I&240)===0){for(p=g,u=I,R=N;S=e.lencode[R+((o&(1<<p+u)-1)>>p)],g=S>>>24,I=S>>>16&255,N=S&65535,!(p+g<=a);){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}o>>>=p,a-=p,e.back+=p}if(o>>>=g,a-=g,e.back+=g,e.length=N,I===0){e.mode=bt;break}if(I&32){e.back=-1,e.mode=j;break}if(I&64){t.msg="invalid literal/length code",e.mode=D;break}e.extra=I&15,e.mode=xt;case xt:if(e.extra){for(k=e.extra;a<k;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.length+=o&(1<<e.extra)-1,o>>>=e.extra,a-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=kt;case kt:for(;S=e.distcode[o&(1<<e.distbits)-1],g=S>>>24,I=S>>>16&255,N=S&65535,!(g<=a);){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if((I&240)===0){for(p=g,u=I,R=N;S=e.distcode[R+((o&(1<<p+u)-1)>>p)],g=S>>>24,I=S>>>16&255,N=S&65535,!(p+g<=a);){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}o>>>=p,a-=p,e.back+=p}if(o>>>=g,a-=g,e.back+=g,I&64){t.msg="invalid distance code",e.mode=D;break}e.offset=N,e.extra=I&15,e.mode=mt;case mt:if(e.extra){for(k=e.extra;a<k;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}e.offset+=o&(1<<e.extra)-1,o>>>=e.extra,a-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=D;break}e.mode=wt;case wt:if(v===0)break e;if(l=h-v,e.offset>l){if(l=e.offset-l,l>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=D;break}l>e.wnext?(l-=e.wnext,b=e.wsize-l):b=e.wnext-l,l>e.length&&(l=e.length),_=e.window}else _=f,b=c-e.offset,l=e.length;l>v&&(l=v),v-=l,e.length-=l;do f[c++]=_[b++];while(--l);e.length===0&&(e.mode=he);break;case bt:if(v===0)break e;f[c++]=e.length,v--,e.mode=he;break;case pe:if(e.wrap){for(;a<32;){if(s===0)break e;s--,o|=r[i++]<<a,a+=8}if(h-=v,t.total_out+=h,e.total+=h,h&&(t.adler=e.check=e.flags?K(e.check,f,h,c-h):Te(e.check,f,h,c-h)),h=v,(e.flags?o:Ct(o))!==e.check){t.msg="incorrect data check",e.mode=D;break}o=0,a=0}e.mode=St;case St:if(e.wrap&&e.flags){for(;a<32;){if(s===0)break e;s--,o+=r[i++]<<a,a+=8}if(o!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=D;break}o=0,a=0}e.mode=pt;case pt:x=mn;break e;case D:x=Nt;break e;case Ne:return Re;case Sn:default:return G}return t.next_out=c,t.avail_out=v,t.next_in=i,t.avail_in=s,e.hold=o,e.bits=a,(e.wsize||h!==t.avail_out&&e.mode<D&&(e.mode<pe||n!==tt))&&Lt(t,t.output,t.next_out,h-t.avail_out)?(e.mode=Ne,Re):(E-=t.avail_in,h-=t.avail_out,t.total_in+=E,t.total_out+=h,e.total+=h,e.wrap&&h&&(t.adler=e.check=e.flags?K(e.check,f,h,t.next_out-h):Te(e.check,f,h,t.next_out-h)),t.data_type=e.bits+(e.last?64:0)+(e.mode===j?128:0)+(e.mode===de||e.mode===Se?256:0),(E===0&&h===0||n===tt)&&x===V&&(x=bn),x)}function Dn(t){if(!t||!t.state)return G;var n=t.state;return n.window&&(n.window=null),t.state=null,V}function yn(t,n){var e;return!t||!t.state||(e=t.state,(e.wrap&2)===0)?G:(e.head=n,n.done=!1,V)}function Pn(t,n){var e=n.length,r,f,i;return!t||!t.state||(r=t.state,r.wrap!==0&&r.mode!==ve)?G:r.mode===ve&&(f=1,f=Te(f,n,e,0),f!==r.check)?Nt:(i=Lt(t,n,e,e),i?(r.mode=Ne,Re):(r.havedict=1,V))}M.inflateReset=Dt;M.inflateReset2=yt;M.inflateResetKeep=It;M.inflateInit=Nn;M.inflateInit2=Pt;M.inflate=In;M.inflateEnd=Dn;M.inflateGetHeader=yn;M.inflateSetDictionary=Pn;M.inflateInfo="pako inflate (from Nodeca project)"});var Ft=W(te=>{m();w();var ge=ae(),Bt=!0,Ut=!0;try{String.fromCharCode.apply(null,[0])}catch{Bt=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ut=!1}var se=new ge.Buf8(256);for(X=0;X<256;X++)se[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;var X;se[254]=se[254]=1;te.string2buf=function(t){var n,e,r,f,i,c=t.length,s=0;for(f=0;f<c;f++)e=t.charCodeAt(f),(e&64512)===55296&&f+1<c&&(r=t.charCodeAt(f+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),f++)),s+=e<128?1:e<2048?2:e<65536?3:4;for(n=new ge.Buf8(s),i=0,f=0;i<s;f++)e=t.charCodeAt(f),(e&64512)===55296&&f+1<c&&(r=t.charCodeAt(f+1),(r&64512)===56320&&(e=65536+(e-55296<<10)+(r-56320),f++)),e<128?n[i++]=e:e<2048?(n[i++]=192|e>>>6,n[i++]=128|e&63):e<65536?(n[i++]=224|e>>>12,n[i++]=128|e>>>6&63,n[i++]=128|e&63):(n[i++]=240|e>>>18,n[i++]=128|e>>>12&63,n[i++]=128|e>>>6&63,n[i++]=128|e&63);return n};function Zt(t,n){if(n<65534&&(t.subarray&&Ut||!t.subarray&&Bt))return String.fromCharCode.apply(null,ge.shrinkBuf(t,n));for(var e="",r=0;r<n;r++)e+=String.fromCharCode(t[r]);return e}te.buf2binstring=function(t){return Zt(t,t.length)};te.binstring2buf=function(t){for(var n=new ge.Buf8(t.length),e=0,r=n.length;e<r;e++)n[e]=t.charCodeAt(e);return n};te.buf2string=function(t,n){var e,r,f,i,c=n||t.length,s=new Array(c*2);for(r=0,e=0;e<c;){if(f=t[e++],f<128){s[r++]=f;continue}if(i=se[f],i>4){s[r++]=65533,e+=i-1;continue}for(f&=i===2?31:i===3?15:7;i>1&&e<c;)f=f<<6|t[e++]&63,i--;if(i>1){s[r++]=65533;continue}f<65536?s[r++]=f:(f-=65536,s[r++]=55296|f>>10&1023,s[r++]=56320|f&1023)}return Zt(s,r)};te.utf8border=function(t,n){var e;for(n=n||t.length,n>t.length&&(n=t.length),e=n-1;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?n:e+se[t[e]]>n?e:n}});var Wt=W((fi,Ht)=>{m();w();Ht.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Mt=W((ui,Gt)=>{m();w();Gt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var zt=W((vi,Kt)=>{m();w();function Ln(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Kt.exports=Ln});var Xt=W((xi,jt)=>{m();w();function An(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}jt.exports=An});var Jt=W(ce=>{m();w();var ne=At(),fe=ae(),_e=Ft(),P=Wt(),Oe=Mt(),Bn=zt(),Un=Xt(),Yt=Object.prototype.toString;function q(t){if(!(this instanceof q))return new q(t);this.options=fe.assign({chunkSize:16384,windowBits:0,to:""},t||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(t&&t.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Bn,this.strm.avail_out=0;var e=ne.inflateInit2(this.strm,n.windowBits);if(e!==P.Z_OK)throw new Error(Oe[e]);if(this.header=new Un,ne.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=_e.string2buf(n.dictionary):Yt.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=ne.inflateSetDictionary(this.strm,n.dictionary),e!==P.Z_OK)))throw new Error(Oe[e])}q.prototype.push=function(t,n){var e=this.strm,r=this.options.chunkSize,f=this.options.dictionary,i,c,s,v,o,a=!1;if(this.ended)return!1;c=n===~~n?n:n===!0?P.Z_FINISH:P.Z_NO_FLUSH,typeof t=="string"?e.input=_e.binstring2buf(t):Yt.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;do{if(e.avail_out===0&&(e.output=new fe.Buf8(r),e.next_out=0,e.avail_out=r),i=ne.inflate(e,P.Z_NO_FLUSH),i===P.Z_NEED_DICT&&f&&(i=ne.inflateSetDictionary(this.strm,f)),i===P.Z_BUF_ERROR&&a===!0&&(i=P.Z_OK,a=!1),i!==P.Z_STREAM_END&&i!==P.Z_OK)return this.onEnd(i),this.ended=!0,!1;e.next_out&&(e.avail_out===0||i===P.Z_STREAM_END||e.avail_in===0&&(c===P.Z_FINISH||c===P.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=_e.utf8border(e.output,e.next_out),v=e.next_out-s,o=_e.buf2string(e.output,s),e.next_out=v,e.avail_out=r-v,v&&fe.arraySet(e.output,e.output,s,v,0),this.onData(o)):this.onData(fe.shrinkBuf(e.output,e.next_out))),e.avail_in===0&&e.avail_out===0&&(a=!0)}while((e.avail_in>0||e.avail_out===0)&&i!==P.Z_STREAM_END);return i===P.Z_STREAM_END&&(c=P.Z_FINISH),c===P.Z_FINISH?(i=ne.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===P.Z_OK):(c===P.Z_SYNC_FLUSH&&(this.onEnd(P.Z_OK),e.avail_out=0),!0)};q.prototype.onData=function(t){this.chunks.push(t)};q.prototype.onEnd=function(t){t===P.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fe.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ie(t,n){var e=new q(n);if(e.push(t,!0),e.err)throw e.msg||Oe[e.err];return e.result}function Zn(t,n){return n=n||{},n.raw=!0,Ie(t,n)}ce.Inflate=q;ce.inflate=Ie;ce.inflateRaw=Zn;ce.ungzip=Ie});m();w();var z=Ae(tn());m();w();m();w();var qt=Ae(Jt());m();w();m();w();m();w();m();w();m();w();var xe=()=>Boolean(typeof window>"u"||process.env.SSR_ENV);var De={PING:"ping",PONG:"pong"},ie={CONNECTED:0,DISCONNECTED:1,PING_PENDING:2,PING_PENDING_OVER:3},Y=!xe(),ke=Y&&!window.inOKXExtension;var Fn=/^\{|\[/,$t="";Y&&($t=window?.okGlobal?.socketBaseUrls?.trade);var me={isPushingJSON(t){return Fn.test(t)},getRealConnectUrl(t=$t){return t}};m();w();var Vt={decode(t){let n=0,e,r,f,i,c,s=[],v=t.length;for(;n<v;)e=t[n++],e<128?c=e:e<224?(r=t[n++],c=(e&31)<<6|r&63):e<240?(r=t[n++],f=t[n++],c=(e&15)<<12|(r&63)<<6|f&63):(r=t[n++],f=t[n++],i=t[n++],c=(e&7)<<18|(r&63)<<12|(f&63)<<6|i&63),s.push(String.fromCodePoint(c));return s.join("")}};var Qt=Vt;if(Y&&ke){let{location:t,TextDecoder:n}=window;n&&(Qt=new n("utf-8")),window.$has_debug_push_param$=t.href.indexOf("debug_push=true")>-1}var ye={};function Pe(t={}){let n=this,e=me.getRealConnectUrl(t.connectUrl),r={maxPendingTime:5e3,maxReconnectTime:1e4,maxWaitingResponseTime:1e4,maxSleepRecoveringTime:3e3,...t,connectUrl:e},f=ye[r.connectUrl];if(f)return f;let i={isClosingByClient:!1,isKillingUnWakeUp:!1,isPingPending:!1,isErrorOccurred:!1},c,s={reconnectTimer:0,handlePendingTimer:0,discontinueTimer:0,killingUnWakeUpTimer:0,pingPendingTimer:0},v={currReconnectTime:0,lastReceivingTime:0},o=[],a=[],E=[],h=[],l=[],b=()=>{},_=()=>{this.isConnected()&&(b(),s.pingPendingTimer=setTimeout(()=>{i.isErrorOccurred&&this.isConnected()||(i.isErrorOccurred=!1,i.isPingPending=!0,h.forEach(d=>{d(ie.PING_PENDING)}))},r.maxPendingTime))},S=(d,A)=>{for(let H=0;H<d.length;H++)if(d[H]===A){d.splice(H,1);break}},g=()=>{i.isPingPending=!1,clearTimeout(s.pingPendingTimer)},I=()=>{clearInterval(s.handlePendingTimer)},N=()=>{v.currReconnectTime=0,s.reconnectTimer&&(clearTimeout(s.reconnectTimer),delete s.reconnectTimer)},p=()=>{!this.isConnected()&&!this.isConnecting()&&(N(),u())},u=function(){c=new WebSocket(r.connectUrl),c.onopen=R,c.onmessage=x,c.onclose=y,c.onerror=k,s.handlePendingTimer=setInterval(n.handleConnectPending,r.maxPendingTime)},R=function(){i.isClosingByClient=!1,N(),I(),g(),a.forEach(d=>{d(),d.triggered=!0}),h.forEach(d=>{d(ie.CONNECTED)})},C=function(){i.isPingPending&&h.forEach(d=>{d(ie.PING_PENDING_OVER)}),g()},x=function(d){if(v.lastReceivingTime=Date.now(),clearTimeout(s.discontinueTimer),clearTimeout(s.killingUnWakeUpTimer),s.discontinueTimer=setTimeout(_,r.maxPendingTime),d.data instanceof Blob){let A=d.data,H=new FileReader,J={done:!1,resultString:""};l.push(J),H.onload=function($){if($.target.readyState==FileReader.DONE){let Q=(0,qt.inflateRaw)($.target.result);for(J.done=!0,J.resultString=Qt.decode(Q);l[0]&&l[0].done;){let{resultString:re}=l.shift();re===De.PONG&&C();let Le=me.isPushingJSON(re)?JSON.parse(re):re;Z(Le),window.$has_debug_push_param$&&(console.log(re),window.$ok_debug_push_callback$&&window.$ok_debug_push_callback$(Le))}}},H.readAsArrayBuffer(A)}else{let A=d.data;A===De.PONG&&C(),Z(me.isPushingJSON(A)?JSON.parse(A):A),window.$has_debug_push_param$&&console.log(A)}},T=function(){g(),a.forEach(d=>{d.triggered=!1})},y=function(){if(i.isKillingUnWakeUp){i.isKillingUnWakeUp=!1;return}i.isClosingByClient?T():s.reconnectTimer||k()},k=function(){T(),I(),i.isErrorOccurred=!0,s.reconnectTimer=setTimeout(u,v.currReconnectTime);let d=v.currReconnectTime+1e3;d>r.maxReconnectTime&&(d=r.maxReconnectTime),v.currReconnectTime=d,o.forEach(A=>{A()}),h.forEach(A=>{A(ie.DISCONNECTED)})},Z=function(d){if(d.event==="error"&&Number(d.errorCode)===30026){c.close();return}E.forEach(H=>H(d))};if(this.setPushDataResolver=function(d){return E.push(d),()=>{S(E,d)}},this.connect=function(){if(Y){if(this.isConnected()){a.forEach(d=>{d.triggered||(d(),d.triggered=!0)});return}!this.isConnected()&&!this.isConnecting()&&u()}},this.disconnect=function(){clearTimeout(s.reconnectTimer),clearTimeout(s.discontinueTimer),delete s.reconnectTimer,delete s.discontinueTimer,i.isClosingByClient=!0,c.close(),o.length=0,a.length=0,E.length=0,b=()=>{},delete ye[r.connectUrl];let{connection:d}=navigator;d&&d.removeEventListener&&d.removeEventListener("change",this.handleConnectionChange),ke&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},this.isConnecting=function(){return c?.readyState===WebSocket.CONNECTING},this.isConnected=function(){return c?.readyState===WebSocket.OPEN},this.sendChannel=function(d){this.isConnected()?c.send(d):console.error("WebSocket is not in open state, can not send!")},this.onSocketConnected=function(d){return a.push(d),()=>{S(a,d)}},this.onSocketError=function(d){return o.push(d),()=>{S(o,d)}},this.onPushDiscontinue=function(d){return b=d,()=>{}},this.onStatusChange=function(d){return h.push(d),()=>{S(h,d)}},this.handleConnectPending=()=>{this.isConnecting()&&o.forEach(d=>{d()})},this.handleConnectionChange=()=>{navigator.onLine===!0&&p()},this.handleVisibilityChange=()=>{if(document.visibilityState==="visible"){if(!this.isConnected()){p();return}Date.now()-v.lastReceivingTime>r.maxWaitingResponseTime&&(_(),s.killingUnWakeUpTimer=setTimeout(()=>{T(),N(),i.isKillingUnWakeUp=!0,c.close(),u()},r.maxSleepRecoveringTime))}},Y){let{connection:d}=navigator;d&&d.addEventListener&&d.addEventListener("change",this.handleConnectionChange),ke&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}return ye[r.connectUrl]=this,this}Pe.STATUS=ie;Y&&!window.WebSocketCore&&(window.WebSocketCore=Pe);var en=Pe;var O=class{constructor(){this.online=()=>{O.socketPendingData=[...O.socketPendingData,...O.socketPendingDataOffToLine],O.socketPendingDataOffToLine=[],this.init()};this.offline=()=>{this.onSocketError()};this.onSocketError=()=>{O.socketStatus="ERROR",Object.keys(O.onStatusChange).forEach(n=>{O.onStatusChange[n](O.socketStatus)}),O.instance.disconnect()};this.init()}static sendChannel(n){O.socketStatus==="CONNECTED"?(O.instance.sendChannel(JSON.stringify(n)),O.socketPendingDataOffToLine.push(n)):O.socketPendingData.push(n)}async init(){await Be.setUrlFromLocalAsync(),window.removeEventListener("online",this.online),window.removeEventListener("offline",this.offline),window.addEventListener("online",this.online),window.addEventListener("offline",this.offline),O.instance=new en({connectUrl:Ze.serverPushUrl});let n=O.instance;n.onPushDiscontinue(()=>{n.sendChannel("ping")}),n.connect(),n.onSocketError(()=>{O.socketStatus="ERROR",Object.keys(O.onStatusChange).forEach(e=>{O.onStatusChange[e](O.socketStatus)}),O.instance.disconnect()}),n.onSocketConnected(()=>{O.socketStatus="CONNECTED",Object.keys(O.onStatusChange).forEach(e=>{O.onStatusChange[e](O.socketStatus)}),O.socketPendingData.forEach(e=>{O.sendChannel(e)}),O.socketPendingData=[],n.sendChannel("ping")}),n.setPushDataResolver(e=>{let{event:r,arg:f}=e,i="";if(r&&(i=r),f&&f.channel&&!r&&(i=f.channel),!!i&&i&&O.listenChanel[i]){let c=O.listenChanel[i];Object.keys(c).forEach(s=>{c[s](e)})}})}},B=O;B.socketStatus="PENDING",B.socketPendingData=[],B.socketPendingDataOffToLine=[],B.listenChanel={},B.onStatusChange={};var fr=new B;var Hn=3e4,kr=(t,n)=>{let{pollingInterval:e,ready:r=!0}={pollingInterval:Hn,...n},[f,i]=(0,z.useState)(null),[c,s]=(0,z.useState)(B.socketStatus),v=(0,z.useRef)(0),o=(0,z.useRef)(`${Date.now()}-${Ue.mathRandom()}`),a=We(n);return(0,z.useEffect)(()=>(B.onStatusChange[t+o.current]=E=>{s(E)},()=>{delete B.onStatusChange[t+o.current],v.current&&clearInterval(v.current)}),[]),(0,z.useEffect)(()=>{B.listenChanel[t]||(B.listenChanel[t]={});let E=o.current;return B.listenChanel[t][E]=h=>{Object.values(He).includes(t)&&Fe({c:t,o:h}),typeof a.current?.onSuccess=="function"?a.current.onSuccess(h):i(h)},()=>{delete B.listenChanel[t][E]}},[t,o.current]),(0,z.useEffect)(()=>(r&&c==="ERROR"&&typeof a.current?.onError=="function"&&(v.current=window.setInterval(()=>{a.current?.onError?.(()=>{clearInterval(v.current)})},e)),r&&c==="CONNECTED"&&typeof a.current?.onError=="function"&&clearInterval(v.current),()=>{clearInterval(v.current)}),[c,r]),typeof n?.onSuccess=="function"?null:f};export{B as a,kr as b};
//# sourceMappingURL=chunk-NQGIYDUG.js.map
