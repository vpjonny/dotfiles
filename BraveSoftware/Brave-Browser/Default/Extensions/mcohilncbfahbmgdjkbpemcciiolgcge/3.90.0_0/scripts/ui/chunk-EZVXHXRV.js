import{a as oe}from"./chunk-LHFDZX73.js";import{a as ce}from"./chunk-IY6TM6RL.js";import{a as se,b as ie}from"./chunk-VUWWQCMX.js";import{a as re}from"./chunk-OHHYJNZI.js";import{a as ae}from"./chunk-5EFGCLI4.js";import{j as ne,k as te}from"./chunk-EUAAIPZO.js";import{a as ee}from"./chunk-ZFAUEPQW.js";import{r as F}from"./chunk-BIUKJDG5.js";import{d as Z}from"./chunk-AVG63QW4.js";import{d as $}from"./chunk-YLT6ZRGE.js";import{a as Ae}from"./chunk-6YSMHFNA.js";import{c as Y}from"./chunk-GVYIP5Q5.js";import{e as X}from"./chunk-OLICTWCW.js";import{J as Q}from"./chunk-3F7OC7N7.js";import{d as z,i as A,j as K}from"./chunk-EPDR6VAQ.js";import{Bb as P}from"./chunk-EQ34WRCJ.js";import{p as J}from"./chunk-DSNMNSMD.js";import{b as he}from"./chunk-FLSAETOH.js";import{Aa as j,Q as h,g as _}from"./chunk-4C5HF6J2.js";import{f as L,o as l,q as u}from"./chunk-UWURTNRY.js";l();u();var n=L(he());j();l();u();j();l();u();l();u();var y=L(Ae());var Pe=e=>{let o=e.transaction.raw_data||{contract:[{parameter:{value:{contract_address:""}}}]},a=e?.transaction?.raw_data_hex||"",{data:t="",amount:m=0,to_address:g,contract_address:T,call_value:d=0}=o.contract[0].parameter.value,b=o.contract[0].type,f=e?.transaction?.functionSelector,s=e?.transaction?.visible,x=d||m,p=T,r=T||g;try{p=y.default.address.fromHex(p),r=y.default.address.fromHex(r)}catch{}return{data:t,callValue:d,finalAmount:x,contractAddress:p,finalAddress:r,tronHexData:a,txType:b,functionSelector:f,visible:s}},I=Pe;var Fe=({coinId:e,params:o,walletAccount:a})=>{let{data:t,callValue:m,finalAmount:g,contractAddress:T,functionSelector:d,visible:b}=I(o),{loading:f,trxFee:s=0,error:x}=F({coinId:e,address:a.address,inputData:t,toAddr:T,value:g,functionSelector:d,visible:b},!0),{isOffline:p=!1}=o,r=ee(e,a.walletId)||{},{coinAmountInt:i}=r,w=Y({coinId:e}),S=p||h(i)||A(i,s),c=!0;return K(m,0)||(c=h(i)||A(z(i,s),m)),{loading:f,networkFee:s,networkFeeProps:{coinId:e,loading:f,estimateFailed:x,networkFee:f?void 0:s,network:w},isSufficientGas:S,estimateFailed:x,isSufficientBalance:c,coinWithBalance:r}},le=Fe;var ve=({isInvalidTriggerSmartContract:e})=>()=>e?{message:J("wallet_extension_confirmation_toast_not_compatible"),level:950}:null,ye=({isOffline:e,extraData:o,shouldSend:a,networkFee:t})=>e?{...o,serviceCharge:t}:a?{serviceCharge:t}:{},ue=(0,n.memo)(e=>{let{source:o,id:a,params:t,localType:m,walletId:g,method:T=Q.SIGN_TRANSACTION,origin:d,onCancel:b=_,onConfirm:f=_,backable:s=!1,onBack:x,asPage:p}=e,r=o==="dapp",{extraData:i,isOffline:w=!1,extParams:S}=t||{},c=$(P)||{},D=c?.coinId||P,{contractAddress:me,txType:de}=I(t),C=oe({walletId:g,localType:m}),{initialType:B}=C,[fe,pe]=(0,n.useState)({}),ge=ae({origin:d}),W=S?.shouldSend,{networkFee:k,networkFeeProps:Te,isSufficientGas:O,estimateFailed:U,isSufficientBalance:N,loading:E,coinWithBalance:H}=le({coinId:D,params:t,walletAccount:C}),G=de==="TriggerSmartContract"&&!me,xe=se({id:a,walletId:g,origin:d,localType:m}),be=(0,n.useMemo)(()=>ye({isOffline:w,extraData:i,shouldSend:W,networkFee:k}),[i,w,W,k]),Ce=ie({id:a,extraParams:be}),R=async()=>{await f({networkFee:k})},M=b;r&&(R=Ce,M=xe);let{buttonGroup:we,handleCancel:Ie}=ce({feeLoading:E,isSufficientGas:O,isSufficientBalance:N,estimateFailed:U,onCancel:M,onConfirm:R,coinWithBalance:H,preExecInfo:fe,chainConfirmDisabled:G||X(B)}),V=re({initialType:B}),q=ve({isInvalidTriggerSmartContract:G}),Se=(0,n.useMemo)(()=>[V(),q()].filter(Boolean),[V,q]),ke=(0,n.useMemo)(()=>({dappData:JSON.stringify(t?.transaction||{}),from:C.address,dappInfo:r?ge:{},chainIndex:c?.chainId,method:T}),[c?.chainId,C.address]),_e={txId:a,baseCoin:c,estimateFailed:U,isSufficientGas:O,isSufficientBalance:N,coinWithBalance:H};return n.default.createElement(n.default.Fragment,null,n.default.createElement(Z,{title:"",noContent:!0,onBack:x,asPage:p,closeable:!1,backable:s}),n.default.createElement(te,{loading:E,txType:ne.signTransaction,chainHeaderTips:Se,preExecParams:ke,handleCancel:Ie,buttonGroup:we,txState:_e,localType:c?.localType,networkFeeProps:Te,walletAccount:C,onUpdatePreExecInfo:pe}))});ue.displayName="SignTransaction";var mn=ue;export{mn as a};
//# sourceMappingURL=chunk-EZVXHXRV.js.map
