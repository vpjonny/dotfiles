import{a as Be}from"./chunk-7737QYC5.js";import{a as ke}from"./chunk-ZLI6GILE.js";import{b as Pe}from"./chunk-J5NCS5VO.js";import{a as Se}from"./chunk-ZTAEYDNS.js";import{a as Ne}from"./chunk-LLOOJQVQ.js";import{a as Le}from"./chunk-TJAFWAJG.js";import{a as xe}from"./chunk-5HKBJUHN.js";import{a as Ie,b as De}from"./chunk-DKVOSSSH.js";import{b as he,d as ve}from"./chunk-PLVYKYSQ.js";import{a as we}from"./chunk-ZLTTBRML.js";import{b as Ae}from"./chunk-VSNCKUAC.js";import{b as ye}from"./chunk-NQGIYDUG.js";import{a as Ce}from"./chunk-GVYIP5Q5.js";import{A as oe}from"./chunk-VHMBEOFX.js";import{a as pe}from"./chunk-WXD7TULU.js";import{a as Y}from"./chunk-BD5XO4WL.js";import{q as K,r as ae,s as V}from"./chunk-MT3ANHCR.js";import{d as ge,e as _e,i as Te,j as be}from"./chunk-2IJ4E4D3.js";import{o as fe}from"./chunk-N6PI3XTA.js";import{a as X,f as k,g as me}from"./chunk-MJSLAJV6.js";import{a as re,c as se,d as ie}from"./chunk-KC2XLVFC.js";import{P as z,g as M,ra as j}from"./chunk-MJDO2VHF.js";import{a as F}from"./chunk-EPDR6VAQ.js";import{c as I}from"./chunk-3FMJDUGT.js";import{c as x}from"./chunk-2O5TMJZM.js";import{K as P,O as Z}from"./chunk-UI4IZNSB.js";import{Db as Q,Fb as ee,Ib as ne,Mb as te,Ua as R,wa as J}from"./chunk-EQ34WRCJ.js";import{B as $,k as U,o as S,p as b}from"./chunk-DSNMNSMD.js";import{A as ue,J as de,f as B}from"./chunk-URGJ6D4O.js";import{t as ce}from"./chunk-XYWWXNVK.js";import{a as le}from"./chunk-FB3ILH2L.js";import{b as E}from"./chunk-FLSAETOH.js";import{Aa as He,na as H}from"./chunk-4C5HF6J2.js";import{f as N,o as f,q as C}from"./chunk-UWURTNRY.js";f();C();var T=N(E());He();f();C();var tn=async e=>{try{let t=await P(x.getMarketMap,e);if(t?.data)return t.data}catch{}return""},Ee=async e=>{try{let{data:t={}}=await Z(x.getTonMintlessInfo,e);return t}catch{}return{}},on=async e=>P(x.getLatestPnl,e),rn=async e=>P(x.getCoinPriceCurveNew,e),sn=async()=>P(x.getPnlSupportedChainIds,{});function Re(e,t,r="0",o={}){let{useApproximate:n=!0}=o,i={coinAmountDisplay:X(0,{isStableCoin:e.stableCoin,precision:e.displayPrecision,useLargeNumberPrecision:!0}).value,currencyAmountDisplay:k(0,{currencySign:t,useApproximate:n}).value,currencyAmountNoUnitDisplay:k(0,{currencySign:t}).value};if(!e.coinAmount)return i;let{coinAmount:s}=e,l=X(s,{isStableCoin:e.stableCoin,precision:e.displayPrecision,useLargeNumberPrecision:!0}).value,m=k(F(s,r),{currencySign:t,useApproximate:n}).value,c=k(F(s,r),{currencySign:t}).value;return i={coinAmountDisplay:l,currencyAmountDisplay:m,currencyAmountNoUnitDisplay:c},i}function Ue(){let e=Te();return re((t,r)=>!Array.isArray(t)||!t?.length?[]:t.map(o=>{let{coinAmountDisplay:n,currencyAmountDisplay:i,currencyAmountNoUnitDisplay:s}=Re(o,r,e(o.coinId)||0);return{...o,coinAmountDisplay:n,currencyAmountDisplay:i,currencyAmountNoUnitDisplay:s}}))}function Fe(e,t){if(!Array.isArray(e)||!e?.length)return[];let r=t.reduce((o,n)=>(o[n.coinId]=n,o),{});return e.map(o=>{let n=o.baseCoinId===0?o.coinId:o.baseCoinId,i=r[n]||{},{imageUrl:s,symbol:l}=i;return{...o,chainImage:s,chainSymbol:l}})}function ze(e,t){return!Array.isArray(e)||!e?.length?[]:e.map(o=>{let n=Ie(t,o.coinId);return{...o,...n}})}function Xe(e){if(!Array.isArray(e)||!e?.length)return{result:[],hasBalChainGte3:!1};let t=[],r=e.filter(n=>+n.coinAmount>0),o=r&&r.length>=3;if(r&&r.length>=2){t=[{symbol:e[0].symbol,image:e[0].image,chainImage:e[0].chainImage,coinAmount:0,currencyAmount:0,tokenType:"wallet_extension_dashboard_tab_overview",coinId:"",overview:!0,stableCoin:e[0]?.stableCoin,displayPrecision:e[0]?.displayPrecision}];let n=e[0];(K(n)||ae(n)||V(n))&&(t[0].coinId=e[0].coinId,t[0].addressType="")}return{result:t,hasBalChainGte3:o}}function je(e){if(!Array.isArray(e)||!e?.length)return[];let t=[];t=e.filter(n=>Boolean(n.localType)),t=H(H(t,n=>n.tokenSort),n=>-n.coinAmount);let r=null;if(t=t.filter(n=>ke(n)?(r=n,!1):!0),!r)return t;if(U.gt(r.coinAmount,0))t.unshift(r);else{let n=t.findIndex(i=>U.lte(i.coinAmount,0));n!==-1?t.splice(n,0,r):t.push(r)}return t}function Ke(e,t){return!Array.isArray(e)||!e?.length?[]:e.map(o=>{let n={...o};o.overview&&(n.tokenType=t(n.tokenType));let i=K(o)||V(o);if(i&&!o.overview){let{localType:s,addressType:l}=o,m=t(ee[ne[s][l]]);n.chainName=m,n.tokenType=m}return!i&&!n.tokenType&&(n.tokenType=n.chainName),n})}function Pn({aggregation:e,coinSymbol:t,btcAggregation:r,nearAggregation:o,tonAggregation:n,coin:i}){let s=[],l=_e(),m=ge(),c=j(z),p=Ne(i),d=Ce(),y=Ue(),g=r||o||n;if(!e&&!g)return{tabList:s,hasBalChainGte3:!1};g?s=p:(s=l.find(h=>h.aggregation&&h.symbol===t)?.childrenCoin||[],s=ze(s,m)),s=Fe(s,d),s=y(s,c),s=je(s);let{result:v,hasBalChainGte3:A}=Xe(s);return s=[...v,...s],s=Ke(s,b),{tabList:s,hasBalChainGte3:A}}function kn(e,t,r={}){let{amountDisplayOptions:o={}}=r,n=De(e,t),i=j(z),s=be(e),l=Re(n,i,s,o);return se(()=>({...n,...l}),[n,l])}function Bn(e,t,r){let{coinId:o,baseCoinId:n,symbol:i}=e,[s,l]=(0,T.useState)(null),m=ie(s),c=(0,T.useCallback)(async()=>{let{status:d,offlineAmount:y,expiredAt:g}=await Ee({coinId:o,address:t});l(d===1?{desc:b("wallet_extension_airdrop_toast_claim_before_expire_new",{num:y,token:i,time:$(g,{format:"yyyyMMddHHmmss",locale:r})}),closable:!1,showTonMessage:!0}:null)},[o,t]),p=ye("wallet-asset",{onError:()=>{n===R&&m.current?.showTonMessage&&c()},pollingInterval:10*1e3});return(0,T.useEffect)(()=>{n===R&&o&&t&&c()},[n,o,t]),(0,T.useEffect)(()=>{let d=p?.data?.coinId;m.current?.showTonMessage&&d===o&&c()},[o,p]),s}function En(e,t){let r="isShowTonTipsAtCoinDetail",[o,n]=(0,T.useState)(null),i=S.get(r);return(0,T.useEffect)(()=>{!i&&t===te.MNEMONIC&&e?.coinId===R?n({desc:b("wallet_extension_alert_ton_asset"),onClose:()=>{S.set(r,!0),n(null)},closable:!0,showTonMessage:!0}):n(null)},[t,e?.coinId]),o}function Me({canChangeDefaultAddress:e}){let t="firstTimeOpenDetailPage",r=(0,T.useRef)(void 0);return(0,T.useEffect)(()=>{let o=S.get(t)!==!1;!e||!r.current||!o||(S.set(t,!1),setTimeout(()=>{r.current?.setVisible(!0)},500),setTimeout(()=>{r.current?.setVisible(!1)},3500))},[e,r]),r}f();C();var a=N(E()),O=N(le());f();C();var _={refreshWrapper:"_refreshWrapper_1sf7p_1",refreshIcon:"_refreshIcon_1sf7p_6",hidden:"_hidden_1sf7p_10",amount:"_amount_1sf7p_13",refreshAnimation:"_refreshAnimation_1sf7p_32",refresh:"_refresh_1sf7p_1",pointer:"_pointer_1sf7p_35",balance:"_balance_1sf7p_38",row:"_row_1sf7p_48",front:"_front_1sf7p_53",middle:"_middle_1sf7p_54",icon:"_icon_1sf7p_69",wrapped:"_wrapped_1sf7p_72"};function Ve(e,t,r){let o=(0,a.useRef)(null),n=(0,a.useRef)(null),i=(0,a.useRef)(null),s=(0,a.useRef)(null),[l,m]=(0,a.useState)(!1),c=()=>{let p=o.current,d=n.current,y=i.current,g=s.current;!p||!d||!y||requestAnimationFrame(()=>{let v=p.getBoundingClientRect().width,A=d.getBoundingClientRect().width,D=y.getBoundingClientRect().width,h=A+D,w=0;g&&(w=g.getBoundingClientRect().width);let G=h+w>v;m(G)})};return(0,a.useLayoutEffect)(()=>{c();let p=()=>c();window.addEventListener("resize",p);let d=new ResizeObserver(()=>c());o.current&&d.observe(o.current);let y=new MutationObserver(()=>c());return o.current&&y.observe(o.current,{childList:!0,subtree:!0,characterData:!0}),()=>{window.removeEventListener("resize",p),d.disconnect(),y.disconnect()}},[e,t,r]),{rowRef:o,frontRef:n,middleRef:i,iconRef:s,wrapped:l}}function Ye({coinSymbol:e,amountDisplay:t,currencyDisplay:r,justify:o=I.ALIGN.center}){let[n,i]=(0,a.useState)("hidden"),[s,l]=pe(),{rowRef:m,frontRef:c,middleRef:p,iconRef:d,wrapped:y}=Ve(e,t,r),g=()=>{i("hidden")},v=(0,a.useCallback)(()=>{n!=="loading"&&i("show")},[n]),A=(0,a.useCallback)(()=>{n!=="loading"&&i("hidden")},[n]),D=s?M:t,h=s?M:r,w=s?M:`${t} ${e}`;return a.default.createElement("div",{ref:m,className:"coin-detail-balance"},a.default.createElement(I.FlexBox,{align:I.ALIGN.center,justify:o,onMouseEnter:v,onMouseLeave:A,className:_.refreshWrapper},a.default.createElement(I.Box,{onClick:l,onAnimationEnd:g,className:(0,O.default)(_.refreshWrapper,_.pointer,{[_.refreshAnimation]:n==="success"})},a.default.createElement("div",{className:(0,O.default)(_.row,{[_.wrapped]:y})},a.default.createElement("div",{ref:c,className:_.front},a.default.createElement(fe.Text,{ellipsis:{tooltip:!0,customToolTipContent:w,placement:ue.DIRECTION.bottom},className:_.balance},D)),r&&a.default.createElement("div",{ref:p,className:_.middle},a.default.createElement(I.FlexBox,{align:I.ALIGN.center,justify:o},a.default.createElement("div",{className:"coin-detail-balance__currency"},h))),!s&&a.default.createElement("div",{ref:d,className:_.icon},a.default.createElement(Pe,{className:(0,O.default)(_.refreshIcon,{[_.hidden]:n==="hidden"}),status:n,handleRefresh:i}))))))}var qe=Ye;f();C();var u=N(E());function $e({addressLabel:e,address:t,addressType:r,isDefaultAddress:o,baseCoin:n={},coin:i={},canChangeDefaultAddress:s,openAddressesDialog:l}){let c=Ae({localType:i?.localType})({address:t}),p=Me({canChangeDefaultAddress:s}),[d,y]=Be(),{isNotBackupWallet:g}=xe(),{isXKOConfig:v}=he(),A=i?.localType===J,D=Le(),h=Q.includes(i?.localType),w=Se(oe),G=()=>{if(w({button_clicked:"copy_address"}),g){D();return}if(!d){y(c);let q=b("wallet_extension_overview_receive_address_copied");r&&(q=we(b,r,n)),de.success({title:q,desc:u.default.createElement("div",{className:"coin-detail-address__copy-message"},c)})}},We=()=>g?u.default.createElement("span",{className:"new-coin-detail-address-content-black"},me(c)):h?u.default.createElement("span",null,c):u.default.createElement(u.default.Fragment,null,u.default.createElement("span",{className:"new-coin-detail-address-content-black"},c)),W;return A&&(v?W=b("wallet_extension_token_details_textbtn_switch_0x"):W=b("wallet_extension_token_details_textbtn_switch_default")),u.default.createElement("div",{className:"new-coin-detail-address-wrapper"},u.default.createElement("div",{className:"new-coin-detail-address",onClick:G},u.default.createElement("div",{className:"new-coin-detail-address-title","data-testid":Y.COIN_DETAIL_PAGE.ADDRESS_TITLE},b("extension_wallet_address_text_network_address",{network:e}),o&&s&&u.default.createElement(B,{className:"new-coin-detail-address-tag",size:B.SIZE.sm,type:B.TYPE.rounded,color:B.COLOR.grey},b("wallet_extension_btc_tag_default_address"))),u.default.createElement("div",{className:"new-coin-detail-address-inner"},u.default.createElement("div",{className:"new-coin-detail-address-content","data-testid":Y.COIN_DETAIL_PAGE.ADDRESS_CONTENT},We()),u.default.createElement("div",{className:"new-coin-detail-address__icon"},u.default.createElement(ce,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px",color:g?"var(--okd-color-content-disabled)":"var(--okd-color-content-primary)"}})))),s&&u.default.createElement("div",{className:"new-coin-detail-address-wrapper__default-address"},u.default.createElement(ve,{tooltipProps:{disabled:A},title:W,popupRef:p,onClick:()=>{w({button_clicked:"default_address"}),l()}})))}var Ze=$e;f();C();var Oe=N(E()),Ge=N(le());function Je({className:e,children:t}){return Oe.default.createElement("div",{className:(0,Ge.default)("coin-detail-overview-container",e)},t)}var Qe=Je;f();C();export{qe as a,tn as b,on as c,rn as d,sn as e,Pn as f,kn as g,Bn as h,En as i,Me as j,Ze as k,Qe as l};
//# sourceMappingURL=chunk-6RMBLK33.js.map
