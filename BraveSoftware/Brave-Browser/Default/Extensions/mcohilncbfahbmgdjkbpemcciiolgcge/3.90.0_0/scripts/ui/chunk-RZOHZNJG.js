import{d as Ir}from"./chunk-RQTEHFJ2.js";import{a as kr}from"./chunk-75EAYNWR.js";import{c as lo,d as oo}from"./chunk-DKVOSSSH.js";import{l as Q}from"./chunk-V7YATDMZ.js";import{a as co}from"./chunk-U44ZBWPF.js";import{a as Sr}from"./chunk-YPTISS47.js";import{b as J}from"./chunk-VSNCKUAC.js";import{A as _r,G as gr,P as xr,b as Jo,d as Qo,e as or,f as rr,g as er,h as nr,i as tr,j as sr,l as ir,m as ur,n as ar,o as mr,p as cr,r as lr,s as mo,u as fr,v as dr,w as pr,x as Cr}from"./chunk-QTCVWDVR.js";import{ca as Ho}from"./chunk-VHMBEOFX.js";import{f as Tr,g as br}from"./chunk-2IJ4E4D3.js";import{f as Do}from"./chunk-NS5EW6UN.js";import{a as Ar}from"./chunk-XBUPORYF.js";import{o as j}from"./chunk-N6PI3XTA.js";import{a as Wo,f as $o}from"./chunk-MJSLAJV6.js";import{a as b,d as ao,e as Go,n as Vo,p as Xo,r as Ko}from"./chunk-KC2XLVFC.js";import{M as Mo,qa as z,ra as l}from"./chunk-MJDO2VHF.js";import{a as oe}from"./chunk-L5AZICLM.js";import{a as zo,g as Z,xa as Zo,ya as jo}from"./chunk-QF42JCDG.js";import{c as Uo}from"./chunk-EAE2NUFS.js";import{d as qo,e as Yo}from"./chunk-F3ILJHGP.js";import{ha as E}from"./chunk-3F7OC7N7.js";import{a as k,b as Bo,d as q,f as Lo,g as R,h as uo,u as No,v as vo,z as Ro}from"./chunk-EPDR6VAQ.js";import{e as hr}from"./chunk-ZIR6OOXX.js";import{a as yr}from"./chunk-WN3TRBGI.js";import{c as y}from"./chunk-3FMJDUGT.js";import{a as Po}from"./chunk-2O5TMJZM.js";import{K as wo,O as Oo}from"./chunk-UI4IZNSB.js";import{wa as Y}from"./chunk-EQ34WRCJ.js";import{p as $,w as ko}from"./chunk-DSNMNSMD.js";import{a as D}from"./chunk-DOSBJ3L3.js";import{I as U,o as Fr}from"./chunk-URGJ6D4O.js";import{a as Er}from"./chunk-IQUFNLVG.js";import{C as F}from"./chunk-XYWWXNVK.js";import{b as T}from"./chunk-FLSAETOH.js";import{Aa as io,M as S,Q as So,g as Io,h as Qr}from"./chunk-4C5HF6J2.js";import{f as g,o as t,q as s}from"./chunk-UWURTNRY.js";t();s();var ro="DontShowError";t();s();var G=g(T());Qr();t();s();var a=g(T());io();t();s();var H=g(T());t();s();var fo={container:"_container_137sj_1",button:"_button_137sj_4"};var po=({feedbackInfo:o})=>{let r=(0,H.useCallback)(async()=>{let n=o.method==="POST"?Oo:wo,i=o.feedbackRequestParam||{},u=o.url.startsWith("/")?o.url:`/${o.url}`,m={walletSignParams:{needXClientSign:!0,walletId:await Uo().getSelectedWallet()}},[p,C]=await ko(n(`${Po.walletHost}${u}`,i,m));!p&&C?.data.reportStatus?U.success({title:o.feedbackResultText}):U.error($("wallet_home_toast_network_error"))},[o]);return o?H.default.createElement("div",{className:fo.container},H.default.createElement(F,{category:F.CATEGORY.text,type:F.TYPE.primary,size:F.SIZE.sm,block:!0,className:fo.button,onClick:r},o.feedbackEntryText)):null};t();s();var _={root:"_root_1r678_1",main:"_main_1r678_14",image:"_image_1r678_23",title:"_title_1r678_27",desc:"_desc_1r678_36",descRaw:"_descRaw_1r678_37",extLink:"_extLink_1r678_44",descList:"_descList_1r678_51",addressItem:"_addressItem_1r678_54",assressTitle:"_assressTitle_1r678_57",assressInfo:"_assressInfo_1r678_63",assressGray:"_assressGray_1r678_70",footerWrap:"_footerWrap_1r678_73",verticalButtons:"_verticalButtons_1r678_76",extButton:"_extButton_1r678_80"};var re={vertical:"vertical",horizontal:"horizontal"},Co=({evtType:o,btnType:r}={})=>{o&&Ho({specific_risk_scenarios:o,interaction_after_popup_window:r})},ee=o=>{let{descRaw:r,desc:e,descList:n,evtType:i}=o;return r?a.default.createElement(j.Text,{className:_.descRaw},r):S(e)?S(n)?null:a.default.createElement(y.Box,{className:_.descList},n.map(u=>{let{text:f,highLightLogic:m}=u,p=[];if(m){let[C=6,x=4]=m?.split(":")||[];p.push(u?.desc?.slice(0,C)),p.push(u?.desc?.slice(C,-x)),p.push(u?.desc?.slice(-x))}return a.default.createElement(y.Box,{className:_.addressItem},a.default.createElement(y.Box,{className:_.assressTitle},f),a.default.createElement(y.Box,{className:_.assressInfo},a.default.createElement("span",null,p[0]),a.default.createElement("span",{className:_.assressGray},p[1]),a.default.createElement("span",null,p[2])))})):a.default.createElement(j.Text,{className:_.desc},a.default.createElement("div",null,e.text),a.default.createElement("div",{className:_.extLink,onClick:()=>{Co({evtType:i,btnType:"click_on_the_risk_link"}),globalThis.platform.openTab({url:e.link.href})}},e.link?.text))},ne=o=>{let{btnLayout:r,evtType:e,handleClickHighLightButton:n,handleClickGrayButton:i,confirmBtnText:u,highlightBtnText:f,grayBtnText:m,feedbackInfo:p}=o,[C,x]=(0,a.useState)(!1),A=u||f,v=async()=>{Co({evtType:e,btnType:"click_cancel"}),x(!0),await n(),x(!1)},W=()=>{Co({evtType:e,btnType:"after_clicking_advanced_click_continue"}),i()};return r===re.vertical?a.default.createElement(a.default.Fragment,null,a.default.createElement(po,{feedbackInfo:p}),a.default.createElement(y.Box,{className:_.verticalButtons},a.default.createElement(F,{block:!0,loading:C,size:F.SIZE.lg,onClick:v,type:F.TYPE.highlight,category:F.CATEGORY.fill},A),m?a.default.createElement(y.Box,{className:_.extButton,onClick:W},m):null)):a.default.createElement(a.default.Fragment,null,a.default.createElement(po,{feedbackInfo:p}),a.default.createElement(Q,{buttonGroup:[m&&{actionType:Q.ACTION_TYPE.CANCEL,btnText:m,onClick:W},{loading:C,actionType:Q.ACTION_TYPE.CONFIRM,btnText:A,onClick:v}].filter(Boolean)}))},te=o=>{let{title:r,image:e}=o,n=hr(e);return a.default.createElement(y.Box,{className:_.root},a.default.createElement(y.Box,{className:_.main},a.default.createElement(Er,{className:_.image,src:n}),a.default.createElement(j.Text,{className:_.title},r),a.default.createElement(ee,{...o})),a.default.createElement(y.Box,{className:_.footerWrap},a.default.createElement(ne,{...o})))},se=({handleCancel:o,handleCloseModal:r,popupInfoList:e})=>{let[n,i]=(0,a.useState)(0),u=e[n],f=n===e.length-1,m=()=>{i(x=>x+1)};return a.default.createElement(te,{...u,handleClickGrayButton:()=>f?r():m(),handleClickHighLightButton:()=>o()})},Br=se;var ie=({handleCancel:o=Io}={})=>{let r=(0,G.useRef)(),e=(0,G.useRef)(),n=()=>{r.current&&(r.current.destroy(),r.current=null,e.current=null)},i=b(u=>(e.current||(e.current=new Promise((f,m)=>{r.current=Fr.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:G.default.createElement(Br,{popupInfoList:u,handleCancel:async()=>{await o(),m(new Error(ro)),n()},handleCloseModal:()=>{f(),n()}})})})),e.current));return Go(n),i},Lr=ie;t();s();t();s();var Ur=g(D());io();t();s();var eo=g(T());t();s();var ue=(0,eo.createContext)({coinId:null,fromAddress:""});function Nr(){return(0,eo.useContext)(ue)}function vr(){let{coinId:o}=Nr();return o}function P(){let{fromAddress:o}=Nr();return o}function B(o){return(r,e,n)=>{if(!r)return r;let i;return n?i=vo(r,o??e.decimals):i=No(r,o??e.decimals),Ro(i)}}t();s();var Rr=()=>l(Jo),I=()=>{let{coin:o}=d(),r=B(o.decimals),e=l(tr);return r(e,o,!1)},Pr=()=>l(sr),Dn=()=>{let o=I(),{coin:r}=d();return k(o,10**r.decimals)},_o=()=>l(cr),go=()=>l(ur),xo=()=>{let o=B(),r=go(),e=h();return o(Bo(r,10**e.decimals),e,!0)},wr=()=>l(mr),Eo=()=>l(ar),Or=()=>{let o=l(Mo),r=l(lr);return r===-1?o.currencyId:r},Mr=()=>{let o=l(ir),{baseCoin:r}=d();return o===-1?r.coinId:o},Fo=()=>l(fr),Dr=()=>l(dr);var yo={vdecimalNum:0,decimals:0,symbol:""};function L(){let{coinId:o}=(0,Ur.useParams)(),r=vr();return Number(r)||Number(o)}var d=()=>{let o=L(),{coin:r,baseCoin:e}=co(o,!0),n=S(r)?yo:r,i=S(e)?yo:e;return{coin:n,baseCoin:i}},h=()=>{let o=Mr(),{coin:r}=co(o,!1);return S(r)?yo:r};t();s();var Hr=g(D());t();s();function me(o="hex"){let{baseCoin:r}=d(),e=J({localType:r.localType}),n=l(rr);return r.localType!==Y||o==="raw"||!qo()?n:e(o==="hex"?{address:n,mode:"HEX"}:o==="xko"?{address:n,mode:"XKO"}:{address:n})}var no=me;var Gr=()=>{let o=(0,Hr.useHistory)(),r=l(nr),e=no("raw"),{coin:n}=d(),i=J({localType:n.localType});return async()=>{let f=i({address:e,mode:"HEX"});await Ir(n.localType,{name:r?.name,type:r?.type,address:f,isXKOAddress:n.localType===Y?Yo(e):!1}),o.go(-3)}};function St(){let o=l(mo),r=wr(),e=Eo(),{coin:n}=d();return(!!o.key||!!o.text)&&o.type!==E.COMMON_TIP||r||e||!n.coinId}function kt(o){let[r,{setTrue:e,setFalse:n}]=Vo(),i=Gr();return{loading:r,onClick:async(...u)=>{e();try{if(o){let f=await o(...u),{pause:m}=f||{};m||await i()}}catch(f){let m=f;if(m?.message===yr||m?.message===ro)n();else{let C=m?.data?.msg||m?.msg||m?.data?.originalError?.msg||m?.message||$("wallet_extension_general_error_extension_code_error");U.error({title:C})}}n()}}}t();s();t();s();var Vr=g(D());function ce(){let o=(0,Vr.useHistory)(),r=Rr();return()=>{o.push(r||zo)}}var le=ce;t();s();var V=g(T());var Xr=g(oe());var w=Symbol("UNSET_INPUT");function fe(){let[o,r]=(0,V.useState)(w),e=ao(o);return(0,V.useEffect)(()=>{_r(o!==w)},[o]),{latestRequestInputRef:e,setLatestRequestInput:r}}function de({domainInputValue:o,coinId:r},e,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:u}=fe(),f=ao(o),{run:m,cancel:p}=Xo(C=>{Do({coinId:r,domain:C}).then(({data:x})=>{C===f.current&&x?.address&&e({address:x?.address,domain:C})}).catch(x=>{Xr.default.debug(x)}).finally(()=>{i.current===C&&u(w)})},{wait:800});return(0,V.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(u(o),m(o)):u(w),()=>{p&&p()}),[o,n]),{loading:i.current!==w,abort:()=>{p&&p(),u(w)}}}var pe=de;t();s();var $t=()=>{let o=P(),{baseCoin:r}=d(),e=Ar(r.localType);return r.localType?o||e:""};t();s();var Kr=g(D());function ts(){return l(Qo)}function ss(){let o=l(or),r=no(),e=l(er);return!r||o||!!e.key}function is(){let o=L(),r=(0,Kr.useHistory)(),e=P(),{amount:n}=Sr(r&&r.location.search.slice(1));return b(()=>{let i={pathname:`${Z}/${o}${Zo}`};e&&(i.search=`?from=${e}`),n&&(i.search=i.search?`${i.search}&amount=${n}`:`?amount=${n}`),r.push(i)})}t();s();t();s();t();s();var O=g(T());function Ce(o,r){let e;return Array.isArray(r)?e={override:!1,fns:r}:e=r||{},e?.override?e?.fns||[]:[...o||[],...e?.fns||[]]}function _e(o,r){let[e,n]=(0,O.useState)(0),i=(0,O.useRef)(0),u=Ce(o,r),f=(0,O.useCallback)((m,p)=>{(async()=>{let x=++i.current;n(A=>A+1);try{let A={key:"",args:{}};for(let v=0;v<u.length;v++){let W=u[v],bo=await W(m);if(bo){A=bo;break}}x===i.current&&p(A)}finally{n(A=>A-1)}})()},u);return{isCheckingError:e>0,runErrorFns:f}}function Wr(o,r,e){let{callback:n,disabled:i}=e||{};Ko(()=>{(async()=>{i||r(o,n)})()},[r,o,i],{wait:100})}var $r=_e;function _s(o,r,e){let n=I();Wr(n,o,{callback:r,disabled:e})}var X=$r;t();s();function ge(){return b(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function xe(){let{baseCoin:o}=d();return b(async r=>await kr(r,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function As(){let o=ge(),r=xe();return[o,r]}t();s();var M=g(T());t();s();var qr=g(T());var Ee=o=>{let r=Tr(o),{coinTickersMap:e}=br();return(0,qr.useCallback)((n,i,u)=>{let{useApproximate:f=!0}=u||{},m=e?.[n]?.coinToUSDRate;return $o(k(i,k(m,r.usdToThisRate)),{useApproximate:f,currencySign:r.symbol}).value},[e,r.symbol,r.usdToThisRate])},Yr=Ee;function Fe(){let{coin:o}=d(),r=to();return(0,M.useCallback)(()=>o.baseCoinId===0&&R(r,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:E.FEE_BALANCE_INSUFFICIENT}:null,[r])}function ho(){let o=To();return(0,M.useCallback)(r=>uo(r,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:E.BALANCE_INSUFFICIENT}:null,[o])}function Ao(){let o=Or(),r=Yr(o),{coin:e}=d(),n=to();return(0,M.useCallback)(i=>{if(uo(i,n)){let u=r(e.coinId,n,{useApproximate:!1}),f=Wo(n,{isStableCoin:e.stableCoin,useLargeNumberPrecision:!0,precision:e.displayPrecision,symbol:e.symbol}).value;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:u,cryptoamount:f},type:E.BALANCE_INSUFFICIENT}}return null},[n])}var Gs=o=>{let r=z(),e=Fe(),n=ho(),i=Ao(),u=[e,n,i],{runErrorFns:f}=X(u,o),m=so();(0,M.useEffect)(()=>{f(m,p=>{r(gr(p))})},[f,m])};t();s();var N=g(T());t();s();var K={AMOUNT:"amount",FEE:"fee"};function ye(){let o=l(Cr);return(0,N.useCallback)(()=>{if(o){if(o.key)return{key:o.key,args:o.args,type:E.PREFERRED_MESSAGE};if(o.text)return{text:o.text,type:E.PREFERRED_MESSAGE}}return null},[o])}function he(){let o=h(),r=zr();return(0,N.useCallback)(()=>R(r,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:E.FEE_BALANCE_INSUFFICIENT,highlight:K.FEE}:null,[r,o.symbol])}function Ae(){let o=ho();return(0,N.useCallback)(r=>{let e=o(r);return e?{...e,highlight:K.AMOUNT}:null},[o])}function Te(){let o=Ao();return(0,N.useCallback)(r=>{let e=o(r);return e?{...e,highlight:K.AMOUNT}:null},[o])}function be(){let o=ye(),r=he(),e=Ae(),n=Te();return[o,r,e,n]}function ri(o){let r=z(),e=be(),{runErrorFns:n}=X(e,o),i=so();(0,N.useEffect)(()=>{n(i,u=>{r(xr(u))})},[n,i])}t();s();var Zr=g(D());io();function Ai(){let o=Pr(),r=I();return!!o.key&&o.type!==E.COMMON_TIP||So(r)||r===""||R(r,0)}function Ti(){let o=L(),r=(0,Zr.useHistory)(),e=l(pr),n=Lr(),i=P();return b(async()=>{try{e?.length&&await n(e);let u={pathname:`${Z}/${o}${jo}`};i&&(u.search=`?from=${i}`),r.push(u)}catch{}})}t();s();var jr=()=>{let o=L();return lo(o)},Ri=()=>{let o=B(),r=jr(),{coin:e}=d();return o(oo(r,e.decimals),e,!1)},Jr=()=>{let o=jr(),r=Fo();return r===null?o:r},To=()=>{let o=B(),r=Jr(),{coin:e}=d();return o(oo(r,e.decimals),e,!1)},Ie=()=>{let{coin:o}=d(),r=h(),e=go(),n=Jr();return o.coinId===r.coinId?q(n,e):n},to=()=>{let{coin:o}=d(),r=h(),e=xo(),n=To();return o.coinId===r.coinId?q(n,e):n},so=()=>{let o=_o(),r=to(),e=I();return o?Lo(r,0)?"0":r:e},Se=()=>{let o=h();return lo(o.coinId)},ke=()=>{let{coin:o}=d(),r=h(),e=Se(),n=Dr(),i=Fo();return n!==null?n:o.coinId===r.coinId&&i!==null?i:e},Be=()=>{let o=B(),r=ke(),e=h();return o(oo(r,e.decimals),e,!1)},zr=()=>{let o=Be(),r=xo();return q(o,r)},Pi=()=>{let{coin:o}=d(),r=_o(),e=I(),n=Ie();return r?n:k(e,10**o.decimals)};t();s();t();s();export{ue as a,P as b,L as c,d,h as e,I as f,Pr as g,Dn as h,_o as i,go as j,xo as k,wr as l,Eo as m,Or as n,Mr as o,Fo as p,Dr as q,le as r,pe as s,$t as t,no as u,Gr as v,ts as w,ss as x,is as y,_s as z,X as A,ge as B,xe as C,As as D,Fe as E,ho as F,Ao as G,Gs as H,K as I,ye as J,he as K,Ae as L,Te as M,be as N,ri as O,ro as P,Lr as Q,Ai as R,Ti as S,jr as T,Ri as U,Jr as V,To as W,to as X,Se as Y,ke as Z,zr as _,Pi as $,St as aa,kt as ba};
//# sourceMappingURL=chunk-RZOHZNJG.js.map
