import{a as k,b as Z}from"./chunk-DD6IGY5O.js";import{a as V,b as v}from"./chunk-5E7YC7OF.js";import{a as X}from"./chunk-JW2AVC2H.js";import{B as A,F as Y,M as q,Z as T,a as L,b as H,d as W,f as G,k as z,l as J}from"./chunk-MJDO2VHF.js";import{o as N}from"./chunk-KGMP5AO5.js";import{a as I,c as b,h as w,j as D}from"./chunk-EPDR6VAQ.js";import{Mb as Q}from"./chunk-EQ34WRCJ.js";import{k as B}from"./chunk-DSNMNSMD.js";import{Aa as F,ta as _}from"./chunk-4C5HF6J2.js";import{f as x,o as s,q as u}from"./chunk-UWURTNRY.js";s();u();function $(e){return Object.keys(e).sort().reduce((n,t)=>(n[t]=e[t]instanceof Object?$(e[t]):e[t],n),{})}function Te(e){let n=$(e);return JSON.stringify(n)}function Ue(e){if(!e||typeof e!="object")return null;let n={...e};for(let t in n)(n[t]===null||n[t]===void 0)&&delete n[t];return n}function ee({coins:e,walletId:n,walletIdentityMap:t,createdMap:r}){let o=r[n]||[],i=new Set(o);return e.reduce((l,c)=>{let{coinId:a,baseCoinId:C}=c;return(typeof a>"u"&&typeof C>"u"||(i.has(C)||i.has(a))&&k({coin:c,walletIdentity:t[n]}))&&l.push(c),l},[])}s();u();var ne=e=>({...e,currencyAmount:"0",currencyAmountUSD:"0",coinAmount:"0",coinAmountInt:"0"});s();u();F();var y=x(W());s();u();s();u();function M(e,n,t){let r=null,o=n[e.coinId]?.coinToUSDRate;e.coinAmount==="0"||o=="0"?r="0":typeof o<"u"&&(r=I(e.coinAmount,o)),e.currencyAmountUSD=r??e.currencyAmountUSD,e.currencyAmount=I(e.currencyAmountUSD,t?.usdToThisRate??"1")}s();u();function R(e,n,{sort:t=!0,ignoreChildren:r=!1}={}){let o=[],i=[];e.forEach(c=>{let a={...c};if(a.childrenCoin&&!r){if(a.childrenCoin.filter(m=>n(m,a.default)).length===0){i.push(a);return}o.push(a)}else{if(!n(a,a.default)){i.push(a);return}o.push(a)}});let l=(c,a)=>D(a.currencyAmount,c.currencyAmount)?D(a.coinAmount,c.coinAmount)?w(c.rank,a.rank)?1:-1:w(a.coinAmount,c.coinAmount)?1:-1:w(a.currencyAmount,c.currencyAmount)?1:-1;return t?(o.sort(l),i.sort(l),{results:o,uselessResults:i}):{results:o,uselessResults:i}}s();u();F();var ge=[];function U(e,n,t,{walletIdentityMap:r,createdMap:o,walletId:i}){if(!e[n])return ge;let l=e[n]??{},c=l.coins?[...l.coins]:[],a=c.reduce((d,g)=>(d.set(g.aggregation?g.symbol:g.coinId,g),d),new Map),C=ee({coins:t,walletId:i,walletIdentityMap:r,createdMap:o}),m=new Map,p=[];return C.forEach(d=>{let g=ne(d);if(d.aggregation){if(!m.get(d.symbol)){let P={...g,childrenCoin:[]};m.set(d.symbol,P),p.push(P)}m.get(d.symbol).childrenCoin.push(g)}else p.push(g)}),p.forEach(d=>{let g=a.get(d.aggregation?d.symbol:d.coinId);g?g.aggregation&&(g.childrenCoin=_(g.childrenCoin,d.childrenCoin,"coinId")):c.push(d)}),c}s();u();var Ce=e=>e.showOnHomepage?!0:e.childrenCoin?e.childrenCoin.some(n=>n?.showOnHomepage):!1,te=(e,n,t)=>{e.maxApy&&(n.push(e.maxApy),e.currencyAmount&&B.gt(e.currencyAmount,"0")&&t.push(e.maxApy))},pe=e=>e.reduce((n,t)=>n?B.gt(t,n)?t:n:t,"");function fe(e){let n={};if(!e)return n;let t=[],r=[];n.showOnHomepage=Ce(e),te(e,t,r),e.childrenCoin&&e.childrenCoin.forEach(i=>{te(i,t,r)});let o=r.length>0?r:t;return o.length>0&&(n.maxApy=pe(o)),n}function ye(e){let n=[];return e.forEach(t=>{t.maxApy&&n.push(t)}),n}function tn(e){let n=ye(e);if(n.length===0)return;let t=n.filter(o=>{let i=o.currencyAmount;return i&&B.gt(i,"0")});return(t.length>0?t:n).reduce((o,i)=>i.maxApy?o?B.gt(i.maxApy,o)?i.maxApy:o:i.maxApy:o,"")}s();u();var he=N({name:"currencySlice",initialState:{coinToUSDRate:{}},reducers:{updateCoinToUSDRate(e,n){e.coinToUSDRate=n.payload}}}),Ae={},re=e=>e.currencySlice.coinToUSDRate||Ae,{actions:Se,reducer:Be}=he,{updateCoinToUSDRate:pn}=Se,fn=Be;var h=(e,n)=>n??A(e),Ie=(0,y.createSelector)(e=>e.keyring.keyringIdentities,h,(e,n)=>{let t;for(let r=0;r<e.length;r++){let o=e[r];if(o.walletIdentities.find(i=>i.walletId===n)){t=o.keyringIdentityType;break}}return t===Q.PRIVATE_KEY}),xe=(0,y.createSelector)(e=>{let{createdMap:n={}}=e.metamask;return n},h,Ie,T,(e,n,t)=>{if(!t)return new Set([]);let r=e[n]||[];return new Set(r)}),j=(0,y.createSelector)(xe,T,(e,n)=>n.filter(t=>e.has(t.coinId))),E=X(e=>({keyringIdentities:e.keyring.keyringIdentities,createdMap:e.metamask.createdMap}),h,(e,n)=>{let{keyringIdentities:t,createdMap:r}=e;return{walletIdentityMap:Y({keyring:{keyringIdentities:t}}),createdMap:r,walletId:n}}),_e=(0,y.createSelector)(h,L,(e,n)=>n?.[e]??[]),ie=(0,y.createSelector)(h,H,(e,n)=>n?.[e]??[]),ae=(0,y.createSelector)(_e,j,(e,n)=>_(n,e,"coinId")),be=(e,n,t,r,o)=>{let i=[];return e.forEach(l=>{let c=l.childrenCoin?.length||0,a={...t[l.coinId]??{},...l};if(a.childrenCoin){let C=a.childrenCoin.filter(p=>n.has(p.chainId)).map(p=>({...p,...t[p.coinId]??{}})),m=Z({coins:C,walletIdentity:o[r]});if(m.length===0)return;m.length!==c&&Object.assign(a,m[0]),a.childrenCoin=m}else if(!k({coin:a,walletIdentity:o[r]})||!n.has(a.chainId))return;i.push(a)}),i};function we(e,n,t){e.forEach(r=>{r.childrenCoin?(r.childrenCoin.forEach(o=>{M(o,n,t)}),r.currencyAmountUSD=r.childrenCoin.reduce((o,i)=>i.currencyAmountUSD?b(o,i.currencyAmountUSD):o,"0"),r.currencyAmount=I(r.currencyAmountUSD,t?.usdToThisRate??"1"),r.coinAmount=r.childrenCoin.reduce((o,i)=>b(o,i.coinAmount),"0"),r.coinAmountInt=r.childrenCoin.reduce((o,i)=>b(o,i.coinAmountInt),"0")):M(r,n,t)})}var We=(e,n,t,r,o,i,l)=>{let{coins:c,...a}=e,m=be(c??[],n,t,r,o);return we(m,i,l),{...a,coins:m,loading:!c}},oe={},O=(0,y.createSelector)((e,n,t)=>t?{[t.balanceData.walletId]:t.balanceData}:e.metamask.balancesMap??e.balanceSlice.balanceMap,G,J,z,E,q,re,h,(e,n,t,r,o,i,l,c)=>{if(!t||!Object.keys(e).length||!n?.length||Object.values(e)?.[0]?.v!==2)return oe;let{walletIdentityMap:a}=o,C=new Set(n);return Object.entries(e).reduce((m,[p,d])=>(c&&p!==c||d?.v!==2||(m[p]=We(d,C,r,p,a,l,i)),m),{})});s();u();var S=x(W());s();u();var ke=e=>ce(e,A(e)),K=ke;s();u();var se=x(W());var Me=(0,se.createSelector)(j,e=>new Set(e.map(n=>n.coinId))),ue=Me;s();u();var le=x(W());var Re=(0,le.createSelector)(ie,e=>new Set(e?.map(n=>n.coinId)??[])),me=Re;var nt=(0,S.createSelector)(O,e=>Object.entries(e).reduce((n,[t,r])=>{let i=(r?.coins??[]).reduce((l,c)=>c.childrenCoin?l.concat(c.childrenCoin):l.concat([c]),[]);return n[t]={...r,coins:i},n},{})),tt=(0,S.createSelector)(O,A,(e,n)=>!Array.isArray(e[n]?.coins)),ce=(0,S.createSelector)(O,h,ae,E,U),de=[],rt=(0,S.createSelector)(K,me,ue,V,(e,n,t,r)=>{if(!e.length)return de;let o=r.open,i=r.amount;return R(e,(c,a)=>{let{isFiltered:C}=v({defaultBaseCoinsCoinIdsSet:t,reducedCoinIdsSet:n,balanceCoin:c,isDefault:a,hiddenSmallAssets:o,smallAssetsAmount:i});return!C}).results}),ot=(0,S.createSelector)(K,e=>e.length?R(e,()=>!0).results:de);export{pn as a,fn as b,R as c,Te as d,Ue as e,ee as f,ne as g,fe as h,ye as i,tn as j,xe as k,ie as l,O as m,K as n,ue as o,me as p,nt as q,tt as r,ce as s,rt as t,ot as u};
//# sourceMappingURL=chunk-XJ2EVWVX.js.map
