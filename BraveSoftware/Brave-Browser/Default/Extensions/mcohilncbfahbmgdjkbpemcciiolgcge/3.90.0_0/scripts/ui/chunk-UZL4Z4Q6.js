import{a as Sr}from"./chunk-6JRCGATI.js";import{a as z}from"./chunk-BHUBJAUL.js";import{a as Tr}from"./chunk-JK2V6PQY.js";import{a as Ir}from"./chunk-52JFFT56.js";import{a as yr}from"./chunk-6CJRBF2P.js";import{b as gr}from"./chunk-3KJMTMXK.js";import{a as pt}from"./chunk-X7JU5VY4.js";import{b as sr,c as ct,m as ir,n as ar,o as mr}from"./chunk-ITLSSVGE.js";import{a as we}from"./chunk-M2YFVDKX.js";import{a as Cr}from"./chunk-4YPL7LEO.js";import{a as nr}from"./chunk-3MLYZLAT.js";import{a as xr}from"./chunk-B4MQLH4C.js";import{a as lt}from"./chunk-VWVRJUMU.js";import{a as fr}from"./chunk-634WRNGH.js";import{a as cr,d as pr}from"./chunk-C4TBDTQO.js";import{a as _r}from"./chunk-6AUQLYPZ.js";import{a as dr}from"./chunk-UPIYMC4Q.js";import{c as ur,e as _e,f as lr}from"./chunk-ZUO5BDO3.js";import{a as $e}from"./chunk-QEPQGEPL.js";import{A as st,E as Qo,I as er,K as tr,P as it,R as at,S as or,U as rr,W as mt,X as ut,a as Zo,b as Jo,c as Oe,d as $,e as tt,f as ke,h as ot,i as qo,n as rt,t as ve,u as jo,z as nt}from"./chunk-RZOHZNJG.js";import{D as Xo,a as Go,b as zo,k as Vo,l as G}from"./chunk-V7YATDMZ.js";import{a as Wo}from"./chunk-U44ZBWPF.js";import{i as Ko}from"./chunk-PLVYKYSQ.js";import{d as $o}from"./chunk-AVG63QW4.js";import{d as oe,g as Yo,k as Be}from"./chunk-YLT6ZRGE.js";import{C as lo,ka as fo}from"./chunk-PIORNFOX.js";import{F as vt,G as So,H as bo,I as Ao,K as ho,L as Eo,N as Po,O as Fo,P as No,Q as Bo,R as Oo,S as ko,b as _o,j as Co,k as xo,n as go,q as yo,t as To,z as Io}from"./chunk-QTCVWDVR.js";import{c as wt}from"./chunk-PMG6IXOR.js";import{a as Do}from"./chunk-BD5XO4WL.js";import{k as Ho}from"./chunk-2IJ4E4D3.js";import{J as ro,h as oo}from"./chunk-NS5EW6UN.js";import{b as de}from"./chunk-YVLQLIW6.js";import{h as He,o as E}from"./chunk-N6PI3XTA.js";import{a as et,h as Uo}from"./chunk-IPVHRCDK.js";import{a as Mn,n as Mo,o as Ro}from"./chunk-WYX7GFOD.js";import{a as Je,f as ao}from"./chunk-MJSLAJV6.js";import{a as Fe,c as no,i as so,k as io,n as Ne}from"./chunk-KC2XLVFC.js";import{M as Ve,qa as U,ra as R}from"./chunk-MJDO2VHF.js";import{a as mo,g as uo,ib as po,wa as co}from"./chunk-QF42JCDG.js";import{$ as Ze,H as eo,V as Xe,Z as P,aa as to,c as k,ha as te,j as Qt}from"./chunk-3F7OC7N7.js";import{a as ee,b as Bt,c as le,f as We,g as Zt,h as Ot,q as Jt,v as Ge,y as ye}from"./chunk-EPDR6VAQ.js";import{c as b}from"./chunk-3FMJDUGT.js";import{c as ze}from"./chunk-2O5TMJZM.js";import{O as Ke,u as qt}from"./chunk-UI4IZNSB.js";import{$ as Ue,Ea as fe,Nb as kt,Ya as jt}from"./chunk-EQ34WRCJ.js";import{k as ge,p as f}from"./chunk-DSNMNSMD.js";import{a as qe}from"./chunk-DOSBJ3L3.js";import{B as wo,I as Lo,e as vo,o as Qe,q as Te}from"./chunk-URGJ6D4O.js";import{C as H}from"./chunk-XYWWXNVK.js";import{a as je}from"./chunk-FB3ILH2L.js";import{b as C}from"./chunk-FLSAETOH.js";import{Aa as Nt,Q as De,w as Xt}from"./chunk-4C5HF6J2.js";import{f as _,o as r,q as n}from"./chunk-UWURTNRY.js";r();n();var Ct=_(C());r();n();var ft=_(C());var Lt=(0,ft.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Xe.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function re(){return(0,ft.useContext)(Lt)}function Le(){let{signInfo:e}=re();return e}function dt(){let{currencyId:e}=re();return e}function ue(){let{params:e}=re();return e}function Mt(){let{feeData:e}=re();return e}function _t(){let{onFeeDataChange:e}=re();return e}function ne(){let e=Le(),{inscriptions:t}=ue(),{inscriptionOutput:o}=Mt(),i=o||e?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:t.length,total:ee(i,t.length)}}function Ie(){let{feeData:e}=re();return{fees:e.revealTxFees,totalFee:(e.revealTxFees||[]).reduce((t,o)=>le(t,o),"0")}}function Se(){let{feeData:e}=re();return e.commitTxFee}function Z(){let{feeData:{feeSelectedSat:e={}}}=re(),{type:t}=e,o=Le(),i;return t===P.CUSTOM?i=e.satBytes:i=o?.[to[t]],{...e,satBytes:i||o?.normal||0}}function br(){let{feeData:e}=re();return e.canTransferAmount}function Ar(){let{lifecycle:e}=re();return e}r();n();var hr=_(C());function Rn(e,t){let o=oe(t),[,i]=nr({coinId:t,address:e,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,hr.useMemo)(()=>i||{},[i])}var Er=Rn;function Dn({defaultFeeData:e,currencyId:t,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:u,...p}=o,l=R(Ve),d=Er(m,u),[g,x]=(0,Ct.useState)(e||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:P.STANDARD},canTransferAmount:"0"}),N=Fe((I,T)=>{x(S=>({...S,[I]:T}))});return Ct.default.createElement(Lt.Provider,{value:{signInfo:d,currencyId:t??l.currencyId,params:{...p,netWorkCoinId:u,from:m,to:a||m},lifecycle:i,feeData:g,onFeeDataChange:N}},s)}var Rt=Dn;r();n();r();n();var F=_(C()),qr=_(qe());r();n();var be=_(C()),Dt=_(je());r();n();var Me={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};var Un=({className:e,loading:t,slot:o={},children:i,footerActions:s,contentClassName:m})=>{let{header:a,footer:u,top:p}=o;return be.default.createElement(b.Container,{loading:t,className:(0,Dt.default)(Me.root,e)},be.default.createElement(b.Box,{className:Me["send-page-base-container__header"]},a),be.default.createElement(b.Box,{className:Me["send-page-base-container__wrapper"]},p,be.default.createElement(b.Box,{className:Me["send-page-base-container__inner-wrapper"]},be.default.createElement(b.Box,{className:(0,Dt.default)(Me["send-page-base-container__content"],m)},i),!!s?.length&&be.default.createElement(de.FooterActions,{usePortal:!0,placeholder:!0,renderNative:!0,buttonGroup:s}),u)))},xt=Un;r();n();var Ut=_(C());Nt();r();n();var K=_(C());r();n();var Pr=_(C());var Fr=(e,t)=>{let o=e.coinId,i=Ho(o),s=R(Ve),m=R(({metamask:p})=>p.currencies),a=(0,Pr.useMemo)(()=>t&&m?.find(p=>p.currencyId===t)||s,[t]),u=ee(i,a?.usdToThisRate);return Cr(Jt,p=>{let l=Je(p,{symbol:e.symbol,precision:e.displayPrecision,isStableCoin:e.stableCoin}).value,d=ao(ee(p,u),{currencySign:a.symbol}).value;return`${l}(${d})`})};var Nr=({bytes:e,value:t,signInfo:o={},coinId:i,currencyId:s,onChange:m,supportDecimal:a})=>{let u=yr(),{coin:p,baseCoin:l}=Wo(i,!0),[d,g]=(0,K.useState)(t?.customSatBytes),x=Fr(l,s),N=f("extension_wallet_transaction_text_minute");(0,K.useEffect)(()=>{!d&&o?.normal&&g(o?.normal)},[o]);let I=(0,K.useCallback)(v=>{g(v)},[]),T=(0,K.useCallback)(()=>{m?.({customSatBytes:d,type:P.CUSTOM,satBytes:d})},[d]),S=p.localType===Ue?f("wallet_extension_transfer_unit_sat_b"):"",O=(0,K.useMemo)(()=>{let{min:v,mempoolMin:w}=o,B=w||v||0;return We(d,B)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:B}):""},[d,o]);return(0,K.useMemo)(()=>[P.SLOW,P.STANDARD,P.FAST,P.CUSTOM].map(v=>{switch(v){case P.SLOW:return{data:{type:P.SLOW,satBytes:o.min,estimatedTime:`${ye(o.maxCost)} ${N}`},unitPrice:`${o.min} ${S}`,totalPrice:x(ee(o.min,e),s),type:f(Ze[P.SLOW]),typeKey:P.SLOW,estimatedTime:`${ye(o.maxCost)} ${N}`};case P.STANDARD:return{data:{type:P.STANDARD,satBytes:o.normal,estimatedTime:`${ye(o.normalCost)} ${N}`},unitPrice:`${o.normal} ${S}`,totalPrice:x(ee(o.normal,e),s),type:f(Ze[P.STANDARD]),typeKey:P.STANDARD,estimatedTime:`${ye(o.normalCost)} ${N}`};case P.FAST:return{data:{type:P.FAST,satBytes:o.max,estimatedTime:`${ye(o.minCost)} ${N}`},unitPrice:`${o.max} ${S}`,totalPrice:x(ee(o.max,e),s),type:f(Ze[P.FAST]),typeKey:P.FAST,estimatedTime:`${ye(o.minCost)} ${N}`};default:return{unitPrice:`${o.max} ${S}`,totalPrice:x(ee(d,e),s),estimatedTime:u(o,d),canConfirm:!O,onConfirm:T,components:()=>K.default.createElement(Te.Number,{enableMinus:!1,precision:a?1:0,error:O,errorType:Te.TIP_TYPE.always,onChange:I,value:d,size:Te.SIZE.sm,title:S,className:"custom-network-fee__satb"})}}}),[e,o,d,a])};var Hn=({value:e,coinId:t,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:u,supportDecimal:p})=>{let l=Nr({bytes:o,value:e,coinId:t,onChange:s,signInfo:i,currencyId:m,supportDecimal:p});return Ut.default.createElement(gr,{feeType:e?.type,feeDataList:l?.slice(0,3),onBack:a,visible:u,custom:Xt(l),onChange:({data:d})=>{s?.(d)}})},Br=Ut.default.memo(Hn);r();n();var ce=_(C());r();n();var M=_(C());r();n();var Ae={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var gt=330,yt=1e4,$n=({coinId:e,visible:t,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,u]=(0,M.useState)(String(o));(0,M.useEffect)(()=>{u(String(o))},[o]),(0,M.useEffect)(()=>{t&&u(String(o))},[o,t]);let p=Be(e,a,{currencyId:i,useApproximate:!1});return M.default.createElement(Qe.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:t,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},M.default.createElement(b.Box,{className:Ae["output-panel__content"]},M.default.createElement(Te.Number,{precision:0,value:a,max:yt,min:gt,size:Te.SIZE.xl,onChange:l=>{u(l)},suffix:M.default.createElement(E.Text,{size:E.SIZE.sm},"sats")}),M.default.createElement(E.Text,{className:Ae["output-panel__compare"],type:E.TYPE.secondary,size:E.SIZE.sm},p),M.default.createElement(b.Space,{space:4,direction:b.DIRECTION.vertical},M.default.createElement(wo,{value:a,min:gt,max:yt,contentClassName:Ae["output-panel-slider__content"],onChange:l=>{u(String(l))}}),M.default.createElement(b.FlexBox,{justify:"space-between"},M.default.createElement(E.Text,{type:E.TYPE.secondary,size:E.SIZE.xs},`${gt} sats`),M.default.createElement(E.Text,{type:E.TYPE.secondary,size:E.SIZE.xs},`${yt} sats`)))),M.default.createElement(b.Box,{className:Ae["output-panel__button"]},M.default.createElement(H,{disabled:!a||!a?.trim(),category:H.CATEGORY.fill,type:H.TYPE.highlight,size:H.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,gt),yt)),s?.()}},f("extension_transactions_btn_confirm"))))},Or=$n;var Yn=({txType:e,currencyId:t,inscriptionsCount:o,inscriptionOutput:i,coinId:s=fe,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[u,{toggle:p}]=Ne(!1),l=ge.gt(m,0)?m:"0",d=Be(s,l,{currencyId:t,useApproximate:!0}),g=(0,ce.useMemo)(()=>Qt(e),[e]);return ce.default.createElement(ce.default.Fragment,null,ce.default.createElement(_e,{clickable:e===k.RUNES_ETCH?!1:void 0,onClick:()=>{ge.gt(i,0)&&p()},label:f(g),value:ce.default.createElement(b.FlexBox,{align:b.ALIGN.center},`${i} sats`,!!o&&o>1&&ce.default.createElement(E.Text,{className:Ae["output-tag"]},"x",o),d)}),ce.default.createElement(Or,{coinId:s,visible:u,currencyId:t,outputValue:i,onClose:p,onChange:a}))},kr=Yn;r();n();var Tt=_(C());r();n();var vr={totalFee:"_totalFee_1d64o_1"};var Wn=({coinId:e,currencyId:t,totalCoinAmount:o})=>{let i=oe(e),s=Be(e,o,{currencyId:t,useApproximate:!0});return Tt.default.createElement(_e,{label:f("extension_wallet_transaction_item_inscribe_totalfee"),value:Tt.default.createElement(E.Text,{className:vr.totalFee},Tt.default.createElement(E.DisplayAmount,{noStyle:!0,mode:E.CRYPTO,symbol:i?.symbol,decimals:i?.decimals,precision:i?.displayPrecision,isStableCoin:i?.stableCoin},o),s)})},wr=Wn;r();n();var Dr=_(C()),Ur=_(qe());var Hr=_(Mn());r();n();r();n();var Lr=_(C());Nt();function Gn({walletId:e,utxoType:t=1,coinId:o=fe}={}){let i=et();return(0,Lr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:u})=>{let p={address:s,coinAmount:m,serviceCharge:a,utxoType:t};De(u);let l={coinId:o,utxoRequests:[p],accountId:e};try{let{data:d}=await Ke(ze.getBTCUTXO,l);return d?.[0]||{}}catch(d){return{error:!0,errorResp:d}}},[o,i,t,e])}var It=Gn;r();n();var Mr=_(C());function zn(e){let{inscriptionOutput:t}=ne(),{satBytes:o}=Z(),{walletId:i,from:s,to:m,inscriptions:a,txType:u,mintType:p}=ue(),l=ar(e),d=mr();return(0,Mr.useCallback)(async g=>{let x={};return u===k.RUNES_ETCH?(x={input:g.map(({txHash:T,vout:S,coinAmount:O})=>({vOut:S,txId:T,amount:O})),address:s,feePerB:o,outValue:t,inscriptions:(a||[]).map(({body:T})=>JSON.parse(T))},await d({walletId:i,address:s,tx:x,txType:u,mintType:p})):(x={commitTxPrevOutputList:g.map(({txHash:I,vout:T,coinAmount:S})=>({vOut:T,txId:I,amount:S})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:I,body:T})=>({contentType:I,body:T})),revealOutValue:t,changeAddress:s,toAddr:m},await l({walletId:i,address:s,tx:x,txType:u}))},[s,m,a,t,o])}var St=zn;function Kn(e=fe){let{walletId:t,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:u,mintType:p}=ue(),l=Le(),d=dt(),g=ir({address:o,coinId:e,currencyId:d,txType:a,protocolId:u}),x=St(ct.CONFIRM),N=It({walletId:t,utxoType:s,coinId:e}),{beforePostTx:I}=Ar(),{inscriptionOutput:T,total:S}=ne(),{totalFee:O}=Ie(),v=Se(),{satBytes:w}=Z(),B=async h=>{let{commitTx:y,revealTxs:A,commitAddrs:L,commitTxFee:D,revealTxFees:V}=await x(h.utxoList||[]),j=await Go(Ue,y),ie=await zo(Ue,A),Re=[j,...ie],Q={signedTx:y,fromAdr:o,serviceCharge:D,toAdr:i||o,itemId:"commitTx",txHash:j,txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:t},ae=A.map((X,me)=>({signedTx:X,fromAdr:L?.[me]||o,serviceCharge:V?.[me],toAdr:i||o,itemId:`revealTx${me}`,txHash:ie[me],dependTx:p===Xe.serial?[Re[me]]:[j],txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]}),walletId:t})),xe=!1;if(I){let X=I(Q,ae)||{};xe=X.noBroadCast||!1,Q=X.commitParams||Q,ae=X.revealParams||ae}return xe?{commitParams:Q,revealParams:ae,commitTx:y,revealTxs:A,commitAddrs:L,commitTxFee:D,revealTxFees:V,feeRate:parseInt(w,10),size:parseInt(T,10)}:{txIds:await oo({txList:[Q,...ae]},{walletSignParams:{needXClientSign:!0,walletId:t}}),commitTx:y,revealTxs:A,commitAddrs:L,commitTxFee:D,revealTxFees:V,feeRate:parseInt(w,10),size:parseInt(T,10)}},q=async()=>{let h=await N({from:o,coinAmount:le(S,O),serviceCharge:v,feeRate:w}),y=h.utxoList||[];return await g(y,()=>{}),await B(h)};return()=>new Promise((h,y)=>{if(typeof l?.txSizeLimit=="number"&&m.length>l.txSizeLimit){let A=Qe.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let L=await q();h(L)}catch(L){y(L)}A.destroy()},onConfirm:()=>{y(new Error(it)),A.destroy()}})}else(async()=>{try{let A=await q();h(A)}catch(A){y(A)}})()})}var Rr=Kn;var Vn=e=>e?.data?.msg||e?.msg||e?.data?.originalError?.msg||f("wallet_home_toast_network_error"),Xn=(e,t)=>!t&&[te.BALANCE_INSUFFICIENT,te.FEE_BALANCE_INSUFFICIENT].includes(e),Zn=({txId:e,coinId:t,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:u,addressType:p,useTipMessageFillUp:l,onFillUp:d,netWorkCoinId:g,addressCheckLoading:x=!1},N)=>{let I=(0,Ur.useHistory)(),T=Rr(g),S=Xo(o,a),O=Fe(async()=>{try{await S();let y=await T();m&&await m(y)}catch(y){if(!(y?.message===it)){let L=Vn(y);Lo.error({title:L})}}},[m]),v=a||(()=>{I.goBack()}),{loading:w,onClick:B}=$e(O),{loading:q,onClick:h}=$e(v);return(0,Dr.useMemo)(()=>{let y={loading:q,actionType:G.ACTION_TYPE.CANCEL,onClick:h},A={loading:w||x,disabled:u,actionType:G.ACTION_TYPE.CONFIRM,onClick:B};return Xn(N,i)&&(y=y||{actionType:G.ACTION_TYPE.CANCEL,onClick:()=>{I.goBack()}},l?A={actionType:G.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{d&&await d();let L=Hr.default.stringify({addressType:p,coinId:t},{skipEmptyString:!0,skipNull:!0}),D=L?`?${L}`:"";I.push(po+D)}}:A={txId:e,coinId:t,address:s,walletId:o,actionType:G.ACTION_TYPE.FILL_UP}),[y,A]},[a,q,h,w,u,B,i,N,l,I,d,p,t,e,s,o])},$r=Zn;r();n();r();n();var Yr=_(C());function Wr(){let{totalFee:e}=Ie(),{satBytes:t}=Z();return Ge(Bt(e,t),0)}function Gr(){let e=Se(),{satBytes:t}=Z();return Ge(Bt(e,t),0)}function zr(){let{totalFee:e}=Ie(),t=Se();return(0,Yr.useMemo)(()=>le(e,t),[e,t])}r();n();r();n();var he=_(C());function Jn(e){let{disabled:t=!1}=e||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=ue(),[a,u]=(0,he.useState)(!0),[p,l]=(0,he.useState)(!0),[d,g]=(0,he.useState)(null),[x,N]=(0,he.useState)([]),I=It({walletId:o,utxoType:s,coinId:m}),T=St(ct.CAL_FEE),{satBytes:S}=Z(),{total:O}=ne(),v=_t(),{totalFee:w}=Ie(),B=Se();return(0,he.useEffect)(()=>{!t&&(async()=>{if(!Zt(O,0))try{l(!0);let h=await I({from:i,coinAmount:le(O,w),serviceCharge:B,feeRate:S});if(!h?.utxoList?.length){g(z.BALANCE_NOT_ENOUGH);return}if(h.error){let L=h.errorResp.code,D=z.COMMON_ERROR;[z.BALANCE_NOT_ENOUGH,z.PURE_UTXO_NOT_ENOUGH].includes(L)&&(D=L),g(D);return}v("canTransferAmount",h.canTransferAmount||"0"),g(null);let{commitTxFee:y,revealTxFees:A}=await T(h.utxoList);N(h.utxoList),v("commitTxFee",y),v("revealTxFees",A)}catch{g(z.COMMON_ERROR),v("commitTxFee","0"),v("revealTxFees",[])}finally{u(!1),l(!1)}})()},[i,S,O,w,B,T,t]),{isInitLoading:a,isLoading:p,error:d,utxoList:x}}var Kr=Jn;function qn(e){let{disabled:t=!1}=e||{},o=zr(),{total:i}=ne(),s=br(),m=Mt(),{isInitLoading:a,isLoading:u,error:p,utxoList:l}=Kr({disabled:t});return{isInitLoading:a,isLoading:u,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:l}}var bt=qn;var jn=()=>{let{utxoList:e,fee:t,error:o,canTransferAmount:i,isLoading:s}=bt(),m=Le(),a=Gr(),u=Wr(),p=ge.add(a,u),l=Z(),d=_t();return{bytes:p,signInfo:m,feeError:o,selectedSat:l,feeLoading:s,networkFee:t,canTransferAmount:i,utxoListCount:e?.length||0,onFeeDataChange:d}},Vr=jn;r();n();var Zr=_(C());r();n();var Qn=[k.BRC20_DEPLOY,k.BRC20_MINT,k.BRC20_INSCRIBE,k.ORDINAL_NFT,k.ORDINAL_TEXT,k.EARN_BRC30_DEPLOY,k.EARN_BRC30_APPLY,k.EARN_BRC30_REDEEM,k.EARN_BRC30_CLAIM,k.BRC30_INSCRIBE,k.RUNES_ETCH];function Xr(e){return Qn.indexOf(e)>-1}var es=({txType:e,feeError:t,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a,addressCheckError:u=""})=>(0,Zr.useMemo)(()=>Xr(e)?i&&e===k.RUNES_ETCH?{type:we.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:we.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:t===z.COMMON_ERROR?{type:we.TIP_TYPE.FEE_ERROR}:t===z.BALANCE_NOT_ENOUGH?{type:lt.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:t===z.PURE_UTXO_NOT_ENOUGH?{type:lt.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:lt.BALANCE_INSUFFICIENT}:u?{type:we.TIP_TYPE.COMMON_ERROR,message:u}:{message:m}:{type:we.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[e,t,o,i,s,m,u]),Jr=es;r();n();var Ht={"retina-border-basic":"_retina-border-basic_t0frj_1",retinaBorderBasic:"_retina-border-basic_t0frj_1","free-tag":"_free-tag_t0frj_29",freeTag:"_free-tag_t0frj_29",actions:"_actions_t0frj_33",container:"_container_t0frj_66"};function ts({txId:e,headerProps:t={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=fe}){let{from:m,walletId:a,txType:u}=ue(),p=Ro(a),l=Mo(a),[d,{toggle:g}]=Ne(!1),x=dt(),I=Uo()[m],{bytes:T,signInfo:S,feeError:O,selectedSat:v,feeLoading:w,networkFee:B,canTransferAmount:q,utxoListCount:h,onFeeDataChange:y}=Vr(),{title:A}=t,{inscriptionOutput:L,inscriptionsCount:D,total:V}=ne(),j=(0,F.useMemo)(()=>ge.add(B,V),[B,V]),ie=oe(s),{showManageUTXO:Re}=Sr(ie||{},I,!0),Q=Re&&O!==z.PURE_UTXO_NOT_ENOUGH,ae=(0,qr.useHistory)(),{addressCheckLoading:xe,addressCheckError:W}=Ir({from:m,chainIndex:ie?.chainId||jt,handleCancel:i?.onCancel||(()=>{ae.goBack()}),method:eo.INSCRIBE}),{type:X,message:me}=Jr({txType:u,feeError:O,feeLoading:w,utxoListCount:h,isHardware:p,isMpcWallet:l,canTransferAmount:q,networkFee:B,totalUsedCoinAmount:j,coin:ie,addressCheckError:W}),kn=$r({txId:e,walletId:a,coinId:s,addressType:I,disabled:!!X||!!O||!!w||p||h>100||!!W,useTipMessageFillUp:Q,netWorkCoinId:s,addressCheckLoading:xe,...i},X),Kt=xr(a),vn=Fe(Ft=>{y("commitTxFee","0"),y("revealTxFees",[]),y("inscriptionOutput",Ft)},[]),{top:Vt,mid:wn,footer:Ln}=o;return F.default.createElement("div",{className:Ht.container},F.default.createElement(pr,{type:X||cr.COMMON_ERROR,address:m,message:me,coinId:s,walletId:a,fillUpAble:Q}),F.default.createElement(xt,{slot:{footer:Ln||F.default.createElement(de,{placeholder:!0,offsetBottom:0},F.default.createElement("div",{className:Ht.actions},F.default.createElement(G,{buttonGroup:kn})))}},F.default.createElement(ur,{txType:u,injectInfo:{title:A,identify:!0}}),F.default.createElement(pt,{bordered:!1},F.default.createElement(He.Thin,{compact:!0})),Vt,!Vt&&F.default.createElement(pt,{bordered:!1},F.default.createElement(He.Thin,{compact:!0})),F.default.createElement(pt,{bordered:!1},F.default.createElement(_r,{coinId:s}),F.default.createElement(dr,{coinId:s,loading:w,currencyId:x,networkFee:w&&B==="0"?void 0:B,estimateFailed:!w&&!Number(B),onClick:()=>{g?.(),Kt({trade:"brc20",all_confirmation:"network_fee"})}}),F.default.createElement(lr,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Kt({trade:"brc20",all_confirmation:"wallet_used_address"})}}),wn,F.default.createElement(_e,{label:f("wallet_info_title_inscribe_service_fee"),value:f("wallet_info_tag_inscribe_free_tag")}),F.default.createElement(kr,{txType:u,currencyId:x,inscriptionsCount:D,inscriptionOutput:L,totalInscriptionCoinAmount:V,onInscriptionOutputChange:vn,coinId:s}),F.default.createElement(wr,{coinId:s,currencyId:x,totalCoinAmount:j})),F.default.createElement(Br,{bytes:T,currencyId:x,value:v,coinId:s,onClose:g,signInfo:S,visible:d,onChange:Ft=>{y("commitTxFee","0"),y("revealTxFees",[]),y("feeSelectedSat",Ft)},supportDecimal:!0})))}var $t=ts;r();n();var Ce=_(C());r();n();var Y=_(C());var Tn=_(je());Nt();r();n();var Qr=_(C()),en=_(qe()),tn=_(je());r();n();var jr={root:"_root_ryl3e_1"};function os({onBack:e,onClose:t,pageIndex:o,...i}){let s=(0,en.useHistory)(),m=()=>{e&&e(),s.goBack()},a=()=>{t&&t(),s.go(-o)};return Qr.default.createElement($o,{className:(0,tn.default)(jr.root,i.className),onClose:a,onBack:m,...i})}var on=os;r();n();var rn=_(qe());function rs(e){let t=(0,rn.useHistory)(),o=R(_o),i=Oe(),{coin:s}=$(),m=jo(),a=Jo();so(()=>{if(!!e){if(qt(s))t.replace(o||mo);else if(!m){let u={pathname:`${uo}/${i}${co}`};a&&(u.search=`?from=${a}`),t.replace(u)}}})}var nn=rs;r();n();var ln=_(C());r();n();var Ee=_(C());r();n();var un=_(C());r();n();var pe=_(C());var an=_(je());r();n();var sn={root:"_root_26a1b_1"};var ns=({coin:e={},onVisible:t,receiveOnly:o,address:i,style:s,className:m})=>{let[a,{setTrue:u,setFalse:p}]=Ne();(0,pe.useEffect)(()=>{t&&t(a)},[a]);let l=e?.symbol??"",d=l.length>12?`${l.slice(0,12)}...`:l;return pe.default.createElement(pe.default.Fragment,null,pe.default.createElement("div",{className:(0,an.default)(sn.root,m),onClick:u,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:d})),pe.default.createElement(Vo,{address:i,visible:a,closeCallback:p,coinId:e.coinId,receiveOnly:o}))},mn=(0,pe.memo)(ns);function ss(e){let t=U(),o=ve();return un.default.createElement(mn,{address:o,...e,onVisible:s=>{t(Bo(s))}})}var Yt=ss;var is=()=>{let{coin:e}=$(),t=tt();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===te.BALANCE_INSUFFICIENT?Ee.default.createElement(Ee.default.Fragment,null,s," ",Ee.default.createElement(Yt,{coin:e,receiveOnly:!0})):i?.type===te.FEE_BALANCE_INSUFFICIENT?Ee.default.createElement(Ee.default.Fragment,null,s," ",Ee.default.createElement(Yt,{coin:t})):s}},cn=is;r();n();var pn={root:"_root_g697e_1"};function as({renderError:e}){let t=R(Co),o=cn(),i=e||o;if(!t.key)return null;let s=i(t);return ln.default.createElement("div",{className:pn.root},s)}var fn=as;r();n();var J=_(C());r();n();var ms=(e,t)=>{let{coin:o}=$(),i=rr(),s=mt(),m=ut(),u={total:i,amount:s,available:m}[e];return`${Je(t||u,{precision:o?.displayPrecision,isStableCoin:o?.stableCoin,useLargeNumberPrecision:!0}).value} ${o.symbol}`},dn=ms;r();n();var Pe={container:"_container_1l0en_1",skeleton:"_skeleton_1l0en_5",totalAmount:"_totalAmount_1l0en_9","totalAmount-content":"_totalAmount-content_1l0en_13",totalAmountContent:"_totalAmount-content_1l0en_13","totalAmount-title":"_totalAmount-title_1l0en_22",totalAmountTitle:"_totalAmount-title_1l0en_22","totalAmount-amount":"_totalAmount-amount_1l0en_29",totalAmountAmount:"_totalAmount-amount_1l0en_29"};function us(e){let t=e;t||(t="");let o=t?.length;return o<=20?"15px":o<=22?"14px":o<=24?"13px":"12px"}function cs({type:e="total",title:t,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},loading:u=!1,...p}){let{coin:l}=$(),d=dn(e,i),{bottom:g}=a;return J.default.createElement(b.Box,{className:Pe.container},u?J.default.createElement(vo.Input,{active:!0,className:Pe.skeleton}):J.default.createElement(J.default.Fragment,null,J.default.createElement(b.FlexBox,{align:b.ALIGN.center,className:Pe.totalAmount,...p},J.default.createElement(wt,{size:wt.SIZE.lg,src:l?.image,text:l?.symbol}),J.default.createElement(b.Box,{className:Pe["totalAmount-content"]},J.default.createElement(E.Text,{type:E.TYPE.secondary,size:E.SIZE.xs,className:Pe["totalAmount-title"]},t||f("wallet_extension_send_item_total_amount")),J.default.createElement(E.Text,{ellipsis:{tooltip:!0},className:Pe["totalAmount-amount"],style:{fontSize:us(d)}},d)),!s&&J.default.createElement(H,{category:H.CATEGORY.fill,type:H.TYPE.gray,size:H.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),g))}var _n=cs;r();n();var ps=()=>{let e=ut();return We(e,0)&&(e="0"),e},Cn=ps;r();n();r();n();var ls=()=>0,xn=ls;var gn=xn;r();n();var fs=({loading:e,disabled:t,onClick:o,...i})=>no(()=>{let s=!t&&e;return[{onClick:o,disabled:t,size:H.SIZE.lg,loading:s,type:H.TYPE.highlight,category:H.CATEGORY.fill,"data-testid":Do.SEND_PAGE.SEND_AMOUNT_CONFIRM_BUTTON,btnText:f("wallet_extension_send_btn_continue"),...i}]},[t,e,o,i]),ds=({disabled:e,onClick:t,...o})=>{let i=or(),s=at();return fs({...o,disabled:e||s,onClick:t||i})},yn=ds;r();n();var Wt={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function _s({isGlobalLoading:e,renderError:t,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:u={},checkEmpty:p=!0,inputAmount:l,customMaxAmount:d,footerActions:g}){let x=U(),{content:N}=u,{header:I,bottom:T,footer:S}=a,O=(0,Y.useRef)(null),v=R(To),w=Oe(),B=ke(),q=R(xo),h=R(yo),y=rt(),A=qo(),L=Cn(),D=d||L,{amount:V}=Tr(),j=(0,Y.useRef)(!!B),ie=W=>{x(Po(W))},Re=()=>{x(vt(D)),ie(!0)},Q=m.onMax||Re;nn(p),(0,Y.useEffect)(()=>{De(l)||O.current?.setInputAmount(l.toString()),De(V)||O.current?.setInputAmount(V)},[l,V]);let ae=yn(i),xe=gn();return Y.default.createElement(xt,{loading:e,footerActions:!e&&!S?g||ae:void 0,slot:{header:I||Y.default.createElement(on,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:!e&&S}},Y.default.createElement("div",{className:(0,Tn.default)(N,Wt.content)},Y.default.createElement(Ko,{ref:O,...s,autoFocus:!v,coinId:w,maximumMode:A,maximumAmount:A?D:null,maxAmount:D,initialValue:{value:[B||"0",q||"0"],mode:h,flatCurrencyId:y},onAmountChange:([W,X],me)=>{x(bo(X)),x(vt(W)),me&&(ie(!1),j.current=!0)},onModeChnage:W=>{x(Ao(W))},onFlatChange:W=>{W&&x(Fo(W.currencyId))}}),j.current&&Y.default.createElement(fn,{renderError:t}),Y.default.createElement(de,{usePortal:!0,offsetBottom:m?.fixBottom?80-xe:104-xe,className:Wt.totalAmountWrap},Y.default.createElement(_n,{...m,onMax:()=>{Q(),j.current=!0}})),T))}var In=_s;r();n();var An=_(C());r();n();var Sn=_(C());function Cs(){let{coin:e}=$(),t=ke();return(0,Sn.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:e.symbol,amt:t})}],[e.symbol,t])}var bn=Cs;function xs({walletId:e,txSource:t=kt.NORMAL,children:o}){let i=bn(),s=rt(),m=ot(),{coin:a}=$(),u=tt(),p=ve(),l=et(),d=k.BRC20_INSCRIBE,g=R(lo),x=(I,T)=>({...I,coinAmount:m,coinId:T?u.coinId:a.coinId,txSource:t||kt.NORMAL}),N=(I,T)=>({noBroadCast:!1,commitParams:I?x(I,!0):null,revealParams:Array.isArray(T)?T.map(S=>x(S,!1)):T});return An.default.createElement(Rt,{defaultFeeData:g,currencyId:s,params:{walletId:e||l,from:p,inscriptions:i,utxoType:sr.INSCRIPTION_USE_NFT_UTXO,txType:d,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:N}},o)}var At=xs;r();n();var Ye=_(C());function gs(){let e=U(),{isInitLoading:t,error:o,fee:i,feeData:s,canTransferAmount:m}=bt();return(0,Ye.useEffect)(()=>{e(ko(m))},[m]),(0,Ye.useEffect)(()=>{e(ho(i))},[i]),(0,Ye.useEffect)(()=>{e(fo(s))},[s]),(0,Ye.useEffect)(()=>{e(Eo(!!o))},[o]),t}var ht=gs;r();n();var hn=_(C());function Gt(){let e=mt();return(0,hn.useCallback)(t=>Ot(t,e)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:te.COMMON_ERROR}:null,[e])}function ys(){let e=U(),t=Qo(),o=Gt(),i=[t,o],{runErrorFns:s}=st(i,[]);nt(s,m=>{e(So(m))})}var En=ys;r();n();var Et=_(C());function Ts(){let e=U(),t=ve(),{coin:o}=$(),[i,s]=(0,Et.useState)(!0);return(0,Et.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Ke(ze.postPendingBalanceDetail,{address:t,coinId:o.coinId});a?.data&&e(Oo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[t,o.coinId]),i}var Pn=Ts;function Is({amount:e,onCancel:t,onConfirm:o,slot:i,...s}){let m=at(),a=ht(),u=Pn(),{loading:p,onClick:l}=$e(t),d=(0,Ce.useMemo)(()=>{let g=[];return typeof t=="function"&&g.push({loading:p,actionType:G.ACTION_TYPE.CANCEL,onClick:l}),g.push({actionType:G.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}),g},[t,o,m,a,p,l]);return En(),Ce.default.createElement(In,{...s,inputAmount:e,isGlobalLoading:u,slot:{...i,footer:Ce.default.createElement(de,{usePortal:!0,placeholder:!0,offsetBottom:0},Ce.default.createElement(G,{buttonGroup:d}))},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps},totalAmountProps:{...s.totalAmountProps,title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps,disabled:{input:!1,switch:!0}}})}function Ss({walletId:e,...t}){return Ce.default.createElement(At,{walletId:e},Ce.default.createElement(Is,{...t}))}var xf=Ss;r();n();var se=_(C());r();n();var Pt=_(C());var bs=({coinId:e,amount:t})=>{let o=oe(e),{loading:i,data:s}=io(async()=>{let m={op:"transfer",amount:t,tick:o.symbol};return(await ro(m))?.brcJson||""});return Pt.default.createElement(_e,{label:f("extension_wallet_transaction_item_inscribe_preview"),value:Pt.default.createElement(b.Spin,{loading:i},Pt.default.createElement("span",{style:{wordBreak:"break-all"}},s))})},Fn=bs;r();n();var zt=_(C());function As(e){let t=R(go);return(0,zt.useCallback)(()=>t?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:e?.chainName},type:te.FEE_BALANCE_INSUFFICIENT}:null,[t,e])}function hs(){let e=Gt();return(0,zt.useCallback)(t=>{let o=e(t);return o?{...o,highlight:er.AMOUNT}:null},[e])}function Es(e,t){let o=U(),i=oe(t),s=As(i),m=tr(),a=hs(),u=[s,m,a],{runErrorFns:p}=st(u,[]);nt(p,l=>{o(No(l))},e)}var Nn=Es;r();n();var Bn={top:"_top_w7xvl_1"};function Ps({onCancel:e,onConfirm:t,walletId:o,addressCheckRet:i={}}){let s=U(),m=ke(),a=Oe(),[,u]=Yo(a),p=ot(),l=ht(),d=(0,se.useCallback)(async()=>{await s(Io(!1))},[s]);return Nn(l,a),se.default.createElement($t,{addressCheckRet:i,walletId:o,slot:{top:se.default.createElement(b.Space,{direction:b.DIRECTION.vertical,space:24,className:Bn.top},se.default.createElement(fr,{coinId:a,assetChange:p,hideSign:!0}),se.default.createElement(He.Thin,{compact:!0})),mid:se.default.createElement(Fn,{coinId:a,amount:m})},headerProps:{title:f("extension_wallet_transaction_item_inscribe")},confirmButtonProps:{onCancel:e,onConfirm:t,onFillUp:d},netWorkCoinId:u?.coinId})}function Fs({txSource:e,walletId:t,...o}){return se.default.createElement(At,{txSource:e,walletId:t},se.default.createElement(Ps,{walletId:t,...o}))}var ad=Fs;r();n();var On=_(C());function Ns({children:e,...t}){return On.default.createElement(Zo.Provider,{value:t},e)}var ld=Ns;export{xt as a,on as b,nn as c,Yt as d,fs as e,In as f,It as g,Fr as h,Br as i,ue as j,$t as k,Rt as l,xf as m,ad as n,ld as o};
//# sourceMappingURL=chunk-UZL4Z4Q6.js.map
