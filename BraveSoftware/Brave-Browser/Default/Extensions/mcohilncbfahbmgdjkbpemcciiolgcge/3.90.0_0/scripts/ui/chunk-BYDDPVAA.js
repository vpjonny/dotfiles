import{a as u}from"./chunk-RFTC6RNT.js";import{f as c}from"./chunk-XOHZCMW2.js";import{b as y}from"./chunk-FLSAETOH.js";import{Aa as E,N as p}from"./chunk-4C5HF6J2.js";import{f as b,n as process,o as d,q as g}from"./chunk-UWURTNRY.js";d();g();var e=b(y());E();var o,t,C=(a,s={})=>{let[r,w]=(0,e.useState)(null),[i,f]=(0,e.useState)(s),l=(0,e.useCallback)(n=>{n.data.chanel===a&&(w(n.data),window.removeEventListener("message",l))},[a]);return(0,e.useEffect)(()=>{p(s,i)||f(s)},[s]),(0,e.useEffect)(()=>{if(r||t)return()=>{};let n=document.getElementById("sandbox"),m=v=>{v.data.status===201&&(window.removeEventListener("message",m),o&&clearInterval(o),t=n)},T=u();return!o&&!t&&(o=setInterval(()=>{n.contentWindow?.postMessage({status:200,buildType:process.env.ASSETS_BUILD_TYPE,cdn:c(),browser:T},"*")},1e3)),window.addEventListener("message",m),()=>{window.removeEventListener("message",m)}},[r]),(0,e.useEffect)(()=>(a&&t&&(window.addEventListener("message",l),t.contentWindow?.postMessage({chanel:a,data:i},"*")),()=>{window.removeEventListener("message",l)}),[a,t,i]),r};export{C as a};
//# sourceMappingURL=chunk-BYDDPVAA.js.map
