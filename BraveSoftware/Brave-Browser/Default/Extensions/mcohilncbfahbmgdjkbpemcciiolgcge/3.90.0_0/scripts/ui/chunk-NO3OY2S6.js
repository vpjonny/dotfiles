import{b as fe}from"./chunk-FLSAETOH.js";import{f as le,o as N,q as $}from"./chunk-UWURTNRY.js";N();$();var F=le(fe(),1);var T=class Z extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,Z.prototype)}};function de(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}var _e="ERR_INVALID_VALUE",be="ERR_UNEXPECTED_VALUE",he="ERR_UNEXPECTED_TYPE",me="ERR_PARSE";function ge(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch(n){throw new T(_e,{cause:n})}if(typeof t!="object"||!t||Array.isArray(t))throw new T(be);return t}function C(e,t){return n=>{let o=r=>{if(!(n&&r===void 0))try{return t(r)}catch(s){throw new T(me,{message:`"${e}" transformer failed to parse the value`,cause:s})}};return Object.assign(o,{isValid(r){try{return o(r),!0}catch{return!1}}})}}function I(e){throw new T(he,`Unexpected value received: ${JSON.stringify(e)}`)}var Dt=C("boolean",e=>{if(typeof e=="boolean")return e;let t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;I(e)}),we=C("string",e=>{if(typeof e=="string"||typeof e=="number")return e.toString();I(e)}),ye=C("number",e=>{if(typeof e=="number")return e;if(typeof e=="string"){let t=Number(e);if(!Number.isNaN(t))return t}I(e)}),Mt=C("date",e=>e instanceof Date?e:new Date(ye()(e)*1e3));function K(e){return/^#[\da-f]{6}$/i.test(e)}function Ee(e){return/^#[\da-f]{3}$/i.test(e)}function ve(e){let t=e.replace(/\s/g,"").toLowerCase();if(K(t))return t;if(Ee(t)){let o="#";for(let r=0;r<3;r+=1)o+=t[1+r].repeat(2);return o}let n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((o,r)=>{let s=parseInt(r,10).toString(16);return o+(s.length===1?"0":"")+s},"#")}var Se=C("rgb",e=>ve(we()(e))),Vt=C("themeParams",e=>{let t=Se(!0);return Object.entries(ge(e)).reduce((n,[o,r])=>(n[de(o)]=t(r),n),{})});var R=class X extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,X.prototype)}};function Ce(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}var Ae="ERR_INVALID_VALUE",Be="ERR_UNEXPECTED_VALUE",Pe="ERR_UNEXPECTED_TYPE",Q="ERR_PARSE";function Re(e,t){let n={};for(let o in e){let r=e[o];if(!r)continue;let s,i;typeof r=="function"?(s=o,i=r):[s,i]=r;try{let u=i(t(s));u!==void 0&&(n[o]=u)}catch(u){throw new R(Q,`Parser for "${o}" property failed${s===o?"":`. Source field: "${s}"`}`,u)}}return n}function Y(e){let t=e;if(typeof t=="string")try{t=JSON.parse(t)}catch(n){throw new R(Ae,{cause:n})}if(typeof t!="object"||!t||Array.isArray(t))throw new R(Be);return t}function m(e,t){return n=>{let o=r=>{if(!(n&&r===void 0))try{return t(r)}catch(s){throw new R(Q,{message:`"${e}" transformer failed to parse the value`,cause:s})}};return Object.assign(o,{isValid(r){try{return o(r),!0}catch{return!1}}})}}function g(e,t){return m(t||"object",n=>{let o=Y(n);return Re(e,r=>o[r])})}function O(e){throw new R(Pe,`Unexpected value received: ${JSON.stringify(e)}`)}var q=m("boolean",e=>{if(typeof e=="boolean")return e;let t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;O(e)}),E=m("string",e=>{if(typeof e=="string"||typeof e=="number")return e.toString();O(e)}),j=m("number",e=>{if(typeof e=="number")return e;if(typeof e=="string"){let t=Number(e);if(!Number.isNaN(t))return t}O(e)}),jt=m("date",e=>e instanceof Date?e:new Date(j()(e)*1e3));function Te(e){return/^#[\da-f]{6}$/i.test(e)}function ke(e){return/^#[\da-f]{3}$/i.test(e)}function Oe(e){let t=e.replace(/\s/g,"").toLowerCase();if(Te(t))return t;if(ke(t)){let o="#";for(let r=0;r<3;r+=1)o+=t[1+r].repeat(2);return o}let n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((o,r)=>{let s=parseInt(r,10).toString(16);return o+(s.length===1?"0":"")+s},"#")}var xe=m("rgb",e=>Oe(E()(e))),It=m("themeParams",e=>{let t=xe(!0);return Object.entries(Y(e)).reduce((n,[o,r])=>(n[Ce(o)]=t(r),n),{})});var De=g({eventType:E(),eventData:e=>e},"miniAppsMessage"),ee=m("fn",e=>{if(typeof e=="function")return e;O(e)});var Me=g({TelegramWebviewProxy:g({postEvent:ee()})()});function Ve(e){return Me().isValid(e)}function je(){try{return window.self!==window.top}catch{return!0}}var te=class ne extends Error{constructor(t,n,o){super(typeof n=="object"?n.message:n||t,{cause:typeof n=="object"?n.cause:o}),this.type=t,Object.setPrototypeOf(this,ne.prototype)}};function U(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Ie(...e){let t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function Le(e,t){return e instanceof te&&e.type===t}function L(e){return t=>Le(t,e)}var Ne="ERR_ABORTED",$e="ERR_CANCELED",qe="ERR_TIMED_OUT";var Lt=L(qe),Nt=L(Ne),$t=L($e);function oe(e){return`tapps/${e}`}function Ue(e,t){sessionStorage.setItem(oe(e),JSON.stringify(t))}function He(e){let t=sessionStorage.getItem(oe(e));try{return t?JSON.parse(t):void 0}catch{}}function We(e,t){t||(t={});let{textColor:n,bgColor:o,shouldLog:r=!0}=t;function s(i,...u){if(!r||typeof r=="function"&&!r())return;let c="font-weight:bold;padding:0 5px;border-radius:5px";console[i](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${c};background-color: lightblue;color:black`,"",`${c};${n?`color:${n};`:""}${o?`background-color:${o}`:""}`,...u)}return[function(...i){s("log",...i)},function(...i){s("error",...i)}]}function ze(e,t){t()}function A(e,t){t||(t={});let n=t.equals||Object.is,o=[],r=e,s=a=>{if(!n(r,a)){let p=r;r=a,ze(c,()=>{[...o].forEach(([d,h])=>{d(a,p),h&&u(d,!0)})})}};function i(a){let p=typeof a!="object"?{once:a}:a;return{once:p.once||!1,signal:p.signal||!1}}let u=(a,p)=>{let d=i(p),h=o.findIndex(([D,B])=>D===a&&B.once===d.once&&B.signal===d.signal);h>=0&&o.splice(h,1)},c=Object.assign(function(){return Ge(c),r},{destroy(){o=[]},set:s,reset(){s(e)},sub(a,p){return o.push([a,i(p)]),()=>u(a,p)},unsub:u,unsubAll(){o=o.filter(a=>a[1].signal)}});return c}var M=[];function Ge(e){M.length&&M[M.length-1].add(e)}var Je=A(!1),[re,Fe]=We("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:Je}),Ze={clipboard_text_received:g({req_id:E(),data:e=>e===null?e:E(!0)(e)},"clipboard_text_received"),custom_method_invoked:g({req_id:E(),result:e=>e,error:E(!0)},"custom_method_invoked"),popup_closed:m("popup_closed",e=>e?g({button_id:t=>t==null?void 0:E()(t)})()(e):{}),viewport_changed:g({height:j(),width:e=>e==null?window.innerWidth:j()(e),is_state_stable:q(),is_expanded:q()},"viewport_changed")};function Ke(e){let t=window,[,n]=Ie(U(t,"resize",()=>{e(["viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0}])}),U(t,"message",o=>{if(o.source!==t.parent)return;let r;try{r=De()(o.data)}catch{return}let{eventType:s,eventData:i}=r,u=Ze[s];try{let c=u?u()(i):i;re("Event received:",c?{eventType:s,eventData:c}:{eventType:s}),e([s,c])}catch(c){Fe([`An error occurred processing the "${s}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),r,c)}}));return n}var H=A(),W=A();function Xe(){return W()||W.set(Ke(H.set)),H}var V=A({});function se(e){let t=V()[e];return t||(t=A(void 0,{equals(){return!1}}),Xe().sub(n=>{n&&n[0]===e&&t.set(n[1])}),V.set({...V(),[e]:t})),t}function Qe(e,t,n){return se(e).sub(t,n)}var Ye="ERR_UNKNOWN_ENV";var et=A("https://web.telegram.org");function tt(e,t){re("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});let n=window;if(Ve(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}let o=JSON.stringify({eventType:e,eventData:t});if(je())return n.parent.postMessage(o,et());let{external:r}=n;if(g({notify:ee()})().isValid(r)){r.notify(o);return}throw new te(Ye)}function nt(e,t,n){se(e).unsub(t,n)}function z(e){return e.split(".").map(Number)}function ot(e,t){let n=z(e),o=z(t),r=Math.max(n.length,o.length);for(let s=0;s<r;s+=1){let i=n[s]||0,u=o[s]||0;if(i!==u)return i>u?1:-1}return 0}function f(e,t){return ot(e,t)<=0}function rt(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return f("6.4",n);if(t==="try_browser")return f("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return f("6.9",n);if(e==="web_app_close"&&t==="return_back")return f("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return f("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return f("6.1",t);case"web_app_open_popup":return f("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return f("6.4",t);case"web_app_switch_inline_query":return f("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return f("6.9",t);case"web_app_setup_settings_button":return f("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return f("7.2",t);case"web_app_setup_swipe_behavior":return f("7.7",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return f("7.10",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function st(){return performance.getEntriesByType("navigation")[0]}function at(){let e=st();return!!e&&e.type==="reload"}var G;function it(e,t){G&&G.set(e,t)||t()}function _(e,t){t||(t={});let n=t.equals||Object.is,o=[],r=e,s=a=>{if(!n(r,a)){let p=r;r=a,it(c,()=>{[...o].forEach(([d,h])=>{d(a,p),h&&u(d,!0)})})}};function i(a){let p=typeof a!="object"?{once:a}:a;return{once:p.once||!1,signal:p.signal||!1}}let u=(a,p)=>{let d=i(p),h=o.findIndex(([D,B])=>D===a&&B.once===d.once&&B.signal===d.signal);h>=0&&o.splice(h,1)},c=Object.assign(function(){return ut(c),r},{destroy(){o=[]},set:s,reset(){s(e)},sub(a,p){return o.push([a,i(p)]),()=>u(a,p)},unsub:u,unsubAll(){o=o.filter(a=>a[1].signal)}});return c}var P=[];function ut(e){P.length&&P[P.length-1].add(e)}function w(e,t){let n=new Set,o=_(s(),t);function r(){o.set(s())}function s(){n.forEach(c=>c.unsub(r,{signal:!0}));let i=new Set,u;P.push(i);try{u=e()}finally{P.pop()}return i.forEach(c=>{c.sub(r,{signal:!0})}),n=i,u}return Object.assign(function(){return o()},{destroy:o.destroy,sub:o.sub,unsub:o.unsub,unsubAll:o.unsubAll})}var ct=_(tt),pt=_("0.0");var lt=(e,t)=>ct()(e,t);function ft(e,t){t(),e.sub(t)}var ae="web_app_setup_back_button",ie="back_button_pressed",ue="backButton";function dt(){v.set(!1)}function _t(){return rt(ae,pt())}var v=_(!1),k=_(!1);function bt(){k()||(v.set(at()&&He(ue)||!1),ft(v,ce),k.set(!0))}function ce(){let e=v();lt(ae,{is_visible:e}),Ue(ue,e)}function ht(e){return Qe(ie,e)}function mt(e){nt(ie,e)}function gt(){v.set(!0)}function wt(){v.unsub(ce),k.set(!1)}var qt=Object.freeze(Object.defineProperty({__proto__:null,hide:dt,isMounted:k,isSupported:_t,isVisible:v,mount:bt,offClick:mt,onClick:ht,show:gt,unmount:wt},Symbol.toStringTag,{value:"Module"}));var yt=_(void 0);function b(e){return w(()=>{let t=yt();return t?t[e]:void 0})}var Ut=b("authDate"),Ht=b("canSendAfter");var Wt=b("chat"),zt=b("chatType"),Gt=b("chatInstance"),Jt=b("hash"),Ft=b("queryId");var Zt=b("receiver");var Kt=b("startParam"),Xt=b("user");var Et=_({});function l(e){return w(()=>Et()[e])}var Qt=l("accentTextColor"),vt=l("bgColor"),pe=l("buttonColor"),St=l("buttonTextColor"),Ct=l("bottomBarBgColor"),Yt=l("destructiveTextColor"),en=l("headerBgColor"),tn=l("hintColor");var nn=l("linkColor"),J=l("secondaryBgColor"),on=l("sectionBgColor"),rn=l("sectionHeaderTextColor"),sn=l("sectionSeparatorColor"),an=l("subtitleTextColor"),un=l("textColor");function S(e){return w(()=>Bt()[e])}var At=_({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),Bt=w(()=>{let e=At();return{...e,backgroundColor:e.backgroundColor||pe()||"#2481cc",textColor:e.textColor||St()||"#ffffff"}});var cn=S("backgroundColor"),pn=S("hasShineEffect"),ln=S("isEnabled"),fn=S("isLoaderVisible"),dn=S("isVisible"),_n=S("text"),bn=S("textColor");var Pt=_("bottom_bar_bg_color"),Rt=w(()=>{let e=Pt();return K(e)?e:e==="bottom_bar_bg_color"?Ct()||J():e==="secondary_bg_color"?J():vt()});function y(e){return w(()=>kt()[e])}var Tt=_({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),kt=w(()=>{let e=Tt();return{...e,backgroundColor:e.backgroundColor||Rt()||"#000000",textColor:e.textColor||pe()||"#2481cc"}});var hn=y("backgroundColor"),mn=y("hasShineEffect"),gn=y("isEnabled"),wn=y("isLoaderVisible"),yn=y("isVisible"),En=y("position"),vn=y("text"),Sn=y("textColor");var Ot=_({height:0,width:0,isExpanded:!1,stableHeight:0});function x(e){return w(()=>Ot()[e])}var Cn=x("height"),An=x("isExpanded");var Bn=x("stableHeight"),Pn=x("width");export{qt as a};
//# sourceMappingURL=chunk-NO3OY2S6.js.map
