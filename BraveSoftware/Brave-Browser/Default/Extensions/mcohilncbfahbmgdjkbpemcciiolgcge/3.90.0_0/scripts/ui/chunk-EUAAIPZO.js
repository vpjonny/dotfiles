import{c as Et}from"./chunk-GCJ2PJNQ.js";import{a as qe}from"./chunk-A4R53AVX.js";import{a as Dt}from"./chunk-TJ3NTWVS.js";import{a as Ut}from"./chunk-634WRNGH.js";import{a as Pt,b as zt}from"./chunk-RN5VSY2K.js";import{a as Ye}from"./chunk-YPWPNJRG.js";import{a as le,d as Bt}from"./chunk-C4TBDTQO.js";import{a as je}from"./chunk-6AUQLYPZ.js";import{a as $t}from"./chunk-UPIYMC4Q.js";import{c as At,d as Ft,e as G,f as Ot}from"./chunk-ZUO5BDO3.js";import{a as Mt}from"./chunk-A7EUFORV.js";import{Q as Pe}from"./chunk-RZOHZNJG.js";import{l as St}from"./chunk-V7YATDMZ.js";import{c as jt}from"./chunk-X4IU7NMU.js";import{A as It}from"./chunk-BIUKJDG5.js";import{d as Tt}from"./chunk-JYCBCMDP.js";import{Va as gt}from"./chunk-VHMBEOFX.js";import{a as ve}from"./chunk-W3VW6MYS.js";import{b as Po}from"./chunk-CSTKCSUP.js";import{a as kt,e as Be}from"./chunk-M43NTBTB.js";import{c as Ze}from"./chunk-PMG6IXOR.js";import{k as xt}from"./chunk-NS5EW6UN.js";import{b as Lt}from"./chunk-YVLQLIW6.js";import{a as jo,h as Te,o as y}from"./chunk-N6PI3XTA.js";import{f as Ct}from"./chunk-7DW2ZPOD.js";import{a as W}from"./chunk-MJSLAJV6.js";import{B as yt,a as te,i as Ve,n as ne}from"./chunk-KC2XLVFC.js";import{M as ft,ra as Se}from"./chunk-MJDO2VHF.js";import{c as V}from"./chunk-3F7OC7N7.js";import{b as vt,c as Ie}from"./chunk-OKGWI7CU.js";import{f as ct}from"./chunk-EPDR6VAQ.js";import{e as wt,h as bt}from"./chunk-ZIR6OOXX.js";import{c as s}from"./chunk-3FMJDUGT.js";import{gb as Le}from"./chunk-EQ34WRCJ.js";import{B as ut,k as z,o as ee,p,q as ke}from"./chunk-DSNMNSMD.js";import{J as ht,_ as Ae,b as Nt,o as ae}from"./chunk-URGJ6D4O.js";import{a as oe}from"./chunk-IQUFNLVG.js";import{C as U,t as Ee}from"./chunk-XYWWXNVK.js";import{a as Me}from"./chunk-FB3ILH2L.js";import{b as g}from"./chunk-FLSAETOH.js";import{$ as _t,Aa as be,G as pt,Q as ye,a as dt,b as Je,g as se}from"./chunk-4C5HF6J2.js";import{f as c,o as n,q as i}from"./chunk-UWURTNRY.js";n();i();var Ht=c(Po());var Fo={[ve.TOKEN_METHOD_APPROVE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},[ve.TOKEN_METHOD_INCREASE_ALLOWANCE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}},Or=e=>[V.AUTHORIZATION,V.NFT_AUTHORIZATION,V.COMMON_APPROVE].includes(e),Dr=e=>[V.CANCEL_AUTHORIZATION,V.NFT_CANCEL_AUTHORIZATION].includes(e),Oo=({spender:e,value:t,type:o})=>!e||ct(t,0)?"":Ht.default.encodeMethod(Fo[o],[e,t]);function zr(e,{approveAmount:t},o){if(o){if(o.name!==ve.TOKEN_METHOD_APPROVE&&o.name!==ve.TOKEN_METHOD_INCREASE_ALLOWANCE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${o.name}'`)}else throw new Error("Invalid data");let r=Et(o);return Oo({spender:r,value:t,type:o.name})}var Ke=(e,t=24)=>e?.length>t?`${e.slice(0,t)}...`:e;n();i();var C=c(g());be();n();i();var Xe=c(g());var Do=({txState:{txId:e="",baseCoin:t={},estimateFailed:o=!1,isSufficientBalance:r=!0,isSufficientGas:a=!0,estimateFailedMsg:m,coinWithBalance:l={}},loading:f,walletAccount:d,preExecRet:x={},chainHeaderTips:B=[],maxNetworkFee:h,useMinPrecision:j=!0})=>{let{isBalanceLoadError:w,requestBalance:P,coinAmount:I}=l||{},{tipMessageInfo:F,needFillUp:Q}=x,O=(0,Xe.useMemo)(()=>{if(!!h)return j?z.div(h,10**(t?.decimals||0)):h},[t?.decimals,h,j]),D=(0,Xe.useMemo)(()=>{let L=[],b=t?.coinId,{address:J,walletId:Z}=d,ie=O?W(O,{symbol:t?.symbol,precision:t?.displayPrecision,isStableCoin:t?.stableCoin,useLargeNumberPrecision:!0}).value:void 0,M={type:le.FEE_BALANCE_INSUFFICIENT,renderMessage:()=>p("wallet_extension_transfer_notification_desc_balance_netfee",{numtoken1:t?.symbol,value1:W(I,{useLargeNumberPrecision:!0,precision:l?.displayPrecision,isStableCoin:l?.stableCoin}).value,numtoken2:t?.symbol,value2:ie}),txId:e,coinId:b,address:J,walletId:Z,level:820};if(w&&L.push({message:p("wallet_extension_transfer_error_text_wallet_balance_unavailable"),level:850,actions:[{useRefresh:!0,btnText:p("wallet_extension_transfer_error_text_reload"),onClick:P}]}),Q){let R=O?M:{type:le.FEE_BALANCE_INSUFFICIENT,renderMessage:()=>p("wallet_extension_toast_insufficient_balance_amount",{token:t?.symbol,balance:W(I,{useLargeNumberPrecision:!0,precision:l?.displayPrecision,isStableCoin:l?.stableCoin}).value}),txId:e,coinId:b,address:J,walletId:Z,level:820};L.push(R)}if(o&&L.push({type:le.FEE_ERROR,message:m,level:775}),!a){let R=O?M:{type:le.FEE_BALANCE_INSUFFICIENT,renderMessage:()=>p("wallet_extension_toast_insufficient_balance_amt_netfee",{token:t?.symbol,amount:W(I,{useLargeNumberPrecision:!0,precision:l?.displayPrecision,isStableCoin:l?.stableCoin}).value}),txId:e,coinId:b,address:J,walletId:Z,level:765};L.push(R)}return r||L.push({type:le.BALANCE_INSUFFICIENT,renderMessage:()=>p("wallet_extension_toast_insufficient_balance_txn_cost",{token:t?.symbol,amount:W(I,{useLargeNumberPrecision:!0,precision:l?.displayPrecision,isStableCoin:l?.stableCoin}).value}),txId:e,coinId:b,address:J,walletId:Z,level:760}),L},[t?.coinId,t?.symbol,d,w,a,r,o,P,e,I,m,Q,l?.decimals]),S=F?.tipMessage?{message:F.tipMessage,level:F.level}:null;return f?null:[...D,S,...B].filter(Boolean).sort((L,b)=>L.level-b.level).pop()||null},Wt=Do;n();i();var Gt=c(g());var zo=e=>{let{address:t,title:o,localType:r,className:a,showAccountNameFlag:m,redShow:l}=e,d=jt(r)(t),x=Boolean(t&&d?.name);return Gt.default.createElement(Ot,{className:a,address:t,connectable:!l,title:o,tags:x&&m?[d?.name]:null})},Fe=zo;n();i();var T=c(g()),Re=c(jo());be();n();i();var N=c(g()),Vt=c(Me());be();n();i();var $={"retina-border-basic":"_retina-border-basic_ir9et_1",retinaBorderBasic:"_retina-border-basic_ir9et_1",root:"_root_ir9et_29",noPadding:"_noPadding_ir9et_29",firstLayerWrap:"_firstLayerWrap_ir9et_29",blockItem:"_blockItem_ir9et_75",blockItemLabel:"_blockItemLabel_ir9et_75",wholeLine:"_wholeLine_ir9et_82",blockItemValue:"_blockItemValue_ir9et_85",fieldItem:"_fieldItem_ir9et_91",fieldLabel:"_fieldLabel_ir9et_98",fieldValue:"_fieldValue_ir9et_105",item:"_item_ir9et_113"};var Zt=({label:e,value:t,children:o})=>N.default.createElement(s.Box,{className:$.blockItem},N.default.createElement(y.Text,{ellipsis:{tooltip:!0},className:`${$.blockItemLabel} ${o?"":$.wholeLine}`},e,":"),o||N.default.createElement(s.Box,{className:$.blockItemValue},t)),Yt=({label:e,value:t})=>N.default.createElement(s.Box,{className:$.fieldItem},N.default.createElement(y.Text,{ellipsis:{tooltip:!0},className:$.fieldLabel},e,":"),N.default.createElement(s.Box,{className:$.fieldValue},t)),qt=({value:e,layer:t})=>Object.entries(e).map(([o,r])=>N.default.createElement(s.Box,{className:$.item},!!r&&typeof r=="object"?N.default.createElement(Zt,{label:o,value:r},N.default.createElement(qt,{label:o,value:r,layer:t+1})):N.default.createElement(Yt,{label:o,value:r}))),Jt=({message:e,noPadding:t})=>Je(e)?N.default.createElement(s.Box,{className:(0,Vt.default)($.root,{[$.noPadding]:t})},Object.entries(e).map(([o,r])=>N.default.createElement(s.Box,{className:$.firstLayerWrap},r?N.default.createElement(Zt,{label:o,value:r},Je(r)||dt(r)?N.default.createElement(qt,{label:o,value:r,layer:1}):null):N.default.createElement(Yt,{label:o,value:String(r)})))):null,Uo=({message:e,noPadding:t=!1})=>Array.isArray(e)?e.map(o=>N.default.createElement(Jt,{message:o,noPadding:t})):N.default.createElement(Jt,{message:e,noPadding:t}),Kt=Uo;n();i();var Qe=c(g());var $o=({preExecParams:e})=>{let{message:t}=e;return Qe.default.createElement(s.Box,null,Qe.default.createElement(zt,{message:t}))},me=$o;n();i();var de=c(g());var Ho="yyyyMMddHHmmss",Wo=e=>{let{title:t,text:o,type:r,copyable:a=!1}=e,m=Se(Ct),l=(0,de.useMemo)(()=>r==="date"?ut(o,{format:Ho,locale:m}):o,[r,o,m]),f=(0,de.useMemo)(()=>{if(a)return{text:l,successText:p("wallet_receive_toast_address_copied")}},[l,a]);return l.length>50?de.default.createElement(me,{preExecParams:{message:[{value:l,name:t}]}}):de.default.createElement(G,{label:t,value:l,copyConfig:f})},Oe=Wo;n();i();var q={root:"_root_ze8z0_1",dividerLine:"_dividerLine_ze8z0_4",titleContent:"_titleContent_ze8z0_9",titleText:"_titleText_ze8z0_14",content:"_content_ze8z0_20",contractAddress:"_contractAddress_ze8z0_24",tabContent:"_tabContent_ze8z0_27",data:"_data_ze8z0_30",abi:"_abi_ze8z0_33",icon:"_icon_ze8z0_43",copyableText:"_copyableText_ze8z0_47",address:"_address_ze8z0_50",dialogContentWrapper:"_dialogContentWrapper_ze8z0_53",dialogContent:"_dialogContent_ze8z0_53"};var Xt=e=>{typeof e=="string"?(0,Re.default)(e):(0,Re.default)(JSON.stringify(e)),ht.success({title:p("wallet_receive_toast_address_copied")})},Go=e=>{let{type:t,data:o}=e;return T.default.createElement(s.Box,{className:q.dialogContentWrapper},T.default.createElement(s.Box,{className:q.dialogContent,onClick:()=>{Xt(o)}},T.default.createElement(y.Text,{forceWrap:!0,size:y.SIZE.sm,className:q.data},t==="text"?o:T.default.createElement("pre",{className:q.abi},JSON.stringify(JSON.parse(o),null,2)))))},Jo=e=>{let{title:t,type:o,data:r}=e;return T.default.createElement(Ye,{label:t},T.default.createElement(Go,{type:o,data:r}))},Vo=e=>T.default.createElement(s.Space,{space:24,direction:s.DIRECTION.vertical},e?.children?.map((t,o)=>{let{type:r,data:a,title:m}=t,l=`${m}_${o}`;return T.default.createElement(Jo,{key:l,title:m,type:r,data:a})})),Zo=e=>T.default.createElement(Fe,{...e,className:q.address}),Yo=e=>{let{data:t}=e,o=t;try{o=JSON.parse(t)}catch{}return T.default.createElement(s.Box,{className:q.dialogContentWrapper},T.default.createElement(s.Box,{className:q.dialogContent,onClick:()=>{Xt(o)}},pt(o)?T.default.createElement(y.Text,{forceWrap:!0,size:y.SIZE.sm},o):T.default.createElement(Kt,{message:o,noPadding:!0})))},qo=e=>T.default.createElement(Ye,{label:e.title},T.default.createElement(Yo,{...e})),Ko=e=>T.default.createElement(Oe,{...e,copyable:!0}),Xo=e=>T.default.createElement(me,{...e}),Qo={tabs:Vo,address:Zo,signJsonRouter:qo,text:Ko,message:Xo},Ro=e=>{let{title:t,children:o,listExpansion:r}=e;return T.default.createElement(Dt,{title:t,className:q.root,defaultExpanded:r},T.default.createElement(s.Space,{space:24,direction:s.DIRECTION.vertical},o.map((a,m)=>{let{moduleName:l,data:f}=a,d=`${l}-${m}`,x=Qo[l];return x?T.default.createElement(x,{key:d,...f}):null})))},Qt=Ro;n();i();var $e=c(g());n();i();var k=c(g());var Rt=c(Me());n();i();var ze=c(g());n();i();var De={root:"_root_195s5_1",image:"_image_195s5_7",text:"_text_195s5_13"};var er=({imageUrl:e,text:t})=>ze.default.createElement(s.Box,{className:De.root},ze.default.createElement(oe,{src:e,className:De.image,errorImg:Ie}),ze.default.createElement(y.Text,{ellipsis:{tooltip:t},className:De.text},t)),pe=er;n();i();var E={root:"_root_k44of_1",title:"_title_k44of_1","static-title":"_static-title_k44of_11",staticTitle:"_static-title_k44of_11",approveInfoList:"_approveInfoList_k44of_15",approve:"_approve_k44of_15",token:"_token_k44of_18",amount:"_amount_k44of_24",amountWrap:"_amountWrap_k44of_31",number:"_number_k44of_34",symbol:"_symbol_k44of_35",expiration:"_expiration_k44of_47",foldSwitch:"_foldSwitch_k44of_53",image:"_image_k44of_56",icon:"_icon_k44of_62",expanded:"_expanded_k44of_65",titleText:"_titleText_k44of_68"};var tr=({amount:e,decimals:t,stableCoin:o,signTokenPrecision:r})=>{if(Tt(e))return p("wallet_dapp_connection_subtitle_approval_amount_unlimitied");let a=z.div(e,z.pow(10,t));return W(a,{precision:r??z.digitLength(a),isStableCoin:o}).value},or=e=>{e&&typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=12?28:t<=14?26:t>14&&t<=16?24:t>16&&t<=18?22:t>18&&t<=20?20:t>20&&t<=22?18:16},rr=({approveInfoList:e,eip5792Call:t,renderEditApproveAmount:o,updateApproveInfo:r,txTitle:a})=>{let m=e.length>3,[l,{toggle:f}]=ne(m),d=l?e.slice(0,3):e;if(e.length===1){let[x]=e,{tokenInfo:B,spender:h}=x,{symbol:j,imageUrl:w}=B||{},P=Ke(j,12);if([V.CANCEL_AUTHORIZATION,V.NFT_CANCEL_AUTHORIZATION,V.DECREASE_ALLOWANCE].includes(h?.approvalType))return k.default.createElement(s.Box,{className:E.root},k.default.createElement(pe,{imageUrl:w,text:P}))}return k.default.createElement(s.Box,{className:E.root},k.default.createElement(s.Box,{className:E.approveInfoList},d.map((x,B)=>({...x,idLocal:B})).map((x,B)=>{let{amount:h,tokenInfo:j,expiration:w}=x,{decimals:P,symbol:I,imageUrl:F,signTokenPrecision:Q,stableCoin:O}=j||{},D=Ke(I,12),S=tr({amount:h,decimals:P,signTokenPrecision:Q,stableCoin:O});return k.default.createElement(s.Box,{className:E.approve,key:x.idLocal},k.default.createElement(s.Box,{className:E.token},k.default.createElement(s.Box,{className:E.amount},k.default.createElement(oe,{src:F,className:E.image,errorImg:Ie}),k.default.createElement(s.Box,null,k.default.createElement(y.AdaptiveText,{nowrap:!0,ellipsis:{tooltip:`${S} ${D}`},autoSize:or,text:`${S}${D}`,className:E.amountWrap},k.default.createElement(y.Text,{inherit:!0,className:E.number},S),k.default.createElement(y.Text,{inherit:!0,className:E.symbol},D)),w?k.default.createElement(s.Box,{className:E.expiration},p("wallet_extension_permitapproval_variable_days",{num:w})):null)),o({...x,eip5792Call:t,txTitle:a,index:B},r)))}),m&&k.default.createElement(Nt,{onClick:f,className:E.titleText},k.default.createElement("span",null,p(l?"extension_defi_card_textbtn_view_all":"extension_defi_card_textbtn_view_less")),k.default.createElement(Ee,{className:(0,Rt.default)(E.icon,"okx-wallet-plugin-arrow-small-down",{[E.expanded]:!l})}))))},eo=rr;n();i();var Ue=c(g()),to=c(Me());n();i();var Ce={root:"_root_1xbje_1",title:"_title_1xbje_6",risk:"_risk_1xbje_12",subTitle:"_subTitle_1xbje_18"};var nr=({title:e,subTitle:t,riskPopupInfo:o})=>{let r=Pe();if(!e)return null;let a=o?.moduleName==="txRiskExplain"?o?.data:null,m=()=>{!a||r([a])};return Ue.default.createElement("div",{className:Ce.root},Ue.default.createElement("div",{className:(0,to.default)(Ce.title,{[Ce.risk]:!!a}),onClick:m},e),t&&Ue.default.createElement("div",{className:Ce.subTitle},t))},_e=nr;var ir=e=>{let{index:t,title:o,renderEditApproveAmount:r,approveInfoList:a,preExecRet:m,onDataChange:l,eip5792Call:f,txTitle:d}=e,x=te((B,h,j)=>{let w=[...m.moduleList],P=w[t];w[t]={...P,data:{...P.data||{},approveInfoList:a.map((I,F)=>F===B?{...I,...h}:I),eip5792Call:{...P?.data?.eip5792Call||{},data:j},modifiedData:j}},l({...m,moduleList:w})});return $e.default.createElement(s.Box,null,$e.default.createElement(_e,{...e}),$e.default.createElement(eo,{txTitle:d,updateApproveInfo:x,approveInfoList:a,eip5792Call:f,renderEditApproveAmount:r,alwaysShowTitle:!o}))},oo=ir;n();i();var K=c(g());n();i();var Ne={item:"_item_1c9v9_1",dialogContent:"_dialogContent_1c9v9_4",valueWrapper:"_valueWrapper_1c9v9_8",address:"_address_1c9v9_14"};var sr=e=>{let{title:t,datas:o}=e,r=()=>{ae.action({title:t,children:K.default.createElement(s.Space,{direction:s.DIRECTION.vertical,className:Ne.dialogContent},o?.map(a=>K.default.createElement("div",{className:Ne.item,key:`${a.address}-${a.projectName}`},K.default.createElement(G,{align:Ft.top,label:a.title,value:K.default.createElement("div",{className:Ne.valueWrapper},K.default.createElement(y.Text,{className:Ne.address},a.address),K.default.createElement(Ae,{category:Ae.CATEGORY.fill,color:Ae.COLOR.grey},a.projectName)),copyConfig:{text:a.address,successText:p("wallet_receive_toast_address_copied")}}))))})};return K.default.createElement(s.Box,null,K.default.createElement(G,{label:t,value:o.length,showArrow:!0,onClick:r}))},ro=sr;n();i();var ue=c(g());n();i();var he=c(g());n();i();var He=c(g());var ar=({title:e,space:t=24,tooltip:o,currencyId:r,summaryList:a,useMinPrecision:m,needSwapCurrency:l})=>{let f=te(d=>He.default.createElement(Ut,{withCoinLogo:!0,justify:"flex-start",coinId:d?.coinId,injectCoin:d?.injectCoin,assetChange:d?.assetChange,currencyId:d?.currencyId||r,currencyAssetChange:d?.currencyAssetChange,useMinPrecision:d?.useMinPrecision||m,needSwapCurrency:d?.needSwapCurrency||l,isSend:d?.isSend,displayPrecisionConfig:d?.displayPrecisionConfig??{useCoinConfig:!1}}));return He.default.createElement(Mt,{title:e,tooltip:o,space:8},He.default.createElement(Be,{space:t,renderEmpty:!1,dataSource:a,renderItem:f}))},no=ar;n();i();var et={dividerWrap:"_dividerWrap_gyite_1",divider:"_divider_gyite_1"};var lr=({preExecRet:e})=>{let{assetDiffList:t}=e||{};if(t?.length){let o=t.map((r,a)=>r.divide?{isDivide:!0,key:`divide_${a}`}:{tooltip:r.titleHover,summaryList:r.tokenAssetDifflist.map(m=>{let{tokenInfo:l,type:f,amount:d,usdAmount:x}=m;return{injectCoin:{...l,image:l.imageUrl},displayPrecisionConfig:{useCoinConfig:!0},withCoinLogo:!0,assetChange:d?`${f}${d}`:void 0,currencyAssetChange:x||void 0,needSwapCurrency:!0,isSend:f==="-"}})});return he.default.createElement(s.Space,{space:12,direction:s.DIRECTION.vertical},o.map(r=>r.isDivide?he.default.createElement("div",{key:r.key,className:et.dividerWrap},he.default.createElement("div",{className:et.divider})):he.default.createElement(no,{...r})))}return null},io=lr;var mr=e=>ue.default.createElement(ue.default.Fragment,null,ue.default.createElement(s.Box,null,ue.default.createElement(_e,{...e}),ue.default.createElement(io,{preExecRet:e}))),so=mr;n();i();var ao=c(g());var dr=({host:e,icon:t})=>ao.default.createElement(pe,{imageUrl:t,text:e}),lo=dr;n();i();var We=c(g());function pr(e){let{txInfo:t}=e,{icon:o,title:r}=t||{};return We.default.createElement(s.Box,null,We.default.createElement(_e,{...e}),We.default.createElement(pe,{imageUrl:o,text:r}))}var mo=pr;n();i();var _o=c(g());n();i();var po={divide:"_divide_1jurf_1"};var _r=()=>_o.default.createElement(Te.Thin,{className:po.divide,style:{width:"calc(100% - 32px)"}}),uo=_r;n();i();var Co=c(g());n();i();var u=c(g());var tt=c(Me());be();n();i();var X=c(g());n();i();var v={"mev-control-enter":"_mev-control-enter_1jfu5_1",mevControlEnter:"_mev-control-enter_1jfu5_1","mev-control-content":"_mev-control-content_1jfu5_6",mevControlContent:"_mev-control-content_1jfu5_6","mev-control-content-title":"_mev-control-content-title_1jfu5_9",mevControlContentTitle:"_mev-control-content-title_1jfu5_9","mev-control-content-desc":"_mev-control-content-desc_1jfu5_14",mevControlContentDesc:"_mev-control-content-desc_1jfu5_14","list-content":"_list-content_1jfu5_18",listContent:"_list-content_1jfu5_18","list-wrap":"_list-wrap_1jfu5_21",listWrap:"_list-wrap_1jfu5_21","list-item":"_list-item_1jfu5_24",listItem:"_list-item_1jfu5_24","item-icon":"_item-icon_1jfu5_30",itemIcon:"_item-icon_1jfu5_30","list-item-text":"_list-item-text_1jfu5_34",listItemText:"_list-item-text_1jfu5_34","mev-control-title":"_mev-control-title_1jfu5_38",mevControlTitle:"_mev-control-title_1jfu5_38","mev-control-sub-title":"_mev-control-sub-title_1jfu5_43",mevControlSubTitle:"_mev-control-sub-title_1jfu5_43","mev-control-picture":"_mev-control-picture_1jfu5_48",mevControlPicture:"_mev-control-picture_1jfu5_48","mev-control-divider":"_mev-control-divider_1jfu5_52",mevControlDivider:"_mev-control-divider_1jfu5_52","mev-control-text-content":"_mev-control-text-content_1jfu5_56",mevControlTextContent:"_mev-control-text-content_1jfu5_56","mev-status":"_mev-status_1jfu5_60",mevStatus:"_mev-status_1jfu5_60","mev-status__text":"_mev-status__text_1jfu5_64",mevStatusText:"_mev-status__text_1jfu5_64","mev-status__text__active":"_mev-status__text__active_1jfu5_69",mevStatusTextActive:"_mev-status__text__active_1jfu5_69","mev-tooltip":"_mev-tooltip_1jfu5_72",mevTooltip:"_mev-tooltip_1jfu5_72",tooltip:"_tooltip_1jfu5_79","add-weight":"_add-weight_1jfu5_82",addWeight:"_add-weight_1jfu5_82","mev-open":"_mev-open_1jfu5_82",mevOpen:"_mev-open_1jfu5_82"};var ur=({mevNodeList:e})=>{let t=(0,X.useRef)(null),o=yt(t),r=a=>X.default.createElement(kt,{hovered:!1,icon:{size:Ze.SIZE.lg,src:a.vendorIcon||vt,type:Ze.TYPE.image},className:v["list-item"]},X.default.createElement(s.FlexBox,{direction:s.DIRECTION.vertical},X.default.createElement(s.FlexBox,{align:s.ALIGN.center},X.default.createElement(y.Text,{className:v["list-item-text"]},a.name))));return e.length?X.default.createElement("div",{ref:t,className:v["list-content"]},X.default.createElement(Be,{itemKey:"id",height:o?.height??408,searchable:!1,dataSource:e,renderItem:r,className:v["list-wrap"]})):null},co=ur;var ot="mevOperated",rt="mevToggle",cr=2e3,fo="isUpgradeToObjectMev";function xo(e,t){return ee.get(e)?.[t]}function go(e,t,o){let r=ee.get(e);ee.set(e,{...r||{},[t]:o})}function fr(e){return xo(ot,e)}function yo(e,t){go(ot,e,t)}function xr(e){return xo(rt,e)}function vo(e,t){go(rt,e,t)}var gr=({isMev:e,needTooltip:t=!0,isShowBlockSwapMevTooltip:o,onMevChange:r,serverMevInfo:a,className:m="",title:l=p("wallet_extension_mev_subtitle_protection"),networkId:f})=>{let d=f?It(f).baseChain:Le,{mevNodeList:x,openMev:B,gas:h,priorityRate:j,canEdit:w=!0}=a,[P,{setFalse:I,setTrue:F}]=ne(!1),[Q,{toggle:O}]=ne(!1),[D,S]=(0,u.useState)(""),L=(0,u.useMemo)(()=>x?.length?x.map(M=>M.supplier):[],[x]),b={gas:h,mevSuppliers:L,priorityRate:j};(0,u.useEffect)(()=>{let M=!e&&o,R=!e&&fr(d)===void 0,xe=()=>{I()},we=()=>{yo(d,1)};return M?(S("wallet_extension_trade_tooltip_enable_mev"),F(),document.addEventListener("click",xe,!1)):R&&(S("wallet_extension_mev_pop_turnon_mev"),F(),document.addEventListener("click",xe,!1),document.addEventListener("click",we,!1)),()=>{document.removeEventListener("click",xe,!1),document.removeEventListener("click",we,!1)}},[]);let J=te(()=>{let M=!e;typeof r=="function"&&r(M,b),vo(d,M),gt({mev:M}),S(e?"wallet_extension_mev_pop_mev_off":"wallet_extension_mev_pop_mev_on"),O(),F(),setTimeout(()=>{I()},cr)});Ve(async()=>{if(typeof r=="function"){if(!ye(e)){r(e,b);return}let M=xr(d);if(!ye(M)){r(M,b);return}r(B,b)}});let Z=bt({dark:"/cdn/assets/imgs/245/127CAD27DF691613.png",light:"/cdn/assets/imgs/2311/700F36AE20EC394E.png"}),ie=p(e?"wallet_extension_mev_desc_open":"wallet_extension_mev_desc_closed");return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:(0,tt.default)(v["mev-status"],m)},u.default.createElement(G,{label:l,value:ie,valueClassName:e?(0,tt.default)(v.addWeight,v.mevOpen):void 0,showArrow:w,onClick:w&&O,tooltip:t&&p(D),tooltipProps:{className:v.tooltip,show:P}})),u.default.createElement(ae.Action,{visible:Q,onClose:O,onCancel:O,title:u.default.createElement(u.default.Fragment,null),isFull:!0,noContentPadding:!0,noMargin:!0,onConfirm:J,confirmBtnProps:e?{size:U.SIZE.lg,type:U.TYPE.primary,category:U.CATEGORY.outline}:{size:U.SIZE.lg,type:U.TYPE.highlight,category:U.CATEGORY.fill},confirmText:e?p("wallet_extension_mev_btn_disable_mev"):p("wallet_extension_mev_btn_activate_protection")},u.default.createElement(s.Box,{className:v["mev-control-content"]},u.default.createElement(s.FlexBox,{justify:"space-between",align:s.ALIGN.center},u.default.createElement(s.Space,{direction:s.DIRECTION.vertical,space:12},u.default.createElement(y.Text,{className:v["mev-control-title"]},p("wallet_extension_mev_grouptitle_mev_protection")),u.default.createElement(y.Text,{style:{color:e?"var(--okd-color-semantic-positive)":"var(--okd-color-content-primary)"},className:v["mev-control-sub-title"]},p(e?"wallet_extension_mev_label_enabled":"wallet_extension_mev_label_disabled"))),u.default.createElement(oe,{className:v["mev-control-picture"],src:Z})),u.default.createElement(Te,{className:v["mev-control-divider"],style:{marginTop:24}}),u.default.createElement(s.Space,{className:v["mev-control-text-content"],direction:s.DIRECTION.vertical,space:24},u.default.createElement(s.Box,null,u.default.createElement(y.Text,{className:v["mev-control-content-title"]},p("wallet_extension_mev_title_provider")),u.default.createElement(co,{mevNodeList:x})),u.default.createElement(Te,{className:v["mev-control-divider"]}),u.default.createElement(s.Box,null,u.default.createElement(y.Text,{className:v["mev-control-content-title"]},p("wallet_extension_mev_title_mev_meaning")),u.default.createElement(y.Text,{className:v["mev-control-content-desc"]},p("wallet_extension_mev_desc_mev_meaning"))),u.default.createElement(s.Box,null,u.default.createElement(y.Text,{className:v["mev-control-content-title"]},p("wallet_extension_mev_title_mev_avoid")),u.default.createElement(y.Text,{className:v["mev-control-content-desc"]},p("wallet_extension_mev_desc_mev_avoid"))),u.default.createElement(s.Box,null,u.default.createElement(y.Text,{className:v["mev-control-content-title"]},p("wallet_extension_mev_title_why_attack")),u.default.createElement(y.Text,{className:v["mev-control-content-desc"]},p("wallet_extension_mev_desc_why_attack")))))))};function yr(e){let[t,o]=(0,u.useState)(ee.get(fo));return Ve(()=>{if(!t){let r=ee.get(ot);r!==void 0&&yo(Le,r);let a=ee.get(rt);a!==void 0&&vo(Le,a),ee.set(fo,!0),o(!0)}}),t?u.default.createElement(gr,{...e}):null}var To=yr;var vr=e=>{let{mevProps:t,title:o,txState:r}=e,{baseCoin:a}=r||{},{isMev:m,onMevChange:l,isShowBlockSwapMevTooltip:f,needMev:d}=t;return d?Co.default.createElement(To,{networkId:a?.chainId,title:o,isMev:m,needTooltip:!1,onMevChange:l,isShowBlockSwapMevTooltip:f,serverMevInfo:e}):null},No=vr;n();i();var ce=c(g());n();i();var re=c(g());function Tr({origin:e,providerType:t,onClick:o,onClose:r,onNetworkChange:a,...m}){let[l,f]=(0,re.useState)(!1);return re.default.createElement(re.default.Fragment,null,re.default.createElement(je,{...m,onClick:()=>{f(!0),o?.()}}),re.default.createElement(qe,{origin:e,visible:l,onClose:()=>{f(!1),r?.()},onNetworkChange:a,providerType:t},re.default.createElement(qe.Header,{title:p("wallet_extension_sonic_desc_switch_network"),subTitle:""})))}var ho=Tr;var Cr=e=>{let{networkFeeProps:t,titleHover:o,showFee:r,networkProps:a}=e,m=a?.coinId||t?.coinId;return ce.default.createElement(ce.default.Fragment,null,a?.showSwitchNetwork?ce.default.createElement(ho,{...a,coinId:m}):ce.default.createElement(je,{network:t?.network,...a,coinId:m}),r&&ce.default.createElement($t,{useTransition:!1,...t,titleHover:o}))},wo=Cr;n();i();var fe=c(g());var Nr=e=>{let{title:t,token1Symbol:o,token2Symbol:r,token1ToToken2:a}=e,m=`1 ${o} \u2248 ${W(a).value} ${r}`,l=W(z.div(1,a)).value,f=`1 ${r} \u2248 ${l} ${o}`,[d,x]=(0,fe.useState)(m);return fe.default.createElement(fe.default.Fragment,null,fe.default.createElement(G,{label:t,value:d,onClick:()=>{x(d===m?f:m)},showArrow:!1}))},bo=Nr;n();i();var ko=c(g());var hr=e=>{let{title:t,usdPrice:o,marketCap:r}=e,a=Se(ft),m=o?z.mul(o,a?.usdToThisRate):0,l=`${a.symbol}${m}`,f=z.mul(r,a?.usdToThisRate),d=`${a.symbol}${z.floorTruncateShort(f,{needChineseUnit:!0,shortNeedZero:!1})}`,x=`${l} / ${d}`;return ko.default.createElement(G,{label:t,value:x})},Lo=hr;n();i();var nt=c(g());n();i();var A=c(g());n();i();var H={root:"_root_1mgjs_1",txExplain:"_txExplain_1mgjs_1",txExplainModal:"_txExplainModal_1mgjs_7",main:"_main_1mgjs_18",image:"_image_1mgjs_26",title:"_title_1mgjs_31",infoList:"_infoList_1mgjs_39",info:"_info_1mgjs_39",subTitle:"_subTitle_1mgjs_45",text:"_text_1mgjs_52",footWrap:"_footWrap_1mgjs_57"};var wr=({txExplain:e})=>{let[t,{toggle:o}]=ne(!1),{image:r,descList:a,title:m,confirmBtnText:l}=e,f=wt(r);return A.default.createElement(s.Box,{className:H.root},A.default.createElement(s.Box,{onClick:o,className:H.txExplain},A.default.createElement(Ee,{className:"okx-wallet-plugin-question-mark"})),A.default.createElement(ae.Action,{noContentPadding:!0,visible:t,onClose:o},A.default.createElement(s.Box,{className:H.txExplainModal},A.default.createElement(s.Box,{className:H.main},A.default.createElement(oe,{src:f,className:H.image}),A.default.createElement(s.Box,{className:H.title},m),a?.length?A.default.createElement(s.Box,{className:H.infoList},a.map(d=>A.default.createElement(s.Box,{className:H.info},A.default.createElement(s.Box,{className:H.subTitle},d.text),A.default.createElement(s.Box,{className:H.text},d.desc)))):null),A.default.createElement(s.Box,{className:H.footWrap},A.default.createElement(U,{block:!0,onClick:o,size:U.SIZE.lg,type:U.TYPE.highlight,category:U.CATEGORY.fill},l)))))},Io=wr;n();i();var So={"tx-explain-mod":"_tx-explain-mod_dbqrt_1",txExplainMod:"_tx-explain-mod_dbqrt_1"};var br=e=>nt.default.createElement(s.Box,{className:So.txExplainMod},nt.default.createElement(Io,{txExplain:e})),Mo=br;n();i();var it=c(g());n();i();var Eo={"tx-title-mod":"_tx-title-mod_1nfyf_1",txTitleMod:"_tx-title-mod_1nfyf_1"};var kr=e=>{let{title:t}=e,o;return t?.text&&(o={...e,title:t.text,identify:t.identify}),it.default.createElement(s.Box,{className:Eo.txTitleMod},it.default.createElement(At,{injectInfo:o,bordered:!1,needChildrenPadding:!1}))},Ao=kr;n();i();var st={root:"_root_wkp78_1",txTypeExtInfo:"_txTypeExtInfo_wkp78_6","section-wrap":"_section-wrap_wkp78_12",sectionWrap:"_section-wrap_wkp78_12"};var Ge={signMessage:"signMessage",signTransaction:"signTransaction",signTypedData:"signTypedData"},Lr={txExplain:Mo,txTitle:Ao,dappInfo:lo,approveInfo:oo,approveTo:ro,assetDiff:so,divide:uo,networkFee:wo,address:Fe,message:me,text:Oe,triggerPrice:Lo,tokenPair:bo,advance:Qt,mevInfo:No,defaultTx:mo},Ir=({txType:e,preExecParams:t,localType:o,walletAccount:r})=>{let a=t?.dappInfo,m=t?.dappData,l=m;try{l=JSON.parse(m).data}catch(x){console.log(x)}let d={[Ge.signMessage]:[{moduleName:"txTitle",data:{title:{text:ke("wallet_extension_transaction_page_title_signature_request"),identify:!0}}},{moduleName:"divide"},{moduleName:"dappInfo",data:a},{moduleName:"divide"},{moduleName:"networkFee",data:{showFee:!1}},{moduleName:"address",data:{address:r?.account?.[o],title:p("wallet_extension_network_address_title_walletused"),localType:o,showAccountNameFlag:!0}},{moduleName:"advance",data:{title:p("wallet_extension_transaction_tab_advanced"),listExpansion:!0,children:[{moduleName:"message",data:{preExecParams:t}}]}}],[Ge.signTypedData]:[{moduleName:"txTitle",data:{title:{text:ke("wallet_extension_transaction_page_title_signature_request"),identify:!0}}},{moduleName:"dappInfo",data:a},{moduleName:"divide"},{moduleName:"networkFee",data:{showFee:!1}},{moduleName:"address",data:{address:r?.account?.[o],title:p("wallet_extension_network_address_title_walletused"),localType:o,showAccountNameFlag:!0}},{moduleName:"advance",data:{title:p("wallet_extension_transaction_tab_advanced"),listExpansion:!0,children:[{moduleName:"signJsonRouter",data:{title:p("wallet_dapp_connection_subtitle_data_label"),data:l}}]}}],[Ge.signTransaction]:[{moduleName:"txTitle",data:{title:{text:ke("wallet_extension_transaction_page_title_unknown_transaction"),identify:!1},subTitle:a?.host}},{moduleName:"divide"},{moduleName:"networkFee"},{moduleName:"address",data:{address:r?.account?.[o],title:p("wallet_extension_network_address_title_walletused"),localType:o,showAccountNameFlag:!0}}]}[e];return{defaultPreExecRet:{tipMessageInfo:{tipMessage:p("wallet_extension_transaction_error_general_check_network"),level:780},moduleList:d,canConfirm:!1}}},Sr=(e,t)=>{e?.moduleList?.length||(e.moduleList=t.moduleList)},Mr=async({popupInfoList:e,loading:t,secModalFn:o})=>{t&&e?.length&&await o(e).catch(se)},Er=(e,t)=>e||t,Ar=(0,C.memo)(({loading:e,txType:t=Ge.signTransaction,needPreExecFn:o=()=>!0,preExecParams:r={},slot:a={},handleCancel:m=se,buttonGroup:l,txState:f={},localType:d,networkFeeProps:x,networkProps:B,walletAccount:h,renderEditApproveAmount:j=se,onUpdatePreExecInfo:w=se,chainHeaderTips:P=[],mevProps:I={},onDataChange:F=se,confirmBtnText:Q,cancelBtnText:O})=>{let{defaultPreExecRet:D}=Ir({txType:t,preExecParams:r,localType:d,walletAccount:h}),[S,L]=(0,C.useState)({}),[b,J]=(0,C.useState)(o()),[Z,ie]=(0,C.useState)(!0),M=Pe({handleCancel:m}),R=te(async()=>{try{let Y={};if(o(r)){r.forceLoading&&J(!0),ie(!0),Y=await xt(_t(r,["preStepFailed"]));let{popupInfoList:ge}=Y;Sr(Y,D),await Mr({popupInfoList:ge,loading:b,secModalFn:M})}else Y.moduleList=D.moduleList;L(Y)}catch{L(D)}finally{J(!1),ie(!1)}});(0,C.useEffect)(()=>{w({...S,loading:b,silentLoading:Z})},[S,b,w,Z]),(0,C.useEffect)(()=>{if(r.preStepFailed){L(D),J(!1);return}ye(r.chainIndex)||R()},[r]);let xe=Wt({txState:f,walletAccount:h,preExecRet:S,loading:b,chainHeaderTips:P,maxNetworkFee:x?.maxNetworkFee}),we=({moduleName:Y,data:ge,index:at})=>{let Bo={index:at,txState:f,walletAccount:h,networkFeeProps:x,networkProps:B,renderEditApproveAmount:j,localType:d,preExecParams:r,setPreExecRet:L,mevProps:I,preExecRet:S,onDataChange:mt=>{L(mt),F(mt)},...ge},lt=Lr[Y];return lt?C.default.createElement(lt,{...Bo,key:at}):null};return C.default.createElement(s.Container,{className:st.root},Er(e,b)?C.default.createElement(Pt,{needReport:{localType:d,chainIndex:r?.chainIndex,walletId:h?.walletId},confirmBtnText:Q,cancelBtnText:O,handleCancel:m}):C.default.createElement(C.default.Fragment,null,C.default.createElement(Bt,{...xe}),a.top,C.default.createElement(s.FlexBox,{className:st["section-wrap"],direction:s.DIRECTION.vertical},S.moduleList?.map((Y,ge)=>we({...Y,index:ge}))),C.default.createElement(Lt,{borderTop:!0,placeholder:!0,offsetBottom:0,style:{zIndex:205}},C.default.createElement(St,{buttonGroup:l}),a.bottom)))}),Sm=Ar;export{Or as a,Dr as b,zr as c,Ke as d,pe as e,eo as f,v as g,co as h,Io as i,Ge as j,Sm as k};
//# sourceMappingURL=chunk-EUAAIPZO.js.map
