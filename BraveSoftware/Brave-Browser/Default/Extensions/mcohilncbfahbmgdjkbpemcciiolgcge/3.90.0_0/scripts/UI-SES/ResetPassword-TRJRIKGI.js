import{a as O,b as u,c as V,d as Z,e as D}from"./chunk-NIQLLW5J.js";import{c as y}from"./chunk-VUC4EO27.js";import"./chunk-U5ZZGKGM.js";import{d as L}from"./chunk-HRKKQNEB.js";import"./chunk-HJASUAAI.js";import{q as U}from"./chunk-P6LOADSA.js";import{Bd as z,N as _,Sb as N,Vc as B,dc as l,h as r,kc as i,l as x,mc as v,pd as S,qd as P,wd as A}from"./chunk-CS663DOD.js";import"./chunk-WFJJHRZ4.js";import"./chunk-L3SRMZJF.js";import"./chunk-OSJ66QVC.js";import"./chunk-PHQSAPCN.js";import"./chunk-H7A2GXA7.js";import"./chunk-SRAKDH5C.js";import{z as p}from"./chunk-K36OLSUR.js";import"./chunk-VYWNZTTM.js";import{d as R}from"./chunk-4RYTWPZK.js";import{e as Q,n as t,p as a}from"./chunk-N62DF26F.js";t();a();var s=Q(R());t();a();var M={root:"_root_1r48s_1"};t();a();t();a();function W(){return{updatePasskey:async()=>{}}}var G=W;var Y=G;var vs=()=>{let E=N(),n=i.useForm(),[e,j]=s.default.useState({}),[q,C]=s.default.useState(null),[k,{setTrue:H,setFalse:b}]=A(!1),f=(0,s.useRef)(),T=P(()=>{f.current=_().verifyPassword({__secretData__:{password:e.oldPassword}}).then(()=>(C(null),n.cleanErrors("oldPassword"),!0)).catch(()=>{let o=r("wallet_set_password_errortip_password_wrong");return C(o),n.setErrors({oldPassword:o}),!1})}),{updatePasskey:J}=Y();z(()=>{!e.oldPassword||T()},[e.oldPassword],{wait:500}),D(n,e);let w=!!q||!e.oldPassword||!e.password||!e.confirm||e.password?.length<y||e.confirm?.length<y||e.password!==e.confirm,F=P(async()=>{let{password:o,confirm:d}=e;if(w||k)return;if(o!==d){O(n);return}if(H(),f.current||T(),!await f.current){b();return}if(await _().modifyPassword(d)){let[c]=await x(J(d));c&&E(L(1)),v.success(r("wallet_edit_wallet_toast_renamed_success")),S.push(B)}b()},[w,e]),I=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await F()},[]);return(0,s.useEffect)(()=>(document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}),[]),s.default.createElement(V,{className:M.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:d,itemClass:m})=>s.default.createElement(i,{form:n,size:l.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:d,onValuesChange:(K,c)=>{j(c)}},s.default.createElement(i.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:m},s.default.createElement(l.Password,{autoFocus:!0,autoComplete:"off",size:l.SIZE.xl,inputClassName:u.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password",void 0,{useBr:!1})})),s.default.createElement(i.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:m,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(l.Password,{autoComplete:"off",size:l.SIZE.xl,inputClassName:u.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc",void 0,{useBr:!1})})),s.default.createElement(Z,{form:n,itemClass:m,inputClassName:u.passwordInput}),s.default.createElement(U.FooterActions,{usePortal:!0,renderNative:!0,buttonGroup:[{loading:k,disabled:w,block:!0,type:p.TYPE.highlight,category:p.CATEGORY.fill,size:p.SIZE.lg,onClick:F,btnText:r("wallet_set_password_btn_confirm")}]})))};export{vs as default};
//# sourceMappingURL=ResetPassword-TRJRIKGI.js.map
