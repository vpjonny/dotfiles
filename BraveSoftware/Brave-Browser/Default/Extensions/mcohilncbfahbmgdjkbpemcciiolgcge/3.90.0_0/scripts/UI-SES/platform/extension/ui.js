import{a as Br}from"../../chunk-C5GGDHU5.js";import{a as sa}from"../../chunk-ITR7YSQV.js";import{a as yo}from"../../chunk-GQMXYGI3.js";import{c as Wi,d as Q,e as ee,n as Re,o as qi}from"../../chunk-JNONLPQN.js";import{a as To}from"../../chunk-DOYXPNLR.js";import{i as Po}from"../../chunk-KANP3CMI.js";import{a as Ie,b as na,c as la}from"../../chunk-VUC4EO27.js";import{a as Ni,b as Mt,c as wo,d as Ho,k as ra}from"../../chunk-XUNQN7AR.js";import"../../chunk-NM4WOM75.js";import{d as Xo,f as tr,g as ea,j as ta,k as oa,l as aa,m as ua,o as fa}from"../../chunk-4NDHBQXR.js";import{a as ia}from"../../chunk-E2GB7AO4.js";import"../../chunk-U5ZZGKGM.js";import{a as Zo}from"../../chunk-YTEKE6MB.js";import{a as $o,b as Jo}from"../../chunk-WX3NG5HB.js";import"../../chunk-HRKKQNEB.js";import{c as Ko}from"../../chunk-GZTCY5NF.js";import{a as we,c as Gr,d as Bt,e as Yo,f as Je}from"../../chunk-FOIG34R3.js";import"../../chunk-HJASUAAI.js";import{b as _o,c as vo,d as bo,e as Ot,f as Me,n as N,p as jt,q as Qo}from"../../chunk-P6LOADSA.js";import{$ as ro,$c as Kt,Aa as fo,Ba as co,Bc as qt,Dc as $r,Ea as po,Gc as Lo,Hc as No,Jc as Wo,Kc as qo,Lc as Jr,Ma as ho,Mc as Zr,N as It,Na as mo,O as Yi,Oc as Ut,P as $i,Pc as Uo,Q as q,Qa as go,Qb as ko,R as Hf,Ra as ke,Rb as Hr,Rc as jo,S as Ji,Sb as Mo,Sc as Bo,T as Zi,Tb as M,U as Xi,V as Qi,Vb as At,Vc as ve,Wb as Ao,Wc as Ft,X as eo,Yc as Go,Zb as Do,Zc as Oe,_ as to,_c as Vo,aa as no,ac as Lt,ad as Ht,ba as io,bc as Nt,bd as Gt,ca as oo,da as ao,dc as zr,ea as so,f as Ui,fd as Vt,gd as zt,h as g,ha as lo,hd as Yt,i as ji,ia as uo,ic as te,id as $t,j as Bi,jd as Jt,k as jr,kc as _e,kd as $e,mb as xo,mc as Wt,md as Zt,nb as Gf,nc as Yr,nd as Xt,ob as Kr,od as Qt,pd as R,q as Fi,qd as zo,r as Ki,rb as Ro,s as Hi,t as Gi,tc as re,td as er,u as Vi,vc as Vf,w as zi}from"../../chunk-CS663DOD.js";import{a as Fo}from"../../chunk-WFJJHRZ4.js";import{a as So,b as Eo,i as Co,r as Fr}from"../../chunk-L3SRMZJF.js";import"../../chunk-OSJ66QVC.js";import"../../chunk-PHQSAPCN.js";import"../../chunk-H7A2GXA7.js";import"../../chunk-SRAKDH5C.js";import{u as Vr,z as A}from"../../chunk-K36OLSUR.js";import"../../chunk-VYWNZTTM.js";import{B as Io,C as Oo,M as Ye,N as Dt,d as b}from"../../chunk-4RYTWPZK.js";import{b as Bf,c as m,d as Ff,e as p,f as Kf,g as Ur,m as u,n as a,p as s}from"../../chunk-N62DF26F.js";var Ze=m((Yh,Xr)=>{"use strict";a();s();typeof u>"u"||!u.version||u.version.indexOf("v0.")===0||u.version.indexOf("v1.")===0&&u.version.indexOf("v1.8.")!==0?Xr.exports={nextTick:Jf}:Xr.exports=u;function Jf(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return u.nextTick(e);case 2:return u.nextTick(function(){e.call(null,t)});case 3:return u.nextTick(function(){e.call(null,t,r)});case 4:return u.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return u.nextTick(function(){e.apply(null,o)})}}});var da=m((Zh,ca)=>{a();s();var Zf={}.toString;ca.exports=Array.isArray||function(e){return Zf.call(e)=="[object Array]"}});var Qr=m((em,pa)=>{a();s();pa.exports=Mt().EventEmitter});var Xe=m((en,ma)=>{a();s();var rr=Wi(),se=rr.Buffer;function ha(e,t){for(var r in e)t[r]=e[r]}se.from&&se.alloc&&se.allocUnsafe&&se.allocUnsafeSlow?ma.exports=rr:(ha(rr,en),en.Buffer=Ae);function Ae(e,t,r){return se(e,t,r)}ha(se,Ae);Ae.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return se(e,t,r)};Ae.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=se(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Ae.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return se(e)};Ae.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return rr.SlowBuffer(e)}});var ya=m((om,tn)=>{"use strict";a();s();function Xf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ga=Xe().Buffer,Qe=Re();function Qf(e,t,r){e.copy(t,r)}tn.exports=function(){function e(){Xf(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return ga.alloc(0);if(this.length===1)return this.head.data;for(var n=ga.allocUnsafe(r>>>0),i=this.head,o=0;i;)Qf(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();Qe&&Qe.inspect&&Qe.inspect.custom&&(tn.exports.prototype[Qe.inspect.custom]=function(){var e=Qe.inspect({length:this.length});return this.constructor.name+" "+e})});var rn=m((lm,va)=>{"use strict";a();s();var wa=Ze();function ec(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&wa.nextTick(_a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(wa.nextTick(_a,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function tc(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function _a(e,t){e.emit("error",t)}va.exports={destroy:ec,undestroy:tc}});var on=m((cm,Ra)=>{"use strict";a();s();var be=Ze();Ra.exports=I;function Sa(e){var t=this;this.next=null,this.entry=null,this.finish=function(){_c(t,e)}}var rc=!u.browser&&["v0.10","v0.9."].indexOf(u.version.slice(0,5))>-1?setImmediate:be.nextTick,De;I.WritableState=tt;var Ea=Object.create(Q());Ea.inherits=ee();var nc={deprecate:qi()},Ca=Qr(),ir=Xe().Buffer,ic=globalThis.Uint8Array||function(){};function oc(e){return ir.from(e)}function ac(e){return ir.isBuffer(e)||e instanceof ic}var xa=rn();Ea.inherits(I,Ca);function sc(){}function tt(e,t){De=De||Se(),e=e||{};var r=t instanceof De;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){hc(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Sa(this)}tt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(tt.prototype,"buffer",{get:nc.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var nr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(nr=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return nr.call(this,e)?!0:this!==I?!1:e&&e._writableState instanceof tt}})):nr=function(e){return e instanceof this};function I(e){if(De=De||Se(),!nr.call(I,this)&&!(this instanceof De))return new I(e);this._writableState=new tt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Ca.call(this)}I.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function lc(e,t){var r=new Error("write after end");e.emit("error",r),be.nextTick(t,r)}function uc(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),be.nextTick(n,o),i=!1),i}I.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&ac(e);return o&&!ir.isBuffer(e)&&(e=oc(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=sc),n.ended?lc(this,r):(o||uc(this,n,e,r))&&(n.pendingcb++,i=cc(this,n,o,e,t,r)),i};I.prototype.cork=function(){var e=this._writableState;e.corked++};I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Pa(this,e))};I.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function fc(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=ir.from(t,r)),t}Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function cc(e,t,r,n,i,o){if(!r){var l=fc(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else nn(e,t,!1,f,n,i,o);return d}function nn(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function dc(e,t,r,n,i){--t.pendingcb,r?(be.nextTick(i,n),be.nextTick(et,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),et(e,t))}function pc(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function hc(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(pc(r),t)dc(e,r,n,t,i);else{var o=Ta(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Pa(e,r),n?rc(ba,e,r,o,i):ba(e,r,o,i)}}function ba(e,t,r,n){r||mc(e,t),t.pendingcb--,n(),et(e,t)}function mc(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Pa(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,f=!0;r;)i[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;i.allBuffers=f,nn(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Sa(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,h=r.encoding,y=r.callback,v=t.objectMode?1:d.length;if(nn(e,t,!1,v,d,h,y),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}I.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};I.prototype._writev=null;I.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&wc(this,n,r)};function Ta(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function gc(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),et(e,t)})}function yc(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,be.nextTick(gc,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function et(e,t){var r=Ta(t);return r&&(yc(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function wc(e,t,r){t.ending=!0,et(e,t),r&&(t.finished?be.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function _c(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(I.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});I.prototype.destroy=xa.destroy;I.prototype._undestroy=xa.undestroy;I.prototype._destroy=function(e,t){this.end(),t(e)}});var Se=m((hm,Oa)=>{"use strict";a();s();var ka=Ze(),vc=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Oa.exports=le;var Ma=Object.create(Q());Ma.inherits=ee();var Ia=ln(),sn=on();Ma.inherits(le,Ia);for(an=vc(sn.prototype),or=0;or<an.length;or++)ar=an[or],le.prototype[ar]||(le.prototype[ar]=sn.prototype[ar]);var an,ar,or;function le(e){if(!(this instanceof le))return new le(e);Ia.call(this,e),sn.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",bc)}Object.defineProperty(le.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function bc(){this.allowHalfOpen||this._writableState.ended||ka.nextTick(Sc,this)}function Sc(e){e.end()}Object.defineProperty(le.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});le.prototype._destroy=function(e,t){this.push(null),this.end(),ka.nextTick(t,e)}});var cn=m(Da=>{"use strict";a();s();var fn=Xe().Buffer,Aa=fn.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ec(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Cc(e){var t=Ec(e);if(typeof t!="string"&&(fn.isEncoding===Aa||!Aa(e)))throw new Error("Unknown encoding: "+e);return t||e}Da.StringDecoder=rt;function rt(e){this.encoding=Cc(e);var t;switch(this.encoding){case"utf16le":this.text=Mc,this.end=Ic,t=4;break;case"utf8":this.fillLast=Tc,t=4;break;case"base64":this.text=Oc,this.end=Ac,t=3;break;default:this.write=Dc,this.end=Lc;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=fn.allocUnsafe(t)}rt.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};rt.prototype.end=kc;rt.prototype.text=Rc;rt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function un(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function xc(e,t,r){var n=t.length-1;if(n<r)return 0;var i=un(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=un(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=un(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Pc(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Tc(e){var t=this.lastTotal-this.lastNeed,r=Pc(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Rc(e,t){var r=xc(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function kc(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function Mc(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Ic(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Oc(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Ac(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Dc(e){return e.toString(this.encoding)}function Lc(e){return e&&e.length?this.write(e):""}});var ln=m((bm,Va)=>{"use strict";a();s();var Ne=Ze();Va.exports=E;var Nc=da(),nt;E.ReadableState=Ba;var vm=Mt().EventEmitter,qa=function(e,t){return e.listeners(t).length},gn=Qr(),it=Xe().Buffer,Wc=globalThis.Uint8Array||function(){};function qc(e){return it.from(e)}function Uc(e){return it.isBuffer(e)||e instanceof Wc}var Ua=Object.create(Q());Ua.inherits=ee();var dn=Re(),w=void 0;dn&&dn.debuglog?w=dn.debuglog("stream"):w=function(){};var jc=ya(),ja=rn(),Le;Ua.inherits(E,gn);var pn=["error","close","destroy","pause","resume"];function Bc(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Nc(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Ba(e,t){nt=nt||Se(),e=e||{};var r=t instanceof nt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new jc,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Le||(Le=cn().StringDecoder),this.decoder=new Le(e.encoding),this.encoding=e.encoding)}function E(e){if(nt=nt||Se(),!(this instanceof E))return new E(e);this._readableState=new Ba(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),gn.call(this)}Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});E.prototype.destroy=ja.destroy;E.prototype._undestroy=ja.undestroy;E.prototype._destroy=function(e,t){this.push(null),t(e)};E.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=it.from(e,t),t=""),n=!0),Fa(this,e,t,!1,n)};E.prototype.unshift=function(e){return Fa(this,e,null,!0,!1)};function Fa(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,Gc(e,o);else{var l;i||(l=Fc(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==it.prototype&&(t=qc(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):hn(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?hn(e,o,t,!1):Ka(e,o)):hn(e,o,t,!1))):n||(o.reading=!1)}return Kc(o)}function hn(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&sr(e)),Ka(e,t)}function Fc(e,t){var r;return!Uc(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Kc(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}E.prototype.isPaused=function(){return this._readableState.flowing===!1};E.prototype.setEncoding=function(e){return Le||(Le=cn().StringDecoder),this._readableState.decoder=new Le(e),this._readableState.encoding=e,this};var La=8388608;function Hc(e){return e>=La?e=La:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Na(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Hc(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}E.prototype.read=function(e){w("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return w("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?mn(this):sr(this),null;if(e=Na(e,t),e===0&&t.ended)return t.length===0&&mn(this),null;var n=t.needReadable;w("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,w("length less than watermark",n)),t.ended||t.reading?(n=!1,w("reading or ended",n)):n&&(w("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Na(r,t)));var i;return e>0?i=Ha(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&mn(this)),i!==null&&this.emit("data",i),i};function Gc(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,sr(e)}}function sr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ne.nextTick(Wa,e):Wa(e))}function Wa(e){w("emit readable"),e.emit("readable"),yn(e)}function Ka(e,t){t.readingMore||(t.readingMore=!0,Ne.nextTick(Vc,e,t))}function Vc(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}E.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};E.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,w("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==u.stdout&&e!==u.stderr,o=i?f:L;n.endEmitted?Ne.nextTick(o):r.once("end",o),e.on("unpipe",l);function l(j,V){w("onunpipe"),j===r&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,y())}function f(){w("onend"),e.end()}var d=zc(r);e.on("drain",d);var h=!1;function y(){w("cleanup"),e.removeListener("close",x),e.removeListener("finish",K),e.removeListener("drain",d),e.removeListener("error",P),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",L),r.removeListener("data",W),h=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d()}var v=!1;r.on("data",W);function W(j){w("ondata"),v=!1;var V=e.write(j);V===!1&&!v&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Ga(n.pipes,e)!==-1)&&!h&&(w("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,v=!0),r.pause())}function P(j){w("onerror",j),L(),e.removeListener("error",P),qa(e,"error")===0&&e.emit("error",j)}Bc(e,"error",P);function x(){e.removeListener("finish",K),L()}e.once("close",x);function K(){w("onfinish"),e.removeListener("close",x),L()}e.once("finish",K);function L(){w("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(w("pipe resume"),r.resume()),e};function zc(e){return function(){var t=e._readableState;w("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&qa(e,"data")&&(t.flowing=!0,yn(e))}}E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Ga(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};E.prototype.on=function(e,t){var r=gn.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&sr(this):Ne.nextTick(Yc,this))}return r};E.prototype.addListener=E.prototype.on;function Yc(e){w("readable nexttick read 0"),e.read(0)}E.prototype.resume=function(){var e=this._readableState;return e.flowing||(w("resume"),e.flowing=!0,$c(this,e)),this};function $c(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ne.nextTick(Jc,e,t))}function Jc(e,t){t.reading||(w("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),yn(e),t.flowing&&!t.reading&&e.read(0)}E.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function yn(e){var t=e._readableState;for(w("flow",t.flowing);t.flowing&&e.read()!==null;);}E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(w("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(w("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<pn.length;o++)e.on(pn[o],this.emit.bind(this,pn[o]));return this._read=function(l){w("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});E._fromList=Ha;function Ha(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=Zc(e,t.buffer,t.decoder),r}function Zc(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Xc(e,t):Qc(e,t),n}function Xc(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function Qc(e,t){var r=it.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function mn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ne.nextTick(ed,t,e))}function ed(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Ga(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var wn=m((Cm,$a)=>{"use strict";a();s();$a.exports=ue;var lr=Se(),Ya=Object.create(Q());Ya.inherits=ee();Ya.inherits(ue,lr);function td(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ue(e){if(!(this instanceof ue))return new ue(e);lr.call(this,e),this._transformState={afterTransform:td.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",rd)}function rd(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){za(e,t,r)}):za(this,null,null)}ue.prototype.push=function(e,t){return this._transformState.needTransform=!1,lr.prototype.push.call(this,e,t)};ue.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};ue.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ue.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ue.prototype._destroy=function(e,t){var r=this;lr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function za(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Qa=m((Tm,Xa)=>{"use strict";a();s();Xa.exports=ot;var Ja=wn(),Za=Object.create(Q());Za.inherits=ee();Za.inherits(ot,Ja);function ot(e){if(!(this instanceof ot))return new ot(e);Ja.call(this,e)}ot.prototype._transform=function(e,t,r){r(null,e)}});var ts=m((ne,es)=>{a();s();ne=es.exports=ln();ne.Stream=ne;ne.Readable=ne;ne.Writable=on();ne.Duplex=Se();ne.Transform=wn();ne.PassThrough=Qa()});var is=m((Om,ns)=>{a();s();var rs=ts().Duplex,nd=Re().inherits;ns.exports=at;nd(at,rs);function at(e){rs.call(this,{objectMode:!0}),this._name=e.name,this._target=e.target,this._targetWindow=e.targetWindow||window,this._origin=e.targetWindow?"*":location.origin,this._init=!1,this._haveSyn=!1,window.addEventListener("message",this._onMessage.bind(this),!1),this._write("SYN",null,ur),this.cork()}at.prototype._onMessage=function(e){var t=e.data;if(!(this._origin!=="*"&&e.origin!==this._origin)&&e.source===this._targetWindow&&typeof t=="object"&&t.target===this._name&&!!t.data)if(!this._init)t.data==="SYN"?(this._haveSyn=!0,this._write("ACK",null,ur)):t.data==="ACK"&&(this._init=!0,this._haveSyn||this._write("ACK",null,ur),this.uncork());else try{this.push(t.data)}catch(r){this.emit("error",r)}};at.prototype._read=ur;at.prototype._write=function(e,t,r){var n={target:this._target,data:e};this._targetWindow.postMessage(n,this._origin),r()};function ur(){}});var fs=m((qm,us)=>{a();s();us.exports=st;st.default=st;st.stable=ss;st.stableStringify=ss;var fe=[],he=[];function st(e,t,r){_n(e,"",[],void 0);var n;for(he.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,ls(t),r);fe.length!==0;){var i=fe.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function _n(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),fe.push([n,t,e,o])):he.push([e,t]):(n[t]="[Circular]",fe.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)_n(e[i],i,r,e);else{var l=Object.keys(e);for(i=0;i<l.length;i++){var f=l[i];_n(e[f],f,r,e)}}r.pop()}}function id(e,t){return e<t?-1:e>t?1:0}function ss(e,t,r){var n=vn(e,"",[],void 0)||e,i;for(he.length===0?i=JSON.stringify(n,t,r):i=JSON.stringify(n,ls(t),r);fe.length!==0;){var o=fe.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return i}function vn(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),fe.push([n,t,e,o])):he.push([e,t]):(n[t]="[Circular]",fe.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)vn(e[i],i,r,e);else{var l={},f=Object.keys(e).sort(id);for(i=0;i<f.length;i++){var d=f[i];vn(e[d],d,r,e),l[d]=e[d]}if(n!==void 0)fe.push([n,t,e]),n[t]=l;else return l}r.pop()}}function ls(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(he.length>0)for(var n=0;n<he.length;n++){var i=he[n];if(i[1]===t&&i[0]===r){r="[Circular]",he.splice(n,1);break}}return e.call(this,t,r)}}});var cr=m(We=>{"use strict";a();s();Object.defineProperty(We,"__esModule",{value:!0});We.EthereumProviderError=We.EthereumRpcError=void 0;var od=fs(),fr=class extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return od.default(this.serialize(),sd,2)}};We.EthereumRpcError=fr;var bn=class extends fr{constructor(t,r,n){if(!ad(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}};We.EthereumProviderError=bn;function ad(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function sd(e,t){if(t!=="[Circular]")return t}});var dr=m(qe=>{"use strict";a();s();Object.defineProperty(qe,"__esModule",{value:!0});qe.errorValues=qe.errorCodes=void 0;qe.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};qe.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Cn=m(Z=>{"use strict";a();s();Object.defineProperty(Z,"__esModule",{value:!0});Z.serializeError=Z.isValidCode=Z.getMessageFromCode=Z.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var pr=dr(),ld=cr(),cs=pr.errorCodes.rpc.internal,ud="Unspecified error message. This is a bug, please report it.",fd={code:cs,message:En(cs)};Z.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function En(e,t=ud){if(Number.isInteger(e)){let r=e.toString();if(Sn(pr.errorValues,r))return pr.errorValues[r].message;if(hs(e))return Z.JSON_RPC_SERVER_ERROR_MESSAGE}return t}Z.getMessageFromCode=En;function ps(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(pr.errorValues[t]||hs(e))}Z.isValidCode=ps;function cd(e,{fallbackError:t=fd,shouldIncludeStack:r=!1}={}){var n,i;if(!t||!Number.isInteger(t.code)||typeof t.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof ld.EthereumRpcError)return e.serialize();let o={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Sn(e,"code")&&ps(e.code)){let f=e;o.code=f.code,f.message&&typeof f.message=="string"?(o.message=f.message,Sn(f,"data")&&(o.data=f.data)):(o.message=En(o.code),o.data={originalError:ds(e)})}else{o.code=t.code;let f=(n=e)===null||n===void 0?void 0:n.message;o.message=f&&typeof f=="string"?f:t.message,o.data={originalError:ds(e)}}let l=(i=e)===null||i===void 0?void 0:i.stack;return r&&e&&l&&typeof l=="string"&&(o.stack=l),o}Z.serializeError=cd;function hs(e){return e>=-32099&&e<=-32e3}function ds(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Sn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}});var ys=m(hr=>{"use strict";a();s();Object.defineProperty(hr,"__esModule",{value:!0});hr.ethErrors=void 0;var xn=cr(),ms=Cn(),U=dr();hr.ethErrors={rpc:{parse:e=>Y(U.errorCodes.rpc.parse,e),invalidRequest:e=>Y(U.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Y(U.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Y(U.errorCodes.rpc.methodNotFound,e),internal:e=>Y(U.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Y(t,e)},invalidInput:e=>Y(U.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Y(U.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Y(U.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Y(U.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Y(U.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Y(U.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>lt(U.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>lt(U.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>lt(U.errorCodes.provider.unsupportedMethod,e),disconnected:e=>lt(U.errorCodes.provider.disconnected,e),chainDisconnected:e=>lt(U.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new xn.EthereumProviderError(t,r,n)}}};function Y(e,t){let[r,n]=gs(t);return new xn.EthereumRpcError(e,r||ms.getMessageFromCode(e),n)}function lt(e,t){let[r,n]=gs(t);return new xn.EthereumProviderError(e,r||ms.getMessageFromCode(e),n)}function gs(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}});var Pn=m(H=>{"use strict";a();s();Object.defineProperty(H,"__esModule",{value:!0});H.getMessageFromCode=H.serializeError=H.EthereumProviderError=H.EthereumRpcError=H.ethErrors=H.errorCodes=void 0;var ws=cr();Object.defineProperty(H,"EthereumRpcError",{enumerable:!0,get:function(){return ws.EthereumRpcError}});Object.defineProperty(H,"EthereumProviderError",{enumerable:!0,get:function(){return ws.EthereumProviderError}});var _s=Cn();Object.defineProperty(H,"serializeError",{enumerable:!0,get:function(){return _s.serializeError}});Object.defineProperty(H,"getMessageFromCode",{enumerable:!0,get:function(){return _s.getMessageFromCode}});var dd=ys();Object.defineProperty(H,"ethErrors",{enumerable:!0,get:function(){return dd.ethErrors}});var pd=dr();Object.defineProperty(H,"errorCodes",{enumerable:!0,get:function(){return pd.errorCodes}})});var Ms=m((og,Tn)=>{"use strict";a();s();var Ue=typeof Reflect=="object"?Reflect:null,bs=Ue&&typeof Ue.apply=="function"?Ue.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},mr;Ue&&typeof Ue.ownKeys=="function"?mr=Ue.ownKeys:Object.getOwnPropertySymbols?mr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:mr=function(t){return Object.getOwnPropertyNames(t)};function md(e){console&&console.warn&&console.warn(e)}var Es=Number.isNaN||function(t){return t!==t};function S(){S.init.call(this)}Tn.exports=S;Tn.exports.once=_d;S.EventEmitter=S;S.prototype._events=void 0;S.prototype._eventsCount=0;S.prototype._maxListeners=void 0;var Ss=10;function gr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return Ss},set:function(e){if(typeof e!="number"||e<0||Es(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ss=e}});S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};S.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Es(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Cs(e){return e._maxListeners===void 0?S.defaultMaxListeners:e._maxListeners}S.prototype.getMaxListeners=function(){return Cs(this)};S.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var f=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw f.context=l,f}var d=o[t];if(d===void 0)return!1;if(typeof d=="function")bs(d,this,r);else for(var h=d.length,y=ks(d,h),n=0;n<h;++n)bs(y[n],this,r);return!0};function xs(e,t,r,n){var i,o,l;if(gr(r),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),l=o[t]),l===void 0)l=o[t]=r,++e._eventsCount;else if(typeof l=="function"?l=o[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),i=Cs(e),i>0&&l.length>i&&!l.warned){l.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=l.length,md(f)}return e}S.prototype.addListener=function(t,r){return xs(this,t,r,!1)};S.prototype.on=S.prototype.addListener;S.prototype.prependListener=function(t,r){return xs(this,t,r,!0)};function gd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ps(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=gd.bind(n);return i.listener=r,n.wrapFn=i,i}S.prototype.once=function(t,r){return gr(r),this.on(t,Ps(this,t,r)),this};S.prototype.prependOnceListener=function(t,r){return gr(r),this.prependListener(t,Ps(this,t,r)),this};S.prototype.removeListener=function(t,r){var n,i,o,l,f;if(gr(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,l=n.length-1;l>=0;l--)if(n[l]===r||n[l].listener===r){f=n[l].listener,o=l;break}if(o<0)return this;o===0?n.shift():yd(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,f||r)}return this};S.prototype.off=S.prototype.removeListener;S.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),l;for(i=0;i<o.length;++i)l=o[i],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function Ts(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?wd(i):ks(i,i.length)}S.prototype.listeners=function(t){return Ts(this,t,!0)};S.prototype.rawListeners=function(t){return Ts(this,t,!1)};S.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Rs.call(e,t)};S.prototype.listenerCount=Rs;function Rs(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?mr(this._events):[]};function ks(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function yd(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function wd(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function _d(e,t){return new Promise(function(r,n){function i(){o!==void 0&&e.removeListener("error",o),r([].slice.call(arguments))}var o;t!=="error"&&(o=function(f){e.removeListener(t,i),n(f)},e.once("error",o)),e.once(t,i)})}});var Ds=m((lg,As)=>{a();s();var vd=Re(),Os=Ms(),Rn=typeof Reflect=="object"?Reflect:null,bd=Rn&&typeof Rn.apply=="function"?Rn.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)};As.exports=kn;function kn(){Os.call(this)}vd.inherits(kn,Os);kn.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var f=i[e];if(f===void 0)return!1;if(typeof f=="function")Is(f,this,t);else for(var d=f.length,h=Sd(f,d),r=0;r<d;++r)Is(h[r],this,t);return!0};function Is(e,t,r){try{bd(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function Sd(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}});var js=m((gg,Us)=>{"use strict";a();s();var xd=Object.prototype.toString;Us.exports=function(e){return xd.call(e)==="[object Function]"}});var Fs=m((_g,Bs)=>{"use strict";a();s();Bs.exports=typeof setImmediate=="function"?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}});var Gs=m((Sg,Hs)=>{"use strict";a();s();var Pd=js(),Ks=Fs();Hs.exports=function(e){if(!Pd(e.then))throw new TypeError("Expected a promise");return function(t){e.then(function(r){Ks(t,null,r)},function(r){Ks(t,r)})}}});var dt=m((Rg,Dn)=>{"use strict";a();s();typeof u>"u"||!u.version||u.version.indexOf("v0.")===0||u.version.indexOf("v1.")===0&&u.version.indexOf("v1.8.")!==0?Dn.exports={nextTick:Rd}:Dn.exports=u;function Rd(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return u.nextTick(e);case 2:return u.nextTick(function(){e.call(null,t)});case 3:return u.nextTick(function(){e.call(null,t,r)});case 4:return u.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return u.nextTick(function(){e.apply(null,o)})}}});var Ys=m((Ig,zs)=>{a();s();var kd={}.toString;zs.exports=Array.isArray||function(e){return kd.call(e)=="[object Array]"}});var Ln=m((Dg,$s)=>{a();s();$s.exports=Mt().EventEmitter});var pt=m((Nn,Zs)=>{a();s();var vr=Wi(),ce=vr.Buffer;function Js(e,t){for(var r in e)t[r]=e[r]}ce.from&&ce.alloc&&ce.allocUnsafe&&ce.allocUnsafeSlow?Zs.exports=vr:(Js(vr,Nn),Nn.Buffer=je);function je(e,t,r){return ce(e,t,r)}Js(ce,je);je.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ce(e,t,r)};je.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=ce(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};je.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ce(e)};je.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return vr.SlowBuffer(e)}});var Qs=m((Ug,Wn)=>{"use strict";a();s();function Md(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xs=pt().Buffer,ht=Re();function Id(e,t,r){e.copy(t,r)}Wn.exports=function(){function e(){Md(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return Xs.alloc(0);if(this.length===1)return this.head.data;for(var n=Xs.allocUnsafe(r>>>0),i=this.head,o=0;i;)Id(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();ht&&ht.inspect&&ht.inspect.custom&&(Wn.exports.prototype[ht.inspect.custom]=function(){var e=ht.inspect({length:this.length});return this.constructor.name+" "+e})});var qn=m((Fg,rl)=>{"use strict";a();s();var el=dt();function Od(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&el.nextTick(tl,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(el.nextTick(tl,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function Ad(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function tl(e,t){e.emit("error",t)}rl.exports={destroy:Od,undestroy:Ad}});var jn=m((Gg,fl)=>{"use strict";a();s();var Ee=dt();fl.exports=O;function il(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Zd(t,e)}}var Dd=!u.browser&&["v0.10","v0.9."].indexOf(u.version.slice(0,5))>-1?setImmediate:Ee.nextTick,Be;O.WritableState=gt;var ol=Object.create(Q());ol.inherits=ee();var Ld={deprecate:qi()},al=Ln(),Sr=pt().Buffer,Nd=globalThis.Uint8Array||function(){};function Wd(e){return Sr.from(e)}function qd(e){return Sr.isBuffer(e)||e instanceof Nd}var sl=qn();ol.inherits(O,al);function Ud(){}function gt(e,t){Be=Be||Ce(),e=e||{};var r=t instanceof Be;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){Vd(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new il(this)}gt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(gt.prototype,"buffer",{get:Ld.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var br;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(br=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return br.call(this,e)?!0:this!==O?!1:e&&e._writableState instanceof gt}})):br=function(e){return e instanceof this};function O(e){if(Be=Be||Ce(),!br.call(O,this)&&!(this instanceof Be))return new O(e);this._writableState=new gt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),al.call(this)}O.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function jd(e,t){var r=new Error("write after end");e.emit("error",r),Ee.nextTick(t,r)}function Bd(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Ee.nextTick(n,o),i=!1),i}O.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&qd(e);return o&&!Sr.isBuffer(e)&&(e=Wd(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Ud),n.ended?jd(this,r):(o||Bd(this,n,e,r))&&(n.pendingcb++,i=Kd(this,n,o,e,t,r)),i};O.prototype.cork=function(){var e=this._writableState;e.corked++};O.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&ll(this,e))};O.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Fd(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Sr.from(t,r)),t}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Kd(e,t,r,n,i,o){if(!r){var l=Fd(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Un(e,t,!1,f,n,i,o);return d}function Un(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Hd(e,t,r,n,i){--t.pendingcb,r?(Ee.nextTick(i,n),Ee.nextTick(mt,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),mt(e,t))}function Gd(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Vd(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(Gd(r),t)Hd(e,r,n,t,i);else{var o=ul(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&ll(e,r),n?Dd(nl,e,r,o,i):nl(e,r,o,i)}}function nl(e,t,r,n){r||zd(e,t),t.pendingcb--,n(),mt(e,t)}function zd(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function ll(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,f=!0;r;)i[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;i.allBuffers=f,Un(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new il(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,h=r.encoding,y=r.callback,v=t.objectMode?1:d.length;if(Un(e,t,!1,v,d,h,y),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}O.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};O.prototype._writev=null;O.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Jd(this,n,r)};function ul(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Yd(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),mt(e,t)})}function $d(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Ee.nextTick(Yd,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function mt(e,t){var r=ul(t);return r&&($d(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function Jd(e,t,r){t.ending=!0,mt(e,t),r&&(t.finished?Ee.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Zd(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(O.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});O.prototype.destroy=sl.destroy;O.prototype._undestroy=sl.undestroy;O.prototype._destroy=function(e,t){this.end(),t(e)}});var Ce=m((Yg,hl)=>{"use strict";a();s();var cl=dt(),Xd=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};hl.exports=de;var dl=Object.create(Q());dl.inherits=ee();var pl=Kn(),Fn=jn();dl.inherits(de,pl);for(Bn=Xd(Fn.prototype),Er=0;Er<Bn.length;Er++)Cr=Bn[Er],de.prototype[Cr]||(de.prototype[Cr]=Fn.prototype[Cr]);var Bn,Cr,Er;function de(e){if(!(this instanceof de))return new de(e);pl.call(this,e),Fn.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Qd)}Object.defineProperty(de.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Qd(){this.allowHalfOpen||this._writableState.ended||cl.nextTick(ep,this)}function ep(e){e.end()}Object.defineProperty(de.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});de.prototype._destroy=function(e,t){this.push(null),this.end(),cl.nextTick(t,e)}});var Vn=m(gl=>{"use strict";a();s();var Gn=pt().Buffer,ml=Gn.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function tp(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function rp(e){var t=tp(e);if(typeof t!="string"&&(Gn.isEncoding===ml||!ml(e)))throw new Error("Unknown encoding: "+e);return t||e}gl.StringDecoder=yt;function yt(e){this.encoding=rp(e);var t;switch(this.encoding){case"utf16le":this.text=lp,this.end=up,t=4;break;case"utf8":this.fillLast=op,t=4;break;case"base64":this.text=fp,this.end=cp,t=3;break;default:this.write=dp,this.end=pp;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Gn.allocUnsafe(t)}yt.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};yt.prototype.end=sp;yt.prototype.text=ap;yt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Hn(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function np(e,t,r){var n=t.length-1;if(n<r)return 0;var i=Hn(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=Hn(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=Hn(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function ip(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function op(e){var t=this.lastTotal-this.lastNeed,r=ip(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function ap(e,t){var r=np(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function sp(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function lp(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function up(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function fp(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function cp(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function dp(e){return e.toString(this.encoding)}function pp(e){return e&&e.length?this.write(e):""}});var Kn=m((ty,Rl)=>{"use strict";a();s();var Ke=dt();Rl.exports=C;var hp=Ys(),wt;C.ReadableState=El;var ey=Mt().EventEmitter,vl=function(e,t){return e.listeners(t).length},Zn=Ln(),_t=pt().Buffer,mp=globalThis.Uint8Array||function(){};function gp(e){return _t.from(e)}function yp(e){return _t.isBuffer(e)||e instanceof mp}var bl=Object.create(Q());bl.inherits=ee();var zn=Re(),_=void 0;zn&&zn.debuglog?_=zn.debuglog("stream"):_=function(){};var wp=Qs(),Sl=qn(),Fe;bl.inherits(C,Zn);var Yn=["error","close","destroy","pause","resume"];function _p(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):hp(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function El(e,t){wt=wt||Ce(),e=e||{};var r=t instanceof wt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new wp,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Fe||(Fe=Vn().StringDecoder),this.decoder=new Fe(e.encoding),this.encoding=e.encoding)}function C(e){if(wt=wt||Ce(),!(this instanceof C))return new C(e);this._readableState=new El(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Zn.call(this)}Object.defineProperty(C.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});C.prototype.destroy=Sl.destroy;C.prototype._undestroy=Sl.undestroy;C.prototype._destroy=function(e,t){this.push(null),t(e)};C.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=_t.from(e,t),t=""),n=!0),Cl(this,e,t,!1,n)};C.prototype.unshift=function(e){return Cl(this,e,null,!0,!1)};function Cl(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,Ep(e,o);else{var l;i||(l=vp(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==_t.prototype&&(t=gp(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):$n(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?$n(e,o,t,!1):xl(e,o)):$n(e,o,t,!1))):n||(o.reading=!1)}return bp(o)}function $n(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&xr(e)),xl(e,t)}function vp(e,t){var r;return!yp(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function bp(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}C.prototype.isPaused=function(){return this._readableState.flowing===!1};C.prototype.setEncoding=function(e){return Fe||(Fe=Vn().StringDecoder),this._readableState.decoder=new Fe(e),this._readableState.encoding=e,this};var yl=8388608;function Sp(e){return e>=yl?e=yl:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function wl(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Sp(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}C.prototype.read=function(e){_("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Jn(this):xr(this),null;if(e=wl(e,t),e===0&&t.ended)return t.length===0&&Jn(this),null;var n=t.needReadable;_("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,_("length less than watermark",n)),t.ended||t.reading?(n=!1,_("reading or ended",n)):n&&(_("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=wl(r,t)));var i;return e>0?i=Pl(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Jn(this)),i!==null&&this.emit("data",i),i};function Ep(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,xr(e)}}function xr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ke.nextTick(_l,e):_l(e))}function _l(e){_("emit readable"),e.emit("readable"),Xn(e)}function xl(e,t){t.readingMore||(t.readingMore=!0,Ke.nextTick(Cp,e,t))}function Cp(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}C.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};C.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,_("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==u.stdout&&e!==u.stderr,o=i?f:L;n.endEmitted?Ke.nextTick(o):r.once("end",o),e.on("unpipe",l);function l(j,V){_("onunpipe"),j===r&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,y())}function f(){_("onend"),e.end()}var d=xp(r);e.on("drain",d);var h=!1;function y(){_("cleanup"),e.removeListener("close",x),e.removeListener("finish",K),e.removeListener("drain",d),e.removeListener("error",P),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",L),r.removeListener("data",W),h=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d()}var v=!1;r.on("data",W);function W(j){_("ondata"),v=!1;var V=e.write(j);V===!1&&!v&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Tl(n.pipes,e)!==-1)&&!h&&(_("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,v=!0),r.pause())}function P(j){_("onerror",j),L(),e.removeListener("error",P),vl(e,"error")===0&&e.emit("error",j)}_p(e,"error",P);function x(){e.removeListener("finish",K),L()}e.once("close",x);function K(){_("onfinish"),e.removeListener("close",x),L()}e.once("finish",K);function L(){_("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(_("pipe resume"),r.resume()),e};function xp(e){return function(){var t=e._readableState;_("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&vl(e,"data")&&(t.flowing=!0,Xn(e))}}C.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Tl(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};C.prototype.on=function(e,t){var r=Zn.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&xr(this):Ke.nextTick(Pp,this))}return r};C.prototype.addListener=C.prototype.on;function Pp(e){_("readable nexttick read 0"),e.read(0)}C.prototype.resume=function(){var e=this._readableState;return e.flowing||(_("resume"),e.flowing=!0,Tp(this,e)),this};function Tp(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ke.nextTick(Rp,e,t))}function Rp(e,t){t.reading||(_("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Xn(e),t.flowing&&!t.reading&&e.read(0)}C.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Xn(e){var t=e._readableState;for(_("flow",t.flowing);t.flowing&&e.read()!==null;);}C.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(_("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(_("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<Yn.length;o++)e.on(Yn[o],this.emit.bind(this,Yn[o]));return this._read=function(l){_("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});C._fromList=Pl;function Pl(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=kp(e,t.buffer,t.decoder),r}function kp(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Mp(e,t):Ip(e,t),n}function Mp(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function Ip(e,t){var r=_t.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function Jn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ke.nextTick(Op,t,e))}function Op(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Tl(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Qn=m((iy,Il)=>{"use strict";a();s();Il.exports=pe;var Pr=Ce(),Ml=Object.create(Q());Ml.inherits=ee();Ml.inherits(pe,Pr);function Ap(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function pe(e){if(!(this instanceof pe))return new pe(e);Pr.call(this,e),this._transformState={afterTransform:Ap.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Dp)}function Dp(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){kl(e,t,r)}):kl(this,null,null)}pe.prototype.push=function(e,t){return this._transformState.needTransform=!1,Pr.prototype.push.call(this,e,t)};pe.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};pe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};pe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};pe.prototype._destroy=function(e,t){var r=this;Pr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function kl(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Ll=m((sy,Dl)=>{"use strict";a();s();Dl.exports=vt;var Ol=Qn(),Al=Object.create(Q());Al.inherits=ee();Al.inherits(vt,Ol);function vt(e){if(!(this instanceof vt))return new vt(e);Ol.call(this,e)}vt.prototype._transform=function(e,t,r){r(null,e)}});var Wl=m((ie,Nl)=>{a();s();ie=Nl.exports=Kn();ie.Stream=ie;ie.Readable=ie;ie.Writable=jn();ie.Duplex=Ce();ie.Transform=Qn();ie.PassThrough=Ll()});var jl=m((dy,Ul)=>{a();s();Ul.exports=ql;function ql(e,t){if(e&&t)return ql(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),l=n[n.length-1];return typeof o=="function"&&o!==l&&Object.keys(l).forEach(function(f){o[f]=l[f]}),o}}});var Rr=m((my,ei)=>{a();s();var Bl=jl();ei.exports=Bl(Tr);ei.exports.strict=Bl(Fl);Tr.proto=Tr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Tr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Fl(this)},configurable:!0})});function Tr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Fl(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var ti=m((wy,Hl)=>{a();s();var Lp=Rr(),Np=function(){},Wp=function(e){return e.setHeader&&typeof e.abort=="function"},qp=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Kl=function(e,t,r){if(typeof t=="function")return Kl(e,null,t);t||(t={}),r=Lp(r||Np);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,f=!1,d=function(){e.writable||h()},h=function(){l=!1,o||r.call(e)},y=function(){o=!1,l||r.call(e)},v=function(L){r.call(e,L?new Error("exited with error code: "+L):null)},W=function(L){r.call(e,L)},P=function(){u.nextTick(x)},x=function(){if(!f){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(l&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},K=function(){e.req.on("finish",h)};return Wp(e)?(e.on("complete",h),e.on("abort",P),e.req?K():e.on("request",K)):l&&!n&&(e.on("end",d),e.on("close",d)),qp(e)&&e.on("exit",v),e.on("end",y),e.on("finish",h),t.error!==!1&&e.on("error",W),e.on("close",P),function(){f=!0,e.removeListener("complete",h),e.removeListener("abort",P),e.removeListener("request",K),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("exit",v),e.removeListener("end",y),e.removeListener("error",W),e.removeListener("close",P)}};Hl.exports=Kl});var $l=m((by,Yl)=>{a();s();var{Duplex:zl}=Wl(),Gl=ti(),Up=Rr(),Vl={},ri=class extends zl{constructor(t={}){let r=Object.assign({},t,{objectMode:!0});super(r),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let r=new ni({parent:this,name:t});return this._substreams[t]=r,jp(this,n=>{r.destroy(n)}),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[t]=Vl}_read(){}_write(t,r,n){let i=t.name,o=t.data;if(!i)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();let l=this._substreams[i];if(!l)return console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n();l!==Vl&&l.push(o),n()}},ni=class extends zl{constructor({parent:t,name:r}){super({objectMode:!0}),this._parent=t,this._name=r}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}};Yl.exports=ri;function jp(e,t){let r=Up(t);Gl(e,{readable:!1},r),Gl(e,{writable:!1},r)}});var Jl={};Ff(Jl,{default:()=>Bp});var Bp,Zl=Bf(()=>{a();s();Bp={}});var Xl=m((Py,kr)=>{a();s();var xe=(Zl(),Kf(Jl));if(xe&&xe.default){kr.exports=xe.default;for(let e in xe)kr.exports[e]=xe[e]}else xe&&(kr.exports=xe)});var tu=m((ky,eu)=>{a();s();var Fp=Rr(),Kp=ti(),ii=Xl(),bt=function(){},Hp=/^v?\.0/.test(u.version),Mr=function(e){return typeof e=="function"},Gp=function(e){return!Hp||!ii?!1:(e instanceof(ii.ReadStream||bt)||e instanceof(ii.WriteStream||bt))&&Mr(e.close)},Vp=function(e){return e.setHeader&&Mr(e.abort)},zp=function(e,t,r,n){n=Fp(n);var i=!1;e.on("close",function(){i=!0}),Kp(e,{readable:t,writable:r},function(l){if(l)return n(l);i=!0,n()});var o=!1;return function(l){if(!i&&!o){if(o=!0,Gp(e))return e.close(bt);if(Vp(e))return e.abort();if(Mr(e.destroy))return e.destroy();n(l||new Error("stream was destroyed"))}}},Ql=function(e){e()},Yp=function(e,t){return e.pipe(t)},$p=function(){var e=Array.prototype.slice.call(arguments),t=Mr(e[e.length-1]||bt)&&e.pop()||bt;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var l=o<e.length-1,f=o>0;return zp(i,l,f,function(d){r||(r=d),d&&n.forEach(Ql),!l&&(n.forEach(Ql),t(r))})});return e.reduce(Yp)};eu.exports=$p});a();s();a();s();function zf(){let e={},t=["serviceWorker"];for(let r in navigator)if(!t.includes(r))try{e[r]=navigator[r]}catch(n){console.warn(`Failed to copy navigator.${r}:`,n.message),e[r]=void 0}return e.serviceWorker=null,e}function Yf(){return new Proxy(zf(),{get(e,t){let r=e[t];return typeof r=="function"?r.bind(e):r}})}var $f=Yf();Object.defineProperty(window,"navigator",{value:$f,writable:!1,configurable:!1});a();s();var oi=p(Ni()),ou=p(is());a();s();var os=["addChainForHardwareWallet","addHardwareWalletAccount","backupMnemonic","checkMnemonicIsImported","checkPrivateKeyIsImported","clearDappData","completeOnboarding","confirmPassword","createWallet","createWalletAndRestore","createWalletsToServer","getBackupData","getMnemonicByWalletId","getNewAddress","getPrivateKeyMapByWalletId","getRequestAccountTabIds","getTonNewAddress","getWalletBaseCoins","getWalletIdentityByWalletId","importHardwareWalletAccount","importWalletWithMnemonic","importWalletWithMnemonicAndRestore","importWalletWithMpcAndRestore","importWalletWithPrivateKey","importWalletWithPrivateKeyAndRestore","markPasswordForgotten","modifyPassword","rejectPassword","removeAccountByAccountId","removeWalletsByGroupId","resetOnboarding","setFirstTimeFlowType","setPassword","setPreference","setSeedPhraseBackedUp","setSelectedCurrencyAndUpdateBalance","setWalletConfig","submitPassword","unMarkPasswordForgotten","updateWalletAddress","validateMnemonicOfTon","verifyPassword"],as=["ActionCompleteOnboarding","BiometricsVerificationSecondFailurePopupButtonClick","BiometricsVerificationSecondFailurePopupView","ExtensionSafetySettingFullButtonClick","FetchSimpleGet","PrivateKeyPageMidCompleteCopyCancelClick","PrivateKeyPageMidCompleteCopyClick","PrivateKeyPageMidSecureCopyClick","UnlockWalletTopBiometricsClick","UnlockWalletTopPasswordClick","WalletBiometricsExtensionButtonClick","Web3ExtensionOnboardBtmButtonClick","Web3ExtensionPasswordBtmConfirmClick","Web3NewOnboardingFirstLandingPageButtonClick","Web3NewOnboardingFirstLandingPageView","Web3NewOnboardingSetupPasswordConfirmButtonClick","Web3NewOnboardingSetupPasswordFullPageView","Web3OnboardingFullPageView","Web3SettingsBiometricsToggleSwipe","captureEvent","captureException","captureMessage","clipboardCopyText","disableMoonCat","enableMoonCat","forceUpdateMetamaskState","getInitialSyncData","getMoonCatData","getWalletAsset","init","logDappConnectedHistory","logDappGetChain","logDappSwitchChain","logDappTxHistory","logInstalledWalletExtensions","logPageView","logPostRate","logPrivateKeyCopy","logPrivateKeyOrMnemonicShow","passkeyCreatePasskey","passkeyGetAuthToken","passkeyGetPassword","passkeyIsSupportModernAuth","passkeyIsSupportPasskey","passkeyRandomBytes","passkeyVerifyPasskey","platformCloseCurrentWindow","platformCloseTab","platformCloseWindow","platformCreateOffscreen","platformCurrentTab","platformFocusCurrentWindow","platformFocusLastOkPopup","platformFocusWindow","platformGetActiveTabs","platformGetAllWindows","platformGetCpuInfoName","platformGetLastFocusedWindow","platformGetPlatformInfo","platformGetVersion","platformOpenExtensionInBrowser","platformOpenExtensionInPopup","platformOpenSidepanel","platformOpenSidepanelWithWindowId","platformOpenTab","platformOpenWindow","platformReload","platformSetPanelBehavior","platformSetSidepanelPath","platformUpdateWindowPosition","requestHotCodeData","routerBack","routerForward","routerPush","routerReplace","setExtra","setTags","setUser","webMetaxExtensionOpenShow","webMetaxSettingsWalletSecurityResetPasswordClick","webMetaxSettingsWalletSecurityResetWalletClick","windowClose","windowOpen","setLocalStorage"];a();s();var ut=p(Pn());var hd=(e,t)=>r=>{if(!t._writableState.ended&&!!r?.method){if(!e[r.method]){let n={jsonrpc:"2.0",error:(0,ut.serializeError)(ut.ethErrors.rpc.methodNotFound({message:`${r.method} not found`}),{shouldIncludeStack:!0}),id:r.id};t.write(n);return}e[r.method](...r.params,(n,i)=>{if(!t._writableState.ended)if(n){let o={jsonrpc:"2.0",error:(0,ut.serializeError)(n,{shouldIncludeStack:!0}),id:r.id};t.write(o)}else{let o={jsonrpc:"2.0",result:i,id:r.id};t.write(o)}})}},vs=hd;a();s();var Ls=p(Pn()),Ns=p(Ni()),Ws=p(Ds());var wr,ft,ct=!1,_r,yr,Mn=class{constructor(t){this.connectionStream=t,this.notificationChannel=new Ws.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(t){this.notificationChannel.removeAllListeners();let r=t instanceof Error?t:new Error(t||"Connection closed");this.requests.forEach(n=>{try{n.callback(r)}catch{}}),this.requests.clear()}async handleResponse(t){let{id:r,result:n,error:i,method:o,params:l}=t,{callback:f}=this.requests.get(r)??{};if(!(o&&l&&r)){if(o&&l&&!r){this.notificationChannel.emit("notification",t);return}if(!!f){if(i){let d=new Ls.EthereumRpcError(i.code,i.message,i.data);d.stack=i.stack,this.requests.delete(r),f(d);return}if(this.requests.delete(r),typeof f=="function")if(typeof n=="object"&&n?.__encryptedData__&&ct){let{__encryptedData__:d,...h}=n,y=await Vi(d.text,ft.privateKey,_r);f(null,{...h,...JSON.parse(y)})}else f(null,n)}}}};async function Ed(e){wr=Br(),ft=await Fi();let t=(0,Ns.default)(e),r=await t.syncPubKey({msg:"SYN"});_r=await Ki(r),await t.syncPubKey({msg:"ACK",sourceId:wr,pubKey:await Hi(ft.publicKey)}),ct=!0}function qs(){wr=null,ft=null,_r=null,ct=!1,yr=null}async function In(e){ct||(yr||(yr=Ed(e)),await yr)}var Cd=e=>{let t=new Mn(e),r=new Proxy(t,{get:(n,i)=>{if(i!=="then")return n[i]?n[i]:async(...o)=>{let l=o[0];l&&typeof l=="object"&&l.__secretData__&&(ct||await In(r),l.__encryptedData__={sourceId:wr,text:await Gi(JSON.stringify(l.__secretData__),ft.privateKey,_r)},delete l.__secretData__);let f=o[o.length-1],d=o.slice(0,-1),h=Br();n.requests.set(h,{callback:f}),n.connectionStream.write({jsonrpc:"2.0",method:i,params:d,id:h})}}});return r},On=Cd;a();s();var Vs=p(Gs()),Td=e=>{if(e)throw e};function An(e,t){return(...r)=>{let n=r[r.length-1],i=typeof n=="function",o=i?n:Td;i&&r.pop();let l;try{l=Promise.resolve(e.apply(t,r))}catch(f){l=Promise.reject(f)}(0,Vs.default)(l)(o)}}a();s();var ru=p($l()),nu=p(tu());function iu(e){let t=new ru.default;return(0,nu.default)(e,t,e,r=>{r&&zi()}),t}function Jp(e,t){let r=os.reduce((i,o)=>e[o]?{...i,[o]:e[o].bind(e)}:i,{}),n=as.reduce((i,o)=>t[o]?{...i,[o]:t[o].bind(t)}:i,{});return{bgApi:r,uiApi:n}}async function au(){let e=new ou.default({name:"ui-ses",target:"ui-ses-iframe",targetWindow:window.parent}),t=iu(e),r=t.createStream("parent-to-uiSes-iframe"),n=t.createStream("uiSes-iframe-to-parent"),i=On(t.createStream("controller")),o=On(n),l=(0,oi.default)(i),f=(0,oi.default)(o);In(i),window.addEventListener("message",y=>{y.data.type==="backgroundReady"&&qs()});let{bgApi:d,uiApi:h}=Jp(l,f);return Yi(d),$i(h),{parentToIframeStream:r}}function su(e,t){let r=Object.entries(t).reduce((n,[i,o])=>({...n,[i]:An(o,null)}),{});e.on("data",vs(r,e))}a();s();a();s();var Nf=p(b()),Wf=p(we()),qf=p(Hf());a();s();a();s();function ai(e={},t){let r={shouldClose:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{transitionName:"",type:"",props:{}},accountDetail:{subview:"transactions"},isLoading:!1,warning:null,requestAccountTabs:{},currentWindowTab:{},...e};switch(t?.type){case eo:return{...r,forgottenPassword:t.value};case no:return{...r,warning:null};case ao:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case so:return{...r,txId:t.id,warning:null,isLoading:!1};case lo:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case uo:return{...r};case to:return{...r,warning:t.value||"Incorrect password. Try again."};case ro:return{...r,warning:""};case fo:return{...r,isLoading:!0,loadingMessage:t.value};case co:return{...r,isLoading:!1};case io:return{...r,warning:t.value,isLoading:!1};case oo:return{...r,warning:void 0};case ho:return{...r,requestAccountTabs:t.value};case mo:return{...r,currentWindowTab:t.value};default:return r}}a();s();var Zp="dialog",lu={["REMOVE_ACCOUNT"]:{isOpen:!1,accountId:"",keyringType:"",isSA:!1}},Xp=go({name:Zp,initialState:lu,reducers:{openDialog(e,t){t.payload.type==="REMOVE_ACCOUNT"&&(e["REMOVE_ACCOUNT"]={...e["REMOVE_ACCOUNT"],...t.payload,isOpen:!0})},closeDialog(e,t){t.payload.type==="REMOVE_ACCOUNT"&&(e["REMOVE_ACCOUNT"]=lu["REMOVE_ACCOUNT"])}}}),{actions:Qp,reducer:eh,name:nw}=Xp,{openDialog:iw,closeDialog:ow}=Qp;var uu=eh;a();s();function si(e={},{type:t,value:r}={}){if(t===po){let{messages:n,okdMessages:i,dexMessages:o,defiMessages:l}=r;return{...e,current:n,okdCurrent:i,dexCurrent:o,defiCurrent:l}}return e}var fu=e=>e.localeMessages.current,cu=e=>e.localeMessages.okdCurrent;var th=Zi({metamask:bo,appState:ai,localeMessages:si,importAccount:To,providerSlice:xo,assetsSlice:yo,batchImportPrivateKey:Po,keyring:wo,dialog:uu}),rh=(e,t)=>{if(t.type==="SES_IFRAME_SYNC_STORE"){ko(t.payload.metamask.chainList);let r=e?.metamask?.currentLocale,n=t.payload?.metamask?.currentLocale,i=r===n?e.localeMessages:t.payload.localeMessages;return{...t.payload,importAccount:{...e.importAccount,unlockHardwareWallets:t.payload?.importAccount?.unlockHardwareWallets},batchImportPrivateKey:{...e.batchImportPrivateKey},localeMessages:i}}return th(e,t)},du=rh;a();s();var J=p(b());var xf=p(Me());a();s();a();s();var hu=p(b());a();s();function nh(){return{default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"}}function pu(e){window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${Gr()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${Gr()}`,window.okGlobal.cdnDomainMap=nh())}var mu=()=>{let e=Ie("staticDomain");(0,hu.useLayoutEffect)(()=>{pu(e)},[e])};function ih(){mu()}var gu=ih;a();s();a();s();var Su=p(b());a();s();var k=p(b());var yu=p(Dt()),wu=p(Gf());a();s();var oh=e=>k.default.createElement(jt,{icon:"okx-wallet-plugin-arrow-small-down",size:jt.SIZE.xs,className:(0,yu.default)("error-page__icon",{"okui-accordion-header-icon-expanded":e})}),li=class extends k.PureComponent{constructor(){super(...arguments);this.state={downloadUrl:!1}}renderErrorDetail(r){return k.default.createElement("li",null,k.default.createElement("p",null,r))}renderErrorStack(r,n){return k.default.createElement("li",null,k.default.createElement("span",null,r),k.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){let{simpleGet:r}=this.props;r(Ho.getExtensionVersion).then(({data:n})=>{let i=Fo(),o=wu.default.runtime.getManifest().version;if(i===Co&&n.edge!==o){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}n.chrome!==o&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(()=>{})}render(){let{error:r,clearDappData:n}=this.props,{downloadUrl:i}=this.state,l=Ko()===So?g("wallet_home_subtitle_errortip_error_popup_message"):g("wallet_home_subtitle_errortip_errorpage_message"),f=At(),d=te.State.getImgMap(f),h=`${Bt()}${d[te.State.TYPE.systemError]}`;return k.default.createElement("div",{className:"error-page"},k.default.createElement("div",{className:"error-page__header"},g("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&k.default.createElement(jt,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await n(),window.location.href=window.location.pathname}})),k.default.createElement("div",{className:"error-page__details"},k.default.createElement(te.State,{type:te.State.TYPE.systemError,title:i?g("extension_wallet_mid_text_update_latest_version"):l,imgSrc:h,renderButton:()=>k.default.createElement(k.default.Fragment,null,k.default.createElement("div",null,k.default.createElement(A,{category:A.CATEGORY.fill,type:A.TYPE.primary,size:A.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:i})}},g("extension_wallet_mid_btn_goto_store")," "),k.default.createElement(A,{className:"error-page_button_left",category:A.CATEGORY.fill,type:A.TYPE.primary,size:A.SIZE.s,onClick:()=>{chrome.runtime.reload()}},g("wallet_extension_settings_item_clear_cache")," ")))}),k.default.createElement(Do,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:oh,title:g("wallet_home_subtitle_errortip_errordetail"),onToggle:y=>{this.setState({expand:y})}}),this.state.expand?k.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(g("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(g("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(g("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(g("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}},_u=li;a();s();var ui=p(we());var fi=class{getConnection(){let t=q();if(!t)throw new Error("[Fetch Proxy] UI connection not available");return t}async simpleGet(t,r={},n={}){try{let o=await this.getConnection().FetchSimpleGet(t,r,n);return ui.default.debug("[Fetch Proxy] simpleGet success:",{url:t,params:r,config:n}),o}catch(i){throw ui.default.error("[Fetch Proxy] simpleGet failed:",{url:t,params:r,config:n,error:i}),i}}},vu=new fi,bu=vu.simpleGet.bind(vu);var ah=e=>Su.default.createElement(_u,{...e,simpleGet:bu,clearDappData:()=>It().clearDappData()}),ci=ah;a();s();var Cu=p(b());a();s();var St=p(b());a();s();var di={"error-page":"_error-page_1qj8r_1",errorPage:"_error-page_1qj8r_1","error-page-details":"_error-page-details_1qj8r_13",errorPageDetails:"_error-page-details_1qj8r_13"};var sh=({onRetry:e})=>{let t=At(),r=te.State.getImgMap(t),n=`${Bt()}${r[te.State.TYPE.noNetwork]}`;return St.default.createElement("div",{className:di.errorPage},St.default.createElement("div",{className:di.errorPageDetails},St.default.createElement(te.State,{type:te.State.TYPE.noNetwork,title:g("wallet_extension_tg_empty_title_load_failed"),description:g("wallet_extension_tg_empty_desc_load_failed"),imgSrc:n,renderButton:()=>St.default.createElement(A,{category:A.CATEGORY.fill,type:A.TYPE.primary,size:A.SIZE.s,onClick:e},g("wallet_extension_tg_empty_btn_load_failed"))})))},Eu=sh;var lh=()=>Cu.default.createElement(Eu,{onRetry:()=>{R.replace(ve)}}),xu=lh;a();s();var B=p(we());var pi=class{async captureException(t,r={}){let n=q();if(!n)return B.default.error("[OKSentryProxy] UI connection not available"),null;try{return await n.captureException(t,r)}catch(i){return B.default.error("[OKSentryProxy] captureException failed:",i),null}}async captureEvent(t){let r=q();if(!r)return B.default.error("[OKSentryProxy] UI connection not available"),null;try{return await r.captureEvent(t)}catch(n){return B.default.error("[OKSentryProxy] captureEvent failed:",n),null}}async captureMessage(t,r={}){let n=q();if(!n)return B.default.error("[OKSentryProxy] UI connection not available"),null;try{return await n.captureMessage(t,r)}catch(i){return B.default.error("[OKSentryProxy] captureMessage failed:",i),null}}async setUser(t){let r=q();if(!r)return B.default.error("[OKSentryProxy] UI connection not available"),!1;try{return await r.setUser(t)}catch(n){return B.default.error("[OKSentryProxy] setUser failed:",n),!1}}async setTags(t){let r=q();if(!r)return B.default.error("[OKSentryProxy] UI connection not available"),!1;try{return await r.setTags(t)}catch(n){return B.default.error("[OKSentryProxy] setTags failed:",n),!1}}async setExtra(t,r){let n=q();if(!n)return B.default.error("[OKSentryProxy] UI connection not available"),!1;try{return await n.setExtra(t,r)}catch(i){return B.default.error("[OKSentryProxy] setExtra failed:",i),!1}}async init(t){let r=q();if(!r)return B.default.error("[OKSentryProxy] UI connection not available"),!1;try{return await r.init(t)}catch(n){return B.default.error("[OKSentryProxy] init failed:",n),!1}}},uh=new pi,Pu=uh;a();s();var X=p(b());var hi={fetchConfig:{project:"okx_extension_wallet",site:"okx"}};var mi=0,ch=1,gi=null;function Ru(){return e=>(hi.fetchConfig.locale=e.locale,X.default.createElement(Bi,{localeData:e.localeData,isDev:!0,noRemoteData:!0,fetchConfig:hi.fetchConfig},e.children))}var dh=Ru(),ph=Ru(),hh=u.env.ASSETS_BUILD_TYPE===ke.DEV||u.env.ASSETS_BUILD_TYPE===ke.DAILY,Tu=(0,X.createContext)(e=>`[${e}]`),yi=e=>{let t=window.localStorage.getItem("languageKeyMode"),r=hh&&t==="multilingualMode",n=M(Ot),i=_o(n),o=M(fu),l=M(cu),f=(0,X.useMemo)(()=>(vo(n,window),gi=gi===mi?ch:mi,Object.keys(o).reduce((d,h)=>{let y=o[h].message;return d[h]=r?`${y}${y}${y}`:y,d},{})),[i,o,r]);return(0,X.useMemo)(()=>{Ye.setConfig({frozenScroll:!1,localeProviderProps:{fetchConfig:{noFetch:!0},isDev:!0,localeData:l}})},[n,l]),gi===mi?X.default.createElement(dh,{localeData:f,locale:i},X.default.createElement(Tu.Provider,{value:jr},e.children)):X.default.createElement(ph,{localeData:f,locale:i},X.default.createElement(Tu.Provider,{value:jr},e.children))};a();s();var Te=p(b());var Sf=p(Me());var Ef=p(Dt());a();s();var mh=document.documentElement,gh={en:"en",zh_CN:"zh-hans",zh_TW:"zh-hant",fr:"fr",ru:"ru",vi:"vi",id:"id",tr:"tr",de:"de",it:"it",pl:"pl",en_IN:"en-in",pt_BR:"pt",pt_PT:"pt-pt",es:"es-es",es_419:"es",cs:"cs",ro:"ro",uk:"uk",ar_EH:"ar"},yh=e=>{mh.setAttribute("lang",gh[e])},ku=yh;a();s();var wh=async e=>{let t=document.documentElement;e==="rtl"?t.setAttribute("dir","rtl"):t.setAttribute("dir","ltr")},Mu=wh;a();s();var vf=p(b());a();s();var $=p(b());a();s();a();s();var D=p(b()),ye=p(Me());a();s();var G=p(b());var Yu=p(Me());a();s();var Ir=p(b()),Iu=()=>{let[e,t]=(0,Ir.useState)(0);return(0,Ir.useEffect)(()=>{function r(){let n=window.visualViewport?.height<window?.innerHeight?window?.innerHeight-window.visualViewport?.height:0;t(n)}return window?.visualViewport?.addEventListener("resize",r),()=>{window?.visualViewport?.removeEventListener("resize",r)}},[]),{keyboardHeight:e}};a();s();var Or=p(b()),Ou=p(Me()),_h=(e,t=2e3)=>"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:t}):window.setTimeout(e,50),vh=e=>{"requestIdleCallback"in window?window.cancelIdleCallback(e):window.clearTimeout(e)},me=({preload:e=[],...t})=>((0,Or.useEffect)(()=>{if(e.length===0)return;let r=_h(()=>{e.forEach(n=>{typeof n=="function"&&n()})});return()=>{vh(r)}},[e]),Or.default.createElement(Ou.Route,{...t}));a();s();a();s();var T=p(b());a();s();a();s();var xt=p(b());var zu=p(Me());a();s();var Sh=p(b());a();s();var Ar=p(Vf()),bh=(e,t)=>typeof e=="object"&&e!==null&&typeof t=="object"&&t!==null?Object.keys(e).every(r=>e[r]===t[r]):e===t,Au=(0,Ar.createSelectorCreator)(Ar.defaultMemoize,bh);a();s();var Du=()=>M(Zr);var Fv=Au(({keyring:e})=>{let{keyringIdentities:t}=e;return{keyringIdentities:t}},(e,t)=>t??Zr(e),(e,t)=>Uo({keyring:e},t));a();s();var Lu=()=>Ie("passwordSecurity")?.data;a();s();var Eh=()=>Ie("host")?.data??g("wallet_common_okx_link"),Nu=Eh;a();s();var Et=p(b());var Ch=()=>{let[e,t]=(0,Et.useState)(0),[r,n]=(0,Et.useState)(!0);return(0,Et.useEffect)(()=>{(async()=>{try{n(!0);let f=q();if(!f)throw new Error("UI connection not available");let d=await f.getWalletAsset();t(d||0)}catch(f){console.error("Failed to fetch wallet asset:",f),t(0)}finally{n(!1)}})()},[]),[{walletAsset:e,platformAsset:e,rpcModeCoinSymbol:""},[],{loading:r}]},Wu=Ch;a();s();a();s();function xh(e){return Object.values(e.metamask.pendingApprovals||{}).filter(r=>r.type===sa.WALLET_REQUEST_PERMISSIONS).map(r=>({metadata:{id:r.id,origin:r.origin,url:r?.requestData?.url},permissions:{eth_accounts:{}},time:r?.time||Date.now(),providerType:r?.requestData?.providerType,providerTypes:r?.requestData?.providerTypes,method:r?.requestData?.method,exts:r?.requestData?.exts,providersExts:r?.requestData?.providersExts}))}function qu(e){let t=xh(e);return t&&t[0]?t[t.length-1]:null}var Uu=e=>{let t="";try{let r=qo(e),n=Wo(e),i=jo(e);t=qu(e)?.metadata?.origin||n[n.length-1]?.origin||n[n.length-1]?.msgParams?.origin||i[i.length-1]?.origin||r[r.length-1]?.origin}catch{}return t};a();s();a();s();a();s();var ju="referralCode",Ph=({address:e,walletType:t})=>`${e}-${t}`,Th=async()=>(await Kr.get(ju))?.[ju]||{},Rh=async({address:e,walletType:t})=>{let r=await Th(),n=Ph({address:e,walletType:t});return r[n]||null};var Bu=async e=>{let{keyringIdentityType:t,account:r,serverWalletType:n}=e,i;switch(t){case qt.MNEMONIC:i=r?.[Ro];break;case qt.PRIVATE_KEY:i=Object.values(r??{})[0];break;default:return null}return i?Rh({address:i,walletType:n}):null};a();s();a();s();var wi="redirect_param_",Fu="redirect_pathname",Ku="redirect_search_params";var Hu=e=>Object.entries(e).map(([t,r])=>{let n=Array.isArray(r)?encodeURIComponent(r.join(",")):encodeURIComponent(r);return`${t}=${n}`}).join("&"),Gu=e=>{let t=new URLSearchParams(e),r=t.get(Fu),n=t.get(Ku),i={};return n&&n.split("&").filter(o=>o.includes(wi)).forEach(o=>{let[l,f]=o.split("="),d=l.replace(wi,""),h=decodeURIComponent(f);h.includes(",")?i[d]=h.split(",").map(y=>y.trim()):i[d]=h}),{redirectPathname:r,redirectSearchParams:i}};a();s();var He=p(b());a();s();var Ct={updateMb32:"_updateMb32_2kuwm_1",centerImage:"_centerImage_2kuwm_4",titleUpdate:"_titleUpdate_2kuwm_11",textUpdate:"_textUpdate_2kuwm_16"};var Vu=(e,t)=>{Nt.action({mobileWidth:"77.777777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,btnFull:!0,children:He.default.createElement("div",{className:Ct.updateMb32},He.default.createElement("div",{className:Ct.centerImage},He.default.createElement("img",{src:t,alt:""})),He.default.createElement("div",{className:Ct.titleUpdate},g("wallet_extension_password_popup_title_wallet_security_tip")),He.default.createElement("div",{className:Ct.textUpdate},g("wallet_extension_password_popup_text_wallet_security_tip"))),confirmText:g("wallet_extension_password_popup_btn_update_password"),cancelText:g("wallet_extension_password_popup_btn_maybe_later"),maskClosable:!1,onConfirm:r=>{window.localStorage.pss=1,R.push(Oe),r.destroy()},cancelBtnProps:{category:"text",type:"primary"},onCancel:r=>{window.localStorage.pss=1,r.destroy()}})};var kh=e=>`https://${e}/help/how-to-solve-the-problem-of-encountering-password-errors-when-logging-in-to`,_i=()=>M(Jr),Pt=({form:e})=>{let{search:t}=(0,zu.useLocation)(),r=Mo(),n=Du(),[i,o]=(0,xt.useState)(!1),[l,f]=(0,xt.useState)(null),[{walletAsset:d=0}]=Wu(),h=Lu(),y=M(Uu),W=aa()===Eo,P=ra();er(async()=>{let kt="";try{kt=(await Bu({keyringIdentityType:P?.keyringIdentityType,account:P?.account,serverWalletType:P?.serverWalletType}))?.refCode||""}catch{}Zo.webMetaxExtensionOpenShow({islogin:"no",isbydapp:W?" yes":"no",dapp_url:y,wallet_id:n,web3_c_ref:kt})});let x=Nu(),L=na()?.passwordNotice||kh(x),j=Je({dark:"/cdn/assets/imgs/246/74D87A474619BCFE.png",light:"/cdn/assets/imgs/246/696DAB049D0A9095.png"}),V=zo(async kt=>{let Ve=e.getFieldValue("password");if(Ve&&!i&&!l)try{let qr=window.localStorage.pss;o(!0),await r(ia(Ve)),h&&Ve.length<la&&Number(d)>100&&!qr&&Vu(R,j);let{redirectPathname:ze,redirectSearchParams:jf}=Gu(t);ze?(R.replace({pathname:ve}),R.push({pathname:ze,search:Hu(jf)})):R.push({pathname:ve})}catch(qr){let{message:ze}=qr;ze===Lo?f(ji("wallet_set_password_errortip_password_wrong_see_notice",{notice:xt.default.createElement(Lt,{size:Lt.SIZE.sm,weight:Lt.WEIGHT.muted,target:"_blank",href:L,underline:!0},g("wallet_set_password_errortip_password_wrong_see_notice_icu"))})):ze===No&&Wt.error(g("wallet_home_toast_version_error")),kt?.()}finally{o(!1)}},[e,i,l]);return{submitting:i,passwordError:l,setPasswordError:f,onSubmit:V}};var Dr=p(Dt());a();s();var oe={password:"_password_1q2iu_1",error:"_error_1q2iu_5",input:"_input_1q2iu_8",btn:"_btn_1q2iu_14",footer:"_footer_1q2iu_17","tip-text":"_tip-text_1q2iu_22",tipText:"_tip-text_1q2iu_22","password-tip-text":"_password-tip-text_1q2iu_32",passwordTipText:"_password-tip-text_1q2iu_32","pass-key-tip-text":"_pass-key-tip-text_1q2iu_35",passKeyTipText:"_pass-key-tip-text_1q2iu_35"};var Tt=({footerClassName:e})=>{let t=_e.useForm(),r=_i();T.default.useLayoutEffect(()=>{r&&R.push(ve)},[r]);let{submitting:n,passwordError:i,setPasswordError:o,onSubmit:l}=Pt({form:t}),f=(0,T.useRef)(null),[d]=Jo($o.passwordType),{open:h}=ua(),y=(0,T.useCallback)(async v=>{v?.key==="Enter"&&await l(()=>{f.current&&setTimeout(()=>{f.current?.focus()})})},[]);return(0,T.useEffect)(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[]),d===2?T.default.createElement(T.default.Fragment,null,T.default.createElement(tr,{onPass:async v=>{t.setFieldsValue({password:v}),await l()}}),T.default.createElement(N.Text,{className:(0,Dr.default)(oe.tipText,oe.passKeyTipText),strong:!0,align:N.ALIGN.center,size:N.SIZE.sm,type:N.TYPE.secondary,onClick:()=>{h()}},g("wallet_extension_biometrics_dialog_title_cant_unlock"))):T.default.createElement(_e,{form:t,onChange:()=>{o(null)},onSubmit:async()=>{await l(()=>{f.current&&setTimeout(()=>{f.current?.focus()})})}},T.default.createElement(_e.Item,{useChildError:!0,name:"password",className:oe.password,extra:!!i&&T.default.createElement(N.Text,{size:N.SIZE.sm,className:oe.error},i)},T.default.createElement(ea,{elementName:"u",autoFocus:"autoFocus",inputClassName:oe.input,className:(0,Dr.default)({error:!!i}),size:zr.SIZE.xl,autoComplete:"off",errorType:zr.TIP_TYPE.always,disabled:n,placeholder:g("wallet_home_lock_wallet_placeholder_input_password"),onRef:v=>{f.current=v}})),T.default.createElement(_e.Item,{shouldUpdate:!0,className:oe.btn},({getFieldValue:v})=>{let P=!v("password")||!!i;return T.default.createElement(Qo,{usePortal:!0,placeholder:!0,offsetBottom:0,className:oe.footer,style:{zIndex:1e4}},T.default.createElement("div",{className:e},T.default.createElement(A,{block:!0,htmlType:"submit",disabled:P,category:A.CATEGORY.fill,type:A.TYPE.highlight,size:A.SIZE.xl,loading:n,loadingText:g("wallet_home_btn_unlock"),onClick:async()=>{await l(()=>{f.current&&setTimeout(()=>{f.current?.focus()})})}},g("wallet_home_btn_unlock")),T.default.createElement(ta,{to:Go,className:(0,Dr.default)(oe.tipText,oe.passwordTipText)},T.default.createElement(N.Text,{strong:!0,size:N.SIZE.sm,type:N.TYPE.secondary},g("wallet_footer_subtitle_forgot_password")))))}))};a();s();var vi={dialog:"_dialog_18vnm_1",mask:"_mask_18vnm_6"};function Ih(e){return e.metamask.passwordModal}var bi=e=>{let[t,r]=(0,G.useState)(!1),n=M(Ih),i=M(Ut),o=_e.useForm(),l=(0,Yu.useLocation)(),{onSubmit:f}=Pt({form:o}),d=(0,G.useCallback)(async()=>{await It().rejectPassword(),r(!1)},[]),{currentPasswordType:h,onVerifyPasskeyFailed:y,onResetPasswordType:v}=Xo(d);(0,G.useEffect)(()=>{r(!!n&&i),n&&v()},[v,n,i]),(0,G.useEffect)(()=>()=>{t&&d()},[l]);let{keyboardHeight:W}=Iu(),P=h===2&&n?.modalType===Fr.default,x=!!n&&t&&!P;return G.default.createElement(G.default.Fragment,null,G.default.createElement(me,{...e}),!!n&&t&&P&&G.default.createElement(tr,{onPass:async K=>{o.setFieldsValue({password:K}),await f()},onCancel:y,noContent:!0}),G.default.createElement(Nt,{onClose:d,visible:x,title:n?.modalType===Fr.default?g("wallet_extension_tg_enter_password"):"",noMargin:!0,alignBottom:!0,maskClosable:!0,noTopRadius:!1,windowStyle:{padding:"0",overflow:"hidden",bottom:`${W}px`,height:`${600-W}px`,touchAction:"none"},zIndex:40001,className:vi.dialog,scrollBoxClassName:vi.mask,transitionProps:{type:"slide",placement:"bottom",timeout:300}},x&&G.default.createElement(Tt,{passwordModal:n,passwordType:h,onVerifyPasskeyFailed:y})))};a();s();var Ei=p(b());a();s();var Rt=p(b());function Si(e){let[t,r]=(0,Rt.useState)(!1);return t?Rt.default.createElement(me,{...e}):Rt.default.createElement(fa,{path:e.path,guard:!0,callback:()=>{r(!0)}})}a();s();var $u=p(b());var Ju=e=>$u.default.createElement(me,{...e});function ae(e){let{guard:t}=e;return t?Ei.default.createElement(Si,{...e}):Ei.default.createElement(Ju,{...e})}a();s();var Lr=p(b());a();s();function Zu(){return!M(Ut)}function Ci(e){let t=Zu();return(0,Lr.useEffect)(()=>{t&&R.replace(Vo)},[t]),t?null:Lr.default.createElement(me,{...e})}a();s();a();s();var ge=p(b());a();s();a();s();var Ti=p(b());a();s();var Pi=p(b());a();s();var xi={"onboard-cover":"_onboard-cover_13wn7_1",onboardCover:"_onboard-cover_13wn7_1",video:"_video_13wn7_5"};var Oh=()=>{let e=Je({light:"/cdn/assets/imgs/2412/9FB355F4AEDE1AA0.png",dark:"/cdn/assets/imgs/2412/87CDA1790E4C4D22.png"}),t=Je({light:"static/images/onboard/cover-light.mp4",dark:"static/images/onboard/cover-dark-v3.mp4"});return Pi.default.createElement(re.Box,{className:xi["onboard-cover"]},Pi.default.createElement("video",{muted:!0,autoPlay:!0,playsInline:!0,src:t,poster:e,className:xi.video}))},Xu=Oh;a();s();var Qu={pictureCoverWrapper:"_pictureCoverWrapper_48plf_1",passKeyCover:"_passKeyCover_48plf_6",cover:"_cover_48plf_9",coverWrapper:"_coverWrapper_48plf_13"};var ef=()=>Ti.default.createElement(re.FlexBox,{align:re.ALIGN.center,className:Qu.coverWrapper},Ti.default.createElement(Xu,null));var tf=ef;a();s();var Pe={main:"_main_ql8q7_1",coverWrapper:"_coverWrapper_ql8q7_5",passKeyCover:"_passKeyCover_ql8q7_10",cover:"_cover_ql8q7_5",titleWrapper:"_titleWrapper_ql8q7_17",title:"_title_ql8q7_17",subTitle:"_subTitle_ql8q7_26",content:"_content_ql8q7_30",password:"_password_ql8q7_33",error:"_error_ql8q7_37",forgotPassword:"_forgotPassword_ql8q7_40",input:"_input_ql8q7_51",btn:"_btn_ql8q7_57",footer:"_footer_ql8q7_60",footerContent:"_footerContent_ql8q7_74"};var Ah=()=>ge.default.createElement(re.Container,{className:Pe.main},ge.default.createElement(tf,null),ge.default.createElement(re.Space,{space:4,className:Pe.titleWrapper,direction:re.DIRECTION.vertical},ge.default.createElement(N.Text,{strong:700,align:N.ALIGN.center,className:Pe.title},g("extension_home_main_title_portal")),ge.default.createElement(N.Text,{size:N.SIZE.xs,align:N.ALIGN.center,type:N.TYPE.secondary,className:Pe.subTitle},g("extension_home_subtitle_wallet_trade_nft_defi"))),ge.default.createElement(re.Box,{className:Pe.content},ge.default.createElement(Tt,{footerClassName:Pe.footerContent}))),Ri=Ah;a();s();var Ge=p(b()),rf=p(we());function z(e,t,r){return(0,Ge.lazy)(()=>{let n=`${t}-module-start`,i=`${t}-module-end`,o=`${t}-paint-complete`;return performance.mark(n),e().then(l=>{performance.mark(i);let f=l.default;function d(h){return(0,Ge.useEffect)(()=>{performance.getEntriesByName(n,"mark").length!==0&&requestAnimationFrame(()=>{performance.mark(o);try{let v=performance.measure(`${t}-module-load`,n,i),W=performance.measure(`${t}-render-to-paint`,i,o),P=performance.measure(`${t}-total`,n,o),x={componentName:t,moduleLoadTime:v.duration,renderTime:W.duration,totalTime:P.duration};(x.moduleLoadTime>100||x.renderTime>500)&&(rf.default.warn(`[Performance] ${t}:`,`
  Module Load: ${x.moduleLoadTime.toFixed(1)}ms`,`
  Render to Paint: ${x.renderTime.toFixed(1)}ms`,`
  Total: ${x.totalTime.toFixed(1)}ms`),$r.report({type:"lazyLoad",message:t,extra:{c1:x.moduleLoadTime.toFixed(1),c2:x.renderTime.toFixed(1),c3:x.totalTime.toFixed(1)}})),typeof r=="function"&&r(x),performance.clearMarks(n),performance.clearMarks(i),performance.clearMarks(o),performance.clearMeasures(`${t}-module-load`),performance.clearMeasures(`${t}-render-to-paint`),performance.clearMeasures(`${t}-total`)}catch(v){$r.captureException(v,{extra:{PERFORMANCE_ERROR_LAZY_LOAD:!0,componentName:t}})}})},[]),Ge.default.createElement(f,{...h})}return d.displayName=`PerformanceTracked(${f.displayName||f.name||t})`,{...l,default:d}})})}var nf=z(()=>import("../../Edit-LMV35FCW.js"),"BatchImportPrivateKeyEdit"),of=z(()=>import("../../Confirm-KMC4NE57.js"),"BatchImportPrivateKeyConfirm"),af=z(()=>import("../../MoonCatDay-WFAU6DVA.js"),"MoonCatDay"),sf=z(()=>import("../../MoonCatNight-WJZV2DXO.js"),"MoonCatNight"),lf=z(()=>import("../../CreatePassword-4OHQ4XQC.js"),"CreatePassword"),uf=z(()=>import("../../PasswordType-BRXGU7ZR.js"),"PasswordType"),ff=z(()=>import("../../ResetPassword-TRJRIKGI.js"),"OkResetPassword"),cf=z(()=>import("../../VerifyPassword-RI3QA5IT.js"),"VerifyPassword"),df=z(()=>import("../../WalletAccountPrivateKey-LF6IKTP2.js"),"WalletAccountPrivateKey"),pf=z(()=>import("../../WalletMnemonicAndPrivateKey-HZGNBO5G.js"),"WalletMnemonicAndPrivateKey"),hf=z(()=>import("../../WalletMnemonicBackup-UL6HM3B4.js"),"WalletMnemonicBackup"),ki=z(()=>import("../../ImportSeedPhraseAndPrivateKey-7L2TGHIN.js"),"ImportSeedPhraseAndPrivateKey");var mf=()=>{let t=(0,ye.useHistory)().location?.state?.noGuard||{};return D.default.createElement(D.Suspense,null,D.default.createElement(ye.Switch,null,D.default.createElement(ae,{path:Yt,component:ki,exact:!0}),D.default.createElement(bi,{path:Zt,component:nf,exact:!0}),D.default.createElement(bi,{path:Xt,component:of,exact:!0}),D.default.createElement(ae,{path:$e,guard:!t[$e],component:hf,openMoonCat:!0,exact:!0}),D.default.createElement(ae,{path:Jt,guard:!0,component:pf,exact:!0,openMoonCat:!0}),D.default.createElement(ye.Route,{path:Qt,component:uf,exact:!0}),D.default.createElement(ye.Route,{path:Kt,component:lf,exact:!0}),D.default.createElement(ae,{path:Ht,component:cf}),D.default.createElement(ye.Route,{path:Gt,component:ki,exact:!0}),D.default.createElement(ae,{path:$t,guard:!0,component:df,openMoonCat:!0}),D.default.createElement(Ci,{path:Ft,exact:!0,component:Ri}),D.default.createElement(ae,{path:Oe,component:ff}),D.default.createElement(ae,{path:zt,component:sf}),D.default.createElement(ae,{path:Vt,component:af})))};var gf=mf;a();s();var Nr=p(b()),yf=p(Dt());a();s();var Dh=({overwriteClassName:e=!1,size:t=Vr.SIZE.lg,className:r=""})=>Nr.default.createElement("div",{className:(0,yf.default)({"ok-page__loader":!e},r)},Nr.default.createElement(Vr,{size:t})),wf=Nr.default.memo(Dh);var _f=({isLoading:e})=>{let[t,r]=(0,$.useState)(()=>$.default.createElement($.default.Fragment,null));return(0,$.useEffect)(()=>{r($.default.createElement(gf,null))},[]),$.default.createElement($.default.Fragment,null,$.default.createElement("div",{className:"main-container-wrapper"},e&&$.default.createElement(wf,null),t))};var bf=({isLoading:e})=>vf.default.createElement(_f,{isLoading:e});Yr.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:Yr.DIRECTION.top,isInline:!0});var Cf=()=>{let e=(0,Sf.useHistory)(),t=M(l=>l.appState.isLoading),{os:r,browser:n}=M(l=>l.metamask.browserEnvironment)||{},i=M(Bo),o=M(Ot);return(0,Te.useEffect)(()=>{R.setHistory(e),R.setInitialLocation()},[e]),er(()=>{Yo(),Mu(i),ku(o)}),Te.default.createElement(Te.default.Fragment,null,Te.default.createElement("div",{className:(0,Ef.default)("app-content",{[`os-${r}`]:r,[`browser-${n}`]:n})},Te.default.createElement(bf,{isLoading:t})))};var Mi=class extends J.PureComponent{constructor(){super(...arguments);Ur(this,"state",{});Ur(this,"isNetworkError",()=>{let{error:r}=this.state;return r instanceof TypeError&&r.message?.toLocaleLowerCase().match(/failed to fetch/)})}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){Pu.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;if(r){let i=this.isNetworkError();return J.default.createElement(Hr,{store:n},J.default.createElement(yi,null,i?J.default.createElement(xu,null):J.default.createElement(ci,{error:r})))}return J.default.createElement(Hr,{store:n},J.default.createElement(gu,null),J.default.createElement(xf.HashRouter,null,J.default.createElement(yi,null,J.default.createElement(Cf,null))))}},Pf=Mi;a();s();var kf=p(we());a();s();var Lh=[zt,Vt,Ft,Qt,Kt,Jt,Ht,$e,Oe,$t,Gt,Yt,Zt,Xt],Tf=Lh;a();s();var Wr="SES_IFRAME_SYNC_STORE";a();s();var F=p(we());function Nh(e){!e||typeof e!="object"||Object.keys(e).forEach(t=>{try{let r=e[t];localStorage.setItem(t,typeof r=="string"?r:JSON.stringify(r))}catch(r){F.default.warn(`[Storage] Failed to set localStorage item ${t}:`,r)}})}function Wh(e){!e||typeof e!="object"||Object.keys(e).forEach(t=>{try{let r=e[t];sessionStorage.setItem(t,typeof r=="string"?r:JSON.stringify(r))}catch(r){F.default.warn(`[Storage] Failed to set sessionStorage item ${t}:`,r)}})}async function qh(e){if(!(!e||typeof e!="object"))try{chrome.storage.local&&chrome.storage.local.setDataDirectly?chrome.storage.local.setDataDirectly(e):await chrome.storage.local.set(e)}catch(t){F.default.warn("[Storage] Failed to set chrome storage data:",t)}}function Uh(e){if(!(!e||typeof e!="string"))try{document.cookie_setCookieDirectly?document.cookie_setCookieDirectly(e):document.cookie=e}catch(t){F.default.warn("[Storage] Failed to set cookies:",t)}}async function Ii(e){Nh(e.localStorage),Wh(e.sessionStorage),await qh(e.chromeStorage),Uh(e.cookies)}async function Rf(e){try{F.default.info("[SES Init] Starting initialization...");let t=q();if(!t)throw new Error("UI connection not available");F.default.info("[SES Init] UI connection established, fetching initial data...");let r=await t.getInitialSyncData();return R.setInitLocationWhenSESNotRender(r.location),r.environmentInfo&&(F.default.info("[SES Init] Setting environment information..."),oa(r.environmentInfo),F.default.info("[SES Init] Environment information set successfully")),(r.localStorage||r.sessionStorage||r.chromeStorage||r.cookies)&&(F.default.info("[SES Init] Setting storage proxy data..."),await Ii({localStorage:r.localStorage,sessionStorage:r.sessionStorage,chromeStorage:r.chromeStorage,cookies:r.cookies}),F.default.info("[SES Init] Storage proxy data set successfully")),r.storeState&&(F.default.info("[SES Init] Syncing Redux store state..."),e.dispatch({type:Wr,payload:r.storeState}),F.default.info("[SES Init] Redux store state synced successfully")),F.default.info("[SES Init] Initialization completed successfully"),r}catch(t){throw F.default.error("[SES Init] Failed to initialize SES iframe:",t),t}}function Oi(e){return{routeUpdated:async({location:r,store:n,localStorage:i})=>{if(!!R.history)try{R.history.replace(r);let o=r.pathname;if(!Tf.some(f=>o===f||o.indexOf(f)>-1))return;await Ii({localStorage:i}),e.dispatch({type:Wr,payload:n}),Ao(i.theme)}catch(o){kf.default.error("routeUpdated error",o)}}}}a();s();var Mf=p(we());a();s();var Ai=class{constructor(){this.lastOkPopupId=0}getUiConnection(){let t=q();if(!t)throw new Error("[Platform Proxy] UI connection not available");return t}async reload(){return this.getUiConnection().platformReload()}async openTab(t){return this.getUiConnection().platformOpenTab(t)}async openWindow(t){return this.getUiConnection().platformOpenWindow(t)}async closeWindow(t){return this.getUiConnection().platformCloseWindow(t)}async focusLastOkPopup(){return this.getUiConnection().platformFocusLastOkPopup()}async focusCurrentWindow(){return this.getUiConnection().platformFocusCurrentWindow()}async focusWindow(t){return this.getUiConnection().platformFocusWindow(t)}async updateWindowPosition(t,r,n){return this.getUiConnection().platformUpdateWindowPosition(t,r,n)}async getLastFocusedWindow(t){return this.getUiConnection().platformGetLastFocusedWindow(t)}async closeCurrentWindow(){return this.getUiConnection().platformCloseCurrentWindow()}async getVersion(){return this.getUiConnection().platformGetVersion()}async openExtensionInBrowser(t=null,r=null){return this.getUiConnection().platformOpenExtensionInBrowser(t,r)}async openExtensionInPopup(t=null,r=null,n=!0){return this.getUiConnection().platformOpenExtensionInPopup(t,r,n)}async getPlatformInfo(){return this.getUiConnection().platformGetPlatformInfo()}async getAllWindows(){return this.getUiConnection().platformGetAllWindows()}async getActiveTabs(){return this.getUiConnection().platformGetActiveTabs()}async currentTab(){return this.getUiConnection().platformCurrentTab()}async closeTab(t){return this.getUiConnection().platformCloseTab(t)}async getCpuInfoName(){return this.getUiConnection().platformGetCpuInfoName()}async setPanelBehavior(t){return this.getUiConnection().platformSetPanelBehavior(t)}async setSidepanelPath(t){return this.getUiConnection().platformSetSidepanelPath(t)}async openSidepanelWithWindowId(t){return this.getUiConnection().platformOpenSidepanelWithWindowId(t)}async openSidepanel(t){return this.getUiConnection().platformOpenSidepanel(t)}async createOffscreen(){return this.getUiConnection().platformCreateOffscreen()}},jh=new Ai,Di=jh;function If(){try{typeof globalThis<"u"?globalThis.platform=Di:typeof window<"u"&&(window.platform=Di)}catch(e){throw Mf.default.error("[SES Environment] Failed to initialize environment:",e),e}}a();s();a();s();var Of=(e=!1)=>{e?(window.sessionStorage.setItem("showKey","777"),window.sessionStorage.setItem("showKeyMode","2")):(window.sessionStorage.setItem("showKey",null),window.sessionStorage.setItem("showKeyMode",null))};function Af(){if(Wt.config({top:16}),Ui.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]}),Ye.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[Ye.componentNames.Select]:{bottomSafeSpace:0}}),u.env.ASSETS_BUILD_TYPE===ke.DEV||u.env.ASSETS_BUILD_TYPE===ke.DAILY){let e=window.localStorage.getItem("languageKeyMode");Of(e==="keyMode")}}a();s();a();s();function Bh(){try{document.body.classList.add(Io.WEB3,Oo.CLASSIC)}catch{}}var Df=Bh;Wf.default.setLevel(u.env.ASSETS_BUILD_TYPE==="dev"||u.env.ASSETS_BUILD_TYPE==="daily"?"debug":"warn");var Lf=!1;function Fh(){Lf||(Af(),Lf=!0)}function Kh(e){return Ji(du,e,Xi(Qi))}var Li=Kh(void 0),Hh=Oi(Li);async function Uf(e){Df(),Fh(),If(),su(e,Hh),await Rf(Li),qf.default.createRoot(document.getElementById("app")).render(Nf.default.createElement(Pf,{store:Li}))}async function Gh(){let{parentToIframeStream:e}=await au();Uf(e)}Gh();
//# sourceMappingURL=ui.js.map
