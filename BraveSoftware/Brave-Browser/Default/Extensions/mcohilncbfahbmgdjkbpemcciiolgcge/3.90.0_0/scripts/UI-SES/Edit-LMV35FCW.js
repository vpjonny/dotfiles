import{a as Be,b as Ae}from"./chunk-24KOH37W.js";import{a as Le,b as H}from"./chunk-QVUB5VBO.js";import{a as ne,b as Ce}from"./chunk-44W7375N.js";import{a as Pe}from"./chunk-VPMJYCJE.js";import{a as F}from"./chunk-C5GGDHU5.js";import"./chunk-JNONLPQN.js";import{e as Ke}from"./chunk-QOQJC2ZD.js";import{a as X,b as R,c as ee,e as Se}from"./chunk-GZUN7S34.js";import"./chunk-NIQLLW5J.js";import"./chunk-JXSHNBQI.js";import"./chunk-DOYXPNLR.js";import"./chunk-KANP3CMI.js";import"./chunk-VUC4EO27.js";import"./chunk-XUNQN7AR.js";import"./chunk-NM4WOM75.js";import{h as Ne}from"./chunk-4NDHBQXR.js";import"./chunk-E2GB7AO4.js";import"./chunk-U5ZZGKGM.js";import"./chunk-YTEKE6MB.js";import"./chunk-WX3NG5HB.js";import"./chunk-HRKKQNEB.js";import"./chunk-GZTCY5NF.js";import"./chunk-FOIG34R3.js";import{f as ve}from"./chunk-HJASUAAI.js";import{n as T,p as z,r as Ee}from"./chunk-P6LOADSA.js";import{C as le,Db as ge,E as me,H as ue,L as ce,Lc as he,Oc as J,Tb as S,Xc as we,bc as re,gc as xe,h as c,nd as ke,od as Ie,pd as Y,qd as Te,rb as pe,sb as _e,tc as u,vb as fe,wc as be,xb as de,y as ae,yb as ye}from"./chunk-CS663DOD.js";import"./chunk-WFJJHRZ4.js";import"./chunk-L3SRMZJF.js";import"./chunk-OSJ66QVC.js";import"./chunk-PHQSAPCN.js";import"./chunk-H7A2GXA7.js";import"./chunk-SRAKDH5C.js";import{t as q,z as Q}from"./chunk-K36OLSUR.js";import"./chunk-VYWNZTTM.js";import{N as oe,d as C}from"./chunk-4RYTWPZK.js";import{e as x,n as r,p as n}from"./chunk-N62DF26F.js";r();n();var O=x(C());r();n();var U=x(C());var ie=x(oe());r();n();var K={root:"_root_brwbd_1","no-clear-root":"_no-clear-root_brwbd_14",noClearRoot:"_no-clear-root_brwbd_14",clear:"_clear_brwbd_17","clear-icon":"_clear-icon_brwbd_24",clearIcon:"_clear-icon_brwbd_24"};var Oe=({onClear:e=()=>{},onSubmit:t=()=>{},disabled:o=!0,loading:l=!1,clearable:m=!1})=>U.default.createElement(u.Box,{className:(0,ie.default)(K.root,{[K["no-clear-root"]]:!m})},m&&U.default.createElement(u.Box,{className:K.clear,onClick:e},U.default.createElement(q,{className:(0,ie.default)("okx-wallet-plugin-eliminate",K.clearIcon)}),U.default.createElement(T.Text,{size:T.SIZE.sm,align:T.ALIGN.center,className:K.link},c("wallet_extension_import_seed_phrase_button_clear"))),U.default.createElement(Q,{className:K.button,category:Q.CATEGORY.fill,type:Q.TYPE.highlight,size:Q.SIZE.lg,onClick:t,disabled:o,loading:l,block:!0},c("wallet_set_password_btn_confirm")));r();n();var L=x(C()),He=x(oe());r();n();var h=x(C()),G=x(oe());r();n();var b={root:"_root_vnq35_1","show-root":"_show-root_vnq35_9",showRoot:"_show-root_vnq35_9",toolbar:"_toolbar_vnq35_12",index:"_index_vnq35_15",input:"_input_vnq35_25","input-error":"_input-error_vnq35_40",inputError:"_input-error_vnq35_40",hide:"_hide_vnq35_43","hide-with-text":"_hide-with-text_vnq35_46",hideWithText:"_hide-with-text_vnq35_46",icon:"_icon_vnq35_59","split-icon":"_split-icon_vnq35_71",splitIcon:"_split-icon_vnq35_71"};var Re=()=>Boolean(globalThis.sessionStorage.getItem("showBatchImportKeyWarn")),et=()=>{globalThis.sessionStorage.setItem("showBatchImportKeyWarn","true")},tt=()=>h.default.createElement("div",{className:b.splitIcon}),ot=(e,t)=>{let o=re.tip({visible:!1,infoType:re.Tip.INFO_TYPE.warn,title:c("wallet_extension_private_key_title_risk_warning"),children:c("wallet_extension_private_key_dialog_text_risk_warning"),confirmText:c("wallet_extension_private_key_dialog_btn_confirm"),cancelText:c("wallet_extension_private_key_dialog_btn_cancel"),onCancel:()=>{o.destroy()},onConfirm:()=>{t(e,!0),et(),o.destroy()}});return o},rt=(0,h.forwardRef)(({id:e,value:t,show:o,error:l,toolbar:m,mapIndex:w,inputs:v,handleInputChange:k,handleKeyDown:g,handlePaste:I,removeInput:A,toggleInputVisible:B},M)=>h.default.createElement(u.Box,{className:(0,G.default)(b.root,{[b["show-root"]]:m})},h.default.createElement(u.Box,{className:b.index},w+1,"."),h.default.createElement(Ne,{elementName:"bp"},h.default.createElement("textarea",{autoComplete:"off",id:`pk-input-${e}`,"data-testid":Ee.TOOLKIT_ITEM.BATCH_IMPORT_PRIVATE_KEY_INPUT,className:(0,G.default)(b.input,{[b.hide]:!o,[b["hide-with-text"]]:t&&!o,[b["input-error"]]:l}),wrap:t&&!o?"off":"soft",spellCheck:!1,placeholder:w===0?c("wallet_extension_private_key_text_separate_private_keys"):"",ref:w===v.length-1?M:null,value:t,onKeyDown:N=>{g(N,e)},onChange:N=>{k(N,e)},onPaste:N=>{I(N,e)}})),h.default.createElement(u.Box,{className:b.toolbar},h.default.createElement(tt,null),h.default.createElement(q,{className:(0,G.default)(b.icon,"okx-wallet-plugin-clear"),onClick:()=>{A(e)}}),h.default.createElement(q,{className:(0,G.default)(b.icon,{"okx-wallet-plugin-eye-hide":!o,"okx-wallet-plugin-eye-show":o}),onClick:()=>{Re()?B(e,!o):ot(e,B).update({visible:!0})}})))),Me=rt;r();n();var V={root:"_root_cbgfm_1",editor:"_editor_cbgfm_9","editor-error":"_editor-error_cbgfm_30",editorError:"_editor-error_cbgfm_30","editor-error-text":"_editor-error-text_cbgfm_33",editorErrorText:"_editor-error-text_cbgfm_33",title:"_title_cbgfm_38"};var De="Enter",nt="Backspace",Fe=" ",Ue=()=>{let{value:e,setValue:t}=X(),{value:o,setValue:l}=ee(),m=(0,L.useRef)(null),{remainAccountAmount:w}=H(),v=i=>e.findIndex(s=>s.id===i),k=()=>{t([...e,{id:F(),show:!1,value:"",error:!1}])},g=i=>{i.some(a=>a.error)||l("")},I=i=>{if(e.length===1){let a=[{id:F(),show:!1,value:"",error:!1}];t(a),g(a);return}let s=e.filter(a=>a.id!==i);t(s),g(s)},A=(i,s)=>{let a=document.getElementById(`pk-input-${i}`);a&&(a.scrollTop=0),t(e.map(p=>p.id===i?{...p,show:s}:p))},B=(i,s)=>{let a=i.target.value.trim();if(/\n/.test(a))return;let p=e.map(_=>_.id===s?{..._,value:a,error:!1}:_);t(p),g(p)},M=()=>{setTimeout(()=>{let i=m.current;i&&(i.focus(),i.scrollTop=i.scrollHeight)})},N=(i,s)=>{let a=v(s),p=e.find(_=>!_.value);(i.key===De||i.key===Fe)&&e.length<w&&!p&&(i.preventDefault(),k(),M()),(i.key===De||i.key===Fe)&&p&&(i.preventDefault(),M()),i.key===nt&&!e[a]?.value&&(i.preventDefault(),I(s))},se=(i,s)=>{i.preventDefault();let a=v(s),E=i.clipboardData.getData("text/plain").trim().split(/[\s,\uff0c]/).filter(Boolean).map(Z=>({id:F(),show:!1,value:Z,error:!1})),D=[...e].slice(a+1).map(Z=>({...Z,id:F()})),j=[...e].slice(0,a).concat(E).concat(D).concat([{id:F(),show:!1,value:"",error:!1}]);t(j)};return(0,L.useEffect)(()=>{let i=m.current;if(i){i.focus();let s=i.value.length;s>0&&i.setSelectionRange(s,s)}},[e.length]),L.default.createElement(u.Box,{className:V.root},L.default.createElement(u.Box,{className:V.title},c("wallet_extension_private_key_text_enter_private_key")),L.default.createElement(u.Box,{className:(0,He.default)(V.editor,{[V["editor-error"]]:o})},e.map((i,s)=>{let{id:a,value:p,show:_,error:E}=i,D=!(s===0&&e.length===1&&!p);return L.default.createElement(Me,{key:a,ref:s===e.length-1?m:null,id:a,value:p,show:_,error:E,toolbar:D,mapIndex:s,inputs:e,handleInputChange:B,handleKeyDown:N,handlePaste:se,removeInput:I,toggleInputVisible:A})})),o&&L.default.createElement(u.Box,{className:V["editor-error-text"]},o))};r();n();var f=x(C());r();n();r();n();var qe=x(C());r();n();var Ve=e=>{if(!e||typeof e!="object")return!1;let t={};return Object.keys(e).forEach(o=>{let l=e[o];t[o]=Array.isArray(l)?l:[l]}),t},We=(e,t)=>{if(!Array.isArray(e))return[];if(!t||me(t)||typeof t!="object")return e;let o=Object.entries(t);return le(e,l=>{for(let m=0;m<o.length;m++){let w=o[m][0];if(!o[m][1]?.includes(l[w]))return!1}return!0})};var W=e=>{let t=S(be);return(0,qe.useMemo)(()=>{if(!e)return t;let o=Ve(e);return We(t,o)},[t,e])};r();n();var P={root:"_root_a3tnf_1",select:"_select_a3tnf_11",title:"_title_a3tnf_14",icon:"_icon_a3tnf_19",logo:"_logo_a3tnf_22",label:"_label_a3tnf_25"};function it(e){let[t,o]=ue(e,"isHotNetwork");return[t.concat(o),t,o]}function st(){let e=W();return(0,f.useMemo)(()=>ne.reduce((t,o)=>{let l=[];return e.forEach(m=>{m.baseChain===o&&l.length<3&&l.push(m.image||m.imageUrl)}),{...t,[o]:l}},{}),[e])}function at(){let e=W(),[t]=it(e);return ce(t,"baseChain").filter(l=>l.baseChain!==ge&&!Ce.includes(l.baseChain))}var lt={[pe]:{labelKey:"wallet_extension_select_network_title_evm_network"},[de]:{labelKey:"wallet_extension_aptos_tab_title_compatible_network"},[fe]:{labelKey:"wallet_extension_solana_import_tab_title_network"},[_e]:{labelKey:"wallet_extension_btc_import_tab_title_network"},[ye]:{labelKey:"wallet_extension_select_network_title_cosmos"}};function mt({chainName:e,logos:t,labelKey:o}){return f.default.createElement(f.default.Fragment,null,t?.map((l,m)=>f.default.createElement(z,{className:P.logo,key:`${e}-${l}`,style:{zIndex:10**(t.length-m)},text:e,src:l,size:z.SIZE.sm})),f.default.createElement(T.Text,{className:P.label,size:"sm"},c(o)))}function ut({image:e,chainName:t}){return f.default.createElement(f.default.Fragment,null,f.default.createElement(z,{className:P.icon,src:e,text:t,size:z.SIZE.sm}),f.default.createElement(T.Text,{size:"sm"},t))}function ct(){let{value:e,setValue:t}=R(),o=at(),l=st(),m=(0,f.useMemo)(()=>o.map(k=>{let{baseChain:g,chainName:I,image:A,imageUrl:B}=k;return{value:g,searchKeyword:I,label:f.default.createElement(u.FlexBox,{key:g,align:u.ALIGN.center,style:{height:"20px",width:"100%"}},f.default.createElement(u.FlexBox,{align:u.ALIGN.center,style:{flex:1}},ne.includes(g)?f.default.createElement(mt,{chainName:I,logos:l[g],labelKey:lt[g]?.labelKey}):f.default.createElement(ut,{image:A||B,chainName:I})))}}),[o,l]),w=Te(({value:v})=>{t(v)});return{value:e,onChange:w,options:m}}var Qe=()=>{let{value:e,onChange:t,options:o}=ct();return f.default.createElement(u.Box,{className:P.root},f.default.createElement(u.Box,{className:P.title},c("wallet_extension_private_key_placeholder_import_num_keys")),f.default.createElement(xe,{block:!0,placeholder:c("wallet_extension_private_key_placeholder_import_num_keys"),onChange:t,value:e,options:o,className:P.select,searchFocus:!1,searchPlaceholder:c("wallet_extension_private_key_placeholder_import_num_keys"),scrollStyle:{height:258}}))};r();n();var $=x(C());r();n();var te={root:"_root_1hvf5_1",title:"_title_1hvf5_12",subTitle:"_subTitle_1hvf5_24"};var ze=()=>{let{remainAccountAmount:e}=H(),t=c("wallet_extension_private_key_maintitle_bulk_import"),o=c("wallet_extension_private_key_input_dropdown_select_network",{num:$.default.createElement(T.Text,{size:T.SIZE.md,align:T.ALIGN.center},e)});return $.default.createElement(u.Box,{className:te.root},$.default.createElement(u.Box,{className:te.title},t),$.default.createElement(u.Box,{className:te.subTitle},o))};r();n();var Ye={root:"_root_80chm_1"};r();n();var Ze=x(C());r();n();r();n();var Ge=x(C());var $e=()=>{let e=S(he),t=S(J);(0,Ge.useEffect)(()=>{t&&!e&&Y.push(we)},[e,t])};var je=()=>{$e()};var Je=()=>{let{value:e,setValue:t}=X(),{value:o}=R(),{value:l,setValue:m}=ee();je();let w=S(J),v=W(),{remainAccountAmount:k}=H(),[g,I]=(0,Ze.useState)(!1),A=k<=0||e.length<=1&&!e[0]?.value||!o,B=e.length>=1&&Boolean(e[0].value),M=s=>!(s.length>k),N=async s=>{let a=!0,p=s.length,_=ae(s);for(let E=0;E<p;E++){let D=s[E].value;try{let j=await Ae(D,v),Xe=(await Be(D,v)).includes(o);!j||!Xe?(a=!1,_[E].error=!0):_[E].error=!1}catch{a=!1,_[E].error=!0}}return t(_),a};return{loading:g,disabled:A,clearable:B,errorText:l,onSubmit:async()=>{let s=!0,a="";I(!0),m("");let p=e.filter(_=>_.value).map(_=>({..._,error:!1}));t(p),await Se(1e3);try{M(p)?await N(p)||(s=!1,a=c("wallet_extension_private_key_text_key_incorrect")):(s=!1,a=c("wallet_extension_private_key_text_remove_keys",{num1:p.length-k})),s&&(w?Y.push(ke):Y.push(`${Ie}?from=${Ke.BULK}`))}catch(_){ve(_.message),a=c("wallet_home_toast_network_error",{total:k,delete:p.length-k})}finally{I(!1),m(a),await Pe.copyText()}},onClear:()=>{t([{id:Date.now(),show:!1,value:"",error:!1}]),m("")}}};var Gr=()=>{let{disabled:e,loading:t,clearable:o,onSubmit:l,onClear:m}=Je();return O.default.createElement(Le,null,O.default.createElement(u.Box,{className:Ye.root},O.default.createElement(ze,null),O.default.createElement(Qe,null),O.default.createElement(Ue,null),O.default.createElement(Oe,{loading:t,disabled:e,clearable:o,onSubmit:l,onClear:m})))};export{Gr as default};
//# sourceMappingURL=Edit-LMV35FCW.js.map
