import{b as v}from"./chunk-HRKKQNEB.js";import{a as E,g as l}from"./chunk-FOIG34R3.js";import{a as C,b as _,c as S,d as A,e as u,f as c,g as b,h as M,i as D}from"./chunk-HJASUAAI.js";import{N as o,Q as a,X as P,da as x,ob as f}from"./chunk-CS663DOD.js";import{e as F,n as i,p as s}from"./chunk-N62DF26F.js";i();s();var g=F(E());function y(t,...e){return r=>t(...e).then(async n=>(await a().forceUpdateMetamaskState(),n)).catch(async n=>(await a().forceUpdateMetamaskState(),r(c(n.message)),Promise.reject(n)))}function R(t=!0){return{type:P,value:t}}function Y(t){return e=>(e(C()),o().submitPassword({__secretData__:{password:t}}).then(async()=>{e(S()),await a().forceUpdateMetamaskState()}).catch(r=>(e(_(r.message)),Promise.reject(r))))}function d(){return t=>o().unMarkPasswordForgotten().then(()=>{t(R(!1))}).then(()=>{a().forceUpdateMetamaskState()})}function O(){return{type:x}}function z(t){return async e=>(g.default.debug("background.createWalletAndRestore"),o().createWalletAndRestore(t).then(()=>e(d())).then(()=>{e(O())}).catch(r=>(e(c(r.message)),Promise.reject(r))))}function J(...t){return()=>o().importWalletWithMnemonic(...t).then(async e=>(l(),await a().forceUpdateMetamaskState(),e)).catch(e=>Promise.reject(e))}function V(t){return l(),y(o().importWalletWithPrivateKey,{__secretData__:t})}function X(t){return e=>(g.default.debug("background.importWalletWithMnemonicAndRestore"),o().importWalletWithMnemonicAndRestore({__secretData__:t}).then(r=>(l(),e(d()).then(()=>r))).then(r=>(e(O()),r)).catch(r=>(e(c(r.message)),Promise.reject(r))))}function Z(t,{noticeBackend:e=!1}={}){return r=>(g.default.debug("background.importWalletWithPrivateKeyAndRestore"),o().importWalletWithPrivateKeyAndRestore({__secretData__:t},{noticeBackend:e}).then(n=>(l(),r(d()).then(()=>n))).then(n=>(r(u()),n)).catch(n=>(r(u()),Promise.reject(n))))}function $(t,{cipherText:e,privateKey:r},n,B){return p=>(!B&&p(A()),g.default.debug("background.importWalletWithMpcAndRestore"),o().importWalletWithMpcAndRestore(t,{cipherText:e,privateKey:r},n).then(m=>(l(),p(d()).then(()=>m))).then(m=>(p(u()),m)).catch(m=>(p(u()),Promise.reject(m))))}function tt(t){return o().verifyPassword({__secretData__:{password:t}}).then(()=>!0)}function et(){return async t=>{try{await o().markPasswordForgotten()}finally{t(u()),t(R()),await a().forceUpdateMetamaskState()}}}function rt(...t){return y(o().removeAccountByAccountId,...t)}function nt(...t){return y(o().removeWalletsByGroupId,...t)}i();s();i();s();var T={coinTickers:"coinTickers",catTokensConfig:"catTokensConfig",catSpendsConfig:"catSpendsConfig",keyringController:"KeyringController",moonCatData:"backHistory",chainController:"ChainController",reportedCoins:"reportedCoins",silentSignUnderstood:"silentSignUnderstood"};i();s();var W="ok_okex_wallet",U=[],k=!1;function K(t){typeof queueMicrotask=="function"?queueMicrotask(t):setTimeout(t,0)}async function I(){let t=U.shift();if(!t){k=!1;return}try{await t()}catch{}K(I)}function G(){k||(k=!0,K(I))}function L(t){return new Promise((e,r)=>{U.push(async()=>{try{await t(),e()}catch(n){throw r(n instanceof Error?n:new Error(String(n))),n}}),G()})}async function j(t){await L(async()=>{let{[W]:e}=await f.get(W),r=e||{};delete r[t],await f.set({[W]:r}),new BroadcastChannel("okx-chrome-storage").postMessage({key:t})})}function Wt(){return async t=>{try{await o().completeOnboarding(),t(b()),t(M()),await a().ActionCompleteOnboarding()}catch(e){throw t(c(e.message)),e}}}function kt(){return async t=>{try{await o().resetOnboarding(),await o().clearDappData(),await j(T.moonCatData),t(D()),t(v(!1))}catch(e){throw t(c(e.message)),e}}}export{Y as a,z as b,J as c,V as d,X as e,Z as f,$ as g,tt as h,et as i,rt as j,nt as k,Wt as l,kt as m};
//# sourceMappingURL=chunk-E2GB7AO4.js.map
