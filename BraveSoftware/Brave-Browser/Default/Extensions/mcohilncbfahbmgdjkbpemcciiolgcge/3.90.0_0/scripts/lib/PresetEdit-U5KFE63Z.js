import{b as be,d as Ee,e as Ce}from"./chunk-NXQG6M3E.js";import{a as Te}from"./chunk-WT4TK2GC.js";import{a as Me}from"./chunk-5MT5Y5AC.js";import{a as xe}from"./chunk-WP5MSDLO.js";import"./chunk-AKD4IV4A.js";import{a as Se}from"./chunk-NMNQL2R3.js";import{b as K}from"./chunk-PB55N5D7.js";import"./chunk-QHC2DYOH.js";import{d as ge,e as ve,f as he}from"./chunk-PZXJSKV7.js";import{a as ye}from"./chunk-GVFJTHCK.js";import"./chunk-J63JN6ZK.js";import"./chunk-6KT3MJYR.js";import{f as d,g as Y}from"./chunk-LQG7SAW5.js";import{b as j,f as G,q as fe,s as de}from"./chunk-TQ2XASI3.js";import"./chunk-XXAIJB4T.js";import{a as Lt}from"./chunk-VPT3GAIN.js";import"./chunk-VJ2JNI4M.js";import{a as _e}from"./chunk-MCCEOABZ.js";import{b as ce}from"./chunk-UJWKDH2G.js";import{n as k}from"./chunk-AHLFMVMC.js";import{a as Z}from"./chunk-3DAKLS7D.js";import{a as D}from"./chunk-IFGNGASP.js";import{He as S,cc as ue,dc as pe,n as le}from"./chunk-NPJCEXXH.js";import"./chunk-PWGSI7LM.js";import"./chunk-RVS5KJOS.js";import{B as C}from"./chunk-5RLAMZDG.js";import"./chunk-VYWNZTTM.js";import"./chunk-MGS2LE6A.js";import"./chunk-CBNY2XQM.js";import"./chunk-FRGP5XJV.js";import{a as z}from"./chunk-Q2B4R57L.js";import{b as H}from"./chunk-PJC4UBLU.js";import"./chunk-HDMZQINQ.js";import{$ as me,A as I,j as B}from"./chunk-JYNY5RZ4.js";import"./chunk-OAMYZMR4.js";import{f as w,o as y,q as h}from"./chunk-LHDKEQAM.js";y();h();var a=w(H()),q=w(z());me();y();h();var E=w(H()),A=w(z());y();h();var b={root:"_root_1fcv2_1",title:"_title_1fcv2_12","input-container":"_input-container_1fcv2_19",inputContainer:"_input-container_1fcv2_19",input:"_input_1fcv2_19","input-tag":"_input-tag_1fcv2_25",inputTag:"_input-tag_1fcv2_25","custom-input":"_custom-input_1fcv2_28",customInput:"_custom-input_1fcv2_28","inner-input":"_inner-input_1fcv2_28",innerInput:"_inner-input_1fcv2_28","error-input":"_error-input_1fcv2_36",errorInput:"_error-input_1fcv2_36","err-text":"_err-text_1fcv2_39",errText:"_err-text_1fcv2_39"};var wt=({className:e,amountList:o,setAmountList:n,currentMode:t,currency:i,decimals:u,placeholderRef:m})=>{let p=(0,E.useMemo)(()=>t==="sell"?S("swaptrade_meme_input_label_sell_amount"):S("swaptrade_meme_input_label_pay_amount",{token:i}),[t,i]),[_,v]=(0,E.useMemo)(()=>t==="sell"?[!0,2]:[!1,u],[t,u]),r=(s,c)=>{if(_&&D.gt(s,100))return;let l=o.map((g,O)=>O===c?s:g);n(l)},M=(0,E.useMemo)(()=>o.some(s=>D.eq(s,0)),[o]),f=()=>{m.current?.scrollIntoView({behavior:"smooth",block:"center"})};return E.default.createElement("div",{className:(0,A.default)(e,b.root)},E.default.createElement("div",{className:(0,A.default)(b.title)},p),E.default.createElement("div",{className:(0,A.default)("flex items-center",b.inputContainer)},o.map((s,c)=>E.default.createElement(k.Number,{key:c,value:s,size:k.SIZE.sm,symbol:_?"%":null,useReactTransition:!0,autoComplete:"off",spellCheck:"false",precision:v,enableMinus:!1,min:0,className:b.input,inputClassName:b.inputTag,innerClassName:(0,A.default)(b.customInput,b.innerInput,{[b.errorInput]:D.eq(s,0)}),onChange:l=>{r(l,c)},onFocus:f}))),M&&E.default.createElement("div",{className:(0,A.default)(b.errText)},S("swaptrade_meme_input_error_no_zero")))},Le=wt;y();h();var N=w(H()),R=w(z());y();h();var U={root:"_root_1vg59_1",title:"_title_1vg59_12",tips:"_tips_1vg59_19",input:"_input_1vg59_26","custom-input":"_custom-input_1vg59_26",customInput:"_custom-input_1vg59_26"};var kt=({className:e,name:o,setName:n,disabled:t})=>{let i=v=>{let r=v.target.value;r.length>12&&(r=r.substring(0,12)),n(r)},[u,m]=(0,N.useState)(!1),p=(0,N.useMemo)(()=>String(o).length>=1&&u,[o,u]),{isSm:_}=ce();return N.default.createElement("div",{className:(0,R.default)(e,U.root)},N.default.createElement("div",{className:(0,R.default)(U.title)},S("swaptrade_meme_input_label_preset_name")),N.default.createElement(k,{value:o,size:_?k.SIZE.lg:k.SIZE.sm,error:()=>String(o).length<1?S("swaptrade_meme_input_error_preset_name_empty"):null,innerClassName:(0,R.default)(U.input,U.customInput),disabled:t,errorType:k.TIP_TYPE.always,onChange:i,onFocus:()=>{m(!0)},onBlur:()=>{m(!1)}}),p&&N.default.createElement("div",{className:U.tips},`${o.length}/12`))},we=kt;y();h();var x=w(H()),ke=w(Lt());me();function Ie({currentMode:e,computeBuyDefaultPresetList:o,computedSellDefaultPresetList:n}){return(0,x.useMemo)(()=>e==="buy"?o:n,[e,o,n])}function De({isEdit:e,currentMode:o,savePresetFn:n,onClose:t,setConfirmText:i,setConfirmVisible:u}){let m=(0,ke.useHistory)(),p=(0,x.useCallback)(()=>{n(),t?t():m.goBack()},[m,t,n]),_=(0,x.useCallback)(()=>{if(!e){let r=o==="buy",M=r?ue:pe,f=r?"swaptrade_meme_dialog_desc_buy_only":"swaptrade_meme_dialog_desc_sell_only";if(!Z.get(M)){i(S(f)),u(!0),Z.set(M,"1");return}}n(),t?t():m.goBack()},[e,o,t,n,i,u,m]);return[p,_]}function Pe({slippage:e,setSlippageMode:o,setSlippageUse:n,setSlippageError:t,setCustomMaxUse:i,setCustomMaxError:u,editPresetValue:m,setEditPreset:p,isEdit:_}){return(0,x.useCallback)(({mode:r,fixedData:M,dynamicData:f})=>{if(o(r),r===j.FIXED){let{value:s,level:c,error:l}=M;n(s),t(l),p({isEdit:_,value:{...m,slippage:{...e,mode:r,value:s?Y(s):"",type:c}}})}if(r===j.DYNAMIC){let{customMax:s,error:c}=f;i(s),u(c),p({isEdit:_,value:{...m,slippage:{...e,mode:r,customMax:s?Y(s):""}}})}},[m,_,u,i,t,o,n,e,p])}function Fe({setEditPreset:e,isEdit:o,editPresetValue:n,priorityFee:t,setPriorityFeeError:i,setLatestSelectFeeType:u}){return(0,x.useCallback)((p,_,v)=>{e({isEdit:o,value:{...n,priorityFee:{...t,value:_,type:p}}}),i(v),p!=="custom"&&u(p)},[n,o,t,e,u,i])}function Ae({setAmountListUsed:e,setEditPreset:o,isEdit:n,editPresetValue:t,currentMode:i}){return(0,x.useCallback)(m=>{e(m),o({isEdit:n,value:{...t,amountList:m.map(p=>i==="sell"?Y(p):p)}})},[e,o,n,t,i])}function Ue({defaultPresetList:e,id:o,slippage:n,priorityFee:t,amountList:i,slippageError:u,priorityFeeError:m,customMaxError:p,name:_,mevModeStatus:v}){let r=(0,x.useMemo)(()=>e.find(c=>c.id===o)||null,[e,o]),M=(0,x.useMemo)(()=>r?I(r.slippage.value,n.value)&&I(r.slippage.type,n.type)&&I(r.priorityFee.type,t.type)&&I(r.amountList,i)&&I(r.slippage.mode,n.mode)&&I(r.slippage.customMax,n.customMax):!0,[r,n,t,i]),f=(0,x.useMemo)(()=>u||m||p||_.length===0||i.some(c=>D.eq(c,0))||v===6,[u,m,p,_,i,v]),s=(0,x.useMemo)(()=>o?.includes(fe),[o]);return[r,M,f,s]}function Oe({newPreset:e,setSlippageUse:o,setSlippageMode:n,setCustomMaxUse:t,setPriorityFeeError:i,setSlippageError:u,setCustomMaxError:m,currentMode:p,setAmountListUsed:_,setEditPreset:v,isEdit:r,editPresetValue:M,slippage:f,priorityFee:s}){return(0,x.useCallback)(()=>{if(e){o(d(e.slippage.value)),n(e.slippage.mode),t(d(e.slippage.customMax)),i(!1),u(!1),m(!1);let l=e.amountList.map(g=>p==="sell"?d(g):g);_(l),v({isEdit:r,value:{...M,slippage:{...f,value:e.slippage.value,type:e.slippage.type,mode:e.slippage.mode,customMax:e.slippage.customMax},priorityFee:{...s,value:e.priorityFee.value,type:e.priorityFee.type},amountList:e.amountList}})}},[e,o,n,t,i,u,m,p,_,v,r,M,f,s])}y();h();var L={root:"_root_wwkuh_1",name:"_name_wwkuh_7",mev:"_mev_wwkuh_8",slippage:"_slippage_wwkuh_9",priority:"_priority_wwkuh_10",amount:"_amount_wwkuh_11",btns:"_btns_wwkuh_14","no-bg":"_no-bg_wwkuh_23",noBg:"_no-bg_wwkuh_23","placeholder-tg":"_placeholder-tg_wwkuh_26",placeholderTg:"_placeholder-tg_wwkuh_26"};var It=le(({onClose:e})=>{let{configStore:o,quoteStore:n}=K(),{currentMode:t,computedConfig:i}=o,{mevUnstableShowLevel:u,jitoIsSuccess:m}=n,p=B(i,"nativeTokenInfo.decimals",0),_=B(i,"mevPriceThreshold"),v=B(i,"nativeTokenInfo.chainName"),{chainSymbol:r}=Se(),{editPreset:M,setEditPreset:f}=be(),{value:s,isEdit:c}=M,{slippage:l,priorityFee:g,name:O,amountList:X,id:He,priorityMode:Be,manualType:Ye}={...de,...s},{savePresetFn:Re}=Ee(),[qe,V]=(0,a.useState)(!1),[ze,W]=(0,a.useState)(!1),[Ze,$]=(0,a.useState)(!1),[J,je]=(0,a.useState)(Be),[Q,Ge]=(0,a.useState)(Ye),Ke=ye({priorityMode:J,manualType:Q,jitoIsSuccess:m,mevUnstableShowLevel:u}),Xe={low:d(l.config.low),medium:d(l.config.medium),high:d(l.config.high)},ee=d(l.min),te=d(l.max),Ve=d(l.dynamicMax),We=d(l.dynamicMin),$e=d(l.recommendMax),Je=d(l.recommendMin),Qe=T=>Te({value:T,min:ee,max:te,level:l.type}),[et,oe]=(0,a.useState)(d(l?.value)),[tt,ne]=(0,a.useState)(l.mode),[ot,re]=(0,a.useState)(d(l.customMax)),[nt,rt]=(0,a.useState)(g.type!==G.CUSTOM?g.type:G.MARKET),{getTokenAmount:st,getUsd:it}=xe(K),{computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}=Me(),lt=Ie({currentMode:t,computeBuyDefaultPresetList:at,computedSellDefaultPresetList:mt}),[ut,pt]=(0,a.useState)(!1),[ct,_t]=(0,a.useState)(""),[ft,dt]=De({isEdit:c,currentMode:t,savePresetFn:Re,onClose:e,setConfirmText:_t,setConfirmVisible:pt}),gt=T=>{f({isEdit:c,value:{...s,name:T}})},vt=T=>{je(T),f({isEdit:c,value:{...s,priorityMode:T}})},yt=T=>{Ge(T),f({isEdit:c,value:{...s,manualType:T}})},ht=Pe({slippage:l,setSlippageMode:ne,setSlippageUse:oe,setSlippageError:V,setCustomMaxUse:re,setCustomMaxError:$,editPresetValue:s,setEditPreset:f,isEdit:c}),Mt=Fe({setEditPreset:f,editPresetValue:s,isEdit:c,setPriorityFeeError:W,setLatestSelectFeeType:rt,priorityFee:g}),[St,se]=(0,a.useState)(X.map(T=>t==="sell"?Number(d(T)):T)),xt=Ae({setAmountListUsed:se,setEditPreset:f,isEdit:c,editPresetValue:s,currentMode:t}),[Tt,bt,Et,ie]=Ue({defaultPresetList:lt,id:He,slippage:l,priorityFee:g,amountList:X,slippageError:qe,priorityFeeError:ze,customMaxError:Ze,name:O,mevModeStatus:Ke}),Ct=Oe({newPreset:Tt,setSlippageUse:oe,setSlippageMode:ne,setCustomMaxUse:re,setPriorityFeeError:W,setSlippageError:V,setCustomMaxError:$,currentMode:t,setAmountListUsed:se,setEditPreset:f,isEdit:c,editPresetValue:s,slippage:l,priorityFee:g}),ae=(0,a.useRef)(null),Nt=_e();return a.default.createElement("div",{className:(0,q.default)(L.root)},a.default.createElement(we,{className:L.name,name:O,setName:gt,disabled:ie}),a.default.createElement(he,{className:L.mev,priorityMode:J,setMode:vt,manualType:Q,setManualType:yt,mevUnstableShowLevel:u,jitoIsSuccess:m,mevPriceThreshold:_,chainName:v}),a.default.createElement(ve,{className:L.slippage,mode:tt,fixedData:{value:et,level:l.type,levelMap:Xe,min:ee,max:te,validator:Qe},dynamicData:{showDynamicSlippage:!1,dynamicSlippage:"",supportCustomMax:l.supportCustomMax,customMax:ot,dynamicMax:Ve,dynamicMin:We,recommendMax:$e,recommendMin:Je},onChange:ht}),a.default.createElement(ge.SelectMode,{className:L.priority,fee:g?.value,type:g?.type,feeMap:g.config,max:g?.max,currency:r,onChange:Mt,recommendMaxValue:g?.recommendMaxValue,recommendMinValue:g?.recommendMinValue,latestSelectType:nt,getTokenAmount:st,getUsd:it}),a.default.createElement(Le,{className:L.amount,amountList:St,setAmountList:xt,currency:r,currentMode:t,decimals:p,placeholderRef:ae}),a.default.createElement("div",{className:(0,q.default)({[L.placeholderTg]:Nt}),ref:ae}),a.default.createElement("div",{className:(0,q.default)("flex justify-between",L.btns)},ie&&a.default.createElement(C,{className:"flex-1",category:C.CATEGORY.outline,type:C.TYPE.primary,size:C.SIZE.lg,block:!0,disabled:bt,onClick:Ct},S("swaptrade_general_btn_reset")),a.default.createElement(C,{className:"flex-1",category:C.CATEGORY.fill,type:C.TYPE.primary,disabled:Et,size:C.SIZE.lg,block:!0,onClick:dt},S("swaptrade_dialog_btn_confirm"))),a.default.createElement(Ce,{onConfirm:ft,visible:ut,showChecked:!1,text:ct,confirmText:S("commonall_text_btn_ok_active")}))}),Ko=It;export{Ko as default};
//# sourceMappingURL=PresetEdit-U5KFE63Z.js.map
