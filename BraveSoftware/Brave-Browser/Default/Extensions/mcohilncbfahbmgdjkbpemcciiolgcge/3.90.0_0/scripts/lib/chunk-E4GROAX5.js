import{b as Ot,c as wt,d as yt,f as Nt,g as Pt}from"./chunk-J63JN6ZK.js";import{h as Q}from"./chunk-KUKFUJBA.js";import{a as Mt}from"./chunk-LUU4SMIP.js";import{a as ut}from"./chunk-VPT3GAIN.js";import{a as X,c as x}from"./chunk-VJ2JNI4M.js";import{Ba as Dt,p as q}from"./chunk-22THXMTO.js";import{D as J}from"./chunk-AHLFMVMC.js";import{a as A,j as xt,l as kt,r as Ct,s as N,z as At}from"./chunk-IFGNGASP.js";import{Bc as Et,G as dt,He as gt,L as lt,N as ht,O as _t,Tc as It,Ua as Tt,Uc as R,c as mt,h as ct,k as pt,nb as y,ob as tt,qb as et,r as ft,rb as ot,sb as rt,tb as Rt,te as St,ub as Lt}from"./chunk-NPJCEXXH.js";import{b as v}from"./chunk-PJC4UBLU.js";import{$ as w,N as O,a as C,j as i,x as V,z as S}from"./chunk-JYNY5RZ4.js";import{f as g,h,o as n,q as s}from"./chunk-LHDKEQAM.js";n();s();var Y=g(v());n();s();var Ft=g(v());n();s();var Ut=g(v());function bt(){let e=(0,Ut.useRef)(!0);return e.current?(e.current=!1,!0):e.current}var Bt=(e,t)=>{let o=bt();(0,Ft.useEffect)(()=>o?()=>{}:e(),t)};function Yt(){let{accountStore:e,fromToStore:t}=x(),{computedAccountId:o,address:r,setFromChainId:a,computedMultiAddresses:m}=e,{from:c,to:u,setBalanceState:p,getSwapTokenBalance:l,computedIsToAddressEqualsCurrentToAddress:E}=t,{amount:I,chainId:T}=c;(0,Y.useEffect)(()=>{At(T)&&a(T)},[T,a]),(0,Y.useEffect)(()=>{l()},[o,l]),(0,Y.useEffect)(()=>{p({amount:I,address:r,from:c,to:u})},[I,r,c,u,p,E]),Bt(()=>{l()},[m?.targetWalletAddress])}var fe=Yt;n();s();n();s();n();s();w();n();s();var P=(e,t)=>({networkFeeAmount:e,networkFeeTokenSymbol:t,formattedNetworkFeeAmount:e?`${kt(e)} ${t}`:"--"}),M=e=>{let{commonStore:t}=X(),{computedNowCurrencySymbol:o,currencyConversion:r}=t;return{networkFeeUsd:e,formattedNetworkFeeUsd:e?xt(r(e).toString(),o):"--"}},nt=e=>{let{estimateGasFeeAmount:t,fromNativeTokenSymbol:o,estimateGasFeeAmountUsd:r,bridge:a,fromToken:m,toToken:c,crossChainFee:u,bridgeFeeUsd:p,toSwapFee:l,toNativeTokenSymbol:E,toSwapFeeUsd:I}=e||{},{estimateBridgeFeeAmountUsd:T,estimateBridgeFeeAmount:G,bridgeName:H,bridgeLogoUrl:Qt,estimateClaimFeeAmount:it,estimateClaimFeeAmountUsd:Xt}=a||{},j=P(u,a?.crossToToken?.tokenSymbol),at=M(p);return{from:{chainName:m?.chainName,chainLogo:m?.chainLogoUrl,...P(t,o),...M(r)},bridge:{bridgeName:H,bridgeLogo:Qt,...P(G,o),...M(T),bridgeFeeAmount:j.networkFeeAmount,bridgeFeeTokenSymbol:j.networkFeeTokenSymbol,formattedBridgeFeeAmount:j.formattedNetworkFeeAmount,bridgeFeeUsd:at.networkFeeUsd,formattedBridgeFeeUsd:at.formattedNetworkFeeUsd},to:{chainName:c?.chainName,chainLogo:c?.chainLogoUrl,...P(l,E),...M(I)},claim:A.gt(it,0)?{chainName:gt("swaptrade_bridge_reminder_token_claim_fee"),chainLogo:c?.chainLogoUrl,...P(it,E),...M(Xt)}:null}},$t=()=>{let{quoteStore:e}=x(),{quote:t}=e;return nt(t?.bestRoute)},xe=$t;n();s();w();n();s();w();n();s();w();n();s();var U=class{constructor(t,o){h(this,"percent","");h(this,"exactPercent","");h(this,"dexRouterPercent","");Object.assign(this,o),this.dexRouterPercent=t}get computedPercent(){return this.percent?N(this.percent,{needZero:!1}):""}get computedExactPercent(){let t=A.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100);return t.isNaN()?"":N(t.toNumber(),{needZero:!1})}};var b=class{constructor(t,o,r){h(this,"fromToken",{});h(this,"toToken",{});h(this,"dexQuoteInfoList",[]);let{fromToken:a={},toToken:m={},dexQuoteInfoList:c}=o||{};this.fromToken=a,this.toToken=m,this.dialogHeaderText=r?Q(this.toToken?.tokenSymbol):`${Q(this.fromToken?.tokenSymbol)}/${Q(this.toToken?.tokenSymbol)}`,C(c)&&(this.dexQuoteInfoList=c.map(u=>new U(t,u)))}};var F=class{constructor(t,o){h(this,"percent","");h(this,"router","");h(this,"subRouterList",[]);h(this,"flag","");let{percent:r="",router:a="",flag:m="",subRouterList:c}=t||{};this.percent=r,this.router=a,this.flag=m,C(c)&&(this.subRouterList=c.map(u=>new b(r,u,o)))}get computedPercent(){return this.percent?N(this.percent,{needZero:!1}):""}};var k=class{constructor(t,o=!1){h(this,"data",[]);C(t)&&(this.data=t.map(r=>new F(r,o)))}};n();s();var _={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},L={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},B={IN_CHAIN:"0",CROSS_CHAIN:"1"},D={NORMAL_PERCENT:0,EXACT_PERCENT:1};var W=class{constructor(){this.fromToData={};this.setFromToData=t=>{this.fromToData=t};this.reloadQuote=null;this.setReloadQuote=t=>{this.reloadQuote=t};this.updateSmartRouterData=({isFetchQuoting:t,bestRoute:o,quoteError:r,quoteNull:a,shouldPauseQuote:m})=>{let c=o?pt(o):{},u=c.commonDexInfo||{},p=m?{}:{...u,...c};this.setStatusByQuote({isFetchQuoting:t,quoteError:r,bestRoute:p,quoteNull:a,shouldPauseQuote:m}),this.updateData(p||{}),this.updateAllGasFee(p||{})};this.showEntryForPc=!1;this.setShowEntryForPc=t=>{this.showEntryForPc=t};this.isShowShowAll=!0;this.updateIsShowShowAll=(t=!1)=>{this.isShowShowAll=t};this.status=_.LOADING;this.setStatus=t=>{let r=V(_).some(a=>a===t);this.status=r?t:_.DEFAULT};this.setStatusByQuote=({isFetchQuoting:t,quoteError:o,bestRoute:r,quoteNull:a,shouldPauseQuote:m})=>{if(m){this.setStatus(_.NO_DATA);return}let{fromToStore:c}=X();if(!o&&!r&&!a&&A.BigNumber(c?.computedTypedValue).gt(0)){this.setStatus(_.LOADING);return}if(t&&this.status!==_.SHOW_DATA&&this.status!==_.NO_DATA){this.setStatus(_.LOADING);return}if(o){this.setStatus(_.DISCONNECTION);return}if(a&&S(r?.dexRouterList)&&S(r?.fromDexRouterList)&&S(r?.bridge)&&S(r?.toDexRouterToList)){this.setStatus(_.NO_DATA);return}if(!S(r?.dexRouterList)||!S(r?.fromDexRouterList)||!S(r?.bridge)||!S(r?.toDexRouterToList)){this.setStatus(_.SHOW_DATA);return}this.setStatus(_.DEFAULT)};this.percentType=D.NORMAL_PERCENT;this.switchPercentType=()=>{this.percentType=this.percentType===D.NORMAL_PERCENT?D.EXACT_PERCENT:D.NORMAL_PERCENT};this.swapType=B.IN_CHAIN;this.setSwapType=t=>{this.swapType=t};this.tokenInfo={dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}};this.updateTokenInfo=t=>{O(this.tokenInfo,"dexRouter",{token0:this.fromToData.from||{},token1:this.fromToData.to||{}}),O(this.tokenInfo,"fromDexRouter",{token0:{...i(t,"fromToken",{}),amountIn:i(t,"fromTokenAmount","")},token1:{...i(t,"fromSwapToTokenInfo",{}),amountOut:i(t,"bridge.bridgeAmountIn","")}}),O(this.tokenInfo,"bridge",{token0:this.isCrossBridgeOnly?{...i(t,"fromToken",{}),amountIn:i(t,"bridge.bridgeAmountIn","")}:{...i(t,"bridge.crossFromToken",{}),amountIn:i(t,"bridge.bridgeAmountIn","")},token1:this.isCrossBridgeOnly?{...i(t,"toToken",{}),amountOut:i(t,"bridge.bridgeAmountOut","")}:{...i(t,"bridge.crossToToken",{}),amountOut:i(t,"bridge.bridgeAmountOut","")}}),O(this.tokenInfo,"toDexRouter",{token0:{...i(t,"toSwapFromTokenInfo",{}),amountIn:i(t,"bridge.bridgeAmountOut","")},token1:{...i(t,"toToken",{}),amountOut:i(t,"receiveAmount","")}})};this.dexRouterList=[];this.checkDagRouter=t=>!t||!t.length?!1:t?.filter?.(o=>!o.subRouterList).length;this.setDexRouterList=t=>{let o=this.checkDagRouter(t);this.dexRouterList=o?t:new k(t).data};this.fromDexRouterList=[];this.setFromDexRouterList=t=>{this.fromDexRouterList=new k(t).data};this.toDexRouterToList=[];this.setToDexRouterToList=t=>{this.toDexRouterToList=new k(t).data};this.bridgeRouterList=[];this.setBridgeRouterList=(t,o)=>{let r=(a={},m)=>({...a,tokenSymbol:m,fromBridge:!0});this.bridgeRouterList=new k([{percent:i(o,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:i(o,"bridgeName"),percent:"100",okLinkUrl:i(o,"fromPoolAddress")}],fromToken:{},toToken:r(i(o,"crossFromToken"),i(o,"fromPoolName"))},{dexQuoteInfoList:[{dexName:i(o,"bridgeName"),percent:"100",okLinkUrl:i(o,"toPoolAddress")}],fromToken:{},toToken:r(i(o,"crossToToken"),i(o,"toPoolName"))}]}],!0).data};this.checkIsManyQuote=t=>{if(t.length>1)return!1;let o=t.length>0?i(t,[0,"subRouterList"],[]):[];return o.length>1?!1:i(o,[0,"dexQuoteInfoList","length"])>5};this.checkIsFewRouter=t=>t.length===1&&i(t,[0,"subRouterList","length"])<3;this.getInfoByMenuType=t=>{if(this.swapType===B.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(t){case L.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case L.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case L.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}};this.currentMenu=L.DISMISS;this.setCurrentMenu=t=>{let r=V(L).some(a=>a===t);this.currentMenu=r?t:L.DISMISS};this.menuList=[];this.showMenuList=!0;this.isCrossBridgeOnly=!1;this.setMenuListAndCurrentMenu=(t,o,r)=>{if(!Array.isArray(t)||S(t))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(L.DISMISS);else{this.menuList=t.map(m=>({...m,bridge:{...r}}));let a=i(t,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===L.DISMISS||!t.some(m=>i(m,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(a),this.isCrossBridgeOnly=t.length===1&&a===L.BRIDGE&&o===B.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}};this.updateData=t=>{let{swapType:o,smartRoutingMenuVoList:r,dexRouterList:a,fromDexRouterList:m,bridge:c,toDexRouterToList:u}=t;this.setSwapType(o),this.setMenuListAndCurrentMenu(r,o,c),this.setDexRouterList(a),this.setFromDexRouterList(m),this.setBridgeRouterList(t,c),this.setToDexRouterToList(u),this.updateTokenInfo(t)};this.showXRouteModal=It.SWAP;this.setXRouteModal=t=>{this.showXRouteModal=t};this.subRouterData=null;this.setSubRouterData=t=>{this.subRouterData=t};this.subRouterModal=!1;this.setSubRouterModal=t=>{this.subRouterModal=t};this.dexQuoteInfoListData=[];this.setDexQuoteInfoListData=t=>{this.dexQuoteInfoListData=t};this.oldRouterModal=!1;this.setOldRouterModal=t=>{this.oldRouterModal=t};this.allGasFee={};this.updateAllGasFee=t=>{this.allGasFee=nt(t)}}get computedIsFewRouter(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsFewRouter(t)}get computedIsManyQuoteInfo(){let{routerList:t}=this.computedCurrentRouter;return this.checkIsManyQuote(t)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}};var st=class extends W{constructor({quoteStore:o,fromToStore:r,swapDappStore:a}){super();this.fromToStore=r||{},this.quoteStore=o||{},this.swapDappStore=a||{},Mt(this,{},{autoBind:!0}),ct(()=>({isFetchQuoting:this.quoteStore.quote?.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:this.quoteStore.quote?.quoteError,quoteNull:this.quoteStore.quote?.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to,shouldPauseQuote:this.swapDappStore.computedSupportDappTradeByChain}),({isFetchQuoting:m,bestRoute:c,quoteError:u,quoteNull:p,shouldPauseQuote:l})=>{this.setReloadQuote(this.quoteStore.fetchQuote),this.setFromToData({from:this.fromToStore.from,to:this.fromToStore.to}),this.updateSmartRouterData({isFetchQuoting:m,bestRoute:c,quoteError:u,quoteNull:p,shouldPauseQuote:l})},{equals:mt.shallow})}};n();s();n();s();var Z=g(ut());function Zt(){let e=(0,Z.useLocation)(),t=(0,Z.useHistory)(),o=u=>{t.replace(u)},r=u=>{t.push(u)},a=u=>{let l=`${u.pathname||e.pathname}${u.search||""}${u.hash||""}`;ht(l,"_self")};return{replace:(u,p)=>{([y.WALLET_DASHBOARD,y.MARKET].includes(u)?a:o)(p)},pushFn:(u,p)=>{([y.WALLET_DASHBOARD,y.MARKET].includes(u)?a:r)(p)}}}var Wt=Zt;n();s();var K=g(v()),Gt=g(ut());var Kt=()=>{let{hash:e,search:t}=(0,Gt.useLocation)(),o=e&&e.indexOf("#")>-1?e.slice(1):e;return(0,K.useMemo)(()=>new URLSearchParams(t||o),[t,o])},zt=()=>{let e=new _t().stringify(),t=new lt().stringify();return(0,K.useMemo)(()=>new URLSearchParams(e||t),[e,t])};function jt(){let e=Kt(),t=zt();return(0,K.useMemo)(()=>tt()?e:t,[e,t])}var Ht=jt;function Vt(){let{commonStore:e}=x(),{portal:t,computedCurrentTabIsLimit:o}=e,r=Ht(),a=Wt(),m=({pathname:u,params:p}={})=>{let l=Pt(t,u),E=q()?yt(p):Ot(p),I=wt(E),T={};l&&(T.pathname=l),I&&(T.search=`?${I}`),a.replace(t,T)};return{params:Nt(r,o),replace:m}}var vt=Vt;n();s();var vo=()=>{let{fromToStore:e,accountStore:t,commonStore:o}=x(),{updateFrom:r,updateTo:a,setField:m,advanceSetTypedValue:c}=e,{setCurrentTab:u}=o;return(p,l,E,I)=>{let T=t.isConnectedWallet,G=[];if(u(I,!0),p&&(r({...p,amount:""}),G.push(p.chainId),E)){let H=E===Tt?"":Ct(E,p.decimals);m(Et.FROM),c(H,!1,I),r({amount:H})}l&&(a(l),G.push(l.chainId)),T&&e.getSwapTokenBalance()}},qo=()=>(e,t)=>{let o={from:{chainId:e?.chainId,tokenContractAddress:e?.tokenContractAddress,chainLogoUrl:e?.chainLogoUrl,tokenLogoUrl:e?.tokenLogoUrl,chainName:e?.chainName,tokenSymbol:e?.tokenSymbol},to:{chainId:t?.chainId,tokenContractAddress:t?.tokenContractAddress,chainLogoUrl:t?.chainLogoUrl,tokenLogoUrl:t?.tokenLogoUrl,chainName:t?.chainName,tokenSymbol:t?.tokenSymbol}};return o.from.tokenContractAddress&&o.to.tokenContractAddress?o:null},Jt=e=>{let t=q();return e===R.SWAP?t?Rt:et:e===R.BRIDGE?t?Lt:ot:e===R.LIMIT_ORDER?rt:""},Qo=()=>{let{replace:e}=vt();return o=>{let r=Jt(o);if(r){e({pathname:r});return}ft.error("useReplaceLocationByTab: unknown tab type")}};n();s();w();var te=e=>Number(e)===1,jo=async()=>{let[,e]=await dt(Dt.get(St,{}));return{loaded:!0,state:i(e,"data.state"),isLimitRegion:te(i(e,"data.isLimitRegion")),maintenanceChains:i(e,"data.maintenanceChains")}};n();s();n();s();var z=()=>[R.SWAP,R.BRIDGE];n();s();var ee=[R.SWAP,R.BRIDGE,R.LIMIT_ORDER];var qt=()=>{let e=z();return e.length===1&&ee.includes(e[0])},Rr=e=>{let t=z();return qt()?{tabsSetting:{show:!1,size:J.SIZE.xxl,textShow:e}}:{tabsSetting:{show:!e,size:J.SIZE.xxl,textShow:e},supportBusinessLines:t}},Lr=e=>{let t=z();return qt()?{tabsSetting:{show:!1,textShow:!e},isFullTab:e,supportBusinessLines:t}:{tabsSetting:{show:e,textShow:!e},isFullTab:e,supportBusinessLines:t}};n();s();export{vt as a,vo as b,qo as c,Jt as d,Qo as e,fe as f,M as g,nt as h,xe as i,_ as j,L as k,B as l,D as m,st as n,jo as o,Rr as p,Lr as q};
//# sourceMappingURL=chunk-E4GROAX5.js.map
