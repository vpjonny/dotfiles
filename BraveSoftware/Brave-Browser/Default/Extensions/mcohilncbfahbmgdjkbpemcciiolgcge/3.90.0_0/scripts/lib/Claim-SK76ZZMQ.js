import{a as uo,e as fo,f as po,j as Co,k as _o,l as go,m as ho,o as x}from"./chunk-EJOBBFCH.js";import{b as co}from"./chunk-O7CVD42X.js";import"./chunk-XXAIJB4T.js";import{a as Bo}from"./chunk-VPT3GAIN.js";import{c as d}from"./chunk-VJ2JNI4M.js";import{Ba as lo,Ja as mo,ra as io,xa as no}from"./chunk-22THXMTO.js";import"./chunk-HUG2KBCE.js";import"./chunk-MCCEOABZ.js";import"./chunk-UJWKDH2G.js";import{f as z}from"./chunk-AHLFMVMC.js";import"./chunk-KZDRRGNV.js";import"./chunk-3DAKLS7D.js";import{f as ao}from"./chunk-JVJHSYZS.js";import{a as ro,p as so}from"./chunk-IFGNGASP.js";import{G as N,He as p,Uc as to,ad as eo,ia as k,m as oo,n as L}from"./chunk-NPJCEXXH.js";import"./chunk-4HHTYYQM.js";import"./chunk-PWGSI7LM.js";import"./chunk-RVS5KJOS.js";import{B as S,v as V}from"./chunk-5RLAMZDG.js";import"./chunk-VYWNZTTM.js";import"./chunk-K6YGPUNZ.js";import"./chunk-K6262WF4.js";import"./chunk-ZJ4FWIGG.js";import"./chunk-34KDKISZ.js";import"./chunk-AL77NTUI.js";import"./chunk-V3FLECS4.js";import"./chunk-LHUS6JBK.js";import"./chunk-R6TSAW7C.js";import"./chunk-2W2QYRRT.js";import"./chunk-Q7AZQDRY.js";import"./chunk-DSO47LPO.js";import"./chunk-QOQ6OPZO.js";import"./chunk-MGS2LE6A.js";import"./chunk-CBNY2XQM.js";import"./chunk-FRGP5XJV.js";import{a as R}from"./chunk-Q2B4R57L.js";import{b as E}from"./chunk-PJC4UBLU.js";import"./chunk-HDMZQINQ.js";import"./chunk-JYNY5RZ4.js";import"./chunk-F6LAWA6D.js";import"./chunk-OAMYZMR4.js";import"./chunk-I7KURANN.js";import"./chunk-BGUOO6AC.js";import"./chunk-GUM36CPA.js";import{f as u,o as a,q as i}from"./chunk-LHDKEQAM.js";a();i();var t=u(E()),F=u(Bo()),J=u(R());a();i();var Z={list:"list",coin:"coin",orderDetail:"orderDetail"};a();i();var G=u(E());a();i();var So=u(E());var M=()=>{let{walletContractStore:e}=d(),{gasFee:o,nativeCoin:r}=e,{coinAmountInt:n,decimals:s}=r??{};return(0,So.useMemo)(()=>{let m=so(n,s);return ro.gte(m,o||"0")},[o,n,s])};var Fo=()=>{let{HeaderTip:e}=k.components,{walletContractStore:o}=d(),{gasInfo:r,gasLimitError:n,nativeCoin:s,compuletedGetNativeCoinError:m,compuletedGetNativeCoinLoading:l,computedTipsBtnProps:y}=o,{symbol:T}=s??{},f={type:z.TYPE.error,renderGasStation:!1},h=M(),w=()=>G.default.createElement(e,{type:z.TYPE.warn,message:p("swaptrade_extension_cinteraction_insufficient_networkfee",{symbol:T}),actions:[y],renderGasStation:!1}),v=()=>G.default.createElement(e,{...f,message:p("swaptrade_extension_cinteraction_might_error")}),b=()=>G.default.createElement(e,{...f,message:n});return l?null:m?G.default.createElement(e,{...f,message:p("swaptrade_history_error_retrieve_balance_error")}):n?b():h&&r?.gasLimitInfo?.queryGasLimitErrorUseDefault?v():h?null:w()},yo=L(Fo);a();i();var To=u(E());var Wo=({chainId:e,tokenContractAddress:o,amount:r,isNativeToken:n})=>{let s=ho({chainId:e,tokenContractAddress:o,isNativeToken:n}),{coinId:m,decimals:l}=s||{};return(0,To.useMemo)(()=>[{coinId:m,assetChange:go("+",r,l),useMinPrecision:!1}],[r,m,l])},wo=Wo;a();i();var g=u(E()),ko=u(R());a();i();var Eo=u(E());var Ho=()=>{let{walletContractStore:e}=d(),o=M(),{gasInfo:r,gasLimitError:n,compuletedGetNativeCoinError:s,compuletedGetNativeCoinLoading:m,gasFeeLoading:l}=e;return(0,Eo.useMemo)(()=>l||n||s||m||r?.isGasLimitLoading||r?.gasLimitInfo?.queryGasLimitErrorUseDefault||!o,[s,m,l,r?.gasLimitInfo?.queryGasLimitErrorUseDefault,r?.isGasLimitLoading,n,o])},Io=Ho;a();i();var bo=u(E());a();i();var $=class{constructor(){this.isLoading=!1;this.setLoading=o=>{this.isLoading=o};this.orderDetail=null;this.setOrderDetail=o=>{this.orderDetail=o};this.fetchOrderDetail=async o=>{this.setLoading(!0);let[r,n]=await N(lo.get(eo,{params:{orderId:o}}));if(r){this.setError(r),this.setLoading(!1);return}let s=n.data;this.setOrderDetail(s)};this.payload=null;this.setPayload=o=>{this.payload=o};this.sourceClaimPayload=null;this.setSourceClaimPayload=o=>{this.sourceClaimPayload=o};this.error=null;this.reset=()=>{this.setLoading(!1),this.setOrderDetail(null),this.setPayload(null),this.setSourceClaimPayload(null),this.clearError()};oo(this,{},{autoBind:!0})}setError(o){this.error=o}clearError(){this.error=null}},I=new $;var Uo=e=>{let{walletContractStore:o,swapStore:r}=d(),{toChainId:n,orderId:s}=e||{};return(0,bo.useCallback)(async()=>{let{history:m}=k,{payload:l}=I;no.info(io.CLAIM_PAYLOAD,{payload:l,tags:{orderId:s}});let[y,T]=await N(mo({chainId:n,walletSendParams:o.walletSendParams},l[0]));if(y){r.onWalletFail(y,s,!0);return}let{result:f,nonce:h}=T;await r.updateClaimOrder({mainOrderId:s,redeemTxHash:f,nonce:h}),m?.goBack()},[n,o.walletSendParams,r,s])},Lo=Uo;a();i();var B={footer:"_footer_18rul_1","button-style":"_button-style_18rul_8",buttonStyle:"_button-style_18rul_8"};var Yo=({onChangeHeight:e,trade:o})=>{let r=(0,g.useRef)(null),[n,s]=(0,g.useState)(!1),{walletContractStore:m}=d(),{computedCancelBtnProps:l}=m;(0,g.useEffect)(()=>{let f=w=>{e&&e(w.offsetHeight)},h=new MutationObserver(w=>{f(w[0]?.target)});return r.current&&(f(r.current),h.observe(r.current,{childList:!0})),()=>{h.disconnect()}},[e]);let y=Io(),T=Lo(o);return g.default.createElement("div",{className:(0,ko.default)(B.footer)},g.default.createElement(S,{block:!0,circle:!1,className:B.buttonStyle,size:S.SIZE.lg,category:S.CATEGORY.outline,type:S.TYPE.primary,loading:l.loading,loadingText:l.btnText,disabled:l.disabled,onClick:l.onClick},l.btnText),g.default.createElement(S,{block:!0,circle:!1,className:B.buttonStyle,size:S.SIZE.lg,type:S.TYPE.highlight,category:S.CATEGORY.fill,disabled:y,loading:n,loadingText:p("swaptrade_common_btn_confirm"),onClick:async()=>{s(!0),await T(),s(!1)}},p("swaptrade_common_btn_confirm")))},xo=L(Yo);a();i();var j=u(E());var qo=({chainId:e,transactionPayload:o})=>{let{fromToStore:r}=d(),{isEvmChain:n}=r;return po(e),n(e)?j.default.createElement(_o,{chainId:e,transactionPayload:o,isClaim:!0,needGasChange:!0}):j.default.createElement(Co,{chainId:e,transactionPayload:o,isClaim:!0})},vo=qo;var zo=()=>{let[e,o]=(0,t.useState)(""),{components:{MultipleChangeSummary:r,TxTypeWithTools:n,SectionWrap:s,InteractiveAddress:m,ModuleWrap:l,ViewData:y}}=k,T=(0,F.useHistory)(),[f,h]=(0,t.useState)(80),{search:w}=(0,F.useLocation)(),{orderId:v,source:b}=(0,t.useMemo)(()=>ao(w),[w]),{swapStore:P,accountStore:W,fromToStore:Po,walletContractStore:Do}=d(),{computedAccountId:Go}=W,{isEvmChain:Ao}=Po,{gasInfo:H}=Do,{orderDetail:c,setPayload:D,payload:K,setLoading:U,setSourceClaimPayload:Q,sourceClaimPayload:Y}=I;(0,t.useEffect)(()=>{b&&(b===Z.list||b===Z.coin)&&e&&co("bridge_claim_click","history_main",e)},[b,e]),(0,t.useEffect)(()=>{v&&I.fetchOrderDetail(v)},[v]),(0,t.useEffect)(()=>()=>{I.reset()},[]),uo(),(0,t.useEffect)(()=>{if(c){let A=W.getAddressByChainId(c.toChainId);o(A),P.fetchClaimCalldata(c,A).then(O=>{if(U(!1),!O){T.goBack();return}let{payload:q,sourceClaimPayload:Mo}=O;D(q),Q(Mo)}).catch(()=>{U(!1)})}},[P,c,W,D,U,Q,T]);let X=(0,t.useCallback)(async(A,O)=>{let q=await P.formatClaimPayload(A,O);D(q)},[D,P]);(0,t.useEffect)(()=>{c&&Y&&H&&X(Y,c)},[H.networkFee,c,Y,D,P,H,X]);let Oo=fo(to.CLAIM),No=wo({chainId:c?.toChainId,tokenContractAddress:c?.toTokenAddress,isNativeToken:c?.isNativeToken==="1",amount:c?.bridgeChildOrderDetailVo?.toAmountOut});return I.isLoading?t.default.createElement("div",{className:(0,J.default)(x.container,x.loading)},t.default.createElement(V,{size:V.SIZE.lg})):t.default.createElement("div",{className:x.container},t.default.createElement("div",{style:{height:`calc(100% - ${f}px)`},className:(0,J.default)(x.wrap)},t.default.createElement("div",{className:x.scroll,id:"wallet_scroll"},t.default.createElement(yo,null),t.default.createElement(n,{txTypeInfo:{baseInfo:Oo}},t.default.createElement(r,{title:p("swaptrade_orders_label_receive"),summaryList:No})),t.default.createElement(vo,{chainId:c?.toChainId,transactionPayload:K?.[0]}),t.default.createElement(s,null,t.default.createElement(m,{title:p("swaptrade_transfer_textarea_wallet_used"),address:e,walletId:Go})),t.default.createElement(s,{bordered:!1},Ao(c?.toChainId)&&t.default.createElement(y,{copyable:{hideDesc:!0},data:K?.[0]?.data})))),t.default.createElement(xo,{onChangeHeight:h,trade:c}))},ye=L(zo);export{ye as default};
//# sourceMappingURL=Claim-SK76ZZMQ.js.map
