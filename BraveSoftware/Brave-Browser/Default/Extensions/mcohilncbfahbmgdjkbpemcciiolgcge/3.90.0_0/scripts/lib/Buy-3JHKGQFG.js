import{a as re,b as ie,c as me,d as se,e as ae,f as ue,g as de,h as ce,i as pe,j as fe,k as _e,l as ke,m as ge,n as ye,o as Se,p as G,q as Me,r as be,s as ve,t as xe}from"./chunk-CBCQ475Z.js";import"./chunk-O3TIIRPP.js";import"./chunk-E5Y77LVR.js";import{a as le}from"./chunk-CADVMGAW.js";import{a as Te}from"./chunk-WP5MSDLO.js";import"./chunk-AKD4IV4A.js";import"./chunk-ZQKQQ4OE.js";import"./chunk-NMNQL2R3.js";import{b as d}from"./chunk-PB55N5D7.js";import"./chunk-MFGGF2Y7.js";import"./chunk-E5UIMO2Q.js";import{f as ne}from"./chunk-5FG6H5J6.js";import"./chunk-5752NKZT.js";import"./chunk-2QA7T6UC.js";import"./chunk-LEVBC5FZ.js";import"./chunk-Q2VVUFER.js";import"./chunk-EYUFC4TO.js";import"./chunk-6U5AQS6C.js";import"./chunk-QHC2DYOH.js";import"./chunk-Y4CIMEKM.js";import"./chunk-K6IXN25O.js";import"./chunk-ULAT354B.js";import"./chunk-RRYQDZYV.js";import{a as te}from"./chunk-AGXWN2TT.js";import"./chunk-L6KPEUIR.js";import"./chunk-EPX4LAAB.js";import"./chunk-S4V3ABCT.js";import"./chunk-R6FBHCT7.js";import"./chunk-MHNQB4I5.js";import"./chunk-GVFJTHCK.js";import"./chunk-J63JN6ZK.js";import"./chunk-LOGCUUNU.js";import"./chunk-BHFRQZBI.js";import"./chunk-57DLZB3H.js";import"./chunk-KJYTBTZX.js";import"./chunk-7B2UMYR3.js";import"./chunk-DLWPK36I.js";import"./chunk-5T4URYBB.js";import"./chunk-6KT3MJYR.js";import"./chunk-4TAIYLPS.js";import"./chunk-LQG7SAW5.js";import"./chunk-CTJA2WQT.js";import"./chunk-F2F65RJN.js";import"./chunk-EGIK3RWU.js";import"./chunk-TQ2XASI3.js";import"./chunk-XXAIJB4T.js";import"./chunk-VPT3GAIN.js";import"./chunk-VJ2JNI4M.js";import{C as oe,ra as I,xa as U}from"./chunk-22THXMTO.js";import"./chunk-HUG2KBCE.js";import{a as ee}from"./chunk-MCCEOABZ.js";import"./chunk-UJWKDH2G.js";import{d as D}from"./chunk-AHLFMVMC.js";import"./chunk-KZDRRGNV.js";import"./chunk-3DAKLS7D.js";import"./chunk-JVJHSYZS.js";import{a as V,l as R}from"./chunk-IFGNGASP.js";import{Ec as A,He as w,n as K,ya as Z}from"./chunk-NPJCEXXH.js";import"./chunk-4HHTYYQM.js";import"./chunk-PWGSI7LM.js";import"./chunk-RVS5KJOS.js";import{s as H,v as J}from"./chunk-5RLAMZDG.js";import"./chunk-VYWNZTTM.js";import"./chunk-K6YGPUNZ.js";import"./chunk-K6262WF4.js";import"./chunk-ZJ4FWIGG.js";import"./chunk-34KDKISZ.js";import"./chunk-AL77NTUI.js";import"./chunk-V3FLECS4.js";import"./chunk-LHUS6JBK.js";import"./chunk-R6TSAW7C.js";import"./chunk-2W2QYRRT.js";import"./chunk-Q7AZQDRY.js";import"./chunk-DSO47LPO.js";import"./chunk-QOQ6OPZO.js";import"./chunk-MGS2LE6A.js";import"./chunk-CBNY2XQM.js";import"./chunk-FRGP5XJV.js";import{a as j}from"./chunk-Q2B4R57L.js";import{b as C}from"./chunk-PJC4UBLU.js";import"./chunk-HDMZQINQ.js";import{$ as F,F as Y,H as $,e as X,j as E}from"./chunk-JYNY5RZ4.js";import"./chunk-F6LAWA6D.js";import"./chunk-OAMYZMR4.js";import"./chunk-I7KURANN.js";import"./chunk-BGUOO6AC.js";import"./chunk-GUM36CPA.js";import{f as T,o as a,q as u}from"./chunk-LHDKEQAM.js";a();u();var m=T(C()),W=T(j());a();u();var z=T(C());F();var Le=()=>{let{buyStore:o,quoteStore:e}=d(),{tokenPair:f,setTokenPair:n}=re("buy"),r=me(o?.toToken,f?.to);(0,z.useEffect)(()=>{r&&r?.tokenContractAddress&&o.setToToken(r)},[r?.tokenContractAddress]);let t=ae(),s=ue(t?.tokenContractAddress);(0,z.useEffect)(()=>{t&&t?.tokenContractAddress&&o.setFromToken(t),t&&s&&t?.tokenContractAddress===s?.tokenContractAddress&&o.setFromToken($(t,s))},[t?.tokenContractAddress,s?.amountNum]),(0,z.useEffect)(()=>{n({from:o.fromToken,to:o.toToken})},[o?.toToken?.tokenContractAddress]),ie(),se(),(0,z.useEffect)(()=>{e.quoteData?.data&&o.setLoading(!1)},[e.quoteData?.data])};a();u();var he=T(C());a();u();var i=T(C()),x=T(j());F();a();u();var B={"input-container":"_input-container_fyhvp_1",inputContainer:"_input-container_fyhvp_1",suffix:"_suffix_fyhvp_4","mode-text":"_mode-text_fyhvp_7",modeText:"_mode-text_fyhvp_7"};var Ce=()=>{let{buyStore:o,sellStore:e,configStore:f}=d(),{currentMode:n}=f,{buyValue:r,setBuyValue:t,toToken:s}=o,{sellValue:l,setSellValue:S,fromToken:_,isPercentMode:k}=e,[M,L,c]=(0,i.useMemo)(()=>n==="buy"?[r.value,t,r.type]:[l.value,S,l.type],[n,r,t,l,S]),g=N=>{n==="sell"&&l.type==="custom"&&k&&V.gt(N,100)||(L({value:N,type:"custom",index:3}),U.info(I.MEME_SWAP_AMOUNT_INPUT,{data:{value:N,type:"custom",index:3,currentMode:n}}))},[,y]=(0,i.useTransition)(),O=N=>{y(()=>{!Y(N)&&g(N)})},[Q,h]=(0,i.useState)(!1),[Ee,Ve]=(0,i.useMemo)(()=>n==="buy"?[null,Math.min(A,Number(s?.decimals))]:l.type==="custom"&&k?[i.default.createElement("div",{key:"meme-swap-percentage-suffix",className:(0,x.default)("flex items-center",B.suffix)},i.default.createElement("span",{className:(0,x.default)(B.modeText)},w("swaptrade_meme_order_option_percentage")),i.default.createElement(D,{onClick:()=>h(!0)},i.default.createElement(H,{className:(0,x.default)("okx-defi-dex-market-sort-down","content-primary"),style:{fontSize:12,cursor:"pointer"}}))),2]:[i.default.createElement("div",{key:"meme-swap-default-suffix",className:(0,x.default)("flex items-center",B.suffix)},i.default.createElement("span",{className:(0,x.default)(B.modeText)},_?.tokenSymbol||""),i.default.createElement(D,{onClick:()=>h(!0)},i.default.createElement(H,{className:(0,x.default)("okx-defi-dex-market-sort-down"),style:{fontSize:12,cursor:"pointer"}}))),Math.min(A,Number(_?.decimals)),Number.MAX_SAFE_INTEGER],[n,l.type,_,s,k]),[q,we]=(0,i.useState)(null);return(0,i.useEffect)(()=>{X(E(q,"focus"))&&q.focus()},[l.type,q]),{setInputRef:we,suffix:Ee,precision:Ve,inputModeSwitchVisible:Q,setVisible:h,changeHandle:O,value:M,valueType:c}};var Ae=()=>{let{quoteStore:o,configStore:e,buyStore:f,sellStore:n}=d(),{precision:r,changeHandle:t,value:s,valueType:l}=Ce(),{getUsd:S}=Te(d),_=e.currentMode==="buy",k=e.currentMode==="sell",M=(0,he.useMemo)(()=>k&&l==="select"?V.mul(s,n.fromToken?.amountNum):s,[s,l,n.fromToken?.amountNum,k]),L=_?f:n,{amountNum:c,tokenSymbol:g,chainId:y}=L?.fromToken||{},O=ve(),Q=c&&g?"":Z.BALANCE_NOT_SHOW,h=o.computedFromTokenValue>0?S(o.computedFromTokenValue):"";return{precision:r,changeHandle:t,costValue:h,inputValue:M,inputLabel:O,balanceState:Q,amountNum:c,tokenSymbol:g,chainId:y}};a();u();var P=T(C());F();var Ie=()=>{let{configStore:o,buyStore:e,quoteStore:f}=d(),{currentMode:n,initLoading:r}=o,{setBuyValue:t,currentBuyPreset:s,fromToken:l,updateCurrentPresetAmountList:S}=e,_=s?.amountList||[],k=(0,P.useCallback)(c=>{t({value:c.value,type:"select",index:c.index}),U.info(I.MEME_SWAP_AMOUNT_SELECT,{data:{type:"select",item:c,currentMode:n}})},[n,t]),M=(0,P.useCallback)(c=>{let g=c.map(y=>String(y));S(g)},[S]);return{quickSelectOptions:(0,P.useMemo)(()=>{if(r||!_?.length)return Array.from({length:3},(g,y)=>({label:"",value:"",key:`meme_loading_${y}`}));let c=E(l,"decimals",0);return _.map((g,y)=>({label:R(g,{sigFigs:c}),value:g,precision:c,onClick:k,type:"select",index:y,key:`meme_select${y+1}`}))},[_,k,l,r]),handleUpdateQuickSelectOptions:M,initLoading:r||f?.initLoading}},ze=Ie;a();u();var Be=T(C());var Ue=()=>{let{configStore:o,quoteStore:e,buyStore:f}=d(),{computedToTokenValue:n,computedToTokenAmount:r}=e,{toToken:t}=f,{currentMode:s}=o;return(0,Be.useMemo)(()=>s==="buy"?te({realTimeTokenPrice:t?.price,amount:r,nonRealTimeTokenValue:n}):n,[r,n,s,t?.price])},Pe=Ue;a();u();var p={root:"_root_z8yvd_1","tg-root":"_tg-root_z8yvd_4",tgRoot:"_tg-root_z8yvd_4",content:"_content_z8yvd_7",loading:"_loading_z8yvd_10","loading-mask":"_loading-mask_z8yvd_13",loadingMask:"_loading-mask_z8yvd_13","extension-mask":"_extension-mask_z8yvd_13",extensionMask:"_extension-mask_z8yvd_13","tg-mask":"_tg-mask_z8yvd_18",tgMask:"_tg-mask_z8yvd_18",switch:"_switch_z8yvd_23",tab:"_tab_z8yvd_26",token:"_token_z8yvd_29",balance:"_balance_z8yvd_33",input:"_input_z8yvd_36",quote:"_quote_z8yvd_39","input-box":"_input-box_z8yvd_42",inputBox:"_input-box_z8yvd_42","select-token-symbol":"_select-token-symbol_z8yvd_48",selectTokenSymbol:"_select-token-symbol_z8yvd_48",btn:"_btn_z8yvd_55","error-tips":"_error-tips_z8yvd_64",errorTips:"_error-tips_z8yvd_64",divide:"_divide_z8yvd_67"};var Oe=K(()=>{let{buyStore:o,quoteStore:e,memeSwapStore:f}=d();Le();let n=xe(),r=Pe(),t=ee(),s=le(oe),{changeHandle:l,inputValue:S,inputLabel:_,tokenSymbol:k}=Ae(),{quickSelectOptions:M,handleUpdateQuickSelectOptions:L}=ze();return m.default.createElement("div",{className:(0,W.default)(p.root,{[p.tgRoot]:t})},m.default.createElement(J,{hasMask:!0,loading:f?.isSwapLoading,loaderClassName:p.loading,zIndex:11,maskClassName:(0,W.default)(p.loadingMask,t?p.tgMask:p.extensionMask)},m.default.createElement("div",{className:p.content},m.default.createElement(ke,null,m.default.createElement(ne,{className:p.switch,memeClick:()=>{s({button_name:"to_meme",tab_name:"to_meme"})}}),m.default.createElement(_e,{className:p.tab,loading:e?.initLoading,mode:"buy"})),m.default.createElement(Me,{className:p.token,loading:e?.initLoading,item:o?.toToken,mode:"buy"}),m.default.createElement(fe,{className:p.balance,loading:e?.initLoading,amount:o?.fromToken?.amountNum,currency:o?.fromToken?.tokenSymbol}),m.default.createElement(be,{className:p.input,value:S,unit:k,precision:o?.fromToken?.decimals??A,onChange:l,label:_,placeholder:w("swaptrade_general_placeholder_amount",{},{useBr:!1}),quickSelectOptions:M,handleUpdateQuickSelectOptions:L,selectedIndex:o?.buyValue?.index}),n&&m.default.createElement(m.default.Fragment,null,m.default.createElement(G.Quote,{className:"mb-16",initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,circleLoading:e.quoteLoading,tokenAmount:e?.computedToTokenAmount,price:r,tokenSymbol:o?.toToken?.tokenSymbol}),m.default.createElement(ge,{initLoading:e.initLoading,className:"mb-16"}),m.default.createElement(pe,{initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,className:"mb-16"}),m.default.createElement(G.ServiceFeeInfo,{className:"mb-24",initLoading:e.initLoading,rightLoading:e.computedCustomQuoteLoading,useBussinessStore:d})),m.default.createElement(ce,{isSkeleton:f?.isSwapLoading}),m.default.createElement(ye,{loading:e.initLoading,useMemeSwapBtnProps:de}))),m.default.createElement(Se,null))}),kt=Oe;export{kt as default};
//# sourceMappingURL=Buy-3JHKGQFG.js.map
