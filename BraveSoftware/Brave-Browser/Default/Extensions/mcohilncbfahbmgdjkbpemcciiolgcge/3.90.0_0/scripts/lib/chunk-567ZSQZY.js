import{c as dt}from"./chunk-R6FBHCT7.js";import{a as j,f as st}from"./chunk-QR5EI5TJ.js";import{a as ct}from"./chunk-5T4URYBB.js";import{b as it,c as at,d as lt}from"./chunk-6KT3MJYR.js";import{Ba as ee,Ja as Ie,Ka as ot,bb as rt,j as et,q as tt,ra as V,u as nt,xa as G}from"./chunk-22THXMTO.js";import{a as Ee,j as Ze,z as q}from"./chunk-IFGNGASP.js";import{$c as Be,Ad as $e,F as we,G as ae,Ge as qe,Ja as ke,Md as Ve,Nc as ge,Nd as Ge,Od as He,Pc as Ue,Pd as pe,Qd as Je,Rd as Xe,Sd as Ye,Ta as fe,Td as ze,Uc as k,Xc as xe,Xd as Qe,Ya as Q,d as z,dd as Ne,e as be,gd as We,ia as B,jd as he,kd as je,l as ie,mb as Me,nb as N,o as Re,wd as Ke,yd as _e,zc as Z,zd as Fe}from"./chunk-NPJCEXXH.js";import{b as Y}from"./chunk-PJC4UBLU.js";import{$ as Le,W as me,j as $}from"./chunk-JYNY5RZ4.js";import{c as St,f as J,h,n as w,o as v,q as O}from"./chunk-LHDKEQAM.js";var _t=St((re,De)=>{v();O();(function(o,c){typeof re=="object"&&typeof De=="object"?De.exports=c():typeof define=="function"&&define.amd?define([],c):typeof re=="object"?re._prohibitedMonitor=c():o._prohibitedMonitor=c()})(re,function(){return function(){"use strict";var b={"../monitor/src/amp/helper.js":function(S,f,s){s.r(f),s.d(f,{getAmpDefaultEndpoint:function(){return n},getAmplitudeAPIKey:function(){return _},getAmplitudeProject:function(){return a},logSignUpComplete:function(){return l},reportIdentifyEvent:function(){return e}});var m=s("../monitor/src/common/variables.js"),T=s("../monitor/src/common/constants.js");let l=r=>{let{signUpCompleted:p}=sessionStorage;p&&(r.logEvent("signup_completed",{},{language:m.default.getOkGlobal().locale}),sessionStorage.removeItem("signUpCompleted"))},a=r=>r||(m.default.isOKLink()?T.default.AMPLITUDE_PROJECT.oklink:m.default.isOKEx()||m.default.isInExtension()?T.default.AMPLITUDE_PROJECT.okx:T.default.AMPLITUDE_PROJECT.okcoin),_=r=>{let p=m.default.isProdEnv(),u=T.default.AMPLITUDE_KEY_MAP?.[r];return u?p?u?.prod:u?.dev:""},e=(r,p)=>{let u=new window.amplitude.Identify;u.set("channel_id",p),r.identify(u,{language:m.default.getOkGlobal().locale})},n=()=>{if(m.default.isInternalSystem()||m.default.isOKEx()||m.default.isOKLink())return"/amplitude/2/httpapi"}},"../monitor/src/amplitude.js":function(S,f,s){s.r(f);var m=s("../monitor/src/amp/helper.js"),T=s("../monitor/src/common/constants.js"),l=s("../monitor/src/common/event-bus.js"),a=s("../monitor/src/common/variables.js"),_=s("../monitor/src/lib/libs-amplitude.js"),e=s("../monitor/src/monitor.js");let n={},r,p={RESOLVE:"RESOLVE",REJECT:"REJECT"},u={events:new l.default,getAmplitudeSDKInstance(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((t,g)=>{this.events.on(p.RESOLVE,i=>{t(i)}),this.events.on(p.REJECT,i=>{g(i)}),this.getInstance(d)})},async getInstance(d){let t=(0,m.getAmplitudeProject)(d);r&&clearTimeout(r),window.amplitude||await(0,_.default)();let g=await a.default.getTk(),i=await a.default.getDeviceId()||"";if(n[t])return n[t];let E=window.amplitude.createInstance(),I=(0,m.getAmplitudeAPIKey)(t),A=(0,m.getAmpDefaultEndpoint)(),P=e.default.apiEndpoint?e.default.apiEndpoint:A,D={userId:t===T.default.AMPLITUDE_PROJECT.web3?i:g,deviceId:i,instanceName:t,serverUrl:P,defaultTracking:!0,identityStorage:"localStorage",autocapture:{pageViews:!1,fileDownloads:!1,sessions:!1,formInteractions:!1},appVersion:a.default.getOkGlobal().assetsBuildVersion};return E.init(I,D),E.setSessionId(a.default.getOrGenerateSessionId()),n[t]=E,sessionStorage.channelId&&(0,m.reportIdentifyEvent)(E,sessionStorage.channelId),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(L=>{E.logEvent(...L,{language:a.default.getOkGlobal().locale})}),sessionStorage.ampCacheEvents=""),(0,m.logSignUpComplete)(E),this.events.emit(p.RESOLVE,E),E}};f.default=u},"../monitor/src/common/constants.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/variables.js");let T="";if(m.default.isInBrowser()){let{cdnBaseUrl:_="//static.coinall.ltd"}=m.default.getOkGlobal();T=_}let l={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin",internal_system:"internal_system"},a={[l.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[l.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[l.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[l.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"},[l.internal_system]:{prod:"118100a32c295da61d6c1809bcfe470e",dev:"118100a32c295da61d6c1809bcfe470e"}};f.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:l,AMPLITUDE_KEY_MAP:a,CDN_BASE_URL:T,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,DEBUG_KEY:"a6ywbd8",WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"},API_PATH:{INTERNAL:"/et/priapi/boss",OKLINK:"/et/priapi/lnweb",OKX:"/et/priapi/xweb"},internalCategory:["opboss"]}},"../monitor/src/common/cookie.js":function(S,f,s){s.r(f);let m=l=>{try{let a=document.cookie.split(";"),_=null;for(let e=0;e<a.length;e++){let n=a[e];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(l)===0){_=n.substring(l.length+1,n.length);break}}return _}catch{return null}},T=function(l,a){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},e=a!==null?_.expirationDays:-1;if(e){let r=new Date;r.setTime(r.getTime()+e*24*60*60*1e3),e=r}let n=`${l}=${a}`;e&&(n+=`; expires=${e.toUTCString()}`),n+="; path=/",document.cookie=n};f.default={set:T,get:m}},"../monitor/src/common/event-bus.js":function(S,f,s){s.r(f);class m{constructor(){h(this,"listeners",{})}on(l,a,_){let e=[],n=arguments.length;for(let r=0;r<n;r++)e.push(arguments[r]);e=e.length>3?e.splice(3,e.length-1):[],typeof this.listeners[l]<"u"?this.listeners[l].push({scope:_,callback:a,args:e}):this.listeners[l]=[{scope:_,callback:a,args:e}]}remove(l,a,_){if(typeof this.listeners[l]<"u"){let e=this.listeners[l].length,n=this.listeners[l].slice(0);for(let r=0;r<e;r++){let p=n[r];p.scope==_&&p.callback==a&&this.listeners[l].splice(r,1)}}}has(l,a,_){if(typeof this.listeners[l]<"u"){let e=this.listeners[l].length;if(a===void 0&&_===void 0)return e>0;for(let n=0;n<e;n++){let r=this.listeners[l][n];if((_?r.scope==_:!0)&&r.callback==a)return!0}}return!1}emit(l){if(typeof this.listeners[l]<"u"){let n=this.listeners[l].slice(),r=n.length;for(var a=arguments.length,_=new Array(a>1?a-1:0),e=1;e<a;e++)_[e-1]=arguments[e];for(let p=0;p<r;p++){let u=n[p];if(u&&u.callback){let d=_.concat(u.args);u.callback.apply(u.scope,d)}}}}}f.default=m},"../monitor/src/common/seo.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/utils.js");let T=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex",type:"yandexSEO"},{keyword:"ya.ru",type:"yandexSEO"},{keyword:"dzen.ru",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver",type:"naverSEO"},{keyword:"duckduckgo",type:"duckduckgoSEO"},{keyword:"ecosia",type:"EcosiaSEO"},{keyword:"startpage",type:"startpageSEO"}];f.default={getSeoType(){let l=m.default.getUrlDomain(document.referrer);for(let a=0;a<T.length;a++){let{keyword:_,type:e}=T[a];if(l.indexOf(_)>-1)return e}return""}}},"../monitor/src/common/statex.js":function(S,f,s){s.r(f),s.d(f,{default:function(){return m}});function m(T){let l,a=new Set,_=(u,d)=>{let t=typeof u=="function"?u(l):u;if(t!==l){let g=l;l=d??typeof t!="object"?t:Object.assign({},l,t),a.forEach(i=>i(l,g))}},e=()=>l,p={setState:_,getState:e,subscribe:u=>(a.add(u),()=>a.delete(u)),destroy:()=>a.clear()};return l=T(_,e,p),p}},"../monitor/src/common/utils.js":function(S,f,s){s.r(f);let m=/([^{]+)({.+})?/,T=/^{|}$/g,l=/^['"]|['"]$/g,a=/\/\/([^/]+)\//,_={utm_source:30,utm_medium:20,utm_campaign:100,utm_term:100,utm_content:100,gclid:100,gbraid:100,wbraid:255,fbclid:255,ttclid:128,twclid:64,msclkid:64,af_adset:100,af_adset_id:24,af_ad:100,af_ad_id:24,af_keywords:100,af_c_id:24,clickId:256,groupInvitationCode:20,ircid:30};f.default={serializeParams(e){let n=[],r=Object.keys(e);for(let p=0,u=r.length;p<u;p++){let d=r[p];n.push(`${encodeURIComponent(d)}=${encodeURIComponent(e[d])}`)}return n.join("&")},getUrlDomain(e){let n=e.match(a);return n?n[1]:""},getUrlQuery(e){return this.getParsedUrl(window.location.href).searchParams.get(e)||""},getParsedUrl(e){return new URL(e)},getChannelIdByUserAgent(){let e=/channelId\/(\w+)/;return window.navigator.userAgent?.match?.(e)?.[1]},getChannelContext(e){let n={channelId:"",referralSrc:""};if(!e)return n;let r="",p="";if(e.searchParams.forEach((E,I)=>{let A=I.toLowerCase();A==="channelid"&&(r=E),A==="channelflag"&&(p=E)}),n.channelId=r||p,n.channelId)return n;let u="/join";if(e.pathname.endsWith(u)||!e.pathname.includes(u))return n;let d=e.pathname.split(`${u}/`)[1];if(!d)return n;let t=d.split("/")[0];if(t.startsWith("-"))return n;let g=t.split("-"),i=g[g.length-2]||"";return r=g[g.length-1],r&&(n.referralSrc=i,n.channelId=r),n},getOktsBaggageData(e){if(!e||!e.searchParams)return"";let n=e.searchParams,r=n.get("okts_baggage");if(r)return r;let p=[];return Object.keys(_).forEach(u=>{let d=n.get(u);if(!d)return;let t=this.filterXSS(d),g=_[u];t&&t.length<=g&&p.push(`${u}=${t}`)}),p.join(",")},getGABaggage(){let n=this.filterXSS(this.getCookie("_ga")).match(/^GA1\.\d+\.(.{1,30})$/);return n&&n[1]?`ga_client_id=${n[1]}`:""},getInternalOktsBaggage(){let e=sessionStorage.oktsBaggage,n=this.getGABaggage();return e&&!e.includes("ga_client_id=")&&n?`${e},${n}`:e||n},getFinalOktsBaggage(e){let n=this.getInternalOktsBaggage(),r=sessionStorage.getItem(e);if(!e||!r)return n;let p=`${e}=${r}`;return n?`${p},${n}`:p},getOriginalUrl(e){return e.replace(/([?&])t=\d+(&)?/,(n,r,p)=>r&&p?r===p?"&":"?":"")},setCookie(e,n,r){let p=new Date;p.setTime(p.getTime()+r),document.cookie=`${e}=${encodeURIComponent(n)};expires=${p.toGMTString()};path=/`},getCookie(e){let n=new RegExp(`(^| )${e}=([^;]*)(;|$)`),r=document.cookie.match(n);return r?decodeURIComponent(r[2]):""},parseTarget(e){let n=e.match(m),r={key:"",data:{}};if(n){let p=n[1],u=n[2],d={};u&&u.replace(T,"").split(",").forEach(g=>{let i=g.split(":");i=i.map(A=>A.trim().replace(l,""));let[E,I]=i;d[E]=I}),r.key=p,r.data=d}return r},matchType(e,n){return Object.prototype.toString.call(e)===`[object ${n}]`},isArray(e){return this.matchType(e,"Array")},isObject(e){return this.matchType(e,"Object")},isInArray(e,n){if(Array.prototype.includes)return e.includes(n);for(let r=0,p=e.length;r<p;r++)if(e[r]===n)return!0;return!1},generateUUID(){let e=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let r=(e+this.cryptoRandom()*16)%16|0;return e=Math.floor(e/16),(n==="x"?r:r&3|8).toString(16)})},valueExists(e){return e!=null&&e!==""},passedNamingCheck(e){return!/[^a-z0-9_]/.test(e)},toFixed(e){return Number(e.toFixed(4))},toUnderLineFormat(e){return e.replace(/([A-Z])/g,(n,r,p)=>p===0?`${r.toLowerCase()}`:`_${r.toLowerCase()}`)},filterXSS(e){if(typeof e!="string")return"";let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/g,r=>n[r])},merge(e,n){let r={};return Object.keys({...e,...n}).forEach(p=>{(n[p]!=null||e[p]!=null)&&(r[p]=n[p]??e[p])}),r},cryptoRandom(){if(window?.crypto){let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/Math.pow(2,32)}return Math.random()},base64Id(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let r=0;r<22;++r)n+=e.charAt(Math.floor(this.cryptoRandom()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}},removeKeyFromString(e,n){return typeof e!="string"||typeof n!="string"||!n?e:e.split(",").map(r=>r.trim()).filter(r=>{let p=r.indexOf("=");return(p===-1?r:r.slice(0,p)).trim()!==n}).join(",")}}},"../monitor/src/common/variables.js":function(S,f,s){s.r(f);var m=s("../monitor/src/store.js"),T=s("../monitor/src/common/utils.js");let l="oklink",a="okex",_="OKX_GLOBAL",e="okex_inner",n=typeof window<"u",r=Boolean(typeof window>"u"||typeof w<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:"feature",ASSETS_BUILD_VERSION:"monitor-extension-0.3.0-251114135109",BUILD_TARGET_ENV:"extension"}.SSR_ENV),p=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,u={_expires:{}};if(n){let{ok_monitor:t='{ "_expires": {} }'}=localStorage;u=JSON.parse(t)}let d={};f.default={setEnv(t){let{screen:g}=window,{_tk:i}=localStorage,{systemLanguage:E,language:I}=navigator,{referrer:A}=document;d.site=this.getSiteInfo(),d.lcl=this.getProductLanguage(),d.fpid=T.default.getCookie("fingerprint_id"),A&&(A.length>256&&(A=A.substr(0,256)),d.rf=A),i&&(d.tk=i),d.lan=(E||I).toLowerCase();let P="0x0";if(g){let{width:y,height:L}=g;P=`${y}x${L}`}d.scr=P;let D=T.default.getCookie("first_ref");D&&(d.frf=D.slice(0,256))},getEnv(){return{...d,site:this.getSiteInfo(),lcl:this.getProductLanguage()}},isInApp(){return p},getDeviceId(){let{deviceId:t}=m.default.getState();return t?Promise.resolve(t):window.utils.ont?.getDevId?.()},toLocalStorage(t){let{key:g,value:i,maxAge:E}=t;u[g]=i,u._expires[g]=Date.now()+E,localStorage.ok_monitor=JSON.stringify(u)},removeLocalStorage(t){delete u[t],delete u._expires[t],localStorage.ok_monitor=JSON.stringify(u)},getClientValue(t){let g=sessionStorage.getItem(t);return g||this.getValueFromLocalStorage(t)},getValueFromLocalStorage(t){return Date.now()<u._expires[t]&&u[t]||""},syncUpLocalStorageToSessionStorage(t){let g=this.getValueFromLocalStorage(t);g&&sessionStorage.setItem(t,g)},shouldIgnoreAmpEvent(){return this.isIgnoreEnvironment()},getProductLanguage(){return T.default.getCookie("locale")||this.getOkGlobal().locale},__getOkGlobalSite(){return this.getOkGlobal().site||{}},getSiteInfo(){let t=this.__getOkGlobalSite().sign,g=this.__getOkGlobalSite().subSite;return t===a?!g||g===_?a:g.toLowerCase():t},isOKEx(){return this.__getOkGlobalSite().sign===a},isOKLink(){let t=this.__getOkGlobalSite();return t.sign===l||t.sign===a&&t.linkInOKX},isInternalSystem(){return this.__getOkGlobalSite().sign===e},isWeb3(){return this.__getOkGlobalSite()?.is?.Web3===!0},isInSSR(){return r},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){return window?.navigator?.userAgent?.toLocaleLowerCase()?.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(this.getOkGlobal().envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":this.getOkGlobal().envSign==="prod"},isPreEnv(){return this.getOkGlobal().envSign==="pre"},isIgnoreEnvironment(){if(!this.isInBrowser())return!0;let t=this.getOkGlobal(),g=t.broker&&t.broker.is,i=localStorage.simulatedTrading==="1",{okjp:E}=t.site&&t.site.is||{};return g||i||E===!0},getOkGlobal(){return this.isInBrowser()?window._okGlobal||window.okGlobal||{}:{}},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},isEnableDataFinder(){return this.isIgnoreEnvironment()?!1:this.isProdEnv()||window.location.search.includes("__okdatafinder_test")},isEnableDataFinderDebug(){return this.isProdEnv()||this.isIgnoreEnvironment()?!1:window.location.search.includes("__okdatafinder_test")},getTk(){return p&&window.jsbridge?window.jsbridge.getTK().then(t=>t||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")},getLastActivityTime(){let t=localStorage.getItem("_monitor_last_activity_time"),g=Number(t);return!g||Number.isNaN(g)?0:g},updateLastActivityTime(){let t=Date.now();localStorage.setItem("_monitor_last_activity_time",String(t))},getOrGenerateSessionId(){let t=localStorage.getItem("_monitor_sessionId"),g=this.getLastActivityTime(),i=Date.now();if(t&&i-g<18e5)return t;let E=String(Date.now());return localStorage.setItem("_monitor_sessionId",E),E}}},"../monitor/src/datafinder/constants.js":function(S,f,s){s.r(f),s.d(f,{DATA_FINDER_APPID_MAP:function(){return T},DATA_FINDER_PROJECT:function(){return m}});let m={okx:"okx",web3:"web3",internal_system:"internal_system",oklink:"oklink"},T={[m.okx]:10000010,[m.web3]:10000007,[m.oklink]:10000007,[m.internal_system]:10000009}},"../monitor/src/datafinder/index.js":function(S,f,s){s.r(f),s.d(f,{initDataFinder:function(){return p},initProjectInstance:function(){return r},reportDataFinderEvent:function(){return u}});var m=s("../monitor/src/common/variables.js"),T=s("../monitor/src/monitor.js"),l=s("../monitor/src/datafinder/constants.js"),a=s("../monitor/src/datafinder/libs.js"),_=s("../monitor/src/datafinder/utils.js");let e={},n={},r=async d=>{let t=await m.default.getTk(),g=await m.default.getDeviceId()||"";window.okDataFinder(`${d}.init`,{app_id:l.DATA_FINDER_APPID_MAP[d],channel_domain:T.default.dataFinderApiEndpoint||`${window.location.origin}/priapi/df`,enable_anonymousid:!0,enable_debug:m.default.isEnableDataFinderDebug(),log:m.default.isEnableDataFinderDebug()}),window.okDataFinder(`${d}.setAnonymousId`,g),window.okDataFinder(`${d}.config`,{user_unique_id:d===l.DATA_FINDER_PROJECT.web3?g:t,session_id:m.default.getOrGenerateSessionId(),app_version:m.default.getOkGlobal().assetsBuildVersion,okx_device_id:g}),window.okDataFinder(`${d}.start`),e[d]=!0,delete n[d]},p=async d=>{(!window?.okDataFinder||window.okDataFinder.q)&&await(0,a.default)();let t=(0,_.getDataFinderProject)(d);return n[t]?n[t]:e[t]?Promise.resolve():(n[t]=r(t),n[t])},u=async(d,t,g)=>{let i=(0,_.getDataFinderProject)(g);e[i]||await p(g);let E=localStorage.getItem("_monitor_sessionId"),I=m.default.getOrGenerateSessionId();E!==I&&window.okDataFinder(`${i}.config`,{session_id:I}),m.default.updateLastActivityTime(),window.okDataFinder(`${i}.config`,{language:m.default.getOkGlobal().locale});let A={...t,site:m.default.getSiteInfo()};window.okDataFinder(`${i}.${d}`,A)}},"../monitor/src/datafinder/libs.js":function(S,f,s){s.r(f),s.d(f,{default:function(){return p},loadDataFinderJs:function(){return r},setupDataFinder:function(){return n}});var m=s("../monitor/src/common/variables.js"),T=s("../monitor/src/common/event-bus.js");let l=!1,a=new T.default,_="LOAD_SUCCESS",e="LOAD_FAILED";function n(){let u="okDataFinder";if(window.LogAnalyticsObject=u,!window[u]){let d=function(){d.q.push(arguments)};d.q=d.q||[],window[u]=d}window[u].l=+new Date}function r(){return new Promise((u,d)=>{let t=()=>{a.emit(_),u()},g=L=>{a.emit(e),d(L)};l=!0,n();let{envSign:i,cdnBaseUrl:E}=m.default.getOkGlobal(),I=document.createElement("script");I.type="text/javascript",I.crossOrigin="anonymous",I.async=!0;let A="";switch(i){case"dev":A="cdndev";break;case"pre":A="cdnpre";break;case"daily":A="cdn";break;case"prod":A="cdn";break;default:A="cdn";break}let P="collect-pure-v5.2.9.js",D="collect-rangers-v5.2.9.js";m.default.isInExtension(),I.src=`./scripts/lib/${P}`,I.integrity="sha384-lpjOyUtkqNFTqLx2vLV9bia4eqVhhvlQPqjvoRmxp5WPVKhA4JDa6Rm5wfSZEm/6",I.onload=function(){if(l=!1,!window.okDataFinder||typeof window.okDataFinder!="function")return g("[DataFinder] Error: could not load SDK");t()},I.onerror=function(L){l=!1,g(L)};let y=document.getElementsByTagName("script")[0];y.parentNode.insertBefore(I,y)})}async function p(){if(l)return new Promise((u,d)=>{a.on(_,t=>{u(t)}),a.on(e,t=>{d(t)})});await r()}},"../monitor/src/datafinder/utils.js":function(S,f,s){s.r(f),s.d(f,{getDataFinderProject:function(){return l}});var m=s("../monitor/src/common/variables.js"),T=s("../monitor/src/datafinder/constants.js");let l=a=>a&&a in T.DATA_FINDER_PROJECT?a:m.default.isWeb3()||m.default.isOKLink()?T.DATA_FINDER_PROJECT.web3:m.default.isInternalSystem()?T.DATA_FINDER_PROJECT.internal_system:T.DATA_FINDER_PROJECT.okx},"../monitor/src/de-duplicate.js":function(S,f,s){s.r(f),s.d(f,{shouldReport:function(){return a}});let m={},T,l=_=>{T!==void 0&&clearTimeout(T),T=setTimeout(()=>{m={},T=void 0},_+500)},a=function(_){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,n=typeof _=="string"?_:_.action||_.anchor,r=+new Date,p=m[n]||0;return r-p<e?!1:(l(e),m[n]=r,!0)}},"../monitor/src/error.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/variables.js");let T=m.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];f.default={getErrorInfo(l){let{message:a,filename:_,lineno:e,colno:n,error:r}=l,p="";r&&r.stack?(p=r.stack,p.indexOf("@")!==-1&&(p=`${a} 
\r ${p}`)):(r||a)&&(p=`ThrowError: ${JSON.stringify(r||a)} 
\r at ${_}: ${e}: ${n}`);let u=encodeURIComponent(window.location.href);return{msg:a,file:_,line:e,col:n,stack:p,url:u}},isReported(l){let{file:a,line:_,col:e}=l,n=`${a}__${_}__${e}`;return T.includes(n)},rememberError(l){let{file:a,line:_,col:e}=l,n=`${a}__${_}__${e}`;T.unshift(n),T.length>50&&T.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(T)},0)}}},"../monitor/src/global/attrs.js":function(S,f,s){s.r(f);var m=s("../monitor/src/global/click.js"),T=s("../monitor/src/global/expose.js"),l=s("../monitor/src/common/constants.js");let{Configs:a}=l.default;f.default={listen(_){let e=n=>{_.logEvent({...n,category:"ok"})};this.preprocess(),m.default.listen(e,this),T.default.listen(e,this)},preprocess(){document.querySelectorAll(`[${a.ATTR_LISTEN}]`).forEach(e=>{let n=e.getAttribute(a.ATTR_LISTEN),r=n.indexOf(":");if(r>-1){let p=n.substring(0,r).trim(),u=n.substring(r+1).trim();p.split("+").forEach(t=>{e.setAttribute(`data-${t.trim()}`,u)}),e.removeAttribute(a.ATTR_LISTEN)}})}}},"../monitor/src/global/click.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/utils.js"),T=s("../monitor/src/common/constants.js");let{Actions:l,Configs:a}=T.default;f.default={listen(_,e){document.addEventListener("click",n=>{let{target:r}=n;r.getAttribute(a.ATTR_LISTEN)&&e.preprocess();let u=r.getAttribute(a.ATTR_CLICK);if(u){let d=m.default.parseTarget(u),{key:t,data:g}=d;t&&_({target:t,action:l.CLICK,params:g,extras:{area:g.area}})}})}}},"../monitor/src/global/expose.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/utils.js"),T=s("../monitor/src/common/constants.js");let l={},{Actions:a,Configs:_}=T.default;f.default={listen(e){this.trackFn=e;let n={threshold:[.5,1]},r=new window.IntersectionObserver(this.onSectionChange.bind(this),n);document.querySelectorAll(`[${_.ATTR_EXPOSE}]`).forEach(u=>{r.observe(u)}),this.observer=r},onSectionChange(e){e.forEach(n=>{let{target:r,isIntersecting:p}=n,u=r.getAttribute(_.ATTR_EXPOSE),d=m.default.parseTarget(u),{key:t,data:g}=d,i=Number(n.time.toFixed(2));if(p){let E=setTimeout(()=>{let I=l[t],A=r.getBoundingClientRect(),{innerHeight:P,innerWidth:D}=window,{top:y,bottom:L,left:x,right:R}=A;if((y>=0&&y<=P||L>=0&&L<=P)&&(x>=0&&x<=D||R>=0&&R<=D)){let{area:K,elementType:F,actionType:H}=g;delete g.area,delete g.elementType,delete g.actionType,this.trackFn({target:t,action:a.EXPOSE,params:{...g,time:i},extras:{area:K},actionType:H||"Show",elementType:F,anchor:F?t:""}),this.observer.unobserve(r),I.forEach(X=>{window.clearTimeout(X)}),delete l[t]}else I.shift()},_.EXPOSE_DURATION);l[t]||(l[t]=[]),l[t].push(E)}})}}},"../monitor/src/lib/libs-amplitude.js":function(S,f,s){s.r(f),s.d(f,{default:function(){return r}});var m=s("../monitor/src/common/variables.js"),T=s("../monitor/src/common/event-bus.js");let l=!1,a=new T.default,_="LOAD_SUCCESS",e="LOAD_FAILED";function n(){return new Promise((p,u)=>{let d=()=>{a.emit(_),p()},t=D=>{a.emit(e),u(D)};l=!0;let{envSign:g,cdnBaseUrl:i}=m.default.getOkGlobal(),E=document.createElement("script");E.type="text/javascript",E.crossOrigin="anonymous",E.async=!0;let I="";switch(g){case"dev":I="cdndev";break;case"pre":I="cdnpre";break;case"daily":I="cdn";break;case"prod":I="cdn";break;default:I="cdn";break}let A="amplitude-analytics-browser-2.11.8.js";m.default.isInExtension(),E.src=`./scripts/lib/${A}`,E.integrity="sha384-xqvDNRHTNTbqEsaCHJBuL+ohIAflZIyjUW7MnSD/Bl20mW11ri9zTr8XDYF2MiS2",E.onload=function(){if(l=!1,!window.amplitude)return t("[Amplitude] Error: could not load SDK");d()},E.onerror=function(D){l=!1,t(D)};let P=document.getElementsByTagName("script")[0];P.parentNode.insertBefore(E,P)})}async function r(){if(l)return new Promise((p,u)=>{a.on(_,d=>{p(d)}),a.on(e,d=>{u(d)})});await n()}},"../monitor/src/logger.js":function(S,f,s){s.r(f),s.d(f,{default:function(){return p}});var m=s("../monitor/src/common/constants.js"),T=s("../monitor/src/common/cookie.js"),l=s("../monitor/src/common/utils.js"),a=s("../monitor/src/common/variables.js"),_=s("../monitor/src/monitor.js");let e=null,n=!1;class r{constructor(d){a.default.setEnv(d),this._category=d.product}logPV(){if(n)return Promise.resolve();let d={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return n=!0,this.sendLogs(d)}logEvent(d){let t={},{category:g,action:i,target:E,params:I,extras:A,_m:P,anchor:D,elementType:y,actionType:L,tk:x}=d;if(Object.assign(t,{_ct:g,_act:i,_lb:encodeURIComponent(E||""),_anchor_en_name:encodeURIComponent(D||""),_element_type:encodeURIComponent(y||""),_action_type:encodeURIComponent(L||""),...this._getCommonData()}),t._tk=x||t._tk,l.default.isArray(I)){let R=0,U=0;I.forEach((K,F)=>{if(l.default.isObject(K)){let{value:H,random:X}=K,se=encodeURIComponent(H);X?t[`_unlist${U++}`]=se:t[`_reser${R++}`]=se}else t[`_reser${F}`]=encodeURIComponent(K)})}else if(l.default.valueExists(I)){let R=I;l.default.isObject(I)&&(R=JSON.stringify(I));let U=encodeURIComponent(R);t._v=U,t._reser0=U}if(A){A.page=encodeURIComponent(window.location.href);let R={};Object.keys(A).forEach(U=>{R[`__${U}`]=A[U]}),Object.assign(t,R)}return P&&(t._m=P),this.sendLogs(t)}_getCommonData(){let d={...a.default.getEnv()};localStorage._tk&&(d.tk=localStorage._tk);let{src:t}=sessionStorage,g=a.default.getClientValue("pageId"),i=a.default.getClientValue("channelId"),E=a.default.getClientValue("ref"),{deviceId:I=l.default.base64Id(),eventId:A=1,sequenceNumber:P=1}=JSON.parse(T.default.get("_monitor_extras")||"{}");T.default.set("_monitor_extras",JSON.stringify({deviceId:I,eventId:A+1,sequenceNumber:P+1}));let D=JSON.stringify({_amp_rejected:l.default.isTargetingCookiesRejected(),_device_id:I,_event_id:A,_sequence_number:P,_uuid:l.default.generateUUID()}),y={_cid:i,_web3_ref:E,_pgid:g,_source:t,_session_id:a.default.getOrGenerateSessionId(),_page_url:encodeURIComponent(window.location.href.slice(0,1024)),_initial_traffic_attribution:l.default.getInternalOktsBaggage(),_extras:encodeURIComponent(D)};return Object.keys(d).forEach(L=>{y[`_${L}`]=encodeURIComponent(d[L])}),y}sendLogs(d){let t=[];if(Object.keys(d).forEach(g=>{let i=d[g];l.default.valueExists(i)?t.push(`${g}=${i}`):delete d[g]}),a.default.isDevTestEnv()){let{console:g}=window;return g.groupCollapsed(`dev monitor: ${d._ct} > ${d._act}`),g.log(decodeURIComponent(JSON.stringify(d,null,2))),g.groupEnd(),Promise.resolve()}return a.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(g=>{if(g){let i=`_tk=${encodeURIComponent(g)}`,E=t.findIndex(I=>/^_tk/.test(I));E>-1?t[E]=i:t.push(i)}return this.addClientInfo(t.join("&"))}).catch(()=>this.addClientInfo(t.join("&"))):this.addClientInfo(t.join("&"))}addClientInfo(d){let t=`&_ts=${Date.now()}&_r=${Math.floor(l.default.cryptoRandom()*2147483648)}`,g=`${d}${t}`;return a.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(i=>{let E=i?`&_app_info=${encodeURIComponent(i)}`:"";return g=`${d}${E}${t}`,this.sendRequest(g)}).catch(i=>this.sendRequest(g)):this.sendRequest(g)}getApiPath(){return m.default.internalCategory.includes(this._category)?m.default.API_PATH.INTERNAL:a.default.isOKLink()?m.default.API_PATH.OKLINK:m.default.API_PATH.OKX}async sendRequest(d){let t=await a.default.getDeviceId(),g=`_mv=${m.default.DEBUG_KEY}&_uid=${encodeURIComponent(t)}&${d}`;return a.default.updateLastActivityTime(),new Promise((i,E)=>{let I=a.default.isInExtension()&&!a.default.isMiniApp(),A=this.getApiPath();if(navigator.sendBeacon&&!I)navigator.sendBeacon(A,g),i();else{let P=I?_.default.dwApiEndpoint||`https://www.oklink.com${m.default.API_PATH.OKX}`:A,D=new XMLHttpRequest;D.open("POST",P),D.setRequestHeader(m.default.REQUEST_HEADERS.deviceId,t),D.onload=()=>D.status!==200?E(new Error(`Error ${D.status}:${D.statusText}`)):i(),D.onerror=()=>{E(new Error(`Error ${D.status}: ${D.statusText}`))},D.send(g),setTimeout(()=>{i()},150)}})}}function p(u){return e||(e=new r(u),e)}},"../monitor/src/monitor.js":function(S,f,s){s.r(f),s.d(f,{default:function(){return t}});var m=s("../monitor/src/common/utils.js"),T=s("../monitor/src/common/constants.js"),l=s("../monitor/src/common/variables.js"),a=s("../monitor/src/error.js"),_=s("../monitor/src/logger.js"),e=s("../monitor/src/global/attrs.js"),n=s("../monitor/src/amplitude.js"),r=s("../monitor/src/store.js"),p=s("../monitor/src/de-duplicate.js"),u=s("../monitor/src/datafinder/index.js");let d=!1;class t{constructor(i){l.default.isInSSR()||(this.commonParams=i.commonParams||{},this._logger=(0,_.default)(i),this._category=i.product,i.withPV&&this.delayReportPV(),d||(this._initEventListener(),d=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(i){t.apiEndpoint=i}setDWApiEndpoint(i){t.dwApiEndpoint=i}setDataFinderApiEndpoint(i){t.dataFinderApiEndpoint=i}report(i){let{type:E,value:I}=i;if(l.default.isInSSR())return Promise.resolve();let A=I;return(m.default.isObject(A)||m.default.isArray(A))&&(A=JSON.stringify(A)),this._logger.logEvent({category:"performance",action:E,params:A})}logPV(){return this._logger.logPV()}logDataFinder(i,E,I){return l.default.isInSSR()?Promise.resolve():(0,u.reportDataFinderEvent)(i,E,I)}logAmplitudeEvent(i,E,I){if(l.default.isInSSR()||l.default.shouldIgnoreAmpEvent())return Promise.resolve();let A="",P=!1;m.default.isObject(I)&&(A=I.ampProject,P=I.ignoreBackUp);let D={};for(let y in E)Object.prototype.hasOwnProperty.call(E,y)&&(D[y]=E[y]);if(D.monitor_after_navigation){delete D.monitor_after_navigation;let y=JSON.parse(sessionStorage.ampCacheEvents||"[]");return y.push([i,D]),sessionStorage.ampCacheEvents=JSON.stringify(y),Promise.resolve()}return n.default.getInstance(A).then(y=>{let L=l.default.getOrGenerateSessionId();String(y.getSessionId())!==L&&y.setSessionId(L),l.default.updateLastActivityTime(),y.logEvent(i,{...D,site:l.default.getSiteInfo()},{language:l.default.getOkGlobal().locale}),P||this.act(i,E,{isSyncAMP:!1})})}resetAmplitudeUser(){return l.default.isInSSR()?Promise.resolve():n.default.getInstance().then(i=>(i.reset(),Promise.resolve()))}track(i,E,I,A){if(l.default.isInSSR())return Promise.resolve();let P={category:this._category,action:I,target:E,params:A,extras:{area:i}};if(m.default.isObject(i)){let{area:D,action:y,target:L,params:x}=i;Object.assign(P,{action:y,target:L,params:x,extras:{area:D}})}return this._logger.logEvent(P)}act(i){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return l.default.isInSSR()||!(0,p.shouldReport)(i)?Promise.resolve():new Promise((A,P)=>{setTimeout(()=>{this._act(i,E,I).then(A,P)},0)})}async _act(i){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:A,...P}=this.commonParams||{},D={web_mode_okx:m.default.isInArray(T.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},L=Object.assign({},l.default.isOKEx()?D:{}),x=I?.tk||A,R={category:this._category,params:E,_m:"1"};m.default.isObject(E)&&(R.params=m.default.merge({...P,...L},E),L=m.default.merge(l.default.isOKLink()?{...P,...L}:L,E));let U;typeof i=="string"?(U=i,R.action=i):(U=i.action||i.anchor,R.action=U,R.anchor=i.anchor,R.actionType=i.actionType,R.elementType=i.elementType,R={...R,params:m.default.merge(R.params,i.params||{})},x=i.tk||x,L=m.default.merge(L,i.params)),R.tk=x;let{needDurationActions:K,needDurationActionParams:F,actionTriggerTimes:H,setActionTriggerTimes:X,setNeedDurationActionParams:se}=r.default.getState();if(l.default.isEnableAMP()&&I?.isSyncAMP){let ue=i?.ampProject;this.logAmplitudeEvent(U,L,{ampProject:ue,ignoreBackUp:!0})}if(m.default.isInArray(K,U))return H[U]=Date.now(),X(H),F[U]=R,se(F),Promise.resolve("The event will be reported when the page is closed");if(l.default.isEnableDataFinder()&&i?.uploadCloudPlatform){let ue=L||{},It=i?.ampProject;this.logDataFinder(U,ue,It)}return this._logger.logEvent(R)}_initEventListener(){window.addEventListener("load",()=>{e.default.listen(this._logger)}),window.addEventListener("error",i=>{let E=a.default.getErrorInfo(i);a.default.isReported(E)||(this._logger.logEvent({category:"error",action:"report",extras:E}),a.default.rememberError(E))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:i,needDurationActionParams:E,actionTriggerTimes:I,setNeedDurationActions:A,setNeedDurationActionParams:P,setActionTriggerTimes:D}=r.default.getState();i.length&&i.forEach(y=>{E[y].params.duration=Date.now()-I[y],this._logger.logEvent(E[y])}),A([]),P({}),D({})})}initABTest(i){let E="ab_experiment";i?.exper_flagKey&&i?.exper_variant&&(Object.assign(this.commonParams,i),this.act(E))}setCommonParams(i){this.commonParams={...this.commonParams,...i}}triggerReportDuration(i){let{needDurationActions:E,setNeedDurationActions:I}=r.default.getState();m.default.isInArray(E,i)||(E.push(i),I(E))}}},"../monitor/src/store.js":function(S,f,s){s.r(f);var m=s("../monitor/src/common/statex.js");let T=(0,m.default)(l=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:a=>l(()=>({deviceId:a})),setNeedDurationActions:a=>l(()=>({needDurationActions:a})),setNeedDurationActionParams:a=>l(()=>({needDurationActionParams:a})),setActionTriggerTimes:a=>l(()=>({actionTriggerTimes:a}))}));f.default=T},"../monitor/src/web.js":function(S,f,s){s.r(f);var m=s("../monitor/src/amplitude.js"),T=s("../monitor/src/common/constants.js"),l=s("../monitor/src/common/seo.js"),a=s("../monitor/src/common/utils.js"),_=s("../monitor/src/common/variables.js"),e=s("../monitor/src/monitor.js"),n=s("../monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:r}=T.default,p=(u,d)=>{if(_.default.isInSSR())return;let{pathname:t}=window.location;sessionStorage.channelId=u,_.default.toLocalStorage({key:"channelId",value:u,maxAge:r}),d?(sessionStorage.referralSrc=d,_.default.toLocalStorage({key:"referralSrc",value:d,maxAge:r})):(sessionStorage.removeItem("referralSrc"),_.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=t,_.default.toLocalStorage({key:"pageId",value:t,maxAge:r})};f.default={monitor:{get amplitude(){return _.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((d,t)=>{t("Currently not a browser environment!")})}}:m.default},newInstance(u){return _.default.isInSSR()?{setApiEndpoint(){},setDWApiEndpoint(){},setDataFinderApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logDataFinder(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_act(){return Promise.resolve()},_initEventListener(){},initABTest(){},setCommonParams(){},triggerReportDuration(){},delayReportPV(){}}:new e.default(u)},saveChannelId(u){p(u)},getChannelId(){return sessionStorage.channelId},clearChannelId(){sessionStorage.removeItem("channelId"),_.default.removeLocalStorage("channelId")},getOktsBaggage(){return a.default.getFinalOktsBaggage(_.default.isWeb3()?"ref":"channelId")},getRef(){return sessionStorage.ref},setDeviceId(u){let{setDeviceId:d}=n.default.getState();d(u)},getChannelContextFromUrl(u){return a.default.getChannelContext(a.default.getParsedUrl(u))}},parseUrl(){let u=a.default.getParsedUrl(window.location.href),d=u.searchParams.get("src");d&&sessionStorage.setItem("src",d),_.default.isWeb3()?this.parseRef(u):this.parseChannelId(u)},parseChannelId(u){let d=a.default.getChannelIdByUserAgent(),t=l.default.getSeoType(),g=a.default.getChannelContext(u),i=g.channelId,E=g.referralSrc,I=!1;if(_.default.isInDesktop()&&d&&(i=d,E="",I=!0),!i&&t&&(i=t,I=!0),i=a.default.filterXSS(i),this.processOktsBaggage({urlObject:u,attributionKey:"channelId",attribution:i,shouldClearOktBaggage:I}),i){p(i,E);return}_.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(_.default.syncUpLocalStorageToSessionStorage("referralSrc"),_.default.syncUpLocalStorageToSessionStorage("pageId"))},processOktsBaggage(u){let{urlObject:d,attributionKey:t,attribution:g,shouldClearStorage:i}=u;try{if(i){sessionStorage.removeItem("oktsBaggage"),_.default.removeLocalStorage("oktsBaggage");return}if(g){let E=a.default.getOktsBaggageData(d),I=a.default.removeKeyFromString(E,t);_.default.toLocalStorage({key:"oktsBaggage",value:I,maxAge:r})}_.default.syncUpLocalStorageToSessionStorage("oktsBaggage")}catch(E){console.log("Error processing oktsBaggage:",E)}},parseRef(u){let d="";u.searchParams.forEach((g,i)=>{i.toLowerCase()==="ref"&&(d=g)});let t="/join/";if(!d&&u.pathname.includes(t)){let g=u.pathname.split(t)[1];g&&(d=g.split("/")[0])}d=a.default.filterXSS(d),d&&_.default.toLocalStorage({key:"ref",value:d,maxAge:r}),this.processOktsBaggage({urlObject:u,attributionKey:"ref",attribution:d,shouldClearStorage:!1}),_.default.syncUpLocalStorageToSessionStorage("ref")},init(){_.default.isInSSR()||(this.parseUrl(),!a.default.getCookie("first_ref")&&document.referrer&&a.default.setCookie("first_ref",document.referrer.slice(0,256),r),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(u){p(u)}}}},o={};function c(S){var f=o[S];if(f!==void 0)return f.exports;var s=o[S]={exports:{}};return b[S](s,s.exports,c),s.exports}(function(){c.d=function(S,f){for(var s in f)c.o(f,s)&&!c.o(S,s)&&Object.defineProperty(S,s,{enumerable:!0,get:f[s]})}})(),function(){c.o=function(S,f){return Object.prototype.hasOwnProperty.call(S,f)}}(),function(){c.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}}();var C={};return function(){c.r(C);var S=c("../monitor/src/web.js");S.default.init(),C.default=S.default.monitor}(),C=C.default,C}()})});v();O();v();O();v();O();v();O();var ut=J(Y());function Tt({children:b,...o}){return ut.default.createElement(we,{fetchConfig:qe.fetchConfig,...o},b)}v();O();v();O();Le();v();O();var le=[Z.BTC_MAINNET,Z.TON_MAINNET];v();O();var mt=(b,o)=>{let c=b.split(".").map(Number),C=o.split(".").map(Number),S=Math.max(c.length,C.length);for(let f=0;f<S;f++){let s=c[f]||0,m=C[f]||0;if(s>m)return 1;if(s<m)return-1}return 0};var te=class{constructor(){h(this,"commonStore",null);h(this,"userForbiddenWithBridge",fe);h(this,"setUserForbiddenBridge",o=>{this.userForbiddenWithBridge=o});h(this,"defaultWalletConfig",Ue);h(this,"walletConfig",this.defaultWalletConfig);h(this,"hasInitWalletInfo",!1);h(this,"setHasInitWalletInfo",o=>{this.hasInitWalletInfo=o});h(this,"referralInfo",{refCode:"",referralCommissionAddress:""});h(this,"setReferralInfo",o=>{this.referralInfo={refCode:o?.refCode||"",referralCommissionAddress:o?.referralCommissionAddress||""}});h(this,"chainId",j);h(this,"setChainId",o=>{this.chainId=o});h(this,"fromChainId",j);h(this,"setFromChainId",o=>{this.fromChainId=o});h(this,"addressType","");h(this,"setAddressType",o=>{this.addressType=o});h(this,"walletSupportMev",!1);h(this,"setWalletSupportMev",o=>{this.walletSupportMev=o});h(this,"checkOkxVersion",async()=>{let o="2.82.31",c=this.walletConfig.isOkxWallet;if(this.isConnectedWallet&&c&&window?.okxwallet?.getVersion){let C=await window.okxwallet.getVersion(),f=mt(C,o)>=0;this.setWalletSupportMev(f)}else this.setWalletSupportMev(!1)});h(this,"signWalletChainId",Z.ETHEREUM_MAINNET)}getDeviceId(){}getChainId(){}get scanAppType(){throw new Error("scanAppType is not defined")}get walletType(){throw new Error("walletType is not defined")}get address(){return j}get computedForbiddenBridge(){let{computedIsCrossChain:o}=$(this.rootStore,"fromToStore",{});return o?this.userForbiddenWithBridge:fe}get computedAccountId(){let{walletConfig:o}=this;return o.walletId}setWalletConfig(o={}){o.walletId!==this.walletConfig.walletId&&(this.referralInfo={refCode:"",referralCommissionAddress:""}),this.walletConfig=o}getAddressByChainId(){}get isConnectedWallet(){return!!this.walletConfig.walletId}get computedNonsupportChain(){return!this.isConnectedWallet||!q(this.fromChainId)?!1:!this.address}get computedAccountWalletAddresses(){return me($(this,"walletConfig.address",[])).join(",")||this.address}get computedAccountWalletAddressesArray(){return me($(this,"walletConfig.address",[]))||[this.address]}get computedMultiAddresses(){let o=[],c=[];return le.forEach(C=>{let S=this.getAddressByChainId(C);S&&(o.push(C),c.push(S))}),{targetChainId:o.join(),targetWalletAddress:c.join()}}setSignWalletChainId(o){this.signWalletChainId=o}get computedSignWalletAddress(){let o=this.computedAccountWalletAddressesArray;return o?.length===1?o[0]:this.getAddressByChainId(this.signWalletChainId)}cleanWalletConfig(){this.walletConfig=this.defaultWalletConfig,this.hasInitWalletInfo=!1}};v();O();v();O();function ne(b=[],o=[]){let c={};b.forEach(S=>{c[S]=z});let C={};return o.forEach(S=>{C[S]=be}),{...c,...C}}var ft=ne(["walletConfig","chainId","hasInitWalletInfo","fromChainId","addressType","referralInfo"],["computedAccountId","isConnectedWallet","computedNonsupportChain","computedAccountWalletAddresses","computedAccountWalletAddressesArray","address","computedMultiAddresses"]);var Se=class extends te{constructor(c){super();h(this,"formatWalletType",()=>{let{walletInfo:c}=B,{isHARDWARE:C,isMNEMONIC:S,isMPC:f,isPRIVATE:s}=c?.walletType||{};return C?Q.HARDWARE:S?Q.MNEMONIC:f?Q.MPC:s?Q.PRIVATE_KEY:null});h(this,"formatWalletAccount",c=>{let C=Object.values(c.account);return{...c,OKXWalletType:this.formatWalletType(),address:C}});h(this,"keyringIdentityTypeEnum",{});h(this,"walletList",[]);h(this,"addressBookList",[]);h(this,"hasInitWalletInfo",!1);h(this,"getAddressByChainId",c=>{if(!q(c))return j;let C=this.getWalletChainName(c);return this.walletConfig.account?.[C]||j});this.rootStore=c,this.commonStore=c.commonStore,ie(this,ft)}async getDeviceId(){let{devid:c}=await B.localStore.get("devid");return c}getCurrentChainAddress(c){let C=this.rootStore?.fromToStore.from.chainId;if(!q(C))return j;let S=this.getWalletChainName(C);return c.account[S]}getWalletChainName(c){return B.getNetWorkName(c)}replaceAddressByType(c){if(this.addressType){let C={};return le.forEach(S=>{let f=this.getWalletChainName(S);if(c.account?.[f]){let m=c.accountsMap?.[f]?.[this.addressType]?.address;m&&(C[f]=m)}}),{...c,account:{...c.account,...C}}}return c}setWalletConfig(c){this.walletConfig=this.formatWalletAccount(this.replaceAddressByType(c)),this.hasInitWalletInfo=!0}webSwapHistoryDetailViewMore(){}setAddressBookList(c){this.addressBookList=c}setWalletList(c){this.walletList=c.map(C=>C.walletId===this.computedAccountId?this.replaceAddressByType(C):C)}setKeyringIdentityTypeEnum(c){this.keyringIdentityTypeEnum=c}get address(){return this.getAddressByChainId(this.fromChainId)}},On=Se;v();O();v();O();var Ce=J(Y());Le();v();O();var Rn={FROM:"FROM",TO:"TO"},wn={COMMON:"COMMON",COLLECTION:"COLLECTION"},W={COLLECT_LIST:"COLLECT_LIST",ALL_NETWORK:"ALL_NETWORK",CHAIN_LIST:"CHAIN_LIST",SEARCH:"SEARCH",ALL_TOKENS:"ALL_TOKENS",HISTORY_LIST:"HISTORY_LIST"},Ct={[W.COLLECT_LIST]:{[k.SWAP]:pe,[k.LIMIT_ORDER]:pe,[k.BRIDGE]:Je},[W.ALL_NETWORK]:{[k.SWAP]:Ge,[k.LIMIT_ORDER]:Ve,[k.BRIDGE]:He},[W.SEARCH]:{[k.SWAP]:Ye,[k.LIMIT_ORDER]:Xe,[k.BRIDGE]:ze},[W.CHAIN_LIST]:{[k.ORDERS]:_e,[k.SWAP]:_e,[k.LIMIT_ORDER]:$e,[k.BRIDGE]:Fe},[W.ALL_TOKENS]:{[k.SWAP]:he,[k.LIMIT_ORDER]:he,[k.BRIDGE]:je},[W.HISTORY_LIST]:{[k.SWAP]:Be,[k.LIMIT_ORDER]:Ne,[k.BRIDGE]:We}},Te=(b,o)=>Ct[b]?.[o]??"";var oe=class{constructor(o){h(this,"watchTopDomRef",(0,Ce.createRef)());h(this,"watchBottomDomRef",(0,Ce.createRef)());h(this,"rootStore",null);h(this,"userUniqueId",et.initUniqueId());h(this,"chainListFreshCount",0);h(this,"chainList",[]);h(this,"setChainList",o=>{this.chainList=o,this.chainListFreshCount+=1});h(this,"transactionLoading",!1);h(this,"setTransactionLoading",o=>{this.transactionLoading=o});h(this,"nowCurrencyUnit",{});h(this,"tokenModalVisible",!1);h(this,"safemoonSlippage",0);h(this,"getChainListUrl",({isHistory:o,currentTab:c})=>{let C=Te(W.CHAIN_LIST,this.currentTab||c);return o&&(C=Te(W.CHAIN_LIST,c||this.currentTab)),C});h(this,"fetchChainList",async({businessLine:o=1,isLimit:c=!1,isHistory:C=!1,currentTab:S,chainIdConfig:f={}})=>{if(Re())return[];let s=this.getChainListUrl({isHistory:C,isLimit:c,currentTab:S}),[m,T]=await ae(ee.get(s,{params:{businessLine:c?xe.LIMIT_ORDER:o,...f}}));if(m)return G.error(V.CHAIN_LIST_LOAD_ERROR,{error:m}),[];let l=T?.data||[];return l.length||G.info(V.TOKEN_LIST_FETCH_RESULT_EMPTY,{data:{isLimit:c,isHistory:C,currentTab:S}}),!C&&this.setChainList(l),this.setCurrentTabChainList({[S||this.currentTab]:l}),l});h(this,"currentTabChainList",{});h(this,"setCurrentTabChainList",o=>{this.currentTabChainList={...this.currentTabChainList,...o}});h(this,"getTradeType",()=>this.rootStore?.fromToStore?.computedIsCrossChain?ge.MULTI:ge.SINGLE);h(this,"globalMessages",null);h(this,"setGlobalMessage",o=>{this.globalMessages=o});h(this,"cleanGlobalMessage",()=>{this.globalMessages=null});h(this,"socketStatus",!1);h(this,"balancePushSocketStatus",!1);h(this,"resetFromToByTabChange",!1);h(this,"setResetFromToByTabChange",o=>{this.resetFromToByTabChange=o});h(this,"portal",N.DEX);h(this,"setPortal",o=>{this.portal=o});h(this,"currencyConversion",o=>{let{usdToThisRate:c}=this.nowCurrencyUnit,C=Ee.BigNumber(o);return!c||C.isNaN()?"":C.multipliedBy(c)});h(this,"currencyReConversion",o=>{let{usdToThisRate:c}=this.nowCurrencyUnit,C=Ee.BigNumber(o);return!c||C.isNaN()?"":C.dividedBy(c).toString()});h(this,"isSensitiveChain",o=>this.computedSensitiveChainIds.some(c=>String(c)===String(o)));h(this,"getTokenAddress",o=>it(o,this.isSensitiveChain(o?.chainId)));h(this,"equalsChainId",(o,c)=>at(o,c));h(this,"equalsToken",(o,c)=>{let C=this.isSensitiveChain(o?.chainId);return lt(o,c,C)});h(this,"fromFillToken",!1);h(this,"currentTab","");h(this,"setCurrentTab",(o,c)=>{this.currentTab!==o&&(this.setResetFromToByTabChange(!0),this.rootStore?.fromToStore?.clearFromTo()),this.currentTab=o,this.fromFillToken=!!c});h(this,"forceUpdateFromToByHash",0);h(this,"forceUpdateFromTo",()=>{this.forceUpdateFromToByHash+=1});h(this,"isFirstInit",!0);h(this,"visibleAddFunds",!1);h(this,"setAddFundsVisible",o=>{this.visibleAddFunds=o});h(this,"currencyConversionWithSymbol",(o,c={})=>{let C=this.currencyConversion(o).toString(),S=this.computedNowCurrencySymbol;return Ze(C,S,c)});h(this,"disclaimerVisible",dt());h(this,"setDisclaimerVisible",o=>{this.disclaimerVisible=o});h(this,"buySellAmountChangedCount",0);h(this,"triggerBuySellAmountChanged",()=>{this.buySellAmountChangedCount+=1});h(this,"tradeTokenChangeMsg",{fromModule:"",tradeDirection:"",token:{},msgId:""});h(this,"sendTradeTokenChangeMsg",({fromModule:o,tradeDirection:c,token:C})=>{this.tradeTokenChangeMsg={fromModule:o,tradeDirection:c,token:C,msgId:`${o}-${c}-${new Date().getTime()}`}});this.rootStore=o,ct&&this.setPortal(N.LEDGER)}setChainType(){}get computedReserveGas(){let{chainList:o}=this,c=$(this.rootStore,"fromToStore.from.chainId");return o.find(S=>Number(S.chainId)===Number(c))?.reserveGas||""}getChainByID(o){return this.chainList.find(c=>(this.computedCurrentTabIsLimit||c.chainUsed)&&c.chainId===Number(o))}getUserUnit(){}get computedRealSlippageValue(){return $(this,"rootStore.slippageStore",{}).computedRealSlippageValue||0}setSocketStatus(o){this.socketStatus=o}setBalanceSocketStatus(o){this.balancePushSocketStatus=o}get computedIsWalletEnv(){return this.portal===N.OKX_WALLET_EXTENSION}get computedIsWalletDashBoard(){return this.portal===N.WALLET_DASHBOARD}get computedIsMarket(){return this.portal===N.MARKET}get computedNotThirdBiz(){return this.portal===N.OKX_WALLET_EXTENSION||this.portal===N.DEX||this.portal===N.MARKET}get computedNowCurrencySymbol(){return this.nowCurrencyUnit.symbol||""}get computedSensitiveChainIds(){return this.chainList.map(o=>Number(o.isSensitive)===ke.YES?o.chainId:null).filter(Boolean)}get computedCurrentTabIsLimit(){return this.currentTab===k.LIMIT_ORDER}get computedIsUrlFillSwap(){return this.computedIsWalletDashBoard||this.computedIsWalletEnv}setIsFirstInit(o){this.isFirstInit=o}get computedTradeTokenChangeMsgId(){return this.tradeTokenChangeMsg.msgId}};v();O();var gt=ne(["userUniqueId","chainList","transactionLoading","nowCurrencyUnit","tokenModalVisible","safemoonSlippage","globalMessages","socketStatus","balancePushSocketStatus","portal","currentTab","currentTabChainList","forceUpdateFromToByHash","isFirstInit","visibleAddFunds","disclaimerVisible","buySellAmountChangedCount","tradeTokenChangeMsg"],["computedReserveGas","computedNowCurrencySymbol","computedSensitiveChainIds","computedIsWalletEnv","computedCurrentTabIsLimit","computedTradeTokenChangeMsgId"]);var Ae=class extends oe{constructor(c){super(c);h(this,"swapCollapse",!1);h(this,"setSwapCollapse",c=>{this.swapCollapse=c});h(this,"chainListLoadError",!1);h(this,"setChainListLoadError",c=>{this.chainListLoadError=c});ie(this,{...gt,swapCollapse:z,chainListLoadError:z}),this.setPortal(Me)}getUserUnit(c){this.nowCurrencyUnit=c}};v();O();v();O();var ve=class{constructor(o){h(this,"updateTxHash",o=>(G.info(V.UPDATE_HASH,{...o,tags:{orderId:o.orderId,status:o?.status||1}}),ee.post(Ke,o).catch(c=>{G.info(V.UPDATE_HASH_ERROR,{...o,error:c,tags:{orderId:o.orderId}})})));h(this,"cancelOrder",o=>(G.info(V.CANCEL_ORDER,{tags:{orderId:o}}),ee.get(Qe,{params:{id:o}})));h(this,"cancelLimitOrder",()=>{});this.rootStore=o}},ht=ve;var Oe=class extends ht{constructor(){super(...arguments);h(this,"sendTransaction",async(...c)=>Ie(...c));h(this,"sendTransactionEnhance",async(...c)=>Ie(...c));h(this,"signTransaction",async(c,C)=>{let[S,f]=await ae(ot({message:c,chainId:C}));return[S,f]})}},Co=Oe;v();O();var de=J(Y());v();O();var ce=J(_t());async function At(b,o){let{devid:c}=await b.get("devid");return(C,S)=>{ce.setDeviceId(c);let f=ce.newInstance({site:"okex",product:C});return f.setApiEndpoint(`${o}/amplitude`),f.setCommonParams(tt()),S(f),f}}async function Pe(b,o){(await At(b,o))("web3_trade",nt)}var vt=()=>{let[b,o]=(0,de.useState)(!1);return(0,de.useEffect)(()=>{let{getApiHostname:c}=B.global;Pe(B.localStore,c()).then(()=>o(!0)).catch(()=>{})},[]),{initialized:b}},Bo=vt;v();O();var pt=J(Y());var Vo=()=>{(0,pt.useEffect)(()=>{let b=B.global?.getWssHostname?.(),o=rt.global?.getWssHostname?.();st({baseUrl:`wss://${b||o}`})},[])};v();O();var Et=J(Y());var ye=class extends Et.PureComponent{constructor(o){super(o),this.state={hasError:!1,error:void 0,errorInfo:{}}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(o,c){this.setState({error:o,errorInfo:c}),(async()=>{try{let{logger:C,LOGGER_EVENT_MAP:S}=await import("./logger-62YPCCOO.js");this.props.isMainEntry?C.error("fatal rendering error",{error:o,errorInfo:c,level:"fatal"}):C.error(S.ERROR_BOUNDARY,{error:o,errorInfo:c}),this.props.onError&&this.props.onError(o,c)}catch{}})()}onRetry(){this.setState({hasError:!1})}render(){let{error:o,errorInfo:c,hasError:C}=this.state;return C?this.props.fallbackComponent({error:o,errorInfo:c,onRetry:()=>this.onRetry()}):this.props.children}};export{_t as a,Vo as b,ye as c,Pe as d,Tt as e,ne as f,On as g,Rn as h,wn as i,W as j,Te as k,Ae as l,Co as m,Bo as n};
//# sourceMappingURL=chunk-567ZSQZY.js.map
