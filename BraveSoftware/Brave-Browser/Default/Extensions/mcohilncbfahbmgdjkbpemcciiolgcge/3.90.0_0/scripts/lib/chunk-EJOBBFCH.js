import{a as We}from"./chunk-VPT3GAIN.js";import{c}from"./chunk-VJ2JNI4M.js";import{Ca as we,na as xe}from"./chunk-22THXMTO.js";import{v as Z}from"./chunk-AHLFMVMC.js";import{f as ke}from"./chunk-JVJHSYZS.js";import{a as P,j as Te,l as Ce,p as oe,z as Ie}from"./chunk-IFGNGASP.js";import{A as ee,He as k,Uc as Y,Za as ue,_a as le,ia as d,n as y,rc as de,sc as pe,tc as fe,uc as _e,vc as Se,wc as ge}from"./chunk-NPJCEXXH.js";import{a as Oe}from"./chunk-Q2B4R57L.js";import{b as x}from"./chunk-PJC4UBLU.js";import{$ as ce,S as J,j as me}from"./chunk-JYNY5RZ4.js";import{f as T,o as r,q as s}from"./chunk-LHDKEQAM.js";r();s();var he=T(x());var je=()=>{let{useCheckTxBeforePublishFn:e}=d.hooks,o=d.global.currentWallet,t=d.global.dexSignAndSubmitTransaction,n=e();(0,he.useEffect)(()=>{d.updateGlobal({signAndSubmitTransaction:async(a,i,m)=>await t({networkId:a,tx:i,hardwareExtParams:m,checkTxBeforePublish:n,currentWallet:o})})},[])};r();s();var D=T(x()),Fe=T(We());var so=()=>{let e=(0,Fe.useLocation)(),{search:o}=e,{needUpdate:t,type:n}=ke(o);return(0,D.useMemo)(()=>({needUpdate:t===ue.on,type:n}),[t,n])},$=()=>{let{quoteStore:e}=c(),o=e?.quote?.bestRoute||{},{fromToken:t,toToken:n,fromTokenAmount:a,receiveAmount:i}=o;return(0,D.useMemo)(()=>({fromToken:{...t,amount:a},toToken:{...n,amount:i}}),[t,a,n,i])},Be=()=>{let{fromToken:e,toToken:o}=$();return(0,D.useMemo)(()=>e.chainId!==o.chainId?[e,o]:[e],[e,o])},ao=e=>{let{quoteStore:o,fromToStore:t,walletContractStore:n,accountStore:{walletConfig:a,address:i},slippageStore:m}=c(),u=e===le.INTENT_SWAP,{fromToken:p,toToken:l}=$(),g=Be(),C=a?.walletId,{data:I}=n?.transactionPayload||{},{quote:w,computedIsUsingCentralizedBridge:A,enableQuoteAggregates:h}=o,F=w?.bestRoute?.bridge,v=o?.computedIsOfflineType,{name:L,logo:N,estimatedTime:b}=o?.quote?.bestRoute||{},{computedRate:O,computedToFromRate:W,computedIsBridge:E,computedIsEvmChain:B,computedIsFromBtcCoin:R,computedIsCrossChain:q}=t,{computedMinimumReceived:U}=m;return(0,D.useMemo)(()=>{let j={walletId:C,address:i,networks:g,data:I,fromToken:p,toToken:l};return{estimatedTime:(parseInt(b||0,10)/60).toFixed(0)??"--",isIntentBridge:v,computedIsCrossChain:q,rate:O,toFromRate:W,minimumReceived:U,isFromBtcCoin:R,hideExchangeBtn:E||A,isEvmChain:B,isIntentSwap:u,bridge:F,enableQuoteAggregates:h,name:L,logo:N,...j}},[C,i,g,I,O,W,U,R,E,B,A,F,p,l,u,h,L,N,b,v,q])};function Re(){return{[Y.SWAP]:{image:{light:de(),dark:pe()},title:{text:k("swaptrade_top_segmentedctl_swap")}},[Y.BRIDGE]:{image:{light:fe(),dark:_e()},title:{text:k("swaptrade_top_segmentedctl_bridge")}},[Y.CLAIM]:{image:{light:Se(),dark:ge()},title:{text:k("commonall_modal_btn_claim")}}}}var io=(e="")=>{let{commonStore:o}=c(),{currentTab:t}=o,n=e||t;return(0,D.useMemo)(()=>Re()[n],[n])};r();s();var re=T(x());var te=(e,o,t)=>`${e}${ee.mul(o||0,ee.pow(10,t||0))}`,ne=e=>{let{useCoin:o}=d.hooks;return o(e?.chainId,e.isNativeToken?"":e.tokenContractAddress)},qe=()=>{let{fromToStore:e,gasDropStore:o}=c(),{to:t}=e,n=ne({chainId:t.chainId}),{computedGasDropSelected:a,gasDropConfig:i}=o||{},{gasDrop:m}=i||{};return(0,re.useMemo)(()=>a?{coinId:n?.coinId,assetChange:te("+",m,n?.decimals),useMinPrecision:!1,displayEstimate:!1,desc:k("swaptrade_transfer_text_for_gas")}:null,[a,m,n])};function Ue(){let{fromToken:e,toToken:o}=$(),t=qe(),n=ne(e),a=ne(o);return(0,re.useMemo)(()=>({fromList:[{coinId:n?.coinId,assetChange:te("-",e?.amount,n?.decimals),useMinPrecision:!1}],toList:[{coinId:a?.coinId,assetChange:te("+",o?.amount,a?.decimals),useMinPrecision:!1},t].filter(Boolean)}),[n?.coinId,n?.decimals,e?.amount,a?.coinId,a?.decimals,o?.amount,t])}r();s();var xo={container:"_container_wvaui_1",loading:"_loading_wvaui_5",wrap:"_wrap_wvaui_10",scroll:"_scroll_wvaui_13"};r();s();var Ee=T(x());var He=e=>{let{walletContractStore:o}=c(),t=we(e);return(0,Ee.useEffect)(()=>{Ie(e)&&o.setNativeCoin(t)},[t,e]),{coin:t}},No=He;r();s();var V=T(x());r();s();var se=T(x());r();s();var X=T(x());ce();var z=({estimatedGasFeeInt:e,maxGasFeeInt:o,decimals:t,isClaim:n=!1})=>{let{quoteStore:a}=c(),i=me(a,"quote.bestRoute.bridge.estimateBridgeFeeAmount");return(0,X.useMemo)(()=>{let m=oe(o,t),u=oe(e,t);return i&&!n&&(u=P.add(u,i,{returnString:!0}),m=P.add(m,i,{returnString:!0})),{maxGasFee:m,estimatedGasFee:u}},[o,t,e,i,n])},K=e=>{let{walletContractStore:o}=c();(0,X.useEffect)(()=>{o.setGasFee(e)},[e])};var Ye=(e,o,t=!1)=>{let{useFeeDisplay:n}=d.hooks,{walletContractStore:a}=c(),{coinAmount:i,coinSymbol:m,estimatedGasFeeInt:u,maxGasFeeInt:p,decimals:l,loading:g}=n(e,{calldata:o}),{maxGasFee:C,estimatedGasFee:I}=z({maxGasFeeInt:p,estimatedGasFeeInt:u,decimals:l,isClaim:t});return K(C),(0,se.useEffect)(()=>{a.setMaxGasFeeInt(p)},[p,a]),(0,se.useEffect)(()=>{a.setGasFeeLoading(g)},[g,a]),{maxGasFee:C,estimatedGasFee:I,coinAmount:i,coinSymbol:m,feeLoading:g}},Ae=Ye;r();s();var M=T(x()),ve=T(Oe());r();s();var Ge={"network-fee-title":"_network-fee-title_16onq_1",networkFeeTitle:"_network-fee-title_16onq_1","tooltip-icon":"_tooltip-icon_16onq_4",tooltipIcon:"_tooltip-icon_16onq_4","gas-type":"_gas-type_16onq_8",gasType:"_gas-type_16onq_8"};var $e=({chainName:e,coinSymbol:o,isClaim:t=!1})=>{let{quoteStore:n,commonStore:a,fromToStore:i}=c(),{currencyConversion:m,computedNowCurrencySymbol:u}=a,{computedIsCrossChain:p}=i,{estimateBridgeFeeAmount:l,estimateBridgeFeeAmountUsd:g}=n?.quote?.bestRoute?.bridge||{},C=(0,M.useMemo)(()=>p?k("swaptrade_intro_dialog_desc_cross_fee_notice",{value:k("swaptrade_modal_desc_crosschain_valuediff_variavle",{price:l?Te(m(g).toString(),u):"--",fee:l?`${Ce(l)} ${o}`:"--"})}):k("swaptrade_extension_tooltip_mining_fee"),[o,p,u,m,l,g]),I=(0,M.useMemo)(()=>M.default.createElement("span",{className:(0,ve.default)("font-12 content-contrast",{[Ge.networkFeeTitle]:!t})},k("swaptrade_history_card_text_destination_chain_fee",{chainName:e})),[e]);return t?I:M.default.createElement(Z,{rebirthPopper:!0,popupProps:{className:"text-center"},maxWidth:200,placement:Z.DIRECTION.topRight,title:C},I)},Q=y($e);var Xe=({chainId:e,transactionPayload:o,isClaim:t=!1})=>{let{NetworkFeeEnter:n,SectionWrap:a}=d.components,{estimatedGasFee:i,feeLoading:m,coinSymbol:u}=Ae(e,o,t),{walletContractStore:p}=c(),{nativeCoin:l}=p;return V.default.createElement(a,null,V.default.createElement(n,{title:V.default.createElement(Q,{chainName:l?.chainName,coinSymbol:u,isClaim:t}),coinId:l?.coinId,loading:m,networkFee:i,useMinPrecision:!1}))},pt=y(Xe);r();s();var f=T(x());ce();r();s();var ie=T(x());r();s();r();s();var G={SLOW:"SLOW",MODERATE:"MODERATE",FAST:"FAST",CUSTOM:"CUSTOM"},ae={[G.SLOW]:"slow",[G.MODERATE]:"standard",[G.FAST]:"fast",[G.CUSTOM]:"custom"};var ze=(e,o=!0)=>{if(o)return{initialGasType:ae[G.MODERATE]};let{maxPriorityFeePerGas:t,gas:n}=e||{};return{initialGasType:ae[G.CUSTOM],initialCustomMaxPriorityFee:t,initialCustomGasLimit:n,initialCustomMaxBaseFee:t}},Ne=ze;var Ke=(e,o,t,n=!1)=>{let{useFeeDisplay:a}=d.hooks,{walletContractStore:i,fromToStore:m}=c(),u=Ne(t,m.computedIsCrossChain),p=a(o,{gasInfo:e,calldata:t}),{coinAmount:l,coinSymbol:g,estimatedGasFeeInt:C,maxGasFeeInt:I,decimals:w,loading:A,error:h}=p,{maxGasFee:F,estimatedGasFee:v}=z({maxGasFeeInt:I,estimatedGasFeeInt:C,decimals:w,isClaim:n});return K(F),(0,ie.useEffect)(()=>{i.setGasFeeLoading(A)},[A,i]),(0,ie.useEffect)(()=>{i.setGasLimitError(h)},[h,i]),{txInitGasInfo:u,coinAmount:l,coinSymbol:g,maxGasFee:F,estimatedGasFee:v,gasType:e.gasType,feeLoading:p.loading,error:h}},be=Ke;r();s();var ye=e=>P.div(e,10**18).toString();var Qe=({chainId:e,transactionPayload:o,isClaim:t=!1,needGasChange:n=!1})=>{let{EthereumNetworkFee:a,NetworkFeeEnter:i,SectionWrap:m}=d.components,{useGasReturnActivity:u}=d.hooks,[p,l]=(0,f.useState)(!1),{walletContractStore:g,accountStore:C,mevStore:I}=c(),{gasInfo:w,setGasInfo:A,nativeCoin:h,setActivityId:F}=g,{computedIsMevOpen:v,mevInfo:L}=I,{to:N,from:b,data:O,value:W}=o||{},{coinId:E,chainName:B}=h||{},{txInitGasInfo:R,coinSymbol:q,gasType:U,estimatedGasFee:j,maxGasFee:De,feeLoading:Me,error:Pe}=be(w,e,o,t),H=u({coinId:E,fromAddress:J(b),toAddress:J(N),unavailable:w.gasType==="custom",disabled:!N||!b||!E,gasInfo:w,txType:2,fee:ye(w.networkFee||0)}),Le=()=>{l(!1)};return(0,f.useEffect)(()=>{F(H?.activityId)},[H,F]),f.default.createElement(f.default.Fragment,null,f.default.createElement(m,null,f.default.createElement(i,{level:U,title:f.default.createElement(Q,{chainName:B,coinSymbol:q,isClaim:t}),coinId:E,loading:Me,networkFee:j,maxNetworkFee:De,gasReturn:H,estimateFailed:Pe,onClick:n?()=>{xe({wallet_address:C.address,button_name:"network_fee"}),l(!0)}:void 0,useMinPrecision:!1})),E&&f.default.createElement(f.Suspense,{fallback:f.default.createElement("div",null)},f.default.createElement(a,{visible:p,coinId:E,address:b,inputData:O,tokenAddress:N,value:W,onBack:Le,onClose:d.goHome,onGasChange:A,initialGasData:R,gasReturn:H,isMev:v,mevInfo:L})))},Ht=y(Qe);export{je as a,so as b,$ as c,ao as d,io as e,No as f,Q as g,z as h,K as i,pt as j,Ht as k,te as l,ne as m,Ue as n,xo as o};
//# sourceMappingURL=chunk-EJOBBFCH.js.map
