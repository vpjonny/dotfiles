import{a as xe,b as ts,c as es,d as rs}from"./chunk-AL77NTUI.js";import{t as Bi,u as ur}from"./chunk-V3FLECS4.js";import{a as xi}from"./chunk-BGUOO6AC.js";import{a as $,c as _i,d as Ii,e as Ai}from"./chunk-GUM36CPA.js";import{c as cr,f as Ae,o as at,p as Zt,q as ct}from"./chunk-LHDKEQAM.js";var ss=cr((ns,nn)=>{at();ct();(function(c,t){"use strict";function e(b,s){if(!b)throw new Error(s||"Assertion failed")}function n(b,s){b.super_=s;var u=function(){};u.prototype=s.prototype,b.prototype=new u,b.prototype.constructor=b}function r(b,s,u){if(r.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(b||0,s||10,u||"be"))}typeof c=="object"?c.exports=r:t.BN=r,r.BN=r,r.wordSize=26;var i;try{typeof window<"u"&&typeof window.Buffer<"u"?i=window.Buffer:i=Ii().Buffer}catch{}r.isBN=function(s){return s instanceof r?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===r.wordSize&&Array.isArray(s.words)},r.max=function(s,u){return s.cmp(u)>0?s:u},r.min=function(s,u){return s.cmp(u)<0?s:u},r.prototype._init=function(s,u,h){if(typeof s=="number")return this._initNumber(s,u,h);if(typeof s=="object")return this._initArray(s,u,h);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var f=0;s[0]==="-"&&(f++,this.negative=1),f<s.length&&(u===16?this._parseHex(s,f,h):(this._parseBase(s,u,f),h==="le"&&this._initArray(this.toArray(),u,h)))},r.prototype._initNumber=function(s,u,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(e(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},r.prototype._initArray=function(s,u,h){if(e(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p,k,w=0;if(h==="be")for(f=s.length-1,p=0;f>=0;f-=3)k=s[f]|s[f-1]<<8|s[f-2]<<16,this.words[p]|=k<<w&67108863,this.words[p+1]=k>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);else if(h==="le")for(f=0,p=0;f<s.length;f+=3)k=s[f]|s[f+1]<<8|s[f+2]<<16,this.words[p]|=k<<w&67108863,this.words[p+1]=k>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);return this._strip()};function a(b,s){var u=b.charCodeAt(s);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+b)}function l(b,s,u){var h=a(b,u);return u-1>=s&&(h|=a(b,u-1)<<4),h}r.prototype._parseHex=function(s,u,h){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p=0,k=0,w;if(h==="be")for(f=s.length-1;f>=u;f-=2)w=l(s,u,f)<<p,this.words[k]|=w&67108863,p>=18?(p-=18,k+=1,this.words[k]|=w>>>26):p+=8;else{var d=s.length-u;for(f=d%2===0?u+1:u;f<s.length;f+=2)w=l(s,u,f)<<p,this.words[k]|=w&67108863,p>=18?(p-=18,k+=1,this.words[k]|=w>>>26):p+=8}this._strip()};function g(b,s,u,h){for(var f=0,p=0,k=Math.min(b.length,u),w=s;w<k;w++){var d=b.charCodeAt(w)-48;f*=h,d>=49?p=d-49+10:d>=17?p=d-17+10:p=d,e(d>=0&&p<h,"Invalid character"),f+=p}return f}r.prototype._parseBase=function(s,u,h){this.words=[0],this.length=1;for(var f=0,p=1;p<=67108863;p*=u)f++;f--,p=p/u|0;for(var k=s.length-h,w=k%f,d=Math.min(k,k-w)+h,o=0,m=h;m<d;m+=f)o=g(s,m,m+f,u),this.imuln(p),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(w!==0){var K=1;for(o=g(s,m,s.length,u),m=0;m<w;m++)K*=u;this.imuln(K),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},r.prototype.copy=function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red};function S(b,s){b.words=s.words,b.length=s.length,b.negative=s.negative,b.red=s.red}if(r.prototype._move=function(s){S(s,this)},r.prototype.clone=function(){var s=new r(null);return this.copy(s),s},r.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{r.prototype.inspect=A}else r.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],z=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(s,u){s=s||10,u=u|0||1;var h;if(s===16||s==="hex"){h="";for(var f=0,p=0,k=0;k<this.length;k++){var w=this.words[k],d=((w<<f|p)&16777215).toString(16);p=w>>>24-f&16777215,f+=2,f>=26&&(f-=26,k--),p!==0||k!==this.length-1?h=I[6-d.length]+d+h:h=d+h}for(p!==0&&(h=p.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var o=z[s],m=_[s];h="";var K=this.clone();for(K.negative=0;!K.isZero();){var W=K.modrn(m).toString(s);K=K.idivn(m),K.isZero()?h=W+h:h=I[o-W.length]+W+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}e(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},r.prototype.toJSON=function(){return this.toString(16,2)},i&&(r.prototype.toBuffer=function(s,u){return this.toArrayLike(i,s,u)}),r.prototype.toArray=function(s,u){return this.toArrayLike(Array,s,u)};var L=function(s,u){return s.allocUnsafe?s.allocUnsafe(u):new s(u)};r.prototype.toArrayLike=function(s,u,h){this._strip();var f=this.byteLength(),p=h||Math.max(1,f);e(f<=p,"byte array longer than desired length"),e(p>0,"Requested array length <= 0");var k=L(s,p),w=u==="le"?"LE":"BE";return this["_toArrayLike"+w](k,f),k},r.prototype._toArrayLikeLE=function(s,u){for(var h=0,f=0,p=0,k=0;p<this.length;p++){var w=this.words[p]<<k|f;s[h++]=w&255,h<s.length&&(s[h++]=w>>8&255),h<s.length&&(s[h++]=w>>16&255),k===6?(h<s.length&&(s[h++]=w>>24&255),f=0,k=0):(f=w>>>24,k+=2)}if(h<s.length)for(s[h++]=f;h<s.length;)s[h++]=0},r.prototype._toArrayLikeBE=function(s,u){for(var h=s.length-1,f=0,p=0,k=0;p<this.length;p++){var w=this.words[p]<<k|f;s[h--]=w&255,h>=0&&(s[h--]=w>>8&255),h>=0&&(s[h--]=w>>16&255),k===6?(h>=0&&(s[h--]=w>>24&255),f=0,k=0):(f=w>>>24,k+=2)}if(h>=0)for(s[h--]=f;h>=0;)s[h--]=0},Math.clz32?r.prototype._countBits=function(s){return 32-Math.clz32(s)}:r.prototype._countBits=function(s){var u=s,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},r.prototype._zeroBits=function(s){if(s===0)return 26;var u=s,h=0;return(u&8191)===0&&(h+=13,u>>>=13),(u&127)===0&&(h+=7,u>>>=7),(u&15)===0&&(h+=4,u>>>=4),(u&3)===0&&(h+=2,u>>>=2),(u&1)===0&&h++,h},r.prototype.bitLength=function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u};function B(b){for(var s=new Array(b.bitLength()),u=0;u<s.length;u++){var h=u/26|0,f=u%26;s[u]=b.words[h]>>>f&1}return s}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(s+=h,h!==26)break}return s},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},r.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this._strip()},r.prototype.ior=function(s){return e((this.negative|s.negative)===0),this.iuor(s)},r.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},r.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},r.prototype.iuand=function(s){var u;this.length>s.length?u=s:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=u.length,this._strip()},r.prototype.iand=function(s){return e((this.negative|s.negative)===0),this.iuand(s)},r.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},r.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},r.prototype.iuxor=function(s){var u,h;this.length>s.length?(u=this,h=s):(u=s,h=this);for(var f=0;f<h.length;f++)this.words[f]=u.words[f]^h.words[f];if(this!==u)for(;f<u.length;f++)this.words[f]=u.words[f];return this.length=u.length,this._strip()},r.prototype.ixor=function(s){return e((this.negative|s.negative)===0),this.iuxor(s)},r.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},r.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},r.prototype.inotn=function(s){e(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,h=s%26;this._expand(u),h>0&&u--;for(var f=0;f<u;f++)this.words[f]=~this.words[f]&67108863;return h>0&&(this.words[f]=~this.words[f]&67108863>>26-h),this._strip()},r.prototype.notn=function(s){return this.clone().inotn(s)},r.prototype.setn=function(s,u){e(typeof s=="number"&&s>=0);var h=s/26|0,f=s%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<f:this.words[h]=this.words[h]&~(1<<f),this._strip()},r.prototype.iadd=function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var h,f;this.length>s.length?(h=this,f=s):(h=s,f=this);for(var p=0,k=0;k<f.length;k++)u=(h.words[k]|0)+(f.words[k]|0)+p,this.words[k]=u&67108863,p=u>>>26;for(;p!==0&&k<h.length;k++)u=(h.words[k]|0)+p,this.words[k]=u&67108863,p=u>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;k<h.length;k++)this.words[k]=h.words[k];return this},r.prototype.add=function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},r.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,p;h>0?(f=this,p=s):(f=s,p=this);for(var k=0,w=0;w<p.length;w++)u=(f.words[w]|0)-(p.words[w]|0)+k,k=u>>26,this.words[w]=u&67108863;for(;k!==0&&w<f.length;w++)u=(f.words[w]|0)+k,k=u>>26,this.words[w]=u&67108863;if(k===0&&w<f.length&&f!==this)for(;w<f.length;w++)this.words[w]=f.words[w];return this.length=Math.max(this.length,w),f!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(s){return this.clone().isub(s)};function C(b,s,u){u.negative=s.negative^b.negative;var h=b.length+s.length|0;u.length=h,h=h-1|0;var f=b.words[0]|0,p=s.words[0]|0,k=f*p,w=k&67108863,d=k/67108864|0;u.words[0]=w;for(var o=1;o<h;o++){for(var m=d>>>26,K=d&67108863,W=Math.min(o,s.length-1),U=Math.max(0,o-b.length+1);U<=W;U++){var D=o-U|0;f=b.words[D]|0,p=s.words[U]|0,k=f*p+K,m+=k/67108864|0,K=k&67108863}u.words[o]=K|0,d=m|0}return d!==0?u.words[o]=d|0:u.length--,u._strip()}var O=function(s,u,h){var f=s.words,p=u.words,k=h.words,w=0,d,o,m,K=f[0]|0,W=K&8191,U=K>>>13,D=f[1]|0,X=D&8191,et=D>>>13,ye=f[2]|0,rt=ye&8191,ot=ye>>>13,Kn=f[3]|0,pt=Kn&8191,yt=Kn>>>13,On=f[4]|0,gt=On&8191,mt=On>>>13,Wn=f[5]|0,bt=Wn&8191,kt=Wn>>>13,Un=f[6]|0,wt=Un&8191,vt=Un>>>13,qn=f[7]|0,St=qn&8191,_t=qn>>>13,$n=f[8]|0,It=$n&8191,At=$n>>>13,Dn=f[9]|0,xt=Dn&8191,Bt=Dn>>>13,Fn=p[0]|0,Lt=Fn&8191,Rt=Fn>>>13,Hn=p[1]|0,Mt=Hn&8191,Et=Hn>>>13,Vn=p[2]|0,Pt=Vn&8191,Tt=Vn>>>13,Gn=p[3]|0,Ct=Gn&8191,zt=Gn>>>13,jn=p[4]|0,Nt=jn&8191,Kt=jn>>>13,Jn=p[5]|0,Ot=Jn&8191,Wt=Jn>>>13,Yn=p[6]|0,Ut=Yn&8191,qt=Yn>>>13,Zn=p[7]|0,$t=Zn&8191,Dt=Zn>>>13,Xn=p[8]|0,Ft=Xn&8191,Ht=Xn>>>13,Qn=p[9]|0,Vt=Qn&8191,Gt=Qn>>>13;h.negative=s.negative^u.negative,h.length=19,d=Math.imul(W,Lt),o=Math.imul(W,Rt),o=o+Math.imul(U,Lt)|0,m=Math.imul(U,Rt);var Or=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Or>>>26)|0,Or&=67108863,d=Math.imul(X,Lt),o=Math.imul(X,Rt),o=o+Math.imul(et,Lt)|0,m=Math.imul(et,Rt),d=d+Math.imul(W,Mt)|0,o=o+Math.imul(W,Et)|0,o=o+Math.imul(U,Mt)|0,m=m+Math.imul(U,Et)|0;var Wr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,d=Math.imul(rt,Lt),o=Math.imul(rt,Rt),o=o+Math.imul(ot,Lt)|0,m=Math.imul(ot,Rt),d=d+Math.imul(X,Mt)|0,o=o+Math.imul(X,Et)|0,o=o+Math.imul(et,Mt)|0,m=m+Math.imul(et,Et)|0,d=d+Math.imul(W,Pt)|0,o=o+Math.imul(W,Tt)|0,o=o+Math.imul(U,Pt)|0,m=m+Math.imul(U,Tt)|0;var Ur=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,d=Math.imul(pt,Lt),o=Math.imul(pt,Rt),o=o+Math.imul(yt,Lt)|0,m=Math.imul(yt,Rt),d=d+Math.imul(rt,Mt)|0,o=o+Math.imul(rt,Et)|0,o=o+Math.imul(ot,Mt)|0,m=m+Math.imul(ot,Et)|0,d=d+Math.imul(X,Pt)|0,o=o+Math.imul(X,Tt)|0,o=o+Math.imul(et,Pt)|0,m=m+Math.imul(et,Tt)|0,d=d+Math.imul(W,Ct)|0,o=o+Math.imul(W,zt)|0,o=o+Math.imul(U,Ct)|0,m=m+Math.imul(U,zt)|0;var qr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(qr>>>26)|0,qr&=67108863,d=Math.imul(gt,Lt),o=Math.imul(gt,Rt),o=o+Math.imul(mt,Lt)|0,m=Math.imul(mt,Rt),d=d+Math.imul(pt,Mt)|0,o=o+Math.imul(pt,Et)|0,o=o+Math.imul(yt,Mt)|0,m=m+Math.imul(yt,Et)|0,d=d+Math.imul(rt,Pt)|0,o=o+Math.imul(rt,Tt)|0,o=o+Math.imul(ot,Pt)|0,m=m+Math.imul(ot,Tt)|0,d=d+Math.imul(X,Ct)|0,o=o+Math.imul(X,zt)|0,o=o+Math.imul(et,Ct)|0,m=m+Math.imul(et,zt)|0,d=d+Math.imul(W,Nt)|0,o=o+Math.imul(W,Kt)|0,o=o+Math.imul(U,Nt)|0,m=m+Math.imul(U,Kt)|0;var $r=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+($r>>>26)|0,$r&=67108863,d=Math.imul(bt,Lt),o=Math.imul(bt,Rt),o=o+Math.imul(kt,Lt)|0,m=Math.imul(kt,Rt),d=d+Math.imul(gt,Mt)|0,o=o+Math.imul(gt,Et)|0,o=o+Math.imul(mt,Mt)|0,m=m+Math.imul(mt,Et)|0,d=d+Math.imul(pt,Pt)|0,o=o+Math.imul(pt,Tt)|0,o=o+Math.imul(yt,Pt)|0,m=m+Math.imul(yt,Tt)|0,d=d+Math.imul(rt,Ct)|0,o=o+Math.imul(rt,zt)|0,o=o+Math.imul(ot,Ct)|0,m=m+Math.imul(ot,zt)|0,d=d+Math.imul(X,Nt)|0,o=o+Math.imul(X,Kt)|0,o=o+Math.imul(et,Nt)|0,m=m+Math.imul(et,Kt)|0,d=d+Math.imul(W,Ot)|0,o=o+Math.imul(W,Wt)|0,o=o+Math.imul(U,Ot)|0,m=m+Math.imul(U,Wt)|0;var Dr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,d=Math.imul(wt,Lt),o=Math.imul(wt,Rt),o=o+Math.imul(vt,Lt)|0,m=Math.imul(vt,Rt),d=d+Math.imul(bt,Mt)|0,o=o+Math.imul(bt,Et)|0,o=o+Math.imul(kt,Mt)|0,m=m+Math.imul(kt,Et)|0,d=d+Math.imul(gt,Pt)|0,o=o+Math.imul(gt,Tt)|0,o=o+Math.imul(mt,Pt)|0,m=m+Math.imul(mt,Tt)|0,d=d+Math.imul(pt,Ct)|0,o=o+Math.imul(pt,zt)|0,o=o+Math.imul(yt,Ct)|0,m=m+Math.imul(yt,zt)|0,d=d+Math.imul(rt,Nt)|0,o=o+Math.imul(rt,Kt)|0,o=o+Math.imul(ot,Nt)|0,m=m+Math.imul(ot,Kt)|0,d=d+Math.imul(X,Ot)|0,o=o+Math.imul(X,Wt)|0,o=o+Math.imul(et,Ot)|0,m=m+Math.imul(et,Wt)|0,d=d+Math.imul(W,Ut)|0,o=o+Math.imul(W,qt)|0,o=o+Math.imul(U,Ut)|0,m=m+Math.imul(U,qt)|0;var Fr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,d=Math.imul(St,Lt),o=Math.imul(St,Rt),o=o+Math.imul(_t,Lt)|0,m=Math.imul(_t,Rt),d=d+Math.imul(wt,Mt)|0,o=o+Math.imul(wt,Et)|0,o=o+Math.imul(vt,Mt)|0,m=m+Math.imul(vt,Et)|0,d=d+Math.imul(bt,Pt)|0,o=o+Math.imul(bt,Tt)|0,o=o+Math.imul(kt,Pt)|0,m=m+Math.imul(kt,Tt)|0,d=d+Math.imul(gt,Ct)|0,o=o+Math.imul(gt,zt)|0,o=o+Math.imul(mt,Ct)|0,m=m+Math.imul(mt,zt)|0,d=d+Math.imul(pt,Nt)|0,o=o+Math.imul(pt,Kt)|0,o=o+Math.imul(yt,Nt)|0,m=m+Math.imul(yt,Kt)|0,d=d+Math.imul(rt,Ot)|0,o=o+Math.imul(rt,Wt)|0,o=o+Math.imul(ot,Ot)|0,m=m+Math.imul(ot,Wt)|0,d=d+Math.imul(X,Ut)|0,o=o+Math.imul(X,qt)|0,o=o+Math.imul(et,Ut)|0,m=m+Math.imul(et,qt)|0,d=d+Math.imul(W,$t)|0,o=o+Math.imul(W,Dt)|0,o=o+Math.imul(U,$t)|0,m=m+Math.imul(U,Dt)|0;var Hr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,d=Math.imul(It,Lt),o=Math.imul(It,Rt),o=o+Math.imul(At,Lt)|0,m=Math.imul(At,Rt),d=d+Math.imul(St,Mt)|0,o=o+Math.imul(St,Et)|0,o=o+Math.imul(_t,Mt)|0,m=m+Math.imul(_t,Et)|0,d=d+Math.imul(wt,Pt)|0,o=o+Math.imul(wt,Tt)|0,o=o+Math.imul(vt,Pt)|0,m=m+Math.imul(vt,Tt)|0,d=d+Math.imul(bt,Ct)|0,o=o+Math.imul(bt,zt)|0,o=o+Math.imul(kt,Ct)|0,m=m+Math.imul(kt,zt)|0,d=d+Math.imul(gt,Nt)|0,o=o+Math.imul(gt,Kt)|0,o=o+Math.imul(mt,Nt)|0,m=m+Math.imul(mt,Kt)|0,d=d+Math.imul(pt,Ot)|0,o=o+Math.imul(pt,Wt)|0,o=o+Math.imul(yt,Ot)|0,m=m+Math.imul(yt,Wt)|0,d=d+Math.imul(rt,Ut)|0,o=o+Math.imul(rt,qt)|0,o=o+Math.imul(ot,Ut)|0,m=m+Math.imul(ot,qt)|0,d=d+Math.imul(X,$t)|0,o=o+Math.imul(X,Dt)|0,o=o+Math.imul(et,$t)|0,m=m+Math.imul(et,Dt)|0,d=d+Math.imul(W,Ft)|0,o=o+Math.imul(W,Ht)|0,o=o+Math.imul(U,Ft)|0,m=m+Math.imul(U,Ht)|0;var Vr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,d=Math.imul(xt,Lt),o=Math.imul(xt,Rt),o=o+Math.imul(Bt,Lt)|0,m=Math.imul(Bt,Rt),d=d+Math.imul(It,Mt)|0,o=o+Math.imul(It,Et)|0,o=o+Math.imul(At,Mt)|0,m=m+Math.imul(At,Et)|0,d=d+Math.imul(St,Pt)|0,o=o+Math.imul(St,Tt)|0,o=o+Math.imul(_t,Pt)|0,m=m+Math.imul(_t,Tt)|0,d=d+Math.imul(wt,Ct)|0,o=o+Math.imul(wt,zt)|0,o=o+Math.imul(vt,Ct)|0,m=m+Math.imul(vt,zt)|0,d=d+Math.imul(bt,Nt)|0,o=o+Math.imul(bt,Kt)|0,o=o+Math.imul(kt,Nt)|0,m=m+Math.imul(kt,Kt)|0,d=d+Math.imul(gt,Ot)|0,o=o+Math.imul(gt,Wt)|0,o=o+Math.imul(mt,Ot)|0,m=m+Math.imul(mt,Wt)|0,d=d+Math.imul(pt,Ut)|0,o=o+Math.imul(pt,qt)|0,o=o+Math.imul(yt,Ut)|0,m=m+Math.imul(yt,qt)|0,d=d+Math.imul(rt,$t)|0,o=o+Math.imul(rt,Dt)|0,o=o+Math.imul(ot,$t)|0,m=m+Math.imul(ot,Dt)|0,d=d+Math.imul(X,Ft)|0,o=o+Math.imul(X,Ht)|0,o=o+Math.imul(et,Ft)|0,m=m+Math.imul(et,Ht)|0,d=d+Math.imul(W,Vt)|0,o=o+Math.imul(W,Gt)|0,o=o+Math.imul(U,Vt)|0,m=m+Math.imul(U,Gt)|0;var Gr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,d=Math.imul(xt,Mt),o=Math.imul(xt,Et),o=o+Math.imul(Bt,Mt)|0,m=Math.imul(Bt,Et),d=d+Math.imul(It,Pt)|0,o=o+Math.imul(It,Tt)|0,o=o+Math.imul(At,Pt)|0,m=m+Math.imul(At,Tt)|0,d=d+Math.imul(St,Ct)|0,o=o+Math.imul(St,zt)|0,o=o+Math.imul(_t,Ct)|0,m=m+Math.imul(_t,zt)|0,d=d+Math.imul(wt,Nt)|0,o=o+Math.imul(wt,Kt)|0,o=o+Math.imul(vt,Nt)|0,m=m+Math.imul(vt,Kt)|0,d=d+Math.imul(bt,Ot)|0,o=o+Math.imul(bt,Wt)|0,o=o+Math.imul(kt,Ot)|0,m=m+Math.imul(kt,Wt)|0,d=d+Math.imul(gt,Ut)|0,o=o+Math.imul(gt,qt)|0,o=o+Math.imul(mt,Ut)|0,m=m+Math.imul(mt,qt)|0,d=d+Math.imul(pt,$t)|0,o=o+Math.imul(pt,Dt)|0,o=o+Math.imul(yt,$t)|0,m=m+Math.imul(yt,Dt)|0,d=d+Math.imul(rt,Ft)|0,o=o+Math.imul(rt,Ht)|0,o=o+Math.imul(ot,Ft)|0,m=m+Math.imul(ot,Ht)|0,d=d+Math.imul(X,Vt)|0,o=o+Math.imul(X,Gt)|0,o=o+Math.imul(et,Vt)|0,m=m+Math.imul(et,Gt)|0;var jr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(jr>>>26)|0,jr&=67108863,d=Math.imul(xt,Pt),o=Math.imul(xt,Tt),o=o+Math.imul(Bt,Pt)|0,m=Math.imul(Bt,Tt),d=d+Math.imul(It,Ct)|0,o=o+Math.imul(It,zt)|0,o=o+Math.imul(At,Ct)|0,m=m+Math.imul(At,zt)|0,d=d+Math.imul(St,Nt)|0,o=o+Math.imul(St,Kt)|0,o=o+Math.imul(_t,Nt)|0,m=m+Math.imul(_t,Kt)|0,d=d+Math.imul(wt,Ot)|0,o=o+Math.imul(wt,Wt)|0,o=o+Math.imul(vt,Ot)|0,m=m+Math.imul(vt,Wt)|0,d=d+Math.imul(bt,Ut)|0,o=o+Math.imul(bt,qt)|0,o=o+Math.imul(kt,Ut)|0,m=m+Math.imul(kt,qt)|0,d=d+Math.imul(gt,$t)|0,o=o+Math.imul(gt,Dt)|0,o=o+Math.imul(mt,$t)|0,m=m+Math.imul(mt,Dt)|0,d=d+Math.imul(pt,Ft)|0,o=o+Math.imul(pt,Ht)|0,o=o+Math.imul(yt,Ft)|0,m=m+Math.imul(yt,Ht)|0,d=d+Math.imul(rt,Vt)|0,o=o+Math.imul(rt,Gt)|0,o=o+Math.imul(ot,Vt)|0,m=m+Math.imul(ot,Gt)|0;var Jr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,d=Math.imul(xt,Ct),o=Math.imul(xt,zt),o=o+Math.imul(Bt,Ct)|0,m=Math.imul(Bt,zt),d=d+Math.imul(It,Nt)|0,o=o+Math.imul(It,Kt)|0,o=o+Math.imul(At,Nt)|0,m=m+Math.imul(At,Kt)|0,d=d+Math.imul(St,Ot)|0,o=o+Math.imul(St,Wt)|0,o=o+Math.imul(_t,Ot)|0,m=m+Math.imul(_t,Wt)|0,d=d+Math.imul(wt,Ut)|0,o=o+Math.imul(wt,qt)|0,o=o+Math.imul(vt,Ut)|0,m=m+Math.imul(vt,qt)|0,d=d+Math.imul(bt,$t)|0,o=o+Math.imul(bt,Dt)|0,o=o+Math.imul(kt,$t)|0,m=m+Math.imul(kt,Dt)|0,d=d+Math.imul(gt,Ft)|0,o=o+Math.imul(gt,Ht)|0,o=o+Math.imul(mt,Ft)|0,m=m+Math.imul(mt,Ht)|0,d=d+Math.imul(pt,Vt)|0,o=o+Math.imul(pt,Gt)|0,o=o+Math.imul(yt,Vt)|0,m=m+Math.imul(yt,Gt)|0;var Yr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,d=Math.imul(xt,Nt),o=Math.imul(xt,Kt),o=o+Math.imul(Bt,Nt)|0,m=Math.imul(Bt,Kt),d=d+Math.imul(It,Ot)|0,o=o+Math.imul(It,Wt)|0,o=o+Math.imul(At,Ot)|0,m=m+Math.imul(At,Wt)|0,d=d+Math.imul(St,Ut)|0,o=o+Math.imul(St,qt)|0,o=o+Math.imul(_t,Ut)|0,m=m+Math.imul(_t,qt)|0,d=d+Math.imul(wt,$t)|0,o=o+Math.imul(wt,Dt)|0,o=o+Math.imul(vt,$t)|0,m=m+Math.imul(vt,Dt)|0,d=d+Math.imul(bt,Ft)|0,o=o+Math.imul(bt,Ht)|0,o=o+Math.imul(kt,Ft)|0,m=m+Math.imul(kt,Ht)|0,d=d+Math.imul(gt,Vt)|0,o=o+Math.imul(gt,Gt)|0,o=o+Math.imul(mt,Vt)|0,m=m+Math.imul(mt,Gt)|0;var Zr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,d=Math.imul(xt,Ot),o=Math.imul(xt,Wt),o=o+Math.imul(Bt,Ot)|0,m=Math.imul(Bt,Wt),d=d+Math.imul(It,Ut)|0,o=o+Math.imul(It,qt)|0,o=o+Math.imul(At,Ut)|0,m=m+Math.imul(At,qt)|0,d=d+Math.imul(St,$t)|0,o=o+Math.imul(St,Dt)|0,o=o+Math.imul(_t,$t)|0,m=m+Math.imul(_t,Dt)|0,d=d+Math.imul(wt,Ft)|0,o=o+Math.imul(wt,Ht)|0,o=o+Math.imul(vt,Ft)|0,m=m+Math.imul(vt,Ht)|0,d=d+Math.imul(bt,Vt)|0,o=o+Math.imul(bt,Gt)|0,o=o+Math.imul(kt,Vt)|0,m=m+Math.imul(kt,Gt)|0;var Xr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,d=Math.imul(xt,Ut),o=Math.imul(xt,qt),o=o+Math.imul(Bt,Ut)|0,m=Math.imul(Bt,qt),d=d+Math.imul(It,$t)|0,o=o+Math.imul(It,Dt)|0,o=o+Math.imul(At,$t)|0,m=m+Math.imul(At,Dt)|0,d=d+Math.imul(St,Ft)|0,o=o+Math.imul(St,Ht)|0,o=o+Math.imul(_t,Ft)|0,m=m+Math.imul(_t,Ht)|0,d=d+Math.imul(wt,Vt)|0,o=o+Math.imul(wt,Gt)|0,o=o+Math.imul(vt,Vt)|0,m=m+Math.imul(vt,Gt)|0;var Qr=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,d=Math.imul(xt,$t),o=Math.imul(xt,Dt),o=o+Math.imul(Bt,$t)|0,m=Math.imul(Bt,Dt),d=d+Math.imul(It,Ft)|0,o=o+Math.imul(It,Ht)|0,o=o+Math.imul(At,Ft)|0,m=m+Math.imul(At,Ht)|0,d=d+Math.imul(St,Vt)|0,o=o+Math.imul(St,Gt)|0,o=o+Math.imul(_t,Vt)|0,m=m+Math.imul(_t,Gt)|0;var tn=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(tn>>>26)|0,tn&=67108863,d=Math.imul(xt,Ft),o=Math.imul(xt,Ht),o=o+Math.imul(Bt,Ft)|0,m=Math.imul(Bt,Ht),d=d+Math.imul(It,Vt)|0,o=o+Math.imul(It,Gt)|0,o=o+Math.imul(At,Vt)|0,m=m+Math.imul(At,Gt)|0;var en=(w+d|0)+((o&8191)<<13)|0;w=(m+(o>>>13)|0)+(en>>>26)|0,en&=67108863,d=Math.imul(xt,Vt),o=Math.imul(xt,Gt),o=o+Math.imul(Bt,Vt)|0,m=Math.imul(Bt,Gt);var rn=(w+d|0)+((o&8191)<<13)|0;return w=(m+(o>>>13)|0)+(rn>>>26)|0,rn&=67108863,k[0]=Or,k[1]=Wr,k[2]=Ur,k[3]=qr,k[4]=$r,k[5]=Dr,k[6]=Fr,k[7]=Hr,k[8]=Vr,k[9]=Gr,k[10]=jr,k[11]=Jr,k[12]=Yr,k[13]=Zr,k[14]=Xr,k[15]=Qr,k[16]=tn,k[17]=en,k[18]=rn,w!==0&&(k[19]=w,h.length++),h};Math.imul||(O=C);function j(b,s,u){u.negative=s.negative^b.negative,u.length=b.length+s.length;for(var h=0,f=0,p=0;p<u.length-1;p++){var k=f;f=0;for(var w=h&67108863,d=Math.min(p,s.length-1),o=Math.max(0,p-b.length+1);o<=d;o++){var m=p-o,K=b.words[m]|0,W=s.words[o]|0,U=K*W,D=U&67108863;k=k+(U/67108864|0)|0,D=D+w|0,w=D&67108863,k=k+(D>>>26)|0,f+=k>>>26,k&=67108863}u.words[p]=w,h=k,k=f}return h!==0?u.words[p]=h:u.length--,u._strip()}function ht(b,s,u){return j(b,s,u)}r.prototype.mulTo=function(s,u){var h,f=this.length+s.length;return this.length===10&&s.length===10?h=O(this,s,u):f<63?h=C(this,s,u):f<1024?h=j(this,s,u):h=ht(this,s,u),h};function Z(b,s){this.x=b,this.y=s}Z.prototype.makeRBT=function(s){for(var u=new Array(s),h=r.prototype._countBits(s)-1,f=0;f<s;f++)u[f]=this.revBin(f,h,s);return u},Z.prototype.revBin=function(s,u,h){if(s===0||s===h-1)return s;for(var f=0,p=0;p<u;p++)f|=(s&1)<<u-p-1,s>>=1;return f},Z.prototype.permute=function(s,u,h,f,p,k){for(var w=0;w<k;w++)f[w]=u[s[w]],p[w]=h[s[w]]},Z.prototype.transform=function(s,u,h,f,p,k){this.permute(k,s,u,h,f,p);for(var w=1;w<p;w<<=1)for(var d=w<<1,o=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),K=0;K<p;K+=d)for(var W=o,U=m,D=0;D<w;D++){var X=h[K+D],et=f[K+D],ye=h[K+D+w],rt=f[K+D+w],ot=W*ye-U*rt;rt=W*rt+U*ye,ye=ot,h[K+D]=X+ye,f[K+D]=et+rt,h[K+D+w]=X-ye,f[K+D+w]=et-rt,D!==d&&(ot=o*W-m*U,U=o*U+m*W,W=ot)}},Z.prototype.guessLen13b=function(s,u){var h=Math.max(u,s)|1,f=h&1,p=0;for(h=h/2|0;h;h=h>>>1)p++;return 1<<p+1+f},Z.prototype.conjugate=function(s,u,h){if(!(h<=1))for(var f=0;f<h/2;f++){var p=s[f];s[f]=s[h-f-1],s[h-f-1]=p,p=u[f],u[f]=-u[h-f-1],u[h-f-1]=-p}},Z.prototype.normalize13b=function(s,u){for(var h=0,f=0;f<u/2;f++){var p=Math.round(s[2*f+1]/u)*8192+Math.round(s[2*f]/u)+h;s[f]=p&67108863,p<67108864?h=0:h=p/67108864|0}return s},Z.prototype.convert13b=function(s,u,h,f){for(var p=0,k=0;k<u;k++)p=p+(s[k]|0),h[2*k]=p&8191,p=p>>>13,h[2*k+1]=p&8191,p=p>>>13;for(k=2*u;k<f;++k)h[k]=0;e(p===0),e((p&-8192)===0)},Z.prototype.stub=function(s){for(var u=new Array(s),h=0;h<s;h++)u[h]=0;return u},Z.prototype.mulp=function(s,u,h){var f=2*this.guessLen13b(s.length,u.length),p=this.makeRBT(f),k=this.stub(f),w=new Array(f),d=new Array(f),o=new Array(f),m=new Array(f),K=new Array(f),W=new Array(f),U=h.words;U.length=f,this.convert13b(s.words,s.length,w,f),this.convert13b(u.words,u.length,m,f),this.transform(w,k,d,o,f,p),this.transform(m,k,K,W,f,p);for(var D=0;D<f;D++){var X=d[D]*K[D]-o[D]*W[D];o[D]=d[D]*W[D]+o[D]*K[D],d[D]=X}return this.conjugate(d,o,f),this.transform(d,o,U,k,f,p),this.conjugate(U,k,f),this.normalize13b(U,f),h.negative=s.negative^u.negative,h.length=s.length+u.length,h._strip()},r.prototype.mul=function(s){var u=new r(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},r.prototype.mulf=function(s){var u=new r(null);return u.words=new Array(this.length+s.length),ht(this,s,u)},r.prototype.imul=function(s){return this.clone().mulTo(s,this)},r.prototype.imuln=function(s){var u=s<0;u&&(s=-s),e(typeof s=="number"),e(s<67108864);for(var h=0,f=0;f<this.length;f++){var p=(this.words[f]|0)*s,k=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=k>>>26,this.words[f]=k&67108863}return h!==0&&(this.words[f]=h,this.length++),u?this.ineg():this},r.prototype.muln=function(s){return this.clone().imuln(s)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(s){var u=B(s);if(u.length===0)return new r(1);for(var h=this,f=0;f<u.length&&u[f]===0;f++,h=h.sqr());if(++f<u.length)for(var p=h.sqr();f<u.length;f++,p=p.sqr())u[f]!==0&&(h=h.mul(p));return h},r.prototype.iushln=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,f=67108863>>>26-u<<26-u,p;if(u!==0){var k=0;for(p=0;p<this.length;p++){var w=this.words[p]&f,d=(this.words[p]|0)-w<<u;this.words[p]=d|k,k=w>>>26-u}k&&(this.words[p]=k,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},r.prototype.ishln=function(s){return e(this.negative===0),this.iushln(s)},r.prototype.iushrn=function(s,u,h){e(typeof s=="number"&&s>=0);var f;u?f=(u-u%26)/26:f=0;var p=s%26,k=Math.min((s-p)/26,this.length),w=67108863^67108863>>>p<<p,d=h;if(f-=k,f=Math.max(0,f),d){for(var o=0;o<k;o++)d.words[o]=this.words[o];d.length=k}if(k!==0)if(this.length>k)for(this.length-=k,o=0;o<this.length;o++)this.words[o]=this.words[o+k];else this.words[0]=0,this.length=1;var m=0;for(o=this.length-1;o>=0&&(m!==0||o>=f);o--){var K=this.words[o]|0;this.words[o]=m<<26-p|K>>>p,m=K&w}return d&&m!==0&&(d.words[d.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(s,u,h){return e(this.negative===0),this.iushrn(s,u,h)},r.prototype.shln=function(s){return this.clone().ishln(s)},r.prototype.ushln=function(s){return this.clone().iushln(s)},r.prototype.shrn=function(s){return this.clone().ishrn(s)},r.prototype.ushrn=function(s){return this.clone().iushrn(s)},r.prototype.testn=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,f=1<<u;if(this.length<=h)return!1;var p=this.words[h];return!!(p&f)},r.prototype.imaskn=function(s){e(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var f=67108863^67108863>>>u<<u;this.words[this.length-1]&=f}return this._strip()},r.prototype.maskn=function(s){return this.clone().imaskn(s)},r.prototype.iaddn=function(s){return e(typeof s=="number"),e(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},r.prototype._iaddn=function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},r.prototype.isubn=function(s){if(e(typeof s=="number"),e(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},r.prototype.addn=function(s){return this.clone().iaddn(s)},r.prototype.subn=function(s){return this.clone().isubn(s)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(s,u,h){var f=s.length+h,p;this._expand(f);var k,w=0;for(p=0;p<s.length;p++){k=(this.words[p+h]|0)+w;var d=(s.words[p]|0)*u;k-=d&67108863,w=(k>>26)-(d/67108864|0),this.words[p+h]=k&67108863}for(;p<this.length-h;p++)k=(this.words[p+h]|0)+w,w=k>>26,this.words[p+h]=k&67108863;if(w===0)return this._strip();for(e(w===-1),w=0,p=0;p<this.length;p++)k=-(this.words[p]|0)+w,w=k>>26,this.words[p]=k&67108863;return this.negative=1,this._strip()},r.prototype._wordDiv=function(s,u){var h=this.length-s.length,f=this.clone(),p=s,k=p.words[p.length-1]|0,w=this._countBits(k);h=26-w,h!==0&&(p=p.ushln(h),f.iushln(h),k=p.words[p.length-1]|0);var d=f.length-p.length,o;if(u!=="mod"){o=new r(null),o.length=d+1,o.words=new Array(o.length);for(var m=0;m<o.length;m++)o.words[m]=0}var K=f.clone()._ishlnsubmul(p,1,d);K.negative===0&&(f=K,o&&(o.words[d]=1));for(var W=d-1;W>=0;W--){var U=(f.words[p.length+W]|0)*67108864+(f.words[p.length+W-1]|0);for(U=Math.min(U/k|0,67108863),f._ishlnsubmul(p,U,W);f.negative!==0;)U--,f.negative=0,f._ishlnsubmul(p,1,W),f.isZero()||(f.negative^=1);o&&(o.words[W]=U)}return o&&o._strip(),f._strip(),u!=="div"&&h!==0&&f.iushrn(h),{div:o||null,mod:f}},r.prototype.divmod=function(s,u,h){if(e(!s.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var f,p,k;return this.negative!==0&&s.negative===0?(k=this.neg().divmod(s,u),u!=="mod"&&(f=k.div.neg()),u!=="div"&&(p=k.mod.neg(),h&&p.negative!==0&&p.iadd(s)),{div:f,mod:p}):this.negative===0&&s.negative!==0?(k=this.divmod(s.neg(),u),u!=="mod"&&(f=k.div.neg()),{div:f,mod:k.mod}):(this.negative&s.negative)!==0?(k=this.neg().divmod(s.neg(),u),u!=="div"&&(p=k.mod.neg(),h&&p.negative!==0&&p.isub(s)),{div:k.div,mod:p}):s.length>this.length||this.cmp(s)<0?{div:new r(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new r(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new r(this.modrn(s.words[0]))}:this._wordDiv(s,u)},r.prototype.div=function(s){return this.divmod(s,"div",!1).div},r.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},r.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},r.prototype.divRound=function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(s):u.mod,f=s.ushrn(1),p=s.andln(1),k=h.cmp(f);return k<0||p===1&&k===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},r.prototype.modrn=function(s){var u=s<0;u&&(s=-s),e(s<=67108863);for(var h=(1<<26)%s,f=0,p=this.length-1;p>=0;p--)f=(h*f+(this.words[p]|0))%s;return u?-f:f},r.prototype.modn=function(s){return this.modrn(s)},r.prototype.idivn=function(s){var u=s<0;u&&(s=-s),e(s<=67108863);for(var h=0,f=this.length-1;f>=0;f--){var p=(this.words[f]|0)+h*67108864;this.words[f]=p/s|0,h=p%s}return this._strip(),u?this.ineg():this},r.prototype.divn=function(s){return this.clone().idivn(s)},r.prototype.egcd=function(s){e(s.negative===0),e(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var f=new r(1),p=new r(0),k=new r(0),w=new r(1),d=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++d;for(var o=h.clone(),m=u.clone();!u.isZero();){for(var K=0,W=1;(u.words[0]&W)===0&&K<26;++K,W<<=1);if(K>0)for(u.iushrn(K);K-- >0;)(f.isOdd()||p.isOdd())&&(f.iadd(o),p.isub(m)),f.iushrn(1),p.iushrn(1);for(var U=0,D=1;(h.words[0]&D)===0&&U<26;++U,D<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(k.isOdd()||w.isOdd())&&(k.iadd(o),w.isub(m)),k.iushrn(1),w.iushrn(1);u.cmp(h)>=0?(u.isub(h),f.isub(k),p.isub(w)):(h.isub(u),k.isub(f),w.isub(p))}return{a:k,b:w,gcd:h.iushln(d)}},r.prototype._invmp=function(s){e(s.negative===0),e(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var f=new r(1),p=new r(0),k=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var w=0,d=1;(u.words[0]&d)===0&&w<26;++w,d<<=1);if(w>0)for(u.iushrn(w);w-- >0;)f.isOdd()&&f.iadd(k),f.iushrn(1);for(var o=0,m=1;(h.words[0]&m)===0&&o<26;++o,m<<=1);if(o>0)for(h.iushrn(o);o-- >0;)p.isOdd()&&p.iadd(k),p.iushrn(1);u.cmp(h)>=0?(u.isub(h),f.isub(p)):(h.isub(u),p.isub(f))}var K;return u.cmpn(1)===0?K=f:K=p,K.cmpn(0)<0&&K.iadd(s),K},r.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),h=s.clone();u.negative=0,h.negative=0;for(var f=0;u.isEven()&&h.isEven();f++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=u.cmp(h);if(p<0){var k=u;u=h,h=k}else if(p===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(f)},r.prototype.invm=function(s){return this.egcd(s).a.umod(s)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(s){return this.words[0]&s},r.prototype.bincn=function(s){e(typeof s=="number");var u=s%26,h=(s-u)/26,f=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=f,this;for(var p=f,k=h;p!==0&&k<this.length;k++){var w=this.words[k]|0;w+=p,p=w>>>26,w&=67108863,this.words[k]=w}return p!==0&&(this.words[k]=p,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var h;if(this.length>1)h=1;else{u&&(s=-s),e(s<=67108863,"Number is too big");var f=this.words[0]|0;h=f===s?0:f<s?-1:1}return this.negative!==0?-h|0:h},r.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},r.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var f=this.words[h]|0,p=s.words[h]|0;if(f!==p){f<p?u=-1:f>p&&(u=1);break}}return u},r.prototype.gtn=function(s){return this.cmpn(s)===1},r.prototype.gt=function(s){return this.cmp(s)===1},r.prototype.gten=function(s){return this.cmpn(s)>=0},r.prototype.gte=function(s){return this.cmp(s)>=0},r.prototype.ltn=function(s){return this.cmpn(s)===-1},r.prototype.lt=function(s){return this.cmp(s)===-1},r.prototype.lten=function(s){return this.cmpn(s)<=0},r.prototype.lte=function(s){return this.cmp(s)<=0},r.prototype.eqn=function(s){return this.cmpn(s)===0},r.prototype.eq=function(s){return this.cmp(s)===0},r.red=function(s){return new dt(s)},r.prototype.toRed=function(s){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},r.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(s){return this.red=s,this},r.prototype.forceRed=function(s){return e(!this.red,"Already a number in reduction context"),this._forceRed(s)},r.prototype.redAdd=function(s){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},r.prototype.redIAdd=function(s){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},r.prototype.redSub=function(s){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},r.prototype.redISub=function(s){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},r.prototype.redShl=function(s){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},r.prototype.redMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},r.prototype.redIMul=function(s){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},r.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(s){return e(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var ne={k256:null,p224:null,p192:null,p25519:null};function it(b,s){this.name=b,this.p=new r(s,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}it.prototype._tmp=function(){var s=new r(null);return s.words=new Array(Math.ceil(this.n/13)),s},it.prototype.ireduce=function(s){var u=s,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var f=h<this.n?-1:u.ucmp(this.p);return f===0?(u.words[0]=0,u.length=1):f>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},it.prototype.split=function(s,u){s.iushrn(this.n,0,u)},it.prototype.imulK=function(s){return s.imul(this.k)};function Qt(){it.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(Qt,it),Qt.prototype.split=function(s,u){for(var h=4194303,f=Math.min(s.length,9),p=0;p<f;p++)u.words[p]=s.words[p];if(u.length=f,s.length<=9){s.words[0]=0,s.length=1;return}var k=s.words[9];for(u.words[u.length++]=k&h,p=10;p<s.length;p++){var w=s.words[p]|0;s.words[p-10]=(w&h)<<4|k>>>22,k=w}k>>>=22,s.words[p-10]=k,k===0&&s.length>10?s.length-=10:s.length-=9},Qt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,h=0;h<s.length;h++){var f=s.words[h]|0;u+=f*977,s.words[h]=u&67108863,u=f*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function _e(){it.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(_e,it);function Nn(){it.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(Nn,it);function Kr(){it.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(Kr,it),Kr.prototype.imulK=function(s){for(var u=0,h=0;h<s.length;h++){var f=(s.words[h]|0)*19+u,p=f&67108863;f>>>=26,s.words[h]=p,u=f}return u!==0&&(s.words[s.length++]=u),s},r._prime=function(s){if(ne[s])return ne[s];var u;if(s==="k256")u=new Qt;else if(s==="p224")u=new _e;else if(s==="p192")u=new Nn;else if(s==="p25519")u=new Kr;else throw new Error("Unknown prime "+s);return ne[s]=u,u};function dt(b){if(typeof b=="string"){var s=r._prime(b);this.m=s.p,this.prime=s}else e(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}dt.prototype._verify1=function(s){e(s.negative===0,"red works only with positives"),e(s.red,"red works only with red numbers")},dt.prototype._verify2=function(s,u){e((s.negative|u.negative)===0,"red works only with positives"),e(s.red&&s.red===u.red,"red works only with red numbers")},dt.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(S(s,s.umod(this.m)._forceRed(this)),s)},dt.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},dt.prototype.add=function(s,u){this._verify2(s,u);var h=s.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},dt.prototype.iadd=function(s,u){this._verify2(s,u);var h=s.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},dt.prototype.sub=function(s,u){this._verify2(s,u);var h=s.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},dt.prototype.isub=function(s,u){this._verify2(s,u);var h=s.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},dt.prototype.shl=function(s,u){return this._verify1(s),this.imod(s.ushln(u))},dt.prototype.imul=function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},dt.prototype.mul=function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},dt.prototype.isqr=function(s){return this.imul(s,s.clone())},dt.prototype.sqr=function(s){return this.mul(s,s)},dt.prototype.sqrt=function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var h=this.m.add(new r(1)).iushrn(2);return this.pow(s,h)}for(var f=this.m.subn(1),p=0;!f.isZero()&&f.andln(1)===0;)p++,f.iushrn(1);e(!f.isZero());var k=new r(1).toRed(this),w=k.redNeg(),d=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new r(2*o*o).toRed(this);this.pow(o,d).cmp(w)!==0;)o.redIAdd(w);for(var m=this.pow(o,f),K=this.pow(s,f.addn(1).iushrn(1)),W=this.pow(s,f),U=p;W.cmp(k)!==0;){for(var D=W,X=0;D.cmp(k)!==0;X++)D=D.redSqr();e(X<U);var et=this.pow(m,new r(1).iushln(U-X-1));K=K.redMul(et),m=et.redSqr(),W=W.redMul(m),U=X}return K},dt.prototype.invm=function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},dt.prototype.pow=function(s,u){if(u.isZero())return new r(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var h=4,f=new Array(1<<h);f[0]=new r(1).toRed(this),f[1]=s;for(var p=2;p<f.length;p++)f[p]=this.mul(f[p-1],s);var k=f[0],w=0,d=0,o=u.bitLength()%26;for(o===0&&(o=26),p=u.length-1;p>=0;p--){for(var m=u.words[p],K=o-1;K>=0;K--){var W=m>>K&1;if(k!==f[0]&&(k=this.sqr(k)),W===0&&w===0){d=0;continue}w<<=1,w|=W,d++,!(d!==h&&(p!==0||K!==0))&&(k=this.mul(k,f[w]),d=0,w=0)}o=26}return k},dt.prototype.convertTo=function(s){var u=s.umod(this.m);return u===s?u.clone():u},dt.prototype.convertFrom=function(s){var u=s.clone();return u.red=null,u},r.mont=function(s){return new Ie(s)};function Ie(b){dt.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(Ie,dt),Ie.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},Ie.prototype.convertFrom=function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},Ie.prototype.imul=function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(u),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),k=p;return p.cmp(this.m)>=0?k=p.isub(this.m):p.cmpn(0)<0&&(k=p.iadd(this.m)),k._forceRed(this)},Ie.prototype.mul=function(s,u){if(s.isZero()||u.isZero())return new r(0)._forceRed(this);var h=s.mul(u),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),k=p;return p.cmp(this.m)>=0?k=p.isub(this.m):p.cmpn(0)<0&&(k=p.iadd(this.m)),k._forceRed(this)},Ie.prototype.invm=function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof nn>"u"||nn,ns)});var os=cr((rc,is)=>{at();ct();var hr=Ai().Buffer;function Li(c){if(c.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<c.length;n++){var r=c.charAt(n),i=r.charCodeAt(0);if(t[i]!==255)throw new TypeError(r+" is ambiguous");t[i]=n}var a=c.length,l=c.charAt(0),g=Math.log(a)/Math.log(256),S=Math.log(256)/Math.log(a);function A(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=hr.from(_)),!hr.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var L=0,B=0,C=0,O=_.length;C!==O&&_[C]===0;)C++,L++;for(var j=(O-C)*S+1>>>0,ht=new Uint8Array(j);C!==O;){for(var Z=_[C],ne=0,it=j-1;(Z!==0||ne<B)&&it!==-1;it--,ne++)Z+=256*ht[it]>>>0,ht[it]=Z%a>>>0,Z=Z/a>>>0;if(Z!==0)throw new Error("Non-zero carry");B=ne,C++}for(var Qt=j-B;Qt!==j&&ht[Qt]===0;)Qt++;for(var _e=l.repeat(L);Qt<j;++Qt)_e+=c.charAt(ht[Qt]);return _e}function I(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return hr.alloc(0);var L=0;if(_[L]!==" "){for(var B=0,C=0;_[L]===l;)B++,L++;for(var O=(_.length-L)*g+1>>>0,j=new Uint8Array(O);_[L];){var ht=t[_.charCodeAt(L)];if(ht===255)return;for(var Z=0,ne=O-1;(ht!==0||Z<C)&&ne!==-1;ne--,Z++)ht+=a*j[ne]>>>0,j[ne]=ht%256>>>0,ht=ht/256>>>0;if(ht!==0)throw new Error("Non-zero carry");C=Z,L++}if(_[L]!==" "){for(var it=O-C;it!==O&&j[it]===0;)it++;var Qt=hr.allocUnsafe(B+(O-it));Qt.fill(0,0,B);for(var _e=B;it!==O;)Qt[_e++]=j[it++];return Qt}}}function z(_){var L=I(_);if(L)return L;throw new Error("Non-base"+a+" character")}return{encode:A,decodeUnsafe:I,decode:z}}is.exports=Li});var cs=cr((ic,as)=>{at();ct();var Ri=os(),Mi="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";as.exports=Ri(Mi)});var ds=cr(qe=>{at();ct();Object.defineProperty(qe,"__esModule",{value:!0});var yr;function Ni(c){{let t=Zt.Buffer.from(c);t.reverse();let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return yr.toBigInt(c,!1)}qe.toBigIntLE=Ni;function Ki(c){{let t=c.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return yr.toBigInt(c,!0)}qe.toBigIntBE=Ki;function Oi(c,t){{let e=c.toString(16),n=Zt.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return yr.fromBigInt(c,Zt.Buffer.allocUnsafe(t),!1)}qe.toBufferLE=Oi;function Wi(c,t){{let e=c.toString(16);return Zt.Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}return yr.fromBigInt(c,Zt.Buffer.allocUnsafe(t),!0)}qe.toBufferBE=Wi});at();ct();_i();var _n=Ae(ss()),Jt=Ae(cs());at();ct();at();ct();at();ct();function sn(c){if(!Number.isSafeInteger(c)||c<0)throw new Error(`positive integer expected, not ${c}`)}function Ei(c){return c instanceof Uint8Array||c!=null&&typeof c=="object"&&c.constructor.name==="Uint8Array"}function Ze(c,...t){if(!Ei(c))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(c.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${c.length}`)}function Oe(c,t=!0){if(c.destroyed)throw new Error("Hash instance has been destroyed");if(t&&c.finished)throw new Error("Hash#digest() has already been called")}function lr(c,t){Ze(c);let e=t.outputLen;if(c.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}at();ct();var us=c=>new Uint32Array(c.buffer,c.byteOffset,Math.floor(c.byteLength/4)),fr=c=>new DataView(c.buffer,c.byteOffset,c.byteLength),ae=(c,t)=>c<<32-t|c>>>t;var on=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Pi=c=>c<<24&4278190080|c<<8&16711680|c>>>8&65280|c>>>24&255;function an(c){for(let t=0;t<c.length;t++)c[t]=Pi(c[t])}function Ti(c){if(typeof c!="string")throw new Error(`utf8ToBytes expected string, got ${typeof c}`);return new Uint8Array(new TextEncoder().encode(c))}function Ue(c){return typeof c=="string"&&(c=Ti(c)),Ze(c),c}var We=class{clone(){return this._cloneInto()}},fc={}.toString;function dr(c){let t=n=>c().update(Ue(n)).digest(),e=c();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>c(),t}function hs(c){let t=(n,r)=>c(r).update(Ue(n)).digest(),e=c({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=n=>c(n),t}function Ci(c,t,e,n){if(typeof c.setBigUint64=="function")return c.setBigUint64(t,e,n);let r=BigInt(32),i=BigInt(4294967295),a=Number(e>>r&i),l=Number(e&i),g=n?4:0,S=n?0:4;c.setUint32(t+g,a,n),c.setUint32(t+S,l,n)}var ls=(c,t,e)=>c&t^~c&e,fs=(c,t,e)=>c&t^c&e^t&e,pr=class extends We{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=fr(this.buffer)}update(t){Oe(this);let{view:e,buffer:n,blockLen:r}=this;t=Ue(t);let i=t.length;for(let a=0;a<i;){let l=Math.min(r-this.pos,i-a);if(l===r){let g=fr(t);for(;r<=i-a;a+=r)this.process(g,a);continue}n.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Oe(this),lr(t,this),this.finished=!0;let{buffer:e,view:n,blockLen:r,isLE:i}=this,{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let I=a;I<r;I++)e[I]=0;Ci(n,r-8,BigInt(this.length*8),i),this.process(n,0);let l=fr(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let S=g/4,A=this.get();if(S>A.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<S;I++)l.setUint32(4*I,A[I],i)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:n,length:r,finished:i,destroyed:a,pos:l}=this;return t.length=r,t.pos=l,t.finished=i,t.destroyed=a,r%e&&t.buffer.set(n),t}};var zi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ge=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),me=new Uint32Array(64),cn=class extends pr{constructor(){super(64,32,8,!1),this.A=ge[0]|0,this.B=ge[1]|0,this.C=ge[2]|0,this.D=ge[3]|0,this.E=ge[4]|0,this.F=ge[5]|0,this.G=ge[6]|0,this.H=ge[7]|0}get(){let{A:t,B:e,C:n,D:r,E:i,F:a,G:l,H:g}=this;return[t,e,n,r,i,a,l,g]}set(t,e,n,r,i,a,l,g){this.A=t|0,this.B=e|0,this.C=n|0,this.D=r|0,this.E=i|0,this.F=a|0,this.G=l|0,this.H=g|0}process(t,e){for(let I=0;I<16;I++,e+=4)me[I]=t.getUint32(e,!1);for(let I=16;I<64;I++){let z=me[I-15],_=me[I-2],L=ae(z,7)^ae(z,18)^z>>>3,B=ae(_,17)^ae(_,19)^_>>>10;me[I]=B+me[I-7]+L+me[I-16]|0}let{A:n,B:r,C:i,D:a,E:l,F:g,G:S,H:A}=this;for(let I=0;I<64;I++){let z=ae(l,6)^ae(l,11)^ae(l,25),_=A+z+ls(l,g,S)+zi[I]+me[I]|0,B=(ae(n,2)^ae(n,13)^ae(n,22))+fs(n,r,i)|0;A=S,S=g,g=l,l=a+_|0,a=i,i=r,r=n,n=_+B|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,l=l+this.E|0,g=g+this.F|0,S=S+this.G|0,A=A+this.H|0,this.set(n,r,i,a,l,g,S,A)}roundClean(){me.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var un=dr(()=>new cn);var Je=Ae(xi()),y=Ae(ts()),si=Ae(ts()),ar=Ae(ds());at();ct();var hn=class extends TypeError{constructor(t,e){let n,{message:r,explanation:i,...a}=t,{path:l}=t,g=l.length===0?r:`At path: ${l.join(".")} -- ${r}`;super(i??g),i!=null&&(this.cause=g),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}};function Ui(c){return Xe(c)&&typeof c[Symbol.iterator]=="function"}function Xe(c){return typeof c=="object"&&c!=null}function gr(c){return Xe(c)&&!Array.isArray(c)}function ce(c){return typeof c=="symbol"?c.toString():typeof c=="string"?JSON.stringify(c):`${c}`}function qi(c){let{done:t,value:e}=c.next();return t?void 0:e}function $i(c,t,e,n){if(c===!0)return;c===!1?c={}:typeof c=="string"&&(c={message:c});let{path:r,branch:i}=t,{type:a}=e,{refinement:l,message:g=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${ce(n)}\``}=c;return{value:n,type:a,refinement:l,key:r[r.length-1],path:r,branch:i,...c,message:g}}function*ps(c,t,e,n){Ui(c)||(c=[c]);for(let r of c){let i=$i(r,t,e,n);i&&(yield i)}}function*ln(c,t,e={}){let{path:n=[],branch:r=[c],coerce:i=!1,mask:a=!1}=e,l={path:n,branch:r,mask:a};i&&(c=t.coercer(c,l));let g="valid";for(let S of t.validator(c,l))S.explanation=e.message,g="not_valid",yield[S,void 0];for(let[S,A,I]of t.entries(c,l)){let z=ln(A,I,{path:S===void 0?n:[...n,S],branch:S===void 0?r:[...r,A],coerce:i,mask:a,message:e.message});for(let _ of z)_[0]?(g=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):i&&(A=_[1],S===void 0?c=A:c instanceof Map?c.set(S,A):c instanceof Set?c.add(A):Xe(c)&&(A!==void 0||S in c)&&(c[S]=A))}if(g!=="not_valid")for(let S of t.refiner(c,l))S.explanation=e.message,g="not_refined",yield[S,void 0];g==="valid"&&(yield[void 0,c])}var se=class{constructor(t){let{type:e,schema:n,validator:r,refiner:i,coercer:a=g=>g,entries:l=function*(){}}=t;this.type=e,this.schema=n,this.entries=l,this.coercer=a,r?this.validator=(g,S)=>{let A=r(g,S);return ps(A,S,this,g)}:this.validator=()=>[],i?this.refiner=(g,S)=>{let A=i(g,S);return ps(A,S,this,g)}:this.refiner=()=>[]}assert(t,e){return fn(t,this,e)}create(t,e){return E(t,this,e)}is(t){return ys(t,this)}mask(t,e){return Di(t,this,e)}validate(t,e={}){return Qe(t,this,e)}};function fn(c,t,e){let n=Qe(c,t,{message:e});if(n[0])throw n[0]}function E(c,t,e){let n=Qe(c,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Di(c,t,e){let n=Qe(c,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function ys(c,t){return!Qe(c,t)[0]}function Qe(c,t,e={}){let n=ln(c,t,e),r=qi(n);return r[0]?[new hn(r[0],function*(){for(let a of n)a[0]&&(yield a[0])}),void 0]:[void 0,r[1]]}function Be(c,t){return new se({type:c,schema:null,validator:t})}function gs(){return Be("any",()=>!0)}function P(c){return new se({type:"array",schema:c,*entries(t){if(c&&Array.isArray(t))for(let[e,n]of t.entries())yield[e,n,c]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ce(t)}`}})}function ue(){return Be("boolean",c=>typeof c=="boolean")}function mr(c){return Be("instance",t=>t instanceof c||`Expected a \`${c.name}\` instance, but received: ${ce(t)}`)}function ut(c){let t=ce(c),e=typeof c;return new se({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?c:null,validator(n){return n===c||`Expected the literal \`${t}\`, but received: ${ce(n)}`}})}function Fi(){return Be("never",()=>!1)}function T(c){return new se({...c,validator:(t,e)=>t===null||c.validator(t,e),refiner:(t,e)=>t===null||c.refiner(t,e)})}function v(){return Be("number",c=>typeof c=="number"&&!isNaN(c)||`Expected a number, but received: ${ce(c)}`)}function q(c){return new se({...c,validator:(t,e)=>t===void 0||c.validator(t,e),refiner:(t,e)=>t===void 0||c.refiner(t,e)})}function dn(c,t){return new se({type:"record",schema:null,*entries(e){if(Xe(e))for(let n in e){let r=e[n];yield[n,n,c],yield[n,r,t]}},validator(e){return gr(e)||`Expected an object, but received: ${ce(e)}`},coercer(e){return gr(e)?{...e}:e}})}function R(){return Be("string",c=>typeof c=="string"||`Expected a string, but received: ${ce(c)}`)}function br(c){let t=Fi();return new se({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let n=Math.max(c.length,e.length);for(let r=0;r<n;r++)yield[r,e[r],c[r]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ce(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function x(c){let t=Object.keys(c);return new se({type:"type",schema:c,*entries(e){if(Xe(e))for(let n of t)yield[n,e[n],c[n]]},validator(e){return gr(e)||`Expected an object, but received: ${ce(e)}`},coercer(e){return gr(e)?{...e}:e}})}function Xt(c){let t=c.map(e=>e.type).join(" | ");return new se({type:"union",schema:null,coercer(e,n){for(let r of c){let[i,a]=r.validate(e,{coerce:!0,mask:n.mask});if(!i)return a}return e},validator(e,n){let r=[];for(let i of c){let[...a]=ln(e,i,n),[l]=a;if(l[0])for(let[g]of a)g&&r.push(g);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ce(e)}`,...r]}})}function Le(){return Be("unknown",()=>!0)}function $e(c,t,e){return new se({...c,coercer:(n,r)=>ys(n,t)?c.coercer(e(n,r),r):c.coercer(n,r)})}var ii=Ae(Bi());at();ct();at();ct();var kr=BigInt(4294967295),ms=BigInt(32);function Hi(c,t=!1){return t?{h:Number(c&kr),l:Number(c>>ms&kr)}:{h:Number(c>>ms&kr)|0,l:Number(c&kr)|0}}function bs(c,t=!1){let e=new Uint32Array(c.length),n=new Uint32Array(c.length);for(let r=0;r<c.length;r++){let{h:i,l:a}=Hi(c[r],t);[e[r],n[r]]=[i,a]}return[e,n]}var ks=(c,t,e)=>c<<e|t>>>32-e,ws=(c,t,e)=>t<<e|c>>>32-e,vs=(c,t,e)=>t<<e-32|c>>>64-e,Ss=(c,t,e)=>c<<e-32|t>>>64-e;var As=[],xs=[],Bs=[],Vi=BigInt(0),tr=BigInt(1),Gi=BigInt(2),ji=BigInt(7),Ji=BigInt(256),Yi=BigInt(113);for(let c=0,t=tr,e=1,n=0;c<24;c++){[e,n]=[n,(2*e+3*n)%5],As.push(2*(5*n+e)),xs.push((c+1)*(c+2)/2%64);let r=Vi;for(let i=0;i<7;i++)t=(t<<tr^(t>>ji)*Yi)%Ji,t&Gi&&(r^=tr<<(tr<<BigInt(i))-tr);Bs.push(r)}var[Zi,Xi]=bs(Bs,!0),_s=(c,t,e)=>e>32?vs(c,t,e):ks(c,t,e),Is=(c,t,e)=>e>32?Ss(c,t,e):ws(c,t,e);function Qi(c,t=24){let e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let a=0;a<10;a++)e[a]=c[a]^c[a+10]^c[a+20]^c[a+30]^c[a+40];for(let a=0;a<10;a+=2){let l=(a+8)%10,g=(a+2)%10,S=e[g],A=e[g+1],I=_s(S,A,1)^e[l],z=Is(S,A,1)^e[l+1];for(let _=0;_<50;_+=10)c[a+_]^=I,c[a+_+1]^=z}let r=c[2],i=c[3];for(let a=0;a<24;a++){let l=xs[a],g=_s(r,i,l),S=Is(r,i,l),A=As[a];r=c[A],i=c[A+1],c[A]=g,c[A+1]=S}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)e[l]=c[a+l];for(let l=0;l<10;l++)c[a+l]^=~e[(l+2)%10]&e[(l+4)%10]}c[0]^=Zi[n],c[1]^=Xi[n]}e.fill(0)}var De=class extends We{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,sn(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=us(this.state)}keccak(){on||an(this.state32),Qi(this.state32,this.rounds),on||an(this.state32),this.posOut=0,this.pos=0}update(t){Oe(this);let{blockLen:e,state:n}=this;t=Ue(t);let r=t.length;for(let i=0;i<r;){let a=Math.min(e-this.pos,r-i);for(let l=0;l<a;l++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,(e&128)!==0&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Oe(this,!1),Ze(t),this.finish();let e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();let a=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return sn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(lr(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:a}=this;return t||(t=new De(e,n,r,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=a,t.destroyed=this.destroyed,t}},be=(c,t,e)=>dr(()=>new De(t,c,e)),Oc=be(6,144,224/8),Wc=be(6,136,256/8),Uc=be(6,104,384/8),qc=be(6,72,512/8),$c=be(1,144,224/8),pn=be(1,136,256/8),Dc=be(1,104,384/8),Fc=be(1,72,512/8),Ls=(c,t,e)=>hs((n={})=>new De(t,c,n.dkLen===void 0?e:n.dkLen,!0)),Hc=Ls(31,168,128/8),Vc=Ls(31,136,256/8);var to=xe.utils.randomPrivateKey,Rs=()=>{let c=xe.utils.randomPrivateKey(),t=Sr(c),e=new Uint8Array(64);return e.set(c),e.set(t,32),{publicKey:t,secretKey:e}},Sr=xe.getPublicKey;function Ms(c){try{return xe.ExtendedPoint.fromHex(c),!0}catch{return!1}}var En=(c,t)=>xe.sign(c,t.slice(0,32)),eo=xe.verify,H=c=>$.isBuffer(c)?c:c instanceof Uint8Array?$.from(c.buffer,c.byteOffset,c.byteLength):$.from(c),_r=class{constructor(t){Object.assign(this,t)}encode(){return $.from((0,Je.serialize)(vr,this))}static decode(t){return(0,Je.deserialize)(vr,this,t)}static decodeUnchecked(t){return(0,Je.deserializeUnchecked)(vr,this,t)}},Es=class extends _r{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}},vr=new Map,oi,ro=32,pe=32;function no(c){return c._bn!==void 0}var Ps=1,M=class extends _r{constructor(t){if(super({}),this._bn=void 0,no(t))this._bn=t._bn;else{if(typeof t=="string"){let e=Jt.default.decode(t);if(e.length!=pe)throw new Error("Invalid public key input");this._bn=new _n.default(e)}else this._bn=new _n.default(t);if(this._bn.byteLength()>pe)throw new Error("Invalid public key input")}}static unique(){let t=new M(Ps);return Ps+=1,new M(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Jt.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike($);if(t.length===pe)return t;let e=$.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){let r=$.concat([t.toBuffer(),$.from(e),n.toBuffer()]),i=un(r);return new M(i)}static createProgramAddressSync(t,e){let n=$.alloc(0);t.forEach(function(i){if(i.length>ro)throw new TypeError("Max seed length exceeded");n=$.concat([n,H(i)])}),n=$.concat([n,e.toBuffer(),$.from("ProgramDerivedAddress")]);let r=un(n);if(Ms(r))throw new Error("Invalid seeds, address must fall off the curve");return new M(r)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,r;for(;n!=0;){try{let i=t.concat($.from([n]));r=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new M(t);return Ms(e.toBytes())}};oi=M;M.default=new oi("11111111111111111111111111111111");vr.set(M,{kind:"struct",fields:[["_bn","u256"]]});var Ts=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let e=H(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=H(to()),this._publicKey=H(Sr(this._secretKey))}get publicKey(){return new M(this._publicKey)}get secretKey(){return $.concat([this._secretKey,this._publicKey],64)}},nu=new M("BPFLoader1111111111111111111111111111111111"),Pe=1280-40-8,Pn=127,Ir=64,Ar=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Ar.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var xr=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(xr.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Me=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Me.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Fe=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((i,a)=>{n.set(i.toBase58(),a)});let r=i=>{let a=n.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:r(i.programId),accountKeyIndexes:i.keys.map(a=>r(a.pubkey)),data:i.data}))}},V=(c="publicKey")=>y.blob(32,c),so=(c="signature")=>y.blob(64,c),Ee=(c="string")=>{let t=y.struct([y.u32("length"),y.u32("lengthPadding"),y.blob(y.offset(y.u32(),-8),"chars")],c),e=t.decode.bind(t),n=t.encode.bind(t),r=t;return r.decode=(i,a)=>e(i,a).chars.toString(),r.encode=(i,a,l)=>{let g={chars:$.from(i,"utf8")};return n(g,a,l)},r.alloc=i=>y.u32().span+y.u32().span+$.from(i,"utf8").length,r},io=(c="authorized")=>y.struct([V("staker"),V("withdrawer")],c),oo=(c="lockup")=>y.struct([y.ns64("unixTimestamp"),y.ns64("epoch"),V("custodian")],c),ao=(c="voteInit")=>y.struct([V("nodePubkey"),V("authorizedVoter"),V("authorizedWithdrawer"),y.u8("commission")],c),co=(c="voteAuthorizeWithSeedArgs")=>y.struct([y.u32("voteAuthorizationType"),V("currentAuthorityDerivedKeyOwnerPubkey"),Ee("currentAuthorityDerivedKeySeed"),V("newAuthorized")],c);function ai(c,t){let e=r=>{if(r.span>=0)return r.span;if(typeof r.alloc=="function")return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){let i=t[r.property];if(Array.isArray(i))return i.length*e(r.elementLayout)}else if("fields"in r)return ai({layout:r},t[r.property]);return 0},n=0;return c.layout.fields.forEach(r=>{n+=e(r)}),n}function te(c){let t=0,e=0;for(;;){let n=c.shift();if(t|=(n&127)<<e*7,e+=1,(n&128)===0)break}return t}function re(c,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){c.push(n);break}else n|=128,c.push(n)}}function Y(c,t){if(!c)throw new Error(t||"Assertion failed")}var He=class{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let n=new Map,r=a=>{let l=a.toBase58(),g=n.get(l);return g===void 0&&(g={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,g)),g},i=r(e);i.isSigner=!0,i.isWritable=!0;for(let a of t){r(a.programId).isInvoked=!0;for(let l of a.keys){let g=r(l.pubkey);g.isSigner||=l.isSigner,g.isWritable||=l.isWritable}}return new He(e,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];Y(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,g])=>g.isSigner&&g.isWritable),n=t.filter(([,g])=>g.isSigner&&!g.isWritable),r=t.filter(([,g])=>!g.isSigner&&g.isWritable),i=t.filter(([,g])=>!g.isSigner&&!g.isWritable),a={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Y(e.length>0,"Expected at least one writable signer key");let[g]=e[0];Y(g===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let l=[...e.map(([g])=>new M(g)),...n.map(([g])=>new M(g)),...r.map(([g])=>new M(g)),...i.map(([g])=>new M(g))];return[a,l]}extractTableLookup(t){let[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[r,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&r.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){let n=new Array,r=new Array;for(let[i,a]of this.keyMetaMap.entries())if(e(a)){let l=new M(i),g=t.findIndex(S=>S.equals(l));g>=0&&(Y(g<256,"Max lookup table index exceeded"),n.push(g),r.push(l),this.keyMetaMap.delete(i))}return[n,r]}},ci="Reached end of buffer unexpectedly";function he(c){if(c.length===0)throw new Error(ci);return c.shift()}function ee(c,...t){let[e]=t;if(t.length===2?e+(t[1]??0)>c.length:e>=c.length)throw new Error(ci);return c.splice(...t)}var ie=class{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new M(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Jt.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fe(this.staticAccountKeys)}static compile(t){let e=He.compile(t.instructions,t.payerKey),[n,r]=e.getMessageComponents(),a=new Fe(r).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:Jt.default.encode(l.data)}));return new ie({header:n,accountKeys:r,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];re(e,t);let n=this.instructions.map(I=>{let{accounts:z,programIdIndex:_}=I,L=Array.from(Jt.default.decode(I.data)),B=[];re(B,z.length);let C=[];return re(C,L.length),{programIdIndex:_,keyIndicesCount:$.from(B),keyIndices:z,dataLength:$.from(C),data:L}}),r=[];re(r,n.length);let i=$.alloc(Pe);$.from(r).copy(i);let a=r.length;n.forEach(I=>{let _=y.struct([y.u8("programIdIndex"),y.blob(I.keyIndicesCount.length,"keyIndicesCount"),y.seq(y.u8("keyIndex"),I.keyIndices.length,"keyIndices"),y.blob(I.dataLength.length,"dataLength"),y.seq(y.u8("userdatum"),I.data.length,"data")]).encode(I,i,a);a+=_}),i=i.slice(0,a);let l=y.struct([y.blob(1,"numRequiredSignatures"),y.blob(1,"numReadonlySignedAccounts"),y.blob(1,"numReadonlyUnsignedAccounts"),y.blob(e.length,"keyCount"),y.seq(V("key"),t,"keys"),V("recentBlockhash")]),g={numRequiredSignatures:$.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:$.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:$.from([this.header.numReadonlyUnsignedAccounts]),keyCount:$.from(e),keys:this.accountKeys.map(I=>H(I.toBytes())),recentBlockhash:Jt.default.decode(this.recentBlockhash)},S=$.alloc(2048),A=l.encode(g,S);return i.copy(S,A),S.slice(0,A+i.length)}static from(t){let e=[...t],n=he(e);if(n!==(n&Pn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let r=he(e),i=he(e),a=te(e),l=[];for(let z=0;z<a;z++){let _=ee(e,0,pe);l.push(new M($.from(_)))}let g=ee(e,0,pe),S=te(e),A=[];for(let z=0;z<S;z++){let _=he(e),L=te(e),B=ee(e,0,L),C=te(e),O=ee(e,0,C),j=Jt.default.encode($.from(O));A.push({programIdIndex:_,accounts:B,data:j})}let I={header:{numRequiredSignatures:n,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:i},recentBlockhash:Jt.default.encode($.from(g)),accountKeys:l,instructions:A};return new ie(I)}},ve=class{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fe(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let r=t-n,i=this.addressTableLookups.reduce((a,l)=>a+l.writableIndexes.length,0);return r<i}else if(t>=this.header.numRequiredSignatures){let r=t-e,a=n-e-this.header.numReadonlyUnsignedAccounts;return r<a}else{let r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let n of this.addressTableLookups){let r=t.find(i=>i.key.equals(n.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let i of n.writableIndexes)if(i<r.state.addresses.length)e.writable.push(r.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(let i of n.readonlyIndexes)if(i<r.state.addresses.length)e.readonly.push(r.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){let e=He.compile(t.instructions,t.payerKey),n=new Array,r={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(let A of i){let I=e.extractTableLookup(A);if(I!==void 0){let[z,{writable:_,readonly:L}]=I;n.push(z),r.writable.push(..._),r.readonly.push(...L)}}let[a,l]=e.getMessageComponents(),S=new Fe(l,r).compileInstructions(t.instructions);return new ve({header:a,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:n})}serialize(){let t=Array();re(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),n=Array();re(n,this.compiledInstructions.length);let r=this.serializeAddressTableLookups(),i=Array();re(i,this.addressTableLookups.length);let a=y.struct([y.u8("prefix"),y.struct([y.u8("numRequiredSignatures"),y.u8("numReadonlySignedAccounts"),y.u8("numReadonlyUnsignedAccounts")],"header"),y.blob(t.length,"staticAccountKeysLength"),y.seq(V(),this.staticAccountKeys.length,"staticAccountKeys"),V("recentBlockhash"),y.blob(n.length,"instructionsLength"),y.blob(e.length,"serializedInstructions"),y.blob(i.length,"addressTableLookupsLength"),y.blob(r.length,"serializedAddressTableLookups")]),l=new Uint8Array(Pe),g=1<<7,S=a.encode({prefix:g,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(A=>A.toBytes()),recentBlockhash:Jt.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},l);return l.slice(0,S)}serializeInstructions(){let t=0,e=new Uint8Array(Pe);for(let n of this.compiledInstructions){let r=Array();re(r,n.accountKeyIndexes.length);let i=Array();re(i,n.data.length);let a=y.struct([y.u8("programIdIndex"),y.blob(r.length,"encodedAccountKeyIndexesLength"),y.seq(y.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),y.blob(i.length,"encodedDataLength"),y.blob(n.data.length,"data")]);t+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Pe);for(let n of this.addressTableLookups){let r=Array();re(r,n.writableIndexes.length);let i=Array();re(i,n.readonlyIndexes.length);let a=y.struct([V("accountKey"),y.blob(r.length,"encodedWritableIndexesLength"),y.seq(y.u8(),n.writableIndexes.length,"writableIndexes"),y.blob(i.length,"encodedReadonlyIndexesLength"),y.seq(y.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],n=he(e),r=n&Pn;Y(n!==r,"Expected versioned message but received legacy message");let i=r;Y(i===0,`Expected versioned message with version 0 but found version ${i}`);let a={numRequiredSignatures:he(e),numReadonlySignedAccounts:he(e),numReadonlyUnsignedAccounts:he(e)},l=[],g=te(e);for(let L=0;L<g;L++)l.push(new M(ee(e,0,pe)));let S=Jt.default.encode(ee(e,0,pe)),A=te(e),I=[];for(let L=0;L<A;L++){let B=he(e),C=te(e),O=ee(e,0,C),j=te(e),ht=new Uint8Array(ee(e,0,j));I.push({programIdIndex:B,accountKeyIndexes:O,data:ht})}let z=te(e),_=[];for(let L=0;L<z;L++){let B=new M(ee(e,0,pe)),C=te(e),O=ee(e,0,C),j=te(e),ht=ee(e,0,j);_.push({accountKey:B,writableIndexes:O,readonlyIndexes:ht})}return new ve({header:a,staticAccountKeys:l,recentBlockhash:S,compiledInstructions:I,addressTableLookups:_})}},ui={deserializeMessageVersion(c){let t=c[0],e=t&Pn;return e===t?"legacy":e},deserialize:c=>{let t=ui.deserializeMessageVersion(c);if(t==="legacy")return ie.from(c);if(t===0)return ve.deserialize(c);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},ke=function(c){return c[c.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",c[c.PROCESSED=1]="PROCESSED",c[c.TIMED_OUT=2]="TIMED_OUT",c[c.NONCE_INVALID=3]="NONCE_INVALID",c}({}),uo=$.alloc(Ir).fill(0),tt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=$.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},J=class{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{let{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new tt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);let r=[],i=[];e.forEach(B=>{B.keys.forEach(O=>{i.push({...O})});let C=B.programId.toString();r.includes(C)||r.push(C)}),r.forEach(B=>{i.push({pubkey:new M(B),isSigner:!1,isWritable:!1})});let a=[];i.forEach(B=>{let C=B.pubkey.toString(),O=a.findIndex(j=>j.pubkey.toString()===C);O>-1?(a[O].isWritable=a[O].isWritable||B.isWritable,a[O].isSigner=a[O].isSigner||B.isSigner):a.push(B)}),a.sort(function(B,C){if(B.isSigner!==C.isSigner)return B.isSigner?-1:1;if(B.isWritable!==C.isWritable)return B.isWritable?-1:1;let O={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",O)});let l=a.findIndex(B=>B.pubkey.equals(n));if(l>-1){let[B]=a.splice(l,1);B.isSigner=!0,B.isWritable=!0,a.unshift(B)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let B of this.signatures){let C=a.findIndex(O=>O.pubkey.equals(B.publicKey));if(C>-1)a[C].isSigner||(a[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let g=0,S=0,A=0,I=[],z=[];a.forEach(({pubkey:B,isSigner:C,isWritable:O})=>{C?(I.push(B.toString()),g+=1,O||(S+=1)):(z.push(B.toString()),O||(A+=1))});let _=I.concat(z),L=e.map(B=>{let{data:C,programId:O}=B;return{programIdIndex:_.indexOf(O.toString()),accounts:B.keys.map(j=>_.indexOf(j.pubkey.toString())),data:Jt.default.encode(C)}});return L.forEach(B=>{Y(B.programIdIndex>=0),B.accounts.forEach(C=>Y(C>=0))}),new ie({header:{numRequiredSignatures:g,numReadonlySignedAccounts:S,numReadonlyUnsignedAccounts:A},accountKeys:_,recentBlockhash:t,instructions:L})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((r,i)=>e[i].equals(r.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(n=>{let r=n.toString();return e.has(r)?!1:(e.add(r),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let a=i.publicKey.toString();e.has(a)||(e.add(a),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));let r=this._compile();this._partialSign(r,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let a=i.publicKey.toString();e.has(a)||(e.add(a),n.push(i))}let r=this._compile();this._partialSign(r,...n)}_partialSign(t,...e){let n=t.serialize();e.forEach(r=>{let i=En(n,r.secretKey);this._addSignature(r.publicKey,H(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Y(e.length===64);let n=this.signatures.findIndex(r=>t.equals(r.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=$.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let n={};for(let{signature:r,publicKey:i}of this.signatures)r===null?e&&(n.missing||=[]).push(i):eo(r,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),r=this.serializeMessage();if(n){let i=this._getMessageSignednessErrors(r,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(r)}_serialize(t){let{signatures:e}=this,n=[];re(n,e.length);let r=n.length+e.length*64+t.length,i=$.alloc(r);return Y(e.length<256),$.from(n).copy(i,0),e.forEach(({signature:a},l)=>{a!==null&&(Y(a.length===64,"signature has invalid length"),$.from(a).copy(i,n.length+l*64))}),t.copy(i,n.length+e.length*64),Y(i.length<=Pe,`Transaction too large: ${i.length} > ${Pe}`),i}get keys(){return Y(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Y(this.instructions.length===1),this.instructions[0].programId}get data(){return Y(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],n=te(e),r=[];for(let i=0;i<n;i++){let a=ee(e,0,Ir);r.push(Jt.default.encode($.from(a)))}return J.populate(ie.from(e),r)}static populate(t,e=[]){let n=new J;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((r,i)=>{let a={signature:r==Jt.default.encode(uo)?null:Jt.default.decode(r),publicKey:t.accountKeys[i]};n.signatures.push(a)}),t.instructions.forEach(r=>{let i=r.accounts.map(a=>{let l=t.accountKeys[a];return{pubkey:l,isSigner:n.signatures.some(g=>g.publicKey.toString()===l.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});n.instructions.push(new tt({keys:i,programId:t.accountKeys[r.programIdIndex],data:Jt.default.decode(r.data)}))}),n._message=t,n._json=n.toJSON(),n}},Br=class{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){let{header:n,compiledInstructions:r,recentBlockhash:i}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:g}=n,S=a-l;Y(S>0,"Message header is invalid");let A=t.staticAccountKeys.length-a-g;Y(A>=0,"Message header is invalid");let I=t.getAccountKeys(e),z=I.get(0);if(z===void 0)throw new Error("Failed to decompile message because no account keys were found");let _=[];for(let L of r){let B=[];for(let O of L.accountKeyIndexes){let j=I.get(O);if(j===void 0)throw new Error(`Failed to find key for account key index ${O}`);let ht=O<a,Z;ht?Z=O<S:O<I.staticAccountKeys.length?Z=O-a<A:Z=O-I.staticAccountKeys.length<I.accountKeysFromLookups.writable.length,B.push({pubkey:j,isSigner:O<n.numRequiredSignatures,isWritable:Z})}let C=I.get(L.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${L.programIdIndex}`);_.push(new tt({programId:C,data:H(L.data),keys:B}))}return new Br({payerKey:z,instructions:_,recentBlockhash:i})}compileToLegacyMessage(){return ie.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return ve.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},Lr=class{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Y(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let n=[];for(let r=0;r<t.header.numRequiredSignatures;r++)n.push(new Uint8Array(Ir));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),e=Array();re(e,this.signatures.length);let n=y.struct([y.blob(e.length,"encodedSignaturesLength"),y.seq(so(),this.signatures.length,"signatures"),y.blob(t.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},r);return r.slice(0,i)}static deserialize(t){let e=[...t],n=[],r=te(e);for(let a=0;a<r;a++)n.push(new Uint8Array(ee(e,0,Ir)));let i=ui.deserialize(new Uint8Array(e));return new Lr(i,n)}sign(t){let e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let r of t){let i=n.findIndex(a=>a.equals(r.publicKey));Y(i>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[i]=En(e,r.secretKey)}}addSignature(t,e){Y(e.byteLength===64,"Signature must be 64 bytes long");let r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Y(r>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=e}},ho=160,lo=64,fo=ho/lo,hi=1e3/fo,fe=new M("SysvarC1ock11111111111111111111111111111111"),su=new M("SysvarEpochSchedu1e111111111111111111111111"),iu=new M("Sysvar1nstructions1111111111111111111111111"),yn=new M("SysvarRecentB1ockHashes11111111111111111111"),rr=new M("SysvarRent111111111111111111111111111111111"),ou=new M("SysvarRewards111111111111111111111111111111"),au=new M("SysvarS1otHashes111111111111111111111111111"),cu=new M("SysvarS1otHistory11111111111111111111111111"),gn=new M("SysvarStakeHistory1111111111111111111111111"),Ve=class extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:r}){let i=r?`Logs: 
${JSON.stringify(r.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",l;switch(t){case"send":l=`Transaction ${e} resulted in an error. 
${n}. `+i+a;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+i+a;break;default:l=`Unknown action '${(g=>g)(t)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=r||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(r=>{if(r&&r.meta&&r.meta.logMessages){let i=r.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}},uu={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},N=class extends Error{constructor({code:t,message:e,data:n},r){super(r!=null?`${r}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}};async function Cs(c,t,e,n){let r=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await c.sendTransaction(t,e,r),a;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)a=(await c.confirmTransaction({abortSignal:n?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:l}=t.nonceInfo,g=l.keys[0].pubkey;a=(await c.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:g,nonceValue:t.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),a=(await c.confirmTransaction(i,n&&n.commitment)).value;if(a.err)throw i!=null?new Ve({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(a)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(a)})`);return i}function Re(c){return new Promise(t=>setTimeout(t,c))}function G(c,t){let e=c.layout.span>=0?c.layout.span:ai(c,t),n=$.alloc(e),r=Object.assign({instruction:c.index},t);return c.layout.encode(r,n),n}function Q(c,t){let e;try{e=c.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.instruction!==c.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${c.index}`);return e}var po=y.nu64("lamportsPerSignature"),li=y.struct([y.u32("version"),y.u32("state"),V("authorizedPubkey"),V("nonce"),y.struct([po],"feeCalculator")]),zs=li.span,nr=class{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let e=li.decode(H(t),0);return new nr({authorizedPubkey:new M(e.authorizedPubkey),nonce:new M(e.nonce).toString(),feeCalculator:e.feeCalculator})}},yo=c=>{let t=c.decode.bind(c),e=c.encode.bind(c);return{decode:t,encode:e}},go=c=>t=>{let e=(0,si.blob)(c,t),{encode:n,decode:r}=yo(e),i=e;return i.decode=(a,l)=>{let g=r(a,l);return(0,ar.toBigIntLE)($.from(g))},i.encode=(a,l,g)=>{let S=(0,ar.toBufferLE)(a,c);return n(S,l,g)},i},Ge=go(8),Ns=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=y.u32("instruction").decode(t.data),r;for(let[i,a]of Object.entries(st))if(a.index==n){r=i;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e,space:n,programId:r}=Q(st.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:n,programId:new M(r)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:e}=Q(st.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e,seed:n,programId:r}=Q(st.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:n,programId:new M(r)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:e}=Q(st.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:n,space:r,programId:i}=Q(st.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new M(e),seed:n,space:r,programId:new M(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:e}=Q(st.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new M(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:e,seed:n,programId:r}=Q(st.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new M(e),seed:n,programId:new M(r)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:e,seed:n,lamports:r,space:i,programId:a}=Q(st.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new M(e),seed:n,lamports:r,space:i,programId:new M(a)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:e}=Q(st.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new M(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Q(st.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=Q(st.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e}=Q(st.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new M(e)}}static checkProgramId(t){if(!t.equals(jt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},st=Object.freeze({Create:{index:0,layout:y.struct([y.u32("instruction"),y.ns64("lamports"),y.ns64("space"),V("programId")])},Assign:{index:1,layout:y.struct([y.u32("instruction"),V("programId")])},Transfer:{index:2,layout:y.struct([y.u32("instruction"),Ge("lamports")])},CreateWithSeed:{index:3,layout:y.struct([y.u32("instruction"),V("base"),Ee("seed"),y.ns64("lamports"),y.ns64("space"),V("programId")])},AdvanceNonceAccount:{index:4,layout:y.struct([y.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:y.struct([y.u32("instruction"),V("authorized")])},AuthorizeNonceAccount:{index:7,layout:y.struct([y.u32("instruction"),V("authorized")])},Allocate:{index:8,layout:y.struct([y.u32("instruction"),y.ns64("space")])},AllocateWithSeed:{index:9,layout:y.struct([y.u32("instruction"),V("base"),Ee("seed"),y.ns64("space"),V("programId")])},AssignWithSeed:{index:10,layout:y.struct([y.u32("instruction"),V("base"),Ee("seed"),V("programId")])},TransferWithSeed:{index:11,layout:y.struct([y.u32("instruction"),Ge("lamports"),Ee("seed"),V("programId")])},UpgradeNonceAccount:{index:12,layout:y.struct([y.u32("instruction")])}}),jt=class{constructor(){}static createAccount(t){let e=st.Create,n=G(e,{lamports:t.lamports,space:t.space,programId:H(t.programId.toBuffer())});return new tt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){let r=st.TransferWithSeed;e=G(r,{lamports:BigInt(t.lamports),seed:t.seed,programId:H(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let r=st.Transfer;e=G(r,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new tt({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){let r=st.AssignWithSeed;e=G(r,{base:H(t.basePubkey.toBuffer()),seed:t.seed,programId:H(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let r=st.Assign;e=G(r,{programId:H(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new tt({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=st.CreateWithSeed,n=G(e,{base:H(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:H(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new tt({keys:r,programId:this.programId,data:n})}static createNonceAccount(t){let e=new J;"basePubkey"in t&&"seed"in t?e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zs,programId:this.programId})):e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zs,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){let e=st.InitializeNonceAccount,n=G(e,{authorized:H(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new tt(r)}static nonceAdvance(t){let e=st.AdvanceNonceAccount,n=G(e),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new tt(r)}static nonceWithdraw(t){let e=st.WithdrawNonceAccount,n=G(e,{lamports:t.lamports});return new tt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:yn,isSigner:!1,isWritable:!1},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let e=st.AuthorizeNonceAccount,n=G(e,{authorized:H(t.newAuthorizedPubkey.toBuffer())});return new tt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){let r=st.AllocateWithSeed;e=G(r,{base:H(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:H(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let r=st.Allocate;e=G(r,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new tt({keys:n,programId:this.programId,data:e})}};jt.programId=new M("11111111111111111111111111111111");var mo=Pe-300,Se=class{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Se.chunkSize)+1+1)}static async load(t,e,n,r,i){{let I=await t.getMinimumBalanceForRentExemption(i.length),z=await t.getAccountInfo(n.publicKey,"confirmed"),_=null;if(z!==null){if(z.executable)return console.error("Program load failed, account is already executable"),!1;z.data.length!==i.length&&(_=_||new J,_.add(jt.allocate({accountPubkey:n.publicKey,space:i.length}))),z.owner.equals(r)||(_=_||new J,_.add(jt.assign({accountPubkey:n.publicKey,programId:r}))),z.lamports<I&&(_=_||new J,_.add(jt.transfer({fromPubkey:e.publicKey,toPubkey:n.publicKey,lamports:I-z.lamports})))}else _=new J().add(jt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:n.publicKey,lamports:I>0?I:1,space:i.length,programId:r}));_!==null&&await Cs(t,_,[e,n],{commitment:"confirmed"})}let a=y.struct([y.u32("instruction"),y.u32("offset"),y.u32("bytesLength"),y.u32("bytesLengthPadding"),y.seq(y.u8("byte"),y.offset(y.u32(),-8),"bytes")]),l=Se.chunkSize,g=0,S=i,A=[];for(;S.length>0;){let I=S.slice(0,l),z=$.alloc(l+16);a.encode({instruction:0,offset:g,bytes:I,bytesLength:0,bytesLengthPadding:0},z);let _=new J().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:r,data:z});A.push(Cs(t,_,[e,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Re(1e3/4),g+=l,S=S.slice(l)}await Promise.all(A);{let I=y.struct([y.u32("instruction")]),z=$.alloc(I.span);I.encode({instruction:1},z);let _=new J().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:r,data:z}),L="processed",B=await t.sendTransaction(_,[e,n],{preflightCommitment:L}),{context:C,value:O}=await t.confirmTransaction({signature:B,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},L);if(O.err)throw new Error(`Transaction ${B} failed (${JSON.stringify(O)})`);for(;;){try{if(await t.getSlot({commitment:L})>C.slot)break}catch{}await new Promise(j=>setTimeout(j,Math.round(hi/2)))}}return!0}};Se.chunkSize=mo;var hu=new M("BPFLoader2111111111111111111111111111111111"),Ks=class{static getMinNumSignatures(t){return Se.getMinNumSignatures(t)}static load(t,e,n,r,i){return Se.load(t,e,n,i,r)}};function bo(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var mn,Os;function ko(){if(Os)return mn;Os=1;var c=Object.prototype.toString,t=Object.keys||function(n){var r=[];for(var i in n)r.push(i);return r};function e(n,r){var i,a,l,g,S,A,I;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),r);if(I=c.call(n),I==="[object Array]"){for(l="[",a=n.length-1,i=0;i<a;i++)l+=e(n[i],!0)+",";return a>-1&&(l+=e(n[i],!0)),l+"]"}else if(I==="[object Object]"){for(g=t(n).sort(),a=g.length,l="",i=0;i<a;)S=g[i],A=e(n[S],!1),A!==void 0&&(l&&(l+=","),l+=JSON.stringify(S)+":"+A),i++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return r?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return mn=function(n){var r=e(n,!1);if(r!==void 0)return""+r},mn}var wo=ko(),Ws=bo(wo),er=32;function bn(c){let t=0;for(;c>1;)c/=2,t++;return t}function vo(c){return c===0?1:(c--,c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,c|=c>>16,c|=c>>32,c+1)}var In=class{constructor(t,e,n,r,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=r,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let e=bn(vo(t+er+1))-bn(er)-1,n=this.getSlotsInEpoch(e),r=t-(n-er);return[e,r]}else{let e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),r=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[r,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*er:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+bn(er)):this.slotsPerEpoch}},So=globalThis.fetch,An=class extends rs{constructor(t,e,n){let r=i=>{let a=es(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(r,t,e,n),this.underlyingSocket=void 0}call(...t){let e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){let e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}};function _o(c,t){let e;try{e=c.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==c.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${c.index}`);return e}var Us=56,Rr=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let e=_o(Io,t),n=t.length-Us;Y(n>=0,"lookup table is invalid"),Y(n%32===0,"lookup table is invalid");let r=n/32,{addresses:i}=y.struct([y.seq(V(),r,"addresses")]).decode(t.slice(Us));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new M(e.authority[0]):void 0,addresses:i.map(a=>new M(a))}}},Io={index:1,layout:y.struct([y.u32("typeIndex"),Ge("deactivationSlot"),y.nu64("lastExtendedSlot"),y.u8("lastExtendedStartIndex"),y.u8(),y.seq(V(),y.offset(y.u8(),-1),"authority")])},Ao=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xo(c){let t=c.match(Ao);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${c}\``);let[e,n,r,i]=t,a=c.startsWith("https:")?"wss:":"ws:",l=r==null?null:parseInt(r.slice(1),10),g=l==null?"":`:${l+1}`;return`${a}//${n}${g}${i}`}var lt=$e(mr(M),R(),c=>new M(c)),fi=br([R(),ut("base64")]),Tn=$e(mr($),fi,c=>$.from(c[0],"base64")),Bo=30*1e3;function Lo(c){if(/^https?:/.test(c)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return c}function nt(c){let t,e;if(typeof c=="string")t=c;else if(c){let{commitment:n,...r}=c;t=n,e=r}return{commitment:t,config:e}}function qs(c){return c.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function di(c){return Xt([x({jsonrpc:ut("2.0"),id:R(),result:c}),x({jsonrpc:ut("2.0"),id:R(),error:x({code:Le(),message:R(),data:q(gs())})})])}var Ro=di(Le());function F(c){return $e(di(c),Ro,t=>"error"in t?t:{...t,result:E(t.result,c)})}function ft(c){return F(x({context:x({slot:v()}),value:c}))}function zr(c){return x({context:x({slot:v()}),value:c})}function kn(c,t){return c===0?new ve({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new M(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Jt.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ie(t)}var Mo=x({foundation:v(),foundationTerm:v(),initial:v(),taper:v(),terminal:v()}),Eo=F(P(T(x({epoch:v(),effectiveSlot:v(),amount:v(),postBalance:v(),commission:q(T(v()))})))),Po=P(x({slot:v(),prioritizationFee:v()})),To=x({total:v(),validator:v(),foundation:v(),epoch:v()}),Co=x({epoch:v(),slotIndex:v(),slotsInEpoch:v(),absoluteSlot:v(),blockHeight:q(v()),transactionCount:q(v())}),zo=x({slotsPerEpoch:v(),leaderScheduleSlotOffset:v(),warmup:ue(),firstNormalEpoch:v(),firstNormalSlot:v()}),No=dn(R(),P(v())),Ne=T(Xt([x({}),R()])),Ko=x({err:Ne}),Oo=ut("receivedSignature"),Wo=x({"solana-core":R(),"feature-set":q(v())}),Uo=x({program:R(),programId:lt,parsed:Le()}),qo=x({programId:lt,accounts:P(lt),data:R()}),$s=ft(x({err:T(Xt([x({}),R()])),logs:T(P(R())),accounts:q(T(P(T(x({executable:ue(),owner:R(),lamports:v(),data:P(R()),rentEpoch:q(v())}))))),unitsConsumed:q(v()),returnData:q(T(x({programId:R(),data:br([R(),ut("base64")])}))),innerInstructions:q(T(P(x({index:v(),instructions:P(Xt([Uo,qo]))}))))})),$o=ft(x({byIdentity:dn(R(),P(v())),range:x({firstSlot:v(),lastSlot:v()})}));function Do(c,t,e,n,r,i){let a=e||So,l;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let g;return n&&(g=async(A,I)=>{let z=await new Promise((_,L)=>{try{n(A,I,(B,C)=>_([B,C]))}catch(B){L(B)}});return await a(...z)}),new ii.default(async(A,I)=>{let z={method:"POST",body:A,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Fa)};try{let _=5,L,B=500;for(;g?L=await g(c,z):L=await a(c,z),!(L.status!==429||r===!0||(_-=1,_===0));)console.error(`Server responded with ${L.status} ${L.statusText}.  Retrying after ${B}ms delay...`),await Re(B),B*=2;let C=await L.text();L.ok?I(null,C):I(new Error(`${L.status} ${L.statusText}: ${C}`))}catch(_){_ instanceof Error&&I(_)}},{})}function Fo(c){return(t,e)=>new Promise((n,r)=>{c.request(t,e,(i,a)=>{if(i){r(i);return}n(a)})})}function Ho(c){return t=>new Promise((e,n)=>{t.length===0&&e([]);let r=t.map(i=>c.request(i.methodName,i.args));c.request(r,(i,a)=>{if(i){n(i);return}e(a)})})}var Vo=F(Mo),Go=F(To),jo=F(Po),Jo=F(Co),Yo=F(zo),Zo=F(No),Xo=F(v()),Qo=ft(x({total:v(),circulating:v(),nonCirculating:v(),nonCirculatingAccounts:P(lt)})),xn=x({amount:R(),uiAmount:T(v()),decimals:v(),uiAmountString:q(R())}),ta=ft(P(x({address:lt,amount:R(),uiAmount:T(v()),decimals:v(),uiAmountString:q(R())}))),ea=ft(P(x({pubkey:lt,account:x({executable:ue(),owner:lt,lamports:v(),data:Tn,rentEpoch:v()})}))),Bn=x({program:R(),parsed:Le(),space:v()}),ra=ft(P(x({pubkey:lt,account:x({executable:ue(),owner:lt,lamports:v(),data:Bn,rentEpoch:v()})}))),na=ft(P(x({lamports:v(),address:lt}))),sr=x({executable:ue(),owner:lt,lamports:v(),data:Tn,rentEpoch:v()}),sa=x({pubkey:lt,account:sr}),ia=$e(Xt([mr($),Bn]),Xt([fi,Bn]),c=>Array.isArray(c)?E(c,Tn):c),Ln=x({executable:ue(),owner:lt,lamports:v(),data:ia,rentEpoch:v()}),oa=x({pubkey:lt,account:Ln}),aa=x({state:Xt([ut("active"),ut("inactive"),ut("activating"),ut("deactivating")]),active:v(),inactive:v()}),ca=F(P(x({signature:R(),slot:v(),err:Ne,memo:T(R()),blockTime:q(T(v()))}))),ua=F(P(x({signature:R(),slot:v(),err:Ne,memo:T(R()),blockTime:q(T(v()))}))),ha=x({subscription:v(),result:zr(sr)}),la=x({pubkey:lt,account:sr}),fa=x({subscription:v(),result:zr(la)}),da=x({parent:v(),slot:v(),root:v()}),pa=x({subscription:v(),result:da}),ya=Xt([x({type:Xt([ut("firstShredReceived"),ut("completed"),ut("optimisticConfirmation"),ut("root")]),slot:v(),timestamp:v()}),x({type:ut("createdBank"),parent:v(),slot:v(),timestamp:v()}),x({type:ut("frozen"),slot:v(),timestamp:v(),stats:x({numTransactionEntries:v(),numSuccessfulTransactions:v(),numFailedTransactions:v(),maxTransactionsPerEntry:v()})}),x({type:ut("dead"),slot:v(),timestamp:v(),err:R()})]),ga=x({subscription:v(),result:ya}),ma=x({subscription:v(),result:zr(Xt([Ko,Oo]))}),ba=x({subscription:v(),result:v()}),ka=x({pubkey:R(),gossip:T(R()),tpu:T(R()),rpc:T(R()),version:T(R())}),Ds=x({votePubkey:R(),nodePubkey:R(),activatedStake:v(),epochVoteAccount:ue(),epochCredits:P(br([v(),v(),v()])),commission:v(),lastVote:v(),rootSlot:T(v())}),wa=F(x({current:P(Ds),delinquent:P(Ds)})),va=Xt([ut("processed"),ut("confirmed"),ut("finalized")]),Sa=x({slot:v(),confirmations:T(v()),err:Ne,confirmationStatus:q(va)}),_a=ft(P(T(Sa))),Ia=F(v()),pi=x({accountKey:lt,writableIndexes:P(v()),readonlyIndexes:P(v())}),Cn=x({signatures:P(R()),message:x({accountKeys:P(R()),header:x({numRequiredSignatures:v(),numReadonlySignedAccounts:v(),numReadonlyUnsignedAccounts:v()}),instructions:P(x({accounts:P(v()),data:R(),programIdIndex:v()})),recentBlockhash:R(),addressTableLookups:q(P(pi))})}),yi=x({pubkey:lt,signer:ue(),writable:ue(),source:q(Xt([ut("transaction"),ut("lookupTable")]))}),gi=x({accountKeys:P(yi),signatures:P(R())}),mi=x({parsed:Le(),program:R(),programId:lt}),bi=x({accounts:P(lt),data:R(),programId:lt}),Aa=Xt([bi,mi]),xa=Xt([x({parsed:Le(),program:R(),programId:R()}),x({accounts:P(R()),data:R(),programId:R()})]),ki=$e(Aa,xa,c=>"accounts"in c?E(c,bi):E(c,mi)),wi=x({signatures:P(R()),message:x({accountKeys:P(yi),instructions:P(ki),recentBlockhash:R(),addressTableLookups:q(T(P(pi)))})}),Mr=x({accountIndex:v(),mint:R(),owner:q(R()),uiTokenAmount:xn}),vi=x({writable:P(lt),readonly:P(lt)}),Nr=x({err:Ne,fee:v(),innerInstructions:q(T(P(x({index:v(),instructions:P(x({accounts:P(v()),data:R(),programIdIndex:v()}))})))),preBalances:P(v()),postBalances:P(v()),logMessages:q(T(P(R()))),preTokenBalances:q(T(P(Mr))),postTokenBalances:q(T(P(Mr))),loadedAddresses:q(vi),computeUnitsConsumed:q(v())}),zn=x({err:Ne,fee:v(),innerInstructions:q(T(P(x({index:v(),instructions:P(ki)})))),preBalances:P(v()),postBalances:P(v()),logMessages:q(T(P(R()))),preTokenBalances:q(T(P(Mr))),postTokenBalances:q(T(P(Mr))),loadedAddresses:q(vi),computeUnitsConsumed:q(v())}),Ye=Xt([ut(0),ut("legacy")]),Ke=x({pubkey:R(),lamports:v(),postBalance:T(v()),rewardType:T(R()),commission:q(T(v()))}),Ba=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:P(x({transaction:Cn,meta:T(Nr),version:q(Ye)})),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),La=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),Ra=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:P(x({transaction:gi,meta:T(Nr),version:q(Ye)})),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),Ma=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:P(x({transaction:wi,meta:T(zn),version:q(Ye)})),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),Ea=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:P(x({transaction:gi,meta:T(zn),version:q(Ye)})),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),Pa=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),rewards:q(P(Ke)),blockTime:T(v()),blockHeight:T(v())}))),Ta=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),transactions:P(x({transaction:Cn,meta:T(Nr)})),rewards:q(P(Ke)),blockTime:T(v())}))),Fs=F(T(x({blockhash:R(),previousBlockhash:R(),parentSlot:v(),signatures:P(R()),blockTime:T(v())}))),wn=F(T(x({slot:v(),meta:T(Nr),blockTime:q(T(v())),transaction:Cn,version:q(Ye)}))),wr=F(T(x({slot:v(),transaction:wi,meta:T(zn),blockTime:q(T(v())),version:q(Ye)}))),Ca=ft(x({blockhash:R(),feeCalculator:x({lamportsPerSignature:v()})})),za=ft(x({blockhash:R(),lastValidBlockHeight:v()})),Na=ft(ue()),Ka=x({slot:v(),numTransactions:v(),numSlots:v(),samplePeriodSecs:v()}),Oa=F(P(Ka)),Wa=ft(T(x({feeCalculator:x({lamportsPerSignature:v()})}))),Ua=F(R()),qa=F(R()),$a=x({err:Ne,logs:P(R()),signature:R()}),Da=x({result:zr($a),subscription:v()}),Fa={"solana-client":"js/1.0.0-maintenance"},Hs=class{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let S={};return async A=>{let{commitment:I,config:z}=nt(A),_=this._buildArgs([],I,void 0,z),L=Ws(_);return S[L]=S[L]??(async()=>{try{let B=await this._rpcRequest("getBlockHeight",_),C=E(B,F(v()));if("error"in C)throw new N(C.error,"failed to get block height information");return C.result}finally{delete S[L]}})(),await S[L]}})();let n,r,i,a,l,g;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,r=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,l=e.disableRetryOnRateLimit,g=e.httpAgent),this._rpcEndpoint=Lo(t),this._rpcWsEndpoint=n||xo(t),this._rpcClient=Do(t,r,i,a,l,g),this._rpcRequest=Fo(this._rpcClient),this._rpcBatchRequest=Ho(this._rpcClient),this._rpcWebSocket=new An(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgs([t.toBase58()],n,void 0,r),a=await this._rpcRequest("getBalance",i),l=E(a,ft(v()));if("error"in l)throw new N(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){let e=await this._rpcRequest("getBlockTime",[t]),n=E(e,F(T(v())));if("error"in n)throw new N(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),e=E(t,F(v()));if("error"in e)throw new N(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),e=E(t,Xo);if("error"in e)throw new N(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[e]),r=E(n,Qo);if("error"in r)throw new N(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){let n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenSupply",n),i=E(r,ft(xn));if("error"in i)throw new N(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){let n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenAccountBalance",n),i=E(r,ft(xn));if("error"in i)throw new N(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){let{commitment:r,config:i}=nt(n),a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});let l=this._buildArgs(a,r,"base64",i),g=await this._rpcRequest("getTokenAccountsByOwner",l),S=E(g,ea);if("error"in S)throw new N(S.error,`failed to get token accounts owned by account ${t.toBase58()}`);return S.result}async getParsedTokenAccountsByOwner(t,e,n){let r=[t.toBase58()];"mint"in e?r.push({mint:e.mint.toBase58()}):r.push({programId:e.programId.toBase58()});let i=this._buildArgs(r,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),l=E(a,ra);if("error"in l)throw new N(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){let e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],r=await this._rpcRequest("getLargestAccounts",n),i=E(r,na);if("error"in i)throw new N(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){let n=this._buildArgs([t.toBase58()],e),r=await this._rpcRequest("getTokenLargestAccounts",n),i=E(r,ta);if("error"in i)throw new N(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgs([t.toBase58()],n,"base64",r),a=await this._rpcRequest("getAccountInfo",i),l=E(a,ft(T(sr)));if("error"in l)throw new N(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),a=await this._rpcRequest("getAccountInfo",i),l=E(a,ft(T(Ln)));if("error"in l)throw new N(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){let{commitment:n,config:r}=nt(e),i=t.map(S=>S.toBase58()),a=this._buildArgs([i],n,"jsonParsed",r),l=await this._rpcRequest("getMultipleAccounts",a),g=E(l,ft(P(T(Ln))));if("error"in g)throw new N(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfoAndContext(t,e){let{commitment:n,config:r}=nt(e),i=t.map(S=>S.toBase58()),a=this._buildArgs([i],n,"base64",r),l=await this._rpcRequest("getMultipleAccounts",a),g=E(l,ft(P(T(sr))));if("error"in g)throw new N(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){let{commitment:r,config:i}=nt(e),a=this._buildArgs([t.toBase58()],r,void 0,{...i,epoch:n??i?.epoch}),l=await this._rpcRequest("getStakeActivation",a),g=E(l,F(aa));if("error"in g)throw new N(g.error,`failed to get Stake Activation ${t.toBase58()}`);return g.result}async getProgramAccounts(t,e){let{commitment:n,config:r}=nt(e),{encoding:i,...a}=r||{},l=this._buildArgs([t.toBase58()],n,i||"base64",{...a,...a.filters?{filters:qs(a.filters)}:null}),g=await this._rpcRequest("getProgramAccounts",l),S=P(sa),A=a.withContext===!0?E(g,ft(S)):E(g,F(S));if("error"in A)throw new N(A.error,`failed to get accounts owned by program ${t.toBase58()}`);return A.result}async getParsedProgramAccounts(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),a=await this._rpcRequest("getProgramAccounts",i),l=E(a,F(P(oa)));if("error"in l)throw new N(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){let n;if(typeof t=="string")n=t;else{let i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let r;try{r=Jt.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Y(r.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,r,i=!1,a=new Promise((g,S)=>{try{n=this.onSignature(e,(I,z)=>{n=void 0;let _={context:z,value:I};g({__type:ke.PROCESSED,response:_})},t);let A=new Promise(I=>{n==null?I():r=this._onSubscriptionStateChange(n,z=>{z==="subscribed"&&I()})});(async()=>{if(await A,i)return;let I=await this.getSignatureStatus(e);if(i||I==null)return;let{context:z,value:_}=I;if(_!=null)if(_?.err)S(_.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,g({__type:ke.PROCESSED,response:{context:z,value:_}})}})()}catch(A){S(A)}});return{abortConfirmation:()=>{r&&(r(),r=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:r}}){let i=!1,a=new Promise(I=>{let z=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let _=await z();if(!i){for(;_<=n;)if(await Re(1e3),i||(_=await z(),i))return;I({__type:ke.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),S=this.getCancellationPromise(e),A;try{let I=await Promise.race([S,g,a]);if(I.__type===ke.PROCESSED)A=I.response;else throw new Ar(r)}finally{i=!0,l()}return A}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:r,nonceValue:i,signature:a}}){let l=!1,g=new Promise(_=>{let L=i,B=null,C=async()=>{try{let{context:O,value:j}=await this.getNonceAndContext(r,{commitment:t,minContextSlot:n});return B=O.slot,j?.nonce}catch{return L}};(async()=>{if(L=await C(),!l)for(;;){if(i!==L){_({__type:ke.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await Re(2e3),l||(L=await C(),l))return}})()}),{abortConfirmation:S,confirmationPromise:A}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),I=this.getCancellationPromise(e),z;try{let _=await Promise.race([I,A,g]);if(_.__type===ke.PROCESSED)z=_.response;else{let L;for(;;){let B=await this.getSignatureStatus(a);if(B==null)break;if(B.context.slot<(_.slotInWhichNonceDidAdvance??n)){await Re(400);continue}L=B;break}if(L?.value){let B=t||"finalized",{confirmationStatus:C}=L.value;switch(B){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new Me(a);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new Me(a);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new Me(a);break;default:(O=>{})(B)}z={context:L.context,value:{err:L.value.err}}}else throw new Me(a)}}finally{l=!0,S()}return z}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n,r=new Promise(g=>{let S=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{S=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>g({__type:ke.TIMED_OUT,timeoutMs:S}),S)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e}),l;try{let g=await Promise.race([a,r]);if(g.__type===ke.PROCESSED)l=g.response;else throw new xr(e,g.timeoutMs/1e3)}finally{clearTimeout(n),i()}return l}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),e=E(t,F(P(ka)));if("error"in e)throw new N(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){let e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),r=E(n,wa);if("error"in r)throw new N(r.error,"failed to get vote accounts");return r.result}async getSlot(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",r),a=E(i,F(v()));if("error"in a)throw new N(a.error,"failed to get slot");return a.result}async getSlotLeader(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",r),a=E(i,F(R()));if("error"in a)throw new N(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){let n=[t,e],r=await this._rpcRequest("getSlotLeaders",n),i=E(r,F(P(lt)));if("error"in i)throw new N(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){let{context:n,value:r}=await this.getSignatureStatuses([t],e);Y(r.length===1);let i=r[0];return{context:n,value:i}}async getSignatureStatuses(t,e){let n=[t];e&&n.push(e);let r=await this._rpcRequest("getSignatureStatuses",n),i=E(r,_a);if("error"in i)throw new N(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",r),a=E(i,F(v()));if("error"in a)throw new N(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),r=E(n,Vo);if("error"in r)throw new N(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,n){let{commitment:r,config:i}=nt(n),a=this._buildArgs([t.map(S=>S.toBase58())],r,void 0,{...i,epoch:e??i?.epoch}),l=await this._rpcRequest("getInflationReward",a),g=E(l,Eo);if("error"in g)throw new N(g.error,"failed to get inflation reward");return g.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),e=E(t,Go);if("error"in e)throw new N(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",r),a=E(i,Jo);if("error"in a)throw new N(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),e=E(t,Yo);if("error"in e)throw new N(e.error,"failed to get epoch schedule");let n=e.result;return new In(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),e=E(t,Zo);if("error"in e)throw new N(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){let n=this._buildArgs([t],e),r=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=E(r,Ia);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){let e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),r=E(n,Ca);if("error"in r)throw new N(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(t){let e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=E(e,Oa);if("error"in n)throw new N(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){let n=this._buildArgs([t],e),r=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=E(r,Wa);if("error"in i)throw new N(i.error,"failed to get fee calculator");let{context:a,value:l}=i.result;return{context:a,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){let n=H(t.serialize()).toString("base64"),r=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",r),a=E(i,ft(T(v())));if("error"in a)throw new N(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){let e=t?.lockedWritableAccounts?.map(a=>a.toBase58()),n=e?.length?[e]:[],r=await this._rpcRequest("getRecentPrioritizationFees",n),i=E(r,jo);if("error"in i)throw new N(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",r),a=E(i,za);if("error"in a)throw new N(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgs([t],n,void 0,r),a=await this._rpcRequest("isBlockhashValid",i),l=E(a,Na);if("error"in l)throw new N(l.error,"failed to determine if the blockhash `"+t+"`is valid");return l.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),e=E(t,F(Wo));if("error"in e)throw new N(e.error,"failed to get version");return e.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),e=E(t,F(R()));if("error"in e)throw new N(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),a=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{let l=E(a,Ra);if("error"in l)throw l.error;return l.result}case"none":{let l=E(a,La);if("error"in l)throw l.error;return l.result}default:{let l=E(a,Ba);if("error"in l)throw l.error;let{result:g}=l;return g?{...g,transactions:g.transactions.map(({transaction:S,meta:A,version:I})=>({meta:A,transaction:{...S,message:kn(I,S.message)},version:I}))}:null}}}catch(l){throw new N(l,"failed to get confirmed block")}}async getParsedBlock(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),a=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{let l=E(a,Ea);if("error"in l)throw l.error;return l.result}case"none":{let l=E(a,Pa);if("error"in l)throw l.error;return l.result}default:{let l=E(a,Ma);if("error"in l)throw l.error;return l.result}}}catch(l){throw new N(l,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){let{commitment:l,...g}=t;n=l,e=g}let r=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",r),a=E(i,$o);if("error"in a)throw new N(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),a=await this._rpcRequest("getTransaction",i),l=E(a,wn);if("error"in l)throw new N(l.error,"failed to get transaction");let g=l.result;return g&&{...g,transaction:{...g.transaction,message:kn(g.version,g.transaction.message)}}}async getParsedTransaction(t,e){let{commitment:n,config:r}=nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),a=await this._rpcRequest("getTransaction",i),l=E(a,wr);if("error"in l)throw new N(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){let{commitment:n,config:r}=nt(e),i=t.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],n,"jsonParsed",r)}));return(await this._rpcBatchRequest(i)).map(g=>{let S=E(g,wr);if("error"in S)throw new N(S.error,"failed to get transactions");return S.result})}async getTransactions(t,e){let{commitment:n,config:r}=nt(e),i=t.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],n,void 0,r)}));return(await this._rpcBatchRequest(i)).map(g=>{let S=E(g,wn);if("error"in S)throw new N(S.error,"failed to get transactions");let A=S.result;return A&&{...A,transaction:{...A.transaction,message:kn(A.version,A.transaction.message)}}})}async getConfirmedBlock(t,e){let n=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getConfirmedBlock",n),i=E(r,Ta);if("error"in i)throw new N(i.error,"failed to get confirmed block");let a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");let l={...a,transactions:a.transactions.map(({transaction:g,meta:S})=>{let A=new ie(g.message);return{meta:S,transaction:{...g,message:A}}})};return{...l,transactions:l.transactions.map(({transaction:g,meta:S})=>({meta:S,transaction:J.populate(g.message,g.signatures)}))}}async getBlocks(t,e,n){let r=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",r),a=E(i,F(P(v())));if("error"in a)throw new N(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){let n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",n),i=E(r,Fs);if("error"in i)throw new N(i.error,"failed to get block");let a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){let n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getConfirmedBlock",n),i=E(r,Fs);if("error"in i)throw new N(i.error,"failed to get confirmed block");let a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){let n=this._buildArgsAtLeastConfirmed([t],e),r=await this._rpcRequest("getConfirmedTransaction",n),i=E(r,wn);if("error"in i)throw new N(i.error,"failed to get transaction");let a=i.result;if(!a)return a;let l=new ie(a.transaction.message),g=a.transaction.signatures;return{...a,transaction:J.populate(l,g)}}async getParsedConfirmedTransaction(t,e){let n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),r=await this._rpcRequest("getConfirmedTransaction",n),i=E(r,wr);if("error"in i)throw new N(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){let n=t.map(a=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(a=>{let l=E(a,wr);if("error"in l)throw new N(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,n){let r={},i=await this.getFirstAvailableBlock();for(;!("until"in r)&&(e--,!(e<=0||e<i));)try{let g=await this.getConfirmedBlockSignatures(e,"finalized");g.signatures.length>0&&(r.until=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}let a=await this.getSlot("finalized");for(;!("before"in r)&&(n++,!(n>a));)try{let g=await this.getConfirmedBlockSignatures(n);g.signatures.length>0&&(r.before=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}return(await this.getConfirmedSignaturesForAddress2(t,r)).map(g=>g.signature)}async getConfirmedSignaturesForAddress2(t,e,n){let r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",r),a=E(i,ca);if("error"in a)throw new N(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,n){let r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",r),a=E(i,ua);if("error"in a)throw new N(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){let{context:n,value:r}=await this.getAccountInfoAndContext(t,e),i=null;return r!==null&&(i=new Rr({key:t,state:Rr.deserialize(r.data)})),{context:n,value:i}}async getNonceAndContext(t,e){let{context:n,value:r}=await this.getAccountInfoAndContext(t,e),i=null;return r!==null&&(i=nr.fromAccountData(r.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){let n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),r=E(n,Ua);if("error"in r)throw new N(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Re(100);let n=Date.now()-this._blockhashInfo.lastFetch>=Bo;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let r=0;r<50;r++){let i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Re(hi/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:e,config:n}=nt(t),r=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",r),a=E(i,ft(v()));if("error"in a)throw new N(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,n){if("message"in t){let B=t.serialize(),C=$.from(B).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");let O=e||{};O.encoding="base64","commitment"in O||(O.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(O.innerInstructions=e.innerInstructions);let j=[C,O],ht=await this._rpcRequest("simulateTransaction",j),Z=E(ht,$s);if("error"in Z)throw new Error("failed to simulate transaction: "+Z.error.message);return Z.result}let r;if(t instanceof J){let L=t;r=new J,r.feePayer=L.feePayer,r.instructions=t.instructions,r.nonceInfo=L.nonceInfo,r.signatures=L.signatures}else r=J.populate(t),r._message=r._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");let i=e;if(r.nonceInfo&&i)r.sign(...i);else{let L=this._disableBlockhashCaching;for(;;){let B=await this._blockhashWithExpiryBlockHeight(L);if(r.lastValidBlockHeight=B.lastValidBlockHeight,r.recentBlockhash=B.blockhash,!i)break;if(r.sign(...i),!r.signature)throw new Error("!signature");let C=r.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else L=!0}}let a=r._compile(),l=a.serialize(),S=r._serialize(l).toString("base64"),A={encoding:"base64",commitment:this.commitment};if(n){let L=(Array.isArray(n)?n:a.nonProgramIds()).map(B=>B.toBase58());A.accounts={encoding:"base64",addresses:L}}i&&(A.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(A.innerInstructions=e.innerInstructions);let I=[S,A],z=await this._rpcRequest("simulateTransaction",I),_=E(z,$s);if("error"in _){let L;if("data"in _.error&&(L=_.error.data.logs,L&&Array.isArray(L))){let B=`
    `,C=B+L.join(B);console.error(_.error.message,C)}throw new Ve({action:"simulate",signature:"",transactionMessage:_.error.message,logs:L})}return _.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");let a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");let r=e;if(t.nonceInfo)t.sign(...r);else{let a=this._disableBlockhashCaching;for(;;){let l=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...r),!t.signature)throw new Error("!signature");let g=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(g))a=!0;else{this._blockhashInfo.transactionSignatures.push(g);break}}}let i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){let n=H(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){let n={encoding:"base64"},r=e&&e.skipPreflight,i=r===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),r&&(n.skipPreflight=r),i&&(n.preflightCommitment=i);let a=[t,n],l=await this._rpcRequest("sendTransaction",a),g=E(l,qa);if("error"in g){let S;throw"data"in g.error&&(S=g.error.data.logs),new Ve({action:r?"send":"simulate",signature:"",transactionMessage:g.error.message,logs:S})}return g.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){let n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){let r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){let n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};let r=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return r.add(e),()=>{r.delete(e),r.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let r=this._subscriptionsByHash[n];if(r!==void 0)switch(r.state){case"pending":case"unsubscribed":if(r.callbacks.size===0){delete this._subscriptionsByHash[n],r.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:i,method:a}=r;try{this._setSubscription(n,{...r,state:"subscribing"});let l=await this._rpcWebSocket.call(a,i);this._setSubscription(n,{...r,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=r.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:l}),!e())return;this._setSubscription(n,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":r.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:i,unsubscribeMethod:a}=r;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...r,state:"unsubscribing"}),this._setSubscription(n,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(l){if(l instanceof Error&&console.error(`${a} error:`,l.message),!e())return;this._setSubscription(n,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){let n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(r=>{try{r(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){let{result:e,subscription:n}=E(t,ha);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){let n=this._nextClientSubscriptionId++,r=Ws([t.method,e]),i=this._subscriptionsByHash[r];return i===void 0?this._subscriptionsByHash[r]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let a=this._subscriptionsByHash[r];Y(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){let{commitment:r,config:i}=nt(n),a=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:e,subscription:n}=E(t,fa);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,r){let{commitment:i,config:a}=nt(n),l=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(r?{filters:qs(r)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){let r=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:e,subscription:n}=E(t,Da);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){let{result:e,subscription:n}=E(t,pa);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:e,subscription:n}=E(t,ga);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,r){let i=e||this._commitment;if(i||n||r){let a={};n&&(a.encoding=n),i&&(a.commitment=i),r&&(a=Object.assign(a,r)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,n,r){let i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,r)}_wsOnSignatureNotification(t){let{result:e,subscription:n}=E(t,ma);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){let r=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,l)=>{if(a.type==="status"){e(a.result,l);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return i}onSignatureWithOptions(t,e,n){let{commitment:r,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([t],r,void 0,i),l=this._makeSubscription({callback:(g,S)=>{e(g,S);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:e,subscription:n}=E(t,ba);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Te=class{constructor(t){this._keypair=void 0,this._keypair=t??Rs()}static generate(){return new Te(Rs())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!e||!e.skipValidation){let r=t.slice(0,32),i=Sr(r);for(let a=0;a<32;a++)if(n[a]!==i[a])throw new Error("provided secretKey is invalid")}return new Te({publicKey:n,secretKey:t})}static fromSeed(t){let e=Sr(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new Te({publicKey:e,secretKey:n})}get publicKey(){return new M(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},we=Object.freeze({CreateLookupTable:{index:0,layout:y.struct([y.u32("instruction"),Ge("recentSlot"),y.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:y.struct([y.u32("instruction")])},ExtendLookupTable:{index:2,layout:y.struct([y.u32("instruction"),Ge(),y.seq(V(),y.offset(y.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:y.struct([y.u32("instruction")])},CloseLookupTable:{index:4,layout:y.struct([y.u32("instruction")])}}),Vs=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=y.u32("instruction").decode(t.data),r;for(let[i,a]of Object.entries(we))if(a.index==n){r=i;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:e}=Q(we.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:e}=Q(we.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(n=>new M(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Er.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},Er=class{constructor(){}static createLookupTable(t){let[e,n]=M.findProgramAddressSync([t.authority.toBuffer(),(0,ar.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),r=we.CreateLookupTable,i=G(r,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}];return[new tt({programId:this.programId,keys:a,data:i}),e]}static freezeLookupTable(t){let e=we.FreezeLookupTable,n=G(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new tt({programId:this.programId,keys:r,data:n})}static extendLookupTable(t){let e=we.ExtendLookupTable,n=G(e,{addresses:t.addresses.map(i=>i.toBytes())}),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&r.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}),new tt({programId:this.programId,keys:r,data:n})}static deactivateLookupTable(t){let e=we.DeactivateLookupTable,n=G(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new tt({programId:this.programId,keys:r,data:n})}static closeLookupTable(t){let e=we.CloseLookupTable,n=G(e),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new tt({programId:this.programId,keys:r,data:n})}};Er.programId=new M("AddressLookupTab1e1111111111111111111111111");var Gs=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=y.u8("instruction").decode(t.data),r;for(let[i,a]of Object.entries(de))if(a.index==n){r=i;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:e,additionalFee:n}=Q(de.RequestUnits,t.data);return{units:e,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:e}=Q(de.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:e}=Q(de.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:e}=Q(de.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Pr.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},de=Object.freeze({RequestUnits:{index:0,layout:y.struct([y.u8("instruction"),y.u32("units"),y.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:y.struct([y.u8("instruction"),y.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:y.struct([y.u8("instruction"),y.u32("units")])},SetComputeUnitPrice:{index:3,layout:y.struct([y.u8("instruction"),Ge("microLamports")])}}),Pr=class{constructor(){}static requestUnits(t){let e=de.RequestUnits,n=G(e,t);return new tt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let e=de.RequestHeapFrame,n=G(e,t);return new tt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let e=de.SetComputeUnitLimit,n=G(e,t);return new tt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let e=de.SetComputeUnitPrice,n=G(e,{microLamports:BigInt(t.microLamports)});return new tt({keys:[],programId:this.programId,data:n})}};Pr.programId=new M("ComputeBudget111111111111111111111111111111");var js=64,Js=32,Ys=64,Zs=y.struct([y.u8("numSignatures"),y.u8("padding"),y.u16("signatureOffset"),y.u16("signatureInstructionIndex"),y.u16("publicKeyOffset"),y.u16("publicKeyInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u16("messageInstructionIndex")]),ir=class{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:r,instructionIndex:i}=t;Y(e.length===Js,`Public Key must be ${Js} bytes but received ${e.length} bytes`),Y(r.length===Ys,`Signature must be ${Ys} bytes but received ${r.length} bytes`);let a=Zs.span,l=a+e.length,g=l+r.length,S=1,A=$.alloc(g+n.length),I=i??65535;return Zs.encode({numSignatures:S,padding:0,signatureOffset:l,signatureInstructionIndex:I,publicKeyOffset:a,publicKeyInstructionIndex:I,messageDataOffset:g,messageDataSize:n.length,messageInstructionIndex:I},A),A.fill(e,a),A.fill(r,l),A.fill(n,g),new tt({keys:[],programId:ir.programId,data:A})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:r}=t;Y(e.length===js,`Private key must be ${js} bytes but received ${e.length} bytes`);try{let i=Te.fromSecretKey(e),a=i.publicKey.toBytes(),l=En(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:l,instructionIndex:r})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};ir.programId=new M("Ed25519SigVerify111111111111111111111111111");var Ha=(c,t)=>{let e=ur.sign(c,t);return[e.toCompactRawBytes(),e.recovery]};ur.utils.isValidPrivateKey;var Va=ur.getPublicKey,Xs=32,vn=20,Qs=64,Ga=11,Sn=y.struct([y.u8("numSignatures"),y.u16("signatureOffset"),y.u8("signatureInstructionIndex"),y.u16("ethAddressOffset"),y.u8("ethAddressInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u8("messageInstructionIndex"),y.blob(20,"ethAddress"),y.blob(64,"signature"),y.u8("recoveryId")]),Ce=class{constructor(){}static publicKeyToEthAddress(t){Y(t.length===Qs,`Public key must be ${Qs} bytes but received ${t.length} bytes`);try{return $.from(pn(H(t))).slice(-vn)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:r,recoveryId:i,instructionIndex:a}=t;return Ce.createInstructionWithEthAddress({ethAddress:Ce.publicKeyToEthAddress(e),message:n,signature:r,recoveryId:i,instructionIndex:a})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:n,signature:r,recoveryId:i,instructionIndex:a=0}=t,l;typeof e=="string"?e.startsWith("0x")?l=$.from(e.substr(2),"hex"):l=$.from(e,"hex"):l=e,Y(l.length===vn,`Address must be ${vn} bytes but received ${l.length} bytes`);let g=1+Ga,S=g,A=g+l.length,I=A+r.length+1,z=1,_=$.alloc(Sn.span+n.length);return Sn.encode({numSignatures:z,signatureOffset:A,signatureInstructionIndex:a,ethAddressOffset:S,ethAddressInstructionIndex:a,messageDataOffset:I,messageDataSize:n.length,messageInstructionIndex:a,signature:H(r),ethAddress:H(l),recoveryId:i},_),_.fill(H(n),Sn.span),new tt({keys:[],programId:Ce.programId,data:_})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:r}=t;Y(e.length===Xs,`Private key must be ${Xs} bytes but received ${e.length} bytes`);try{let i=H(e),a=Va(i,!1).slice(1),l=$.from(pn(H(n))),[g,S]=Ha(l,i);return this.createInstructionWithPublicKey({publicKey:a,message:n,signature:g,recoveryId:S,instructionIndex:r})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ce.programId=new M("KeccakSecp256k11111111111111111111111111111");var Si,ja=new M("StakeConfig11111111111111111111111111111111"),Rn=class{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}},je=class{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}};Si=je;je.default=new Si(0,0,M.default);var ti=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=y.u32("instruction").decode(t.data),r;for(let[i,a]of Object.entries(Yt))if(a.index==n){r=i;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:e,lockup:n}=Q(Yt.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Rn(new M(e.staker),new M(e.withdrawer)),lockup:new je(n.unixTimestamp,n.epoch,new M(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Q(Yt.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,stakeAuthorizationType:n}=Q(Yt.Authorize,t.data),r={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new M(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(r.custodianPubkey=t.keys[3].pubkey),r}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:e,stakeAuthorizationType:n,authoritySeed:r,authorityOwner:i}=Q(Yt.AuthorizeWithSeed,t.data),a={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:r,authorityOwner:new M(i),newAuthorizedPubkey:new M(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(a.custodianPubkey=t.keys[3].pubkey),a}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=Q(Yt.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Q(Yt.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:e}=Q(Yt.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Q(Yt.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(or.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},Yt=Object.freeze({Initialize:{index:0,layout:y.struct([y.u32("instruction"),io(),oo()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),V("newAuthorized"),y.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:y.struct([y.u32("instruction")])},Split:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Withdraw:{index:4,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Deactivate:{index:5,layout:y.struct([y.u32("instruction")])},Merge:{index:7,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:y.struct([y.u32("instruction"),V("newAuthorized"),y.u32("stakeAuthorizationType"),Ee("authoritySeed"),V("authorityOwner")])}}),lu=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),or=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:n,lockup:r}=t,i=r||je.default,a=Yt.Initialize,l=G(a,{authorized:{staker:H(n.staker.toBuffer()),withdrawer:H(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:H(i.custodian.toBuffer())}}),g={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new tt(g)}static createAccountWithSeed(t){let e=new J;e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:r,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static createAccount(t){let e=new J;e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:r,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:n,votePubkey:r}=t,i=Yt.Delegate,a=G(i);return new J().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static authorize(t){let{stakePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:r,stakeAuthorizationType:i,custodianPubkey:a}=t,l=Yt.Authorize,g=G(l,{newAuthorized:H(r.toBuffer()),stakeAuthorizationType:i.index}),S=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&S.push({pubkey:a,isSigner:!0,isWritable:!1}),new J().add({keys:S,programId:this.programId,data:g})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:n,authoritySeed:r,authorityOwner:i,newAuthorizedPubkey:a,stakeAuthorizationType:l,custodianPubkey:g}=t,S=Yt.AuthorizeWithSeed,A=G(S,{newAuthorized:H(a.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:r,authorityOwner:H(i.toBuffer())}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:fe,isSigner:!1,isWritable:!1}];return g&&I.push({pubkey:g,isSigner:!0,isWritable:!1}),new J().add({keys:I,programId:this.programId,data:A})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:r,lamports:i}=t,a=Yt.Split,l=G(a,{lamports:i});return new tt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(t,e){let n=new J;return n.add(jt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),n.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:n,authorizedPubkey:r,splitStakePubkey:i,basePubkey:a,seed:l,lamports:g}=t,S=new J;return S.add(jt.allocate({accountPubkey:i,basePubkey:a,seed:l,space:this.space,programId:this.programId})),e&&e>0&&S.add(jt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),S.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:r,splitStakePubkey:i,lamports:g}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:n,authorizedPubkey:r}=t,i=Yt.Merge,a=G(i);return new J().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:n,toPubkey:r,lamports:i,custodianPubkey:a}=t,l=Yt.Withdraw,g=G(l,{lamports:i}),S=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return a&&S.push({pubkey:a,isSigner:!0,isWritable:!1}),new J().add({keys:S,programId:this.programId,data:g})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:n}=t,r=Yt.Deactivate,i=G(r);return new J().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}};or.programId=new M("Stake11111111111111111111111111111111111111");or.space=200;var Mn=class{constructor(t,e,n,r){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=n,this.commission=r}},ei=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=y.u32("instruction").decode(t.data),r;for(let[i,a]of Object.entries(le))if(a.index==n){r=i;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:e}=Q(le.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Mn(new M(e.nodePubkey),new M(e.authorizedVoter),new M(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:e,voteAuthorizationType:n}=Q(le.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new M(e),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:n,newAuthorized:r,voteAuthorizationType:i}}=Q(le.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new M(e),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new M(r),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:e}=Q(le.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(ze.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},le=Object.freeze({InitializeAccount:{index:0,layout:y.struct([y.u32("instruction"),ao()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),V("newAuthorized"),y.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:y.struct([y.u32("instruction"),co()])}}),fu=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),ze=class{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:n,voteInit:r}=t,i=le.InitializeAccount,a=G(i,{voteInit:{nodePubkey:H(r.nodePubkey.toBuffer()),authorizedVoter:H(r.authorizedVoter.toBuffer()),authorizedWithdrawer:H(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),l={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:rr,isSigner:!1,isWritable:!1},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a};return new tt(l)}static createAccount(t){let e=new J;return e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:r,voteAuthorizationType:i}=t,a=le.Authorize,l=G(a,{newAuthorized:H(r.toBuffer()),voteAuthorizationType:i.index}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new J().add({keys:g,programId:this.programId,data:l})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:i,voteAuthorizationType:a,votePubkey:l}=t,g=le.AuthorizeWithSeed,S=G(g,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:H(n.toBuffer()),currentAuthorityDerivedKeySeed:r,newAuthorized:H(i.toBuffer()),voteAuthorizationType:a.index}}),A=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:fe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new J().add({keys:A,programId:this.programId,data:S})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,lamports:r,toPubkey:i}=t,a=le.Withdraw,l=G(a,{lamports:r}),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new J().add({keys:g,programId:this.programId,data:l})}static safeWithdraw(t,e,n){if(t.lamports>e-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return ze.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,nodePubkey:r}=t,i=le.UpdateValidatorIdentity,a=G(i),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new J().add({keys:l,programId:this.programId,data:a})}};ze.programId=new M("Vote111111111111111111111111111111111111111");ze.space=3762;var Ja=new M("Va1idator1nfo111111111111111111111111111111"),Ya=x({name:R(),website:q(R()),details:q(R()),iconUrl:q(R()),keybaseUsername:q(R())}),Tr=class{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(te(e)!==2)return null;let r=[];for(let i=0;i<2;i++){let a=new M(ee(e,0,pe)),l=he(e)===1;r.push({publicKey:a,isSigner:l})}if(r[0].publicKey.equals(Ja)&&r[1].isSigner){let i=Ee().decode($.from(e)),a=JSON.parse(i);return fn(a,Ya),new Tr(r[1].publicKey,a)}return null}},du=new M("Vote111111111111111111111111111111111111111"),Za=y.struct([V("nodePubkey"),V("authorizedWithdrawer"),y.u8("commission"),y.nu64(),y.seq(y.struct([y.nu64("slot"),y.u32("confirmationCount")]),y.offset(y.u32(),-8),"votes"),y.u8("rootSlotValid"),y.nu64("rootSlot"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),V("authorizedVoter")]),y.offset(y.u32(),-8),"authorizedVoters"),y.struct([y.seq(y.struct([V("authorizedPubkey"),y.nu64("epochOfLastAuthorizedSwitch"),y.nu64("targetEpoch")]),32,"buf"),y.nu64("idx"),y.u8("isEmpty")],"priorVoters"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),y.nu64("credits"),y.nu64("prevCredits")]),y.offset(y.u32(),-8),"epochCredits"),y.struct([y.nu64("slot"),y.nu64("timestamp")],"lastTimestamp")]),Cr=class{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let n=Za.decode(H(t),4),r=n.rootSlot;return n.rootSlotValid||(r=null),new Cr({nodePubkey:new M(n.nodePubkey),authorizedWithdrawer:new M(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:r,authorizedVoters:n.authorizedVoters.map(Xa),priorVoters:Qa(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function Xa({authorizedVoter:c,epoch:t}){return{epoch:t,authorizedVoter:new M(c)}}function ri({authorizedPubkey:c,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new M(c),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Qa({buf:c,idx:t,isEmpty:e}){return e?[]:[...c.slice(t+1).map(ri),...c.slice(0,t).map(ri)]}var ni={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function pu(c,t){let e=t===!1?"http":"https";if(!c)return ni[e].devnet;let n=ni[e][c];if(!n)throw new Error(`Unknown ${e} cluster: ${c}`);return n}async function yu(c,t,e,n){let r,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(r=e,i=n):i=e;let a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},l=await c.sendRawTransaction(t,a),g=i&&i.commitment,A=(await(r?c.confirmTransaction(r,g):c.confirmTransaction(l,g))).value;if(A.err)throw l!=null?new Ve({action:a?.skipPreflight?"send":"simulate",signature:l,transactionMessage:`Status: (${JSON.stringify(A)})`}):new Error(`Raw transaction ${l} failed (${JSON.stringify(A)})`);return l}var gu=1e9;export{_r as a,Es as b,vr as c,ro as d,pe as e,M as f,Ts as g,nu as h,Pe as i,Pn as j,Ir as k,Ar as l,xr as m,Me as n,Fe as o,ie as p,ve as q,ui as r,ke as s,tt as t,J as u,Br as v,Lr as w,fe as x,su as y,iu as z,yn as A,rr as B,ou as C,au as D,cu as E,gn as F,Ve as G,uu as H,N as I,Cs as J,po as K,zs as L,nr as M,Ns as N,st as O,jt as P,Se as Q,hu as R,Ks as S,In as T,Rr as U,Bo as V,Hs as W,Te as X,we as Y,Vs as Z,Er as _,Gs as $,de as aa,Pr as ba,ir as ca,Ce as da,ja as ea,Rn as fa,je as ga,ti as ha,Yt as ia,lu as ja,or as ka,Mn as la,ei as ma,fu as na,ze as oa,Ja as pa,Tr as qa,du as ra,Cr as sa,pu as ta,yu as ua,gu as va};
//# sourceMappingURL=chunk-5M5WQCD3.js.map
