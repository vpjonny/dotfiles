import{a as Ye}from"./chunk-WT4TK2GC.js";import{a as Le}from"./chunk-5MT5Y5AC.js";import{a as ze}from"./chunk-CADVMGAW.js";import{a as q}from"./chunk-WP5MSDLO.js";import{a as we,b as Ie,c as Oe,d as ke}from"./chunk-AKD4IV4A.js";import"./chunk-ZQKQQ4OE.js";import{a as Ae}from"./chunk-NMNQL2R3.js";import{b as z}from"./chunk-PB55N5D7.js";import"./chunk-QHC2DYOH.js";import{d as Ue,e as be,f as De}from"./chunk-PZXJSKV7.js";import{a as Ne}from"./chunk-MHNQB4I5.js";import{a as he}from"./chunk-GVFJTHCK.js";import"./chunk-J63JN6ZK.js";import"./chunk-6KT3MJYR.js";import{f as n,g as ie}from"./chunk-LQG7SAW5.js";import{b as se,f as A,q as Ee,s as Ce}from"./chunk-TQ2XASI3.js";import"./chunk-XXAIJB4T.js";import{a as ho}from"./chunk-VPT3GAIN.js";import"./chunk-VJ2JNI4M.js";import{G as Te,ra as xe,xa as Pe}from"./chunk-22THXMTO.js";import"./chunk-HUG2KBCE.js";import"./chunk-MCCEOABZ.js";import"./chunk-UJWKDH2G.js";import"./chunk-AHLFMVMC.js";import"./chunk-KZDRRGNV.js";import"./chunk-3DAKLS7D.js";import"./chunk-JVJHSYZS.js";import{a as k,g as ve}from"./chunk-IFGNGASP.js";import{E as H,He as L,n as Fe}from"./chunk-NPJCEXXH.js";import"./chunk-4HHTYYQM.js";import"./chunk-PWGSI7LM.js";import"./chunk-RVS5KJOS.js";import{B as M}from"./chunk-5RLAMZDG.js";import"./chunk-VYWNZTTM.js";import"./chunk-K6YGPUNZ.js";import"./chunk-K6262WF4.js";import"./chunk-ZJ4FWIGG.js";import"./chunk-34KDKISZ.js";import"./chunk-AL77NTUI.js";import"./chunk-V3FLECS4.js";import"./chunk-LHUS6JBK.js";import"./chunk-R6TSAW7C.js";import"./chunk-2W2QYRRT.js";import"./chunk-Q7AZQDRY.js";import"./chunk-DSO47LPO.js";import"./chunk-QOQ6OPZO.js";import"./chunk-MGS2LE6A.js";import"./chunk-CBNY2XQM.js";import"./chunk-FRGP5XJV.js";import{a as bo}from"./chunk-Q2B4R57L.js";import{b as ye}from"./chunk-PJC4UBLU.js";import"./chunk-HDMZQINQ.js";import{$ as Se,A as p,C as Me,D as _e,H as G,I as ge,j as re}from"./chunk-JYNY5RZ4.js";import"./chunk-F6LAWA6D.js";import"./chunk-OAMYZMR4.js";import"./chunk-I7KURANN.js";import"./chunk-BGUOO6AC.js";import"./chunk-GUM36CPA.js";import{f as B,o as N,q as D}from"./chunk-LHDKEQAM.js";N();D();var e=B(ye()),Xe=B(bo());Se();N();D();var v=B(ye()),Be=B(ho());Se();function Ge({currentMode:t,computeBuyDefaultPresetList:r,computedSellDefaultPresetList:s}){return{defaultPresetList:(0,v.useMemo)(()=>t==="buy"?r:s,[t,r,s])}}function He({computedQuoteSafemoon:t}){return{safeMoonToken:(0,v.useMemo)(()=>t,[t])}}function qe(){let{getUsd:t}=q(z);return{formatUSD:s=>_e(s)||Me(s)?"--":t(s)}}function je({priorityFeeState:t,priorityFee:r,computedNativeTokenPrice:s}){let[m,f]=(0,v.useMemo)(()=>[t.baseFee||0,t.baseFeeUsd||0],[t]),l=(0,v.useMemo)(()=>{let c=r||"0";return ve(c)?"0":new k.BigNumber(c).toString(10)},[r]),[d,T]=(0,v.useMemo)(()=>{let c=k.add(l,m),_=k.mul(s||0,c);return[k.mul(s||0,l),_]},[l,m,s]);return{baseFeeValue:m,baseFeeUsd:f,priorityFeeForShow:l,priorityFeeUSD:d,totalFeeUSD:T}}function Qe({defaultPresetList:t,id:r,setPriorityFee:s,priorityFeeType:m,setPriorityFeeType:f,setPriorityFeeError:l,slippage:d,setSlippage:T,setSlippageError:c,slippageType:_,setSlippageType:x,feeMap:w,slippageMode:P,setSlippageMode:I,customMax:o,setCustomMax:E,setCustomMaxError:g,priorityMode:S,setPriorityMode:C,setManualType:Y}){let i=(0,v.useMemo)(()=>t.find(F=>F.id===r)||null,[t,r]);return{resetDisabled:(0,v.useMemo)(()=>i?p(n(i.slippage.value),d)&&p(i.slippage.type,_)&&p(i.priorityFee.type,m)&&p(i.slippage.mode,P)&&p(n(i.slippage.customMax),o)&&p(i.priorityMode,S):!0,[i,d,_,m,P,o,S]),handleReset:()=>{f(i.priorityFee.type),T(n(i.slippage.value)),x(i.slippage.type),s(w[i.priorityFee.type].amount),I(i.slippage.mode),E(n(i.slippage.customMax)),C(i.priorityMode),Y(i.manualType),c(!1),l(!1),g(!1)}}}var Do=({priorityMode:t,manualType:r},s)=>s.priorityMode===t&&t==="auto"?!0:s.priorityMode===t&&t==="manual"&&s.manualType===r;function We({slippageType:t,initState:r,slippage:s,priorityFee:m,priorityFeeType:f,slippageMode:l,customMax:d,currentPreset:T,slippageState:c,presetPriorityFee:_,currentPresetList:x,currentPresetId:w,setCurrentPresetList:P,currentMode:I,onClose:o,priorityMode:E,manualType:g}){let S=(0,Be.useHistory)(),C=ze(Te);return{handleConfirm:()=>{if(C({custom_or_auto:t}),!(p(r.mode,l)&&p(r.slippage,s)&&p(r.slippageType,t)&&p(r.priorityFee,m)&&p(r.priorityFeeType,f)&&p(r.customMax,d)&&Do({priorityMode:E,manualType:g},r))){let U=G({},T,{slippage:G({},c,{value:s?ie(s):"",type:t,mode:l,customMax:d?ie(d):""}),priorityFee:G({},_,{value:f===A.CUSTOM?m:"",type:f}),priorityMode:E,manualType:g}),h=x.map(F=>F.id===w?U:F);P(h),Pe.info(xe.MEME_SWAP_CUSTOM_PRESET,{data:{customPreset:U,currentMode:I}})}o?o():S.goBack()}}}N();D();var y={root:"_root_y7yz0_1",name:"_name_y7yz0_8",mev:"_mev_y7yz0_9",slippage:"_slippage_y7yz0_10",priority:"_priority_y7yz0_11",btns:"_btns_y7yz0_14",notice:"_notice_y7yz0_23","notice-title":"_notice-title_y7yz0_29",noticeTitle:"_notice-title_y7yz0_29","notice-text":"_notice-text_y7yz0_32",noticeText:"_notice-text_y7yz0_32"};var Lo=Fe(({onClose:t})=>{let{quoteStore:r,configStore:s}=z(),{currentMode:m,computedConfig:f}=s,l=re(f,"mevPriceThreshold"),d=re(f,"nativeTokenInfo.chainName"),{computedQuoteSafemoon:T,jitoIsSuccess:c,computedAutoSlippage:_,mevUnstableShowLevel:x}=r,{chainSymbol:w}=Ae(),{currentPreset:P}=we(),I=ge(Ce,["name","amountList"]),{slippage:o,priorityFee:E,id:g,priorityMode:S,manualType:C}={...I,...P},Y=(0,e.useMemo)(()=>g?.includes(Ee),[g]),[i,U]=(0,e.useState)("auto"),[h,F]=(0,e.useState)(0);(0,e.useEffect)(()=>{U(S),F(C)},[S,C]);let ne=he({priorityMode:i,manualType:h,jitoIsSuccess:c,mevUnstableShowLevel:x}),Ze=Ne(ne),{formatPriorityFee:a}=Ie({priorityFee:E,isEnableMev:Ze}),[O,j]=(0,e.useState)(o.mode);(0,e.useEffect)(()=>{j(o.mode)},[o.mode]);let[Q,W]=(0,e.useState)(n(o.customMax));(0,e.useEffect)(()=>{W(n(o.customMax))},[o.customMax]);let[Je,ae]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(n(o.value)),[R,J]=(0,e.useState)(o.type),[Ke,me]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Z(n(o.value)),J(o.type)},[o.value,o.type]);let[K,$]=(0,e.useState)(a.value),[ee,ue]=(0,e.useState)(a.type),pe=(0,e.useRef)(a.type),[$e,le]=(0,e.useState)(!1),[eo,oo]=(0,e.useState)(a.type!==A.CUSTOM?a.type:A.MARKET);(0,e.useEffect)(()=>{let u=pe.current;if(u===A.CUSTOM)return;let b=a.config[u]?.amount;$(b)},[a.config]);let to=O==="fixed"&&Ke||O==="dynamic"&&Je||$e||ne===6,ro={mode:o.mode,customMax:n(o.customMax),slippage:n(o.value),slippageType:o.type,priorityFee:a.value,priorityFeeType:a.type,priorityMode:S,manualType:C},so={low:n(o.config.low),medium:n(o.config.medium),high:n(o.config.high)},ce=n(o.min),fe=n(o.max),oe=n(_),io=n(o.dynamicMax),no=n(o.dynamicMin),ao=n(o.recommendMax),mo=n(o.recommendMin),{computeBuyDefaultPresetList:uo,computedSellDefaultPresetList:po}=Le(),{defaultPresetList:lo}=Ge({currentMode:m,computeBuyDefaultPresetList:uo,computedSellDefaultPresetList:po}),{setCurrentPresetList:co,currentPresetId:fo,currentPresetList:yo}=ke(),{handleReset:Mo,resetDisabled:_o}=Qe({defaultPresetList:lo,id:g,setPriorityFee:$,priorityFeeType:ee,setPriorityFeeType:ue,slippage:X,setSlippage:Z,slippageType:R,setSlippageType:J,slippageMode:O,setSlippageMode:j,customMax:Q,setCustomMax:W,setPriorityFeeError:le,setSlippageError:me,setCustomMaxError:ae,feeMap:a.config,priorityMode:i,setPriorityMode:U,setManualType:F}),{handleConfirm:go}=We({slippageType:R,initState:ro,slippage:X,priorityFee:K,priorityFeeType:ee,slippageMode:O,customMax:Q,currentPreset:P,slippageState:o,presetPriorityFee:E,currentPresetList:yo,currentPresetId:fo,setCurrentPresetList:co,currentMode:m,onClose:t,priorityMode:i,manualType:h}),{computedNativeTokenPrice:So}=Oe(),{baseFeeValue:Fo,baseFeeUsd:vo,totalFeeUSD:To,priorityFeeUSD:xo,priorityFeeForShow:Po}=je({priorityFeeState:a,priorityFee:K,computedNativeTokenPrice:So}),{formatUSD:te}=qe(),{safeMoonToken:de}=He({computedQuoteSafemoon:T}),Eo=u=>Ye({value:u,min:ce,max:fe,level:R,auto:oe,safemoon:de}),{getTokenAmount:Co,getUsd:Uo}=q(z);return e.default.createElement("div",{className:y.root},e.default.createElement(De,{className:y.mev,setMode:U,priorityMode:i,setManualType:F,manualType:h,mevUnstableShowLevel:x,jitoIsSuccess:c,mevPriceThreshold:l,chainName:d}),e.default.createElement(be,{className:y.slippage,mode:O,fixedData:{value:X,level:R,levelMap:so,min:ce,max:fe,validator:Eo,auto:oe},dynamicData:{showDynamicSlippage:!0,dynamicSlippage:oe,supportCustomMax:o.supportCustomMax,customMax:Q,dynamicMax:io,dynamicMin:no,recommendMax:ao,recommendMin:mo,safemoon:de},onChange:({mode:u,fixedData:b,dynamicData:V})=>{j(u),u===se.FIXED&&(Z(b.value),J(b.level),me(b.error)),u===se.DYNAMIC&&(W(V.customMax),ae(V.error))}}),e.default.createElement(Ue.DetailMode,{className:y.priority,fee:K,type:ee,latestSelectType:eo,feeMap:a.config,max:a.max,recommendMaxValue:a?.recommendMaxValue,recommendMinValue:a?.recommendMinValue,currency:w,onChange:(u,b,V)=>{$(b),ue(u),pe.current=u,le(V),u!=="custom"&&oo(u)},getTokenAmount:Co,getUsd:Uo}),e.default.createElement("div",{className:y.notice},e.default.createElement("div",{className:y.noticeTitle},H(L("swaptrade_trade_label_total_fees",{price:te(To)}))),e.default.createElement("div",{className:y.noticeText},H(L("swaptrade_trade_label_base_fee_value",{value:Fo,price:te(vo)}))),e.default.createElement("div",{className:y.noticeText},H(L("swaptrade_trade_label_priority_fee_value",{value:Po,price:te(xo)})))),e.default.createElement("div",{className:(0,Xe.default)("flex justify-between",y.btns)},Y&&e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.outline,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,onClick:Mo,disabled:_o},L("swaptrade_general_btn_reset")),e.default.createElement(M,{className:"flex-1",category:M.CATEGORY.fill,type:M.TYPE.primary,disabled:to,size:M.SIZE.lg,block:!0,onClick:go},L("swaptrade_dialog_btn_confirm"))))}),Et=Lo;export{Et as default};
//# sourceMappingURL=Configure-VL2MXO5C.js.map
