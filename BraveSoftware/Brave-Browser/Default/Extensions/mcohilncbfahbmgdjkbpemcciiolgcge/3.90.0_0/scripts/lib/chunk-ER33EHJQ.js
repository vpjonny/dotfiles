import{a as b}from"./chunk-LUU4SMIP.js";import{a as k}from"./chunk-4TAIYLPS.js";import{a as C,f as M}from"./chunk-TQ2XASI3.js";import{a as P}from"./chunk-VJ2JNI4M.js";import{a as i,w as I}from"./chunk-IFGNGASP.js";import{$ as R,j as o}from"./chunk-JYNY5RZ4.js";import{o as r,q as s}from"./chunk-LHDKEQAM.js";r();s();R();r();s();var w={[1]:{priorityMode:"auto",manualType:0},[2]:{priorityMode:"manual",manualType:0},[3]:{priorityMode:"manual",manualType:1}},X={GENERAL:"general",EXPLAIN:"explain",QUICK_BUTTON:"quick_button",TRADE:"trade",OTHER:"others"},F={ROUTE_AUTO:"route_auto",ROUTE_MANUAL:"route_manual",SLIPPAGE_DYNAMIC:"slippage_dynamic",SLIPPAGE_FIXED:"slippage_fixed",SLIPPAGE_DYNAMIC_MAX:"slippage_dynamic_max",PRIORITY_MARKET:"priority_gas_market",PRIORITY_FAST:"priority_gas_fast",PRIORITY_TURBO:"priority_gas_turbo",PRIORITY_CUSTOM:"priority_gas_custom",RESET:"reset",CONFIRM:"confirm",BACK:"back"},y={MARKET:"market",FAST:"fast",TURBO:"turbo",CUSTOM:"custom"},Q={[y.MARKET]:F.PRIORITY_MARKET,[y.FAST]:F.PRIORITY_FAST,[y.TURBO]:F.PRIORITY_TURBO,[y.CUSTOM]:F.PRIORITY_CUSTOM},N={ON:"1",OFF:"0"},H={MARKET:"1",FAST:"2",TURBO:"3",CUSTOM:"4"};r();s();var x=({formatPriorityFee:n,nativeTokenPrice:e,isSolana:t,networkFeeDecimals:a,estimateGasFee:u,supportCustomGasFee:p,supportEip1559:c})=>{if(t){let{baseFee:T,value:m}=n,f=i.add(T||0,m);return i.mul(e,f)}if(p&&c){let{baseFee:T,value:m}=n;return i.div(i.mul(e,i.mul(i.add(T,m),u)),10**a)}return p?i.div(i.mul(e,i.mul(n.value,u)),10**a):n.price};var U=class{constructor(){this.settingPanelVisible=!1;this.priorityMode="auto";this.manualType=0;this.fetchedSetting={};this.swapConfig={};this.feeType=M.MARKET;this.setStoreFeeType=e=>{this.feeType=e};this.customFeeUsd="";this.setCustomFee=e=>{this.customFeeUsd=e};this.networkFeeInfo={};this.fee="";this.setPriorityFee=e=>{this.fee=e};this.feeMap={};this.setFeeMap=e=>{this.feeMap=e};this.slippageSetting={};b(this)}setSettingPanelVisible(e){this.settingPanelVisible=e}setPriorityMode(e){this.priorityMode=e}setManualType(e){this.manualType=e}setFetchedSetting(e){this.fetchedSetting=e}get originAutoMode(){return w[this.routerModeType]}setSwapConfig(e){this.swapConfig=e}get routerModeType(){return o(this.swapConfig,"dexPresetResultVOList[0].buyPreset.routeConfig.routerModeType",void 0)}get computedMevPriceThreshold(){return o(this.swapConfig,"mevPriceThreshold","")}get supportAutoMode(){return o(this.swapConfig,"supportAutoMode",!1)}get supportEip1559(){return o(this.swapConfig,"supportEip1559",!1)}get memeChainType(){return o(this.swapConfig,"memeChainType","")}get supportCustomGasFee(){return o(this.swapConfig,"supportCustomGasFee",!1)}get networkFeeDecimals(){return o(this.swapConfig,"networkFeeDecimals","")}get nativeTokenPrice(){return o(this.swapConfig,"nativeTokenPrice","")}get networkFeeUnit(){return o(this.swapConfig,"networkFeeUnit","")}setNetworkFeeInfo(e){this.networkFeeInfo=e||{}}get computedPriorityFeeAmount(){return this.networkFeeInfo?this.feeType===M.CUSTOM?this.fee:this.feeMap[this.feeType]?.amount:""}getComputedPriorityFeeInfo(e,{feeType:t,feeValue:a,feeMap:u,customFeeUsd:p,estimateGasFee:c}){if(!e)return{totalFeeUSD:""};let T=t||this.feeType,m=a??this.fee,f=u||this.feeMap||{},d=T===M.CUSTOM?{amount:m,price:p||this.customFeeUsd||""}:f[T]||{},{supportCustomGasFee:h,supportEip1559:E}=this,_=d?.amount,l=d?.price,g=e?.baseFee?x({formatPriorityFee:{baseFee:e?.baseFee,value:_,price:l},nativeTokenPrice:this.nativeTokenPrice,isSolana:this.memeChainType==="0",networkFeeDecimals:this.networkFeeDecimals,estimateGasFee:c,supportCustomGasFee:h,supportEip1559:E}):e?.baseFeeUsd||l;return this.memeChainType==="0"?{totalFeeUSD:g,baseFeeValue:e?.baseFee,baseFeeUsd:e?.baseFeeUsd,priorityFeeForShow:_,priorityFeeUSD:l}:{totalFeeUSD:g}}getMevInfo(e){let t=!1;return this.priorityMode==="auto"?t=e===N.ON:t=this.manualType===0,t?o(this.networkFeeInfo,"mev[0].name",""):""}setSlippageSetting(e){this.slippageSetting=e}},ue=new U;r();s();R();r();s();var O="1",L="2",Y="3",ce="0",fe={[O]:"swaptrade_aggregator_tag_best_value",[L]:"swaptrade_xrouting_tag_fastest",[Y]:"swaptrade_xrouting_tag_best_in_all_dimensions"};var V=()=>{let{accountStore:n,quoteStore:e}=P(),t=o(e,"quote.bestRoute",{})||{},a=t.defiPlatformInfoList?.findIndex(u=>u.defiPlatformId===e.aggregateSelectId)+1;return{wallet_address:n.address,provider_name:t.name,best_price:t.isBest?"yes":"no",price_difference:I(t.reducePercent),price_ranking:a}},Ee=()=>{let{accountStore:n,quoteStore:e}=P(),{bestRoute:t}=e.quote;if(!t)return{};let{slippage:a,slippageType:u}=e.computedSlippage,{fromToken:p,fromTokenAmount:c,fromTokenPrice:T,toTokenPrice:m,receiveAmount:f,toToken:d,swapType:h,routerLabel:E}=t,_=Number(h)===0,l=_?{liquidity_source:k.computedMonitorLiquidSelectType}:{},g=_?{}:{bridge_selection:E?.includes(O)?"overall best":"custom"};return{wallet_address:n.address,from_token_name:p?.tokenName,from_token_address:p?.tokenContractAddress,from_token_amount:c,from_amount_usdt:T,to_token_address:d?.tokenContractAddress,to_token_amount:f,to_amount_usdt:m,chain:p?.chainName,from_chain:p?.chainName,to_chain:d?.chainName,swap_type:_?"swap":"cross_chain_swap",slippage:{type:u===C.AUTO?"auto":"custom",amount:a},...l,...g,...V()}};export{x as a,O as b,L as c,Y as d,ce as e,V as f,Ee as g,w as h,X as i,F as j,Q as k,N as l,H as m,ue as n};
//# sourceMappingURL=chunk-ER33EHJQ.js.map
