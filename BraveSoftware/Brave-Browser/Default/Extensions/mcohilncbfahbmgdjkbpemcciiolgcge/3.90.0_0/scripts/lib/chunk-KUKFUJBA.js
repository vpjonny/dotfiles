import{a as W}from"./chunk-QR5EI5TJ.js";import{c as X}from"./chunk-BHFRQZBI.js";import{Aa as Q,Ba as he,h as I,ra as C,sa as me,xa as x,za as pe}from"./chunk-22THXMTO.js";import{u as L,v as M}from"./chunk-AHLFMVMC.js";import{a as A}from"./chunk-IFGNGASP.js";import{Pc as q,Rc as z,d as p,e as j,f as h,l as N,m as Se,o as B,zc as fe}from"./chunk-NPJCEXXH.js";import{a as Ee}from"./chunk-Q2B4R57L.js";import{b as k}from"./chunk-PJC4UBLU.js";import{$ as G,F as de,W as le,j as Y,z as ce}from"./chunk-JYNY5RZ4.js";import{f as E,h as y,o as n,q as a}from"./chunk-LHDKEQAM.js";n();a();var Z=E(k()),Le=E(Ee());var Ge=({...r})=>{let e=X();return Z.default.createElement(L.State,{type:L.State.TYPE.noResult,themeName:e,...r})},je=({...r})=>{let e=X();return Z.default.createElement(L.State,{type:L.State.TYPE.noNetwork,themeName:e,...r})};n();a();var ge=E(k());function Be({text:r,equation:e,children:t}){return ge.default.createElement(M,{title:r,disabled:r===(e||r),maxWidth:300},t||e||r)}n();a();G();n();a();n();a();n();a();var J=class{constructor(){y(this,"handlers",[])}rawSub(){}rawUnSub(){}onSub(){}sub(e){return this.handlers.push(e),this.handlers.length===1&&this.rawSub(),()=>{let o=this.handlers.indexOf(e);o>-1&&(this.handlers.splice(o,1),this.handlers.length===0&&this.rawUnSub())}}},V=J;var ee=class extends V{constructor(){super(...arguments);y(this,"lastChainId");y(this,"onSub",t=>{let o=Number(t),s=o!==this.lastChainId;x.info(C.ON_CHAIN_CHANGE,{chainId:t,userTrigger:s,evtType:me}),this.handlers.forEach(c=>{c(o,s)}),this.lastChainId=o})}rawSub(){I.onChainChange(this.onSub)}rawUnSub(){I.offChainChange(this.onSub),this.lastChainId=void 0}},ye=ee;n();a();G();function Ae(){return I.getWalletStorage().then(r=>r.getConnectedConfig())}var O=class extends V{constructor(){super(...arguments);y(this,"rawSubId");y(this,"lastWalletInfoPromise",null);y(this,"isWeb3Ready",!1);y(this,"onSub",t=>{let o=ce(Y(t,"connectedAccount.chainIdAddressMap")),s=["add_connected_wallet","init_wallet"].includes(Y(t,"actionType"));o&&s&&x.error(C.CHAIN_ID_ADDRESS_MAP_IS_EMPTY,{walletInfo:t}),this.isWeb3Ready=!0,this.lastWalletInfoPromise=Promise.resolve(t),this.handlers.forEach(c=>{c?.(t)}),x.info(C.WALLET_INFO,{evtType:"onWalletChange"})})}async ensureWeb3Ready(){if(this.isWeb3Ready)return;if((await I.getProviderData()).web3Provider.web3Provider){this.isWeb3Ready=!0;return}throw Error("web3.js is not ready")}rawSub(){this.rawSubId=I.onWalletChange(this.onSub)}rawUnSub(){I.offWalletChange(this.rawSubId),this.lastWalletInfoPromise=null}sub(t,{needFirstPush:o=!1,needWeb3Checker:s=!1}={}){if(o){this.lastWalletInfoPromise||(this.lastWalletInfoPromise=Ae().then(i=>i.currentAccount.walletId?I.createAdapter().then(()=>s?this.ensureWeb3Ready():null).then(()=>i):i));let c=this.lastWalletInfoPromise;c.then(i=>{this.handlers.includes(t)&&this.lastWalletInfoPromise===c&&(t(i),x.info(C.WALLET_INFO,{evtType:"first_push_success"}))}).catch(i=>{x.info(C.WALLET_INFO,{evtType:"first_push_failed",error:i})})}return super.sub(t)}},Ie=O,gt=new O;var De=new ye,ke=new Ie;function ve(r){return B()?()=>{}:De.sub(r)}function _e(r,e){return B()?()=>{}:ke.sub(r,e)}var b=class{constructor(){this.hasInitWalletInfo=!1;this.walletInfo=q;this.chainId=0;this.referralInfo={refCode:"",referralCommissionAddress:""};this.walletChange=(e=q)=>{this.hasInitWalletInfo||(this.hasInitWalletInfo=!0);let{currentAccount:t,...o}=e,s={...q,...t,...o};this.setWalletInfo(s)};this.chainChange=e=>{this.setChainId(e)};this.getAddressByChainId=e=>this.walletInfo?.chainIdAddressMap?.[e]||W;Se(this),this.init()}setWalletInfo(e){e.walletId!==this.walletInfo.walletId&&this.setReferralInfo({refCode:"",referralCommissionAddress:""}),this.walletInfo=e}setReferralInfo(e){this.referralInfo=e}setChainId(e){this.chainId=e}init(){_e(this.walletChange,{needFirstPush:!0,needWeb3Checker:!0}),ve(this.chainChange)}get computedIsOKXWallet(){return this.walletInfo.isOkxWallet}get computedTeeInfo(){return this.walletInfo.tee}get computedTargetWalletId(){return this.walletInfo?.targetWalletId||W}get isConnectedWallet(){return!!this.walletInfo?.walletId}get computedAccountId(){return this.walletInfo?.walletId||W}get computedAccountWalletAddressesArray(){let e=this.walletInfo?.address;return e?Array.isArray(e)?le(e):[e]:[]}get computedSignWalletAddress(){let e=this.computedAccountWalletAddressesArray;return e?.length===1?e[0]:this.getAddressByChainId(fe.ETHEREUM_MAINNET)}};b.storeId="newAccountStore",b.storeName="NewAccountStore";var Me=b,te=Me,Dt=()=>new b;n();a();var m=E(k());n();a();var v=class{constructor(){this.storeInstances=new Map}static getFactory(){return v.instance||(v.instance=new v),v.instance}getInstance(e){if(!this.storeInstances.has(e)||B()){let t=new e;this.storeInstances.set(e,t)}return this.storeInstances.get(e)}clearInstance(e){this.storeInstances.delete(e)}clearAll(){this.storeInstances.clear()}};function Ce(r){return v.getFactory().getInstance(r)}var re=(0,m.createContext)(null);function Ne(r,e,t){let o=new Map,s=new Map,c=new Set,i=new Set,g=u=>typeof u=="function"&&typeof u.storeId=="string",Pe=u=>typeof u=="function"&&typeof u.serviceId=="string";e?.forEach(u=>{if(g(u)){let w=u;if(r?.getStore(w)){console.warn(`[LayeredStoreProvider] Store conflict: "${w.storeId}" (${w.storeName}) already exists, please check if you really need it, and skip registration`);return}let _=Ce(w);o.set(w.storeId,_);return}let d=u(),l=d.constructor;if(!r?.getStore(l)){o.set(l.storeId,d),c.add(d);return}throw new Error(`[LayeredStoreProvider] Store conflict: "${l.storeId}" (${l.storeName}) already exists in parent context. Duplicate injection is forbidden.`)});let ie={getStore:u=>{let d=u.storeId,l=o.get(d);return l||r?.getStore(u)},getService:u=>{let d=u.serviceId,l=s.get(d);return l||r?.getService(u)},getAllStores:()=>{let u=new Map;return r?.getAllStores().forEach((d,l)=>{u.set(l,d)}),o.forEach((d,l)=>{u.set(l,d)}),u},getAllServices:()=>{let u=new Map;return r?.getAllServices().forEach((d,l)=>{u.set(l,d)}),s.forEach((d,l)=>{u.set(l,d)}),u}};t?.forEach(u=>{if(Pe(u)){let _=u;if(r?.getService(_))throw new Error(`[LayeredStoreProvider] Service conflict: "${_.serviceId}" (${_.serviceName}) already exists in parent context. Duplicate injection is forbidden.`);let ue=new _(ie);s.set(_.serviceId,ue),i.add(ue);return}let d=u(ie),l=d.constructor;if(!r?.getService(l)){s.set(l.serviceId,d),i.add(d);return}throw new Error(`[LayeredStoreProvider] Service conflict: "${l.serviceId}" (${l.serviceName}) already exists in parent context. Duplicate injection is forbidden.`)});let $=new Map;r?.getAllStores().forEach((u,d)=>{$.set(d,u)}),o.forEach((u,d)=>{$.set(d,u)});let K=new Map;return r?.getAllServices().forEach((u,d)=>{K.set(d,u)}),s.forEach((u,d)=>{K.set(d,u)}),{contextValue:{getStore:u=>{let d=u.storeId,l=o.get(d);return l||r?.getStore(u)},getService:u=>{let d=u.serviceId,l=s.get(d);return l||r?.getService(u)},getAllStores:()=>$,getAllServices:()=>K},currentStores:o,currentServices:s,destroyStores:c,destroyServices:i}}function qe({children:r,stores:e,services:t}){let o=(0,m.useContext)(re),[s]=(0,m.useState)(()=>({parentContext:o,stores:e,services:t})),[c]=(0,m.useState)(()=>Ne(o,e,t));return(0,m.useEffect)(()=>()=>{c.destroyServices.forEach(i=>{i.destroy?.()}),c.destroyStores.forEach(i=>{i.destroy?.()})},[]),m.default.createElement(re.Provider,{value:c.contextValue},r)}function oe(){let r=(0,m.useContext)(re);if(!r)throw new Error("useLayeredStoreContext must be used within a LayeredStoreProvider");return r}function We(r){let e=oe(),t=!1;if(Array.isArray(r)){let s=r.map(c=>e.getStore(c));if(t){let c=r.filter((i,g)=>!s[g]).map(i=>`"${i.storeId}" (${i.storeName??i.name??"UnknownStore"})`);if(c.length)throw new Error(`[useLayeredStore] Missing store(s) in LayeredStoreProvider context: ${c.join(", ")}. Did you forget to register them in an ancestor <LayeredStoreProvider stores={[...]} />?`)}return s}let o=e.getStore(r);if(!o&&t){let s=r;throw new Error(`[useLayeredStore] Store not found in LayeredStoreProvider context: "${s.storeId}" (${s.storeName??s.name??"UnknownStore"}). Did you forget to register it in an ancestor <LayeredStoreProvider stores={[...]} />?`)}return o}function se(r){let e=oe(),t=!1;if(Array.isArray(r)){let s=r.map(c=>e.getService(c));if(t){let c=r.filter((i,g)=>!s[g]).map(i=>`"${i.serviceId}" (${i.serviceName??i.name??"UnknownService"})`);if(c.length)throw new Error(`[useLayeredService] Missing service(s) in LayeredStoreProvider context: ${c.join(", ")}. Did you forget to register them in an ancestor <LayeredStoreProvider services={[...]} />?`)}return s}let o=e.getService(r);if(!o&&t){let s=r;throw new Error(`[useLayeredService] Service not found in LayeredStoreProvider context: "${s.serviceId}" (${s.serviceName??s.name??"UnknownService"}). Did you forget to register it in an ancestor <LayeredStoreProvider services={[...]} />?`)}return o}n();a();n();a();var D=class{constructor(e){this.context=e}getStore(e){return this.context.getStore(e)}getService(e){return this.context.getService(e)}};n();a();var xe=(r="")=>{let e=r.substring(0,10);return r.length>10?`${e}...`:r};n();a();n();a();n();a();n();a();async function we(r,e){return await he.get("/priapi/v6/dx/trade/multi/saving/summary",{params:r,...e})}n();a();n();a();G();n();a();var be="Aborted";n();a();var F=class{constructor(){this.pendingPromises=new Map}schedule(e,t){let o=this.pendingPromises.get(e);if(o)return o;let s=t();return this.pendingPromises.set(e,s),s.finally(()=>{this.onRequestComplete(e)})}onRequestComplete(e){this.pendingPromises.delete(e)}dispose(){this.pendingPromises.clear()}};var H=class{constructor(e){this.UNIQ_DATA_KEY="use_this_key_when_multiple_copies_of_data_dont_coexist";this.data=new Map;this.error=new Map;this.loading=new Map;this.strategy=new F;e?.strategy&&(this.strategy=e.strategy)}getRequestKey(e){return e??this.UNIQ_DATA_KEY}setError(e,t){Q(t)||this.error.set(e,t)}setLoading(e,t){this.loading.set(e,t)}setData(e,t){de(t)?this.data.delete(e):this.data.set(e,t)}onPreRequest(...[e,t]){}formatConfig(...[e,t]){return e}formatResponse(e){return e}onError(e){throw e}onSuccess(e,...[t,o]){}scheduleRequest(e,t,o){return this.strategy.schedule(e,()=>this.doRequest(t,o),o)}async startRequest(e,t){let o=this.getRequestKey(t?.key);try{this.setLoading(o,!0),this.onPreRequest(e,t);let s=this.formatConfig(e,t),c=pe(),i=await this.scheduleRequest(o,s,c),g=this.formatResponse(i);return this.setData(o,g),this.onSuccess(g,e,t),g}catch(s){if(s?.message===be||Q(s))throw s;return this.setError(o,s),this.onError(s)}finally{this.setLoading(o,!1)}}dispose(){this.strategy.dispose?.(),this.data.clear(),this.error.clear(),this.loading.clear()}};var T=class extends H{fetch(e,t){return this.startRequest(e,t)}getData(e){return this.data.get(this.getRequestKey(e))}getError(e){return this.error.get(this.getRequestKey(e))}getLoading(e){return this.loading.get(this.getRequestKey(e))??!1}};T.mobxAnnotations={data:p,error:p,loading:p,setError:h,setLoading:h,setData:h};var Te="mySurplusHistory",R=class extends T{constructor(){super();this.storeId=Te;this.storeName=Te;N(this,T.mobxAnnotations)}doRequest(t){return we(t.params,t)}};var Re="mySurplusHistoryService",P=class extends D{constructor(t){super(t);this.orderSurplusModalVisible=!1;this.mySurplusHistoryModalVisible=!1;this.mySurplusShareModalVisible=!1;this.orderSurplusShareModalVisible=!1;this.surplusOrderSnapshot=null;this.surplusFaqModalVisible=!1;N(this,{surplusHistoryData:j,surplusHistoryLoading:j,orderSurplusModalVisible:p,mySurplusHistoryModalVisible:p,mySurplusShareModalVisible:p,orderSurplusShareModalVisible:p,surplusOrderSnapshot:p,surplusFaqModalVisible:p,setOrderSurplusModalVisible:h,setMySurplusHistoryModalVisible:h,setMySurplusShareModalVisible:h,setOrderSurplusShareModalVisible:h,setSurplusOrderSnapshot:h,setSurplusFaqModalVisible:h})}get surplusHistoryData(){let t=this.getStore(te).computedAccountId;return this.getStore(R).getData(t)?.data}get surplusHistoryLoading(){let t=this.getStore(te).computedAccountId,o=this.getStore(R);return o.getData(t)?!1:o.getLoading(t)}async fetchSurplusHistory(t){if(!t)return;this.getStore(R).fetch({params:{accountId:t}},{key:t})}setOrderSurplusModalVisible(t){this.orderSurplusModalVisible=t}setMySurplusHistoryModalVisible(t){this.mySurplusHistoryModalVisible=t}setMySurplusShareModalVisible(t){this.mySurplusShareModalVisible=t}setOrderSurplusShareModalVisible(t){this.orderSurplusShareModalVisible=t}setSurplusOrderSnapshot(t){this.surplusOrderSnapshot=t}setSurplusFaqModalVisible(t){this.surplusFaqModalVisible=t}};P.serviceId=Re,P.serviceName=Re;var Hr=()=>se(P);n();a();var ne=E(k());var Ve=({tokenSymbol:r="",tokenName:e="",className:t="",disableTooltip:o=!1})=>{let s=xe(r),c=e||r;return ne.default.createElement(M,{title:c,textOverflow:{text:c},disabled:o},ne.default.createElement("span",{className:t},s))},jr=Ve;n();a();var U=(r,e)=>`${A.thousandFormat(r.toFixed(2),{style:"percent",...e})}`;function Oe(r,e){return`${A.BigNumber(r).gt(0)?"+":""}${U(r,e)}`}var ae=99999,Fe=({bigValue:r,needShowMaxText:e,options:t,formatFunction:o})=>r.gt(.01)&&r.lte(ae)||!e?o(r,t):r.gt(ae)&&e?`>${U(ae,{...t,needZero:!1})}`:z;function eo(r=0,{needSign:e=!0,smallThanMinNumber:t=!1,needShowMaxText:o=!0,...s}={}){let c=e?Oe:U,i=A.BigNumber(r);return i.isNaN()?z:t&&i.lt(.01)&&i.gt(0)?`<${c(.01,s)}`:i.lt(-99.99)?`<${U(-99.99,s)}`:i.gte(-99.99)&&i.lt(-.01)?c(i,s):i.gte(-.01)&&i.lt(0)?c(-.01,s):i.eq(0)?A.thousandFormat("0.00",{style:"percent",...s}):i.gt(0)&&i.lte(.01)?c(.01,s):Fe({bigValue:i,needShowMaxText:o,options:s,formatFunction:c})}export{gt as a,te as b,Dt as c,qe as d,We as e,se as f,D as g,xe as h,Ge as i,je as j,be as k,T as l,Hr as m,Be as n,eo as o,jr as p};
//# sourceMappingURL=chunk-KUKFUJBA.js.map
